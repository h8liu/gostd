<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4696992">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4697047">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4697101">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4697152">//&nbsp;Package&nbsp;regexp&nbsp;implements&nbsp;regular&nbsp;expression&nbsp;search.</span><br>
<span class="lineno"></span><span class="comment" id="4697208">//</span><br>
<span class="lineno"></span><span class="comment" id="4697211">//&nbsp;The&nbsp;syntax&nbsp;of&nbsp;the&nbsp;regular&nbsp;expressions&nbsp;accepted&nbsp;is&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="4697273">//&nbsp;general&nbsp;syntax&nbsp;used&nbsp;by&nbsp;Perl,&nbsp;Python,&nbsp;and&nbsp;other&nbsp;languages.</span><br>
<span class="lineno"></span><span class="comment" id="4697334">//&nbsp;More&nbsp;precisely,&nbsp;it&nbsp;is&nbsp;the&nbsp;syntax&nbsp;accepted&nbsp;by&nbsp;RE2&nbsp;and&nbsp;described&nbsp;at</span><br>
<span class="lineno">10</span><span class="comment" id="4697403">//&nbsp;http://code.google.com/p/re2/wiki/Syntax,&nbsp;except&nbsp;for&nbsp;\C.</span><br>
<span class="lineno"></span><span class="comment" id="4697463">//&nbsp;For&nbsp;an&nbsp;overview&nbsp;of&nbsp;the&nbsp;syntax,&nbsp;run</span><br>
<span class="lineno"></span><span class="comment" id="4697501">//&nbsp;&nbsp;&nbsp;godoc&nbsp;regexp/syntax</span><br>
<span class="lineno"></span><span class="comment" id="4697526">//</span><br>
<span class="lineno"></span><span class="comment" id="4697529">//&nbsp;The&nbsp;regexp&nbsp;implementation&nbsp;provided&nbsp;by&nbsp;this&nbsp;package&nbsp;is</span><br>
<span class="lineno">15</span><span class="comment" id="4697586">//&nbsp;guaranteed&nbsp;to&nbsp;run&nbsp;in&nbsp;time&nbsp;linear&nbsp;in&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="4697648">//&nbsp;(This&nbsp;is&nbsp;a&nbsp;property&nbsp;not&nbsp;guaranteed&nbsp;by&nbsp;most&nbsp;open&nbsp;source</span><br>
<span class="lineno"></span><span class="comment" id="4697706">//&nbsp;implementations&nbsp;of&nbsp;regular&nbsp;expressions.)&nbsp;For&nbsp;more&nbsp;information</span><br>
<span class="lineno"></span><span class="comment" id="4697771">//&nbsp;about&nbsp;this&nbsp;property,&nbsp;see</span><br>
<span class="lineno"></span><span class="comment" id="4697799">//&nbsp;&nbsp;&nbsp;&nbsphttp://swtch.com/~rsc/regexp/regexp1.html</span><br>
<span class="lineno">20</span><span class="comment" id="4697844">//&nbsp;or&nbsp;any&nbsp;book&nbsp;about&nbsp;automata&nbsp;theory.</span><br>
<span class="lineno"></span><span class="comment" id="4697882">//</span><br>
<span class="lineno"></span><span class="comment" id="4697885">//&nbsp;All&nbsp;characters&nbsp;are&nbsp;UTF-8-encoded&nbsp;code&nbsp;points.</span><br>
<span class="lineno"></span><span class="comment" id="4697934">//</span><br>
<span class="lineno"></span><span class="comment" id="4697937">//&nbsp;There&nbsp;are&nbsp;16&nbsp;methods&nbsp;of&nbsp;Regexp&nbsp;that&nbsp;match&nbsp;a&nbsp;regular&nbsp;expression&nbsp;and&nbsp;identify</span><br>
<span class="lineno">25</span><span class="comment" id="4698016">//&nbsp;the&nbsp;matched&nbsp;text.&nbsp;&nbsp;Their&nbsp;names&nbsp;are&nbsp;matched&nbsp;by&nbsp;this&nbsp;regular&nbsp;expression:</span><br>
<span class="lineno"></span><span class="comment" id="4698090">//</span><br>
<span class="lineno"></span><span class="comment" id="4698093">//&nbsp;&nbsp;&nbsp;&nbspFind(All)?(String)?(Submatch)?(Index)?</span><br>
<span class="lineno"></span><span class="comment" id="4698135">//</span><br>
<span class="lineno"></span><span class="comment" id="4698138">//&nbsp;If&nbsp;&#39;All&#39;&nbsp;is&nbsp;present,&nbsp;the&nbsp;routine&nbsp;matches&nbsp;successive&nbsp;non-overlapping</span><br>
<span class="lineno">30</span><span class="comment" id="4698209">//&nbsp;matches&nbsp;of&nbsp;the&nbsp;entire&nbsp;expression.&nbsp;&nbsp;Empty&nbsp;matches&nbsp;abutting&nbsp;a&nbsp;preceding</span><br>
<span class="lineno"></span><span class="comment" id="4698282">//&nbsp;match&nbsp;are&nbsp;ignored.&nbsp;&nbsp;The&nbsp;return&nbsp;value&nbsp;is&nbsp;a&nbsp;slice&nbsp;containing&nbsp;the&nbsp;successive</span><br>
<span class="lineno"></span><span class="comment" id="4698359">//&nbsp;return&nbsp;values&nbsp;of&nbsp;the&nbsp;corresponding&nbsp;non-&#39;All&#39;&nbsp;routine.&nbsp;&nbsp;These&nbsp;routines&nbsp;take</span><br>
<span class="lineno"></span><span class="comment" id="4698437">//&nbsp;an&nbsp;extra&nbsp;integer&nbsp;argument,&nbsp;n;&nbsp;if&nbsp;n&nbsp;&gt;=&nbsp;0,&nbsp;the&nbsp;function&nbsp;returns&nbsp;at&nbsp;most&nbsp;n</span><br>
<span class="lineno"></span><span class="comment" id="4698512">//&nbsp;matches/submatches.</span><br>
<span class="lineno">35</span><span class="comment" id="4698535">//</span><br>
<span class="lineno"></span><span class="comment" id="4698538">//&nbsp;If&nbsp;&#39;String&#39;&nbsp;is&nbsp;present,&nbsp;the&nbsp;argument&nbsp;is&nbsp;a&nbsp;string;&nbsp;otherwise&nbsp;it&nbsp;is&nbsp;a&nbsp;slice</span><br>
<span class="lineno"></span><span class="comment" id="4698615">//&nbsp;of&nbsp;bytes;&nbsp;return&nbsp;values&nbsp;are&nbsp;adjusted&nbsp;as&nbsp;appropriate.</span><br>
<span class="lineno"></span><span class="comment" id="4698671">//</span><br>
<span class="lineno"></span><span class="comment" id="4698674">//&nbsp;If&nbsp;&#39;Submatch&#39;&nbsp;is&nbsp;present,&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;a&nbsp;slice&nbsp;identifying&nbsp;the</span><br>
<span class="lineno">40</span><span class="comment" id="4698747">//&nbsp;successive&nbsp;submatches&nbsp;of&nbsp;the&nbsp;expression.&nbsp;Submatches&nbsp;are&nbsp;matches&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4698817">//&nbsp;parenthesized&nbsp;subexpressions&nbsp;(also&nbsp;known&nbsp;as&nbsp;capturing&nbsp;groups)&nbsp;within&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4698893">//&nbsp;regular&nbsp;expression,&nbsp;numbered&nbsp;from&nbsp;left&nbsp;to&nbsp;right&nbsp;in&nbsp;order&nbsp;of&nbsp;opening</span><br>
<span class="lineno"></span><span class="comment" id="4698964">//&nbsp;parenthesis.&nbsp;Submatch&nbsp;0&nbsp;is&nbsp;the&nbsp;match&nbsp;of&nbsp;the&nbsp;entire&nbsp;expression,&nbsp;submatch&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="4699041">//&nbsp;the&nbsp;match&nbsp;of&nbsp;the&nbsp;first&nbsp;parenthesized&nbsp;subexpression,&nbsp;and&nbsp;so&nbsp;on.</span><br>
<span class="lineno">45</span><span class="comment" id="4699107">//</span><br>
<span class="lineno"></span><span class="comment" id="4699110">//&nbsp;If&nbsp;&#39;Index&#39;&nbsp;is&nbsp;present,&nbsp;matches&nbsp;and&nbsp;submatches&nbsp;are&nbsp;identified&nbsp;by&nbsp;byte&nbsp;index</span><br>
<span class="lineno"></span><span class="comment" id="4699188">//&nbsp;pairs&nbsp;within&nbsp;the&nbsp;input&nbsp;string:&nbsp;result[2*n:2*n+1]&nbsp;identifies&nbsp;the&nbsp;indexes&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4699266">//&nbsp;the&nbsp;nth&nbsp;submatch.&nbsp;&nbsp;The&nbsp;pair&nbsp;for&nbsp;n==0&nbsp;identifies&nbsp;the&nbsp;match&nbsp;of&nbsp;the&nbsp;entire</span><br>
<span class="lineno"></span><span class="comment" id="4699341">//&nbsp;expression.&nbsp;&nbsp;If&nbsp;&#39;Index&#39;&nbsp;is&nbsp;not&nbsp;present,&nbsp;the&nbsp;match&nbsp;is&nbsp;identified&nbsp;by&nbsp;the</span><br>
<span class="lineno">50</span><span class="comment" id="4699415">//&nbsp;text&nbsp;of&nbsp;the&nbsp;match/submatch.&nbsp;&nbsp;If&nbsp;an&nbsp;index&nbsp;is&nbsp;negative,&nbsp;it&nbsp;means&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4699486">//&nbsp;subexpression&nbsp;did&nbsp;not&nbsp;match&nbsp;any&nbsp;string&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="4699542">//</span><br>
<span class="lineno"></span><span class="comment" id="4699545">//&nbsp;There&nbsp;is&nbsp;also&nbsp;a&nbsp;subset&nbsp;of&nbsp;the&nbsp;methods&nbsp;that&nbsp;can&nbsp;be&nbsp;applied&nbsp;to&nbsp;text&nbsp;read</span><br>
<span class="lineno"></span><span class="comment" id="4699619">//&nbsp;from&nbsp;a&nbsp;RuneReader:</span><br>
<span class="lineno">55</span><span class="comment" id="4699641">//</span><br>
<span class="lineno"></span><span class="comment" id="4699644">//&nbsp;&nbsp;&nbsp;&nbspMatchReader,&nbsp;FindReaderIndex,&nbsp;FindReaderSubmatchIndex</span><br>
<span class="lineno"></span><span class="comment" id="4699701">//</span><br>
<span class="lineno"></span><span class="comment" id="4699704">//&nbsp;This&nbsp;set&nbsp;may&nbsp;grow.&nbsp;&nbsp;Note&nbsp;that&nbsp;regular&nbsp;expression&nbsp;matches&nbsp;may&nbsp;need&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4699776">//&nbsp;examine&nbsp;text&nbsp;beyond&nbsp;the&nbsp;text&nbsp;returned&nbsp;by&nbsp;a&nbsp;match,&nbsp;so&nbsp;the&nbsp;methods&nbsp;that</span><br>
<span class="lineno">60</span><span class="comment" id="4699849">//&nbsp;match&nbsp;text&nbsp;from&nbsp;a&nbsp;RuneReader&nbsp;may&nbsp;read&nbsp;arbitrarily&nbsp;far&nbsp;into&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span><span class="comment" id="4699921">//&nbsp;before&nbsp;returning.</span><br>
<span class="lineno"></span><span class="comment" id="4699942">//</span><br>
<span class="lineno"></span><span class="comment" id="4699945">//&nbsp;(There&nbsp;are&nbsp;a&nbsp;few&nbsp;other&nbsp;methods&nbsp;that&nbsp;do&nbsp;not&nbsp;match&nbsp;this&nbsp;pattern.)</span><br>
<span class="lineno"></span><span class="comment" id="4700012">//</span><br>
<span class="lineno">65</span><span class="keyword" id="4700015">package</span>&nbsp;<span class="ident" id="4700023">regexp</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4700031">import</span>&nbsp;<span class="op" id="4700038">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4700041">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4700050">&#34;io&#34;</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4700056">&#34;regexp/syntax&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4700073">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4700084">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4700095">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4700103">&#34;unicode&#34;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4700114">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4700129">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4700132">var</span>&nbsp;<span class="ident" id="4700136">debug</span>&nbsp;<span class="op" id="4700142">=</span>&nbsp;<span class="ident" id="4700144">false</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="4700151">//&nbsp;Regexp&nbsp;is&nbsp;the&nbsp;representation&nbsp;of&nbsp;a&nbsp;compiled&nbsp;regular&nbsp;expression.</span><br>
<span class="lineno"></span><span class="comment" id="4700217">//&nbsp;A&nbsp;Regexp&nbsp;is&nbsp;safe&nbsp;for&nbsp;concurrent&nbsp;use&nbsp;by&nbsp;multiple&nbsp;goroutines.</span><br>
<span class="lineno"></span><span class="keyword" id="4700280">type</span>&nbsp;<span class="ident" id="4700285">Regexp</span>&nbsp;<span class="keyword" id="4700292">struct</span>&nbsp;<span class="op" id="4700299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4700302">//&nbsp;read-only&nbsp;after&nbsp;Compile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4700330">expr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4700345">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4700360">//&nbsp;as&nbsp;passed&nbsp;to&nbsp;Compile</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4700385">prog</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4700400">*</span><span class="ident" id="4700401"><a href="/regexp/regexp.go.html#4700056">syntax</a></span><span class="op" id="4700407">.</span><span class="ident" id="4700408">Prog</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4700415">//&nbsp;compiled&nbsp;program</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4700436">onepass</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4700451">*</span><span class="ident" id="4700452"><a href="/regexp/onepass.go.html#4681445">onePassProg</a></span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4700466">//&nbsp;onpass&nbsp;program&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4700492">prefix</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4700507">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4700522">//&nbsp;required&nbsp;prefix&nbsp;in&nbsp;unanchored&nbsp;matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4700564">prefixBytes</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4700579">[</span><span class="op" id="4700580">]</span><span class="builtintype" id="4700581">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4700594">//&nbsp;prefix,&nbsp;as&nbsp;a&nbsp;[]byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4700618">prefixComplete</span>&nbsp;<span class="builtintype" id="4700633">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4700648">//&nbsp;prefix&nbsp;is&nbsp;the&nbsp;entire&nbsp;regexp</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4700680">prefixRune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4700695">rune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4700710">//&nbsp;first&nbsp;rune&nbsp;in&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4700735">prefixEnd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4700750">uint32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4700765">//&nbsp;pc&nbsp;for&nbsp;last&nbsp;rune&nbsp;in&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4700796">cond</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4700811"><a href="/regexp/regexp.go.html#4700056">syntax</a></span><span class="op" id="4700817">.</span><span class="ident" id="4700818">EmptyOp</span>&nbsp;<span class="comment" id="4700826">//&nbsp;empty-width&nbsp;conditions&nbsp;required&nbsp;at&nbsp;start&nbsp;of&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4700880">numSubexp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4700895">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4700900">subexpNames</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4700915">[</span><span class="op" id="4700916">]</span><span class="builtintype" id="4700917">string</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4700925">longest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4700940">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4700947">//&nbsp;cache&nbsp;of&nbsp;machines&nbsp;for&nbsp;running&nbsp;regexp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4700988">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4700996"><a href="/regexp/regexp.go.html#4700095">sync</a></span><span class="op" id="4701000">.</span><span class="ident" id="4701001">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4701008">machine</span>&nbsp;<span class="op" id="4701016">[</span><span class="op" id="4701017">]</span><span class="op" id="4701018">*</span><span class="ident" id="4701019"><a href="/regexp/exec.go.html#4670867">machine</a></span><br>
<span class="lineno">100</span><span class="op" id="4701027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4701030">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;source&nbsp;text&nbsp;used&nbsp;to&nbsp;compile&nbsp;the&nbsp;regular&nbsp;expression.</span><br>
<span class="lineno"></span><span class="keyword" id="4701104">func</span>&nbsp;<span class="op" id="4701109">(</span><span class="ident" id="4701110">re</span>&nbsp;<span class="op" id="4701113">*</span><span class="ident" id="4701114"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4701120">)</span>&nbsp;<span class="ident" id="4701122">String</span><span class="op" id="4701128">(</span><span class="op" id="4701129">)</span>&nbsp;<span class="builtintype" id="4701131">string</span>&nbsp;<span class="op" id="4701138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4701141">return</span>&nbsp;<span class="ident" id="4701148"><a href="/regexp/regexp.go.html#4701110">re</a></span><span class="op" id="4701150">.</span><span class="ident" id="4701151">expr</span><br>
<span class="lineno">105</span><span class="op" id="4701156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4701159">//&nbsp;Compile&nbsp;parses&nbsp;a&nbsp;regular&nbsp;expression&nbsp;and&nbsp;returns,&nbsp;if&nbsp;successful,</span><br>
<span class="lineno"></span><span class="comment" id="4701226">//&nbsp;a&nbsp;Regexp&nbsp;object&nbsp;that&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;match&nbsp;against&nbsp;text.</span><br>
<span class="lineno"></span><span class="comment" id="4701285">//</span><br>
<span class="lineno">110</span><span class="comment" id="4701288">//&nbsp;When&nbsp;matching&nbsp;against&nbsp;text,&nbsp;the&nbsp;regexp&nbsp;returns&nbsp;a&nbsp;match&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4701351">//&nbsp;begins&nbsp;as&nbsp;early&nbsp;as&nbsp;possible&nbsp;in&nbsp;the&nbsp;input&nbsp;(leftmost),&nbsp;and&nbsp;among&nbsp;those</span><br>
<span class="lineno"></span><span class="comment" id="4701423">//&nbsp;it&nbsp;chooses&nbsp;the&nbsp;one&nbsp;that&nbsp;a&nbsp;backtracking&nbsp;search&nbsp;would&nbsp;have&nbsp;found&nbsp;first.</span><br>
<span class="lineno"></span><span class="comment" id="4701496">//&nbsp;This&nbsp;so-called&nbsp;leftmost-first&nbsp;matching&nbsp;is&nbsp;the&nbsp;same&nbsp;semantics</span><br>
<span class="lineno"></span><span class="comment" id="4701560">//&nbsp;that&nbsp;Perl,&nbsp;Python,&nbsp;and&nbsp;other&nbsp;implementations&nbsp;use,&nbsp;although&nbsp;this</span><br>
<span class="lineno">115</span><span class="comment" id="4701627">//&nbsp;package&nbsp;implements&nbsp;it&nbsp;without&nbsp;the&nbsp;expense&nbsp;of&nbsp;backtracking.</span><br>
<span class="lineno"></span><span class="comment" id="4701689">//&nbsp;For&nbsp;POSIX&nbsp;leftmost-longest&nbsp;matching,&nbsp;see&nbsp;CompilePOSIX.</span><br>
<span class="lineno"></span><span class="keyword" id="4701747">func</span>&nbsp;<span class="ident" id="4701752">Compile</span><span class="op" id="4701759">(</span><span class="ident" id="4701760">expr</span>&nbsp;<span class="builtintype" id="4701765">string</span><span class="op" id="4701771">)</span>&nbsp;<span class="op" id="4701773">(</span><span class="op" id="4701774">*</span><span class="ident" id="4701775"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4701781">,</span>&nbsp;<span class="builtintype" id="4701783">error</span><span class="op" id="4701788">)</span>&nbsp;<span class="op" id="4701790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4701793">return</span>&nbsp;<span class="ident" id="4701800"><a href="/regexp/regexp.go.html#4703323">compile</a></span><span class="op" id="4701807">(</span><span class="ident" id="4701808"><a href="/regexp/regexp.go.html#4701760">expr</a></span><span class="op" id="4701812">,</span>&nbsp;<span class="ident" id="4701814"><a href="/regexp/regexp.go.html#4700056">syntax</a></span><span class="op" id="4701820">.</span><span class="ident" id="4701821">Perl</span><span class="op" id="4701825">,</span>&nbsp;<span class="ident" id="4701827">false</span><span class="op" id="4701832">)</span><br>
<span class="lineno"></span><span class="op" id="4701834">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="4701837">//&nbsp;CompilePOSIX&nbsp;is&nbsp;like&nbsp;Compile&nbsp;but&nbsp;restricts&nbsp;the&nbsp;regular&nbsp;expression</span><br>
<span class="lineno"></span><span class="comment" id="4701906">//&nbsp;to&nbsp;POSIX&nbsp;ERE&nbsp;(egrep)&nbsp;syntax&nbsp;and&nbsp;changes&nbsp;the&nbsp;match&nbsp;semantics&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4701972">//&nbsp;leftmost-longest.</span><br>
<span class="lineno"></span><span class="comment" id="4701993">//</span><br>
<span class="lineno">125</span><span class="comment" id="4701996">//&nbsp;That&nbsp;is,&nbsp;when&nbsp;matching&nbsp;against&nbsp;text,&nbsp;the&nbsp;regexp&nbsp;returns&nbsp;a&nbsp;match&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4702068">//&nbsp;begins&nbsp;as&nbsp;early&nbsp;as&nbsp;possible&nbsp;in&nbsp;the&nbsp;input&nbsp;(leftmost),&nbsp;and&nbsp;among&nbsp;those</span><br>
<span class="lineno"></span><span class="comment" id="4702140">//&nbsp;it&nbsp;chooses&nbsp;a&nbsp;match&nbsp;that&nbsp;is&nbsp;as&nbsp;long&nbsp;as&nbsp;possible.</span><br>
<span class="lineno"></span><span class="comment" id="4702191">//&nbsp;This&nbsp;so-called&nbsp;leftmost-longest&nbsp;matching&nbsp;is&nbsp;the&nbsp;same&nbsp;semantics</span><br>
<span class="lineno"></span><span class="comment" id="4702257">//&nbsp;that&nbsp;early&nbsp;regular&nbsp;expression&nbsp;implementations&nbsp;used&nbsp;and&nbsp;that&nbsp;POSIX</span><br>
<span class="lineno">130</span><span class="comment" id="4702326">//&nbsp;specifies.</span><br>
<span class="lineno"></span><span class="comment" id="4702340">//</span><br>
<span class="lineno"></span><span class="comment" id="4702343">//&nbsp;However,&nbsp;there&nbsp;can&nbsp;be&nbsp;multiple&nbsp;leftmost-longest&nbsp;matches,&nbsp;with&nbsp;different</span><br>
<span class="lineno"></span><span class="comment" id="4702418">//&nbsp;submatch&nbsp;choices,&nbsp;and&nbsp;here&nbsp;this&nbsp;package&nbsp;diverges&nbsp;from&nbsp;POSIX.</span><br>
<span class="lineno"></span><span class="comment" id="4702482">//&nbsp;Among&nbsp;the&nbsp;possible&nbsp;leftmost-longest&nbsp;matches,&nbsp;this&nbsp;package&nbsp;chooses</span><br>
<span class="lineno">135</span><span class="comment" id="4702551">//&nbsp;the&nbsp;one&nbsp;that&nbsp;a&nbsp;backtracking&nbsp;search&nbsp;would&nbsp;have&nbsp;found&nbsp;first,&nbsp;while&nbsp;POSIX</span><br>
<span class="lineno"></span><span class="comment" id="4702625">//&nbsp;specifies&nbsp;that&nbsp;the&nbsp;match&nbsp;be&nbsp;chosen&nbsp;to&nbsp;maximize&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="4702699">//&nbsp;subexpression,&nbsp;then&nbsp;the&nbsp;second,&nbsp;and&nbsp;so&nbsp;on&nbsp;from&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span><span class="comment" id="4702764">//&nbsp;The&nbsp;POSIX&nbsp;rule&nbsp;is&nbsp;computationally&nbsp;prohibitive&nbsp;and&nbsp;not&nbsp;even&nbsp;well-defined.</span><br>
<span class="lineno"></span><span class="comment" id="4702840">//&nbsp;See&nbsp;http://swtch.com/~rsc/regexp/regexp2.html#posix&nbsp;for&nbsp;details.</span><br>
<span class="lineno">140</span><span class="keyword" id="4702908">func</span>&nbsp;<span class="ident" id="4702913">CompilePOSIX</span><span class="op" id="4702925">(</span><span class="ident" id="4702926">expr</span>&nbsp;<span class="builtintype" id="4702931">string</span><span class="op" id="4702937">)</span>&nbsp;<span class="op" id="4702939">(</span><span class="op" id="4702940">*</span><span class="ident" id="4702941"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4702947">,</span>&nbsp;<span class="builtintype" id="4702949">error</span><span class="op" id="4702954">)</span>&nbsp;<span class="op" id="4702956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4702959">return</span>&nbsp;<span class="ident" id="4702966"><a href="/regexp/regexp.go.html#4703323">compile</a></span><span class="op" id="4702973">(</span><span class="ident" id="4702974"><a href="/regexp/regexp.go.html#4702926">expr</a></span><span class="op" id="4702978">,</span>&nbsp;<span class="ident" id="4702980"><a href="/regexp/regexp.go.html#4700056">syntax</a></span><span class="op" id="4702986">.</span><span class="ident" id="4702987">POSIX</span><span class="op" id="4702992">,</span>&nbsp;<span class="ident" id="4702994">true</span><span class="op" id="4702998">)</span><br>
<span class="lineno"></span><span class="op" id="4703000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4703003">//&nbsp;Longest&nbsp;makes&nbsp;future&nbsp;searches&nbsp;prefer&nbsp;the&nbsp;leftmost-longest&nbsp;match.</span><br>
<span class="lineno">145</span><span class="comment" id="4703071">//&nbsp;That&nbsp;is,&nbsp;when&nbsp;matching&nbsp;against&nbsp;text,&nbsp;the&nbsp;regexp&nbsp;returns&nbsp;a&nbsp;match&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4703143">//&nbsp;begins&nbsp;as&nbsp;early&nbsp;as&nbsp;possible&nbsp;in&nbsp;the&nbsp;input&nbsp;(leftmost),&nbsp;and&nbsp;among&nbsp;those</span><br>
<span class="lineno"></span><span class="comment" id="4703215">//&nbsp;it&nbsp;chooses&nbsp;a&nbsp;match&nbsp;that&nbsp;is&nbsp;as&nbsp;long&nbsp;as&nbsp;possible.</span><br>
<span class="lineno"></span><span class="keyword" id="4703266">func</span>&nbsp;<span class="op" id="4703271">(</span><span class="ident" id="4703272">re</span>&nbsp;<span class="op" id="4703275">*</span><span class="ident" id="4703276"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4703282">)</span>&nbsp;<span class="ident" id="4703284">Longest</span><span class="op" id="4703291">(</span><span class="op" id="4703292">)</span>&nbsp;<span class="op" id="4703294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4703297"><a href="/regexp/regexp.go.html#4703272">re</a></span><span class="op" id="4703299">.</span><span class="ident" id="4703300">longest</span>&nbsp;<span class="op" id="4703308">=</span>&nbsp;<span class="ident" id="4703310">true</span><br>
<span class="lineno">150</span><span class="op" id="4703315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4703318">func</span>&nbsp;<span class="ident" id="4703323">compile</span><span class="op" id="4703330">(</span><span class="ident" id="4703331">expr</span>&nbsp;<span class="builtintype" id="4703336">string</span><span class="op" id="4703342">,</span>&nbsp;<span class="ident" id="4703344">mode</span>&nbsp;<span class="ident" id="4703349"><a href="/regexp/regexp.go.html#4700056">syntax</a></span><span class="op" id="4703355">.</span><span class="ident" id="4703356">Flags</span><span class="op" id="4703361">,</span>&nbsp;<span class="ident" id="4703363">longest</span>&nbsp;<span class="builtintype" id="4703371">bool</span><span class="op" id="4703375">)</span>&nbsp;<span class="op" id="4703377">(</span><span class="op" id="4703378">*</span><span class="ident" id="4703379"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4703385">,</span>&nbsp;<span class="builtintype" id="4703387">error</span><span class="op" id="4703392">)</span>&nbsp;<span class="op" id="4703394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4703397">re</span><span class="op" id="4703399">,</span>&nbsp;<span class="ident" id="4703401">err</span>&nbsp;<span class="op" id="4703405">:=</span>&nbsp;<span class="ident" id="4703408"><a href="/regexp/regexp.go.html#4700056">syntax</a></span><span class="op" id="4703414">.</span><span class="ident" id="4703415">Parse</span><span class="op" id="4703420">(</span><span class="ident" id="4703421"><a href="/regexp/regexp.go.html#4703331">expr</a></span><span class="op" id="4703425">,</span>&nbsp;<span class="ident" id="4703427"><a href="/regexp/regexp.go.html#4703344">mode</a></span><span class="op" id="4703431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4703434">if</span>&nbsp;<span class="ident" id="4703437"><a href="/regexp/regexp.go.html#4703401">err</a></span>&nbsp;<span class="op" id="4703441">!=</span>&nbsp;<span class="ident" id="4703444">nil</span>&nbsp;<span class="op" id="4703448">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4703452">return</span>&nbsp;<span class="ident" id="4703459">nil</span><span class="op" id="4703462">,</span>&nbsp;<span class="ident" id="4703464"><a href="/regexp/regexp.go.html#4703401">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4703469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4703472">maxCap</span>&nbsp;<span class="op" id="4703479">:=</span>&nbsp;<span class="ident" id="4703482"><a href="/regexp/regexp.go.html#4703397">re</a></span><span class="op" id="4703484">.</span><span class="ident" id="4703485">MaxCap</span><span class="op" id="4703491">(</span><span class="op" id="4703492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4703495">capNames</span>&nbsp;<span class="op" id="4703504">:=</span>&nbsp;<span class="ident" id="4703507"><a href="/regexp/regexp.go.html#4703397">re</a></span><span class="op" id="4703509">.</span><span class="ident" id="4703510">CapNames</span><span class="op" id="4703518">(</span><span class="op" id="4703519">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4703523"><a href="/regexp/regexp.go.html#4703397">re</a></span>&nbsp;<span class="op" id="4703526">=</span>&nbsp;<span class="ident" id="4703528"><a href="/regexp/regexp.go.html#4703397">re</a></span><span class="op" id="4703530">.</span><span class="ident" id="4703531">Simplify</span><span class="op" id="4703539">(</span><span class="op" id="4703540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4703543">prog</span><span class="op" id="4703547">,</span>&nbsp;<span class="ident" id="4703549"><a href="/regexp/regexp.go.html#4703401">err</a></span>&nbsp;<span class="op" id="4703553">:=</span>&nbsp;<span class="ident" id="4703556"><a href="/regexp/regexp.go.html#4700056">syntax</a></span><span class="op" id="4703562">.</span><span class="ident" id="4703563">Compile</span><span class="op" id="4703570">(</span><span class="ident" id="4703571"><a href="/regexp/regexp.go.html#4703397">re</a></span><span class="op" id="4703573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4703576">if</span>&nbsp;<span class="ident" id="4703579"><a href="/regexp/regexp.go.html#4703401">err</a></span>&nbsp;<span class="op" id="4703583">!=</span>&nbsp;<span class="ident" id="4703586">nil</span>&nbsp;<span class="op" id="4703590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4703594">return</span>&nbsp;<span class="ident" id="4703601">nil</span><span class="op" id="4703604">,</span>&nbsp;<span class="ident" id="4703606"><a href="/regexp/regexp.go.html#4703401">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4703611">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4703614">regexp</span>&nbsp;<span class="op" id="4703621">:=</span>&nbsp;<span class="op" id="4703624">&amp;</span><span class="ident" id="4703625"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4703631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4703635">expr</span><span class="op" id="4703639">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4703648"><a href="/regexp/regexp.go.html#4703331">expr</a></span><span class="op" id="4703652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4703656">prog</span><span class="op" id="4703660">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4703669"><a href="/regexp/regexp.go.html#4703543">prog</a></span><span class="op" id="4703673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4703677">onepass</span><span class="op" id="4703684">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4703690"><a href="/regexp/onepass.go.html#4695820">compileOnePass</a></span><span class="op" id="4703704">(</span><span class="ident" id="4703705"><a href="/regexp/regexp.go.html#4703543">prog</a></span><span class="op" id="4703709">)</span><span class="op" id="4703710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4703714">numSubexp</span><span class="op" id="4703723">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4703727"><a href="/regexp/regexp.go.html#4703472">maxCap</a></span><span class="op" id="4703733">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4703737">subexpNames</span><span class="op" id="4703748">:</span>&nbsp;<span class="ident" id="4703750"><a href="/regexp/regexp.go.html#4703495">capNames</a></span><span class="op" id="4703758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4703762">cond</span><span class="op" id="4703766">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4703775"><a href="/regexp/regexp.go.html#4703543">prog</a></span><span class="op" id="4703779">.</span><span class="ident" id="4703780">StartCond</span><span class="op" id="4703789">(</span><span class="op" id="4703790">)</span><span class="op" id="4703791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4703795">longest</span><span class="op" id="4703802">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4703808"><a href="/regexp/regexp.go.html#4703363">longest</a></span><span class="op" id="4703815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4703818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4703821">if</span>&nbsp;<span class="ident" id="4703824"><a href="/regexp/regexp.go.html#4703614">regexp</a></span><span class="op" id="4703830">.</span><span class="ident" id="4703831">onepass</span>&nbsp;<span class="op" id="4703839">==</span>&nbsp;<span class="ident" id="4703842"><a href="/regexp/onepass.go.html#4695431">notOnePass</a></span>&nbsp;<span class="op" id="4703853">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4703857"><a href="/regexp/regexp.go.html#4703614">regexp</a></span><span class="op" id="4703863">.</span><span class="ident" id="4703864">prefix</span><span class="op" id="4703870">,</span>&nbsp;<span class="ident" id="4703872"><a href="/regexp/regexp.go.html#4703614">regexp</a></span><span class="op" id="4703878">.</span><span class="ident" id="4703879">prefixComplete</span>&nbsp;<span class="op" id="4703894">=</span>&nbsp;<span class="ident" id="4703896"><a href="/regexp/regexp.go.html#4703543">prog</a></span><span class="op" id="4703900">.</span><span class="ident" id="4703901">Prefix</span><span class="op" id="4703907">(</span><span class="op" id="4703908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4703911">}</span>&nbsp;<span class="keyword" id="4703913">else</span>&nbsp;<span class="op" id="4703918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4703922"><a href="/regexp/regexp.go.html#4703614">regexp</a></span><span class="op" id="4703928">.</span><span class="ident" id="4703929">prefix</span><span class="op" id="4703935">,</span>&nbsp;<span class="ident" id="4703937"><a href="/regexp/regexp.go.html#4703614">regexp</a></span><span class="op" id="4703943">.</span><span class="ident" id="4703944">prefixComplete</span><span class="op" id="4703958">,</span>&nbsp;<span class="ident" id="4703960"><a href="/regexp/regexp.go.html#4703614">regexp</a></span><span class="op" id="4703966">.</span><span class="ident" id="4703967">prefixEnd</span>&nbsp;<span class="op" id="4703977">=</span>&nbsp;<span class="ident" id="4703979"><a href="/regexp/onepass.go.html#4682067">onePassPrefix</a></span><span class="op" id="4703992">(</span><span class="ident" id="4703993"><a href="/regexp/regexp.go.html#4703543">prog</a></span><span class="op" id="4703997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4704000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4704003">if</span>&nbsp;<span class="ident" id="4704006"><a href="/regexp/regexp.go.html#4703614">regexp</a></span><span class="op" id="4704012">.</span><span class="ident" id="4704013">prefix</span>&nbsp;<span class="op" id="4704020">!=</span>&nbsp;<span class="string" id="4704023">&#34;&#34;</span>&nbsp;<span class="op" id="4704026">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4704030">//&nbsp;TODO(rsc):&nbsp;Remove&nbsp;this&nbsp;allocation&nbsp;by&nbsp;adding</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4704079">//&nbsp;IndexString&nbsp;to&nbsp;package&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4704114"><a href="/regexp/regexp.go.html#4703614">regexp</a></span><span class="op" id="4704120">.</span><span class="ident" id="4704121">prefixBytes</span>&nbsp;<span class="op" id="4704133">=</span>&nbsp;<span class="op" id="4704135">[</span><span class="op" id="4704136">]</span><span class="builtintype" id="4704137">byte</span><span class="op" id="4704141">(</span><span class="ident" id="4704142"><a href="/regexp/regexp.go.html#4703614">regexp</a></span><span class="op" id="4704148">.</span><span class="ident" id="4704149">prefix</span><span class="op" id="4704155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4704159"><a href="/regexp/regexp.go.html#4703614">regexp</a></span><span class="op" id="4704165">.</span><span class="ident" id="4704166">prefixRune</span><span class="op" id="4704176">,</span>&nbsp;<span class="ident" id="4704178">_</span>&nbsp;<span class="op" id="4704180">=</span>&nbsp;<span class="ident" id="4704182"><a href="/regexp/regexp.go.html#4700114">utf8</a></span><span class="op" id="4704186">.</span><span class="ident" id="4704187">DecodeRuneInString</span><span class="op" id="4704205">(</span><span class="ident" id="4704206"><a href="/regexp/regexp.go.html#4703614">regexp</a></span><span class="op" id="4704212">.</span><span class="ident" id="4704213">prefix</span><span class="op" id="4704219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4704222">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4704225">return</span>&nbsp;<span class="ident" id="4704232"><a href="/regexp/regexp.go.html#4703614">regexp</a></span><span class="op" id="4704238">,</span>&nbsp;<span class="ident" id="4704240">nil</span><br>
<span class="lineno"></span><span class="op" id="4704244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4704247">//&nbsp;get&nbsp;returns&nbsp;a&nbsp;machine&nbsp;to&nbsp;use&nbsp;for&nbsp;matching&nbsp;re.</span><br>
<span class="lineno"></span><span class="comment" id="4704296">//&nbsp;It&nbsp;uses&nbsp;the&nbsp;re&#39;s&nbsp;machine&nbsp;cache&nbsp;if&nbsp;possible,&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">190</span><span class="comment" id="4704352">//&nbsp;unnecessary&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="keyword" id="4704379">func</span>&nbsp;<span class="op" id="4704384">(</span><span class="ident" id="4704385">re</span>&nbsp;<span class="op" id="4704388">*</span><span class="ident" id="4704389"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4704395">)</span>&nbsp;<span class="ident" id="4704397">get</span><span class="op" id="4704400">(</span><span class="op" id="4704401">)</span>&nbsp;<span class="op" id="4704403">*</span><span class="ident" id="4704404"><a href="/regexp/exec.go.html#4670867">machine</a></span>&nbsp;<span class="op" id="4704412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4704415"><a href="/regexp/regexp.go.html#4704385">re</a></span><span class="op" id="4704417">.</span><span class="ident" id="4704418">mu</span><span class="op" id="4704420">.</span><span class="ident" id="4704421">Lock</span><span class="op" id="4704425">(</span><span class="op" id="4704426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4704429">if</span>&nbsp;<span class="ident" id="4704432">n</span>&nbsp;<span class="op" id="4704434">:=</span>&nbsp;<span class="builtinfunc" id="4704437">len</span><span class="op" id="4704440">(</span><span class="ident" id="4704441"><a href="/regexp/regexp.go.html#4704385">re</a></span><span class="op" id="4704443">.</span><span class="ident" id="4704444">machine</span><span class="op" id="4704451">)</span><span class="op" id="4704452">;</span>&nbsp;<span class="ident" id="4704454"><a href="/regexp/regexp.go.html#4704432">n</a></span>&nbsp;<span class="op" id="4704456">&gt;</span>&nbsp;<span class="num" id="4704458">0</span>&nbsp;<span class="op" id="4704460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4704464">z</span>&nbsp;<span class="op" id="4704466">:=</span>&nbsp;<span class="ident" id="4704469"><a href="/regexp/regexp.go.html#4704385">re</a></span><span class="op" id="4704471">.</span><span class="ident" id="4704472">machine</span><span class="op" id="4704479">[</span><span class="ident" id="4704480"><a href="/regexp/regexp.go.html#4704432">n</a></span><span class="op" id="4704481">-</span><span class="num" id="4704482">1</span><span class="op" id="4704483">]</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4704487"><a href="/regexp/regexp.go.html#4704385">re</a></span><span class="op" id="4704489">.</span><span class="ident" id="4704490">machine</span>&nbsp;<span class="op" id="4704498">=</span>&nbsp;<span class="ident" id="4704500"><a href="/regexp/regexp.go.html#4704385">re</a></span><span class="op" id="4704502">.</span><span class="ident" id="4704503">machine</span><span class="op" id="4704510">[</span><span class="op" id="4704511">:</span><span class="ident" id="4704512"><a href="/regexp/regexp.go.html#4704432">n</a></span><span class="op" id="4704513">-</span><span class="num" id="4704514">1</span><span class="op" id="4704515">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4704519"><a href="/regexp/regexp.go.html#4704385">re</a></span><span class="op" id="4704521">.</span><span class="ident" id="4704522">mu</span><span class="op" id="4704524">.</span><span class="ident" id="4704525">Unlock</span><span class="op" id="4704531">(</span><span class="op" id="4704532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4704536">return</span>&nbsp;<span class="ident" id="4704543"><a href="/regexp/regexp.go.html#4704464">z</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4704546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4704549"><a href="/regexp/regexp.go.html#4704385">re</a></span><span class="op" id="4704551">.</span><span class="ident" id="4704552">mu</span><span class="op" id="4704554">.</span><span class="ident" id="4704555">Unlock</span><span class="op" id="4704561">(</span><span class="op" id="4704562">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4704565">z</span>&nbsp;<span class="op" id="4704567">:=</span>&nbsp;<span class="ident" id="4704570"><a href="/regexp/exec.go.html#4671790">progMachine</a></span><span class="op" id="4704581">(</span><span class="ident" id="4704582"><a href="/regexp/regexp.go.html#4704385">re</a></span><span class="op" id="4704584">.</span><span class="ident" id="4704585">prog</span><span class="op" id="4704589">,</span>&nbsp;<span class="ident" id="4704591"><a href="/regexp/regexp.go.html#4704385">re</a></span><span class="op" id="4704593">.</span><span class="ident" id="4704594">onepass</span><span class="op" id="4704601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4704604"><a href="/regexp/regexp.go.html#4704565">z</a></span><span class="op" id="4704605">.</span><span class="ident" id="4704606">re</span>&nbsp;<span class="op" id="4704609">=</span>&nbsp;<span class="ident" id="4704611"><a href="/regexp/regexp.go.html#4704385">re</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4704615">return</span>&nbsp;<span class="ident" id="4704622"><a href="/regexp/regexp.go.html#4704565">z</a></span><br>
<span class="lineno"></span><span class="op" id="4704624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="comment" id="4704627">//&nbsp;put&nbsp;returns&nbsp;a&nbsp;machine&nbsp;to&nbsp;the&nbsp;re&#39;s&nbsp;machine&nbsp;cache.</span><br>
<span class="lineno"></span><span class="comment" id="4704679">//&nbsp;There&nbsp;is&nbsp;no&nbsp;attempt&nbsp;to&nbsp;limit&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;cache,&nbsp;so&nbsp;it&nbsp;will</span><br>
<span class="lineno"></span><span class="comment" id="4704745">//&nbsp;grow&nbsp;to&nbsp;the&nbsp;maximum&nbsp;number&nbsp;of&nbsp;simultaneous&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="4704799">//&nbsp;run&nbsp;using&nbsp;re.&nbsp;&nbsp;(The&nbsp;cache&nbsp;empties&nbsp;when&nbsp;re&nbsp;gets&nbsp;garbage&nbsp;collected.)</span><br>
<span class="lineno"></span><span class="keyword" id="4704869">func</span>&nbsp;<span class="op" id="4704874">(</span><span class="ident" id="4704875">re</span>&nbsp;<span class="op" id="4704878">*</span><span class="ident" id="4704879"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4704885">)</span>&nbsp;<span class="ident" id="4704887">put</span><span class="op" id="4704890">(</span><span class="ident" id="4704891">z</span>&nbsp;<span class="op" id="4704893">*</span><span class="ident" id="4704894"><a href="/regexp/exec.go.html#4670867">machine</a></span><span class="op" id="4704901">)</span>&nbsp;<span class="op" id="4704903">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4704906"><a href="/regexp/regexp.go.html#4704875">re</a></span><span class="op" id="4704908">.</span><span class="ident" id="4704909">mu</span><span class="op" id="4704911">.</span><span class="ident" id="4704912">Lock</span><span class="op" id="4704916">(</span><span class="op" id="4704917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4704920"><a href="/regexp/regexp.go.html#4704875">re</a></span><span class="op" id="4704922">.</span><span class="ident" id="4704923">machine</span>&nbsp;<span class="op" id="4704931">=</span>&nbsp;<span class="builtinfunc" id="4704933">append</span><span class="op" id="4704939">(</span><span class="ident" id="4704940"><a href="/regexp/regexp.go.html#4704875">re</a></span><span class="op" id="4704942">.</span><span class="ident" id="4704943">machine</span><span class="op" id="4704950">,</span>&nbsp;<span class="ident" id="4704952"><a href="/regexp/regexp.go.html#4704891">z</a></span><span class="op" id="4704953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4704956"><a href="/regexp/regexp.go.html#4704875">re</a></span><span class="op" id="4704958">.</span><span class="ident" id="4704959">mu</span><span class="op" id="4704961">.</span><span class="ident" id="4704962">Unlock</span><span class="op" id="4704968">(</span><span class="op" id="4704969">)</span><br>
<span class="lineno"></span><span class="op" id="4704971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="4704974">//&nbsp;MustCompile&nbsp;is&nbsp;like&nbsp;Compile&nbsp;but&nbsp;panics&nbsp;if&nbsp;the&nbsp;expression&nbsp;cannot&nbsp;be&nbsp;parsed.</span><br>
<span class="lineno"></span><span class="comment" id="4705052">//&nbsp;It&nbsp;simplifies&nbsp;safe&nbsp;initialization&nbsp;of&nbsp;global&nbsp;variables&nbsp;holding&nbsp;compiled&nbsp;regular</span><br>
<span class="lineno"></span><span class="comment" id="4705134">//&nbsp;expressions.</span><br>
<span class="lineno"></span><span class="keyword" id="4705150">func</span>&nbsp;<span class="ident" id="4705155">MustCompile</span><span class="op" id="4705166">(</span><span class="ident" id="4705167">str</span>&nbsp;<span class="builtintype" id="4705171">string</span><span class="op" id="4705177">)</span>&nbsp;<span class="op" id="4705179">*</span><span class="ident" id="4705180"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span>&nbsp;<span class="op" id="4705187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4705190">regexp</span><span class="op" id="4705196">,</span>&nbsp;<span class="builtintype" id="4705198">error</span>&nbsp;<span class="op" id="4705204">:=</span>&nbsp;<span class="ident" id="4705207"><a href="/regexp/regexp.go.html#4701752">Compile</a></span><span class="op" id="4705214">(</span><span class="ident" id="4705215"><a href="/regexp/regexp.go.html#4705167">str</a></span><span class="op" id="4705218">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4705221">if</span>&nbsp;<span class="builtintype" id="4705224"><a href="/regexp/regexp.go.html#4705198">error</a></span>&nbsp;<span class="op" id="4705230">!=</span>&nbsp;<span class="ident" id="4705233">nil</span>&nbsp;<span class="op" id="4705237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4705241">panic</span><span class="op" id="4705246">(</span><span class="string" id="4705247">`regexp:&nbsp;Compile(`</span>&nbsp;<span class="op" id="4705266">+</span>&nbsp;<span class="ident" id="4705268"><a href="/regexp/regexp.go.html#4705706">quote</a></span><span class="op" id="4705273">(</span><span class="ident" id="4705274"><a href="/regexp/regexp.go.html#4705167">str</a></span><span class="op" id="4705277">)</span>&nbsp;<span class="op" id="4705279">+</span>&nbsp;<span class="string" id="4705281">`):&nbsp;`</span>&nbsp;<span class="op" id="4705287">+</span>&nbsp;<span class="builtintype" id="4705289"><a href="/regexp/regexp.go.html#4705198">error</a></span><span class="op" id="4705294">.</span><span class="ident" id="4705295">Error</span><span class="op" id="4705300">(</span><span class="op" id="4705301">)</span><span class="op" id="4705302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4705305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4705308">return</span>&nbsp;<span class="ident" id="4705315"><a href="/regexp/regexp.go.html#4705190">regexp</a></span><br>
<span class="lineno"></span><span class="op" id="4705322">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="4705325">//&nbsp;MustCompilePOSIX&nbsp;is&nbsp;like&nbsp;CompilePOSIX&nbsp;but&nbsp;panics&nbsp;if&nbsp;the&nbsp;expression&nbsp;cannot&nbsp;be&nbsp;parsed.</span><br>
<span class="lineno"></span><span class="comment" id="4705413">//&nbsp;It&nbsp;simplifies&nbsp;safe&nbsp;initialization&nbsp;of&nbsp;global&nbsp;variables&nbsp;holding&nbsp;compiled&nbsp;regular</span><br>
<span class="lineno"></span><span class="comment" id="4705495">//&nbsp;expressions.</span><br>
<span class="lineno"></span><span class="keyword" id="4705511">func</span>&nbsp;<span class="ident" id="4705516">MustCompilePOSIX</span><span class="op" id="4705532">(</span><span class="ident" id="4705533">str</span>&nbsp;<span class="builtintype" id="4705537">string</span><span class="op" id="4705543">)</span>&nbsp;<span class="op" id="4705545">*</span><span class="ident" id="4705546"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span>&nbsp;<span class="op" id="4705553">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4705556">regexp</span><span class="op" id="4705562">,</span>&nbsp;<span class="builtintype" id="4705564">error</span>&nbsp;<span class="op" id="4705570">:=</span>&nbsp;<span class="ident" id="4705573"><a href="/regexp/regexp.go.html#4702913">CompilePOSIX</a></span><span class="op" id="4705585">(</span><span class="ident" id="4705586"><a href="/regexp/regexp.go.html#4705533">str</a></span><span class="op" id="4705589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4705592">if</span>&nbsp;<span class="builtintype" id="4705595"><a href="/regexp/regexp.go.html#4705564">error</a></span>&nbsp;<span class="op" id="4705601">!=</span>&nbsp;<span class="ident" id="4705604">nil</span>&nbsp;<span class="op" id="4705608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4705612">panic</span><span class="op" id="4705617">(</span><span class="string" id="4705618">`regexp:&nbsp;CompilePOSIX(`</span>&nbsp;<span class="op" id="4705642">+</span>&nbsp;<span class="ident" id="4705644"><a href="/regexp/regexp.go.html#4705706">quote</a></span><span class="op" id="4705649">(</span><span class="ident" id="4705650"><a href="/regexp/regexp.go.html#4705533">str</a></span><span class="op" id="4705653">)</span>&nbsp;<span class="op" id="4705655">+</span>&nbsp;<span class="string" id="4705657">`):&nbsp;`</span>&nbsp;<span class="op" id="4705663">+</span>&nbsp;<span class="builtintype" id="4705665"><a href="/regexp/regexp.go.html#4705564">error</a></span><span class="op" id="4705670">.</span><span class="ident" id="4705671">Error</span><span class="op" id="4705676">(</span><span class="op" id="4705677">)</span><span class="op" id="4705678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4705681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4705684">return</span>&nbsp;<span class="ident" id="4705691"><a href="/regexp/regexp.go.html#4705556">regexp</a></span><br>
<span class="lineno">235</span><span class="op" id="4705698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4705701">func</span>&nbsp;<span class="ident" id="4705706">quote</span><span class="op" id="4705711">(</span><span class="ident" id="4705712">s</span>&nbsp;<span class="builtintype" id="4705714">string</span><span class="op" id="4705720">)</span>&nbsp;<span class="builtintype" id="4705722">string</span>&nbsp;<span class="op" id="4705729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4705732">if</span>&nbsp;<span class="ident" id="4705735"><a href="/regexp/regexp.go.html#4700073">strconv</a></span><span class="op" id="4705742">.</span><span class="ident" id="4705743">CanBackquote</span><span class="op" id="4705755">(</span><span class="ident" id="4705756"><a href="/regexp/regexp.go.html#4705712">s</a></span><span class="op" id="4705757">)</span>&nbsp;<span class="op" id="4705759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4705763">return</span>&nbsp;<span class="string" id="4705770">&#34;`&#34;</span>&nbsp;<span class="op" id="4705774">+</span>&nbsp;<span class="ident" id="4705776"><a href="/regexp/regexp.go.html#4705712">s</a></span>&nbsp;<span class="op" id="4705778">+</span>&nbsp;<span class="string" id="4705780">&#34;`&#34;</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4705785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4705788">return</span>&nbsp;<span class="ident" id="4705795"><a href="/regexp/regexp.go.html#4700073">strconv</a></span><span class="op" id="4705802">.</span><span class="ident" id="4705803">Quote</span><span class="op" id="4705808">(</span><span class="ident" id="4705809"><a href="/regexp/regexp.go.html#4705712">s</a></span><span class="op" id="4705810">)</span><br>
<span class="lineno"></span><span class="op" id="4705812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4705815">//&nbsp;NumSubexp&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;parenthesized&nbsp;subexpressions&nbsp;in&nbsp;this&nbsp;Regexp.</span><br>
<span class="lineno">245</span><span class="keyword" id="4705895">func</span>&nbsp;<span class="op" id="4705900">(</span><span class="ident" id="4705901">re</span>&nbsp;<span class="op" id="4705904">*</span><span class="ident" id="4705905"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4705911">)</span>&nbsp;<span class="ident" id="4705913">NumSubexp</span><span class="op" id="4705922">(</span><span class="op" id="4705923">)</span>&nbsp;<span class="builtintype" id="4705925">int</span>&nbsp;<span class="op" id="4705929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4705932">return</span>&nbsp;<span class="ident" id="4705939"><a href="/regexp/regexp.go.html#4705901">re</a></span><span class="op" id="4705941">.</span><span class="ident" id="4705942">numSubexp</span><br>
<span class="lineno"></span><span class="op" id="4705952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4705955">//&nbsp;SubexpNames&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;the&nbsp;parenthesized&nbsp;subexpressions</span><br>
<span class="lineno">250</span><span class="comment" id="4706024">//&nbsp;in&nbsp;this&nbsp;Regexp.&nbsp;&nbsp;The&nbsp;name&nbsp;for&nbsp;the&nbsp;first&nbsp;sub-expression&nbsp;is&nbsp;names[1],</span><br>
<span class="lineno"></span><span class="comment" id="4706095">//&nbsp;so&nbsp;that&nbsp;if&nbsp;m&nbsp;is&nbsp;a&nbsp;match&nbsp;slice,&nbsp;the&nbsp;name&nbsp;for&nbsp;m[i]&nbsp;is&nbsp;SubexpNames()[i].</span><br>
<span class="lineno"></span><span class="comment" id="4706168">//&nbsp;Since&nbsp;the&nbsp;Regexp&nbsp;as&nbsp;a&nbsp;whole&nbsp;cannot&nbsp;be&nbsp;named,&nbsp;names[0]&nbsp;is&nbsp;always</span><br>
<span class="lineno"></span><span class="comment" id="4706235">//&nbsp;the&nbsp;empty&nbsp;string.&nbsp;&nbsp;The&nbsp;slice&nbsp;should&nbsp;not&nbsp;be&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4706291">func</span>&nbsp;<span class="op" id="4706296">(</span><span class="ident" id="4706297">re</span>&nbsp;<span class="op" id="4706300">*</span><span class="ident" id="4706301"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4706307">)</span>&nbsp;<span class="ident" id="4706309">SubexpNames</span><span class="op" id="4706320">(</span><span class="op" id="4706321">)</span>&nbsp;<span class="op" id="4706323">[</span><span class="op" id="4706324">]</span><span class="builtintype" id="4706325">string</span>&nbsp;<span class="op" id="4706332">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4706335">return</span>&nbsp;<span class="ident" id="4706342"><a href="/regexp/regexp.go.html#4706297">re</a></span><span class="op" id="4706344">.</span><span class="ident" id="4706345">subexpNames</span><br>
<span class="lineno"></span><span class="op" id="4706357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4706360">const</span>&nbsp;<span class="ident" id="4706366">endOfText</span>&nbsp;<span class="builtintype" id="4706376">rune</span>&nbsp;<span class="op" id="4706381">=</span>&nbsp;<span class="op" id="4706383">-</span><span class="num" id="4706384">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="4706387">//&nbsp;input&nbsp;abstracts&nbsp;different&nbsp;representations&nbsp;of&nbsp;the&nbsp;input&nbsp;text.&nbsp;It&nbsp;provides</span><br>
<span class="lineno"></span><span class="comment" id="4706463">//&nbsp;one-character&nbsp;lookahead.</span><br>
<span class="lineno"></span><span class="keyword" id="4706491">type</span>&nbsp;<span class="ident" id="4706496">input</span>&nbsp;<span class="keyword" id="4706502">interface</span>&nbsp;<span class="op" id="4706512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4706515">step</span><span class="op" id="4706519">(</span><span class="ident" id="4706520">pos</span>&nbsp;<span class="builtintype" id="4706524">int</span><span class="op" id="4706527">)</span>&nbsp;<span class="op" id="4706529">(</span><span class="ident" id="4706530">r</span>&nbsp;<span class="builtintype" id="4706532">rune</span><span class="op" id="4706536">,</span>&nbsp;<span class="ident" id="4706538">width</span>&nbsp;<span class="builtintype" id="4706544">int</span><span class="op" id="4706547">)</span>&nbsp;<span class="comment" id="4706549">//&nbsp;advance&nbsp;one&nbsp;rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4706570">canCheckPrefix</span><span class="op" id="4706584">(</span><span class="op" id="4706585">)</span>&nbsp;<span class="builtintype" id="4706587">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4706604">//&nbsp;can&nbsp;we&nbsp;look&nbsp;ahead&nbsp;without&nbsp;losing&nbsp;info?</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4706647">hasPrefix</span><span class="op" id="4706656">(</span><span class="ident" id="4706657">re</span>&nbsp;<span class="op" id="4706660">*</span><span class="ident" id="4706661"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4706667">)</span>&nbsp;<span class="builtintype" id="4706669">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4706675">index</span><span class="op" id="4706680">(</span><span class="ident" id="4706681">re</span>&nbsp;<span class="op" id="4706684">*</span><span class="ident" id="4706685"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4706691">,</span>&nbsp;<span class="ident" id="4706693">pos</span>&nbsp;<span class="builtintype" id="4706697">int</span><span class="op" id="4706700">)</span>&nbsp;<span class="builtintype" id="4706702">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4706707">context</span><span class="op" id="4706714">(</span><span class="ident" id="4706715">pos</span>&nbsp;<span class="builtintype" id="4706719">int</span><span class="op" id="4706722">)</span>&nbsp;<span class="ident" id="4706724"><a href="/regexp/regexp.go.html#4700056">syntax</a></span><span class="op" id="4706730">.</span><span class="ident" id="4706731">EmptyOp</span><br>
<span class="lineno"></span><span class="op" id="4706739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="4706742">//&nbsp;inputString&nbsp;scans&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4706773">type</span>&nbsp;<span class="ident" id="4706778">inputString</span>&nbsp;<span class="keyword" id="4706790">struct</span>&nbsp;<span class="op" id="4706797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4706800">str</span>&nbsp;<span class="builtintype" id="4706804">string</span><br>
<span class="lineno"></span><span class="op" id="4706811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="keyword" id="4706814">func</span>&nbsp;<span class="op" id="4706819">(</span><span class="ident" id="4706820">i</span>&nbsp;<span class="op" id="4706822">*</span><span class="ident" id="4706823"><a href="/regexp/regexp.go.html#4706778">inputString</a></span><span class="op" id="4706834">)</span>&nbsp;<span class="ident" id="4706836">step</span><span class="op" id="4706840">(</span><span class="ident" id="4706841">pos</span>&nbsp;<span class="builtintype" id="4706845">int</span><span class="op" id="4706848">)</span>&nbsp;<span class="op" id="4706850">(</span><span class="builtintype" id="4706851">rune</span><span class="op" id="4706855">,</span>&nbsp;<span class="builtintype" id="4706857">int</span><span class="op" id="4706860">)</span>&nbsp;<span class="op" id="4706862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4706865">if</span>&nbsp;<span class="ident" id="4706868"><a href="/regexp/regexp.go.html#4706841">pos</a></span>&nbsp;<span class="op" id="4706872">&lt;</span>&nbsp;<span class="builtinfunc" id="4706874">len</span><span class="op" id="4706877">(</span><span class="ident" id="4706878"><a href="/regexp/regexp.go.html#4706820">i</a></span><span class="op" id="4706879">.</span><span class="ident" id="4706880">str</span><span class="op" id="4706883">)</span>&nbsp;<span class="op" id="4706885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4706889">c</span>&nbsp;<span class="op" id="4706891">:=</span>&nbsp;<span class="ident" id="4706894"><a href="/regexp/regexp.go.html#4706820">i</a></span><span class="op" id="4706895">.</span><span class="ident" id="4706896">str</span><span class="op" id="4706899">[</span><span class="ident" id="4706900"><a href="/regexp/regexp.go.html#4706841">pos</a></span><span class="op" id="4706903">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4706907">if</span>&nbsp;<span class="ident" id="4706910"><a href="/regexp/regexp.go.html#4706889">c</a></span>&nbsp;<span class="op" id="4706912">&lt;</span>&nbsp;<span class="ident" id="4706914"><a href="/regexp/regexp.go.html#4700114">utf8</a></span><span class="op" id="4706918">.</span><span class="ident" id="4706919">RuneSelf</span>&nbsp;<span class="op" id="4706928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4706933">return</span>&nbsp;<span class="builtintype" id="4706940">rune</span><span class="op" id="4706944">(</span><span class="ident" id="4706945"><a href="/regexp/regexp.go.html#4706889">c</a></span><span class="op" id="4706946">)</span><span class="op" id="4706947">,</span>&nbsp;<span class="num" id="4706949">1</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4706953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4706957">return</span>&nbsp;<span class="ident" id="4706964"><a href="/regexp/regexp.go.html#4700114">utf8</a></span><span class="op" id="4706968">.</span><span class="ident" id="4706969">DecodeRuneInString</span><span class="op" id="4706987">(</span><span class="ident" id="4706988"><a href="/regexp/regexp.go.html#4706820">i</a></span><span class="op" id="4706989">.</span><span class="ident" id="4706990">str</span><span class="op" id="4706993">[</span><span class="ident" id="4706994"><a href="/regexp/regexp.go.html#4706841">pos</a></span><span class="op" id="4706997">:</span><span class="op" id="4706998">]</span><span class="op" id="4706999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4707002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4707005">return</span>&nbsp;<span class="ident" id="4707012"><a href="/regexp/regexp.go.html#4706366">endOfText</a></span><span class="op" id="4707021">,</span>&nbsp;<span class="num" id="4707023">0</span><br>
<span class="lineno"></span><span class="op" id="4707025">}</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span><span class="keyword" id="4707028">func</span>&nbsp;<span class="op" id="4707033">(</span><span class="ident" id="4707034">i</span>&nbsp;<span class="op" id="4707036">*</span><span class="ident" id="4707037"><a href="/regexp/regexp.go.html#4706778">inputString</a></span><span class="op" id="4707048">)</span>&nbsp;<span class="ident" id="4707050">canCheckPrefix</span><span class="op" id="4707064">(</span><span class="op" id="4707065">)</span>&nbsp;<span class="builtintype" id="4707067">bool</span>&nbsp;<span class="op" id="4707072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4707075">return</span>&nbsp;<span class="ident" id="4707082">true</span><br>
<span class="lineno"></span><span class="op" id="4707087">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="keyword" id="4707090">func</span>&nbsp;<span class="op" id="4707095">(</span><span class="ident" id="4707096">i</span>&nbsp;<span class="op" id="4707098">*</span><span class="ident" id="4707099"><a href="/regexp/regexp.go.html#4706778">inputString</a></span><span class="op" id="4707110">)</span>&nbsp;<span class="ident" id="4707112">hasPrefix</span><span class="op" id="4707121">(</span><span class="ident" id="4707122">re</span>&nbsp;<span class="op" id="4707125">*</span><span class="ident" id="4707126"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4707132">)</span>&nbsp;<span class="builtintype" id="4707134">bool</span>&nbsp;<span class="op" id="4707139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4707142">return</span>&nbsp;<span class="ident" id="4707149"><a href="/regexp/regexp.go.html#4700084">strings</a></span><span class="op" id="4707156">.</span><span class="ident" id="4707157">HasPrefix</span><span class="op" id="4707166">(</span><span class="ident" id="4707167"><a href="/regexp/regexp.go.html#4707096">i</a></span><span class="op" id="4707168">.</span><span class="ident" id="4707169">str</span><span class="op" id="4707172">,</span>&nbsp;<span class="ident" id="4707174"><a href="/regexp/regexp.go.html#4707122">re</a></span><span class="op" id="4707176">.</span><span class="ident" id="4707177">prefix</span><span class="op" id="4707183">)</span><br>
<span class="lineno"></span><span class="op" id="4707185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4707188">func</span>&nbsp;<span class="op" id="4707193">(</span><span class="ident" id="4707194">i</span>&nbsp;<span class="op" id="4707196">*</span><span class="ident" id="4707197"><a href="/regexp/regexp.go.html#4706778">inputString</a></span><span class="op" id="4707208">)</span>&nbsp;<span class="ident" id="4707210">index</span><span class="op" id="4707215">(</span><span class="ident" id="4707216">re</span>&nbsp;<span class="op" id="4707219">*</span><span class="ident" id="4707220"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4707226">,</span>&nbsp;<span class="ident" id="4707228">pos</span>&nbsp;<span class="builtintype" id="4707232">int</span><span class="op" id="4707235">)</span>&nbsp;<span class="builtintype" id="4707237">int</span>&nbsp;<span class="op" id="4707241">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4707244">return</span>&nbsp;<span class="ident" id="4707251"><a href="/regexp/regexp.go.html#4700084">strings</a></span><span class="op" id="4707258">.</span><span class="ident" id="4707259">Index</span><span class="op" id="4707264">(</span><span class="ident" id="4707265"><a href="/regexp/regexp.go.html#4707194">i</a></span><span class="op" id="4707266">.</span><span class="ident" id="4707267">str</span><span class="op" id="4707270">[</span><span class="ident" id="4707271"><a href="/regexp/regexp.go.html#4707228">pos</a></span><span class="op" id="4707274">:</span><span class="op" id="4707275">]</span><span class="op" id="4707276">,</span>&nbsp;<span class="ident" id="4707278"><a href="/regexp/regexp.go.html#4707216">re</a></span><span class="op" id="4707280">.</span><span class="ident" id="4707281">prefix</span><span class="op" id="4707287">)</span><br>
<span class="lineno"></span><span class="op" id="4707289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4707292">func</span>&nbsp;<span class="op" id="4707297">(</span><span class="ident" id="4707298">i</span>&nbsp;<span class="op" id="4707300">*</span><span class="ident" id="4707301"><a href="/regexp/regexp.go.html#4706778">inputString</a></span><span class="op" id="4707312">)</span>&nbsp;<span class="ident" id="4707314">context</span><span class="op" id="4707321">(</span><span class="ident" id="4707322">pos</span>&nbsp;<span class="builtintype" id="4707326">int</span><span class="op" id="4707329">)</span>&nbsp;<span class="ident" id="4707331"><a href="/regexp/regexp.go.html#4700056">syntax</a></span><span class="op" id="4707337">.</span><span class="ident" id="4707338">EmptyOp</span>&nbsp;<span class="op" id="4707346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4707349">r1</span><span class="op" id="4707351">,</span>&nbsp;<span class="ident" id="4707353">r2</span>&nbsp;<span class="op" id="4707356">:=</span>&nbsp;<span class="ident" id="4707359"><a href="/regexp/regexp.go.html#4706366">endOfText</a></span><span class="op" id="4707368">,</span>&nbsp;<span class="ident" id="4707370"><a href="/regexp/regexp.go.html#4706366">endOfText</a></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4707381">if</span>&nbsp;<span class="ident" id="4707384"><a href="/regexp/regexp.go.html#4707322">pos</a></span>&nbsp;<span class="op" id="4707388">&gt;</span>&nbsp;<span class="num" id="4707390">0</span>&nbsp;<span class="op" id="4707392">&amp;&amp;</span>&nbsp;<span class="ident" id="4707395"><a href="/regexp/regexp.go.html#4707322">pos</a></span>&nbsp;<span class="op" id="4707399">&lt;=</span>&nbsp;<span class="builtinfunc" id="4707402">len</span><span class="op" id="4707405">(</span><span class="ident" id="4707406"><a href="/regexp/regexp.go.html#4707298">i</a></span><span class="op" id="4707407">.</span><span class="ident" id="4707408">str</span><span class="op" id="4707411">)</span>&nbsp;<span class="op" id="4707413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4707417"><a href="/regexp/regexp.go.html#4707349">r1</a></span><span class="op" id="4707419">,</span>&nbsp;<span class="ident" id="4707421">_</span>&nbsp;<span class="op" id="4707423">=</span>&nbsp;<span class="ident" id="4707425"><a href="/regexp/regexp.go.html#4700114">utf8</a></span><span class="op" id="4707429">.</span><span class="ident" id="4707430">DecodeLastRuneInString</span><span class="op" id="4707452">(</span><span class="ident" id="4707453"><a href="/regexp/regexp.go.html#4707298">i</a></span><span class="op" id="4707454">.</span><span class="ident" id="4707455">str</span><span class="op" id="4707458">[</span><span class="op" id="4707459">:</span><span class="ident" id="4707460"><a href="/regexp/regexp.go.html#4707322">pos</a></span><span class="op" id="4707463">]</span><span class="op" id="4707464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4707467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4707470">if</span>&nbsp;<span class="ident" id="4707473"><a href="/regexp/regexp.go.html#4707322">pos</a></span>&nbsp;<span class="op" id="4707477">&lt;</span>&nbsp;<span class="builtinfunc" id="4707479">len</span><span class="op" id="4707482">(</span><span class="ident" id="4707483"><a href="/regexp/regexp.go.html#4707298">i</a></span><span class="op" id="4707484">.</span><span class="ident" id="4707485">str</span><span class="op" id="4707488">)</span>&nbsp;<span class="op" id="4707490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4707494"><a href="/regexp/regexp.go.html#4707353">r2</a></span><span class="op" id="4707496">,</span>&nbsp;<span class="ident" id="4707498">_</span>&nbsp;<span class="op" id="4707500">=</span>&nbsp;<span class="ident" id="4707502"><a href="/regexp/regexp.go.html#4700114">utf8</a></span><span class="op" id="4707506">.</span><span class="ident" id="4707507">DecodeRuneInString</span><span class="op" id="4707525">(</span><span class="ident" id="4707526"><a href="/regexp/regexp.go.html#4707298">i</a></span><span class="op" id="4707527">.</span><span class="ident" id="4707528">str</span><span class="op" id="4707531">[</span><span class="ident" id="4707532"><a href="/regexp/regexp.go.html#4707322">pos</a></span><span class="op" id="4707535">:</span><span class="op" id="4707536">]</span><span class="op" id="4707537">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4707540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4707543">return</span>&nbsp;<span class="ident" id="4707550"><a href="/regexp/regexp.go.html#4700056">syntax</a></span><span class="op" id="4707556">.</span><span class="ident" id="4707557">EmptyOpContext</span><span class="op" id="4707571">(</span><span class="ident" id="4707572"><a href="/regexp/regexp.go.html#4707349">r1</a></span><span class="op" id="4707574">,</span>&nbsp;<span class="ident" id="4707576"><a href="/regexp/regexp.go.html#4707353">r2</a></span><span class="op" id="4707578">)</span><br>
<span class="lineno"></span><span class="op" id="4707580">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4707583">//&nbsp;inputBytes&nbsp;scans&nbsp;a&nbsp;byte&nbsp;slice.</span><br>
<span class="lineno">310</span><span class="keyword" id="4707617">type</span>&nbsp;<span class="ident" id="4707622">inputBytes</span>&nbsp;<span class="keyword" id="4707633">struct</span>&nbsp;<span class="op" id="4707640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4707643">str</span>&nbsp;<span class="op" id="4707647">[</span><span class="op" id="4707648">]</span><span class="builtintype" id="4707649">byte</span><br>
<span class="lineno"></span><span class="op" id="4707654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4707657">func</span>&nbsp;<span class="op" id="4707662">(</span><span class="ident" id="4707663">i</span>&nbsp;<span class="op" id="4707665">*</span><span class="ident" id="4707666"><a href="/regexp/regexp.go.html#4707622">inputBytes</a></span><span class="op" id="4707676">)</span>&nbsp;<span class="ident" id="4707678">step</span><span class="op" id="4707682">(</span><span class="ident" id="4707683">pos</span>&nbsp;<span class="builtintype" id="4707687">int</span><span class="op" id="4707690">)</span>&nbsp;<span class="op" id="4707692">(</span><span class="builtintype" id="4707693">rune</span><span class="op" id="4707697">,</span>&nbsp;<span class="builtintype" id="4707699">int</span><span class="op" id="4707702">)</span>&nbsp;<span class="op" id="4707704">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4707707">if</span>&nbsp;<span class="ident" id="4707710"><a href="/regexp/regexp.go.html#4707683">pos</a></span>&nbsp;<span class="op" id="4707714">&lt;</span>&nbsp;<span class="builtinfunc" id="4707716">len</span><span class="op" id="4707719">(</span><span class="ident" id="4707720"><a href="/regexp/regexp.go.html#4707663">i</a></span><span class="op" id="4707721">.</span><span class="ident" id="4707722">str</span><span class="op" id="4707725">)</span>&nbsp;<span class="op" id="4707727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4707731">c</span>&nbsp;<span class="op" id="4707733">:=</span>&nbsp;<span class="ident" id="4707736"><a href="/regexp/regexp.go.html#4707663">i</a></span><span class="op" id="4707737">.</span><span class="ident" id="4707738">str</span><span class="op" id="4707741">[</span><span class="ident" id="4707742"><a href="/regexp/regexp.go.html#4707683">pos</a></span><span class="op" id="4707745">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4707749">if</span>&nbsp;<span class="ident" id="4707752"><a href="/regexp/regexp.go.html#4707731">c</a></span>&nbsp;<span class="op" id="4707754">&lt;</span>&nbsp;<span class="ident" id="4707756"><a href="/regexp/regexp.go.html#4700114">utf8</a></span><span class="op" id="4707760">.</span><span class="ident" id="4707761">RuneSelf</span>&nbsp;<span class="op" id="4707770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4707775">return</span>&nbsp;<span class="builtintype" id="4707782">rune</span><span class="op" id="4707786">(</span><span class="ident" id="4707787"><a href="/regexp/regexp.go.html#4707731">c</a></span><span class="op" id="4707788">)</span><span class="op" id="4707789">,</span>&nbsp;<span class="num" id="4707791">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4707795">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4707799">return</span>&nbsp;<span class="ident" id="4707806"><a href="/regexp/regexp.go.html#4700114">utf8</a></span><span class="op" id="4707810">.</span><span class="ident" id="4707811">DecodeRune</span><span class="op" id="4707821">(</span><span class="ident" id="4707822"><a href="/regexp/regexp.go.html#4707663">i</a></span><span class="op" id="4707823">.</span><span class="ident" id="4707824">str</span><span class="op" id="4707827">[</span><span class="ident" id="4707828"><a href="/regexp/regexp.go.html#4707683">pos</a></span><span class="op" id="4707831">:</span><span class="op" id="4707832">]</span><span class="op" id="4707833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4707836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4707839">return</span>&nbsp;<span class="ident" id="4707846"><a href="/regexp/regexp.go.html#4706366">endOfText</a></span><span class="op" id="4707855">,</span>&nbsp;<span class="num" id="4707857">0</span><br>
<span class="lineno"></span><span class="op" id="4707859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="keyword" id="4707862">func</span>&nbsp;<span class="op" id="4707867">(</span><span class="ident" id="4707868">i</span>&nbsp;<span class="op" id="4707870">*</span><span class="ident" id="4707871"><a href="/regexp/regexp.go.html#4707622">inputBytes</a></span><span class="op" id="4707881">)</span>&nbsp;<span class="ident" id="4707883">canCheckPrefix</span><span class="op" id="4707897">(</span><span class="op" id="4707898">)</span>&nbsp;<span class="builtintype" id="4707900">bool</span>&nbsp;<span class="op" id="4707905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4707908">return</span>&nbsp;<span class="ident" id="4707915">true</span><br>
<span class="lineno"></span><span class="op" id="4707920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4707923">func</span>&nbsp;<span class="op" id="4707928">(</span><span class="ident" id="4707929">i</span>&nbsp;<span class="op" id="4707931">*</span><span class="ident" id="4707932"><a href="/regexp/regexp.go.html#4707622">inputBytes</a></span><span class="op" id="4707942">)</span>&nbsp;<span class="ident" id="4707944">hasPrefix</span><span class="op" id="4707953">(</span><span class="ident" id="4707954">re</span>&nbsp;<span class="op" id="4707957">*</span><span class="ident" id="4707958"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4707964">)</span>&nbsp;<span class="builtintype" id="4707966">bool</span>&nbsp;<span class="op" id="4707971">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4707974">return</span>&nbsp;<span class="ident" id="4707981"><a href="/regexp/regexp.go.html#4700041">bytes</a></span><span class="op" id="4707986">.</span><span class="ident" id="4707987">HasPrefix</span><span class="op" id="4707996">(</span><span class="ident" id="4707997"><a href="/regexp/regexp.go.html#4707929">i</a></span><span class="op" id="4707998">.</span><span class="ident" id="4707999">str</span><span class="op" id="4708002">,</span>&nbsp;<span class="ident" id="4708004"><a href="/regexp/regexp.go.html#4707954">re</a></span><span class="op" id="4708006">.</span><span class="ident" id="4708007">prefixBytes</span><span class="op" id="4708018">)</span><br>
<span class="lineno"></span><span class="op" id="4708020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4708023">func</span>&nbsp;<span class="op" id="4708028">(</span><span class="ident" id="4708029">i</span>&nbsp;<span class="op" id="4708031">*</span><span class="ident" id="4708032"><a href="/regexp/regexp.go.html#4707622">inputBytes</a></span><span class="op" id="4708042">)</span>&nbsp;<span class="ident" id="4708044">index</span><span class="op" id="4708049">(</span><span class="ident" id="4708050">re</span>&nbsp;<span class="op" id="4708053">*</span><span class="ident" id="4708054"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4708060">,</span>&nbsp;<span class="ident" id="4708062">pos</span>&nbsp;<span class="builtintype" id="4708066">int</span><span class="op" id="4708069">)</span>&nbsp;<span class="builtintype" id="4708071">int</span>&nbsp;<span class="op" id="4708075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708078">return</span>&nbsp;<span class="ident" id="4708085"><a href="/regexp/regexp.go.html#4700041">bytes</a></span><span class="op" id="4708090">.</span><span class="ident" id="4708091">Index</span><span class="op" id="4708096">(</span><span class="ident" id="4708097"><a href="/regexp/regexp.go.html#4708029">i</a></span><span class="op" id="4708098">.</span><span class="ident" id="4708099">str</span><span class="op" id="4708102">[</span><span class="ident" id="4708103"><a href="/regexp/regexp.go.html#4708062">pos</a></span><span class="op" id="4708106">:</span><span class="op" id="4708107">]</span><span class="op" id="4708108">,</span>&nbsp;<span class="ident" id="4708110"><a href="/regexp/regexp.go.html#4708050">re</a></span><span class="op" id="4708112">.</span><span class="ident" id="4708113">prefixBytes</span><span class="op" id="4708124">)</span><br>
<span class="lineno">335</span><span class="op" id="4708126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4708129">func</span>&nbsp;<span class="op" id="4708134">(</span><span class="ident" id="4708135">i</span>&nbsp;<span class="op" id="4708137">*</span><span class="ident" id="4708138"><a href="/regexp/regexp.go.html#4707622">inputBytes</a></span><span class="op" id="4708148">)</span>&nbsp;<span class="ident" id="4708150">context</span><span class="op" id="4708157">(</span><span class="ident" id="4708158">pos</span>&nbsp;<span class="builtintype" id="4708162">int</span><span class="op" id="4708165">)</span>&nbsp;<span class="ident" id="4708167"><a href="/regexp/regexp.go.html#4700056">syntax</a></span><span class="op" id="4708173">.</span><span class="ident" id="4708174">EmptyOp</span>&nbsp;<span class="op" id="4708182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4708185">r1</span><span class="op" id="4708187">,</span>&nbsp;<span class="ident" id="4708189">r2</span>&nbsp;<span class="op" id="4708192">:=</span>&nbsp;<span class="ident" id="4708195"><a href="/regexp/regexp.go.html#4706366">endOfText</a></span><span class="op" id="4708204">,</span>&nbsp;<span class="ident" id="4708206"><a href="/regexp/regexp.go.html#4706366">endOfText</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708217">if</span>&nbsp;<span class="ident" id="4708220"><a href="/regexp/regexp.go.html#4708158">pos</a></span>&nbsp;<span class="op" id="4708224">&gt;</span>&nbsp;<span class="num" id="4708226">0</span>&nbsp;<span class="op" id="4708228">&amp;&amp;</span>&nbsp;<span class="ident" id="4708231"><a href="/regexp/regexp.go.html#4708158">pos</a></span>&nbsp;<span class="op" id="4708235">&lt;=</span>&nbsp;<span class="builtinfunc" id="4708238">len</span><span class="op" id="4708241">(</span><span class="ident" id="4708242"><a href="/regexp/regexp.go.html#4708135">i</a></span><span class="op" id="4708243">.</span><span class="ident" id="4708244">str</span><span class="op" id="4708247">)</span>&nbsp;<span class="op" id="4708249">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4708253"><a href="/regexp/regexp.go.html#4708185">r1</a></span><span class="op" id="4708255">,</span>&nbsp;<span class="ident" id="4708257">_</span>&nbsp;<span class="op" id="4708259">=</span>&nbsp;<span class="ident" id="4708261"><a href="/regexp/regexp.go.html#4700114">utf8</a></span><span class="op" id="4708265">.</span><span class="ident" id="4708266">DecodeLastRune</span><span class="op" id="4708280">(</span><span class="ident" id="4708281"><a href="/regexp/regexp.go.html#4708135">i</a></span><span class="op" id="4708282">.</span><span class="ident" id="4708283">str</span><span class="op" id="4708286">[</span><span class="op" id="4708287">:</span><span class="ident" id="4708288"><a href="/regexp/regexp.go.html#4708158">pos</a></span><span class="op" id="4708291">]</span><span class="op" id="4708292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4708295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708298">if</span>&nbsp;<span class="ident" id="4708301"><a href="/regexp/regexp.go.html#4708158">pos</a></span>&nbsp;<span class="op" id="4708305">&lt;</span>&nbsp;<span class="builtinfunc" id="4708307">len</span><span class="op" id="4708310">(</span><span class="ident" id="4708311"><a href="/regexp/regexp.go.html#4708135">i</a></span><span class="op" id="4708312">.</span><span class="ident" id="4708313">str</span><span class="op" id="4708316">)</span>&nbsp;<span class="op" id="4708318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4708322"><a href="/regexp/regexp.go.html#4708189">r2</a></span><span class="op" id="4708324">,</span>&nbsp;<span class="ident" id="4708326">_</span>&nbsp;<span class="op" id="4708328">=</span>&nbsp;<span class="ident" id="4708330"><a href="/regexp/regexp.go.html#4700114">utf8</a></span><span class="op" id="4708334">.</span><span class="ident" id="4708335">DecodeRune</span><span class="op" id="4708345">(</span><span class="ident" id="4708346"><a href="/regexp/regexp.go.html#4708135">i</a></span><span class="op" id="4708347">.</span><span class="ident" id="4708348">str</span><span class="op" id="4708351">[</span><span class="ident" id="4708352"><a href="/regexp/regexp.go.html#4708158">pos</a></span><span class="op" id="4708355">:</span><span class="op" id="4708356">]</span><span class="op" id="4708357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4708360">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708363">return</span>&nbsp;<span class="ident" id="4708370"><a href="/regexp/regexp.go.html#4700056">syntax</a></span><span class="op" id="4708376">.</span><span class="ident" id="4708377">EmptyOpContext</span><span class="op" id="4708391">(</span><span class="ident" id="4708392"><a href="/regexp/regexp.go.html#4708185">r1</a></span><span class="op" id="4708394">,</span>&nbsp;<span class="ident" id="4708396"><a href="/regexp/regexp.go.html#4708189">r2</a></span><span class="op" id="4708398">)</span><br>
<span class="lineno"></span><span class="op" id="4708400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4708403">//&nbsp;inputReader&nbsp;scans&nbsp;a&nbsp;RuneReader.</span><br>
<span class="lineno"></span><span class="keyword" id="4708438">type</span>&nbsp;<span class="ident" id="4708443">inputReader</span>&nbsp;<span class="keyword" id="4708455">struct</span>&nbsp;<span class="op" id="4708462">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4708465">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4708471"><a href="/regexp/regexp.go.html#4700050">io</a></span><span class="op" id="4708473">.</span><span class="ident" id="4708474">RuneReader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4708486">atEOT</span>&nbsp;<span class="builtintype" id="4708492">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4708498">pos</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4708504">int</span><br>
<span class="lineno"></span><span class="op" id="4708508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="keyword" id="4708511">func</span>&nbsp;<span class="op" id="4708516">(</span><span class="ident" id="4708517">i</span>&nbsp;<span class="op" id="4708519">*</span><span class="ident" id="4708520"><a href="/regexp/regexp.go.html#4708443">inputReader</a></span><span class="op" id="4708531">)</span>&nbsp;<span class="ident" id="4708533">step</span><span class="op" id="4708537">(</span><span class="ident" id="4708538">pos</span>&nbsp;<span class="builtintype" id="4708542">int</span><span class="op" id="4708545">)</span>&nbsp;<span class="op" id="4708547">(</span><span class="builtintype" id="4708548">rune</span><span class="op" id="4708552">,</span>&nbsp;<span class="builtintype" id="4708554">int</span><span class="op" id="4708557">)</span>&nbsp;<span class="op" id="4708559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708562">if</span>&nbsp;<span class="op" id="4708565">!</span><span class="ident" id="4708566"><a href="/regexp/regexp.go.html#4708517">i</a></span><span class="op" id="4708567">.</span><span class="ident" id="4708568">atEOT</span>&nbsp;<span class="op" id="4708574">&amp;&amp;</span>&nbsp;<span class="ident" id="4708577"><a href="/regexp/regexp.go.html#4708538">pos</a></span>&nbsp;<span class="op" id="4708581">!=</span>&nbsp;<span class="ident" id="4708584"><a href="/regexp/regexp.go.html#4708517">i</a></span><span class="op" id="4708585">.</span><span class="ident" id="4708586">pos</span>&nbsp;<span class="op" id="4708590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708594">return</span>&nbsp;<span class="ident" id="4708601"><a href="/regexp/regexp.go.html#4706366">endOfText</a></span><span class="op" id="4708610">,</span>&nbsp;<span class="num" id="4708612">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4708616">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4708619">r</span><span class="op" id="4708620">,</span>&nbsp;<span class="ident" id="4708622">w</span><span class="op" id="4708623">,</span>&nbsp;<span class="ident" id="4708625">err</span>&nbsp;<span class="op" id="4708629">:=</span>&nbsp;<span class="ident" id="4708632"><a href="/regexp/regexp.go.html#4708517">i</a></span><span class="op" id="4708633">.</span><span class="ident" id="4708634">r</span><span class="op" id="4708635">.</span><span class="ident" id="4708636">ReadRune</span><span class="op" id="4708644">(</span><span class="op" id="4708645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708648">if</span>&nbsp;<span class="ident" id="4708651"><a href="/regexp/regexp.go.html#4708625">err</a></span>&nbsp;<span class="op" id="4708655">!=</span>&nbsp;<span class="ident" id="4708658">nil</span>&nbsp;<span class="op" id="4708662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4708666"><a href="/regexp/regexp.go.html#4708517">i</a></span><span class="op" id="4708667">.</span><span class="ident" id="4708668">atEOT</span>&nbsp;<span class="op" id="4708674">=</span>&nbsp;<span class="ident" id="4708676">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708683">return</span>&nbsp;<span class="ident" id="4708690"><a href="/regexp/regexp.go.html#4706366">endOfText</a></span><span class="op" id="4708699">,</span>&nbsp;<span class="num" id="4708701">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4708704">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4708707"><a href="/regexp/regexp.go.html#4708517">i</a></span><span class="op" id="4708708">.</span><span class="ident" id="4708709">pos</span>&nbsp;<span class="op" id="4708713">+=</span>&nbsp;<span class="ident" id="4708716"><a href="/regexp/regexp.go.html#4708622">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708719">return</span>&nbsp;<span class="ident" id="4708726"><a href="/regexp/regexp.go.html#4708619">r</a></span><span class="op" id="4708727">,</span>&nbsp;<span class="ident" id="4708729"><a href="/regexp/regexp.go.html#4708622">w</a></span><br>
<span class="lineno"></span><span class="op" id="4708731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4708734">func</span>&nbsp;<span class="op" id="4708739">(</span><span class="ident" id="4708740">i</span>&nbsp;<span class="op" id="4708742">*</span><span class="ident" id="4708743"><a href="/regexp/regexp.go.html#4708443">inputReader</a></span><span class="op" id="4708754">)</span>&nbsp;<span class="ident" id="4708756">canCheckPrefix</span><span class="op" id="4708770">(</span><span class="op" id="4708771">)</span>&nbsp;<span class="builtintype" id="4708773">bool</span>&nbsp;<span class="op" id="4708778">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708781">return</span>&nbsp;<span class="ident" id="4708788">false</span><br>
<span class="lineno"></span><span class="op" id="4708794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4708797">func</span>&nbsp;<span class="op" id="4708802">(</span><span class="ident" id="4708803">i</span>&nbsp;<span class="op" id="4708805">*</span><span class="ident" id="4708806"><a href="/regexp/regexp.go.html#4708443">inputReader</a></span><span class="op" id="4708817">)</span>&nbsp;<span class="ident" id="4708819">hasPrefix</span><span class="op" id="4708828">(</span><span class="ident" id="4708829">re</span>&nbsp;<span class="op" id="4708832">*</span><span class="ident" id="4708833"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4708839">)</span>&nbsp;<span class="builtintype" id="4708841">bool</span>&nbsp;<span class="op" id="4708846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708849">return</span>&nbsp;<span class="ident" id="4708856">false</span><br>
<span class="lineno">375</span><span class="op" id="4708862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4708865">func</span>&nbsp;<span class="op" id="4708870">(</span><span class="ident" id="4708871">i</span>&nbsp;<span class="op" id="4708873">*</span><span class="ident" id="4708874"><a href="/regexp/regexp.go.html#4708443">inputReader</a></span><span class="op" id="4708885">)</span>&nbsp;<span class="ident" id="4708887">index</span><span class="op" id="4708892">(</span><span class="ident" id="4708893">re</span>&nbsp;<span class="op" id="4708896">*</span><span class="ident" id="4708897"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4708903">,</span>&nbsp;<span class="ident" id="4708905">pos</span>&nbsp;<span class="builtintype" id="4708909">int</span><span class="op" id="4708912">)</span>&nbsp;<span class="builtintype" id="4708914">int</span>&nbsp;<span class="op" id="4708918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708921">return</span>&nbsp;<span class="op" id="4708928">-</span><span class="num" id="4708929">1</span><br>
<span class="lineno"></span><span class="op" id="4708931">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span><span class="keyword" id="4708934">func</span>&nbsp;<span class="op" id="4708939">(</span><span class="ident" id="4708940">i</span>&nbsp;<span class="op" id="4708942">*</span><span class="ident" id="4708943"><a href="/regexp/regexp.go.html#4708443">inputReader</a></span><span class="op" id="4708954">)</span>&nbsp;<span class="ident" id="4708956">context</span><span class="op" id="4708963">(</span><span class="ident" id="4708964">pos</span>&nbsp;<span class="builtintype" id="4708968">int</span><span class="op" id="4708971">)</span>&nbsp;<span class="ident" id="4708973"><a href="/regexp/regexp.go.html#4700056">syntax</a></span><span class="op" id="4708979">.</span><span class="ident" id="4708980">EmptyOp</span>&nbsp;<span class="op" id="4708988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708991">return</span>&nbsp;<span class="num" id="4708998">0</span><br>
<span class="lineno"></span><span class="op" id="4709000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="comment" id="4709003">//&nbsp;LiteralPrefix&nbsp;returns&nbsp;a&nbsp;literal&nbsp;string&nbsp;that&nbsp;must&nbsp;begin&nbsp;any&nbsp;match</span><br>
<span class="lineno"></span><span class="comment" id="4709071">//&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;re.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;boolean&nbsp;true&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4709140">//&nbsp;literal&nbsp;string&nbsp;comprises&nbsp;the&nbsp;entire&nbsp;regular&nbsp;expression.</span><br>
<span class="lineno"></span><span class="keyword" id="4709199">func</span>&nbsp;<span class="op" id="4709204">(</span><span class="ident" id="4709205">re</span>&nbsp;<span class="op" id="4709208">*</span><span class="ident" id="4709209"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4709215">)</span>&nbsp;<span class="ident" id="4709217">LiteralPrefix</span><span class="op" id="4709230">(</span><span class="op" id="4709231">)</span>&nbsp;<span class="op" id="4709233">(</span><span class="ident" id="4709234">prefix</span>&nbsp;<span class="builtintype" id="4709241">string</span><span class="op" id="4709247">,</span>&nbsp;<span class="ident" id="4709249">complete</span>&nbsp;<span class="builtintype" id="4709258">bool</span><span class="op" id="4709262">)</span>&nbsp;<span class="op" id="4709264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4709267">return</span>&nbsp;<span class="ident" id="4709274"><a href="/regexp/regexp.go.html#4709205">re</a></span><span class="op" id="4709276">.</span><span class="ident" id="4709277">prefix</span><span class="op" id="4709283">,</span>&nbsp;<span class="ident" id="4709285"><a href="/regexp/regexp.go.html#4709205">re</a></span><span class="op" id="4709287">.</span><span class="ident" id="4709288">prefixComplete</span><br>
<span class="lineno">390</span><span class="op" id="4709303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4709306">//&nbsp;MatchReader&nbsp;reports&nbsp;whether&nbsp;the&nbsp;Regexp&nbsp;matches&nbsp;the&nbsp;text&nbsp;read&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4709377">//&nbsp;RuneReader.</span><br>
<span class="lineno"></span><span class="keyword" id="4709392">func</span>&nbsp;<span class="op" id="4709397">(</span><span class="ident" id="4709398">re</span>&nbsp;<span class="op" id="4709401">*</span><span class="ident" id="4709402"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4709408">)</span>&nbsp;<span class="ident" id="4709410">MatchReader</span><span class="op" id="4709421">(</span><span class="ident" id="4709422">r</span>&nbsp;<span class="ident" id="4709424"><a href="/regexp/regexp.go.html#4700050">io</a></span><span class="op" id="4709426">.</span><span class="ident" id="4709427">RuneReader</span><span class="op" id="4709437">)</span>&nbsp;<span class="builtintype" id="4709439">bool</span>&nbsp;<span class="op" id="4709444">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4709447">return</span>&nbsp;<span class="ident" id="4709454"><a href="/regexp/regexp.go.html#4709398">re</a></span><span class="op" id="4709456">.</span><span class="ident" id="4709457">doExecute</span><span class="op" id="4709466">(</span><span class="ident" id="4709467"><a href="/regexp/regexp.go.html#4709422">r</a></span><span class="op" id="4709468">,</span>&nbsp;<span class="ident" id="4709470">nil</span><span class="op" id="4709473">,</span>&nbsp;<span class="string" id="4709475">&#34;&#34;</span><span class="op" id="4709477">,</span>&nbsp;<span class="num" id="4709479">0</span><span class="op" id="4709480">,</span>&nbsp;<span class="num" id="4709482">0</span><span class="op" id="4709483">)</span>&nbsp;<span class="op" id="4709485">!=</span>&nbsp;<span class="ident" id="4709488">nil</span><br>
<span class="lineno"></span><span class="op" id="4709492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4709495">//&nbsp;MatchString&nbsp;reports&nbsp;whether&nbsp;the&nbsp;Regexp&nbsp;matches&nbsp;the&nbsp;string&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4709559">func</span>&nbsp;<span class="op" id="4709564">(</span><span class="ident" id="4709565">re</span>&nbsp;<span class="op" id="4709568">*</span><span class="ident" id="4709569"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4709575">)</span>&nbsp;<span class="ident" id="4709577">MatchString</span><span class="op" id="4709588">(</span><span class="ident" id="4709589">s</span>&nbsp;<span class="builtintype" id="4709591">string</span><span class="op" id="4709597">)</span>&nbsp;<span class="builtintype" id="4709599">bool</span>&nbsp;<span class="op" id="4709604">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4709607">return</span>&nbsp;<span class="ident" id="4709614"><a href="/regexp/regexp.go.html#4709565">re</a></span><span class="op" id="4709616">.</span><span class="ident" id="4709617">doExecute</span><span class="op" id="4709626">(</span><span class="ident" id="4709627">nil</span><span class="op" id="4709630">,</span>&nbsp;<span class="ident" id="4709632">nil</span><span class="op" id="4709635">,</span>&nbsp;<span class="ident" id="4709637"><a href="/regexp/regexp.go.html#4709589">s</a></span><span class="op" id="4709638">,</span>&nbsp;<span class="num" id="4709640">0</span><span class="op" id="4709641">,</span>&nbsp;<span class="num" id="4709643">0</span><span class="op" id="4709644">)</span>&nbsp;<span class="op" id="4709646">!=</span>&nbsp;<span class="ident" id="4709649">nil</span><br>
<span class="lineno"></span><span class="op" id="4709653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4709656">//&nbsp;Match&nbsp;reports&nbsp;whether&nbsp;the&nbsp;Regexp&nbsp;matches&nbsp;the&nbsp;byte&nbsp;slice&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4709718">func</span>&nbsp;<span class="op" id="4709723">(</span><span class="ident" id="4709724">re</span>&nbsp;<span class="op" id="4709727">*</span><span class="ident" id="4709728"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4709734">)</span>&nbsp;<span class="ident" id="4709736">Match</span><span class="op" id="4709741">(</span><span class="ident" id="4709742">b</span>&nbsp;<span class="op" id="4709744">[</span><span class="op" id="4709745">]</span><span class="builtintype" id="4709746">byte</span><span class="op" id="4709750">)</span>&nbsp;<span class="builtintype" id="4709752">bool</span>&nbsp;<span class="op" id="4709757">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4709760">return</span>&nbsp;<span class="ident" id="4709767"><a href="/regexp/regexp.go.html#4709724">re</a></span><span class="op" id="4709769">.</span><span class="ident" id="4709770">doExecute</span><span class="op" id="4709779">(</span><span class="ident" id="4709780">nil</span><span class="op" id="4709783">,</span>&nbsp;<span class="ident" id="4709785"><a href="/regexp/regexp.go.html#4709742">b</a></span><span class="op" id="4709786">,</span>&nbsp;<span class="string" id="4709788">&#34;&#34;</span><span class="op" id="4709790">,</span>&nbsp;<span class="num" id="4709792">0</span><span class="op" id="4709793">,</span>&nbsp;<span class="num" id="4709795">0</span><span class="op" id="4709796">)</span>&nbsp;<span class="op" id="4709798">!=</span>&nbsp;<span class="ident" id="4709801">nil</span><br>
<span class="lineno"></span><span class="op" id="4709805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4709808">//&nbsp;MatchReader&nbsp;checks&nbsp;whether&nbsp;a&nbsp;textual&nbsp;regular&nbsp;expression&nbsp;matches&nbsp;the&nbsp;text</span><br>
<span class="lineno"></span><span class="comment" id="4709884">//&nbsp;read&nbsp;by&nbsp;the&nbsp;RuneReader.&nbsp;&nbsp;More&nbsp;complicated&nbsp;queries&nbsp;need&nbsp;to&nbsp;use&nbsp;Compile&nbsp;and</span><br>
<span class="lineno">410</span><span class="comment" id="4709961">//&nbsp;the&nbsp;full&nbsp;Regexp&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="4709991">func</span>&nbsp;<span class="ident" id="4709996">MatchReader</span><span class="op" id="4710007">(</span><span class="ident" id="4710008">pattern</span>&nbsp;<span class="builtintype" id="4710016">string</span><span class="op" id="4710022">,</span>&nbsp;<span class="ident" id="4710024">r</span>&nbsp;<span class="ident" id="4710026"><a href="/regexp/regexp.go.html#4700050">io</a></span><span class="op" id="4710028">.</span><span class="ident" id="4710029">RuneReader</span><span class="op" id="4710039">)</span>&nbsp;<span class="op" id="4710041">(</span><span class="ident" id="4710042">matched</span>&nbsp;<span class="builtintype" id="4710050">bool</span><span class="op" id="4710054">,</span>&nbsp;<span class="ident" id="4710056">err</span>&nbsp;<span class="builtintype" id="4710060">error</span><span class="op" id="4710065">)</span>&nbsp;<span class="op" id="4710067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4710070">re</span><span class="op" id="4710072">,</span>&nbsp;<span class="ident" id="4710074"><a href="/regexp/regexp.go.html#4710056">err</a></span>&nbsp;<span class="op" id="4710078">:=</span>&nbsp;<span class="ident" id="4710081"><a href="/regexp/regexp.go.html#4701752">Compile</a></span><span class="op" id="4710088">(</span><span class="ident" id="4710089"><a href="/regexp/regexp.go.html#4710008">pattern</a></span><span class="op" id="4710096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710099">if</span>&nbsp;<span class="ident" id="4710102"><a href="/regexp/regexp.go.html#4710056">err</a></span>&nbsp;<span class="op" id="4710106">!=</span>&nbsp;<span class="ident" id="4710109">nil</span>&nbsp;<span class="op" id="4710113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710117">return</span>&nbsp;<span class="ident" id="4710124">false</span><span class="op" id="4710129">,</span>&nbsp;<span class="ident" id="4710131"><a href="/regexp/regexp.go.html#4710056">err</a></span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4710136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710139">return</span>&nbsp;<span class="ident" id="4710146"><a href="/regexp/regexp.go.html#4710070">re</a></span><span class="op" id="4710148">.</span><span class="ident" id="4710149">MatchReader</span><span class="op" id="4710160">(</span><span class="ident" id="4710161"><a href="/regexp/regexp.go.html#4710024">r</a></span><span class="op" id="4710162">)</span><span class="op" id="4710163">,</span>&nbsp;<span class="ident" id="4710165">nil</span><br>
<span class="lineno"></span><span class="op" id="4710169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4710172">//&nbsp;MatchString&nbsp;checks&nbsp;whether&nbsp;a&nbsp;textual&nbsp;regular&nbsp;expression</span><br>
<span class="lineno">420</span><span class="comment" id="4710231">//&nbsp;matches&nbsp;a&nbsp;string.&nbsp;&nbsp;More&nbsp;complicated&nbsp;queries&nbsp;need</span><br>
<span class="lineno"></span><span class="comment" id="4710283">//&nbsp;to&nbsp;use&nbsp;Compile&nbsp;and&nbsp;the&nbsp;full&nbsp;Regexp&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="4710332">func</span>&nbsp;<span class="ident" id="4710337">MatchString</span><span class="op" id="4710348">(</span><span class="ident" id="4710349">pattern</span>&nbsp;<span class="builtintype" id="4710357">string</span><span class="op" id="4710363">,</span>&nbsp;<span class="ident" id="4710365">s</span>&nbsp;<span class="builtintype" id="4710367">string</span><span class="op" id="4710373">)</span>&nbsp;<span class="op" id="4710375">(</span><span class="ident" id="4710376">matched</span>&nbsp;<span class="builtintype" id="4710384">bool</span><span class="op" id="4710388">,</span>&nbsp;<span class="ident" id="4710390">err</span>&nbsp;<span class="builtintype" id="4710394">error</span><span class="op" id="4710399">)</span>&nbsp;<span class="op" id="4710401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4710404">re</span><span class="op" id="4710406">,</span>&nbsp;<span class="ident" id="4710408"><a href="/regexp/regexp.go.html#4710390">err</a></span>&nbsp;<span class="op" id="4710412">:=</span>&nbsp;<span class="ident" id="4710415"><a href="/regexp/regexp.go.html#4701752">Compile</a></span><span class="op" id="4710422">(</span><span class="ident" id="4710423"><a href="/regexp/regexp.go.html#4710349">pattern</a></span><span class="op" id="4710430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710433">if</span>&nbsp;<span class="ident" id="4710436"><a href="/regexp/regexp.go.html#4710390">err</a></span>&nbsp;<span class="op" id="4710440">!=</span>&nbsp;<span class="ident" id="4710443">nil</span>&nbsp;<span class="op" id="4710447">{</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710451">return</span>&nbsp;<span class="ident" id="4710458">false</span><span class="op" id="4710463">,</span>&nbsp;<span class="ident" id="4710465"><a href="/regexp/regexp.go.html#4710390">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4710470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710473">return</span>&nbsp;<span class="ident" id="4710480"><a href="/regexp/regexp.go.html#4710404">re</a></span><span class="op" id="4710482">.</span><span class="ident" id="4710483">MatchString</span><span class="op" id="4710494">(</span><span class="ident" id="4710495"><a href="/regexp/regexp.go.html#4710365">s</a></span><span class="op" id="4710496">)</span><span class="op" id="4710497">,</span>&nbsp;<span class="ident" id="4710499">nil</span><br>
<span class="lineno"></span><span class="op" id="4710503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span><span class="comment" id="4710506">//&nbsp;Match&nbsp;checks&nbsp;whether&nbsp;a&nbsp;textual&nbsp;regular&nbsp;expression</span><br>
<span class="lineno"></span><span class="comment" id="4710559">//&nbsp;matches&nbsp;a&nbsp;byte&nbsp;slice.&nbsp;&nbsp;More&nbsp;complicated&nbsp;queries&nbsp;need</span><br>
<span class="lineno"></span><span class="comment" id="4710615">//&nbsp;to&nbsp;use&nbsp;Compile&nbsp;and&nbsp;the&nbsp;full&nbsp;Regexp&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="4710664">func</span>&nbsp;<span class="ident" id="4710669">Match</span><span class="op" id="4710674">(</span><span class="ident" id="4710675">pattern</span>&nbsp;<span class="builtintype" id="4710683">string</span><span class="op" id="4710689">,</span>&nbsp;<span class="ident" id="4710691">b</span>&nbsp;<span class="op" id="4710693">[</span><span class="op" id="4710694">]</span><span class="builtintype" id="4710695">byte</span><span class="op" id="4710699">)</span>&nbsp;<span class="op" id="4710701">(</span><span class="ident" id="4710702">matched</span>&nbsp;<span class="builtintype" id="4710710">bool</span><span class="op" id="4710714">,</span>&nbsp;<span class="ident" id="4710716">err</span>&nbsp;<span class="builtintype" id="4710720">error</span><span class="op" id="4710725">)</span>&nbsp;<span class="op" id="4710727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4710730">re</span><span class="op" id="4710732">,</span>&nbsp;<span class="ident" id="4710734"><a href="/regexp/regexp.go.html#4710716">err</a></span>&nbsp;<span class="op" id="4710738">:=</span>&nbsp;<span class="ident" id="4710741"><a href="/regexp/regexp.go.html#4701752">Compile</a></span><span class="op" id="4710748">(</span><span class="ident" id="4710749"><a href="/regexp/regexp.go.html#4710675">pattern</a></span><span class="op" id="4710756">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710759">if</span>&nbsp;<span class="ident" id="4710762"><a href="/regexp/regexp.go.html#4710716">err</a></span>&nbsp;<span class="op" id="4710766">!=</span>&nbsp;<span class="ident" id="4710769">nil</span>&nbsp;<span class="op" id="4710773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710777">return</span>&nbsp;<span class="ident" id="4710784">false</span><span class="op" id="4710789">,</span>&nbsp;<span class="ident" id="4710791"><a href="/regexp/regexp.go.html#4710716">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4710796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710799">return</span>&nbsp;<span class="ident" id="4710806"><a href="/regexp/regexp.go.html#4710730">re</a></span><span class="op" id="4710808">.</span><span class="ident" id="4710809">Match</span><span class="op" id="4710814">(</span><span class="ident" id="4710815"><a href="/regexp/regexp.go.html#4710691">b</a></span><span class="op" id="4710816">)</span><span class="op" id="4710817">,</span>&nbsp;<span class="ident" id="4710819">nil</span><br>
<span class="lineno"></span><span class="op" id="4710823">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="4710826">//&nbsp;ReplaceAllString&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src,&nbsp;replacing&nbsp;matches&nbsp;of&nbsp;the&nbsp;Regexp</span><br>
<span class="lineno"></span><span class="comment" id="4710901">//&nbsp;with&nbsp;the&nbsp;replacement&nbsp;string&nbsp;repl.&nbsp;&nbsp;Inside&nbsp;repl,&nbsp;$&nbsp;signs&nbsp;are&nbsp;interpreted&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="4710979">//&nbsp;in&nbsp;Expand,&nbsp;so&nbsp;for&nbsp;instance&nbsp;$1&nbsp;represents&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;first&nbsp;submatch.</span><br>
<span class="lineno"></span><span class="keyword" id="4711055">func</span>&nbsp;<span class="op" id="4711060">(</span><span class="ident" id="4711061">re</span>&nbsp;<span class="op" id="4711064">*</span><span class="ident" id="4711065"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4711071">)</span>&nbsp;<span class="ident" id="4711073">ReplaceAllString</span><span class="op" id="4711089">(</span><span class="ident" id="4711090">src</span><span class="op" id="4711093">,</span>&nbsp;<span class="ident" id="4711095">repl</span>&nbsp;<span class="builtintype" id="4711100">string</span><span class="op" id="4711106">)</span>&nbsp;<span class="builtintype" id="4711108">string</span>&nbsp;<span class="op" id="4711115">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4711118">n</span>&nbsp;<span class="op" id="4711120">:=</span>&nbsp;<span class="num" id="4711123">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4711126">if</span>&nbsp;<span class="ident" id="4711129"><a href="/regexp/regexp.go.html#4700084">strings</a></span><span class="op" id="4711136">.</span><span class="ident" id="4711137">Index</span><span class="op" id="4711142">(</span><span class="ident" id="4711143"><a href="/regexp/regexp.go.html#4711095">repl</a></span><span class="op" id="4711147">,</span>&nbsp;<span class="string" id="4711149">&#34;$&#34;</span><span class="op" id="4711152">)</span>&nbsp;<span class="op" id="4711154">&gt;=</span>&nbsp;<span class="num" id="4711157">0</span>&nbsp;<span class="op" id="4711159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4711163"><a href="/regexp/regexp.go.html#4711118">n</a></span>&nbsp;<span class="op" id="4711165">=</span>&nbsp;<span class="num" id="4711167">2</span>&nbsp;<span class="op" id="4711169">*</span>&nbsp;<span class="op" id="4711171">(</span><span class="ident" id="4711172"><a href="/regexp/regexp.go.html#4711061">re</a></span><span class="op" id="4711174">.</span><span class="ident" id="4711175">numSubexp</span>&nbsp;<span class="op" id="4711185">+</span>&nbsp;<span class="num" id="4711187">1</span><span class="op" id="4711188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4711191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4711194">b</span>&nbsp;<span class="op" id="4711196">:=</span>&nbsp;<span class="ident" id="4711199"><a href="/regexp/regexp.go.html#4711061">re</a></span><span class="op" id="4711201">.</span><span class="ident" id="4711202">replaceAll</span><span class="op" id="4711212">(</span><span class="ident" id="4711213">nil</span><span class="op" id="4711216">,</span>&nbsp;<span class="ident" id="4711218"><a href="/regexp/regexp.go.html#4711090">src</a></span><span class="op" id="4711221">,</span>&nbsp;<span class="ident" id="4711223"><a href="/regexp/regexp.go.html#4711118">n</a></span><span class="op" id="4711224">,</span>&nbsp;<span class="keyword" id="4711226">func</span><span class="op" id="4711230">(</span><span class="ident" id="4711231">dst</span>&nbsp;<span class="op" id="4711235">[</span><span class="op" id="4711236">]</span><span class="builtintype" id="4711237">byte</span><span class="op" id="4711241">,</span>&nbsp;<span class="ident" id="4711243">match</span>&nbsp;<span class="op" id="4711249">[</span><span class="op" id="4711250">]</span><span class="builtintype" id="4711251">int</span><span class="op" id="4711254">)</span>&nbsp;<span class="op" id="4711256">[</span><span class="op" id="4711257">]</span><span class="builtintype" id="4711258">byte</span>&nbsp;<span class="op" id="4711263">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4711267">return</span>&nbsp;<span class="ident" id="4711274"><a href="/regexp/regexp.go.html#4711061">re</a></span><span class="op" id="4711276">.</span><span class="ident" id="4711277">expand</span><span class="op" id="4711283">(</span><span class="ident" id="4711284"><a href="/regexp/regexp.go.html#4711231">dst</a></span><span class="op" id="4711287">,</span>&nbsp;<span class="ident" id="4711289"><a href="/regexp/regexp.go.html#4711095">repl</a></span><span class="op" id="4711293">,</span>&nbsp;<span class="ident" id="4711295">nil</span><span class="op" id="4711298">,</span>&nbsp;<span class="ident" id="4711300"><a href="/regexp/regexp.go.html#4711090">src</a></span><span class="op" id="4711303">,</span>&nbsp;<span class="ident" id="4711305"><a href="/regexp/regexp.go.html#4711243">match</a></span><span class="op" id="4711310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4711313">}</span><span class="op" id="4711314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4711317">return</span>&nbsp;<span class="builtintype" id="4711324">string</span><span class="op" id="4711330">(</span><span class="ident" id="4711331"><a href="/regexp/regexp.go.html#4711194">b</a></span><span class="op" id="4711332">)</span><br>
<span class="lineno"></span><span class="op" id="4711334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">455</span><span class="comment" id="4711337">//&nbsp;ReplaceAllLiteralString&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src,&nbsp;replacing&nbsp;matches&nbsp;of&nbsp;the&nbsp;Regexp</span><br>
<span class="lineno"></span><span class="comment" id="4711419">//&nbsp;with&nbsp;the&nbsp;replacement&nbsp;string&nbsp;repl.&nbsp;&nbsp;The&nbsp;replacement&nbsp;repl&nbsp;is&nbsp;substituted&nbsp;directly,</span><br>
<span class="lineno"></span><span class="comment" id="4711503">//&nbsp;without&nbsp;using&nbsp;Expand.</span><br>
<span class="lineno"></span><span class="keyword" id="4711528">func</span>&nbsp;<span class="op" id="4711533">(</span><span class="ident" id="4711534">re</span>&nbsp;<span class="op" id="4711537">*</span><span class="ident" id="4711538"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4711544">)</span>&nbsp;<span class="ident" id="4711546">ReplaceAllLiteralString</span><span class="op" id="4711569">(</span><span class="ident" id="4711570">src</span><span class="op" id="4711573">,</span>&nbsp;<span class="ident" id="4711575">repl</span>&nbsp;<span class="builtintype" id="4711580">string</span><span class="op" id="4711586">)</span>&nbsp;<span class="builtintype" id="4711588">string</span>&nbsp;<span class="op" id="4711595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4711598">return</span>&nbsp;<span class="builtintype" id="4711605">string</span><span class="op" id="4711611">(</span><span class="ident" id="4711612"><a href="/regexp/regexp.go.html#4711534">re</a></span><span class="op" id="4711614">.</span><span class="ident" id="4711615">replaceAll</span><span class="op" id="4711625">(</span><span class="ident" id="4711626">nil</span><span class="op" id="4711629">,</span>&nbsp;<span class="ident" id="4711631"><a href="/regexp/regexp.go.html#4711570">src</a></span><span class="op" id="4711634">,</span>&nbsp;<span class="num" id="4711636">2</span><span class="op" id="4711637">,</span>&nbsp;<span class="keyword" id="4711639">func</span><span class="op" id="4711643">(</span><span class="ident" id="4711644">dst</span>&nbsp;<span class="op" id="4711648">[</span><span class="op" id="4711649">]</span><span class="builtintype" id="4711650">byte</span><span class="op" id="4711654">,</span>&nbsp;<span class="ident" id="4711656">match</span>&nbsp;<span class="op" id="4711662">[</span><span class="op" id="4711663">]</span><span class="builtintype" id="4711664">int</span><span class="op" id="4711667">)</span>&nbsp;<span class="op" id="4711669">[</span><span class="op" id="4711670">]</span><span class="builtintype" id="4711671">byte</span>&nbsp;<span class="op" id="4711676">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4711680">return</span>&nbsp;<span class="builtinfunc" id="4711687">append</span><span class="op" id="4711693">(</span><span class="ident" id="4711694"><a href="/regexp/regexp.go.html#4711644">dst</a></span><span class="op" id="4711697">,</span>&nbsp;<span class="ident" id="4711699"><a href="/regexp/regexp.go.html#4711575">repl</a></span><span class="op" id="4711703">...</span><span class="op" id="4711706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4711709">}</span><span class="op" id="4711710">)</span><span class="op" id="4711711">)</span><br>
<span class="lineno"></span><span class="op" id="4711713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4711716">//&nbsp;ReplaceAllStringFunc&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src&nbsp;in&nbsp;which&nbsp;all&nbsp;matches&nbsp;of&nbsp;the</span><br>
<span class="lineno">465</span><span class="comment" id="4711790">//&nbsp;Regexp&nbsp;have&nbsp;been&nbsp;replaced&nbsp;by&nbsp;the&nbsp;return&nbsp;value&nbsp;of&nbsp;function&nbsp;repl&nbsp;applied</span><br>
<span class="lineno"></span><span class="comment" id="4711864">//&nbsp;to&nbsp;the&nbsp;matched&nbsp;substring.&nbsp;&nbsp;The&nbsp;replacement&nbsp;returned&nbsp;by&nbsp;repl&nbsp;is&nbsp;substituted</span><br>
<span class="lineno"></span><span class="comment" id="4711942">//&nbsp;directly,&nbsp;without&nbsp;using&nbsp;Expand.</span><br>
<span class="lineno"></span><span class="keyword" id="4711977">func</span>&nbsp;<span class="op" id="4711982">(</span><span class="ident" id="4711983">re</span>&nbsp;<span class="op" id="4711986">*</span><span class="ident" id="4711987"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4711993">)</span>&nbsp;<span class="ident" id="4711995">ReplaceAllStringFunc</span><span class="op" id="4712015">(</span><span class="ident" id="4712016">src</span>&nbsp;<span class="builtintype" id="4712020">string</span><span class="op" id="4712026">,</span>&nbsp;<span class="ident" id="4712028">repl</span>&nbsp;<span class="keyword" id="4712033">func</span><span class="op" id="4712037">(</span><span class="builtintype" id="4712038">string</span><span class="op" id="4712044">)</span>&nbsp;<span class="builtintype" id="4712046">string</span><span class="op" id="4712052">)</span>&nbsp;<span class="builtintype" id="4712054">string</span>&nbsp;<span class="op" id="4712061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712064">b</span>&nbsp;<span class="op" id="4712066">:=</span>&nbsp;<span class="ident" id="4712069"><a href="/regexp/regexp.go.html#4711983">re</a></span><span class="op" id="4712071">.</span><span class="ident" id="4712072">replaceAll</span><span class="op" id="4712082">(</span><span class="ident" id="4712083">nil</span><span class="op" id="4712086">,</span>&nbsp;<span class="ident" id="4712088"><a href="/regexp/regexp.go.html#4712016">src</a></span><span class="op" id="4712091">,</span>&nbsp;<span class="num" id="4712093">2</span><span class="op" id="4712094">,</span>&nbsp;<span class="keyword" id="4712096">func</span><span class="op" id="4712100">(</span><span class="ident" id="4712101">dst</span>&nbsp;<span class="op" id="4712105">[</span><span class="op" id="4712106">]</span><span class="builtintype" id="4712107">byte</span><span class="op" id="4712111">,</span>&nbsp;<span class="ident" id="4712113">match</span>&nbsp;<span class="op" id="4712119">[</span><span class="op" id="4712120">]</span><span class="builtintype" id="4712121">int</span><span class="op" id="4712124">)</span>&nbsp;<span class="op" id="4712126">[</span><span class="op" id="4712127">]</span><span class="builtintype" id="4712128">byte</span>&nbsp;<span class="op" id="4712133">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712137">return</span>&nbsp;<span class="builtinfunc" id="4712144">append</span><span class="op" id="4712150">(</span><span class="ident" id="4712151"><a href="/regexp/regexp.go.html#4712101">dst</a></span><span class="op" id="4712154">,</span>&nbsp;<span class="ident" id="4712156"><a href="/regexp/regexp.go.html#4712028">repl</a></span><span class="op" id="4712160">(</span><span class="ident" id="4712161"><a href="/regexp/regexp.go.html#4712016">src</a></span><span class="op" id="4712164">[</span><span class="ident" id="4712165"><a href="/regexp/regexp.go.html#4712113">match</a></span><span class="op" id="4712170">[</span><span class="num" id="4712171">0</span><span class="op" id="4712172">]</span><span class="op" id="4712173">:</span><span class="ident" id="4712174"><a href="/regexp/regexp.go.html#4712113">match</a></span><span class="op" id="4712179">[</span><span class="num" id="4712180">1</span><span class="op" id="4712181">]</span><span class="op" id="4712182">]</span><span class="op" id="4712183">)</span><span class="op" id="4712184">...</span><span class="op" id="4712187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4712190">}</span><span class="op" id="4712191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712194">return</span>&nbsp;<span class="builtintype" id="4712201">string</span><span class="op" id="4712207">(</span><span class="ident" id="4712208"><a href="/regexp/regexp.go.html#4712064">b</a></span><span class="op" id="4712209">)</span><br>
<span class="lineno"></span><span class="op" id="4712211">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">475</span><span class="keyword" id="4712214">func</span>&nbsp;<span class="op" id="4712219">(</span><span class="ident" id="4712220">re</span>&nbsp;<span class="op" id="4712223">*</span><span class="ident" id="4712224"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4712230">)</span>&nbsp;<span class="ident" id="4712232">replaceAll</span><span class="op" id="4712242">(</span><span class="ident" id="4712243">bsrc</span>&nbsp;<span class="op" id="4712248">[</span><span class="op" id="4712249">]</span><span class="builtintype" id="4712250">byte</span><span class="op" id="4712254">,</span>&nbsp;<span class="ident" id="4712256">src</span>&nbsp;<span class="builtintype" id="4712260">string</span><span class="op" id="4712266">,</span>&nbsp;<span class="ident" id="4712268">nmatch</span>&nbsp;<span class="builtintype" id="4712275">int</span><span class="op" id="4712278">,</span>&nbsp;<span class="ident" id="4712280">repl</span>&nbsp;<span class="keyword" id="4712285">func</span><span class="op" id="4712289">(</span><span class="ident" id="4712290">dst</span>&nbsp;<span class="op" id="4712294">[</span><span class="op" id="4712295">]</span><span class="builtintype" id="4712296">byte</span><span class="op" id="4712300">,</span>&nbsp;<span class="ident" id="4712302">m</span>&nbsp;<span class="op" id="4712304">[</span><span class="op" id="4712305">]</span><span class="builtintype" id="4712306">int</span><span class="op" id="4712309">)</span>&nbsp;<span class="op" id="4712311">[</span><span class="op" id="4712312">]</span><span class="builtintype" id="4712313">byte</span><span class="op" id="4712317">)</span>&nbsp;<span class="op" id="4712319">[</span><span class="op" id="4712320">]</span><span class="builtintype" id="4712321">byte</span>&nbsp;<span class="op" id="4712326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712329">lastMatchEnd</span>&nbsp;<span class="op" id="4712342">:=</span>&nbsp;<span class="num" id="4712345">0</span>&nbsp;<span class="comment" id="4712347">//&nbsp;end&nbsp;position&nbsp;of&nbsp;the&nbsp;most&nbsp;recent&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712389">searchPos</span>&nbsp;<span class="op" id="4712399">:=</span>&nbsp;<span class="num" id="4712402">0</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4712407">//&nbsp;position&nbsp;where&nbsp;we&nbsp;next&nbsp;look&nbsp;for&nbsp;a&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712451">var</span>&nbsp;<span class="ident" id="4712455">buf</span>&nbsp;<span class="op" id="4712459">[</span><span class="op" id="4712460">]</span><span class="builtintype" id="4712461">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712467">var</span>&nbsp;<span class="ident" id="4712471">endPos</span>&nbsp;<span class="builtintype" id="4712478">int</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712483">if</span>&nbsp;<span class="ident" id="4712486"><a href="/regexp/regexp.go.html#4712243">bsrc</a></span>&nbsp;<span class="op" id="4712491">!=</span>&nbsp;<span class="ident" id="4712494">nil</span>&nbsp;<span class="op" id="4712498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712502"><a href="/regexp/regexp.go.html#4712471">endPos</a></span>&nbsp;<span class="op" id="4712509">=</span>&nbsp;<span class="builtinfunc" id="4712511">len</span><span class="op" id="4712514">(</span><span class="ident" id="4712515"><a href="/regexp/regexp.go.html#4712243">bsrc</a></span><span class="op" id="4712519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4712522">}</span>&nbsp;<span class="keyword" id="4712524">else</span>&nbsp;<span class="op" id="4712529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712533"><a href="/regexp/regexp.go.html#4712471">endPos</a></span>&nbsp;<span class="op" id="4712540">=</span>&nbsp;<span class="builtinfunc" id="4712542">len</span><span class="op" id="4712545">(</span><span class="ident" id="4712546"><a href="/regexp/regexp.go.html#4712256">src</a></span><span class="op" id="4712549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4712552">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712555">for</span>&nbsp;<span class="ident" id="4712559"><a href="/regexp/regexp.go.html#4712389">searchPos</a></span>&nbsp;<span class="op" id="4712569">&lt;=</span>&nbsp;<span class="ident" id="4712572"><a href="/regexp/regexp.go.html#4712471">endPos</a></span>&nbsp;<span class="op" id="4712579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712583">a</span>&nbsp;<span class="op" id="4712585">:=</span>&nbsp;<span class="ident" id="4712588"><a href="/regexp/regexp.go.html#4712220">re</a></span><span class="op" id="4712590">.</span><span class="ident" id="4712591">doExecute</span><span class="op" id="4712600">(</span><span class="ident" id="4712601">nil</span><span class="op" id="4712604">,</span>&nbsp;<span class="ident" id="4712606"><a href="/regexp/regexp.go.html#4712243">bsrc</a></span><span class="op" id="4712610">,</span>&nbsp;<span class="ident" id="4712612"><a href="/regexp/regexp.go.html#4712256">src</a></span><span class="op" id="4712615">,</span>&nbsp;<span class="ident" id="4712617"><a href="/regexp/regexp.go.html#4712389">searchPos</a></span><span class="op" id="4712626">,</span>&nbsp;<span class="ident" id="4712628"><a href="/regexp/regexp.go.html#4712268">nmatch</a></span><span class="op" id="4712634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712638">if</span>&nbsp;<span class="builtinfunc" id="4712641">len</span><span class="op" id="4712644">(</span><span class="ident" id="4712645"><a href="/regexp/regexp.go.html#4712583">a</a></span><span class="op" id="4712646">)</span>&nbsp;<span class="op" id="4712648">==</span>&nbsp;<span class="num" id="4712651">0</span>&nbsp;<span class="op" id="4712653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712658">break</span>&nbsp;<span class="comment" id="4712664">//&nbsp;no&nbsp;more&nbsp;matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4712685">}</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4712690">//&nbsp;Copy&nbsp;the&nbsp;unmatched&nbsp;characters&nbsp;before&nbsp;this&nbsp;match.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712744">if</span>&nbsp;<span class="ident" id="4712747"><a href="/regexp/regexp.go.html#4712243">bsrc</a></span>&nbsp;<span class="op" id="4712752">!=</span>&nbsp;<span class="ident" id="4712755">nil</span>&nbsp;<span class="op" id="4712759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712764"><a href="/regexp/regexp.go.html#4712455">buf</a></span>&nbsp;<span class="op" id="4712768">=</span>&nbsp;<span class="builtinfunc" id="4712770">append</span><span class="op" id="4712776">(</span><span class="ident" id="4712777"><a href="/regexp/regexp.go.html#4712455">buf</a></span><span class="op" id="4712780">,</span>&nbsp;<span class="ident" id="4712782"><a href="/regexp/regexp.go.html#4712243">bsrc</a></span><span class="op" id="4712786">[</span><span class="ident" id="4712787"><a href="/regexp/regexp.go.html#4712329">lastMatchEnd</a></span><span class="op" id="4712799">:</span><span class="ident" id="4712800"><a href="/regexp/regexp.go.html#4712583">a</a></span><span class="op" id="4712801">[</span><span class="num" id="4712802">0</span><span class="op" id="4712803">]</span><span class="op" id="4712804">]</span><span class="op" id="4712805">...</span><span class="op" id="4712808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4712812">}</span>&nbsp;<span class="keyword" id="4712814">else</span>&nbsp;<span class="op" id="4712819">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712824"><a href="/regexp/regexp.go.html#4712455">buf</a></span>&nbsp;<span class="op" id="4712828">=</span>&nbsp;<span class="builtinfunc" id="4712830">append</span><span class="op" id="4712836">(</span><span class="ident" id="4712837"><a href="/regexp/regexp.go.html#4712455">buf</a></span><span class="op" id="4712840">,</span>&nbsp;<span class="ident" id="4712842"><a href="/regexp/regexp.go.html#4712256">src</a></span><span class="op" id="4712845">[</span><span class="ident" id="4712846"><a href="/regexp/regexp.go.html#4712329">lastMatchEnd</a></span><span class="op" id="4712858">:</span><span class="ident" id="4712859"><a href="/regexp/regexp.go.html#4712583">a</a></span><span class="op" id="4712860">[</span><span class="num" id="4712861">0</span><span class="op" id="4712862">]</span><span class="op" id="4712863">]</span><span class="op" id="4712864">...</span><span class="op" id="4712867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4712871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4712876">//&nbsp;Now&nbsp;insert&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;replacement&nbsp;string,&nbsp;but&nbsp;not&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4712940">//&nbsp;match&nbsp;of&nbsp;the&nbsp;empty&nbsp;string&nbsp;immediately&nbsp;after&nbsp;another&nbsp;match.</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4713004">//&nbsp;(Otherwise,&nbsp;we&nbsp;get&nbsp;double&nbsp;replacement&nbsp;for&nbsp;patterns&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4713065">//&nbsp;match&nbsp;both&nbsp;empty&nbsp;and&nbsp;nonempty&nbsp;strings.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4713110">if</span>&nbsp;<span class="ident" id="4713113"><a href="/regexp/regexp.go.html#4712583">a</a></span><span class="op" id="4713114">[</span><span class="num" id="4713115">1</span><span class="op" id="4713116">]</span>&nbsp;<span class="op" id="4713118">&gt;</span>&nbsp;<span class="ident" id="4713120"><a href="/regexp/regexp.go.html#4712329">lastMatchEnd</a></span>&nbsp;<span class="op" id="4713133">||</span>&nbsp;<span class="ident" id="4713136"><a href="/regexp/regexp.go.html#4712583">a</a></span><span class="op" id="4713137">[</span><span class="num" id="4713138">0</span><span class="op" id="4713139">]</span>&nbsp;<span class="op" id="4713141">==</span>&nbsp;<span class="num" id="4713144">0</span>&nbsp;<span class="op" id="4713146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4713151"><a href="/regexp/regexp.go.html#4712455">buf</a></span>&nbsp;<span class="op" id="4713155">=</span>&nbsp;<span class="ident" id="4713157"><a href="/regexp/regexp.go.html#4712280">repl</a></span><span class="op" id="4713161">(</span><span class="ident" id="4713162"><a href="/regexp/regexp.go.html#4712455">buf</a></span><span class="op" id="4713165">,</span>&nbsp;<span class="ident" id="4713167"><a href="/regexp/regexp.go.html#4712583">a</a></span><span class="op" id="4713168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4713172">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4713176"><a href="/regexp/regexp.go.html#4712329">lastMatchEnd</a></span>&nbsp;<span class="op" id="4713189">=</span>&nbsp;<span class="ident" id="4713191"><a href="/regexp/regexp.go.html#4712583">a</a></span><span class="op" id="4713192">[</span><span class="num" id="4713193">1</span><span class="op" id="4713194">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4713199">//&nbsp;Advance&nbsp;past&nbsp;this&nbsp;match;&nbsp;always&nbsp;advance&nbsp;at&nbsp;least&nbsp;one&nbsp;character.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4713268">var</span>&nbsp;<span class="ident" id="4713272">width</span>&nbsp;<span class="builtintype" id="4713278">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4713284">if</span>&nbsp;<span class="ident" id="4713287"><a href="/regexp/regexp.go.html#4712243">bsrc</a></span>&nbsp;<span class="op" id="4713292">!=</span>&nbsp;<span class="ident" id="4713295">nil</span>&nbsp;<span class="op" id="4713299">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4713304">_</span><span class="op" id="4713305">,</span>&nbsp;<span class="ident" id="4713307"><a href="/regexp/regexp.go.html#4713272">width</a></span>&nbsp;<span class="op" id="4713313">=</span>&nbsp;<span class="ident" id="4713315"><a href="/regexp/regexp.go.html#4700114">utf8</a></span><span class="op" id="4713319">.</span><span class="ident" id="4713320">DecodeRune</span><span class="op" id="4713330">(</span><span class="ident" id="4713331"><a href="/regexp/regexp.go.html#4712243">bsrc</a></span><span class="op" id="4713335">[</span><span class="ident" id="4713336"><a href="/regexp/regexp.go.html#4712389">searchPos</a></span><span class="op" id="4713345">:</span><span class="op" id="4713346">]</span><span class="op" id="4713347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4713351">}</span>&nbsp;<span class="keyword" id="4713353">else</span>&nbsp;<span class="op" id="4713358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4713363">_</span><span class="op" id="4713364">,</span>&nbsp;<span class="ident" id="4713366"><a href="/regexp/regexp.go.html#4713272">width</a></span>&nbsp;<span class="op" id="4713372">=</span>&nbsp;<span class="ident" id="4713374"><a href="/regexp/regexp.go.html#4700114">utf8</a></span><span class="op" id="4713378">.</span><span class="ident" id="4713379">DecodeRuneInString</span><span class="op" id="4713397">(</span><span class="ident" id="4713398"><a href="/regexp/regexp.go.html#4712256">src</a></span><span class="op" id="4713401">[</span><span class="ident" id="4713402"><a href="/regexp/regexp.go.html#4712389">searchPos</a></span><span class="op" id="4713411">:</span><span class="op" id="4713412">]</span><span class="op" id="4713413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4713417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4713421">if</span>&nbsp;<span class="ident" id="4713424"><a href="/regexp/regexp.go.html#4712389">searchPos</a></span><span class="op" id="4713433">+</span><span class="ident" id="4713434"><a href="/regexp/regexp.go.html#4713272">width</a></span>&nbsp;<span class="op" id="4713440">&gt;</span>&nbsp;<span class="ident" id="4713442"><a href="/regexp/regexp.go.html#4712583">a</a></span><span class="op" id="4713443">[</span><span class="num" id="4713444">1</span><span class="op" id="4713445">]</span>&nbsp;<span class="op" id="4713447">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4713452"><a href="/regexp/regexp.go.html#4712389">searchPos</a></span>&nbsp;<span class="op" id="4713462">+=</span>&nbsp;<span class="ident" id="4713465"><a href="/regexp/regexp.go.html#4713272">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4713473">}</span>&nbsp;<span class="keyword" id="4713475">else</span>&nbsp;<span class="keyword" id="4713480">if</span>&nbsp;<span class="ident" id="4713483"><a href="/regexp/regexp.go.html#4712389">searchPos</a></span><span class="op" id="4713492">+</span><span class="num" id="4713493">1</span>&nbsp;<span class="op" id="4713495">&gt;</span>&nbsp;<span class="ident" id="4713497"><a href="/regexp/regexp.go.html#4712583">a</a></span><span class="op" id="4713498">[</span><span class="num" id="4713499">1</span><span class="op" id="4713500">]</span>&nbsp;<span class="op" id="4713502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4713507">//&nbsp;This&nbsp;clause&nbsp;is&nbsp;only&nbsp;needed&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4713564">//&nbsp;string.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;DecodeRuneInString&nbsp;returns&nbsp;width=0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4713629"><a href="/regexp/regexp.go.html#4712389">searchPos</a></span><span class="op" id="4713638">++</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4713643">}</span>&nbsp;<span class="keyword" id="4713645">else</span>&nbsp;<span class="op" id="4713650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4713655"><a href="/regexp/regexp.go.html#4712389">searchPos</a></span>&nbsp;<span class="op" id="4713665">=</span>&nbsp;<span class="ident" id="4713667"><a href="/regexp/regexp.go.html#4712583">a</a></span><span class="op" id="4713668">[</span><span class="num" id="4713669">1</span><span class="op" id="4713670">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4713674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4713677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4713681">//&nbsp;Copy&nbsp;the&nbsp;unmatched&nbsp;characters&nbsp;after&nbsp;the&nbsp;last&nbsp;match.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4713737">if</span>&nbsp;<span class="ident" id="4713740"><a href="/regexp/regexp.go.html#4712243">bsrc</a></span>&nbsp;<span class="op" id="4713745">!=</span>&nbsp;<span class="ident" id="4713748">nil</span>&nbsp;<span class="op" id="4713752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4713756"><a href="/regexp/regexp.go.html#4712455">buf</a></span>&nbsp;<span class="op" id="4713760">=</span>&nbsp;<span class="builtinfunc" id="4713762">append</span><span class="op" id="4713768">(</span><span class="ident" id="4713769"><a href="/regexp/regexp.go.html#4712455">buf</a></span><span class="op" id="4713772">,</span>&nbsp;<span class="ident" id="4713774"><a href="/regexp/regexp.go.html#4712243">bsrc</a></span><span class="op" id="4713778">[</span><span class="ident" id="4713779"><a href="/regexp/regexp.go.html#4712329">lastMatchEnd</a></span><span class="op" id="4713791">:</span><span class="op" id="4713792">]</span><span class="op" id="4713793">...</span><span class="op" id="4713796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4713799">}</span>&nbsp;<span class="keyword" id="4713801">else</span>&nbsp;<span class="op" id="4713806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4713810"><a href="/regexp/regexp.go.html#4712455">buf</a></span>&nbsp;<span class="op" id="4713814">=</span>&nbsp;<span class="builtinfunc" id="4713816">append</span><span class="op" id="4713822">(</span><span class="ident" id="4713823"><a href="/regexp/regexp.go.html#4712455">buf</a></span><span class="op" id="4713826">,</span>&nbsp;<span class="ident" id="4713828"><a href="/regexp/regexp.go.html#4712256">src</a></span><span class="op" id="4713831">[</span><span class="ident" id="4713832"><a href="/regexp/regexp.go.html#4712329">lastMatchEnd</a></span><span class="op" id="4713844">:</span><span class="op" id="4713845">]</span><span class="op" id="4713846">...</span><span class="op" id="4713849">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4713852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4713856">return</span>&nbsp;<span class="ident" id="4713863"><a href="/regexp/regexp.go.html#4712455">buf</a></span><br>
<span class="lineno"></span><span class="op" id="4713867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span><span class="comment" id="4713870">//&nbsp;ReplaceAll&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src,&nbsp;replacing&nbsp;matches&nbsp;of&nbsp;the&nbsp;Regexp</span><br>
<span class="lineno"></span><span class="comment" id="4713939">//&nbsp;with&nbsp;the&nbsp;replacement&nbsp;text&nbsp;repl.&nbsp;&nbsp;Inside&nbsp;repl,&nbsp;$&nbsp;signs&nbsp;are&nbsp;interpreted&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="4714015">//&nbsp;in&nbsp;Expand,&nbsp;so&nbsp;for&nbsp;instance&nbsp;$1&nbsp;represents&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;first&nbsp;submatch.</span><br>
<span class="lineno"></span><span class="keyword" id="4714091">func</span>&nbsp;<span class="op" id="4714096">(</span><span class="ident" id="4714097">re</span>&nbsp;<span class="op" id="4714100">*</span><span class="ident" id="4714101"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4714107">)</span>&nbsp;<span class="ident" id="4714109">ReplaceAll</span><span class="op" id="4714119">(</span><span class="ident" id="4714120">src</span><span class="op" id="4714123">,</span>&nbsp;<span class="ident" id="4714125">repl</span>&nbsp;<span class="op" id="4714130">[</span><span class="op" id="4714131">]</span><span class="builtintype" id="4714132">byte</span><span class="op" id="4714136">)</span>&nbsp;<span class="op" id="4714138">[</span><span class="op" id="4714139">]</span><span class="builtintype" id="4714140">byte</span>&nbsp;<span class="op" id="4714145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4714148">n</span>&nbsp;<span class="op" id="4714150">:=</span>&nbsp;<span class="num" id="4714153">2</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4714156">if</span>&nbsp;<span class="ident" id="4714159"><a href="/regexp/regexp.go.html#4700041">bytes</a></span><span class="op" id="4714164">.</span><span class="ident" id="4714165">IndexByte</span><span class="op" id="4714174">(</span><span class="ident" id="4714175"><a href="/regexp/regexp.go.html#4714125">repl</a></span><span class="op" id="4714179">,</span>&nbsp;<span class="string" id="4714181">&#39;$&#39;</span><span class="op" id="4714184">)</span>&nbsp;<span class="op" id="4714186">&gt;=</span>&nbsp;<span class="num" id="4714189">0</span>&nbsp;<span class="op" id="4714191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4714195"><a href="/regexp/regexp.go.html#4714148">n</a></span>&nbsp;<span class="op" id="4714197">=</span>&nbsp;<span class="num" id="4714199">2</span>&nbsp;<span class="op" id="4714201">*</span>&nbsp;<span class="op" id="4714203">(</span><span class="ident" id="4714204"><a href="/regexp/regexp.go.html#4714097">re</a></span><span class="op" id="4714206">.</span><span class="ident" id="4714207">numSubexp</span>&nbsp;<span class="op" id="4714217">+</span>&nbsp;<span class="num" id="4714219">1</span><span class="op" id="4714220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4714223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4714226">srepl</span>&nbsp;<span class="op" id="4714232">:=</span>&nbsp;<span class="string" id="4714235">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4714239">b</span>&nbsp;<span class="op" id="4714241">:=</span>&nbsp;<span class="ident" id="4714244"><a href="/regexp/regexp.go.html#4714097">re</a></span><span class="op" id="4714246">.</span><span class="ident" id="4714247">replaceAll</span><span class="op" id="4714257">(</span><span class="ident" id="4714258"><a href="/regexp/regexp.go.html#4714120">src</a></span><span class="op" id="4714261">,</span>&nbsp;<span class="string" id="4714263">&#34;&#34;</span><span class="op" id="4714265">,</span>&nbsp;<span class="ident" id="4714267"><a href="/regexp/regexp.go.html#4714148">n</a></span><span class="op" id="4714268">,</span>&nbsp;<span class="keyword" id="4714270">func</span><span class="op" id="4714274">(</span><span class="ident" id="4714275">dst</span>&nbsp;<span class="op" id="4714279">[</span><span class="op" id="4714280">]</span><span class="builtintype" id="4714281">byte</span><span class="op" id="4714285">,</span>&nbsp;<span class="ident" id="4714287">match</span>&nbsp;<span class="op" id="4714293">[</span><span class="op" id="4714294">]</span><span class="builtintype" id="4714295">int</span><span class="op" id="4714298">)</span>&nbsp;<span class="op" id="4714300">[</span><span class="op" id="4714301">]</span><span class="builtintype" id="4714302">byte</span>&nbsp;<span class="op" id="4714307">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4714311">if</span>&nbsp;<span class="builtinfunc" id="4714314">len</span><span class="op" id="4714317">(</span><span class="ident" id="4714318"><a href="/regexp/regexp.go.html#4714226">srepl</a></span><span class="op" id="4714323">)</span>&nbsp;<span class="op" id="4714325">!=</span>&nbsp;<span class="builtinfunc" id="4714328">len</span><span class="op" id="4714331">(</span><span class="ident" id="4714332"><a href="/regexp/regexp.go.html#4714125">repl</a></span><span class="op" id="4714336">)</span>&nbsp;<span class="op" id="4714338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4714343"><a href="/regexp/regexp.go.html#4714226">srepl</a></span>&nbsp;<span class="op" id="4714349">=</span>&nbsp;<span class="builtintype" id="4714351">string</span><span class="op" id="4714357">(</span><span class="ident" id="4714358"><a href="/regexp/regexp.go.html#4714125">repl</a></span><span class="op" id="4714362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4714366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4714370">return</span>&nbsp;<span class="ident" id="4714377"><a href="/regexp/regexp.go.html#4714097">re</a></span><span class="op" id="4714379">.</span><span class="ident" id="4714380">expand</span><span class="op" id="4714386">(</span><span class="ident" id="4714387"><a href="/regexp/regexp.go.html#4714275">dst</a></span><span class="op" id="4714390">,</span>&nbsp;<span class="ident" id="4714392"><a href="/regexp/regexp.go.html#4714226">srepl</a></span><span class="op" id="4714397">,</span>&nbsp;<span class="ident" id="4714399"><a href="/regexp/regexp.go.html#4714120">src</a></span><span class="op" id="4714402">,</span>&nbsp;<span class="string" id="4714404">&#34;&#34;</span><span class="op" id="4714406">,</span>&nbsp;<span class="ident" id="4714408"><a href="/regexp/regexp.go.html#4714287">match</a></span><span class="op" id="4714413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4714416">}</span><span class="op" id="4714417">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4714420">return</span>&nbsp;<span class="ident" id="4714427"><a href="/regexp/regexp.go.html#4714239">b</a></span><br>
<span class="lineno"></span><span class="op" id="4714429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4714432">//&nbsp;ReplaceAllLiteral&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src,&nbsp;replacing&nbsp;matches&nbsp;of&nbsp;the&nbsp;Regexp</span><br>
<span class="lineno"></span><span class="comment" id="4714508">//&nbsp;with&nbsp;the&nbsp;replacement&nbsp;bytes&nbsp;repl.&nbsp;&nbsp;The&nbsp;replacement&nbsp;repl&nbsp;is&nbsp;substituted&nbsp;directly,</span><br>
<span class="lineno">555</span><span class="comment" id="4714591">//&nbsp;without&nbsp;using&nbsp;Expand.</span><br>
<span class="lineno"></span><span class="keyword" id="4714616">func</span>&nbsp;<span class="op" id="4714621">(</span><span class="ident" id="4714622">re</span>&nbsp;<span class="op" id="4714625">*</span><span class="ident" id="4714626"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4714632">)</span>&nbsp;<span class="ident" id="4714634">ReplaceAllLiteral</span><span class="op" id="4714651">(</span><span class="ident" id="4714652">src</span><span class="op" id="4714655">,</span>&nbsp;<span class="ident" id="4714657">repl</span>&nbsp;<span class="op" id="4714662">[</span><span class="op" id="4714663">]</span><span class="builtintype" id="4714664">byte</span><span class="op" id="4714668">)</span>&nbsp;<span class="op" id="4714670">[</span><span class="op" id="4714671">]</span><span class="builtintype" id="4714672">byte</span>&nbsp;<span class="op" id="4714677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4714680">return</span>&nbsp;<span class="ident" id="4714687"><a href="/regexp/regexp.go.html#4714622">re</a></span><span class="op" id="4714689">.</span><span class="ident" id="4714690">replaceAll</span><span class="op" id="4714700">(</span><span class="ident" id="4714701"><a href="/regexp/regexp.go.html#4714652">src</a></span><span class="op" id="4714704">,</span>&nbsp;<span class="string" id="4714706">&#34;&#34;</span><span class="op" id="4714708">,</span>&nbsp;<span class="num" id="4714710">2</span><span class="op" id="4714711">,</span>&nbsp;<span class="keyword" id="4714713">func</span><span class="op" id="4714717">(</span><span class="ident" id="4714718">dst</span>&nbsp;<span class="op" id="4714722">[</span><span class="op" id="4714723">]</span><span class="builtintype" id="4714724">byte</span><span class="op" id="4714728">,</span>&nbsp;<span class="ident" id="4714730">match</span>&nbsp;<span class="op" id="4714736">[</span><span class="op" id="4714737">]</span><span class="builtintype" id="4714738">int</span><span class="op" id="4714741">)</span>&nbsp;<span class="op" id="4714743">[</span><span class="op" id="4714744">]</span><span class="builtintype" id="4714745">byte</span>&nbsp;<span class="op" id="4714750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4714754">return</span>&nbsp;<span class="builtinfunc" id="4714761">append</span><span class="op" id="4714767">(</span><span class="ident" id="4714768"><a href="/regexp/regexp.go.html#4714718">dst</a></span><span class="op" id="4714771">,</span>&nbsp;<span class="ident" id="4714773"><a href="/regexp/regexp.go.html#4714657">repl</a></span><span class="op" id="4714777">...</span><span class="op" id="4714780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4714783">}</span><span class="op" id="4714784">)</span><br>
<span class="lineno">560</span><span class="op" id="4714786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4714789">//&nbsp;ReplaceAllFunc&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src&nbsp;in&nbsp;which&nbsp;all&nbsp;matches&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4714857">//&nbsp;Regexp&nbsp;have&nbsp;been&nbsp;replaced&nbsp;by&nbsp;the&nbsp;return&nbsp;value&nbsp;of&nbsp;function&nbsp;repl&nbsp;applied</span><br>
<span class="lineno"></span><span class="comment" id="4714931">//&nbsp;to&nbsp;the&nbsp;matched&nbsp;byte&nbsp;slice.&nbsp;&nbsp;The&nbsp;replacement&nbsp;returned&nbsp;by&nbsp;repl&nbsp;is&nbsp;substituted</span><br>
<span class="lineno">565</span><span class="comment" id="4715010">//&nbsp;directly,&nbsp;without&nbsp;using&nbsp;Expand.</span><br>
<span class="lineno"></span><span class="keyword" id="4715045">func</span>&nbsp;<span class="op" id="4715050">(</span><span class="ident" id="4715051">re</span>&nbsp;<span class="op" id="4715054">*</span><span class="ident" id="4715055"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4715061">)</span>&nbsp;<span class="ident" id="4715063">ReplaceAllFunc</span><span class="op" id="4715077">(</span><span class="ident" id="4715078">src</span>&nbsp;<span class="op" id="4715082">[</span><span class="op" id="4715083">]</span><span class="builtintype" id="4715084">byte</span><span class="op" id="4715088">,</span>&nbsp;<span class="ident" id="4715090">repl</span>&nbsp;<span class="keyword" id="4715095">func</span><span class="op" id="4715099">(</span><span class="op" id="4715100">[</span><span class="op" id="4715101">]</span><span class="builtintype" id="4715102">byte</span><span class="op" id="4715106">)</span>&nbsp;<span class="op" id="4715108">[</span><span class="op" id="4715109">]</span><span class="builtintype" id="4715110">byte</span><span class="op" id="4715114">)</span>&nbsp;<span class="op" id="4715116">[</span><span class="op" id="4715117">]</span><span class="builtintype" id="4715118">byte</span>&nbsp;<span class="op" id="4715123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4715126">return</span>&nbsp;<span class="ident" id="4715133"><a href="/regexp/regexp.go.html#4715051">re</a></span><span class="op" id="4715135">.</span><span class="ident" id="4715136">replaceAll</span><span class="op" id="4715146">(</span><span class="ident" id="4715147"><a href="/regexp/regexp.go.html#4715078">src</a></span><span class="op" id="4715150">,</span>&nbsp;<span class="string" id="4715152">&#34;&#34;</span><span class="op" id="4715154">,</span>&nbsp;<span class="num" id="4715156">2</span><span class="op" id="4715157">,</span>&nbsp;<span class="keyword" id="4715159">func</span><span class="op" id="4715163">(</span><span class="ident" id="4715164">dst</span>&nbsp;<span class="op" id="4715168">[</span><span class="op" id="4715169">]</span><span class="builtintype" id="4715170">byte</span><span class="op" id="4715174">,</span>&nbsp;<span class="ident" id="4715176">match</span>&nbsp;<span class="op" id="4715182">[</span><span class="op" id="4715183">]</span><span class="builtintype" id="4715184">int</span><span class="op" id="4715187">)</span>&nbsp;<span class="op" id="4715189">[</span><span class="op" id="4715190">]</span><span class="builtintype" id="4715191">byte</span>&nbsp;<span class="op" id="4715196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4715200">return</span>&nbsp;<span class="builtinfunc" id="4715207">append</span><span class="op" id="4715213">(</span><span class="ident" id="4715214"><a href="/regexp/regexp.go.html#4715164">dst</a></span><span class="op" id="4715217">,</span>&nbsp;<span class="ident" id="4715219"><a href="/regexp/regexp.go.html#4715090">repl</a></span><span class="op" id="4715223">(</span><span class="ident" id="4715224"><a href="/regexp/regexp.go.html#4715078">src</a></span><span class="op" id="4715227">[</span><span class="ident" id="4715228"><a href="/regexp/regexp.go.html#4715176">match</a></span><span class="op" id="4715233">[</span><span class="num" id="4715234">0</span><span class="op" id="4715235">]</span><span class="op" id="4715236">:</span><span class="ident" id="4715237"><a href="/regexp/regexp.go.html#4715176">match</a></span><span class="op" id="4715242">[</span><span class="num" id="4715243">1</span><span class="op" id="4715244">]</span><span class="op" id="4715245">]</span><span class="op" id="4715246">)</span><span class="op" id="4715247">...</span><span class="op" id="4715250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4715253">}</span><span class="op" id="4715254">)</span><br>
<span class="lineno">570</span><span class="op" id="4715256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4715259">var</span>&nbsp;<span class="ident" id="4715263">specialBytes</span>&nbsp;<span class="op" id="4715276">=</span>&nbsp;<span class="op" id="4715278">[</span><span class="op" id="4715279">]</span><span class="builtintype" id="4715280">byte</span><span class="op" id="4715284">(</span><span class="string" id="4715285">`\.+*?()|[]{}^$`</span><span class="op" id="4715301">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4715304">func</span>&nbsp;<span class="ident" id="4715309">special</span><span class="op" id="4715316">(</span><span class="ident" id="4715317">b</span>&nbsp;<span class="builtintype" id="4715319">byte</span><span class="op" id="4715323">)</span>&nbsp;<span class="builtintype" id="4715325">bool</span>&nbsp;<span class="op" id="4715330">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4715333">return</span>&nbsp;<span class="ident" id="4715340"><a href="/regexp/regexp.go.html#4700041">bytes</a></span><span class="op" id="4715345">.</span><span class="ident" id="4715346">IndexByte</span><span class="op" id="4715355">(</span><span class="ident" id="4715356"><a href="/regexp/regexp.go.html#4715263">specialBytes</a></span><span class="op" id="4715368">,</span>&nbsp;<span class="ident" id="4715370"><a href="/regexp/regexp.go.html#4715317">b</a></span><span class="op" id="4715371">)</span>&nbsp;<span class="op" id="4715373">&gt;=</span>&nbsp;<span class="num" id="4715376">0</span><br>
<span class="lineno"></span><span class="op" id="4715378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4715381">//&nbsp;QuoteMeta&nbsp;returns&nbsp;a&nbsp;string&nbsp;that&nbsp;quotes&nbsp;all&nbsp;regular&nbsp;expression&nbsp;metacharacters</span><br>
<span class="lineno"></span><span class="comment" id="4715461">//&nbsp;inside&nbsp;the&nbsp;argument&nbsp;text;&nbsp;the&nbsp;returned&nbsp;string&nbsp;is&nbsp;a&nbsp;regular&nbsp;expression&nbsp;matching</span><br>
<span class="lineno">580</span><span class="comment" id="4715543">//&nbsp;the&nbsp;literal&nbsp;text.&nbsp;&nbsp;For&nbsp;example,&nbsp;QuoteMeta(`[foo]`)&nbsp;returns&nbsp;`\[foo\]`.</span><br>
<span class="lineno"></span><span class="keyword" id="4715616">func</span>&nbsp;<span class="ident" id="4715621">QuoteMeta</span><span class="op" id="4715630">(</span><span class="ident" id="4715631">s</span>&nbsp;<span class="builtintype" id="4715633">string</span><span class="op" id="4715639">)</span>&nbsp;<span class="builtintype" id="4715641">string</span>&nbsp;<span class="op" id="4715648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4715651">b</span>&nbsp;<span class="op" id="4715653">:=</span>&nbsp;<span class="builtinfunc" id="4715656">make</span><span class="op" id="4715660">(</span><span class="op" id="4715661">[</span><span class="op" id="4715662">]</span><span class="builtintype" id="4715663">byte</span><span class="op" id="4715667">,</span>&nbsp;<span class="num" id="4715669">2</span><span class="op" id="4715670">*</span><span class="builtinfunc" id="4715671">len</span><span class="op" id="4715674">(</span><span class="ident" id="4715675"><a href="/regexp/regexp.go.html#4715631">s</a></span><span class="op" id="4715676">)</span><span class="op" id="4715677">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4715681">//&nbsp;A&nbsp;byte&nbsp;loop&nbsp;is&nbsp;correct&nbsp;because&nbsp;all&nbsp;metacharacters&nbsp;are&nbsp;ASCII.</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4715746">j</span>&nbsp;<span class="op" id="4715748">:=</span>&nbsp;<span class="num" id="4715751">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4715754">for</span>&nbsp;<span class="ident" id="4715758">i</span>&nbsp;<span class="op" id="4715760">:=</span>&nbsp;<span class="num" id="4715763">0</span><span class="op" id="4715764">;</span>&nbsp;<span class="ident" id="4715766"><a href="/regexp/regexp.go.html#4715758">i</a></span>&nbsp;<span class="op" id="4715768">&lt;</span>&nbsp;<span class="builtinfunc" id="4715770">len</span><span class="op" id="4715773">(</span><span class="ident" id="4715774"><a href="/regexp/regexp.go.html#4715631">s</a></span><span class="op" id="4715775">)</span><span class="op" id="4715776">;</span>&nbsp;<span class="ident" id="4715778"><a href="/regexp/regexp.go.html#4715758">i</a></span><span class="op" id="4715779">++</span>&nbsp;<span class="op" id="4715782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4715786">if</span>&nbsp;<span class="ident" id="4715789"><a href="/regexp/regexp.go.html#4715309">special</a></span><span class="op" id="4715796">(</span><span class="ident" id="4715797"><a href="/regexp/regexp.go.html#4715631">s</a></span><span class="op" id="4715798">[</span><span class="ident" id="4715799"><a href="/regexp/regexp.go.html#4715758">i</a></span><span class="op" id="4715800">]</span><span class="op" id="4715801">)</span>&nbsp;<span class="op" id="4715803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4715808"><a href="/regexp/regexp.go.html#4715651">b</a></span><span class="op" id="4715809">[</span><span class="ident" id="4715810"><a href="/regexp/regexp.go.html#4715746">j</a></span><span class="op" id="4715811">]</span>&nbsp;<span class="op" id="4715813">=</span>&nbsp;<span class="string" id="4715815">&#39;\\&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4715823"><a href="/regexp/regexp.go.html#4715746">j</a></span><span class="op" id="4715824">++</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4715829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4715833"><a href="/regexp/regexp.go.html#4715651">b</a></span><span class="op" id="4715834">[</span><span class="ident" id="4715835"><a href="/regexp/regexp.go.html#4715746">j</a></span><span class="op" id="4715836">]</span>&nbsp;<span class="op" id="4715838">=</span>&nbsp;<span class="ident" id="4715840"><a href="/regexp/regexp.go.html#4715631">s</a></span><span class="op" id="4715841">[</span><span class="ident" id="4715842"><a href="/regexp/regexp.go.html#4715758">i</a></span><span class="op" id="4715843">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4715847"><a href="/regexp/regexp.go.html#4715746">j</a></span><span class="op" id="4715848">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4715852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4715855">return</span>&nbsp;<span class="builtintype" id="4715862">string</span><span class="op" id="4715868">(</span><span class="ident" id="4715869"><a href="/regexp/regexp.go.html#4715651">b</a></span><span class="op" id="4715870">[</span><span class="num" id="4715871">0</span><span class="op" id="4715872">:</span><span class="ident" id="4715873"><a href="/regexp/regexp.go.html#4715746">j</a></span><span class="op" id="4715874">]</span><span class="op" id="4715875">)</span><br>
<span class="lineno">595</span><span class="op" id="4715877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4715880">//&nbsp;The&nbsp;number&nbsp;of&nbsp;capture&nbsp;values&nbsp;in&nbsp;the&nbsp;program&nbsp;may&nbsp;correspond</span><br>
<span class="lineno"></span><span class="comment" id="4715942">//&nbsp;to&nbsp;fewer&nbsp;capturing&nbsp;expressions&nbsp;than&nbsp;are&nbsp;in&nbsp;the&nbsp;regexp.</span><br>
<span class="lineno"></span><span class="comment" id="4716000">//&nbsp;For&nbsp;example,&nbsp;&#34;(a){0}&#34;&nbsp;turns&nbsp;into&nbsp;an&nbsp;empty&nbsp;program,&nbsp;so&nbsp;the</span><br>
<span class="lineno">600</span><span class="comment" id="4716061">//&nbsp;maximum&nbsp;capture&nbsp;in&nbsp;the&nbsp;program&nbsp;is&nbsp;0&nbsp;but&nbsp;we&nbsp;need&nbsp;to&nbsp;return</span><br>
<span class="lineno"></span><span class="comment" id="4716122">//&nbsp;an&nbsp;expression&nbsp;for&nbsp;\1.&nbsp;&nbsp;Pad&nbsp;appends&nbsp;-1s&nbsp;to&nbsp;the&nbsp;slice&nbsp;a&nbsp;as&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="4716190">func</span>&nbsp;<span class="op" id="4716195">(</span><span class="ident" id="4716196">re</span>&nbsp;<span class="op" id="4716199">*</span><span class="ident" id="4716200"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4716206">)</span>&nbsp;<span class="ident" id="4716208">pad</span><span class="op" id="4716211">(</span><span class="ident" id="4716212">a</span>&nbsp;<span class="op" id="4716214">[</span><span class="op" id="4716215">]</span><span class="builtintype" id="4716216">int</span><span class="op" id="4716219">)</span>&nbsp;<span class="op" id="4716221">[</span><span class="op" id="4716222">]</span><span class="builtintype" id="4716223">int</span>&nbsp;<span class="op" id="4716227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4716230">if</span>&nbsp;<span class="ident" id="4716233"><a href="/regexp/regexp.go.html#4716212">a</a></span>&nbsp;<span class="op" id="4716235">==</span>&nbsp;<span class="ident" id="4716238">nil</span>&nbsp;<span class="op" id="4716242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4716246">//&nbsp;No&nbsp;match.</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4716261">return</span>&nbsp;<span class="ident" id="4716268">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4716273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4716276">n</span>&nbsp;<span class="op" id="4716278">:=</span>&nbsp;<span class="op" id="4716281">(</span><span class="num" id="4716282">1</span>&nbsp;<span class="op" id="4716284">+</span>&nbsp;<span class="ident" id="4716286"><a href="/regexp/regexp.go.html#4716196">re</a></span><span class="op" id="4716288">.</span><span class="ident" id="4716289">numSubexp</span><span class="op" id="4716298">)</span>&nbsp;<span class="op" id="4716300">*</span>&nbsp;<span class="num" id="4716302">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4716305">for</span>&nbsp;<span class="builtinfunc" id="4716309">len</span><span class="op" id="4716312">(</span><span class="ident" id="4716313"><a href="/regexp/regexp.go.html#4716212">a</a></span><span class="op" id="4716314">)</span>&nbsp;<span class="op" id="4716316">&lt;</span>&nbsp;<span class="ident" id="4716318"><a href="/regexp/regexp.go.html#4716276">n</a></span>&nbsp;<span class="op" id="4716320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4716324"><a href="/regexp/regexp.go.html#4716212">a</a></span>&nbsp;<span class="op" id="4716326">=</span>&nbsp;<span class="builtinfunc" id="4716328">append</span><span class="op" id="4716334">(</span><span class="ident" id="4716335"><a href="/regexp/regexp.go.html#4716212">a</a></span><span class="op" id="4716336">,</span>&nbsp;<span class="op" id="4716338">-</span><span class="num" id="4716339">1</span><span class="op" id="4716340">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4716343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4716346">return</span>&nbsp;<span class="ident" id="4716353"><a href="/regexp/regexp.go.html#4716212">a</a></span><br>
<span class="lineno"></span><span class="op" id="4716355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4716358">//&nbsp;Find&nbsp;matches&nbsp;in&nbsp;slice&nbsp;b&nbsp;if&nbsp;b&nbsp;is&nbsp;non-nil,&nbsp;otherwise&nbsp;find&nbsp;matches&nbsp;in&nbsp;string&nbsp;s.</span><br>
<span class="lineno">615</span><span class="keyword" id="4716438">func</span>&nbsp;<span class="op" id="4716443">(</span><span class="ident" id="4716444">re</span>&nbsp;<span class="op" id="4716447">*</span><span class="ident" id="4716448"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4716454">)</span>&nbsp;<span class="ident" id="4716456">allMatches</span><span class="op" id="4716466">(</span><span class="ident" id="4716467">s</span>&nbsp;<span class="builtintype" id="4716469">string</span><span class="op" id="4716475">,</span>&nbsp;<span class="ident" id="4716477">b</span>&nbsp;<span class="op" id="4716479">[</span><span class="op" id="4716480">]</span><span class="builtintype" id="4716481">byte</span><span class="op" id="4716485">,</span>&nbsp;<span class="ident" id="4716487">n</span>&nbsp;<span class="builtintype" id="4716489">int</span><span class="op" id="4716492">,</span>&nbsp;<span class="ident" id="4716494">deliver</span>&nbsp;<span class="keyword" id="4716502">func</span><span class="op" id="4716506">(</span><span class="op" id="4716507">[</span><span class="op" id="4716508">]</span><span class="builtintype" id="4716509">int</span><span class="op" id="4716512">)</span><span class="op" id="4716513">)</span>&nbsp;<span class="op" id="4716515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4716518">var</span>&nbsp;<span class="ident" id="4716522">end</span>&nbsp;<span class="builtintype" id="4716526">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4716531">if</span>&nbsp;<span class="ident" id="4716534"><a href="/regexp/regexp.go.html#4716477">b</a></span>&nbsp;<span class="op" id="4716536">==</span>&nbsp;<span class="ident" id="4716539">nil</span>&nbsp;<span class="op" id="4716543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4716547"><a href="/regexp/regexp.go.html#4716522">end</a></span>&nbsp;<span class="op" id="4716551">=</span>&nbsp;<span class="builtinfunc" id="4716553">len</span><span class="op" id="4716556">(</span><span class="ident" id="4716557"><a href="/regexp/regexp.go.html#4716467">s</a></span><span class="op" id="4716558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4716561">}</span>&nbsp;<span class="keyword" id="4716563">else</span>&nbsp;<span class="op" id="4716568">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4716572"><a href="/regexp/regexp.go.html#4716522">end</a></span>&nbsp;<span class="op" id="4716576">=</span>&nbsp;<span class="builtinfunc" id="4716578">len</span><span class="op" id="4716581">(</span><span class="ident" id="4716582"><a href="/regexp/regexp.go.html#4716477">b</a></span><span class="op" id="4716583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4716586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4716590">for</span>&nbsp;<span class="ident" id="4716594">pos</span><span class="op" id="4716597">,</span>&nbsp;<span class="ident" id="4716599">i</span><span class="op" id="4716600">,</span>&nbsp;<span class="ident" id="4716602">prevMatchEnd</span>&nbsp;<span class="op" id="4716615">:=</span>&nbsp;<span class="num" id="4716618">0</span><span class="op" id="4716619">,</span>&nbsp;<span class="num" id="4716621">0</span><span class="op" id="4716622">,</span>&nbsp;<span class="op" id="4716624">-</span><span class="num" id="4716625">1</span><span class="op" id="4716626">;</span>&nbsp;<span class="ident" id="4716628"><a href="/regexp/regexp.go.html#4716599">i</a></span>&nbsp;<span class="op" id="4716630">&lt;</span>&nbsp;<span class="ident" id="4716632"><a href="/regexp/regexp.go.html#4716487">n</a></span>&nbsp;<span class="op" id="4716634">&amp;&amp;</span>&nbsp;<span class="ident" id="4716637"><a href="/regexp/regexp.go.html#4716594">pos</a></span>&nbsp;<span class="op" id="4716641">&lt;=</span>&nbsp;<span class="ident" id="4716644"><a href="/regexp/regexp.go.html#4716522">end</a></span><span class="op" id="4716647">;</span>&nbsp;<span class="op" id="4716649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4716653">matches</span>&nbsp;<span class="op" id="4716661">:=</span>&nbsp;<span class="ident" id="4716664"><a href="/regexp/regexp.go.html#4716444">re</a></span><span class="op" id="4716666">.</span><span class="ident" id="4716667">doExecute</span><span class="op" id="4716676">(</span><span class="ident" id="4716677">nil</span><span class="op" id="4716680">,</span>&nbsp;<span class="ident" id="4716682"><a href="/regexp/regexp.go.html#4716477">b</a></span><span class="op" id="4716683">,</span>&nbsp;<span class="ident" id="4716685"><a href="/regexp/regexp.go.html#4716467">s</a></span><span class="op" id="4716686">,</span>&nbsp;<span class="ident" id="4716688"><a href="/regexp/regexp.go.html#4716594">pos</a></span><span class="op" id="4716691">,</span>&nbsp;<span class="ident" id="4716693"><a href="/regexp/regexp.go.html#4716444">re</a></span><span class="op" id="4716695">.</span><span class="ident" id="4716696">prog</span><span class="op" id="4716700">.</span><span class="ident" id="4716701">NumCap</span><span class="op" id="4716707">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4716711">if</span>&nbsp;<span class="builtinfunc" id="4716714">len</span><span class="op" id="4716717">(</span><span class="ident" id="4716718"><a href="/regexp/regexp.go.html#4716653">matches</a></span><span class="op" id="4716725">)</span>&nbsp;<span class="op" id="4716727">==</span>&nbsp;<span class="num" id="4716730">0</span>&nbsp;<span class="op" id="4716732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4716737">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4716745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4716750">accept</span>&nbsp;<span class="op" id="4716757">:=</span>&nbsp;<span class="ident" id="4716760">true</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4716767">if</span>&nbsp;<span class="ident" id="4716770"><a href="/regexp/regexp.go.html#4716653">matches</a></span><span class="op" id="4716777">[</span><span class="num" id="4716778">1</span><span class="op" id="4716779">]</span>&nbsp;<span class="op" id="4716781">==</span>&nbsp;<span class="ident" id="4716784"><a href="/regexp/regexp.go.html#4716594">pos</a></span>&nbsp;<span class="op" id="4716788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4716793">//&nbsp;We&#39;ve&nbsp;found&nbsp;an&nbsp;empty&nbsp;match.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4716827">if</span>&nbsp;<span class="ident" id="4716830"><a href="/regexp/regexp.go.html#4716653">matches</a></span><span class="op" id="4716837">[</span><span class="num" id="4716838">0</span><span class="op" id="4716839">]</span>&nbsp;<span class="op" id="4716841">==</span>&nbsp;<span class="ident" id="4716844"><a href="/regexp/regexp.go.html#4716602">prevMatchEnd</a></span>&nbsp;<span class="op" id="4716857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4716863">//&nbsp;We&nbsp;don&#39;t&nbsp;allow&nbsp;an&nbsp;empty&nbsp;match&nbsp;right</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4716906">//&nbsp;after&nbsp;a&nbsp;previous&nbsp;match,&nbsp;so&nbsp;ignore&nbsp;it.</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4716951"><a href="/regexp/regexp.go.html#4716750">accept</a></span>&nbsp;<span class="op" id="4716958">=</span>&nbsp;<span class="ident" id="4716960">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4716969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4716974">var</span>&nbsp;<span class="ident" id="4716978">width</span>&nbsp;<span class="builtintype" id="4716984">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4716991">//&nbsp;TODO:&nbsp;use&nbsp;step()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4717014">if</span>&nbsp;<span class="ident" id="4717017"><a href="/regexp/regexp.go.html#4716477">b</a></span>&nbsp;<span class="op" id="4717019">==</span>&nbsp;<span class="ident" id="4717022">nil</span>&nbsp;<span class="op" id="4717026">{</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4717032">_</span><span class="op" id="4717033">,</span>&nbsp;<span class="ident" id="4717035"><a href="/regexp/regexp.go.html#4716978">width</a></span>&nbsp;<span class="op" id="4717041">=</span>&nbsp;<span class="ident" id="4717043"><a href="/regexp/regexp.go.html#4700114">utf8</a></span><span class="op" id="4717047">.</span><span class="ident" id="4717048">DecodeRuneInString</span><span class="op" id="4717066">(</span><span class="ident" id="4717067"><a href="/regexp/regexp.go.html#4716467">s</a></span><span class="op" id="4717068">[</span><span class="ident" id="4717069"><a href="/regexp/regexp.go.html#4716594">pos</a></span><span class="op" id="4717072">:</span><span class="ident" id="4717073"><a href="/regexp/regexp.go.html#4716522">end</a></span><span class="op" id="4717076">]</span><span class="op" id="4717077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4717082">}</span>&nbsp;<span class="keyword" id="4717084">else</span>&nbsp;<span class="op" id="4717089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4717095">_</span><span class="op" id="4717096">,</span>&nbsp;<span class="ident" id="4717098"><a href="/regexp/regexp.go.html#4716978">width</a></span>&nbsp;<span class="op" id="4717104">=</span>&nbsp;<span class="ident" id="4717106"><a href="/regexp/regexp.go.html#4700114">utf8</a></span><span class="op" id="4717110">.</span><span class="ident" id="4717111">DecodeRune</span><span class="op" id="4717121">(</span><span class="ident" id="4717122"><a href="/regexp/regexp.go.html#4716477">b</a></span><span class="op" id="4717123">[</span><span class="ident" id="4717124"><a href="/regexp/regexp.go.html#4716594">pos</a></span><span class="op" id="4717127">:</span><span class="ident" id="4717128"><a href="/regexp/regexp.go.html#4716522">end</a></span><span class="op" id="4717131">]</span><span class="op" id="4717132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4717137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4717142">if</span>&nbsp;<span class="ident" id="4717145"><a href="/regexp/regexp.go.html#4716978">width</a></span>&nbsp;<span class="op" id="4717151">&gt;</span>&nbsp;<span class="num" id="4717153">0</span>&nbsp;<span class="op" id="4717155">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4717161"><a href="/regexp/regexp.go.html#4716594">pos</a></span>&nbsp;<span class="op" id="4717165">+=</span>&nbsp;<span class="ident" id="4717168"><a href="/regexp/regexp.go.html#4716978">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4717177">}</span>&nbsp;<span class="keyword" id="4717179">else</span>&nbsp;<span class="op" id="4717184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4717190"><a href="/regexp/regexp.go.html#4716594">pos</a></span>&nbsp;<span class="op" id="4717194">=</span>&nbsp;<span class="ident" id="4717196"><a href="/regexp/regexp.go.html#4716522">end</a></span>&nbsp;<span class="op" id="4717200">+</span>&nbsp;<span class="num" id="4717202">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4717207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4717211">}</span>&nbsp;<span class="keyword" id="4717213">else</span>&nbsp;<span class="op" id="4717218">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4717223"><a href="/regexp/regexp.go.html#4716594">pos</a></span>&nbsp;<span class="op" id="4717227">=</span>&nbsp;<span class="ident" id="4717229"><a href="/regexp/regexp.go.html#4716653">matches</a></span><span class="op" id="4717236">[</span><span class="num" id="4717237">1</span><span class="op" id="4717238">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4717242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4717246"><a href="/regexp/regexp.go.html#4716602">prevMatchEnd</a></span>&nbsp;<span class="op" id="4717259">=</span>&nbsp;<span class="ident" id="4717261"><a href="/regexp/regexp.go.html#4716653">matches</a></span><span class="op" id="4717268">[</span><span class="num" id="4717269">1</span><span class="op" id="4717270">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4717275">if</span>&nbsp;<span class="ident" id="4717278"><a href="/regexp/regexp.go.html#4716750">accept</a></span>&nbsp;<span class="op" id="4717285">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4717290"><a href="/regexp/regexp.go.html#4716494">deliver</a></span><span class="op" id="4717297">(</span><span class="ident" id="4717298"><a href="/regexp/regexp.go.html#4716444">re</a></span><span class="op" id="4717300">.</span><span class="ident" id="4717301">pad</span><span class="op" id="4717304">(</span><span class="ident" id="4717305"><a href="/regexp/regexp.go.html#4716653">matches</a></span><span class="op" id="4717312">)</span><span class="op" id="4717313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4717318"><a href="/regexp/regexp.go.html#4716599">i</a></span><span class="op" id="4717319">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4717324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4717327">}</span><br>
<span class="lineno"></span><span class="op" id="4717329">}</span><br>
<span class="lineno">660</span><br>
<span class="lineno"></span><span class="comment" id="4717332">//&nbsp;Find&nbsp;returns&nbsp;a&nbsp;slice&nbsp;holding&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;in&nbsp;b&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression.</span><br>
<span class="lineno"></span><span class="comment" id="4717427">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="4717472">func</span>&nbsp;<span class="op" id="4717477">(</span><span class="ident" id="4717478">re</span>&nbsp;<span class="op" id="4717481">*</span><span class="ident" id="4717482"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4717488">)</span>&nbsp;<span class="ident" id="4717490">Find</span><span class="op" id="4717494">(</span><span class="ident" id="4717495">b</span>&nbsp;<span class="op" id="4717497">[</span><span class="op" id="4717498">]</span><span class="builtintype" id="4717499">byte</span><span class="op" id="4717503">)</span>&nbsp;<span class="op" id="4717505">[</span><span class="op" id="4717506">]</span><span class="builtintype" id="4717507">byte</span>&nbsp;<span class="op" id="4717512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4717515">a</span>&nbsp;<span class="op" id="4717517">:=</span>&nbsp;<span class="ident" id="4717520"><a href="/regexp/regexp.go.html#4717478">re</a></span><span class="op" id="4717522">.</span><span class="ident" id="4717523">doExecute</span><span class="op" id="4717532">(</span><span class="ident" id="4717533">nil</span><span class="op" id="4717536">,</span>&nbsp;<span class="ident" id="4717538"><a href="/regexp/regexp.go.html#4717495">b</a></span><span class="op" id="4717539">,</span>&nbsp;<span class="string" id="4717541">&#34;&#34;</span><span class="op" id="4717543">,</span>&nbsp;<span class="num" id="4717545">0</span><span class="op" id="4717546">,</span>&nbsp;<span class="num" id="4717548">2</span><span class="op" id="4717549">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4717552">if</span>&nbsp;<span class="ident" id="4717555"><a href="/regexp/regexp.go.html#4717515">a</a></span>&nbsp;<span class="op" id="4717557">==</span>&nbsp;<span class="ident" id="4717560">nil</span>&nbsp;<span class="op" id="4717564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4717568">return</span>&nbsp;<span class="ident" id="4717575">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4717580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4717583">return</span>&nbsp;<span class="ident" id="4717590"><a href="/regexp/regexp.go.html#4717495">b</a></span><span class="op" id="4717591">[</span><span class="ident" id="4717592"><a href="/regexp/regexp.go.html#4717515">a</a></span><span class="op" id="4717593">[</span><span class="num" id="4717594">0</span><span class="op" id="4717595">]</span><span class="op" id="4717596">:</span><span class="ident" id="4717597"><a href="/regexp/regexp.go.html#4717515">a</a></span><span class="op" id="4717598">[</span><span class="num" id="4717599">1</span><span class="op" id="4717600">]</span><span class="op" id="4717601">]</span><br>
<span class="lineno"></span><span class="op" id="4717603">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="4717606">//&nbsp;FindIndex&nbsp;returns&nbsp;a&nbsp;two-element&nbsp;slice&nbsp;of&nbsp;integers&nbsp;defining&nbsp;the&nbsp;location&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4717684">//&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;in&nbsp;b&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression.&nbsp;&nbsp;The&nbsp;match&nbsp;itself&nbsp;is&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="4717762">//&nbsp;b[loc[0]:loc[1]].</span><br>
<span class="lineno"></span><span class="comment" id="4717783">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno">675</span><span class="keyword" id="4717828">func</span>&nbsp;<span class="op" id="4717833">(</span><span class="ident" id="4717834">re</span>&nbsp;<span class="op" id="4717837">*</span><span class="ident" id="4717838"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4717844">)</span>&nbsp;<span class="ident" id="4717846">FindIndex</span><span class="op" id="4717855">(</span><span class="ident" id="4717856">b</span>&nbsp;<span class="op" id="4717858">[</span><span class="op" id="4717859">]</span><span class="builtintype" id="4717860">byte</span><span class="op" id="4717864">)</span>&nbsp;<span class="op" id="4717866">(</span><span class="ident" id="4717867">loc</span>&nbsp;<span class="op" id="4717871">[</span><span class="op" id="4717872">]</span><span class="builtintype" id="4717873">int</span><span class="op" id="4717876">)</span>&nbsp;<span class="op" id="4717878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4717881">a</span>&nbsp;<span class="op" id="4717883">:=</span>&nbsp;<span class="ident" id="4717886"><a href="/regexp/regexp.go.html#4717834">re</a></span><span class="op" id="4717888">.</span><span class="ident" id="4717889">doExecute</span><span class="op" id="4717898">(</span><span class="ident" id="4717899">nil</span><span class="op" id="4717902">,</span>&nbsp;<span class="ident" id="4717904"><a href="/regexp/regexp.go.html#4717856">b</a></span><span class="op" id="4717905">,</span>&nbsp;<span class="string" id="4717907">&#34;&#34;</span><span class="op" id="4717909">,</span>&nbsp;<span class="num" id="4717911">0</span><span class="op" id="4717912">,</span>&nbsp;<span class="num" id="4717914">2</span><span class="op" id="4717915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4717918">if</span>&nbsp;<span class="ident" id="4717921"><a href="/regexp/regexp.go.html#4717881">a</a></span>&nbsp;<span class="op" id="4717923">==</span>&nbsp;<span class="ident" id="4717926">nil</span>&nbsp;<span class="op" id="4717930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4717934">return</span>&nbsp;<span class="ident" id="4717941">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4717946">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4717949">return</span>&nbsp;<span class="ident" id="4717956"><a href="/regexp/regexp.go.html#4717881">a</a></span><span class="op" id="4717957">[</span><span class="num" id="4717958">0</span><span class="op" id="4717959">:</span><span class="num" id="4717960">2</span><span class="op" id="4717961">]</span><br>
<span class="lineno"></span><span class="op" id="4717963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4717966">//&nbsp;FindString&nbsp;returns&nbsp;a&nbsp;string&nbsp;holding&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;in&nbsp;s&nbsp;of&nbsp;the&nbsp;regular</span><br>
<span class="lineno"></span><span class="comment" id="4718056">//&nbsp;expression.&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;match,&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;an&nbsp;empty&nbsp;string,</span><br>
<span class="lineno">685</span><span class="comment" id="4718131">//&nbsp;but&nbsp;it&nbsp;will&nbsp;also&nbsp;be&nbsp;empty&nbsp;if&nbsp;the&nbsp;regular&nbsp;expression&nbsp;successfully&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="4718207">//&nbsp;an&nbsp;empty&nbsp;string.&nbsp;&nbsp;Use&nbsp;FindStringIndex&nbsp;or&nbsp;FindStringSubmatch&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="4718279">//&nbsp;necessary&nbsp;to&nbsp;distinguish&nbsp;these&nbsp;cases.</span><br>
<span class="lineno"></span><span class="keyword" id="4718320">func</span>&nbsp;<span class="op" id="4718325">(</span><span class="ident" id="4718326">re</span>&nbsp;<span class="op" id="4718329">*</span><span class="ident" id="4718330"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4718336">)</span>&nbsp;<span class="ident" id="4718338">FindString</span><span class="op" id="4718348">(</span><span class="ident" id="4718349">s</span>&nbsp;<span class="builtintype" id="4718351">string</span><span class="op" id="4718357">)</span>&nbsp;<span class="builtintype" id="4718359">string</span>&nbsp;<span class="op" id="4718366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4718369">a</span>&nbsp;<span class="op" id="4718371">:=</span>&nbsp;<span class="ident" id="4718374"><a href="/regexp/regexp.go.html#4718326">re</a></span><span class="op" id="4718376">.</span><span class="ident" id="4718377">doExecute</span><span class="op" id="4718386">(</span><span class="ident" id="4718387">nil</span><span class="op" id="4718390">,</span>&nbsp;<span class="ident" id="4718392">nil</span><span class="op" id="4718395">,</span>&nbsp;<span class="ident" id="4718397"><a href="/regexp/regexp.go.html#4718349">s</a></span><span class="op" id="4718398">,</span>&nbsp;<span class="num" id="4718400">0</span><span class="op" id="4718401">,</span>&nbsp;<span class="num" id="4718403">2</span><span class="op" id="4718404">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4718407">if</span>&nbsp;<span class="ident" id="4718410"><a href="/regexp/regexp.go.html#4718369">a</a></span>&nbsp;<span class="op" id="4718412">==</span>&nbsp;<span class="ident" id="4718415">nil</span>&nbsp;<span class="op" id="4718419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4718423">return</span>&nbsp;<span class="string" id="4718430">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4718434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4718437">return</span>&nbsp;<span class="ident" id="4718444"><a href="/regexp/regexp.go.html#4718349">s</a></span><span class="op" id="4718445">[</span><span class="ident" id="4718446"><a href="/regexp/regexp.go.html#4718369">a</a></span><span class="op" id="4718447">[</span><span class="num" id="4718448">0</span><span class="op" id="4718449">]</span><span class="op" id="4718450">:</span><span class="ident" id="4718451"><a href="/regexp/regexp.go.html#4718369">a</a></span><span class="op" id="4718452">[</span><span class="num" id="4718453">1</span><span class="op" id="4718454">]</span><span class="op" id="4718455">]</span><br>
<span class="lineno"></span><span class="op" id="4718457">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="comment" id="4718460">//&nbsp;FindStringIndex&nbsp;returns&nbsp;a&nbsp;two-element&nbsp;slice&nbsp;of&nbsp;integers&nbsp;defining&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4718532">//&nbsp;location&nbsp;of&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;in&nbsp;s&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression.&nbsp;&nbsp;The&nbsp;match</span><br>
<span class="lineno"></span><span class="comment" id="4718609">//&nbsp;itself&nbsp;is&nbsp;at&nbsp;s[loc[0]:loc[1]].</span><br>
<span class="lineno"></span><span class="comment" id="4718643">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno">700</span><span class="keyword" id="4718688">func</span>&nbsp;<span class="op" id="4718693">(</span><span class="ident" id="4718694">re</span>&nbsp;<span class="op" id="4718697">*</span><span class="ident" id="4718698"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4718704">)</span>&nbsp;<span class="ident" id="4718706">FindStringIndex</span><span class="op" id="4718721">(</span><span class="ident" id="4718722">s</span>&nbsp;<span class="builtintype" id="4718724">string</span><span class="op" id="4718730">)</span>&nbsp;<span class="op" id="4718732">(</span><span class="ident" id="4718733">loc</span>&nbsp;<span class="op" id="4718737">[</span><span class="op" id="4718738">]</span><span class="builtintype" id="4718739">int</span><span class="op" id="4718742">)</span>&nbsp;<span class="op" id="4718744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4718747">a</span>&nbsp;<span class="op" id="4718749">:=</span>&nbsp;<span class="ident" id="4718752"><a href="/regexp/regexp.go.html#4718694">re</a></span><span class="op" id="4718754">.</span><span class="ident" id="4718755">doExecute</span><span class="op" id="4718764">(</span><span class="ident" id="4718765">nil</span><span class="op" id="4718768">,</span>&nbsp;<span class="ident" id="4718770">nil</span><span class="op" id="4718773">,</span>&nbsp;<span class="ident" id="4718775"><a href="/regexp/regexp.go.html#4718722">s</a></span><span class="op" id="4718776">,</span>&nbsp;<span class="num" id="4718778">0</span><span class="op" id="4718779">,</span>&nbsp;<span class="num" id="4718781">2</span><span class="op" id="4718782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4718785">if</span>&nbsp;<span class="ident" id="4718788"><a href="/regexp/regexp.go.html#4718747">a</a></span>&nbsp;<span class="op" id="4718790">==</span>&nbsp;<span class="ident" id="4718793">nil</span>&nbsp;<span class="op" id="4718797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4718801">return</span>&nbsp;<span class="ident" id="4718808">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4718813">}</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4718816">return</span>&nbsp;<span class="ident" id="4718823"><a href="/regexp/regexp.go.html#4718747">a</a></span><span class="op" id="4718824">[</span><span class="num" id="4718825">0</span><span class="op" id="4718826">:</span><span class="num" id="4718827">2</span><span class="op" id="4718828">]</span><br>
<span class="lineno"></span><span class="op" id="4718830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4718833">//&nbsp;FindReaderIndex&nbsp;returns&nbsp;a&nbsp;two-element&nbsp;slice&nbsp;of&nbsp;integers&nbsp;defining&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4718905">//&nbsp;location&nbsp;of&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;in&nbsp;text&nbsp;read&nbsp;from</span><br>
<span class="lineno">710</span><span class="comment" id="4718983">//&nbsp;the&nbsp;RuneReader.&nbsp;&nbsp;The&nbsp;match&nbsp;text&nbsp;was&nbsp;found&nbsp;in&nbsp;the&nbsp;input&nbsp;stream&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="4719051">//&nbsp;byte&nbsp;offset&nbsp;loc[0]&nbsp;through&nbsp;loc[1]-1.</span><br>
<span class="lineno"></span><span class="comment" id="4719091">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="4719136">func</span>&nbsp;<span class="op" id="4719141">(</span><span class="ident" id="4719142">re</span>&nbsp;<span class="op" id="4719145">*</span><span class="ident" id="4719146"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4719152">)</span>&nbsp;<span class="ident" id="4719154">FindReaderIndex</span><span class="op" id="4719169">(</span><span class="ident" id="4719170">r</span>&nbsp;<span class="ident" id="4719172"><a href="/regexp/regexp.go.html#4700050">io</a></span><span class="op" id="4719174">.</span><span class="ident" id="4719175">RuneReader</span><span class="op" id="4719185">)</span>&nbsp;<span class="op" id="4719187">(</span><span class="ident" id="4719188">loc</span>&nbsp;<span class="op" id="4719192">[</span><span class="op" id="4719193">]</span><span class="builtintype" id="4719194">int</span><span class="op" id="4719197">)</span>&nbsp;<span class="op" id="4719199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4719202">a</span>&nbsp;<span class="op" id="4719204">:=</span>&nbsp;<span class="ident" id="4719207"><a href="/regexp/regexp.go.html#4719142">re</a></span><span class="op" id="4719209">.</span><span class="ident" id="4719210">doExecute</span><span class="op" id="4719219">(</span><span class="ident" id="4719220"><a href="/regexp/regexp.go.html#4719170">r</a></span><span class="op" id="4719221">,</span>&nbsp;<span class="ident" id="4719223">nil</span><span class="op" id="4719226">,</span>&nbsp;<span class="string" id="4719228">&#34;&#34;</span><span class="op" id="4719230">,</span>&nbsp;<span class="num" id="4719232">0</span><span class="op" id="4719233">,</span>&nbsp;<span class="num" id="4719235">2</span><span class="op" id="4719236">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4719239">if</span>&nbsp;<span class="ident" id="4719242"><a href="/regexp/regexp.go.html#4719202">a</a></span>&nbsp;<span class="op" id="4719244">==</span>&nbsp;<span class="ident" id="4719247">nil</span>&nbsp;<span class="op" id="4719251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4719255">return</span>&nbsp;<span class="ident" id="4719262">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4719267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4719270">return</span>&nbsp;<span class="ident" id="4719277"><a href="/regexp/regexp.go.html#4719202">a</a></span><span class="op" id="4719278">[</span><span class="num" id="4719279">0</span><span class="op" id="4719280">:</span><span class="num" id="4719281">2</span><span class="op" id="4719282">]</span><br>
<span class="lineno"></span><span class="op" id="4719284">}</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span><span class="comment" id="4719287">//&nbsp;FindSubmatch&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;slices&nbsp;holding&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;leftmost</span><br>
<span class="lineno"></span><span class="comment" id="4719362">//&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;in&nbsp;b&nbsp;and&nbsp;the&nbsp;matches,&nbsp;if&nbsp;any,&nbsp;of&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="4719434">//&nbsp;subexpressions,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;Submatch&#39;&nbsp;descriptions&nbsp;in&nbsp;the&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="4719510">//&nbsp;comment.</span><br>
<span class="lineno">725</span><span class="comment" id="4719522">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="4719567">func</span>&nbsp;<span class="op" id="4719572">(</span><span class="ident" id="4719573">re</span>&nbsp;<span class="op" id="4719576">*</span><span class="ident" id="4719577"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4719583">)</span>&nbsp;<span class="ident" id="4719585">FindSubmatch</span><span class="op" id="4719597">(</span><span class="ident" id="4719598">b</span>&nbsp;<span class="op" id="4719600">[</span><span class="op" id="4719601">]</span><span class="builtintype" id="4719602">byte</span><span class="op" id="4719606">)</span>&nbsp;<span class="op" id="4719608">[</span><span class="op" id="4719609">]</span><span class="op" id="4719610">[</span><span class="op" id="4719611">]</span><span class="builtintype" id="4719612">byte</span>&nbsp;<span class="op" id="4719617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4719620">a</span>&nbsp;<span class="op" id="4719622">:=</span>&nbsp;<span class="ident" id="4719625"><a href="/regexp/regexp.go.html#4719573">re</a></span><span class="op" id="4719627">.</span><span class="ident" id="4719628">doExecute</span><span class="op" id="4719637">(</span><span class="ident" id="4719638">nil</span><span class="op" id="4719641">,</span>&nbsp;<span class="ident" id="4719643"><a href="/regexp/regexp.go.html#4719598">b</a></span><span class="op" id="4719644">,</span>&nbsp;<span class="string" id="4719646">&#34;&#34;</span><span class="op" id="4719648">,</span>&nbsp;<span class="num" id="4719650">0</span><span class="op" id="4719651">,</span>&nbsp;<span class="ident" id="4719653"><a href="/regexp/regexp.go.html#4719573">re</a></span><span class="op" id="4719655">.</span><span class="ident" id="4719656">prog</span><span class="op" id="4719660">.</span><span class="ident" id="4719661">NumCap</span><span class="op" id="4719667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4719670">if</span>&nbsp;<span class="ident" id="4719673"><a href="/regexp/regexp.go.html#4719620">a</a></span>&nbsp;<span class="op" id="4719675">==</span>&nbsp;<span class="ident" id="4719678">nil</span>&nbsp;<span class="op" id="4719682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4719686">return</span>&nbsp;<span class="ident" id="4719693">nil</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4719698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4719701">ret</span>&nbsp;<span class="op" id="4719705">:=</span>&nbsp;<span class="builtinfunc" id="4719708">make</span><span class="op" id="4719712">(</span><span class="op" id="4719713">[</span><span class="op" id="4719714">]</span><span class="op" id="4719715">[</span><span class="op" id="4719716">]</span><span class="builtintype" id="4719717">byte</span><span class="op" id="4719721">,</span>&nbsp;<span class="num" id="4719723">1</span><span class="op" id="4719724">+</span><span class="ident" id="4719725"><a href="/regexp/regexp.go.html#4719573">re</a></span><span class="op" id="4719727">.</span><span class="ident" id="4719728">numSubexp</span><span class="op" id="4719737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4719740">for</span>&nbsp;<span class="ident" id="4719744">i</span>&nbsp;<span class="op" id="4719746">:=</span>&nbsp;<span class="keyword" id="4719749">range</span>&nbsp;<span class="ident" id="4719755"><a href="/regexp/regexp.go.html#4719701">ret</a></span>&nbsp;<span class="op" id="4719759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4719763">if</span>&nbsp;<span class="num" id="4719766">2</span><span class="op" id="4719767">*</span><span class="ident" id="4719768"><a href="/regexp/regexp.go.html#4719744">i</a></span>&nbsp;<span class="op" id="4719770">&lt;</span>&nbsp;<span class="builtinfunc" id="4719772">len</span><span class="op" id="4719775">(</span><span class="ident" id="4719776"><a href="/regexp/regexp.go.html#4719620">a</a></span><span class="op" id="4719777">)</span>&nbsp;<span class="op" id="4719779">&amp;&amp;</span>&nbsp;<span class="ident" id="4719782"><a href="/regexp/regexp.go.html#4719620">a</a></span><span class="op" id="4719783">[</span><span class="num" id="4719784">2</span><span class="op" id="4719785">*</span><span class="ident" id="4719786"><a href="/regexp/regexp.go.html#4719744">i</a></span><span class="op" id="4719787">]</span>&nbsp;<span class="op" id="4719789">&gt;=</span>&nbsp;<span class="num" id="4719792">0</span>&nbsp;<span class="op" id="4719794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4719799"><a href="/regexp/regexp.go.html#4719701">ret</a></span><span class="op" id="4719802">[</span><span class="ident" id="4719803"><a href="/regexp/regexp.go.html#4719744">i</a></span><span class="op" id="4719804">]</span>&nbsp;<span class="op" id="4719806">=</span>&nbsp;<span class="ident" id="4719808"><a href="/regexp/regexp.go.html#4719598">b</a></span><span class="op" id="4719809">[</span><span class="ident" id="4719810"><a href="/regexp/regexp.go.html#4719620">a</a></span><span class="op" id="4719811">[</span><span class="num" id="4719812">2</span><span class="op" id="4719813">*</span><span class="ident" id="4719814"><a href="/regexp/regexp.go.html#4719744">i</a></span><span class="op" id="4719815">]</span><span class="op" id="4719816">:</span><span class="ident" id="4719817"><a href="/regexp/regexp.go.html#4719620">a</a></span><span class="op" id="4719818">[</span><span class="num" id="4719819">2</span><span class="op" id="4719820">*</span><span class="ident" id="4719821"><a href="/regexp/regexp.go.html#4719744">i</a></span><span class="op" id="4719822">+</span><span class="num" id="4719823">1</span><span class="op" id="4719824">]</span><span class="op" id="4719825">]</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4719829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4719832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4719835">return</span>&nbsp;<span class="ident" id="4719842"><a href="/regexp/regexp.go.html#4719701">ret</a></span><br>
<span class="lineno"></span><span class="op" id="4719846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="comment" id="4719849">//&nbsp;Expand&nbsp;appends&nbsp;template&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;result;&nbsp;during&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4719918">//&nbsp;append,&nbsp;Expand&nbsp;replaces&nbsp;variables&nbsp;in&nbsp;the&nbsp;template&nbsp;with&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="4719990">//&nbsp;matches&nbsp;drawn&nbsp;from&nbsp;src.&nbsp;&nbsp;The&nbsp;match&nbsp;slice&nbsp;should&nbsp;have&nbsp;been&nbsp;returned&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="4720063">//&nbsp;FindSubmatchIndex.</span><br>
<span class="lineno"></span><span class="comment" id="4720085">//</span><br>
<span class="lineno">745</span><span class="comment" id="4720088">//&nbsp;In&nbsp;the&nbsp;template,&nbsp;a&nbsp;variable&nbsp;is&nbsp;denoted&nbsp;by&nbsp;a&nbsp;substring&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="4720157">//&nbsp;$name&nbsp;or&nbsp;${name},&nbsp;where&nbsp;name&nbsp;is&nbsp;a&nbsp;non-empty&nbsp;sequence&nbsp;of&nbsp;letters,</span><br>
<span class="lineno"></span><span class="comment" id="4720225">//&nbsp;digits,&nbsp;and&nbsp;underscores.&nbsp;&nbsp;A&nbsp;purely&nbsp;numeric&nbsp;name&nbsp;like&nbsp;$1&nbsp;refers&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4720294">//&nbsp;the&nbsp;submatch&nbsp;with&nbsp;the&nbsp;corresponding&nbsp;index;&nbsp;other&nbsp;names&nbsp;refer&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4720361">//&nbsp;capturing&nbsp;parentheses&nbsp;named&nbsp;with&nbsp;the&nbsp;(?P&lt;name&gt;...)&nbsp;syntax.&nbsp;&nbsp;A</span><br>
<span class="lineno">750</span><span class="comment" id="4720426">//&nbsp;reference&nbsp;to&nbsp;an&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;unmatched&nbsp;index&nbsp;or&nbsp;a&nbsp;name&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="4720499">//&nbsp;present&nbsp;in&nbsp;the&nbsp;regular&nbsp;expression&nbsp;is&nbsp;replaced&nbsp;with&nbsp;an&nbsp;empty&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="4720569">//</span><br>
<span class="lineno"></span><span class="comment" id="4720572">//&nbsp;In&nbsp;the&nbsp;$name&nbsp;form,&nbsp;name&nbsp;is&nbsp;taken&nbsp;to&nbsp;be&nbsp;as&nbsp;long&nbsp;as&nbsp;possible:&nbsp;$1x&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="4720642">//&nbsp;equivalent&nbsp;to&nbsp;${1x},&nbsp;not&nbsp;${1}x,&nbsp;and,&nbsp;$10&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;${10},&nbsp;not&nbsp;${1}0.</span><br>
<span class="lineno">755</span><span class="comment" id="4720721">//</span><br>
<span class="lineno"></span><span class="comment" id="4720724">//&nbsp;To&nbsp;insert&nbsp;a&nbsp;literal&nbsp;$&nbsp;in&nbsp;the&nbsp;output,&nbsp;use&nbsp;$$&nbsp;in&nbsp;the&nbsp;template.</span><br>
<span class="lineno"></span><span class="keyword" id="4720788">func</span>&nbsp;<span class="op" id="4720793">(</span><span class="ident" id="4720794">re</span>&nbsp;<span class="op" id="4720797">*</span><span class="ident" id="4720798"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4720804">)</span>&nbsp;<span class="ident" id="4720806">Expand</span><span class="op" id="4720812">(</span><span class="ident" id="4720813">dst</span>&nbsp;<span class="op" id="4720817">[</span><span class="op" id="4720818">]</span><span class="builtintype" id="4720819">byte</span><span class="op" id="4720823">,</span>&nbsp;<span class="ident" id="4720825">template</span>&nbsp;<span class="op" id="4720834">[</span><span class="op" id="4720835">]</span><span class="builtintype" id="4720836">byte</span><span class="op" id="4720840">,</span>&nbsp;<span class="ident" id="4720842">src</span>&nbsp;<span class="op" id="4720846">[</span><span class="op" id="4720847">]</span><span class="builtintype" id="4720848">byte</span><span class="op" id="4720852">,</span>&nbsp;<span class="ident" id="4720854">match</span>&nbsp;<span class="op" id="4720860">[</span><span class="op" id="4720861">]</span><span class="builtintype" id="4720862">int</span><span class="op" id="4720865">)</span>&nbsp;<span class="op" id="4720867">[</span><span class="op" id="4720868">]</span><span class="builtintype" id="4720869">byte</span>&nbsp;<span class="op" id="4720874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4720877">return</span>&nbsp;<span class="ident" id="4720884"><a href="/regexp/regexp.go.html#4720794">re</a></span><span class="op" id="4720886">.</span><span class="ident" id="4720887">expand</span><span class="op" id="4720893">(</span><span class="ident" id="4720894"><a href="/regexp/regexp.go.html#4720813">dst</a></span><span class="op" id="4720897">,</span>&nbsp;<span class="builtintype" id="4720899">string</span><span class="op" id="4720905">(</span><span class="ident" id="4720906"><a href="/regexp/regexp.go.html#4720825">template</a></span><span class="op" id="4720914">)</span><span class="op" id="4720915">,</span>&nbsp;<span class="ident" id="4720917"><a href="/regexp/regexp.go.html#4720842">src</a></span><span class="op" id="4720920">,</span>&nbsp;<span class="string" id="4720922">&#34;&#34;</span><span class="op" id="4720924">,</span>&nbsp;<span class="ident" id="4720926"><a href="/regexp/regexp.go.html#4720854">match</a></span><span class="op" id="4720931">)</span><br>
<span class="lineno"></span><span class="op" id="4720933">}</span><br>
<span class="lineno">760</span><br>
<span class="lineno"></span><span class="comment" id="4720936">//&nbsp;ExpandString&nbsp;is&nbsp;like&nbsp;Expand&nbsp;but&nbsp;the&nbsp;template&nbsp;and&nbsp;source&nbsp;are&nbsp;strings.</span><br>
<span class="lineno"></span><span class="comment" id="4721008">//&nbsp;It&nbsp;appends&nbsp;to&nbsp;and&nbsp;returns&nbsp;a&nbsp;byte&nbsp;slice&nbsp;in&nbsp;order&nbsp;to&nbsp;give&nbsp;the&nbsp;calling</span><br>
<span class="lineno"></span><span class="comment" id="4721079">//&nbsp;code&nbsp;control&nbsp;over&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="keyword" id="4721112">func</span>&nbsp;<span class="op" id="4721117">(</span><span class="ident" id="4721118">re</span>&nbsp;<span class="op" id="4721121">*</span><span class="ident" id="4721122"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4721128">)</span>&nbsp;<span class="ident" id="4721130">ExpandString</span><span class="op" id="4721142">(</span><span class="ident" id="4721143">dst</span>&nbsp;<span class="op" id="4721147">[</span><span class="op" id="4721148">]</span><span class="builtintype" id="4721149">byte</span><span class="op" id="4721153">,</span>&nbsp;<span class="ident" id="4721155">template</span>&nbsp;<span class="builtintype" id="4721164">string</span><span class="op" id="4721170">,</span>&nbsp;<span class="ident" id="4721172">src</span>&nbsp;<span class="builtintype" id="4721176">string</span><span class="op" id="4721182">,</span>&nbsp;<span class="ident" id="4721184">match</span>&nbsp;<span class="op" id="4721190">[</span><span class="op" id="4721191">]</span><span class="builtintype" id="4721192">int</span><span class="op" id="4721195">)</span>&nbsp;<span class="op" id="4721197">[</span><span class="op" id="4721198">]</span><span class="builtintype" id="4721199">byte</span>&nbsp;<span class="op" id="4721204">{</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4721207">return</span>&nbsp;<span class="ident" id="4721214"><a href="/regexp/regexp.go.html#4721118">re</a></span><span class="op" id="4721216">.</span><span class="ident" id="4721217">expand</span><span class="op" id="4721223">(</span><span class="ident" id="4721224"><a href="/regexp/regexp.go.html#4721143">dst</a></span><span class="op" id="4721227">,</span>&nbsp;<span class="ident" id="4721229"><a href="/regexp/regexp.go.html#4721155">template</a></span><span class="op" id="4721237">,</span>&nbsp;<span class="ident" id="4721239">nil</span><span class="op" id="4721242">,</span>&nbsp;<span class="ident" id="4721244"><a href="/regexp/regexp.go.html#4721172">src</a></span><span class="op" id="4721247">,</span>&nbsp;<span class="ident" id="4721249"><a href="/regexp/regexp.go.html#4721184">match</a></span><span class="op" id="4721254">)</span><br>
<span class="lineno"></span><span class="op" id="4721256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4721259">func</span>&nbsp;<span class="op" id="4721264">(</span><span class="ident" id="4721265">re</span>&nbsp;<span class="op" id="4721268">*</span><span class="ident" id="4721269"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4721275">)</span>&nbsp;<span class="ident" id="4721277">expand</span><span class="op" id="4721283">(</span><span class="ident" id="4721284">dst</span>&nbsp;<span class="op" id="4721288">[</span><span class="op" id="4721289">]</span><span class="builtintype" id="4721290">byte</span><span class="op" id="4721294">,</span>&nbsp;<span class="ident" id="4721296">template</span>&nbsp;<span class="builtintype" id="4721305">string</span><span class="op" id="4721311">,</span>&nbsp;<span class="ident" id="4721313">bsrc</span>&nbsp;<span class="op" id="4721318">[</span><span class="op" id="4721319">]</span><span class="builtintype" id="4721320">byte</span><span class="op" id="4721324">,</span>&nbsp;<span class="ident" id="4721326">src</span>&nbsp;<span class="builtintype" id="4721330">string</span><span class="op" id="4721336">,</span>&nbsp;<span class="ident" id="4721338">match</span>&nbsp;<span class="op" id="4721344">[</span><span class="op" id="4721345">]</span><span class="builtintype" id="4721346">int</span><span class="op" id="4721349">)</span>&nbsp;<span class="op" id="4721351">[</span><span class="op" id="4721352">]</span><span class="builtintype" id="4721353">byte</span>&nbsp;<span class="op" id="4721358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4721361">for</span>&nbsp;<span class="builtinfunc" id="4721365">len</span><span class="op" id="4721368">(</span><span class="ident" id="4721369"><a href="/regexp/regexp.go.html#4721296">template</a></span><span class="op" id="4721377">)</span>&nbsp;<span class="op" id="4721379">&gt;</span>&nbsp;<span class="num" id="4721381">0</span>&nbsp;<span class="op" id="4721383">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4721387">i</span>&nbsp;<span class="op" id="4721389">:=</span>&nbsp;<span class="ident" id="4721392"><a href="/regexp/regexp.go.html#4700084">strings</a></span><span class="op" id="4721399">.</span><span class="ident" id="4721400">Index</span><span class="op" id="4721405">(</span><span class="ident" id="4721406"><a href="/regexp/regexp.go.html#4721296">template</a></span><span class="op" id="4721414">,</span>&nbsp;<span class="string" id="4721416">&#34;$&#34;</span><span class="op" id="4721419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4721423">if</span>&nbsp;<span class="ident" id="4721426"><a href="/regexp/regexp.go.html#4721387">i</a></span>&nbsp;<span class="op" id="4721428">&lt;</span>&nbsp;<span class="num" id="4721430">0</span>&nbsp;<span class="op" id="4721432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4721437">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4721445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4721449"><a href="/regexp/regexp.go.html#4721284">dst</a></span>&nbsp;<span class="op" id="4721453">=</span>&nbsp;<span class="builtinfunc" id="4721455">append</span><span class="op" id="4721461">(</span><span class="ident" id="4721462"><a href="/regexp/regexp.go.html#4721284">dst</a></span><span class="op" id="4721465">,</span>&nbsp;<span class="ident" id="4721467"><a href="/regexp/regexp.go.html#4721296">template</a></span><span class="op" id="4721475">[</span><span class="op" id="4721476">:</span><span class="ident" id="4721477"><a href="/regexp/regexp.go.html#4721387">i</a></span><span class="op" id="4721478">]</span><span class="op" id="4721479">...</span><span class="op" id="4721482">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4721486"><a href="/regexp/regexp.go.html#4721296">template</a></span>&nbsp;<span class="op" id="4721495">=</span>&nbsp;<span class="ident" id="4721497"><a href="/regexp/regexp.go.html#4721296">template</a></span><span class="op" id="4721505">[</span><span class="ident" id="4721506"><a href="/regexp/regexp.go.html#4721387">i</a></span><span class="op" id="4721507">:</span><span class="op" id="4721508">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4721512">if</span>&nbsp;<span class="builtinfunc" id="4721515">len</span><span class="op" id="4721518">(</span><span class="ident" id="4721519"><a href="/regexp/regexp.go.html#4721296">template</a></span><span class="op" id="4721527">)</span>&nbsp;<span class="op" id="4721529">&gt;</span>&nbsp;<span class="num" id="4721531">1</span>&nbsp;<span class="op" id="4721533">&amp;&amp;</span>&nbsp;<span class="ident" id="4721536"><a href="/regexp/regexp.go.html#4721296">template</a></span><span class="op" id="4721544">[</span><span class="num" id="4721545">1</span><span class="op" id="4721546">]</span>&nbsp;<span class="op" id="4721548">==</span>&nbsp;<span class="string" id="4721551">&#39;$&#39;</span>&nbsp;<span class="op" id="4721555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4721560">//&nbsp;Treat&nbsp;$$&nbsp;as&nbsp;$.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4721581"><a href="/regexp/regexp.go.html#4721284">dst</a></span>&nbsp;<span class="op" id="4721585">=</span>&nbsp;<span class="builtinfunc" id="4721587">append</span><span class="op" id="4721593">(</span><span class="ident" id="4721594"><a href="/regexp/regexp.go.html#4721284">dst</a></span><span class="op" id="4721597">,</span>&nbsp;<span class="string" id="4721599">&#39;$&#39;</span><span class="op" id="4721602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4721607"><a href="/regexp/regexp.go.html#4721296">template</a></span>&nbsp;<span class="op" id="4721616">=</span>&nbsp;<span class="ident" id="4721618"><a href="/regexp/regexp.go.html#4721296">template</a></span><span class="op" id="4721626">[</span><span class="num" id="4721627">2</span><span class="op" id="4721628">:</span><span class="op" id="4721629">]</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4721634">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4721645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4721649">name</span><span class="op" id="4721653">,</span>&nbsp;<span class="ident" id="4721655">num</span><span class="op" id="4721658">,</span>&nbsp;<span class="ident" id="4721660">rest</span><span class="op" id="4721664">,</span>&nbsp;<span class="ident" id="4721666">ok</span>&nbsp;<span class="op" id="4721669">:=</span>&nbsp;<span class="ident" id="4721672"><a href="/regexp/regexp.go.html#4722568">extract</a></span><span class="op" id="4721679">(</span><span class="ident" id="4721680"><a href="/regexp/regexp.go.html#4721296">template</a></span><span class="op" id="4721688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4721692">if</span>&nbsp;<span class="op" id="4721695">!</span><span class="ident" id="4721696"><a href="/regexp/regexp.go.html#4721666">ok</a></span>&nbsp;<span class="op" id="4721699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4721704">//&nbsp;Malformed;&nbsp;treat&nbsp;$&nbsp;as&nbsp;raw&nbsp;text.</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4721742"><a href="/regexp/regexp.go.html#4721284">dst</a></span>&nbsp;<span class="op" id="4721746">=</span>&nbsp;<span class="builtinfunc" id="4721748">append</span><span class="op" id="4721754">(</span><span class="ident" id="4721755"><a href="/regexp/regexp.go.html#4721284">dst</a></span><span class="op" id="4721758">,</span>&nbsp;<span class="string" id="4721760">&#39;$&#39;</span><span class="op" id="4721763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4721768"><a href="/regexp/regexp.go.html#4721296">template</a></span>&nbsp;<span class="op" id="4721777">=</span>&nbsp;<span class="ident" id="4721779"><a href="/regexp/regexp.go.html#4721296">template</a></span><span class="op" id="4721787">[</span><span class="num" id="4721788">1</span><span class="op" id="4721789">:</span><span class="op" id="4721790">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4721795">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4721806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4721810"><a href="/regexp/regexp.go.html#4721296">template</a></span>&nbsp;<span class="op" id="4721819">=</span>&nbsp;<span class="ident" id="4721821"><a href="/regexp/regexp.go.html#4721660">rest</a></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4721828">if</span>&nbsp;<span class="ident" id="4721831"><a href="/regexp/regexp.go.html#4721655">num</a></span>&nbsp;<span class="op" id="4721835">&gt;=</span>&nbsp;<span class="num" id="4721838">0</span>&nbsp;<span class="op" id="4721840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4721845">if</span>&nbsp;<span class="num" id="4721848">2</span><span class="op" id="4721849">*</span><span class="ident" id="4721850"><a href="/regexp/regexp.go.html#4721655">num</a></span><span class="op" id="4721853">+</span><span class="num" id="4721854">1</span>&nbsp;<span class="op" id="4721856">&lt;</span>&nbsp;<span class="builtinfunc" id="4721858">len</span><span class="op" id="4721861">(</span><span class="ident" id="4721862"><a href="/regexp/regexp.go.html#4721338">match</a></span><span class="op" id="4721867">)</span>&nbsp;<span class="op" id="4721869">&amp;&amp;</span>&nbsp;<span class="ident" id="4721872"><a href="/regexp/regexp.go.html#4721338">match</a></span><span class="op" id="4721877">[</span><span class="num" id="4721878">2</span><span class="op" id="4721879">*</span><span class="ident" id="4721880"><a href="/regexp/regexp.go.html#4721655">num</a></span><span class="op" id="4721883">]</span>&nbsp;<span class="op" id="4721885">&gt;=</span>&nbsp;<span class="num" id="4721888">0</span>&nbsp;<span class="op" id="4721890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4721896">if</span>&nbsp;<span class="ident" id="4721899"><a href="/regexp/regexp.go.html#4721313">bsrc</a></span>&nbsp;<span class="op" id="4721904">!=</span>&nbsp;<span class="ident" id="4721907">nil</span>&nbsp;<span class="op" id="4721911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4721918"><a href="/regexp/regexp.go.html#4721284">dst</a></span>&nbsp;<span class="op" id="4721922">=</span>&nbsp;<span class="builtinfunc" id="4721924">append</span><span class="op" id="4721930">(</span><span class="ident" id="4721931"><a href="/regexp/regexp.go.html#4721284">dst</a></span><span class="op" id="4721934">,</span>&nbsp;<span class="ident" id="4721936"><a href="/regexp/regexp.go.html#4721313">bsrc</a></span><span class="op" id="4721940">[</span><span class="ident" id="4721941"><a href="/regexp/regexp.go.html#4721338">match</a></span><span class="op" id="4721946">[</span><span class="num" id="4721947">2</span><span class="op" id="4721948">*</span><span class="ident" id="4721949"><a href="/regexp/regexp.go.html#4721655">num</a></span><span class="op" id="4721952">]</span><span class="op" id="4721953">:</span><span class="ident" id="4721954"><a href="/regexp/regexp.go.html#4721338">match</a></span><span class="op" id="4721959">[</span><span class="num" id="4721960">2</span><span class="op" id="4721961">*</span><span class="ident" id="4721962"><a href="/regexp/regexp.go.html#4721655">num</a></span><span class="op" id="4721965">+</span><span class="num" id="4721966">1</span><span class="op" id="4721967">]</span><span class="op" id="4721968">]</span><span class="op" id="4721969">...</span><span class="op" id="4721972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4721978">}</span>&nbsp;<span class="keyword" id="4721980">else</span>&nbsp;<span class="op" id="4721985">{</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4721992"><a href="/regexp/regexp.go.html#4721284">dst</a></span>&nbsp;<span class="op" id="4721996">=</span>&nbsp;<span class="builtinfunc" id="4721998">append</span><span class="op" id="4722004">(</span><span class="ident" id="4722005"><a href="/regexp/regexp.go.html#4721284">dst</a></span><span class="op" id="4722008">,</span>&nbsp;<span class="ident" id="4722010"><a href="/regexp/regexp.go.html#4721326">src</a></span><span class="op" id="4722013">[</span><span class="ident" id="4722014"><a href="/regexp/regexp.go.html#4721338">match</a></span><span class="op" id="4722019">[</span><span class="num" id="4722020">2</span><span class="op" id="4722021">*</span><span class="ident" id="4722022"><a href="/regexp/regexp.go.html#4721655">num</a></span><span class="op" id="4722025">]</span><span class="op" id="4722026">:</span><span class="ident" id="4722027"><a href="/regexp/regexp.go.html#4721338">match</a></span><span class="op" id="4722032">[</span><span class="num" id="4722033">2</span><span class="op" id="4722034">*</span><span class="ident" id="4722035"><a href="/regexp/regexp.go.html#4721655">num</a></span><span class="op" id="4722038">+</span><span class="num" id="4722039">1</span><span class="op" id="4722040">]</span><span class="op" id="4722041">]</span><span class="op" id="4722042">...</span><span class="op" id="4722045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4722051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4722056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4722060">}</span>&nbsp;<span class="keyword" id="4722062">else</span>&nbsp;<span class="op" id="4722067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4722072">for</span>&nbsp;<span class="ident" id="4722076">i</span><span class="op" id="4722077">,</span>&nbsp;<span class="ident" id="4722079">namei</span>&nbsp;<span class="op" id="4722085">:=</span>&nbsp;<span class="keyword" id="4722088">range</span>&nbsp;<span class="ident" id="4722094"><a href="/regexp/regexp.go.html#4721265">re</a></span><span class="op" id="4722096">.</span><span class="ident" id="4722097">subexpNames</span>&nbsp;<span class="op" id="4722109">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4722115">if</span>&nbsp;<span class="ident" id="4722118"><a href="/regexp/regexp.go.html#4721649">name</a></span>&nbsp;<span class="op" id="4722123">==</span>&nbsp;<span class="ident" id="4722126"><a href="/regexp/regexp.go.html#4722079">namei</a></span>&nbsp;<span class="op" id="4722132">&amp;&amp;</span>&nbsp;<span class="num" id="4722135">2</span><span class="op" id="4722136">*</span><span class="ident" id="4722137"><a href="/regexp/regexp.go.html#4722076">i</a></span><span class="op" id="4722138">+</span><span class="num" id="4722139">1</span>&nbsp;<span class="op" id="4722141">&lt;</span>&nbsp;<span class="builtinfunc" id="4722143">len</span><span class="op" id="4722146">(</span><span class="ident" id="4722147"><a href="/regexp/regexp.go.html#4721338">match</a></span><span class="op" id="4722152">)</span>&nbsp;<span class="op" id="4722154">&amp;&amp;</span>&nbsp;<span class="ident" id="4722157"><a href="/regexp/regexp.go.html#4721338">match</a></span><span class="op" id="4722162">[</span><span class="num" id="4722163">2</span><span class="op" id="4722164">*</span><span class="ident" id="4722165"><a href="/regexp/regexp.go.html#4722076">i</a></span><span class="op" id="4722166">]</span>&nbsp;<span class="op" id="4722168">&gt;=</span>&nbsp;<span class="num" id="4722171">0</span>&nbsp;<span class="op" id="4722173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4722180">if</span>&nbsp;<span class="ident" id="4722183"><a href="/regexp/regexp.go.html#4721313">bsrc</a></span>&nbsp;<span class="op" id="4722188">!=</span>&nbsp;<span class="ident" id="4722191">nil</span>&nbsp;<span class="op" id="4722195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4722203"><a href="/regexp/regexp.go.html#4721284">dst</a></span>&nbsp;<span class="op" id="4722207">=</span>&nbsp;<span class="builtinfunc" id="4722209">append</span><span class="op" id="4722215">(</span><span class="ident" id="4722216"><a href="/regexp/regexp.go.html#4721284">dst</a></span><span class="op" id="4722219">,</span>&nbsp;<span class="ident" id="4722221"><a href="/regexp/regexp.go.html#4721313">bsrc</a></span><span class="op" id="4722225">[</span><span class="ident" id="4722226"><a href="/regexp/regexp.go.html#4721338">match</a></span><span class="op" id="4722231">[</span><span class="num" id="4722232">2</span><span class="op" id="4722233">*</span><span class="ident" id="4722234"><a href="/regexp/regexp.go.html#4722076">i</a></span><span class="op" id="4722235">]</span><span class="op" id="4722236">:</span><span class="ident" id="4722237"><a href="/regexp/regexp.go.html#4721338">match</a></span><span class="op" id="4722242">[</span><span class="num" id="4722243">2</span><span class="op" id="4722244">*</span><span class="ident" id="4722245"><a href="/regexp/regexp.go.html#4722076">i</a></span><span class="op" id="4722246">+</span><span class="num" id="4722247">1</span><span class="op" id="4722248">]</span><span class="op" id="4722249">]</span><span class="op" id="4722250">...</span><span class="op" id="4722253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4722260">}</span>&nbsp;<span class="keyword" id="4722262">else</span>&nbsp;<span class="op" id="4722267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4722275"><a href="/regexp/regexp.go.html#4721284">dst</a></span>&nbsp;<span class="op" id="4722279">=</span>&nbsp;<span class="builtinfunc" id="4722281">append</span><span class="op" id="4722287">(</span><span class="ident" id="4722288"><a href="/regexp/regexp.go.html#4721284">dst</a></span><span class="op" id="4722291">,</span>&nbsp;<span class="ident" id="4722293"><a href="/regexp/regexp.go.html#4721326">src</a></span><span class="op" id="4722296">[</span><span class="ident" id="4722297"><a href="/regexp/regexp.go.html#4721338">match</a></span><span class="op" id="4722302">[</span><span class="num" id="4722303">2</span><span class="op" id="4722304">*</span><span class="ident" id="4722305"><a href="/regexp/regexp.go.html#4722076">i</a></span><span class="op" id="4722306">]</span><span class="op" id="4722307">:</span><span class="ident" id="4722308"><a href="/regexp/regexp.go.html#4721338">match</a></span><span class="op" id="4722313">[</span><span class="num" id="4722314">2</span><span class="op" id="4722315">*</span><span class="ident" id="4722316"><a href="/regexp/regexp.go.html#4722076">i</a></span><span class="op" id="4722317">+</span><span class="num" id="4722318">1</span><span class="op" id="4722319">]</span><span class="op" id="4722320">]</span><span class="op" id="4722321">...</span><span class="op" id="4722324">)</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4722331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4722338">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4722348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4722353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4722357">}</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4722360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4722363"><a href="/regexp/regexp.go.html#4721284">dst</a></span>&nbsp;<span class="op" id="4722367">=</span>&nbsp;<span class="builtinfunc" id="4722369">append</span><span class="op" id="4722375">(</span><span class="ident" id="4722376"><a href="/regexp/regexp.go.html#4721284">dst</a></span><span class="op" id="4722379">,</span>&nbsp;<span class="ident" id="4722381"><a href="/regexp/regexp.go.html#4721296">template</a></span><span class="op" id="4722389">...</span><span class="op" id="4722392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4722395">return</span>&nbsp;<span class="ident" id="4722402"><a href="/regexp/regexp.go.html#4721284">dst</a></span><br>
<span class="lineno"></span><span class="op" id="4722406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span><span class="comment" id="4722409">//&nbsp;extract&nbsp;returns&nbsp;the&nbsp;name&nbsp;from&nbsp;a&nbsp;leading&nbsp;&#34;$name&#34;&nbsp;or&nbsp;&#34;${name}&#34;&nbsp;in&nbsp;str.</span><br>
<span class="lineno"></span><span class="comment" id="4722481">//&nbsp;If&nbsp;it&nbsp;is&nbsp;a&nbsp;number,&nbsp;extract&nbsp;returns&nbsp;num&nbsp;set&nbsp;to&nbsp;that&nbsp;number;&nbsp;otherwise&nbsp;num&nbsp;=&nbsp;-1.</span><br>
<span class="lineno"></span><span class="keyword" id="4722563">func</span>&nbsp;<span class="ident" id="4722568">extract</span><span class="op" id="4722575">(</span><span class="ident" id="4722576">str</span>&nbsp;<span class="builtintype" id="4722580">string</span><span class="op" id="4722586">)</span>&nbsp;<span class="op" id="4722588">(</span><span class="ident" id="4722589">name</span>&nbsp;<span class="builtintype" id="4722594">string</span><span class="op" id="4722600">,</span>&nbsp;<span class="ident" id="4722602">num</span>&nbsp;<span class="builtintype" id="4722606">int</span><span class="op" id="4722609">,</span>&nbsp;<span class="ident" id="4722611">rest</span>&nbsp;<span class="builtintype" id="4722616">string</span><span class="op" id="4722622">,</span>&nbsp;<span class="ident" id="4722624">ok</span>&nbsp;<span class="builtintype" id="4722627">bool</span><span class="op" id="4722631">)</span>&nbsp;<span class="op" id="4722633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4722636">if</span>&nbsp;<span class="builtinfunc" id="4722639">len</span><span class="op" id="4722642">(</span><span class="ident" id="4722643"><a href="/regexp/regexp.go.html#4722576">str</a></span><span class="op" id="4722646">)</span>&nbsp;<span class="op" id="4722648">&lt;</span>&nbsp;<span class="num" id="4722650">2</span>&nbsp;<span class="op" id="4722652">||</span>&nbsp;<span class="ident" id="4722655"><a href="/regexp/regexp.go.html#4722576">str</a></span><span class="op" id="4722658">[</span><span class="num" id="4722659">0</span><span class="op" id="4722660">]</span>&nbsp;<span class="op" id="4722662">!=</span>&nbsp;<span class="string" id="4722665">&#39;$&#39;</span>&nbsp;<span class="op" id="4722669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4722673">return</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4722681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4722684">brace</span>&nbsp;<span class="op" id="4722690">:=</span>&nbsp;<span class="ident" id="4722693">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4722700">if</span>&nbsp;<span class="ident" id="4722703"><a href="/regexp/regexp.go.html#4722576">str</a></span><span class="op" id="4722706">[</span><span class="num" id="4722707">1</span><span class="op" id="4722708">]</span>&nbsp;<span class="op" id="4722710">==</span>&nbsp;<span class="string" id="4722713">&#39;{&#39;</span>&nbsp;<span class="op" id="4722717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4722721"><a href="/regexp/regexp.go.html#4722684">brace</a></span>&nbsp;<span class="op" id="4722727">=</span>&nbsp;<span class="ident" id="4722729">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4722736"><a href="/regexp/regexp.go.html#4722576">str</a></span>&nbsp;<span class="op" id="4722740">=</span>&nbsp;<span class="ident" id="4722742"><a href="/regexp/regexp.go.html#4722576">str</a></span><span class="op" id="4722745">[</span><span class="num" id="4722746">2</span><span class="op" id="4722747">:</span><span class="op" id="4722748">]</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4722751">}</span>&nbsp;<span class="keyword" id="4722753">else</span>&nbsp;<span class="op" id="4722758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4722762"><a href="/regexp/regexp.go.html#4722576">str</a></span>&nbsp;<span class="op" id="4722766">=</span>&nbsp;<span class="ident" id="4722768"><a href="/regexp/regexp.go.html#4722576">str</a></span><span class="op" id="4722771">[</span><span class="num" id="4722772">1</span><span class="op" id="4722773">:</span><span class="op" id="4722774">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4722777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4722780">i</span>&nbsp;<span class="op" id="4722782">:=</span>&nbsp;<span class="num" id="4722785">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4722788">for</span>&nbsp;<span class="ident" id="4722792"><a href="/regexp/regexp.go.html#4722780">i</a></span>&nbsp;<span class="op" id="4722794">&lt;</span>&nbsp;<span class="builtinfunc" id="4722796">len</span><span class="op" id="4722799">(</span><span class="ident" id="4722800"><a href="/regexp/regexp.go.html#4722576">str</a></span><span class="op" id="4722803">)</span>&nbsp;<span class="op" id="4722805">{</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="4722809">rune</span><span class="op" id="4722813">,</span>&nbsp;<span class="ident" id="4722815">size</span>&nbsp;<span class="op" id="4722820">:=</span>&nbsp;<span class="ident" id="4722823"><a href="/regexp/regexp.go.html#4700114">utf8</a></span><span class="op" id="4722827">.</span><span class="ident" id="4722828">DecodeRuneInString</span><span class="op" id="4722846">(</span><span class="ident" id="4722847"><a href="/regexp/regexp.go.html#4722576">str</a></span><span class="op" id="4722850">[</span><span class="ident" id="4722851"><a href="/regexp/regexp.go.html#4722780">i</a></span><span class="op" id="4722852">:</span><span class="op" id="4722853">]</span><span class="op" id="4722854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4722858">if</span>&nbsp;<span class="op" id="4722861">!</span><span class="ident" id="4722862"><a href="/regexp/regexp.go.html#4700103">unicode</a></span><span class="op" id="4722869">.</span><span class="ident" id="4722870">IsLetter</span><span class="op" id="4722878">(</span><span class="builtintype" id="4722879"><a href="/regexp/regexp.go.html#4722809">rune</a></span><span class="op" id="4722883">)</span>&nbsp;<span class="op" id="4722885">&amp;&amp;</span>&nbsp;<span class="op" id="4722888">!</span><span class="ident" id="4722889"><a href="/regexp/regexp.go.html#4700103">unicode</a></span><span class="op" id="4722896">.</span><span class="ident" id="4722897">IsDigit</span><span class="op" id="4722904">(</span><span class="builtintype" id="4722905"><a href="/regexp/regexp.go.html#4722809">rune</a></span><span class="op" id="4722909">)</span>&nbsp;<span class="op" id="4722911">&amp;&amp;</span>&nbsp;<span class="builtintype" id="4722914"><a href="/regexp/regexp.go.html#4722809">rune</a></span>&nbsp;<span class="op" id="4722919">!=</span>&nbsp;<span class="string" id="4722922">&#39;_&#39;</span>&nbsp;<span class="op" id="4722926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4722931">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4722939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4722943"><a href="/regexp/regexp.go.html#4722780">i</a></span>&nbsp;<span class="op" id="4722945">+=</span>&nbsp;<span class="ident" id="4722948"><a href="/regexp/regexp.go.html#4722815">size</a></span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4722954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4722957">if</span>&nbsp;<span class="ident" id="4722960"><a href="/regexp/regexp.go.html#4722780">i</a></span>&nbsp;<span class="op" id="4722962">==</span>&nbsp;<span class="num" id="4722965">0</span>&nbsp;<span class="op" id="4722967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4722971">//&nbsp;empty&nbsp;name&nbsp;is&nbsp;not&nbsp;okay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4722999">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4723007">}</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4723010"><a href="/regexp/regexp.go.html#4722589">name</a></span>&nbsp;<span class="op" id="4723015">=</span>&nbsp;<span class="ident" id="4723017"><a href="/regexp/regexp.go.html#4722576">str</a></span><span class="op" id="4723020">[</span><span class="op" id="4723021">:</span><span class="ident" id="4723022"><a href="/regexp/regexp.go.html#4722780">i</a></span><span class="op" id="4723023">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4723026">if</span>&nbsp;<span class="ident" id="4723029"><a href="/regexp/regexp.go.html#4722684">brace</a></span>&nbsp;<span class="op" id="4723035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4723039">if</span>&nbsp;<span class="ident" id="4723042"><a href="/regexp/regexp.go.html#4722780">i</a></span>&nbsp;<span class="op" id="4723044">&gt;=</span>&nbsp;<span class="builtinfunc" id="4723047">len</span><span class="op" id="4723050">(</span><span class="ident" id="4723051"><a href="/regexp/regexp.go.html#4722576">str</a></span><span class="op" id="4723054">)</span>&nbsp;<span class="op" id="4723056">||</span>&nbsp;<span class="ident" id="4723059"><a href="/regexp/regexp.go.html#4722576">str</a></span><span class="op" id="4723062">[</span><span class="ident" id="4723063"><a href="/regexp/regexp.go.html#4722780">i</a></span><span class="op" id="4723064">]</span>&nbsp;<span class="op" id="4723066">!=</span>&nbsp;<span class="string" id="4723069">&#39;}&#39;</span>&nbsp;<span class="op" id="4723073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4723078">//&nbsp;missing&nbsp;closing&nbsp;brace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4723106">return</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4723115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4723119"><a href="/regexp/regexp.go.html#4722780">i</a></span><span class="op" id="4723120">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4723124">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4723128">//&nbsp;Parse&nbsp;number.</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4723146"><a href="/regexp/regexp.go.html#4722602">num</a></span>&nbsp;<span class="op" id="4723150">=</span>&nbsp;<span class="num" id="4723152">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4723155">for</span>&nbsp;<span class="ident" id="4723159">i</span>&nbsp;<span class="op" id="4723161">:=</span>&nbsp;<span class="num" id="4723164">0</span><span class="op" id="4723165">;</span>&nbsp;<span class="ident" id="4723167"><a href="/regexp/regexp.go.html#4723159">i</a></span>&nbsp;<span class="op" id="4723169">&lt;</span>&nbsp;<span class="builtinfunc" id="4723171">len</span><span class="op" id="4723174">(</span><span class="ident" id="4723175"><a href="/regexp/regexp.go.html#4722589">name</a></span><span class="op" id="4723179">)</span><span class="op" id="4723180">;</span>&nbsp;<span class="ident" id="4723182"><a href="/regexp/regexp.go.html#4723159">i</a></span><span class="op" id="4723183">++</span>&nbsp;<span class="op" id="4723186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4723190">if</span>&nbsp;<span class="ident" id="4723193"><a href="/regexp/regexp.go.html#4722589">name</a></span><span class="op" id="4723197">[</span><span class="ident" id="4723198"><a href="/regexp/regexp.go.html#4723159">i</a></span><span class="op" id="4723199">]</span>&nbsp;<span class="op" id="4723201">&lt;</span>&nbsp;<span class="string" id="4723203">&#39;0&#39;</span>&nbsp;<span class="op" id="4723207">||</span>&nbsp;<span class="string" id="4723210">&#39;9&#39;</span>&nbsp;<span class="op" id="4723214">&lt;</span>&nbsp;<span class="ident" id="4723216"><a href="/regexp/regexp.go.html#4722589">name</a></span><span class="op" id="4723220">[</span><span class="ident" id="4723221"><a href="/regexp/regexp.go.html#4723159">i</a></span><span class="op" id="4723222">]</span>&nbsp;<span class="op" id="4723224">||</span>&nbsp;<span class="ident" id="4723227"><a href="/regexp/regexp.go.html#4722602">num</a></span>&nbsp;<span class="op" id="4723231">&gt;=</span>&nbsp;<span class="num" id="4723234">1e8</span>&nbsp;<span class="op" id="4723238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4723243"><a href="/regexp/regexp.go.html#4722602">num</a></span>&nbsp;<span class="op" id="4723247">=</span>&nbsp;<span class="op" id="4723249">-</span><span class="num" id="4723250">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4723255">break</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4723263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4723267"><a href="/regexp/regexp.go.html#4722602">num</a></span>&nbsp;<span class="op" id="4723271">=</span>&nbsp;<span class="ident" id="4723273"><a href="/regexp/regexp.go.html#4722602">num</a></span><span class="op" id="4723276">*</span><span class="num" id="4723277">10</span>&nbsp;<span class="op" id="4723280">+</span>&nbsp;<span class="builtintype" id="4723282">int</span><span class="op" id="4723285">(</span><span class="ident" id="4723286"><a href="/regexp/regexp.go.html#4722589">name</a></span><span class="op" id="4723290">[</span><span class="ident" id="4723291"><a href="/regexp/regexp.go.html#4723159">i</a></span><span class="op" id="4723292">]</span><span class="op" id="4723293">)</span>&nbsp;<span class="op" id="4723295">-</span>&nbsp;<span class="string" id="4723297">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4723302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4723305">//&nbsp;Disallow&nbsp;leading&nbsp;zeros.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4723333">if</span>&nbsp;<span class="ident" id="4723336"><a href="/regexp/regexp.go.html#4722589">name</a></span><span class="op" id="4723340">[</span><span class="num" id="4723341">0</span><span class="op" id="4723342">]</span>&nbsp;<span class="op" id="4723344">==</span>&nbsp;<span class="string" id="4723347">&#39;0&#39;</span>&nbsp;<span class="op" id="4723351">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="4723354">len</span><span class="op" id="4723357">(</span><span class="ident" id="4723358"><a href="/regexp/regexp.go.html#4722589">name</a></span><span class="op" id="4723362">)</span>&nbsp;<span class="op" id="4723364">&gt;</span>&nbsp;<span class="num" id="4723366">1</span>&nbsp;<span class="op" id="4723368">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4723372"><a href="/regexp/regexp.go.html#4722602">num</a></span>&nbsp;<span class="op" id="4723376">=</span>&nbsp;<span class="op" id="4723378">-</span><span class="num" id="4723379">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4723382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4723386"><a href="/regexp/regexp.go.html#4722611">rest</a></span>&nbsp;<span class="op" id="4723391">=</span>&nbsp;<span class="ident" id="4723393"><a href="/regexp/regexp.go.html#4722576">str</a></span><span class="op" id="4723396">[</span><span class="ident" id="4723397"><a href="/regexp/regexp.go.html#4722780">i</a></span><span class="op" id="4723398">:</span><span class="op" id="4723399">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4723402"><a href="/regexp/regexp.go.html#4722624">ok</a></span>&nbsp;<span class="op" id="4723405">=</span>&nbsp;<span class="ident" id="4723407">true</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4723413">return</span><br>
<span class="lineno"></span><span class="op" id="4723420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4723423">//&nbsp;FindSubmatchIndex&nbsp;returns&nbsp;a&nbsp;slice&nbsp;holding&nbsp;the&nbsp;index&nbsp;pairs&nbsp;identifying&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4723500">//&nbsp;leftmost&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;in&nbsp;b&nbsp;and&nbsp;the&nbsp;matches,&nbsp;if&nbsp;any,&nbsp;of</span><br>
<span class="lineno">870</span><span class="comment" id="4723577">//&nbsp;its&nbsp;subexpressions,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;Submatch&#39;&nbsp;and&nbsp;&#39;Index&#39;&nbsp;descriptions</span><br>
<span class="lineno"></span><span class="comment" id="4723654">//&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="4723681">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="4723726">func</span>&nbsp;<span class="op" id="4723731">(</span><span class="ident" id="4723732">re</span>&nbsp;<span class="op" id="4723735">*</span><span class="ident" id="4723736"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4723742">)</span>&nbsp;<span class="ident" id="4723744">FindSubmatchIndex</span><span class="op" id="4723761">(</span><span class="ident" id="4723762">b</span>&nbsp;<span class="op" id="4723764">[</span><span class="op" id="4723765">]</span><span class="builtintype" id="4723766">byte</span><span class="op" id="4723770">)</span>&nbsp;<span class="op" id="4723772">[</span><span class="op" id="4723773">]</span><span class="builtintype" id="4723774">int</span>&nbsp;<span class="op" id="4723778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4723781">return</span>&nbsp;<span class="ident" id="4723788"><a href="/regexp/regexp.go.html#4723732">re</a></span><span class="op" id="4723790">.</span><span class="ident" id="4723791">pad</span><span class="op" id="4723794">(</span><span class="ident" id="4723795"><a href="/regexp/regexp.go.html#4723732">re</a></span><span class="op" id="4723797">.</span><span class="ident" id="4723798">doExecute</span><span class="op" id="4723807">(</span><span class="ident" id="4723808">nil</span><span class="op" id="4723811">,</span>&nbsp;<span class="ident" id="4723813"><a href="/regexp/regexp.go.html#4723762">b</a></span><span class="op" id="4723814">,</span>&nbsp;<span class="string" id="4723816">&#34;&#34;</span><span class="op" id="4723818">,</span>&nbsp;<span class="num" id="4723820">0</span><span class="op" id="4723821">,</span>&nbsp;<span class="ident" id="4723823"><a href="/regexp/regexp.go.html#4723732">re</a></span><span class="op" id="4723825">.</span><span class="ident" id="4723826">prog</span><span class="op" id="4723830">.</span><span class="ident" id="4723831">NumCap</span><span class="op" id="4723837">)</span><span class="op" id="4723838">)</span><br>
<span class="lineno">875</span><span class="op" id="4723840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4723843">//&nbsp;FindStringSubmatch&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;holding&nbsp;the&nbsp;text&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4723916">//&nbsp;leftmost&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;in&nbsp;s&nbsp;and&nbsp;the&nbsp;matches,&nbsp;if&nbsp;any,&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4723993">//&nbsp;its&nbsp;subexpressions,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;Submatch&#39;&nbsp;description&nbsp;in&nbsp;the</span><br>
<span class="lineno">880</span><span class="comment" id="4724064">//&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="4724084">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="4724129">func</span>&nbsp;<span class="op" id="4724134">(</span><span class="ident" id="4724135">re</span>&nbsp;<span class="op" id="4724138">*</span><span class="ident" id="4724139"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4724145">)</span>&nbsp;<span class="ident" id="4724147">FindStringSubmatch</span><span class="op" id="4724165">(</span><span class="ident" id="4724166">s</span>&nbsp;<span class="builtintype" id="4724168">string</span><span class="op" id="4724174">)</span>&nbsp;<span class="op" id="4724176">[</span><span class="op" id="4724177">]</span><span class="builtintype" id="4724178">string</span>&nbsp;<span class="op" id="4724185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4724188">a</span>&nbsp;<span class="op" id="4724190">:=</span>&nbsp;<span class="ident" id="4724193"><a href="/regexp/regexp.go.html#4724135">re</a></span><span class="op" id="4724195">.</span><span class="ident" id="4724196">doExecute</span><span class="op" id="4724205">(</span><span class="ident" id="4724206">nil</span><span class="op" id="4724209">,</span>&nbsp;<span class="ident" id="4724211">nil</span><span class="op" id="4724214">,</span>&nbsp;<span class="ident" id="4724216"><a href="/regexp/regexp.go.html#4724166">s</a></span><span class="op" id="4724217">,</span>&nbsp;<span class="num" id="4724219">0</span><span class="op" id="4724220">,</span>&nbsp;<span class="ident" id="4724222"><a href="/regexp/regexp.go.html#4724135">re</a></span><span class="op" id="4724224">.</span><span class="ident" id="4724225">prog</span><span class="op" id="4724229">.</span><span class="ident" id="4724230">NumCap</span><span class="op" id="4724236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4724239">if</span>&nbsp;<span class="ident" id="4724242"><a href="/regexp/regexp.go.html#4724188">a</a></span>&nbsp;<span class="op" id="4724244">==</span>&nbsp;<span class="ident" id="4724247">nil</span>&nbsp;<span class="op" id="4724251">{</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4724255">return</span>&nbsp;<span class="ident" id="4724262">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4724267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4724270">ret</span>&nbsp;<span class="op" id="4724274">:=</span>&nbsp;<span class="builtinfunc" id="4724277">make</span><span class="op" id="4724281">(</span><span class="op" id="4724282">[</span><span class="op" id="4724283">]</span><span class="builtintype" id="4724284">string</span><span class="op" id="4724290">,</span>&nbsp;<span class="num" id="4724292">1</span><span class="op" id="4724293">+</span><span class="ident" id="4724294"><a href="/regexp/regexp.go.html#4724135">re</a></span><span class="op" id="4724296">.</span><span class="ident" id="4724297">numSubexp</span><span class="op" id="4724306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4724309">for</span>&nbsp;<span class="ident" id="4724313">i</span>&nbsp;<span class="op" id="4724315">:=</span>&nbsp;<span class="keyword" id="4724318">range</span>&nbsp;<span class="ident" id="4724324"><a href="/regexp/regexp.go.html#4724270">ret</a></span>&nbsp;<span class="op" id="4724328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4724332">if</span>&nbsp;<span class="num" id="4724335">2</span><span class="op" id="4724336">*</span><span class="ident" id="4724337"><a href="/regexp/regexp.go.html#4724313">i</a></span>&nbsp;<span class="op" id="4724339">&lt;</span>&nbsp;<span class="builtinfunc" id="4724341">len</span><span class="op" id="4724344">(</span><span class="ident" id="4724345"><a href="/regexp/regexp.go.html#4724188">a</a></span><span class="op" id="4724346">)</span>&nbsp;<span class="op" id="4724348">&amp;&amp;</span>&nbsp;<span class="ident" id="4724351"><a href="/regexp/regexp.go.html#4724188">a</a></span><span class="op" id="4724352">[</span><span class="num" id="4724353">2</span><span class="op" id="4724354">*</span><span class="ident" id="4724355"><a href="/regexp/regexp.go.html#4724313">i</a></span><span class="op" id="4724356">]</span>&nbsp;<span class="op" id="4724358">&gt;=</span>&nbsp;<span class="num" id="4724361">0</span>&nbsp;<span class="op" id="4724363">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4724368"><a href="/regexp/regexp.go.html#4724270">ret</a></span><span class="op" id="4724371">[</span><span class="ident" id="4724372"><a href="/regexp/regexp.go.html#4724313">i</a></span><span class="op" id="4724373">]</span>&nbsp;<span class="op" id="4724375">=</span>&nbsp;<span class="ident" id="4724377"><a href="/regexp/regexp.go.html#4724166">s</a></span><span class="op" id="4724378">[</span><span class="ident" id="4724379"><a href="/regexp/regexp.go.html#4724188">a</a></span><span class="op" id="4724380">[</span><span class="num" id="4724381">2</span><span class="op" id="4724382">*</span><span class="ident" id="4724383"><a href="/regexp/regexp.go.html#4724313">i</a></span><span class="op" id="4724384">]</span><span class="op" id="4724385">:</span><span class="ident" id="4724386"><a href="/regexp/regexp.go.html#4724188">a</a></span><span class="op" id="4724387">[</span><span class="num" id="4724388">2</span><span class="op" id="4724389">*</span><span class="ident" id="4724390"><a href="/regexp/regexp.go.html#4724313">i</a></span><span class="op" id="4724391">+</span><span class="num" id="4724392">1</span><span class="op" id="4724393">]</span><span class="op" id="4724394">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4724398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4724401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4724404">return</span>&nbsp;<span class="ident" id="4724411"><a href="/regexp/regexp.go.html#4724270">ret</a></span><br>
<span class="lineno"></span><span class="op" id="4724415">}</span><br>
<span class="lineno">895</span><br>
<span class="lineno"></span><span class="comment" id="4724418">//&nbsp;FindStringSubmatchIndex&nbsp;returns&nbsp;a&nbsp;slice&nbsp;holding&nbsp;the&nbsp;index&nbsp;pairs</span><br>
<span class="lineno"></span><span class="comment" id="4724485">//&nbsp;identifying&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;in&nbsp;s&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4724558">//&nbsp;matches,&nbsp;if&nbsp;any,&nbsp;of&nbsp;its&nbsp;subexpressions,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;Submatch&#39;&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4724634">//&nbsp;&#39;Index&#39;&nbsp;descriptions&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno">900</span><span class="comment" id="4724682">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="4724727">func</span>&nbsp;<span class="op" id="4724732">(</span><span class="ident" id="4724733">re</span>&nbsp;<span class="op" id="4724736">*</span><span class="ident" id="4724737"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4724743">)</span>&nbsp;<span class="ident" id="4724745">FindStringSubmatchIndex</span><span class="op" id="4724768">(</span><span class="ident" id="4724769">s</span>&nbsp;<span class="builtintype" id="4724771">string</span><span class="op" id="4724777">)</span>&nbsp;<span class="op" id="4724779">[</span><span class="op" id="4724780">]</span><span class="builtintype" id="4724781">int</span>&nbsp;<span class="op" id="4724785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4724788">return</span>&nbsp;<span class="ident" id="4724795"><a href="/regexp/regexp.go.html#4724733">re</a></span><span class="op" id="4724797">.</span><span class="ident" id="4724798">pad</span><span class="op" id="4724801">(</span><span class="ident" id="4724802"><a href="/regexp/regexp.go.html#4724733">re</a></span><span class="op" id="4724804">.</span><span class="ident" id="4724805">doExecute</span><span class="op" id="4724814">(</span><span class="ident" id="4724815">nil</span><span class="op" id="4724818">,</span>&nbsp;<span class="ident" id="4724820">nil</span><span class="op" id="4724823">,</span>&nbsp;<span class="ident" id="4724825"><a href="/regexp/regexp.go.html#4724769">s</a></span><span class="op" id="4724826">,</span>&nbsp;<span class="num" id="4724828">0</span><span class="op" id="4724829">,</span>&nbsp;<span class="ident" id="4724831"><a href="/regexp/regexp.go.html#4724733">re</a></span><span class="op" id="4724833">.</span><span class="ident" id="4724834">prog</span><span class="op" id="4724838">.</span><span class="ident" id="4724839">NumCap</span><span class="op" id="4724845">)</span><span class="op" id="4724846">)</span><br>
<span class="lineno"></span><span class="op" id="4724848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span><span class="comment" id="4724851">//&nbsp;FindReaderSubmatchIndex&nbsp;returns&nbsp;a&nbsp;slice&nbsp;holding&nbsp;the&nbsp;index&nbsp;pairs</span><br>
<span class="lineno"></span><span class="comment" id="4724918">//&nbsp;identifying&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;of&nbsp;text&nbsp;read&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="4724994">//&nbsp;the&nbsp;RuneReader,&nbsp;and&nbsp;the&nbsp;matches,&nbsp;if&nbsp;any,&nbsp;of&nbsp;its&nbsp;subexpressions,&nbsp;as&nbsp;defined</span><br>
<span class="lineno"></span><span class="comment" id="4725072">//&nbsp;by&nbsp;the&nbsp;&#39;Submatch&#39;&nbsp;and&nbsp;&#39;Index&#39;&nbsp;descriptions&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.&nbsp;&nbsp;A</span><br>
<span class="lineno"></span><span class="comment" id="4725145">//&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno">910</span><span class="keyword" id="4725188">func</span>&nbsp;<span class="op" id="4725193">(</span><span class="ident" id="4725194">re</span>&nbsp;<span class="op" id="4725197">*</span><span class="ident" id="4725198"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4725204">)</span>&nbsp;<span class="ident" id="4725206">FindReaderSubmatchIndex</span><span class="op" id="4725229">(</span><span class="ident" id="4725230">r</span>&nbsp;<span class="ident" id="4725232"><a href="/regexp/regexp.go.html#4700050">io</a></span><span class="op" id="4725234">.</span><span class="ident" id="4725235">RuneReader</span><span class="op" id="4725245">)</span>&nbsp;<span class="op" id="4725247">[</span><span class="op" id="4725248">]</span><span class="builtintype" id="4725249">int</span>&nbsp;<span class="op" id="4725253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4725256">return</span>&nbsp;<span class="ident" id="4725263"><a href="/regexp/regexp.go.html#4725194">re</a></span><span class="op" id="4725265">.</span><span class="ident" id="4725266">pad</span><span class="op" id="4725269">(</span><span class="ident" id="4725270"><a href="/regexp/regexp.go.html#4725194">re</a></span><span class="op" id="4725272">.</span><span class="ident" id="4725273">doExecute</span><span class="op" id="4725282">(</span><span class="ident" id="4725283"><a href="/regexp/regexp.go.html#4725230">r</a></span><span class="op" id="4725284">,</span>&nbsp;<span class="ident" id="4725286">nil</span><span class="op" id="4725289">,</span>&nbsp;<span class="string" id="4725291">&#34;&#34;</span><span class="op" id="4725293">,</span>&nbsp;<span class="num" id="4725295">0</span><span class="op" id="4725296">,</span>&nbsp;<span class="ident" id="4725298"><a href="/regexp/regexp.go.html#4725194">re</a></span><span class="op" id="4725300">.</span><span class="ident" id="4725301">prog</span><span class="op" id="4725305">.</span><span class="ident" id="4725306">NumCap</span><span class="op" id="4725312">)</span><span class="op" id="4725313">)</span><br>
<span class="lineno"></span><span class="op" id="4725315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4725318">const</span>&nbsp;<span class="ident" id="4725324">startSize</span>&nbsp;<span class="op" id="4725334">=</span>&nbsp;<span class="num" id="4725336">10</span>&nbsp;<span class="comment" id="4725339">//&nbsp;The&nbsp;size&nbsp;at&nbsp;which&nbsp;to&nbsp;start&nbsp;a&nbsp;slice&nbsp;in&nbsp;the&nbsp;&#39;All&#39;&nbsp;routines.</span><br>
<span class="lineno">915</span><br>
<span class="lineno"></span><span class="comment" id="4725401">//&nbsp;FindAll&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;Find;&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;all&nbsp;successive</span><br>
<span class="lineno"></span><span class="comment" id="4725479">//&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;&nbsp;description&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4725552">//&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="4725572">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno">920</span><span class="keyword" id="4725617">func</span>&nbsp;<span class="op" id="4725622">(</span><span class="ident" id="4725623">re</span>&nbsp;<span class="op" id="4725626">*</span><span class="ident" id="4725627"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4725633">)</span>&nbsp;<span class="ident" id="4725635">FindAll</span><span class="op" id="4725642">(</span><span class="ident" id="4725643">b</span>&nbsp;<span class="op" id="4725645">[</span><span class="op" id="4725646">]</span><span class="builtintype" id="4725647">byte</span><span class="op" id="4725651">,</span>&nbsp;<span class="ident" id="4725653">n</span>&nbsp;<span class="builtintype" id="4725655">int</span><span class="op" id="4725658">)</span>&nbsp;<span class="op" id="4725660">[</span><span class="op" id="4725661">]</span><span class="op" id="4725662">[</span><span class="op" id="4725663">]</span><span class="builtintype" id="4725664">byte</span>&nbsp;<span class="op" id="4725669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4725672">if</span>&nbsp;<span class="ident" id="4725675"><a href="/regexp/regexp.go.html#4725653">n</a></span>&nbsp;<span class="op" id="4725677">&lt;</span>&nbsp;<span class="num" id="4725679">0</span>&nbsp;<span class="op" id="4725681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4725685"><a href="/regexp/regexp.go.html#4725653">n</a></span>&nbsp;<span class="op" id="4725687">=</span>&nbsp;<span class="builtinfunc" id="4725689">len</span><span class="op" id="4725692">(</span><span class="ident" id="4725693"><a href="/regexp/regexp.go.html#4725643">b</a></span><span class="op" id="4725694">)</span>&nbsp;<span class="op" id="4725696">+</span>&nbsp;<span class="num" id="4725698">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4725701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4725704">result</span>&nbsp;<span class="op" id="4725711">:=</span>&nbsp;<span class="builtinfunc" id="4725714">make</span><span class="op" id="4725718">(</span><span class="op" id="4725719">[</span><span class="op" id="4725720">]</span><span class="op" id="4725721">[</span><span class="op" id="4725722">]</span><span class="builtintype" id="4725723">byte</span><span class="op" id="4725727">,</span>&nbsp;<span class="num" id="4725729">0</span><span class="op" id="4725730">,</span>&nbsp;<span class="ident" id="4725732"><a href="/regexp/regexp.go.html#4725324">startSize</a></span><span class="op" id="4725741">)</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4725744"><a href="/regexp/regexp.go.html#4725623">re</a></span><span class="op" id="4725746">.</span><span class="ident" id="4725747">allMatches</span><span class="op" id="4725757">(</span><span class="string" id="4725758">&#34;&#34;</span><span class="op" id="4725760">,</span>&nbsp;<span class="ident" id="4725762"><a href="/regexp/regexp.go.html#4725643">b</a></span><span class="op" id="4725763">,</span>&nbsp;<span class="ident" id="4725765"><a href="/regexp/regexp.go.html#4725653">n</a></span><span class="op" id="4725766">,</span>&nbsp;<span class="keyword" id="4725768">func</span><span class="op" id="4725772">(</span><span class="ident" id="4725773">match</span>&nbsp;<span class="op" id="4725779">[</span><span class="op" id="4725780">]</span><span class="builtintype" id="4725781">int</span><span class="op" id="4725784">)</span>&nbsp;<span class="op" id="4725786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4725790"><a href="/regexp/regexp.go.html#4725704">result</a></span>&nbsp;<span class="op" id="4725797">=</span>&nbsp;<span class="builtinfunc" id="4725799">append</span><span class="op" id="4725805">(</span><span class="ident" id="4725806"><a href="/regexp/regexp.go.html#4725704">result</a></span><span class="op" id="4725812">,</span>&nbsp;<span class="ident" id="4725814"><a href="/regexp/regexp.go.html#4725643">b</a></span><span class="op" id="4725815">[</span><span class="ident" id="4725816"><a href="/regexp/regexp.go.html#4725773">match</a></span><span class="op" id="4725821">[</span><span class="num" id="4725822">0</span><span class="op" id="4725823">]</span><span class="op" id="4725824">:</span><span class="ident" id="4725825"><a href="/regexp/regexp.go.html#4725773">match</a></span><span class="op" id="4725830">[</span><span class="num" id="4725831">1</span><span class="op" id="4725832">]</span><span class="op" id="4725833">]</span><span class="op" id="4725834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4725837">}</span><span class="op" id="4725838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4725841">if</span>&nbsp;<span class="builtinfunc" id="4725844">len</span><span class="op" id="4725847">(</span><span class="ident" id="4725848"><a href="/regexp/regexp.go.html#4725704">result</a></span><span class="op" id="4725854">)</span>&nbsp;<span class="op" id="4725856">==</span>&nbsp;<span class="num" id="4725859">0</span>&nbsp;<span class="op" id="4725861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4725865">return</span>&nbsp;<span class="ident" id="4725872">nil</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4725877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4725880">return</span>&nbsp;<span class="ident" id="4725887"><a href="/regexp/regexp.go.html#4725704">result</a></span><br>
<span class="lineno"></span><span class="op" id="4725894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4725897">//&nbsp;FindAllIndex&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindIndex;&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;all</span><br>
<span class="lineno">935</span><span class="comment" id="4725974">//&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;&nbsp;description</span><br>
<span class="lineno"></span><span class="comment" id="4726051">//&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="4726078">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="4726123">func</span>&nbsp;<span class="op" id="4726128">(</span><span class="ident" id="4726129">re</span>&nbsp;<span class="op" id="4726132">*</span><span class="ident" id="4726133"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4726139">)</span>&nbsp;<span class="ident" id="4726141">FindAllIndex</span><span class="op" id="4726153">(</span><span class="ident" id="4726154">b</span>&nbsp;<span class="op" id="4726156">[</span><span class="op" id="4726157">]</span><span class="builtintype" id="4726158">byte</span><span class="op" id="4726162">,</span>&nbsp;<span class="ident" id="4726164">n</span>&nbsp;<span class="builtintype" id="4726166">int</span><span class="op" id="4726169">)</span>&nbsp;<span class="op" id="4726171">[</span><span class="op" id="4726172">]</span><span class="op" id="4726173">[</span><span class="op" id="4726174">]</span><span class="builtintype" id="4726175">int</span>&nbsp;<span class="op" id="4726179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4726182">if</span>&nbsp;<span class="ident" id="4726185"><a href="/regexp/regexp.go.html#4726164">n</a></span>&nbsp;<span class="op" id="4726187">&lt;</span>&nbsp;<span class="num" id="4726189">0</span>&nbsp;<span class="op" id="4726191">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4726195"><a href="/regexp/regexp.go.html#4726164">n</a></span>&nbsp;<span class="op" id="4726197">=</span>&nbsp;<span class="builtinfunc" id="4726199">len</span><span class="op" id="4726202">(</span><span class="ident" id="4726203"><a href="/regexp/regexp.go.html#4726154">b</a></span><span class="op" id="4726204">)</span>&nbsp;<span class="op" id="4726206">+</span>&nbsp;<span class="num" id="4726208">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4726211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4726214">result</span>&nbsp;<span class="op" id="4726221">:=</span>&nbsp;<span class="builtinfunc" id="4726224">make</span><span class="op" id="4726228">(</span><span class="op" id="4726229">[</span><span class="op" id="4726230">]</span><span class="op" id="4726231">[</span><span class="op" id="4726232">]</span><span class="builtintype" id="4726233">int</span><span class="op" id="4726236">,</span>&nbsp;<span class="num" id="4726238">0</span><span class="op" id="4726239">,</span>&nbsp;<span class="ident" id="4726241"><a href="/regexp/regexp.go.html#4725324">startSize</a></span><span class="op" id="4726250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4726253"><a href="/regexp/regexp.go.html#4726129">re</a></span><span class="op" id="4726255">.</span><span class="ident" id="4726256">allMatches</span><span class="op" id="4726266">(</span><span class="string" id="4726267">&#34;&#34;</span><span class="op" id="4726269">,</span>&nbsp;<span class="ident" id="4726271"><a href="/regexp/regexp.go.html#4726154">b</a></span><span class="op" id="4726272">,</span>&nbsp;<span class="ident" id="4726274"><a href="/regexp/regexp.go.html#4726164">n</a></span><span class="op" id="4726275">,</span>&nbsp;<span class="keyword" id="4726277">func</span><span class="op" id="4726281">(</span><span class="ident" id="4726282">match</span>&nbsp;<span class="op" id="4726288">[</span><span class="op" id="4726289">]</span><span class="builtintype" id="4726290">int</span><span class="op" id="4726293">)</span>&nbsp;<span class="op" id="4726295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4726299"><a href="/regexp/regexp.go.html#4726214">result</a></span>&nbsp;<span class="op" id="4726306">=</span>&nbsp;<span class="builtinfunc" id="4726308">append</span><span class="op" id="4726314">(</span><span class="ident" id="4726315"><a href="/regexp/regexp.go.html#4726214">result</a></span><span class="op" id="4726321">,</span>&nbsp;<span class="ident" id="4726323"><a href="/regexp/regexp.go.html#4726282">match</a></span><span class="op" id="4726328">[</span><span class="num" id="4726329">0</span><span class="op" id="4726330">:</span><span class="num" id="4726331">2</span><span class="op" id="4726332">]</span><span class="op" id="4726333">)</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4726336">}</span><span class="op" id="4726337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4726340">if</span>&nbsp;<span class="builtinfunc" id="4726343">len</span><span class="op" id="4726346">(</span><span class="ident" id="4726347"><a href="/regexp/regexp.go.html#4726214">result</a></span><span class="op" id="4726353">)</span>&nbsp;<span class="op" id="4726355">==</span>&nbsp;<span class="num" id="4726358">0</span>&nbsp;<span class="op" id="4726360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4726364">return</span>&nbsp;<span class="ident" id="4726371">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4726376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4726379">return</span>&nbsp;<span class="ident" id="4726386"><a href="/regexp/regexp.go.html#4726214">result</a></span><br>
<span class="lineno">950</span><span class="op" id="4726393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4726396">//&nbsp;FindAllString&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindString;&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="4726475">//&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;&nbsp;description</span><br>
<span class="lineno"></span><span class="comment" id="4726552">//&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno">955</span><span class="comment" id="4726579">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="4726624">func</span>&nbsp;<span class="op" id="4726629">(</span><span class="ident" id="4726630">re</span>&nbsp;<span class="op" id="4726633">*</span><span class="ident" id="4726634"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4726640">)</span>&nbsp;<span class="ident" id="4726642">FindAllString</span><span class="op" id="4726655">(</span><span class="ident" id="4726656">s</span>&nbsp;<span class="builtintype" id="4726658">string</span><span class="op" id="4726664">,</span>&nbsp;<span class="ident" id="4726666">n</span>&nbsp;<span class="builtintype" id="4726668">int</span><span class="op" id="4726671">)</span>&nbsp;<span class="op" id="4726673">[</span><span class="op" id="4726674">]</span><span class="builtintype" id="4726675">string</span>&nbsp;<span class="op" id="4726682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4726685">if</span>&nbsp;<span class="ident" id="4726688"><a href="/regexp/regexp.go.html#4726666">n</a></span>&nbsp;<span class="op" id="4726690">&lt;</span>&nbsp;<span class="num" id="4726692">0</span>&nbsp;<span class="op" id="4726694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4726698"><a href="/regexp/regexp.go.html#4726666">n</a></span>&nbsp;<span class="op" id="4726700">=</span>&nbsp;<span class="builtinfunc" id="4726702">len</span><span class="op" id="4726705">(</span><span class="ident" id="4726706"><a href="/regexp/regexp.go.html#4726656">s</a></span><span class="op" id="4726707">)</span>&nbsp;<span class="op" id="4726709">+</span>&nbsp;<span class="num" id="4726711">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4726714">}</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4726717">result</span>&nbsp;<span class="op" id="4726724">:=</span>&nbsp;<span class="builtinfunc" id="4726727">make</span><span class="op" id="4726731">(</span><span class="op" id="4726732">[</span><span class="op" id="4726733">]</span><span class="builtintype" id="4726734">string</span><span class="op" id="4726740">,</span>&nbsp;<span class="num" id="4726742">0</span><span class="op" id="4726743">,</span>&nbsp;<span class="ident" id="4726745"><a href="/regexp/regexp.go.html#4725324">startSize</a></span><span class="op" id="4726754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4726757"><a href="/regexp/regexp.go.html#4726630">re</a></span><span class="op" id="4726759">.</span><span class="ident" id="4726760">allMatches</span><span class="op" id="4726770">(</span><span class="ident" id="4726771"><a href="/regexp/regexp.go.html#4726656">s</a></span><span class="op" id="4726772">,</span>&nbsp;<span class="ident" id="4726774">nil</span><span class="op" id="4726777">,</span>&nbsp;<span class="ident" id="4726779"><a href="/regexp/regexp.go.html#4726666">n</a></span><span class="op" id="4726780">,</span>&nbsp;<span class="keyword" id="4726782">func</span><span class="op" id="4726786">(</span><span class="ident" id="4726787">match</span>&nbsp;<span class="op" id="4726793">[</span><span class="op" id="4726794">]</span><span class="builtintype" id="4726795">int</span><span class="op" id="4726798">)</span>&nbsp;<span class="op" id="4726800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4726804"><a href="/regexp/regexp.go.html#4726717">result</a></span>&nbsp;<span class="op" id="4726811">=</span>&nbsp;<span class="builtinfunc" id="4726813">append</span><span class="op" id="4726819">(</span><span class="ident" id="4726820"><a href="/regexp/regexp.go.html#4726717">result</a></span><span class="op" id="4726826">,</span>&nbsp;<span class="ident" id="4726828"><a href="/regexp/regexp.go.html#4726656">s</a></span><span class="op" id="4726829">[</span><span class="ident" id="4726830"><a href="/regexp/regexp.go.html#4726787">match</a></span><span class="op" id="4726835">[</span><span class="num" id="4726836">0</span><span class="op" id="4726837">]</span><span class="op" id="4726838">:</span><span class="ident" id="4726839"><a href="/regexp/regexp.go.html#4726787">match</a></span><span class="op" id="4726844">[</span><span class="num" id="4726845">1</span><span class="op" id="4726846">]</span><span class="op" id="4726847">]</span><span class="op" id="4726848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4726851">}</span><span class="op" id="4726852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4726855">if</span>&nbsp;<span class="builtinfunc" id="4726858">len</span><span class="op" id="4726861">(</span><span class="ident" id="4726862"><a href="/regexp/regexp.go.html#4726717">result</a></span><span class="op" id="4726868">)</span>&nbsp;<span class="op" id="4726870">==</span>&nbsp;<span class="num" id="4726873">0</span>&nbsp;<span class="op" id="4726875">{</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4726879">return</span>&nbsp;<span class="ident" id="4726886">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4726891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4726894">return</span>&nbsp;<span class="ident" id="4726901"><a href="/regexp/regexp.go.html#4726717">result</a></span><br>
<span class="lineno"></span><span class="op" id="4726908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">970</span><span class="comment" id="4726911">//&nbsp;FindAllStringIndex&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindStringIndex;&nbsp;it&nbsp;returns&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4726987">//&nbsp;slice&nbsp;of&nbsp;all&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;</span><br>
<span class="lineno"></span><span class="comment" id="4727065">//&nbsp;description&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="4727104">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="4727149">func</span>&nbsp;<span class="op" id="4727154">(</span><span class="ident" id="4727155">re</span>&nbsp;<span class="op" id="4727158">*</span><span class="ident" id="4727159"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4727165">)</span>&nbsp;<span class="ident" id="4727167">FindAllStringIndex</span><span class="op" id="4727185">(</span><span class="ident" id="4727186">s</span>&nbsp;<span class="builtintype" id="4727188">string</span><span class="op" id="4727194">,</span>&nbsp;<span class="ident" id="4727196">n</span>&nbsp;<span class="builtintype" id="4727198">int</span><span class="op" id="4727201">)</span>&nbsp;<span class="op" id="4727203">[</span><span class="op" id="4727204">]</span><span class="op" id="4727205">[</span><span class="op" id="4727206">]</span><span class="builtintype" id="4727207">int</span>&nbsp;<span class="op" id="4727211">{</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4727214">if</span>&nbsp;<span class="ident" id="4727217"><a href="/regexp/regexp.go.html#4727196">n</a></span>&nbsp;<span class="op" id="4727219">&lt;</span>&nbsp;<span class="num" id="4727221">0</span>&nbsp;<span class="op" id="4727223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4727227"><a href="/regexp/regexp.go.html#4727196">n</a></span>&nbsp;<span class="op" id="4727229">=</span>&nbsp;<span class="builtinfunc" id="4727231">len</span><span class="op" id="4727234">(</span><span class="ident" id="4727235"><a href="/regexp/regexp.go.html#4727186">s</a></span><span class="op" id="4727236">)</span>&nbsp;<span class="op" id="4727238">+</span>&nbsp;<span class="num" id="4727240">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4727243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4727246">result</span>&nbsp;<span class="op" id="4727253">:=</span>&nbsp;<span class="builtinfunc" id="4727256">make</span><span class="op" id="4727260">(</span><span class="op" id="4727261">[</span><span class="op" id="4727262">]</span><span class="op" id="4727263">[</span><span class="op" id="4727264">]</span><span class="builtintype" id="4727265">int</span><span class="op" id="4727268">,</span>&nbsp;<span class="num" id="4727270">0</span><span class="op" id="4727271">,</span>&nbsp;<span class="ident" id="4727273"><a href="/regexp/regexp.go.html#4725324">startSize</a></span><span class="op" id="4727282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4727285"><a href="/regexp/regexp.go.html#4727155">re</a></span><span class="op" id="4727287">.</span><span class="ident" id="4727288">allMatches</span><span class="op" id="4727298">(</span><span class="ident" id="4727299"><a href="/regexp/regexp.go.html#4727186">s</a></span><span class="op" id="4727300">,</span>&nbsp;<span class="ident" id="4727302">nil</span><span class="op" id="4727305">,</span>&nbsp;<span class="ident" id="4727307"><a href="/regexp/regexp.go.html#4727196">n</a></span><span class="op" id="4727308">,</span>&nbsp;<span class="keyword" id="4727310">func</span><span class="op" id="4727314">(</span><span class="ident" id="4727315">match</span>&nbsp;<span class="op" id="4727321">[</span><span class="op" id="4727322">]</span><span class="builtintype" id="4727323">int</span><span class="op" id="4727326">)</span>&nbsp;<span class="op" id="4727328">{</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4727332"><a href="/regexp/regexp.go.html#4727246">result</a></span>&nbsp;<span class="op" id="4727339">=</span>&nbsp;<span class="builtinfunc" id="4727341">append</span><span class="op" id="4727347">(</span><span class="ident" id="4727348"><a href="/regexp/regexp.go.html#4727246">result</a></span><span class="op" id="4727354">,</span>&nbsp;<span class="ident" id="4727356"><a href="/regexp/regexp.go.html#4727315">match</a></span><span class="op" id="4727361">[</span><span class="num" id="4727362">0</span><span class="op" id="4727363">:</span><span class="num" id="4727364">2</span><span class="op" id="4727365">]</span><span class="op" id="4727366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4727369">}</span><span class="op" id="4727370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4727373">if</span>&nbsp;<span class="builtinfunc" id="4727376">len</span><span class="op" id="4727379">(</span><span class="ident" id="4727380"><a href="/regexp/regexp.go.html#4727246">result</a></span><span class="op" id="4727386">)</span>&nbsp;<span class="op" id="4727388">==</span>&nbsp;<span class="num" id="4727391">0</span>&nbsp;<span class="op" id="4727393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4727397">return</span>&nbsp;<span class="ident" id="4727404">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4727409">}</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4727412">return</span>&nbsp;<span class="ident" id="4727419"><a href="/regexp/regexp.go.html#4727246">result</a></span><br>
<span class="lineno"></span><span class="op" id="4727426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4727429">//&nbsp;FindAllSubmatch&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindSubmatch;&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice</span><br>
<span class="lineno"></span><span class="comment" id="4727505">//&nbsp;of&nbsp;all&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;</span><br>
<span class="lineno">990</span><span class="comment" id="4727577">//&nbsp;description&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="4727616">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="4727661">func</span>&nbsp;<span class="op" id="4727666">(</span><span class="ident" id="4727667">re</span>&nbsp;<span class="op" id="4727670">*</span><span class="ident" id="4727671"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4727677">)</span>&nbsp;<span class="ident" id="4727679">FindAllSubmatch</span><span class="op" id="4727694">(</span><span class="ident" id="4727695">b</span>&nbsp;<span class="op" id="4727697">[</span><span class="op" id="4727698">]</span><span class="builtintype" id="4727699">byte</span><span class="op" id="4727703">,</span>&nbsp;<span class="ident" id="4727705">n</span>&nbsp;<span class="builtintype" id="4727707">int</span><span class="op" id="4727710">)</span>&nbsp;<span class="op" id="4727712">[</span><span class="op" id="4727713">]</span><span class="op" id="4727714">[</span><span class="op" id="4727715">]</span><span class="op" id="4727716">[</span><span class="op" id="4727717">]</span><span class="builtintype" id="4727718">byte</span>&nbsp;<span class="op" id="4727723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4727726">if</span>&nbsp;<span class="ident" id="4727729"><a href="/regexp/regexp.go.html#4727705">n</a></span>&nbsp;<span class="op" id="4727731">&lt;</span>&nbsp;<span class="num" id="4727733">0</span>&nbsp;<span class="op" id="4727735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4727739"><a href="/regexp/regexp.go.html#4727705">n</a></span>&nbsp;<span class="op" id="4727741">=</span>&nbsp;<span class="builtinfunc" id="4727743">len</span><span class="op" id="4727746">(</span><span class="ident" id="4727747"><a href="/regexp/regexp.go.html#4727695">b</a></span><span class="op" id="4727748">)</span>&nbsp;<span class="op" id="4727750">+</span>&nbsp;<span class="num" id="4727752">1</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4727755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4727758">result</span>&nbsp;<span class="op" id="4727765">:=</span>&nbsp;<span class="builtinfunc" id="4727768">make</span><span class="op" id="4727772">(</span><span class="op" id="4727773">[</span><span class="op" id="4727774">]</span><span class="op" id="4727775">[</span><span class="op" id="4727776">]</span><span class="op" id="4727777">[</span><span class="op" id="4727778">]</span><span class="builtintype" id="4727779">byte</span><span class="op" id="4727783">,</span>&nbsp;<span class="num" id="4727785">0</span><span class="op" id="4727786">,</span>&nbsp;<span class="ident" id="4727788"><a href="/regexp/regexp.go.html#4725324">startSize</a></span><span class="op" id="4727797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4727800"><a href="/regexp/regexp.go.html#4727667">re</a></span><span class="op" id="4727802">.</span><span class="ident" id="4727803">allMatches</span><span class="op" id="4727813">(</span><span class="string" id="4727814">&#34;&#34;</span><span class="op" id="4727816">,</span>&nbsp;<span class="ident" id="4727818"><a href="/regexp/regexp.go.html#4727695">b</a></span><span class="op" id="4727819">,</span>&nbsp;<span class="ident" id="4727821"><a href="/regexp/regexp.go.html#4727705">n</a></span><span class="op" id="4727822">,</span>&nbsp;<span class="keyword" id="4727824">func</span><span class="op" id="4727828">(</span><span class="ident" id="4727829">match</span>&nbsp;<span class="op" id="4727835">[</span><span class="op" id="4727836">]</span><span class="builtintype" id="4727837">int</span><span class="op" id="4727840">)</span>&nbsp;<span class="op" id="4727842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4727846">slice</span>&nbsp;<span class="op" id="4727852">:=</span>&nbsp;<span class="builtinfunc" id="4727855">make</span><span class="op" id="4727859">(</span><span class="op" id="4727860">[</span><span class="op" id="4727861">]</span><span class="op" id="4727862">[</span><span class="op" id="4727863">]</span><span class="builtintype" id="4727864">byte</span><span class="op" id="4727868">,</span>&nbsp;<span class="builtinfunc" id="4727870">len</span><span class="op" id="4727873">(</span><span class="ident" id="4727874"><a href="/regexp/regexp.go.html#4727829">match</a></span><span class="op" id="4727879">)</span><span class="op" id="4727880">/</span><span class="num" id="4727881">2</span><span class="op" id="4727882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4727886">for</span>&nbsp;<span class="ident" id="4727890">j</span>&nbsp;<span class="op" id="4727892">:=</span>&nbsp;<span class="keyword" id="4727895">range</span>&nbsp;<span class="ident" id="4727901"><a href="/regexp/regexp.go.html#4727846">slice</a></span>&nbsp;<span class="op" id="4727907">{</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4727912">if</span>&nbsp;<span class="ident" id="4727915"><a href="/regexp/regexp.go.html#4727829">match</a></span><span class="op" id="4727920">[</span><span class="num" id="4727921">2</span><span class="op" id="4727922">*</span><span class="ident" id="4727923"><a href="/regexp/regexp.go.html#4727890">j</a></span><span class="op" id="4727924">]</span>&nbsp;<span class="op" id="4727926">&gt;=</span>&nbsp;<span class="num" id="4727929">0</span>&nbsp;<span class="op" id="4727931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4727937"><a href="/regexp/regexp.go.html#4727846">slice</a></span><span class="op" id="4727942">[</span><span class="ident" id="4727943"><a href="/regexp/regexp.go.html#4727890">j</a></span><span class="op" id="4727944">]</span>&nbsp;<span class="op" id="4727946">=</span>&nbsp;<span class="ident" id="4727948"><a href="/regexp/regexp.go.html#4727695">b</a></span><span class="op" id="4727949">[</span><span class="ident" id="4727950"><a href="/regexp/regexp.go.html#4727829">match</a></span><span class="op" id="4727955">[</span><span class="num" id="4727956">2</span><span class="op" id="4727957">*</span><span class="ident" id="4727958"><a href="/regexp/regexp.go.html#4727890">j</a></span><span class="op" id="4727959">]</span><span class="op" id="4727960">:</span><span class="ident" id="4727961"><a href="/regexp/regexp.go.html#4727829">match</a></span><span class="op" id="4727966">[</span><span class="num" id="4727967">2</span><span class="op" id="4727968">*</span><span class="ident" id="4727969"><a href="/regexp/regexp.go.html#4727890">j</a></span><span class="op" id="4727970">+</span><span class="num" id="4727971">1</span><span class="op" id="4727972">]</span><span class="op" id="4727973">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4727978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4727982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4727986"><a href="/regexp/regexp.go.html#4727758">result</a></span>&nbsp;<span class="op" id="4727993">=</span>&nbsp;<span class="builtinfunc" id="4727995">append</span><span class="op" id="4728001">(</span><span class="ident" id="4728002"><a href="/regexp/regexp.go.html#4727758">result</a></span><span class="op" id="4728008">,</span>&nbsp;<span class="ident" id="4728010"><a href="/regexp/regexp.go.html#4727846">slice</a></span><span class="op" id="4728015">)</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4728018">}</span><span class="op" id="4728019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4728022">if</span>&nbsp;<span class="builtinfunc" id="4728025">len</span><span class="op" id="4728028">(</span><span class="ident" id="4728029"><a href="/regexp/regexp.go.html#4727758">result</a></span><span class="op" id="4728035">)</span>&nbsp;<span class="op" id="4728037">==</span>&nbsp;<span class="num" id="4728040">0</span>&nbsp;<span class="op" id="4728042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4728046">return</span>&nbsp;<span class="ident" id="4728053">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4728058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4728061">return</span>&nbsp;<span class="ident" id="4728068"><a href="/regexp/regexp.go.html#4727758">result</a></span><br>
<span class="lineno">1010</span><span class="op" id="4728075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4728078">//&nbsp;FindAllSubmatchIndex&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindSubmatchIndex;&nbsp;it&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="4728156">//&nbsp;a&nbsp;slice&nbsp;of&nbsp;all&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4728230">//&nbsp;&#39;All&#39;&nbsp;description&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno">1015</span><span class="comment" id="4728275">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="4728320">func</span>&nbsp;<span class="op" id="4728325">(</span><span class="ident" id="4728326">re</span>&nbsp;<span class="op" id="4728329">*</span><span class="ident" id="4728330"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4728336">)</span>&nbsp;<span class="ident" id="4728338">FindAllSubmatchIndex</span><span class="op" id="4728358">(</span><span class="ident" id="4728359">b</span>&nbsp;<span class="op" id="4728361">[</span><span class="op" id="4728362">]</span><span class="builtintype" id="4728363">byte</span><span class="op" id="4728367">,</span>&nbsp;<span class="ident" id="4728369">n</span>&nbsp;<span class="builtintype" id="4728371">int</span><span class="op" id="4728374">)</span>&nbsp;<span class="op" id="4728376">[</span><span class="op" id="4728377">]</span><span class="op" id="4728378">[</span><span class="op" id="4728379">]</span><span class="builtintype" id="4728380">int</span>&nbsp;<span class="op" id="4728384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4728387">if</span>&nbsp;<span class="ident" id="4728390"><a href="/regexp/regexp.go.html#4728369">n</a></span>&nbsp;<span class="op" id="4728392">&lt;</span>&nbsp;<span class="num" id="4728394">0</span>&nbsp;<span class="op" id="4728396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4728400"><a href="/regexp/regexp.go.html#4728369">n</a></span>&nbsp;<span class="op" id="4728402">=</span>&nbsp;<span class="builtinfunc" id="4728404">len</span><span class="op" id="4728407">(</span><span class="ident" id="4728408"><a href="/regexp/regexp.go.html#4728359">b</a></span><span class="op" id="4728409">)</span>&nbsp;<span class="op" id="4728411">+</span>&nbsp;<span class="num" id="4728413">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4728416">}</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4728419">result</span>&nbsp;<span class="op" id="4728426">:=</span>&nbsp;<span class="builtinfunc" id="4728429">make</span><span class="op" id="4728433">(</span><span class="op" id="4728434">[</span><span class="op" id="4728435">]</span><span class="op" id="4728436">[</span><span class="op" id="4728437">]</span><span class="builtintype" id="4728438">int</span><span class="op" id="4728441">,</span>&nbsp;<span class="num" id="4728443">0</span><span class="op" id="4728444">,</span>&nbsp;<span class="ident" id="4728446"><a href="/regexp/regexp.go.html#4725324">startSize</a></span><span class="op" id="4728455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4728458"><a href="/regexp/regexp.go.html#4728326">re</a></span><span class="op" id="4728460">.</span><span class="ident" id="4728461">allMatches</span><span class="op" id="4728471">(</span><span class="string" id="4728472">&#34;&#34;</span><span class="op" id="4728474">,</span>&nbsp;<span class="ident" id="4728476"><a href="/regexp/regexp.go.html#4728359">b</a></span><span class="op" id="4728477">,</span>&nbsp;<span class="ident" id="4728479"><a href="/regexp/regexp.go.html#4728369">n</a></span><span class="op" id="4728480">,</span>&nbsp;<span class="keyword" id="4728482">func</span><span class="op" id="4728486">(</span><span class="ident" id="4728487">match</span>&nbsp;<span class="op" id="4728493">[</span><span class="op" id="4728494">]</span><span class="builtintype" id="4728495">int</span><span class="op" id="4728498">)</span>&nbsp;<span class="op" id="4728500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4728504"><a href="/regexp/regexp.go.html#4728419">result</a></span>&nbsp;<span class="op" id="4728511">=</span>&nbsp;<span class="builtinfunc" id="4728513">append</span><span class="op" id="4728519">(</span><span class="ident" id="4728520"><a href="/regexp/regexp.go.html#4728419">result</a></span><span class="op" id="4728526">,</span>&nbsp;<span class="ident" id="4728528"><a href="/regexp/regexp.go.html#4728487">match</a></span><span class="op" id="4728533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4728536">}</span><span class="op" id="4728537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4728540">if</span>&nbsp;<span class="builtinfunc" id="4728543">len</span><span class="op" id="4728546">(</span><span class="ident" id="4728547"><a href="/regexp/regexp.go.html#4728419">result</a></span><span class="op" id="4728553">)</span>&nbsp;<span class="op" id="4728555">==</span>&nbsp;<span class="num" id="4728558">0</span>&nbsp;<span class="op" id="4728560">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4728564">return</span>&nbsp;<span class="ident" id="4728571">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4728576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4728579">return</span>&nbsp;<span class="ident" id="4728586"><a href="/regexp/regexp.go.html#4728419">result</a></span><br>
<span class="lineno"></span><span class="op" id="4728593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1030</span><span class="comment" id="4728596">//&nbsp;FindAllStringSubmatch&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindStringSubmatch;&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="4728668">//&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;all&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="4728746">//&nbsp;the&nbsp;&#39;All&#39;&nbsp;description&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="4728795">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="4728840">func</span>&nbsp;<span class="op" id="4728845">(</span><span class="ident" id="4728846">re</span>&nbsp;<span class="op" id="4728849">*</span><span class="ident" id="4728850"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4728856">)</span>&nbsp;<span class="ident" id="4728858">FindAllStringSubmatch</span><span class="op" id="4728879">(</span><span class="ident" id="4728880">s</span>&nbsp;<span class="builtintype" id="4728882">string</span><span class="op" id="4728888">,</span>&nbsp;<span class="ident" id="4728890">n</span>&nbsp;<span class="builtintype" id="4728892">int</span><span class="op" id="4728895">)</span>&nbsp;<span class="op" id="4728897">[</span><span class="op" id="4728898">]</span><span class="op" id="4728899">[</span><span class="op" id="4728900">]</span><span class="builtintype" id="4728901">string</span>&nbsp;<span class="op" id="4728908">{</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4728911">if</span>&nbsp;<span class="ident" id="4728914"><a href="/regexp/regexp.go.html#4728890">n</a></span>&nbsp;<span class="op" id="4728916">&lt;</span>&nbsp;<span class="num" id="4728918">0</span>&nbsp;<span class="op" id="4728920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4728924"><a href="/regexp/regexp.go.html#4728890">n</a></span>&nbsp;<span class="op" id="4728926">=</span>&nbsp;<span class="builtinfunc" id="4728928">len</span><span class="op" id="4728931">(</span><span class="ident" id="4728932"><a href="/regexp/regexp.go.html#4728880">s</a></span><span class="op" id="4728933">)</span>&nbsp;<span class="op" id="4728935">+</span>&nbsp;<span class="num" id="4728937">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4728940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4728943">result</span>&nbsp;<span class="op" id="4728950">:=</span>&nbsp;<span class="builtinfunc" id="4728953">make</span><span class="op" id="4728957">(</span><span class="op" id="4728958">[</span><span class="op" id="4728959">]</span><span class="op" id="4728960">[</span><span class="op" id="4728961">]</span><span class="builtintype" id="4728962">string</span><span class="op" id="4728968">,</span>&nbsp;<span class="num" id="4728970">0</span><span class="op" id="4728971">,</span>&nbsp;<span class="ident" id="4728973"><a href="/regexp/regexp.go.html#4725324">startSize</a></span><span class="op" id="4728982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4728985"><a href="/regexp/regexp.go.html#4728846">re</a></span><span class="op" id="4728987">.</span><span class="ident" id="4728988">allMatches</span><span class="op" id="4728998">(</span><span class="ident" id="4728999"><a href="/regexp/regexp.go.html#4728880">s</a></span><span class="op" id="4729000">,</span>&nbsp;<span class="ident" id="4729002">nil</span><span class="op" id="4729005">,</span>&nbsp;<span class="ident" id="4729007"><a href="/regexp/regexp.go.html#4728890">n</a></span><span class="op" id="4729008">,</span>&nbsp;<span class="keyword" id="4729010">func</span><span class="op" id="4729014">(</span><span class="ident" id="4729015">match</span>&nbsp;<span class="op" id="4729021">[</span><span class="op" id="4729022">]</span><span class="builtintype" id="4729023">int</span><span class="op" id="4729026">)</span>&nbsp;<span class="op" id="4729028">{</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4729032">slice</span>&nbsp;<span class="op" id="4729038">:=</span>&nbsp;<span class="builtinfunc" id="4729041">make</span><span class="op" id="4729045">(</span><span class="op" id="4729046">[</span><span class="op" id="4729047">]</span><span class="builtintype" id="4729048">string</span><span class="op" id="4729054">,</span>&nbsp;<span class="builtinfunc" id="4729056">len</span><span class="op" id="4729059">(</span><span class="ident" id="4729060"><a href="/regexp/regexp.go.html#4729015">match</a></span><span class="op" id="4729065">)</span><span class="op" id="4729066">/</span><span class="num" id="4729067">2</span><span class="op" id="4729068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4729072">for</span>&nbsp;<span class="ident" id="4729076">j</span>&nbsp;<span class="op" id="4729078">:=</span>&nbsp;<span class="keyword" id="4729081">range</span>&nbsp;<span class="ident" id="4729087"><a href="/regexp/regexp.go.html#4729032">slice</a></span>&nbsp;<span class="op" id="4729093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4729098">if</span>&nbsp;<span class="ident" id="4729101"><a href="/regexp/regexp.go.html#4729015">match</a></span><span class="op" id="4729106">[</span><span class="num" id="4729107">2</span><span class="op" id="4729108">*</span><span class="ident" id="4729109"><a href="/regexp/regexp.go.html#4729076">j</a></span><span class="op" id="4729110">]</span>&nbsp;<span class="op" id="4729112">&gt;=</span>&nbsp;<span class="num" id="4729115">0</span>&nbsp;<span class="op" id="4729117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4729123"><a href="/regexp/regexp.go.html#4729032">slice</a></span><span class="op" id="4729128">[</span><span class="ident" id="4729129"><a href="/regexp/regexp.go.html#4729076">j</a></span><span class="op" id="4729130">]</span>&nbsp;<span class="op" id="4729132">=</span>&nbsp;<span class="ident" id="4729134"><a href="/regexp/regexp.go.html#4728880">s</a></span><span class="op" id="4729135">[</span><span class="ident" id="4729136"><a href="/regexp/regexp.go.html#4729015">match</a></span><span class="op" id="4729141">[</span><span class="num" id="4729142">2</span><span class="op" id="4729143">*</span><span class="ident" id="4729144"><a href="/regexp/regexp.go.html#4729076">j</a></span><span class="op" id="4729145">]</span><span class="op" id="4729146">:</span><span class="ident" id="4729147"><a href="/regexp/regexp.go.html#4729015">match</a></span><span class="op" id="4729152">[</span><span class="num" id="4729153">2</span><span class="op" id="4729154">*</span><span class="ident" id="4729155"><a href="/regexp/regexp.go.html#4729076">j</a></span><span class="op" id="4729156">+</span><span class="num" id="4729157">1</span><span class="op" id="4729158">]</span><span class="op" id="4729159">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4729164">}</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4729168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4729172"><a href="/regexp/regexp.go.html#4728943">result</a></span>&nbsp;<span class="op" id="4729179">=</span>&nbsp;<span class="builtinfunc" id="4729181">append</span><span class="op" id="4729187">(</span><span class="ident" id="4729188"><a href="/regexp/regexp.go.html#4728943">result</a></span><span class="op" id="4729194">,</span>&nbsp;<span class="ident" id="4729196"><a href="/regexp/regexp.go.html#4729032">slice</a></span><span class="op" id="4729201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4729204">}</span><span class="op" id="4729205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4729208">if</span>&nbsp;<span class="builtinfunc" id="4729211">len</span><span class="op" id="4729214">(</span><span class="ident" id="4729215"><a href="/regexp/regexp.go.html#4728943">result</a></span><span class="op" id="4729221">)</span>&nbsp;<span class="op" id="4729223">==</span>&nbsp;<span class="num" id="4729226">0</span>&nbsp;<span class="op" id="4729228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4729232">return</span>&nbsp;<span class="ident" id="4729239">nil</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4729244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4729247">return</span>&nbsp;<span class="ident" id="4729254"><a href="/regexp/regexp.go.html#4728943">result</a></span><br>
<span class="lineno"></span><span class="op" id="4729261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4729264">//&nbsp;FindAllStringSubmatchIndex&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of</span><br>
<span class="lineno">1055</span><span class="comment" id="4729318">//&nbsp;FindStringSubmatchIndex;&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;all&nbsp;successive&nbsp;matches&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4729394">//&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;&nbsp;description&nbsp;in&nbsp;the&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="4729464">//&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="4729476">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="4729521">func</span>&nbsp;<span class="op" id="4729526">(</span><span class="ident" id="4729527">re</span>&nbsp;<span class="op" id="4729530">*</span><span class="ident" id="4729531"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4729537">)</span>&nbsp;<span class="ident" id="4729539">FindAllStringSubmatchIndex</span><span class="op" id="4729565">(</span><span class="ident" id="4729566">s</span>&nbsp;<span class="builtintype" id="4729568">string</span><span class="op" id="4729574">,</span>&nbsp;<span class="ident" id="4729576">n</span>&nbsp;<span class="builtintype" id="4729578">int</span><span class="op" id="4729581">)</span>&nbsp;<span class="op" id="4729583">[</span><span class="op" id="4729584">]</span><span class="op" id="4729585">[</span><span class="op" id="4729586">]</span><span class="builtintype" id="4729587">int</span>&nbsp;<span class="op" id="4729591">{</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4729594">if</span>&nbsp;<span class="ident" id="4729597"><a href="/regexp/regexp.go.html#4729576">n</a></span>&nbsp;<span class="op" id="4729599">&lt;</span>&nbsp;<span class="num" id="4729601">0</span>&nbsp;<span class="op" id="4729603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4729607"><a href="/regexp/regexp.go.html#4729576">n</a></span>&nbsp;<span class="op" id="4729609">=</span>&nbsp;<span class="builtinfunc" id="4729611">len</span><span class="op" id="4729614">(</span><span class="ident" id="4729615"><a href="/regexp/regexp.go.html#4729566">s</a></span><span class="op" id="4729616">)</span>&nbsp;<span class="op" id="4729618">+</span>&nbsp;<span class="num" id="4729620">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4729623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4729626">result</span>&nbsp;<span class="op" id="4729633">:=</span>&nbsp;<span class="builtinfunc" id="4729636">make</span><span class="op" id="4729640">(</span><span class="op" id="4729641">[</span><span class="op" id="4729642">]</span><span class="op" id="4729643">[</span><span class="op" id="4729644">]</span><span class="builtintype" id="4729645">int</span><span class="op" id="4729648">,</span>&nbsp;<span class="num" id="4729650">0</span><span class="op" id="4729651">,</span>&nbsp;<span class="ident" id="4729653"><a href="/regexp/regexp.go.html#4725324">startSize</a></span><span class="op" id="4729662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4729665"><a href="/regexp/regexp.go.html#4729527">re</a></span><span class="op" id="4729667">.</span><span class="ident" id="4729668">allMatches</span><span class="op" id="4729678">(</span><span class="ident" id="4729679"><a href="/regexp/regexp.go.html#4729566">s</a></span><span class="op" id="4729680">,</span>&nbsp;<span class="ident" id="4729682">nil</span><span class="op" id="4729685">,</span>&nbsp;<span class="ident" id="4729687"><a href="/regexp/regexp.go.html#4729576">n</a></span><span class="op" id="4729688">,</span>&nbsp;<span class="keyword" id="4729690">func</span><span class="op" id="4729694">(</span><span class="ident" id="4729695">match</span>&nbsp;<span class="op" id="4729701">[</span><span class="op" id="4729702">]</span><span class="builtintype" id="4729703">int</span><span class="op" id="4729706">)</span>&nbsp;<span class="op" id="4729708">{</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4729712"><a href="/regexp/regexp.go.html#4729626">result</a></span>&nbsp;<span class="op" id="4729719">=</span>&nbsp;<span class="builtinfunc" id="4729721">append</span><span class="op" id="4729727">(</span><span class="ident" id="4729728"><a href="/regexp/regexp.go.html#4729626">result</a></span><span class="op" id="4729734">,</span>&nbsp;<span class="ident" id="4729736"><a href="/regexp/regexp.go.html#4729695">match</a></span><span class="op" id="4729741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4729744">}</span><span class="op" id="4729745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4729748">if</span>&nbsp;<span class="builtinfunc" id="4729751">len</span><span class="op" id="4729754">(</span><span class="ident" id="4729755"><a href="/regexp/regexp.go.html#4729626">result</a></span><span class="op" id="4729761">)</span>&nbsp;<span class="op" id="4729763">==</span>&nbsp;<span class="num" id="4729766">0</span>&nbsp;<span class="op" id="4729768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4729772">return</span>&nbsp;<span class="ident" id="4729779">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4729784">}</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4729787">return</span>&nbsp;<span class="ident" id="4729794"><a href="/regexp/regexp.go.html#4729626">result</a></span><br>
<span class="lineno"></span><span class="op" id="4729801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4729804">//&nbsp;Split&nbsp;slices&nbsp;s&nbsp;into&nbsp;substrings&nbsp;separated&nbsp;by&nbsp;the&nbsp;expression&nbsp;and&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4729889">//&nbsp;the&nbsp;substrings&nbsp;between&nbsp;those&nbsp;expression&nbsp;matches.</span><br>
<span class="lineno">1075</span><span class="comment" id="4729941">//</span><br>
<span class="lineno"></span><span class="comment" id="4729944">//&nbsp;The&nbsp;slice&nbsp;returned&nbsp;by&nbsp;this&nbsp;method&nbsp;consists&nbsp;of&nbsp;all&nbsp;the&nbsp;substrings&nbsp;of&nbsp;s</span><br>
<span class="lineno"></span><span class="comment" id="4730017">//&nbsp;not&nbsp;contained&nbsp;in&nbsp;the&nbsp;slice&nbsp;returned&nbsp;by&nbsp;FindAllString.&nbsp;When&nbsp;called&nbsp;on&nbsp;an&nbsp;expression</span><br>
<span class="lineno"></span><span class="comment" id="4730103">//&nbsp;that&nbsp;contains&nbsp;no&nbsp;metacharacters,&nbsp;it&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;strings.SplitN.</span><br>
<span class="lineno"></span><span class="comment" id="4730175">//</span><br>
<span class="lineno">1080</span><span class="comment" id="4730178">//&nbsp;Example:</span><br>
<span class="lineno"></span><span class="comment" id="4730190">//&nbsp;&nbsp;&nbsp;s&nbsp;:=&nbsp;regexp.MustCompile(&#34;a*&#34;).Split(&#34;abaabaccadaaae&#34;,&nbsp;5)</span><br>
<span class="lineno"></span><span class="comment" id="4730252">//&nbsp;&nbsp;&nbsp;//&nbsp;s:&nbsp;[&#34;&#34;,&nbsp;&#34;b&#34;,&nbsp;&#34;b&#34;,&nbsp;&#34;c&#34;,&nbsp;&#34;cadaaae&#34;]</span><br>
<span class="lineno"></span><span class="comment" id="4730294">//</span><br>
<span class="lineno"></span><span class="comment" id="4730297">//&nbsp;The&nbsp;count&nbsp;determines&nbsp;the&nbsp;number&nbsp;of&nbsp;substrings&nbsp;to&nbsp;return:</span><br>
<span class="lineno">1085</span><span class="comment" id="4730357">//&nbsp;&nbsp;&nbsp;n&nbsp;&gt;&nbsp;0:&nbsp;at&nbsp;most&nbsp;n&nbsp;substrings;&nbsp;the&nbsp;last&nbsp;substring&nbsp;will&nbsp;be&nbsp;the&nbsp;unsplit&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="4730441">//&nbsp;&nbsp;&nbsp;n&nbsp;==&nbsp;0:&nbsp;the&nbsp;result&nbsp;is&nbsp;nil&nbsp;(zero&nbsp;substrings)</span><br>
<span class="lineno"></span><span class="comment" id="4730490">//&nbsp;&nbsp;&nbsp;n&nbsp;&lt;&nbsp;0:&nbsp;all&nbsp;substrings</span><br>
<span class="lineno"></span><span class="keyword" id="4730517">func</span>&nbsp;<span class="op" id="4730522">(</span><span class="ident" id="4730523">re</span>&nbsp;<span class="op" id="4730526">*</span><span class="ident" id="4730527"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4730533">)</span>&nbsp;<span class="ident" id="4730535">Split</span><span class="op" id="4730540">(</span><span class="ident" id="4730541">s</span>&nbsp;<span class="builtintype" id="4730543">string</span><span class="op" id="4730549">,</span>&nbsp;<span class="ident" id="4730551">n</span>&nbsp;<span class="builtintype" id="4730553">int</span><span class="op" id="4730556">)</span>&nbsp;<span class="op" id="4730558">[</span><span class="op" id="4730559">]</span><span class="builtintype" id="4730560">string</span>&nbsp;<span class="op" id="4730567">{</span><br>
<span class="lineno"></span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4730571">if</span>&nbsp;<span class="ident" id="4730574"><a href="/regexp/regexp.go.html#4730551">n</a></span>&nbsp;<span class="op" id="4730576">==</span>&nbsp;<span class="num" id="4730579">0</span>&nbsp;<span class="op" id="4730581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4730585">return</span>&nbsp;<span class="ident" id="4730592">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4730597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4730601">if</span>&nbsp;<span class="builtinfunc" id="4730604">len</span><span class="op" id="4730607">(</span><span class="ident" id="4730608"><a href="/regexp/regexp.go.html#4730523">re</a></span><span class="op" id="4730610">.</span><span class="ident" id="4730611">expr</span><span class="op" id="4730615">)</span>&nbsp;<span class="op" id="4730617">&gt;</span>&nbsp;<span class="num" id="4730619">0</span>&nbsp;<span class="op" id="4730621">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="4730624">len</span><span class="op" id="4730627">(</span><span class="ident" id="4730628"><a href="/regexp/regexp.go.html#4730541">s</a></span><span class="op" id="4730629">)</span>&nbsp;<span class="op" id="4730631">==</span>&nbsp;<span class="num" id="4730634">0</span>&nbsp;<span class="op" id="4730636">{</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4730640">return</span>&nbsp;<span class="op" id="4730647">[</span><span class="op" id="4730648">]</span><span class="builtintype" id="4730649">string</span><span class="op" id="4730655">{</span><span class="string" id="4730656">&#34;&#34;</span><span class="op" id="4730658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4730661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4730665">matches</span>&nbsp;<span class="op" id="4730673">:=</span>&nbsp;<span class="ident" id="4730676"><a href="/regexp/regexp.go.html#4730523">re</a></span><span class="op" id="4730678">.</span><span class="ident" id="4730679">FindAllStringIndex</span><span class="op" id="4730697">(</span><span class="ident" id="4730698"><a href="/regexp/regexp.go.html#4730541">s</a></span><span class="op" id="4730699">,</span>&nbsp;<span class="ident" id="4730701"><a href="/regexp/regexp.go.html#4730551">n</a></span><span class="op" id="4730702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4730705">strings</span>&nbsp;<span class="op" id="4730713">:=</span>&nbsp;<span class="builtinfunc" id="4730716">make</span><span class="op" id="4730720">(</span><span class="op" id="4730721">[</span><span class="op" id="4730722">]</span><span class="builtintype" id="4730723">string</span><span class="op" id="4730729">,</span>&nbsp;<span class="num" id="4730731">0</span><span class="op" id="4730732">,</span>&nbsp;<span class="builtinfunc" id="4730734">len</span><span class="op" id="4730737">(</span><span class="ident" id="4730738"><a href="/regexp/regexp.go.html#4730665">matches</a></span><span class="op" id="4730745">)</span><span class="op" id="4730746">)</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4730750">beg</span>&nbsp;<span class="op" id="4730754">:=</span>&nbsp;<span class="num" id="4730757">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4730760">end</span>&nbsp;<span class="op" id="4730764">:=</span>&nbsp;<span class="num" id="4730767">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4730770">for</span>&nbsp;<span class="ident" id="4730774">_</span><span class="op" id="4730775">,</span>&nbsp;<span class="ident" id="4730777">match</span>&nbsp;<span class="op" id="4730783">:=</span>&nbsp;<span class="keyword" id="4730786">range</span>&nbsp;<span class="ident" id="4730792"><a href="/regexp/regexp.go.html#4730665">matches</a></span>&nbsp;<span class="op" id="4730800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4730804">if</span>&nbsp;<span class="ident" id="4730807"><a href="/regexp/regexp.go.html#4730551">n</a></span>&nbsp;<span class="op" id="4730809">&gt;</span>&nbsp;<span class="num" id="4730811">0</span>&nbsp;<span class="op" id="4730813">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="4730816">len</span><span class="op" id="4730819">(</span><span class="ident" id="4730820"><a href="/regexp/regexp.go.html#4730705">strings</a></span><span class="op" id="4730827">)</span>&nbsp;<span class="op" id="4730829">&gt;=</span>&nbsp;<span class="ident" id="4730832"><a href="/regexp/regexp.go.html#4730551">n</a></span><span class="op" id="4730833">-</span><span class="num" id="4730834">1</span>&nbsp;<span class="op" id="4730836">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4730841">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4730849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4730854"><a href="/regexp/regexp.go.html#4730760">end</a></span>&nbsp;<span class="op" id="4730858">=</span>&nbsp;<span class="ident" id="4730860"><a href="/regexp/regexp.go.html#4730777">match</a></span><span class="op" id="4730865">[</span><span class="num" id="4730866">0</span><span class="op" id="4730867">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4730871">if</span>&nbsp;<span class="ident" id="4730874"><a href="/regexp/regexp.go.html#4730777">match</a></span><span class="op" id="4730879">[</span><span class="num" id="4730880">1</span><span class="op" id="4730881">]</span>&nbsp;<span class="op" id="4730883">!=</span>&nbsp;<span class="num" id="4730886">0</span>&nbsp;<span class="op" id="4730888">{</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4730893"><a href="/regexp/regexp.go.html#4730705">strings</a></span>&nbsp;<span class="op" id="4730901">=</span>&nbsp;<span class="builtinfunc" id="4730903">append</span><span class="op" id="4730909">(</span><span class="ident" id="4730910"><a href="/regexp/regexp.go.html#4730705">strings</a></span><span class="op" id="4730917">,</span>&nbsp;<span class="ident" id="4730919"><a href="/regexp/regexp.go.html#4730541">s</a></span><span class="op" id="4730920">[</span><span class="ident" id="4730921"><a href="/regexp/regexp.go.html#4730750">beg</a></span><span class="op" id="4730924">:</span><span class="ident" id="4730925"><a href="/regexp/regexp.go.html#4730760">end</a></span><span class="op" id="4730928">]</span><span class="op" id="4730929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4730933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4730937"><a href="/regexp/regexp.go.html#4730750">beg</a></span>&nbsp;<span class="op" id="4730941">=</span>&nbsp;<span class="ident" id="4730943"><a href="/regexp/regexp.go.html#4730777">match</a></span><span class="op" id="4730948">[</span><span class="num" id="4730949">1</span><span class="op" id="4730950">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4730953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4730957">if</span>&nbsp;<span class="ident" id="4730960"><a href="/regexp/regexp.go.html#4730760">end</a></span>&nbsp;<span class="op" id="4730964">!=</span>&nbsp;<span class="builtinfunc" id="4730967">len</span><span class="op" id="4730970">(</span><span class="ident" id="4730971"><a href="/regexp/regexp.go.html#4730541">s</a></span><span class="op" id="4730972">)</span>&nbsp;<span class="op" id="4730974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4730978"><a href="/regexp/regexp.go.html#4730705">strings</a></span>&nbsp;<span class="op" id="4730986">=</span>&nbsp;<span class="builtinfunc" id="4730988">append</span><span class="op" id="4730994">(</span><span class="ident" id="4730995"><a href="/regexp/regexp.go.html#4730705">strings</a></span><span class="op" id="4731002">,</span>&nbsp;<span class="ident" id="4731004"><a href="/regexp/regexp.go.html#4730541">s</a></span><span class="op" id="4731005">[</span><span class="ident" id="4731006"><a href="/regexp/regexp.go.html#4730750">beg</a></span><span class="op" id="4731009">:</span><span class="op" id="4731010">]</span><span class="op" id="4731011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4731014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4731018">return</span>&nbsp;<span class="ident" id="4731025"><a href="/regexp/regexp.go.html#4730705">strings</a></span><br>
<span class="lineno">1120</span><span class="op" id="4731033">}</span>
</div>
</body>
</html>
