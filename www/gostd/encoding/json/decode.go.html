<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4733818">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4733873">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4733927">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4733978">//&nbsp;Represents&nbsp;JSON&nbsp;data&nbsp;structure&nbsp;using&nbsp;native&nbsp;Go&nbsp;types:&nbsp;booleans,&nbsp;floats,</span><br>
<span class="lineno"></span><span class="comment" id="4734053">//&nbsp;strings,&nbsp;arrays,&nbsp;and&nbsp;maps.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4734084">package</span>&nbsp;<span class="ident" id="4734092">json</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="4734098">import</span>&nbsp;<span class="op" id="4734105">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4734108">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4734117">&#34;encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4734129">&#34;encoding/base64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4734148">&#34;errors&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4734158">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4734165">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4734176">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4734187">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4734198">&#34;unicode&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4734209">&#34;unicode/utf16&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4734226">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4734241">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4734244">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;JSON-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result</span><br>
<span class="lineno">25</span><span class="comment" id="4734308">//&nbsp;in&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="4734341">//</span><br>
<span class="lineno"></span><span class="comment" id="4734344">//&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;encodings&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4734396">//&nbsp;Marshal&nbsp;uses,&nbsp;allocating&nbsp;maps,&nbsp;slices,&nbsp;and&nbsp;pointers&nbsp;as&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="4734465">//&nbsp;with&nbsp;the&nbsp;following&nbsp;additional&nbsp;rules:</span><br>
<span class="lineno">30</span><span class="comment" id="4734505">//</span><br>
<span class="lineno"></span><span class="comment" id="4734508">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;pointer,&nbsp;Unmarshal&nbsp;first&nbsp;handles&nbsp;the&nbsp;case&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4734581">//&nbsp;the&nbsp;JSON&nbsp;being&nbsp;the&nbsp;JSON&nbsp;literal&nbsp;null.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;Unmarshal&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="4734652">//&nbsp;the&nbsp;pointer&nbsp;to&nbsp;nil.&nbsp;&nbsp;Otherwise,&nbsp;Unmarshal&nbsp;unmarshals&nbsp;the&nbsp;JSON&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="4734722">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;at&nbsp;by&nbsp;the&nbsp;pointer.&nbsp;&nbsp;If&nbsp;the&nbsp;pointer&nbsp;is&nbsp;nil,&nbsp;Unmarshal</span><br>
<span class="lineno">35</span><span class="comment" id="4734796">//&nbsp;allocates&nbsp;a&nbsp;new&nbsp;value&nbsp;for&nbsp;it&nbsp;to&nbsp;point&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="4734841">//</span><br>
<span class="lineno"></span><span class="comment" id="4734844">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;struct,&nbsp;Unmarshal&nbsp;matches&nbsp;incoming&nbsp;object</span><br>
<span class="lineno"></span><span class="comment" id="4734914">//&nbsp;keys&nbsp;to&nbsp;the&nbsp;keys&nbsp;used&nbsp;by&nbsp;Marshal&nbsp;(either&nbsp;the&nbsp;struct&nbsp;field&nbsp;name&nbsp;or&nbsp;its&nbsp;tag),</span><br>
<span class="lineno"></span><span class="comment" id="4734993">//&nbsp;preferring&nbsp;an&nbsp;exact&nbsp;match&nbsp;but&nbsp;also&nbsp;accepting&nbsp;a&nbsp;case-insensitive&nbsp;match.</span><br>
<span class="lineno">40</span><span class="comment" id="4735067">//</span><br>
<span class="lineno"></span><span class="comment" id="4735070">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;an&nbsp;interface&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="4735116">//&nbsp;Unmarshal&nbsp;stores&nbsp;one&nbsp;of&nbsp;these&nbsp;in&nbsp;the&nbsp;interface&nbsp;value:</span><br>
<span class="lineno"></span><span class="comment" id="4735173">//</span><br>
<span class="lineno"></span><span class="comment" id="4735176">//&nbsp;&nbsp;&nbsp;&nbspbool,&nbsp;for&nbsp;JSON&nbsp;booleans</span><br>
<span class="lineno">45</span><span class="comment" id="4735203">//&nbsp;&nbsp;&nbsp;&nbspfloat64,&nbsp;for&nbsp;JSON&nbsp;numbers</span><br>
<span class="lineno"></span><span class="comment" id="4735232">//&nbsp;&nbsp;&nbsp;&nbspstring,&nbsp;for&nbsp;JSON&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="4735260">//&nbsp;&nbsp;&nbsp;&nbsp[]interface{},&nbsp;for&nbsp;JSON&nbsp;arrays</span><br>
<span class="lineno"></span><span class="comment" id="4735294">//&nbsp;&nbsp;&nbsp;&nbspmap[string]interface{},&nbsp;for&nbsp;JSON&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="4735338">//&nbsp;&nbsp;&nbsp;&nbspnil&nbsp;for&nbsp;JSON&nbsp;null</span><br>
<span class="lineno">50</span><span class="comment" id="4735359">//</span><br>
<span class="lineno"></span><span class="comment" id="4735362">//&nbsp;If&nbsp;a&nbsp;JSON&nbsp;value&nbsp;is&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;given&nbsp;target&nbsp;type,</span><br>
<span class="lineno"></span><span class="comment" id="4735425">//&nbsp;or&nbsp;if&nbsp;a&nbsp;JSON&nbsp;number&nbsp;overflows&nbsp;the&nbsp;target&nbsp;type,&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="4735485">//&nbsp;skips&nbsp;that&nbsp;field&nbsp;and&nbsp;completes&nbsp;the&nbsp;unmarshalling&nbsp;as&nbsp;best&nbsp;it&nbsp;can.</span><br>
<span class="lineno"></span><span class="comment" id="4735553">//&nbsp;If&nbsp;no&nbsp;more&nbsp;serious&nbsp;errors&nbsp;are&nbsp;encountered,&nbsp;Unmarshal&nbsp;returns</span><br>
<span class="lineno">55</span><span class="comment" id="4735617">//&nbsp;an&nbsp;UnmarshalTypeError&nbsp;describing&nbsp;the&nbsp;earliest&nbsp;such&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="4735678">//</span><br>
<span class="lineno"></span><span class="comment" id="4735681">//&nbsp;The&nbsp;JSON&nbsp;null&nbsp;value&nbsp;unmarshals&nbsp;into&nbsp;an&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice</span><br>
<span class="lineno"></span><span class="comment" id="4735757">//&nbsp;by&nbsp;setting&nbsp;that&nbsp;Go&nbsp;value&nbsp;to&nbsp;nil.&nbsp;Because&nbsp;null&nbsp;is&nbsp;often&nbsp;used&nbsp;in&nbsp;JSON&nbsp;to&nbsp;mean</span><br>
<span class="lineno"></span><span class="comment" id="4735836">//&nbsp;``not&nbsp;present,&#39;&#39;&nbsp;unmarshaling&nbsp;a&nbsp;JSON&nbsp;null&nbsp;into&nbsp;any&nbsp;other&nbsp;Go&nbsp;type&nbsp;has&nbsp;no&nbsp;effect</span><br>
<span class="lineno">60</span><span class="comment" id="4735918">//&nbsp;on&nbsp;the&nbsp;value&nbsp;and&nbsp;produces&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="4735957">//</span><br>
<span class="lineno"></span><span class="comment" id="4735960">//&nbsp;When&nbsp;unmarshaling&nbsp;quoted&nbsp;strings,&nbsp;invalid&nbsp;UTF-8&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="4736014">//&nbsp;invalid&nbsp;UTF-16&nbsp;surrogate&nbsp;pairs&nbsp;are&nbsp;not&nbsp;treated&nbsp;as&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="4736077">//&nbsp;Instead,&nbsp;they&nbsp;are&nbsp;replaced&nbsp;by&nbsp;the&nbsp;Unicode&nbsp;replacement</span><br>
<span class="lineno">65</span><span class="comment" id="4736134">//&nbsp;character&nbsp;U+FFFD.</span><br>
<span class="lineno"></span><span class="comment" id="4736155">//</span><br>
<span class="lineno"></span><span class="keyword" id="4736158">func</span>&nbsp;<span class="ident" id="4736163">Unmarshal</span><span class="op" id="4736172">(</span><span class="ident" id="4736173">data</span>&nbsp;<span class="op" id="4736178">[</span><span class="op" id="4736179">]</span><span class="builtintype" id="4736180">byte</span><span class="op" id="4736184">,</span>&nbsp;<span class="ident" id="4736186">v</span>&nbsp;<span class="keyword" id="4736188">interface</span><span class="op" id="4736197">{</span><span class="op" id="4736198">}</span><span class="op" id="4736199">)</span>&nbsp;<span class="builtintype" id="4736201">error</span>&nbsp;<span class="op" id="4736207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4736210">//&nbsp;Check&nbsp;for&nbsp;well-formedness.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4736241">//&nbsp;Avoids&nbsp;filling&nbsp;out&nbsp;half&nbsp;a&nbsp;data&nbsp;structure</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4736286">//&nbsp;before&nbsp;discovering&nbsp;a&nbsp;JSON&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4736330">var</span>&nbsp;<span class="ident" id="4736334">d</span>&nbsp;<span class="ident" id="4736336">decodeState</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736349">err</span>&nbsp;<span class="op" id="4736353">:=</span>&nbsp;<span class="ident" id="4736356">checkValid</span><span class="op" id="4736366">(</span><span class="ident" id="4736367">data</span><span class="op" id="4736371">,</span>&nbsp;<span class="op" id="4736373">&amp;</span><span class="ident" id="4736374">d</span><span class="op" id="4736375">.</span><span class="ident" id="4736376">scan</span><span class="op" id="4736380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4736383">if</span>&nbsp;<span class="ident" id="4736386">err</span>&nbsp;<span class="op" id="4736390">!=</span>&nbsp;<span class="ident" id="4736393">nil</span>&nbsp;<span class="op" id="4736397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4736401">return</span>&nbsp;<span class="ident" id="4736408">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4736413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736417">d</span><span class="op" id="4736418">.</span><span class="ident" id="4736419">init</span><span class="op" id="4736423">(</span><span class="ident" id="4736424">data</span><span class="op" id="4736428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4736431">return</span>&nbsp;<span class="ident" id="4736438">d</span><span class="op" id="4736439">.</span><span class="ident" id="4736440">unmarshal</span><span class="op" id="4736449">(</span><span class="ident" id="4736450">v</span><span class="op" id="4736451">)</span><br>
<span class="lineno"></span><span class="op" id="4736453">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="4736456">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="4736511">//&nbsp;that&nbsp;can&nbsp;unmarshal&nbsp;a&nbsp;JSON&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="4736567">//&nbsp;The&nbsp;input&nbsp;can&nbsp;be&nbsp;assumed&nbsp;to&nbsp;be&nbsp;a&nbsp;valid&nbsp;encoding&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4736621">//&nbsp;a&nbsp;JSON&nbsp;value.&nbsp;UnmarshalJSON&nbsp;must&nbsp;copy&nbsp;the&nbsp;JSON&nbsp;data</span><br>
<span class="lineno">85</span><span class="comment" id="4736676">//&nbsp;if&nbsp;it&nbsp;wishes&nbsp;to&nbsp;retain&nbsp;the&nbsp;data&nbsp;after&nbsp;returning.</span><br>
<span class="lineno"></span><span class="keyword" id="4736728">type</span>&nbsp;<span class="ident" id="4736733">Unmarshaler</span>&nbsp;<span class="keyword" id="4736745">interface</span>&nbsp;<span class="op" id="4736755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736758">UnmarshalJSON</span><span class="op" id="4736771">(</span><span class="op" id="4736772">[</span><span class="op" id="4736773">]</span><span class="builtintype" id="4736774">byte</span><span class="op" id="4736778">)</span>&nbsp;<span class="builtintype" id="4736780">error</span><br>
<span class="lineno"></span><span class="op" id="4736786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="4736789">//&nbsp;An&nbsp;UnmarshalTypeError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;that&nbsp;was</span><br>
<span class="lineno"></span><span class="comment" id="4736846">//&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;value&nbsp;of&nbsp;a&nbsp;specific&nbsp;Go&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="4736900">type</span>&nbsp;<span class="ident" id="4736905">UnmarshalTypeError</span>&nbsp;<span class="keyword" id="4736924">struct</span>&nbsp;<span class="op" id="4736931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736934">Value</span>&nbsp;<span class="builtintype" id="4736940">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4736953">//&nbsp;description&nbsp;of&nbsp;JSON&nbsp;value&nbsp;-&nbsp;&#34;bool&#34;,&nbsp;&#34;array&#34;,&nbsp;&#34;number&nbsp;-5&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4737014">Type</span>&nbsp;&nbsp;<span class="ident" id="4737020">reflect</span><span class="op" id="4737027">.</span><span class="ident" id="4737028">Type</span>&nbsp;<span class="comment" id="4737033">//&nbsp;type&nbsp;of&nbsp;Go&nbsp;value&nbsp;it&nbsp;could&nbsp;not&nbsp;be&nbsp;assigned&nbsp;to</span><br>
<span class="lineno">95</span><span class="op" id="4737081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4737084">func</span>&nbsp;<span class="op" id="4737089">(</span><span class="ident" id="4737090">e</span>&nbsp;<span class="op" id="4737092">*</span><span class="ident" id="4737093">UnmarshalTypeError</span><span class="op" id="4737111">)</span>&nbsp;<span class="ident" id="4737113">Error</span><span class="op" id="4737118">(</span><span class="op" id="4737119">)</span>&nbsp;<span class="builtintype" id="4737121">string</span>&nbsp;<span class="op" id="4737128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4737131">return</span>&nbsp;<span class="string" id="4737138">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;&#34;</span>&nbsp;<span class="op" id="4737164">+</span>&nbsp;<span class="ident" id="4737166">e</span><span class="op" id="4737167">.</span><span class="ident" id="4737168">Value</span>&nbsp;<span class="op" id="4737174">+</span>&nbsp;<span class="string" id="4737176">&#34;&nbsp;into&nbsp;Go&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="4737202">+</span>&nbsp;<span class="ident" id="4737204">e</span><span class="op" id="4737205">.</span><span class="ident" id="4737206">Type</span><span class="op" id="4737210">.</span><span class="ident" id="4737211">String</span><span class="op" id="4737217">(</span><span class="op" id="4737218">)</span><br>
<span class="lineno"></span><span class="op" id="4737220">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="4737223">//&nbsp;An&nbsp;UnmarshalFieldError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;object&nbsp;key&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4737282">//&nbsp;led&nbsp;to&nbsp;an&nbsp;unexported&nbsp;(and&nbsp;therefore&nbsp;unwritable)&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="4737347">//&nbsp;(No&nbsp;longer&nbsp;used;&nbsp;kept&nbsp;for&nbsp;compatibility.)</span><br>
<span class="lineno"></span><span class="keyword" id="4737392">type</span>&nbsp;<span class="ident" id="4737397">UnmarshalFieldError</span>&nbsp;<span class="keyword" id="4737417">struct</span>&nbsp;<span class="op" id="4737424">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4737427">Key</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4737433">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4737441">Type</span>&nbsp;&nbsp;<span class="ident" id="4737447">reflect</span><span class="op" id="4737454">.</span><span class="ident" id="4737455">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4737461">Field</span>&nbsp;<span class="ident" id="4737467">reflect</span><span class="op" id="4737474">.</span><span class="ident" id="4737475">StructField</span><br>
<span class="lineno"></span><span class="op" id="4737487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="4737490">func</span>&nbsp;<span class="op" id="4737495">(</span><span class="ident" id="4737496">e</span>&nbsp;<span class="op" id="4737498">*</span><span class="ident" id="4737499">UnmarshalFieldError</span><span class="op" id="4737518">)</span>&nbsp;<span class="ident" id="4737520">Error</span><span class="op" id="4737525">(</span><span class="op" id="4737526">)</span>&nbsp;<span class="builtintype" id="4737528">string</span>&nbsp;<span class="op" id="4737535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4737538">return</span>&nbsp;<span class="string" id="4737545">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;object&nbsp;key&nbsp;&#34;</span>&nbsp;<span class="op" id="4737582">+</span>&nbsp;<span class="ident" id="4737584">strconv</span><span class="op" id="4737591">.</span><span class="ident" id="4737592">Quote</span><span class="op" id="4737597">(</span><span class="ident" id="4737598">e</span><span class="op" id="4737599">.</span><span class="ident" id="4737600">Key</span><span class="op" id="4737603">)</span>&nbsp;<span class="op" id="4737605">+</span>&nbsp;<span class="string" id="4737607">&#34;&nbsp;into&nbsp;unexported&nbsp;field&nbsp;&#34;</span>&nbsp;<span class="op" id="4737633">+</span>&nbsp;<span class="ident" id="4737635">e</span><span class="op" id="4737636">.</span><span class="ident" id="4737637">Field</span><span class="op" id="4737642">.</span><span class="ident" id="4737643">Name</span>&nbsp;<span class="op" id="4737648">+</span>&nbsp;<span class="string" id="4737650">&#34;&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="4737662">+</span>&nbsp;<span class="ident" id="4737664">e</span><span class="op" id="4737665">.</span><span class="ident" id="4737666">Type</span><span class="op" id="4737670">.</span><span class="ident" id="4737671">String</span><span class="op" id="4737677">(</span><span class="op" id="4737678">)</span><br>
<span class="lineno"></span><span class="op" id="4737680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4737683">//&nbsp;An&nbsp;InvalidUnmarshalError&nbsp;describes&nbsp;an&nbsp;invalid&nbsp;argument&nbsp;passed&nbsp;to&nbsp;Unmarshal.</span><br>
<span class="lineno">115</span><span class="comment" id="4737762">//&nbsp;(The&nbsp;argument&nbsp;to&nbsp;Unmarshal&nbsp;must&nbsp;be&nbsp;a&nbsp;non-nil&nbsp;pointer.)</span><br>
<span class="lineno"></span><span class="keyword" id="4737820">type</span>&nbsp;<span class="ident" id="4737825">InvalidUnmarshalError</span>&nbsp;<span class="keyword" id="4737847">struct</span>&nbsp;<span class="op" id="4737854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4737857">Type</span>&nbsp;<span class="ident" id="4737862">reflect</span><span class="op" id="4737869">.</span><span class="ident" id="4737870">Type</span><br>
<span class="lineno"></span><span class="op" id="4737875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="4737878">func</span>&nbsp;<span class="op" id="4737883">(</span><span class="ident" id="4737884">e</span>&nbsp;<span class="op" id="4737886">*</span><span class="ident" id="4737887">InvalidUnmarshalError</span><span class="op" id="4737908">)</span>&nbsp;<span class="ident" id="4737910">Error</span><span class="op" id="4737915">(</span><span class="op" id="4737916">)</span>&nbsp;<span class="builtintype" id="4737918">string</span>&nbsp;<span class="op" id="4737925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4737928">if</span>&nbsp;<span class="ident" id="4737931">e</span><span class="op" id="4737932">.</span><span class="ident" id="4737933">Type</span>&nbsp;<span class="op" id="4737938">==</span>&nbsp;<span class="ident" id="4737941">nil</span>&nbsp;<span class="op" id="4737945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4737949">return</span>&nbsp;<span class="string" id="4737956">&#34;json:&nbsp;Unmarshal(nil)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4737980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4737984">if</span>&nbsp;<span class="ident" id="4737987">e</span><span class="op" id="4737988">.</span><span class="ident" id="4737989">Type</span><span class="op" id="4737993">.</span><span class="ident" id="4737994">Kind</span><span class="op" id="4737998">(</span><span class="op" id="4737999">)</span>&nbsp;<span class="op" id="4738001">!=</span>&nbsp;<span class="ident" id="4738004">reflect</span><span class="op" id="4738011">.</span><span class="ident" id="4738012">Ptr</span>&nbsp;<span class="op" id="4738016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4738020">return</span>&nbsp;<span class="string" id="4738027">&#34;json:&nbsp;Unmarshal(non-pointer&nbsp;&#34;</span>&nbsp;<span class="op" id="4738058">+</span>&nbsp;<span class="ident" id="4738060">e</span><span class="op" id="4738061">.</span><span class="ident" id="4738062">Type</span><span class="op" id="4738066">.</span><span class="ident" id="4738067">String</span><span class="op" id="4738073">(</span><span class="op" id="4738074">)</span>&nbsp;<span class="op" id="4738076">+</span>&nbsp;<span class="string" id="4738078">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4738083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4738086">return</span>&nbsp;<span class="string" id="4738093">&#34;json:&nbsp;Unmarshal(nil&nbsp;&#34;</span>&nbsp;<span class="op" id="4738116">+</span>&nbsp;<span class="ident" id="4738118">e</span><span class="op" id="4738119">.</span><span class="ident" id="4738120">Type</span><span class="op" id="4738124">.</span><span class="ident" id="4738125">String</span><span class="op" id="4738131">(</span><span class="op" id="4738132">)</span>&nbsp;<span class="op" id="4738134">+</span>&nbsp;<span class="string" id="4738136">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="4738140">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="4738143">func</span>&nbsp;<span class="op" id="4738148">(</span><span class="ident" id="4738149">d</span>&nbsp;<span class="op" id="4738151">*</span><span class="ident" id="4738152">decodeState</span><span class="op" id="4738163">)</span>&nbsp;<span class="ident" id="4738165">unmarshal</span><span class="op" id="4738174">(</span><span class="ident" id="4738175">v</span>&nbsp;<span class="keyword" id="4738177">interface</span><span class="op" id="4738186">{</span><span class="op" id="4738187">}</span><span class="op" id="4738188">)</span>&nbsp;<span class="op" id="4738190">(</span><span class="ident" id="4738191">err</span>&nbsp;<span class="builtintype" id="4738195">error</span><span class="op" id="4738200">)</span>&nbsp;<span class="op" id="4738202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4738205">defer</span>&nbsp;<span class="keyword" id="4738211">func</span><span class="op" id="4738215">(</span><span class="op" id="4738216">)</span>&nbsp;<span class="op" id="4738218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4738222">if</span>&nbsp;<span class="ident" id="4738225">r</span>&nbsp;<span class="op" id="4738227">:=</span>&nbsp;<span class="builtinfunc" id="4738230">recover</span><span class="op" id="4738237">(</span><span class="op" id="4738238">)</span><span class="op" id="4738239">;</span>&nbsp;<span class="ident" id="4738241">r</span>&nbsp;<span class="op" id="4738243">!=</span>&nbsp;<span class="ident" id="4738246">nil</span>&nbsp;<span class="op" id="4738250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4738255">if</span>&nbsp;<span class="ident" id="4738258">_</span><span class="op" id="4738259">,</span>&nbsp;<span class="ident" id="4738261">ok</span>&nbsp;<span class="op" id="4738264">:=</span>&nbsp;<span class="ident" id="4738267">r</span><span class="op" id="4738268">.</span><span class="op" id="4738269">(</span><span class="ident" id="4738270">runtime</span><span class="op" id="4738277">.</span><span class="ident" id="4738278">Error</span><span class="op" id="4738283">)</span><span class="op" id="4738284">;</span>&nbsp;<span class="ident" id="4738286">ok</span>&nbsp;<span class="op" id="4738289">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4738295">panic</span><span class="op" id="4738300">(</span><span class="ident" id="4738301">r</span><span class="op" id="4738302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4738307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4738312">err</span>&nbsp;<span class="op" id="4738316">=</span>&nbsp;<span class="ident" id="4738318">r</span><span class="op" id="4738319">.</span><span class="op" id="4738320">(</span><span class="builtintype" id="4738321">error</span><span class="op" id="4738326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4738330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4738333">}</span><span class="op" id="4738334">(</span><span class="op" id="4738335">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4738339">rv</span>&nbsp;<span class="op" id="4738342">:=</span>&nbsp;<span class="ident" id="4738345">reflect</span><span class="op" id="4738352">.</span><span class="ident" id="4738353">ValueOf</span><span class="op" id="4738360">(</span><span class="ident" id="4738361">v</span><span class="op" id="4738362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4738365">if</span>&nbsp;<span class="ident" id="4738368">rv</span><span class="op" id="4738370">.</span><span class="ident" id="4738371">Kind</span><span class="op" id="4738375">(</span><span class="op" id="4738376">)</span>&nbsp;<span class="op" id="4738378">!=</span>&nbsp;<span class="ident" id="4738381">reflect</span><span class="op" id="4738388">.</span><span class="ident" id="4738389">Ptr</span>&nbsp;<span class="op" id="4738393">||</span>&nbsp;<span class="ident" id="4738396">rv</span><span class="op" id="4738398">.</span><span class="ident" id="4738399">IsNil</span><span class="op" id="4738404">(</span><span class="op" id="4738405">)</span>&nbsp;<span class="op" id="4738407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4738411">return</span>&nbsp;<span class="op" id="4738418">&amp;</span><span class="ident" id="4738419">InvalidUnmarshalError</span><span class="op" id="4738440">{</span><span class="ident" id="4738441">reflect</span><span class="op" id="4738448">.</span><span class="ident" id="4738449">TypeOf</span><span class="op" id="4738455">(</span><span class="ident" id="4738456">v</span><span class="op" id="4738457">)</span><span class="op" id="4738458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4738461">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4738465">d</span><span class="op" id="4738466">.</span><span class="ident" id="4738467">scan</span><span class="op" id="4738471">.</span><span class="ident" id="4738472">reset</span><span class="op" id="4738477">(</span><span class="op" id="4738478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4738481">//&nbsp;We&nbsp;decode&nbsp;rv&nbsp;not&nbsp;rv.Elem&nbsp;because&nbsp;the&nbsp;Unmarshaler&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4738544">//&nbsp;test&nbsp;must&nbsp;be&nbsp;applied&nbsp;at&nbsp;the&nbsp;top&nbsp;level&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4738600">d</span><span class="op" id="4738601">.</span><span class="ident" id="4738602">value</span><span class="op" id="4738607">(</span><span class="ident" id="4738608">rv</span><span class="op" id="4738610">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4738613">return</span>&nbsp;<span class="ident" id="4738620">d</span><span class="op" id="4738621">.</span><span class="ident" id="4738622">savedError</span><br>
<span class="lineno"></span><span class="op" id="4738633">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4738636">//&nbsp;A&nbsp;Number&nbsp;represents&nbsp;a&nbsp;JSON&nbsp;number&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="4738682">type</span>&nbsp;<span class="ident" id="4738687">Number</span>&nbsp;<span class="builtintype" id="4738694">string</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="4738702">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;literal&nbsp;text&nbsp;of&nbsp;the&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="4738752">func</span>&nbsp;<span class="op" id="4738757">(</span><span class="ident" id="4738758">n</span>&nbsp;<span class="ident" id="4738760">Number</span><span class="op" id="4738766">)</span>&nbsp;<span class="ident" id="4738768">String</span><span class="op" id="4738774">(</span><span class="op" id="4738775">)</span>&nbsp;<span class="builtintype" id="4738777">string</span>&nbsp;<span class="op" id="4738784">{</span>&nbsp;<span class="keyword" id="4738786">return</span>&nbsp;<span class="builtintype" id="4738793">string</span><span class="op" id="4738799">(</span><span class="ident" id="4738800">n</span><span class="op" id="4738801">)</span>&nbsp;<span class="op" id="4738803">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4738806">//&nbsp;Float64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno">160</span><span class="keyword" id="4738850">func</span>&nbsp;<span class="op" id="4738855">(</span><span class="ident" id="4738856">n</span>&nbsp;<span class="ident" id="4738858">Number</span><span class="op" id="4738864">)</span>&nbsp;<span class="ident" id="4738866">Float64</span><span class="op" id="4738873">(</span><span class="op" id="4738874">)</span>&nbsp;<span class="op" id="4738876">(</span><span class="builtintype" id="4738877">float64</span><span class="op" id="4738884">,</span>&nbsp;<span class="builtintype" id="4738886">error</span><span class="op" id="4738891">)</span>&nbsp;<span class="op" id="4738893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4738896">return</span>&nbsp;<span class="ident" id="4738903">strconv</span><span class="op" id="4738910">.</span><span class="ident" id="4738911">ParseFloat</span><span class="op" id="4738921">(</span><span class="builtintype" id="4738922">string</span><span class="op" id="4738928">(</span><span class="ident" id="4738929">n</span><span class="op" id="4738930">)</span><span class="op" id="4738931">,</span>&nbsp;<span class="num" id="4738933">64</span><span class="op" id="4738935">)</span><br>
<span class="lineno"></span><span class="op" id="4738937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4738940">//&nbsp;Int64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno">165</span><span class="keyword" id="4738981">func</span>&nbsp;<span class="op" id="4738986">(</span><span class="ident" id="4738987">n</span>&nbsp;<span class="ident" id="4738989">Number</span><span class="op" id="4738995">)</span>&nbsp;<span class="ident" id="4738997">Int64</span><span class="op" id="4739002">(</span><span class="op" id="4739003">)</span>&nbsp;<span class="op" id="4739005">(</span><span class="ident" id="4739006">int64</span><span class="op" id="4739011">,</span>&nbsp;<span class="builtintype" id="4739013">error</span><span class="op" id="4739018">)</span>&nbsp;<span class="op" id="4739020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4739023">return</span>&nbsp;<span class="ident" id="4739030">strconv</span><span class="op" id="4739037">.</span><span class="ident" id="4739038">ParseInt</span><span class="op" id="4739046">(</span><span class="builtintype" id="4739047">string</span><span class="op" id="4739053">(</span><span class="ident" id="4739054">n</span><span class="op" id="4739055">)</span><span class="op" id="4739056">,</span>&nbsp;<span class="num" id="4739058">10</span><span class="op" id="4739060">,</span>&nbsp;<span class="num" id="4739062">64</span><span class="op" id="4739064">)</span><br>
<span class="lineno"></span><span class="op" id="4739066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4739069">//&nbsp;decodeState&nbsp;represents&nbsp;the&nbsp;state&nbsp;while&nbsp;decoding&nbsp;a&nbsp;JSON&nbsp;value.</span><br>
<span class="lineno">170</span><span class="keyword" id="4739134">type</span>&nbsp;<span class="ident" id="4739139">decodeState</span>&nbsp;<span class="keyword" id="4739151">struct</span>&nbsp;<span class="op" id="4739158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4739161">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4739172">[</span><span class="op" id="4739173">]</span><span class="builtintype" id="4739174">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4739180">off</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4739191">int</span>&nbsp;<span class="comment" id="4739195">//&nbsp;read&nbsp;offset&nbsp;in&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4739219">scan</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4739230">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4739239">nextscan</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4739250">scanner</span>&nbsp;<span class="comment" id="4739258">//&nbsp;for&nbsp;calls&nbsp;to&nbsp;nextValue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4739285">savedError</span>&nbsp;<span class="builtintype" id="4739296">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4739303">useNumber</span>&nbsp;&nbsp;<span class="builtintype" id="4739314">bool</span><br>
<span class="lineno"></span><span class="op" id="4739319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4739322">//&nbsp;errPhase&nbsp;is&nbsp;used&nbsp;for&nbsp;errors&nbsp;that&nbsp;should&nbsp;not&nbsp;happen&nbsp;unless</span><br>
<span class="lineno">180</span><span class="comment" id="4739383">//&nbsp;there&nbsp;is&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;JSON&nbsp;decoder&nbsp;or&nbsp;something&nbsp;is&nbsp;editing</span><br>
<span class="lineno"></span><span class="comment" id="4739445">//&nbsp;the&nbsp;data&nbsp;slice&nbsp;while&nbsp;the&nbsp;decoder&nbsp;executes.</span><br>
<span class="lineno"></span><span class="keyword" id="4739491">var</span>&nbsp;<span class="ident" id="4739495">errPhase</span>&nbsp;<span class="op" id="4739504">=</span>&nbsp;<span class="ident" id="4739506">errors</span><span class="op" id="4739512">.</span><span class="ident" id="4739513">New</span><span class="op" id="4739516">(</span><span class="string" id="4739517">&#34;JSON&nbsp;decoder&nbsp;out&nbsp;of&nbsp;sync&nbsp;-&nbsp;data&nbsp;changing&nbsp;underfoot?&#34;</span><span class="op" id="4739570">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4739573">func</span>&nbsp;<span class="op" id="4739578">(</span><span class="ident" id="4739579">d</span>&nbsp;<span class="op" id="4739581">*</span><span class="ident" id="4739582">decodeState</span><span class="op" id="4739593">)</span>&nbsp;<span class="ident" id="4739595">init</span><span class="op" id="4739599">(</span><span class="ident" id="4739600">data</span>&nbsp;<span class="op" id="4739605">[</span><span class="op" id="4739606">]</span><span class="builtintype" id="4739607">byte</span><span class="op" id="4739611">)</span>&nbsp;<span class="op" id="4739613">*</span><span class="ident" id="4739614">decodeState</span>&nbsp;<span class="op" id="4739626">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4739629">d</span><span class="op" id="4739630">.</span><span class="ident" id="4739631">data</span>&nbsp;<span class="op" id="4739636">=</span>&nbsp;<span class="ident" id="4739638">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4739644">d</span><span class="op" id="4739645">.</span><span class="ident" id="4739646">off</span>&nbsp;<span class="op" id="4739650">=</span>&nbsp;<span class="num" id="4739652">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4739655">d</span><span class="op" id="4739656">.</span><span class="ident" id="4739657">savedError</span>&nbsp;<span class="op" id="4739668">=</span>&nbsp;<span class="ident" id="4739670">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4739675">return</span>&nbsp;<span class="ident" id="4739682">d</span><br>
<span class="lineno"></span><span class="op" id="4739684">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="4739687">//&nbsp;error&nbsp;aborts&nbsp;the&nbsp;decoding&nbsp;by&nbsp;panicking&nbsp;with&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="4739739">func</span>&nbsp;<span class="op" id="4739744">(</span><span class="ident" id="4739745">d</span>&nbsp;<span class="op" id="4739747">*</span><span class="ident" id="4739748">decodeState</span><span class="op" id="4739759">)</span>&nbsp;<span class="builtintype" id="4739761">error</span><span class="op" id="4739766">(</span><span class="ident" id="4739767">err</span>&nbsp;<span class="builtintype" id="4739771">error</span><span class="op" id="4739776">)</span>&nbsp;<span class="op" id="4739778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4739781">panic</span><span class="op" id="4739786">(</span><span class="ident" id="4739787">err</span><span class="op" id="4739790">)</span><br>
<span class="lineno"></span><span class="op" id="4739792">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="4739795">//&nbsp;saveError&nbsp;saves&nbsp;the&nbsp;first&nbsp;err&nbsp;it&nbsp;is&nbsp;called&nbsp;with,</span><br>
<span class="lineno"></span><span class="comment" id="4739847">//&nbsp;for&nbsp;reporting&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;unmarshal.</span><br>
<span class="lineno"></span><span class="keyword" id="4739893">func</span>&nbsp;<span class="op" id="4739898">(</span><span class="ident" id="4739899">d</span>&nbsp;<span class="op" id="4739901">*</span><span class="ident" id="4739902">decodeState</span><span class="op" id="4739913">)</span>&nbsp;<span class="ident" id="4739915">saveError</span><span class="op" id="4739924">(</span><span class="ident" id="4739925">err</span>&nbsp;<span class="builtintype" id="4739929">error</span><span class="op" id="4739934">)</span>&nbsp;<span class="op" id="4739936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4739939">if</span>&nbsp;<span class="ident" id="4739942">d</span><span class="op" id="4739943">.</span><span class="ident" id="4739944">savedError</span>&nbsp;<span class="op" id="4739955">==</span>&nbsp;<span class="ident" id="4739958">nil</span>&nbsp;<span class="op" id="4739962">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4739966">d</span><span class="op" id="4739967">.</span><span class="ident" id="4739968">savedError</span>&nbsp;<span class="op" id="4739979">=</span>&nbsp;<span class="ident" id="4739981">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4739986">}</span><br>
<span class="lineno"></span><span class="op" id="4739988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4739991">//&nbsp;next&nbsp;cuts&nbsp;off&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;full&nbsp;JSON&nbsp;value&nbsp;in&nbsp;d.data[d.off:].</span><br>
<span class="lineno">205</span><span class="comment" id="4740064">//&nbsp;The&nbsp;next&nbsp;value&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;an&nbsp;object&nbsp;or&nbsp;array,&nbsp;not&nbsp;a&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="4740132">func</span>&nbsp;<span class="op" id="4740137">(</span><span class="ident" id="4740138">d</span>&nbsp;<span class="op" id="4740140">*</span><span class="ident" id="4740141">decodeState</span><span class="op" id="4740152">)</span>&nbsp;<span class="ident" id="4740154">next</span><span class="op" id="4740158">(</span><span class="op" id="4740159">)</span>&nbsp;<span class="op" id="4740161">[</span><span class="op" id="4740162">]</span><span class="builtintype" id="4740163">byte</span>&nbsp;<span class="op" id="4740168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4740171">c</span>&nbsp;<span class="op" id="4740173">:=</span>&nbsp;<span class="ident" id="4740176">d</span><span class="op" id="4740177">.</span><span class="ident" id="4740178">data</span><span class="op" id="4740182">[</span><span class="ident" id="4740183">d</span><span class="op" id="4740184">.</span><span class="ident" id="4740185">off</span><span class="op" id="4740188">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4740191">item</span><span class="op" id="4740195">,</span>&nbsp;<span class="ident" id="4740197">rest</span><span class="op" id="4740201">,</span>&nbsp;<span class="ident" id="4740203">err</span>&nbsp;<span class="op" id="4740207">:=</span>&nbsp;<span class="ident" id="4740210">nextValue</span><span class="op" id="4740219">(</span><span class="ident" id="4740220">d</span><span class="op" id="4740221">.</span><span class="ident" id="4740222">data</span><span class="op" id="4740226">[</span><span class="ident" id="4740227">d</span><span class="op" id="4740228">.</span><span class="ident" id="4740229">off</span><span class="op" id="4740232">:</span><span class="op" id="4740233">]</span><span class="op" id="4740234">,</span>&nbsp;<span class="op" id="4740236">&amp;</span><span class="ident" id="4740237">d</span><span class="op" id="4740238">.</span><span class="ident" id="4740239">nextscan</span><span class="op" id="4740247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4740250">if</span>&nbsp;<span class="ident" id="4740253">err</span>&nbsp;<span class="op" id="4740257">!=</span>&nbsp;<span class="ident" id="4740260">nil</span>&nbsp;<span class="op" id="4740264">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4740268">d</span><span class="op" id="4740269">.</span><span class="builtintype" id="4740270">error</span><span class="op" id="4740275">(</span><span class="ident" id="4740276">err</span><span class="op" id="4740279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4740282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4740285">d</span><span class="op" id="4740286">.</span><span class="ident" id="4740287">off</span>&nbsp;<span class="op" id="4740291">=</span>&nbsp;<span class="builtinfunc" id="4740293">len</span><span class="op" id="4740296">(</span><span class="ident" id="4740297">d</span><span class="op" id="4740298">.</span><span class="ident" id="4740299">data</span><span class="op" id="4740303">)</span>&nbsp;<span class="op" id="4740305">-</span>&nbsp;<span class="builtinfunc" id="4740307">len</span><span class="op" id="4740310">(</span><span class="ident" id="4740311">rest</span><span class="op" id="4740315">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4740319">//&nbsp;Our&nbsp;scanner&nbsp;has&nbsp;seen&nbsp;the&nbsp;opening&nbsp;brace/bracket</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4740370">//&nbsp;and&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;object.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4740426">//&nbsp;invent&nbsp;a&nbsp;closing&nbsp;brace/bracket&nbsp;to&nbsp;get&nbsp;it&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4740476">if</span>&nbsp;<span class="ident" id="4740479">c</span>&nbsp;<span class="op" id="4740481">==</span>&nbsp;<span class="string" id="4740484">&#39;{&#39;</span>&nbsp;<span class="op" id="4740488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4740492">d</span><span class="op" id="4740493">.</span><span class="ident" id="4740494">scan</span><span class="op" id="4740498">.</span><span class="ident" id="4740499">step</span><span class="op" id="4740503">(</span><span class="op" id="4740504">&amp;</span><span class="ident" id="4740505">d</span><span class="op" id="4740506">.</span><span class="ident" id="4740507">scan</span><span class="op" id="4740511">,</span>&nbsp;<span class="string" id="4740513">&#39;}&#39;</span><span class="op" id="4740516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4740519">}</span>&nbsp;<span class="keyword" id="4740521">else</span>&nbsp;<span class="op" id="4740526">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4740530">d</span><span class="op" id="4740531">.</span><span class="ident" id="4740532">scan</span><span class="op" id="4740536">.</span><span class="ident" id="4740537">step</span><span class="op" id="4740541">(</span><span class="op" id="4740542">&amp;</span><span class="ident" id="4740543">d</span><span class="op" id="4740544">.</span><span class="ident" id="4740545">scan</span><span class="op" id="4740549">,</span>&nbsp;<span class="string" id="4740551">&#39;]&#39;</span><span class="op" id="4740554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4740557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4740561">return</span>&nbsp;<span class="ident" id="4740568">item</span><br>
<span class="lineno"></span><span class="op" id="4740573">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="4740576">//&nbsp;scanWhile&nbsp;processes&nbsp;bytes&nbsp;in&nbsp;d.data[d.off:]&nbsp;until&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="4740632">//&nbsp;receives&nbsp;a&nbsp;scan&nbsp;code&nbsp;not&nbsp;equal&nbsp;to&nbsp;op.</span><br>
<span class="lineno"></span><span class="comment" id="4740673">//&nbsp;It&nbsp;updates&nbsp;d.off&nbsp;and&nbsp;returns&nbsp;the&nbsp;new&nbsp;scan&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="4740724">func</span>&nbsp;<span class="op" id="4740729">(</span><span class="ident" id="4740730">d</span>&nbsp;<span class="op" id="4740732">*</span><span class="ident" id="4740733">decodeState</span><span class="op" id="4740744">)</span>&nbsp;<span class="ident" id="4740746">scanWhile</span><span class="op" id="4740755">(</span><span class="ident" id="4740756">op</span>&nbsp;<span class="builtintype" id="4740759">int</span><span class="op" id="4740762">)</span>&nbsp;<span class="builtintype" id="4740764">int</span>&nbsp;<span class="op" id="4740768">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4740771">var</span>&nbsp;<span class="ident" id="4740775">newOp</span>&nbsp;<span class="builtintype" id="4740781">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4740786">for</span>&nbsp;<span class="op" id="4740790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4740794">if</span>&nbsp;<span class="ident" id="4740797">d</span><span class="op" id="4740798">.</span><span class="ident" id="4740799">off</span>&nbsp;<span class="op" id="4740803">&gt;=</span>&nbsp;<span class="builtinfunc" id="4740806">len</span><span class="op" id="4740809">(</span><span class="ident" id="4740810">d</span><span class="op" id="4740811">.</span><span class="ident" id="4740812">data</span><span class="op" id="4740816">)</span>&nbsp;<span class="op" id="4740818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4740823">newOp</span>&nbsp;<span class="op" id="4740829">=</span>&nbsp;<span class="ident" id="4740831">d</span><span class="op" id="4740832">.</span><span class="ident" id="4740833">scan</span><span class="op" id="4740837">.</span><span class="ident" id="4740838">eof</span><span class="op" id="4740841">(</span><span class="op" id="4740842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4740847">d</span><span class="op" id="4740848">.</span><span class="ident" id="4740849">off</span>&nbsp;<span class="op" id="4740853">=</span>&nbsp;<span class="builtinfunc" id="4740855">len</span><span class="op" id="4740858">(</span><span class="ident" id="4740859">d</span><span class="op" id="4740860">.</span><span class="ident" id="4740861">data</span><span class="op" id="4740865">)</span>&nbsp;<span class="op" id="4740867">+</span>&nbsp;<span class="num" id="4740869">1</span>&nbsp;<span class="comment" id="4740871">//&nbsp;mark&nbsp;processed&nbsp;EOF&nbsp;with&nbsp;len+1</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4740906">}</span>&nbsp;<span class="keyword" id="4740908">else</span>&nbsp;<span class="op" id="4740913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4740918">c</span>&nbsp;<span class="op" id="4740920">:=</span>&nbsp;<span class="builtintype" id="4740923">int</span><span class="op" id="4740926">(</span><span class="ident" id="4740927">d</span><span class="op" id="4740928">.</span><span class="ident" id="4740929">data</span><span class="op" id="4740933">[</span><span class="ident" id="4740934">d</span><span class="op" id="4740935">.</span><span class="ident" id="4740936">off</span><span class="op" id="4740939">]</span><span class="op" id="4740940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4740945">d</span><span class="op" id="4740946">.</span><span class="ident" id="4740947">off</span><span class="op" id="4740950">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4740956">newOp</span>&nbsp;<span class="op" id="4740962">=</span>&nbsp;<span class="ident" id="4740964">d</span><span class="op" id="4740965">.</span><span class="ident" id="4740966">scan</span><span class="op" id="4740970">.</span><span class="ident" id="4740971">step</span><span class="op" id="4740975">(</span><span class="op" id="4740976">&amp;</span><span class="ident" id="4740977">d</span><span class="op" id="4740978">.</span><span class="ident" id="4740979">scan</span><span class="op" id="4740983">,</span>&nbsp;<span class="ident" id="4740985">c</span><span class="op" id="4740986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4740990">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4740994">if</span>&nbsp;<span class="ident" id="4740997">newOp</span>&nbsp;<span class="op" id="4741003">!=</span>&nbsp;<span class="ident" id="4741006">op</span>&nbsp;<span class="op" id="4741009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4741014">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4741022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4741025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4741028">return</span>&nbsp;<span class="ident" id="4741035">newOp</span><br>
<span class="lineno">245</span><span class="op" id="4741041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4741044">//&nbsp;value&nbsp;decodes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;from&nbsp;d.data[d.off:]&nbsp;into&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="4741110">//&nbsp;it&nbsp;updates&nbsp;d.off&nbsp;to&nbsp;point&nbsp;past&nbsp;the&nbsp;decoded&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="4741163">func</span>&nbsp;<span class="op" id="4741168">(</span><span class="ident" id="4741169">d</span>&nbsp;<span class="op" id="4741171">*</span><span class="ident" id="4741172">decodeState</span><span class="op" id="4741183">)</span>&nbsp;<span class="ident" id="4741185">value</span><span class="op" id="4741190">(</span><span class="ident" id="4741191">v</span>&nbsp;<span class="ident" id="4741193">reflect</span><span class="op" id="4741200">.</span><span class="ident" id="4741201">Value</span><span class="op" id="4741206">)</span>&nbsp;<span class="op" id="4741208">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4741211">if</span>&nbsp;<span class="op" id="4741214">!</span><span class="ident" id="4741215">v</span><span class="op" id="4741216">.</span><span class="ident" id="4741217">IsValid</span><span class="op" id="4741224">(</span><span class="op" id="4741225">)</span>&nbsp;<span class="op" id="4741227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4741231">_</span><span class="op" id="4741232">,</span>&nbsp;<span class="ident" id="4741234">rest</span><span class="op" id="4741238">,</span>&nbsp;<span class="ident" id="4741240">err</span>&nbsp;<span class="op" id="4741244">:=</span>&nbsp;<span class="ident" id="4741247">nextValue</span><span class="op" id="4741256">(</span><span class="ident" id="4741257">d</span><span class="op" id="4741258">.</span><span class="ident" id="4741259">data</span><span class="op" id="4741263">[</span><span class="ident" id="4741264">d</span><span class="op" id="4741265">.</span><span class="ident" id="4741266">off</span><span class="op" id="4741269">:</span><span class="op" id="4741270">]</span><span class="op" id="4741271">,</span>&nbsp;<span class="op" id="4741273">&amp;</span><span class="ident" id="4741274">d</span><span class="op" id="4741275">.</span><span class="ident" id="4741276">nextscan</span><span class="op" id="4741284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4741288">if</span>&nbsp;<span class="ident" id="4741291">err</span>&nbsp;<span class="op" id="4741295">!=</span>&nbsp;<span class="ident" id="4741298">nil</span>&nbsp;<span class="op" id="4741302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4741307">d</span><span class="op" id="4741308">.</span><span class="builtintype" id="4741309">error</span><span class="op" id="4741314">(</span><span class="ident" id="4741315">err</span><span class="op" id="4741318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4741322">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4741326">d</span><span class="op" id="4741327">.</span><span class="ident" id="4741328">off</span>&nbsp;<span class="op" id="4741332">=</span>&nbsp;<span class="builtinfunc" id="4741334">len</span><span class="op" id="4741337">(</span><span class="ident" id="4741338">d</span><span class="op" id="4741339">.</span><span class="ident" id="4741340">data</span><span class="op" id="4741344">)</span>&nbsp;<span class="op" id="4741346">-</span>&nbsp;<span class="builtinfunc" id="4741348">len</span><span class="op" id="4741351">(</span><span class="ident" id="4741352">rest</span><span class="op" id="4741356">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4741361">//&nbsp;d.scan&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;item.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4741422">//&nbsp;Feed&nbsp;in&nbsp;an&nbsp;empty&nbsp;string&nbsp;-&nbsp;the&nbsp;shortest,&nbsp;simplest&nbsp;value&nbsp;-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4741484">//&nbsp;so&nbsp;that&nbsp;it&nbsp;knows&nbsp;we&nbsp;got&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4741538">if</span>&nbsp;<span class="ident" id="4741541">d</span><span class="op" id="4741542">.</span><span class="ident" id="4741543">scan</span><span class="op" id="4741547">.</span><span class="ident" id="4741548">redo</span>&nbsp;<span class="op" id="4741553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4741558">//&nbsp;rewind.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4741572">d</span><span class="op" id="4741573">.</span><span class="ident" id="4741574">scan</span><span class="op" id="4741578">.</span><span class="ident" id="4741579">redo</span>&nbsp;<span class="op" id="4741584">=</span>&nbsp;<span class="builtintype" id="4741586">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4741595">d</span><span class="op" id="4741596">.</span><span class="ident" id="4741597">scan</span><span class="op" id="4741601">.</span><span class="ident" id="4741602">step</span>&nbsp;<span class="op" id="4741607">=</span>&nbsp;<span class="ident" id="4741609">stateBeginValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4741627">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4741631">d</span><span class="op" id="4741632">.</span><span class="ident" id="4741633">scan</span><span class="op" id="4741637">.</span><span class="ident" id="4741638">step</span><span class="op" id="4741642">(</span><span class="op" id="4741643">&amp;</span><span class="ident" id="4741644">d</span><span class="op" id="4741645">.</span><span class="ident" id="4741646">scan</span><span class="op" id="4741650">,</span>&nbsp;<span class="string" id="4741652">&#39;&#34;&#39;</span><span class="op" id="4741655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4741659">d</span><span class="op" id="4741660">.</span><span class="ident" id="4741661">scan</span><span class="op" id="4741665">.</span><span class="ident" id="4741666">step</span><span class="op" id="4741670">(</span><span class="op" id="4741671">&amp;</span><span class="ident" id="4741672">d</span><span class="op" id="4741673">.</span><span class="ident" id="4741674">scan</span><span class="op" id="4741678">,</span>&nbsp;<span class="string" id="4741680">&#39;&#34;&#39;</span><span class="op" id="4741683">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4741688">n</span>&nbsp;<span class="op" id="4741690">:=</span>&nbsp;<span class="builtinfunc" id="4741693">len</span><span class="op" id="4741696">(</span><span class="ident" id="4741697">d</span><span class="op" id="4741698">.</span><span class="ident" id="4741699">scan</span><span class="op" id="4741703">.</span><span class="ident" id="4741704">parseState</span><span class="op" id="4741714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4741718">if</span>&nbsp;<span class="ident" id="4741721">n</span>&nbsp;<span class="op" id="4741723">&gt;</span>&nbsp;<span class="num" id="4741725">0</span>&nbsp;<span class="op" id="4741727">&amp;&amp;</span>&nbsp;<span class="ident" id="4741730">d</span><span class="op" id="4741731">.</span><span class="ident" id="4741732">scan</span><span class="op" id="4741736">.</span><span class="ident" id="4741737">parseState</span><span class="op" id="4741747">[</span><span class="ident" id="4741748">n</span><span class="op" id="4741749">-</span><span class="num" id="4741750">1</span><span class="op" id="4741751">]</span>&nbsp;<span class="op" id="4741753">==</span>&nbsp;<span class="ident" id="4741756">parseObjectKey</span>&nbsp;<span class="op" id="4741771">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4741776">//&nbsp;d.scan&nbsp;thinks&nbsp;we&nbsp;just&nbsp;read&nbsp;an&nbsp;object&nbsp;key;&nbsp;finish&nbsp;the&nbsp;object</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4741842">d</span><span class="op" id="4741843">.</span><span class="ident" id="4741844">scan</span><span class="op" id="4741848">.</span><span class="ident" id="4741849">step</span><span class="op" id="4741853">(</span><span class="op" id="4741854">&amp;</span><span class="ident" id="4741855">d</span><span class="op" id="4741856">.</span><span class="ident" id="4741857">scan</span><span class="op" id="4741861">,</span>&nbsp;<span class="string" id="4741863">&#39;:&#39;</span><span class="op" id="4741866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4741871">d</span><span class="op" id="4741872">.</span><span class="ident" id="4741873">scan</span><span class="op" id="4741877">.</span><span class="ident" id="4741878">step</span><span class="op" id="4741882">(</span><span class="op" id="4741883">&amp;</span><span class="ident" id="4741884">d</span><span class="op" id="4741885">.</span><span class="ident" id="4741886">scan</span><span class="op" id="4741890">,</span>&nbsp;<span class="string" id="4741892">&#39;&#34;&#39;</span><span class="op" id="4741895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4741900">d</span><span class="op" id="4741901">.</span><span class="ident" id="4741902">scan</span><span class="op" id="4741906">.</span><span class="ident" id="4741907">step</span><span class="op" id="4741911">(</span><span class="op" id="4741912">&amp;</span><span class="ident" id="4741913">d</span><span class="op" id="4741914">.</span><span class="ident" id="4741915">scan</span><span class="op" id="4741919">,</span>&nbsp;<span class="string" id="4741921">&#39;&#34;&#39;</span><span class="op" id="4741924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4741929">d</span><span class="op" id="4741930">.</span><span class="ident" id="4741931">scan</span><span class="op" id="4741935">.</span><span class="ident" id="4741936">step</span><span class="op" id="4741940">(</span><span class="op" id="4741941">&amp;</span><span class="ident" id="4741942">d</span><span class="op" id="4741943">.</span><span class="ident" id="4741944">scan</span><span class="op" id="4741948">,</span>&nbsp;<span class="string" id="4741950">&#39;}&#39;</span><span class="op" id="4741953">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4741957">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4741962">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4741970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4741974">switch</span>&nbsp;<span class="ident" id="4741981">op</span>&nbsp;<span class="op" id="4741984">:=</span>&nbsp;<span class="ident" id="4741987">d</span><span class="op" id="4741988">.</span><span class="ident" id="4741989">scanWhile</span><span class="op" id="4741998">(</span><span class="ident" id="4741999">scanSkipSpace</span><span class="op" id="4742012">)</span><span class="op" id="4742013">;</span>&nbsp;<span class="ident" id="4742015">op</span>&nbsp;<span class="op" id="4742018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4742021">default</span><span class="op" id="4742028">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4742032">d</span><span class="op" id="4742033">.</span><span class="builtintype" id="4742034">error</span><span class="op" id="4742039">(</span><span class="ident" id="4742040">errPhase</span><span class="op" id="4742048">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4742052">case</span>&nbsp;<span class="ident" id="4742057">scanBeginArray</span><span class="op" id="4742071">:</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4742075">d</span><span class="op" id="4742076">.</span><span class="ident" id="4742077">array</span><span class="op" id="4742082">(</span><span class="ident" id="4742083">v</span><span class="op" id="4742084">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4742088">case</span>&nbsp;<span class="ident" id="4742093">scanBeginObject</span><span class="op" id="4742108">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4742112">d</span><span class="op" id="4742113">.</span><span class="ident" id="4742114">object</span><span class="op" id="4742120">(</span><span class="ident" id="4742121">v</span><span class="op" id="4742122">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4742126">case</span>&nbsp;<span class="ident" id="4742131">scanBeginLiteral</span><span class="op" id="4742147">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4742151">d</span><span class="op" id="4742152">.</span><span class="ident" id="4742153">literal</span><span class="op" id="4742160">(</span><span class="ident" id="4742161">v</span><span class="op" id="4742162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4742165">}</span><br>
<span class="lineno"></span><span class="op" id="4742167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="keyword" id="4742170">type</span>&nbsp;<span class="ident" id="4742175">unquotedValue</span>&nbsp;<span class="keyword" id="4742189">struct</span><span class="op" id="4742195">{</span><span class="op" id="4742196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4742199">//&nbsp;valueQuoted&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;decodes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4742242">//&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;literal&nbsp;null&nbsp;into&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="4742308">//&nbsp;If&nbsp;it&nbsp;finds&nbsp;anything&nbsp;other&nbsp;than&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;null,</span><br>
<span class="lineno">300</span><span class="comment" id="4742376">//&nbsp;valueQuoted&nbsp;returns&nbsp;unquotedValue{}.</span><br>
<span class="lineno"></span><span class="keyword" id="4742416">func</span>&nbsp;<span class="op" id="4742421">(</span><span class="ident" id="4742422">d</span>&nbsp;<span class="op" id="4742424">*</span><span class="ident" id="4742425">decodeState</span><span class="op" id="4742436">)</span>&nbsp;<span class="ident" id="4742438">valueQuoted</span><span class="op" id="4742449">(</span><span class="op" id="4742450">)</span>&nbsp;<span class="keyword" id="4742452">interface</span><span class="op" id="4742461">{</span><span class="op" id="4742462">}</span>&nbsp;<span class="op" id="4742464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4742467">switch</span>&nbsp;<span class="ident" id="4742474">op</span>&nbsp;<span class="op" id="4742477">:=</span>&nbsp;<span class="ident" id="4742480">d</span><span class="op" id="4742481">.</span><span class="ident" id="4742482">scanWhile</span><span class="op" id="4742491">(</span><span class="ident" id="4742492">scanSkipSpace</span><span class="op" id="4742505">)</span><span class="op" id="4742506">;</span>&nbsp;<span class="ident" id="4742508">op</span>&nbsp;<span class="op" id="4742511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4742514">default</span><span class="op" id="4742521">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4742525">d</span><span class="op" id="4742526">.</span><span class="builtintype" id="4742527">error</span><span class="op" id="4742532">(</span><span class="ident" id="4742533">errPhase</span><span class="op" id="4742541">)</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4742545">case</span>&nbsp;<span class="ident" id="4742550">scanBeginArray</span><span class="op" id="4742564">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4742568">d</span><span class="op" id="4742569">.</span><span class="ident" id="4742570">array</span><span class="op" id="4742575">(</span><span class="ident" id="4742576">reflect</span><span class="op" id="4742583">.</span><span class="ident" id="4742584">Value</span><span class="op" id="4742589">{</span><span class="op" id="4742590">}</span><span class="op" id="4742591">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4742595">case</span>&nbsp;<span class="ident" id="4742600">scanBeginObject</span><span class="op" id="4742615">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4742619">d</span><span class="op" id="4742620">.</span><span class="ident" id="4742621">object</span><span class="op" id="4742627">(</span><span class="ident" id="4742628">reflect</span><span class="op" id="4742635">.</span><span class="ident" id="4742636">Value</span><span class="op" id="4742641">{</span><span class="op" id="4742642">}</span><span class="op" id="4742643">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4742647">case</span>&nbsp;<span class="ident" id="4742652">scanBeginLiteral</span><span class="op" id="4742668">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4742672">switch</span>&nbsp;<span class="ident" id="4742679">v</span>&nbsp;<span class="op" id="4742681">:=</span>&nbsp;<span class="ident" id="4742684">d</span><span class="op" id="4742685">.</span><span class="ident" id="4742686">literalInterface</span><span class="op" id="4742702">(</span><span class="op" id="4742703">)</span><span class="op" id="4742704">.</span><span class="op" id="4742705">(</span><span class="keyword" id="4742706">type</span><span class="op" id="4742710">)</span>&nbsp;<span class="op" id="4742712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4742716">case</span>&nbsp;<span class="ident" id="4742721">nil</span><span class="op" id="4742724">,</span>&nbsp;<span class="builtintype" id="4742726">string</span><span class="op" id="4742732">:</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4742737">return</span>&nbsp;<span class="ident" id="4742744">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4742748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4742751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4742754">return</span>&nbsp;<span class="ident" id="4742761">unquotedValue</span><span class="op" id="4742774">{</span><span class="op" id="4742775">}</span><br>
<span class="lineno"></span><span class="op" id="4742777">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="4742780">//&nbsp;indirect&nbsp;walks&nbsp;down&nbsp;v&nbsp;allocating&nbsp;pointers&nbsp;as&nbsp;needed,</span><br>
<span class="lineno"></span><span class="comment" id="4742836">//&nbsp;until&nbsp;it&nbsp;gets&nbsp;to&nbsp;a&nbsp;non-pointer.</span><br>
<span class="lineno"></span><span class="comment" id="4742871">//&nbsp;if&nbsp;it&nbsp;encounters&nbsp;an&nbsp;Unmarshaler,&nbsp;indirect&nbsp;stops&nbsp;and&nbsp;returns&nbsp;that.</span><br>
<span class="lineno"></span><span class="comment" id="4742940">//&nbsp;if&nbsp;decodingNull&nbsp;is&nbsp;true,&nbsp;indirect&nbsp;stops&nbsp;at&nbsp;the&nbsp;last&nbsp;pointer&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;set&nbsp;to&nbsp;nil.</span><br>
<span class="lineno">325</span><span class="keyword" id="4743028">func</span>&nbsp;<span class="op" id="4743033">(</span><span class="ident" id="4743034">d</span>&nbsp;<span class="op" id="4743036">*</span><span class="ident" id="4743037">decodeState</span><span class="op" id="4743048">)</span>&nbsp;<span class="ident" id="4743050">indirect</span><span class="op" id="4743058">(</span><span class="ident" id="4743059">v</span>&nbsp;<span class="ident" id="4743061">reflect</span><span class="op" id="4743068">.</span><span class="ident" id="4743069">Value</span><span class="op" id="4743074">,</span>&nbsp;<span class="ident" id="4743076">decodingNull</span>&nbsp;<span class="builtintype" id="4743089">bool</span><span class="op" id="4743093">)</span>&nbsp;<span class="op" id="4743095">(</span><span class="ident" id="4743096">Unmarshaler</span><span class="op" id="4743107">,</span>&nbsp;<span class="ident" id="4743109">encoding</span><span class="op" id="4743117">.</span><span class="ident" id="4743118">TextUnmarshaler</span><span class="op" id="4743133">,</span>&nbsp;<span class="ident" id="4743135">reflect</span><span class="op" id="4743142">.</span><span class="ident" id="4743143">Value</span><span class="op" id="4743148">)</span>&nbsp;<span class="op" id="4743150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4743153">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;named&nbsp;type&nbsp;and&nbsp;is&nbsp;addressable,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4743198">//&nbsp;start&nbsp;with&nbsp;its&nbsp;address,&nbsp;so&nbsp;that&nbsp;if&nbsp;the&nbsp;type&nbsp;has&nbsp;pointer&nbsp;methods,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4743267">//&nbsp;we&nbsp;find&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4743285">if</span>&nbsp;<span class="ident" id="4743288">v</span><span class="op" id="4743289">.</span><span class="ident" id="4743290">Kind</span><span class="op" id="4743294">(</span><span class="op" id="4743295">)</span>&nbsp;<span class="op" id="4743297">!=</span>&nbsp;<span class="ident" id="4743300">reflect</span><span class="op" id="4743307">.</span><span class="ident" id="4743308">Ptr</span>&nbsp;<span class="op" id="4743312">&amp;&amp;</span>&nbsp;<span class="ident" id="4743315">v</span><span class="op" id="4743316">.</span><span class="ident" id="4743317">Type</span><span class="op" id="4743321">(</span><span class="op" id="4743322">)</span><span class="op" id="4743323">.</span><span class="ident" id="4743324">Name</span><span class="op" id="4743328">(</span><span class="op" id="4743329">)</span>&nbsp;<span class="op" id="4743331">!=</span>&nbsp;<span class="string" id="4743334">&#34;&#34;</span>&nbsp;<span class="op" id="4743337">&amp;&amp;</span>&nbsp;<span class="ident" id="4743340">v</span><span class="op" id="4743341">.</span><span class="ident" id="4743342">CanAddr</span><span class="op" id="4743349">(</span><span class="op" id="4743350">)</span>&nbsp;<span class="op" id="4743352">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4743356">v</span>&nbsp;<span class="op" id="4743358">=</span>&nbsp;<span class="ident" id="4743360">v</span><span class="op" id="4743361">.</span><span class="ident" id="4743362">Addr</span><span class="op" id="4743366">(</span><span class="op" id="4743367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4743370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4743373">for</span>&nbsp;<span class="op" id="4743377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4743381">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4743444">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4743471">if</span>&nbsp;<span class="ident" id="4743474">v</span><span class="op" id="4743475">.</span><span class="ident" id="4743476">Kind</span><span class="op" id="4743480">(</span><span class="op" id="4743481">)</span>&nbsp;<span class="op" id="4743483">==</span>&nbsp;<span class="ident" id="4743486">reflect</span><span class="op" id="4743493">.</span><span class="ident" id="4743494">Interface</span>&nbsp;<span class="op" id="4743504">&amp;&amp;</span>&nbsp;<span class="op" id="4743507">!</span><span class="ident" id="4743508">v</span><span class="op" id="4743509">.</span><span class="ident" id="4743510">IsNil</span><span class="op" id="4743515">(</span><span class="op" id="4743516">)</span>&nbsp;<span class="op" id="4743518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4743523">e</span>&nbsp;<span class="op" id="4743525">:=</span>&nbsp;<span class="ident" id="4743528">v</span><span class="op" id="4743529">.</span><span class="ident" id="4743530">Elem</span><span class="op" id="4743534">(</span><span class="op" id="4743535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4743540">if</span>&nbsp;<span class="ident" id="4743543">e</span><span class="op" id="4743544">.</span><span class="ident" id="4743545">Kind</span><span class="op" id="4743549">(</span><span class="op" id="4743550">)</span>&nbsp;<span class="op" id="4743552">==</span>&nbsp;<span class="ident" id="4743555">reflect</span><span class="op" id="4743562">.</span><span class="ident" id="4743563">Ptr</span>&nbsp;<span class="op" id="4743567">&amp;&amp;</span>&nbsp;<span class="op" id="4743570">!</span><span class="ident" id="4743571">e</span><span class="op" id="4743572">.</span><span class="ident" id="4743573">IsNil</span><span class="op" id="4743578">(</span><span class="op" id="4743579">)</span>&nbsp;<span class="op" id="4743581">&amp;&amp;</span>&nbsp;<span class="op" id="4743584">(</span><span class="op" id="4743585">!</span><span class="ident" id="4743586">decodingNull</span>&nbsp;<span class="op" id="4743599">||</span>&nbsp;<span class="ident" id="4743602">e</span><span class="op" id="4743603">.</span><span class="ident" id="4743604">Elem</span><span class="op" id="4743608">(</span><span class="op" id="4743609">)</span><span class="op" id="4743610">.</span><span class="ident" id="4743611">Kind</span><span class="op" id="4743615">(</span><span class="op" id="4743616">)</span>&nbsp;<span class="op" id="4743618">==</span>&nbsp;<span class="ident" id="4743621">reflect</span><span class="op" id="4743628">.</span><span class="ident" id="4743629">Ptr</span><span class="op" id="4743632">)</span>&nbsp;<span class="op" id="4743634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4743640">v</span>&nbsp;<span class="op" id="4743642">=</span>&nbsp;<span class="ident" id="4743644">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4743650">continue</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4743662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4743666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4743671">if</span>&nbsp;<span class="ident" id="4743674">v</span><span class="op" id="4743675">.</span><span class="ident" id="4743676">Kind</span><span class="op" id="4743680">(</span><span class="op" id="4743681">)</span>&nbsp;<span class="op" id="4743683">!=</span>&nbsp;<span class="ident" id="4743686">reflect</span><span class="op" id="4743693">.</span><span class="ident" id="4743694">Ptr</span>&nbsp;<span class="op" id="4743698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4743703">break</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4743711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4743716">if</span>&nbsp;<span class="ident" id="4743719">v</span><span class="op" id="4743720">.</span><span class="ident" id="4743721">Elem</span><span class="op" id="4743725">(</span><span class="op" id="4743726">)</span><span class="op" id="4743727">.</span><span class="ident" id="4743728">Kind</span><span class="op" id="4743732">(</span><span class="op" id="4743733">)</span>&nbsp;<span class="op" id="4743735">!=</span>&nbsp;<span class="ident" id="4743738">reflect</span><span class="op" id="4743745">.</span><span class="ident" id="4743746">Ptr</span>&nbsp;<span class="op" id="4743750">&amp;&amp;</span>&nbsp;<span class="ident" id="4743753">decodingNull</span>&nbsp;<span class="op" id="4743766">&amp;&amp;</span>&nbsp;<span class="ident" id="4743769">v</span><span class="op" id="4743770">.</span><span class="ident" id="4743771">CanSet</span><span class="op" id="4743777">(</span><span class="op" id="4743778">)</span>&nbsp;<span class="op" id="4743780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4743785">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4743793">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4743797">if</span>&nbsp;<span class="ident" id="4743800">v</span><span class="op" id="4743801">.</span><span class="ident" id="4743802">IsNil</span><span class="op" id="4743807">(</span><span class="op" id="4743808">)</span>&nbsp;<span class="op" id="4743810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4743815">v</span><span class="op" id="4743816">.</span><span class="ident" id="4743817">Set</span><span class="op" id="4743820">(</span><span class="ident" id="4743821">reflect</span><span class="op" id="4743828">.</span><span class="ident" id="4743829">New</span><span class="op" id="4743832">(</span><span class="ident" id="4743833">v</span><span class="op" id="4743834">.</span><span class="ident" id="4743835">Type</span><span class="op" id="4743839">(</span><span class="op" id="4743840">)</span><span class="op" id="4743841">.</span><span class="ident" id="4743842">Elem</span><span class="op" id="4743846">(</span><span class="op" id="4743847">)</span><span class="op" id="4743848">)</span><span class="op" id="4743849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4743853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4743857">if</span>&nbsp;<span class="ident" id="4743860">v</span><span class="op" id="4743861">.</span><span class="ident" id="4743862">Type</span><span class="op" id="4743866">(</span><span class="op" id="4743867">)</span><span class="op" id="4743868">.</span><span class="ident" id="4743869">NumMethod</span><span class="op" id="4743878">(</span><span class="op" id="4743879">)</span>&nbsp;<span class="op" id="4743881">&gt;</span>&nbsp;<span class="num" id="4743883">0</span>&nbsp;<span class="op" id="4743885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4743890">if</span>&nbsp;<span class="ident" id="4743893">u</span><span class="op" id="4743894">,</span>&nbsp;<span class="ident" id="4743896">ok</span>&nbsp;<span class="op" id="4743899">:=</span>&nbsp;<span class="ident" id="4743902">v</span><span class="op" id="4743903">.</span><span class="ident" id="4743904">Interface</span><span class="op" id="4743913">(</span><span class="op" id="4743914">)</span><span class="op" id="4743915">.</span><span class="op" id="4743916">(</span><span class="ident" id="4743917">Unmarshaler</span><span class="op" id="4743928">)</span><span class="op" id="4743929">;</span>&nbsp;<span class="ident" id="4743931">ok</span>&nbsp;<span class="op" id="4743934">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4743940">return</span>&nbsp;<span class="ident" id="4743947">u</span><span class="op" id="4743948">,</span>&nbsp;<span class="ident" id="4743950">nil</span><span class="op" id="4743953">,</span>&nbsp;<span class="ident" id="4743955">reflect</span><span class="op" id="4743962">.</span><span class="ident" id="4743963">Value</span><span class="op" id="4743968">{</span><span class="op" id="4743969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4743974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4743979">if</span>&nbsp;<span class="ident" id="4743982">u</span><span class="op" id="4743983">,</span>&nbsp;<span class="ident" id="4743985">ok</span>&nbsp;<span class="op" id="4743988">:=</span>&nbsp;<span class="ident" id="4743991">v</span><span class="op" id="4743992">.</span><span class="ident" id="4743993">Interface</span><span class="op" id="4744002">(</span><span class="op" id="4744003">)</span><span class="op" id="4744004">.</span><span class="op" id="4744005">(</span><span class="ident" id="4744006">encoding</span><span class="op" id="4744014">.</span><span class="ident" id="4744015">TextUnmarshaler</span><span class="op" id="4744030">)</span><span class="op" id="4744031">;</span>&nbsp;<span class="ident" id="4744033">ok</span>&nbsp;<span class="op" id="4744036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4744042">return</span>&nbsp;<span class="ident" id="4744049">nil</span><span class="op" id="4744052">,</span>&nbsp;<span class="ident" id="4744054">u</span><span class="op" id="4744055">,</span>&nbsp;<span class="ident" id="4744057">reflect</span><span class="op" id="4744064">.</span><span class="ident" id="4744065">Value</span><span class="op" id="4744070">{</span><span class="op" id="4744071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4744076">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4744080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4744084">v</span>&nbsp;<span class="op" id="4744086">=</span>&nbsp;<span class="ident" id="4744088">v</span><span class="op" id="4744089">.</span><span class="ident" id="4744090">Elem</span><span class="op" id="4744094">(</span><span class="op" id="4744095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4744098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4744101">return</span>&nbsp;<span class="ident" id="4744108">nil</span><span class="op" id="4744111">,</span>&nbsp;<span class="ident" id="4744113">nil</span><span class="op" id="4744116">,</span>&nbsp;<span class="ident" id="4744118">v</span><br>
<span class="lineno"></span><span class="op" id="4744120">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="comment" id="4744123">//&nbsp;array&nbsp;consumes&nbsp;an&nbsp;array&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="4744200">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;array&nbsp;(&#39;[&#39;)&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="4744260">func</span>&nbsp;<span class="op" id="4744265">(</span><span class="ident" id="4744266">d</span>&nbsp;<span class="op" id="4744268">*</span><span class="ident" id="4744269">decodeState</span><span class="op" id="4744280">)</span>&nbsp;<span class="ident" id="4744282">array</span><span class="op" id="4744287">(</span><span class="ident" id="4744288">v</span>&nbsp;<span class="ident" id="4744290">reflect</span><span class="op" id="4744297">.</span><span class="ident" id="4744298">Value</span><span class="op" id="4744303">)</span>&nbsp;<span class="op" id="4744305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4744308">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4744335">u</span><span class="op" id="4744336">,</span>&nbsp;<span class="ident" id="4744338">ut</span><span class="op" id="4744340">,</span>&nbsp;<span class="ident" id="4744342">pv</span>&nbsp;<span class="op" id="4744345">:=</span>&nbsp;<span class="ident" id="4744348">d</span><span class="op" id="4744349">.</span><span class="ident" id="4744350">indirect</span><span class="op" id="4744358">(</span><span class="ident" id="4744359">v</span><span class="op" id="4744360">,</span>&nbsp;<span class="builtintype" id="4744362">false</span><span class="op" id="4744367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4744370">if</span>&nbsp;<span class="ident" id="4744373">u</span>&nbsp;<span class="op" id="4744375">!=</span>&nbsp;<span class="ident" id="4744378">nil</span>&nbsp;<span class="op" id="4744382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4744386">d</span><span class="op" id="4744387">.</span><span class="ident" id="4744388">off</span><span class="op" id="4744391">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4744396">err</span>&nbsp;<span class="op" id="4744400">:=</span>&nbsp;<span class="ident" id="4744403">u</span><span class="op" id="4744404">.</span><span class="ident" id="4744405">UnmarshalJSON</span><span class="op" id="4744418">(</span><span class="ident" id="4744419">d</span><span class="op" id="4744420">.</span><span class="ident" id="4744421">next</span><span class="op" id="4744425">(</span><span class="op" id="4744426">)</span><span class="op" id="4744427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4744431">if</span>&nbsp;<span class="ident" id="4744434">err</span>&nbsp;<span class="op" id="4744438">!=</span>&nbsp;<span class="ident" id="4744441">nil</span>&nbsp;<span class="op" id="4744445">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4744450">d</span><span class="op" id="4744451">.</span><span class="builtintype" id="4744452">error</span><span class="op" id="4744457">(</span><span class="ident" id="4744458">err</span><span class="op" id="4744461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4744465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4744469">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4744477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4744480">if</span>&nbsp;<span class="ident" id="4744483">ut</span>&nbsp;<span class="op" id="4744486">!=</span>&nbsp;<span class="ident" id="4744489">nil</span>&nbsp;<span class="op" id="4744493">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4744497">d</span><span class="op" id="4744498">.</span><span class="ident" id="4744499">saveError</span><span class="op" id="4744508">(</span><span class="op" id="4744509">&amp;</span><span class="ident" id="4744510">UnmarshalTypeError</span><span class="op" id="4744528">{</span><span class="string" id="4744529">&#34;array&#34;</span><span class="op" id="4744536">,</span>&nbsp;<span class="ident" id="4744538">v</span><span class="op" id="4744539">.</span><span class="ident" id="4744540">Type</span><span class="op" id="4744544">(</span><span class="op" id="4744545">)</span><span class="op" id="4744546">}</span><span class="op" id="4744547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4744551">d</span><span class="op" id="4744552">.</span><span class="ident" id="4744553">off</span><span class="op" id="4744556">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4744561">d</span><span class="op" id="4744562">.</span><span class="ident" id="4744563">next</span><span class="op" id="4744567">(</span><span class="op" id="4744568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4744572">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4744580">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4744584">v</span>&nbsp;<span class="op" id="4744586">=</span>&nbsp;<span class="ident" id="4744588">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4744593">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4744619">switch</span>&nbsp;<span class="ident" id="4744626">v</span><span class="op" id="4744627">.</span><span class="ident" id="4744628">Kind</span><span class="op" id="4744632">(</span><span class="op" id="4744633">)</span>&nbsp;<span class="op" id="4744635">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4744638">case</span>&nbsp;<span class="ident" id="4744643">reflect</span><span class="op" id="4744650">.</span><span class="ident" id="4744651">Interface</span><span class="op" id="4744660">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4744664">if</span>&nbsp;<span class="ident" id="4744667">v</span><span class="op" id="4744668">.</span><span class="ident" id="4744669">NumMethod</span><span class="op" id="4744678">(</span><span class="op" id="4744679">)</span>&nbsp;<span class="op" id="4744681">==</span>&nbsp;<span class="num" id="4744684">0</span>&nbsp;<span class="op" id="4744686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4744691">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4744755">v</span><span class="op" id="4744756">.</span><span class="ident" id="4744757">Set</span><span class="op" id="4744760">(</span><span class="ident" id="4744761">reflect</span><span class="op" id="4744768">.</span><span class="ident" id="4744769">ValueOf</span><span class="op" id="4744776">(</span><span class="ident" id="4744777">d</span><span class="op" id="4744778">.</span><span class="ident" id="4744779">arrayInterface</span><span class="op" id="4744793">(</span><span class="op" id="4744794">)</span><span class="op" id="4744795">)</span><span class="op" id="4744796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4744801">return</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4744810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4744814">//&nbsp;Otherwise&nbsp;it&#39;s&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4744843">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4744856">default</span><span class="op" id="4744863">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4744867">d</span><span class="op" id="4744868">.</span><span class="ident" id="4744869">saveError</span><span class="op" id="4744878">(</span><span class="op" id="4744879">&amp;</span><span class="ident" id="4744880">UnmarshalTypeError</span><span class="op" id="4744898">{</span><span class="string" id="4744899">&#34;array&#34;</span><span class="op" id="4744906">,</span>&nbsp;<span class="ident" id="4744908">v</span><span class="op" id="4744909">.</span><span class="ident" id="4744910">Type</span><span class="op" id="4744914">(</span><span class="op" id="4744915">)</span><span class="op" id="4744916">}</span><span class="op" id="4744917">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4744921">d</span><span class="op" id="4744922">.</span><span class="ident" id="4744923">off</span><span class="op" id="4744926">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4744931">d</span><span class="op" id="4744932">.</span><span class="ident" id="4744933">next</span><span class="op" id="4744937">(</span><span class="op" id="4744938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4744942">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4744950">case</span>&nbsp;<span class="ident" id="4744955">reflect</span><span class="op" id="4744962">.</span><span class="ident" id="4744963">Array</span><span class="op" id="4744968">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4744971">case</span>&nbsp;<span class="ident" id="4744976">reflect</span><span class="op" id="4744983">.</span><span class="ident" id="4744984">Slice</span><span class="op" id="4744989">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4744993">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4745000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4745004">i</span>&nbsp;<span class="op" id="4745006">:=</span>&nbsp;<span class="num" id="4745009">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4745012">for</span>&nbsp;<span class="op" id="4745016">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4745020">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4745080">op</span>&nbsp;<span class="op" id="4745083">:=</span>&nbsp;<span class="ident" id="4745086">d</span><span class="op" id="4745087">.</span><span class="ident" id="4745088">scanWhile</span><span class="op" id="4745097">(</span><span class="ident" id="4745098">scanSkipSpace</span><span class="op" id="4745111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4745115">if</span>&nbsp;<span class="ident" id="4745118">op</span>&nbsp;<span class="op" id="4745121">==</span>&nbsp;<span class="ident" id="4745124">scanEndArray</span>&nbsp;<span class="op" id="4745137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4745142">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4745150">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4745155">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4745211">d</span><span class="op" id="4745212">.</span><span class="ident" id="4745213">off</span><span class="op" id="4745216">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4745221">d</span><span class="op" id="4745222">.</span><span class="ident" id="4745223">scan</span><span class="op" id="4745227">.</span><span class="ident" id="4745228">undo</span><span class="op" id="4745232">(</span><span class="ident" id="4745233">op</span><span class="op" id="4745235">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4745240">//&nbsp;Get&nbsp;element&nbsp;of&nbsp;array,&nbsp;growing&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4745289">if</span>&nbsp;<span class="ident" id="4745292">v</span><span class="op" id="4745293">.</span><span class="ident" id="4745294">Kind</span><span class="op" id="4745298">(</span><span class="op" id="4745299">)</span>&nbsp;<span class="op" id="4745301">==</span>&nbsp;<span class="ident" id="4745304">reflect</span><span class="op" id="4745311">.</span><span class="ident" id="4745312">Slice</span>&nbsp;<span class="op" id="4745318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4745323">//&nbsp;Grow&nbsp;slice&nbsp;if&nbsp;necessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4745353">if</span>&nbsp;<span class="ident" id="4745356">i</span>&nbsp;<span class="op" id="4745358">&gt;=</span>&nbsp;<span class="ident" id="4745361">v</span><span class="op" id="4745362">.</span><span class="ident" id="4745363">Cap</span><span class="op" id="4745366">(</span><span class="op" id="4745367">)</span>&nbsp;<span class="op" id="4745369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4745375">newcap</span>&nbsp;<span class="op" id="4745382">:=</span>&nbsp;<span class="ident" id="4745385">v</span><span class="op" id="4745386">.</span><span class="ident" id="4745387">Cap</span><span class="op" id="4745390">(</span><span class="op" id="4745391">)</span>&nbsp;<span class="op" id="4745393">+</span>&nbsp;<span class="ident" id="4745395">v</span><span class="op" id="4745396">.</span><span class="ident" id="4745397">Cap</span><span class="op" id="4745400">(</span><span class="op" id="4745401">)</span><span class="op" id="4745402">/</span><span class="num" id="4745403">2</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4745409">if</span>&nbsp;<span class="ident" id="4745412">newcap</span>&nbsp;<span class="op" id="4745419">&lt;</span>&nbsp;<span class="num" id="4745421">4</span>&nbsp;<span class="op" id="4745423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4745430">newcap</span>&nbsp;<span class="op" id="4745437">=</span>&nbsp;<span class="num" id="4745439">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4745445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4745451">newv</span>&nbsp;<span class="op" id="4745456">:=</span>&nbsp;<span class="ident" id="4745459">reflect</span><span class="op" id="4745466">.</span><span class="ident" id="4745467">MakeSlice</span><span class="op" id="4745476">(</span><span class="ident" id="4745477">v</span><span class="op" id="4745478">.</span><span class="ident" id="4745479">Type</span><span class="op" id="4745483">(</span><span class="op" id="4745484">)</span><span class="op" id="4745485">,</span>&nbsp;<span class="ident" id="4745487">v</span><span class="op" id="4745488">.</span><span class="ident" id="4745489">Len</span><span class="op" id="4745492">(</span><span class="op" id="4745493">)</span><span class="op" id="4745494">,</span>&nbsp;<span class="ident" id="4745496">newcap</span><span class="op" id="4745502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4745508">reflect</span><span class="op" id="4745515">.</span><span class="ident" id="4745516">Copy</span><span class="op" id="4745520">(</span><span class="ident" id="4745521">newv</span><span class="op" id="4745525">,</span>&nbsp;<span class="ident" id="4745527">v</span><span class="op" id="4745528">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4745534">v</span><span class="op" id="4745535">.</span><span class="ident" id="4745536">Set</span><span class="op" id="4745539">(</span><span class="ident" id="4745540">newv</span><span class="op" id="4745544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4745549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4745554">if</span>&nbsp;<span class="ident" id="4745557">i</span>&nbsp;<span class="op" id="4745559">&gt;=</span>&nbsp;<span class="ident" id="4745562">v</span><span class="op" id="4745563">.</span><span class="ident" id="4745564">Len</span><span class="op" id="4745567">(</span><span class="op" id="4745568">)</span>&nbsp;<span class="op" id="4745570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4745576">v</span><span class="op" id="4745577">.</span><span class="ident" id="4745578">SetLen</span><span class="op" id="4745584">(</span><span class="ident" id="4745585">i</span>&nbsp;<span class="op" id="4745587">+</span>&nbsp;<span class="num" id="4745589">1</span><span class="op" id="4745590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4745595">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4745599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4745604">if</span>&nbsp;<span class="ident" id="4745607">i</span>&nbsp;<span class="op" id="4745609">&lt;</span>&nbsp;<span class="ident" id="4745611">v</span><span class="op" id="4745612">.</span><span class="ident" id="4745613">Len</span><span class="op" id="4745616">(</span><span class="op" id="4745617">)</span>&nbsp;<span class="op" id="4745619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4745624">//&nbsp;Decode&nbsp;into&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4745651">d</span><span class="op" id="4745652">.</span><span class="ident" id="4745653">value</span><span class="op" id="4745658">(</span><span class="ident" id="4745659">v</span><span class="op" id="4745660">.</span><span class="ident" id="4745661">Index</span><span class="op" id="4745666">(</span><span class="ident" id="4745667">i</span><span class="op" id="4745668">)</span><span class="op" id="4745669">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4745673">}</span>&nbsp;<span class="keyword" id="4745675">else</span>&nbsp;<span class="op" id="4745680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4745685">//&nbsp;Ran&nbsp;out&nbsp;of&nbsp;fixed&nbsp;array:&nbsp;skip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4745721">d</span><span class="op" id="4745722">.</span><span class="ident" id="4745723">value</span><span class="op" id="4745728">(</span><span class="ident" id="4745729">reflect</span><span class="op" id="4745736">.</span><span class="ident" id="4745737">Value</span><span class="op" id="4745742">{</span><span class="op" id="4745743">}</span><span class="op" id="4745744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4745748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4745752">i</span><span class="op" id="4745753">++</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4745759">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4745791">op</span>&nbsp;<span class="op" id="4745794">=</span>&nbsp;<span class="ident" id="4745796">d</span><span class="op" id="4745797">.</span><span class="ident" id="4745798">scanWhile</span><span class="op" id="4745807">(</span><span class="ident" id="4745808">scanSkipSpace</span><span class="op" id="4745821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4745825">if</span>&nbsp;<span class="ident" id="4745828">op</span>&nbsp;<span class="op" id="4745831">==</span>&nbsp;<span class="ident" id="4745834">scanEndArray</span>&nbsp;<span class="op" id="4745847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4745852">break</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4745860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4745864">if</span>&nbsp;<span class="ident" id="4745867">op</span>&nbsp;<span class="op" id="4745870">!=</span>&nbsp;<span class="ident" id="4745873">scanArrayValue</span>&nbsp;<span class="op" id="4745888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4745893">d</span><span class="op" id="4745894">.</span><span class="builtintype" id="4745895">error</span><span class="op" id="4745900">(</span><span class="ident" id="4745901">errPhase</span><span class="op" id="4745909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4745913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4745916">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4745920">if</span>&nbsp;<span class="ident" id="4745923">i</span>&nbsp;<span class="op" id="4745925">&lt;</span>&nbsp;<span class="ident" id="4745927">v</span><span class="op" id="4745928">.</span><span class="ident" id="4745929">Len</span><span class="op" id="4745932">(</span><span class="op" id="4745933">)</span>&nbsp;<span class="op" id="4745935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4745939">if</span>&nbsp;<span class="ident" id="4745942">v</span><span class="op" id="4745943">.</span><span class="ident" id="4745944">Kind</span><span class="op" id="4745948">(</span><span class="op" id="4745949">)</span>&nbsp;<span class="op" id="4745951">==</span>&nbsp;<span class="ident" id="4745954">reflect</span><span class="op" id="4745961">.</span><span class="ident" id="4745962">Array</span>&nbsp;<span class="op" id="4745968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4745973">//&nbsp;Array.&nbsp;&nbsp;Zero&nbsp;the&nbsp;rest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4746002">z</span>&nbsp;<span class="op" id="4746004">:=</span>&nbsp;<span class="ident" id="4746007">reflect</span><span class="op" id="4746014">.</span><span class="ident" id="4746015">Zero</span><span class="op" id="4746019">(</span><span class="ident" id="4746020">v</span><span class="op" id="4746021">.</span><span class="ident" id="4746022">Type</span><span class="op" id="4746026">(</span><span class="op" id="4746027">)</span><span class="op" id="4746028">.</span><span class="ident" id="4746029">Elem</span><span class="op" id="4746033">(</span><span class="op" id="4746034">)</span><span class="op" id="4746035">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4746040">for</span>&nbsp;<span class="op" id="4746044">;</span>&nbsp;<span class="ident" id="4746046">i</span>&nbsp;<span class="op" id="4746048">&lt;</span>&nbsp;<span class="ident" id="4746050">v</span><span class="op" id="4746051">.</span><span class="ident" id="4746052">Len</span><span class="op" id="4746055">(</span><span class="op" id="4746056">)</span><span class="op" id="4746057">;</span>&nbsp;<span class="ident" id="4746059">i</span><span class="op" id="4746060">++</span>&nbsp;<span class="op" id="4746063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4746069">v</span><span class="op" id="4746070">.</span><span class="ident" id="4746071">Index</span><span class="op" id="4746076">(</span><span class="ident" id="4746077">i</span><span class="op" id="4746078">)</span><span class="op" id="4746079">.</span><span class="ident" id="4746080">Set</span><span class="op" id="4746083">(</span><span class="ident" id="4746084">z</span><span class="op" id="4746085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4746090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4746094">}</span>&nbsp;<span class="keyword" id="4746096">else</span>&nbsp;<span class="op" id="4746101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4746106">v</span><span class="op" id="4746107">.</span><span class="ident" id="4746108">SetLen</span><span class="op" id="4746114">(</span><span class="ident" id="4746115">i</span><span class="op" id="4746116">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4746120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4746123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4746126">if</span>&nbsp;<span class="ident" id="4746129">i</span>&nbsp;<span class="op" id="4746131">==</span>&nbsp;<span class="num" id="4746134">0</span>&nbsp;<span class="op" id="4746136">&amp;&amp;</span>&nbsp;<span class="ident" id="4746139">v</span><span class="op" id="4746140">.</span><span class="ident" id="4746141">Kind</span><span class="op" id="4746145">(</span><span class="op" id="4746146">)</span>&nbsp;<span class="op" id="4746148">==</span>&nbsp;<span class="ident" id="4746151">reflect</span><span class="op" id="4746158">.</span><span class="ident" id="4746159">Slice</span>&nbsp;<span class="op" id="4746165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4746169">v</span><span class="op" id="4746170">.</span><span class="ident" id="4746171">Set</span><span class="op" id="4746174">(</span><span class="ident" id="4746175">reflect</span><span class="op" id="4746182">.</span><span class="ident" id="4746183">MakeSlice</span><span class="op" id="4746192">(</span><span class="ident" id="4746193">v</span><span class="op" id="4746194">.</span><span class="ident" id="4746195">Type</span><span class="op" id="4746199">(</span><span class="op" id="4746200">)</span><span class="op" id="4746201">,</span>&nbsp;<span class="num" id="4746203">0</span><span class="op" id="4746204">,</span>&nbsp;<span class="num" id="4746206">0</span><span class="op" id="4746207">)</span><span class="op" id="4746208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4746211">}</span><br>
<span class="lineno">470</span><span class="op" id="4746213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4746216">var</span>&nbsp;<span class="ident" id="4746220">nullLiteral</span>&nbsp;<span class="op" id="4746232">=</span>&nbsp;<span class="op" id="4746234">[</span><span class="op" id="4746235">]</span><span class="builtintype" id="4746236">byte</span><span class="op" id="4746240">(</span><span class="string" id="4746241">&#34;null&#34;</span><span class="op" id="4746247">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4746250">//&nbsp;object&nbsp;consumes&nbsp;an&nbsp;object&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno">475</span><span class="comment" id="4746329">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;(&#39;{&#39;)&nbsp;of&nbsp;the&nbsp;object&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="4746390">func</span>&nbsp;<span class="op" id="4746395">(</span><span class="ident" id="4746396">d</span>&nbsp;<span class="op" id="4746398">*</span><span class="ident" id="4746399">decodeState</span><span class="op" id="4746410">)</span>&nbsp;<span class="ident" id="4746412">object</span><span class="op" id="4746418">(</span><span class="ident" id="4746419">v</span>&nbsp;<span class="ident" id="4746421">reflect</span><span class="op" id="4746428">.</span><span class="ident" id="4746429">Value</span><span class="op" id="4746434">)</span>&nbsp;<span class="op" id="4746436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4746439">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4746466">u</span><span class="op" id="4746467">,</span>&nbsp;<span class="ident" id="4746469">ut</span><span class="op" id="4746471">,</span>&nbsp;<span class="ident" id="4746473">pv</span>&nbsp;<span class="op" id="4746476">:=</span>&nbsp;<span class="ident" id="4746479">d</span><span class="op" id="4746480">.</span><span class="ident" id="4746481">indirect</span><span class="op" id="4746489">(</span><span class="ident" id="4746490">v</span><span class="op" id="4746491">,</span>&nbsp;<span class="builtintype" id="4746493">false</span><span class="op" id="4746498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4746501">if</span>&nbsp;<span class="ident" id="4746504">u</span>&nbsp;<span class="op" id="4746506">!=</span>&nbsp;<span class="ident" id="4746509">nil</span>&nbsp;<span class="op" id="4746513">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4746517">d</span><span class="op" id="4746518">.</span><span class="ident" id="4746519">off</span><span class="op" id="4746522">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4746527">err</span>&nbsp;<span class="op" id="4746531">:=</span>&nbsp;<span class="ident" id="4746534">u</span><span class="op" id="4746535">.</span><span class="ident" id="4746536">UnmarshalJSON</span><span class="op" id="4746549">(</span><span class="ident" id="4746550">d</span><span class="op" id="4746551">.</span><span class="ident" id="4746552">next</span><span class="op" id="4746556">(</span><span class="op" id="4746557">)</span><span class="op" id="4746558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4746562">if</span>&nbsp;<span class="ident" id="4746565">err</span>&nbsp;<span class="op" id="4746569">!=</span>&nbsp;<span class="ident" id="4746572">nil</span>&nbsp;<span class="op" id="4746576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4746581">d</span><span class="op" id="4746582">.</span><span class="builtintype" id="4746583">error</span><span class="op" id="4746588">(</span><span class="ident" id="4746589">err</span><span class="op" id="4746592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4746596">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4746600">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4746608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4746611">if</span>&nbsp;<span class="ident" id="4746614">ut</span>&nbsp;<span class="op" id="4746617">!=</span>&nbsp;<span class="ident" id="4746620">nil</span>&nbsp;<span class="op" id="4746624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4746628">d</span><span class="op" id="4746629">.</span><span class="ident" id="4746630">saveError</span><span class="op" id="4746639">(</span><span class="op" id="4746640">&amp;</span><span class="ident" id="4746641">UnmarshalTypeError</span><span class="op" id="4746659">{</span><span class="string" id="4746660">&#34;object&#34;</span><span class="op" id="4746668">,</span>&nbsp;<span class="ident" id="4746670">v</span><span class="op" id="4746671">.</span><span class="ident" id="4746672">Type</span><span class="op" id="4746676">(</span><span class="op" id="4746677">)</span><span class="op" id="4746678">}</span><span class="op" id="4746679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4746683">d</span><span class="op" id="4746684">.</span><span class="ident" id="4746685">off</span><span class="op" id="4746688">--</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4746693">d</span><span class="op" id="4746694">.</span><span class="ident" id="4746695">next</span><span class="op" id="4746699">(</span><span class="op" id="4746700">)</span>&nbsp;<span class="comment" id="4746702">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4746730">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4746738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4746741">v</span>&nbsp;<span class="op" id="4746743">=</span>&nbsp;<span class="ident" id="4746745">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4746750">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4746812">if</span>&nbsp;<span class="ident" id="4746815">v</span><span class="op" id="4746816">.</span><span class="ident" id="4746817">Kind</span><span class="op" id="4746821">(</span><span class="op" id="4746822">)</span>&nbsp;<span class="op" id="4746824">==</span>&nbsp;<span class="ident" id="4746827">reflect</span><span class="op" id="4746834">.</span><span class="ident" id="4746835">Interface</span>&nbsp;<span class="op" id="4746845">&amp;&amp;</span>&nbsp;<span class="ident" id="4746848">v</span><span class="op" id="4746849">.</span><span class="ident" id="4746850">NumMethod</span><span class="op" id="4746859">(</span><span class="op" id="4746860">)</span>&nbsp;<span class="op" id="4746862">==</span>&nbsp;<span class="num" id="4746865">0</span>&nbsp;<span class="op" id="4746867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4746871">v</span><span class="op" id="4746872">.</span><span class="ident" id="4746873">Set</span><span class="op" id="4746876">(</span><span class="ident" id="4746877">reflect</span><span class="op" id="4746884">.</span><span class="ident" id="4746885">ValueOf</span><span class="op" id="4746892">(</span><span class="ident" id="4746893">d</span><span class="op" id="4746894">.</span><span class="ident" id="4746895">objectInterface</span><span class="op" id="4746910">(</span><span class="op" id="4746911">)</span><span class="op" id="4746912">)</span><span class="op" id="4746913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4746917">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4746925">}</span><br>
<span class="lineno">500</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4746929">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target:&nbsp;struct&nbsp;or&nbsp;map[string]T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4746978">switch</span>&nbsp;<span class="ident" id="4746985">v</span><span class="op" id="4746986">.</span><span class="ident" id="4746987">Kind</span><span class="op" id="4746991">(</span><span class="op" id="4746992">)</span>&nbsp;<span class="op" id="4746994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4746997">case</span>&nbsp;<span class="ident" id="4747002">reflect</span><span class="op" id="4747009">.</span><span class="ident" id="4747010">Map</span><span class="op" id="4747013">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4747017">//&nbsp;map&nbsp;must&nbsp;have&nbsp;string&nbsp;kind</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4747048">t</span>&nbsp;<span class="op" id="4747050">:=</span>&nbsp;<span class="ident" id="4747053">v</span><span class="op" id="4747054">.</span><span class="ident" id="4747055">Type</span><span class="op" id="4747059">(</span><span class="op" id="4747060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4747064">if</span>&nbsp;<span class="ident" id="4747067">t</span><span class="op" id="4747068">.</span><span class="ident" id="4747069">Key</span><span class="op" id="4747072">(</span><span class="op" id="4747073">)</span><span class="op" id="4747074">.</span><span class="ident" id="4747075">Kind</span><span class="op" id="4747079">(</span><span class="op" id="4747080">)</span>&nbsp;<span class="op" id="4747082">!=</span>&nbsp;<span class="ident" id="4747085">reflect</span><span class="op" id="4747092">.</span><span class="ident" id="4747093">String</span>&nbsp;<span class="op" id="4747100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4747105">d</span><span class="op" id="4747106">.</span><span class="ident" id="4747107">saveError</span><span class="op" id="4747116">(</span><span class="op" id="4747117">&amp;</span><span class="ident" id="4747118">UnmarshalTypeError</span><span class="op" id="4747136">{</span><span class="string" id="4747137">&#34;object&#34;</span><span class="op" id="4747145">,</span>&nbsp;<span class="ident" id="4747147">v</span><span class="op" id="4747148">.</span><span class="ident" id="4747149">Type</span><span class="op" id="4747153">(</span><span class="op" id="4747154">)</span><span class="op" id="4747155">}</span><span class="op" id="4747156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4747161">d</span><span class="op" id="4747162">.</span><span class="ident" id="4747163">off</span><span class="op" id="4747166">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4747172">d</span><span class="op" id="4747173">.</span><span class="ident" id="4747174">next</span><span class="op" id="4747178">(</span><span class="op" id="4747179">)</span>&nbsp;<span class="comment" id="4747181">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4747210">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4747219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4747223">if</span>&nbsp;<span class="ident" id="4747226">v</span><span class="op" id="4747227">.</span><span class="ident" id="4747228">IsNil</span><span class="op" id="4747233">(</span><span class="op" id="4747234">)</span>&nbsp;<span class="op" id="4747236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4747241">v</span><span class="op" id="4747242">.</span><span class="ident" id="4747243">Set</span><span class="op" id="4747246">(</span><span class="ident" id="4747247">reflect</span><span class="op" id="4747254">.</span><span class="ident" id="4747255">MakeMap</span><span class="op" id="4747262">(</span><span class="ident" id="4747263">t</span><span class="op" id="4747264">)</span><span class="op" id="4747265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4747269">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4747272">case</span>&nbsp;<span class="ident" id="4747277">reflect</span><span class="op" id="4747284">.</span><span class="ident" id="4747285">Struct</span><span class="op" id="4747291">:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4747295">default</span><span class="op" id="4747302">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4747306">d</span><span class="op" id="4747307">.</span><span class="ident" id="4747308">saveError</span><span class="op" id="4747317">(</span><span class="op" id="4747318">&amp;</span><span class="ident" id="4747319">UnmarshalTypeError</span><span class="op" id="4747337">{</span><span class="string" id="4747338">&#34;object&#34;</span><span class="op" id="4747346">,</span>&nbsp;<span class="ident" id="4747348">v</span><span class="op" id="4747349">.</span><span class="ident" id="4747350">Type</span><span class="op" id="4747354">(</span><span class="op" id="4747355">)</span><span class="op" id="4747356">}</span><span class="op" id="4747357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4747361">d</span><span class="op" id="4747362">.</span><span class="ident" id="4747363">off</span><span class="op" id="4747366">--</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4747371">d</span><span class="op" id="4747372">.</span><span class="ident" id="4747373">next</span><span class="op" id="4747377">(</span><span class="op" id="4747378">)</span>&nbsp;<span class="comment" id="4747380">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4747408">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4747416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4747420">var</span>&nbsp;<span class="ident" id="4747424">mapElem</span>&nbsp;<span class="ident" id="4747432">reflect</span><span class="op" id="4747439">.</span><span class="ident" id="4747440">Value</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4747448">for</span>&nbsp;<span class="op" id="4747452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4747456">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4747504">op</span>&nbsp;<span class="op" id="4747507">:=</span>&nbsp;<span class="ident" id="4747510">d</span><span class="op" id="4747511">.</span><span class="ident" id="4747512">scanWhile</span><span class="op" id="4747521">(</span><span class="ident" id="4747522">scanSkipSpace</span><span class="op" id="4747535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4747539">if</span>&nbsp;<span class="ident" id="4747542">op</span>&nbsp;<span class="op" id="4747545">==</span>&nbsp;<span class="ident" id="4747548">scanEndObject</span>&nbsp;<span class="op" id="4747562">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4747567">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4747621">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4747629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4747633">if</span>&nbsp;<span class="ident" id="4747636">op</span>&nbsp;<span class="op" id="4747639">!=</span>&nbsp;<span class="ident" id="4747642">scanBeginLiteral</span>&nbsp;<span class="op" id="4747659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4747664">d</span><span class="op" id="4747665">.</span><span class="builtintype" id="4747666">error</span><span class="op" id="4747671">(</span><span class="ident" id="4747672">errPhase</span><span class="op" id="4747680">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4747684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4747689">//&nbsp;Read&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4747704">start</span>&nbsp;<span class="op" id="4747710">:=</span>&nbsp;<span class="ident" id="4747713">d</span><span class="op" id="4747714">.</span><span class="ident" id="4747715">off</span>&nbsp;<span class="op" id="4747719">-</span>&nbsp;<span class="num" id="4747721">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4747725">op</span>&nbsp;<span class="op" id="4747728">=</span>&nbsp;<span class="ident" id="4747730">d</span><span class="op" id="4747731">.</span><span class="ident" id="4747732">scanWhile</span><span class="op" id="4747741">(</span><span class="ident" id="4747742">scanContinue</span><span class="op" id="4747754">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4747758">item</span>&nbsp;<span class="op" id="4747763">:=</span>&nbsp;<span class="ident" id="4747766">d</span><span class="op" id="4747767">.</span><span class="ident" id="4747768">data</span><span class="op" id="4747772">[</span><span class="ident" id="4747773">start</span>&nbsp;<span class="op" id="4747779">:</span>&nbsp;<span class="ident" id="4747781">d</span><span class="op" id="4747782">.</span><span class="ident" id="4747783">off</span><span class="op" id="4747786">-</span><span class="num" id="4747787">1</span><span class="op" id="4747788">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4747792">key</span><span class="op" id="4747795">,</span>&nbsp;<span class="ident" id="4747797">ok</span>&nbsp;<span class="op" id="4747800">:=</span>&nbsp;<span class="ident" id="4747803">unquoteBytes</span><span class="op" id="4747815">(</span><span class="ident" id="4747816">item</span><span class="op" id="4747820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4747824">if</span>&nbsp;<span class="op" id="4747827">!</span><span class="ident" id="4747828">ok</span>&nbsp;<span class="op" id="4747831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4747836">d</span><span class="op" id="4747837">.</span><span class="builtintype" id="4747838">error</span><span class="op" id="4747843">(</span><span class="ident" id="4747844">errPhase</span><span class="op" id="4747852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4747856">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4747861">//&nbsp;Figure&nbsp;out&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4747905">var</span>&nbsp;<span class="ident" id="4747909">subv</span>&nbsp;<span class="ident" id="4747914">reflect</span><span class="op" id="4747921">.</span><span class="ident" id="4747922">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4747930">destring</span>&nbsp;<span class="op" id="4747939">:=</span>&nbsp;<span class="builtintype" id="4747942">false</span>&nbsp;<span class="comment" id="4747948">//&nbsp;whether&nbsp;the&nbsp;value&nbsp;is&nbsp;wrapped&nbsp;in&nbsp;a&nbsp;string&nbsp;to&nbsp;be&nbsp;decoded&nbsp;first</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4748015">if</span>&nbsp;<span class="ident" id="4748018">v</span><span class="op" id="4748019">.</span><span class="ident" id="4748020">Kind</span><span class="op" id="4748024">(</span><span class="op" id="4748025">)</span>&nbsp;<span class="op" id="4748027">==</span>&nbsp;<span class="ident" id="4748030">reflect</span><span class="op" id="4748037">.</span><span class="ident" id="4748038">Map</span>&nbsp;<span class="op" id="4748042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4748047">elemType</span>&nbsp;<span class="op" id="4748056">:=</span>&nbsp;<span class="ident" id="4748059">v</span><span class="op" id="4748060">.</span><span class="ident" id="4748061">Type</span><span class="op" id="4748065">(</span><span class="op" id="4748066">)</span><span class="op" id="4748067">.</span><span class="ident" id="4748068">Elem</span><span class="op" id="4748072">(</span><span class="op" id="4748073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4748078">if</span>&nbsp;<span class="op" id="4748081">!</span><span class="ident" id="4748082">mapElem</span><span class="op" id="4748089">.</span><span class="ident" id="4748090">IsValid</span><span class="op" id="4748097">(</span><span class="op" id="4748098">)</span>&nbsp;<span class="op" id="4748100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4748106">mapElem</span>&nbsp;<span class="op" id="4748114">=</span>&nbsp;<span class="ident" id="4748116">reflect</span><span class="op" id="4748123">.</span><span class="ident" id="4748124">New</span><span class="op" id="4748127">(</span><span class="ident" id="4748128">elemType</span><span class="op" id="4748136">)</span><span class="op" id="4748137">.</span><span class="ident" id="4748138">Elem</span><span class="op" id="4748142">(</span><span class="op" id="4748143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4748148">}</span>&nbsp;<span class="keyword" id="4748150">else</span>&nbsp;<span class="op" id="4748155">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4748161">mapElem</span><span class="op" id="4748168">.</span><span class="ident" id="4748169">Set</span><span class="op" id="4748172">(</span><span class="ident" id="4748173">reflect</span><span class="op" id="4748180">.</span><span class="ident" id="4748181">Zero</span><span class="op" id="4748185">(</span><span class="ident" id="4748186">elemType</span><span class="op" id="4748194">)</span><span class="op" id="4748195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4748200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4748205">subv</span>&nbsp;<span class="op" id="4748210">=</span>&nbsp;<span class="ident" id="4748212">mapElem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4748222">}</span>&nbsp;<span class="keyword" id="4748224">else</span>&nbsp;<span class="op" id="4748229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4748234">var</span>&nbsp;<span class="ident" id="4748238">f</span>&nbsp;<span class="op" id="4748240">*</span><span class="ident" id="4748241">field</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4748250">fields</span>&nbsp;<span class="op" id="4748257">:=</span>&nbsp;<span class="ident" id="4748260">cachedTypeFields</span><span class="op" id="4748276">(</span><span class="ident" id="4748277">v</span><span class="op" id="4748278">.</span><span class="ident" id="4748279">Type</span><span class="op" id="4748283">(</span><span class="op" id="4748284">)</span><span class="op" id="4748285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4748290">for</span>&nbsp;<span class="ident" id="4748294">i</span>&nbsp;<span class="op" id="4748296">:=</span>&nbsp;<span class="keyword" id="4748299">range</span>&nbsp;<span class="ident" id="4748305">fields</span>&nbsp;<span class="op" id="4748312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4748318">ff</span>&nbsp;<span class="op" id="4748321">:=</span>&nbsp;<span class="op" id="4748324">&amp;</span><span class="ident" id="4748325">fields</span><span class="op" id="4748331">[</span><span class="ident" id="4748332">i</span><span class="op" id="4748333">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4748339">if</span>&nbsp;<span class="ident" id="4748342">bytes</span><span class="op" id="4748347">.</span><span class="ident" id="4748348">Equal</span><span class="op" id="4748353">(</span><span class="ident" id="4748354">ff</span><span class="op" id="4748356">.</span><span class="ident" id="4748357">nameBytes</span><span class="op" id="4748366">,</span>&nbsp;<span class="ident" id="4748368">key</span><span class="op" id="4748371">)</span>&nbsp;<span class="op" id="4748373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4748380">f</span>&nbsp;<span class="op" id="4748382">=</span>&nbsp;<span class="ident" id="4748384">ff</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4748392">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4748402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4748408">if</span>&nbsp;<span class="ident" id="4748411">f</span>&nbsp;<span class="op" id="4748413">==</span>&nbsp;<span class="ident" id="4748416">nil</span>&nbsp;<span class="op" id="4748420">&amp;&amp;</span>&nbsp;<span class="ident" id="4748423">ff</span><span class="op" id="4748425">.</span><span class="ident" id="4748426">equalFold</span><span class="op" id="4748435">(</span><span class="ident" id="4748436">ff</span><span class="op" id="4748438">.</span><span class="ident" id="4748439">nameBytes</span><span class="op" id="4748448">,</span>&nbsp;<span class="ident" id="4748450">key</span><span class="op" id="4748453">)</span>&nbsp;<span class="op" id="4748455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4748462">f</span>&nbsp;<span class="op" id="4748464">=</span>&nbsp;<span class="ident" id="4748466">ff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4748473">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4748478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4748483">if</span>&nbsp;<span class="ident" id="4748486">f</span>&nbsp;<span class="op" id="4748488">!=</span>&nbsp;<span class="ident" id="4748491">nil</span>&nbsp;<span class="op" id="4748495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4748501">subv</span>&nbsp;<span class="op" id="4748506">=</span>&nbsp;<span class="ident" id="4748508">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4748514">destring</span>&nbsp;<span class="op" id="4748523">=</span>&nbsp;<span class="ident" id="4748525">f</span><span class="op" id="4748526">.</span><span class="ident" id="4748527">quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4748538">for</span>&nbsp;<span class="ident" id="4748542">_</span><span class="op" id="4748543">,</span>&nbsp;<span class="ident" id="4748545">i</span>&nbsp;<span class="op" id="4748547">:=</span>&nbsp;<span class="keyword" id="4748550">range</span>&nbsp;<span class="ident" id="4748556">f</span><span class="op" id="4748557">.</span><span class="ident" id="4748558">index</span>&nbsp;<span class="op" id="4748564">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4748571">if</span>&nbsp;<span class="ident" id="4748574">subv</span><span class="op" id="4748578">.</span><span class="ident" id="4748579">Kind</span><span class="op" id="4748583">(</span><span class="op" id="4748584">)</span>&nbsp;<span class="op" id="4748586">==</span>&nbsp;<span class="ident" id="4748589">reflect</span><span class="op" id="4748596">.</span><span class="ident" id="4748597">Ptr</span>&nbsp;<span class="op" id="4748601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4748609">if</span>&nbsp;<span class="ident" id="4748612">subv</span><span class="op" id="4748616">.</span><span class="ident" id="4748617">IsNil</span><span class="op" id="4748622">(</span><span class="op" id="4748623">)</span>&nbsp;<span class="op" id="4748625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4748634">subv</span><span class="op" id="4748638">.</span><span class="ident" id="4748639">Set</span><span class="op" id="4748642">(</span><span class="ident" id="4748643">reflect</span><span class="op" id="4748650">.</span><span class="ident" id="4748651">New</span><span class="op" id="4748654">(</span><span class="ident" id="4748655">subv</span><span class="op" id="4748659">.</span><span class="ident" id="4748660">Type</span><span class="op" id="4748664">(</span><span class="op" id="4748665">)</span><span class="op" id="4748666">.</span><span class="ident" id="4748667">Elem</span><span class="op" id="4748671">(</span><span class="op" id="4748672">)</span><span class="op" id="4748673">)</span><span class="op" id="4748674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4748682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4748690">subv</span>&nbsp;<span class="op" id="4748695">=</span>&nbsp;<span class="ident" id="4748697">subv</span><span class="op" id="4748701">.</span><span class="ident" id="4748702">Elem</span><span class="op" id="4748706">(</span><span class="op" id="4748707">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4748714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4748721">subv</span>&nbsp;<span class="op" id="4748726">=</span>&nbsp;<span class="ident" id="4748728">subv</span><span class="op" id="4748732">.</span><span class="ident" id="4748733">Field</span><span class="op" id="4748738">(</span><span class="ident" id="4748739">i</span><span class="op" id="4748740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4748746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4748751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4748755">}</span><br>
<span class="lineno">585</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4748760">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4748786">if</span>&nbsp;<span class="ident" id="4748789">op</span>&nbsp;<span class="op" id="4748792">==</span>&nbsp;<span class="ident" id="4748795">scanSkipSpace</span>&nbsp;<span class="op" id="4748809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4748814">op</span>&nbsp;<span class="op" id="4748817">=</span>&nbsp;<span class="ident" id="4748819">d</span><span class="op" id="4748820">.</span><span class="ident" id="4748821">scanWhile</span><span class="op" id="4748830">(</span><span class="ident" id="4748831">scanSkipSpace</span><span class="op" id="4748844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4748848">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4748852">if</span>&nbsp;<span class="ident" id="4748855">op</span>&nbsp;<span class="op" id="4748858">!=</span>&nbsp;<span class="ident" id="4748861">scanObjectKey</span>&nbsp;<span class="op" id="4748875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4748880">d</span><span class="op" id="4748881">.</span><span class="builtintype" id="4748882">error</span><span class="op" id="4748887">(</span><span class="ident" id="4748888">errPhase</span><span class="op" id="4748896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4748900">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4748905">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4748922">if</span>&nbsp;<span class="ident" id="4748925">destring</span>&nbsp;<span class="op" id="4748934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4748939">switch</span>&nbsp;<span class="ident" id="4748946">qv</span>&nbsp;<span class="op" id="4748949">:=</span>&nbsp;<span class="ident" id="4748952">d</span><span class="op" id="4748953">.</span><span class="ident" id="4748954">valueQuoted</span><span class="op" id="4748965">(</span><span class="op" id="4748966">)</span><span class="op" id="4748967">.</span><span class="op" id="4748968">(</span><span class="keyword" id="4748969">type</span><span class="op" id="4748973">)</span>&nbsp;<span class="op" id="4748975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4748980">case</span>&nbsp;<span class="ident" id="4748985">nil</span><span class="op" id="4748988">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4748994">d</span><span class="op" id="4748995">.</span><span class="ident" id="4748996">literalStore</span><span class="op" id="4749008">(</span><span class="ident" id="4749009">nullLiteral</span><span class="op" id="4749020">,</span>&nbsp;<span class="ident" id="4749022">subv</span><span class="op" id="4749026">,</span>&nbsp;<span class="builtintype" id="4749028">false</span><span class="op" id="4749033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4749038">case</span>&nbsp;<span class="builtintype" id="4749043">string</span><span class="op" id="4749049">:</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4749055">d</span><span class="op" id="4749056">.</span><span class="ident" id="4749057">literalStore</span><span class="op" id="4749069">(</span><span class="op" id="4749070">[</span><span class="op" id="4749071">]</span><span class="builtintype" id="4749072">byte</span><span class="op" id="4749076">(</span><span class="ident" id="4749077">qv</span><span class="op" id="4749079">)</span><span class="op" id="4749080">,</span>&nbsp;<span class="ident" id="4749082">subv</span><span class="op" id="4749086">,</span>&nbsp;<span class="builtintype" id="4749088">true</span><span class="op" id="4749092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4749097">default</span><span class="op" id="4749104">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4749110">d</span><span class="op" id="4749111">.</span><span class="ident" id="4749112">saveError</span><span class="op" id="4749121">(</span><span class="ident" id="4749122">fmt</span><span class="op" id="4749125">.</span><span class="ident" id="4749126">Errorf</span><span class="op" id="4749132">(</span><span class="string" id="4749133">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;unquoted&nbsp;value&nbsp;into&nbsp;%v&#34;</span><span class="op" id="4749218">,</span>&nbsp;<span class="ident" id="4749220">item</span><span class="op" id="4749224">,</span>&nbsp;<span class="ident" id="4749226">v</span><span class="op" id="4749227">.</span><span class="ident" id="4749228">Type</span><span class="op" id="4749232">(</span><span class="op" id="4749233">)</span><span class="op" id="4749234">)</span><span class="op" id="4749235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4749240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4749244">}</span>&nbsp;<span class="keyword" id="4749246">else</span>&nbsp;<span class="op" id="4749251">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4749256">d</span><span class="op" id="4749257">.</span><span class="ident" id="4749258">value</span><span class="op" id="4749263">(</span><span class="ident" id="4749264">subv</span><span class="op" id="4749268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4749272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4749277">//&nbsp;Write&nbsp;value&nbsp;back&nbsp;to&nbsp;map;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4749307">//&nbsp;if&nbsp;using&nbsp;struct,&nbsp;subv&nbsp;points&nbsp;into&nbsp;struct&nbsp;already.</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4749362">if</span>&nbsp;<span class="ident" id="4749365">v</span><span class="op" id="4749366">.</span><span class="ident" id="4749367">Kind</span><span class="op" id="4749371">(</span><span class="op" id="4749372">)</span>&nbsp;<span class="op" id="4749374">==</span>&nbsp;<span class="ident" id="4749377">reflect</span><span class="op" id="4749384">.</span><span class="ident" id="4749385">Map</span>&nbsp;<span class="op" id="4749389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4749394">kv</span>&nbsp;<span class="op" id="4749397">:=</span>&nbsp;<span class="ident" id="4749400">reflect</span><span class="op" id="4749407">.</span><span class="ident" id="4749408">ValueOf</span><span class="op" id="4749415">(</span><span class="ident" id="4749416">key</span><span class="op" id="4749419">)</span><span class="op" id="4749420">.</span><span class="ident" id="4749421">Convert</span><span class="op" id="4749428">(</span><span class="ident" id="4749429">v</span><span class="op" id="4749430">.</span><span class="ident" id="4749431">Type</span><span class="op" id="4749435">(</span><span class="op" id="4749436">)</span><span class="op" id="4749437">.</span><span class="ident" id="4749438">Key</span><span class="op" id="4749441">(</span><span class="op" id="4749442">)</span><span class="op" id="4749443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4749448">v</span><span class="op" id="4749449">.</span><span class="ident" id="4749450">SetMapIndex</span><span class="op" id="4749461">(</span><span class="ident" id="4749462">kv</span><span class="op" id="4749464">,</span>&nbsp;<span class="ident" id="4749466">subv</span><span class="op" id="4749470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4749474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4749479">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4749511">op</span>&nbsp;<span class="op" id="4749514">=</span>&nbsp;<span class="ident" id="4749516">d</span><span class="op" id="4749517">.</span><span class="ident" id="4749518">scanWhile</span><span class="op" id="4749527">(</span><span class="ident" id="4749528">scanSkipSpace</span><span class="op" id="4749541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4749545">if</span>&nbsp;<span class="ident" id="4749548">op</span>&nbsp;<span class="op" id="4749551">==</span>&nbsp;<span class="ident" id="4749554">scanEndObject</span>&nbsp;<span class="op" id="4749568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4749573">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4749581">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4749585">if</span>&nbsp;<span class="ident" id="4749588">op</span>&nbsp;<span class="op" id="4749591">!=</span>&nbsp;<span class="ident" id="4749594">scanObjectValue</span>&nbsp;<span class="op" id="4749610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4749615">d</span><span class="op" id="4749616">.</span><span class="builtintype" id="4749617">error</span><span class="op" id="4749622">(</span><span class="ident" id="4749623">errPhase</span><span class="op" id="4749631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4749635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4749638">}</span><br>
<span class="lineno"></span><span class="op" id="4749640">}</span><br>
<span class="lineno">625</span><br>
<span class="lineno"></span><span class="comment" id="4749643">//&nbsp;literal&nbsp;consumes&nbsp;a&nbsp;literal&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="4749723">//&nbsp;The&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;literal&nbsp;has&nbsp;been&nbsp;read&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="4749778">//&nbsp;(that&#39;s&nbsp;how&nbsp;the&nbsp;caller&nbsp;knows&nbsp;it&#39;s&nbsp;a&nbsp;literal).</span><br>
<span class="lineno"></span><span class="keyword" id="4749827">func</span>&nbsp;<span class="op" id="4749832">(</span><span class="ident" id="4749833">d</span>&nbsp;<span class="op" id="4749835">*</span><span class="ident" id="4749836">decodeState</span><span class="op" id="4749847">)</span>&nbsp;<span class="ident" id="4749849">literal</span><span class="op" id="4749856">(</span><span class="ident" id="4749857">v</span>&nbsp;<span class="ident" id="4749859">reflect</span><span class="op" id="4749866">.</span><span class="ident" id="4749867">Value</span><span class="op" id="4749872">)</span>&nbsp;<span class="op" id="4749874">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4749877">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4749935">start</span>&nbsp;<span class="op" id="4749941">:=</span>&nbsp;<span class="ident" id="4749944">d</span><span class="op" id="4749945">.</span><span class="ident" id="4749946">off</span>&nbsp;<span class="op" id="4749950">-</span>&nbsp;<span class="num" id="4749952">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4749955">op</span>&nbsp;<span class="op" id="4749958">:=</span>&nbsp;<span class="ident" id="4749961">d</span><span class="op" id="4749962">.</span><span class="ident" id="4749963">scanWhile</span><span class="op" id="4749972">(</span><span class="ident" id="4749973">scanContinue</span><span class="op" id="4749985">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4749989">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4750030">d</span><span class="op" id="4750031">.</span><span class="ident" id="4750032">off</span><span class="op" id="4750035">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4750039">d</span><span class="op" id="4750040">.</span><span class="ident" id="4750041">scan</span><span class="op" id="4750045">.</span><span class="ident" id="4750046">undo</span><span class="op" id="4750050">(</span><span class="ident" id="4750051">op</span><span class="op" id="4750053">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4750057">d</span><span class="op" id="4750058">.</span><span class="ident" id="4750059">literalStore</span><span class="op" id="4750071">(</span><span class="ident" id="4750072">d</span><span class="op" id="4750073">.</span><span class="ident" id="4750074">data</span><span class="op" id="4750078">[</span><span class="ident" id="4750079">start</span><span class="op" id="4750084">:</span><span class="ident" id="4750085">d</span><span class="op" id="4750086">.</span><span class="ident" id="4750087">off</span><span class="op" id="4750090">]</span><span class="op" id="4750091">,</span>&nbsp;<span class="ident" id="4750093">v</span><span class="op" id="4750094">,</span>&nbsp;<span class="builtintype" id="4750096">false</span><span class="op" id="4750101">)</span><br>
<span class="lineno"></span><span class="op" id="4750103">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="4750106">//&nbsp;convertNumber&nbsp;converts&nbsp;the&nbsp;number&nbsp;literal&nbsp;s&nbsp;to&nbsp;a&nbsp;float64&nbsp;or&nbsp;a&nbsp;Number</span><br>
<span class="lineno"></span><span class="comment" id="4750178">//&nbsp;depending&nbsp;on&nbsp;the&nbsp;setting&nbsp;of&nbsp;d.useNumber.</span><br>
<span class="lineno"></span><span class="keyword" id="4750222">func</span>&nbsp;<span class="op" id="4750227">(</span><span class="ident" id="4750228">d</span>&nbsp;<span class="op" id="4750230">*</span><span class="ident" id="4750231">decodeState</span><span class="op" id="4750242">)</span>&nbsp;<span class="ident" id="4750244">convertNumber</span><span class="op" id="4750257">(</span><span class="ident" id="4750258">s</span>&nbsp;<span class="builtintype" id="4750260">string</span><span class="op" id="4750266">)</span>&nbsp;<span class="op" id="4750268">(</span><span class="keyword" id="4750269">interface</span><span class="op" id="4750278">{</span><span class="op" id="4750279">}</span><span class="op" id="4750280">,</span>&nbsp;<span class="builtintype" id="4750282">error</span><span class="op" id="4750287">)</span>&nbsp;<span class="op" id="4750289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4750292">if</span>&nbsp;<span class="ident" id="4750295">d</span><span class="op" id="4750296">.</span><span class="ident" id="4750297">useNumber</span>&nbsp;<span class="op" id="4750307">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4750311">return</span>&nbsp;<span class="ident" id="4750318">Number</span><span class="op" id="4750324">(</span><span class="ident" id="4750325">s</span><span class="op" id="4750326">)</span><span class="op" id="4750327">,</span>&nbsp;<span class="ident" id="4750329">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4750334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4750337">f</span><span class="op" id="4750338">,</span>&nbsp;<span class="ident" id="4750340">err</span>&nbsp;<span class="op" id="4750344">:=</span>&nbsp;<span class="ident" id="4750347">strconv</span><span class="op" id="4750354">.</span><span class="ident" id="4750355">ParseFloat</span><span class="op" id="4750365">(</span><span class="ident" id="4750366">s</span><span class="op" id="4750367">,</span>&nbsp;<span class="num" id="4750369">64</span><span class="op" id="4750371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4750374">if</span>&nbsp;<span class="ident" id="4750377">err</span>&nbsp;<span class="op" id="4750381">!=</span>&nbsp;<span class="ident" id="4750384">nil</span>&nbsp;<span class="op" id="4750388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4750392">return</span>&nbsp;<span class="ident" id="4750399">nil</span><span class="op" id="4750402">,</span>&nbsp;<span class="op" id="4750404">&amp;</span><span class="ident" id="4750405">UnmarshalTypeError</span><span class="op" id="4750423">{</span><span class="string" id="4750424">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="4750434">+</span>&nbsp;<span class="ident" id="4750436">s</span><span class="op" id="4750437">,</span>&nbsp;<span class="ident" id="4750439">reflect</span><span class="op" id="4750446">.</span><span class="ident" id="4750447">TypeOf</span><span class="op" id="4750453">(</span><span class="num" id="4750454">0.0</span><span class="op" id="4750457">)</span><span class="op" id="4750458">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4750461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4750464">return</span>&nbsp;<span class="ident" id="4750471">f</span><span class="op" id="4750472">,</span>&nbsp;<span class="ident" id="4750474">nil</span><br>
<span class="lineno"></span><span class="op" id="4750478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4750481">var</span>&nbsp;<span class="ident" id="4750485">numberType</span>&nbsp;<span class="op" id="4750496">=</span>&nbsp;<span class="ident" id="4750498">reflect</span><span class="op" id="4750505">.</span><span class="ident" id="4750506">TypeOf</span><span class="op" id="4750512">(</span><span class="ident" id="4750513">Number</span><span class="op" id="4750519">(</span><span class="string" id="4750520">&#34;&#34;</span><span class="op" id="4750522">)</span><span class="op" id="4750523">)</span><br>
<span class="lineno">655</span><br>
<span class="lineno"></span><span class="comment" id="4750526">//&nbsp;literalStore&nbsp;decodes&nbsp;a&nbsp;literal&nbsp;stored&nbsp;in&nbsp;item&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="4750583">//</span><br>
<span class="lineno"></span><span class="comment" id="4750586">//&nbsp;fromQuoted&nbsp;indicates&nbsp;whether&nbsp;this&nbsp;literal&nbsp;came&nbsp;from&nbsp;unwrapping&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4750654">//&nbsp;string&nbsp;from&nbsp;the&nbsp;&#34;,string&#34;&nbsp;struct&nbsp;tag&nbsp;option.&nbsp;this&nbsp;is&nbsp;used&nbsp;only&nbsp;to</span><br>
<span class="lineno">660</span><span class="comment" id="4750723">//&nbsp;produce&nbsp;more&nbsp;helpful&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="4750763">func</span>&nbsp;<span class="op" id="4750768">(</span><span class="ident" id="4750769">d</span>&nbsp;<span class="op" id="4750771">*</span><span class="ident" id="4750772">decodeState</span><span class="op" id="4750783">)</span>&nbsp;<span class="ident" id="4750785">literalStore</span><span class="op" id="4750797">(</span><span class="ident" id="4750798">item</span>&nbsp;<span class="op" id="4750803">[</span><span class="op" id="4750804">]</span><span class="builtintype" id="4750805">byte</span><span class="op" id="4750809">,</span>&nbsp;<span class="ident" id="4750811">v</span>&nbsp;<span class="ident" id="4750813">reflect</span><span class="op" id="4750820">.</span><span class="ident" id="4750821">Value</span><span class="op" id="4750826">,</span>&nbsp;<span class="ident" id="4750828">fromQuoted</span>&nbsp;<span class="builtintype" id="4750839">bool</span><span class="op" id="4750843">)</span>&nbsp;<span class="op" id="4750845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4750848">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4750875">if</span>&nbsp;<span class="builtinfunc" id="4750878">len</span><span class="op" id="4750881">(</span><span class="ident" id="4750882">item</span><span class="op" id="4750886">)</span>&nbsp;<span class="op" id="4750888">==</span>&nbsp;<span class="num" id="4750891">0</span>&nbsp;<span class="op" id="4750893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4750897">//Empty&nbsp;string&nbsp;given</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4750920">d</span><span class="op" id="4750921">.</span><span class="ident" id="4750922">saveError</span><span class="op" id="4750931">(</span><span class="ident" id="4750932">fmt</span><span class="op" id="4750935">.</span><span class="ident" id="4750936">Errorf</span><span class="op" id="4750942">(</span><span class="string" id="4750943">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="4751016">,</span>&nbsp;<span class="ident" id="4751018">item</span><span class="op" id="4751022">,</span>&nbsp;<span class="ident" id="4751024">v</span><span class="op" id="4751025">.</span><span class="ident" id="4751026">Type</span><span class="op" id="4751030">(</span><span class="op" id="4751031">)</span><span class="op" id="4751032">)</span><span class="op" id="4751033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4751037">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4751045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4751048">wantptr</span>&nbsp;<span class="op" id="4751056">:=</span>&nbsp;<span class="ident" id="4751059">item</span><span class="op" id="4751063">[</span><span class="num" id="4751064">0</span><span class="op" id="4751065">]</span>&nbsp;<span class="op" id="4751067">==</span>&nbsp;<span class="string" id="4751070">&#39;n&#39;</span>&nbsp;<span class="comment" id="4751074">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4751083">u</span><span class="op" id="4751084">,</span>&nbsp;<span class="ident" id="4751086">ut</span><span class="op" id="4751088">,</span>&nbsp;<span class="ident" id="4751090">pv</span>&nbsp;<span class="op" id="4751093">:=</span>&nbsp;<span class="ident" id="4751096">d</span><span class="op" id="4751097">.</span><span class="ident" id="4751098">indirect</span><span class="op" id="4751106">(</span><span class="ident" id="4751107">v</span><span class="op" id="4751108">,</span>&nbsp;<span class="ident" id="4751110">wantptr</span><span class="op" id="4751117">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4751120">if</span>&nbsp;<span class="ident" id="4751123">u</span>&nbsp;<span class="op" id="4751125">!=</span>&nbsp;<span class="ident" id="4751128">nil</span>&nbsp;<span class="op" id="4751132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4751136">err</span>&nbsp;<span class="op" id="4751140">:=</span>&nbsp;<span class="ident" id="4751143">u</span><span class="op" id="4751144">.</span><span class="ident" id="4751145">UnmarshalJSON</span><span class="op" id="4751158">(</span><span class="ident" id="4751159">item</span><span class="op" id="4751163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4751167">if</span>&nbsp;<span class="ident" id="4751170">err</span>&nbsp;<span class="op" id="4751174">!=</span>&nbsp;<span class="ident" id="4751177">nil</span>&nbsp;<span class="op" id="4751181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4751186">d</span><span class="op" id="4751187">.</span><span class="builtintype" id="4751188">error</span><span class="op" id="4751193">(</span><span class="ident" id="4751194">err</span><span class="op" id="4751197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4751201">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4751205">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4751213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4751216">if</span>&nbsp;<span class="ident" id="4751219">ut</span>&nbsp;<span class="op" id="4751222">!=</span>&nbsp;<span class="ident" id="4751225">nil</span>&nbsp;<span class="op" id="4751229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4751233">if</span>&nbsp;<span class="ident" id="4751236">item</span><span class="op" id="4751240">[</span><span class="num" id="4751241">0</span><span class="op" id="4751242">]</span>&nbsp;<span class="op" id="4751244">!=</span>&nbsp;<span class="string" id="4751247">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4751251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4751256">if</span>&nbsp;<span class="ident" id="4751259">fromQuoted</span>&nbsp;<span class="op" id="4751270">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4751276">d</span><span class="op" id="4751277">.</span><span class="ident" id="4751278">saveError</span><span class="op" id="4751287">(</span><span class="ident" id="4751288">fmt</span><span class="op" id="4751291">.</span><span class="ident" id="4751292">Errorf</span><span class="op" id="4751298">(</span><span class="string" id="4751299">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="4751372">,</span>&nbsp;<span class="ident" id="4751374">item</span><span class="op" id="4751378">,</span>&nbsp;<span class="ident" id="4751380">v</span><span class="op" id="4751381">.</span><span class="ident" id="4751382">Type</span><span class="op" id="4751386">(</span><span class="op" id="4751387">)</span><span class="op" id="4751388">)</span><span class="op" id="4751389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4751394">}</span>&nbsp;<span class="keyword" id="4751396">else</span>&nbsp;<span class="op" id="4751401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4751407">d</span><span class="op" id="4751408">.</span><span class="ident" id="4751409">saveError</span><span class="op" id="4751418">(</span><span class="op" id="4751419">&amp;</span><span class="ident" id="4751420">UnmarshalTypeError</span><span class="op" id="4751438">{</span><span class="string" id="4751439">&#34;string&#34;</span><span class="op" id="4751447">,</span>&nbsp;<span class="ident" id="4751449">v</span><span class="op" id="4751450">.</span><span class="ident" id="4751451">Type</span><span class="op" id="4751455">(</span><span class="op" id="4751456">)</span><span class="op" id="4751457">}</span><span class="op" id="4751458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4751463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4751467">}</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4751471">s</span><span class="op" id="4751472">,</span>&nbsp;<span class="ident" id="4751474">ok</span>&nbsp;<span class="op" id="4751477">:=</span>&nbsp;<span class="ident" id="4751480">unquoteBytes</span><span class="op" id="4751492">(</span><span class="ident" id="4751493">item</span><span class="op" id="4751497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4751501">if</span>&nbsp;<span class="op" id="4751504">!</span><span class="ident" id="4751505">ok</span>&nbsp;<span class="op" id="4751508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4751513">if</span>&nbsp;<span class="ident" id="4751516">fromQuoted</span>&nbsp;<span class="op" id="4751527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4751533">d</span><span class="op" id="4751534">.</span><span class="builtintype" id="4751535">error</span><span class="op" id="4751540">(</span><span class="ident" id="4751541">fmt</span><span class="op" id="4751544">.</span><span class="ident" id="4751545">Errorf</span><span class="op" id="4751551">(</span><span class="string" id="4751552">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="4751625">,</span>&nbsp;<span class="ident" id="4751627">item</span><span class="op" id="4751631">,</span>&nbsp;<span class="ident" id="4751633">v</span><span class="op" id="4751634">.</span><span class="ident" id="4751635">Type</span><span class="op" id="4751639">(</span><span class="op" id="4751640">)</span><span class="op" id="4751641">)</span><span class="op" id="4751642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4751647">}</span>&nbsp;<span class="keyword" id="4751649">else</span>&nbsp;<span class="op" id="4751654">{</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4751660">d</span><span class="op" id="4751661">.</span><span class="builtintype" id="4751662">error</span><span class="op" id="4751667">(</span><span class="ident" id="4751668">errPhase</span><span class="op" id="4751676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4751681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4751685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4751689">err</span>&nbsp;<span class="op" id="4751693">:=</span>&nbsp;<span class="ident" id="4751696">ut</span><span class="op" id="4751698">.</span><span class="ident" id="4751699">UnmarshalText</span><span class="op" id="4751712">(</span><span class="ident" id="4751713">s</span><span class="op" id="4751714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4751718">if</span>&nbsp;<span class="ident" id="4751721">err</span>&nbsp;<span class="op" id="4751725">!=</span>&nbsp;<span class="ident" id="4751728">nil</span>&nbsp;<span class="op" id="4751732">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4751737">d</span><span class="op" id="4751738">.</span><span class="builtintype" id="4751739">error</span><span class="op" id="4751744">(</span><span class="ident" id="4751745">err</span><span class="op" id="4751748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4751752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4751756">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4751764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4751768">v</span>&nbsp;<span class="op" id="4751770">=</span>&nbsp;<span class="ident" id="4751772">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4751777">switch</span>&nbsp;<span class="ident" id="4751784">c</span>&nbsp;<span class="op" id="4751786">:=</span>&nbsp;<span class="ident" id="4751789">item</span><span class="op" id="4751793">[</span><span class="num" id="4751794">0</span><span class="op" id="4751795">]</span><span class="op" id="4751796">;</span>&nbsp;<span class="ident" id="4751798">c</span>&nbsp;<span class="op" id="4751800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4751803">case</span>&nbsp;<span class="string" id="4751808">&#39;n&#39;</span><span class="op" id="4751811">:</span>&nbsp;<span class="comment" id="4751813">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4751823">switch</span>&nbsp;<span class="ident" id="4751830">v</span><span class="op" id="4751831">.</span><span class="ident" id="4751832">Kind</span><span class="op" id="4751836">(</span><span class="op" id="4751837">)</span>&nbsp;<span class="op" id="4751839">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4751843">case</span>&nbsp;<span class="ident" id="4751848">reflect</span><span class="op" id="4751855">.</span><span class="ident" id="4751856">Interface</span><span class="op" id="4751865">,</span>&nbsp;<span class="ident" id="4751867">reflect</span><span class="op" id="4751874">.</span><span class="ident" id="4751875">Ptr</span><span class="op" id="4751878">,</span>&nbsp;<span class="ident" id="4751880">reflect</span><span class="op" id="4751887">.</span><span class="ident" id="4751888">Map</span><span class="op" id="4751891">,</span>&nbsp;<span class="ident" id="4751893">reflect</span><span class="op" id="4751900">.</span><span class="ident" id="4751901">Slice</span><span class="op" id="4751906">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4751911">v</span><span class="op" id="4751912">.</span><span class="ident" id="4751913">Set</span><span class="op" id="4751916">(</span><span class="ident" id="4751917">reflect</span><span class="op" id="4751924">.</span><span class="ident" id="4751925">Zero</span><span class="op" id="4751929">(</span><span class="ident" id="4751930">v</span><span class="op" id="4751931">.</span><span class="ident" id="4751932">Type</span><span class="op" id="4751936">(</span><span class="op" id="4751937">)</span><span class="op" id="4751938">)</span><span class="op" id="4751939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4751944">//&nbsp;otherwise,&nbsp;ignore&nbsp;null&nbsp;for&nbsp;primitives/string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4751994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4751997">case</span>&nbsp;<span class="string" id="4752002">&#39;t&#39;</span><span class="op" id="4752005">,</span>&nbsp;<span class="string" id="4752007">&#39;f&#39;</span><span class="op" id="4752010">:</span>&nbsp;<span class="comment" id="4752012">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4752029">value</span>&nbsp;<span class="op" id="4752035">:=</span>&nbsp;<span class="ident" id="4752038">c</span>&nbsp;<span class="op" id="4752040">==</span>&nbsp;<span class="string" id="4752043">&#39;t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4752049">switch</span>&nbsp;<span class="ident" id="4752056">v</span><span class="op" id="4752057">.</span><span class="ident" id="4752058">Kind</span><span class="op" id="4752062">(</span><span class="op" id="4752063">)</span>&nbsp;<span class="op" id="4752065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4752069">default</span><span class="op" id="4752076">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4752081">if</span>&nbsp;<span class="ident" id="4752084">fromQuoted</span>&nbsp;<span class="op" id="4752095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4752101">d</span><span class="op" id="4752102">.</span><span class="ident" id="4752103">saveError</span><span class="op" id="4752112">(</span><span class="ident" id="4752113">fmt</span><span class="op" id="4752116">.</span><span class="ident" id="4752117">Errorf</span><span class="op" id="4752123">(</span><span class="string" id="4752124">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="4752197">,</span>&nbsp;<span class="ident" id="4752199">item</span><span class="op" id="4752203">,</span>&nbsp;<span class="ident" id="4752205">v</span><span class="op" id="4752206">.</span><span class="ident" id="4752207">Type</span><span class="op" id="4752211">(</span><span class="op" id="4752212">)</span><span class="op" id="4752213">)</span><span class="op" id="4752214">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4752219">}</span>&nbsp;<span class="keyword" id="4752221">else</span>&nbsp;<span class="op" id="4752226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4752232">d</span><span class="op" id="4752233">.</span><span class="ident" id="4752234">saveError</span><span class="op" id="4752243">(</span><span class="op" id="4752244">&amp;</span><span class="ident" id="4752245">UnmarshalTypeError</span><span class="op" id="4752263">{</span><span class="string" id="4752264">&#34;bool&#34;</span><span class="op" id="4752270">,</span>&nbsp;<span class="ident" id="4752272">v</span><span class="op" id="4752273">.</span><span class="ident" id="4752274">Type</span><span class="op" id="4752278">(</span><span class="op" id="4752279">)</span><span class="op" id="4752280">}</span><span class="op" id="4752281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4752286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4752290">case</span>&nbsp;<span class="ident" id="4752295">reflect</span><span class="op" id="4752302">.</span><span class="ident" id="4752303">Bool</span><span class="op" id="4752307">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4752312">v</span><span class="op" id="4752313">.</span><span class="ident" id="4752314">SetBool</span><span class="op" id="4752321">(</span><span class="ident" id="4752322">value</span><span class="op" id="4752327">)</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4752331">case</span>&nbsp;<span class="ident" id="4752336">reflect</span><span class="op" id="4752343">.</span><span class="ident" id="4752344">Interface</span><span class="op" id="4752353">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4752358">if</span>&nbsp;<span class="ident" id="4752361">v</span><span class="op" id="4752362">.</span><span class="ident" id="4752363">NumMethod</span><span class="op" id="4752372">(</span><span class="op" id="4752373">)</span>&nbsp;<span class="op" id="4752375">==</span>&nbsp;<span class="num" id="4752378">0</span>&nbsp;<span class="op" id="4752380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4752386">v</span><span class="op" id="4752387">.</span><span class="ident" id="4752388">Set</span><span class="op" id="4752391">(</span><span class="ident" id="4752392">reflect</span><span class="op" id="4752399">.</span><span class="ident" id="4752400">ValueOf</span><span class="op" id="4752407">(</span><span class="ident" id="4752408">value</span><span class="op" id="4752413">)</span><span class="op" id="4752414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4752419">}</span>&nbsp;<span class="keyword" id="4752421">else</span>&nbsp;<span class="op" id="4752426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4752432">d</span><span class="op" id="4752433">.</span><span class="ident" id="4752434">saveError</span><span class="op" id="4752443">(</span><span class="op" id="4752444">&amp;</span><span class="ident" id="4752445">UnmarshalTypeError</span><span class="op" id="4752463">{</span><span class="string" id="4752464">&#34;bool&#34;</span><span class="op" id="4752470">,</span>&nbsp;<span class="ident" id="4752472">v</span><span class="op" id="4752473">.</span><span class="ident" id="4752474">Type</span><span class="op" id="4752478">(</span><span class="op" id="4752479">)</span><span class="op" id="4752480">}</span><span class="op" id="4752481">)</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4752486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4752490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4752494">case</span>&nbsp;<span class="string" id="4752499">&#39;&#34;&#39;</span><span class="op" id="4752502">:</span>&nbsp;<span class="comment" id="4752504">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4752516">s</span><span class="op" id="4752517">,</span>&nbsp;<span class="ident" id="4752519">ok</span>&nbsp;<span class="op" id="4752522">:=</span>&nbsp;<span class="ident" id="4752525">unquoteBytes</span><span class="op" id="4752537">(</span><span class="ident" id="4752538">item</span><span class="op" id="4752542">)</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4752546">if</span>&nbsp;<span class="op" id="4752549">!</span><span class="ident" id="4752550">ok</span>&nbsp;<span class="op" id="4752553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4752558">if</span>&nbsp;<span class="ident" id="4752561">fromQuoted</span>&nbsp;<span class="op" id="4752572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4752578">d</span><span class="op" id="4752579">.</span><span class="builtintype" id="4752580">error</span><span class="op" id="4752585">(</span><span class="ident" id="4752586">fmt</span><span class="op" id="4752589">.</span><span class="ident" id="4752590">Errorf</span><span class="op" id="4752596">(</span><span class="string" id="4752597">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="4752670">,</span>&nbsp;<span class="ident" id="4752672">item</span><span class="op" id="4752676">,</span>&nbsp;<span class="ident" id="4752678">v</span><span class="op" id="4752679">.</span><span class="ident" id="4752680">Type</span><span class="op" id="4752684">(</span><span class="op" id="4752685">)</span><span class="op" id="4752686">)</span><span class="op" id="4752687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4752692">}</span>&nbsp;<span class="keyword" id="4752694">else</span>&nbsp;<span class="op" id="4752699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4752705">d</span><span class="op" id="4752706">.</span><span class="builtintype" id="4752707">error</span><span class="op" id="4752712">(</span><span class="ident" id="4752713">errPhase</span><span class="op" id="4752721">)</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4752726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4752730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4752734">switch</span>&nbsp;<span class="ident" id="4752741">v</span><span class="op" id="4752742">.</span><span class="ident" id="4752743">Kind</span><span class="op" id="4752747">(</span><span class="op" id="4752748">)</span>&nbsp;<span class="op" id="4752750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4752754">default</span><span class="op" id="4752761">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4752766">d</span><span class="op" id="4752767">.</span><span class="ident" id="4752768">saveError</span><span class="op" id="4752777">(</span><span class="op" id="4752778">&amp;</span><span class="ident" id="4752779">UnmarshalTypeError</span><span class="op" id="4752797">{</span><span class="string" id="4752798">&#34;string&#34;</span><span class="op" id="4752806">,</span>&nbsp;<span class="ident" id="4752808">v</span><span class="op" id="4752809">.</span><span class="ident" id="4752810">Type</span><span class="op" id="4752814">(</span><span class="op" id="4752815">)</span><span class="op" id="4752816">}</span><span class="op" id="4752817">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4752821">case</span>&nbsp;<span class="ident" id="4752826">reflect</span><span class="op" id="4752833">.</span><span class="ident" id="4752834">Slice</span><span class="op" id="4752839">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4752844">if</span>&nbsp;<span class="ident" id="4752847">v</span><span class="op" id="4752848">.</span><span class="ident" id="4752849">Type</span><span class="op" id="4752853">(</span><span class="op" id="4752854">)</span>&nbsp;<span class="op" id="4752856">!=</span>&nbsp;<span class="ident" id="4752859">byteSliceType</span>&nbsp;<span class="op" id="4752873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4752879">d</span><span class="op" id="4752880">.</span><span class="ident" id="4752881">saveError</span><span class="op" id="4752890">(</span><span class="op" id="4752891">&amp;</span><span class="ident" id="4752892">UnmarshalTypeError</span><span class="op" id="4752910">{</span><span class="string" id="4752911">&#34;string&#34;</span><span class="op" id="4752919">,</span>&nbsp;<span class="ident" id="4752921">v</span><span class="op" id="4752922">.</span><span class="ident" id="4752923">Type</span><span class="op" id="4752927">(</span><span class="op" id="4752928">)</span><span class="op" id="4752929">}</span><span class="op" id="4752930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4752936">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4752945">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4752950">b</span>&nbsp;<span class="op" id="4752952">:=</span>&nbsp;<span class="builtinfunc" id="4752955">make</span><span class="op" id="4752959">(</span><span class="op" id="4752960">[</span><span class="op" id="4752961">]</span><span class="builtintype" id="4752962">byte</span><span class="op" id="4752966">,</span>&nbsp;<span class="ident" id="4752968">base64</span><span class="op" id="4752974">.</span><span class="ident" id="4752975">StdEncoding</span><span class="op" id="4752986">.</span><span class="ident" id="4752987">DecodedLen</span><span class="op" id="4752997">(</span><span class="builtinfunc" id="4752998">len</span><span class="op" id="4753001">(</span><span class="ident" id="4753002">s</span><span class="op" id="4753003">)</span><span class="op" id="4753004">)</span><span class="op" id="4753005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4753010">n</span><span class="op" id="4753011">,</span>&nbsp;<span class="ident" id="4753013">err</span>&nbsp;<span class="op" id="4753017">:=</span>&nbsp;<span class="ident" id="4753020">base64</span><span class="op" id="4753026">.</span><span class="ident" id="4753027">StdEncoding</span><span class="op" id="4753038">.</span><span class="ident" id="4753039">Decode</span><span class="op" id="4753045">(</span><span class="ident" id="4753046">b</span><span class="op" id="4753047">,</span>&nbsp;<span class="ident" id="4753049">s</span><span class="op" id="4753050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4753055">if</span>&nbsp;<span class="ident" id="4753058">err</span>&nbsp;<span class="op" id="4753062">!=</span>&nbsp;<span class="ident" id="4753065">nil</span>&nbsp;<span class="op" id="4753069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4753075">d</span><span class="op" id="4753076">.</span><span class="ident" id="4753077">saveError</span><span class="op" id="4753086">(</span><span class="ident" id="4753087">err</span><span class="op" id="4753090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4753096">break</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4753105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4753110">v</span><span class="op" id="4753111">.</span><span class="ident" id="4753112">Set</span><span class="op" id="4753115">(</span><span class="ident" id="4753116">reflect</span><span class="op" id="4753123">.</span><span class="ident" id="4753124">ValueOf</span><span class="op" id="4753131">(</span><span class="ident" id="4753132">b</span><span class="op" id="4753133">[</span><span class="num" id="4753134">0</span><span class="op" id="4753135">:</span><span class="ident" id="4753136">n</span><span class="op" id="4753137">]</span><span class="op" id="4753138">)</span><span class="op" id="4753139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4753143">case</span>&nbsp;<span class="ident" id="4753148">reflect</span><span class="op" id="4753155">.</span><span class="ident" id="4753156">String</span><span class="op" id="4753162">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4753167">v</span><span class="op" id="4753168">.</span><span class="ident" id="4753169">SetString</span><span class="op" id="4753178">(</span><span class="builtintype" id="4753179">string</span><span class="op" id="4753185">(</span><span class="ident" id="4753186">s</span><span class="op" id="4753187">)</span><span class="op" id="4753188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4753192">case</span>&nbsp;<span class="ident" id="4753197">reflect</span><span class="op" id="4753204">.</span><span class="ident" id="4753205">Interface</span><span class="op" id="4753214">:</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4753219">if</span>&nbsp;<span class="ident" id="4753222">v</span><span class="op" id="4753223">.</span><span class="ident" id="4753224">NumMethod</span><span class="op" id="4753233">(</span><span class="op" id="4753234">)</span>&nbsp;<span class="op" id="4753236">==</span>&nbsp;<span class="num" id="4753239">0</span>&nbsp;<span class="op" id="4753241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4753247">v</span><span class="op" id="4753248">.</span><span class="ident" id="4753249">Set</span><span class="op" id="4753252">(</span><span class="ident" id="4753253">reflect</span><span class="op" id="4753260">.</span><span class="ident" id="4753261">ValueOf</span><span class="op" id="4753268">(</span><span class="builtintype" id="4753269">string</span><span class="op" id="4753275">(</span><span class="ident" id="4753276">s</span><span class="op" id="4753277">)</span><span class="op" id="4753278">)</span><span class="op" id="4753279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4753284">}</span>&nbsp;<span class="keyword" id="4753286">else</span>&nbsp;<span class="op" id="4753291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4753297">d</span><span class="op" id="4753298">.</span><span class="ident" id="4753299">saveError</span><span class="op" id="4753308">(</span><span class="op" id="4753309">&amp;</span><span class="ident" id="4753310">UnmarshalTypeError</span><span class="op" id="4753328">{</span><span class="string" id="4753329">&#34;string&#34;</span><span class="op" id="4753337">,</span>&nbsp;<span class="ident" id="4753339">v</span><span class="op" id="4753340">.</span><span class="ident" id="4753341">Type</span><span class="op" id="4753345">(</span><span class="op" id="4753346">)</span><span class="op" id="4753347">}</span><span class="op" id="4753348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4753353">}</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4753357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4753361">default</span><span class="op" id="4753368">:</span>&nbsp;<span class="comment" id="4753370">//&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4753382">if</span>&nbsp;<span class="ident" id="4753385">c</span>&nbsp;<span class="op" id="4753387">!=</span>&nbsp;<span class="string" id="4753390">&#39;-&#39;</span>&nbsp;<span class="op" id="4753394">&amp;&amp;</span>&nbsp;<span class="op" id="4753397">(</span><span class="ident" id="4753398">c</span>&nbsp;<span class="op" id="4753400">&lt;</span>&nbsp;<span class="string" id="4753402">&#39;0&#39;</span>&nbsp;<span class="op" id="4753406">||</span>&nbsp;<span class="ident" id="4753409">c</span>&nbsp;<span class="op" id="4753411">&gt;</span>&nbsp;<span class="string" id="4753413">&#39;9&#39;</span><span class="op" id="4753416">)</span>&nbsp;<span class="op" id="4753418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4753423">if</span>&nbsp;<span class="ident" id="4753426">fromQuoted</span>&nbsp;<span class="op" id="4753437">{</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4753443">d</span><span class="op" id="4753444">.</span><span class="builtintype" id="4753445">error</span><span class="op" id="4753450">(</span><span class="ident" id="4753451">fmt</span><span class="op" id="4753454">.</span><span class="ident" id="4753455">Errorf</span><span class="op" id="4753461">(</span><span class="string" id="4753462">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="4753535">,</span>&nbsp;<span class="ident" id="4753537">item</span><span class="op" id="4753541">,</span>&nbsp;<span class="ident" id="4753543">v</span><span class="op" id="4753544">.</span><span class="ident" id="4753545">Type</span><span class="op" id="4753549">(</span><span class="op" id="4753550">)</span><span class="op" id="4753551">)</span><span class="op" id="4753552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4753557">}</span>&nbsp;<span class="keyword" id="4753559">else</span>&nbsp;<span class="op" id="4753564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4753570">d</span><span class="op" id="4753571">.</span><span class="builtintype" id="4753572">error</span><span class="op" id="4753577">(</span><span class="ident" id="4753578">errPhase</span><span class="op" id="4753586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4753591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4753595">}</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4753599">s</span>&nbsp;<span class="op" id="4753601">:=</span>&nbsp;<span class="builtintype" id="4753604">string</span><span class="op" id="4753610">(</span><span class="ident" id="4753611">item</span><span class="op" id="4753615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4753619">switch</span>&nbsp;<span class="ident" id="4753626">v</span><span class="op" id="4753627">.</span><span class="ident" id="4753628">Kind</span><span class="op" id="4753632">(</span><span class="op" id="4753633">)</span>&nbsp;<span class="op" id="4753635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4753639">default</span><span class="op" id="4753646">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4753651">if</span>&nbsp;<span class="ident" id="4753654">v</span><span class="op" id="4753655">.</span><span class="ident" id="4753656">Kind</span><span class="op" id="4753660">(</span><span class="op" id="4753661">)</span>&nbsp;<span class="op" id="4753663">==</span>&nbsp;<span class="ident" id="4753666">reflect</span><span class="op" id="4753673">.</span><span class="ident" id="4753674">String</span>&nbsp;<span class="op" id="4753681">&amp;&amp;</span>&nbsp;<span class="ident" id="4753684">v</span><span class="op" id="4753685">.</span><span class="ident" id="4753686">Type</span><span class="op" id="4753690">(</span><span class="op" id="4753691">)</span>&nbsp;<span class="op" id="4753693">==</span>&nbsp;<span class="ident" id="4753696">numberType</span>&nbsp;<span class="op" id="4753707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4753713">v</span><span class="op" id="4753714">.</span><span class="ident" id="4753715">SetString</span><span class="op" id="4753724">(</span><span class="ident" id="4753725">s</span><span class="op" id="4753726">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4753732">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4753741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4753746">if</span>&nbsp;<span class="ident" id="4753749">fromQuoted</span>&nbsp;<span class="op" id="4753760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4753766">d</span><span class="op" id="4753767">.</span><span class="builtintype" id="4753768">error</span><span class="op" id="4753773">(</span><span class="ident" id="4753774">fmt</span><span class="op" id="4753777">.</span><span class="ident" id="4753778">Errorf</span><span class="op" id="4753784">(</span><span class="string" id="4753785">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="4753858">,</span>&nbsp;<span class="ident" id="4753860">item</span><span class="op" id="4753864">,</span>&nbsp;<span class="ident" id="4753866">v</span><span class="op" id="4753867">.</span><span class="ident" id="4753868">Type</span><span class="op" id="4753872">(</span><span class="op" id="4753873">)</span><span class="op" id="4753874">)</span><span class="op" id="4753875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4753880">}</span>&nbsp;<span class="keyword" id="4753882">else</span>&nbsp;<span class="op" id="4753887">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4753893">d</span><span class="op" id="4753894">.</span><span class="builtintype" id="4753895">error</span><span class="op" id="4753900">(</span><span class="op" id="4753901">&amp;</span><span class="ident" id="4753902">UnmarshalTypeError</span><span class="op" id="4753920">{</span><span class="string" id="4753921">&#34;number&#34;</span><span class="op" id="4753929">,</span>&nbsp;<span class="ident" id="4753931">v</span><span class="op" id="4753932">.</span><span class="ident" id="4753933">Type</span><span class="op" id="4753937">(</span><span class="op" id="4753938">)</span><span class="op" id="4753939">}</span><span class="op" id="4753940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4753945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4753949">case</span>&nbsp;<span class="ident" id="4753954">reflect</span><span class="op" id="4753961">.</span><span class="ident" id="4753962">Interface</span><span class="op" id="4753971">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4753976">n</span><span class="op" id="4753977">,</span>&nbsp;<span class="ident" id="4753979">err</span>&nbsp;<span class="op" id="4753983">:=</span>&nbsp;<span class="ident" id="4753986">d</span><span class="op" id="4753987">.</span><span class="ident" id="4753988">convertNumber</span><span class="op" id="4754001">(</span><span class="ident" id="4754002">s</span><span class="op" id="4754003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4754008">if</span>&nbsp;<span class="ident" id="4754011">err</span>&nbsp;<span class="op" id="4754015">!=</span>&nbsp;<span class="ident" id="4754018">nil</span>&nbsp;<span class="op" id="4754022">{</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4754028">d</span><span class="op" id="4754029">.</span><span class="ident" id="4754030">saveError</span><span class="op" id="4754039">(</span><span class="ident" id="4754040">err</span><span class="op" id="4754043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4754049">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4754058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4754063">if</span>&nbsp;<span class="ident" id="4754066">v</span><span class="op" id="4754067">.</span><span class="ident" id="4754068">NumMethod</span><span class="op" id="4754077">(</span><span class="op" id="4754078">)</span>&nbsp;<span class="op" id="4754080">!=</span>&nbsp;<span class="num" id="4754083">0</span>&nbsp;<span class="op" id="4754085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4754091">d</span><span class="op" id="4754092">.</span><span class="ident" id="4754093">saveError</span><span class="op" id="4754102">(</span><span class="op" id="4754103">&amp;</span><span class="ident" id="4754104">UnmarshalTypeError</span><span class="op" id="4754122">{</span><span class="string" id="4754123">&#34;number&#34;</span><span class="op" id="4754131">,</span>&nbsp;<span class="ident" id="4754133">v</span><span class="op" id="4754134">.</span><span class="ident" id="4754135">Type</span><span class="op" id="4754139">(</span><span class="op" id="4754140">)</span><span class="op" id="4754141">}</span><span class="op" id="4754142">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4754148">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4754157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4754162">v</span><span class="op" id="4754163">.</span><span class="ident" id="4754164">Set</span><span class="op" id="4754167">(</span><span class="ident" id="4754168">reflect</span><span class="op" id="4754175">.</span><span class="ident" id="4754176">ValueOf</span><span class="op" id="4754183">(</span><span class="ident" id="4754184">n</span><span class="op" id="4754185">)</span><span class="op" id="4754186">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4754191">case</span>&nbsp;<span class="ident" id="4754196">reflect</span><span class="op" id="4754203">.</span><span class="ident" id="4754204">Int</span><span class="op" id="4754207">,</span>&nbsp;<span class="ident" id="4754209">reflect</span><span class="op" id="4754216">.</span><span class="ident" id="4754217">Int8</span><span class="op" id="4754221">,</span>&nbsp;<span class="ident" id="4754223">reflect</span><span class="op" id="4754230">.</span><span class="ident" id="4754231">Int16</span><span class="op" id="4754236">,</span>&nbsp;<span class="ident" id="4754238">reflect</span><span class="op" id="4754245">.</span><span class="ident" id="4754246">Int32</span><span class="op" id="4754251">,</span>&nbsp;<span class="ident" id="4754253">reflect</span><span class="op" id="4754260">.</span><span class="ident" id="4754261">Int64</span><span class="op" id="4754266">:</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4754271">n</span><span class="op" id="4754272">,</span>&nbsp;<span class="ident" id="4754274">err</span>&nbsp;<span class="op" id="4754278">:=</span>&nbsp;<span class="ident" id="4754281">strconv</span><span class="op" id="4754288">.</span><span class="ident" id="4754289">ParseInt</span><span class="op" id="4754297">(</span><span class="ident" id="4754298">s</span><span class="op" id="4754299">,</span>&nbsp;<span class="num" id="4754301">10</span><span class="op" id="4754303">,</span>&nbsp;<span class="num" id="4754305">64</span><span class="op" id="4754307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4754312">if</span>&nbsp;<span class="ident" id="4754315">err</span>&nbsp;<span class="op" id="4754319">!=</span>&nbsp;<span class="ident" id="4754322">nil</span>&nbsp;<span class="op" id="4754326">||</span>&nbsp;<span class="ident" id="4754329">v</span><span class="op" id="4754330">.</span><span class="ident" id="4754331">OverflowInt</span><span class="op" id="4754342">(</span><span class="ident" id="4754343">n</span><span class="op" id="4754344">)</span>&nbsp;<span class="op" id="4754346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4754352">d</span><span class="op" id="4754353">.</span><span class="ident" id="4754354">saveError</span><span class="op" id="4754363">(</span><span class="op" id="4754364">&amp;</span><span class="ident" id="4754365">UnmarshalTypeError</span><span class="op" id="4754383">{</span><span class="string" id="4754384">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="4754394">+</span>&nbsp;<span class="ident" id="4754396">s</span><span class="op" id="4754397">,</span>&nbsp;<span class="ident" id="4754399">v</span><span class="op" id="4754400">.</span><span class="ident" id="4754401">Type</span><span class="op" id="4754405">(</span><span class="op" id="4754406">)</span><span class="op" id="4754407">}</span><span class="op" id="4754408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4754414">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4754423">}</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4754428">v</span><span class="op" id="4754429">.</span><span class="ident" id="4754430">SetInt</span><span class="op" id="4754436">(</span><span class="ident" id="4754437">n</span><span class="op" id="4754438">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4754443">case</span>&nbsp;<span class="ident" id="4754448">reflect</span><span class="op" id="4754455">.</span><span class="ident" id="4754456">Uint</span><span class="op" id="4754460">,</span>&nbsp;<span class="ident" id="4754462">reflect</span><span class="op" id="4754469">.</span><span class="ident" id="4754470">Uint8</span><span class="op" id="4754475">,</span>&nbsp;<span class="ident" id="4754477">reflect</span><span class="op" id="4754484">.</span><span class="ident" id="4754485">Uint16</span><span class="op" id="4754491">,</span>&nbsp;<span class="ident" id="4754493">reflect</span><span class="op" id="4754500">.</span><span class="ident" id="4754501">Uint32</span><span class="op" id="4754507">,</span>&nbsp;<span class="ident" id="4754509">reflect</span><span class="op" id="4754516">.</span><span class="ident" id="4754517">Uint64</span><span class="op" id="4754523">,</span>&nbsp;<span class="ident" id="4754525">reflect</span><span class="op" id="4754532">.</span><span class="ident" id="4754533">Uintptr</span><span class="op" id="4754540">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4754545">n</span><span class="op" id="4754546">,</span>&nbsp;<span class="ident" id="4754548">err</span>&nbsp;<span class="op" id="4754552">:=</span>&nbsp;<span class="ident" id="4754555">strconv</span><span class="op" id="4754562">.</span><span class="ident" id="4754563">ParseUint</span><span class="op" id="4754572">(</span><span class="ident" id="4754573">s</span><span class="op" id="4754574">,</span>&nbsp;<span class="num" id="4754576">10</span><span class="op" id="4754578">,</span>&nbsp;<span class="num" id="4754580">64</span><span class="op" id="4754582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4754587">if</span>&nbsp;<span class="ident" id="4754590">err</span>&nbsp;<span class="op" id="4754594">!=</span>&nbsp;<span class="ident" id="4754597">nil</span>&nbsp;<span class="op" id="4754601">||</span>&nbsp;<span class="ident" id="4754604">v</span><span class="op" id="4754605">.</span><span class="ident" id="4754606">OverflowUint</span><span class="op" id="4754618">(</span><span class="ident" id="4754619">n</span><span class="op" id="4754620">)</span>&nbsp;<span class="op" id="4754622">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4754628">d</span><span class="op" id="4754629">.</span><span class="ident" id="4754630">saveError</span><span class="op" id="4754639">(</span><span class="op" id="4754640">&amp;</span><span class="ident" id="4754641">UnmarshalTypeError</span><span class="op" id="4754659">{</span><span class="string" id="4754660">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="4754670">+</span>&nbsp;<span class="ident" id="4754672">s</span><span class="op" id="4754673">,</span>&nbsp;<span class="ident" id="4754675">v</span><span class="op" id="4754676">.</span><span class="ident" id="4754677">Type</span><span class="op" id="4754681">(</span><span class="op" id="4754682">)</span><span class="op" id="4754683">}</span><span class="op" id="4754684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4754690">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4754699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4754704">v</span><span class="op" id="4754705">.</span><span class="ident" id="4754706">SetUint</span><span class="op" id="4754713">(</span><span class="ident" id="4754714">n</span><span class="op" id="4754715">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4754720">case</span>&nbsp;<span class="ident" id="4754725">reflect</span><span class="op" id="4754732">.</span><span class="ident" id="4754733">Float32</span><span class="op" id="4754740">,</span>&nbsp;<span class="ident" id="4754742">reflect</span><span class="op" id="4754749">.</span><span class="ident" id="4754750">Float64</span><span class="op" id="4754757">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4754762">n</span><span class="op" id="4754763">,</span>&nbsp;<span class="ident" id="4754765">err</span>&nbsp;<span class="op" id="4754769">:=</span>&nbsp;<span class="ident" id="4754772">strconv</span><span class="op" id="4754779">.</span><span class="ident" id="4754780">ParseFloat</span><span class="op" id="4754790">(</span><span class="ident" id="4754791">s</span><span class="op" id="4754792">,</span>&nbsp;<span class="ident" id="4754794">v</span><span class="op" id="4754795">.</span><span class="ident" id="4754796">Type</span><span class="op" id="4754800">(</span><span class="op" id="4754801">)</span><span class="op" id="4754802">.</span><span class="ident" id="4754803">Bits</span><span class="op" id="4754807">(</span><span class="op" id="4754808">)</span><span class="op" id="4754809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4754814">if</span>&nbsp;<span class="ident" id="4754817">err</span>&nbsp;<span class="op" id="4754821">!=</span>&nbsp;<span class="ident" id="4754824">nil</span>&nbsp;<span class="op" id="4754828">||</span>&nbsp;<span class="ident" id="4754831">v</span><span class="op" id="4754832">.</span><span class="ident" id="4754833">OverflowFloat</span><span class="op" id="4754846">(</span><span class="ident" id="4754847">n</span><span class="op" id="4754848">)</span>&nbsp;<span class="op" id="4754850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4754856">d</span><span class="op" id="4754857">.</span><span class="ident" id="4754858">saveError</span><span class="op" id="4754867">(</span><span class="op" id="4754868">&amp;</span><span class="ident" id="4754869">UnmarshalTypeError</span><span class="op" id="4754887">{</span><span class="string" id="4754888">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="4754898">+</span>&nbsp;<span class="ident" id="4754900">s</span><span class="op" id="4754901">,</span>&nbsp;<span class="ident" id="4754903">v</span><span class="op" id="4754904">.</span><span class="ident" id="4754905">Type</span><span class="op" id="4754909">(</span><span class="op" id="4754910">)</span><span class="op" id="4754911">}</span><span class="op" id="4754912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4754918">break</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4754927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4754932">v</span><span class="op" id="4754933">.</span><span class="ident" id="4754934">SetFloat</span><span class="op" id="4754942">(</span><span class="ident" id="4754943">n</span><span class="op" id="4754944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4754948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4754951">}</span><br>
<span class="lineno"></span><span class="op" id="4754953">}</span><br>
<span class="lineno">820</span><br>
<span class="lineno"></span><span class="comment" id="4754956">//&nbsp;The&nbsp;xxxInterface&nbsp;routines&nbsp;build&nbsp;up&nbsp;a&nbsp;value&nbsp;to&nbsp;be&nbsp;stored</span><br>
<span class="lineno"></span><span class="comment" id="4755015">//&nbsp;in&nbsp;an&nbsp;empty&nbsp;interface.&nbsp;&nbsp;They&nbsp;are&nbsp;not&nbsp;strictly&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="4755075">//&nbsp;but&nbsp;they&nbsp;avoid&nbsp;the&nbsp;weight&nbsp;of&nbsp;reflection&nbsp;in&nbsp;this&nbsp;common&nbsp;case.</span><br>
<span class="lineno"></span><br>
<span class="lineno">825</span><span class="comment" id="4755140">//&nbsp;valueInterface&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;returns&nbsp;interface{}</span><br>
<span class="lineno"></span><span class="keyword" id="4755196">func</span>&nbsp;<span class="op" id="4755201">(</span><span class="ident" id="4755202">d</span>&nbsp;<span class="op" id="4755204">*</span><span class="ident" id="4755205">decodeState</span><span class="op" id="4755216">)</span>&nbsp;<span class="ident" id="4755218">valueInterface</span><span class="op" id="4755232">(</span><span class="op" id="4755233">)</span>&nbsp;<span class="keyword" id="4755235">interface</span><span class="op" id="4755244">{</span><span class="op" id="4755245">}</span>&nbsp;<span class="op" id="4755247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4755250">switch</span>&nbsp;<span class="ident" id="4755257">d</span><span class="op" id="4755258">.</span><span class="ident" id="4755259">scanWhile</span><span class="op" id="4755268">(</span><span class="ident" id="4755269">scanSkipSpace</span><span class="op" id="4755282">)</span>&nbsp;<span class="op" id="4755284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4755287">default</span><span class="op" id="4755294">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4755298">d</span><span class="op" id="4755299">.</span><span class="builtintype" id="4755300">error</span><span class="op" id="4755305">(</span><span class="ident" id="4755306">errPhase</span><span class="op" id="4755314">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4755318">panic</span><span class="op" id="4755323">(</span><span class="string" id="4755324">&#34;unreachable&#34;</span><span class="op" id="4755337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4755340">case</span>&nbsp;<span class="ident" id="4755345">scanBeginArray</span><span class="op" id="4755359">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4755363">return</span>&nbsp;<span class="ident" id="4755370">d</span><span class="op" id="4755371">.</span><span class="ident" id="4755372">arrayInterface</span><span class="op" id="4755386">(</span><span class="op" id="4755387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4755390">case</span>&nbsp;<span class="ident" id="4755395">scanBeginObject</span><span class="op" id="4755410">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4755414">return</span>&nbsp;<span class="ident" id="4755421">d</span><span class="op" id="4755422">.</span><span class="ident" id="4755423">objectInterface</span><span class="op" id="4755438">(</span><span class="op" id="4755439">)</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4755442">case</span>&nbsp;<span class="ident" id="4755447">scanBeginLiteral</span><span class="op" id="4755463">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4755467">return</span>&nbsp;<span class="ident" id="4755474">d</span><span class="op" id="4755475">.</span><span class="ident" id="4755476">literalInterface</span><span class="op" id="4755492">(</span><span class="op" id="4755493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4755496">}</span><br>
<span class="lineno"></span><span class="op" id="4755498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">840</span><span class="comment" id="4755501">//&nbsp;arrayInterface&nbsp;is&nbsp;like&nbsp;array&nbsp;but&nbsp;returns&nbsp;[]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="4755560">func</span>&nbsp;<span class="op" id="4755565">(</span><span class="ident" id="4755566">d</span>&nbsp;<span class="op" id="4755568">*</span><span class="ident" id="4755569">decodeState</span><span class="op" id="4755580">)</span>&nbsp;<span class="ident" id="4755582">arrayInterface</span><span class="op" id="4755596">(</span><span class="op" id="4755597">)</span>&nbsp;<span class="op" id="4755599">[</span><span class="op" id="4755600">]</span><span class="keyword" id="4755601">interface</span><span class="op" id="4755610">{</span><span class="op" id="4755611">}</span>&nbsp;<span class="op" id="4755613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4755616">var</span>&nbsp;<span class="ident" id="4755620">v</span>&nbsp;<span class="op" id="4755622">=</span>&nbsp;<span class="builtinfunc" id="4755624">make</span><span class="op" id="4755628">(</span><span class="op" id="4755629">[</span><span class="op" id="4755630">]</span><span class="keyword" id="4755631">interface</span><span class="op" id="4755640">{</span><span class="op" id="4755641">}</span><span class="op" id="4755642">,</span>&nbsp;<span class="num" id="4755644">0</span><span class="op" id="4755645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4755648">for</span>&nbsp;<span class="op" id="4755652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4755656">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4755716">op</span>&nbsp;<span class="op" id="4755719">:=</span>&nbsp;<span class="ident" id="4755722">d</span><span class="op" id="4755723">.</span><span class="ident" id="4755724">scanWhile</span><span class="op" id="4755733">(</span><span class="ident" id="4755734">scanSkipSpace</span><span class="op" id="4755747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4755751">if</span>&nbsp;<span class="ident" id="4755754">op</span>&nbsp;<span class="op" id="4755757">==</span>&nbsp;<span class="ident" id="4755760">scanEndArray</span>&nbsp;<span class="op" id="4755773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4755778">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4755786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4755791">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4755847">d</span><span class="op" id="4755848">.</span><span class="ident" id="4755849">off</span><span class="op" id="4755852">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4755857">d</span><span class="op" id="4755858">.</span><span class="ident" id="4755859">scan</span><span class="op" id="4755863">.</span><span class="ident" id="4755864">undo</span><span class="op" id="4755868">(</span><span class="ident" id="4755869">op</span><span class="op" id="4755871">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4755876">v</span>&nbsp;<span class="op" id="4755878">=</span>&nbsp;<span class="builtinfunc" id="4755880">append</span><span class="op" id="4755886">(</span><span class="ident" id="4755887">v</span><span class="op" id="4755888">,</span>&nbsp;<span class="ident" id="4755890">d</span><span class="op" id="4755891">.</span><span class="ident" id="4755892">valueInterface</span><span class="op" id="4755906">(</span><span class="op" id="4755907">)</span><span class="op" id="4755908">)</span><br>
<span class="lineno">855</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4755913">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4755945">op</span>&nbsp;<span class="op" id="4755948">=</span>&nbsp;<span class="ident" id="4755950">d</span><span class="op" id="4755951">.</span><span class="ident" id="4755952">scanWhile</span><span class="op" id="4755961">(</span><span class="ident" id="4755962">scanSkipSpace</span><span class="op" id="4755975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4755979">if</span>&nbsp;<span class="ident" id="4755982">op</span>&nbsp;<span class="op" id="4755985">==</span>&nbsp;<span class="ident" id="4755988">scanEndArray</span>&nbsp;<span class="op" id="4756001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4756006">break</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4756014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4756018">if</span>&nbsp;<span class="ident" id="4756021">op</span>&nbsp;<span class="op" id="4756024">!=</span>&nbsp;<span class="ident" id="4756027">scanArrayValue</span>&nbsp;<span class="op" id="4756042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4756047">d</span><span class="op" id="4756048">.</span><span class="builtintype" id="4756049">error</span><span class="op" id="4756054">(</span><span class="ident" id="4756055">errPhase</span><span class="op" id="4756063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4756067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4756070">}</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4756073">return</span>&nbsp;<span class="ident" id="4756080">v</span><br>
<span class="lineno"></span><span class="op" id="4756082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4756085">//&nbsp;objectInterface&nbsp;is&nbsp;like&nbsp;object&nbsp;but&nbsp;returns&nbsp;map[string]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="4756155">func</span>&nbsp;<span class="op" id="4756160">(</span><span class="ident" id="4756161">d</span>&nbsp;<span class="op" id="4756163">*</span><span class="ident" id="4756164">decodeState</span><span class="op" id="4756175">)</span>&nbsp;<span class="ident" id="4756177">objectInterface</span><span class="op" id="4756192">(</span><span class="op" id="4756193">)</span>&nbsp;<span class="keyword" id="4756195">map</span><span class="op" id="4756198">[</span><span class="builtintype" id="4756199">string</span><span class="op" id="4756205">]</span><span class="keyword" id="4756206">interface</span><span class="op" id="4756215">{</span><span class="op" id="4756216">}</span>&nbsp;<span class="op" id="4756218">{</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4756221">m</span>&nbsp;<span class="op" id="4756223">:=</span>&nbsp;<span class="builtinfunc" id="4756226">make</span><span class="op" id="4756230">(</span><span class="keyword" id="4756231">map</span><span class="op" id="4756234">[</span><span class="builtintype" id="4756235">string</span><span class="op" id="4756241">]</span><span class="keyword" id="4756242">interface</span><span class="op" id="4756251">{</span><span class="op" id="4756252">}</span><span class="op" id="4756253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4756256">for</span>&nbsp;<span class="op" id="4756260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4756264">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4756312">op</span>&nbsp;<span class="op" id="4756315">:=</span>&nbsp;<span class="ident" id="4756318">d</span><span class="op" id="4756319">.</span><span class="ident" id="4756320">scanWhile</span><span class="op" id="4756329">(</span><span class="ident" id="4756330">scanSkipSpace</span><span class="op" id="4756343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4756347">if</span>&nbsp;<span class="ident" id="4756350">op</span>&nbsp;<span class="op" id="4756353">==</span>&nbsp;<span class="ident" id="4756356">scanEndObject</span>&nbsp;<span class="op" id="4756370">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4756375">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4756429">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4756437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4756441">if</span>&nbsp;<span class="ident" id="4756444">op</span>&nbsp;<span class="op" id="4756447">!=</span>&nbsp;<span class="ident" id="4756450">scanBeginLiteral</span>&nbsp;<span class="op" id="4756467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4756472">d</span><span class="op" id="4756473">.</span><span class="builtintype" id="4756474">error</span><span class="op" id="4756479">(</span><span class="ident" id="4756480">errPhase</span><span class="op" id="4756488">)</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4756492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4756497">//&nbsp;Read&nbsp;string&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4756519">start</span>&nbsp;<span class="op" id="4756525">:=</span>&nbsp;<span class="ident" id="4756528">d</span><span class="op" id="4756529">.</span><span class="ident" id="4756530">off</span>&nbsp;<span class="op" id="4756534">-</span>&nbsp;<span class="num" id="4756536">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4756540">op</span>&nbsp;<span class="op" id="4756543">=</span>&nbsp;<span class="ident" id="4756545">d</span><span class="op" id="4756546">.</span><span class="ident" id="4756547">scanWhile</span><span class="op" id="4756556">(</span><span class="ident" id="4756557">scanContinue</span><span class="op" id="4756569">)</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4756573">item</span>&nbsp;<span class="op" id="4756578">:=</span>&nbsp;<span class="ident" id="4756581">d</span><span class="op" id="4756582">.</span><span class="ident" id="4756583">data</span><span class="op" id="4756587">[</span><span class="ident" id="4756588">start</span>&nbsp;<span class="op" id="4756594">:</span>&nbsp;<span class="ident" id="4756596">d</span><span class="op" id="4756597">.</span><span class="ident" id="4756598">off</span><span class="op" id="4756601">-</span><span class="num" id="4756602">1</span><span class="op" id="4756603">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4756607">key</span><span class="op" id="4756610">,</span>&nbsp;<span class="ident" id="4756612">ok</span>&nbsp;<span class="op" id="4756615">:=</span>&nbsp;<span class="ident" id="4756618">unquote</span><span class="op" id="4756625">(</span><span class="ident" id="4756626">item</span><span class="op" id="4756630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4756634">if</span>&nbsp;<span class="op" id="4756637">!</span><span class="ident" id="4756638">ok</span>&nbsp;<span class="op" id="4756641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4756646">d</span><span class="op" id="4756647">.</span><span class="builtintype" id="4756648">error</span><span class="op" id="4756653">(</span><span class="ident" id="4756654">errPhase</span><span class="op" id="4756662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4756666">}</span><br>
<span class="lineno">890</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4756671">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4756697">if</span>&nbsp;<span class="ident" id="4756700">op</span>&nbsp;<span class="op" id="4756703">==</span>&nbsp;<span class="ident" id="4756706">scanSkipSpace</span>&nbsp;<span class="op" id="4756720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4756725">op</span>&nbsp;<span class="op" id="4756728">=</span>&nbsp;<span class="ident" id="4756730">d</span><span class="op" id="4756731">.</span><span class="ident" id="4756732">scanWhile</span><span class="op" id="4756741">(</span><span class="ident" id="4756742">scanSkipSpace</span><span class="op" id="4756755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4756759">}</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4756763">if</span>&nbsp;<span class="ident" id="4756766">op</span>&nbsp;<span class="op" id="4756769">!=</span>&nbsp;<span class="ident" id="4756772">scanObjectKey</span>&nbsp;<span class="op" id="4756786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4756791">d</span><span class="op" id="4756792">.</span><span class="builtintype" id="4756793">error</span><span class="op" id="4756798">(</span><span class="ident" id="4756799">errPhase</span><span class="op" id="4756807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4756811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4756816">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4756833">m</span><span class="op" id="4756834">[</span><span class="ident" id="4756835">key</span><span class="op" id="4756838">]</span>&nbsp;<span class="op" id="4756840">=</span>&nbsp;<span class="ident" id="4756842">d</span><span class="op" id="4756843">.</span><span class="ident" id="4756844">valueInterface</span><span class="op" id="4756858">(</span><span class="op" id="4756859">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4756864">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4756896">op</span>&nbsp;<span class="op" id="4756899">=</span>&nbsp;<span class="ident" id="4756901">d</span><span class="op" id="4756902">.</span><span class="ident" id="4756903">scanWhile</span><span class="op" id="4756912">(</span><span class="ident" id="4756913">scanSkipSpace</span><span class="op" id="4756926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4756930">if</span>&nbsp;<span class="ident" id="4756933">op</span>&nbsp;<span class="op" id="4756936">==</span>&nbsp;<span class="ident" id="4756939">scanEndObject</span>&nbsp;<span class="op" id="4756953">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4756958">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4756966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4756970">if</span>&nbsp;<span class="ident" id="4756973">op</span>&nbsp;<span class="op" id="4756976">!=</span>&nbsp;<span class="ident" id="4756979">scanObjectValue</span>&nbsp;<span class="op" id="4756995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4757000">d</span><span class="op" id="4757001">.</span><span class="builtintype" id="4757002">error</span><span class="op" id="4757007">(</span><span class="ident" id="4757008">errPhase</span><span class="op" id="4757016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4757020">}</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4757023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757026">return</span>&nbsp;<span class="ident" id="4757033">m</span><br>
<span class="lineno"></span><span class="op" id="4757035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4757038">//&nbsp;literalInterface&nbsp;is&nbsp;like&nbsp;literal&nbsp;but&nbsp;returns&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">915</span><span class="keyword" id="4757106">func</span>&nbsp;<span class="op" id="4757111">(</span><span class="ident" id="4757112">d</span>&nbsp;<span class="op" id="4757114">*</span><span class="ident" id="4757115">decodeState</span><span class="op" id="4757126">)</span>&nbsp;<span class="ident" id="4757128">literalInterface</span><span class="op" id="4757144">(</span><span class="op" id="4757145">)</span>&nbsp;<span class="keyword" id="4757147">interface</span><span class="op" id="4757156">{</span><span class="op" id="4757157">}</span>&nbsp;<span class="op" id="4757159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4757162">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4757220">start</span>&nbsp;<span class="op" id="4757226">:=</span>&nbsp;<span class="ident" id="4757229">d</span><span class="op" id="4757230">.</span><span class="ident" id="4757231">off</span>&nbsp;<span class="op" id="4757235">-</span>&nbsp;<span class="num" id="4757237">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4757240">op</span>&nbsp;<span class="op" id="4757243">:=</span>&nbsp;<span class="ident" id="4757246">d</span><span class="op" id="4757247">.</span><span class="ident" id="4757248">scanWhile</span><span class="op" id="4757257">(</span><span class="ident" id="4757258">scanContinue</span><span class="op" id="4757270">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4757274">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4757315">d</span><span class="op" id="4757316">.</span><span class="ident" id="4757317">off</span><span class="op" id="4757320">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4757324">d</span><span class="op" id="4757325">.</span><span class="ident" id="4757326">scan</span><span class="op" id="4757330">.</span><span class="ident" id="4757331">undo</span><span class="op" id="4757335">(</span><span class="ident" id="4757336">op</span><span class="op" id="4757338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4757341">item</span>&nbsp;<span class="op" id="4757346">:=</span>&nbsp;<span class="ident" id="4757349">d</span><span class="op" id="4757350">.</span><span class="ident" id="4757351">data</span><span class="op" id="4757355">[</span><span class="ident" id="4757356">start</span><span class="op" id="4757361">:</span><span class="ident" id="4757362">d</span><span class="op" id="4757363">.</span><span class="ident" id="4757364">off</span><span class="op" id="4757367">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757371">switch</span>&nbsp;<span class="ident" id="4757378">c</span>&nbsp;<span class="op" id="4757380">:=</span>&nbsp;<span class="ident" id="4757383">item</span><span class="op" id="4757387">[</span><span class="num" id="4757388">0</span><span class="op" id="4757389">]</span><span class="op" id="4757390">;</span>&nbsp;<span class="ident" id="4757392">c</span>&nbsp;<span class="op" id="4757394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757397">case</span>&nbsp;<span class="string" id="4757402">&#39;n&#39;</span><span class="op" id="4757405">:</span>&nbsp;<span class="comment" id="4757407">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757417">return</span>&nbsp;<span class="ident" id="4757424">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757430">case</span>&nbsp;<span class="string" id="4757435">&#39;t&#39;</span><span class="op" id="4757438">,</span>&nbsp;<span class="string" id="4757440">&#39;f&#39;</span><span class="op" id="4757443">:</span>&nbsp;<span class="comment" id="4757445">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757462">return</span>&nbsp;<span class="ident" id="4757469">c</span>&nbsp;<span class="op" id="4757471">==</span>&nbsp;<span class="string" id="4757474">&#39;t&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757480">case</span>&nbsp;<span class="string" id="4757485">&#39;&#34;&#39;</span><span class="op" id="4757488">:</span>&nbsp;<span class="comment" id="4757490">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4757502">s</span><span class="op" id="4757503">,</span>&nbsp;<span class="ident" id="4757505">ok</span>&nbsp;<span class="op" id="4757508">:=</span>&nbsp;<span class="ident" id="4757511">unquote</span><span class="op" id="4757518">(</span><span class="ident" id="4757519">item</span><span class="op" id="4757523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757527">if</span>&nbsp;<span class="op" id="4757530">!</span><span class="ident" id="4757531">ok</span>&nbsp;<span class="op" id="4757534">{</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4757539">d</span><span class="op" id="4757540">.</span><span class="builtintype" id="4757541">error</span><span class="op" id="4757546">(</span><span class="ident" id="4757547">errPhase</span><span class="op" id="4757555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4757559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757563">return</span>&nbsp;<span class="ident" id="4757570">s</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757574">default</span><span class="op" id="4757581">:</span>&nbsp;<span class="comment" id="4757583">//&nbsp;number</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757595">if</span>&nbsp;<span class="ident" id="4757598">c</span>&nbsp;<span class="op" id="4757600">!=</span>&nbsp;<span class="string" id="4757603">&#39;-&#39;</span>&nbsp;<span class="op" id="4757607">&amp;&amp;</span>&nbsp;<span class="op" id="4757610">(</span><span class="ident" id="4757611">c</span>&nbsp;<span class="op" id="4757613">&lt;</span>&nbsp;<span class="string" id="4757615">&#39;0&#39;</span>&nbsp;<span class="op" id="4757619">||</span>&nbsp;<span class="ident" id="4757622">c</span>&nbsp;<span class="op" id="4757624">&gt;</span>&nbsp;<span class="string" id="4757626">&#39;9&#39;</span><span class="op" id="4757629">)</span>&nbsp;<span class="op" id="4757631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4757636">d</span><span class="op" id="4757637">.</span><span class="builtintype" id="4757638">error</span><span class="op" id="4757643">(</span><span class="ident" id="4757644">errPhase</span><span class="op" id="4757652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4757656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4757660">n</span><span class="op" id="4757661">,</span>&nbsp;<span class="ident" id="4757663">err</span>&nbsp;<span class="op" id="4757667">:=</span>&nbsp;<span class="ident" id="4757670">d</span><span class="op" id="4757671">.</span><span class="ident" id="4757672">convertNumber</span><span class="op" id="4757685">(</span><span class="builtintype" id="4757686">string</span><span class="op" id="4757692">(</span><span class="ident" id="4757693">item</span><span class="op" id="4757697">)</span><span class="op" id="4757698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757702">if</span>&nbsp;<span class="ident" id="4757705">err</span>&nbsp;<span class="op" id="4757709">!=</span>&nbsp;<span class="ident" id="4757712">nil</span>&nbsp;<span class="op" id="4757716">{</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4757721">d</span><span class="op" id="4757722">.</span><span class="ident" id="4757723">saveError</span><span class="op" id="4757732">(</span><span class="ident" id="4757733">err</span><span class="op" id="4757736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4757740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757744">return</span>&nbsp;<span class="ident" id="4757751">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4757754">}</span><br>
<span class="lineno"></span><span class="op" id="4757756">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span><span class="comment" id="4757759">//&nbsp;getu4&nbsp;decodes&nbsp;\uXXXX&nbsp;from&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s,&nbsp;returning&nbsp;the&nbsp;hex&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="4757833">//&nbsp;or&nbsp;it&nbsp;returns&nbsp;-1.</span><br>
<span class="lineno"></span><span class="keyword" id="4757854">func</span>&nbsp;<span class="ident" id="4757859">getu4</span><span class="op" id="4757864">(</span><span class="ident" id="4757865">s</span>&nbsp;<span class="op" id="4757867">[</span><span class="op" id="4757868">]</span><span class="builtintype" id="4757869">byte</span><span class="op" id="4757873">)</span>&nbsp;<span class="builtintype" id="4757875">rune</span>&nbsp;<span class="op" id="4757880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757883">if</span>&nbsp;<span class="builtinfunc" id="4757886">len</span><span class="op" id="4757889">(</span><span class="ident" id="4757890">s</span><span class="op" id="4757891">)</span>&nbsp;<span class="op" id="4757893">&lt;</span>&nbsp;<span class="num" id="4757895">6</span>&nbsp;<span class="op" id="4757897">||</span>&nbsp;<span class="ident" id="4757900">s</span><span class="op" id="4757901">[</span><span class="num" id="4757902">0</span><span class="op" id="4757903">]</span>&nbsp;<span class="op" id="4757905">!=</span>&nbsp;<span class="string" id="4757908">&#39;\\&#39;</span>&nbsp;<span class="op" id="4757913">||</span>&nbsp;<span class="ident" id="4757916">s</span><span class="op" id="4757917">[</span><span class="num" id="4757918">1</span><span class="op" id="4757919">]</span>&nbsp;<span class="op" id="4757921">!=</span>&nbsp;<span class="string" id="4757924">&#39;u&#39;</span>&nbsp;<span class="op" id="4757928">{</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757932">return</span>&nbsp;<span class="op" id="4757939">-</span><span class="num" id="4757940">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4757943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4757946">r</span><span class="op" id="4757947">,</span>&nbsp;<span class="ident" id="4757949">err</span>&nbsp;<span class="op" id="4757953">:=</span>&nbsp;<span class="ident" id="4757956">strconv</span><span class="op" id="4757963">.</span><span class="ident" id="4757964">ParseUint</span><span class="op" id="4757973">(</span><span class="builtintype" id="4757974">string</span><span class="op" id="4757980">(</span><span class="ident" id="4757981">s</span><span class="op" id="4757982">[</span><span class="num" id="4757983">2</span><span class="op" id="4757984">:</span><span class="num" id="4757985">6</span><span class="op" id="4757986">]</span><span class="op" id="4757987">)</span><span class="op" id="4757988">,</span>&nbsp;<span class="num" id="4757990">16</span><span class="op" id="4757992">,</span>&nbsp;<span class="num" id="4757994">64</span><span class="op" id="4757996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4757999">if</span>&nbsp;<span class="ident" id="4758002">err</span>&nbsp;<span class="op" id="4758006">!=</span>&nbsp;<span class="ident" id="4758009">nil</span>&nbsp;<span class="op" id="4758013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758017">return</span>&nbsp;<span class="op" id="4758024">-</span><span class="num" id="4758025">1</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4758028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758031">return</span>&nbsp;<span class="builtintype" id="4758038">rune</span><span class="op" id="4758042">(</span><span class="ident" id="4758043">r</span><span class="op" id="4758044">)</span><br>
<span class="lineno"></span><span class="op" id="4758046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4758049">//&nbsp;unquote&nbsp;converts&nbsp;a&nbsp;quoted&nbsp;JSON&nbsp;string&nbsp;literal&nbsp;s&nbsp;into&nbsp;an&nbsp;actual&nbsp;string&nbsp;t.</span><br>
<span class="lineno">965</span><span class="comment" id="4758125">//&nbsp;The&nbsp;rules&nbsp;are&nbsp;different&nbsp;than&nbsp;for&nbsp;Go,&nbsp;so&nbsp;cannot&nbsp;use&nbsp;strconv.Unquote.</span><br>
<span class="lineno"></span><span class="keyword" id="4758196">func</span>&nbsp;<span class="ident" id="4758201">unquote</span><span class="op" id="4758208">(</span><span class="ident" id="4758209">s</span>&nbsp;<span class="op" id="4758211">[</span><span class="op" id="4758212">]</span><span class="builtintype" id="4758213">byte</span><span class="op" id="4758217">)</span>&nbsp;<span class="op" id="4758219">(</span><span class="ident" id="4758220">t</span>&nbsp;<span class="builtintype" id="4758222">string</span><span class="op" id="4758228">,</span>&nbsp;<span class="ident" id="4758230">ok</span>&nbsp;<span class="builtintype" id="4758233">bool</span><span class="op" id="4758237">)</span>&nbsp;<span class="op" id="4758239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4758242">s</span><span class="op" id="4758243">,</span>&nbsp;<span class="ident" id="4758245">ok</span>&nbsp;<span class="op" id="4758248">=</span>&nbsp;<span class="ident" id="4758250">unquoteBytes</span><span class="op" id="4758262">(</span><span class="ident" id="4758263">s</span><span class="op" id="4758264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4758267">t</span>&nbsp;<span class="op" id="4758269">=</span>&nbsp;<span class="builtintype" id="4758271">string</span><span class="op" id="4758277">(</span><span class="ident" id="4758278">s</span><span class="op" id="4758279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758282">return</span><br>
<span class="lineno">970</span><span class="op" id="4758289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4758292">func</span>&nbsp;<span class="ident" id="4758297">unquoteBytes</span><span class="op" id="4758309">(</span><span class="ident" id="4758310">s</span>&nbsp;<span class="op" id="4758312">[</span><span class="op" id="4758313">]</span><span class="builtintype" id="4758314">byte</span><span class="op" id="4758318">)</span>&nbsp;<span class="op" id="4758320">(</span><span class="ident" id="4758321">t</span>&nbsp;<span class="op" id="4758323">[</span><span class="op" id="4758324">]</span><span class="builtintype" id="4758325">byte</span><span class="op" id="4758329">,</span>&nbsp;<span class="ident" id="4758331">ok</span>&nbsp;<span class="builtintype" id="4758334">bool</span><span class="op" id="4758338">)</span>&nbsp;<span class="op" id="4758340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758343">if</span>&nbsp;<span class="builtinfunc" id="4758346">len</span><span class="op" id="4758349">(</span><span class="ident" id="4758350">s</span><span class="op" id="4758351">)</span>&nbsp;<span class="op" id="4758353">&lt;</span>&nbsp;<span class="num" id="4758355">2</span>&nbsp;<span class="op" id="4758357">||</span>&nbsp;<span class="ident" id="4758360">s</span><span class="op" id="4758361">[</span><span class="num" id="4758362">0</span><span class="op" id="4758363">]</span>&nbsp;<span class="op" id="4758365">!=</span>&nbsp;<span class="string" id="4758368">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4758372">||</span>&nbsp;<span class="ident" id="4758375">s</span><span class="op" id="4758376">[</span><span class="builtinfunc" id="4758377">len</span><span class="op" id="4758380">(</span><span class="ident" id="4758381">s</span><span class="op" id="4758382">)</span><span class="op" id="4758383">-</span><span class="num" id="4758384">1</span><span class="op" id="4758385">]</span>&nbsp;<span class="op" id="4758387">!=</span>&nbsp;<span class="string" id="4758390">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4758394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758398">return</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4758406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4758409">s</span>&nbsp;<span class="op" id="4758411">=</span>&nbsp;<span class="ident" id="4758413">s</span><span class="op" id="4758414">[</span><span class="num" id="4758415">1</span>&nbsp;<span class="op" id="4758417">:</span>&nbsp;<span class="builtinfunc" id="4758419">len</span><span class="op" id="4758422">(</span><span class="ident" id="4758423">s</span><span class="op" id="4758424">)</span><span class="op" id="4758425">-</span><span class="num" id="4758426">1</span><span class="op" id="4758427">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4758431">//&nbsp;Check&nbsp;for&nbsp;unusual&nbsp;characters.&nbsp;If&nbsp;there&nbsp;are&nbsp;none,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4758484">//&nbsp;then&nbsp;no&nbsp;unquoting&nbsp;is&nbsp;needed,&nbsp;so&nbsp;return&nbsp;a&nbsp;slice&nbsp;of&nbsp;the</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4758542">//&nbsp;original&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4758562">r</span>&nbsp;<span class="op" id="4758564">:=</span>&nbsp;<span class="num" id="4758567">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758570">for</span>&nbsp;<span class="ident" id="4758574">r</span>&nbsp;<span class="op" id="4758576">&lt;</span>&nbsp;<span class="builtinfunc" id="4758578">len</span><span class="op" id="4758581">(</span><span class="ident" id="4758582">s</span><span class="op" id="4758583">)</span>&nbsp;<span class="op" id="4758585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4758589">c</span>&nbsp;<span class="op" id="4758591">:=</span>&nbsp;<span class="ident" id="4758594">s</span><span class="op" id="4758595">[</span><span class="ident" id="4758596">r</span><span class="op" id="4758597">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758601">if</span>&nbsp;<span class="ident" id="4758604">c</span>&nbsp;<span class="op" id="4758606">==</span>&nbsp;<span class="string" id="4758609">&#39;\\&#39;</span>&nbsp;<span class="op" id="4758614">||</span>&nbsp;<span class="ident" id="4758617">c</span>&nbsp;<span class="op" id="4758619">==</span>&nbsp;<span class="string" id="4758622">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4758626">||</span>&nbsp;<span class="ident" id="4758629">c</span>&nbsp;<span class="op" id="4758631">&lt;</span>&nbsp;<span class="string" id="4758633">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4758637">{</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758642">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4758650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758654">if</span>&nbsp;<span class="ident" id="4758657">c</span>&nbsp;<span class="op" id="4758659">&lt;</span>&nbsp;<span class="ident" id="4758661">utf8</span><span class="op" id="4758665">.</span><span class="ident" id="4758666">RuneSelf</span>&nbsp;<span class="op" id="4758675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4758680">r</span><span class="op" id="4758681">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758687">continue</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4758698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4758702">rr</span><span class="op" id="4758704">,</span>&nbsp;<span class="ident" id="4758706">size</span>&nbsp;<span class="op" id="4758711">:=</span>&nbsp;<span class="ident" id="4758714">utf8</span><span class="op" id="4758718">.</span><span class="ident" id="4758719">DecodeRune</span><span class="op" id="4758729">(</span><span class="ident" id="4758730">s</span><span class="op" id="4758731">[</span><span class="ident" id="4758732">r</span><span class="op" id="4758733">:</span><span class="op" id="4758734">]</span><span class="op" id="4758735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758739">if</span>&nbsp;<span class="ident" id="4758742">rr</span>&nbsp;<span class="op" id="4758745">==</span>&nbsp;<span class="ident" id="4758748">utf8</span><span class="op" id="4758752">.</span><span class="ident" id="4758753">RuneError</span>&nbsp;<span class="op" id="4758763">&amp;&amp;</span>&nbsp;<span class="ident" id="4758766">size</span>&nbsp;<span class="op" id="4758771">==</span>&nbsp;<span class="num" id="4758774">1</span>&nbsp;<span class="op" id="4758776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758781">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4758789">}</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4758793">r</span>&nbsp;<span class="op" id="4758795">+=</span>&nbsp;<span class="ident" id="4758798">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4758804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758807">if</span>&nbsp;<span class="ident" id="4758810">r</span>&nbsp;<span class="op" id="4758812">==</span>&nbsp;<span class="builtinfunc" id="4758815">len</span><span class="op" id="4758818">(</span><span class="ident" id="4758819">s</span><span class="op" id="4758820">)</span>&nbsp;<span class="op" id="4758822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758826">return</span>&nbsp;<span class="ident" id="4758833">s</span><span class="op" id="4758834">,</span>&nbsp;<span class="builtintype" id="4758836">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4758842">}</span><br>
<span class="lineno">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4758846">b</span>&nbsp;<span class="op" id="4758848">:=</span>&nbsp;<span class="builtinfunc" id="4758851">make</span><span class="op" id="4758855">(</span><span class="op" id="4758856">[</span><span class="op" id="4758857">]</span><span class="builtintype" id="4758858">byte</span><span class="op" id="4758862">,</span>&nbsp;<span class="builtinfunc" id="4758864">len</span><span class="op" id="4758867">(</span><span class="ident" id="4758868">s</span><span class="op" id="4758869">)</span><span class="op" id="4758870">+</span><span class="num" id="4758871">2</span><span class="op" id="4758872">*</span><span class="ident" id="4758873">utf8</span><span class="op" id="4758877">.</span><span class="ident" id="4758878">UTFMax</span><span class="op" id="4758884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4758887">w</span>&nbsp;<span class="op" id="4758889">:=</span>&nbsp;<span class="builtinfunc" id="4758892">copy</span><span class="op" id="4758896">(</span><span class="ident" id="4758897">b</span><span class="op" id="4758898">,</span>&nbsp;<span class="ident" id="4758900">s</span><span class="op" id="4758901">[</span><span class="num" id="4758902">0</span><span class="op" id="4758903">:</span><span class="ident" id="4758904">r</span><span class="op" id="4758905">]</span><span class="op" id="4758906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4758909">for</span>&nbsp;<span class="ident" id="4758913">r</span>&nbsp;<span class="op" id="4758915">&lt;</span>&nbsp;<span class="builtinfunc" id="4758917">len</span><span class="op" id="4758920">(</span><span class="ident" id="4758921">s</span><span class="op" id="4758922">)</span>&nbsp;<span class="op" id="4758924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4758928">//&nbsp;Out&nbsp;of&nbsp;room?&nbsp;&nbsp;Can&nbsp;only&nbsp;happen&nbsp;if&nbsp;s&nbsp;is&nbsp;full&nbsp;of</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4758979">//&nbsp;malformed&nbsp;UTF-8&nbsp;and&nbsp;we&#39;re&nbsp;replacing&nbsp;each</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4759025">//&nbsp;byte&nbsp;with&nbsp;RuneError.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759051">if</span>&nbsp;<span class="ident" id="4759054">w</span>&nbsp;<span class="op" id="4759056">&gt;=</span>&nbsp;<span class="builtinfunc" id="4759059">len</span><span class="op" id="4759062">(</span><span class="ident" id="4759063">b</span><span class="op" id="4759064">)</span><span class="op" id="4759065">-</span><span class="num" id="4759066">2</span><span class="op" id="4759067">*</span><span class="ident" id="4759068">utf8</span><span class="op" id="4759072">.</span><span class="ident" id="4759073">UTFMax</span>&nbsp;<span class="op" id="4759080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759085">nb</span>&nbsp;<span class="op" id="4759088">:=</span>&nbsp;<span class="builtinfunc" id="4759091">make</span><span class="op" id="4759095">(</span><span class="op" id="4759096">[</span><span class="op" id="4759097">]</span><span class="builtintype" id="4759098">byte</span><span class="op" id="4759102">,</span>&nbsp;<span class="op" id="4759104">(</span><span class="builtinfunc" id="4759105">len</span><span class="op" id="4759108">(</span><span class="ident" id="4759109">b</span><span class="op" id="4759110">)</span><span class="op" id="4759111">+</span><span class="ident" id="4759112">utf8</span><span class="op" id="4759116">.</span><span class="ident" id="4759117">UTFMax</span><span class="op" id="4759123">)</span><span class="op" id="4759124">*</span><span class="num" id="4759125">2</span><span class="op" id="4759126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4759131">copy</span><span class="op" id="4759135">(</span><span class="ident" id="4759136">nb</span><span class="op" id="4759138">,</span>&nbsp;<span class="ident" id="4759140">b</span><span class="op" id="4759141">[</span><span class="num" id="4759142">0</span><span class="op" id="4759143">:</span><span class="ident" id="4759144">w</span><span class="op" id="4759145">]</span><span class="op" id="4759146">)</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759151">b</span>&nbsp;<span class="op" id="4759153">=</span>&nbsp;<span class="ident" id="4759155">nb</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4759160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759164">switch</span>&nbsp;<span class="ident" id="4759171">c</span>&nbsp;<span class="op" id="4759173">:=</span>&nbsp;<span class="ident" id="4759176">s</span><span class="op" id="4759177">[</span><span class="ident" id="4759178">r</span><span class="op" id="4759179">]</span><span class="op" id="4759180">;</span>&nbsp;<span class="op" id="4759182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759186">case</span>&nbsp;<span class="ident" id="4759191">c</span>&nbsp;<span class="op" id="4759193">==</span>&nbsp;<span class="string" id="4759196">&#39;\\&#39;</span><span class="op" id="4759200">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759205">r</span><span class="op" id="4759206">++</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759212">if</span>&nbsp;<span class="ident" id="4759215">r</span>&nbsp;<span class="op" id="4759217">&gt;=</span>&nbsp;<span class="builtinfunc" id="4759220">len</span><span class="op" id="4759223">(</span><span class="ident" id="4759224">s</span><span class="op" id="4759225">)</span>&nbsp;<span class="op" id="4759227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759233">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4759243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759248">switch</span>&nbsp;<span class="ident" id="4759255">s</span><span class="op" id="4759256">[</span><span class="ident" id="4759257">r</span><span class="op" id="4759258">]</span>&nbsp;<span class="op" id="4759260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759265">default</span><span class="op" id="4759272">:</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759278">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759288">case</span>&nbsp;<span class="string" id="4759293">&#39;&#34;&#39;</span><span class="op" id="4759296">,</span>&nbsp;<span class="string" id="4759298">&#39;\\&#39;</span><span class="op" id="4759302">,</span>&nbsp;<span class="string" id="4759304">&#39;/&#39;</span><span class="op" id="4759307">,</span>&nbsp;<span class="string" id="4759309">&#39;\&#39;&#39;</span><span class="op" id="4759313">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759319">b</span><span class="op" id="4759320">[</span><span class="ident" id="4759321">w</span><span class="op" id="4759322">]</span>&nbsp;<span class="op" id="4759324">=</span>&nbsp;<span class="ident" id="4759326">s</span><span class="op" id="4759327">[</span><span class="ident" id="4759328">r</span><span class="op" id="4759329">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759335">r</span><span class="op" id="4759336">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759343">w</span><span class="op" id="4759344">++</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759350">case</span>&nbsp;<span class="string" id="4759355">&#39;b&#39;</span><span class="op" id="4759358">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759364">b</span><span class="op" id="4759365">[</span><span class="ident" id="4759366">w</span><span class="op" id="4759367">]</span>&nbsp;<span class="op" id="4759369">=</span>&nbsp;<span class="string" id="4759371">&#39;\b&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759380">r</span><span class="op" id="4759381">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759388">w</span><span class="op" id="4759389">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759395">case</span>&nbsp;<span class="string" id="4759400">&#39;f&#39;</span><span class="op" id="4759403">:</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759409">b</span><span class="op" id="4759410">[</span><span class="ident" id="4759411">w</span><span class="op" id="4759412">]</span>&nbsp;<span class="op" id="4759414">=</span>&nbsp;<span class="string" id="4759416">&#39;\f&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759425">r</span><span class="op" id="4759426">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759433">w</span><span class="op" id="4759434">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759440">case</span>&nbsp;<span class="string" id="4759445">&#39;n&#39;</span><span class="op" id="4759448">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759454">b</span><span class="op" id="4759455">[</span><span class="ident" id="4759456">w</span><span class="op" id="4759457">]</span>&nbsp;<span class="op" id="4759459">=</span>&nbsp;<span class="string" id="4759461">&#39;\n&#39;</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759470">r</span><span class="op" id="4759471">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759478">w</span><span class="op" id="4759479">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759485">case</span>&nbsp;<span class="string" id="4759490">&#39;r&#39;</span><span class="op" id="4759493">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759499">b</span><span class="op" id="4759500">[</span><span class="ident" id="4759501">w</span><span class="op" id="4759502">]</span>&nbsp;<span class="op" id="4759504">=</span>&nbsp;<span class="string" id="4759506">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759515">r</span><span class="op" id="4759516">++</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759523">w</span><span class="op" id="4759524">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759530">case</span>&nbsp;<span class="string" id="4759535">&#39;t&#39;</span><span class="op" id="4759538">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759544">b</span><span class="op" id="4759545">[</span><span class="ident" id="4759546">w</span><span class="op" id="4759547">]</span>&nbsp;<span class="op" id="4759549">=</span>&nbsp;<span class="string" id="4759551">&#39;\t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759560">r</span><span class="op" id="4759561">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759568">w</span><span class="op" id="4759569">++</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759575">case</span>&nbsp;<span class="string" id="4759580">&#39;u&#39;</span><span class="op" id="4759583">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759589">r</span><span class="op" id="4759590">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759597">rr</span>&nbsp;<span class="op" id="4759600">:=</span>&nbsp;<span class="ident" id="4759603">getu4</span><span class="op" id="4759608">(</span><span class="ident" id="4759609">s</span><span class="op" id="4759610">[</span><span class="ident" id="4759611">r</span><span class="op" id="4759612">:</span><span class="op" id="4759613">]</span><span class="op" id="4759614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759620">if</span>&nbsp;<span class="ident" id="4759623">rr</span>&nbsp;<span class="op" id="4759626">&lt;</span>&nbsp;<span class="num" id="4759628">0</span>&nbsp;<span class="op" id="4759630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759637">return</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4759648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759654">r</span>&nbsp;<span class="op" id="4759656">+=</span>&nbsp;<span class="num" id="4759659">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759665">if</span>&nbsp;<span class="ident" id="4759668">utf16</span><span class="op" id="4759673">.</span><span class="ident" id="4759674">IsSurrogate</span><span class="op" id="4759685">(</span><span class="ident" id="4759686">rr</span><span class="op" id="4759688">)</span>&nbsp;<span class="op" id="4759690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759697">rr1</span>&nbsp;<span class="op" id="4759701">:=</span>&nbsp;<span class="ident" id="4759704">getu4</span><span class="op" id="4759709">(</span><span class="ident" id="4759710">s</span><span class="op" id="4759711">[</span><span class="ident" id="4759712">r</span><span class="op" id="4759713">:</span><span class="op" id="4759714">]</span><span class="op" id="4759715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759722">if</span>&nbsp;<span class="ident" id="4759725">dec</span>&nbsp;<span class="op" id="4759729">:=</span>&nbsp;<span class="ident" id="4759732">utf16</span><span class="op" id="4759737">.</span><span class="ident" id="4759738">DecodeRune</span><span class="op" id="4759748">(</span><span class="ident" id="4759749">rr</span><span class="op" id="4759751">,</span>&nbsp;<span class="ident" id="4759753">rr1</span><span class="op" id="4759756">)</span><span class="op" id="4759757">;</span>&nbsp;<span class="ident" id="4759759">dec</span>&nbsp;<span class="op" id="4759763">!=</span>&nbsp;<span class="ident" id="4759766">unicode</span><span class="op" id="4759773">.</span><span class="ident" id="4759774">ReplacementChar</span>&nbsp;<span class="op" id="4759790">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4759798">//&nbsp;A&nbsp;valid&nbsp;pair;&nbsp;consume.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759830">r</span>&nbsp;<span class="op" id="4759832">+=</span>&nbsp;<span class="num" id="4759835">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759843">w</span>&nbsp;<span class="op" id="4759845">+=</span>&nbsp;<span class="ident" id="4759848">utf8</span><span class="op" id="4759852">.</span><span class="ident" id="4759853">EncodeRune</span><span class="op" id="4759863">(</span><span class="ident" id="4759864">b</span><span class="op" id="4759865">[</span><span class="ident" id="4759866">w</span><span class="op" id="4759867">:</span><span class="op" id="4759868">]</span><span class="op" id="4759869">,</span>&nbsp;<span class="ident" id="4759871">dec</span><span class="op" id="4759874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4759882">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4759893">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4759900">//&nbsp;Invalid&nbsp;surrogate;&nbsp;fall&nbsp;back&nbsp;to&nbsp;replacement&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759958">rr</span>&nbsp;<span class="op" id="4759961">=</span>&nbsp;<span class="ident" id="4759963">unicode</span><span class="op" id="4759970">.</span><span class="ident" id="4759971">ReplacementChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4759991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4759997">w</span>&nbsp;<span class="op" id="4759999">+=</span>&nbsp;<span class="ident" id="4760002">utf8</span><span class="op" id="4760006">.</span><span class="ident" id="4760007">EncodeRune</span><span class="op" id="4760017">(</span><span class="ident" id="4760018">b</span><span class="op" id="4760019">[</span><span class="ident" id="4760020">w</span><span class="op" id="4760021">:</span><span class="op" id="4760022">]</span><span class="op" id="4760023">,</span>&nbsp;<span class="ident" id="4760025">rr</span><span class="op" id="4760027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4760032">}</span><br>
<span class="lineno">1065</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4760037">//&nbsp;Quote,&nbsp;control&nbsp;characters&nbsp;are&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4760081">case</span>&nbsp;<span class="ident" id="4760086">c</span>&nbsp;<span class="op" id="4760088">==</span>&nbsp;<span class="string" id="4760091">&#39;&#34;&#39;</span><span class="op" id="4760094">,</span>&nbsp;<span class="ident" id="4760096">c</span>&nbsp;<span class="op" id="4760098">&lt;</span>&nbsp;<span class="string" id="4760100">&#39;&nbsp;&#39;</span><span class="op" id="4760103">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4760108">return</span><br>
<span class="lineno"></span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4760118">//&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4760129">case</span>&nbsp;<span class="ident" id="4760134">c</span>&nbsp;<span class="op" id="4760136">&lt;</span>&nbsp;<span class="ident" id="4760138">utf8</span><span class="op" id="4760142">.</span><span class="ident" id="4760143">RuneSelf</span><span class="op" id="4760151">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760156">b</span><span class="op" id="4760157">[</span><span class="ident" id="4760158">w</span><span class="op" id="4760159">]</span>&nbsp;<span class="op" id="4760161">=</span>&nbsp;<span class="ident" id="4760163">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760168">r</span><span class="op" id="4760169">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760175">w</span><span class="op" id="4760176">++</span><br>
<span class="lineno">1075</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4760182">//&nbsp;Coerce&nbsp;to&nbsp;well-formed&nbsp;UTF-8.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4760216">default</span><span class="op" id="4760223">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760228">rr</span><span class="op" id="4760230">,</span>&nbsp;<span class="ident" id="4760232">size</span>&nbsp;<span class="op" id="4760237">:=</span>&nbsp;<span class="ident" id="4760240">utf8</span><span class="op" id="4760244">.</span><span class="ident" id="4760245">DecodeRune</span><span class="op" id="4760255">(</span><span class="ident" id="4760256">s</span><span class="op" id="4760257">[</span><span class="ident" id="4760258">r</span><span class="op" id="4760259">:</span><span class="op" id="4760260">]</span><span class="op" id="4760261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760266">r</span>&nbsp;<span class="op" id="4760268">+=</span>&nbsp;<span class="ident" id="4760271">size</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760279">w</span>&nbsp;<span class="op" id="4760281">+=</span>&nbsp;<span class="ident" id="4760284">utf8</span><span class="op" id="4760288">.</span><span class="ident" id="4760289">EncodeRune</span><span class="op" id="4760299">(</span><span class="ident" id="4760300">b</span><span class="op" id="4760301">[</span><span class="ident" id="4760302">w</span><span class="op" id="4760303">:</span><span class="op" id="4760304">]</span><span class="op" id="4760305">,</span>&nbsp;<span class="ident" id="4760307">rr</span><span class="op" id="4760309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4760313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4760316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4760319">return</span>&nbsp;<span class="ident" id="4760326">b</span><span class="op" id="4760327">[</span><span class="num" id="4760328">0</span><span class="op" id="4760329">:</span><span class="ident" id="4760330">w</span><span class="op" id="4760331">]</span><span class="op" id="4760332">,</span>&nbsp;<span class="builtintype" id="4760334">true</span><br>
<span class="lineno"></span><span class="op" id="4760339">}</span>
</div>
</body>
</html>
