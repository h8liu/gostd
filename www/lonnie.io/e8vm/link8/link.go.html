<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5369038">package</span>&nbsp;<span class="ident" id="5369046">link8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5369053">import</span>&nbsp;<span class="op" id="5369060">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5369063">&#34;fmt&#34;</span><br>
<span class="lineno">5</span><span class="op" id="5369069">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5369072">//&nbsp;LinkMain&nbsp;produces&nbsp;a&nbsp;image&nbsp;for&nbsp;a&nbsp;main()&nbsp;in&nbsp;a&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5369128">func</span>&nbsp;<span class="ident" id="5369133">LinkMain</span><span class="op" id="5369141">(</span><span class="ident" id="5369142">main</span>&nbsp;<span class="op" id="5369147">*</span><span class="ident" id="5369148"><a href="/lonnie.io/e8vm/link8/package.go.html#5371347">Package</a></span><span class="op" id="5369155">)</span>&nbsp;<span class="op" id="5369157">(</span><span class="op" id="5369158">[</span><span class="op" id="5369159">]</span><span class="builtintype" id="5369160">byte</span><span class="op" id="5369164">,</span>&nbsp;<span class="builtintype" id="5369166">error</span><span class="op" id="5369171">)</span>&nbsp;<span class="op" id="5369173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369176">lnk</span>&nbsp;<span class="op" id="5369180">:=</span>&nbsp;<span class="ident" id="5369183"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370081">NewLinker</a></span><span class="op" id="5369192">(</span><span class="op" id="5369193">)</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369196"><a href="/lonnie.io/e8vm/link8/link.go.html#5369176">lnk</a></span><span class="op" id="5369199">.</span><span class="ident" id="5369200">AddPkgs</span><span class="op" id="5369207">(</span><span class="ident" id="5369208"><a href="/lonnie.io/e8vm/link8/link.go.html#5369142">main</a></span><span class="op" id="5369212">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369216">funcMain</span><span class="op" id="5369224">,</span>&nbsp;<span class="ident" id="5369226">index</span>&nbsp;<span class="op" id="5369232">:=</span>&nbsp;<span class="ident" id="5369235"><a href="/lonnie.io/e8vm/link8/link.go.html#5369142">main</a></span><span class="op" id="5369239">.</span><span class="ident" id="5369240">Query</span><span class="op" id="5369245">(</span><span class="string" id="5369246">&#34;main&#34;</span><span class="op" id="5369252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369255">if</span>&nbsp;<span class="ident" id="5369258"><a href="/lonnie.io/e8vm/link8/link.go.html#5369216">funcMain</a></span>&nbsp;<span class="op" id="5369267">==</span>&nbsp;<span class="ident" id="5369270">nil</span>&nbsp;<span class="op" id="5369274">||</span>&nbsp;<span class="ident" id="5369277"><a href="/lonnie.io/e8vm/link8/link.go.html#5369216">funcMain</a></span><span class="op" id="5369285">.</span><span class="ident" id="5369286">Type</span>&nbsp;<span class="op" id="5369291">!=</span>&nbsp;<span class="ident" id="5369294"><a href="/lonnie.io/e8vm/link8/symbol.go.html#5374825">SymFunc</a></span>&nbsp;<span class="op" id="5369302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369306">return</span>&nbsp;<span class="ident" id="5369313">nil</span><span class="op" id="5369316">,</span>&nbsp;<span class="ident" id="5369318"><a href="/lonnie.io/e8vm/link8/link.go.html#5369063">fmt</a></span><span class="op" id="5369321">.</span><span class="ident" id="5369322">Errorf</span><span class="op" id="5369328">(</span><span class="string" id="5369329">&#34;main&nbsp;function&nbsp;missing&#34;</span><span class="op" id="5369352">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5369355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369359">used</span>&nbsp;<span class="op" id="5369364">:=</span>&nbsp;<span class="ident" id="5369367"><a href="/lonnie.io/e8vm/link8/trace_used.go.html#5375308">traceUsed</a></span><span class="op" id="5369376">(</span><span class="ident" id="5369377"><a href="/lonnie.io/e8vm/link8/link.go.html#5369176">lnk</a></span><span class="op" id="5369380">,</span>&nbsp;<span class="ident" id="5369382"><a href="/lonnie.io/e8vm/link8/link.go.html#5369142">main</a></span><span class="op" id="5369386">,</span>&nbsp;<span class="ident" id="5369388"><a href="/lonnie.io/e8vm/link8/link.go.html#5369226">index</a></span><span class="op" id="5369393">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369397">funcs</span><span class="op" id="5369402">,</span>&nbsp;<span class="ident" id="5369404">vars</span><span class="op" id="5369408">,</span>&nbsp;<span class="ident" id="5369410">e</span>&nbsp;<span class="op" id="5369412">:=</span>&nbsp;<span class="ident" id="5369415"><a href="/lonnie.io/e8vm/link8/layout.go.html#5368153">layout</a></span><span class="op" id="5369421">(</span><span class="ident" id="5369422"><a href="/lonnie.io/e8vm/link8/link.go.html#5369359">used</a></span><span class="op" id="5369426">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369429">if</span>&nbsp;<span class="ident" id="5369432"><a href="/lonnie.io/e8vm/link8/link.go.html#5369410">e</a></span>&nbsp;<span class="op" id="5369434">!=</span>&nbsp;<span class="ident" id="5369437">nil</span>&nbsp;<span class="op" id="5369441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369445">return</span>&nbsp;<span class="ident" id="5369452">nil</span><span class="op" id="5369455">,</span>&nbsp;<span class="ident" id="5369457"><a href="/lonnie.io/e8vm/link8/link.go.html#5369410">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5369460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369464">w</span>&nbsp;<span class="op" id="5369466">:=</span>&nbsp;<span class="ident" id="5369469"><a href="/lonnie.io/e8vm/link8/writer.go.html#5376880">newWriter</a></span><span class="op" id="5369478">(</span><span class="op" id="5369479">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369482">for</span>&nbsp;<span class="ident" id="5369486">_</span><span class="op" id="5369487">,</span>&nbsp;<span class="ident" id="5369489">f</span>&nbsp;<span class="op" id="5369491">:=</span>&nbsp;<span class="keyword" id="5369494">range</span>&nbsp;<span class="ident" id="5369500"><a href="/lonnie.io/e8vm/link8/link.go.html#5369397">funcs</a></span>&nbsp;<span class="op" id="5369506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369510"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377447">writeFunc</a></span><span class="op" id="5369519">(</span><span class="ident" id="5369520"><a href="/lonnie.io/e8vm/link8/link.go.html#5369464">w</a></span><span class="op" id="5369521">,</span>&nbsp;<span class="ident" id="5369523"><a href="/lonnie.io/e8vm/link8/link.go.html#5369489">f</a></span><span class="op" id="5369524">.</span><span class="ident" id="5369525">pkg</span><span class="op" id="5369528">,</span>&nbsp;<span class="ident" id="5369530"><a href="/lonnie.io/e8vm/link8/link.go.html#5369489">f</a></span><span class="op" id="5369531">.</span><span class="ident" id="5369532">Func</span><span class="op" id="5369536">(</span><span class="op" id="5369537">)</span><span class="op" id="5369538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5369541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369545">for</span>&nbsp;<span class="ident" id="5369549">_</span><span class="op" id="5369550">,</span>&nbsp;<span class="ident" id="5369552">v</span>&nbsp;<span class="op" id="5369554">:=</span>&nbsp;<span class="keyword" id="5369557">range</span>&nbsp;<span class="ident" id="5369563"><a href="/lonnie.io/e8vm/link8/link.go.html#5369404">vars</a></span>&nbsp;<span class="op" id="5369568">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369572"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377344">writeVar</a></span><span class="op" id="5369580">(</span><span class="ident" id="5369581"><a href="/lonnie.io/e8vm/link8/link.go.html#5369464">w</a></span><span class="op" id="5369582">,</span>&nbsp;<span class="ident" id="5369584"><a href="/lonnie.io/e8vm/link8/link.go.html#5369552">v</a></span><span class="op" id="5369585">.</span><span class="ident" id="5369586">Var</span><span class="op" id="5369589">(</span><span class="op" id="5369590">)</span><span class="op" id="5369591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5369594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369598">return</span>&nbsp;<span class="ident" id="5369605"><a href="/lonnie.io/e8vm/link8/link.go.html#5369464">w</a></span><span class="op" id="5369606">.</span><span class="ident" id="5369607">bytes</span><span class="op" id="5369612">(</span><span class="op" id="5369613">)</span><span class="op" id="5369614">,</span>&nbsp;<span class="ident" id="5369616">nil</span><br>
<span class="lineno"></span><span class="op" id="5369620">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5369623">//&nbsp;LinkBareFunc&nbsp;produces&nbsp;a&nbsp;image&nbsp;of&nbsp;a&nbsp;single&nbsp;function&nbsp;that&nbsp;has&nbsp;no&nbsp;links.</span><br>
<span class="lineno"></span><span class="keyword" id="5369696">func</span>&nbsp;<span class="ident" id="5369701">LinkBareFunc</span><span class="op" id="5369713">(</span><span class="ident" id="5369714">f</span>&nbsp;<span class="op" id="5369716">*</span><span class="ident" id="5369717"><a href="/lonnie.io/e8vm/link8/func.go.html#5366652">Func</a></span><span class="op" id="5369721">)</span>&nbsp;<span class="op" id="5369723">(</span><span class="op" id="5369724">[</span><span class="op" id="5369725">]</span><span class="builtintype" id="5369726">byte</span><span class="op" id="5369730">,</span>&nbsp;<span class="builtintype" id="5369732">error</span><span class="op" id="5369737">)</span>&nbsp;<span class="op" id="5369739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369742">if</span>&nbsp;<span class="ident" id="5369745"><a href="/lonnie.io/e8vm/link8/link.go.html#5369714">f</a></span><span class="op" id="5369746">.</span><span class="ident" id="5369747">TooLarge</span><span class="op" id="5369755">(</span><span class="op" id="5369756">)</span>&nbsp;<span class="op" id="5369758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369762">return</span>&nbsp;<span class="ident" id="5369769">nil</span><span class="op" id="5369772">,</span>&nbsp;<span class="ident" id="5369774"><a href="/lonnie.io/e8vm/link8/link.go.html#5369063">fmt</a></span><span class="op" id="5369777">.</span><span class="ident" id="5369778">Errorf</span><span class="op" id="5369784">(</span><span class="string" id="5369785">&#34;code&nbsp;section&nbsp;too&nbsp;large&#34;</span><span class="op" id="5369809">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5369812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369816">w</span>&nbsp;<span class="op" id="5369818">:=</span>&nbsp;<span class="ident" id="5369821"><a href="/lonnie.io/e8vm/link8/writer.go.html#5376880">newWriter</a></span><span class="op" id="5369830">(</span><span class="op" id="5369831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369834"><a href="/lonnie.io/e8vm/link8/link.go.html#5369816">w</a></span><span class="op" id="5369835">.</span><span class="ident" id="5369836">writeBareFunc</span><span class="op" id="5369849">(</span><span class="ident" id="5369850"><a href="/lonnie.io/e8vm/link8/link.go.html#5369714">f</a></span><span class="op" id="5369851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369854">return</span>&nbsp;<span class="ident" id="5369861"><a href="/lonnie.io/e8vm/link8/link.go.html#5369816">w</a></span><span class="op" id="5369862">.</span><span class="ident" id="5369863">bytes</span><span class="op" id="5369868">(</span><span class="op" id="5369869">)</span><span class="op" id="5369870">,</span>&nbsp;<span class="ident" id="5369872">nil</span><br>
<span class="lineno">45</span><span class="op" id="5369876">}</span>
</div>
</body>
</html>
