<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/zip</h2>
<ul>
<li><a href="/gostd/archive/zip/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/zip/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/zip/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/zip/register.go.html">register.go</a></li>
<li><a href="/gostd/archive/zip/struct.go.html">struct.go</a></li>
<li><a href="/gostd/archive/zip/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/zip/writer_test.go.html">writer_test.go</a></li>
<li><a href="/gostd/archive/zip/zip_test.go.html">zip_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7991138">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7991193">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7991247">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7991298">package</span>&nbsp;<span class="ident" id="7991306">zip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7991311">import</span>&nbsp;<span class="op" id="7991318">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7991321">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7991330">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7991349">&#34;encoding/hex&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7991365">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7991371">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7991384">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7991390">&#34;path/filepath&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7991407">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7991417">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7991428">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7991439">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7991446">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7991449">type</span>&nbsp;<span class="ident" id="7991454">ZipTest</span>&nbsp;<span class="keyword" id="7991462">struct</span>&nbsp;<span class="op" id="7991469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991472">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7991480">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991488">Source</span>&nbsp;&nbsp;<span class="keyword" id="7991496">func</span><span class="op" id="7991500">(</span><span class="op" id="7991501">)</span>&nbsp;<span class="op" id="7991503">(</span><span class="ident" id="7991504">r</span>&nbsp;<span class="ident" id="7991506">io</span><span class="op" id="7991508">.</span><span class="ident" id="7991509">ReaderAt</span><span class="op" id="7991517">,</span>&nbsp;<span class="ident" id="7991519">size</span>&nbsp;<span class="ident" id="7991524">int64</span><span class="op" id="7991529">)</span>&nbsp;<span class="comment" id="7991531">//&nbsp;if&nbsp;non-nil,&nbsp;used&nbsp;instead&nbsp;of&nbsp;testdata/&lt;Name&gt;&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991584">Comment</span>&nbsp;<span class="builtintype" id="7991592">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991600">File</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7991608">[</span><span class="op" id="7991609">]</span><span class="ident" id="7991610">ZipTestFile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991623">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7991631">error</span>&nbsp;<span class="comment" id="7991637">//&nbsp;the&nbsp;error&nbsp;that&nbsp;Opening&nbsp;this&nbsp;file&nbsp;should&nbsp;return</span><br>
<span class="lineno"></span><span class="op" id="7991687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7991690">type</span>&nbsp;<span class="ident" id="7991695">ZipTestFile</span>&nbsp;<span class="keyword" id="7991707">struct</span>&nbsp;<span class="op" id="7991714">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991717">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7991728">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991736">Content</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7991747">[</span><span class="op" id="7991748">]</span><span class="builtintype" id="7991749">byte</span>&nbsp;<span class="comment" id="7991754">//&nbsp;if&nbsp;blank,&nbsp;will&nbsp;attempt&nbsp;to&nbsp;compare&nbsp;against&nbsp;File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991805">ContentErr</span>&nbsp;<span class="builtintype" id="7991816">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991823">File</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7991834">string</span>&nbsp;<span class="comment" id="7991841">//&nbsp;name&nbsp;of&nbsp;file&nbsp;to&nbsp;compare&nbsp;to&nbsp;(relative&nbsp;to&nbsp;testdata/)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991896">Mtime</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7991907">string</span>&nbsp;<span class="comment" id="7991914">//&nbsp;modified&nbsp;time&nbsp;in&nbsp;format&nbsp;&#34;mm-dd-yy&nbsp;hh:mm:ss&#34;</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991962">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7991973">os</span><span class="op" id="7991975">.</span><span class="ident" id="7991976">FileMode</span><br>
<span class="lineno"></span><span class="op" id="7991985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7991988">//&nbsp;Caution:&nbsp;The&nbsp;Mtime&nbsp;values&nbsp;found&nbsp;for&nbsp;the&nbsp;test&nbsp;files&nbsp;should&nbsp;correspond&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="7992063">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;values&nbsp;listed&nbsp;with&nbsp;unzip&nbsp;-l&nbsp;&lt;zipfile&gt;.&nbsp;However,&nbsp;the&nbsp;values</span><br>
<span class="lineno">40</span><span class="comment" id="7992138">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listed&nbsp;by&nbsp;unzip&nbsp;appear&nbsp;to&nbsp;be&nbsp;off&nbsp;by&nbsp;some&nbsp;hours.&nbsp;When&nbsp;creating</span><br>
<span class="lineno"></span><span class="comment" id="7992212">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fresh&nbsp;test&nbsp;files&nbsp;and&nbsp;testing&nbsp;them,&nbsp;this&nbsp;issue&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="comment" id="7992286">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;test&nbsp;files&nbsp;were&nbsp;created&nbsp;in&nbsp;Sydney,&nbsp;so&nbsp;there&nbsp;might&nbsp;be&nbsp;a&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="7992362">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zone&nbsp;issue.&nbsp;The&nbsp;time&nbsp;zone&nbsp;information&nbsp;does&nbsp;have&nbsp;to&nbsp;be&nbsp;encoded</span><br>
<span class="lineno"></span><span class="comment" id="7992436">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;somewhere,&nbsp;because&nbsp;otherwise&nbsp;unzip&nbsp;-l&nbsp;could&nbsp;not&nbsp;provide&nbsp;a&nbsp;different</span><br>
<span class="lineno">45</span><span class="comment" id="7992516">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;from&nbsp;what&nbsp;the&nbsp;archive/zip&nbsp;package&nbsp;provides,&nbsp;but&nbsp;there&nbsp;appears</span><br>
<span class="lineno"></span><span class="comment" id="7992595">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;be&nbsp;no&nbsp;documentation&nbsp;about&nbsp;this.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7992643">var</span>&nbsp;<span class="ident" id="7992647">tests</span>&nbsp;<span class="op" id="7992653">=</span>&nbsp;<span class="op" id="7992655">[</span><span class="op" id="7992656">]</span><span class="ident" id="7992657">ZipTest</span><span class="op" id="7992664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992667">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992671">Name</span><span class="op" id="7992675">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7992680">&#34;test.zip&#34;</span><span class="op" id="7992690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992694">Comment</span><span class="op" id="7992701">:</span>&nbsp;<span class="string" id="7992703">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="7992731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992735">File</span><span class="op" id="7992739">:</span>&nbsp;<span class="op" id="7992741">[</span><span class="op" id="7992742">]</span><span class="ident" id="7992743">ZipTestFile</span><span class="op" id="7992754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992765">Name</span><span class="op" id="7992769">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7992774">&#34;test.txt&#34;</span><span class="op" id="7992784">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992790">Content</span><span class="op" id="7992797">:</span>&nbsp;<span class="op" id="7992799">[</span><span class="op" id="7992800">]</span><span class="builtintype" id="7992801">byte</span><span class="op" id="7992805">(</span><span class="string" id="7992806">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="7992835">)</span><span class="op" id="7992836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992842">Mtime</span><span class="op" id="7992847">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7992851">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="7992870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992876">Mode</span><span class="op" id="7992880">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7992885">0644</span><span class="op" id="7992889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992894">}</span><span class="op" id="7992895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992900">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992906">Name</span><span class="op" id="7992910">:</span>&nbsp;&nbsp;<span class="string" id="7992913">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7992935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992941">File</span><span class="op" id="7992945">:</span>&nbsp;&nbsp;<span class="string" id="7992948">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7992970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992976">Mtime</span><span class="op" id="7992981">:</span>&nbsp;<span class="string" id="7992983">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="7993002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993008">Mode</span><span class="op" id="7993012">:</span>&nbsp;&nbsp;<span class="num" id="7993015">0644</span><span class="op" id="7993019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993024">}</span><span class="op" id="7993025">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993029">}</span><span class="op" id="7993030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993033">}</span><span class="op" id="7993034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993041">Name</span><span class="op" id="7993045">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7993050">&#34;test-trailing-junk.zip&#34;</span><span class="op" id="7993074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993078">Comment</span><span class="op" id="7993085">:</span>&nbsp;<span class="string" id="7993087">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="7993115">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993119">File</span><span class="op" id="7993123">:</span>&nbsp;<span class="op" id="7993125">[</span><span class="op" id="7993126">]</span><span class="ident" id="7993127">ZipTestFile</span><span class="op" id="7993138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993149">Name</span><span class="op" id="7993153">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7993158">&#34;test.txt&#34;</span><span class="op" id="7993168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993174">Content</span><span class="op" id="7993181">:</span>&nbsp;<span class="op" id="7993183">[</span><span class="op" id="7993184">]</span><span class="builtintype" id="7993185">byte</span><span class="op" id="7993189">(</span><span class="string" id="7993190">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="7993219">)</span><span class="op" id="7993220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993226">Mtime</span><span class="op" id="7993231">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7993235">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="7993254">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993260">Mode</span><span class="op" id="7993264">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7993269">0644</span><span class="op" id="7993273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993278">}</span><span class="op" id="7993279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993290">Name</span><span class="op" id="7993294">:</span>&nbsp;&nbsp;<span class="string" id="7993297">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7993319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993325">File</span><span class="op" id="7993329">:</span>&nbsp;&nbsp;<span class="string" id="7993332">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7993354">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993360">Mtime</span><span class="op" id="7993365">:</span>&nbsp;<span class="string" id="7993367">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="7993386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993392">Mode</span><span class="op" id="7993396">:</span>&nbsp;&nbsp;<span class="num" id="7993399">0644</span><span class="op" id="7993403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993408">}</span><span class="op" id="7993409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993413">}</span><span class="op" id="7993414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993417">}</span><span class="op" id="7993418">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993425">Name</span><span class="op" id="7993429">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7993433">&#34;r.zip&#34;</span><span class="op" id="7993440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993444">Source</span><span class="op" id="7993450">:</span>&nbsp;<span class="ident" id="7993452">returnRecursiveZip</span><span class="op" id="7993470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993474">File</span><span class="op" id="7993478">:</span>&nbsp;<span class="op" id="7993480">[</span><span class="op" id="7993481">]</span><span class="ident" id="7993482">ZipTestFile</span><span class="op" id="7993493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993498">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993504">Name</span><span class="op" id="7993508">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7993513">&#34;r/r.zip&#34;</span><span class="op" id="7993522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993528">Content</span><span class="op" id="7993535">:</span>&nbsp;<span class="ident" id="7993537">rZipBytes</span><span class="op" id="7993546">(</span><span class="op" id="7993547">)</span><span class="op" id="7993548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993554">Mtime</span><span class="op" id="7993559">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7993563">&#34;03-04-10&nbsp;00:24:16&#34;</span><span class="op" id="7993582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993588">Mode</span><span class="op" id="7993592">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7993597">0666</span><span class="op" id="7993601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993606">}</span><span class="op" id="7993607">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993611">}</span><span class="op" id="7993612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993615">}</span><span class="op" id="7993616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993623">Name</span><span class="op" id="7993627">:</span>&nbsp;<span class="string" id="7993629">&#34;symlink.zip&#34;</span><span class="op" id="7993642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993646">File</span><span class="op" id="7993650">:</span>&nbsp;<span class="op" id="7993652">[</span><span class="op" id="7993653">]</span><span class="ident" id="7993654">ZipTestFile</span><span class="op" id="7993665">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993676">Name</span><span class="op" id="7993680">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7993685">&#34;symlink&#34;</span><span class="op" id="7993694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993700">Content</span><span class="op" id="7993707">:</span>&nbsp;<span class="op" id="7993709">[</span><span class="op" id="7993710">]</span><span class="builtintype" id="7993711">byte</span><span class="op" id="7993715">(</span><span class="string" id="7993716">&#34;../target&#34;</span><span class="op" id="7993727">)</span><span class="op" id="7993728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993734">Mode</span><span class="op" id="7993738">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7993743">0777</span>&nbsp;<span class="op" id="7993748">|</span>&nbsp;<span class="ident" id="7993750">os</span><span class="op" id="7993752">.</span><span class="ident" id="7993753">ModeSymlink</span><span class="op" id="7993764">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993769">}</span><span class="op" id="7993770">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993774">}</span><span class="op" id="7993775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993778">}</span><span class="op" id="7993779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993786">Name</span><span class="op" id="7993790">:</span>&nbsp;<span class="string" id="7993792">&#34;readme.zip&#34;</span><span class="op" id="7993804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993807">}</span><span class="op" id="7993808">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993815">Name</span><span class="op" id="7993819">:</span>&nbsp;&nbsp;<span class="string" id="7993822">&#34;readme.notzip&#34;</span><span class="op" id="7993837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993841">Error</span><span class="op" id="7993846">:</span>&nbsp;<span class="ident" id="7993848">ErrFormat</span><span class="op" id="7993857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993860">}</span><span class="op" id="7993861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993864">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993868">Name</span><span class="op" id="7993872">:</span>&nbsp;<span class="string" id="7993874">&#34;dd.zip&#34;</span><span class="op" id="7993882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993886">File</span><span class="op" id="7993890">:</span>&nbsp;<span class="op" id="7993892">[</span><span class="op" id="7993893">]</span><span class="ident" id="7993894">ZipTestFile</span><span class="op" id="7993905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993916">Name</span><span class="op" id="7993920">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7993925">&#34;filename&#34;</span><span class="op" id="7993935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993941">Content</span><span class="op" id="7993948">:</span>&nbsp;<span class="op" id="7993950">[</span><span class="op" id="7993951">]</span><span class="builtintype" id="7993952">byte</span><span class="op" id="7993956">(</span><span class="string" id="7993957">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;textfile.\n&#34;</span><span class="op" id="7993985">)</span><span class="op" id="7993986">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993992">Mtime</span><span class="op" id="7993997">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7994001">&#34;02-02-11&nbsp;13:06:20&#34;</span><span class="op" id="7994020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994026">Mode</span><span class="op" id="7994030">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7994035">0666</span><span class="op" id="7994039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994044">}</span><span class="op" id="7994045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994049">}</span><span class="op" id="7994050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994053">}</span><span class="op" id="7994054">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7994061">//&nbsp;created&nbsp;in&nbsp;windows&nbsp;XP&nbsp;file&nbsp;manager.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994102">Name</span><span class="op" id="7994106">:</span>&nbsp;<span class="string" id="7994108">&#34;winxp.zip&#34;</span><span class="op" id="7994119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994123">File</span><span class="op" id="7994127">:</span>&nbsp;<span class="ident" id="7994129">crossPlatform</span><span class="op" id="7994142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994145">}</span><span class="op" id="7994146">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7994153">//&nbsp;created&nbsp;by&nbsp;Zip&nbsp;3.0&nbsp;under&nbsp;Linux</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994189">Name</span><span class="op" id="7994193">:</span>&nbsp;<span class="string" id="7994195">&#34;unix.zip&#34;</span><span class="op" id="7994205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994209">File</span><span class="op" id="7994213">:</span>&nbsp;<span class="ident" id="7994215">crossPlatform</span><span class="op" id="7994228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994231">}</span><span class="op" id="7994232">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7994239">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;before&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7994295">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994351">Name</span><span class="op" id="7994355">:</span>&nbsp;<span class="string" id="7994357">&#34;go-no-datadesc-sig.zip&#34;</span><span class="op" id="7994381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994385">File</span><span class="op" id="7994389">:</span>&nbsp;<span class="op" id="7994391">[</span><span class="op" id="7994392">]</span><span class="ident" id="7994393">ZipTestFile</span><span class="op" id="7994404">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994415">Name</span><span class="op" id="7994419">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7994424">&#34;foo.txt&#34;</span><span class="op" id="7994433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994439">Content</span><span class="op" id="7994446">:</span>&nbsp;<span class="op" id="7994448">[</span><span class="op" id="7994449">]</span><span class="builtintype" id="7994450">byte</span><span class="op" id="7994454">(</span><span class="string" id="7994455">&#34;foo\n&#34;</span><span class="op" id="7994462">)</span><span class="op" id="7994463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994469">Mtime</span><span class="op" id="7994474">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7994478">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7994497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994503">Mode</span><span class="op" id="7994507">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7994512">0644</span><span class="op" id="7994516">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994521">}</span><span class="op" id="7994522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994533">Name</span><span class="op" id="7994537">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7994542">&#34;bar.txt&#34;</span><span class="op" id="7994551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994557">Content</span><span class="op" id="7994564">:</span>&nbsp;<span class="op" id="7994566">[</span><span class="op" id="7994567">]</span><span class="builtintype" id="7994568">byte</span><span class="op" id="7994572">(</span><span class="string" id="7994573">&#34;bar\n&#34;</span><span class="op" id="7994580">)</span><span class="op" id="7994581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994587">Mtime</span><span class="op" id="7994592">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7994596">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7994615">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994621">Mode</span><span class="op" id="7994625">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7994630">0644</span><span class="op" id="7994634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994639">}</span><span class="op" id="7994640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994644">}</span><span class="op" id="7994645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994648">}</span><span class="op" id="7994649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994652">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7994656">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;after&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7994711">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994767">Name</span><span class="op" id="7994771">:</span>&nbsp;<span class="string" id="7994773">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="7994799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994803">File</span><span class="op" id="7994807">:</span>&nbsp;<span class="op" id="7994809">[</span><span class="op" id="7994810">]</span><span class="ident" id="7994811">ZipTestFile</span><span class="op" id="7994822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994827">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994833">Name</span><span class="op" id="7994837">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7994842">&#34;foo.txt&#34;</span><span class="op" id="7994851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994857">Content</span><span class="op" id="7994864">:</span>&nbsp;<span class="op" id="7994866">[</span><span class="op" id="7994867">]</span><span class="builtintype" id="7994868">byte</span><span class="op" id="7994872">(</span><span class="string" id="7994873">&#34;foo\n&#34;</span><span class="op" id="7994880">)</span><span class="op" id="7994881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994887">Mode</span><span class="op" id="7994891">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7994896">0666</span><span class="op" id="7994900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994905">}</span><span class="op" id="7994906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994911">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994917">Name</span><span class="op" id="7994921">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7994926">&#34;bar.txt&#34;</span><span class="op" id="7994935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994941">Content</span><span class="op" id="7994948">:</span>&nbsp;<span class="op" id="7994950">[</span><span class="op" id="7994951">]</span><span class="builtintype" id="7994952">byte</span><span class="op" id="7994956">(</span><span class="string" id="7994957">&#34;bar\n&#34;</span><span class="op" id="7994964">)</span><span class="op" id="7994965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994971">Mode</span><span class="op" id="7994975">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7994980">0666</span><span class="op" id="7994984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994989">}</span><span class="op" id="7994990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994994">}</span><span class="op" id="7994995">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994998">}</span><span class="op" id="7994999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995006">Name</span><span class="op" id="7995010">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7995014">&#34;Bad-CRC32-in-data-descriptor&#34;</span><span class="op" id="7995044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995048">Source</span><span class="op" id="7995054">:</span>&nbsp;<span class="ident" id="7995056">returnCorruptCRC32Zip</span><span class="op" id="7995077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995081">File</span><span class="op" id="7995085">:</span>&nbsp;<span class="op" id="7995087">[</span><span class="op" id="7995088">]</span><span class="ident" id="7995089">ZipTestFile</span><span class="op" id="7995100">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995111">Name</span><span class="op" id="7995115">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7995123">&#34;foo.txt&#34;</span><span class="op" id="7995132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995138">Content</span><span class="op" id="7995145">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7995150">[</span><span class="op" id="7995151">]</span><span class="builtintype" id="7995152">byte</span><span class="op" id="7995156">(</span><span class="string" id="7995157">&#34;foo\n&#34;</span><span class="op" id="7995164">)</span><span class="op" id="7995165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995171">Mode</span><span class="op" id="7995175">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7995183">0666</span><span class="op" id="7995187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995193">ContentErr</span><span class="op" id="7995203">:</span>&nbsp;<span class="ident" id="7995205">ErrChecksum</span><span class="op" id="7995216">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995221">}</span><span class="op" id="7995222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995233">Name</span><span class="op" id="7995237">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7995242">&#34;bar.txt&#34;</span><span class="op" id="7995251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995257">Content</span><span class="op" id="7995264">:</span>&nbsp;<span class="op" id="7995266">[</span><span class="op" id="7995267">]</span><span class="builtintype" id="7995268">byte</span><span class="op" id="7995272">(</span><span class="string" id="7995273">&#34;bar\n&#34;</span><span class="op" id="7995280">)</span><span class="op" id="7995281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995287">Mode</span><span class="op" id="7995291">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7995296">0666</span><span class="op" id="7995300">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995305">}</span><span class="op" id="7995306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995310">}</span><span class="op" id="7995311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995314">}</span><span class="op" id="7995315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7995318">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;accept&nbsp;valid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7995378">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995445">Name</span><span class="op" id="7995449">:</span>&nbsp;<span class="string" id="7995451">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7995475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995479">File</span><span class="op" id="7995483">:</span>&nbsp;<span class="op" id="7995485">[</span><span class="op" id="7995486">]</span><span class="ident" id="7995487">ZipTestFile</span><span class="op" id="7995498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995509">Name</span><span class="op" id="7995513">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7995518">&#34;foo.txt&#34;</span><span class="op" id="7995527">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995533">Content</span><span class="op" id="7995540">:</span>&nbsp;<span class="op" id="7995542">[</span><span class="op" id="7995543">]</span><span class="builtintype" id="7995544">byte</span><span class="op" id="7995548">(</span><span class="string" id="7995549">&#34;foo\n&#34;</span><span class="op" id="7995556">)</span><span class="op" id="7995557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995563">Mtime</span><span class="op" id="7995568">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7995572">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7995591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995597">Mode</span><span class="op" id="7995601">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7995606">0644</span><span class="op" id="7995610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995615">}</span><span class="op" id="7995616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995621">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995627">Name</span><span class="op" id="7995631">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7995636">&#34;bar.txt&#34;</span><span class="op" id="7995645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995651">Content</span><span class="op" id="7995658">:</span>&nbsp;<span class="op" id="7995660">[</span><span class="op" id="7995661">]</span><span class="builtintype" id="7995662">byte</span><span class="op" id="7995666">(</span><span class="string" id="7995667">&#34;bar\n&#34;</span><span class="op" id="7995674">)</span><span class="op" id="7995675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995681">Mtime</span><span class="op" id="7995686">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7995690">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7995709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995715">Mode</span><span class="op" id="7995719">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7995724">0644</span><span class="op" id="7995728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995733">}</span><span class="op" id="7995734">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995738">}</span><span class="op" id="7995739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995742">}</span><span class="op" id="7995743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7995746">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;reject&nbsp;invalid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7995808">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995871">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995875">Name</span><span class="op" id="7995879">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7995883">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7995907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995911">Source</span><span class="op" id="7995917">:</span>&nbsp;<span class="ident" id="7995919">returnCorruptNotStreamedZip</span><span class="op" id="7995946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995950">File</span><span class="op" id="7995954">:</span>&nbsp;<span class="op" id="7995956">[</span><span class="op" id="7995957">]</span><span class="ident" id="7995958">ZipTestFile</span><span class="op" id="7995969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995980">Name</span><span class="op" id="7995984">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7995992">&#34;foo.txt&#34;</span><span class="op" id="7996001">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996007">Content</span><span class="op" id="7996014">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7996019">[</span><span class="op" id="7996020">]</span><span class="builtintype" id="7996021">byte</span><span class="op" id="7996025">(</span><span class="string" id="7996026">&#34;foo\n&#34;</span><span class="op" id="7996033">)</span><span class="op" id="7996034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996040">Mtime</span><span class="op" id="7996045">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7996052">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7996071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996077">Mode</span><span class="op" id="7996081">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7996089">0644</span><span class="op" id="7996093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996099">ContentErr</span><span class="op" id="7996109">:</span>&nbsp;<span class="ident" id="7996111">ErrChecksum</span><span class="op" id="7996122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996127">}</span><span class="op" id="7996128">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996139">Name</span><span class="op" id="7996143">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7996148">&#34;bar.txt&#34;</span><span class="op" id="7996157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996163">Content</span><span class="op" id="7996170">:</span>&nbsp;<span class="op" id="7996172">[</span><span class="op" id="7996173">]</span><span class="builtintype" id="7996174">byte</span><span class="op" id="7996178">(</span><span class="string" id="7996179">&#34;bar\n&#34;</span><span class="op" id="7996186">)</span><span class="op" id="7996187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996193">Mtime</span><span class="op" id="7996198">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7996202">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7996221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996227">Mode</span><span class="op" id="7996231">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7996236">0644</span><span class="op" id="7996240">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996245">}</span><span class="op" id="7996246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996250">}</span><span class="op" id="7996251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996254">}</span><span class="op" id="7996255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996262">Name</span><span class="op" id="7996266">:</span>&nbsp;<span class="string" id="7996268">&#34;zip64.zip&#34;</span><span class="op" id="7996279">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996283">File</span><span class="op" id="7996287">:</span>&nbsp;<span class="op" id="7996289">[</span><span class="op" id="7996290">]</span><span class="ident" id="7996291">ZipTestFile</span><span class="op" id="7996302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996313">Name</span><span class="op" id="7996317">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7996322">&#34;README&#34;</span><span class="op" id="7996330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996336">Content</span><span class="op" id="7996343">:</span>&nbsp;<span class="op" id="7996345">[</span><span class="op" id="7996346">]</span><span class="builtintype" id="7996347">byte</span><span class="op" id="7996351">(</span><span class="string" id="7996352">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="7996391">)</span><span class="op" id="7996392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996398">Mtime</span><span class="op" id="7996403">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7996407">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="7996426">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996432">Mode</span><span class="op" id="7996436">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7996441">0644</span><span class="op" id="7996445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996450">}</span><span class="op" id="7996451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996455">}</span><span class="op" id="7996456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996459">}</span><span class="op" id="7996460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7996463">//&nbsp;Another&nbsp;zip64&nbsp;file&nbsp;with&nbsp;different&nbsp;Extras&nbsp;fields.&nbsp;(golang.org/issue/7069)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996544">Name</span><span class="op" id="7996548">:</span>&nbsp;<span class="string" id="7996550">&#34;zip64-2.zip&#34;</span><span class="op" id="7996563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996567">File</span><span class="op" id="7996571">:</span>&nbsp;<span class="op" id="7996573">[</span><span class="op" id="7996574">]</span><span class="ident" id="7996575">ZipTestFile</span><span class="op" id="7996586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996597">Name</span><span class="op" id="7996601">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7996606">&#34;README&#34;</span><span class="op" id="7996614">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996620">Content</span><span class="op" id="7996627">:</span>&nbsp;<span class="op" id="7996629">[</span><span class="op" id="7996630">]</span><span class="builtintype" id="7996631">byte</span><span class="op" id="7996635">(</span><span class="string" id="7996636">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="7996675">)</span><span class="op" id="7996676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996682">Mtime</span><span class="op" id="7996687">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7996691">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="7996710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996716">Mode</span><span class="op" id="7996720">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7996725">0644</span><span class="op" id="7996729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996734">}</span><span class="op" id="7996735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996739">}</span><span class="op" id="7996740">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996743">}</span><span class="op" id="7996744">,</span><br>
<span class="lineno"></span><span class="op" id="7996746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7996749">var</span>&nbsp;<span class="ident" id="7996753">crossPlatform</span>&nbsp;<span class="op" id="7996767">=</span>&nbsp;<span class="op" id="7996769">[</span><span class="op" id="7996770">]</span><span class="ident" id="7996771">ZipTestFile</span><span class="op" id="7996782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996785">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996789">Name</span><span class="op" id="7996793">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7996798">&#34;hello&#34;</span><span class="op" id="7996805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996809">Content</span><span class="op" id="7996816">:</span>&nbsp;<span class="op" id="7996818">[</span><span class="op" id="7996819">]</span><span class="builtintype" id="7996820">byte</span><span class="op" id="7996824">(</span><span class="string" id="7996825">&#34;world&nbsp;\r\n&#34;</span><span class="op" id="7996837">)</span><span class="op" id="7996838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996842">Mode</span><span class="op" id="7996846">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7996851">0666</span><span class="op" id="7996855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996858">}</span><span class="op" id="7996859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996862">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996866">Name</span><span class="op" id="7996870">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7996875">&#34;dir/bar&#34;</span><span class="op" id="7996884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996888">Content</span><span class="op" id="7996895">:</span>&nbsp;<span class="op" id="7996897">[</span><span class="op" id="7996898">]</span><span class="builtintype" id="7996899">byte</span><span class="op" id="7996903">(</span><span class="string" id="7996904">&#34;foo&nbsp;\r\n&#34;</span><span class="op" id="7996914">)</span><span class="op" id="7996915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996919">Mode</span><span class="op" id="7996923">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7996928">0666</span><span class="op" id="7996932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996935">}</span><span class="op" id="7996936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996939">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996943">Name</span><span class="op" id="7996947">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7996952">&#34;dir/empty/&#34;</span><span class="op" id="7996964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996968">Content</span><span class="op" id="7996975">:</span>&nbsp;<span class="op" id="7996977">[</span><span class="op" id="7996978">]</span><span class="builtintype" id="7996979">byte</span><span class="op" id="7996983">{</span><span class="op" id="7996984">}</span><span class="op" id="7996985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996989">Mode</span><span class="op" id="7996993">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7996998">os</span><span class="op" id="7997000">.</span><span class="ident" id="7997001">ModeDir</span>&nbsp;<span class="op" id="7997009">|</span>&nbsp;<span class="num" id="7997011">0777</span><span class="op" id="7997015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997018">}</span><span class="op" id="7997019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997022">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7997026">Name</span><span class="op" id="7997030">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7997035">&#34;readonly&#34;</span><span class="op" id="7997045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7997049">Content</span><span class="op" id="7997056">:</span>&nbsp;<span class="op" id="7997058">[</span><span class="op" id="7997059">]</span><span class="builtintype" id="7997060">byte</span><span class="op" id="7997064">(</span><span class="string" id="7997065">&#34;important&nbsp;\r\n&#34;</span><span class="op" id="7997081">)</span><span class="op" id="7997082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7997086">Mode</span><span class="op" id="7997090">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7997095">0444</span><span class="op" id="7997099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997102">}</span><span class="op" id="7997103">,</span><br>
<span class="lineno"></span><span class="op" id="7997105">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="7997108">func</span>&nbsp;<span class="ident" id="7997113">TestReader</span><span class="op" id="7997123">(</span><span class="ident" id="7997124">t</span>&nbsp;<span class="op" id="7997126">*</span><span class="ident" id="7997127">testing</span><span class="op" id="7997134">.</span><span class="ident" id="7997135">T</span><span class="op" id="7997136">)</span>&nbsp;<span class="op" id="7997138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7997141">for</span>&nbsp;<span class="ident" id="7997145">_</span><span class="op" id="7997146">,</span>&nbsp;<span class="ident" id="7997148">zt</span>&nbsp;<span class="op" id="7997151">:=</span>&nbsp;<span class="keyword" id="7997154">range</span>&nbsp;<span class="ident" id="7997160">tests</span>&nbsp;<span class="op" id="7997166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7997170">readTestZip</span><span class="op" id="7997181">(</span><span class="ident" id="7997182">t</span><span class="op" id="7997183">,</span>&nbsp;<span class="ident" id="7997185">zt</span><span class="op" id="7997187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997190">}</span><br>
<span class="lineno">280</span><span class="op" id="7997192">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7997195">func</span>&nbsp;<span class="ident" id="7997200">readTestZip</span><span class="op" id="7997211">(</span><span class="ident" id="7997212">t</span>&nbsp;<span class="op" id="7997214">*</span><span class="ident" id="7997215">testing</span><span class="op" id="7997222">.</span><span class="ident" id="7997223">T</span><span class="op" id="7997224">,</span>&nbsp;<span class="ident" id="7997226">zt</span>&nbsp;<span class="ident" id="7997229">ZipTest</span><span class="op" id="7997236">)</span>&nbsp;<span class="op" id="7997238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7997241">var</span>&nbsp;<span class="ident" id="7997245">z</span>&nbsp;<span class="op" id="7997247">*</span><span class="ident" id="7997248">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7997256">var</span>&nbsp;<span class="ident" id="7997260">err</span>&nbsp;<span class="builtintype" id="7997264">error</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7997271">if</span>&nbsp;<span class="ident" id="7997274">zt</span><span class="op" id="7997276">.</span><span class="ident" id="7997277">Source</span>&nbsp;<span class="op" id="7997284">!=</span>&nbsp;<span class="ident" id="7997287">nil</span>&nbsp;<span class="op" id="7997291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7997295">rat</span><span class="op" id="7997298">,</span>&nbsp;<span class="ident" id="7997300">size</span>&nbsp;<span class="op" id="7997305">:=</span>&nbsp;<span class="ident" id="7997308">zt</span><span class="op" id="7997310">.</span><span class="ident" id="7997311">Source</span><span class="op" id="7997317">(</span><span class="op" id="7997318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7997322">z</span><span class="op" id="7997323">,</span>&nbsp;<span class="ident" id="7997325">err</span>&nbsp;<span class="op" id="7997329">=</span>&nbsp;<span class="ident" id="7997331">NewReader</span><span class="op" id="7997340">(</span><span class="ident" id="7997341">rat</span><span class="op" id="7997344">,</span>&nbsp;<span class="ident" id="7997346">size</span><span class="op" id="7997350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997353">}</span>&nbsp;<span class="keyword" id="7997355">else</span>&nbsp;<span class="op" id="7997360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7997364">var</span>&nbsp;<span class="ident" id="7997368">rc</span>&nbsp;<span class="op" id="7997371">*</span><span class="ident" id="7997372">ReadCloser</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7997385">rc</span><span class="op" id="7997387">,</span>&nbsp;<span class="ident" id="7997389">err</span>&nbsp;<span class="op" id="7997393">=</span>&nbsp;<span class="ident" id="7997395">OpenReader</span><span class="op" id="7997405">(</span><span class="ident" id="7997406">filepath</span><span class="op" id="7997414">.</span><span class="ident" id="7997415">Join</span><span class="op" id="7997419">(</span><span class="string" id="7997420">&#34;testdata&#34;</span><span class="op" id="7997430">,</span>&nbsp;<span class="ident" id="7997432">zt</span><span class="op" id="7997434">.</span><span class="ident" id="7997435">Name</span><span class="op" id="7997439">)</span><span class="op" id="7997440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7997444">if</span>&nbsp;<span class="ident" id="7997447">err</span>&nbsp;<span class="op" id="7997451">==</span>&nbsp;<span class="ident" id="7997454">nil</span>&nbsp;<span class="op" id="7997458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7997463">defer</span>&nbsp;<span class="ident" id="7997469">rc</span><span class="op" id="7997471">.</span><span class="ident" id="7997472">Close</span><span class="op" id="7997477">(</span><span class="op" id="7997478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7997483">z</span>&nbsp;<span class="op" id="7997485">=</span>&nbsp;<span class="op" id="7997487">&amp;</span><span class="ident" id="7997488">rc</span><span class="op" id="7997490">.</span><span class="ident" id="7997491">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997500">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7997506">if</span>&nbsp;<span class="ident" id="7997509">err</span>&nbsp;<span class="op" id="7997513">!=</span>&nbsp;<span class="ident" id="7997516">zt</span><span class="op" id="7997518">.</span><span class="ident" id="7997519">Error</span>&nbsp;<span class="op" id="7997525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7997529">t</span><span class="op" id="7997530">.</span><span class="ident" id="7997531">Errorf</span><span class="op" id="7997537">(</span><span class="string" id="7997538">&#34;%s:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7997561">,</span>&nbsp;<span class="ident" id="7997563">zt</span><span class="op" id="7997565">.</span><span class="ident" id="7997566">Name</span><span class="op" id="7997570">,</span>&nbsp;<span class="ident" id="7997572">err</span><span class="op" id="7997575">,</span>&nbsp;<span class="ident" id="7997577">zt</span><span class="op" id="7997579">.</span><span class="ident" id="7997580">Error</span><span class="op" id="7997585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7997589">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997597">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7997601">//&nbsp;bail&nbsp;if&nbsp;file&nbsp;is&nbsp;not&nbsp;zip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7997629">if</span>&nbsp;<span class="ident" id="7997632">err</span>&nbsp;<span class="op" id="7997636">==</span>&nbsp;<span class="ident" id="7997639">ErrFormat</span>&nbsp;<span class="op" id="7997649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7997653">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997661">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7997665">//&nbsp;bail&nbsp;here&nbsp;if&nbsp;no&nbsp;Files&nbsp;expected&nbsp;to&nbsp;be&nbsp;tested</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7997713">//&nbsp;(there&nbsp;may&nbsp;actually&nbsp;be&nbsp;files&nbsp;in&nbsp;the&nbsp;zip,&nbsp;but&nbsp;we&nbsp;don&#39;t&nbsp;care)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7997777">if</span>&nbsp;<span class="ident" id="7997780">zt</span><span class="op" id="7997782">.</span><span class="ident" id="7997783">File</span>&nbsp;<span class="op" id="7997788">==</span>&nbsp;<span class="ident" id="7997791">nil</span>&nbsp;<span class="op" id="7997795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7997799">return</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7997811">if</span>&nbsp;<span class="ident" id="7997814">z</span><span class="op" id="7997815">.</span><span class="ident" id="7997816">Comment</span>&nbsp;<span class="op" id="7997824">!=</span>&nbsp;<span class="ident" id="7997827">zt</span><span class="op" id="7997829">.</span><span class="ident" id="7997830">Comment</span>&nbsp;<span class="op" id="7997838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7997842">t</span><span class="op" id="7997843">.</span><span class="ident" id="7997844">Errorf</span><span class="op" id="7997850">(</span><span class="string" id="7997851">&#34;%s:&nbsp;comment=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7997876">,</span>&nbsp;<span class="ident" id="7997878">zt</span><span class="op" id="7997880">.</span><span class="ident" id="7997881">Name</span><span class="op" id="7997885">,</span>&nbsp;<span class="ident" id="7997887">z</span><span class="op" id="7997888">.</span><span class="ident" id="7997889">Comment</span><span class="op" id="7997896">,</span>&nbsp;<span class="ident" id="7997898">zt</span><span class="op" id="7997900">.</span><span class="ident" id="7997901">Comment</span><span class="op" id="7997908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997911">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7997914">if</span>&nbsp;<span class="builtinfunc" id="7997917">len</span><span class="op" id="7997920">(</span><span class="ident" id="7997921">z</span><span class="op" id="7997922">.</span><span class="ident" id="7997923">File</span><span class="op" id="7997927">)</span>&nbsp;<span class="op" id="7997929">!=</span>&nbsp;<span class="builtinfunc" id="7997932">len</span><span class="op" id="7997935">(</span><span class="ident" id="7997936">zt</span><span class="op" id="7997938">.</span><span class="ident" id="7997939">File</span><span class="op" id="7997943">)</span>&nbsp;<span class="op" id="7997945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7997949">t</span><span class="op" id="7997950">.</span><span class="ident" id="7997951">Fatalf</span><span class="op" id="7997957">(</span><span class="string" id="7997958">&#34;%s:&nbsp;file&nbsp;count=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7997986">,</span>&nbsp;<span class="ident" id="7997988">zt</span><span class="op" id="7997990">.</span><span class="ident" id="7997991">Name</span><span class="op" id="7997995">,</span>&nbsp;<span class="builtinfunc" id="7997997">len</span><span class="op" id="7998000">(</span><span class="ident" id="7998001">z</span><span class="op" id="7998002">.</span><span class="ident" id="7998003">File</span><span class="op" id="7998007">)</span><span class="op" id="7998008">,</span>&nbsp;<span class="builtinfunc" id="7998010">len</span><span class="op" id="7998013">(</span><span class="ident" id="7998014">zt</span><span class="op" id="7998016">.</span><span class="ident" id="7998017">File</span><span class="op" id="7998021">)</span><span class="op" id="7998022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998025">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7998029">//&nbsp;test&nbsp;read&nbsp;of&nbsp;each&nbsp;file</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998056">for</span>&nbsp;<span class="ident" id="7998060">i</span><span class="op" id="7998061">,</span>&nbsp;<span class="ident" id="7998063">ft</span>&nbsp;<span class="op" id="7998066">:=</span>&nbsp;<span class="keyword" id="7998069">range</span>&nbsp;<span class="ident" id="7998075">zt</span><span class="op" id="7998077">.</span><span class="ident" id="7998078">File</span>&nbsp;<span class="op" id="7998083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998087">readTestFile</span><span class="op" id="7998099">(</span><span class="ident" id="7998100">t</span><span class="op" id="7998101">,</span>&nbsp;<span class="ident" id="7998103">zt</span><span class="op" id="7998105">,</span>&nbsp;<span class="ident" id="7998107">ft</span><span class="op" id="7998109">,</span>&nbsp;<span class="ident" id="7998111">z</span><span class="op" id="7998112">.</span><span class="ident" id="7998113">File</span><span class="op" id="7998117">[</span><span class="ident" id="7998118">i</span><span class="op" id="7998119">]</span><span class="op" id="7998120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7998127">//&nbsp;test&nbsp;simultaneous&nbsp;reads</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998155">n</span>&nbsp;<span class="op" id="7998157">:=</span>&nbsp;<span class="num" id="7998160">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998163">done</span>&nbsp;<span class="op" id="7998168">:=</span>&nbsp;<span class="builtinfunc" id="7998171">make</span><span class="op" id="7998175">(</span><span class="keyword" id="7998176">chan</span>&nbsp;<span class="builtintype" id="7998181">bool</span><span class="op" id="7998185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998188">for</span>&nbsp;<span class="ident" id="7998192">i</span>&nbsp;<span class="op" id="7998194">:=</span>&nbsp;<span class="num" id="7998197">0</span><span class="op" id="7998198">;</span>&nbsp;<span class="ident" id="7998200">i</span>&nbsp;<span class="op" id="7998202">&lt;</span>&nbsp;<span class="num" id="7998204">5</span><span class="op" id="7998205">;</span>&nbsp;<span class="ident" id="7998207">i</span><span class="op" id="7998208">++</span>&nbsp;<span class="op" id="7998211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998215">for</span>&nbsp;<span class="ident" id="7998219">j</span><span class="op" id="7998220">,</span>&nbsp;<span class="ident" id="7998222">ft</span>&nbsp;<span class="op" id="7998225">:=</span>&nbsp;<span class="keyword" id="7998228">range</span>&nbsp;<span class="ident" id="7998234">zt</span><span class="op" id="7998236">.</span><span class="ident" id="7998237">File</span>&nbsp;<span class="op" id="7998242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998247">go</span>&nbsp;<span class="keyword" id="7998250">func</span><span class="op" id="7998254">(</span><span class="ident" id="7998255">j</span>&nbsp;<span class="builtintype" id="7998257">int</span><span class="op" id="7998260">,</span>&nbsp;<span class="ident" id="7998262">ft</span>&nbsp;<span class="ident" id="7998265">ZipTestFile</span><span class="op" id="7998276">)</span>&nbsp;<span class="op" id="7998278">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998284">readTestFile</span><span class="op" id="7998296">(</span><span class="ident" id="7998297">t</span><span class="op" id="7998298">,</span>&nbsp;<span class="ident" id="7998300">zt</span><span class="op" id="7998302">,</span>&nbsp;<span class="ident" id="7998304">ft</span><span class="op" id="7998306">,</span>&nbsp;<span class="ident" id="7998308">z</span><span class="op" id="7998309">.</span><span class="ident" id="7998310">File</span><span class="op" id="7998314">[</span><span class="ident" id="7998315">j</span><span class="op" id="7998316">]</span><span class="op" id="7998317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998323">done</span>&nbsp;<span class="op" id="7998328">&lt;-</span>&nbsp;<span class="builtintype" id="7998331">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998339">}</span><span class="op" id="7998340">(</span><span class="ident" id="7998341">j</span><span class="op" id="7998342">,</span>&nbsp;<span class="ident" id="7998344">ft</span><span class="op" id="7998346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998351">n</span><span class="op" id="7998352">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998357">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998363">for</span>&nbsp;<span class="op" id="7998367">;</span>&nbsp;<span class="ident" id="7998369">n</span>&nbsp;<span class="op" id="7998371">&gt;</span>&nbsp;<span class="num" id="7998373">0</span><span class="op" id="7998374">;</span>&nbsp;<span class="ident" id="7998376">n</span><span class="op" id="7998377">--</span>&nbsp;<span class="op" id="7998380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998384">&lt;-</span><span class="ident" id="7998386">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998392">}</span><br>
<span class="lineno"></span><span class="op" id="7998394">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="7998397">func</span>&nbsp;<span class="ident" id="7998402">readTestFile</span><span class="op" id="7998414">(</span><span class="ident" id="7998415">t</span>&nbsp;<span class="op" id="7998417">*</span><span class="ident" id="7998418">testing</span><span class="op" id="7998425">.</span><span class="ident" id="7998426">T</span><span class="op" id="7998427">,</span>&nbsp;<span class="ident" id="7998429">zt</span>&nbsp;<span class="ident" id="7998432">ZipTest</span><span class="op" id="7998439">,</span>&nbsp;<span class="ident" id="7998441">ft</span>&nbsp;<span class="ident" id="7998444">ZipTestFile</span><span class="op" id="7998455">,</span>&nbsp;<span class="ident" id="7998457">f</span>&nbsp;<span class="op" id="7998459">*</span><span class="ident" id="7998460">File</span><span class="op" id="7998464">)</span>&nbsp;<span class="op" id="7998466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998469">if</span>&nbsp;<span class="ident" id="7998472">f</span><span class="op" id="7998473">.</span><span class="ident" id="7998474">Name</span>&nbsp;<span class="op" id="7998479">!=</span>&nbsp;<span class="ident" id="7998482">ft</span><span class="op" id="7998484">.</span><span class="ident" id="7998485">Name</span>&nbsp;<span class="op" id="7998490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998494">t</span><span class="op" id="7998495">.</span><span class="ident" id="7998496">Errorf</span><span class="op" id="7998502">(</span><span class="string" id="7998503">&#34;%s:&nbsp;name=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7998525">,</span>&nbsp;<span class="ident" id="7998527">zt</span><span class="op" id="7998529">.</span><span class="ident" id="7998530">Name</span><span class="op" id="7998534">,</span>&nbsp;<span class="ident" id="7998536">f</span><span class="op" id="7998537">.</span><span class="ident" id="7998538">Name</span><span class="op" id="7998542">,</span>&nbsp;<span class="ident" id="7998544">ft</span><span class="op" id="7998546">.</span><span class="ident" id="7998547">Name</span><span class="op" id="7998551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998554">}</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998558">if</span>&nbsp;<span class="ident" id="7998561">ft</span><span class="op" id="7998563">.</span><span class="ident" id="7998564">Mtime</span>&nbsp;<span class="op" id="7998570">!=</span>&nbsp;<span class="string" id="7998573">&#34;&#34;</span>&nbsp;<span class="op" id="7998576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998580">mtime</span><span class="op" id="7998585">,</span>&nbsp;<span class="ident" id="7998587">err</span>&nbsp;<span class="op" id="7998591">:=</span>&nbsp;<span class="ident" id="7998594">time</span><span class="op" id="7998598">.</span><span class="ident" id="7998599">Parse</span><span class="op" id="7998604">(</span><span class="string" id="7998605">&#34;01-02-06&nbsp;15:04:05&#34;</span><span class="op" id="7998624">,</span>&nbsp;<span class="ident" id="7998626">ft</span><span class="op" id="7998628">.</span><span class="ident" id="7998629">Mtime</span><span class="op" id="7998634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998638">if</span>&nbsp;<span class="ident" id="7998641">err</span>&nbsp;<span class="op" id="7998645">!=</span>&nbsp;<span class="ident" id="7998648">nil</span>&nbsp;<span class="op" id="7998652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998657">t</span><span class="op" id="7998658">.</span><span class="ident" id="7998659">Error</span><span class="op" id="7998664">(</span><span class="ident" id="7998665">err</span><span class="op" id="7998668">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998673">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998686">if</span>&nbsp;<span class="ident" id="7998689">ft</span>&nbsp;<span class="op" id="7998692">:=</span>&nbsp;<span class="ident" id="7998695">f</span><span class="op" id="7998696">.</span><span class="ident" id="7998697">ModTime</span><span class="op" id="7998704">(</span><span class="op" id="7998705">)</span><span class="op" id="7998706">;</span>&nbsp;<span class="op" id="7998708">!</span><span class="ident" id="7998709">ft</span><span class="op" id="7998711">.</span><span class="ident" id="7998712">Equal</span><span class="op" id="7998717">(</span><span class="ident" id="7998718">mtime</span><span class="op" id="7998723">)</span>&nbsp;<span class="op" id="7998725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998730">t</span><span class="op" id="7998731">.</span><span class="ident" id="7998732">Errorf</span><span class="op" id="7998738">(</span><span class="string" id="7998739">&#34;%s:&nbsp;%s:&nbsp;mtime=%s,&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7998766">,</span>&nbsp;<span class="ident" id="7998768">zt</span><span class="op" id="7998770">.</span><span class="ident" id="7998771">Name</span><span class="op" id="7998775">,</span>&nbsp;<span class="ident" id="7998777">f</span><span class="op" id="7998778">.</span><span class="ident" id="7998779">Name</span><span class="op" id="7998783">,</span>&nbsp;<span class="ident" id="7998785">ft</span><span class="op" id="7998787">,</span>&nbsp;<span class="ident" id="7998789">mtime</span><span class="op" id="7998794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998798">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998805">testFileMode</span><span class="op" id="7998817">(</span><span class="ident" id="7998818">t</span><span class="op" id="7998819">,</span>&nbsp;<span class="ident" id="7998821">zt</span><span class="op" id="7998823">.</span><span class="ident" id="7998824">Name</span><span class="op" id="7998828">,</span>&nbsp;<span class="ident" id="7998830">f</span><span class="op" id="7998831">,</span>&nbsp;<span class="ident" id="7998833">ft</span><span class="op" id="7998835">.</span><span class="ident" id="7998836">Mode</span><span class="op" id="7998840">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998844">var</span>&nbsp;<span class="ident" id="7998848">b</span>&nbsp;<span class="ident" id="7998850">bytes</span><span class="op" id="7998855">.</span><span class="ident" id="7998856">Buffer</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998864">r</span><span class="op" id="7998865">,</span>&nbsp;<span class="ident" id="7998867">err</span>&nbsp;<span class="op" id="7998871">:=</span>&nbsp;<span class="ident" id="7998874">f</span><span class="op" id="7998875">.</span><span class="ident" id="7998876">Open</span><span class="op" id="7998880">(</span><span class="op" id="7998881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998884">if</span>&nbsp;<span class="ident" id="7998887">err</span>&nbsp;<span class="op" id="7998891">!=</span>&nbsp;<span class="ident" id="7998894">nil</span>&nbsp;<span class="op" id="7998898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998902">t</span><span class="op" id="7998903">.</span><span class="ident" id="7998904">Errorf</span><span class="op" id="7998910">(</span><span class="string" id="7998911">&#34;%s:&nbsp;%v&#34;</span><span class="op" id="7998919">,</span>&nbsp;<span class="ident" id="7998921">zt</span><span class="op" id="7998923">.</span><span class="ident" id="7998924">Name</span><span class="op" id="7998928">,</span>&nbsp;<span class="ident" id="7998930">err</span><span class="op" id="7998933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998937">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998945">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998949">_</span><span class="op" id="7998950">,</span>&nbsp;<span class="ident" id="7998952">err</span>&nbsp;<span class="op" id="7998956">=</span>&nbsp;<span class="ident" id="7998958">io</span><span class="op" id="7998960">.</span><span class="ident" id="7998961">Copy</span><span class="op" id="7998965">(</span><span class="op" id="7998966">&amp;</span><span class="ident" id="7998967">b</span><span class="op" id="7998968">,</span>&nbsp;<span class="ident" id="7998970">r</span><span class="op" id="7998971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998974">if</span>&nbsp;<span class="ident" id="7998977">err</span>&nbsp;<span class="op" id="7998981">!=</span>&nbsp;<span class="ident" id="7998984">ft</span><span class="op" id="7998986">.</span><span class="ident" id="7998987">ContentErr</span>&nbsp;<span class="op" id="7998998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999002">t</span><span class="op" id="7999003">.</span><span class="ident" id="7999004">Errorf</span><span class="op" id="7999010">(</span><span class="string" id="7999011">&#34;%s:&nbsp;copying&nbsp;contents:&nbsp;%v&nbsp;(want&nbsp;%v)&#34;</span><span class="op" id="7999047">,</span>&nbsp;<span class="ident" id="7999049">zt</span><span class="op" id="7999051">.</span><span class="ident" id="7999052">Name</span><span class="op" id="7999056">,</span>&nbsp;<span class="ident" id="7999058">err</span><span class="op" id="7999061">,</span>&nbsp;<span class="ident" id="7999063">ft</span><span class="op" id="7999065">.</span><span class="ident" id="7999066">ContentErr</span><span class="op" id="7999076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999079">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7999082">if</span>&nbsp;<span class="ident" id="7999085">err</span>&nbsp;<span class="op" id="7999089">!=</span>&nbsp;<span class="ident" id="7999092">nil</span>&nbsp;<span class="op" id="7999096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7999100">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999111">r</span><span class="op" id="7999112">.</span><span class="ident" id="7999113">Close</span><span class="op" id="7999118">(</span><span class="op" id="7999119">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999123">size</span>&nbsp;<span class="op" id="7999128">:=</span>&nbsp;<span class="ident" id="7999131">uint64</span><span class="op" id="7999137">(</span><span class="ident" id="7999138">f</span><span class="op" id="7999139">.</span><span class="ident" id="7999140">UncompressedSize</span><span class="op" id="7999156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7999159">if</span>&nbsp;<span class="ident" id="7999162">size</span>&nbsp;<span class="op" id="7999167">==</span>&nbsp;<span class="ident" id="7999170">uint32max</span>&nbsp;<span class="op" id="7999180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999184">size</span>&nbsp;<span class="op" id="7999189">=</span>&nbsp;<span class="ident" id="7999191">f</span><span class="op" id="7999192">.</span><span class="ident" id="7999193">UncompressedSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7999216">if</span>&nbsp;<span class="ident" id="7999219">g</span>&nbsp;<span class="op" id="7999221">:=</span>&nbsp;<span class="ident" id="7999224">uint64</span><span class="op" id="7999230">(</span><span class="ident" id="7999231">b</span><span class="op" id="7999232">.</span><span class="ident" id="7999233">Len</span><span class="op" id="7999236">(</span><span class="op" id="7999237">)</span><span class="op" id="7999238">)</span><span class="op" id="7999239">;</span>&nbsp;<span class="ident" id="7999241">g</span>&nbsp;<span class="op" id="7999243">!=</span>&nbsp;<span class="ident" id="7999246">size</span>&nbsp;<span class="op" id="7999251">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999255">t</span><span class="op" id="7999256">.</span><span class="ident" id="7999257">Errorf</span><span class="op" id="7999263">(</span><span class="string" id="7999264">&#34;%v:&nbsp;read&nbsp;%v&nbsp;bytes&nbsp;but&nbsp;f.UncompressedSize&nbsp;==&nbsp;%v&#34;</span><span class="op" id="7999312">,</span>&nbsp;<span class="ident" id="7999314">f</span><span class="op" id="7999315">.</span><span class="ident" id="7999316">Name</span><span class="op" id="7999320">,</span>&nbsp;<span class="ident" id="7999322">g</span><span class="op" id="7999323">,</span>&nbsp;<span class="ident" id="7999325">size</span><span class="op" id="7999329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7999336">var</span>&nbsp;<span class="ident" id="7999340">c</span>&nbsp;<span class="op" id="7999342">[</span><span class="op" id="7999343">]</span><span class="builtintype" id="7999344">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7999350">if</span>&nbsp;<span class="ident" id="7999353">ft</span><span class="op" id="7999355">.</span><span class="ident" id="7999356">Content</span>&nbsp;<span class="op" id="7999364">!=</span>&nbsp;<span class="ident" id="7999367">nil</span>&nbsp;<span class="op" id="7999371">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999375">c</span>&nbsp;<span class="op" id="7999377">=</span>&nbsp;<span class="ident" id="7999379">ft</span><span class="op" id="7999381">.</span><span class="ident" id="7999382">Content</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999391">}</span>&nbsp;<span class="keyword" id="7999393">else</span>&nbsp;<span class="keyword" id="7999398">if</span>&nbsp;<span class="ident" id="7999401">c</span><span class="op" id="7999402">,</span>&nbsp;<span class="ident" id="7999404">err</span>&nbsp;<span class="op" id="7999408">=</span>&nbsp;<span class="ident" id="7999410">ioutil</span><span class="op" id="7999416">.</span><span class="ident" id="7999417">ReadFile</span><span class="op" id="7999425">(</span><span class="string" id="7999426">&#34;testdata/&#34;</span>&nbsp;<span class="op" id="7999438">+</span>&nbsp;<span class="ident" id="7999440">ft</span><span class="op" id="7999442">.</span><span class="ident" id="7999443">File</span><span class="op" id="7999447">)</span><span class="op" id="7999448">;</span>&nbsp;<span class="ident" id="7999450">err</span>&nbsp;<span class="op" id="7999454">!=</span>&nbsp;<span class="ident" id="7999457">nil</span>&nbsp;<span class="op" id="7999461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999465">t</span><span class="op" id="7999466">.</span><span class="ident" id="7999467">Error</span><span class="op" id="7999472">(</span><span class="ident" id="7999473">err</span><span class="op" id="7999476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7999480">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999488">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7999492">if</span>&nbsp;<span class="ident" id="7999495">b</span><span class="op" id="7999496">.</span><span class="ident" id="7999497">Len</span><span class="op" id="7999500">(</span><span class="op" id="7999501">)</span>&nbsp;<span class="op" id="7999503">!=</span>&nbsp;<span class="builtinfunc" id="7999506">len</span><span class="op" id="7999509">(</span><span class="ident" id="7999510">c</span><span class="op" id="7999511">)</span>&nbsp;<span class="op" id="7999513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999517">t</span><span class="op" id="7999518">.</span><span class="ident" id="7999519">Errorf</span><span class="op" id="7999525">(</span><span class="string" id="7999526">&#34;%s:&nbsp;len=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7999547">,</span>&nbsp;<span class="ident" id="7999549">f</span><span class="op" id="7999550">.</span><span class="ident" id="7999551">Name</span><span class="op" id="7999555">,</span>&nbsp;<span class="ident" id="7999557">b</span><span class="op" id="7999558">.</span><span class="ident" id="7999559">Len</span><span class="op" id="7999562">(</span><span class="op" id="7999563">)</span><span class="op" id="7999564">,</span>&nbsp;<span class="builtinfunc" id="7999566">len</span><span class="op" id="7999569">(</span><span class="ident" id="7999570">c</span><span class="op" id="7999571">)</span><span class="op" id="7999572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7999576">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999584">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7999588">for</span>&nbsp;<span class="ident" id="7999592">i</span><span class="op" id="7999593">,</span>&nbsp;<span class="ident" id="7999595">b</span>&nbsp;<span class="op" id="7999597">:=</span>&nbsp;<span class="keyword" id="7999600">range</span>&nbsp;<span class="ident" id="7999606">b</span><span class="op" id="7999607">.</span><span class="ident" id="7999608">Bytes</span><span class="op" id="7999613">(</span><span class="op" id="7999614">)</span>&nbsp;<span class="op" id="7999616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7999620">if</span>&nbsp;<span class="ident" id="7999623">b</span>&nbsp;<span class="op" id="7999625">!=</span>&nbsp;<span class="ident" id="7999628">c</span><span class="op" id="7999629">[</span><span class="ident" id="7999630">i</span><span class="op" id="7999631">]</span>&nbsp;<span class="op" id="7999633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999638">t</span><span class="op" id="7999639">.</span><span class="ident" id="7999640">Errorf</span><span class="op" id="7999646">(</span><span class="string" id="7999647">&#34;%s:&nbsp;content[%d]=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7999675">,</span>&nbsp;<span class="ident" id="7999677">f</span><span class="op" id="7999678">.</span><span class="ident" id="7999679">Name</span><span class="op" id="7999683">,</span>&nbsp;<span class="ident" id="7999685">i</span><span class="op" id="7999686">,</span>&nbsp;<span class="ident" id="7999688">b</span><span class="op" id="7999689">,</span>&nbsp;<span class="ident" id="7999691">c</span><span class="op" id="7999692">[</span><span class="ident" id="7999693">i</span><span class="op" id="7999694">]</span><span class="op" id="7999695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7999700">return</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999712">}</span><br>
<span class="lineno"></span><span class="op" id="7999714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7999717">func</span>&nbsp;<span class="ident" id="7999722">testFileMode</span><span class="op" id="7999734">(</span><span class="ident" id="7999735">t</span>&nbsp;<span class="op" id="7999737">*</span><span class="ident" id="7999738">testing</span><span class="op" id="7999745">.</span><span class="ident" id="7999746">T</span><span class="op" id="7999747">,</span>&nbsp;<span class="ident" id="7999749">zipName</span>&nbsp;<span class="builtintype" id="7999757">string</span><span class="op" id="7999763">,</span>&nbsp;<span class="ident" id="7999765">f</span>&nbsp;<span class="op" id="7999767">*</span><span class="ident" id="7999768">File</span><span class="op" id="7999772">,</span>&nbsp;<span class="ident" id="7999774">want</span>&nbsp;<span class="ident" id="7999779">os</span><span class="op" id="7999781">.</span><span class="ident" id="7999782">FileMode</span><span class="op" id="7999790">)</span>&nbsp;<span class="op" id="7999792">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999795">mode</span>&nbsp;<span class="op" id="7999800">:=</span>&nbsp;<span class="ident" id="7999803">f</span><span class="op" id="7999804">.</span><span class="ident" id="7999805">Mode</span><span class="op" id="7999809">(</span><span class="op" id="7999810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7999813">if</span>&nbsp;<span class="ident" id="7999816">want</span>&nbsp;<span class="op" id="7999821">==</span>&nbsp;<span class="num" id="7999824">0</span>&nbsp;<span class="op" id="7999826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999830">t</span><span class="op" id="7999831">.</span><span class="ident" id="7999832">Errorf</span><span class="op" id="7999838">(</span><span class="string" id="7999839">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;none&#34;</span><span class="op" id="7999871">,</span>&nbsp;<span class="ident" id="7999873">zipName</span><span class="op" id="7999880">,</span>&nbsp;<span class="ident" id="7999882">f</span><span class="op" id="7999883">.</span><span class="ident" id="7999884">Name</span><span class="op" id="7999888">,</span>&nbsp;<span class="ident" id="7999890">mode</span><span class="op" id="7999894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999897">}</span>&nbsp;<span class="keyword" id="7999899">else</span>&nbsp;<span class="keyword" id="7999904">if</span>&nbsp;<span class="ident" id="7999907">mode</span>&nbsp;<span class="op" id="7999912">!=</span>&nbsp;<span class="ident" id="7999915">want</span>&nbsp;<span class="op" id="7999920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999924">t</span><span class="op" id="7999925">.</span><span class="ident" id="7999926">Errorf</span><span class="op" id="7999932">(</span><span class="string" id="7999933">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;want&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7999963">,</span>&nbsp;<span class="ident" id="7999965">zipName</span><span class="op" id="7999972">,</span>&nbsp;<span class="ident" id="7999974">f</span><span class="op" id="7999975">.</span><span class="ident" id="7999976">Name</span><span class="op" id="7999980">,</span>&nbsp;<span class="ident" id="7999982">want</span><span class="op" id="7999986">,</span>&nbsp;<span class="ident" id="7999988">mode</span><span class="op" id="7999992">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999995">}</span><br>
<span class="lineno"></span><span class="op" id="7999997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8000000">func</span>&nbsp;<span class="ident" id="8000005">TestInvalidFiles</span><span class="op" id="8000021">(</span><span class="ident" id="8000022">t</span>&nbsp;<span class="op" id="8000024">*</span><span class="ident" id="8000025">testing</span><span class="op" id="8000032">.</span><span class="ident" id="8000033">T</span><span class="op" id="8000034">)</span>&nbsp;<span class="op" id="8000036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8000039">const</span>&nbsp;<span class="ident" id="8000045">size</span>&nbsp;<span class="op" id="8000050">=</span>&nbsp;<span class="num" id="8000052">1024</span>&nbsp;<span class="op" id="8000057">*</span>&nbsp;<span class="num" id="8000059">70</span>&nbsp;<span class="comment" id="8000062">//&nbsp;70kb</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000071">b</span>&nbsp;<span class="op" id="8000073">:=</span>&nbsp;<span class="builtinfunc" id="8000076">make</span><span class="op" id="8000080">(</span><span class="op" id="8000081">[</span><span class="op" id="8000082">]</span><span class="builtintype" id="8000083">byte</span><span class="op" id="8000087">,</span>&nbsp;<span class="ident" id="8000089">size</span><span class="op" id="8000093">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8000097">//&nbsp;zeroes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000108">_</span><span class="op" id="8000109">,</span>&nbsp;<span class="ident" id="8000111">err</span>&nbsp;<span class="op" id="8000115">:=</span>&nbsp;<span class="ident" id="8000118">NewReader</span><span class="op" id="8000127">(</span><span class="ident" id="8000128">bytes</span><span class="op" id="8000133">.</span><span class="ident" id="8000134">NewReader</span><span class="op" id="8000143">(</span><span class="ident" id="8000144">b</span><span class="op" id="8000145">)</span><span class="op" id="8000146">,</span>&nbsp;<span class="ident" id="8000148">size</span><span class="op" id="8000152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8000155">if</span>&nbsp;<span class="ident" id="8000158">err</span>&nbsp;<span class="op" id="8000162">!=</span>&nbsp;<span class="ident" id="8000165">ErrFormat</span>&nbsp;<span class="op" id="8000175">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000179">t</span><span class="op" id="8000180">.</span><span class="ident" id="8000181">Errorf</span><span class="op" id="8000187">(</span><span class="string" id="8000188">&#34;zeroes:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8000215">,</span>&nbsp;<span class="ident" id="8000217">err</span><span class="op" id="8000220">,</span>&nbsp;<span class="ident" id="8000222">ErrFormat</span><span class="op" id="8000231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8000238">//&nbsp;repeated&nbsp;directoryEndSignatures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000274">sig</span>&nbsp;<span class="op" id="8000278">:=</span>&nbsp;<span class="builtinfunc" id="8000281">make</span><span class="op" id="8000285">(</span><span class="op" id="8000286">[</span><span class="op" id="8000287">]</span><span class="builtintype" id="8000288">byte</span><span class="op" id="8000292">,</span>&nbsp;<span class="num" id="8000294">4</span><span class="op" id="8000295">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000298">binary</span><span class="op" id="8000304">.</span><span class="ident" id="8000305">LittleEndian</span><span class="op" id="8000317">.</span><span class="ident" id="8000318">PutUint32</span><span class="op" id="8000327">(</span><span class="ident" id="8000328">sig</span><span class="op" id="8000331">,</span>&nbsp;<span class="ident" id="8000333">directoryEndSignature</span><span class="op" id="8000354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8000357">for</span>&nbsp;<span class="ident" id="8000361">i</span>&nbsp;<span class="op" id="8000363">:=</span>&nbsp;<span class="num" id="8000366">0</span><span class="op" id="8000367">;</span>&nbsp;<span class="ident" id="8000369">i</span>&nbsp;<span class="op" id="8000371">&lt;</span>&nbsp;<span class="ident" id="8000373">size</span><span class="op" id="8000377">-</span><span class="num" id="8000378">4</span><span class="op" id="8000379">;</span>&nbsp;<span class="ident" id="8000381">i</span>&nbsp;<span class="op" id="8000383">+=</span>&nbsp;<span class="num" id="8000386">4</span>&nbsp;<span class="op" id="8000388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8000392">copy</span><span class="op" id="8000396">(</span><span class="ident" id="8000397">b</span><span class="op" id="8000398">[</span><span class="ident" id="8000399">i</span><span class="op" id="8000400">:</span><span class="ident" id="8000401">i</span><span class="op" id="8000402">+</span><span class="num" id="8000403">4</span><span class="op" id="8000404">]</span><span class="op" id="8000405">,</span>&nbsp;<span class="ident" id="8000407">sig</span><span class="op" id="8000410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000416">_</span><span class="op" id="8000417">,</span>&nbsp;<span class="ident" id="8000419">err</span>&nbsp;<span class="op" id="8000423">=</span>&nbsp;<span class="ident" id="8000425">NewReader</span><span class="op" id="8000434">(</span><span class="ident" id="8000435">bytes</span><span class="op" id="8000440">.</span><span class="ident" id="8000441">NewReader</span><span class="op" id="8000450">(</span><span class="ident" id="8000451">b</span><span class="op" id="8000452">)</span><span class="op" id="8000453">,</span>&nbsp;<span class="ident" id="8000455">size</span><span class="op" id="8000459">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8000462">if</span>&nbsp;<span class="ident" id="8000465">err</span>&nbsp;<span class="op" id="8000469">!=</span>&nbsp;<span class="ident" id="8000472">ErrFormat</span>&nbsp;<span class="op" id="8000482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000486">t</span><span class="op" id="8000487">.</span><span class="ident" id="8000488">Errorf</span><span class="op" id="8000494">(</span><span class="string" id="8000495">&#34;sigs:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8000520">,</span>&nbsp;<span class="ident" id="8000522">err</span><span class="op" id="8000525">,</span>&nbsp;<span class="ident" id="8000527">ErrFormat</span><span class="op" id="8000536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000539">}</span><br>
<span class="lineno"></span><span class="op" id="8000541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span><span class="keyword" id="8000544">func</span>&nbsp;<span class="ident" id="8000549">messWith</span><span class="op" id="8000557">(</span><span class="ident" id="8000558">fileName</span>&nbsp;<span class="builtintype" id="8000567">string</span><span class="op" id="8000573">,</span>&nbsp;<span class="ident" id="8000575">corrupter</span>&nbsp;<span class="keyword" id="8000585">func</span><span class="op" id="8000589">(</span><span class="ident" id="8000590">b</span>&nbsp;<span class="op" id="8000592">[</span><span class="op" id="8000593">]</span><span class="builtintype" id="8000594">byte</span><span class="op" id="8000598">)</span><span class="op" id="8000599">)</span>&nbsp;<span class="op" id="8000601">(</span><span class="ident" id="8000602">r</span>&nbsp;<span class="ident" id="8000604">io</span><span class="op" id="8000606">.</span><span class="ident" id="8000607">ReaderAt</span><span class="op" id="8000615">,</span>&nbsp;<span class="ident" id="8000617">size</span>&nbsp;<span class="ident" id="8000622">int64</span><span class="op" id="8000627">)</span>&nbsp;<span class="op" id="8000629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000632">data</span><span class="op" id="8000636">,</span>&nbsp;<span class="ident" id="8000638">err</span>&nbsp;<span class="op" id="8000642">:=</span>&nbsp;<span class="ident" id="8000645">ioutil</span><span class="op" id="8000651">.</span><span class="ident" id="8000652">ReadFile</span><span class="op" id="8000660">(</span><span class="ident" id="8000661">filepath</span><span class="op" id="8000669">.</span><span class="ident" id="8000670">Join</span><span class="op" id="8000674">(</span><span class="string" id="8000675">&#34;testdata&#34;</span><span class="op" id="8000685">,</span>&nbsp;<span class="ident" id="8000687">fileName</span><span class="op" id="8000695">)</span><span class="op" id="8000696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8000699">if</span>&nbsp;<span class="ident" id="8000702">err</span>&nbsp;<span class="op" id="8000706">!=</span>&nbsp;<span class="ident" id="8000709">nil</span>&nbsp;<span class="op" id="8000713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8000717">panic</span><span class="op" id="8000722">(</span><span class="string" id="8000723">&#34;Error&nbsp;reading&nbsp;&#34;</span>&nbsp;<span class="op" id="8000740">+</span>&nbsp;<span class="ident" id="8000742">fileName</span>&nbsp;<span class="op" id="8000751">+</span>&nbsp;<span class="string" id="8000753">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="8000758">+</span>&nbsp;<span class="ident" id="8000760">err</span><span class="op" id="8000763">.</span><span class="ident" id="8000764">Error</span><span class="op" id="8000769">(</span><span class="op" id="8000770">)</span><span class="op" id="8000771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000774">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000777">corrupter</span><span class="op" id="8000786">(</span><span class="ident" id="8000787">data</span><span class="op" id="8000791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8000794">return</span>&nbsp;<span class="ident" id="8000801">bytes</span><span class="op" id="8000806">.</span><span class="ident" id="8000807">NewReader</span><span class="op" id="8000816">(</span><span class="ident" id="8000817">data</span><span class="op" id="8000821">)</span><span class="op" id="8000822">,</span>&nbsp;<span class="ident" id="8000824">int64</span><span class="op" id="8000829">(</span><span class="builtinfunc" id="8000830">len</span><span class="op" id="8000833">(</span><span class="ident" id="8000834">data</span><span class="op" id="8000838">)</span><span class="op" id="8000839">)</span><br>
<span class="lineno"></span><span class="op" id="8000841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8000844">func</span>&nbsp;<span class="ident" id="8000849">returnCorruptCRC32Zip</span><span class="op" id="8000870">(</span><span class="op" id="8000871">)</span>&nbsp;<span class="op" id="8000873">(</span><span class="ident" id="8000874">r</span>&nbsp;<span class="ident" id="8000876">io</span><span class="op" id="8000878">.</span><span class="ident" id="8000879">ReaderAt</span><span class="op" id="8000887">,</span>&nbsp;<span class="ident" id="8000889">size</span>&nbsp;<span class="ident" id="8000894">int64</span><span class="op" id="8000899">)</span>&nbsp;<span class="op" id="8000901">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8000904">return</span>&nbsp;<span class="ident" id="8000911">messWith</span><span class="op" id="8000919">(</span><span class="string" id="8000920">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="8000946">,</span>&nbsp;<span class="keyword" id="8000948">func</span><span class="op" id="8000952">(</span><span class="ident" id="8000953">b</span>&nbsp;<span class="op" id="8000955">[</span><span class="op" id="8000956">]</span><span class="builtintype" id="8000957">byte</span><span class="op" id="8000961">)</span>&nbsp;<span class="op" id="8000963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8000967">//&nbsp;Corrupt&nbsp;one&nbsp;of&nbsp;the&nbsp;CRC32s&nbsp;in&nbsp;the&nbsp;data&nbsp;descriptor:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001022">b</span><span class="op" id="8001023">[</span><span class="num" id="8001024">0x2d</span><span class="op" id="8001028">]</span><span class="op" id="8001029">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001033">}</span><span class="op" id="8001034">)</span><br>
<span class="lineno"></span><span class="op" id="8001036">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="8001039">func</span>&nbsp;<span class="ident" id="8001044">returnCorruptNotStreamedZip</span><span class="op" id="8001071">(</span><span class="op" id="8001072">)</span>&nbsp;<span class="op" id="8001074">(</span><span class="ident" id="8001075">r</span>&nbsp;<span class="ident" id="8001077">io</span><span class="op" id="8001079">.</span><span class="ident" id="8001080">ReaderAt</span><span class="op" id="8001088">,</span>&nbsp;<span class="ident" id="8001090">size</span>&nbsp;<span class="ident" id="8001095">int64</span><span class="op" id="8001100">)</span>&nbsp;<span class="op" id="8001102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001105">return</span>&nbsp;<span class="ident" id="8001112">messWith</span><span class="op" id="8001120">(</span><span class="string" id="8001121">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="8001145">,</span>&nbsp;<span class="keyword" id="8001147">func</span><span class="op" id="8001151">(</span><span class="ident" id="8001152">b</span>&nbsp;<span class="op" id="8001154">[</span><span class="op" id="8001155">]</span><span class="builtintype" id="8001156">byte</span><span class="op" id="8001160">)</span>&nbsp;<span class="op" id="8001162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8001166">//&nbsp;Corrupt&nbsp;foo.txt&#39;s&nbsp;final&nbsp;crc32&nbsp;byte,&nbsp;in&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8001215">//&nbsp;the&nbsp;file&nbsp;header&nbsp;and&nbsp;TOC.&nbsp;(0x7e&nbsp;-&gt;&nbsp;0x7f)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001260">b</span><span class="op" id="8001261">[</span><span class="num" id="8001262">0x11</span><span class="op" id="8001266">]</span><span class="op" id="8001267">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001272">b</span><span class="op" id="8001273">[</span><span class="num" id="8001274">0x9d</span><span class="op" id="8001278">]</span><span class="op" id="8001279">++</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8001285">//&nbsp;TODO(bradfitz):&nbsp;add&nbsp;a&nbsp;new&nbsp;test&nbsp;that&nbsp;only&nbsp;corrupts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8001340">//&nbsp;one&nbsp;of&nbsp;these&nbsp;values,&nbsp;and&nbsp;verify&nbsp;that&nbsp;that&#39;s&nbsp;also&nbsp;an</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8001397">//&nbsp;error.&nbsp;Currently,&nbsp;the&nbsp;reader&nbsp;code&nbsp;doesn&#39;t&nbsp;verify&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8001455">//&nbsp;fileheader&nbsp;and&nbsp;TOC&#39;s&nbsp;crc32&nbsp;match&nbsp;if&nbsp;they&#39;re&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8001509">//&nbsp;non-zero&nbsp;and&nbsp;only&nbsp;the&nbsp;second&nbsp;line&nbsp;above,&nbsp;the&nbsp;TOC,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8001564">//&nbsp;is&nbsp;what&nbsp;matters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001585">}</span><span class="op" id="8001586">)</span><br>
<span class="lineno">465</span><span class="op" id="8001588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8001591">//&nbsp;rZipBytes&nbsp;returns&nbsp;the&nbsp;bytes&nbsp;of&nbsp;a&nbsp;recursive&nbsp;zip&nbsp;file,&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="8001655">//&nbsp;putting&nbsp;it&nbsp;on&nbsp;disk&nbsp;and&nbsp;triggering&nbsp;certain&nbsp;virus&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="keyword" id="8001716">func</span>&nbsp;<span class="ident" id="8001721">rZipBytes</span><span class="op" id="8001730">(</span><span class="op" id="8001731">)</span>&nbsp;<span class="op" id="8001733">[</span><span class="op" id="8001734">]</span><span class="builtintype" id="8001735">byte</span>&nbsp;<span class="op" id="8001740">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001743">s</span>&nbsp;<span class="op" id="8001745">:=</span>&nbsp;<span class="string" id="8001748">`<br>
<span class="lineno"></span>0000000&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4<br>
<span class="lineno"></span>0000010&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f<br>
<span class="lineno"></span>0000020&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00<br>
<span class="lineno"></span>0000030&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00<br>
<span class="lineno">475</span>0000040&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00<br>
<span class="lineno"></span>0000050&nbsp;2f&nbsp;00&nbsp;d0&nbsp;ff&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000060&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8<br>
<span class="lineno"></span>0000070&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;2f<br>
<span class="lineno"></span>0000080&nbsp;00&nbsp;d0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e<br>
<span class="lineno">480</span>0000090&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;14&nbsp;00&nbsp;eb<br>
<span class="lineno"></span>00000a0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff<br>
<span class="lineno"></span>00000b0&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42<br>
<span class="lineno"></span>00000c0&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14<br>
<span class="lineno"></span>00000d0&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21<br>
<span class="lineno">485</span>00000e0&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;34&nbsp;00&nbsp;cb<br>
<span class="lineno"></span>00000f0&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff<br>
<span class="lineno"></span>0000100&nbsp;00&nbsp;34&nbsp;00&nbsp;cb&nbsp;ff&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a<br>
<span class="lineno"></span>0000110&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3<br>
<span class="lineno"></span>0000120&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06&nbsp;06&nbsp;40&nbsp;00&nbsp;06<br>
<span class="lineno">490</span>0000130&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000140&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf<br>
<span class="lineno"></span>0000150&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06<br>
<span class="lineno"></span>0000160&nbsp;06&nbsp;40&nbsp;00&nbsp;06&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;50&nbsp;4b&nbsp;01<br>
<span class="lineno"></span>0000170&nbsp;02&nbsp;14&nbsp;00&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89<br>
<span class="lineno">495</span>0000180&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000190&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a<br>
<span class="lineno"></span>00001a0&nbsp;69&nbsp;70&nbsp;50&nbsp;4b&nbsp;05&nbsp;06&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;01&nbsp;00&nbsp;01&nbsp;00&nbsp;35&nbsp;00<br>
<span class="lineno"></span>00001b0&nbsp;00&nbsp;00&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003296">s</span>&nbsp;<span class="op" id="8003298">=</span>&nbsp;<span class="ident" id="8003300">regexp</span><span class="op" id="8003306">.</span><span class="ident" id="8003307">MustCompile</span><span class="op" id="8003318">(</span><span class="string" id="8003319">`[0-9a-f]{7}`</span><span class="op" id="8003332">)</span><span class="op" id="8003333">.</span><span class="ident" id="8003334">ReplaceAllString</span><span class="op" id="8003350">(</span><span class="ident" id="8003351">s</span><span class="op" id="8003352">,</span>&nbsp;<span class="string" id="8003354">&#34;&#34;</span><span class="op" id="8003356">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003359">s</span>&nbsp;<span class="op" id="8003361">=</span>&nbsp;<span class="ident" id="8003363">regexp</span><span class="op" id="8003369">.</span><span class="ident" id="8003370">MustCompile</span><span class="op" id="8003381">(</span><span class="string" id="8003382">`\s+`</span><span class="op" id="8003387">)</span><span class="op" id="8003388">.</span><span class="ident" id="8003389">ReplaceAllString</span><span class="op" id="8003405">(</span><span class="ident" id="8003406">s</span><span class="op" id="8003407">,</span>&nbsp;<span class="string" id="8003409">&#34;&#34;</span><span class="op" id="8003411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003414">b</span><span class="op" id="8003415">,</span>&nbsp;<span class="ident" id="8003417">err</span>&nbsp;<span class="op" id="8003421">:=</span>&nbsp;<span class="ident" id="8003424">hex</span><span class="op" id="8003427">.</span><span class="ident" id="8003428">DecodeString</span><span class="op" id="8003440">(</span><span class="ident" id="8003441">s</span><span class="op" id="8003442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8003445">if</span>&nbsp;<span class="ident" id="8003448">err</span>&nbsp;<span class="op" id="8003452">!=</span>&nbsp;<span class="ident" id="8003455">nil</span>&nbsp;<span class="op" id="8003459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8003463">panic</span><span class="op" id="8003468">(</span><span class="ident" id="8003469">err</span><span class="op" id="8003472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003475">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8003478">return</span>&nbsp;<span class="ident" id="8003485">b</span><br>
<span class="lineno"></span><span class="op" id="8003487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8003490">func</span>&nbsp;<span class="ident" id="8003495">returnRecursiveZip</span><span class="op" id="8003513">(</span><span class="op" id="8003514">)</span>&nbsp;<span class="op" id="8003516">(</span><span class="ident" id="8003517">r</span>&nbsp;<span class="ident" id="8003519">io</span><span class="op" id="8003521">.</span><span class="ident" id="8003522">ReaderAt</span><span class="op" id="8003530">,</span>&nbsp;<span class="ident" id="8003532">size</span>&nbsp;<span class="ident" id="8003537">int64</span><span class="op" id="8003542">)</span>&nbsp;<span class="op" id="8003544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003547">b</span>&nbsp;<span class="op" id="8003549">:=</span>&nbsp;<span class="ident" id="8003552">rZipBytes</span><span class="op" id="8003561">(</span><span class="op" id="8003562">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8003565">return</span>&nbsp;<span class="ident" id="8003572">bytes</span><span class="op" id="8003577">.</span><span class="ident" id="8003578">NewReader</span><span class="op" id="8003587">(</span><span class="ident" id="8003588">b</span><span class="op" id="8003589">)</span><span class="op" id="8003590">,</span>&nbsp;<span class="ident" id="8003592">int64</span><span class="op" id="8003597">(</span><span class="builtinfunc" id="8003598">len</span><span class="op" id="8003601">(</span><span class="ident" id="8003602">b</span><span class="op" id="8003603">)</span><span class="op" id="8003604">)</span><br>
<span class="lineno"></span><span class="op" id="8003606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8003609">func</span>&nbsp;<span class="ident" id="8003614">TestIssue8186</span><span class="op" id="8003627">(</span><span class="ident" id="8003628">t</span>&nbsp;<span class="op" id="8003630">*</span><span class="ident" id="8003631">testing</span><span class="op" id="8003638">.</span><span class="ident" id="8003639">T</span><span class="op" id="8003640">)</span>&nbsp;<span class="op" id="8003642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8003645">//&nbsp;Directory&nbsp;headers&nbsp;&amp;&nbsp;data&nbsp;found&nbsp;in&nbsp;the&nbsp;TOC&nbsp;of&nbsp;a&nbsp;JAR&nbsp;file.</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003706">dirEnts</span>&nbsp;<span class="op" id="8003714">:=</span>&nbsp;<span class="op" id="8003717">[</span><span class="op" id="8003718">]</span><span class="builtintype" id="8003719">string</span><span class="op" id="8003725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8003729">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\xaa\x1b\x06\xf0\x81\x02\x00\x00\x81\x02\x00\x00-\x00\x05\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00res/drawable-xhdpi-v4/ic_actionbar_accept.png\xfe\xca\x00\x00\x00&#34;</span><span class="op" id="8003956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8003960">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\x90K\x89\xc7t\n\x00\x00t\n\x00\x00\x0e\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xd1\x02\x00\x00resources.arsc\x00\x00\x00&#34;</span><span class="op" id="8004138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8004142">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xff$\x18\xed3\x03\x00\x00\xb4\b\x00\x00\x13\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00t\r\x00\x00AndroidManifest.xml&#34;</span><span class="op" id="8004313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8004317">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\x14\xc5K\xab\x192\x02\x00\xc8\xcd\x04\x00\v\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe8\x10\x00\x00classes.dex&#34;</span><span class="op" id="8004485">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8004489">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?E\x96\nD\xac\x01\x00\x00P\x03\x00\x00&amp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:C\x02\x00res/layout/actionbar_set_wallpaper.xml&#34;</span><span class="op" id="8004672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8004676">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?Ļ\x14\xe3\xd8\x01\x00\x00\xd8\x03\x00\x00&nbsp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:E\x02\x00res/layout/wallpaper_cropper.xml&#34;</span><span class="op" id="8004858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8004862">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?}\xc1\x15\x9eZ\x01\x00\x00!\x02\x00\x00\x14\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00`G\x02\x00META-INF/MANIFEST.MF&#34;</span><span class="op" id="8005032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8005036">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xe6\x98Ьo\x01\x00\x00\x84\x02\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfcH\x02\x00META-INF/CERT.SF&#34;</span><span class="op" id="8005205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8005209">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xbfP\x96b\x86\x04\x00\x00\xb2\x06\x00\x00\x11\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xa9J\x02\x00META-INF/CERT.RSA&#34;</span><span class="op" id="8005382">,</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005388">for</span>&nbsp;<span class="ident" id="8005392">i</span><span class="op" id="8005393">,</span>&nbsp;<span class="ident" id="8005395">s</span>&nbsp;<span class="op" id="8005397">:=</span>&nbsp;<span class="keyword" id="8005400">range</span>&nbsp;<span class="ident" id="8005406">dirEnts</span>&nbsp;<span class="op" id="8005414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005418">var</span>&nbsp;<span class="ident" id="8005422">f</span>&nbsp;<span class="ident" id="8005424">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005431">err</span>&nbsp;<span class="op" id="8005435">:=</span>&nbsp;<span class="ident" id="8005438">readDirectoryHeader</span><span class="op" id="8005457">(</span><span class="op" id="8005458">&amp;</span><span class="ident" id="8005459">f</span><span class="op" id="8005460">,</span>&nbsp;<span class="ident" id="8005462">strings</span><span class="op" id="8005469">.</span><span class="ident" id="8005470">NewReader</span><span class="op" id="8005479">(</span><span class="ident" id="8005480">s</span><span class="op" id="8005481">)</span><span class="op" id="8005482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005486">if</span>&nbsp;<span class="ident" id="8005489">err</span>&nbsp;<span class="op" id="8005493">!=</span>&nbsp;<span class="ident" id="8005496">nil</span>&nbsp;<span class="op" id="8005500">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005505">t</span><span class="op" id="8005506">.</span><span class="ident" id="8005507">Errorf</span><span class="op" id="8005513">(</span><span class="string" id="8005514">&#34;error&nbsp;reading&nbsp;#%d:&nbsp;%v&#34;</span><span class="op" id="8005537">,</span>&nbsp;<span class="ident" id="8005539">i</span><span class="op" id="8005540">,</span>&nbsp;<span class="ident" id="8005542">err</span><span class="op" id="8005545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005552">}</span><br>
<span class="lineno"></span><span class="op" id="8005554">}</span>
</div>
</body>
</html>
