<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/draw</h2>
<ul>
<li><a href="/gostd/image/draw/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/image/draw/clip_test.go.html">clip_test.go</a></li>
<li><a href="/gostd/image/draw/draw.go.html">draw.go</a></li>
<li><a href="/gostd/image/draw/draw_test.go.html">draw_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8173279">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8173334">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8173388">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8173439">package</span>&nbsp;<span class="ident" id="8173447">draw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8173453">import</span>&nbsp;<span class="op" id="8173460">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8173463">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8173472">&#34;image/color&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8173487">&#34;image/png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8173500">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8173506">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8173516">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8173519">func</span>&nbsp;<span class="ident" id="8173524">eq</span><span class="op" id="8173526">(</span><span class="ident" id="8173527">c0</span><span class="op" id="8173529">,</span>&nbsp;<span class="ident" id="8173531">c1</span>&nbsp;<span class="ident" id="8173534">color</span><span class="op" id="8173539">.</span><span class="ident" id="8173540">Color</span><span class="op" id="8173545">)</span>&nbsp;<span class="builtintype" id="8173547">bool</span>&nbsp;<span class="op" id="8173552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173555">r0</span><span class="op" id="8173557">,</span>&nbsp;<span class="ident" id="8173559">g0</span><span class="op" id="8173561">,</span>&nbsp;<span class="ident" id="8173563">b0</span><span class="op" id="8173565">,</span>&nbsp;<span class="ident" id="8173567">a0</span>&nbsp;<span class="op" id="8173570">:=</span>&nbsp;<span class="ident" id="8173573">c0</span><span class="op" id="8173575">.</span><span class="ident" id="8173576">RGBA</span><span class="op" id="8173580">(</span><span class="op" id="8173581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173584">r1</span><span class="op" id="8173586">,</span>&nbsp;<span class="ident" id="8173588">g1</span><span class="op" id="8173590">,</span>&nbsp;<span class="ident" id="8173592">b1</span><span class="op" id="8173594">,</span>&nbsp;<span class="ident" id="8173596">a1</span>&nbsp;<span class="op" id="8173599">:=</span>&nbsp;<span class="ident" id="8173602">c1</span><span class="op" id="8173604">.</span><span class="ident" id="8173605">RGBA</span><span class="op" id="8173609">(</span><span class="op" id="8173610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173613">return</span>&nbsp;<span class="ident" id="8173620">r0</span>&nbsp;<span class="op" id="8173623">==</span>&nbsp;<span class="ident" id="8173626">r1</span>&nbsp;<span class="op" id="8173629">&amp;&amp;</span>&nbsp;<span class="ident" id="8173632">g0</span>&nbsp;<span class="op" id="8173635">==</span>&nbsp;<span class="ident" id="8173638">g1</span>&nbsp;<span class="op" id="8173641">&amp;&amp;</span>&nbsp;<span class="ident" id="8173644">b0</span>&nbsp;<span class="op" id="8173647">==</span>&nbsp;<span class="ident" id="8173650">b1</span>&nbsp;<span class="op" id="8173653">&amp;&amp;</span>&nbsp;<span class="ident" id="8173656">a0</span>&nbsp;<span class="op" id="8173659">==</span>&nbsp;<span class="ident" id="8173662">a1</span><br>
<span class="lineno"></span><span class="op" id="8173665">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8173668">func</span>&nbsp;<span class="ident" id="8173673">fillBlue</span><span class="op" id="8173681">(</span><span class="ident" id="8173682">alpha</span>&nbsp;<span class="builtintype" id="8173688">int</span><span class="op" id="8173691">)</span>&nbsp;<span class="ident" id="8173693">image</span><span class="op" id="8173698">.</span><span class="ident" id="8173699">Image</span>&nbsp;<span class="op" id="8173705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173708">return</span>&nbsp;<span class="ident" id="8173715">image</span><span class="op" id="8173720">.</span><span class="ident" id="8173721">NewUniform</span><span class="op" id="8173731">(</span><span class="ident" id="8173732">color</span><span class="op" id="8173737">.</span><span class="ident" id="8173738">RGBA</span><span class="op" id="8173742">{</span><span class="num" id="8173743">0</span><span class="op" id="8173744">,</span>&nbsp;<span class="num" id="8173746">0</span><span class="op" id="8173747">,</span>&nbsp;<span class="builtintype" id="8173749">uint8</span><span class="op" id="8173754">(</span><span class="ident" id="8173755">alpha</span><span class="op" id="8173760">)</span><span class="op" id="8173761">,</span>&nbsp;<span class="builtintype" id="8173763">uint8</span><span class="op" id="8173768">(</span><span class="ident" id="8173769">alpha</span><span class="op" id="8173774">)</span><span class="op" id="8173775">}</span><span class="op" id="8173776">)</span><br>
<span class="lineno"></span><span class="op" id="8173778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="8173781">func</span>&nbsp;<span class="ident" id="8173786">fillAlpha</span><span class="op" id="8173795">(</span><span class="ident" id="8173796">alpha</span>&nbsp;<span class="builtintype" id="8173802">int</span><span class="op" id="8173805">)</span>&nbsp;<span class="ident" id="8173807">image</span><span class="op" id="8173812">.</span><span class="ident" id="8173813">Image</span>&nbsp;<span class="op" id="8173819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173822">return</span>&nbsp;<span class="ident" id="8173829">image</span><span class="op" id="8173834">.</span><span class="ident" id="8173835">NewUniform</span><span class="op" id="8173845">(</span><span class="ident" id="8173846">color</span><span class="op" id="8173851">.</span><span class="ident" id="8173852">Alpha</span><span class="op" id="8173857">{</span><span class="builtintype" id="8173858">uint8</span><span class="op" id="8173863">(</span><span class="ident" id="8173864">alpha</span><span class="op" id="8173869">)</span><span class="op" id="8173870">}</span><span class="op" id="8173871">)</span><br>
<span class="lineno"></span><span class="op" id="8173873">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8173876">func</span>&nbsp;<span class="ident" id="8173881">vgradGreen</span><span class="op" id="8173891">(</span><span class="ident" id="8173892">alpha</span>&nbsp;<span class="builtintype" id="8173898">int</span><span class="op" id="8173901">)</span>&nbsp;<span class="ident" id="8173903">image</span><span class="op" id="8173908">.</span><span class="ident" id="8173909">Image</span>&nbsp;<span class="op" id="8173915">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173918">m</span>&nbsp;<span class="op" id="8173920">:=</span>&nbsp;<span class="ident" id="8173923">image</span><span class="op" id="8173928">.</span><span class="ident" id="8173929">NewRGBA</span><span class="op" id="8173936">(</span><span class="ident" id="8173937">image</span><span class="op" id="8173942">.</span><span class="ident" id="8173943">Rect</span><span class="op" id="8173947">(</span><span class="num" id="8173948">0</span><span class="op" id="8173949">,</span>&nbsp;<span class="num" id="8173951">0</span><span class="op" id="8173952">,</span>&nbsp;<span class="num" id="8173954">16</span><span class="op" id="8173956">,</span>&nbsp;<span class="num" id="8173958">16</span><span class="op" id="8173960">)</span><span class="op" id="8173961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173964">for</span>&nbsp;<span class="ident" id="8173968">y</span>&nbsp;<span class="op" id="8173970">:=</span>&nbsp;<span class="num" id="8173973">0</span><span class="op" id="8173974">;</span>&nbsp;<span class="ident" id="8173976">y</span>&nbsp;<span class="op" id="8173978">&lt;</span>&nbsp;<span class="num" id="8173980">16</span><span class="op" id="8173982">;</span>&nbsp;<span class="ident" id="8173984">y</span><span class="op" id="8173985">++</span>&nbsp;<span class="op" id="8173988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173992">for</span>&nbsp;<span class="ident" id="8173996">x</span>&nbsp;<span class="op" id="8173998">:=</span>&nbsp;<span class="num" id="8174001">0</span><span class="op" id="8174002">;</span>&nbsp;<span class="ident" id="8174004">x</span>&nbsp;<span class="op" id="8174006">&lt;</span>&nbsp;<span class="num" id="8174008">16</span><span class="op" id="8174010">;</span>&nbsp;<span class="ident" id="8174012">x</span><span class="op" id="8174013">++</span>&nbsp;<span class="op" id="8174016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174021">m</span><span class="op" id="8174022">.</span><span class="ident" id="8174023">Set</span><span class="op" id="8174026">(</span><span class="ident" id="8174027">x</span><span class="op" id="8174028">,</span>&nbsp;<span class="ident" id="8174030">y</span><span class="op" id="8174031">,</span>&nbsp;<span class="ident" id="8174033">color</span><span class="op" id="8174038">.</span><span class="ident" id="8174039">RGBA</span><span class="op" id="8174043">{</span><span class="num" id="8174044">0</span><span class="op" id="8174045">,</span>&nbsp;<span class="builtintype" id="8174047">uint8</span><span class="op" id="8174052">(</span><span class="ident" id="8174053">y</span>&nbsp;<span class="op" id="8174055">*</span>&nbsp;<span class="ident" id="8174057">alpha</span>&nbsp;<span class="op" id="8174063">/</span>&nbsp;<span class="num" id="8174065">15</span><span class="op" id="8174067">)</span><span class="op" id="8174068">,</span>&nbsp;<span class="num" id="8174070">0</span><span class="op" id="8174071">,</span>&nbsp;<span class="builtintype" id="8174073">uint8</span><span class="op" id="8174078">(</span><span class="ident" id="8174079">alpha</span><span class="op" id="8174084">)</span><span class="op" id="8174085">}</span><span class="op" id="8174086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174090">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8174096">return</span>&nbsp;<span class="ident" id="8174103">m</span><br>
<span class="lineno"></span><span class="op" id="8174105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8174108">func</span>&nbsp;<span class="ident" id="8174113">vgradAlpha</span><span class="op" id="8174123">(</span><span class="ident" id="8174124">alpha</span>&nbsp;<span class="builtintype" id="8174130">int</span><span class="op" id="8174133">)</span>&nbsp;<span class="ident" id="8174135">image</span><span class="op" id="8174140">.</span><span class="ident" id="8174141">Image</span>&nbsp;<span class="op" id="8174147">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174150">m</span>&nbsp;<span class="op" id="8174152">:=</span>&nbsp;<span class="ident" id="8174155">image</span><span class="op" id="8174160">.</span><span class="ident" id="8174161">NewAlpha</span><span class="op" id="8174169">(</span><span class="ident" id="8174170">image</span><span class="op" id="8174175">.</span><span class="ident" id="8174176">Rect</span><span class="op" id="8174180">(</span><span class="num" id="8174181">0</span><span class="op" id="8174182">,</span>&nbsp;<span class="num" id="8174184">0</span><span class="op" id="8174185">,</span>&nbsp;<span class="num" id="8174187">16</span><span class="op" id="8174189">,</span>&nbsp;<span class="num" id="8174191">16</span><span class="op" id="8174193">)</span><span class="op" id="8174194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8174197">for</span>&nbsp;<span class="ident" id="8174201">y</span>&nbsp;<span class="op" id="8174203">:=</span>&nbsp;<span class="num" id="8174206">0</span><span class="op" id="8174207">;</span>&nbsp;<span class="ident" id="8174209">y</span>&nbsp;<span class="op" id="8174211">&lt;</span>&nbsp;<span class="num" id="8174213">16</span><span class="op" id="8174215">;</span>&nbsp;<span class="ident" id="8174217">y</span><span class="op" id="8174218">++</span>&nbsp;<span class="op" id="8174221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8174225">for</span>&nbsp;<span class="ident" id="8174229">x</span>&nbsp;<span class="op" id="8174231">:=</span>&nbsp;<span class="num" id="8174234">0</span><span class="op" id="8174235">;</span>&nbsp;<span class="ident" id="8174237">x</span>&nbsp;<span class="op" id="8174239">&lt;</span>&nbsp;<span class="num" id="8174241">16</span><span class="op" id="8174243">;</span>&nbsp;<span class="ident" id="8174245">x</span><span class="op" id="8174246">++</span>&nbsp;<span class="op" id="8174249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174254">m</span><span class="op" id="8174255">.</span><span class="ident" id="8174256">Set</span><span class="op" id="8174259">(</span><span class="ident" id="8174260">x</span><span class="op" id="8174261">,</span>&nbsp;<span class="ident" id="8174263">y</span><span class="op" id="8174264">,</span>&nbsp;<span class="ident" id="8174266">color</span><span class="op" id="8174271">.</span><span class="ident" id="8174272">Alpha</span><span class="op" id="8174277">{</span><span class="builtintype" id="8174278">uint8</span><span class="op" id="8174283">(</span><span class="ident" id="8174284">y</span>&nbsp;<span class="op" id="8174286">*</span>&nbsp;<span class="ident" id="8174288">alpha</span>&nbsp;<span class="op" id="8174294">/</span>&nbsp;<span class="num" id="8174296">15</span><span class="op" id="8174298">)</span><span class="op" id="8174299">}</span><span class="op" id="8174300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174304">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8174310">return</span>&nbsp;<span class="ident" id="8174317">m</span><br>
<span class="lineno"></span><span class="op" id="8174319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8174322">func</span>&nbsp;<span class="ident" id="8174327">vgradGreenNRGBA</span><span class="op" id="8174342">(</span><span class="ident" id="8174343">alpha</span>&nbsp;<span class="builtintype" id="8174349">int</span><span class="op" id="8174352">)</span>&nbsp;<span class="ident" id="8174354">image</span><span class="op" id="8174359">.</span><span class="ident" id="8174360">Image</span>&nbsp;<span class="op" id="8174366">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174369">m</span>&nbsp;<span class="op" id="8174371">:=</span>&nbsp;<span class="ident" id="8174374">image</span><span class="op" id="8174379">.</span><span class="ident" id="8174380">NewNRGBA</span><span class="op" id="8174388">(</span><span class="ident" id="8174389">image</span><span class="op" id="8174394">.</span><span class="ident" id="8174395">Rect</span><span class="op" id="8174399">(</span><span class="num" id="8174400">0</span><span class="op" id="8174401">,</span>&nbsp;<span class="num" id="8174403">0</span><span class="op" id="8174404">,</span>&nbsp;<span class="num" id="8174406">16</span><span class="op" id="8174408">,</span>&nbsp;<span class="num" id="8174410">16</span><span class="op" id="8174412">)</span><span class="op" id="8174413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8174416">for</span>&nbsp;<span class="ident" id="8174420">y</span>&nbsp;<span class="op" id="8174422">:=</span>&nbsp;<span class="num" id="8174425">0</span><span class="op" id="8174426">;</span>&nbsp;<span class="ident" id="8174428">y</span>&nbsp;<span class="op" id="8174430">&lt;</span>&nbsp;<span class="num" id="8174432">16</span><span class="op" id="8174434">;</span>&nbsp;<span class="ident" id="8174436">y</span><span class="op" id="8174437">++</span>&nbsp;<span class="op" id="8174440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8174444">for</span>&nbsp;<span class="ident" id="8174448">x</span>&nbsp;<span class="op" id="8174450">:=</span>&nbsp;<span class="num" id="8174453">0</span><span class="op" id="8174454">;</span>&nbsp;<span class="ident" id="8174456">x</span>&nbsp;<span class="op" id="8174458">&lt;</span>&nbsp;<span class="num" id="8174460">16</span><span class="op" id="8174462">;</span>&nbsp;<span class="ident" id="8174464">x</span><span class="op" id="8174465">++</span>&nbsp;<span class="op" id="8174468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174473">m</span><span class="op" id="8174474">.</span><span class="ident" id="8174475">Set</span><span class="op" id="8174478">(</span><span class="ident" id="8174479">x</span><span class="op" id="8174480">,</span>&nbsp;<span class="ident" id="8174482">y</span><span class="op" id="8174483">,</span>&nbsp;<span class="ident" id="8174485">color</span><span class="op" id="8174490">.</span><span class="ident" id="8174491">RGBA</span><span class="op" id="8174495">{</span><span class="num" id="8174496">0</span><span class="op" id="8174497">,</span>&nbsp;<span class="builtintype" id="8174499">uint8</span><span class="op" id="8174504">(</span><span class="ident" id="8174505">y</span>&nbsp;<span class="op" id="8174507">*</span>&nbsp;<span class="num" id="8174509">0x11</span><span class="op" id="8174513">)</span><span class="op" id="8174514">,</span>&nbsp;<span class="num" id="8174516">0</span><span class="op" id="8174517">,</span>&nbsp;<span class="builtintype" id="8174519">uint8</span><span class="op" id="8174524">(</span><span class="ident" id="8174525">alpha</span><span class="op" id="8174530">)</span><span class="op" id="8174531">}</span><span class="op" id="8174532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174536">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8174542">return</span>&nbsp;<span class="ident" id="8174549">m</span><br>
<span class="lineno"></span><span class="op" id="8174551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8174554">func</span>&nbsp;<span class="ident" id="8174559">vgradCr</span><span class="op" id="8174566">(</span><span class="op" id="8174567">)</span>&nbsp;<span class="ident" id="8174569">image</span><span class="op" id="8174574">.</span><span class="ident" id="8174575">Image</span>&nbsp;<span class="op" id="8174581">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174584">m</span>&nbsp;<span class="op" id="8174586">:=</span>&nbsp;<span class="op" id="8174589">&amp;</span><span class="ident" id="8174590">image</span><span class="op" id="8174595">.</span><span class="ident" id="8174596">YCbCr</span><span class="op" id="8174601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174605">Y</span><span class="op" id="8174606">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8174621">make</span><span class="op" id="8174625">(</span><span class="op" id="8174626">[</span><span class="op" id="8174627">]</span><span class="builtintype" id="8174628">byte</span><span class="op" id="8174632">,</span>&nbsp;<span class="num" id="8174634">16</span><span class="op" id="8174636">*</span><span class="num" id="8174637">16</span><span class="op" id="8174639">)</span><span class="op" id="8174640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174644">Cb</span><span class="op" id="8174646">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8174660">make</span><span class="op" id="8174664">(</span><span class="op" id="8174665">[</span><span class="op" id="8174666">]</span><span class="builtintype" id="8174667">byte</span><span class="op" id="8174671">,</span>&nbsp;<span class="num" id="8174673">16</span><span class="op" id="8174675">*</span><span class="num" id="8174676">16</span><span class="op" id="8174678">)</span><span class="op" id="8174679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174683">Cr</span><span class="op" id="8174685">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8174699">make</span><span class="op" id="8174703">(</span><span class="op" id="8174704">[</span><span class="op" id="8174705">]</span><span class="builtintype" id="8174706">byte</span><span class="op" id="8174710">,</span>&nbsp;<span class="num" id="8174712">16</span><span class="op" id="8174714">*</span><span class="num" id="8174715">16</span><span class="op" id="8174717">)</span><span class="op" id="8174718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174722">YStride</span><span class="op" id="8174729">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8174738">16</span><span class="op" id="8174740">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174744">CStride</span><span class="op" id="8174751">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8174760">16</span><span class="op" id="8174762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174766">SubsampleRatio</span><span class="op" id="8174780">:</span>&nbsp;<span class="ident" id="8174782">image</span><span class="op" id="8174787">.</span><span class="ident" id="8174788">YCbCrSubsampleRatio444</span><span class="op" id="8174810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174814">Rect</span><span class="op" id="8174818">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8174830">image</span><span class="op" id="8174835">.</span><span class="ident" id="8174836">Rect</span><span class="op" id="8174840">(</span><span class="num" id="8174841">0</span><span class="op" id="8174842">,</span>&nbsp;<span class="num" id="8174844">0</span><span class="op" id="8174845">,</span>&nbsp;<span class="num" id="8174847">16</span><span class="op" id="8174849">,</span>&nbsp;<span class="num" id="8174851">16</span><span class="op" id="8174853">)</span><span class="op" id="8174854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8174860">for</span>&nbsp;<span class="ident" id="8174864">y</span>&nbsp;<span class="op" id="8174866">:=</span>&nbsp;<span class="num" id="8174869">0</span><span class="op" id="8174870">;</span>&nbsp;<span class="ident" id="8174872">y</span>&nbsp;<span class="op" id="8174874">&lt;</span>&nbsp;<span class="num" id="8174876">16</span><span class="op" id="8174878">;</span>&nbsp;<span class="ident" id="8174880">y</span><span class="op" id="8174881">++</span>&nbsp;<span class="op" id="8174884">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8174888">for</span>&nbsp;<span class="ident" id="8174892">x</span>&nbsp;<span class="op" id="8174894">:=</span>&nbsp;<span class="num" id="8174897">0</span><span class="op" id="8174898">;</span>&nbsp;<span class="ident" id="8174900">x</span>&nbsp;<span class="op" id="8174902">&lt;</span>&nbsp;<span class="num" id="8174904">16</span><span class="op" id="8174906">;</span>&nbsp;<span class="ident" id="8174908">x</span><span class="op" id="8174909">++</span>&nbsp;<span class="op" id="8174912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174917">m</span><span class="op" id="8174918">.</span><span class="ident" id="8174919">Cr</span><span class="op" id="8174921">[</span><span class="ident" id="8174922">y</span><span class="op" id="8174923">*</span><span class="ident" id="8174924">m</span><span class="op" id="8174925">.</span><span class="ident" id="8174926">CStride</span><span class="op" id="8174933">+</span><span class="ident" id="8174934">x</span><span class="op" id="8174935">]</span>&nbsp;<span class="op" id="8174937">=</span>&nbsp;<span class="builtintype" id="8174939">uint8</span><span class="op" id="8174944">(</span><span class="ident" id="8174945">y</span>&nbsp;<span class="op" id="8174947">*</span>&nbsp;<span class="num" id="8174949">0x11</span><span class="op" id="8174953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8174963">return</span>&nbsp;<span class="ident" id="8174970">m</span><br>
<span class="lineno">75</span><span class="op" id="8174972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8174975">func</span>&nbsp;<span class="ident" id="8174980">hgradRed</span><span class="op" id="8174988">(</span><span class="ident" id="8174989">alpha</span>&nbsp;<span class="builtintype" id="8174995">int</span><span class="op" id="8174998">)</span>&nbsp;<span class="ident" id="8175000">Image</span>&nbsp;<span class="op" id="8175006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175009">m</span>&nbsp;<span class="op" id="8175011">:=</span>&nbsp;<span class="ident" id="8175014">image</span><span class="op" id="8175019">.</span><span class="ident" id="8175020">NewRGBA</span><span class="op" id="8175027">(</span><span class="ident" id="8175028">image</span><span class="op" id="8175033">.</span><span class="ident" id="8175034">Rect</span><span class="op" id="8175038">(</span><span class="num" id="8175039">0</span><span class="op" id="8175040">,</span>&nbsp;<span class="num" id="8175042">0</span><span class="op" id="8175043">,</span>&nbsp;<span class="num" id="8175045">16</span><span class="op" id="8175047">,</span>&nbsp;<span class="num" id="8175049">16</span><span class="op" id="8175051">)</span><span class="op" id="8175052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175055">for</span>&nbsp;<span class="ident" id="8175059">y</span>&nbsp;<span class="op" id="8175061">:=</span>&nbsp;<span class="num" id="8175064">0</span><span class="op" id="8175065">;</span>&nbsp;<span class="ident" id="8175067">y</span>&nbsp;<span class="op" id="8175069">&lt;</span>&nbsp;<span class="num" id="8175071">16</span><span class="op" id="8175073">;</span>&nbsp;<span class="ident" id="8175075">y</span><span class="op" id="8175076">++</span>&nbsp;<span class="op" id="8175079">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175083">for</span>&nbsp;<span class="ident" id="8175087">x</span>&nbsp;<span class="op" id="8175089">:=</span>&nbsp;<span class="num" id="8175092">0</span><span class="op" id="8175093">;</span>&nbsp;<span class="ident" id="8175095">x</span>&nbsp;<span class="op" id="8175097">&lt;</span>&nbsp;<span class="num" id="8175099">16</span><span class="op" id="8175101">;</span>&nbsp;<span class="ident" id="8175103">x</span><span class="op" id="8175104">++</span>&nbsp;<span class="op" id="8175107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175112">m</span><span class="op" id="8175113">.</span><span class="ident" id="8175114">Set</span><span class="op" id="8175117">(</span><span class="ident" id="8175118">x</span><span class="op" id="8175119">,</span>&nbsp;<span class="ident" id="8175121">y</span><span class="op" id="8175122">,</span>&nbsp;<span class="ident" id="8175124">color</span><span class="op" id="8175129">.</span><span class="ident" id="8175130">RGBA</span><span class="op" id="8175134">{</span><span class="builtintype" id="8175135">uint8</span><span class="op" id="8175140">(</span><span class="ident" id="8175141">x</span>&nbsp;<span class="op" id="8175143">*</span>&nbsp;<span class="ident" id="8175145">alpha</span>&nbsp;<span class="op" id="8175151">/</span>&nbsp;<span class="num" id="8175153">15</span><span class="op" id="8175155">)</span><span class="op" id="8175156">,</span>&nbsp;<span class="num" id="8175158">0</span><span class="op" id="8175159">,</span>&nbsp;<span class="num" id="8175161">0</span><span class="op" id="8175162">,</span>&nbsp;<span class="builtintype" id="8175164">uint8</span><span class="op" id="8175169">(</span><span class="ident" id="8175170">alpha</span><span class="op" id="8175175">)</span><span class="op" id="8175176">}</span><span class="op" id="8175177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175187">return</span>&nbsp;<span class="ident" id="8175194">m</span><br>
<span class="lineno">85</span><span class="op" id="8175196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8175199">func</span>&nbsp;<span class="ident" id="8175204">gradYellow</span><span class="op" id="8175214">(</span><span class="ident" id="8175215">alpha</span>&nbsp;<span class="builtintype" id="8175221">int</span><span class="op" id="8175224">)</span>&nbsp;<span class="ident" id="8175226">Image</span>&nbsp;<span class="op" id="8175232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175235">m</span>&nbsp;<span class="op" id="8175237">:=</span>&nbsp;<span class="ident" id="8175240">image</span><span class="op" id="8175245">.</span><span class="ident" id="8175246">NewRGBA</span><span class="op" id="8175253">(</span><span class="ident" id="8175254">image</span><span class="op" id="8175259">.</span><span class="ident" id="8175260">Rect</span><span class="op" id="8175264">(</span><span class="num" id="8175265">0</span><span class="op" id="8175266">,</span>&nbsp;<span class="num" id="8175268">0</span><span class="op" id="8175269">,</span>&nbsp;<span class="num" id="8175271">16</span><span class="op" id="8175273">,</span>&nbsp;<span class="num" id="8175275">16</span><span class="op" id="8175277">)</span><span class="op" id="8175278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175281">for</span>&nbsp;<span class="ident" id="8175285">y</span>&nbsp;<span class="op" id="8175287">:=</span>&nbsp;<span class="num" id="8175290">0</span><span class="op" id="8175291">;</span>&nbsp;<span class="ident" id="8175293">y</span>&nbsp;<span class="op" id="8175295">&lt;</span>&nbsp;<span class="num" id="8175297">16</span><span class="op" id="8175299">;</span>&nbsp;<span class="ident" id="8175301">y</span><span class="op" id="8175302">++</span>&nbsp;<span class="op" id="8175305">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175309">for</span>&nbsp;<span class="ident" id="8175313">x</span>&nbsp;<span class="op" id="8175315">:=</span>&nbsp;<span class="num" id="8175318">0</span><span class="op" id="8175319">;</span>&nbsp;<span class="ident" id="8175321">x</span>&nbsp;<span class="op" id="8175323">&lt;</span>&nbsp;<span class="num" id="8175325">16</span><span class="op" id="8175327">;</span>&nbsp;<span class="ident" id="8175329">x</span><span class="op" id="8175330">++</span>&nbsp;<span class="op" id="8175333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175338">m</span><span class="op" id="8175339">.</span><span class="ident" id="8175340">Set</span><span class="op" id="8175343">(</span><span class="ident" id="8175344">x</span><span class="op" id="8175345">,</span>&nbsp;<span class="ident" id="8175347">y</span><span class="op" id="8175348">,</span>&nbsp;<span class="ident" id="8175350">color</span><span class="op" id="8175355">.</span><span class="ident" id="8175356">RGBA</span><span class="op" id="8175360">{</span><span class="builtintype" id="8175361">uint8</span><span class="op" id="8175366">(</span><span class="ident" id="8175367">x</span>&nbsp;<span class="op" id="8175369">*</span>&nbsp;<span class="ident" id="8175371">alpha</span>&nbsp;<span class="op" id="8175377">/</span>&nbsp;<span class="num" id="8175379">15</span><span class="op" id="8175381">)</span><span class="op" id="8175382">,</span>&nbsp;<span class="builtintype" id="8175384">uint8</span><span class="op" id="8175389">(</span><span class="ident" id="8175390">y</span>&nbsp;<span class="op" id="8175392">*</span>&nbsp;<span class="ident" id="8175394">alpha</span>&nbsp;<span class="op" id="8175400">/</span>&nbsp;<span class="num" id="8175402">15</span><span class="op" id="8175404">)</span><span class="op" id="8175405">,</span>&nbsp;<span class="num" id="8175407">0</span><span class="op" id="8175408">,</span>&nbsp;<span class="builtintype" id="8175410">uint8</span><span class="op" id="8175415">(</span><span class="ident" id="8175416">alpha</span><span class="op" id="8175421">)</span><span class="op" id="8175422">}</span><span class="op" id="8175423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175433">return</span>&nbsp;<span class="ident" id="8175440">m</span><br>
<span class="lineno">95</span><span class="op" id="8175442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8175445">type</span>&nbsp;<span class="ident" id="8175450">drawTest</span>&nbsp;<span class="keyword" id="8175459">struct</span>&nbsp;<span class="op" id="8175466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175469">desc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8175478">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175486">src</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8175495">image</span><span class="op" id="8175500">.</span><span class="ident" id="8175501">Image</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175508">mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8175517">image</span><span class="op" id="8175522">.</span><span class="ident" id="8175523">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175530">op</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8175539">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175543">expected</span>&nbsp;<span class="ident" id="8175552">color</span><span class="op" id="8175557">.</span><span class="ident" id="8175558">Color</span><br>
<span class="lineno"></span><span class="op" id="8175564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="8175567">var</span>&nbsp;<span class="ident" id="8175571">drawTests</span>&nbsp;<span class="op" id="8175581">=</span>&nbsp;<span class="op" id="8175583">[</span><span class="op" id="8175584">]</span><span class="ident" id="8175585">drawTest</span><span class="op" id="8175593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8175596">//&nbsp;Uniform&nbsp;mask&nbsp;(0%&nbsp;opaque).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175626">{</span><span class="string" id="8175627">&#34;nop&#34;</span><span class="op" id="8175632">,</span>&nbsp;<span class="ident" id="8175634">vgradGreen</span><span class="op" id="8175644">(</span><span class="num" id="8175645">255</span><span class="op" id="8175648">)</span><span class="op" id="8175649">,</span>&nbsp;<span class="ident" id="8175651">fillAlpha</span><span class="op" id="8175660">(</span><span class="num" id="8175661">0</span><span class="op" id="8175662">)</span><span class="op" id="8175663">,</span>&nbsp;<span class="ident" id="8175665">Over</span><span class="op" id="8175669">,</span>&nbsp;<span class="ident" id="8175671">color</span><span class="op" id="8175676">.</span><span class="ident" id="8175677">RGBA</span><span class="op" id="8175681">{</span><span class="num" id="8175682">136</span><span class="op" id="8175685">,</span>&nbsp;<span class="num" id="8175687">0</span><span class="op" id="8175688">,</span>&nbsp;<span class="num" id="8175690">0</span><span class="op" id="8175691">,</span>&nbsp;<span class="num" id="8175693">255</span><span class="op" id="8175696">}</span><span class="op" id="8175697">}</span><span class="op" id="8175698">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175701">{</span><span class="string" id="8175702">&#34;clear&#34;</span><span class="op" id="8175709">,</span>&nbsp;<span class="ident" id="8175711">vgradGreen</span><span class="op" id="8175721">(</span><span class="num" id="8175722">255</span><span class="op" id="8175725">)</span><span class="op" id="8175726">,</span>&nbsp;<span class="ident" id="8175728">fillAlpha</span><span class="op" id="8175737">(</span><span class="num" id="8175738">0</span><span class="op" id="8175739">)</span><span class="op" id="8175740">,</span>&nbsp;<span class="ident" id="8175742">Src</span><span class="op" id="8175745">,</span>&nbsp;<span class="ident" id="8175747">color</span><span class="op" id="8175752">.</span><span class="ident" id="8175753">RGBA</span><span class="op" id="8175757">{</span><span class="num" id="8175758">0</span><span class="op" id="8175759">,</span>&nbsp;<span class="num" id="8175761">0</span><span class="op" id="8175762">,</span>&nbsp;<span class="num" id="8175764">0</span><span class="op" id="8175765">,</span>&nbsp;<span class="num" id="8175767">0</span><span class="op" id="8175768">}</span><span class="op" id="8175769">}</span><span class="op" id="8175770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8175773">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;uniform&nbsp;source.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8175827">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8175852">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8175899">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;90,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175939">{</span><span class="string" id="8175940">&#34;fill&#34;</span><span class="op" id="8175946">,</span>&nbsp;<span class="ident" id="8175948">fillBlue</span><span class="op" id="8175956">(</span><span class="num" id="8175957">90</span><span class="op" id="8175959">)</span><span class="op" id="8175960">,</span>&nbsp;<span class="ident" id="8175962">fillAlpha</span><span class="op" id="8175971">(</span><span class="num" id="8175972">255</span><span class="op" id="8175975">)</span><span class="op" id="8175976">,</span>&nbsp;<span class="ident" id="8175978">Over</span><span class="op" id="8175982">,</span>&nbsp;<span class="ident" id="8175984">color</span><span class="op" id="8175989">.</span><span class="ident" id="8175990">RGBA</span><span class="op" id="8175994">{</span><span class="num" id="8175995">88</span><span class="op" id="8175997">,</span>&nbsp;<span class="num" id="8175999">0</span><span class="op" id="8176000">,</span>&nbsp;<span class="num" id="8176002">90</span><span class="op" id="8176004">,</span>&nbsp;<span class="num" id="8176006">255</span><span class="op" id="8176009">}</span><span class="op" id="8176010">}</span><span class="op" id="8176011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176014">{</span><span class="string" id="8176015">&#34;fillSrc&#34;</span><span class="op" id="8176024">,</span>&nbsp;<span class="ident" id="8176026">fillBlue</span><span class="op" id="8176034">(</span><span class="num" id="8176035">90</span><span class="op" id="8176037">)</span><span class="op" id="8176038">,</span>&nbsp;<span class="ident" id="8176040">fillAlpha</span><span class="op" id="8176049">(</span><span class="num" id="8176050">255</span><span class="op" id="8176053">)</span><span class="op" id="8176054">,</span>&nbsp;<span class="ident" id="8176056">Src</span><span class="op" id="8176059">,</span>&nbsp;<span class="ident" id="8176061">color</span><span class="op" id="8176066">.</span><span class="ident" id="8176067">RGBA</span><span class="op" id="8176071">{</span><span class="num" id="8176072">0</span><span class="op" id="8176073">,</span>&nbsp;<span class="num" id="8176075">0</span><span class="op" id="8176076">,</span>&nbsp;<span class="num" id="8176078">90</span><span class="op" id="8176080">,</span>&nbsp;<span class="num" id="8176082">90</span><span class="op" id="8176084">}</span><span class="op" id="8176085">}</span><span class="op" id="8176086">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176089">{</span><span class="string" id="8176090">&#34;fillAlpha&#34;</span><span class="op" id="8176101">,</span>&nbsp;<span class="ident" id="8176103">fillBlue</span><span class="op" id="8176111">(</span><span class="num" id="8176112">90</span><span class="op" id="8176114">)</span><span class="op" id="8176115">,</span>&nbsp;<span class="ident" id="8176117">fillAlpha</span><span class="op" id="8176126">(</span><span class="num" id="8176127">192</span><span class="op" id="8176130">)</span><span class="op" id="8176131">,</span>&nbsp;<span class="ident" id="8176133">Over</span><span class="op" id="8176137">,</span>&nbsp;<span class="ident" id="8176139">color</span><span class="op" id="8176144">.</span><span class="ident" id="8176145">RGBA</span><span class="op" id="8176149">{</span><span class="num" id="8176150">100</span><span class="op" id="8176153">,</span>&nbsp;<span class="num" id="8176155">0</span><span class="op" id="8176156">,</span>&nbsp;<span class="num" id="8176158">68</span><span class="op" id="8176160">,</span>&nbsp;<span class="num" id="8176162">255</span><span class="op" id="8176165">}</span><span class="op" id="8176166">}</span><span class="op" id="8176167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176170">{</span><span class="string" id="8176171">&#34;fillAlphaSrc&#34;</span><span class="op" id="8176185">,</span>&nbsp;<span class="ident" id="8176187">fillBlue</span><span class="op" id="8176195">(</span><span class="num" id="8176196">90</span><span class="op" id="8176198">)</span><span class="op" id="8176199">,</span>&nbsp;<span class="ident" id="8176201">fillAlpha</span><span class="op" id="8176210">(</span><span class="num" id="8176211">192</span><span class="op" id="8176214">)</span><span class="op" id="8176215">,</span>&nbsp;<span class="ident" id="8176217">Src</span><span class="op" id="8176220">,</span>&nbsp;<span class="ident" id="8176222">color</span><span class="op" id="8176227">.</span><span class="ident" id="8176228">RGBA</span><span class="op" id="8176232">{</span><span class="num" id="8176233">0</span><span class="op" id="8176234">,</span>&nbsp;<span class="num" id="8176236">0</span><span class="op" id="8176237">,</span>&nbsp;<span class="num" id="8176239">68</span><span class="op" id="8176241">,</span>&nbsp;<span class="num" id="8176243">68</span><span class="op" id="8176245">}</span><span class="op" id="8176246">}</span><span class="op" id="8176247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176250">{</span><span class="string" id="8176251">&#34;fillNil&#34;</span><span class="op" id="8176260">,</span>&nbsp;<span class="ident" id="8176262">fillBlue</span><span class="op" id="8176270">(</span><span class="num" id="8176271">90</span><span class="op" id="8176273">)</span><span class="op" id="8176274">,</span>&nbsp;<span class="ident" id="8176276">nil</span><span class="op" id="8176279">,</span>&nbsp;<span class="ident" id="8176281">Over</span><span class="op" id="8176285">,</span>&nbsp;<span class="ident" id="8176287">color</span><span class="op" id="8176292">.</span><span class="ident" id="8176293">RGBA</span><span class="op" id="8176297">{</span><span class="num" id="8176298">88</span><span class="op" id="8176300">,</span>&nbsp;<span class="num" id="8176302">0</span><span class="op" id="8176303">,</span>&nbsp;<span class="num" id="8176305">90</span><span class="op" id="8176307">,</span>&nbsp;<span class="num" id="8176309">255</span><span class="op" id="8176312">}</span><span class="op" id="8176313">}</span><span class="op" id="8176314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176317">{</span><span class="string" id="8176318">&#34;fillNilSrc&#34;</span><span class="op" id="8176330">,</span>&nbsp;<span class="ident" id="8176332">fillBlue</span><span class="op" id="8176340">(</span><span class="num" id="8176341">90</span><span class="op" id="8176343">)</span><span class="op" id="8176344">,</span>&nbsp;<span class="ident" id="8176346">nil</span><span class="op" id="8176349">,</span>&nbsp;<span class="ident" id="8176351">Src</span><span class="op" id="8176354">,</span>&nbsp;<span class="ident" id="8176356">color</span><span class="op" id="8176361">.</span><span class="ident" id="8176362">RGBA</span><span class="op" id="8176366">{</span><span class="num" id="8176367">0</span><span class="op" id="8176368">,</span>&nbsp;<span class="num" id="8176370">0</span><span class="op" id="8176371">,</span>&nbsp;<span class="num" id="8176373">90</span><span class="op" id="8176375">,</span>&nbsp;<span class="num" id="8176377">90</span><span class="op" id="8176379">}</span><span class="op" id="8176380">}</span><span class="op" id="8176381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8176384">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8176439">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8176464">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8176511">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176551">{</span><span class="string" id="8176552">&#34;copy&#34;</span><span class="op" id="8176558">,</span>&nbsp;<span class="ident" id="8176560">vgradGreen</span><span class="op" id="8176570">(</span><span class="num" id="8176571">90</span><span class="op" id="8176573">)</span><span class="op" id="8176574">,</span>&nbsp;<span class="ident" id="8176576">fillAlpha</span><span class="op" id="8176585">(</span><span class="num" id="8176586">255</span><span class="op" id="8176589">)</span><span class="op" id="8176590">,</span>&nbsp;<span class="ident" id="8176592">Over</span><span class="op" id="8176596">,</span>&nbsp;<span class="ident" id="8176598">color</span><span class="op" id="8176603">.</span><span class="ident" id="8176604">RGBA</span><span class="op" id="8176608">{</span><span class="num" id="8176609">88</span><span class="op" id="8176611">,</span>&nbsp;<span class="num" id="8176613">48</span><span class="op" id="8176615">,</span>&nbsp;<span class="num" id="8176617">0</span><span class="op" id="8176618">,</span>&nbsp;<span class="num" id="8176620">255</span><span class="op" id="8176623">}</span><span class="op" id="8176624">}</span><span class="op" id="8176625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176628">{</span><span class="string" id="8176629">&#34;copySrc&#34;</span><span class="op" id="8176638">,</span>&nbsp;<span class="ident" id="8176640">vgradGreen</span><span class="op" id="8176650">(</span><span class="num" id="8176651">90</span><span class="op" id="8176653">)</span><span class="op" id="8176654">,</span>&nbsp;<span class="ident" id="8176656">fillAlpha</span><span class="op" id="8176665">(</span><span class="num" id="8176666">255</span><span class="op" id="8176669">)</span><span class="op" id="8176670">,</span>&nbsp;<span class="ident" id="8176672">Src</span><span class="op" id="8176675">,</span>&nbsp;<span class="ident" id="8176677">color</span><span class="op" id="8176682">.</span><span class="ident" id="8176683">RGBA</span><span class="op" id="8176687">{</span><span class="num" id="8176688">0</span><span class="op" id="8176689">,</span>&nbsp;<span class="num" id="8176691">48</span><span class="op" id="8176693">,</span>&nbsp;<span class="num" id="8176695">0</span><span class="op" id="8176696">,</span>&nbsp;<span class="num" id="8176698">90</span><span class="op" id="8176700">}</span><span class="op" id="8176701">}</span><span class="op" id="8176702">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176705">{</span><span class="string" id="8176706">&#34;copyAlpha&#34;</span><span class="op" id="8176717">,</span>&nbsp;<span class="ident" id="8176719">vgradGreen</span><span class="op" id="8176729">(</span><span class="num" id="8176730">90</span><span class="op" id="8176732">)</span><span class="op" id="8176733">,</span>&nbsp;<span class="ident" id="8176735">fillAlpha</span><span class="op" id="8176744">(</span><span class="num" id="8176745">192</span><span class="op" id="8176748">)</span><span class="op" id="8176749">,</span>&nbsp;<span class="ident" id="8176751">Over</span><span class="op" id="8176755">,</span>&nbsp;<span class="ident" id="8176757">color</span><span class="op" id="8176762">.</span><span class="ident" id="8176763">RGBA</span><span class="op" id="8176767">{</span><span class="num" id="8176768">100</span><span class="op" id="8176771">,</span>&nbsp;<span class="num" id="8176773">36</span><span class="op" id="8176775">,</span>&nbsp;<span class="num" id="8176777">0</span><span class="op" id="8176778">,</span>&nbsp;<span class="num" id="8176780">255</span><span class="op" id="8176783">}</span><span class="op" id="8176784">}</span><span class="op" id="8176785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176788">{</span><span class="string" id="8176789">&#34;copyAlphaSrc&#34;</span><span class="op" id="8176803">,</span>&nbsp;<span class="ident" id="8176805">vgradGreen</span><span class="op" id="8176815">(</span><span class="num" id="8176816">90</span><span class="op" id="8176818">)</span><span class="op" id="8176819">,</span>&nbsp;<span class="ident" id="8176821">fillAlpha</span><span class="op" id="8176830">(</span><span class="num" id="8176831">192</span><span class="op" id="8176834">)</span><span class="op" id="8176835">,</span>&nbsp;<span class="ident" id="8176837">Src</span><span class="op" id="8176840">,</span>&nbsp;<span class="ident" id="8176842">color</span><span class="op" id="8176847">.</span><span class="ident" id="8176848">RGBA</span><span class="op" id="8176852">{</span><span class="num" id="8176853">0</span><span class="op" id="8176854">,</span>&nbsp;<span class="num" id="8176856">36</span><span class="op" id="8176858">,</span>&nbsp;<span class="num" id="8176860">0</span><span class="op" id="8176861">,</span>&nbsp;<span class="num" id="8176863">68</span><span class="op" id="8176865">}</span><span class="op" id="8176866">}</span><span class="op" id="8176867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176870">{</span><span class="string" id="8176871">&#34;copyNil&#34;</span><span class="op" id="8176880">,</span>&nbsp;<span class="ident" id="8176882">vgradGreen</span><span class="op" id="8176892">(</span><span class="num" id="8176893">90</span><span class="op" id="8176895">)</span><span class="op" id="8176896">,</span>&nbsp;<span class="ident" id="8176898">nil</span><span class="op" id="8176901">,</span>&nbsp;<span class="ident" id="8176903">Over</span><span class="op" id="8176907">,</span>&nbsp;<span class="ident" id="8176909">color</span><span class="op" id="8176914">.</span><span class="ident" id="8176915">RGBA</span><span class="op" id="8176919">{</span><span class="num" id="8176920">88</span><span class="op" id="8176922">,</span>&nbsp;<span class="num" id="8176924">48</span><span class="op" id="8176926">,</span>&nbsp;<span class="num" id="8176928">0</span><span class="op" id="8176929">,</span>&nbsp;<span class="num" id="8176931">255</span><span class="op" id="8176934">}</span><span class="op" id="8176935">}</span><span class="op" id="8176936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176939">{</span><span class="string" id="8176940">&#34;copyNilSrc&#34;</span><span class="op" id="8176952">,</span>&nbsp;<span class="ident" id="8176954">vgradGreen</span><span class="op" id="8176964">(</span><span class="num" id="8176965">90</span><span class="op" id="8176967">)</span><span class="op" id="8176968">,</span>&nbsp;<span class="ident" id="8176970">nil</span><span class="op" id="8176973">,</span>&nbsp;<span class="ident" id="8176975">Src</span><span class="op" id="8176978">,</span>&nbsp;<span class="ident" id="8176980">color</span><span class="op" id="8176985">.</span><span class="ident" id="8176986">RGBA</span><span class="op" id="8176990">{</span><span class="num" id="8176991">0</span><span class="op" id="8176992">,</span>&nbsp;<span class="num" id="8176994">48</span><span class="op" id="8176996">,</span>&nbsp;<span class="num" id="8176998">0</span><span class="op" id="8176999">,</span>&nbsp;<span class="num" id="8177001">90</span><span class="op" id="8177003">}</span><span class="op" id="8177004">}</span><span class="op" id="8177005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8177008">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;NRGBA&nbsp;source.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8177069">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8177094">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8177141">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;136,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;NRGBA-space,&nbsp;which&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;RGBA-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8177236">//&nbsp;The&nbsp;result&nbsp;pixel&nbsp;is&nbsp;different&nbsp;than&nbsp;in&nbsp;the&nbsp;&#34;copy*&#34;&nbsp;test&nbsp;cases&nbsp;because&nbsp;of&nbsp;rounding&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8177329">{</span><span class="string" id="8177330">&#34;nrgba&#34;</span><span class="op" id="8177337">,</span>&nbsp;<span class="ident" id="8177339">vgradGreenNRGBA</span><span class="op" id="8177354">(</span><span class="num" id="8177355">90</span><span class="op" id="8177357">)</span><span class="op" id="8177358">,</span>&nbsp;<span class="ident" id="8177360">fillAlpha</span><span class="op" id="8177369">(</span><span class="num" id="8177370">255</span><span class="op" id="8177373">)</span><span class="op" id="8177374">,</span>&nbsp;<span class="ident" id="8177376">Over</span><span class="op" id="8177380">,</span>&nbsp;<span class="ident" id="8177382">color</span><span class="op" id="8177387">.</span><span class="ident" id="8177388">RGBA</span><span class="op" id="8177392">{</span><span class="num" id="8177393">88</span><span class="op" id="8177395">,</span>&nbsp;<span class="num" id="8177397">46</span><span class="op" id="8177399">,</span>&nbsp;<span class="num" id="8177401">0</span><span class="op" id="8177402">,</span>&nbsp;<span class="num" id="8177404">255</span><span class="op" id="8177407">}</span><span class="op" id="8177408">}</span><span class="op" id="8177409">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8177412">{</span><span class="string" id="8177413">&#34;nrgbaSrc&#34;</span><span class="op" id="8177423">,</span>&nbsp;<span class="ident" id="8177425">vgradGreenNRGBA</span><span class="op" id="8177440">(</span><span class="num" id="8177441">90</span><span class="op" id="8177443">)</span><span class="op" id="8177444">,</span>&nbsp;<span class="ident" id="8177446">fillAlpha</span><span class="op" id="8177455">(</span><span class="num" id="8177456">255</span><span class="op" id="8177459">)</span><span class="op" id="8177460">,</span>&nbsp;<span class="ident" id="8177462">Src</span><span class="op" id="8177465">,</span>&nbsp;<span class="ident" id="8177467">color</span><span class="op" id="8177472">.</span><span class="ident" id="8177473">RGBA</span><span class="op" id="8177477">{</span><span class="num" id="8177478">0</span><span class="op" id="8177479">,</span>&nbsp;<span class="num" id="8177481">46</span><span class="op" id="8177483">,</span>&nbsp;<span class="num" id="8177485">0</span><span class="op" id="8177486">,</span>&nbsp;<span class="num" id="8177488">90</span><span class="op" id="8177490">}</span><span class="op" id="8177491">}</span><span class="op" id="8177492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8177495">{</span><span class="string" id="8177496">&#34;nrgbaAlpha&#34;</span><span class="op" id="8177508">,</span>&nbsp;<span class="ident" id="8177510">vgradGreenNRGBA</span><span class="op" id="8177525">(</span><span class="num" id="8177526">90</span><span class="op" id="8177528">)</span><span class="op" id="8177529">,</span>&nbsp;<span class="ident" id="8177531">fillAlpha</span><span class="op" id="8177540">(</span><span class="num" id="8177541">192</span><span class="op" id="8177544">)</span><span class="op" id="8177545">,</span>&nbsp;<span class="ident" id="8177547">Over</span><span class="op" id="8177551">,</span>&nbsp;<span class="ident" id="8177553">color</span><span class="op" id="8177558">.</span><span class="ident" id="8177559">RGBA</span><span class="op" id="8177563">{</span><span class="num" id="8177564">100</span><span class="op" id="8177567">,</span>&nbsp;<span class="num" id="8177569">34</span><span class="op" id="8177571">,</span>&nbsp;<span class="num" id="8177573">0</span><span class="op" id="8177574">,</span>&nbsp;<span class="num" id="8177576">255</span><span class="op" id="8177579">}</span><span class="op" id="8177580">}</span><span class="op" id="8177581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8177584">{</span><span class="string" id="8177585">&#34;nrgbaAlphaSrc&#34;</span><span class="op" id="8177600">,</span>&nbsp;<span class="ident" id="8177602">vgradGreenNRGBA</span><span class="op" id="8177617">(</span><span class="num" id="8177618">90</span><span class="op" id="8177620">)</span><span class="op" id="8177621">,</span>&nbsp;<span class="ident" id="8177623">fillAlpha</span><span class="op" id="8177632">(</span><span class="num" id="8177633">192</span><span class="op" id="8177636">)</span><span class="op" id="8177637">,</span>&nbsp;<span class="ident" id="8177639">Src</span><span class="op" id="8177642">,</span>&nbsp;<span class="ident" id="8177644">color</span><span class="op" id="8177649">.</span><span class="ident" id="8177650">RGBA</span><span class="op" id="8177654">{</span><span class="num" id="8177655">0</span><span class="op" id="8177656">,</span>&nbsp;<span class="num" id="8177658">34</span><span class="op" id="8177660">,</span>&nbsp;<span class="num" id="8177662">0</span><span class="op" id="8177663">,</span>&nbsp;<span class="num" id="8177665">68</span><span class="op" id="8177667">}</span><span class="op" id="8177668">}</span><span class="op" id="8177669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8177672">{</span><span class="string" id="8177673">&#34;nrgbaNil&#34;</span><span class="op" id="8177683">,</span>&nbsp;<span class="ident" id="8177685">vgradGreenNRGBA</span><span class="op" id="8177700">(</span><span class="num" id="8177701">90</span><span class="op" id="8177703">)</span><span class="op" id="8177704">,</span>&nbsp;<span class="ident" id="8177706">nil</span><span class="op" id="8177709">,</span>&nbsp;<span class="ident" id="8177711">Over</span><span class="op" id="8177715">,</span>&nbsp;<span class="ident" id="8177717">color</span><span class="op" id="8177722">.</span><span class="ident" id="8177723">RGBA</span><span class="op" id="8177727">{</span><span class="num" id="8177728">88</span><span class="op" id="8177730">,</span>&nbsp;<span class="num" id="8177732">46</span><span class="op" id="8177734">,</span>&nbsp;<span class="num" id="8177736">0</span><span class="op" id="8177737">,</span>&nbsp;<span class="num" id="8177739">255</span><span class="op" id="8177742">}</span><span class="op" id="8177743">}</span><span class="op" id="8177744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8177747">{</span><span class="string" id="8177748">&#34;nrgbaNilSrc&#34;</span><span class="op" id="8177761">,</span>&nbsp;<span class="ident" id="8177763">vgradGreenNRGBA</span><span class="op" id="8177778">(</span><span class="num" id="8177779">90</span><span class="op" id="8177781">)</span><span class="op" id="8177782">,</span>&nbsp;<span class="ident" id="8177784">nil</span><span class="op" id="8177787">,</span>&nbsp;<span class="ident" id="8177789">Src</span><span class="op" id="8177792">,</span>&nbsp;<span class="ident" id="8177794">color</span><span class="op" id="8177799">.</span><span class="ident" id="8177800">RGBA</span><span class="op" id="8177804">{</span><span class="num" id="8177805">0</span><span class="op" id="8177806">,</span>&nbsp;<span class="num" id="8177808">46</span><span class="op" id="8177810">,</span>&nbsp;<span class="num" id="8177812">0</span><span class="op" id="8177813">,</span>&nbsp;<span class="num" id="8177815">90</span><span class="op" id="8177817">}</span><span class="op" id="8177818">}</span><span class="op" id="8177819">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8177822">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;YCbCr&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8177883">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8177908">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8177955">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;136}&nbsp;in&nbsp;YCbCr-space,&nbsp;which&nbsp;is&nbsp;{11,&nbsp;38,&nbsp;0,&nbsp;255}&nbsp;in&nbsp;RGB-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8178047">{</span><span class="string" id="8178048">&#34;ycbcr&#34;</span><span class="op" id="8178055">,</span>&nbsp;<span class="ident" id="8178057">vgradCr</span><span class="op" id="8178064">(</span><span class="op" id="8178065">)</span><span class="op" id="8178066">,</span>&nbsp;<span class="ident" id="8178068">fillAlpha</span><span class="op" id="8178077">(</span><span class="num" id="8178078">255</span><span class="op" id="8178081">)</span><span class="op" id="8178082">,</span>&nbsp;<span class="ident" id="8178084">Over</span><span class="op" id="8178088">,</span>&nbsp;<span class="ident" id="8178090">color</span><span class="op" id="8178095">.</span><span class="ident" id="8178096">RGBA</span><span class="op" id="8178100">{</span><span class="num" id="8178101">11</span><span class="op" id="8178103">,</span>&nbsp;<span class="num" id="8178105">38</span><span class="op" id="8178107">,</span>&nbsp;<span class="num" id="8178109">0</span><span class="op" id="8178110">,</span>&nbsp;<span class="num" id="8178112">255</span><span class="op" id="8178115">}</span><span class="op" id="8178116">}</span><span class="op" id="8178117">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8178120">{</span><span class="string" id="8178121">&#34;ycbcrSrc&#34;</span><span class="op" id="8178131">,</span>&nbsp;<span class="ident" id="8178133">vgradCr</span><span class="op" id="8178140">(</span><span class="op" id="8178141">)</span><span class="op" id="8178142">,</span>&nbsp;<span class="ident" id="8178144">fillAlpha</span><span class="op" id="8178153">(</span><span class="num" id="8178154">255</span><span class="op" id="8178157">)</span><span class="op" id="8178158">,</span>&nbsp;<span class="ident" id="8178160">Src</span><span class="op" id="8178163">,</span>&nbsp;<span class="ident" id="8178165">color</span><span class="op" id="8178170">.</span><span class="ident" id="8178171">RGBA</span><span class="op" id="8178175">{</span><span class="num" id="8178176">11</span><span class="op" id="8178178">,</span>&nbsp;<span class="num" id="8178180">38</span><span class="op" id="8178182">,</span>&nbsp;<span class="num" id="8178184">0</span><span class="op" id="8178185">,</span>&nbsp;<span class="num" id="8178187">255</span><span class="op" id="8178190">}</span><span class="op" id="8178191">}</span><span class="op" id="8178192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8178195">{</span><span class="string" id="8178196">&#34;ycbcrAlpha&#34;</span><span class="op" id="8178208">,</span>&nbsp;<span class="ident" id="8178210">vgradCr</span><span class="op" id="8178217">(</span><span class="op" id="8178218">)</span><span class="op" id="8178219">,</span>&nbsp;<span class="ident" id="8178221">fillAlpha</span><span class="op" id="8178230">(</span><span class="num" id="8178231">192</span><span class="op" id="8178234">)</span><span class="op" id="8178235">,</span>&nbsp;<span class="ident" id="8178237">Over</span><span class="op" id="8178241">,</span>&nbsp;<span class="ident" id="8178243">color</span><span class="op" id="8178248">.</span><span class="ident" id="8178249">RGBA</span><span class="op" id="8178253">{</span><span class="num" id="8178254">42</span><span class="op" id="8178256">,</span>&nbsp;<span class="num" id="8178258">28</span><span class="op" id="8178260">,</span>&nbsp;<span class="num" id="8178262">0</span><span class="op" id="8178263">,</span>&nbsp;<span class="num" id="8178265">255</span><span class="op" id="8178268">}</span><span class="op" id="8178269">}</span><span class="op" id="8178270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8178273">{</span><span class="string" id="8178274">&#34;ycbcrAlphaSrc&#34;</span><span class="op" id="8178289">,</span>&nbsp;<span class="ident" id="8178291">vgradCr</span><span class="op" id="8178298">(</span><span class="op" id="8178299">)</span><span class="op" id="8178300">,</span>&nbsp;<span class="ident" id="8178302">fillAlpha</span><span class="op" id="8178311">(</span><span class="num" id="8178312">192</span><span class="op" id="8178315">)</span><span class="op" id="8178316">,</span>&nbsp;<span class="ident" id="8178318">Src</span><span class="op" id="8178321">,</span>&nbsp;<span class="ident" id="8178323">color</span><span class="op" id="8178328">.</span><span class="ident" id="8178329">RGBA</span><span class="op" id="8178333">{</span><span class="num" id="8178334">8</span><span class="op" id="8178335">,</span>&nbsp;<span class="num" id="8178337">28</span><span class="op" id="8178339">,</span>&nbsp;<span class="num" id="8178341">0</span><span class="op" id="8178342">,</span>&nbsp;<span class="num" id="8178344">192</span><span class="op" id="8178347">}</span><span class="op" id="8178348">}</span><span class="op" id="8178349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8178352">{</span><span class="string" id="8178353">&#34;ycbcrNil&#34;</span><span class="op" id="8178363">,</span>&nbsp;<span class="ident" id="8178365">vgradCr</span><span class="op" id="8178372">(</span><span class="op" id="8178373">)</span><span class="op" id="8178374">,</span>&nbsp;<span class="ident" id="8178376">nil</span><span class="op" id="8178379">,</span>&nbsp;<span class="ident" id="8178381">Over</span><span class="op" id="8178385">,</span>&nbsp;<span class="ident" id="8178387">color</span><span class="op" id="8178392">.</span><span class="ident" id="8178393">RGBA</span><span class="op" id="8178397">{</span><span class="num" id="8178398">11</span><span class="op" id="8178400">,</span>&nbsp;<span class="num" id="8178402">38</span><span class="op" id="8178404">,</span>&nbsp;<span class="num" id="8178406">0</span><span class="op" id="8178407">,</span>&nbsp;<span class="num" id="8178409">255</span><span class="op" id="8178412">}</span><span class="op" id="8178413">}</span><span class="op" id="8178414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8178417">{</span><span class="string" id="8178418">&#34;ycbcrNilSrc&#34;</span><span class="op" id="8178431">,</span>&nbsp;<span class="ident" id="8178433">vgradCr</span><span class="op" id="8178440">(</span><span class="op" id="8178441">)</span><span class="op" id="8178442">,</span>&nbsp;<span class="ident" id="8178444">nil</span><span class="op" id="8178447">,</span>&nbsp;<span class="ident" id="8178449">Src</span><span class="op" id="8178452">,</span>&nbsp;<span class="ident" id="8178454">color</span><span class="op" id="8178459">.</span><span class="ident" id="8178460">RGBA</span><span class="op" id="8178464">{</span><span class="num" id="8178465">11</span><span class="op" id="8178467">,</span>&nbsp;<span class="num" id="8178469">38</span><span class="op" id="8178471">,</span>&nbsp;<span class="num" id="8178473">0</span><span class="op" id="8178474">,</span>&nbsp;<span class="num" id="8178476">255</span><span class="op" id="8178479">}</span><span class="op" id="8178480">}</span><span class="op" id="8178481">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8178484">//&nbsp;Variable&nbsp;mask&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8178523">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8178548">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8178595">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;255,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8178637">//&nbsp;The&nbsp;mask&nbsp;pixel&#39;s&nbsp;alpha&nbsp;is&nbsp;102,&nbsp;or&nbsp;40%.</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8178680">{</span><span class="string" id="8178681">&#34;generic&#34;</span><span class="op" id="8178690">,</span>&nbsp;<span class="ident" id="8178692">fillBlue</span><span class="op" id="8178700">(</span><span class="num" id="8178701">255</span><span class="op" id="8178704">)</span><span class="op" id="8178705">,</span>&nbsp;<span class="ident" id="8178707">vgradAlpha</span><span class="op" id="8178717">(</span><span class="num" id="8178718">192</span><span class="op" id="8178721">)</span><span class="op" id="8178722">,</span>&nbsp;<span class="ident" id="8178724">Over</span><span class="op" id="8178728">,</span>&nbsp;<span class="ident" id="8178730">color</span><span class="op" id="8178735">.</span><span class="ident" id="8178736">RGBA</span><span class="op" id="8178740">{</span><span class="num" id="8178741">81</span><span class="op" id="8178743">,</span>&nbsp;<span class="num" id="8178745">0</span><span class="op" id="8178746">,</span>&nbsp;<span class="num" id="8178748">102</span><span class="op" id="8178751">,</span>&nbsp;<span class="num" id="8178753">255</span><span class="op" id="8178756">}</span><span class="op" id="8178757">}</span><span class="op" id="8178758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8178761">{</span><span class="string" id="8178762">&#34;genericSrc&#34;</span><span class="op" id="8178774">,</span>&nbsp;<span class="ident" id="8178776">fillBlue</span><span class="op" id="8178784">(</span><span class="num" id="8178785">255</span><span class="op" id="8178788">)</span><span class="op" id="8178789">,</span>&nbsp;<span class="ident" id="8178791">vgradAlpha</span><span class="op" id="8178801">(</span><span class="num" id="8178802">192</span><span class="op" id="8178805">)</span><span class="op" id="8178806">,</span>&nbsp;<span class="ident" id="8178808">Src</span><span class="op" id="8178811">,</span>&nbsp;<span class="ident" id="8178813">color</span><span class="op" id="8178818">.</span><span class="ident" id="8178819">RGBA</span><span class="op" id="8178823">{</span><span class="num" id="8178824">0</span><span class="op" id="8178825">,</span>&nbsp;<span class="num" id="8178827">0</span><span class="op" id="8178828">,</span>&nbsp;<span class="num" id="8178830">102</span><span class="op" id="8178833">,</span>&nbsp;<span class="num" id="8178835">102</span><span class="op" id="8178838">}</span><span class="op" id="8178839">}</span><span class="op" id="8178840">,</span><br>
<span class="lineno"></span><span class="op" id="8178842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8178845">func</span>&nbsp;<span class="ident" id="8178850">makeGolden</span><span class="op" id="8178860">(</span><span class="ident" id="8178861">dst</span>&nbsp;<span class="ident" id="8178865">image</span><span class="op" id="8178870">.</span><span class="ident" id="8178871">Image</span><span class="op" id="8178876">,</span>&nbsp;<span class="ident" id="8178878">r</span>&nbsp;<span class="ident" id="8178880">image</span><span class="op" id="8178885">.</span><span class="ident" id="8178886">Rectangle</span><span class="op" id="8178895">,</span>&nbsp;<span class="ident" id="8178897">src</span>&nbsp;<span class="ident" id="8178901">image</span><span class="op" id="8178906">.</span><span class="ident" id="8178907">Image</span><span class="op" id="8178912">,</span>&nbsp;<span class="ident" id="8178914">sp</span>&nbsp;<span class="ident" id="8178917">image</span><span class="op" id="8178922">.</span><span class="ident" id="8178923">Point</span><span class="op" id="8178928">,</span>&nbsp;<span class="ident" id="8178930">mask</span>&nbsp;<span class="ident" id="8178935">image</span><span class="op" id="8178940">.</span><span class="ident" id="8178941">Image</span><span class="op" id="8178946">,</span>&nbsp;<span class="ident" id="8178948">mp</span>&nbsp;<span class="ident" id="8178951">image</span><span class="op" id="8178956">.</span><span class="ident" id="8178957">Point</span><span class="op" id="8178962">,</span>&nbsp;<span class="ident" id="8178964">op</span>&nbsp;<span class="ident" id="8178967">Op</span><span class="op" id="8178969">)</span>&nbsp;<span class="ident" id="8178971">image</span><span class="op" id="8178976">.</span><span class="ident" id="8178977">Image</span>&nbsp;<span class="op" id="8178983">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8178986">//&nbsp;Since&nbsp;golden&nbsp;is&nbsp;a&nbsp;newly&nbsp;allocated&nbsp;image,&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;check&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8179061">//&nbsp;input&nbsp;source&nbsp;and&nbsp;mask&nbsp;images&nbsp;and&nbsp;the&nbsp;output&nbsp;golden&nbsp;image&nbsp;overlap.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179131">b</span>&nbsp;<span class="op" id="8179133">:=</span>&nbsp;<span class="ident" id="8179136">dst</span><span class="op" id="8179139">.</span><span class="ident" id="8179140">Bounds</span><span class="op" id="8179146">(</span><span class="op" id="8179147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179150">sb</span>&nbsp;<span class="op" id="8179153">:=</span>&nbsp;<span class="ident" id="8179156">src</span><span class="op" id="8179159">.</span><span class="ident" id="8179160">Bounds</span><span class="op" id="8179166">(</span><span class="op" id="8179167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179170">mb</span>&nbsp;<span class="op" id="8179173">:=</span>&nbsp;<span class="ident" id="8179176">image</span><span class="op" id="8179181">.</span><span class="ident" id="8179182">Rect</span><span class="op" id="8179186">(</span><span class="op" id="8179187">-</span><span class="num" id="8179188">1e9</span><span class="op" id="8179191">,</span>&nbsp;<span class="op" id="8179193">-</span><span class="num" id="8179194">1e9</span><span class="op" id="8179197">,</span>&nbsp;<span class="num" id="8179199">1e9</span><span class="op" id="8179202">,</span>&nbsp;<span class="num" id="8179204">1e9</span><span class="op" id="8179207">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8179210">if</span>&nbsp;<span class="ident" id="8179213">mask</span>&nbsp;<span class="op" id="8179218">!=</span>&nbsp;<span class="ident" id="8179221">nil</span>&nbsp;<span class="op" id="8179225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179229">mb</span>&nbsp;<span class="op" id="8179232">=</span>&nbsp;<span class="ident" id="8179234">mask</span><span class="op" id="8179238">.</span><span class="ident" id="8179239">Bounds</span><span class="op" id="8179245">(</span><span class="op" id="8179246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8179249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179252">golden</span>&nbsp;<span class="op" id="8179259">:=</span>&nbsp;<span class="ident" id="8179262">image</span><span class="op" id="8179267">.</span><span class="ident" id="8179268">NewRGBA</span><span class="op" id="8179275">(</span><span class="ident" id="8179276">image</span><span class="op" id="8179281">.</span><span class="ident" id="8179282">Rect</span><span class="op" id="8179286">(</span><span class="num" id="8179287">0</span><span class="op" id="8179288">,</span>&nbsp;<span class="num" id="8179290">0</span><span class="op" id="8179291">,</span>&nbsp;<span class="ident" id="8179293">b</span><span class="op" id="8179294">.</span><span class="ident" id="8179295">Max</span><span class="op" id="8179298">.</span><span class="ident" id="8179299">X</span><span class="op" id="8179300">,</span>&nbsp;<span class="ident" id="8179302">b</span><span class="op" id="8179303">.</span><span class="ident" id="8179304">Max</span><span class="op" id="8179307">.</span><span class="ident" id="8179308">Y</span><span class="op" id="8179309">)</span><span class="op" id="8179310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8179313">for</span>&nbsp;<span class="ident" id="8179317">y</span>&nbsp;<span class="op" id="8179319">:=</span>&nbsp;<span class="ident" id="8179322">r</span><span class="op" id="8179323">.</span><span class="ident" id="8179324">Min</span><span class="op" id="8179327">.</span><span class="ident" id="8179328">Y</span><span class="op" id="8179329">;</span>&nbsp;<span class="ident" id="8179331">y</span>&nbsp;<span class="op" id="8179333">&lt;</span>&nbsp;<span class="ident" id="8179335">r</span><span class="op" id="8179336">.</span><span class="ident" id="8179337">Max</span><span class="op" id="8179340">.</span><span class="ident" id="8179341">Y</span><span class="op" id="8179342">;</span>&nbsp;<span class="ident" id="8179344">y</span><span class="op" id="8179345">++</span>&nbsp;<span class="op" id="8179348">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179352">sy</span>&nbsp;<span class="op" id="8179355">:=</span>&nbsp;<span class="ident" id="8179358">y</span>&nbsp;<span class="op" id="8179360">+</span>&nbsp;<span class="ident" id="8179362">sp</span><span class="op" id="8179364">.</span><span class="ident" id="8179365">Y</span>&nbsp;<span class="op" id="8179367">-</span>&nbsp;<span class="ident" id="8179369">r</span><span class="op" id="8179370">.</span><span class="ident" id="8179371">Min</span><span class="op" id="8179374">.</span><span class="ident" id="8179375">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179379">my</span>&nbsp;<span class="op" id="8179382">:=</span>&nbsp;<span class="ident" id="8179385">y</span>&nbsp;<span class="op" id="8179387">+</span>&nbsp;<span class="ident" id="8179389">mp</span><span class="op" id="8179391">.</span><span class="ident" id="8179392">Y</span>&nbsp;<span class="op" id="8179394">-</span>&nbsp;<span class="ident" id="8179396">r</span><span class="op" id="8179397">.</span><span class="ident" id="8179398">Min</span><span class="op" id="8179401">.</span><span class="ident" id="8179402">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8179406">for</span>&nbsp;<span class="ident" id="8179410">x</span>&nbsp;<span class="op" id="8179412">:=</span>&nbsp;<span class="ident" id="8179415">r</span><span class="op" id="8179416">.</span><span class="ident" id="8179417">Min</span><span class="op" id="8179420">.</span><span class="ident" id="8179421">X</span><span class="op" id="8179422">;</span>&nbsp;<span class="ident" id="8179424">x</span>&nbsp;<span class="op" id="8179426">&lt;</span>&nbsp;<span class="ident" id="8179428">r</span><span class="op" id="8179429">.</span><span class="ident" id="8179430">Max</span><span class="op" id="8179433">.</span><span class="ident" id="8179434">X</span><span class="op" id="8179435">;</span>&nbsp;<span class="ident" id="8179437">x</span><span class="op" id="8179438">++</span>&nbsp;<span class="op" id="8179441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8179446">if</span>&nbsp;<span class="op" id="8179449">!</span><span class="op" id="8179450">(</span><span class="ident" id="8179451">image</span><span class="op" id="8179456">.</span><span class="ident" id="8179457">Pt</span><span class="op" id="8179459">(</span><span class="ident" id="8179460">x</span><span class="op" id="8179461">,</span>&nbsp;<span class="ident" id="8179463">y</span><span class="op" id="8179464">)</span><span class="op" id="8179465">.</span><span class="ident" id="8179466">In</span><span class="op" id="8179468">(</span><span class="ident" id="8179469">b</span><span class="op" id="8179470">)</span><span class="op" id="8179471">)</span>&nbsp;<span class="op" id="8179473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8179479">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8179491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179496">sx</span>&nbsp;<span class="op" id="8179499">:=</span>&nbsp;<span class="ident" id="8179502">x</span>&nbsp;<span class="op" id="8179504">+</span>&nbsp;<span class="ident" id="8179506">sp</span><span class="op" id="8179508">.</span><span class="ident" id="8179509">X</span>&nbsp;<span class="op" id="8179511">-</span>&nbsp;<span class="ident" id="8179513">r</span><span class="op" id="8179514">.</span><span class="ident" id="8179515">Min</span><span class="op" id="8179518">.</span><span class="ident" id="8179519">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8179524">if</span>&nbsp;<span class="op" id="8179527">!</span><span class="op" id="8179528">(</span><span class="ident" id="8179529">image</span><span class="op" id="8179534">.</span><span class="ident" id="8179535">Pt</span><span class="op" id="8179537">(</span><span class="ident" id="8179538">sx</span><span class="op" id="8179540">,</span>&nbsp;<span class="ident" id="8179542">sy</span><span class="op" id="8179544">)</span><span class="op" id="8179545">.</span><span class="ident" id="8179546">In</span><span class="op" id="8179548">(</span><span class="ident" id="8179549">sb</span><span class="op" id="8179551">)</span><span class="op" id="8179552">)</span>&nbsp;<span class="op" id="8179554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8179560">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8179572">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179577">mx</span>&nbsp;<span class="op" id="8179580">:=</span>&nbsp;<span class="ident" id="8179583">x</span>&nbsp;<span class="op" id="8179585">+</span>&nbsp;<span class="ident" id="8179587">mp</span><span class="op" id="8179589">.</span><span class="ident" id="8179590">X</span>&nbsp;<span class="op" id="8179592">-</span>&nbsp;<span class="ident" id="8179594">r</span><span class="op" id="8179595">.</span><span class="ident" id="8179596">Min</span><span class="op" id="8179599">.</span><span class="ident" id="8179600">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8179605">if</span>&nbsp;<span class="op" id="8179608">!</span><span class="op" id="8179609">(</span><span class="ident" id="8179610">image</span><span class="op" id="8179615">.</span><span class="ident" id="8179616">Pt</span><span class="op" id="8179618">(</span><span class="ident" id="8179619">mx</span><span class="op" id="8179621">,</span>&nbsp;<span class="ident" id="8179623">my</span><span class="op" id="8179625">)</span><span class="op" id="8179626">.</span><span class="ident" id="8179627">In</span><span class="op" id="8179629">(</span><span class="ident" id="8179630">mb</span><span class="op" id="8179632">)</span><span class="op" id="8179633">)</span>&nbsp;<span class="op" id="8179635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8179641">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8179653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8179659">const</span>&nbsp;<span class="ident" id="8179665">M</span>&nbsp;<span class="op" id="8179667">=</span>&nbsp;<span class="num" id="8179669">1</span><span class="op" id="8179670">&lt;&lt;</span><span class="num" id="8179672">16</span>&nbsp;<span class="op" id="8179675">-</span>&nbsp;<span class="num" id="8179677">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8179682">var</span>&nbsp;<span class="ident" id="8179686">dr</span><span class="op" id="8179688">,</span>&nbsp;<span class="ident" id="8179690">dg</span><span class="op" id="8179692">,</span>&nbsp;<span class="ident" id="8179694">db</span><span class="op" id="8179696">,</span>&nbsp;<span class="ident" id="8179698">da</span>&nbsp;<span class="builtintype" id="8179701">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8179711">if</span>&nbsp;<span class="ident" id="8179714">op</span>&nbsp;<span class="op" id="8179717">==</span>&nbsp;<span class="ident" id="8179720">Over</span>&nbsp;<span class="op" id="8179725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179731">dr</span><span class="op" id="8179733">,</span>&nbsp;<span class="ident" id="8179735">dg</span><span class="op" id="8179737">,</span>&nbsp;<span class="ident" id="8179739">db</span><span class="op" id="8179741">,</span>&nbsp;<span class="ident" id="8179743">da</span>&nbsp;<span class="op" id="8179746">=</span>&nbsp;<span class="ident" id="8179748">dst</span><span class="op" id="8179751">.</span><span class="ident" id="8179752">At</span><span class="op" id="8179754">(</span><span class="ident" id="8179755">x</span><span class="op" id="8179756">,</span>&nbsp;<span class="ident" id="8179758">y</span><span class="op" id="8179759">)</span><span class="op" id="8179760">.</span><span class="ident" id="8179761">RGBA</span><span class="op" id="8179765">(</span><span class="op" id="8179766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8179771">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179776">sr</span><span class="op" id="8179778">,</span>&nbsp;<span class="ident" id="8179780">sg</span><span class="op" id="8179782">,</span>&nbsp;<span class="ident" id="8179784">sb</span><span class="op" id="8179786">,</span>&nbsp;<span class="ident" id="8179788">sa</span>&nbsp;<span class="op" id="8179791">:=</span>&nbsp;<span class="ident" id="8179794">src</span><span class="op" id="8179797">.</span><span class="ident" id="8179798">At</span><span class="op" id="8179800">(</span><span class="ident" id="8179801">sx</span><span class="op" id="8179803">,</span>&nbsp;<span class="ident" id="8179805">sy</span><span class="op" id="8179807">)</span><span class="op" id="8179808">.</span><span class="ident" id="8179809">RGBA</span><span class="op" id="8179813">(</span><span class="op" id="8179814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179819">ma</span>&nbsp;<span class="op" id="8179822">:=</span>&nbsp;<span class="builtintype" id="8179825">uint32</span><span class="op" id="8179831">(</span><span class="ident" id="8179832">M</span><span class="op" id="8179833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8179838">if</span>&nbsp;<span class="ident" id="8179841">mask</span>&nbsp;<span class="op" id="8179846">!=</span>&nbsp;<span class="ident" id="8179849">nil</span>&nbsp;<span class="op" id="8179853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179859">_</span><span class="op" id="8179860">,</span>&nbsp;<span class="ident" id="8179862">_</span><span class="op" id="8179863">,</span>&nbsp;<span class="ident" id="8179865">_</span><span class="op" id="8179866">,</span>&nbsp;<span class="ident" id="8179868">ma</span>&nbsp;<span class="op" id="8179871">=</span>&nbsp;<span class="ident" id="8179873">mask</span><span class="op" id="8179877">.</span><span class="ident" id="8179878">At</span><span class="op" id="8179880">(</span><span class="ident" id="8179881">mx</span><span class="op" id="8179883">,</span>&nbsp;<span class="ident" id="8179885">my</span><span class="op" id="8179887">)</span><span class="op" id="8179888">.</span><span class="ident" id="8179889">RGBA</span><span class="op" id="8179893">(</span><span class="op" id="8179894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8179899">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179904">a</span>&nbsp;<span class="op" id="8179906">:=</span>&nbsp;<span class="ident" id="8179909">M</span>&nbsp;<span class="op" id="8179911">-</span>&nbsp;<span class="op" id="8179913">(</span><span class="ident" id="8179914">sa</span>&nbsp;<span class="op" id="8179917">*</span>&nbsp;<span class="ident" id="8179919">ma</span>&nbsp;<span class="op" id="8179922">/</span>&nbsp;<span class="ident" id="8179924">M</span><span class="op" id="8179925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179930">golden</span><span class="op" id="8179936">.</span><span class="ident" id="8179937">Set</span><span class="op" id="8179940">(</span><span class="ident" id="8179941">x</span><span class="op" id="8179942">,</span>&nbsp;<span class="ident" id="8179944">y</span><span class="op" id="8179945">,</span>&nbsp;<span class="ident" id="8179947">color</span><span class="op" id="8179952">.</span><span class="ident" id="8179953">RGBA64</span><span class="op" id="8179959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8179965">uint16</span><span class="op" id="8179971">(</span><span class="op" id="8179972">(</span><span class="ident" id="8179973">dr</span><span class="op" id="8179975">*</span><span class="ident" id="8179976">a</span>&nbsp;<span class="op" id="8179978">+</span>&nbsp;<span class="ident" id="8179980">sr</span><span class="op" id="8179982">*</span><span class="ident" id="8179983">ma</span><span class="op" id="8179985">)</span>&nbsp;<span class="op" id="8179987">/</span>&nbsp;<span class="ident" id="8179989">M</span><span class="op" id="8179990">)</span><span class="op" id="8179991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8179997">uint16</span><span class="op" id="8180003">(</span><span class="op" id="8180004">(</span><span class="ident" id="8180005">dg</span><span class="op" id="8180007">*</span><span class="ident" id="8180008">a</span>&nbsp;<span class="op" id="8180010">+</span>&nbsp;<span class="ident" id="8180012">sg</span><span class="op" id="8180014">*</span><span class="ident" id="8180015">ma</span><span class="op" id="8180017">)</span>&nbsp;<span class="op" id="8180019">/</span>&nbsp;<span class="ident" id="8180021">M</span><span class="op" id="8180022">)</span><span class="op" id="8180023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8180029">uint16</span><span class="op" id="8180035">(</span><span class="op" id="8180036">(</span><span class="ident" id="8180037">db</span><span class="op" id="8180039">*</span><span class="ident" id="8180040">a</span>&nbsp;<span class="op" id="8180042">+</span>&nbsp;<span class="ident" id="8180044">sb</span><span class="op" id="8180046">*</span><span class="ident" id="8180047">ma</span><span class="op" id="8180049">)</span>&nbsp;<span class="op" id="8180051">/</span>&nbsp;<span class="ident" id="8180053">M</span><span class="op" id="8180054">)</span><span class="op" id="8180055">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8180061">uint16</span><span class="op" id="8180067">(</span><span class="op" id="8180068">(</span><span class="ident" id="8180069">da</span><span class="op" id="8180071">*</span><span class="ident" id="8180072">a</span>&nbsp;<span class="op" id="8180074">+</span>&nbsp;<span class="ident" id="8180076">sa</span><span class="op" id="8180078">*</span><span class="ident" id="8180079">ma</span><span class="op" id="8180081">)</span>&nbsp;<span class="op" id="8180083">/</span>&nbsp;<span class="ident" id="8180085">M</span><span class="op" id="8180086">)</span><span class="op" id="8180087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8180092">}</span><span class="op" id="8180093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8180097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8180100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8180103">return</span>&nbsp;<span class="ident" id="8180110">golden</span><span class="op" id="8180116">.</span><span class="ident" id="8180117">SubImage</span><span class="op" id="8180125">(</span><span class="ident" id="8180126">b</span><span class="op" id="8180127">)</span><br>
<span class="lineno">205</span><span class="op" id="8180129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8180132">func</span>&nbsp;<span class="ident" id="8180137">TestDraw</span><span class="op" id="8180145">(</span><span class="ident" id="8180146">t</span>&nbsp;<span class="op" id="8180148">*</span><span class="ident" id="8180149">testing</span><span class="op" id="8180156">.</span><span class="ident" id="8180157">T</span><span class="op" id="8180158">)</span>&nbsp;<span class="op" id="8180160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8180163">rr</span>&nbsp;<span class="op" id="8180166">:=</span>&nbsp;<span class="op" id="8180169">[</span><span class="op" id="8180170">]</span><span class="ident" id="8180171">image</span><span class="op" id="8180176">.</span><span class="ident" id="8180177">Rectangle</span><span class="op" id="8180186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8180190">image</span><span class="op" id="8180195">.</span><span class="ident" id="8180196">Rect</span><span class="op" id="8180200">(</span><span class="num" id="8180201">0</span><span class="op" id="8180202">,</span>&nbsp;<span class="num" id="8180204">0</span><span class="op" id="8180205">,</span>&nbsp;<span class="num" id="8180207">0</span><span class="op" id="8180208">,</span>&nbsp;<span class="num" id="8180210">0</span><span class="op" id="8180211">)</span><span class="op" id="8180212">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8180216">image</span><span class="op" id="8180221">.</span><span class="ident" id="8180222">Rect</span><span class="op" id="8180226">(</span><span class="num" id="8180227">0</span><span class="op" id="8180228">,</span>&nbsp;<span class="num" id="8180230">0</span><span class="op" id="8180231">,</span>&nbsp;<span class="num" id="8180233">16</span><span class="op" id="8180235">,</span>&nbsp;<span class="num" id="8180237">16</span><span class="op" id="8180239">)</span><span class="op" id="8180240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8180244">image</span><span class="op" id="8180249">.</span><span class="ident" id="8180250">Rect</span><span class="op" id="8180254">(</span><span class="num" id="8180255">3</span><span class="op" id="8180256">,</span>&nbsp;<span class="num" id="8180258">5</span><span class="op" id="8180259">,</span>&nbsp;<span class="num" id="8180261">12</span><span class="op" id="8180263">,</span>&nbsp;<span class="num" id="8180265">10</span><span class="op" id="8180267">)</span><span class="op" id="8180268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8180272">image</span><span class="op" id="8180277">.</span><span class="ident" id="8180278">Rect</span><span class="op" id="8180282">(</span><span class="num" id="8180283">0</span><span class="op" id="8180284">,</span>&nbsp;<span class="num" id="8180286">0</span><span class="op" id="8180287">,</span>&nbsp;<span class="num" id="8180289">9</span><span class="op" id="8180290">,</span>&nbsp;<span class="num" id="8180292">9</span><span class="op" id="8180293">)</span><span class="op" id="8180294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8180298">image</span><span class="op" id="8180303">.</span><span class="ident" id="8180304">Rect</span><span class="op" id="8180308">(</span><span class="num" id="8180309">8</span><span class="op" id="8180310">,</span>&nbsp;<span class="num" id="8180312">8</span><span class="op" id="8180313">,</span>&nbsp;<span class="num" id="8180315">16</span><span class="op" id="8180317">,</span>&nbsp;<span class="num" id="8180319">16</span><span class="op" id="8180321">)</span><span class="op" id="8180322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8180326">image</span><span class="op" id="8180331">.</span><span class="ident" id="8180332">Rect</span><span class="op" id="8180336">(</span><span class="num" id="8180337">8</span><span class="op" id="8180338">,</span>&nbsp;<span class="num" id="8180340">0</span><span class="op" id="8180341">,</span>&nbsp;<span class="num" id="8180343">9</span><span class="op" id="8180344">,</span>&nbsp;<span class="num" id="8180346">16</span><span class="op" id="8180348">)</span><span class="op" id="8180349">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8180353">image</span><span class="op" id="8180358">.</span><span class="ident" id="8180359">Rect</span><span class="op" id="8180363">(</span><span class="num" id="8180364">0</span><span class="op" id="8180365">,</span>&nbsp;<span class="num" id="8180367">8</span><span class="op" id="8180368">,</span>&nbsp;<span class="num" id="8180370">16</span><span class="op" id="8180372">,</span>&nbsp;<span class="num" id="8180374">9</span><span class="op" id="8180375">)</span><span class="op" id="8180376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8180380">image</span><span class="op" id="8180385">.</span><span class="ident" id="8180386">Rect</span><span class="op" id="8180390">(</span><span class="num" id="8180391">8</span><span class="op" id="8180392">,</span>&nbsp;<span class="num" id="8180394">8</span><span class="op" id="8180395">,</span>&nbsp;<span class="num" id="8180397">9</span><span class="op" id="8180398">,</span>&nbsp;<span class="num" id="8180400">9</span><span class="op" id="8180401">)</span><span class="op" id="8180402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8180406">image</span><span class="op" id="8180411">.</span><span class="ident" id="8180412">Rect</span><span class="op" id="8180416">(</span><span class="num" id="8180417">8</span><span class="op" id="8180418">,</span>&nbsp;<span class="num" id="8180420">8</span><span class="op" id="8180421">,</span>&nbsp;<span class="num" id="8180423">8</span><span class="op" id="8180424">,</span>&nbsp;<span class="num" id="8180426">8</span><span class="op" id="8180427">)</span><span class="op" id="8180428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8180431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8180434">for</span>&nbsp;<span class="ident" id="8180438">_</span><span class="op" id="8180439">,</span>&nbsp;<span class="ident" id="8180441">r</span>&nbsp;<span class="op" id="8180443">:=</span>&nbsp;<span class="keyword" id="8180446">range</span>&nbsp;<span class="ident" id="8180452">rr</span>&nbsp;<span class="op" id="8180455">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8180458">loop</span><span class="op" id="8180462">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8180466">for</span>&nbsp;<span class="ident" id="8180470">_</span><span class="op" id="8180471">,</span>&nbsp;<span class="ident" id="8180473">test</span>&nbsp;<span class="op" id="8180478">:=</span>&nbsp;<span class="keyword" id="8180481">range</span>&nbsp;<span class="ident" id="8180487">drawTests</span>&nbsp;<span class="op" id="8180497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8180502">dst</span>&nbsp;<span class="op" id="8180506">:=</span>&nbsp;<span class="ident" id="8180509">hgradRed</span><span class="op" id="8180517">(</span><span class="num" id="8180518">255</span><span class="op" id="8180521">)</span><span class="op" id="8180522">.</span><span class="op" id="8180523">(</span><span class="op" id="8180524">*</span><span class="ident" id="8180525">image</span><span class="op" id="8180530">.</span><span class="ident" id="8180531">RGBA</span><span class="op" id="8180535">)</span><span class="op" id="8180536">.</span><span class="ident" id="8180537">SubImage</span><span class="op" id="8180545">(</span><span class="ident" id="8180546">r</span><span class="op" id="8180547">)</span><span class="op" id="8180548">.</span><span class="op" id="8180549">(</span><span class="ident" id="8180550">Image</span><span class="op" id="8180555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8180560">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8180661">golden</span>&nbsp;<span class="op" id="8180668">:=</span>&nbsp;<span class="ident" id="8180671">makeGolden</span><span class="op" id="8180681">(</span><span class="ident" id="8180682">dst</span><span class="op" id="8180685">,</span>&nbsp;<span class="ident" id="8180687">image</span><span class="op" id="8180692">.</span><span class="ident" id="8180693">Rect</span><span class="op" id="8180697">(</span><span class="num" id="8180698">0</span><span class="op" id="8180699">,</span>&nbsp;<span class="num" id="8180701">0</span><span class="op" id="8180702">,</span>&nbsp;<span class="num" id="8180704">16</span><span class="op" id="8180706">,</span>&nbsp;<span class="num" id="8180708">16</span><span class="op" id="8180710">)</span><span class="op" id="8180711">,</span>&nbsp;<span class="ident" id="8180713">test</span><span class="op" id="8180717">.</span><span class="ident" id="8180718">src</span><span class="op" id="8180721">,</span>&nbsp;<span class="ident" id="8180723">image</span><span class="op" id="8180728">.</span><span class="ident" id="8180729">ZP</span><span class="op" id="8180731">,</span>&nbsp;<span class="ident" id="8180733">test</span><span class="op" id="8180737">.</span><span class="ident" id="8180738">mask</span><span class="op" id="8180742">,</span>&nbsp;<span class="ident" id="8180744">image</span><span class="op" id="8180749">.</span><span class="ident" id="8180750">ZP</span><span class="op" id="8180752">,</span>&nbsp;<span class="ident" id="8180754">test</span><span class="op" id="8180758">.</span><span class="ident" id="8180759">op</span><span class="op" id="8180761">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8180766">b</span>&nbsp;<span class="op" id="8180768">:=</span>&nbsp;<span class="ident" id="8180771">dst</span><span class="op" id="8180774">.</span><span class="ident" id="8180775">Bounds</span><span class="op" id="8180781">(</span><span class="op" id="8180782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8180787">if</span>&nbsp;<span class="op" id="8180790">!</span><span class="ident" id="8180791">b</span><span class="op" id="8180792">.</span><span class="ident" id="8180793">Eq</span><span class="op" id="8180795">(</span><span class="ident" id="8180796">golden</span><span class="op" id="8180802">.</span><span class="ident" id="8180803">Bounds</span><span class="op" id="8180809">(</span><span class="op" id="8180810">)</span><span class="op" id="8180811">)</span>&nbsp;<span class="op" id="8180813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8180819">t</span><span class="op" id="8180820">.</span><span class="ident" id="8180821">Errorf</span><span class="op" id="8180827">(</span><span class="string" id="8180828">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="8180861">,</span>&nbsp;<span class="ident" id="8180863">r</span><span class="op" id="8180864">,</span>&nbsp;<span class="ident" id="8180866">test</span><span class="op" id="8180870">.</span><span class="ident" id="8180871">desc</span><span class="op" id="8180875">,</span>&nbsp;<span class="ident" id="8180877">dst</span><span class="op" id="8180880">.</span><span class="ident" id="8180881">Bounds</span><span class="op" id="8180887">(</span><span class="op" id="8180888">)</span><span class="op" id="8180889">,</span>&nbsp;<span class="ident" id="8180891">golden</span><span class="op" id="8180897">.</span><span class="ident" id="8180898">Bounds</span><span class="op" id="8180904">(</span><span class="op" id="8180905">)</span><span class="op" id="8180906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8180912">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8180924">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8180929">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8181026">DrawMask</span><span class="op" id="8181034">(</span><span class="ident" id="8181035">dst</span><span class="op" id="8181038">,</span>&nbsp;<span class="ident" id="8181040">image</span><span class="op" id="8181045">.</span><span class="ident" id="8181046">Rect</span><span class="op" id="8181050">(</span><span class="num" id="8181051">0</span><span class="op" id="8181052">,</span>&nbsp;<span class="num" id="8181054">0</span><span class="op" id="8181055">,</span>&nbsp;<span class="num" id="8181057">16</span><span class="op" id="8181059">,</span>&nbsp;<span class="num" id="8181061">16</span><span class="op" id="8181063">)</span><span class="op" id="8181064">,</span>&nbsp;<span class="ident" id="8181066">test</span><span class="op" id="8181070">.</span><span class="ident" id="8181071">src</span><span class="op" id="8181074">,</span>&nbsp;<span class="ident" id="8181076">image</span><span class="op" id="8181081">.</span><span class="ident" id="8181082">ZP</span><span class="op" id="8181084">,</span>&nbsp;<span class="ident" id="8181086">test</span><span class="op" id="8181090">.</span><span class="ident" id="8181091">mask</span><span class="op" id="8181095">,</span>&nbsp;<span class="ident" id="8181097">image</span><span class="op" id="8181102">.</span><span class="ident" id="8181103">ZP</span><span class="op" id="8181105">,</span>&nbsp;<span class="ident" id="8181107">test</span><span class="op" id="8181111">.</span><span class="ident" id="8181112">op</span><span class="op" id="8181114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8181119">if</span>&nbsp;<span class="ident" id="8181122">image</span><span class="op" id="8181127">.</span><span class="ident" id="8181128">Pt</span><span class="op" id="8181130">(</span><span class="num" id="8181131">8</span><span class="op" id="8181132">,</span>&nbsp;<span class="num" id="8181134">8</span><span class="op" id="8181135">)</span><span class="op" id="8181136">.</span><span class="ident" id="8181137">In</span><span class="op" id="8181139">(</span><span class="ident" id="8181140">r</span><span class="op" id="8181141">)</span>&nbsp;<span class="op" id="8181143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8181149">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;pixel&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;matches&nbsp;what&nbsp;we&nbsp;expect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8181220">//&nbsp;(the&nbsp;expected&nbsp;value&nbsp;can&nbsp;be&nbsp;verified&nbsp;by&nbsp;hand).</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8181273">if</span>&nbsp;<span class="op" id="8181276">!</span><span class="ident" id="8181277">eq</span><span class="op" id="8181279">(</span><span class="ident" id="8181280">dst</span><span class="op" id="8181283">.</span><span class="ident" id="8181284">At</span><span class="op" id="8181286">(</span><span class="num" id="8181287">8</span><span class="op" id="8181288">,</span>&nbsp;<span class="num" id="8181290">8</span><span class="op" id="8181291">)</span><span class="op" id="8181292">,</span>&nbsp;<span class="ident" id="8181294">test</span><span class="op" id="8181298">.</span><span class="ident" id="8181299">expected</span><span class="op" id="8181307">)</span>&nbsp;<span class="op" id="8181309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8181316">t</span><span class="op" id="8181317">.</span><span class="ident" id="8181318">Errorf</span><span class="op" id="8181324">(</span><span class="string" id="8181325">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="8181361">,</span>&nbsp;<span class="ident" id="8181363">r</span><span class="op" id="8181364">,</span>&nbsp;<span class="ident" id="8181366">test</span><span class="op" id="8181370">.</span><span class="ident" id="8181371">desc</span><span class="op" id="8181375">,</span>&nbsp;<span class="ident" id="8181377">dst</span><span class="op" id="8181380">.</span><span class="ident" id="8181381">At</span><span class="op" id="8181383">(</span><span class="num" id="8181384">8</span><span class="op" id="8181385">,</span>&nbsp;<span class="num" id="8181387">8</span><span class="op" id="8181388">)</span><span class="op" id="8181389">,</span>&nbsp;<span class="ident" id="8181391">test</span><span class="op" id="8181395">.</span><span class="ident" id="8181396">expected</span><span class="op" id="8181404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8181411">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8181424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8181429">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8181434">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8181502">for</span>&nbsp;<span class="ident" id="8181506">y</span>&nbsp;<span class="op" id="8181508">:=</span>&nbsp;<span class="ident" id="8181511">b</span><span class="op" id="8181512">.</span><span class="ident" id="8181513">Min</span><span class="op" id="8181516">.</span><span class="ident" id="8181517">Y</span><span class="op" id="8181518">;</span>&nbsp;<span class="ident" id="8181520">y</span>&nbsp;<span class="op" id="8181522">&lt;</span>&nbsp;<span class="ident" id="8181524">b</span><span class="op" id="8181525">.</span><span class="ident" id="8181526">Max</span><span class="op" id="8181529">.</span><span class="ident" id="8181530">Y</span><span class="op" id="8181531">;</span>&nbsp;<span class="ident" id="8181533">y</span><span class="op" id="8181534">++</span>&nbsp;<span class="op" id="8181537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8181543">for</span>&nbsp;<span class="ident" id="8181547">x</span>&nbsp;<span class="op" id="8181549">:=</span>&nbsp;<span class="ident" id="8181552">b</span><span class="op" id="8181553">.</span><span class="ident" id="8181554">Min</span><span class="op" id="8181557">.</span><span class="ident" id="8181558">X</span><span class="op" id="8181559">;</span>&nbsp;<span class="ident" id="8181561">x</span>&nbsp;<span class="op" id="8181563">&lt;</span>&nbsp;<span class="ident" id="8181565">b</span><span class="op" id="8181566">.</span><span class="ident" id="8181567">Max</span><span class="op" id="8181570">.</span><span class="ident" id="8181571">X</span><span class="op" id="8181572">;</span>&nbsp;<span class="ident" id="8181574">x</span><span class="op" id="8181575">++</span>&nbsp;<span class="op" id="8181578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8181585">if</span>&nbsp;<span class="op" id="8181588">!</span><span class="ident" id="8181589">eq</span><span class="op" id="8181591">(</span><span class="ident" id="8181592">dst</span><span class="op" id="8181595">.</span><span class="ident" id="8181596">At</span><span class="op" id="8181598">(</span><span class="ident" id="8181599">x</span><span class="op" id="8181600">,</span>&nbsp;<span class="ident" id="8181602">y</span><span class="op" id="8181603">)</span><span class="op" id="8181604">,</span>&nbsp;<span class="ident" id="8181606">golden</span><span class="op" id="8181612">.</span><span class="ident" id="8181613">At</span><span class="op" id="8181615">(</span><span class="ident" id="8181616">x</span><span class="op" id="8181617">,</span>&nbsp;<span class="ident" id="8181619">y</span><span class="op" id="8181620">)</span><span class="op" id="8181621">)</span>&nbsp;<span class="op" id="8181623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8181631">t</span><span class="op" id="8181632">.</span><span class="ident" id="8181633">Errorf</span><span class="op" id="8181639">(</span><span class="string" id="8181640">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="8181686">,</span>&nbsp;<span class="ident" id="8181688">r</span><span class="op" id="8181689">,</span>&nbsp;<span class="ident" id="8181691">test</span><span class="op" id="8181695">.</span><span class="ident" id="8181696">desc</span><span class="op" id="8181700">,</span>&nbsp;<span class="ident" id="8181702">x</span><span class="op" id="8181703">,</span>&nbsp;<span class="ident" id="8181705">y</span><span class="op" id="8181706">,</span>&nbsp;<span class="ident" id="8181708">dst</span><span class="op" id="8181711">.</span><span class="ident" id="8181712">At</span><span class="op" id="8181714">(</span><span class="ident" id="8181715">x</span><span class="op" id="8181716">,</span>&nbsp;<span class="ident" id="8181718">y</span><span class="op" id="8181719">)</span><span class="op" id="8181720">,</span>&nbsp;<span class="ident" id="8181722">golden</span><span class="op" id="8181728">.</span><span class="ident" id="8181729">At</span><span class="op" id="8181731">(</span><span class="ident" id="8181732">x</span><span class="op" id="8181733">,</span>&nbsp;<span class="ident" id="8181735">y</span><span class="op" id="8181736">)</span><span class="op" id="8181737">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8181745">continue</span>&nbsp;<span class="ident" id="8181754">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8181764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8181770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8181775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8181779">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8181782">}</span><br>
<span class="lineno"></span><span class="op" id="8181784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8181787">func</span>&nbsp;<span class="ident" id="8181792">TestDrawOverlap</span><span class="op" id="8181807">(</span><span class="ident" id="8181808">t</span>&nbsp;<span class="op" id="8181810">*</span><span class="ident" id="8181811">testing</span><span class="op" id="8181818">.</span><span class="ident" id="8181819">T</span><span class="op" id="8181820">)</span>&nbsp;<span class="op" id="8181822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8181825">for</span>&nbsp;<span class="ident" id="8181829">_</span><span class="op" id="8181830">,</span>&nbsp;<span class="ident" id="8181832">op</span>&nbsp;<span class="op" id="8181835">:=</span>&nbsp;<span class="keyword" id="8181838">range</span>&nbsp;<span class="op" id="8181844">[</span><span class="op" id="8181845">]</span><span class="ident" id="8181846">Op</span><span class="op" id="8181848">{</span><span class="ident" id="8181849">Over</span><span class="op" id="8181853">,</span>&nbsp;<span class="ident" id="8181855">Src</span><span class="op" id="8181858">}</span>&nbsp;<span class="op" id="8181860">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8181864">for</span>&nbsp;<span class="ident" id="8181868">yoff</span>&nbsp;<span class="op" id="8181873">:=</span>&nbsp;<span class="op" id="8181876">-</span><span class="num" id="8181877">2</span><span class="op" id="8181878">;</span>&nbsp;<span class="ident" id="8181880">yoff</span>&nbsp;<span class="op" id="8181885">&lt;=</span>&nbsp;<span class="num" id="8181888">2</span><span class="op" id="8181889">;</span>&nbsp;<span class="ident" id="8181891">yoff</span><span class="op" id="8181895">++</span>&nbsp;<span class="op" id="8181898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8181902">loop</span><span class="op" id="8181906">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8181911">for</span>&nbsp;<span class="ident" id="8181915">xoff</span>&nbsp;<span class="op" id="8181920">:=</span>&nbsp;<span class="op" id="8181923">-</span><span class="num" id="8181924">2</span><span class="op" id="8181925">;</span>&nbsp;<span class="ident" id="8181927">xoff</span>&nbsp;<span class="op" id="8181932">&lt;=</span>&nbsp;<span class="num" id="8181935">2</span><span class="op" id="8181936">;</span>&nbsp;<span class="ident" id="8181938">xoff</span><span class="op" id="8181942">++</span>&nbsp;<span class="op" id="8181945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8181951">m</span>&nbsp;<span class="op" id="8181953">:=</span>&nbsp;<span class="ident" id="8181956">gradYellow</span><span class="op" id="8181966">(</span><span class="num" id="8181967">127</span><span class="op" id="8181970">)</span><span class="op" id="8181971">.</span><span class="op" id="8181972">(</span><span class="op" id="8181973">*</span><span class="ident" id="8181974">image</span><span class="op" id="8181979">.</span><span class="ident" id="8181980">RGBA</span><span class="op" id="8181984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8181990">dst</span>&nbsp;<span class="op" id="8181994">:=</span>&nbsp;<span class="ident" id="8181997">m</span><span class="op" id="8181998">.</span><span class="ident" id="8181999">SubImage</span><span class="op" id="8182007">(</span><span class="ident" id="8182008">image</span><span class="op" id="8182013">.</span><span class="ident" id="8182014">Rect</span><span class="op" id="8182018">(</span><span class="num" id="8182019">5</span><span class="op" id="8182020">,</span>&nbsp;<span class="num" id="8182022">5</span><span class="op" id="8182023">,</span>&nbsp;<span class="num" id="8182025">10</span><span class="op" id="8182027">,</span>&nbsp;<span class="num" id="8182029">10</span><span class="op" id="8182031">)</span><span class="op" id="8182032">)</span><span class="op" id="8182033">.</span><span class="op" id="8182034">(</span><span class="op" id="8182035">*</span><span class="ident" id="8182036">image</span><span class="op" id="8182041">.</span><span class="ident" id="8182042">RGBA</span><span class="op" id="8182046">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8182052">src</span>&nbsp;<span class="op" id="8182056">:=</span>&nbsp;<span class="ident" id="8182059">m</span><span class="op" id="8182060">.</span><span class="ident" id="8182061">SubImage</span><span class="op" id="8182069">(</span><span class="ident" id="8182070">image</span><span class="op" id="8182075">.</span><span class="ident" id="8182076">Rect</span><span class="op" id="8182080">(</span><span class="num" id="8182081">5</span><span class="op" id="8182082">+</span><span class="ident" id="8182083">xoff</span><span class="op" id="8182087">,</span>&nbsp;<span class="num" id="8182089">5</span><span class="op" id="8182090">+</span><span class="ident" id="8182091">yoff</span><span class="op" id="8182095">,</span>&nbsp;<span class="num" id="8182097">10</span><span class="op" id="8182099">+</span><span class="ident" id="8182100">xoff</span><span class="op" id="8182104">,</span>&nbsp;<span class="num" id="8182106">10</span><span class="op" id="8182108">+</span><span class="ident" id="8182109">yoff</span><span class="op" id="8182113">)</span><span class="op" id="8182114">)</span><span class="op" id="8182115">.</span><span class="op" id="8182116">(</span><span class="op" id="8182117">*</span><span class="ident" id="8182118">image</span><span class="op" id="8182123">.</span><span class="ident" id="8182124">RGBA</span><span class="op" id="8182128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8182134">b</span>&nbsp;<span class="op" id="8182136">:=</span>&nbsp;<span class="ident" id="8182139">dst</span><span class="op" id="8182142">.</span><span class="ident" id="8182143">Bounds</span><span class="op" id="8182149">(</span><span class="op" id="8182150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8182156">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8182258">golden</span>&nbsp;<span class="op" id="8182265">:=</span>&nbsp;<span class="ident" id="8182268">makeGolden</span><span class="op" id="8182278">(</span><span class="ident" id="8182279">dst</span><span class="op" id="8182282">,</span>&nbsp;<span class="ident" id="8182284">b</span><span class="op" id="8182285">,</span>&nbsp;<span class="ident" id="8182287">src</span><span class="op" id="8182290">,</span>&nbsp;<span class="ident" id="8182292">src</span><span class="op" id="8182295">.</span><span class="ident" id="8182296">Bounds</span><span class="op" id="8182302">(</span><span class="op" id="8182303">)</span><span class="op" id="8182304">.</span><span class="ident" id="8182305">Min</span><span class="op" id="8182308">,</span>&nbsp;<span class="ident" id="8182310">nil</span><span class="op" id="8182313">,</span>&nbsp;<span class="ident" id="8182315">image</span><span class="op" id="8182320">.</span><span class="ident" id="8182321">ZP</span><span class="op" id="8182323">,</span>&nbsp;<span class="ident" id="8182325">op</span><span class="op" id="8182327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8182333">if</span>&nbsp;<span class="op" id="8182336">!</span><span class="ident" id="8182337">b</span><span class="op" id="8182338">.</span><span class="ident" id="8182339">Eq</span><span class="op" id="8182341">(</span><span class="ident" id="8182342">golden</span><span class="op" id="8182348">.</span><span class="ident" id="8182349">Bounds</span><span class="op" id="8182355">(</span><span class="op" id="8182356">)</span><span class="op" id="8182357">)</span>&nbsp;<span class="op" id="8182359">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8182366">t</span><span class="op" id="8182367">.</span><span class="ident" id="8182368">Errorf</span><span class="op" id="8182374">(</span><span class="string" id="8182375">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="8182425">,</span>&nbsp;<span class="ident" id="8182427">xoff</span><span class="op" id="8182431">,</span>&nbsp;<span class="ident" id="8182433">yoff</span><span class="op" id="8182437">,</span>&nbsp;<span class="ident" id="8182439">dst</span><span class="op" id="8182442">.</span><span class="ident" id="8182443">Bounds</span><span class="op" id="8182449">(</span><span class="op" id="8182450">)</span><span class="op" id="8182451">,</span>&nbsp;<span class="ident" id="8182453">golden</span><span class="op" id="8182459">.</span><span class="ident" id="8182460">Bounds</span><span class="op" id="8182466">(</span><span class="op" id="8182467">)</span><span class="op" id="8182468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8182475">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8182488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8182494">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8182592">DrawMask</span><span class="op" id="8182600">(</span><span class="ident" id="8182601">dst</span><span class="op" id="8182604">,</span>&nbsp;<span class="ident" id="8182606">b</span><span class="op" id="8182607">,</span>&nbsp;<span class="ident" id="8182609">src</span><span class="op" id="8182612">,</span>&nbsp;<span class="ident" id="8182614">src</span><span class="op" id="8182617">.</span><span class="ident" id="8182618">Bounds</span><span class="op" id="8182624">(</span><span class="op" id="8182625">)</span><span class="op" id="8182626">.</span><span class="ident" id="8182627">Min</span><span class="op" id="8182630">,</span>&nbsp;<span class="ident" id="8182632">nil</span><span class="op" id="8182635">,</span>&nbsp;<span class="ident" id="8182637">image</span><span class="op" id="8182642">.</span><span class="ident" id="8182643">ZP</span><span class="op" id="8182645">,</span>&nbsp;<span class="ident" id="8182647">op</span><span class="op" id="8182649">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8182655">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8182724">for</span>&nbsp;<span class="ident" id="8182728">y</span>&nbsp;<span class="op" id="8182730">:=</span>&nbsp;<span class="ident" id="8182733">b</span><span class="op" id="8182734">.</span><span class="ident" id="8182735">Min</span><span class="op" id="8182738">.</span><span class="ident" id="8182739">Y</span><span class="op" id="8182740">;</span>&nbsp;<span class="ident" id="8182742">y</span>&nbsp;<span class="op" id="8182744">&lt;</span>&nbsp;<span class="ident" id="8182746">b</span><span class="op" id="8182747">.</span><span class="ident" id="8182748">Max</span><span class="op" id="8182751">.</span><span class="ident" id="8182752">Y</span><span class="op" id="8182753">;</span>&nbsp;<span class="ident" id="8182755">y</span><span class="op" id="8182756">++</span>&nbsp;<span class="op" id="8182759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8182766">for</span>&nbsp;<span class="ident" id="8182770">x</span>&nbsp;<span class="op" id="8182772">:=</span>&nbsp;<span class="ident" id="8182775">b</span><span class="op" id="8182776">.</span><span class="ident" id="8182777">Min</span><span class="op" id="8182780">.</span><span class="ident" id="8182781">X</span><span class="op" id="8182782">;</span>&nbsp;<span class="ident" id="8182784">x</span>&nbsp;<span class="op" id="8182786">&lt;</span>&nbsp;<span class="ident" id="8182788">b</span><span class="op" id="8182789">.</span><span class="ident" id="8182790">Max</span><span class="op" id="8182793">.</span><span class="ident" id="8182794">X</span><span class="op" id="8182795">;</span>&nbsp;<span class="ident" id="8182797">x</span><span class="op" id="8182798">++</span>&nbsp;<span class="op" id="8182801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8182809">if</span>&nbsp;<span class="op" id="8182812">!</span><span class="ident" id="8182813">eq</span><span class="op" id="8182815">(</span><span class="ident" id="8182816">dst</span><span class="op" id="8182819">.</span><span class="ident" id="8182820">At</span><span class="op" id="8182822">(</span><span class="ident" id="8182823">x</span><span class="op" id="8182824">,</span>&nbsp;<span class="ident" id="8182826">y</span><span class="op" id="8182827">)</span><span class="op" id="8182828">,</span>&nbsp;<span class="ident" id="8182830">golden</span><span class="op" id="8182836">.</span><span class="ident" id="8182837">At</span><span class="op" id="8182839">(</span><span class="ident" id="8182840">x</span><span class="op" id="8182841">,</span>&nbsp;<span class="ident" id="8182843">y</span><span class="op" id="8182844">)</span><span class="op" id="8182845">)</span>&nbsp;<span class="op" id="8182847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8182856">t</span><span class="op" id="8182857">.</span><span class="ident" id="8182858">Errorf</span><span class="op" id="8182864">(</span><span class="string" id="8182865">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="8182928">,</span>&nbsp;<span class="ident" id="8182930">xoff</span><span class="op" id="8182934">,</span>&nbsp;<span class="ident" id="8182936">yoff</span><span class="op" id="8182940">,</span>&nbsp;<span class="ident" id="8182942">x</span><span class="op" id="8182943">,</span>&nbsp;<span class="ident" id="8182945">y</span><span class="op" id="8182946">,</span>&nbsp;<span class="ident" id="8182948">dst</span><span class="op" id="8182951">.</span><span class="ident" id="8182952">At</span><span class="op" id="8182954">(</span><span class="ident" id="8182955">x</span><span class="op" id="8182956">,</span>&nbsp;<span class="ident" id="8182958">y</span><span class="op" id="8182959">)</span><span class="op" id="8182960">,</span>&nbsp;<span class="ident" id="8182962">golden</span><span class="op" id="8182968">.</span><span class="ident" id="8182969">At</span><span class="op" id="8182971">(</span><span class="ident" id="8182972">x</span><span class="op" id="8182973">,</span>&nbsp;<span class="ident" id="8182975">y</span><span class="op" id="8182976">)</span><span class="op" id="8182977">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8182986">continue</span>&nbsp;<span class="ident" id="8182995">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8183006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8183013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8183019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8183024">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8183028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8183031">}</span><br>
<span class="lineno"></span><span class="op" id="8183033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8183036">//&nbsp;TestNonZeroSrcPt&nbsp;checks&nbsp;drawing&nbsp;with&nbsp;a&nbsp;non-zero&nbsp;src&nbsp;point&nbsp;parameter.</span><br>
<span class="lineno">285</span><span class="keyword" id="8183108">func</span>&nbsp;<span class="ident" id="8183113">TestNonZeroSrcPt</span><span class="op" id="8183129">(</span><span class="ident" id="8183130">t</span>&nbsp;<span class="op" id="8183132">*</span><span class="ident" id="8183133">testing</span><span class="op" id="8183140">.</span><span class="ident" id="8183141">T</span><span class="op" id="8183142">)</span>&nbsp;<span class="op" id="8183144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183147">a</span>&nbsp;<span class="op" id="8183149">:=</span>&nbsp;<span class="ident" id="8183152">image</span><span class="op" id="8183157">.</span><span class="ident" id="8183158">NewRGBA</span><span class="op" id="8183165">(</span><span class="ident" id="8183166">image</span><span class="op" id="8183171">.</span><span class="ident" id="8183172">Rect</span><span class="op" id="8183176">(</span><span class="num" id="8183177">0</span><span class="op" id="8183178">,</span>&nbsp;<span class="num" id="8183180">0</span><span class="op" id="8183181">,</span>&nbsp;<span class="num" id="8183183">1</span><span class="op" id="8183184">,</span>&nbsp;<span class="num" id="8183186">1</span><span class="op" id="8183187">)</span><span class="op" id="8183188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183191">b</span>&nbsp;<span class="op" id="8183193">:=</span>&nbsp;<span class="ident" id="8183196">image</span><span class="op" id="8183201">.</span><span class="ident" id="8183202">NewRGBA</span><span class="op" id="8183209">(</span><span class="ident" id="8183210">image</span><span class="op" id="8183215">.</span><span class="ident" id="8183216">Rect</span><span class="op" id="8183220">(</span><span class="num" id="8183221">0</span><span class="op" id="8183222">,</span>&nbsp;<span class="num" id="8183224">0</span><span class="op" id="8183225">,</span>&nbsp;<span class="num" id="8183227">2</span><span class="op" id="8183228">,</span>&nbsp;<span class="num" id="8183230">2</span><span class="op" id="8183231">)</span><span class="op" id="8183232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183235">b</span><span class="op" id="8183236">.</span><span class="ident" id="8183237">Set</span><span class="op" id="8183240">(</span><span class="num" id="8183241">0</span><span class="op" id="8183242">,</span>&nbsp;<span class="num" id="8183244">0</span><span class="op" id="8183245">,</span>&nbsp;<span class="ident" id="8183247">color</span><span class="op" id="8183252">.</span><span class="ident" id="8183253">RGBA</span><span class="op" id="8183257">{</span><span class="num" id="8183258">0</span><span class="op" id="8183259">,</span>&nbsp;<span class="num" id="8183261">0</span><span class="op" id="8183262">,</span>&nbsp;<span class="num" id="8183264">0</span><span class="op" id="8183265">,</span>&nbsp;<span class="num" id="8183267">5</span><span class="op" id="8183268">}</span><span class="op" id="8183269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183272">b</span><span class="op" id="8183273">.</span><span class="ident" id="8183274">Set</span><span class="op" id="8183277">(</span><span class="num" id="8183278">1</span><span class="op" id="8183279">,</span>&nbsp;<span class="num" id="8183281">0</span><span class="op" id="8183282">,</span>&nbsp;<span class="ident" id="8183284">color</span><span class="op" id="8183289">.</span><span class="ident" id="8183290">RGBA</span><span class="op" id="8183294">{</span><span class="num" id="8183295">0</span><span class="op" id="8183296">,</span>&nbsp;<span class="num" id="8183298">0</span><span class="op" id="8183299">,</span>&nbsp;<span class="num" id="8183301">5</span><span class="op" id="8183302">,</span>&nbsp;<span class="num" id="8183304">5</span><span class="op" id="8183305">}</span><span class="op" id="8183306">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183309">b</span><span class="op" id="8183310">.</span><span class="ident" id="8183311">Set</span><span class="op" id="8183314">(</span><span class="num" id="8183315">0</span><span class="op" id="8183316">,</span>&nbsp;<span class="num" id="8183318">1</span><span class="op" id="8183319">,</span>&nbsp;<span class="ident" id="8183321">color</span><span class="op" id="8183326">.</span><span class="ident" id="8183327">RGBA</span><span class="op" id="8183331">{</span><span class="num" id="8183332">0</span><span class="op" id="8183333">,</span>&nbsp;<span class="num" id="8183335">5</span><span class="op" id="8183336">,</span>&nbsp;<span class="num" id="8183338">0</span><span class="op" id="8183339">,</span>&nbsp;<span class="num" id="8183341">5</span><span class="op" id="8183342">}</span><span class="op" id="8183343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183346">b</span><span class="op" id="8183347">.</span><span class="ident" id="8183348">Set</span><span class="op" id="8183351">(</span><span class="num" id="8183352">1</span><span class="op" id="8183353">,</span>&nbsp;<span class="num" id="8183355">1</span><span class="op" id="8183356">,</span>&nbsp;<span class="ident" id="8183358">color</span><span class="op" id="8183363">.</span><span class="ident" id="8183364">RGBA</span><span class="op" id="8183368">{</span><span class="num" id="8183369">5</span><span class="op" id="8183370">,</span>&nbsp;<span class="num" id="8183372">0</span><span class="op" id="8183373">,</span>&nbsp;<span class="num" id="8183375">0</span><span class="op" id="8183376">,</span>&nbsp;<span class="num" id="8183378">5</span><span class="op" id="8183379">}</span><span class="op" id="8183380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183383">Draw</span><span class="op" id="8183387">(</span><span class="ident" id="8183388">a</span><span class="op" id="8183389">,</span>&nbsp;<span class="ident" id="8183391">image</span><span class="op" id="8183396">.</span><span class="ident" id="8183397">Rect</span><span class="op" id="8183401">(</span><span class="num" id="8183402">0</span><span class="op" id="8183403">,</span>&nbsp;<span class="num" id="8183405">0</span><span class="op" id="8183406">,</span>&nbsp;<span class="num" id="8183408">1</span><span class="op" id="8183409">,</span>&nbsp;<span class="num" id="8183411">1</span><span class="op" id="8183412">)</span><span class="op" id="8183413">,</span>&nbsp;<span class="ident" id="8183415">b</span><span class="op" id="8183416">,</span>&nbsp;<span class="ident" id="8183418">image</span><span class="op" id="8183423">.</span><span class="ident" id="8183424">Pt</span><span class="op" id="8183426">(</span><span class="num" id="8183427">1</span><span class="op" id="8183428">,</span>&nbsp;<span class="num" id="8183430">1</span><span class="op" id="8183431">)</span><span class="op" id="8183432">,</span>&nbsp;<span class="ident" id="8183434">Over</span><span class="op" id="8183438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8183441">if</span>&nbsp;<span class="op" id="8183444">!</span><span class="ident" id="8183445">eq</span><span class="op" id="8183447">(</span><span class="ident" id="8183448">color</span><span class="op" id="8183453">.</span><span class="ident" id="8183454">RGBA</span><span class="op" id="8183458">{</span><span class="num" id="8183459">5</span><span class="op" id="8183460">,</span>&nbsp;<span class="num" id="8183462">0</span><span class="op" id="8183463">,</span>&nbsp;<span class="num" id="8183465">0</span><span class="op" id="8183466">,</span>&nbsp;<span class="num" id="8183468">5</span><span class="op" id="8183469">}</span><span class="op" id="8183470">,</span>&nbsp;<span class="ident" id="8183472">a</span><span class="op" id="8183473">.</span><span class="ident" id="8183474">At</span><span class="op" id="8183476">(</span><span class="num" id="8183477">0</span><span class="op" id="8183478">,</span>&nbsp;<span class="num" id="8183480">0</span><span class="op" id="8183481">)</span><span class="op" id="8183482">)</span>&nbsp;<span class="op" id="8183484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183488">t</span><span class="op" id="8183489">.</span><span class="ident" id="8183490">Errorf</span><span class="op" id="8183496">(</span><span class="string" id="8183497">&#34;non-zero&nbsp;src&nbsp;pt:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8183530">,</span>&nbsp;<span class="ident" id="8183532">color</span><span class="op" id="8183537">.</span><span class="ident" id="8183538">RGBA</span><span class="op" id="8183542">{</span><span class="num" id="8183543">5</span><span class="op" id="8183544">,</span>&nbsp;<span class="num" id="8183546">0</span><span class="op" id="8183547">,</span>&nbsp;<span class="num" id="8183549">0</span><span class="op" id="8183550">,</span>&nbsp;<span class="num" id="8183552">5</span><span class="op" id="8183553">}</span><span class="op" id="8183554">,</span>&nbsp;<span class="ident" id="8183556">a</span><span class="op" id="8183557">.</span><span class="ident" id="8183558">At</span><span class="op" id="8183560">(</span><span class="num" id="8183561">0</span><span class="op" id="8183562">,</span>&nbsp;<span class="num" id="8183564">0</span><span class="op" id="8183565">)</span><span class="op" id="8183566">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8183569">}</span><br>
<span class="lineno"></span><span class="op" id="8183571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8183574">func</span>&nbsp;<span class="ident" id="8183579">TestFill</span><span class="op" id="8183587">(</span><span class="ident" id="8183588">t</span>&nbsp;<span class="op" id="8183590">*</span><span class="ident" id="8183591">testing</span><span class="op" id="8183598">.</span><span class="ident" id="8183599">T</span><span class="op" id="8183600">)</span>&nbsp;<span class="op" id="8183602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183605">rr</span>&nbsp;<span class="op" id="8183608">:=</span>&nbsp;<span class="op" id="8183611">[</span><span class="op" id="8183612">]</span><span class="ident" id="8183613">image</span><span class="op" id="8183618">.</span><span class="ident" id="8183619">Rectangle</span><span class="op" id="8183628">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183632">image</span><span class="op" id="8183637">.</span><span class="ident" id="8183638">Rect</span><span class="op" id="8183642">(</span><span class="num" id="8183643">0</span><span class="op" id="8183644">,</span>&nbsp;<span class="num" id="8183646">0</span><span class="op" id="8183647">,</span>&nbsp;<span class="num" id="8183649">0</span><span class="op" id="8183650">,</span>&nbsp;<span class="num" id="8183652">0</span><span class="op" id="8183653">)</span><span class="op" id="8183654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183658">image</span><span class="op" id="8183663">.</span><span class="ident" id="8183664">Rect</span><span class="op" id="8183668">(</span><span class="num" id="8183669">0</span><span class="op" id="8183670">,</span>&nbsp;<span class="num" id="8183672">0</span><span class="op" id="8183673">,</span>&nbsp;<span class="num" id="8183675">40</span><span class="op" id="8183677">,</span>&nbsp;<span class="num" id="8183679">30</span><span class="op" id="8183681">)</span><span class="op" id="8183682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183686">image</span><span class="op" id="8183691">.</span><span class="ident" id="8183692">Rect</span><span class="op" id="8183696">(</span><span class="num" id="8183697">10</span><span class="op" id="8183699">,</span>&nbsp;<span class="num" id="8183701">0</span><span class="op" id="8183702">,</span>&nbsp;<span class="num" id="8183704">40</span><span class="op" id="8183706">,</span>&nbsp;<span class="num" id="8183708">30</span><span class="op" id="8183710">)</span><span class="op" id="8183711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183715">image</span><span class="op" id="8183720">.</span><span class="ident" id="8183721">Rect</span><span class="op" id="8183725">(</span><span class="num" id="8183726">0</span><span class="op" id="8183727">,</span>&nbsp;<span class="num" id="8183729">20</span><span class="op" id="8183731">,</span>&nbsp;<span class="num" id="8183733">40</span><span class="op" id="8183735">,</span>&nbsp;<span class="num" id="8183737">30</span><span class="op" id="8183739">)</span><span class="op" id="8183740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183744">image</span><span class="op" id="8183749">.</span><span class="ident" id="8183750">Rect</span><span class="op" id="8183754">(</span><span class="num" id="8183755">10</span><span class="op" id="8183757">,</span>&nbsp;<span class="num" id="8183759">20</span><span class="op" id="8183761">,</span>&nbsp;<span class="num" id="8183763">40</span><span class="op" id="8183765">,</span>&nbsp;<span class="num" id="8183767">30</span><span class="op" id="8183769">)</span><span class="op" id="8183770">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183774">image</span><span class="op" id="8183779">.</span><span class="ident" id="8183780">Rect</span><span class="op" id="8183784">(</span><span class="num" id="8183785">10</span><span class="op" id="8183787">,</span>&nbsp;<span class="num" id="8183789">20</span><span class="op" id="8183791">,</span>&nbsp;<span class="num" id="8183793">15</span><span class="op" id="8183795">,</span>&nbsp;<span class="num" id="8183797">25</span><span class="op" id="8183799">)</span><span class="op" id="8183800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183804">image</span><span class="op" id="8183809">.</span><span class="ident" id="8183810">Rect</span><span class="op" id="8183814">(</span><span class="num" id="8183815">10</span><span class="op" id="8183817">,</span>&nbsp;<span class="num" id="8183819">0</span><span class="op" id="8183820">,</span>&nbsp;<span class="num" id="8183822">35</span><span class="op" id="8183824">,</span>&nbsp;<span class="num" id="8183826">30</span><span class="op" id="8183828">)</span><span class="op" id="8183829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183833">image</span><span class="op" id="8183838">.</span><span class="ident" id="8183839">Rect</span><span class="op" id="8183843">(</span><span class="num" id="8183844">0</span><span class="op" id="8183845">,</span>&nbsp;<span class="num" id="8183847">15</span><span class="op" id="8183849">,</span>&nbsp;<span class="num" id="8183851">40</span><span class="op" id="8183853">,</span>&nbsp;<span class="num" id="8183855">16</span><span class="op" id="8183857">)</span><span class="op" id="8183858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183862">image</span><span class="op" id="8183867">.</span><span class="ident" id="8183868">Rect</span><span class="op" id="8183872">(</span><span class="num" id="8183873">24</span><span class="op" id="8183875">,</span>&nbsp;<span class="num" id="8183877">24</span><span class="op" id="8183879">,</span>&nbsp;<span class="num" id="8183881">25</span><span class="op" id="8183883">,</span>&nbsp;<span class="num" id="8183885">25</span><span class="op" id="8183887">)</span><span class="op" id="8183888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183892">image</span><span class="op" id="8183897">.</span><span class="ident" id="8183898">Rect</span><span class="op" id="8183902">(</span><span class="num" id="8183903">23</span><span class="op" id="8183905">,</span>&nbsp;<span class="num" id="8183907">23</span><span class="op" id="8183909">,</span>&nbsp;<span class="num" id="8183911">26</span><span class="op" id="8183913">,</span>&nbsp;<span class="num" id="8183915">26</span><span class="op" id="8183917">)</span><span class="op" id="8183918">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183922">image</span><span class="op" id="8183927">.</span><span class="ident" id="8183928">Rect</span><span class="op" id="8183932">(</span><span class="num" id="8183933">22</span><span class="op" id="8183935">,</span>&nbsp;<span class="num" id="8183937">22</span><span class="op" id="8183939">,</span>&nbsp;<span class="num" id="8183941">27</span><span class="op" id="8183943">,</span>&nbsp;<span class="num" id="8183945">27</span><span class="op" id="8183947">)</span><span class="op" id="8183948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183952">image</span><span class="op" id="8183957">.</span><span class="ident" id="8183958">Rect</span><span class="op" id="8183962">(</span><span class="num" id="8183963">21</span><span class="op" id="8183965">,</span>&nbsp;<span class="num" id="8183967">21</span><span class="op" id="8183969">,</span>&nbsp;<span class="num" id="8183971">28</span><span class="op" id="8183973">,</span>&nbsp;<span class="num" id="8183975">28</span><span class="op" id="8183977">)</span><span class="op" id="8183978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8183982">image</span><span class="op" id="8183987">.</span><span class="ident" id="8183988">Rect</span><span class="op" id="8183992">(</span><span class="num" id="8183993">20</span><span class="op" id="8183995">,</span>&nbsp;<span class="num" id="8183997">20</span><span class="op" id="8183999">,</span>&nbsp;<span class="num" id="8184001">29</span><span class="op" id="8184003">,</span>&nbsp;<span class="num" id="8184005">29</span><span class="op" id="8184007">)</span><span class="op" id="8184008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8184011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8184014">for</span>&nbsp;<span class="ident" id="8184018">_</span><span class="op" id="8184019">,</span>&nbsp;<span class="ident" id="8184021">r</span>&nbsp;<span class="op" id="8184023">:=</span>&nbsp;<span class="keyword" id="8184026">range</span>&nbsp;<span class="ident" id="8184032">rr</span>&nbsp;<span class="op" id="8184035">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8184039">m</span>&nbsp;<span class="op" id="8184041">:=</span>&nbsp;<span class="ident" id="8184044">image</span><span class="op" id="8184049">.</span><span class="ident" id="8184050">NewRGBA</span><span class="op" id="8184057">(</span><span class="ident" id="8184058">image</span><span class="op" id="8184063">.</span><span class="ident" id="8184064">Rect</span><span class="op" id="8184068">(</span><span class="num" id="8184069">0</span><span class="op" id="8184070">,</span>&nbsp;<span class="num" id="8184072">0</span><span class="op" id="8184073">,</span>&nbsp;<span class="num" id="8184075">40</span><span class="op" id="8184077">,</span>&nbsp;<span class="num" id="8184079">30</span><span class="op" id="8184081">)</span><span class="op" id="8184082">)</span><span class="op" id="8184083">.</span><span class="ident" id="8184084">SubImage</span><span class="op" id="8184092">(</span><span class="ident" id="8184093">r</span><span class="op" id="8184094">)</span><span class="op" id="8184095">.</span><span class="op" id="8184096">(</span><span class="op" id="8184097">*</span><span class="ident" id="8184098">image</span><span class="op" id="8184103">.</span><span class="ident" id="8184104">RGBA</span><span class="op" id="8184108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8184112">b</span>&nbsp;<span class="op" id="8184114">:=</span>&nbsp;<span class="ident" id="8184117">m</span><span class="op" id="8184118">.</span><span class="ident" id="8184119">Bounds</span><span class="op" id="8184125">(</span><span class="op" id="8184126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8184130">c</span>&nbsp;<span class="op" id="8184132">:=</span>&nbsp;<span class="ident" id="8184135">color</span><span class="op" id="8184140">.</span><span class="ident" id="8184141">RGBA</span><span class="op" id="8184145">{</span><span class="num" id="8184146">11</span><span class="op" id="8184148">,</span>&nbsp;<span class="num" id="8184150">0</span><span class="op" id="8184151">,</span>&nbsp;<span class="num" id="8184153">0</span><span class="op" id="8184154">,</span>&nbsp;<span class="num" id="8184156">255</span><span class="op" id="8184159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8184163">src</span>&nbsp;<span class="op" id="8184167">:=</span>&nbsp;<span class="op" id="8184170">&amp;</span><span class="ident" id="8184171">image</span><span class="op" id="8184176">.</span><span class="ident" id="8184177">Uniform</span><span class="op" id="8184184">{</span><span class="ident" id="8184185">C</span><span class="op" id="8184186">:</span>&nbsp;<span class="ident" id="8184188">c</span><span class="op" id="8184189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8184193">check</span>&nbsp;<span class="op" id="8184199">:=</span>&nbsp;<span class="keyword" id="8184202">func</span><span class="op" id="8184206">(</span><span class="ident" id="8184207">desc</span>&nbsp;<span class="builtintype" id="8184212">string</span><span class="op" id="8184218">)</span>&nbsp;<span class="op" id="8184220">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8184225">for</span>&nbsp;<span class="ident" id="8184229">y</span>&nbsp;<span class="op" id="8184231">:=</span>&nbsp;<span class="ident" id="8184234">b</span><span class="op" id="8184235">.</span><span class="ident" id="8184236">Min</span><span class="op" id="8184239">.</span><span class="ident" id="8184240">Y</span><span class="op" id="8184241">;</span>&nbsp;<span class="ident" id="8184243">y</span>&nbsp;<span class="op" id="8184245">&lt;</span>&nbsp;<span class="ident" id="8184247">b</span><span class="op" id="8184248">.</span><span class="ident" id="8184249">Max</span><span class="op" id="8184252">.</span><span class="ident" id="8184253">Y</span><span class="op" id="8184254">;</span>&nbsp;<span class="ident" id="8184256">y</span><span class="op" id="8184257">++</span>&nbsp;<span class="op" id="8184260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8184266">for</span>&nbsp;<span class="ident" id="8184270">x</span>&nbsp;<span class="op" id="8184272">:=</span>&nbsp;<span class="ident" id="8184275">b</span><span class="op" id="8184276">.</span><span class="ident" id="8184277">Min</span><span class="op" id="8184280">.</span><span class="ident" id="8184281">X</span><span class="op" id="8184282">;</span>&nbsp;<span class="ident" id="8184284">x</span>&nbsp;<span class="op" id="8184286">&lt;</span>&nbsp;<span class="ident" id="8184288">b</span><span class="op" id="8184289">.</span><span class="ident" id="8184290">Max</span><span class="op" id="8184293">.</span><span class="ident" id="8184294">X</span><span class="op" id="8184295">;</span>&nbsp;<span class="ident" id="8184297">x</span><span class="op" id="8184298">++</span>&nbsp;<span class="op" id="8184301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8184308">if</span>&nbsp;<span class="op" id="8184311">!</span><span class="ident" id="8184312">eq</span><span class="op" id="8184314">(</span><span class="ident" id="8184315">c</span><span class="op" id="8184316">,</span>&nbsp;<span class="ident" id="8184318">m</span><span class="op" id="8184319">.</span><span class="ident" id="8184320">At</span><span class="op" id="8184322">(</span><span class="ident" id="8184323">x</span><span class="op" id="8184324">,</span>&nbsp;<span class="ident" id="8184326">y</span><span class="op" id="8184327">)</span><span class="op" id="8184328">)</span>&nbsp;<span class="op" id="8184330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8184338">t</span><span class="op" id="8184339">.</span><span class="ident" id="8184340">Errorf</span><span class="op" id="8184346">(</span><span class="string" id="8184347">&#34;%s&nbsp;fill:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;sub-image&nbsp;bounds=%v:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8184406">,</span>&nbsp;<span class="ident" id="8184408">desc</span><span class="op" id="8184412">,</span>&nbsp;<span class="ident" id="8184414">x</span><span class="op" id="8184415">,</span>&nbsp;<span class="ident" id="8184417">y</span><span class="op" id="8184418">,</span>&nbsp;<span class="ident" id="8184420">r</span><span class="op" id="8184421">,</span>&nbsp;<span class="ident" id="8184423">c</span><span class="op" id="8184424">,</span>&nbsp;<span class="ident" id="8184426">m</span><span class="op" id="8184427">.</span><span class="ident" id="8184428">At</span><span class="op" id="8184430">(</span><span class="ident" id="8184431">x</span><span class="op" id="8184432">,</span>&nbsp;<span class="ident" id="8184434">y</span><span class="op" id="8184435">)</span><span class="op" id="8184436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8184444">return</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8184456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8184462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8184467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8184471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8184475">//&nbsp;Draw&nbsp;1&nbsp;pixel&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8184504">for</span>&nbsp;<span class="ident" id="8184508">y</span>&nbsp;<span class="op" id="8184510">:=</span>&nbsp;<span class="ident" id="8184513">b</span><span class="op" id="8184514">.</span><span class="ident" id="8184515">Min</span><span class="op" id="8184518">.</span><span class="ident" id="8184519">Y</span><span class="op" id="8184520">;</span>&nbsp;<span class="ident" id="8184522">y</span>&nbsp;<span class="op" id="8184524">&lt;</span>&nbsp;<span class="ident" id="8184526">b</span><span class="op" id="8184527">.</span><span class="ident" id="8184528">Max</span><span class="op" id="8184531">.</span><span class="ident" id="8184532">Y</span><span class="op" id="8184533">;</span>&nbsp;<span class="ident" id="8184535">y</span><span class="op" id="8184536">++</span>&nbsp;<span class="op" id="8184539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8184544">for</span>&nbsp;<span class="ident" id="8184548">x</span>&nbsp;<span class="op" id="8184550">:=</span>&nbsp;<span class="ident" id="8184553">b</span><span class="op" id="8184554">.</span><span class="ident" id="8184555">Min</span><span class="op" id="8184558">.</span><span class="ident" id="8184559">X</span><span class="op" id="8184560">;</span>&nbsp;<span class="ident" id="8184562">x</span>&nbsp;<span class="op" id="8184564">&lt;</span>&nbsp;<span class="ident" id="8184566">b</span><span class="op" id="8184567">.</span><span class="ident" id="8184568">Max</span><span class="op" id="8184571">.</span><span class="ident" id="8184572">X</span><span class="op" id="8184573">;</span>&nbsp;<span class="ident" id="8184575">x</span><span class="op" id="8184576">++</span>&nbsp;<span class="op" id="8184579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8184585">DrawMask</span><span class="op" id="8184593">(</span><span class="ident" id="8184594">m</span><span class="op" id="8184595">,</span>&nbsp;<span class="ident" id="8184597">image</span><span class="op" id="8184602">.</span><span class="ident" id="8184603">Rect</span><span class="op" id="8184607">(</span><span class="ident" id="8184608">x</span><span class="op" id="8184609">,</span>&nbsp;<span class="ident" id="8184611">y</span><span class="op" id="8184612">,</span>&nbsp;<span class="ident" id="8184614">x</span><span class="op" id="8184615">+</span><span class="num" id="8184616">1</span><span class="op" id="8184617">,</span>&nbsp;<span class="ident" id="8184619">y</span><span class="op" id="8184620">+</span><span class="num" id="8184621">1</span><span class="op" id="8184622">)</span><span class="op" id="8184623">,</span>&nbsp;<span class="ident" id="8184625">src</span><span class="op" id="8184628">,</span>&nbsp;<span class="ident" id="8184630">image</span><span class="op" id="8184635">.</span><span class="ident" id="8184636">ZP</span><span class="op" id="8184638">,</span>&nbsp;<span class="ident" id="8184640">nil</span><span class="op" id="8184643">,</span>&nbsp;<span class="ident" id="8184645">image</span><span class="op" id="8184650">.</span><span class="ident" id="8184651">ZP</span><span class="op" id="8184653">,</span>&nbsp;<span class="ident" id="8184655">Src</span><span class="op" id="8184658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8184663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8184667">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8184671">check</span><span class="op" id="8184676">(</span><span class="string" id="8184677">&#34;pixel&#34;</span><span class="op" id="8184684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8184688">//&nbsp;Draw&nbsp;1&nbsp;row&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8184715">c</span>&nbsp;<span class="op" id="8184717">=</span>&nbsp;<span class="ident" id="8184719">color</span><span class="op" id="8184724">.</span><span class="ident" id="8184725">RGBA</span><span class="op" id="8184729">{</span><span class="num" id="8184730">0</span><span class="op" id="8184731">,</span>&nbsp;<span class="num" id="8184733">22</span><span class="op" id="8184735">,</span>&nbsp;<span class="num" id="8184737">0</span><span class="op" id="8184738">,</span>&nbsp;<span class="num" id="8184740">255</span><span class="op" id="8184743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8184747">src</span>&nbsp;<span class="op" id="8184751">=</span>&nbsp;<span class="op" id="8184753">&amp;</span><span class="ident" id="8184754">image</span><span class="op" id="8184759">.</span><span class="ident" id="8184760">Uniform</span><span class="op" id="8184767">{</span><span class="ident" id="8184768">C</span><span class="op" id="8184769">:</span>&nbsp;<span class="ident" id="8184771">c</span><span class="op" id="8184772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8184776">for</span>&nbsp;<span class="ident" id="8184780">y</span>&nbsp;<span class="op" id="8184782">:=</span>&nbsp;<span class="ident" id="8184785">b</span><span class="op" id="8184786">.</span><span class="ident" id="8184787">Min</span><span class="op" id="8184790">.</span><span class="ident" id="8184791">Y</span><span class="op" id="8184792">;</span>&nbsp;<span class="ident" id="8184794">y</span>&nbsp;<span class="op" id="8184796">&lt;</span>&nbsp;<span class="ident" id="8184798">b</span><span class="op" id="8184799">.</span><span class="ident" id="8184800">Max</span><span class="op" id="8184803">.</span><span class="ident" id="8184804">Y</span><span class="op" id="8184805">;</span>&nbsp;<span class="ident" id="8184807">y</span><span class="op" id="8184808">++</span>&nbsp;<span class="op" id="8184811">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8184816">DrawMask</span><span class="op" id="8184824">(</span><span class="ident" id="8184825">m</span><span class="op" id="8184826">,</span>&nbsp;<span class="ident" id="8184828">image</span><span class="op" id="8184833">.</span><span class="ident" id="8184834">Rect</span><span class="op" id="8184838">(</span><span class="ident" id="8184839">b</span><span class="op" id="8184840">.</span><span class="ident" id="8184841">Min</span><span class="op" id="8184844">.</span><span class="ident" id="8184845">X</span><span class="op" id="8184846">,</span>&nbsp;<span class="ident" id="8184848">y</span><span class="op" id="8184849">,</span>&nbsp;<span class="ident" id="8184851">b</span><span class="op" id="8184852">.</span><span class="ident" id="8184853">Max</span><span class="op" id="8184856">.</span><span class="ident" id="8184857">X</span><span class="op" id="8184858">,</span>&nbsp;<span class="ident" id="8184860">y</span><span class="op" id="8184861">+</span><span class="num" id="8184862">1</span><span class="op" id="8184863">)</span><span class="op" id="8184864">,</span>&nbsp;<span class="ident" id="8184866">src</span><span class="op" id="8184869">,</span>&nbsp;<span class="ident" id="8184871">image</span><span class="op" id="8184876">.</span><span class="ident" id="8184877">ZP</span><span class="op" id="8184879">,</span>&nbsp;<span class="ident" id="8184881">nil</span><span class="op" id="8184884">,</span>&nbsp;<span class="ident" id="8184886">image</span><span class="op" id="8184891">.</span><span class="ident" id="8184892">ZP</span><span class="op" id="8184894">,</span>&nbsp;<span class="ident" id="8184896">Src</span><span class="op" id="8184899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8184903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8184907">check</span><span class="op" id="8184912">(</span><span class="string" id="8184913">&#34;row&#34;</span><span class="op" id="8184918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8184922">//&nbsp;Draw&nbsp;1&nbsp;column&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8184952">c</span>&nbsp;<span class="op" id="8184954">=</span>&nbsp;<span class="ident" id="8184956">color</span><span class="op" id="8184961">.</span><span class="ident" id="8184962">RGBA</span><span class="op" id="8184966">{</span><span class="num" id="8184967">0</span><span class="op" id="8184968">,</span>&nbsp;<span class="num" id="8184970">0</span><span class="op" id="8184971">,</span>&nbsp;<span class="num" id="8184973">33</span><span class="op" id="8184975">,</span>&nbsp;<span class="num" id="8184977">255</span><span class="op" id="8184980">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8184984">src</span>&nbsp;<span class="op" id="8184988">=</span>&nbsp;<span class="op" id="8184990">&amp;</span><span class="ident" id="8184991">image</span><span class="op" id="8184996">.</span><span class="ident" id="8184997">Uniform</span><span class="op" id="8185004">{</span><span class="ident" id="8185005">C</span><span class="op" id="8185006">:</span>&nbsp;<span class="ident" id="8185008">c</span><span class="op" id="8185009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185013">for</span>&nbsp;<span class="ident" id="8185017">x</span>&nbsp;<span class="op" id="8185019">:=</span>&nbsp;<span class="ident" id="8185022">b</span><span class="op" id="8185023">.</span><span class="ident" id="8185024">Min</span><span class="op" id="8185027">.</span><span class="ident" id="8185028">X</span><span class="op" id="8185029">;</span>&nbsp;<span class="ident" id="8185031">x</span>&nbsp;<span class="op" id="8185033">&lt;</span>&nbsp;<span class="ident" id="8185035">b</span><span class="op" id="8185036">.</span><span class="ident" id="8185037">Max</span><span class="op" id="8185040">.</span><span class="ident" id="8185041">X</span><span class="op" id="8185042">;</span>&nbsp;<span class="ident" id="8185044">x</span><span class="op" id="8185045">++</span>&nbsp;<span class="op" id="8185048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185053">DrawMask</span><span class="op" id="8185061">(</span><span class="ident" id="8185062">m</span><span class="op" id="8185063">,</span>&nbsp;<span class="ident" id="8185065">image</span><span class="op" id="8185070">.</span><span class="ident" id="8185071">Rect</span><span class="op" id="8185075">(</span><span class="ident" id="8185076">x</span><span class="op" id="8185077">,</span>&nbsp;<span class="ident" id="8185079">b</span><span class="op" id="8185080">.</span><span class="ident" id="8185081">Min</span><span class="op" id="8185084">.</span><span class="ident" id="8185085">Y</span><span class="op" id="8185086">,</span>&nbsp;<span class="ident" id="8185088">x</span><span class="op" id="8185089">+</span><span class="num" id="8185090">1</span><span class="op" id="8185091">,</span>&nbsp;<span class="ident" id="8185093">b</span><span class="op" id="8185094">.</span><span class="ident" id="8185095">Max</span><span class="op" id="8185098">.</span><span class="ident" id="8185099">Y</span><span class="op" id="8185100">)</span><span class="op" id="8185101">,</span>&nbsp;<span class="ident" id="8185103">src</span><span class="op" id="8185106">,</span>&nbsp;<span class="ident" id="8185108">image</span><span class="op" id="8185113">.</span><span class="ident" id="8185114">ZP</span><span class="op" id="8185116">,</span>&nbsp;<span class="ident" id="8185118">nil</span><span class="op" id="8185121">,</span>&nbsp;<span class="ident" id="8185123">image</span><span class="op" id="8185128">.</span><span class="ident" id="8185129">ZP</span><span class="op" id="8185131">,</span>&nbsp;<span class="ident" id="8185133">Src</span><span class="op" id="8185136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8185140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185144">check</span><span class="op" id="8185149">(</span><span class="string" id="8185150">&#34;column&#34;</span><span class="op" id="8185158">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8185162">//&nbsp;Draw&nbsp;the&nbsp;whole&nbsp;image&nbsp;at&nbsp;once.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185197">c</span>&nbsp;<span class="op" id="8185199">=</span>&nbsp;<span class="ident" id="8185201">color</span><span class="op" id="8185206">.</span><span class="ident" id="8185207">RGBA</span><span class="op" id="8185211">{</span><span class="num" id="8185212">44</span><span class="op" id="8185214">,</span>&nbsp;<span class="num" id="8185216">55</span><span class="op" id="8185218">,</span>&nbsp;<span class="num" id="8185220">66</span><span class="op" id="8185222">,</span>&nbsp;<span class="num" id="8185224">77</span><span class="op" id="8185226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185230">src</span>&nbsp;<span class="op" id="8185234">=</span>&nbsp;<span class="op" id="8185236">&amp;</span><span class="ident" id="8185237">image</span><span class="op" id="8185242">.</span><span class="ident" id="8185243">Uniform</span><span class="op" id="8185250">{</span><span class="ident" id="8185251">C</span><span class="op" id="8185252">:</span>&nbsp;<span class="ident" id="8185254">c</span><span class="op" id="8185255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185259">DrawMask</span><span class="op" id="8185267">(</span><span class="ident" id="8185268">m</span><span class="op" id="8185269">,</span>&nbsp;<span class="ident" id="8185271">b</span><span class="op" id="8185272">,</span>&nbsp;<span class="ident" id="8185274">src</span><span class="op" id="8185277">,</span>&nbsp;<span class="ident" id="8185279">image</span><span class="op" id="8185284">.</span><span class="ident" id="8185285">ZP</span><span class="op" id="8185287">,</span>&nbsp;<span class="ident" id="8185289">nil</span><span class="op" id="8185292">,</span>&nbsp;<span class="ident" id="8185294">image</span><span class="op" id="8185299">.</span><span class="ident" id="8185300">ZP</span><span class="op" id="8185302">,</span>&nbsp;<span class="ident" id="8185304">Src</span><span class="op" id="8185307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185311">check</span><span class="op" id="8185316">(</span><span class="string" id="8185317">&#34;whole&#34;</span><span class="op" id="8185324">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8185327">}</span><br>
<span class="lineno"></span><span class="op" id="8185329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8185332">//&nbsp;TestFloydSteinbergCheckerboard&nbsp;tests&nbsp;that&nbsp;the&nbsp;result&nbsp;of&nbsp;Floyd-Steinberg</span><br>
<span class="lineno"></span><span class="comment" id="8185407">//&nbsp;error&nbsp;diffusion&nbsp;of&nbsp;a&nbsp;uniform&nbsp;50%&nbsp;gray&nbsp;source&nbsp;image&nbsp;with&nbsp;a&nbsp;black-and-white</span><br>
<span class="lineno">360</span><span class="comment" id="8185484">//&nbsp;palette&nbsp;is&nbsp;a&nbsp;checkerboard&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="keyword" id="8185522">func</span>&nbsp;<span class="ident" id="8185527">TestFloydSteinbergCheckerboard</span><span class="op" id="8185557">(</span><span class="ident" id="8185558">t</span>&nbsp;<span class="op" id="8185560">*</span><span class="ident" id="8185561">testing</span><span class="op" id="8185568">.</span><span class="ident" id="8185569">T</span><span class="op" id="8185570">)</span>&nbsp;<span class="op" id="8185572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185575">b</span>&nbsp;<span class="op" id="8185577">:=</span>&nbsp;<span class="ident" id="8185580">image</span><span class="op" id="8185585">.</span><span class="ident" id="8185586">Rect</span><span class="op" id="8185590">(</span><span class="num" id="8185591">0</span><span class="op" id="8185592">,</span>&nbsp;<span class="num" id="8185594">0</span><span class="op" id="8185595">,</span>&nbsp;<span class="num" id="8185597">640</span><span class="op" id="8185600">,</span>&nbsp;<span class="num" id="8185602">480</span><span class="op" id="8185605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8185608">//&nbsp;We&nbsp;can&#39;t&nbsp;represent&nbsp;50%&nbsp;exactly,&nbsp;but&nbsp;0x7fff&nbsp;/&nbsp;0xffff&nbsp;is&nbsp;close&nbsp;enough.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185681">src</span>&nbsp;<span class="op" id="8185685">:=</span>&nbsp;<span class="op" id="8185688">&amp;</span><span class="ident" id="8185689">image</span><span class="op" id="8185694">.</span><span class="ident" id="8185695">Uniform</span><span class="op" id="8185702">{</span><span class="ident" id="8185703">color</span><span class="op" id="8185708">.</span><span class="ident" id="8185709">Gray16</span><span class="op" id="8185715">{</span><span class="num" id="8185716">0x7fff</span><span class="op" id="8185722">}</span><span class="op" id="8185723">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185726">dst</span>&nbsp;<span class="op" id="8185730">:=</span>&nbsp;<span class="ident" id="8185733">image</span><span class="op" id="8185738">.</span><span class="ident" id="8185739">NewPaletted</span><span class="op" id="8185750">(</span><span class="ident" id="8185751">b</span><span class="op" id="8185752">,</span>&nbsp;<span class="ident" id="8185754">color</span><span class="op" id="8185759">.</span><span class="ident" id="8185760">Palette</span><span class="op" id="8185767">{</span><span class="ident" id="8185768">color</span><span class="op" id="8185773">.</span><span class="ident" id="8185774">Black</span><span class="op" id="8185779">,</span>&nbsp;<span class="ident" id="8185781">color</span><span class="op" id="8185786">.</span><span class="ident" id="8185787">White</span><span class="op" id="8185792">}</span><span class="op" id="8185793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185796">FloydSteinberg</span><span class="op" id="8185810">.</span><span class="ident" id="8185811">Draw</span><span class="op" id="8185815">(</span><span class="ident" id="8185816">dst</span><span class="op" id="8185819">,</span>&nbsp;<span class="ident" id="8185821">b</span><span class="op" id="8185822">,</span>&nbsp;<span class="ident" id="8185824">src</span><span class="op" id="8185827">,</span>&nbsp;<span class="ident" id="8185829">image</span><span class="op" id="8185834">.</span><span class="ident" id="8185835">Point</span><span class="op" id="8185840">{</span><span class="op" id="8185841">}</span><span class="op" id="8185842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185845">nErr</span>&nbsp;<span class="op" id="8185850">:=</span>&nbsp;<span class="num" id="8185853">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185856">for</span>&nbsp;<span class="ident" id="8185860">y</span>&nbsp;<span class="op" id="8185862">:=</span>&nbsp;<span class="ident" id="8185865">b</span><span class="op" id="8185866">.</span><span class="ident" id="8185867">Min</span><span class="op" id="8185870">.</span><span class="ident" id="8185871">Y</span><span class="op" id="8185872">;</span>&nbsp;<span class="ident" id="8185874">y</span>&nbsp;<span class="op" id="8185876">&lt;</span>&nbsp;<span class="ident" id="8185878">b</span><span class="op" id="8185879">.</span><span class="ident" id="8185880">Max</span><span class="op" id="8185883">.</span><span class="ident" id="8185884">Y</span><span class="op" id="8185885">;</span>&nbsp;<span class="ident" id="8185887">y</span><span class="op" id="8185888">++</span>&nbsp;<span class="op" id="8185891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185895">for</span>&nbsp;<span class="ident" id="8185899">x</span>&nbsp;<span class="op" id="8185901">:=</span>&nbsp;<span class="ident" id="8185904">b</span><span class="op" id="8185905">.</span><span class="ident" id="8185906">Min</span><span class="op" id="8185909">.</span><span class="ident" id="8185910">X</span><span class="op" id="8185911">;</span>&nbsp;<span class="ident" id="8185913">x</span>&nbsp;<span class="op" id="8185915">&lt;</span>&nbsp;<span class="ident" id="8185917">b</span><span class="op" id="8185918">.</span><span class="ident" id="8185919">Max</span><span class="op" id="8185922">.</span><span class="ident" id="8185923">X</span><span class="op" id="8185924">;</span>&nbsp;<span class="ident" id="8185926">x</span><span class="op" id="8185927">++</span>&nbsp;<span class="op" id="8185930">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185935">got</span>&nbsp;<span class="op" id="8185939">:=</span>&nbsp;<span class="ident" id="8185942">dst</span><span class="op" id="8185945">.</span><span class="ident" id="8185946">Pix</span><span class="op" id="8185949">[</span><span class="ident" id="8185950">dst</span><span class="op" id="8185953">.</span><span class="ident" id="8185954">PixOffset</span><span class="op" id="8185963">(</span><span class="ident" id="8185964">x</span><span class="op" id="8185965">,</span>&nbsp;<span class="ident" id="8185967">y</span><span class="op" id="8185968">)</span><span class="op" id="8185969">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185974">want</span>&nbsp;<span class="op" id="8185979">:=</span>&nbsp;<span class="builtintype" id="8185982">uint8</span><span class="op" id="8185987">(</span><span class="ident" id="8185988">x</span><span class="op" id="8185989">+</span><span class="ident" id="8185990">y</span><span class="op" id="8185991">)</span>&nbsp;<span class="op" id="8185993">%</span>&nbsp;<span class="num" id="8185995">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8186000">if</span>&nbsp;<span class="ident" id="8186003">got</span>&nbsp;<span class="op" id="8186007">!=</span>&nbsp;<span class="ident" id="8186010">want</span>&nbsp;<span class="op" id="8186015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186021">t</span><span class="op" id="8186022">.</span><span class="ident" id="8186023">Errorf</span><span class="op" id="8186029">(</span><span class="string" id="8186030">&#34;at&nbsp;(%d,&nbsp;%d):&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8186060">,</span>&nbsp;<span class="ident" id="8186062">x</span><span class="op" id="8186063">,</span>&nbsp;<span class="ident" id="8186065">y</span><span class="op" id="8186066">,</span>&nbsp;<span class="ident" id="8186068">got</span><span class="op" id="8186071">,</span>&nbsp;<span class="ident" id="8186073">want</span><span class="op" id="8186077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8186083">if</span>&nbsp;<span class="ident" id="8186086">nErr</span><span class="op" id="8186090">++</span><span class="op" id="8186092">;</span>&nbsp;<span class="ident" id="8186094">nErr</span>&nbsp;<span class="op" id="8186099">==</span>&nbsp;<span class="num" id="8186102">10</span>&nbsp;<span class="op" id="8186105">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186112">t</span><span class="op" id="8186113">.</span><span class="ident" id="8186114">Fatal</span><span class="op" id="8186119">(</span><span class="string" id="8186120">&#34;there&nbsp;may&nbsp;be&nbsp;more&nbsp;errors&#34;</span><span class="op" id="8186146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8186152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8186157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8186161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8186164">}</span><br>
<span class="lineno">380</span><span class="op" id="8186166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8186169">//&nbsp;embeddedPaletted&nbsp;is&nbsp;an&nbsp;Image&nbsp;that&nbsp;behaves&nbsp;like&nbsp;an&nbsp;*image.Paletted&nbsp;but&nbsp;whose</span><br>
<span class="lineno"></span><span class="comment" id="8186248">//&nbsp;type&nbsp;is&nbsp;not&nbsp;*image.Paletted.</span><br>
<span class="lineno"></span><span class="keyword" id="8186280">type</span>&nbsp;<span class="ident" id="8186285">embeddedPaletted</span>&nbsp;<span class="keyword" id="8186302">struct</span>&nbsp;<span class="op" id="8186309">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8186312">*</span><span class="ident" id="8186313">image</span><span class="op" id="8186318">.</span><span class="ident" id="8186319">Paletted</span><br>
<span class="lineno"></span><span class="op" id="8186328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8186331">//&nbsp;TestPaletted&nbsp;tests&nbsp;that&nbsp;the&nbsp;drawPaletted&nbsp;function&nbsp;behaves&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="8186401">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;dst&nbsp;is&nbsp;an&nbsp;*image.Paletted.</span><br>
<span class="lineno">390</span><span class="keyword" id="8186453">func</span>&nbsp;<span class="ident" id="8186458">TestPaletted</span><span class="op" id="8186470">(</span><span class="ident" id="8186471">t</span>&nbsp;<span class="op" id="8186473">*</span><span class="ident" id="8186474">testing</span><span class="op" id="8186481">.</span><span class="ident" id="8186482">T</span><span class="op" id="8186483">)</span>&nbsp;<span class="op" id="8186485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186488">f</span><span class="op" id="8186489">,</span>&nbsp;<span class="ident" id="8186491">err</span>&nbsp;<span class="op" id="8186495">:=</span>&nbsp;<span class="ident" id="8186498">os</span><span class="op" id="8186500">.</span><span class="ident" id="8186501">Open</span><span class="op" id="8186505">(</span><span class="string" id="8186506">&#34;../testdata/video-001.png&#34;</span><span class="op" id="8186533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8186536">if</span>&nbsp;<span class="ident" id="8186539">err</span>&nbsp;<span class="op" id="8186543">!=</span>&nbsp;<span class="ident" id="8186546">nil</span>&nbsp;<span class="op" id="8186550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186554">t</span><span class="op" id="8186555">.</span><span class="ident" id="8186556">Fatalf</span><span class="op" id="8186562">(</span><span class="string" id="8186563">&#34;open:&nbsp;%v&#34;</span><span class="op" id="8186573">,</span>&nbsp;<span class="ident" id="8186575">err</span><span class="op" id="8186578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8186581">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8186584">defer</span>&nbsp;<span class="ident" id="8186590">f</span><span class="op" id="8186591">.</span><span class="ident" id="8186592">Close</span><span class="op" id="8186597">(</span><span class="op" id="8186598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186601">src</span><span class="op" id="8186604">,</span>&nbsp;<span class="ident" id="8186606">err</span>&nbsp;<span class="op" id="8186610">:=</span>&nbsp;<span class="ident" id="8186613">png</span><span class="op" id="8186616">.</span><span class="ident" id="8186617">Decode</span><span class="op" id="8186623">(</span><span class="ident" id="8186624">f</span><span class="op" id="8186625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8186628">if</span>&nbsp;<span class="ident" id="8186631">err</span>&nbsp;<span class="op" id="8186635">!=</span>&nbsp;<span class="ident" id="8186638">nil</span>&nbsp;<span class="op" id="8186642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186646">t</span><span class="op" id="8186647">.</span><span class="ident" id="8186648">Fatalf</span><span class="op" id="8186654">(</span><span class="string" id="8186655">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="8186667">,</span>&nbsp;<span class="ident" id="8186669">err</span><span class="op" id="8186672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8186675">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186678">b</span>&nbsp;<span class="op" id="8186680">:=</span>&nbsp;<span class="ident" id="8186683">src</span><span class="op" id="8186686">.</span><span class="ident" id="8186687">Bounds</span><span class="op" id="8186693">(</span><span class="op" id="8186694">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186698">cgaPalette</span>&nbsp;<span class="op" id="8186709">:=</span>&nbsp;<span class="ident" id="8186712">color</span><span class="op" id="8186717">.</span><span class="ident" id="8186718">Palette</span><span class="op" id="8186725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186729">color</span><span class="op" id="8186734">.</span><span class="ident" id="8186735">RGBA</span><span class="op" id="8186739">{</span><span class="num" id="8186740">0x00</span><span class="op" id="8186744">,</span>&nbsp;<span class="num" id="8186746">0x00</span><span class="op" id="8186750">,</span>&nbsp;<span class="num" id="8186752">0x00</span><span class="op" id="8186756">,</span>&nbsp;<span class="num" id="8186758">0xff</span><span class="op" id="8186762">}</span><span class="op" id="8186763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186767">color</span><span class="op" id="8186772">.</span><span class="ident" id="8186773">RGBA</span><span class="op" id="8186777">{</span><span class="num" id="8186778">0x55</span><span class="op" id="8186782">,</span>&nbsp;<span class="num" id="8186784">0xff</span><span class="op" id="8186788">,</span>&nbsp;<span class="num" id="8186790">0xff</span><span class="op" id="8186794">,</span>&nbsp;<span class="num" id="8186796">0xff</span><span class="op" id="8186800">}</span><span class="op" id="8186801">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186805">color</span><span class="op" id="8186810">.</span><span class="ident" id="8186811">RGBA</span><span class="op" id="8186815">{</span><span class="num" id="8186816">0xff</span><span class="op" id="8186820">,</span>&nbsp;<span class="num" id="8186822">0x55</span><span class="op" id="8186826">,</span>&nbsp;<span class="num" id="8186828">0xff</span><span class="op" id="8186832">,</span>&nbsp;<span class="num" id="8186834">0xff</span><span class="op" id="8186838">}</span><span class="op" id="8186839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186843">color</span><span class="op" id="8186848">.</span><span class="ident" id="8186849">RGBA</span><span class="op" id="8186853">{</span><span class="num" id="8186854">0xff</span><span class="op" id="8186858">,</span>&nbsp;<span class="num" id="8186860">0xff</span><span class="op" id="8186864">,</span>&nbsp;<span class="num" id="8186866">0xff</span><span class="op" id="8186870">,</span>&nbsp;<span class="num" id="8186872">0xff</span><span class="op" id="8186876">}</span><span class="op" id="8186877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8186880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186883">drawers</span>&nbsp;<span class="op" id="8186891">:=</span>&nbsp;<span class="keyword" id="8186894">map</span><span class="op" id="8186897">[</span><span class="builtintype" id="8186898">string</span><span class="op" id="8186904">]</span><span class="ident" id="8186905">Drawer</span><span class="op" id="8186911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8186915">&#34;src&#34;</span><span class="op" id="8186920">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8186934">Src</span><span class="op" id="8186937">,</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8186941">&#34;floyd-steinberg&#34;</span><span class="op" id="8186958">:</span>&nbsp;<span class="ident" id="8186960">FloydSteinberg</span><span class="op" id="8186974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8186977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="8186980">loop</span><span class="op" id="8186984">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8186987">for</span>&nbsp;<span class="ident" id="8186991">dName</span><span class="op" id="8186996">,</span>&nbsp;<span class="ident" id="8186998">d</span>&nbsp;<span class="op" id="8187000">:=</span>&nbsp;<span class="keyword" id="8187003">range</span>&nbsp;<span class="ident" id="8187009">drawers</span>&nbsp;<span class="op" id="8187017">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8187021">dst0</span>&nbsp;<span class="op" id="8187026">:=</span>&nbsp;<span class="ident" id="8187029">image</span><span class="op" id="8187034">.</span><span class="ident" id="8187035">NewPaletted</span><span class="op" id="8187046">(</span><span class="ident" id="8187047">b</span><span class="op" id="8187048">,</span>&nbsp;<span class="ident" id="8187050">cgaPalette</span><span class="op" id="8187060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8187064">dst1</span>&nbsp;<span class="op" id="8187069">:=</span>&nbsp;<span class="ident" id="8187072">image</span><span class="op" id="8187077">.</span><span class="ident" id="8187078">NewPaletted</span><span class="op" id="8187089">(</span><span class="ident" id="8187090">b</span><span class="op" id="8187091">,</span>&nbsp;<span class="ident" id="8187093">cgaPalette</span><span class="op" id="8187103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8187107">d</span><span class="op" id="8187108">.</span><span class="ident" id="8187109">Draw</span><span class="op" id="8187113">(</span><span class="ident" id="8187114">dst0</span><span class="op" id="8187118">,</span>&nbsp;<span class="ident" id="8187120">b</span><span class="op" id="8187121">,</span>&nbsp;<span class="ident" id="8187123">src</span><span class="op" id="8187126">,</span>&nbsp;<span class="ident" id="8187128">image</span><span class="op" id="8187133">.</span><span class="ident" id="8187134">Point</span><span class="op" id="8187139">{</span><span class="op" id="8187140">}</span><span class="op" id="8187141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8187145">d</span><span class="op" id="8187146">.</span><span class="ident" id="8187147">Draw</span><span class="op" id="8187151">(</span><span class="ident" id="8187152">embeddedPaletted</span><span class="op" id="8187168">{</span><span class="ident" id="8187169">dst1</span><span class="op" id="8187173">}</span><span class="op" id="8187174">,</span>&nbsp;<span class="ident" id="8187176">b</span><span class="op" id="8187177">,</span>&nbsp;<span class="ident" id="8187179">src</span><span class="op" id="8187182">,</span>&nbsp;<span class="ident" id="8187184">image</span><span class="op" id="8187189">.</span><span class="ident" id="8187190">Point</span><span class="op" id="8187195">{</span><span class="op" id="8187196">}</span><span class="op" id="8187197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8187201">for</span>&nbsp;<span class="ident" id="8187205">y</span>&nbsp;<span class="op" id="8187207">:=</span>&nbsp;<span class="ident" id="8187210">b</span><span class="op" id="8187211">.</span><span class="ident" id="8187212">Min</span><span class="op" id="8187215">.</span><span class="ident" id="8187216">Y</span><span class="op" id="8187217">;</span>&nbsp;<span class="ident" id="8187219">y</span>&nbsp;<span class="op" id="8187221">&lt;</span>&nbsp;<span class="ident" id="8187223">b</span><span class="op" id="8187224">.</span><span class="ident" id="8187225">Max</span><span class="op" id="8187228">.</span><span class="ident" id="8187229">Y</span><span class="op" id="8187230">;</span>&nbsp;<span class="ident" id="8187232">y</span><span class="op" id="8187233">++</span>&nbsp;<span class="op" id="8187236">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8187241">for</span>&nbsp;<span class="ident" id="8187245">x</span>&nbsp;<span class="op" id="8187247">:=</span>&nbsp;<span class="ident" id="8187250">b</span><span class="op" id="8187251">.</span><span class="ident" id="8187252">Min</span><span class="op" id="8187255">.</span><span class="ident" id="8187256">X</span><span class="op" id="8187257">;</span>&nbsp;<span class="ident" id="8187259">x</span>&nbsp;<span class="op" id="8187261">&lt;</span>&nbsp;<span class="ident" id="8187263">b</span><span class="op" id="8187264">.</span><span class="ident" id="8187265">Max</span><span class="op" id="8187268">.</span><span class="ident" id="8187269">X</span><span class="op" id="8187270">;</span>&nbsp;<span class="ident" id="8187272">x</span><span class="op" id="8187273">++</span>&nbsp;<span class="op" id="8187276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8187282">if</span>&nbsp;<span class="op" id="8187285">!</span><span class="ident" id="8187286">eq</span><span class="op" id="8187288">(</span><span class="ident" id="8187289">dst0</span><span class="op" id="8187293">.</span><span class="ident" id="8187294">At</span><span class="op" id="8187296">(</span><span class="ident" id="8187297">x</span><span class="op" id="8187298">,</span>&nbsp;<span class="ident" id="8187300">y</span><span class="op" id="8187301">)</span><span class="op" id="8187302">,</span>&nbsp;<span class="ident" id="8187304">dst1</span><span class="op" id="8187308">.</span><span class="ident" id="8187309">At</span><span class="op" id="8187311">(</span><span class="ident" id="8187312">x</span><span class="op" id="8187313">,</span>&nbsp;<span class="ident" id="8187315">y</span><span class="op" id="8187316">)</span><span class="op" id="8187317">)</span>&nbsp;<span class="op" id="8187319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8187326">t</span><span class="op" id="8187327">.</span><span class="ident" id="8187328">Errorf</span><span class="op" id="8187334">(</span><span class="string" id="8187335">&#34;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="8187366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8187374">dName</span><span class="op" id="8187379">,</span>&nbsp;<span class="ident" id="8187381">x</span><span class="op" id="8187382">,</span>&nbsp;<span class="ident" id="8187384">y</span><span class="op" id="8187385">,</span>&nbsp;<span class="ident" id="8187387">dst0</span><span class="op" id="8187391">.</span><span class="ident" id="8187392">At</span><span class="op" id="8187394">(</span><span class="ident" id="8187395">x</span><span class="op" id="8187396">,</span>&nbsp;<span class="ident" id="8187398">y</span><span class="op" id="8187399">)</span><span class="op" id="8187400">,</span>&nbsp;<span class="ident" id="8187402">dst1</span><span class="op" id="8187406">.</span><span class="ident" id="8187407">At</span><span class="op" id="8187409">(</span><span class="ident" id="8187410">x</span><span class="op" id="8187411">,</span>&nbsp;<span class="ident" id="8187413">y</span><span class="op" id="8187414">)</span><span class="op" id="8187415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8187422">continue</span>&nbsp;<span class="ident" id="8187431">loop</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8187440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8187445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8187449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8187452">}</span><br>
<span class="lineno"></span><span class="op" id="8187454">}</span>
</div>
</body>
</html>
