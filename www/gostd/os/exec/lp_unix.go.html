<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/exec</h2>
<ul>
<li><a href="/gostd/os/exec/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/exec/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/os/exec/lp_test.go.html">lp_test.go</a></li>
<li><a href="/gostd/os/exec/lp_unix.go.html">lp_unix.go</a></li>
<li><a href="/gostd/os/exec/lp_unix_test.go.html">lp_unix_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5222776">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5222832">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5222886">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5222937">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5223007">package</span>&nbsp;<span class="ident" id="5223015">exec</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5223021">import</span>&nbsp;<span class="op" id="5223028">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5223031">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5223041">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5223047">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="5223057">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5223060">//&nbsp;ErrNotFound&nbsp;is&nbsp;the&nbsp;error&nbsp;resulting&nbsp;if&nbsp;a&nbsp;path&nbsp;search&nbsp;failed&nbsp;to&nbsp;find&nbsp;an&nbsp;executable&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5223150">var</span>&nbsp;<span class="ident" id="5223154">ErrNotFound</span>&nbsp;<span class="op" id="5223166">=</span>&nbsp;<span class="ident" id="5223168">errors</span><span class="op" id="5223174">.</span><span class="ident" id="5223175">New</span><span class="op" id="5223178">(</span><span class="string" id="5223179">&#34;executable&nbsp;file&nbsp;not&nbsp;found&nbsp;in&nbsp;$PATH&#34;</span><span class="op" id="5223215">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5223218">func</span>&nbsp;<span class="ident" id="5223223">findExecutable</span><span class="op" id="5223237">(</span><span class="ident" id="5223238">file</span>&nbsp;<span class="builtintype" id="5223243">string</span><span class="op" id="5223249">)</span>&nbsp;<span class="builtintype" id="5223251">error</span>&nbsp;<span class="op" id="5223257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5223260">d</span><span class="op" id="5223261">,</span>&nbsp;<span class="ident" id="5223263">err</span>&nbsp;<span class="op" id="5223267">:=</span>&nbsp;<span class="ident" id="5223270">os</span><span class="op" id="5223272">.</span><span class="ident" id="5223273">Stat</span><span class="op" id="5223277">(</span><span class="ident" id="5223278">file</span><span class="op" id="5223282">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5223285">if</span>&nbsp;<span class="ident" id="5223288">err</span>&nbsp;<span class="op" id="5223292">!=</span>&nbsp;<span class="ident" id="5223295">nil</span>&nbsp;<span class="op" id="5223299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5223303">return</span>&nbsp;<span class="ident" id="5223310">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5223315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5223318">if</span>&nbsp;<span class="ident" id="5223321">m</span>&nbsp;<span class="op" id="5223323">:=</span>&nbsp;<span class="ident" id="5223326">d</span><span class="op" id="5223327">.</span><span class="ident" id="5223328">Mode</span><span class="op" id="5223332">(</span><span class="op" id="5223333">)</span><span class="op" id="5223334">;</span>&nbsp;<span class="op" id="5223336">!</span><span class="ident" id="5223337">m</span><span class="op" id="5223338">.</span><span class="ident" id="5223339">IsDir</span><span class="op" id="5223344">(</span><span class="op" id="5223345">)</span>&nbsp;<span class="op" id="5223347">&amp;&amp;</span>&nbsp;<span class="ident" id="5223350">m</span><span class="op" id="5223351">&amp;</span><span class="num" id="5223352">0111</span>&nbsp;<span class="op" id="5223357">!=</span>&nbsp;<span class="num" id="5223360">0</span>&nbsp;<span class="op" id="5223362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5223366">return</span>&nbsp;<span class="ident" id="5223373">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5223378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5223381">return</span>&nbsp;<span class="ident" id="5223388">os</span><span class="op" id="5223390">.</span><span class="ident" id="5223391">ErrPermission</span><br>
<span class="lineno"></span><span class="op" id="5223405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5223408">//&nbsp;LookPath&nbsp;searches&nbsp;for&nbsp;an&nbsp;executable&nbsp;binary&nbsp;named&nbsp;file</span><br>
<span class="lineno">30</span><span class="comment" id="5223465">//&nbsp;in&nbsp;the&nbsp;directories&nbsp;named&nbsp;by&nbsp;the&nbsp;PATH&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno"></span><span class="comment" id="5223527">//&nbsp;If&nbsp;file&nbsp;contains&nbsp;a&nbsp;slash,&nbsp;it&nbsp;is&nbsp;tried&nbsp;directly&nbsp;and&nbsp;the&nbsp;PATH&nbsp;is&nbsp;not&nbsp;consulted.</span><br>
<span class="lineno"></span><span class="comment" id="5223608">//&nbsp;The&nbsp;result&nbsp;may&nbsp;be&nbsp;an&nbsp;absolute&nbsp;path&nbsp;or&nbsp;a&nbsp;path&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="5223691">func</span>&nbsp;<span class="ident" id="5223696">LookPath</span><span class="op" id="5223704">(</span><span class="ident" id="5223705">file</span>&nbsp;<span class="builtintype" id="5223710">string</span><span class="op" id="5223716">)</span>&nbsp;<span class="op" id="5223718">(</span><span class="builtintype" id="5223719">string</span><span class="op" id="5223725">,</span>&nbsp;<span class="builtintype" id="5223727">error</span><span class="op" id="5223732">)</span>&nbsp;<span class="op" id="5223734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5223737">//&nbsp;NOTE(rsc):&nbsp;I&nbsp;wish&nbsp;we&nbsp;could&nbsp;use&nbsp;the&nbsp;Plan&nbsp;9&nbsp;behavior&nbsp;here</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5223797">//&nbsp;(only&nbsp;bypass&nbsp;the&nbsp;path&nbsp;if&nbsp;file&nbsp;begins&nbsp;with&nbsp;/&nbsp;or&nbsp;./&nbsp;or&nbsp;../)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5223859">//&nbsp;but&nbsp;that&nbsp;would&nbsp;not&nbsp;match&nbsp;all&nbsp;the&nbsp;Unix&nbsp;shells.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5223910">if</span>&nbsp;<span class="ident" id="5223913">strings</span><span class="op" id="5223920">.</span><span class="ident" id="5223921">Contains</span><span class="op" id="5223929">(</span><span class="ident" id="5223930">file</span><span class="op" id="5223934">,</span>&nbsp;<span class="string" id="5223936">&#34;/&#34;</span><span class="op" id="5223939">)</span>&nbsp;<span class="op" id="5223941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5223945">err</span>&nbsp;<span class="op" id="5223949">:=</span>&nbsp;<span class="ident" id="5223952">findExecutable</span><span class="op" id="5223966">(</span><span class="ident" id="5223967">file</span><span class="op" id="5223971">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5223975">if</span>&nbsp;<span class="ident" id="5223978">err</span>&nbsp;<span class="op" id="5223982">==</span>&nbsp;<span class="ident" id="5223985">nil</span>&nbsp;<span class="op" id="5223989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5223994">return</span>&nbsp;<span class="ident" id="5224001">file</span><span class="op" id="5224005">,</span>&nbsp;<span class="ident" id="5224007">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5224013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5224017">return</span>&nbsp;<span class="string" id="5224024">&#34;&#34;</span><span class="op" id="5224026">,</span>&nbsp;<span class="op" id="5224028">&amp;</span><span class="ident" id="5224029">Error</span><span class="op" id="5224034">{</span><span class="ident" id="5224035">file</span><span class="op" id="5224039">,</span>&nbsp;<span class="ident" id="5224041">err</span><span class="op" id="5224044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5224047">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5224050">pathenv</span>&nbsp;<span class="op" id="5224058">:=</span>&nbsp;<span class="ident" id="5224061">os</span><span class="op" id="5224063">.</span><span class="ident" id="5224064">Getenv</span><span class="op" id="5224070">(</span><span class="string" id="5224071">&#34;PATH&#34;</span><span class="op" id="5224077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5224080">if</span>&nbsp;<span class="ident" id="5224083">pathenv</span>&nbsp;<span class="op" id="5224091">==</span>&nbsp;<span class="string" id="5224094">&#34;&#34;</span>&nbsp;<span class="op" id="5224097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5224101">return</span>&nbsp;<span class="string" id="5224108">&#34;&#34;</span><span class="op" id="5224110">,</span>&nbsp;<span class="op" id="5224112">&amp;</span><span class="ident" id="5224113">Error</span><span class="op" id="5224118">{</span><span class="ident" id="5224119">file</span><span class="op" id="5224123">,</span>&nbsp;<span class="ident" id="5224125">ErrNotFound</span><span class="op" id="5224136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5224139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5224142">for</span>&nbsp;<span class="ident" id="5224146">_</span><span class="op" id="5224147">,</span>&nbsp;<span class="ident" id="5224149">dir</span>&nbsp;<span class="op" id="5224153">:=</span>&nbsp;<span class="keyword" id="5224156">range</span>&nbsp;<span class="ident" id="5224162">strings</span><span class="op" id="5224169">.</span><span class="ident" id="5224170">Split</span><span class="op" id="5224175">(</span><span class="ident" id="5224176">pathenv</span><span class="op" id="5224183">,</span>&nbsp;<span class="string" id="5224185">&#34;:&#34;</span><span class="op" id="5224188">)</span>&nbsp;<span class="op" id="5224190">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5224194">if</span>&nbsp;<span class="ident" id="5224197">dir</span>&nbsp;<span class="op" id="5224201">==</span>&nbsp;<span class="string" id="5224204">&#34;&#34;</span>&nbsp;<span class="op" id="5224207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5224212">//&nbsp;Unix&nbsp;shell&nbsp;semantics:&nbsp;path&nbsp;element&nbsp;&#34;&#34;&nbsp;means&nbsp;&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5224266">dir</span>&nbsp;<span class="op" id="5224270">=</span>&nbsp;<span class="string" id="5224272">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5224278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5224282">path</span>&nbsp;<span class="op" id="5224287">:=</span>&nbsp;<span class="ident" id="5224290">dir</span>&nbsp;<span class="op" id="5224294">+</span>&nbsp;<span class="string" id="5224296">&#34;/&#34;</span>&nbsp;<span class="op" id="5224300">+</span>&nbsp;<span class="ident" id="5224302">file</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5224309">if</span>&nbsp;<span class="ident" id="5224312">err</span>&nbsp;<span class="op" id="5224316">:=</span>&nbsp;<span class="ident" id="5224319">findExecutable</span><span class="op" id="5224333">(</span><span class="ident" id="5224334">path</span><span class="op" id="5224338">)</span><span class="op" id="5224339">;</span>&nbsp;<span class="ident" id="5224341">err</span>&nbsp;<span class="op" id="5224345">==</span>&nbsp;<span class="ident" id="5224348">nil</span>&nbsp;<span class="op" id="5224352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5224357">return</span>&nbsp;<span class="ident" id="5224364">path</span><span class="op" id="5224368">,</span>&nbsp;<span class="ident" id="5224370">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5224376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5224379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5224382">return</span>&nbsp;<span class="string" id="5224389">&#34;&#34;</span><span class="op" id="5224391">,</span>&nbsp;<span class="op" id="5224393">&amp;</span><span class="ident" id="5224394">Error</span><span class="op" id="5224399">{</span><span class="ident" id="5224400">file</span><span class="op" id="5224404">,</span>&nbsp;<span class="ident" id="5224406">ErrNotFound</span><span class="op" id="5224417">}</span><br>
<span class="lineno">60</span><span class="op" id="5224419">}</span>
</div>
</body>
</html>
