<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4810198">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4810254">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4810308">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4810359">//&nbsp;Package&nbsp;utf16&nbsp;implements&nbsp;encoding&nbsp;and&nbsp;decoding&nbsp;of&nbsp;UTF-16&nbsp;sequences.</span><br>
<span class="lineno"></span><span class="keyword" id="4810430">package</span>&nbsp;<span class="ident" id="4810438">utf16</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4810445">//&nbsp;The&nbsp;conditions&nbsp;replacementChar==unicode.ReplacementChar&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4810508">//&nbsp;maxRune==unicode.MaxRune&nbsp;are&nbsp;verified&nbsp;in&nbsp;the&nbsp;tests.</span><br>
<span class="lineno">10</span><span class="comment" id="4810563">//&nbsp;Defining&nbsp;them&nbsp;locally&nbsp;avoids&nbsp;this&nbsp;package&nbsp;depending&nbsp;on&nbsp;package&nbsp;unicode.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4810639">const</span>&nbsp;<span class="op" id="4810645">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4810648">replacementChar</span>&nbsp;<span class="op" id="4810664">=</span>&nbsp;<span class="string" id="4810666">&#39;\uFFFD&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4810679">//&nbsp;Unicode&nbsp;replacement&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4810713">maxRune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4810729">=</span>&nbsp;<span class="string" id="4810731">&#39;\U0010FFFF&#39;</span>&nbsp;<span class="comment" id="4810744">//&nbsp;Maximum&nbsp;valid&nbsp;Unicode&nbsp;code&nbsp;point.</span><br>
<span class="lineno">15</span><span class="op" id="4810781">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4810784">const</span>&nbsp;<span class="op" id="4810790">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4810793">//&nbsp;0xd800-0xdc00&nbsp;encodes&nbsp;the&nbsp;high&nbsp;10&nbsp;bits&nbsp;of&nbsp;a&nbsp;pair.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4810847">//&nbsp;0xdc00-0xe000&nbsp;encodes&nbsp;the&nbsp;low&nbsp;10&nbsp;bits&nbsp;of&nbsp;a&nbsp;pair.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4810900">//&nbsp;the&nbsp;value&nbsp;is&nbsp;those&nbsp;20&nbsp;bits&nbsp;plus&nbsp;0x10000.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4810945">surr1</span>&nbsp;<span class="op" id="4810951">=</span>&nbsp;<span class="num" id="4810953">0xd800</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4810961">surr2</span>&nbsp;<span class="op" id="4810967">=</span>&nbsp;<span class="num" id="4810969">0xdc00</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4810977">surr3</span>&nbsp;<span class="op" id="4810983">=</span>&nbsp;<span class="num" id="4810985">0xe000</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4810994">surrSelf</span>&nbsp;<span class="op" id="4811003">=</span>&nbsp;<span class="num" id="4811005">0x10000</span><br>
<span class="lineno"></span><span class="op" id="4811013">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4811016">//&nbsp;IsSurrogate&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;specified&nbsp;Unicode&nbsp;code&nbsp;point</span><br>
<span class="lineno"></span><span class="comment" id="4811080">//&nbsp;can&nbsp;appear&nbsp;in&nbsp;a&nbsp;surrogate&nbsp;pair.</span><br>
<span class="lineno">30</span><span class="keyword" id="4811115">func</span>&nbsp;<span class="ident" id="4811120">IsSurrogate</span><span class="op" id="4811131">(</span><span class="ident" id="4811132">r</span>&nbsp;<span class="builtintype" id="4811134">rune</span><span class="op" id="4811138">)</span>&nbsp;<span class="builtintype" id="4811140">bool</span>&nbsp;<span class="op" id="4811145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811148">return</span>&nbsp;<span class="ident" id="4811155"><a href="/unicode/utf16/utf16.go.html#4810945">surr1</a></span>&nbsp;<span class="op" id="4811161">&lt;=</span>&nbsp;<span class="ident" id="4811164"><a href="/unicode/utf16/utf16.go.html#4811132">r</a></span>&nbsp;<span class="op" id="4811166">&amp;&amp;</span>&nbsp;<span class="ident" id="4811169"><a href="/unicode/utf16/utf16.go.html#4811132">r</a></span>&nbsp;<span class="op" id="4811171">&lt;</span>&nbsp;<span class="ident" id="4811173"><a href="/unicode/utf16/utf16.go.html#4810977">surr3</a></span><br>
<span class="lineno"></span><span class="op" id="4811179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4811182">//&nbsp;DecodeRune&nbsp;returns&nbsp;the&nbsp;UTF-16&nbsp;decoding&nbsp;of&nbsp;a&nbsp;surrogate&nbsp;pair.</span><br>
<span class="lineno">35</span><span class="comment" id="4811245">//&nbsp;If&nbsp;the&nbsp;pair&nbsp;is&nbsp;not&nbsp;a&nbsp;valid&nbsp;UTF-16&nbsp;surrogate&nbsp;pair,&nbsp;DecodeRune&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="4811317">//&nbsp;the&nbsp;Unicode&nbsp;replacement&nbsp;code&nbsp;point&nbsp;U+FFFD.</span><br>
<span class="lineno"></span><span class="keyword" id="4811363">func</span>&nbsp;<span class="ident" id="4811368">DecodeRune</span><span class="op" id="4811378">(</span><span class="ident" id="4811379">r1</span><span class="op" id="4811381">,</span>&nbsp;<span class="ident" id="4811383">r2</span>&nbsp;<span class="builtintype" id="4811386">rune</span><span class="op" id="4811390">)</span>&nbsp;<span class="builtintype" id="4811392">rune</span>&nbsp;<span class="op" id="4811397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811400">if</span>&nbsp;<span class="ident" id="4811403"><a href="/unicode/utf16/utf16.go.html#4810945">surr1</a></span>&nbsp;<span class="op" id="4811409">&lt;=</span>&nbsp;<span class="ident" id="4811412"><a href="/unicode/utf16/utf16.go.html#4811379">r1</a></span>&nbsp;<span class="op" id="4811415">&amp;&amp;</span>&nbsp;<span class="ident" id="4811418"><a href="/unicode/utf16/utf16.go.html#4811379">r1</a></span>&nbsp;<span class="op" id="4811421">&lt;</span>&nbsp;<span class="ident" id="4811423"><a href="/unicode/utf16/utf16.go.html#4810961">surr2</a></span>&nbsp;<span class="op" id="4811429">&amp;&amp;</span>&nbsp;<span class="ident" id="4811432"><a href="/unicode/utf16/utf16.go.html#4810961">surr2</a></span>&nbsp;<span class="op" id="4811438">&lt;=</span>&nbsp;<span class="ident" id="4811441"><a href="/unicode/utf16/utf16.go.html#4811383">r2</a></span>&nbsp;<span class="op" id="4811444">&amp;&amp;</span>&nbsp;<span class="ident" id="4811447"><a href="/unicode/utf16/utf16.go.html#4811383">r2</a></span>&nbsp;<span class="op" id="4811450">&lt;</span>&nbsp;<span class="ident" id="4811452"><a href="/unicode/utf16/utf16.go.html#4810977">surr3</a></span>&nbsp;<span class="op" id="4811458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811462">return</span>&nbsp;<span class="op" id="4811469">(</span><span class="ident" id="4811470"><a href="/unicode/utf16/utf16.go.html#4811379">r1</a></span><span class="op" id="4811472">-</span><span class="ident" id="4811473"><a href="/unicode/utf16/utf16.go.html#4810945">surr1</a></span><span class="op" id="4811478">)</span><span class="op" id="4811479">&lt;&lt;</span><span class="num" id="4811481">10</span>&nbsp;<span class="op" id="4811484">|</span>&nbsp;<span class="op" id="4811486">(</span><span class="ident" id="4811487"><a href="/unicode/utf16/utf16.go.html#4811383">r2</a></span>&nbsp;<span class="op" id="4811490">-</span>&nbsp;<span class="ident" id="4811492"><a href="/unicode/utf16/utf16.go.html#4810961">surr2</a></span><span class="op" id="4811497">)</span>&nbsp;<span class="op" id="4811499">+</span>&nbsp;<span class="num" id="4811501">0x10000</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4811510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811513">return</span>&nbsp;<span class="ident" id="4811520"><a href="/unicode/utf16/utf16.go.html#4810648">replacementChar</a></span><br>
<span class="lineno"></span><span class="op" id="4811536">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4811539">//&nbsp;EncodeRune&nbsp;returns&nbsp;the&nbsp;UTF-16&nbsp;surrogate&nbsp;pair&nbsp;r1,&nbsp;r2&nbsp;for&nbsp;the&nbsp;given&nbsp;rune.</span><br>
<span class="lineno">45</span><span class="comment" id="4811614">//&nbsp;If&nbsp;the&nbsp;rune&nbsp;is&nbsp;not&nbsp;a&nbsp;valid&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;or&nbsp;does&nbsp;not&nbsp;need&nbsp;encoding,</span><br>
<span class="lineno"></span><span class="comment" id="4811690">//&nbsp;EncodeRune&nbsp;returns&nbsp;U+FFFD,&nbsp;U+FFFD.</span><br>
<span class="lineno"></span><span class="keyword" id="4811728">func</span>&nbsp;<span class="ident" id="4811733">EncodeRune</span><span class="op" id="4811743">(</span><span class="ident" id="4811744">r</span>&nbsp;<span class="builtintype" id="4811746">rune</span><span class="op" id="4811750">)</span>&nbsp;<span class="op" id="4811752">(</span><span class="ident" id="4811753">r1</span><span class="op" id="4811755">,</span>&nbsp;<span class="ident" id="4811757">r2</span>&nbsp;<span class="builtintype" id="4811760">rune</span><span class="op" id="4811764">)</span>&nbsp;<span class="op" id="4811766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811769">if</span>&nbsp;<span class="ident" id="4811772"><a href="/unicode/utf16/utf16.go.html#4811744">r</a></span>&nbsp;<span class="op" id="4811774">&lt;</span>&nbsp;<span class="ident" id="4811776"><a href="/unicode/utf16/utf16.go.html#4810994">surrSelf</a></span>&nbsp;<span class="op" id="4811785">||</span>&nbsp;<span class="ident" id="4811788"><a href="/unicode/utf16/utf16.go.html#4811744">r</a></span>&nbsp;<span class="op" id="4811790">&gt;</span>&nbsp;<span class="ident" id="4811792"><a href="/unicode/utf16/utf16.go.html#4810713">maxRune</a></span>&nbsp;<span class="op" id="4811800">||</span>&nbsp;<span class="ident" id="4811803"><a href="/unicode/utf16/utf16.go.html#4811120">IsSurrogate</a></span><span class="op" id="4811814">(</span><span class="ident" id="4811815"><a href="/unicode/utf16/utf16.go.html#4811744">r</a></span><span class="op" id="4811816">)</span>&nbsp;<span class="op" id="4811818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811822">return</span>&nbsp;<span class="ident" id="4811829"><a href="/unicode/utf16/utf16.go.html#4810648">replacementChar</a></span><span class="op" id="4811844">,</span>&nbsp;<span class="ident" id="4811846"><a href="/unicode/utf16/utf16.go.html#4810648">replacementChar</a></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4811863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4811866"><a href="/unicode/utf16/utf16.go.html#4811744">r</a></span>&nbsp;<span class="op" id="4811868">-=</span>&nbsp;<span class="ident" id="4811871"><a href="/unicode/utf16/utf16.go.html#4810994">surrSelf</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811881">return</span>&nbsp;<span class="ident" id="4811888"><a href="/unicode/utf16/utf16.go.html#4810945">surr1</a></span>&nbsp;<span class="op" id="4811894">+</span>&nbsp;<span class="op" id="4811896">(</span><span class="ident" id="4811897"><a href="/unicode/utf16/utf16.go.html#4811744">r</a></span><span class="op" id="4811898">&gt;&gt;</span><span class="num" id="4811900">10</span><span class="op" id="4811902">)</span><span class="op" id="4811903">&amp;</span><span class="num" id="4811904">0x3ff</span><span class="op" id="4811909">,</span>&nbsp;<span class="ident" id="4811911"><a href="/unicode/utf16/utf16.go.html#4810961">surr2</a></span>&nbsp;<span class="op" id="4811917">+</span>&nbsp;<span class="ident" id="4811919"><a href="/unicode/utf16/utf16.go.html#4811744">r</a></span><span class="op" id="4811920">&amp;</span><span class="num" id="4811921">0x3ff</span><br>
<span class="lineno"></span><span class="op" id="4811927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="4811930">//&nbsp;Encode&nbsp;returns&nbsp;the&nbsp;UTF-16&nbsp;encoding&nbsp;of&nbsp;the&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;sequence&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4812006">func</span>&nbsp;<span class="ident" id="4812011">Encode</span><span class="op" id="4812017">(</span><span class="ident" id="4812018">s</span>&nbsp;<span class="op" id="4812020">[</span><span class="op" id="4812021">]</span><span class="builtintype" id="4812022">rune</span><span class="op" id="4812026">)</span>&nbsp;<span class="op" id="4812028">[</span><span class="op" id="4812029">]</span><span class="builtintype" id="4812030">uint16</span>&nbsp;<span class="op" id="4812037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812040">n</span>&nbsp;<span class="op" id="4812042">:=</span>&nbsp;<span class="builtinfunc" id="4812045">len</span><span class="op" id="4812048">(</span><span class="ident" id="4812049"><a href="/unicode/utf16/utf16.go.html#4812018">s</a></span><span class="op" id="4812050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812053">for</span>&nbsp;<span class="ident" id="4812057">_</span><span class="op" id="4812058">,</span>&nbsp;<span class="ident" id="4812060">v</span>&nbsp;<span class="op" id="4812062">:=</span>&nbsp;<span class="keyword" id="4812065">range</span>&nbsp;<span class="ident" id="4812071"><a href="/unicode/utf16/utf16.go.html#4812018">s</a></span>&nbsp;<span class="op" id="4812073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812077">if</span>&nbsp;<span class="ident" id="4812080"><a href="/unicode/utf16/utf16.go.html#4812060">v</a></span>&nbsp;<span class="op" id="4812082">&gt;=</span>&nbsp;<span class="ident" id="4812085"><a href="/unicode/utf16/utf16.go.html#4810994">surrSelf</a></span>&nbsp;<span class="op" id="4812094">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812099"><a href="/unicode/utf16/utf16.go.html#4812040">n</a></span><span class="op" id="4812100">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4812105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4812108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812112">a</span>&nbsp;<span class="op" id="4812114">:=</span>&nbsp;<span class="builtinfunc" id="4812117">make</span><span class="op" id="4812121">(</span><span class="op" id="4812122">[</span><span class="op" id="4812123">]</span><span class="builtintype" id="4812124">uint16</span><span class="op" id="4812130">,</span>&nbsp;<span class="ident" id="4812132"><a href="/unicode/utf16/utf16.go.html#4812040">n</a></span><span class="op" id="4812133">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812136"><a href="/unicode/utf16/utf16.go.html#4812040">n</a></span>&nbsp;<span class="op" id="4812138">=</span>&nbsp;<span class="num" id="4812140">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812143">for</span>&nbsp;<span class="ident" id="4812147">_</span><span class="op" id="4812148">,</span>&nbsp;<span class="ident" id="4812150">v</span>&nbsp;<span class="op" id="4812152">:=</span>&nbsp;<span class="keyword" id="4812155">range</span>&nbsp;<span class="ident" id="4812161"><a href="/unicode/utf16/utf16.go.html#4812018">s</a></span>&nbsp;<span class="op" id="4812163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812167">switch</span>&nbsp;<span class="op" id="4812174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812178">case</span>&nbsp;<span class="ident" id="4812183"><a href="/unicode/utf16/utf16.go.html#4812150">v</a></span>&nbsp;<span class="op" id="4812185">&lt;</span>&nbsp;<span class="num" id="4812187">0</span><span class="op" id="4812188">,</span>&nbsp;<span class="ident" id="4812190"><a href="/unicode/utf16/utf16.go.html#4810945">surr1</a></span>&nbsp;<span class="op" id="4812196">&lt;=</span>&nbsp;<span class="ident" id="4812199"><a href="/unicode/utf16/utf16.go.html#4812150">v</a></span>&nbsp;<span class="op" id="4812201">&amp;&amp;</span>&nbsp;<span class="ident" id="4812204"><a href="/unicode/utf16/utf16.go.html#4812150">v</a></span>&nbsp;<span class="op" id="4812206">&lt;</span>&nbsp;<span class="ident" id="4812208"><a href="/unicode/utf16/utf16.go.html#4810977">surr3</a></span><span class="op" id="4812213">,</span>&nbsp;<span class="ident" id="4812215"><a href="/unicode/utf16/utf16.go.html#4812150">v</a></span>&nbsp;<span class="op" id="4812217">&gt;</span>&nbsp;<span class="ident" id="4812219"><a href="/unicode/utf16/utf16.go.html#4810713">maxRune</a></span><span class="op" id="4812226">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812231"><a href="/unicode/utf16/utf16.go.html#4812150">v</a></span>&nbsp;<span class="op" id="4812233">=</span>&nbsp;<span class="ident" id="4812235"><a href="/unicode/utf16/utf16.go.html#4810648">replacementChar</a></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812254">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812268">case</span>&nbsp;<span class="ident" id="4812273"><a href="/unicode/utf16/utf16.go.html#4812150">v</a></span>&nbsp;<span class="op" id="4812275">&lt;</span>&nbsp;<span class="ident" id="4812277"><a href="/unicode/utf16/utf16.go.html#4810994">surrSelf</a></span><span class="op" id="4812285">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812290"><a href="/unicode/utf16/utf16.go.html#4812112">a</a></span><span class="op" id="4812291">[</span><span class="ident" id="4812292"><a href="/unicode/utf16/utf16.go.html#4812040">n</a></span><span class="op" id="4812293">]</span>&nbsp;<span class="op" id="4812295">=</span>&nbsp;<span class="builtintype" id="4812297">uint16</span><span class="op" id="4812303">(</span><span class="ident" id="4812304"><a href="/unicode/utf16/utf16.go.html#4812150">v</a></span><span class="op" id="4812305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812310"><a href="/unicode/utf16/utf16.go.html#4812040">n</a></span><span class="op" id="4812311">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812316">default</span><span class="op" id="4812323">:</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812328">r1</span><span class="op" id="4812330">,</span>&nbsp;<span class="ident" id="4812332">r2</span>&nbsp;<span class="op" id="4812335">:=</span>&nbsp;<span class="ident" id="4812338"><a href="/unicode/utf16/utf16.go.html#4811733">EncodeRune</a></span><span class="op" id="4812348">(</span><span class="ident" id="4812349"><a href="/unicode/utf16/utf16.go.html#4812150">v</a></span><span class="op" id="4812350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812355"><a href="/unicode/utf16/utf16.go.html#4812112">a</a></span><span class="op" id="4812356">[</span><span class="ident" id="4812357"><a href="/unicode/utf16/utf16.go.html#4812040">n</a></span><span class="op" id="4812358">]</span>&nbsp;<span class="op" id="4812360">=</span>&nbsp;<span class="builtintype" id="4812362">uint16</span><span class="op" id="4812368">(</span><span class="ident" id="4812369"><a href="/unicode/utf16/utf16.go.html#4812328">r1</a></span><span class="op" id="4812371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812376"><a href="/unicode/utf16/utf16.go.html#4812112">a</a></span><span class="op" id="4812377">[</span><span class="ident" id="4812378"><a href="/unicode/utf16/utf16.go.html#4812040">n</a></span><span class="op" id="4812379">+</span><span class="num" id="4812380">1</span><span class="op" id="4812381">]</span>&nbsp;<span class="op" id="4812383">=</span>&nbsp;<span class="builtintype" id="4812385">uint16</span><span class="op" id="4812391">(</span><span class="ident" id="4812392"><a href="/unicode/utf16/utf16.go.html#4812332">r2</a></span><span class="op" id="4812394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812399"><a href="/unicode/utf16/utf16.go.html#4812040">n</a></span>&nbsp;<span class="op" id="4812401">+=</span>&nbsp;<span class="num" id="4812404">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4812408">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4812411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812414">return</span>&nbsp;<span class="ident" id="4812421"><a href="/unicode/utf16/utf16.go.html#4812112">a</a></span><span class="op" id="4812422">[</span><span class="num" id="4812423">0</span><span class="op" id="4812424">:</span><span class="ident" id="4812425"><a href="/unicode/utf16/utf16.go.html#4812040">n</a></span><span class="op" id="4812426">]</span><br>
<span class="lineno"></span><span class="op" id="4812428">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4812431">//&nbsp;Decode&nbsp;returns&nbsp;the&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;sequence&nbsp;represented</span><br>
<span class="lineno">85</span><span class="comment" id="4812493">//&nbsp;by&nbsp;the&nbsp;UTF-16&nbsp;encoding&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4812522">func</span>&nbsp;<span class="ident" id="4812527">Decode</span><span class="op" id="4812533">(</span><span class="ident" id="4812534">s</span>&nbsp;<span class="op" id="4812536">[</span><span class="op" id="4812537">]</span><span class="builtintype" id="4812538">uint16</span><span class="op" id="4812544">)</span>&nbsp;<span class="op" id="4812546">[</span><span class="op" id="4812547">]</span><span class="builtintype" id="4812548">rune</span>&nbsp;<span class="op" id="4812553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812556">a</span>&nbsp;<span class="op" id="4812558">:=</span>&nbsp;<span class="builtinfunc" id="4812561">make</span><span class="op" id="4812565">(</span><span class="op" id="4812566">[</span><span class="op" id="4812567">]</span><span class="builtintype" id="4812568">rune</span><span class="op" id="4812572">,</span>&nbsp;<span class="builtinfunc" id="4812574">len</span><span class="op" id="4812577">(</span><span class="ident" id="4812578"><a href="/unicode/utf16/utf16.go.html#4812534">s</a></span><span class="op" id="4812579">)</span><span class="op" id="4812580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812583">n</span>&nbsp;<span class="op" id="4812585">:=</span>&nbsp;<span class="num" id="4812588">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812591">for</span>&nbsp;<span class="ident" id="4812595">i</span>&nbsp;<span class="op" id="4812597">:=</span>&nbsp;<span class="num" id="4812600">0</span><span class="op" id="4812601">;</span>&nbsp;<span class="ident" id="4812603"><a href="/unicode/utf16/utf16.go.html#4812595">i</a></span>&nbsp;<span class="op" id="4812605">&lt;</span>&nbsp;<span class="builtinfunc" id="4812607">len</span><span class="op" id="4812610">(</span><span class="ident" id="4812611"><a href="/unicode/utf16/utf16.go.html#4812534">s</a></span><span class="op" id="4812612">)</span><span class="op" id="4812613">;</span>&nbsp;<span class="ident" id="4812615"><a href="/unicode/utf16/utf16.go.html#4812595">i</a></span><span class="op" id="4812616">++</span>&nbsp;<span class="op" id="4812619">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812623">switch</span>&nbsp;<span class="ident" id="4812630">r</span>&nbsp;<span class="op" id="4812632">:=</span>&nbsp;<span class="ident" id="4812635"><a href="/unicode/utf16/utf16.go.html#4812534">s</a></span><span class="op" id="4812636">[</span><span class="ident" id="4812637"><a href="/unicode/utf16/utf16.go.html#4812595">i</a></span><span class="op" id="4812638">]</span><span class="op" id="4812639">;</span>&nbsp;<span class="op" id="4812641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812645">case</span>&nbsp;<span class="ident" id="4812650"><a href="/unicode/utf16/utf16.go.html#4810945">surr1</a></span>&nbsp;<span class="op" id="4812656">&lt;=</span>&nbsp;<span class="ident" id="4812659"><a href="/unicode/utf16/utf16.go.html#4812630">r</a></span>&nbsp;<span class="op" id="4812661">&amp;&amp;</span>&nbsp;<span class="ident" id="4812664"><a href="/unicode/utf16/utf16.go.html#4812630">r</a></span>&nbsp;<span class="op" id="4812666">&lt;</span>&nbsp;<span class="ident" id="4812668"><a href="/unicode/utf16/utf16.go.html#4810961">surr2</a></span>&nbsp;<span class="op" id="4812674">&amp;&amp;</span>&nbsp;<span class="ident" id="4812677"><a href="/unicode/utf16/utf16.go.html#4812595">i</a></span><span class="op" id="4812678">+</span><span class="num" id="4812679">1</span>&nbsp;<span class="op" id="4812681">&lt;</span>&nbsp;<span class="builtinfunc" id="4812683">len</span><span class="op" id="4812686">(</span><span class="ident" id="4812687"><a href="/unicode/utf16/utf16.go.html#4812534">s</a></span><span class="op" id="4812688">)</span>&nbsp;<span class="op" id="4812690">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812696"><a href="/unicode/utf16/utf16.go.html#4810961">surr2</a></span>&nbsp;<span class="op" id="4812702">&lt;=</span>&nbsp;<span class="ident" id="4812705"><a href="/unicode/utf16/utf16.go.html#4812534">s</a></span><span class="op" id="4812706">[</span><span class="ident" id="4812707"><a href="/unicode/utf16/utf16.go.html#4812595">i</a></span><span class="op" id="4812708">+</span><span class="num" id="4812709">1</span><span class="op" id="4812710">]</span>&nbsp;<span class="op" id="4812712">&amp;&amp;</span>&nbsp;<span class="ident" id="4812715"><a href="/unicode/utf16/utf16.go.html#4812534">s</a></span><span class="op" id="4812716">[</span><span class="ident" id="4812717"><a href="/unicode/utf16/utf16.go.html#4812595">i</a></span><span class="op" id="4812718">+</span><span class="num" id="4812719">1</span><span class="op" id="4812720">]</span>&nbsp;<span class="op" id="4812722">&lt;</span>&nbsp;<span class="ident" id="4812724"><a href="/unicode/utf16/utf16.go.html#4810977">surr3</a></span><span class="op" id="4812729">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4812734">//&nbsp;valid&nbsp;surrogate&nbsp;sequence</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812765"><a href="/unicode/utf16/utf16.go.html#4812556">a</a></span><span class="op" id="4812766">[</span><span class="ident" id="4812767"><a href="/unicode/utf16/utf16.go.html#4812583">n</a></span><span class="op" id="4812768">]</span>&nbsp;<span class="op" id="4812770">=</span>&nbsp;<span class="ident" id="4812772"><a href="/unicode/utf16/utf16.go.html#4811368">DecodeRune</a></span><span class="op" id="4812782">(</span><span class="builtintype" id="4812783">rune</span><span class="op" id="4812787">(</span><span class="ident" id="4812788"><a href="/unicode/utf16/utf16.go.html#4812630">r</a></span><span class="op" id="4812789">)</span><span class="op" id="4812790">,</span>&nbsp;<span class="builtintype" id="4812792">rune</span><span class="op" id="4812796">(</span><span class="ident" id="4812797"><a href="/unicode/utf16/utf16.go.html#4812534">s</a></span><span class="op" id="4812798">[</span><span class="ident" id="4812799"><a href="/unicode/utf16/utf16.go.html#4812595">i</a></span><span class="op" id="4812800">+</span><span class="num" id="4812801">1</span><span class="op" id="4812802">]</span><span class="op" id="4812803">)</span><span class="op" id="4812804">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812809"><a href="/unicode/utf16/utf16.go.html#4812595">i</a></span><span class="op" id="4812810">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812816"><a href="/unicode/utf16/utf16.go.html#4812583">n</a></span><span class="op" id="4812817">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812822">case</span>&nbsp;<span class="ident" id="4812827"><a href="/unicode/utf16/utf16.go.html#4810945">surr1</a></span>&nbsp;<span class="op" id="4812833">&lt;=</span>&nbsp;<span class="ident" id="4812836"><a href="/unicode/utf16/utf16.go.html#4812630">r</a></span>&nbsp;<span class="op" id="4812838">&amp;&amp;</span>&nbsp;<span class="ident" id="4812841"><a href="/unicode/utf16/utf16.go.html#4812630">r</a></span>&nbsp;<span class="op" id="4812843">&lt;</span>&nbsp;<span class="ident" id="4812845"><a href="/unicode/utf16/utf16.go.html#4810977">surr3</a></span><span class="op" id="4812850">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4812855">//&nbsp;invalid&nbsp;surrogate&nbsp;sequence</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812888"><a href="/unicode/utf16/utf16.go.html#4812556">a</a></span><span class="op" id="4812889">[</span><span class="ident" id="4812890"><a href="/unicode/utf16/utf16.go.html#4812583">n</a></span><span class="op" id="4812891">]</span>&nbsp;<span class="op" id="4812893">=</span>&nbsp;<span class="ident" id="4812895"><a href="/unicode/utf16/utf16.go.html#4810648">replacementChar</a></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812914"><a href="/unicode/utf16/utf16.go.html#4812583">n</a></span><span class="op" id="4812915">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812920">default</span><span class="op" id="4812927">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4812932">//&nbsp;normal&nbsp;rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812950"><a href="/unicode/utf16/utf16.go.html#4812556">a</a></span><span class="op" id="4812951">[</span><span class="ident" id="4812952"><a href="/unicode/utf16/utf16.go.html#4812583">n</a></span><span class="op" id="4812953">]</span>&nbsp;<span class="op" id="4812955">=</span>&nbsp;<span class="builtintype" id="4812957">rune</span><span class="op" id="4812961">(</span><span class="ident" id="4812962"><a href="/unicode/utf16/utf16.go.html#4812630">r</a></span><span class="op" id="4812963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812968"><a href="/unicode/utf16/utf16.go.html#4812583">n</a></span><span class="op" id="4812969">++</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4812974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4812977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812980">return</span>&nbsp;<span class="ident" id="4812987"><a href="/unicode/utf16/utf16.go.html#4812556">a</a></span><span class="op" id="4812988">[</span><span class="num" id="4812989">0</span><span class="op" id="4812990">:</span><span class="ident" id="4812991"><a href="/unicode/utf16/utf16.go.html#4812583">n</a></span><span class="op" id="4812992">]</span><br>
<span class="lineno"></span><span class="op" id="4812994">}</span>
</div>
</body>
</html>
