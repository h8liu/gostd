<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/rand</h2>
<ul>
<li><a href="/gostd/crypto/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/crypto/rand/rand_linux.go.html">rand_linux.go</a></li>
<li><a href="/gostd/crypto/rand/rand_test.go.html" class="current">rand_test.go</a></li>
<li><a href="/gostd/crypto/rand/rand_unix.go.html">rand_unix.go</a></li>
<li><a href="/gostd/crypto/rand/util.go.html">util.go</a></li>
<li><a href="/gostd/crypto/rand/util_test.go.html">util_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7769017">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7769073">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7769127">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7769178">package</span>&nbsp;<span class="ident" id="7769186">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7769192">import</span>&nbsp;<span class="op" id="7769199">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7769202">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7769211">&#34;compress/flate&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7769229">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7769235">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7769245">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7769248">func</span>&nbsp;<span class="ident" id="7769253">TestRead</span><span class="op" id="7769261">(</span><span class="ident" id="7769262">t</span>&nbsp;<span class="op" id="7769264">*</span><span class="ident" id="7769265">testing</span><span class="op" id="7769272">.</span><span class="ident" id="7769273">T</span><span class="op" id="7769274">)</span>&nbsp;<span class="op" id="7769276">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7769279">var</span>&nbsp;<span class="ident" id="7769283">n</span>&nbsp;<span class="builtintype" id="7769285">int</span>&nbsp;<span class="op" id="7769289">=</span>&nbsp;<span class="num" id="7769291">4e6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7769296">if</span>&nbsp;<span class="ident" id="7769299">testing</span><span class="op" id="7769306">.</span><span class="ident" id="7769307">Short</span><span class="op" id="7769312">(</span><span class="op" id="7769313">)</span>&nbsp;<span class="op" id="7769315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7769319">n</span>&nbsp;<span class="op" id="7769321">=</span>&nbsp;<span class="num" id="7769323">1e5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7769328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7769331">b</span>&nbsp;<span class="op" id="7769333">:=</span>&nbsp;<span class="builtinfunc" id="7769336">make</span><span class="op" id="7769340">(</span><span class="op" id="7769341">[</span><span class="op" id="7769342">]</span><span class="builtintype" id="7769343">byte</span><span class="op" id="7769347">,</span>&nbsp;<span class="ident" id="7769349">n</span><span class="op" id="7769350">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7769353">n</span><span class="op" id="7769354">,</span>&nbsp;<span class="ident" id="7769356">err</span>&nbsp;<span class="op" id="7769360">:=</span>&nbsp;<span class="ident" id="7769363">io</span><span class="op" id="7769365">.</span><span class="ident" id="7769366">ReadFull</span><span class="op" id="7769374">(</span><span class="ident" id="7769375">Reader</span><span class="op" id="7769381">,</span>&nbsp;<span class="ident" id="7769383">b</span><span class="op" id="7769384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7769387">if</span>&nbsp;<span class="ident" id="7769390">n</span>&nbsp;<span class="op" id="7769392">!=</span>&nbsp;<span class="builtinfunc" id="7769395">len</span><span class="op" id="7769398">(</span><span class="ident" id="7769399">b</span><span class="op" id="7769400">)</span>&nbsp;<span class="op" id="7769402">||</span>&nbsp;<span class="ident" id="7769405">err</span>&nbsp;<span class="op" id="7769409">!=</span>&nbsp;<span class="builtintype" id="7769412">nil</span>&nbsp;<span class="op" id="7769416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7769420">t</span><span class="op" id="7769421">.</span><span class="ident" id="7769422">Fatalf</span><span class="op" id="7769428">(</span><span class="string" id="7769429">&#34;ReadFull(buf)&nbsp;=&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="7769453">,</span>&nbsp;<span class="ident" id="7769455">n</span><span class="op" id="7769456">,</span>&nbsp;<span class="ident" id="7769458">err</span><span class="op" id="7769461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7769464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7769468">var</span>&nbsp;<span class="ident" id="7769472">z</span>&nbsp;<span class="ident" id="7769474">bytes</span><span class="op" id="7769479">.</span><span class="ident" id="7769480">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7769488">f</span><span class="op" id="7769489">,</span>&nbsp;<span class="ident" id="7769491">_</span>&nbsp;<span class="op" id="7769493">:=</span>&nbsp;<span class="ident" id="7769496">flate</span><span class="op" id="7769501">.</span><span class="ident" id="7769502">NewWriter</span><span class="op" id="7769511">(</span><span class="op" id="7769512">&amp;</span><span class="ident" id="7769513">z</span><span class="op" id="7769514">,</span>&nbsp;<span class="num" id="7769516">5</span><span class="op" id="7769517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7769520">f</span><span class="op" id="7769521">.</span><span class="ident" id="7769522">Write</span><span class="op" id="7769527">(</span><span class="ident" id="7769528">b</span><span class="op" id="7769529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7769532">f</span><span class="op" id="7769533">.</span><span class="ident" id="7769534">Close</span><span class="op" id="7769539">(</span><span class="op" id="7769540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7769543">if</span>&nbsp;<span class="ident" id="7769546">z</span><span class="op" id="7769547">.</span><span class="ident" id="7769548">Len</span><span class="op" id="7769551">(</span><span class="op" id="7769552">)</span>&nbsp;<span class="op" id="7769554">&lt;</span>&nbsp;<span class="builtinfunc" id="7769556">len</span><span class="op" id="7769559">(</span><span class="ident" id="7769560">b</span><span class="op" id="7769561">)</span><span class="op" id="7769562">*</span><span class="num" id="7769563">99</span><span class="op" id="7769565">/</span><span class="num" id="7769566">100</span>&nbsp;<span class="op" id="7769570">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7769574">t</span><span class="op" id="7769575">.</span><span class="ident" id="7769576">Fatalf</span><span class="op" id="7769582">(</span><span class="string" id="7769583">&#34;Compressed&nbsp;%d&nbsp;-&gt;&nbsp;%d&#34;</span><span class="op" id="7769604">,</span>&nbsp;<span class="builtinfunc" id="7769606">len</span><span class="op" id="7769609">(</span><span class="ident" id="7769610">b</span><span class="op" id="7769611">)</span><span class="op" id="7769612">,</span>&nbsp;<span class="ident" id="7769614">z</span><span class="op" id="7769615">.</span><span class="ident" id="7769616">Len</span><span class="op" id="7769619">(</span><span class="op" id="7769620">)</span><span class="op" id="7769621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7769624">}</span><br>
<span class="lineno"></span><span class="op" id="7769626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7769629">func</span>&nbsp;<span class="ident" id="7769634">TestReadEmpty</span><span class="op" id="7769647">(</span><span class="ident" id="7769648">t</span>&nbsp;<span class="op" id="7769650">*</span><span class="ident" id="7769651">testing</span><span class="op" id="7769658">.</span><span class="ident" id="7769659">T</span><span class="op" id="7769660">)</span>&nbsp;<span class="op" id="7769662">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7769665">n</span><span class="op" id="7769666">,</span>&nbsp;<span class="ident" id="7769668">err</span>&nbsp;<span class="op" id="7769672">:=</span>&nbsp;<span class="ident" id="7769675">Reader</span><span class="op" id="7769681">.</span><span class="ident" id="7769682">Read</span><span class="op" id="7769686">(</span><span class="builtinfunc" id="7769687">make</span><span class="op" id="7769691">(</span><span class="op" id="7769692">[</span><span class="op" id="7769693">]</span><span class="builtintype" id="7769694">byte</span><span class="op" id="7769698">,</span>&nbsp;<span class="num" id="7769700">0</span><span class="op" id="7769701">)</span><span class="op" id="7769702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7769705">if</span>&nbsp;<span class="ident" id="7769708">n</span>&nbsp;<span class="op" id="7769710">!=</span>&nbsp;<span class="num" id="7769713">0</span>&nbsp;<span class="op" id="7769715">||</span>&nbsp;<span class="ident" id="7769718">err</span>&nbsp;<span class="op" id="7769722">!=</span>&nbsp;<span class="builtintype" id="7769725">nil</span>&nbsp;<span class="op" id="7769729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7769733">t</span><span class="op" id="7769734">.</span><span class="ident" id="7769735">Fatalf</span><span class="op" id="7769741">(</span><span class="string" id="7769742">&#34;Read(make([]byte,&nbsp;0))&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="7769774">,</span>&nbsp;<span class="ident" id="7769776">n</span><span class="op" id="7769777">,</span>&nbsp;<span class="ident" id="7769779">err</span><span class="op" id="7769782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7769785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7769788">n</span><span class="op" id="7769789">,</span>&nbsp;<span class="ident" id="7769791">err</span>&nbsp;<span class="op" id="7769795">=</span>&nbsp;<span class="ident" id="7769797">Reader</span><span class="op" id="7769803">.</span><span class="ident" id="7769804">Read</span><span class="op" id="7769808">(</span><span class="builtintype" id="7769809">nil</span><span class="op" id="7769812">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7769815">if</span>&nbsp;<span class="ident" id="7769818">n</span>&nbsp;<span class="op" id="7769820">!=</span>&nbsp;<span class="num" id="7769823">0</span>&nbsp;<span class="op" id="7769825">||</span>&nbsp;<span class="ident" id="7769828">err</span>&nbsp;<span class="op" id="7769832">!=</span>&nbsp;<span class="builtintype" id="7769835">nil</span>&nbsp;<span class="op" id="7769839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7769843">t</span><span class="op" id="7769844">.</span><span class="ident" id="7769845">Fatalf</span><span class="op" id="7769851">(</span><span class="string" id="7769852">&#34;Read(nil)&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="7769872">,</span>&nbsp;<span class="ident" id="7769874">n</span><span class="op" id="7769875">,</span>&nbsp;<span class="ident" id="7769877">err</span><span class="op" id="7769880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7769883">}</span><br>
<span class="lineno"></span><span class="op" id="7769885">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
