<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7432407">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7432462">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7432516">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7432567">package</span>&nbsp;<span class="ident" id="7432575">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7432580">import</span>&nbsp;<span class="op" id="7432587">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7432590">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7432596">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7432607">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7432618">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7432628">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7432631">type</span>&nbsp;<span class="ident" id="7432636">listenerFile</span>&nbsp;<span class="keyword" id="7432649">interface</span>&nbsp;<span class="op" id="7432659">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7432662">Listener</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7432672">File</span><span class="op" id="7432676">(</span><span class="op" id="7432677">)</span>&nbsp;<span class="op" id="7432679">(</span><span class="ident" id="7432680">f</span>&nbsp;<span class="op" id="7432682">*</span><span class="ident" id="7432683">os</span><span class="op" id="7432685">.</span><span class="ident" id="7432686">File</span><span class="op" id="7432690">,</span>&nbsp;<span class="ident" id="7432692">err</span>&nbsp;<span class="builtintype" id="7432696">error</span><span class="op" id="7432701">)</span><br>
<span class="lineno"></span><span class="op" id="7432703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7432706">type</span>&nbsp;<span class="ident" id="7432711">packetConnFile</span>&nbsp;<span class="keyword" id="7432726">interface</span>&nbsp;<span class="op" id="7432736">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7432739">PacketConn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7432751">File</span><span class="op" id="7432755">(</span><span class="op" id="7432756">)</span>&nbsp;<span class="op" id="7432758">(</span><span class="ident" id="7432759">f</span>&nbsp;<span class="op" id="7432761">*</span><span class="ident" id="7432762">os</span><span class="op" id="7432764">.</span><span class="ident" id="7432765">File</span><span class="op" id="7432769">,</span>&nbsp;<span class="ident" id="7432771">err</span>&nbsp;<span class="builtintype" id="7432775">error</span><span class="op" id="7432780">)</span><br>
<span class="lineno"></span><span class="op" id="7432782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7432785">type</span>&nbsp;<span class="ident" id="7432790">connFile</span>&nbsp;<span class="keyword" id="7432799">interface</span>&nbsp;<span class="op" id="7432809">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7432812">Conn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7432818">File</span><span class="op" id="7432822">(</span><span class="op" id="7432823">)</span>&nbsp;<span class="op" id="7432825">(</span><span class="ident" id="7432826">f</span>&nbsp;<span class="op" id="7432828">*</span><span class="ident" id="7432829">os</span><span class="op" id="7432831">.</span><span class="ident" id="7432832">File</span><span class="op" id="7432836">,</span>&nbsp;<span class="ident" id="7432838">err</span>&nbsp;<span class="builtintype" id="7432842">error</span><span class="op" id="7432847">)</span><br>
<span class="lineno"></span><span class="op" id="7432849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7432852">func</span>&nbsp;<span class="ident" id="7432857">testFileListener</span><span class="op" id="7432873">(</span><span class="ident" id="7432874">t</span>&nbsp;<span class="op" id="7432876">*</span><span class="ident" id="7432877">testing</span><span class="op" id="7432884">.</span><span class="ident" id="7432885">T</span><span class="op" id="7432886">,</span>&nbsp;<span class="ident" id="7432888">net</span><span class="op" id="7432891">,</span>&nbsp;<span class="ident" id="7432893">laddr</span>&nbsp;<span class="builtintype" id="7432899">string</span><span class="op" id="7432905">)</span>&nbsp;<span class="op" id="7432907">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7432910">switch</span>&nbsp;<span class="ident" id="7432917">net</span>&nbsp;<span class="op" id="7432921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7432924">case</span>&nbsp;<span class="string" id="7432929">&#34;tcp&#34;</span><span class="op" id="7432934">,</span>&nbsp;<span class="string" id="7432936">&#34;tcp4&#34;</span><span class="op" id="7432942">,</span>&nbsp;<span class="string" id="7432944">&#34;tcp6&#34;</span><span class="op" id="7432950">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7432954">laddr</span>&nbsp;<span class="op" id="7432960">+=</span>&nbsp;<span class="string" id="7432963">&#34;:0&#34;</span>&nbsp;<span class="comment" id="7432968">//&nbsp;any&nbsp;available&nbsp;port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7432991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7432994">l</span><span class="op" id="7432995">,</span>&nbsp;<span class="ident" id="7432997">err</span>&nbsp;<span class="op" id="7433001">:=</span>&nbsp;<span class="ident" id="7433004">Listen</span><span class="op" id="7433010">(</span><span class="ident" id="7433011">net</span><span class="op" id="7433014">,</span>&nbsp;<span class="ident" id="7433016">laddr</span><span class="op" id="7433021">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7433024">if</span>&nbsp;<span class="ident" id="7433027">err</span>&nbsp;<span class="op" id="7433031">!=</span>&nbsp;<span class="ident" id="7433034">nil</span>&nbsp;<span class="op" id="7433038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7433042">t</span><span class="op" id="7433043">.</span><span class="ident" id="7433044">Fatalf</span><span class="op" id="7433050">(</span><span class="string" id="7433051">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7433070">,</span>&nbsp;<span class="ident" id="7433072">err</span><span class="op" id="7433075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7433078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7433081">defer</span>&nbsp;<span class="ident" id="7433087">l</span><span class="op" id="7433088">.</span><span class="ident" id="7433089">Close</span><span class="op" id="7433094">(</span><span class="op" id="7433095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7433098">lf</span>&nbsp;<span class="op" id="7433101">:=</span>&nbsp;<span class="ident" id="7433104">l</span><span class="op" id="7433105">.</span><span class="op" id="7433106">(</span><span class="ident" id="7433107">listenerFile</span><span class="op" id="7433119">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7433122">f</span><span class="op" id="7433123">,</span>&nbsp;<span class="ident" id="7433125">err</span>&nbsp;<span class="op" id="7433129">:=</span>&nbsp;<span class="ident" id="7433132">lf</span><span class="op" id="7433134">.</span><span class="ident" id="7433135">File</span><span class="op" id="7433139">(</span><span class="op" id="7433140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7433143">if</span>&nbsp;<span class="ident" id="7433146">err</span>&nbsp;<span class="op" id="7433150">!=</span>&nbsp;<span class="ident" id="7433153">nil</span>&nbsp;<span class="op" id="7433157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7433161">t</span><span class="op" id="7433162">.</span><span class="ident" id="7433163">Fatalf</span><span class="op" id="7433169">(</span><span class="string" id="7433170">&#34;File&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7433187">,</span>&nbsp;<span class="ident" id="7433189">err</span><span class="op" id="7433192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7433195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7433198">c</span><span class="op" id="7433199">,</span>&nbsp;<span class="ident" id="7433201">err</span>&nbsp;<span class="op" id="7433205">:=</span>&nbsp;<span class="ident" id="7433208">FileListener</span><span class="op" id="7433220">(</span><span class="ident" id="7433221">f</span><span class="op" id="7433222">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7433225">if</span>&nbsp;<span class="ident" id="7433228">err</span>&nbsp;<span class="op" id="7433232">!=</span>&nbsp;<span class="ident" id="7433235">nil</span>&nbsp;<span class="op" id="7433239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7433243">t</span><span class="op" id="7433244">.</span><span class="ident" id="7433245">Fatalf</span><span class="op" id="7433251">(</span><span class="string" id="7433252">&#34;FileListener&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7433277">,</span>&nbsp;<span class="ident" id="7433279">err</span><span class="op" id="7433282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7433285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7433288">if</span>&nbsp;<span class="op" id="7433291">!</span><span class="ident" id="7433292">reflect</span><span class="op" id="7433299">.</span><span class="ident" id="7433300">DeepEqual</span><span class="op" id="7433309">(</span><span class="ident" id="7433310">l</span><span class="op" id="7433311">.</span><span class="ident" id="7433312">Addr</span><span class="op" id="7433316">(</span><span class="op" id="7433317">)</span><span class="op" id="7433318">,</span>&nbsp;<span class="ident" id="7433320">c</span><span class="op" id="7433321">.</span><span class="ident" id="7433322">Addr</span><span class="op" id="7433326">(</span><span class="op" id="7433327">)</span><span class="op" id="7433328">)</span>&nbsp;<span class="op" id="7433330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7433334">t</span><span class="op" id="7433335">.</span><span class="ident" id="7433336">Fatalf</span><span class="op" id="7433342">(</span><span class="string" id="7433343">&#34;Addrs&nbsp;not&nbsp;equal:&nbsp;%#v&nbsp;!=&nbsp;%#v&#34;</span><span class="op" id="7433372">,</span>&nbsp;<span class="ident" id="7433374">l</span><span class="op" id="7433375">.</span><span class="ident" id="7433376">Addr</span><span class="op" id="7433380">(</span><span class="op" id="7433381">)</span><span class="op" id="7433382">,</span>&nbsp;<span class="ident" id="7433384">c</span><span class="op" id="7433385">.</span><span class="ident" id="7433386">Addr</span><span class="op" id="7433390">(</span><span class="op" id="7433391">)</span><span class="op" id="7433392">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7433395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7433398">if</span>&nbsp;<span class="ident" id="7433401">err</span>&nbsp;<span class="op" id="7433405">:=</span>&nbsp;<span class="ident" id="7433408">c</span><span class="op" id="7433409">.</span><span class="ident" id="7433410">Close</span><span class="op" id="7433415">(</span><span class="op" id="7433416">)</span><span class="op" id="7433417">;</span>&nbsp;<span class="ident" id="7433419">err</span>&nbsp;<span class="op" id="7433423">!=</span>&nbsp;<span class="ident" id="7433426">nil</span>&nbsp;<span class="op" id="7433430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7433434">t</span><span class="op" id="7433435">.</span><span class="ident" id="7433436">Fatalf</span><span class="op" id="7433442">(</span><span class="string" id="7433443">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7433461">,</span>&nbsp;<span class="ident" id="7433463">err</span><span class="op" id="7433466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7433469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7433472">if</span>&nbsp;<span class="ident" id="7433475">err</span>&nbsp;<span class="op" id="7433479">:=</span>&nbsp;<span class="ident" id="7433482">f</span><span class="op" id="7433483">.</span><span class="ident" id="7433484">Close</span><span class="op" id="7433489">(</span><span class="op" id="7433490">)</span><span class="op" id="7433491">;</span>&nbsp;<span class="ident" id="7433493">err</span>&nbsp;<span class="op" id="7433497">!=</span>&nbsp;<span class="ident" id="7433500">nil</span>&nbsp;<span class="op" id="7433504">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7433508">t</span><span class="op" id="7433509">.</span><span class="ident" id="7433510">Fatalf</span><span class="op" id="7433516">(</span><span class="string" id="7433517">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7433535">,</span>&nbsp;<span class="ident" id="7433537">err</span><span class="op" id="7433540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7433543">}</span><br>
<span class="lineno"></span><span class="op" id="7433545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7433548">var</span>&nbsp;<span class="ident" id="7433552">fileListenerTests</span>&nbsp;<span class="op" id="7433570">=</span>&nbsp;<span class="op" id="7433572">[</span><span class="op" id="7433573">]</span><span class="keyword" id="7433574">struct</span>&nbsp;<span class="op" id="7433581">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7433584">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7433590">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7433598">laddr</span>&nbsp;<span class="builtintype" id="7433604">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7433612">ipv6</span>&nbsp;&nbsp;<span class="builtintype" id="7433618">bool</span>&nbsp;<span class="comment" id="7433623">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7433664">linux</span>&nbsp;<span class="builtintype" id="7433670">bool</span>&nbsp;<span class="comment" id="7433675">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="7433729">}</span><span class="op" id="7433730">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7433733">{</span><span class="ident" id="7433734">net</span><span class="op" id="7433737">:</span>&nbsp;<span class="string" id="7433739">&#34;tcp&#34;</span><span class="op" id="7433744">,</span>&nbsp;<span class="ident" id="7433746">laddr</span><span class="op" id="7433751">:</span>&nbsp;<span class="string" id="7433753">&#34;&#34;</span><span class="op" id="7433755">}</span><span class="op" id="7433756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7433759">{</span><span class="ident" id="7433760">net</span><span class="op" id="7433763">:</span>&nbsp;<span class="string" id="7433765">&#34;tcp&#34;</span><span class="op" id="7433770">,</span>&nbsp;<span class="ident" id="7433772">laddr</span><span class="op" id="7433777">:</span>&nbsp;<span class="string" id="7433779">&#34;0.0.0.0&#34;</span><span class="op" id="7433788">}</span><span class="op" id="7433789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7433792">{</span><span class="ident" id="7433793">net</span><span class="op" id="7433796">:</span>&nbsp;<span class="string" id="7433798">&#34;tcp&#34;</span><span class="op" id="7433803">,</span>&nbsp;<span class="ident" id="7433805">laddr</span><span class="op" id="7433810">:</span>&nbsp;<span class="string" id="7433812">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7433830">}</span><span class="op" id="7433831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7433834">{</span><span class="ident" id="7433835">net</span><span class="op" id="7433838">:</span>&nbsp;<span class="string" id="7433840">&#34;tcp&#34;</span><span class="op" id="7433845">,</span>&nbsp;<span class="ident" id="7433847">laddr</span><span class="op" id="7433852">:</span>&nbsp;<span class="string" id="7433854">&#34;[::]&#34;</span><span class="op" id="7433860">,</span>&nbsp;<span class="ident" id="7433862">ipv6</span><span class="op" id="7433866">:</span>&nbsp;<span class="ident" id="7433868">true</span><span class="op" id="7433872">}</span><span class="op" id="7433873">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7433877">{</span><span class="ident" id="7433878">net</span><span class="op" id="7433881">:</span>&nbsp;<span class="string" id="7433883">&#34;tcp&#34;</span><span class="op" id="7433888">,</span>&nbsp;<span class="ident" id="7433890">laddr</span><span class="op" id="7433895">:</span>&nbsp;<span class="string" id="7433897">&#34;127.0.0.1&#34;</span><span class="op" id="7433908">}</span><span class="op" id="7433909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7433912">{</span><span class="ident" id="7433913">net</span><span class="op" id="7433916">:</span>&nbsp;<span class="string" id="7433918">&#34;tcp&#34;</span><span class="op" id="7433923">,</span>&nbsp;<span class="ident" id="7433925">laddr</span><span class="op" id="7433930">:</span>&nbsp;<span class="string" id="7433932">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="7433952">}</span><span class="op" id="7433953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7433956">{</span><span class="ident" id="7433957">net</span><span class="op" id="7433960">:</span>&nbsp;<span class="string" id="7433962">&#34;tcp&#34;</span><span class="op" id="7433967">,</span>&nbsp;<span class="ident" id="7433969">laddr</span><span class="op" id="7433974">:</span>&nbsp;<span class="string" id="7433976">&#34;[::1]&#34;</span><span class="op" id="7433983">,</span>&nbsp;<span class="ident" id="7433985">ipv6</span><span class="op" id="7433989">:</span>&nbsp;<span class="ident" id="7433991">true</span><span class="op" id="7433995">}</span><span class="op" id="7433996">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7434000">{</span><span class="ident" id="7434001">net</span><span class="op" id="7434004">:</span>&nbsp;<span class="string" id="7434006">&#34;tcp4&#34;</span><span class="op" id="7434012">,</span>&nbsp;<span class="ident" id="7434014">laddr</span><span class="op" id="7434019">:</span>&nbsp;<span class="string" id="7434021">&#34;&#34;</span><span class="op" id="7434023">}</span><span class="op" id="7434024">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7434027">{</span><span class="ident" id="7434028">net</span><span class="op" id="7434031">:</span>&nbsp;<span class="string" id="7434033">&#34;tcp4&#34;</span><span class="op" id="7434039">,</span>&nbsp;<span class="ident" id="7434041">laddr</span><span class="op" id="7434046">:</span>&nbsp;<span class="string" id="7434048">&#34;0.0.0.0&#34;</span><span class="op" id="7434057">}</span><span class="op" id="7434058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7434061">{</span><span class="ident" id="7434062">net</span><span class="op" id="7434065">:</span>&nbsp;<span class="string" id="7434067">&#34;tcp4&#34;</span><span class="op" id="7434073">,</span>&nbsp;<span class="ident" id="7434075">laddr</span><span class="op" id="7434080">:</span>&nbsp;<span class="string" id="7434082">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7434100">}</span><span class="op" id="7434101">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7434105">{</span><span class="ident" id="7434106">net</span><span class="op" id="7434109">:</span>&nbsp;<span class="string" id="7434111">&#34;tcp4&#34;</span><span class="op" id="7434117">,</span>&nbsp;<span class="ident" id="7434119">laddr</span><span class="op" id="7434124">:</span>&nbsp;<span class="string" id="7434126">&#34;127.0.0.1&#34;</span><span class="op" id="7434137">}</span><span class="op" id="7434138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7434141">{</span><span class="ident" id="7434142">net</span><span class="op" id="7434145">:</span>&nbsp;<span class="string" id="7434147">&#34;tcp4&#34;</span><span class="op" id="7434153">,</span>&nbsp;<span class="ident" id="7434155">laddr</span><span class="op" id="7434160">:</span>&nbsp;<span class="string" id="7434162">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="7434182">}</span><span class="op" id="7434183">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7434187">{</span><span class="ident" id="7434188">net</span><span class="op" id="7434191">:</span>&nbsp;<span class="string" id="7434193">&#34;tcp6&#34;</span><span class="op" id="7434199">,</span>&nbsp;<span class="ident" id="7434201">laddr</span><span class="op" id="7434206">:</span>&nbsp;<span class="string" id="7434208">&#34;&#34;</span><span class="op" id="7434210">,</span>&nbsp;<span class="ident" id="7434212">ipv6</span><span class="op" id="7434216">:</span>&nbsp;<span class="ident" id="7434218">true</span><span class="op" id="7434222">}</span><span class="op" id="7434223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7434226">{</span><span class="ident" id="7434227">net</span><span class="op" id="7434230">:</span>&nbsp;<span class="string" id="7434232">&#34;tcp6&#34;</span><span class="op" id="7434238">,</span>&nbsp;<span class="ident" id="7434240">laddr</span><span class="op" id="7434245">:</span>&nbsp;<span class="string" id="7434247">&#34;[::]&#34;</span><span class="op" id="7434253">,</span>&nbsp;<span class="ident" id="7434255">ipv6</span><span class="op" id="7434259">:</span>&nbsp;<span class="ident" id="7434261">true</span><span class="op" id="7434265">}</span><span class="op" id="7434266">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7434270">{</span><span class="ident" id="7434271">net</span><span class="op" id="7434274">:</span>&nbsp;<span class="string" id="7434276">&#34;tcp6&#34;</span><span class="op" id="7434282">,</span>&nbsp;<span class="ident" id="7434284">laddr</span><span class="op" id="7434289">:</span>&nbsp;<span class="string" id="7434291">&#34;[::1]&#34;</span><span class="op" id="7434298">,</span>&nbsp;<span class="ident" id="7434300">ipv6</span><span class="op" id="7434304">:</span>&nbsp;<span class="ident" id="7434306">true</span><span class="op" id="7434310">}</span><span class="op" id="7434311">,</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7434315">{</span><span class="ident" id="7434316">net</span><span class="op" id="7434319">:</span>&nbsp;<span class="string" id="7434321">&#34;unix&#34;</span><span class="op" id="7434327">,</span>&nbsp;<span class="ident" id="7434329">laddr</span><span class="op" id="7434334">:</span>&nbsp;<span class="string" id="7434336">&#34;@gotest/net&#34;</span><span class="op" id="7434349">,</span>&nbsp;<span class="ident" id="7434351">linux</span><span class="op" id="7434356">:</span>&nbsp;<span class="ident" id="7434358">true</span><span class="op" id="7434362">}</span><span class="op" id="7434363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7434366">{</span><span class="ident" id="7434367">net</span><span class="op" id="7434370">:</span>&nbsp;<span class="string" id="7434372">&#34;unixpacket&#34;</span><span class="op" id="7434384">,</span>&nbsp;<span class="ident" id="7434386">laddr</span><span class="op" id="7434391">:</span>&nbsp;<span class="string" id="7434393">&#34;@gotest/net&#34;</span><span class="op" id="7434406">,</span>&nbsp;<span class="ident" id="7434408">linux</span><span class="op" id="7434413">:</span>&nbsp;<span class="ident" id="7434415">true</span><span class="op" id="7434419">}</span><span class="op" id="7434420">,</span><br>
<span class="lineno"></span><span class="op" id="7434422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="7434425">func</span>&nbsp;<span class="ident" id="7434430">TestFileListener</span><span class="op" id="7434446">(</span><span class="ident" id="7434447">t</span>&nbsp;<span class="op" id="7434449">*</span><span class="ident" id="7434450">testing</span><span class="op" id="7434457">.</span><span class="ident" id="7434458">T</span><span class="op" id="7434459">)</span>&nbsp;<span class="op" id="7434461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7434464">switch</span>&nbsp;<span class="ident" id="7434471">runtime</span><span class="op" id="7434478">.</span><span class="ident" id="7434479">GOOS</span>&nbsp;<span class="op" id="7434484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7434487">case</span>&nbsp;<span class="string" id="7434492">&#34;nacl&#34;</span><span class="op" id="7434498">,</span>&nbsp;<span class="string" id="7434500">&#34;windows&#34;</span><span class="op" id="7434509">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7434513">t</span><span class="op" id="7434514">.</span><span class="ident" id="7434515">Skipf</span><span class="op" id="7434520">(</span><span class="string" id="7434521">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7434542">,</span>&nbsp;<span class="ident" id="7434544">runtime</span><span class="op" id="7434551">.</span><span class="ident" id="7434552">GOOS</span><span class="op" id="7434556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7434559">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7434563">for</span>&nbsp;<span class="ident" id="7434567">_</span><span class="op" id="7434568">,</span>&nbsp;<span class="ident" id="7434570">tt</span>&nbsp;<span class="op" id="7434573">:=</span>&nbsp;<span class="keyword" id="7434576">range</span>&nbsp;<span class="ident" id="7434582">fileListenerTests</span>&nbsp;<span class="op" id="7434600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7434604">if</span>&nbsp;<span class="ident" id="7434607">skipServerTest</span><span class="op" id="7434621">(</span><span class="ident" id="7434622">tt</span><span class="op" id="7434624">.</span><span class="ident" id="7434625">net</span><span class="op" id="7434628">,</span>&nbsp;<span class="string" id="7434630">&#34;unix&#34;</span><span class="op" id="7434636">,</span>&nbsp;<span class="ident" id="7434638">tt</span><span class="op" id="7434640">.</span><span class="ident" id="7434641">laddr</span><span class="op" id="7434646">,</span>&nbsp;<span class="ident" id="7434648">tt</span><span class="op" id="7434650">.</span><span class="ident" id="7434651">ipv6</span><span class="op" id="7434655">,</span>&nbsp;<span class="ident" id="7434657">false</span><span class="op" id="7434662">,</span>&nbsp;<span class="ident" id="7434664">tt</span><span class="op" id="7434666">.</span><span class="ident" id="7434667">linux</span><span class="op" id="7434672">)</span>&nbsp;<span class="op" id="7434674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7434679">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7434690">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7434694">if</span>&nbsp;<span class="ident" id="7434697">skipServerTest</span><span class="op" id="7434711">(</span><span class="ident" id="7434712">tt</span><span class="op" id="7434714">.</span><span class="ident" id="7434715">net</span><span class="op" id="7434718">,</span>&nbsp;<span class="string" id="7434720">&#34;unixpacket&#34;</span><span class="op" id="7434732">,</span>&nbsp;<span class="ident" id="7434734">tt</span><span class="op" id="7434736">.</span><span class="ident" id="7434737">laddr</span><span class="op" id="7434742">,</span>&nbsp;<span class="ident" id="7434744">tt</span><span class="op" id="7434746">.</span><span class="ident" id="7434747">ipv6</span><span class="op" id="7434751">,</span>&nbsp;<span class="ident" id="7434753">false</span><span class="op" id="7434758">,</span>&nbsp;<span class="ident" id="7434760">tt</span><span class="op" id="7434762">.</span><span class="ident" id="7434763">linux</span><span class="op" id="7434768">)</span>&nbsp;<span class="op" id="7434770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7434775">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7434786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7434790">testFileListener</span><span class="op" id="7434806">(</span><span class="ident" id="7434807">t</span><span class="op" id="7434808">,</span>&nbsp;<span class="ident" id="7434810">tt</span><span class="op" id="7434812">.</span><span class="ident" id="7434813">net</span><span class="op" id="7434816">,</span>&nbsp;<span class="ident" id="7434818">tt</span><span class="op" id="7434820">.</span><span class="ident" id="7434821">laddr</span><span class="op" id="7434826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7434829">}</span><br>
<span class="lineno">105</span><span class="op" id="7434831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7434834">func</span>&nbsp;<span class="ident" id="7434839">testFilePacketConn</span><span class="op" id="7434857">(</span><span class="ident" id="7434858">t</span>&nbsp;<span class="op" id="7434860">*</span><span class="ident" id="7434861">testing</span><span class="op" id="7434868">.</span><span class="ident" id="7434869">T</span><span class="op" id="7434870">,</span>&nbsp;<span class="ident" id="7434872">pcf</span>&nbsp;<span class="ident" id="7434876">packetConnFile</span><span class="op" id="7434890">,</span>&nbsp;<span class="ident" id="7434892">listen</span>&nbsp;<span class="builtintype" id="7434899">bool</span><span class="op" id="7434903">)</span>&nbsp;<span class="op" id="7434905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7434908">f</span><span class="op" id="7434909">,</span>&nbsp;<span class="ident" id="7434911">err</span>&nbsp;<span class="op" id="7434915">:=</span>&nbsp;<span class="ident" id="7434918">pcf</span><span class="op" id="7434921">.</span><span class="ident" id="7434922">File</span><span class="op" id="7434926">(</span><span class="op" id="7434927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7434930">if</span>&nbsp;<span class="ident" id="7434933">err</span>&nbsp;<span class="op" id="7434937">!=</span>&nbsp;<span class="ident" id="7434940">nil</span>&nbsp;<span class="op" id="7434944">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7434948">t</span><span class="op" id="7434949">.</span><span class="ident" id="7434950">Fatalf</span><span class="op" id="7434956">(</span><span class="string" id="7434957">&#34;File&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7434974">,</span>&nbsp;<span class="ident" id="7434976">err</span><span class="op" id="7434979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7434982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7434985">c</span><span class="op" id="7434986">,</span>&nbsp;<span class="ident" id="7434988">err</span>&nbsp;<span class="op" id="7434992">:=</span>&nbsp;<span class="ident" id="7434995">FilePacketConn</span><span class="op" id="7435009">(</span><span class="ident" id="7435010">f</span><span class="op" id="7435011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7435014">if</span>&nbsp;<span class="ident" id="7435017">err</span>&nbsp;<span class="op" id="7435021">!=</span>&nbsp;<span class="ident" id="7435024">nil</span>&nbsp;<span class="op" id="7435028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7435032">t</span><span class="op" id="7435033">.</span><span class="ident" id="7435034">Fatalf</span><span class="op" id="7435040">(</span><span class="string" id="7435041">&#34;FilePacketConn&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7435068">,</span>&nbsp;<span class="ident" id="7435070">err</span><span class="op" id="7435073">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7435076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7435079">if</span>&nbsp;<span class="op" id="7435082">!</span><span class="ident" id="7435083">reflect</span><span class="op" id="7435090">.</span><span class="ident" id="7435091">DeepEqual</span><span class="op" id="7435100">(</span><span class="ident" id="7435101">pcf</span><span class="op" id="7435104">.</span><span class="ident" id="7435105">LocalAddr</span><span class="op" id="7435114">(</span><span class="op" id="7435115">)</span><span class="op" id="7435116">,</span>&nbsp;<span class="ident" id="7435118">c</span><span class="op" id="7435119">.</span><span class="ident" id="7435120">LocalAddr</span><span class="op" id="7435129">(</span><span class="op" id="7435130">)</span><span class="op" id="7435131">)</span>&nbsp;<span class="op" id="7435133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7435137">t</span><span class="op" id="7435138">.</span><span class="ident" id="7435139">Fatalf</span><span class="op" id="7435145">(</span><span class="string" id="7435146">&#34;LocalAddrs&nbsp;not&nbsp;equal:&nbsp;%#v&nbsp;!=&nbsp;%#v&#34;</span><span class="op" id="7435180">,</span>&nbsp;<span class="ident" id="7435182">pcf</span><span class="op" id="7435185">.</span><span class="ident" id="7435186">LocalAddr</span><span class="op" id="7435195">(</span><span class="op" id="7435196">)</span><span class="op" id="7435197">,</span>&nbsp;<span class="ident" id="7435199">c</span><span class="op" id="7435200">.</span><span class="ident" id="7435201">LocalAddr</span><span class="op" id="7435210">(</span><span class="op" id="7435211">)</span><span class="op" id="7435212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7435215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7435218">if</span>&nbsp;<span class="ident" id="7435221">listen</span>&nbsp;<span class="op" id="7435228">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7435232">if</span>&nbsp;<span class="ident" id="7435235">_</span><span class="op" id="7435236">,</span>&nbsp;<span class="ident" id="7435238">err</span>&nbsp;<span class="op" id="7435242">:=</span>&nbsp;<span class="ident" id="7435245">c</span><span class="op" id="7435246">.</span><span class="ident" id="7435247">WriteTo</span><span class="op" id="7435254">(</span><span class="op" id="7435255">[</span><span class="op" id="7435256">]</span><span class="builtintype" id="7435257">byte</span><span class="op" id="7435261">{</span><span class="op" id="7435262">}</span><span class="op" id="7435263">,</span>&nbsp;<span class="ident" id="7435265">c</span><span class="op" id="7435266">.</span><span class="ident" id="7435267">LocalAddr</span><span class="op" id="7435276">(</span><span class="op" id="7435277">)</span><span class="op" id="7435278">)</span><span class="op" id="7435279">;</span>&nbsp;<span class="ident" id="7435281">err</span>&nbsp;<span class="op" id="7435285">!=</span>&nbsp;<span class="ident" id="7435288">nil</span>&nbsp;<span class="op" id="7435292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7435297">t</span><span class="op" id="7435298">.</span><span class="ident" id="7435299">Fatalf</span><span class="op" id="7435305">(</span><span class="string" id="7435306">&#34;WriteTo&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7435326">,</span>&nbsp;<span class="ident" id="7435328">err</span><span class="op" id="7435331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7435335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7435338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7435341">if</span>&nbsp;<span class="ident" id="7435344">err</span>&nbsp;<span class="op" id="7435348">:=</span>&nbsp;<span class="ident" id="7435351">c</span><span class="op" id="7435352">.</span><span class="ident" id="7435353">Close</span><span class="op" id="7435358">(</span><span class="op" id="7435359">)</span><span class="op" id="7435360">;</span>&nbsp;<span class="ident" id="7435362">err</span>&nbsp;<span class="op" id="7435366">!=</span>&nbsp;<span class="ident" id="7435369">nil</span>&nbsp;<span class="op" id="7435373">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7435377">t</span><span class="op" id="7435378">.</span><span class="ident" id="7435379">Fatalf</span><span class="op" id="7435385">(</span><span class="string" id="7435386">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7435404">,</span>&nbsp;<span class="ident" id="7435406">err</span><span class="op" id="7435409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7435412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7435415">if</span>&nbsp;<span class="ident" id="7435418">err</span>&nbsp;<span class="op" id="7435422">:=</span>&nbsp;<span class="ident" id="7435425">f</span><span class="op" id="7435426">.</span><span class="ident" id="7435427">Close</span><span class="op" id="7435432">(</span><span class="op" id="7435433">)</span><span class="op" id="7435434">;</span>&nbsp;<span class="ident" id="7435436">err</span>&nbsp;<span class="op" id="7435440">!=</span>&nbsp;<span class="ident" id="7435443">nil</span>&nbsp;<span class="op" id="7435447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7435451">t</span><span class="op" id="7435452">.</span><span class="ident" id="7435453">Fatalf</span><span class="op" id="7435459">(</span><span class="string" id="7435460">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7435478">,</span>&nbsp;<span class="ident" id="7435480">err</span><span class="op" id="7435483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7435486">}</span><br>
<span class="lineno">130</span><span class="op" id="7435488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7435491">func</span>&nbsp;<span class="ident" id="7435496">testFilePacketConnListen</span><span class="op" id="7435520">(</span><span class="ident" id="7435521">t</span>&nbsp;<span class="op" id="7435523">*</span><span class="ident" id="7435524">testing</span><span class="op" id="7435531">.</span><span class="ident" id="7435532">T</span><span class="op" id="7435533">,</span>&nbsp;<span class="ident" id="7435535">net</span><span class="op" id="7435538">,</span>&nbsp;<span class="ident" id="7435540">laddr</span>&nbsp;<span class="builtintype" id="7435546">string</span><span class="op" id="7435552">)</span>&nbsp;<span class="op" id="7435554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7435557">switch</span>&nbsp;<span class="ident" id="7435564">net</span>&nbsp;<span class="op" id="7435568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7435571">case</span>&nbsp;<span class="string" id="7435576">&#34;udp&#34;</span><span class="op" id="7435581">,</span>&nbsp;<span class="string" id="7435583">&#34;udp4&#34;</span><span class="op" id="7435589">,</span>&nbsp;<span class="string" id="7435591">&#34;udp6&#34;</span><span class="op" id="7435597">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7435601">laddr</span>&nbsp;<span class="op" id="7435607">+=</span>&nbsp;<span class="string" id="7435610">&#34;:0&#34;</span>&nbsp;<span class="comment" id="7435615">//&nbsp;any&nbsp;available&nbsp;port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7435638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7435641">l</span><span class="op" id="7435642">,</span>&nbsp;<span class="ident" id="7435644">err</span>&nbsp;<span class="op" id="7435648">:=</span>&nbsp;<span class="ident" id="7435651">ListenPacket</span><span class="op" id="7435663">(</span><span class="ident" id="7435664">net</span><span class="op" id="7435667">,</span>&nbsp;<span class="ident" id="7435669">laddr</span><span class="op" id="7435674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7435677">if</span>&nbsp;<span class="ident" id="7435680">err</span>&nbsp;<span class="op" id="7435684">!=</span>&nbsp;<span class="ident" id="7435687">nil</span>&nbsp;<span class="op" id="7435691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7435695">t</span><span class="op" id="7435696">.</span><span class="ident" id="7435697">Fatalf</span><span class="op" id="7435703">(</span><span class="string" id="7435704">&#34;ListenPacket&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7435729">,</span>&nbsp;<span class="ident" id="7435731">err</span><span class="op" id="7435734">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7435737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7435740">testFilePacketConn</span><span class="op" id="7435758">(</span><span class="ident" id="7435759">t</span><span class="op" id="7435760">,</span>&nbsp;<span class="ident" id="7435762">l</span><span class="op" id="7435763">.</span><span class="op" id="7435764">(</span><span class="ident" id="7435765">packetConnFile</span><span class="op" id="7435779">)</span><span class="op" id="7435780">,</span>&nbsp;<span class="ident" id="7435782">true</span><span class="op" id="7435786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7435789">if</span>&nbsp;<span class="ident" id="7435792">err</span>&nbsp;<span class="op" id="7435796">:=</span>&nbsp;<span class="ident" id="7435799">l</span><span class="op" id="7435800">.</span><span class="ident" id="7435801">Close</span><span class="op" id="7435806">(</span><span class="op" id="7435807">)</span><span class="op" id="7435808">;</span>&nbsp;<span class="ident" id="7435810">err</span>&nbsp;<span class="op" id="7435814">!=</span>&nbsp;<span class="ident" id="7435817">nil</span>&nbsp;<span class="op" id="7435821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7435825">t</span><span class="op" id="7435826">.</span><span class="ident" id="7435827">Fatalf</span><span class="op" id="7435833">(</span><span class="string" id="7435834">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7435852">,</span>&nbsp;<span class="ident" id="7435854">err</span><span class="op" id="7435857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7435860">}</span><br>
<span class="lineno">145</span><span class="op" id="7435862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7435865">func</span>&nbsp;<span class="ident" id="7435870">testFilePacketConnDial</span><span class="op" id="7435892">(</span><span class="ident" id="7435893">t</span>&nbsp;<span class="op" id="7435895">*</span><span class="ident" id="7435896">testing</span><span class="op" id="7435903">.</span><span class="ident" id="7435904">T</span><span class="op" id="7435905">,</span>&nbsp;<span class="ident" id="7435907">net</span><span class="op" id="7435910">,</span>&nbsp;<span class="ident" id="7435912">raddr</span>&nbsp;<span class="builtintype" id="7435918">string</span><span class="op" id="7435924">)</span>&nbsp;<span class="op" id="7435926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7435929">switch</span>&nbsp;<span class="ident" id="7435936">net</span>&nbsp;<span class="op" id="7435940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7435943">case</span>&nbsp;<span class="string" id="7435948">&#34;udp&#34;</span><span class="op" id="7435953">,</span>&nbsp;<span class="string" id="7435955">&#34;udp4&#34;</span><span class="op" id="7435961">,</span>&nbsp;<span class="string" id="7435963">&#34;udp6&#34;</span><span class="op" id="7435969">:</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7435973">raddr</span>&nbsp;<span class="op" id="7435979">+=</span>&nbsp;<span class="string" id="7435982">&#34;:12345&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7435992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7435995">c</span><span class="op" id="7435996">,</span>&nbsp;<span class="ident" id="7435998">err</span>&nbsp;<span class="op" id="7436002">:=</span>&nbsp;<span class="ident" id="7436005">Dial</span><span class="op" id="7436009">(</span><span class="ident" id="7436010">net</span><span class="op" id="7436013">,</span>&nbsp;<span class="ident" id="7436015">raddr</span><span class="op" id="7436020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7436023">if</span>&nbsp;<span class="ident" id="7436026">err</span>&nbsp;<span class="op" id="7436030">!=</span>&nbsp;<span class="ident" id="7436033">nil</span>&nbsp;<span class="op" id="7436037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7436041">t</span><span class="op" id="7436042">.</span><span class="ident" id="7436043">Fatalf</span><span class="op" id="7436049">(</span><span class="string" id="7436050">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7436067">,</span>&nbsp;<span class="ident" id="7436069">err</span><span class="op" id="7436072">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7436078">testFilePacketConn</span><span class="op" id="7436096">(</span><span class="ident" id="7436097">t</span><span class="op" id="7436098">,</span>&nbsp;<span class="ident" id="7436100">c</span><span class="op" id="7436101">.</span><span class="op" id="7436102">(</span><span class="ident" id="7436103">packetConnFile</span><span class="op" id="7436117">)</span><span class="op" id="7436118">,</span>&nbsp;<span class="ident" id="7436120">false</span><span class="op" id="7436125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7436128">if</span>&nbsp;<span class="ident" id="7436131">err</span>&nbsp;<span class="op" id="7436135">:=</span>&nbsp;<span class="ident" id="7436138">c</span><span class="op" id="7436139">.</span><span class="ident" id="7436140">Close</span><span class="op" id="7436145">(</span><span class="op" id="7436146">)</span><span class="op" id="7436147">;</span>&nbsp;<span class="ident" id="7436149">err</span>&nbsp;<span class="op" id="7436153">!=</span>&nbsp;<span class="ident" id="7436156">nil</span>&nbsp;<span class="op" id="7436160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7436164">t</span><span class="op" id="7436165">.</span><span class="ident" id="7436166">Fatalf</span><span class="op" id="7436172">(</span><span class="string" id="7436173">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7436191">,</span>&nbsp;<span class="ident" id="7436193">err</span><span class="op" id="7436196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436199">}</span><br>
<span class="lineno">160</span><span class="op" id="7436201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7436204">var</span>&nbsp;<span class="ident" id="7436208">filePacketConnTests</span>&nbsp;<span class="op" id="7436228">=</span>&nbsp;<span class="op" id="7436230">[</span><span class="op" id="7436231">]</span><span class="keyword" id="7436232">struct</span>&nbsp;<span class="op" id="7436239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7436242">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7436248">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7436256">addr</span>&nbsp;&nbsp;<span class="builtintype" id="7436262">string</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7436270">ipv6</span>&nbsp;&nbsp;<span class="builtintype" id="7436276">bool</span>&nbsp;<span class="comment" id="7436281">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7436322">linux</span>&nbsp;<span class="builtintype" id="7436328">bool</span>&nbsp;<span class="comment" id="7436333">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="7436387">}</span><span class="op" id="7436388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436391">{</span><span class="ident" id="7436392">net</span><span class="op" id="7436395">:</span>&nbsp;<span class="string" id="7436397">&#34;udp&#34;</span><span class="op" id="7436402">,</span>&nbsp;<span class="ident" id="7436404">addr</span><span class="op" id="7436408">:</span>&nbsp;<span class="string" id="7436410">&#34;127.0.0.1&#34;</span><span class="op" id="7436421">}</span><span class="op" id="7436422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436425">{</span><span class="ident" id="7436426">net</span><span class="op" id="7436429">:</span>&nbsp;<span class="string" id="7436431">&#34;udp&#34;</span><span class="op" id="7436436">,</span>&nbsp;<span class="ident" id="7436438">addr</span><span class="op" id="7436442">:</span>&nbsp;<span class="string" id="7436444">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="7436464">}</span><span class="op" id="7436465">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436468">{</span><span class="ident" id="7436469">net</span><span class="op" id="7436472">:</span>&nbsp;<span class="string" id="7436474">&#34;udp&#34;</span><span class="op" id="7436479">,</span>&nbsp;<span class="ident" id="7436481">addr</span><span class="op" id="7436485">:</span>&nbsp;<span class="string" id="7436487">&#34;[::1]&#34;</span><span class="op" id="7436494">,</span>&nbsp;<span class="ident" id="7436496">ipv6</span><span class="op" id="7436500">:</span>&nbsp;<span class="ident" id="7436502">true</span><span class="op" id="7436506">}</span><span class="op" id="7436507">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436511">{</span><span class="ident" id="7436512">net</span><span class="op" id="7436515">:</span>&nbsp;<span class="string" id="7436517">&#34;udp4&#34;</span><span class="op" id="7436523">,</span>&nbsp;<span class="ident" id="7436525">addr</span><span class="op" id="7436529">:</span>&nbsp;<span class="string" id="7436531">&#34;127.0.0.1&#34;</span><span class="op" id="7436542">}</span><span class="op" id="7436543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436546">{</span><span class="ident" id="7436547">net</span><span class="op" id="7436550">:</span>&nbsp;<span class="string" id="7436552">&#34;udp4&#34;</span><span class="op" id="7436558">,</span>&nbsp;<span class="ident" id="7436560">addr</span><span class="op" id="7436564">:</span>&nbsp;<span class="string" id="7436566">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="7436586">}</span><span class="op" id="7436587">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436591">{</span><span class="ident" id="7436592">net</span><span class="op" id="7436595">:</span>&nbsp;<span class="string" id="7436597">&#34;udp6&#34;</span><span class="op" id="7436603">,</span>&nbsp;<span class="ident" id="7436605">addr</span><span class="op" id="7436609">:</span>&nbsp;<span class="string" id="7436611">&#34;[::1]&#34;</span><span class="op" id="7436618">,</span>&nbsp;<span class="ident" id="7436620">ipv6</span><span class="op" id="7436624">:</span>&nbsp;<span class="ident" id="7436626">true</span><span class="op" id="7436630">}</span><span class="op" id="7436631">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436635">{</span><span class="ident" id="7436636">net</span><span class="op" id="7436639">:</span>&nbsp;<span class="string" id="7436641">&#34;ip4:icmp&#34;</span><span class="op" id="7436651">,</span>&nbsp;<span class="ident" id="7436653">addr</span><span class="op" id="7436657">:</span>&nbsp;<span class="string" id="7436659">&#34;127.0.0.1&#34;</span><span class="op" id="7436670">}</span><span class="op" id="7436671">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436675">{</span><span class="ident" id="7436676">net</span><span class="op" id="7436679">:</span>&nbsp;<span class="string" id="7436681">&#34;unixgram&#34;</span><span class="op" id="7436691">,</span>&nbsp;<span class="ident" id="7436693">addr</span><span class="op" id="7436697">:</span>&nbsp;<span class="string" id="7436699">&#34;@gotest3/net&#34;</span><span class="op" id="7436713">,</span>&nbsp;<span class="ident" id="7436715">linux</span><span class="op" id="7436720">:</span>&nbsp;<span class="ident" id="7436722">true</span><span class="op" id="7436726">}</span><span class="op" id="7436727">,</span><br>
<span class="lineno">180</span><span class="op" id="7436729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7436732">func</span>&nbsp;<span class="ident" id="7436737">TestFilePacketConn</span><span class="op" id="7436755">(</span><span class="ident" id="7436756">t</span>&nbsp;<span class="op" id="7436758">*</span><span class="ident" id="7436759">testing</span><span class="op" id="7436766">.</span><span class="ident" id="7436767">T</span><span class="op" id="7436768">)</span>&nbsp;<span class="op" id="7436770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7436773">switch</span>&nbsp;<span class="ident" id="7436780">runtime</span><span class="op" id="7436787">.</span><span class="ident" id="7436788">GOOS</span>&nbsp;<span class="op" id="7436793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7436796">case</span>&nbsp;<span class="string" id="7436801">&#34;nacl&#34;</span><span class="op" id="7436807">,</span>&nbsp;<span class="string" id="7436809">&#34;plan9&#34;</span><span class="op" id="7436816">,</span>&nbsp;<span class="string" id="7436818">&#34;windows&#34;</span><span class="op" id="7436827">:</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7436831">t</span><span class="op" id="7436832">.</span><span class="ident" id="7436833">Skipf</span><span class="op" id="7436838">(</span><span class="string" id="7436839">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7436860">,</span>&nbsp;<span class="ident" id="7436862">runtime</span><span class="op" id="7436869">.</span><span class="ident" id="7436870">GOOS</span><span class="op" id="7436874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7436877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7436881">for</span>&nbsp;<span class="ident" id="7436885">_</span><span class="op" id="7436886">,</span>&nbsp;<span class="ident" id="7436888">tt</span>&nbsp;<span class="op" id="7436891">:=</span>&nbsp;<span class="keyword" id="7436894">range</span>&nbsp;<span class="ident" id="7436900">filePacketConnTests</span>&nbsp;<span class="op" id="7436920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7436924">if</span>&nbsp;<span class="ident" id="7436927">skipServerTest</span><span class="op" id="7436941">(</span><span class="ident" id="7436942">tt</span><span class="op" id="7436944">.</span><span class="ident" id="7436945">net</span><span class="op" id="7436948">,</span>&nbsp;<span class="string" id="7436950">&#34;unixgram&#34;</span><span class="op" id="7436960">,</span>&nbsp;<span class="ident" id="7436962">tt</span><span class="op" id="7436964">.</span><span class="ident" id="7436965">addr</span><span class="op" id="7436969">,</span>&nbsp;<span class="ident" id="7436971">tt</span><span class="op" id="7436973">.</span><span class="ident" id="7436974">ipv6</span><span class="op" id="7436978">,</span>&nbsp;<span class="ident" id="7436980">false</span><span class="op" id="7436985">,</span>&nbsp;<span class="ident" id="7436987">tt</span><span class="op" id="7436989">.</span><span class="ident" id="7436990">linux</span><span class="op" id="7436995">)</span>&nbsp;<span class="op" id="7436997">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7437002">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7437013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7437017">if</span>&nbsp;<span class="ident" id="7437020">os</span><span class="op" id="7437022">.</span><span class="ident" id="7437023">Getuid</span><span class="op" id="7437029">(</span><span class="op" id="7437030">)</span>&nbsp;<span class="op" id="7437032">!=</span>&nbsp;<span class="num" id="7437035">0</span>&nbsp;<span class="op" id="7437037">&amp;&amp;</span>&nbsp;<span class="ident" id="7437040">tt</span><span class="op" id="7437042">.</span><span class="ident" id="7437043">net</span>&nbsp;<span class="op" id="7437047">==</span>&nbsp;<span class="string" id="7437050">&#34;ip4:icmp&#34;</span>&nbsp;<span class="op" id="7437061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7437066">t</span><span class="op" id="7437067">.</span><span class="ident" id="7437068">Log</span><span class="op" id="7437071">(</span><span class="string" id="7437072">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="7437101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7437106">continue</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7437117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7437121">testFilePacketConnListen</span><span class="op" id="7437145">(</span><span class="ident" id="7437146">t</span><span class="op" id="7437147">,</span>&nbsp;<span class="ident" id="7437149">tt</span><span class="op" id="7437151">.</span><span class="ident" id="7437152">net</span><span class="op" id="7437155">,</span>&nbsp;<span class="ident" id="7437157">tt</span><span class="op" id="7437159">.</span><span class="ident" id="7437160">addr</span><span class="op" id="7437164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7437168">switch</span>&nbsp;<span class="ident" id="7437175">tt</span><span class="op" id="7437177">.</span><span class="ident" id="7437178">addr</span>&nbsp;<span class="op" id="7437183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7437187">case</span>&nbsp;<span class="string" id="7437192">&#34;&#34;</span><span class="op" id="7437194">,</span>&nbsp;<span class="string" id="7437196">&#34;0.0.0.0&#34;</span><span class="op" id="7437205">,</span>&nbsp;<span class="string" id="7437207">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7437225">,</span>&nbsp;<span class="string" id="7437227">&#34;[::]&#34;</span><span class="op" id="7437233">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7437237">default</span><span class="op" id="7437244">:</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7437249">if</span>&nbsp;<span class="ident" id="7437252">tt</span><span class="op" id="7437254">.</span><span class="ident" id="7437255">net</span>&nbsp;<span class="op" id="7437259">!=</span>&nbsp;<span class="string" id="7437262">&#34;unixgram&#34;</span>&nbsp;<span class="op" id="7437273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7437279">testFilePacketConnDial</span><span class="op" id="7437301">(</span><span class="ident" id="7437302">t</span><span class="op" id="7437303">,</span>&nbsp;<span class="ident" id="7437305">tt</span><span class="op" id="7437307">.</span><span class="ident" id="7437308">net</span><span class="op" id="7437311">,</span>&nbsp;<span class="ident" id="7437313">tt</span><span class="op" id="7437315">.</span><span class="ident" id="7437316">addr</span><span class="op" id="7437320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7437325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7437329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7437332">}</span><br>
<span class="lineno">205</span><span class="op" id="7437334">}</span>
</div>
</body>
</html>
