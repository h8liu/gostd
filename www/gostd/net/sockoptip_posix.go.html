<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3288075">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3288131">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3288185">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3288236">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3288301">package</span>&nbsp;<span class="ident" id="3288309">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3288314">import</span>&nbsp;<span class="op" id="3288321">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3288324">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3288330">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="3288340">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3288343">func</span>&nbsp;<span class="ident" id="3288348">joinIPv4Group</span><span class="op" id="3288361">(</span><span class="ident" id="3288362">fd</span>&nbsp;<span class="op" id="3288365">*</span><span class="ident" id="3288366">netFD</span><span class="op" id="3288371">,</span>&nbsp;<span class="ident" id="3288373">ifi</span>&nbsp;<span class="op" id="3288377">*</span><span class="ident" id="3288378">Interface</span><span class="op" id="3288387">,</span>&nbsp;<span class="ident" id="3288389">ip</span>&nbsp;<span class="ident" id="3288392">IP</span><span class="op" id="3288394">)</span>&nbsp;<span class="builtintype" id="3288396">error</span>&nbsp;<span class="op" id="3288402">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3288405">mreq</span>&nbsp;<span class="op" id="3288410">:=</span>&nbsp;<span class="op" id="3288413">&amp;</span><span class="ident" id="3288414">syscall</span><span class="op" id="3288421">.</span><span class="ident" id="3288422">IPMreq</span><span class="op" id="3288428">{</span><span class="ident" id="3288429">Multiaddr</span><span class="op" id="3288438">:</span>&nbsp;<span class="op" id="3288440">[</span><span class="num" id="3288441">4</span><span class="op" id="3288442">]</span><span class="builtintype" id="3288443">byte</span><span class="op" id="3288447">{</span><span class="ident" id="3288448">ip</span><span class="op" id="3288450">[</span><span class="num" id="3288451">0</span><span class="op" id="3288452">]</span><span class="op" id="3288453">,</span>&nbsp;<span class="ident" id="3288455">ip</span><span class="op" id="3288457">[</span><span class="num" id="3288458">1</span><span class="op" id="3288459">]</span><span class="op" id="3288460">,</span>&nbsp;<span class="ident" id="3288462">ip</span><span class="op" id="3288464">[</span><span class="num" id="3288465">2</span><span class="op" id="3288466">]</span><span class="op" id="3288467">,</span>&nbsp;<span class="ident" id="3288469">ip</span><span class="op" id="3288471">[</span><span class="num" id="3288472">3</span><span class="op" id="3288473">]</span><span class="op" id="3288474">}</span><span class="op" id="3288475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3288478">if</span>&nbsp;<span class="ident" id="3288481">err</span>&nbsp;<span class="op" id="3288485">:=</span>&nbsp;<span class="ident" id="3288488">setIPv4MreqToInterface</span><span class="op" id="3288510">(</span><span class="ident" id="3288511">mreq</span><span class="op" id="3288515">,</span>&nbsp;<span class="ident" id="3288517">ifi</span><span class="op" id="3288520">)</span><span class="op" id="3288521">;</span>&nbsp;<span class="ident" id="3288523">err</span>&nbsp;<span class="op" id="3288527">!=</span>&nbsp;<span class="ident" id="3288530">nil</span>&nbsp;<span class="op" id="3288534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3288538">return</span>&nbsp;<span class="ident" id="3288545">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3288550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3288553">if</span>&nbsp;<span class="ident" id="3288556">err</span>&nbsp;<span class="op" id="3288560">:=</span>&nbsp;<span class="ident" id="3288563">fd</span><span class="op" id="3288565">.</span><span class="ident" id="3288566">incref</span><span class="op" id="3288572">(</span><span class="op" id="3288573">)</span><span class="op" id="3288574">;</span>&nbsp;<span class="ident" id="3288576">err</span>&nbsp;<span class="op" id="3288580">!=</span>&nbsp;<span class="ident" id="3288583">nil</span>&nbsp;<span class="op" id="3288587">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3288591">return</span>&nbsp;<span class="ident" id="3288598">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3288603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3288606">defer</span>&nbsp;<span class="ident" id="3288612">fd</span><span class="op" id="3288614">.</span><span class="ident" id="3288615">decref</span><span class="op" id="3288621">(</span><span class="op" id="3288622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3288625">return</span>&nbsp;<span class="ident" id="3288632">os</span><span class="op" id="3288634">.</span><span class="ident" id="3288635">NewSyscallError</span><span class="op" id="3288650">(</span><span class="string" id="3288651">&#34;setsockopt&#34;</span><span class="op" id="3288663">,</span>&nbsp;<span class="ident" id="3288665">syscall</span><span class="op" id="3288672">.</span><span class="ident" id="3288673">SetsockoptIPMreq</span><span class="op" id="3288689">(</span><span class="ident" id="3288690">fd</span><span class="op" id="3288692">.</span><span class="ident" id="3288693">sysfd</span><span class="op" id="3288698">,</span>&nbsp;<span class="ident" id="3288700">syscall</span><span class="op" id="3288707">.</span><span class="ident" id="3288708">IPPROTO_IP</span><span class="op" id="3288718">,</span>&nbsp;<span class="ident" id="3288720">syscall</span><span class="op" id="3288727">.</span><span class="ident" id="3288728">IP_ADD_MEMBERSHIP</span><span class="op" id="3288745">,</span>&nbsp;<span class="ident" id="3288747">mreq</span><span class="op" id="3288751">)</span><span class="op" id="3288752">)</span><br>
<span class="lineno"></span><span class="op" id="3288754">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3288757">func</span>&nbsp;<span class="ident" id="3288762">setIPv6MulticastInterface</span><span class="op" id="3288787">(</span><span class="ident" id="3288788">fd</span>&nbsp;<span class="op" id="3288791">*</span><span class="ident" id="3288792">netFD</span><span class="op" id="3288797">,</span>&nbsp;<span class="ident" id="3288799">ifi</span>&nbsp;<span class="op" id="3288803">*</span><span class="ident" id="3288804">Interface</span><span class="op" id="3288813">)</span>&nbsp;<span class="builtintype" id="3288815">error</span>&nbsp;<span class="op" id="3288821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3288824">var</span>&nbsp;<span class="ident" id="3288828">v</span>&nbsp;<span class="builtintype" id="3288830">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3288835">if</span>&nbsp;<span class="ident" id="3288838">ifi</span>&nbsp;<span class="op" id="3288842">!=</span>&nbsp;<span class="ident" id="3288845">nil</span>&nbsp;<span class="op" id="3288849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3288853">v</span>&nbsp;<span class="op" id="3288855">=</span>&nbsp;<span class="ident" id="3288857">ifi</span><span class="op" id="3288860">.</span><span class="ident" id="3288861">Index</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3288868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3288871">if</span>&nbsp;<span class="ident" id="3288874">err</span>&nbsp;<span class="op" id="3288878">:=</span>&nbsp;<span class="ident" id="3288881">fd</span><span class="op" id="3288883">.</span><span class="ident" id="3288884">incref</span><span class="op" id="3288890">(</span><span class="op" id="3288891">)</span><span class="op" id="3288892">;</span>&nbsp;<span class="ident" id="3288894">err</span>&nbsp;<span class="op" id="3288898">!=</span>&nbsp;<span class="ident" id="3288901">nil</span>&nbsp;<span class="op" id="3288905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3288909">return</span>&nbsp;<span class="ident" id="3288916">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3288921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3288924">defer</span>&nbsp;<span class="ident" id="3288930">fd</span><span class="op" id="3288932">.</span><span class="ident" id="3288933">decref</span><span class="op" id="3288939">(</span><span class="op" id="3288940">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3288943">return</span>&nbsp;<span class="ident" id="3288950">os</span><span class="op" id="3288952">.</span><span class="ident" id="3288953">NewSyscallError</span><span class="op" id="3288968">(</span><span class="string" id="3288969">&#34;setsockopt&#34;</span><span class="op" id="3288981">,</span>&nbsp;<span class="ident" id="3288983">syscall</span><span class="op" id="3288990">.</span><span class="ident" id="3288991">SetsockoptInt</span><span class="op" id="3289004">(</span><span class="ident" id="3289005">fd</span><span class="op" id="3289007">.</span><span class="ident" id="3289008">sysfd</span><span class="op" id="3289013">,</span>&nbsp;<span class="ident" id="3289015">syscall</span><span class="op" id="3289022">.</span><span class="ident" id="3289023">IPPROTO_IPV6</span><span class="op" id="3289035">,</span>&nbsp;<span class="ident" id="3289037">syscall</span><span class="op" id="3289044">.</span><span class="ident" id="3289045">IPV6_MULTICAST_IF</span><span class="op" id="3289062">,</span>&nbsp;<span class="ident" id="3289064">v</span><span class="op" id="3289065">)</span><span class="op" id="3289066">)</span><br>
<span class="lineno"></span><span class="op" id="3289068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3289071">func</span>&nbsp;<span class="ident" id="3289076">setIPv6MulticastLoopback</span><span class="op" id="3289100">(</span><span class="ident" id="3289101">fd</span>&nbsp;<span class="op" id="3289104">*</span><span class="ident" id="3289105">netFD</span><span class="op" id="3289110">,</span>&nbsp;<span class="ident" id="3289112">v</span>&nbsp;<span class="builtintype" id="3289114">bool</span><span class="op" id="3289118">)</span>&nbsp;<span class="builtintype" id="3289120">error</span>&nbsp;<span class="op" id="3289126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3289129">if</span>&nbsp;<span class="ident" id="3289132">err</span>&nbsp;<span class="op" id="3289136">:=</span>&nbsp;<span class="ident" id="3289139">fd</span><span class="op" id="3289141">.</span><span class="ident" id="3289142">incref</span><span class="op" id="3289148">(</span><span class="op" id="3289149">)</span><span class="op" id="3289150">;</span>&nbsp;<span class="ident" id="3289152">err</span>&nbsp;<span class="op" id="3289156">!=</span>&nbsp;<span class="ident" id="3289159">nil</span>&nbsp;<span class="op" id="3289163">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3289167">return</span>&nbsp;<span class="ident" id="3289174">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3289179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3289182">defer</span>&nbsp;<span class="ident" id="3289188">fd</span><span class="op" id="3289190">.</span><span class="ident" id="3289191">decref</span><span class="op" id="3289197">(</span><span class="op" id="3289198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3289201">return</span>&nbsp;<span class="ident" id="3289208">os</span><span class="op" id="3289210">.</span><span class="ident" id="3289211">NewSyscallError</span><span class="op" id="3289226">(</span><span class="string" id="3289227">&#34;setsockopt&#34;</span><span class="op" id="3289239">,</span>&nbsp;<span class="ident" id="3289241">syscall</span><span class="op" id="3289248">.</span><span class="ident" id="3289249">SetsockoptInt</span><span class="op" id="3289262">(</span><span class="ident" id="3289263">fd</span><span class="op" id="3289265">.</span><span class="ident" id="3289266">sysfd</span><span class="op" id="3289271">,</span>&nbsp;<span class="ident" id="3289273">syscall</span><span class="op" id="3289280">.</span><span class="ident" id="3289281">IPPROTO_IPV6</span><span class="op" id="3289293">,</span>&nbsp;<span class="ident" id="3289295">syscall</span><span class="op" id="3289302">.</span><span class="ident" id="3289303">IPV6_MULTICAST_LOOP</span><span class="op" id="3289322">,</span>&nbsp;<span class="ident" id="3289324">boolint</span><span class="op" id="3289331">(</span><span class="ident" id="3289332">v</span><span class="op" id="3289333">)</span><span class="op" id="3289334">)</span><span class="op" id="3289335">)</span><br>
<span class="lineno"></span><span class="op" id="3289337">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="3289340">func</span>&nbsp;<span class="ident" id="3289345">joinIPv6Group</span><span class="op" id="3289358">(</span><span class="ident" id="3289359">fd</span>&nbsp;<span class="op" id="3289362">*</span><span class="ident" id="3289363">netFD</span><span class="op" id="3289368">,</span>&nbsp;<span class="ident" id="3289370">ifi</span>&nbsp;<span class="op" id="3289374">*</span><span class="ident" id="3289375">Interface</span><span class="op" id="3289384">,</span>&nbsp;<span class="ident" id="3289386">ip</span>&nbsp;<span class="ident" id="3289389">IP</span><span class="op" id="3289391">)</span>&nbsp;<span class="builtintype" id="3289393">error</span>&nbsp;<span class="op" id="3289399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3289402">mreq</span>&nbsp;<span class="op" id="3289407">:=</span>&nbsp;<span class="op" id="3289410">&amp;</span><span class="ident" id="3289411">syscall</span><span class="op" id="3289418">.</span><span class="ident" id="3289419">IPv6Mreq</span><span class="op" id="3289427">{</span><span class="op" id="3289428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3289431">copy</span><span class="op" id="3289435">(</span><span class="ident" id="3289436">mreq</span><span class="op" id="3289440">.</span><span class="ident" id="3289441">Multiaddr</span><span class="op" id="3289450">[</span><span class="op" id="3289451">:</span><span class="op" id="3289452">]</span><span class="op" id="3289453">,</span>&nbsp;<span class="ident" id="3289455">ip</span><span class="op" id="3289457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3289460">if</span>&nbsp;<span class="ident" id="3289463">ifi</span>&nbsp;<span class="op" id="3289467">!=</span>&nbsp;<span class="ident" id="3289470">nil</span>&nbsp;<span class="op" id="3289474">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3289478">mreq</span><span class="op" id="3289482">.</span><span class="ident" id="3289483">Interface</span>&nbsp;<span class="op" id="3289493">=</span>&nbsp;<span class="builtintype" id="3289495">uint32</span><span class="op" id="3289501">(</span><span class="ident" id="3289502">ifi</span><span class="op" id="3289505">.</span><span class="ident" id="3289506">Index</span><span class="op" id="3289511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3289514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3289517">if</span>&nbsp;<span class="ident" id="3289520">err</span>&nbsp;<span class="op" id="3289524">:=</span>&nbsp;<span class="ident" id="3289527">fd</span><span class="op" id="3289529">.</span><span class="ident" id="3289530">incref</span><span class="op" id="3289536">(</span><span class="op" id="3289537">)</span><span class="op" id="3289538">;</span>&nbsp;<span class="ident" id="3289540">err</span>&nbsp;<span class="op" id="3289544">!=</span>&nbsp;<span class="ident" id="3289547">nil</span>&nbsp;<span class="op" id="3289551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3289555">return</span>&nbsp;<span class="ident" id="3289562">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3289567">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3289570">defer</span>&nbsp;<span class="ident" id="3289576">fd</span><span class="op" id="3289578">.</span><span class="ident" id="3289579">decref</span><span class="op" id="3289585">(</span><span class="op" id="3289586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3289589">return</span>&nbsp;<span class="ident" id="3289596">os</span><span class="op" id="3289598">.</span><span class="ident" id="3289599">NewSyscallError</span><span class="op" id="3289614">(</span><span class="string" id="3289615">&#34;setsockopt&#34;</span><span class="op" id="3289627">,</span>&nbsp;<span class="ident" id="3289629">syscall</span><span class="op" id="3289636">.</span><span class="ident" id="3289637">SetsockoptIPv6Mreq</span><span class="op" id="3289655">(</span><span class="ident" id="3289656">fd</span><span class="op" id="3289658">.</span><span class="ident" id="3289659">sysfd</span><span class="op" id="3289664">,</span>&nbsp;<span class="ident" id="3289666">syscall</span><span class="op" id="3289673">.</span><span class="ident" id="3289674">IPPROTO_IPV6</span><span class="op" id="3289686">,</span>&nbsp;<span class="ident" id="3289688">syscall</span><span class="op" id="3289695">.</span><span class="ident" id="3289696">IPV6_JOIN_GROUP</span><span class="op" id="3289711">,</span>&nbsp;<span class="ident" id="3289713">mreq</span><span class="op" id="3289717">)</span><span class="op" id="3289718">)</span><br>
<span class="lineno"></span><span class="op" id="3289720">}</span>
</div>
</body>
</html>
