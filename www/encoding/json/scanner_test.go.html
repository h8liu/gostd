<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8642132">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8642188">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8642242">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8642293">package</span>&nbsp;<span class="ident" id="8642301">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8642307">import</span>&nbsp;<span class="op" id="8642314">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8642317">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8642326">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8642334">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8642347">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8642358">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8642368">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="8642371">//&nbsp;Tests&nbsp;of&nbsp;simple&nbsp;examples.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8642401">type</span>&nbsp;<span class="ident" id="8642406">example</span>&nbsp;<span class="keyword" id="8642414">struct</span>&nbsp;<span class="op" id="8642421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8642424">compact</span>&nbsp;<span class="builtintype" id="8642432">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8642440">indent</span>&nbsp;&nbsp;<span class="builtintype" id="8642448">string</span><br>
<span class="lineno">20</span><span class="op" id="8642455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8642458">var</span>&nbsp;<span class="ident" id="8642462">examples</span>&nbsp;<span class="op" id="8642471">=</span>&nbsp;<span class="op" id="8642473">[</span><span class="op" id="8642474">]</span><span class="ident" id="8642475">example</span><span class="op" id="8642482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8642485">{</span><span class="string" id="8642486">`1`</span><span class="op" id="8642489">,</span>&nbsp;<span class="string" id="8642491">`1`</span><span class="op" id="8642494">}</span><span class="op" id="8642495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8642498">{</span><span class="string" id="8642499">`{}`</span><span class="op" id="8642503">,</span>&nbsp;<span class="string" id="8642505">`{}`</span><span class="op" id="8642509">}</span><span class="op" id="8642510">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8642513">{</span><span class="string" id="8642514">`[]`</span><span class="op" id="8642518">,</span>&nbsp;<span class="string" id="8642520">`[]`</span><span class="op" id="8642524">}</span><span class="op" id="8642525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8642528">{</span><span class="string" id="8642529">`{&#34;&#34;:2}`</span><span class="op" id="8642537">,</span>&nbsp;<span class="string" id="8642539">&#34;{\n\t\&#34;\&#34;:&nbsp;2\n}&#34;</span><span class="op" id="8642556">}</span><span class="op" id="8642557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8642560">{</span><span class="string" id="8642561">`[3]`</span><span class="op" id="8642566">,</span>&nbsp;<span class="string" id="8642568">&#34;[\n\t3\n]&#34;</span><span class="op" id="8642579">}</span><span class="op" id="8642580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8642583">{</span><span class="string" id="8642584">`[1,2,3]`</span><span class="op" id="8642593">,</span>&nbsp;<span class="string" id="8642595">&#34;[\n\t1,\n\t2,\n\t3\n]&#34;</span><span class="op" id="8642618">}</span><span class="op" id="8642619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8642622">{</span><span class="string" id="8642623">`{&#34;x&#34;:1}`</span><span class="op" id="8642632">,</span>&nbsp;<span class="string" id="8642634">&#34;{\n\t\&#34;x\&#34;:&nbsp;1\n}&#34;</span><span class="op" id="8642652">}</span><span class="op" id="8642653">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8642656">{</span><span class="ident" id="8642657">ex1</span><span class="op" id="8642660">,</span>&nbsp;<span class="ident" id="8642662">ex1i</span><span class="op" id="8642666">}</span><span class="op" id="8642667">,</span><br>
<span class="lineno"></span><span class="op" id="8642669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8642672">var</span>&nbsp;<span class="ident" id="8642676">ex1</span>&nbsp;<span class="op" id="8642680">=</span>&nbsp;<span class="string" id="8642682">`[true,false,null,&#34;x&#34;,1,1.5,0,-5e+2]`</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="8642721">var</span>&nbsp;<span class="ident" id="8642725">ex1i</span>&nbsp;<span class="op" id="8642730">=</span>&nbsp;<span class="string" id="8642732">`[<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsptrue,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfalse,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspnull,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;x&#34;,<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp1,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp1.5,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp-5e+2<br>
<span class="lineno"></span>]`</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="8642788">func</span>&nbsp;<span class="ident" id="8642793">TestCompact</span><span class="op" id="8642804">(</span><span class="ident" id="8642805">t</span>&nbsp;<span class="op" id="8642807">*</span><span class="ident" id="8642808">testing</span><span class="op" id="8642815">.</span><span class="ident" id="8642816">T</span><span class="op" id="8642817">)</span>&nbsp;<span class="op" id="8642819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8642822">var</span>&nbsp;<span class="ident" id="8642826">buf</span>&nbsp;<span class="ident" id="8642830">bytes</span><span class="op" id="8642835">.</span><span class="ident" id="8642836">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8642844">for</span>&nbsp;<span class="ident" id="8642848">_</span><span class="op" id="8642849">,</span>&nbsp;<span class="ident" id="8642851">tt</span>&nbsp;<span class="op" id="8642854">:=</span>&nbsp;<span class="keyword" id="8642857">range</span>&nbsp;<span class="ident" id="8642863">examples</span>&nbsp;<span class="op" id="8642872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8642876">buf</span><span class="op" id="8642879">.</span><span class="ident" id="8642880">Reset</span><span class="op" id="8642885">(</span><span class="op" id="8642886">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8642890">if</span>&nbsp;<span class="ident" id="8642893">err</span>&nbsp;<span class="op" id="8642897">:=</span>&nbsp;<span class="ident" id="8642900">Compact</span><span class="op" id="8642907">(</span><span class="op" id="8642908">&amp;</span><span class="ident" id="8642909">buf</span><span class="op" id="8642912">,</span>&nbsp;<span class="op" id="8642914">[</span><span class="op" id="8642915">]</span><span class="builtintype" id="8642916">byte</span><span class="op" id="8642920">(</span><span class="ident" id="8642921">tt</span><span class="op" id="8642923">.</span><span class="ident" id="8642924">compact</span><span class="op" id="8642931">)</span><span class="op" id="8642932">)</span><span class="op" id="8642933">;</span>&nbsp;<span class="ident" id="8642935">err</span>&nbsp;<span class="op" id="8642939">!=</span>&nbsp;<span class="ident" id="8642942">nil</span>&nbsp;<span class="op" id="8642946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8642951">t</span><span class="op" id="8642952">.</span><span class="ident" id="8642953">Errorf</span><span class="op" id="8642959">(</span><span class="string" id="8642960">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="8642978">,</span>&nbsp;<span class="ident" id="8642980">tt</span><span class="op" id="8642982">.</span><span class="ident" id="8642983">compact</span><span class="op" id="8642990">,</span>&nbsp;<span class="ident" id="8642992">err</span><span class="op" id="8642995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8642999">}</span>&nbsp;<span class="keyword" id="8643001">else</span>&nbsp;<span class="keyword" id="8643006">if</span>&nbsp;<span class="ident" id="8643009">s</span>&nbsp;<span class="op" id="8643011">:=</span>&nbsp;<span class="ident" id="8643014">buf</span><span class="op" id="8643017">.</span><span class="ident" id="8643018">String</span><span class="op" id="8643024">(</span><span class="op" id="8643025">)</span><span class="op" id="8643026">;</span>&nbsp;<span class="ident" id="8643028">s</span>&nbsp;<span class="op" id="8643030">!=</span>&nbsp;<span class="ident" id="8643033">tt</span><span class="op" id="8643035">.</span><span class="ident" id="8643036">compact</span>&nbsp;<span class="op" id="8643044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8643049">t</span><span class="op" id="8643050">.</span><span class="ident" id="8643051">Errorf</span><span class="op" id="8643057">(</span><span class="string" id="8643058">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="8643093">,</span>&nbsp;<span class="ident" id="8643095">tt</span><span class="op" id="8643097">.</span><span class="ident" id="8643098">compact</span><span class="op" id="8643105">,</span>&nbsp;<span class="ident" id="8643107">s</span><span class="op" id="8643108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8643112">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8643117">buf</span><span class="op" id="8643120">.</span><span class="ident" id="8643121">Reset</span><span class="op" id="8643126">(</span><span class="op" id="8643127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8643131">if</span>&nbsp;<span class="ident" id="8643134">err</span>&nbsp;<span class="op" id="8643138">:=</span>&nbsp;<span class="ident" id="8643141">Compact</span><span class="op" id="8643148">(</span><span class="op" id="8643149">&amp;</span><span class="ident" id="8643150">buf</span><span class="op" id="8643153">,</span>&nbsp;<span class="op" id="8643155">[</span><span class="op" id="8643156">]</span><span class="builtintype" id="8643157">byte</span><span class="op" id="8643161">(</span><span class="ident" id="8643162">tt</span><span class="op" id="8643164">.</span><span class="ident" id="8643165">indent</span><span class="op" id="8643171">)</span><span class="op" id="8643172">)</span><span class="op" id="8643173">;</span>&nbsp;<span class="ident" id="8643175">err</span>&nbsp;<span class="op" id="8643179">!=</span>&nbsp;<span class="ident" id="8643182">nil</span>&nbsp;<span class="op" id="8643186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8643191">t</span><span class="op" id="8643192">.</span><span class="ident" id="8643193">Errorf</span><span class="op" id="8643199">(</span><span class="string" id="8643200">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="8643218">,</span>&nbsp;<span class="ident" id="8643220">tt</span><span class="op" id="8643222">.</span><span class="ident" id="8643223">indent</span><span class="op" id="8643229">,</span>&nbsp;<span class="ident" id="8643231">err</span><span class="op" id="8643234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8643239">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8643250">}</span>&nbsp;<span class="keyword" id="8643252">else</span>&nbsp;<span class="keyword" id="8643257">if</span>&nbsp;<span class="ident" id="8643260">s</span>&nbsp;<span class="op" id="8643262">:=</span>&nbsp;<span class="ident" id="8643265">buf</span><span class="op" id="8643268">.</span><span class="ident" id="8643269">String</span><span class="op" id="8643275">(</span><span class="op" id="8643276">)</span><span class="op" id="8643277">;</span>&nbsp;<span class="ident" id="8643279">s</span>&nbsp;<span class="op" id="8643281">!=</span>&nbsp;<span class="ident" id="8643284">tt</span><span class="op" id="8643286">.</span><span class="ident" id="8643287">compact</span>&nbsp;<span class="op" id="8643295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8643300">t</span><span class="op" id="8643301">.</span><span class="ident" id="8643302">Errorf</span><span class="op" id="8643308">(</span><span class="string" id="8643309">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="8643339">,</span>&nbsp;<span class="ident" id="8643341">tt</span><span class="op" id="8643343">.</span><span class="ident" id="8643344">indent</span><span class="op" id="8643350">,</span>&nbsp;<span class="ident" id="8643352">s</span><span class="op" id="8643353">,</span>&nbsp;<span class="ident" id="8643355">tt</span><span class="op" id="8643357">.</span><span class="ident" id="8643358">compact</span><span class="op" id="8643365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8643369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8643372">}</span><br>
<span class="lineno"></span><span class="op" id="8643374">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="8643377">func</span>&nbsp;<span class="ident" id="8643382">TestCompactSeparators</span><span class="op" id="8643403">(</span><span class="ident" id="8643404">t</span>&nbsp;<span class="op" id="8643406">*</span><span class="ident" id="8643407">testing</span><span class="op" id="8643414">.</span><span class="ident" id="8643415">T</span><span class="op" id="8643416">)</span>&nbsp;<span class="op" id="8643418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8643421">//&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;should&nbsp;be&nbsp;escaped&nbsp;inside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8643477">//&nbsp;They&nbsp;should&nbsp;not&nbsp;appear&nbsp;outside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8643521">tests</span>&nbsp;<span class="op" id="8643527">:=</span>&nbsp;<span class="op" id="8643530">[</span><span class="op" id="8643531">]</span><span class="keyword" id="8643532">struct</span>&nbsp;<span class="op" id="8643539">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8643543">in</span><span class="op" id="8643545">,</span>&nbsp;<span class="ident" id="8643547">compact</span>&nbsp;<span class="builtintype" id="8643555">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8643563">}</span><span class="op" id="8643564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8643568">{</span><span class="string" id="8643569">&#34;{\&#34;\u2028\&#34;:&nbsp;1}&#34;</span><span class="op" id="8643586">,</span>&nbsp;<span class="string" id="8643588">`{&#34;\u2028&#34;:1}`</span><span class="op" id="8643602">}</span><span class="op" id="8643603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8643607">{</span><span class="string" id="8643608">&#34;{\&#34;\u2029\&#34;&nbsp;:2}&#34;</span><span class="op" id="8643625">,</span>&nbsp;<span class="string" id="8643627">`{&#34;\u2029&#34;:2}`</span><span class="op" id="8643641">}</span><span class="op" id="8643642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8643645">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8643648">for</span>&nbsp;<span class="ident" id="8643652">_</span><span class="op" id="8643653">,</span>&nbsp;<span class="ident" id="8643655">tt</span>&nbsp;<span class="op" id="8643658">:=</span>&nbsp;<span class="keyword" id="8643661">range</span>&nbsp;<span class="ident" id="8643667">tests</span>&nbsp;<span class="op" id="8643673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8643677">var</span>&nbsp;<span class="ident" id="8643681">buf</span>&nbsp;<span class="ident" id="8643685">bytes</span><span class="op" id="8643690">.</span><span class="ident" id="8643691">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8643700">if</span>&nbsp;<span class="ident" id="8643703">err</span>&nbsp;<span class="op" id="8643707">:=</span>&nbsp;<span class="ident" id="8643710">Compact</span><span class="op" id="8643717">(</span><span class="op" id="8643718">&amp;</span><span class="ident" id="8643719">buf</span><span class="op" id="8643722">,</span>&nbsp;<span class="op" id="8643724">[</span><span class="op" id="8643725">]</span><span class="builtintype" id="8643726">byte</span><span class="op" id="8643730">(</span><span class="ident" id="8643731">tt</span><span class="op" id="8643733">.</span><span class="ident" id="8643734">in</span><span class="op" id="8643736">)</span><span class="op" id="8643737">)</span><span class="op" id="8643738">;</span>&nbsp;<span class="ident" id="8643740">err</span>&nbsp;<span class="op" id="8643744">!=</span>&nbsp;<span class="ident" id="8643747">nil</span>&nbsp;<span class="op" id="8643751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8643756">t</span><span class="op" id="8643757">.</span><span class="ident" id="8643758">Errorf</span><span class="op" id="8643764">(</span><span class="string" id="8643765">&#34;Compact(%q):&nbsp;%v&#34;</span><span class="op" id="8643782">,</span>&nbsp;<span class="ident" id="8643784">tt</span><span class="op" id="8643786">.</span><span class="ident" id="8643787">in</span><span class="op" id="8643789">,</span>&nbsp;<span class="ident" id="8643791">err</span><span class="op" id="8643794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8643798">}</span>&nbsp;<span class="keyword" id="8643800">else</span>&nbsp;<span class="keyword" id="8643805">if</span>&nbsp;<span class="ident" id="8643808">s</span>&nbsp;<span class="op" id="8643810">:=</span>&nbsp;<span class="ident" id="8643813">buf</span><span class="op" id="8643816">.</span><span class="ident" id="8643817">String</span><span class="op" id="8643823">(</span><span class="op" id="8643824">)</span><span class="op" id="8643825">;</span>&nbsp;<span class="ident" id="8643827">s</span>&nbsp;<span class="op" id="8643829">!=</span>&nbsp;<span class="ident" id="8643832">tt</span><span class="op" id="8643834">.</span><span class="ident" id="8643835">compact</span>&nbsp;<span class="op" id="8643843">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8643848">t</span><span class="op" id="8643849">.</span><span class="ident" id="8643850">Errorf</span><span class="op" id="8643856">(</span><span class="string" id="8643857">&#34;Compact(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8643884">,</span>&nbsp;<span class="ident" id="8643886">tt</span><span class="op" id="8643888">.</span><span class="ident" id="8643889">in</span><span class="op" id="8643891">,</span>&nbsp;<span class="ident" id="8643893">s</span><span class="op" id="8643894">,</span>&nbsp;<span class="ident" id="8643896">tt</span><span class="op" id="8643898">.</span><span class="ident" id="8643899">compact</span><span class="op" id="8643906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8643910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8643913">}</span><br>
<span class="lineno"></span><span class="op" id="8643915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="8643918">func</span>&nbsp;<span class="ident" id="8643923">TestIndent</span><span class="op" id="8643933">(</span><span class="ident" id="8643934">t</span>&nbsp;<span class="op" id="8643936">*</span><span class="ident" id="8643937">testing</span><span class="op" id="8643944">.</span><span class="ident" id="8643945">T</span><span class="op" id="8643946">)</span>&nbsp;<span class="op" id="8643948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8643951">var</span>&nbsp;<span class="ident" id="8643955">buf</span>&nbsp;<span class="ident" id="8643959">bytes</span><span class="op" id="8643964">.</span><span class="ident" id="8643965">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8643973">for</span>&nbsp;<span class="ident" id="8643977">_</span><span class="op" id="8643978">,</span>&nbsp;<span class="ident" id="8643980">tt</span>&nbsp;<span class="op" id="8643983">:=</span>&nbsp;<span class="keyword" id="8643986">range</span>&nbsp;<span class="ident" id="8643992">examples</span>&nbsp;<span class="op" id="8644001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8644005">buf</span><span class="op" id="8644008">.</span><span class="ident" id="8644009">Reset</span><span class="op" id="8644014">(</span><span class="op" id="8644015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8644019">if</span>&nbsp;<span class="ident" id="8644022">err</span>&nbsp;<span class="op" id="8644026">:=</span>&nbsp;<span class="ident" id="8644029">Indent</span><span class="op" id="8644035">(</span><span class="op" id="8644036">&amp;</span><span class="ident" id="8644037">buf</span><span class="op" id="8644040">,</span>&nbsp;<span class="op" id="8644042">[</span><span class="op" id="8644043">]</span><span class="builtintype" id="8644044">byte</span><span class="op" id="8644048">(</span><span class="ident" id="8644049">tt</span><span class="op" id="8644051">.</span><span class="ident" id="8644052">indent</span><span class="op" id="8644058">)</span><span class="op" id="8644059">,</span>&nbsp;<span class="string" id="8644061">&#34;&#34;</span><span class="op" id="8644063">,</span>&nbsp;<span class="string" id="8644065">&#34;\t&#34;</span><span class="op" id="8644069">)</span><span class="op" id="8644070">;</span>&nbsp;<span class="ident" id="8644072">err</span>&nbsp;<span class="op" id="8644076">!=</span>&nbsp;<span class="ident" id="8644079">nil</span>&nbsp;<span class="op" id="8644083">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8644088">t</span><span class="op" id="8644089">.</span><span class="ident" id="8644090">Errorf</span><span class="op" id="8644096">(</span><span class="string" id="8644097">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="8644114">,</span>&nbsp;<span class="ident" id="8644116">tt</span><span class="op" id="8644118">.</span><span class="ident" id="8644119">indent</span><span class="op" id="8644125">,</span>&nbsp;<span class="ident" id="8644127">err</span><span class="op" id="8644130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8644134">}</span>&nbsp;<span class="keyword" id="8644136">else</span>&nbsp;<span class="keyword" id="8644141">if</span>&nbsp;<span class="ident" id="8644144">s</span>&nbsp;<span class="op" id="8644146">:=</span>&nbsp;<span class="ident" id="8644149">buf</span><span class="op" id="8644152">.</span><span class="ident" id="8644153">String</span><span class="op" id="8644159">(</span><span class="op" id="8644160">)</span><span class="op" id="8644161">;</span>&nbsp;<span class="ident" id="8644163">s</span>&nbsp;<span class="op" id="8644165">!=</span>&nbsp;<span class="ident" id="8644168">tt</span><span class="op" id="8644170">.</span><span class="ident" id="8644171">indent</span>&nbsp;<span class="op" id="8644178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8644183">t</span><span class="op" id="8644184">.</span><span class="ident" id="8644185">Errorf</span><span class="op" id="8644191">(</span><span class="string" id="8644192">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="8644226">,</span>&nbsp;<span class="ident" id="8644228">tt</span><span class="op" id="8644230">.</span><span class="ident" id="8644231">indent</span><span class="op" id="8644237">,</span>&nbsp;<span class="ident" id="8644239">s</span><span class="op" id="8644240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8644244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8644249">buf</span><span class="op" id="8644252">.</span><span class="ident" id="8644253">Reset</span><span class="op" id="8644258">(</span><span class="op" id="8644259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8644263">if</span>&nbsp;<span class="ident" id="8644266">err</span>&nbsp;<span class="op" id="8644270">:=</span>&nbsp;<span class="ident" id="8644273">Indent</span><span class="op" id="8644279">(</span><span class="op" id="8644280">&amp;</span><span class="ident" id="8644281">buf</span><span class="op" id="8644284">,</span>&nbsp;<span class="op" id="8644286">[</span><span class="op" id="8644287">]</span><span class="builtintype" id="8644288">byte</span><span class="op" id="8644292">(</span><span class="ident" id="8644293">tt</span><span class="op" id="8644295">.</span><span class="ident" id="8644296">compact</span><span class="op" id="8644303">)</span><span class="op" id="8644304">,</span>&nbsp;<span class="string" id="8644306">&#34;&#34;</span><span class="op" id="8644308">,</span>&nbsp;<span class="string" id="8644310">&#34;\t&#34;</span><span class="op" id="8644314">)</span><span class="op" id="8644315">;</span>&nbsp;<span class="ident" id="8644317">err</span>&nbsp;<span class="op" id="8644321">!=</span>&nbsp;<span class="ident" id="8644324">nil</span>&nbsp;<span class="op" id="8644328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8644333">t</span><span class="op" id="8644334">.</span><span class="ident" id="8644335">Errorf</span><span class="op" id="8644341">(</span><span class="string" id="8644342">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="8644359">,</span>&nbsp;<span class="ident" id="8644361">tt</span><span class="op" id="8644363">.</span><span class="ident" id="8644364">compact</span><span class="op" id="8644371">,</span>&nbsp;<span class="ident" id="8644373">err</span><span class="op" id="8644376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8644381">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8644392">}</span>&nbsp;<span class="keyword" id="8644394">else</span>&nbsp;<span class="keyword" id="8644399">if</span>&nbsp;<span class="ident" id="8644402">s</span>&nbsp;<span class="op" id="8644404">:=</span>&nbsp;<span class="ident" id="8644407">buf</span><span class="op" id="8644410">.</span><span class="ident" id="8644411">String</span><span class="op" id="8644417">(</span><span class="op" id="8644418">)</span><span class="op" id="8644419">;</span>&nbsp;<span class="ident" id="8644421">s</span>&nbsp;<span class="op" id="8644423">!=</span>&nbsp;<span class="ident" id="8644426">tt</span><span class="op" id="8644428">.</span><span class="ident" id="8644429">indent</span>&nbsp;<span class="op" id="8644436">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8644441">t</span><span class="op" id="8644442">.</span><span class="ident" id="8644443">Errorf</span><span class="op" id="8644449">(</span><span class="string" id="8644450">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="8644479">,</span>&nbsp;<span class="ident" id="8644481">tt</span><span class="op" id="8644483">.</span><span class="ident" id="8644484">compact</span><span class="op" id="8644491">,</span>&nbsp;<span class="ident" id="8644493">s</span><span class="op" id="8644494">,</span>&nbsp;<span class="ident" id="8644496">tt</span><span class="op" id="8644498">.</span><span class="ident" id="8644499">indent</span><span class="op" id="8644505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8644509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8644512">}</span><br>
<span class="lineno"></span><span class="op" id="8644514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="8644517">//&nbsp;Tests&nbsp;of&nbsp;a&nbsp;large&nbsp;random&nbsp;structure.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8644556">func</span>&nbsp;<span class="ident" id="8644561">TestCompactBig</span><span class="op" id="8644575">(</span><span class="ident" id="8644576">t</span>&nbsp;<span class="op" id="8644578">*</span><span class="ident" id="8644579">testing</span><span class="op" id="8644586">.</span><span class="ident" id="8644587">T</span><span class="op" id="8644588">)</span>&nbsp;<span class="op" id="8644590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8644593">initBig</span><span class="op" id="8644600">(</span><span class="op" id="8644601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8644604">var</span>&nbsp;<span class="ident" id="8644608">buf</span>&nbsp;<span class="ident" id="8644612">bytes</span><span class="op" id="8644617">.</span><span class="ident" id="8644618">Buffer</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8644626">if</span>&nbsp;<span class="ident" id="8644629">err</span>&nbsp;<span class="op" id="8644633">:=</span>&nbsp;<span class="ident" id="8644636">Compact</span><span class="op" id="8644643">(</span><span class="op" id="8644644">&amp;</span><span class="ident" id="8644645">buf</span><span class="op" id="8644648">,</span>&nbsp;<span class="ident" id="8644650">jsonBig</span><span class="op" id="8644657">)</span><span class="op" id="8644658">;</span>&nbsp;<span class="ident" id="8644660">err</span>&nbsp;<span class="op" id="8644664">!=</span>&nbsp;<span class="ident" id="8644667">nil</span>&nbsp;<span class="op" id="8644671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8644675">t</span><span class="op" id="8644676">.</span><span class="ident" id="8644677">Fatalf</span><span class="op" id="8644683">(</span><span class="string" id="8644684">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="8644697">,</span>&nbsp;<span class="ident" id="8644699">err</span><span class="op" id="8644702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8644705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8644708">b</span>&nbsp;<span class="op" id="8644710">:=</span>&nbsp;<span class="ident" id="8644713">buf</span><span class="op" id="8644716">.</span><span class="ident" id="8644717">Bytes</span><span class="op" id="8644722">(</span><span class="op" id="8644723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8644726">if</span>&nbsp;<span class="op" id="8644729">!</span><span class="ident" id="8644730">bytes</span><span class="op" id="8644735">.</span><span class="ident" id="8644736">Equal</span><span class="op" id="8644741">(</span><span class="ident" id="8644742">b</span><span class="op" id="8644743">,</span>&nbsp;<span class="ident" id="8644745">jsonBig</span><span class="op" id="8644752">)</span>&nbsp;<span class="op" id="8644754">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8644758">t</span><span class="op" id="8644759">.</span><span class="ident" id="8644760">Error</span><span class="op" id="8644765">(</span><span class="string" id="8644766">&#34;Compact(jsonBig)&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="8644795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8644799">diff</span><span class="op" id="8644803">(</span><span class="ident" id="8644804">t</span><span class="op" id="8644805">,</span>&nbsp;<span class="ident" id="8644807">b</span><span class="op" id="8644808">,</span>&nbsp;<span class="ident" id="8644810">jsonBig</span><span class="op" id="8644817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8644821">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8644829">}</span><br>
<span class="lineno"></span><span class="op" id="8644831">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="8644834">func</span>&nbsp;<span class="ident" id="8644839">TestIndentBig</span><span class="op" id="8644852">(</span><span class="ident" id="8644853">t</span>&nbsp;<span class="op" id="8644855">*</span><span class="ident" id="8644856">testing</span><span class="op" id="8644863">.</span><span class="ident" id="8644864">T</span><span class="op" id="8644865">)</span>&nbsp;<span class="op" id="8644867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8644870">initBig</span><span class="op" id="8644877">(</span><span class="op" id="8644878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8644881">var</span>&nbsp;<span class="ident" id="8644885">buf</span>&nbsp;<span class="ident" id="8644889">bytes</span><span class="op" id="8644894">.</span><span class="ident" id="8644895">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8644903">if</span>&nbsp;<span class="ident" id="8644906">err</span>&nbsp;<span class="op" id="8644910">:=</span>&nbsp;<span class="ident" id="8644913">Indent</span><span class="op" id="8644919">(</span><span class="op" id="8644920">&amp;</span><span class="ident" id="8644921">buf</span><span class="op" id="8644924">,</span>&nbsp;<span class="ident" id="8644926">jsonBig</span><span class="op" id="8644933">,</span>&nbsp;<span class="string" id="8644935">&#34;&#34;</span><span class="op" id="8644937">,</span>&nbsp;<span class="string" id="8644939">&#34;\t&#34;</span><span class="op" id="8644943">)</span><span class="op" id="8644944">;</span>&nbsp;<span class="ident" id="8644946">err</span>&nbsp;<span class="op" id="8644950">!=</span>&nbsp;<span class="ident" id="8644953">nil</span>&nbsp;<span class="op" id="8644957">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8644961">t</span><span class="op" id="8644962">.</span><span class="ident" id="8644963">Fatalf</span><span class="op" id="8644969">(</span><span class="string" id="8644970">&#34;Indent1:&nbsp;%v&#34;</span><span class="op" id="8644983">,</span>&nbsp;<span class="ident" id="8644985">err</span><span class="op" id="8644988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8644991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8644994">b</span>&nbsp;<span class="op" id="8644996">:=</span>&nbsp;<span class="ident" id="8644999">buf</span><span class="op" id="8645002">.</span><span class="ident" id="8645003">Bytes</span><span class="op" id="8645008">(</span><span class="op" id="8645009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8645012">if</span>&nbsp;<span class="builtinfunc" id="8645015">len</span><span class="op" id="8645018">(</span><span class="ident" id="8645019">b</span><span class="op" id="8645020">)</span>&nbsp;<span class="op" id="8645022">==</span>&nbsp;<span class="builtinfunc" id="8645025">len</span><span class="op" id="8645028">(</span><span class="ident" id="8645029">jsonBig</span><span class="op" id="8645036">)</span>&nbsp;<span class="op" id="8645038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8645042">//&nbsp;jsonBig&nbsp;is&nbsp;compact&nbsp;(no&nbsp;unnecessary&nbsp;spaces);</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8645091">//&nbsp;indenting&nbsp;should&nbsp;make&nbsp;it&nbsp;bigger</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8645128">t</span><span class="op" id="8645129">.</span><span class="ident" id="8645130">Fatalf</span><span class="op" id="8645136">(</span><span class="string" id="8645137">&#34;Indent(jsonBig)&nbsp;did&nbsp;not&nbsp;get&nbsp;bigger&#34;</span><span class="op" id="8645173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8645176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8645180">//&nbsp;should&nbsp;be&nbsp;idempotent</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8645205">var</span>&nbsp;<span class="ident" id="8645209">buf1</span>&nbsp;<span class="ident" id="8645214">bytes</span><span class="op" id="8645219">.</span><span class="ident" id="8645220">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8645228">if</span>&nbsp;<span class="ident" id="8645231">err</span>&nbsp;<span class="op" id="8645235">:=</span>&nbsp;<span class="ident" id="8645238">Indent</span><span class="op" id="8645244">(</span><span class="op" id="8645245">&amp;</span><span class="ident" id="8645246">buf1</span><span class="op" id="8645250">,</span>&nbsp;<span class="ident" id="8645252">b</span><span class="op" id="8645253">,</span>&nbsp;<span class="string" id="8645255">&#34;&#34;</span><span class="op" id="8645257">,</span>&nbsp;<span class="string" id="8645259">&#34;\t&#34;</span><span class="op" id="8645263">)</span><span class="op" id="8645264">;</span>&nbsp;<span class="ident" id="8645266">err</span>&nbsp;<span class="op" id="8645270">!=</span>&nbsp;<span class="ident" id="8645273">nil</span>&nbsp;<span class="op" id="8645277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8645281">t</span><span class="op" id="8645282">.</span><span class="ident" id="8645283">Fatalf</span><span class="op" id="8645289">(</span><span class="string" id="8645290">&#34;Indent2:&nbsp;%v&#34;</span><span class="op" id="8645303">,</span>&nbsp;<span class="ident" id="8645305">err</span><span class="op" id="8645308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8645311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8645314">b1</span>&nbsp;<span class="op" id="8645317">:=</span>&nbsp;<span class="ident" id="8645320">buf1</span><span class="op" id="8645324">.</span><span class="ident" id="8645325">Bytes</span><span class="op" id="8645330">(</span><span class="op" id="8645331">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8645334">if</span>&nbsp;<span class="op" id="8645337">!</span><span class="ident" id="8645338">bytes</span><span class="op" id="8645343">.</span><span class="ident" id="8645344">Equal</span><span class="op" id="8645349">(</span><span class="ident" id="8645350">b1</span><span class="op" id="8645352">,</span>&nbsp;<span class="ident" id="8645354">b</span><span class="op" id="8645355">)</span>&nbsp;<span class="op" id="8645357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8645361">t</span><span class="op" id="8645362">.</span><span class="ident" id="8645363">Error</span><span class="op" id="8645368">(</span><span class="string" id="8645369">&#34;Indent(Indent(jsonBig))&nbsp;!=&nbsp;Indent(jsonBig)&#34;</span><span class="op" id="8645413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8645417">diff</span><span class="op" id="8645421">(</span><span class="ident" id="8645422">t</span><span class="op" id="8645423">,</span>&nbsp;<span class="ident" id="8645425">b1</span><span class="op" id="8645427">,</span>&nbsp;<span class="ident" id="8645429">b</span><span class="op" id="8645430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8645434">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8645442">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8645446">//&nbsp;should&nbsp;get&nbsp;back&nbsp;to&nbsp;original</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8645478">buf1</span><span class="op" id="8645482">.</span><span class="ident" id="8645483">Reset</span><span class="op" id="8645488">(</span><span class="op" id="8645489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8645492">if</span>&nbsp;<span class="ident" id="8645495">err</span>&nbsp;<span class="op" id="8645499">:=</span>&nbsp;<span class="ident" id="8645502">Compact</span><span class="op" id="8645509">(</span><span class="op" id="8645510">&amp;</span><span class="ident" id="8645511">buf1</span><span class="op" id="8645515">,</span>&nbsp;<span class="ident" id="8645517">b</span><span class="op" id="8645518">)</span><span class="op" id="8645519">;</span>&nbsp;<span class="ident" id="8645521">err</span>&nbsp;<span class="op" id="8645525">!=</span>&nbsp;<span class="ident" id="8645528">nil</span>&nbsp;<span class="op" id="8645532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8645536">t</span><span class="op" id="8645537">.</span><span class="ident" id="8645538">Fatalf</span><span class="op" id="8645544">(</span><span class="string" id="8645545">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="8645558">,</span>&nbsp;<span class="ident" id="8645560">err</span><span class="op" id="8645563">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8645566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8645569">b1</span>&nbsp;<span class="op" id="8645572">=</span>&nbsp;<span class="ident" id="8645574">buf1</span><span class="op" id="8645578">.</span><span class="ident" id="8645579">Bytes</span><span class="op" id="8645584">(</span><span class="op" id="8645585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8645588">if</span>&nbsp;<span class="op" id="8645591">!</span><span class="ident" id="8645592">bytes</span><span class="op" id="8645597">.</span><span class="ident" id="8645598">Equal</span><span class="op" id="8645603">(</span><span class="ident" id="8645604">b1</span><span class="op" id="8645606">,</span>&nbsp;<span class="ident" id="8645608">jsonBig</span><span class="op" id="8645615">)</span>&nbsp;<span class="op" id="8645617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8645621">t</span><span class="op" id="8645622">.</span><span class="ident" id="8645623">Error</span><span class="op" id="8645628">(</span><span class="string" id="8645629">&#34;Compact(Indent(jsonBig))&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="8645666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8645670">diff</span><span class="op" id="8645674">(</span><span class="ident" id="8645675">t</span><span class="op" id="8645676">,</span>&nbsp;<span class="ident" id="8645678">b1</span><span class="op" id="8645680">,</span>&nbsp;<span class="ident" id="8645682">jsonBig</span><span class="op" id="8645689">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8645693">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8645701">}</span><br>
<span class="lineno"></span><span class="op" id="8645703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8645706">type</span>&nbsp;<span class="ident" id="8645711">indentErrorTest</span>&nbsp;<span class="keyword" id="8645727">struct</span>&nbsp;<span class="op" id="8645734">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8645737">in</span>&nbsp;&nbsp;<span class="builtintype" id="8645741">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8645749">err</span>&nbsp;<span class="builtintype" id="8645753">error</span><br>
<span class="lineno"></span><span class="op" id="8645759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8645762">var</span>&nbsp;<span class="ident" id="8645766">indentErrorTests</span>&nbsp;<span class="op" id="8645783">=</span>&nbsp;<span class="op" id="8645785">[</span><span class="op" id="8645786">]</span><span class="ident" id="8645787">indentErrorTest</span><span class="op" id="8645802">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8645805">{</span><span class="string" id="8645806">`{&#34;X&#34;:&nbsp;&#34;foo&#34;,&nbsp;&#34;Y&#34;}`</span><span class="op" id="8645825">,</span>&nbsp;<span class="op" id="8645827">&amp;</span><span class="ident" id="8645828">SyntaxError</span><span class="op" id="8645839">{</span><span class="string" id="8645840">&#34;invalid&nbsp;character&nbsp;&#39;}&#39;&nbsp;after&nbsp;object&nbsp;key&#34;</span><span class="op" id="8645880">,</span>&nbsp;<span class="num" id="8645882">17</span><span class="op" id="8645884">}</span><span class="op" id="8645885">}</span><span class="op" id="8645886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8645889">{</span><span class="string" id="8645890">`{&#34;X&#34;:&nbsp;&#34;foo&#34;&nbsp;&#34;Y&#34;:&nbsp;&#34;bar&#34;}`</span><span class="op" id="8645915">,</span>&nbsp;<span class="op" id="8645917">&amp;</span><span class="ident" id="8645918">SyntaxError</span><span class="op" id="8645929">{</span><span class="string" id="8645930">&#34;invalid&nbsp;character&nbsp;&#39;\&#34;&#39;&nbsp;after&nbsp;object&nbsp;key:value&nbsp;pair&#34;</span><span class="op" id="8645982">,</span>&nbsp;<span class="num" id="8645984">13</span><span class="op" id="8645986">}</span><span class="op" id="8645987">}</span><span class="op" id="8645988">,</span><br>
<span class="lineno"></span><span class="op" id="8645990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8645993">func</span>&nbsp;<span class="ident" id="8645998">TestIndentErrors</span><span class="op" id="8646014">(</span><span class="ident" id="8646015">t</span>&nbsp;<span class="op" id="8646017">*</span><span class="ident" id="8646018">testing</span><span class="op" id="8646025">.</span><span class="ident" id="8646026">T</span><span class="op" id="8646027">)</span>&nbsp;<span class="op" id="8646029">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8646032">for</span>&nbsp;<span class="ident" id="8646036">i</span><span class="op" id="8646037">,</span>&nbsp;<span class="ident" id="8646039">tt</span>&nbsp;<span class="op" id="8646042">:=</span>&nbsp;<span class="keyword" id="8646045">range</span>&nbsp;<span class="ident" id="8646051">indentErrorTests</span>&nbsp;<span class="op" id="8646068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8646072">slice</span>&nbsp;<span class="op" id="8646078">:=</span>&nbsp;<span class="builtinfunc" id="8646081">make</span><span class="op" id="8646085">(</span><span class="op" id="8646086">[</span><span class="op" id="8646087">]</span><span class="builtintype" id="8646088">uint8</span><span class="op" id="8646093">,</span>&nbsp;<span class="num" id="8646095">0</span><span class="op" id="8646096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8646100">buf</span>&nbsp;<span class="op" id="8646104">:=</span>&nbsp;<span class="ident" id="8646107">bytes</span><span class="op" id="8646112">.</span><span class="ident" id="8646113">NewBuffer</span><span class="op" id="8646122">(</span><span class="ident" id="8646123">slice</span><span class="op" id="8646128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8646132">if</span>&nbsp;<span class="ident" id="8646135">err</span>&nbsp;<span class="op" id="8646139">:=</span>&nbsp;<span class="ident" id="8646142">Indent</span><span class="op" id="8646148">(</span><span class="ident" id="8646149">buf</span><span class="op" id="8646152">,</span>&nbsp;<span class="op" id="8646154">[</span><span class="op" id="8646155">]</span><span class="builtintype" id="8646156">uint8</span><span class="op" id="8646161">(</span><span class="ident" id="8646162">tt</span><span class="op" id="8646164">.</span><span class="ident" id="8646165">in</span><span class="op" id="8646167">)</span><span class="op" id="8646168">,</span>&nbsp;<span class="string" id="8646170">&#34;&#34;</span><span class="op" id="8646172">,</span>&nbsp;<span class="string" id="8646174">&#34;&#34;</span><span class="op" id="8646176">)</span><span class="op" id="8646177">;</span>&nbsp;<span class="ident" id="8646179">err</span>&nbsp;<span class="op" id="8646183">!=</span>&nbsp;<span class="ident" id="8646186">nil</span>&nbsp;<span class="op" id="8646190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8646195">if</span>&nbsp;<span class="op" id="8646198">!</span><span class="ident" id="8646199">reflect</span><span class="op" id="8646206">.</span><span class="ident" id="8646207">DeepEqual</span><span class="op" id="8646216">(</span><span class="ident" id="8646217">err</span><span class="op" id="8646220">,</span>&nbsp;<span class="ident" id="8646222">tt</span><span class="op" id="8646224">.</span><span class="ident" id="8646225">err</span><span class="op" id="8646228">)</span>&nbsp;<span class="op" id="8646230">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8646236">t</span><span class="op" id="8646237">.</span><span class="ident" id="8646238">Errorf</span><span class="op" id="8646244">(</span><span class="string" id="8646245">&#34;#%d:&nbsp;Indent:&nbsp;%#v&#34;</span><span class="op" id="8646263">,</span>&nbsp;<span class="ident" id="8646265">i</span><span class="op" id="8646266">,</span>&nbsp;<span class="ident" id="8646268">err</span><span class="op" id="8646271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8646277">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8646289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8646293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8646296">}</span><br>
<span class="lineno">180</span><span class="op" id="8646298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8646301">func</span>&nbsp;<span class="ident" id="8646306">TestNextValueBig</span><span class="op" id="8646322">(</span><span class="ident" id="8646323">t</span>&nbsp;<span class="op" id="8646325">*</span><span class="ident" id="8646326">testing</span><span class="op" id="8646333">.</span><span class="ident" id="8646334">T</span><span class="op" id="8646335">)</span>&nbsp;<span class="op" id="8646337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8646340">initBig</span><span class="op" id="8646347">(</span><span class="op" id="8646348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8646351">var</span>&nbsp;<span class="ident" id="8646355">scan</span>&nbsp;<span class="ident" id="8646360">scanner</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8646369">item</span><span class="op" id="8646373">,</span>&nbsp;<span class="ident" id="8646375">rest</span><span class="op" id="8646379">,</span>&nbsp;<span class="ident" id="8646381">err</span>&nbsp;<span class="op" id="8646385">:=</span>&nbsp;<span class="ident" id="8646388">nextValue</span><span class="op" id="8646397">(</span><span class="ident" id="8646398">jsonBig</span><span class="op" id="8646405">,</span>&nbsp;<span class="op" id="8646407">&amp;</span><span class="ident" id="8646408">scan</span><span class="op" id="8646412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8646415">if</span>&nbsp;<span class="ident" id="8646418">err</span>&nbsp;<span class="op" id="8646422">!=</span>&nbsp;<span class="ident" id="8646425">nil</span>&nbsp;<span class="op" id="8646429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8646433">t</span><span class="op" id="8646434">.</span><span class="ident" id="8646435">Fatalf</span><span class="op" id="8646441">(</span><span class="string" id="8646442">&#34;nextValue:&nbsp;%s&#34;</span><span class="op" id="8646457">,</span>&nbsp;<span class="ident" id="8646459">err</span><span class="op" id="8646462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8646465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8646468">if</span>&nbsp;<span class="builtinfunc" id="8646471">len</span><span class="op" id="8646474">(</span><span class="ident" id="8646475">item</span><span class="op" id="8646479">)</span>&nbsp;<span class="op" id="8646481">!=</span>&nbsp;<span class="builtinfunc" id="8646484">len</span><span class="op" id="8646487">(</span><span class="ident" id="8646488">jsonBig</span><span class="op" id="8646495">)</span>&nbsp;<span class="op" id="8646497">||</span>&nbsp;<span class="op" id="8646500">&amp;</span><span class="ident" id="8646501">item</span><span class="op" id="8646505">[</span><span class="num" id="8646506">0</span><span class="op" id="8646507">]</span>&nbsp;<span class="op" id="8646509">!=</span>&nbsp;<span class="op" id="8646512">&amp;</span><span class="ident" id="8646513">jsonBig</span><span class="op" id="8646520">[</span><span class="num" id="8646521">0</span><span class="op" id="8646522">]</span>&nbsp;<span class="op" id="8646524">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8646528">t</span><span class="op" id="8646529">.</span><span class="ident" id="8646530">Errorf</span><span class="op" id="8646536">(</span><span class="string" id="8646537">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="8646558">,</span>&nbsp;<span class="builtinfunc" id="8646560">len</span><span class="op" id="8646563">(</span><span class="ident" id="8646564">item</span><span class="op" id="8646568">)</span><span class="op" id="8646569">,</span>&nbsp;<span class="builtinfunc" id="8646571">len</span><span class="op" id="8646574">(</span><span class="ident" id="8646575">jsonBig</span><span class="op" id="8646582">)</span><span class="op" id="8646583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8646586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8646589">if</span>&nbsp;<span class="builtinfunc" id="8646592">len</span><span class="op" id="8646595">(</span><span class="ident" id="8646596">rest</span><span class="op" id="8646600">)</span>&nbsp;<span class="op" id="8646602">!=</span>&nbsp;<span class="num" id="8646605">0</span>&nbsp;<span class="op" id="8646607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8646611">t</span><span class="op" id="8646612">.</span><span class="ident" id="8646613">Errorf</span><span class="op" id="8646619">(</span><span class="string" id="8646620">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="8646638">,</span>&nbsp;<span class="builtinfunc" id="8646640">len</span><span class="op" id="8646643">(</span><span class="ident" id="8646644">rest</span><span class="op" id="8646648">)</span><span class="op" id="8646649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8646652">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8646656">item</span><span class="op" id="8646660">,</span>&nbsp;<span class="ident" id="8646662">rest</span><span class="op" id="8646666">,</span>&nbsp;<span class="ident" id="8646668">err</span>&nbsp;<span class="op" id="8646672">=</span>&nbsp;<span class="ident" id="8646674">nextValue</span><span class="op" id="8646683">(</span><span class="builtinfunc" id="8646684">append</span><span class="op" id="8646690">(</span><span class="ident" id="8646691">jsonBig</span><span class="op" id="8646698">,</span>&nbsp;<span class="string" id="8646700">&#34;HELLO&nbsp;WORLD&#34;</span><span class="op" id="8646713">...</span><span class="op" id="8646716">)</span><span class="op" id="8646717">,</span>&nbsp;<span class="op" id="8646719">&amp;</span><span class="ident" id="8646720">scan</span><span class="op" id="8646724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8646727">if</span>&nbsp;<span class="ident" id="8646730">err</span>&nbsp;<span class="op" id="8646734">!=</span>&nbsp;<span class="ident" id="8646737">nil</span>&nbsp;<span class="op" id="8646741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8646745">t</span><span class="op" id="8646746">.</span><span class="ident" id="8646747">Fatalf</span><span class="op" id="8646753">(</span><span class="string" id="8646754">&#34;nextValue&nbsp;extra:&nbsp;%s&#34;</span><span class="op" id="8646775">,</span>&nbsp;<span class="ident" id="8646777">err</span><span class="op" id="8646780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8646783">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8646786">if</span>&nbsp;<span class="builtinfunc" id="8646789">len</span><span class="op" id="8646792">(</span><span class="ident" id="8646793">item</span><span class="op" id="8646797">)</span>&nbsp;<span class="op" id="8646799">!=</span>&nbsp;<span class="builtinfunc" id="8646802">len</span><span class="op" id="8646805">(</span><span class="ident" id="8646806">jsonBig</span><span class="op" id="8646813">)</span>&nbsp;<span class="op" id="8646815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8646819">t</span><span class="op" id="8646820">.</span><span class="ident" id="8646821">Errorf</span><span class="op" id="8646827">(</span><span class="string" id="8646828">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="8646849">,</span>&nbsp;<span class="builtinfunc" id="8646851">len</span><span class="op" id="8646854">(</span><span class="ident" id="8646855">item</span><span class="op" id="8646859">)</span><span class="op" id="8646860">,</span>&nbsp;<span class="builtinfunc" id="8646862">len</span><span class="op" id="8646865">(</span><span class="ident" id="8646866">jsonBig</span><span class="op" id="8646873">)</span><span class="op" id="8646874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8646877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8646880">if</span>&nbsp;<span class="builtintype" id="8646883">string</span><span class="op" id="8646889">(</span><span class="ident" id="8646890">rest</span><span class="op" id="8646894">)</span>&nbsp;<span class="op" id="8646896">!=</span>&nbsp;<span class="string" id="8646899">&#34;HELLO&nbsp;WORLD&#34;</span>&nbsp;<span class="op" id="8646913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8646917">t</span><span class="op" id="8646918">.</span><span class="ident" id="8646919">Errorf</span><span class="op" id="8646925">(</span><span class="string" id="8646926">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="8646944">,</span>&nbsp;<span class="builtinfunc" id="8646946">len</span><span class="op" id="8646949">(</span><span class="ident" id="8646950">rest</span><span class="op" id="8646954">)</span><span class="op" id="8646955">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8646958">}</span><br>
<span class="lineno"></span><span class="op" id="8646960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8646963">var</span>&nbsp;<span class="ident" id="8646967">benchScan</span>&nbsp;<span class="ident" id="8646977">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="keyword" id="8646986">func</span>&nbsp;<span class="ident" id="8646991">BenchmarkSkipValue</span><span class="op" id="8647009">(</span><span class="ident" id="8647010">b</span>&nbsp;<span class="op" id="8647012">*</span><span class="ident" id="8647013">testing</span><span class="op" id="8647020">.</span><span class="ident" id="8647021">B</span><span class="op" id="8647022">)</span>&nbsp;<span class="op" id="8647024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8647027">initBig</span><span class="op" id="8647034">(</span><span class="op" id="8647035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647038">for</span>&nbsp;<span class="ident" id="8647042">i</span>&nbsp;<span class="op" id="8647044">:=</span>&nbsp;<span class="num" id="8647047">0</span><span class="op" id="8647048">;</span>&nbsp;<span class="ident" id="8647050">i</span>&nbsp;<span class="op" id="8647052">&lt;</span>&nbsp;<span class="ident" id="8647054">b</span><span class="op" id="8647055">.</span><span class="ident" id="8647056">N</span><span class="op" id="8647057">;</span>&nbsp;<span class="ident" id="8647059">i</span><span class="op" id="8647060">++</span>&nbsp;<span class="op" id="8647063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8647067">nextValue</span><span class="op" id="8647076">(</span><span class="ident" id="8647077">jsonBig</span><span class="op" id="8647084">,</span>&nbsp;<span class="op" id="8647086">&amp;</span><span class="ident" id="8647087">benchScan</span><span class="op" id="8647096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8647099">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8647102">b</span><span class="op" id="8647103">.</span><span class="ident" id="8647104">SetBytes</span><span class="op" id="8647112">(</span><span class="ident" id="8647113">int64</span><span class="op" id="8647118">(</span><span class="builtinfunc" id="8647119">len</span><span class="op" id="8647122">(</span><span class="ident" id="8647123">jsonBig</span><span class="op" id="8647130">)</span><span class="op" id="8647131">)</span><span class="op" id="8647132">)</span><br>
<span class="lineno"></span><span class="op" id="8647134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8647137">func</span>&nbsp;<span class="ident" id="8647142">diff</span><span class="op" id="8647146">(</span><span class="ident" id="8647147">t</span>&nbsp;<span class="op" id="8647149">*</span><span class="ident" id="8647150">testing</span><span class="op" id="8647157">.</span><span class="ident" id="8647158">T</span><span class="op" id="8647159">,</span>&nbsp;<span class="ident" id="8647161">a</span><span class="op" id="8647162">,</span>&nbsp;<span class="ident" id="8647164">b</span>&nbsp;<span class="op" id="8647166">[</span><span class="op" id="8647167">]</span><span class="builtintype" id="8647168">byte</span><span class="op" id="8647172">)</span>&nbsp;<span class="op" id="8647174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647177">for</span>&nbsp;<span class="ident" id="8647181">i</span>&nbsp;<span class="op" id="8647183">:=</span>&nbsp;<span class="num" id="8647186">0</span><span class="op" id="8647187">;</span>&nbsp;<span class="op" id="8647189">;</span>&nbsp;<span class="ident" id="8647191">i</span><span class="op" id="8647192">++</span>&nbsp;<span class="op" id="8647195">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647199">if</span>&nbsp;<span class="ident" id="8647202">i</span>&nbsp;<span class="op" id="8647204">&gt;=</span>&nbsp;<span class="builtinfunc" id="8647207">len</span><span class="op" id="8647210">(</span><span class="ident" id="8647211">a</span><span class="op" id="8647212">)</span>&nbsp;<span class="op" id="8647214">||</span>&nbsp;<span class="ident" id="8647217">i</span>&nbsp;<span class="op" id="8647219">&gt;=</span>&nbsp;<span class="builtinfunc" id="8647222">len</span><span class="op" id="8647225">(</span><span class="ident" id="8647226">b</span><span class="op" id="8647227">)</span>&nbsp;<span class="op" id="8647229">||</span>&nbsp;<span class="ident" id="8647232">a</span><span class="op" id="8647233">[</span><span class="ident" id="8647234">i</span><span class="op" id="8647235">]</span>&nbsp;<span class="op" id="8647237">!=</span>&nbsp;<span class="ident" id="8647240">b</span><span class="op" id="8647241">[</span><span class="ident" id="8647242">i</span><span class="op" id="8647243">]</span>&nbsp;<span class="op" id="8647245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8647250">j</span>&nbsp;<span class="op" id="8647252">:=</span>&nbsp;<span class="ident" id="8647255">i</span>&nbsp;<span class="op" id="8647257">-</span>&nbsp;<span class="num" id="8647259">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647265">if</span>&nbsp;<span class="ident" id="8647268">j</span>&nbsp;<span class="op" id="8647270">&lt;</span>&nbsp;<span class="num" id="8647272">0</span>&nbsp;<span class="op" id="8647274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8647280">j</span>&nbsp;<span class="op" id="8647282">=</span>&nbsp;<span class="num" id="8647284">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8647289">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8647294">t</span><span class="op" id="8647295">.</span><span class="ident" id="8647296">Errorf</span><span class="op" id="8647302">(</span><span class="string" id="8647303">&#34;diverge&nbsp;at&nbsp;%d:&nbsp;«%s»&nbsp;vs&nbsp;«%s»&#34;</span><span class="op" id="8647336">,</span>&nbsp;<span class="ident" id="8647338">i</span><span class="op" id="8647339">,</span>&nbsp;<span class="ident" id="8647341">trim</span><span class="op" id="8647345">(</span><span class="ident" id="8647346">a</span><span class="op" id="8647347">[</span><span class="ident" id="8647348">j</span><span class="op" id="8647349">:</span><span class="op" id="8647350">]</span><span class="op" id="8647351">)</span><span class="op" id="8647352">,</span>&nbsp;<span class="ident" id="8647354">trim</span><span class="op" id="8647358">(</span><span class="ident" id="8647359">b</span><span class="op" id="8647360">[</span><span class="ident" id="8647361">j</span><span class="op" id="8647362">:</span><span class="op" id="8647363">]</span><span class="op" id="8647364">)</span><span class="op" id="8647365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647370">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8647379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8647382">}</span><br>
<span class="lineno"></span><span class="op" id="8647384">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="8647387">func</span>&nbsp;<span class="ident" id="8647392">trim</span><span class="op" id="8647396">(</span><span class="ident" id="8647397">b</span>&nbsp;<span class="op" id="8647399">[</span><span class="op" id="8647400">]</span><span class="builtintype" id="8647401">byte</span><span class="op" id="8647405">)</span>&nbsp;<span class="op" id="8647407">[</span><span class="op" id="8647408">]</span><span class="builtintype" id="8647409">byte</span>&nbsp;<span class="op" id="8647414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647417">if</span>&nbsp;<span class="builtinfunc" id="8647420">len</span><span class="op" id="8647423">(</span><span class="ident" id="8647424">b</span><span class="op" id="8647425">)</span>&nbsp;<span class="op" id="8647427">&gt;</span>&nbsp;<span class="num" id="8647429">20</span>&nbsp;<span class="op" id="8647432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647436">return</span>&nbsp;<span class="ident" id="8647443">b</span><span class="op" id="8647444">[</span><span class="num" id="8647445">0</span><span class="op" id="8647446">:</span><span class="num" id="8647447">20</span><span class="op" id="8647449">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8647452">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647455">return</span>&nbsp;<span class="ident" id="8647462">b</span><br>
<span class="lineno"></span><span class="op" id="8647464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8647467">//&nbsp;Generate&nbsp;a&nbsp;random&nbsp;JSON&nbsp;object.</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="8647502">var</span>&nbsp;<span class="ident" id="8647506">jsonBig</span>&nbsp;<span class="op" id="8647514">[</span><span class="op" id="8647515">]</span><span class="builtintype" id="8647516">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8647522">func</span>&nbsp;<span class="ident" id="8647527">initBig</span><span class="op" id="8647534">(</span><span class="op" id="8647535">)</span>&nbsp;<span class="op" id="8647537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8647540">n</span>&nbsp;<span class="op" id="8647542">:=</span>&nbsp;<span class="num" id="8647545">10000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647552">if</span>&nbsp;<span class="ident" id="8647555">testing</span><span class="op" id="8647562">.</span><span class="ident" id="8647563">Short</span><span class="op" id="8647568">(</span><span class="op" id="8647569">)</span>&nbsp;<span class="op" id="8647571">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8647575">n</span>&nbsp;<span class="op" id="8647577">=</span>&nbsp;<span class="num" id="8647579">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8647584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8647587">b</span><span class="op" id="8647588">,</span>&nbsp;<span class="ident" id="8647590">err</span>&nbsp;<span class="op" id="8647594">:=</span>&nbsp;<span class="ident" id="8647597">Marshal</span><span class="op" id="8647604">(</span><span class="ident" id="8647605">genValue</span><span class="op" id="8647613">(</span><span class="ident" id="8647614">n</span><span class="op" id="8647615">)</span><span class="op" id="8647616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647619">if</span>&nbsp;<span class="ident" id="8647622">err</span>&nbsp;<span class="op" id="8647626">!=</span>&nbsp;<span class="ident" id="8647629">nil</span>&nbsp;<span class="op" id="8647633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8647637">panic</span><span class="op" id="8647642">(</span><span class="ident" id="8647643">err</span><span class="op" id="8647646">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8647649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8647652">jsonBig</span>&nbsp;<span class="op" id="8647660">=</span>&nbsp;<span class="ident" id="8647662">b</span><br>
<span class="lineno"></span><span class="op" id="8647664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8647667">func</span>&nbsp;<span class="ident" id="8647672">genValue</span><span class="op" id="8647680">(</span><span class="ident" id="8647681">n</span>&nbsp;<span class="builtintype" id="8647683">int</span><span class="op" id="8647686">)</span>&nbsp;<span class="keyword" id="8647688">interface</span><span class="op" id="8647697">{</span><span class="op" id="8647698">}</span>&nbsp;<span class="op" id="8647700">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647703">if</span>&nbsp;<span class="ident" id="8647706">n</span>&nbsp;<span class="op" id="8647708">&gt;</span>&nbsp;<span class="num" id="8647710">1</span>&nbsp;<span class="op" id="8647712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647716">switch</span>&nbsp;<span class="ident" id="8647723">rand</span><span class="op" id="8647727">.</span><span class="ident" id="8647728">Intn</span><span class="op" id="8647732">(</span><span class="num" id="8647733">2</span><span class="op" id="8647734">)</span>&nbsp;<span class="op" id="8647736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647740">case</span>&nbsp;<span class="num" id="8647745">0</span><span class="op" id="8647746">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647751">return</span>&nbsp;<span class="ident" id="8647758">genArray</span><span class="op" id="8647766">(</span><span class="ident" id="8647767">n</span><span class="op" id="8647768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647772">case</span>&nbsp;<span class="num" id="8647777">1</span><span class="op" id="8647778">:</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647783">return</span>&nbsp;<span class="ident" id="8647790">genMap</span><span class="op" id="8647796">(</span><span class="ident" id="8647797">n</span><span class="op" id="8647798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8647802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8647805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647808">switch</span>&nbsp;<span class="ident" id="8647815">rand</span><span class="op" id="8647819">.</span><span class="ident" id="8647820">Intn</span><span class="op" id="8647824">(</span><span class="num" id="8647825">3</span><span class="op" id="8647826">)</span>&nbsp;<span class="op" id="8647828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647831">case</span>&nbsp;<span class="num" id="8647836">0</span><span class="op" id="8647837">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647841">return</span>&nbsp;<span class="ident" id="8647848">rand</span><span class="op" id="8647852">.</span><span class="ident" id="8647853">Intn</span><span class="op" id="8647857">(</span><span class="num" id="8647858">2</span><span class="op" id="8647859">)</span>&nbsp;<span class="op" id="8647861">==</span>&nbsp;<span class="num" id="8647864">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647867">case</span>&nbsp;<span class="num" id="8647872">1</span><span class="op" id="8647873">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647877">return</span>&nbsp;<span class="ident" id="8647884">rand</span><span class="op" id="8647888">.</span><span class="ident" id="8647889">NormFloat64</span><span class="op" id="8647900">(</span><span class="op" id="8647901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647904">case</span>&nbsp;<span class="num" id="8647909">2</span><span class="op" id="8647910">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8647914">return</span>&nbsp;<span class="ident" id="8647921">genString</span><span class="op" id="8647930">(</span><span class="num" id="8647931">30</span><span class="op" id="8647933">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8647936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8647939">panic</span><span class="op" id="8647944">(</span><span class="string" id="8647945">&#34;unreachable&#34;</span><span class="op" id="8647958">)</span><br>
<span class="lineno"></span><span class="op" id="8647960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8647963">func</span>&nbsp;<span class="ident" id="8647968">genString</span><span class="op" id="8647977">(</span><span class="ident" id="8647978">stddev</span>&nbsp;<span class="builtintype" id="8647985">float64</span><span class="op" id="8647992">)</span>&nbsp;<span class="builtintype" id="8647994">string</span>&nbsp;<span class="op" id="8648001">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8648004">n</span>&nbsp;<span class="op" id="8648006">:=</span>&nbsp;<span class="builtintype" id="8648009">int</span><span class="op" id="8648012">(</span><span class="ident" id="8648013">math</span><span class="op" id="8648017">.</span><span class="ident" id="8648018">Abs</span><span class="op" id="8648021">(</span><span class="ident" id="8648022">rand</span><span class="op" id="8648026">.</span><span class="ident" id="8648027">NormFloat64</span><span class="op" id="8648038">(</span><span class="op" id="8648039">)</span><span class="op" id="8648040">*</span><span class="ident" id="8648041">stddev</span>&nbsp;<span class="op" id="8648048">+</span>&nbsp;<span class="ident" id="8648050">stddev</span><span class="op" id="8648056">/</span><span class="num" id="8648057">2</span><span class="op" id="8648058">)</span><span class="op" id="8648059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8648062">c</span>&nbsp;<span class="op" id="8648064">:=</span>&nbsp;<span class="builtinfunc" id="8648067">make</span><span class="op" id="8648071">(</span><span class="op" id="8648072">[</span><span class="op" id="8648073">]</span><span class="builtintype" id="8648074">rune</span><span class="op" id="8648078">,</span>&nbsp;<span class="ident" id="8648080">n</span><span class="op" id="8648081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8648084">for</span>&nbsp;<span class="ident" id="8648088">i</span>&nbsp;<span class="op" id="8648090">:=</span>&nbsp;<span class="keyword" id="8648093">range</span>&nbsp;<span class="ident" id="8648099">c</span>&nbsp;<span class="op" id="8648101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8648105">f</span>&nbsp;<span class="op" id="8648107">:=</span>&nbsp;<span class="ident" id="8648110">math</span><span class="op" id="8648114">.</span><span class="ident" id="8648115">Abs</span><span class="op" id="8648118">(</span><span class="ident" id="8648119">rand</span><span class="op" id="8648123">.</span><span class="ident" id="8648124">NormFloat64</span><span class="op" id="8648135">(</span><span class="op" id="8648136">)</span><span class="op" id="8648137">*</span><span class="num" id="8648138">64</span>&nbsp;<span class="op" id="8648141">+</span>&nbsp;<span class="num" id="8648143">32</span><span class="op" id="8648145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8648149">if</span>&nbsp;<span class="ident" id="8648152">f</span>&nbsp;<span class="op" id="8648154">&gt;</span>&nbsp;<span class="num" id="8648156">0x10ffff</span>&nbsp;<span class="op" id="8648165">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8648170">f</span>&nbsp;<span class="op" id="8648172">=</span>&nbsp;<span class="num" id="8648174">0x10ffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8648185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8648189">c</span><span class="op" id="8648190">[</span><span class="ident" id="8648191">i</span><span class="op" id="8648192">]</span>&nbsp;<span class="op" id="8648194">=</span>&nbsp;<span class="builtintype" id="8648196">rune</span><span class="op" id="8648200">(</span><span class="ident" id="8648201">f</span><span class="op" id="8648202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8648205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8648208">return</span>&nbsp;<span class="builtintype" id="8648215">string</span><span class="op" id="8648221">(</span><span class="ident" id="8648222">c</span><span class="op" id="8648223">)</span><br>
<span class="lineno">285</span><span class="op" id="8648225">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8648228">func</span>&nbsp;<span class="ident" id="8648233">genArray</span><span class="op" id="8648241">(</span><span class="ident" id="8648242">n</span>&nbsp;<span class="builtintype" id="8648244">int</span><span class="op" id="8648247">)</span>&nbsp;<span class="op" id="8648249">[</span><span class="op" id="8648250">]</span><span class="keyword" id="8648251">interface</span><span class="op" id="8648260">{</span><span class="op" id="8648261">}</span>&nbsp;<span class="op" id="8648263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8648266">f</span>&nbsp;<span class="op" id="8648268">:=</span>&nbsp;<span class="builtintype" id="8648271">int</span><span class="op" id="8648274">(</span><span class="ident" id="8648275">math</span><span class="op" id="8648279">.</span><span class="ident" id="8648280">Abs</span><span class="op" id="8648283">(</span><span class="ident" id="8648284">rand</span><span class="op" id="8648288">.</span><span class="ident" id="8648289">NormFloat64</span><span class="op" id="8648300">(</span><span class="op" id="8648301">)</span><span class="op" id="8648302">)</span>&nbsp;<span class="op" id="8648304">*</span>&nbsp;<span class="ident" id="8648306">math</span><span class="op" id="8648310">.</span><span class="ident" id="8648311">Min</span><span class="op" id="8648314">(</span><span class="num" id="8648315">10</span><span class="op" id="8648317">,</span>&nbsp;<span class="builtintype" id="8648319">float64</span><span class="op" id="8648326">(</span><span class="ident" id="8648327">n</span><span class="op" id="8648328">/</span><span class="num" id="8648329">2</span><span class="op" id="8648330">)</span><span class="op" id="8648331">)</span><span class="op" id="8648332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8648335">if</span>&nbsp;<span class="ident" id="8648338">f</span>&nbsp;<span class="op" id="8648340">&gt;</span>&nbsp;<span class="ident" id="8648342">n</span>&nbsp;<span class="op" id="8648344">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8648348">f</span>&nbsp;<span class="op" id="8648350">=</span>&nbsp;<span class="ident" id="8648352">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8648355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8648358">if</span>&nbsp;<span class="ident" id="8648361">f</span>&nbsp;<span class="op" id="8648363">&lt;</span>&nbsp;<span class="num" id="8648365">1</span>&nbsp;<span class="op" id="8648367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8648371">f</span>&nbsp;<span class="op" id="8648373">=</span>&nbsp;<span class="num" id="8648375">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8648378">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8648381">x</span>&nbsp;<span class="op" id="8648383">:=</span>&nbsp;<span class="builtinfunc" id="8648386">make</span><span class="op" id="8648390">(</span><span class="op" id="8648391">[</span><span class="op" id="8648392">]</span><span class="keyword" id="8648393">interface</span><span class="op" id="8648402">{</span><span class="op" id="8648403">}</span><span class="op" id="8648404">,</span>&nbsp;<span class="ident" id="8648406">f</span><span class="op" id="8648407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8648410">for</span>&nbsp;<span class="ident" id="8648414">i</span>&nbsp;<span class="op" id="8648416">:=</span>&nbsp;<span class="keyword" id="8648419">range</span>&nbsp;<span class="ident" id="8648425">x</span>&nbsp;<span class="op" id="8648427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8648431">x</span><span class="op" id="8648432">[</span><span class="ident" id="8648433">i</span><span class="op" id="8648434">]</span>&nbsp;<span class="op" id="8648436">=</span>&nbsp;<span class="ident" id="8648438">genValue</span><span class="op" id="8648446">(</span><span class="op" id="8648447">(</span><span class="op" id="8648448">(</span><span class="ident" id="8648449">i</span><span class="op" id="8648450">+</span><span class="num" id="8648451">1</span><span class="op" id="8648452">)</span><span class="op" id="8648453">*</span><span class="ident" id="8648454">n</span><span class="op" id="8648455">)</span><span class="op" id="8648456">/</span><span class="ident" id="8648457">f</span>&nbsp;<span class="op" id="8648459">-</span>&nbsp;<span class="op" id="8648461">(</span><span class="ident" id="8648462">i</span><span class="op" id="8648463">*</span><span class="ident" id="8648464">n</span><span class="op" id="8648465">)</span><span class="op" id="8648466">/</span><span class="ident" id="8648467">f</span><span class="op" id="8648468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8648471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8648474">return</span>&nbsp;<span class="ident" id="8648481">x</span><br>
<span class="lineno">300</span><span class="op" id="8648483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8648486">func</span>&nbsp;<span class="ident" id="8648491">genMap</span><span class="op" id="8648497">(</span><span class="ident" id="8648498">n</span>&nbsp;<span class="builtintype" id="8648500">int</span><span class="op" id="8648503">)</span>&nbsp;<span class="keyword" id="8648505">map</span><span class="op" id="8648508">[</span><span class="builtintype" id="8648509">string</span><span class="op" id="8648515">]</span><span class="keyword" id="8648516">interface</span><span class="op" id="8648525">{</span><span class="op" id="8648526">}</span>&nbsp;<span class="op" id="8648528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8648531">f</span>&nbsp;<span class="op" id="8648533">:=</span>&nbsp;<span class="builtintype" id="8648536">int</span><span class="op" id="8648539">(</span><span class="ident" id="8648540">math</span><span class="op" id="8648544">.</span><span class="ident" id="8648545">Abs</span><span class="op" id="8648548">(</span><span class="ident" id="8648549">rand</span><span class="op" id="8648553">.</span><span class="ident" id="8648554">NormFloat64</span><span class="op" id="8648565">(</span><span class="op" id="8648566">)</span><span class="op" id="8648567">)</span>&nbsp;<span class="op" id="8648569">*</span>&nbsp;<span class="ident" id="8648571">math</span><span class="op" id="8648575">.</span><span class="ident" id="8648576">Min</span><span class="op" id="8648579">(</span><span class="num" id="8648580">10</span><span class="op" id="8648582">,</span>&nbsp;<span class="builtintype" id="8648584">float64</span><span class="op" id="8648591">(</span><span class="ident" id="8648592">n</span><span class="op" id="8648593">/</span><span class="num" id="8648594">2</span><span class="op" id="8648595">)</span><span class="op" id="8648596">)</span><span class="op" id="8648597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8648600">if</span>&nbsp;<span class="ident" id="8648603">f</span>&nbsp;<span class="op" id="8648605">&gt;</span>&nbsp;<span class="ident" id="8648607">n</span>&nbsp;<span class="op" id="8648609">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8648613">f</span>&nbsp;<span class="op" id="8648615">=</span>&nbsp;<span class="ident" id="8648617">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8648620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8648623">if</span>&nbsp;<span class="ident" id="8648626">n</span>&nbsp;<span class="op" id="8648628">&gt;</span>&nbsp;<span class="num" id="8648630">0</span>&nbsp;<span class="op" id="8648632">&amp;&amp;</span>&nbsp;<span class="ident" id="8648635">f</span>&nbsp;<span class="op" id="8648637">==</span>&nbsp;<span class="num" id="8648640">0</span>&nbsp;<span class="op" id="8648642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8648646">f</span>&nbsp;<span class="op" id="8648648">=</span>&nbsp;<span class="num" id="8648650">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8648653">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8648656">x</span>&nbsp;<span class="op" id="8648658">:=</span>&nbsp;<span class="builtinfunc" id="8648661">make</span><span class="op" id="8648665">(</span><span class="keyword" id="8648666">map</span><span class="op" id="8648669">[</span><span class="builtintype" id="8648670">string</span><span class="op" id="8648676">]</span><span class="keyword" id="8648677">interface</span><span class="op" id="8648686">{</span><span class="op" id="8648687">}</span><span class="op" id="8648688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8648691">for</span>&nbsp;<span class="ident" id="8648695">i</span>&nbsp;<span class="op" id="8648697">:=</span>&nbsp;<span class="num" id="8648700">0</span><span class="op" id="8648701">;</span>&nbsp;<span class="ident" id="8648703">i</span>&nbsp;<span class="op" id="8648705">&lt;</span>&nbsp;<span class="ident" id="8648707">f</span><span class="op" id="8648708">;</span>&nbsp;<span class="ident" id="8648710">i</span><span class="op" id="8648711">++</span>&nbsp;<span class="op" id="8648714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8648718">x</span><span class="op" id="8648719">[</span><span class="ident" id="8648720">genString</span><span class="op" id="8648729">(</span><span class="num" id="8648730">10</span><span class="op" id="8648732">)</span><span class="op" id="8648733">]</span>&nbsp;<span class="op" id="8648735">=</span>&nbsp;<span class="ident" id="8648737">genValue</span><span class="op" id="8648745">(</span><span class="op" id="8648746">(</span><span class="op" id="8648747">(</span><span class="ident" id="8648748">i</span><span class="op" id="8648749">+</span><span class="num" id="8648750">1</span><span class="op" id="8648751">)</span><span class="op" id="8648752">*</span><span class="ident" id="8648753">n</span><span class="op" id="8648754">)</span><span class="op" id="8648755">/</span><span class="ident" id="8648756">f</span>&nbsp;<span class="op" id="8648758">-</span>&nbsp;<span class="op" id="8648760">(</span><span class="ident" id="8648761">i</span><span class="op" id="8648762">*</span><span class="ident" id="8648763">n</span><span class="op" id="8648764">)</span><span class="op" id="8648765">/</span><span class="ident" id="8648766">f</span><span class="op" id="8648767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8648770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8648773">return</span>&nbsp;<span class="ident" id="8648780">x</span><br>
<span class="lineno">315</span><span class="op" id="8648782">}</span>
</div>
</body>
</html>
