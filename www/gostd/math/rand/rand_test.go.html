<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/rand</h2>
<ul>
<li><a href="/gostd/math/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/rand/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/rand/normal.go.html">normal.go</a></li>
<li><a href="/gostd/math/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/math/rand/rand_test.go.html">rand_test.go</a></li>
<li><a href="/gostd/math/rand/regress_test.go.html">regress_test.go</a></li>
<li><a href="/gostd/math/rand/rng.go.html">rng.go</a></li>
<li><a href="/gostd/math/rand/zipf.go.html">zipf.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6942253">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6942308">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6942362">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6942413">package</span>&nbsp;<span class="ident" id="6942421">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6942427">import</span>&nbsp;<span class="op" id="6942434">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942437">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942447">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942454">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942462">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6942472">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6942475">const</span>&nbsp;<span class="op" id="6942481">(</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942484">numTestSamples</span>&nbsp;<span class="op" id="6942499">=</span>&nbsp;<span class="num" id="6942501">10000</span><br>
<span class="lineno"></span><span class="op" id="6942507">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6942510">type</span>&nbsp;<span class="ident" id="6942515">statsResults</span>&nbsp;<span class="keyword" id="6942528">struct</span>&nbsp;<span class="op" id="6942535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942538">mean</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6942550">float64</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942559">stddev</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6942571">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942580">closeEnough</span>&nbsp;<span class="builtintype" id="6942592">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942601">maxError</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6942613">float64</span><br>
<span class="lineno"></span><span class="op" id="6942621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6942624">func</span>&nbsp;<span class="ident" id="6942629">max</span><span class="op" id="6942632">(</span><span class="ident" id="6942633">a</span><span class="op" id="6942634">,</span>&nbsp;<span class="ident" id="6942636">b</span>&nbsp;<span class="builtintype" id="6942638">float64</span><span class="op" id="6942645">)</span>&nbsp;<span class="builtintype" id="6942647">float64</span>&nbsp;<span class="op" id="6942655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6942658">if</span>&nbsp;<span class="ident" id="6942661">a</span>&nbsp;<span class="op" id="6942663">&gt;</span>&nbsp;<span class="ident" id="6942665">b</span>&nbsp;<span class="op" id="6942667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6942671">return</span>&nbsp;<span class="ident" id="6942678">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6942684">return</span>&nbsp;<span class="ident" id="6942691">b</span><br>
<span class="lineno">30</span><span class="op" id="6942693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6942696">func</span>&nbsp;<span class="ident" id="6942701">nearEqual</span><span class="op" id="6942710">(</span><span class="ident" id="6942711">a</span><span class="op" id="6942712">,</span>&nbsp;<span class="ident" id="6942714">b</span><span class="op" id="6942715">,</span>&nbsp;<span class="ident" id="6942717">closeEnough</span><span class="op" id="6942728">,</span>&nbsp;<span class="ident" id="6942730">maxError</span>&nbsp;<span class="builtintype" id="6942739">float64</span><span class="op" id="6942746">)</span>&nbsp;<span class="builtintype" id="6942748">bool</span>&nbsp;<span class="op" id="6942753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942756">absDiff</span>&nbsp;<span class="op" id="6942764">:=</span>&nbsp;<span class="ident" id="6942767">math</span><span class="op" id="6942771">.</span><span class="ident" id="6942772">Abs</span><span class="op" id="6942775">(</span><span class="ident" id="6942776">a</span>&nbsp;<span class="op" id="6942778">-</span>&nbsp;<span class="ident" id="6942780">b</span><span class="op" id="6942781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6942784">if</span>&nbsp;<span class="ident" id="6942787">absDiff</span>&nbsp;<span class="op" id="6942795">&lt;</span>&nbsp;<span class="ident" id="6942797">closeEnough</span>&nbsp;<span class="op" id="6942809">{</span>&nbsp;<span class="comment" id="6942811">//&nbsp;Necessary&nbsp;when&nbsp;one&nbsp;value&nbsp;is&nbsp;zero&nbsp;and&nbsp;one&nbsp;value&nbsp;is&nbsp;close&nbsp;to&nbsp;zero.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6942881">return</span>&nbsp;<span class="builtintype" id="6942888">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6942897">return</span>&nbsp;<span class="ident" id="6942904">absDiff</span><span class="op" id="6942911">/</span><span class="ident" id="6942912">max</span><span class="op" id="6942915">(</span><span class="ident" id="6942916">math</span><span class="op" id="6942920">.</span><span class="ident" id="6942921">Abs</span><span class="op" id="6942924">(</span><span class="ident" id="6942925">a</span><span class="op" id="6942926">)</span><span class="op" id="6942927">,</span>&nbsp;<span class="ident" id="6942929">math</span><span class="op" id="6942933">.</span><span class="ident" id="6942934">Abs</span><span class="op" id="6942937">(</span><span class="ident" id="6942938">b</span><span class="op" id="6942939">)</span><span class="op" id="6942940">)</span>&nbsp;<span class="op" id="6942942">&lt;</span>&nbsp;<span class="ident" id="6942944">maxError</span><br>
<span class="lineno"></span><span class="op" id="6942953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="6942956">var</span>&nbsp;<span class="ident" id="6942960">testSeeds</span>&nbsp;<span class="op" id="6942970">=</span>&nbsp;<span class="op" id="6942972">[</span><span class="op" id="6942973">]</span><span class="ident" id="6942974">int64</span><span class="op" id="6942979">{</span><span class="num" id="6942980">1</span><span class="op" id="6942981">,</span>&nbsp;<span class="num" id="6942983">1754801282</span><span class="op" id="6942993">,</span>&nbsp;<span class="num" id="6942995">1698661970</span><span class="op" id="6943005">,</span>&nbsp;<span class="num" id="6943007">1550503961</span><span class="op" id="6943017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6943020">//&nbsp;checkSimilarDistribution&nbsp;returns&nbsp;success&nbsp;if&nbsp;the&nbsp;mean&nbsp;and&nbsp;stddev&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6943094">//&nbsp;two&nbsp;statsResults&nbsp;are&nbsp;similar.</span><br>
<span class="lineno"></span><span class="keyword" id="6943127">func</span>&nbsp;<span class="op" id="6943132">(</span><span class="ident" id="6943133">this</span>&nbsp;<span class="op" id="6943138">*</span><span class="ident" id="6943139">statsResults</span><span class="op" id="6943151">)</span>&nbsp;<span class="ident" id="6943153">checkSimilarDistribution</span><span class="op" id="6943177">(</span><span class="ident" id="6943178">expected</span>&nbsp;<span class="op" id="6943187">*</span><span class="ident" id="6943188">statsResults</span><span class="op" id="6943200">)</span>&nbsp;<span class="builtintype" id="6943202">error</span>&nbsp;<span class="op" id="6943208">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6943211">if</span>&nbsp;<span class="op" id="6943214">!</span><span class="ident" id="6943215">nearEqual</span><span class="op" id="6943224">(</span><span class="ident" id="6943225">this</span><span class="op" id="6943229">.</span><span class="ident" id="6943230">mean</span><span class="op" id="6943234">,</span>&nbsp;<span class="ident" id="6943236">expected</span><span class="op" id="6943244">.</span><span class="ident" id="6943245">mean</span><span class="op" id="6943249">,</span>&nbsp;<span class="ident" id="6943251">expected</span><span class="op" id="6943259">.</span><span class="ident" id="6943260">closeEnough</span><span class="op" id="6943271">,</span>&nbsp;<span class="ident" id="6943273">expected</span><span class="op" id="6943281">.</span><span class="ident" id="6943282">maxError</span><span class="op" id="6943290">)</span>&nbsp;<span class="op" id="6943292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943296">s</span>&nbsp;<span class="op" id="6943298">:=</span>&nbsp;<span class="ident" id="6943301">fmt</span><span class="op" id="6943304">.</span><span class="ident" id="6943305">Sprintf</span><span class="op" id="6943312">(</span><span class="string" id="6943313">&#34;mean&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="6943351">,</span>&nbsp;<span class="ident" id="6943353">this</span><span class="op" id="6943357">.</span><span class="ident" id="6943358">mean</span><span class="op" id="6943362">,</span>&nbsp;<span class="ident" id="6943364">expected</span><span class="op" id="6943372">.</span><span class="ident" id="6943373">mean</span><span class="op" id="6943377">,</span>&nbsp;<span class="ident" id="6943379">expected</span><span class="op" id="6943387">.</span><span class="ident" id="6943388">closeEnough</span><span class="op" id="6943399">,</span>&nbsp;<span class="ident" id="6943401">expected</span><span class="op" id="6943409">.</span><span class="ident" id="6943410">maxError</span><span class="op" id="6943418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943422">fmt</span><span class="op" id="6943425">.</span><span class="ident" id="6943426">Println</span><span class="op" id="6943433">(</span><span class="ident" id="6943434">s</span><span class="op" id="6943435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6943439">return</span>&nbsp;<span class="ident" id="6943446">errors</span><span class="op" id="6943452">.</span><span class="ident" id="6943453">New</span><span class="op" id="6943456">(</span><span class="ident" id="6943457">s</span><span class="op" id="6943458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943461">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6943464">if</span>&nbsp;<span class="op" id="6943467">!</span><span class="ident" id="6943468">nearEqual</span><span class="op" id="6943477">(</span><span class="ident" id="6943478">this</span><span class="op" id="6943482">.</span><span class="ident" id="6943483">stddev</span><span class="op" id="6943489">,</span>&nbsp;<span class="ident" id="6943491">expected</span><span class="op" id="6943499">.</span><span class="ident" id="6943500">stddev</span><span class="op" id="6943506">,</span>&nbsp;<span class="num" id="6943508">0</span><span class="op" id="6943509">,</span>&nbsp;<span class="ident" id="6943511">expected</span><span class="op" id="6943519">.</span><span class="ident" id="6943520">maxError</span><span class="op" id="6943528">)</span>&nbsp;<span class="op" id="6943530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943534">s</span>&nbsp;<span class="op" id="6943536">:=</span>&nbsp;<span class="ident" id="6943539">fmt</span><span class="op" id="6943542">.</span><span class="ident" id="6943543">Sprintf</span><span class="op" id="6943550">(</span><span class="string" id="6943551">&#34;stddev&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="6943591">,</span>&nbsp;<span class="ident" id="6943593">this</span><span class="op" id="6943597">.</span><span class="ident" id="6943598">stddev</span><span class="op" id="6943604">,</span>&nbsp;<span class="ident" id="6943606">expected</span><span class="op" id="6943614">.</span><span class="ident" id="6943615">stddev</span><span class="op" id="6943621">,</span>&nbsp;<span class="ident" id="6943623">expected</span><span class="op" id="6943631">.</span><span class="ident" id="6943632">closeEnough</span><span class="op" id="6943643">,</span>&nbsp;<span class="ident" id="6943645">expected</span><span class="op" id="6943653">.</span><span class="ident" id="6943654">maxError</span><span class="op" id="6943662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943666">fmt</span><span class="op" id="6943669">.</span><span class="ident" id="6943670">Println</span><span class="op" id="6943677">(</span><span class="ident" id="6943678">s</span><span class="op" id="6943679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6943683">return</span>&nbsp;<span class="ident" id="6943690">errors</span><span class="op" id="6943696">.</span><span class="ident" id="6943697">New</span><span class="op" id="6943700">(</span><span class="ident" id="6943701">s</span><span class="op" id="6943702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943705">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6943708">return</span>&nbsp;<span class="ident" id="6943715">nil</span><br>
<span class="lineno"></span><span class="op" id="6943719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6943722">func</span>&nbsp;<span class="ident" id="6943727">getStatsResults</span><span class="op" id="6943742">(</span><span class="ident" id="6943743">samples</span>&nbsp;<span class="op" id="6943751">[</span><span class="op" id="6943752">]</span><span class="builtintype" id="6943753">float64</span><span class="op" id="6943760">)</span>&nbsp;<span class="op" id="6943762">*</span><span class="ident" id="6943763">statsResults</span>&nbsp;<span class="op" id="6943776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943779">res</span>&nbsp;<span class="op" id="6943783">:=</span>&nbsp;<span class="builtinfunc" id="6943786">new</span><span class="op" id="6943789">(</span><span class="ident" id="6943790">statsResults</span><span class="op" id="6943802">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6943805">var</span>&nbsp;<span class="ident" id="6943809">sum</span><span class="op" id="6943812">,</span>&nbsp;<span class="ident" id="6943814">squaresum</span>&nbsp;<span class="builtintype" id="6943824">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6943833">for</span>&nbsp;<span class="ident" id="6943837">_</span><span class="op" id="6943838">,</span>&nbsp;<span class="ident" id="6943840">s</span>&nbsp;<span class="op" id="6943842">:=</span>&nbsp;<span class="keyword" id="6943845">range</span>&nbsp;<span class="ident" id="6943851">samples</span>&nbsp;<span class="op" id="6943859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943863">sum</span>&nbsp;<span class="op" id="6943867">+=</span>&nbsp;<span class="ident" id="6943870">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943874">squaresum</span>&nbsp;<span class="op" id="6943884">+=</span>&nbsp;<span class="ident" id="6943887">s</span>&nbsp;<span class="op" id="6943889">*</span>&nbsp;<span class="ident" id="6943891">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943894">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943897">res</span><span class="op" id="6943900">.</span><span class="ident" id="6943901">mean</span>&nbsp;<span class="op" id="6943906">=</span>&nbsp;<span class="ident" id="6943908">sum</span>&nbsp;<span class="op" id="6943912">/</span>&nbsp;<span class="builtintype" id="6943914">float64</span><span class="op" id="6943921">(</span><span class="builtinfunc" id="6943922">len</span><span class="op" id="6943925">(</span><span class="ident" id="6943926">samples</span><span class="op" id="6943933">)</span><span class="op" id="6943934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943937">res</span><span class="op" id="6943940">.</span><span class="ident" id="6943941">stddev</span>&nbsp;<span class="op" id="6943948">=</span>&nbsp;<span class="ident" id="6943950">math</span><span class="op" id="6943954">.</span><span class="ident" id="6943955">Sqrt</span><span class="op" id="6943959">(</span><span class="ident" id="6943960">squaresum</span><span class="op" id="6943969">/</span><span class="builtintype" id="6943970">float64</span><span class="op" id="6943977">(</span><span class="builtinfunc" id="6943978">len</span><span class="op" id="6943981">(</span><span class="ident" id="6943982">samples</span><span class="op" id="6943989">)</span><span class="op" id="6943990">)</span>&nbsp;<span class="op" id="6943992">-</span>&nbsp;<span class="ident" id="6943994">res</span><span class="op" id="6943997">.</span><span class="ident" id="6943998">mean</span><span class="op" id="6944002">*</span><span class="ident" id="6944003">res</span><span class="op" id="6944006">.</span><span class="ident" id="6944007">mean</span><span class="op" id="6944011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944014">return</span>&nbsp;<span class="ident" id="6944021">res</span><br>
<span class="lineno"></span><span class="op" id="6944025">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="6944028">func</span>&nbsp;<span class="ident" id="6944033">checkSampleDistribution</span><span class="op" id="6944056">(</span><span class="ident" id="6944057">t</span>&nbsp;<span class="op" id="6944059">*</span><span class="ident" id="6944060">testing</span><span class="op" id="6944067">.</span><span class="ident" id="6944068">T</span><span class="op" id="6944069">,</span>&nbsp;<span class="ident" id="6944071">samples</span>&nbsp;<span class="op" id="6944079">[</span><span class="op" id="6944080">]</span><span class="builtintype" id="6944081">float64</span><span class="op" id="6944088">,</span>&nbsp;<span class="ident" id="6944090">expected</span>&nbsp;<span class="op" id="6944099">*</span><span class="ident" id="6944100">statsResults</span><span class="op" id="6944112">)</span>&nbsp;<span class="op" id="6944114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944117">actual</span>&nbsp;<span class="op" id="6944124">:=</span>&nbsp;<span class="ident" id="6944127">getStatsResults</span><span class="op" id="6944142">(</span><span class="ident" id="6944143">samples</span><span class="op" id="6944150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944153">err</span>&nbsp;<span class="op" id="6944157">:=</span>&nbsp;<span class="ident" id="6944160">actual</span><span class="op" id="6944166">.</span><span class="ident" id="6944167">checkSimilarDistribution</span><span class="op" id="6944191">(</span><span class="ident" id="6944192">expected</span><span class="op" id="6944200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944203">if</span>&nbsp;<span class="ident" id="6944206">err</span>&nbsp;<span class="op" id="6944210">!=</span>&nbsp;<span class="ident" id="6944213">nil</span>&nbsp;<span class="op" id="6944217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944221">t</span><span class="op" id="6944222">.</span><span class="ident" id="6944223">Errorf</span><span class="op" id="6944229">(</span><span class="ident" id="6944230">err</span><span class="op" id="6944233">.</span><span class="ident" id="6944234">Error</span><span class="op" id="6944239">(</span><span class="op" id="6944240">)</span><span class="op" id="6944241">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944244">}</span><br>
<span class="lineno"></span><span class="op" id="6944246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6944249">func</span>&nbsp;<span class="ident" id="6944254">checkSampleSliceDistributions</span><span class="op" id="6944283">(</span><span class="ident" id="6944284">t</span>&nbsp;<span class="op" id="6944286">*</span><span class="ident" id="6944287">testing</span><span class="op" id="6944294">.</span><span class="ident" id="6944295">T</span><span class="op" id="6944296">,</span>&nbsp;<span class="ident" id="6944298">samples</span>&nbsp;<span class="op" id="6944306">[</span><span class="op" id="6944307">]</span><span class="builtintype" id="6944308">float64</span><span class="op" id="6944315">,</span>&nbsp;<span class="ident" id="6944317">nslices</span>&nbsp;<span class="builtintype" id="6944325">int</span><span class="op" id="6944328">,</span>&nbsp;<span class="ident" id="6944330">expected</span>&nbsp;<span class="op" id="6944339">*</span><span class="ident" id="6944340">statsResults</span><span class="op" id="6944352">)</span>&nbsp;<span class="op" id="6944354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944357">chunk</span>&nbsp;<span class="op" id="6944363">:=</span>&nbsp;<span class="builtinfunc" id="6944366">len</span><span class="op" id="6944369">(</span><span class="ident" id="6944370">samples</span><span class="op" id="6944377">)</span>&nbsp;<span class="op" id="6944379">/</span>&nbsp;<span class="ident" id="6944381">nslices</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944390">for</span>&nbsp;<span class="ident" id="6944394">i</span>&nbsp;<span class="op" id="6944396">:=</span>&nbsp;<span class="num" id="6944399">0</span><span class="op" id="6944400">;</span>&nbsp;<span class="ident" id="6944402">i</span>&nbsp;<span class="op" id="6944404">&lt;</span>&nbsp;<span class="ident" id="6944406">nslices</span><span class="op" id="6944413">;</span>&nbsp;<span class="ident" id="6944415">i</span><span class="op" id="6944416">++</span>&nbsp;<span class="op" id="6944419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944423">low</span>&nbsp;<span class="op" id="6944427">:=</span>&nbsp;<span class="ident" id="6944430">i</span>&nbsp;<span class="op" id="6944432">*</span>&nbsp;<span class="ident" id="6944434">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944442">var</span>&nbsp;<span class="ident" id="6944446">high</span>&nbsp;<span class="builtintype" id="6944451">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944457">if</span>&nbsp;<span class="ident" id="6944460">i</span>&nbsp;<span class="op" id="6944462">==</span>&nbsp;<span class="ident" id="6944465">nslices</span><span class="op" id="6944472">-</span><span class="num" id="6944473">1</span>&nbsp;<span class="op" id="6944475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944480">high</span>&nbsp;<span class="op" id="6944485">=</span>&nbsp;<span class="builtinfunc" id="6944487">len</span><span class="op" id="6944490">(</span><span class="ident" id="6944491">samples</span><span class="op" id="6944498">)</span>&nbsp;<span class="op" id="6944500">-</span>&nbsp;<span class="num" id="6944502">1</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944506">}</span>&nbsp;<span class="keyword" id="6944508">else</span>&nbsp;<span class="op" id="6944513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944518">high</span>&nbsp;<span class="op" id="6944523">=</span>&nbsp;<span class="op" id="6944525">(</span><span class="ident" id="6944526">i</span>&nbsp;<span class="op" id="6944528">+</span>&nbsp;<span class="num" id="6944530">1</span><span class="op" id="6944531">)</span>&nbsp;<span class="op" id="6944533">*</span>&nbsp;<span class="ident" id="6944535">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944547">checkSampleDistribution</span><span class="op" id="6944570">(</span><span class="ident" id="6944571">t</span><span class="op" id="6944572">,</span>&nbsp;<span class="ident" id="6944574">samples</span><span class="op" id="6944581">[</span><span class="ident" id="6944582">low</span><span class="op" id="6944585">:</span><span class="ident" id="6944586">high</span><span class="op" id="6944590">]</span><span class="op" id="6944591">,</span>&nbsp;<span class="ident" id="6944593">expected</span><span class="op" id="6944601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944604">}</span><br>
<span class="lineno">90</span><span class="op" id="6944606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6944609">//</span><br>
<span class="lineno"></span><span class="comment" id="6944612">//&nbsp;Normal&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="6944641">//</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="6944645">func</span>&nbsp;<span class="ident" id="6944650">generateNormalSamples</span><span class="op" id="6944671">(</span><span class="ident" id="6944672">nsamples</span>&nbsp;<span class="builtintype" id="6944681">int</span><span class="op" id="6944684">,</span>&nbsp;<span class="ident" id="6944686">mean</span><span class="op" id="6944690">,</span>&nbsp;<span class="ident" id="6944692">stddev</span>&nbsp;<span class="builtintype" id="6944699">float64</span><span class="op" id="6944706">,</span>&nbsp;<span class="ident" id="6944708">seed</span>&nbsp;<span class="ident" id="6944713">int64</span><span class="op" id="6944718">)</span>&nbsp;<span class="op" id="6944720">[</span><span class="op" id="6944721">]</span><span class="builtintype" id="6944722">float64</span>&nbsp;<span class="op" id="6944730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944733">r</span>&nbsp;<span class="op" id="6944735">:=</span>&nbsp;<span class="ident" id="6944738">New</span><span class="op" id="6944741">(</span><span class="ident" id="6944742">NewSource</span><span class="op" id="6944751">(</span><span class="ident" id="6944752">seed</span><span class="op" id="6944756">)</span><span class="op" id="6944757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944760">samples</span>&nbsp;<span class="op" id="6944768">:=</span>&nbsp;<span class="builtinfunc" id="6944771">make</span><span class="op" id="6944775">(</span><span class="op" id="6944776">[</span><span class="op" id="6944777">]</span><span class="builtintype" id="6944778">float64</span><span class="op" id="6944785">,</span>&nbsp;<span class="ident" id="6944787">nsamples</span><span class="op" id="6944795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944798">for</span>&nbsp;<span class="ident" id="6944802">i</span>&nbsp;<span class="op" id="6944804">:=</span>&nbsp;<span class="keyword" id="6944807">range</span>&nbsp;<span class="ident" id="6944813">samples</span>&nbsp;<span class="op" id="6944821">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944825">samples</span><span class="op" id="6944832">[</span><span class="ident" id="6944833">i</span><span class="op" id="6944834">]</span>&nbsp;<span class="op" id="6944836">=</span>&nbsp;<span class="ident" id="6944838">r</span><span class="op" id="6944839">.</span><span class="ident" id="6944840">NormFloat64</span><span class="op" id="6944851">(</span><span class="op" id="6944852">)</span><span class="op" id="6944853">*</span><span class="ident" id="6944854">stddev</span>&nbsp;<span class="op" id="6944861">+</span>&nbsp;<span class="ident" id="6944863">mean</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944872">return</span>&nbsp;<span class="ident" id="6944879">samples</span><br>
<span class="lineno"></span><span class="op" id="6944887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="6944890">func</span>&nbsp;<span class="ident" id="6944895">testNormalDistribution</span><span class="op" id="6944917">(</span><span class="ident" id="6944918">t</span>&nbsp;<span class="op" id="6944920">*</span><span class="ident" id="6944921">testing</span><span class="op" id="6944928">.</span><span class="ident" id="6944929">T</span><span class="op" id="6944930">,</span>&nbsp;<span class="ident" id="6944932">nsamples</span>&nbsp;<span class="builtintype" id="6944941">int</span><span class="op" id="6944944">,</span>&nbsp;<span class="ident" id="6944946">mean</span><span class="op" id="6944950">,</span>&nbsp;<span class="ident" id="6944952">stddev</span>&nbsp;<span class="builtintype" id="6944959">float64</span><span class="op" id="6944966">,</span>&nbsp;<span class="ident" id="6944968">seed</span>&nbsp;<span class="ident" id="6944973">int64</span><span class="op" id="6944978">)</span>&nbsp;<span class="op" id="6944980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6944983">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;mean=%v&nbsp;stddev=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;mean,&nbsp;stddev,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945080">samples</span>&nbsp;<span class="op" id="6945088">:=</span>&nbsp;<span class="ident" id="6945091">generateNormalSamples</span><span class="op" id="6945112">(</span><span class="ident" id="6945113">nsamples</span><span class="op" id="6945121">,</span>&nbsp;<span class="ident" id="6945123">mean</span><span class="op" id="6945127">,</span>&nbsp;<span class="ident" id="6945129">stddev</span><span class="op" id="6945135">,</span>&nbsp;<span class="ident" id="6945137">seed</span><span class="op" id="6945141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945144">errorScale</span>&nbsp;<span class="op" id="6945155">:=</span>&nbsp;<span class="ident" id="6945158">max</span><span class="op" id="6945161">(</span><span class="num" id="6945162">1.0</span><span class="op" id="6945165">,</span>&nbsp;<span class="ident" id="6945167">stddev</span><span class="op" id="6945173">)</span>&nbsp;<span class="comment" id="6945175">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;stddev</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945204">expected</span>&nbsp;<span class="op" id="6945213">:=</span>&nbsp;<span class="op" id="6945216">&amp;</span><span class="ident" id="6945217">statsResults</span><span class="op" id="6945229">{</span><span class="ident" id="6945230">mean</span><span class="op" id="6945234">,</span>&nbsp;<span class="ident" id="6945236">stddev</span><span class="op" id="6945242">,</span>&nbsp;<span class="num" id="6945244">0.10</span>&nbsp;<span class="op" id="6945249">*</span>&nbsp;<span class="ident" id="6945251">errorScale</span><span class="op" id="6945261">,</span>&nbsp;<span class="num" id="6945263">0.08</span>&nbsp;<span class="op" id="6945268">*</span>&nbsp;<span class="ident" id="6945270">errorScale</span><span class="op" id="6945280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6945284">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945353">checkSampleDistribution</span><span class="op" id="6945376">(</span><span class="ident" id="6945377">t</span><span class="op" id="6945378">,</span>&nbsp;<span class="ident" id="6945380">samples</span><span class="op" id="6945387">,</span>&nbsp;<span class="ident" id="6945389">expected</span><span class="op" id="6945397">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6945401">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945476">checkSampleSliceDistributions</span><span class="op" id="6945505">(</span><span class="ident" id="6945506">t</span><span class="op" id="6945507">,</span>&nbsp;<span class="ident" id="6945509">samples</span><span class="op" id="6945516">,</span>&nbsp;<span class="num" id="6945518">2</span><span class="op" id="6945519">,</span>&nbsp;<span class="ident" id="6945521">expected</span><span class="op" id="6945529">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6945533">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945607">checkSampleSliceDistributions</span><span class="op" id="6945636">(</span><span class="ident" id="6945637">t</span><span class="op" id="6945638">,</span>&nbsp;<span class="ident" id="6945640">samples</span><span class="op" id="6945647">,</span>&nbsp;<span class="num" id="6945649">7</span><span class="op" id="6945650">,</span>&nbsp;<span class="ident" id="6945652">expected</span><span class="op" id="6945660">)</span><br>
<span class="lineno">120</span><span class="op" id="6945662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6945665">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6945682">func</span>&nbsp;<span class="ident" id="6945687">TestStandardNormalValues</span><span class="op" id="6945711">(</span><span class="ident" id="6945712">t</span>&nbsp;<span class="op" id="6945714">*</span><span class="ident" id="6945715">testing</span><span class="op" id="6945722">.</span><span class="ident" id="6945723">T</span><span class="op" id="6945724">)</span>&nbsp;<span class="op" id="6945726">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945729">for</span>&nbsp;<span class="ident" id="6945733">_</span><span class="op" id="6945734">,</span>&nbsp;<span class="ident" id="6945736">seed</span>&nbsp;<span class="op" id="6945741">:=</span>&nbsp;<span class="keyword" id="6945744">range</span>&nbsp;<span class="ident" id="6945750">testSeeds</span>&nbsp;<span class="op" id="6945760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945764">testNormalDistribution</span><span class="op" id="6945786">(</span><span class="ident" id="6945787">t</span><span class="op" id="6945788">,</span>&nbsp;<span class="ident" id="6945790">numTestSamples</span><span class="op" id="6945804">,</span>&nbsp;<span class="num" id="6945806">0</span><span class="op" id="6945807">,</span>&nbsp;<span class="num" id="6945809">1</span><span class="op" id="6945810">,</span>&nbsp;<span class="ident" id="6945812">seed</span><span class="op" id="6945816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945819">}</span><br>
<span class="lineno"></span><span class="op" id="6945821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="6945824">func</span>&nbsp;<span class="ident" id="6945829">TestNonStandardNormalValues</span><span class="op" id="6945856">(</span><span class="ident" id="6945857">t</span>&nbsp;<span class="op" id="6945859">*</span><span class="ident" id="6945860">testing</span><span class="op" id="6945867">.</span><span class="ident" id="6945868">T</span><span class="op" id="6945869">)</span>&nbsp;<span class="op" id="6945871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945874">sdmax</span>&nbsp;<span class="op" id="6945880">:=</span>&nbsp;<span class="num" id="6945883">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945891">mmax</span>&nbsp;<span class="op" id="6945896">:=</span>&nbsp;<span class="num" id="6945899">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945907">if</span>&nbsp;<span class="ident" id="6945910">testing</span><span class="op" id="6945917">.</span><span class="ident" id="6945918">Short</span><span class="op" id="6945923">(</span><span class="op" id="6945924">)</span>&nbsp;<span class="op" id="6945926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945930">sdmax</span>&nbsp;<span class="op" id="6945936">=</span>&nbsp;<span class="num" id="6945938">5</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945942">mmax</span>&nbsp;<span class="op" id="6945947">=</span>&nbsp;<span class="num" id="6945949">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945955">for</span>&nbsp;<span class="ident" id="6945959">sd</span>&nbsp;<span class="op" id="6945962">:=</span>&nbsp;<span class="num" id="6945965">0.5</span><span class="op" id="6945968">;</span>&nbsp;<span class="ident" id="6945970">sd</span>&nbsp;<span class="op" id="6945973">&lt;</span>&nbsp;<span class="ident" id="6945975">sdmax</span><span class="op" id="6945980">;</span>&nbsp;<span class="ident" id="6945982">sd</span>&nbsp;<span class="op" id="6945985">*=</span>&nbsp;<span class="num" id="6945988">2</span>&nbsp;<span class="op" id="6945990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945994">for</span>&nbsp;<span class="ident" id="6945998">m</span>&nbsp;<span class="op" id="6946000">:=</span>&nbsp;<span class="num" id="6946003">0.5</span><span class="op" id="6946006">;</span>&nbsp;<span class="ident" id="6946008">m</span>&nbsp;<span class="op" id="6946010">&lt;</span>&nbsp;<span class="ident" id="6946012">mmax</span><span class="op" id="6946016">;</span>&nbsp;<span class="ident" id="6946018">m</span>&nbsp;<span class="op" id="6946020">*=</span>&nbsp;<span class="num" id="6946023">2</span>&nbsp;<span class="op" id="6946025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6946030">for</span>&nbsp;<span class="ident" id="6946034">_</span><span class="op" id="6946035">,</span>&nbsp;<span class="ident" id="6946037">seed</span>&nbsp;<span class="op" id="6946042">:=</span>&nbsp;<span class="keyword" id="6946045">range</span>&nbsp;<span class="ident" id="6946051">testSeeds</span>&nbsp;<span class="op" id="6946061">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946067">testNormalDistribution</span><span class="op" id="6946089">(</span><span class="ident" id="6946090">t</span><span class="op" id="6946091">,</span>&nbsp;<span class="ident" id="6946093">numTestSamples</span><span class="op" id="6946107">,</span>&nbsp;<span class="ident" id="6946109">m</span><span class="op" id="6946110">,</span>&nbsp;<span class="ident" id="6946112">sd</span><span class="op" id="6946114">,</span>&nbsp;<span class="ident" id="6946116">seed</span><span class="op" id="6946120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6946126">if</span>&nbsp;<span class="ident" id="6946129">testing</span><span class="op" id="6946136">.</span><span class="ident" id="6946137">Short</span><span class="op" id="6946142">(</span><span class="op" id="6946143">)</span>&nbsp;<span class="op" id="6946145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6946152">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946167">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946174">}</span><br>
<span class="lineno"></span><span class="op" id="6946176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6946179">//</span><br>
<span class="lineno">150</span><span class="comment" id="6946182">//&nbsp;Exponential&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="6946216">//</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6946220">func</span>&nbsp;<span class="ident" id="6946225">generateExponentialSamples</span><span class="op" id="6946251">(</span><span class="ident" id="6946252">nsamples</span>&nbsp;<span class="builtintype" id="6946261">int</span><span class="op" id="6946264">,</span>&nbsp;<span class="ident" id="6946266">rate</span>&nbsp;<span class="builtintype" id="6946271">float64</span><span class="op" id="6946278">,</span>&nbsp;<span class="ident" id="6946280">seed</span>&nbsp;<span class="ident" id="6946285">int64</span><span class="op" id="6946290">)</span>&nbsp;<span class="op" id="6946292">[</span><span class="op" id="6946293">]</span><span class="builtintype" id="6946294">float64</span>&nbsp;<span class="op" id="6946302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946305">r</span>&nbsp;<span class="op" id="6946307">:=</span>&nbsp;<span class="ident" id="6946310">New</span><span class="op" id="6946313">(</span><span class="ident" id="6946314">NewSource</span><span class="op" id="6946323">(</span><span class="ident" id="6946324">seed</span><span class="op" id="6946328">)</span><span class="op" id="6946329">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946332">samples</span>&nbsp;<span class="op" id="6946340">:=</span>&nbsp;<span class="builtinfunc" id="6946343">make</span><span class="op" id="6946347">(</span><span class="op" id="6946348">[</span><span class="op" id="6946349">]</span><span class="builtintype" id="6946350">float64</span><span class="op" id="6946357">,</span>&nbsp;<span class="ident" id="6946359">nsamples</span><span class="op" id="6946367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6946370">for</span>&nbsp;<span class="ident" id="6946374">i</span>&nbsp;<span class="op" id="6946376">:=</span>&nbsp;<span class="keyword" id="6946379">range</span>&nbsp;<span class="ident" id="6946385">samples</span>&nbsp;<span class="op" id="6946393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946397">samples</span><span class="op" id="6946404">[</span><span class="ident" id="6946405">i</span><span class="op" id="6946406">]</span>&nbsp;<span class="op" id="6946408">=</span>&nbsp;<span class="ident" id="6946410">r</span><span class="op" id="6946411">.</span><span class="ident" id="6946412">ExpFloat64</span><span class="op" id="6946422">(</span><span class="op" id="6946423">)</span>&nbsp;<span class="op" id="6946425">/</span>&nbsp;<span class="ident" id="6946427">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6946436">return</span>&nbsp;<span class="ident" id="6946443">samples</span><br>
<span class="lineno">160</span><span class="op" id="6946451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6946454">func</span>&nbsp;<span class="ident" id="6946459">testExponentialDistribution</span><span class="op" id="6946486">(</span><span class="ident" id="6946487">t</span>&nbsp;<span class="op" id="6946489">*</span><span class="ident" id="6946490">testing</span><span class="op" id="6946497">.</span><span class="ident" id="6946498">T</span><span class="op" id="6946499">,</span>&nbsp;<span class="ident" id="6946501">nsamples</span>&nbsp;<span class="builtintype" id="6946510">int</span><span class="op" id="6946513">,</span>&nbsp;<span class="ident" id="6946515">rate</span>&nbsp;<span class="builtintype" id="6946520">float64</span><span class="op" id="6946527">,</span>&nbsp;<span class="ident" id="6946529">seed</span>&nbsp;<span class="ident" id="6946534">int64</span><span class="op" id="6946539">)</span>&nbsp;<span class="op" id="6946541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6946544">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;rate=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;rate,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946623">mean</span>&nbsp;<span class="op" id="6946628">:=</span>&nbsp;<span class="num" id="6946631">1</span>&nbsp;<span class="op" id="6946633">/</span>&nbsp;<span class="ident" id="6946635">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946641">stddev</span>&nbsp;<span class="op" id="6946648">:=</span>&nbsp;<span class="ident" id="6946651">mean</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946658">samples</span>&nbsp;<span class="op" id="6946666">:=</span>&nbsp;<span class="ident" id="6946669">generateExponentialSamples</span><span class="op" id="6946695">(</span><span class="ident" id="6946696">nsamples</span><span class="op" id="6946704">,</span>&nbsp;<span class="ident" id="6946706">rate</span><span class="op" id="6946710">,</span>&nbsp;<span class="ident" id="6946712">seed</span><span class="op" id="6946716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946719">errorScale</span>&nbsp;<span class="op" id="6946730">:=</span>&nbsp;<span class="ident" id="6946733">max</span><span class="op" id="6946736">(</span><span class="num" id="6946737">1.0</span><span class="op" id="6946740">,</span>&nbsp;<span class="num" id="6946742">1</span><span class="op" id="6946743">/</span><span class="ident" id="6946744">rate</span><span class="op" id="6946748">)</span>&nbsp;<span class="comment" id="6946750">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;rate</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946796">expected</span>&nbsp;<span class="op" id="6946805">:=</span>&nbsp;<span class="op" id="6946808">&amp;</span><span class="ident" id="6946809">statsResults</span><span class="op" id="6946821">{</span><span class="ident" id="6946822">mean</span><span class="op" id="6946826">,</span>&nbsp;<span class="ident" id="6946828">stddev</span><span class="op" id="6946834">,</span>&nbsp;<span class="num" id="6946836">0.10</span>&nbsp;<span class="op" id="6946841">*</span>&nbsp;<span class="ident" id="6946843">errorScale</span><span class="op" id="6946853">,</span>&nbsp;<span class="num" id="6946855">0.20</span>&nbsp;<span class="op" id="6946860">*</span>&nbsp;<span class="ident" id="6946862">errorScale</span><span class="op" id="6946872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6946876">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946945">checkSampleDistribution</span><span class="op" id="6946968">(</span><span class="ident" id="6946969">t</span><span class="op" id="6946970">,</span>&nbsp;<span class="ident" id="6946972">samples</span><span class="op" id="6946979">,</span>&nbsp;<span class="ident" id="6946981">expected</span><span class="op" id="6946989">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6946993">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947068">checkSampleSliceDistributions</span><span class="op" id="6947097">(</span><span class="ident" id="6947098">t</span><span class="op" id="6947099">,</span>&nbsp;<span class="ident" id="6947101">samples</span><span class="op" id="6947108">,</span>&nbsp;<span class="num" id="6947110">2</span><span class="op" id="6947111">,</span>&nbsp;<span class="ident" id="6947113">expected</span><span class="op" id="6947121">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6947125">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947199">checkSampleSliceDistributions</span><span class="op" id="6947228">(</span><span class="ident" id="6947229">t</span><span class="op" id="6947230">,</span>&nbsp;<span class="ident" id="6947232">samples</span><span class="op" id="6947239">,</span>&nbsp;<span class="num" id="6947241">7</span><span class="op" id="6947242">,</span>&nbsp;<span class="ident" id="6947244">expected</span><span class="op" id="6947252">)</span><br>
<span class="lineno">180</span><span class="op" id="6947254">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6947257">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6947274">func</span>&nbsp;<span class="ident" id="6947279">TestStandardExponentialValues</span><span class="op" id="6947308">(</span><span class="ident" id="6947309">t</span>&nbsp;<span class="op" id="6947311">*</span><span class="ident" id="6947312">testing</span><span class="op" id="6947319">.</span><span class="ident" id="6947320">T</span><span class="op" id="6947321">)</span>&nbsp;<span class="op" id="6947323">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947326">for</span>&nbsp;<span class="ident" id="6947330">_</span><span class="op" id="6947331">,</span>&nbsp;<span class="ident" id="6947333">seed</span>&nbsp;<span class="op" id="6947338">:=</span>&nbsp;<span class="keyword" id="6947341">range</span>&nbsp;<span class="ident" id="6947347">testSeeds</span>&nbsp;<span class="op" id="6947357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947361">testExponentialDistribution</span><span class="op" id="6947388">(</span><span class="ident" id="6947389">t</span><span class="op" id="6947390">,</span>&nbsp;<span class="ident" id="6947392">numTestSamples</span><span class="op" id="6947406">,</span>&nbsp;<span class="num" id="6947408">1</span><span class="op" id="6947409">,</span>&nbsp;<span class="ident" id="6947411">seed</span><span class="op" id="6947415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947418">}</span><br>
<span class="lineno"></span><span class="op" id="6947420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="6947423">func</span>&nbsp;<span class="ident" id="6947428">TestNonStandardExponentialValues</span><span class="op" id="6947460">(</span><span class="ident" id="6947461">t</span>&nbsp;<span class="op" id="6947463">*</span><span class="ident" id="6947464">testing</span><span class="op" id="6947471">.</span><span class="ident" id="6947472">T</span><span class="op" id="6947473">)</span>&nbsp;<span class="op" id="6947475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947478">for</span>&nbsp;<span class="ident" id="6947482">rate</span>&nbsp;<span class="op" id="6947487">:=</span>&nbsp;<span class="num" id="6947490">0.05</span><span class="op" id="6947494">;</span>&nbsp;<span class="ident" id="6947496">rate</span>&nbsp;<span class="op" id="6947501">&lt;</span>&nbsp;<span class="num" id="6947503">10</span><span class="op" id="6947505">;</span>&nbsp;<span class="ident" id="6947507">rate</span>&nbsp;<span class="op" id="6947512">*=</span>&nbsp;<span class="num" id="6947515">2</span>&nbsp;<span class="op" id="6947517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947521">for</span>&nbsp;<span class="ident" id="6947525">_</span><span class="op" id="6947526">,</span>&nbsp;<span class="ident" id="6947528">seed</span>&nbsp;<span class="op" id="6947533">:=</span>&nbsp;<span class="keyword" id="6947536">range</span>&nbsp;<span class="ident" id="6947542">testSeeds</span>&nbsp;<span class="op" id="6947552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947557">testExponentialDistribution</span><span class="op" id="6947584">(</span><span class="ident" id="6947585">t</span><span class="op" id="6947586">,</span>&nbsp;<span class="ident" id="6947588">numTestSamples</span><span class="op" id="6947602">,</span>&nbsp;<span class="ident" id="6947604">rate</span><span class="op" id="6947608">,</span>&nbsp;<span class="ident" id="6947610">seed</span><span class="op" id="6947614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947619">if</span>&nbsp;<span class="ident" id="6947622">testing</span><span class="op" id="6947629">.</span><span class="ident" id="6947630">Short</span><span class="op" id="6947635">(</span><span class="op" id="6947636">)</span>&nbsp;<span class="op" id="6947638">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947644">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947660">}</span><br>
<span class="lineno"></span><span class="op" id="6947662">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="comment" id="6947665">//</span><br>
<span class="lineno"></span><span class="comment" id="6947668">//&nbsp;Table&nbsp;generation&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="6947694">//</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="6947698">func</span>&nbsp;<span class="ident" id="6947703">initNorm</span><span class="op" id="6947711">(</span><span class="op" id="6947712">)</span>&nbsp;<span class="op" id="6947714">(</span><span class="ident" id="6947715">testKn</span>&nbsp;<span class="op" id="6947722">[</span><span class="op" id="6947723">]</span><span class="builtintype" id="6947724">uint32</span><span class="op" id="6947730">,</span>&nbsp;<span class="ident" id="6947732">testWn</span><span class="op" id="6947738">,</span>&nbsp;<span class="ident" id="6947740">testFn</span>&nbsp;<span class="op" id="6947747">[</span><span class="op" id="6947748">]</span><span class="builtintype" id="6947749">float32</span><span class="op" id="6947756">)</span>&nbsp;<span class="op" id="6947758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947761">const</span>&nbsp;<span class="ident" id="6947767">m1</span>&nbsp;<span class="op" id="6947770">=</span>&nbsp;<span class="num" id="6947772">1</span>&nbsp;<span class="op" id="6947774">&lt;&lt;</span>&nbsp;<span class="num" id="6947777">31</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947781">var</span>&nbsp;<span class="op" id="6947785">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947789">dn</span>&nbsp;<span class="builtintype" id="6947792">float64</span>&nbsp;<span class="op" id="6947800">=</span>&nbsp;<span class="ident" id="6947802">rn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947807">tn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6947818">=</span>&nbsp;<span class="ident" id="6947820">dn</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947825">vn</span>&nbsp;<span class="builtintype" id="6947828">float64</span>&nbsp;<span class="op" id="6947836">=</span>&nbsp;<span class="num" id="6947838">9.91256303526217e-3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947859">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947863">testKn</span>&nbsp;<span class="op" id="6947870">=</span>&nbsp;<span class="builtinfunc" id="6947872">make</span><span class="op" id="6947876">(</span><span class="op" id="6947877">[</span><span class="op" id="6947878">]</span><span class="builtintype" id="6947879">uint32</span><span class="op" id="6947885">,</span>&nbsp;<span class="num" id="6947887">128</span><span class="op" id="6947890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947893">testWn</span>&nbsp;<span class="op" id="6947900">=</span>&nbsp;<span class="builtinfunc" id="6947902">make</span><span class="op" id="6947906">(</span><span class="op" id="6947907">[</span><span class="op" id="6947908">]</span><span class="builtintype" id="6947909">float32</span><span class="op" id="6947916">,</span>&nbsp;<span class="num" id="6947918">128</span><span class="op" id="6947921">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947924">testFn</span>&nbsp;<span class="op" id="6947931">=</span>&nbsp;<span class="builtinfunc" id="6947933">make</span><span class="op" id="6947937">(</span><span class="op" id="6947938">[</span><span class="op" id="6947939">]</span><span class="builtintype" id="6947940">float32</span><span class="op" id="6947947">,</span>&nbsp;<span class="num" id="6947949">128</span><span class="op" id="6947952">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947956">q</span>&nbsp;<span class="op" id="6947958">:=</span>&nbsp;<span class="ident" id="6947961">vn</span>&nbsp;<span class="op" id="6947964">/</span>&nbsp;<span class="ident" id="6947966">math</span><span class="op" id="6947970">.</span><span class="ident" id="6947971">Exp</span><span class="op" id="6947974">(</span><span class="op" id="6947975">-</span><span class="num" id="6947976">0.5</span><span class="op" id="6947979">*</span><span class="ident" id="6947980">dn</span><span class="op" id="6947982">*</span><span class="ident" id="6947983">dn</span><span class="op" id="6947985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947988">testKn</span><span class="op" id="6947994">[</span><span class="num" id="6947995">0</span><span class="op" id="6947996">]</span>&nbsp;<span class="op" id="6947998">=</span>&nbsp;<span class="builtintype" id="6948000">uint32</span><span class="op" id="6948006">(</span><span class="op" id="6948007">(</span><span class="ident" id="6948008">dn</span>&nbsp;<span class="op" id="6948011">/</span>&nbsp;<span class="ident" id="6948013">q</span><span class="op" id="6948014">)</span>&nbsp;<span class="op" id="6948016">*</span>&nbsp;<span class="ident" id="6948018">m1</span><span class="op" id="6948020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948023">testKn</span><span class="op" id="6948029">[</span><span class="num" id="6948030">1</span><span class="op" id="6948031">]</span>&nbsp;<span class="op" id="6948033">=</span>&nbsp;<span class="num" id="6948035">0</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948038">testWn</span><span class="op" id="6948044">[</span><span class="num" id="6948045">0</span><span class="op" id="6948046">]</span>&nbsp;<span class="op" id="6948048">=</span>&nbsp;<span class="builtintype" id="6948050">float32</span><span class="op" id="6948057">(</span><span class="ident" id="6948058">q</span>&nbsp;<span class="op" id="6948060">/</span>&nbsp;<span class="ident" id="6948062">m1</span><span class="op" id="6948064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948067">testWn</span><span class="op" id="6948073">[</span><span class="num" id="6948074">127</span><span class="op" id="6948077">]</span>&nbsp;<span class="op" id="6948079">=</span>&nbsp;<span class="builtintype" id="6948081">float32</span><span class="op" id="6948088">(</span><span class="ident" id="6948089">dn</span>&nbsp;<span class="op" id="6948092">/</span>&nbsp;<span class="ident" id="6948094">m1</span><span class="op" id="6948096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948099">testFn</span><span class="op" id="6948105">[</span><span class="num" id="6948106">0</span><span class="op" id="6948107">]</span>&nbsp;<span class="op" id="6948109">=</span>&nbsp;<span class="num" id="6948111">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948116">testFn</span><span class="op" id="6948122">[</span><span class="num" id="6948123">127</span><span class="op" id="6948126">]</span>&nbsp;<span class="op" id="6948128">=</span>&nbsp;<span class="builtintype" id="6948130">float32</span><span class="op" id="6948137">(</span><span class="ident" id="6948138">math</span><span class="op" id="6948142">.</span><span class="ident" id="6948143">Exp</span><span class="op" id="6948146">(</span><span class="op" id="6948147">-</span><span class="num" id="6948148">0.5</span>&nbsp;<span class="op" id="6948152">*</span>&nbsp;<span class="ident" id="6948154">dn</span>&nbsp;<span class="op" id="6948157">*</span>&nbsp;<span class="ident" id="6948159">dn</span><span class="op" id="6948161">)</span><span class="op" id="6948162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948165">for</span>&nbsp;<span class="ident" id="6948169">i</span>&nbsp;<span class="op" id="6948171">:=</span>&nbsp;<span class="num" id="6948174">126</span><span class="op" id="6948177">;</span>&nbsp;<span class="ident" id="6948179">i</span>&nbsp;<span class="op" id="6948181">&gt;=</span>&nbsp;<span class="num" id="6948184">1</span><span class="op" id="6948185">;</span>&nbsp;<span class="ident" id="6948187">i</span><span class="op" id="6948188">--</span>&nbsp;<span class="op" id="6948191">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948195">dn</span>&nbsp;<span class="op" id="6948198">=</span>&nbsp;<span class="ident" id="6948200">math</span><span class="op" id="6948204">.</span><span class="ident" id="6948205">Sqrt</span><span class="op" id="6948209">(</span><span class="op" id="6948210">-</span><span class="num" id="6948211">2.0</span>&nbsp;<span class="op" id="6948215">*</span>&nbsp;<span class="ident" id="6948217">math</span><span class="op" id="6948221">.</span><span class="ident" id="6948222">Log</span><span class="op" id="6948225">(</span><span class="ident" id="6948226">vn</span><span class="op" id="6948228">/</span><span class="ident" id="6948229">dn</span><span class="op" id="6948231">+</span><span class="ident" id="6948232">math</span><span class="op" id="6948236">.</span><span class="ident" id="6948237">Exp</span><span class="op" id="6948240">(</span><span class="op" id="6948241">-</span><span class="num" id="6948242">0.5</span><span class="op" id="6948245">*</span><span class="ident" id="6948246">dn</span><span class="op" id="6948248">*</span><span class="ident" id="6948249">dn</span><span class="op" id="6948251">)</span><span class="op" id="6948252">)</span><span class="op" id="6948253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948257">testKn</span><span class="op" id="6948263">[</span><span class="ident" id="6948264">i</span><span class="op" id="6948265">+</span><span class="num" id="6948266">1</span><span class="op" id="6948267">]</span>&nbsp;<span class="op" id="6948269">=</span>&nbsp;<span class="builtintype" id="6948271">uint32</span><span class="op" id="6948277">(</span><span class="op" id="6948278">(</span><span class="ident" id="6948279">dn</span>&nbsp;<span class="op" id="6948282">/</span>&nbsp;<span class="ident" id="6948284">tn</span><span class="op" id="6948286">)</span>&nbsp;<span class="op" id="6948288">*</span>&nbsp;<span class="ident" id="6948290">m1</span><span class="op" id="6948292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948296">tn</span>&nbsp;<span class="op" id="6948299">=</span>&nbsp;<span class="ident" id="6948301">dn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948306">testFn</span><span class="op" id="6948312">[</span><span class="ident" id="6948313">i</span><span class="op" id="6948314">]</span>&nbsp;<span class="op" id="6948316">=</span>&nbsp;<span class="builtintype" id="6948318">float32</span><span class="op" id="6948325">(</span><span class="ident" id="6948326">math</span><span class="op" id="6948330">.</span><span class="ident" id="6948331">Exp</span><span class="op" id="6948334">(</span><span class="op" id="6948335">-</span><span class="num" id="6948336">0.5</span>&nbsp;<span class="op" id="6948340">*</span>&nbsp;<span class="ident" id="6948342">dn</span>&nbsp;<span class="op" id="6948345">*</span>&nbsp;<span class="ident" id="6948347">dn</span><span class="op" id="6948349">)</span><span class="op" id="6948350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948354">testWn</span><span class="op" id="6948360">[</span><span class="ident" id="6948361">i</span><span class="op" id="6948362">]</span>&nbsp;<span class="op" id="6948364">=</span>&nbsp;<span class="builtintype" id="6948366">float32</span><span class="op" id="6948373">(</span><span class="ident" id="6948374">dn</span>&nbsp;<span class="op" id="6948377">/</span>&nbsp;<span class="ident" id="6948379">m1</span><span class="op" id="6948381">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948387">return</span><br>
<span class="lineno"></span><span class="op" id="6948394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6948397">func</span>&nbsp;<span class="ident" id="6948402">initExp</span><span class="op" id="6948409">(</span><span class="op" id="6948410">)</span>&nbsp;<span class="op" id="6948412">(</span><span class="ident" id="6948413">testKe</span>&nbsp;<span class="op" id="6948420">[</span><span class="op" id="6948421">]</span><span class="builtintype" id="6948422">uint32</span><span class="op" id="6948428">,</span>&nbsp;<span class="ident" id="6948430">testWe</span><span class="op" id="6948436">,</span>&nbsp;<span class="ident" id="6948438">testFe</span>&nbsp;<span class="op" id="6948445">[</span><span class="op" id="6948446">]</span><span class="builtintype" id="6948447">float32</span><span class="op" id="6948454">)</span>&nbsp;<span class="op" id="6948456">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948459">const</span>&nbsp;<span class="ident" id="6948465">m2</span>&nbsp;<span class="op" id="6948468">=</span>&nbsp;<span class="num" id="6948470">1</span>&nbsp;<span class="op" id="6948472">&lt;&lt;</span>&nbsp;<span class="num" id="6948475">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948479">var</span>&nbsp;<span class="op" id="6948483">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948487">de</span>&nbsp;<span class="builtintype" id="6948490">float64</span>&nbsp;<span class="op" id="6948498">=</span>&nbsp;<span class="ident" id="6948500">re</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948505">te</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948516">=</span>&nbsp;<span class="ident" id="6948518">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948523">ve</span>&nbsp;<span class="builtintype" id="6948526">float64</span>&nbsp;<span class="op" id="6948534">=</span>&nbsp;<span class="num" id="6948536">3.9496598225815571993e-3</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948562">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948566">testKe</span>&nbsp;<span class="op" id="6948573">=</span>&nbsp;<span class="builtinfunc" id="6948575">make</span><span class="op" id="6948579">(</span><span class="op" id="6948580">[</span><span class="op" id="6948581">]</span><span class="builtintype" id="6948582">uint32</span><span class="op" id="6948588">,</span>&nbsp;<span class="num" id="6948590">256</span><span class="op" id="6948593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948596">testWe</span>&nbsp;<span class="op" id="6948603">=</span>&nbsp;<span class="builtinfunc" id="6948605">make</span><span class="op" id="6948609">(</span><span class="op" id="6948610">[</span><span class="op" id="6948611">]</span><span class="builtintype" id="6948612">float32</span><span class="op" id="6948619">,</span>&nbsp;<span class="num" id="6948621">256</span><span class="op" id="6948624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948627">testFe</span>&nbsp;<span class="op" id="6948634">=</span>&nbsp;<span class="builtinfunc" id="6948636">make</span><span class="op" id="6948640">(</span><span class="op" id="6948641">[</span><span class="op" id="6948642">]</span><span class="builtintype" id="6948643">float32</span><span class="op" id="6948650">,</span>&nbsp;<span class="num" id="6948652">256</span><span class="op" id="6948655">)</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948659">q</span>&nbsp;<span class="op" id="6948661">:=</span>&nbsp;<span class="ident" id="6948664">ve</span>&nbsp;<span class="op" id="6948667">/</span>&nbsp;<span class="ident" id="6948669">math</span><span class="op" id="6948673">.</span><span class="ident" id="6948674">Exp</span><span class="op" id="6948677">(</span><span class="op" id="6948678">-</span><span class="ident" id="6948679">de</span><span class="op" id="6948681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948684">testKe</span><span class="op" id="6948690">[</span><span class="num" id="6948691">0</span><span class="op" id="6948692">]</span>&nbsp;<span class="op" id="6948694">=</span>&nbsp;<span class="builtintype" id="6948696">uint32</span><span class="op" id="6948702">(</span><span class="op" id="6948703">(</span><span class="ident" id="6948704">de</span>&nbsp;<span class="op" id="6948707">/</span>&nbsp;<span class="ident" id="6948709">q</span><span class="op" id="6948710">)</span>&nbsp;<span class="op" id="6948712">*</span>&nbsp;<span class="ident" id="6948714">m2</span><span class="op" id="6948716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948719">testKe</span><span class="op" id="6948725">[</span><span class="num" id="6948726">1</span><span class="op" id="6948727">]</span>&nbsp;<span class="op" id="6948729">=</span>&nbsp;<span class="num" id="6948731">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948734">testWe</span><span class="op" id="6948740">[</span><span class="num" id="6948741">0</span><span class="op" id="6948742">]</span>&nbsp;<span class="op" id="6948744">=</span>&nbsp;<span class="builtintype" id="6948746">float32</span><span class="op" id="6948753">(</span><span class="ident" id="6948754">q</span>&nbsp;<span class="op" id="6948756">/</span>&nbsp;<span class="ident" id="6948758">m2</span><span class="op" id="6948760">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948763">testWe</span><span class="op" id="6948769">[</span><span class="num" id="6948770">255</span><span class="op" id="6948773">]</span>&nbsp;<span class="op" id="6948775">=</span>&nbsp;<span class="builtintype" id="6948777">float32</span><span class="op" id="6948784">(</span><span class="ident" id="6948785">de</span>&nbsp;<span class="op" id="6948788">/</span>&nbsp;<span class="ident" id="6948790">m2</span><span class="op" id="6948792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948795">testFe</span><span class="op" id="6948801">[</span><span class="num" id="6948802">0</span><span class="op" id="6948803">]</span>&nbsp;<span class="op" id="6948805">=</span>&nbsp;<span class="num" id="6948807">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948812">testFe</span><span class="op" id="6948818">[</span><span class="num" id="6948819">255</span><span class="op" id="6948822">]</span>&nbsp;<span class="op" id="6948824">=</span>&nbsp;<span class="builtintype" id="6948826">float32</span><span class="op" id="6948833">(</span><span class="ident" id="6948834">math</span><span class="op" id="6948838">.</span><span class="ident" id="6948839">Exp</span><span class="op" id="6948842">(</span><span class="op" id="6948843">-</span><span class="ident" id="6948844">de</span><span class="op" id="6948846">)</span><span class="op" id="6948847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948850">for</span>&nbsp;<span class="ident" id="6948854">i</span>&nbsp;<span class="op" id="6948856">:=</span>&nbsp;<span class="num" id="6948859">254</span><span class="op" id="6948862">;</span>&nbsp;<span class="ident" id="6948864">i</span>&nbsp;<span class="op" id="6948866">&gt;=</span>&nbsp;<span class="num" id="6948869">1</span><span class="op" id="6948870">;</span>&nbsp;<span class="ident" id="6948872">i</span><span class="op" id="6948873">--</span>&nbsp;<span class="op" id="6948876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948880">de</span>&nbsp;<span class="op" id="6948883">=</span>&nbsp;<span class="op" id="6948885">-</span><span class="ident" id="6948886">math</span><span class="op" id="6948890">.</span><span class="ident" id="6948891">Log</span><span class="op" id="6948894">(</span><span class="ident" id="6948895">ve</span><span class="op" id="6948897">/</span><span class="ident" id="6948898">de</span>&nbsp;<span class="op" id="6948901">+</span>&nbsp;<span class="ident" id="6948903">math</span><span class="op" id="6948907">.</span><span class="ident" id="6948908">Exp</span><span class="op" id="6948911">(</span><span class="op" id="6948912">-</span><span class="ident" id="6948913">de</span><span class="op" id="6948915">)</span><span class="op" id="6948916">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948920">testKe</span><span class="op" id="6948926">[</span><span class="ident" id="6948927">i</span><span class="op" id="6948928">+</span><span class="num" id="6948929">1</span><span class="op" id="6948930">]</span>&nbsp;<span class="op" id="6948932">=</span>&nbsp;<span class="builtintype" id="6948934">uint32</span><span class="op" id="6948940">(</span><span class="op" id="6948941">(</span><span class="ident" id="6948942">de</span>&nbsp;<span class="op" id="6948945">/</span>&nbsp;<span class="ident" id="6948947">te</span><span class="op" id="6948949">)</span>&nbsp;<span class="op" id="6948951">*</span>&nbsp;<span class="ident" id="6948953">m2</span><span class="op" id="6948955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948959">te</span>&nbsp;<span class="op" id="6948962">=</span>&nbsp;<span class="ident" id="6948964">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948969">testFe</span><span class="op" id="6948975">[</span><span class="ident" id="6948976">i</span><span class="op" id="6948977">]</span>&nbsp;<span class="op" id="6948979">=</span>&nbsp;<span class="builtintype" id="6948981">float32</span><span class="op" id="6948988">(</span><span class="ident" id="6948989">math</span><span class="op" id="6948993">.</span><span class="ident" id="6948994">Exp</span><span class="op" id="6948997">(</span><span class="op" id="6948998">-</span><span class="ident" id="6948999">de</span><span class="op" id="6949001">)</span><span class="op" id="6949002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949006">testWe</span><span class="op" id="6949012">[</span><span class="ident" id="6949013">i</span><span class="op" id="6949014">]</span>&nbsp;<span class="op" id="6949016">=</span>&nbsp;<span class="builtintype" id="6949018">float32</span><span class="op" id="6949025">(</span><span class="ident" id="6949026">de</span>&nbsp;<span class="op" id="6949029">/</span>&nbsp;<span class="ident" id="6949031">m2</span><span class="op" id="6949033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949036">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949039">return</span><br>
<span class="lineno"></span><span class="op" id="6949046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6949049">//&nbsp;compareUint32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="6949117">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno">265</span><span class="comment" id="6949181">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="6949199">func</span>&nbsp;<span class="ident" id="6949204">compareUint32Slices</span><span class="op" id="6949223">(</span><span class="ident" id="6949224">s1</span><span class="op" id="6949226">,</span>&nbsp;<span class="ident" id="6949228">s2</span>&nbsp;<span class="op" id="6949231">[</span><span class="op" id="6949232">]</span><span class="builtintype" id="6949233">uint32</span><span class="op" id="6949239">)</span>&nbsp;<span class="builtintype" id="6949241">int</span>&nbsp;<span class="op" id="6949245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949248">if</span>&nbsp;<span class="builtinfunc" id="6949251">len</span><span class="op" id="6949254">(</span><span class="ident" id="6949255">s1</span><span class="op" id="6949257">)</span>&nbsp;<span class="op" id="6949259">!=</span>&nbsp;<span class="builtinfunc" id="6949262">len</span><span class="op" id="6949265">(</span><span class="ident" id="6949266">s2</span><span class="op" id="6949268">)</span>&nbsp;<span class="op" id="6949270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949274">if</span>&nbsp;<span class="builtinfunc" id="6949277">len</span><span class="op" id="6949280">(</span><span class="ident" id="6949281">s1</span><span class="op" id="6949283">)</span>&nbsp;<span class="op" id="6949285">&gt;</span>&nbsp;<span class="builtinfunc" id="6949287">len</span><span class="op" id="6949290">(</span><span class="ident" id="6949291">s2</span><span class="op" id="6949293">)</span>&nbsp;<span class="op" id="6949295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949300">return</span>&nbsp;<span class="builtinfunc" id="6949307">len</span><span class="op" id="6949310">(</span><span class="ident" id="6949311">s2</span><span class="op" id="6949313">)</span>&nbsp;<span class="op" id="6949315">+</span>&nbsp;<span class="num" id="6949317">1</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949325">return</span>&nbsp;<span class="builtinfunc" id="6949332">len</span><span class="op" id="6949335">(</span><span class="ident" id="6949336">s1</span><span class="op" id="6949338">)</span>&nbsp;<span class="op" id="6949340">+</span>&nbsp;<span class="num" id="6949342">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949348">for</span>&nbsp;<span class="ident" id="6949352">i</span>&nbsp;<span class="op" id="6949354">:=</span>&nbsp;<span class="keyword" id="6949357">range</span>&nbsp;<span class="ident" id="6949363">s1</span>&nbsp;<span class="op" id="6949366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949370">if</span>&nbsp;<span class="ident" id="6949373">s1</span><span class="op" id="6949375">[</span><span class="ident" id="6949376">i</span><span class="op" id="6949377">]</span>&nbsp;<span class="op" id="6949379">!=</span>&nbsp;<span class="ident" id="6949382">s2</span><span class="op" id="6949384">[</span><span class="ident" id="6949385">i</span><span class="op" id="6949386">]</span>&nbsp;<span class="op" id="6949388">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949393">return</span>&nbsp;<span class="ident" id="6949400">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949410">return</span>&nbsp;<span class="op" id="6949417">-</span><span class="num" id="6949418">1</span><br>
<span class="lineno"></span><span class="op" id="6949420">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="6949423">//&nbsp;compareFloat32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="6949492">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno"></span><span class="comment" id="6949556">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="6949574">func</span>&nbsp;<span class="ident" id="6949579">compareFloat32Slices</span><span class="op" id="6949599">(</span><span class="ident" id="6949600">s1</span><span class="op" id="6949602">,</span>&nbsp;<span class="ident" id="6949604">s2</span>&nbsp;<span class="op" id="6949607">[</span><span class="op" id="6949608">]</span><span class="builtintype" id="6949609">float32</span><span class="op" id="6949616">)</span>&nbsp;<span class="builtintype" id="6949618">int</span>&nbsp;<span class="op" id="6949622">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949625">if</span>&nbsp;<span class="builtinfunc" id="6949628">len</span><span class="op" id="6949631">(</span><span class="ident" id="6949632">s1</span><span class="op" id="6949634">)</span>&nbsp;<span class="op" id="6949636">!=</span>&nbsp;<span class="builtinfunc" id="6949639">len</span><span class="op" id="6949642">(</span><span class="ident" id="6949643">s2</span><span class="op" id="6949645">)</span>&nbsp;<span class="op" id="6949647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949651">if</span>&nbsp;<span class="builtinfunc" id="6949654">len</span><span class="op" id="6949657">(</span><span class="ident" id="6949658">s1</span><span class="op" id="6949660">)</span>&nbsp;<span class="op" id="6949662">&gt;</span>&nbsp;<span class="builtinfunc" id="6949664">len</span><span class="op" id="6949667">(</span><span class="ident" id="6949668">s2</span><span class="op" id="6949670">)</span>&nbsp;<span class="op" id="6949672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949677">return</span>&nbsp;<span class="builtinfunc" id="6949684">len</span><span class="op" id="6949687">(</span><span class="ident" id="6949688">s2</span><span class="op" id="6949690">)</span>&nbsp;<span class="op" id="6949692">+</span>&nbsp;<span class="num" id="6949694">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949702">return</span>&nbsp;<span class="builtinfunc" id="6949709">len</span><span class="op" id="6949712">(</span><span class="ident" id="6949713">s1</span><span class="op" id="6949715">)</span>&nbsp;<span class="op" id="6949717">+</span>&nbsp;<span class="num" id="6949719">1</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949725">for</span>&nbsp;<span class="ident" id="6949729">i</span>&nbsp;<span class="op" id="6949731">:=</span>&nbsp;<span class="keyword" id="6949734">range</span>&nbsp;<span class="ident" id="6949740">s1</span>&nbsp;<span class="op" id="6949743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949747">if</span>&nbsp;<span class="op" id="6949750">!</span><span class="ident" id="6949751">nearEqual</span><span class="op" id="6949760">(</span><span class="builtintype" id="6949761">float64</span><span class="op" id="6949768">(</span><span class="ident" id="6949769">s1</span><span class="op" id="6949771">[</span><span class="ident" id="6949772">i</span><span class="op" id="6949773">]</span><span class="op" id="6949774">)</span><span class="op" id="6949775">,</span>&nbsp;<span class="builtintype" id="6949777">float64</span><span class="op" id="6949784">(</span><span class="ident" id="6949785">s2</span><span class="op" id="6949787">[</span><span class="ident" id="6949788">i</span><span class="op" id="6949789">]</span><span class="op" id="6949790">)</span><span class="op" id="6949791">,</span>&nbsp;<span class="num" id="6949793">0</span><span class="op" id="6949794">,</span>&nbsp;<span class="num" id="6949796">1e-7</span><span class="op" id="6949800">)</span>&nbsp;<span class="op" id="6949802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949807">return</span>&nbsp;<span class="ident" id="6949814">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949818">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949824">return</span>&nbsp;<span class="op" id="6949831">-</span><span class="num" id="6949832">1</span><br>
<span class="lineno"></span><span class="op" id="6949834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6949837">func</span>&nbsp;<span class="ident" id="6949842">TestNormTables</span><span class="op" id="6949856">(</span><span class="ident" id="6949857">t</span>&nbsp;<span class="op" id="6949859">*</span><span class="ident" id="6949860">testing</span><span class="op" id="6949867">.</span><span class="ident" id="6949868">T</span><span class="op" id="6949869">)</span>&nbsp;<span class="op" id="6949871">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949874">testKn</span><span class="op" id="6949880">,</span>&nbsp;<span class="ident" id="6949882">testWn</span><span class="op" id="6949888">,</span>&nbsp;<span class="ident" id="6949890">testFn</span>&nbsp;<span class="op" id="6949897">:=</span>&nbsp;<span class="ident" id="6949900">initNorm</span><span class="op" id="6949908">(</span><span class="op" id="6949909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949912">if</span>&nbsp;<span class="ident" id="6949915">i</span>&nbsp;<span class="op" id="6949917">:=</span>&nbsp;<span class="ident" id="6949920">compareUint32Slices</span><span class="op" id="6949939">(</span><span class="ident" id="6949940">kn</span><span class="op" id="6949942">[</span><span class="num" id="6949943">0</span><span class="op" id="6949944">:</span><span class="op" id="6949945">]</span><span class="op" id="6949946">,</span>&nbsp;<span class="ident" id="6949948">testKn</span><span class="op" id="6949954">)</span><span class="op" id="6949955">;</span>&nbsp;<span class="ident" id="6949957">i</span>&nbsp;<span class="op" id="6949959">&gt;=</span>&nbsp;<span class="num" id="6949962">0</span>&nbsp;<span class="op" id="6949964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949968">t</span><span class="op" id="6949969">.</span><span class="ident" id="6949970">Errorf</span><span class="op" id="6949976">(</span><span class="string" id="6949977">&#34;kn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6950013">,</span>&nbsp;<span class="ident" id="6950015">i</span><span class="op" id="6950016">,</span>&nbsp;<span class="ident" id="6950018">kn</span><span class="op" id="6950020">[</span><span class="ident" id="6950021">i</span><span class="op" id="6950022">]</span><span class="op" id="6950023">,</span>&nbsp;<span class="ident" id="6950025">testKn</span><span class="op" id="6950031">[</span><span class="ident" id="6950032">i</span><span class="op" id="6950033">]</span><span class="op" id="6950034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950040">if</span>&nbsp;<span class="ident" id="6950043">i</span>&nbsp;<span class="op" id="6950045">:=</span>&nbsp;<span class="ident" id="6950048">compareFloat32Slices</span><span class="op" id="6950068">(</span><span class="ident" id="6950069">wn</span><span class="op" id="6950071">[</span><span class="num" id="6950072">0</span><span class="op" id="6950073">:</span><span class="op" id="6950074">]</span><span class="op" id="6950075">,</span>&nbsp;<span class="ident" id="6950077">testWn</span><span class="op" id="6950083">)</span><span class="op" id="6950084">;</span>&nbsp;<span class="ident" id="6950086">i</span>&nbsp;<span class="op" id="6950088">&gt;=</span>&nbsp;<span class="num" id="6950091">0</span>&nbsp;<span class="op" id="6950093">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950097">t</span><span class="op" id="6950098">.</span><span class="ident" id="6950099">Errorf</span><span class="op" id="6950105">(</span><span class="string" id="6950106">&#34;wn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6950142">,</span>&nbsp;<span class="ident" id="6950144">i</span><span class="op" id="6950145">,</span>&nbsp;<span class="ident" id="6950147">wn</span><span class="op" id="6950149">[</span><span class="ident" id="6950150">i</span><span class="op" id="6950151">]</span><span class="op" id="6950152">,</span>&nbsp;<span class="ident" id="6950154">testWn</span><span class="op" id="6950160">[</span><span class="ident" id="6950161">i</span><span class="op" id="6950162">]</span><span class="op" id="6950163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950169">if</span>&nbsp;<span class="ident" id="6950172">i</span>&nbsp;<span class="op" id="6950174">:=</span>&nbsp;<span class="ident" id="6950177">compareFloat32Slices</span><span class="op" id="6950197">(</span><span class="ident" id="6950198">fn</span><span class="op" id="6950200">[</span><span class="num" id="6950201">0</span><span class="op" id="6950202">:</span><span class="op" id="6950203">]</span><span class="op" id="6950204">,</span>&nbsp;<span class="ident" id="6950206">testFn</span><span class="op" id="6950212">)</span><span class="op" id="6950213">;</span>&nbsp;<span class="ident" id="6950215">i</span>&nbsp;<span class="op" id="6950217">&gt;=</span>&nbsp;<span class="num" id="6950220">0</span>&nbsp;<span class="op" id="6950222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950226">t</span><span class="op" id="6950227">.</span><span class="ident" id="6950228">Errorf</span><span class="op" id="6950234">(</span><span class="string" id="6950235">&#34;fn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6950271">,</span>&nbsp;<span class="ident" id="6950273">i</span><span class="op" id="6950274">,</span>&nbsp;<span class="ident" id="6950276">fn</span><span class="op" id="6950278">[</span><span class="ident" id="6950279">i</span><span class="op" id="6950280">]</span><span class="op" id="6950281">,</span>&nbsp;<span class="ident" id="6950283">testFn</span><span class="op" id="6950289">[</span><span class="ident" id="6950290">i</span><span class="op" id="6950291">]</span><span class="op" id="6950292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950295">}</span><br>
<span class="lineno">310</span><span class="op" id="6950297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6950300">func</span>&nbsp;<span class="ident" id="6950305">TestExpTables</span><span class="op" id="6950318">(</span><span class="ident" id="6950319">t</span>&nbsp;<span class="op" id="6950321">*</span><span class="ident" id="6950322">testing</span><span class="op" id="6950329">.</span><span class="ident" id="6950330">T</span><span class="op" id="6950331">)</span>&nbsp;<span class="op" id="6950333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950336">testKe</span><span class="op" id="6950342">,</span>&nbsp;<span class="ident" id="6950344">testWe</span><span class="op" id="6950350">,</span>&nbsp;<span class="ident" id="6950352">testFe</span>&nbsp;<span class="op" id="6950359">:=</span>&nbsp;<span class="ident" id="6950362">initExp</span><span class="op" id="6950369">(</span><span class="op" id="6950370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950373">if</span>&nbsp;<span class="ident" id="6950376">i</span>&nbsp;<span class="op" id="6950378">:=</span>&nbsp;<span class="ident" id="6950381">compareUint32Slices</span><span class="op" id="6950400">(</span><span class="ident" id="6950401">ke</span><span class="op" id="6950403">[</span><span class="num" id="6950404">0</span><span class="op" id="6950405">:</span><span class="op" id="6950406">]</span><span class="op" id="6950407">,</span>&nbsp;<span class="ident" id="6950409">testKe</span><span class="op" id="6950415">)</span><span class="op" id="6950416">;</span>&nbsp;<span class="ident" id="6950418">i</span>&nbsp;<span class="op" id="6950420">&gt;=</span>&nbsp;<span class="num" id="6950423">0</span>&nbsp;<span class="op" id="6950425">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950429">t</span><span class="op" id="6950430">.</span><span class="ident" id="6950431">Errorf</span><span class="op" id="6950437">(</span><span class="string" id="6950438">&#34;ke&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6950474">,</span>&nbsp;<span class="ident" id="6950476">i</span><span class="op" id="6950477">,</span>&nbsp;<span class="ident" id="6950479">ke</span><span class="op" id="6950481">[</span><span class="ident" id="6950482">i</span><span class="op" id="6950483">]</span><span class="op" id="6950484">,</span>&nbsp;<span class="ident" id="6950486">testKe</span><span class="op" id="6950492">[</span><span class="ident" id="6950493">i</span><span class="op" id="6950494">]</span><span class="op" id="6950495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950501">if</span>&nbsp;<span class="ident" id="6950504">i</span>&nbsp;<span class="op" id="6950506">:=</span>&nbsp;<span class="ident" id="6950509">compareFloat32Slices</span><span class="op" id="6950529">(</span><span class="ident" id="6950530">we</span><span class="op" id="6950532">[</span><span class="num" id="6950533">0</span><span class="op" id="6950534">:</span><span class="op" id="6950535">]</span><span class="op" id="6950536">,</span>&nbsp;<span class="ident" id="6950538">testWe</span><span class="op" id="6950544">)</span><span class="op" id="6950545">;</span>&nbsp;<span class="ident" id="6950547">i</span>&nbsp;<span class="op" id="6950549">&gt;=</span>&nbsp;<span class="num" id="6950552">0</span>&nbsp;<span class="op" id="6950554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950558">t</span><span class="op" id="6950559">.</span><span class="ident" id="6950560">Errorf</span><span class="op" id="6950566">(</span><span class="string" id="6950567">&#34;we&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6950603">,</span>&nbsp;<span class="ident" id="6950605">i</span><span class="op" id="6950606">,</span>&nbsp;<span class="ident" id="6950608">we</span><span class="op" id="6950610">[</span><span class="ident" id="6950611">i</span><span class="op" id="6950612">]</span><span class="op" id="6950613">,</span>&nbsp;<span class="ident" id="6950615">testWe</span><span class="op" id="6950621">[</span><span class="ident" id="6950622">i</span><span class="op" id="6950623">]</span><span class="op" id="6950624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950627">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950630">if</span>&nbsp;<span class="ident" id="6950633">i</span>&nbsp;<span class="op" id="6950635">:=</span>&nbsp;<span class="ident" id="6950638">compareFloat32Slices</span><span class="op" id="6950658">(</span><span class="ident" id="6950659">fe</span><span class="op" id="6950661">[</span><span class="num" id="6950662">0</span><span class="op" id="6950663">:</span><span class="op" id="6950664">]</span><span class="op" id="6950665">,</span>&nbsp;<span class="ident" id="6950667">testFe</span><span class="op" id="6950673">)</span><span class="op" id="6950674">;</span>&nbsp;<span class="ident" id="6950676">i</span>&nbsp;<span class="op" id="6950678">&gt;=</span>&nbsp;<span class="num" id="6950681">0</span>&nbsp;<span class="op" id="6950683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950687">t</span><span class="op" id="6950688">.</span><span class="ident" id="6950689">Errorf</span><span class="op" id="6950695">(</span><span class="string" id="6950696">&#34;fe&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6950732">,</span>&nbsp;<span class="ident" id="6950734">i</span><span class="op" id="6950735">,</span>&nbsp;<span class="ident" id="6950737">fe</span><span class="op" id="6950739">[</span><span class="ident" id="6950740">i</span><span class="op" id="6950741">]</span><span class="op" id="6950742">,</span>&nbsp;<span class="ident" id="6950744">testFe</span><span class="op" id="6950750">[</span><span class="ident" id="6950751">i</span><span class="op" id="6950752">]</span><span class="op" id="6950753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950756">}</span><br>
<span class="lineno"></span><span class="op" id="6950758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="6950761">//&nbsp;For&nbsp;issue&nbsp;6721,&nbsp;the&nbsp;problem&nbsp;came&nbsp;after&nbsp;7533753&nbsp;calls,&nbsp;so&nbsp;check&nbsp;10e6.</span><br>
<span class="lineno"></span><span class="keyword" id="6950833">func</span>&nbsp;<span class="ident" id="6950838">TestFloat32</span><span class="op" id="6950849">(</span><span class="ident" id="6950850">t</span>&nbsp;<span class="op" id="6950852">*</span><span class="ident" id="6950853">testing</span><span class="op" id="6950860">.</span><span class="ident" id="6950861">T</span><span class="op" id="6950862">)</span>&nbsp;<span class="op" id="6950864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950867">r</span>&nbsp;<span class="op" id="6950869">:=</span>&nbsp;<span class="ident" id="6950872">New</span><span class="op" id="6950875">(</span><span class="ident" id="6950876">NewSource</span><span class="op" id="6950885">(</span><span class="num" id="6950886">1</span><span class="op" id="6950887">)</span><span class="op" id="6950888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950891">for</span>&nbsp;<span class="ident" id="6950895">ct</span>&nbsp;<span class="op" id="6950898">:=</span>&nbsp;<span class="num" id="6950901">0</span><span class="op" id="6950902">;</span>&nbsp;<span class="ident" id="6950904">ct</span>&nbsp;<span class="op" id="6950907">&lt;</span>&nbsp;<span class="num" id="6950909">10e6</span><span class="op" id="6950913">;</span>&nbsp;<span class="ident" id="6950915">ct</span><span class="op" id="6950917">++</span>&nbsp;<span class="op" id="6950920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950924">f</span>&nbsp;<span class="op" id="6950926">:=</span>&nbsp;<span class="ident" id="6950929">r</span><span class="op" id="6950930">.</span><span class="ident" id="6950931">Float32</span><span class="op" id="6950938">(</span><span class="op" id="6950939">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950943">if</span>&nbsp;<span class="ident" id="6950946">f</span>&nbsp;<span class="op" id="6950948">&gt;=</span>&nbsp;<span class="num" id="6950951">1</span>&nbsp;<span class="op" id="6950953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950958">t</span><span class="op" id="6950959">.</span><span class="ident" id="6950960">Fatal</span><span class="op" id="6950965">(</span><span class="string" id="6950966">&#34;Float32()&nbsp;should&nbsp;be&nbsp;in&nbsp;range&nbsp;[0,1).&nbsp;ct:&#34;</span><span class="op" id="6951007">,</span>&nbsp;<span class="ident" id="6951009">ct</span><span class="op" id="6951011">,</span>&nbsp;<span class="string" id="6951013">&#34;f:&#34;</span><span class="op" id="6951017">,</span>&nbsp;<span class="ident" id="6951019">f</span><span class="op" id="6951020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951027">}</span><br>
<span class="lineno"></span><span class="op" id="6951029">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="comment" id="6951032">//&nbsp;Benchmarks</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6951047">func</span>&nbsp;<span class="ident" id="6951052">BenchmarkInt63Threadsafe</span><span class="op" id="6951076">(</span><span class="ident" id="6951077">b</span>&nbsp;<span class="op" id="6951079">*</span><span class="ident" id="6951080">testing</span><span class="op" id="6951087">.</span><span class="ident" id="6951088">B</span><span class="op" id="6951089">)</span>&nbsp;<span class="op" id="6951091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951094">for</span>&nbsp;<span class="ident" id="6951098">n</span>&nbsp;<span class="op" id="6951100">:=</span>&nbsp;<span class="ident" id="6951103">b</span><span class="op" id="6951104">.</span><span class="ident" id="6951105">N</span><span class="op" id="6951106">;</span>&nbsp;<span class="ident" id="6951108">n</span>&nbsp;<span class="op" id="6951110">&gt;</span>&nbsp;<span class="num" id="6951112">0</span><span class="op" id="6951113">;</span>&nbsp;<span class="ident" id="6951115">n</span><span class="op" id="6951116">--</span>&nbsp;<span class="op" id="6951119">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951123">Int63</span><span class="op" id="6951128">(</span><span class="op" id="6951129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951132">}</span><br>
<span class="lineno"></span><span class="op" id="6951134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6951137">func</span>&nbsp;<span class="ident" id="6951142">BenchmarkInt63Unthreadsafe</span><span class="op" id="6951168">(</span><span class="ident" id="6951169">b</span>&nbsp;<span class="op" id="6951171">*</span><span class="ident" id="6951172">testing</span><span class="op" id="6951179">.</span><span class="ident" id="6951180">B</span><span class="op" id="6951181">)</span>&nbsp;<span class="op" id="6951183">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951186">r</span>&nbsp;<span class="op" id="6951188">:=</span>&nbsp;<span class="ident" id="6951191">New</span><span class="op" id="6951194">(</span><span class="ident" id="6951195">NewSource</span><span class="op" id="6951204">(</span><span class="num" id="6951205">1</span><span class="op" id="6951206">)</span><span class="op" id="6951207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951210">for</span>&nbsp;<span class="ident" id="6951214">n</span>&nbsp;<span class="op" id="6951216">:=</span>&nbsp;<span class="ident" id="6951219">b</span><span class="op" id="6951220">.</span><span class="ident" id="6951221">N</span><span class="op" id="6951222">;</span>&nbsp;<span class="ident" id="6951224">n</span>&nbsp;<span class="op" id="6951226">&gt;</span>&nbsp;<span class="num" id="6951228">0</span><span class="op" id="6951229">;</span>&nbsp;<span class="ident" id="6951231">n</span><span class="op" id="6951232">--</span>&nbsp;<span class="op" id="6951235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951239">r</span><span class="op" id="6951240">.</span><span class="ident" id="6951241">Int63</span><span class="op" id="6951246">(</span><span class="op" id="6951247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951250">}</span><br>
<span class="lineno"></span><span class="op" id="6951252">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="6951255">func</span>&nbsp;<span class="ident" id="6951260">BenchmarkIntn1000</span><span class="op" id="6951277">(</span><span class="ident" id="6951278">b</span>&nbsp;<span class="op" id="6951280">*</span><span class="ident" id="6951281">testing</span><span class="op" id="6951288">.</span><span class="ident" id="6951289">B</span><span class="op" id="6951290">)</span>&nbsp;<span class="op" id="6951292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951295">r</span>&nbsp;<span class="op" id="6951297">:=</span>&nbsp;<span class="ident" id="6951300">New</span><span class="op" id="6951303">(</span><span class="ident" id="6951304">NewSource</span><span class="op" id="6951313">(</span><span class="num" id="6951314">1</span><span class="op" id="6951315">)</span><span class="op" id="6951316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951319">for</span>&nbsp;<span class="ident" id="6951323">n</span>&nbsp;<span class="op" id="6951325">:=</span>&nbsp;<span class="ident" id="6951328">b</span><span class="op" id="6951329">.</span><span class="ident" id="6951330">N</span><span class="op" id="6951331">;</span>&nbsp;<span class="ident" id="6951333">n</span>&nbsp;<span class="op" id="6951335">&gt;</span>&nbsp;<span class="num" id="6951337">0</span><span class="op" id="6951338">;</span>&nbsp;<span class="ident" id="6951340">n</span><span class="op" id="6951341">--</span>&nbsp;<span class="op" id="6951344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951348">r</span><span class="op" id="6951349">.</span><span class="ident" id="6951350">Intn</span><span class="op" id="6951354">(</span><span class="num" id="6951355">1000</span><span class="op" id="6951359">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951362">}</span><br>
<span class="lineno"></span><span class="op" id="6951364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6951367">func</span>&nbsp;<span class="ident" id="6951372">BenchmarkInt63n1000</span><span class="op" id="6951391">(</span><span class="ident" id="6951392">b</span>&nbsp;<span class="op" id="6951394">*</span><span class="ident" id="6951395">testing</span><span class="op" id="6951402">.</span><span class="ident" id="6951403">B</span><span class="op" id="6951404">)</span>&nbsp;<span class="op" id="6951406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951409">r</span>&nbsp;<span class="op" id="6951411">:=</span>&nbsp;<span class="ident" id="6951414">New</span><span class="op" id="6951417">(</span><span class="ident" id="6951418">NewSource</span><span class="op" id="6951427">(</span><span class="num" id="6951428">1</span><span class="op" id="6951429">)</span><span class="op" id="6951430">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951433">for</span>&nbsp;<span class="ident" id="6951437">n</span>&nbsp;<span class="op" id="6951439">:=</span>&nbsp;<span class="ident" id="6951442">b</span><span class="op" id="6951443">.</span><span class="ident" id="6951444">N</span><span class="op" id="6951445">;</span>&nbsp;<span class="ident" id="6951447">n</span>&nbsp;<span class="op" id="6951449">&gt;</span>&nbsp;<span class="num" id="6951451">0</span><span class="op" id="6951452">;</span>&nbsp;<span class="ident" id="6951454">n</span><span class="op" id="6951455">--</span>&nbsp;<span class="op" id="6951458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951462">r</span><span class="op" id="6951463">.</span><span class="ident" id="6951464">Int63n</span><span class="op" id="6951470">(</span><span class="num" id="6951471">1000</span><span class="op" id="6951475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951478">}</span><br>
<span class="lineno"></span><span class="op" id="6951480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span><span class="keyword" id="6951483">func</span>&nbsp;<span class="ident" id="6951488">BenchmarkInt31n1000</span><span class="op" id="6951507">(</span><span class="ident" id="6951508">b</span>&nbsp;<span class="op" id="6951510">*</span><span class="ident" id="6951511">testing</span><span class="op" id="6951518">.</span><span class="ident" id="6951519">B</span><span class="op" id="6951520">)</span>&nbsp;<span class="op" id="6951522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951525">r</span>&nbsp;<span class="op" id="6951527">:=</span>&nbsp;<span class="ident" id="6951530">New</span><span class="op" id="6951533">(</span><span class="ident" id="6951534">NewSource</span><span class="op" id="6951543">(</span><span class="num" id="6951544">1</span><span class="op" id="6951545">)</span><span class="op" id="6951546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951549">for</span>&nbsp;<span class="ident" id="6951553">n</span>&nbsp;<span class="op" id="6951555">:=</span>&nbsp;<span class="ident" id="6951558">b</span><span class="op" id="6951559">.</span><span class="ident" id="6951560">N</span><span class="op" id="6951561">;</span>&nbsp;<span class="ident" id="6951563">n</span>&nbsp;<span class="op" id="6951565">&gt;</span>&nbsp;<span class="num" id="6951567">0</span><span class="op" id="6951568">;</span>&nbsp;<span class="ident" id="6951570">n</span><span class="op" id="6951571">--</span>&nbsp;<span class="op" id="6951574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951578">r</span><span class="op" id="6951579">.</span><span class="ident" id="6951580">Int31n</span><span class="op" id="6951586">(</span><span class="num" id="6951587">1000</span><span class="op" id="6951591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951594">}</span><br>
<span class="lineno">370</span><span class="op" id="6951596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6951599">func</span>&nbsp;<span class="ident" id="6951604">BenchmarkFloat32</span><span class="op" id="6951620">(</span><span class="ident" id="6951621">b</span>&nbsp;<span class="op" id="6951623">*</span><span class="ident" id="6951624">testing</span><span class="op" id="6951631">.</span><span class="ident" id="6951632">B</span><span class="op" id="6951633">)</span>&nbsp;<span class="op" id="6951635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951638">r</span>&nbsp;<span class="op" id="6951640">:=</span>&nbsp;<span class="ident" id="6951643">New</span><span class="op" id="6951646">(</span><span class="ident" id="6951647">NewSource</span><span class="op" id="6951656">(</span><span class="num" id="6951657">1</span><span class="op" id="6951658">)</span><span class="op" id="6951659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951662">for</span>&nbsp;<span class="ident" id="6951666">n</span>&nbsp;<span class="op" id="6951668">:=</span>&nbsp;<span class="ident" id="6951671">b</span><span class="op" id="6951672">.</span><span class="ident" id="6951673">N</span><span class="op" id="6951674">;</span>&nbsp;<span class="ident" id="6951676">n</span>&nbsp;<span class="op" id="6951678">&gt;</span>&nbsp;<span class="num" id="6951680">0</span><span class="op" id="6951681">;</span>&nbsp;<span class="ident" id="6951683">n</span><span class="op" id="6951684">--</span>&nbsp;<span class="op" id="6951687">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951691">r</span><span class="op" id="6951692">.</span><span class="ident" id="6951693">Float32</span><span class="op" id="6951700">(</span><span class="op" id="6951701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951704">}</span><br>
<span class="lineno"></span><span class="op" id="6951706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6951709">func</span>&nbsp;<span class="ident" id="6951714">BenchmarkFloat64</span><span class="op" id="6951730">(</span><span class="ident" id="6951731">b</span>&nbsp;<span class="op" id="6951733">*</span><span class="ident" id="6951734">testing</span><span class="op" id="6951741">.</span><span class="ident" id="6951742">B</span><span class="op" id="6951743">)</span>&nbsp;<span class="op" id="6951745">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951748">r</span>&nbsp;<span class="op" id="6951750">:=</span>&nbsp;<span class="ident" id="6951753">New</span><span class="op" id="6951756">(</span><span class="ident" id="6951757">NewSource</span><span class="op" id="6951766">(</span><span class="num" id="6951767">1</span><span class="op" id="6951768">)</span><span class="op" id="6951769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951772">for</span>&nbsp;<span class="ident" id="6951776">n</span>&nbsp;<span class="op" id="6951778">:=</span>&nbsp;<span class="ident" id="6951781">b</span><span class="op" id="6951782">.</span><span class="ident" id="6951783">N</span><span class="op" id="6951784">;</span>&nbsp;<span class="ident" id="6951786">n</span>&nbsp;<span class="op" id="6951788">&gt;</span>&nbsp;<span class="num" id="6951790">0</span><span class="op" id="6951791">;</span>&nbsp;<span class="ident" id="6951793">n</span><span class="op" id="6951794">--</span>&nbsp;<span class="op" id="6951797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951801">r</span><span class="op" id="6951802">.</span><span class="ident" id="6951803">Float64</span><span class="op" id="6951810">(</span><span class="op" id="6951811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951814">}</span><br>
<span class="lineno"></span><span class="op" id="6951816">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span><span class="keyword" id="6951819">func</span>&nbsp;<span class="ident" id="6951824">BenchmarkPerm3</span><span class="op" id="6951838">(</span><span class="ident" id="6951839">b</span>&nbsp;<span class="op" id="6951841">*</span><span class="ident" id="6951842">testing</span><span class="op" id="6951849">.</span><span class="ident" id="6951850">B</span><span class="op" id="6951851">)</span>&nbsp;<span class="op" id="6951853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951856">r</span>&nbsp;<span class="op" id="6951858">:=</span>&nbsp;<span class="ident" id="6951861">New</span><span class="op" id="6951864">(</span><span class="ident" id="6951865">NewSource</span><span class="op" id="6951874">(</span><span class="num" id="6951875">1</span><span class="op" id="6951876">)</span><span class="op" id="6951877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951880">for</span>&nbsp;<span class="ident" id="6951884">n</span>&nbsp;<span class="op" id="6951886">:=</span>&nbsp;<span class="ident" id="6951889">b</span><span class="op" id="6951890">.</span><span class="ident" id="6951891">N</span><span class="op" id="6951892">;</span>&nbsp;<span class="ident" id="6951894">n</span>&nbsp;<span class="op" id="6951896">&gt;</span>&nbsp;<span class="num" id="6951898">0</span><span class="op" id="6951899">;</span>&nbsp;<span class="ident" id="6951901">n</span><span class="op" id="6951902">--</span>&nbsp;<span class="op" id="6951905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951909">r</span><span class="op" id="6951910">.</span><span class="ident" id="6951911">Perm</span><span class="op" id="6951915">(</span><span class="num" id="6951916">3</span><span class="op" id="6951917">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951920">}</span><br>
<span class="lineno"></span><span class="op" id="6951922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6951925">func</span>&nbsp;<span class="ident" id="6951930">BenchmarkPerm30</span><span class="op" id="6951945">(</span><span class="ident" id="6951946">b</span>&nbsp;<span class="op" id="6951948">*</span><span class="ident" id="6951949">testing</span><span class="op" id="6951956">.</span><span class="ident" id="6951957">B</span><span class="op" id="6951958">)</span>&nbsp;<span class="op" id="6951960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951963">r</span>&nbsp;<span class="op" id="6951965">:=</span>&nbsp;<span class="ident" id="6951968">New</span><span class="op" id="6951971">(</span><span class="ident" id="6951972">NewSource</span><span class="op" id="6951981">(</span><span class="num" id="6951982">1</span><span class="op" id="6951983">)</span><span class="op" id="6951984">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951987">for</span>&nbsp;<span class="ident" id="6951991">n</span>&nbsp;<span class="op" id="6951993">:=</span>&nbsp;<span class="ident" id="6951996">b</span><span class="op" id="6951997">.</span><span class="ident" id="6951998">N</span><span class="op" id="6951999">;</span>&nbsp;<span class="ident" id="6952001">n</span>&nbsp;<span class="op" id="6952003">&gt;</span>&nbsp;<span class="num" id="6952005">0</span><span class="op" id="6952006">;</span>&nbsp;<span class="ident" id="6952008">n</span><span class="op" id="6952009">--</span>&nbsp;<span class="op" id="6952012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952016">r</span><span class="op" id="6952017">.</span><span class="ident" id="6952018">Perm</span><span class="op" id="6952022">(</span><span class="num" id="6952023">30</span><span class="op" id="6952025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6952028">}</span><br>
<span class="lineno"></span><span class="op" id="6952030">}</span>
</div>
</body>
</html>
