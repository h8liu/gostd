<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4773005">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4773061">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4773115">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4773166">package</span>&nbsp;<span class="ident" id="4773174">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4773180">//&nbsp;JSON&nbsp;value&nbsp;parser&nbsp;state&nbsp;machine.</span><br>
<span class="lineno"></span><span class="comment" id="4773216">//&nbsp;Just&nbsp;about&nbsp;at&nbsp;the&nbsp;limit&nbsp;of&nbsp;what&nbsp;is&nbsp;reasonable&nbsp;to&nbsp;write&nbsp;by&nbsp;hand.</span><br>
<span class="lineno"></span><span class="comment" id="4773283">//&nbsp;Some&nbsp;parts&nbsp;are&nbsp;a&nbsp;bit&nbsp;tedious,&nbsp;but&nbsp;overall&nbsp;it&nbsp;nicely&nbsp;factors&nbsp;out&nbsp;the</span><br>
<span class="lineno">10</span><span class="comment" id="4773354">//&nbsp;otherwise&nbsp;common&nbsp;code&nbsp;from&nbsp;the&nbsp;multiple&nbsp;scanning&nbsp;functions</span><br>
<span class="lineno"></span><span class="comment" id="4773416">//&nbsp;in&nbsp;this&nbsp;package&nbsp;(Compact,&nbsp;Indent,&nbsp;checkValid,&nbsp;nextValue,&nbsp;etc).</span><br>
<span class="lineno"></span><span class="comment" id="4773482">//</span><br>
<span class="lineno"></span><span class="comment" id="4773485">//&nbsp;This&nbsp;file&nbsp;starts&nbsp;with&nbsp;two&nbsp;simple&nbsp;examples&nbsp;using&nbsp;the&nbsp;scanner</span><br>
<span class="lineno"></span><span class="comment" id="4773548">//&nbsp;before&nbsp;diving&nbsp;into&nbsp;the&nbsp;scanner&nbsp;itself.</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="4773591">import</span>&nbsp;<span class="string" id="4773598">&#34;strconv&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4773609">//&nbsp;checkValid&nbsp;verifies&nbsp;that&nbsp;data&nbsp;is&nbsp;valid&nbsp;JSON-encoded&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="4773670">//&nbsp;scan&nbsp;is&nbsp;passed&nbsp;in&nbsp;for&nbsp;use&nbsp;by&nbsp;checkValid&nbsp;to&nbsp;avoid&nbsp;an&nbsp;allocation.</span><br>
<span class="lineno">20</span><span class="keyword" id="4773737">func</span>&nbsp;<span class="ident" id="4773742">checkValid</span><span class="op" id="4773752">(</span><span class="ident" id="4773753">data</span>&nbsp;<span class="op" id="4773758">[</span><span class="op" id="4773759">]</span><span class="builtintype" id="4773760">byte</span><span class="op" id="4773764">,</span>&nbsp;<span class="ident" id="4773766">scan</span>&nbsp;<span class="op" id="4773771">*</span><span class="ident" id="4773772">scanner</span><span class="op" id="4773779">)</span>&nbsp;<span class="builtintype" id="4773781">error</span>&nbsp;<span class="op" id="4773787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773790">scan</span><span class="op" id="4773794">.</span><span class="ident" id="4773795">reset</span><span class="op" id="4773800">(</span><span class="op" id="4773801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773804">for</span>&nbsp;<span class="ident" id="4773808">_</span><span class="op" id="4773809">,</span>&nbsp;<span class="ident" id="4773811">c</span>&nbsp;<span class="op" id="4773813">:=</span>&nbsp;<span class="keyword" id="4773816">range</span>&nbsp;<span class="ident" id="4773822">data</span>&nbsp;<span class="op" id="4773827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773831">scan</span><span class="op" id="4773835">.</span><span class="ident" id="4773836">bytes</span><span class="op" id="4773841">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773846">if</span>&nbsp;<span class="ident" id="4773849">scan</span><span class="op" id="4773853">.</span><span class="ident" id="4773854">step</span><span class="op" id="4773858">(</span><span class="ident" id="4773859">scan</span><span class="op" id="4773863">,</span>&nbsp;<span class="builtintype" id="4773865">int</span><span class="op" id="4773868">(</span><span class="ident" id="4773869">c</span><span class="op" id="4773870">)</span><span class="op" id="4773871">)</span>&nbsp;<span class="op" id="4773873">==</span>&nbsp;<span class="ident" id="4773876">scanError</span>&nbsp;<span class="op" id="4773886">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773891">return</span>&nbsp;<span class="ident" id="4773898">scan</span><span class="op" id="4773902">.</span><span class="ident" id="4773903">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4773909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4773912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773915">if</span>&nbsp;<span class="ident" id="4773918">scan</span><span class="op" id="4773922">.</span><span class="ident" id="4773923">eof</span><span class="op" id="4773926">(</span><span class="op" id="4773927">)</span>&nbsp;<span class="op" id="4773929">==</span>&nbsp;<span class="ident" id="4773932">scanError</span>&nbsp;<span class="op" id="4773942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773946">return</span>&nbsp;<span class="ident" id="4773953">scan</span><span class="op" id="4773957">.</span><span class="ident" id="4773958">err</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4773963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773966">return</span>&nbsp;<span class="ident" id="4773973">nil</span><br>
<span class="lineno"></span><span class="op" id="4773977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4773980">//&nbsp;nextValue&nbsp;splits&nbsp;data&nbsp;after&nbsp;the&nbsp;next&nbsp;whole&nbsp;JSON&nbsp;value,</span><br>
<span class="lineno">35</span><span class="comment" id="4774038">//&nbsp;returning&nbsp;that&nbsp;value&nbsp;and&nbsp;the&nbsp;bytes&nbsp;that&nbsp;follow&nbsp;it&nbsp;as&nbsp;separate&nbsp;slices.</span><br>
<span class="lineno"></span><span class="comment" id="4774111">//&nbsp;scan&nbsp;is&nbsp;passed&nbsp;in&nbsp;for&nbsp;use&nbsp;by&nbsp;nextValue&nbsp;to&nbsp;avoid&nbsp;an&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="keyword" id="4774177">func</span>&nbsp;<span class="ident" id="4774182">nextValue</span><span class="op" id="4774191">(</span><span class="ident" id="4774192">data</span>&nbsp;<span class="op" id="4774197">[</span><span class="op" id="4774198">]</span><span class="builtintype" id="4774199">byte</span><span class="op" id="4774203">,</span>&nbsp;<span class="ident" id="4774205">scan</span>&nbsp;<span class="op" id="4774210">*</span><span class="ident" id="4774211">scanner</span><span class="op" id="4774218">)</span>&nbsp;<span class="op" id="4774220">(</span><span class="ident" id="4774221">value</span><span class="op" id="4774226">,</span>&nbsp;<span class="ident" id="4774228">rest</span>&nbsp;<span class="op" id="4774233">[</span><span class="op" id="4774234">]</span><span class="builtintype" id="4774235">byte</span><span class="op" id="4774239">,</span>&nbsp;<span class="ident" id="4774241">err</span>&nbsp;<span class="builtintype" id="4774245">error</span><span class="op" id="4774250">)</span>&nbsp;<span class="op" id="4774252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774255">scan</span><span class="op" id="4774259">.</span><span class="ident" id="4774260">reset</span><span class="op" id="4774265">(</span><span class="op" id="4774266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774269">for</span>&nbsp;<span class="ident" id="4774273">i</span><span class="op" id="4774274">,</span>&nbsp;<span class="ident" id="4774276">c</span>&nbsp;<span class="op" id="4774278">:=</span>&nbsp;<span class="keyword" id="4774281">range</span>&nbsp;<span class="ident" id="4774287">data</span>&nbsp;<span class="op" id="4774292">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774296">v</span>&nbsp;<span class="op" id="4774298">:=</span>&nbsp;<span class="ident" id="4774301">scan</span><span class="op" id="4774305">.</span><span class="ident" id="4774306">step</span><span class="op" id="4774310">(</span><span class="ident" id="4774311">scan</span><span class="op" id="4774315">,</span>&nbsp;<span class="builtintype" id="4774317">int</span><span class="op" id="4774320">(</span><span class="ident" id="4774321">c</span><span class="op" id="4774322">)</span><span class="op" id="4774323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774327">if</span>&nbsp;<span class="ident" id="4774330">v</span>&nbsp;<span class="op" id="4774332">&gt;=</span>&nbsp;<span class="ident" id="4774335">scanEnd</span>&nbsp;<span class="op" id="4774343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774348">switch</span>&nbsp;<span class="ident" id="4774355">v</span>&nbsp;<span class="op" id="4774357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774362">case</span>&nbsp;<span class="ident" id="4774367">scanError</span><span class="op" id="4774376">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774382">return</span>&nbsp;<span class="ident" id="4774389">nil</span><span class="op" id="4774392">,</span>&nbsp;<span class="ident" id="4774394">nil</span><span class="op" id="4774397">,</span>&nbsp;<span class="ident" id="4774399">scan</span><span class="op" id="4774403">.</span><span class="ident" id="4774404">err</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774411">case</span>&nbsp;<span class="ident" id="4774416">scanEnd</span><span class="op" id="4774423">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774429">return</span>&nbsp;<span class="ident" id="4774436">data</span><span class="op" id="4774440">[</span><span class="num" id="4774441">0</span><span class="op" id="4774442">:</span><span class="ident" id="4774443">i</span><span class="op" id="4774444">]</span><span class="op" id="4774445">,</span>&nbsp;<span class="ident" id="4774447">data</span><span class="op" id="4774451">[</span><span class="ident" id="4774452">i</span><span class="op" id="4774453">:</span><span class="op" id="4774454">]</span><span class="op" id="4774455">,</span>&nbsp;<span class="ident" id="4774457">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4774464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4774468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4774471">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774474">if</span>&nbsp;<span class="ident" id="4774477">scan</span><span class="op" id="4774481">.</span><span class="ident" id="4774482">eof</span><span class="op" id="4774485">(</span><span class="op" id="4774486">)</span>&nbsp;<span class="op" id="4774488">==</span>&nbsp;<span class="ident" id="4774491">scanError</span>&nbsp;<span class="op" id="4774501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774505">return</span>&nbsp;<span class="ident" id="4774512">nil</span><span class="op" id="4774515">,</span>&nbsp;<span class="ident" id="4774517">nil</span><span class="op" id="4774520">,</span>&nbsp;<span class="ident" id="4774522">scan</span><span class="op" id="4774526">.</span><span class="ident" id="4774527">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4774532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774535">return</span>&nbsp;<span class="ident" id="4774542">data</span><span class="op" id="4774546">,</span>&nbsp;<span class="ident" id="4774548">nil</span><span class="op" id="4774551">,</span>&nbsp;<span class="ident" id="4774553">nil</span><br>
<span class="lineno"></span><span class="op" id="4774557">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="4774560">//&nbsp;A&nbsp;SyntaxError&nbsp;is&nbsp;a&nbsp;description&nbsp;of&nbsp;a&nbsp;JSON&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="4774618">type</span>&nbsp;<span class="ident" id="4774623">SyntaxError</span>&nbsp;<span class="keyword" id="4774635">struct</span>&nbsp;<span class="op" id="4774642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774645">msg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4774652">string</span>&nbsp;<span class="comment" id="4774659">//&nbsp;description&nbsp;of&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774684">Offset</span>&nbsp;<span class="ident" id="4774691">int64</span>&nbsp;&nbsp;<span class="comment" id="4774698">//&nbsp;error&nbsp;occurred&nbsp;after&nbsp;reading&nbsp;Offset&nbsp;bytes</span><br>
<span class="lineno">60</span><span class="op" id="4774743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4774746">func</span>&nbsp;<span class="op" id="4774751">(</span><span class="ident" id="4774752">e</span>&nbsp;<span class="op" id="4774754">*</span><span class="ident" id="4774755">SyntaxError</span><span class="op" id="4774766">)</span>&nbsp;<span class="ident" id="4774768">Error</span><span class="op" id="4774773">(</span><span class="op" id="4774774">)</span>&nbsp;<span class="builtintype" id="4774776">string</span>&nbsp;<span class="op" id="4774783">{</span>&nbsp;<span class="keyword" id="4774785">return</span>&nbsp;<span class="ident" id="4774792">e</span><span class="op" id="4774793">.</span><span class="ident" id="4774794">msg</span>&nbsp;<span class="op" id="4774798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4774801">//&nbsp;A&nbsp;scanner&nbsp;is&nbsp;a&nbsp;JSON&nbsp;scanning&nbsp;state&nbsp;machine.</span><br>
<span class="lineno">65</span><span class="comment" id="4774848">//&nbsp;Callers&nbsp;call&nbsp;scan.reset()&nbsp;and&nbsp;then&nbsp;pass&nbsp;bytes&nbsp;in&nbsp;one&nbsp;at&nbsp;a&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="4774914">//&nbsp;by&nbsp;calling&nbsp;scan.step(&amp;scan,&nbsp;c)&nbsp;for&nbsp;each&nbsp;byte.</span><br>
<span class="lineno"></span><span class="comment" id="4774963">//&nbsp;The&nbsp;return&nbsp;value,&nbsp;referred&nbsp;to&nbsp;as&nbsp;an&nbsp;opcode,&nbsp;tells&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4775020">//&nbsp;caller&nbsp;about&nbsp;significant&nbsp;parsing&nbsp;events&nbsp;like&nbsp;beginning</span><br>
<span class="lineno"></span><span class="comment" id="4775078">//&nbsp;and&nbsp;ending&nbsp;literals,&nbsp;objects,&nbsp;and&nbsp;arrays,&nbsp;so&nbsp;that&nbsp;the</span><br>
<span class="lineno">70</span><span class="comment" id="4775135">//&nbsp;caller&nbsp;can&nbsp;follow&nbsp;along&nbsp;if&nbsp;it&nbsp;wishes.</span><br>
<span class="lineno"></span><span class="comment" id="4775176">//&nbsp;The&nbsp;return&nbsp;value&nbsp;scanEnd&nbsp;indicates&nbsp;that&nbsp;a&nbsp;single&nbsp;top-level</span><br>
<span class="lineno"></span><span class="comment" id="4775238">//&nbsp;JSON&nbsp;value&nbsp;has&nbsp;been&nbsp;completed,&nbsp;*before*&nbsp;the&nbsp;byte&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4775295">//&nbsp;just&nbsp;got&nbsp;passed&nbsp;in.&nbsp;&nbsp;(The&nbsp;indication&nbsp;must&nbsp;be&nbsp;delayed&nbsp;in&nbsp;order</span><br>
<span class="lineno"></span><span class="comment" id="4775360">//&nbsp;to&nbsp;recognize&nbsp;the&nbsp;end&nbsp;of&nbsp;numbers:&nbsp;is&nbsp;123&nbsp;a&nbsp;whole&nbsp;value&nbsp;or</span><br>
<span class="lineno">75</span><span class="comment" id="4775420">//&nbsp;the&nbsp;beginning&nbsp;of&nbsp;12345e+6?).</span><br>
<span class="lineno"></span><span class="keyword" id="4775452">type</span>&nbsp;<span class="ident" id="4775457">scanner</span>&nbsp;<span class="keyword" id="4775465">struct</span>&nbsp;<span class="op" id="4775472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4775475">//&nbsp;The&nbsp;step&nbsp;is&nbsp;a&nbsp;func&nbsp;to&nbsp;be&nbsp;called&nbsp;to&nbsp;execute&nbsp;the&nbsp;next&nbsp;transition.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4775543">//&nbsp;Also&nbsp;tried&nbsp;using&nbsp;an&nbsp;integer&nbsp;constant&nbsp;and&nbsp;a&nbsp;single&nbsp;func</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4775602">//&nbsp;with&nbsp;a&nbsp;switch,&nbsp;but&nbsp;using&nbsp;the&nbsp;func&nbsp;directly&nbsp;was&nbsp;10%&nbsp;faster</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4775664">//&nbsp;on&nbsp;a&nbsp;64-bit&nbsp;Mac&nbsp;Mini,&nbsp;and&nbsp;it&#39;s&nbsp;nicer&nbsp;to&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775714">step</span>&nbsp;<span class="keyword" id="4775719">func</span><span class="op" id="4775723">(</span><span class="op" id="4775724">*</span><span class="ident" id="4775725">scanner</span><span class="op" id="4775732">,</span>&nbsp;<span class="builtintype" id="4775734">int</span><span class="op" id="4775737">)</span>&nbsp;<span class="builtintype" id="4775739">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4775745">//&nbsp;Reached&nbsp;end&nbsp;of&nbsp;top-level&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775781">endTop</span>&nbsp;<span class="builtintype" id="4775788">bool</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4775795">//&nbsp;Stack&nbsp;of&nbsp;what&nbsp;we&#39;re&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;-&nbsp;array&nbsp;values,&nbsp;object&nbsp;keys,&nbsp;object&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775880">parseState</span>&nbsp;<span class="op" id="4775891">[</span><span class="op" id="4775892">]</span><span class="builtintype" id="4775893">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4775899">//&nbsp;Error&nbsp;that&nbsp;happened,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775932">err</span>&nbsp;<span class="builtintype" id="4775936">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4775944">//&nbsp;1-byte&nbsp;redo&nbsp;(see&nbsp;undo&nbsp;method)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775978">redo</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4775988">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775994">redoCode</span>&nbsp;&nbsp;<span class="builtintype" id="4776004">int</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776009">redoState</span>&nbsp;<span class="keyword" id="4776019">func</span><span class="op" id="4776023">(</span><span class="op" id="4776024">*</span><span class="ident" id="4776025">scanner</span><span class="op" id="4776032">,</span>&nbsp;<span class="builtintype" id="4776034">int</span><span class="op" id="4776037">)</span>&nbsp;<span class="builtintype" id="4776039">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4776045">//&nbsp;total&nbsp;bytes&nbsp;consumed,&nbsp;updated&nbsp;by&nbsp;decoder.Decode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776097">bytes</span>&nbsp;<span class="ident" id="4776103">int64</span><br>
<span class="lineno"></span><span class="op" id="4776109">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="4776112">//&nbsp;These&nbsp;values&nbsp;are&nbsp;returned&nbsp;by&nbsp;the&nbsp;state&nbsp;transition&nbsp;functions</span><br>
<span class="lineno"></span><span class="comment" id="4776175">//&nbsp;assigned&nbsp;to&nbsp;scanner.state&nbsp;and&nbsp;the&nbsp;method&nbsp;scanner.eof.</span><br>
<span class="lineno"></span><span class="comment" id="4776232">//&nbsp;They&nbsp;give&nbsp;details&nbsp;about&nbsp;the&nbsp;current&nbsp;state&nbsp;of&nbsp;the&nbsp;scan&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4776294">//&nbsp;callers&nbsp;might&nbsp;be&nbsp;interested&nbsp;to&nbsp;know&nbsp;about.</span><br>
<span class="lineno">105</span><span class="comment" id="4776340">//&nbsp;It&nbsp;is&nbsp;okay&nbsp;to&nbsp;ignore&nbsp;the&nbsp;return&nbsp;value&nbsp;of&nbsp;any&nbsp;particular</span><br>
<span class="lineno"></span><span class="comment" id="4776399">//&nbsp;call&nbsp;to&nbsp;scanner.state:&nbsp;if&nbsp;one&nbsp;call&nbsp;returns&nbsp;scanError,</span><br>
<span class="lineno"></span><span class="comment" id="4776456">//&nbsp;every&nbsp;subsequent&nbsp;call&nbsp;will&nbsp;return&nbsp;scanError&nbsp;too.</span><br>
<span class="lineno"></span><span class="keyword" id="4776508">const</span>&nbsp;<span class="op" id="4776514">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4776517">//&nbsp;Continue.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776531">scanContinue</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4776548">=</span>&nbsp;<span class="ident" id="4776550">iota</span>&nbsp;<span class="comment" id="4776555">//&nbsp;uninteresting&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776578">scanBeginLiteral</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4776602">//&nbsp;end&nbsp;implied&nbsp;by&nbsp;next&nbsp;result&nbsp;!=&nbsp;scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776649">scanBeginObject</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4776673">//&nbsp;begin&nbsp;object</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776690">scanObjectKey</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4776714">//&nbsp;just&nbsp;finished&nbsp;object&nbsp;key&nbsp;(string)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776752">scanObjectValue</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4776776">//&nbsp;just&nbsp;finished&nbsp;non-last&nbsp;object&nbsp;value</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776816">scanEndObject</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4776840">//&nbsp;end&nbsp;object&nbsp;(implies&nbsp;scanObjectValue&nbsp;if&nbsp;possible)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776893">scanBeginArray</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4776917">//&nbsp;begin&nbsp;array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776933">scanArrayValue</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4776957">//&nbsp;just&nbsp;finished&nbsp;array&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776987">scanEndArray</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4777011">//&nbsp;end&nbsp;array&nbsp;(implies&nbsp;scanArrayValue&nbsp;if&nbsp;possible)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4777062">scanSkipSpace</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4777086">//&nbsp;space&nbsp;byte;&nbsp;can&nbsp;skip;&nbsp;known&nbsp;to&nbsp;be&nbsp;last&nbsp;&#34;continue&#34;&nbsp;result</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4777148">//&nbsp;Stop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4777158">scanEnd</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4777168">//&nbsp;top-level&nbsp;value&nbsp;ended&nbsp;*before*&nbsp;this&nbsp;byte;&nbsp;known&nbsp;to&nbsp;be&nbsp;first&nbsp;&#34;stop&#34;&nbsp;result</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4777246">scanError</span>&nbsp;<span class="comment" id="4777256">//&nbsp;hit&nbsp;an&nbsp;error,&nbsp;scanner.err.</span><br>
<span class="lineno"></span><span class="op" id="4777286">)</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="4777289">//&nbsp;These&nbsp;values&nbsp;are&nbsp;stored&nbsp;in&nbsp;the&nbsp;parseState&nbsp;stack.</span><br>
<span class="lineno"></span><span class="comment" id="4777341">//&nbsp;They&nbsp;give&nbsp;the&nbsp;current&nbsp;state&nbsp;of&nbsp;a&nbsp;composite&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="4777393">//&nbsp;being&nbsp;scanned.&nbsp;&nbsp;If&nbsp;the&nbsp;parser&nbsp;is&nbsp;inside&nbsp;a&nbsp;nested&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="4777451">//&nbsp;the&nbsp;parseState&nbsp;describes&nbsp;the&nbsp;nested&nbsp;state,&nbsp;outermost&nbsp;at&nbsp;entry&nbsp;0.</span><br>
<span class="lineno">130</span><span class="keyword" id="4777519">const</span>&nbsp;<span class="op" id="4777525">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4777528">parseObjectKey</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4777545">=</span>&nbsp;<span class="ident" id="4777547">iota</span>&nbsp;<span class="comment" id="4777552">//&nbsp;parsing&nbsp;object&nbsp;key&nbsp;(before&nbsp;colon)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4777590">parseObjectValue</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4777614">//&nbsp;parsing&nbsp;object&nbsp;value&nbsp;(after&nbsp;colon)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4777653">parseArrayValue</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4777677">//&nbsp;parsing&nbsp;array&nbsp;value</span><br>
<span class="lineno"></span><span class="op" id="4777700">)</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="4777703">//&nbsp;reset&nbsp;prepares&nbsp;the&nbsp;scanner&nbsp;for&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="4777742">//&nbsp;It&nbsp;must&nbsp;be&nbsp;called&nbsp;before&nbsp;calling&nbsp;s.step.</span><br>
<span class="lineno"></span><span class="keyword" id="4777786">func</span>&nbsp;<span class="op" id="4777791">(</span><span class="ident" id="4777792">s</span>&nbsp;<span class="op" id="4777794">*</span><span class="ident" id="4777795">scanner</span><span class="op" id="4777802">)</span>&nbsp;<span class="ident" id="4777804">reset</span><span class="op" id="4777809">(</span><span class="op" id="4777810">)</span>&nbsp;<span class="op" id="4777812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4777815">s</span><span class="op" id="4777816">.</span><span class="ident" id="4777817">step</span>&nbsp;<span class="op" id="4777822">=</span>&nbsp;<span class="ident" id="4777824">stateBeginValue</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4777841">s</span><span class="op" id="4777842">.</span><span class="ident" id="4777843">parseState</span>&nbsp;<span class="op" id="4777854">=</span>&nbsp;<span class="ident" id="4777856">s</span><span class="op" id="4777857">.</span><span class="ident" id="4777858">parseState</span><span class="op" id="4777868">[</span><span class="num" id="4777869">0</span><span class="op" id="4777870">:</span><span class="num" id="4777871">0</span><span class="op" id="4777872">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4777875">s</span><span class="op" id="4777876">.</span><span class="ident" id="4777877">err</span>&nbsp;<span class="op" id="4777881">=</span>&nbsp;<span class="ident" id="4777883">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4777888">s</span><span class="op" id="4777889">.</span><span class="ident" id="4777890">redo</span>&nbsp;<span class="op" id="4777895">=</span>&nbsp;<span class="ident" id="4777897">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4777904">s</span><span class="op" id="4777905">.</span><span class="ident" id="4777906">endTop</span>&nbsp;<span class="op" id="4777913">=</span>&nbsp;<span class="ident" id="4777915">false</span><br>
<span class="lineno"></span><span class="op" id="4777921">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="4777924">//&nbsp;eof&nbsp;tells&nbsp;the&nbsp;scanner&nbsp;that&nbsp;the&nbsp;end&nbsp;of&nbsp;input&nbsp;has&nbsp;been&nbsp;reached.</span><br>
<span class="lineno"></span><span class="comment" id="4777989">//&nbsp;It&nbsp;returns&nbsp;a&nbsp;scan&nbsp;status&nbsp;just&nbsp;as&nbsp;s.step&nbsp;does.</span><br>
<span class="lineno"></span><span class="keyword" id="4778038">func</span>&nbsp;<span class="op" id="4778043">(</span><span class="ident" id="4778044">s</span>&nbsp;<span class="op" id="4778046">*</span><span class="ident" id="4778047">scanner</span><span class="op" id="4778054">)</span>&nbsp;<span class="ident" id="4778056">eof</span><span class="op" id="4778059">(</span><span class="op" id="4778060">)</span>&nbsp;<span class="builtintype" id="4778062">int</span>&nbsp;<span class="op" id="4778066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4778069">if</span>&nbsp;<span class="ident" id="4778072">s</span><span class="op" id="4778073">.</span><span class="ident" id="4778074">err</span>&nbsp;<span class="op" id="4778078">!=</span>&nbsp;<span class="ident" id="4778081">nil</span>&nbsp;<span class="op" id="4778085">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4778089">return</span>&nbsp;<span class="ident" id="4778096">scanError</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4778107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4778110">if</span>&nbsp;<span class="ident" id="4778113">s</span><span class="op" id="4778114">.</span><span class="ident" id="4778115">endTop</span>&nbsp;<span class="op" id="4778122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4778126">return</span>&nbsp;<span class="ident" id="4778133">scanEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4778142">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4778145">s</span><span class="op" id="4778146">.</span><span class="ident" id="4778147">step</span><span class="op" id="4778151">(</span><span class="ident" id="4778152">s</span><span class="op" id="4778153">,</span>&nbsp;<span class="string" id="4778155">&#39;&nbsp;&#39;</span><span class="op" id="4778158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4778161">if</span>&nbsp;<span class="ident" id="4778164">s</span><span class="op" id="4778165">.</span><span class="ident" id="4778166">endTop</span>&nbsp;<span class="op" id="4778173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4778177">return</span>&nbsp;<span class="ident" id="4778184">scanEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4778193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4778196">if</span>&nbsp;<span class="ident" id="4778199">s</span><span class="op" id="4778200">.</span><span class="ident" id="4778201">err</span>&nbsp;<span class="op" id="4778205">==</span>&nbsp;<span class="ident" id="4778208">nil</span>&nbsp;<span class="op" id="4778212">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4778216">s</span><span class="op" id="4778217">.</span><span class="ident" id="4778218">err</span>&nbsp;<span class="op" id="4778222">=</span>&nbsp;<span class="op" id="4778224">&amp;</span><span class="ident" id="4778225">SyntaxError</span><span class="op" id="4778236">{</span><span class="string" id="4778237">&#34;unexpected&nbsp;end&nbsp;of&nbsp;JSON&nbsp;input&#34;</span><span class="op" id="4778267">,</span>&nbsp;<span class="ident" id="4778269">s</span><span class="op" id="4778270">.</span><span class="ident" id="4778271">bytes</span><span class="op" id="4778276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4778279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4778282">return</span>&nbsp;<span class="ident" id="4778289">scanError</span><br>
<span class="lineno"></span><span class="op" id="4778299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="4778302">//&nbsp;pushParseState&nbsp;pushes&nbsp;a&nbsp;new&nbsp;parse&nbsp;state&nbsp;p&nbsp;onto&nbsp;the&nbsp;parse&nbsp;stack.</span><br>
<span class="lineno"></span><span class="keyword" id="4778369">func</span>&nbsp;<span class="op" id="4778374">(</span><span class="ident" id="4778375">s</span>&nbsp;<span class="op" id="4778377">*</span><span class="ident" id="4778378">scanner</span><span class="op" id="4778385">)</span>&nbsp;<span class="ident" id="4778387">pushParseState</span><span class="op" id="4778401">(</span><span class="ident" id="4778402">p</span>&nbsp;<span class="builtintype" id="4778404">int</span><span class="op" id="4778407">)</span>&nbsp;<span class="op" id="4778409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4778412">s</span><span class="op" id="4778413">.</span><span class="ident" id="4778414">parseState</span>&nbsp;<span class="op" id="4778425">=</span>&nbsp;<span class="builtinfunc" id="4778427">append</span><span class="op" id="4778433">(</span><span class="ident" id="4778434">s</span><span class="op" id="4778435">.</span><span class="ident" id="4778436">parseState</span><span class="op" id="4778446">,</span>&nbsp;<span class="ident" id="4778448">p</span><span class="op" id="4778449">)</span><br>
<span class="lineno"></span><span class="op" id="4778451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="comment" id="4778454">//&nbsp;popParseState&nbsp;pops&nbsp;a&nbsp;parse&nbsp;state&nbsp;(already&nbsp;obtained)&nbsp;off&nbsp;the&nbsp;stack</span><br>
<span class="lineno"></span><span class="comment" id="4778523">//&nbsp;and&nbsp;updates&nbsp;s.step&nbsp;accordingly.</span><br>
<span class="lineno"></span><span class="keyword" id="4778558">func</span>&nbsp;<span class="op" id="4778563">(</span><span class="ident" id="4778564">s</span>&nbsp;<span class="op" id="4778566">*</span><span class="ident" id="4778567">scanner</span><span class="op" id="4778574">)</span>&nbsp;<span class="ident" id="4778576">popParseState</span><span class="op" id="4778589">(</span><span class="op" id="4778590">)</span>&nbsp;<span class="op" id="4778592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4778595">n</span>&nbsp;<span class="op" id="4778597">:=</span>&nbsp;<span class="builtinfunc" id="4778600">len</span><span class="op" id="4778603">(</span><span class="ident" id="4778604">s</span><span class="op" id="4778605">.</span><span class="ident" id="4778606">parseState</span><span class="op" id="4778616">)</span>&nbsp;<span class="op" id="4778618">-</span>&nbsp;<span class="num" id="4778620">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4778623">s</span><span class="op" id="4778624">.</span><span class="ident" id="4778625">parseState</span>&nbsp;<span class="op" id="4778636">=</span>&nbsp;<span class="ident" id="4778638">s</span><span class="op" id="4778639">.</span><span class="ident" id="4778640">parseState</span><span class="op" id="4778650">[</span><span class="num" id="4778651">0</span><span class="op" id="4778652">:</span><span class="ident" id="4778653">n</span><span class="op" id="4778654">]</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4778657">s</span><span class="op" id="4778658">.</span><span class="ident" id="4778659">redo</span>&nbsp;<span class="op" id="4778664">=</span>&nbsp;<span class="ident" id="4778666">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4778673">if</span>&nbsp;<span class="ident" id="4778676">n</span>&nbsp;<span class="op" id="4778678">==</span>&nbsp;<span class="num" id="4778681">0</span>&nbsp;<span class="op" id="4778683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4778687">s</span><span class="op" id="4778688">.</span><span class="ident" id="4778689">step</span>&nbsp;<span class="op" id="4778694">=</span>&nbsp;<span class="ident" id="4778696">stateEndTop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4778710">s</span><span class="op" id="4778711">.</span><span class="ident" id="4778712">endTop</span>&nbsp;<span class="op" id="4778719">=</span>&nbsp;<span class="ident" id="4778721">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4778727">}</span>&nbsp;<span class="keyword" id="4778729">else</span>&nbsp;<span class="op" id="4778734">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4778738">s</span><span class="op" id="4778739">.</span><span class="ident" id="4778740">step</span>&nbsp;<span class="op" id="4778745">=</span>&nbsp;<span class="ident" id="4778747">stateEndValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4778762">}</span><br>
<span class="lineno"></span><span class="op" id="4778764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4778767">func</span>&nbsp;<span class="ident" id="4778772">isSpace</span><span class="op" id="4778779">(</span><span class="ident" id="4778780">c</span>&nbsp;<span class="builtintype" id="4778782">rune</span><span class="op" id="4778786">)</span>&nbsp;<span class="builtintype" id="4778788">bool</span>&nbsp;<span class="op" id="4778793">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4778796">return</span>&nbsp;<span class="ident" id="4778803">c</span>&nbsp;<span class="op" id="4778805">==</span>&nbsp;<span class="string" id="4778808">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4778812">||</span>&nbsp;<span class="ident" id="4778815">c</span>&nbsp;<span class="op" id="4778817">==</span>&nbsp;<span class="string" id="4778820">&#39;\t&#39;</span>&nbsp;<span class="op" id="4778825">||</span>&nbsp;<span class="ident" id="4778828">c</span>&nbsp;<span class="op" id="4778830">==</span>&nbsp;<span class="string" id="4778833">&#39;\r&#39;</span>&nbsp;<span class="op" id="4778838">||</span>&nbsp;<span class="ident" id="4778841">c</span>&nbsp;<span class="op" id="4778843">==</span>&nbsp;<span class="string" id="4778846">&#39;\n&#39;</span><br>
<span class="lineno"></span><span class="op" id="4778851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4778854">//&nbsp;stateBeginValueOrEmpty&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`[`.</span><br>
<span class="lineno"></span><span class="keyword" id="4778912">func</span>&nbsp;<span class="ident" id="4778917">stateBeginValueOrEmpty</span><span class="op" id="4778939">(</span><span class="ident" id="4778940">s</span>&nbsp;<span class="op" id="4778942">*</span><span class="ident" id="4778943">scanner</span><span class="op" id="4778950">,</span>&nbsp;<span class="ident" id="4778952">c</span>&nbsp;<span class="builtintype" id="4778954">int</span><span class="op" id="4778957">)</span>&nbsp;<span class="builtintype" id="4778959">int</span>&nbsp;<span class="op" id="4778963">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4778966">if</span>&nbsp;<span class="ident" id="4778969">c</span>&nbsp;<span class="op" id="4778971">&lt;=</span>&nbsp;<span class="string" id="4778974">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4778978">&amp;&amp;</span>&nbsp;<span class="ident" id="4778981">isSpace</span><span class="op" id="4778988">(</span><span class="builtintype" id="4778989">rune</span><span class="op" id="4778993">(</span><span class="ident" id="4778994">c</span><span class="op" id="4778995">)</span><span class="op" id="4778996">)</span>&nbsp;<span class="op" id="4778998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779002">return</span>&nbsp;<span class="ident" id="4779009">scanSkipSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4779024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779027">if</span>&nbsp;<span class="ident" id="4779030">c</span>&nbsp;<span class="op" id="4779032">==</span>&nbsp;<span class="string" id="4779035">&#39;]&#39;</span>&nbsp;<span class="op" id="4779039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779043">return</span>&nbsp;<span class="ident" id="4779050">stateEndValue</span><span class="op" id="4779063">(</span><span class="ident" id="4779064">s</span><span class="op" id="4779065">,</span>&nbsp;<span class="ident" id="4779067">c</span><span class="op" id="4779068">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4779071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779074">return</span>&nbsp;<span class="ident" id="4779081">stateBeginValue</span><span class="op" id="4779096">(</span><span class="ident" id="4779097">s</span><span class="op" id="4779098">,</span>&nbsp;<span class="ident" id="4779100">c</span><span class="op" id="4779101">)</span><br>
<span class="lineno"></span><span class="op" id="4779103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4779106">//&nbsp;stateBeginValue&nbsp;is&nbsp;the&nbsp;state&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;input.</span><br>
<span class="lineno">200</span><span class="keyword" id="4779169">func</span>&nbsp;<span class="ident" id="4779174">stateBeginValue</span><span class="op" id="4779189">(</span><span class="ident" id="4779190">s</span>&nbsp;<span class="op" id="4779192">*</span><span class="ident" id="4779193">scanner</span><span class="op" id="4779200">,</span>&nbsp;<span class="ident" id="4779202">c</span>&nbsp;<span class="builtintype" id="4779204">int</span><span class="op" id="4779207">)</span>&nbsp;<span class="builtintype" id="4779209">int</span>&nbsp;<span class="op" id="4779213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779216">if</span>&nbsp;<span class="ident" id="4779219">c</span>&nbsp;<span class="op" id="4779221">&lt;=</span>&nbsp;<span class="string" id="4779224">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4779228">&amp;&amp;</span>&nbsp;<span class="ident" id="4779231">isSpace</span><span class="op" id="4779238">(</span><span class="builtintype" id="4779239">rune</span><span class="op" id="4779243">(</span><span class="ident" id="4779244">c</span><span class="op" id="4779245">)</span><span class="op" id="4779246">)</span>&nbsp;<span class="op" id="4779248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779252">return</span>&nbsp;<span class="ident" id="4779259">scanSkipSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4779274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779277">switch</span>&nbsp;<span class="ident" id="4779284">c</span>&nbsp;<span class="op" id="4779286">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779289">case</span>&nbsp;<span class="string" id="4779294">&#39;{&#39;</span><span class="op" id="4779297">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4779301">s</span><span class="op" id="4779302">.</span><span class="ident" id="4779303">step</span>&nbsp;<span class="op" id="4779308">=</span>&nbsp;<span class="ident" id="4779310">stateBeginStringOrEmpty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4779336">s</span><span class="op" id="4779337">.</span><span class="ident" id="4779338">pushParseState</span><span class="op" id="4779352">(</span><span class="ident" id="4779353">parseObjectKey</span><span class="op" id="4779367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779371">return</span>&nbsp;<span class="ident" id="4779378">scanBeginObject</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779395">case</span>&nbsp;<span class="string" id="4779400">&#39;[&#39;</span><span class="op" id="4779403">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4779407">s</span><span class="op" id="4779408">.</span><span class="ident" id="4779409">step</span>&nbsp;<span class="op" id="4779414">=</span>&nbsp;<span class="ident" id="4779416">stateBeginValueOrEmpty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4779441">s</span><span class="op" id="4779442">.</span><span class="ident" id="4779443">pushParseState</span><span class="op" id="4779457">(</span><span class="ident" id="4779458">parseArrayValue</span><span class="op" id="4779473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779477">return</span>&nbsp;<span class="ident" id="4779484">scanBeginArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779500">case</span>&nbsp;<span class="string" id="4779505">&#39;&#34;&#39;</span><span class="op" id="4779508">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4779512">s</span><span class="op" id="4779513">.</span><span class="ident" id="4779514">step</span>&nbsp;<span class="op" id="4779519">=</span>&nbsp;<span class="ident" id="4779521">stateInString</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779537">return</span>&nbsp;<span class="ident" id="4779544">scanBeginLiteral</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779562">case</span>&nbsp;<span class="string" id="4779567">&#39;-&#39;</span><span class="op" id="4779570">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4779574">s</span><span class="op" id="4779575">.</span><span class="ident" id="4779576">step</span>&nbsp;<span class="op" id="4779581">=</span>&nbsp;<span class="ident" id="4779583">stateNeg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779594">return</span>&nbsp;<span class="ident" id="4779601">scanBeginLiteral</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779619">case</span>&nbsp;<span class="string" id="4779624">&#39;0&#39;</span><span class="op" id="4779627">:</span>&nbsp;<span class="comment" id="4779629">//&nbsp;beginning&nbsp;of&nbsp;0.123</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4779653">s</span><span class="op" id="4779654">.</span><span class="ident" id="4779655">step</span>&nbsp;<span class="op" id="4779660">=</span>&nbsp;<span class="ident" id="4779662">state0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779671">return</span>&nbsp;<span class="ident" id="4779678">scanBeginLiteral</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779696">case</span>&nbsp;<span class="string" id="4779701">&#39;t&#39;</span><span class="op" id="4779704">:</span>&nbsp;<span class="comment" id="4779706">//&nbsp;beginning&nbsp;of&nbsp;true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4779729">s</span><span class="op" id="4779730">.</span><span class="ident" id="4779731">step</span>&nbsp;<span class="op" id="4779736">=</span>&nbsp;<span class="ident" id="4779738">stateT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779747">return</span>&nbsp;<span class="ident" id="4779754">scanBeginLiteral</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779772">case</span>&nbsp;<span class="string" id="4779777">&#39;f&#39;</span><span class="op" id="4779780">:</span>&nbsp;<span class="comment" id="4779782">//&nbsp;beginning&nbsp;of&nbsp;false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4779806">s</span><span class="op" id="4779807">.</span><span class="ident" id="4779808">step</span>&nbsp;<span class="op" id="4779813">=</span>&nbsp;<span class="ident" id="4779815">stateF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779824">return</span>&nbsp;<span class="ident" id="4779831">scanBeginLiteral</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779849">case</span>&nbsp;<span class="string" id="4779854">&#39;n&#39;</span><span class="op" id="4779857">:</span>&nbsp;<span class="comment" id="4779859">//&nbsp;beginning&nbsp;of&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4779882">s</span><span class="op" id="4779883">.</span><span class="ident" id="4779884">step</span>&nbsp;<span class="op" id="4779889">=</span>&nbsp;<span class="ident" id="4779891">stateN</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779900">return</span>&nbsp;<span class="ident" id="4779907">scanBeginLiteral</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4779925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779928">if</span>&nbsp;<span class="string" id="4779931">&#39;1&#39;</span>&nbsp;<span class="op" id="4779935">&lt;=</span>&nbsp;<span class="ident" id="4779938">c</span>&nbsp;<span class="op" id="4779940">&amp;&amp;</span>&nbsp;<span class="ident" id="4779943">c</span>&nbsp;<span class="op" id="4779945">&lt;=</span>&nbsp;<span class="string" id="4779948">&#39;9&#39;</span>&nbsp;<span class="op" id="4779952">{</span>&nbsp;<span class="comment" id="4779954">//&nbsp;beginning&nbsp;of&nbsp;1234.5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4779979">s</span><span class="op" id="4779980">.</span><span class="ident" id="4779981">step</span>&nbsp;<span class="op" id="4779986">=</span>&nbsp;<span class="ident" id="4779988">state1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4779997">return</span>&nbsp;<span class="ident" id="4780004">scanBeginLiteral</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4780022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4780025">return</span>&nbsp;<span class="ident" id="4780032">s</span><span class="op" id="4780033">.</span><span class="builtintype" id="4780034">error</span><span class="op" id="4780039">(</span><span class="ident" id="4780040">c</span><span class="op" id="4780041">,</span>&nbsp;<span class="string" id="4780043">&#34;looking&nbsp;for&nbsp;beginning&nbsp;of&nbsp;value&#34;</span><span class="op" id="4780075">)</span><br>
<span class="lineno"></span><span class="op" id="4780077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4780080">//&nbsp;stateBeginStringOrEmpty&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`{`.</span><br>
<span class="lineno">240</span><span class="keyword" id="4780139">func</span>&nbsp;<span class="ident" id="4780144">stateBeginStringOrEmpty</span><span class="op" id="4780167">(</span><span class="ident" id="4780168">s</span>&nbsp;<span class="op" id="4780170">*</span><span class="ident" id="4780171">scanner</span><span class="op" id="4780178">,</span>&nbsp;<span class="ident" id="4780180">c</span>&nbsp;<span class="builtintype" id="4780182">int</span><span class="op" id="4780185">)</span>&nbsp;<span class="builtintype" id="4780187">int</span>&nbsp;<span class="op" id="4780191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4780194">if</span>&nbsp;<span class="ident" id="4780197">c</span>&nbsp;<span class="op" id="4780199">&lt;=</span>&nbsp;<span class="string" id="4780202">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4780206">&amp;&amp;</span>&nbsp;<span class="ident" id="4780209">isSpace</span><span class="op" id="4780216">(</span><span class="builtintype" id="4780217">rune</span><span class="op" id="4780221">(</span><span class="ident" id="4780222">c</span><span class="op" id="4780223">)</span><span class="op" id="4780224">)</span>&nbsp;<span class="op" id="4780226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4780230">return</span>&nbsp;<span class="ident" id="4780237">scanSkipSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4780252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4780255">if</span>&nbsp;<span class="ident" id="4780258">c</span>&nbsp;<span class="op" id="4780260">==</span>&nbsp;<span class="string" id="4780263">&#39;}&#39;</span>&nbsp;<span class="op" id="4780267">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4780271">n</span>&nbsp;<span class="op" id="4780273">:=</span>&nbsp;<span class="builtinfunc" id="4780276">len</span><span class="op" id="4780279">(</span><span class="ident" id="4780280">s</span><span class="op" id="4780281">.</span><span class="ident" id="4780282">parseState</span><span class="op" id="4780292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4780296">s</span><span class="op" id="4780297">.</span><span class="ident" id="4780298">parseState</span><span class="op" id="4780308">[</span><span class="ident" id="4780309">n</span><span class="op" id="4780310">-</span><span class="num" id="4780311">1</span><span class="op" id="4780312">]</span>&nbsp;<span class="op" id="4780314">=</span>&nbsp;<span class="ident" id="4780316">parseObjectValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4780335">return</span>&nbsp;<span class="ident" id="4780342">stateEndValue</span><span class="op" id="4780355">(</span><span class="ident" id="4780356">s</span><span class="op" id="4780357">,</span>&nbsp;<span class="ident" id="4780359">c</span><span class="op" id="4780360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4780363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4780366">return</span>&nbsp;<span class="ident" id="4780373">stateBeginString</span><span class="op" id="4780389">(</span><span class="ident" id="4780390">s</span><span class="op" id="4780391">,</span>&nbsp;<span class="ident" id="4780393">c</span><span class="op" id="4780394">)</span><br>
<span class="lineno">250</span><span class="op" id="4780396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4780399">//&nbsp;stateBeginString&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`{&#34;key&#34;:&nbsp;value,`.</span><br>
<span class="lineno"></span><span class="keyword" id="4780464">func</span>&nbsp;<span class="ident" id="4780469">stateBeginString</span><span class="op" id="4780485">(</span><span class="ident" id="4780486">s</span>&nbsp;<span class="op" id="4780488">*</span><span class="ident" id="4780489">scanner</span><span class="op" id="4780496">,</span>&nbsp;<span class="ident" id="4780498">c</span>&nbsp;<span class="builtintype" id="4780500">int</span><span class="op" id="4780503">)</span>&nbsp;<span class="builtintype" id="4780505">int</span>&nbsp;<span class="op" id="4780509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4780512">if</span>&nbsp;<span class="ident" id="4780515">c</span>&nbsp;<span class="op" id="4780517">&lt;=</span>&nbsp;<span class="string" id="4780520">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4780524">&amp;&amp;</span>&nbsp;<span class="ident" id="4780527">isSpace</span><span class="op" id="4780534">(</span><span class="builtintype" id="4780535">rune</span><span class="op" id="4780539">(</span><span class="ident" id="4780540">c</span><span class="op" id="4780541">)</span><span class="op" id="4780542">)</span>&nbsp;<span class="op" id="4780544">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4780548">return</span>&nbsp;<span class="ident" id="4780555">scanSkipSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4780570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4780573">if</span>&nbsp;<span class="ident" id="4780576">c</span>&nbsp;<span class="op" id="4780578">==</span>&nbsp;<span class="string" id="4780581">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4780585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4780589">s</span><span class="op" id="4780590">.</span><span class="ident" id="4780591">step</span>&nbsp;<span class="op" id="4780596">=</span>&nbsp;<span class="ident" id="4780598">stateInString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4780614">return</span>&nbsp;<span class="ident" id="4780621">scanBeginLiteral</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4780639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4780642">return</span>&nbsp;<span class="ident" id="4780649">s</span><span class="op" id="4780650">.</span><span class="builtintype" id="4780651">error</span><span class="op" id="4780656">(</span><span class="ident" id="4780657">c</span><span class="op" id="4780658">,</span>&nbsp;<span class="string" id="4780660">&#34;looking&nbsp;for&nbsp;beginning&nbsp;of&nbsp;object&nbsp;key&nbsp;string&#34;</span><span class="op" id="4780704">)</span><br>
<span class="lineno"></span><span class="op" id="4780706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4780709">//&nbsp;stateEndValue&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;completing&nbsp;a&nbsp;value,</span><br>
<span class="lineno">265</span><span class="comment" id="4780765">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`{}`&nbsp;or&nbsp;`true`&nbsp;or&nbsp;`[&#34;x&#34;`.</span><br>
<span class="lineno"></span><span class="keyword" id="4780816">func</span>&nbsp;<span class="ident" id="4780821">stateEndValue</span><span class="op" id="4780834">(</span><span class="ident" id="4780835">s</span>&nbsp;<span class="op" id="4780837">*</span><span class="ident" id="4780838">scanner</span><span class="op" id="4780845">,</span>&nbsp;<span class="ident" id="4780847">c</span>&nbsp;<span class="builtintype" id="4780849">int</span><span class="op" id="4780852">)</span>&nbsp;<span class="builtintype" id="4780854">int</span>&nbsp;<span class="op" id="4780858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4780861">n</span>&nbsp;<span class="op" id="4780863">:=</span>&nbsp;<span class="builtinfunc" id="4780866">len</span><span class="op" id="4780869">(</span><span class="ident" id="4780870">s</span><span class="op" id="4780871">.</span><span class="ident" id="4780872">parseState</span><span class="op" id="4780882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4780885">if</span>&nbsp;<span class="ident" id="4780888">n</span>&nbsp;<span class="op" id="4780890">==</span>&nbsp;<span class="num" id="4780893">0</span>&nbsp;<span class="op" id="4780895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4780899">//&nbsp;Completed&nbsp;top-level&nbsp;before&nbsp;the&nbsp;current&nbsp;byte.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4780949">s</span><span class="op" id="4780950">.</span><span class="ident" id="4780951">step</span>&nbsp;<span class="op" id="4780956">=</span>&nbsp;<span class="ident" id="4780958">stateEndTop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4780972">s</span><span class="op" id="4780973">.</span><span class="ident" id="4780974">endTop</span>&nbsp;<span class="op" id="4780981">=</span>&nbsp;<span class="ident" id="4780983">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4780990">return</span>&nbsp;<span class="ident" id="4780997">stateEndTop</span><span class="op" id="4781008">(</span><span class="ident" id="4781009">s</span><span class="op" id="4781010">,</span>&nbsp;<span class="ident" id="4781012">c</span><span class="op" id="4781013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4781016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781019">if</span>&nbsp;<span class="ident" id="4781022">c</span>&nbsp;<span class="op" id="4781024">&lt;=</span>&nbsp;<span class="string" id="4781027">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4781031">&amp;&amp;</span>&nbsp;<span class="ident" id="4781034">isSpace</span><span class="op" id="4781041">(</span><span class="builtintype" id="4781042">rune</span><span class="op" id="4781046">(</span><span class="ident" id="4781047">c</span><span class="op" id="4781048">)</span><span class="op" id="4781049">)</span>&nbsp;<span class="op" id="4781051">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781055">s</span><span class="op" id="4781056">.</span><span class="ident" id="4781057">step</span>&nbsp;<span class="op" id="4781062">=</span>&nbsp;<span class="ident" id="4781064">stateEndValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781080">return</span>&nbsp;<span class="ident" id="4781087">scanSkipSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4781102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781105">ps</span>&nbsp;<span class="op" id="4781108">:=</span>&nbsp;<span class="ident" id="4781111">s</span><span class="op" id="4781112">.</span><span class="ident" id="4781113">parseState</span><span class="op" id="4781123">[</span><span class="ident" id="4781124">n</span><span class="op" id="4781125">-</span><span class="num" id="4781126">1</span><span class="op" id="4781127">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781130">switch</span>&nbsp;<span class="ident" id="4781137">ps</span>&nbsp;<span class="op" id="4781140">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781143">case</span>&nbsp;<span class="ident" id="4781148">parseObjectKey</span><span class="op" id="4781162">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781166">if</span>&nbsp;<span class="ident" id="4781169">c</span>&nbsp;<span class="op" id="4781171">==</span>&nbsp;<span class="string" id="4781174">&#39;:&#39;</span>&nbsp;<span class="op" id="4781178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781183">s</span><span class="op" id="4781184">.</span><span class="ident" id="4781185">parseState</span><span class="op" id="4781195">[</span><span class="ident" id="4781196">n</span><span class="op" id="4781197">-</span><span class="num" id="4781198">1</span><span class="op" id="4781199">]</span>&nbsp;<span class="op" id="4781201">=</span>&nbsp;<span class="ident" id="4781203">parseObjectValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781223">s</span><span class="op" id="4781224">.</span><span class="ident" id="4781225">step</span>&nbsp;<span class="op" id="4781230">=</span>&nbsp;<span class="ident" id="4781232">stateBeginValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781251">return</span>&nbsp;<span class="ident" id="4781258">scanObjectKey</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4781274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781278">return</span>&nbsp;<span class="ident" id="4781285">s</span><span class="op" id="4781286">.</span><span class="builtintype" id="4781287">error</span><span class="op" id="4781292">(</span><span class="ident" id="4781293">c</span><span class="op" id="4781294">,</span>&nbsp;<span class="string" id="4781296">&#34;after&nbsp;object&nbsp;key&#34;</span><span class="op" id="4781314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781317">case</span>&nbsp;<span class="ident" id="4781322">parseObjectValue</span><span class="op" id="4781338">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781342">if</span>&nbsp;<span class="ident" id="4781345">c</span>&nbsp;<span class="op" id="4781347">==</span>&nbsp;<span class="string" id="4781350">&#39;,&#39;</span>&nbsp;<span class="op" id="4781354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781359">s</span><span class="op" id="4781360">.</span><span class="ident" id="4781361">parseState</span><span class="op" id="4781371">[</span><span class="ident" id="4781372">n</span><span class="op" id="4781373">-</span><span class="num" id="4781374">1</span><span class="op" id="4781375">]</span>&nbsp;<span class="op" id="4781377">=</span>&nbsp;<span class="ident" id="4781379">parseObjectKey</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781397">s</span><span class="op" id="4781398">.</span><span class="ident" id="4781399">step</span>&nbsp;<span class="op" id="4781404">=</span>&nbsp;<span class="ident" id="4781406">stateBeginString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781426">return</span>&nbsp;<span class="ident" id="4781433">scanObjectValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4781451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781455">if</span>&nbsp;<span class="ident" id="4781458">c</span>&nbsp;<span class="op" id="4781460">==</span>&nbsp;<span class="string" id="4781463">&#39;}&#39;</span>&nbsp;<span class="op" id="4781467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781472">s</span><span class="op" id="4781473">.</span><span class="ident" id="4781474">popParseState</span><span class="op" id="4781487">(</span><span class="op" id="4781488">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781493">return</span>&nbsp;<span class="ident" id="4781500">scanEndObject</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4781516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781520">return</span>&nbsp;<span class="ident" id="4781527">s</span><span class="op" id="4781528">.</span><span class="builtintype" id="4781529">error</span><span class="op" id="4781534">(</span><span class="ident" id="4781535">c</span><span class="op" id="4781536">,</span>&nbsp;<span class="string" id="4781538">&#34;after&nbsp;object&nbsp;key:value&nbsp;pair&#34;</span><span class="op" id="4781567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781570">case</span>&nbsp;<span class="ident" id="4781575">parseArrayValue</span><span class="op" id="4781590">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781594">if</span>&nbsp;<span class="ident" id="4781597">c</span>&nbsp;<span class="op" id="4781599">==</span>&nbsp;<span class="string" id="4781602">&#39;,&#39;</span>&nbsp;<span class="op" id="4781606">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781611">s</span><span class="op" id="4781612">.</span><span class="ident" id="4781613">step</span>&nbsp;<span class="op" id="4781618">=</span>&nbsp;<span class="ident" id="4781620">stateBeginValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781639">return</span>&nbsp;<span class="ident" id="4781646">scanArrayValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4781663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781667">if</span>&nbsp;<span class="ident" id="4781670">c</span>&nbsp;<span class="op" id="4781672">==</span>&nbsp;<span class="string" id="4781675">&#39;]&#39;</span>&nbsp;<span class="op" id="4781679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4781684">s</span><span class="op" id="4781685">.</span><span class="ident" id="4781686">popParseState</span><span class="op" id="4781699">(</span><span class="op" id="4781700">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781705">return</span>&nbsp;<span class="ident" id="4781712">scanEndArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4781727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781731">return</span>&nbsp;<span class="ident" id="4781738">s</span><span class="op" id="4781739">.</span><span class="builtintype" id="4781740">error</span><span class="op" id="4781745">(</span><span class="ident" id="4781746">c</span><span class="op" id="4781747">,</span>&nbsp;<span class="string" id="4781749">&#34;after&nbsp;array&nbsp;element&#34;</span><span class="op" id="4781770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4781773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781776">return</span>&nbsp;<span class="ident" id="4781783">s</span><span class="op" id="4781784">.</span><span class="builtintype" id="4781785">error</span><span class="op" id="4781790">(</span><span class="ident" id="4781791">c</span><span class="op" id="4781792">,</span>&nbsp;<span class="string" id="4781794">&#34;&#34;</span><span class="op" id="4781796">)</span><br>
<span class="lineno">310</span><span class="op" id="4781798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4781801">//&nbsp;stateEndTop&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;finishing&nbsp;the&nbsp;top-level&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="4781866">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`{}`&nbsp;or&nbsp;`[1,2,3]`.</span><br>
<span class="lineno"></span><span class="comment" id="4781910">//&nbsp;Only&nbsp;space&nbsp;characters&nbsp;should&nbsp;be&nbsp;seen&nbsp;now.</span><br>
<span class="lineno">315</span><span class="keyword" id="4781955">func</span>&nbsp;<span class="ident" id="4781960">stateEndTop</span><span class="op" id="4781971">(</span><span class="ident" id="4781972">s</span>&nbsp;<span class="op" id="4781974">*</span><span class="ident" id="4781975">scanner</span><span class="op" id="4781982">,</span>&nbsp;<span class="ident" id="4781984">c</span>&nbsp;<span class="builtintype" id="4781986">int</span><span class="op" id="4781989">)</span>&nbsp;<span class="builtintype" id="4781991">int</span>&nbsp;<span class="op" id="4781995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4781998">if</span>&nbsp;<span class="ident" id="4782001">c</span>&nbsp;<span class="op" id="4782003">!=</span>&nbsp;<span class="string" id="4782006">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4782010">&amp;&amp;</span>&nbsp;<span class="ident" id="4782013">c</span>&nbsp;<span class="op" id="4782015">!=</span>&nbsp;<span class="string" id="4782018">&#39;\t&#39;</span>&nbsp;<span class="op" id="4782023">&amp;&amp;</span>&nbsp;<span class="ident" id="4782026">c</span>&nbsp;<span class="op" id="4782028">!=</span>&nbsp;<span class="string" id="4782031">&#39;\r&#39;</span>&nbsp;<span class="op" id="4782036">&amp;&amp;</span>&nbsp;<span class="ident" id="4782039">c</span>&nbsp;<span class="op" id="4782041">!=</span>&nbsp;<span class="string" id="4782044">&#39;\n&#39;</span>&nbsp;<span class="op" id="4782049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4782053">//&nbsp;Complain&nbsp;about&nbsp;non-space&nbsp;byte&nbsp;on&nbsp;next&nbsp;call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782102">s</span><span class="op" id="4782103">.</span><span class="builtintype" id="4782104">error</span><span class="op" id="4782109">(</span><span class="ident" id="4782110">c</span><span class="op" id="4782111">,</span>&nbsp;<span class="string" id="4782113">&#34;after&nbsp;top-level&nbsp;value&#34;</span><span class="op" id="4782136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4782139">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782142">return</span>&nbsp;<span class="ident" id="4782149">scanEnd</span><br>
<span class="lineno"></span><span class="op" id="4782157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4782160">//&nbsp;stateInString&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;`.</span><br>
<span class="lineno"></span><span class="keyword" id="4782209">func</span>&nbsp;<span class="ident" id="4782214">stateInString</span><span class="op" id="4782227">(</span><span class="ident" id="4782228">s</span>&nbsp;<span class="op" id="4782230">*</span><span class="ident" id="4782231">scanner</span><span class="op" id="4782238">,</span>&nbsp;<span class="ident" id="4782240">c</span>&nbsp;<span class="builtintype" id="4782242">int</span><span class="op" id="4782245">)</span>&nbsp;<span class="builtintype" id="4782247">int</span>&nbsp;<span class="op" id="4782251">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782254">if</span>&nbsp;<span class="ident" id="4782257">c</span>&nbsp;<span class="op" id="4782259">==</span>&nbsp;<span class="string" id="4782262">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4782266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782270">s</span><span class="op" id="4782271">.</span><span class="ident" id="4782272">step</span>&nbsp;<span class="op" id="4782277">=</span>&nbsp;<span class="ident" id="4782279">stateEndValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782295">return</span>&nbsp;<span class="ident" id="4782302">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4782316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782319">if</span>&nbsp;<span class="ident" id="4782322">c</span>&nbsp;<span class="op" id="4782324">==</span>&nbsp;<span class="string" id="4782327">&#39;\\&#39;</span>&nbsp;<span class="op" id="4782332">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782336">s</span><span class="op" id="4782337">.</span><span class="ident" id="4782338">step</span>&nbsp;<span class="op" id="4782343">=</span>&nbsp;<span class="ident" id="4782345">stateInStringEsc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782364">return</span>&nbsp;<span class="ident" id="4782371">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4782385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782388">if</span>&nbsp;<span class="ident" id="4782391">c</span>&nbsp;<span class="op" id="4782393">&lt;</span>&nbsp;<span class="num" id="4782395">0x20</span>&nbsp;<span class="op" id="4782400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782404">return</span>&nbsp;<span class="ident" id="4782411">s</span><span class="op" id="4782412">.</span><span class="builtintype" id="4782413">error</span><span class="op" id="4782418">(</span><span class="ident" id="4782419">c</span><span class="op" id="4782420">,</span>&nbsp;<span class="string" id="4782422">&#34;in&nbsp;string&nbsp;literal&#34;</span><span class="op" id="4782441">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4782444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782447">return</span>&nbsp;<span class="ident" id="4782454">scanContinue</span><br>
<span class="lineno"></span><span class="op" id="4782467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4782470">//&nbsp;stateInStringEsc&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;\`&nbsp;during&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno">340</span><span class="keyword" id="4782546">func</span>&nbsp;<span class="ident" id="4782551">stateInStringEsc</span><span class="op" id="4782567">(</span><span class="ident" id="4782568">s</span>&nbsp;<span class="op" id="4782570">*</span><span class="ident" id="4782571">scanner</span><span class="op" id="4782578">,</span>&nbsp;<span class="ident" id="4782580">c</span>&nbsp;<span class="builtintype" id="4782582">int</span><span class="op" id="4782585">)</span>&nbsp;<span class="builtintype" id="4782587">int</span>&nbsp;<span class="op" id="4782591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782594">switch</span>&nbsp;<span class="ident" id="4782601">c</span>&nbsp;<span class="op" id="4782603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782606">case</span>&nbsp;<span class="string" id="4782611">&#39;b&#39;</span><span class="op" id="4782614">,</span>&nbsp;<span class="string" id="4782616">&#39;f&#39;</span><span class="op" id="4782619">,</span>&nbsp;<span class="string" id="4782621">&#39;n&#39;</span><span class="op" id="4782624">,</span>&nbsp;<span class="string" id="4782626">&#39;r&#39;</span><span class="op" id="4782629">,</span>&nbsp;<span class="string" id="4782631">&#39;t&#39;</span><span class="op" id="4782634">,</span>&nbsp;<span class="string" id="4782636">&#39;\\&#39;</span><span class="op" id="4782640">,</span>&nbsp;<span class="string" id="4782642">&#39;/&#39;</span><span class="op" id="4782645">,</span>&nbsp;<span class="string" id="4782647">&#39;&#34;&#39;</span><span class="op" id="4782650">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782654">s</span><span class="op" id="4782655">.</span><span class="ident" id="4782656">step</span>&nbsp;<span class="op" id="4782661">=</span>&nbsp;<span class="ident" id="4782663">stateInString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782679">return</span>&nbsp;<span class="ident" id="4782686">scanContinue</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4782700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782703">if</span>&nbsp;<span class="ident" id="4782706">c</span>&nbsp;<span class="op" id="4782708">==</span>&nbsp;<span class="string" id="4782711">&#39;u&#39;</span>&nbsp;<span class="op" id="4782715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782719">s</span><span class="op" id="4782720">.</span><span class="ident" id="4782721">step</span>&nbsp;<span class="op" id="4782726">=</span>&nbsp;<span class="ident" id="4782728">stateInStringEscU</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782748">return</span>&nbsp;<span class="ident" id="4782755">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4782769">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782772">return</span>&nbsp;<span class="ident" id="4782779">s</span><span class="op" id="4782780">.</span><span class="builtintype" id="4782781">error</span><span class="op" id="4782786">(</span><span class="ident" id="4782787">c</span><span class="op" id="4782788">,</span>&nbsp;<span class="string" id="4782790">&#34;in&nbsp;string&nbsp;escape&nbsp;code&#34;</span><span class="op" id="4782813">)</span><br>
<span class="lineno"></span><span class="op" id="4782815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4782818">//&nbsp;stateInStringEscU&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;\u`&nbsp;during&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4782896">func</span>&nbsp;<span class="ident" id="4782901">stateInStringEscU</span><span class="op" id="4782918">(</span><span class="ident" id="4782919">s</span>&nbsp;<span class="op" id="4782921">*</span><span class="ident" id="4782922">scanner</span><span class="op" id="4782929">,</span>&nbsp;<span class="ident" id="4782931">c</span>&nbsp;<span class="builtintype" id="4782933">int</span><span class="op" id="4782936">)</span>&nbsp;<span class="builtintype" id="4782938">int</span>&nbsp;<span class="op" id="4782942">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782945">if</span>&nbsp;<span class="string" id="4782948">&#39;0&#39;</span>&nbsp;<span class="op" id="4782952">&lt;=</span>&nbsp;<span class="ident" id="4782955">c</span>&nbsp;<span class="op" id="4782957">&amp;&amp;</span>&nbsp;<span class="ident" id="4782960">c</span>&nbsp;<span class="op" id="4782962">&lt;=</span>&nbsp;<span class="string" id="4782965">&#39;9&#39;</span>&nbsp;<span class="op" id="4782969">||</span>&nbsp;<span class="string" id="4782972">&#39;a&#39;</span>&nbsp;<span class="op" id="4782976">&lt;=</span>&nbsp;<span class="ident" id="4782979">c</span>&nbsp;<span class="op" id="4782981">&amp;&amp;</span>&nbsp;<span class="ident" id="4782984">c</span>&nbsp;<span class="op" id="4782986">&lt;=</span>&nbsp;<span class="string" id="4782989">&#39;f&#39;</span>&nbsp;<span class="op" id="4782993">||</span>&nbsp;<span class="string" id="4782996">&#39;A&#39;</span>&nbsp;<span class="op" id="4783000">&lt;=</span>&nbsp;<span class="ident" id="4783003">c</span>&nbsp;<span class="op" id="4783005">&amp;&amp;</span>&nbsp;<span class="ident" id="4783008">c</span>&nbsp;<span class="op" id="4783010">&lt;=</span>&nbsp;<span class="string" id="4783013">&#39;F&#39;</span>&nbsp;<span class="op" id="4783017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783021">s</span><span class="op" id="4783022">.</span><span class="ident" id="4783023">step</span>&nbsp;<span class="op" id="4783028">=</span>&nbsp;<span class="ident" id="4783030">stateInStringEscU1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783051">return</span>&nbsp;<span class="ident" id="4783058">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4783075">//&nbsp;numbers</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783087">return</span>&nbsp;<span class="ident" id="4783094">s</span><span class="op" id="4783095">.</span><span class="builtintype" id="4783096">error</span><span class="op" id="4783101">(</span><span class="ident" id="4783102">c</span><span class="op" id="4783103">,</span>&nbsp;<span class="string" id="4783105">&#34;in&nbsp;\\u&nbsp;hexadecimal&nbsp;character&nbsp;escape&#34;</span><span class="op" id="4783142">)</span><br>
<span class="lineno"></span><span class="op" id="4783144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4783147">//&nbsp;stateInStringEscU1&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;\u1`&nbsp;during&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4783227">func</span>&nbsp;<span class="ident" id="4783232">stateInStringEscU1</span><span class="op" id="4783250">(</span><span class="ident" id="4783251">s</span>&nbsp;<span class="op" id="4783253">*</span><span class="ident" id="4783254">scanner</span><span class="op" id="4783261">,</span>&nbsp;<span class="ident" id="4783263">c</span>&nbsp;<span class="builtintype" id="4783265">int</span><span class="op" id="4783268">)</span>&nbsp;<span class="builtintype" id="4783270">int</span>&nbsp;<span class="op" id="4783274">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783277">if</span>&nbsp;<span class="string" id="4783280">&#39;0&#39;</span>&nbsp;<span class="op" id="4783284">&lt;=</span>&nbsp;<span class="ident" id="4783287">c</span>&nbsp;<span class="op" id="4783289">&amp;&amp;</span>&nbsp;<span class="ident" id="4783292">c</span>&nbsp;<span class="op" id="4783294">&lt;=</span>&nbsp;<span class="string" id="4783297">&#39;9&#39;</span>&nbsp;<span class="op" id="4783301">||</span>&nbsp;<span class="string" id="4783304">&#39;a&#39;</span>&nbsp;<span class="op" id="4783308">&lt;=</span>&nbsp;<span class="ident" id="4783311">c</span>&nbsp;<span class="op" id="4783313">&amp;&amp;</span>&nbsp;<span class="ident" id="4783316">c</span>&nbsp;<span class="op" id="4783318">&lt;=</span>&nbsp;<span class="string" id="4783321">&#39;f&#39;</span>&nbsp;<span class="op" id="4783325">||</span>&nbsp;<span class="string" id="4783328">&#39;A&#39;</span>&nbsp;<span class="op" id="4783332">&lt;=</span>&nbsp;<span class="ident" id="4783335">c</span>&nbsp;<span class="op" id="4783337">&amp;&amp;</span>&nbsp;<span class="ident" id="4783340">c</span>&nbsp;<span class="op" id="4783342">&lt;=</span>&nbsp;<span class="string" id="4783345">&#39;F&#39;</span>&nbsp;<span class="op" id="4783349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783353">s</span><span class="op" id="4783354">.</span><span class="ident" id="4783355">step</span>&nbsp;<span class="op" id="4783360">=</span>&nbsp;<span class="ident" id="4783362">stateInStringEscU12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783384">return</span>&nbsp;<span class="ident" id="4783391">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4783408">//&nbsp;numbers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783420">return</span>&nbsp;<span class="ident" id="4783427">s</span><span class="op" id="4783428">.</span><span class="builtintype" id="4783429">error</span><span class="op" id="4783434">(</span><span class="ident" id="4783435">c</span><span class="op" id="4783436">,</span>&nbsp;<span class="string" id="4783438">&#34;in&nbsp;\\u&nbsp;hexadecimal&nbsp;character&nbsp;escape&#34;</span><span class="op" id="4783475">)</span><br>
<span class="lineno"></span><span class="op" id="4783477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4783480">//&nbsp;stateInStringEscU12&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;\u12`&nbsp;during&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4783562">func</span>&nbsp;<span class="ident" id="4783567">stateInStringEscU12</span><span class="op" id="4783586">(</span><span class="ident" id="4783587">s</span>&nbsp;<span class="op" id="4783589">*</span><span class="ident" id="4783590">scanner</span><span class="op" id="4783597">,</span>&nbsp;<span class="ident" id="4783599">c</span>&nbsp;<span class="builtintype" id="4783601">int</span><span class="op" id="4783604">)</span>&nbsp;<span class="builtintype" id="4783606">int</span>&nbsp;<span class="op" id="4783610">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783613">if</span>&nbsp;<span class="string" id="4783616">&#39;0&#39;</span>&nbsp;<span class="op" id="4783620">&lt;=</span>&nbsp;<span class="ident" id="4783623">c</span>&nbsp;<span class="op" id="4783625">&amp;&amp;</span>&nbsp;<span class="ident" id="4783628">c</span>&nbsp;<span class="op" id="4783630">&lt;=</span>&nbsp;<span class="string" id="4783633">&#39;9&#39;</span>&nbsp;<span class="op" id="4783637">||</span>&nbsp;<span class="string" id="4783640">&#39;a&#39;</span>&nbsp;<span class="op" id="4783644">&lt;=</span>&nbsp;<span class="ident" id="4783647">c</span>&nbsp;<span class="op" id="4783649">&amp;&amp;</span>&nbsp;<span class="ident" id="4783652">c</span>&nbsp;<span class="op" id="4783654">&lt;=</span>&nbsp;<span class="string" id="4783657">&#39;f&#39;</span>&nbsp;<span class="op" id="4783661">||</span>&nbsp;<span class="string" id="4783664">&#39;A&#39;</span>&nbsp;<span class="op" id="4783668">&lt;=</span>&nbsp;<span class="ident" id="4783671">c</span>&nbsp;<span class="op" id="4783673">&amp;&amp;</span>&nbsp;<span class="ident" id="4783676">c</span>&nbsp;<span class="op" id="4783678">&lt;=</span>&nbsp;<span class="string" id="4783681">&#39;F&#39;</span>&nbsp;<span class="op" id="4783685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783689">s</span><span class="op" id="4783690">.</span><span class="ident" id="4783691">step</span>&nbsp;<span class="op" id="4783696">=</span>&nbsp;<span class="ident" id="4783698">stateInStringEscU123</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783721">return</span>&nbsp;<span class="ident" id="4783728">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4783742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4783745">//&nbsp;numbers</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783757">return</span>&nbsp;<span class="ident" id="4783764">s</span><span class="op" id="4783765">.</span><span class="builtintype" id="4783766">error</span><span class="op" id="4783771">(</span><span class="ident" id="4783772">c</span><span class="op" id="4783773">,</span>&nbsp;<span class="string" id="4783775">&#34;in&nbsp;\\u&nbsp;hexadecimal&nbsp;character&nbsp;escape&#34;</span><span class="op" id="4783812">)</span><br>
<span class="lineno"></span><span class="op" id="4783814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4783817">//&nbsp;stateInStringEscU123&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;\u123`&nbsp;during&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4783901">func</span>&nbsp;<span class="ident" id="4783906">stateInStringEscU123</span><span class="op" id="4783926">(</span><span class="ident" id="4783927">s</span>&nbsp;<span class="op" id="4783929">*</span><span class="ident" id="4783930">scanner</span><span class="op" id="4783937">,</span>&nbsp;<span class="ident" id="4783939">c</span>&nbsp;<span class="builtintype" id="4783941">int</span><span class="op" id="4783944">)</span>&nbsp;<span class="builtintype" id="4783946">int</span>&nbsp;<span class="op" id="4783950">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783953">if</span>&nbsp;<span class="string" id="4783956">&#39;0&#39;</span>&nbsp;<span class="op" id="4783960">&lt;=</span>&nbsp;<span class="ident" id="4783963">c</span>&nbsp;<span class="op" id="4783965">&amp;&amp;</span>&nbsp;<span class="ident" id="4783968">c</span>&nbsp;<span class="op" id="4783970">&lt;=</span>&nbsp;<span class="string" id="4783973">&#39;9&#39;</span>&nbsp;<span class="op" id="4783977">||</span>&nbsp;<span class="string" id="4783980">&#39;a&#39;</span>&nbsp;<span class="op" id="4783984">&lt;=</span>&nbsp;<span class="ident" id="4783987">c</span>&nbsp;<span class="op" id="4783989">&amp;&amp;</span>&nbsp;<span class="ident" id="4783992">c</span>&nbsp;<span class="op" id="4783994">&lt;=</span>&nbsp;<span class="string" id="4783997">&#39;f&#39;</span>&nbsp;<span class="op" id="4784001">||</span>&nbsp;<span class="string" id="4784004">&#39;A&#39;</span>&nbsp;<span class="op" id="4784008">&lt;=</span>&nbsp;<span class="ident" id="4784011">c</span>&nbsp;<span class="op" id="4784013">&amp;&amp;</span>&nbsp;<span class="ident" id="4784016">c</span>&nbsp;<span class="op" id="4784018">&lt;=</span>&nbsp;<span class="string" id="4784021">&#39;F&#39;</span>&nbsp;<span class="op" id="4784025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784029">s</span><span class="op" id="4784030">.</span><span class="ident" id="4784031">step</span>&nbsp;<span class="op" id="4784036">=</span>&nbsp;<span class="ident" id="4784038">stateInString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784054">return</span>&nbsp;<span class="ident" id="4784061">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4784075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4784078">//&nbsp;numbers</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784090">return</span>&nbsp;<span class="ident" id="4784097">s</span><span class="op" id="4784098">.</span><span class="builtintype" id="4784099">error</span><span class="op" id="4784104">(</span><span class="ident" id="4784105">c</span><span class="op" id="4784106">,</span>&nbsp;<span class="string" id="4784108">&#34;in&nbsp;\\u&nbsp;hexadecimal&nbsp;character&nbsp;escape&#34;</span><span class="op" id="4784145">)</span><br>
<span class="lineno"></span><span class="op" id="4784147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4784150">//&nbsp;stateNeg&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`-`&nbsp;during&nbsp;a&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="4784210">func</span>&nbsp;<span class="ident" id="4784215">stateNeg</span><span class="op" id="4784223">(</span><span class="ident" id="4784224">s</span>&nbsp;<span class="op" id="4784226">*</span><span class="ident" id="4784227">scanner</span><span class="op" id="4784234">,</span>&nbsp;<span class="ident" id="4784236">c</span>&nbsp;<span class="builtintype" id="4784238">int</span><span class="op" id="4784241">)</span>&nbsp;<span class="builtintype" id="4784243">int</span>&nbsp;<span class="op" id="4784247">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784250">if</span>&nbsp;<span class="ident" id="4784253">c</span>&nbsp;<span class="op" id="4784255">==</span>&nbsp;<span class="string" id="4784258">&#39;0&#39;</span>&nbsp;<span class="op" id="4784262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784266">s</span><span class="op" id="4784267">.</span><span class="ident" id="4784268">step</span>&nbsp;<span class="op" id="4784273">=</span>&nbsp;<span class="ident" id="4784275">state0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784284">return</span>&nbsp;<span class="ident" id="4784291">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4784305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784308">if</span>&nbsp;<span class="string" id="4784311">&#39;1&#39;</span>&nbsp;<span class="op" id="4784315">&lt;=</span>&nbsp;<span class="ident" id="4784318">c</span>&nbsp;<span class="op" id="4784320">&amp;&amp;</span>&nbsp;<span class="ident" id="4784323">c</span>&nbsp;<span class="op" id="4784325">&lt;=</span>&nbsp;<span class="string" id="4784328">&#39;9&#39;</span>&nbsp;<span class="op" id="4784332">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784336">s</span><span class="op" id="4784337">.</span><span class="ident" id="4784338">step</span>&nbsp;<span class="op" id="4784343">=</span>&nbsp;<span class="ident" id="4784345">state1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784354">return</span>&nbsp;<span class="ident" id="4784361">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4784375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784378">return</span>&nbsp;<span class="ident" id="4784385">s</span><span class="op" id="4784386">.</span><span class="builtintype" id="4784387">error</span><span class="op" id="4784392">(</span><span class="ident" id="4784393">c</span><span class="op" id="4784394">,</span>&nbsp;<span class="string" id="4784396">&#34;in&nbsp;numeric&nbsp;literal&#34;</span><span class="op" id="4784416">)</span><br>
<span class="lineno"></span><span class="op" id="4784418">}</span><br>
<span class="lineno">405</span><br>
<span class="lineno"></span><span class="comment" id="4784421">//&nbsp;state1&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;a&nbsp;non-zero&nbsp;integer&nbsp;during&nbsp;a&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="4784494">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`1`&nbsp;or&nbsp;`100`&nbsp;but&nbsp;not&nbsp;`0`.</span><br>
<span class="lineno"></span><span class="keyword" id="4784545">func</span>&nbsp;<span class="ident" id="4784550">state1</span><span class="op" id="4784556">(</span><span class="ident" id="4784557">s</span>&nbsp;<span class="op" id="4784559">*</span><span class="ident" id="4784560">scanner</span><span class="op" id="4784567">,</span>&nbsp;<span class="ident" id="4784569">c</span>&nbsp;<span class="builtintype" id="4784571">int</span><span class="op" id="4784574">)</span>&nbsp;<span class="builtintype" id="4784576">int</span>&nbsp;<span class="op" id="4784580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784583">if</span>&nbsp;<span class="string" id="4784586">&#39;0&#39;</span>&nbsp;<span class="op" id="4784590">&lt;=</span>&nbsp;<span class="ident" id="4784593">c</span>&nbsp;<span class="op" id="4784595">&amp;&amp;</span>&nbsp;<span class="ident" id="4784598">c</span>&nbsp;<span class="op" id="4784600">&lt;=</span>&nbsp;<span class="string" id="4784603">&#39;9&#39;</span>&nbsp;<span class="op" id="4784607">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784611">s</span><span class="op" id="4784612">.</span><span class="ident" id="4784613">step</span>&nbsp;<span class="op" id="4784618">=</span>&nbsp;<span class="ident" id="4784620">state1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784629">return</span>&nbsp;<span class="ident" id="4784636">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4784650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784653">return</span>&nbsp;<span class="ident" id="4784660">state0</span><span class="op" id="4784666">(</span><span class="ident" id="4784667">s</span><span class="op" id="4784668">,</span>&nbsp;<span class="ident" id="4784670">c</span><span class="op" id="4784671">)</span><br>
<span class="lineno"></span><span class="op" id="4784673">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="comment" id="4784676">//&nbsp;state0&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`0`&nbsp;during&nbsp;a&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="4784734">func</span>&nbsp;<span class="ident" id="4784739">state0</span><span class="op" id="4784745">(</span><span class="ident" id="4784746">s</span>&nbsp;<span class="op" id="4784748">*</span><span class="ident" id="4784749">scanner</span><span class="op" id="4784756">,</span>&nbsp;<span class="ident" id="4784758">c</span>&nbsp;<span class="builtintype" id="4784760">int</span><span class="op" id="4784763">)</span>&nbsp;<span class="builtintype" id="4784765">int</span>&nbsp;<span class="op" id="4784769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784772">if</span>&nbsp;<span class="ident" id="4784775">c</span>&nbsp;<span class="op" id="4784777">==</span>&nbsp;<span class="string" id="4784780">&#39;.&#39;</span>&nbsp;<span class="op" id="4784784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784788">s</span><span class="op" id="4784789">.</span><span class="ident" id="4784790">step</span>&nbsp;<span class="op" id="4784795">=</span>&nbsp;<span class="ident" id="4784797">stateDot</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784808">return</span>&nbsp;<span class="ident" id="4784815">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4784829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784832">if</span>&nbsp;<span class="ident" id="4784835">c</span>&nbsp;<span class="op" id="4784837">==</span>&nbsp;<span class="string" id="4784840">&#39;e&#39;</span>&nbsp;<span class="op" id="4784844">||</span>&nbsp;<span class="ident" id="4784847">c</span>&nbsp;<span class="op" id="4784849">==</span>&nbsp;<span class="string" id="4784852">&#39;E&#39;</span>&nbsp;<span class="op" id="4784856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4784860">s</span><span class="op" id="4784861">.</span><span class="ident" id="4784862">step</span>&nbsp;<span class="op" id="4784867">=</span>&nbsp;<span class="ident" id="4784869">stateE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784878">return</span>&nbsp;<span class="ident" id="4784885">scanContinue</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4784899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4784902">return</span>&nbsp;<span class="ident" id="4784909">stateEndValue</span><span class="op" id="4784922">(</span><span class="ident" id="4784923">s</span><span class="op" id="4784924">,</span>&nbsp;<span class="ident" id="4784926">c</span><span class="op" id="4784927">)</span><br>
<span class="lineno"></span><span class="op" id="4784929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4784932">//&nbsp;stateDot&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;the&nbsp;integer&nbsp;and&nbsp;decimal&nbsp;point&nbsp;in&nbsp;a&nbsp;number,</span><br>
<span class="lineno">430</span><span class="comment" id="4785014">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`1.`.</span><br>
<span class="lineno"></span><span class="keyword" id="4785045">func</span>&nbsp;<span class="ident" id="4785050">stateDot</span><span class="op" id="4785058">(</span><span class="ident" id="4785059">s</span>&nbsp;<span class="op" id="4785061">*</span><span class="ident" id="4785062">scanner</span><span class="op" id="4785069">,</span>&nbsp;<span class="ident" id="4785071">c</span>&nbsp;<span class="builtintype" id="4785073">int</span><span class="op" id="4785076">)</span>&nbsp;<span class="builtintype" id="4785078">int</span>&nbsp;<span class="op" id="4785082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785085">if</span>&nbsp;<span class="string" id="4785088">&#39;0&#39;</span>&nbsp;<span class="op" id="4785092">&lt;=</span>&nbsp;<span class="ident" id="4785095">c</span>&nbsp;<span class="op" id="4785097">&amp;&amp;</span>&nbsp;<span class="ident" id="4785100">c</span>&nbsp;<span class="op" id="4785102">&lt;=</span>&nbsp;<span class="string" id="4785105">&#39;9&#39;</span>&nbsp;<span class="op" id="4785109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785113">s</span><span class="op" id="4785114">.</span><span class="ident" id="4785115">step</span>&nbsp;<span class="op" id="4785120">=</span>&nbsp;<span class="ident" id="4785122">stateDot0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785134">return</span>&nbsp;<span class="ident" id="4785141">scanContinue</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4785155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785158">return</span>&nbsp;<span class="ident" id="4785165">s</span><span class="op" id="4785166">.</span><span class="builtintype" id="4785167">error</span><span class="op" id="4785172">(</span><span class="ident" id="4785173">c</span><span class="op" id="4785174">,</span>&nbsp;<span class="string" id="4785176">&#34;after&nbsp;decimal&nbsp;point&nbsp;in&nbsp;numeric&nbsp;literal&#34;</span><span class="op" id="4785216">)</span><br>
<span class="lineno"></span><span class="op" id="4785218">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4785221">//&nbsp;stateDot0&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;the&nbsp;integer,&nbsp;decimal&nbsp;point,&nbsp;and&nbsp;subsequent</span><br>
<span class="lineno">440</span><span class="comment" id="4785304">//&nbsp;digits&nbsp;of&nbsp;a&nbsp;number,&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`3.14`.</span><br>
<span class="lineno"></span><span class="keyword" id="4785357">func</span>&nbsp;<span class="ident" id="4785362">stateDot0</span><span class="op" id="4785371">(</span><span class="ident" id="4785372">s</span>&nbsp;<span class="op" id="4785374">*</span><span class="ident" id="4785375">scanner</span><span class="op" id="4785382">,</span>&nbsp;<span class="ident" id="4785384">c</span>&nbsp;<span class="builtintype" id="4785386">int</span><span class="op" id="4785389">)</span>&nbsp;<span class="builtintype" id="4785391">int</span>&nbsp;<span class="op" id="4785395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785398">if</span>&nbsp;<span class="string" id="4785401">&#39;0&#39;</span>&nbsp;<span class="op" id="4785405">&lt;=</span>&nbsp;<span class="ident" id="4785408">c</span>&nbsp;<span class="op" id="4785410">&amp;&amp;</span>&nbsp;<span class="ident" id="4785413">c</span>&nbsp;<span class="op" id="4785415">&lt;=</span>&nbsp;<span class="string" id="4785418">&#39;9&#39;</span>&nbsp;<span class="op" id="4785422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785426">s</span><span class="op" id="4785427">.</span><span class="ident" id="4785428">step</span>&nbsp;<span class="op" id="4785433">=</span>&nbsp;<span class="ident" id="4785435">stateDot0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785447">return</span>&nbsp;<span class="ident" id="4785454">scanContinue</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4785468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785471">if</span>&nbsp;<span class="ident" id="4785474">c</span>&nbsp;<span class="op" id="4785476">==</span>&nbsp;<span class="string" id="4785479">&#39;e&#39;</span>&nbsp;<span class="op" id="4785483">||</span>&nbsp;<span class="ident" id="4785486">c</span>&nbsp;<span class="op" id="4785488">==</span>&nbsp;<span class="string" id="4785491">&#39;E&#39;</span>&nbsp;<span class="op" id="4785495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785499">s</span><span class="op" id="4785500">.</span><span class="ident" id="4785501">step</span>&nbsp;<span class="op" id="4785506">=</span>&nbsp;<span class="ident" id="4785508">stateE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785517">return</span>&nbsp;<span class="ident" id="4785524">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4785538">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785541">return</span>&nbsp;<span class="ident" id="4785548">stateEndValue</span><span class="op" id="4785561">(</span><span class="ident" id="4785562">s</span><span class="op" id="4785563">,</span>&nbsp;<span class="ident" id="4785565">c</span><span class="op" id="4785566">)</span><br>
<span class="lineno"></span><span class="op" id="4785568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4785571">//&nbsp;stateE&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;the&nbsp;mantissa&nbsp;and&nbsp;e&nbsp;in&nbsp;a&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="4785640">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`314e`&nbsp;or&nbsp;`0.314e`.</span><br>
<span class="lineno">455</span><span class="keyword" id="4785685">func</span>&nbsp;<span class="ident" id="4785690">stateE</span><span class="op" id="4785696">(</span><span class="ident" id="4785697">s</span>&nbsp;<span class="op" id="4785699">*</span><span class="ident" id="4785700">scanner</span><span class="op" id="4785707">,</span>&nbsp;<span class="ident" id="4785709">c</span>&nbsp;<span class="builtintype" id="4785711">int</span><span class="op" id="4785714">)</span>&nbsp;<span class="builtintype" id="4785716">int</span>&nbsp;<span class="op" id="4785720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785723">if</span>&nbsp;<span class="ident" id="4785726">c</span>&nbsp;<span class="op" id="4785728">==</span>&nbsp;<span class="string" id="4785731">&#39;+&#39;</span>&nbsp;<span class="op" id="4785735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785739">s</span><span class="op" id="4785740">.</span><span class="ident" id="4785741">step</span>&nbsp;<span class="op" id="4785746">=</span>&nbsp;<span class="ident" id="4785748">stateESign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785761">return</span>&nbsp;<span class="ident" id="4785768">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4785782">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785785">if</span>&nbsp;<span class="ident" id="4785788">c</span>&nbsp;<span class="op" id="4785790">==</span>&nbsp;<span class="string" id="4785793">&#39;-&#39;</span>&nbsp;<span class="op" id="4785797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4785801">s</span><span class="op" id="4785802">.</span><span class="ident" id="4785803">step</span>&nbsp;<span class="op" id="4785808">=</span>&nbsp;<span class="ident" id="4785810">stateESign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785823">return</span>&nbsp;<span class="ident" id="4785830">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4785844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4785847">return</span>&nbsp;<span class="ident" id="4785854">stateESign</span><span class="op" id="4785864">(</span><span class="ident" id="4785865">s</span><span class="op" id="4785866">,</span>&nbsp;<span class="ident" id="4785868">c</span><span class="op" id="4785869">)</span><br>
<span class="lineno">465</span><span class="op" id="4785871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4785874">//&nbsp;stateESign&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;the&nbsp;mantissa,&nbsp;e,&nbsp;and&nbsp;sign&nbsp;in&nbsp;a&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="4785954">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`314e-`&nbsp;or&nbsp;`0.314e+`.</span><br>
<span class="lineno"></span><span class="keyword" id="4786001">func</span>&nbsp;<span class="ident" id="4786006">stateESign</span><span class="op" id="4786016">(</span><span class="ident" id="4786017">s</span>&nbsp;<span class="op" id="4786019">*</span><span class="ident" id="4786020">scanner</span><span class="op" id="4786027">,</span>&nbsp;<span class="ident" id="4786029">c</span>&nbsp;<span class="builtintype" id="4786031">int</span><span class="op" id="4786034">)</span>&nbsp;<span class="builtintype" id="4786036">int</span>&nbsp;<span class="op" id="4786040">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786043">if</span>&nbsp;<span class="string" id="4786046">&#39;0&#39;</span>&nbsp;<span class="op" id="4786050">&lt;=</span>&nbsp;<span class="ident" id="4786053">c</span>&nbsp;<span class="op" id="4786055">&amp;&amp;</span>&nbsp;<span class="ident" id="4786058">c</span>&nbsp;<span class="op" id="4786060">&lt;=</span>&nbsp;<span class="string" id="4786063">&#39;9&#39;</span>&nbsp;<span class="op" id="4786067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4786071">s</span><span class="op" id="4786072">.</span><span class="ident" id="4786073">step</span>&nbsp;<span class="op" id="4786078">=</span>&nbsp;<span class="ident" id="4786080">stateE0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786090">return</span>&nbsp;<span class="ident" id="4786097">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4786111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786114">return</span>&nbsp;<span class="ident" id="4786121">s</span><span class="op" id="4786122">.</span><span class="builtintype" id="4786123">error</span><span class="op" id="4786128">(</span><span class="ident" id="4786129">c</span><span class="op" id="4786130">,</span>&nbsp;<span class="string" id="4786132">&#34;in&nbsp;exponent&nbsp;of&nbsp;numeric&nbsp;literal&#34;</span><span class="op" id="4786164">)</span><br>
<span class="lineno">475</span><span class="op" id="4786166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4786169">//&nbsp;stateE0&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;the&nbsp;mantissa,&nbsp;e,&nbsp;optional&nbsp;sign,</span><br>
<span class="lineno"></span><span class="comment" id="4786239">//&nbsp;and&nbsp;at&nbsp;least&nbsp;one&nbsp;digit&nbsp;of&nbsp;the&nbsp;exponent&nbsp;in&nbsp;a&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="4786294">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`314e-2`&nbsp;or&nbsp;`0.314e+1`&nbsp;or&nbsp;`3.14e0`.</span><br>
<span class="lineno">480</span><span class="keyword" id="4786355">func</span>&nbsp;<span class="ident" id="4786360">stateE0</span><span class="op" id="4786367">(</span><span class="ident" id="4786368">s</span>&nbsp;<span class="op" id="4786370">*</span><span class="ident" id="4786371">scanner</span><span class="op" id="4786378">,</span>&nbsp;<span class="ident" id="4786380">c</span>&nbsp;<span class="builtintype" id="4786382">int</span><span class="op" id="4786385">)</span>&nbsp;<span class="builtintype" id="4786387">int</span>&nbsp;<span class="op" id="4786391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786394">if</span>&nbsp;<span class="string" id="4786397">&#39;0&#39;</span>&nbsp;<span class="op" id="4786401">&lt;=</span>&nbsp;<span class="ident" id="4786404">c</span>&nbsp;<span class="op" id="4786406">&amp;&amp;</span>&nbsp;<span class="ident" id="4786409">c</span>&nbsp;<span class="op" id="4786411">&lt;=</span>&nbsp;<span class="string" id="4786414">&#39;9&#39;</span>&nbsp;<span class="op" id="4786418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4786422">s</span><span class="op" id="4786423">.</span><span class="ident" id="4786424">step</span>&nbsp;<span class="op" id="4786429">=</span>&nbsp;<span class="ident" id="4786431">stateE0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786441">return</span>&nbsp;<span class="ident" id="4786448">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4786462">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786465">return</span>&nbsp;<span class="ident" id="4786472">stateEndValue</span><span class="op" id="4786485">(</span><span class="ident" id="4786486">s</span><span class="op" id="4786487">,</span>&nbsp;<span class="ident" id="4786489">c</span><span class="op" id="4786490">)</span><br>
<span class="lineno"></span><span class="op" id="4786492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4786495">//&nbsp;stateT&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`t`.</span><br>
<span class="lineno"></span><span class="keyword" id="4786537">func</span>&nbsp;<span class="ident" id="4786542">stateT</span><span class="op" id="4786548">(</span><span class="ident" id="4786549">s</span>&nbsp;<span class="op" id="4786551">*</span><span class="ident" id="4786552">scanner</span><span class="op" id="4786559">,</span>&nbsp;<span class="ident" id="4786561">c</span>&nbsp;<span class="builtintype" id="4786563">int</span><span class="op" id="4786566">)</span>&nbsp;<span class="builtintype" id="4786568">int</span>&nbsp;<span class="op" id="4786572">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786575">if</span>&nbsp;<span class="ident" id="4786578">c</span>&nbsp;<span class="op" id="4786580">==</span>&nbsp;<span class="string" id="4786583">&#39;r&#39;</span>&nbsp;<span class="op" id="4786587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4786591">s</span><span class="op" id="4786592">.</span><span class="ident" id="4786593">step</span>&nbsp;<span class="op" id="4786598">=</span>&nbsp;<span class="ident" id="4786600">stateTr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786610">return</span>&nbsp;<span class="ident" id="4786617">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4786631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786634">return</span>&nbsp;<span class="ident" id="4786641">s</span><span class="op" id="4786642">.</span><span class="builtintype" id="4786643">error</span><span class="op" id="4786648">(</span><span class="ident" id="4786649">c</span><span class="op" id="4786650">,</span>&nbsp;<span class="string" id="4786652">&#34;in&nbsp;literal&nbsp;true&nbsp;(expecting&nbsp;&#39;r&#39;)&#34;</span><span class="op" id="4786685">)</span><br>
<span class="lineno">495</span><span class="op" id="4786687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4786690">//&nbsp;stateTr&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`tr`.</span><br>
<span class="lineno"></span><span class="keyword" id="4786734">func</span>&nbsp;<span class="ident" id="4786739">stateTr</span><span class="op" id="4786746">(</span><span class="ident" id="4786747">s</span>&nbsp;<span class="op" id="4786749">*</span><span class="ident" id="4786750">scanner</span><span class="op" id="4786757">,</span>&nbsp;<span class="ident" id="4786759">c</span>&nbsp;<span class="builtintype" id="4786761">int</span><span class="op" id="4786764">)</span>&nbsp;<span class="builtintype" id="4786766">int</span>&nbsp;<span class="op" id="4786770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786773">if</span>&nbsp;<span class="ident" id="4786776">c</span>&nbsp;<span class="op" id="4786778">==</span>&nbsp;<span class="string" id="4786781">&#39;u&#39;</span>&nbsp;<span class="op" id="4786785">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4786789">s</span><span class="op" id="4786790">.</span><span class="ident" id="4786791">step</span>&nbsp;<span class="op" id="4786796">=</span>&nbsp;<span class="ident" id="4786798">stateTru</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786809">return</span>&nbsp;<span class="ident" id="4786816">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4786830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786833">return</span>&nbsp;<span class="ident" id="4786840">s</span><span class="op" id="4786841">.</span><span class="builtintype" id="4786842">error</span><span class="op" id="4786847">(</span><span class="ident" id="4786848">c</span><span class="op" id="4786849">,</span>&nbsp;<span class="string" id="4786851">&#34;in&nbsp;literal&nbsp;true&nbsp;(expecting&nbsp;&#39;u&#39;)&#34;</span><span class="op" id="4786884">)</span><br>
<span class="lineno"></span><span class="op" id="4786886">}</span><br>
<span class="lineno">505</span><br>
<span class="lineno"></span><span class="comment" id="4786889">//&nbsp;stateTru&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`tru`.</span><br>
<span class="lineno"></span><span class="keyword" id="4786935">func</span>&nbsp;<span class="ident" id="4786940">stateTru</span><span class="op" id="4786948">(</span><span class="ident" id="4786949">s</span>&nbsp;<span class="op" id="4786951">*</span><span class="ident" id="4786952">scanner</span><span class="op" id="4786959">,</span>&nbsp;<span class="ident" id="4786961">c</span>&nbsp;<span class="builtintype" id="4786963">int</span><span class="op" id="4786966">)</span>&nbsp;<span class="builtintype" id="4786968">int</span>&nbsp;<span class="op" id="4786972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4786975">if</span>&nbsp;<span class="ident" id="4786978">c</span>&nbsp;<span class="op" id="4786980">==</span>&nbsp;<span class="string" id="4786983">&#39;e&#39;</span>&nbsp;<span class="op" id="4786987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4786991">s</span><span class="op" id="4786992">.</span><span class="ident" id="4786993">step</span>&nbsp;<span class="op" id="4786998">=</span>&nbsp;<span class="ident" id="4787000">stateEndValue</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4787016">return</span>&nbsp;<span class="ident" id="4787023">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4787037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4787040">return</span>&nbsp;<span class="ident" id="4787047">s</span><span class="op" id="4787048">.</span><span class="builtintype" id="4787049">error</span><span class="op" id="4787054">(</span><span class="ident" id="4787055">c</span><span class="op" id="4787056">,</span>&nbsp;<span class="string" id="4787058">&#34;in&nbsp;literal&nbsp;true&nbsp;(expecting&nbsp;&#39;e&#39;)&#34;</span><span class="op" id="4787091">)</span><br>
<span class="lineno"></span><span class="op" id="4787093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span><span class="comment" id="4787096">//&nbsp;stateF&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`f`.</span><br>
<span class="lineno"></span><span class="keyword" id="4787138">func</span>&nbsp;<span class="ident" id="4787143">stateF</span><span class="op" id="4787149">(</span><span class="ident" id="4787150">s</span>&nbsp;<span class="op" id="4787152">*</span><span class="ident" id="4787153">scanner</span><span class="op" id="4787160">,</span>&nbsp;<span class="ident" id="4787162">c</span>&nbsp;<span class="builtintype" id="4787164">int</span><span class="op" id="4787167">)</span>&nbsp;<span class="builtintype" id="4787169">int</span>&nbsp;<span class="op" id="4787173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4787176">if</span>&nbsp;<span class="ident" id="4787179">c</span>&nbsp;<span class="op" id="4787181">==</span>&nbsp;<span class="string" id="4787184">&#39;a&#39;</span>&nbsp;<span class="op" id="4787188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4787192">s</span><span class="op" id="4787193">.</span><span class="ident" id="4787194">step</span>&nbsp;<span class="op" id="4787199">=</span>&nbsp;<span class="ident" id="4787201">stateFa</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4787211">return</span>&nbsp;<span class="ident" id="4787218">scanContinue</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4787232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4787235">return</span>&nbsp;<span class="ident" id="4787242">s</span><span class="op" id="4787243">.</span><span class="builtintype" id="4787244">error</span><span class="op" id="4787249">(</span><span class="ident" id="4787250">c</span><span class="op" id="4787251">,</span>&nbsp;<span class="string" id="4787253">&#34;in&nbsp;literal&nbsp;false&nbsp;(expecting&nbsp;&#39;a&#39;)&#34;</span><span class="op" id="4787287">)</span><br>
<span class="lineno"></span><span class="op" id="4787289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4787292">//&nbsp;stateFa&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`fa`.</span><br>
<span class="lineno">525</span><span class="keyword" id="4787336">func</span>&nbsp;<span class="ident" id="4787341">stateFa</span><span class="op" id="4787348">(</span><span class="ident" id="4787349">s</span>&nbsp;<span class="op" id="4787351">*</span><span class="ident" id="4787352">scanner</span><span class="op" id="4787359">,</span>&nbsp;<span class="ident" id="4787361">c</span>&nbsp;<span class="builtintype" id="4787363">int</span><span class="op" id="4787366">)</span>&nbsp;<span class="builtintype" id="4787368">int</span>&nbsp;<span class="op" id="4787372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4787375">if</span>&nbsp;<span class="ident" id="4787378">c</span>&nbsp;<span class="op" id="4787380">==</span>&nbsp;<span class="string" id="4787383">&#39;l&#39;</span>&nbsp;<span class="op" id="4787387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4787391">s</span><span class="op" id="4787392">.</span><span class="ident" id="4787393">step</span>&nbsp;<span class="op" id="4787398">=</span>&nbsp;<span class="ident" id="4787400">stateFal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4787411">return</span>&nbsp;<span class="ident" id="4787418">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4787432">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4787435">return</span>&nbsp;<span class="ident" id="4787442">s</span><span class="op" id="4787443">.</span><span class="builtintype" id="4787444">error</span><span class="op" id="4787449">(</span><span class="ident" id="4787450">c</span><span class="op" id="4787451">,</span>&nbsp;<span class="string" id="4787453">&#34;in&nbsp;literal&nbsp;false&nbsp;(expecting&nbsp;&#39;l&#39;)&#34;</span><span class="op" id="4787487">)</span><br>
<span class="lineno"></span><span class="op" id="4787489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4787492">//&nbsp;stateFal&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`fal`.</span><br>
<span class="lineno"></span><span class="keyword" id="4787538">func</span>&nbsp;<span class="ident" id="4787543">stateFal</span><span class="op" id="4787551">(</span><span class="ident" id="4787552">s</span>&nbsp;<span class="op" id="4787554">*</span><span class="ident" id="4787555">scanner</span><span class="op" id="4787562">,</span>&nbsp;<span class="ident" id="4787564">c</span>&nbsp;<span class="builtintype" id="4787566">int</span><span class="op" id="4787569">)</span>&nbsp;<span class="builtintype" id="4787571">int</span>&nbsp;<span class="op" id="4787575">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4787578">if</span>&nbsp;<span class="ident" id="4787581">c</span>&nbsp;<span class="op" id="4787583">==</span>&nbsp;<span class="string" id="4787586">&#39;s&#39;</span>&nbsp;<span class="op" id="4787590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4787594">s</span><span class="op" id="4787595">.</span><span class="ident" id="4787596">step</span>&nbsp;<span class="op" id="4787601">=</span>&nbsp;<span class="ident" id="4787603">stateFals</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4787615">return</span>&nbsp;<span class="ident" id="4787622">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4787636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4787639">return</span>&nbsp;<span class="ident" id="4787646">s</span><span class="op" id="4787647">.</span><span class="builtintype" id="4787648">error</span><span class="op" id="4787653">(</span><span class="ident" id="4787654">c</span><span class="op" id="4787655">,</span>&nbsp;<span class="string" id="4787657">&#34;in&nbsp;literal&nbsp;false&nbsp;(expecting&nbsp;&#39;s&#39;)&#34;</span><span class="op" id="4787691">)</span><br>
<span class="lineno">540</span><span class="op" id="4787693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4787696">//&nbsp;stateFals&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`fals`.</span><br>
<span class="lineno"></span><span class="keyword" id="4787744">func</span>&nbsp;<span class="ident" id="4787749">stateFals</span><span class="op" id="4787758">(</span><span class="ident" id="4787759">s</span>&nbsp;<span class="op" id="4787761">*</span><span class="ident" id="4787762">scanner</span><span class="op" id="4787769">,</span>&nbsp;<span class="ident" id="4787771">c</span>&nbsp;<span class="builtintype" id="4787773">int</span><span class="op" id="4787776">)</span>&nbsp;<span class="builtintype" id="4787778">int</span>&nbsp;<span class="op" id="4787782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4787785">if</span>&nbsp;<span class="ident" id="4787788">c</span>&nbsp;<span class="op" id="4787790">==</span>&nbsp;<span class="string" id="4787793">&#39;e&#39;</span>&nbsp;<span class="op" id="4787797">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4787801">s</span><span class="op" id="4787802">.</span><span class="ident" id="4787803">step</span>&nbsp;<span class="op" id="4787808">=</span>&nbsp;<span class="ident" id="4787810">stateEndValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4787826">return</span>&nbsp;<span class="ident" id="4787833">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4787847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4787850">return</span>&nbsp;<span class="ident" id="4787857">s</span><span class="op" id="4787858">.</span><span class="builtintype" id="4787859">error</span><span class="op" id="4787864">(</span><span class="ident" id="4787865">c</span><span class="op" id="4787866">,</span>&nbsp;<span class="string" id="4787868">&#34;in&nbsp;literal&nbsp;false&nbsp;(expecting&nbsp;&#39;e&#39;)&#34;</span><span class="op" id="4787902">)</span><br>
<span class="lineno"></span><span class="op" id="4787904">}</span><br>
<span class="lineno">550</span><br>
<span class="lineno"></span><span class="comment" id="4787907">//&nbsp;stateN&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`n`.</span><br>
<span class="lineno"></span><span class="keyword" id="4787949">func</span>&nbsp;<span class="ident" id="4787954">stateN</span><span class="op" id="4787960">(</span><span class="ident" id="4787961">s</span>&nbsp;<span class="op" id="4787963">*</span><span class="ident" id="4787964">scanner</span><span class="op" id="4787971">,</span>&nbsp;<span class="ident" id="4787973">c</span>&nbsp;<span class="builtintype" id="4787975">int</span><span class="op" id="4787978">)</span>&nbsp;<span class="builtintype" id="4787980">int</span>&nbsp;<span class="op" id="4787984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4787987">if</span>&nbsp;<span class="ident" id="4787990">c</span>&nbsp;<span class="op" id="4787992">==</span>&nbsp;<span class="string" id="4787995">&#39;u&#39;</span>&nbsp;<span class="op" id="4787999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4788003">s</span><span class="op" id="4788004">.</span><span class="ident" id="4788005">step</span>&nbsp;<span class="op" id="4788010">=</span>&nbsp;<span class="ident" id="4788012">stateNu</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4788022">return</span>&nbsp;<span class="ident" id="4788029">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4788043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4788046">return</span>&nbsp;<span class="ident" id="4788053">s</span><span class="op" id="4788054">.</span><span class="builtintype" id="4788055">error</span><span class="op" id="4788060">(</span><span class="ident" id="4788061">c</span><span class="op" id="4788062">,</span>&nbsp;<span class="string" id="4788064">&#34;in&nbsp;literal&nbsp;null&nbsp;(expecting&nbsp;&#39;u&#39;)&#34;</span><span class="op" id="4788097">)</span><br>
<span class="lineno"></span><span class="op" id="4788099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span><span class="comment" id="4788102">//&nbsp;stateNu&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`nu`.</span><br>
<span class="lineno"></span><span class="keyword" id="4788146">func</span>&nbsp;<span class="ident" id="4788151">stateNu</span><span class="op" id="4788158">(</span><span class="ident" id="4788159">s</span>&nbsp;<span class="op" id="4788161">*</span><span class="ident" id="4788162">scanner</span><span class="op" id="4788169">,</span>&nbsp;<span class="ident" id="4788171">c</span>&nbsp;<span class="builtintype" id="4788173">int</span><span class="op" id="4788176">)</span>&nbsp;<span class="builtintype" id="4788178">int</span>&nbsp;<span class="op" id="4788182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4788185">if</span>&nbsp;<span class="ident" id="4788188">c</span>&nbsp;<span class="op" id="4788190">==</span>&nbsp;<span class="string" id="4788193">&#39;l&#39;</span>&nbsp;<span class="op" id="4788197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4788201">s</span><span class="op" id="4788202">.</span><span class="ident" id="4788203">step</span>&nbsp;<span class="op" id="4788208">=</span>&nbsp;<span class="ident" id="4788210">stateNul</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4788221">return</span>&nbsp;<span class="ident" id="4788228">scanContinue</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4788242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4788245">return</span>&nbsp;<span class="ident" id="4788252">s</span><span class="op" id="4788253">.</span><span class="builtintype" id="4788254">error</span><span class="op" id="4788259">(</span><span class="ident" id="4788260">c</span><span class="op" id="4788261">,</span>&nbsp;<span class="string" id="4788263">&#34;in&nbsp;literal&nbsp;null&nbsp;(expecting&nbsp;&#39;l&#39;)&#34;</span><span class="op" id="4788296">)</span><br>
<span class="lineno"></span><span class="op" id="4788298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4788301">//&nbsp;stateNul&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`nul`.</span><br>
<span class="lineno">570</span><span class="keyword" id="4788347">func</span>&nbsp;<span class="ident" id="4788352">stateNul</span><span class="op" id="4788360">(</span><span class="ident" id="4788361">s</span>&nbsp;<span class="op" id="4788363">*</span><span class="ident" id="4788364">scanner</span><span class="op" id="4788371">,</span>&nbsp;<span class="ident" id="4788373">c</span>&nbsp;<span class="builtintype" id="4788375">int</span><span class="op" id="4788378">)</span>&nbsp;<span class="builtintype" id="4788380">int</span>&nbsp;<span class="op" id="4788384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4788387">if</span>&nbsp;<span class="ident" id="4788390">c</span>&nbsp;<span class="op" id="4788392">==</span>&nbsp;<span class="string" id="4788395">&#39;l&#39;</span>&nbsp;<span class="op" id="4788399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4788403">s</span><span class="op" id="4788404">.</span><span class="ident" id="4788405">step</span>&nbsp;<span class="op" id="4788410">=</span>&nbsp;<span class="ident" id="4788412">stateEndValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4788428">return</span>&nbsp;<span class="ident" id="4788435">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4788449">}</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4788452">return</span>&nbsp;<span class="ident" id="4788459">s</span><span class="op" id="4788460">.</span><span class="builtintype" id="4788461">error</span><span class="op" id="4788466">(</span><span class="ident" id="4788467">c</span><span class="op" id="4788468">,</span>&nbsp;<span class="string" id="4788470">&#34;in&nbsp;literal&nbsp;null&nbsp;(expecting&nbsp;&#39;l&#39;)&#34;</span><span class="op" id="4788503">)</span><br>
<span class="lineno"></span><span class="op" id="4788505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4788508">//&nbsp;stateError&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reaching&nbsp;a&nbsp;syntax&nbsp;error,</span><br>
<span class="lineno"></span><span class="comment" id="4788566">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`[1}`&nbsp;or&nbsp;`5.1.2`.</span><br>
<span class="lineno">580</span><span class="keyword" id="4788609">func</span>&nbsp;<span class="ident" id="4788614">stateError</span><span class="op" id="4788624">(</span><span class="ident" id="4788625">s</span>&nbsp;<span class="op" id="4788627">*</span><span class="ident" id="4788628">scanner</span><span class="op" id="4788635">,</span>&nbsp;<span class="ident" id="4788637">c</span>&nbsp;<span class="builtintype" id="4788639">int</span><span class="op" id="4788642">)</span>&nbsp;<span class="builtintype" id="4788644">int</span>&nbsp;<span class="op" id="4788648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4788651">return</span>&nbsp;<span class="ident" id="4788658">scanError</span><br>
<span class="lineno"></span><span class="op" id="4788668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4788671">//&nbsp;error&nbsp;records&nbsp;an&nbsp;error&nbsp;and&nbsp;switches&nbsp;to&nbsp;the&nbsp;error&nbsp;state.</span><br>
<span class="lineno">585</span><span class="keyword" id="4788730">func</span>&nbsp;<span class="op" id="4788735">(</span><span class="ident" id="4788736">s</span>&nbsp;<span class="op" id="4788738">*</span><span class="ident" id="4788739">scanner</span><span class="op" id="4788746">)</span>&nbsp;<span class="builtintype" id="4788748">error</span><span class="op" id="4788753">(</span><span class="ident" id="4788754">c</span>&nbsp;<span class="builtintype" id="4788756">int</span><span class="op" id="4788759">,</span>&nbsp;<span class="ident" id="4788761">context</span>&nbsp;<span class="builtintype" id="4788769">string</span><span class="op" id="4788775">)</span>&nbsp;<span class="builtintype" id="4788777">int</span>&nbsp;<span class="op" id="4788781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4788784">s</span><span class="op" id="4788785">.</span><span class="ident" id="4788786">step</span>&nbsp;<span class="op" id="4788791">=</span>&nbsp;<span class="ident" id="4788793">stateError</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4788805">s</span><span class="op" id="4788806">.</span><span class="ident" id="4788807">err</span>&nbsp;<span class="op" id="4788811">=</span>&nbsp;<span class="op" id="4788813">&amp;</span><span class="ident" id="4788814">SyntaxError</span><span class="op" id="4788825">{</span><span class="string" id="4788826">&#34;invalid&nbsp;character&nbsp;&#34;</span>&nbsp;<span class="op" id="4788847">+</span>&nbsp;<span class="ident" id="4788849">quoteChar</span><span class="op" id="4788858">(</span><span class="ident" id="4788859">c</span><span class="op" id="4788860">)</span>&nbsp;<span class="op" id="4788862">+</span>&nbsp;<span class="string" id="4788864">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="4788868">+</span>&nbsp;<span class="ident" id="4788870">context</span><span class="op" id="4788877">,</span>&nbsp;<span class="ident" id="4788879">s</span><span class="op" id="4788880">.</span><span class="ident" id="4788881">bytes</span><span class="op" id="4788886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4788889">return</span>&nbsp;<span class="ident" id="4788896">scanError</span><br>
<span class="lineno"></span><span class="op" id="4788906">}</span><br>
<span class="lineno">590</span><br>
<span class="lineno"></span><span class="comment" id="4788909">//&nbsp;quoteChar&nbsp;formats&nbsp;c&nbsp;as&nbsp;a&nbsp;quoted&nbsp;character&nbsp;literal</span><br>
<span class="lineno"></span><span class="keyword" id="4788962">func</span>&nbsp;<span class="ident" id="4788967">quoteChar</span><span class="op" id="4788976">(</span><span class="ident" id="4788977">c</span>&nbsp;<span class="builtintype" id="4788979">int</span><span class="op" id="4788982">)</span>&nbsp;<span class="builtintype" id="4788984">string</span>&nbsp;<span class="op" id="4788991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4788994">//&nbsp;special&nbsp;cases&nbsp;-&nbsp;different&nbsp;from&nbsp;quoted&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4789044">if</span>&nbsp;<span class="ident" id="4789047">c</span>&nbsp;<span class="op" id="4789049">==</span>&nbsp;<span class="string" id="4789052">&#39;\&#39;&#39;</span>&nbsp;<span class="op" id="4789057">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4789061">return</span>&nbsp;<span class="string" id="4789068">`&#39;\&#39;&#39;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4789076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4789079">if</span>&nbsp;<span class="ident" id="4789082">c</span>&nbsp;<span class="op" id="4789084">==</span>&nbsp;<span class="string" id="4789087">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4789091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4789095">return</span>&nbsp;<span class="string" id="4789102">`&#39;&#34;&#39;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4789109">}</span><br>
<span class="lineno">600</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4789113">//&nbsp;use&nbsp;quoted&nbsp;string&nbsp;with&nbsp;different&nbsp;quotation&nbsp;marks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4789166">s</span>&nbsp;<span class="op" id="4789168">:=</span>&nbsp;<span class="ident" id="4789171">strconv</span><span class="op" id="4789178">.</span><span class="ident" id="4789179">Quote</span><span class="op" id="4789184">(</span><span class="builtintype" id="4789185">string</span><span class="op" id="4789191">(</span><span class="ident" id="4789192">c</span><span class="op" id="4789193">)</span><span class="op" id="4789194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4789197">return</span>&nbsp;<span class="string" id="4789204">&#34;&#39;&#34;</span>&nbsp;<span class="op" id="4789208">+</span>&nbsp;<span class="ident" id="4789210">s</span><span class="op" id="4789211">[</span><span class="num" id="4789212">1</span><span class="op" id="4789213">:</span><span class="builtinfunc" id="4789214">len</span><span class="op" id="4789217">(</span><span class="ident" id="4789218">s</span><span class="op" id="4789219">)</span><span class="op" id="4789220">-</span><span class="num" id="4789221">1</span><span class="op" id="4789222">]</span>&nbsp;<span class="op" id="4789224">+</span>&nbsp;<span class="string" id="4789226">&#34;&#39;&#34;</span><br>
<span class="lineno"></span><span class="op" id="4789230">}</span><br>
<span class="lineno">605</span><br>
<span class="lineno"></span><span class="comment" id="4789233">//&nbsp;undo&nbsp;causes&nbsp;the&nbsp;scanner&nbsp;to&nbsp;return&nbsp;scanCode&nbsp;from&nbsp;the&nbsp;next&nbsp;state&nbsp;transition.</span><br>
<span class="lineno"></span><span class="comment" id="4789311">//&nbsp;This&nbsp;gives&nbsp;callers&nbsp;a&nbsp;simple&nbsp;1-byte&nbsp;undo&nbsp;mechanism.</span><br>
<span class="lineno"></span><span class="keyword" id="4789365">func</span>&nbsp;<span class="op" id="4789370">(</span><span class="ident" id="4789371">s</span>&nbsp;<span class="op" id="4789373">*</span><span class="ident" id="4789374">scanner</span><span class="op" id="4789381">)</span>&nbsp;<span class="ident" id="4789383">undo</span><span class="op" id="4789387">(</span><span class="ident" id="4789388">scanCode</span>&nbsp;<span class="builtintype" id="4789397">int</span><span class="op" id="4789400">)</span>&nbsp;<span class="op" id="4789402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4789405">if</span>&nbsp;<span class="ident" id="4789408">s</span><span class="op" id="4789409">.</span><span class="ident" id="4789410">redo</span>&nbsp;<span class="op" id="4789415">{</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4789419">panic</span><span class="op" id="4789424">(</span><span class="string" id="4789425">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;scanner&#34;</span><span class="op" id="4789455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4789458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4789461">s</span><span class="op" id="4789462">.</span><span class="ident" id="4789463">redoCode</span>&nbsp;<span class="op" id="4789472">=</span>&nbsp;<span class="ident" id="4789474">scanCode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4789484">s</span><span class="op" id="4789485">.</span><span class="ident" id="4789486">redoState</span>&nbsp;<span class="op" id="4789496">=</span>&nbsp;<span class="ident" id="4789498">s</span><span class="op" id="4789499">.</span><span class="ident" id="4789500">step</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4789506">s</span><span class="op" id="4789507">.</span><span class="ident" id="4789508">step</span>&nbsp;<span class="op" id="4789513">=</span>&nbsp;<span class="ident" id="4789515">stateRedo</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4789526">s</span><span class="op" id="4789527">.</span><span class="ident" id="4789528">redo</span>&nbsp;<span class="op" id="4789533">=</span>&nbsp;<span class="ident" id="4789535">true</span><br>
<span class="lineno"></span><span class="op" id="4789540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4789543">//&nbsp;stateRedo&nbsp;helps&nbsp;implement&nbsp;the&nbsp;scanner&#39;s&nbsp;1-byte&nbsp;undo.</span><br>
<span class="lineno"></span><span class="keyword" id="4789599">func</span>&nbsp;<span class="ident" id="4789604">stateRedo</span><span class="op" id="4789613">(</span><span class="ident" id="4789614">s</span>&nbsp;<span class="op" id="4789616">*</span><span class="ident" id="4789617">scanner</span><span class="op" id="4789624">,</span>&nbsp;<span class="ident" id="4789626">c</span>&nbsp;<span class="builtintype" id="4789628">int</span><span class="op" id="4789631">)</span>&nbsp;<span class="builtintype" id="4789633">int</span>&nbsp;<span class="op" id="4789637">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4789640">s</span><span class="op" id="4789641">.</span><span class="ident" id="4789642">redo</span>&nbsp;<span class="op" id="4789647">=</span>&nbsp;<span class="ident" id="4789649">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4789656">s</span><span class="op" id="4789657">.</span><span class="ident" id="4789658">step</span>&nbsp;<span class="op" id="4789663">=</span>&nbsp;<span class="ident" id="4789665">s</span><span class="op" id="4789666">.</span><span class="ident" id="4789667">redoState</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4789678">return</span>&nbsp;<span class="ident" id="4789685">s</span><span class="op" id="4789686">.</span><span class="ident" id="4789687">redoCode</span><br>
<span class="lineno"></span><span class="op" id="4789696">}</span>
</div>
</body>
</html>
