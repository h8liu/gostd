<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/color</h2>
<ul>
<li><a href="/gostd/image/color/color.go.html">color.go</a></li>
<li><a href="/gostd/image/color/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/color/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5625100">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5625155">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5625209">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5625260">//&nbsp;Package&nbsp;color&nbsp;implements&nbsp;a&nbsp;basic&nbsp;color&nbsp;library.</span><br>
<span class="lineno"></span><span class="keyword" id="5625311">package</span>&nbsp;<span class="ident" id="5625319">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5625326">//&nbsp;Color&nbsp;can&nbsp;convert&nbsp;itself&nbsp;to&nbsp;alpha-premultiplied&nbsp;16-bits&nbsp;per&nbsp;channel&nbsp;RGBA.</span><br>
<span class="lineno"></span><span class="comment" id="5625403">//&nbsp;The&nbsp;conversion&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno">10</span><span class="keyword" id="5625435">type</span>&nbsp;<span class="ident" id="5625440">Color</span>&nbsp;<span class="keyword" id="5625446">interface</span>&nbsp;<span class="op" id="5625456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5625459">//&nbsp;RGBA&nbsp;returns&nbsp;the&nbsp;alpha-premultiplied&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5625534">//&nbsp;for&nbsp;the&nbsp;color.&nbsp;Each&nbsp;value&nbsp;ranges&nbsp;within&nbsp;[0,&nbsp;0xFFFF],&nbsp;but&nbsp;is&nbsp;represented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5625610">//&nbsp;by&nbsp;a&nbsp;uint32&nbsp;so&nbsp;that&nbsp;multiplying&nbsp;by&nbsp;a&nbsp;blend&nbsp;factor&nbsp;up&nbsp;to&nbsp;0xFFFF&nbsp;will&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5625686">//&nbsp;overflow.</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5625700">RGBA</span><span class="op" id="5625704">(</span><span class="op" id="5625705">)</span>&nbsp;<span class="op" id="5625707">(</span><span class="ident" id="5625708">r</span><span class="op" id="5625709">,</span>&nbsp;<span class="ident" id="5625711">g</span><span class="op" id="5625712">,</span>&nbsp;<span class="ident" id="5625714">b</span><span class="op" id="5625715">,</span>&nbsp;<span class="ident" id="5625717">a</span>&nbsp;<span class="builtintype" id="5625719">uint32</span><span class="op" id="5625725">)</span><br>
<span class="lineno"></span><span class="op" id="5625727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5625730">//&nbsp;RGBA&nbsp;represents&nbsp;a&nbsp;traditional&nbsp;32-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="5625797">//&nbsp;having&nbsp;8&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno">20</span><span class="keyword" id="5625854">type</span>&nbsp;<span class="ident" id="5625859">RGBA</span>&nbsp;<span class="keyword" id="5625864">struct</span>&nbsp;<span class="op" id="5625871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5625874">R</span><span class="op" id="5625875">,</span>&nbsp;<span class="ident" id="5625877">G</span><span class="op" id="5625878">,</span>&nbsp;<span class="ident" id="5625880">B</span><span class="op" id="5625881">,</span>&nbsp;<span class="ident" id="5625883">A</span>&nbsp;<span class="builtintype" id="5625885">uint8</span><br>
<span class="lineno"></span><span class="op" id="5625891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5625894">func</span>&nbsp;<span class="op" id="5625899">(</span><span class="ident" id="5625900">c</span>&nbsp;<span class="ident" id="5625902">RGBA</span><span class="op" id="5625906">)</span>&nbsp;<span class="ident" id="5625908">RGBA</span><span class="op" id="5625912">(</span><span class="op" id="5625913">)</span>&nbsp;<span class="op" id="5625915">(</span><span class="ident" id="5625916">r</span><span class="op" id="5625917">,</span>&nbsp;<span class="ident" id="5625919">g</span><span class="op" id="5625920">,</span>&nbsp;<span class="ident" id="5625922">b</span><span class="op" id="5625923">,</span>&nbsp;<span class="ident" id="5625925">a</span>&nbsp;<span class="builtintype" id="5625927">uint32</span><span class="op" id="5625933">)</span>&nbsp;<span class="op" id="5625935">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5625938">r</span>&nbsp;<span class="op" id="5625940">=</span>&nbsp;<span class="builtintype" id="5625942">uint32</span><span class="op" id="5625948">(</span><span class="ident" id="5625949">c</span><span class="op" id="5625950">.</span><span class="ident" id="5625951">R</span><span class="op" id="5625952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5625955">r</span>&nbsp;<span class="op" id="5625957">|=</span>&nbsp;<span class="ident" id="5625960">r</span>&nbsp;<span class="op" id="5625962">&lt;&lt;</span>&nbsp;<span class="num" id="5625965">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5625968">g</span>&nbsp;<span class="op" id="5625970">=</span>&nbsp;<span class="builtintype" id="5625972">uint32</span><span class="op" id="5625978">(</span><span class="ident" id="5625979">c</span><span class="op" id="5625980">.</span><span class="ident" id="5625981">G</span><span class="op" id="5625982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5625985">g</span>&nbsp;<span class="op" id="5625987">|=</span>&nbsp;<span class="ident" id="5625990">g</span>&nbsp;<span class="op" id="5625992">&lt;&lt;</span>&nbsp;<span class="num" id="5625995">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5625998">b</span>&nbsp;<span class="op" id="5626000">=</span>&nbsp;<span class="builtintype" id="5626002">uint32</span><span class="op" id="5626008">(</span><span class="ident" id="5626009">c</span><span class="op" id="5626010">.</span><span class="ident" id="5626011">B</span><span class="op" id="5626012">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626015">b</span>&nbsp;<span class="op" id="5626017">|=</span>&nbsp;<span class="ident" id="5626020">b</span>&nbsp;<span class="op" id="5626022">&lt;&lt;</span>&nbsp;<span class="num" id="5626025">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626028">a</span>&nbsp;<span class="op" id="5626030">=</span>&nbsp;<span class="builtintype" id="5626032">uint32</span><span class="op" id="5626038">(</span><span class="ident" id="5626039">c</span><span class="op" id="5626040">.</span><span class="ident" id="5626041">A</span><span class="op" id="5626042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626045">a</span>&nbsp;<span class="op" id="5626047">|=</span>&nbsp;<span class="ident" id="5626050">a</span>&nbsp;<span class="op" id="5626052">&lt;&lt;</span>&nbsp;<span class="num" id="5626055">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5626058">return</span><br>
<span class="lineno"></span><span class="op" id="5626065">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5626068">//&nbsp;RGBA64&nbsp;represents&nbsp;a&nbsp;64-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="5626125">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="5626183">type</span>&nbsp;<span class="ident" id="5626188">RGBA64</span>&nbsp;<span class="keyword" id="5626195">struct</span>&nbsp;<span class="op" id="5626202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626205">R</span><span class="op" id="5626206">,</span>&nbsp;<span class="ident" id="5626208">G</span><span class="op" id="5626209">,</span>&nbsp;<span class="ident" id="5626211">B</span><span class="op" id="5626212">,</span>&nbsp;<span class="ident" id="5626214">A</span>&nbsp;<span class="builtintype" id="5626216">uint16</span><br>
<span class="lineno">40</span><span class="op" id="5626223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5626226">func</span>&nbsp;<span class="op" id="5626231">(</span><span class="ident" id="5626232">c</span>&nbsp;<span class="ident" id="5626234">RGBA64</span><span class="op" id="5626240">)</span>&nbsp;<span class="ident" id="5626242">RGBA</span><span class="op" id="5626246">(</span><span class="op" id="5626247">)</span>&nbsp;<span class="op" id="5626249">(</span><span class="ident" id="5626250">r</span><span class="op" id="5626251">,</span>&nbsp;<span class="ident" id="5626253">g</span><span class="op" id="5626254">,</span>&nbsp;<span class="ident" id="5626256">b</span><span class="op" id="5626257">,</span>&nbsp;<span class="ident" id="5626259">a</span>&nbsp;<span class="builtintype" id="5626261">uint32</span><span class="op" id="5626267">)</span>&nbsp;<span class="op" id="5626269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5626272">return</span>&nbsp;<span class="builtintype" id="5626279">uint32</span><span class="op" id="5626285">(</span><span class="ident" id="5626286">c</span><span class="op" id="5626287">.</span><span class="ident" id="5626288">R</span><span class="op" id="5626289">)</span><span class="op" id="5626290">,</span>&nbsp;<span class="builtintype" id="5626292">uint32</span><span class="op" id="5626298">(</span><span class="ident" id="5626299">c</span><span class="op" id="5626300">.</span><span class="ident" id="5626301">G</span><span class="op" id="5626302">)</span><span class="op" id="5626303">,</span>&nbsp;<span class="builtintype" id="5626305">uint32</span><span class="op" id="5626311">(</span><span class="ident" id="5626312">c</span><span class="op" id="5626313">.</span><span class="ident" id="5626314">B</span><span class="op" id="5626315">)</span><span class="op" id="5626316">,</span>&nbsp;<span class="builtintype" id="5626318">uint32</span><span class="op" id="5626324">(</span><span class="ident" id="5626325">c</span><span class="op" id="5626326">.</span><span class="ident" id="5626327">A</span><span class="op" id="5626328">)</span><br>
<span class="lineno"></span><span class="op" id="5626330">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="5626333">//&nbsp;NRGBA&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;32-bit&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5626393">type</span>&nbsp;<span class="ident" id="5626398">NRGBA</span>&nbsp;<span class="keyword" id="5626404">struct</span>&nbsp;<span class="op" id="5626411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626414">R</span><span class="op" id="5626415">,</span>&nbsp;<span class="ident" id="5626417">G</span><span class="op" id="5626418">,</span>&nbsp;<span class="ident" id="5626420">B</span><span class="op" id="5626421">,</span>&nbsp;<span class="ident" id="5626423">A</span>&nbsp;<span class="builtintype" id="5626425">uint8</span><br>
<span class="lineno"></span><span class="op" id="5626431">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5626434">func</span>&nbsp;<span class="op" id="5626439">(</span><span class="ident" id="5626440">c</span>&nbsp;<span class="ident" id="5626442">NRGBA</span><span class="op" id="5626447">)</span>&nbsp;<span class="ident" id="5626449">RGBA</span><span class="op" id="5626453">(</span><span class="op" id="5626454">)</span>&nbsp;<span class="op" id="5626456">(</span><span class="ident" id="5626457">r</span><span class="op" id="5626458">,</span>&nbsp;<span class="ident" id="5626460">g</span><span class="op" id="5626461">,</span>&nbsp;<span class="ident" id="5626463">b</span><span class="op" id="5626464">,</span>&nbsp;<span class="ident" id="5626466">a</span>&nbsp;<span class="builtintype" id="5626468">uint32</span><span class="op" id="5626474">)</span>&nbsp;<span class="op" id="5626476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626479">r</span>&nbsp;<span class="op" id="5626481">=</span>&nbsp;<span class="builtintype" id="5626483">uint32</span><span class="op" id="5626489">(</span><span class="ident" id="5626490">c</span><span class="op" id="5626491">.</span><span class="ident" id="5626492">R</span><span class="op" id="5626493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626496">r</span>&nbsp;<span class="op" id="5626498">|=</span>&nbsp;<span class="ident" id="5626501">r</span>&nbsp;<span class="op" id="5626503">&lt;&lt;</span>&nbsp;<span class="num" id="5626506">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626509">r</span>&nbsp;<span class="op" id="5626511">*=</span>&nbsp;<span class="builtintype" id="5626514">uint32</span><span class="op" id="5626520">(</span><span class="ident" id="5626521">c</span><span class="op" id="5626522">.</span><span class="ident" id="5626523">A</span><span class="op" id="5626524">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626527">r</span>&nbsp;<span class="op" id="5626529">/=</span>&nbsp;<span class="num" id="5626532">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626538">g</span>&nbsp;<span class="op" id="5626540">=</span>&nbsp;<span class="builtintype" id="5626542">uint32</span><span class="op" id="5626548">(</span><span class="ident" id="5626549">c</span><span class="op" id="5626550">.</span><span class="ident" id="5626551">G</span><span class="op" id="5626552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626555">g</span>&nbsp;<span class="op" id="5626557">|=</span>&nbsp;<span class="ident" id="5626560">g</span>&nbsp;<span class="op" id="5626562">&lt;&lt;</span>&nbsp;<span class="num" id="5626565">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626568">g</span>&nbsp;<span class="op" id="5626570">*=</span>&nbsp;<span class="builtintype" id="5626573">uint32</span><span class="op" id="5626579">(</span><span class="ident" id="5626580">c</span><span class="op" id="5626581">.</span><span class="ident" id="5626582">A</span><span class="op" id="5626583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626586">g</span>&nbsp;<span class="op" id="5626588">/=</span>&nbsp;<span class="num" id="5626591">0xff</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626597">b</span>&nbsp;<span class="op" id="5626599">=</span>&nbsp;<span class="builtintype" id="5626601">uint32</span><span class="op" id="5626607">(</span><span class="ident" id="5626608">c</span><span class="op" id="5626609">.</span><span class="ident" id="5626610">B</span><span class="op" id="5626611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626614">b</span>&nbsp;<span class="op" id="5626616">|=</span>&nbsp;<span class="ident" id="5626619">b</span>&nbsp;<span class="op" id="5626621">&lt;&lt;</span>&nbsp;<span class="num" id="5626624">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626627">b</span>&nbsp;<span class="op" id="5626629">*=</span>&nbsp;<span class="builtintype" id="5626632">uint32</span><span class="op" id="5626638">(</span><span class="ident" id="5626639">c</span><span class="op" id="5626640">.</span><span class="ident" id="5626641">A</span><span class="op" id="5626642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626645">b</span>&nbsp;<span class="op" id="5626647">/=</span>&nbsp;<span class="num" id="5626650">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626656">a</span>&nbsp;<span class="op" id="5626658">=</span>&nbsp;<span class="builtintype" id="5626660">uint32</span><span class="op" id="5626666">(</span><span class="ident" id="5626667">c</span><span class="op" id="5626668">.</span><span class="ident" id="5626669">A</span><span class="op" id="5626670">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626673">a</span>&nbsp;<span class="op" id="5626675">|=</span>&nbsp;<span class="ident" id="5626678">a</span>&nbsp;<span class="op" id="5626680">&lt;&lt;</span>&nbsp;<span class="num" id="5626683">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5626686">return</span><br>
<span class="lineno"></span><span class="op" id="5626693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5626696">//&nbsp;NRGBA64&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;64-bit&nbsp;color,</span><br>
<span class="lineno">70</span><span class="comment" id="5626758">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="5626816">type</span>&nbsp;<span class="ident" id="5626821">NRGBA64</span>&nbsp;<span class="keyword" id="5626829">struct</span>&nbsp;<span class="op" id="5626836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626839">R</span><span class="op" id="5626840">,</span>&nbsp;<span class="ident" id="5626842">G</span><span class="op" id="5626843">,</span>&nbsp;<span class="ident" id="5626845">B</span><span class="op" id="5626846">,</span>&nbsp;<span class="ident" id="5626848">A</span>&nbsp;<span class="builtintype" id="5626850">uint16</span><br>
<span class="lineno"></span><span class="op" id="5626857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="5626860">func</span>&nbsp;<span class="op" id="5626865">(</span><span class="ident" id="5626866">c</span>&nbsp;<span class="ident" id="5626868">NRGBA64</span><span class="op" id="5626875">)</span>&nbsp;<span class="ident" id="5626877">RGBA</span><span class="op" id="5626881">(</span><span class="op" id="5626882">)</span>&nbsp;<span class="op" id="5626884">(</span><span class="ident" id="5626885">r</span><span class="op" id="5626886">,</span>&nbsp;<span class="ident" id="5626888">g</span><span class="op" id="5626889">,</span>&nbsp;<span class="ident" id="5626891">b</span><span class="op" id="5626892">,</span>&nbsp;<span class="ident" id="5626894">a</span>&nbsp;<span class="builtintype" id="5626896">uint32</span><span class="op" id="5626902">)</span>&nbsp;<span class="op" id="5626904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626907">r</span>&nbsp;<span class="op" id="5626909">=</span>&nbsp;<span class="builtintype" id="5626911">uint32</span><span class="op" id="5626917">(</span><span class="ident" id="5626918">c</span><span class="op" id="5626919">.</span><span class="ident" id="5626920">R</span><span class="op" id="5626921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626924">r</span>&nbsp;<span class="op" id="5626926">*=</span>&nbsp;<span class="builtintype" id="5626929">uint32</span><span class="op" id="5626935">(</span><span class="ident" id="5626936">c</span><span class="op" id="5626937">.</span><span class="ident" id="5626938">A</span><span class="op" id="5626939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626942">r</span>&nbsp;<span class="op" id="5626944">/=</span>&nbsp;<span class="num" id="5626947">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626955">g</span>&nbsp;<span class="op" id="5626957">=</span>&nbsp;<span class="builtintype" id="5626959">uint32</span><span class="op" id="5626965">(</span><span class="ident" id="5626966">c</span><span class="op" id="5626967">.</span><span class="ident" id="5626968">G</span><span class="op" id="5626969">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626972">g</span>&nbsp;<span class="op" id="5626974">*=</span>&nbsp;<span class="builtintype" id="5626977">uint32</span><span class="op" id="5626983">(</span><span class="ident" id="5626984">c</span><span class="op" id="5626985">.</span><span class="ident" id="5626986">A</span><span class="op" id="5626987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626990">g</span>&nbsp;<span class="op" id="5626992">/=</span>&nbsp;<span class="num" id="5626995">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627003">b</span>&nbsp;<span class="op" id="5627005">=</span>&nbsp;<span class="builtintype" id="5627007">uint32</span><span class="op" id="5627013">(</span><span class="ident" id="5627014">c</span><span class="op" id="5627015">.</span><span class="ident" id="5627016">B</span><span class="op" id="5627017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627020">b</span>&nbsp;<span class="op" id="5627022">*=</span>&nbsp;<span class="builtintype" id="5627025">uint32</span><span class="op" id="5627031">(</span><span class="ident" id="5627032">c</span><span class="op" id="5627033">.</span><span class="ident" id="5627034">A</span><span class="op" id="5627035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627038">b</span>&nbsp;<span class="op" id="5627040">/=</span>&nbsp;<span class="num" id="5627043">0xffff</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627051">a</span>&nbsp;<span class="op" id="5627053">=</span>&nbsp;<span class="builtintype" id="5627055">uint32</span><span class="op" id="5627061">(</span><span class="ident" id="5627062">c</span><span class="op" id="5627063">.</span><span class="ident" id="5627064">A</span><span class="op" id="5627065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5627068">return</span><br>
<span class="lineno"></span><span class="op" id="5627075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5627078">//&nbsp;Alpha&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno">90</span><span class="keyword" id="5627120">type</span>&nbsp;<span class="ident" id="5627125">Alpha</span>&nbsp;<span class="keyword" id="5627131">struct</span>&nbsp;<span class="op" id="5627138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627141">A</span>&nbsp;<span class="builtintype" id="5627143">uint8</span><br>
<span class="lineno"></span><span class="op" id="5627149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5627152">func</span>&nbsp;<span class="op" id="5627157">(</span><span class="ident" id="5627158">c</span>&nbsp;<span class="ident" id="5627160">Alpha</span><span class="op" id="5627165">)</span>&nbsp;<span class="ident" id="5627167">RGBA</span><span class="op" id="5627171">(</span><span class="op" id="5627172">)</span>&nbsp;<span class="op" id="5627174">(</span><span class="ident" id="5627175">r</span><span class="op" id="5627176">,</span>&nbsp;<span class="ident" id="5627178">g</span><span class="op" id="5627179">,</span>&nbsp;<span class="ident" id="5627181">b</span><span class="op" id="5627182">,</span>&nbsp;<span class="ident" id="5627184">a</span>&nbsp;<span class="builtintype" id="5627186">uint32</span><span class="op" id="5627192">)</span>&nbsp;<span class="op" id="5627194">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627197">a</span>&nbsp;<span class="op" id="5627199">=</span>&nbsp;<span class="builtintype" id="5627201">uint32</span><span class="op" id="5627207">(</span><span class="ident" id="5627208">c</span><span class="op" id="5627209">.</span><span class="ident" id="5627210">A</span><span class="op" id="5627211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627214">a</span>&nbsp;<span class="op" id="5627216">|=</span>&nbsp;<span class="ident" id="5627219">a</span>&nbsp;<span class="op" id="5627221">&lt;&lt;</span>&nbsp;<span class="num" id="5627224">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5627227">return</span>&nbsp;<span class="ident" id="5627234">a</span><span class="op" id="5627235">,</span>&nbsp;<span class="ident" id="5627237">a</span><span class="op" id="5627238">,</span>&nbsp;<span class="ident" id="5627240">a</span><span class="op" id="5627241">,</span>&nbsp;<span class="ident" id="5627243">a</span><br>
<span class="lineno"></span><span class="op" id="5627245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="5627248">//&nbsp;Alpha16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5627292">type</span>&nbsp;<span class="ident" id="5627297">Alpha16</span>&nbsp;<span class="keyword" id="5627305">struct</span>&nbsp;<span class="op" id="5627312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627315">A</span>&nbsp;<span class="builtintype" id="5627317">uint16</span><br>
<span class="lineno"></span><span class="op" id="5627324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="5627327">func</span>&nbsp;<span class="op" id="5627332">(</span><span class="ident" id="5627333">c</span>&nbsp;<span class="ident" id="5627335">Alpha16</span><span class="op" id="5627342">)</span>&nbsp;<span class="ident" id="5627344">RGBA</span><span class="op" id="5627348">(</span><span class="op" id="5627349">)</span>&nbsp;<span class="op" id="5627351">(</span><span class="ident" id="5627352">r</span><span class="op" id="5627353">,</span>&nbsp;<span class="ident" id="5627355">g</span><span class="op" id="5627356">,</span>&nbsp;<span class="ident" id="5627358">b</span><span class="op" id="5627359">,</span>&nbsp;<span class="ident" id="5627361">a</span>&nbsp;<span class="builtintype" id="5627363">uint32</span><span class="op" id="5627369">)</span>&nbsp;<span class="op" id="5627371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627374">a</span>&nbsp;<span class="op" id="5627376">=</span>&nbsp;<span class="builtintype" id="5627378">uint32</span><span class="op" id="5627384">(</span><span class="ident" id="5627385">c</span><span class="op" id="5627386">.</span><span class="ident" id="5627387">A</span><span class="op" id="5627388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5627391">return</span>&nbsp;<span class="ident" id="5627398">a</span><span class="op" id="5627399">,</span>&nbsp;<span class="ident" id="5627401">a</span><span class="op" id="5627402">,</span>&nbsp;<span class="ident" id="5627404">a</span><span class="op" id="5627405">,</span>&nbsp;<span class="ident" id="5627407">a</span><br>
<span class="lineno"></span><span class="op" id="5627409">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="5627412">//&nbsp;Gray&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5627457">type</span>&nbsp;<span class="ident" id="5627462">Gray</span>&nbsp;<span class="keyword" id="5627467">struct</span>&nbsp;<span class="op" id="5627474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627477">Y</span>&nbsp;<span class="builtintype" id="5627479">uint8</span><br>
<span class="lineno"></span><span class="op" id="5627485">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="5627488">func</span>&nbsp;<span class="op" id="5627493">(</span><span class="ident" id="5627494">c</span>&nbsp;<span class="ident" id="5627496">Gray</span><span class="op" id="5627500">)</span>&nbsp;<span class="ident" id="5627502">RGBA</span><span class="op" id="5627506">(</span><span class="op" id="5627507">)</span>&nbsp;<span class="op" id="5627509">(</span><span class="ident" id="5627510">r</span><span class="op" id="5627511">,</span>&nbsp;<span class="ident" id="5627513">g</span><span class="op" id="5627514">,</span>&nbsp;<span class="ident" id="5627516">b</span><span class="op" id="5627517">,</span>&nbsp;<span class="ident" id="5627519">a</span>&nbsp;<span class="builtintype" id="5627521">uint32</span><span class="op" id="5627527">)</span>&nbsp;<span class="op" id="5627529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627532">y</span>&nbsp;<span class="op" id="5627534">:=</span>&nbsp;<span class="builtintype" id="5627537">uint32</span><span class="op" id="5627543">(</span><span class="ident" id="5627544">c</span><span class="op" id="5627545">.</span><span class="ident" id="5627546">Y</span><span class="op" id="5627547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627550">y</span>&nbsp;<span class="op" id="5627552">|=</span>&nbsp;<span class="ident" id="5627555">y</span>&nbsp;<span class="op" id="5627557">&lt;&lt;</span>&nbsp;<span class="num" id="5627560">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5627563">return</span>&nbsp;<span class="ident" id="5627570">y</span><span class="op" id="5627571">,</span>&nbsp;<span class="ident" id="5627573">y</span><span class="op" id="5627574">,</span>&nbsp;<span class="ident" id="5627576">y</span><span class="op" id="5627577">,</span>&nbsp;<span class="num" id="5627579">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5627586">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="5627589">//&nbsp;Gray16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5627636">type</span>&nbsp;<span class="ident" id="5627641">Gray16</span>&nbsp;<span class="keyword" id="5627648">struct</span>&nbsp;<span class="op" id="5627655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627658">Y</span>&nbsp;<span class="builtintype" id="5627660">uint16</span><br>
<span class="lineno"></span><span class="op" id="5627667">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="5627670">func</span>&nbsp;<span class="op" id="5627675">(</span><span class="ident" id="5627676">c</span>&nbsp;<span class="ident" id="5627678">Gray16</span><span class="op" id="5627684">)</span>&nbsp;<span class="ident" id="5627686">RGBA</span><span class="op" id="5627690">(</span><span class="op" id="5627691">)</span>&nbsp;<span class="op" id="5627693">(</span><span class="ident" id="5627694">r</span><span class="op" id="5627695">,</span>&nbsp;<span class="ident" id="5627697">g</span><span class="op" id="5627698">,</span>&nbsp;<span class="ident" id="5627700">b</span><span class="op" id="5627701">,</span>&nbsp;<span class="ident" id="5627703">a</span>&nbsp;<span class="builtintype" id="5627705">uint32</span><span class="op" id="5627711">)</span>&nbsp;<span class="op" id="5627713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627716">y</span>&nbsp;<span class="op" id="5627718">:=</span>&nbsp;<span class="builtintype" id="5627721">uint32</span><span class="op" id="5627727">(</span><span class="ident" id="5627728">c</span><span class="op" id="5627729">.</span><span class="ident" id="5627730">Y</span><span class="op" id="5627731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5627734">return</span>&nbsp;<span class="ident" id="5627741">y</span><span class="op" id="5627742">,</span>&nbsp;<span class="ident" id="5627744">y</span><span class="op" id="5627745">,</span>&nbsp;<span class="ident" id="5627747">y</span><span class="op" id="5627748">,</span>&nbsp;<span class="num" id="5627750">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5627757">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="5627760">//&nbsp;Model&nbsp;can&nbsp;convert&nbsp;any&nbsp;Color&nbsp;to&nbsp;one&nbsp;from&nbsp;its&nbsp;own&nbsp;color&nbsp;model.&nbsp;The&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="5627839">//&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno"></span><span class="keyword" id="5627856">type</span>&nbsp;<span class="ident" id="5627861">Model</span>&nbsp;<span class="keyword" id="5627867">interface</span>&nbsp;<span class="op" id="5627877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627880">Convert</span><span class="op" id="5627887">(</span><span class="ident" id="5627888">c</span>&nbsp;<span class="ident" id="5627890">Color</span><span class="op" id="5627895">)</span>&nbsp;<span class="ident" id="5627897">Color</span><br>
<span class="lineno">135</span><span class="op" id="5627903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5627906">//&nbsp;ModelFunc&nbsp;returns&nbsp;a&nbsp;Model&nbsp;that&nbsp;invokes&nbsp;f&nbsp;to&nbsp;implement&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="5627979">func</span>&nbsp;<span class="ident" id="5627984">ModelFunc</span><span class="op" id="5627993">(</span><span class="ident" id="5627994">f</span>&nbsp;<span class="keyword" id="5627996">func</span><span class="op" id="5628000">(</span><span class="ident" id="5628001">Color</span><span class="op" id="5628006">)</span>&nbsp;<span class="ident" id="5628008">Color</span><span class="op" id="5628013">)</span>&nbsp;<span class="ident" id="5628015">Model</span>&nbsp;<span class="op" id="5628021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5628024">//&nbsp;Note:&nbsp;using&nbsp;*modelFunc&nbsp;as&nbsp;the&nbsp;implementation</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5628073">//&nbsp;means&nbsp;that&nbsp;callers&nbsp;can&nbsp;still&nbsp;use&nbsp;comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5628122">//&nbsp;like&nbsp;m&nbsp;==&nbsp;RGBAModel.&nbsp;&nbsp;This&nbsp;is&nbsp;not&nbsp;possible&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5628172">//&nbsp;we&nbsp;use&nbsp;the&nbsp;func&nbsp;value&nbsp;directly,&nbsp;because&nbsp;funcs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5628222">//&nbsp;are&nbsp;no&nbsp;longer&nbsp;comparable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5628252">return</span>&nbsp;<span class="op" id="5628259">&amp;</span><span class="ident" id="5628260">modelFunc</span><span class="op" id="5628269">{</span><span class="ident" id="5628270">f</span><span class="op" id="5628271">}</span><br>
<span class="lineno">145</span><span class="op" id="5628273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5628276">type</span>&nbsp;<span class="ident" id="5628281">modelFunc</span>&nbsp;<span class="keyword" id="5628291">struct</span>&nbsp;<span class="op" id="5628298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5628301">f</span>&nbsp;<span class="keyword" id="5628303">func</span><span class="op" id="5628307">(</span><span class="ident" id="5628308">Color</span><span class="op" id="5628313">)</span>&nbsp;<span class="ident" id="5628315">Color</span><br>
<span class="lineno"></span><span class="op" id="5628321">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="5628324">func</span>&nbsp;<span class="op" id="5628329">(</span><span class="ident" id="5628330">m</span>&nbsp;<span class="op" id="5628332">*</span><span class="ident" id="5628333">modelFunc</span><span class="op" id="5628342">)</span>&nbsp;<span class="ident" id="5628344">Convert</span><span class="op" id="5628351">(</span><span class="ident" id="5628352">c</span>&nbsp;<span class="ident" id="5628354">Color</span><span class="op" id="5628359">)</span>&nbsp;<span class="ident" id="5628361">Color</span>&nbsp;<span class="op" id="5628367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5628370">return</span>&nbsp;<span class="ident" id="5628377">m</span><span class="op" id="5628378">.</span><span class="ident" id="5628379">f</span><span class="op" id="5628380">(</span><span class="ident" id="5628381">c</span><span class="op" id="5628382">)</span><br>
<span class="lineno"></span><span class="op" id="5628384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="5628387">//&nbsp;Models&nbsp;for&nbsp;the&nbsp;standard&nbsp;color&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="5628427">var</span>&nbsp;<span class="op" id="5628431">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5628434">RGBAModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5628447">Model</span>&nbsp;<span class="op" id="5628453">=</span>&nbsp;<span class="ident" id="5628455">ModelFunc</span><span class="op" id="5628464">(</span><span class="ident" id="5628465">rgbaModel</span><span class="op" id="5628474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5628477">RGBA64Model</span>&nbsp;&nbsp;<span class="ident" id="5628490">Model</span>&nbsp;<span class="op" id="5628496">=</span>&nbsp;<span class="ident" id="5628498">ModelFunc</span><span class="op" id="5628507">(</span><span class="ident" id="5628508">rgba64Model</span><span class="op" id="5628519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5628522">NRGBAModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5628535">Model</span>&nbsp;<span class="op" id="5628541">=</span>&nbsp;<span class="ident" id="5628543">ModelFunc</span><span class="op" id="5628552">(</span><span class="ident" id="5628553">nrgbaModel</span><span class="op" id="5628563">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5628566">NRGBA64Model</span>&nbsp;<span class="ident" id="5628579">Model</span>&nbsp;<span class="op" id="5628585">=</span>&nbsp;<span class="ident" id="5628587">ModelFunc</span><span class="op" id="5628596">(</span><span class="ident" id="5628597">nrgba64Model</span><span class="op" id="5628609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5628612">AlphaModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5628625">Model</span>&nbsp;<span class="op" id="5628631">=</span>&nbsp;<span class="ident" id="5628633">ModelFunc</span><span class="op" id="5628642">(</span><span class="ident" id="5628643">alphaModel</span><span class="op" id="5628653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5628656">Alpha16Model</span>&nbsp;<span class="ident" id="5628669">Model</span>&nbsp;<span class="op" id="5628675">=</span>&nbsp;<span class="ident" id="5628677">ModelFunc</span><span class="op" id="5628686">(</span><span class="ident" id="5628687">alpha16Model</span><span class="op" id="5628699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5628702">GrayModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5628715">Model</span>&nbsp;<span class="op" id="5628721">=</span>&nbsp;<span class="ident" id="5628723">ModelFunc</span><span class="op" id="5628732">(</span><span class="ident" id="5628733">grayModel</span><span class="op" id="5628742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5628745">Gray16Model</span>&nbsp;&nbsp;<span class="ident" id="5628758">Model</span>&nbsp;<span class="op" id="5628764">=</span>&nbsp;<span class="ident" id="5628766">ModelFunc</span><span class="op" id="5628775">(</span><span class="ident" id="5628776">gray16Model</span><span class="op" id="5628787">)</span><br>
<span class="lineno">165</span><span class="op" id="5628789">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5628792">func</span>&nbsp;<span class="ident" id="5628797">rgbaModel</span><span class="op" id="5628806">(</span><span class="ident" id="5628807">c</span>&nbsp;<span class="ident" id="5628809">Color</span><span class="op" id="5628814">)</span>&nbsp;<span class="ident" id="5628816">Color</span>&nbsp;<span class="op" id="5628822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5628825">if</span>&nbsp;<span class="ident" id="5628828">_</span><span class="op" id="5628829">,</span>&nbsp;<span class="ident" id="5628831">ok</span>&nbsp;<span class="op" id="5628834">:=</span>&nbsp;<span class="ident" id="5628837">c</span><span class="op" id="5628838">.</span><span class="op" id="5628839">(</span><span class="ident" id="5628840">RGBA</span><span class="op" id="5628844">)</span><span class="op" id="5628845">;</span>&nbsp;<span class="ident" id="5628847">ok</span>&nbsp;<span class="op" id="5628850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5628854">return</span>&nbsp;<span class="ident" id="5628861">c</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5628864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5628867">r</span><span class="op" id="5628868">,</span>&nbsp;<span class="ident" id="5628870">g</span><span class="op" id="5628871">,</span>&nbsp;<span class="ident" id="5628873">b</span><span class="op" id="5628874">,</span>&nbsp;<span class="ident" id="5628876">a</span>&nbsp;<span class="op" id="5628878">:=</span>&nbsp;<span class="ident" id="5628881">c</span><span class="op" id="5628882">.</span><span class="ident" id="5628883">RGBA</span><span class="op" id="5628887">(</span><span class="op" id="5628888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5628891">return</span>&nbsp;<span class="ident" id="5628898">RGBA</span><span class="op" id="5628902">{</span><span class="builtintype" id="5628903">uint8</span><span class="op" id="5628908">(</span><span class="ident" id="5628909">r</span>&nbsp;<span class="op" id="5628911">&gt;&gt;</span>&nbsp;<span class="num" id="5628914">8</span><span class="op" id="5628915">)</span><span class="op" id="5628916">,</span>&nbsp;<span class="builtintype" id="5628918">uint8</span><span class="op" id="5628923">(</span><span class="ident" id="5628924">g</span>&nbsp;<span class="op" id="5628926">&gt;&gt;</span>&nbsp;<span class="num" id="5628929">8</span><span class="op" id="5628930">)</span><span class="op" id="5628931">,</span>&nbsp;<span class="builtintype" id="5628933">uint8</span><span class="op" id="5628938">(</span><span class="ident" id="5628939">b</span>&nbsp;<span class="op" id="5628941">&gt;&gt;</span>&nbsp;<span class="num" id="5628944">8</span><span class="op" id="5628945">)</span><span class="op" id="5628946">,</span>&nbsp;<span class="builtintype" id="5628948">uint8</span><span class="op" id="5628953">(</span><span class="ident" id="5628954">a</span>&nbsp;<span class="op" id="5628956">&gt;&gt;</span>&nbsp;<span class="num" id="5628959">8</span><span class="op" id="5628960">)</span><span class="op" id="5628961">}</span><br>
<span class="lineno"></span><span class="op" id="5628963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="5628966">func</span>&nbsp;<span class="ident" id="5628971">rgba64Model</span><span class="op" id="5628982">(</span><span class="ident" id="5628983">c</span>&nbsp;<span class="ident" id="5628985">Color</span><span class="op" id="5628990">)</span>&nbsp;<span class="ident" id="5628992">Color</span>&nbsp;<span class="op" id="5628998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629001">if</span>&nbsp;<span class="ident" id="5629004">_</span><span class="op" id="5629005">,</span>&nbsp;<span class="ident" id="5629007">ok</span>&nbsp;<span class="op" id="5629010">:=</span>&nbsp;<span class="ident" id="5629013">c</span><span class="op" id="5629014">.</span><span class="op" id="5629015">(</span><span class="ident" id="5629016">RGBA64</span><span class="op" id="5629022">)</span><span class="op" id="5629023">;</span>&nbsp;<span class="ident" id="5629025">ok</span>&nbsp;<span class="op" id="5629028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629032">return</span>&nbsp;<span class="ident" id="5629039">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5629042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5629045">r</span><span class="op" id="5629046">,</span>&nbsp;<span class="ident" id="5629048">g</span><span class="op" id="5629049">,</span>&nbsp;<span class="ident" id="5629051">b</span><span class="op" id="5629052">,</span>&nbsp;<span class="ident" id="5629054">a</span>&nbsp;<span class="op" id="5629056">:=</span>&nbsp;<span class="ident" id="5629059">c</span><span class="op" id="5629060">.</span><span class="ident" id="5629061">RGBA</span><span class="op" id="5629065">(</span><span class="op" id="5629066">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629069">return</span>&nbsp;<span class="ident" id="5629076">RGBA64</span><span class="op" id="5629082">{</span><span class="builtintype" id="5629083">uint16</span><span class="op" id="5629089">(</span><span class="ident" id="5629090">r</span><span class="op" id="5629091">)</span><span class="op" id="5629092">,</span>&nbsp;<span class="builtintype" id="5629094">uint16</span><span class="op" id="5629100">(</span><span class="ident" id="5629101">g</span><span class="op" id="5629102">)</span><span class="op" id="5629103">,</span>&nbsp;<span class="builtintype" id="5629105">uint16</span><span class="op" id="5629111">(</span><span class="ident" id="5629112">b</span><span class="op" id="5629113">)</span><span class="op" id="5629114">,</span>&nbsp;<span class="builtintype" id="5629116">uint16</span><span class="op" id="5629122">(</span><span class="ident" id="5629123">a</span><span class="op" id="5629124">)</span><span class="op" id="5629125">}</span><br>
<span class="lineno"></span><span class="op" id="5629127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5629130">func</span>&nbsp;<span class="ident" id="5629135">nrgbaModel</span><span class="op" id="5629145">(</span><span class="ident" id="5629146">c</span>&nbsp;<span class="ident" id="5629148">Color</span><span class="op" id="5629153">)</span>&nbsp;<span class="ident" id="5629155">Color</span>&nbsp;<span class="op" id="5629161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629164">if</span>&nbsp;<span class="ident" id="5629167">_</span><span class="op" id="5629168">,</span>&nbsp;<span class="ident" id="5629170">ok</span>&nbsp;<span class="op" id="5629173">:=</span>&nbsp;<span class="ident" id="5629176">c</span><span class="op" id="5629177">.</span><span class="op" id="5629178">(</span><span class="ident" id="5629179">NRGBA</span><span class="op" id="5629184">)</span><span class="op" id="5629185">;</span>&nbsp;<span class="ident" id="5629187">ok</span>&nbsp;<span class="op" id="5629190">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629194">return</span>&nbsp;<span class="ident" id="5629201">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5629204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5629207">r</span><span class="op" id="5629208">,</span>&nbsp;<span class="ident" id="5629210">g</span><span class="op" id="5629211">,</span>&nbsp;<span class="ident" id="5629213">b</span><span class="op" id="5629214">,</span>&nbsp;<span class="ident" id="5629216">a</span>&nbsp;<span class="op" id="5629218">:=</span>&nbsp;<span class="ident" id="5629221">c</span><span class="op" id="5629222">.</span><span class="ident" id="5629223">RGBA</span><span class="op" id="5629227">(</span><span class="op" id="5629228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629231">if</span>&nbsp;<span class="ident" id="5629234">a</span>&nbsp;<span class="op" id="5629236">==</span>&nbsp;<span class="num" id="5629239">0xffff</span>&nbsp;<span class="op" id="5629246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629250">return</span>&nbsp;<span class="ident" id="5629257">NRGBA</span><span class="op" id="5629262">{</span><span class="builtintype" id="5629263">uint8</span><span class="op" id="5629268">(</span><span class="ident" id="5629269">r</span>&nbsp;<span class="op" id="5629271">&gt;&gt;</span>&nbsp;<span class="num" id="5629274">8</span><span class="op" id="5629275">)</span><span class="op" id="5629276">,</span>&nbsp;<span class="builtintype" id="5629278">uint8</span><span class="op" id="5629283">(</span><span class="ident" id="5629284">g</span>&nbsp;<span class="op" id="5629286">&gt;&gt;</span>&nbsp;<span class="num" id="5629289">8</span><span class="op" id="5629290">)</span><span class="op" id="5629291">,</span>&nbsp;<span class="builtintype" id="5629293">uint8</span><span class="op" id="5629298">(</span><span class="ident" id="5629299">b</span>&nbsp;<span class="op" id="5629301">&gt;&gt;</span>&nbsp;<span class="num" id="5629304">8</span><span class="op" id="5629305">)</span><span class="op" id="5629306">,</span>&nbsp;<span class="num" id="5629308">0xff</span><span class="op" id="5629312">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5629315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629318">if</span>&nbsp;<span class="ident" id="5629321">a</span>&nbsp;<span class="op" id="5629323">==</span>&nbsp;<span class="num" id="5629326">0</span>&nbsp;<span class="op" id="5629328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629332">return</span>&nbsp;<span class="ident" id="5629339">NRGBA</span><span class="op" id="5629344">{</span><span class="num" id="5629345">0</span><span class="op" id="5629346">,</span>&nbsp;<span class="num" id="5629348">0</span><span class="op" id="5629349">,</span>&nbsp;<span class="num" id="5629351">0</span><span class="op" id="5629352">,</span>&nbsp;<span class="num" id="5629354">0</span><span class="op" id="5629355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5629358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5629361">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5629462">r</span>&nbsp;<span class="op" id="5629464">=</span>&nbsp;<span class="op" id="5629466">(</span><span class="ident" id="5629467">r</span>&nbsp;<span class="op" id="5629469">*</span>&nbsp;<span class="num" id="5629471">0xffff</span><span class="op" id="5629477">)</span>&nbsp;<span class="op" id="5629479">/</span>&nbsp;<span class="ident" id="5629481">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5629484">g</span>&nbsp;<span class="op" id="5629486">=</span>&nbsp;<span class="op" id="5629488">(</span><span class="ident" id="5629489">g</span>&nbsp;<span class="op" id="5629491">*</span>&nbsp;<span class="num" id="5629493">0xffff</span><span class="op" id="5629499">)</span>&nbsp;<span class="op" id="5629501">/</span>&nbsp;<span class="ident" id="5629503">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5629506">b</span>&nbsp;<span class="op" id="5629508">=</span>&nbsp;<span class="op" id="5629510">(</span><span class="ident" id="5629511">b</span>&nbsp;<span class="op" id="5629513">*</span>&nbsp;<span class="num" id="5629515">0xffff</span><span class="op" id="5629521">)</span>&nbsp;<span class="op" id="5629523">/</span>&nbsp;<span class="ident" id="5629525">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629528">return</span>&nbsp;<span class="ident" id="5629535">NRGBA</span><span class="op" id="5629540">{</span><span class="builtintype" id="5629541">uint8</span><span class="op" id="5629546">(</span><span class="ident" id="5629547">r</span>&nbsp;<span class="op" id="5629549">&gt;&gt;</span>&nbsp;<span class="num" id="5629552">8</span><span class="op" id="5629553">)</span><span class="op" id="5629554">,</span>&nbsp;<span class="builtintype" id="5629556">uint8</span><span class="op" id="5629561">(</span><span class="ident" id="5629562">g</span>&nbsp;<span class="op" id="5629564">&gt;&gt;</span>&nbsp;<span class="num" id="5629567">8</span><span class="op" id="5629568">)</span><span class="op" id="5629569">,</span>&nbsp;<span class="builtintype" id="5629571">uint8</span><span class="op" id="5629576">(</span><span class="ident" id="5629577">b</span>&nbsp;<span class="op" id="5629579">&gt;&gt;</span>&nbsp;<span class="num" id="5629582">8</span><span class="op" id="5629583">)</span><span class="op" id="5629584">,</span>&nbsp;<span class="builtintype" id="5629586">uint8</span><span class="op" id="5629591">(</span><span class="ident" id="5629592">a</span>&nbsp;<span class="op" id="5629594">&gt;&gt;</span>&nbsp;<span class="num" id="5629597">8</span><span class="op" id="5629598">)</span><span class="op" id="5629599">}</span><br>
<span class="lineno"></span><span class="op" id="5629601">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="5629604">func</span>&nbsp;<span class="ident" id="5629609">nrgba64Model</span><span class="op" id="5629621">(</span><span class="ident" id="5629622">c</span>&nbsp;<span class="ident" id="5629624">Color</span><span class="op" id="5629629">)</span>&nbsp;<span class="ident" id="5629631">Color</span>&nbsp;<span class="op" id="5629637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629640">if</span>&nbsp;<span class="ident" id="5629643">_</span><span class="op" id="5629644">,</span>&nbsp;<span class="ident" id="5629646">ok</span>&nbsp;<span class="op" id="5629649">:=</span>&nbsp;<span class="ident" id="5629652">c</span><span class="op" id="5629653">.</span><span class="op" id="5629654">(</span><span class="ident" id="5629655">NRGBA64</span><span class="op" id="5629662">)</span><span class="op" id="5629663">;</span>&nbsp;<span class="ident" id="5629665">ok</span>&nbsp;<span class="op" id="5629668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629672">return</span>&nbsp;<span class="ident" id="5629679">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5629682">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5629685">r</span><span class="op" id="5629686">,</span>&nbsp;<span class="ident" id="5629688">g</span><span class="op" id="5629689">,</span>&nbsp;<span class="ident" id="5629691">b</span><span class="op" id="5629692">,</span>&nbsp;<span class="ident" id="5629694">a</span>&nbsp;<span class="op" id="5629696">:=</span>&nbsp;<span class="ident" id="5629699">c</span><span class="op" id="5629700">.</span><span class="ident" id="5629701">RGBA</span><span class="op" id="5629705">(</span><span class="op" id="5629706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629709">if</span>&nbsp;<span class="ident" id="5629712">a</span>&nbsp;<span class="op" id="5629714">==</span>&nbsp;<span class="num" id="5629717">0xffff</span>&nbsp;<span class="op" id="5629724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629728">return</span>&nbsp;<span class="ident" id="5629735">NRGBA64</span><span class="op" id="5629742">{</span><span class="builtintype" id="5629743">uint16</span><span class="op" id="5629749">(</span><span class="ident" id="5629750">r</span><span class="op" id="5629751">)</span><span class="op" id="5629752">,</span>&nbsp;<span class="builtintype" id="5629754">uint16</span><span class="op" id="5629760">(</span><span class="ident" id="5629761">g</span><span class="op" id="5629762">)</span><span class="op" id="5629763">,</span>&nbsp;<span class="builtintype" id="5629765">uint16</span><span class="op" id="5629771">(</span><span class="ident" id="5629772">b</span><span class="op" id="5629773">)</span><span class="op" id="5629774">,</span>&nbsp;<span class="num" id="5629776">0xffff</span><span class="op" id="5629782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5629785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629788">if</span>&nbsp;<span class="ident" id="5629791">a</span>&nbsp;<span class="op" id="5629793">==</span>&nbsp;<span class="num" id="5629796">0</span>&nbsp;<span class="op" id="5629798">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629802">return</span>&nbsp;<span class="ident" id="5629809">NRGBA64</span><span class="op" id="5629816">{</span><span class="num" id="5629817">0</span><span class="op" id="5629818">,</span>&nbsp;<span class="num" id="5629820">0</span><span class="op" id="5629821">,</span>&nbsp;<span class="num" id="5629823">0</span><span class="op" id="5629824">,</span>&nbsp;<span class="num" id="5629826">0</span><span class="op" id="5629827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5629830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5629833">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5629934">r</span>&nbsp;<span class="op" id="5629936">=</span>&nbsp;<span class="op" id="5629938">(</span><span class="ident" id="5629939">r</span>&nbsp;<span class="op" id="5629941">*</span>&nbsp;<span class="num" id="5629943">0xffff</span><span class="op" id="5629949">)</span>&nbsp;<span class="op" id="5629951">/</span>&nbsp;<span class="ident" id="5629953">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5629956">g</span>&nbsp;<span class="op" id="5629958">=</span>&nbsp;<span class="op" id="5629960">(</span><span class="ident" id="5629961">g</span>&nbsp;<span class="op" id="5629963">*</span>&nbsp;<span class="num" id="5629965">0xffff</span><span class="op" id="5629971">)</span>&nbsp;<span class="op" id="5629973">/</span>&nbsp;<span class="ident" id="5629975">a</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5629978">b</span>&nbsp;<span class="op" id="5629980">=</span>&nbsp;<span class="op" id="5629982">(</span><span class="ident" id="5629983">b</span>&nbsp;<span class="op" id="5629985">*</span>&nbsp;<span class="num" id="5629987">0xffff</span><span class="op" id="5629993">)</span>&nbsp;<span class="op" id="5629995">/</span>&nbsp;<span class="ident" id="5629997">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630000">return</span>&nbsp;<span class="ident" id="5630007">NRGBA64</span><span class="op" id="5630014">{</span><span class="builtintype" id="5630015">uint16</span><span class="op" id="5630021">(</span><span class="ident" id="5630022">r</span><span class="op" id="5630023">)</span><span class="op" id="5630024">,</span>&nbsp;<span class="builtintype" id="5630026">uint16</span><span class="op" id="5630032">(</span><span class="ident" id="5630033">g</span><span class="op" id="5630034">)</span><span class="op" id="5630035">,</span>&nbsp;<span class="builtintype" id="5630037">uint16</span><span class="op" id="5630043">(</span><span class="ident" id="5630044">b</span><span class="op" id="5630045">)</span><span class="op" id="5630046">,</span>&nbsp;<span class="builtintype" id="5630048">uint16</span><span class="op" id="5630054">(</span><span class="ident" id="5630055">a</span><span class="op" id="5630056">)</span><span class="op" id="5630057">}</span><br>
<span class="lineno"></span><span class="op" id="5630059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5630062">func</span>&nbsp;<span class="ident" id="5630067">alphaModel</span><span class="op" id="5630077">(</span><span class="ident" id="5630078">c</span>&nbsp;<span class="ident" id="5630080">Color</span><span class="op" id="5630085">)</span>&nbsp;<span class="ident" id="5630087">Color</span>&nbsp;<span class="op" id="5630093">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630096">if</span>&nbsp;<span class="ident" id="5630099">_</span><span class="op" id="5630100">,</span>&nbsp;<span class="ident" id="5630102">ok</span>&nbsp;<span class="op" id="5630105">:=</span>&nbsp;<span class="ident" id="5630108">c</span><span class="op" id="5630109">.</span><span class="op" id="5630110">(</span><span class="ident" id="5630111">Alpha</span><span class="op" id="5630116">)</span><span class="op" id="5630117">;</span>&nbsp;<span class="ident" id="5630119">ok</span>&nbsp;<span class="op" id="5630122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630126">return</span>&nbsp;<span class="ident" id="5630133">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5630136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5630139">_</span><span class="op" id="5630140">,</span>&nbsp;<span class="ident" id="5630142">_</span><span class="op" id="5630143">,</span>&nbsp;<span class="ident" id="5630145">_</span><span class="op" id="5630146">,</span>&nbsp;<span class="ident" id="5630148">a</span>&nbsp;<span class="op" id="5630150">:=</span>&nbsp;<span class="ident" id="5630153">c</span><span class="op" id="5630154">.</span><span class="ident" id="5630155">RGBA</span><span class="op" id="5630159">(</span><span class="op" id="5630160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630163">return</span>&nbsp;<span class="ident" id="5630170">Alpha</span><span class="op" id="5630175">{</span><span class="builtintype" id="5630176">uint8</span><span class="op" id="5630181">(</span><span class="ident" id="5630182">a</span>&nbsp;<span class="op" id="5630184">&gt;&gt;</span>&nbsp;<span class="num" id="5630187">8</span><span class="op" id="5630188">)</span><span class="op" id="5630189">}</span><br>
<span class="lineno">225</span><span class="op" id="5630191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5630194">func</span>&nbsp;<span class="ident" id="5630199">alpha16Model</span><span class="op" id="5630211">(</span><span class="ident" id="5630212">c</span>&nbsp;<span class="ident" id="5630214">Color</span><span class="op" id="5630219">)</span>&nbsp;<span class="ident" id="5630221">Color</span>&nbsp;<span class="op" id="5630227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630230">if</span>&nbsp;<span class="ident" id="5630233">_</span><span class="op" id="5630234">,</span>&nbsp;<span class="ident" id="5630236">ok</span>&nbsp;<span class="op" id="5630239">:=</span>&nbsp;<span class="ident" id="5630242">c</span><span class="op" id="5630243">.</span><span class="op" id="5630244">(</span><span class="ident" id="5630245">Alpha16</span><span class="op" id="5630252">)</span><span class="op" id="5630253">;</span>&nbsp;<span class="ident" id="5630255">ok</span>&nbsp;<span class="op" id="5630258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630262">return</span>&nbsp;<span class="ident" id="5630269">c</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5630272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5630275">_</span><span class="op" id="5630276">,</span>&nbsp;<span class="ident" id="5630278">_</span><span class="op" id="5630279">,</span>&nbsp;<span class="ident" id="5630281">_</span><span class="op" id="5630282">,</span>&nbsp;<span class="ident" id="5630284">a</span>&nbsp;<span class="op" id="5630286">:=</span>&nbsp;<span class="ident" id="5630289">c</span><span class="op" id="5630290">.</span><span class="ident" id="5630291">RGBA</span><span class="op" id="5630295">(</span><span class="op" id="5630296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630299">return</span>&nbsp;<span class="ident" id="5630306">Alpha16</span><span class="op" id="5630313">{</span><span class="builtintype" id="5630314">uint16</span><span class="op" id="5630320">(</span><span class="ident" id="5630321">a</span><span class="op" id="5630322">)</span><span class="op" id="5630323">}</span><br>
<span class="lineno"></span><span class="op" id="5630325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="5630328">func</span>&nbsp;<span class="ident" id="5630333">grayModel</span><span class="op" id="5630342">(</span><span class="ident" id="5630343">c</span>&nbsp;<span class="ident" id="5630345">Color</span><span class="op" id="5630350">)</span>&nbsp;<span class="ident" id="5630352">Color</span>&nbsp;<span class="op" id="5630358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630361">if</span>&nbsp;<span class="ident" id="5630364">_</span><span class="op" id="5630365">,</span>&nbsp;<span class="ident" id="5630367">ok</span>&nbsp;<span class="op" id="5630370">:=</span>&nbsp;<span class="ident" id="5630373">c</span><span class="op" id="5630374">.</span><span class="op" id="5630375">(</span><span class="ident" id="5630376">Gray</span><span class="op" id="5630380">)</span><span class="op" id="5630381">;</span>&nbsp;<span class="ident" id="5630383">ok</span>&nbsp;<span class="op" id="5630386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630390">return</span>&nbsp;<span class="ident" id="5630397">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5630400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5630403">r</span><span class="op" id="5630404">,</span>&nbsp;<span class="ident" id="5630406">g</span><span class="op" id="5630407">,</span>&nbsp;<span class="ident" id="5630409">b</span><span class="op" id="5630410">,</span>&nbsp;<span class="ident" id="5630412">_</span>&nbsp;<span class="op" id="5630414">:=</span>&nbsp;<span class="ident" id="5630417">c</span><span class="op" id="5630418">.</span><span class="ident" id="5630419">RGBA</span><span class="op" id="5630423">(</span><span class="op" id="5630424">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5630427">y</span>&nbsp;<span class="op" id="5630429">:=</span>&nbsp;<span class="op" id="5630432">(</span><span class="num" id="5630433">299</span><span class="op" id="5630436">*</span><span class="ident" id="5630437">r</span>&nbsp;<span class="op" id="5630439">+</span>&nbsp;<span class="num" id="5630441">587</span><span class="op" id="5630444">*</span><span class="ident" id="5630445">g</span>&nbsp;<span class="op" id="5630447">+</span>&nbsp;<span class="num" id="5630449">114</span><span class="op" id="5630452">*</span><span class="ident" id="5630453">b</span>&nbsp;<span class="op" id="5630455">+</span>&nbsp;<span class="num" id="5630457">500</span><span class="op" id="5630460">)</span>&nbsp;<span class="op" id="5630462">/</span>&nbsp;<span class="num" id="5630464">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630470">return</span>&nbsp;<span class="ident" id="5630477">Gray</span><span class="op" id="5630481">{</span><span class="builtintype" id="5630482">uint8</span><span class="op" id="5630487">(</span><span class="ident" id="5630488">y</span>&nbsp;<span class="op" id="5630490">&gt;&gt;</span>&nbsp;<span class="num" id="5630493">8</span><span class="op" id="5630494">)</span><span class="op" id="5630495">}</span><br>
<span class="lineno"></span><span class="op" id="5630497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5630500">func</span>&nbsp;<span class="ident" id="5630505">gray16Model</span><span class="op" id="5630516">(</span><span class="ident" id="5630517">c</span>&nbsp;<span class="ident" id="5630519">Color</span><span class="op" id="5630524">)</span>&nbsp;<span class="ident" id="5630526">Color</span>&nbsp;<span class="op" id="5630532">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630535">if</span>&nbsp;<span class="ident" id="5630538">_</span><span class="op" id="5630539">,</span>&nbsp;<span class="ident" id="5630541">ok</span>&nbsp;<span class="op" id="5630544">:=</span>&nbsp;<span class="ident" id="5630547">c</span><span class="op" id="5630548">.</span><span class="op" id="5630549">(</span><span class="ident" id="5630550">Gray16</span><span class="op" id="5630556">)</span><span class="op" id="5630557">;</span>&nbsp;<span class="ident" id="5630559">ok</span>&nbsp;<span class="op" id="5630562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630566">return</span>&nbsp;<span class="ident" id="5630573">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5630576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5630579">r</span><span class="op" id="5630580">,</span>&nbsp;<span class="ident" id="5630582">g</span><span class="op" id="5630583">,</span>&nbsp;<span class="ident" id="5630585">b</span><span class="op" id="5630586">,</span>&nbsp;<span class="ident" id="5630588">_</span>&nbsp;<span class="op" id="5630590">:=</span>&nbsp;<span class="ident" id="5630593">c</span><span class="op" id="5630594">.</span><span class="ident" id="5630595">RGBA</span><span class="op" id="5630599">(</span><span class="op" id="5630600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5630603">y</span>&nbsp;<span class="op" id="5630605">:=</span>&nbsp;<span class="op" id="5630608">(</span><span class="num" id="5630609">299</span><span class="op" id="5630612">*</span><span class="ident" id="5630613">r</span>&nbsp;<span class="op" id="5630615">+</span>&nbsp;<span class="num" id="5630617">587</span><span class="op" id="5630620">*</span><span class="ident" id="5630621">g</span>&nbsp;<span class="op" id="5630623">+</span>&nbsp;<span class="num" id="5630625">114</span><span class="op" id="5630628">*</span><span class="ident" id="5630629">b</span>&nbsp;<span class="op" id="5630631">+</span>&nbsp;<span class="num" id="5630633">500</span><span class="op" id="5630636">)</span>&nbsp;<span class="op" id="5630638">/</span>&nbsp;<span class="num" id="5630640">1000</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630646">return</span>&nbsp;<span class="ident" id="5630653">Gray16</span><span class="op" id="5630659">{</span><span class="builtintype" id="5630660">uint16</span><span class="op" id="5630666">(</span><span class="ident" id="5630667">y</span><span class="op" id="5630668">)</span><span class="op" id="5630669">}</span><br>
<span class="lineno"></span><span class="op" id="5630671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5630674">//&nbsp;Palette&nbsp;is&nbsp;a&nbsp;palette&nbsp;of&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="5630709">type</span>&nbsp;<span class="ident" id="5630714">Palette</span>&nbsp;<span class="op" id="5630722">[</span><span class="op" id="5630723">]</span><span class="ident" id="5630724">Color</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="5630731">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="5630807">func</span>&nbsp;<span class="op" id="5630812">(</span><span class="ident" id="5630813">p</span>&nbsp;<span class="ident" id="5630815">Palette</span><span class="op" id="5630822">)</span>&nbsp;<span class="ident" id="5630824">Convert</span><span class="op" id="5630831">(</span><span class="ident" id="5630832">c</span>&nbsp;<span class="ident" id="5630834">Color</span><span class="op" id="5630839">)</span>&nbsp;<span class="ident" id="5630841">Color</span>&nbsp;<span class="op" id="5630847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630850">if</span>&nbsp;<span class="builtinfunc" id="5630853">len</span><span class="op" id="5630856">(</span><span class="ident" id="5630857">p</span><span class="op" id="5630858">)</span>&nbsp;<span class="op" id="5630860">==</span>&nbsp;<span class="num" id="5630863">0</span>&nbsp;<span class="op" id="5630865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630869">return</span>&nbsp;<span class="ident" id="5630876">nil</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5630881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630884">return</span>&nbsp;<span class="ident" id="5630891">p</span><span class="op" id="5630892">[</span><span class="ident" id="5630893">p</span><span class="op" id="5630894">.</span><span class="ident" id="5630895">Index</span><span class="op" id="5630900">(</span><span class="ident" id="5630901">c</span><span class="op" id="5630902">)</span><span class="op" id="5630903">]</span><br>
<span class="lineno"></span><span class="op" id="5630905">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5630908">//&nbsp;Index&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean</span><br>
<span class="lineno">265</span><span class="comment" id="5630982">//&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="5630998">func</span>&nbsp;<span class="op" id="5631003">(</span><span class="ident" id="5631004">p</span>&nbsp;<span class="ident" id="5631006">Palette</span><span class="op" id="5631013">)</span>&nbsp;<span class="ident" id="5631015">Index</span><span class="op" id="5631020">(</span><span class="ident" id="5631021">c</span>&nbsp;<span class="ident" id="5631023">Color</span><span class="op" id="5631028">)</span>&nbsp;<span class="builtintype" id="5631030">int</span>&nbsp;<span class="op" id="5631034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5631037">//&nbsp;A&nbsp;batch&nbsp;version&nbsp;of&nbsp;this&nbsp;computation&nbsp;is&nbsp;in&nbsp;image/draw/draw.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631104">cr</span><span class="op" id="5631106">,</span>&nbsp;<span class="ident" id="5631108">cg</span><span class="op" id="5631110">,</span>&nbsp;<span class="ident" id="5631112">cb</span><span class="op" id="5631114">,</span>&nbsp;<span class="ident" id="5631116">_</span>&nbsp;<span class="op" id="5631118">:=</span>&nbsp;<span class="ident" id="5631121">c</span><span class="op" id="5631122">.</span><span class="ident" id="5631123">RGBA</span><span class="op" id="5631127">(</span><span class="op" id="5631128">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631131">ret</span><span class="op" id="5631134">,</span>&nbsp;<span class="ident" id="5631136">bestSSD</span>&nbsp;<span class="op" id="5631144">:=</span>&nbsp;<span class="num" id="5631147">0</span><span class="op" id="5631148">,</span>&nbsp;<span class="builtintype" id="5631150">uint32</span><span class="op" id="5631156">(</span><span class="num" id="5631157">1</span><span class="op" id="5631158">&lt;&lt;</span><span class="num" id="5631160">32</span><span class="op" id="5631162">-</span><span class="num" id="5631163">1</span><span class="op" id="5631164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5631167">for</span>&nbsp;<span class="ident" id="5631171">i</span><span class="op" id="5631172">,</span>&nbsp;<span class="ident" id="5631174">v</span>&nbsp;<span class="op" id="5631176">:=</span>&nbsp;<span class="keyword" id="5631179">range</span>&nbsp;<span class="ident" id="5631185">p</span>&nbsp;<span class="op" id="5631187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631191">vr</span><span class="op" id="5631193">,</span>&nbsp;<span class="ident" id="5631195">vg</span><span class="op" id="5631197">,</span>&nbsp;<span class="ident" id="5631199">vb</span><span class="op" id="5631201">,</span>&nbsp;<span class="ident" id="5631203">_</span>&nbsp;<span class="op" id="5631205">:=</span>&nbsp;<span class="ident" id="5631208">v</span><span class="op" id="5631209">.</span><span class="ident" id="5631210">RGBA</span><span class="op" id="5631214">(</span><span class="op" id="5631215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5631219">//&nbsp;We&nbsp;shift&nbsp;by&nbsp;1&nbsp;bit&nbsp;to&nbsp;avoid&nbsp;potential&nbsp;uint32&nbsp;overflow&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5631280">//&nbsp;sum-squared-difference.</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631309">delta</span>&nbsp;<span class="op" id="5631315">:=</span>&nbsp;<span class="op" id="5631318">(</span><span class="builtintype" id="5631319">int32</span><span class="op" id="5631324">(</span><span class="ident" id="5631325">cr</span><span class="op" id="5631327">)</span>&nbsp;<span class="op" id="5631329">-</span>&nbsp;<span class="builtintype" id="5631331">int32</span><span class="op" id="5631336">(</span><span class="ident" id="5631337">vr</span><span class="op" id="5631339">)</span><span class="op" id="5631340">)</span>&nbsp;<span class="op" id="5631342">&gt;&gt;</span>&nbsp;<span class="num" id="5631345">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631349">ssd</span>&nbsp;<span class="op" id="5631353">:=</span>&nbsp;<span class="builtintype" id="5631356">uint32</span><span class="op" id="5631362">(</span><span class="ident" id="5631363">delta</span>&nbsp;<span class="op" id="5631369">*</span>&nbsp;<span class="ident" id="5631371">delta</span><span class="op" id="5631376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631380">delta</span>&nbsp;<span class="op" id="5631386">=</span>&nbsp;<span class="op" id="5631388">(</span><span class="builtintype" id="5631389">int32</span><span class="op" id="5631394">(</span><span class="ident" id="5631395">cg</span><span class="op" id="5631397">)</span>&nbsp;<span class="op" id="5631399">-</span>&nbsp;<span class="builtintype" id="5631401">int32</span><span class="op" id="5631406">(</span><span class="ident" id="5631407">vg</span><span class="op" id="5631409">)</span><span class="op" id="5631410">)</span>&nbsp;<span class="op" id="5631412">&gt;&gt;</span>&nbsp;<span class="num" id="5631415">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631419">ssd</span>&nbsp;<span class="op" id="5631423">+=</span>&nbsp;<span class="builtintype" id="5631426">uint32</span><span class="op" id="5631432">(</span><span class="ident" id="5631433">delta</span>&nbsp;<span class="op" id="5631439">*</span>&nbsp;<span class="ident" id="5631441">delta</span><span class="op" id="5631446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631450">delta</span>&nbsp;<span class="op" id="5631456">=</span>&nbsp;<span class="op" id="5631458">(</span><span class="builtintype" id="5631459">int32</span><span class="op" id="5631464">(</span><span class="ident" id="5631465">cb</span><span class="op" id="5631467">)</span>&nbsp;<span class="op" id="5631469">-</span>&nbsp;<span class="builtintype" id="5631471">int32</span><span class="op" id="5631476">(</span><span class="ident" id="5631477">vb</span><span class="op" id="5631479">)</span><span class="op" id="5631480">)</span>&nbsp;<span class="op" id="5631482">&gt;&gt;</span>&nbsp;<span class="num" id="5631485">1</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631489">ssd</span>&nbsp;<span class="op" id="5631493">+=</span>&nbsp;<span class="builtintype" id="5631496">uint32</span><span class="op" id="5631502">(</span><span class="ident" id="5631503">delta</span>&nbsp;<span class="op" id="5631509">*</span>&nbsp;<span class="ident" id="5631511">delta</span><span class="op" id="5631516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5631520">if</span>&nbsp;<span class="ident" id="5631523">ssd</span>&nbsp;<span class="op" id="5631527">&lt;</span>&nbsp;<span class="ident" id="5631529">bestSSD</span>&nbsp;<span class="op" id="5631537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5631542">if</span>&nbsp;<span class="ident" id="5631545">ssd</span>&nbsp;<span class="op" id="5631549">==</span>&nbsp;<span class="num" id="5631552">0</span>&nbsp;<span class="op" id="5631554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5631560">return</span>&nbsp;<span class="ident" id="5631567">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5631572">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631577">ret</span><span class="op" id="5631580">,</span>&nbsp;<span class="ident" id="5631582">bestSSD</span>&nbsp;<span class="op" id="5631590">=</span>&nbsp;<span class="ident" id="5631592">i</span><span class="op" id="5631593">,</span>&nbsp;<span class="ident" id="5631595">ssd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5631601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5631604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5631607">return</span>&nbsp;<span class="ident" id="5631614">ret</span><br>
<span class="lineno"></span><span class="op" id="5631618">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="5631621">//&nbsp;Standard&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="5631641">var</span>&nbsp;<span class="op" id="5631645">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631648">Black</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5631660">=</span>&nbsp;<span class="ident" id="5631662">Gray16</span><span class="op" id="5631668">{</span><span class="num" id="5631669">0</span><span class="op" id="5631670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631673">White</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5631685">=</span>&nbsp;<span class="ident" id="5631687">Gray16</span><span class="op" id="5631693">{</span><span class="num" id="5631694">0xffff</span><span class="op" id="5631700">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631703">Transparent</span>&nbsp;<span class="op" id="5631715">=</span>&nbsp;<span class="ident" id="5631717">Alpha16</span><span class="op" id="5631724">{</span><span class="num" id="5631725">0</span><span class="op" id="5631726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631729">Opaque</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5631741">=</span>&nbsp;<span class="ident" id="5631743">Alpha16</span><span class="op" id="5631750">{</span><span class="num" id="5631751">0xffff</span><span class="op" id="5631757">}</span><br>
<span class="lineno"></span><span class="op" id="5631759">)</span>
</div>
</body>
</html>
