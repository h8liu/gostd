<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/lzw</h2>
<ul>
<li><a href="/gostd/compress/lzw/reader.go.html">reader.go</a></li>
<li><a href="/gostd/compress/lzw/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/lzw/writer.go.html">writer.go</a></li>
<li><a href="/gostd/compress/lzw/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6879820">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6879875">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6879929">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6879980">package</span>&nbsp;<span class="ident" id="6879988">lzw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6879993">import</span>&nbsp;<span class="op" id="6880000">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6880003">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6880009">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6880022">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6880028">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6880039">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6880049">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6880052">var</span>&nbsp;<span class="ident" id="6880056">filenames</span>&nbsp;<span class="op" id="6880066">=</span>&nbsp;<span class="op" id="6880068">[</span><span class="op" id="6880069">]</span><span class="builtintype" id="6880070">string</span><span class="op" id="6880076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6880079">&#34;../testdata/e.txt&#34;</span><span class="op" id="6880098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6880101">&#34;../testdata/pi.txt&#34;</span><span class="op" id="6880121">,</span><br>
<span class="lineno"></span><span class="op" id="6880123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="6880126">//&nbsp;testFile&nbsp;tests&nbsp;that&nbsp;compressing&nbsp;and&nbsp;then&nbsp;decompressing&nbsp;the&nbsp;given&nbsp;file&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="6880204">//&nbsp;the&nbsp;given&nbsp;options&nbsp;yields&nbsp;equivalent&nbsp;bytes&nbsp;to&nbsp;the&nbsp;original&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6880271">func</span>&nbsp;<span class="ident" id="6880276">testFile</span><span class="op" id="6880284">(</span><span class="ident" id="6880285">t</span>&nbsp;<span class="op" id="6880287">*</span><span class="ident" id="6880288">testing</span><span class="op" id="6880295">.</span><span class="ident" id="6880296">T</span><span class="op" id="6880297">,</span>&nbsp;<span class="ident" id="6880299">fn</span>&nbsp;<span class="builtintype" id="6880302">string</span><span class="op" id="6880308">,</span>&nbsp;<span class="ident" id="6880310">order</span>&nbsp;<span class="ident" id="6880316">Order</span><span class="op" id="6880321">,</span>&nbsp;<span class="ident" id="6880323">litWidth</span>&nbsp;<span class="builtintype" id="6880332">int</span><span class="op" id="6880335">)</span>&nbsp;<span class="op" id="6880337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6880340">//&nbsp;Read&nbsp;the&nbsp;file,&nbsp;as&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6880377">golden</span><span class="op" id="6880383">,</span>&nbsp;<span class="ident" id="6880385">err</span>&nbsp;<span class="op" id="6880389">:=</span>&nbsp;<span class="ident" id="6880392">os</span><span class="op" id="6880394">.</span><span class="ident" id="6880395">Open</span><span class="op" id="6880399">(</span><span class="ident" id="6880400">fn</span><span class="op" id="6880402">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6880405">if</span>&nbsp;<span class="ident" id="6880408">err</span>&nbsp;<span class="op" id="6880412">!=</span>&nbsp;<span class="builtintype" id="6880415">nil</span>&nbsp;<span class="op" id="6880419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6880423">t</span><span class="op" id="6880424">.</span><span class="ident" id="6880425">Errorf</span><span class="op" id="6880431">(</span><span class="string" id="6880432">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6880463">,</span>&nbsp;<span class="ident" id="6880465">fn</span><span class="op" id="6880467">,</span>&nbsp;<span class="ident" id="6880469">order</span><span class="op" id="6880474">,</span>&nbsp;<span class="ident" id="6880476">litWidth</span><span class="op" id="6880484">,</span>&nbsp;<span class="ident" id="6880486">err</span><span class="op" id="6880489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6880493">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6880501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6880504">defer</span>&nbsp;<span class="ident" id="6880510">golden</span><span class="op" id="6880516">.</span><span class="ident" id="6880517">Close</span><span class="op" id="6880522">(</span><span class="op" id="6880523">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6880527">//&nbsp;Read&nbsp;the&nbsp;file&nbsp;again,&nbsp;and&nbsp;push&nbsp;it&nbsp;through&nbsp;a&nbsp;pipe&nbsp;that&nbsp;compresses&nbsp;at&nbsp;the&nbsp;write&nbsp;end,&nbsp;and&nbsp;decompresses&nbsp;at&nbsp;the&nbsp;read&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6880647">raw</span><span class="op" id="6880650">,</span>&nbsp;<span class="ident" id="6880652">err</span>&nbsp;<span class="op" id="6880656">:=</span>&nbsp;<span class="ident" id="6880659">os</span><span class="op" id="6880661">.</span><span class="ident" id="6880662">Open</span><span class="op" id="6880666">(</span><span class="ident" id="6880667">fn</span><span class="op" id="6880669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6880672">if</span>&nbsp;<span class="ident" id="6880675">err</span>&nbsp;<span class="op" id="6880679">!=</span>&nbsp;<span class="builtintype" id="6880682">nil</span>&nbsp;<span class="op" id="6880686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6880690">t</span><span class="op" id="6880691">.</span><span class="ident" id="6880692">Errorf</span><span class="op" id="6880698">(</span><span class="string" id="6880699">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6880730">,</span>&nbsp;<span class="ident" id="6880732">fn</span><span class="op" id="6880734">,</span>&nbsp;<span class="ident" id="6880736">order</span><span class="op" id="6880741">,</span>&nbsp;<span class="ident" id="6880743">litWidth</span><span class="op" id="6880751">,</span>&nbsp;<span class="ident" id="6880753">err</span><span class="op" id="6880756">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6880760">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6880768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6880772">piper</span><span class="op" id="6880777">,</span>&nbsp;<span class="ident" id="6880779">pipew</span>&nbsp;<span class="op" id="6880785">:=</span>&nbsp;<span class="ident" id="6880788">io</span><span class="op" id="6880790">.</span><span class="ident" id="6880791">Pipe</span><span class="op" id="6880795">(</span><span class="op" id="6880796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6880799">defer</span>&nbsp;<span class="ident" id="6880805">piper</span><span class="op" id="6880810">.</span><span class="ident" id="6880811">Close</span><span class="op" id="6880816">(</span><span class="op" id="6880817">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6880820">go</span>&nbsp;<span class="keyword" id="6880823">func</span><span class="op" id="6880827">(</span><span class="op" id="6880828">)</span>&nbsp;<span class="op" id="6880830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6880834">defer</span>&nbsp;<span class="ident" id="6880840">raw</span><span class="op" id="6880843">.</span><span class="ident" id="6880844">Close</span><span class="op" id="6880849">(</span><span class="op" id="6880850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6880854">defer</span>&nbsp;<span class="ident" id="6880860">pipew</span><span class="op" id="6880865">.</span><span class="ident" id="6880866">Close</span><span class="op" id="6880871">(</span><span class="op" id="6880872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6880876">lzww</span>&nbsp;<span class="op" id="6880881">:=</span>&nbsp;<span class="ident" id="6880884">NewWriter</span><span class="op" id="6880893">(</span><span class="ident" id="6880894">pipew</span><span class="op" id="6880899">,</span>&nbsp;<span class="ident" id="6880901">order</span><span class="op" id="6880906">,</span>&nbsp;<span class="ident" id="6880908">litWidth</span><span class="op" id="6880916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6880920">defer</span>&nbsp;<span class="ident" id="6880926">lzww</span><span class="op" id="6880930">.</span><span class="ident" id="6880931">Close</span><span class="op" id="6880936">(</span><span class="op" id="6880937">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6880941">var</span>&nbsp;<span class="ident" id="6880945">b</span>&nbsp;<span class="op" id="6880947">[</span><span class="num" id="6880948">4096</span><span class="op" id="6880952">]</span><span class="builtintype" id="6880953">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6880960">for</span>&nbsp;<span class="op" id="6880964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6880969">n</span><span class="op" id="6880970">,</span>&nbsp;<span class="ident" id="6880972">err0</span>&nbsp;<span class="op" id="6880977">:=</span>&nbsp;<span class="ident" id="6880980">raw</span><span class="op" id="6880983">.</span><span class="ident" id="6880984">Read</span><span class="op" id="6880988">(</span><span class="ident" id="6880989">b</span><span class="op" id="6880990">[</span><span class="op" id="6880991">:</span><span class="op" id="6880992">]</span><span class="op" id="6880993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6880998">if</span>&nbsp;<span class="ident" id="6881001">err0</span>&nbsp;<span class="op" id="6881006">!=</span>&nbsp;<span class="builtintype" id="6881009">nil</span>&nbsp;<span class="op" id="6881013">&amp;&amp;</span>&nbsp;<span class="ident" id="6881016">err0</span>&nbsp;<span class="op" id="6881021">!=</span>&nbsp;<span class="ident" id="6881024">io</span><span class="op" id="6881026">.</span><span class="ident" id="6881027">EOF</span>&nbsp;<span class="op" id="6881031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6881037">t</span><span class="op" id="6881038">.</span><span class="ident" id="6881039">Errorf</span><span class="op" id="6881045">(</span><span class="string" id="6881046">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6881077">,</span>&nbsp;<span class="ident" id="6881079">fn</span><span class="op" id="6881081">,</span>&nbsp;<span class="ident" id="6881083">order</span><span class="op" id="6881088">,</span>&nbsp;<span class="ident" id="6881090">litWidth</span><span class="op" id="6881098">,</span>&nbsp;<span class="ident" id="6881100">err0</span><span class="op" id="6881104">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881110">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6881120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6881125">_</span><span class="op" id="6881126">,</span>&nbsp;<span class="ident" id="6881128">err1</span>&nbsp;<span class="op" id="6881133">:=</span>&nbsp;<span class="ident" id="6881136">lzww</span><span class="op" id="6881140">.</span><span class="ident" id="6881141">Write</span><span class="op" id="6881146">(</span><span class="ident" id="6881147">b</span><span class="op" id="6881148">[</span><span class="op" id="6881149">:</span><span class="ident" id="6881150">n</span><span class="op" id="6881151">]</span><span class="op" id="6881152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881157">if</span>&nbsp;<span class="ident" id="6881160">err1</span>&nbsp;<span class="op" id="6881165">!=</span>&nbsp;<span class="builtintype" id="6881168">nil</span>&nbsp;<span class="op" id="6881172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6881178">t</span><span class="op" id="6881179">.</span><span class="ident" id="6881180">Errorf</span><span class="op" id="6881186">(</span><span class="string" id="6881187">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6881218">,</span>&nbsp;<span class="ident" id="6881220">fn</span><span class="op" id="6881222">,</span>&nbsp;<span class="ident" id="6881224">order</span><span class="op" id="6881229">,</span>&nbsp;<span class="ident" id="6881231">litWidth</span><span class="op" id="6881239">,</span>&nbsp;<span class="ident" id="6881241">err1</span><span class="op" id="6881245">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881251">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6881261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881266">if</span>&nbsp;<span class="ident" id="6881269">err0</span>&nbsp;<span class="op" id="6881274">==</span>&nbsp;<span class="ident" id="6881277">io</span><span class="op" id="6881279">.</span><span class="ident" id="6881280">EOF</span>&nbsp;<span class="op" id="6881284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881290">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6881299">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6881303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6881306">}</span><span class="op" id="6881307">(</span><span class="op" id="6881308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6881311">lzwr</span>&nbsp;<span class="op" id="6881316">:=</span>&nbsp;<span class="ident" id="6881319">NewReader</span><span class="op" id="6881328">(</span><span class="ident" id="6881329">piper</span><span class="op" id="6881334">,</span>&nbsp;<span class="ident" id="6881336">order</span><span class="op" id="6881341">,</span>&nbsp;<span class="ident" id="6881343">litWidth</span><span class="op" id="6881351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881354">defer</span>&nbsp;<span class="ident" id="6881360">lzwr</span><span class="op" id="6881364">.</span><span class="ident" id="6881365">Close</span><span class="op" id="6881370">(</span><span class="op" id="6881371">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6881375">//&nbsp;Compare&nbsp;the&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6881396">b0</span><span class="op" id="6881398">,</span>&nbsp;<span class="ident" id="6881400">err0</span>&nbsp;<span class="op" id="6881405">:=</span>&nbsp;<span class="ident" id="6881408">ioutil</span><span class="op" id="6881414">.</span><span class="ident" id="6881415">ReadAll</span><span class="op" id="6881422">(</span><span class="ident" id="6881423">golden</span><span class="op" id="6881429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6881432">b1</span><span class="op" id="6881434">,</span>&nbsp;<span class="ident" id="6881436">err1</span>&nbsp;<span class="op" id="6881441">:=</span>&nbsp;<span class="ident" id="6881444">ioutil</span><span class="op" id="6881450">.</span><span class="ident" id="6881451">ReadAll</span><span class="op" id="6881458">(</span><span class="ident" id="6881459">lzwr</span><span class="op" id="6881463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881466">if</span>&nbsp;<span class="ident" id="6881469">err0</span>&nbsp;<span class="op" id="6881474">!=</span>&nbsp;<span class="builtintype" id="6881477">nil</span>&nbsp;<span class="op" id="6881481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6881485">t</span><span class="op" id="6881486">.</span><span class="ident" id="6881487">Errorf</span><span class="op" id="6881493">(</span><span class="string" id="6881494">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6881525">,</span>&nbsp;<span class="ident" id="6881527">fn</span><span class="op" id="6881529">,</span>&nbsp;<span class="ident" id="6881531">order</span><span class="op" id="6881536">,</span>&nbsp;<span class="ident" id="6881538">litWidth</span><span class="op" id="6881546">,</span>&nbsp;<span class="ident" id="6881548">err0</span><span class="op" id="6881552">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881556">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6881564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881567">if</span>&nbsp;<span class="ident" id="6881570">err1</span>&nbsp;<span class="op" id="6881575">!=</span>&nbsp;<span class="builtintype" id="6881578">nil</span>&nbsp;<span class="op" id="6881582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6881586">t</span><span class="op" id="6881587">.</span><span class="ident" id="6881588">Errorf</span><span class="op" id="6881594">(</span><span class="string" id="6881595">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6881626">,</span>&nbsp;<span class="ident" id="6881628">fn</span><span class="op" id="6881630">,</span>&nbsp;<span class="ident" id="6881632">order</span><span class="op" id="6881637">,</span>&nbsp;<span class="ident" id="6881639">litWidth</span><span class="op" id="6881647">,</span>&nbsp;<span class="ident" id="6881649">err1</span><span class="op" id="6881653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881657">return</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6881665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881668">if</span>&nbsp;<span class="builtinfunc" id="6881671">len</span><span class="op" id="6881674">(</span><span class="ident" id="6881675">b1</span><span class="op" id="6881677">)</span>&nbsp;<span class="op" id="6881679">!=</span>&nbsp;<span class="builtinfunc" id="6881682">len</span><span class="op" id="6881685">(</span><span class="ident" id="6881686">b0</span><span class="op" id="6881688">)</span>&nbsp;<span class="op" id="6881690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6881694">t</span><span class="op" id="6881695">.</span><span class="ident" id="6881696">Errorf</span><span class="op" id="6881702">(</span><span class="string" id="6881703">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;length&nbsp;mismatch&nbsp;%d&nbsp;!=&nbsp;%d&#34;</span><span class="op" id="6881756">,</span>&nbsp;<span class="ident" id="6881758">fn</span><span class="op" id="6881760">,</span>&nbsp;<span class="ident" id="6881762">order</span><span class="op" id="6881767">,</span>&nbsp;<span class="ident" id="6881769">litWidth</span><span class="op" id="6881777">,</span>&nbsp;<span class="builtinfunc" id="6881779">len</span><span class="op" id="6881782">(</span><span class="ident" id="6881783">b1</span><span class="op" id="6881785">)</span><span class="op" id="6881786">,</span>&nbsp;<span class="builtinfunc" id="6881788">len</span><span class="op" id="6881791">(</span><span class="ident" id="6881792">b0</span><span class="op" id="6881794">)</span><span class="op" id="6881795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881799">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6881807">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881810">for</span>&nbsp;<span class="ident" id="6881814">i</span>&nbsp;<span class="op" id="6881816">:=</span>&nbsp;<span class="num" id="6881819">0</span><span class="op" id="6881820">;</span>&nbsp;<span class="ident" id="6881822">i</span>&nbsp;<span class="op" id="6881824">&lt;</span>&nbsp;<span class="builtinfunc" id="6881826">len</span><span class="op" id="6881829">(</span><span class="ident" id="6881830">b0</span><span class="op" id="6881832">)</span><span class="op" id="6881833">;</span>&nbsp;<span class="ident" id="6881835">i</span><span class="op" id="6881836">++</span>&nbsp;<span class="op" id="6881839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881843">if</span>&nbsp;<span class="ident" id="6881846">b1</span><span class="op" id="6881848">[</span><span class="ident" id="6881849">i</span><span class="op" id="6881850">]</span>&nbsp;<span class="op" id="6881852">!=</span>&nbsp;<span class="ident" id="6881855">b0</span><span class="op" id="6881857">[</span><span class="ident" id="6881858">i</span><span class="op" id="6881859">]</span>&nbsp;<span class="op" id="6881861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6881866">t</span><span class="op" id="6881867">.</span><span class="ident" id="6881868">Errorf</span><span class="op" id="6881874">(</span><span class="string" id="6881875">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;mismatch&nbsp;at&nbsp;%d,&nbsp;0x%02x&nbsp;!=&nbsp;0x%02x\n&#34;</span><span class="op" id="6881938">,</span>&nbsp;<span class="ident" id="6881940">fn</span><span class="op" id="6881942">,</span>&nbsp;<span class="ident" id="6881944">order</span><span class="op" id="6881949">,</span>&nbsp;<span class="ident" id="6881951">litWidth</span><span class="op" id="6881959">,</span>&nbsp;<span class="ident" id="6881961">i</span><span class="op" id="6881962">,</span>&nbsp;<span class="ident" id="6881964">b1</span><span class="op" id="6881966">[</span><span class="ident" id="6881967">i</span><span class="op" id="6881968">]</span><span class="op" id="6881969">,</span>&nbsp;<span class="ident" id="6881971">b0</span><span class="op" id="6881973">[</span><span class="ident" id="6881974">i</span><span class="op" id="6881975">]</span><span class="op" id="6881976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881981">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6881990">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6881993">}</span><br>
<span class="lineno"></span><span class="op" id="6881995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6881998">func</span>&nbsp;<span class="ident" id="6882003">TestWriter</span><span class="op" id="6882013">(</span><span class="ident" id="6882014">t</span>&nbsp;<span class="op" id="6882016">*</span><span class="ident" id="6882017">testing</span><span class="op" id="6882024">.</span><span class="ident" id="6882025">T</span><span class="op" id="6882026">)</span>&nbsp;<span class="op" id="6882028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882031">for</span>&nbsp;<span class="ident" id="6882035">_</span><span class="op" id="6882036">,</span>&nbsp;<span class="ident" id="6882038">filename</span>&nbsp;<span class="op" id="6882047">:=</span>&nbsp;<span class="keyword" id="6882050">range</span>&nbsp;<span class="ident" id="6882056">filenames</span>&nbsp;<span class="op" id="6882066">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882070">for</span>&nbsp;<span class="ident" id="6882074">_</span><span class="op" id="6882075">,</span>&nbsp;<span class="ident" id="6882077">order</span>&nbsp;<span class="op" id="6882083">:=</span>&nbsp;<span class="keyword" id="6882086">range</span>&nbsp;<span class="op" id="6882092">[</span><span class="op" id="6882093">...</span><span class="op" id="6882096">]</span><span class="ident" id="6882097">Order</span><span class="op" id="6882102">{</span><span class="ident" id="6882103">LSB</span><span class="op" id="6882106">,</span>&nbsp;<span class="ident" id="6882108">MSB</span><span class="op" id="6882111">}</span>&nbsp;<span class="op" id="6882113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6882118">//&nbsp;The&nbsp;test&nbsp;data&nbsp;&#34;2.71828&nbsp;etcetera&#34;&nbsp;is&nbsp;ASCII&nbsp;text&nbsp;requiring&nbsp;at&nbsp;least&nbsp;6&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882198">for</span>&nbsp;<span class="ident" id="6882202">_</span><span class="op" id="6882203">,</span>&nbsp;<span class="ident" id="6882205">litWidth</span>&nbsp;<span class="op" id="6882214">:=</span>&nbsp;<span class="keyword" id="6882217">range</span>&nbsp;<span class="op" id="6882223">[</span><span class="op" id="6882224">...</span><span class="op" id="6882227">]</span><span class="builtintype" id="6882228">int</span><span class="op" id="6882231">{</span><span class="num" id="6882232">6</span><span class="op" id="6882233">,</span>&nbsp;<span class="num" id="6882235">7</span><span class="op" id="6882236">,</span>&nbsp;<span class="num" id="6882238">8</span><span class="op" id="6882239">}</span>&nbsp;<span class="op" id="6882241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882247">testFile</span><span class="op" id="6882255">(</span><span class="ident" id="6882256">t</span><span class="op" id="6882257">,</span>&nbsp;<span class="ident" id="6882259">filename</span><span class="op" id="6882267">,</span>&nbsp;<span class="ident" id="6882269">order</span><span class="op" id="6882274">,</span>&nbsp;<span class="ident" id="6882276">litWidth</span><span class="op" id="6882284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6882289">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6882293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6882296">}</span><br>
<span class="lineno"></span><span class="op" id="6882298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6882301">func</span>&nbsp;<span class="ident" id="6882306">TestWriterReturnValues</span><span class="op" id="6882328">(</span><span class="ident" id="6882329">t</span>&nbsp;<span class="op" id="6882331">*</span><span class="ident" id="6882332">testing</span><span class="op" id="6882339">.</span><span class="ident" id="6882340">T</span><span class="op" id="6882341">)</span>&nbsp;<span class="op" id="6882343">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882346">w</span>&nbsp;<span class="op" id="6882348">:=</span>&nbsp;<span class="ident" id="6882351">NewWriter</span><span class="op" id="6882360">(</span><span class="ident" id="6882361">ioutil</span><span class="op" id="6882367">.</span><span class="ident" id="6882368">Discard</span><span class="op" id="6882375">,</span>&nbsp;<span class="ident" id="6882377">LSB</span><span class="op" id="6882380">,</span>&nbsp;<span class="num" id="6882382">8</span><span class="op" id="6882383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882386">n</span><span class="op" id="6882387">,</span>&nbsp;<span class="ident" id="6882389">err</span>&nbsp;<span class="op" id="6882393">:=</span>&nbsp;<span class="ident" id="6882396">w</span><span class="op" id="6882397">.</span><span class="ident" id="6882398">Write</span><span class="op" id="6882403">(</span><span class="op" id="6882404">[</span><span class="op" id="6882405">]</span><span class="builtintype" id="6882406">byte</span><span class="op" id="6882410">(</span><span class="string" id="6882411">&#34;asdf&#34;</span><span class="op" id="6882417">)</span><span class="op" id="6882418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882421">if</span>&nbsp;<span class="ident" id="6882424">n</span>&nbsp;<span class="op" id="6882426">!=</span>&nbsp;<span class="num" id="6882429">4</span>&nbsp;<span class="op" id="6882431">||</span>&nbsp;<span class="ident" id="6882434">err</span>&nbsp;<span class="op" id="6882438">!=</span>&nbsp;<span class="builtintype" id="6882441">nil</span>&nbsp;<span class="op" id="6882445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882449">t</span><span class="op" id="6882450">.</span><span class="ident" id="6882451">Errorf</span><span class="op" id="6882457">(</span><span class="string" id="6882458">&#34;got&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;4,&nbsp;nil&#34;</span><span class="op" id="6882483">,</span>&nbsp;<span class="ident" id="6882485">n</span><span class="op" id="6882486">,</span>&nbsp;<span class="ident" id="6882488">err</span><span class="op" id="6882491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6882494">}</span><br>
<span class="lineno">105</span><span class="op" id="6882496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6882499">func</span>&nbsp;<span class="ident" id="6882504">benchmarkEncoder</span><span class="op" id="6882520">(</span><span class="ident" id="6882521">b</span>&nbsp;<span class="op" id="6882523">*</span><span class="ident" id="6882524">testing</span><span class="op" id="6882531">.</span><span class="ident" id="6882532">B</span><span class="op" id="6882533">,</span>&nbsp;<span class="ident" id="6882535">n</span>&nbsp;<span class="builtintype" id="6882537">int</span><span class="op" id="6882540">)</span>&nbsp;<span class="op" id="6882542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882545">b</span><span class="op" id="6882546">.</span><span class="ident" id="6882547">StopTimer</span><span class="op" id="6882556">(</span><span class="op" id="6882557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882560">b</span><span class="op" id="6882561">.</span><span class="ident" id="6882562">SetBytes</span><span class="op" id="6882570">(</span><span class="ident" id="6882571">int64</span><span class="op" id="6882576">(</span><span class="ident" id="6882577">n</span><span class="op" id="6882578">)</span><span class="op" id="6882579">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882582">buf0</span><span class="op" id="6882586">,</span>&nbsp;<span class="ident" id="6882588">err</span>&nbsp;<span class="op" id="6882592">:=</span>&nbsp;<span class="ident" id="6882595">ioutil</span><span class="op" id="6882601">.</span><span class="ident" id="6882602">ReadFile</span><span class="op" id="6882610">(</span><span class="string" id="6882611">&#34;../testdata/e.txt&#34;</span><span class="op" id="6882630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882633">if</span>&nbsp;<span class="ident" id="6882636">err</span>&nbsp;<span class="op" id="6882640">!=</span>&nbsp;<span class="builtintype" id="6882643">nil</span>&nbsp;<span class="op" id="6882647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882651">b</span><span class="op" id="6882652">.</span><span class="ident" id="6882653">Fatal</span><span class="op" id="6882658">(</span><span class="ident" id="6882659">err</span><span class="op" id="6882662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6882665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882668">if</span>&nbsp;<span class="builtinfunc" id="6882671">len</span><span class="op" id="6882674">(</span><span class="ident" id="6882675">buf0</span><span class="op" id="6882679">)</span>&nbsp;<span class="op" id="6882681">==</span>&nbsp;<span class="num" id="6882684">0</span>&nbsp;<span class="op" id="6882686">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882690">b</span><span class="op" id="6882691">.</span><span class="ident" id="6882692">Fatalf</span><span class="op" id="6882698">(</span><span class="string" id="6882699">&#34;test&nbsp;file&nbsp;has&nbsp;no&nbsp;data&#34;</span><span class="op" id="6882722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6882725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882728">buf1</span>&nbsp;<span class="op" id="6882733">:=</span>&nbsp;<span class="builtinfunc" id="6882736">make</span><span class="op" id="6882740">(</span><span class="op" id="6882741">[</span><span class="op" id="6882742">]</span><span class="builtintype" id="6882743">byte</span><span class="op" id="6882747">,</span>&nbsp;<span class="ident" id="6882749">n</span><span class="op" id="6882750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882753">for</span>&nbsp;<span class="ident" id="6882757">i</span>&nbsp;<span class="op" id="6882759">:=</span>&nbsp;<span class="num" id="6882762">0</span><span class="op" id="6882763">;</span>&nbsp;<span class="ident" id="6882765">i</span>&nbsp;<span class="op" id="6882767">&lt;</span>&nbsp;<span class="ident" id="6882769">n</span><span class="op" id="6882770">;</span>&nbsp;<span class="ident" id="6882772">i</span>&nbsp;<span class="op" id="6882774">+=</span>&nbsp;<span class="builtinfunc" id="6882777">len</span><span class="op" id="6882780">(</span><span class="ident" id="6882781">buf0</span><span class="op" id="6882785">)</span>&nbsp;<span class="op" id="6882787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882791">if</span>&nbsp;<span class="builtinfunc" id="6882794">len</span><span class="op" id="6882797">(</span><span class="ident" id="6882798">buf0</span><span class="op" id="6882802">)</span>&nbsp;<span class="op" id="6882804">&gt;</span>&nbsp;<span class="ident" id="6882806">n</span><span class="op" id="6882807">-</span><span class="ident" id="6882808">i</span>&nbsp;<span class="op" id="6882810">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882815">buf0</span>&nbsp;<span class="op" id="6882820">=</span>&nbsp;<span class="ident" id="6882822">buf0</span><span class="op" id="6882826">[</span><span class="op" id="6882827">:</span><span class="ident" id="6882828">n</span><span class="op" id="6882829">-</span><span class="ident" id="6882830">i</span><span class="op" id="6882831">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6882835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6882839">copy</span><span class="op" id="6882843">(</span><span class="ident" id="6882844">buf1</span><span class="op" id="6882848">[</span><span class="ident" id="6882849">i</span><span class="op" id="6882850">:</span><span class="op" id="6882851">]</span><span class="op" id="6882852">,</span>&nbsp;<span class="ident" id="6882854">buf0</span><span class="op" id="6882858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6882861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882864">buf0</span>&nbsp;<span class="op" id="6882869">=</span>&nbsp;<span class="builtintype" id="6882871">nil</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882876">runtime</span><span class="op" id="6882883">.</span><span class="ident" id="6882884">GC</span><span class="op" id="6882886">(</span><span class="op" id="6882887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882890">b</span><span class="op" id="6882891">.</span><span class="ident" id="6882892">StartTimer</span><span class="op" id="6882902">(</span><span class="op" id="6882903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882906">for</span>&nbsp;<span class="ident" id="6882910">i</span>&nbsp;<span class="op" id="6882912">:=</span>&nbsp;<span class="num" id="6882915">0</span><span class="op" id="6882916">;</span>&nbsp;<span class="ident" id="6882918">i</span>&nbsp;<span class="op" id="6882920">&lt;</span>&nbsp;<span class="ident" id="6882922">b</span><span class="op" id="6882923">.</span><span class="ident" id="6882924">N</span><span class="op" id="6882925">;</span>&nbsp;<span class="ident" id="6882927">i</span><span class="op" id="6882928">++</span>&nbsp;<span class="op" id="6882931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882935">w</span>&nbsp;<span class="op" id="6882937">:=</span>&nbsp;<span class="ident" id="6882940">NewWriter</span><span class="op" id="6882949">(</span><span class="ident" id="6882950">ioutil</span><span class="op" id="6882956">.</span><span class="ident" id="6882957">Discard</span><span class="op" id="6882964">,</span>&nbsp;<span class="ident" id="6882966">LSB</span><span class="op" id="6882969">,</span>&nbsp;<span class="num" id="6882971">8</span><span class="op" id="6882972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882976">w</span><span class="op" id="6882977">.</span><span class="ident" id="6882978">Write</span><span class="op" id="6882983">(</span><span class="ident" id="6882984">buf1</span><span class="op" id="6882988">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882992">w</span><span class="op" id="6882993">.</span><span class="ident" id="6882994">Close</span><span class="op" id="6882999">(</span><span class="op" id="6883000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6883003">}</span><br>
<span class="lineno"></span><span class="op" id="6883005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6883008">func</span>&nbsp;<span class="ident" id="6883013">BenchmarkEncoder1e4</span><span class="op" id="6883032">(</span><span class="ident" id="6883033">b</span>&nbsp;<span class="op" id="6883035">*</span><span class="ident" id="6883036">testing</span><span class="op" id="6883043">.</span><span class="ident" id="6883044">B</span><span class="op" id="6883045">)</span>&nbsp;<span class="op" id="6883047">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6883050">benchmarkEncoder</span><span class="op" id="6883066">(</span><span class="ident" id="6883067">b</span><span class="op" id="6883068">,</span>&nbsp;<span class="num" id="6883070">1e4</span><span class="op" id="6883073">)</span><br>
<span class="lineno"></span><span class="op" id="6883075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6883078">func</span>&nbsp;<span class="ident" id="6883083">BenchmarkEncoder1e5</span><span class="op" id="6883102">(</span><span class="ident" id="6883103">b</span>&nbsp;<span class="op" id="6883105">*</span><span class="ident" id="6883106">testing</span><span class="op" id="6883113">.</span><span class="ident" id="6883114">B</span><span class="op" id="6883115">)</span>&nbsp;<span class="op" id="6883117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6883120">benchmarkEncoder</span><span class="op" id="6883136">(</span><span class="ident" id="6883137">b</span><span class="op" id="6883138">,</span>&nbsp;<span class="num" id="6883140">1e5</span><span class="op" id="6883143">)</span><br>
<span class="lineno">140</span><span class="op" id="6883145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6883148">func</span>&nbsp;<span class="ident" id="6883153">BenchmarkEncoder1e6</span><span class="op" id="6883172">(</span><span class="ident" id="6883173">b</span>&nbsp;<span class="op" id="6883175">*</span><span class="ident" id="6883176">testing</span><span class="op" id="6883183">.</span><span class="ident" id="6883184">B</span><span class="op" id="6883185">)</span>&nbsp;<span class="op" id="6883187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6883190">benchmarkEncoder</span><span class="op" id="6883206">(</span><span class="ident" id="6883207">b</span><span class="op" id="6883208">,</span>&nbsp;<span class="num" id="6883210">1e6</span><span class="op" id="6883213">)</span><br>
<span class="lineno"></span><span class="op" id="6883215">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
