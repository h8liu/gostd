<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>log/syslog</h2>
<ul>
<li><a href="/gostd/log/syslog/syslog.go.html">syslog.go</a></li>
<li><a href="/gostd/log/syslog/syslog_test.go.html">syslog_test.go</a></li>
<li><a href="/gostd/log/syslog/syslog_unix.go.html">syslog_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6176078">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6176133">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6176187">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6176238">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6176271">package</span>&nbsp;<span class="ident" id="6176279">syslog</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6176287">import</span>&nbsp;<span class="op" id="6176294">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6176297">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6176307">&#34;net&#34;</span><br>
<span class="lineno"></span><span class="op" id="6176313">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6176316">//&nbsp;unixSyslog&nbsp;opens&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon&nbsp;running&nbsp;on&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="6176385">//&nbsp;local&nbsp;machine&nbsp;using&nbsp;a&nbsp;Unix&nbsp;domain&nbsp;socket.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6176431">func</span>&nbsp;<span class="ident" id="6176436">unixSyslog</span><span class="op" id="6176446">(</span><span class="op" id="6176447">)</span>&nbsp;<span class="op" id="6176449">(</span><span class="ident" id="6176450">conn</span>&nbsp;<span class="ident" id="6176455">serverConn</span><span class="op" id="6176465">,</span>&nbsp;<span class="ident" id="6176467">err</span>&nbsp;<span class="builtintype" id="6176471">error</span><span class="op" id="6176476">)</span>&nbsp;<span class="op" id="6176478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176481">logTypes</span>&nbsp;<span class="op" id="6176490">:=</span>&nbsp;<span class="op" id="6176493">[</span><span class="op" id="6176494">]</span><span class="builtintype" id="6176495">string</span><span class="op" id="6176501">{</span><span class="string" id="6176502">&#34;unixgram&#34;</span><span class="op" id="6176512">,</span>&nbsp;<span class="string" id="6176514">&#34;unix&#34;</span><span class="op" id="6176520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176523">logPaths</span>&nbsp;<span class="op" id="6176532">:=</span>&nbsp;<span class="op" id="6176535">[</span><span class="op" id="6176536">]</span><span class="builtintype" id="6176537">string</span><span class="op" id="6176543">{</span><span class="string" id="6176544">&#34;/dev/log&#34;</span><span class="op" id="6176554">,</span>&nbsp;<span class="string" id="6176556">&#34;/var/run/syslog&#34;</span><span class="op" id="6176573">,</span>&nbsp;<span class="string" id="6176575">&#34;/var/run/log&#34;</span><span class="op" id="6176589">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176592">for</span>&nbsp;<span class="ident" id="6176596">_</span><span class="op" id="6176597">,</span>&nbsp;<span class="ident" id="6176599">network</span>&nbsp;<span class="op" id="6176607">:=</span>&nbsp;<span class="keyword" id="6176610">range</span>&nbsp;<span class="ident" id="6176616">logTypes</span>&nbsp;<span class="op" id="6176625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176629">for</span>&nbsp;<span class="ident" id="6176633">_</span><span class="op" id="6176634">,</span>&nbsp;<span class="ident" id="6176636">path</span>&nbsp;<span class="op" id="6176641">:=</span>&nbsp;<span class="keyword" id="6176644">range</span>&nbsp;<span class="ident" id="6176650">logPaths</span>&nbsp;<span class="op" id="6176659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176664">conn</span><span class="op" id="6176668">,</span>&nbsp;<span class="ident" id="6176670">err</span>&nbsp;<span class="op" id="6176674">:=</span>&nbsp;<span class="ident" id="6176677">net</span><span class="op" id="6176680">.</span><span class="ident" id="6176681">Dial</span><span class="op" id="6176685">(</span><span class="ident" id="6176686">network</span><span class="op" id="6176693">,</span>&nbsp;<span class="ident" id="6176695">path</span><span class="op" id="6176699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176704">if</span>&nbsp;<span class="ident" id="6176707">err</span>&nbsp;<span class="op" id="6176711">!=</span>&nbsp;<span class="ident" id="6176714">nil</span>&nbsp;<span class="op" id="6176718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176724">continue</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6176736">}</span>&nbsp;<span class="keyword" id="6176738">else</span>&nbsp;<span class="op" id="6176743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176749">return</span>&nbsp;<span class="op" id="6176756">&amp;</span><span class="ident" id="6176757">netConn</span><span class="op" id="6176764">{</span><span class="ident" id="6176765">conn</span><span class="op" id="6176769">:</span>&nbsp;<span class="ident" id="6176771">conn</span><span class="op" id="6176775">,</span>&nbsp;<span class="ident" id="6176777">local</span><span class="op" id="6176782">:</span>&nbsp;<span class="builtintype" id="6176784">true</span><span class="op" id="6176788">}</span><span class="op" id="6176789">,</span>&nbsp;<span class="ident" id="6176791">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6176798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6176802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6176805">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176808">return</span>&nbsp;<span class="ident" id="6176815">nil</span><span class="op" id="6176818">,</span>&nbsp;<span class="ident" id="6176820">errors</span><span class="op" id="6176826">.</span><span class="ident" id="6176827">New</span><span class="op" id="6176830">(</span><span class="string" id="6176831">&#34;Unix&nbsp;syslog&nbsp;delivery&nbsp;error&#34;</span><span class="op" id="6176859">)</span><br>
<span class="lineno"></span><span class="op" id="6176861">}</span>
</div>
</body>
</html>
