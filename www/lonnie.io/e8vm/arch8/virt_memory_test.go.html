<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="8617698">package</span>&nbsp;<span class="ident" id="8617706">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8617713">import</span>&nbsp;<span class="op" id="8617720">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8617723">&#34;testing&#34;</span><br>
<span class="lineno">5</span><span class="op" id="8617733">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8617736">func</span>&nbsp;<span class="ident" id="8617741">TestVirtMemory</span><span class="op" id="8617755">(</span><span class="ident" id="8617756">t</span>&nbsp;<span class="op" id="8617758">*</span><span class="ident" id="8617759"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617723">testing</a></span><span class="op" id="8617766">.</span><span class="ident" id="8617767">T</span><span class="op" id="8617768">)</span>&nbsp;<span class="op" id="8617770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8617773">as</span>&nbsp;<span class="op" id="8617776">:=</span>&nbsp;<span class="keyword" id="8617779">func</span><span class="op" id="8617783">(</span><span class="ident" id="8617784">cond</span>&nbsp;<span class="builtintype" id="8617789">bool</span><span class="op" id="8617793">,</span>&nbsp;<span class="ident" id="8617795">s</span>&nbsp;<span class="builtintype" id="8617797">string</span><span class="op" id="8617803">,</span>&nbsp;<span class="ident" id="8617805">args</span>&nbsp;<span class="op" id="8617810">...</span><span class="keyword" id="8617813">interface</span><span class="op" id="8617822">{</span><span class="op" id="8617823">}</span><span class="op" id="8617824">)</span>&nbsp;<span class="op" id="8617826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8617830">if</span>&nbsp;<span class="op" id="8617833">!</span><span class="ident" id="8617834"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617784">cond</a></span>&nbsp;<span class="op" id="8617839">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8617844"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617756">t</a></span><span class="op" id="8617845">.</span><span class="ident" id="8617846">Fatalf</span><span class="op" id="8617852">(</span><span class="ident" id="8617853"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617795">s</a></span><span class="op" id="8617854">,</span>&nbsp;<span class="ident" id="8617856"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617805">args</a></span><span class="op" id="8617860">...</span><span class="op" id="8617863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8617867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8617870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8617874">eo</span>&nbsp;<span class="op" id="8617877">:=</span>&nbsp;<span class="keyword" id="8617880">func</span><span class="op" id="8617884">(</span><span class="ident" id="8617885">cond</span>&nbsp;<span class="builtintype" id="8617890">bool</span><span class="op" id="8617894">,</span>&nbsp;<span class="ident" id="8617896">s</span>&nbsp;<span class="builtintype" id="8617898">string</span><span class="op" id="8617904">,</span>&nbsp;<span class="ident" id="8617906">args</span>&nbsp;<span class="op" id="8617911">...</span><span class="keyword" id="8617914">interface</span><span class="op" id="8617923">{</span><span class="op" id="8617924">}</span><span class="op" id="8617925">)</span>&nbsp;<span class="op" id="8617927">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8617931">if</span>&nbsp;<span class="ident" id="8617934"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617885">cond</a></span>&nbsp;<span class="op" id="8617939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8617944"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617756">t</a></span><span class="op" id="8617945">.</span><span class="ident" id="8617946">Fatalf</span><span class="op" id="8617952">(</span><span class="ident" id="8617953"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617896">s</a></span><span class="op" id="8617954">,</span>&nbsp;<span class="ident" id="8617956"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617906">args</a></span><span class="op" id="8617960">...</span><span class="op" id="8617963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8617967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8617970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8617974">m</span>&nbsp;<span class="op" id="8617976">:=</span>&nbsp;<span class="ident" id="8617979"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5984648">newPhyMemory</a></span><span class="op" id="8617991">(</span><span class="num" id="8617992">8</span>&nbsp;<span class="op" id="8617994">*</span>&nbsp;<span class="ident" id="8617996"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span><span class="op" id="8618004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618007">p1</span>&nbsp;<span class="op" id="8618010">:=</span>&nbsp;<span class="ident" id="8618013"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617974">m</a></span><span class="op" id="8618014">.</span><span class="ident" id="8618015">Page</span><span class="op" id="8618019">(</span><span class="num" id="8618020">1</span><span class="op" id="8618021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618024">p2</span>&nbsp;<span class="op" id="8618027">:=</span>&nbsp;<span class="ident" id="8618030"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617974">m</a></span><span class="op" id="8618031">.</span><span class="ident" id="8618032">Page</span><span class="op" id="8618036">(</span><span class="num" id="8618037">2</span><span class="op" id="8618038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618041">p3</span>&nbsp;<span class="op" id="8618044">:=</span>&nbsp;<span class="ident" id="8618047"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617974">m</a></span><span class="op" id="8618048">.</span><span class="ident" id="8618049">Page</span><span class="op" id="8618053">(</span><span class="num" id="8618054">3</span><span class="op" id="8618055">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618059">pte1</span>&nbsp;<span class="op" id="8618064">:=</span>&nbsp;<span class="ident" id="8618067"><a href="/lonnie.io/e8vm/arch8/page_table.go.html#5981960">ptEntry</a></span><span class="op" id="8618074">(</span><span class="num" id="8618075">2</span>&nbsp;<span class="op" id="8618077">*</span>&nbsp;<span class="ident" id="8618079"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span><span class="op" id="8618087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618090"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618059">pte1</a></span><span class="op" id="8618094">.</span><span class="ident" id="8618095">setBit</span><span class="op" id="8618101">(</span><span class="ident" id="8618102"><a href="/lonnie.io/e8vm/arch8/page_table.go.html#5981985">pteValid</a></span><span class="op" id="8618110">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618114"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618007">p1</a></span><span class="op" id="8618116">.</span><span class="ident" id="8618117">WriteWord</span><span class="op" id="8618126">(</span><span class="num" id="8618127">0</span><span class="op" id="8618128">,</span>&nbsp;<span class="builtintype" id="8618130">uint32</span><span class="op" id="8618136">(</span><span class="ident" id="8618137"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618059">pte1</a></span><span class="op" id="8618141">)</span><span class="op" id="8618142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618145"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618059">pte1</a></span>&nbsp;<span class="op" id="8618150">+=</span>&nbsp;<span class="ident" id="8618153"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618163"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618007">p1</a></span><span class="op" id="8618165">.</span><span class="ident" id="8618166">WriteWord</span><span class="op" id="8618175">(</span><span class="num" id="8618176">4</span><span class="op" id="8618177">*</span><span class="num" id="8618178">10</span><span class="op" id="8618180">,</span>&nbsp;<span class="builtintype" id="8618182">uint32</span><span class="op" id="8618188">(</span><span class="ident" id="8618189"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618059">pte1</a></span><span class="op" id="8618193">)</span><span class="op" id="8618194">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8618198">for</span>&nbsp;<span class="ident" id="8618202">i</span>&nbsp;<span class="op" id="8618204">:=</span>&nbsp;<span class="builtintype" id="8618207">uint32</span><span class="op" id="8618213">(</span><span class="num" id="8618214">0</span><span class="op" id="8618215">)</span><span class="op" id="8618216">;</span>&nbsp;<span class="ident" id="8618218"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618202">i</a></span>&nbsp;<span class="op" id="8618220">&lt;</span>&nbsp;<span class="num" id="8618222">4</span><span class="op" id="8618223">;</span>&nbsp;<span class="ident" id="8618225"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618202">i</a></span><span class="op" id="8618226">++</span>&nbsp;<span class="op" id="8618229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618233">pte</span>&nbsp;<span class="op" id="8618237">:=</span>&nbsp;<span class="ident" id="8618240"><a href="/lonnie.io/e8vm/arch8/page_table.go.html#5981960">ptEntry</a></span><span class="op" id="8618247">(</span><span class="op" id="8618248">(</span><span class="ident" id="8618249"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618202">i</a></span>&nbsp;<span class="op" id="8618251">+</span>&nbsp;<span class="num" id="8618253">4</span><span class="op" id="8618254">)</span>&nbsp;<span class="op" id="8618256">*</span>&nbsp;<span class="ident" id="8618258"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span><span class="op" id="8618266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618270"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618233">pte</a></span><span class="op" id="8618273">.</span><span class="ident" id="8618274">setBit</span><span class="op" id="8618280">(</span><span class="ident" id="8618281"><a href="/lonnie.io/e8vm/arch8/page_table.go.html#5981985">pteValid</a></span><span class="op" id="8618289">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618293"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618024">p2</a></span><span class="op" id="8618295">.</span><span class="ident" id="8618296">WriteWord</span><span class="op" id="8618305">(</span><span class="num" id="8618306">4</span><span class="op" id="8618307">*</span><span class="ident" id="8618308"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618202">i</a></span><span class="op" id="8618309">,</span>&nbsp;<span class="builtintype" id="8618311">uint32</span><span class="op" id="8618317">(</span><span class="ident" id="8618318"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618233">pte</a></span><span class="op" id="8618321">)</span><span class="op" id="8618322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618326"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618041">p3</a></span><span class="op" id="8618328">.</span><span class="ident" id="8618329">WriteWord</span><span class="op" id="8618338">(</span><span class="num" id="8618339">4</span><span class="op" id="8618340">*</span><span class="op" id="8618341">(</span><span class="num" id="8618342">3</span><span class="op" id="8618343">-</span><span class="ident" id="8618344"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618202">i</a></span><span class="op" id="8618345">)</span><span class="op" id="8618346">,</span>&nbsp;<span class="builtintype" id="8618348">uint32</span><span class="op" id="8618354">(</span><span class="ident" id="8618355"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618233">pte</a></span><span class="op" id="8618358">)</span><span class="op" id="8618359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8618362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618366">vm</span>&nbsp;<span class="op" id="8618369">:=</span>&nbsp;<span class="ident" id="8618372"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992527">newVirtMemory</a></span><span class="op" id="8618385">(</span><span class="ident" id="8618386"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617974">m</a></span><span class="op" id="8618387">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618390"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618366">vm</a></span><span class="op" id="8618392">.</span><span class="ident" id="8618393">SetTable</span><span class="op" id="8618401">(</span><span class="ident" id="8618402"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span><span class="op" id="8618410">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8618414">//&nbsp;page&nbsp;0,&nbsp;1,&nbsp;2,&nbsp;3&nbsp;is&nbsp;mapped&nbsp;to&nbsp;4,&nbsp;5,&nbsp;6,&nbsp;7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8618458">//&nbsp;page&nbsp;B+0,&nbsp;B+1,&nbsp;B+2,&nbsp;B+3&nbsp;is&nbsp;mapped&nbsp;to&nbsp;7,&nbsp;6,&nbsp;5,&nbsp;4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8618510">//&nbsp;where&nbsp;B&nbsp;=&nbsp;10&nbsp;*&nbsp;1024</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618534">w</span>&nbsp;<span class="op" id="8618536">:=</span>&nbsp;<span class="builtintype" id="8618539">uint32</span><span class="op" id="8618545">(</span><span class="num" id="8618546">0x37215a40</span><span class="op" id="8618556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618559">off</span>&nbsp;<span class="op" id="8618563">:=</span>&nbsp;<span class="builtintype" id="8618566">uint32</span><span class="op" id="8618572">(</span><span class="num" id="8618573">324</span><span class="op" id="8618576">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8618580">for</span>&nbsp;<span class="ident" id="8618584">i</span>&nbsp;<span class="op" id="8618586">:=</span>&nbsp;<span class="builtintype" id="8618589">uint32</span><span class="op" id="8618595">(</span><span class="num" id="8618596">0</span><span class="op" id="8618597">)</span><span class="op" id="8618598">;</span>&nbsp;<span class="ident" id="8618600"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618584">i</a></span>&nbsp;<span class="op" id="8618602">&lt;</span>&nbsp;<span class="num" id="8618604">4</span><span class="op" id="8618605">;</span>&nbsp;<span class="ident" id="8618607"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618584">i</a></span><span class="op" id="8618608">++</span>&nbsp;<span class="op" id="8618611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618615">wd</span>&nbsp;<span class="op" id="8618618">:=</span>&nbsp;<span class="ident" id="8618621"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618534">w</a></span>&nbsp;<span class="op" id="8618623">+</span>&nbsp;<span class="ident" id="8618625"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618584">i</a></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618629">e</span>&nbsp;<span class="op" id="8618631">:=</span>&nbsp;<span class="ident" id="8618634"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618366">vm</a></span><span class="op" id="8618636">.</span><span class="ident" id="8618637">WriteWord</span><span class="op" id="8618646">(</span><span class="ident" id="8618647"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618559">off</a></span><span class="op" id="8618650">+</span><span class="ident" id="8618651"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618584">i</a></span><span class="op" id="8618652">*</span><span class="ident" id="8618653"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span><span class="op" id="8618661">,</span>&nbsp;<span class="num" id="8618663">0</span><span class="op" id="8618664">,</span>&nbsp;<span class="ident" id="8618666"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618615">wd</a></span><span class="op" id="8618668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618672"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617773">as</a></span><span class="op" id="8618674">(</span><span class="ident" id="8618675"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618629">e</a></span>&nbsp;<span class="op" id="8618677">==</span>&nbsp;<span class="ident" id="8618680">nil</span><span class="op" id="8618683">,</span>&nbsp;<span class="string" id="8618685">&#34;write&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="8618702">,</span>&nbsp;<span class="ident" id="8618704"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618629">e</a></span><span class="op" id="8618705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618709">w2</span><span class="op" id="8618711">,</span>&nbsp;<span class="ident" id="8618713"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618629">e</a></span>&nbsp;<span class="op" id="8618715">:=</span>&nbsp;<span class="ident" id="8618718"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618366">vm</a></span><span class="op" id="8618720">.</span><span class="ident" id="8618721">ReadWord</span><span class="op" id="8618729">(</span><span class="op" id="8618730">(</span><span class="num" id="8618731">10</span><span class="op" id="8618733">*</span><span class="num" id="8618734">1024</span><span class="op" id="8618738">+</span><span class="op" id="8618739">(</span><span class="num" id="8618740">3</span><span class="op" id="8618741">-</span><span class="ident" id="8618742"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618584">i</a></span><span class="op" id="8618743">)</span><span class="op" id="8618744">)</span><span class="op" id="8618745">*</span><span class="ident" id="8618746"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span><span class="op" id="8618754">+</span><span class="ident" id="8618755"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618559">off</a></span><span class="op" id="8618758">,</span>&nbsp;<span class="num" id="8618760">0</span><span class="op" id="8618761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618765"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617773">as</a></span><span class="op" id="8618767">(</span><span class="ident" id="8618768"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618629">e</a></span>&nbsp;<span class="op" id="8618770">==</span>&nbsp;<span class="ident" id="8618773">nil</span><span class="op" id="8618776">,</span>&nbsp;<span class="string" id="8618778">&#34;read&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="8618794">,</span>&nbsp;<span class="ident" id="8618796"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618629">e</a></span><span class="op" id="8618797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618801"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617874">eo</a></span><span class="op" id="8618803">(</span><span class="ident" id="8618804"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618709">w2</a></span>&nbsp;<span class="op" id="8618807">!=</span>&nbsp;<span class="ident" id="8618810"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618615">wd</a></span><span class="op" id="8618812">,</span>&nbsp;<span class="string" id="8618814">&#34;expect&nbsp;0x%08x,&nbsp;got&nbsp;0x%08x&#34;</span><span class="op" id="8618841">,</span>&nbsp;<span class="ident" id="8618843"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618615">wd</a></span><span class="op" id="8618845">,</span>&nbsp;<span class="ident" id="8618847"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618709">w2</a></span><span class="op" id="8618849">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8618852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618856">b</span>&nbsp;<span class="op" id="8618858">:=</span>&nbsp;<span class="builtintype" id="8618861">byte</span><span class="op" id="8618865">(</span><span class="num" id="8618866">0x54</span><span class="op" id="8618870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618873"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618559">off</a></span>&nbsp;<span class="op" id="8618877">=</span>&nbsp;<span class="num" id="8618879">575</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8618884">for</span>&nbsp;<span class="ident" id="8618888">i</span>&nbsp;<span class="op" id="8618890">:=</span>&nbsp;<span class="builtintype" id="8618893">uint32</span><span class="op" id="8618899">(</span><span class="num" id="8618900">0</span><span class="op" id="8618901">)</span><span class="op" id="8618902">;</span>&nbsp;<span class="ident" id="8618904"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618888">i</a></span>&nbsp;<span class="op" id="8618906">&lt;</span>&nbsp;<span class="num" id="8618908">4</span><span class="op" id="8618909">;</span>&nbsp;<span class="ident" id="8618911"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618888">i</a></span><span class="op" id="8618912">++</span>&nbsp;<span class="op" id="8618915">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618919">bt</span>&nbsp;<span class="op" id="8618922">:=</span>&nbsp;<span class="ident" id="8618925"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618856">b</a></span>&nbsp;<span class="op" id="8618927">+</span>&nbsp;<span class="builtintype" id="8618929">byte</span><span class="op" id="8618933">(</span><span class="ident" id="8618934"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618888">i</a></span><span class="op" id="8618935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618939">e</span>&nbsp;<span class="op" id="8618941">:=</span>&nbsp;<span class="ident" id="8618944"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618366">vm</a></span><span class="op" id="8618946">.</span><span class="ident" id="8618947">WriteByte</span><span class="op" id="8618956">(</span><span class="ident" id="8618957"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618559">off</a></span><span class="op" id="8618960">+</span><span class="ident" id="8618961"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618888">i</a></span><span class="op" id="8618962">*</span><span class="ident" id="8618963"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span><span class="op" id="8618971">,</span>&nbsp;<span class="num" id="8618973">0</span><span class="op" id="8618974">,</span>&nbsp;<span class="ident" id="8618976"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618919">bt</a></span><span class="op" id="8618978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8618982"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617773">as</a></span><span class="op" id="8618984">(</span><span class="ident" id="8618985"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618939">e</a></span>&nbsp;<span class="op" id="8618987">==</span>&nbsp;<span class="ident" id="8618990">nil</span><span class="op" id="8618993">,</span>&nbsp;<span class="string" id="8618995">&#34;write&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="8619012">,</span>&nbsp;<span class="ident" id="8619014"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618939">e</a></span><span class="op" id="8619015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8619019">b2</span><span class="op" id="8619021">,</span>&nbsp;<span class="ident" id="8619023"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618939">e</a></span>&nbsp;<span class="op" id="8619025">:=</span>&nbsp;<span class="ident" id="8619028"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618366">vm</a></span><span class="op" id="8619030">.</span><span class="ident" id="8619031">ReadByte</span><span class="op" id="8619039">(</span><span class="op" id="8619040">(</span><span class="num" id="8619041">10</span><span class="op" id="8619043">*</span><span class="num" id="8619044">1024</span><span class="op" id="8619048">+</span><span class="op" id="8619049">(</span><span class="num" id="8619050">3</span><span class="op" id="8619051">-</span><span class="ident" id="8619052"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618888">i</a></span><span class="op" id="8619053">)</span><span class="op" id="8619054">)</span><span class="op" id="8619055">*</span><span class="ident" id="8619056"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span><span class="op" id="8619064">+</span><span class="ident" id="8619065"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618559">off</a></span><span class="op" id="8619068">,</span>&nbsp;<span class="num" id="8619070">0</span><span class="op" id="8619071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8619075"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617773">as</a></span><span class="op" id="8619077">(</span><span class="ident" id="8619078"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618939">e</a></span>&nbsp;<span class="op" id="8619080">==</span>&nbsp;<span class="ident" id="8619083">nil</span><span class="op" id="8619086">,</span>&nbsp;<span class="string" id="8619088">&#34;read&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="8619104">,</span>&nbsp;<span class="ident" id="8619106"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618939">e</a></span><span class="op" id="8619107">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8619111"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8617874">eo</a></span><span class="op" id="8619113">(</span><span class="ident" id="8619114"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8619019">b2</a></span>&nbsp;<span class="op" id="8619117">!=</span>&nbsp;<span class="ident" id="8619120"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618919">bt</a></span><span class="op" id="8619122">,</span>&nbsp;<span class="string" id="8619124">&#34;expect&nbsp;0x%02x,&nbsp;got&nbsp;0x%02x&#34;</span><span class="op" id="8619151">,</span>&nbsp;<span class="ident" id="8619153"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8618919">bt</a></span><span class="op" id="8619155">,</span>&nbsp;<span class="ident" id="8619157"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#8619019">b2</a></span><span class="op" id="8619159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8619162">}</span><br>
<span class="lineno"></span><span class="op" id="8619164">}</span>
</div>
</body>
</html>
