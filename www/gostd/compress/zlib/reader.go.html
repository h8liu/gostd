<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/zlib</h2>
<ul>
<li><a href="/gostd/compress/zlib/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/compress/zlib/reader.go.html" class="current">reader.go</a></li>
<li><a href="/gostd/compress/zlib/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/zlib/writer.go.html">writer.go</a></li>
<li><a href="/gostd/compress/zlib/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6287513">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6287568">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6287622">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6287673">/*<br>
<span class="lineno"></span>Package&nbsp;zlib&nbsp;implements&nbsp;reading&nbsp;and&nbsp;writing&nbsp;of&nbsp;zlib&nbsp;format&nbsp;compressed&nbsp;data,<br>
<span class="lineno"></span>as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;1950.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>The&nbsp;implementation&nbsp;provides&nbsp;filters&nbsp;that&nbsp;uncompress&nbsp;during&nbsp;reading<br>
<span class="lineno">10</span>and&nbsp;compress&nbsp;during&nbsp;writing.&nbsp;&nbsp;For&nbsp;example,&nbsp;to&nbsp;write&nbsp;compressed&nbsp;data<br>
<span class="lineno"></span>to&nbsp;a&nbsp;buffer:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;b&nbsp;bytes.Buffer<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;w&nbsp;:=&nbsp;zlib.NewWriter(&amp;b)<br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;w.Write([]byte(&#34;hello,&nbsp;world\n&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;w.Close()<br>
<span class="lineno"></span><br>
<span class="lineno"></span>and&nbsp;to&nbsp;read&nbsp;that&nbsp;data&nbsp;back:<br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;r,&nbsp;err&nbsp;:=&nbsp;zlib.NewReader(&amp;b)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;io.Copy(os.Stdout,&nbsp;r)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;r.Close()<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="6288116">package</span>&nbsp;<span class="ident" id="6288124">zlib</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6288130">import</span>&nbsp;<span class="op" id="6288137">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6288140">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6288149">&#34;compress/flate&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6288167">&#34;errors&#34;</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6288177">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6288185">&#34;hash/adler32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6288201">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="6288206">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="6288209">const</span>&nbsp;<span class="ident" id="6288215">zlibDeflate</span>&nbsp;<span class="op" id="6288227">=</span>&nbsp;<span class="num" id="6288229">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6288232">var</span>&nbsp;<span class="op" id="6288236">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6288239">//&nbsp;ErrChecksum&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6288320">ErrChecksum</span>&nbsp;<span class="op" id="6288332">=</span>&nbsp;<span class="ident" id="6288334">errors</span><span class="op" id="6288340">.</span><span class="ident" id="6288341">New</span><span class="op" id="6288344">(</span><span class="string" id="6288345">&#34;zlib:&nbsp;invalid&nbsp;checksum&#34;</span><span class="op" id="6288369">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6288372">//&nbsp;ErrDictionary&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;dictionary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6288457">ErrDictionary</span>&nbsp;<span class="op" id="6288471">=</span>&nbsp;<span class="ident" id="6288473">errors</span><span class="op" id="6288479">.</span><span class="ident" id="6288480">New</span><span class="op" id="6288483">(</span><span class="string" id="6288484">&#34;zlib:&nbsp;invalid&nbsp;dictionary&#34;</span><span class="op" id="6288510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6288513">//&nbsp;ErrHeader&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6288590">ErrHeader</span>&nbsp;<span class="op" id="6288600">=</span>&nbsp;<span class="ident" id="6288602">errors</span><span class="op" id="6288608">.</span><span class="ident" id="6288609">New</span><span class="op" id="6288612">(</span><span class="string" id="6288613">&#34;zlib:&nbsp;invalid&nbsp;header&#34;</span><span class="op" id="6288635">)</span><br>
<span class="lineno"></span><span class="op" id="6288637">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="6288640">type</span>&nbsp;<span class="ident" id="6288645">reader</span>&nbsp;<span class="keyword" id="6288652">struct</span>&nbsp;<span class="op" id="6288659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6288662">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6288675">flate</span><span class="op" id="6288680">.</span><span class="ident" id="6288681">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6288689">decompressor</span>&nbsp;<span class="ident" id="6288702">io</span><span class="op" id="6288704">.</span><span class="ident" id="6288705">ReadCloser</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6288717">digest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6288730">hash</span><span class="op" id="6288734">.</span><span class="ident" id="6288735">Hash32</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6288743">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6288756">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6288763">scratch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6288776">[</span><span class="num" id="6288777">4</span><span class="op" id="6288778">]</span><span class="builtintype" id="6288779">byte</span><br>
<span class="lineno"></span><span class="op" id="6288784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6288787">//&nbsp;Resetter&nbsp;resets&nbsp;a&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;or&nbsp;NewReaderDict&nbsp;to</span><br>
<span class="lineno">55</span><span class="comment" id="6288861">//&nbsp;to&nbsp;switch&nbsp;to&nbsp;a&nbsp;new&nbsp;underlying&nbsp;Reader.&nbsp;This&nbsp;permits&nbsp;reusing&nbsp;a&nbsp;ReadCloser</span><br>
<span class="lineno"></span><span class="comment" id="6288936">//&nbsp;instead&nbsp;of&nbsp;allocating&nbsp;a&nbsp;new&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="6288972">type</span>&nbsp;<span class="ident" id="6288977">Resetter</span>&nbsp;<span class="keyword" id="6288986">interface</span>&nbsp;<span class="op" id="6288996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6288999">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;buffered&nbsp;data&nbsp;and&nbsp;resets&nbsp;the&nbsp;Resetter&nbsp;as&nbsp;if&nbsp;it&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6289073">//&nbsp;newly&nbsp;initialized&nbsp;with&nbsp;the&nbsp;given&nbsp;reader.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6289118">Reset</span><span class="op" id="6289123">(</span><span class="ident" id="6289124">r</span>&nbsp;<span class="ident" id="6289126">io</span><span class="op" id="6289128">.</span><span class="ident" id="6289129">Reader</span><span class="op" id="6289135">,</span>&nbsp;<span class="ident" id="6289137">dict</span>&nbsp;<span class="op" id="6289142">[</span><span class="op" id="6289143">]</span><span class="builtintype" id="6289144">byte</span><span class="op" id="6289148">)</span>&nbsp;<span class="builtintype" id="6289150">error</span><br>
<span class="lineno"></span><span class="op" id="6289156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6289159">//&nbsp;NewReader&nbsp;creates&nbsp;a&nbsp;new&nbsp;ReadCloser.</span><br>
<span class="lineno"></span><span class="comment" id="6289198">//&nbsp;Reads&nbsp;from&nbsp;the&nbsp;returned&nbsp;ReadCloser&nbsp;read&nbsp;and&nbsp;decompress&nbsp;data&nbsp;from&nbsp;r.</span><br>
<span class="lineno">65</span><span class="comment" id="6289269">//&nbsp;The&nbsp;implementation&nbsp;buffers&nbsp;input&nbsp;and&nbsp;may&nbsp;read&nbsp;more&nbsp;data&nbsp;than&nbsp;necessary&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="6289351">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;ReadCloser&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="comment" id="6289431">//</span><br>
<span class="lineno"></span><span class="comment" id="6289434">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="6289500">func</span>&nbsp;<span class="ident" id="6289505">NewReader</span><span class="op" id="6289514">(</span><span class="ident" id="6289515">r</span>&nbsp;<span class="ident" id="6289517">io</span><span class="op" id="6289519">.</span><span class="ident" id="6289520">Reader</span><span class="op" id="6289526">)</span>&nbsp;<span class="op" id="6289528">(</span><span class="ident" id="6289529">io</span><span class="op" id="6289531">.</span><span class="ident" id="6289532">ReadCloser</span><span class="op" id="6289542">,</span>&nbsp;<span class="builtintype" id="6289544">error</span><span class="op" id="6289549">)</span>&nbsp;<span class="op" id="6289551">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6289554">return</span>&nbsp;<span class="ident" id="6289561">NewReaderDict</span><span class="op" id="6289574">(</span><span class="ident" id="6289575">r</span><span class="op" id="6289576">,</span>&nbsp;<span class="ident" id="6289578">nil</span><span class="op" id="6289581">)</span><br>
<span class="lineno"></span><span class="op" id="6289583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6289586">//&nbsp;NewReaderDict&nbsp;is&nbsp;like&nbsp;NewReader&nbsp;but&nbsp;uses&nbsp;a&nbsp;preset&nbsp;dictionary.</span><br>
<span class="lineno"></span><span class="comment" id="6289651">//&nbsp;NewReaderDict&nbsp;ignores&nbsp;the&nbsp;dictionary&nbsp;if&nbsp;the&nbsp;compressed&nbsp;data&nbsp;does&nbsp;not&nbsp;refer&nbsp;to&nbsp;it.</span><br>
<span class="lineno">75</span><span class="comment" id="6289736">//&nbsp;If&nbsp;the&nbsp;compressed&nbsp;data&nbsp;refers&nbsp;to&nbsp;a&nbsp;different&nbsp;dictionary,&nbsp;NewReaderDict&nbsp;returns&nbsp;ErrDictionary.</span><br>
<span class="lineno"></span><span class="comment" id="6289833">//</span><br>
<span class="lineno"></span><span class="comment" id="6289836">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReaderDict&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="6289906">func</span>&nbsp;<span class="ident" id="6289911">NewReaderDict</span><span class="op" id="6289924">(</span><span class="ident" id="6289925">r</span>&nbsp;<span class="ident" id="6289927">io</span><span class="op" id="6289929">.</span><span class="ident" id="6289930">Reader</span><span class="op" id="6289936">,</span>&nbsp;<span class="ident" id="6289938">dict</span>&nbsp;<span class="op" id="6289943">[</span><span class="op" id="6289944">]</span><span class="builtintype" id="6289945">byte</span><span class="op" id="6289949">)</span>&nbsp;<span class="op" id="6289951">(</span><span class="ident" id="6289952">io</span><span class="op" id="6289954">.</span><span class="ident" id="6289955">ReadCloser</span><span class="op" id="6289965">,</span>&nbsp;<span class="builtintype" id="6289967">error</span><span class="op" id="6289972">)</span>&nbsp;<span class="op" id="6289974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6289977">z</span>&nbsp;<span class="op" id="6289979">:=</span>&nbsp;<span class="builtinfunc" id="6289982">new</span><span class="op" id="6289985">(</span><span class="ident" id="6289986">reader</span><span class="op" id="6289992">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6289995">err</span>&nbsp;<span class="op" id="6289999">:=</span>&nbsp;<span class="ident" id="6290002">z</span><span class="op" id="6290003">.</span><span class="ident" id="6290004">Reset</span><span class="op" id="6290009">(</span><span class="ident" id="6290010">r</span><span class="op" id="6290011">,</span>&nbsp;<span class="ident" id="6290013">dict</span><span class="op" id="6290017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290020">if</span>&nbsp;<span class="ident" id="6290023">err</span>&nbsp;<span class="op" id="6290027">!=</span>&nbsp;<span class="ident" id="6290030">nil</span>&nbsp;<span class="op" id="6290034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290038">return</span>&nbsp;<span class="ident" id="6290045">nil</span><span class="op" id="6290048">,</span>&nbsp;<span class="ident" id="6290050">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6290055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290058">return</span>&nbsp;<span class="ident" id="6290065">z</span><span class="op" id="6290066">,</span>&nbsp;<span class="ident" id="6290068">nil</span><br>
<span class="lineno">85</span><span class="op" id="6290072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6290075">func</span>&nbsp;<span class="op" id="6290080">(</span><span class="ident" id="6290081">z</span>&nbsp;<span class="op" id="6290083">*</span><span class="ident" id="6290084">reader</span><span class="op" id="6290090">)</span>&nbsp;<span class="ident" id="6290092">Read</span><span class="op" id="6290096">(</span><span class="ident" id="6290097">p</span>&nbsp;<span class="op" id="6290099">[</span><span class="op" id="6290100">]</span><span class="builtintype" id="6290101">byte</span><span class="op" id="6290105">)</span>&nbsp;<span class="op" id="6290107">(</span><span class="ident" id="6290108">n</span>&nbsp;<span class="builtintype" id="6290110">int</span><span class="op" id="6290113">,</span>&nbsp;<span class="ident" id="6290115">err</span>&nbsp;<span class="builtintype" id="6290119">error</span><span class="op" id="6290124">)</span>&nbsp;<span class="op" id="6290126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290129">if</span>&nbsp;<span class="ident" id="6290132">z</span><span class="op" id="6290133">.</span><span class="ident" id="6290134">err</span>&nbsp;<span class="op" id="6290138">!=</span>&nbsp;<span class="ident" id="6290141">nil</span>&nbsp;<span class="op" id="6290145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290149">return</span>&nbsp;<span class="num" id="6290156">0</span><span class="op" id="6290157">,</span>&nbsp;<span class="ident" id="6290159">z</span><span class="op" id="6290160">.</span><span class="ident" id="6290161">err</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6290166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290169">if</span>&nbsp;<span class="builtinfunc" id="6290172">len</span><span class="op" id="6290175">(</span><span class="ident" id="6290176">p</span><span class="op" id="6290177">)</span>&nbsp;<span class="op" id="6290179">==</span>&nbsp;<span class="num" id="6290182">0</span>&nbsp;<span class="op" id="6290184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290188">return</span>&nbsp;<span class="num" id="6290195">0</span><span class="op" id="6290196">,</span>&nbsp;<span class="ident" id="6290198">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6290203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6290207">n</span><span class="op" id="6290208">,</span>&nbsp;<span class="ident" id="6290210">err</span>&nbsp;<span class="op" id="6290214">=</span>&nbsp;<span class="ident" id="6290216">z</span><span class="op" id="6290217">.</span><span class="ident" id="6290218">decompressor</span><span class="op" id="6290230">.</span><span class="ident" id="6290231">Read</span><span class="op" id="6290235">(</span><span class="ident" id="6290236">p</span><span class="op" id="6290237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6290240">z</span><span class="op" id="6290241">.</span><span class="ident" id="6290242">digest</span><span class="op" id="6290248">.</span><span class="ident" id="6290249">Write</span><span class="op" id="6290254">(</span><span class="ident" id="6290255">p</span><span class="op" id="6290256">[</span><span class="num" id="6290257">0</span><span class="op" id="6290258">:</span><span class="ident" id="6290259">n</span><span class="op" id="6290260">]</span><span class="op" id="6290261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290264">if</span>&nbsp;<span class="ident" id="6290267">n</span>&nbsp;<span class="op" id="6290269">!=</span>&nbsp;<span class="num" id="6290272">0</span>&nbsp;<span class="op" id="6290274">||</span>&nbsp;<span class="ident" id="6290277">err</span>&nbsp;<span class="op" id="6290281">!=</span>&nbsp;<span class="ident" id="6290284">io</span><span class="op" id="6290286">.</span><span class="ident" id="6290287">EOF</span>&nbsp;<span class="op" id="6290291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6290295">z</span><span class="op" id="6290296">.</span><span class="ident" id="6290297">err</span>&nbsp;<span class="op" id="6290301">=</span>&nbsp;<span class="ident" id="6290303">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290309">return</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6290317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6290321">//&nbsp;Finished&nbsp;file;&nbsp;check&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290356">if</span>&nbsp;<span class="ident" id="6290359">_</span><span class="op" id="6290360">,</span>&nbsp;<span class="ident" id="6290362">err</span>&nbsp;<span class="op" id="6290366">:=</span>&nbsp;<span class="ident" id="6290369">io</span><span class="op" id="6290371">.</span><span class="ident" id="6290372">ReadFull</span><span class="op" id="6290380">(</span><span class="ident" id="6290381">z</span><span class="op" id="6290382">.</span><span class="ident" id="6290383">r</span><span class="op" id="6290384">,</span>&nbsp;<span class="ident" id="6290386">z</span><span class="op" id="6290387">.</span><span class="ident" id="6290388">scratch</span><span class="op" id="6290395">[</span><span class="num" id="6290396">0</span><span class="op" id="6290397">:</span><span class="num" id="6290398">4</span><span class="op" id="6290399">]</span><span class="op" id="6290400">)</span><span class="op" id="6290401">;</span>&nbsp;<span class="ident" id="6290403">err</span>&nbsp;<span class="op" id="6290407">!=</span>&nbsp;<span class="ident" id="6290410">nil</span>&nbsp;<span class="op" id="6290414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6290418">z</span><span class="op" id="6290419">.</span><span class="ident" id="6290420">err</span>&nbsp;<span class="op" id="6290424">=</span>&nbsp;<span class="ident" id="6290426">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290432">return</span>&nbsp;<span class="num" id="6290439">0</span><span class="op" id="6290440">,</span>&nbsp;<span class="ident" id="6290442">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6290447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6290450">//&nbsp;ZLIB&nbsp;(RFC&nbsp;1950)&nbsp;is&nbsp;big-endian,&nbsp;unlike&nbsp;GZIP&nbsp;(RFC&nbsp;1952).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6290509">checksum</span>&nbsp;<span class="op" id="6290518">:=</span>&nbsp;<span class="builtintype" id="6290521">uint32</span><span class="op" id="6290527">(</span><span class="ident" id="6290528">z</span><span class="op" id="6290529">.</span><span class="ident" id="6290530">scratch</span><span class="op" id="6290537">[</span><span class="num" id="6290538">0</span><span class="op" id="6290539">]</span><span class="op" id="6290540">)</span><span class="op" id="6290541">&lt;&lt;</span><span class="num" id="6290543">24</span>&nbsp;<span class="op" id="6290546">|</span>&nbsp;<span class="builtintype" id="6290548">uint32</span><span class="op" id="6290554">(</span><span class="ident" id="6290555">z</span><span class="op" id="6290556">.</span><span class="ident" id="6290557">scratch</span><span class="op" id="6290564">[</span><span class="num" id="6290565">1</span><span class="op" id="6290566">]</span><span class="op" id="6290567">)</span><span class="op" id="6290568">&lt;&lt;</span><span class="num" id="6290570">16</span>&nbsp;<span class="op" id="6290573">|</span>&nbsp;<span class="builtintype" id="6290575">uint32</span><span class="op" id="6290581">(</span><span class="ident" id="6290582">z</span><span class="op" id="6290583">.</span><span class="ident" id="6290584">scratch</span><span class="op" id="6290591">[</span><span class="num" id="6290592">2</span><span class="op" id="6290593">]</span><span class="op" id="6290594">)</span><span class="op" id="6290595">&lt;&lt;</span><span class="num" id="6290597">8</span>&nbsp;<span class="op" id="6290599">|</span>&nbsp;<span class="builtintype" id="6290601">uint32</span><span class="op" id="6290607">(</span><span class="ident" id="6290608">z</span><span class="op" id="6290609">.</span><span class="ident" id="6290610">scratch</span><span class="op" id="6290617">[</span><span class="num" id="6290618">3</span><span class="op" id="6290619">]</span><span class="op" id="6290620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290623">if</span>&nbsp;<span class="ident" id="6290626">checksum</span>&nbsp;<span class="op" id="6290635">!=</span>&nbsp;<span class="ident" id="6290638">z</span><span class="op" id="6290639">.</span><span class="ident" id="6290640">digest</span><span class="op" id="6290646">.</span><span class="ident" id="6290647">Sum32</span><span class="op" id="6290652">(</span><span class="op" id="6290653">)</span>&nbsp;<span class="op" id="6290655">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6290659">z</span><span class="op" id="6290660">.</span><span class="ident" id="6290661">err</span>&nbsp;<span class="op" id="6290665">=</span>&nbsp;<span class="ident" id="6290667">ErrChecksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290681">return</span>&nbsp;<span class="num" id="6290688">0</span><span class="op" id="6290689">,</span>&nbsp;<span class="ident" id="6290691">z</span><span class="op" id="6290692">.</span><span class="ident" id="6290693">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6290698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290701">return</span><br>
<span class="lineno"></span><span class="op" id="6290708">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="6290711">//&nbsp;Calling&nbsp;Close&nbsp;does&nbsp;not&nbsp;close&nbsp;the&nbsp;wrapped&nbsp;io.Reader&nbsp;originally&nbsp;passed&nbsp;to&nbsp;NewReader.</span><br>
<span class="lineno"></span><span class="keyword" id="6290797">func</span>&nbsp;<span class="op" id="6290802">(</span><span class="ident" id="6290803">z</span>&nbsp;<span class="op" id="6290805">*</span><span class="ident" id="6290806">reader</span><span class="op" id="6290812">)</span>&nbsp;<span class="ident" id="6290814">Close</span><span class="op" id="6290819">(</span><span class="op" id="6290820">)</span>&nbsp;<span class="builtintype" id="6290822">error</span>&nbsp;<span class="op" id="6290828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290831">if</span>&nbsp;<span class="ident" id="6290834">z</span><span class="op" id="6290835">.</span><span class="ident" id="6290836">err</span>&nbsp;<span class="op" id="6290840">!=</span>&nbsp;<span class="ident" id="6290843">nil</span>&nbsp;<span class="op" id="6290847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290851">return</span>&nbsp;<span class="ident" id="6290858">z</span><span class="op" id="6290859">.</span><span class="ident" id="6290860">err</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6290865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6290868">z</span><span class="op" id="6290869">.</span><span class="ident" id="6290870">err</span>&nbsp;<span class="op" id="6290874">=</span>&nbsp;<span class="ident" id="6290876">z</span><span class="op" id="6290877">.</span><span class="ident" id="6290878">decompressor</span><span class="op" id="6290890">.</span><span class="ident" id="6290891">Close</span><span class="op" id="6290896">(</span><span class="op" id="6290897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290900">return</span>&nbsp;<span class="ident" id="6290907">z</span><span class="op" id="6290908">.</span><span class="ident" id="6290909">err</span><br>
<span class="lineno"></span><span class="op" id="6290913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="6290916">func</span>&nbsp;<span class="op" id="6290921">(</span><span class="ident" id="6290922">z</span>&nbsp;<span class="op" id="6290924">*</span><span class="ident" id="6290925">reader</span><span class="op" id="6290931">)</span>&nbsp;<span class="ident" id="6290933">Reset</span><span class="op" id="6290938">(</span><span class="ident" id="6290939">r</span>&nbsp;<span class="ident" id="6290941">io</span><span class="op" id="6290943">.</span><span class="ident" id="6290944">Reader</span><span class="op" id="6290950">,</span>&nbsp;<span class="ident" id="6290952">dict</span>&nbsp;<span class="op" id="6290957">[</span><span class="op" id="6290958">]</span><span class="builtintype" id="6290959">byte</span><span class="op" id="6290963">)</span>&nbsp;<span class="builtintype" id="6290965">error</span>&nbsp;<span class="op" id="6290971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6290974">if</span>&nbsp;<span class="ident" id="6290977">fr</span><span class="op" id="6290979">,</span>&nbsp;<span class="ident" id="6290981">ok</span>&nbsp;<span class="op" id="6290984">:=</span>&nbsp;<span class="ident" id="6290987">r</span><span class="op" id="6290988">.</span><span class="op" id="6290989">(</span><span class="ident" id="6290990">flate</span><span class="op" id="6290995">.</span><span class="ident" id="6290996">Reader</span><span class="op" id="6291002">)</span><span class="op" id="6291003">;</span>&nbsp;<span class="ident" id="6291005">ok</span>&nbsp;<span class="op" id="6291008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6291012">z</span><span class="op" id="6291013">.</span><span class="ident" id="6291014">r</span>&nbsp;<span class="op" id="6291016">=</span>&nbsp;<span class="ident" id="6291018">fr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6291022">}</span>&nbsp;<span class="keyword" id="6291024">else</span>&nbsp;<span class="op" id="6291029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6291033">z</span><span class="op" id="6291034">.</span><span class="ident" id="6291035">r</span>&nbsp;<span class="op" id="6291037">=</span>&nbsp;<span class="ident" id="6291039">bufio</span><span class="op" id="6291044">.</span><span class="ident" id="6291045">NewReader</span><span class="op" id="6291054">(</span><span class="ident" id="6291055">r</span><span class="op" id="6291056">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6291059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6291062">_</span><span class="op" id="6291063">,</span>&nbsp;<span class="ident" id="6291065">err</span>&nbsp;<span class="op" id="6291069">:=</span>&nbsp;<span class="ident" id="6291072">io</span><span class="op" id="6291074">.</span><span class="ident" id="6291075">ReadFull</span><span class="op" id="6291083">(</span><span class="ident" id="6291084">z</span><span class="op" id="6291085">.</span><span class="ident" id="6291086">r</span><span class="op" id="6291087">,</span>&nbsp;<span class="ident" id="6291089">z</span><span class="op" id="6291090">.</span><span class="ident" id="6291091">scratch</span><span class="op" id="6291098">[</span><span class="num" id="6291099">0</span><span class="op" id="6291100">:</span><span class="num" id="6291101">2</span><span class="op" id="6291102">]</span><span class="op" id="6291103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6291106">if</span>&nbsp;<span class="ident" id="6291109">err</span>&nbsp;<span class="op" id="6291113">!=</span>&nbsp;<span class="ident" id="6291116">nil</span>&nbsp;<span class="op" id="6291120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6291124">return</span>&nbsp;<span class="ident" id="6291131">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6291136">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6291139">h</span>&nbsp;<span class="op" id="6291141">:=</span>&nbsp;<span class="builtintype" id="6291144">uint</span><span class="op" id="6291148">(</span><span class="ident" id="6291149">z</span><span class="op" id="6291150">.</span><span class="ident" id="6291151">scratch</span><span class="op" id="6291158">[</span><span class="num" id="6291159">0</span><span class="op" id="6291160">]</span><span class="op" id="6291161">)</span><span class="op" id="6291162">&lt;&lt;</span><span class="num" id="6291164">8</span>&nbsp;<span class="op" id="6291166">|</span>&nbsp;<span class="builtintype" id="6291168">uint</span><span class="op" id="6291172">(</span><span class="ident" id="6291173">z</span><span class="op" id="6291174">.</span><span class="ident" id="6291175">scratch</span><span class="op" id="6291182">[</span><span class="num" id="6291183">1</span><span class="op" id="6291184">]</span><span class="op" id="6291185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6291188">if</span>&nbsp;<span class="op" id="6291191">(</span><span class="ident" id="6291192">z</span><span class="op" id="6291193">.</span><span class="ident" id="6291194">scratch</span><span class="op" id="6291201">[</span><span class="num" id="6291202">0</span><span class="op" id="6291203">]</span><span class="op" id="6291204">&amp;</span><span class="num" id="6291205">0x0f</span>&nbsp;<span class="op" id="6291210">!=</span>&nbsp;<span class="ident" id="6291213">zlibDeflate</span><span class="op" id="6291224">)</span>&nbsp;<span class="op" id="6291226">||</span>&nbsp;<span class="op" id="6291229">(</span><span class="ident" id="6291230">h</span><span class="op" id="6291231">%</span><span class="num" id="6291232">31</span>&nbsp;<span class="op" id="6291235">!=</span>&nbsp;<span class="num" id="6291238">0</span><span class="op" id="6291239">)</span>&nbsp;<span class="op" id="6291241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6291245">return</span>&nbsp;<span class="ident" id="6291252">ErrHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6291263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6291266">haveDict</span>&nbsp;<span class="op" id="6291275">:=</span>&nbsp;<span class="ident" id="6291278">z</span><span class="op" id="6291279">.</span><span class="ident" id="6291280">scratch</span><span class="op" id="6291287">[</span><span class="num" id="6291288">1</span><span class="op" id="6291289">]</span><span class="op" id="6291290">&amp;</span><span class="num" id="6291291">0x20</span>&nbsp;<span class="op" id="6291296">!=</span>&nbsp;<span class="num" id="6291299">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6291302">if</span>&nbsp;<span class="ident" id="6291305">haveDict</span>&nbsp;<span class="op" id="6291314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6291318">_</span><span class="op" id="6291319">,</span>&nbsp;<span class="ident" id="6291321">err</span>&nbsp;<span class="op" id="6291325">=</span>&nbsp;<span class="ident" id="6291327">io</span><span class="op" id="6291329">.</span><span class="ident" id="6291330">ReadFull</span><span class="op" id="6291338">(</span><span class="ident" id="6291339">z</span><span class="op" id="6291340">.</span><span class="ident" id="6291341">r</span><span class="op" id="6291342">,</span>&nbsp;<span class="ident" id="6291344">z</span><span class="op" id="6291345">.</span><span class="ident" id="6291346">scratch</span><span class="op" id="6291353">[</span><span class="num" id="6291354">0</span><span class="op" id="6291355">:</span><span class="num" id="6291356">4</span><span class="op" id="6291357">]</span><span class="op" id="6291358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6291362">if</span>&nbsp;<span class="ident" id="6291365">err</span>&nbsp;<span class="op" id="6291369">!=</span>&nbsp;<span class="ident" id="6291372">nil</span>&nbsp;<span class="op" id="6291376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6291381">return</span>&nbsp;<span class="ident" id="6291388">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6291394">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6291398">checksum</span>&nbsp;<span class="op" id="6291407">:=</span>&nbsp;<span class="builtintype" id="6291410">uint32</span><span class="op" id="6291416">(</span><span class="ident" id="6291417">z</span><span class="op" id="6291418">.</span><span class="ident" id="6291419">scratch</span><span class="op" id="6291426">[</span><span class="num" id="6291427">0</span><span class="op" id="6291428">]</span><span class="op" id="6291429">)</span><span class="op" id="6291430">&lt;&lt;</span><span class="num" id="6291432">24</span>&nbsp;<span class="op" id="6291435">|</span>&nbsp;<span class="builtintype" id="6291437">uint32</span><span class="op" id="6291443">(</span><span class="ident" id="6291444">z</span><span class="op" id="6291445">.</span><span class="ident" id="6291446">scratch</span><span class="op" id="6291453">[</span><span class="num" id="6291454">1</span><span class="op" id="6291455">]</span><span class="op" id="6291456">)</span><span class="op" id="6291457">&lt;&lt;</span><span class="num" id="6291459">16</span>&nbsp;<span class="op" id="6291462">|</span>&nbsp;<span class="builtintype" id="6291464">uint32</span><span class="op" id="6291470">(</span><span class="ident" id="6291471">z</span><span class="op" id="6291472">.</span><span class="ident" id="6291473">scratch</span><span class="op" id="6291480">[</span><span class="num" id="6291481">2</span><span class="op" id="6291482">]</span><span class="op" id="6291483">)</span><span class="op" id="6291484">&lt;&lt;</span><span class="num" id="6291486">8</span>&nbsp;<span class="op" id="6291488">|</span>&nbsp;<span class="builtintype" id="6291490">uint32</span><span class="op" id="6291496">(</span><span class="ident" id="6291497">z</span><span class="op" id="6291498">.</span><span class="ident" id="6291499">scratch</span><span class="op" id="6291506">[</span><span class="num" id="6291507">3</span><span class="op" id="6291508">]</span><span class="op" id="6291509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6291513">if</span>&nbsp;<span class="ident" id="6291516">checksum</span>&nbsp;<span class="op" id="6291525">!=</span>&nbsp;<span class="ident" id="6291528">adler32</span><span class="op" id="6291535">.</span><span class="ident" id="6291536">Checksum</span><span class="op" id="6291544">(</span><span class="ident" id="6291545">dict</span><span class="op" id="6291549">)</span>&nbsp;<span class="op" id="6291551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6291556">return</span>&nbsp;<span class="ident" id="6291563">ErrDictionary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6291579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6291582">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6291585">if</span>&nbsp;<span class="ident" id="6291588">z</span><span class="op" id="6291589">.</span><span class="ident" id="6291590">decompressor</span>&nbsp;<span class="op" id="6291603">==</span>&nbsp;<span class="ident" id="6291606">nil</span>&nbsp;<span class="op" id="6291610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6291614">if</span>&nbsp;<span class="ident" id="6291617">haveDict</span>&nbsp;<span class="op" id="6291626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6291631">z</span><span class="op" id="6291632">.</span><span class="ident" id="6291633">decompressor</span>&nbsp;<span class="op" id="6291646">=</span>&nbsp;<span class="ident" id="6291648">flate</span><span class="op" id="6291653">.</span><span class="ident" id="6291654">NewReaderDict</span><span class="op" id="6291667">(</span><span class="ident" id="6291668">z</span><span class="op" id="6291669">.</span><span class="ident" id="6291670">r</span><span class="op" id="6291671">,</span>&nbsp;<span class="ident" id="6291673">dict</span><span class="op" id="6291677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6291681">}</span>&nbsp;<span class="keyword" id="6291683">else</span>&nbsp;<span class="op" id="6291688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6291693">z</span><span class="op" id="6291694">.</span><span class="ident" id="6291695">decompressor</span>&nbsp;<span class="op" id="6291708">=</span>&nbsp;<span class="ident" id="6291710">flate</span><span class="op" id="6291715">.</span><span class="ident" id="6291716">NewReader</span><span class="op" id="6291725">(</span><span class="ident" id="6291726">z</span><span class="op" id="6291727">.</span><span class="ident" id="6291728">r</span><span class="op" id="6291729">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6291733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6291736">}</span>&nbsp;<span class="keyword" id="6291738">else</span>&nbsp;<span class="op" id="6291743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6291747">z</span><span class="op" id="6291748">.</span><span class="ident" id="6291749">decompressor</span><span class="op" id="6291761">.</span><span class="op" id="6291762">(</span><span class="ident" id="6291763">flate</span><span class="op" id="6291768">.</span><span class="ident" id="6291769">Resetter</span><span class="op" id="6291777">)</span><span class="op" id="6291778">.</span><span class="ident" id="6291779">Reset</span><span class="op" id="6291784">(</span><span class="ident" id="6291785">z</span><span class="op" id="6291786">.</span><span class="ident" id="6291787">r</span><span class="op" id="6291788">,</span>&nbsp;<span class="ident" id="6291790">dict</span><span class="op" id="6291794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6291797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6291800">z</span><span class="op" id="6291801">.</span><span class="ident" id="6291802">digest</span>&nbsp;<span class="op" id="6291809">=</span>&nbsp;<span class="ident" id="6291811">adler32</span><span class="op" id="6291818">.</span><span class="ident" id="6291819">New</span><span class="op" id="6291822">(</span><span class="op" id="6291823">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6291826">return</span>&nbsp;<span class="ident" id="6291833">nil</span><br>
<span class="lineno"></span><span class="op" id="6291837">}</span>
</div>
</body>
</html>
