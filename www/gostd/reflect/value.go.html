<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2715344">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2715399">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2715453">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2715504">package</span>&nbsp;<span class="ident" id="2715512">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2715521">import</span>&nbsp;<span class="op" id="2715528">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2715531">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2715539">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2715550">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="2715559">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2715562">const</span>&nbsp;<span class="ident" id="2715568">ptrSize</span>&nbsp;<span class="op" id="2715576">=</span>&nbsp;<span class="ident" id="2715578">unsafe</span><span class="op" id="2715584">.</span><span class="ident" id="2715585">Sizeof</span><span class="op" id="2715591">(</span><span class="op" id="2715592">(</span><span class="op" id="2715593">*</span><span class="builtintype" id="2715594">byte</span><span class="op" id="2715598">)</span><span class="op" id="2715599">(</span><span class="ident" id="2715600">nil</span><span class="op" id="2715603">)</span><span class="op" id="2715604">)</span><br>
<span class="lineno"></span><span class="keyword" id="2715606">const</span>&nbsp;<span class="ident" id="2715612">cannotSet</span>&nbsp;<span class="op" id="2715622">=</span>&nbsp;<span class="string" id="2715624">&#34;cannot&nbsp;set&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;struct&nbsp;field&#34;</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2715682">//&nbsp;Value&nbsp;is&nbsp;the&nbsp;reflection&nbsp;interface&nbsp;to&nbsp;a&nbsp;Go&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2715734">//</span><br>
<span class="lineno"></span><span class="comment" id="2715737">//&nbsp;Not&nbsp;all&nbsp;methods&nbsp;apply&nbsp;to&nbsp;all&nbsp;kinds&nbsp;of&nbsp;values.&nbsp;&nbsp;Restrictions,</span><br>
<span class="lineno"></span><span class="comment" id="2715801">//&nbsp;if&nbsp;any,&nbsp;are&nbsp;noted&nbsp;in&nbsp;the&nbsp;documentation&nbsp;for&nbsp;each&nbsp;method.</span><br>
<span class="lineno">20</span><span class="comment" id="2715860">//&nbsp;Use&nbsp;the&nbsp;Kind&nbsp;method&nbsp;to&nbsp;find&nbsp;out&nbsp;the&nbsp;kind&nbsp;of&nbsp;value&nbsp;before</span><br>
<span class="lineno"></span><span class="comment" id="2715920">//&nbsp;calling&nbsp;kind-specific&nbsp;methods.&nbsp;&nbsp;Calling&nbsp;a&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2715972">//&nbsp;inappropriate&nbsp;to&nbsp;the&nbsp;kind&nbsp;of&nbsp;type&nbsp;causes&nbsp;a&nbsp;run&nbsp;time&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2716034">//</span><br>
<span class="lineno"></span><span class="comment" id="2716037">//&nbsp;The&nbsp;zero&nbsp;Value&nbsp;represents&nbsp;no&nbsp;value.</span><br>
<span class="lineno">25</span><span class="comment" id="2716076">//&nbsp;Its&nbsp;IsValid&nbsp;method&nbsp;returns&nbsp;false,&nbsp;its&nbsp;Kind&nbsp;method&nbsp;returns&nbsp;Invalid,</span><br>
<span class="lineno"></span><span class="comment" id="2716146">//&nbsp;its&nbsp;String&nbsp;method&nbsp;returns&nbsp;&#34;&lt;invalid&nbsp;Value&gt;&#34;,&nbsp;and&nbsp;all&nbsp;other&nbsp;methods&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2716223">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2716284">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2716352">//</span><br>
<span class="lineno">30</span><span class="comment" id="2716355">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;by&nbsp;multiple&nbsp;goroutines&nbsp;provided&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2716428">//&nbsp;the&nbsp;underlying&nbsp;Go&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;for&nbsp;the&nbsp;equivalent</span><br>
<span class="lineno"></span><span class="comment" id="2716499">//&nbsp;direct&nbsp;operations.</span><br>
<span class="lineno"></span><span class="keyword" id="2716521">type</span>&nbsp;<span class="ident" id="2716526">Value</span>&nbsp;<span class="keyword" id="2716532">struct</span>&nbsp;<span class="op" id="2716539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2716542">//&nbsp;typ&nbsp;holds&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;value&nbsp;represented&nbsp;by&nbsp;a&nbsp;Value.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2716602">typ</span>&nbsp;<span class="op" id="2716606">*</span><span class="ident" id="2716607">rtype</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2716615">//&nbsp;Pointer-valued&nbsp;data&nbsp;or,&nbsp;if&nbsp;flagIndir&nbsp;is&nbsp;set,&nbsp;pointer&nbsp;to&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2716681">//&nbsp;Valid&nbsp;when&nbsp;either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;or&nbsp;typ.pointers()&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2716747">ptr</span>&nbsp;<span class="ident" id="2716751">unsafe</span><span class="op" id="2716757">.</span><span class="ident" id="2716758">Pointer</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2716768">//&nbsp;flag&nbsp;holds&nbsp;metadata&nbsp;about&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2716809">//&nbsp;The&nbsp;lowest&nbsp;bits&nbsp;are&nbsp;flag&nbsp;bits:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2716844">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagRO:&nbsp;obtained&nbsp;via&nbsp;unexported&nbsp;field,&nbsp;so&nbsp;read-only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2716902">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagIndir:&nbsp;val&nbsp;holds&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;data</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2716951">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagAddr:&nbsp;v.CanAddr&nbsp;is&nbsp;true&nbsp;(implies&nbsp;flagIndir)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2717005">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagMethod:&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2717044">//&nbsp;The&nbsp;next&nbsp;five&nbsp;bits&nbsp;give&nbsp;the&nbsp;Kind&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2717095">//&nbsp;This&nbsp;repeats&nbsp;typ.Kind()&nbsp;except&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2717149">//&nbsp;The&nbsp;remaining&nbsp;23+&nbsp;bits&nbsp;give&nbsp;a&nbsp;method&nbsp;number&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2717216">//&nbsp;If&nbsp;flag.kind()&nbsp;!=&nbsp;Func,&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagMethod&nbsp;is&nbsp;unset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2717286">//&nbsp;If&nbsp;ifaceIndir(typ),&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagIndir&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2717349">flag</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2717356">//&nbsp;A&nbsp;method&nbsp;value&nbsp;represents&nbsp;a&nbsp;curried&nbsp;method&nbsp;invocation</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2717414">//&nbsp;like&nbsp;r.Read&nbsp;for&nbsp;some&nbsp;receiver&nbsp;r.&nbsp;&nbsp;The&nbsp;typ+val+flag&nbsp;bits&nbsp;describe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2717483">//&nbsp;the&nbsp;receiver&nbsp;r,&nbsp;but&nbsp;the&nbsp;flag&#39;s&nbsp;Kind&nbsp;bits&nbsp;say&nbsp;Func&nbsp;(methods&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2717550">//&nbsp;functions),&nbsp;and&nbsp;the&nbsp;top&nbsp;bits&nbsp;of&nbsp;the&nbsp;flag&nbsp;give&nbsp;the&nbsp;method&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2717618">//&nbsp;in&nbsp;r&#39;s&nbsp;type&#39;s&nbsp;method&nbsp;table.</span><br>
<span class="lineno"></span><span class="op" id="2717649">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2717652">type</span>&nbsp;<span class="ident" id="2717657">flag</span>&nbsp;<span class="builtintype" id="2717662">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2717671">const</span>&nbsp;<span class="op" id="2717677">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2717680">flagKindWidth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2717701">=</span>&nbsp;<span class="num" id="2717703">5</span>&nbsp;<span class="comment" id="2717705">//&nbsp;there&nbsp;are&nbsp;27&nbsp;kinds</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2717728">flagKindMask</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2717744">flag</span>&nbsp;<span class="op" id="2717749">=</span>&nbsp;<span class="num" id="2717751">1</span><span class="op" id="2717752">&lt;&lt;</span><span class="ident" id="2717754">flagKindWidth</span>&nbsp;<span class="op" id="2717768">-</span>&nbsp;<span class="num" id="2717770">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2717773">flagRO</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2717789">flag</span>&nbsp;<span class="op" id="2717794">=</span>&nbsp;<span class="num" id="2717796">1</span>&nbsp;<span class="op" id="2717798">&lt;&lt;</span>&nbsp;<span class="num" id="2717801">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2717804">flagIndir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2717820">flag</span>&nbsp;<span class="op" id="2717825">=</span>&nbsp;<span class="num" id="2717827">1</span>&nbsp;<span class="op" id="2717829">&lt;&lt;</span>&nbsp;<span class="num" id="2717832">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2717835">flagAddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2717851">flag</span>&nbsp;<span class="op" id="2717856">=</span>&nbsp;<span class="num" id="2717858">1</span>&nbsp;<span class="op" id="2717860">&lt;&lt;</span>&nbsp;<span class="num" id="2717863">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2717866">flagMethod</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2717882">flag</span>&nbsp;<span class="op" id="2717887">=</span>&nbsp;<span class="num" id="2717889">1</span>&nbsp;<span class="op" id="2717891">&lt;&lt;</span>&nbsp;<span class="num" id="2717894">8</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2717897">flagMethodShift</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2717918">=</span>&nbsp;<span class="num" id="2717920">9</span><br>
<span class="lineno"></span><span class="op" id="2717922">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2717925">func</span>&nbsp;<span class="op" id="2717930">(</span><span class="ident" id="2717931">f</span>&nbsp;<span class="ident" id="2717933">flag</span><span class="op" id="2717937">)</span>&nbsp;<span class="ident" id="2717939">kind</span><span class="op" id="2717943">(</span><span class="op" id="2717944">)</span>&nbsp;<span class="ident" id="2717946">Kind</span>&nbsp;<span class="op" id="2717951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2717954">return</span>&nbsp;<span class="ident" id="2717961">Kind</span><span class="op" id="2717965">(</span><span class="ident" id="2717966">f</span>&nbsp;<span class="op" id="2717968">&amp;</span>&nbsp;<span class="ident" id="2717970">flagKindMask</span><span class="op" id="2717982">)</span><br>
<span class="lineno">75</span><span class="op" id="2717984">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2717987">//&nbsp;pointer&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;pointer&nbsp;represented&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2718047">//&nbsp;v.Kind()&nbsp;must&nbsp;be&nbsp;Ptr,&nbsp;Map,&nbsp;Chan,&nbsp;Func,&nbsp;or&nbsp;UnsafePointer</span><br>
<span class="lineno"></span><span class="keyword" id="2718106">func</span>&nbsp;<span class="op" id="2718111">(</span><span class="ident" id="2718112">v</span>&nbsp;<span class="ident" id="2718114">Value</span><span class="op" id="2718119">)</span>&nbsp;<span class="ident" id="2718121">pointer</span><span class="op" id="2718128">(</span><span class="op" id="2718129">)</span>&nbsp;<span class="ident" id="2718131">unsafe</span><span class="op" id="2718137">.</span><span class="ident" id="2718138">Pointer</span>&nbsp;<span class="op" id="2718146">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718149">if</span>&nbsp;<span class="ident" id="2718152">v</span><span class="op" id="2718153">.</span><span class="ident" id="2718154">typ</span><span class="op" id="2718157">.</span><span class="ident" id="2718158">size</span>&nbsp;<span class="op" id="2718163">!=</span>&nbsp;<span class="ident" id="2718166">ptrSize</span>&nbsp;<span class="op" id="2718174">||</span>&nbsp;<span class="op" id="2718177">!</span><span class="ident" id="2718178">v</span><span class="op" id="2718179">.</span><span class="ident" id="2718180">typ</span><span class="op" id="2718183">.</span><span class="ident" id="2718184">pointers</span><span class="op" id="2718192">(</span><span class="op" id="2718193">)</span>&nbsp;<span class="op" id="2718195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2718199">panic</span><span class="op" id="2718204">(</span><span class="string" id="2718205">&#34;can&#39;t&nbsp;call&nbsp;pointer&nbsp;on&nbsp;a&nbsp;non-pointer&nbsp;Value&#34;</span><span class="op" id="2718248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2718251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718254">if</span>&nbsp;<span class="ident" id="2718257">v</span><span class="op" id="2718258">.</span><span class="ident" id="2718259">flag</span><span class="op" id="2718263">&amp;</span><span class="ident" id="2718264">flagIndir</span>&nbsp;<span class="op" id="2718274">!=</span>&nbsp;<span class="num" id="2718277">0</span>&nbsp;<span class="op" id="2718279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718283">return</span>&nbsp;<span class="op" id="2718290">*</span><span class="op" id="2718291">(</span><span class="op" id="2718292">*</span><span class="ident" id="2718293">unsafe</span><span class="op" id="2718299">.</span><span class="ident" id="2718300">Pointer</span><span class="op" id="2718307">)</span><span class="op" id="2718308">(</span><span class="ident" id="2718309">v</span><span class="op" id="2718310">.</span><span class="ident" id="2718311">ptr</span><span class="op" id="2718314">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2718317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718320">return</span>&nbsp;<span class="ident" id="2718327">v</span><span class="op" id="2718328">.</span><span class="ident" id="2718329">ptr</span><br>
<span class="lineno"></span><span class="op" id="2718333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2718336">//&nbsp;packEface&nbsp;converts&nbsp;v&nbsp;to&nbsp;the&nbsp;empty&nbsp;interface.</span><br>
<span class="lineno">90</span><span class="keyword" id="2718384">func</span>&nbsp;<span class="ident" id="2718389">packEface</span><span class="op" id="2718398">(</span><span class="ident" id="2718399">v</span>&nbsp;<span class="ident" id="2718401">Value</span><span class="op" id="2718406">)</span>&nbsp;<span class="keyword" id="2718408">interface</span><span class="op" id="2718417">{</span><span class="op" id="2718418">}</span>&nbsp;<span class="op" id="2718420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2718423">t</span>&nbsp;<span class="op" id="2718425">:=</span>&nbsp;<span class="ident" id="2718428">v</span><span class="op" id="2718429">.</span><span class="ident" id="2718430">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718435">var</span>&nbsp;<span class="ident" id="2718439">i</span>&nbsp;<span class="keyword" id="2718441">interface</span><span class="op" id="2718450">{</span><span class="op" id="2718451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2718454">e</span>&nbsp;<span class="op" id="2718456">:=</span>&nbsp;<span class="op" id="2718459">(</span><span class="op" id="2718460">*</span><span class="ident" id="2718461">emptyInterface</span><span class="op" id="2718475">)</span><span class="op" id="2718476">(</span><span class="ident" id="2718477">unsafe</span><span class="op" id="2718483">.</span><span class="ident" id="2718484">Pointer</span><span class="op" id="2718491">(</span><span class="op" id="2718492">&amp;</span><span class="ident" id="2718493">i</span><span class="op" id="2718494">)</span><span class="op" id="2718495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718498">//&nbsp;First,&nbsp;fill&nbsp;in&nbsp;the&nbsp;data&nbsp;portion&nbsp;of&nbsp;the&nbsp;interface.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718552">switch</span>&nbsp;<span class="op" id="2718559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718562">case</span>&nbsp;<span class="ident" id="2718567">ifaceIndir</span><span class="op" id="2718577">(</span><span class="ident" id="2718578">t</span><span class="op" id="2718579">)</span><span class="op" id="2718580">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718584">if</span>&nbsp;<span class="ident" id="2718587">v</span><span class="op" id="2718588">.</span><span class="ident" id="2718589">flag</span><span class="op" id="2718593">&amp;</span><span class="ident" id="2718594">flagIndir</span>&nbsp;<span class="op" id="2718604">==</span>&nbsp;<span class="num" id="2718607">0</span>&nbsp;<span class="op" id="2718609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2718614">panic</span><span class="op" id="2718619">(</span><span class="string" id="2718620">&#34;bad&nbsp;indir&#34;</span><span class="op" id="2718631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2718635">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718639">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface&nbsp;we&#39;re&nbsp;making.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2718701">ptr</span>&nbsp;<span class="op" id="2718705">:=</span>&nbsp;<span class="ident" id="2718708">v</span><span class="op" id="2718709">.</span><span class="ident" id="2718710">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718716">if</span>&nbsp;<span class="ident" id="2718719">v</span><span class="op" id="2718720">.</span><span class="ident" id="2718721">flag</span><span class="op" id="2718725">&amp;</span><span class="ident" id="2718726">flagAddr</span>&nbsp;<span class="op" id="2718735">!=</span>&nbsp;<span class="num" id="2718738">0</span>&nbsp;<span class="op" id="2718740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718745">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;boolean&nbsp;from&nbsp;valueInterface&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718798">//&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2718841">c</span>&nbsp;<span class="op" id="2718843">:=</span>&nbsp;<span class="ident" id="2718846">unsafe_New</span><span class="op" id="2718856">(</span><span class="ident" id="2718857">t</span><span class="op" id="2718858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2718863">memmove</span><span class="op" id="2718870">(</span><span class="ident" id="2718871">c</span><span class="op" id="2718872">,</span>&nbsp;<span class="ident" id="2718874">ptr</span><span class="op" id="2718877">,</span>&nbsp;<span class="ident" id="2718879">t</span><span class="op" id="2718880">.</span><span class="ident" id="2718881">size</span><span class="op" id="2718885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2718890">ptr</span>&nbsp;<span class="op" id="2718894">=</span>&nbsp;<span class="ident" id="2718896">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2718900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2718904">e</span><span class="op" id="2718905">.</span><span class="ident" id="2718906">word</span>&nbsp;<span class="op" id="2718911">=</span>&nbsp;<span class="ident" id="2718913">ptr</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718918">case</span>&nbsp;<span class="ident" id="2718923">v</span><span class="op" id="2718924">.</span><span class="ident" id="2718925">flag</span><span class="op" id="2718929">&amp;</span><span class="ident" id="2718930">flagIndir</span>&nbsp;<span class="op" id="2718940">!=</span>&nbsp;<span class="num" id="2718943">0</span><span class="op" id="2718944">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718948">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;but&nbsp;interface&nbsp;is&nbsp;direct.&nbsp;&nbsp;We&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2719006">//&nbsp;to&nbsp;load&nbsp;the&nbsp;data&nbsp;at&nbsp;v.ptr&nbsp;into&nbsp;the&nbsp;interface&nbsp;data&nbsp;word.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719067">e</span><span class="op" id="2719068">.</span><span class="ident" id="2719069">word</span>&nbsp;<span class="op" id="2719074">=</span>&nbsp;<span class="op" id="2719076">*</span><span class="op" id="2719077">(</span><span class="op" id="2719078">*</span><span class="ident" id="2719079">unsafe</span><span class="op" id="2719085">.</span><span class="ident" id="2719086">Pointer</span><span class="op" id="2719093">)</span><span class="op" id="2719094">(</span><span class="ident" id="2719095">v</span><span class="op" id="2719096">.</span><span class="ident" id="2719097">ptr</span><span class="op" id="2719100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719103">default</span><span class="op" id="2719110">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2719114">//&nbsp;Value&nbsp;is&nbsp;direct,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719161">e</span><span class="op" id="2719162">.</span><span class="ident" id="2719163">word</span>&nbsp;<span class="op" id="2719168">=</span>&nbsp;<span class="ident" id="2719170">v</span><span class="op" id="2719171">.</span><span class="ident" id="2719172">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2719177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2719180">//&nbsp;Now,&nbsp;fill&nbsp;in&nbsp;the&nbsp;type&nbsp;portion.&nbsp;&nbsp;We&#39;re&nbsp;very&nbsp;careful&nbsp;here&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2719244">//&nbsp;to&nbsp;have&nbsp;any&nbsp;operation&nbsp;between&nbsp;the&nbsp;e.word&nbsp;and&nbsp;e.typ&nbsp;assignments</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2719311">//&nbsp;that&nbsp;would&nbsp;let&nbsp;the&nbsp;garbage&nbsp;collector&nbsp;observe&nbsp;the&nbsp;partially-built</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2719380">//&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719401">e</span><span class="op" id="2719402">.</span><span class="ident" id="2719403">typ</span>&nbsp;<span class="op" id="2719407">=</span>&nbsp;<span class="ident" id="2719409">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719412">return</span>&nbsp;<span class="ident" id="2719419">i</span><br>
<span class="lineno"></span><span class="op" id="2719421">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="2719424">//&nbsp;unpackEface&nbsp;converts&nbsp;the&nbsp;empty&nbsp;interface&nbsp;i&nbsp;to&nbsp;a&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2719482">func</span>&nbsp;<span class="ident" id="2719487">unpackEface</span><span class="op" id="2719498">(</span><span class="ident" id="2719499">i</span>&nbsp;<span class="keyword" id="2719501">interface</span><span class="op" id="2719510">{</span><span class="op" id="2719511">}</span><span class="op" id="2719512">)</span>&nbsp;<span class="ident" id="2719514">Value</span>&nbsp;<span class="op" id="2719520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719523">e</span>&nbsp;<span class="op" id="2719525">:=</span>&nbsp;<span class="op" id="2719528">(</span><span class="op" id="2719529">*</span><span class="ident" id="2719530">emptyInterface</span><span class="op" id="2719544">)</span><span class="op" id="2719545">(</span><span class="ident" id="2719546">unsafe</span><span class="op" id="2719552">.</span><span class="ident" id="2719553">Pointer</span><span class="op" id="2719560">(</span><span class="op" id="2719561">&amp;</span><span class="ident" id="2719562">i</span><span class="op" id="2719563">)</span><span class="op" id="2719564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2719567">//&nbsp;NOTE:&nbsp;don&#39;t&nbsp;read&nbsp;e.word&nbsp;until&nbsp;we&nbsp;know&nbsp;whether&nbsp;it&nbsp;is&nbsp;really&nbsp;a&nbsp;pointer&nbsp;or&nbsp;not.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719648">t</span>&nbsp;<span class="op" id="2719650">:=</span>&nbsp;<span class="ident" id="2719653">e</span><span class="op" id="2719654">.</span><span class="ident" id="2719655">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719660">if</span>&nbsp;<span class="ident" id="2719663">t</span>&nbsp;<span class="op" id="2719665">==</span>&nbsp;<span class="ident" id="2719668">nil</span>&nbsp;<span class="op" id="2719672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719676">return</span>&nbsp;<span class="ident" id="2719683">Value</span><span class="op" id="2719688">{</span><span class="op" id="2719689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2719692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719695">f</span>&nbsp;<span class="op" id="2719697">:=</span>&nbsp;<span class="ident" id="2719700">flag</span><span class="op" id="2719704">(</span><span class="ident" id="2719705">t</span><span class="op" id="2719706">.</span><span class="ident" id="2719707">Kind</span><span class="op" id="2719711">(</span><span class="op" id="2719712">)</span><span class="op" id="2719713">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719716">if</span>&nbsp;<span class="ident" id="2719719">ifaceIndir</span><span class="op" id="2719729">(</span><span class="ident" id="2719730">t</span><span class="op" id="2719731">)</span>&nbsp;<span class="op" id="2719733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719737">f</span>&nbsp;<span class="op" id="2719739">|=</span>&nbsp;<span class="ident" id="2719742">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2719753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719756">return</span>&nbsp;<span class="ident" id="2719763">Value</span><span class="op" id="2719768">{</span><span class="ident" id="2719769">t</span><span class="op" id="2719770">,</span>&nbsp;<span class="ident" id="2719772">unsafe</span><span class="op" id="2719778">.</span><span class="ident" id="2719779">Pointer</span><span class="op" id="2719786">(</span><span class="ident" id="2719787">e</span><span class="op" id="2719788">.</span><span class="ident" id="2719789">word</span><span class="op" id="2719793">)</span><span class="op" id="2719794">,</span>&nbsp;<span class="ident" id="2719796">f</span><span class="op" id="2719797">}</span><br>
<span class="lineno"></span><span class="op" id="2719799">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="2719802">//&nbsp;A&nbsp;ValueError&nbsp;occurs&nbsp;when&nbsp;a&nbsp;Value&nbsp;method&nbsp;is&nbsp;invoked&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2719859">//&nbsp;a&nbsp;Value&nbsp;that&nbsp;does&nbsp;not&nbsp;support&nbsp;it.&nbsp;&nbsp;Such&nbsp;cases&nbsp;are&nbsp;documented</span><br>
<span class="lineno"></span><span class="comment" id="2719923">//&nbsp;in&nbsp;the&nbsp;description&nbsp;of&nbsp;each&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="2719961">type</span>&nbsp;<span class="ident" id="2719966">ValueError</span>&nbsp;<span class="keyword" id="2719977">struct</span>&nbsp;<span class="op" id="2719984">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719987">Method</span>&nbsp;<span class="builtintype" id="2719994">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720002">Kind</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2720009">Kind</span><br>
<span class="lineno"></span><span class="op" id="2720014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2720017">func</span>&nbsp;<span class="op" id="2720022">(</span><span class="ident" id="2720023">e</span>&nbsp;<span class="op" id="2720025">*</span><span class="ident" id="2720026">ValueError</span><span class="op" id="2720036">)</span>&nbsp;<span class="ident" id="2720038">Error</span><span class="op" id="2720043">(</span><span class="op" id="2720044">)</span>&nbsp;<span class="builtintype" id="2720046">string</span>&nbsp;<span class="op" id="2720053">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720056">if</span>&nbsp;<span class="ident" id="2720059">e</span><span class="op" id="2720060">.</span><span class="ident" id="2720061">Kind</span>&nbsp;<span class="op" id="2720066">==</span>&nbsp;<span class="num" id="2720069">0</span>&nbsp;<span class="op" id="2720071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720075">return</span>&nbsp;<span class="string" id="2720082">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2720102">+</span>&nbsp;<span class="ident" id="2720104">e</span><span class="op" id="2720105">.</span><span class="ident" id="2720106">Method</span>&nbsp;<span class="op" id="2720113">+</span>&nbsp;<span class="string" id="2720115">&#34;&nbsp;on&nbsp;zero&nbsp;Value&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2720133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720136">return</span>&nbsp;<span class="string" id="2720143">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2720163">+</span>&nbsp;<span class="ident" id="2720165">e</span><span class="op" id="2720166">.</span><span class="ident" id="2720167">Method</span>&nbsp;<span class="op" id="2720174">+</span>&nbsp;<span class="string" id="2720176">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="2720183">+</span>&nbsp;<span class="ident" id="2720185">e</span><span class="op" id="2720186">.</span><span class="ident" id="2720187">Kind</span><span class="op" id="2720191">.</span><span class="ident" id="2720192">String</span><span class="op" id="2720198">(</span><span class="op" id="2720199">)</span>&nbsp;<span class="op" id="2720201">+</span>&nbsp;<span class="string" id="2720203">&#34;&nbsp;Value&#34;</span><br>
<span class="lineno"></span><span class="op" id="2720212">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="2720215">//&nbsp;methodName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;calling&nbsp;method,</span><br>
<span class="lineno"></span><span class="comment" id="2720269">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;two&nbsp;stack&nbsp;frames&nbsp;above.</span><br>
<span class="lineno"></span><span class="keyword" id="2720310">func</span>&nbsp;<span class="ident" id="2720315">methodName</span><span class="op" id="2720325">(</span><span class="op" id="2720326">)</span>&nbsp;<span class="builtintype" id="2720328">string</span>&nbsp;<span class="op" id="2720335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720338">pc</span><span class="op" id="2720340">,</span>&nbsp;<span class="ident" id="2720342">_</span><span class="op" id="2720343">,</span>&nbsp;<span class="ident" id="2720345">_</span><span class="op" id="2720346">,</span>&nbsp;<span class="ident" id="2720348">_</span>&nbsp;<span class="op" id="2720350">:=</span>&nbsp;<span class="ident" id="2720353">runtime</span><span class="op" id="2720360">.</span><span class="ident" id="2720361">Caller</span><span class="op" id="2720367">(</span><span class="num" id="2720368">2</span><span class="op" id="2720369">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720372">f</span>&nbsp;<span class="op" id="2720374">:=</span>&nbsp;<span class="ident" id="2720377">runtime</span><span class="op" id="2720384">.</span><span class="ident" id="2720385">FuncForPC</span><span class="op" id="2720394">(</span><span class="ident" id="2720395">pc</span><span class="op" id="2720397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720400">if</span>&nbsp;<span class="ident" id="2720403">f</span>&nbsp;<span class="op" id="2720405">==</span>&nbsp;<span class="ident" id="2720408">nil</span>&nbsp;<span class="op" id="2720412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720416">return</span>&nbsp;<span class="string" id="2720423">&#34;unknown&nbsp;method&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2720441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720444">return</span>&nbsp;<span class="ident" id="2720451">f</span><span class="op" id="2720452">.</span><span class="ident" id="2720453">Name</span><span class="op" id="2720457">(</span><span class="op" id="2720458">)</span><br>
<span class="lineno">165</span><span class="op" id="2720460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2720463">//&nbsp;emptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;an&nbsp;interface{}&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2720521">type</span>&nbsp;<span class="ident" id="2720526">emptyInterface</span>&nbsp;<span class="keyword" id="2720541">struct</span>&nbsp;<span class="op" id="2720548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720551">typ</span>&nbsp;&nbsp;<span class="op" id="2720556">*</span><span class="ident" id="2720557">rtype</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720564">word</span>&nbsp;<span class="ident" id="2720569">unsafe</span><span class="op" id="2720575">.</span><span class="ident" id="2720576">Pointer</span><br>
<span class="lineno"></span><span class="op" id="2720584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2720587">//&nbsp;nonEmptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;interface&nbsp;value&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="2720658">type</span>&nbsp;<span class="ident" id="2720663">nonEmptyInterface</span>&nbsp;<span class="keyword" id="2720681">struct</span>&nbsp;<span class="op" id="2720688">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2720691">//&nbsp;see&nbsp;../runtime/iface.c:/Itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720724">itab</span>&nbsp;<span class="op" id="2720729">*</span><span class="keyword" id="2720730">struct</span>&nbsp;<span class="op" id="2720737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720741">ityp</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2720748">*</span><span class="ident" id="2720749">rtype</span>&nbsp;<span class="comment" id="2720755">//&nbsp;static&nbsp;interface&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720782">typ</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2720789">*</span><span class="ident" id="2720790">rtype</span>&nbsp;<span class="comment" id="2720796">//&nbsp;dynamic&nbsp;concrete&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720823">link</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2720830">unsafe</span><span class="op" id="2720836">.</span><span class="ident" id="2720837">Pointer</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720847">bad</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2720854">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720862">unused</span>&nbsp;<span class="builtintype" id="2720869">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720877">fun</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2720884">[</span><span class="num" id="2720885">100000</span><span class="op" id="2720891">]</span><span class="ident" id="2720892">unsafe</span><span class="op" id="2720898">.</span><span class="ident" id="2720899">Pointer</span>&nbsp;<span class="comment" id="2720907">//&nbsp;method&nbsp;table</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2720924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720927">word</span>&nbsp;<span class="ident" id="2720932">unsafe</span><span class="op" id="2720938">.</span><span class="ident" id="2720939">Pointer</span><br>
<span class="lineno">185</span><span class="op" id="2720947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2720950">//&nbsp;mustBe&nbsp;panics&nbsp;if&nbsp;f&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;expected.</span><br>
<span class="lineno"></span><span class="comment" id="2720996">//&nbsp;Making&nbsp;this&nbsp;a&nbsp;method&nbsp;on&nbsp;flag&nbsp;instead&nbsp;of&nbsp;on&nbsp;Value</span><br>
<span class="lineno"></span><span class="comment" id="2721048">//&nbsp;(and&nbsp;embedding&nbsp;flag&nbsp;in&nbsp;Value)&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">190</span><span class="comment" id="2721105">//&nbsp;the&nbsp;very&nbsp;clear&nbsp;v.mustBe(Bool)&nbsp;and&nbsp;have&nbsp;it&nbsp;compile&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="2721163">//&nbsp;v.flag.mustBe(Bool),&nbsp;which&nbsp;will&nbsp;only&nbsp;bother&nbsp;to&nbsp;copy&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2721222">//&nbsp;single&nbsp;important&nbsp;word&nbsp;for&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2721265">func</span>&nbsp;<span class="op" id="2721270">(</span><span class="ident" id="2721271">f</span>&nbsp;<span class="ident" id="2721273">flag</span><span class="op" id="2721277">)</span>&nbsp;<span class="ident" id="2721279">mustBe</span><span class="op" id="2721285">(</span><span class="ident" id="2721286">expected</span>&nbsp;<span class="ident" id="2721295">Kind</span><span class="op" id="2721299">)</span>&nbsp;<span class="op" id="2721301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721304">if</span>&nbsp;<span class="ident" id="2721307">f</span><span class="op" id="2721308">.</span><span class="ident" id="2721309">kind</span><span class="op" id="2721313">(</span><span class="op" id="2721314">)</span>&nbsp;<span class="op" id="2721316">!=</span>&nbsp;<span class="ident" id="2721319">expected</span>&nbsp;<span class="op" id="2721328">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2721332">panic</span><span class="op" id="2721337">(</span><span class="op" id="2721338">&amp;</span><span class="ident" id="2721339">ValueError</span><span class="op" id="2721349">{</span><span class="ident" id="2721350">methodName</span><span class="op" id="2721360">(</span><span class="op" id="2721361">)</span><span class="op" id="2721362">,</span>&nbsp;<span class="ident" id="2721364">f</span><span class="op" id="2721365">.</span><span class="ident" id="2721366">kind</span><span class="op" id="2721370">(</span><span class="op" id="2721371">)</span><span class="op" id="2721372">}</span><span class="op" id="2721373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2721376">}</span><br>
<span class="lineno"></span><span class="op" id="2721378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2721381">//&nbsp;mustBeExported&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;was&nbsp;obtained&nbsp;using</span><br>
<span class="lineno">200</span><span class="comment" id="2721453">//&nbsp;an&nbsp;unexported&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="2721477">func</span>&nbsp;<span class="op" id="2721482">(</span><span class="ident" id="2721483">f</span>&nbsp;<span class="ident" id="2721485">flag</span><span class="op" id="2721489">)</span>&nbsp;<span class="ident" id="2721491">mustBeExported</span><span class="op" id="2721505">(</span><span class="op" id="2721506">)</span>&nbsp;<span class="op" id="2721508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721511">if</span>&nbsp;<span class="ident" id="2721514">f</span>&nbsp;<span class="op" id="2721516">==</span>&nbsp;<span class="num" id="2721519">0</span>&nbsp;<span class="op" id="2721521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2721525">panic</span><span class="op" id="2721530">(</span><span class="op" id="2721531">&amp;</span><span class="ident" id="2721532">ValueError</span><span class="op" id="2721542">{</span><span class="ident" id="2721543">methodName</span><span class="op" id="2721553">(</span><span class="op" id="2721554">)</span><span class="op" id="2721555">,</span>&nbsp;<span class="num" id="2721557">0</span><span class="op" id="2721558">}</span><span class="op" id="2721559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2721562">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721565">if</span>&nbsp;<span class="ident" id="2721568">f</span><span class="op" id="2721569">&amp;</span><span class="ident" id="2721570">flagRO</span>&nbsp;<span class="op" id="2721577">!=</span>&nbsp;<span class="num" id="2721580">0</span>&nbsp;<span class="op" id="2721582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2721586">panic</span><span class="op" id="2721591">(</span><span class="string" id="2721592">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2721604">+</span>&nbsp;<span class="ident" id="2721606">methodName</span><span class="op" id="2721616">(</span><span class="op" id="2721617">)</span>&nbsp;<span class="op" id="2721619">+</span>&nbsp;<span class="string" id="2721621">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2721667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2721670">}</span><br>
<span class="lineno"></span><span class="op" id="2721672">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="comment" id="2721675">//&nbsp;mustBeAssignable&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;is&nbsp;not&nbsp;assignable,</span><br>
<span class="lineno"></span><span class="comment" id="2721749">//&nbsp;which&nbsp;is&nbsp;to&nbsp;say&nbsp;that&nbsp;either&nbsp;it&nbsp;was&nbsp;obtained&nbsp;using&nbsp;an&nbsp;unexported&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2721822">//&nbsp;or&nbsp;it&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2721851">func</span>&nbsp;<span class="op" id="2721856">(</span><span class="ident" id="2721857">f</span>&nbsp;<span class="ident" id="2721859">flag</span><span class="op" id="2721863">)</span>&nbsp;<span class="ident" id="2721865">mustBeAssignable</span><span class="op" id="2721881">(</span><span class="op" id="2721882">)</span>&nbsp;<span class="op" id="2721884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721887">if</span>&nbsp;<span class="ident" id="2721890">f</span>&nbsp;<span class="op" id="2721892">==</span>&nbsp;<span class="num" id="2721895">0</span>&nbsp;<span class="op" id="2721897">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2721901">panic</span><span class="op" id="2721906">(</span><span class="op" id="2721907">&amp;</span><span class="ident" id="2721908">ValueError</span><span class="op" id="2721918">{</span><span class="ident" id="2721919">methodName</span><span class="op" id="2721929">(</span><span class="op" id="2721930">)</span><span class="op" id="2721931">,</span>&nbsp;<span class="ident" id="2721933">Invalid</span><span class="op" id="2721940">}</span><span class="op" id="2721941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2721944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2721947">//&nbsp;Assignable&nbsp;if&nbsp;addressable&nbsp;and&nbsp;not&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721996">if</span>&nbsp;<span class="ident" id="2721999">f</span><span class="op" id="2722000">&amp;</span><span class="ident" id="2722001">flagRO</span>&nbsp;<span class="op" id="2722008">!=</span>&nbsp;<span class="num" id="2722011">0</span>&nbsp;<span class="op" id="2722013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2722017">panic</span><span class="op" id="2722022">(</span><span class="string" id="2722023">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2722035">+</span>&nbsp;<span class="ident" id="2722037">methodName</span><span class="op" id="2722047">(</span><span class="op" id="2722048">)</span>&nbsp;<span class="op" id="2722050">+</span>&nbsp;<span class="string" id="2722052">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2722098">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2722101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722104">if</span>&nbsp;<span class="ident" id="2722107">f</span><span class="op" id="2722108">&amp;</span><span class="ident" id="2722109">flagAddr</span>&nbsp;<span class="op" id="2722118">==</span>&nbsp;<span class="num" id="2722121">0</span>&nbsp;<span class="op" id="2722123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2722127">panic</span><span class="op" id="2722132">(</span><span class="string" id="2722133">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2722145">+</span>&nbsp;<span class="ident" id="2722147">methodName</span><span class="op" id="2722157">(</span><span class="op" id="2722158">)</span>&nbsp;<span class="op" id="2722160">+</span>&nbsp;<span class="string" id="2722162">&#34;&nbsp;using&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2722190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2722193">}</span><br>
<span class="lineno"></span><span class="op" id="2722195">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="2722198">//&nbsp;Addr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;value&nbsp;representing&nbsp;the&nbsp;address&nbsp;of&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2722261">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanAddr()&nbsp;returns&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2722302">//&nbsp;Addr&nbsp;is&nbsp;typically&nbsp;used&nbsp;to&nbsp;obtain&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;struct&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2722366">//&nbsp;or&nbsp;slice&nbsp;element&nbsp;in&nbsp;order&nbsp;to&nbsp;call&nbsp;a&nbsp;method&nbsp;that&nbsp;requires&nbsp;a</span><br>
<span class="lineno">230</span><span class="comment" id="2722428">//&nbsp;pointer&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2722449">func</span>&nbsp;<span class="op" id="2722454">(</span><span class="ident" id="2722455">v</span>&nbsp;<span class="ident" id="2722457">Value</span><span class="op" id="2722462">)</span>&nbsp;<span class="ident" id="2722464">Addr</span><span class="op" id="2722468">(</span><span class="op" id="2722469">)</span>&nbsp;<span class="ident" id="2722471">Value</span>&nbsp;<span class="op" id="2722477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722480">if</span>&nbsp;<span class="ident" id="2722483">v</span><span class="op" id="2722484">.</span><span class="ident" id="2722485">flag</span><span class="op" id="2722489">&amp;</span><span class="ident" id="2722490">flagAddr</span>&nbsp;<span class="op" id="2722499">==</span>&nbsp;<span class="num" id="2722502">0</span>&nbsp;<span class="op" id="2722504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2722508">panic</span><span class="op" id="2722513">(</span><span class="string" id="2722514">&#34;reflect.Value.Addr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2722557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2722560">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722563">return</span>&nbsp;<span class="ident" id="2722570">Value</span><span class="op" id="2722575">{</span><span class="ident" id="2722576">v</span><span class="op" id="2722577">.</span><span class="ident" id="2722578">typ</span><span class="op" id="2722581">.</span><span class="ident" id="2722582">ptrTo</span><span class="op" id="2722587">(</span><span class="op" id="2722588">)</span><span class="op" id="2722589">,</span>&nbsp;<span class="ident" id="2722591">v</span><span class="op" id="2722592">.</span><span class="ident" id="2722593">ptr</span><span class="op" id="2722596">,</span>&nbsp;<span class="op" id="2722598">(</span><span class="ident" id="2722599">v</span><span class="op" id="2722600">.</span><span class="ident" id="2722601">flag</span>&nbsp;<span class="op" id="2722606">&amp;</span>&nbsp;<span class="ident" id="2722608">flagRO</span><span class="op" id="2722614">)</span>&nbsp;<span class="op" id="2722616">|</span>&nbsp;<span class="ident" id="2722618">flag</span><span class="op" id="2722622">(</span><span class="ident" id="2722623">Ptr</span><span class="op" id="2722626">)</span><span class="op" id="2722627">}</span><br>
<span class="lineno"></span><span class="op" id="2722629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2722632">//&nbsp;Bool&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2722670">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Bool.</span><br>
<span class="lineno">240</span><span class="keyword" id="2722708">func</span>&nbsp;<span class="op" id="2722713">(</span><span class="ident" id="2722714">v</span>&nbsp;<span class="ident" id="2722716">Value</span><span class="op" id="2722721">)</span>&nbsp;<span class="ident" id="2722723">Bool</span><span class="op" id="2722727">(</span><span class="op" id="2722728">)</span>&nbsp;<span class="builtintype" id="2722730">bool</span>&nbsp;<span class="op" id="2722735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2722738">v</span><span class="op" id="2722739">.</span><span class="ident" id="2722740">mustBe</span><span class="op" id="2722746">(</span><span class="ident" id="2722747">Bool</span><span class="op" id="2722751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722754">return</span>&nbsp;<span class="op" id="2722761">*</span><span class="op" id="2722762">(</span><span class="op" id="2722763">*</span><span class="builtintype" id="2722764">bool</span><span class="op" id="2722768">)</span><span class="op" id="2722769">(</span><span class="ident" id="2722770">v</span><span class="op" id="2722771">.</span><span class="ident" id="2722772">ptr</span><span class="op" id="2722775">)</span><br>
<span class="lineno"></span><span class="op" id="2722777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2722780">//&nbsp;Bytes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2722819">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2722881">func</span>&nbsp;<span class="op" id="2722886">(</span><span class="ident" id="2722887">v</span>&nbsp;<span class="ident" id="2722889">Value</span><span class="op" id="2722894">)</span>&nbsp;<span class="ident" id="2722896">Bytes</span><span class="op" id="2722901">(</span><span class="op" id="2722902">)</span>&nbsp;<span class="op" id="2722904">[</span><span class="op" id="2722905">]</span><span class="builtintype" id="2722906">byte</span>&nbsp;<span class="op" id="2722911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2722914">v</span><span class="op" id="2722915">.</span><span class="ident" id="2722916">mustBe</span><span class="op" id="2722922">(</span><span class="ident" id="2722923">Slice</span><span class="op" id="2722928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722931">if</span>&nbsp;<span class="ident" id="2722934">v</span><span class="op" id="2722935">.</span><span class="ident" id="2722936">typ</span><span class="op" id="2722939">.</span><span class="ident" id="2722940">Elem</span><span class="op" id="2722944">(</span><span class="op" id="2722945">)</span><span class="op" id="2722946">.</span><span class="ident" id="2722947">Kind</span><span class="op" id="2722951">(</span><span class="op" id="2722952">)</span>&nbsp;<span class="op" id="2722954">!=</span>&nbsp;<span class="ident" id="2722957">Uint8</span>&nbsp;<span class="op" id="2722963">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2722967">panic</span><span class="op" id="2722972">(</span><span class="string" id="2722973">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2723012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2723015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2723018">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2723076">return</span>&nbsp;<span class="op" id="2723083">*</span><span class="op" id="2723084">(</span><span class="op" id="2723085">*</span><span class="op" id="2723086">[</span><span class="op" id="2723087">]</span><span class="builtintype" id="2723088">byte</span><span class="op" id="2723092">)</span><span class="op" id="2723093">(</span><span class="ident" id="2723094">v</span><span class="op" id="2723095">.</span><span class="ident" id="2723096">ptr</span><span class="op" id="2723099">)</span><br>
<span class="lineno"></span><span class="op" id="2723101">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="2723104">//&nbsp;runes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2723143">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2723214">func</span>&nbsp;<span class="op" id="2723219">(</span><span class="ident" id="2723220">v</span>&nbsp;<span class="ident" id="2723222">Value</span><span class="op" id="2723227">)</span>&nbsp;<span class="ident" id="2723229">runes</span><span class="op" id="2723234">(</span><span class="op" id="2723235">)</span>&nbsp;<span class="op" id="2723237">[</span><span class="op" id="2723238">]</span><span class="builtintype" id="2723239">rune</span>&nbsp;<span class="op" id="2723244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2723247">v</span><span class="op" id="2723248">.</span><span class="ident" id="2723249">mustBe</span><span class="op" id="2723255">(</span><span class="ident" id="2723256">Slice</span><span class="op" id="2723261">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2723264">if</span>&nbsp;<span class="ident" id="2723267">v</span><span class="op" id="2723268">.</span><span class="ident" id="2723269">typ</span><span class="op" id="2723272">.</span><span class="ident" id="2723273">Elem</span><span class="op" id="2723277">(</span><span class="op" id="2723278">)</span><span class="op" id="2723279">.</span><span class="ident" id="2723280">Kind</span><span class="op" id="2723284">(</span><span class="op" id="2723285">)</span>&nbsp;<span class="op" id="2723287">!=</span>&nbsp;<span class="ident" id="2723290">Int32</span>&nbsp;<span class="op" id="2723296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2723300">panic</span><span class="op" id="2723305">(</span><span class="string" id="2723306">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2723345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2723348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2723351">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2723409">return</span>&nbsp;<span class="op" id="2723416">*</span><span class="op" id="2723417">(</span><span class="op" id="2723418">*</span><span class="op" id="2723419">[</span><span class="op" id="2723420">]</span><span class="builtintype" id="2723421">rune</span><span class="op" id="2723425">)</span><span class="op" id="2723426">(</span><span class="ident" id="2723427">v</span><span class="op" id="2723428">.</span><span class="ident" id="2723429">ptr</span><span class="op" id="2723432">)</span><br>
<span class="lineno">265</span><span class="op" id="2723434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2723437">//&nbsp;CanAddr&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&#39;s&nbsp;address&nbsp;can&nbsp;be&nbsp;obtained&nbsp;with&nbsp;Addr.</span><br>
<span class="lineno"></span><span class="comment" id="2723511">//&nbsp;Such&nbsp;values&nbsp;are&nbsp;called&nbsp;addressable.&nbsp;&nbsp;A&nbsp;value&nbsp;is&nbsp;addressable&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2723583">//&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;slice,&nbsp;an&nbsp;element&nbsp;of&nbsp;an&nbsp;addressable&nbsp;array,</span><br>
<span class="lineno">270</span><span class="comment" id="2723645">//&nbsp;a&nbsp;field&nbsp;of&nbsp;an&nbsp;addressable&nbsp;struct,&nbsp;or&nbsp;the&nbsp;result&nbsp;of&nbsp;dereferencing&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="comment" id="2723724">//&nbsp;If&nbsp;CanAddr&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Addr&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2723778">func</span>&nbsp;<span class="op" id="2723783">(</span><span class="ident" id="2723784">v</span>&nbsp;<span class="ident" id="2723786">Value</span><span class="op" id="2723791">)</span>&nbsp;<span class="ident" id="2723793">CanAddr</span><span class="op" id="2723800">(</span><span class="op" id="2723801">)</span>&nbsp;<span class="builtintype" id="2723803">bool</span>&nbsp;<span class="op" id="2723808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2723811">return</span>&nbsp;<span class="ident" id="2723818">v</span><span class="op" id="2723819">.</span><span class="ident" id="2723820">flag</span><span class="op" id="2723824">&amp;</span><span class="ident" id="2723825">flagAddr</span>&nbsp;<span class="op" id="2723834">!=</span>&nbsp;<span class="num" id="2723837">0</span><br>
<span class="lineno"></span><span class="op" id="2723839">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="2723842">//&nbsp;CanSet&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;of&nbsp;v&nbsp;can&nbsp;be&nbsp;changed.</span><br>
<span class="lineno"></span><span class="comment" id="2723899">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;changed&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable&nbsp;and&nbsp;was&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2723963">//&nbsp;obtained&nbsp;by&nbsp;the&nbsp;use&nbsp;of&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="2724015">//&nbsp;If&nbsp;CanSet&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Set&nbsp;or&nbsp;any&nbsp;type-specific</span><br>
<span class="lineno">280</span><span class="comment" id="2724076">//&nbsp;setter&nbsp;(e.g.,&nbsp;SetBool,&nbsp;SetInt64)&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2724124">func</span>&nbsp;<span class="op" id="2724129">(</span><span class="ident" id="2724130">v</span>&nbsp;<span class="ident" id="2724132">Value</span><span class="op" id="2724137">)</span>&nbsp;<span class="ident" id="2724139">CanSet</span><span class="op" id="2724145">(</span><span class="op" id="2724146">)</span>&nbsp;<span class="builtintype" id="2724148">bool</span>&nbsp;<span class="op" id="2724153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724156">return</span>&nbsp;<span class="ident" id="2724163">v</span><span class="op" id="2724164">.</span><span class="ident" id="2724165">flag</span><span class="op" id="2724169">&amp;</span><span class="op" id="2724170">(</span><span class="ident" id="2724171">flagAddr</span><span class="op" id="2724179">|</span><span class="ident" id="2724180">flagRO</span><span class="op" id="2724186">)</span>&nbsp;<span class="op" id="2724188">==</span>&nbsp;<span class="ident" id="2724191">flagAddr</span><br>
<span class="lineno"></span><span class="op" id="2724200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="2724203">//&nbsp;Call&nbsp;calls&nbsp;the&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in.</span><br>
<span class="lineno"></span><span class="comment" id="2724261">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]).</span><br>
<span class="lineno"></span><span class="comment" id="2724352">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func.</span><br>
<span class="lineno"></span><span class="comment" id="2724392">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2724436">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">290</span><span class="comment" id="2724495">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="comment" id="2724552">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;variadic&nbsp;function,&nbsp;Call&nbsp;creates&nbsp;the&nbsp;variadic&nbsp;slice&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="2724626">//&nbsp;itself,&nbsp;copying&nbsp;in&nbsp;the&nbsp;corresponding&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2724674">func</span>&nbsp;<span class="op" id="2724679">(</span><span class="ident" id="2724680">v</span>&nbsp;<span class="ident" id="2724682">Value</span><span class="op" id="2724687">)</span>&nbsp;<span class="ident" id="2724689">Call</span><span class="op" id="2724693">(</span><span class="ident" id="2724694">in</span>&nbsp;<span class="op" id="2724697">[</span><span class="op" id="2724698">]</span><span class="ident" id="2724699">Value</span><span class="op" id="2724704">)</span>&nbsp;<span class="op" id="2724706">[</span><span class="op" id="2724707">]</span><span class="ident" id="2724708">Value</span>&nbsp;<span class="op" id="2724714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2724717">v</span><span class="op" id="2724718">.</span><span class="ident" id="2724719">mustBe</span><span class="op" id="2724725">(</span><span class="ident" id="2724726">Func</span><span class="op" id="2724730">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2724733">v</span><span class="op" id="2724734">.</span><span class="ident" id="2724735">mustBeExported</span><span class="op" id="2724749">(</span><span class="op" id="2724750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724753">return</span>&nbsp;<span class="ident" id="2724760">v</span><span class="op" id="2724761">.</span><span class="ident" id="2724762">call</span><span class="op" id="2724766">(</span><span class="string" id="2724767">&#34;Call&#34;</span><span class="op" id="2724773">,</span>&nbsp;<span class="ident" id="2724775">in</span><span class="op" id="2724777">)</span><br>
<span class="lineno"></span><span class="op" id="2724779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2724782">//&nbsp;CallSlice&nbsp;calls&nbsp;the&nbsp;variadic&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in,</span><br>
<span class="lineno">300</span><span class="comment" id="2724854">//&nbsp;assigning&nbsp;the&nbsp;slice&nbsp;in[len(in)-1]&nbsp;to&nbsp;v&#39;s&nbsp;final&nbsp;variadic&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2724923">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]...).</span><br>
<span class="lineno"></span><span class="comment" id="2725017">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;variadic.</span><br>
<span class="lineno"></span><span class="comment" id="2725081">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2725125">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">305</span><span class="comment" id="2725184">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="keyword" id="2725241">func</span>&nbsp;<span class="op" id="2725246">(</span><span class="ident" id="2725247">v</span>&nbsp;<span class="ident" id="2725249">Value</span><span class="op" id="2725254">)</span>&nbsp;<span class="ident" id="2725256">CallSlice</span><span class="op" id="2725265">(</span><span class="ident" id="2725266">in</span>&nbsp;<span class="op" id="2725269">[</span><span class="op" id="2725270">]</span><span class="ident" id="2725271">Value</span><span class="op" id="2725276">)</span>&nbsp;<span class="op" id="2725278">[</span><span class="op" id="2725279">]</span><span class="ident" id="2725280">Value</span>&nbsp;<span class="op" id="2725286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725289">v</span><span class="op" id="2725290">.</span><span class="ident" id="2725291">mustBe</span><span class="op" id="2725297">(</span><span class="ident" id="2725298">Func</span><span class="op" id="2725302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725305">v</span><span class="op" id="2725306">.</span><span class="ident" id="2725307">mustBeExported</span><span class="op" id="2725321">(</span><span class="op" id="2725322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725325">return</span>&nbsp;<span class="ident" id="2725332">v</span><span class="op" id="2725333">.</span><span class="ident" id="2725334">call</span><span class="op" id="2725338">(</span><span class="string" id="2725339">&#34;CallSlice&#34;</span><span class="op" id="2725350">,</span>&nbsp;<span class="ident" id="2725352">in</span><span class="op" id="2725354">)</span><br>
<span class="lineno">310</span><span class="op" id="2725356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2725359">var</span>&nbsp;<span class="ident" id="2725363">callGC</span>&nbsp;<span class="builtintype" id="2725370">bool</span>&nbsp;<span class="comment" id="2725375">//&nbsp;for&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2725415">func</span>&nbsp;<span class="op" id="2725420">(</span><span class="ident" id="2725421">v</span>&nbsp;<span class="ident" id="2725423">Value</span><span class="op" id="2725428">)</span>&nbsp;<span class="ident" id="2725430">call</span><span class="op" id="2725434">(</span><span class="ident" id="2725435">op</span>&nbsp;<span class="builtintype" id="2725438">string</span><span class="op" id="2725444">,</span>&nbsp;<span class="ident" id="2725446">in</span>&nbsp;<span class="op" id="2725449">[</span><span class="op" id="2725450">]</span><span class="ident" id="2725451">Value</span><span class="op" id="2725456">)</span>&nbsp;<span class="op" id="2725458">[</span><span class="op" id="2725459">]</span><span class="ident" id="2725460">Value</span>&nbsp;<span class="op" id="2725466">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2725469">//&nbsp;Get&nbsp;function&nbsp;pointer,&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725501">t</span>&nbsp;<span class="op" id="2725503">:=</span>&nbsp;<span class="ident" id="2725506">v</span><span class="op" id="2725507">.</span><span class="ident" id="2725508">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725513">var</span>&nbsp;<span class="op" id="2725517">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725521">fn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2725530">unsafe</span><span class="op" id="2725536">.</span><span class="ident" id="2725537">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725547">rcvr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2725556">Value</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725564">rcvrtype</span>&nbsp;<span class="op" id="2725573">*</span><span class="ident" id="2725574">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2725581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725584">if</span>&nbsp;<span class="ident" id="2725587">v</span><span class="op" id="2725588">.</span><span class="ident" id="2725589">flag</span><span class="op" id="2725593">&amp;</span><span class="ident" id="2725594">flagMethod</span>&nbsp;<span class="op" id="2725605">!=</span>&nbsp;<span class="num" id="2725608">0</span>&nbsp;<span class="op" id="2725610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725614">rcvr</span>&nbsp;<span class="op" id="2725619">=</span>&nbsp;<span class="ident" id="2725621">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725625">rcvrtype</span><span class="op" id="2725633">,</span>&nbsp;<span class="ident" id="2725635">t</span><span class="op" id="2725636">,</span>&nbsp;<span class="ident" id="2725638">fn</span>&nbsp;<span class="op" id="2725641">=</span>&nbsp;<span class="ident" id="2725643">methodReceiver</span><span class="op" id="2725657">(</span><span class="ident" id="2725658">op</span><span class="op" id="2725660">,</span>&nbsp;<span class="ident" id="2725662">v</span><span class="op" id="2725663">,</span>&nbsp;<span class="builtintype" id="2725665">int</span><span class="op" id="2725668">(</span><span class="ident" id="2725669">v</span><span class="op" id="2725670">.</span><span class="ident" id="2725671">flag</span><span class="op" id="2725675">)</span><span class="op" id="2725676">&gt;&gt;</span><span class="ident" id="2725678">flagMethodShift</span><span class="op" id="2725693">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2725696">}</span>&nbsp;<span class="keyword" id="2725698">else</span>&nbsp;<span class="keyword" id="2725703">if</span>&nbsp;<span class="ident" id="2725706">v</span><span class="op" id="2725707">.</span><span class="ident" id="2725708">flag</span><span class="op" id="2725712">&amp;</span><span class="ident" id="2725713">flagIndir</span>&nbsp;<span class="op" id="2725723">!=</span>&nbsp;<span class="num" id="2725726">0</span>&nbsp;<span class="op" id="2725728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725732">fn</span>&nbsp;<span class="op" id="2725735">=</span>&nbsp;<span class="op" id="2725737">*</span><span class="op" id="2725738">(</span><span class="op" id="2725739">*</span><span class="ident" id="2725740">unsafe</span><span class="op" id="2725746">.</span><span class="ident" id="2725747">Pointer</span><span class="op" id="2725754">)</span><span class="op" id="2725755">(</span><span class="ident" id="2725756">v</span><span class="op" id="2725757">.</span><span class="ident" id="2725758">ptr</span><span class="op" id="2725761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2725764">}</span>&nbsp;<span class="keyword" id="2725766">else</span>&nbsp;<span class="op" id="2725771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725775">fn</span>&nbsp;<span class="op" id="2725778">=</span>&nbsp;<span class="ident" id="2725780">v</span><span class="op" id="2725781">.</span><span class="ident" id="2725782">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2725787">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725791">if</span>&nbsp;<span class="ident" id="2725794">fn</span>&nbsp;<span class="op" id="2725797">==</span>&nbsp;<span class="ident" id="2725800">nil</span>&nbsp;<span class="op" id="2725804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2725808">panic</span><span class="op" id="2725813">(</span><span class="string" id="2725814">&#34;reflect.Value.Call:&nbsp;call&nbsp;of&nbsp;nil&nbsp;function&#34;</span><span class="op" id="2725856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2725859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725863">isSlice</span>&nbsp;<span class="op" id="2725871">:=</span>&nbsp;<span class="ident" id="2725874">op</span>&nbsp;<span class="op" id="2725877">==</span>&nbsp;<span class="string" id="2725880">&#34;CallSlice&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725893">n</span>&nbsp;<span class="op" id="2725895">:=</span>&nbsp;<span class="ident" id="2725898">t</span><span class="op" id="2725899">.</span><span class="ident" id="2725900">NumIn</span><span class="op" id="2725905">(</span><span class="op" id="2725906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725909">if</span>&nbsp;<span class="ident" id="2725912">isSlice</span>&nbsp;<span class="op" id="2725920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725924">if</span>&nbsp;<span class="op" id="2725927">!</span><span class="ident" id="2725928">t</span><span class="op" id="2725929">.</span><span class="ident" id="2725930">IsVariadic</span><span class="op" id="2725940">(</span><span class="op" id="2725941">)</span>&nbsp;<span class="op" id="2725943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2725948">panic</span><span class="op" id="2725953">(</span><span class="string" id="2725954">&#34;reflect:&nbsp;CallSlice&nbsp;of&nbsp;non-variadic&nbsp;function&#34;</span><span class="op" id="2725999">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2726003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726007">if</span>&nbsp;<span class="builtinfunc" id="2726010">len</span><span class="op" id="2726013">(</span><span class="ident" id="2726014">in</span><span class="op" id="2726016">)</span>&nbsp;<span class="op" id="2726018">&lt;</span>&nbsp;<span class="ident" id="2726020">n</span>&nbsp;<span class="op" id="2726022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2726027">panic</span><span class="op" id="2726032">(</span><span class="string" id="2726033">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2726082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2726086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726090">if</span>&nbsp;<span class="builtinfunc" id="2726093">len</span><span class="op" id="2726096">(</span><span class="ident" id="2726097">in</span><span class="op" id="2726099">)</span>&nbsp;<span class="op" id="2726101">&gt;</span>&nbsp;<span class="ident" id="2726103">n</span>&nbsp;<span class="op" id="2726105">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2726110">panic</span><span class="op" id="2726115">(</span><span class="string" id="2726116">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2726166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2726170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2726173">}</span>&nbsp;<span class="keyword" id="2726175">else</span>&nbsp;<span class="op" id="2726180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726184">if</span>&nbsp;<span class="ident" id="2726187">t</span><span class="op" id="2726188">.</span><span class="ident" id="2726189">IsVariadic</span><span class="op" id="2726199">(</span><span class="op" id="2726200">)</span>&nbsp;<span class="op" id="2726202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2726207">n</span><span class="op" id="2726208">--</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2726213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726217">if</span>&nbsp;<span class="builtinfunc" id="2726220">len</span><span class="op" id="2726223">(</span><span class="ident" id="2726224">in</span><span class="op" id="2726226">)</span>&nbsp;<span class="op" id="2726228">&lt;</span>&nbsp;<span class="ident" id="2726230">n</span>&nbsp;<span class="op" id="2726232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2726237">panic</span><span class="op" id="2726242">(</span><span class="string" id="2726243">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2726287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2726291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726295">if</span>&nbsp;<span class="op" id="2726298">!</span><span class="ident" id="2726299">t</span><span class="op" id="2726300">.</span><span class="ident" id="2726301">IsVariadic</span><span class="op" id="2726311">(</span><span class="op" id="2726312">)</span>&nbsp;<span class="op" id="2726314">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2726317">len</span><span class="op" id="2726320">(</span><span class="ident" id="2726321">in</span><span class="op" id="2726323">)</span>&nbsp;<span class="op" id="2726325">&gt;</span>&nbsp;<span class="ident" id="2726327">n</span>&nbsp;<span class="op" id="2726329">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2726334">panic</span><span class="op" id="2726339">(</span><span class="string" id="2726340">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2726385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2726389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2726392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726395">for</span>&nbsp;<span class="ident" id="2726399">_</span><span class="op" id="2726400">,</span>&nbsp;<span class="ident" id="2726402">x</span>&nbsp;<span class="op" id="2726404">:=</span>&nbsp;<span class="keyword" id="2726407">range</span>&nbsp;<span class="ident" id="2726413">in</span>&nbsp;<span class="op" id="2726416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726420">if</span>&nbsp;<span class="ident" id="2726423">x</span><span class="op" id="2726424">.</span><span class="ident" id="2726425">Kind</span><span class="op" id="2726429">(</span><span class="op" id="2726430">)</span>&nbsp;<span class="op" id="2726432">==</span>&nbsp;<span class="ident" id="2726435">Invalid</span>&nbsp;<span class="op" id="2726443">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2726448">panic</span><span class="op" id="2726453">(</span><span class="string" id="2726454">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2726466">+</span>&nbsp;<span class="ident" id="2726468">op</span>&nbsp;<span class="op" id="2726471">+</span>&nbsp;<span class="string" id="2726473">&#34;&nbsp;using&nbsp;zero&nbsp;Value&nbsp;argument&#34;</span><span class="op" id="2726501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2726505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2726508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726511">for</span>&nbsp;<span class="ident" id="2726515">i</span>&nbsp;<span class="op" id="2726517">:=</span>&nbsp;<span class="num" id="2726520">0</span><span class="op" id="2726521">;</span>&nbsp;<span class="ident" id="2726523">i</span>&nbsp;<span class="op" id="2726525">&lt;</span>&nbsp;<span class="ident" id="2726527">n</span><span class="op" id="2726528">;</span>&nbsp;<span class="ident" id="2726530">i</span><span class="op" id="2726531">++</span>&nbsp;<span class="op" id="2726534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726538">if</span>&nbsp;<span class="ident" id="2726541">xt</span><span class="op" id="2726543">,</span>&nbsp;<span class="ident" id="2726545">targ</span>&nbsp;<span class="op" id="2726550">:=</span>&nbsp;<span class="ident" id="2726553">in</span><span class="op" id="2726555">[</span><span class="ident" id="2726556">i</span><span class="op" id="2726557">]</span><span class="op" id="2726558">.</span><span class="ident" id="2726559">Type</span><span class="op" id="2726563">(</span><span class="op" id="2726564">)</span><span class="op" id="2726565">,</span>&nbsp;<span class="ident" id="2726567">t</span><span class="op" id="2726568">.</span><span class="ident" id="2726569">In</span><span class="op" id="2726571">(</span><span class="ident" id="2726572">i</span><span class="op" id="2726573">)</span><span class="op" id="2726574">;</span>&nbsp;<span class="op" id="2726576">!</span><span class="ident" id="2726577">xt</span><span class="op" id="2726579">.</span><span class="ident" id="2726580">AssignableTo</span><span class="op" id="2726592">(</span><span class="ident" id="2726593">targ</span><span class="op" id="2726597">)</span>&nbsp;<span class="op" id="2726599">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2726604">panic</span><span class="op" id="2726609">(</span><span class="string" id="2726610">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2726622">+</span>&nbsp;<span class="ident" id="2726624">op</span>&nbsp;<span class="op" id="2726627">+</span>&nbsp;<span class="string" id="2726629">&#34;&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2726639">+</span>&nbsp;<span class="ident" id="2726641">xt</span><span class="op" id="2726643">.</span><span class="ident" id="2726644">String</span><span class="op" id="2726650">(</span><span class="op" id="2726651">)</span>&nbsp;<span class="op" id="2726653">+</span>&nbsp;<span class="string" id="2726655">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2726667">+</span>&nbsp;<span class="ident" id="2726669">targ</span><span class="op" id="2726673">.</span><span class="ident" id="2726674">String</span><span class="op" id="2726680">(</span><span class="op" id="2726681">)</span><span class="op" id="2726682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2726686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2726689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726692">if</span>&nbsp;<span class="op" id="2726695">!</span><span class="ident" id="2726696">isSlice</span>&nbsp;<span class="op" id="2726704">&amp;&amp;</span>&nbsp;<span class="ident" id="2726707">t</span><span class="op" id="2726708">.</span><span class="ident" id="2726709">IsVariadic</span><span class="op" id="2726719">(</span><span class="op" id="2726720">)</span>&nbsp;<span class="op" id="2726722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2726726">//&nbsp;prepare&nbsp;slice&nbsp;for&nbsp;remaining&nbsp;values</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2726766">m</span>&nbsp;<span class="op" id="2726768">:=</span>&nbsp;<span class="builtinfunc" id="2726771">len</span><span class="op" id="2726774">(</span><span class="ident" id="2726775">in</span><span class="op" id="2726777">)</span>&nbsp;<span class="op" id="2726779">-</span>&nbsp;<span class="ident" id="2726781">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2726785">slice</span>&nbsp;<span class="op" id="2726791">:=</span>&nbsp;<span class="ident" id="2726794">MakeSlice</span><span class="op" id="2726803">(</span><span class="ident" id="2726804">t</span><span class="op" id="2726805">.</span><span class="ident" id="2726806">In</span><span class="op" id="2726808">(</span><span class="ident" id="2726809">n</span><span class="op" id="2726810">)</span><span class="op" id="2726811">,</span>&nbsp;<span class="ident" id="2726813">m</span><span class="op" id="2726814">,</span>&nbsp;<span class="ident" id="2726816">m</span><span class="op" id="2726817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2726821">elem</span>&nbsp;<span class="op" id="2726826">:=</span>&nbsp;<span class="ident" id="2726829">t</span><span class="op" id="2726830">.</span><span class="ident" id="2726831">In</span><span class="op" id="2726833">(</span><span class="ident" id="2726834">n</span><span class="op" id="2726835">)</span><span class="op" id="2726836">.</span><span class="ident" id="2726837">Elem</span><span class="op" id="2726841">(</span><span class="op" id="2726842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726846">for</span>&nbsp;<span class="ident" id="2726850">i</span>&nbsp;<span class="op" id="2726852">:=</span>&nbsp;<span class="num" id="2726855">0</span><span class="op" id="2726856">;</span>&nbsp;<span class="ident" id="2726858">i</span>&nbsp;<span class="op" id="2726860">&lt;</span>&nbsp;<span class="ident" id="2726862">m</span><span class="op" id="2726863">;</span>&nbsp;<span class="ident" id="2726865">i</span><span class="op" id="2726866">++</span>&nbsp;<span class="op" id="2726869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2726874">x</span>&nbsp;<span class="op" id="2726876">:=</span>&nbsp;<span class="ident" id="2726879">in</span><span class="op" id="2726881">[</span><span class="ident" id="2726882">n</span><span class="op" id="2726883">+</span><span class="ident" id="2726884">i</span><span class="op" id="2726885">]</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726890">if</span>&nbsp;<span class="ident" id="2726893">xt</span>&nbsp;<span class="op" id="2726896">:=</span>&nbsp;<span class="ident" id="2726899">x</span><span class="op" id="2726900">.</span><span class="ident" id="2726901">Type</span><span class="op" id="2726905">(</span><span class="op" id="2726906">)</span><span class="op" id="2726907">;</span>&nbsp;<span class="op" id="2726909">!</span><span class="ident" id="2726910">xt</span><span class="op" id="2726912">.</span><span class="ident" id="2726913">AssignableTo</span><span class="op" id="2726925">(</span><span class="ident" id="2726926">elem</span><span class="op" id="2726930">)</span>&nbsp;<span class="op" id="2726932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2726938">panic</span><span class="op" id="2726943">(</span><span class="string" id="2726944">&#34;reflect:&nbsp;cannot&nbsp;use&nbsp;&#34;</span>&nbsp;<span class="op" id="2726967">+</span>&nbsp;<span class="ident" id="2726969">xt</span><span class="op" id="2726971">.</span><span class="ident" id="2726972">String</span><span class="op" id="2726978">(</span><span class="op" id="2726979">)</span>&nbsp;<span class="op" id="2726981">+</span>&nbsp;<span class="string" id="2726983">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2726995">+</span>&nbsp;<span class="ident" id="2726997">elem</span><span class="op" id="2727001">.</span><span class="ident" id="2727002">String</span><span class="op" id="2727008">(</span><span class="op" id="2727009">)</span>&nbsp;<span class="op" id="2727011">+</span>&nbsp;<span class="string" id="2727013">&#34;&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="2727020">+</span>&nbsp;<span class="ident" id="2727022">op</span><span class="op" id="2727024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727034">slice</span><span class="op" id="2727039">.</span><span class="ident" id="2727040">Index</span><span class="op" id="2727045">(</span><span class="ident" id="2727046">i</span><span class="op" id="2727047">)</span><span class="op" id="2727048">.</span><span class="ident" id="2727049">Set</span><span class="op" id="2727052">(</span><span class="ident" id="2727053">x</span><span class="op" id="2727054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727058">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727062">origIn</span>&nbsp;<span class="op" id="2727069">:=</span>&nbsp;<span class="ident" id="2727072">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727077">in</span>&nbsp;<span class="op" id="2727080">=</span>&nbsp;<span class="builtinfunc" id="2727082">make</span><span class="op" id="2727086">(</span><span class="op" id="2727087">[</span><span class="op" id="2727088">]</span><span class="ident" id="2727089">Value</span><span class="op" id="2727094">,</span>&nbsp;<span class="ident" id="2727096">n</span><span class="op" id="2727097">+</span><span class="num" id="2727098">1</span><span class="op" id="2727099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2727103">copy</span><span class="op" id="2727107">(</span><span class="ident" id="2727108">in</span><span class="op" id="2727110">[</span><span class="op" id="2727111">:</span><span class="ident" id="2727112">n</span><span class="op" id="2727113">]</span><span class="op" id="2727114">,</span>&nbsp;<span class="ident" id="2727116">origIn</span><span class="op" id="2727122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727126">in</span><span class="op" id="2727128">[</span><span class="ident" id="2727129">n</span><span class="op" id="2727130">]</span>&nbsp;<span class="op" id="2727132">=</span>&nbsp;<span class="ident" id="2727134">slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727141">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727145">nin</span>&nbsp;<span class="op" id="2727149">:=</span>&nbsp;<span class="builtinfunc" id="2727152">len</span><span class="op" id="2727155">(</span><span class="ident" id="2727156">in</span><span class="op" id="2727158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727161">if</span>&nbsp;<span class="ident" id="2727164">nin</span>&nbsp;<span class="op" id="2727168">!=</span>&nbsp;<span class="ident" id="2727171">t</span><span class="op" id="2727172">.</span><span class="ident" id="2727173">NumIn</span><span class="op" id="2727178">(</span><span class="op" id="2727179">)</span>&nbsp;<span class="op" id="2727181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2727185">panic</span><span class="op" id="2727190">(</span><span class="string" id="2727191">&#34;reflect.Value.Call:&nbsp;wrong&nbsp;argument&nbsp;count&#34;</span><span class="op" id="2727233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727236">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727239">nout</span>&nbsp;<span class="op" id="2727244">:=</span>&nbsp;<span class="ident" id="2727247">t</span><span class="op" id="2727248">.</span><span class="ident" id="2727249">NumOut</span><span class="op" id="2727255">(</span><span class="op" id="2727256">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2727260">//&nbsp;Compute&nbsp;frame&nbsp;type,&nbsp;allocate&nbsp;a&nbsp;chunk&nbsp;of&nbsp;memory&nbsp;for&nbsp;frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727321">frametype</span><span class="op" id="2727330">,</span>&nbsp;<span class="ident" id="2727332">_</span><span class="op" id="2727333">,</span>&nbsp;<span class="ident" id="2727335">retOffset</span><span class="op" id="2727344">,</span>&nbsp;<span class="ident" id="2727346">_</span>&nbsp;<span class="op" id="2727348">:=</span>&nbsp;<span class="ident" id="2727351">funcLayout</span><span class="op" id="2727361">(</span><span class="ident" id="2727362">t</span><span class="op" id="2727363">,</span>&nbsp;<span class="ident" id="2727365">rcvrtype</span><span class="op" id="2727373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727376">args</span>&nbsp;<span class="op" id="2727381">:=</span>&nbsp;<span class="ident" id="2727384">unsafe_New</span><span class="op" id="2727394">(</span><span class="ident" id="2727395">frametype</span><span class="op" id="2727404">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727407">off</span>&nbsp;<span class="op" id="2727411">:=</span>&nbsp;<span class="builtintype" id="2727414">uintptr</span><span class="op" id="2727421">(</span><span class="num" id="2727422">0</span><span class="op" id="2727423">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2727427">//&nbsp;Copy&nbsp;inputs&nbsp;into&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727454">if</span>&nbsp;<span class="ident" id="2727457">rcvrtype</span>&nbsp;<span class="op" id="2727466">!=</span>&nbsp;<span class="ident" id="2727469">nil</span>&nbsp;<span class="op" id="2727473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727477">storeRcvr</span><span class="op" id="2727486">(</span><span class="ident" id="2727487">rcvr</span><span class="op" id="2727491">,</span>&nbsp;<span class="ident" id="2727493">args</span><span class="op" id="2727497">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727501">off</span>&nbsp;<span class="op" id="2727505">=</span>&nbsp;<span class="ident" id="2727507">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727519">for</span>&nbsp;<span class="ident" id="2727523">i</span><span class="op" id="2727524">,</span>&nbsp;<span class="ident" id="2727526">v</span>&nbsp;<span class="op" id="2727528">:=</span>&nbsp;<span class="keyword" id="2727531">range</span>&nbsp;<span class="ident" id="2727537">in</span>&nbsp;<span class="op" id="2727540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727544">v</span><span class="op" id="2727545">.</span><span class="ident" id="2727546">mustBeExported</span><span class="op" id="2727560">(</span><span class="op" id="2727561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727565">targ</span>&nbsp;<span class="op" id="2727570">:=</span>&nbsp;<span class="ident" id="2727573">t</span><span class="op" id="2727574">.</span><span class="ident" id="2727575">In</span><span class="op" id="2727577">(</span><span class="ident" id="2727578">i</span><span class="op" id="2727579">)</span><span class="op" id="2727580">.</span><span class="op" id="2727581">(</span><span class="op" id="2727582">*</span><span class="ident" id="2727583">rtype</span><span class="op" id="2727588">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727592">a</span>&nbsp;<span class="op" id="2727594">:=</span>&nbsp;<span class="builtintype" id="2727597">uintptr</span><span class="op" id="2727604">(</span><span class="ident" id="2727605">targ</span><span class="op" id="2727609">.</span><span class="ident" id="2727610">align</span><span class="op" id="2727615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727619">off</span>&nbsp;<span class="op" id="2727623">=</span>&nbsp;<span class="op" id="2727625">(</span><span class="ident" id="2727626">off</span>&nbsp;<span class="op" id="2727630">+</span>&nbsp;<span class="ident" id="2727632">a</span>&nbsp;<span class="op" id="2727634">-</span>&nbsp;<span class="num" id="2727636">1</span><span class="op" id="2727637">)</span>&nbsp;<span class="op" id="2727639">&amp;^</span>&nbsp;<span class="op" id="2727642">(</span><span class="ident" id="2727643">a</span>&nbsp;<span class="op" id="2727645">-</span>&nbsp;<span class="num" id="2727647">1</span><span class="op" id="2727648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727652">n</span>&nbsp;<span class="op" id="2727654">:=</span>&nbsp;<span class="ident" id="2727657">targ</span><span class="op" id="2727661">.</span><span class="ident" id="2727662">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727669">addr</span>&nbsp;<span class="op" id="2727674">:=</span>&nbsp;<span class="ident" id="2727677">unsafe</span><span class="op" id="2727683">.</span><span class="ident" id="2727684">Pointer</span><span class="op" id="2727691">(</span><span class="builtintype" id="2727692">uintptr</span><span class="op" id="2727699">(</span><span class="ident" id="2727700">args</span><span class="op" id="2727704">)</span>&nbsp;<span class="op" id="2727706">+</span>&nbsp;<span class="ident" id="2727708">off</span><span class="op" id="2727711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727715">v</span>&nbsp;<span class="op" id="2727717">=</span>&nbsp;<span class="ident" id="2727719">v</span><span class="op" id="2727720">.</span><span class="ident" id="2727721">assignTo</span><span class="op" id="2727729">(</span><span class="string" id="2727730">&#34;reflect.Value.Call&#34;</span><span class="op" id="2727750">,</span>&nbsp;<span class="ident" id="2727752">targ</span><span class="op" id="2727756">,</span>&nbsp;<span class="ident" id="2727758">addr</span><span class="op" id="2727762">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727766">if</span>&nbsp;<span class="ident" id="2727769">v</span><span class="op" id="2727770">.</span><span class="ident" id="2727771">flag</span><span class="op" id="2727775">&amp;</span><span class="ident" id="2727776">flagIndir</span>&nbsp;<span class="op" id="2727786">!=</span>&nbsp;<span class="num" id="2727789">0</span>&nbsp;<span class="op" id="2727791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727796">memmove</span><span class="op" id="2727803">(</span><span class="ident" id="2727804">addr</span><span class="op" id="2727808">,</span>&nbsp;<span class="ident" id="2727810">v</span><span class="op" id="2727811">.</span><span class="ident" id="2727812">ptr</span><span class="op" id="2727815">,</span>&nbsp;<span class="ident" id="2727817">n</span><span class="op" id="2727818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727822">}</span>&nbsp;<span class="keyword" id="2727824">else</span>&nbsp;<span class="op" id="2727829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727834">*</span><span class="op" id="2727835">(</span><span class="op" id="2727836">*</span><span class="ident" id="2727837">unsafe</span><span class="op" id="2727843">.</span><span class="ident" id="2727844">Pointer</span><span class="op" id="2727851">)</span><span class="op" id="2727852">(</span><span class="ident" id="2727853">addr</span><span class="op" id="2727857">)</span>&nbsp;<span class="op" id="2727859">=</span>&nbsp;<span class="ident" id="2727861">v</span><span class="op" id="2727862">.</span><span class="ident" id="2727863">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727869">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727873">off</span>&nbsp;<span class="op" id="2727877">+=</span>&nbsp;<span class="ident" id="2727880">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2727887">//&nbsp;Call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727897">call</span><span class="op" id="2727901">(</span><span class="ident" id="2727902">fn</span><span class="op" id="2727904">,</span>&nbsp;<span class="ident" id="2727906">args</span><span class="op" id="2727910">,</span>&nbsp;<span class="builtintype" id="2727912">uint32</span><span class="op" id="2727918">(</span><span class="ident" id="2727919">frametype</span><span class="op" id="2727928">.</span><span class="ident" id="2727929">size</span><span class="op" id="2727933">)</span><span class="op" id="2727934">,</span>&nbsp;<span class="builtintype" id="2727936">uint32</span><span class="op" id="2727942">(</span><span class="ident" id="2727943">retOffset</span><span class="op" id="2727952">)</span><span class="op" id="2727953">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2727957">//&nbsp;For&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727998">if</span>&nbsp;<span class="ident" id="2728001">callGC</span>&nbsp;<span class="op" id="2728008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728012">runtime</span><span class="op" id="2728019">.</span><span class="ident" id="2728020">GC</span><span class="op" id="2728022">(</span><span class="op" id="2728023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2728026">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2728030">//&nbsp;Copy&nbsp;return&nbsp;values&nbsp;out&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728066">ret</span>&nbsp;<span class="op" id="2728070">:=</span>&nbsp;<span class="builtinfunc" id="2728073">make</span><span class="op" id="2728077">(</span><span class="op" id="2728078">[</span><span class="op" id="2728079">]</span><span class="ident" id="2728080">Value</span><span class="op" id="2728085">,</span>&nbsp;<span class="ident" id="2728087">nout</span><span class="op" id="2728091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728094">off</span>&nbsp;<span class="op" id="2728098">=</span>&nbsp;<span class="ident" id="2728100">retOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2728111">for</span>&nbsp;<span class="ident" id="2728115">i</span>&nbsp;<span class="op" id="2728117">:=</span>&nbsp;<span class="num" id="2728120">0</span><span class="op" id="2728121">;</span>&nbsp;<span class="ident" id="2728123">i</span>&nbsp;<span class="op" id="2728125">&lt;</span>&nbsp;<span class="ident" id="2728127">nout</span><span class="op" id="2728131">;</span>&nbsp;<span class="ident" id="2728133">i</span><span class="op" id="2728134">++</span>&nbsp;<span class="op" id="2728137">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728141">tv</span>&nbsp;<span class="op" id="2728144">:=</span>&nbsp;<span class="ident" id="2728147">t</span><span class="op" id="2728148">.</span><span class="ident" id="2728149">Out</span><span class="op" id="2728152">(</span><span class="ident" id="2728153">i</span><span class="op" id="2728154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728158">a</span>&nbsp;<span class="op" id="2728160">:=</span>&nbsp;<span class="builtintype" id="2728163">uintptr</span><span class="op" id="2728170">(</span><span class="ident" id="2728171">tv</span><span class="op" id="2728173">.</span><span class="ident" id="2728174">Align</span><span class="op" id="2728179">(</span><span class="op" id="2728180">)</span><span class="op" id="2728181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728185">off</span>&nbsp;<span class="op" id="2728189">=</span>&nbsp;<span class="op" id="2728191">(</span><span class="ident" id="2728192">off</span>&nbsp;<span class="op" id="2728196">+</span>&nbsp;<span class="ident" id="2728198">a</span>&nbsp;<span class="op" id="2728200">-</span>&nbsp;<span class="num" id="2728202">1</span><span class="op" id="2728203">)</span>&nbsp;<span class="op" id="2728205">&amp;^</span>&nbsp;<span class="op" id="2728208">(</span><span class="ident" id="2728209">a</span>&nbsp;<span class="op" id="2728211">-</span>&nbsp;<span class="num" id="2728213">1</span><span class="op" id="2728214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728218">fl</span>&nbsp;<span class="op" id="2728221">:=</span>&nbsp;<span class="ident" id="2728224">flagIndir</span>&nbsp;<span class="op" id="2728234">|</span>&nbsp;<span class="ident" id="2728236">flag</span><span class="op" id="2728240">(</span><span class="ident" id="2728241">tv</span><span class="op" id="2728243">.</span><span class="ident" id="2728244">Kind</span><span class="op" id="2728248">(</span><span class="op" id="2728249">)</span><span class="op" id="2728250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728254">ret</span><span class="op" id="2728257">[</span><span class="ident" id="2728258">i</span><span class="op" id="2728259">]</span>&nbsp;<span class="op" id="2728261">=</span>&nbsp;<span class="ident" id="2728263">Value</span><span class="op" id="2728268">{</span><span class="ident" id="2728269">tv</span><span class="op" id="2728271">.</span><span class="ident" id="2728272">common</span><span class="op" id="2728278">(</span><span class="op" id="2728279">)</span><span class="op" id="2728280">,</span>&nbsp;<span class="ident" id="2728282">unsafe</span><span class="op" id="2728288">.</span><span class="ident" id="2728289">Pointer</span><span class="op" id="2728296">(</span><span class="builtintype" id="2728297">uintptr</span><span class="op" id="2728304">(</span><span class="ident" id="2728305">args</span><span class="op" id="2728309">)</span>&nbsp;<span class="op" id="2728311">+</span>&nbsp;<span class="ident" id="2728313">off</span><span class="op" id="2728316">)</span><span class="op" id="2728317">,</span>&nbsp;<span class="ident" id="2728319">fl</span><span class="op" id="2728321">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728325">off</span>&nbsp;<span class="op" id="2728329">+=</span>&nbsp;<span class="ident" id="2728332">tv</span><span class="op" id="2728334">.</span><span class="ident" id="2728335">Size</span><span class="op" id="2728339">(</span><span class="op" id="2728340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2728343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2728347">return</span>&nbsp;<span class="ident" id="2728354">ret</span><br>
<span class="lineno"></span><span class="op" id="2728358">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="2728361">//&nbsp;callReflect&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function</span><br>
<span class="lineno"></span><span class="comment" id="2728422">//&nbsp;returned&nbsp;by&nbsp;MakeFunc.&nbsp;In&nbsp;many&nbsp;ways&nbsp;it&nbsp;is&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2728486">//&nbsp;method&nbsp;Value.call&nbsp;above.&nbsp;The&nbsp;method&nbsp;above&nbsp;converts&nbsp;a&nbsp;call&nbsp;using&nbsp;Values</span><br>
<span class="lineno"></span><span class="comment" id="2728560">//&nbsp;into&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument&nbsp;frame,&nbsp;while</span><br>
<span class="lineno">445</span><span class="comment" id="2728627">//&nbsp;callReflect&nbsp;converts&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument</span><br>
<span class="lineno"></span><span class="comment" id="2728697">//&nbsp;frame&nbsp;into&nbsp;a&nbsp;call&nbsp;using&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2728732">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;call&nbsp;method&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2728803">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;MakeFunc&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2728870">//</span><br>
<span class="lineno">450</span><span class="comment" id="2728873">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno"></span><span class="comment" id="2728949">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2729021">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callReflect&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2729093">func</span>&nbsp;<span class="ident" id="2729098">callReflect</span><span class="op" id="2729109">(</span><span class="ident" id="2729110">ctxt</span>&nbsp;<span class="op" id="2729115">*</span><span class="ident" id="2729116">makeFuncImpl</span><span class="op" id="2729128">,</span>&nbsp;<span class="ident" id="2729130">frame</span>&nbsp;<span class="ident" id="2729136">unsafe</span><span class="op" id="2729142">.</span><span class="ident" id="2729143">Pointer</span><span class="op" id="2729150">)</span>&nbsp;<span class="op" id="2729152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729155">ftyp</span>&nbsp;<span class="op" id="2729160">:=</span>&nbsp;<span class="ident" id="2729163">ctxt</span><span class="op" id="2729167">.</span><span class="ident" id="2729168">typ</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729173">f</span>&nbsp;<span class="op" id="2729175">:=</span>&nbsp;<span class="ident" id="2729178">ctxt</span><span class="op" id="2729182">.</span><span class="ident" id="2729183">fn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2729188">//&nbsp;Copy&nbsp;argument&nbsp;frame&nbsp;into&nbsp;Values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729225">ptr</span>&nbsp;<span class="op" id="2729229">:=</span>&nbsp;<span class="ident" id="2729232">frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729239">off</span>&nbsp;<span class="op" id="2729243">:=</span>&nbsp;<span class="builtintype" id="2729246">uintptr</span><span class="op" id="2729253">(</span><span class="num" id="2729254">0</span><span class="op" id="2729255">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729258">in</span>&nbsp;<span class="op" id="2729261">:=</span>&nbsp;<span class="builtinfunc" id="2729264">make</span><span class="op" id="2729268">(</span><span class="op" id="2729269">[</span><span class="op" id="2729270">]</span><span class="ident" id="2729271">Value</span><span class="op" id="2729276">,</span>&nbsp;<span class="num" id="2729278">0</span><span class="op" id="2729279">,</span>&nbsp;<span class="builtinfunc" id="2729281">len</span><span class="op" id="2729284">(</span><span class="ident" id="2729285">ftyp</span><span class="op" id="2729289">.</span><span class="ident" id="2729290">in</span><span class="op" id="2729292">)</span><span class="op" id="2729293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2729296">for</span>&nbsp;<span class="ident" id="2729300">_</span><span class="op" id="2729301">,</span>&nbsp;<span class="ident" id="2729303">arg</span>&nbsp;<span class="op" id="2729307">:=</span>&nbsp;<span class="keyword" id="2729310">range</span>&nbsp;<span class="ident" id="2729316">ftyp</span><span class="op" id="2729320">.</span><span class="ident" id="2729321">in</span>&nbsp;<span class="op" id="2729324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729328">typ</span>&nbsp;<span class="op" id="2729332">:=</span>&nbsp;<span class="ident" id="2729335">arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729341">off</span>&nbsp;<span class="op" id="2729345">+=</span>&nbsp;<span class="op" id="2729348">-</span><span class="ident" id="2729349">off</span>&nbsp;<span class="op" id="2729353">&amp;</span>&nbsp;<span class="builtintype" id="2729355">uintptr</span><span class="op" id="2729362">(</span><span class="ident" id="2729363">typ</span><span class="op" id="2729366">.</span><span class="ident" id="2729367">align</span><span class="op" id="2729372">-</span><span class="num" id="2729373">1</span><span class="op" id="2729374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729378">addr</span>&nbsp;<span class="op" id="2729383">:=</span>&nbsp;<span class="ident" id="2729386">unsafe</span><span class="op" id="2729392">.</span><span class="ident" id="2729393">Pointer</span><span class="op" id="2729400">(</span><span class="builtintype" id="2729401">uintptr</span><span class="op" id="2729408">(</span><span class="ident" id="2729409">ptr</span><span class="op" id="2729412">)</span>&nbsp;<span class="op" id="2729414">+</span>&nbsp;<span class="ident" id="2729416">off</span><span class="op" id="2729419">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729423">v</span>&nbsp;<span class="op" id="2729425">:=</span>&nbsp;<span class="ident" id="2729428">Value</span><span class="op" id="2729433">{</span><span class="ident" id="2729434">typ</span><span class="op" id="2729437">,</span>&nbsp;<span class="ident" id="2729439">nil</span><span class="op" id="2729442">,</span>&nbsp;<span class="ident" id="2729444">flag</span><span class="op" id="2729448">(</span><span class="ident" id="2729449">typ</span><span class="op" id="2729452">.</span><span class="ident" id="2729453">Kind</span><span class="op" id="2729457">(</span><span class="op" id="2729458">)</span><span class="op" id="2729459">)</span><span class="op" id="2729460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2729464">if</span>&nbsp;<span class="ident" id="2729467">ifaceIndir</span><span class="op" id="2729477">(</span><span class="ident" id="2729478">typ</span><span class="op" id="2729481">)</span>&nbsp;<span class="op" id="2729483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2729488">//&nbsp;value&nbsp;cannot&nbsp;be&nbsp;inlined&nbsp;in&nbsp;interface&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2729537">//&nbsp;Must&nbsp;make&nbsp;a&nbsp;copy,&nbsp;because&nbsp;f&nbsp;might&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;it,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2729601">//&nbsp;and&nbsp;we&nbsp;cannot&nbsp;let&nbsp;f&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;stack&nbsp;frame</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2729663">//&nbsp;after&nbsp;this&nbsp;function&nbsp;returns,&nbsp;not&nbsp;even&nbsp;a&nbsp;read-only&nbsp;reference.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729730">v</span><span class="op" id="2729731">.</span><span class="ident" id="2729732">ptr</span>&nbsp;<span class="op" id="2729736">=</span>&nbsp;<span class="ident" id="2729738">unsafe_New</span><span class="op" id="2729748">(</span><span class="ident" id="2729749">typ</span><span class="op" id="2729752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729757">memmove</span><span class="op" id="2729764">(</span><span class="ident" id="2729765">v</span><span class="op" id="2729766">.</span><span class="ident" id="2729767">ptr</span><span class="op" id="2729770">,</span>&nbsp;<span class="ident" id="2729772">addr</span><span class="op" id="2729776">,</span>&nbsp;<span class="ident" id="2729778">typ</span><span class="op" id="2729781">.</span><span class="ident" id="2729782">size</span><span class="op" id="2729786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729791">v</span><span class="op" id="2729792">.</span><span class="ident" id="2729793">flag</span>&nbsp;<span class="op" id="2729798">|=</span>&nbsp;<span class="ident" id="2729801">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2729813">}</span>&nbsp;<span class="keyword" id="2729815">else</span>&nbsp;<span class="op" id="2729820">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729825">v</span><span class="op" id="2729826">.</span><span class="ident" id="2729827">ptr</span>&nbsp;<span class="op" id="2729831">=</span>&nbsp;<span class="op" id="2729833">*</span><span class="op" id="2729834">(</span><span class="op" id="2729835">*</span><span class="ident" id="2729836">unsafe</span><span class="op" id="2729842">.</span><span class="ident" id="2729843">Pointer</span><span class="op" id="2729850">)</span><span class="op" id="2729851">(</span><span class="ident" id="2729852">addr</span><span class="op" id="2729856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2729860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729864">in</span>&nbsp;<span class="op" id="2729867">=</span>&nbsp;<span class="builtinfunc" id="2729869">append</span><span class="op" id="2729875">(</span><span class="ident" id="2729876">in</span><span class="op" id="2729878">,</span>&nbsp;<span class="ident" id="2729880">v</span><span class="op" id="2729881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729885">off</span>&nbsp;<span class="op" id="2729889">+=</span>&nbsp;<span class="ident" id="2729892">typ</span><span class="op" id="2729895">.</span><span class="ident" id="2729896">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2729902">}</span><br>
<span class="lineno">480</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2729906">//&nbsp;Call&nbsp;underlying&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729936">out</span>&nbsp;<span class="op" id="2729940">:=</span>&nbsp;<span class="ident" id="2729943">f</span><span class="op" id="2729944">(</span><span class="ident" id="2729945">in</span><span class="op" id="2729947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2729950">if</span>&nbsp;<span class="builtinfunc" id="2729953">len</span><span class="op" id="2729956">(</span><span class="ident" id="2729957">out</span><span class="op" id="2729960">)</span>&nbsp;<span class="op" id="2729962">!=</span>&nbsp;<span class="builtinfunc" id="2729965">len</span><span class="op" id="2729968">(</span><span class="ident" id="2729969">ftyp</span><span class="op" id="2729973">.</span><span class="ident" id="2729974">out</span><span class="op" id="2729977">)</span>&nbsp;<span class="op" id="2729979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2729983">panic</span><span class="op" id="2729988">(</span><span class="string" id="2729989">&#34;reflect:&nbsp;wrong&nbsp;return&nbsp;count&nbsp;from&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&#34;</span><span class="op" id="2730052">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2730055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2730059">//&nbsp;Copy&nbsp;results&nbsp;back&nbsp;into&nbsp;argument&nbsp;frame.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2730102">if</span>&nbsp;<span class="builtinfunc" id="2730105">len</span><span class="op" id="2730108">(</span><span class="ident" id="2730109">ftyp</span><span class="op" id="2730113">.</span><span class="ident" id="2730114">out</span><span class="op" id="2730117">)</span>&nbsp;<span class="op" id="2730119">&gt;</span>&nbsp;<span class="num" id="2730121">0</span>&nbsp;<span class="op" id="2730123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2730127">off</span>&nbsp;<span class="op" id="2730131">+=</span>&nbsp;<span class="op" id="2730134">-</span><span class="ident" id="2730135">off</span>&nbsp;<span class="op" id="2730139">&amp;</span>&nbsp;<span class="op" id="2730141">(</span><span class="ident" id="2730142">ptrSize</span>&nbsp;<span class="op" id="2730150">-</span>&nbsp;<span class="num" id="2730152">1</span><span class="op" id="2730153">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2730157">if</span>&nbsp;<span class="ident" id="2730160">runtime</span><span class="op" id="2730167">.</span><span class="ident" id="2730168">GOARCH</span>&nbsp;<span class="op" id="2730175">==</span>&nbsp;<span class="string" id="2730178">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2730189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2730194">off</span>&nbsp;<span class="op" id="2730198">=</span>&nbsp;<span class="ident" id="2730200">align</span><span class="op" id="2730205">(</span><span class="ident" id="2730206">off</span><span class="op" id="2730209">,</span>&nbsp;<span class="num" id="2730211">8</span><span class="op" id="2730212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2730216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2730220">for</span>&nbsp;<span class="ident" id="2730224">i</span><span class="op" id="2730225">,</span>&nbsp;<span class="ident" id="2730227">arg</span>&nbsp;<span class="op" id="2730231">:=</span>&nbsp;<span class="keyword" id="2730234">range</span>&nbsp;<span class="ident" id="2730240">ftyp</span><span class="op" id="2730244">.</span><span class="ident" id="2730245">out</span>&nbsp;<span class="op" id="2730249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2730254">typ</span>&nbsp;<span class="op" id="2730258">:=</span>&nbsp;<span class="ident" id="2730261">arg</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2730268">v</span>&nbsp;<span class="op" id="2730270">:=</span>&nbsp;<span class="ident" id="2730273">out</span><span class="op" id="2730276">[</span><span class="ident" id="2730277">i</span><span class="op" id="2730278">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2730283">if</span>&nbsp;<span class="ident" id="2730286">v</span><span class="op" id="2730287">.</span><span class="ident" id="2730288">typ</span>&nbsp;<span class="op" id="2730292">!=</span>&nbsp;<span class="ident" id="2730295">typ</span>&nbsp;<span class="op" id="2730299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2730305">panic</span><span class="op" id="2730310">(</span><span class="string" id="2730311">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2730358">+</span>&nbsp;<span class="ident" id="2730360">funcName</span><span class="op" id="2730368">(</span><span class="ident" id="2730369">f</span><span class="op" id="2730370">)</span>&nbsp;<span class="op" id="2730372">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2730379">&#34;&nbsp;returned&nbsp;wrong&nbsp;type:&nbsp;have&nbsp;&#34;</span>&nbsp;<span class="op" id="2730409">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2730416">out</span><span class="op" id="2730419">[</span><span class="ident" id="2730420">i</span><span class="op" id="2730421">]</span><span class="op" id="2730422">.</span><span class="ident" id="2730423">typ</span><span class="op" id="2730426">.</span><span class="ident" id="2730427">String</span><span class="op" id="2730433">(</span><span class="op" id="2730434">)</span>&nbsp;<span class="op" id="2730436">+</span>&nbsp;<span class="string" id="2730438">&#34;&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2730446">+</span>&nbsp;<span class="ident" id="2730448">typ</span><span class="op" id="2730451">.</span><span class="ident" id="2730452">String</span><span class="op" id="2730458">(</span><span class="op" id="2730459">)</span><span class="op" id="2730460">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2730465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2730470">if</span>&nbsp;<span class="ident" id="2730473">v</span><span class="op" id="2730474">.</span><span class="ident" id="2730475">flag</span><span class="op" id="2730479">&amp;</span><span class="ident" id="2730480">flagRO</span>&nbsp;<span class="op" id="2730487">!=</span>&nbsp;<span class="num" id="2730490">0</span>&nbsp;<span class="op" id="2730492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2730498">panic</span><span class="op" id="2730503">(</span><span class="string" id="2730504">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2730551">+</span>&nbsp;<span class="ident" id="2730553">funcName</span><span class="op" id="2730561">(</span><span class="ident" id="2730562">f</span><span class="op" id="2730563">)</span>&nbsp;<span class="op" id="2730565">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2730572">&#34;&nbsp;returned&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2730620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2730625">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2730630">off</span>&nbsp;<span class="op" id="2730634">+=</span>&nbsp;<span class="op" id="2730637">-</span><span class="ident" id="2730638">off</span>&nbsp;<span class="op" id="2730642">&amp;</span>&nbsp;<span class="builtintype" id="2730644">uintptr</span><span class="op" id="2730651">(</span><span class="ident" id="2730652">typ</span><span class="op" id="2730655">.</span><span class="ident" id="2730656">align</span><span class="op" id="2730661">-</span><span class="num" id="2730662">1</span><span class="op" id="2730663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2730668">addr</span>&nbsp;<span class="op" id="2730673">:=</span>&nbsp;<span class="ident" id="2730676">unsafe</span><span class="op" id="2730682">.</span><span class="ident" id="2730683">Pointer</span><span class="op" id="2730690">(</span><span class="builtintype" id="2730691">uintptr</span><span class="op" id="2730698">(</span><span class="ident" id="2730699">ptr</span><span class="op" id="2730702">)</span>&nbsp;<span class="op" id="2730704">+</span>&nbsp;<span class="ident" id="2730706">off</span><span class="op" id="2730709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2730714">if</span>&nbsp;<span class="ident" id="2730717">v</span><span class="op" id="2730718">.</span><span class="ident" id="2730719">flag</span><span class="op" id="2730723">&amp;</span><span class="ident" id="2730724">flagIndir</span>&nbsp;<span class="op" id="2730734">!=</span>&nbsp;<span class="num" id="2730737">0</span>&nbsp;<span class="op" id="2730739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2730745">memmove</span><span class="op" id="2730752">(</span><span class="ident" id="2730753">addr</span><span class="op" id="2730757">,</span>&nbsp;<span class="ident" id="2730759">v</span><span class="op" id="2730760">.</span><span class="ident" id="2730761">ptr</span><span class="op" id="2730764">,</span>&nbsp;<span class="ident" id="2730766">typ</span><span class="op" id="2730769">.</span><span class="ident" id="2730770">size</span><span class="op" id="2730774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2730779">}</span>&nbsp;<span class="keyword" id="2730781">else</span>&nbsp;<span class="op" id="2730786">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2730792">*</span><span class="op" id="2730793">(</span><span class="op" id="2730794">*</span><span class="ident" id="2730795">unsafe</span><span class="op" id="2730801">.</span><span class="ident" id="2730802">Pointer</span><span class="op" id="2730809">)</span><span class="op" id="2730810">(</span><span class="ident" id="2730811">addr</span><span class="op" id="2730815">)</span>&nbsp;<span class="op" id="2730817">=</span>&nbsp;<span class="ident" id="2730819">v</span><span class="op" id="2730820">.</span><span class="ident" id="2730821">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2730828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2730833">off</span>&nbsp;<span class="op" id="2730837">+=</span>&nbsp;<span class="ident" id="2730840">typ</span><span class="op" id="2730843">.</span><span class="ident" id="2730844">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2730851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2730854">}</span><br>
<span class="lineno">515</span><span class="op" id="2730856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2730859">//&nbsp;methodReceiver&nbsp;returns&nbsp;information&nbsp;about&nbsp;the&nbsp;receiver</span><br>
<span class="lineno"></span><span class="comment" id="2730916">//&nbsp;described&nbsp;by&nbsp;v.&nbsp;The&nbsp;Value&nbsp;v&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2730971">//&nbsp;flagMethod&nbsp;bit&nbsp;set,&nbsp;so&nbsp;the&nbsp;kind&nbsp;cached&nbsp;in&nbsp;v.flag&nbsp;should</span><br>
<span class="lineno">520</span><span class="comment" id="2731030">//&nbsp;not&nbsp;be&nbsp;used.</span><br>
<span class="lineno"></span><span class="comment" id="2731046">//&nbsp;The&nbsp;return&nbsp;value&nbsp;rcvrtype&nbsp;gives&nbsp;the&nbsp;method&#39;s&nbsp;actual&nbsp;receiver&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2731116">//&nbsp;The&nbsp;return&nbsp;value&nbsp;t&nbsp;gives&nbsp;the&nbsp;method&nbsp;type&nbsp;signature&nbsp;(without&nbsp;the&nbsp;receiver).</span><br>
<span class="lineno"></span><span class="comment" id="2731194">//&nbsp;The&nbsp;return&nbsp;value&nbsp;fn&nbsp;is&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;method&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="2731250">func</span>&nbsp;<span class="ident" id="2731255">methodReceiver</span><span class="op" id="2731269">(</span><span class="ident" id="2731270">op</span>&nbsp;<span class="builtintype" id="2731273">string</span><span class="op" id="2731279">,</span>&nbsp;<span class="ident" id="2731281">v</span>&nbsp;<span class="ident" id="2731283">Value</span><span class="op" id="2731288">,</span>&nbsp;<span class="ident" id="2731290">methodIndex</span>&nbsp;<span class="builtintype" id="2731302">int</span><span class="op" id="2731305">)</span>&nbsp;<span class="op" id="2731307">(</span><span class="ident" id="2731308">rcvrtype</span><span class="op" id="2731316">,</span>&nbsp;<span class="ident" id="2731318">t</span>&nbsp;<span class="op" id="2731320">*</span><span class="ident" id="2731321">rtype</span><span class="op" id="2731326">,</span>&nbsp;<span class="ident" id="2731328">fn</span>&nbsp;<span class="ident" id="2731331">unsafe</span><span class="op" id="2731337">.</span><span class="ident" id="2731338">Pointer</span><span class="op" id="2731345">)</span>&nbsp;<span class="op" id="2731347">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731350">i</span>&nbsp;<span class="op" id="2731352">:=</span>&nbsp;<span class="ident" id="2731355">methodIndex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2731368">if</span>&nbsp;<span class="ident" id="2731371">v</span><span class="op" id="2731372">.</span><span class="ident" id="2731373">typ</span><span class="op" id="2731376">.</span><span class="ident" id="2731377">Kind</span><span class="op" id="2731381">(</span><span class="op" id="2731382">)</span>&nbsp;<span class="op" id="2731384">==</span>&nbsp;<span class="ident" id="2731387">Interface</span>&nbsp;<span class="op" id="2731397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731401">tt</span>&nbsp;<span class="op" id="2731404">:=</span>&nbsp;<span class="op" id="2731407">(</span><span class="op" id="2731408">*</span><span class="ident" id="2731409">interfaceType</span><span class="op" id="2731422">)</span><span class="op" id="2731423">(</span><span class="ident" id="2731424">unsafe</span><span class="op" id="2731430">.</span><span class="ident" id="2731431">Pointer</span><span class="op" id="2731438">(</span><span class="ident" id="2731439">v</span><span class="op" id="2731440">.</span><span class="ident" id="2731441">typ</span><span class="op" id="2731444">)</span><span class="op" id="2731445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2731449">if</span>&nbsp;<span class="builtintype" id="2731452">uint</span><span class="op" id="2731456">(</span><span class="ident" id="2731457">i</span><span class="op" id="2731458">)</span>&nbsp;<span class="op" id="2731460">&gt;=</span>&nbsp;<span class="builtintype" id="2731463">uint</span><span class="op" id="2731467">(</span><span class="builtinfunc" id="2731468">len</span><span class="op" id="2731471">(</span><span class="ident" id="2731472">tt</span><span class="op" id="2731474">.</span><span class="ident" id="2731475">methods</span><span class="op" id="2731482">)</span><span class="op" id="2731483">)</span>&nbsp;<span class="op" id="2731485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2731490">panic</span><span class="op" id="2731495">(</span><span class="string" id="2731496">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2731543">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2731547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731551">m</span>&nbsp;<span class="op" id="2731553">:=</span>&nbsp;<span class="op" id="2731556">&amp;</span><span class="ident" id="2731557">tt</span><span class="op" id="2731559">.</span><span class="ident" id="2731560">methods</span><span class="op" id="2731567">[</span><span class="ident" id="2731568">i</span><span class="op" id="2731569">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2731573">if</span>&nbsp;<span class="ident" id="2731576">m</span><span class="op" id="2731577">.</span><span class="ident" id="2731578">pkgPath</span>&nbsp;<span class="op" id="2731586">!=</span>&nbsp;<span class="ident" id="2731589">nil</span>&nbsp;<span class="op" id="2731593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2731598">panic</span><span class="op" id="2731603">(</span><span class="string" id="2731604">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2731616">+</span>&nbsp;<span class="ident" id="2731618">op</span>&nbsp;<span class="op" id="2731621">+</span>&nbsp;<span class="string" id="2731623">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2731646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2731650">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731654">iface</span>&nbsp;<span class="op" id="2731660">:=</span>&nbsp;<span class="op" id="2731663">(</span><span class="op" id="2731664">*</span><span class="ident" id="2731665">nonEmptyInterface</span><span class="op" id="2731682">)</span><span class="op" id="2731683">(</span><span class="ident" id="2731684">v</span><span class="op" id="2731685">.</span><span class="ident" id="2731686">ptr</span><span class="op" id="2731689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2731693">if</span>&nbsp;<span class="ident" id="2731696">iface</span><span class="op" id="2731701">.</span><span class="ident" id="2731702">itab</span>&nbsp;<span class="op" id="2731707">==</span>&nbsp;<span class="ident" id="2731710">nil</span>&nbsp;<span class="op" id="2731714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2731719">panic</span><span class="op" id="2731724">(</span><span class="string" id="2731725">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2731737">+</span>&nbsp;<span class="ident" id="2731739">op</span>&nbsp;<span class="op" id="2731742">+</span>&nbsp;<span class="string" id="2731744">&#34;&nbsp;of&nbsp;method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2731779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2731783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731787">rcvrtype</span>&nbsp;<span class="op" id="2731796">=</span>&nbsp;<span class="ident" id="2731798">iface</span><span class="op" id="2731803">.</span><span class="ident" id="2731804">itab</span><span class="op" id="2731808">.</span><span class="ident" id="2731809">typ</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731815">fn</span>&nbsp;<span class="op" id="2731818">=</span>&nbsp;<span class="ident" id="2731820">unsafe</span><span class="op" id="2731826">.</span><span class="ident" id="2731827">Pointer</span><span class="op" id="2731834">(</span><span class="op" id="2731835">&amp;</span><span class="ident" id="2731836">iface</span><span class="op" id="2731841">.</span><span class="ident" id="2731842">itab</span><span class="op" id="2731846">.</span><span class="ident" id="2731847">fun</span><span class="op" id="2731850">[</span><span class="ident" id="2731851">i</span><span class="op" id="2731852">]</span><span class="op" id="2731853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731857">t</span>&nbsp;<span class="op" id="2731859">=</span>&nbsp;<span class="ident" id="2731861">m</span><span class="op" id="2731862">.</span><span class="ident" id="2731863">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2731868">}</span>&nbsp;<span class="keyword" id="2731870">else</span>&nbsp;<span class="op" id="2731875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731879">rcvrtype</span>&nbsp;<span class="op" id="2731888">=</span>&nbsp;<span class="ident" id="2731890">v</span><span class="op" id="2731891">.</span><span class="ident" id="2731892">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731898">ut</span>&nbsp;<span class="op" id="2731901">:=</span>&nbsp;<span class="ident" id="2731904">v</span><span class="op" id="2731905">.</span><span class="ident" id="2731906">typ</span><span class="op" id="2731909">.</span><span class="ident" id="2731910">uncommon</span><span class="op" id="2731918">(</span><span class="op" id="2731919">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2731923">if</span>&nbsp;<span class="ident" id="2731926">ut</span>&nbsp;<span class="op" id="2731929">==</span>&nbsp;<span class="ident" id="2731932">nil</span>&nbsp;<span class="op" id="2731936">||</span>&nbsp;<span class="builtintype" id="2731939">uint</span><span class="op" id="2731943">(</span><span class="ident" id="2731944">i</span><span class="op" id="2731945">)</span>&nbsp;<span class="op" id="2731947">&gt;=</span>&nbsp;<span class="builtintype" id="2731950">uint</span><span class="op" id="2731954">(</span><span class="builtinfunc" id="2731955">len</span><span class="op" id="2731958">(</span><span class="ident" id="2731959">ut</span><span class="op" id="2731961">.</span><span class="ident" id="2731962">methods</span><span class="op" id="2731969">)</span><span class="op" id="2731970">)</span>&nbsp;<span class="op" id="2731972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2731977">panic</span><span class="op" id="2731982">(</span><span class="string" id="2731983">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2732030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732038">m</span>&nbsp;<span class="op" id="2732040">:=</span>&nbsp;<span class="op" id="2732043">&amp;</span><span class="ident" id="2732044">ut</span><span class="op" id="2732046">.</span><span class="ident" id="2732047">methods</span><span class="op" id="2732054">[</span><span class="ident" id="2732055">i</span><span class="op" id="2732056">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2732060">if</span>&nbsp;<span class="ident" id="2732063">m</span><span class="op" id="2732064">.</span><span class="ident" id="2732065">pkgPath</span>&nbsp;<span class="op" id="2732073">!=</span>&nbsp;<span class="ident" id="2732076">nil</span>&nbsp;<span class="op" id="2732080">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2732085">panic</span><span class="op" id="2732090">(</span><span class="string" id="2732091">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2732103">+</span>&nbsp;<span class="ident" id="2732105">op</span>&nbsp;<span class="op" id="2732108">+</span>&nbsp;<span class="string" id="2732110">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2732133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732141">fn</span>&nbsp;<span class="op" id="2732144">=</span>&nbsp;<span class="ident" id="2732146">unsafe</span><span class="op" id="2732152">.</span><span class="ident" id="2732153">Pointer</span><span class="op" id="2732160">(</span><span class="op" id="2732161">&amp;</span><span class="ident" id="2732162">m</span><span class="op" id="2732163">.</span><span class="ident" id="2732164">ifn</span><span class="op" id="2732167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732171">t</span>&nbsp;<span class="op" id="2732173">=</span>&nbsp;<span class="ident" id="2732175">m</span><span class="op" id="2732176">.</span><span class="ident" id="2732177">mtyp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732183">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2732186">return</span><br>
<span class="lineno"></span><span class="op" id="2732193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2732196">//&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;receiver.&nbsp;&nbsp;Store&nbsp;at&nbsp;p&nbsp;the&nbsp;word&nbsp;which&nbsp;is&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2732261">//&nbsp;encode&nbsp;that&nbsp;receiver&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;argument&nbsp;list.</span><br>
<span class="lineno">560</span><span class="comment" id="2732320">//&nbsp;Reflect&nbsp;uses&nbsp;the&nbsp;&#34;interface&#34;&nbsp;calling&nbsp;convention&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2732375">//&nbsp;methods,&nbsp;which&nbsp;always&nbsp;uses&nbsp;one&nbsp;word&nbsp;to&nbsp;record&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2732438">func</span>&nbsp;<span class="ident" id="2732443">storeRcvr</span><span class="op" id="2732452">(</span><span class="ident" id="2732453">v</span>&nbsp;<span class="ident" id="2732455">Value</span><span class="op" id="2732460">,</span>&nbsp;<span class="ident" id="2732462">p</span>&nbsp;<span class="ident" id="2732464">unsafe</span><span class="op" id="2732470">.</span><span class="ident" id="2732471">Pointer</span><span class="op" id="2732478">)</span>&nbsp;<span class="op" id="2732480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732483">t</span>&nbsp;<span class="op" id="2732485">:=</span>&nbsp;<span class="ident" id="2732488">v</span><span class="op" id="2732489">.</span><span class="ident" id="2732490">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2732495">if</span>&nbsp;<span class="ident" id="2732498">t</span><span class="op" id="2732499">.</span><span class="ident" id="2732500">Kind</span><span class="op" id="2732504">(</span><span class="op" id="2732505">)</span>&nbsp;<span class="op" id="2732507">==</span>&nbsp;<span class="ident" id="2732510">Interface</span>&nbsp;<span class="op" id="2732520">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2732524">//&nbsp;the&nbsp;interface&nbsp;data&nbsp;word&nbsp;becomes&nbsp;the&nbsp;receiver&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732579">iface</span>&nbsp;<span class="op" id="2732585">:=</span>&nbsp;<span class="op" id="2732588">(</span><span class="op" id="2732589">*</span><span class="ident" id="2732590">nonEmptyInterface</span><span class="op" id="2732607">)</span><span class="op" id="2732608">(</span><span class="ident" id="2732609">v</span><span class="op" id="2732610">.</span><span class="ident" id="2732611">ptr</span><span class="op" id="2732614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732618">*</span><span class="op" id="2732619">(</span><span class="op" id="2732620">*</span><span class="ident" id="2732621">unsafe</span><span class="op" id="2732627">.</span><span class="ident" id="2732628">Pointer</span><span class="op" id="2732635">)</span><span class="op" id="2732636">(</span><span class="ident" id="2732637">p</span><span class="op" id="2732638">)</span>&nbsp;<span class="op" id="2732640">=</span>&nbsp;<span class="ident" id="2732642">unsafe</span><span class="op" id="2732648">.</span><span class="ident" id="2732649">Pointer</span><span class="op" id="2732656">(</span><span class="ident" id="2732657">iface</span><span class="op" id="2732662">.</span><span class="ident" id="2732663">word</span><span class="op" id="2732667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732670">}</span>&nbsp;<span class="keyword" id="2732672">else</span>&nbsp;<span class="keyword" id="2732677">if</span>&nbsp;<span class="ident" id="2732680">v</span><span class="op" id="2732681">.</span><span class="ident" id="2732682">flag</span><span class="op" id="2732686">&amp;</span><span class="ident" id="2732687">flagIndir</span>&nbsp;<span class="op" id="2732697">!=</span>&nbsp;<span class="num" id="2732700">0</span>&nbsp;<span class="op" id="2732702">&amp;&amp;</span>&nbsp;<span class="op" id="2732705">!</span><span class="ident" id="2732706">ifaceIndir</span><span class="op" id="2732716">(</span><span class="ident" id="2732717">t</span><span class="op" id="2732718">)</span>&nbsp;<span class="op" id="2732720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732724">*</span><span class="op" id="2732725">(</span><span class="op" id="2732726">*</span><span class="ident" id="2732727">unsafe</span><span class="op" id="2732733">.</span><span class="ident" id="2732734">Pointer</span><span class="op" id="2732741">)</span><span class="op" id="2732742">(</span><span class="ident" id="2732743">p</span><span class="op" id="2732744">)</span>&nbsp;<span class="op" id="2732746">=</span>&nbsp;<span class="op" id="2732748">*</span><span class="op" id="2732749">(</span><span class="op" id="2732750">*</span><span class="ident" id="2732751">unsafe</span><span class="op" id="2732757">.</span><span class="ident" id="2732758">Pointer</span><span class="op" id="2732765">)</span><span class="op" id="2732766">(</span><span class="ident" id="2732767">v</span><span class="op" id="2732768">.</span><span class="ident" id="2732769">ptr</span><span class="op" id="2732772">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732775">}</span>&nbsp;<span class="keyword" id="2732777">else</span>&nbsp;<span class="op" id="2732782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732786">*</span><span class="op" id="2732787">(</span><span class="op" id="2732788">*</span><span class="ident" id="2732789">unsafe</span><span class="op" id="2732795">.</span><span class="ident" id="2732796">Pointer</span><span class="op" id="2732803">)</span><span class="op" id="2732804">(</span><span class="ident" id="2732805">p</span><span class="op" id="2732806">)</span>&nbsp;<span class="op" id="2732808">=</span>&nbsp;<span class="ident" id="2732810">v</span><span class="op" id="2732811">.</span><span class="ident" id="2732812">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732817">}</span><br>
<span class="lineno"></span><span class="op" id="2732819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="2732822">//&nbsp;align&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;x&nbsp;up&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2732887">//&nbsp;n&nbsp;must&nbsp;be&nbsp;a&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="keyword" id="2732916">func</span>&nbsp;<span class="ident" id="2732921">align</span><span class="op" id="2732926">(</span><span class="ident" id="2732927">x</span><span class="op" id="2732928">,</span>&nbsp;<span class="ident" id="2732930">n</span>&nbsp;<span class="builtintype" id="2732932">uintptr</span><span class="op" id="2732939">)</span>&nbsp;<span class="builtintype" id="2732941">uintptr</span>&nbsp;<span class="op" id="2732949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2732952">return</span>&nbsp;<span class="op" id="2732959">(</span><span class="ident" id="2732960">x</span>&nbsp;<span class="op" id="2732962">+</span>&nbsp;<span class="ident" id="2732964">n</span>&nbsp;<span class="op" id="2732966">-</span>&nbsp;<span class="num" id="2732968">1</span><span class="op" id="2732969">)</span>&nbsp;<span class="op" id="2732971">&amp;^</span>&nbsp;<span class="op" id="2732974">(</span><span class="ident" id="2732975">n</span>&nbsp;<span class="op" id="2732977">-</span>&nbsp;<span class="num" id="2732979">1</span><span class="op" id="2732980">)</span><br>
<span class="lineno"></span><span class="op" id="2732982">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span><span class="comment" id="2732985">//&nbsp;callMethod&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2733054">//&nbsp;by&nbsp;makeMethodValue&nbsp;(used&nbsp;by&nbsp;v.Method(i).Interface()).</span><br>
<span class="lineno"></span><span class="comment" id="2733111">//&nbsp;It&nbsp;is&nbsp;a&nbsp;streamlined&nbsp;version&nbsp;of&nbsp;the&nbsp;usual&nbsp;reflect&nbsp;call:&nbsp;the&nbsp;caller&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="2733184">//&nbsp;already&nbsp;laid&nbsp;out&nbsp;the&nbsp;argument&nbsp;frame&nbsp;for&nbsp;us,&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;have</span><br>
<span class="lineno">585</span><span class="comment" id="2733248">//&nbsp;to&nbsp;deal&nbsp;with&nbsp;individual&nbsp;Values&nbsp;for&nbsp;each&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2733301">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;two&nbsp;similar&nbsp;functions&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2733382">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;makeMethodValue&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2733456">//</span><br>
<span class="lineno"></span><span class="comment" id="2733459">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno">590</span><span class="comment" id="2733535">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2733607">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callMethod&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2733678">func</span>&nbsp;<span class="ident" id="2733683">callMethod</span><span class="op" id="2733693">(</span><span class="ident" id="2733694">ctxt</span>&nbsp;<span class="op" id="2733699">*</span><span class="ident" id="2733700">methodValue</span><span class="op" id="2733711">,</span>&nbsp;<span class="ident" id="2733713">frame</span>&nbsp;<span class="ident" id="2733719">unsafe</span><span class="op" id="2733725">.</span><span class="ident" id="2733726">Pointer</span><span class="op" id="2733733">)</span>&nbsp;<span class="op" id="2733735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733738">rcvr</span>&nbsp;<span class="op" id="2733743">:=</span>&nbsp;<span class="ident" id="2733746">ctxt</span><span class="op" id="2733750">.</span><span class="ident" id="2733751">rcvr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733757">rcvrtype</span><span class="op" id="2733765">,</span>&nbsp;<span class="ident" id="2733767">t</span><span class="op" id="2733768">,</span>&nbsp;<span class="ident" id="2733770">fn</span>&nbsp;<span class="op" id="2733773">:=</span>&nbsp;<span class="ident" id="2733776">methodReceiver</span><span class="op" id="2733790">(</span><span class="string" id="2733791">&#34;call&#34;</span><span class="op" id="2733797">,</span>&nbsp;<span class="ident" id="2733799">rcvr</span><span class="op" id="2733803">,</span>&nbsp;<span class="ident" id="2733805">ctxt</span><span class="op" id="2733809">.</span><span class="ident" id="2733810">method</span><span class="op" id="2733816">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733819">frametype</span><span class="op" id="2733828">,</span>&nbsp;<span class="ident" id="2733830">argSize</span><span class="op" id="2733837">,</span>&nbsp;<span class="ident" id="2733839">retOffset</span><span class="op" id="2733848">,</span>&nbsp;<span class="ident" id="2733850">_</span>&nbsp;<span class="op" id="2733852">:=</span>&nbsp;<span class="ident" id="2733855">funcLayout</span><span class="op" id="2733865">(</span><span class="ident" id="2733866">t</span><span class="op" id="2733867">,</span>&nbsp;<span class="ident" id="2733869">rcvrtype</span><span class="op" id="2733877">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2733881">//&nbsp;Make&nbsp;a&nbsp;new&nbsp;frame&nbsp;that&nbsp;is&nbsp;one&nbsp;word&nbsp;bigger&nbsp;so&nbsp;we&nbsp;can&nbsp;store&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733956">args</span>&nbsp;<span class="op" id="2733961">:=</span>&nbsp;<span class="ident" id="2733964">unsafe_New</span><span class="op" id="2733974">(</span><span class="ident" id="2733975">frametype</span><span class="op" id="2733984">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2733988">//&nbsp;Copy&nbsp;in&nbsp;receiver&nbsp;and&nbsp;rest&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734027">storeRcvr</span><span class="op" id="2734036">(</span><span class="ident" id="2734037">rcvr</span><span class="op" id="2734041">,</span>&nbsp;<span class="ident" id="2734043">args</span><span class="op" id="2734047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734050">memmove</span><span class="op" id="2734057">(</span><span class="ident" id="2734058">unsafe</span><span class="op" id="2734064">.</span><span class="ident" id="2734065">Pointer</span><span class="op" id="2734072">(</span><span class="builtintype" id="2734073">uintptr</span><span class="op" id="2734080">(</span><span class="ident" id="2734081">args</span><span class="op" id="2734085">)</span><span class="op" id="2734086">+</span><span class="ident" id="2734087">ptrSize</span><span class="op" id="2734094">)</span><span class="op" id="2734095">,</span>&nbsp;<span class="ident" id="2734097">frame</span><span class="op" id="2734102">,</span>&nbsp;<span class="ident" id="2734104">argSize</span><span class="op" id="2734111">-</span><span class="ident" id="2734112">ptrSize</span><span class="op" id="2734119">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2734123">//&nbsp;Call.</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734133">call</span><span class="op" id="2734137">(</span><span class="ident" id="2734138">fn</span><span class="op" id="2734140">,</span>&nbsp;<span class="ident" id="2734142">args</span><span class="op" id="2734146">,</span>&nbsp;<span class="builtintype" id="2734148">uint32</span><span class="op" id="2734154">(</span><span class="ident" id="2734155">frametype</span><span class="op" id="2734164">.</span><span class="ident" id="2734165">size</span><span class="op" id="2734169">)</span><span class="op" id="2734170">,</span>&nbsp;<span class="builtintype" id="2734172">uint32</span><span class="op" id="2734178">(</span><span class="ident" id="2734179">retOffset</span><span class="op" id="2734188">)</span><span class="op" id="2734189">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2734193">//&nbsp;Copy&nbsp;return&nbsp;values.&nbsp;On&nbsp;amd64p32,&nbsp;the&nbsp;beginning&nbsp;of&nbsp;return&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2734261">//&nbsp;is&nbsp;64-bit&nbsp;aligned,&nbsp;so&nbsp;the&nbsp;caller&#39;s&nbsp;frame&nbsp;layout&nbsp;(which&nbsp;doesn&#39;t&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2734333">//&nbsp;a&nbsp;receiver)&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;layout&nbsp;of&nbsp;the&nbsp;fn&nbsp;call,&nbsp;which&nbsp;has</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2734404">//&nbsp;a&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2734420">//&nbsp;Ignore&nbsp;any&nbsp;changes&nbsp;to&nbsp;args&nbsp;and&nbsp;just&nbsp;copy&nbsp;return&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734480">callerRetOffset</span>&nbsp;<span class="op" id="2734496">:=</span>&nbsp;<span class="ident" id="2734499">retOffset</span>&nbsp;<span class="op" id="2734509">-</span>&nbsp;<span class="ident" id="2734511">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2734520">if</span>&nbsp;<span class="ident" id="2734523">runtime</span><span class="op" id="2734530">.</span><span class="ident" id="2734531">GOARCH</span>&nbsp;<span class="op" id="2734538">==</span>&nbsp;<span class="string" id="2734541">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2734552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734556">callerRetOffset</span>&nbsp;<span class="op" id="2734572">=</span>&nbsp;<span class="ident" id="2734574">align</span><span class="op" id="2734579">(</span><span class="ident" id="2734580">argSize</span><span class="op" id="2734587">-</span><span class="ident" id="2734588">ptrSize</span><span class="op" id="2734595">,</span>&nbsp;<span class="num" id="2734597">8</span><span class="op" id="2734598">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2734601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734604">memmove</span><span class="op" id="2734611">(</span><span class="ident" id="2734612">unsafe</span><span class="op" id="2734618">.</span><span class="ident" id="2734619">Pointer</span><span class="op" id="2734626">(</span><span class="builtintype" id="2734627">uintptr</span><span class="op" id="2734634">(</span><span class="ident" id="2734635">frame</span><span class="op" id="2734640">)</span><span class="op" id="2734641">+</span><span class="ident" id="2734642">callerRetOffset</span><span class="op" id="2734657">)</span><span class="op" id="2734658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734662">unsafe</span><span class="op" id="2734668">.</span><span class="ident" id="2734669">Pointer</span><span class="op" id="2734676">(</span><span class="builtintype" id="2734677">uintptr</span><span class="op" id="2734684">(</span><span class="ident" id="2734685">args</span><span class="op" id="2734689">)</span><span class="op" id="2734690">+</span><span class="ident" id="2734691">retOffset</span><span class="op" id="2734700">)</span><span class="op" id="2734701">,</span>&nbsp;<span class="ident" id="2734703">frametype</span><span class="op" id="2734712">.</span><span class="ident" id="2734713">size</span><span class="op" id="2734717">-</span><span class="ident" id="2734718">retOffset</span><span class="op" id="2734727">)</span><br>
<span class="lineno"></span><span class="op" id="2734729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">620</span><span class="comment" id="2734732">//&nbsp;funcName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;f,&nbsp;for&nbsp;use&nbsp;in&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="2734794">func</span>&nbsp;<span class="ident" id="2734799">funcName</span><span class="op" id="2734807">(</span><span class="ident" id="2734808">f</span>&nbsp;<span class="keyword" id="2734810">func</span><span class="op" id="2734814">(</span><span class="op" id="2734815">[</span><span class="op" id="2734816">]</span><span class="ident" id="2734817">Value</span><span class="op" id="2734822">)</span>&nbsp;<span class="op" id="2734824">[</span><span class="op" id="2734825">]</span><span class="ident" id="2734826">Value</span><span class="op" id="2734831">)</span>&nbsp;<span class="builtintype" id="2734833">string</span>&nbsp;<span class="op" id="2734840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734843">pc</span>&nbsp;<span class="op" id="2734846">:=</span>&nbsp;<span class="op" id="2734849">*</span><span class="op" id="2734850">(</span><span class="op" id="2734851">*</span><span class="builtintype" id="2734852">uintptr</span><span class="op" id="2734859">)</span><span class="op" id="2734860">(</span><span class="ident" id="2734861">unsafe</span><span class="op" id="2734867">.</span><span class="ident" id="2734868">Pointer</span><span class="op" id="2734875">(</span><span class="op" id="2734876">&amp;</span><span class="ident" id="2734877">f</span><span class="op" id="2734878">)</span><span class="op" id="2734879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734882">rf</span>&nbsp;<span class="op" id="2734885">:=</span>&nbsp;<span class="ident" id="2734888">runtime</span><span class="op" id="2734895">.</span><span class="ident" id="2734896">FuncForPC</span><span class="op" id="2734905">(</span><span class="ident" id="2734906">pc</span><span class="op" id="2734908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2734911">if</span>&nbsp;<span class="ident" id="2734914">rf</span>&nbsp;<span class="op" id="2734917">!=</span>&nbsp;<span class="ident" id="2734920">nil</span>&nbsp;<span class="op" id="2734924">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2734928">return</span>&nbsp;<span class="ident" id="2734935">rf</span><span class="op" id="2734937">.</span><span class="ident" id="2734938">Name</span><span class="op" id="2734942">(</span><span class="op" id="2734943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2734946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2734949">return</span>&nbsp;<span class="string" id="2734956">&#34;closure&#34;</span><br>
<span class="lineno"></span><span class="op" id="2734966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">630</span><span class="comment" id="2734969">//&nbsp;Cap&nbsp;returns&nbsp;v&#39;s&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="comment" id="2734998">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;or&nbsp;Slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2735053">func</span>&nbsp;<span class="op" id="2735058">(</span><span class="ident" id="2735059">v</span>&nbsp;<span class="ident" id="2735061">Value</span><span class="op" id="2735066">)</span>&nbsp;<span class="ident" id="2735068">Cap</span><span class="op" id="2735071">(</span><span class="op" id="2735072">)</span>&nbsp;<span class="builtintype" id="2735074">int</span>&nbsp;<span class="op" id="2735078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735081">k</span>&nbsp;<span class="op" id="2735083">:=</span>&nbsp;<span class="ident" id="2735086">v</span><span class="op" id="2735087">.</span><span class="ident" id="2735088">kind</span><span class="op" id="2735092">(</span><span class="op" id="2735093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2735096">switch</span>&nbsp;<span class="ident" id="2735103">k</span>&nbsp;<span class="op" id="2735105">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2735108">case</span>&nbsp;<span class="ident" id="2735113">Array</span><span class="op" id="2735118">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2735122">return</span>&nbsp;<span class="ident" id="2735129">v</span><span class="op" id="2735130">.</span><span class="ident" id="2735131">typ</span><span class="op" id="2735134">.</span><span class="ident" id="2735135">Len</span><span class="op" id="2735138">(</span><span class="op" id="2735139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2735142">case</span>&nbsp;<span class="ident" id="2735147">Chan</span><span class="op" id="2735151">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2735155">return</span>&nbsp;<span class="builtintype" id="2735162">int</span><span class="op" id="2735165">(</span><span class="ident" id="2735166">chancap</span><span class="op" id="2735173">(</span><span class="ident" id="2735174">v</span><span class="op" id="2735175">.</span><span class="ident" id="2735176">pointer</span><span class="op" id="2735183">(</span><span class="op" id="2735184">)</span><span class="op" id="2735185">)</span><span class="op" id="2735186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2735189">case</span>&nbsp;<span class="ident" id="2735194">Slice</span><span class="op" id="2735199">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2735203">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2735262">return</span>&nbsp;<span class="op" id="2735269">(</span><span class="op" id="2735270">*</span><span class="ident" id="2735271">sliceHeader</span><span class="op" id="2735282">)</span><span class="op" id="2735283">(</span><span class="ident" id="2735284">v</span><span class="op" id="2735285">.</span><span class="ident" id="2735286">ptr</span><span class="op" id="2735289">)</span><span class="op" id="2735290">.</span><span class="ident" id="2735291">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2735296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2735299">panic</span><span class="op" id="2735304">(</span><span class="op" id="2735305">&amp;</span><span class="ident" id="2735306">ValueError</span><span class="op" id="2735316">{</span><span class="string" id="2735317">&#34;reflect.Value.Cap&#34;</span><span class="op" id="2735336">,</span>&nbsp;<span class="ident" id="2735338">v</span><span class="op" id="2735339">.</span><span class="ident" id="2735340">kind</span><span class="op" id="2735344">(</span><span class="op" id="2735345">)</span><span class="op" id="2735346">}</span><span class="op" id="2735347">)</span><br>
<span class="lineno"></span><span class="op" id="2735349">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span><span class="comment" id="2735352">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2735383">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="keyword" id="2735421">func</span>&nbsp;<span class="op" id="2735426">(</span><span class="ident" id="2735427">v</span>&nbsp;<span class="ident" id="2735429">Value</span><span class="op" id="2735434">)</span>&nbsp;<span class="ident" id="2735436">Close</span><span class="op" id="2735441">(</span><span class="op" id="2735442">)</span>&nbsp;<span class="op" id="2735444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735447">v</span><span class="op" id="2735448">.</span><span class="ident" id="2735449">mustBe</span><span class="op" id="2735455">(</span><span class="ident" id="2735456">Chan</span><span class="op" id="2735460">)</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735463">v</span><span class="op" id="2735464">.</span><span class="ident" id="2735465">mustBeExported</span><span class="op" id="2735479">(</span><span class="op" id="2735480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735483">chanclose</span><span class="op" id="2735492">(</span><span class="ident" id="2735493">v</span><span class="op" id="2735494">.</span><span class="ident" id="2735495">pointer</span><span class="op" id="2735502">(</span><span class="op" id="2735503">)</span><span class="op" id="2735504">)</span><br>
<span class="lineno"></span><span class="op" id="2735506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2735509">//&nbsp;Complex&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;complex128.</span><br>
<span class="lineno">655</span><span class="comment" id="2735567">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128</span><br>
<span class="lineno"></span><span class="keyword" id="2735623">func</span>&nbsp;<span class="op" id="2735628">(</span><span class="ident" id="2735629">v</span>&nbsp;<span class="ident" id="2735631">Value</span><span class="op" id="2735636">)</span>&nbsp;<span class="ident" id="2735638">Complex</span><span class="op" id="2735645">(</span><span class="op" id="2735646">)</span>&nbsp;<span class="builtintype" id="2735648">complex128</span>&nbsp;<span class="op" id="2735659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735662">k</span>&nbsp;<span class="op" id="2735664">:=</span>&nbsp;<span class="ident" id="2735667">v</span><span class="op" id="2735668">.</span><span class="ident" id="2735669">kind</span><span class="op" id="2735673">(</span><span class="op" id="2735674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2735677">switch</span>&nbsp;<span class="ident" id="2735684">k</span>&nbsp;<span class="op" id="2735686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2735689">case</span>&nbsp;<span class="ident" id="2735694">Complex64</span><span class="op" id="2735703">:</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2735707">return</span>&nbsp;<span class="builtintype" id="2735714">complex128</span><span class="op" id="2735724">(</span><span class="op" id="2735725">*</span><span class="op" id="2735726">(</span><span class="op" id="2735727">*</span><span class="builtintype" id="2735728">complex64</span><span class="op" id="2735737">)</span><span class="op" id="2735738">(</span><span class="ident" id="2735739">v</span><span class="op" id="2735740">.</span><span class="ident" id="2735741">ptr</span><span class="op" id="2735744">)</span><span class="op" id="2735745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2735748">case</span>&nbsp;<span class="ident" id="2735753">Complex128</span><span class="op" id="2735763">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2735767">return</span>&nbsp;<span class="op" id="2735774">*</span><span class="op" id="2735775">(</span><span class="op" id="2735776">*</span><span class="builtintype" id="2735777">complex128</span><span class="op" id="2735787">)</span><span class="op" id="2735788">(</span><span class="ident" id="2735789">v</span><span class="op" id="2735790">.</span><span class="ident" id="2735791">ptr</span><span class="op" id="2735794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2735797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2735800">panic</span><span class="op" id="2735805">(</span><span class="op" id="2735806">&amp;</span><span class="ident" id="2735807">ValueError</span><span class="op" id="2735817">{</span><span class="string" id="2735818">&#34;reflect.Value.Complex&#34;</span><span class="op" id="2735841">,</span>&nbsp;<span class="ident" id="2735843">v</span><span class="op" id="2735844">.</span><span class="ident" id="2735845">kind</span><span class="op" id="2735849">(</span><span class="op" id="2735850">)</span><span class="op" id="2735851">}</span><span class="op" id="2735852">)</span><br>
<span class="lineno">665</span><span class="op" id="2735854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2735857">//&nbsp;Elem&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;the&nbsp;interface&nbsp;v&nbsp;contains</span><br>
<span class="lineno"></span><span class="comment" id="2735913">//&nbsp;or&nbsp;that&nbsp;the&nbsp;pointer&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2735949">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface&nbsp;or&nbsp;Ptr.</span><br>
<span class="lineno">670</span><span class="comment" id="2735999">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;v&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2736041">func</span>&nbsp;<span class="op" id="2736046">(</span><span class="ident" id="2736047">v</span>&nbsp;<span class="ident" id="2736049">Value</span><span class="op" id="2736054">)</span>&nbsp;<span class="ident" id="2736056">Elem</span><span class="op" id="2736060">(</span><span class="op" id="2736061">)</span>&nbsp;<span class="ident" id="2736063">Value</span>&nbsp;<span class="op" id="2736069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736072">k</span>&nbsp;<span class="op" id="2736074">:=</span>&nbsp;<span class="ident" id="2736077">v</span><span class="op" id="2736078">.</span><span class="ident" id="2736079">kind</span><span class="op" id="2736083">(</span><span class="op" id="2736084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736087">switch</span>&nbsp;<span class="ident" id="2736094">k</span>&nbsp;<span class="op" id="2736096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736099">case</span>&nbsp;<span class="ident" id="2736104">Interface</span><span class="op" id="2736113">:</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736117">var</span>&nbsp;<span class="ident" id="2736121">eface</span>&nbsp;<span class="keyword" id="2736127">interface</span><span class="op" id="2736136">{</span><span class="op" id="2736137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736141">if</span>&nbsp;<span class="ident" id="2736144">v</span><span class="op" id="2736145">.</span><span class="ident" id="2736146">typ</span><span class="op" id="2736149">.</span><span class="ident" id="2736150">NumMethod</span><span class="op" id="2736159">(</span><span class="op" id="2736160">)</span>&nbsp;<span class="op" id="2736162">==</span>&nbsp;<span class="num" id="2736165">0</span>&nbsp;<span class="op" id="2736167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736172">eface</span>&nbsp;<span class="op" id="2736178">=</span>&nbsp;<span class="op" id="2736180">*</span><span class="op" id="2736181">(</span><span class="op" id="2736182">*</span><span class="keyword" id="2736183">interface</span><span class="op" id="2736192">{</span><span class="op" id="2736193">}</span><span class="op" id="2736194">)</span><span class="op" id="2736195">(</span><span class="ident" id="2736196">v</span><span class="op" id="2736197">.</span><span class="ident" id="2736198">ptr</span><span class="op" id="2736201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2736205">}</span>&nbsp;<span class="keyword" id="2736207">else</span>&nbsp;<span class="op" id="2736212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736217">eface</span>&nbsp;<span class="op" id="2736223">=</span>&nbsp;<span class="op" id="2736225">(</span><span class="keyword" id="2736226">interface</span><span class="op" id="2736235">{</span><span class="op" id="2736236">}</span><span class="op" id="2736237">)</span><span class="op" id="2736238">(</span><span class="op" id="2736239">*</span><span class="op" id="2736240">(</span><span class="op" id="2736241">*</span><span class="keyword" id="2736242">interface</span>&nbsp;<span class="op" id="2736252">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736258">M</span><span class="op" id="2736259">(</span><span class="op" id="2736260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2736265">}</span><span class="op" id="2736266">)</span><span class="op" id="2736267">(</span><span class="ident" id="2736268">v</span><span class="op" id="2736269">.</span><span class="ident" id="2736270">ptr</span><span class="op" id="2736273">)</span><span class="op" id="2736274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2736278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736282">x</span>&nbsp;<span class="op" id="2736284">:=</span>&nbsp;<span class="ident" id="2736287">unpackEface</span><span class="op" id="2736298">(</span><span class="ident" id="2736299">eface</span><span class="op" id="2736304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736308">if</span>&nbsp;<span class="ident" id="2736311">x</span><span class="op" id="2736312">.</span><span class="ident" id="2736313">flag</span>&nbsp;<span class="op" id="2736318">!=</span>&nbsp;<span class="num" id="2736321">0</span>&nbsp;<span class="op" id="2736323">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736328">x</span><span class="op" id="2736329">.</span><span class="ident" id="2736330">flag</span>&nbsp;<span class="op" id="2736335">|=</span>&nbsp;<span class="ident" id="2736338">v</span><span class="op" id="2736339">.</span><span class="ident" id="2736340">flag</span>&nbsp;<span class="op" id="2736345">&amp;</span>&nbsp;<span class="ident" id="2736347">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2736356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736360">return</span>&nbsp;<span class="ident" id="2736367">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736370">case</span>&nbsp;<span class="ident" id="2736375">Ptr</span><span class="op" id="2736378">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736382">ptr</span>&nbsp;<span class="op" id="2736386">:=</span>&nbsp;<span class="ident" id="2736389">v</span><span class="op" id="2736390">.</span><span class="ident" id="2736391">ptr</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736397">if</span>&nbsp;<span class="ident" id="2736400">v</span><span class="op" id="2736401">.</span><span class="ident" id="2736402">flag</span><span class="op" id="2736406">&amp;</span><span class="ident" id="2736407">flagIndir</span>&nbsp;<span class="op" id="2736417">!=</span>&nbsp;<span class="num" id="2736420">0</span>&nbsp;<span class="op" id="2736422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736427">ptr</span>&nbsp;<span class="op" id="2736431">=</span>&nbsp;<span class="op" id="2736433">*</span><span class="op" id="2736434">(</span><span class="op" id="2736435">*</span><span class="ident" id="2736436">unsafe</span><span class="op" id="2736442">.</span><span class="ident" id="2736443">Pointer</span><span class="op" id="2736450">)</span><span class="op" id="2736451">(</span><span class="ident" id="2736452">ptr</span><span class="op" id="2736455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2736459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2736463">//&nbsp;The&nbsp;returned&nbsp;value&#39;s&nbsp;address&nbsp;is&nbsp;v&#39;s&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736511">if</span>&nbsp;<span class="ident" id="2736514">ptr</span>&nbsp;<span class="op" id="2736518">==</span>&nbsp;<span class="ident" id="2736521">nil</span>&nbsp;<span class="op" id="2736525">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736530">return</span>&nbsp;<span class="ident" id="2736537">Value</span><span class="op" id="2736542">{</span><span class="op" id="2736543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2736547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736551">tt</span>&nbsp;<span class="op" id="2736554">:=</span>&nbsp;<span class="op" id="2736557">(</span><span class="op" id="2736558">*</span><span class="ident" id="2736559">ptrType</span><span class="op" id="2736566">)</span><span class="op" id="2736567">(</span><span class="ident" id="2736568">unsafe</span><span class="op" id="2736574">.</span><span class="ident" id="2736575">Pointer</span><span class="op" id="2736582">(</span><span class="ident" id="2736583">v</span><span class="op" id="2736584">.</span><span class="ident" id="2736585">typ</span><span class="op" id="2736588">)</span><span class="op" id="2736589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736593">typ</span>&nbsp;<span class="op" id="2736597">:=</span>&nbsp;<span class="ident" id="2736600">tt</span><span class="op" id="2736602">.</span><span class="ident" id="2736603">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736610">fl</span>&nbsp;<span class="op" id="2736613">:=</span>&nbsp;<span class="ident" id="2736616">v</span><span class="op" id="2736617">.</span><span class="ident" id="2736618">flag</span><span class="op" id="2736622">&amp;</span><span class="ident" id="2736623">flagRO</span>&nbsp;<span class="op" id="2736630">|</span>&nbsp;<span class="ident" id="2736632">flagIndir</span>&nbsp;<span class="op" id="2736642">|</span>&nbsp;<span class="ident" id="2736644">flagAddr</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736655">fl</span>&nbsp;<span class="op" id="2736658">|=</span>&nbsp;<span class="ident" id="2736661">flag</span><span class="op" id="2736665">(</span><span class="ident" id="2736666">typ</span><span class="op" id="2736669">.</span><span class="ident" id="2736670">Kind</span><span class="op" id="2736674">(</span><span class="op" id="2736675">)</span><span class="op" id="2736676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736680">return</span>&nbsp;<span class="ident" id="2736687">Value</span><span class="op" id="2736692">{</span><span class="ident" id="2736693">typ</span><span class="op" id="2736696">,</span>&nbsp;<span class="ident" id="2736698">ptr</span><span class="op" id="2736701">,</span>&nbsp;<span class="ident" id="2736703">fl</span><span class="op" id="2736705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2736708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2736711">panic</span><span class="op" id="2736716">(</span><span class="op" id="2736717">&amp;</span><span class="ident" id="2736718">ValueError</span><span class="op" id="2736728">{</span><span class="string" id="2736729">&#34;reflect.Value.Elem&#34;</span><span class="op" id="2736749">,</span>&nbsp;<span class="ident" id="2736751">v</span><span class="op" id="2736752">.</span><span class="ident" id="2736753">kind</span><span class="op" id="2736757">(</span><span class="op" id="2736758">)</span><span class="op" id="2736759">}</span><span class="op" id="2736760">)</span><br>
<span class="lineno"></span><span class="op" id="2736762">}</span><br>
<span class="lineno">705</span><br>
<span class="lineno"></span><span class="comment" id="2736765">//&nbsp;Field&nbsp;returns&nbsp;the&nbsp;i&#39;th&nbsp;field&nbsp;of&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2736814">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2736875">func</span>&nbsp;<span class="op" id="2736880">(</span><span class="ident" id="2736881">v</span>&nbsp;<span class="ident" id="2736883">Value</span><span class="op" id="2736888">)</span>&nbsp;<span class="ident" id="2736890">Field</span><span class="op" id="2736895">(</span><span class="ident" id="2736896">i</span>&nbsp;<span class="builtintype" id="2736898">int</span><span class="op" id="2736901">)</span>&nbsp;<span class="ident" id="2736903">Value</span>&nbsp;<span class="op" id="2736909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736912">if</span>&nbsp;<span class="ident" id="2736915">v</span><span class="op" id="2736916">.</span><span class="ident" id="2736917">kind</span><span class="op" id="2736921">(</span><span class="op" id="2736922">)</span>&nbsp;<span class="op" id="2736924">!=</span>&nbsp;<span class="ident" id="2736927">Struct</span>&nbsp;<span class="op" id="2736934">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2736938">panic</span><span class="op" id="2736943">(</span><span class="op" id="2736944">&amp;</span><span class="ident" id="2736945">ValueError</span><span class="op" id="2736955">{</span><span class="string" id="2736956">&#34;reflect.Value.Field&#34;</span><span class="op" id="2736977">,</span>&nbsp;<span class="ident" id="2736979">v</span><span class="op" id="2736980">.</span><span class="ident" id="2736981">kind</span><span class="op" id="2736985">(</span><span class="op" id="2736986">)</span><span class="op" id="2736987">}</span><span class="op" id="2736988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2736991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736994">tt</span>&nbsp;<span class="op" id="2736997">:=</span>&nbsp;<span class="op" id="2737000">(</span><span class="op" id="2737001">*</span><span class="ident" id="2737002">structType</span><span class="op" id="2737012">)</span><span class="op" id="2737013">(</span><span class="ident" id="2737014">unsafe</span><span class="op" id="2737020">.</span><span class="ident" id="2737021">Pointer</span><span class="op" id="2737028">(</span><span class="ident" id="2737029">v</span><span class="op" id="2737030">.</span><span class="ident" id="2737031">typ</span><span class="op" id="2737034">)</span><span class="op" id="2737035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737038">if</span>&nbsp;<span class="builtintype" id="2737041">uint</span><span class="op" id="2737045">(</span><span class="ident" id="2737046">i</span><span class="op" id="2737047">)</span>&nbsp;<span class="op" id="2737049">&gt;=</span>&nbsp;<span class="builtintype" id="2737052">uint</span><span class="op" id="2737056">(</span><span class="builtinfunc" id="2737057">len</span><span class="op" id="2737060">(</span><span class="ident" id="2737061">tt</span><span class="op" id="2737063">.</span><span class="ident" id="2737064">fields</span><span class="op" id="2737070">)</span><span class="op" id="2737071">)</span>&nbsp;<span class="op" id="2737073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2737077">panic</span><span class="op" id="2737082">(</span><span class="string" id="2737083">&#34;reflect:&nbsp;Field&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2737118">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2737121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737124">field</span>&nbsp;<span class="op" id="2737130">:=</span>&nbsp;<span class="op" id="2737133">&amp;</span><span class="ident" id="2737134">tt</span><span class="op" id="2737136">.</span><span class="ident" id="2737137">fields</span><span class="op" id="2737143">[</span><span class="ident" id="2737144">i</span><span class="op" id="2737145">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737148">typ</span>&nbsp;<span class="op" id="2737152">:=</span>&nbsp;<span class="ident" id="2737155">field</span><span class="op" id="2737160">.</span><span class="ident" id="2737161">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2737167">//&nbsp;Inherit&nbsp;permission&nbsp;bits&nbsp;from&nbsp;v.</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737203">fl</span>&nbsp;<span class="op" id="2737206">:=</span>&nbsp;<span class="ident" id="2737209">v</span><span class="op" id="2737210">.</span><span class="ident" id="2737211">flag</span><span class="op" id="2737215">&amp;</span><span class="op" id="2737216">(</span><span class="ident" id="2737217">flagRO</span><span class="op" id="2737223">|</span><span class="ident" id="2737224">flagIndir</span><span class="op" id="2737233">|</span><span class="ident" id="2737234">flagAddr</span><span class="op" id="2737242">)</span>&nbsp;<span class="op" id="2737244">|</span>&nbsp;<span class="ident" id="2737246">flag</span><span class="op" id="2737250">(</span><span class="ident" id="2737251">typ</span><span class="op" id="2737254">.</span><span class="ident" id="2737255">Kind</span><span class="op" id="2737259">(</span><span class="op" id="2737260">)</span><span class="op" id="2737261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2737264">//&nbsp;Using&nbsp;an&nbsp;unexported&nbsp;field&nbsp;forces&nbsp;flagRO.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737309">if</span>&nbsp;<span class="ident" id="2737312">field</span><span class="op" id="2737317">.</span><span class="ident" id="2737318">pkgPath</span>&nbsp;<span class="op" id="2737326">!=</span>&nbsp;<span class="ident" id="2737329">nil</span>&nbsp;<span class="op" id="2737333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737337">fl</span>&nbsp;<span class="op" id="2737340">|=</span>&nbsp;<span class="ident" id="2737343">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2737351">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2737354">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;struct,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2737410">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;struct&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2737475">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2737523">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;have&nbsp;field.offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2737581">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;field.offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737624">ptr</span>&nbsp;<span class="op" id="2737628">:=</span>&nbsp;<span class="ident" id="2737631">unsafe</span><span class="op" id="2737637">.</span><span class="ident" id="2737638">Pointer</span><span class="op" id="2737645">(</span><span class="builtintype" id="2737646">uintptr</span><span class="op" id="2737653">(</span><span class="ident" id="2737654">v</span><span class="op" id="2737655">.</span><span class="ident" id="2737656">ptr</span><span class="op" id="2737659">)</span>&nbsp;<span class="op" id="2737661">+</span>&nbsp;<span class="ident" id="2737663">field</span><span class="op" id="2737668">.</span><span class="ident" id="2737669">offset</span><span class="op" id="2737675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737678">return</span>&nbsp;<span class="ident" id="2737685">Value</span><span class="op" id="2737690">{</span><span class="ident" id="2737691">typ</span><span class="op" id="2737694">,</span>&nbsp;<span class="ident" id="2737696">ptr</span><span class="op" id="2737699">,</span>&nbsp;<span class="ident" id="2737701">fl</span><span class="op" id="2737703">}</span><br>
<span class="lineno"></span><span class="op" id="2737705">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2737708">//&nbsp;FieldByIndex&nbsp;returns&nbsp;the&nbsp;nested&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;index.</span><br>
<span class="lineno">735</span><span class="comment" id="2737773">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2737813">func</span>&nbsp;<span class="op" id="2737818">(</span><span class="ident" id="2737819">v</span>&nbsp;<span class="ident" id="2737821">Value</span><span class="op" id="2737826">)</span>&nbsp;<span class="ident" id="2737828">FieldByIndex</span><span class="op" id="2737840">(</span><span class="ident" id="2737841">index</span>&nbsp;<span class="op" id="2737847">[</span><span class="op" id="2737848">]</span><span class="builtintype" id="2737849">int</span><span class="op" id="2737852">)</span>&nbsp;<span class="ident" id="2737854">Value</span>&nbsp;<span class="op" id="2737860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737863">if</span>&nbsp;<span class="builtinfunc" id="2737866">len</span><span class="op" id="2737869">(</span><span class="ident" id="2737870">index</span><span class="op" id="2737875">)</span>&nbsp;<span class="op" id="2737877">==</span>&nbsp;<span class="num" id="2737880">1</span>&nbsp;<span class="op" id="2737882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737886">return</span>&nbsp;<span class="ident" id="2737893">v</span><span class="op" id="2737894">.</span><span class="ident" id="2737895">Field</span><span class="op" id="2737900">(</span><span class="ident" id="2737901">index</span><span class="op" id="2737906">[</span><span class="num" id="2737907">0</span><span class="op" id="2737908">]</span><span class="op" id="2737909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2737912">}</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737915">v</span><span class="op" id="2737916">.</span><span class="ident" id="2737917">mustBe</span><span class="op" id="2737923">(</span><span class="ident" id="2737924">Struct</span><span class="op" id="2737930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737933">for</span>&nbsp;<span class="ident" id="2737937">i</span><span class="op" id="2737938">,</span>&nbsp;<span class="ident" id="2737940">x</span>&nbsp;<span class="op" id="2737942">:=</span>&nbsp;<span class="keyword" id="2737945">range</span>&nbsp;<span class="ident" id="2737951">index</span>&nbsp;<span class="op" id="2737957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737961">if</span>&nbsp;<span class="ident" id="2737964">i</span>&nbsp;<span class="op" id="2737966">&gt;</span>&nbsp;<span class="num" id="2737968">0</span>&nbsp;<span class="op" id="2737970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737975">if</span>&nbsp;<span class="ident" id="2737978">v</span><span class="op" id="2737979">.</span><span class="ident" id="2737980">Kind</span><span class="op" id="2737984">(</span><span class="op" id="2737985">)</span>&nbsp;<span class="op" id="2737987">==</span>&nbsp;<span class="ident" id="2737990">Ptr</span>&nbsp;<span class="op" id="2737994">&amp;&amp;</span>&nbsp;<span class="ident" id="2737997">v</span><span class="op" id="2737998">.</span><span class="ident" id="2737999">typ</span><span class="op" id="2738002">.</span><span class="ident" id="2738003">Elem</span><span class="op" id="2738007">(</span><span class="op" id="2738008">)</span><span class="op" id="2738009">.</span><span class="ident" id="2738010">Kind</span><span class="op" id="2738014">(</span><span class="op" id="2738015">)</span>&nbsp;<span class="op" id="2738017">==</span>&nbsp;<span class="ident" id="2738020">Struct</span>&nbsp;<span class="op" id="2738027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738033">if</span>&nbsp;<span class="ident" id="2738036">v</span><span class="op" id="2738037">.</span><span class="ident" id="2738038">IsNil</span><span class="op" id="2738043">(</span><span class="op" id="2738044">)</span>&nbsp;<span class="op" id="2738046">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2738053">panic</span><span class="op" id="2738058">(</span><span class="string" id="2738059">&#34;reflect:&nbsp;indirection&nbsp;through&nbsp;nil&nbsp;pointer&nbsp;to&nbsp;embedded&nbsp;struct&#34;</span><span class="op" id="2738120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738132">v</span>&nbsp;<span class="op" id="2738134">=</span>&nbsp;<span class="ident" id="2738136">v</span><span class="op" id="2738137">.</span><span class="ident" id="2738138">Elem</span><span class="op" id="2738142">(</span><span class="op" id="2738143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738152">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738156">v</span>&nbsp;<span class="op" id="2738158">=</span>&nbsp;<span class="ident" id="2738160">v</span><span class="op" id="2738161">.</span><span class="ident" id="2738162">Field</span><span class="op" id="2738167">(</span><span class="ident" id="2738168">x</span><span class="op" id="2738169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738175">return</span>&nbsp;<span class="ident" id="2738182">v</span><br>
<span class="lineno"></span><span class="op" id="2738184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="comment" id="2738187">//&nbsp;FieldByName&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2738248">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="2738300">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2738340">func</span>&nbsp;<span class="op" id="2738345">(</span><span class="ident" id="2738346">v</span>&nbsp;<span class="ident" id="2738348">Value</span><span class="op" id="2738353">)</span>&nbsp;<span class="ident" id="2738355">FieldByName</span><span class="op" id="2738366">(</span><span class="ident" id="2738367">name</span>&nbsp;<span class="builtintype" id="2738372">string</span><span class="op" id="2738378">)</span>&nbsp;<span class="ident" id="2738380">Value</span>&nbsp;<span class="op" id="2738386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738389">v</span><span class="op" id="2738390">.</span><span class="ident" id="2738391">mustBe</span><span class="op" id="2738397">(</span><span class="ident" id="2738398">Struct</span><span class="op" id="2738404">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738407">if</span>&nbsp;<span class="ident" id="2738410">f</span><span class="op" id="2738411">,</span>&nbsp;<span class="ident" id="2738413">ok</span>&nbsp;<span class="op" id="2738416">:=</span>&nbsp;<span class="ident" id="2738419">v</span><span class="op" id="2738420">.</span><span class="ident" id="2738421">typ</span><span class="op" id="2738424">.</span><span class="ident" id="2738425">FieldByName</span><span class="op" id="2738436">(</span><span class="ident" id="2738437">name</span><span class="op" id="2738441">)</span><span class="op" id="2738442">;</span>&nbsp;<span class="ident" id="2738444">ok</span>&nbsp;<span class="op" id="2738447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738451">return</span>&nbsp;<span class="ident" id="2738458">v</span><span class="op" id="2738459">.</span><span class="ident" id="2738460">FieldByIndex</span><span class="op" id="2738472">(</span><span class="ident" id="2738473">f</span><span class="op" id="2738474">.</span><span class="ident" id="2738475">Index</span><span class="op" id="2738480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738486">return</span>&nbsp;<span class="ident" id="2738493">Value</span><span class="op" id="2738498">{</span><span class="op" id="2738499">}</span><br>
<span class="lineno"></span><span class="op" id="2738501">}</span><br>
<span class="lineno">765</span><br>
<span class="lineno"></span><span class="comment" id="2738504">//&nbsp;FieldByNameFunc&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;a&nbsp;name</span><br>
<span class="lineno"></span><span class="comment" id="2738560">//&nbsp;that&nbsp;satisfies&nbsp;the&nbsp;match&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2738598">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="2738638">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno">770</span><span class="keyword" id="2738690">func</span>&nbsp;<span class="op" id="2738695">(</span><span class="ident" id="2738696">v</span>&nbsp;<span class="ident" id="2738698">Value</span><span class="op" id="2738703">)</span>&nbsp;<span class="ident" id="2738705">FieldByNameFunc</span><span class="op" id="2738720">(</span><span class="ident" id="2738721">match</span>&nbsp;<span class="keyword" id="2738727">func</span><span class="op" id="2738731">(</span><span class="builtintype" id="2738732">string</span><span class="op" id="2738738">)</span>&nbsp;<span class="builtintype" id="2738740">bool</span><span class="op" id="2738744">)</span>&nbsp;<span class="ident" id="2738746">Value</span>&nbsp;<span class="op" id="2738752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738755">if</span>&nbsp;<span class="ident" id="2738758">f</span><span class="op" id="2738759">,</span>&nbsp;<span class="ident" id="2738761">ok</span>&nbsp;<span class="op" id="2738764">:=</span>&nbsp;<span class="ident" id="2738767">v</span><span class="op" id="2738768">.</span><span class="ident" id="2738769">typ</span><span class="op" id="2738772">.</span><span class="ident" id="2738773">FieldByNameFunc</span><span class="op" id="2738788">(</span><span class="ident" id="2738789">match</span><span class="op" id="2738794">)</span><span class="op" id="2738795">;</span>&nbsp;<span class="ident" id="2738797">ok</span>&nbsp;<span class="op" id="2738800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738804">return</span>&nbsp;<span class="ident" id="2738811">v</span><span class="op" id="2738812">.</span><span class="ident" id="2738813">FieldByIndex</span><span class="op" id="2738825">(</span><span class="ident" id="2738826">f</span><span class="op" id="2738827">.</span><span class="ident" id="2738828">Index</span><span class="op" id="2738833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738839">return</span>&nbsp;<span class="ident" id="2738846">Value</span><span class="op" id="2738851">{</span><span class="op" id="2738852">}</span><br>
<span class="lineno">775</span><span class="op" id="2738854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2738857">//&nbsp;Float&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno"></span><span class="comment" id="2738910">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64</span><br>
<span class="lineno"></span><span class="keyword" id="2738961">func</span>&nbsp;<span class="op" id="2738966">(</span><span class="ident" id="2738967">v</span>&nbsp;<span class="ident" id="2738969">Value</span><span class="op" id="2738974">)</span>&nbsp;<span class="ident" id="2738976">Float</span><span class="op" id="2738981">(</span><span class="op" id="2738982">)</span>&nbsp;<span class="builtintype" id="2738984">float64</span>&nbsp;<span class="op" id="2738992">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738995">k</span>&nbsp;<span class="op" id="2738997">:=</span>&nbsp;<span class="ident" id="2739000">v</span><span class="op" id="2739001">.</span><span class="ident" id="2739002">kind</span><span class="op" id="2739006">(</span><span class="op" id="2739007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739010">switch</span>&nbsp;<span class="ident" id="2739017">k</span>&nbsp;<span class="op" id="2739019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739022">case</span>&nbsp;<span class="ident" id="2739027">Float32</span><span class="op" id="2739034">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739038">return</span>&nbsp;<span class="builtintype" id="2739045">float64</span><span class="op" id="2739052">(</span><span class="op" id="2739053">*</span><span class="op" id="2739054">(</span><span class="op" id="2739055">*</span><span class="builtintype" id="2739056">float32</span><span class="op" id="2739063">)</span><span class="op" id="2739064">(</span><span class="ident" id="2739065">v</span><span class="op" id="2739066">.</span><span class="ident" id="2739067">ptr</span><span class="op" id="2739070">)</span><span class="op" id="2739071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739074">case</span>&nbsp;<span class="ident" id="2739079">Float64</span><span class="op" id="2739086">:</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739090">return</span>&nbsp;<span class="op" id="2739097">*</span><span class="op" id="2739098">(</span><span class="op" id="2739099">*</span><span class="builtintype" id="2739100">float64</span><span class="op" id="2739107">)</span><span class="op" id="2739108">(</span><span class="ident" id="2739109">v</span><span class="op" id="2739110">.</span><span class="ident" id="2739111">ptr</span><span class="op" id="2739114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2739120">panic</span><span class="op" id="2739125">(</span><span class="op" id="2739126">&amp;</span><span class="ident" id="2739127">ValueError</span><span class="op" id="2739137">{</span><span class="string" id="2739138">&#34;reflect.Value.Float&#34;</span><span class="op" id="2739159">,</span>&nbsp;<span class="ident" id="2739161">v</span><span class="op" id="2739162">.</span><span class="ident" id="2739163">kind</span><span class="op" id="2739167">(</span><span class="op" id="2739168">)</span><span class="op" id="2739169">}</span><span class="op" id="2739170">)</span><br>
<span class="lineno"></span><span class="op" id="2739172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span><span class="keyword" id="2739175">var</span>&nbsp;<span class="ident" id="2739179">uint8Type</span>&nbsp;<span class="op" id="2739189">=</span>&nbsp;<span class="ident" id="2739191">TypeOf</span><span class="op" id="2739197">(</span><span class="builtintype" id="2739198">uint8</span><span class="op" id="2739203">(</span><span class="num" id="2739204">0</span><span class="op" id="2739205">)</span><span class="op" id="2739206">)</span><span class="op" id="2739207">.</span><span class="op" id="2739208">(</span><span class="op" id="2739209">*</span><span class="ident" id="2739210">rtype</span><span class="op" id="2739215">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2739218">//&nbsp;Index&nbsp;returns&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="2739253">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice,&nbsp;or&nbsp;String&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2739331">func</span>&nbsp;<span class="op" id="2739336">(</span><span class="ident" id="2739337">v</span>&nbsp;<span class="ident" id="2739339">Value</span><span class="op" id="2739344">)</span>&nbsp;<span class="ident" id="2739346">Index</span><span class="op" id="2739351">(</span><span class="ident" id="2739352">i</span>&nbsp;<span class="builtintype" id="2739354">int</span><span class="op" id="2739357">)</span>&nbsp;<span class="ident" id="2739359">Value</span>&nbsp;<span class="op" id="2739365">{</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739368">switch</span>&nbsp;<span class="ident" id="2739375">v</span><span class="op" id="2739376">.</span><span class="ident" id="2739377">kind</span><span class="op" id="2739381">(</span><span class="op" id="2739382">)</span>&nbsp;<span class="op" id="2739384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739387">case</span>&nbsp;<span class="ident" id="2739392">Array</span><span class="op" id="2739397">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739401">tt</span>&nbsp;<span class="op" id="2739404">:=</span>&nbsp;<span class="op" id="2739407">(</span><span class="op" id="2739408">*</span><span class="ident" id="2739409">arrayType</span><span class="op" id="2739418">)</span><span class="op" id="2739419">(</span><span class="ident" id="2739420">unsafe</span><span class="op" id="2739426">.</span><span class="ident" id="2739427">Pointer</span><span class="op" id="2739434">(</span><span class="ident" id="2739435">v</span><span class="op" id="2739436">.</span><span class="ident" id="2739437">typ</span><span class="op" id="2739440">)</span><span class="op" id="2739441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739445">if</span>&nbsp;<span class="builtintype" id="2739448">uint</span><span class="op" id="2739452">(</span><span class="ident" id="2739453">i</span><span class="op" id="2739454">)</span>&nbsp;<span class="op" id="2739456">&gt;=</span>&nbsp;<span class="builtintype" id="2739459">uint</span><span class="op" id="2739463">(</span><span class="ident" id="2739464">tt</span><span class="op" id="2739466">.</span><span class="builtinfunc" id="2739467">len</span><span class="op" id="2739470">)</span>&nbsp;<span class="op" id="2739472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2739477">panic</span><span class="op" id="2739482">(</span><span class="string" id="2739483">&#34;reflect:&nbsp;array&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2739518">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739526">typ</span>&nbsp;<span class="op" id="2739530">:=</span>&nbsp;<span class="ident" id="2739533">tt</span><span class="op" id="2739535">.</span><span class="ident" id="2739536">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739543">offset</span>&nbsp;<span class="op" id="2739550">:=</span>&nbsp;<span class="builtintype" id="2739553">uintptr</span><span class="op" id="2739560">(</span><span class="ident" id="2739561">i</span><span class="op" id="2739562">)</span>&nbsp;<span class="op" id="2739564">*</span>&nbsp;<span class="ident" id="2739566">typ</span><span class="op" id="2739569">.</span><span class="ident" id="2739570">size</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2739578">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;array,</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2739634">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;array&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2739699">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2739748">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;doing&nbsp;Index(0),&nbsp;so&nbsp;offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2739815">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739853">val</span>&nbsp;<span class="op" id="2739857">:=</span>&nbsp;<span class="ident" id="2739860">unsafe</span><span class="op" id="2739866">.</span><span class="ident" id="2739867">Pointer</span><span class="op" id="2739874">(</span><span class="builtintype" id="2739875">uintptr</span><span class="op" id="2739882">(</span><span class="ident" id="2739883">v</span><span class="op" id="2739884">.</span><span class="ident" id="2739885">ptr</span><span class="op" id="2739888">)</span>&nbsp;<span class="op" id="2739890">+</span>&nbsp;<span class="ident" id="2739892">offset</span><span class="op" id="2739898">)</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739902">fl</span>&nbsp;<span class="op" id="2739905">:=</span>&nbsp;<span class="ident" id="2739908">v</span><span class="op" id="2739909">.</span><span class="ident" id="2739910">flag</span><span class="op" id="2739914">&amp;</span><span class="op" id="2739915">(</span><span class="ident" id="2739916">flagRO</span><span class="op" id="2739922">|</span><span class="ident" id="2739923">flagIndir</span><span class="op" id="2739932">|</span><span class="ident" id="2739933">flagAddr</span><span class="op" id="2739941">)</span>&nbsp;<span class="op" id="2739943">|</span>&nbsp;<span class="ident" id="2739945">flag</span><span class="op" id="2739949">(</span><span class="ident" id="2739950">typ</span><span class="op" id="2739953">.</span><span class="ident" id="2739954">Kind</span><span class="op" id="2739958">(</span><span class="op" id="2739959">)</span><span class="op" id="2739960">)</span>&nbsp;<span class="comment" id="2739962">//&nbsp;bits&nbsp;same&nbsp;as&nbsp;overall&nbsp;array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739994">return</span>&nbsp;<span class="ident" id="2740001">Value</span><span class="op" id="2740006">{</span><span class="ident" id="2740007">typ</span><span class="op" id="2740010">,</span>&nbsp;<span class="ident" id="2740012">val</span><span class="op" id="2740015">,</span>&nbsp;<span class="ident" id="2740017">fl</span><span class="op" id="2740019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740023">case</span>&nbsp;<span class="ident" id="2740028">Slice</span><span class="op" id="2740033">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2740037">//&nbsp;Element&nbsp;flag&nbsp;same&nbsp;as&nbsp;Elem&nbsp;of&nbsp;Ptr.</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2740076">//&nbsp;Addressable,&nbsp;indirect,&nbsp;possibly&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740124">s</span>&nbsp;<span class="op" id="2740126">:=</span>&nbsp;<span class="op" id="2740129">(</span><span class="op" id="2740130">*</span><span class="ident" id="2740131">sliceHeader</span><span class="op" id="2740142">)</span><span class="op" id="2740143">(</span><span class="ident" id="2740144">v</span><span class="op" id="2740145">.</span><span class="ident" id="2740146">ptr</span><span class="op" id="2740149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740153">if</span>&nbsp;<span class="builtintype" id="2740156">uint</span><span class="op" id="2740160">(</span><span class="ident" id="2740161">i</span><span class="op" id="2740162">)</span>&nbsp;<span class="op" id="2740164">&gt;=</span>&nbsp;<span class="builtintype" id="2740167">uint</span><span class="op" id="2740171">(</span><span class="ident" id="2740172">s</span><span class="op" id="2740173">.</span><span class="ident" id="2740174">Len</span><span class="op" id="2740177">)</span>&nbsp;<span class="op" id="2740179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2740184">panic</span><span class="op" id="2740189">(</span><span class="string" id="2740190">&#34;reflect:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2740225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2740229">}</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740233">tt</span>&nbsp;<span class="op" id="2740236">:=</span>&nbsp;<span class="op" id="2740239">(</span><span class="op" id="2740240">*</span><span class="ident" id="2740241">sliceType</span><span class="op" id="2740250">)</span><span class="op" id="2740251">(</span><span class="ident" id="2740252">unsafe</span><span class="op" id="2740258">.</span><span class="ident" id="2740259">Pointer</span><span class="op" id="2740266">(</span><span class="ident" id="2740267">v</span><span class="op" id="2740268">.</span><span class="ident" id="2740269">typ</span><span class="op" id="2740272">)</span><span class="op" id="2740273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740277">typ</span>&nbsp;<span class="op" id="2740281">:=</span>&nbsp;<span class="ident" id="2740284">tt</span><span class="op" id="2740286">.</span><span class="ident" id="2740287">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740294">val</span>&nbsp;<span class="op" id="2740298">:=</span>&nbsp;<span class="ident" id="2740301">unsafe</span><span class="op" id="2740307">.</span><span class="ident" id="2740308">Pointer</span><span class="op" id="2740315">(</span><span class="builtintype" id="2740316">uintptr</span><span class="op" id="2740323">(</span><span class="ident" id="2740324">s</span><span class="op" id="2740325">.</span><span class="ident" id="2740326">Data</span><span class="op" id="2740330">)</span>&nbsp;<span class="op" id="2740332">+</span>&nbsp;<span class="builtintype" id="2740334">uintptr</span><span class="op" id="2740341">(</span><span class="ident" id="2740342">i</span><span class="op" id="2740343">)</span><span class="op" id="2740344">*</span><span class="ident" id="2740345">typ</span><span class="op" id="2740348">.</span><span class="ident" id="2740349">size</span><span class="op" id="2740353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740357">fl</span>&nbsp;<span class="op" id="2740360">:=</span>&nbsp;<span class="ident" id="2740363">flagAddr</span>&nbsp;<span class="op" id="2740372">|</span>&nbsp;<span class="ident" id="2740374">flagIndir</span>&nbsp;<span class="op" id="2740384">|</span>&nbsp;<span class="ident" id="2740386">v</span><span class="op" id="2740387">.</span><span class="ident" id="2740388">flag</span><span class="op" id="2740392">&amp;</span><span class="ident" id="2740393">flagRO</span>&nbsp;<span class="op" id="2740400">|</span>&nbsp;<span class="ident" id="2740402">flag</span><span class="op" id="2740406">(</span><span class="ident" id="2740407">typ</span><span class="op" id="2740410">.</span><span class="ident" id="2740411">Kind</span><span class="op" id="2740415">(</span><span class="op" id="2740416">)</span><span class="op" id="2740417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740421">return</span>&nbsp;<span class="ident" id="2740428">Value</span><span class="op" id="2740433">{</span><span class="ident" id="2740434">typ</span><span class="op" id="2740437">,</span>&nbsp;<span class="ident" id="2740439">val</span><span class="op" id="2740442">,</span>&nbsp;<span class="ident" id="2740444">fl</span><span class="op" id="2740446">}</span><br>
<span class="lineno">825</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740450">case</span>&nbsp;<span class="ident" id="2740455">String</span><span class="op" id="2740461">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740465">s</span>&nbsp;<span class="op" id="2740467">:=</span>&nbsp;<span class="op" id="2740470">(</span><span class="op" id="2740471">*</span><span class="ident" id="2740472">stringHeader</span><span class="op" id="2740484">)</span><span class="op" id="2740485">(</span><span class="ident" id="2740486">v</span><span class="op" id="2740487">.</span><span class="ident" id="2740488">ptr</span><span class="op" id="2740491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740495">if</span>&nbsp;<span class="builtintype" id="2740498">uint</span><span class="op" id="2740502">(</span><span class="ident" id="2740503">i</span><span class="op" id="2740504">)</span>&nbsp;<span class="op" id="2740506">&gt;=</span>&nbsp;<span class="builtintype" id="2740509">uint</span><span class="op" id="2740513">(</span><span class="ident" id="2740514">s</span><span class="op" id="2740515">.</span><span class="ident" id="2740516">Len</span><span class="op" id="2740519">)</span>&nbsp;<span class="op" id="2740521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2740526">panic</span><span class="op" id="2740531">(</span><span class="string" id="2740532">&#34;reflect:&nbsp;string&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2740568">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2740572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740576">p</span>&nbsp;<span class="op" id="2740578">:=</span>&nbsp;<span class="ident" id="2740581">unsafe</span><span class="op" id="2740587">.</span><span class="ident" id="2740588">Pointer</span><span class="op" id="2740595">(</span><span class="builtintype" id="2740596">uintptr</span><span class="op" id="2740603">(</span><span class="ident" id="2740604">s</span><span class="op" id="2740605">.</span><span class="ident" id="2740606">Data</span><span class="op" id="2740610">)</span>&nbsp;<span class="op" id="2740612">+</span>&nbsp;<span class="builtintype" id="2740614">uintptr</span><span class="op" id="2740621">(</span><span class="ident" id="2740622">i</span><span class="op" id="2740623">)</span><span class="op" id="2740624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740628">fl</span>&nbsp;<span class="op" id="2740631">:=</span>&nbsp;<span class="ident" id="2740634">v</span><span class="op" id="2740635">.</span><span class="ident" id="2740636">flag</span><span class="op" id="2740640">&amp;</span><span class="ident" id="2740641">flagRO</span>&nbsp;<span class="op" id="2740648">|</span>&nbsp;<span class="ident" id="2740650">flag</span><span class="op" id="2740654">(</span><span class="ident" id="2740655">Uint8</span><span class="op" id="2740660">)</span>&nbsp;<span class="op" id="2740662">|</span>&nbsp;<span class="ident" id="2740664">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740676">return</span>&nbsp;<span class="ident" id="2740683">Value</span><span class="op" id="2740688">{</span><span class="ident" id="2740689">uint8Type</span><span class="op" id="2740698">,</span>&nbsp;<span class="ident" id="2740700">p</span><span class="op" id="2740701">,</span>&nbsp;<span class="ident" id="2740703">fl</span><span class="op" id="2740705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2740708">}</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2740711">panic</span><span class="op" id="2740716">(</span><span class="op" id="2740717">&amp;</span><span class="ident" id="2740718">ValueError</span><span class="op" id="2740728">{</span><span class="string" id="2740729">&#34;reflect.Value.Index&#34;</span><span class="op" id="2740750">,</span>&nbsp;<span class="ident" id="2740752">v</span><span class="op" id="2740753">.</span><span class="ident" id="2740754">kind</span><span class="op" id="2740758">(</span><span class="op" id="2740759">)</span><span class="op" id="2740760">}</span><span class="op" id="2740761">)</span><br>
<span class="lineno"></span><span class="op" id="2740763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2740766">//&nbsp;Int&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2740816">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno">840</span><span class="keyword" id="2740883">func</span>&nbsp;<span class="op" id="2740888">(</span><span class="ident" id="2740889">v</span>&nbsp;<span class="ident" id="2740891">Value</span><span class="op" id="2740896">)</span>&nbsp;<span class="ident" id="2740898">Int</span><span class="op" id="2740901">(</span><span class="op" id="2740902">)</span>&nbsp;<span class="ident" id="2740904">int64</span>&nbsp;<span class="op" id="2740910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740913">k</span>&nbsp;<span class="op" id="2740915">:=</span>&nbsp;<span class="ident" id="2740918">v</span><span class="op" id="2740919">.</span><span class="ident" id="2740920">kind</span><span class="op" id="2740924">(</span><span class="op" id="2740925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740928">p</span>&nbsp;<span class="op" id="2740930">:=</span>&nbsp;<span class="ident" id="2740933">v</span><span class="op" id="2740934">.</span><span class="ident" id="2740935">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740940">switch</span>&nbsp;<span class="ident" id="2740947">k</span>&nbsp;<span class="op" id="2740949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740952">case</span>&nbsp;<span class="ident" id="2740957">Int</span><span class="op" id="2740960">:</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740964">return</span>&nbsp;<span class="ident" id="2740971">int64</span><span class="op" id="2740976">(</span><span class="op" id="2740977">*</span><span class="op" id="2740978">(</span><span class="op" id="2740979">*</span><span class="builtintype" id="2740980">int</span><span class="op" id="2740983">)</span><span class="op" id="2740984">(</span><span class="ident" id="2740985">p</span><span class="op" id="2740986">)</span><span class="op" id="2740987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740990">case</span>&nbsp;<span class="ident" id="2740995">Int8</span><span class="op" id="2740999">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741003">return</span>&nbsp;<span class="ident" id="2741010">int64</span><span class="op" id="2741015">(</span><span class="op" id="2741016">*</span><span class="op" id="2741017">(</span><span class="op" id="2741018">*</span><span class="builtintype" id="2741019">int8</span><span class="op" id="2741023">)</span><span class="op" id="2741024">(</span><span class="ident" id="2741025">p</span><span class="op" id="2741026">)</span><span class="op" id="2741027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741030">case</span>&nbsp;<span class="ident" id="2741035">Int16</span><span class="op" id="2741040">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741044">return</span>&nbsp;<span class="ident" id="2741051">int64</span><span class="op" id="2741056">(</span><span class="op" id="2741057">*</span><span class="op" id="2741058">(</span><span class="op" id="2741059">*</span><span class="builtintype" id="2741060">int16</span><span class="op" id="2741065">)</span><span class="op" id="2741066">(</span><span class="ident" id="2741067">p</span><span class="op" id="2741068">)</span><span class="op" id="2741069">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741072">case</span>&nbsp;<span class="ident" id="2741077">Int32</span><span class="op" id="2741082">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741086">return</span>&nbsp;<span class="ident" id="2741093">int64</span><span class="op" id="2741098">(</span><span class="op" id="2741099">*</span><span class="op" id="2741100">(</span><span class="op" id="2741101">*</span><span class="builtintype" id="2741102">int32</span><span class="op" id="2741107">)</span><span class="op" id="2741108">(</span><span class="ident" id="2741109">p</span><span class="op" id="2741110">)</span><span class="op" id="2741111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741114">case</span>&nbsp;<span class="ident" id="2741119">Int64</span><span class="op" id="2741124">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741128">return</span>&nbsp;<span class="ident" id="2741135">int64</span><span class="op" id="2741140">(</span><span class="op" id="2741141">*</span><span class="op" id="2741142">(</span><span class="op" id="2741143">*</span><span class="ident" id="2741144">int64</span><span class="op" id="2741149">)</span><span class="op" id="2741150">(</span><span class="ident" id="2741151">p</span><span class="op" id="2741152">)</span><span class="op" id="2741153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2741156">}</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2741159">panic</span><span class="op" id="2741164">(</span><span class="op" id="2741165">&amp;</span><span class="ident" id="2741166">ValueError</span><span class="op" id="2741176">{</span><span class="string" id="2741177">&#34;reflect.Value.Int&#34;</span><span class="op" id="2741196">,</span>&nbsp;<span class="ident" id="2741198">v</span><span class="op" id="2741199">.</span><span class="ident" id="2741200">kind</span><span class="op" id="2741204">(</span><span class="op" id="2741205">)</span><span class="op" id="2741206">}</span><span class="op" id="2741207">)</span><br>
<span class="lineno"></span><span class="op" id="2741209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2741212">//&nbsp;CanInterface&nbsp;returns&nbsp;true&nbsp;if&nbsp;Interface&nbsp;can&nbsp;be&nbsp;used&nbsp;without&nbsp;panicking.</span><br>
<span class="lineno"></span><span class="keyword" id="2741285">func</span>&nbsp;<span class="op" id="2741290">(</span><span class="ident" id="2741291">v</span>&nbsp;<span class="ident" id="2741293">Value</span><span class="op" id="2741298">)</span>&nbsp;<span class="ident" id="2741300">CanInterface</span><span class="op" id="2741312">(</span><span class="op" id="2741313">)</span>&nbsp;<span class="builtintype" id="2741315">bool</span>&nbsp;<span class="op" id="2741320">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741323">if</span>&nbsp;<span class="ident" id="2741326">v</span><span class="op" id="2741327">.</span><span class="ident" id="2741328">flag</span>&nbsp;<span class="op" id="2741333">==</span>&nbsp;<span class="num" id="2741336">0</span>&nbsp;<span class="op" id="2741338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2741342">panic</span><span class="op" id="2741347">(</span><span class="op" id="2741348">&amp;</span><span class="ident" id="2741349">ValueError</span><span class="op" id="2741359">{</span><span class="string" id="2741360">&#34;reflect.Value.CanInterface&#34;</span><span class="op" id="2741388">,</span>&nbsp;<span class="ident" id="2741390">Invalid</span><span class="op" id="2741397">}</span><span class="op" id="2741398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2741401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741404">return</span>&nbsp;<span class="ident" id="2741411">v</span><span class="op" id="2741412">.</span><span class="ident" id="2741413">flag</span><span class="op" id="2741417">&amp;</span><span class="ident" id="2741418">flagRO</span>&nbsp;<span class="op" id="2741425">==</span>&nbsp;<span class="num" id="2741428">0</span><br>
<span class="lineno"></span><span class="op" id="2741430">}</span><br>
<span class="lineno">865</span><br>
<span class="lineno"></span><span class="comment" id="2741433">//&nbsp;Interface&nbsp;returns&nbsp;v&#39;s&nbsp;current&nbsp;value&nbsp;as&nbsp;an&nbsp;interface{}.</span><br>
<span class="lineno"></span><span class="comment" id="2741491">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to:</span><br>
<span class="lineno"></span><span class="comment" id="2741515">//&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;i&nbsp;interface{}&nbsp;=&nbsp;(v&#39;s&nbsp;underlying&nbsp;value)</span><br>
<span class="lineno"></span><span class="comment" id="2741561">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;the&nbsp;Value&nbsp;was&nbsp;obtained&nbsp;by&nbsp;accessing</span><br>
<span class="lineno">870</span><span class="comment" id="2741613">//&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="2741642">func</span>&nbsp;<span class="op" id="2741647">(</span><span class="ident" id="2741648">v</span>&nbsp;<span class="ident" id="2741650">Value</span><span class="op" id="2741655">)</span>&nbsp;<span class="ident" id="2741657">Interface</span><span class="op" id="2741666">(</span><span class="op" id="2741667">)</span>&nbsp;<span class="op" id="2741669">(</span><span class="ident" id="2741670">i</span>&nbsp;<span class="keyword" id="2741672">interface</span><span class="op" id="2741681">{</span><span class="op" id="2741682">}</span><span class="op" id="2741683">)</span>&nbsp;<span class="op" id="2741685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741688">return</span>&nbsp;<span class="ident" id="2741695">valueInterface</span><span class="op" id="2741709">(</span><span class="ident" id="2741710">v</span><span class="op" id="2741711">,</span>&nbsp;<span class="builtintype" id="2741713">true</span><span class="op" id="2741717">)</span><br>
<span class="lineno"></span><span class="op" id="2741719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">875</span><span class="keyword" id="2741722">func</span>&nbsp;<span class="ident" id="2741727">valueInterface</span><span class="op" id="2741741">(</span><span class="ident" id="2741742">v</span>&nbsp;<span class="ident" id="2741744">Value</span><span class="op" id="2741749">,</span>&nbsp;<span class="ident" id="2741751">safe</span>&nbsp;<span class="builtintype" id="2741756">bool</span><span class="op" id="2741760">)</span>&nbsp;<span class="keyword" id="2741762">interface</span><span class="op" id="2741771">{</span><span class="op" id="2741772">}</span>&nbsp;<span class="op" id="2741774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741777">if</span>&nbsp;<span class="ident" id="2741780">v</span><span class="op" id="2741781">.</span><span class="ident" id="2741782">flag</span>&nbsp;<span class="op" id="2741787">==</span>&nbsp;<span class="num" id="2741790">0</span>&nbsp;<span class="op" id="2741792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2741796">panic</span><span class="op" id="2741801">(</span><span class="op" id="2741802">&amp;</span><span class="ident" id="2741803">ValueError</span><span class="op" id="2741813">{</span><span class="string" id="2741814">&#34;reflect.Value.Interface&#34;</span><span class="op" id="2741839">,</span>&nbsp;<span class="num" id="2741841">0</span><span class="op" id="2741842">}</span><span class="op" id="2741843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2741846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741849">if</span>&nbsp;<span class="ident" id="2741852">safe</span>&nbsp;<span class="op" id="2741857">&amp;&amp;</span>&nbsp;<span class="ident" id="2741860">v</span><span class="op" id="2741861">.</span><span class="ident" id="2741862">flag</span><span class="op" id="2741866">&amp;</span><span class="ident" id="2741867">flagRO</span>&nbsp;<span class="op" id="2741874">!=</span>&nbsp;<span class="num" id="2741877">0</span>&nbsp;<span class="op" id="2741879">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2741883">//&nbsp;Do&nbsp;not&nbsp;allow&nbsp;access&nbsp;to&nbsp;unexported&nbsp;values&nbsp;via&nbsp;Interface,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2741944">//&nbsp;because&nbsp;they&nbsp;might&nbsp;be&nbsp;pointers&nbsp;that&nbsp;should&nbsp;not&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2741999">//&nbsp;writable&nbsp;or&nbsp;methods&nbsp;or&nbsp;function&nbsp;that&nbsp;should&nbsp;not&nbsp;be&nbsp;callable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2742065">panic</span><span class="op" id="2742070">(</span><span class="string" id="2742071">&#34;reflect.Value.Interface:&nbsp;cannot&nbsp;return&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&nbsp;or&nbsp;method&#34;</span><span class="op" id="2742158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2742161">}</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742164">if</span>&nbsp;<span class="ident" id="2742167">v</span><span class="op" id="2742168">.</span><span class="ident" id="2742169">flag</span><span class="op" id="2742173">&amp;</span><span class="ident" id="2742174">flagMethod</span>&nbsp;<span class="op" id="2742185">!=</span>&nbsp;<span class="num" id="2742188">0</span>&nbsp;<span class="op" id="2742190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2742194">v</span>&nbsp;<span class="op" id="2742196">=</span>&nbsp;<span class="ident" id="2742198">makeMethodValue</span><span class="op" id="2742213">(</span><span class="string" id="2742214">&#34;Interface&#34;</span><span class="op" id="2742225">,</span>&nbsp;<span class="ident" id="2742227">v</span><span class="op" id="2742228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2742231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742235">if</span>&nbsp;<span class="ident" id="2742238">v</span><span class="op" id="2742239">.</span><span class="ident" id="2742240">kind</span><span class="op" id="2742244">(</span><span class="op" id="2742245">)</span>&nbsp;<span class="op" id="2742247">==</span>&nbsp;<span class="ident" id="2742250">Interface</span>&nbsp;<span class="op" id="2742260">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2742264">//&nbsp;Special&nbsp;case:&nbsp;return&nbsp;the&nbsp;element&nbsp;inside&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2742324">//&nbsp;Empty&nbsp;interface&nbsp;has&nbsp;one&nbsp;layout,&nbsp;all&nbsp;interfaces&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2742381">//&nbsp;methods&nbsp;have&nbsp;a&nbsp;second&nbsp;layout.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742416">if</span>&nbsp;<span class="ident" id="2742419">v</span><span class="op" id="2742420">.</span><span class="ident" id="2742421">NumMethod</span><span class="op" id="2742430">(</span><span class="op" id="2742431">)</span>&nbsp;<span class="op" id="2742433">==</span>&nbsp;<span class="num" id="2742436">0</span>&nbsp;<span class="op" id="2742438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742443">return</span>&nbsp;<span class="op" id="2742450">*</span><span class="op" id="2742451">(</span><span class="op" id="2742452">*</span><span class="keyword" id="2742453">interface</span><span class="op" id="2742462">{</span><span class="op" id="2742463">}</span><span class="op" id="2742464">)</span><span class="op" id="2742465">(</span><span class="ident" id="2742466">v</span><span class="op" id="2742467">.</span><span class="ident" id="2742468">ptr</span><span class="op" id="2742471">)</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2742475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742479">return</span>&nbsp;<span class="op" id="2742486">*</span><span class="op" id="2742487">(</span><span class="op" id="2742488">*</span><span class="keyword" id="2742489">interface</span>&nbsp;<span class="op" id="2742499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2742504">M</span><span class="op" id="2742505">(</span><span class="op" id="2742506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2742510">}</span><span class="op" id="2742511">)</span><span class="op" id="2742512">(</span><span class="ident" id="2742513">v</span><span class="op" id="2742514">.</span><span class="ident" id="2742515">ptr</span><span class="op" id="2742518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2742521">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2742525">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;to&nbsp;packEface&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742598">return</span>&nbsp;<span class="ident" id="2742605">packEface</span><span class="op" id="2742614">(</span><span class="ident" id="2742615">v</span><span class="op" id="2742616">)</span><br>
<span class="lineno"></span><span class="op" id="2742618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span><span class="comment" id="2742621">//&nbsp;InterfaceData&nbsp;returns&nbsp;the&nbsp;interface&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr&nbsp;pair.</span><br>
<span class="lineno"></span><span class="comment" id="2742689">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2742732">func</span>&nbsp;<span class="op" id="2742737">(</span><span class="ident" id="2742738">v</span>&nbsp;<span class="ident" id="2742740">Value</span><span class="op" id="2742745">)</span>&nbsp;<span class="ident" id="2742747">InterfaceData</span><span class="op" id="2742760">(</span><span class="op" id="2742761">)</span>&nbsp;<span class="op" id="2742763">[</span><span class="num" id="2742764">2</span><span class="op" id="2742765">]</span><span class="builtintype" id="2742766">uintptr</span>&nbsp;<span class="op" id="2742774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2742777">//&nbsp;TODO:&nbsp;deprecate&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2742802">v</span><span class="op" id="2742803">.</span><span class="ident" id="2742804">mustBe</span><span class="op" id="2742810">(</span><span class="ident" id="2742811">Interface</span><span class="op" id="2742820">)</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2742823">//&nbsp;We&nbsp;treat&nbsp;this&nbsp;as&nbsp;a&nbsp;read&nbsp;operation,&nbsp;so&nbsp;we&nbsp;allow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2742874">//&nbsp;it&nbsp;even&nbsp;for&nbsp;unexported&nbsp;data,&nbsp;because&nbsp;the&nbsp;caller</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2742926">//&nbsp;has&nbsp;to&nbsp;import&nbsp;&#34;unsafe&#34;&nbsp;to&nbsp;turn&nbsp;it&nbsp;into&nbsp;something</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2742979">//&nbsp;that&nbsp;can&nbsp;be&nbsp;abused.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2743003">//&nbsp;Interface&nbsp;value&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743071">return</span>&nbsp;<span class="op" id="2743078">*</span><span class="op" id="2743079">(</span><span class="op" id="2743080">*</span><span class="op" id="2743081">[</span><span class="num" id="2743082">2</span><span class="op" id="2743083">]</span><span class="builtintype" id="2743084">uintptr</span><span class="op" id="2743091">)</span><span class="op" id="2743092">(</span><span class="ident" id="2743093">v</span><span class="op" id="2743094">.</span><span class="ident" id="2743095">ptr</span><span class="op" id="2743098">)</span><br>
<span class="lineno"></span><span class="op" id="2743100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2743103">//&nbsp;IsNil&nbsp;reports&nbsp;whether&nbsp;its&nbsp;argument&nbsp;v&nbsp;is&nbsp;nil.&nbsp;The&nbsp;argument&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2743172">//&nbsp;a&nbsp;chan,&nbsp;func,&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice&nbsp;value;&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno">920</span><span class="comment" id="2743239">//&nbsp;not,&nbsp;IsNil&nbsp;panics.&nbsp;Note&nbsp;that&nbsp;IsNil&nbsp;is&nbsp;not&nbsp;always&nbsp;equivalent&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2743307">//&nbsp;regular&nbsp;comparison&nbsp;with&nbsp;nil&nbsp;in&nbsp;Go.&nbsp;For&nbsp;example,&nbsp;if&nbsp;v&nbsp;was&nbsp;created</span><br>
<span class="lineno"></span><span class="comment" id="2743375">//&nbsp;by&nbsp;calling&nbsp;ValueOf&nbsp;with&nbsp;an&nbsp;uninitialized&nbsp;interface&nbsp;variable&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2743441">//&nbsp;i==nil&nbsp;will&nbsp;be&nbsp;true&nbsp;but&nbsp;v.IsNil&nbsp;will&nbsp;panic&nbsp;as&nbsp;v&nbsp;will&nbsp;be&nbsp;the&nbsp;zero</span><br>
<span class="lineno"></span><span class="comment" id="2743509">//&nbsp;Value.</span><br>
<span class="lineno">925</span><span class="keyword" id="2743519">func</span>&nbsp;<span class="op" id="2743524">(</span><span class="ident" id="2743525">v</span>&nbsp;<span class="ident" id="2743527">Value</span><span class="op" id="2743532">)</span>&nbsp;<span class="ident" id="2743534">IsNil</span><span class="op" id="2743539">(</span><span class="op" id="2743540">)</span>&nbsp;<span class="builtintype" id="2743542">bool</span>&nbsp;<span class="op" id="2743547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743550">k</span>&nbsp;<span class="op" id="2743552">:=</span>&nbsp;<span class="ident" id="2743555">v</span><span class="op" id="2743556">.</span><span class="ident" id="2743557">kind</span><span class="op" id="2743561">(</span><span class="op" id="2743562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743565">switch</span>&nbsp;<span class="ident" id="2743572">k</span>&nbsp;<span class="op" id="2743574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743577">case</span>&nbsp;<span class="ident" id="2743582">Chan</span><span class="op" id="2743586">,</span>&nbsp;<span class="ident" id="2743588">Func</span><span class="op" id="2743592">,</span>&nbsp;<span class="ident" id="2743594">Map</span><span class="op" id="2743597">,</span>&nbsp;<span class="ident" id="2743599">Ptr</span><span class="op" id="2743602">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743606">if</span>&nbsp;<span class="ident" id="2743609">v</span><span class="op" id="2743610">.</span><span class="ident" id="2743611">flag</span><span class="op" id="2743615">&amp;</span><span class="ident" id="2743616">flagMethod</span>&nbsp;<span class="op" id="2743627">!=</span>&nbsp;<span class="num" id="2743630">0</span>&nbsp;<span class="op" id="2743632">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743637">return</span>&nbsp;<span class="builtintype" id="2743644">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2743652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743656">ptr</span>&nbsp;<span class="op" id="2743660">:=</span>&nbsp;<span class="ident" id="2743663">v</span><span class="op" id="2743664">.</span><span class="ident" id="2743665">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743671">if</span>&nbsp;<span class="ident" id="2743674">v</span><span class="op" id="2743675">.</span><span class="ident" id="2743676">flag</span><span class="op" id="2743680">&amp;</span><span class="ident" id="2743681">flagIndir</span>&nbsp;<span class="op" id="2743691">!=</span>&nbsp;<span class="num" id="2743694">0</span>&nbsp;<span class="op" id="2743696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743701">ptr</span>&nbsp;<span class="op" id="2743705">=</span>&nbsp;<span class="op" id="2743707">*</span><span class="op" id="2743708">(</span><span class="op" id="2743709">*</span><span class="ident" id="2743710">unsafe</span><span class="op" id="2743716">.</span><span class="ident" id="2743717">Pointer</span><span class="op" id="2743724">)</span><span class="op" id="2743725">(</span><span class="ident" id="2743726">ptr</span><span class="op" id="2743729">)</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2743733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743737">return</span>&nbsp;<span class="ident" id="2743744">ptr</span>&nbsp;<span class="op" id="2743748">==</span>&nbsp;<span class="ident" id="2743751">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743756">case</span>&nbsp;<span class="ident" id="2743761">Interface</span><span class="op" id="2743770">,</span>&nbsp;<span class="ident" id="2743772">Slice</span><span class="op" id="2743777">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2743781">//&nbsp;Both&nbsp;interface&nbsp;and&nbsp;slice&nbsp;are&nbsp;nil&nbsp;if&nbsp;first&nbsp;word&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2743839">//&nbsp;Both&nbsp;are&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743898">return</span>&nbsp;<span class="op" id="2743905">*</span><span class="op" id="2743906">(</span><span class="op" id="2743907">*</span><span class="ident" id="2743908">unsafe</span><span class="op" id="2743914">.</span><span class="ident" id="2743915">Pointer</span><span class="op" id="2743922">)</span><span class="op" id="2743923">(</span><span class="ident" id="2743924">v</span><span class="op" id="2743925">.</span><span class="ident" id="2743926">ptr</span><span class="op" id="2743929">)</span>&nbsp;<span class="op" id="2743931">==</span>&nbsp;<span class="ident" id="2743934">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2743939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2743942">panic</span><span class="op" id="2743947">(</span><span class="op" id="2743948">&amp;</span><span class="ident" id="2743949">ValueError</span><span class="op" id="2743959">{</span><span class="string" id="2743960">&#34;reflect.Value.IsNil&#34;</span><span class="op" id="2743981">,</span>&nbsp;<span class="ident" id="2743983">v</span><span class="op" id="2743984">.</span><span class="ident" id="2743985">kind</span><span class="op" id="2743989">(</span><span class="op" id="2743990">)</span><span class="op" id="2743991">}</span><span class="op" id="2743992">)</span><br>
<span class="lineno"></span><span class="op" id="2743994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span><span class="comment" id="2743997">//&nbsp;IsValid&nbsp;returns&nbsp;true&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2744046">//&nbsp;It&nbsp;returns&nbsp;false&nbsp;if&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2744090">//&nbsp;If&nbsp;IsValid&nbsp;returns&nbsp;false,&nbsp;all&nbsp;other&nbsp;methods&nbsp;except&nbsp;String&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2744158">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2744219">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno">950</span><span class="keyword" id="2744287">func</span>&nbsp;<span class="op" id="2744292">(</span><span class="ident" id="2744293">v</span>&nbsp;<span class="ident" id="2744295">Value</span><span class="op" id="2744300">)</span>&nbsp;<span class="ident" id="2744302">IsValid</span><span class="op" id="2744309">(</span><span class="op" id="2744310">)</span>&nbsp;<span class="builtintype" id="2744312">bool</span>&nbsp;<span class="op" id="2744317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744320">return</span>&nbsp;<span class="ident" id="2744327">v</span><span class="op" id="2744328">.</span><span class="ident" id="2744329">flag</span>&nbsp;<span class="op" id="2744334">!=</span>&nbsp;<span class="num" id="2744337">0</span><br>
<span class="lineno"></span><span class="op" id="2744339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2744342">//&nbsp;Kind&nbsp;returns&nbsp;v&#39;s&nbsp;Kind.</span><br>
<span class="lineno">955</span><span class="comment" id="2744368">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;(IsValid&nbsp;returns&nbsp;false),&nbsp;Kind&nbsp;returns&nbsp;Invalid.</span><br>
<span class="lineno"></span><span class="keyword" id="2744441">func</span>&nbsp;<span class="op" id="2744446">(</span><span class="ident" id="2744447">v</span>&nbsp;<span class="ident" id="2744449">Value</span><span class="op" id="2744454">)</span>&nbsp;<span class="ident" id="2744456">Kind</span><span class="op" id="2744460">(</span><span class="op" id="2744461">)</span>&nbsp;<span class="ident" id="2744463">Kind</span>&nbsp;<span class="op" id="2744468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744471">return</span>&nbsp;<span class="ident" id="2744478">v</span><span class="op" id="2744479">.</span><span class="ident" id="2744480">kind</span><span class="op" id="2744484">(</span><span class="op" id="2744485">)</span><br>
<span class="lineno"></span><span class="op" id="2744487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">960</span><span class="comment" id="2744490">//&nbsp;Len&nbsp;returns&nbsp;v&#39;s&nbsp;length.</span><br>
<span class="lineno"></span><span class="comment" id="2744517">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;Map,&nbsp;Slice,&nbsp;or&nbsp;String.</span><br>
<span class="lineno"></span><span class="keyword" id="2744585">func</span>&nbsp;<span class="op" id="2744590">(</span><span class="ident" id="2744591">v</span>&nbsp;<span class="ident" id="2744593">Value</span><span class="op" id="2744598">)</span>&nbsp;<span class="ident" id="2744600">Len</span><span class="op" id="2744603">(</span><span class="op" id="2744604">)</span>&nbsp;<span class="builtintype" id="2744606">int</span>&nbsp;<span class="op" id="2744610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2744613">k</span>&nbsp;<span class="op" id="2744615">:=</span>&nbsp;<span class="ident" id="2744618">v</span><span class="op" id="2744619">.</span><span class="ident" id="2744620">kind</span><span class="op" id="2744624">(</span><span class="op" id="2744625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744628">switch</span>&nbsp;<span class="ident" id="2744635">k</span>&nbsp;<span class="op" id="2744637">{</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744640">case</span>&nbsp;<span class="ident" id="2744645">Array</span><span class="op" id="2744650">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2744654">tt</span>&nbsp;<span class="op" id="2744657">:=</span>&nbsp;<span class="op" id="2744660">(</span><span class="op" id="2744661">*</span><span class="ident" id="2744662">arrayType</span><span class="op" id="2744671">)</span><span class="op" id="2744672">(</span><span class="ident" id="2744673">unsafe</span><span class="op" id="2744679">.</span><span class="ident" id="2744680">Pointer</span><span class="op" id="2744687">(</span><span class="ident" id="2744688">v</span><span class="op" id="2744689">.</span><span class="ident" id="2744690">typ</span><span class="op" id="2744693">)</span><span class="op" id="2744694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744698">return</span>&nbsp;<span class="builtintype" id="2744705">int</span><span class="op" id="2744708">(</span><span class="ident" id="2744709">tt</span><span class="op" id="2744711">.</span><span class="builtinfunc" id="2744712">len</span><span class="op" id="2744715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744718">case</span>&nbsp;<span class="ident" id="2744723">Chan</span><span class="op" id="2744727">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744731">return</span>&nbsp;<span class="ident" id="2744738">chanlen</span><span class="op" id="2744745">(</span><span class="ident" id="2744746">v</span><span class="op" id="2744747">.</span><span class="ident" id="2744748">pointer</span><span class="op" id="2744755">(</span><span class="op" id="2744756">)</span><span class="op" id="2744757">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744760">case</span>&nbsp;<span class="ident" id="2744765">Map</span><span class="op" id="2744768">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744772">return</span>&nbsp;<span class="ident" id="2744779">maplen</span><span class="op" id="2744785">(</span><span class="ident" id="2744786">v</span><span class="op" id="2744787">.</span><span class="ident" id="2744788">pointer</span><span class="op" id="2744795">(</span><span class="op" id="2744796">)</span><span class="op" id="2744797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744800">case</span>&nbsp;<span class="ident" id="2744805">Slice</span><span class="op" id="2744810">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744814">//&nbsp;Slice&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744866">return</span>&nbsp;<span class="op" id="2744873">(</span><span class="op" id="2744874">*</span><span class="ident" id="2744875">sliceHeader</span><span class="op" id="2744886">)</span><span class="op" id="2744887">(</span><span class="ident" id="2744888">v</span><span class="op" id="2744889">.</span><span class="ident" id="2744890">ptr</span><span class="op" id="2744893">)</span><span class="op" id="2744894">.</span><span class="ident" id="2744895">Len</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744900">case</span>&nbsp;<span class="ident" id="2744905">String</span><span class="op" id="2744911">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744915">//&nbsp;String&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744968">return</span>&nbsp;<span class="op" id="2744975">(</span><span class="op" id="2744976">*</span><span class="ident" id="2744977">stringHeader</span><span class="op" id="2744989">)</span><span class="op" id="2744990">(</span><span class="ident" id="2744991">v</span><span class="op" id="2744992">.</span><span class="ident" id="2744993">ptr</span><span class="op" id="2744996">)</span><span class="op" id="2744997">.</span><span class="ident" id="2744998">Len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2745003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2745006">panic</span><span class="op" id="2745011">(</span><span class="op" id="2745012">&amp;</span><span class="ident" id="2745013">ValueError</span><span class="op" id="2745023">{</span><span class="string" id="2745024">&#34;reflect.Value.Len&#34;</span><span class="op" id="2745043">,</span>&nbsp;<span class="ident" id="2745045">v</span><span class="op" id="2745046">.</span><span class="ident" id="2745047">kind</span><span class="op" id="2745051">(</span><span class="op" id="2745052">)</span><span class="op" id="2745053">}</span><span class="op" id="2745054">)</span><br>
<span class="lineno">980</span><span class="op" id="2745056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2745059">//&nbsp;MapIndex&nbsp;returns&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2745123">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2745160">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;key&nbsp;is&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;map&nbsp;or&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno">985</span><span class="comment" id="2745250">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;the&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2745321">func</span>&nbsp;<span class="op" id="2745326">(</span><span class="ident" id="2745327">v</span>&nbsp;<span class="ident" id="2745329">Value</span><span class="op" id="2745334">)</span>&nbsp;<span class="ident" id="2745336">MapIndex</span><span class="op" id="2745344">(</span><span class="ident" id="2745345">key</span>&nbsp;<span class="ident" id="2745349">Value</span><span class="op" id="2745354">)</span>&nbsp;<span class="ident" id="2745356">Value</span>&nbsp;<span class="op" id="2745362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745365">v</span><span class="op" id="2745366">.</span><span class="ident" id="2745367">mustBe</span><span class="op" id="2745373">(</span><span class="ident" id="2745374">Map</span><span class="op" id="2745377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745380">tt</span>&nbsp;<span class="op" id="2745383">:=</span>&nbsp;<span class="op" id="2745386">(</span><span class="op" id="2745387">*</span><span class="ident" id="2745388">mapType</span><span class="op" id="2745395">)</span><span class="op" id="2745396">(</span><span class="ident" id="2745397">unsafe</span><span class="op" id="2745403">.</span><span class="ident" id="2745404">Pointer</span><span class="op" id="2745411">(</span><span class="ident" id="2745412">v</span><span class="op" id="2745413">.</span><span class="ident" id="2745414">typ</span><span class="op" id="2745417">)</span><span class="op" id="2745418">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2745422">//&nbsp;Do&nbsp;not&nbsp;require&nbsp;key&nbsp;to&nbsp;be&nbsp;exported,&nbsp;so&nbsp;that&nbsp;DeepEqual</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2745479">//&nbsp;and&nbsp;other&nbsp;programs&nbsp;can&nbsp;use&nbsp;all&nbsp;the&nbsp;keys&nbsp;returned&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2745535">//&nbsp;MapKeys&nbsp;as&nbsp;arguments&nbsp;to&nbsp;MapIndex.&nbsp;&nbsp;If&nbsp;either&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2745592">//&nbsp;or&nbsp;the&nbsp;key&nbsp;is&nbsp;unexported,&nbsp;though,&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2745649">//&nbsp;considered&nbsp;unexported.&nbsp;&nbsp;This&nbsp;is&nbsp;consistent&nbsp;with&nbsp;the</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2745705">//&nbsp;behavior&nbsp;for&nbsp;structs,&nbsp;which&nbsp;allow&nbsp;read&nbsp;but&nbsp;not&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2745762">//&nbsp;of&nbsp;unexported&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745788">key</span>&nbsp;<span class="op" id="2745792">=</span>&nbsp;<span class="ident" id="2745794">key</span><span class="op" id="2745797">.</span><span class="ident" id="2745798">assignTo</span><span class="op" id="2745806">(</span><span class="string" id="2745807">&#34;reflect.Value.MapIndex&#34;</span><span class="op" id="2745831">,</span>&nbsp;<span class="ident" id="2745833">tt</span><span class="op" id="2745835">.</span><span class="ident" id="2745836">key</span><span class="op" id="2745839">,</span>&nbsp;<span class="ident" id="2745841">nil</span><span class="op" id="2745844">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745848">var</span>&nbsp;<span class="ident" id="2745852">k</span>&nbsp;<span class="ident" id="2745854">unsafe</span><span class="op" id="2745860">.</span><span class="ident" id="2745861">Pointer</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745870">if</span>&nbsp;<span class="ident" id="2745873">key</span><span class="op" id="2745876">.</span><span class="ident" id="2745877">flag</span><span class="op" id="2745881">&amp;</span><span class="ident" id="2745882">flagIndir</span>&nbsp;<span class="op" id="2745892">!=</span>&nbsp;<span class="num" id="2745895">0</span>&nbsp;<span class="op" id="2745897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745901">k</span>&nbsp;<span class="op" id="2745903">=</span>&nbsp;<span class="ident" id="2745905">key</span><span class="op" id="2745908">.</span><span class="ident" id="2745909">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2745914">}</span>&nbsp;<span class="keyword" id="2745916">else</span>&nbsp;<span class="op" id="2745921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745925">k</span>&nbsp;<span class="op" id="2745927">=</span>&nbsp;<span class="ident" id="2745929">unsafe</span><span class="op" id="2745935">.</span><span class="ident" id="2745936">Pointer</span><span class="op" id="2745943">(</span><span class="op" id="2745944">&amp;</span><span class="ident" id="2745945">key</span><span class="op" id="2745948">.</span><span class="ident" id="2745949">ptr</span><span class="op" id="2745952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2745955">}</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745958">e</span>&nbsp;<span class="op" id="2745960">:=</span>&nbsp;<span class="ident" id="2745963">mapaccess</span><span class="op" id="2745972">(</span><span class="ident" id="2745973">v</span><span class="op" id="2745974">.</span><span class="ident" id="2745975">typ</span><span class="op" id="2745978">,</span>&nbsp;<span class="ident" id="2745980">v</span><span class="op" id="2745981">.</span><span class="ident" id="2745982">pointer</span><span class="op" id="2745989">(</span><span class="op" id="2745990">)</span><span class="op" id="2745991">,</span>&nbsp;<span class="ident" id="2745993">k</span><span class="op" id="2745994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745997">if</span>&nbsp;<span class="ident" id="2746000">e</span>&nbsp;<span class="op" id="2746002">==</span>&nbsp;<span class="ident" id="2746005">nil</span>&nbsp;<span class="op" id="2746009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746013">return</span>&nbsp;<span class="ident" id="2746020">Value</span><span class="op" id="2746025">{</span><span class="op" id="2746026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2746029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746032">typ</span>&nbsp;<span class="op" id="2746036">:=</span>&nbsp;<span class="ident" id="2746039">tt</span><span class="op" id="2746041">.</span><span class="ident" id="2746042">elem</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746048">fl</span>&nbsp;<span class="op" id="2746051">:=</span>&nbsp;<span class="op" id="2746054">(</span><span class="ident" id="2746055">v</span><span class="op" id="2746056">.</span><span class="ident" id="2746057">flag</span>&nbsp;<span class="op" id="2746062">|</span>&nbsp;<span class="ident" id="2746064">key</span><span class="op" id="2746067">.</span><span class="ident" id="2746068">flag</span><span class="op" id="2746072">)</span>&nbsp;<span class="op" id="2746074">&amp;</span>&nbsp;<span class="ident" id="2746076">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746084">fl</span>&nbsp;<span class="op" id="2746087">|=</span>&nbsp;<span class="ident" id="2746090">flag</span><span class="op" id="2746094">(</span><span class="ident" id="2746095">typ</span><span class="op" id="2746098">.</span><span class="ident" id="2746099">Kind</span><span class="op" id="2746103">(</span><span class="op" id="2746104">)</span><span class="op" id="2746105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746108">if</span>&nbsp;<span class="ident" id="2746111">ifaceIndir</span><span class="op" id="2746121">(</span><span class="ident" id="2746122">typ</span><span class="op" id="2746125">)</span>&nbsp;<span class="op" id="2746127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2746131">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2746177">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746217">c</span>&nbsp;<span class="op" id="2746219">:=</span>&nbsp;<span class="ident" id="2746222">unsafe_New</span><span class="op" id="2746232">(</span><span class="ident" id="2746233">typ</span><span class="op" id="2746236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746240">memmove</span><span class="op" id="2746247">(</span><span class="ident" id="2746248">c</span><span class="op" id="2746249">,</span>&nbsp;<span class="ident" id="2746251">e</span><span class="op" id="2746252">,</span>&nbsp;<span class="ident" id="2746254">typ</span><span class="op" id="2746257">.</span><span class="ident" id="2746258">size</span><span class="op" id="2746262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746266">return</span>&nbsp;<span class="ident" id="2746273">Value</span><span class="op" id="2746278">{</span><span class="ident" id="2746279">typ</span><span class="op" id="2746282">,</span>&nbsp;<span class="ident" id="2746284">c</span><span class="op" id="2746285">,</span>&nbsp;<span class="ident" id="2746287">fl</span>&nbsp;<span class="op" id="2746290">|</span>&nbsp;<span class="ident" id="2746292">flagIndir</span><span class="op" id="2746301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2746304">}</span>&nbsp;<span class="keyword" id="2746306">else</span>&nbsp;<span class="op" id="2746311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746315">return</span>&nbsp;<span class="ident" id="2746322">Value</span><span class="op" id="2746327">{</span><span class="ident" id="2746328">typ</span><span class="op" id="2746331">,</span>&nbsp;<span class="op" id="2746333">*</span><span class="op" id="2746334">(</span><span class="op" id="2746335">*</span><span class="ident" id="2746336">unsafe</span><span class="op" id="2746342">.</span><span class="ident" id="2746343">Pointer</span><span class="op" id="2746350">)</span><span class="op" id="2746351">(</span><span class="ident" id="2746352">e</span><span class="op" id="2746353">)</span><span class="op" id="2746354">,</span>&nbsp;<span class="ident" id="2746356">fl</span><span class="op" id="2746358">}</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2746361">}</span><br>
<span class="lineno"></span><span class="op" id="2746363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2746366">//&nbsp;MapKeys&nbsp;returns&nbsp;a&nbsp;slice&nbsp;containing&nbsp;all&nbsp;the&nbsp;keys&nbsp;present&nbsp;in&nbsp;the&nbsp;map,</span><br>
<span class="lineno"></span><span class="comment" id="2746437">//&nbsp;in&nbsp;unspecified&nbsp;order.</span><br>
<span class="lineno">1025</span><span class="comment" id="2746462">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2746499">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;empty&nbsp;slice&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="2746555">func</span>&nbsp;<span class="op" id="2746560">(</span><span class="ident" id="2746561">v</span>&nbsp;<span class="ident" id="2746563">Value</span><span class="op" id="2746568">)</span>&nbsp;<span class="ident" id="2746570">MapKeys</span><span class="op" id="2746577">(</span><span class="op" id="2746578">)</span>&nbsp;<span class="op" id="2746580">[</span><span class="op" id="2746581">]</span><span class="ident" id="2746582">Value</span>&nbsp;<span class="op" id="2746588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746591">v</span><span class="op" id="2746592">.</span><span class="ident" id="2746593">mustBe</span><span class="op" id="2746599">(</span><span class="ident" id="2746600">Map</span><span class="op" id="2746603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746606">tt</span>&nbsp;<span class="op" id="2746609">:=</span>&nbsp;<span class="op" id="2746612">(</span><span class="op" id="2746613">*</span><span class="ident" id="2746614">mapType</span><span class="op" id="2746621">)</span><span class="op" id="2746622">(</span><span class="ident" id="2746623">unsafe</span><span class="op" id="2746629">.</span><span class="ident" id="2746630">Pointer</span><span class="op" id="2746637">(</span><span class="ident" id="2746638">v</span><span class="op" id="2746639">.</span><span class="ident" id="2746640">typ</span><span class="op" id="2746643">)</span><span class="op" id="2746644">)</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746647">keyType</span>&nbsp;<span class="op" id="2746655">:=</span>&nbsp;<span class="ident" id="2746658">tt</span><span class="op" id="2746660">.</span><span class="ident" id="2746661">key</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746667">fl</span>&nbsp;<span class="op" id="2746670">:=</span>&nbsp;<span class="ident" id="2746673">v</span><span class="op" id="2746674">.</span><span class="ident" id="2746675">flag</span><span class="op" id="2746679">&amp;</span><span class="ident" id="2746680">flagRO</span>&nbsp;<span class="op" id="2746687">|</span>&nbsp;<span class="ident" id="2746689">flag</span><span class="op" id="2746693">(</span><span class="ident" id="2746694">keyType</span><span class="op" id="2746701">.</span><span class="ident" id="2746702">Kind</span><span class="op" id="2746706">(</span><span class="op" id="2746707">)</span><span class="op" id="2746708">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746712">m</span>&nbsp;<span class="op" id="2746714">:=</span>&nbsp;<span class="ident" id="2746717">v</span><span class="op" id="2746718">.</span><span class="ident" id="2746719">pointer</span><span class="op" id="2746726">(</span><span class="op" id="2746727">)</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746730">mlen</span>&nbsp;<span class="op" id="2746735">:=</span>&nbsp;<span class="builtintype" id="2746738">int</span><span class="op" id="2746741">(</span><span class="num" id="2746742">0</span><span class="op" id="2746743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746746">if</span>&nbsp;<span class="ident" id="2746749">m</span>&nbsp;<span class="op" id="2746751">!=</span>&nbsp;<span class="ident" id="2746754">nil</span>&nbsp;<span class="op" id="2746758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746762">mlen</span>&nbsp;<span class="op" id="2746767">=</span>&nbsp;<span class="ident" id="2746769">maplen</span><span class="op" id="2746775">(</span><span class="ident" id="2746776">m</span><span class="op" id="2746777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2746780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746783">it</span>&nbsp;<span class="op" id="2746786">:=</span>&nbsp;<span class="ident" id="2746789">mapiterinit</span><span class="op" id="2746800">(</span><span class="ident" id="2746801">v</span><span class="op" id="2746802">.</span><span class="ident" id="2746803">typ</span><span class="op" id="2746806">,</span>&nbsp;<span class="ident" id="2746808">m</span><span class="op" id="2746809">)</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746812">a</span>&nbsp;<span class="op" id="2746814">:=</span>&nbsp;<span class="builtinfunc" id="2746817">make</span><span class="op" id="2746821">(</span><span class="op" id="2746822">[</span><span class="op" id="2746823">]</span><span class="ident" id="2746824">Value</span><span class="op" id="2746829">,</span>&nbsp;<span class="ident" id="2746831">mlen</span><span class="op" id="2746835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746838">var</span>&nbsp;<span class="ident" id="2746842">i</span>&nbsp;<span class="builtintype" id="2746844">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746849">for</span>&nbsp;<span class="ident" id="2746853">i</span>&nbsp;<span class="op" id="2746855">=</span>&nbsp;<span class="num" id="2746857">0</span><span class="op" id="2746858">;</span>&nbsp;<span class="ident" id="2746860">i</span>&nbsp;<span class="op" id="2746862">&lt;</span>&nbsp;<span class="builtinfunc" id="2746864">len</span><span class="op" id="2746867">(</span><span class="ident" id="2746868">a</span><span class="op" id="2746869">)</span><span class="op" id="2746870">;</span>&nbsp;<span class="ident" id="2746872">i</span><span class="op" id="2746873">++</span>&nbsp;<span class="op" id="2746876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746880">key</span>&nbsp;<span class="op" id="2746884">:=</span>&nbsp;<span class="ident" id="2746887">mapiterkey</span><span class="op" id="2746897">(</span><span class="ident" id="2746898">it</span><span class="op" id="2746900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746904">if</span>&nbsp;<span class="ident" id="2746907">key</span>&nbsp;<span class="op" id="2746911">==</span>&nbsp;<span class="ident" id="2746914">nil</span>&nbsp;<span class="op" id="2746918">{</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2746923">//&nbsp;Someone&nbsp;deleted&nbsp;an&nbsp;entry&nbsp;from&nbsp;the&nbsp;map&nbsp;since&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2746976">//&nbsp;called&nbsp;maplen&nbsp;above.&nbsp;&nbsp;It&#39;s&nbsp;a&nbsp;data&nbsp;race,&nbsp;but&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2747034">//&nbsp;we&nbsp;can&nbsp;do&nbsp;about&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747060">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2747068">}</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747072">if</span>&nbsp;<span class="ident" id="2747075">ifaceIndir</span><span class="op" id="2747085">(</span><span class="ident" id="2747086">keyType</span><span class="op" id="2747093">)</span>&nbsp;<span class="op" id="2747095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2747100">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2747147">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747188">c</span>&nbsp;<span class="op" id="2747190">:=</span>&nbsp;<span class="ident" id="2747193">unsafe_New</span><span class="op" id="2747203">(</span><span class="ident" id="2747204">keyType</span><span class="op" id="2747211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747216">memmove</span><span class="op" id="2747223">(</span><span class="ident" id="2747224">c</span><span class="op" id="2747225">,</span>&nbsp;<span class="ident" id="2747227">key</span><span class="op" id="2747230">,</span>&nbsp;<span class="ident" id="2747232">keyType</span><span class="op" id="2747239">.</span><span class="ident" id="2747240">size</span><span class="op" id="2747244">)</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747249">a</span><span class="op" id="2747250">[</span><span class="ident" id="2747251">i</span><span class="op" id="2747252">]</span>&nbsp;<span class="op" id="2747254">=</span>&nbsp;<span class="ident" id="2747256">Value</span><span class="op" id="2747261">{</span><span class="ident" id="2747262">keyType</span><span class="op" id="2747269">,</span>&nbsp;<span class="ident" id="2747271">c</span><span class="op" id="2747272">,</span>&nbsp;<span class="ident" id="2747274">fl</span>&nbsp;<span class="op" id="2747277">|</span>&nbsp;<span class="ident" id="2747279">flagIndir</span><span class="op" id="2747288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2747292">}</span>&nbsp;<span class="keyword" id="2747294">else</span>&nbsp;<span class="op" id="2747299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747304">a</span><span class="op" id="2747305">[</span><span class="ident" id="2747306">i</span><span class="op" id="2747307">]</span>&nbsp;<span class="op" id="2747309">=</span>&nbsp;<span class="ident" id="2747311">Value</span><span class="op" id="2747316">{</span><span class="ident" id="2747317">keyType</span><span class="op" id="2747324">,</span>&nbsp;<span class="op" id="2747326">*</span><span class="op" id="2747327">(</span><span class="op" id="2747328">*</span><span class="ident" id="2747329">unsafe</span><span class="op" id="2747335">.</span><span class="ident" id="2747336">Pointer</span><span class="op" id="2747343">)</span><span class="op" id="2747344">(</span><span class="ident" id="2747345">key</span><span class="op" id="2747348">)</span><span class="op" id="2747349">,</span>&nbsp;<span class="ident" id="2747351">fl</span><span class="op" id="2747353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2747357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747361">mapiternext</span><span class="op" id="2747372">(</span><span class="ident" id="2747373">it</span><span class="op" id="2747375">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2747378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747381">return</span>&nbsp;<span class="ident" id="2747388">a</span><span class="op" id="2747389">[</span><span class="op" id="2747390">:</span><span class="ident" id="2747391">i</span><span class="op" id="2747392">]</span><br>
<span class="lineno"></span><span class="op" id="2747394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2747397">//&nbsp;Method&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;method.</span><br>
<span class="lineno">1065</span><span class="comment" id="2747466">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2747537">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2747609">//&nbsp;Method&nbsp;panics&nbsp;if&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2747681">func</span>&nbsp;<span class="op" id="2747686">(</span><span class="ident" id="2747687">v</span>&nbsp;<span class="ident" id="2747689">Value</span><span class="op" id="2747694">)</span>&nbsp;<span class="ident" id="2747696">Method</span><span class="op" id="2747702">(</span><span class="ident" id="2747703">i</span>&nbsp;<span class="builtintype" id="2747705">int</span><span class="op" id="2747708">)</span>&nbsp;<span class="ident" id="2747710">Value</span>&nbsp;<span class="op" id="2747716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747719">if</span>&nbsp;<span class="ident" id="2747722">v</span><span class="op" id="2747723">.</span><span class="ident" id="2747724">typ</span>&nbsp;<span class="op" id="2747728">==</span>&nbsp;<span class="ident" id="2747731">nil</span>&nbsp;<span class="op" id="2747735">{</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2747739">panic</span><span class="op" id="2747744">(</span><span class="op" id="2747745">&amp;</span><span class="ident" id="2747746">ValueError</span><span class="op" id="2747756">{</span><span class="string" id="2747757">&#34;reflect.Value.Method&#34;</span><span class="op" id="2747779">,</span>&nbsp;<span class="ident" id="2747781">Invalid</span><span class="op" id="2747788">}</span><span class="op" id="2747789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2747792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747795">if</span>&nbsp;<span class="ident" id="2747798">v</span><span class="op" id="2747799">.</span><span class="ident" id="2747800">flag</span><span class="op" id="2747804">&amp;</span><span class="ident" id="2747805">flagMethod</span>&nbsp;<span class="op" id="2747816">!=</span>&nbsp;<span class="num" id="2747819">0</span>&nbsp;<span class="op" id="2747821">||</span>&nbsp;<span class="builtintype" id="2747824">uint</span><span class="op" id="2747828">(</span><span class="ident" id="2747829">i</span><span class="op" id="2747830">)</span>&nbsp;<span class="op" id="2747832">&gt;=</span>&nbsp;<span class="builtintype" id="2747835">uint</span><span class="op" id="2747839">(</span><span class="ident" id="2747840">v</span><span class="op" id="2747841">.</span><span class="ident" id="2747842">typ</span><span class="op" id="2747845">.</span><span class="ident" id="2747846">NumMethod</span><span class="op" id="2747855">(</span><span class="op" id="2747856">)</span><span class="op" id="2747857">)</span>&nbsp;<span class="op" id="2747859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2747863">panic</span><span class="op" id="2747868">(</span><span class="string" id="2747869">&#34;reflect:&nbsp;Method&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2747905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2747908">}</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747911">if</span>&nbsp;<span class="ident" id="2747914">v</span><span class="op" id="2747915">.</span><span class="ident" id="2747916">typ</span><span class="op" id="2747919">.</span><span class="ident" id="2747920">Kind</span><span class="op" id="2747924">(</span><span class="op" id="2747925">)</span>&nbsp;<span class="op" id="2747927">==</span>&nbsp;<span class="ident" id="2747930">Interface</span>&nbsp;<span class="op" id="2747940">&amp;&amp;</span>&nbsp;<span class="ident" id="2747943">v</span><span class="op" id="2747944">.</span><span class="ident" id="2747945">IsNil</span><span class="op" id="2747950">(</span><span class="op" id="2747951">)</span>&nbsp;<span class="op" id="2747953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2747957">panic</span><span class="op" id="2747962">(</span><span class="string" id="2747963">&#34;reflect:&nbsp;Method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2748003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2748006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748009">fl</span>&nbsp;<span class="op" id="2748012">:=</span>&nbsp;<span class="ident" id="2748015">v</span><span class="op" id="2748016">.</span><span class="ident" id="2748017">flag</span>&nbsp;<span class="op" id="2748022">&amp;</span>&nbsp;<span class="op" id="2748024">(</span><span class="ident" id="2748025">flagRO</span>&nbsp;<span class="op" id="2748032">|</span>&nbsp;<span class="ident" id="2748034">flagIndir</span><span class="op" id="2748043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748046">fl</span>&nbsp;<span class="op" id="2748049">|=</span>&nbsp;<span class="ident" id="2748052">flag</span><span class="op" id="2748056">(</span><span class="ident" id="2748057">Func</span><span class="op" id="2748061">)</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748064">fl</span>&nbsp;<span class="op" id="2748067">|=</span>&nbsp;<span class="ident" id="2748070">flag</span><span class="op" id="2748074">(</span><span class="ident" id="2748075">i</span><span class="op" id="2748076">)</span><span class="op" id="2748077">&lt;&lt;</span><span class="ident" id="2748079">flagMethodShift</span>&nbsp;<span class="op" id="2748095">|</span>&nbsp;<span class="ident" id="2748097">flagMethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748109">return</span>&nbsp;<span class="ident" id="2748116">Value</span><span class="op" id="2748121">{</span><span class="ident" id="2748122">v</span><span class="op" id="2748123">.</span><span class="ident" id="2748124">typ</span><span class="op" id="2748127">,</span>&nbsp;<span class="ident" id="2748129">v</span><span class="op" id="2748130">.</span><span class="ident" id="2748131">ptr</span><span class="op" id="2748134">,</span>&nbsp;<span class="ident" id="2748136">fl</span><span class="op" id="2748138">}</span><br>
<span class="lineno"></span><span class="op" id="2748140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2748143">//&nbsp;NumMethod&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;methods&nbsp;in&nbsp;the&nbsp;value&#39;s&nbsp;method&nbsp;set.</span><br>
<span class="lineno">1085</span><span class="keyword" id="2748213">func</span>&nbsp;<span class="op" id="2748218">(</span><span class="ident" id="2748219">v</span>&nbsp;<span class="ident" id="2748221">Value</span><span class="op" id="2748226">)</span>&nbsp;<span class="ident" id="2748228">NumMethod</span><span class="op" id="2748237">(</span><span class="op" id="2748238">)</span>&nbsp;<span class="builtintype" id="2748240">int</span>&nbsp;<span class="op" id="2748244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748247">if</span>&nbsp;<span class="ident" id="2748250">v</span><span class="op" id="2748251">.</span><span class="ident" id="2748252">typ</span>&nbsp;<span class="op" id="2748256">==</span>&nbsp;<span class="ident" id="2748259">nil</span>&nbsp;<span class="op" id="2748263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2748267">panic</span><span class="op" id="2748272">(</span><span class="op" id="2748273">&amp;</span><span class="ident" id="2748274">ValueError</span><span class="op" id="2748284">{</span><span class="string" id="2748285">&#34;reflect.Value.NumMethod&#34;</span><span class="op" id="2748310">,</span>&nbsp;<span class="ident" id="2748312">Invalid</span><span class="op" id="2748319">}</span><span class="op" id="2748320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2748323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748326">if</span>&nbsp;<span class="ident" id="2748329">v</span><span class="op" id="2748330">.</span><span class="ident" id="2748331">flag</span><span class="op" id="2748335">&amp;</span><span class="ident" id="2748336">flagMethod</span>&nbsp;<span class="op" id="2748347">!=</span>&nbsp;<span class="num" id="2748350">0</span>&nbsp;<span class="op" id="2748352">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748356">return</span>&nbsp;<span class="num" id="2748363">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2748366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748369">return</span>&nbsp;<span class="ident" id="2748376">v</span><span class="op" id="2748377">.</span><span class="ident" id="2748378">typ</span><span class="op" id="2748381">.</span><span class="ident" id="2748382">NumMethod</span><span class="op" id="2748391">(</span><span class="op" id="2748392">)</span><br>
<span class="lineno"></span><span class="op" id="2748394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span><span class="comment" id="2748397">//&nbsp;MethodByName&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2748466">//&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2748495">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2748566">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2748638">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;method&nbsp;was&nbsp;found.</span><br>
<span class="lineno">1100</span><span class="keyword" id="2748691">func</span>&nbsp;<span class="op" id="2748696">(</span><span class="ident" id="2748697">v</span>&nbsp;<span class="ident" id="2748699">Value</span><span class="op" id="2748704">)</span>&nbsp;<span class="ident" id="2748706">MethodByName</span><span class="op" id="2748718">(</span><span class="ident" id="2748719">name</span>&nbsp;<span class="builtintype" id="2748724">string</span><span class="op" id="2748730">)</span>&nbsp;<span class="ident" id="2748732">Value</span>&nbsp;<span class="op" id="2748738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748741">if</span>&nbsp;<span class="ident" id="2748744">v</span><span class="op" id="2748745">.</span><span class="ident" id="2748746">typ</span>&nbsp;<span class="op" id="2748750">==</span>&nbsp;<span class="ident" id="2748753">nil</span>&nbsp;<span class="op" id="2748757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2748761">panic</span><span class="op" id="2748766">(</span><span class="op" id="2748767">&amp;</span><span class="ident" id="2748768">ValueError</span><span class="op" id="2748778">{</span><span class="string" id="2748779">&#34;reflect.Value.MethodByName&#34;</span><span class="op" id="2748807">,</span>&nbsp;<span class="ident" id="2748809">Invalid</span><span class="op" id="2748816">}</span><span class="op" id="2748817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2748820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748823">if</span>&nbsp;<span class="ident" id="2748826">v</span><span class="op" id="2748827">.</span><span class="ident" id="2748828">flag</span><span class="op" id="2748832">&amp;</span><span class="ident" id="2748833">flagMethod</span>&nbsp;<span class="op" id="2748844">!=</span>&nbsp;<span class="num" id="2748847">0</span>&nbsp;<span class="op" id="2748849">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748853">return</span>&nbsp;<span class="ident" id="2748860">Value</span><span class="op" id="2748865">{</span><span class="op" id="2748866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2748869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748872">m</span><span class="op" id="2748873">,</span>&nbsp;<span class="ident" id="2748875">ok</span>&nbsp;<span class="op" id="2748878">:=</span>&nbsp;<span class="ident" id="2748881">v</span><span class="op" id="2748882">.</span><span class="ident" id="2748883">typ</span><span class="op" id="2748886">.</span><span class="ident" id="2748887">MethodByName</span><span class="op" id="2748899">(</span><span class="ident" id="2748900">name</span><span class="op" id="2748904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748907">if</span>&nbsp;<span class="op" id="2748910">!</span><span class="ident" id="2748911">ok</span>&nbsp;<span class="op" id="2748914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748918">return</span>&nbsp;<span class="ident" id="2748925">Value</span><span class="op" id="2748930">{</span><span class="op" id="2748931">}</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2748934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748937">return</span>&nbsp;<span class="ident" id="2748944">v</span><span class="op" id="2748945">.</span><span class="ident" id="2748946">Method</span><span class="op" id="2748952">(</span><span class="ident" id="2748953">m</span><span class="op" id="2748954">.</span><span class="ident" id="2748955">Index</span><span class="op" id="2748960">)</span><br>
<span class="lineno"></span><span class="op" id="2748962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2748965">//&nbsp;NumField&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno">1115</span><span class="comment" id="2749023">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2749063">func</span>&nbsp;<span class="op" id="2749068">(</span><span class="ident" id="2749069">v</span>&nbsp;<span class="ident" id="2749071">Value</span><span class="op" id="2749076">)</span>&nbsp;<span class="ident" id="2749078">NumField</span><span class="op" id="2749086">(</span><span class="op" id="2749087">)</span>&nbsp;<span class="builtintype" id="2749089">int</span>&nbsp;<span class="op" id="2749093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749096">v</span><span class="op" id="2749097">.</span><span class="ident" id="2749098">mustBe</span><span class="op" id="2749104">(</span><span class="ident" id="2749105">Struct</span><span class="op" id="2749111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749114">tt</span>&nbsp;<span class="op" id="2749117">:=</span>&nbsp;<span class="op" id="2749120">(</span><span class="op" id="2749121">*</span><span class="ident" id="2749122">structType</span><span class="op" id="2749132">)</span><span class="op" id="2749133">(</span><span class="ident" id="2749134">unsafe</span><span class="op" id="2749140">.</span><span class="ident" id="2749141">Pointer</span><span class="op" id="2749148">(</span><span class="ident" id="2749149">v</span><span class="op" id="2749150">.</span><span class="ident" id="2749151">typ</span><span class="op" id="2749154">)</span><span class="op" id="2749155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749158">return</span>&nbsp;<span class="builtinfunc" id="2749165">len</span><span class="op" id="2749168">(</span><span class="ident" id="2749169">tt</span><span class="op" id="2749171">.</span><span class="ident" id="2749172">fields</span><span class="op" id="2749178">)</span><br>
<span class="lineno">1120</span><span class="op" id="2749180">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2749183">//&nbsp;OverflowComplex&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;complex128&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2749270">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128.</span><br>
<span class="lineno"></span><span class="keyword" id="2749327">func</span>&nbsp;<span class="op" id="2749332">(</span><span class="ident" id="2749333">v</span>&nbsp;<span class="ident" id="2749335">Value</span><span class="op" id="2749340">)</span>&nbsp;<span class="ident" id="2749342">OverflowComplex</span><span class="op" id="2749357">(</span><span class="ident" id="2749358">x</span>&nbsp;<span class="builtintype" id="2749360">complex128</span><span class="op" id="2749370">)</span>&nbsp;<span class="builtintype" id="2749372">bool</span>&nbsp;<span class="op" id="2749377">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749380">k</span>&nbsp;<span class="op" id="2749382">:=</span>&nbsp;<span class="ident" id="2749385">v</span><span class="op" id="2749386">.</span><span class="ident" id="2749387">kind</span><span class="op" id="2749391">(</span><span class="op" id="2749392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749395">switch</span>&nbsp;<span class="ident" id="2749402">k</span>&nbsp;<span class="op" id="2749404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749407">case</span>&nbsp;<span class="ident" id="2749412">Complex64</span><span class="op" id="2749421">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749425">return</span>&nbsp;<span class="ident" id="2749432">overflowFloat32</span><span class="op" id="2749447">(</span><span class="builtinfunc" id="2749448">real</span><span class="op" id="2749452">(</span><span class="ident" id="2749453">x</span><span class="op" id="2749454">)</span><span class="op" id="2749455">)</span>&nbsp;<span class="op" id="2749457">||</span>&nbsp;<span class="ident" id="2749460">overflowFloat32</span><span class="op" id="2749475">(</span><span class="builtinfunc" id="2749476">imag</span><span class="op" id="2749480">(</span><span class="ident" id="2749481">x</span><span class="op" id="2749482">)</span><span class="op" id="2749483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749486">case</span>&nbsp;<span class="ident" id="2749491">Complex128</span><span class="op" id="2749501">:</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749505">return</span>&nbsp;<span class="builtintype" id="2749512">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2749522">panic</span><span class="op" id="2749527">(</span><span class="op" id="2749528">&amp;</span><span class="ident" id="2749529">ValueError</span><span class="op" id="2749539">{</span><span class="string" id="2749540">&#34;reflect.Value.OverflowComplex&#34;</span><span class="op" id="2749571">,</span>&nbsp;<span class="ident" id="2749573">v</span><span class="op" id="2749574">.</span><span class="ident" id="2749575">kind</span><span class="op" id="2749579">(</span><span class="op" id="2749580">)</span><span class="op" id="2749581">}</span><span class="op" id="2749582">)</span><br>
<span class="lineno"></span><span class="op" id="2749584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1135</span><span class="comment" id="2749587">//&nbsp;OverflowFloat&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;float64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2749669">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64.</span><br>
<span class="lineno"></span><span class="keyword" id="2749721">func</span>&nbsp;<span class="op" id="2749726">(</span><span class="ident" id="2749727">v</span>&nbsp;<span class="ident" id="2749729">Value</span><span class="op" id="2749734">)</span>&nbsp;<span class="ident" id="2749736">OverflowFloat</span><span class="op" id="2749749">(</span><span class="ident" id="2749750">x</span>&nbsp;<span class="builtintype" id="2749752">float64</span><span class="op" id="2749759">)</span>&nbsp;<span class="builtintype" id="2749761">bool</span>&nbsp;<span class="op" id="2749766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749769">k</span>&nbsp;<span class="op" id="2749771">:=</span>&nbsp;<span class="ident" id="2749774">v</span><span class="op" id="2749775">.</span><span class="ident" id="2749776">kind</span><span class="op" id="2749780">(</span><span class="op" id="2749781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749784">switch</span>&nbsp;<span class="ident" id="2749791">k</span>&nbsp;<span class="op" id="2749793">{</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749796">case</span>&nbsp;<span class="ident" id="2749801">Float32</span><span class="op" id="2749808">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749812">return</span>&nbsp;<span class="ident" id="2749819">overflowFloat32</span><span class="op" id="2749834">(</span><span class="ident" id="2749835">x</span><span class="op" id="2749836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749839">case</span>&nbsp;<span class="ident" id="2749844">Float64</span><span class="op" id="2749851">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749855">return</span>&nbsp;<span class="builtintype" id="2749862">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749869">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2749872">panic</span><span class="op" id="2749877">(</span><span class="op" id="2749878">&amp;</span><span class="ident" id="2749879">ValueError</span><span class="op" id="2749889">{</span><span class="string" id="2749890">&#34;reflect.Value.OverflowFloat&#34;</span><span class="op" id="2749919">,</span>&nbsp;<span class="ident" id="2749921">v</span><span class="op" id="2749922">.</span><span class="ident" id="2749923">kind</span><span class="op" id="2749927">(</span><span class="op" id="2749928">)</span><span class="op" id="2749929">}</span><span class="op" id="2749930">)</span><br>
<span class="lineno"></span><span class="op" id="2749932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2749935">func</span>&nbsp;<span class="ident" id="2749940">overflowFloat32</span><span class="op" id="2749955">(</span><span class="ident" id="2749956">x</span>&nbsp;<span class="builtintype" id="2749958">float64</span><span class="op" id="2749965">)</span>&nbsp;<span class="builtintype" id="2749967">bool</span>&nbsp;<span class="op" id="2749972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749975">if</span>&nbsp;<span class="ident" id="2749978">x</span>&nbsp;<span class="op" id="2749980">&lt;</span>&nbsp;<span class="num" id="2749982">0</span>&nbsp;<span class="op" id="2749984">{</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749988">x</span>&nbsp;<span class="op" id="2749990">=</span>&nbsp;<span class="op" id="2749992">-</span><span class="ident" id="2749993">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749999">return</span>&nbsp;<span class="ident" id="2750006">math</span><span class="op" id="2750010">.</span><span class="ident" id="2750011">MaxFloat32</span>&nbsp;<span class="op" id="2750022">&lt;</span>&nbsp;<span class="ident" id="2750024">x</span>&nbsp;<span class="op" id="2750026">&amp;&amp;</span>&nbsp;<span class="ident" id="2750029">x</span>&nbsp;<span class="op" id="2750031">&lt;=</span>&nbsp;<span class="ident" id="2750034">math</span><span class="op" id="2750038">.</span><span class="ident" id="2750039">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="2750050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1155</span><span class="comment" id="2750053">//&nbsp;OverflowInt&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;int64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2750131">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno"></span><span class="keyword" id="2750198">func</span>&nbsp;<span class="op" id="2750203">(</span><span class="ident" id="2750204">v</span>&nbsp;<span class="ident" id="2750206">Value</span><span class="op" id="2750211">)</span>&nbsp;<span class="ident" id="2750213">OverflowInt</span><span class="op" id="2750224">(</span><span class="ident" id="2750225">x</span>&nbsp;<span class="ident" id="2750227">int64</span><span class="op" id="2750232">)</span>&nbsp;<span class="builtintype" id="2750234">bool</span>&nbsp;<span class="op" id="2750239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750242">k</span>&nbsp;<span class="op" id="2750244">:=</span>&nbsp;<span class="ident" id="2750247">v</span><span class="op" id="2750248">.</span><span class="ident" id="2750249">kind</span><span class="op" id="2750253">(</span><span class="op" id="2750254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750257">switch</span>&nbsp;<span class="ident" id="2750264">k</span>&nbsp;<span class="op" id="2750266">{</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750269">case</span>&nbsp;<span class="ident" id="2750274">Int</span><span class="op" id="2750277">,</span>&nbsp;<span class="ident" id="2750279">Int8</span><span class="op" id="2750283">,</span>&nbsp;<span class="ident" id="2750285">Int16</span><span class="op" id="2750290">,</span>&nbsp;<span class="ident" id="2750292">Int32</span><span class="op" id="2750297">,</span>&nbsp;<span class="ident" id="2750299">Int64</span><span class="op" id="2750304">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750308">bitSize</span>&nbsp;<span class="op" id="2750316">:=</span>&nbsp;<span class="ident" id="2750319">v</span><span class="op" id="2750320">.</span><span class="ident" id="2750321">typ</span><span class="op" id="2750324">.</span><span class="ident" id="2750325">size</span>&nbsp;<span class="op" id="2750330">*</span>&nbsp;<span class="num" id="2750332">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750336">trunc</span>&nbsp;<span class="op" id="2750342">:=</span>&nbsp;<span class="op" id="2750345">(</span><span class="ident" id="2750346">x</span>&nbsp;<span class="op" id="2750348">&lt;&lt;</span>&nbsp;<span class="op" id="2750351">(</span><span class="num" id="2750352">64</span>&nbsp;<span class="op" id="2750355">-</span>&nbsp;<span class="ident" id="2750357">bitSize</span><span class="op" id="2750364">)</span><span class="op" id="2750365">)</span>&nbsp;<span class="op" id="2750367">&gt;&gt;</span>&nbsp;<span class="op" id="2750370">(</span><span class="num" id="2750371">64</span>&nbsp;<span class="op" id="2750374">-</span>&nbsp;<span class="ident" id="2750376">bitSize</span><span class="op" id="2750383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750387">return</span>&nbsp;<span class="ident" id="2750394">x</span>&nbsp;<span class="op" id="2750396">!=</span>&nbsp;<span class="ident" id="2750399">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2750406">}</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2750409">panic</span><span class="op" id="2750414">(</span><span class="op" id="2750415">&amp;</span><span class="ident" id="2750416">ValueError</span><span class="op" id="2750426">{</span><span class="string" id="2750427">&#34;reflect.Value.OverflowInt&#34;</span><span class="op" id="2750454">,</span>&nbsp;<span class="ident" id="2750456">v</span><span class="op" id="2750457">.</span><span class="ident" id="2750458">kind</span><span class="op" id="2750462">(</span><span class="op" id="2750463">)</span><span class="op" id="2750464">}</span><span class="op" id="2750465">)</span><br>
<span class="lineno"></span><span class="op" id="2750467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2750470">//&nbsp;OverflowUint&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;uint64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2750550">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno">1170</span><span class="keyword" id="2750631">func</span>&nbsp;<span class="op" id="2750636">(</span><span class="ident" id="2750637">v</span>&nbsp;<span class="ident" id="2750639">Value</span><span class="op" id="2750644">)</span>&nbsp;<span class="ident" id="2750646">OverflowUint</span><span class="op" id="2750658">(</span><span class="ident" id="2750659">x</span>&nbsp;<span class="ident" id="2750661">uint64</span><span class="op" id="2750667">)</span>&nbsp;<span class="builtintype" id="2750669">bool</span>&nbsp;<span class="op" id="2750674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750677">k</span>&nbsp;<span class="op" id="2750679">:=</span>&nbsp;<span class="ident" id="2750682">v</span><span class="op" id="2750683">.</span><span class="ident" id="2750684">kind</span><span class="op" id="2750688">(</span><span class="op" id="2750689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750692">switch</span>&nbsp;<span class="ident" id="2750699">k</span>&nbsp;<span class="op" id="2750701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750704">case</span>&nbsp;<span class="ident" id="2750709">Uint</span><span class="op" id="2750713">,</span>&nbsp;<span class="ident" id="2750715">Uintptr</span><span class="op" id="2750722">,</span>&nbsp;<span class="ident" id="2750724">Uint8</span><span class="op" id="2750729">,</span>&nbsp;<span class="ident" id="2750731">Uint16</span><span class="op" id="2750737">,</span>&nbsp;<span class="ident" id="2750739">Uint32</span><span class="op" id="2750745">,</span>&nbsp;<span class="ident" id="2750747">Uint64</span><span class="op" id="2750753">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750757">bitSize</span>&nbsp;<span class="op" id="2750765">:=</span>&nbsp;<span class="ident" id="2750768">v</span><span class="op" id="2750769">.</span><span class="ident" id="2750770">typ</span><span class="op" id="2750773">.</span><span class="ident" id="2750774">size</span>&nbsp;<span class="op" id="2750779">*</span>&nbsp;<span class="num" id="2750781">8</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750785">trunc</span>&nbsp;<span class="op" id="2750791">:=</span>&nbsp;<span class="op" id="2750794">(</span><span class="ident" id="2750795">x</span>&nbsp;<span class="op" id="2750797">&lt;&lt;</span>&nbsp;<span class="op" id="2750800">(</span><span class="num" id="2750801">64</span>&nbsp;<span class="op" id="2750804">-</span>&nbsp;<span class="ident" id="2750806">bitSize</span><span class="op" id="2750813">)</span><span class="op" id="2750814">)</span>&nbsp;<span class="op" id="2750816">&gt;&gt;</span>&nbsp;<span class="op" id="2750819">(</span><span class="num" id="2750820">64</span>&nbsp;<span class="op" id="2750823">-</span>&nbsp;<span class="ident" id="2750825">bitSize</span><span class="op" id="2750832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750836">return</span>&nbsp;<span class="ident" id="2750843">x</span>&nbsp;<span class="op" id="2750845">!=</span>&nbsp;<span class="ident" id="2750848">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2750855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2750858">panic</span><span class="op" id="2750863">(</span><span class="op" id="2750864">&amp;</span><span class="ident" id="2750865">ValueError</span><span class="op" id="2750875">{</span><span class="string" id="2750876">&#34;reflect.Value.OverflowUint&#34;</span><span class="op" id="2750904">,</span>&nbsp;<span class="ident" id="2750906">v</span><span class="op" id="2750907">.</span><span class="ident" id="2750908">kind</span><span class="op" id="2750912">(</span><span class="op" id="2750913">)</span><span class="op" id="2750914">}</span><span class="op" id="2750915">)</span><br>
<span class="lineno"></span><span class="op" id="2750917">}</span><br>
<span class="lineno">1180</span><br>
<span class="lineno"></span><span class="comment" id="2750920">//&nbsp;Pointer&nbsp;returns&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr.</span><br>
<span class="lineno"></span><span class="comment" id="2750963">//&nbsp;It&nbsp;returns&nbsp;uintptr&nbsp;instead&nbsp;of&nbsp;unsafe.Pointer&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2751019">//&nbsp;code&nbsp;using&nbsp;reflect&nbsp;cannot&nbsp;obtain&nbsp;unsafe.Pointers</span><br>
<span class="lineno"></span><span class="comment" id="2751071">//&nbsp;without&nbsp;importing&nbsp;the&nbsp;unsafe&nbsp;package&nbsp;explicitly.</span><br>
<span class="lineno">1185</span><span class="comment" id="2751123">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan,&nbsp;Func,&nbsp;Map,&nbsp;Ptr,&nbsp;Slice,&nbsp;or&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="comment" id="2751202">//</span><br>
<span class="lineno"></span><span class="comment" id="2751205">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Func,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="2751267">//&nbsp;code&nbsp;pointer,&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to&nbsp;identify&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2751325">//&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;The&nbsp;only&nbsp;guarantee&nbsp;is&nbsp;that&nbsp;the</span><br>
<span class="lineno">1190</span><span class="comment" id="2751385">//&nbsp;result&nbsp;is&nbsp;zero&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;func&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2751441">//</span><br>
<span class="lineno"></span><span class="comment" id="2751444">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Slice,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;to&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="2751506">//&nbsp;element&nbsp;of&nbsp;the&nbsp;slice.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;nil&nbsp;the&nbsp;returned&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2751571">//&nbsp;is&nbsp;0.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;empty&nbsp;but&nbsp;non-nil&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;non-zero.</span><br>
<span class="lineno">1195</span><span class="keyword" id="2751645">func</span>&nbsp;<span class="op" id="2751650">(</span><span class="ident" id="2751651">v</span>&nbsp;<span class="ident" id="2751653">Value</span><span class="op" id="2751658">)</span>&nbsp;<span class="ident" id="2751660">Pointer</span><span class="op" id="2751667">(</span><span class="op" id="2751668">)</span>&nbsp;<span class="builtintype" id="2751670">uintptr</span>&nbsp;<span class="op" id="2751678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2751681">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751701">k</span>&nbsp;<span class="op" id="2751703">:=</span>&nbsp;<span class="ident" id="2751706">v</span><span class="op" id="2751707">.</span><span class="ident" id="2751708">kind</span><span class="op" id="2751712">(</span><span class="op" id="2751713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751716">switch</span>&nbsp;<span class="ident" id="2751723">k</span>&nbsp;<span class="op" id="2751725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751728">case</span>&nbsp;<span class="ident" id="2751733">Chan</span><span class="op" id="2751737">,</span>&nbsp;<span class="ident" id="2751739">Map</span><span class="op" id="2751742">,</span>&nbsp;<span class="ident" id="2751744">Ptr</span><span class="op" id="2751747">,</span>&nbsp;<span class="ident" id="2751749">UnsafePointer</span><span class="op" id="2751762">:</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751766">return</span>&nbsp;<span class="builtintype" id="2751773">uintptr</span><span class="op" id="2751780">(</span><span class="ident" id="2751781">v</span><span class="op" id="2751782">.</span><span class="ident" id="2751783">pointer</span><span class="op" id="2751790">(</span><span class="op" id="2751791">)</span><span class="op" id="2751792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751795">case</span>&nbsp;<span class="ident" id="2751800">Func</span><span class="op" id="2751804">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751808">if</span>&nbsp;<span class="ident" id="2751811">v</span><span class="op" id="2751812">.</span><span class="ident" id="2751813">flag</span><span class="op" id="2751817">&amp;</span><span class="ident" id="2751818">flagMethod</span>&nbsp;<span class="op" id="2751829">!=</span>&nbsp;<span class="num" id="2751832">0</span>&nbsp;<span class="op" id="2751834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2751839">//&nbsp;As&nbsp;the&nbsp;doc&nbsp;comment&nbsp;says,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2751897">//&nbsp;underlying&nbsp;code&nbsp;pointer&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2751957">//&nbsp;identify&nbsp;a&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;All&nbsp;method&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2752023">//&nbsp;created&nbsp;via&nbsp;reflect&nbsp;have&nbsp;the&nbsp;same&nbsp;underlying&nbsp;code&nbsp;pointer,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2752088">//&nbsp;so&nbsp;their&nbsp;Pointers&nbsp;are&nbsp;equal.&nbsp;The&nbsp;function&nbsp;used&nbsp;here&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2752151">//&nbsp;match&nbsp;the&nbsp;one&nbsp;used&nbsp;in&nbsp;makeMethodValue.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752196">f</span>&nbsp;<span class="op" id="2752198">:=</span>&nbsp;<span class="ident" id="2752201">methodValueCall</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752220">return</span>&nbsp;<span class="op" id="2752227">*</span><span class="op" id="2752228">*</span><span class="op" id="2752229">(</span><span class="op" id="2752230">*</span><span class="op" id="2752231">*</span><span class="builtintype" id="2752232">uintptr</span><span class="op" id="2752239">)</span><span class="op" id="2752240">(</span><span class="ident" id="2752241">unsafe</span><span class="op" id="2752247">.</span><span class="ident" id="2752248">Pointer</span><span class="op" id="2752255">(</span><span class="op" id="2752256">&amp;</span><span class="ident" id="2752257">f</span><span class="op" id="2752258">)</span><span class="op" id="2752259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2752263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752267">p</span>&nbsp;<span class="op" id="2752269">:=</span>&nbsp;<span class="ident" id="2752272">v</span><span class="op" id="2752273">.</span><span class="ident" id="2752274">pointer</span><span class="op" id="2752281">(</span><span class="op" id="2752282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2752286">//&nbsp;Non-nil&nbsp;func&nbsp;value&nbsp;points&nbsp;at&nbsp;data&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2752332">//&nbsp;First&nbsp;word&nbsp;of&nbsp;data&nbsp;block&nbsp;is&nbsp;actual&nbsp;code.</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752378">if</span>&nbsp;<span class="ident" id="2752381">p</span>&nbsp;<span class="op" id="2752383">!=</span>&nbsp;<span class="ident" id="2752386">nil</span>&nbsp;<span class="op" id="2752390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752395">p</span>&nbsp;<span class="op" id="2752397">=</span>&nbsp;<span class="op" id="2752399">*</span><span class="op" id="2752400">(</span><span class="op" id="2752401">*</span><span class="ident" id="2752402">unsafe</span><span class="op" id="2752408">.</span><span class="ident" id="2752409">Pointer</span><span class="op" id="2752416">)</span><span class="op" id="2752417">(</span><span class="ident" id="2752418">p</span><span class="op" id="2752419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2752423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752427">return</span>&nbsp;<span class="builtintype" id="2752434">uintptr</span><span class="op" id="2752441">(</span><span class="ident" id="2752442">p</span><span class="op" id="2752443">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752447">case</span>&nbsp;<span class="ident" id="2752452">Slice</span><span class="op" id="2752457">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752461">return</span>&nbsp;<span class="op" id="2752468">(</span><span class="op" id="2752469">*</span><span class="ident" id="2752470">SliceHeader</span><span class="op" id="2752481">)</span><span class="op" id="2752482">(</span><span class="ident" id="2752483">v</span><span class="op" id="2752484">.</span><span class="ident" id="2752485">ptr</span><span class="op" id="2752488">)</span><span class="op" id="2752489">.</span><span class="ident" id="2752490">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2752496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2752499">panic</span><span class="op" id="2752504">(</span><span class="op" id="2752505">&amp;</span><span class="ident" id="2752506">ValueError</span><span class="op" id="2752516">{</span><span class="string" id="2752517">&#34;reflect.Value.Pointer&#34;</span><span class="op" id="2752540">,</span>&nbsp;<span class="ident" id="2752542">v</span><span class="op" id="2752543">.</span><span class="ident" id="2752544">kind</span><span class="op" id="2752548">(</span><span class="op" id="2752549">)</span><span class="op" id="2752550">}</span><span class="op" id="2752551">)</span><br>
<span class="lineno"></span><span class="op" id="2752553">}</span><br>
<span class="lineno">1225</span><br>
<span class="lineno"></span><span class="comment" id="2752556">//&nbsp;Recv&nbsp;receives&nbsp;and&nbsp;returns&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2752613">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2752651">//&nbsp;The&nbsp;receive&nbsp;blocks&nbsp;until&nbsp;a&nbsp;value&nbsp;is&nbsp;ready.</span><br>
<span class="lineno"></span><span class="comment" id="2752697">//&nbsp;The&nbsp;boolean&nbsp;value&nbsp;ok&nbsp;is&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;x&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send</span><br>
<span class="lineno">1230</span><span class="comment" id="2752766">//&nbsp;on&nbsp;the&nbsp;channel,&nbsp;false&nbsp;if&nbsp;it&nbsp;is&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="2752853">func</span>&nbsp;<span class="op" id="2752858">(</span><span class="ident" id="2752859">v</span>&nbsp;<span class="ident" id="2752861">Value</span><span class="op" id="2752866">)</span>&nbsp;<span class="ident" id="2752868">Recv</span><span class="op" id="2752872">(</span><span class="op" id="2752873">)</span>&nbsp;<span class="op" id="2752875">(</span><span class="ident" id="2752876">x</span>&nbsp;<span class="ident" id="2752878">Value</span><span class="op" id="2752883">,</span>&nbsp;<span class="ident" id="2752885">ok</span>&nbsp;<span class="builtintype" id="2752888">bool</span><span class="op" id="2752892">)</span>&nbsp;<span class="op" id="2752894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752897">v</span><span class="op" id="2752898">.</span><span class="ident" id="2752899">mustBe</span><span class="op" id="2752905">(</span><span class="ident" id="2752906">Chan</span><span class="op" id="2752910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752913">v</span><span class="op" id="2752914">.</span><span class="ident" id="2752915">mustBeExported</span><span class="op" id="2752929">(</span><span class="op" id="2752930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752933">return</span>&nbsp;<span class="ident" id="2752940">v</span><span class="op" id="2752941">.</span><span class="ident" id="2752942">recv</span><span class="op" id="2752946">(</span><span class="builtintype" id="2752947">false</span><span class="op" id="2752952">)</span><br>
<span class="lineno">1235</span><span class="op" id="2752954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2752957">//&nbsp;internal&nbsp;recv,&nbsp;possibly&nbsp;non-blocking&nbsp;(nb).</span><br>
<span class="lineno"></span><span class="comment" id="2753003">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2753034">func</span>&nbsp;<span class="op" id="2753039">(</span><span class="ident" id="2753040">v</span>&nbsp;<span class="ident" id="2753042">Value</span><span class="op" id="2753047">)</span>&nbsp;<span class="ident" id="2753049">recv</span><span class="op" id="2753053">(</span><span class="ident" id="2753054">nb</span>&nbsp;<span class="builtintype" id="2753057">bool</span><span class="op" id="2753061">)</span>&nbsp;<span class="op" id="2753063">(</span><span class="ident" id="2753064">val</span>&nbsp;<span class="ident" id="2753068">Value</span><span class="op" id="2753073">,</span>&nbsp;<span class="ident" id="2753075">ok</span>&nbsp;<span class="builtintype" id="2753078">bool</span><span class="op" id="2753082">)</span>&nbsp;<span class="op" id="2753084">{</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753087">tt</span>&nbsp;<span class="op" id="2753090">:=</span>&nbsp;<span class="op" id="2753093">(</span><span class="op" id="2753094">*</span><span class="ident" id="2753095">chanType</span><span class="op" id="2753103">)</span><span class="op" id="2753104">(</span><span class="ident" id="2753105">unsafe</span><span class="op" id="2753111">.</span><span class="ident" id="2753112">Pointer</span><span class="op" id="2753119">(</span><span class="ident" id="2753120">v</span><span class="op" id="2753121">.</span><span class="ident" id="2753122">typ</span><span class="op" id="2753125">)</span><span class="op" id="2753126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753129">if</span>&nbsp;<span class="ident" id="2753132">ChanDir</span><span class="op" id="2753139">(</span><span class="ident" id="2753140">tt</span><span class="op" id="2753142">.</span><span class="ident" id="2753143">dir</span><span class="op" id="2753146">)</span><span class="op" id="2753147">&amp;</span><span class="ident" id="2753148">RecvDir</span>&nbsp;<span class="op" id="2753156">==</span>&nbsp;<span class="num" id="2753159">0</span>&nbsp;<span class="op" id="2753161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2753165">panic</span><span class="op" id="2753170">(</span><span class="string" id="2753171">&#34;reflect:&nbsp;recv&nbsp;on&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2753207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2753210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753213">t</span>&nbsp;<span class="op" id="2753215">:=</span>&nbsp;<span class="ident" id="2753218">tt</span><span class="op" id="2753220">.</span><span class="ident" id="2753221">elem</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753227">val</span>&nbsp;<span class="op" id="2753231">=</span>&nbsp;<span class="ident" id="2753233">Value</span><span class="op" id="2753238">{</span><span class="ident" id="2753239">t</span><span class="op" id="2753240">,</span>&nbsp;<span class="ident" id="2753242">nil</span><span class="op" id="2753245">,</span>&nbsp;<span class="ident" id="2753247">flag</span><span class="op" id="2753251">(</span><span class="ident" id="2753252">t</span><span class="op" id="2753253">.</span><span class="ident" id="2753254">Kind</span><span class="op" id="2753258">(</span><span class="op" id="2753259">)</span><span class="op" id="2753260">)</span><span class="op" id="2753261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753264">var</span>&nbsp;<span class="ident" id="2753268">p</span>&nbsp;<span class="ident" id="2753270">unsafe</span><span class="op" id="2753276">.</span><span class="ident" id="2753277">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753286">if</span>&nbsp;<span class="ident" id="2753289">ifaceIndir</span><span class="op" id="2753299">(</span><span class="ident" id="2753300">t</span><span class="op" id="2753301">)</span>&nbsp;<span class="op" id="2753303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753307">p</span>&nbsp;<span class="op" id="2753309">=</span>&nbsp;<span class="ident" id="2753311">unsafe_New</span><span class="op" id="2753321">(</span><span class="ident" id="2753322">t</span><span class="op" id="2753323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753327">val</span><span class="op" id="2753330">.</span><span class="ident" id="2753331">ptr</span>&nbsp;<span class="op" id="2753335">=</span>&nbsp;<span class="ident" id="2753337">p</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753341">val</span><span class="op" id="2753344">.</span><span class="ident" id="2753345">flag</span>&nbsp;<span class="op" id="2753350">|=</span>&nbsp;<span class="ident" id="2753353">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2753364">}</span>&nbsp;<span class="keyword" id="2753366">else</span>&nbsp;<span class="op" id="2753371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753375">p</span>&nbsp;<span class="op" id="2753377">=</span>&nbsp;<span class="ident" id="2753379">unsafe</span><span class="op" id="2753385">.</span><span class="ident" id="2753386">Pointer</span><span class="op" id="2753393">(</span><span class="op" id="2753394">&amp;</span><span class="ident" id="2753395">val</span><span class="op" id="2753398">.</span><span class="ident" id="2753399">ptr</span><span class="op" id="2753402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2753405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753408">selected</span><span class="op" id="2753416">,</span>&nbsp;<span class="ident" id="2753418">ok</span>&nbsp;<span class="op" id="2753421">:=</span>&nbsp;<span class="ident" id="2753424">chanrecv</span><span class="op" id="2753432">(</span><span class="ident" id="2753433">v</span><span class="op" id="2753434">.</span><span class="ident" id="2753435">typ</span><span class="op" id="2753438">,</span>&nbsp;<span class="ident" id="2753440">v</span><span class="op" id="2753441">.</span><span class="ident" id="2753442">pointer</span><span class="op" id="2753449">(</span><span class="op" id="2753450">)</span><span class="op" id="2753451">,</span>&nbsp;<span class="ident" id="2753453">nb</span><span class="op" id="2753455">,</span>&nbsp;<span class="ident" id="2753457">p</span><span class="op" id="2753458">)</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753461">if</span>&nbsp;<span class="op" id="2753464">!</span><span class="ident" id="2753465">selected</span>&nbsp;<span class="op" id="2753474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753478">val</span>&nbsp;<span class="op" id="2753482">=</span>&nbsp;<span class="ident" id="2753484">Value</span><span class="op" id="2753489">{</span><span class="op" id="2753490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2753493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753496">return</span><br>
<span class="lineno"></span><span class="op" id="2753503">}</span><br>
<span class="lineno">1260</span><br>
<span class="lineno"></span><span class="comment" id="2753506">//&nbsp;Send&nbsp;sends&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2753540">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Chan&nbsp;or&nbsp;if&nbsp;x&#39;s&nbsp;type&nbsp;is&nbsp;not&nbsp;the&nbsp;same&nbsp;type&nbsp;as&nbsp;v&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2753634">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2753707">func</span>&nbsp;<span class="op" id="2753712">(</span><span class="ident" id="2753713">v</span>&nbsp;<span class="ident" id="2753715">Value</span><span class="op" id="2753720">)</span>&nbsp;<span class="ident" id="2753722">Send</span><span class="op" id="2753726">(</span><span class="ident" id="2753727">x</span>&nbsp;<span class="ident" id="2753729">Value</span><span class="op" id="2753734">)</span>&nbsp;<span class="op" id="2753736">{</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753739">v</span><span class="op" id="2753740">.</span><span class="ident" id="2753741">mustBe</span><span class="op" id="2753747">(</span><span class="ident" id="2753748">Chan</span><span class="op" id="2753752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753755">v</span><span class="op" id="2753756">.</span><span class="ident" id="2753757">mustBeExported</span><span class="op" id="2753771">(</span><span class="op" id="2753772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753775">v</span><span class="op" id="2753776">.</span><span class="ident" id="2753777">send</span><span class="op" id="2753781">(</span><span class="ident" id="2753782">x</span><span class="op" id="2753783">,</span>&nbsp;<span class="builtintype" id="2753785">false</span><span class="op" id="2753790">)</span><br>
<span class="lineno"></span><span class="op" id="2753792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1270</span><span class="comment" id="2753795">//&nbsp;internal&nbsp;send,&nbsp;possibly&nbsp;non-blocking.</span><br>
<span class="lineno"></span><span class="comment" id="2753836">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2753867">func</span>&nbsp;<span class="op" id="2753872">(</span><span class="ident" id="2753873">v</span>&nbsp;<span class="ident" id="2753875">Value</span><span class="op" id="2753880">)</span>&nbsp;<span class="ident" id="2753882">send</span><span class="op" id="2753886">(</span><span class="ident" id="2753887">x</span>&nbsp;<span class="ident" id="2753889">Value</span><span class="op" id="2753894">,</span>&nbsp;<span class="ident" id="2753896">nb</span>&nbsp;<span class="builtintype" id="2753899">bool</span><span class="op" id="2753903">)</span>&nbsp;<span class="op" id="2753905">(</span><span class="ident" id="2753906">selected</span>&nbsp;<span class="builtintype" id="2753915">bool</span><span class="op" id="2753919">)</span>&nbsp;<span class="op" id="2753921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753924">tt</span>&nbsp;<span class="op" id="2753927">:=</span>&nbsp;<span class="op" id="2753930">(</span><span class="op" id="2753931">*</span><span class="ident" id="2753932">chanType</span><span class="op" id="2753940">)</span><span class="op" id="2753941">(</span><span class="ident" id="2753942">unsafe</span><span class="op" id="2753948">.</span><span class="ident" id="2753949">Pointer</span><span class="op" id="2753956">(</span><span class="ident" id="2753957">v</span><span class="op" id="2753958">.</span><span class="ident" id="2753959">typ</span><span class="op" id="2753962">)</span><span class="op" id="2753963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753966">if</span>&nbsp;<span class="ident" id="2753969">ChanDir</span><span class="op" id="2753976">(</span><span class="ident" id="2753977">tt</span><span class="op" id="2753979">.</span><span class="ident" id="2753980">dir</span><span class="op" id="2753983">)</span><span class="op" id="2753984">&amp;</span><span class="ident" id="2753985">SendDir</span>&nbsp;<span class="op" id="2753993">==</span>&nbsp;<span class="num" id="2753996">0</span>&nbsp;<span class="op" id="2753998">{</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2754002">panic</span><span class="op" id="2754007">(</span><span class="string" id="2754008">&#34;reflect:&nbsp;send&nbsp;on&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2754044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754050">x</span><span class="op" id="2754051">.</span><span class="ident" id="2754052">mustBeExported</span><span class="op" id="2754066">(</span><span class="op" id="2754067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754070">x</span>&nbsp;<span class="op" id="2754072">=</span>&nbsp;<span class="ident" id="2754074">x</span><span class="op" id="2754075">.</span><span class="ident" id="2754076">assignTo</span><span class="op" id="2754084">(</span><span class="string" id="2754085">&#34;reflect.Value.Send&#34;</span><span class="op" id="2754105">,</span>&nbsp;<span class="ident" id="2754107">tt</span><span class="op" id="2754109">.</span><span class="ident" id="2754110">elem</span><span class="op" id="2754114">,</span>&nbsp;<span class="ident" id="2754116">nil</span><span class="op" id="2754119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754122">var</span>&nbsp;<span class="ident" id="2754126">p</span>&nbsp;<span class="ident" id="2754128">unsafe</span><span class="op" id="2754134">.</span><span class="ident" id="2754135">Pointer</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754144">if</span>&nbsp;<span class="ident" id="2754147">x</span><span class="op" id="2754148">.</span><span class="ident" id="2754149">flag</span><span class="op" id="2754153">&amp;</span><span class="ident" id="2754154">flagIndir</span>&nbsp;<span class="op" id="2754164">!=</span>&nbsp;<span class="num" id="2754167">0</span>&nbsp;<span class="op" id="2754169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754173">p</span>&nbsp;<span class="op" id="2754175">=</span>&nbsp;<span class="ident" id="2754177">x</span><span class="op" id="2754178">.</span><span class="ident" id="2754179">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754184">}</span>&nbsp;<span class="keyword" id="2754186">else</span>&nbsp;<span class="op" id="2754191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754195">p</span>&nbsp;<span class="op" id="2754197">=</span>&nbsp;<span class="ident" id="2754199">unsafe</span><span class="op" id="2754205">.</span><span class="ident" id="2754206">Pointer</span><span class="op" id="2754213">(</span><span class="op" id="2754214">&amp;</span><span class="ident" id="2754215">x</span><span class="op" id="2754216">.</span><span class="ident" id="2754217">ptr</span><span class="op" id="2754220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754223">}</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754226">return</span>&nbsp;<span class="ident" id="2754233">chansend</span><span class="op" id="2754241">(</span><span class="ident" id="2754242">v</span><span class="op" id="2754243">.</span><span class="ident" id="2754244">typ</span><span class="op" id="2754247">,</span>&nbsp;<span class="ident" id="2754249">v</span><span class="op" id="2754250">.</span><span class="ident" id="2754251">pointer</span><span class="op" id="2754258">(</span><span class="op" id="2754259">)</span><span class="op" id="2754260">,</span>&nbsp;<span class="ident" id="2754262">p</span><span class="op" id="2754263">,</span>&nbsp;<span class="ident" id="2754265">nb</span><span class="op" id="2754267">)</span><br>
<span class="lineno"></span><span class="op" id="2754269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2754272">//&nbsp;Set&nbsp;assigns&nbsp;x&nbsp;to&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2754305">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanSet&nbsp;returns&nbsp;false.</span><br>
<span class="lineno">1290</span><span class="comment" id="2754343">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2754398">func</span>&nbsp;<span class="op" id="2754403">(</span><span class="ident" id="2754404">v</span>&nbsp;<span class="ident" id="2754406">Value</span><span class="op" id="2754411">)</span>&nbsp;<span class="ident" id="2754413">Set</span><span class="op" id="2754416">(</span><span class="ident" id="2754417">x</span>&nbsp;<span class="ident" id="2754419">Value</span><span class="op" id="2754424">)</span>&nbsp;<span class="op" id="2754426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754429">v</span><span class="op" id="2754430">.</span><span class="ident" id="2754431">mustBeAssignable</span><span class="op" id="2754447">(</span><span class="op" id="2754448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754451">x</span><span class="op" id="2754452">.</span><span class="ident" id="2754453">mustBeExported</span><span class="op" id="2754467">(</span><span class="op" id="2754468">)</span>&nbsp;<span class="comment" id="2754470">//&nbsp;do&nbsp;not&nbsp;let&nbsp;unexported&nbsp;x&nbsp;leak</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754503">var</span>&nbsp;<span class="ident" id="2754507">target</span>&nbsp;<span class="ident" id="2754514">unsafe</span><span class="op" id="2754520">.</span><span class="ident" id="2754521">Pointer</span><br>
<span class="lineno">1295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754530">if</span>&nbsp;<span class="ident" id="2754533">v</span><span class="op" id="2754534">.</span><span class="ident" id="2754535">kind</span><span class="op" id="2754539">(</span><span class="op" id="2754540">)</span>&nbsp;<span class="op" id="2754542">==</span>&nbsp;<span class="ident" id="2754545">Interface</span>&nbsp;<span class="op" id="2754555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754559">target</span>&nbsp;<span class="op" id="2754566">=</span>&nbsp;<span class="ident" id="2754568">v</span><span class="op" id="2754569">.</span><span class="ident" id="2754570">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754578">x</span>&nbsp;<span class="op" id="2754580">=</span>&nbsp;<span class="ident" id="2754582">x</span><span class="op" id="2754583">.</span><span class="ident" id="2754584">assignTo</span><span class="op" id="2754592">(</span><span class="string" id="2754593">&#34;reflect.Set&#34;</span><span class="op" id="2754606">,</span>&nbsp;<span class="ident" id="2754608">v</span><span class="op" id="2754609">.</span><span class="ident" id="2754610">typ</span><span class="op" id="2754613">,</span>&nbsp;<span class="ident" id="2754615">target</span><span class="op" id="2754621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754624">if</span>&nbsp;<span class="ident" id="2754627">x</span><span class="op" id="2754628">.</span><span class="ident" id="2754629">flag</span><span class="op" id="2754633">&amp;</span><span class="ident" id="2754634">flagIndir</span>&nbsp;<span class="op" id="2754644">!=</span>&nbsp;<span class="num" id="2754647">0</span>&nbsp;<span class="op" id="2754649">{</span><br>
<span class="lineno">1300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754653">memmove</span><span class="op" id="2754660">(</span><span class="ident" id="2754661">v</span><span class="op" id="2754662">.</span><span class="ident" id="2754663">ptr</span><span class="op" id="2754666">,</span>&nbsp;<span class="ident" id="2754668">x</span><span class="op" id="2754669">.</span><span class="ident" id="2754670">ptr</span><span class="op" id="2754673">,</span>&nbsp;<span class="ident" id="2754675">v</span><span class="op" id="2754676">.</span><span class="ident" id="2754677">typ</span><span class="op" id="2754680">.</span><span class="ident" id="2754681">size</span><span class="op" id="2754685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754688">}</span>&nbsp;<span class="keyword" id="2754690">else</span>&nbsp;<span class="op" id="2754695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754699">*</span><span class="op" id="2754700">(</span><span class="op" id="2754701">*</span><span class="ident" id="2754702">unsafe</span><span class="op" id="2754708">.</span><span class="ident" id="2754709">Pointer</span><span class="op" id="2754716">)</span><span class="op" id="2754717">(</span><span class="ident" id="2754718">v</span><span class="op" id="2754719">.</span><span class="ident" id="2754720">ptr</span><span class="op" id="2754723">)</span>&nbsp;<span class="op" id="2754725">=</span>&nbsp;<span class="ident" id="2754727">x</span><span class="op" id="2754728">.</span><span class="ident" id="2754729">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754734">}</span><br>
<span class="lineno"></span><span class="op" id="2754736">}</span><br>
<span class="lineno">1305</span><br>
<span class="lineno"></span><span class="comment" id="2754739">//&nbsp;SetBool&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2754777">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Bool&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2754839">func</span>&nbsp;<span class="op" id="2754844">(</span><span class="ident" id="2754845">v</span>&nbsp;<span class="ident" id="2754847">Value</span><span class="op" id="2754852">)</span>&nbsp;<span class="ident" id="2754854">SetBool</span><span class="op" id="2754861">(</span><span class="ident" id="2754862">x</span>&nbsp;<span class="builtintype" id="2754864">bool</span><span class="op" id="2754868">)</span>&nbsp;<span class="op" id="2754870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754873">v</span><span class="op" id="2754874">.</span><span class="ident" id="2754875">mustBeAssignable</span><span class="op" id="2754891">(</span><span class="op" id="2754892">)</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754895">v</span><span class="op" id="2754896">.</span><span class="ident" id="2754897">mustBe</span><span class="op" id="2754903">(</span><span class="ident" id="2754904">Bool</span><span class="op" id="2754908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754911">*</span><span class="op" id="2754912">(</span><span class="op" id="2754913">*</span><span class="builtintype" id="2754914">bool</span><span class="op" id="2754918">)</span><span class="op" id="2754919">(</span><span class="ident" id="2754920">v</span><span class="op" id="2754921">.</span><span class="ident" id="2754922">ptr</span><span class="op" id="2754925">)</span>&nbsp;<span class="op" id="2754927">=</span>&nbsp;<span class="ident" id="2754929">x</span><br>
<span class="lineno"></span><span class="op" id="2754931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2754934">//&nbsp;SetBytes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1315</span><span class="comment" id="2754973">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2755035">func</span>&nbsp;<span class="op" id="2755040">(</span><span class="ident" id="2755041">v</span>&nbsp;<span class="ident" id="2755043">Value</span><span class="op" id="2755048">)</span>&nbsp;<span class="ident" id="2755050">SetBytes</span><span class="op" id="2755058">(</span><span class="ident" id="2755059">x</span>&nbsp;<span class="op" id="2755061">[</span><span class="op" id="2755062">]</span><span class="builtintype" id="2755063">byte</span><span class="op" id="2755067">)</span>&nbsp;<span class="op" id="2755069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755072">v</span><span class="op" id="2755073">.</span><span class="ident" id="2755074">mustBeAssignable</span><span class="op" id="2755090">(</span><span class="op" id="2755091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755094">v</span><span class="op" id="2755095">.</span><span class="ident" id="2755096">mustBe</span><span class="op" id="2755102">(</span><span class="ident" id="2755103">Slice</span><span class="op" id="2755108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755111">if</span>&nbsp;<span class="ident" id="2755114">v</span><span class="op" id="2755115">.</span><span class="ident" id="2755116">typ</span><span class="op" id="2755119">.</span><span class="ident" id="2755120">Elem</span><span class="op" id="2755124">(</span><span class="op" id="2755125">)</span><span class="op" id="2755126">.</span><span class="ident" id="2755127">Kind</span><span class="op" id="2755131">(</span><span class="op" id="2755132">)</span>&nbsp;<span class="op" id="2755134">!=</span>&nbsp;<span class="ident" id="2755137">Uint8</span>&nbsp;<span class="op" id="2755143">{</span><br>
<span class="lineno">1320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2755147">panic</span><span class="op" id="2755152">(</span><span class="string" id="2755153">&#34;reflect.Value.SetBytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2755195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755201">*</span><span class="op" id="2755202">(</span><span class="op" id="2755203">*</span><span class="op" id="2755204">[</span><span class="op" id="2755205">]</span><span class="builtintype" id="2755206">byte</span><span class="op" id="2755210">)</span><span class="op" id="2755211">(</span><span class="ident" id="2755212">v</span><span class="op" id="2755213">.</span><span class="ident" id="2755214">ptr</span><span class="op" id="2755217">)</span>&nbsp;<span class="op" id="2755219">=</span>&nbsp;<span class="ident" id="2755221">x</span><br>
<span class="lineno"></span><span class="op" id="2755223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1325</span><span class="comment" id="2755226">//&nbsp;setRunes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2755265">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2755336">func</span>&nbsp;<span class="op" id="2755341">(</span><span class="ident" id="2755342">v</span>&nbsp;<span class="ident" id="2755344">Value</span><span class="op" id="2755349">)</span>&nbsp;<span class="ident" id="2755351">setRunes</span><span class="op" id="2755359">(</span><span class="ident" id="2755360">x</span>&nbsp;<span class="op" id="2755362">[</span><span class="op" id="2755363">]</span><span class="builtintype" id="2755364">rune</span><span class="op" id="2755368">)</span>&nbsp;<span class="op" id="2755370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755373">v</span><span class="op" id="2755374">.</span><span class="ident" id="2755375">mustBeAssignable</span><span class="op" id="2755391">(</span><span class="op" id="2755392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755395">v</span><span class="op" id="2755396">.</span><span class="ident" id="2755397">mustBe</span><span class="op" id="2755403">(</span><span class="ident" id="2755404">Slice</span><span class="op" id="2755409">)</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755412">if</span>&nbsp;<span class="ident" id="2755415">v</span><span class="op" id="2755416">.</span><span class="ident" id="2755417">typ</span><span class="op" id="2755420">.</span><span class="ident" id="2755421">Elem</span><span class="op" id="2755425">(</span><span class="op" id="2755426">)</span><span class="op" id="2755427">.</span><span class="ident" id="2755428">Kind</span><span class="op" id="2755432">(</span><span class="op" id="2755433">)</span>&nbsp;<span class="op" id="2755435">!=</span>&nbsp;<span class="ident" id="2755438">Int32</span>&nbsp;<span class="op" id="2755444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2755448">panic</span><span class="op" id="2755453">(</span><span class="string" id="2755454">&#34;reflect.Value.setRunes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2755496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755502">*</span><span class="op" id="2755503">(</span><span class="op" id="2755504">*</span><span class="op" id="2755505">[</span><span class="op" id="2755506">]</span><span class="builtintype" id="2755507">rune</span><span class="op" id="2755511">)</span><span class="op" id="2755512">(</span><span class="ident" id="2755513">v</span><span class="op" id="2755514">.</span><span class="ident" id="2755515">ptr</span><span class="op" id="2755518">)</span>&nbsp;<span class="op" id="2755520">=</span>&nbsp;<span class="ident" id="2755522">x</span><br>
<span class="lineno"></span><span class="op" id="2755524">}</span><br>
<span class="lineno">1335</span><br>
<span class="lineno"></span><span class="comment" id="2755527">//&nbsp;SetComplex&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2755573">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2755655">func</span>&nbsp;<span class="op" id="2755660">(</span><span class="ident" id="2755661">v</span>&nbsp;<span class="ident" id="2755663">Value</span><span class="op" id="2755668">)</span>&nbsp;<span class="ident" id="2755670">SetComplex</span><span class="op" id="2755680">(</span><span class="ident" id="2755681">x</span>&nbsp;<span class="builtintype" id="2755683">complex128</span><span class="op" id="2755693">)</span>&nbsp;<span class="op" id="2755695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755698">v</span><span class="op" id="2755699">.</span><span class="ident" id="2755700">mustBeAssignable</span><span class="op" id="2755716">(</span><span class="op" id="2755717">)</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755720">switch</span>&nbsp;<span class="ident" id="2755727">k</span>&nbsp;<span class="op" id="2755729">:=</span>&nbsp;<span class="ident" id="2755732">v</span><span class="op" id="2755733">.</span><span class="ident" id="2755734">kind</span><span class="op" id="2755738">(</span><span class="op" id="2755739">)</span><span class="op" id="2755740">;</span>&nbsp;<span class="ident" id="2755742">k</span>&nbsp;<span class="op" id="2755744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755747">default</span><span class="op" id="2755754">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2755758">panic</span><span class="op" id="2755763">(</span><span class="op" id="2755764">&amp;</span><span class="ident" id="2755765">ValueError</span><span class="op" id="2755775">{</span><span class="string" id="2755776">&#34;reflect.Value.SetComplex&#34;</span><span class="op" id="2755802">,</span>&nbsp;<span class="ident" id="2755804">v</span><span class="op" id="2755805">.</span><span class="ident" id="2755806">kind</span><span class="op" id="2755810">(</span><span class="op" id="2755811">)</span><span class="op" id="2755812">}</span><span class="op" id="2755813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755816">case</span>&nbsp;<span class="ident" id="2755821">Complex64</span><span class="op" id="2755830">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755834">*</span><span class="op" id="2755835">(</span><span class="op" id="2755836">*</span><span class="builtintype" id="2755837">complex64</span><span class="op" id="2755846">)</span><span class="op" id="2755847">(</span><span class="ident" id="2755848">v</span><span class="op" id="2755849">.</span><span class="ident" id="2755850">ptr</span><span class="op" id="2755853">)</span>&nbsp;<span class="op" id="2755855">=</span>&nbsp;<span class="builtintype" id="2755857">complex64</span><span class="op" id="2755866">(</span><span class="ident" id="2755867">x</span><span class="op" id="2755868">)</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755871">case</span>&nbsp;<span class="ident" id="2755876">Complex128</span><span class="op" id="2755886">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755890">*</span><span class="op" id="2755891">(</span><span class="op" id="2755892">*</span><span class="builtintype" id="2755893">complex128</span><span class="op" id="2755903">)</span><span class="op" id="2755904">(</span><span class="ident" id="2755905">v</span><span class="op" id="2755906">.</span><span class="ident" id="2755907">ptr</span><span class="op" id="2755910">)</span>&nbsp;<span class="op" id="2755912">=</span>&nbsp;<span class="ident" id="2755914">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755917">}</span><br>
<span class="lineno"></span><span class="op" id="2755919">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1350</span><span class="comment" id="2755922">//&nbsp;SetFloat&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2755966">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2756043">func</span>&nbsp;<span class="op" id="2756048">(</span><span class="ident" id="2756049">v</span>&nbsp;<span class="ident" id="2756051">Value</span><span class="op" id="2756056">)</span>&nbsp;<span class="ident" id="2756058">SetFloat</span><span class="op" id="2756066">(</span><span class="ident" id="2756067">x</span>&nbsp;<span class="builtintype" id="2756069">float64</span><span class="op" id="2756076">)</span>&nbsp;<span class="op" id="2756078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756081">v</span><span class="op" id="2756082">.</span><span class="ident" id="2756083">mustBeAssignable</span><span class="op" id="2756099">(</span><span class="op" id="2756100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756103">switch</span>&nbsp;<span class="ident" id="2756110">k</span>&nbsp;<span class="op" id="2756112">:=</span>&nbsp;<span class="ident" id="2756115">v</span><span class="op" id="2756116">.</span><span class="ident" id="2756117">kind</span><span class="op" id="2756121">(</span><span class="op" id="2756122">)</span><span class="op" id="2756123">;</span>&nbsp;<span class="ident" id="2756125">k</span>&nbsp;<span class="op" id="2756127">{</span><br>
<span class="lineno">1355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756130">default</span><span class="op" id="2756137">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2756141">panic</span><span class="op" id="2756146">(</span><span class="op" id="2756147">&amp;</span><span class="ident" id="2756148">ValueError</span><span class="op" id="2756158">{</span><span class="string" id="2756159">&#34;reflect.Value.SetFloat&#34;</span><span class="op" id="2756183">,</span>&nbsp;<span class="ident" id="2756185">v</span><span class="op" id="2756186">.</span><span class="ident" id="2756187">kind</span><span class="op" id="2756191">(</span><span class="op" id="2756192">)</span><span class="op" id="2756193">}</span><span class="op" id="2756194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756197">case</span>&nbsp;<span class="ident" id="2756202">Float32</span><span class="op" id="2756209">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756213">*</span><span class="op" id="2756214">(</span><span class="op" id="2756215">*</span><span class="builtintype" id="2756216">float32</span><span class="op" id="2756223">)</span><span class="op" id="2756224">(</span><span class="ident" id="2756225">v</span><span class="op" id="2756226">.</span><span class="ident" id="2756227">ptr</span><span class="op" id="2756230">)</span>&nbsp;<span class="op" id="2756232">=</span>&nbsp;<span class="builtintype" id="2756234">float32</span><span class="op" id="2756241">(</span><span class="ident" id="2756242">x</span><span class="op" id="2756243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756246">case</span>&nbsp;<span class="ident" id="2756251">Float64</span><span class="op" id="2756258">:</span><br>
<span class="lineno">1360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756262">*</span><span class="op" id="2756263">(</span><span class="op" id="2756264">*</span><span class="builtintype" id="2756265">float64</span><span class="op" id="2756272">)</span><span class="op" id="2756273">(</span><span class="ident" id="2756274">v</span><span class="op" id="2756275">.</span><span class="ident" id="2756276">ptr</span><span class="op" id="2756279">)</span>&nbsp;<span class="op" id="2756281">=</span>&nbsp;<span class="ident" id="2756283">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756286">}</span><br>
<span class="lineno"></span><span class="op" id="2756288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2756291">//&nbsp;SetInt&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno">1365</span><span class="comment" id="2756333">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2756425">func</span>&nbsp;<span class="op" id="2756430">(</span><span class="ident" id="2756431">v</span>&nbsp;<span class="ident" id="2756433">Value</span><span class="op" id="2756438">)</span>&nbsp;<span class="ident" id="2756440">SetInt</span><span class="op" id="2756446">(</span><span class="ident" id="2756447">x</span>&nbsp;<span class="ident" id="2756449">int64</span><span class="op" id="2756454">)</span>&nbsp;<span class="op" id="2756456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756459">v</span><span class="op" id="2756460">.</span><span class="ident" id="2756461">mustBeAssignable</span><span class="op" id="2756477">(</span><span class="op" id="2756478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756481">switch</span>&nbsp;<span class="ident" id="2756488">k</span>&nbsp;<span class="op" id="2756490">:=</span>&nbsp;<span class="ident" id="2756493">v</span><span class="op" id="2756494">.</span><span class="ident" id="2756495">kind</span><span class="op" id="2756499">(</span><span class="op" id="2756500">)</span><span class="op" id="2756501">;</span>&nbsp;<span class="ident" id="2756503">k</span>&nbsp;<span class="op" id="2756505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756508">default</span><span class="op" id="2756515">:</span><br>
<span class="lineno">1370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2756519">panic</span><span class="op" id="2756524">(</span><span class="op" id="2756525">&amp;</span><span class="ident" id="2756526">ValueError</span><span class="op" id="2756536">{</span><span class="string" id="2756537">&#34;reflect.Value.SetInt&#34;</span><span class="op" id="2756559">,</span>&nbsp;<span class="ident" id="2756561">v</span><span class="op" id="2756562">.</span><span class="ident" id="2756563">kind</span><span class="op" id="2756567">(</span><span class="op" id="2756568">)</span><span class="op" id="2756569">}</span><span class="op" id="2756570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756573">case</span>&nbsp;<span class="ident" id="2756578">Int</span><span class="op" id="2756581">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756585">*</span><span class="op" id="2756586">(</span><span class="op" id="2756587">*</span><span class="builtintype" id="2756588">int</span><span class="op" id="2756591">)</span><span class="op" id="2756592">(</span><span class="ident" id="2756593">v</span><span class="op" id="2756594">.</span><span class="ident" id="2756595">ptr</span><span class="op" id="2756598">)</span>&nbsp;<span class="op" id="2756600">=</span>&nbsp;<span class="builtintype" id="2756602">int</span><span class="op" id="2756605">(</span><span class="ident" id="2756606">x</span><span class="op" id="2756607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756610">case</span>&nbsp;<span class="ident" id="2756615">Int8</span><span class="op" id="2756619">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756623">*</span><span class="op" id="2756624">(</span><span class="op" id="2756625">*</span><span class="builtintype" id="2756626">int8</span><span class="op" id="2756630">)</span><span class="op" id="2756631">(</span><span class="ident" id="2756632">v</span><span class="op" id="2756633">.</span><span class="ident" id="2756634">ptr</span><span class="op" id="2756637">)</span>&nbsp;<span class="op" id="2756639">=</span>&nbsp;<span class="builtintype" id="2756641">int8</span><span class="op" id="2756645">(</span><span class="ident" id="2756646">x</span><span class="op" id="2756647">)</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756650">case</span>&nbsp;<span class="ident" id="2756655">Int16</span><span class="op" id="2756660">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756664">*</span><span class="op" id="2756665">(</span><span class="op" id="2756666">*</span><span class="builtintype" id="2756667">int16</span><span class="op" id="2756672">)</span><span class="op" id="2756673">(</span><span class="ident" id="2756674">v</span><span class="op" id="2756675">.</span><span class="ident" id="2756676">ptr</span><span class="op" id="2756679">)</span>&nbsp;<span class="op" id="2756681">=</span>&nbsp;<span class="builtintype" id="2756683">int16</span><span class="op" id="2756688">(</span><span class="ident" id="2756689">x</span><span class="op" id="2756690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756693">case</span>&nbsp;<span class="ident" id="2756698">Int32</span><span class="op" id="2756703">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756707">*</span><span class="op" id="2756708">(</span><span class="op" id="2756709">*</span><span class="builtintype" id="2756710">int32</span><span class="op" id="2756715">)</span><span class="op" id="2756716">(</span><span class="ident" id="2756717">v</span><span class="op" id="2756718">.</span><span class="ident" id="2756719">ptr</span><span class="op" id="2756722">)</span>&nbsp;<span class="op" id="2756724">=</span>&nbsp;<span class="builtintype" id="2756726">int32</span><span class="op" id="2756731">(</span><span class="ident" id="2756732">x</span><span class="op" id="2756733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756736">case</span>&nbsp;<span class="ident" id="2756741">Int64</span><span class="op" id="2756746">:</span><br>
<span class="lineno">1380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756750">*</span><span class="op" id="2756751">(</span><span class="op" id="2756752">*</span><span class="ident" id="2756753">int64</span><span class="op" id="2756758">)</span><span class="op" id="2756759">(</span><span class="ident" id="2756760">v</span><span class="op" id="2756761">.</span><span class="ident" id="2756762">ptr</span><span class="op" id="2756765">)</span>&nbsp;<span class="op" id="2756767">=</span>&nbsp;<span class="ident" id="2756769">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756772">}</span><br>
<span class="lineno"></span><span class="op" id="2756774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2756777">//&nbsp;SetLen&nbsp;sets&nbsp;v&#39;s&nbsp;length&nbsp;to&nbsp;n.</span><br>
<span class="lineno">1385</span><span class="comment" id="2756809">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;negative&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2756870">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2756913">func</span>&nbsp;<span class="op" id="2756918">(</span><span class="ident" id="2756919">v</span>&nbsp;<span class="ident" id="2756921">Value</span><span class="op" id="2756926">)</span>&nbsp;<span class="ident" id="2756928">SetLen</span><span class="op" id="2756934">(</span><span class="ident" id="2756935">n</span>&nbsp;<span class="builtintype" id="2756937">int</span><span class="op" id="2756940">)</span>&nbsp;<span class="op" id="2756942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756945">v</span><span class="op" id="2756946">.</span><span class="ident" id="2756947">mustBeAssignable</span><span class="op" id="2756963">(</span><span class="op" id="2756964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756967">v</span><span class="op" id="2756968">.</span><span class="ident" id="2756969">mustBe</span><span class="op" id="2756975">(</span><span class="ident" id="2756976">Slice</span><span class="op" id="2756981">)</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756984">s</span>&nbsp;<span class="op" id="2756986">:=</span>&nbsp;<span class="op" id="2756989">(</span><span class="op" id="2756990">*</span><span class="ident" id="2756991">sliceHeader</span><span class="op" id="2757002">)</span><span class="op" id="2757003">(</span><span class="ident" id="2757004">v</span><span class="op" id="2757005">.</span><span class="ident" id="2757006">ptr</span><span class="op" id="2757009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757012">if</span>&nbsp;<span class="builtintype" id="2757015">uint</span><span class="op" id="2757019">(</span><span class="ident" id="2757020">n</span><span class="op" id="2757021">)</span>&nbsp;<span class="op" id="2757023">&gt;</span>&nbsp;<span class="builtintype" id="2757025">uint</span><span class="op" id="2757029">(</span><span class="ident" id="2757030">s</span><span class="op" id="2757031">.</span><span class="ident" id="2757032">Cap</span><span class="op" id="2757035">)</span>&nbsp;<span class="op" id="2757037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2757041">panic</span><span class="op" id="2757046">(</span><span class="string" id="2757047">&#34;reflect:&nbsp;slice&nbsp;length&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetLen&#34;</span><span class="op" id="2757093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2757096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757099">s</span><span class="op" id="2757100">.</span><span class="ident" id="2757101">Len</span>&nbsp;<span class="op" id="2757105">=</span>&nbsp;<span class="ident" id="2757107">n</span><br>
<span class="lineno">1395</span><span class="op" id="2757109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2757112">//&nbsp;SetCap&nbsp;sets&nbsp;v&#39;s&nbsp;capacity&nbsp;to&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2757146">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;smaller&nbsp;than&nbsp;the&nbsp;length&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2757222">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno">1400</span><span class="keyword" id="2757265">func</span>&nbsp;<span class="op" id="2757270">(</span><span class="ident" id="2757271">v</span>&nbsp;<span class="ident" id="2757273">Value</span><span class="op" id="2757278">)</span>&nbsp;<span class="ident" id="2757280">SetCap</span><span class="op" id="2757286">(</span><span class="ident" id="2757287">n</span>&nbsp;<span class="builtintype" id="2757289">int</span><span class="op" id="2757292">)</span>&nbsp;<span class="op" id="2757294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757297">v</span><span class="op" id="2757298">.</span><span class="ident" id="2757299">mustBeAssignable</span><span class="op" id="2757315">(</span><span class="op" id="2757316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757319">v</span><span class="op" id="2757320">.</span><span class="ident" id="2757321">mustBe</span><span class="op" id="2757327">(</span><span class="ident" id="2757328">Slice</span><span class="op" id="2757333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757336">s</span>&nbsp;<span class="op" id="2757338">:=</span>&nbsp;<span class="op" id="2757341">(</span><span class="op" id="2757342">*</span><span class="ident" id="2757343">sliceHeader</span><span class="op" id="2757354">)</span><span class="op" id="2757355">(</span><span class="ident" id="2757356">v</span><span class="op" id="2757357">.</span><span class="ident" id="2757358">ptr</span><span class="op" id="2757361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757364">if</span>&nbsp;<span class="ident" id="2757367">n</span>&nbsp;<span class="op" id="2757369">&lt;</span>&nbsp;<span class="builtintype" id="2757371">int</span><span class="op" id="2757374">(</span><span class="ident" id="2757375">s</span><span class="op" id="2757376">.</span><span class="ident" id="2757377">Len</span><span class="op" id="2757380">)</span>&nbsp;<span class="op" id="2757382">||</span>&nbsp;<span class="ident" id="2757385">n</span>&nbsp;<span class="op" id="2757387">&gt;</span>&nbsp;<span class="builtintype" id="2757389">int</span><span class="op" id="2757392">(</span><span class="ident" id="2757393">s</span><span class="op" id="2757394">.</span><span class="ident" id="2757395">Cap</span><span class="op" id="2757398">)</span>&nbsp;<span class="op" id="2757400">{</span><br>
<span class="lineno">1405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2757404">panic</span><span class="op" id="2757409">(</span><span class="string" id="2757410">&#34;reflect:&nbsp;slice&nbsp;capacity&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetCap&#34;</span><span class="op" id="2757458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2757461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757464">s</span><span class="op" id="2757465">.</span><span class="ident" id="2757466">Cap</span>&nbsp;<span class="op" id="2757470">=</span>&nbsp;<span class="ident" id="2757472">n</span><br>
<span class="lineno"></span><span class="op" id="2757474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1410</span><span class="comment" id="2757477">//&nbsp;SetMapIndex&nbsp;sets&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v&nbsp;to&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="2757548">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2757585">//&nbsp;If&nbsp;val&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value,&nbsp;SetMapIndex&nbsp;deletes&nbsp;the&nbsp;key&nbsp;from&nbsp;the&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="2757656">//&nbsp;Otherwise&nbsp;if&nbsp;v&nbsp;holds&nbsp;a&nbsp;nil&nbsp;map,&nbsp;SetMapIndex&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2757715">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type,</span><br>
<span class="lineno">1415</span><span class="comment" id="2757782">//&nbsp;and&nbsp;val&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;value&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2757845">func</span>&nbsp;<span class="op" id="2757850">(</span><span class="ident" id="2757851">v</span>&nbsp;<span class="ident" id="2757853">Value</span><span class="op" id="2757858">)</span>&nbsp;<span class="ident" id="2757860">SetMapIndex</span><span class="op" id="2757871">(</span><span class="ident" id="2757872">key</span><span class="op" id="2757875">,</span>&nbsp;<span class="ident" id="2757877">val</span>&nbsp;<span class="ident" id="2757881">Value</span><span class="op" id="2757886">)</span>&nbsp;<span class="op" id="2757888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757891">v</span><span class="op" id="2757892">.</span><span class="ident" id="2757893">mustBe</span><span class="op" id="2757899">(</span><span class="ident" id="2757900">Map</span><span class="op" id="2757903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757906">v</span><span class="op" id="2757907">.</span><span class="ident" id="2757908">mustBeExported</span><span class="op" id="2757922">(</span><span class="op" id="2757923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757926">key</span><span class="op" id="2757929">.</span><span class="ident" id="2757930">mustBeExported</span><span class="op" id="2757944">(</span><span class="op" id="2757945">)</span><br>
<span class="lineno">1420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757948">tt</span>&nbsp;<span class="op" id="2757951">:=</span>&nbsp;<span class="op" id="2757954">(</span><span class="op" id="2757955">*</span><span class="ident" id="2757956">mapType</span><span class="op" id="2757963">)</span><span class="op" id="2757964">(</span><span class="ident" id="2757965">unsafe</span><span class="op" id="2757971">.</span><span class="ident" id="2757972">Pointer</span><span class="op" id="2757979">(</span><span class="ident" id="2757980">v</span><span class="op" id="2757981">.</span><span class="ident" id="2757982">typ</span><span class="op" id="2757985">)</span><span class="op" id="2757986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757989">key</span>&nbsp;<span class="op" id="2757993">=</span>&nbsp;<span class="ident" id="2757995">key</span><span class="op" id="2757998">.</span><span class="ident" id="2757999">assignTo</span><span class="op" id="2758007">(</span><span class="string" id="2758008">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2758035">,</span>&nbsp;<span class="ident" id="2758037">tt</span><span class="op" id="2758039">.</span><span class="ident" id="2758040">key</span><span class="op" id="2758043">,</span>&nbsp;<span class="ident" id="2758045">nil</span><span class="op" id="2758048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758051">var</span>&nbsp;<span class="ident" id="2758055">k</span>&nbsp;<span class="ident" id="2758057">unsafe</span><span class="op" id="2758063">.</span><span class="ident" id="2758064">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758073">if</span>&nbsp;<span class="ident" id="2758076">key</span><span class="op" id="2758079">.</span><span class="ident" id="2758080">flag</span><span class="op" id="2758084">&amp;</span><span class="ident" id="2758085">flagIndir</span>&nbsp;<span class="op" id="2758095">!=</span>&nbsp;<span class="num" id="2758098">0</span>&nbsp;<span class="op" id="2758100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758104">k</span>&nbsp;<span class="op" id="2758106">=</span>&nbsp;<span class="ident" id="2758108">key</span><span class="op" id="2758111">.</span><span class="ident" id="2758112">ptr</span><br>
<span class="lineno">1425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758117">}</span>&nbsp;<span class="keyword" id="2758119">else</span>&nbsp;<span class="op" id="2758124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758128">k</span>&nbsp;<span class="op" id="2758130">=</span>&nbsp;<span class="ident" id="2758132">unsafe</span><span class="op" id="2758138">.</span><span class="ident" id="2758139">Pointer</span><span class="op" id="2758146">(</span><span class="op" id="2758147">&amp;</span><span class="ident" id="2758148">key</span><span class="op" id="2758151">.</span><span class="ident" id="2758152">ptr</span><span class="op" id="2758155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758161">if</span>&nbsp;<span class="ident" id="2758164">val</span><span class="op" id="2758167">.</span><span class="ident" id="2758168">typ</span>&nbsp;<span class="op" id="2758172">==</span>&nbsp;<span class="ident" id="2758175">nil</span>&nbsp;<span class="op" id="2758179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758183">mapdelete</span><span class="op" id="2758192">(</span><span class="ident" id="2758193">v</span><span class="op" id="2758194">.</span><span class="ident" id="2758195">typ</span><span class="op" id="2758198">,</span>&nbsp;<span class="ident" id="2758200">v</span><span class="op" id="2758201">.</span><span class="ident" id="2758202">pointer</span><span class="op" id="2758209">(</span><span class="op" id="2758210">)</span><span class="op" id="2758211">,</span>&nbsp;<span class="ident" id="2758213">k</span><span class="op" id="2758214">)</span><br>
<span class="lineno">1430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758218">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758229">val</span><span class="op" id="2758232">.</span><span class="ident" id="2758233">mustBeExported</span><span class="op" id="2758247">(</span><span class="op" id="2758248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758251">val</span>&nbsp;<span class="op" id="2758255">=</span>&nbsp;<span class="ident" id="2758257">val</span><span class="op" id="2758260">.</span><span class="ident" id="2758261">assignTo</span><span class="op" id="2758269">(</span><span class="string" id="2758270">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2758297">,</span>&nbsp;<span class="ident" id="2758299">tt</span><span class="op" id="2758301">.</span><span class="ident" id="2758302">elem</span><span class="op" id="2758306">,</span>&nbsp;<span class="ident" id="2758308">nil</span><span class="op" id="2758311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758314">var</span>&nbsp;<span class="ident" id="2758318">e</span>&nbsp;<span class="ident" id="2758320">unsafe</span><span class="op" id="2758326">.</span><span class="ident" id="2758327">Pointer</span><br>
<span class="lineno">1435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758336">if</span>&nbsp;<span class="ident" id="2758339">val</span><span class="op" id="2758342">.</span><span class="ident" id="2758343">flag</span><span class="op" id="2758347">&amp;</span><span class="ident" id="2758348">flagIndir</span>&nbsp;<span class="op" id="2758358">!=</span>&nbsp;<span class="num" id="2758361">0</span>&nbsp;<span class="op" id="2758363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758367">e</span>&nbsp;<span class="op" id="2758369">=</span>&nbsp;<span class="ident" id="2758371">val</span><span class="op" id="2758374">.</span><span class="ident" id="2758375">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758380">}</span>&nbsp;<span class="keyword" id="2758382">else</span>&nbsp;<span class="op" id="2758387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758391">e</span>&nbsp;<span class="op" id="2758393">=</span>&nbsp;<span class="ident" id="2758395">unsafe</span><span class="op" id="2758401">.</span><span class="ident" id="2758402">Pointer</span><span class="op" id="2758409">(</span><span class="op" id="2758410">&amp;</span><span class="ident" id="2758411">val</span><span class="op" id="2758414">.</span><span class="ident" id="2758415">ptr</span><span class="op" id="2758418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758421">}</span><br>
<span class="lineno">1440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758424">mapassign</span><span class="op" id="2758433">(</span><span class="ident" id="2758434">v</span><span class="op" id="2758435">.</span><span class="ident" id="2758436">typ</span><span class="op" id="2758439">,</span>&nbsp;<span class="ident" id="2758441">v</span><span class="op" id="2758442">.</span><span class="ident" id="2758443">pointer</span><span class="op" id="2758450">(</span><span class="op" id="2758451">)</span><span class="op" id="2758452">,</span>&nbsp;<span class="ident" id="2758454">k</span><span class="op" id="2758455">,</span>&nbsp;<span class="ident" id="2758457">e</span><span class="op" id="2758458">)</span><br>
<span class="lineno"></span><span class="op" id="2758460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2758463">//&nbsp;SetUint&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2758506">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1445</span><span class="keyword" id="2758612">func</span>&nbsp;<span class="op" id="2758617">(</span><span class="ident" id="2758618">v</span>&nbsp;<span class="ident" id="2758620">Value</span><span class="op" id="2758625">)</span>&nbsp;<span class="ident" id="2758627">SetUint</span><span class="op" id="2758634">(</span><span class="ident" id="2758635">x</span>&nbsp;<span class="ident" id="2758637">uint64</span><span class="op" id="2758643">)</span>&nbsp;<span class="op" id="2758645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758648">v</span><span class="op" id="2758649">.</span><span class="ident" id="2758650">mustBeAssignable</span><span class="op" id="2758666">(</span><span class="op" id="2758667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758670">switch</span>&nbsp;<span class="ident" id="2758677">k</span>&nbsp;<span class="op" id="2758679">:=</span>&nbsp;<span class="ident" id="2758682">v</span><span class="op" id="2758683">.</span><span class="ident" id="2758684">kind</span><span class="op" id="2758688">(</span><span class="op" id="2758689">)</span><span class="op" id="2758690">;</span>&nbsp;<span class="ident" id="2758692">k</span>&nbsp;<span class="op" id="2758694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758697">default</span><span class="op" id="2758704">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2758708">panic</span><span class="op" id="2758713">(</span><span class="op" id="2758714">&amp;</span><span class="ident" id="2758715">ValueError</span><span class="op" id="2758725">{</span><span class="string" id="2758726">&#34;reflect.Value.SetUint&#34;</span><span class="op" id="2758749">,</span>&nbsp;<span class="ident" id="2758751">v</span><span class="op" id="2758752">.</span><span class="ident" id="2758753">kind</span><span class="op" id="2758757">(</span><span class="op" id="2758758">)</span><span class="op" id="2758759">}</span><span class="op" id="2758760">)</span><br>
<span class="lineno">1450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758763">case</span>&nbsp;<span class="ident" id="2758768">Uint</span><span class="op" id="2758772">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758776">*</span><span class="op" id="2758777">(</span><span class="op" id="2758778">*</span><span class="builtintype" id="2758779">uint</span><span class="op" id="2758783">)</span><span class="op" id="2758784">(</span><span class="ident" id="2758785">v</span><span class="op" id="2758786">.</span><span class="ident" id="2758787">ptr</span><span class="op" id="2758790">)</span>&nbsp;<span class="op" id="2758792">=</span>&nbsp;<span class="builtintype" id="2758794">uint</span><span class="op" id="2758798">(</span><span class="ident" id="2758799">x</span><span class="op" id="2758800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758803">case</span>&nbsp;<span class="ident" id="2758808">Uint8</span><span class="op" id="2758813">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758817">*</span><span class="op" id="2758818">(</span><span class="op" id="2758819">*</span><span class="builtintype" id="2758820">uint8</span><span class="op" id="2758825">)</span><span class="op" id="2758826">(</span><span class="ident" id="2758827">v</span><span class="op" id="2758828">.</span><span class="ident" id="2758829">ptr</span><span class="op" id="2758832">)</span>&nbsp;<span class="op" id="2758834">=</span>&nbsp;<span class="builtintype" id="2758836">uint8</span><span class="op" id="2758841">(</span><span class="ident" id="2758842">x</span><span class="op" id="2758843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758846">case</span>&nbsp;<span class="ident" id="2758851">Uint16</span><span class="op" id="2758857">:</span><br>
<span class="lineno">1455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758861">*</span><span class="op" id="2758862">(</span><span class="op" id="2758863">*</span><span class="builtintype" id="2758864">uint16</span><span class="op" id="2758870">)</span><span class="op" id="2758871">(</span><span class="ident" id="2758872">v</span><span class="op" id="2758873">.</span><span class="ident" id="2758874">ptr</span><span class="op" id="2758877">)</span>&nbsp;<span class="op" id="2758879">=</span>&nbsp;<span class="builtintype" id="2758881">uint16</span><span class="op" id="2758887">(</span><span class="ident" id="2758888">x</span><span class="op" id="2758889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758892">case</span>&nbsp;<span class="ident" id="2758897">Uint32</span><span class="op" id="2758903">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758907">*</span><span class="op" id="2758908">(</span><span class="op" id="2758909">*</span><span class="builtintype" id="2758910">uint32</span><span class="op" id="2758916">)</span><span class="op" id="2758917">(</span><span class="ident" id="2758918">v</span><span class="op" id="2758919">.</span><span class="ident" id="2758920">ptr</span><span class="op" id="2758923">)</span>&nbsp;<span class="op" id="2758925">=</span>&nbsp;<span class="builtintype" id="2758927">uint32</span><span class="op" id="2758933">(</span><span class="ident" id="2758934">x</span><span class="op" id="2758935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758938">case</span>&nbsp;<span class="ident" id="2758943">Uint64</span><span class="op" id="2758949">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758953">*</span><span class="op" id="2758954">(</span><span class="op" id="2758955">*</span><span class="ident" id="2758956">uint64</span><span class="op" id="2758962">)</span><span class="op" id="2758963">(</span><span class="ident" id="2758964">v</span><span class="op" id="2758965">.</span><span class="ident" id="2758966">ptr</span><span class="op" id="2758969">)</span>&nbsp;<span class="op" id="2758971">=</span>&nbsp;<span class="ident" id="2758973">x</span><br>
<span class="lineno">1460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758976">case</span>&nbsp;<span class="ident" id="2758981">Uintptr</span><span class="op" id="2758988">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758992">*</span><span class="op" id="2758993">(</span><span class="op" id="2758994">*</span><span class="builtintype" id="2758995">uintptr</span><span class="op" id="2759002">)</span><span class="op" id="2759003">(</span><span class="ident" id="2759004">v</span><span class="op" id="2759005">.</span><span class="ident" id="2759006">ptr</span><span class="op" id="2759009">)</span>&nbsp;<span class="op" id="2759011">=</span>&nbsp;<span class="builtintype" id="2759013">uintptr</span><span class="op" id="2759020">(</span><span class="ident" id="2759021">x</span><span class="op" id="2759022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2759025">}</span><br>
<span class="lineno"></span><span class="op" id="2759027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1465</span><span class="comment" id="2759030">//&nbsp;SetPointer&nbsp;sets&nbsp;the&nbsp;unsafe.Pointer&nbsp;value&nbsp;v&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2759082">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2759129">func</span>&nbsp;<span class="op" id="2759134">(</span><span class="ident" id="2759135">v</span>&nbsp;<span class="ident" id="2759137">Value</span><span class="op" id="2759142">)</span>&nbsp;<span class="ident" id="2759144">SetPointer</span><span class="op" id="2759154">(</span><span class="ident" id="2759155">x</span>&nbsp;<span class="ident" id="2759157">unsafe</span><span class="op" id="2759163">.</span><span class="ident" id="2759164">Pointer</span><span class="op" id="2759171">)</span>&nbsp;<span class="op" id="2759173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759176">v</span><span class="op" id="2759177">.</span><span class="ident" id="2759178">mustBeAssignable</span><span class="op" id="2759194">(</span><span class="op" id="2759195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759198">v</span><span class="op" id="2759199">.</span><span class="ident" id="2759200">mustBe</span><span class="op" id="2759206">(</span><span class="ident" id="2759207">UnsafePointer</span><span class="op" id="2759220">)</span><br>
<span class="lineno">1470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2759223">*</span><span class="op" id="2759224">(</span><span class="op" id="2759225">*</span><span class="ident" id="2759226">unsafe</span><span class="op" id="2759232">.</span><span class="ident" id="2759233">Pointer</span><span class="op" id="2759240">)</span><span class="op" id="2759241">(</span><span class="ident" id="2759242">v</span><span class="op" id="2759243">.</span><span class="ident" id="2759244">ptr</span><span class="op" id="2759247">)</span>&nbsp;<span class="op" id="2759249">=</span>&nbsp;<span class="ident" id="2759251">x</span><br>
<span class="lineno"></span><span class="op" id="2759253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2759256">//&nbsp;SetString&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2759301">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1475</span><span class="keyword" id="2759365">func</span>&nbsp;<span class="op" id="2759370">(</span><span class="ident" id="2759371">v</span>&nbsp;<span class="ident" id="2759373">Value</span><span class="op" id="2759378">)</span>&nbsp;<span class="ident" id="2759380">SetString</span><span class="op" id="2759389">(</span><span class="ident" id="2759390">x</span>&nbsp;<span class="builtintype" id="2759392">string</span><span class="op" id="2759398">)</span>&nbsp;<span class="op" id="2759400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759403">v</span><span class="op" id="2759404">.</span><span class="ident" id="2759405">mustBeAssignable</span><span class="op" id="2759421">(</span><span class="op" id="2759422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759425">v</span><span class="op" id="2759426">.</span><span class="ident" id="2759427">mustBe</span><span class="op" id="2759433">(</span><span class="ident" id="2759434">String</span><span class="op" id="2759440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2759443">*</span><span class="op" id="2759444">(</span><span class="op" id="2759445">*</span><span class="builtintype" id="2759446">string</span><span class="op" id="2759452">)</span><span class="op" id="2759453">(</span><span class="ident" id="2759454">v</span><span class="op" id="2759455">.</span><span class="ident" id="2759456">ptr</span><span class="op" id="2759459">)</span>&nbsp;<span class="op" id="2759461">=</span>&nbsp;<span class="ident" id="2759463">x</span><br>
<span class="lineno"></span><span class="op" id="2759465">}</span><br>
<span class="lineno">1480</span><br>
<span class="lineno"></span><span class="comment" id="2759468">//&nbsp;Slice&nbsp;returns&nbsp;v[i:j].</span><br>
<span class="lineno"></span><span class="comment" id="2759493">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice&nbsp;or&nbsp;String,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2759584">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2759624">func</span>&nbsp;<span class="op" id="2759629">(</span><span class="ident" id="2759630">v</span>&nbsp;<span class="ident" id="2759632">Value</span><span class="op" id="2759637">)</span>&nbsp;<span class="ident" id="2759639">Slice</span><span class="op" id="2759644">(</span><span class="ident" id="2759645">i</span><span class="op" id="2759646">,</span>&nbsp;<span class="ident" id="2759648">j</span>&nbsp;<span class="builtintype" id="2759650">int</span><span class="op" id="2759653">)</span>&nbsp;<span class="ident" id="2759655">Value</span>&nbsp;<span class="op" id="2759661">{</span><br>
<span class="lineno">1485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759664">var</span>&nbsp;<span class="op" id="2759668">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2759672">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2759677">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759683">typ</span>&nbsp;&nbsp;<span class="op" id="2759688">*</span><span class="ident" id="2759689">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759701">base</span>&nbsp;<span class="ident" id="2759706">unsafe</span><span class="op" id="2759712">.</span><span class="ident" id="2759713">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2759722">)</span><br>
<span class="lineno">1490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759725">switch</span>&nbsp;<span class="ident" id="2759732">kind</span>&nbsp;<span class="op" id="2759737">:=</span>&nbsp;<span class="ident" id="2759740">v</span><span class="op" id="2759741">.</span><span class="ident" id="2759742">kind</span><span class="op" id="2759746">(</span><span class="op" id="2759747">)</span><span class="op" id="2759748">;</span>&nbsp;<span class="ident" id="2759750">kind</span>&nbsp;<span class="op" id="2759755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759758">default</span><span class="op" id="2759765">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2759769">panic</span><span class="op" id="2759774">(</span><span class="op" id="2759775">&amp;</span><span class="ident" id="2759776">ValueError</span><span class="op" id="2759786">{</span><span class="string" id="2759787">&#34;reflect.Value.Slice&#34;</span><span class="op" id="2759808">,</span>&nbsp;<span class="ident" id="2759810">v</span><span class="op" id="2759811">.</span><span class="ident" id="2759812">kind</span><span class="op" id="2759816">(</span><span class="op" id="2759817">)</span><span class="op" id="2759818">}</span><span class="op" id="2759819">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759823">case</span>&nbsp;<span class="ident" id="2759828">Array</span><span class="op" id="2759833">:</span><br>
<span class="lineno">1495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759837">if</span>&nbsp;<span class="ident" id="2759840">v</span><span class="op" id="2759841">.</span><span class="ident" id="2759842">flag</span><span class="op" id="2759846">&amp;</span><span class="ident" id="2759847">flagAddr</span>&nbsp;<span class="op" id="2759856">==</span>&nbsp;<span class="num" id="2759859">0</span>&nbsp;<span class="op" id="2759861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2759866">panic</span><span class="op" id="2759871">(</span><span class="string" id="2759872">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2759923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2759927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759931">tt</span>&nbsp;<span class="op" id="2759934">:=</span>&nbsp;<span class="op" id="2759937">(</span><span class="op" id="2759938">*</span><span class="ident" id="2759939">arrayType</span><span class="op" id="2759948">)</span><span class="op" id="2759949">(</span><span class="ident" id="2759950">unsafe</span><span class="op" id="2759956">.</span><span class="ident" id="2759957">Pointer</span><span class="op" id="2759964">(</span><span class="ident" id="2759965">v</span><span class="op" id="2759966">.</span><span class="ident" id="2759967">typ</span><span class="op" id="2759970">)</span><span class="op" id="2759971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2759975">cap</span>&nbsp;<span class="op" id="2759979">=</span>&nbsp;<span class="builtintype" id="2759981">int</span><span class="op" id="2759984">(</span><span class="ident" id="2759985">tt</span><span class="op" id="2759987">.</span><span class="builtinfunc" id="2759988">len</span><span class="op" id="2759991">)</span><br>
<span class="lineno">1500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759995">typ</span>&nbsp;<span class="op" id="2759999">=</span>&nbsp;<span class="op" id="2760001">(</span><span class="op" id="2760002">*</span><span class="ident" id="2760003">sliceType</span><span class="op" id="2760012">)</span><span class="op" id="2760013">(</span><span class="ident" id="2760014">unsafe</span><span class="op" id="2760020">.</span><span class="ident" id="2760021">Pointer</span><span class="op" id="2760028">(</span><span class="ident" id="2760029">tt</span><span class="op" id="2760031">.</span><span class="ident" id="2760032">slice</span><span class="op" id="2760037">)</span><span class="op" id="2760038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760042">base</span>&nbsp;<span class="op" id="2760047">=</span>&nbsp;<span class="ident" id="2760049">v</span><span class="op" id="2760050">.</span><span class="ident" id="2760051">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760057">case</span>&nbsp;<span class="ident" id="2760062">Slice</span><span class="op" id="2760067">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760071">typ</span>&nbsp;<span class="op" id="2760075">=</span>&nbsp;<span class="op" id="2760077">(</span><span class="op" id="2760078">*</span><span class="ident" id="2760079">sliceType</span><span class="op" id="2760088">)</span><span class="op" id="2760089">(</span><span class="ident" id="2760090">unsafe</span><span class="op" id="2760096">.</span><span class="ident" id="2760097">Pointer</span><span class="op" id="2760104">(</span><span class="ident" id="2760105">v</span><span class="op" id="2760106">.</span><span class="ident" id="2760107">typ</span><span class="op" id="2760110">)</span><span class="op" id="2760111">)</span><br>
<span class="lineno">1505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760115">s</span>&nbsp;<span class="op" id="2760117">:=</span>&nbsp;<span class="op" id="2760120">(</span><span class="op" id="2760121">*</span><span class="ident" id="2760122">sliceHeader</span><span class="op" id="2760133">)</span><span class="op" id="2760134">(</span><span class="ident" id="2760135">v</span><span class="op" id="2760136">.</span><span class="ident" id="2760137">ptr</span><span class="op" id="2760140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760144">base</span>&nbsp;<span class="op" id="2760149">=</span>&nbsp;<span class="ident" id="2760151">unsafe</span><span class="op" id="2760157">.</span><span class="ident" id="2760158">Pointer</span><span class="op" id="2760165">(</span><span class="ident" id="2760166">s</span><span class="op" id="2760167">.</span><span class="ident" id="2760168">Data</span><span class="op" id="2760172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2760176">cap</span>&nbsp;<span class="op" id="2760180">=</span>&nbsp;<span class="ident" id="2760182">s</span><span class="op" id="2760183">.</span><span class="ident" id="2760184">Cap</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760190">case</span>&nbsp;<span class="ident" id="2760195">String</span><span class="op" id="2760201">:</span><br>
<span class="lineno">1510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760205">s</span>&nbsp;<span class="op" id="2760207">:=</span>&nbsp;<span class="op" id="2760210">(</span><span class="op" id="2760211">*</span><span class="ident" id="2760212">stringHeader</span><span class="op" id="2760224">)</span><span class="op" id="2760225">(</span><span class="ident" id="2760226">v</span><span class="op" id="2760227">.</span><span class="ident" id="2760228">ptr</span><span class="op" id="2760231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760235">if</span>&nbsp;<span class="ident" id="2760238">i</span>&nbsp;<span class="op" id="2760240">&lt;</span>&nbsp;<span class="num" id="2760242">0</span>&nbsp;<span class="op" id="2760244">||</span>&nbsp;<span class="ident" id="2760247">j</span>&nbsp;<span class="op" id="2760249">&lt;</span>&nbsp;<span class="ident" id="2760251">i</span>&nbsp;<span class="op" id="2760253">||</span>&nbsp;<span class="ident" id="2760256">j</span>&nbsp;<span class="op" id="2760258">&gt;</span>&nbsp;<span class="ident" id="2760260">s</span><span class="op" id="2760261">.</span><span class="ident" id="2760262">Len</span>&nbsp;<span class="op" id="2760266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2760271">panic</span><span class="op" id="2760276">(</span><span class="string" id="2760277">&#34;reflect.Value.Slice:&nbsp;string&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2760332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760340">t</span>&nbsp;<span class="op" id="2760342">:=</span>&nbsp;<span class="ident" id="2760345">stringHeader</span><span class="op" id="2760357">{</span><span class="ident" id="2760358">unsafe</span><span class="op" id="2760364">.</span><span class="ident" id="2760365">Pointer</span><span class="op" id="2760372">(</span><span class="builtintype" id="2760373">uintptr</span><span class="op" id="2760380">(</span><span class="ident" id="2760381">s</span><span class="op" id="2760382">.</span><span class="ident" id="2760383">Data</span><span class="op" id="2760387">)</span>&nbsp;<span class="op" id="2760389">+</span>&nbsp;<span class="builtintype" id="2760391">uintptr</span><span class="op" id="2760398">(</span><span class="ident" id="2760399">i</span><span class="op" id="2760400">)</span><span class="op" id="2760401">)</span><span class="op" id="2760402">,</span>&nbsp;<span class="ident" id="2760404">j</span>&nbsp;<span class="op" id="2760406">-</span>&nbsp;<span class="ident" id="2760408">i</span><span class="op" id="2760409">}</span><br>
<span class="lineno">1515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760413">return</span>&nbsp;<span class="ident" id="2760420">Value</span><span class="op" id="2760425">{</span><span class="ident" id="2760426">v</span><span class="op" id="2760427">.</span><span class="ident" id="2760428">typ</span><span class="op" id="2760431">,</span>&nbsp;<span class="ident" id="2760433">unsafe</span><span class="op" id="2760439">.</span><span class="ident" id="2760440">Pointer</span><span class="op" id="2760447">(</span><span class="op" id="2760448">&amp;</span><span class="ident" id="2760449">t</span><span class="op" id="2760450">)</span><span class="op" id="2760451">,</span>&nbsp;<span class="ident" id="2760453">v</span><span class="op" id="2760454">.</span><span class="ident" id="2760455">flag</span><span class="op" id="2760459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760466">if</span>&nbsp;<span class="ident" id="2760469">i</span>&nbsp;<span class="op" id="2760471">&lt;</span>&nbsp;<span class="num" id="2760473">0</span>&nbsp;<span class="op" id="2760475">||</span>&nbsp;<span class="ident" id="2760478">j</span>&nbsp;<span class="op" id="2760480">&lt;</span>&nbsp;<span class="ident" id="2760482">i</span>&nbsp;<span class="op" id="2760484">||</span>&nbsp;<span class="ident" id="2760487">j</span>&nbsp;<span class="op" id="2760489">&gt;</span>&nbsp;<span class="builtinfunc" id="2760491">cap</span>&nbsp;<span class="op" id="2760495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2760499">panic</span><span class="op" id="2760504">(</span><span class="string" id="2760505">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2760553">)</span><br>
<span class="lineno">1520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2760560">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;gc&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760621">var</span>&nbsp;<span class="ident" id="2760625">x</span>&nbsp;<span class="op" id="2760627">[</span><span class="op" id="2760628">]</span><span class="ident" id="2760629">unsafe</span><span class="op" id="2760635">.</span><span class="ident" id="2760636">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno">1525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2760646">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760687">s</span>&nbsp;<span class="op" id="2760689">:=</span>&nbsp;<span class="op" id="2760692">(</span><span class="op" id="2760693">*</span><span class="ident" id="2760694">sliceHeader</span><span class="op" id="2760705">)</span><span class="op" id="2760706">(</span><span class="ident" id="2760707">unsafe</span><span class="op" id="2760713">.</span><span class="ident" id="2760714">Pointer</span><span class="op" id="2760721">(</span><span class="op" id="2760722">&amp;</span><span class="ident" id="2760723">x</span><span class="op" id="2760724">)</span><span class="op" id="2760725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760728">s</span><span class="op" id="2760729">.</span><span class="ident" id="2760730">Len</span>&nbsp;<span class="op" id="2760734">=</span>&nbsp;<span class="ident" id="2760736">j</span>&nbsp;<span class="op" id="2760738">-</span>&nbsp;<span class="ident" id="2760740">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760743">s</span><span class="op" id="2760744">.</span><span class="ident" id="2760745">Cap</span>&nbsp;<span class="op" id="2760749">=</span>&nbsp;<span class="builtinfunc" id="2760751">cap</span>&nbsp;<span class="op" id="2760755">-</span>&nbsp;<span class="ident" id="2760757">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760760">if</span>&nbsp;<span class="builtinfunc" id="2760763">cap</span><span class="op" id="2760766">-</span><span class="ident" id="2760767">i</span>&nbsp;<span class="op" id="2760769">&gt;</span>&nbsp;<span class="num" id="2760771">0</span>&nbsp;<span class="op" id="2760773">{</span><br>
<span class="lineno">1530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760777">s</span><span class="op" id="2760778">.</span><span class="ident" id="2760779">Data</span>&nbsp;<span class="op" id="2760784">=</span>&nbsp;<span class="ident" id="2760786">unsafe</span><span class="op" id="2760792">.</span><span class="ident" id="2760793">Pointer</span><span class="op" id="2760800">(</span><span class="builtintype" id="2760801">uintptr</span><span class="op" id="2760808">(</span><span class="ident" id="2760809">base</span><span class="op" id="2760813">)</span>&nbsp;<span class="op" id="2760815">+</span>&nbsp;<span class="builtintype" id="2760817">uintptr</span><span class="op" id="2760824">(</span><span class="ident" id="2760825">i</span><span class="op" id="2760826">)</span><span class="op" id="2760827">*</span><span class="ident" id="2760828">typ</span><span class="op" id="2760831">.</span><span class="ident" id="2760832">elem</span><span class="op" id="2760836">.</span><span class="ident" id="2760837">Size</span><span class="op" id="2760841">(</span><span class="op" id="2760842">)</span><span class="op" id="2760843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760846">}</span>&nbsp;<span class="keyword" id="2760848">else</span>&nbsp;<span class="op" id="2760853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2760857">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760924">s</span><span class="op" id="2760925">.</span><span class="ident" id="2760926">Data</span>&nbsp;<span class="op" id="2760931">=</span>&nbsp;<span class="ident" id="2760933">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760939">}</span><br>
<span class="lineno">1535</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760943">fl</span>&nbsp;<span class="op" id="2760946">:=</span>&nbsp;<span class="ident" id="2760949">v</span><span class="op" id="2760950">.</span><span class="ident" id="2760951">flag</span><span class="op" id="2760955">&amp;</span><span class="ident" id="2760956">flagRO</span>&nbsp;<span class="op" id="2760963">|</span>&nbsp;<span class="ident" id="2760965">flagIndir</span>&nbsp;<span class="op" id="2760975">|</span>&nbsp;<span class="ident" id="2760977">flag</span><span class="op" id="2760981">(</span><span class="ident" id="2760982">Slice</span><span class="op" id="2760987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760990">return</span>&nbsp;<span class="ident" id="2760997">Value</span><span class="op" id="2761002">{</span><span class="ident" id="2761003">typ</span><span class="op" id="2761006">.</span><span class="ident" id="2761007">common</span><span class="op" id="2761013">(</span><span class="op" id="2761014">)</span><span class="op" id="2761015">,</span>&nbsp;<span class="ident" id="2761017">unsafe</span><span class="op" id="2761023">.</span><span class="ident" id="2761024">Pointer</span><span class="op" id="2761031">(</span><span class="op" id="2761032">&amp;</span><span class="ident" id="2761033">x</span><span class="op" id="2761034">)</span><span class="op" id="2761035">,</span>&nbsp;<span class="ident" id="2761037">fl</span><span class="op" id="2761039">}</span><br>
<span class="lineno"></span><span class="op" id="2761041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1540</span><span class="comment" id="2761044">//&nbsp;Slice3&nbsp;is&nbsp;the&nbsp;3-index&nbsp;form&nbsp;of&nbsp;the&nbsp;slice&nbsp;operation:&nbsp;it&nbsp;returns&nbsp;v[i:j:k].</span><br>
<span class="lineno"></span><span class="comment" id="2761119">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array&nbsp;or&nbsp;Slice,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2761202">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2761242">func</span>&nbsp;<span class="op" id="2761247">(</span><span class="ident" id="2761248">v</span>&nbsp;<span class="ident" id="2761250">Value</span><span class="op" id="2761255">)</span>&nbsp;<span class="ident" id="2761257">Slice3</span><span class="op" id="2761263">(</span><span class="ident" id="2761264">i</span><span class="op" id="2761265">,</span>&nbsp;<span class="ident" id="2761267">j</span><span class="op" id="2761268">,</span>&nbsp;<span class="ident" id="2761270">k</span>&nbsp;<span class="builtintype" id="2761272">int</span><span class="op" id="2761275">)</span>&nbsp;<span class="ident" id="2761277">Value</span>&nbsp;<span class="op" id="2761283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761286">var</span>&nbsp;<span class="op" id="2761290">(</span><br>
<span class="lineno">1545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2761294">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2761299">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761305">typ</span>&nbsp;&nbsp;<span class="op" id="2761310">*</span><span class="ident" id="2761311">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761323">base</span>&nbsp;<span class="ident" id="2761328">unsafe</span><span class="op" id="2761334">.</span><span class="ident" id="2761335">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761347">switch</span>&nbsp;<span class="ident" id="2761354">kind</span>&nbsp;<span class="op" id="2761359">:=</span>&nbsp;<span class="ident" id="2761362">v</span><span class="op" id="2761363">.</span><span class="ident" id="2761364">kind</span><span class="op" id="2761368">(</span><span class="op" id="2761369">)</span><span class="op" id="2761370">;</span>&nbsp;<span class="ident" id="2761372">kind</span>&nbsp;<span class="op" id="2761377">{</span><br>
<span class="lineno">1550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761380">default</span><span class="op" id="2761387">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2761391">panic</span><span class="op" id="2761396">(</span><span class="op" id="2761397">&amp;</span><span class="ident" id="2761398">ValueError</span><span class="op" id="2761408">{</span><span class="string" id="2761409">&#34;reflect.Value.Slice3&#34;</span><span class="op" id="2761431">,</span>&nbsp;<span class="ident" id="2761433">v</span><span class="op" id="2761434">.</span><span class="ident" id="2761435">kind</span><span class="op" id="2761439">(</span><span class="op" id="2761440">)</span><span class="op" id="2761441">}</span><span class="op" id="2761442">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761446">case</span>&nbsp;<span class="ident" id="2761451">Array</span><span class="op" id="2761456">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761460">if</span>&nbsp;<span class="ident" id="2761463">v</span><span class="op" id="2761464">.</span><span class="ident" id="2761465">flag</span><span class="op" id="2761469">&amp;</span><span class="ident" id="2761470">flagAddr</span>&nbsp;<span class="op" id="2761479">==</span>&nbsp;<span class="num" id="2761482">0</span>&nbsp;<span class="op" id="2761484">{</span><br>
<span class="lineno">1555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2761489">panic</span><span class="op" id="2761494">(</span><span class="string" id="2761495">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2761547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761555">tt</span>&nbsp;<span class="op" id="2761558">:=</span>&nbsp;<span class="op" id="2761561">(</span><span class="op" id="2761562">*</span><span class="ident" id="2761563">arrayType</span><span class="op" id="2761572">)</span><span class="op" id="2761573">(</span><span class="ident" id="2761574">unsafe</span><span class="op" id="2761580">.</span><span class="ident" id="2761581">Pointer</span><span class="op" id="2761588">(</span><span class="ident" id="2761589">v</span><span class="op" id="2761590">.</span><span class="ident" id="2761591">typ</span><span class="op" id="2761594">)</span><span class="op" id="2761595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2761599">cap</span>&nbsp;<span class="op" id="2761603">=</span>&nbsp;<span class="builtintype" id="2761605">int</span><span class="op" id="2761608">(</span><span class="ident" id="2761609">tt</span><span class="op" id="2761611">.</span><span class="builtinfunc" id="2761612">len</span><span class="op" id="2761615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761619">typ</span>&nbsp;<span class="op" id="2761623">=</span>&nbsp;<span class="op" id="2761625">(</span><span class="op" id="2761626">*</span><span class="ident" id="2761627">sliceType</span><span class="op" id="2761636">)</span><span class="op" id="2761637">(</span><span class="ident" id="2761638">unsafe</span><span class="op" id="2761644">.</span><span class="ident" id="2761645">Pointer</span><span class="op" id="2761652">(</span><span class="ident" id="2761653">tt</span><span class="op" id="2761655">.</span><span class="ident" id="2761656">slice</span><span class="op" id="2761661">)</span><span class="op" id="2761662">)</span><br>
<span class="lineno">1560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761666">base</span>&nbsp;<span class="op" id="2761671">=</span>&nbsp;<span class="ident" id="2761673">v</span><span class="op" id="2761674">.</span><span class="ident" id="2761675">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761681">case</span>&nbsp;<span class="ident" id="2761686">Slice</span><span class="op" id="2761691">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761695">typ</span>&nbsp;<span class="op" id="2761699">=</span>&nbsp;<span class="op" id="2761701">(</span><span class="op" id="2761702">*</span><span class="ident" id="2761703">sliceType</span><span class="op" id="2761712">)</span><span class="op" id="2761713">(</span><span class="ident" id="2761714">unsafe</span><span class="op" id="2761720">.</span><span class="ident" id="2761721">Pointer</span><span class="op" id="2761728">(</span><span class="ident" id="2761729">v</span><span class="op" id="2761730">.</span><span class="ident" id="2761731">typ</span><span class="op" id="2761734">)</span><span class="op" id="2761735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761739">s</span>&nbsp;<span class="op" id="2761741">:=</span>&nbsp;<span class="op" id="2761744">(</span><span class="op" id="2761745">*</span><span class="ident" id="2761746">sliceHeader</span><span class="op" id="2761757">)</span><span class="op" id="2761758">(</span><span class="ident" id="2761759">v</span><span class="op" id="2761760">.</span><span class="ident" id="2761761">ptr</span><span class="op" id="2761764">)</span><br>
<span class="lineno">1565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761768">base</span>&nbsp;<span class="op" id="2761773">=</span>&nbsp;<span class="ident" id="2761775">s</span><span class="op" id="2761776">.</span><span class="ident" id="2761777">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2761784">cap</span>&nbsp;<span class="op" id="2761788">=</span>&nbsp;<span class="ident" id="2761790">s</span><span class="op" id="2761791">.</span><span class="ident" id="2761792">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761801">if</span>&nbsp;<span class="ident" id="2761804">i</span>&nbsp;<span class="op" id="2761806">&lt;</span>&nbsp;<span class="num" id="2761808">0</span>&nbsp;<span class="op" id="2761810">||</span>&nbsp;<span class="ident" id="2761813">j</span>&nbsp;<span class="op" id="2761815">&lt;</span>&nbsp;<span class="ident" id="2761817">i</span>&nbsp;<span class="op" id="2761819">||</span>&nbsp;<span class="ident" id="2761822">k</span>&nbsp;<span class="op" id="2761824">&lt;</span>&nbsp;<span class="ident" id="2761826">j</span>&nbsp;<span class="op" id="2761828">||</span>&nbsp;<span class="ident" id="2761831">k</span>&nbsp;<span class="op" id="2761833">&gt;</span>&nbsp;<span class="builtinfunc" id="2761835">cap</span>&nbsp;<span class="op" id="2761839">{</span><br>
<span class="lineno">1570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2761843">panic</span><span class="op" id="2761848">(</span><span class="string" id="2761849">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2761898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2761905">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;the&nbsp;garbage&nbsp;collector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2761953">//&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno">1575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761989">var</span>&nbsp;<span class="ident" id="2761993">x</span>&nbsp;<span class="op" id="2761995">[</span><span class="op" id="2761996">]</span><span class="ident" id="2761997">unsafe</span><span class="op" id="2762003">.</span><span class="ident" id="2762004">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762014">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762055">s</span>&nbsp;<span class="op" id="2762057">:=</span>&nbsp;<span class="op" id="2762060">(</span><span class="op" id="2762061">*</span><span class="ident" id="2762062">sliceHeader</span><span class="op" id="2762073">)</span><span class="op" id="2762074">(</span><span class="ident" id="2762075">unsafe</span><span class="op" id="2762081">.</span><span class="ident" id="2762082">Pointer</span><span class="op" id="2762089">(</span><span class="op" id="2762090">&amp;</span><span class="ident" id="2762091">x</span><span class="op" id="2762092">)</span><span class="op" id="2762093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762096">s</span><span class="op" id="2762097">.</span><span class="ident" id="2762098">Len</span>&nbsp;<span class="op" id="2762102">=</span>&nbsp;<span class="ident" id="2762104">j</span>&nbsp;<span class="op" id="2762106">-</span>&nbsp;<span class="ident" id="2762108">i</span><br>
<span class="lineno">1580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762111">s</span><span class="op" id="2762112">.</span><span class="ident" id="2762113">Cap</span>&nbsp;<span class="op" id="2762117">=</span>&nbsp;<span class="ident" id="2762119">k</span>&nbsp;<span class="op" id="2762121">-</span>&nbsp;<span class="ident" id="2762123">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762126">if</span>&nbsp;<span class="ident" id="2762129">k</span><span class="op" id="2762130">-</span><span class="ident" id="2762131">i</span>&nbsp;<span class="op" id="2762133">&gt;</span>&nbsp;<span class="num" id="2762135">0</span>&nbsp;<span class="op" id="2762137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762141">s</span><span class="op" id="2762142">.</span><span class="ident" id="2762143">Data</span>&nbsp;<span class="op" id="2762148">=</span>&nbsp;<span class="ident" id="2762150">unsafe</span><span class="op" id="2762156">.</span><span class="ident" id="2762157">Pointer</span><span class="op" id="2762164">(</span><span class="builtintype" id="2762165">uintptr</span><span class="op" id="2762172">(</span><span class="ident" id="2762173">base</span><span class="op" id="2762177">)</span>&nbsp;<span class="op" id="2762179">+</span>&nbsp;<span class="builtintype" id="2762181">uintptr</span><span class="op" id="2762188">(</span><span class="ident" id="2762189">i</span><span class="op" id="2762190">)</span><span class="op" id="2762191">*</span><span class="ident" id="2762192">typ</span><span class="op" id="2762195">.</span><span class="ident" id="2762196">elem</span><span class="op" id="2762200">.</span><span class="ident" id="2762201">Size</span><span class="op" id="2762205">(</span><span class="op" id="2762206">)</span><span class="op" id="2762207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2762210">}</span>&nbsp;<span class="keyword" id="2762212">else</span>&nbsp;<span class="op" id="2762217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762221">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno">1585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762288">s</span><span class="op" id="2762289">.</span><span class="ident" id="2762290">Data</span>&nbsp;<span class="op" id="2762295">=</span>&nbsp;<span class="ident" id="2762297">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2762303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762307">fl</span>&nbsp;<span class="op" id="2762310">:=</span>&nbsp;<span class="ident" id="2762313">v</span><span class="op" id="2762314">.</span><span class="ident" id="2762315">flag</span><span class="op" id="2762319">&amp;</span><span class="ident" id="2762320">flagRO</span>&nbsp;<span class="op" id="2762327">|</span>&nbsp;<span class="ident" id="2762329">flagIndir</span>&nbsp;<span class="op" id="2762339">|</span>&nbsp;<span class="ident" id="2762341">flag</span><span class="op" id="2762345">(</span><span class="ident" id="2762346">Slice</span><span class="op" id="2762351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762354">return</span>&nbsp;<span class="ident" id="2762361">Value</span><span class="op" id="2762366">{</span><span class="ident" id="2762367">typ</span><span class="op" id="2762370">.</span><span class="ident" id="2762371">common</span><span class="op" id="2762377">(</span><span class="op" id="2762378">)</span><span class="op" id="2762379">,</span>&nbsp;<span class="ident" id="2762381">unsafe</span><span class="op" id="2762387">.</span><span class="ident" id="2762388">Pointer</span><span class="op" id="2762395">(</span><span class="op" id="2762396">&amp;</span><span class="ident" id="2762397">x</span><span class="op" id="2762398">)</span><span class="op" id="2762399">,</span>&nbsp;<span class="ident" id="2762401">fl</span><span class="op" id="2762403">}</span><br>
<span class="lineno">1590</span><span class="op" id="2762405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2762408">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;string&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2762472">//&nbsp;String&nbsp;is&nbsp;a&nbsp;special&nbsp;case&nbsp;because&nbsp;of&nbsp;Go&#39;s&nbsp;String&nbsp;method&nbsp;convention.</span><br>
<span class="lineno"></span><span class="comment" id="2762542">//&nbsp;Unlike&nbsp;the&nbsp;other&nbsp;getters,&nbsp;it&nbsp;does&nbsp;not&nbsp;panic&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String.</span><br>
<span class="lineno">1595</span><span class="comment" id="2762616">//&nbsp;Instead,&nbsp;it&nbsp;returns&nbsp;a&nbsp;string&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;&lt;T&nbsp;value&gt;&#34;&nbsp;where&nbsp;T&nbsp;is&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2762693">func</span>&nbsp;<span class="op" id="2762698">(</span><span class="ident" id="2762699">v</span>&nbsp;<span class="ident" id="2762701">Value</span><span class="op" id="2762706">)</span>&nbsp;<span class="ident" id="2762708">String</span><span class="op" id="2762714">(</span><span class="op" id="2762715">)</span>&nbsp;<span class="builtintype" id="2762717">string</span>&nbsp;<span class="op" id="2762724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762727">switch</span>&nbsp;<span class="ident" id="2762734">k</span>&nbsp;<span class="op" id="2762736">:=</span>&nbsp;<span class="ident" id="2762739">v</span><span class="op" id="2762740">.</span><span class="ident" id="2762741">kind</span><span class="op" id="2762745">(</span><span class="op" id="2762746">)</span><span class="op" id="2762747">;</span>&nbsp;<span class="ident" id="2762749">k</span>&nbsp;<span class="op" id="2762751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762754">case</span>&nbsp;<span class="ident" id="2762759">Invalid</span><span class="op" id="2762766">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762770">return</span>&nbsp;<span class="string" id="2762777">&#34;&lt;invalid&nbsp;Value&gt;&#34;</span><br>
<span class="lineno">1600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762796">case</span>&nbsp;<span class="ident" id="2762801">String</span><span class="op" id="2762807">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762811">return</span>&nbsp;<span class="op" id="2762818">*</span><span class="op" id="2762819">(</span><span class="op" id="2762820">*</span><span class="builtintype" id="2762821">string</span><span class="op" id="2762827">)</span><span class="op" id="2762828">(</span><span class="ident" id="2762829">v</span><span class="op" id="2762830">.</span><span class="ident" id="2762831">ptr</span><span class="op" id="2762834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2762837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762840">//&nbsp;If&nbsp;you&nbsp;call&nbsp;String&nbsp;on&nbsp;a&nbsp;reflect.Value&nbsp;of&nbsp;other&nbsp;type,&nbsp;it&#39;s&nbsp;better&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762912">//&nbsp;print&nbsp;something&nbsp;than&nbsp;to&nbsp;panic.&nbsp;Useful&nbsp;in&nbsp;debugging.</span><br>
<span class="lineno">1605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762968">return</span>&nbsp;<span class="string" id="2762975">&#34;&lt;&#34;</span>&nbsp;<span class="op" id="2762979">+</span>&nbsp;<span class="ident" id="2762981">v</span><span class="op" id="2762982">.</span><span class="ident" id="2762983">Type</span><span class="op" id="2762987">(</span><span class="op" id="2762988">)</span><span class="op" id="2762989">.</span><span class="ident" id="2762990">String</span><span class="op" id="2762996">(</span><span class="op" id="2762997">)</span>&nbsp;<span class="op" id="2762999">+</span>&nbsp;<span class="string" id="2763001">&#34;&nbsp;Value&gt;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2763011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2763014">//&nbsp;TryRecv&nbsp;attempts&nbsp;to&nbsp;receive&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="2763092">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno">1610</span><span class="comment" id="2763130">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;delivers&nbsp;a&nbsp;value,&nbsp;x&nbsp;is&nbsp;the&nbsp;transferred&nbsp;value&nbsp;and&nbsp;ok&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span><span class="comment" id="2763209">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;cannot&nbsp;finish&nbsp;without&nbsp;blocking,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2763296">//&nbsp;If&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2763393">func</span>&nbsp;<span class="op" id="2763398">(</span><span class="ident" id="2763399">v</span>&nbsp;<span class="ident" id="2763401">Value</span><span class="op" id="2763406">)</span>&nbsp;<span class="ident" id="2763408">TryRecv</span><span class="op" id="2763415">(</span><span class="op" id="2763416">)</span>&nbsp;<span class="op" id="2763418">(</span><span class="ident" id="2763419">x</span>&nbsp;<span class="ident" id="2763421">Value</span><span class="op" id="2763426">,</span>&nbsp;<span class="ident" id="2763428">ok</span>&nbsp;<span class="builtintype" id="2763431">bool</span><span class="op" id="2763435">)</span>&nbsp;<span class="op" id="2763437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763440">v</span><span class="op" id="2763441">.</span><span class="ident" id="2763442">mustBe</span><span class="op" id="2763448">(</span><span class="ident" id="2763449">Chan</span><span class="op" id="2763453">)</span><br>
<span class="lineno">1615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763456">v</span><span class="op" id="2763457">.</span><span class="ident" id="2763458">mustBeExported</span><span class="op" id="2763472">(</span><span class="op" id="2763473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763476">return</span>&nbsp;<span class="ident" id="2763483">v</span><span class="op" id="2763484">.</span><span class="ident" id="2763485">recv</span><span class="op" id="2763489">(</span><span class="builtintype" id="2763490">true</span><span class="op" id="2763494">)</span><br>
<span class="lineno"></span><span class="op" id="2763496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2763499">//&nbsp;TrySend&nbsp;attempts&nbsp;to&nbsp;send&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno">1620</span><span class="comment" id="2763566">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2763604">//&nbsp;It&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;was&nbsp;sent,&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2763663">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2763736">func</span>&nbsp;<span class="op" id="2763741">(</span><span class="ident" id="2763742">v</span>&nbsp;<span class="ident" id="2763744">Value</span><span class="op" id="2763749">)</span>&nbsp;<span class="ident" id="2763751">TrySend</span><span class="op" id="2763758">(</span><span class="ident" id="2763759">x</span>&nbsp;<span class="ident" id="2763761">Value</span><span class="op" id="2763766">)</span>&nbsp;<span class="builtintype" id="2763768">bool</span>&nbsp;<span class="op" id="2763773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763776">v</span><span class="op" id="2763777">.</span><span class="ident" id="2763778">mustBe</span><span class="op" id="2763784">(</span><span class="ident" id="2763785">Chan</span><span class="op" id="2763789">)</span><br>
<span class="lineno">1625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763792">v</span><span class="op" id="2763793">.</span><span class="ident" id="2763794">mustBeExported</span><span class="op" id="2763808">(</span><span class="op" id="2763809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763812">return</span>&nbsp;<span class="ident" id="2763819">v</span><span class="op" id="2763820">.</span><span class="ident" id="2763821">send</span><span class="op" id="2763825">(</span><span class="ident" id="2763826">x</span><span class="op" id="2763827">,</span>&nbsp;<span class="builtintype" id="2763829">true</span><span class="op" id="2763833">)</span><br>
<span class="lineno"></span><span class="op" id="2763835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2763838">//&nbsp;Type&nbsp;returns&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno">1630</span><span class="keyword" id="2763864">func</span>&nbsp;<span class="op" id="2763869">(</span><span class="ident" id="2763870">v</span>&nbsp;<span class="ident" id="2763872">Value</span><span class="op" id="2763877">)</span>&nbsp;<span class="ident" id="2763879">Type</span><span class="op" id="2763883">(</span><span class="op" id="2763884">)</span>&nbsp;<span class="ident" id="2763886">Type</span>&nbsp;<span class="op" id="2763891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763894">f</span>&nbsp;<span class="op" id="2763896">:=</span>&nbsp;<span class="ident" id="2763899">v</span><span class="op" id="2763900">.</span><span class="ident" id="2763901">flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763907">if</span>&nbsp;<span class="ident" id="2763910">f</span>&nbsp;<span class="op" id="2763912">==</span>&nbsp;<span class="num" id="2763915">0</span>&nbsp;<span class="op" id="2763917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2763921">panic</span><span class="op" id="2763926">(</span><span class="op" id="2763927">&amp;</span><span class="ident" id="2763928">ValueError</span><span class="op" id="2763938">{</span><span class="string" id="2763939">&#34;reflect.Value.Type&#34;</span><span class="op" id="2763959">,</span>&nbsp;<span class="ident" id="2763961">Invalid</span><span class="op" id="2763968">}</span><span class="op" id="2763969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763972">}</span><br>
<span class="lineno">1635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763975">if</span>&nbsp;<span class="ident" id="2763978">f</span><span class="op" id="2763979">&amp;</span><span class="ident" id="2763980">flagMethod</span>&nbsp;<span class="op" id="2763991">==</span>&nbsp;<span class="num" id="2763994">0</span>&nbsp;<span class="op" id="2763996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2764000">//&nbsp;Easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764015">return</span>&nbsp;<span class="ident" id="2764022">v</span><span class="op" id="2764023">.</span><span class="ident" id="2764024">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2764029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2764033">//&nbsp;Method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2764051">//&nbsp;v.typ&nbsp;describes&nbsp;the&nbsp;receiver,&nbsp;not&nbsp;the&nbsp;method&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764106">i</span>&nbsp;<span class="op" id="2764108">:=</span>&nbsp;<span class="builtintype" id="2764111">int</span><span class="op" id="2764114">(</span><span class="ident" id="2764115">v</span><span class="op" id="2764116">.</span><span class="ident" id="2764117">flag</span><span class="op" id="2764121">)</span>&nbsp;<span class="op" id="2764123">&gt;&gt;</span>&nbsp;<span class="ident" id="2764126">flagMethodShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764143">if</span>&nbsp;<span class="ident" id="2764146">v</span><span class="op" id="2764147">.</span><span class="ident" id="2764148">typ</span><span class="op" id="2764151">.</span><span class="ident" id="2764152">Kind</span><span class="op" id="2764156">(</span><span class="op" id="2764157">)</span>&nbsp;<span class="op" id="2764159">==</span>&nbsp;<span class="ident" id="2764162">Interface</span>&nbsp;<span class="op" id="2764172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2764176">//&nbsp;Method&nbsp;on&nbsp;interface.</span><br>
<span class="lineno">1645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764202">tt</span>&nbsp;<span class="op" id="2764205">:=</span>&nbsp;<span class="op" id="2764208">(</span><span class="op" id="2764209">*</span><span class="ident" id="2764210">interfaceType</span><span class="op" id="2764223">)</span><span class="op" id="2764224">(</span><span class="ident" id="2764225">unsafe</span><span class="op" id="2764231">.</span><span class="ident" id="2764232">Pointer</span><span class="op" id="2764239">(</span><span class="ident" id="2764240">v</span><span class="op" id="2764241">.</span><span class="ident" id="2764242">typ</span><span class="op" id="2764245">)</span><span class="op" id="2764246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764250">if</span>&nbsp;<span class="builtintype" id="2764253">uint</span><span class="op" id="2764257">(</span><span class="ident" id="2764258">i</span><span class="op" id="2764259">)</span>&nbsp;<span class="op" id="2764261">&gt;=</span>&nbsp;<span class="builtintype" id="2764264">uint</span><span class="op" id="2764268">(</span><span class="builtinfunc" id="2764269">len</span><span class="op" id="2764272">(</span><span class="ident" id="2764273">tt</span><span class="op" id="2764275">.</span><span class="ident" id="2764276">methods</span><span class="op" id="2764283">)</span><span class="op" id="2764284">)</span>&nbsp;<span class="op" id="2764286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2764291">panic</span><span class="op" id="2764296">(</span><span class="string" id="2764297">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2764344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2764348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764352">m</span>&nbsp;<span class="op" id="2764354">:=</span>&nbsp;<span class="op" id="2764357">&amp;</span><span class="ident" id="2764358">tt</span><span class="op" id="2764360">.</span><span class="ident" id="2764361">methods</span><span class="op" id="2764368">[</span><span class="ident" id="2764369">i</span><span class="op" id="2764370">]</span><br>
<span class="lineno">1650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764374">return</span>&nbsp;<span class="ident" id="2764381">m</span><span class="op" id="2764382">.</span><span class="ident" id="2764383">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2764388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2764391">//&nbsp;Method&nbsp;on&nbsp;concrete&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764420">ut</span>&nbsp;<span class="op" id="2764423">:=</span>&nbsp;<span class="ident" id="2764426">v</span><span class="op" id="2764427">.</span><span class="ident" id="2764428">typ</span><span class="op" id="2764431">.</span><span class="ident" id="2764432">uncommon</span><span class="op" id="2764440">(</span><span class="op" id="2764441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764444">if</span>&nbsp;<span class="ident" id="2764447">ut</span>&nbsp;<span class="op" id="2764450">==</span>&nbsp;<span class="ident" id="2764453">nil</span>&nbsp;<span class="op" id="2764457">||</span>&nbsp;<span class="builtintype" id="2764460">uint</span><span class="op" id="2764464">(</span><span class="ident" id="2764465">i</span><span class="op" id="2764466">)</span>&nbsp;<span class="op" id="2764468">&gt;=</span>&nbsp;<span class="builtintype" id="2764471">uint</span><span class="op" id="2764475">(</span><span class="builtinfunc" id="2764476">len</span><span class="op" id="2764479">(</span><span class="ident" id="2764480">ut</span><span class="op" id="2764482">.</span><span class="ident" id="2764483">methods</span><span class="op" id="2764490">)</span><span class="op" id="2764491">)</span>&nbsp;<span class="op" id="2764493">{</span><br>
<span class="lineno">1655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2764497">panic</span><span class="op" id="2764502">(</span><span class="string" id="2764503">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2764550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2764553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764556">m</span>&nbsp;<span class="op" id="2764558">:=</span>&nbsp;<span class="op" id="2764561">&amp;</span><span class="ident" id="2764562">ut</span><span class="op" id="2764564">.</span><span class="ident" id="2764565">methods</span><span class="op" id="2764572">[</span><span class="ident" id="2764573">i</span><span class="op" id="2764574">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764577">return</span>&nbsp;<span class="ident" id="2764584">m</span><span class="op" id="2764585">.</span><span class="ident" id="2764586">mtyp</span><br>
<span class="lineno"></span><span class="op" id="2764591">}</span><br>
<span class="lineno">1660</span><br>
<span class="lineno"></span><span class="comment" id="2764594">//&nbsp;Uint&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;uint64.</span><br>
<span class="lineno"></span><span class="comment" id="2764645">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno"></span><span class="keyword" id="2764726">func</span>&nbsp;<span class="op" id="2764731">(</span><span class="ident" id="2764732">v</span>&nbsp;<span class="ident" id="2764734">Value</span><span class="op" id="2764739">)</span>&nbsp;<span class="ident" id="2764741">Uint</span><span class="op" id="2764745">(</span><span class="op" id="2764746">)</span>&nbsp;<span class="ident" id="2764748">uint64</span>&nbsp;<span class="op" id="2764755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764758">k</span>&nbsp;<span class="op" id="2764760">:=</span>&nbsp;<span class="ident" id="2764763">v</span><span class="op" id="2764764">.</span><span class="ident" id="2764765">kind</span><span class="op" id="2764769">(</span><span class="op" id="2764770">)</span><br>
<span class="lineno">1665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764773">p</span>&nbsp;<span class="op" id="2764775">:=</span>&nbsp;<span class="ident" id="2764778">v</span><span class="op" id="2764779">.</span><span class="ident" id="2764780">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764785">switch</span>&nbsp;<span class="ident" id="2764792">k</span>&nbsp;<span class="op" id="2764794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764797">case</span>&nbsp;<span class="ident" id="2764802">Uint</span><span class="op" id="2764806">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764810">return</span>&nbsp;<span class="ident" id="2764817">uint64</span><span class="op" id="2764823">(</span><span class="op" id="2764824">*</span><span class="op" id="2764825">(</span><span class="op" id="2764826">*</span><span class="builtintype" id="2764827">uint</span><span class="op" id="2764831">)</span><span class="op" id="2764832">(</span><span class="ident" id="2764833">p</span><span class="op" id="2764834">)</span><span class="op" id="2764835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764838">case</span>&nbsp;<span class="ident" id="2764843">Uint8</span><span class="op" id="2764848">:</span><br>
<span class="lineno">1670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764852">return</span>&nbsp;<span class="ident" id="2764859">uint64</span><span class="op" id="2764865">(</span><span class="op" id="2764866">*</span><span class="op" id="2764867">(</span><span class="op" id="2764868">*</span><span class="builtintype" id="2764869">uint8</span><span class="op" id="2764874">)</span><span class="op" id="2764875">(</span><span class="ident" id="2764876">p</span><span class="op" id="2764877">)</span><span class="op" id="2764878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764881">case</span>&nbsp;<span class="ident" id="2764886">Uint16</span><span class="op" id="2764892">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764896">return</span>&nbsp;<span class="ident" id="2764903">uint64</span><span class="op" id="2764909">(</span><span class="op" id="2764910">*</span><span class="op" id="2764911">(</span><span class="op" id="2764912">*</span><span class="builtintype" id="2764913">uint16</span><span class="op" id="2764919">)</span><span class="op" id="2764920">(</span><span class="ident" id="2764921">p</span><span class="op" id="2764922">)</span><span class="op" id="2764923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764926">case</span>&nbsp;<span class="ident" id="2764931">Uint32</span><span class="op" id="2764937">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764941">return</span>&nbsp;<span class="ident" id="2764948">uint64</span><span class="op" id="2764954">(</span><span class="op" id="2764955">*</span><span class="op" id="2764956">(</span><span class="op" id="2764957">*</span><span class="builtintype" id="2764958">uint32</span><span class="op" id="2764964">)</span><span class="op" id="2764965">(</span><span class="ident" id="2764966">p</span><span class="op" id="2764967">)</span><span class="op" id="2764968">)</span><br>
<span class="lineno">1675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764971">case</span>&nbsp;<span class="ident" id="2764976">Uint64</span><span class="op" id="2764982">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764986">return</span>&nbsp;<span class="ident" id="2764993">uint64</span><span class="op" id="2764999">(</span><span class="op" id="2765000">*</span><span class="op" id="2765001">(</span><span class="op" id="2765002">*</span><span class="ident" id="2765003">uint64</span><span class="op" id="2765009">)</span><span class="op" id="2765010">(</span><span class="ident" id="2765011">p</span><span class="op" id="2765012">)</span><span class="op" id="2765013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765016">case</span>&nbsp;<span class="ident" id="2765021">Uintptr</span><span class="op" id="2765028">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765032">return</span>&nbsp;<span class="ident" id="2765039">uint64</span><span class="op" id="2765045">(</span><span class="op" id="2765046">*</span><span class="op" id="2765047">(</span><span class="op" id="2765048">*</span><span class="builtintype" id="2765049">uintptr</span><span class="op" id="2765056">)</span><span class="op" id="2765057">(</span><span class="ident" id="2765058">p</span><span class="op" id="2765059">)</span><span class="op" id="2765060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765063">}</span><br>
<span class="lineno">1680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2765066">panic</span><span class="op" id="2765071">(</span><span class="op" id="2765072">&amp;</span><span class="ident" id="2765073">ValueError</span><span class="op" id="2765083">{</span><span class="string" id="2765084">&#34;reflect.Value.Uint&#34;</span><span class="op" id="2765104">,</span>&nbsp;<span class="ident" id="2765106">v</span><span class="op" id="2765107">.</span><span class="ident" id="2765108">kind</span><span class="op" id="2765112">(</span><span class="op" id="2765113">)</span><span class="op" id="2765114">}</span><span class="op" id="2765115">)</span><br>
<span class="lineno"></span><span class="op" id="2765117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2765120">//&nbsp;UnsafeAddr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;to&nbsp;v&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="2765165">//&nbsp;It&nbsp;is&nbsp;for&nbsp;advanced&nbsp;clients&nbsp;that&nbsp;also&nbsp;import&nbsp;the&nbsp;&#34;unsafe&#34;&nbsp;package.</span><br>
<span class="lineno">1685</span><span class="comment" id="2765234">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2765272">func</span>&nbsp;<span class="op" id="2765277">(</span><span class="ident" id="2765278">v</span>&nbsp;<span class="ident" id="2765280">Value</span><span class="op" id="2765285">)</span>&nbsp;<span class="ident" id="2765287">UnsafeAddr</span><span class="op" id="2765297">(</span><span class="op" id="2765298">)</span>&nbsp;<span class="builtintype" id="2765300">uintptr</span>&nbsp;<span class="op" id="2765308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2765311">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765331">if</span>&nbsp;<span class="ident" id="2765334">v</span><span class="op" id="2765335">.</span><span class="ident" id="2765336">typ</span>&nbsp;<span class="op" id="2765340">==</span>&nbsp;<span class="ident" id="2765343">nil</span>&nbsp;<span class="op" id="2765347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2765351">panic</span><span class="op" id="2765356">(</span><span class="op" id="2765357">&amp;</span><span class="ident" id="2765358">ValueError</span><span class="op" id="2765368">{</span><span class="string" id="2765369">&#34;reflect.Value.UnsafeAddr&#34;</span><span class="op" id="2765395">,</span>&nbsp;<span class="ident" id="2765397">Invalid</span><span class="op" id="2765404">}</span><span class="op" id="2765405">)</span><br>
<span class="lineno">1690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765411">if</span>&nbsp;<span class="ident" id="2765414">v</span><span class="op" id="2765415">.</span><span class="ident" id="2765416">flag</span><span class="op" id="2765420">&amp;</span><span class="ident" id="2765421">flagAddr</span>&nbsp;<span class="op" id="2765430">==</span>&nbsp;<span class="num" id="2765433">0</span>&nbsp;<span class="op" id="2765435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2765439">panic</span><span class="op" id="2765444">(</span><span class="string" id="2765445">&#34;reflect.Value.UnsafeAddr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2765494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765500">return</span>&nbsp;<span class="builtintype" id="2765507">uintptr</span><span class="op" id="2765514">(</span><span class="ident" id="2765515">v</span><span class="op" id="2765516">.</span><span class="ident" id="2765517">ptr</span><span class="op" id="2765520">)</span><br>
<span class="lineno">1695</span><span class="op" id="2765522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2765525">//&nbsp;StringHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2765584">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2765651">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno">1700</span><span class="comment" id="2765681">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2765749">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2765819">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="2765882">type</span>&nbsp;<span class="ident" id="2765887">StringHeader</span>&nbsp;<span class="keyword" id="2765900">struct</span>&nbsp;<span class="op" id="2765907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765910">Data</span>&nbsp;<span class="builtintype" id="2765915">uintptr</span><br>
<span class="lineno">1705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765924">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2765929">int</span><br>
<span class="lineno"></span><span class="op" id="2765933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2765936">//&nbsp;stringHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;StringHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2766012">type</span>&nbsp;<span class="ident" id="2766017">stringHeader</span>&nbsp;<span class="keyword" id="2766030">struct</span>&nbsp;<span class="op" id="2766037">{</span><br>
<span class="lineno">1710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766040">Data</span>&nbsp;<span class="ident" id="2766045">unsafe</span><span class="op" id="2766051">.</span><span class="ident" id="2766052">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766061">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2766066">int</span><br>
<span class="lineno"></span><span class="op" id="2766070">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2766073">//&nbsp;SliceHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;slice.</span><br>
<span class="lineno">1715</span><span class="comment" id="2766130">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2766197">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno"></span><span class="comment" id="2766227">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2766295">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2766365">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno">1720</span><span class="keyword" id="2766428">type</span>&nbsp;<span class="ident" id="2766433">SliceHeader</span>&nbsp;<span class="keyword" id="2766445">struct</span>&nbsp;<span class="op" id="2766452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766455">Data</span>&nbsp;<span class="builtintype" id="2766460">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766469">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2766474">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766479">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2766484">int</span><br>
<span class="lineno"></span><span class="op" id="2766488">}</span><br>
<span class="lineno">1725</span><br>
<span class="lineno"></span><span class="comment" id="2766491">//&nbsp;sliceHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;SliceHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2766565">type</span>&nbsp;<span class="ident" id="2766570">sliceHeader</span>&nbsp;<span class="keyword" id="2766582">struct</span>&nbsp;<span class="op" id="2766589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766592">Data</span>&nbsp;<span class="ident" id="2766597">unsafe</span><span class="op" id="2766603">.</span><span class="ident" id="2766604">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766613">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2766618">int</span><br>
<span class="lineno">1730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766623">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2766628">int</span><br>
<span class="lineno"></span><span class="op" id="2766632">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2766635">func</span>&nbsp;<span class="ident" id="2766640">typesMustMatch</span><span class="op" id="2766654">(</span><span class="ident" id="2766655">what</span>&nbsp;<span class="builtintype" id="2766660">string</span><span class="op" id="2766666">,</span>&nbsp;<span class="ident" id="2766668">t1</span><span class="op" id="2766670">,</span>&nbsp;<span class="ident" id="2766672">t2</span>&nbsp;<span class="ident" id="2766675">Type</span><span class="op" id="2766679">)</span>&nbsp;<span class="op" id="2766681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766684">if</span>&nbsp;<span class="ident" id="2766687">t1</span>&nbsp;<span class="op" id="2766690">!=</span>&nbsp;<span class="ident" id="2766693">t2</span>&nbsp;<span class="op" id="2766696">{</span><br>
<span class="lineno">1735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2766700">panic</span><span class="op" id="2766705">(</span><span class="ident" id="2766706">what</span>&nbsp;<span class="op" id="2766711">+</span>&nbsp;<span class="string" id="2766713">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2766718">+</span>&nbsp;<span class="ident" id="2766720">t1</span><span class="op" id="2766722">.</span><span class="ident" id="2766723">String</span><span class="op" id="2766729">(</span><span class="op" id="2766730">)</span>&nbsp;<span class="op" id="2766732">+</span>&nbsp;<span class="string" id="2766734">&#34;&nbsp;!=&nbsp;&#34;</span>&nbsp;<span class="op" id="2766741">+</span>&nbsp;<span class="ident" id="2766743">t2</span><span class="op" id="2766745">.</span><span class="ident" id="2766746">String</span><span class="op" id="2766752">(</span><span class="op" id="2766753">)</span><span class="op" id="2766754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2766757">}</span><br>
<span class="lineno"></span><span class="op" id="2766759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2766762">//&nbsp;grow&nbsp;grows&nbsp;the&nbsp;slice&nbsp;s&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;hold&nbsp;extra&nbsp;more&nbsp;values,&nbsp;allocating</span><br>
<span class="lineno">1740</span><span class="comment" id="2766838">//&nbsp;more&nbsp;capacity&nbsp;if&nbsp;needed.&nbsp;It&nbsp;also&nbsp;returns&nbsp;the&nbsp;old&nbsp;and&nbsp;new&nbsp;slice&nbsp;lengths.</span><br>
<span class="lineno"></span><span class="keyword" id="2766913">func</span>&nbsp;<span class="ident" id="2766918">grow</span><span class="op" id="2766922">(</span><span class="ident" id="2766923">s</span>&nbsp;<span class="ident" id="2766925">Value</span><span class="op" id="2766930">,</span>&nbsp;<span class="ident" id="2766932">extra</span>&nbsp;<span class="builtintype" id="2766938">int</span><span class="op" id="2766941">)</span>&nbsp;<span class="op" id="2766943">(</span><span class="ident" id="2766944">Value</span><span class="op" id="2766949">,</span>&nbsp;<span class="builtintype" id="2766951">int</span><span class="op" id="2766954">,</span>&nbsp;<span class="builtintype" id="2766956">int</span><span class="op" id="2766959">)</span>&nbsp;<span class="op" id="2766961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766964">i0</span>&nbsp;<span class="op" id="2766967">:=</span>&nbsp;<span class="ident" id="2766970">s</span><span class="op" id="2766971">.</span><span class="ident" id="2766972">Len</span><span class="op" id="2766975">(</span><span class="op" id="2766976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766979">i1</span>&nbsp;<span class="op" id="2766982">:=</span>&nbsp;<span class="ident" id="2766985">i0</span>&nbsp;<span class="op" id="2766988">+</span>&nbsp;<span class="ident" id="2766990">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766997">if</span>&nbsp;<span class="ident" id="2767000">i1</span>&nbsp;<span class="op" id="2767003">&lt;</span>&nbsp;<span class="ident" id="2767005">i0</span>&nbsp;<span class="op" id="2767008">{</span><br>
<span class="lineno">1745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2767012">panic</span><span class="op" id="2767017">(</span><span class="string" id="2767018">&#34;reflect.Append:&nbsp;slice&nbsp;overflow&#34;</span><span class="op" id="2767050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767056">m</span>&nbsp;<span class="op" id="2767058">:=</span>&nbsp;<span class="ident" id="2767061">s</span><span class="op" id="2767062">.</span><span class="ident" id="2767063">Cap</span><span class="op" id="2767066">(</span><span class="op" id="2767067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767070">if</span>&nbsp;<span class="ident" id="2767073">i1</span>&nbsp;<span class="op" id="2767076">&lt;=</span>&nbsp;<span class="ident" id="2767079">m</span>&nbsp;<span class="op" id="2767081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767085">return</span>&nbsp;<span class="ident" id="2767092">s</span><span class="op" id="2767093">.</span><span class="ident" id="2767094">Slice</span><span class="op" id="2767099">(</span><span class="num" id="2767100">0</span><span class="op" id="2767101">,</span>&nbsp;<span class="ident" id="2767103">i1</span><span class="op" id="2767105">)</span><span class="op" id="2767106">,</span>&nbsp;<span class="ident" id="2767108">i0</span><span class="op" id="2767110">,</span>&nbsp;<span class="ident" id="2767112">i1</span><br>
<span class="lineno">1750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767119">if</span>&nbsp;<span class="ident" id="2767122">m</span>&nbsp;<span class="op" id="2767124">==</span>&nbsp;<span class="num" id="2767127">0</span>&nbsp;<span class="op" id="2767129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767133">m</span>&nbsp;<span class="op" id="2767135">=</span>&nbsp;<span class="ident" id="2767137">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767144">}</span>&nbsp;<span class="keyword" id="2767146">else</span>&nbsp;<span class="op" id="2767151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767155">for</span>&nbsp;<span class="ident" id="2767159">m</span>&nbsp;<span class="op" id="2767161">&lt;</span>&nbsp;<span class="ident" id="2767163">i1</span>&nbsp;<span class="op" id="2767166">{</span><br>
<span class="lineno">1755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767171">if</span>&nbsp;<span class="ident" id="2767174">i0</span>&nbsp;<span class="op" id="2767177">&lt;</span>&nbsp;<span class="num" id="2767179">1024</span>&nbsp;<span class="op" id="2767184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767190">m</span>&nbsp;<span class="op" id="2767192">+=</span>&nbsp;<span class="ident" id="2767195">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767200">}</span>&nbsp;<span class="keyword" id="2767202">else</span>&nbsp;<span class="op" id="2767207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767213">m</span>&nbsp;<span class="op" id="2767215">+=</span>&nbsp;<span class="ident" id="2767218">m</span>&nbsp;<span class="op" id="2767220">/</span>&nbsp;<span class="num" id="2767222">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767227">}</span><br>
<span class="lineno">1760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767237">t</span>&nbsp;<span class="op" id="2767239">:=</span>&nbsp;<span class="ident" id="2767242">MakeSlice</span><span class="op" id="2767251">(</span><span class="ident" id="2767252">s</span><span class="op" id="2767253">.</span><span class="ident" id="2767254">Type</span><span class="op" id="2767258">(</span><span class="op" id="2767259">)</span><span class="op" id="2767260">,</span>&nbsp;<span class="ident" id="2767262">i1</span><span class="op" id="2767264">,</span>&nbsp;<span class="ident" id="2767266">m</span><span class="op" id="2767267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767270">Copy</span><span class="op" id="2767274">(</span><span class="ident" id="2767275">t</span><span class="op" id="2767276">,</span>&nbsp;<span class="ident" id="2767278">s</span><span class="op" id="2767279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767282">return</span>&nbsp;<span class="ident" id="2767289">t</span><span class="op" id="2767290">,</span>&nbsp;<span class="ident" id="2767292">i0</span><span class="op" id="2767294">,</span>&nbsp;<span class="ident" id="2767296">i1</span><br>
<span class="lineno">1765</span><span class="op" id="2767299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2767302">//&nbsp;Append&nbsp;appends&nbsp;the&nbsp;values&nbsp;x&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2767379">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;slice&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2767455">func</span>&nbsp;<span class="ident" id="2767460">Append</span><span class="op" id="2767466">(</span><span class="ident" id="2767467">s</span>&nbsp;<span class="ident" id="2767469">Value</span><span class="op" id="2767474">,</span>&nbsp;<span class="ident" id="2767476">x</span>&nbsp;<span class="op" id="2767478">...</span><span class="ident" id="2767481">Value</span><span class="op" id="2767486">)</span>&nbsp;<span class="ident" id="2767488">Value</span>&nbsp;<span class="op" id="2767494">{</span><br>
<span class="lineno">1770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767497">s</span><span class="op" id="2767498">.</span><span class="ident" id="2767499">mustBe</span><span class="op" id="2767505">(</span><span class="ident" id="2767506">Slice</span><span class="op" id="2767511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767514">s</span><span class="op" id="2767515">,</span>&nbsp;<span class="ident" id="2767517">i0</span><span class="op" id="2767519">,</span>&nbsp;<span class="ident" id="2767521">i1</span>&nbsp;<span class="op" id="2767524">:=</span>&nbsp;<span class="ident" id="2767527">grow</span><span class="op" id="2767531">(</span><span class="ident" id="2767532">s</span><span class="op" id="2767533">,</span>&nbsp;<span class="builtinfunc" id="2767535">len</span><span class="op" id="2767538">(</span><span class="ident" id="2767539">x</span><span class="op" id="2767540">)</span><span class="op" id="2767541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767544">for</span>&nbsp;<span class="ident" id="2767548">i</span><span class="op" id="2767549">,</span>&nbsp;<span class="ident" id="2767551">j</span>&nbsp;<span class="op" id="2767553">:=</span>&nbsp;<span class="ident" id="2767556">i0</span><span class="op" id="2767558">,</span>&nbsp;<span class="num" id="2767560">0</span><span class="op" id="2767561">;</span>&nbsp;<span class="ident" id="2767563">i</span>&nbsp;<span class="op" id="2767565">&lt;</span>&nbsp;<span class="ident" id="2767567">i1</span><span class="op" id="2767569">;</span>&nbsp;<span class="ident" id="2767571">i</span><span class="op" id="2767572">,</span>&nbsp;<span class="ident" id="2767574">j</span>&nbsp;<span class="op" id="2767576">=</span>&nbsp;<span class="ident" id="2767578">i</span><span class="op" id="2767579">+</span><span class="num" id="2767580">1</span><span class="op" id="2767581">,</span>&nbsp;<span class="ident" id="2767583">j</span><span class="op" id="2767584">+</span><span class="num" id="2767585">1</span>&nbsp;<span class="op" id="2767587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767591">s</span><span class="op" id="2767592">.</span><span class="ident" id="2767593">Index</span><span class="op" id="2767598">(</span><span class="ident" id="2767599">i</span><span class="op" id="2767600">)</span><span class="op" id="2767601">.</span><span class="ident" id="2767602">Set</span><span class="op" id="2767605">(</span><span class="ident" id="2767606">x</span><span class="op" id="2767607">[</span><span class="ident" id="2767608">j</span><span class="op" id="2767609">]</span><span class="op" id="2767610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767613">}</span><br>
<span class="lineno">1775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767616">return</span>&nbsp;<span class="ident" id="2767623">s</span><br>
<span class="lineno"></span><span class="op" id="2767625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2767628">//&nbsp;AppendSlice&nbsp;appends&nbsp;a&nbsp;slice&nbsp;t&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2767707">//&nbsp;The&nbsp;slices&nbsp;s&nbsp;and&nbsp;t&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno">1780</span><span class="keyword" id="2767762">func</span>&nbsp;<span class="ident" id="2767767">AppendSlice</span><span class="op" id="2767778">(</span><span class="ident" id="2767779">s</span><span class="op" id="2767780">,</span>&nbsp;<span class="ident" id="2767782">t</span>&nbsp;<span class="ident" id="2767784">Value</span><span class="op" id="2767789">)</span>&nbsp;<span class="ident" id="2767791">Value</span>&nbsp;<span class="op" id="2767797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767800">s</span><span class="op" id="2767801">.</span><span class="ident" id="2767802">mustBe</span><span class="op" id="2767808">(</span><span class="ident" id="2767809">Slice</span><span class="op" id="2767814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767817">t</span><span class="op" id="2767818">.</span><span class="ident" id="2767819">mustBe</span><span class="op" id="2767825">(</span><span class="ident" id="2767826">Slice</span><span class="op" id="2767831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767834">typesMustMatch</span><span class="op" id="2767848">(</span><span class="string" id="2767849">&#34;reflect.AppendSlice&#34;</span><span class="op" id="2767870">,</span>&nbsp;<span class="ident" id="2767872">s</span><span class="op" id="2767873">.</span><span class="ident" id="2767874">Type</span><span class="op" id="2767878">(</span><span class="op" id="2767879">)</span><span class="op" id="2767880">.</span><span class="ident" id="2767881">Elem</span><span class="op" id="2767885">(</span><span class="op" id="2767886">)</span><span class="op" id="2767887">,</span>&nbsp;<span class="ident" id="2767889">t</span><span class="op" id="2767890">.</span><span class="ident" id="2767891">Type</span><span class="op" id="2767895">(</span><span class="op" id="2767896">)</span><span class="op" id="2767897">.</span><span class="ident" id="2767898">Elem</span><span class="op" id="2767902">(</span><span class="op" id="2767903">)</span><span class="op" id="2767904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767907">s</span><span class="op" id="2767908">,</span>&nbsp;<span class="ident" id="2767910">i0</span><span class="op" id="2767912">,</span>&nbsp;<span class="ident" id="2767914">i1</span>&nbsp;<span class="op" id="2767917">:=</span>&nbsp;<span class="ident" id="2767920">grow</span><span class="op" id="2767924">(</span><span class="ident" id="2767925">s</span><span class="op" id="2767926">,</span>&nbsp;<span class="ident" id="2767928">t</span><span class="op" id="2767929">.</span><span class="ident" id="2767930">Len</span><span class="op" id="2767933">(</span><span class="op" id="2767934">)</span><span class="op" id="2767935">)</span><br>
<span class="lineno">1785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767938">Copy</span><span class="op" id="2767942">(</span><span class="ident" id="2767943">s</span><span class="op" id="2767944">.</span><span class="ident" id="2767945">Slice</span><span class="op" id="2767950">(</span><span class="ident" id="2767951">i0</span><span class="op" id="2767953">,</span>&nbsp;<span class="ident" id="2767955">i1</span><span class="op" id="2767957">)</span><span class="op" id="2767958">,</span>&nbsp;<span class="ident" id="2767960">t</span><span class="op" id="2767961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767964">return</span>&nbsp;<span class="ident" id="2767971">s</span><br>
<span class="lineno"></span><span class="op" id="2767973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2767976">//&nbsp;Copy&nbsp;copies&nbsp;the&nbsp;contents&nbsp;of&nbsp;src&nbsp;into&nbsp;dst&nbsp;until&nbsp;either</span><br>
<span class="lineno">1790</span><span class="comment" id="2768033">//&nbsp;dst&nbsp;has&nbsp;been&nbsp;filled&nbsp;or&nbsp;src&nbsp;has&nbsp;been&nbsp;exhausted.</span><br>
<span class="lineno"></span><span class="comment" id="2768083">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;copied.</span><br>
<span class="lineno"></span><span class="comment" id="2768128">//&nbsp;Dst&nbsp;and&nbsp;src&nbsp;each&nbsp;must&nbsp;have&nbsp;kind&nbsp;Slice&nbsp;or&nbsp;Array,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2768183">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2768231">func</span>&nbsp;<span class="ident" id="2768236">Copy</span><span class="op" id="2768240">(</span><span class="ident" id="2768241">dst</span><span class="op" id="2768244">,</span>&nbsp;<span class="ident" id="2768246">src</span>&nbsp;<span class="ident" id="2768250">Value</span><span class="op" id="2768255">)</span>&nbsp;<span class="builtintype" id="2768257">int</span>&nbsp;<span class="op" id="2768261">{</span><br>
<span class="lineno">1795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768264">dk</span>&nbsp;<span class="op" id="2768267">:=</span>&nbsp;<span class="ident" id="2768270">dst</span><span class="op" id="2768273">.</span><span class="ident" id="2768274">kind</span><span class="op" id="2768278">(</span><span class="op" id="2768279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768282">if</span>&nbsp;<span class="ident" id="2768285">dk</span>&nbsp;<span class="op" id="2768288">!=</span>&nbsp;<span class="ident" id="2768291">Array</span>&nbsp;<span class="op" id="2768297">&amp;&amp;</span>&nbsp;<span class="ident" id="2768300">dk</span>&nbsp;<span class="op" id="2768303">!=</span>&nbsp;<span class="ident" id="2768306">Slice</span>&nbsp;<span class="op" id="2768312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2768316">panic</span><span class="op" id="2768321">(</span><span class="op" id="2768322">&amp;</span><span class="ident" id="2768323">ValueError</span><span class="op" id="2768333">{</span><span class="string" id="2768334">&#34;reflect.Copy&#34;</span><span class="op" id="2768348">,</span>&nbsp;<span class="ident" id="2768350">dk</span><span class="op" id="2768352">}</span><span class="op" id="2768353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768359">if</span>&nbsp;<span class="ident" id="2768362">dk</span>&nbsp;<span class="op" id="2768365">==</span>&nbsp;<span class="ident" id="2768368">Array</span>&nbsp;<span class="op" id="2768374">{</span><br>
<span class="lineno">1800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768378">dst</span><span class="op" id="2768381">.</span><span class="ident" id="2768382">mustBeAssignable</span><span class="op" id="2768398">(</span><span class="op" id="2768399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768405">dst</span><span class="op" id="2768408">.</span><span class="ident" id="2768409">mustBeExported</span><span class="op" id="2768423">(</span><span class="op" id="2768424">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768428">sk</span>&nbsp;<span class="op" id="2768431">:=</span>&nbsp;<span class="ident" id="2768434">src</span><span class="op" id="2768437">.</span><span class="ident" id="2768438">kind</span><span class="op" id="2768442">(</span><span class="op" id="2768443">)</span><br>
<span class="lineno">1805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768446">if</span>&nbsp;<span class="ident" id="2768449">sk</span>&nbsp;<span class="op" id="2768452">!=</span>&nbsp;<span class="ident" id="2768455">Array</span>&nbsp;<span class="op" id="2768461">&amp;&amp;</span>&nbsp;<span class="ident" id="2768464">sk</span>&nbsp;<span class="op" id="2768467">!=</span>&nbsp;<span class="ident" id="2768470">Slice</span>&nbsp;<span class="op" id="2768476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2768480">panic</span><span class="op" id="2768485">(</span><span class="op" id="2768486">&amp;</span><span class="ident" id="2768487">ValueError</span><span class="op" id="2768497">{</span><span class="string" id="2768498">&#34;reflect.Copy&#34;</span><span class="op" id="2768512">,</span>&nbsp;<span class="ident" id="2768514">sk</span><span class="op" id="2768516">}</span><span class="op" id="2768517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768523">src</span><span class="op" id="2768526">.</span><span class="ident" id="2768527">mustBeExported</span><span class="op" id="2768541">(</span><span class="op" id="2768542">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768546">de</span>&nbsp;<span class="op" id="2768549">:=</span>&nbsp;<span class="ident" id="2768552">dst</span><span class="op" id="2768555">.</span><span class="ident" id="2768556">typ</span><span class="op" id="2768559">.</span><span class="ident" id="2768560">Elem</span><span class="op" id="2768564">(</span><span class="op" id="2768565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768568">se</span>&nbsp;<span class="op" id="2768571">:=</span>&nbsp;<span class="ident" id="2768574">src</span><span class="op" id="2768577">.</span><span class="ident" id="2768578">typ</span><span class="op" id="2768581">.</span><span class="ident" id="2768582">Elem</span><span class="op" id="2768586">(</span><span class="op" id="2768587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768590">typesMustMatch</span><span class="op" id="2768604">(</span><span class="string" id="2768605">&#34;reflect.Copy&#34;</span><span class="op" id="2768619">,</span>&nbsp;<span class="ident" id="2768621">de</span><span class="op" id="2768623">,</span>&nbsp;<span class="ident" id="2768625">se</span><span class="op" id="2768627">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768631">n</span>&nbsp;<span class="op" id="2768633">:=</span>&nbsp;<span class="ident" id="2768636">dst</span><span class="op" id="2768639">.</span><span class="ident" id="2768640">Len</span><span class="op" id="2768643">(</span><span class="op" id="2768644">)</span><br>
<span class="lineno">1815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768647">if</span>&nbsp;<span class="ident" id="2768650">sn</span>&nbsp;<span class="op" id="2768653">:=</span>&nbsp;<span class="ident" id="2768656">src</span><span class="op" id="2768659">.</span><span class="ident" id="2768660">Len</span><span class="op" id="2768663">(</span><span class="op" id="2768664">)</span><span class="op" id="2768665">;</span>&nbsp;<span class="ident" id="2768667">n</span>&nbsp;<span class="op" id="2768669">&gt;</span>&nbsp;<span class="ident" id="2768671">sn</span>&nbsp;<span class="op" id="2768674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768678">n</span>&nbsp;<span class="op" id="2768680">=</span>&nbsp;<span class="ident" id="2768682">sn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2768690">//&nbsp;Copy&nbsp;via&nbsp;memmove.</span><br>
<span class="lineno">1820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768712">var</span>&nbsp;<span class="ident" id="2768716">da</span><span class="op" id="2768718">,</span>&nbsp;<span class="ident" id="2768720">sa</span>&nbsp;<span class="ident" id="2768723">unsafe</span><span class="op" id="2768729">.</span><span class="ident" id="2768730">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768739">if</span>&nbsp;<span class="ident" id="2768742">dk</span>&nbsp;<span class="op" id="2768745">==</span>&nbsp;<span class="ident" id="2768748">Array</span>&nbsp;<span class="op" id="2768754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768758">da</span>&nbsp;<span class="op" id="2768761">=</span>&nbsp;<span class="ident" id="2768763">dst</span><span class="op" id="2768766">.</span><span class="ident" id="2768767">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768772">}</span>&nbsp;<span class="keyword" id="2768774">else</span>&nbsp;<span class="op" id="2768779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768783">da</span>&nbsp;<span class="op" id="2768786">=</span>&nbsp;<span class="op" id="2768788">(</span><span class="op" id="2768789">*</span><span class="ident" id="2768790">sliceHeader</span><span class="op" id="2768801">)</span><span class="op" id="2768802">(</span><span class="ident" id="2768803">dst</span><span class="op" id="2768806">.</span><span class="ident" id="2768807">ptr</span><span class="op" id="2768810">)</span><span class="op" id="2768811">.</span><span class="ident" id="2768812">Data</span><br>
<span class="lineno">1825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768821">if</span>&nbsp;<span class="ident" id="2768824">src</span><span class="op" id="2768827">.</span><span class="ident" id="2768828">flag</span><span class="op" id="2768832">&amp;</span><span class="ident" id="2768833">flagIndir</span>&nbsp;<span class="op" id="2768843">==</span>&nbsp;<span class="num" id="2768846">0</span>&nbsp;<span class="op" id="2768848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768852">sa</span>&nbsp;<span class="op" id="2768855">=</span>&nbsp;<span class="ident" id="2768857">unsafe</span><span class="op" id="2768863">.</span><span class="ident" id="2768864">Pointer</span><span class="op" id="2768871">(</span><span class="op" id="2768872">&amp;</span><span class="ident" id="2768873">src</span><span class="op" id="2768876">.</span><span class="ident" id="2768877">ptr</span><span class="op" id="2768880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768883">}</span>&nbsp;<span class="keyword" id="2768885">else</span>&nbsp;<span class="keyword" id="2768890">if</span>&nbsp;<span class="ident" id="2768893">sk</span>&nbsp;<span class="op" id="2768896">==</span>&nbsp;<span class="ident" id="2768899">Array</span>&nbsp;<span class="op" id="2768905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768909">sa</span>&nbsp;<span class="op" id="2768912">=</span>&nbsp;<span class="ident" id="2768914">src</span><span class="op" id="2768917">.</span><span class="ident" id="2768918">ptr</span><br>
<span class="lineno">1830</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768923">}</span>&nbsp;<span class="keyword" id="2768925">else</span>&nbsp;<span class="op" id="2768930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768934">sa</span>&nbsp;<span class="op" id="2768937">=</span>&nbsp;<span class="op" id="2768939">(</span><span class="op" id="2768940">*</span><span class="ident" id="2768941">sliceHeader</span><span class="op" id="2768952">)</span><span class="op" id="2768953">(</span><span class="ident" id="2768954">src</span><span class="op" id="2768957">.</span><span class="ident" id="2768958">ptr</span><span class="op" id="2768961">)</span><span class="op" id="2768962">.</span><span class="ident" id="2768963">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768972">memmove</span><span class="op" id="2768979">(</span><span class="ident" id="2768980">da</span><span class="op" id="2768982">,</span>&nbsp;<span class="ident" id="2768984">sa</span><span class="op" id="2768986">,</span>&nbsp;<span class="builtintype" id="2768988">uintptr</span><span class="op" id="2768995">(</span><span class="ident" id="2768996">n</span><span class="op" id="2768997">)</span><span class="op" id="2768998">*</span><span class="ident" id="2768999">de</span><span class="op" id="2769001">.</span><span class="ident" id="2769002">Size</span><span class="op" id="2769006">(</span><span class="op" id="2769007">)</span><span class="op" id="2769008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769011">return</span>&nbsp;<span class="ident" id="2769018">n</span><br>
<span class="lineno">1835</span><span class="op" id="2769020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2769023">//&nbsp;A&nbsp;runtimeSelect&nbsp;is&nbsp;a&nbsp;single&nbsp;case&nbsp;passed&nbsp;to&nbsp;rselect.</span><br>
<span class="lineno"></span><span class="comment" id="2769078">//&nbsp;This&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/runtimeSelect</span><br>
<span class="lineno"></span><span class="keyword" id="2769133">type</span>&nbsp;<span class="ident" id="2769138">runtimeSelect</span>&nbsp;<span class="keyword" id="2769152">struct</span>&nbsp;<span class="op" id="2769159">{</span><br>
<span class="lineno">1840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769162">dir</span>&nbsp;<span class="builtintype" id="2769166">uintptr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2769181">//&nbsp;0,&nbsp;SendDir,&nbsp;or&nbsp;RecvDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769208">typ</span>&nbsp;<span class="op" id="2769212">*</span><span class="ident" id="2769213">rtype</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2769227">//&nbsp;channel&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769244">ch</span>&nbsp;&nbsp;<span class="ident" id="2769248">unsafe</span><span class="op" id="2769254">.</span><span class="ident" id="2769255">Pointer</span>&nbsp;<span class="comment" id="2769263">//&nbsp;channel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769275">val</span>&nbsp;<span class="ident" id="2769279">unsafe</span><span class="op" id="2769285">.</span><span class="ident" id="2769286">Pointer</span>&nbsp;<span class="comment" id="2769294">//&nbsp;ptr&nbsp;to&nbsp;data&nbsp;(SendDir)&nbsp;or&nbsp;ptr&nbsp;to&nbsp;receive&nbsp;buffer&nbsp;(RecvDir)</span><br>
<span class="lineno"></span><span class="op" id="2769354">}</span><br>
<span class="lineno">1845</span><br>
<span class="lineno"></span><span class="comment" id="2769357">//&nbsp;rselect&nbsp;runs&nbsp;a&nbsp;select.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2769425">//&nbsp;If&nbsp;the&nbsp;case&nbsp;was&nbsp;a&nbsp;receive,&nbsp;val&nbsp;is&nbsp;filled&nbsp;in&nbsp;with&nbsp;the&nbsp;received&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2769497">//&nbsp;The&nbsp;conventional&nbsp;OK&nbsp;bool&nbsp;indicates&nbsp;whether&nbsp;the&nbsp;receive&nbsp;corresponds</span><br>
<span class="lineno"></span><span class="comment" id="2769567">//&nbsp;to&nbsp;a&nbsp;sent&nbsp;value.</span><br>
<span class="lineno">1850</span><span class="comment" id="2769587">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2769601">func</span>&nbsp;<span class="ident" id="2769606">rselect</span><span class="op" id="2769613">(</span><span class="op" id="2769614">[</span><span class="op" id="2769615">]</span><span class="ident" id="2769616">runtimeSelect</span><span class="op" id="2769629">)</span>&nbsp;<span class="op" id="2769631">(</span><span class="ident" id="2769632">chosen</span>&nbsp;<span class="builtintype" id="2769639">int</span><span class="op" id="2769642">,</span>&nbsp;<span class="ident" id="2769644">recvOK</span>&nbsp;<span class="builtintype" id="2769651">bool</span><span class="op" id="2769655">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2769658">//&nbsp;A&nbsp;SelectDir&nbsp;describes&nbsp;the&nbsp;communication&nbsp;direction&nbsp;of&nbsp;a&nbsp;select&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2769729">type</span>&nbsp;<span class="ident" id="2769734">SelectDir</span>&nbsp;<span class="builtintype" id="2769744">int</span><br>
<span class="lineno">1855</span><br>
<span class="lineno"></span><span class="comment" id="2769749">//&nbsp;NOTE:&nbsp;These&nbsp;values&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/selectDir.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2769816">const</span>&nbsp;<span class="op" id="2769822">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769825">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2769839">SelectDir</span>&nbsp;<span class="op" id="2769849">=</span>&nbsp;<span class="ident" id="2769851">iota</span><br>
<span class="lineno">1860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769857">SelectSend</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2769881">//&nbsp;case&nbsp;Chan&nbsp;&lt;-&nbsp;Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769903">SelectRecv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2769927">//&nbsp;case&nbsp;&lt;-Chan:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769944">SelectDefault</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2769968">//&nbsp;default</span><br>
<span class="lineno"></span><span class="op" id="2769979">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1865</span><span class="comment" id="2769982">//&nbsp;A&nbsp;SelectCase&nbsp;describes&nbsp;a&nbsp;single&nbsp;case&nbsp;in&nbsp;a&nbsp;select&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2770045">//&nbsp;The&nbsp;kind&nbsp;of&nbsp;case&nbsp;depends&nbsp;on&nbsp;Dir,&nbsp;the&nbsp;communication&nbsp;direction.</span><br>
<span class="lineno"></span><span class="comment" id="2770110">//</span><br>
<span class="lineno"></span><span class="comment" id="2770113">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectDefault,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;default&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2770177">//&nbsp;Chan&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;zero&nbsp;Values.</span><br>
<span class="lineno">1870</span><span class="comment" id="2770215">//</span><br>
<span class="lineno"></span><span class="comment" id="2770218">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectSend,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;send&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2770281">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel,&nbsp;and&nbsp;Send&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2770372">//&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;if&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,</span><br>
<span class="lineno"></span><span class="comment" id="2770461">//&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;and&nbsp;the&nbsp;field&nbsp;Send&nbsp;will&nbsp;also&nbsp;be&nbsp;ignored&nbsp;and&nbsp;may&nbsp;be&nbsp;either&nbsp;zero</span><br>
<span class="lineno">1875</span><span class="comment" id="2770553">//&nbsp;or&nbsp;non-zero.</span><br>
<span class="lineno"></span><span class="comment" id="2770569">//</span><br>
<span class="lineno"></span><span class="comment" id="2770572">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectRecv,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;receive&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2770638">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2770723">//&nbsp;If&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;but&nbsp;Send&nbsp;must&nbsp;still&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno">1880</span><span class="comment" id="2770814">//&nbsp;When&nbsp;a&nbsp;receive&nbsp;operation&nbsp;is&nbsp;selected,&nbsp;the&nbsp;received&nbsp;Value&nbsp;is&nbsp;returned&nbsp;by&nbsp;Select.</span><br>
<span class="lineno"></span><span class="comment" id="2770897">//</span><br>
<span class="lineno"></span><span class="keyword" id="2770900">type</span>&nbsp;<span class="ident" id="2770905">SelectCase</span>&nbsp;<span class="keyword" id="2770916">struct</span>&nbsp;<span class="op" id="2770923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770926">Dir</span>&nbsp;&nbsp;<span class="ident" id="2770931">SelectDir</span>&nbsp;<span class="comment" id="2770941">//&nbsp;direction&nbsp;of&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770963">Chan</span>&nbsp;<span class="ident" id="2770968">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2770978">//&nbsp;channel&nbsp;to&nbsp;use&nbsp;(for&nbsp;send&nbsp;or&nbsp;receive)</span><br>
<span class="lineno">1885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771019">Send</span>&nbsp;<span class="ident" id="2771024">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2771034">//&nbsp;value&nbsp;to&nbsp;send&nbsp;(for&nbsp;send)</span><br>
<span class="lineno"></span><span class="op" id="2771062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2771065">//&nbsp;Select&nbsp;executes&nbsp;a&nbsp;select&nbsp;operation&nbsp;described&nbsp;by&nbsp;the&nbsp;list&nbsp;of&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2771135">//&nbsp;Like&nbsp;the&nbsp;Go&nbsp;select&nbsp;statement,&nbsp;it&nbsp;blocks&nbsp;until&nbsp;at&nbsp;least&nbsp;one&nbsp;of&nbsp;the&nbsp;cases</span><br>
<span class="lineno">1890</span><span class="comment" id="2771210">//&nbsp;can&nbsp;proceed,&nbsp;makes&nbsp;a&nbsp;uniform&nbsp;pseudo-random&nbsp;choice,</span><br>
<span class="lineno"></span><span class="comment" id="2771264">//&nbsp;and&nbsp;then&nbsp;executes&nbsp;that&nbsp;case.&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case</span><br>
<span class="lineno"></span><span class="comment" id="2771336">//&nbsp;and,&nbsp;if&nbsp;that&nbsp;case&nbsp;was&nbsp;a&nbsp;receive&nbsp;operation,&nbsp;the&nbsp;value&nbsp;received&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2771407">//&nbsp;boolean&nbsp;indicating&nbsp;whether&nbsp;the&nbsp;value&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send&nbsp;on&nbsp;the&nbsp;channel</span><br>
<span class="lineno"></span><span class="comment" id="2771484">//&nbsp;(as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed).</span><br>
<span class="lineno">1895</span><span class="keyword" id="2771556">func</span>&nbsp;<span class="ident" id="2771561">Select</span><span class="op" id="2771567">(</span><span class="ident" id="2771568">cases</span>&nbsp;<span class="op" id="2771574">[</span><span class="op" id="2771575">]</span><span class="ident" id="2771576">SelectCase</span><span class="op" id="2771586">)</span>&nbsp;<span class="op" id="2771588">(</span><span class="ident" id="2771589">chosen</span>&nbsp;<span class="builtintype" id="2771596">int</span><span class="op" id="2771599">,</span>&nbsp;<span class="ident" id="2771601">recv</span>&nbsp;<span class="ident" id="2771606">Value</span><span class="op" id="2771611">,</span>&nbsp;<span class="ident" id="2771613">recvOK</span>&nbsp;<span class="builtintype" id="2771620">bool</span><span class="op" id="2771624">)</span>&nbsp;<span class="op" id="2771626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2771629">//&nbsp;NOTE:&nbsp;Do&nbsp;not&nbsp;trust&nbsp;that&nbsp;caller&nbsp;is&nbsp;not&nbsp;modifying&nbsp;cases&nbsp;data&nbsp;underfoot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2771703">//&nbsp;The&nbsp;range&nbsp;is&nbsp;safe&nbsp;because&nbsp;the&nbsp;caller&nbsp;cannot&nbsp;modify&nbsp;our&nbsp;copy&nbsp;of&nbsp;the&nbsp;len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2771778">//&nbsp;and&nbsp;each&nbsp;iteration&nbsp;makes&nbsp;its&nbsp;own&nbsp;copy&nbsp;of&nbsp;the&nbsp;value&nbsp;c.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771836">runcases</span>&nbsp;<span class="op" id="2771845">:=</span>&nbsp;<span class="builtinfunc" id="2771848">make</span><span class="op" id="2771852">(</span><span class="op" id="2771853">[</span><span class="op" id="2771854">]</span><span class="ident" id="2771855">runtimeSelect</span><span class="op" id="2771868">,</span>&nbsp;<span class="builtinfunc" id="2771870">len</span><span class="op" id="2771873">(</span><span class="ident" id="2771874">cases</span><span class="op" id="2771879">)</span><span class="op" id="2771880">)</span><br>
<span class="lineno">1900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771883">haveDefault</span>&nbsp;<span class="op" id="2771895">:=</span>&nbsp;<span class="builtintype" id="2771898">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771905">for</span>&nbsp;<span class="ident" id="2771909">i</span><span class="op" id="2771910">,</span>&nbsp;<span class="ident" id="2771912">c</span>&nbsp;<span class="op" id="2771914">:=</span>&nbsp;<span class="keyword" id="2771917">range</span>&nbsp;<span class="ident" id="2771923">cases</span>&nbsp;<span class="op" id="2771929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771933">rc</span>&nbsp;<span class="op" id="2771936">:=</span>&nbsp;<span class="op" id="2771939">&amp;</span><span class="ident" id="2771940">runcases</span><span class="op" id="2771948">[</span><span class="ident" id="2771949">i</span><span class="op" id="2771950">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771954">rc</span><span class="op" id="2771956">.</span><span class="ident" id="2771957">dir</span>&nbsp;<span class="op" id="2771961">=</span>&nbsp;<span class="builtintype" id="2771963">uintptr</span><span class="op" id="2771970">(</span><span class="ident" id="2771971">c</span><span class="op" id="2771972">.</span><span class="ident" id="2771973">Dir</span><span class="op" id="2771976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771980">switch</span>&nbsp;<span class="ident" id="2771987">c</span><span class="op" id="2771988">.</span><span class="ident" id="2771989">Dir</span>&nbsp;<span class="op" id="2771993">{</span><br>
<span class="lineno">1905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771997">default</span><span class="op" id="2772004">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2772009">panic</span><span class="op" id="2772014">(</span><span class="string" id="2772015">&#34;reflect.Select:&nbsp;invalid&nbsp;Dir&#34;</span><span class="op" id="2772044">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772049">case</span>&nbsp;<span class="ident" id="2772054">SelectDefault</span><span class="op" id="2772067">:</span>&nbsp;<span class="comment" id="2772069">//&nbsp;default</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772083">if</span>&nbsp;<span class="ident" id="2772086">haveDefault</span>&nbsp;<span class="op" id="2772098">{</span><br>
<span class="lineno">1910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2772104">panic</span><span class="op" id="2772109">(</span><span class="string" id="2772110">&#34;reflect.Select:&nbsp;multiple&nbsp;default&nbsp;cases&#34;</span><span class="op" id="2772150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2772155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772160">haveDefault</span>&nbsp;<span class="op" id="2772172">=</span>&nbsp;<span class="builtintype" id="2772174">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772182">if</span>&nbsp;<span class="ident" id="2772185">c</span><span class="op" id="2772186">.</span><span class="ident" id="2772187">Chan</span><span class="op" id="2772191">.</span><span class="ident" id="2772192">IsValid</span><span class="op" id="2772199">(</span><span class="op" id="2772200">)</span>&nbsp;<span class="op" id="2772202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2772208">panic</span><span class="op" id="2772213">(</span><span class="string" id="2772214">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Chan&nbsp;value&#34;</span><span class="op" id="2772259">)</span><br>
<span class="lineno">1915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2772264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772269">if</span>&nbsp;<span class="ident" id="2772272">c</span><span class="op" id="2772273">.</span><span class="ident" id="2772274">Send</span><span class="op" id="2772278">.</span><span class="ident" id="2772279">IsValid</span><span class="op" id="2772286">(</span><span class="op" id="2772287">)</span>&nbsp;<span class="op" id="2772289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2772295">panic</span><span class="op" id="2772300">(</span><span class="string" id="2772301">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2772346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2772351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772356">case</span>&nbsp;<span class="ident" id="2772361">SelectSend</span><span class="op" id="2772371">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772376">ch</span>&nbsp;<span class="op" id="2772379">:=</span>&nbsp;<span class="ident" id="2772382">c</span><span class="op" id="2772383">.</span><span class="ident" id="2772384">Chan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772392">if</span>&nbsp;<span class="op" id="2772395">!</span><span class="ident" id="2772396">ch</span><span class="op" id="2772398">.</span><span class="ident" id="2772399">IsValid</span><span class="op" id="2772406">(</span><span class="op" id="2772407">)</span>&nbsp;<span class="op" id="2772409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772415">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2772424">}</span><br>
<span class="lineno">1925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772429">ch</span><span class="op" id="2772431">.</span><span class="ident" id="2772432">mustBe</span><span class="op" id="2772438">(</span><span class="ident" id="2772439">Chan</span><span class="op" id="2772443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772448">ch</span><span class="op" id="2772450">.</span><span class="ident" id="2772451">mustBeExported</span><span class="op" id="2772465">(</span><span class="op" id="2772466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772471">tt</span>&nbsp;<span class="op" id="2772474">:=</span>&nbsp;<span class="op" id="2772477">(</span><span class="op" id="2772478">*</span><span class="ident" id="2772479">chanType</span><span class="op" id="2772487">)</span><span class="op" id="2772488">(</span><span class="ident" id="2772489">unsafe</span><span class="op" id="2772495">.</span><span class="ident" id="2772496">Pointer</span><span class="op" id="2772503">(</span><span class="ident" id="2772504">ch</span><span class="op" id="2772506">.</span><span class="ident" id="2772507">typ</span><span class="op" id="2772510">)</span><span class="op" id="2772511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772516">if</span>&nbsp;<span class="ident" id="2772519">ChanDir</span><span class="op" id="2772526">(</span><span class="ident" id="2772527">tt</span><span class="op" id="2772529">.</span><span class="ident" id="2772530">dir</span><span class="op" id="2772533">)</span><span class="op" id="2772534">&amp;</span><span class="ident" id="2772535">SendDir</span>&nbsp;<span class="op" id="2772543">==</span>&nbsp;<span class="num" id="2772546">0</span>&nbsp;<span class="op" id="2772548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2772554">panic</span><span class="op" id="2772559">(</span><span class="string" id="2772560">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;using&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2772614">)</span><br>
<span class="lineno">1930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2772619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772624">rc</span><span class="op" id="2772626">.</span><span class="ident" id="2772627">ch</span>&nbsp;<span class="op" id="2772630">=</span>&nbsp;<span class="ident" id="2772632">ch</span><span class="op" id="2772634">.</span><span class="ident" id="2772635">pointer</span><span class="op" id="2772642">(</span><span class="op" id="2772643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772648">rc</span><span class="op" id="2772650">.</span><span class="ident" id="2772651">typ</span>&nbsp;<span class="op" id="2772655">=</span>&nbsp;<span class="op" id="2772657">&amp;</span><span class="ident" id="2772658">tt</span><span class="op" id="2772660">.</span><span class="ident" id="2772661">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772670">v</span>&nbsp;<span class="op" id="2772672">:=</span>&nbsp;<span class="ident" id="2772675">c</span><span class="op" id="2772676">.</span><span class="ident" id="2772677">Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772685">if</span>&nbsp;<span class="op" id="2772688">!</span><span class="ident" id="2772689">v</span><span class="op" id="2772690">.</span><span class="ident" id="2772691">IsValid</span><span class="op" id="2772698">(</span><span class="op" id="2772699">)</span>&nbsp;<span class="op" id="2772701">{</span><br>
<span class="lineno">1935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2772707">panic</span><span class="op" id="2772712">(</span><span class="string" id="2772713">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;missing&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2772762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2772767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772772">v</span><span class="op" id="2772773">.</span><span class="ident" id="2772774">mustBeExported</span><span class="op" id="2772788">(</span><span class="op" id="2772789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772794">v</span>&nbsp;<span class="op" id="2772796">=</span>&nbsp;<span class="ident" id="2772798">v</span><span class="op" id="2772799">.</span><span class="ident" id="2772800">assignTo</span><span class="op" id="2772808">(</span><span class="string" id="2772809">&#34;reflect.Select&#34;</span><span class="op" id="2772825">,</span>&nbsp;<span class="ident" id="2772827">tt</span><span class="op" id="2772829">.</span><span class="ident" id="2772830">elem</span><span class="op" id="2772834">,</span>&nbsp;<span class="ident" id="2772836">nil</span><span class="op" id="2772839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772844">if</span>&nbsp;<span class="ident" id="2772847">v</span><span class="op" id="2772848">.</span><span class="ident" id="2772849">flag</span><span class="op" id="2772853">&amp;</span><span class="ident" id="2772854">flagIndir</span>&nbsp;<span class="op" id="2772864">!=</span>&nbsp;<span class="num" id="2772867">0</span>&nbsp;<span class="op" id="2772869">{</span><br>
<span class="lineno">1940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772875">rc</span><span class="op" id="2772877">.</span><span class="ident" id="2772878">val</span>&nbsp;<span class="op" id="2772882">=</span>&nbsp;<span class="ident" id="2772884">v</span><span class="op" id="2772885">.</span><span class="ident" id="2772886">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2772893">}</span>&nbsp;<span class="keyword" id="2772895">else</span>&nbsp;<span class="op" id="2772900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772906">rc</span><span class="op" id="2772908">.</span><span class="ident" id="2772909">val</span>&nbsp;<span class="op" id="2772913">=</span>&nbsp;<span class="ident" id="2772915">unsafe</span><span class="op" id="2772921">.</span><span class="ident" id="2772922">Pointer</span><span class="op" id="2772929">(</span><span class="op" id="2772930">&amp;</span><span class="ident" id="2772931">v</span><span class="op" id="2772932">.</span><span class="ident" id="2772933">ptr</span><span class="op" id="2772936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2772941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772946">case</span>&nbsp;<span class="ident" id="2772951">SelectRecv</span><span class="op" id="2772961">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772966">if</span>&nbsp;<span class="ident" id="2772969">c</span><span class="op" id="2772970">.</span><span class="ident" id="2772971">Send</span><span class="op" id="2772975">.</span><span class="ident" id="2772976">IsValid</span><span class="op" id="2772983">(</span><span class="op" id="2772984">)</span>&nbsp;<span class="op" id="2772986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2772992">panic</span><span class="op" id="2772997">(</span><span class="string" id="2772998">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2773043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773053">ch</span>&nbsp;<span class="op" id="2773056">:=</span>&nbsp;<span class="ident" id="2773059">c</span><span class="op" id="2773060">.</span><span class="ident" id="2773061">Chan</span><br>
<span class="lineno">1950</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773069">if</span>&nbsp;<span class="op" id="2773072">!</span><span class="ident" id="2773073">ch</span><span class="op" id="2773075">.</span><span class="ident" id="2773076">IsValid</span><span class="op" id="2773083">(</span><span class="op" id="2773084">)</span>&nbsp;<span class="op" id="2773086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773092">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773106">ch</span><span class="op" id="2773108">.</span><span class="ident" id="2773109">mustBe</span><span class="op" id="2773115">(</span><span class="ident" id="2773116">Chan</span><span class="op" id="2773120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773125">ch</span><span class="op" id="2773127">.</span><span class="ident" id="2773128">mustBeExported</span><span class="op" id="2773142">(</span><span class="op" id="2773143">)</span><br>
<span class="lineno">1955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773148">tt</span>&nbsp;<span class="op" id="2773151">:=</span>&nbsp;<span class="op" id="2773154">(</span><span class="op" id="2773155">*</span><span class="ident" id="2773156">chanType</span><span class="op" id="2773164">)</span><span class="op" id="2773165">(</span><span class="ident" id="2773166">unsafe</span><span class="op" id="2773172">.</span><span class="ident" id="2773173">Pointer</span><span class="op" id="2773180">(</span><span class="ident" id="2773181">ch</span><span class="op" id="2773183">.</span><span class="ident" id="2773184">typ</span><span class="op" id="2773187">)</span><span class="op" id="2773188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773193">if</span>&nbsp;<span class="ident" id="2773196">ChanDir</span><span class="op" id="2773203">(</span><span class="ident" id="2773204">tt</span><span class="op" id="2773206">.</span><span class="ident" id="2773207">dir</span><span class="op" id="2773210">)</span><span class="op" id="2773211">&amp;</span><span class="ident" id="2773212">RecvDir</span>&nbsp;<span class="op" id="2773220">==</span>&nbsp;<span class="num" id="2773223">0</span>&nbsp;<span class="op" id="2773225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2773231">panic</span><span class="op" id="2773236">(</span><span class="string" id="2773237">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;using&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2773291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773301">rc</span><span class="op" id="2773303">.</span><span class="ident" id="2773304">ch</span>&nbsp;<span class="op" id="2773307">=</span>&nbsp;<span class="ident" id="2773309">ch</span><span class="op" id="2773311">.</span><span class="ident" id="2773312">pointer</span><span class="op" id="2773319">(</span><span class="op" id="2773320">)</span><br>
<span class="lineno">1960</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773325">rc</span><span class="op" id="2773327">.</span><span class="ident" id="2773328">typ</span>&nbsp;<span class="op" id="2773332">=</span>&nbsp;<span class="op" id="2773334">&amp;</span><span class="ident" id="2773335">tt</span><span class="op" id="2773337">.</span><span class="ident" id="2773338">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773347">rc</span><span class="op" id="2773349">.</span><span class="ident" id="2773350">val</span>&nbsp;<span class="op" id="2773354">=</span>&nbsp;<span class="ident" id="2773356">unsafe_New</span><span class="op" id="2773366">(</span><span class="ident" id="2773367">tt</span><span class="op" id="2773369">.</span><span class="ident" id="2773370">elem</span><span class="op" id="2773374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1965</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773385">chosen</span><span class="op" id="2773391">,</span>&nbsp;<span class="ident" id="2773393">recvOK</span>&nbsp;<span class="op" id="2773400">=</span>&nbsp;<span class="ident" id="2773402">rselect</span><span class="op" id="2773409">(</span><span class="ident" id="2773410">runcases</span><span class="op" id="2773418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773421">if</span>&nbsp;<span class="ident" id="2773424">runcases</span><span class="op" id="2773432">[</span><span class="ident" id="2773433">chosen</span><span class="op" id="2773439">]</span><span class="op" id="2773440">.</span><span class="ident" id="2773441">dir</span>&nbsp;<span class="op" id="2773445">==</span>&nbsp;<span class="builtintype" id="2773448">uintptr</span><span class="op" id="2773455">(</span><span class="ident" id="2773456">SelectRecv</span><span class="op" id="2773466">)</span>&nbsp;<span class="op" id="2773468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773472">tt</span>&nbsp;<span class="op" id="2773475">:=</span>&nbsp;<span class="op" id="2773478">(</span><span class="op" id="2773479">*</span><span class="ident" id="2773480">chanType</span><span class="op" id="2773488">)</span><span class="op" id="2773489">(</span><span class="ident" id="2773490">unsafe</span><span class="op" id="2773496">.</span><span class="ident" id="2773497">Pointer</span><span class="op" id="2773504">(</span><span class="ident" id="2773505">runcases</span><span class="op" id="2773513">[</span><span class="ident" id="2773514">chosen</span><span class="op" id="2773520">]</span><span class="op" id="2773521">.</span><span class="ident" id="2773522">typ</span><span class="op" id="2773525">)</span><span class="op" id="2773526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773530">t</span>&nbsp;<span class="op" id="2773532">:=</span>&nbsp;<span class="ident" id="2773535">tt</span><span class="op" id="2773537">.</span><span class="ident" id="2773538">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773545">p</span>&nbsp;<span class="op" id="2773547">:=</span>&nbsp;<span class="ident" id="2773550">runcases</span><span class="op" id="2773558">[</span><span class="ident" id="2773559">chosen</span><span class="op" id="2773565">]</span><span class="op" id="2773566">.</span><span class="ident" id="2773567">val</span><br>
<span class="lineno">1970</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773573">fl</span>&nbsp;<span class="op" id="2773576">:=</span>&nbsp;<span class="ident" id="2773579">flag</span><span class="op" id="2773583">(</span><span class="ident" id="2773584">t</span><span class="op" id="2773585">.</span><span class="ident" id="2773586">Kind</span><span class="op" id="2773590">(</span><span class="op" id="2773591">)</span><span class="op" id="2773592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773596">if</span>&nbsp;<span class="ident" id="2773599">ifaceIndir</span><span class="op" id="2773609">(</span><span class="ident" id="2773610">t</span><span class="op" id="2773611">)</span>&nbsp;<span class="op" id="2773613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773618">recv</span>&nbsp;<span class="op" id="2773623">=</span>&nbsp;<span class="ident" id="2773625">Value</span><span class="op" id="2773630">{</span><span class="ident" id="2773631">t</span><span class="op" id="2773632">,</span>&nbsp;<span class="ident" id="2773634">p</span><span class="op" id="2773635">,</span>&nbsp;<span class="ident" id="2773637">fl</span>&nbsp;<span class="op" id="2773640">|</span>&nbsp;<span class="ident" id="2773642">flagIndir</span><span class="op" id="2773651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773655">}</span>&nbsp;<span class="keyword" id="2773657">else</span>&nbsp;<span class="op" id="2773662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773667">recv</span>&nbsp;<span class="op" id="2773672">=</span>&nbsp;<span class="ident" id="2773674">Value</span><span class="op" id="2773679">{</span><span class="ident" id="2773680">t</span><span class="op" id="2773681">,</span>&nbsp;<span class="op" id="2773683">*</span><span class="op" id="2773684">(</span><span class="op" id="2773685">*</span><span class="ident" id="2773686">unsafe</span><span class="op" id="2773692">.</span><span class="ident" id="2773693">Pointer</span><span class="op" id="2773700">)</span><span class="op" id="2773701">(</span><span class="ident" id="2773702">p</span><span class="op" id="2773703">)</span><span class="op" id="2773704">,</span>&nbsp;<span class="ident" id="2773706">fl</span><span class="op" id="2773708">}</span><br>
<span class="lineno">1975</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773718">return</span>&nbsp;<span class="ident" id="2773725">chosen</span><span class="op" id="2773731">,</span>&nbsp;<span class="ident" id="2773733">recv</span><span class="op" id="2773737">,</span>&nbsp;<span class="ident" id="2773739">recvOK</span><br>
<span class="lineno"></span><span class="op" id="2773746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1980</span><span class="comment" id="2773749">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;constructors<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2773773">//&nbsp;implemented&nbsp;in&nbsp;package&nbsp;runtime</span><br>
<span class="lineno">1985</span><span class="keyword" id="2773807">func</span>&nbsp;<span class="ident" id="2773812">unsafe_New</span><span class="op" id="2773822">(</span><span class="op" id="2773823">*</span><span class="ident" id="2773824">rtype</span><span class="op" id="2773829">)</span>&nbsp;<span class="ident" id="2773831">unsafe</span><span class="op" id="2773837">.</span><span class="ident" id="2773838">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2773846">func</span>&nbsp;<span class="ident" id="2773851">unsafe_NewArray</span><span class="op" id="2773866">(</span><span class="op" id="2773867">*</span><span class="ident" id="2773868">rtype</span><span class="op" id="2773873">,</span>&nbsp;<span class="builtintype" id="2773875">int</span><span class="op" id="2773878">)</span>&nbsp;<span class="ident" id="2773880">unsafe</span><span class="op" id="2773886">.</span><span class="ident" id="2773887">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2773896">//&nbsp;MakeSlice&nbsp;creates&nbsp;a&nbsp;new&nbsp;zero-initialized&nbsp;slice&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2773952">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;slice&nbsp;type,&nbsp;length,&nbsp;and&nbsp;capacity.</span><br>
<span class="lineno">1990</span><span class="keyword" id="2774007">func</span>&nbsp;<span class="ident" id="2774012">MakeSlice</span><span class="op" id="2774021">(</span><span class="ident" id="2774022">typ</span>&nbsp;<span class="ident" id="2774026">Type</span><span class="op" id="2774030">,</span>&nbsp;<span class="builtinfunc" id="2774032">len</span><span class="op" id="2774035">,</span>&nbsp;<span class="builtinfunc" id="2774037">cap</span>&nbsp;<span class="builtintype" id="2774041">int</span><span class="op" id="2774044">)</span>&nbsp;<span class="ident" id="2774046">Value</span>&nbsp;<span class="op" id="2774052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774055">if</span>&nbsp;<span class="ident" id="2774058">typ</span><span class="op" id="2774061">.</span><span class="ident" id="2774062">Kind</span><span class="op" id="2774066">(</span><span class="op" id="2774067">)</span>&nbsp;<span class="op" id="2774069">!=</span>&nbsp;<span class="ident" id="2774072">Slice</span>&nbsp;<span class="op" id="2774078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2774082">panic</span><span class="op" id="2774087">(</span><span class="string" id="2774088">&#34;reflect.MakeSlice&nbsp;of&nbsp;non-slice&nbsp;type&#34;</span><span class="op" id="2774125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774131">if</span>&nbsp;<span class="builtinfunc" id="2774134">len</span>&nbsp;<span class="op" id="2774138">&lt;</span>&nbsp;<span class="num" id="2774140">0</span>&nbsp;<span class="op" id="2774142">{</span><br>
<span class="lineno">1995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2774146">panic</span><span class="op" id="2774151">(</span><span class="string" id="2774152">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;len&#34;</span><span class="op" id="2774185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774191">if</span>&nbsp;<span class="builtinfunc" id="2774194">cap</span>&nbsp;<span class="op" id="2774198">&lt;</span>&nbsp;<span class="num" id="2774200">0</span>&nbsp;<span class="op" id="2774202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2774206">panic</span><span class="op" id="2774211">(</span><span class="string" id="2774212">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;cap&#34;</span><span class="op" id="2774245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774248">}</span><br>
<span class="lineno">2000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774251">if</span>&nbsp;<span class="builtinfunc" id="2774254">len</span>&nbsp;<span class="op" id="2774258">&gt;</span>&nbsp;<span class="builtinfunc" id="2774260">cap</span>&nbsp;<span class="op" id="2774264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2774268">panic</span><span class="op" id="2774273">(</span><span class="string" id="2774274">&#34;reflect.MakeSlice:&nbsp;len&nbsp;&gt;&nbsp;cap&#34;</span><span class="op" id="2774304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774311">s</span>&nbsp;<span class="op" id="2774313">:=</span>&nbsp;<span class="ident" id="2774316">sliceHeader</span><span class="op" id="2774327">{</span><span class="ident" id="2774328">unsafe_NewArray</span><span class="op" id="2774343">(</span><span class="ident" id="2774344">typ</span><span class="op" id="2774347">.</span><span class="ident" id="2774348">Elem</span><span class="op" id="2774352">(</span><span class="op" id="2774353">)</span><span class="op" id="2774354">.</span><span class="op" id="2774355">(</span><span class="op" id="2774356">*</span><span class="ident" id="2774357">rtype</span><span class="op" id="2774362">)</span><span class="op" id="2774363">,</span>&nbsp;<span class="builtinfunc" id="2774365">cap</span><span class="op" id="2774368">)</span><span class="op" id="2774369">,</span>&nbsp;<span class="builtinfunc" id="2774371">len</span><span class="op" id="2774374">,</span>&nbsp;<span class="builtinfunc" id="2774376">cap</span><span class="op" id="2774379">}</span><br>
<span class="lineno">2005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774382">return</span>&nbsp;<span class="ident" id="2774389">Value</span><span class="op" id="2774394">{</span><span class="ident" id="2774395">typ</span><span class="op" id="2774398">.</span><span class="ident" id="2774399">common</span><span class="op" id="2774405">(</span><span class="op" id="2774406">)</span><span class="op" id="2774407">,</span>&nbsp;<span class="ident" id="2774409">unsafe</span><span class="op" id="2774415">.</span><span class="ident" id="2774416">Pointer</span><span class="op" id="2774423">(</span><span class="op" id="2774424">&amp;</span><span class="ident" id="2774425">s</span><span class="op" id="2774426">)</span><span class="op" id="2774427">,</span>&nbsp;<span class="ident" id="2774429">flagIndir</span>&nbsp;<span class="op" id="2774439">|</span>&nbsp;<span class="ident" id="2774441">flag</span><span class="op" id="2774445">(</span><span class="ident" id="2774446">Slice</span><span class="op" id="2774451">)</span><span class="op" id="2774452">}</span><br>
<span class="lineno"></span><span class="op" id="2774454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2774457">//&nbsp;MakeChan&nbsp;creates&nbsp;a&nbsp;new&nbsp;channel&nbsp;with&nbsp;the&nbsp;specified&nbsp;type&nbsp;and&nbsp;buffer&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="2774532">func</span>&nbsp;<span class="ident" id="2774537">MakeChan</span><span class="op" id="2774545">(</span><span class="ident" id="2774546">typ</span>&nbsp;<span class="ident" id="2774550">Type</span><span class="op" id="2774554">,</span>&nbsp;<span class="ident" id="2774556">buffer</span>&nbsp;<span class="builtintype" id="2774563">int</span><span class="op" id="2774566">)</span>&nbsp;<span class="ident" id="2774568">Value</span>&nbsp;<span class="op" id="2774574">{</span><br>
<span class="lineno">2010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774577">if</span>&nbsp;<span class="ident" id="2774580">typ</span><span class="op" id="2774583">.</span><span class="ident" id="2774584">Kind</span><span class="op" id="2774588">(</span><span class="op" id="2774589">)</span>&nbsp;<span class="op" id="2774591">!=</span>&nbsp;<span class="ident" id="2774594">Chan</span>&nbsp;<span class="op" id="2774599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2774603">panic</span><span class="op" id="2774608">(</span><span class="string" id="2774609">&#34;reflect.MakeChan&nbsp;of&nbsp;non-chan&nbsp;type&#34;</span><span class="op" id="2774644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774650">if</span>&nbsp;<span class="ident" id="2774653">buffer</span>&nbsp;<span class="op" id="2774660">&lt;</span>&nbsp;<span class="num" id="2774662">0</span>&nbsp;<span class="op" id="2774664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2774668">panic</span><span class="op" id="2774673">(</span><span class="string" id="2774674">&#34;reflect.MakeChan:&nbsp;negative&nbsp;buffer&nbsp;size&#34;</span><span class="op" id="2774714">)</span><br>
<span class="lineno">2015</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774720">if</span>&nbsp;<span class="ident" id="2774723">typ</span><span class="op" id="2774726">.</span><span class="ident" id="2774727">ChanDir</span><span class="op" id="2774734">(</span><span class="op" id="2774735">)</span>&nbsp;<span class="op" id="2774737">!=</span>&nbsp;<span class="ident" id="2774740">BothDir</span>&nbsp;<span class="op" id="2774748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2774752">panic</span><span class="op" id="2774757">(</span><span class="string" id="2774758">&#34;reflect.MakeChan:&nbsp;unidirectional&nbsp;channel&nbsp;type&#34;</span><span class="op" id="2774805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774811">ch</span>&nbsp;<span class="op" id="2774814">:=</span>&nbsp;<span class="ident" id="2774817">makechan</span><span class="op" id="2774825">(</span><span class="ident" id="2774826">typ</span><span class="op" id="2774829">.</span><span class="op" id="2774830">(</span><span class="op" id="2774831">*</span><span class="ident" id="2774832">rtype</span><span class="op" id="2774837">)</span><span class="op" id="2774838">,</span>&nbsp;<span class="ident" id="2774840">uint64</span><span class="op" id="2774846">(</span><span class="ident" id="2774847">buffer</span><span class="op" id="2774853">)</span><span class="op" id="2774854">)</span><br>
<span class="lineno">2020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774857">return</span>&nbsp;<span class="ident" id="2774864">Value</span><span class="op" id="2774869">{</span><span class="ident" id="2774870">typ</span><span class="op" id="2774873">.</span><span class="ident" id="2774874">common</span><span class="op" id="2774880">(</span><span class="op" id="2774881">)</span><span class="op" id="2774882">,</span>&nbsp;<span class="ident" id="2774884">ch</span><span class="op" id="2774886">,</span>&nbsp;<span class="ident" id="2774888">flag</span><span class="op" id="2774892">(</span><span class="ident" id="2774893">Chan</span><span class="op" id="2774897">)</span><span class="op" id="2774898">}</span><br>
<span class="lineno"></span><span class="op" id="2774900">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2774903">//&nbsp;MakeMap&nbsp;creates&nbsp;a&nbsp;new&nbsp;map&nbsp;of&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2774955">func</span>&nbsp;<span class="ident" id="2774960">MakeMap</span><span class="op" id="2774967">(</span><span class="ident" id="2774968">typ</span>&nbsp;<span class="ident" id="2774972">Type</span><span class="op" id="2774976">)</span>&nbsp;<span class="ident" id="2774978">Value</span>&nbsp;<span class="op" id="2774984">{</span><br>
<span class="lineno">2025</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774987">if</span>&nbsp;<span class="ident" id="2774990">typ</span><span class="op" id="2774993">.</span><span class="ident" id="2774994">Kind</span><span class="op" id="2774998">(</span><span class="op" id="2774999">)</span>&nbsp;<span class="op" id="2775001">!=</span>&nbsp;<span class="ident" id="2775004">Map</span>&nbsp;<span class="op" id="2775008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2775012">panic</span><span class="op" id="2775017">(</span><span class="string" id="2775018">&#34;reflect.MakeMap&nbsp;of&nbsp;non-map&nbsp;type&#34;</span><span class="op" id="2775051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775057">m</span>&nbsp;<span class="op" id="2775059">:=</span>&nbsp;<span class="ident" id="2775062">makemap</span><span class="op" id="2775069">(</span><span class="ident" id="2775070">typ</span><span class="op" id="2775073">.</span><span class="op" id="2775074">(</span><span class="op" id="2775075">*</span><span class="ident" id="2775076">rtype</span><span class="op" id="2775081">)</span><span class="op" id="2775082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775085">return</span>&nbsp;<span class="ident" id="2775092">Value</span><span class="op" id="2775097">{</span><span class="ident" id="2775098">typ</span><span class="op" id="2775101">.</span><span class="ident" id="2775102">common</span><span class="op" id="2775108">(</span><span class="op" id="2775109">)</span><span class="op" id="2775110">,</span>&nbsp;<span class="ident" id="2775112">m</span><span class="op" id="2775113">,</span>&nbsp;<span class="ident" id="2775115">flag</span><span class="op" id="2775119">(</span><span class="ident" id="2775120">Map</span><span class="op" id="2775123">)</span><span class="op" id="2775124">}</span><br>
<span class="lineno">2030</span><span class="op" id="2775126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2775129">//&nbsp;Indirect&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2775177">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2775234">//&nbsp;If&nbsp;v&nbsp;is&nbsp;not&nbsp;a&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;v.</span><br>
<span class="lineno">2035</span><span class="keyword" id="2775280">func</span>&nbsp;<span class="ident" id="2775285">Indirect</span><span class="op" id="2775293">(</span><span class="ident" id="2775294">v</span>&nbsp;<span class="ident" id="2775296">Value</span><span class="op" id="2775301">)</span>&nbsp;<span class="ident" id="2775303">Value</span>&nbsp;<span class="op" id="2775309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775312">if</span>&nbsp;<span class="ident" id="2775315">v</span><span class="op" id="2775316">.</span><span class="ident" id="2775317">Kind</span><span class="op" id="2775321">(</span><span class="op" id="2775322">)</span>&nbsp;<span class="op" id="2775324">!=</span>&nbsp;<span class="ident" id="2775327">Ptr</span>&nbsp;<span class="op" id="2775331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775335">return</span>&nbsp;<span class="ident" id="2775342">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775348">return</span>&nbsp;<span class="ident" id="2775355">v</span><span class="op" id="2775356">.</span><span class="ident" id="2775357">Elem</span><span class="op" id="2775361">(</span><span class="op" id="2775362">)</span><br>
<span class="lineno">2040</span><span class="op" id="2775364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2775367">//&nbsp;ValueOf&nbsp;returns&nbsp;a&nbsp;new&nbsp;Value&nbsp;initialized&nbsp;to&nbsp;the&nbsp;concrete&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2775432">//&nbsp;stored&nbsp;in&nbsp;the&nbsp;interface&nbsp;i.&nbsp;&nbsp;ValueOf(nil)&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2775500">func</span>&nbsp;<span class="ident" id="2775505">ValueOf</span><span class="op" id="2775512">(</span><span class="ident" id="2775513">i</span>&nbsp;<span class="keyword" id="2775515">interface</span><span class="op" id="2775524">{</span><span class="op" id="2775525">}</span><span class="op" id="2775526">)</span>&nbsp;<span class="ident" id="2775528">Value</span>&nbsp;<span class="op" id="2775534">{</span><br>
<span class="lineno">2045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775537">if</span>&nbsp;<span class="ident" id="2775540">i</span>&nbsp;<span class="op" id="2775542">==</span>&nbsp;<span class="ident" id="2775545">nil</span>&nbsp;<span class="op" id="2775549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775553">return</span>&nbsp;<span class="ident" id="2775560">Value</span><span class="op" id="2775565">{</span><span class="op" id="2775566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2775573">//&nbsp;TODO(rsc):&nbsp;Eliminate&nbsp;this&nbsp;terrible&nbsp;hack.</span><br>
<span class="lineno">2050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2775618">//&nbsp;In&nbsp;the&nbsp;call&nbsp;to&nbsp;unpackEface,&nbsp;i.typ&nbsp;doesn&#39;t&nbsp;escape,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2775672">//&nbsp;and&nbsp;i.word&nbsp;is&nbsp;an&nbsp;integer.&nbsp;&nbsp;So&nbsp;it&nbsp;looks&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2775720">//&nbsp;i&nbsp;doesn&#39;t&nbsp;escape.&nbsp;&nbsp;But&nbsp;really&nbsp;it&nbsp;does,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2775763">//&nbsp;because&nbsp;i.word&nbsp;is&nbsp;actually&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775805">escapes</span><span class="op" id="2775812">(</span><span class="ident" id="2775813">i</span><span class="op" id="2775814">)</span><br>
<span class="lineno">2055</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775818">return</span>&nbsp;<span class="ident" id="2775825">unpackEface</span><span class="op" id="2775836">(</span><span class="ident" id="2775837">i</span><span class="op" id="2775838">)</span><br>
<span class="lineno"></span><span class="op" id="2775840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2775843">//&nbsp;Zero&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno">2060</span><span class="comment" id="2775919">//&nbsp;The&nbsp;result&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;zero&nbsp;value&nbsp;of&nbsp;the&nbsp;Value&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="2775987">//&nbsp;which&nbsp;represents&nbsp;no&nbsp;value&nbsp;at&nbsp;all.</span><br>
<span class="lineno"></span><span class="comment" id="2776024">//&nbsp;For&nbsp;example,&nbsp;Zero(TypeOf(42))&nbsp;returns&nbsp;a&nbsp;Value&nbsp;with&nbsp;Kind&nbsp;Int&nbsp;and&nbsp;value&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="2776100">//&nbsp;The&nbsp;returned&nbsp;value&nbsp;is&nbsp;neither&nbsp;addressable&nbsp;nor&nbsp;settable.</span><br>
<span class="lineno"></span><span class="keyword" id="2776159">func</span>&nbsp;<span class="ident" id="2776164">Zero</span><span class="op" id="2776168">(</span><span class="ident" id="2776169">typ</span>&nbsp;<span class="ident" id="2776173">Type</span><span class="op" id="2776177">)</span>&nbsp;<span class="ident" id="2776179">Value</span>&nbsp;<span class="op" id="2776185">{</span><br>
<span class="lineno">2065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776188">if</span>&nbsp;<span class="ident" id="2776191">typ</span>&nbsp;<span class="op" id="2776195">==</span>&nbsp;<span class="ident" id="2776198">nil</span>&nbsp;<span class="op" id="2776202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2776206">panic</span><span class="op" id="2776211">(</span><span class="string" id="2776212">&#34;reflect:&nbsp;Zero(nil)&#34;</span><span class="op" id="2776232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2776235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776238">t</span>&nbsp;<span class="op" id="2776240">:=</span>&nbsp;<span class="ident" id="2776243">typ</span><span class="op" id="2776246">.</span><span class="ident" id="2776247">common</span><span class="op" id="2776253">(</span><span class="op" id="2776254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776257">fl</span>&nbsp;<span class="op" id="2776260">:=</span>&nbsp;<span class="ident" id="2776263">flag</span><span class="op" id="2776267">(</span><span class="ident" id="2776268">t</span><span class="op" id="2776269">.</span><span class="ident" id="2776270">Kind</span><span class="op" id="2776274">(</span><span class="op" id="2776275">)</span><span class="op" id="2776276">)</span><br>
<span class="lineno">2070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776279">if</span>&nbsp;<span class="ident" id="2776282">ifaceIndir</span><span class="op" id="2776292">(</span><span class="ident" id="2776293">t</span><span class="op" id="2776294">)</span>&nbsp;<span class="op" id="2776296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776300">return</span>&nbsp;<span class="ident" id="2776307">Value</span><span class="op" id="2776312">{</span><span class="ident" id="2776313">t</span><span class="op" id="2776314">,</span>&nbsp;<span class="ident" id="2776316">unsafe_New</span><span class="op" id="2776326">(</span><span class="ident" id="2776327">typ</span><span class="op" id="2776330">.</span><span class="op" id="2776331">(</span><span class="op" id="2776332">*</span><span class="ident" id="2776333">rtype</span><span class="op" id="2776338">)</span><span class="op" id="2776339">)</span><span class="op" id="2776340">,</span>&nbsp;<span class="ident" id="2776342">fl</span>&nbsp;<span class="op" id="2776345">|</span>&nbsp;<span class="ident" id="2776347">flagIndir</span><span class="op" id="2776356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2776359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776362">return</span>&nbsp;<span class="ident" id="2776369">Value</span><span class="op" id="2776374">{</span><span class="ident" id="2776375">t</span><span class="op" id="2776376">,</span>&nbsp;<span class="ident" id="2776378">nil</span><span class="op" id="2776381">,</span>&nbsp;<span class="ident" id="2776383">fl</span><span class="op" id="2776385">}</span><br>
<span class="lineno"></span><span class="op" id="2776387">}</span><br>
<span class="lineno">2075</span><br>
<span class="lineno"></span><span class="comment" id="2776390">//&nbsp;New&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;new&nbsp;zero&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2776456">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.&nbsp;&nbsp;That&nbsp;is,&nbsp;the&nbsp;returned&nbsp;Value&#39;s&nbsp;Type&nbsp;is&nbsp;PtrTo(typ).</span><br>
<span class="lineno"></span><span class="keyword" id="2776534">func</span>&nbsp;<span class="ident" id="2776539">New</span><span class="op" id="2776542">(</span><span class="ident" id="2776543">typ</span>&nbsp;<span class="ident" id="2776547">Type</span><span class="op" id="2776551">)</span>&nbsp;<span class="ident" id="2776553">Value</span>&nbsp;<span class="op" id="2776559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776562">if</span>&nbsp;<span class="ident" id="2776565">typ</span>&nbsp;<span class="op" id="2776569">==</span>&nbsp;<span class="ident" id="2776572">nil</span>&nbsp;<span class="op" id="2776576">{</span><br>
<span class="lineno">2080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2776580">panic</span><span class="op" id="2776585">(</span><span class="string" id="2776586">&#34;reflect:&nbsp;New(nil)&#34;</span><span class="op" id="2776605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2776608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776611">ptr</span>&nbsp;<span class="op" id="2776615">:=</span>&nbsp;<span class="ident" id="2776618">unsafe_New</span><span class="op" id="2776628">(</span><span class="ident" id="2776629">typ</span><span class="op" id="2776632">.</span><span class="op" id="2776633">(</span><span class="op" id="2776634">*</span><span class="ident" id="2776635">rtype</span><span class="op" id="2776640">)</span><span class="op" id="2776641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776644">fl</span>&nbsp;<span class="op" id="2776647">:=</span>&nbsp;<span class="ident" id="2776650">flag</span><span class="op" id="2776654">(</span><span class="ident" id="2776655">Ptr</span><span class="op" id="2776658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776661">return</span>&nbsp;<span class="ident" id="2776668">Value</span><span class="op" id="2776673">{</span><span class="ident" id="2776674">typ</span><span class="op" id="2776677">.</span><span class="ident" id="2776678">common</span><span class="op" id="2776684">(</span><span class="op" id="2776685">)</span><span class="op" id="2776686">.</span><span class="ident" id="2776687">ptrTo</span><span class="op" id="2776692">(</span><span class="op" id="2776693">)</span><span class="op" id="2776694">,</span>&nbsp;<span class="ident" id="2776696">ptr</span><span class="op" id="2776699">,</span>&nbsp;<span class="ident" id="2776701">fl</span><span class="op" id="2776703">}</span><br>
<span class="lineno">2085</span><span class="op" id="2776705">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2776708">//&nbsp;NewAt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2776774">//&nbsp;specified&nbsp;type,&nbsp;using&nbsp;p&nbsp;as&nbsp;that&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2776818">func</span>&nbsp;<span class="ident" id="2776823">NewAt</span><span class="op" id="2776828">(</span><span class="ident" id="2776829">typ</span>&nbsp;<span class="ident" id="2776833">Type</span><span class="op" id="2776837">,</span>&nbsp;<span class="ident" id="2776839">p</span>&nbsp;<span class="ident" id="2776841">unsafe</span><span class="op" id="2776847">.</span><span class="ident" id="2776848">Pointer</span><span class="op" id="2776855">)</span>&nbsp;<span class="ident" id="2776857">Value</span>&nbsp;<span class="op" id="2776863">{</span><br>
<span class="lineno">2090</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776866">fl</span>&nbsp;<span class="op" id="2776869">:=</span>&nbsp;<span class="ident" id="2776872">flag</span><span class="op" id="2776876">(</span><span class="ident" id="2776877">Ptr</span><span class="op" id="2776880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776883">return</span>&nbsp;<span class="ident" id="2776890">Value</span><span class="op" id="2776895">{</span><span class="ident" id="2776896">typ</span><span class="op" id="2776899">.</span><span class="ident" id="2776900">common</span><span class="op" id="2776906">(</span><span class="op" id="2776907">)</span><span class="op" id="2776908">.</span><span class="ident" id="2776909">ptrTo</span><span class="op" id="2776914">(</span><span class="op" id="2776915">)</span><span class="op" id="2776916">,</span>&nbsp;<span class="ident" id="2776918">p</span><span class="op" id="2776919">,</span>&nbsp;<span class="ident" id="2776921">fl</span><span class="op" id="2776923">}</span><br>
<span class="lineno"></span><span class="op" id="2776925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2776928">//&nbsp;assignTo&nbsp;returns&nbsp;a&nbsp;value&nbsp;v&nbsp;that&nbsp;can&nbsp;be&nbsp;assigned&nbsp;directly&nbsp;to&nbsp;typ.</span><br>
<span class="lineno">2095</span><span class="comment" id="2776996">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;typ.</span><br>
<span class="lineno"></span><span class="comment" id="2777040">//&nbsp;For&nbsp;a&nbsp;conversion&nbsp;to&nbsp;an&nbsp;interface&nbsp;type,&nbsp;target&nbsp;is&nbsp;a&nbsp;suggested&nbsp;scratch&nbsp;space&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="2777126">func</span>&nbsp;<span class="op" id="2777131">(</span><span class="ident" id="2777132">v</span>&nbsp;<span class="ident" id="2777134">Value</span><span class="op" id="2777139">)</span>&nbsp;<span class="ident" id="2777141">assignTo</span><span class="op" id="2777149">(</span><span class="ident" id="2777150">context</span>&nbsp;<span class="builtintype" id="2777158">string</span><span class="op" id="2777164">,</span>&nbsp;<span class="ident" id="2777166">dst</span>&nbsp;<span class="op" id="2777170">*</span><span class="ident" id="2777171">rtype</span><span class="op" id="2777176">,</span>&nbsp;<span class="ident" id="2777178">target</span>&nbsp;<span class="ident" id="2777185">unsafe</span><span class="op" id="2777191">.</span><span class="ident" id="2777192">Pointer</span><span class="op" id="2777199">)</span>&nbsp;<span class="ident" id="2777201">Value</span>&nbsp;<span class="op" id="2777207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777210">if</span>&nbsp;<span class="ident" id="2777213">v</span><span class="op" id="2777214">.</span><span class="ident" id="2777215">flag</span><span class="op" id="2777219">&amp;</span><span class="ident" id="2777220">flagMethod</span>&nbsp;<span class="op" id="2777231">!=</span>&nbsp;<span class="num" id="2777234">0</span>&nbsp;<span class="op" id="2777236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777240">v</span>&nbsp;<span class="op" id="2777242">=</span>&nbsp;<span class="ident" id="2777244">makeMethodValue</span><span class="op" id="2777259">(</span><span class="ident" id="2777260">context</span><span class="op" id="2777267">,</span>&nbsp;<span class="ident" id="2777269">v</span><span class="op" id="2777270">)</span><br>
<span class="lineno">2100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2777273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777277">switch</span>&nbsp;<span class="op" id="2777284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777287">case</span>&nbsp;<span class="ident" id="2777292">directlyAssignable</span><span class="op" id="2777310">(</span><span class="ident" id="2777311">dst</span><span class="op" id="2777314">,</span>&nbsp;<span class="ident" id="2777316">v</span><span class="op" id="2777317">.</span><span class="ident" id="2777318">typ</span><span class="op" id="2777321">)</span><span class="op" id="2777322">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2777326">//&nbsp;Overwrite&nbsp;type&nbsp;so&nbsp;that&nbsp;they&nbsp;match.</span><br>
<span class="lineno">2105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2777366">//&nbsp;Same&nbsp;memory&nbsp;layout,&nbsp;so&nbsp;no&nbsp;harm&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777408">v</span><span class="op" id="2777409">.</span><span class="ident" id="2777410">typ</span>&nbsp;<span class="op" id="2777414">=</span>&nbsp;<span class="ident" id="2777416">dst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777422">fl</span>&nbsp;<span class="op" id="2777425">:=</span>&nbsp;<span class="ident" id="2777428">v</span><span class="op" id="2777429">.</span><span class="ident" id="2777430">flag</span>&nbsp;<span class="op" id="2777435">&amp;</span>&nbsp;<span class="op" id="2777437">(</span><span class="ident" id="2777438">flagRO</span>&nbsp;<span class="op" id="2777445">|</span>&nbsp;<span class="ident" id="2777447">flagAddr</span>&nbsp;<span class="op" id="2777456">|</span>&nbsp;<span class="ident" id="2777458">flagIndir</span><span class="op" id="2777467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777471">fl</span>&nbsp;<span class="op" id="2777474">|=</span>&nbsp;<span class="ident" id="2777477">flag</span><span class="op" id="2777481">(</span><span class="ident" id="2777482">dst</span><span class="op" id="2777485">.</span><span class="ident" id="2777486">Kind</span><span class="op" id="2777490">(</span><span class="op" id="2777491">)</span><span class="op" id="2777492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777496">return</span>&nbsp;<span class="ident" id="2777503">Value</span><span class="op" id="2777508">{</span><span class="ident" id="2777509">dst</span><span class="op" id="2777512">,</span>&nbsp;<span class="ident" id="2777514">v</span><span class="op" id="2777515">.</span><span class="ident" id="2777516">ptr</span><span class="op" id="2777519">,</span>&nbsp;<span class="ident" id="2777521">fl</span><span class="op" id="2777523">}</span><br>
<span class="lineno">2110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777527">case</span>&nbsp;<span class="ident" id="2777532">implements</span><span class="op" id="2777542">(</span><span class="ident" id="2777543">dst</span><span class="op" id="2777546">,</span>&nbsp;<span class="ident" id="2777548">v</span><span class="op" id="2777549">.</span><span class="ident" id="2777550">typ</span><span class="op" id="2777553">)</span><span class="op" id="2777554">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777558">if</span>&nbsp;<span class="ident" id="2777561">target</span>&nbsp;<span class="op" id="2777568">==</span>&nbsp;<span class="ident" id="2777571">nil</span>&nbsp;<span class="op" id="2777575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777580">target</span>&nbsp;<span class="op" id="2777587">=</span>&nbsp;<span class="ident" id="2777589">unsafe_New</span><span class="op" id="2777599">(</span><span class="ident" id="2777600">dst</span><span class="op" id="2777603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2777607">}</span><br>
<span class="lineno">2115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777611">x</span>&nbsp;<span class="op" id="2777613">:=</span>&nbsp;<span class="ident" id="2777616">valueInterface</span><span class="op" id="2777630">(</span><span class="ident" id="2777631">v</span><span class="op" id="2777632">,</span>&nbsp;<span class="builtintype" id="2777634">false</span><span class="op" id="2777639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777643">if</span>&nbsp;<span class="ident" id="2777646">dst</span><span class="op" id="2777649">.</span><span class="ident" id="2777650">NumMethod</span><span class="op" id="2777659">(</span><span class="op" id="2777660">)</span>&nbsp;<span class="op" id="2777662">==</span>&nbsp;<span class="num" id="2777665">0</span>&nbsp;<span class="op" id="2777667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2777672">*</span><span class="op" id="2777673">(</span><span class="op" id="2777674">*</span><span class="keyword" id="2777675">interface</span><span class="op" id="2777684">{</span><span class="op" id="2777685">}</span><span class="op" id="2777686">)</span><span class="op" id="2777687">(</span><span class="ident" id="2777688">target</span><span class="op" id="2777694">)</span>&nbsp;<span class="op" id="2777696">=</span>&nbsp;<span class="ident" id="2777698">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2777702">}</span>&nbsp;<span class="keyword" id="2777704">else</span>&nbsp;<span class="op" id="2777709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777714">ifaceE2I</span><span class="op" id="2777722">(</span><span class="ident" id="2777723">dst</span><span class="op" id="2777726">,</span>&nbsp;<span class="ident" id="2777728">x</span><span class="op" id="2777729">,</span>&nbsp;<span class="ident" id="2777731">target</span><span class="op" id="2777737">)</span><br>
<span class="lineno">2120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2777741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777745">return</span>&nbsp;<span class="ident" id="2777752">Value</span><span class="op" id="2777757">{</span><span class="ident" id="2777758">dst</span><span class="op" id="2777761">,</span>&nbsp;<span class="ident" id="2777763">target</span><span class="op" id="2777769">,</span>&nbsp;<span class="ident" id="2777771">flagIndir</span>&nbsp;<span class="op" id="2777781">|</span>&nbsp;<span class="ident" id="2777783">flag</span><span class="op" id="2777787">(</span><span class="ident" id="2777788">Interface</span><span class="op" id="2777797">)</span><span class="op" id="2777798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2777801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2777805">//&nbsp;Failed.</span><br>
<span class="lineno">2125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2777817">panic</span><span class="op" id="2777822">(</span><span class="ident" id="2777823">context</span>&nbsp;<span class="op" id="2777831">+</span>&nbsp;<span class="string" id="2777833">&#34;:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2777852">+</span>&nbsp;<span class="ident" id="2777854">v</span><span class="op" id="2777855">.</span><span class="ident" id="2777856">typ</span><span class="op" id="2777859">.</span><span class="ident" id="2777860">String</span><span class="op" id="2777866">(</span><span class="op" id="2777867">)</span>&nbsp;<span class="op" id="2777869">+</span>&nbsp;<span class="string" id="2777871">&#34;&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2777901">+</span>&nbsp;<span class="ident" id="2777903">dst</span><span class="op" id="2777906">.</span><span class="ident" id="2777907">String</span><span class="op" id="2777913">(</span><span class="op" id="2777914">)</span><span class="op" id="2777915">)</span><br>
<span class="lineno"></span><span class="op" id="2777917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2777920">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;value&nbsp;v&nbsp;converted&nbsp;to&nbsp;type&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2777972">//&nbsp;If&nbsp;the&nbsp;usual&nbsp;Go&nbsp;conversion&nbsp;rules&nbsp;do&nbsp;not&nbsp;allow&nbsp;conversion</span><br>
<span class="lineno">2130</span><span class="comment" id="2778032">//&nbsp;of&nbsp;the&nbsp;value&nbsp;v&nbsp;to&nbsp;type&nbsp;t,&nbsp;Convert&nbsp;panics.</span><br>
<span class="lineno"></span><span class="keyword" id="2778077">func</span>&nbsp;<span class="op" id="2778082">(</span><span class="ident" id="2778083">v</span>&nbsp;<span class="ident" id="2778085">Value</span><span class="op" id="2778090">)</span>&nbsp;<span class="ident" id="2778092">Convert</span><span class="op" id="2778099">(</span><span class="ident" id="2778100">t</span>&nbsp;<span class="ident" id="2778102">Type</span><span class="op" id="2778106">)</span>&nbsp;<span class="ident" id="2778108">Value</span>&nbsp;<span class="op" id="2778114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778117">if</span>&nbsp;<span class="ident" id="2778120">v</span><span class="op" id="2778121">.</span><span class="ident" id="2778122">flag</span><span class="op" id="2778126">&amp;</span><span class="ident" id="2778127">flagMethod</span>&nbsp;<span class="op" id="2778138">!=</span>&nbsp;<span class="num" id="2778141">0</span>&nbsp;<span class="op" id="2778143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2778147">v</span>&nbsp;<span class="op" id="2778149">=</span>&nbsp;<span class="ident" id="2778151">makeMethodValue</span><span class="op" id="2778166">(</span><span class="string" id="2778167">&#34;Convert&#34;</span><span class="op" id="2778176">,</span>&nbsp;<span class="ident" id="2778178">v</span><span class="op" id="2778179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2778182">}</span><br>
<span class="lineno">2135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2778185">op</span>&nbsp;<span class="op" id="2778188">:=</span>&nbsp;<span class="ident" id="2778191">convertOp</span><span class="op" id="2778200">(</span><span class="ident" id="2778201">t</span><span class="op" id="2778202">.</span><span class="ident" id="2778203">common</span><span class="op" id="2778209">(</span><span class="op" id="2778210">)</span><span class="op" id="2778211">,</span>&nbsp;<span class="ident" id="2778213">v</span><span class="op" id="2778214">.</span><span class="ident" id="2778215">typ</span><span class="op" id="2778218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778221">if</span>&nbsp;<span class="ident" id="2778224">op</span>&nbsp;<span class="op" id="2778227">==</span>&nbsp;<span class="ident" id="2778230">nil</span>&nbsp;<span class="op" id="2778234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2778238">panic</span><span class="op" id="2778243">(</span><span class="string" id="2778244">&#34;reflect.Value.Convert:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2778284">+</span>&nbsp;<span class="ident" id="2778286">v</span><span class="op" id="2778287">.</span><span class="ident" id="2778288">typ</span><span class="op" id="2778291">.</span><span class="ident" id="2778292">String</span><span class="op" id="2778298">(</span><span class="op" id="2778299">)</span>&nbsp;<span class="op" id="2778301">+</span>&nbsp;<span class="string" id="2778303">&#34;&nbsp;cannot&nbsp;be&nbsp;converted&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2778335">+</span>&nbsp;<span class="ident" id="2778337">t</span><span class="op" id="2778338">.</span><span class="ident" id="2778339">String</span><span class="op" id="2778345">(</span><span class="op" id="2778346">)</span><span class="op" id="2778347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2778350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778353">return</span>&nbsp;<span class="ident" id="2778360">op</span><span class="op" id="2778362">(</span><span class="ident" id="2778363">v</span><span class="op" id="2778364">,</span>&nbsp;<span class="ident" id="2778366">t</span><span class="op" id="2778367">)</span><br>
<span class="lineno">2140</span><span class="op" id="2778369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2778372">//&nbsp;convertOp&nbsp;returns&nbsp;the&nbsp;function&nbsp;to&nbsp;convert&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;src</span><br>
<span class="lineno"></span><span class="comment" id="2778437">//&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;dst.&nbsp;If&nbsp;the&nbsp;conversion&nbsp;is&nbsp;illegal,&nbsp;convertOp&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2778517">func</span>&nbsp;<span class="ident" id="2778522">convertOp</span><span class="op" id="2778531">(</span><span class="ident" id="2778532">dst</span><span class="op" id="2778535">,</span>&nbsp;<span class="ident" id="2778537">src</span>&nbsp;<span class="op" id="2778541">*</span><span class="ident" id="2778542">rtype</span><span class="op" id="2778547">)</span>&nbsp;<span class="keyword" id="2778549">func</span><span class="op" id="2778553">(</span><span class="ident" id="2778554">Value</span><span class="op" id="2778559">,</span>&nbsp;<span class="ident" id="2778561">Type</span><span class="op" id="2778565">)</span>&nbsp;<span class="ident" id="2778567">Value</span>&nbsp;<span class="op" id="2778573">{</span><br>
<span class="lineno">2145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778576">switch</span>&nbsp;<span class="ident" id="2778583">src</span><span class="op" id="2778586">.</span><span class="ident" id="2778587">Kind</span><span class="op" id="2778591">(</span><span class="op" id="2778592">)</span>&nbsp;<span class="op" id="2778594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778597">case</span>&nbsp;<span class="ident" id="2778602">Int</span><span class="op" id="2778605">,</span>&nbsp;<span class="ident" id="2778607">Int8</span><span class="op" id="2778611">,</span>&nbsp;<span class="ident" id="2778613">Int16</span><span class="op" id="2778618">,</span>&nbsp;<span class="ident" id="2778620">Int32</span><span class="op" id="2778625">,</span>&nbsp;<span class="ident" id="2778627">Int64</span><span class="op" id="2778632">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778636">switch</span>&nbsp;<span class="ident" id="2778643">dst</span><span class="op" id="2778646">.</span><span class="ident" id="2778647">Kind</span><span class="op" id="2778651">(</span><span class="op" id="2778652">)</span>&nbsp;<span class="op" id="2778654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778658">case</span>&nbsp;<span class="ident" id="2778663">Int</span><span class="op" id="2778666">,</span>&nbsp;<span class="ident" id="2778668">Int8</span><span class="op" id="2778672">,</span>&nbsp;<span class="ident" id="2778674">Int16</span><span class="op" id="2778679">,</span>&nbsp;<span class="ident" id="2778681">Int32</span><span class="op" id="2778686">,</span>&nbsp;<span class="ident" id="2778688">Int64</span><span class="op" id="2778693">,</span>&nbsp;<span class="ident" id="2778695">Uint</span><span class="op" id="2778699">,</span>&nbsp;<span class="ident" id="2778701">Uint8</span><span class="op" id="2778706">,</span>&nbsp;<span class="ident" id="2778708">Uint16</span><span class="op" id="2778714">,</span>&nbsp;<span class="ident" id="2778716">Uint32</span><span class="op" id="2778722">,</span>&nbsp;<span class="ident" id="2778724">Uint64</span><span class="op" id="2778730">,</span>&nbsp;<span class="ident" id="2778732">Uintptr</span><span class="op" id="2778739">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778744">return</span>&nbsp;<span class="ident" id="2778751">cvtInt</span><br>
<span class="lineno">2150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778760">case</span>&nbsp;<span class="ident" id="2778765">Float32</span><span class="op" id="2778772">,</span>&nbsp;<span class="ident" id="2778774">Float64</span><span class="op" id="2778781">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778786">return</span>&nbsp;<span class="ident" id="2778793">cvtIntFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778807">case</span>&nbsp;<span class="ident" id="2778812">String</span><span class="op" id="2778818">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778823">return</span>&nbsp;<span class="ident" id="2778830">cvtIntString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2778845">}</span><br>
<span class="lineno">2155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778849">case</span>&nbsp;<span class="ident" id="2778854">Uint</span><span class="op" id="2778858">,</span>&nbsp;<span class="ident" id="2778860">Uint8</span><span class="op" id="2778865">,</span>&nbsp;<span class="ident" id="2778867">Uint16</span><span class="op" id="2778873">,</span>&nbsp;<span class="ident" id="2778875">Uint32</span><span class="op" id="2778881">,</span>&nbsp;<span class="ident" id="2778883">Uint64</span><span class="op" id="2778889">,</span>&nbsp;<span class="ident" id="2778891">Uintptr</span><span class="op" id="2778898">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778902">switch</span>&nbsp;<span class="ident" id="2778909">dst</span><span class="op" id="2778912">.</span><span class="ident" id="2778913">Kind</span><span class="op" id="2778917">(</span><span class="op" id="2778918">)</span>&nbsp;<span class="op" id="2778920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778924">case</span>&nbsp;<span class="ident" id="2778929">Int</span><span class="op" id="2778932">,</span>&nbsp;<span class="ident" id="2778934">Int8</span><span class="op" id="2778938">,</span>&nbsp;<span class="ident" id="2778940">Int16</span><span class="op" id="2778945">,</span>&nbsp;<span class="ident" id="2778947">Int32</span><span class="op" id="2778952">,</span>&nbsp;<span class="ident" id="2778954">Int64</span><span class="op" id="2778959">,</span>&nbsp;<span class="ident" id="2778961">Uint</span><span class="op" id="2778965">,</span>&nbsp;<span class="ident" id="2778967">Uint8</span><span class="op" id="2778972">,</span>&nbsp;<span class="ident" id="2778974">Uint16</span><span class="op" id="2778980">,</span>&nbsp;<span class="ident" id="2778982">Uint32</span><span class="op" id="2778988">,</span>&nbsp;<span class="ident" id="2778990">Uint64</span><span class="op" id="2778996">,</span>&nbsp;<span class="ident" id="2778998">Uintptr</span><span class="op" id="2779005">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779010">return</span>&nbsp;<span class="ident" id="2779017">cvtUint</span><br>
<span class="lineno">2160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779027">case</span>&nbsp;<span class="ident" id="2779032">Float32</span><span class="op" id="2779039">,</span>&nbsp;<span class="ident" id="2779041">Float64</span><span class="op" id="2779048">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779053">return</span>&nbsp;<span class="ident" id="2779060">cvtUintFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779075">case</span>&nbsp;<span class="ident" id="2779080">String</span><span class="op" id="2779086">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779091">return</span>&nbsp;<span class="ident" id="2779098">cvtUintString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779114">}</span><br>
<span class="lineno">2165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779118">case</span>&nbsp;<span class="ident" id="2779123">Float32</span><span class="op" id="2779130">,</span>&nbsp;<span class="ident" id="2779132">Float64</span><span class="op" id="2779139">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779143">switch</span>&nbsp;<span class="ident" id="2779150">dst</span><span class="op" id="2779153">.</span><span class="ident" id="2779154">Kind</span><span class="op" id="2779158">(</span><span class="op" id="2779159">)</span>&nbsp;<span class="op" id="2779161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779165">case</span>&nbsp;<span class="ident" id="2779170">Int</span><span class="op" id="2779173">,</span>&nbsp;<span class="ident" id="2779175">Int8</span><span class="op" id="2779179">,</span>&nbsp;<span class="ident" id="2779181">Int16</span><span class="op" id="2779186">,</span>&nbsp;<span class="ident" id="2779188">Int32</span><span class="op" id="2779193">,</span>&nbsp;<span class="ident" id="2779195">Int64</span><span class="op" id="2779200">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779205">return</span>&nbsp;<span class="ident" id="2779212">cvtFloatInt</span><br>
<span class="lineno">2170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779226">case</span>&nbsp;<span class="ident" id="2779231">Uint</span><span class="op" id="2779235">,</span>&nbsp;<span class="ident" id="2779237">Uint8</span><span class="op" id="2779242">,</span>&nbsp;<span class="ident" id="2779244">Uint16</span><span class="op" id="2779250">,</span>&nbsp;<span class="ident" id="2779252">Uint32</span><span class="op" id="2779258">,</span>&nbsp;<span class="ident" id="2779260">Uint64</span><span class="op" id="2779266">,</span>&nbsp;<span class="ident" id="2779268">Uintptr</span><span class="op" id="2779275">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779280">return</span>&nbsp;<span class="ident" id="2779287">cvtFloatUint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779302">case</span>&nbsp;<span class="ident" id="2779307">Float32</span><span class="op" id="2779314">,</span>&nbsp;<span class="ident" id="2779316">Float64</span><span class="op" id="2779323">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779328">return</span>&nbsp;<span class="ident" id="2779335">cvtFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779346">}</span><br>
<span class="lineno">2175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779350">case</span>&nbsp;<span class="ident" id="2779355">Complex64</span><span class="op" id="2779364">,</span>&nbsp;<span class="ident" id="2779366">Complex128</span><span class="op" id="2779376">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779380">switch</span>&nbsp;<span class="ident" id="2779387">dst</span><span class="op" id="2779390">.</span><span class="ident" id="2779391">Kind</span><span class="op" id="2779395">(</span><span class="op" id="2779396">)</span>&nbsp;<span class="op" id="2779398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779402">case</span>&nbsp;<span class="ident" id="2779407">Complex64</span><span class="op" id="2779416">,</span>&nbsp;<span class="ident" id="2779418">Complex128</span><span class="op" id="2779428">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779433">return</span>&nbsp;<span class="ident" id="2779440">cvtComplex</span><br>
<span class="lineno">2180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779457">case</span>&nbsp;<span class="ident" id="2779462">String</span><span class="op" id="2779468">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779472">if</span>&nbsp;<span class="ident" id="2779475">dst</span><span class="op" id="2779478">.</span><span class="ident" id="2779479">Kind</span><span class="op" id="2779483">(</span><span class="op" id="2779484">)</span>&nbsp;<span class="op" id="2779486">==</span>&nbsp;<span class="ident" id="2779489">Slice</span>&nbsp;<span class="op" id="2779495">&amp;&amp;</span>&nbsp;<span class="ident" id="2779498">dst</span><span class="op" id="2779501">.</span><span class="ident" id="2779502">Elem</span><span class="op" id="2779506">(</span><span class="op" id="2779507">)</span><span class="op" id="2779508">.</span><span class="ident" id="2779509">PkgPath</span><span class="op" id="2779516">(</span><span class="op" id="2779517">)</span>&nbsp;<span class="op" id="2779519">==</span>&nbsp;<span class="string" id="2779522">&#34;&#34;</span>&nbsp;<span class="op" id="2779525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779530">switch</span>&nbsp;<span class="ident" id="2779537">dst</span><span class="op" id="2779540">.</span><span class="ident" id="2779541">Elem</span><span class="op" id="2779545">(</span><span class="op" id="2779546">)</span><span class="op" id="2779547">.</span><span class="ident" id="2779548">Kind</span><span class="op" id="2779552">(</span><span class="op" id="2779553">)</span>&nbsp;<span class="op" id="2779555">{</span><br>
<span class="lineno">2185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779560">case</span>&nbsp;<span class="ident" id="2779565">Uint8</span><span class="op" id="2779570">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779576">return</span>&nbsp;<span class="ident" id="2779583">cvtStringBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779601">case</span>&nbsp;<span class="ident" id="2779606">Int32</span><span class="op" id="2779611">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779617">return</span>&nbsp;<span class="ident" id="2779624">cvtStringRunes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779642">}</span><br>
<span class="lineno">2190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779650">case</span>&nbsp;<span class="ident" id="2779655">Slice</span><span class="op" id="2779660">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779664">if</span>&nbsp;<span class="ident" id="2779667">dst</span><span class="op" id="2779670">.</span><span class="ident" id="2779671">Kind</span><span class="op" id="2779675">(</span><span class="op" id="2779676">)</span>&nbsp;<span class="op" id="2779678">==</span>&nbsp;<span class="ident" id="2779681">String</span>&nbsp;<span class="op" id="2779688">&amp;&amp;</span>&nbsp;<span class="ident" id="2779691">src</span><span class="op" id="2779694">.</span><span class="ident" id="2779695">Elem</span><span class="op" id="2779699">(</span><span class="op" id="2779700">)</span><span class="op" id="2779701">.</span><span class="ident" id="2779702">PkgPath</span><span class="op" id="2779709">(</span><span class="op" id="2779710">)</span>&nbsp;<span class="op" id="2779712">==</span>&nbsp;<span class="string" id="2779715">&#34;&#34;</span>&nbsp;<span class="op" id="2779718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779723">switch</span>&nbsp;<span class="ident" id="2779730">src</span><span class="op" id="2779733">.</span><span class="ident" id="2779734">Elem</span><span class="op" id="2779738">(</span><span class="op" id="2779739">)</span><span class="op" id="2779740">.</span><span class="ident" id="2779741">Kind</span><span class="op" id="2779745">(</span><span class="op" id="2779746">)</span>&nbsp;<span class="op" id="2779748">{</span><br>
<span class="lineno">2195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779753">case</span>&nbsp;<span class="ident" id="2779758">Uint8</span><span class="op" id="2779763">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779769">return</span>&nbsp;<span class="ident" id="2779776">cvtBytesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779794">case</span>&nbsp;<span class="ident" id="2779799">Int32</span><span class="op" id="2779804">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779810">return</span>&nbsp;<span class="ident" id="2779817">cvtRunesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779835">}</span><br>
<span class="lineno">2200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2779846">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;have&nbsp;same&nbsp;underlying&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779889">if</span>&nbsp;<span class="ident" id="2779892">haveIdenticalUnderlyingType</span><span class="op" id="2779919">(</span><span class="ident" id="2779920">dst</span><span class="op" id="2779923">,</span>&nbsp;<span class="ident" id="2779925">src</span><span class="op" id="2779928">)</span>&nbsp;<span class="op" id="2779930">{</span><br>
<span class="lineno">2205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779934">return</span>&nbsp;<span class="ident" id="2779941">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2779956">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;are&nbsp;unnamed&nbsp;pointer&nbsp;types&nbsp;with&nbsp;same&nbsp;underlying&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780030">if</span>&nbsp;<span class="ident" id="2780033">dst</span><span class="op" id="2780036">.</span><span class="ident" id="2780037">Kind</span><span class="op" id="2780041">(</span><span class="op" id="2780042">)</span>&nbsp;<span class="op" id="2780044">==</span>&nbsp;<span class="ident" id="2780047">Ptr</span>&nbsp;<span class="op" id="2780051">&amp;&amp;</span>&nbsp;<span class="ident" id="2780054">dst</span><span class="op" id="2780057">.</span><span class="ident" id="2780058">Name</span><span class="op" id="2780062">(</span><span class="op" id="2780063">)</span>&nbsp;<span class="op" id="2780065">==</span>&nbsp;<span class="string" id="2780068">&#34;&#34;</span>&nbsp;<span class="op" id="2780071">&amp;&amp;</span><br>
<span class="lineno">2210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780076">src</span><span class="op" id="2780079">.</span><span class="ident" id="2780080">Kind</span><span class="op" id="2780084">(</span><span class="op" id="2780085">)</span>&nbsp;<span class="op" id="2780087">==</span>&nbsp;<span class="ident" id="2780090">Ptr</span>&nbsp;<span class="op" id="2780094">&amp;&amp;</span>&nbsp;<span class="ident" id="2780097">src</span><span class="op" id="2780100">.</span><span class="ident" id="2780101">Name</span><span class="op" id="2780105">(</span><span class="op" id="2780106">)</span>&nbsp;<span class="op" id="2780108">==</span>&nbsp;<span class="string" id="2780111">&#34;&#34;</span>&nbsp;<span class="op" id="2780114">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780119">haveIdenticalUnderlyingType</span><span class="op" id="2780146">(</span><span class="ident" id="2780147">dst</span><span class="op" id="2780150">.</span><span class="ident" id="2780151">Elem</span><span class="op" id="2780155">(</span><span class="op" id="2780156">)</span><span class="op" id="2780157">.</span><span class="ident" id="2780158">common</span><span class="op" id="2780164">(</span><span class="op" id="2780165">)</span><span class="op" id="2780166">,</span>&nbsp;<span class="ident" id="2780168">src</span><span class="op" id="2780171">.</span><span class="ident" id="2780172">Elem</span><span class="op" id="2780176">(</span><span class="op" id="2780177">)</span><span class="op" id="2780178">.</span><span class="ident" id="2780179">common</span><span class="op" id="2780185">(</span><span class="op" id="2780186">)</span><span class="op" id="2780187">)</span>&nbsp;<span class="op" id="2780189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780193">return</span>&nbsp;<span class="ident" id="2780200">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780211">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780215">if</span>&nbsp;<span class="ident" id="2780218">implements</span><span class="op" id="2780228">(</span><span class="ident" id="2780229">dst</span><span class="op" id="2780232">,</span>&nbsp;<span class="ident" id="2780234">src</span><span class="op" id="2780237">)</span>&nbsp;<span class="op" id="2780239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780243">if</span>&nbsp;<span class="ident" id="2780246">src</span><span class="op" id="2780249">.</span><span class="ident" id="2780250">Kind</span><span class="op" id="2780254">(</span><span class="op" id="2780255">)</span>&nbsp;<span class="op" id="2780257">==</span>&nbsp;<span class="ident" id="2780260">Interface</span>&nbsp;<span class="op" id="2780270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780275">return</span>&nbsp;<span class="ident" id="2780282">cvtI2I</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780295">return</span>&nbsp;<span class="ident" id="2780302">cvtT2I</span><br>
<span class="lineno">2220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780314">return</span>&nbsp;<span class="ident" id="2780321">nil</span><br>
<span class="lineno"></span><span class="op" id="2780325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2225</span><span class="comment" id="2780328">//&nbsp;makeInt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;bits&nbsp;(possibly&nbsp;truncated),</span><br>
<span class="lineno"></span><span class="comment" id="2780401">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2780446">func</span>&nbsp;<span class="ident" id="2780451">makeInt</span><span class="op" id="2780458">(</span><span class="ident" id="2780459">f</span>&nbsp;<span class="ident" id="2780461">flag</span><span class="op" id="2780465">,</span>&nbsp;<span class="ident" id="2780467">bits</span>&nbsp;<span class="ident" id="2780472">uint64</span><span class="op" id="2780478">,</span>&nbsp;<span class="ident" id="2780480">t</span>&nbsp;<span class="ident" id="2780482">Type</span><span class="op" id="2780486">)</span>&nbsp;<span class="ident" id="2780488">Value</span>&nbsp;<span class="op" id="2780494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780497">typ</span>&nbsp;<span class="op" id="2780501">:=</span>&nbsp;<span class="ident" id="2780504">t</span><span class="op" id="2780505">.</span><span class="ident" id="2780506">common</span><span class="op" id="2780512">(</span><span class="op" id="2780513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780516">ptr</span>&nbsp;<span class="op" id="2780520">:=</span>&nbsp;<span class="ident" id="2780523">unsafe_New</span><span class="op" id="2780533">(</span><span class="ident" id="2780534">typ</span><span class="op" id="2780537">)</span><br>
<span class="lineno">2230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780540">switch</span>&nbsp;<span class="ident" id="2780547">typ</span><span class="op" id="2780550">.</span><span class="ident" id="2780551">size</span>&nbsp;<span class="op" id="2780556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780559">case</span>&nbsp;<span class="num" id="2780564">1</span><span class="op" id="2780565">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780569">*</span><span class="op" id="2780570">(</span><span class="op" id="2780571">*</span><span class="builtintype" id="2780572">uint8</span><span class="op" id="2780577">)</span><span class="op" id="2780578">(</span><span class="ident" id="2780579">unsafe</span><span class="op" id="2780585">.</span><span class="ident" id="2780586">Pointer</span><span class="op" id="2780593">(</span><span class="ident" id="2780594">ptr</span><span class="op" id="2780597">)</span><span class="op" id="2780598">)</span>&nbsp;<span class="op" id="2780600">=</span>&nbsp;<span class="builtintype" id="2780602">uint8</span><span class="op" id="2780607">(</span><span class="ident" id="2780608">bits</span><span class="op" id="2780612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780615">case</span>&nbsp;<span class="num" id="2780620">2</span><span class="op" id="2780621">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780625">*</span><span class="op" id="2780626">(</span><span class="op" id="2780627">*</span><span class="builtintype" id="2780628">uint16</span><span class="op" id="2780634">)</span><span class="op" id="2780635">(</span><span class="ident" id="2780636">unsafe</span><span class="op" id="2780642">.</span><span class="ident" id="2780643">Pointer</span><span class="op" id="2780650">(</span><span class="ident" id="2780651">ptr</span><span class="op" id="2780654">)</span><span class="op" id="2780655">)</span>&nbsp;<span class="op" id="2780657">=</span>&nbsp;<span class="builtintype" id="2780659">uint16</span><span class="op" id="2780665">(</span><span class="ident" id="2780666">bits</span><span class="op" id="2780670">)</span><br>
<span class="lineno">2235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780673">case</span>&nbsp;<span class="num" id="2780678">4</span><span class="op" id="2780679">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780683">*</span><span class="op" id="2780684">(</span><span class="op" id="2780685">*</span><span class="builtintype" id="2780686">uint32</span><span class="op" id="2780692">)</span><span class="op" id="2780693">(</span><span class="ident" id="2780694">unsafe</span><span class="op" id="2780700">.</span><span class="ident" id="2780701">Pointer</span><span class="op" id="2780708">(</span><span class="ident" id="2780709">ptr</span><span class="op" id="2780712">)</span><span class="op" id="2780713">)</span>&nbsp;<span class="op" id="2780715">=</span>&nbsp;<span class="builtintype" id="2780717">uint32</span><span class="op" id="2780723">(</span><span class="ident" id="2780724">bits</span><span class="op" id="2780728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780731">case</span>&nbsp;<span class="num" id="2780736">8</span><span class="op" id="2780737">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780741">*</span><span class="op" id="2780742">(</span><span class="op" id="2780743">*</span><span class="ident" id="2780744">uint64</span><span class="op" id="2780750">)</span><span class="op" id="2780751">(</span><span class="ident" id="2780752">unsafe</span><span class="op" id="2780758">.</span><span class="ident" id="2780759">Pointer</span><span class="op" id="2780766">(</span><span class="ident" id="2780767">ptr</span><span class="op" id="2780770">)</span><span class="op" id="2780771">)</span>&nbsp;<span class="op" id="2780773">=</span>&nbsp;<span class="ident" id="2780775">bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780781">}</span><br>
<span class="lineno">2240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780784">return</span>&nbsp;<span class="ident" id="2780791">Value</span><span class="op" id="2780796">{</span><span class="ident" id="2780797">typ</span><span class="op" id="2780800">,</span>&nbsp;<span class="ident" id="2780802">ptr</span><span class="op" id="2780805">,</span>&nbsp;<span class="ident" id="2780807">f</span>&nbsp;<span class="op" id="2780809">|</span>&nbsp;<span class="ident" id="2780811">flagIndir</span>&nbsp;<span class="op" id="2780821">|</span>&nbsp;<span class="ident" id="2780823">flag</span><span class="op" id="2780827">(</span><span class="ident" id="2780828">typ</span><span class="op" id="2780831">.</span><span class="ident" id="2780832">Kind</span><span class="op" id="2780836">(</span><span class="op" id="2780837">)</span><span class="op" id="2780838">)</span><span class="op" id="2780839">}</span><br>
<span class="lineno"></span><span class="op" id="2780841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2780844">//&nbsp;makeFloat&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;float32),</span><br>
<span class="lineno"></span><span class="comment" id="2780927">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;float32&nbsp;or&nbsp;float64&nbsp;type.</span><br>
<span class="lineno">2245</span><span class="keyword" id="2780968">func</span>&nbsp;<span class="ident" id="2780973">makeFloat</span><span class="op" id="2780982">(</span><span class="ident" id="2780983">f</span>&nbsp;<span class="ident" id="2780985">flag</span><span class="op" id="2780989">,</span>&nbsp;<span class="ident" id="2780991">v</span>&nbsp;<span class="builtintype" id="2780993">float64</span><span class="op" id="2781000">,</span>&nbsp;<span class="ident" id="2781002">t</span>&nbsp;<span class="ident" id="2781004">Type</span><span class="op" id="2781008">)</span>&nbsp;<span class="ident" id="2781010">Value</span>&nbsp;<span class="op" id="2781016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781019">typ</span>&nbsp;<span class="op" id="2781023">:=</span>&nbsp;<span class="ident" id="2781026">t</span><span class="op" id="2781027">.</span><span class="ident" id="2781028">common</span><span class="op" id="2781034">(</span><span class="op" id="2781035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781038">ptr</span>&nbsp;<span class="op" id="2781042">:=</span>&nbsp;<span class="ident" id="2781045">unsafe_New</span><span class="op" id="2781055">(</span><span class="ident" id="2781056">typ</span><span class="op" id="2781059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781062">switch</span>&nbsp;<span class="ident" id="2781069">typ</span><span class="op" id="2781072">.</span><span class="ident" id="2781073">size</span>&nbsp;<span class="op" id="2781078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781081">case</span>&nbsp;<span class="num" id="2781086">4</span><span class="op" id="2781087">:</span><br>
<span class="lineno">2250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781091">*</span><span class="op" id="2781092">(</span><span class="op" id="2781093">*</span><span class="builtintype" id="2781094">float32</span><span class="op" id="2781101">)</span><span class="op" id="2781102">(</span><span class="ident" id="2781103">unsafe</span><span class="op" id="2781109">.</span><span class="ident" id="2781110">Pointer</span><span class="op" id="2781117">(</span><span class="ident" id="2781118">ptr</span><span class="op" id="2781121">)</span><span class="op" id="2781122">)</span>&nbsp;<span class="op" id="2781124">=</span>&nbsp;<span class="builtintype" id="2781126">float32</span><span class="op" id="2781133">(</span><span class="ident" id="2781134">v</span><span class="op" id="2781135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781138">case</span>&nbsp;<span class="num" id="2781143">8</span><span class="op" id="2781144">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781148">*</span><span class="op" id="2781149">(</span><span class="op" id="2781150">*</span><span class="builtintype" id="2781151">float64</span><span class="op" id="2781158">)</span><span class="op" id="2781159">(</span><span class="ident" id="2781160">unsafe</span><span class="op" id="2781166">.</span><span class="ident" id="2781167">Pointer</span><span class="op" id="2781174">(</span><span class="ident" id="2781175">ptr</span><span class="op" id="2781178">)</span><span class="op" id="2781179">)</span>&nbsp;<span class="op" id="2781181">=</span>&nbsp;<span class="ident" id="2781183">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781189">return</span>&nbsp;<span class="ident" id="2781196">Value</span><span class="op" id="2781201">{</span><span class="ident" id="2781202">typ</span><span class="op" id="2781205">,</span>&nbsp;<span class="ident" id="2781207">ptr</span><span class="op" id="2781210">,</span>&nbsp;<span class="ident" id="2781212">f</span>&nbsp;<span class="op" id="2781214">|</span>&nbsp;<span class="ident" id="2781216">flagIndir</span>&nbsp;<span class="op" id="2781226">|</span>&nbsp;<span class="ident" id="2781228">flag</span><span class="op" id="2781232">(</span><span class="ident" id="2781233">typ</span><span class="op" id="2781236">.</span><span class="ident" id="2781237">Kind</span><span class="op" id="2781241">(</span><span class="op" id="2781242">)</span><span class="op" id="2781243">)</span><span class="op" id="2781244">}</span><br>
<span class="lineno">2255</span><span class="op" id="2781246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2781249">//&nbsp;makeComplex&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;complex64),</span><br>
<span class="lineno"></span><span class="comment" id="2781336">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;complex64&nbsp;or&nbsp;complex128&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2781382">func</span>&nbsp;<span class="ident" id="2781387">makeComplex</span><span class="op" id="2781398">(</span><span class="ident" id="2781399">f</span>&nbsp;<span class="ident" id="2781401">flag</span><span class="op" id="2781405">,</span>&nbsp;<span class="ident" id="2781407">v</span>&nbsp;<span class="builtintype" id="2781409">complex128</span><span class="op" id="2781419">,</span>&nbsp;<span class="ident" id="2781421">t</span>&nbsp;<span class="ident" id="2781423">Type</span><span class="op" id="2781427">)</span>&nbsp;<span class="ident" id="2781429">Value</span>&nbsp;<span class="op" id="2781435">{</span><br>
<span class="lineno">2260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781438">typ</span>&nbsp;<span class="op" id="2781442">:=</span>&nbsp;<span class="ident" id="2781445">t</span><span class="op" id="2781446">.</span><span class="ident" id="2781447">common</span><span class="op" id="2781453">(</span><span class="op" id="2781454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781457">ptr</span>&nbsp;<span class="op" id="2781461">:=</span>&nbsp;<span class="ident" id="2781464">unsafe_New</span><span class="op" id="2781474">(</span><span class="ident" id="2781475">typ</span><span class="op" id="2781478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781481">switch</span>&nbsp;<span class="ident" id="2781488">typ</span><span class="op" id="2781491">.</span><span class="ident" id="2781492">size</span>&nbsp;<span class="op" id="2781497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781500">case</span>&nbsp;<span class="num" id="2781505">8</span><span class="op" id="2781506">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781510">*</span><span class="op" id="2781511">(</span><span class="op" id="2781512">*</span><span class="builtintype" id="2781513">complex64</span><span class="op" id="2781522">)</span><span class="op" id="2781523">(</span><span class="ident" id="2781524">unsafe</span><span class="op" id="2781530">.</span><span class="ident" id="2781531">Pointer</span><span class="op" id="2781538">(</span><span class="ident" id="2781539">ptr</span><span class="op" id="2781542">)</span><span class="op" id="2781543">)</span>&nbsp;<span class="op" id="2781545">=</span>&nbsp;<span class="builtintype" id="2781547">complex64</span><span class="op" id="2781556">(</span><span class="ident" id="2781557">v</span><span class="op" id="2781558">)</span><br>
<span class="lineno">2265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781561">case</span>&nbsp;<span class="num" id="2781566">16</span><span class="op" id="2781568">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781572">*</span><span class="op" id="2781573">(</span><span class="op" id="2781574">*</span><span class="builtintype" id="2781575">complex128</span><span class="op" id="2781585">)</span><span class="op" id="2781586">(</span><span class="ident" id="2781587">unsafe</span><span class="op" id="2781593">.</span><span class="ident" id="2781594">Pointer</span><span class="op" id="2781601">(</span><span class="ident" id="2781602">ptr</span><span class="op" id="2781605">)</span><span class="op" id="2781606">)</span>&nbsp;<span class="op" id="2781608">=</span>&nbsp;<span class="ident" id="2781610">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781616">return</span>&nbsp;<span class="ident" id="2781623">Value</span><span class="op" id="2781628">{</span><span class="ident" id="2781629">typ</span><span class="op" id="2781632">,</span>&nbsp;<span class="ident" id="2781634">ptr</span><span class="op" id="2781637">,</span>&nbsp;<span class="ident" id="2781639">f</span>&nbsp;<span class="op" id="2781641">|</span>&nbsp;<span class="ident" id="2781643">flagIndir</span>&nbsp;<span class="op" id="2781653">|</span>&nbsp;<span class="ident" id="2781655">flag</span><span class="op" id="2781659">(</span><span class="ident" id="2781660">typ</span><span class="op" id="2781663">.</span><span class="ident" id="2781664">Kind</span><span class="op" id="2781668">(</span><span class="op" id="2781669">)</span><span class="op" id="2781670">)</span><span class="op" id="2781671">}</span><br>
<span class="lineno"></span><span class="op" id="2781673">}</span><br>
<span class="lineno">2270</span><br>
<span class="lineno"></span><span class="keyword" id="2781676">func</span>&nbsp;<span class="ident" id="2781681">makeString</span><span class="op" id="2781691">(</span><span class="ident" id="2781692">f</span>&nbsp;<span class="ident" id="2781694">flag</span><span class="op" id="2781698">,</span>&nbsp;<span class="ident" id="2781700">v</span>&nbsp;<span class="builtintype" id="2781702">string</span><span class="op" id="2781708">,</span>&nbsp;<span class="ident" id="2781710">t</span>&nbsp;<span class="ident" id="2781712">Type</span><span class="op" id="2781716">)</span>&nbsp;<span class="ident" id="2781718">Value</span>&nbsp;<span class="op" id="2781724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781727">ret</span>&nbsp;<span class="op" id="2781731">:=</span>&nbsp;<span class="ident" id="2781734">New</span><span class="op" id="2781737">(</span><span class="ident" id="2781738">t</span><span class="op" id="2781739">)</span><span class="op" id="2781740">.</span><span class="ident" id="2781741">Elem</span><span class="op" id="2781745">(</span><span class="op" id="2781746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781749">ret</span><span class="op" id="2781752">.</span><span class="ident" id="2781753">SetString</span><span class="op" id="2781762">(</span><span class="ident" id="2781763">v</span><span class="op" id="2781764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781767">ret</span><span class="op" id="2781770">.</span><span class="ident" id="2781771">flag</span>&nbsp;<span class="op" id="2781776">=</span>&nbsp;<span class="ident" id="2781778">ret</span><span class="op" id="2781781">.</span><span class="ident" id="2781782">flag</span><span class="op" id="2781786">&amp;^</span><span class="ident" id="2781788">flagAddr</span>&nbsp;<span class="op" id="2781797">|</span>&nbsp;<span class="ident" id="2781799">f</span><br>
<span class="lineno">2275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781802">return</span>&nbsp;<span class="ident" id="2781809">ret</span><br>
<span class="lineno"></span><span class="op" id="2781813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2781816">func</span>&nbsp;<span class="ident" id="2781821">makeBytes</span><span class="op" id="2781830">(</span><span class="ident" id="2781831">f</span>&nbsp;<span class="ident" id="2781833">flag</span><span class="op" id="2781837">,</span>&nbsp;<span class="ident" id="2781839">v</span>&nbsp;<span class="op" id="2781841">[</span><span class="op" id="2781842">]</span><span class="builtintype" id="2781843">byte</span><span class="op" id="2781847">,</span>&nbsp;<span class="ident" id="2781849">t</span>&nbsp;<span class="ident" id="2781851">Type</span><span class="op" id="2781855">)</span>&nbsp;<span class="ident" id="2781857">Value</span>&nbsp;<span class="op" id="2781863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781866">ret</span>&nbsp;<span class="op" id="2781870">:=</span>&nbsp;<span class="ident" id="2781873">New</span><span class="op" id="2781876">(</span><span class="ident" id="2781877">t</span><span class="op" id="2781878">)</span><span class="op" id="2781879">.</span><span class="ident" id="2781880">Elem</span><span class="op" id="2781884">(</span><span class="op" id="2781885">)</span><br>
<span class="lineno">2280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781888">ret</span><span class="op" id="2781891">.</span><span class="ident" id="2781892">SetBytes</span><span class="op" id="2781900">(</span><span class="ident" id="2781901">v</span><span class="op" id="2781902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781905">ret</span><span class="op" id="2781908">.</span><span class="ident" id="2781909">flag</span>&nbsp;<span class="op" id="2781914">=</span>&nbsp;<span class="ident" id="2781916">ret</span><span class="op" id="2781919">.</span><span class="ident" id="2781920">flag</span><span class="op" id="2781924">&amp;^</span><span class="ident" id="2781926">flagAddr</span>&nbsp;<span class="op" id="2781935">|</span>&nbsp;<span class="ident" id="2781937">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781940">return</span>&nbsp;<span class="ident" id="2781947">ret</span><br>
<span class="lineno"></span><span class="op" id="2781951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2285</span><span class="keyword" id="2781954">func</span>&nbsp;<span class="ident" id="2781959">makeRunes</span><span class="op" id="2781968">(</span><span class="ident" id="2781969">f</span>&nbsp;<span class="ident" id="2781971">flag</span><span class="op" id="2781975">,</span>&nbsp;<span class="ident" id="2781977">v</span>&nbsp;<span class="op" id="2781979">[</span><span class="op" id="2781980">]</span><span class="builtintype" id="2781981">rune</span><span class="op" id="2781985">,</span>&nbsp;<span class="ident" id="2781987">t</span>&nbsp;<span class="ident" id="2781989">Type</span><span class="op" id="2781993">)</span>&nbsp;<span class="ident" id="2781995">Value</span>&nbsp;<span class="op" id="2782001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782004">ret</span>&nbsp;<span class="op" id="2782008">:=</span>&nbsp;<span class="ident" id="2782011">New</span><span class="op" id="2782014">(</span><span class="ident" id="2782015">t</span><span class="op" id="2782016">)</span><span class="op" id="2782017">.</span><span class="ident" id="2782018">Elem</span><span class="op" id="2782022">(</span><span class="op" id="2782023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782026">ret</span><span class="op" id="2782029">.</span><span class="ident" id="2782030">setRunes</span><span class="op" id="2782038">(</span><span class="ident" id="2782039">v</span><span class="op" id="2782040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782043">ret</span><span class="op" id="2782046">.</span><span class="ident" id="2782047">flag</span>&nbsp;<span class="op" id="2782052">=</span>&nbsp;<span class="ident" id="2782054">ret</span><span class="op" id="2782057">.</span><span class="ident" id="2782058">flag</span><span class="op" id="2782062">&amp;^</span><span class="ident" id="2782064">flagAddr</span>&nbsp;<span class="op" id="2782073">|</span>&nbsp;<span class="ident" id="2782075">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782078">return</span>&nbsp;<span class="ident" id="2782085">ret</span><br>
<span class="lineno">2290</span><span class="op" id="2782089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2782092">//&nbsp;These&nbsp;conversion&nbsp;functions&nbsp;are&nbsp;returned&nbsp;by&nbsp;convertOp</span><br>
<span class="lineno"></span><span class="comment" id="2782148">//&nbsp;for&nbsp;classes&nbsp;of&nbsp;conversions.&nbsp;For&nbsp;example,&nbsp;the&nbsp;first&nbsp;function,&nbsp;cvtInt,</span><br>
<span class="lineno"></span><span class="comment" id="2782220">//&nbsp;takes&nbsp;any&nbsp;value&nbsp;v&nbsp;of&nbsp;signed&nbsp;int&nbsp;type&nbsp;and&nbsp;returns&nbsp;the&nbsp;value&nbsp;converted</span><br>
<span class="lineno">2295</span><span class="comment" id="2782292">//&nbsp;to&nbsp;type&nbsp;t,&nbsp;where&nbsp;t&nbsp;is&nbsp;any&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2782351">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2782383">func</span>&nbsp;<span class="ident" id="2782388">cvtInt</span><span class="op" id="2782394">(</span><span class="ident" id="2782395">v</span>&nbsp;<span class="ident" id="2782397">Value</span><span class="op" id="2782402">,</span>&nbsp;<span class="ident" id="2782404">t</span>&nbsp;<span class="ident" id="2782406">Type</span><span class="op" id="2782410">)</span>&nbsp;<span class="ident" id="2782412">Value</span>&nbsp;<span class="op" id="2782418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782421">return</span>&nbsp;<span class="ident" id="2782428">makeInt</span><span class="op" id="2782435">(</span><span class="ident" id="2782436">v</span><span class="op" id="2782437">.</span><span class="ident" id="2782438">flag</span><span class="op" id="2782442">&amp;</span><span class="ident" id="2782443">flagRO</span><span class="op" id="2782449">,</span>&nbsp;<span class="ident" id="2782451">uint64</span><span class="op" id="2782457">(</span><span class="ident" id="2782458">v</span><span class="op" id="2782459">.</span><span class="ident" id="2782460">Int</span><span class="op" id="2782463">(</span><span class="op" id="2782464">)</span><span class="op" id="2782465">)</span><span class="op" id="2782466">,</span>&nbsp;<span class="ident" id="2782468">t</span><span class="op" id="2782469">)</span><br>
<span class="lineno">2300</span><span class="op" id="2782471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2782474">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2782507">func</span>&nbsp;<span class="ident" id="2782512">cvtUint</span><span class="op" id="2782519">(</span><span class="ident" id="2782520">v</span>&nbsp;<span class="ident" id="2782522">Value</span><span class="op" id="2782527">,</span>&nbsp;<span class="ident" id="2782529">t</span>&nbsp;<span class="ident" id="2782531">Type</span><span class="op" id="2782535">)</span>&nbsp;<span class="ident" id="2782537">Value</span>&nbsp;<span class="op" id="2782543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782546">return</span>&nbsp;<span class="ident" id="2782553">makeInt</span><span class="op" id="2782560">(</span><span class="ident" id="2782561">v</span><span class="op" id="2782562">.</span><span class="ident" id="2782563">flag</span><span class="op" id="2782567">&amp;</span><span class="ident" id="2782568">flagRO</span><span class="op" id="2782574">,</span>&nbsp;<span class="ident" id="2782576">v</span><span class="op" id="2782577">.</span><span class="ident" id="2782578">Uint</span><span class="op" id="2782582">(</span><span class="op" id="2782583">)</span><span class="op" id="2782584">,</span>&nbsp;<span class="ident" id="2782586">t</span><span class="op" id="2782587">)</span><br>
<span class="lineno">2305</span><span class="op" id="2782589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2782592">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2782623">func</span>&nbsp;<span class="ident" id="2782628">cvtFloatInt</span><span class="op" id="2782639">(</span><span class="ident" id="2782640">v</span>&nbsp;<span class="ident" id="2782642">Value</span><span class="op" id="2782647">,</span>&nbsp;<span class="ident" id="2782649">t</span>&nbsp;<span class="ident" id="2782651">Type</span><span class="op" id="2782655">)</span>&nbsp;<span class="ident" id="2782657">Value</span>&nbsp;<span class="op" id="2782663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782666">return</span>&nbsp;<span class="ident" id="2782673">makeInt</span><span class="op" id="2782680">(</span><span class="ident" id="2782681">v</span><span class="op" id="2782682">.</span><span class="ident" id="2782683">flag</span><span class="op" id="2782687">&amp;</span><span class="ident" id="2782688">flagRO</span><span class="op" id="2782694">,</span>&nbsp;<span class="ident" id="2782696">uint64</span><span class="op" id="2782702">(</span><span class="ident" id="2782703">int64</span><span class="op" id="2782708">(</span><span class="ident" id="2782709">v</span><span class="op" id="2782710">.</span><span class="ident" id="2782711">Float</span><span class="op" id="2782716">(</span><span class="op" id="2782717">)</span><span class="op" id="2782718">)</span><span class="op" id="2782719">)</span><span class="op" id="2782720">,</span>&nbsp;<span class="ident" id="2782722">t</span><span class="op" id="2782723">)</span><br>
<span class="lineno">2310</span><span class="op" id="2782725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2782728">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;uintXX</span><br>
<span class="lineno"></span><span class="keyword" id="2782760">func</span>&nbsp;<span class="ident" id="2782765">cvtFloatUint</span><span class="op" id="2782777">(</span><span class="ident" id="2782778">v</span>&nbsp;<span class="ident" id="2782780">Value</span><span class="op" id="2782785">,</span>&nbsp;<span class="ident" id="2782787">t</span>&nbsp;<span class="ident" id="2782789">Type</span><span class="op" id="2782793">)</span>&nbsp;<span class="ident" id="2782795">Value</span>&nbsp;<span class="op" id="2782801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782804">return</span>&nbsp;<span class="ident" id="2782811">makeInt</span><span class="op" id="2782818">(</span><span class="ident" id="2782819">v</span><span class="op" id="2782820">.</span><span class="ident" id="2782821">flag</span><span class="op" id="2782825">&amp;</span><span class="ident" id="2782826">flagRO</span><span class="op" id="2782832">,</span>&nbsp;<span class="ident" id="2782834">uint64</span><span class="op" id="2782840">(</span><span class="ident" id="2782841">v</span><span class="op" id="2782842">.</span><span class="ident" id="2782843">Float</span><span class="op" id="2782848">(</span><span class="op" id="2782849">)</span><span class="op" id="2782850">)</span><span class="op" id="2782851">,</span>&nbsp;<span class="ident" id="2782853">t</span><span class="op" id="2782854">)</span><br>
<span class="lineno">2315</span><span class="op" id="2782856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2782859">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2782890">func</span>&nbsp;<span class="ident" id="2782895">cvtIntFloat</span><span class="op" id="2782906">(</span><span class="ident" id="2782907">v</span>&nbsp;<span class="ident" id="2782909">Value</span><span class="op" id="2782914">,</span>&nbsp;<span class="ident" id="2782916">t</span>&nbsp;<span class="ident" id="2782918">Type</span><span class="op" id="2782922">)</span>&nbsp;<span class="ident" id="2782924">Value</span>&nbsp;<span class="op" id="2782930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782933">return</span>&nbsp;<span class="ident" id="2782940">makeFloat</span><span class="op" id="2782949">(</span><span class="ident" id="2782950">v</span><span class="op" id="2782951">.</span><span class="ident" id="2782952">flag</span><span class="op" id="2782956">&amp;</span><span class="ident" id="2782957">flagRO</span><span class="op" id="2782963">,</span>&nbsp;<span class="builtintype" id="2782965">float64</span><span class="op" id="2782972">(</span><span class="ident" id="2782973">v</span><span class="op" id="2782974">.</span><span class="ident" id="2782975">Int</span><span class="op" id="2782978">(</span><span class="op" id="2782979">)</span><span class="op" id="2782980">)</span><span class="op" id="2782981">,</span>&nbsp;<span class="ident" id="2782983">t</span><span class="op" id="2782984">)</span><br>
<span class="lineno">2320</span><span class="op" id="2782986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2782989">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2783021">func</span>&nbsp;<span class="ident" id="2783026">cvtUintFloat</span><span class="op" id="2783038">(</span><span class="ident" id="2783039">v</span>&nbsp;<span class="ident" id="2783041">Value</span><span class="op" id="2783046">,</span>&nbsp;<span class="ident" id="2783048">t</span>&nbsp;<span class="ident" id="2783050">Type</span><span class="op" id="2783054">)</span>&nbsp;<span class="ident" id="2783056">Value</span>&nbsp;<span class="op" id="2783062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783065">return</span>&nbsp;<span class="ident" id="2783072">makeFloat</span><span class="op" id="2783081">(</span><span class="ident" id="2783082">v</span><span class="op" id="2783083">.</span><span class="ident" id="2783084">flag</span><span class="op" id="2783088">&amp;</span><span class="ident" id="2783089">flagRO</span><span class="op" id="2783095">,</span>&nbsp;<span class="builtintype" id="2783097">float64</span><span class="op" id="2783104">(</span><span class="ident" id="2783105">v</span><span class="op" id="2783106">.</span><span class="ident" id="2783107">Uint</span><span class="op" id="2783111">(</span><span class="op" id="2783112">)</span><span class="op" id="2783113">)</span><span class="op" id="2783114">,</span>&nbsp;<span class="ident" id="2783116">t</span><span class="op" id="2783117">)</span><br>
<span class="lineno">2325</span><span class="op" id="2783119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2783122">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2783155">func</span>&nbsp;<span class="ident" id="2783160">cvtFloat</span><span class="op" id="2783168">(</span><span class="ident" id="2783169">v</span>&nbsp;<span class="ident" id="2783171">Value</span><span class="op" id="2783176">,</span>&nbsp;<span class="ident" id="2783178">t</span>&nbsp;<span class="ident" id="2783180">Type</span><span class="op" id="2783184">)</span>&nbsp;<span class="ident" id="2783186">Value</span>&nbsp;<span class="op" id="2783192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783195">return</span>&nbsp;<span class="ident" id="2783202">makeFloat</span><span class="op" id="2783211">(</span><span class="ident" id="2783212">v</span><span class="op" id="2783213">.</span><span class="ident" id="2783214">flag</span><span class="op" id="2783218">&amp;</span><span class="ident" id="2783219">flagRO</span><span class="op" id="2783225">,</span>&nbsp;<span class="ident" id="2783227">v</span><span class="op" id="2783228">.</span><span class="ident" id="2783229">Float</span><span class="op" id="2783234">(</span><span class="op" id="2783235">)</span><span class="op" id="2783236">,</span>&nbsp;<span class="ident" id="2783238">t</span><span class="op" id="2783239">)</span><br>
<span class="lineno">2330</span><span class="op" id="2783241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2783244">//&nbsp;convertOp:&nbsp;complexXX&nbsp;-&gt;&nbsp;complexXX</span><br>
<span class="lineno"></span><span class="keyword" id="2783281">func</span>&nbsp;<span class="ident" id="2783286">cvtComplex</span><span class="op" id="2783296">(</span><span class="ident" id="2783297">v</span>&nbsp;<span class="ident" id="2783299">Value</span><span class="op" id="2783304">,</span>&nbsp;<span class="ident" id="2783306">t</span>&nbsp;<span class="ident" id="2783308">Type</span><span class="op" id="2783312">)</span>&nbsp;<span class="ident" id="2783314">Value</span>&nbsp;<span class="op" id="2783320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783323">return</span>&nbsp;<span class="ident" id="2783330">makeComplex</span><span class="op" id="2783341">(</span><span class="ident" id="2783342">v</span><span class="op" id="2783343">.</span><span class="ident" id="2783344">flag</span><span class="op" id="2783348">&amp;</span><span class="ident" id="2783349">flagRO</span><span class="op" id="2783355">,</span>&nbsp;<span class="ident" id="2783357">v</span><span class="op" id="2783358">.</span><span class="ident" id="2783359">Complex</span><span class="op" id="2783366">(</span><span class="op" id="2783367">)</span><span class="op" id="2783368">,</span>&nbsp;<span class="ident" id="2783370">t</span><span class="op" id="2783371">)</span><br>
<span class="lineno">2335</span><span class="op" id="2783373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2783376">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2783406">func</span>&nbsp;<span class="ident" id="2783411">cvtIntString</span><span class="op" id="2783423">(</span><span class="ident" id="2783424">v</span>&nbsp;<span class="ident" id="2783426">Value</span><span class="op" id="2783431">,</span>&nbsp;<span class="ident" id="2783433">t</span>&nbsp;<span class="ident" id="2783435">Type</span><span class="op" id="2783439">)</span>&nbsp;<span class="ident" id="2783441">Value</span>&nbsp;<span class="op" id="2783447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783450">return</span>&nbsp;<span class="ident" id="2783457">makeString</span><span class="op" id="2783467">(</span><span class="ident" id="2783468">v</span><span class="op" id="2783469">.</span><span class="ident" id="2783470">flag</span><span class="op" id="2783474">&amp;</span><span class="ident" id="2783475">flagRO</span><span class="op" id="2783481">,</span>&nbsp;<span class="builtintype" id="2783483">string</span><span class="op" id="2783489">(</span><span class="ident" id="2783490">v</span><span class="op" id="2783491">.</span><span class="ident" id="2783492">Int</span><span class="op" id="2783495">(</span><span class="op" id="2783496">)</span><span class="op" id="2783497">)</span><span class="op" id="2783498">,</span>&nbsp;<span class="ident" id="2783500">t</span><span class="op" id="2783501">)</span><br>
<span class="lineno">2340</span><span class="op" id="2783503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2783506">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2783537">func</span>&nbsp;<span class="ident" id="2783542">cvtUintString</span><span class="op" id="2783555">(</span><span class="ident" id="2783556">v</span>&nbsp;<span class="ident" id="2783558">Value</span><span class="op" id="2783563">,</span>&nbsp;<span class="ident" id="2783565">t</span>&nbsp;<span class="ident" id="2783567">Type</span><span class="op" id="2783571">)</span>&nbsp;<span class="ident" id="2783573">Value</span>&nbsp;<span class="op" id="2783579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783582">return</span>&nbsp;<span class="ident" id="2783589">makeString</span><span class="op" id="2783599">(</span><span class="ident" id="2783600">v</span><span class="op" id="2783601">.</span><span class="ident" id="2783602">flag</span><span class="op" id="2783606">&amp;</span><span class="ident" id="2783607">flagRO</span><span class="op" id="2783613">,</span>&nbsp;<span class="builtintype" id="2783615">string</span><span class="op" id="2783621">(</span><span class="ident" id="2783622">v</span><span class="op" id="2783623">.</span><span class="ident" id="2783624">Uint</span><span class="op" id="2783628">(</span><span class="op" id="2783629">)</span><span class="op" id="2783630">)</span><span class="op" id="2783631">,</span>&nbsp;<span class="ident" id="2783633">t</span><span class="op" id="2783634">)</span><br>
<span class="lineno">2345</span><span class="op" id="2783636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2783639">//&nbsp;convertOp:&nbsp;[]byte&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2783670">func</span>&nbsp;<span class="ident" id="2783675">cvtBytesString</span><span class="op" id="2783689">(</span><span class="ident" id="2783690">v</span>&nbsp;<span class="ident" id="2783692">Value</span><span class="op" id="2783697">,</span>&nbsp;<span class="ident" id="2783699">t</span>&nbsp;<span class="ident" id="2783701">Type</span><span class="op" id="2783705">)</span>&nbsp;<span class="ident" id="2783707">Value</span>&nbsp;<span class="op" id="2783713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783716">return</span>&nbsp;<span class="ident" id="2783723">makeString</span><span class="op" id="2783733">(</span><span class="ident" id="2783734">v</span><span class="op" id="2783735">.</span><span class="ident" id="2783736">flag</span><span class="op" id="2783740">&amp;</span><span class="ident" id="2783741">flagRO</span><span class="op" id="2783747">,</span>&nbsp;<span class="builtintype" id="2783749">string</span><span class="op" id="2783755">(</span><span class="ident" id="2783756">v</span><span class="op" id="2783757">.</span><span class="ident" id="2783758">Bytes</span><span class="op" id="2783763">(</span><span class="op" id="2783764">)</span><span class="op" id="2783765">)</span><span class="op" id="2783766">,</span>&nbsp;<span class="ident" id="2783768">t</span><span class="op" id="2783769">)</span><br>
<span class="lineno">2350</span><span class="op" id="2783771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2783774">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]byte</span><br>
<span class="lineno"></span><span class="keyword" id="2783805">func</span>&nbsp;<span class="ident" id="2783810">cvtStringBytes</span><span class="op" id="2783824">(</span><span class="ident" id="2783825">v</span>&nbsp;<span class="ident" id="2783827">Value</span><span class="op" id="2783832">,</span>&nbsp;<span class="ident" id="2783834">t</span>&nbsp;<span class="ident" id="2783836">Type</span><span class="op" id="2783840">)</span>&nbsp;<span class="ident" id="2783842">Value</span>&nbsp;<span class="op" id="2783848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783851">return</span>&nbsp;<span class="ident" id="2783858">makeBytes</span><span class="op" id="2783867">(</span><span class="ident" id="2783868">v</span><span class="op" id="2783869">.</span><span class="ident" id="2783870">flag</span><span class="op" id="2783874">&amp;</span><span class="ident" id="2783875">flagRO</span><span class="op" id="2783881">,</span>&nbsp;<span class="op" id="2783883">[</span><span class="op" id="2783884">]</span><span class="builtintype" id="2783885">byte</span><span class="op" id="2783889">(</span><span class="ident" id="2783890">v</span><span class="op" id="2783891">.</span><span class="ident" id="2783892">String</span><span class="op" id="2783898">(</span><span class="op" id="2783899">)</span><span class="op" id="2783900">)</span><span class="op" id="2783901">,</span>&nbsp;<span class="ident" id="2783903">t</span><span class="op" id="2783904">)</span><br>
<span class="lineno">2355</span><span class="op" id="2783906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2783909">//&nbsp;convertOp:&nbsp;[]rune&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2783940">func</span>&nbsp;<span class="ident" id="2783945">cvtRunesString</span><span class="op" id="2783959">(</span><span class="ident" id="2783960">v</span>&nbsp;<span class="ident" id="2783962">Value</span><span class="op" id="2783967">,</span>&nbsp;<span class="ident" id="2783969">t</span>&nbsp;<span class="ident" id="2783971">Type</span><span class="op" id="2783975">)</span>&nbsp;<span class="ident" id="2783977">Value</span>&nbsp;<span class="op" id="2783983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783986">return</span>&nbsp;<span class="ident" id="2783993">makeString</span><span class="op" id="2784003">(</span><span class="ident" id="2784004">v</span><span class="op" id="2784005">.</span><span class="ident" id="2784006">flag</span><span class="op" id="2784010">&amp;</span><span class="ident" id="2784011">flagRO</span><span class="op" id="2784017">,</span>&nbsp;<span class="builtintype" id="2784019">string</span><span class="op" id="2784025">(</span><span class="ident" id="2784026">v</span><span class="op" id="2784027">.</span><span class="ident" id="2784028">runes</span><span class="op" id="2784033">(</span><span class="op" id="2784034">)</span><span class="op" id="2784035">)</span><span class="op" id="2784036">,</span>&nbsp;<span class="ident" id="2784038">t</span><span class="op" id="2784039">)</span><br>
<span class="lineno">2360</span><span class="op" id="2784041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2784044">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]rune</span><br>
<span class="lineno"></span><span class="keyword" id="2784075">func</span>&nbsp;<span class="ident" id="2784080">cvtStringRunes</span><span class="op" id="2784094">(</span><span class="ident" id="2784095">v</span>&nbsp;<span class="ident" id="2784097">Value</span><span class="op" id="2784102">,</span>&nbsp;<span class="ident" id="2784104">t</span>&nbsp;<span class="ident" id="2784106">Type</span><span class="op" id="2784110">)</span>&nbsp;<span class="ident" id="2784112">Value</span>&nbsp;<span class="op" id="2784118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784121">return</span>&nbsp;<span class="ident" id="2784128">makeRunes</span><span class="op" id="2784137">(</span><span class="ident" id="2784138">v</span><span class="op" id="2784139">.</span><span class="ident" id="2784140">flag</span><span class="op" id="2784144">&amp;</span><span class="ident" id="2784145">flagRO</span><span class="op" id="2784151">,</span>&nbsp;<span class="op" id="2784153">[</span><span class="op" id="2784154">]</span><span class="builtintype" id="2784155">rune</span><span class="op" id="2784159">(</span><span class="ident" id="2784160">v</span><span class="op" id="2784161">.</span><span class="ident" id="2784162">String</span><span class="op" id="2784168">(</span><span class="op" id="2784169">)</span><span class="op" id="2784170">)</span><span class="op" id="2784171">,</span>&nbsp;<span class="ident" id="2784173">t</span><span class="op" id="2784174">)</span><br>
<span class="lineno">2365</span><span class="op" id="2784176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2784179">//&nbsp;convertOp:&nbsp;direct&nbsp;copy</span><br>
<span class="lineno"></span><span class="keyword" id="2784205">func</span>&nbsp;<span class="ident" id="2784210">cvtDirect</span><span class="op" id="2784219">(</span><span class="ident" id="2784220">v</span>&nbsp;<span class="ident" id="2784222">Value</span><span class="op" id="2784227">,</span>&nbsp;<span class="ident" id="2784229">typ</span>&nbsp;<span class="ident" id="2784233">Type</span><span class="op" id="2784237">)</span>&nbsp;<span class="ident" id="2784239">Value</span>&nbsp;<span class="op" id="2784245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784248">f</span>&nbsp;<span class="op" id="2784250">:=</span>&nbsp;<span class="ident" id="2784253">v</span><span class="op" id="2784254">.</span><span class="ident" id="2784255">flag</span><br>
<span class="lineno">2370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784261">t</span>&nbsp;<span class="op" id="2784263">:=</span>&nbsp;<span class="ident" id="2784266">typ</span><span class="op" id="2784269">.</span><span class="ident" id="2784270">common</span><span class="op" id="2784276">(</span><span class="op" id="2784277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784280">ptr</span>&nbsp;<span class="op" id="2784284">:=</span>&nbsp;<span class="ident" id="2784287">v</span><span class="op" id="2784288">.</span><span class="ident" id="2784289">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784294">if</span>&nbsp;<span class="ident" id="2784297">f</span><span class="op" id="2784298">&amp;</span><span class="ident" id="2784299">flagAddr</span>&nbsp;<span class="op" id="2784308">!=</span>&nbsp;<span class="num" id="2784311">0</span>&nbsp;<span class="op" id="2784313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2784317">//&nbsp;indirect,&nbsp;mutable&nbsp;word&nbsp;-&nbsp;make&nbsp;a&nbsp;copy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784359">c</span>&nbsp;<span class="op" id="2784361">:=</span>&nbsp;<span class="ident" id="2784364">unsafe_New</span><span class="op" id="2784374">(</span><span class="ident" id="2784375">t</span><span class="op" id="2784376">)</span><br>
<span class="lineno">2375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784380">memmove</span><span class="op" id="2784387">(</span><span class="ident" id="2784388">c</span><span class="op" id="2784389">,</span>&nbsp;<span class="ident" id="2784391">ptr</span><span class="op" id="2784394">,</span>&nbsp;<span class="ident" id="2784396">t</span><span class="op" id="2784397">.</span><span class="ident" id="2784398">size</span><span class="op" id="2784402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784406">ptr</span>&nbsp;<span class="op" id="2784410">=</span>&nbsp;<span class="ident" id="2784412">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784416">f</span>&nbsp;<span class="op" id="2784418">&amp;^=</span>&nbsp;<span class="ident" id="2784422">flagAddr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2784432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784435">return</span>&nbsp;<span class="ident" id="2784442">Value</span><span class="op" id="2784447">{</span><span class="ident" id="2784448">t</span><span class="op" id="2784449">,</span>&nbsp;<span class="ident" id="2784451">ptr</span><span class="op" id="2784454">,</span>&nbsp;<span class="ident" id="2784456">v</span><span class="op" id="2784457">.</span><span class="ident" id="2784458">flag</span><span class="op" id="2784462">&amp;</span><span class="ident" id="2784463">flagRO</span>&nbsp;<span class="op" id="2784470">|</span>&nbsp;<span class="ident" id="2784472">f</span><span class="op" id="2784473">}</span>&nbsp;<span class="comment" id="2784475">//&nbsp;v.flag&amp;flagRO|f&nbsp;==&nbsp;f?</span><br>
<span class="lineno">2380</span><span class="op" id="2784500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2784503">//&nbsp;convertOp:&nbsp;concrete&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno"></span><span class="keyword" id="2784539">func</span>&nbsp;<span class="ident" id="2784544">cvtT2I</span><span class="op" id="2784550">(</span><span class="ident" id="2784551">v</span>&nbsp;<span class="ident" id="2784553">Value</span><span class="op" id="2784558">,</span>&nbsp;<span class="ident" id="2784560">typ</span>&nbsp;<span class="ident" id="2784564">Type</span><span class="op" id="2784568">)</span>&nbsp;<span class="ident" id="2784570">Value</span>&nbsp;<span class="op" id="2784576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784579">target</span>&nbsp;<span class="op" id="2784586">:=</span>&nbsp;<span class="ident" id="2784589">unsafe_New</span><span class="op" id="2784599">(</span><span class="ident" id="2784600">typ</span><span class="op" id="2784603">.</span><span class="ident" id="2784604">common</span><span class="op" id="2784610">(</span><span class="op" id="2784611">)</span><span class="op" id="2784612">)</span><br>
<span class="lineno">2385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784615">x</span>&nbsp;<span class="op" id="2784617">:=</span>&nbsp;<span class="ident" id="2784620">valueInterface</span><span class="op" id="2784634">(</span><span class="ident" id="2784635">v</span><span class="op" id="2784636">,</span>&nbsp;<span class="builtintype" id="2784638">false</span><span class="op" id="2784643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784646">if</span>&nbsp;<span class="ident" id="2784649">typ</span><span class="op" id="2784652">.</span><span class="ident" id="2784653">NumMethod</span><span class="op" id="2784662">(</span><span class="op" id="2784663">)</span>&nbsp;<span class="op" id="2784665">==</span>&nbsp;<span class="num" id="2784668">0</span>&nbsp;<span class="op" id="2784670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2784674">*</span><span class="op" id="2784675">(</span><span class="op" id="2784676">*</span><span class="keyword" id="2784677">interface</span><span class="op" id="2784686">{</span><span class="op" id="2784687">}</span><span class="op" id="2784688">)</span><span class="op" id="2784689">(</span><span class="ident" id="2784690">target</span><span class="op" id="2784696">)</span>&nbsp;<span class="op" id="2784698">=</span>&nbsp;<span class="ident" id="2784700">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2784703">}</span>&nbsp;<span class="keyword" id="2784705">else</span>&nbsp;<span class="op" id="2784710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784714">ifaceE2I</span><span class="op" id="2784722">(</span><span class="ident" id="2784723">typ</span><span class="op" id="2784726">.</span><span class="op" id="2784727">(</span><span class="op" id="2784728">*</span><span class="ident" id="2784729">rtype</span><span class="op" id="2784734">)</span><span class="op" id="2784735">,</span>&nbsp;<span class="ident" id="2784737">x</span><span class="op" id="2784738">,</span>&nbsp;<span class="ident" id="2784740">target</span><span class="op" id="2784746">)</span><br>
<span class="lineno">2390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2784749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784752">return</span>&nbsp;<span class="ident" id="2784759">Value</span><span class="op" id="2784764">{</span><span class="ident" id="2784765">typ</span><span class="op" id="2784768">.</span><span class="ident" id="2784769">common</span><span class="op" id="2784775">(</span><span class="op" id="2784776">)</span><span class="op" id="2784777">,</span>&nbsp;<span class="ident" id="2784779">target</span><span class="op" id="2784785">,</span>&nbsp;<span class="ident" id="2784787">v</span><span class="op" id="2784788">.</span><span class="ident" id="2784789">flag</span><span class="op" id="2784793">&amp;</span><span class="ident" id="2784794">flagRO</span>&nbsp;<span class="op" id="2784801">|</span>&nbsp;<span class="ident" id="2784803">flagIndir</span>&nbsp;<span class="op" id="2784813">|</span>&nbsp;<span class="ident" id="2784815">flag</span><span class="op" id="2784819">(</span><span class="ident" id="2784820">Interface</span><span class="op" id="2784829">)</span><span class="op" id="2784830">}</span><br>
<span class="lineno"></span><span class="op" id="2784832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2784835">//&nbsp;convertOp:&nbsp;interface&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno">2395</span><span class="keyword" id="2784872">func</span>&nbsp;<span class="ident" id="2784877">cvtI2I</span><span class="op" id="2784883">(</span><span class="ident" id="2784884">v</span>&nbsp;<span class="ident" id="2784886">Value</span><span class="op" id="2784891">,</span>&nbsp;<span class="ident" id="2784893">typ</span>&nbsp;<span class="ident" id="2784897">Type</span><span class="op" id="2784901">)</span>&nbsp;<span class="ident" id="2784903">Value</span>&nbsp;<span class="op" id="2784909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784912">if</span>&nbsp;<span class="ident" id="2784915">v</span><span class="op" id="2784916">.</span><span class="ident" id="2784917">IsNil</span><span class="op" id="2784922">(</span><span class="op" id="2784923">)</span>&nbsp;<span class="op" id="2784925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784929">ret</span>&nbsp;<span class="op" id="2784933">:=</span>&nbsp;<span class="ident" id="2784936">Zero</span><span class="op" id="2784940">(</span><span class="ident" id="2784941">typ</span><span class="op" id="2784944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784948">ret</span><span class="op" id="2784951">.</span><span class="ident" id="2784952">flag</span>&nbsp;<span class="op" id="2784957">|=</span>&nbsp;<span class="ident" id="2784960">v</span><span class="op" id="2784961">.</span><span class="ident" id="2784962">flag</span>&nbsp;<span class="op" id="2784967">&amp;</span>&nbsp;<span class="ident" id="2784969">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784978">return</span>&nbsp;<span class="ident" id="2784985">ret</span><br>
<span class="lineno">2400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2784990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784993">return</span>&nbsp;<span class="ident" id="2785000">cvtT2I</span><span class="op" id="2785006">(</span><span class="ident" id="2785007">v</span><span class="op" id="2785008">.</span><span class="ident" id="2785009">Elem</span><span class="op" id="2785013">(</span><span class="op" id="2785014">)</span><span class="op" id="2785015">,</span>&nbsp;<span class="ident" id="2785017">typ</span><span class="op" id="2785020">)</span><br>
<span class="lineno"></span><span class="op" id="2785022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2785025">//&nbsp;implemented&nbsp;in&nbsp;../runtime</span><br>
<span class="lineno">2405</span><span class="keyword" id="2785054">func</span>&nbsp;<span class="ident" id="2785059">chancap</span><span class="op" id="2785066">(</span><span class="ident" id="2785067">ch</span>&nbsp;<span class="ident" id="2785070">unsafe</span><span class="op" id="2785076">.</span><span class="ident" id="2785077">Pointer</span><span class="op" id="2785084">)</span>&nbsp;<span class="builtintype" id="2785086">int</span><br>
<span class="lineno"></span><span class="keyword" id="2785090">func</span>&nbsp;<span class="ident" id="2785095">chanclose</span><span class="op" id="2785104">(</span><span class="ident" id="2785105">ch</span>&nbsp;<span class="ident" id="2785108">unsafe</span><span class="op" id="2785114">.</span><span class="ident" id="2785115">Pointer</span><span class="op" id="2785122">)</span><br>
<span class="lineno"></span><span class="keyword" id="2785124">func</span>&nbsp;<span class="ident" id="2785129">chanlen</span><span class="op" id="2785136">(</span><span class="ident" id="2785137">ch</span>&nbsp;<span class="ident" id="2785140">unsafe</span><span class="op" id="2785146">.</span><span class="ident" id="2785147">Pointer</span><span class="op" id="2785154">)</span>&nbsp;<span class="builtintype" id="2785156">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2785161">//go:noescape</span><br>
<span class="lineno">2410</span><span class="keyword" id="2785175">func</span>&nbsp;<span class="ident" id="2785180">chanrecv</span><span class="op" id="2785188">(</span><span class="ident" id="2785189">t</span>&nbsp;<span class="op" id="2785191">*</span><span class="ident" id="2785192">rtype</span><span class="op" id="2785197">,</span>&nbsp;<span class="ident" id="2785199">ch</span>&nbsp;<span class="ident" id="2785202">unsafe</span><span class="op" id="2785208">.</span><span class="ident" id="2785209">Pointer</span><span class="op" id="2785216">,</span>&nbsp;<span class="ident" id="2785218">nb</span>&nbsp;<span class="builtintype" id="2785221">bool</span><span class="op" id="2785225">,</span>&nbsp;<span class="ident" id="2785227">val</span>&nbsp;<span class="ident" id="2785231">unsafe</span><span class="op" id="2785237">.</span><span class="ident" id="2785238">Pointer</span><span class="op" id="2785245">)</span>&nbsp;<span class="op" id="2785247">(</span><span class="ident" id="2785248">selected</span><span class="op" id="2785256">,</span>&nbsp;<span class="ident" id="2785258">received</span>&nbsp;<span class="builtintype" id="2785267">bool</span><span class="op" id="2785271">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2785274">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2785288">func</span>&nbsp;<span class="ident" id="2785293">chansend</span><span class="op" id="2785301">(</span><span class="ident" id="2785302">t</span>&nbsp;<span class="op" id="2785304">*</span><span class="ident" id="2785305">rtype</span><span class="op" id="2785310">,</span>&nbsp;<span class="ident" id="2785312">ch</span>&nbsp;<span class="ident" id="2785315">unsafe</span><span class="op" id="2785321">.</span><span class="ident" id="2785322">Pointer</span><span class="op" id="2785329">,</span>&nbsp;<span class="ident" id="2785331">val</span>&nbsp;<span class="ident" id="2785335">unsafe</span><span class="op" id="2785341">.</span><span class="ident" id="2785342">Pointer</span><span class="op" id="2785349">,</span>&nbsp;<span class="ident" id="2785351">nb</span>&nbsp;<span class="builtintype" id="2785354">bool</span><span class="op" id="2785358">)</span>&nbsp;<span class="builtintype" id="2785360">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">2415</span><span class="keyword" id="2785366">func</span>&nbsp;<span class="ident" id="2785371">makechan</span><span class="op" id="2785379">(</span><span class="ident" id="2785380">typ</span>&nbsp;<span class="op" id="2785384">*</span><span class="ident" id="2785385">rtype</span><span class="op" id="2785390">,</span>&nbsp;<span class="ident" id="2785392">size</span>&nbsp;<span class="ident" id="2785397">uint64</span><span class="op" id="2785403">)</span>&nbsp;<span class="op" id="2785405">(</span><span class="ident" id="2785406">ch</span>&nbsp;<span class="ident" id="2785409">unsafe</span><span class="op" id="2785415">.</span><span class="ident" id="2785416">Pointer</span><span class="op" id="2785423">)</span><br>
<span class="lineno"></span><span class="keyword" id="2785425">func</span>&nbsp;<span class="ident" id="2785430">makemap</span><span class="op" id="2785437">(</span><span class="ident" id="2785438">t</span>&nbsp;<span class="op" id="2785440">*</span><span class="ident" id="2785441">rtype</span><span class="op" id="2785446">)</span>&nbsp;<span class="op" id="2785448">(</span><span class="ident" id="2785449">m</span>&nbsp;<span class="ident" id="2785451">unsafe</span><span class="op" id="2785457">.</span><span class="ident" id="2785458">Pointer</span><span class="op" id="2785465">)</span><br>
<span class="lineno"></span><span class="keyword" id="2785467">func</span>&nbsp;<span class="ident" id="2785472">mapaccess</span><span class="op" id="2785481">(</span><span class="ident" id="2785482">t</span>&nbsp;<span class="op" id="2785484">*</span><span class="ident" id="2785485">rtype</span><span class="op" id="2785490">,</span>&nbsp;<span class="ident" id="2785492">m</span>&nbsp;<span class="ident" id="2785494">unsafe</span><span class="op" id="2785500">.</span><span class="ident" id="2785501">Pointer</span><span class="op" id="2785508">,</span>&nbsp;<span class="ident" id="2785510">key</span>&nbsp;<span class="ident" id="2785514">unsafe</span><span class="op" id="2785520">.</span><span class="ident" id="2785521">Pointer</span><span class="op" id="2785528">)</span>&nbsp;<span class="op" id="2785530">(</span><span class="ident" id="2785531">val</span>&nbsp;<span class="ident" id="2785535">unsafe</span><span class="op" id="2785541">.</span><span class="ident" id="2785542">Pointer</span><span class="op" id="2785549">)</span><br>
<span class="lineno"></span><span class="keyword" id="2785551">func</span>&nbsp;<span class="ident" id="2785556">mapassign</span><span class="op" id="2785565">(</span><span class="ident" id="2785566">t</span>&nbsp;<span class="op" id="2785568">*</span><span class="ident" id="2785569">rtype</span><span class="op" id="2785574">,</span>&nbsp;<span class="ident" id="2785576">m</span>&nbsp;<span class="ident" id="2785578">unsafe</span><span class="op" id="2785584">.</span><span class="ident" id="2785585">Pointer</span><span class="op" id="2785592">,</span>&nbsp;<span class="ident" id="2785594">key</span><span class="op" id="2785597">,</span>&nbsp;<span class="ident" id="2785599">val</span>&nbsp;<span class="ident" id="2785603">unsafe</span><span class="op" id="2785609">.</span><span class="ident" id="2785610">Pointer</span><span class="op" id="2785617">)</span><br>
<span class="lineno"></span><span class="keyword" id="2785619">func</span>&nbsp;<span class="ident" id="2785624">mapdelete</span><span class="op" id="2785633">(</span><span class="ident" id="2785634">t</span>&nbsp;<span class="op" id="2785636">*</span><span class="ident" id="2785637">rtype</span><span class="op" id="2785642">,</span>&nbsp;<span class="ident" id="2785644">m</span>&nbsp;<span class="ident" id="2785646">unsafe</span><span class="op" id="2785652">.</span><span class="ident" id="2785653">Pointer</span><span class="op" id="2785660">,</span>&nbsp;<span class="ident" id="2785662">key</span>&nbsp;<span class="ident" id="2785666">unsafe</span><span class="op" id="2785672">.</span><span class="ident" id="2785673">Pointer</span><span class="op" id="2785680">)</span><br>
<span class="lineno">2420</span><span class="keyword" id="2785682">func</span>&nbsp;<span class="ident" id="2785687">mapiterinit</span><span class="op" id="2785698">(</span><span class="ident" id="2785699">t</span>&nbsp;<span class="op" id="2785701">*</span><span class="ident" id="2785702">rtype</span><span class="op" id="2785707">,</span>&nbsp;<span class="ident" id="2785709">m</span>&nbsp;<span class="ident" id="2785711">unsafe</span><span class="op" id="2785717">.</span><span class="ident" id="2785718">Pointer</span><span class="op" id="2785725">)</span>&nbsp;<span class="ident" id="2785727">unsafe</span><span class="op" id="2785733">.</span><span class="ident" id="2785734">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2785742">func</span>&nbsp;<span class="ident" id="2785747">mapiterkey</span><span class="op" id="2785757">(</span><span class="ident" id="2785758">it</span>&nbsp;<span class="ident" id="2785761">unsafe</span><span class="op" id="2785767">.</span><span class="ident" id="2785768">Pointer</span><span class="op" id="2785775">)</span>&nbsp;<span class="op" id="2785777">(</span><span class="ident" id="2785778">key</span>&nbsp;<span class="ident" id="2785782">unsafe</span><span class="op" id="2785788">.</span><span class="ident" id="2785789">Pointer</span><span class="op" id="2785796">)</span><br>
<span class="lineno"></span><span class="keyword" id="2785798">func</span>&nbsp;<span class="ident" id="2785803">mapiternext</span><span class="op" id="2785814">(</span><span class="ident" id="2785815">it</span>&nbsp;<span class="ident" id="2785818">unsafe</span><span class="op" id="2785824">.</span><span class="ident" id="2785825">Pointer</span><span class="op" id="2785832">)</span><br>
<span class="lineno"></span><span class="keyword" id="2785834">func</span>&nbsp;<span class="ident" id="2785839">maplen</span><span class="op" id="2785845">(</span><span class="ident" id="2785846">m</span>&nbsp;<span class="ident" id="2785848">unsafe</span><span class="op" id="2785854">.</span><span class="ident" id="2785855">Pointer</span><span class="op" id="2785862">)</span>&nbsp;<span class="builtintype" id="2785864">int</span><br>
<span class="lineno"></span><span class="keyword" id="2785868">func</span>&nbsp;<span class="ident" id="2785873">call</span><span class="op" id="2785877">(</span><span class="ident" id="2785878">fn</span><span class="op" id="2785880">,</span>&nbsp;<span class="ident" id="2785882">arg</span>&nbsp;<span class="ident" id="2785886">unsafe</span><span class="op" id="2785892">.</span><span class="ident" id="2785893">Pointer</span><span class="op" id="2785900">,</span>&nbsp;<span class="ident" id="2785902">n</span>&nbsp;<span class="builtintype" id="2785904">uint32</span><span class="op" id="2785910">,</span>&nbsp;<span class="ident" id="2785912">retoffset</span>&nbsp;<span class="builtintype" id="2785922">uint32</span><span class="op" id="2785928">)</span><br>
<span class="lineno">2425</span><br>
<span class="lineno"></span><span class="keyword" id="2785931">func</span>&nbsp;<span class="ident" id="2785936">ifaceE2I</span><span class="op" id="2785944">(</span><span class="ident" id="2785945">t</span>&nbsp;<span class="op" id="2785947">*</span><span class="ident" id="2785948">rtype</span><span class="op" id="2785953">,</span>&nbsp;<span class="ident" id="2785955">src</span>&nbsp;<span class="keyword" id="2785959">interface</span><span class="op" id="2785968">{</span><span class="op" id="2785969">}</span><span class="op" id="2785970">,</span>&nbsp;<span class="ident" id="2785972">dst</span>&nbsp;<span class="ident" id="2785976">unsafe</span><span class="op" id="2785982">.</span><span class="ident" id="2785983">Pointer</span><span class="op" id="2785990">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2785993">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2786007">func</span>&nbsp;<span class="ident" id="2786012">memmove</span><span class="op" id="2786019">(</span><span class="ident" id="2786020">adst</span><span class="op" id="2786024">,</span>&nbsp;<span class="ident" id="2786026">asrc</span>&nbsp;<span class="ident" id="2786031">unsafe</span><span class="op" id="2786037">.</span><span class="ident" id="2786038">Pointer</span><span class="op" id="2786045">,</span>&nbsp;<span class="ident" id="2786047">n</span>&nbsp;<span class="builtintype" id="2786049">uintptr</span><span class="op" id="2786056">)</span><br>
<span class="lineno">2430</span><br>
<span class="lineno"></span><span class="comment" id="2786059">//&nbsp;Dummy&nbsp;annotation&nbsp;marking&nbsp;that&nbsp;the&nbsp;value&nbsp;x&nbsp;escapes,</span><br>
<span class="lineno"></span><span class="comment" id="2786113">//&nbsp;for&nbsp;use&nbsp;in&nbsp;cases&nbsp;where&nbsp;the&nbsp;reflect&nbsp;code&nbsp;is&nbsp;so&nbsp;clever&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2786174">//&nbsp;the&nbsp;compiler&nbsp;cannot&nbsp;follow.</span><br>
<span class="lineno"></span><span class="keyword" id="2786205">func</span>&nbsp;<span class="ident" id="2786210">escapes</span><span class="op" id="2786217">(</span><span class="ident" id="2786218">x</span>&nbsp;<span class="keyword" id="2786220">interface</span><span class="op" id="2786229">{</span><span class="op" id="2786230">}</span><span class="op" id="2786231">)</span>&nbsp;<span class="op" id="2786233">{</span><br>
<span class="lineno">2435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786236">if</span>&nbsp;<span class="ident" id="2786239">dummy</span><span class="op" id="2786244">.</span><span class="ident" id="2786245">b</span>&nbsp;<span class="op" id="2786247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2786251">dummy</span><span class="op" id="2786256">.</span><span class="ident" id="2786257">x</span>&nbsp;<span class="op" id="2786259">=</span>&nbsp;<span class="ident" id="2786261">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2786264">}</span><br>
<span class="lineno"></span><span class="op" id="2786266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2440</span><span class="keyword" id="2786269">var</span>&nbsp;<span class="ident" id="2786273">dummy</span>&nbsp;<span class="keyword" id="2786279">struct</span>&nbsp;<span class="op" id="2786286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2786289">b</span>&nbsp;<span class="builtintype" id="2786291">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2786297">x</span>&nbsp;<span class="keyword" id="2786299">interface</span><span class="op" id="2786308">{</span><span class="op" id="2786309">}</span><br>
<span class="lineno"></span><span class="op" id="2786311">}</span>
</div>
</body>
</html>
