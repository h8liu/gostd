<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html" class="current">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3358121">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3358177">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3358231">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3358282">package</span>&nbsp;<span class="ident" id="3358290">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3358295">import</span>&nbsp;<span class="op" id="3358302">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3358305">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3358311">&#34;syscall&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3358321">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3358324">func</span>&nbsp;<span class="ident" id="3358329">setIPv4MulticastInterface</span><span class="op" id="3358354">(</span><span class="ident" id="3358355">fd</span>&nbsp;<span class="op" id="3358358">*</span><span class="ident" id="3358359">netFD</span><span class="op" id="3358364">,</span>&nbsp;<span class="ident" id="3358366">ifi</span>&nbsp;<span class="op" id="3358370">*</span><span class="ident" id="3358371">Interface</span><span class="op" id="3358380">)</span>&nbsp;<span class="builtintype" id="3358382">error</span>&nbsp;<span class="op" id="3358388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358391">var</span>&nbsp;<span class="ident" id="3358395">v</span>&nbsp;<span class="builtintype" id="3358397">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358404">if</span>&nbsp;<span class="ident" id="3358407">ifi</span>&nbsp;<span class="op" id="3358411">!=</span>&nbsp;<span class="builtintype" id="3358414">nil</span>&nbsp;<span class="op" id="3358418">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3358422">v</span>&nbsp;<span class="op" id="3358424">=</span>&nbsp;<span class="builtintype" id="3358426">int32</span><span class="op" id="3358431">(</span><span class="ident" id="3358432">ifi</span><span class="op" id="3358435">.</span><span class="ident" id="3358436">Index</span><span class="op" id="3358441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3358444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3358447">mreq</span>&nbsp;<span class="op" id="3358452">:=</span>&nbsp;<span class="op" id="3358455">&amp;</span><span class="ident" id="3358456">syscall</span><span class="op" id="3358463">.</span><span class="ident" id="3358464">IPMreqn</span><span class="op" id="3358471">{</span><span class="ident" id="3358472">Ifindex</span><span class="op" id="3358479">:</span>&nbsp;<span class="ident" id="3358481">v</span><span class="op" id="3358482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358485">if</span>&nbsp;<span class="ident" id="3358488">err</span>&nbsp;<span class="op" id="3358492">:=</span>&nbsp;<span class="ident" id="3358495">fd</span><span class="op" id="3358497">.</span><span class="ident" id="3358498">incref</span><span class="op" id="3358504">(</span><span class="op" id="3358505">)</span><span class="op" id="3358506">;</span>&nbsp;<span class="ident" id="3358508">err</span>&nbsp;<span class="op" id="3358512">!=</span>&nbsp;<span class="builtintype" id="3358515">nil</span>&nbsp;<span class="op" id="3358519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358523">return</span>&nbsp;<span class="ident" id="3358530">err</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3358535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358538">defer</span>&nbsp;<span class="ident" id="3358544">fd</span><span class="op" id="3358546">.</span><span class="ident" id="3358547">decref</span><span class="op" id="3358553">(</span><span class="op" id="3358554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358557">return</span>&nbsp;<span class="ident" id="3358564">os</span><span class="op" id="3358566">.</span><span class="ident" id="3358567">NewSyscallError</span><span class="op" id="3358582">(</span><span class="string" id="3358583">&#34;setsockopt&#34;</span><span class="op" id="3358595">,</span>&nbsp;<span class="ident" id="3358597">syscall</span><span class="op" id="3358604">.</span><span class="ident" id="3358605">SetsockoptIPMreqn</span><span class="op" id="3358622">(</span><span class="ident" id="3358623">fd</span><span class="op" id="3358625">.</span><span class="ident" id="3358626">sysfd</span><span class="op" id="3358631">,</span>&nbsp;<span class="ident" id="3358633">syscall</span><span class="op" id="3358640">.</span><span class="ident" id="3358641">IPPROTO_IP</span><span class="op" id="3358651">,</span>&nbsp;<span class="ident" id="3358653">syscall</span><span class="op" id="3358660">.</span><span class="ident" id="3358661">IP_MULTICAST_IF</span><span class="op" id="3358676">,</span>&nbsp;<span class="ident" id="3358678">mreq</span><span class="op" id="3358682">)</span><span class="op" id="3358683">)</span><br>
<span class="lineno"></span><span class="op" id="3358685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="3358688">func</span>&nbsp;<span class="ident" id="3358693">setIPv4MulticastLoopback</span><span class="op" id="3358717">(</span><span class="ident" id="3358718">fd</span>&nbsp;<span class="op" id="3358721">*</span><span class="ident" id="3358722">netFD</span><span class="op" id="3358727">,</span>&nbsp;<span class="ident" id="3358729">v</span>&nbsp;<span class="builtintype" id="3358731">bool</span><span class="op" id="3358735">)</span>&nbsp;<span class="builtintype" id="3358737">error</span>&nbsp;<span class="op" id="3358743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358746">if</span>&nbsp;<span class="ident" id="3358749">err</span>&nbsp;<span class="op" id="3358753">:=</span>&nbsp;<span class="ident" id="3358756">fd</span><span class="op" id="3358758">.</span><span class="ident" id="3358759">incref</span><span class="op" id="3358765">(</span><span class="op" id="3358766">)</span><span class="op" id="3358767">;</span>&nbsp;<span class="ident" id="3358769">err</span>&nbsp;<span class="op" id="3358773">!=</span>&nbsp;<span class="builtintype" id="3358776">nil</span>&nbsp;<span class="op" id="3358780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358784">return</span>&nbsp;<span class="ident" id="3358791">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3358796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358799">defer</span>&nbsp;<span class="ident" id="3358805">fd</span><span class="op" id="3358807">.</span><span class="ident" id="3358808">decref</span><span class="op" id="3358814">(</span><span class="op" id="3358815">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358818">return</span>&nbsp;<span class="ident" id="3358825">os</span><span class="op" id="3358827">.</span><span class="ident" id="3358828">NewSyscallError</span><span class="op" id="3358843">(</span><span class="string" id="3358844">&#34;setsockopt&#34;</span><span class="op" id="3358856">,</span>&nbsp;<span class="ident" id="3358858">syscall</span><span class="op" id="3358865">.</span><span class="ident" id="3358866">SetsockoptInt</span><span class="op" id="3358879">(</span><span class="ident" id="3358880">fd</span><span class="op" id="3358882">.</span><span class="ident" id="3358883">sysfd</span><span class="op" id="3358888">,</span>&nbsp;<span class="ident" id="3358890">syscall</span><span class="op" id="3358897">.</span><span class="ident" id="3358898">IPPROTO_IP</span><span class="op" id="3358908">,</span>&nbsp;<span class="ident" id="3358910">syscall</span><span class="op" id="3358917">.</span><span class="ident" id="3358918">IP_MULTICAST_LOOP</span><span class="op" id="3358935">,</span>&nbsp;<span class="ident" id="3358937">boolint</span><span class="op" id="3358944">(</span><span class="ident" id="3358945">v</span><span class="op" id="3358946">)</span><span class="op" id="3358947">)</span><span class="op" id="3358948">)</span><br>
<span class="lineno"></span><span class="op" id="3358950">}</span>
</div>
</body>
</html>
