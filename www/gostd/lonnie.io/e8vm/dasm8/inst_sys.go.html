<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/dasm8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/dasm.go.html">dasm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/line.go.html">line.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/reg.go.html">reg.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="3699165">package</span>&nbsp;<span class="ident" id="3699173">dasm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3699180">import</span>&nbsp;<span class="op" id="3699187">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3699190">&#34;fmt&#34;</span><br>
<span class="lineno">5</span><span class="op" id="3699196">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3699199">var</span>&nbsp;<span class="op" id="3699203">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699206">opSysMap</span>&nbsp;<span class="op" id="3699215">=</span>&nbsp;<span class="keyword" id="3699217">map</span><span class="op" id="3699220">[</span><span class="builtintype" id="3699221">uint32</span><span class="op" id="3699227">]</span><span class="builtintype" id="3699228">string</span><span class="op" id="3699234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="3699238">64</span><span class="op" id="3699240">:</span>&nbsp;<span class="string" id="3699242">&#34;halt&#34;</span><span class="op" id="3699248">,</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="3699252">65</span><span class="op" id="3699254">:</span>&nbsp;<span class="string" id="3699256">&#34;syscall&#34;</span><span class="op" id="3699265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="3699269">66</span><span class="op" id="3699271">:</span>&nbsp;<span class="string" id="3699273">&#34;usermod&#34;</span><span class="op" id="3699282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="3699286">68</span><span class="op" id="3699288">:</span>&nbsp;<span class="string" id="3699290">&#34;iret&#34;</span><span class="op" id="3699296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3699299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699303">opSys1Map</span>&nbsp;<span class="op" id="3699313">=</span>&nbsp;<span class="keyword" id="3699315">map</span><span class="op" id="3699318">[</span><span class="builtintype" id="3699319">uint32</span><span class="op" id="3699325">]</span><span class="builtintype" id="3699326">string</span><span class="op" id="3699332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="3699336">67</span><span class="op" id="3699338">:</span>&nbsp;<span class="string" id="3699340">&#34;vtable&#34;</span><span class="op" id="3699348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="3699352">69</span><span class="op" id="3699354">:</span>&nbsp;<span class="string" id="3699356">&#34;cpuid&#34;</span><span class="op" id="3699363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3699366">}</span><br>
<span class="lineno"></span><span class="op" id="3699368">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="3699371">func</span>&nbsp;<span class="ident" id="3699376">instSys</span><span class="op" id="3699383">(</span><span class="ident" id="3699384">addr</span>&nbsp;<span class="builtintype" id="3699389">uint32</span><span class="op" id="3699395">,</span>&nbsp;<span class="ident" id="3699397">in</span>&nbsp;<span class="builtintype" id="3699400">uint32</span><span class="op" id="3699406">)</span>&nbsp;<span class="op" id="3699408">*</span><span class="ident" id="3699409">Line</span>&nbsp;<span class="op" id="3699414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699417">op</span>&nbsp;<span class="op" id="3699420">:=</span>&nbsp;<span class="op" id="3699423">(</span><span class="ident" id="3699424">in</span>&nbsp;<span class="op" id="3699427">&gt;&gt;</span>&nbsp;<span class="num" id="3699430">24</span><span class="op" id="3699432">)</span>&nbsp;<span class="op" id="3699434">&amp;</span>&nbsp;<span class="num" id="3699436">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699442">src</span>&nbsp;<span class="op" id="3699446">:=</span>&nbsp;<span class="ident" id="3699449">regStr</span><span class="op" id="3699455">(</span><span class="op" id="3699456">(</span><span class="ident" id="3699457">in</span>&nbsp;<span class="op" id="3699460">&gt;&gt;</span>&nbsp;<span class="num" id="3699463">21</span><span class="op" id="3699465">)</span>&nbsp;<span class="op" id="3699467">&amp;</span>&nbsp;<span class="num" id="3699469">0x7</span><span class="op" id="3699472">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699476">var</span>&nbsp;<span class="ident" id="3699480">s</span>&nbsp;<span class="builtintype" id="3699482">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699490">if</span>&nbsp;<span class="ident" id="3699493">opStr</span><span class="op" id="3699498">,</span>&nbsp;<span class="ident" id="3699500">found</span>&nbsp;<span class="op" id="3699506">:=</span>&nbsp;<span class="ident" id="3699509">opSysMap</span><span class="op" id="3699517">[</span><span class="ident" id="3699518">op</span><span class="op" id="3699520">]</span><span class="op" id="3699521">;</span>&nbsp;<span class="ident" id="3699523">found</span>&nbsp;<span class="op" id="3699529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699533">s</span>&nbsp;<span class="op" id="3699535">=</span>&nbsp;<span class="ident" id="3699537">opStr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3699544">}</span>&nbsp;<span class="keyword" id="3699546">else</span>&nbsp;<span class="keyword" id="3699551">if</span>&nbsp;<span class="ident" id="3699554">opStr</span><span class="op" id="3699559">,</span>&nbsp;<span class="ident" id="3699561">found</span>&nbsp;<span class="op" id="3699567">:=</span>&nbsp;<span class="ident" id="3699570">opSys1Map</span><span class="op" id="3699579">[</span><span class="ident" id="3699580">op</span><span class="op" id="3699582">]</span><span class="op" id="3699583">;</span>&nbsp;<span class="ident" id="3699585">found</span>&nbsp;<span class="op" id="3699591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699595">s</span>&nbsp;<span class="op" id="3699597">=</span>&nbsp;<span class="ident" id="3699599">fmt</span><span class="op" id="3699602">.</span><span class="ident" id="3699603">Sprintf</span><span class="op" id="3699610">(</span><span class="string" id="3699611">&#34;%s&nbsp;%s&#34;</span><span class="op" id="3699618">,</span>&nbsp;<span class="ident" id="3699620">opStr</span><span class="op" id="3699625">,</span>&nbsp;<span class="ident" id="3699627">src</span><span class="op" id="3699630">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3699633">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699637">ret</span>&nbsp;<span class="op" id="3699641">:=</span>&nbsp;<span class="ident" id="3699644">newLine</span><span class="op" id="3699651">(</span><span class="ident" id="3699652">addr</span><span class="op" id="3699656">,</span>&nbsp;<span class="ident" id="3699658">in</span><span class="op" id="3699660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699663">ret</span><span class="op" id="3699666">.</span><span class="ident" id="3699667">Str</span>&nbsp;<span class="op" id="3699671">=</span>&nbsp;<span class="ident" id="3699673">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699676">return</span>&nbsp;<span class="ident" id="3699683">ret</span><br>
<span class="lineno">35</span><span class="op" id="3699687">}</span>
</div>
</body>
</html>
