<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3966379">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3966434">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3966488">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="3966538">//</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span><span class="comment" id="3966542">/*<br>
<span class="lineno"></span>Package&nbsp;multipart&nbsp;implements&nbsp;MIME&nbsp;multipart&nbsp;parsing,&nbsp;as&nbsp;defined&nbsp;in&nbsp;RFC<br>
<span class="lineno"></span>2046.<br>
<span class="lineno"></span><br>
<span class="lineno">10</span>The&nbsp;implementation&nbsp;is&nbsp;sufficient&nbsp;for&nbsp;HTTP&nbsp;(RFC&nbsp;2388)&nbsp;and&nbsp;the&nbsp;multipart<br>
<span class="lineno"></span>bodies&nbsp;generated&nbsp;by&nbsp;popular&nbsp;browsers.<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="3966735">package</span>&nbsp;<span class="ident" id="3966743">multipart</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="3966754">import</span>&nbsp;<span class="op" id="3966761">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3966764">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3966773">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3966782">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3966789">&#34;io&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3966795">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3966808">&#34;mime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3966816">&#34;net/textproto&#34;</span><br>
<span class="lineno"></span><span class="op" id="3966832">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="3966835">var</span>&nbsp;<span class="ident" id="3966839">emptyParams</span>&nbsp;<span class="op" id="3966851">=</span>&nbsp;<span class="builtinfunc" id="3966853">make</span><span class="op" id="3966857">(</span><span class="keyword" id="3966858">map</span><span class="op" id="3966861">[</span><span class="builtintype" id="3966862">string</span><span class="op" id="3966868">]</span><span class="builtintype" id="3966869">string</span><span class="op" id="3966875">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3966878">//&nbsp;A&nbsp;Part&nbsp;represents&nbsp;a&nbsp;single&nbsp;part&nbsp;in&nbsp;a&nbsp;multipart&nbsp;body.</span><br>
<span class="lineno"></span><span class="keyword" id="3966934">type</span>&nbsp;<span class="ident" id="3966939">Part</span>&nbsp;<span class="keyword" id="3966944">struct</span>&nbsp;<span class="op" id="3966951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3966954">//&nbsp;The&nbsp;headers&nbsp;of&nbsp;the&nbsp;body,&nbsp;if&nbsp;any,&nbsp;with&nbsp;the&nbsp;keys&nbsp;canonicalized</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3967019">//&nbsp;in&nbsp;the&nbsp;same&nbsp;fashion&nbsp;that&nbsp;the&nbsp;Go&nbsp;http.Request&nbsp;headers&nbsp;are.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3967081">//&nbsp;For&nbsp;example,&nbsp;&#34;foo-bar&#34;&nbsp;changes&nbsp;case&nbsp;to&nbsp;&#34;Foo-Bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3967134">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3967138">//&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;if&nbsp;the&nbsp;&#34;Content-Transfer-Encoding&#34;&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3967203">//&nbsp;has&nbsp;a&nbsp;value&nbsp;of&nbsp;&#34;quoted-printable&#34;,&nbsp;that&nbsp;header&nbsp;is&nbsp;instead</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3967265">//&nbsp;hidden&nbsp;from&nbsp;this&nbsp;map&nbsp;and&nbsp;the&nbsp;body&nbsp;is&nbsp;transparently&nbsp;decoded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3967328">//&nbsp;during&nbsp;Read&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3967351">Header</span>&nbsp;<span class="ident" id="3967358"><a href="/mime/multipart/multipart.go.html#3966816">textproto</a></span><span class="op" id="3967367">.</span><span class="ident" id="3967368">MIMEHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3967381">buffer</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3967391">*</span><span class="ident" id="3967392"><a href="/mime/multipart/multipart.go.html#3966773">bytes</a></span><span class="op" id="3967397">.</span><span class="ident" id="3967398">Buffer</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3967406">mr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3967416">*</span><span class="ident" id="3967417"><a href="/mime/multipart/multipart.go.html#3972094">Reader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3967425">bytesRead</span>&nbsp;<span class="builtintype" id="3967435">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3967441">disposition</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3967459">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3967467">dispositionParams</span>&nbsp;<span class="keyword" id="3967485">map</span><span class="op" id="3967488">[</span><span class="builtintype" id="3967489">string</span><span class="op" id="3967495">]</span><span class="builtintype" id="3967496">string</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3967505">//&nbsp;r&nbsp;is&nbsp;either&nbsp;a&nbsp;reader&nbsp;directly&nbsp;reading&nbsp;from&nbsp;mr,&nbsp;or&nbsp;it&#39;s&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3967566">//&nbsp;wrapper&nbsp;around&nbsp;such&nbsp;a&nbsp;reader,&nbsp;decoding&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3967613">//&nbsp;Content-Transfer-Encoding</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3967643">r</span>&nbsp;<span class="ident" id="3967645"><a href="/mime/multipart/multipart.go.html#3966789">io</a></span><span class="op" id="3967647">.</span><span class="ident" id="3967648">Reader</span><br>
<span class="lineno">50</span><span class="op" id="3967655">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3967658">//&nbsp;FormName&nbsp;returns&nbsp;the&nbsp;name&nbsp;parameter&nbsp;if&nbsp;p&nbsp;has&nbsp;a&nbsp;Content-Disposition</span><br>
<span class="lineno"></span><span class="comment" id="3967728">//&nbsp;of&nbsp;type&nbsp;&#34;form-data&#34;.&nbsp;&nbsp;Otherwise&nbsp;it&nbsp;returns&nbsp;the&nbsp;empty&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3967792">func</span>&nbsp;<span class="op" id="3967797">(</span><span class="ident" id="3967798">p</span>&nbsp;<span class="op" id="3967800">*</span><span class="ident" id="3967801"><a href="/mime/multipart/multipart.go.html#3966939">Part</a></span><span class="op" id="3967805">)</span>&nbsp;<span class="ident" id="3967807">FormName</span><span class="op" id="3967815">(</span><span class="op" id="3967816">)</span>&nbsp;<span class="builtintype" id="3967818">string</span>&nbsp;<span class="op" id="3967825">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3967828">//&nbsp;See&nbsp;http://tools.ietf.org/html/rfc2183&nbsp;section&nbsp;2&nbsp;for&nbsp;EBNF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3967890">//&nbsp;of&nbsp;Content-Disposition&nbsp;value&nbsp;format.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3967931">if</span>&nbsp;<span class="ident" id="3967934"><a href="/mime/multipart/multipart.go.html#3967798">p</a></span><span class="op" id="3967935">.</span><span class="ident" id="3967936">dispositionParams</span>&nbsp;<span class="op" id="3967954">==</span>&nbsp;<span class="ident" id="3967957">nil</span>&nbsp;<span class="op" id="3967961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3967965"><a href="/mime/multipart/multipart.go.html#3967798">p</a></span><span class="op" id="3967966">.</span><span class="ident" id="3967967">parseContentDisposition</span><span class="op" id="3967990">(</span><span class="op" id="3967991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3967994">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3967997">if</span>&nbsp;<span class="ident" id="3968000"><a href="/mime/multipart/multipart.go.html#3967798">p</a></span><span class="op" id="3968001">.</span><span class="ident" id="3968002">disposition</span>&nbsp;<span class="op" id="3968014">!=</span>&nbsp;<span class="string" id="3968017">&#34;form-data&#34;</span>&nbsp;<span class="op" id="3968029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3968033">return</span>&nbsp;<span class="string" id="3968040">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3968044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3968047">return</span>&nbsp;<span class="ident" id="3968054"><a href="/mime/multipart/multipart.go.html#3967798">p</a></span><span class="op" id="3968055">.</span><span class="ident" id="3968056">dispositionParams</span><span class="op" id="3968073">[</span><span class="string" id="3968074">&#34;name&#34;</span><span class="op" id="3968080">]</span><br>
<span class="lineno"></span><span class="op" id="3968082">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="3968085">//&nbsp;FileName&nbsp;returns&nbsp;the&nbsp;filename&nbsp;parameter&nbsp;of&nbsp;the&nbsp;Part&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="3968142">//&nbsp;Content-Disposition&nbsp;header.</span><br>
<span class="lineno"></span><span class="keyword" id="3968173">func</span>&nbsp;<span class="op" id="3968178">(</span><span class="ident" id="3968179">p</span>&nbsp;<span class="op" id="3968181">*</span><span class="ident" id="3968182"><a href="/mime/multipart/multipart.go.html#3966939">Part</a></span><span class="op" id="3968186">)</span>&nbsp;<span class="ident" id="3968188">FileName</span><span class="op" id="3968196">(</span><span class="op" id="3968197">)</span>&nbsp;<span class="builtintype" id="3968199">string</span>&nbsp;<span class="op" id="3968206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3968209">if</span>&nbsp;<span class="ident" id="3968212"><a href="/mime/multipart/multipart.go.html#3968179">p</a></span><span class="op" id="3968213">.</span><span class="ident" id="3968214">dispositionParams</span>&nbsp;<span class="op" id="3968232">==</span>&nbsp;<span class="ident" id="3968235">nil</span>&nbsp;<span class="op" id="3968239">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3968243"><a href="/mime/multipart/multipart.go.html#3968179">p</a></span><span class="op" id="3968244">.</span><span class="ident" id="3968245">parseContentDisposition</span><span class="op" id="3968268">(</span><span class="op" id="3968269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3968272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3968275">return</span>&nbsp;<span class="ident" id="3968282"><a href="/mime/multipart/multipart.go.html#3968179">p</a></span><span class="op" id="3968283">.</span><span class="ident" id="3968284">dispositionParams</span><span class="op" id="3968301">[</span><span class="string" id="3968302">&#34;filename&#34;</span><span class="op" id="3968312">]</span><br>
<span class="lineno"></span><span class="op" id="3968314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="3968317">func</span>&nbsp;<span class="op" id="3968322">(</span><span class="ident" id="3968323">p</span>&nbsp;<span class="op" id="3968325">*</span><span class="ident" id="3968326"><a href="/mime/multipart/multipart.go.html#3966939">Part</a></span><span class="op" id="3968330">)</span>&nbsp;<span class="ident" id="3968332">parseContentDisposition</span><span class="op" id="3968355">(</span><span class="op" id="3968356">)</span>&nbsp;<span class="op" id="3968358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3968361">v</span>&nbsp;<span class="op" id="3968363">:=</span>&nbsp;<span class="ident" id="3968366"><a href="/mime/multipart/multipart.go.html#3968323">p</a></span><span class="op" id="3968367">.</span><span class="ident" id="3968368">Header</span><span class="op" id="3968374">.</span><span class="ident" id="3968375">Get</span><span class="op" id="3968378">(</span><span class="string" id="3968379">&#34;Content-Disposition&#34;</span><span class="op" id="3968400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3968403">var</span>&nbsp;<span class="ident" id="3968407">err</span>&nbsp;<span class="builtintype" id="3968411">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3968418"><a href="/mime/multipart/multipart.go.html#3968323">p</a></span><span class="op" id="3968419">.</span><span class="ident" id="3968420">disposition</span><span class="op" id="3968431">,</span>&nbsp;<span class="ident" id="3968433"><a href="/mime/multipart/multipart.go.html#3968323">p</a></span><span class="op" id="3968434">.</span><span class="ident" id="3968435">dispositionParams</span><span class="op" id="3968452">,</span>&nbsp;<span class="ident" id="3968454"><a href="/mime/multipart/multipart.go.html#3968407">err</a></span>&nbsp;<span class="op" id="3968458">=</span>&nbsp;<span class="ident" id="3968460"><a href="/mime/multipart/multipart.go.html#3966808">mime</a></span><span class="op" id="3968464">.</span><span class="ident" id="3968465">ParseMediaType</span><span class="op" id="3968479">(</span><span class="ident" id="3968480"><a href="/mime/multipart/multipart.go.html#3968361">v</a></span><span class="op" id="3968481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3968484">if</span>&nbsp;<span class="ident" id="3968487"><a href="/mime/multipart/multipart.go.html#3968407">err</a></span>&nbsp;<span class="op" id="3968491">!=</span>&nbsp;<span class="ident" id="3968494">nil</span>&nbsp;<span class="op" id="3968498">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3968502"><a href="/mime/multipart/multipart.go.html#3968323">p</a></span><span class="op" id="3968503">.</span><span class="ident" id="3968504">dispositionParams</span>&nbsp;<span class="op" id="3968522">=</span>&nbsp;<span class="ident" id="3968524"><a href="/mime/multipart/multipart.go.html#3966839">emptyParams</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3968537">}</span><br>
<span class="lineno"></span><span class="op" id="3968539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3968542">//&nbsp;NewReader&nbsp;creates&nbsp;a&nbsp;new&nbsp;multipart&nbsp;Reader&nbsp;reading&nbsp;from&nbsp;r&nbsp;using&nbsp;the</span><br>
<span class="lineno">85</span><span class="comment" id="3968611">//&nbsp;given&nbsp;MIME&nbsp;boundary.</span><br>
<span class="lineno"></span><span class="comment" id="3968635">//</span><br>
<span class="lineno"></span><span class="comment" id="3968638">//&nbsp;The&nbsp;boundary&nbsp;is&nbsp;usually&nbsp;obtained&nbsp;from&nbsp;the&nbsp;&#34;boundary&#34;&nbsp;parameter&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3968707">//&nbsp;the&nbsp;message&#39;s&nbsp;&#34;Content-Type&#34;&nbsp;header.&nbsp;Use&nbsp;mime.ParseMediaType&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3968774">//&nbsp;parse&nbsp;such&nbsp;headers.</span><br>
<span class="lineno">90</span><span class="keyword" id="3968797">func</span>&nbsp;<span class="ident" id="3968802">NewReader</span><span class="op" id="3968811">(</span><span class="ident" id="3968812">r</span>&nbsp;<span class="ident" id="3968814"><a href="/mime/multipart/multipart.go.html#3966789">io</a></span><span class="op" id="3968816">.</span><span class="ident" id="3968817">Reader</span><span class="op" id="3968823">,</span>&nbsp;<span class="ident" id="3968825">boundary</span>&nbsp;<span class="builtintype" id="3968834">string</span><span class="op" id="3968840">)</span>&nbsp;<span class="op" id="3968842">*</span><span class="ident" id="3968843"><a href="/mime/multipart/multipart.go.html#3972094">Reader</a></span>&nbsp;<span class="op" id="3968850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3968853">b</span>&nbsp;<span class="op" id="3968855">:=</span>&nbsp;<span class="op" id="3968858">[</span><span class="op" id="3968859">]</span><span class="builtintype" id="3968860">byte</span><span class="op" id="3968864">(</span><span class="string" id="3968865">&#34;\r\n--&#34;</span>&nbsp;<span class="op" id="3968874">+</span>&nbsp;<span class="ident" id="3968876"><a href="/mime/multipart/multipart.go.html#3968825">boundary</a></span>&nbsp;<span class="op" id="3968885">+</span>&nbsp;<span class="string" id="3968887">&#34;--&#34;</span><span class="op" id="3968891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3968894">return</span>&nbsp;<span class="op" id="3968901">&amp;</span><span class="ident" id="3968902"><a href="/mime/multipart/multipart.go.html#3972094">Reader</a></span><span class="op" id="3968908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3968912">bufReader</span><span class="op" id="3968921">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3968930"><a href="/mime/multipart/multipart.go.html#3966764">bufio</a></span><span class="op" id="3968935">.</span><span class="ident" id="3968936">NewReader</span><span class="op" id="3968945">(</span><span class="ident" id="3968946"><a href="/mime/multipart/multipart.go.html#3968812">r</a></span><span class="op" id="3968947">)</span><span class="op" id="3968948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3968952">nl</span><span class="op" id="3968954">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3968970"><a href="/mime/multipart/multipart.go.html#3968853">b</a></span><span class="op" id="3968971">[</span><span class="op" id="3968972">:</span><span class="num" id="3968973">2</span><span class="op" id="3968974">]</span><span class="op" id="3968975">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3968979">nlDashBoundary</span><span class="op" id="3968993">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3968997"><a href="/mime/multipart/multipart.go.html#3968853">b</a></span><span class="op" id="3968998">[</span><span class="op" id="3968999">:</span><span class="builtinfunc" id="3969000">len</span><span class="op" id="3969003">(</span><span class="ident" id="3969004"><a href="/mime/multipart/multipart.go.html#3968853">b</a></span><span class="op" id="3969005">)</span><span class="op" id="3969006">-</span><span class="num" id="3969007">2</span><span class="op" id="3969008">]</span><span class="op" id="3969009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3969013">dashBoundaryDash</span><span class="op" id="3969029">:</span>&nbsp;<span class="ident" id="3969031"><a href="/mime/multipart/multipart.go.html#3968853">b</a></span><span class="op" id="3969032">[</span><span class="num" id="3969033">2</span><span class="op" id="3969034">:</span><span class="op" id="3969035">]</span><span class="op" id="3969036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3969040">dashBoundary</span><span class="op" id="3969052">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3969058"><a href="/mime/multipart/multipart.go.html#3968853">b</a></span><span class="op" id="3969059">[</span><span class="num" id="3969060">2</span>&nbsp;<span class="op" id="3969062">:</span>&nbsp;<span class="builtinfunc" id="3969064">len</span><span class="op" id="3969067">(</span><span class="ident" id="3969068"><a href="/mime/multipart/multipart.go.html#3968853">b</a></span><span class="op" id="3969069">)</span><span class="op" id="3969070">-</span><span class="num" id="3969071">2</span><span class="op" id="3969072">]</span><span class="op" id="3969073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3969076">}</span><br>
<span class="lineno"></span><span class="op" id="3969078">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="3969081">func</span>&nbsp;<span class="ident" id="3969086">newPart</span><span class="op" id="3969093">(</span><span class="ident" id="3969094">mr</span>&nbsp;<span class="op" id="3969097">*</span><span class="ident" id="3969098"><a href="/mime/multipart/multipart.go.html#3972094">Reader</a></span><span class="op" id="3969104">)</span>&nbsp;<span class="op" id="3969106">(</span><span class="op" id="3969107">*</span><span class="ident" id="3969108"><a href="/mime/multipart/multipart.go.html#3966939">Part</a></span><span class="op" id="3969112">,</span>&nbsp;<span class="builtintype" id="3969114">error</span><span class="op" id="3969119">)</span>&nbsp;<span class="op" id="3969121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3969124">bp</span>&nbsp;<span class="op" id="3969127">:=</span>&nbsp;<span class="op" id="3969130">&amp;</span><span class="ident" id="3969131"><a href="/mime/multipart/multipart.go.html#3966939">Part</a></span><span class="op" id="3969135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3969139">Header</span><span class="op" id="3969145">:</span>&nbsp;<span class="builtinfunc" id="3969147">make</span><span class="op" id="3969151">(</span><span class="keyword" id="3969152">map</span><span class="op" id="3969155">[</span><span class="builtintype" id="3969156">string</span><span class="op" id="3969162">]</span><span class="op" id="3969163">[</span><span class="op" id="3969164">]</span><span class="builtintype" id="3969165">string</span><span class="op" id="3969171">)</span><span class="op" id="3969172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3969176">mr</span><span class="op" id="3969178">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3969184"><a href="/mime/multipart/multipart.go.html#3969094">mr</a></span><span class="op" id="3969186">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3969190">buffer</span><span class="op" id="3969196">:</span>&nbsp;<span class="builtinfunc" id="3969198">new</span><span class="op" id="3969201">(</span><span class="ident" id="3969202"><a href="/mime/multipart/multipart.go.html#3966773">bytes</a></span><span class="op" id="3969207">.</span><span class="ident" id="3969208">Buffer</span><span class="op" id="3969214">)</span><span class="op" id="3969215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3969218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3969221">if</span>&nbsp;<span class="ident" id="3969224">err</span>&nbsp;<span class="op" id="3969228">:=</span>&nbsp;<span class="ident" id="3969231"><a href="/mime/multipart/multipart.go.html#3969124">bp</a></span><span class="op" id="3969233">.</span><span class="ident" id="3969234">populateHeaders</span><span class="op" id="3969249">(</span><span class="op" id="3969250">)</span><span class="op" id="3969251">;</span>&nbsp;<span class="ident" id="3969253"><a href="/mime/multipart/multipart.go.html#3969224">err</a></span>&nbsp;<span class="op" id="3969257">!=</span>&nbsp;<span class="ident" id="3969260">nil</span>&nbsp;<span class="op" id="3969264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3969268">return</span>&nbsp;<span class="ident" id="3969275">nil</span><span class="op" id="3969278">,</span>&nbsp;<span class="ident" id="3969280"><a href="/mime/multipart/multipart.go.html#3969224">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3969285">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3969288"><a href="/mime/multipart/multipart.go.html#3969124">bp</a></span><span class="op" id="3969290">.</span><span class="ident" id="3969291">r</span>&nbsp;<span class="op" id="3969293">=</span>&nbsp;<span class="ident" id="3969295"><a href="/mime/multipart/multipart.go.html#3969971">partReader</a></span><span class="op" id="3969305">{</span><span class="ident" id="3969306"><a href="/mime/multipart/multipart.go.html#3969124">bp</a></span><span class="op" id="3969308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3969311">const</span>&nbsp;<span class="ident" id="3969317">cte</span>&nbsp;<span class="op" id="3969321">=</span>&nbsp;<span class="string" id="3969323">&#34;Content-Transfer-Encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3969352">if</span>&nbsp;<span class="ident" id="3969355"><a href="/mime/multipart/multipart.go.html#3969124">bp</a></span><span class="op" id="3969357">.</span><span class="ident" id="3969358">Header</span><span class="op" id="3969364">.</span><span class="ident" id="3969365">Get</span><span class="op" id="3969368">(</span><span class="ident" id="3969369"><a href="/mime/multipart/multipart.go.html#3969317">cte</a></span><span class="op" id="3969372">)</span>&nbsp;<span class="op" id="3969374">==</span>&nbsp;<span class="string" id="3969377">&#34;quoted-printable&#34;</span>&nbsp;<span class="op" id="3969396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3969400"><a href="/mime/multipart/multipart.go.html#3969124">bp</a></span><span class="op" id="3969402">.</span><span class="ident" id="3969403">Header</span><span class="op" id="3969409">.</span><span class="ident" id="3969410">Del</span><span class="op" id="3969413">(</span><span class="ident" id="3969414"><a href="/mime/multipart/multipart.go.html#3969317">cte</a></span><span class="op" id="3969417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3969421"><a href="/mime/multipart/multipart.go.html#3969124">bp</a></span><span class="op" id="3969423">.</span><span class="ident" id="3969424">r</span>&nbsp;<span class="op" id="3969426">=</span>&nbsp;<span class="ident" id="3969428"><a href="/mime/multipart/quotedprintable.go.html#3977043">newQuotedPrintableReader</a></span><span class="op" id="3969452">(</span><span class="ident" id="3969453"><a href="/mime/multipart/multipart.go.html#3969124">bp</a></span><span class="op" id="3969455">.</span><span class="ident" id="3969456">r</span><span class="op" id="3969457">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3969460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3969463">return</span>&nbsp;<span class="ident" id="3969470"><a href="/mime/multipart/multipart.go.html#3969124">bp</a></span><span class="op" id="3969472">,</span>&nbsp;<span class="ident" id="3969474">nil</span><br>
<span class="lineno"></span><span class="op" id="3969478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3969481">func</span>&nbsp;<span class="op" id="3969486">(</span><span class="ident" id="3969487">bp</span>&nbsp;<span class="op" id="3969490">*</span><span class="ident" id="3969491"><a href="/mime/multipart/multipart.go.html#3966939">Part</a></span><span class="op" id="3969495">)</span>&nbsp;<span class="ident" id="3969497">populateHeaders</span><span class="op" id="3969512">(</span><span class="op" id="3969513">)</span>&nbsp;<span class="builtintype" id="3969515">error</span>&nbsp;<span class="op" id="3969521">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3969524">r</span>&nbsp;<span class="op" id="3969526">:=</span>&nbsp;<span class="ident" id="3969529"><a href="/mime/multipart/multipart.go.html#3966816">textproto</a></span><span class="op" id="3969538">.</span><span class="ident" id="3969539">NewReader</span><span class="op" id="3969548">(</span><span class="ident" id="3969549"><a href="/mime/multipart/multipart.go.html#3969487">bp</a></span><span class="op" id="3969551">.</span><span class="ident" id="3969552">mr</span><span class="op" id="3969554">.</span><span class="ident" id="3969555">bufReader</span><span class="op" id="3969564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3969567">header</span><span class="op" id="3969573">,</span>&nbsp;<span class="ident" id="3969575">err</span>&nbsp;<span class="op" id="3969579">:=</span>&nbsp;<span class="ident" id="3969582"><a href="/mime/multipart/multipart.go.html#3969524">r</a></span><span class="op" id="3969583">.</span><span class="ident" id="3969584">ReadMIMEHeader</span><span class="op" id="3969598">(</span><span class="op" id="3969599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3969602">if</span>&nbsp;<span class="ident" id="3969605"><a href="/mime/multipart/multipart.go.html#3969575">err</a></span>&nbsp;<span class="op" id="3969609">==</span>&nbsp;<span class="ident" id="3969612">nil</span>&nbsp;<span class="op" id="3969616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3969620"><a href="/mime/multipart/multipart.go.html#3969487">bp</a></span><span class="op" id="3969622">.</span><span class="ident" id="3969623">Header</span>&nbsp;<span class="op" id="3969630">=</span>&nbsp;<span class="ident" id="3969632"><a href="/mime/multipart/multipart.go.html#3969567">header</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3969640">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3969643">return</span>&nbsp;<span class="ident" id="3969650"><a href="/mime/multipart/multipart.go.html#3969575">err</a></span><br>
<span class="lineno"></span><span class="op" id="3969654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3969657">//&nbsp;Read&nbsp;reads&nbsp;the&nbsp;body&nbsp;of&nbsp;a&nbsp;part,&nbsp;after&nbsp;its&nbsp;headers&nbsp;and&nbsp;before&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3969724">//&nbsp;next&nbsp;part&nbsp;(if&nbsp;any)&nbsp;begins.</span><br>
<span class="lineno">130</span><span class="keyword" id="3969754">func</span>&nbsp;<span class="op" id="3969759">(</span><span class="ident" id="3969760">p</span>&nbsp;<span class="op" id="3969762">*</span><span class="ident" id="3969763"><a href="/mime/multipart/multipart.go.html#3966939">Part</a></span><span class="op" id="3969767">)</span>&nbsp;<span class="ident" id="3969769">Read</span><span class="op" id="3969773">(</span><span class="ident" id="3969774">d</span>&nbsp;<span class="op" id="3969776">[</span><span class="op" id="3969777">]</span><span class="builtintype" id="3969778">byte</span><span class="op" id="3969782">)</span>&nbsp;<span class="op" id="3969784">(</span><span class="ident" id="3969785">n</span>&nbsp;<span class="builtintype" id="3969787">int</span><span class="op" id="3969790">,</span>&nbsp;<span class="ident" id="3969792">err</span>&nbsp;<span class="builtintype" id="3969796">error</span><span class="op" id="3969801">)</span>&nbsp;<span class="op" id="3969803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3969806">return</span>&nbsp;<span class="ident" id="3969813"><a href="/mime/multipart/multipart.go.html#3969760">p</a></span><span class="op" id="3969814">.</span><span class="ident" id="3969815">r</span><span class="op" id="3969816">.</span><span class="ident" id="3969817">Read</span><span class="op" id="3969821">(</span><span class="ident" id="3969822"><a href="/mime/multipart/multipart.go.html#3969774">d</a></span><span class="op" id="3969823">)</span><br>
<span class="lineno"></span><span class="op" id="3969825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3969828">//&nbsp;partReader&nbsp;implements&nbsp;io.Reader&nbsp;by&nbsp;reading&nbsp;raw&nbsp;bytes&nbsp;directly&nbsp;from&nbsp;the</span><br>
<span class="lineno">135</span><span class="comment" id="3969902">//&nbsp;wrapped&nbsp;*Part,&nbsp;without&nbsp;doing&nbsp;any&nbsp;Transfer-Encoding&nbsp;decoding.</span><br>
<span class="lineno"></span><span class="keyword" id="3969966">type</span>&nbsp;<span class="ident" id="3969971">partReader</span>&nbsp;<span class="keyword" id="3969982">struct</span>&nbsp;<span class="op" id="3969989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3969992">p</span>&nbsp;<span class="op" id="3969994">*</span><span class="ident" id="3969995"><a href="/mime/multipart/multipart.go.html#3966939">Part</a></span><br>
<span class="lineno"></span><span class="op" id="3970000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="3970003">func</span>&nbsp;<span class="op" id="3970008">(</span><span class="ident" id="3970009">pr</span>&nbsp;<span class="ident" id="3970012"><a href="/mime/multipart/multipart.go.html#3969971">partReader</a></span><span class="op" id="3970022">)</span>&nbsp;<span class="ident" id="3970024">Read</span><span class="op" id="3970028">(</span><span class="ident" id="3970029">d</span>&nbsp;<span class="op" id="3970031">[</span><span class="op" id="3970032">]</span><span class="builtintype" id="3970033">byte</span><span class="op" id="3970037">)</span>&nbsp;<span class="op" id="3970039">(</span><span class="ident" id="3970040">n</span>&nbsp;<span class="builtintype" id="3970042">int</span><span class="op" id="3970045">,</span>&nbsp;<span class="ident" id="3970047">err</span>&nbsp;<span class="builtintype" id="3970051">error</span><span class="op" id="3970056">)</span>&nbsp;<span class="op" id="3970058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3970061">p</span>&nbsp;<span class="op" id="3970063">:=</span>&nbsp;<span class="ident" id="3970066"><a href="/mime/multipart/multipart.go.html#3970009">pr</a></span><span class="op" id="3970068">.</span><span class="ident" id="3970069">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3970072">defer</span>&nbsp;<span class="keyword" id="3970078">func</span><span class="op" id="3970082">(</span><span class="op" id="3970083">)</span>&nbsp;<span class="op" id="3970085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3970089"><a href="/mime/multipart/multipart.go.html#3970061">p</a></span><span class="op" id="3970090">.</span><span class="ident" id="3970091">bytesRead</span>&nbsp;<span class="op" id="3970101">+=</span>&nbsp;<span class="ident" id="3970104"><a href="/mime/multipart/multipart.go.html#3970040">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3970107">}</span><span class="op" id="3970108">(</span><span class="op" id="3970109">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3970112">if</span>&nbsp;<span class="ident" id="3970115"><a href="/mime/multipart/multipart.go.html#3970061">p</a></span><span class="op" id="3970116">.</span><span class="ident" id="3970117">buffer</span><span class="op" id="3970123">.</span><span class="ident" id="3970124">Len</span><span class="op" id="3970127">(</span><span class="op" id="3970128">)</span>&nbsp;<span class="op" id="3970130">&gt;=</span>&nbsp;<span class="builtinfunc" id="3970133">len</span><span class="op" id="3970136">(</span><span class="ident" id="3970137"><a href="/mime/multipart/multipart.go.html#3970029">d</a></span><span class="op" id="3970138">)</span>&nbsp;<span class="op" id="3970140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3970144">//&nbsp;Internal&nbsp;buffer&nbsp;of&nbsp;unconsumed&nbsp;data&nbsp;is&nbsp;large&nbsp;enough&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3970204">//&nbsp;the&nbsp;read&nbsp;request.&nbsp;&nbsp;No&nbsp;need&nbsp;to&nbsp;parse&nbsp;more&nbsp;at&nbsp;the&nbsp;moment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3970265">return</span>&nbsp;<span class="ident" id="3970272"><a href="/mime/multipart/multipart.go.html#3970061">p</a></span><span class="op" id="3970273">.</span><span class="ident" id="3970274">buffer</span><span class="op" id="3970280">.</span><span class="ident" id="3970281">Read</span><span class="op" id="3970285">(</span><span class="ident" id="3970286"><a href="/mime/multipart/multipart.go.html#3970029">d</a></span><span class="op" id="3970287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3970290">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3970293">peek</span><span class="op" id="3970297">,</span>&nbsp;<span class="ident" id="3970299"><a href="/mime/multipart/multipart.go.html#3970047">err</a></span>&nbsp;<span class="op" id="3970303">:=</span>&nbsp;<span class="ident" id="3970306"><a href="/mime/multipart/multipart.go.html#3970061">p</a></span><span class="op" id="3970307">.</span><span class="ident" id="3970308">mr</span><span class="op" id="3970310">.</span><span class="ident" id="3970311">bufReader</span><span class="op" id="3970320">.</span><span class="ident" id="3970321">Peek</span><span class="op" id="3970325">(</span><span class="num" id="3970326">4096</span><span class="op" id="3970330">)</span>&nbsp;<span class="comment" id="3970332">//&nbsp;TODO(bradfitz):&nbsp;add&nbsp;buffer&nbsp;size&nbsp;accessor</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3970378">//&nbsp;Look&nbsp;for&nbsp;an&nbsp;immediate&nbsp;empty&nbsp;part&nbsp;without&nbsp;a&nbsp;leading&nbsp;\r\n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3970438">//&nbsp;before&nbsp;the&nbsp;boundary&nbsp;separator.&nbsp;&nbsp;Some&nbsp;MIME&nbsp;code&nbsp;makes&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3970501">//&nbsp;parts&nbsp;like&nbsp;this.&nbsp;Most&nbsp;browsers,&nbsp;however,&nbsp;write&nbsp;the&nbsp;\r\n</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3970561">//&nbsp;before&nbsp;the&nbsp;subsequent&nbsp;boundary&nbsp;even&nbsp;for&nbsp;empty&nbsp;parts&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3970621">//&nbsp;won&#39;t&nbsp;hit&nbsp;this&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3970646">if</span>&nbsp;<span class="ident" id="3970649"><a href="/mime/multipart/multipart.go.html#3970061">p</a></span><span class="op" id="3970650">.</span><span class="ident" id="3970651">bytesRead</span>&nbsp;<span class="op" id="3970661">==</span>&nbsp;<span class="num" id="3970664">0</span>&nbsp;<span class="op" id="3970666">&amp;&amp;</span>&nbsp;<span class="ident" id="3970669"><a href="/mime/multipart/multipart.go.html#3970061">p</a></span><span class="op" id="3970670">.</span><span class="ident" id="3970671">mr</span><span class="op" id="3970673">.</span><span class="ident" id="3970674">peekBufferIsEmptyPart</span><span class="op" id="3970695">(</span><span class="ident" id="3970696"><a href="/mime/multipart/multipart.go.html#3970293">peek</a></span><span class="op" id="3970700">)</span>&nbsp;<span class="op" id="3970702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3970706">return</span>&nbsp;<span class="num" id="3970713">0</span><span class="op" id="3970714">,</span>&nbsp;<span class="ident" id="3970716"><a href="/mime/multipart/multipart.go.html#3966789">io</a></span><span class="op" id="3970718">.</span><span class="ident" id="3970719">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3970724">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3970727">unexpectedEOF</span>&nbsp;<span class="op" id="3970741">:=</span>&nbsp;<span class="ident" id="3970744"><a href="/mime/multipart/multipart.go.html#3970047">err</a></span>&nbsp;<span class="op" id="3970748">==</span>&nbsp;<span class="ident" id="3970751"><a href="/mime/multipart/multipart.go.html#3966789">io</a></span><span class="op" id="3970753">.</span><span class="ident" id="3970754">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3970759">if</span>&nbsp;<span class="ident" id="3970762"><a href="/mime/multipart/multipart.go.html#3970047">err</a></span>&nbsp;<span class="op" id="3970766">!=</span>&nbsp;<span class="ident" id="3970769">nil</span>&nbsp;<span class="op" id="3970773">&amp;&amp;</span>&nbsp;<span class="op" id="3970776">!</span><span class="ident" id="3970777"><a href="/mime/multipart/multipart.go.html#3970727">unexpectedEOF</a></span>&nbsp;<span class="op" id="3970791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3970795">return</span>&nbsp;<span class="num" id="3970802">0</span><span class="op" id="3970803">,</span>&nbsp;<span class="ident" id="3970805"><a href="/mime/multipart/multipart.go.html#3966782">fmt</a></span><span class="op" id="3970808">.</span><span class="ident" id="3970809">Errorf</span><span class="op" id="3970815">(</span><span class="string" id="3970816">&#34;multipart:&nbsp;Part&nbsp;Read:&nbsp;%v&#34;</span><span class="op" id="3970842">,</span>&nbsp;<span class="ident" id="3970844"><a href="/mime/multipart/multipart.go.html#3970047">err</a></span><span class="op" id="3970847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3970850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3970853">if</span>&nbsp;<span class="ident" id="3970856"><a href="/mime/multipart/multipart.go.html#3970293">peek</a></span>&nbsp;<span class="op" id="3970861">==</span>&nbsp;<span class="ident" id="3970864">nil</span>&nbsp;<span class="op" id="3970868">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3970872">panic</span><span class="op" id="3970877">(</span><span class="string" id="3970878">&#34;nil&nbsp;peek&nbsp;buf&#34;</span><span class="op" id="3970892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3970895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3970899">//&nbsp;Search&nbsp;the&nbsp;peek&nbsp;buffer&nbsp;for&nbsp;&#34;\r\n--boundary&#34;.&nbsp;If&nbsp;found,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3970958">//&nbsp;consume&nbsp;everything&nbsp;up&nbsp;to&nbsp;the&nbsp;boundary.&nbsp;If&nbsp;not,&nbsp;consume&nbsp;only</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3971022">//&nbsp;as&nbsp;much&nbsp;of&nbsp;the&nbsp;peek&nbsp;buffer&nbsp;as&nbsp;cannot&nbsp;hold&nbsp;the&nbsp;boundary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3971081">//&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3971093">nCopy</span>&nbsp;<span class="op" id="3971099">:=</span>&nbsp;<span class="num" id="3971102">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3971105">foundBoundary</span>&nbsp;<span class="op" id="3971119">:=</span>&nbsp;<span class="ident" id="3971122">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3971129">if</span>&nbsp;<span class="ident" id="3971132">idx</span>&nbsp;<span class="op" id="3971136">:=</span>&nbsp;<span class="ident" id="3971139"><a href="/mime/multipart/multipart.go.html#3966773">bytes</a></span><span class="op" id="3971144">.</span><span class="ident" id="3971145">Index</span><span class="op" id="3971150">(</span><span class="ident" id="3971151"><a href="/mime/multipart/multipart.go.html#3970293">peek</a></span><span class="op" id="3971155">,</span>&nbsp;<span class="ident" id="3971157"><a href="/mime/multipart/multipart.go.html#3970061">p</a></span><span class="op" id="3971158">.</span><span class="ident" id="3971159">mr</span><span class="op" id="3971161">.</span><span class="ident" id="3971162">nlDashBoundary</span><span class="op" id="3971176">)</span><span class="op" id="3971177">;</span>&nbsp;<span class="ident" id="3971179"><a href="/mime/multipart/multipart.go.html#3971132">idx</a></span>&nbsp;<span class="op" id="3971183">!=</span>&nbsp;<span class="op" id="3971186">-</span><span class="num" id="3971187">1</span>&nbsp;<span class="op" id="3971189">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3971193"><a href="/mime/multipart/multipart.go.html#3971093">nCopy</a></span>&nbsp;<span class="op" id="3971199">=</span>&nbsp;<span class="ident" id="3971201"><a href="/mime/multipart/multipart.go.html#3971132">idx</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3971207"><a href="/mime/multipart/multipart.go.html#3971105">foundBoundary</a></span>&nbsp;<span class="op" id="3971221">=</span>&nbsp;<span class="ident" id="3971223">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3971229">}</span>&nbsp;<span class="keyword" id="3971231">else</span>&nbsp;<span class="keyword" id="3971236">if</span>&nbsp;<span class="ident" id="3971239">safeCount</span>&nbsp;<span class="op" id="3971249">:=</span>&nbsp;<span class="builtinfunc" id="3971252">len</span><span class="op" id="3971255">(</span><span class="ident" id="3971256"><a href="/mime/multipart/multipart.go.html#3970293">peek</a></span><span class="op" id="3971260">)</span>&nbsp;<span class="op" id="3971262">-</span>&nbsp;<span class="builtinfunc" id="3971264">len</span><span class="op" id="3971267">(</span><span class="ident" id="3971268"><a href="/mime/multipart/multipart.go.html#3970061">p</a></span><span class="op" id="3971269">.</span><span class="ident" id="3971270">mr</span><span class="op" id="3971272">.</span><span class="ident" id="3971273">nlDashBoundary</span><span class="op" id="3971287">)</span><span class="op" id="3971288">;</span>&nbsp;<span class="ident" id="3971290"><a href="/mime/multipart/multipart.go.html#3971239">safeCount</a></span>&nbsp;<span class="op" id="3971300">&gt;</span>&nbsp;<span class="num" id="3971302">0</span>&nbsp;<span class="op" id="3971304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3971308"><a href="/mime/multipart/multipart.go.html#3971093">nCopy</a></span>&nbsp;<span class="op" id="3971314">=</span>&nbsp;<span class="ident" id="3971316"><a href="/mime/multipart/multipart.go.html#3971239">safeCount</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3971327">}</span>&nbsp;<span class="keyword" id="3971329">else</span>&nbsp;<span class="keyword" id="3971334">if</span>&nbsp;<span class="ident" id="3971337"><a href="/mime/multipart/multipart.go.html#3970727">unexpectedEOF</a></span>&nbsp;<span class="op" id="3971351">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3971355">//&nbsp;If&nbsp;we&#39;ve&nbsp;run&nbsp;out&nbsp;of&nbsp;peek&nbsp;buffer&nbsp;and&nbsp;the&nbsp;boundary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3971409">//&nbsp;wasn&#39;t&nbsp;found&nbsp;(and&nbsp;can&#39;t&nbsp;possibly&nbsp;fit),&nbsp;we&nbsp;must&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3971466">//&nbsp;hit&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;file&nbsp;unexpectedly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3971509">return</span>&nbsp;<span class="num" id="3971516">0</span><span class="op" id="3971517">,</span>&nbsp;<span class="ident" id="3971519"><a href="/mime/multipart/multipart.go.html#3966789">io</a></span><span class="op" id="3971521">.</span><span class="ident" id="3971522">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3971540">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3971543">if</span>&nbsp;<span class="ident" id="3971546"><a href="/mime/multipart/multipart.go.html#3971093">nCopy</a></span>&nbsp;<span class="op" id="3971552">&gt;</span>&nbsp;<span class="num" id="3971554">0</span>&nbsp;<span class="op" id="3971556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3971560">if</span>&nbsp;<span class="ident" id="3971563">_</span><span class="op" id="3971564">,</span>&nbsp;<span class="ident" id="3971566">err</span>&nbsp;<span class="op" id="3971570">:=</span>&nbsp;<span class="ident" id="3971573"><a href="/mime/multipart/multipart.go.html#3966789">io</a></span><span class="op" id="3971575">.</span><span class="ident" id="3971576">CopyN</span><span class="op" id="3971581">(</span><span class="ident" id="3971582"><a href="/mime/multipart/multipart.go.html#3970061">p</a></span><span class="op" id="3971583">.</span><span class="ident" id="3971584">buffer</span><span class="op" id="3971590">,</span>&nbsp;<span class="ident" id="3971592"><a href="/mime/multipart/multipart.go.html#3970061">p</a></span><span class="op" id="3971593">.</span><span class="ident" id="3971594">mr</span><span class="op" id="3971596">.</span><span class="ident" id="3971597">bufReader</span><span class="op" id="3971606">,</span>&nbsp;<span class="ident" id="3971608">int64</span><span class="op" id="3971613">(</span><span class="ident" id="3971614"><a href="/mime/multipart/multipart.go.html#3971093">nCopy</a></span><span class="op" id="3971619">)</span><span class="op" id="3971620">)</span><span class="op" id="3971621">;</span>&nbsp;<span class="ident" id="3971623"><a href="/mime/multipart/multipart.go.html#3971566">err</a></span>&nbsp;<span class="op" id="3971627">!=</span>&nbsp;<span class="ident" id="3971630">nil</span>&nbsp;<span class="op" id="3971634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3971639">return</span>&nbsp;<span class="num" id="3971646">0</span><span class="op" id="3971647">,</span>&nbsp;<span class="ident" id="3971649"><a href="/mime/multipart/multipart.go.html#3971566">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3971655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3971658">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3971661"><a href="/mime/multipart/multipart.go.html#3970040">n</a></span><span class="op" id="3971662">,</span>&nbsp;<span class="ident" id="3971664"><a href="/mime/multipart/multipart.go.html#3970047">err</a></span>&nbsp;<span class="op" id="3971668">=</span>&nbsp;<span class="ident" id="3971670"><a href="/mime/multipart/multipart.go.html#3970061">p</a></span><span class="op" id="3971671">.</span><span class="ident" id="3971672">buffer</span><span class="op" id="3971678">.</span><span class="ident" id="3971679">Read</span><span class="op" id="3971683">(</span><span class="ident" id="3971684"><a href="/mime/multipart/multipart.go.html#3970029">d</a></span><span class="op" id="3971685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3971688">if</span>&nbsp;<span class="ident" id="3971691"><a href="/mime/multipart/multipart.go.html#3970047">err</a></span>&nbsp;<span class="op" id="3971695">==</span>&nbsp;<span class="ident" id="3971698"><a href="/mime/multipart/multipart.go.html#3966789">io</a></span><span class="op" id="3971700">.</span><span class="ident" id="3971701">EOF</span>&nbsp;<span class="op" id="3971705">&amp;&amp;</span>&nbsp;<span class="op" id="3971708">!</span><span class="ident" id="3971709"><a href="/mime/multipart/multipart.go.html#3971105">foundBoundary</a></span>&nbsp;<span class="op" id="3971723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3971727">//&nbsp;If&nbsp;the&nbsp;boundary&nbsp;hasn&#39;t&nbsp;been&nbsp;reached&nbsp;there&#39;s&nbsp;more&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3971784">//&nbsp;read,&nbsp;so&nbsp;don&#39;t&nbsp;pass&nbsp;through&nbsp;an&nbsp;EOF&nbsp;from&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3971840"><a href="/mime/multipart/multipart.go.html#3970047">err</a></span>&nbsp;<span class="op" id="3971844">=</span>&nbsp;<span class="ident" id="3971846">nil</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3971851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3971854">return</span><br>
<span class="lineno"></span><span class="op" id="3971861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3971864">func</span>&nbsp;<span class="op" id="3971869">(</span><span class="ident" id="3971870">p</span>&nbsp;<span class="op" id="3971872">*</span><span class="ident" id="3971873"><a href="/mime/multipart/multipart.go.html#3966939">Part</a></span><span class="op" id="3971877">)</span>&nbsp;<span class="ident" id="3971879">Close</span><span class="op" id="3971884">(</span><span class="op" id="3971885">)</span>&nbsp;<span class="builtintype" id="3971887">error</span>&nbsp;<span class="op" id="3971893">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3971896"><a href="/mime/multipart/multipart.go.html#3966789">io</a></span><span class="op" id="3971898">.</span><span class="ident" id="3971899">Copy</span><span class="op" id="3971903">(</span><span class="ident" id="3971904"><a href="/mime/multipart/multipart.go.html#3966795">ioutil</a></span><span class="op" id="3971910">.</span><span class="ident" id="3971911">Discard</span><span class="op" id="3971918">,</span>&nbsp;<span class="ident" id="3971920"><a href="/mime/multipart/multipart.go.html#3971870">p</a></span><span class="op" id="3971921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3971924">return</span>&nbsp;<span class="ident" id="3971931">nil</span><br>
<span class="lineno"></span><span class="op" id="3971935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3971938">//&nbsp;Reader&nbsp;is&nbsp;an&nbsp;iterator&nbsp;over&nbsp;parts&nbsp;in&nbsp;a&nbsp;MIME&nbsp;multipart&nbsp;body.</span><br>
<span class="lineno">205</span><span class="comment" id="3972000">//&nbsp;Reader&#39;s&nbsp;underlying&nbsp;parser&nbsp;consumes&nbsp;its&nbsp;input&nbsp;as&nbsp;needed.&nbsp;&nbsp;Seeking</span><br>
<span class="lineno"></span><span class="comment" id="3972069">//&nbsp;isn&#39;t&nbsp;supported.</span><br>
<span class="lineno"></span><span class="keyword" id="3972089">type</span>&nbsp;<span class="ident" id="3972094">Reader</span>&nbsp;<span class="keyword" id="3972101">struct</span>&nbsp;<span class="op" id="3972108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3972111">bufReader</span>&nbsp;<span class="op" id="3972121">*</span><span class="ident" id="3972122"><a href="/mime/multipart/multipart.go.html#3966764">bufio</a></span><span class="op" id="3972127">.</span><span class="ident" id="3972128">Reader</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3972137">currentPart</span>&nbsp;<span class="op" id="3972149">*</span><span class="ident" id="3972150"><a href="/mime/multipart/multipart.go.html#3966939">Part</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3972156">partsRead</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3972168">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3972174">nl</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3972191">[</span><span class="op" id="3972192">]</span><span class="builtintype" id="3972193">byte</span>&nbsp;<span class="comment" id="3972198">//&nbsp;&#34;\r\n&#34;&nbsp;or&nbsp;&#34;\n&#34;&nbsp;(set&nbsp;after&nbsp;seeing&nbsp;first&nbsp;boundary&nbsp;line)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3972256">nlDashBoundary</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3972273">[</span><span class="op" id="3972274">]</span><span class="builtintype" id="3972275">byte</span>&nbsp;<span class="comment" id="3972280">//&nbsp;nl&nbsp;+&nbsp;&#34;--boundary&#34;</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3972302">dashBoundaryDash</span>&nbsp;<span class="op" id="3972319">[</span><span class="op" id="3972320">]</span><span class="builtintype" id="3972321">byte</span>&nbsp;<span class="comment" id="3972326">//&nbsp;&#34;--boundary--&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3972345">dashBoundary</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3972362">[</span><span class="op" id="3972363">]</span><span class="builtintype" id="3972364">byte</span>&nbsp;<span class="comment" id="3972369">//&nbsp;&#34;--boundary&#34;</span><br>
<span class="lineno"></span><span class="op" id="3972385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3972388">//&nbsp;NextPart&nbsp;returns&nbsp;the&nbsp;next&nbsp;part&nbsp;in&nbsp;the&nbsp;multipart&nbsp;or&nbsp;an&nbsp;error.</span><br>
<span class="lineno">220</span><span class="comment" id="3972452">//&nbsp;When&nbsp;there&nbsp;are&nbsp;no&nbsp;more&nbsp;parts,&nbsp;the&nbsp;error&nbsp;io.EOF&nbsp;is&nbsp;returned.</span><br>
<span class="lineno"></span><span class="keyword" id="3972515">func</span>&nbsp;<span class="op" id="3972520">(</span><span class="ident" id="3972521">r</span>&nbsp;<span class="op" id="3972523">*</span><span class="ident" id="3972524"><a href="/mime/multipart/multipart.go.html#3972094">Reader</a></span><span class="op" id="3972530">)</span>&nbsp;<span class="ident" id="3972532">NextPart</span><span class="op" id="3972540">(</span><span class="op" id="3972541">)</span>&nbsp;<span class="op" id="3972543">(</span><span class="op" id="3972544">*</span><span class="ident" id="3972545"><a href="/mime/multipart/multipart.go.html#3966939">Part</a></span><span class="op" id="3972549">,</span>&nbsp;<span class="builtintype" id="3972551">error</span><span class="op" id="3972556">)</span>&nbsp;<span class="op" id="3972558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3972561">if</span>&nbsp;<span class="ident" id="3972564"><a href="/mime/multipart/multipart.go.html#3972521">r</a></span><span class="op" id="3972565">.</span><span class="ident" id="3972566">currentPart</span>&nbsp;<span class="op" id="3972578">!=</span>&nbsp;<span class="ident" id="3972581">nil</span>&nbsp;<span class="op" id="3972585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3972589"><a href="/mime/multipart/multipart.go.html#3972521">r</a></span><span class="op" id="3972590">.</span><span class="ident" id="3972591">currentPart</span><span class="op" id="3972602">.</span><span class="ident" id="3972603">Close</span><span class="op" id="3972608">(</span><span class="op" id="3972609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3972612">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3972616">expectNewPart</span>&nbsp;<span class="op" id="3972630">:=</span>&nbsp;<span class="ident" id="3972633">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3972640">for</span>&nbsp;<span class="op" id="3972644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3972648">line</span><span class="op" id="3972652">,</span>&nbsp;<span class="ident" id="3972654">err</span>&nbsp;<span class="op" id="3972658">:=</span>&nbsp;<span class="ident" id="3972661"><a href="/mime/multipart/multipart.go.html#3972521">r</a></span><span class="op" id="3972662">.</span><span class="ident" id="3972663">bufReader</span><span class="op" id="3972672">.</span><span class="ident" id="3972673">ReadSlice</span><span class="op" id="3972682">(</span><span class="string" id="3972683">&#39;\n&#39;</span><span class="op" id="3972687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3972691">if</span>&nbsp;<span class="ident" id="3972694"><a href="/mime/multipart/multipart.go.html#3972654">err</a></span>&nbsp;<span class="op" id="3972698">==</span>&nbsp;<span class="ident" id="3972701"><a href="/mime/multipart/multipart.go.html#3966789">io</a></span><span class="op" id="3972703">.</span><span class="ident" id="3972704">EOF</span>&nbsp;<span class="op" id="3972708">&amp;&amp;</span>&nbsp;<span class="ident" id="3972711"><a href="/mime/multipart/multipart.go.html#3972521">r</a></span><span class="op" id="3972712">.</span><span class="ident" id="3972713">isFinalBoundary</span><span class="op" id="3972728">(</span><span class="ident" id="3972729"><a href="/mime/multipart/multipart.go.html#3972648">line</a></span><span class="op" id="3972733">)</span>&nbsp;<span class="op" id="3972735">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3972740">//&nbsp;If&nbsp;the&nbsp;buffer&nbsp;ends&nbsp;in&nbsp;&#34;--boundary--&#34;&nbsp;without&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3972795">//&nbsp;trailing&nbsp;&#34;\r\n&#34;,&nbsp;ReadSlice&nbsp;will&nbsp;return&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3972849">//&nbsp;(since&nbsp;it&#39;s&nbsp;missing&nbsp;the&nbsp;&#39;\n&#39;),&nbsp;but&nbsp;this&nbsp;is&nbsp;a&nbsp;valid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3972906">//&nbsp;multipart&nbsp;EOF&nbsp;so&nbsp;we&nbsp;need&nbsp;to&nbsp;return&nbsp;io.EOF&nbsp;instead&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3972965">//&nbsp;a&nbsp;fmt-wrapped&nbsp;one.</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3972990">return</span>&nbsp;<span class="ident" id="3972997">nil</span><span class="op" id="3973000">,</span>&nbsp;<span class="ident" id="3973002"><a href="/mime/multipart/multipart.go.html#3966789">io</a></span><span class="op" id="3973004">.</span><span class="ident" id="3973005">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3973011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3973015">if</span>&nbsp;<span class="ident" id="3973018"><a href="/mime/multipart/multipart.go.html#3972654">err</a></span>&nbsp;<span class="op" id="3973022">!=</span>&nbsp;<span class="ident" id="3973025">nil</span>&nbsp;<span class="op" id="3973029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3973034">return</span>&nbsp;<span class="ident" id="3973041">nil</span><span class="op" id="3973044">,</span>&nbsp;<span class="ident" id="3973046"><a href="/mime/multipart/multipart.go.html#3966782">fmt</a></span><span class="op" id="3973049">.</span><span class="ident" id="3973050">Errorf</span><span class="op" id="3973056">(</span><span class="string" id="3973057">&#34;multipart:&nbsp;NextPart:&nbsp;%v&#34;</span><span class="op" id="3973082">,</span>&nbsp;<span class="ident" id="3973084"><a href="/mime/multipart/multipart.go.html#3972654">err</a></span><span class="op" id="3973087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3973091">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3973096">if</span>&nbsp;<span class="ident" id="3973099"><a href="/mime/multipart/multipart.go.html#3972521">r</a></span><span class="op" id="3973100">.</span><span class="ident" id="3973101">isBoundaryDelimiterLine</span><span class="op" id="3973124">(</span><span class="ident" id="3973125"><a href="/mime/multipart/multipart.go.html#3972648">line</a></span><span class="op" id="3973129">)</span>&nbsp;<span class="op" id="3973131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3973136"><a href="/mime/multipart/multipart.go.html#3972521">r</a></span><span class="op" id="3973137">.</span><span class="ident" id="3973138">partsRead</span><span class="op" id="3973147">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3973153">bp</span><span class="op" id="3973155">,</span>&nbsp;<span class="ident" id="3973157">err</span>&nbsp;<span class="op" id="3973161">:=</span>&nbsp;<span class="ident" id="3973164"><a href="/mime/multipart/multipart.go.html#3969086">newPart</a></span><span class="op" id="3973171">(</span><span class="ident" id="3973172"><a href="/mime/multipart/multipart.go.html#3972521">r</a></span><span class="op" id="3973173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3973178">if</span>&nbsp;<span class="ident" id="3973181"><a href="/mime/multipart/multipart.go.html#3973157">err</a></span>&nbsp;<span class="op" id="3973185">!=</span>&nbsp;<span class="ident" id="3973188">nil</span>&nbsp;<span class="op" id="3973192">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3973198">return</span>&nbsp;<span class="ident" id="3973205">nil</span><span class="op" id="3973208">,</span>&nbsp;<span class="ident" id="3973210"><a href="/mime/multipart/multipart.go.html#3973157">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3973217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3973222"><a href="/mime/multipart/multipart.go.html#3972521">r</a></span><span class="op" id="3973223">.</span><span class="ident" id="3973224">currentPart</span>&nbsp;<span class="op" id="3973236">=</span>&nbsp;<span class="ident" id="3973238"><a href="/mime/multipart/multipart.go.html#3973153">bp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3973244">return</span>&nbsp;<span class="ident" id="3973251"><a href="/mime/multipart/multipart.go.html#3973153">bp</a></span><span class="op" id="3973253">,</span>&nbsp;<span class="ident" id="3973255">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3973261">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3973266">if</span>&nbsp;<span class="ident" id="3973269"><a href="/mime/multipart/multipart.go.html#3972521">r</a></span><span class="op" id="3973270">.</span><span class="ident" id="3973271">isFinalBoundary</span><span class="op" id="3973286">(</span><span class="ident" id="3973287"><a href="/mime/multipart/multipart.go.html#3972648">line</a></span><span class="op" id="3973291">)</span>&nbsp;<span class="op" id="3973293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3973298">//&nbsp;Expected&nbsp;EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3973317">return</span>&nbsp;<span class="ident" id="3973324">nil</span><span class="op" id="3973327">,</span>&nbsp;<span class="ident" id="3973329"><a href="/mime/multipart/multipart.go.html#3966789">io</a></span><span class="op" id="3973331">.</span><span class="ident" id="3973332">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3973338">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3973343">if</span>&nbsp;<span class="ident" id="3973346"><a href="/mime/multipart/multipart.go.html#3972616">expectNewPart</a></span>&nbsp;<span class="op" id="3973360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3973365">return</span>&nbsp;<span class="ident" id="3973372">nil</span><span class="op" id="3973375">,</span>&nbsp;<span class="ident" id="3973377"><a href="/mime/multipart/multipart.go.html#3966782">fmt</a></span><span class="op" id="3973380">.</span><span class="ident" id="3973381">Errorf</span><span class="op" id="3973387">(</span><span class="string" id="3973388">&#34;multipart:&nbsp;expecting&nbsp;a&nbsp;new&nbsp;Part;&nbsp;got&nbsp;line&nbsp;%q&#34;</span><span class="op" id="3973434">,</span>&nbsp;<span class="builtintype" id="3973436">string</span><span class="op" id="3973442">(</span><span class="ident" id="3973443"><a href="/mime/multipart/multipart.go.html#3972648">line</a></span><span class="op" id="3973447">)</span><span class="op" id="3973448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3973452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3973457">if</span>&nbsp;<span class="ident" id="3973460"><a href="/mime/multipart/multipart.go.html#3972521">r</a></span><span class="op" id="3973461">.</span><span class="ident" id="3973462">partsRead</span>&nbsp;<span class="op" id="3973472">==</span>&nbsp;<span class="num" id="3973475">0</span>&nbsp;<span class="op" id="3973477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3973482">//&nbsp;skip&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3973498">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3973509">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3973514">//&nbsp;Consume&nbsp;the&nbsp;&#34;\n&#34;&nbsp;or&nbsp;&#34;\r\n&#34;&nbsp;separator&nbsp;between&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3973568">//&nbsp;body&nbsp;of&nbsp;the&nbsp;previous&nbsp;part&nbsp;and&nbsp;the&nbsp;boundary&nbsp;line&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3973624">//&nbsp;now&nbsp;expect&nbsp;will&nbsp;follow.&nbsp;(either&nbsp;a&nbsp;new&nbsp;part&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3973679">//&nbsp;end&nbsp;boundary)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3973698">if</span>&nbsp;<span class="ident" id="3973701"><a href="/mime/multipart/multipart.go.html#3966773">bytes</a></span><span class="op" id="3973706">.</span><span class="ident" id="3973707">Equal</span><span class="op" id="3973712">(</span><span class="ident" id="3973713"><a href="/mime/multipart/multipart.go.html#3972648">line</a></span><span class="op" id="3973717">,</span>&nbsp;<span class="ident" id="3973719"><a href="/mime/multipart/multipart.go.html#3972521">r</a></span><span class="op" id="3973720">.</span><span class="ident" id="3973721">nl</span><span class="op" id="3973723">)</span>&nbsp;<span class="op" id="3973725">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3973730"><a href="/mime/multipart/multipart.go.html#3972616">expectNewPart</a></span>&nbsp;<span class="op" id="3973744">=</span>&nbsp;<span class="ident" id="3973746">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3973754">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3973765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3973770">return</span>&nbsp;<span class="ident" id="3973777">nil</span><span class="op" id="3973780">,</span>&nbsp;<span class="ident" id="3973782"><a href="/mime/multipart/multipart.go.html#3966782">fmt</a></span><span class="op" id="3973785">.</span><span class="ident" id="3973786">Errorf</span><span class="op" id="3973792">(</span><span class="string" id="3973793">&#34;multipart:&nbsp;unexpected&nbsp;line&nbsp;in&nbsp;Next():&nbsp;%q&#34;</span><span class="op" id="3973835">,</span>&nbsp;<span class="ident" id="3973837"><a href="/mime/multipart/multipart.go.html#3972648">line</a></span><span class="op" id="3973841">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3973844">}</span><br>
<span class="lineno"></span><span class="op" id="3973846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3973849">//&nbsp;isFinalBoundary&nbsp;reports&nbsp;whether&nbsp;line&nbsp;is&nbsp;the&nbsp;final&nbsp;boundary&nbsp;line</span><br>
<span class="lineno"></span><span class="comment" id="3973916">//&nbsp;indicating&nbsp;that&nbsp;all&nbsp;parts&nbsp;are&nbsp;over.</span><br>
<span class="lineno">280</span><span class="comment" id="3973955">//&nbsp;It&nbsp;matches&nbsp;`^--boundary--[&nbsp;\t]*(\r\n)?$`</span><br>
<span class="lineno"></span><span class="keyword" id="3973999">func</span>&nbsp;<span class="op" id="3974004">(</span><span class="ident" id="3974005">mr</span>&nbsp;<span class="op" id="3974008">*</span><span class="ident" id="3974009"><a href="/mime/multipart/multipart.go.html#3972094">Reader</a></span><span class="op" id="3974015">)</span>&nbsp;<span class="ident" id="3974017">isFinalBoundary</span><span class="op" id="3974032">(</span><span class="ident" id="3974033">line</span>&nbsp;<span class="op" id="3974038">[</span><span class="op" id="3974039">]</span><span class="builtintype" id="3974040">byte</span><span class="op" id="3974044">)</span>&nbsp;<span class="builtintype" id="3974046">bool</span>&nbsp;<span class="op" id="3974051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3974054">if</span>&nbsp;<span class="op" id="3974057">!</span><span class="ident" id="3974058"><a href="/mime/multipart/multipart.go.html#3966773">bytes</a></span><span class="op" id="3974063">.</span><span class="ident" id="3974064">HasPrefix</span><span class="op" id="3974073">(</span><span class="ident" id="3974074"><a href="/mime/multipart/multipart.go.html#3974033">line</a></span><span class="op" id="3974078">,</span>&nbsp;<span class="ident" id="3974080"><a href="/mime/multipart/multipart.go.html#3974005">mr</a></span><span class="op" id="3974082">.</span><span class="ident" id="3974083">dashBoundaryDash</span><span class="op" id="3974099">)</span>&nbsp;<span class="op" id="3974101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3974105">return</span>&nbsp;<span class="ident" id="3974112">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3974119">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3974122">rest</span>&nbsp;<span class="op" id="3974127">:=</span>&nbsp;<span class="ident" id="3974130"><a href="/mime/multipart/multipart.go.html#3974033">line</a></span><span class="op" id="3974134">[</span><span class="builtinfunc" id="3974135">len</span><span class="op" id="3974138">(</span><span class="ident" id="3974139"><a href="/mime/multipart/multipart.go.html#3974005">mr</a></span><span class="op" id="3974141">.</span><span class="ident" id="3974142">dashBoundaryDash</span><span class="op" id="3974158">)</span><span class="op" id="3974159">:</span><span class="op" id="3974160">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3974163"><a href="/mime/multipart/multipart.go.html#3974122">rest</a></span>&nbsp;<span class="op" id="3974168">=</span>&nbsp;<span class="ident" id="3974170"><a href="/mime/multipart/multipart.go.html#3976295">skipLWSPChar</a></span><span class="op" id="3974182">(</span><span class="ident" id="3974183"><a href="/mime/multipart/multipart.go.html#3974122">rest</a></span><span class="op" id="3974187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3974190">return</span>&nbsp;<span class="builtinfunc" id="3974197">len</span><span class="op" id="3974200">(</span><span class="ident" id="3974201"><a href="/mime/multipart/multipart.go.html#3974122">rest</a></span><span class="op" id="3974205">)</span>&nbsp;<span class="op" id="3974207">==</span>&nbsp;<span class="num" id="3974210">0</span>&nbsp;<span class="op" id="3974212">||</span>&nbsp;<span class="ident" id="3974215"><a href="/mime/multipart/multipart.go.html#3966773">bytes</a></span><span class="op" id="3974220">.</span><span class="ident" id="3974221">Equal</span><span class="op" id="3974226">(</span><span class="ident" id="3974227"><a href="/mime/multipart/multipart.go.html#3974122">rest</a></span><span class="op" id="3974231">,</span>&nbsp;<span class="ident" id="3974233"><a href="/mime/multipart/multipart.go.html#3974005">mr</a></span><span class="op" id="3974235">.</span><span class="ident" id="3974236">nl</span><span class="op" id="3974238">)</span><br>
<span class="lineno"></span><span class="op" id="3974240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="keyword" id="3974243">func</span>&nbsp;<span class="op" id="3974248">(</span><span class="ident" id="3974249">mr</span>&nbsp;<span class="op" id="3974252">*</span><span class="ident" id="3974253"><a href="/mime/multipart/multipart.go.html#3972094">Reader</a></span><span class="op" id="3974259">)</span>&nbsp;<span class="ident" id="3974261">isBoundaryDelimiterLine</span><span class="op" id="3974284">(</span><span class="ident" id="3974285">line</span>&nbsp;<span class="op" id="3974290">[</span><span class="op" id="3974291">]</span><span class="builtintype" id="3974292">byte</span><span class="op" id="3974296">)</span>&nbsp;<span class="op" id="3974298">(</span><span class="ident" id="3974299">ret</span>&nbsp;<span class="builtintype" id="3974303">bool</span><span class="op" id="3974307">)</span>&nbsp;<span class="op" id="3974309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3974312">//&nbsp;http://tools.ietf.org/html/rfc2046#section-5.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3974363">//&nbsp;&nbsp;&nbsp;The&nbsp;boundary&nbsp;delimiter&nbsp;line&nbsp;is&nbsp;then&nbsp;defined&nbsp;as&nbsp;a&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3974423">//&nbsp;&nbsp;&nbsp;consisting&nbsp;entirely&nbsp;of&nbsp;two&nbsp;hyphen&nbsp;characters&nbsp;(&#34;-&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3974480">//&nbsp;&nbsp;&nbsp;decimal&nbsp;value&nbsp;45)&nbsp;followed&nbsp;by&nbsp;the&nbsp;boundary&nbsp;parameter</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3974539">//&nbsp;&nbsp;&nbsp;value&nbsp;from&nbsp;the&nbsp;Content-Type&nbsp;header&nbsp;field,&nbsp;optional&nbsp;linear</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3974603">//&nbsp;&nbsp;&nbsp;whitespace,&nbsp;and&nbsp;a&nbsp;terminating&nbsp;CRLF.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3974645">if</span>&nbsp;<span class="op" id="3974648">!</span><span class="ident" id="3974649"><a href="/mime/multipart/multipart.go.html#3966773">bytes</a></span><span class="op" id="3974654">.</span><span class="ident" id="3974655">HasPrefix</span><span class="op" id="3974664">(</span><span class="ident" id="3974665"><a href="/mime/multipart/multipart.go.html#3974285">line</a></span><span class="op" id="3974669">,</span>&nbsp;<span class="ident" id="3974671"><a href="/mime/multipart/multipart.go.html#3974249">mr</a></span><span class="op" id="3974673">.</span><span class="ident" id="3974674">dashBoundary</span><span class="op" id="3974686">)</span>&nbsp;<span class="op" id="3974688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3974692">return</span>&nbsp;<span class="ident" id="3974699">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3974706">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3974709">rest</span>&nbsp;<span class="op" id="3974714">:=</span>&nbsp;<span class="ident" id="3974717"><a href="/mime/multipart/multipart.go.html#3974285">line</a></span><span class="op" id="3974721">[</span><span class="builtinfunc" id="3974722">len</span><span class="op" id="3974725">(</span><span class="ident" id="3974726"><a href="/mime/multipart/multipart.go.html#3974249">mr</a></span><span class="op" id="3974728">.</span><span class="ident" id="3974729">dashBoundary</span><span class="op" id="3974741">)</span><span class="op" id="3974742">:</span><span class="op" id="3974743">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3974746"><a href="/mime/multipart/multipart.go.html#3974709">rest</a></span>&nbsp;<span class="op" id="3974751">=</span>&nbsp;<span class="ident" id="3974753"><a href="/mime/multipart/multipart.go.html#3976295">skipLWSPChar</a></span><span class="op" id="3974765">(</span><span class="ident" id="3974766"><a href="/mime/multipart/multipart.go.html#3974709">rest</a></span><span class="op" id="3974770">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3974774">//&nbsp;On&nbsp;the&nbsp;first&nbsp;part,&nbsp;see&nbsp;our&nbsp;lines&nbsp;are&nbsp;ending&nbsp;in&nbsp;\n&nbsp;instead&nbsp;of&nbsp;\r\n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3974844">//&nbsp;and&nbsp;switch&nbsp;into&nbsp;that&nbsp;mode&nbsp;if&nbsp;so.&nbsp;&nbsp;This&nbsp;is&nbsp;a&nbsp;violation&nbsp;of&nbsp;the&nbsp;spec,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3974915">//&nbsp;but&nbsp;occurs&nbsp;in&nbsp;practice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3974943">if</span>&nbsp;<span class="ident" id="3974946"><a href="/mime/multipart/multipart.go.html#3974249">mr</a></span><span class="op" id="3974948">.</span><span class="ident" id="3974949">partsRead</span>&nbsp;<span class="op" id="3974959">==</span>&nbsp;<span class="num" id="3974962">0</span>&nbsp;<span class="op" id="3974964">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3974967">len</span><span class="op" id="3974970">(</span><span class="ident" id="3974971"><a href="/mime/multipart/multipart.go.html#3974709">rest</a></span><span class="op" id="3974975">)</span>&nbsp;<span class="op" id="3974977">==</span>&nbsp;<span class="num" id="3974980">1</span>&nbsp;<span class="op" id="3974982">&amp;&amp;</span>&nbsp;<span class="ident" id="3974985"><a href="/mime/multipart/multipart.go.html#3974709">rest</a></span><span class="op" id="3974989">[</span><span class="num" id="3974990">0</span><span class="op" id="3974991">]</span>&nbsp;<span class="op" id="3974993">==</span>&nbsp;<span class="string" id="3974996">&#39;\n&#39;</span>&nbsp;<span class="op" id="3975001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3975005"><a href="/mime/multipart/multipart.go.html#3974249">mr</a></span><span class="op" id="3975007">.</span><span class="ident" id="3975008">nl</span>&nbsp;<span class="op" id="3975011">=</span>&nbsp;<span class="ident" id="3975013"><a href="/mime/multipart/multipart.go.html#3974249">mr</a></span><span class="op" id="3975015">.</span><span class="ident" id="3975016">nl</span><span class="op" id="3975018">[</span><span class="num" id="3975019">1</span><span class="op" id="3975020">:</span><span class="op" id="3975021">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3975025"><a href="/mime/multipart/multipart.go.html#3974249">mr</a></span><span class="op" id="3975027">.</span><span class="ident" id="3975028">nlDashBoundary</span>&nbsp;<span class="op" id="3975043">=</span>&nbsp;<span class="ident" id="3975045"><a href="/mime/multipart/multipart.go.html#3974249">mr</a></span><span class="op" id="3975047">.</span><span class="ident" id="3975048">nlDashBoundary</span><span class="op" id="3975062">[</span><span class="num" id="3975063">1</span><span class="op" id="3975064">:</span><span class="op" id="3975065">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3975068">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3975071">return</span>&nbsp;<span class="ident" id="3975078"><a href="/mime/multipart/multipart.go.html#3966773">bytes</a></span><span class="op" id="3975083">.</span><span class="ident" id="3975084">Equal</span><span class="op" id="3975089">(</span><span class="ident" id="3975090"><a href="/mime/multipart/multipart.go.html#3974709">rest</a></span><span class="op" id="3975094">,</span>&nbsp;<span class="ident" id="3975096"><a href="/mime/multipart/multipart.go.html#3974249">mr</a></span><span class="op" id="3975098">.</span><span class="ident" id="3975099">nl</span><span class="op" id="3975101">)</span><br>
<span class="lineno"></span><span class="op" id="3975103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3975106">//&nbsp;peekBufferIsEmptyPart&nbsp;reports&nbsp;whether&nbsp;the&nbsp;provided&nbsp;peek-ahead</span><br>
<span class="lineno"></span><span class="comment" id="3975171">//&nbsp;buffer&nbsp;represents&nbsp;an&nbsp;empty&nbsp;part.&nbsp;It&nbsp;is&nbsp;called&nbsp;only&nbsp;if&nbsp;we&#39;ve&nbsp;not</span><br>
<span class="lineno">315</span><span class="comment" id="3975238">//&nbsp;already&nbsp;read&nbsp;any&nbsp;bytes&nbsp;in&nbsp;this&nbsp;part&nbsp;and&nbsp;checks&nbsp;for&nbsp;the&nbsp;case&nbsp;of&nbsp;MIME</span><br>
<span class="lineno"></span><span class="comment" id="3975309">//&nbsp;software&nbsp;not&nbsp;writing&nbsp;the&nbsp;\r\n&nbsp;on&nbsp;empty&nbsp;parts.&nbsp;Some&nbsp;does,&nbsp;some</span><br>
<span class="lineno"></span><span class="comment" id="3975374">//&nbsp;doesn&#39;t.</span><br>
<span class="lineno"></span><span class="comment" id="3975386">//</span><br>
<span class="lineno"></span><span class="comment" id="3975389">//&nbsp;This&nbsp;checks&nbsp;that&nbsp;what&nbsp;follows&nbsp;the&nbsp;&#34;--boundary&#34;&nbsp;is&nbsp;actually&nbsp;the&nbsp;end</span><br>
<span class="lineno">320</span><span class="comment" id="3975459">//&nbsp;(&#34;--boundary--&#34;&nbsp;with&nbsp;optional&nbsp;whitespace)&nbsp;or&nbsp;optional&nbsp;whitespace</span><br>
<span class="lineno"></span><span class="comment" id="3975527">//&nbsp;and&nbsp;then&nbsp;a&nbsp;newline,&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;catch&nbsp;&#34;--boundaryFAKE&#34;,&nbsp;in&nbsp;which</span><br>
<span class="lineno"></span><span class="comment" id="3975595">//&nbsp;case&nbsp;the&nbsp;whole&nbsp;line&nbsp;is&nbsp;part&nbsp;of&nbsp;the&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="3975639">func</span>&nbsp;<span class="op" id="3975644">(</span><span class="ident" id="3975645">mr</span>&nbsp;<span class="op" id="3975648">*</span><span class="ident" id="3975649"><a href="/mime/multipart/multipart.go.html#3972094">Reader</a></span><span class="op" id="3975655">)</span>&nbsp;<span class="ident" id="3975657">peekBufferIsEmptyPart</span><span class="op" id="3975678">(</span><span class="ident" id="3975679">peek</span>&nbsp;<span class="op" id="3975684">[</span><span class="op" id="3975685">]</span><span class="builtintype" id="3975686">byte</span><span class="op" id="3975690">)</span>&nbsp;<span class="builtintype" id="3975692">bool</span>&nbsp;<span class="op" id="3975697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3975700">//&nbsp;End&nbsp;of&nbsp;parts&nbsp;case.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3975723">//&nbsp;Test&nbsp;whether&nbsp;peek&nbsp;matches&nbsp;`^--boundary--[&nbsp;\t]*(?:\r\n|$)`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3975785">if</span>&nbsp;<span class="ident" id="3975788"><a href="/mime/multipart/multipart.go.html#3966773">bytes</a></span><span class="op" id="3975793">.</span><span class="ident" id="3975794">HasPrefix</span><span class="op" id="3975803">(</span><span class="ident" id="3975804"><a href="/mime/multipart/multipart.go.html#3975679">peek</a></span><span class="op" id="3975808">,</span>&nbsp;<span class="ident" id="3975810"><a href="/mime/multipart/multipart.go.html#3975645">mr</a></span><span class="op" id="3975812">.</span><span class="ident" id="3975813">dashBoundaryDash</span><span class="op" id="3975829">)</span>&nbsp;<span class="op" id="3975831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3975835">rest</span>&nbsp;<span class="op" id="3975840">:=</span>&nbsp;<span class="ident" id="3975843"><a href="/mime/multipart/multipart.go.html#3975679">peek</a></span><span class="op" id="3975847">[</span><span class="builtinfunc" id="3975848">len</span><span class="op" id="3975851">(</span><span class="ident" id="3975852"><a href="/mime/multipart/multipart.go.html#3975645">mr</a></span><span class="op" id="3975854">.</span><span class="ident" id="3975855">dashBoundaryDash</span><span class="op" id="3975871">)</span><span class="op" id="3975872">:</span><span class="op" id="3975873">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3975877"><a href="/mime/multipart/multipart.go.html#3975835">rest</a></span>&nbsp;<span class="op" id="3975882">=</span>&nbsp;<span class="ident" id="3975884"><a href="/mime/multipart/multipart.go.html#3976295">skipLWSPChar</a></span><span class="op" id="3975896">(</span><span class="ident" id="3975897"><a href="/mime/multipart/multipart.go.html#3975835">rest</a></span><span class="op" id="3975901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3975905">return</span>&nbsp;<span class="ident" id="3975912"><a href="/mime/multipart/multipart.go.html#3966773">bytes</a></span><span class="op" id="3975917">.</span><span class="ident" id="3975918">HasPrefix</span><span class="op" id="3975927">(</span><span class="ident" id="3975928"><a href="/mime/multipart/multipart.go.html#3975835">rest</a></span><span class="op" id="3975932">,</span>&nbsp;<span class="ident" id="3975934"><a href="/mime/multipart/multipart.go.html#3975645">mr</a></span><span class="op" id="3975936">.</span><span class="ident" id="3975937">nl</span><span class="op" id="3975939">)</span>&nbsp;<span class="op" id="3975941">||</span>&nbsp;<span class="builtinfunc" id="3975944">len</span><span class="op" id="3975947">(</span><span class="ident" id="3975948"><a href="/mime/multipart/multipart.go.html#3975835">rest</a></span><span class="op" id="3975952">)</span>&nbsp;<span class="op" id="3975954">==</span>&nbsp;<span class="num" id="3975957">0</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3975960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3975963">if</span>&nbsp;<span class="op" id="3975966">!</span><span class="ident" id="3975967"><a href="/mime/multipart/multipart.go.html#3966773">bytes</a></span><span class="op" id="3975972">.</span><span class="ident" id="3975973">HasPrefix</span><span class="op" id="3975982">(</span><span class="ident" id="3975983"><a href="/mime/multipart/multipart.go.html#3975679">peek</a></span><span class="op" id="3975987">,</span>&nbsp;<span class="ident" id="3975989"><a href="/mime/multipart/multipart.go.html#3975645">mr</a></span><span class="op" id="3975991">.</span><span class="ident" id="3975992">dashBoundary</span><span class="op" id="3976004">)</span>&nbsp;<span class="op" id="3976006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3976010">return</span>&nbsp;<span class="ident" id="3976017">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3976024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3976027">//&nbsp;Test&nbsp;whether&nbsp;rest&nbsp;matches&nbsp;`^[&nbsp;\t]*\r\n`)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976072">rest</span>&nbsp;<span class="op" id="3976077">:=</span>&nbsp;<span class="ident" id="3976080"><a href="/mime/multipart/multipart.go.html#3975679">peek</a></span><span class="op" id="3976084">[</span><span class="builtinfunc" id="3976085">len</span><span class="op" id="3976088">(</span><span class="ident" id="3976089"><a href="/mime/multipart/multipart.go.html#3975645">mr</a></span><span class="op" id="3976091">.</span><span class="ident" id="3976092">dashBoundary</span><span class="op" id="3976104">)</span><span class="op" id="3976105">:</span><span class="op" id="3976106">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976109"><a href="/mime/multipart/multipart.go.html#3976072">rest</a></span>&nbsp;<span class="op" id="3976114">=</span>&nbsp;<span class="ident" id="3976116"><a href="/mime/multipart/multipart.go.html#3976295">skipLWSPChar</a></span><span class="op" id="3976128">(</span><span class="ident" id="3976129"><a href="/mime/multipart/multipart.go.html#3976072">rest</a></span><span class="op" id="3976133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3976136">return</span>&nbsp;<span class="ident" id="3976143"><a href="/mime/multipart/multipart.go.html#3966773">bytes</a></span><span class="op" id="3976148">.</span><span class="ident" id="3976149">HasPrefix</span><span class="op" id="3976158">(</span><span class="ident" id="3976159"><a href="/mime/multipart/multipart.go.html#3976072">rest</a></span><span class="op" id="3976163">,</span>&nbsp;<span class="ident" id="3976165"><a href="/mime/multipart/multipart.go.html#3975645">mr</a></span><span class="op" id="3976167">.</span><span class="ident" id="3976168">nl</span><span class="op" id="3976170">)</span><br>
<span class="lineno"></span><span class="op" id="3976172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="comment" id="3976175">//&nbsp;skipLWSPChar&nbsp;returns&nbsp;b&nbsp;with&nbsp;leading&nbsp;spaces&nbsp;and&nbsp;tabs&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="3976239">//&nbsp;RFC&nbsp;822&nbsp;defines:</span><br>
<span class="lineno"></span><span class="comment" id="3976259">//&nbsp;&nbsp;&nbsp;&nbsp;LWSP-char&nbsp;=&nbsp;SPACE&nbsp;/&nbsp;HTAB</span><br>
<span class="lineno"></span><span class="keyword" id="3976290">func</span>&nbsp;<span class="ident" id="3976295">skipLWSPChar</span><span class="op" id="3976307">(</span><span class="ident" id="3976308">b</span>&nbsp;<span class="op" id="3976310">[</span><span class="op" id="3976311">]</span><span class="builtintype" id="3976312">byte</span><span class="op" id="3976316">)</span>&nbsp;<span class="op" id="3976318">[</span><span class="op" id="3976319">]</span><span class="builtintype" id="3976320">byte</span>&nbsp;<span class="op" id="3976325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3976328">for</span>&nbsp;<span class="builtinfunc" id="3976332">len</span><span class="op" id="3976335">(</span><span class="ident" id="3976336"><a href="/mime/multipart/multipart.go.html#3976308">b</a></span><span class="op" id="3976337">)</span>&nbsp;<span class="op" id="3976339">&gt;</span>&nbsp;<span class="num" id="3976341">0</span>&nbsp;<span class="op" id="3976343">&amp;&amp;</span>&nbsp;<span class="op" id="3976346">(</span><span class="ident" id="3976347"><a href="/mime/multipart/multipart.go.html#3976308">b</a></span><span class="op" id="3976348">[</span><span class="num" id="3976349">0</span><span class="op" id="3976350">]</span>&nbsp;<span class="op" id="3976352">==</span>&nbsp;<span class="string" id="3976355">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3976359">||</span>&nbsp;<span class="ident" id="3976362"><a href="/mime/multipart/multipart.go.html#3976308">b</a></span><span class="op" id="3976363">[</span><span class="num" id="3976364">0</span><span class="op" id="3976365">]</span>&nbsp;<span class="op" id="3976367">==</span>&nbsp;<span class="string" id="3976370">&#39;\t&#39;</span><span class="op" id="3976374">)</span>&nbsp;<span class="op" id="3976376">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976380"><a href="/mime/multipart/multipart.go.html#3976308">b</a></span>&nbsp;<span class="op" id="3976382">=</span>&nbsp;<span class="ident" id="3976384"><a href="/mime/multipart/multipart.go.html#3976308">b</a></span><span class="op" id="3976385">[</span><span class="num" id="3976386">1</span><span class="op" id="3976387">:</span><span class="op" id="3976388">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3976391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3976394">return</span>&nbsp;<span class="ident" id="3976401"><a href="/mime/multipart/multipart.go.html#3976308">b</a></span><br>
<span class="lineno"></span><span class="op" id="3976403">}</span>
</div>
</body>
</html>
