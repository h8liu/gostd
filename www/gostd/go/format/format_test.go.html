<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/format</h2>
<ul>
<li><a href="/gostd/go/format/format.go.html">format.go</a></li>
<li><a href="/gostd/go/format/format_test.go.html">format_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8401694">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8401749">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8401803">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8401854">package</span>&nbsp;<span class="ident" id="8401862">format</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8401870">import</span>&nbsp;<span class="op" id="8401877">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8401880">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8401889">&#34;go/parser&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8401902">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8401914">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8401927">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8401938">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8401948">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8401951">const</span>&nbsp;<span class="ident" id="8401957">testfile</span>&nbsp;<span class="op" id="8401966">=</span>&nbsp;<span class="string" id="8401968">&#34;format_test.go&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8401986">func</span>&nbsp;<span class="ident" id="8401991">diff</span><span class="op" id="8401995">(</span><span class="ident" id="8401996">t</span>&nbsp;<span class="op" id="8401998">*</span><span class="ident" id="8401999">testing</span><span class="op" id="8402006">.</span><span class="ident" id="8402007">T</span><span class="op" id="8402008">,</span>&nbsp;<span class="ident" id="8402010">dst</span><span class="op" id="8402013">,</span>&nbsp;<span class="ident" id="8402015">src</span>&nbsp;<span class="op" id="8402019">[</span><span class="op" id="8402020">]</span><span class="builtintype" id="8402021">byte</span><span class="op" id="8402025">)</span>&nbsp;<span class="op" id="8402027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402030">line</span>&nbsp;<span class="op" id="8402035">:=</span>&nbsp;<span class="num" id="8402038">1</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402041">offs</span>&nbsp;<span class="op" id="8402046">:=</span>&nbsp;<span class="num" id="8402049">0</span>&nbsp;<span class="comment" id="8402051">//&nbsp;line&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402067">for</span>&nbsp;<span class="ident" id="8402071">i</span>&nbsp;<span class="op" id="8402073">:=</span>&nbsp;<span class="num" id="8402076">0</span><span class="op" id="8402077">;</span>&nbsp;<span class="ident" id="8402079">i</span>&nbsp;<span class="op" id="8402081">&lt;</span>&nbsp;<span class="builtinfunc" id="8402083">len</span><span class="op" id="8402086">(</span><span class="ident" id="8402087">dst</span><span class="op" id="8402090">)</span>&nbsp;<span class="op" id="8402092">&amp;&amp;</span>&nbsp;<span class="ident" id="8402095">i</span>&nbsp;<span class="op" id="8402097">&lt;</span>&nbsp;<span class="builtinfunc" id="8402099">len</span><span class="op" id="8402102">(</span><span class="ident" id="8402103">src</span><span class="op" id="8402106">)</span><span class="op" id="8402107">;</span>&nbsp;<span class="ident" id="8402109">i</span><span class="op" id="8402110">++</span>&nbsp;<span class="op" id="8402113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402117">d</span>&nbsp;<span class="op" id="8402119">:=</span>&nbsp;<span class="ident" id="8402122">dst</span><span class="op" id="8402125">[</span><span class="ident" id="8402126">i</span><span class="op" id="8402127">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402131">s</span>&nbsp;<span class="op" id="8402133">:=</span>&nbsp;<span class="ident" id="8402136">src</span><span class="op" id="8402139">[</span><span class="ident" id="8402140">i</span><span class="op" id="8402141">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402145">if</span>&nbsp;<span class="ident" id="8402148">d</span>&nbsp;<span class="op" id="8402150">!=</span>&nbsp;<span class="ident" id="8402153">s</span>&nbsp;<span class="op" id="8402155">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402160">t</span><span class="op" id="8402161">.</span><span class="ident" id="8402162">Errorf</span><span class="op" id="8402168">(</span><span class="string" id="8402169">&#34;dst:%d:&nbsp;%s\n&#34;</span><span class="op" id="8402183">,</span>&nbsp;<span class="ident" id="8402185">line</span><span class="op" id="8402189">,</span>&nbsp;<span class="ident" id="8402191">dst</span><span class="op" id="8402194">[</span><span class="ident" id="8402195">offs</span><span class="op" id="8402199">:</span><span class="ident" id="8402200">i</span><span class="op" id="8402201">+</span><span class="num" id="8402202">1</span><span class="op" id="8402203">]</span><span class="op" id="8402204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402209">t</span><span class="op" id="8402210">.</span><span class="ident" id="8402211">Errorf</span><span class="op" id="8402217">(</span><span class="string" id="8402218">&#34;src:%d:&nbsp;%s\n&#34;</span><span class="op" id="8402232">,</span>&nbsp;<span class="ident" id="8402234">line</span><span class="op" id="8402238">,</span>&nbsp;<span class="ident" id="8402240">src</span><span class="op" id="8402243">[</span><span class="ident" id="8402244">offs</span><span class="op" id="8402248">:</span><span class="ident" id="8402249">i</span><span class="op" id="8402250">+</span><span class="num" id="8402251">1</span><span class="op" id="8402252">]</span><span class="op" id="8402253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402258">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402271">if</span>&nbsp;<span class="ident" id="8402274">s</span>&nbsp;<span class="op" id="8402276">==</span>&nbsp;<span class="string" id="8402279">&#39;\n&#39;</span>&nbsp;<span class="op" id="8402284">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402289">line</span><span class="op" id="8402293">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402299">offs</span>&nbsp;<span class="op" id="8402304">=</span>&nbsp;<span class="ident" id="8402306">i</span>&nbsp;<span class="op" id="8402308">+</span>&nbsp;<span class="num" id="8402310">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402320">if</span>&nbsp;<span class="builtinfunc" id="8402323">len</span><span class="op" id="8402326">(</span><span class="ident" id="8402327">dst</span><span class="op" id="8402330">)</span>&nbsp;<span class="op" id="8402332">!=</span>&nbsp;<span class="builtinfunc" id="8402335">len</span><span class="op" id="8402338">(</span><span class="ident" id="8402339">src</span><span class="op" id="8402342">)</span>&nbsp;<span class="op" id="8402344">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402348">t</span><span class="op" id="8402349">.</span><span class="ident" id="8402350">Errorf</span><span class="op" id="8402356">(</span><span class="string" id="8402357">&#34;len(dst)&nbsp;=&nbsp;%d,&nbsp;len(src)&nbsp;=&nbsp;%d\nsrc&nbsp;=&nbsp;%q&#34;</span><span class="op" id="8402397">,</span>&nbsp;<span class="builtinfunc" id="8402399">len</span><span class="op" id="8402402">(</span><span class="ident" id="8402403">dst</span><span class="op" id="8402406">)</span><span class="op" id="8402407">,</span>&nbsp;<span class="builtinfunc" id="8402409">len</span><span class="op" id="8402412">(</span><span class="ident" id="8402413">src</span><span class="op" id="8402416">)</span><span class="op" id="8402417">,</span>&nbsp;<span class="ident" id="8402419">src</span><span class="op" id="8402422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402425">}</span><br>
<span class="lineno"></span><span class="op" id="8402427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8402430">func</span>&nbsp;<span class="ident" id="8402435">TestNode</span><span class="op" id="8402443">(</span><span class="ident" id="8402444">t</span>&nbsp;<span class="op" id="8402446">*</span><span class="ident" id="8402447">testing</span><span class="op" id="8402454">.</span><span class="ident" id="8402455">T</span><span class="op" id="8402456">)</span>&nbsp;<span class="op" id="8402458">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402461">src</span><span class="op" id="8402464">,</span>&nbsp;<span class="ident" id="8402466">err</span>&nbsp;<span class="op" id="8402470">:=</span>&nbsp;<span class="ident" id="8402473">ioutil</span><span class="op" id="8402479">.</span><span class="ident" id="8402480">ReadFile</span><span class="op" id="8402488">(</span><span class="ident" id="8402489">testfile</span><span class="op" id="8402497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402500">if</span>&nbsp;<span class="ident" id="8402503">err</span>&nbsp;<span class="op" id="8402507">!=</span>&nbsp;<span class="ident" id="8402510">nil</span>&nbsp;<span class="op" id="8402514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402518">t</span><span class="op" id="8402519">.</span><span class="ident" id="8402520">Fatal</span><span class="op" id="8402525">(</span><span class="ident" id="8402526">err</span><span class="op" id="8402529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402536">fset</span>&nbsp;<span class="op" id="8402541">:=</span>&nbsp;<span class="ident" id="8402544">token</span><span class="op" id="8402549">.</span><span class="ident" id="8402550">NewFileSet</span><span class="op" id="8402560">(</span><span class="op" id="8402561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402564">file</span><span class="op" id="8402568">,</span>&nbsp;<span class="ident" id="8402570">err</span>&nbsp;<span class="op" id="8402574">:=</span>&nbsp;<span class="ident" id="8402577">parser</span><span class="op" id="8402583">.</span><span class="ident" id="8402584">ParseFile</span><span class="op" id="8402593">(</span><span class="ident" id="8402594">fset</span><span class="op" id="8402598">,</span>&nbsp;<span class="ident" id="8402600">testfile</span><span class="op" id="8402608">,</span>&nbsp;<span class="ident" id="8402610">src</span><span class="op" id="8402613">,</span>&nbsp;<span class="ident" id="8402615">parser</span><span class="op" id="8402621">.</span><span class="ident" id="8402622">ParseComments</span><span class="op" id="8402635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402638">if</span>&nbsp;<span class="ident" id="8402641">err</span>&nbsp;<span class="op" id="8402645">!=</span>&nbsp;<span class="ident" id="8402648">nil</span>&nbsp;<span class="op" id="8402652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402656">t</span><span class="op" id="8402657">.</span><span class="ident" id="8402658">Fatal</span><span class="op" id="8402663">(</span><span class="ident" id="8402664">err</span><span class="op" id="8402667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402670">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402674">var</span>&nbsp;<span class="ident" id="8402678">buf</span>&nbsp;<span class="ident" id="8402682">bytes</span><span class="op" id="8402687">.</span><span class="ident" id="8402688">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402697">if</span>&nbsp;<span class="ident" id="8402700">err</span>&nbsp;<span class="op" id="8402704">=</span>&nbsp;<span class="ident" id="8402706">Node</span><span class="op" id="8402710">(</span><span class="op" id="8402711">&amp;</span><span class="ident" id="8402712">buf</span><span class="op" id="8402715">,</span>&nbsp;<span class="ident" id="8402717">fset</span><span class="op" id="8402721">,</span>&nbsp;<span class="ident" id="8402723">file</span><span class="op" id="8402727">)</span><span class="op" id="8402728">;</span>&nbsp;<span class="ident" id="8402730">err</span>&nbsp;<span class="op" id="8402734">!=</span>&nbsp;<span class="ident" id="8402737">nil</span>&nbsp;<span class="op" id="8402741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402745">t</span><span class="op" id="8402746">.</span><span class="ident" id="8402747">Fatal</span><span class="op" id="8402752">(</span><span class="string" id="8402753">&#34;Node&nbsp;failed:&#34;</span><span class="op" id="8402767">,</span>&nbsp;<span class="ident" id="8402769">err</span><span class="op" id="8402772">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402775">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402779">diff</span><span class="op" id="8402783">(</span><span class="ident" id="8402784">t</span><span class="op" id="8402785">,</span>&nbsp;<span class="ident" id="8402787">buf</span><span class="op" id="8402790">.</span><span class="ident" id="8402791">Bytes</span><span class="op" id="8402796">(</span><span class="op" id="8402797">)</span><span class="op" id="8402798">,</span>&nbsp;<span class="ident" id="8402800">src</span><span class="op" id="8402803">)</span><br>
<span class="lineno"></span><span class="op" id="8402805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="8402808">func</span>&nbsp;<span class="ident" id="8402813">TestSource</span><span class="op" id="8402823">(</span><span class="ident" id="8402824">t</span>&nbsp;<span class="op" id="8402826">*</span><span class="ident" id="8402827">testing</span><span class="op" id="8402834">.</span><span class="ident" id="8402835">T</span><span class="op" id="8402836">)</span>&nbsp;<span class="op" id="8402838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402841">src</span><span class="op" id="8402844">,</span>&nbsp;<span class="ident" id="8402846">err</span>&nbsp;<span class="op" id="8402850">:=</span>&nbsp;<span class="ident" id="8402853">ioutil</span><span class="op" id="8402859">.</span><span class="ident" id="8402860">ReadFile</span><span class="op" id="8402868">(</span><span class="ident" id="8402869">testfile</span><span class="op" id="8402877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402880">if</span>&nbsp;<span class="ident" id="8402883">err</span>&nbsp;<span class="op" id="8402887">!=</span>&nbsp;<span class="ident" id="8402890">nil</span>&nbsp;<span class="op" id="8402894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402898">t</span><span class="op" id="8402899">.</span><span class="ident" id="8402900">Fatal</span><span class="op" id="8402905">(</span><span class="ident" id="8402906">err</span><span class="op" id="8402909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402912">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402916">res</span><span class="op" id="8402919">,</span>&nbsp;<span class="ident" id="8402921">err</span>&nbsp;<span class="op" id="8402925">:=</span>&nbsp;<span class="ident" id="8402928">Source</span><span class="op" id="8402934">(</span><span class="ident" id="8402935">src</span><span class="op" id="8402938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402941">if</span>&nbsp;<span class="ident" id="8402944">err</span>&nbsp;<span class="op" id="8402948">!=</span>&nbsp;<span class="ident" id="8402951">nil</span>&nbsp;<span class="op" id="8402955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402959">t</span><span class="op" id="8402960">.</span><span class="ident" id="8402961">Fatal</span><span class="op" id="8402966">(</span><span class="string" id="8402967">&#34;Source&nbsp;failed:&#34;</span><span class="op" id="8402983">,</span>&nbsp;<span class="ident" id="8402985">err</span><span class="op" id="8402988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402991">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402995">diff</span><span class="op" id="8402999">(</span><span class="ident" id="8403000">t</span><span class="op" id="8403001">,</span>&nbsp;<span class="ident" id="8403003">res</span><span class="op" id="8403006">,</span>&nbsp;<span class="ident" id="8403008">src</span><span class="op" id="8403011">)</span><br>
<span class="lineno"></span><span class="op" id="8403013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8403016">//&nbsp;Test&nbsp;cases&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;fail&nbsp;are&nbsp;marked&nbsp;by&nbsp;the&nbsp;prefix&nbsp;&#34;ERROR&#34;.</span><br>
<span class="lineno">75</span><span class="keyword" id="8403090">var</span>&nbsp;<span class="ident" id="8403094">tests</span>&nbsp;<span class="op" id="8403100">=</span>&nbsp;<span class="op" id="8403102">[</span><span class="op" id="8403103">]</span><span class="builtintype" id="8403104">string</span><span class="op" id="8403110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8403113">//&nbsp;declaration&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403135">`import&nbsp;&#34;go/format&#34;`</span><span class="op" id="8403155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403158">&#34;var&nbsp;x&nbsp;int&#34;</span><span class="op" id="8403169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403172">&#34;var&nbsp;x&nbsp;int\n\ntype&nbsp;T&nbsp;struct{}&#34;</span><span class="op" id="8403202">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8403206">//&nbsp;statement&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403226">&#34;x&nbsp;:=&nbsp;0&#34;</span><span class="op" id="8403234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403237">&#34;f(a,&nbsp;b,&nbsp;c)\nvar&nbsp;x&nbsp;int&nbsp;=&nbsp;f(1,&nbsp;2,&nbsp;3)&#34;</span><span class="op" id="8403273">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8403277">//&nbsp;indentation,&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403321">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()&#34;</span><span class="op" id="8403341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403344">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8403370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403373">&#34;\n\t\t\n\n\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8403409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403412">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8403456">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403459">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\nfoo\n`\n\n\n&#34;</span><span class="op" id="8403516">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8403522">//&nbsp;no&nbsp;indentation&nbsp;added&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403566">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\n\t\tfoo\n`\n\n\n&#34;</span><span class="op" id="8403627">,</span>&nbsp;<span class="comment" id="8403629">//&nbsp;no&nbsp;indentation&nbsp;removed&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8403676">//&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403689">&#34;i&nbsp;:=&nbsp;5&nbsp;/*&nbsp;Comment&nbsp;*/&#34;</span><span class="op" id="8403711">,</span>&nbsp;<span class="comment" id="8403713">//&nbsp;Issue&nbsp;5551.</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8403730">//&nbsp;erroneous&nbsp;programs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403753">&#34;ERROR1&nbsp;+&nbsp;2&nbsp;+&#34;</span><span class="op" id="8403767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403770">&#34;ERRORx&nbsp;:=&nbsp;&nbsp;0&#34;</span><span class="op" id="8403784">,</span><br>
<span class="lineno"></span><span class="op" id="8403786">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="8403789">func</span>&nbsp;<span class="ident" id="8403794">String</span><span class="op" id="8403800">(</span><span class="ident" id="8403801">s</span>&nbsp;<span class="builtintype" id="8403803">string</span><span class="op" id="8403809">)</span>&nbsp;<span class="op" id="8403811">(</span><span class="builtintype" id="8403812">string</span><span class="op" id="8403818">,</span>&nbsp;<span class="builtintype" id="8403820">error</span><span class="op" id="8403825">)</span>&nbsp;<span class="op" id="8403827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8403830">res</span><span class="op" id="8403833">,</span>&nbsp;<span class="ident" id="8403835">err</span>&nbsp;<span class="op" id="8403839">:=</span>&nbsp;<span class="ident" id="8403842">Source</span><span class="op" id="8403848">(</span><span class="op" id="8403849">[</span><span class="op" id="8403850">]</span><span class="builtintype" id="8403851">byte</span><span class="op" id="8403855">(</span><span class="ident" id="8403856">s</span><span class="op" id="8403857">)</span><span class="op" id="8403858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8403861">if</span>&nbsp;<span class="ident" id="8403864">err</span>&nbsp;<span class="op" id="8403868">!=</span>&nbsp;<span class="ident" id="8403871">nil</span>&nbsp;<span class="op" id="8403875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8403879">return</span>&nbsp;<span class="string" id="8403886">&#34;&#34;</span><span class="op" id="8403888">,</span>&nbsp;<span class="ident" id="8403890">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8403895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8403898">return</span>&nbsp;<span class="builtintype" id="8403905">string</span><span class="op" id="8403911">(</span><span class="ident" id="8403912">res</span><span class="op" id="8403915">)</span><span class="op" id="8403916">,</span>&nbsp;<span class="ident" id="8403918">nil</span><br>
<span class="lineno"></span><span class="op" id="8403922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8403925">func</span>&nbsp;<span class="ident" id="8403930">TestPartial</span><span class="op" id="8403941">(</span><span class="ident" id="8403942">t</span>&nbsp;<span class="op" id="8403944">*</span><span class="ident" id="8403945">testing</span><span class="op" id="8403952">.</span><span class="ident" id="8403953">T</span><span class="op" id="8403954">)</span>&nbsp;<span class="op" id="8403956">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8403959">for</span>&nbsp;<span class="ident" id="8403963">_</span><span class="op" id="8403964">,</span>&nbsp;<span class="ident" id="8403966">src</span>&nbsp;<span class="op" id="8403970">:=</span>&nbsp;<span class="keyword" id="8403973">range</span>&nbsp;<span class="ident" id="8403979">tests</span>&nbsp;<span class="op" id="8403985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8403989">if</span>&nbsp;<span class="ident" id="8403992">strings</span><span class="op" id="8403999">.</span><span class="ident" id="8404000">HasPrefix</span><span class="op" id="8404009">(</span><span class="ident" id="8404010">src</span><span class="op" id="8404013">,</span>&nbsp;<span class="string" id="8404015">&#34;ERROR&#34;</span><span class="op" id="8404022">)</span>&nbsp;<span class="op" id="8404024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8404029">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;fail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8404057">src</span>&nbsp;<span class="op" id="8404061">=</span>&nbsp;<span class="ident" id="8404063">src</span><span class="op" id="8404066">[</span><span class="num" id="8404067">5</span><span class="op" id="8404068">:</span><span class="op" id="8404069">]</span>&nbsp;<span class="comment" id="8404071">//&nbsp;remove&nbsp;ERROR&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8404097">res</span><span class="op" id="8404100">,</span>&nbsp;<span class="ident" id="8404102">err</span>&nbsp;<span class="op" id="8404106">:=</span>&nbsp;<span class="ident" id="8404109">String</span><span class="op" id="8404115">(</span><span class="ident" id="8404116">src</span><span class="op" id="8404119">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8404124">if</span>&nbsp;<span class="ident" id="8404127">err</span>&nbsp;<span class="op" id="8404131">==</span>&nbsp;<span class="ident" id="8404134">nil</span>&nbsp;<span class="op" id="8404138">&amp;&amp;</span>&nbsp;<span class="ident" id="8404141">res</span>&nbsp;<span class="op" id="8404145">==</span>&nbsp;<span class="ident" id="8404148">src</span>&nbsp;<span class="op" id="8404152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8404158">t</span><span class="op" id="8404159">.</span><span class="ident" id="8404160">Errorf</span><span class="op" id="8404166">(</span><span class="string" id="8404167">&#34;formatting&nbsp;succeeded&nbsp;but&nbsp;was&nbsp;expected&nbsp;to&nbsp;fail:\n%q&#34;</span><span class="op" id="8404219">,</span>&nbsp;<span class="ident" id="8404221">src</span><span class="op" id="8404224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8404229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8404233">}</span>&nbsp;<span class="keyword" id="8404235">else</span>&nbsp;<span class="op" id="8404240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8404245">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;succeed</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8404276">res</span><span class="op" id="8404279">,</span>&nbsp;<span class="ident" id="8404281">err</span>&nbsp;<span class="op" id="8404285">:=</span>&nbsp;<span class="ident" id="8404288">String</span><span class="op" id="8404294">(</span><span class="ident" id="8404295">src</span><span class="op" id="8404298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8404303">if</span>&nbsp;<span class="ident" id="8404306">err</span>&nbsp;<span class="op" id="8404310">!=</span>&nbsp;<span class="ident" id="8404313">nil</span>&nbsp;<span class="op" id="8404317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8404323">t</span><span class="op" id="8404324">.</span><span class="ident" id="8404325">Errorf</span><span class="op" id="8404331">(</span><span class="string" id="8404332">&#34;formatting&nbsp;failed&nbsp;(%s):\n%q&#34;</span><span class="op" id="8404361">,</span>&nbsp;<span class="ident" id="8404363">err</span><span class="op" id="8404366">,</span>&nbsp;<span class="ident" id="8404368">src</span><span class="op" id="8404371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8404376">}</span>&nbsp;<span class="keyword" id="8404378">else</span>&nbsp;<span class="keyword" id="8404383">if</span>&nbsp;<span class="ident" id="8404386">res</span>&nbsp;<span class="op" id="8404390">!=</span>&nbsp;<span class="ident" id="8404393">src</span>&nbsp;<span class="op" id="8404397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8404403">t</span><span class="op" id="8404404">.</span><span class="ident" id="8404405">Errorf</span><span class="op" id="8404411">(</span><span class="string" id="8404412">&#34;formatting&nbsp;incorrect:\nsource:&nbsp;%q\nresult:&nbsp;%q&#34;</span><span class="op" id="8404459">,</span>&nbsp;<span class="ident" id="8404461">src</span><span class="op" id="8404464">,</span>&nbsp;<span class="ident" id="8404466">res</span><span class="op" id="8404469">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8404474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8404478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8404481">}</span><br>
<span class="lineno"></span><span class="op" id="8404483">}</span>
</div>
</body>
</html>
