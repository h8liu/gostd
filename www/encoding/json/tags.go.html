<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4807200">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4807255">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4807309">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4807360">package</span>&nbsp;<span class="ident" id="4807368">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4807374">import</span>&nbsp;<span class="op" id="4807381">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4807384">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="4807394">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="4807397">//&nbsp;tagOptions&nbsp;is&nbsp;the&nbsp;string&nbsp;following&nbsp;a&nbsp;comma&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;&#34;json&#34;</span><br>
<span class="lineno"></span><span class="comment" id="4807470">//&nbsp;tag,&nbsp;or&nbsp;the&nbsp;empty&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;leading&nbsp;comma.</span><br>
<span class="lineno"></span><span class="keyword" id="4807538">type</span>&nbsp;<span class="ident" id="4807543">tagOptions</span>&nbsp;<span class="builtintype" id="4807554">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4807562">//&nbsp;parseTag&nbsp;splits&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;json&nbsp;tag&nbsp;into&nbsp;its&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4807625">//&nbsp;comma-separated&nbsp;options.</span><br>
<span class="lineno"></span><span class="keyword" id="4807653">func</span>&nbsp;<span class="ident" id="4807658">parseTag</span><span class="op" id="4807666">(</span><span class="ident" id="4807667">tag</span>&nbsp;<span class="builtintype" id="4807671">string</span><span class="op" id="4807677">)</span>&nbsp;<span class="op" id="4807679">(</span><span class="builtintype" id="4807680">string</span><span class="op" id="4807686">,</span>&nbsp;<span class="ident" id="4807688"><a href="/encoding/json/tags.go.html#4807543">tagOptions</a></span><span class="op" id="4807698">)</span>&nbsp;<span class="op" id="4807700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807703">if</span>&nbsp;<span class="ident" id="4807706">idx</span>&nbsp;<span class="op" id="4807710">:=</span>&nbsp;<span class="ident" id="4807713"><a href="/encoding/json/tags.go.html#4807384">strings</a></span><span class="op" id="4807720">.</span><span class="ident" id="4807721">Index</span><span class="op" id="4807726">(</span><span class="ident" id="4807727"><a href="/encoding/json/tags.go.html#4807667">tag</a></span><span class="op" id="4807730">,</span>&nbsp;<span class="string" id="4807732">&#34;,&#34;</span><span class="op" id="4807735">)</span><span class="op" id="4807736">;</span>&nbsp;<span class="ident" id="4807738"><a href="/encoding/json/tags.go.html#4807706">idx</a></span>&nbsp;<span class="op" id="4807742">!=</span>&nbsp;<span class="op" id="4807745">-</span><span class="num" id="4807746">1</span>&nbsp;<span class="op" id="4807748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807752">return</span>&nbsp;<span class="ident" id="4807759"><a href="/encoding/json/tags.go.html#4807667">tag</a></span><span class="op" id="4807762">[</span><span class="op" id="4807763">:</span><span class="ident" id="4807764"><a href="/encoding/json/tags.go.html#4807706">idx</a></span><span class="op" id="4807767">]</span><span class="op" id="4807768">,</span>&nbsp;<span class="ident" id="4807770"><a href="/encoding/json/tags.go.html#4807543">tagOptions</a></span><span class="op" id="4807780">(</span><span class="ident" id="4807781"><a href="/encoding/json/tags.go.html#4807667">tag</a></span><span class="op" id="4807784">[</span><span class="ident" id="4807785"><a href="/encoding/json/tags.go.html#4807706">idx</a></span><span class="op" id="4807788">+</span><span class="num" id="4807789">1</span><span class="op" id="4807790">:</span><span class="op" id="4807791">]</span><span class="op" id="4807792">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4807795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807798">return</span>&nbsp;<span class="ident" id="4807805"><a href="/encoding/json/tags.go.html#4807667">tag</a></span><span class="op" id="4807808">,</span>&nbsp;<span class="ident" id="4807810"><a href="/encoding/json/tags.go.html#4807543">tagOptions</a></span><span class="op" id="4807820">(</span><span class="string" id="4807821">&#34;&#34;</span><span class="op" id="4807823">)</span><br>
<span class="lineno"></span><span class="op" id="4807825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4807828">//&nbsp;Contains&nbsp;reports&nbsp;whether&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;options</span><br>
<span class="lineno">25</span><span class="comment" id="4807890">//&nbsp;contains&nbsp;a&nbsp;particular&nbsp;substr&nbsp;flag.&nbsp;substr&nbsp;must&nbsp;be&nbsp;surrounded&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4807959">//&nbsp;string&nbsp;boundary&nbsp;or&nbsp;commas.</span><br>
<span class="lineno"></span><span class="keyword" id="4807989">func</span>&nbsp;<span class="op" id="4807994">(</span><span class="ident" id="4807995">o</span>&nbsp;<span class="ident" id="4807997"><a href="/encoding/json/tags.go.html#4807543">tagOptions</a></span><span class="op" id="4808007">)</span>&nbsp;<span class="ident" id="4808009">Contains</span><span class="op" id="4808017">(</span><span class="ident" id="4808018">optionName</span>&nbsp;<span class="builtintype" id="4808029">string</span><span class="op" id="4808035">)</span>&nbsp;<span class="builtintype" id="4808037">bool</span>&nbsp;<span class="op" id="4808042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808045">if</span>&nbsp;<span class="builtinfunc" id="4808048">len</span><span class="op" id="4808051">(</span><span class="ident" id="4808052"><a href="/encoding/json/tags.go.html#4807995">o</a></span><span class="op" id="4808053">)</span>&nbsp;<span class="op" id="4808055">==</span>&nbsp;<span class="num" id="4808058">0</span>&nbsp;<span class="op" id="4808060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808064">return</span>&nbsp;<span class="builtintype" id="4808071">false</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4808078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4808081">s</span>&nbsp;<span class="op" id="4808083">:=</span>&nbsp;<span class="builtintype" id="4808086">string</span><span class="op" id="4808092">(</span><span class="ident" id="4808093"><a href="/encoding/json/tags.go.html#4807995">o</a></span><span class="op" id="4808094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808097">for</span>&nbsp;<span class="ident" id="4808101"><a href="/encoding/json/tags.go.html#4808081">s</a></span>&nbsp;<span class="op" id="4808103">!=</span>&nbsp;<span class="string" id="4808106">&#34;&#34;</span>&nbsp;<span class="op" id="4808109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808113">var</span>&nbsp;<span class="ident" id="4808117">next</span>&nbsp;<span class="builtintype" id="4808122">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4808131">i</span>&nbsp;<span class="op" id="4808133">:=</span>&nbsp;<span class="ident" id="4808136"><a href="/encoding/json/tags.go.html#4807384">strings</a></span><span class="op" id="4808143">.</span><span class="ident" id="4808144">Index</span><span class="op" id="4808149">(</span><span class="ident" id="4808150"><a href="/encoding/json/tags.go.html#4808081">s</a></span><span class="op" id="4808151">,</span>&nbsp;<span class="string" id="4808153">&#34;,&#34;</span><span class="op" id="4808156">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808160">if</span>&nbsp;<span class="ident" id="4808163"><a href="/encoding/json/tags.go.html#4808131">i</a></span>&nbsp;<span class="op" id="4808165">&gt;=</span>&nbsp;<span class="num" id="4808168">0</span>&nbsp;<span class="op" id="4808170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4808175"><a href="/encoding/json/tags.go.html#4808081">s</a></span><span class="op" id="4808176">,</span>&nbsp;<span class="ident" id="4808178"><a href="/encoding/json/tags.go.html#4808117">next</a></span>&nbsp;<span class="op" id="4808183">=</span>&nbsp;<span class="ident" id="4808185"><a href="/encoding/json/tags.go.html#4808081">s</a></span><span class="op" id="4808186">[</span><span class="op" id="4808187">:</span><span class="ident" id="4808188"><a href="/encoding/json/tags.go.html#4808131">i</a></span><span class="op" id="4808189">]</span><span class="op" id="4808190">,</span>&nbsp;<span class="ident" id="4808192"><a href="/encoding/json/tags.go.html#4808081">s</a></span><span class="op" id="4808193">[</span><span class="ident" id="4808194"><a href="/encoding/json/tags.go.html#4808131">i</a></span><span class="op" id="4808195">+</span><span class="num" id="4808196">1</span><span class="op" id="4808197">:</span><span class="op" id="4808198">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4808202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808206">if</span>&nbsp;<span class="ident" id="4808209"><a href="/encoding/json/tags.go.html#4808081">s</a></span>&nbsp;<span class="op" id="4808211">==</span>&nbsp;<span class="ident" id="4808214"><a href="/encoding/json/tags.go.html#4808018">optionName</a></span>&nbsp;<span class="op" id="4808225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808230">return</span>&nbsp;<span class="builtintype" id="4808237">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4808244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4808248"><a href="/encoding/json/tags.go.html#4808081">s</a></span>&nbsp;<span class="op" id="4808250">=</span>&nbsp;<span class="ident" id="4808252"><a href="/encoding/json/tags.go.html#4808117">next</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4808258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808261">return</span>&nbsp;<span class="builtintype" id="4808268">false</span><br>
<span class="lineno"></span><span class="op" id="4808274">}</span>
</div>
</body>
</html>
