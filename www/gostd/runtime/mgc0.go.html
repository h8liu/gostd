<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html" class="current">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1562958">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1563013">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1563067">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1563118">package</span>&nbsp;<span class="ident" id="1563126">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1563135">import</span>&nbsp;<span class="string" id="1563142">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1563152">//&nbsp;Called&nbsp;from&nbsp;C.&nbsp;Returns&nbsp;the&nbsp;Go&nbsp;type&nbsp;*m.</span><br>
<span class="lineno">10</span><span class="keyword" id="1563194">func</span>&nbsp;<span class="ident" id="1563199">gc_m_ptr</span><span class="op" id="1563207">(</span><span class="ident" id="1563208">ret</span>&nbsp;<span class="op" id="1563212">*</span><span class="keyword" id="1563213">interface</span><span class="op" id="1563222">{</span><span class="op" id="1563223">}</span><span class="op" id="1563224">)</span>&nbsp;<span class="op" id="1563226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1563229">*</span><span class="ident" id="1563230">ret</span>&nbsp;<span class="op" id="1563234">=</span>&nbsp;<span class="op" id="1563236">(</span><span class="op" id="1563237">*</span><span class="ident" id="1563238">m</span><span class="op" id="1563239">)</span><span class="op" id="1563240">(</span><span class="ident" id="1563241">nil</span><span class="op" id="1563244">)</span><br>
<span class="lineno"></span><span class="op" id="1563246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1563249">//&nbsp;Called&nbsp;from&nbsp;C.&nbsp;Returns&nbsp;the&nbsp;Go&nbsp;type&nbsp;*g.</span><br>
<span class="lineno">15</span><span class="keyword" id="1563291">func</span>&nbsp;<span class="ident" id="1563296">gc_g_ptr</span><span class="op" id="1563304">(</span><span class="ident" id="1563305">ret</span>&nbsp;<span class="op" id="1563309">*</span><span class="keyword" id="1563310">interface</span><span class="op" id="1563319">{</span><span class="op" id="1563320">}</span><span class="op" id="1563321">)</span>&nbsp;<span class="op" id="1563323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1563326">*</span><span class="ident" id="1563327">ret</span>&nbsp;<span class="op" id="1563331">=</span>&nbsp;<span class="op" id="1563333">(</span><span class="op" id="1563334">*</span><span class="ident" id="1563335">g</span><span class="op" id="1563336">)</span><span class="op" id="1563337">(</span><span class="ident" id="1563338">nil</span><span class="op" id="1563341">)</span><br>
<span class="lineno"></span><span class="op" id="1563343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1563346">//&nbsp;Called&nbsp;from&nbsp;C.&nbsp;Returns&nbsp;the&nbsp;Go&nbsp;type&nbsp;*itab.</span><br>
<span class="lineno">20</span><span class="keyword" id="1563391">func</span>&nbsp;<span class="ident" id="1563396">gc_itab_ptr</span><span class="op" id="1563407">(</span><span class="ident" id="1563408">ret</span>&nbsp;<span class="op" id="1563412">*</span><span class="keyword" id="1563413">interface</span><span class="op" id="1563422">{</span><span class="op" id="1563423">}</span><span class="op" id="1563424">)</span>&nbsp;<span class="op" id="1563426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1563429">*</span><span class="ident" id="1563430">ret</span>&nbsp;<span class="op" id="1563434">=</span>&nbsp;<span class="op" id="1563436">(</span><span class="op" id="1563437">*</span><span class="ident" id="1563438">itab</span><span class="op" id="1563442">)</span><span class="op" id="1563443">(</span><span class="ident" id="1563444">nil</span><span class="op" id="1563447">)</span><br>
<span class="lineno"></span><span class="op" id="1563449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1563452">func</span>&nbsp;<span class="ident" id="1563457">gc_unixnanotime</span><span class="op" id="1563472">(</span><span class="ident" id="1563473">now</span>&nbsp;<span class="op" id="1563477">*</span><span class="ident" id="1563478">int64</span><span class="op" id="1563483">)</span>&nbsp;<span class="op" id="1563485">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1563488">sec</span><span class="op" id="1563491">,</span>&nbsp;<span class="ident" id="1563493">nsec</span>&nbsp;<span class="op" id="1563498">:=</span>&nbsp;<span class="ident" id="1563501">timenow</span><span class="op" id="1563508">(</span><span class="op" id="1563509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1563512">*</span><span class="ident" id="1563513">now</span>&nbsp;<span class="op" id="1563517">=</span>&nbsp;<span class="ident" id="1563519">sec</span><span class="op" id="1563522">*</span><span class="num" id="1563523">1e9</span>&nbsp;<span class="op" id="1563527">+</span>&nbsp;<span class="ident" id="1563529">int64</span><span class="op" id="1563534">(</span><span class="ident" id="1563535">nsec</span><span class="op" id="1563539">)</span><br>
<span class="lineno"></span><span class="op" id="1563541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1563544">func</span>&nbsp;<span class="ident" id="1563549">freeOSMemory</span><span class="op" id="1563561">(</span><span class="op" id="1563562">)</span>&nbsp;<span class="op" id="1563564">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1563567">gogc</span><span class="op" id="1563571">(</span><span class="num" id="1563572">2</span><span class="op" id="1563573">)</span>&nbsp;<span class="comment" id="1563575">//&nbsp;force&nbsp;GC&nbsp;and&nbsp;do&nbsp;eager&nbsp;sweep</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1563607">onM</span><span class="op" id="1563610">(</span><span class="ident" id="1563611">scavenge_m</span><span class="op" id="1563621">)</span><br>
<span class="lineno"></span><span class="op" id="1563623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1563626">var</span>&nbsp;<span class="ident" id="1563630">poolcleanup</span>&nbsp;<span class="keyword" id="1563642">func</span><span class="op" id="1563646">(</span><span class="op" id="1563647">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="1563650">func</span>&nbsp;<span class="ident" id="1563655">registerPoolCleanup</span><span class="op" id="1563674">(</span><span class="ident" id="1563675">f</span>&nbsp;<span class="keyword" id="1563677">func</span><span class="op" id="1563681">(</span><span class="op" id="1563682">)</span><span class="op" id="1563683">)</span>&nbsp;<span class="op" id="1563685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1563688">poolcleanup</span>&nbsp;<span class="op" id="1563700">=</span>&nbsp;<span class="ident" id="1563702">f</span><br>
<span class="lineno"></span><span class="op" id="1563704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="1563707">func</span>&nbsp;<span class="ident" id="1563712">clearpools</span><span class="op" id="1563722">(</span><span class="op" id="1563723">)</span>&nbsp;<span class="op" id="1563725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1563728">//&nbsp;clear&nbsp;sync.Pools</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1563749">if</span>&nbsp;<span class="ident" id="1563752">poolcleanup</span>&nbsp;<span class="op" id="1563764">!=</span>&nbsp;<span class="ident" id="1563767">nil</span>&nbsp;<span class="op" id="1563771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1563775">poolcleanup</span><span class="op" id="1563786">(</span><span class="op" id="1563787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1563790">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1563794">for</span>&nbsp;<span class="ident" id="1563798">_</span><span class="op" id="1563799">,</span>&nbsp;<span class="ident" id="1563801">p</span>&nbsp;<span class="op" id="1563803">:=</span>&nbsp;<span class="keyword" id="1563806">range</span>&nbsp;<span class="op" id="1563812">&amp;</span><span class="ident" id="1563813">allp</span>&nbsp;<span class="op" id="1563818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1563822">if</span>&nbsp;<span class="ident" id="1563825">p</span>&nbsp;<span class="op" id="1563827">==</span>&nbsp;<span class="ident" id="1563830">nil</span>&nbsp;<span class="op" id="1563834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1563839">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1563847">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1563851">//&nbsp;clear&nbsp;tinyalloc&nbsp;pool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1563877">if</span>&nbsp;<span class="ident" id="1563880">c</span>&nbsp;<span class="op" id="1563882">:=</span>&nbsp;<span class="ident" id="1563885">p</span><span class="op" id="1563886">.</span><span class="ident" id="1563887">mcache</span><span class="op" id="1563893">;</span>&nbsp;<span class="ident" id="1563895">c</span>&nbsp;<span class="op" id="1563897">!=</span>&nbsp;<span class="ident" id="1563900">nil</span>&nbsp;<span class="op" id="1563904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1563909">c</span><span class="op" id="1563910">.</span><span class="ident" id="1563911">tiny</span>&nbsp;<span class="op" id="1563916">=</span>&nbsp;<span class="ident" id="1563918">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1563925">c</span><span class="op" id="1563926">.</span><span class="ident" id="1563927">tinysize</span>&nbsp;<span class="op" id="1563936">=</span>&nbsp;<span class="num" id="1563938">0</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1563944">//&nbsp;disconnect&nbsp;cached&nbsp;list&nbsp;before&nbsp;dropping&nbsp;it&nbsp;on&nbsp;the&nbsp;floor,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1564006">//&nbsp;so&nbsp;that&nbsp;a&nbsp;dangling&nbsp;ref&nbsp;to&nbsp;one&nbsp;entry&nbsp;does&nbsp;not&nbsp;pin&nbsp;all&nbsp;of&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1564074">var</span>&nbsp;<span class="ident" id="1564078">sg</span><span class="op" id="1564080">,</span>&nbsp;<span class="ident" id="1564082">sgnext</span>&nbsp;<span class="op" id="1564089">*</span><span class="ident" id="1564090">sudog</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1564099">for</span>&nbsp;<span class="ident" id="1564103">sg</span>&nbsp;<span class="op" id="1564106">=</span>&nbsp;<span class="ident" id="1564108">c</span><span class="op" id="1564109">.</span><span class="ident" id="1564110">sudogcache</span><span class="op" id="1564120">;</span>&nbsp;<span class="ident" id="1564122">sg</span>&nbsp;<span class="op" id="1564125">!=</span>&nbsp;<span class="ident" id="1564128">nil</span><span class="op" id="1564131">;</span>&nbsp;<span class="ident" id="1564133">sg</span>&nbsp;<span class="op" id="1564136">=</span>&nbsp;<span class="ident" id="1564138">sgnext</span>&nbsp;<span class="op" id="1564145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1564151">sgnext</span>&nbsp;<span class="op" id="1564158">=</span>&nbsp;<span class="ident" id="1564160">sg</span><span class="op" id="1564162">.</span><span class="ident" id="1564163">next</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1564172">sg</span><span class="op" id="1564174">.</span><span class="ident" id="1564175">next</span>&nbsp;<span class="op" id="1564180">=</span>&nbsp;<span class="ident" id="1564182">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1564189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1564194">c</span><span class="op" id="1564195">.</span><span class="ident" id="1564196">sudogcache</span>&nbsp;<span class="op" id="1564207">=</span>&nbsp;<span class="ident" id="1564209">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1564215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1564220">//&nbsp;clear&nbsp;defer&nbsp;pools</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1564243">for</span>&nbsp;<span class="ident" id="1564247">i</span>&nbsp;<span class="op" id="1564249">:=</span>&nbsp;<span class="keyword" id="1564252">range</span>&nbsp;<span class="ident" id="1564258">p</span><span class="op" id="1564259">.</span><span class="ident" id="1564260">deferpool</span>&nbsp;<span class="op" id="1564270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1564275">//&nbsp;disconnect&nbsp;cached&nbsp;list&nbsp;before&nbsp;dropping&nbsp;it&nbsp;on&nbsp;the&nbsp;floor,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1564337">//&nbsp;so&nbsp;that&nbsp;a&nbsp;dangling&nbsp;ref&nbsp;to&nbsp;one&nbsp;entry&nbsp;does&nbsp;not&nbsp;pin&nbsp;all&nbsp;of&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1564405">var</span>&nbsp;<span class="ident" id="1564409">d</span><span class="op" id="1564410">,</span>&nbsp;<span class="ident" id="1564412">dlink</span>&nbsp;<span class="op" id="1564418">*</span><span class="ident" id="1564419">_defer</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1564429">for</span>&nbsp;<span class="ident" id="1564433">d</span>&nbsp;<span class="op" id="1564435">=</span>&nbsp;<span class="ident" id="1564437">p</span><span class="op" id="1564438">.</span><span class="ident" id="1564439">deferpool</span><span class="op" id="1564448">[</span><span class="ident" id="1564449">i</span><span class="op" id="1564450">]</span><span class="op" id="1564451">;</span>&nbsp;<span class="ident" id="1564453">d</span>&nbsp;<span class="op" id="1564455">!=</span>&nbsp;<span class="ident" id="1564458">nil</span><span class="op" id="1564461">;</span>&nbsp;<span class="ident" id="1564463">d</span>&nbsp;<span class="op" id="1564465">=</span>&nbsp;<span class="ident" id="1564467">dlink</span>&nbsp;<span class="op" id="1564473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1564479">dlink</span>&nbsp;<span class="op" id="1564485">=</span>&nbsp;<span class="ident" id="1564487">d</span><span class="op" id="1564488">.</span><span class="ident" id="1564489">link</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1564498">d</span><span class="op" id="1564499">.</span><span class="ident" id="1564500">link</span>&nbsp;<span class="op" id="1564505">=</span>&nbsp;<span class="ident" id="1564507">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1564514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1564519">p</span><span class="op" id="1564520">.</span><span class="ident" id="1564521">deferpool</span><span class="op" id="1564530">[</span><span class="ident" id="1564531">i</span><span class="op" id="1564532">]</span>&nbsp;<span class="op" id="1564534">=</span>&nbsp;<span class="ident" id="1564536">nil</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1564542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1564545">}</span><br>
<span class="lineno"></span><span class="op" id="1564547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1564550">func</span>&nbsp;<span class="ident" id="1564555">gosweepone</span><span class="op" id="1564565">(</span><span class="op" id="1564566">)</span>&nbsp;<span class="builtintype" id="1564568">uintptr</span><br>
<span class="lineno">80</span><span class="keyword" id="1564576">func</span>&nbsp;<span class="ident" id="1564581">gosweepdone</span><span class="op" id="1564592">(</span><span class="op" id="1564593">)</span>&nbsp;<span class="builtintype" id="1564595">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1564601">func</span>&nbsp;<span class="ident" id="1564606">bgsweep</span><span class="op" id="1564613">(</span><span class="op" id="1564614">)</span>&nbsp;<span class="op" id="1564616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1564619">getg</span><span class="op" id="1564623">(</span><span class="op" id="1564624">)</span><span class="op" id="1564625">.</span><span class="ident" id="1564626">issystem</span>&nbsp;<span class="op" id="1564635">=</span>&nbsp;<span class="builtintype" id="1564637">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1564643">for</span>&nbsp;<span class="op" id="1564647">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1564651">for</span>&nbsp;<span class="ident" id="1564655">gosweepone</span><span class="op" id="1564665">(</span><span class="op" id="1564666">)</span>&nbsp;<span class="op" id="1564668">!=</span>&nbsp;<span class="op" id="1564671">^</span><span class="builtintype" id="1564672">uintptr</span><span class="op" id="1564679">(</span><span class="num" id="1564680">0</span><span class="op" id="1564681">)</span>&nbsp;<span class="op" id="1564683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1564688">sweep</span><span class="op" id="1564693">.</span><span class="ident" id="1564694">nbgsweep</span><span class="op" id="1564702">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1564708">Gosched</span><span class="op" id="1564715">(</span><span class="op" id="1564716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1564720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1564724">lock</span><span class="op" id="1564728">(</span><span class="op" id="1564729">&amp;</span><span class="ident" id="1564730">gclock</span><span class="op" id="1564736">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1564740">if</span>&nbsp;<span class="op" id="1564743">!</span><span class="ident" id="1564744">gosweepdone</span><span class="op" id="1564755">(</span><span class="op" id="1564756">)</span>&nbsp;<span class="op" id="1564758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1564763">//&nbsp;This&nbsp;can&nbsp;happen&nbsp;if&nbsp;a&nbsp;GC&nbsp;runs&nbsp;between</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1564806">//&nbsp;gosweepone&nbsp;returning&nbsp;^0&nbsp;above</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1564842">//&nbsp;and&nbsp;the&nbsp;lock&nbsp;being&nbsp;acquired.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1564877">unlock</span><span class="op" id="1564883">(</span><span class="op" id="1564884">&amp;</span><span class="ident" id="1564885">gclock</span><span class="op" id="1564891">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1564896">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1564907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1564911">sweep</span><span class="op" id="1564916">.</span><span class="ident" id="1564917">parked</span>&nbsp;<span class="op" id="1564924">=</span>&nbsp;<span class="builtintype" id="1564926">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1564933">goparkunlock</span><span class="op" id="1564945">(</span><span class="op" id="1564946">&amp;</span><span class="ident" id="1564947">gclock</span><span class="op" id="1564953">,</span>&nbsp;<span class="string" id="1564955">&#34;GC&nbsp;sweep&nbsp;wait&#34;</span><span class="op" id="1564970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1564973">}</span><br>
<span class="lineno">100</span><span class="op" id="1564975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1564978">//&nbsp;NOTE:&nbsp;Really&nbsp;dst&nbsp;*unsafe.Pointer,&nbsp;src&nbsp;unsafe.Pointer,</span><br>
<span class="lineno"></span><span class="comment" id="1565035">//&nbsp;but&nbsp;if&nbsp;we&nbsp;do&nbsp;that,&nbsp;Go&nbsp;inserts&nbsp;a&nbsp;write&nbsp;barrier&nbsp;on&nbsp;*dst&nbsp;=&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="1565099">//go:nosplit</span><br>
<span class="lineno">105</span><span class="keyword" id="1565112">func</span>&nbsp;<span class="ident" id="1565117">writebarrierptr</span><span class="op" id="1565132">(</span><span class="ident" id="1565133">dst</span>&nbsp;<span class="op" id="1565137">*</span><span class="builtintype" id="1565138">uintptr</span><span class="op" id="1565145">,</span>&nbsp;<span class="ident" id="1565147">src</span>&nbsp;<span class="builtintype" id="1565151">uintptr</span><span class="op" id="1565158">)</span>&nbsp;<span class="op" id="1565160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1565163">*</span><span class="ident" id="1565164">dst</span>&nbsp;<span class="op" id="1565168">=</span>&nbsp;<span class="ident" id="1565170">src</span><br>
<span class="lineno"></span><span class="op" id="1565174">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1565177">//go:nosplit</span><br>
<span class="lineno">110</span><span class="keyword" id="1565190">func</span>&nbsp;<span class="ident" id="1565195">writebarrierstring</span><span class="op" id="1565213">(</span><span class="ident" id="1565214">dst</span>&nbsp;<span class="op" id="1565218">*</span><span class="op" id="1565219">[</span><span class="num" id="1565220">2</span><span class="op" id="1565221">]</span><span class="builtintype" id="1565222">uintptr</span><span class="op" id="1565229">,</span>&nbsp;<span class="ident" id="1565231">src</span>&nbsp;<span class="op" id="1565235">[</span><span class="num" id="1565236">2</span><span class="op" id="1565237">]</span><span class="builtintype" id="1565238">uintptr</span><span class="op" id="1565245">)</span>&nbsp;<span class="op" id="1565247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1565250">dst</span><span class="op" id="1565253">[</span><span class="num" id="1565254">0</span><span class="op" id="1565255">]</span>&nbsp;<span class="op" id="1565257">=</span>&nbsp;<span class="ident" id="1565259">src</span><span class="op" id="1565262">[</span><span class="num" id="1565263">0</span><span class="op" id="1565264">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1565267">dst</span><span class="op" id="1565270">[</span><span class="num" id="1565271">1</span><span class="op" id="1565272">]</span>&nbsp;<span class="op" id="1565274">=</span>&nbsp;<span class="ident" id="1565276">src</span><span class="op" id="1565279">[</span><span class="num" id="1565280">1</span><span class="op" id="1565281">]</span><br>
<span class="lineno"></span><span class="op" id="1565283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="1565286">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1565299">func</span>&nbsp;<span class="ident" id="1565304">writebarrierslice</span><span class="op" id="1565321">(</span><span class="ident" id="1565322">dst</span>&nbsp;<span class="op" id="1565326">*</span><span class="op" id="1565327">[</span><span class="num" id="1565328">3</span><span class="op" id="1565329">]</span><span class="builtintype" id="1565330">uintptr</span><span class="op" id="1565337">,</span>&nbsp;<span class="ident" id="1565339">src</span>&nbsp;<span class="op" id="1565343">[</span><span class="num" id="1565344">3</span><span class="op" id="1565345">]</span><span class="builtintype" id="1565346">uintptr</span><span class="op" id="1565353">)</span>&nbsp;<span class="op" id="1565355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1565358">dst</span><span class="op" id="1565361">[</span><span class="num" id="1565362">0</span><span class="op" id="1565363">]</span>&nbsp;<span class="op" id="1565365">=</span>&nbsp;<span class="ident" id="1565367">src</span><span class="op" id="1565370">[</span><span class="num" id="1565371">0</span><span class="op" id="1565372">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1565375">dst</span><span class="op" id="1565378">[</span><span class="num" id="1565379">1</span><span class="op" id="1565380">]</span>&nbsp;<span class="op" id="1565382">=</span>&nbsp;<span class="ident" id="1565384">src</span><span class="op" id="1565387">[</span><span class="num" id="1565388">1</span><span class="op" id="1565389">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1565392">dst</span><span class="op" id="1565395">[</span><span class="num" id="1565396">2</span><span class="op" id="1565397">]</span>&nbsp;<span class="op" id="1565399">=</span>&nbsp;<span class="ident" id="1565401">src</span><span class="op" id="1565404">[</span><span class="num" id="1565405">2</span><span class="op" id="1565406">]</span><br>
<span class="lineno">120</span><span class="op" id="1565408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1565411">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1565424">func</span>&nbsp;<span class="ident" id="1565429">writebarrieriface</span><span class="op" id="1565446">(</span><span class="ident" id="1565447">dst</span>&nbsp;<span class="op" id="1565451">*</span><span class="op" id="1565452">[</span><span class="num" id="1565453">2</span><span class="op" id="1565454">]</span><span class="builtintype" id="1565455">uintptr</span><span class="op" id="1565462">,</span>&nbsp;<span class="ident" id="1565464">src</span>&nbsp;<span class="op" id="1565468">[</span><span class="num" id="1565469">2</span><span class="op" id="1565470">]</span><span class="builtintype" id="1565471">uintptr</span><span class="op" id="1565478">)</span>&nbsp;<span class="op" id="1565480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1565483">dst</span><span class="op" id="1565486">[</span><span class="num" id="1565487">0</span><span class="op" id="1565488">]</span>&nbsp;<span class="op" id="1565490">=</span>&nbsp;<span class="ident" id="1565492">src</span><span class="op" id="1565495">[</span><span class="num" id="1565496">0</span><span class="op" id="1565497">]</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1565500">dst</span><span class="op" id="1565503">[</span><span class="num" id="1565504">1</span><span class="op" id="1565505">]</span>&nbsp;<span class="op" id="1565507">=</span>&nbsp;<span class="ident" id="1565509">src</span><span class="op" id="1565512">[</span><span class="num" id="1565513">1</span><span class="op" id="1565514">]</span><br>
<span class="lineno"></span><span class="op" id="1565516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1565519">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1565532">func</span>&nbsp;<span class="ident" id="1565537">writebarrierfat2</span><span class="op" id="1565553">(</span><span class="ident" id="1565554">dst</span>&nbsp;<span class="op" id="1565558">*</span><span class="op" id="1565559">[</span><span class="num" id="1565560">2</span><span class="op" id="1565561">]</span><span class="builtintype" id="1565562">uintptr</span><span class="op" id="1565569">,</span>&nbsp;<span class="ident" id="1565571">_</span>&nbsp;<span class="op" id="1565573">*</span><span class="builtintype" id="1565574">byte</span><span class="op" id="1565578">,</span>&nbsp;<span class="ident" id="1565580">src</span>&nbsp;<span class="op" id="1565584">[</span><span class="num" id="1565585">2</span><span class="op" id="1565586">]</span><span class="builtintype" id="1565587">uintptr</span><span class="op" id="1565594">)</span>&nbsp;<span class="op" id="1565596">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1565599">dst</span><span class="op" id="1565602">[</span><span class="num" id="1565603">0</span><span class="op" id="1565604">]</span>&nbsp;<span class="op" id="1565606">=</span>&nbsp;<span class="ident" id="1565608">src</span><span class="op" id="1565611">[</span><span class="num" id="1565612">0</span><span class="op" id="1565613">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1565616">dst</span><span class="op" id="1565619">[</span><span class="num" id="1565620">1</span><span class="op" id="1565621">]</span>&nbsp;<span class="op" id="1565623">=</span>&nbsp;<span class="ident" id="1565625">src</span><span class="op" id="1565628">[</span><span class="num" id="1565629">1</span><span class="op" id="1565630">]</span><br>
<span class="lineno"></span><span class="op" id="1565632">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1565635">//go:nosplit</span><br>
<span class="lineno">135</span><span class="keyword" id="1565648">func</span>&nbsp;<span class="ident" id="1565653">writebarrierfat3</span><span class="op" id="1565669">(</span><span class="ident" id="1565670">dst</span>&nbsp;<span class="op" id="1565674">*</span><span class="op" id="1565675">[</span><span class="num" id="1565676">3</span><span class="op" id="1565677">]</span><span class="builtintype" id="1565678">uintptr</span><span class="op" id="1565685">,</span>&nbsp;<span class="ident" id="1565687">_</span>&nbsp;<span class="op" id="1565689">*</span><span class="builtintype" id="1565690">byte</span><span class="op" id="1565694">,</span>&nbsp;<span class="ident" id="1565696">src</span>&nbsp;<span class="op" id="1565700">[</span><span class="num" id="1565701">3</span><span class="op" id="1565702">]</span><span class="builtintype" id="1565703">uintptr</span><span class="op" id="1565710">)</span>&nbsp;<span class="op" id="1565712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1565715">dst</span><span class="op" id="1565718">[</span><span class="num" id="1565719">0</span><span class="op" id="1565720">]</span>&nbsp;<span class="op" id="1565722">=</span>&nbsp;<span class="ident" id="1565724">src</span><span class="op" id="1565727">[</span><span class="num" id="1565728">0</span><span class="op" id="1565729">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1565732">dst</span><span class="op" id="1565735">[</span><span class="num" id="1565736">1</span><span class="op" id="1565737">]</span>&nbsp;<span class="op" id="1565739">=</span>&nbsp;<span class="ident" id="1565741">src</span><span class="op" id="1565744">[</span><span class="num" id="1565745">1</span><span class="op" id="1565746">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1565749">dst</span><span class="op" id="1565752">[</span><span class="num" id="1565753">2</span><span class="op" id="1565754">]</span>&nbsp;<span class="op" id="1565756">=</span>&nbsp;<span class="ident" id="1565758">src</span><span class="op" id="1565761">[</span><span class="num" id="1565762">2</span><span class="op" id="1565763">]</span><br>
<span class="lineno"></span><span class="op" id="1565765">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="1565768">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1565781">func</span>&nbsp;<span class="ident" id="1565786">writebarrierfat4</span><span class="op" id="1565802">(</span><span class="ident" id="1565803">dst</span>&nbsp;<span class="op" id="1565807">*</span><span class="op" id="1565808">[</span><span class="num" id="1565809">4</span><span class="op" id="1565810">]</span><span class="builtintype" id="1565811">uintptr</span><span class="op" id="1565818">,</span>&nbsp;<span class="ident" id="1565820">_</span>&nbsp;<span class="op" id="1565822">*</span><span class="builtintype" id="1565823">byte</span><span class="op" id="1565827">,</span>&nbsp;<span class="ident" id="1565829">src</span>&nbsp;<span class="op" id="1565833">[</span><span class="num" id="1565834">4</span><span class="op" id="1565835">]</span><span class="builtintype" id="1565836">uintptr</span><span class="op" id="1565843">)</span>&nbsp;<span class="op" id="1565845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1565848">dst</span><span class="op" id="1565851">[</span><span class="num" id="1565852">0</span><span class="op" id="1565853">]</span>&nbsp;<span class="op" id="1565855">=</span>&nbsp;<span class="ident" id="1565857">src</span><span class="op" id="1565860">[</span><span class="num" id="1565861">0</span><span class="op" id="1565862">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1565865">dst</span><span class="op" id="1565868">[</span><span class="num" id="1565869">1</span><span class="op" id="1565870">]</span>&nbsp;<span class="op" id="1565872">=</span>&nbsp;<span class="ident" id="1565874">src</span><span class="op" id="1565877">[</span><span class="num" id="1565878">1</span><span class="op" id="1565879">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1565882">dst</span><span class="op" id="1565885">[</span><span class="num" id="1565886">2</span><span class="op" id="1565887">]</span>&nbsp;<span class="op" id="1565889">=</span>&nbsp;<span class="ident" id="1565891">src</span><span class="op" id="1565894">[</span><span class="num" id="1565895">2</span><span class="op" id="1565896">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1565899">dst</span><span class="op" id="1565902">[</span><span class="num" id="1565903">3</span><span class="op" id="1565904">]</span>&nbsp;<span class="op" id="1565906">=</span>&nbsp;<span class="ident" id="1565908">src</span><span class="op" id="1565911">[</span><span class="num" id="1565912">3</span><span class="op" id="1565913">]</span><br>
<span class="lineno"></span><span class="op" id="1565915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1565918">//go:nosplit</span><br>
<span class="lineno">150</span><span class="keyword" id="1565931">func</span>&nbsp;<span class="ident" id="1565936">writebarrierfat</span><span class="op" id="1565951">(</span><span class="ident" id="1565952">typ</span>&nbsp;<span class="op" id="1565956">*</span><span class="ident" id="1565957">_type</span><span class="op" id="1565962">,</span>&nbsp;<span class="ident" id="1565964">dst</span><span class="op" id="1565967">,</span>&nbsp;<span class="ident" id="1565969">src</span>&nbsp;<span class="ident" id="1565973">unsafe</span><span class="op" id="1565979">.</span><span class="ident" id="1565980">Pointer</span><span class="op" id="1565987">)</span>&nbsp;<span class="op" id="1565989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1565992">memmove</span><span class="op" id="1565999">(</span><span class="ident" id="1566000">dst</span><span class="op" id="1566003">,</span>&nbsp;<span class="ident" id="1566005">src</span><span class="op" id="1566008">,</span>&nbsp;<span class="ident" id="1566010">typ</span><span class="op" id="1566013">.</span><span class="ident" id="1566014">size</span><span class="op" id="1566018">)</span><br>
<span class="lineno"></span><span class="op" id="1566020">}</span>
</div>
</body>
</html>
