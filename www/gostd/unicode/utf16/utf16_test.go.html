<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>unicode/utf16</h2>
<ul>
<li><a href="/gostd/unicode/utf16/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/unicode/utf16/utf16.go.html">utf16.go</a></li>
<li><a href="/gostd/unicode/utf16/utf16_test.go.html">utf16_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1311538">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1311594">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1311648">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1311699">package</span>&nbsp;<span class="ident" id="1311707">utf16_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1311719">import</span>&nbsp;<span class="op" id="1311726">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1311729">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1311740">&#34;testing&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1311751">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1311762">.</span>&nbsp;<span class="string" id="1311764">&#34;unicode/utf16&#34;</span><br>
<span class="lineno"></span><span class="op" id="1311780">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1311783">//&nbsp;Validate&nbsp;the&nbsp;constants&nbsp;redefined&nbsp;from&nbsp;unicode.</span><br>
<span class="lineno">15</span><span class="keyword" id="1311833">func</span>&nbsp;<span class="ident" id="1311838">TestConstants</span><span class="op" id="1311851">(</span><span class="ident" id="1311852">t</span>&nbsp;<span class="op" id="1311854">*</span><span class="ident" id="1311855">testing</span><span class="op" id="1311862">.</span><span class="ident" id="1311863">T</span><span class="op" id="1311864">)</span>&nbsp;<span class="op" id="1311866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1311869">if</span>&nbsp;<span class="ident" id="1311872">MaxRune</span>&nbsp;<span class="op" id="1311880">!=</span>&nbsp;<span class="ident" id="1311883">unicode</span><span class="op" id="1311890">.</span><span class="ident" id="1311891">MaxRune</span>&nbsp;<span class="op" id="1311899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1311903">t</span><span class="op" id="1311904">.</span><span class="ident" id="1311905">Errorf</span><span class="op" id="1311911">(</span><span class="string" id="1311912">&#34;utf16.maxRune&nbsp;is&nbsp;wrong:&nbsp;%x&nbsp;should&nbsp;be&nbsp;%x&#34;</span><span class="op" id="1311953">,</span>&nbsp;<span class="ident" id="1311955">MaxRune</span><span class="op" id="1311962">,</span>&nbsp;<span class="ident" id="1311964">unicode</span><span class="op" id="1311971">.</span><span class="ident" id="1311972">MaxRune</span><span class="op" id="1311979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1311982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1311985">if</span>&nbsp;<span class="ident" id="1311988">ReplacementChar</span>&nbsp;<span class="op" id="1312004">!=</span>&nbsp;<span class="ident" id="1312007">unicode</span><span class="op" id="1312014">.</span><span class="ident" id="1312015">ReplacementChar</span>&nbsp;<span class="op" id="1312031">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1312035">t</span><span class="op" id="1312036">.</span><span class="ident" id="1312037">Errorf</span><span class="op" id="1312043">(</span><span class="string" id="1312044">&#34;utf16.replacementChar&nbsp;is&nbsp;wrong:&nbsp;%x&nbsp;should&nbsp;be&nbsp;%x&#34;</span><span class="op" id="1312093">,</span>&nbsp;<span class="ident" id="1312095">ReplacementChar</span><span class="op" id="1312110">,</span>&nbsp;<span class="ident" id="1312112">unicode</span><span class="op" id="1312119">.</span><span class="ident" id="1312120">ReplacementChar</span><span class="op" id="1312135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1312138">}</span><br>
<span class="lineno"></span><span class="op" id="1312140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1312143">type</span>&nbsp;<span class="ident" id="1312148">encodeTest</span>&nbsp;<span class="keyword" id="1312159">struct</span>&nbsp;<span class="op" id="1312166">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1312169">in</span>&nbsp;&nbsp;<span class="op" id="1312173">[</span><span class="op" id="1312174">]</span><span class="builtintype" id="1312175">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1312181">out</span>&nbsp;<span class="op" id="1312185">[</span><span class="op" id="1312186">]</span><span class="builtintype" id="1312187">uint16</span><br>
<span class="lineno"></span><span class="op" id="1312194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1312197">var</span>&nbsp;<span class="ident" id="1312201">encodeTests</span>&nbsp;<span class="op" id="1312213">=</span>&nbsp;<span class="op" id="1312215">[</span><span class="op" id="1312216">]</span><span class="ident" id="1312217">encodeTest</span><span class="op" id="1312227">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1312230">{</span><span class="op" id="1312231">[</span><span class="op" id="1312232">]</span><span class="builtintype" id="1312233">rune</span><span class="op" id="1312237">{</span><span class="num" id="1312238">1</span><span class="op" id="1312239">,</span>&nbsp;<span class="num" id="1312241">2</span><span class="op" id="1312242">,</span>&nbsp;<span class="num" id="1312244">3</span><span class="op" id="1312245">,</span>&nbsp;<span class="num" id="1312247">4</span><span class="op" id="1312248">}</span><span class="op" id="1312249">,</span>&nbsp;<span class="op" id="1312251">[</span><span class="op" id="1312252">]</span><span class="builtintype" id="1312253">uint16</span><span class="op" id="1312259">{</span><span class="num" id="1312260">1</span><span class="op" id="1312261">,</span>&nbsp;<span class="num" id="1312263">2</span><span class="op" id="1312264">,</span>&nbsp;<span class="num" id="1312266">3</span><span class="op" id="1312267">,</span>&nbsp;<span class="num" id="1312269">4</span><span class="op" id="1312270">}</span><span class="op" id="1312271">}</span><span class="op" id="1312272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1312275">{</span><span class="op" id="1312276">[</span><span class="op" id="1312277">]</span><span class="builtintype" id="1312278">rune</span><span class="op" id="1312282">{</span><span class="num" id="1312283">0xffff</span><span class="op" id="1312289">,</span>&nbsp;<span class="num" id="1312291">0x10000</span><span class="op" id="1312298">,</span>&nbsp;<span class="num" id="1312300">0x10001</span><span class="op" id="1312307">,</span>&nbsp;<span class="num" id="1312309">0x12345</span><span class="op" id="1312316">,</span>&nbsp;<span class="num" id="1312318">0x10ffff</span><span class="op" id="1312326">}</span><span class="op" id="1312327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1312331">[</span><span class="op" id="1312332">]</span><span class="builtintype" id="1312333">uint16</span><span class="op" id="1312339">{</span><span class="num" id="1312340">0xffff</span><span class="op" id="1312346">,</span>&nbsp;<span class="num" id="1312348">0xd800</span><span class="op" id="1312354">,</span>&nbsp;<span class="num" id="1312356">0xdc00</span><span class="op" id="1312362">,</span>&nbsp;<span class="num" id="1312364">0xd800</span><span class="op" id="1312370">,</span>&nbsp;<span class="num" id="1312372">0xdc01</span><span class="op" id="1312378">,</span>&nbsp;<span class="num" id="1312380">0xd808</span><span class="op" id="1312386">,</span>&nbsp;<span class="num" id="1312388">0xdf45</span><span class="op" id="1312394">,</span>&nbsp;<span class="num" id="1312396">0xdbff</span><span class="op" id="1312402">,</span>&nbsp;<span class="num" id="1312404">0xdfff</span><span class="op" id="1312410">}</span><span class="op" id="1312411">}</span><span class="op" id="1312412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1312415">{</span><span class="op" id="1312416">[</span><span class="op" id="1312417">]</span><span class="builtintype" id="1312418">rune</span><span class="op" id="1312422">{</span><span class="string" id="1312423">&#39;a&#39;</span><span class="op" id="1312426">,</span>&nbsp;<span class="string" id="1312428">&#39;b&#39;</span><span class="op" id="1312431">,</span>&nbsp;<span class="num" id="1312433">0xd7ff</span><span class="op" id="1312439">,</span>&nbsp;<span class="num" id="1312441">0xd800</span><span class="op" id="1312447">,</span>&nbsp;<span class="num" id="1312449">0xdfff</span><span class="op" id="1312455">,</span>&nbsp;<span class="num" id="1312457">0xe000</span><span class="op" id="1312463">,</span>&nbsp;<span class="num" id="1312465">0x110000</span><span class="op" id="1312473">,</span>&nbsp;<span class="op" id="1312475">-</span><span class="num" id="1312476">1</span><span class="op" id="1312477">}</span><span class="op" id="1312478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1312482">[</span><span class="op" id="1312483">]</span><span class="builtintype" id="1312484">uint16</span><span class="op" id="1312490">{</span><span class="string" id="1312491">&#39;a&#39;</span><span class="op" id="1312494">,</span>&nbsp;<span class="string" id="1312496">&#39;b&#39;</span><span class="op" id="1312499">,</span>&nbsp;<span class="num" id="1312501">0xd7ff</span><span class="op" id="1312507">,</span>&nbsp;<span class="num" id="1312509">0xfffd</span><span class="op" id="1312515">,</span>&nbsp;<span class="num" id="1312517">0xfffd</span><span class="op" id="1312523">,</span>&nbsp;<span class="num" id="1312525">0xe000</span><span class="op" id="1312531">,</span>&nbsp;<span class="num" id="1312533">0xfffd</span><span class="op" id="1312539">,</span>&nbsp;<span class="num" id="1312541">0xfffd</span><span class="op" id="1312547">}</span><span class="op" id="1312548">}</span><span class="op" id="1312549">,</span><br>
<span class="lineno">35</span><span class="op" id="1312551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1312554">func</span>&nbsp;<span class="ident" id="1312559">TestEncode</span><span class="op" id="1312569">(</span><span class="ident" id="1312570">t</span>&nbsp;<span class="op" id="1312572">*</span><span class="ident" id="1312573">testing</span><span class="op" id="1312580">.</span><span class="ident" id="1312581">T</span><span class="op" id="1312582">)</span>&nbsp;<span class="op" id="1312584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1312587">for</span>&nbsp;<span class="ident" id="1312591">_</span><span class="op" id="1312592">,</span>&nbsp;<span class="ident" id="1312594">tt</span>&nbsp;<span class="op" id="1312597">:=</span>&nbsp;<span class="keyword" id="1312600">range</span>&nbsp;<span class="ident" id="1312606">encodeTests</span>&nbsp;<span class="op" id="1312618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1312622">out</span>&nbsp;<span class="op" id="1312626">:=</span>&nbsp;<span class="ident" id="1312629">Encode</span><span class="op" id="1312635">(</span><span class="ident" id="1312636">tt</span><span class="op" id="1312638">.</span><span class="ident" id="1312639">in</span><span class="op" id="1312641">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1312645">if</span>&nbsp;<span class="op" id="1312648">!</span><span class="ident" id="1312649">reflect</span><span class="op" id="1312656">.</span><span class="ident" id="1312657">DeepEqual</span><span class="op" id="1312666">(</span><span class="ident" id="1312667">out</span><span class="op" id="1312670">,</span>&nbsp;<span class="ident" id="1312672">tt</span><span class="op" id="1312674">.</span><span class="ident" id="1312675">out</span><span class="op" id="1312678">)</span>&nbsp;<span class="op" id="1312680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1312685">t</span><span class="op" id="1312686">.</span><span class="ident" id="1312687">Errorf</span><span class="op" id="1312693">(</span><span class="string" id="1312694">&#34;Encode(%x)&nbsp;=&nbsp;%x;&nbsp;want&nbsp;%x&#34;</span><span class="op" id="1312720">,</span>&nbsp;<span class="ident" id="1312722">tt</span><span class="op" id="1312724">.</span><span class="ident" id="1312725">in</span><span class="op" id="1312727">,</span>&nbsp;<span class="ident" id="1312729">out</span><span class="op" id="1312732">,</span>&nbsp;<span class="ident" id="1312734">tt</span><span class="op" id="1312736">.</span><span class="ident" id="1312737">out</span><span class="op" id="1312740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1312744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1312747">}</span><br>
<span class="lineno"></span><span class="op" id="1312749">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="1312752">func</span>&nbsp;<span class="ident" id="1312757">TestEncodeRune</span><span class="op" id="1312771">(</span><span class="ident" id="1312772">t</span>&nbsp;<span class="op" id="1312774">*</span><span class="ident" id="1312775">testing</span><span class="op" id="1312782">.</span><span class="ident" id="1312783">T</span><span class="op" id="1312784">)</span>&nbsp;<span class="op" id="1312786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1312789">for</span>&nbsp;<span class="ident" id="1312793">i</span><span class="op" id="1312794">,</span>&nbsp;<span class="ident" id="1312796">tt</span>&nbsp;<span class="op" id="1312799">:=</span>&nbsp;<span class="keyword" id="1312802">range</span>&nbsp;<span class="ident" id="1312808">encodeTests</span>&nbsp;<span class="op" id="1312820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1312824">j</span>&nbsp;<span class="op" id="1312826">:=</span>&nbsp;<span class="num" id="1312829">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1312833">for</span>&nbsp;<span class="ident" id="1312837">_</span><span class="op" id="1312838">,</span>&nbsp;<span class="ident" id="1312840">r</span>&nbsp;<span class="op" id="1312842">:=</span>&nbsp;<span class="keyword" id="1312845">range</span>&nbsp;<span class="ident" id="1312851">tt</span><span class="op" id="1312853">.</span><span class="ident" id="1312854">in</span>&nbsp;<span class="op" id="1312857">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1312862">r1</span><span class="op" id="1312864">,</span>&nbsp;<span class="ident" id="1312866">r2</span>&nbsp;<span class="op" id="1312869">:=</span>&nbsp;<span class="ident" id="1312872">EncodeRune</span><span class="op" id="1312882">(</span><span class="ident" id="1312883">r</span><span class="op" id="1312884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1312889">if</span>&nbsp;<span class="ident" id="1312892">r</span>&nbsp;<span class="op" id="1312894">&lt;</span>&nbsp;<span class="num" id="1312896">0x10000</span>&nbsp;<span class="op" id="1312904">||</span>&nbsp;<span class="ident" id="1312907">r</span>&nbsp;<span class="op" id="1312909">&gt;</span>&nbsp;<span class="ident" id="1312911">unicode</span><span class="op" id="1312918">.</span><span class="ident" id="1312919">MaxRune</span>&nbsp;<span class="op" id="1312927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1312933">if</span>&nbsp;<span class="ident" id="1312936">j</span>&nbsp;<span class="op" id="1312938">&gt;=</span>&nbsp;<span class="builtinfunc" id="1312941">len</span><span class="op" id="1312944">(</span><span class="ident" id="1312945">tt</span><span class="op" id="1312947">.</span><span class="ident" id="1312948">out</span><span class="op" id="1312951">)</span>&nbsp;<span class="op" id="1312953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1312960">t</span><span class="op" id="1312961">.</span><span class="ident" id="1312962">Errorf</span><span class="op" id="1312968">(</span><span class="string" id="1312969">&#34;#%d:&nbsp;ran&nbsp;out&nbsp;of&nbsp;tt.out&#34;</span><span class="op" id="1312993">,</span>&nbsp;<span class="ident" id="1312995">i</span><span class="op" id="1312996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1313003">break</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1313013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1313019">if</span>&nbsp;<span class="ident" id="1313022">r1</span>&nbsp;<span class="op" id="1313025">!=</span>&nbsp;<span class="ident" id="1313028">unicode</span><span class="op" id="1313035">.</span><span class="ident" id="1313036">ReplacementChar</span>&nbsp;<span class="op" id="1313052">||</span>&nbsp;<span class="ident" id="1313055">r2</span>&nbsp;<span class="op" id="1313058">!=</span>&nbsp;<span class="ident" id="1313061">unicode</span><span class="op" id="1313068">.</span><span class="ident" id="1313069">ReplacementChar</span>&nbsp;<span class="op" id="1313085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1313092">t</span><span class="op" id="1313093">.</span><span class="ident" id="1313094">Errorf</span><span class="op" id="1313100">(</span><span class="string" id="1313101">&#34;EncodeRune(%#x)&nbsp;=&nbsp;%#x,&nbsp;%#x;&nbsp;want&nbsp;0xfffd,&nbsp;0xfffd&#34;</span><span class="op" id="1313150">,</span>&nbsp;<span class="ident" id="1313152">r</span><span class="op" id="1313153">,</span>&nbsp;<span class="ident" id="1313155">r1</span><span class="op" id="1313157">,</span>&nbsp;<span class="ident" id="1313159">r2</span><span class="op" id="1313161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1313167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1313173">j</span><span class="op" id="1313174">++</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1313180">}</span>&nbsp;<span class="keyword" id="1313182">else</span>&nbsp;<span class="op" id="1313187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1313193">if</span>&nbsp;<span class="ident" id="1313196">j</span><span class="op" id="1313197">+</span><span class="num" id="1313198">1</span>&nbsp;<span class="op" id="1313200">&gt;=</span>&nbsp;<span class="builtinfunc" id="1313203">len</span><span class="op" id="1313206">(</span><span class="ident" id="1313207">tt</span><span class="op" id="1313209">.</span><span class="ident" id="1313210">out</span><span class="op" id="1313213">)</span>&nbsp;<span class="op" id="1313215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1313222">t</span><span class="op" id="1313223">.</span><span class="ident" id="1313224">Errorf</span><span class="op" id="1313230">(</span><span class="string" id="1313231">&#34;#%d:&nbsp;ran&nbsp;out&nbsp;of&nbsp;tt.out&#34;</span><span class="op" id="1313255">,</span>&nbsp;<span class="ident" id="1313257">i</span><span class="op" id="1313258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1313265">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1313275">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1313281">if</span>&nbsp;<span class="ident" id="1313284">r1</span>&nbsp;<span class="op" id="1313287">!=</span>&nbsp;<span class="builtintype" id="1313290">rune</span><span class="op" id="1313294">(</span><span class="ident" id="1313295">tt</span><span class="op" id="1313297">.</span><span class="ident" id="1313298">out</span><span class="op" id="1313301">[</span><span class="ident" id="1313302">j</span><span class="op" id="1313303">]</span><span class="op" id="1313304">)</span>&nbsp;<span class="op" id="1313306">||</span>&nbsp;<span class="ident" id="1313309">r2</span>&nbsp;<span class="op" id="1313312">!=</span>&nbsp;<span class="builtintype" id="1313315">rune</span><span class="op" id="1313319">(</span><span class="ident" id="1313320">tt</span><span class="op" id="1313322">.</span><span class="ident" id="1313323">out</span><span class="op" id="1313326">[</span><span class="ident" id="1313327">j</span><span class="op" id="1313328">+</span><span class="num" id="1313329">1</span><span class="op" id="1313330">]</span><span class="op" id="1313331">)</span>&nbsp;<span class="op" id="1313333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1313340">t</span><span class="op" id="1313341">.</span><span class="ident" id="1313342">Errorf</span><span class="op" id="1313348">(</span><span class="string" id="1313349">&#34;EncodeRune(%#x)&nbsp;=&nbsp;%#x,&nbsp;%#x;&nbsp;want&nbsp;%#x,&nbsp;%#x&#34;</span><span class="op" id="1313392">,</span>&nbsp;<span class="ident" id="1313394">r</span><span class="op" id="1313395">,</span>&nbsp;<span class="ident" id="1313397">r1</span><span class="op" id="1313399">,</span>&nbsp;<span class="ident" id="1313401">r2</span><span class="op" id="1313403">,</span>&nbsp;<span class="ident" id="1313405">tt</span><span class="op" id="1313407">.</span><span class="ident" id="1313408">out</span><span class="op" id="1313411">[</span><span class="ident" id="1313412">j</span><span class="op" id="1313413">]</span><span class="op" id="1313414">,</span>&nbsp;<span class="ident" id="1313416">tt</span><span class="op" id="1313418">.</span><span class="ident" id="1313419">out</span><span class="op" id="1313422">[</span><span class="ident" id="1313423">j</span><span class="op" id="1313424">+</span><span class="num" id="1313425">1</span><span class="op" id="1313426">]</span><span class="op" id="1313427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1313433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1313439">j</span>&nbsp;<span class="op" id="1313441">+=</span>&nbsp;<span class="num" id="1313444">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1313450">dec</span>&nbsp;<span class="op" id="1313454">:=</span>&nbsp;<span class="ident" id="1313457">DecodeRune</span><span class="op" id="1313467">(</span><span class="ident" id="1313468">r1</span><span class="op" id="1313470">,</span>&nbsp;<span class="ident" id="1313472">r2</span><span class="op" id="1313474">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1313480">if</span>&nbsp;<span class="ident" id="1313483">dec</span>&nbsp;<span class="op" id="1313487">!=</span>&nbsp;<span class="ident" id="1313490">r</span>&nbsp;<span class="op" id="1313492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1313499">t</span><span class="op" id="1313500">.</span><span class="ident" id="1313501">Errorf</span><span class="op" id="1313507">(</span><span class="string" id="1313508">&#34;DecodeRune(%#x,&nbsp;%#x)&nbsp;=&nbsp;%#x;&nbsp;want&nbsp;%#x&#34;</span><span class="op" id="1313546">,</span>&nbsp;<span class="ident" id="1313548">r1</span><span class="op" id="1313550">,</span>&nbsp;<span class="ident" id="1313552">r2</span><span class="op" id="1313554">,</span>&nbsp;<span class="ident" id="1313556">dec</span><span class="op" id="1313559">,</span>&nbsp;<span class="ident" id="1313561">r</span><span class="op" id="1313562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1313568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1313573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1313577">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1313581">if</span>&nbsp;<span class="ident" id="1313584">j</span>&nbsp;<span class="op" id="1313586">!=</span>&nbsp;<span class="builtinfunc" id="1313589">len</span><span class="op" id="1313592">(</span><span class="ident" id="1313593">tt</span><span class="op" id="1313595">.</span><span class="ident" id="1313596">out</span><span class="op" id="1313599">)</span>&nbsp;<span class="op" id="1313601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1313606">t</span><span class="op" id="1313607">.</span><span class="ident" id="1313608">Errorf</span><span class="op" id="1313614">(</span><span class="string" id="1313615">&#34;#%d:&nbsp;EncodeRune&nbsp;didn&#39;t&nbsp;generate&nbsp;enough&nbsp;output&#34;</span><span class="op" id="1313662">,</span>&nbsp;<span class="ident" id="1313664">i</span><span class="op" id="1313665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1313669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1313672">}</span><br>
<span class="lineno"></span><span class="op" id="1313674">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="keyword" id="1313677">type</span>&nbsp;<span class="ident" id="1313682">decodeTest</span>&nbsp;<span class="keyword" id="1313693">struct</span>&nbsp;<span class="op" id="1313700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1313703">in</span>&nbsp;&nbsp;<span class="op" id="1313707">[</span><span class="op" id="1313708">]</span><span class="builtintype" id="1313709">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1313717">out</span>&nbsp;<span class="op" id="1313721">[</span><span class="op" id="1313722">]</span><span class="builtintype" id="1313723">rune</span><br>
<span class="lineno"></span><span class="op" id="1313728">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="keyword" id="1313731">var</span>&nbsp;<span class="ident" id="1313735">decodeTests</span>&nbsp;<span class="op" id="1313747">=</span>&nbsp;<span class="op" id="1313749">[</span><span class="op" id="1313750">]</span><span class="ident" id="1313751">decodeTest</span><span class="op" id="1313761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1313764">{</span><span class="op" id="1313765">[</span><span class="op" id="1313766">]</span><span class="builtintype" id="1313767">uint16</span><span class="op" id="1313773">{</span><span class="num" id="1313774">1</span><span class="op" id="1313775">,</span>&nbsp;<span class="num" id="1313777">2</span><span class="op" id="1313778">,</span>&nbsp;<span class="num" id="1313780">3</span><span class="op" id="1313781">,</span>&nbsp;<span class="num" id="1313783">4</span><span class="op" id="1313784">}</span><span class="op" id="1313785">,</span>&nbsp;<span class="op" id="1313787">[</span><span class="op" id="1313788">]</span><span class="builtintype" id="1313789">rune</span><span class="op" id="1313793">{</span><span class="num" id="1313794">1</span><span class="op" id="1313795">,</span>&nbsp;<span class="num" id="1313797">2</span><span class="op" id="1313798">,</span>&nbsp;<span class="num" id="1313800">3</span><span class="op" id="1313801">,</span>&nbsp;<span class="num" id="1313803">4</span><span class="op" id="1313804">}</span><span class="op" id="1313805">}</span><span class="op" id="1313806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1313809">{</span><span class="op" id="1313810">[</span><span class="op" id="1313811">]</span><span class="builtintype" id="1313812">uint16</span><span class="op" id="1313818">{</span><span class="num" id="1313819">0xffff</span><span class="op" id="1313825">,</span>&nbsp;<span class="num" id="1313827">0xd800</span><span class="op" id="1313833">,</span>&nbsp;<span class="num" id="1313835">0xdc00</span><span class="op" id="1313841">,</span>&nbsp;<span class="num" id="1313843">0xd800</span><span class="op" id="1313849">,</span>&nbsp;<span class="num" id="1313851">0xdc01</span><span class="op" id="1313857">,</span>&nbsp;<span class="num" id="1313859">0xd808</span><span class="op" id="1313865">,</span>&nbsp;<span class="num" id="1313867">0xdf45</span><span class="op" id="1313873">,</span>&nbsp;<span class="num" id="1313875">0xdbff</span><span class="op" id="1313881">,</span>&nbsp;<span class="num" id="1313883">0xdfff</span><span class="op" id="1313889">}</span><span class="op" id="1313890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1313894">[</span><span class="op" id="1313895">]</span><span class="builtintype" id="1313896">rune</span><span class="op" id="1313900">{</span><span class="num" id="1313901">0xffff</span><span class="op" id="1313907">,</span>&nbsp;<span class="num" id="1313909">0x10000</span><span class="op" id="1313916">,</span>&nbsp;<span class="num" id="1313918">0x10001</span><span class="op" id="1313925">,</span>&nbsp;<span class="num" id="1313927">0x12345</span><span class="op" id="1313934">,</span>&nbsp;<span class="num" id="1313936">0x10ffff</span><span class="op" id="1313944">}</span><span class="op" id="1313945">}</span><span class="op" id="1313946">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1313949">{</span><span class="op" id="1313950">[</span><span class="op" id="1313951">]</span><span class="builtintype" id="1313952">uint16</span><span class="op" id="1313958">{</span><span class="num" id="1313959">0xd800</span><span class="op" id="1313965">,</span>&nbsp;<span class="string" id="1313967">&#39;a&#39;</span><span class="op" id="1313970">}</span><span class="op" id="1313971">,</span>&nbsp;<span class="op" id="1313973">[</span><span class="op" id="1313974">]</span><span class="builtintype" id="1313975">rune</span><span class="op" id="1313979">{</span><span class="num" id="1313980">0xfffd</span><span class="op" id="1313986">,</span>&nbsp;<span class="string" id="1313988">&#39;a&#39;</span><span class="op" id="1313991">}</span><span class="op" id="1313992">}</span><span class="op" id="1313993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1313996">{</span><span class="op" id="1313997">[</span><span class="op" id="1313998">]</span><span class="builtintype" id="1313999">uint16</span><span class="op" id="1314005">{</span><span class="num" id="1314006">0xdfff</span><span class="op" id="1314012">}</span><span class="op" id="1314013">,</span>&nbsp;<span class="op" id="1314015">[</span><span class="op" id="1314016">]</span><span class="builtintype" id="1314017">rune</span><span class="op" id="1314021">{</span><span class="num" id="1314022">0xfffd</span><span class="op" id="1314028">}</span><span class="op" id="1314029">}</span><span class="op" id="1314030">,</span><br>
<span class="lineno"></span><span class="op" id="1314032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1314035">func</span>&nbsp;<span class="ident" id="1314040">TestDecode</span><span class="op" id="1314050">(</span><span class="ident" id="1314051">t</span>&nbsp;<span class="op" id="1314053">*</span><span class="ident" id="1314054">testing</span><span class="op" id="1314061">.</span><span class="ident" id="1314062">T</span><span class="op" id="1314063">)</span>&nbsp;<span class="op" id="1314065">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1314068">for</span>&nbsp;<span class="ident" id="1314072">_</span><span class="op" id="1314073">,</span>&nbsp;<span class="ident" id="1314075">tt</span>&nbsp;<span class="op" id="1314078">:=</span>&nbsp;<span class="keyword" id="1314081">range</span>&nbsp;<span class="ident" id="1314087">decodeTests</span>&nbsp;<span class="op" id="1314099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1314103">out</span>&nbsp;<span class="op" id="1314107">:=</span>&nbsp;<span class="ident" id="1314110">Decode</span><span class="op" id="1314116">(</span><span class="ident" id="1314117">tt</span><span class="op" id="1314119">.</span><span class="ident" id="1314120">in</span><span class="op" id="1314122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1314126">if</span>&nbsp;<span class="op" id="1314129">!</span><span class="ident" id="1314130">reflect</span><span class="op" id="1314137">.</span><span class="ident" id="1314138">DeepEqual</span><span class="op" id="1314147">(</span><span class="ident" id="1314148">out</span><span class="op" id="1314151">,</span>&nbsp;<span class="ident" id="1314153">tt</span><span class="op" id="1314155">.</span><span class="ident" id="1314156">out</span><span class="op" id="1314159">)</span>&nbsp;<span class="op" id="1314161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1314166">t</span><span class="op" id="1314167">.</span><span class="ident" id="1314168">Errorf</span><span class="op" id="1314174">(</span><span class="string" id="1314175">&#34;Decode(%x)&nbsp;=&nbsp;%x;&nbsp;want&nbsp;%x&#34;</span><span class="op" id="1314201">,</span>&nbsp;<span class="ident" id="1314203">tt</span><span class="op" id="1314205">.</span><span class="ident" id="1314206">in</span><span class="op" id="1314208">,</span>&nbsp;<span class="ident" id="1314210">out</span><span class="op" id="1314213">,</span>&nbsp;<span class="ident" id="1314215">tt</span><span class="op" id="1314217">.</span><span class="ident" id="1314218">out</span><span class="op" id="1314221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1314225">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1314228">}</span><br>
<span class="lineno"></span><span class="op" id="1314230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1314233">var</span>&nbsp;<span class="ident" id="1314237">decodeRuneTests</span>&nbsp;<span class="op" id="1314253">=</span>&nbsp;<span class="op" id="1314255">[</span><span class="op" id="1314256">]</span><span class="keyword" id="1314257">struct</span>&nbsp;<span class="op" id="1314264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1314267">r1</span><span class="op" id="1314269">,</span>&nbsp;<span class="ident" id="1314271">r2</span>&nbsp;<span class="builtintype" id="1314274">rune</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1314280">want</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1314287">rune</span><br>
<span class="lineno"></span><span class="op" id="1314292">}</span><span class="op" id="1314293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1314296">{</span><span class="num" id="1314297">0xd800</span><span class="op" id="1314303">,</span>&nbsp;<span class="num" id="1314305">0xdc00</span><span class="op" id="1314311">,</span>&nbsp;<span class="num" id="1314313">0x10000</span><span class="op" id="1314320">}</span><span class="op" id="1314321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1314324">{</span><span class="num" id="1314325">0xd800</span><span class="op" id="1314331">,</span>&nbsp;<span class="num" id="1314333">0xdc01</span><span class="op" id="1314339">,</span>&nbsp;<span class="num" id="1314341">0x10001</span><span class="op" id="1314348">}</span><span class="op" id="1314349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1314352">{</span><span class="num" id="1314353">0xd808</span><span class="op" id="1314359">,</span>&nbsp;<span class="num" id="1314361">0xdf45</span><span class="op" id="1314367">,</span>&nbsp;<span class="num" id="1314369">0x12345</span><span class="op" id="1314376">}</span><span class="op" id="1314377">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1314380">{</span><span class="num" id="1314381">0xdbff</span><span class="op" id="1314387">,</span>&nbsp;<span class="num" id="1314389">0xdfff</span><span class="op" id="1314395">,</span>&nbsp;<span class="num" id="1314397">0x10ffff</span><span class="op" id="1314405">}</span><span class="op" id="1314406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1314409">{</span><span class="num" id="1314410">0xd800</span><span class="op" id="1314416">,</span>&nbsp;<span class="string" id="1314418">&#39;a&#39;</span><span class="op" id="1314421">,</span>&nbsp;<span class="num" id="1314423">0xfffd</span><span class="op" id="1314429">}</span><span class="op" id="1314430">,</span>&nbsp;<span class="comment" id="1314432">//&nbsp;illegal,&nbsp;replacement&nbsp;rune&nbsp;substituted</span><br>
<span class="lineno"></span><span class="op" id="1314473">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1314476">func</span>&nbsp;<span class="ident" id="1314481">TestDecodeRune</span><span class="op" id="1314495">(</span><span class="ident" id="1314496">t</span>&nbsp;<span class="op" id="1314498">*</span><span class="ident" id="1314499">testing</span><span class="op" id="1314506">.</span><span class="ident" id="1314507">T</span><span class="op" id="1314508">)</span>&nbsp;<span class="op" id="1314510">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1314513">for</span>&nbsp;<span class="ident" id="1314517">i</span><span class="op" id="1314518">,</span>&nbsp;<span class="ident" id="1314520">tt</span>&nbsp;<span class="op" id="1314523">:=</span>&nbsp;<span class="keyword" id="1314526">range</span>&nbsp;<span class="ident" id="1314532">decodeRuneTests</span>&nbsp;<span class="op" id="1314548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1314552">got</span>&nbsp;<span class="op" id="1314556">:=</span>&nbsp;<span class="ident" id="1314559">DecodeRune</span><span class="op" id="1314569">(</span><span class="ident" id="1314570">tt</span><span class="op" id="1314572">.</span><span class="ident" id="1314573">r1</span><span class="op" id="1314575">,</span>&nbsp;<span class="ident" id="1314577">tt</span><span class="op" id="1314579">.</span><span class="ident" id="1314580">r2</span><span class="op" id="1314582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1314586">if</span>&nbsp;<span class="ident" id="1314589">got</span>&nbsp;<span class="op" id="1314593">!=</span>&nbsp;<span class="ident" id="1314596">tt</span><span class="op" id="1314598">.</span><span class="ident" id="1314599">want</span>&nbsp;<span class="op" id="1314604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1314609">t</span><span class="op" id="1314610">.</span><span class="ident" id="1314611">Errorf</span><span class="op" id="1314617">(</span><span class="string" id="1314618">&#34;%d:&nbsp;DecodeRune(%q,&nbsp;%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="1314656">,</span>&nbsp;<span class="ident" id="1314658">i</span><span class="op" id="1314659">,</span>&nbsp;<span class="ident" id="1314661">tt</span><span class="op" id="1314663">.</span><span class="ident" id="1314664">r1</span><span class="op" id="1314666">,</span>&nbsp;<span class="ident" id="1314668">tt</span><span class="op" id="1314670">.</span><span class="ident" id="1314671">r2</span><span class="op" id="1314673">,</span>&nbsp;<span class="ident" id="1314675">got</span><span class="op" id="1314678">,</span>&nbsp;<span class="ident" id="1314680">tt</span><span class="op" id="1314682">.</span><span class="ident" id="1314683">want</span><span class="op" id="1314687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1314691">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1314694">}</span><br>
<span class="lineno"></span><span class="op" id="1314696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1314699">var</span>&nbsp;<span class="ident" id="1314703">surrogateTests</span>&nbsp;<span class="op" id="1314718">=</span>&nbsp;<span class="op" id="1314720">[</span><span class="op" id="1314721">]</span><span class="keyword" id="1314722">struct</span>&nbsp;<span class="op" id="1314729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1314732">r</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1314737">rune</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1314743">want</span>&nbsp;<span class="builtintype" id="1314748">bool</span><br>
<span class="lineno"></span><span class="op" id="1314753">}</span><span class="op" id="1314754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1314757">//&nbsp;from&nbsp;http://en.wikipedia.org/wiki/UTF-16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1314802">{</span><span class="string" id="1314803">&#39;\u007A&#39;</span><span class="op" id="1314811">,</span>&nbsp;<span class="builtintype" id="1314813">false</span><span class="op" id="1314818">}</span><span class="op" id="1314819">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1314825">//&nbsp;LATIN&nbsp;SMALL&nbsp;LETTER&nbsp;Z</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1314850">{</span><span class="string" id="1314851">&#39;\u6C34&#39;</span><span class="op" id="1314859">,</span>&nbsp;<span class="builtintype" id="1314861">false</span><span class="op" id="1314866">}</span><span class="op" id="1314867">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1314873">//&nbsp;CJK&nbsp;UNIFIED&nbsp;IDEOGRAPH-6C34&nbsp;(water)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1314912">{</span><span class="string" id="1314913">&#39;\uFEFF&#39;</span><span class="op" id="1314921">,</span>&nbsp;<span class="builtintype" id="1314923">false</span><span class="op" id="1314928">}</span><span class="op" id="1314929">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1314935">//&nbsp;Byte&nbsp;Order&nbsp;Mark</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1314955">{</span><span class="string" id="1314956">&#39;\U00010000&#39;</span><span class="op" id="1314968">,</span>&nbsp;<span class="builtintype" id="1314970">false</span><span class="op" id="1314975">}</span><span class="op" id="1314976">,</span>&nbsp;<span class="comment" id="1314978">//&nbsp;LINEAR&nbsp;B&nbsp;SYLLABLE&nbsp;B008&nbsp;A&nbsp;(first&nbsp;non-BMP&nbsp;code&nbsp;point)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1315034">{</span><span class="string" id="1315035">&#39;\U0001D11E&#39;</span><span class="op" id="1315047">,</span>&nbsp;<span class="builtintype" id="1315049">false</span><span class="op" id="1315054">}</span><span class="op" id="1315055">,</span>&nbsp;<span class="comment" id="1315057">//&nbsp;MUSICAL&nbsp;SYMBOL&nbsp;G&nbsp;CLEF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1315083">{</span><span class="string" id="1315084">&#39;\U0010FFFD&#39;</span><span class="op" id="1315096">,</span>&nbsp;<span class="builtintype" id="1315098">false</span><span class="op" id="1315103">}</span><span class="op" id="1315104">,</span>&nbsp;<span class="comment" id="1315106">//&nbsp;PRIVATE&nbsp;USE&nbsp;CHARACTER-10FFFD&nbsp;(last&nbsp;Unicode&nbsp;code&nbsp;point)</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1315166">{</span><span class="builtintype" id="1315167">rune</span><span class="op" id="1315171">(</span><span class="num" id="1315172">0xd7ff</span><span class="op" id="1315178">)</span><span class="op" id="1315179">,</span>&nbsp;<span class="builtintype" id="1315181">false</span><span class="op" id="1315186">}</span><span class="op" id="1315187">,</span>&nbsp;<span class="comment" id="1315189">//&nbsp;surr1-1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1315201">{</span><span class="builtintype" id="1315202">rune</span><span class="op" id="1315206">(</span><span class="num" id="1315207">0xd800</span><span class="op" id="1315213">)</span><span class="op" id="1315214">,</span>&nbsp;<span class="builtintype" id="1315216">true</span><span class="op" id="1315220">}</span><span class="op" id="1315221">,</span>&nbsp;&nbsp;<span class="comment" id="1315224">//&nbsp;surr1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1315234">{</span><span class="builtintype" id="1315235">rune</span><span class="op" id="1315239">(</span><span class="num" id="1315240">0xdc00</span><span class="op" id="1315246">)</span><span class="op" id="1315247">,</span>&nbsp;<span class="builtintype" id="1315249">true</span><span class="op" id="1315253">}</span><span class="op" id="1315254">,</span>&nbsp;&nbsp;<span class="comment" id="1315257">//&nbsp;surr2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1315267">{</span><span class="builtintype" id="1315268">rune</span><span class="op" id="1315272">(</span><span class="num" id="1315273">0xe000</span><span class="op" id="1315279">)</span><span class="op" id="1315280">,</span>&nbsp;<span class="builtintype" id="1315282">false</span><span class="op" id="1315287">}</span><span class="op" id="1315288">,</span>&nbsp;<span class="comment" id="1315290">//&nbsp;surr3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1315300">{</span><span class="builtintype" id="1315301">rune</span><span class="op" id="1315305">(</span><span class="num" id="1315306">0xdfff</span><span class="op" id="1315312">)</span><span class="op" id="1315313">,</span>&nbsp;<span class="builtintype" id="1315315">true</span><span class="op" id="1315319">}</span><span class="op" id="1315320">,</span>&nbsp;&nbsp;<span class="comment" id="1315323">//&nbsp;surr3-1</span><br>
<span class="lineno">140</span><span class="op" id="1315334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1315337">func</span>&nbsp;<span class="ident" id="1315342">TestIsSurrogate</span><span class="op" id="1315357">(</span><span class="ident" id="1315358">t</span>&nbsp;<span class="op" id="1315360">*</span><span class="ident" id="1315361">testing</span><span class="op" id="1315368">.</span><span class="ident" id="1315369">T</span><span class="op" id="1315370">)</span>&nbsp;<span class="op" id="1315372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1315375">for</span>&nbsp;<span class="ident" id="1315379">i</span><span class="op" id="1315380">,</span>&nbsp;<span class="ident" id="1315382">tt</span>&nbsp;<span class="op" id="1315385">:=</span>&nbsp;<span class="keyword" id="1315388">range</span>&nbsp;<span class="ident" id="1315394">surrogateTests</span>&nbsp;<span class="op" id="1315409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1315413">got</span>&nbsp;<span class="op" id="1315417">:=</span>&nbsp;<span class="ident" id="1315420">IsSurrogate</span><span class="op" id="1315431">(</span><span class="ident" id="1315432">tt</span><span class="op" id="1315434">.</span><span class="ident" id="1315435">r</span><span class="op" id="1315436">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1315440">if</span>&nbsp;<span class="ident" id="1315443">got</span>&nbsp;<span class="op" id="1315447">!=</span>&nbsp;<span class="ident" id="1315450">tt</span><span class="op" id="1315452">.</span><span class="ident" id="1315453">want</span>&nbsp;<span class="op" id="1315458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1315463">t</span><span class="op" id="1315464">.</span><span class="ident" id="1315465">Errorf</span><span class="op" id="1315471">(</span><span class="string" id="1315472">&#34;%d:&nbsp;IsSurrogate(%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="1315507">,</span>&nbsp;<span class="ident" id="1315509">i</span><span class="op" id="1315510">,</span>&nbsp;<span class="ident" id="1315512">tt</span><span class="op" id="1315514">.</span><span class="ident" id="1315515">r</span><span class="op" id="1315516">,</span>&nbsp;<span class="ident" id="1315518">got</span><span class="op" id="1315521">,</span>&nbsp;<span class="ident" id="1315523">tt</span><span class="op" id="1315525">.</span><span class="ident" id="1315526">want</span><span class="op" id="1315530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1315534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1315537">}</span><br>
<span class="lineno"></span><span class="op" id="1315539">}</span>
</div>
</body>
</html>
