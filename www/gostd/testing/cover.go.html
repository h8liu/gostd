<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>testing</h2>
<ul>
<li><a href="/gostd/testing/allocs.go.html">allocs.go</a></li>
<li><a href="/gostd/testing/allocs_test.go.html">allocs_test.go</a></li>
<li><a href="/gostd/testing/benchmark.go.html">benchmark.go</a></li>
<li><a href="/gostd/testing/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/testing/cover.go.html">cover.go</a></li>
<li><a href="/gostd/testing/example.go.html">example.go</a></li>
<li><a href="/gostd/testing/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/testing/testing.go.html">testing.go</a></li>
<li><a href="/gostd/testing/testing_test.go.html">testing_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6193970">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6194025">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6194079">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6194130">//&nbsp;Support&nbsp;for&nbsp;test&nbsp;coverage.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6194161">package</span>&nbsp;<span class="ident" id="6194169">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6194178">import</span>&nbsp;<span class="op" id="6194185">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6194188">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6194195">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6194201">&#34;sync/atomic&#34;</span><br>
<span class="lineno"></span><span class="op" id="6194215">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6194218">//&nbsp;CoverBlock&nbsp;records&nbsp;the&nbsp;coverage&nbsp;data&nbsp;for&nbsp;a&nbsp;single&nbsp;basic&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="6194284">//&nbsp;NOTE:&nbsp;This&nbsp;struct&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno"></span><span class="comment" id="6194363">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="6194428">type</span>&nbsp;<span class="ident" id="6194433">CoverBlock</span>&nbsp;<span class="keyword" id="6194444">struct</span>&nbsp;<span class="op" id="6194451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194454">Line0</span>&nbsp;<span class="builtintype" id="6194460">uint32</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194468">Col0</span>&nbsp;&nbsp;<span class="builtintype" id="6194474">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194482">Line1</span>&nbsp;<span class="builtintype" id="6194488">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194496">Col1</span>&nbsp;&nbsp;<span class="builtintype" id="6194502">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194510">Stmts</span>&nbsp;<span class="builtintype" id="6194516">uint16</span><br>
<span class="lineno"></span><span class="op" id="6194523">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6194526">var</span>&nbsp;<span class="ident" id="6194530">cover</span>&nbsp;<span class="ident" id="6194536">Cover</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6194543">//&nbsp;Cover&nbsp;records&nbsp;information&nbsp;about&nbsp;test&nbsp;coverage&nbsp;checking.</span><br>
<span class="lineno"></span><span class="comment" id="6194602">//&nbsp;NOTE:&nbsp;This&nbsp;struct&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno">30</span><span class="comment" id="6194681">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="6194746">type</span>&nbsp;<span class="ident" id="6194751">Cover</span>&nbsp;<span class="keyword" id="6194757">struct</span>&nbsp;<span class="op" id="6194764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194767">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6194783">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194791">Counters</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6194807">map</span><span class="op" id="6194810">[</span><span class="builtintype" id="6194811">string</span><span class="op" id="6194817">]</span><span class="op" id="6194818">[</span><span class="op" id="6194819">]</span><span class="builtintype" id="6194820">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194828">Blocks</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6194844">map</span><span class="op" id="6194847">[</span><span class="builtintype" id="6194848">string</span><span class="op" id="6194854">]</span><span class="op" id="6194855">[</span><span class="op" id="6194856">]</span><span class="ident" id="6194857">CoverBlock</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194869">CoveredPackages</span>&nbsp;<span class="builtintype" id="6194885">string</span><br>
<span class="lineno"></span><span class="op" id="6194892">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6194895">//&nbsp;Coverage&nbsp;reports&nbsp;the&nbsp;current&nbsp;code&nbsp;coverage&nbsp;as&nbsp;a&nbsp;fraction&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;1].</span><br>
<span class="lineno"></span><span class="comment" id="6194976">//&nbsp;If&nbsp;coverage&nbsp;is&nbsp;not&nbsp;enabled,&nbsp;Coverage&nbsp;returns&nbsp;0.</span><br>
<span class="lineno">40</span><span class="comment" id="6195027">//</span><br>
<span class="lineno"></span><span class="comment" id="6195030">//&nbsp;When&nbsp;running&nbsp;a&nbsp;large&nbsp;set&nbsp;of&nbsp;sequential&nbsp;test&nbsp;cases,&nbsp;checking&nbsp;Coverage&nbsp;after&nbsp;each&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="6195117">//&nbsp;can&nbsp;be&nbsp;useful&nbsp;for&nbsp;identifying&nbsp;which&nbsp;test&nbsp;cases&nbsp;exercise&nbsp;new&nbsp;code&nbsp;paths.</span><br>
<span class="lineno"></span><span class="comment" id="6195192">//&nbsp;It&nbsp;is&nbsp;not&nbsp;a&nbsp;replacement&nbsp;for&nbsp;the&nbsp;reports&nbsp;generated&nbsp;by&nbsp;&#39;go&nbsp;test&nbsp;-cover&#39;&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6195269">//&nbsp;&#39;go&nbsp;tool&nbsp;cover&#39;.</span><br>
<span class="lineno">45</span><span class="keyword" id="6195289">func</span>&nbsp;<span class="ident" id="6195294">Coverage</span><span class="op" id="6195302">(</span><span class="op" id="6195303">)</span>&nbsp;<span class="builtintype" id="6195305">float64</span>&nbsp;<span class="op" id="6195313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6195316">var</span>&nbsp;<span class="ident" id="6195320">n</span><span class="op" id="6195321">,</span>&nbsp;<span class="ident" id="6195323">d</span>&nbsp;<span class="ident" id="6195325">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6195332">for</span>&nbsp;<span class="ident" id="6195336">_</span><span class="op" id="6195337">,</span>&nbsp;<span class="ident" id="6195339">counters</span>&nbsp;<span class="op" id="6195348">:=</span>&nbsp;<span class="keyword" id="6195351">range</span>&nbsp;<span class="ident" id="6195357">cover</span><span class="op" id="6195362">.</span><span class="ident" id="6195363">Counters</span>&nbsp;<span class="op" id="6195372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6195376">for</span>&nbsp;<span class="ident" id="6195380">i</span>&nbsp;<span class="op" id="6195382">:=</span>&nbsp;<span class="keyword" id="6195385">range</span>&nbsp;<span class="ident" id="6195391">counters</span>&nbsp;<span class="op" id="6195400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6195405">if</span>&nbsp;<span class="ident" id="6195408">atomic</span><span class="op" id="6195414">.</span><span class="ident" id="6195415">LoadUint32</span><span class="op" id="6195425">(</span><span class="op" id="6195426">&amp;</span><span class="ident" id="6195427">counters</span><span class="op" id="6195435">[</span><span class="ident" id="6195436">i</span><span class="op" id="6195437">]</span><span class="op" id="6195438">)</span>&nbsp;<span class="op" id="6195440">&gt;</span>&nbsp;<span class="num" id="6195442">0</span>&nbsp;<span class="op" id="6195444">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6195450">n</span><span class="op" id="6195451">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6195457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6195462">d</span><span class="op" id="6195463">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6195468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6195471">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6195474">if</span>&nbsp;<span class="ident" id="6195477">d</span>&nbsp;<span class="op" id="6195479">==</span>&nbsp;<span class="num" id="6195482">0</span>&nbsp;<span class="op" id="6195484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6195488">return</span>&nbsp;<span class="num" id="6195495">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6195498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6195501">return</span>&nbsp;<span class="builtintype" id="6195508">float64</span><span class="op" id="6195515">(</span><span class="ident" id="6195516">n</span><span class="op" id="6195517">)</span>&nbsp;<span class="op" id="6195519">/</span>&nbsp;<span class="builtintype" id="6195521">float64</span><span class="op" id="6195528">(</span><span class="ident" id="6195529">d</span><span class="op" id="6195530">)</span><br>
<span class="lineno"></span><span class="op" id="6195532">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="6195535">//&nbsp;RegisterCover&nbsp;records&nbsp;the&nbsp;coverage&nbsp;data&nbsp;accumulators&nbsp;for&nbsp;the&nbsp;tests.</span><br>
<span class="lineno"></span><span class="comment" id="6195606">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno"></span><span class="comment" id="6195687">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="6195752">func</span>&nbsp;<span class="ident" id="6195757">RegisterCover</span><span class="op" id="6195770">(</span><span class="ident" id="6195771">c</span>&nbsp;<span class="ident" id="6195773">Cover</span><span class="op" id="6195778">)</span>&nbsp;<span class="op" id="6195780">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6195783">cover</span>&nbsp;<span class="op" id="6195789">=</span>&nbsp;<span class="ident" id="6195791">c</span><br>
<span class="lineno"></span><span class="op" id="6195793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6195796">//&nbsp;mustBeNil&nbsp;checks&nbsp;the&nbsp;error&nbsp;and,&nbsp;if&nbsp;present,&nbsp;reports&nbsp;it&nbsp;and&nbsp;exits.</span><br>
<span class="lineno"></span><span class="keyword" id="6195865">func</span>&nbsp;<span class="ident" id="6195870">mustBeNil</span><span class="op" id="6195879">(</span><span class="ident" id="6195880">err</span>&nbsp;<span class="builtintype" id="6195884">error</span><span class="op" id="6195889">)</span>&nbsp;<span class="op" id="6195891">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6195894">if</span>&nbsp;<span class="ident" id="6195897">err</span>&nbsp;<span class="op" id="6195901">!=</span>&nbsp;<span class="ident" id="6195904">nil</span>&nbsp;<span class="op" id="6195908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6195912">fmt</span><span class="op" id="6195915">.</span><span class="ident" id="6195916">Fprintf</span><span class="op" id="6195923">(</span><span class="ident" id="6195924">os</span><span class="op" id="6195926">.</span><span class="ident" id="6195927">Stderr</span><span class="op" id="6195933">,</span>&nbsp;<span class="string" id="6195935">&#34;testing:&nbsp;%s\n&#34;</span><span class="op" id="6195950">,</span>&nbsp;<span class="ident" id="6195952">err</span><span class="op" id="6195955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6195959">os</span><span class="op" id="6195961">.</span><span class="ident" id="6195962">Exit</span><span class="op" id="6195966">(</span><span class="num" id="6195967">2</span><span class="op" id="6195968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6195971">}</span><br>
<span class="lineno"></span><span class="op" id="6195973">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="6195976">//&nbsp;coverReport&nbsp;reports&nbsp;the&nbsp;coverage&nbsp;percentage&nbsp;and&nbsp;writes&nbsp;a&nbsp;coverage&nbsp;profile&nbsp;if&nbsp;requested.</span><br>
<span class="lineno"></span><span class="keyword" id="6196067">func</span>&nbsp;<span class="ident" id="6196072">coverReport</span><span class="op" id="6196083">(</span><span class="op" id="6196084">)</span>&nbsp;<span class="op" id="6196086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6196089">var</span>&nbsp;<span class="ident" id="6196093">f</span>&nbsp;<span class="op" id="6196095">*</span><span class="ident" id="6196096">os</span><span class="op" id="6196098">.</span><span class="ident" id="6196099">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6196105">var</span>&nbsp;<span class="ident" id="6196109">err</span>&nbsp;<span class="builtintype" id="6196113">error</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6196120">if</span>&nbsp;<span class="op" id="6196123">*</span><span class="ident" id="6196124">coverProfile</span>&nbsp;<span class="op" id="6196137">!=</span>&nbsp;<span class="string" id="6196140">&#34;&#34;</span>&nbsp;<span class="op" id="6196143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196147">f</span><span class="op" id="6196148">,</span>&nbsp;<span class="ident" id="6196150">err</span>&nbsp;<span class="op" id="6196154">=</span>&nbsp;<span class="ident" id="6196156">os</span><span class="op" id="6196158">.</span><span class="ident" id="6196159">Create</span><span class="op" id="6196165">(</span><span class="ident" id="6196166">toOutputDir</span><span class="op" id="6196177">(</span><span class="op" id="6196178">*</span><span class="ident" id="6196179">coverProfile</span><span class="op" id="6196191">)</span><span class="op" id="6196192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196196">mustBeNil</span><span class="op" id="6196205">(</span><span class="ident" id="6196206">err</span><span class="op" id="6196209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196213">fmt</span><span class="op" id="6196216">.</span><span class="ident" id="6196217">Fprintf</span><span class="op" id="6196224">(</span><span class="ident" id="6196225">f</span><span class="op" id="6196226">,</span>&nbsp;<span class="string" id="6196228">&#34;mode:&nbsp;%s\n&#34;</span><span class="op" id="6196240">,</span>&nbsp;<span class="ident" id="6196242">cover</span><span class="op" id="6196247">.</span><span class="ident" id="6196248">Mode</span><span class="op" id="6196252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6196256">defer</span>&nbsp;<span class="keyword" id="6196262">func</span><span class="op" id="6196266">(</span><span class="op" id="6196267">)</span>&nbsp;<span class="op" id="6196269">{</span>&nbsp;<span class="ident" id="6196271">mustBeNil</span><span class="op" id="6196280">(</span><span class="ident" id="6196281">f</span><span class="op" id="6196282">.</span><span class="ident" id="6196283">Close</span><span class="op" id="6196288">(</span><span class="op" id="6196289">)</span><span class="op" id="6196290">)</span>&nbsp;<span class="op" id="6196292">}</span><span class="op" id="6196293">(</span><span class="op" id="6196294">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6196297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6196301">var</span>&nbsp;<span class="ident" id="6196305">active</span><span class="op" id="6196311">,</span>&nbsp;<span class="ident" id="6196313">total</span>&nbsp;<span class="ident" id="6196319">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6196326">var</span>&nbsp;<span class="ident" id="6196330">count</span>&nbsp;<span class="builtintype" id="6196336">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6196344">for</span>&nbsp;<span class="ident" id="6196348">name</span><span class="op" id="6196352">,</span>&nbsp;<span class="ident" id="6196354">counts</span>&nbsp;<span class="op" id="6196361">:=</span>&nbsp;<span class="keyword" id="6196364">range</span>&nbsp;<span class="ident" id="6196370">cover</span><span class="op" id="6196375">.</span><span class="ident" id="6196376">Counters</span>&nbsp;<span class="op" id="6196385">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196389">blocks</span>&nbsp;<span class="op" id="6196396">:=</span>&nbsp;<span class="ident" id="6196399">cover</span><span class="op" id="6196404">.</span><span class="ident" id="6196405">Blocks</span><span class="op" id="6196411">[</span><span class="ident" id="6196412">name</span><span class="op" id="6196416">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6196420">for</span>&nbsp;<span class="ident" id="6196424">i</span>&nbsp;<span class="op" id="6196426">:=</span>&nbsp;<span class="keyword" id="6196429">range</span>&nbsp;<span class="ident" id="6196435">counts</span>&nbsp;<span class="op" id="6196442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196447">stmts</span>&nbsp;<span class="op" id="6196453">:=</span>&nbsp;<span class="ident" id="6196456">int64</span><span class="op" id="6196461">(</span><span class="ident" id="6196462">blocks</span><span class="op" id="6196468">[</span><span class="ident" id="6196469">i</span><span class="op" id="6196470">]</span><span class="op" id="6196471">.</span><span class="ident" id="6196472">Stmts</span><span class="op" id="6196477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196482">total</span>&nbsp;<span class="op" id="6196488">+=</span>&nbsp;<span class="ident" id="6196491">stmts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196500">count</span>&nbsp;<span class="op" id="6196506">=</span>&nbsp;<span class="ident" id="6196508">atomic</span><span class="op" id="6196514">.</span><span class="ident" id="6196515">LoadUint32</span><span class="op" id="6196525">(</span><span class="op" id="6196526">&amp;</span><span class="ident" id="6196527">counts</span><span class="op" id="6196533">[</span><span class="ident" id="6196534">i</span><span class="op" id="6196535">]</span><span class="op" id="6196536">)</span>&nbsp;<span class="comment" id="6196538">//&nbsp;For&nbsp;-mode=atomic.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6196562">if</span>&nbsp;<span class="ident" id="6196565">count</span>&nbsp;<span class="op" id="6196571">&gt;</span>&nbsp;<span class="num" id="6196573">0</span>&nbsp;<span class="op" id="6196575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196581">active</span>&nbsp;<span class="op" id="6196588">+=</span>&nbsp;<span class="ident" id="6196591">stmts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6196600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6196605">if</span>&nbsp;<span class="ident" id="6196608">f</span>&nbsp;<span class="op" id="6196610">!=</span>&nbsp;<span class="ident" id="6196613">nil</span>&nbsp;<span class="op" id="6196617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196623">_</span><span class="op" id="6196624">,</span>&nbsp;<span class="ident" id="6196626">err</span>&nbsp;<span class="op" id="6196630">:=</span>&nbsp;<span class="ident" id="6196633">fmt</span><span class="op" id="6196636">.</span><span class="ident" id="6196637">Fprintf</span><span class="op" id="6196644">(</span><span class="ident" id="6196645">f</span><span class="op" id="6196646">,</span>&nbsp;<span class="string" id="6196648">&#34;%s:%d.%d,%d.%d&nbsp;%d&nbsp;%d\n&#34;</span><span class="op" id="6196672">,</span>&nbsp;<span class="ident" id="6196674">name</span><span class="op" id="6196678">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196685">blocks</span><span class="op" id="6196691">[</span><span class="ident" id="6196692">i</span><span class="op" id="6196693">]</span><span class="op" id="6196694">.</span><span class="ident" id="6196695">Line0</span><span class="op" id="6196700">,</span>&nbsp;<span class="ident" id="6196702">blocks</span><span class="op" id="6196708">[</span><span class="ident" id="6196709">i</span><span class="op" id="6196710">]</span><span class="op" id="6196711">.</span><span class="ident" id="6196712">Col0</span><span class="op" id="6196716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196723">blocks</span><span class="op" id="6196729">[</span><span class="ident" id="6196730">i</span><span class="op" id="6196731">]</span><span class="op" id="6196732">.</span><span class="ident" id="6196733">Line1</span><span class="op" id="6196738">,</span>&nbsp;<span class="ident" id="6196740">blocks</span><span class="op" id="6196746">[</span><span class="ident" id="6196747">i</span><span class="op" id="6196748">]</span><span class="op" id="6196749">.</span><span class="ident" id="6196750">Col1</span><span class="op" id="6196754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196761">stmts</span><span class="op" id="6196766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196773">count</span><span class="op" id="6196778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196784">mustBeNil</span><span class="op" id="6196793">(</span><span class="ident" id="6196794">err</span><span class="op" id="6196797">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6196802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6196806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6196809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6196812">if</span>&nbsp;<span class="ident" id="6196815">total</span>&nbsp;<span class="op" id="6196821">==</span>&nbsp;<span class="num" id="6196824">0</span>&nbsp;<span class="op" id="6196826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196830">total</span>&nbsp;<span class="op" id="6196836">=</span>&nbsp;<span class="num" id="6196838">1</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6196841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196844">fmt</span><span class="op" id="6196847">.</span><span class="ident" id="6196848">Printf</span><span class="op" id="6196854">(</span><span class="string" id="6196855">&#34;coverage:&nbsp;%.1f%%&nbsp;of&nbsp;statements%s\n&#34;</span><span class="op" id="6196891">,</span>&nbsp;<span class="num" id="6196893">100</span><span class="op" id="6196896">*</span><span class="builtintype" id="6196897">float64</span><span class="op" id="6196904">(</span><span class="ident" id="6196905">active</span><span class="op" id="6196911">)</span><span class="op" id="6196912">/</span><span class="builtintype" id="6196913">float64</span><span class="op" id="6196920">(</span><span class="ident" id="6196921">total</span><span class="op" id="6196926">)</span><span class="op" id="6196927">,</span>&nbsp;<span class="ident" id="6196929">cover</span><span class="op" id="6196934">.</span><span class="ident" id="6196935">CoveredPackages</span><span class="op" id="6196950">)</span><br>
<span class="lineno"></span><span class="op" id="6196952">}</span>
</div>
</body>
</html>
