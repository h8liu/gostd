<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html" class="current">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7523598">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7523653">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7523707">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7523758">package</span>&nbsp;<span class="ident" id="7523766">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7523771">import</span>&nbsp;<span class="op" id="7523778">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7523781">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7523790">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7523803">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7523809">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7523817">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7523828">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7523839">&#34;testing&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7523850">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7523857">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7523860">func</span>&nbsp;<span class="ident" id="7523865">TestFileInfoHeader</span><span class="op" id="7523883">(</span><span class="ident" id="7523884">t</span>&nbsp;<span class="op" id="7523886">*</span><span class="ident" id="7523887">testing</span><span class="op" id="7523894">.</span><span class="ident" id="7523895">T</span><span class="op" id="7523896">)</span>&nbsp;<span class="op" id="7523898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7523901">fi</span><span class="op" id="7523903">,</span>&nbsp;<span class="ident" id="7523905">err</span>&nbsp;<span class="op" id="7523909">:=</span>&nbsp;<span class="ident" id="7523912">os</span><span class="op" id="7523914">.</span><span class="ident" id="7523915">Stat</span><span class="op" id="7523919">(</span><span class="string" id="7523920">&#34;testdata/small.txt&#34;</span><span class="op" id="7523940">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7523943">if</span>&nbsp;<span class="ident" id="7523946">err</span>&nbsp;<span class="op" id="7523950">!=</span>&nbsp;<span class="ident" id="7523953">nil</span>&nbsp;<span class="op" id="7523957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7523961">t</span><span class="op" id="7523962">.</span><span class="ident" id="7523963">Fatal</span><span class="op" id="7523968">(</span><span class="ident" id="7523969">err</span><span class="op" id="7523972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7523975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7523978">h</span><span class="op" id="7523979">,</span>&nbsp;<span class="ident" id="7523981">err</span>&nbsp;<span class="op" id="7523985">:=</span>&nbsp;<span class="ident" id="7523988">FileInfoHeader</span><span class="op" id="7524002">(</span><span class="ident" id="7524003">fi</span><span class="op" id="7524005">,</span>&nbsp;<span class="string" id="7524007">&#34;&#34;</span><span class="op" id="7524009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7524012">if</span>&nbsp;<span class="ident" id="7524015">err</span>&nbsp;<span class="op" id="7524019">!=</span>&nbsp;<span class="ident" id="7524022">nil</span>&nbsp;<span class="op" id="7524026">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7524030">t</span><span class="op" id="7524031">.</span><span class="ident" id="7524032">Fatalf</span><span class="op" id="7524038">(</span><span class="string" id="7524039">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="7524059">,</span>&nbsp;<span class="ident" id="7524061">err</span><span class="op" id="7524064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7524067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7524070">if</span>&nbsp;<span class="ident" id="7524073">g</span><span class="op" id="7524074">,</span>&nbsp;<span class="ident" id="7524076">e</span>&nbsp;<span class="op" id="7524078">:=</span>&nbsp;<span class="ident" id="7524081">h</span><span class="op" id="7524082">.</span><span class="ident" id="7524083">Name</span><span class="op" id="7524087">,</span>&nbsp;<span class="string" id="7524089">&#34;small.txt&#34;</span><span class="op" id="7524100">;</span>&nbsp;<span class="ident" id="7524102">g</span>&nbsp;<span class="op" id="7524104">!=</span>&nbsp;<span class="ident" id="7524107">e</span>&nbsp;<span class="op" id="7524109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7524113">t</span><span class="op" id="7524114">.</span><span class="ident" id="7524115">Errorf</span><span class="op" id="7524121">(</span><span class="string" id="7524122">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7524142">,</span>&nbsp;<span class="ident" id="7524144">g</span><span class="op" id="7524145">,</span>&nbsp;<span class="ident" id="7524147">e</span><span class="op" id="7524148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7524151">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7524154">if</span>&nbsp;<span class="ident" id="7524157">g</span><span class="op" id="7524158">,</span>&nbsp;<span class="ident" id="7524160">e</span>&nbsp;<span class="op" id="7524162">:=</span>&nbsp;<span class="ident" id="7524165">h</span><span class="op" id="7524166">.</span><span class="ident" id="7524167">Mode</span><span class="op" id="7524171">,</span>&nbsp;<span class="ident" id="7524173">int64</span><span class="op" id="7524178">(</span><span class="ident" id="7524179">fi</span><span class="op" id="7524181">.</span><span class="ident" id="7524182">Mode</span><span class="op" id="7524186">(</span><span class="op" id="7524187">)</span><span class="op" id="7524188">.</span><span class="ident" id="7524189">Perm</span><span class="op" id="7524193">(</span><span class="op" id="7524194">)</span><span class="op" id="7524195">)</span><span class="op" id="7524196">|</span><span class="ident" id="7524197">c_ISREG</span><span class="op" id="7524204">;</span>&nbsp;<span class="ident" id="7524206">g</span>&nbsp;<span class="op" id="7524208">!=</span>&nbsp;<span class="ident" id="7524211">e</span>&nbsp;<span class="op" id="7524213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7524217">t</span><span class="op" id="7524218">.</span><span class="ident" id="7524219">Errorf</span><span class="op" id="7524225">(</span><span class="string" id="7524226">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="7524248">,</span>&nbsp;<span class="ident" id="7524250">g</span><span class="op" id="7524251">,</span>&nbsp;<span class="ident" id="7524253">e</span><span class="op" id="7524254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7524257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7524260">if</span>&nbsp;<span class="ident" id="7524263">g</span><span class="op" id="7524264">,</span>&nbsp;<span class="ident" id="7524266">e</span>&nbsp;<span class="op" id="7524268">:=</span>&nbsp;<span class="ident" id="7524271">h</span><span class="op" id="7524272">.</span><span class="ident" id="7524273">Size</span><span class="op" id="7524277">,</span>&nbsp;<span class="ident" id="7524279">int64</span><span class="op" id="7524284">(</span><span class="num" id="7524285">5</span><span class="op" id="7524286">)</span><span class="op" id="7524287">;</span>&nbsp;<span class="ident" id="7524289">g</span>&nbsp;<span class="op" id="7524291">!=</span>&nbsp;<span class="ident" id="7524294">e</span>&nbsp;<span class="op" id="7524296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7524300">t</span><span class="op" id="7524301">.</span><span class="ident" id="7524302">Errorf</span><span class="op" id="7524308">(</span><span class="string" id="7524309">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7524329">,</span>&nbsp;<span class="ident" id="7524331">g</span><span class="op" id="7524332">,</span>&nbsp;<span class="ident" id="7524334">e</span><span class="op" id="7524335">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7524338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7524341">if</span>&nbsp;<span class="ident" id="7524344">g</span><span class="op" id="7524345">,</span>&nbsp;<span class="ident" id="7524347">e</span>&nbsp;<span class="op" id="7524349">:=</span>&nbsp;<span class="ident" id="7524352">h</span><span class="op" id="7524353">.</span><span class="ident" id="7524354">ModTime</span><span class="op" id="7524361">,</span>&nbsp;<span class="ident" id="7524363">fi</span><span class="op" id="7524365">.</span><span class="ident" id="7524366">ModTime</span><span class="op" id="7524373">(</span><span class="op" id="7524374">)</span><span class="op" id="7524375">;</span>&nbsp;<span class="op" id="7524377">!</span><span class="ident" id="7524378">g</span><span class="op" id="7524379">.</span><span class="ident" id="7524380">Equal</span><span class="op" id="7524385">(</span><span class="ident" id="7524386">e</span><span class="op" id="7524387">)</span>&nbsp;<span class="op" id="7524389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7524393">t</span><span class="op" id="7524394">.</span><span class="ident" id="7524395">Errorf</span><span class="op" id="7524401">(</span><span class="string" id="7524402">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7524425">,</span>&nbsp;<span class="ident" id="7524427">g</span><span class="op" id="7524428">,</span>&nbsp;<span class="ident" id="7524430">e</span><span class="op" id="7524431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7524434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7524437">//&nbsp;FileInfoHeader&nbsp;should&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;FileInfo</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7524495">if</span>&nbsp;<span class="ident" id="7524498">_</span><span class="op" id="7524499">,</span>&nbsp;<span class="ident" id="7524501">err</span>&nbsp;<span class="op" id="7524505">:=</span>&nbsp;<span class="ident" id="7524508">FileInfoHeader</span><span class="op" id="7524522">(</span><span class="ident" id="7524523">nil</span><span class="op" id="7524526">,</span>&nbsp;<span class="string" id="7524528">&#34;&#34;</span><span class="op" id="7524530">)</span><span class="op" id="7524531">;</span>&nbsp;<span class="ident" id="7524533">err</span>&nbsp;<span class="op" id="7524537">==</span>&nbsp;<span class="ident" id="7524540">nil</span>&nbsp;<span class="op" id="7524544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7524548">t</span><span class="op" id="7524549">.</span><span class="ident" id="7524550">Fatalf</span><span class="op" id="7524556">(</span><span class="string" id="7524557">&#34;Expected&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;to&nbsp;FileInfoHeader&#34;</span><span class="op" id="7524608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7524611">}</span><br>
<span class="lineno"></span><span class="op" id="7524613">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="7524616">func</span>&nbsp;<span class="ident" id="7524621">TestFileInfoHeaderDir</span><span class="op" id="7524642">(</span><span class="ident" id="7524643">t</span>&nbsp;<span class="op" id="7524645">*</span><span class="ident" id="7524646">testing</span><span class="op" id="7524653">.</span><span class="ident" id="7524654">T</span><span class="op" id="7524655">)</span>&nbsp;<span class="op" id="7524657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7524660">fi</span><span class="op" id="7524662">,</span>&nbsp;<span class="ident" id="7524664">err</span>&nbsp;<span class="op" id="7524668">:=</span>&nbsp;<span class="ident" id="7524671">os</span><span class="op" id="7524673">.</span><span class="ident" id="7524674">Stat</span><span class="op" id="7524678">(</span><span class="string" id="7524679">&#34;testdata&#34;</span><span class="op" id="7524689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7524692">if</span>&nbsp;<span class="ident" id="7524695">err</span>&nbsp;<span class="op" id="7524699">!=</span>&nbsp;<span class="ident" id="7524702">nil</span>&nbsp;<span class="op" id="7524706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7524710">t</span><span class="op" id="7524711">.</span><span class="ident" id="7524712">Fatal</span><span class="op" id="7524717">(</span><span class="ident" id="7524718">err</span><span class="op" id="7524721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7524724">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7524727">h</span><span class="op" id="7524728">,</span>&nbsp;<span class="ident" id="7524730">err</span>&nbsp;<span class="op" id="7524734">:=</span>&nbsp;<span class="ident" id="7524737">FileInfoHeader</span><span class="op" id="7524751">(</span><span class="ident" id="7524752">fi</span><span class="op" id="7524754">,</span>&nbsp;<span class="string" id="7524756">&#34;&#34;</span><span class="op" id="7524758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7524761">if</span>&nbsp;<span class="ident" id="7524764">err</span>&nbsp;<span class="op" id="7524768">!=</span>&nbsp;<span class="ident" id="7524771">nil</span>&nbsp;<span class="op" id="7524775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7524779">t</span><span class="op" id="7524780">.</span><span class="ident" id="7524781">Fatalf</span><span class="op" id="7524787">(</span><span class="string" id="7524788">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="7524808">,</span>&nbsp;<span class="ident" id="7524810">err</span><span class="op" id="7524813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7524816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7524819">if</span>&nbsp;<span class="ident" id="7524822">g</span><span class="op" id="7524823">,</span>&nbsp;<span class="ident" id="7524825">e</span>&nbsp;<span class="op" id="7524827">:=</span>&nbsp;<span class="ident" id="7524830">h</span><span class="op" id="7524831">.</span><span class="ident" id="7524832">Name</span><span class="op" id="7524836">,</span>&nbsp;<span class="string" id="7524838">&#34;testdata/&#34;</span><span class="op" id="7524849">;</span>&nbsp;<span class="ident" id="7524851">g</span>&nbsp;<span class="op" id="7524853">!=</span>&nbsp;<span class="ident" id="7524856">e</span>&nbsp;<span class="op" id="7524858">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7524862">t</span><span class="op" id="7524863">.</span><span class="ident" id="7524864">Errorf</span><span class="op" id="7524870">(</span><span class="string" id="7524871">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7524891">,</span>&nbsp;<span class="ident" id="7524893">g</span><span class="op" id="7524894">,</span>&nbsp;<span class="ident" id="7524896">e</span><span class="op" id="7524897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7524900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7524903">//&nbsp;Ignoring&nbsp;c_ISGID&nbsp;for&nbsp;golang.org/issue/4867</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7524950">if</span>&nbsp;<span class="ident" id="7524953">g</span><span class="op" id="7524954">,</span>&nbsp;<span class="ident" id="7524956">e</span>&nbsp;<span class="op" id="7524958">:=</span>&nbsp;<span class="ident" id="7524961">h</span><span class="op" id="7524962">.</span><span class="ident" id="7524963">Mode</span><span class="op" id="7524967">&amp;^</span><span class="ident" id="7524969">c_ISGID</span><span class="op" id="7524976">,</span>&nbsp;<span class="ident" id="7524978">int64</span><span class="op" id="7524983">(</span><span class="ident" id="7524984">fi</span><span class="op" id="7524986">.</span><span class="ident" id="7524987">Mode</span><span class="op" id="7524991">(</span><span class="op" id="7524992">)</span><span class="op" id="7524993">.</span><span class="ident" id="7524994">Perm</span><span class="op" id="7524998">(</span><span class="op" id="7524999">)</span><span class="op" id="7525000">)</span><span class="op" id="7525001">|</span><span class="ident" id="7525002">c_ISDIR</span><span class="op" id="7525009">;</span>&nbsp;<span class="ident" id="7525011">g</span>&nbsp;<span class="op" id="7525013">!=</span>&nbsp;<span class="ident" id="7525016">e</span>&nbsp;<span class="op" id="7525018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7525022">t</span><span class="op" id="7525023">.</span><span class="ident" id="7525024">Errorf</span><span class="op" id="7525030">(</span><span class="string" id="7525031">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="7525053">,</span>&nbsp;<span class="ident" id="7525055">g</span><span class="op" id="7525056">,</span>&nbsp;<span class="ident" id="7525058">e</span><span class="op" id="7525059">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7525062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7525065">if</span>&nbsp;<span class="ident" id="7525068">g</span><span class="op" id="7525069">,</span>&nbsp;<span class="ident" id="7525071">e</span>&nbsp;<span class="op" id="7525073">:=</span>&nbsp;<span class="ident" id="7525076">h</span><span class="op" id="7525077">.</span><span class="ident" id="7525078">Size</span><span class="op" id="7525082">,</span>&nbsp;<span class="ident" id="7525084">int64</span><span class="op" id="7525089">(</span><span class="num" id="7525090">0</span><span class="op" id="7525091">)</span><span class="op" id="7525092">;</span>&nbsp;<span class="ident" id="7525094">g</span>&nbsp;<span class="op" id="7525096">!=</span>&nbsp;<span class="ident" id="7525099">e</span>&nbsp;<span class="op" id="7525101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7525105">t</span><span class="op" id="7525106">.</span><span class="ident" id="7525107">Errorf</span><span class="op" id="7525113">(</span><span class="string" id="7525114">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7525134">,</span>&nbsp;<span class="ident" id="7525136">g</span><span class="op" id="7525137">,</span>&nbsp;<span class="ident" id="7525139">e</span><span class="op" id="7525140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7525143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7525146">if</span>&nbsp;<span class="ident" id="7525149">g</span><span class="op" id="7525150">,</span>&nbsp;<span class="ident" id="7525152">e</span>&nbsp;<span class="op" id="7525154">:=</span>&nbsp;<span class="ident" id="7525157">h</span><span class="op" id="7525158">.</span><span class="ident" id="7525159">ModTime</span><span class="op" id="7525166">,</span>&nbsp;<span class="ident" id="7525168">fi</span><span class="op" id="7525170">.</span><span class="ident" id="7525171">ModTime</span><span class="op" id="7525178">(</span><span class="op" id="7525179">)</span><span class="op" id="7525180">;</span>&nbsp;<span class="op" id="7525182">!</span><span class="ident" id="7525183">g</span><span class="op" id="7525184">.</span><span class="ident" id="7525185">Equal</span><span class="op" id="7525190">(</span><span class="ident" id="7525191">e</span><span class="op" id="7525192">)</span>&nbsp;<span class="op" id="7525194">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7525198">t</span><span class="op" id="7525199">.</span><span class="ident" id="7525200">Errorf</span><span class="op" id="7525206">(</span><span class="string" id="7525207">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7525230">,</span>&nbsp;<span class="ident" id="7525232">g</span><span class="op" id="7525233">,</span>&nbsp;<span class="ident" id="7525235">e</span><span class="op" id="7525236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7525239">}</span><br>
<span class="lineno"></span><span class="op" id="7525241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7525244">func</span>&nbsp;<span class="ident" id="7525249">TestFileInfoHeaderSymlink</span><span class="op" id="7525274">(</span><span class="ident" id="7525275">t</span>&nbsp;<span class="op" id="7525277">*</span><span class="ident" id="7525278">testing</span><span class="op" id="7525285">.</span><span class="ident" id="7525286">T</span><span class="op" id="7525287">)</span>&nbsp;<span class="op" id="7525289">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7525292">h</span><span class="op" id="7525293">,</span>&nbsp;<span class="ident" id="7525295">err</span>&nbsp;<span class="op" id="7525299">:=</span>&nbsp;<span class="ident" id="7525302">FileInfoHeader</span><span class="op" id="7525316">(</span><span class="ident" id="7525317">symlink</span><span class="op" id="7525324">{</span><span class="op" id="7525325">}</span><span class="op" id="7525326">,</span>&nbsp;<span class="string" id="7525328">&#34;some-target&#34;</span><span class="op" id="7525341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7525344">if</span>&nbsp;<span class="ident" id="7525347">err</span>&nbsp;<span class="op" id="7525351">!=</span>&nbsp;<span class="ident" id="7525354">nil</span>&nbsp;<span class="op" id="7525358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7525362">t</span><span class="op" id="7525363">.</span><span class="ident" id="7525364">Fatal</span><span class="op" id="7525369">(</span><span class="ident" id="7525370">err</span><span class="op" id="7525373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7525376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7525379">if</span>&nbsp;<span class="ident" id="7525382">g</span><span class="op" id="7525383">,</span>&nbsp;<span class="ident" id="7525385">e</span>&nbsp;<span class="op" id="7525387">:=</span>&nbsp;<span class="ident" id="7525390">h</span><span class="op" id="7525391">.</span><span class="ident" id="7525392">Name</span><span class="op" id="7525396">,</span>&nbsp;<span class="string" id="7525398">&#34;some-symlink&#34;</span><span class="op" id="7525412">;</span>&nbsp;<span class="ident" id="7525414">g</span>&nbsp;<span class="op" id="7525416">!=</span>&nbsp;<span class="ident" id="7525419">e</span>&nbsp;<span class="op" id="7525421">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7525425">t</span><span class="op" id="7525426">.</span><span class="ident" id="7525427">Errorf</span><span class="op" id="7525433">(</span><span class="string" id="7525434">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7525454">,</span>&nbsp;<span class="ident" id="7525456">g</span><span class="op" id="7525457">,</span>&nbsp;<span class="ident" id="7525459">e</span><span class="op" id="7525460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7525463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7525466">if</span>&nbsp;<span class="ident" id="7525469">g</span><span class="op" id="7525470">,</span>&nbsp;<span class="ident" id="7525472">e</span>&nbsp;<span class="op" id="7525474">:=</span>&nbsp;<span class="ident" id="7525477">h</span><span class="op" id="7525478">.</span><span class="ident" id="7525479">Linkname</span><span class="op" id="7525487">,</span>&nbsp;<span class="string" id="7525489">&#34;some-target&#34;</span><span class="op" id="7525502">;</span>&nbsp;<span class="ident" id="7525504">g</span>&nbsp;<span class="op" id="7525506">!=</span>&nbsp;<span class="ident" id="7525509">e</span>&nbsp;<span class="op" id="7525511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7525515">t</span><span class="op" id="7525516">.</span><span class="ident" id="7525517">Errorf</span><span class="op" id="7525523">(</span><span class="string" id="7525524">&#34;Linkname&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7525548">,</span>&nbsp;<span class="ident" id="7525550">g</span><span class="op" id="7525551">,</span>&nbsp;<span class="ident" id="7525553">e</span><span class="op" id="7525554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7525557">}</span><br>
<span class="lineno">80</span><span class="op" id="7525559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7525562">type</span>&nbsp;<span class="ident" id="7525567">symlink</span>&nbsp;<span class="keyword" id="7525575">struct</span><span class="op" id="7525581">{</span><span class="op" id="7525582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7525585">func</span>&nbsp;<span class="op" id="7525590">(</span><span class="ident" id="7525591">symlink</span><span class="op" id="7525598">)</span>&nbsp;<span class="ident" id="7525600">Name</span><span class="op" id="7525604">(</span><span class="op" id="7525605">)</span>&nbsp;<span class="builtintype" id="7525607">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7525620">{</span>&nbsp;<span class="keyword" id="7525622">return</span>&nbsp;<span class="string" id="7525629">&#34;some-symlink&#34;</span>&nbsp;<span class="op" id="7525644">}</span><br>
<span class="lineno">85</span><span class="keyword" id="7525646">func</span>&nbsp;<span class="op" id="7525651">(</span><span class="ident" id="7525652">symlink</span><span class="op" id="7525659">)</span>&nbsp;<span class="ident" id="7525661">Size</span><span class="op" id="7525665">(</span><span class="op" id="7525666">)</span>&nbsp;<span class="ident" id="7525668">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7525681">{</span>&nbsp;<span class="keyword" id="7525683">return</span>&nbsp;<span class="num" id="7525690">0</span>&nbsp;<span class="op" id="7525692">}</span><br>
<span class="lineno"></span><span class="keyword" id="7525694">func</span>&nbsp;<span class="op" id="7525699">(</span><span class="ident" id="7525700">symlink</span><span class="op" id="7525707">)</span>&nbsp;<span class="ident" id="7525709">Mode</span><span class="op" id="7525713">(</span><span class="op" id="7525714">)</span>&nbsp;<span class="ident" id="7525716">os</span><span class="op" id="7525718">.</span><span class="ident" id="7525719">FileMode</span>&nbsp;&nbsp;<span class="op" id="7525729">{</span>&nbsp;<span class="keyword" id="7525731">return</span>&nbsp;<span class="ident" id="7525738">os</span><span class="op" id="7525740">.</span><span class="ident" id="7525741">ModeSymlink</span>&nbsp;<span class="op" id="7525753">}</span><br>
<span class="lineno"></span><span class="keyword" id="7525755">func</span>&nbsp;<span class="op" id="7525760">(</span><span class="ident" id="7525761">symlink</span><span class="op" id="7525768">)</span>&nbsp;<span class="ident" id="7525770">ModTime</span><span class="op" id="7525777">(</span><span class="op" id="7525778">)</span>&nbsp;<span class="ident" id="7525780">time</span><span class="op" id="7525784">.</span><span class="ident" id="7525785">Time</span>&nbsp;<span class="op" id="7525790">{</span>&nbsp;<span class="keyword" id="7525792">return</span>&nbsp;<span class="ident" id="7525799">time</span><span class="op" id="7525803">.</span><span class="ident" id="7525804">Time</span><span class="op" id="7525808">{</span><span class="op" id="7525809">}</span>&nbsp;<span class="op" id="7525811">}</span><br>
<span class="lineno"></span><span class="keyword" id="7525813">func</span>&nbsp;<span class="op" id="7525818">(</span><span class="ident" id="7525819">symlink</span><span class="op" id="7525826">)</span>&nbsp;<span class="ident" id="7525828">IsDir</span><span class="op" id="7525833">(</span><span class="op" id="7525834">)</span>&nbsp;<span class="builtintype" id="7525836">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7525848">{</span>&nbsp;<span class="keyword" id="7525850">return</span>&nbsp;<span class="builtintype" id="7525857">false</span>&nbsp;<span class="op" id="7525863">}</span><br>
<span class="lineno"></span><span class="keyword" id="7525865">func</span>&nbsp;<span class="op" id="7525870">(</span><span class="ident" id="7525871">symlink</span><span class="op" id="7525878">)</span>&nbsp;<span class="ident" id="7525880">Sys</span><span class="op" id="7525883">(</span><span class="op" id="7525884">)</span>&nbsp;<span class="keyword" id="7525886">interface</span><span class="op" id="7525895">{</span><span class="op" id="7525896">}</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7525900">{</span>&nbsp;<span class="keyword" id="7525902">return</span>&nbsp;<span class="ident" id="7525909">nil</span>&nbsp;<span class="op" id="7525913">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="keyword" id="7525916">func</span>&nbsp;<span class="ident" id="7525921">TestRoundTrip</span><span class="op" id="7525934">(</span><span class="ident" id="7525935">t</span>&nbsp;<span class="op" id="7525937">*</span><span class="ident" id="7525938">testing</span><span class="op" id="7525945">.</span><span class="ident" id="7525946">T</span><span class="op" id="7525947">)</span>&nbsp;<span class="op" id="7525949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7525952">data</span>&nbsp;<span class="op" id="7525957">:=</span>&nbsp;<span class="op" id="7525960">[</span><span class="op" id="7525961">]</span><span class="builtintype" id="7525962">byte</span><span class="op" id="7525966">(</span><span class="string" id="7525967">&#34;some&nbsp;file&nbsp;contents&#34;</span><span class="op" id="7525987">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7525991">var</span>&nbsp;<span class="ident" id="7525995">b</span>&nbsp;<span class="ident" id="7525997">bytes</span><span class="op" id="7526002">.</span><span class="ident" id="7526003">Buffer</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526011">tw</span>&nbsp;<span class="op" id="7526014">:=</span>&nbsp;<span class="ident" id="7526017">NewWriter</span><span class="op" id="7526026">(</span><span class="op" id="7526027">&amp;</span><span class="ident" id="7526028">b</span><span class="op" id="7526029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526032">hdr</span>&nbsp;<span class="op" id="7526036">:=</span>&nbsp;<span class="op" id="7526039">&amp;</span><span class="ident" id="7526040">Header</span><span class="op" id="7526046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526050">Name</span><span class="op" id="7526054">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526059">&#34;file.txt&#34;</span><span class="op" id="7526069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526073">Uid</span><span class="op" id="7526076">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7526082">1</span>&nbsp;<span class="op" id="7526084">&lt;&lt;</span>&nbsp;<span class="num" id="7526087">21</span><span class="op" id="7526089">,</span>&nbsp;<span class="comment" id="7526091">//&nbsp;too&nbsp;big&nbsp;for&nbsp;8&nbsp;octal&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526123">Size</span><span class="op" id="7526127">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7526132">int64</span><span class="op" id="7526137">(</span><span class="builtinfunc" id="7526138">len</span><span class="op" id="7526141">(</span><span class="ident" id="7526142">data</span><span class="op" id="7526146">)</span><span class="op" id="7526147">)</span><span class="op" id="7526148">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526152">ModTime</span><span class="op" id="7526159">:</span>&nbsp;<span class="ident" id="7526161">time</span><span class="op" id="7526165">.</span><span class="ident" id="7526166">Now</span><span class="op" id="7526169">(</span><span class="op" id="7526170">)</span><span class="op" id="7526171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7526177">//&nbsp;tar&nbsp;only&nbsp;supports&nbsp;second&nbsp;precision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526217">hdr</span><span class="op" id="7526220">.</span><span class="ident" id="7526221">ModTime</span>&nbsp;<span class="op" id="7526229">=</span>&nbsp;<span class="ident" id="7526231">hdr</span><span class="op" id="7526234">.</span><span class="ident" id="7526235">ModTime</span><span class="op" id="7526242">.</span><span class="ident" id="7526243">Add</span><span class="op" id="7526246">(</span><span class="op" id="7526247">-</span><span class="ident" id="7526248">time</span><span class="op" id="7526252">.</span><span class="ident" id="7526253">Duration</span><span class="op" id="7526261">(</span><span class="ident" id="7526262">hdr</span><span class="op" id="7526265">.</span><span class="ident" id="7526266">ModTime</span><span class="op" id="7526273">.</span><span class="ident" id="7526274">Nanosecond</span><span class="op" id="7526284">(</span><span class="op" id="7526285">)</span><span class="op" id="7526286">)</span>&nbsp;<span class="op" id="7526288">*</span>&nbsp;<span class="ident" id="7526290">time</span><span class="op" id="7526294">.</span><span class="ident" id="7526295">Nanosecond</span><span class="op" id="7526305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7526308">if</span>&nbsp;<span class="ident" id="7526311">err</span>&nbsp;<span class="op" id="7526315">:=</span>&nbsp;<span class="ident" id="7526318">tw</span><span class="op" id="7526320">.</span><span class="ident" id="7526321">WriteHeader</span><span class="op" id="7526332">(</span><span class="ident" id="7526333">hdr</span><span class="op" id="7526336">)</span><span class="op" id="7526337">;</span>&nbsp;<span class="ident" id="7526339">err</span>&nbsp;<span class="op" id="7526343">!=</span>&nbsp;<span class="ident" id="7526346">nil</span>&nbsp;<span class="op" id="7526350">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526354">t</span><span class="op" id="7526355">.</span><span class="ident" id="7526356">Fatalf</span><span class="op" id="7526362">(</span><span class="string" id="7526363">&#34;tw.WriteHeader:&nbsp;%v&#34;</span><span class="op" id="7526383">,</span>&nbsp;<span class="ident" id="7526385">err</span><span class="op" id="7526388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7526394">if</span>&nbsp;<span class="ident" id="7526397">_</span><span class="op" id="7526398">,</span>&nbsp;<span class="ident" id="7526400">err</span>&nbsp;<span class="op" id="7526404">:=</span>&nbsp;<span class="ident" id="7526407">tw</span><span class="op" id="7526409">.</span><span class="ident" id="7526410">Write</span><span class="op" id="7526415">(</span><span class="ident" id="7526416">data</span><span class="op" id="7526420">)</span><span class="op" id="7526421">;</span>&nbsp;<span class="ident" id="7526423">err</span>&nbsp;<span class="op" id="7526427">!=</span>&nbsp;<span class="ident" id="7526430">nil</span>&nbsp;<span class="op" id="7526434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526438">t</span><span class="op" id="7526439">.</span><span class="ident" id="7526440">Fatalf</span><span class="op" id="7526446">(</span><span class="string" id="7526447">&#34;tw.Write:&nbsp;%v&#34;</span><span class="op" id="7526461">,</span>&nbsp;<span class="ident" id="7526463">err</span><span class="op" id="7526466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526469">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7526472">if</span>&nbsp;<span class="ident" id="7526475">err</span>&nbsp;<span class="op" id="7526479">:=</span>&nbsp;<span class="ident" id="7526482">tw</span><span class="op" id="7526484">.</span><span class="ident" id="7526485">Close</span><span class="op" id="7526490">(</span><span class="op" id="7526491">)</span><span class="op" id="7526492">;</span>&nbsp;<span class="ident" id="7526494">err</span>&nbsp;<span class="op" id="7526498">!=</span>&nbsp;<span class="ident" id="7526501">nil</span>&nbsp;<span class="op" id="7526505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526509">t</span><span class="op" id="7526510">.</span><span class="ident" id="7526511">Fatalf</span><span class="op" id="7526517">(</span><span class="string" id="7526518">&#34;tw.Close:&nbsp;%v&#34;</span><span class="op" id="7526532">,</span>&nbsp;<span class="ident" id="7526534">err</span><span class="op" id="7526537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7526544">//&nbsp;Read&nbsp;it&nbsp;back.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526562">tr</span>&nbsp;<span class="op" id="7526565">:=</span>&nbsp;<span class="ident" id="7526568">NewReader</span><span class="op" id="7526577">(</span><span class="op" id="7526578">&amp;</span><span class="ident" id="7526579">b</span><span class="op" id="7526580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526583">rHdr</span><span class="op" id="7526587">,</span>&nbsp;<span class="ident" id="7526589">err</span>&nbsp;<span class="op" id="7526593">:=</span>&nbsp;<span class="ident" id="7526596">tr</span><span class="op" id="7526598">.</span><span class="ident" id="7526599">Next</span><span class="op" id="7526603">(</span><span class="op" id="7526604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7526607">if</span>&nbsp;<span class="ident" id="7526610">err</span>&nbsp;<span class="op" id="7526614">!=</span>&nbsp;<span class="ident" id="7526617">nil</span>&nbsp;<span class="op" id="7526621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526625">t</span><span class="op" id="7526626">.</span><span class="ident" id="7526627">Fatalf</span><span class="op" id="7526633">(</span><span class="string" id="7526634">&#34;tr.Next:&nbsp;%v&#34;</span><span class="op" id="7526647">,</span>&nbsp;<span class="ident" id="7526649">err</span><span class="op" id="7526652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526655">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7526658">if</span>&nbsp;<span class="op" id="7526661">!</span><span class="ident" id="7526662">reflect</span><span class="op" id="7526669">.</span><span class="ident" id="7526670">DeepEqual</span><span class="op" id="7526679">(</span><span class="ident" id="7526680">rHdr</span><span class="op" id="7526684">,</span>&nbsp;<span class="ident" id="7526686">hdr</span><span class="op" id="7526689">)</span>&nbsp;<span class="op" id="7526691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526695">t</span><span class="op" id="7526696">.</span><span class="ident" id="7526697">Errorf</span><span class="op" id="7526703">(</span><span class="string" id="7526704">&#34;Header&nbsp;mismatch.\n&nbsp;got&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7526742">,</span>&nbsp;<span class="ident" id="7526744">rHdr</span><span class="op" id="7526748">,</span>&nbsp;<span class="ident" id="7526750">hdr</span><span class="op" id="7526753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526759">rData</span><span class="op" id="7526764">,</span>&nbsp;<span class="ident" id="7526766">err</span>&nbsp;<span class="op" id="7526770">:=</span>&nbsp;<span class="ident" id="7526773">ioutil</span><span class="op" id="7526779">.</span><span class="ident" id="7526780">ReadAll</span><span class="op" id="7526787">(</span><span class="ident" id="7526788">tr</span><span class="op" id="7526790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7526793">if</span>&nbsp;<span class="ident" id="7526796">err</span>&nbsp;<span class="op" id="7526800">!=</span>&nbsp;<span class="ident" id="7526803">nil</span>&nbsp;<span class="op" id="7526807">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526811">t</span><span class="op" id="7526812">.</span><span class="ident" id="7526813">Fatalf</span><span class="op" id="7526819">(</span><span class="string" id="7526820">&#34;Read:&nbsp;%v&#34;</span><span class="op" id="7526830">,</span>&nbsp;<span class="ident" id="7526832">err</span><span class="op" id="7526835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7526841">if</span>&nbsp;<span class="op" id="7526844">!</span><span class="ident" id="7526845">bytes</span><span class="op" id="7526850">.</span><span class="ident" id="7526851">Equal</span><span class="op" id="7526856">(</span><span class="ident" id="7526857">rData</span><span class="op" id="7526862">,</span>&nbsp;<span class="ident" id="7526864">data</span><span class="op" id="7526868">)</span>&nbsp;<span class="op" id="7526870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526874">t</span><span class="op" id="7526875">.</span><span class="ident" id="7526876">Errorf</span><span class="op" id="7526882">(</span><span class="string" id="7526883">&#34;Data&nbsp;mismatch.\n&nbsp;got&nbsp;%q\nwant&nbsp;%q&#34;</span><span class="op" id="7526917">,</span>&nbsp;<span class="ident" id="7526919">rData</span><span class="op" id="7526924">,</span>&nbsp;<span class="ident" id="7526926">data</span><span class="op" id="7526930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526933">}</span><br>
<span class="lineno">130</span><span class="op" id="7526935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7526938">type</span>&nbsp;<span class="ident" id="7526943">headerRoundTripTest</span>&nbsp;<span class="keyword" id="7526963">struct</span>&nbsp;<span class="op" id="7526970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526973">h</span>&nbsp;&nbsp;<span class="op" id="7526976">*</span><span class="ident" id="7526977">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526985">fm</span>&nbsp;<span class="ident" id="7526988">os</span><span class="op" id="7526990">.</span><span class="ident" id="7526991">FileMode</span><br>
<span class="lineno">135</span><span class="op" id="7527000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7527003">func</span>&nbsp;<span class="ident" id="7527008">TestHeaderRoundTrip</span><span class="op" id="7527027">(</span><span class="ident" id="7527028">t</span>&nbsp;<span class="op" id="7527030">*</span><span class="ident" id="7527031">testing</span><span class="op" id="7527038">.</span><span class="ident" id="7527039">T</span><span class="op" id="7527040">)</span>&nbsp;<span class="op" id="7527042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527045">golden</span>&nbsp;<span class="op" id="7527052">:=</span>&nbsp;<span class="op" id="7527055">[</span><span class="op" id="7527056">]</span><span class="ident" id="7527057">headerRoundTripTest</span><span class="op" id="7527076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7527080">//&nbsp;regular&nbsp;file.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527104">h</span><span class="op" id="7527105">:</span>&nbsp;<span class="op" id="7527107">&amp;</span><span class="ident" id="7527108">Header</span><span class="op" id="7527114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527120">Name</span><span class="op" id="7527124">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7527130">&#34;test.txt&#34;</span><span class="op" id="7527140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527146">Mode</span><span class="op" id="7527150">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7527156">0644</span>&nbsp;<span class="op" id="7527161">|</span>&nbsp;<span class="ident" id="7527163">c_ISREG</span><span class="op" id="7527170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527176">Size</span><span class="op" id="7527180">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7527186">12</span><span class="op" id="7527188">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527194">ModTime</span><span class="op" id="7527201">:</span>&nbsp;&nbsp;<span class="ident" id="7527204">time</span><span class="op" id="7527208">.</span><span class="ident" id="7527209">Unix</span><span class="op" id="7527213">(</span><span class="num" id="7527214">1360600916</span><span class="op" id="7527224">,</span>&nbsp;<span class="num" id="7527226">0</span><span class="op" id="7527227">)</span><span class="op" id="7527228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527234">Typeflag</span><span class="op" id="7527242">:</span>&nbsp;<span class="ident" id="7527244">TypeReg</span><span class="op" id="7527251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527256">}</span><span class="op" id="7527257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527262">fm</span><span class="op" id="7527264">:</span>&nbsp;<span class="num" id="7527266">0644</span><span class="op" id="7527270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527274">}</span><span class="op" id="7527275">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7527279">//&nbsp;hard&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527300">h</span><span class="op" id="7527301">:</span>&nbsp;<span class="op" id="7527303">&amp;</span><span class="ident" id="7527304">Header</span><span class="op" id="7527310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527316">Name</span><span class="op" id="7527320">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7527326">&#34;hard.txt&#34;</span><span class="op" id="7527336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527342">Mode</span><span class="op" id="7527346">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7527352">0644</span>&nbsp;<span class="op" id="7527357">|</span>&nbsp;<span class="ident" id="7527359">c_ISLNK</span><span class="op" id="7527366">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527372">Size</span><span class="op" id="7527376">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7527382">0</span><span class="op" id="7527383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527389">ModTime</span><span class="op" id="7527396">:</span>&nbsp;&nbsp;<span class="ident" id="7527399">time</span><span class="op" id="7527403">.</span><span class="ident" id="7527404">Unix</span><span class="op" id="7527408">(</span><span class="num" id="7527409">1360600916</span><span class="op" id="7527419">,</span>&nbsp;<span class="num" id="7527421">0</span><span class="op" id="7527422">)</span><span class="op" id="7527423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527429">Typeflag</span><span class="op" id="7527437">:</span>&nbsp;<span class="ident" id="7527439">TypeLink</span><span class="op" id="7527447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527452">}</span><span class="op" id="7527453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527458">fm</span><span class="op" id="7527460">:</span>&nbsp;<span class="num" id="7527462">0644</span>&nbsp;<span class="op" id="7527467">|</span>&nbsp;<span class="ident" id="7527469">os</span><span class="op" id="7527471">.</span><span class="ident" id="7527472">ModeSymlink</span><span class="op" id="7527483">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527487">}</span><span class="op" id="7527488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7527492">//&nbsp;symbolic&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527517">h</span><span class="op" id="7527518">:</span>&nbsp;<span class="op" id="7527520">&amp;</span><span class="ident" id="7527521">Header</span><span class="op" id="7527527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527533">Name</span><span class="op" id="7527537">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7527543">&#34;link.txt&#34;</span><span class="op" id="7527553">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527559">Mode</span><span class="op" id="7527563">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7527569">0777</span>&nbsp;<span class="op" id="7527574">|</span>&nbsp;<span class="ident" id="7527576">c_ISLNK</span><span class="op" id="7527583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527589">Size</span><span class="op" id="7527593">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7527599">0</span><span class="op" id="7527600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527606">ModTime</span><span class="op" id="7527613">:</span>&nbsp;&nbsp;<span class="ident" id="7527616">time</span><span class="op" id="7527620">.</span><span class="ident" id="7527621">Unix</span><span class="op" id="7527625">(</span><span class="num" id="7527626">1360600852</span><span class="op" id="7527636">,</span>&nbsp;<span class="num" id="7527638">0</span><span class="op" id="7527639">)</span><span class="op" id="7527640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527646">Typeflag</span><span class="op" id="7527654">:</span>&nbsp;<span class="ident" id="7527656">TypeSymlink</span><span class="op" id="7527667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527672">}</span><span class="op" id="7527673">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527678">fm</span><span class="op" id="7527680">:</span>&nbsp;<span class="num" id="7527682">0777</span>&nbsp;<span class="op" id="7527687">|</span>&nbsp;<span class="ident" id="7527689">os</span><span class="op" id="7527691">.</span><span class="ident" id="7527692">ModeSymlink</span><span class="op" id="7527703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527707">}</span><span class="op" id="7527708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7527712">//&nbsp;character&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527745">h</span><span class="op" id="7527746">:</span>&nbsp;<span class="op" id="7527748">&amp;</span><span class="ident" id="7527749">Header</span><span class="op" id="7527755">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527761">Name</span><span class="op" id="7527765">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7527771">&#34;dev/null&#34;</span><span class="op" id="7527781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527787">Mode</span><span class="op" id="7527791">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7527797">0666</span>&nbsp;<span class="op" id="7527802">|</span>&nbsp;<span class="ident" id="7527804">c_ISCHR</span><span class="op" id="7527811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527817">Size</span><span class="op" id="7527821">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7527827">0</span><span class="op" id="7527828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527834">ModTime</span><span class="op" id="7527841">:</span>&nbsp;&nbsp;<span class="ident" id="7527844">time</span><span class="op" id="7527848">.</span><span class="ident" id="7527849">Unix</span><span class="op" id="7527853">(</span><span class="num" id="7527854">1360578951</span><span class="op" id="7527864">,</span>&nbsp;<span class="num" id="7527866">0</span><span class="op" id="7527867">)</span><span class="op" id="7527868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527874">Typeflag</span><span class="op" id="7527882">:</span>&nbsp;<span class="ident" id="7527884">TypeChar</span><span class="op" id="7527892">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527897">}</span><span class="op" id="7527898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527903">fm</span><span class="op" id="7527905">:</span>&nbsp;<span class="num" id="7527907">0666</span>&nbsp;<span class="op" id="7527912">|</span>&nbsp;<span class="ident" id="7527914">os</span><span class="op" id="7527916">.</span><span class="ident" id="7527917">ModeDevice</span>&nbsp;<span class="op" id="7527928">|</span>&nbsp;<span class="ident" id="7527930">os</span><span class="op" id="7527932">.</span><span class="ident" id="7527933">ModeCharDevice</span><span class="op" id="7527947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527951">}</span><span class="op" id="7527952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7527956">//&nbsp;block&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527980">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527985">h</span><span class="op" id="7527986">:</span>&nbsp;<span class="op" id="7527988">&amp;</span><span class="ident" id="7527989">Header</span><span class="op" id="7527995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528001">Name</span><span class="op" id="7528005">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7528011">&#34;dev/sda&#34;</span><span class="op" id="7528020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528026">Mode</span><span class="op" id="7528030">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7528036">0660</span>&nbsp;<span class="op" id="7528041">|</span>&nbsp;<span class="ident" id="7528043">c_ISBLK</span><span class="op" id="7528050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528056">Size</span><span class="op" id="7528060">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7528066">0</span><span class="op" id="7528067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528073">ModTime</span><span class="op" id="7528080">:</span>&nbsp;&nbsp;<span class="ident" id="7528083">time</span><span class="op" id="7528087">.</span><span class="ident" id="7528088">Unix</span><span class="op" id="7528092">(</span><span class="num" id="7528093">1360578954</span><span class="op" id="7528103">,</span>&nbsp;<span class="num" id="7528105">0</span><span class="op" id="7528106">)</span><span class="op" id="7528107">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528113">Typeflag</span><span class="op" id="7528121">:</span>&nbsp;<span class="ident" id="7528123">TypeBlock</span><span class="op" id="7528132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528137">}</span><span class="op" id="7528138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528143">fm</span><span class="op" id="7528145">:</span>&nbsp;<span class="num" id="7528147">0660</span>&nbsp;<span class="op" id="7528152">|</span>&nbsp;<span class="ident" id="7528154">os</span><span class="op" id="7528156">.</span><span class="ident" id="7528157">ModeDevice</span><span class="op" id="7528167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528171">}</span><span class="op" id="7528172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7528176">//&nbsp;directory.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528197">h</span><span class="op" id="7528198">:</span>&nbsp;<span class="op" id="7528200">&amp;</span><span class="ident" id="7528201">Header</span><span class="op" id="7528207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528213">Name</span><span class="op" id="7528217">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7528223">&#34;dir/&#34;</span><span class="op" id="7528229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528235">Mode</span><span class="op" id="7528239">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7528245">0755</span>&nbsp;<span class="op" id="7528250">|</span>&nbsp;<span class="ident" id="7528252">c_ISDIR</span><span class="op" id="7528259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528265">Size</span><span class="op" id="7528269">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7528275">0</span><span class="op" id="7528276">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528282">ModTime</span><span class="op" id="7528289">:</span>&nbsp;&nbsp;<span class="ident" id="7528292">time</span><span class="op" id="7528296">.</span><span class="ident" id="7528297">Unix</span><span class="op" id="7528301">(</span><span class="num" id="7528302">1360601116</span><span class="op" id="7528312">,</span>&nbsp;<span class="num" id="7528314">0</span><span class="op" id="7528315">)</span><span class="op" id="7528316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528322">Typeflag</span><span class="op" id="7528330">:</span>&nbsp;<span class="ident" id="7528332">TypeDir</span><span class="op" id="7528339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528344">}</span><span class="op" id="7528345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528350">fm</span><span class="op" id="7528352">:</span>&nbsp;<span class="num" id="7528354">0755</span>&nbsp;<span class="op" id="7528359">|</span>&nbsp;<span class="ident" id="7528361">os</span><span class="op" id="7528363">.</span><span class="ident" id="7528364">ModeDir</span><span class="op" id="7528371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528375">}</span><span class="op" id="7528376">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7528380">//&nbsp;fifo&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528401">h</span><span class="op" id="7528402">:</span>&nbsp;<span class="op" id="7528404">&amp;</span><span class="ident" id="7528405">Header</span><span class="op" id="7528411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528417">Name</span><span class="op" id="7528421">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7528427">&#34;dev/initctl&#34;</span><span class="op" id="7528440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528446">Mode</span><span class="op" id="7528450">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7528456">0600</span>&nbsp;<span class="op" id="7528461">|</span>&nbsp;<span class="ident" id="7528463">c_ISFIFO</span><span class="op" id="7528471">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528477">Size</span><span class="op" id="7528481">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7528487">0</span><span class="op" id="7528488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528494">ModTime</span><span class="op" id="7528501">:</span>&nbsp;&nbsp;<span class="ident" id="7528504">time</span><span class="op" id="7528508">.</span><span class="ident" id="7528509">Unix</span><span class="op" id="7528513">(</span><span class="num" id="7528514">1360578949</span><span class="op" id="7528524">,</span>&nbsp;<span class="num" id="7528526">0</span><span class="op" id="7528527">)</span><span class="op" id="7528528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528534">Typeflag</span><span class="op" id="7528542">:</span>&nbsp;<span class="ident" id="7528544">TypeFifo</span><span class="op" id="7528552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528557">}</span><span class="op" id="7528558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528563">fm</span><span class="op" id="7528565">:</span>&nbsp;<span class="num" id="7528567">0600</span>&nbsp;<span class="op" id="7528572">|</span>&nbsp;<span class="ident" id="7528574">os</span><span class="op" id="7528576">.</span><span class="ident" id="7528577">ModeNamedPipe</span><span class="op" id="7528590">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528594">}</span><span class="op" id="7528595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7528599">//&nbsp;setuid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528617">h</span><span class="op" id="7528618">:</span>&nbsp;<span class="op" id="7528620">&amp;</span><span class="ident" id="7528621">Header</span><span class="op" id="7528627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528633">Name</span><span class="op" id="7528637">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7528643">&#34;bin/su&#34;</span><span class="op" id="7528651">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528657">Mode</span><span class="op" id="7528661">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7528667">0755</span>&nbsp;<span class="op" id="7528672">|</span>&nbsp;<span class="ident" id="7528674">c_ISREG</span>&nbsp;<span class="op" id="7528682">|</span>&nbsp;<span class="ident" id="7528684">c_ISUID</span><span class="op" id="7528691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528697">Size</span><span class="op" id="7528701">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7528707">23232</span><span class="op" id="7528712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528718">ModTime</span><span class="op" id="7528725">:</span>&nbsp;&nbsp;<span class="ident" id="7528728">time</span><span class="op" id="7528732">.</span><span class="ident" id="7528733">Unix</span><span class="op" id="7528737">(</span><span class="num" id="7528738">1355405093</span><span class="op" id="7528748">,</span>&nbsp;<span class="num" id="7528750">0</span><span class="op" id="7528751">)</span><span class="op" id="7528752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528758">Typeflag</span><span class="op" id="7528766">:</span>&nbsp;<span class="ident" id="7528768">TypeReg</span><span class="op" id="7528775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528780">}</span><span class="op" id="7528781">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528786">fm</span><span class="op" id="7528788">:</span>&nbsp;<span class="num" id="7528790">0755</span>&nbsp;<span class="op" id="7528795">|</span>&nbsp;<span class="ident" id="7528797">os</span><span class="op" id="7528799">.</span><span class="ident" id="7528800">ModeSetuid</span><span class="op" id="7528810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528814">}</span><span class="op" id="7528815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7528819">//&nbsp;setguid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528838">h</span><span class="op" id="7528839">:</span>&nbsp;<span class="op" id="7528841">&amp;</span><span class="ident" id="7528842">Header</span><span class="op" id="7528848">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528854">Name</span><span class="op" id="7528858">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7528864">&#34;group.txt&#34;</span><span class="op" id="7528875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528881">Mode</span><span class="op" id="7528885">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7528891">0750</span>&nbsp;<span class="op" id="7528896">|</span>&nbsp;<span class="ident" id="7528898">c_ISREG</span>&nbsp;<span class="op" id="7528906">|</span>&nbsp;<span class="ident" id="7528908">c_ISGID</span><span class="op" id="7528915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528921">Size</span><span class="op" id="7528925">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7528931">0</span><span class="op" id="7528932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528938">ModTime</span><span class="op" id="7528945">:</span>&nbsp;&nbsp;<span class="ident" id="7528948">time</span><span class="op" id="7528952">.</span><span class="ident" id="7528953">Unix</span><span class="op" id="7528957">(</span><span class="num" id="7528958">1360602346</span><span class="op" id="7528968">,</span>&nbsp;<span class="num" id="7528970">0</span><span class="op" id="7528971">)</span><span class="op" id="7528972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528978">Typeflag</span><span class="op" id="7528986">:</span>&nbsp;<span class="ident" id="7528988">TypeReg</span><span class="op" id="7528995">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529000">}</span><span class="op" id="7529001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529006">fm</span><span class="op" id="7529008">:</span>&nbsp;<span class="num" id="7529010">0750</span>&nbsp;<span class="op" id="7529015">|</span>&nbsp;<span class="ident" id="7529017">os</span><span class="op" id="7529019">.</span><span class="ident" id="7529020">ModeSetgid</span><span class="op" id="7529030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529034">}</span><span class="op" id="7529035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7529039">//&nbsp;sticky.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529052">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529057">h</span><span class="op" id="7529058">:</span>&nbsp;<span class="op" id="7529060">&amp;</span><span class="ident" id="7529061">Header</span><span class="op" id="7529067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529073">Name</span><span class="op" id="7529077">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529083">&#34;sticky.txt&#34;</span><span class="op" id="7529095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529101">Mode</span><span class="op" id="7529105">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7529111">0600</span>&nbsp;<span class="op" id="7529116">|</span>&nbsp;<span class="ident" id="7529118">c_ISREG</span>&nbsp;<span class="op" id="7529126">|</span>&nbsp;<span class="ident" id="7529128">c_ISVTX</span><span class="op" id="7529135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529141">Size</span><span class="op" id="7529145">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7529151">7</span><span class="op" id="7529152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529158">ModTime</span><span class="op" id="7529165">:</span>&nbsp;&nbsp;<span class="ident" id="7529168">time</span><span class="op" id="7529172">.</span><span class="ident" id="7529173">Unix</span><span class="op" id="7529177">(</span><span class="num" id="7529178">1360602540</span><span class="op" id="7529188">,</span>&nbsp;<span class="num" id="7529190">0</span><span class="op" id="7529191">)</span><span class="op" id="7529192">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529198">Typeflag</span><span class="op" id="7529206">:</span>&nbsp;<span class="ident" id="7529208">TypeReg</span><span class="op" id="7529215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529220">}</span><span class="op" id="7529221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529226">fm</span><span class="op" id="7529228">:</span>&nbsp;<span class="num" id="7529230">0600</span>&nbsp;<span class="op" id="7529235">|</span>&nbsp;<span class="ident" id="7529237">os</span><span class="op" id="7529239">.</span><span class="ident" id="7529240">ModeSticky</span><span class="op" id="7529250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529254">}</span><span class="op" id="7529255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529258">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7529262">for</span>&nbsp;<span class="ident" id="7529266">i</span><span class="op" id="7529267">,</span>&nbsp;<span class="ident" id="7529269">g</span>&nbsp;<span class="op" id="7529271">:=</span>&nbsp;<span class="keyword" id="7529274">range</span>&nbsp;<span class="ident" id="7529280">golden</span>&nbsp;<span class="op" id="7529287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529291">fi</span>&nbsp;<span class="op" id="7529294">:=</span>&nbsp;<span class="ident" id="7529297">g</span><span class="op" id="7529298">.</span><span class="ident" id="7529299">h</span><span class="op" id="7529300">.</span><span class="ident" id="7529301">FileInfo</span><span class="op" id="7529309">(</span><span class="op" id="7529310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529314">h2</span><span class="op" id="7529316">,</span>&nbsp;<span class="ident" id="7529318">err</span>&nbsp;<span class="op" id="7529322">:=</span>&nbsp;<span class="ident" id="7529325">FileInfoHeader</span><span class="op" id="7529339">(</span><span class="ident" id="7529340">fi</span><span class="op" id="7529342">,</span>&nbsp;<span class="string" id="7529344">&#34;&#34;</span><span class="op" id="7529346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7529350">if</span>&nbsp;<span class="ident" id="7529353">err</span>&nbsp;<span class="op" id="7529357">!=</span>&nbsp;<span class="ident" id="7529360">nil</span>&nbsp;<span class="op" id="7529364">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529369">t</span><span class="op" id="7529370">.</span><span class="ident" id="7529371">Error</span><span class="op" id="7529376">(</span><span class="ident" id="7529377">err</span><span class="op" id="7529380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7529385">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7529400">if</span>&nbsp;<span class="ident" id="7529403">strings</span><span class="op" id="7529410">.</span><span class="ident" id="7529411">Contains</span><span class="op" id="7529419">(</span><span class="ident" id="7529420">fi</span><span class="op" id="7529422">.</span><span class="ident" id="7529423">Name</span><span class="op" id="7529427">(</span><span class="op" id="7529428">)</span><span class="op" id="7529429">,</span>&nbsp;<span class="string" id="7529431">&#34;/&#34;</span><span class="op" id="7529434">)</span>&nbsp;<span class="op" id="7529436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529441">t</span><span class="op" id="7529442">.</span><span class="ident" id="7529443">Errorf</span><span class="op" id="7529449">(</span><span class="string" id="7529450">&#34;FileInfo&nbsp;of&nbsp;%q&nbsp;contains&nbsp;slash:&nbsp;%q&#34;</span><span class="op" id="7529485">,</span>&nbsp;<span class="ident" id="7529487">g</span><span class="op" id="7529488">.</span><span class="ident" id="7529489">h</span><span class="op" id="7529490">.</span><span class="ident" id="7529491">Name</span><span class="op" id="7529495">,</span>&nbsp;<span class="ident" id="7529497">fi</span><span class="op" id="7529499">.</span><span class="ident" id="7529500">Name</span><span class="op" id="7529504">(</span><span class="op" id="7529505">)</span><span class="op" id="7529506">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529514">name</span>&nbsp;<span class="op" id="7529519">:=</span>&nbsp;<span class="ident" id="7529522">path</span><span class="op" id="7529526">.</span><span class="ident" id="7529527">Base</span><span class="op" id="7529531">(</span><span class="ident" id="7529532">g</span><span class="op" id="7529533">.</span><span class="ident" id="7529534">h</span><span class="op" id="7529535">.</span><span class="ident" id="7529536">Name</span><span class="op" id="7529540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7529544">if</span>&nbsp;<span class="ident" id="7529547">fi</span><span class="op" id="7529549">.</span><span class="ident" id="7529550">IsDir</span><span class="op" id="7529555">(</span><span class="op" id="7529556">)</span>&nbsp;<span class="op" id="7529558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529563">name</span>&nbsp;<span class="op" id="7529568">+=</span>&nbsp;<span class="string" id="7529571">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529577">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7529581">if</span>&nbsp;<span class="ident" id="7529584">got</span><span class="op" id="7529587">,</span>&nbsp;<span class="ident" id="7529589">want</span>&nbsp;<span class="op" id="7529594">:=</span>&nbsp;<span class="ident" id="7529597">h2</span><span class="op" id="7529599">.</span><span class="ident" id="7529600">Name</span><span class="op" id="7529604">,</span>&nbsp;<span class="ident" id="7529606">name</span><span class="op" id="7529610">;</span>&nbsp;<span class="ident" id="7529612">got</span>&nbsp;<span class="op" id="7529616">!=</span>&nbsp;<span class="ident" id="7529619">want</span>&nbsp;<span class="op" id="7529624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529629">t</span><span class="op" id="7529630">.</span><span class="ident" id="7529631">Errorf</span><span class="op" id="7529637">(</span><span class="string" id="7529638">&#34;i=%d:&nbsp;Name:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7529667">,</span>&nbsp;<span class="ident" id="7529669">i</span><span class="op" id="7529670">,</span>&nbsp;<span class="ident" id="7529672">got</span><span class="op" id="7529675">,</span>&nbsp;<span class="ident" id="7529677">want</span><span class="op" id="7529681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7529689">if</span>&nbsp;<span class="ident" id="7529692">got</span><span class="op" id="7529695">,</span>&nbsp;<span class="ident" id="7529697">want</span>&nbsp;<span class="op" id="7529702">:=</span>&nbsp;<span class="ident" id="7529705">h2</span><span class="op" id="7529707">.</span><span class="ident" id="7529708">Size</span><span class="op" id="7529712">,</span>&nbsp;<span class="ident" id="7529714">g</span><span class="op" id="7529715">.</span><span class="ident" id="7529716">h</span><span class="op" id="7529717">.</span><span class="ident" id="7529718">Size</span><span class="op" id="7529722">;</span>&nbsp;<span class="ident" id="7529724">got</span>&nbsp;<span class="op" id="7529728">!=</span>&nbsp;<span class="ident" id="7529731">want</span>&nbsp;<span class="op" id="7529736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529741">t</span><span class="op" id="7529742">.</span><span class="ident" id="7529743">Errorf</span><span class="op" id="7529749">(</span><span class="string" id="7529750">&#34;i=%d:&nbsp;Size:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7529779">,</span>&nbsp;<span class="ident" id="7529781">i</span><span class="op" id="7529782">,</span>&nbsp;<span class="ident" id="7529784">got</span><span class="op" id="7529787">,</span>&nbsp;<span class="ident" id="7529789">want</span><span class="op" id="7529793">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7529801">if</span>&nbsp;<span class="ident" id="7529804">got</span><span class="op" id="7529807">,</span>&nbsp;<span class="ident" id="7529809">want</span>&nbsp;<span class="op" id="7529814">:=</span>&nbsp;<span class="ident" id="7529817">h2</span><span class="op" id="7529819">.</span><span class="ident" id="7529820">Mode</span><span class="op" id="7529824">,</span>&nbsp;<span class="ident" id="7529826">g</span><span class="op" id="7529827">.</span><span class="ident" id="7529828">h</span><span class="op" id="7529829">.</span><span class="ident" id="7529830">Mode</span><span class="op" id="7529834">;</span>&nbsp;<span class="ident" id="7529836">got</span>&nbsp;<span class="op" id="7529840">!=</span>&nbsp;<span class="ident" id="7529843">want</span>&nbsp;<span class="op" id="7529848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529853">t</span><span class="op" id="7529854">.</span><span class="ident" id="7529855">Errorf</span><span class="op" id="7529861">(</span><span class="string" id="7529862">&#34;i=%d:&nbsp;Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="7529891">,</span>&nbsp;<span class="ident" id="7529893">i</span><span class="op" id="7529894">,</span>&nbsp;<span class="ident" id="7529896">got</span><span class="op" id="7529899">,</span>&nbsp;<span class="ident" id="7529901">want</span><span class="op" id="7529905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7529913">if</span>&nbsp;<span class="ident" id="7529916">got</span><span class="op" id="7529919">,</span>&nbsp;<span class="ident" id="7529921">want</span>&nbsp;<span class="op" id="7529926">:=</span>&nbsp;<span class="ident" id="7529929">fi</span><span class="op" id="7529931">.</span><span class="ident" id="7529932">Mode</span><span class="op" id="7529936">(</span><span class="op" id="7529937">)</span><span class="op" id="7529938">,</span>&nbsp;<span class="ident" id="7529940">g</span><span class="op" id="7529941">.</span><span class="ident" id="7529942">fm</span><span class="op" id="7529944">;</span>&nbsp;<span class="ident" id="7529946">got</span>&nbsp;<span class="op" id="7529950">!=</span>&nbsp;<span class="ident" id="7529953">want</span>&nbsp;<span class="op" id="7529958">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529963">t</span><span class="op" id="7529964">.</span><span class="ident" id="7529965">Errorf</span><span class="op" id="7529971">(</span><span class="string" id="7529972">&#34;i=%d:&nbsp;fi.Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="7530004">,</span>&nbsp;<span class="ident" id="7530006">i</span><span class="op" id="7530007">,</span>&nbsp;<span class="ident" id="7530009">got</span><span class="op" id="7530012">,</span>&nbsp;<span class="ident" id="7530014">want</span><span class="op" id="7530018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7530022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7530026">if</span>&nbsp;<span class="ident" id="7530029">got</span><span class="op" id="7530032">,</span>&nbsp;<span class="ident" id="7530034">want</span>&nbsp;<span class="op" id="7530039">:=</span>&nbsp;<span class="ident" id="7530042">h2</span><span class="op" id="7530044">.</span><span class="ident" id="7530045">ModTime</span><span class="op" id="7530052">,</span>&nbsp;<span class="ident" id="7530054">g</span><span class="op" id="7530055">.</span><span class="ident" id="7530056">h</span><span class="op" id="7530057">.</span><span class="ident" id="7530058">ModTime</span><span class="op" id="7530065">;</span>&nbsp;<span class="ident" id="7530067">got</span>&nbsp;<span class="op" id="7530071">!=</span>&nbsp;<span class="ident" id="7530074">want</span>&nbsp;<span class="op" id="7530079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7530084">t</span><span class="op" id="7530085">.</span><span class="ident" id="7530086">Errorf</span><span class="op" id="7530092">(</span><span class="string" id="7530093">&#34;i=%d:&nbsp;ModTime:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7530125">,</span>&nbsp;<span class="ident" id="7530127">i</span><span class="op" id="7530128">,</span>&nbsp;<span class="ident" id="7530130">got</span><span class="op" id="7530133">,</span>&nbsp;<span class="ident" id="7530135">want</span><span class="op" id="7530139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7530143">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7530147">if</span>&nbsp;<span class="ident" id="7530150">sysh</span><span class="op" id="7530154">,</span>&nbsp;<span class="ident" id="7530156">ok</span>&nbsp;<span class="op" id="7530159">:=</span>&nbsp;<span class="ident" id="7530162">fi</span><span class="op" id="7530164">.</span><span class="ident" id="7530165">Sys</span><span class="op" id="7530168">(</span><span class="op" id="7530169">)</span><span class="op" id="7530170">.</span><span class="op" id="7530171">(</span><span class="op" id="7530172">*</span><span class="ident" id="7530173">Header</span><span class="op" id="7530179">)</span><span class="op" id="7530180">;</span>&nbsp;<span class="op" id="7530182">!</span><span class="ident" id="7530183">ok</span>&nbsp;<span class="op" id="7530186">||</span>&nbsp;<span class="ident" id="7530189">sysh</span>&nbsp;<span class="op" id="7530194">!=</span>&nbsp;<span class="ident" id="7530197">g</span><span class="op" id="7530198">.</span><span class="ident" id="7530199">h</span>&nbsp;<span class="op" id="7530201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7530206">t</span><span class="op" id="7530207">.</span><span class="ident" id="7530208">Errorf</span><span class="op" id="7530214">(</span><span class="string" id="7530215">&#34;i=%d:&nbsp;Sys&nbsp;didn&#39;t&nbsp;return&nbsp;original&nbsp;*Header&#34;</span><span class="op" id="7530257">,</span>&nbsp;<span class="ident" id="7530259">i</span><span class="op" id="7530260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7530264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7530267">}</span><br>
<span class="lineno"></span><span class="op" id="7530269">}</span>
</div>
</body>
</html>
