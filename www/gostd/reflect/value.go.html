<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2548534">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2548589">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2548643">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2548694">package</span>&nbsp;<span class="ident" id="2548702">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2548711">import</span>&nbsp;<span class="op" id="2548718">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2548721">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2548729">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2548740">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="2548749">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2548752">const</span>&nbsp;<span class="ident" id="2548758">ptrSize</span>&nbsp;<span class="op" id="2548766">=</span>&nbsp;<span class="ident" id="2548768">unsafe</span><span class="op" id="2548774">.</span><span class="ident" id="2548775">Sizeof</span><span class="op" id="2548781">(</span><span class="op" id="2548782">(</span><span class="op" id="2548783">*</span><span class="builtintype" id="2548784">byte</span><span class="op" id="2548788">)</span><span class="op" id="2548789">(</span><span class="ident" id="2548790">nil</span><span class="op" id="2548793">)</span><span class="op" id="2548794">)</span><br>
<span class="lineno"></span><span class="keyword" id="2548796">const</span>&nbsp;<span class="ident" id="2548802">cannotSet</span>&nbsp;<span class="op" id="2548812">=</span>&nbsp;<span class="string" id="2548814">&#34;cannot&nbsp;set&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;struct&nbsp;field&#34;</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2548872">//&nbsp;Value&nbsp;is&nbsp;the&nbsp;reflection&nbsp;interface&nbsp;to&nbsp;a&nbsp;Go&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2548924">//</span><br>
<span class="lineno"></span><span class="comment" id="2548927">//&nbsp;Not&nbsp;all&nbsp;methods&nbsp;apply&nbsp;to&nbsp;all&nbsp;kinds&nbsp;of&nbsp;values.&nbsp;&nbsp;Restrictions,</span><br>
<span class="lineno"></span><span class="comment" id="2548991">//&nbsp;if&nbsp;any,&nbsp;are&nbsp;noted&nbsp;in&nbsp;the&nbsp;documentation&nbsp;for&nbsp;each&nbsp;method.</span><br>
<span class="lineno">20</span><span class="comment" id="2549050">//&nbsp;Use&nbsp;the&nbsp;Kind&nbsp;method&nbsp;to&nbsp;find&nbsp;out&nbsp;the&nbsp;kind&nbsp;of&nbsp;value&nbsp;before</span><br>
<span class="lineno"></span><span class="comment" id="2549110">//&nbsp;calling&nbsp;kind-specific&nbsp;methods.&nbsp;&nbsp;Calling&nbsp;a&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2549162">//&nbsp;inappropriate&nbsp;to&nbsp;the&nbsp;kind&nbsp;of&nbsp;type&nbsp;causes&nbsp;a&nbsp;run&nbsp;time&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2549224">//</span><br>
<span class="lineno"></span><span class="comment" id="2549227">//&nbsp;The&nbsp;zero&nbsp;Value&nbsp;represents&nbsp;no&nbsp;value.</span><br>
<span class="lineno">25</span><span class="comment" id="2549266">//&nbsp;Its&nbsp;IsValid&nbsp;method&nbsp;returns&nbsp;false,&nbsp;its&nbsp;Kind&nbsp;method&nbsp;returns&nbsp;Invalid,</span><br>
<span class="lineno"></span><span class="comment" id="2549336">//&nbsp;its&nbsp;String&nbsp;method&nbsp;returns&nbsp;&#34;&lt;invalid&nbsp;Value&gt;&#34;,&nbsp;and&nbsp;all&nbsp;other&nbsp;methods&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2549413">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2549474">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2549542">//</span><br>
<span class="lineno">30</span><span class="comment" id="2549545">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;by&nbsp;multiple&nbsp;goroutines&nbsp;provided&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2549618">//&nbsp;the&nbsp;underlying&nbsp;Go&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;for&nbsp;the&nbsp;equivalent</span><br>
<span class="lineno"></span><span class="comment" id="2549689">//&nbsp;direct&nbsp;operations.</span><br>
<span class="lineno"></span><span class="keyword" id="2549711">type</span>&nbsp;<span class="ident" id="2549716">Value</span>&nbsp;<span class="keyword" id="2549722">struct</span>&nbsp;<span class="op" id="2549729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2549732">//&nbsp;typ&nbsp;holds&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;value&nbsp;represented&nbsp;by&nbsp;a&nbsp;Value.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2549792">typ</span>&nbsp;<span class="op" id="2549796">*</span><span class="ident" id="2549797">rtype</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2549805">//&nbsp;Pointer-valued&nbsp;data&nbsp;or,&nbsp;if&nbsp;flagIndir&nbsp;is&nbsp;set,&nbsp;pointer&nbsp;to&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2549871">//&nbsp;Valid&nbsp;when&nbsp;either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;or&nbsp;typ.pointers()&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2549937">ptr</span>&nbsp;<span class="ident" id="2549941">unsafe</span><span class="op" id="2549947">.</span><span class="ident" id="2549948">Pointer</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2549958">//&nbsp;flag&nbsp;holds&nbsp;metadata&nbsp;about&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2549999">//&nbsp;The&nbsp;lowest&nbsp;bits&nbsp;are&nbsp;flag&nbsp;bits:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2550034">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagRO:&nbsp;obtained&nbsp;via&nbsp;unexported&nbsp;field,&nbsp;so&nbsp;read-only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2550092">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagIndir:&nbsp;val&nbsp;holds&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;data</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2550141">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagAddr:&nbsp;v.CanAddr&nbsp;is&nbsp;true&nbsp;(implies&nbsp;flagIndir)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2550195">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagMethod:&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2550234">//&nbsp;The&nbsp;next&nbsp;five&nbsp;bits&nbsp;give&nbsp;the&nbsp;Kind&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2550285">//&nbsp;This&nbsp;repeats&nbsp;typ.Kind()&nbsp;except&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2550339">//&nbsp;The&nbsp;remaining&nbsp;23+&nbsp;bits&nbsp;give&nbsp;a&nbsp;method&nbsp;number&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2550406">//&nbsp;If&nbsp;flag.kind()&nbsp;!=&nbsp;Func,&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagMethod&nbsp;is&nbsp;unset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2550476">//&nbsp;If&nbsp;ifaceIndir(typ),&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagIndir&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2550539">flag</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2550546">//&nbsp;A&nbsp;method&nbsp;value&nbsp;represents&nbsp;a&nbsp;curried&nbsp;method&nbsp;invocation</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2550604">//&nbsp;like&nbsp;r.Read&nbsp;for&nbsp;some&nbsp;receiver&nbsp;r.&nbsp;&nbsp;The&nbsp;typ+val+flag&nbsp;bits&nbsp;describe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2550673">//&nbsp;the&nbsp;receiver&nbsp;r,&nbsp;but&nbsp;the&nbsp;flag&#39;s&nbsp;Kind&nbsp;bits&nbsp;say&nbsp;Func&nbsp;(methods&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2550740">//&nbsp;functions),&nbsp;and&nbsp;the&nbsp;top&nbsp;bits&nbsp;of&nbsp;the&nbsp;flag&nbsp;give&nbsp;the&nbsp;method&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2550808">//&nbsp;in&nbsp;r&#39;s&nbsp;type&#39;s&nbsp;method&nbsp;table.</span><br>
<span class="lineno"></span><span class="op" id="2550839">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2550842">type</span>&nbsp;<span class="ident" id="2550847">flag</span>&nbsp;<span class="builtintype" id="2550852">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2550861">const</span>&nbsp;<span class="op" id="2550867">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2550870">flagKindWidth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2550891">=</span>&nbsp;<span class="num" id="2550893">5</span>&nbsp;<span class="comment" id="2550895">//&nbsp;there&nbsp;are&nbsp;27&nbsp;kinds</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2550918">flagKindMask</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2550934">flag</span>&nbsp;<span class="op" id="2550939">=</span>&nbsp;<span class="num" id="2550941">1</span><span class="op" id="2550942">&lt;&lt;</span><span class="ident" id="2550944">flagKindWidth</span>&nbsp;<span class="op" id="2550958">-</span>&nbsp;<span class="num" id="2550960">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2550963">flagRO</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2550979">flag</span>&nbsp;<span class="op" id="2550984">=</span>&nbsp;<span class="num" id="2550986">1</span>&nbsp;<span class="op" id="2550988">&lt;&lt;</span>&nbsp;<span class="num" id="2550991">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2550994">flagIndir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2551010">flag</span>&nbsp;<span class="op" id="2551015">=</span>&nbsp;<span class="num" id="2551017">1</span>&nbsp;<span class="op" id="2551019">&lt;&lt;</span>&nbsp;<span class="num" id="2551022">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2551025">flagAddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2551041">flag</span>&nbsp;<span class="op" id="2551046">=</span>&nbsp;<span class="num" id="2551048">1</span>&nbsp;<span class="op" id="2551050">&lt;&lt;</span>&nbsp;<span class="num" id="2551053">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2551056">flagMethod</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2551072">flag</span>&nbsp;<span class="op" id="2551077">=</span>&nbsp;<span class="num" id="2551079">1</span>&nbsp;<span class="op" id="2551081">&lt;&lt;</span>&nbsp;<span class="num" id="2551084">8</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2551087">flagMethodShift</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2551108">=</span>&nbsp;<span class="num" id="2551110">9</span><br>
<span class="lineno"></span><span class="op" id="2551112">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2551115">func</span>&nbsp;<span class="op" id="2551120">(</span><span class="ident" id="2551121">f</span>&nbsp;<span class="ident" id="2551123">flag</span><span class="op" id="2551127">)</span>&nbsp;<span class="ident" id="2551129">kind</span><span class="op" id="2551133">(</span><span class="op" id="2551134">)</span>&nbsp;<span class="ident" id="2551136">Kind</span>&nbsp;<span class="op" id="2551141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2551144">return</span>&nbsp;<span class="ident" id="2551151">Kind</span><span class="op" id="2551155">(</span><span class="ident" id="2551156">f</span>&nbsp;<span class="op" id="2551158">&amp;</span>&nbsp;<span class="ident" id="2551160">flagKindMask</span><span class="op" id="2551172">)</span><br>
<span class="lineno">75</span><span class="op" id="2551174">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2551177">//&nbsp;pointer&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;pointer&nbsp;represented&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2551237">//&nbsp;v.Kind()&nbsp;must&nbsp;be&nbsp;Ptr,&nbsp;Map,&nbsp;Chan,&nbsp;Func,&nbsp;or&nbsp;UnsafePointer</span><br>
<span class="lineno"></span><span class="keyword" id="2551296">func</span>&nbsp;<span class="op" id="2551301">(</span><span class="ident" id="2551302">v</span>&nbsp;<span class="ident" id="2551304">Value</span><span class="op" id="2551309">)</span>&nbsp;<span class="ident" id="2551311">pointer</span><span class="op" id="2551318">(</span><span class="op" id="2551319">)</span>&nbsp;<span class="ident" id="2551321">unsafe</span><span class="op" id="2551327">.</span><span class="ident" id="2551328">Pointer</span>&nbsp;<span class="op" id="2551336">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2551339">if</span>&nbsp;<span class="ident" id="2551342">v</span><span class="op" id="2551343">.</span><span class="ident" id="2551344">typ</span><span class="op" id="2551347">.</span><span class="ident" id="2551348">size</span>&nbsp;<span class="op" id="2551353">!=</span>&nbsp;<span class="ident" id="2551356">ptrSize</span>&nbsp;<span class="op" id="2551364">||</span>&nbsp;<span class="op" id="2551367">!</span><span class="ident" id="2551368">v</span><span class="op" id="2551369">.</span><span class="ident" id="2551370">typ</span><span class="op" id="2551373">.</span><span class="ident" id="2551374">pointers</span><span class="op" id="2551382">(</span><span class="op" id="2551383">)</span>&nbsp;<span class="op" id="2551385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2551389">panic</span><span class="op" id="2551394">(</span><span class="string" id="2551395">&#34;can&#39;t&nbsp;call&nbsp;pointer&nbsp;on&nbsp;a&nbsp;non-pointer&nbsp;Value&#34;</span><span class="op" id="2551438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2551441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2551444">if</span>&nbsp;<span class="ident" id="2551447">v</span><span class="op" id="2551448">.</span><span class="ident" id="2551449">flag</span><span class="op" id="2551453">&amp;</span><span class="ident" id="2551454">flagIndir</span>&nbsp;<span class="op" id="2551464">!=</span>&nbsp;<span class="num" id="2551467">0</span>&nbsp;<span class="op" id="2551469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2551473">return</span>&nbsp;<span class="op" id="2551480">*</span><span class="op" id="2551481">(</span><span class="op" id="2551482">*</span><span class="ident" id="2551483">unsafe</span><span class="op" id="2551489">.</span><span class="ident" id="2551490">Pointer</span><span class="op" id="2551497">)</span><span class="op" id="2551498">(</span><span class="ident" id="2551499">v</span><span class="op" id="2551500">.</span><span class="ident" id="2551501">ptr</span><span class="op" id="2551504">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2551507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2551510">return</span>&nbsp;<span class="ident" id="2551517">v</span><span class="op" id="2551518">.</span><span class="ident" id="2551519">ptr</span><br>
<span class="lineno"></span><span class="op" id="2551523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2551526">//&nbsp;packEface&nbsp;converts&nbsp;v&nbsp;to&nbsp;the&nbsp;empty&nbsp;interface.</span><br>
<span class="lineno">90</span><span class="keyword" id="2551574">func</span>&nbsp;<span class="ident" id="2551579">packEface</span><span class="op" id="2551588">(</span><span class="ident" id="2551589">v</span>&nbsp;<span class="ident" id="2551591">Value</span><span class="op" id="2551596">)</span>&nbsp;<span class="keyword" id="2551598">interface</span><span class="op" id="2551607">{</span><span class="op" id="2551608">}</span>&nbsp;<span class="op" id="2551610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2551613">t</span>&nbsp;<span class="op" id="2551615">:=</span>&nbsp;<span class="ident" id="2551618">v</span><span class="op" id="2551619">.</span><span class="ident" id="2551620">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2551625">var</span>&nbsp;<span class="ident" id="2551629">i</span>&nbsp;<span class="keyword" id="2551631">interface</span><span class="op" id="2551640">{</span><span class="op" id="2551641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2551644">e</span>&nbsp;<span class="op" id="2551646">:=</span>&nbsp;<span class="op" id="2551649">(</span><span class="op" id="2551650">*</span><span class="ident" id="2551651">emptyInterface</span><span class="op" id="2551665">)</span><span class="op" id="2551666">(</span><span class="ident" id="2551667">unsafe</span><span class="op" id="2551673">.</span><span class="ident" id="2551674">Pointer</span><span class="op" id="2551681">(</span><span class="op" id="2551682">&amp;</span><span class="ident" id="2551683">i</span><span class="op" id="2551684">)</span><span class="op" id="2551685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2551688">//&nbsp;First,&nbsp;fill&nbsp;in&nbsp;the&nbsp;data&nbsp;portion&nbsp;of&nbsp;the&nbsp;interface.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2551742">switch</span>&nbsp;<span class="op" id="2551749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2551752">case</span>&nbsp;<span class="ident" id="2551757">ifaceIndir</span><span class="op" id="2551767">(</span><span class="ident" id="2551768">t</span><span class="op" id="2551769">)</span><span class="op" id="2551770">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2551774">if</span>&nbsp;<span class="ident" id="2551777">v</span><span class="op" id="2551778">.</span><span class="ident" id="2551779">flag</span><span class="op" id="2551783">&amp;</span><span class="ident" id="2551784">flagIndir</span>&nbsp;<span class="op" id="2551794">==</span>&nbsp;<span class="num" id="2551797">0</span>&nbsp;<span class="op" id="2551799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2551804">panic</span><span class="op" id="2551809">(</span><span class="string" id="2551810">&#34;bad&nbsp;indir&#34;</span><span class="op" id="2551821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2551825">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2551829">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface&nbsp;we&#39;re&nbsp;making.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2551891">ptr</span>&nbsp;<span class="op" id="2551895">:=</span>&nbsp;<span class="ident" id="2551898">v</span><span class="op" id="2551899">.</span><span class="ident" id="2551900">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2551906">if</span>&nbsp;<span class="ident" id="2551909">v</span><span class="op" id="2551910">.</span><span class="ident" id="2551911">flag</span><span class="op" id="2551915">&amp;</span><span class="ident" id="2551916">flagAddr</span>&nbsp;<span class="op" id="2551925">!=</span>&nbsp;<span class="num" id="2551928">0</span>&nbsp;<span class="op" id="2551930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2551935">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;boolean&nbsp;from&nbsp;valueInterface&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2551988">//&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2552031">c</span>&nbsp;<span class="op" id="2552033">:=</span>&nbsp;<span class="ident" id="2552036">unsafe_New</span><span class="op" id="2552046">(</span><span class="ident" id="2552047">t</span><span class="op" id="2552048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2552053">memmove</span><span class="op" id="2552060">(</span><span class="ident" id="2552061">c</span><span class="op" id="2552062">,</span>&nbsp;<span class="ident" id="2552064">ptr</span><span class="op" id="2552067">,</span>&nbsp;<span class="ident" id="2552069">t</span><span class="op" id="2552070">.</span><span class="ident" id="2552071">size</span><span class="op" id="2552075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2552080">ptr</span>&nbsp;<span class="op" id="2552084">=</span>&nbsp;<span class="ident" id="2552086">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2552090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2552094">e</span><span class="op" id="2552095">.</span><span class="ident" id="2552096">word</span>&nbsp;<span class="op" id="2552101">=</span>&nbsp;<span class="ident" id="2552103">ptr</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2552108">case</span>&nbsp;<span class="ident" id="2552113">v</span><span class="op" id="2552114">.</span><span class="ident" id="2552115">flag</span><span class="op" id="2552119">&amp;</span><span class="ident" id="2552120">flagIndir</span>&nbsp;<span class="op" id="2552130">!=</span>&nbsp;<span class="num" id="2552133">0</span><span class="op" id="2552134">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2552138">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;but&nbsp;interface&nbsp;is&nbsp;direct.&nbsp;&nbsp;We&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2552196">//&nbsp;to&nbsp;load&nbsp;the&nbsp;data&nbsp;at&nbsp;v.ptr&nbsp;into&nbsp;the&nbsp;interface&nbsp;data&nbsp;word.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2552257">e</span><span class="op" id="2552258">.</span><span class="ident" id="2552259">word</span>&nbsp;<span class="op" id="2552264">=</span>&nbsp;<span class="op" id="2552266">*</span><span class="op" id="2552267">(</span><span class="op" id="2552268">*</span><span class="ident" id="2552269">unsafe</span><span class="op" id="2552275">.</span><span class="ident" id="2552276">Pointer</span><span class="op" id="2552283">)</span><span class="op" id="2552284">(</span><span class="ident" id="2552285">v</span><span class="op" id="2552286">.</span><span class="ident" id="2552287">ptr</span><span class="op" id="2552290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2552293">default</span><span class="op" id="2552300">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2552304">//&nbsp;Value&nbsp;is&nbsp;direct,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2552351">e</span><span class="op" id="2552352">.</span><span class="ident" id="2552353">word</span>&nbsp;<span class="op" id="2552358">=</span>&nbsp;<span class="ident" id="2552360">v</span><span class="op" id="2552361">.</span><span class="ident" id="2552362">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2552367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2552370">//&nbsp;Now,&nbsp;fill&nbsp;in&nbsp;the&nbsp;type&nbsp;portion.&nbsp;&nbsp;We&#39;re&nbsp;very&nbsp;careful&nbsp;here&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2552434">//&nbsp;to&nbsp;have&nbsp;any&nbsp;operation&nbsp;between&nbsp;the&nbsp;e.word&nbsp;and&nbsp;e.typ&nbsp;assignments</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2552501">//&nbsp;that&nbsp;would&nbsp;let&nbsp;the&nbsp;garbage&nbsp;collector&nbsp;observe&nbsp;the&nbsp;partially-built</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2552570">//&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2552591">e</span><span class="op" id="2552592">.</span><span class="ident" id="2552593">typ</span>&nbsp;<span class="op" id="2552597">=</span>&nbsp;<span class="ident" id="2552599">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2552602">return</span>&nbsp;<span class="ident" id="2552609">i</span><br>
<span class="lineno"></span><span class="op" id="2552611">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="2552614">//&nbsp;unpackEface&nbsp;converts&nbsp;the&nbsp;empty&nbsp;interface&nbsp;i&nbsp;to&nbsp;a&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2552672">func</span>&nbsp;<span class="ident" id="2552677">unpackEface</span><span class="op" id="2552688">(</span><span class="ident" id="2552689">i</span>&nbsp;<span class="keyword" id="2552691">interface</span><span class="op" id="2552700">{</span><span class="op" id="2552701">}</span><span class="op" id="2552702">)</span>&nbsp;<span class="ident" id="2552704">Value</span>&nbsp;<span class="op" id="2552710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2552713">e</span>&nbsp;<span class="op" id="2552715">:=</span>&nbsp;<span class="op" id="2552718">(</span><span class="op" id="2552719">*</span><span class="ident" id="2552720">emptyInterface</span><span class="op" id="2552734">)</span><span class="op" id="2552735">(</span><span class="ident" id="2552736">unsafe</span><span class="op" id="2552742">.</span><span class="ident" id="2552743">Pointer</span><span class="op" id="2552750">(</span><span class="op" id="2552751">&amp;</span><span class="ident" id="2552752">i</span><span class="op" id="2552753">)</span><span class="op" id="2552754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2552757">//&nbsp;NOTE:&nbsp;don&#39;t&nbsp;read&nbsp;e.word&nbsp;until&nbsp;we&nbsp;know&nbsp;whether&nbsp;it&nbsp;is&nbsp;really&nbsp;a&nbsp;pointer&nbsp;or&nbsp;not.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2552838">t</span>&nbsp;<span class="op" id="2552840">:=</span>&nbsp;<span class="ident" id="2552843">e</span><span class="op" id="2552844">.</span><span class="ident" id="2552845">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2552850">if</span>&nbsp;<span class="ident" id="2552853">t</span>&nbsp;<span class="op" id="2552855">==</span>&nbsp;<span class="ident" id="2552858">nil</span>&nbsp;<span class="op" id="2552862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2552866">return</span>&nbsp;<span class="ident" id="2552873">Value</span><span class="op" id="2552878">{</span><span class="op" id="2552879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2552882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2552885">f</span>&nbsp;<span class="op" id="2552887">:=</span>&nbsp;<span class="ident" id="2552890">flag</span><span class="op" id="2552894">(</span><span class="ident" id="2552895">t</span><span class="op" id="2552896">.</span><span class="ident" id="2552897">Kind</span><span class="op" id="2552901">(</span><span class="op" id="2552902">)</span><span class="op" id="2552903">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2552906">if</span>&nbsp;<span class="ident" id="2552909">ifaceIndir</span><span class="op" id="2552919">(</span><span class="ident" id="2552920">t</span><span class="op" id="2552921">)</span>&nbsp;<span class="op" id="2552923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2552927">f</span>&nbsp;<span class="op" id="2552929">|=</span>&nbsp;<span class="ident" id="2552932">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2552943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2552946">return</span>&nbsp;<span class="ident" id="2552953">Value</span><span class="op" id="2552958">{</span><span class="ident" id="2552959">t</span><span class="op" id="2552960">,</span>&nbsp;<span class="ident" id="2552962">unsafe</span><span class="op" id="2552968">.</span><span class="ident" id="2552969">Pointer</span><span class="op" id="2552976">(</span><span class="ident" id="2552977">e</span><span class="op" id="2552978">.</span><span class="ident" id="2552979">word</span><span class="op" id="2552983">)</span><span class="op" id="2552984">,</span>&nbsp;<span class="ident" id="2552986">f</span><span class="op" id="2552987">}</span><br>
<span class="lineno"></span><span class="op" id="2552989">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="2552992">//&nbsp;A&nbsp;ValueError&nbsp;occurs&nbsp;when&nbsp;a&nbsp;Value&nbsp;method&nbsp;is&nbsp;invoked&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2553049">//&nbsp;a&nbsp;Value&nbsp;that&nbsp;does&nbsp;not&nbsp;support&nbsp;it.&nbsp;&nbsp;Such&nbsp;cases&nbsp;are&nbsp;documented</span><br>
<span class="lineno"></span><span class="comment" id="2553113">//&nbsp;in&nbsp;the&nbsp;description&nbsp;of&nbsp;each&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="2553151">type</span>&nbsp;<span class="ident" id="2553156">ValueError</span>&nbsp;<span class="keyword" id="2553167">struct</span>&nbsp;<span class="op" id="2553174">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2553177">Method</span>&nbsp;<span class="builtintype" id="2553184">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2553192">Kind</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2553199">Kind</span><br>
<span class="lineno"></span><span class="op" id="2553204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2553207">func</span>&nbsp;<span class="op" id="2553212">(</span><span class="ident" id="2553213">e</span>&nbsp;<span class="op" id="2553215">*</span><span class="ident" id="2553216">ValueError</span><span class="op" id="2553226">)</span>&nbsp;<span class="ident" id="2553228">Error</span><span class="op" id="2553233">(</span><span class="op" id="2553234">)</span>&nbsp;<span class="builtintype" id="2553236">string</span>&nbsp;<span class="op" id="2553243">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2553246">if</span>&nbsp;<span class="ident" id="2553249">e</span><span class="op" id="2553250">.</span><span class="ident" id="2553251">Kind</span>&nbsp;<span class="op" id="2553256">==</span>&nbsp;<span class="num" id="2553259">0</span>&nbsp;<span class="op" id="2553261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2553265">return</span>&nbsp;<span class="string" id="2553272">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2553292">+</span>&nbsp;<span class="ident" id="2553294">e</span><span class="op" id="2553295">.</span><span class="ident" id="2553296">Method</span>&nbsp;<span class="op" id="2553303">+</span>&nbsp;<span class="string" id="2553305">&#34;&nbsp;on&nbsp;zero&nbsp;Value&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2553323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2553326">return</span>&nbsp;<span class="string" id="2553333">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2553353">+</span>&nbsp;<span class="ident" id="2553355">e</span><span class="op" id="2553356">.</span><span class="ident" id="2553357">Method</span>&nbsp;<span class="op" id="2553364">+</span>&nbsp;<span class="string" id="2553366">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="2553373">+</span>&nbsp;<span class="ident" id="2553375">e</span><span class="op" id="2553376">.</span><span class="ident" id="2553377">Kind</span><span class="op" id="2553381">.</span><span class="ident" id="2553382">String</span><span class="op" id="2553388">(</span><span class="op" id="2553389">)</span>&nbsp;<span class="op" id="2553391">+</span>&nbsp;<span class="string" id="2553393">&#34;&nbsp;Value&#34;</span><br>
<span class="lineno"></span><span class="op" id="2553402">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="2553405">//&nbsp;methodName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;calling&nbsp;method,</span><br>
<span class="lineno"></span><span class="comment" id="2553459">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;two&nbsp;stack&nbsp;frames&nbsp;above.</span><br>
<span class="lineno"></span><span class="keyword" id="2553500">func</span>&nbsp;<span class="ident" id="2553505">methodName</span><span class="op" id="2553515">(</span><span class="op" id="2553516">)</span>&nbsp;<span class="builtintype" id="2553518">string</span>&nbsp;<span class="op" id="2553525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2553528">pc</span><span class="op" id="2553530">,</span>&nbsp;<span class="ident" id="2553532">_</span><span class="op" id="2553533">,</span>&nbsp;<span class="ident" id="2553535">_</span><span class="op" id="2553536">,</span>&nbsp;<span class="ident" id="2553538">_</span>&nbsp;<span class="op" id="2553540">:=</span>&nbsp;<span class="ident" id="2553543">runtime</span><span class="op" id="2553550">.</span><span class="ident" id="2553551">Caller</span><span class="op" id="2553557">(</span><span class="num" id="2553558">2</span><span class="op" id="2553559">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2553562">f</span>&nbsp;<span class="op" id="2553564">:=</span>&nbsp;<span class="ident" id="2553567">runtime</span><span class="op" id="2553574">.</span><span class="ident" id="2553575">FuncForPC</span><span class="op" id="2553584">(</span><span class="ident" id="2553585">pc</span><span class="op" id="2553587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2553590">if</span>&nbsp;<span class="ident" id="2553593">f</span>&nbsp;<span class="op" id="2553595">==</span>&nbsp;<span class="ident" id="2553598">nil</span>&nbsp;<span class="op" id="2553602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2553606">return</span>&nbsp;<span class="string" id="2553613">&#34;unknown&nbsp;method&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2553631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2553634">return</span>&nbsp;<span class="ident" id="2553641">f</span><span class="op" id="2553642">.</span><span class="ident" id="2553643">Name</span><span class="op" id="2553647">(</span><span class="op" id="2553648">)</span><br>
<span class="lineno">165</span><span class="op" id="2553650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2553653">//&nbsp;emptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;an&nbsp;interface{}&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2553711">type</span>&nbsp;<span class="ident" id="2553716">emptyInterface</span>&nbsp;<span class="keyword" id="2553731">struct</span>&nbsp;<span class="op" id="2553738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2553741">typ</span>&nbsp;&nbsp;<span class="op" id="2553746">*</span><span class="ident" id="2553747">rtype</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2553754">word</span>&nbsp;<span class="ident" id="2553759">unsafe</span><span class="op" id="2553765">.</span><span class="ident" id="2553766">Pointer</span><br>
<span class="lineno"></span><span class="op" id="2553774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2553777">//&nbsp;nonEmptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;interface&nbsp;value&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="2553848">type</span>&nbsp;<span class="ident" id="2553853">nonEmptyInterface</span>&nbsp;<span class="keyword" id="2553871">struct</span>&nbsp;<span class="op" id="2553878">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2553881">//&nbsp;see&nbsp;../runtime/iface.c:/Itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2553914">itab</span>&nbsp;<span class="op" id="2553919">*</span><span class="keyword" id="2553920">struct</span>&nbsp;<span class="op" id="2553927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2553931">ityp</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2553938">*</span><span class="ident" id="2553939">rtype</span>&nbsp;<span class="comment" id="2553945">//&nbsp;static&nbsp;interface&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2553972">typ</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2553979">*</span><span class="ident" id="2553980">rtype</span>&nbsp;<span class="comment" id="2553986">//&nbsp;dynamic&nbsp;concrete&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2554013">link</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2554020">unsafe</span><span class="op" id="2554026">.</span><span class="ident" id="2554027">Pointer</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2554037">bad</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2554044">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2554052">unused</span>&nbsp;<span class="builtintype" id="2554059">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2554067">fun</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2554074">[</span><span class="num" id="2554075">100000</span><span class="op" id="2554081">]</span><span class="ident" id="2554082">unsafe</span><span class="op" id="2554088">.</span><span class="ident" id="2554089">Pointer</span>&nbsp;<span class="comment" id="2554097">//&nbsp;method&nbsp;table</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2554114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2554117">word</span>&nbsp;<span class="ident" id="2554122">unsafe</span><span class="op" id="2554128">.</span><span class="ident" id="2554129">Pointer</span><br>
<span class="lineno">185</span><span class="op" id="2554137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2554140">//&nbsp;mustBe&nbsp;panics&nbsp;if&nbsp;f&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;expected.</span><br>
<span class="lineno"></span><span class="comment" id="2554186">//&nbsp;Making&nbsp;this&nbsp;a&nbsp;method&nbsp;on&nbsp;flag&nbsp;instead&nbsp;of&nbsp;on&nbsp;Value</span><br>
<span class="lineno"></span><span class="comment" id="2554238">//&nbsp;(and&nbsp;embedding&nbsp;flag&nbsp;in&nbsp;Value)&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">190</span><span class="comment" id="2554295">//&nbsp;the&nbsp;very&nbsp;clear&nbsp;v.mustBe(Bool)&nbsp;and&nbsp;have&nbsp;it&nbsp;compile&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="2554353">//&nbsp;v.flag.mustBe(Bool),&nbsp;which&nbsp;will&nbsp;only&nbsp;bother&nbsp;to&nbsp;copy&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2554412">//&nbsp;single&nbsp;important&nbsp;word&nbsp;for&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2554455">func</span>&nbsp;<span class="op" id="2554460">(</span><span class="ident" id="2554461">f</span>&nbsp;<span class="ident" id="2554463">flag</span><span class="op" id="2554467">)</span>&nbsp;<span class="ident" id="2554469">mustBe</span><span class="op" id="2554475">(</span><span class="ident" id="2554476">expected</span>&nbsp;<span class="ident" id="2554485">Kind</span><span class="op" id="2554489">)</span>&nbsp;<span class="op" id="2554491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2554494">if</span>&nbsp;<span class="ident" id="2554497">f</span><span class="op" id="2554498">.</span><span class="ident" id="2554499">kind</span><span class="op" id="2554503">(</span><span class="op" id="2554504">)</span>&nbsp;<span class="op" id="2554506">!=</span>&nbsp;<span class="ident" id="2554509">expected</span>&nbsp;<span class="op" id="2554518">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2554522">panic</span><span class="op" id="2554527">(</span><span class="op" id="2554528">&amp;</span><span class="ident" id="2554529">ValueError</span><span class="op" id="2554539">{</span><span class="ident" id="2554540">methodName</span><span class="op" id="2554550">(</span><span class="op" id="2554551">)</span><span class="op" id="2554552">,</span>&nbsp;<span class="ident" id="2554554">f</span><span class="op" id="2554555">.</span><span class="ident" id="2554556">kind</span><span class="op" id="2554560">(</span><span class="op" id="2554561">)</span><span class="op" id="2554562">}</span><span class="op" id="2554563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2554566">}</span><br>
<span class="lineno"></span><span class="op" id="2554568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2554571">//&nbsp;mustBeExported&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;was&nbsp;obtained&nbsp;using</span><br>
<span class="lineno">200</span><span class="comment" id="2554643">//&nbsp;an&nbsp;unexported&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="2554667">func</span>&nbsp;<span class="op" id="2554672">(</span><span class="ident" id="2554673">f</span>&nbsp;<span class="ident" id="2554675">flag</span><span class="op" id="2554679">)</span>&nbsp;<span class="ident" id="2554681">mustBeExported</span><span class="op" id="2554695">(</span><span class="op" id="2554696">)</span>&nbsp;<span class="op" id="2554698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2554701">if</span>&nbsp;<span class="ident" id="2554704">f</span>&nbsp;<span class="op" id="2554706">==</span>&nbsp;<span class="num" id="2554709">0</span>&nbsp;<span class="op" id="2554711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2554715">panic</span><span class="op" id="2554720">(</span><span class="op" id="2554721">&amp;</span><span class="ident" id="2554722">ValueError</span><span class="op" id="2554732">{</span><span class="ident" id="2554733">methodName</span><span class="op" id="2554743">(</span><span class="op" id="2554744">)</span><span class="op" id="2554745">,</span>&nbsp;<span class="num" id="2554747">0</span><span class="op" id="2554748">}</span><span class="op" id="2554749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2554752">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2554755">if</span>&nbsp;<span class="ident" id="2554758">f</span><span class="op" id="2554759">&amp;</span><span class="ident" id="2554760">flagRO</span>&nbsp;<span class="op" id="2554767">!=</span>&nbsp;<span class="num" id="2554770">0</span>&nbsp;<span class="op" id="2554772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2554776">panic</span><span class="op" id="2554781">(</span><span class="string" id="2554782">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2554794">+</span>&nbsp;<span class="ident" id="2554796">methodName</span><span class="op" id="2554806">(</span><span class="op" id="2554807">)</span>&nbsp;<span class="op" id="2554809">+</span>&nbsp;<span class="string" id="2554811">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2554857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2554860">}</span><br>
<span class="lineno"></span><span class="op" id="2554862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="comment" id="2554865">//&nbsp;mustBeAssignable&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;is&nbsp;not&nbsp;assignable,</span><br>
<span class="lineno"></span><span class="comment" id="2554939">//&nbsp;which&nbsp;is&nbsp;to&nbsp;say&nbsp;that&nbsp;either&nbsp;it&nbsp;was&nbsp;obtained&nbsp;using&nbsp;an&nbsp;unexported&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2555012">//&nbsp;or&nbsp;it&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2555041">func</span>&nbsp;<span class="op" id="2555046">(</span><span class="ident" id="2555047">f</span>&nbsp;<span class="ident" id="2555049">flag</span><span class="op" id="2555053">)</span>&nbsp;<span class="ident" id="2555055">mustBeAssignable</span><span class="op" id="2555071">(</span><span class="op" id="2555072">)</span>&nbsp;<span class="op" id="2555074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2555077">if</span>&nbsp;<span class="ident" id="2555080">f</span>&nbsp;<span class="op" id="2555082">==</span>&nbsp;<span class="num" id="2555085">0</span>&nbsp;<span class="op" id="2555087">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2555091">panic</span><span class="op" id="2555096">(</span><span class="op" id="2555097">&amp;</span><span class="ident" id="2555098">ValueError</span><span class="op" id="2555108">{</span><span class="ident" id="2555109">methodName</span><span class="op" id="2555119">(</span><span class="op" id="2555120">)</span><span class="op" id="2555121">,</span>&nbsp;<span class="ident" id="2555123">Invalid</span><span class="op" id="2555130">}</span><span class="op" id="2555131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2555134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2555137">//&nbsp;Assignable&nbsp;if&nbsp;addressable&nbsp;and&nbsp;not&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2555186">if</span>&nbsp;<span class="ident" id="2555189">f</span><span class="op" id="2555190">&amp;</span><span class="ident" id="2555191">flagRO</span>&nbsp;<span class="op" id="2555198">!=</span>&nbsp;<span class="num" id="2555201">0</span>&nbsp;<span class="op" id="2555203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2555207">panic</span><span class="op" id="2555212">(</span><span class="string" id="2555213">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2555225">+</span>&nbsp;<span class="ident" id="2555227">methodName</span><span class="op" id="2555237">(</span><span class="op" id="2555238">)</span>&nbsp;<span class="op" id="2555240">+</span>&nbsp;<span class="string" id="2555242">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2555288">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2555291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2555294">if</span>&nbsp;<span class="ident" id="2555297">f</span><span class="op" id="2555298">&amp;</span><span class="ident" id="2555299">flagAddr</span>&nbsp;<span class="op" id="2555308">==</span>&nbsp;<span class="num" id="2555311">0</span>&nbsp;<span class="op" id="2555313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2555317">panic</span><span class="op" id="2555322">(</span><span class="string" id="2555323">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2555335">+</span>&nbsp;<span class="ident" id="2555337">methodName</span><span class="op" id="2555347">(</span><span class="op" id="2555348">)</span>&nbsp;<span class="op" id="2555350">+</span>&nbsp;<span class="string" id="2555352">&#34;&nbsp;using&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2555380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2555383">}</span><br>
<span class="lineno"></span><span class="op" id="2555385">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="2555388">//&nbsp;Addr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;value&nbsp;representing&nbsp;the&nbsp;address&nbsp;of&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2555451">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanAddr()&nbsp;returns&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2555492">//&nbsp;Addr&nbsp;is&nbsp;typically&nbsp;used&nbsp;to&nbsp;obtain&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;struct&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2555556">//&nbsp;or&nbsp;slice&nbsp;element&nbsp;in&nbsp;order&nbsp;to&nbsp;call&nbsp;a&nbsp;method&nbsp;that&nbsp;requires&nbsp;a</span><br>
<span class="lineno">230</span><span class="comment" id="2555618">//&nbsp;pointer&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2555639">func</span>&nbsp;<span class="op" id="2555644">(</span><span class="ident" id="2555645">v</span>&nbsp;<span class="ident" id="2555647">Value</span><span class="op" id="2555652">)</span>&nbsp;<span class="ident" id="2555654">Addr</span><span class="op" id="2555658">(</span><span class="op" id="2555659">)</span>&nbsp;<span class="ident" id="2555661">Value</span>&nbsp;<span class="op" id="2555667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2555670">if</span>&nbsp;<span class="ident" id="2555673">v</span><span class="op" id="2555674">.</span><span class="ident" id="2555675">flag</span><span class="op" id="2555679">&amp;</span><span class="ident" id="2555680">flagAddr</span>&nbsp;<span class="op" id="2555689">==</span>&nbsp;<span class="num" id="2555692">0</span>&nbsp;<span class="op" id="2555694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2555698">panic</span><span class="op" id="2555703">(</span><span class="string" id="2555704">&#34;reflect.Value.Addr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2555747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2555750">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2555753">return</span>&nbsp;<span class="ident" id="2555760">Value</span><span class="op" id="2555765">{</span><span class="ident" id="2555766">v</span><span class="op" id="2555767">.</span><span class="ident" id="2555768">typ</span><span class="op" id="2555771">.</span><span class="ident" id="2555772">ptrTo</span><span class="op" id="2555777">(</span><span class="op" id="2555778">)</span><span class="op" id="2555779">,</span>&nbsp;<span class="ident" id="2555781">v</span><span class="op" id="2555782">.</span><span class="ident" id="2555783">ptr</span><span class="op" id="2555786">,</span>&nbsp;<span class="op" id="2555788">(</span><span class="ident" id="2555789">v</span><span class="op" id="2555790">.</span><span class="ident" id="2555791">flag</span>&nbsp;<span class="op" id="2555796">&amp;</span>&nbsp;<span class="ident" id="2555798">flagRO</span><span class="op" id="2555804">)</span>&nbsp;<span class="op" id="2555806">|</span>&nbsp;<span class="ident" id="2555808">flag</span><span class="op" id="2555812">(</span><span class="ident" id="2555813">Ptr</span><span class="op" id="2555816">)</span><span class="op" id="2555817">}</span><br>
<span class="lineno"></span><span class="op" id="2555819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2555822">//&nbsp;Bool&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2555860">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Bool.</span><br>
<span class="lineno">240</span><span class="keyword" id="2555898">func</span>&nbsp;<span class="op" id="2555903">(</span><span class="ident" id="2555904">v</span>&nbsp;<span class="ident" id="2555906">Value</span><span class="op" id="2555911">)</span>&nbsp;<span class="ident" id="2555913">Bool</span><span class="op" id="2555917">(</span><span class="op" id="2555918">)</span>&nbsp;<span class="builtintype" id="2555920">bool</span>&nbsp;<span class="op" id="2555925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2555928">v</span><span class="op" id="2555929">.</span><span class="ident" id="2555930">mustBe</span><span class="op" id="2555936">(</span><span class="ident" id="2555937">Bool</span><span class="op" id="2555941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2555944">return</span>&nbsp;<span class="op" id="2555951">*</span><span class="op" id="2555952">(</span><span class="op" id="2555953">*</span><span class="builtintype" id="2555954">bool</span><span class="op" id="2555958">)</span><span class="op" id="2555959">(</span><span class="ident" id="2555960">v</span><span class="op" id="2555961">.</span><span class="ident" id="2555962">ptr</span><span class="op" id="2555965">)</span><br>
<span class="lineno"></span><span class="op" id="2555967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2555970">//&nbsp;Bytes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2556009">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2556071">func</span>&nbsp;<span class="op" id="2556076">(</span><span class="ident" id="2556077">v</span>&nbsp;<span class="ident" id="2556079">Value</span><span class="op" id="2556084">)</span>&nbsp;<span class="ident" id="2556086">Bytes</span><span class="op" id="2556091">(</span><span class="op" id="2556092">)</span>&nbsp;<span class="op" id="2556094">[</span><span class="op" id="2556095">]</span><span class="builtintype" id="2556096">byte</span>&nbsp;<span class="op" id="2556101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2556104">v</span><span class="op" id="2556105">.</span><span class="ident" id="2556106">mustBe</span><span class="op" id="2556112">(</span><span class="ident" id="2556113">Slice</span><span class="op" id="2556118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2556121">if</span>&nbsp;<span class="ident" id="2556124">v</span><span class="op" id="2556125">.</span><span class="ident" id="2556126">typ</span><span class="op" id="2556129">.</span><span class="ident" id="2556130">Elem</span><span class="op" id="2556134">(</span><span class="op" id="2556135">)</span><span class="op" id="2556136">.</span><span class="ident" id="2556137">Kind</span><span class="op" id="2556141">(</span><span class="op" id="2556142">)</span>&nbsp;<span class="op" id="2556144">!=</span>&nbsp;<span class="ident" id="2556147">Uint8</span>&nbsp;<span class="op" id="2556153">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2556157">panic</span><span class="op" id="2556162">(</span><span class="string" id="2556163">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2556202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2556205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2556208">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2556266">return</span>&nbsp;<span class="op" id="2556273">*</span><span class="op" id="2556274">(</span><span class="op" id="2556275">*</span><span class="op" id="2556276">[</span><span class="op" id="2556277">]</span><span class="builtintype" id="2556278">byte</span><span class="op" id="2556282">)</span><span class="op" id="2556283">(</span><span class="ident" id="2556284">v</span><span class="op" id="2556285">.</span><span class="ident" id="2556286">ptr</span><span class="op" id="2556289">)</span><br>
<span class="lineno"></span><span class="op" id="2556291">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="2556294">//&nbsp;runes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2556333">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2556404">func</span>&nbsp;<span class="op" id="2556409">(</span><span class="ident" id="2556410">v</span>&nbsp;<span class="ident" id="2556412">Value</span><span class="op" id="2556417">)</span>&nbsp;<span class="ident" id="2556419">runes</span><span class="op" id="2556424">(</span><span class="op" id="2556425">)</span>&nbsp;<span class="op" id="2556427">[</span><span class="op" id="2556428">]</span><span class="builtintype" id="2556429">rune</span>&nbsp;<span class="op" id="2556434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2556437">v</span><span class="op" id="2556438">.</span><span class="ident" id="2556439">mustBe</span><span class="op" id="2556445">(</span><span class="ident" id="2556446">Slice</span><span class="op" id="2556451">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2556454">if</span>&nbsp;<span class="ident" id="2556457">v</span><span class="op" id="2556458">.</span><span class="ident" id="2556459">typ</span><span class="op" id="2556462">.</span><span class="ident" id="2556463">Elem</span><span class="op" id="2556467">(</span><span class="op" id="2556468">)</span><span class="op" id="2556469">.</span><span class="ident" id="2556470">Kind</span><span class="op" id="2556474">(</span><span class="op" id="2556475">)</span>&nbsp;<span class="op" id="2556477">!=</span>&nbsp;<span class="ident" id="2556480">Int32</span>&nbsp;<span class="op" id="2556486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2556490">panic</span><span class="op" id="2556495">(</span><span class="string" id="2556496">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2556535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2556538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2556541">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2556599">return</span>&nbsp;<span class="op" id="2556606">*</span><span class="op" id="2556607">(</span><span class="op" id="2556608">*</span><span class="op" id="2556609">[</span><span class="op" id="2556610">]</span><span class="builtintype" id="2556611">rune</span><span class="op" id="2556615">)</span><span class="op" id="2556616">(</span><span class="ident" id="2556617">v</span><span class="op" id="2556618">.</span><span class="ident" id="2556619">ptr</span><span class="op" id="2556622">)</span><br>
<span class="lineno">265</span><span class="op" id="2556624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2556627">//&nbsp;CanAddr&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&#39;s&nbsp;address&nbsp;can&nbsp;be&nbsp;obtained&nbsp;with&nbsp;Addr.</span><br>
<span class="lineno"></span><span class="comment" id="2556701">//&nbsp;Such&nbsp;values&nbsp;are&nbsp;called&nbsp;addressable.&nbsp;&nbsp;A&nbsp;value&nbsp;is&nbsp;addressable&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2556773">//&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;slice,&nbsp;an&nbsp;element&nbsp;of&nbsp;an&nbsp;addressable&nbsp;array,</span><br>
<span class="lineno">270</span><span class="comment" id="2556835">//&nbsp;a&nbsp;field&nbsp;of&nbsp;an&nbsp;addressable&nbsp;struct,&nbsp;or&nbsp;the&nbsp;result&nbsp;of&nbsp;dereferencing&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="comment" id="2556914">//&nbsp;If&nbsp;CanAddr&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Addr&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2556968">func</span>&nbsp;<span class="op" id="2556973">(</span><span class="ident" id="2556974">v</span>&nbsp;<span class="ident" id="2556976">Value</span><span class="op" id="2556981">)</span>&nbsp;<span class="ident" id="2556983">CanAddr</span><span class="op" id="2556990">(</span><span class="op" id="2556991">)</span>&nbsp;<span class="builtintype" id="2556993">bool</span>&nbsp;<span class="op" id="2556998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2557001">return</span>&nbsp;<span class="ident" id="2557008">v</span><span class="op" id="2557009">.</span><span class="ident" id="2557010">flag</span><span class="op" id="2557014">&amp;</span><span class="ident" id="2557015">flagAddr</span>&nbsp;<span class="op" id="2557024">!=</span>&nbsp;<span class="num" id="2557027">0</span><br>
<span class="lineno"></span><span class="op" id="2557029">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="2557032">//&nbsp;CanSet&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;of&nbsp;v&nbsp;can&nbsp;be&nbsp;changed.</span><br>
<span class="lineno"></span><span class="comment" id="2557089">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;changed&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable&nbsp;and&nbsp;was&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2557153">//&nbsp;obtained&nbsp;by&nbsp;the&nbsp;use&nbsp;of&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="2557205">//&nbsp;If&nbsp;CanSet&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Set&nbsp;or&nbsp;any&nbsp;type-specific</span><br>
<span class="lineno">280</span><span class="comment" id="2557266">//&nbsp;setter&nbsp;(e.g.,&nbsp;SetBool,&nbsp;SetInt64)&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2557314">func</span>&nbsp;<span class="op" id="2557319">(</span><span class="ident" id="2557320">v</span>&nbsp;<span class="ident" id="2557322">Value</span><span class="op" id="2557327">)</span>&nbsp;<span class="ident" id="2557329">CanSet</span><span class="op" id="2557335">(</span><span class="op" id="2557336">)</span>&nbsp;<span class="builtintype" id="2557338">bool</span>&nbsp;<span class="op" id="2557343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2557346">return</span>&nbsp;<span class="ident" id="2557353">v</span><span class="op" id="2557354">.</span><span class="ident" id="2557355">flag</span><span class="op" id="2557359">&amp;</span><span class="op" id="2557360">(</span><span class="ident" id="2557361">flagAddr</span><span class="op" id="2557369">|</span><span class="ident" id="2557370">flagRO</span><span class="op" id="2557376">)</span>&nbsp;<span class="op" id="2557378">==</span>&nbsp;<span class="ident" id="2557381">flagAddr</span><br>
<span class="lineno"></span><span class="op" id="2557390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="2557393">//&nbsp;Call&nbsp;calls&nbsp;the&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in.</span><br>
<span class="lineno"></span><span class="comment" id="2557451">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]).</span><br>
<span class="lineno"></span><span class="comment" id="2557542">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func.</span><br>
<span class="lineno"></span><span class="comment" id="2557582">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2557626">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">290</span><span class="comment" id="2557685">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="comment" id="2557742">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;variadic&nbsp;function,&nbsp;Call&nbsp;creates&nbsp;the&nbsp;variadic&nbsp;slice&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="2557816">//&nbsp;itself,&nbsp;copying&nbsp;in&nbsp;the&nbsp;corresponding&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2557864">func</span>&nbsp;<span class="op" id="2557869">(</span><span class="ident" id="2557870">v</span>&nbsp;<span class="ident" id="2557872">Value</span><span class="op" id="2557877">)</span>&nbsp;<span class="ident" id="2557879">Call</span><span class="op" id="2557883">(</span><span class="ident" id="2557884">in</span>&nbsp;<span class="op" id="2557887">[</span><span class="op" id="2557888">]</span><span class="ident" id="2557889">Value</span><span class="op" id="2557894">)</span>&nbsp;<span class="op" id="2557896">[</span><span class="op" id="2557897">]</span><span class="ident" id="2557898">Value</span>&nbsp;<span class="op" id="2557904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2557907">v</span><span class="op" id="2557908">.</span><span class="ident" id="2557909">mustBe</span><span class="op" id="2557915">(</span><span class="ident" id="2557916">Func</span><span class="op" id="2557920">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2557923">v</span><span class="op" id="2557924">.</span><span class="ident" id="2557925">mustBeExported</span><span class="op" id="2557939">(</span><span class="op" id="2557940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2557943">return</span>&nbsp;<span class="ident" id="2557950">v</span><span class="op" id="2557951">.</span><span class="ident" id="2557952">call</span><span class="op" id="2557956">(</span><span class="string" id="2557957">&#34;Call&#34;</span><span class="op" id="2557963">,</span>&nbsp;<span class="ident" id="2557965">in</span><span class="op" id="2557967">)</span><br>
<span class="lineno"></span><span class="op" id="2557969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2557972">//&nbsp;CallSlice&nbsp;calls&nbsp;the&nbsp;variadic&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in,</span><br>
<span class="lineno">300</span><span class="comment" id="2558044">//&nbsp;assigning&nbsp;the&nbsp;slice&nbsp;in[len(in)-1]&nbsp;to&nbsp;v&#39;s&nbsp;final&nbsp;variadic&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2558113">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]...).</span><br>
<span class="lineno"></span><span class="comment" id="2558207">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;variadic.</span><br>
<span class="lineno"></span><span class="comment" id="2558271">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2558315">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">305</span><span class="comment" id="2558374">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="keyword" id="2558431">func</span>&nbsp;<span class="op" id="2558436">(</span><span class="ident" id="2558437">v</span>&nbsp;<span class="ident" id="2558439">Value</span><span class="op" id="2558444">)</span>&nbsp;<span class="ident" id="2558446">CallSlice</span><span class="op" id="2558455">(</span><span class="ident" id="2558456">in</span>&nbsp;<span class="op" id="2558459">[</span><span class="op" id="2558460">]</span><span class="ident" id="2558461">Value</span><span class="op" id="2558466">)</span>&nbsp;<span class="op" id="2558468">[</span><span class="op" id="2558469">]</span><span class="ident" id="2558470">Value</span>&nbsp;<span class="op" id="2558476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2558479">v</span><span class="op" id="2558480">.</span><span class="ident" id="2558481">mustBe</span><span class="op" id="2558487">(</span><span class="ident" id="2558488">Func</span><span class="op" id="2558492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2558495">v</span><span class="op" id="2558496">.</span><span class="ident" id="2558497">mustBeExported</span><span class="op" id="2558511">(</span><span class="op" id="2558512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2558515">return</span>&nbsp;<span class="ident" id="2558522">v</span><span class="op" id="2558523">.</span><span class="ident" id="2558524">call</span><span class="op" id="2558528">(</span><span class="string" id="2558529">&#34;CallSlice&#34;</span><span class="op" id="2558540">,</span>&nbsp;<span class="ident" id="2558542">in</span><span class="op" id="2558544">)</span><br>
<span class="lineno">310</span><span class="op" id="2558546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2558549">var</span>&nbsp;<span class="ident" id="2558553">callGC</span>&nbsp;<span class="builtintype" id="2558560">bool</span>&nbsp;<span class="comment" id="2558565">//&nbsp;for&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2558605">func</span>&nbsp;<span class="op" id="2558610">(</span><span class="ident" id="2558611">v</span>&nbsp;<span class="ident" id="2558613">Value</span><span class="op" id="2558618">)</span>&nbsp;<span class="ident" id="2558620">call</span><span class="op" id="2558624">(</span><span class="ident" id="2558625">op</span>&nbsp;<span class="builtintype" id="2558628">string</span><span class="op" id="2558634">,</span>&nbsp;<span class="ident" id="2558636">in</span>&nbsp;<span class="op" id="2558639">[</span><span class="op" id="2558640">]</span><span class="ident" id="2558641">Value</span><span class="op" id="2558646">)</span>&nbsp;<span class="op" id="2558648">[</span><span class="op" id="2558649">]</span><span class="ident" id="2558650">Value</span>&nbsp;<span class="op" id="2558656">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2558659">//&nbsp;Get&nbsp;function&nbsp;pointer,&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2558691">t</span>&nbsp;<span class="op" id="2558693">:=</span>&nbsp;<span class="ident" id="2558696">v</span><span class="op" id="2558697">.</span><span class="ident" id="2558698">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2558703">var</span>&nbsp;<span class="op" id="2558707">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2558711">fn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2558720">unsafe</span><span class="op" id="2558726">.</span><span class="ident" id="2558727">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2558737">rcvr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2558746">Value</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2558754">rcvrtype</span>&nbsp;<span class="op" id="2558763">*</span><span class="ident" id="2558764">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2558771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2558774">if</span>&nbsp;<span class="ident" id="2558777">v</span><span class="op" id="2558778">.</span><span class="ident" id="2558779">flag</span><span class="op" id="2558783">&amp;</span><span class="ident" id="2558784">flagMethod</span>&nbsp;<span class="op" id="2558795">!=</span>&nbsp;<span class="num" id="2558798">0</span>&nbsp;<span class="op" id="2558800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2558804">rcvr</span>&nbsp;<span class="op" id="2558809">=</span>&nbsp;<span class="ident" id="2558811">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2558815">rcvrtype</span><span class="op" id="2558823">,</span>&nbsp;<span class="ident" id="2558825">t</span><span class="op" id="2558826">,</span>&nbsp;<span class="ident" id="2558828">fn</span>&nbsp;<span class="op" id="2558831">=</span>&nbsp;<span class="ident" id="2558833">methodReceiver</span><span class="op" id="2558847">(</span><span class="ident" id="2558848">op</span><span class="op" id="2558850">,</span>&nbsp;<span class="ident" id="2558852">v</span><span class="op" id="2558853">,</span>&nbsp;<span class="builtintype" id="2558855">int</span><span class="op" id="2558858">(</span><span class="ident" id="2558859">v</span><span class="op" id="2558860">.</span><span class="ident" id="2558861">flag</span><span class="op" id="2558865">)</span><span class="op" id="2558866">&gt;&gt;</span><span class="ident" id="2558868">flagMethodShift</span><span class="op" id="2558883">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2558886">}</span>&nbsp;<span class="keyword" id="2558888">else</span>&nbsp;<span class="keyword" id="2558893">if</span>&nbsp;<span class="ident" id="2558896">v</span><span class="op" id="2558897">.</span><span class="ident" id="2558898">flag</span><span class="op" id="2558902">&amp;</span><span class="ident" id="2558903">flagIndir</span>&nbsp;<span class="op" id="2558913">!=</span>&nbsp;<span class="num" id="2558916">0</span>&nbsp;<span class="op" id="2558918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2558922">fn</span>&nbsp;<span class="op" id="2558925">=</span>&nbsp;<span class="op" id="2558927">*</span><span class="op" id="2558928">(</span><span class="op" id="2558929">*</span><span class="ident" id="2558930">unsafe</span><span class="op" id="2558936">.</span><span class="ident" id="2558937">Pointer</span><span class="op" id="2558944">)</span><span class="op" id="2558945">(</span><span class="ident" id="2558946">v</span><span class="op" id="2558947">.</span><span class="ident" id="2558948">ptr</span><span class="op" id="2558951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2558954">}</span>&nbsp;<span class="keyword" id="2558956">else</span>&nbsp;<span class="op" id="2558961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2558965">fn</span>&nbsp;<span class="op" id="2558968">=</span>&nbsp;<span class="ident" id="2558970">v</span><span class="op" id="2558971">.</span><span class="ident" id="2558972">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2558977">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2558981">if</span>&nbsp;<span class="ident" id="2558984">fn</span>&nbsp;<span class="op" id="2558987">==</span>&nbsp;<span class="ident" id="2558990">nil</span>&nbsp;<span class="op" id="2558994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2558998">panic</span><span class="op" id="2559003">(</span><span class="string" id="2559004">&#34;reflect.Value.Call:&nbsp;call&nbsp;of&nbsp;nil&nbsp;function&#34;</span><span class="op" id="2559046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2559049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2559053">isSlice</span>&nbsp;<span class="op" id="2559061">:=</span>&nbsp;<span class="ident" id="2559064">op</span>&nbsp;<span class="op" id="2559067">==</span>&nbsp;<span class="string" id="2559070">&#34;CallSlice&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2559083">n</span>&nbsp;<span class="op" id="2559085">:=</span>&nbsp;<span class="ident" id="2559088">t</span><span class="op" id="2559089">.</span><span class="ident" id="2559090">NumIn</span><span class="op" id="2559095">(</span><span class="op" id="2559096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2559099">if</span>&nbsp;<span class="ident" id="2559102">isSlice</span>&nbsp;<span class="op" id="2559110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2559114">if</span>&nbsp;<span class="op" id="2559117">!</span><span class="ident" id="2559118">t</span><span class="op" id="2559119">.</span><span class="ident" id="2559120">IsVariadic</span><span class="op" id="2559130">(</span><span class="op" id="2559131">)</span>&nbsp;<span class="op" id="2559133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2559138">panic</span><span class="op" id="2559143">(</span><span class="string" id="2559144">&#34;reflect:&nbsp;CallSlice&nbsp;of&nbsp;non-variadic&nbsp;function&#34;</span><span class="op" id="2559189">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2559193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2559197">if</span>&nbsp;<span class="builtinfunc" id="2559200">len</span><span class="op" id="2559203">(</span><span class="ident" id="2559204">in</span><span class="op" id="2559206">)</span>&nbsp;<span class="op" id="2559208">&lt;</span>&nbsp;<span class="ident" id="2559210">n</span>&nbsp;<span class="op" id="2559212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2559217">panic</span><span class="op" id="2559222">(</span><span class="string" id="2559223">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2559272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2559276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2559280">if</span>&nbsp;<span class="builtinfunc" id="2559283">len</span><span class="op" id="2559286">(</span><span class="ident" id="2559287">in</span><span class="op" id="2559289">)</span>&nbsp;<span class="op" id="2559291">&gt;</span>&nbsp;<span class="ident" id="2559293">n</span>&nbsp;<span class="op" id="2559295">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2559300">panic</span><span class="op" id="2559305">(</span><span class="string" id="2559306">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2559356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2559360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2559363">}</span>&nbsp;<span class="keyword" id="2559365">else</span>&nbsp;<span class="op" id="2559370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2559374">if</span>&nbsp;<span class="ident" id="2559377">t</span><span class="op" id="2559378">.</span><span class="ident" id="2559379">IsVariadic</span><span class="op" id="2559389">(</span><span class="op" id="2559390">)</span>&nbsp;<span class="op" id="2559392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2559397">n</span><span class="op" id="2559398">--</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2559403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2559407">if</span>&nbsp;<span class="builtinfunc" id="2559410">len</span><span class="op" id="2559413">(</span><span class="ident" id="2559414">in</span><span class="op" id="2559416">)</span>&nbsp;<span class="op" id="2559418">&lt;</span>&nbsp;<span class="ident" id="2559420">n</span>&nbsp;<span class="op" id="2559422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2559427">panic</span><span class="op" id="2559432">(</span><span class="string" id="2559433">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2559477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2559481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2559485">if</span>&nbsp;<span class="op" id="2559488">!</span><span class="ident" id="2559489">t</span><span class="op" id="2559490">.</span><span class="ident" id="2559491">IsVariadic</span><span class="op" id="2559501">(</span><span class="op" id="2559502">)</span>&nbsp;<span class="op" id="2559504">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2559507">len</span><span class="op" id="2559510">(</span><span class="ident" id="2559511">in</span><span class="op" id="2559513">)</span>&nbsp;<span class="op" id="2559515">&gt;</span>&nbsp;<span class="ident" id="2559517">n</span>&nbsp;<span class="op" id="2559519">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2559524">panic</span><span class="op" id="2559529">(</span><span class="string" id="2559530">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2559575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2559579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2559582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2559585">for</span>&nbsp;<span class="ident" id="2559589">_</span><span class="op" id="2559590">,</span>&nbsp;<span class="ident" id="2559592">x</span>&nbsp;<span class="op" id="2559594">:=</span>&nbsp;<span class="keyword" id="2559597">range</span>&nbsp;<span class="ident" id="2559603">in</span>&nbsp;<span class="op" id="2559606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2559610">if</span>&nbsp;<span class="ident" id="2559613">x</span><span class="op" id="2559614">.</span><span class="ident" id="2559615">Kind</span><span class="op" id="2559619">(</span><span class="op" id="2559620">)</span>&nbsp;<span class="op" id="2559622">==</span>&nbsp;<span class="ident" id="2559625">Invalid</span>&nbsp;<span class="op" id="2559633">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2559638">panic</span><span class="op" id="2559643">(</span><span class="string" id="2559644">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2559656">+</span>&nbsp;<span class="ident" id="2559658">op</span>&nbsp;<span class="op" id="2559661">+</span>&nbsp;<span class="string" id="2559663">&#34;&nbsp;using&nbsp;zero&nbsp;Value&nbsp;argument&#34;</span><span class="op" id="2559691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2559695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2559698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2559701">for</span>&nbsp;<span class="ident" id="2559705">i</span>&nbsp;<span class="op" id="2559707">:=</span>&nbsp;<span class="num" id="2559710">0</span><span class="op" id="2559711">;</span>&nbsp;<span class="ident" id="2559713">i</span>&nbsp;<span class="op" id="2559715">&lt;</span>&nbsp;<span class="ident" id="2559717">n</span><span class="op" id="2559718">;</span>&nbsp;<span class="ident" id="2559720">i</span><span class="op" id="2559721">++</span>&nbsp;<span class="op" id="2559724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2559728">if</span>&nbsp;<span class="ident" id="2559731">xt</span><span class="op" id="2559733">,</span>&nbsp;<span class="ident" id="2559735">targ</span>&nbsp;<span class="op" id="2559740">:=</span>&nbsp;<span class="ident" id="2559743">in</span><span class="op" id="2559745">[</span><span class="ident" id="2559746">i</span><span class="op" id="2559747">]</span><span class="op" id="2559748">.</span><span class="ident" id="2559749">Type</span><span class="op" id="2559753">(</span><span class="op" id="2559754">)</span><span class="op" id="2559755">,</span>&nbsp;<span class="ident" id="2559757">t</span><span class="op" id="2559758">.</span><span class="ident" id="2559759">In</span><span class="op" id="2559761">(</span><span class="ident" id="2559762">i</span><span class="op" id="2559763">)</span><span class="op" id="2559764">;</span>&nbsp;<span class="op" id="2559766">!</span><span class="ident" id="2559767">xt</span><span class="op" id="2559769">.</span><span class="ident" id="2559770">AssignableTo</span><span class="op" id="2559782">(</span><span class="ident" id="2559783">targ</span><span class="op" id="2559787">)</span>&nbsp;<span class="op" id="2559789">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2559794">panic</span><span class="op" id="2559799">(</span><span class="string" id="2559800">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2559812">+</span>&nbsp;<span class="ident" id="2559814">op</span>&nbsp;<span class="op" id="2559817">+</span>&nbsp;<span class="string" id="2559819">&#34;&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2559829">+</span>&nbsp;<span class="ident" id="2559831">xt</span><span class="op" id="2559833">.</span><span class="ident" id="2559834">String</span><span class="op" id="2559840">(</span><span class="op" id="2559841">)</span>&nbsp;<span class="op" id="2559843">+</span>&nbsp;<span class="string" id="2559845">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2559857">+</span>&nbsp;<span class="ident" id="2559859">targ</span><span class="op" id="2559863">.</span><span class="ident" id="2559864">String</span><span class="op" id="2559870">(</span><span class="op" id="2559871">)</span><span class="op" id="2559872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2559876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2559879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2559882">if</span>&nbsp;<span class="op" id="2559885">!</span><span class="ident" id="2559886">isSlice</span>&nbsp;<span class="op" id="2559894">&amp;&amp;</span>&nbsp;<span class="ident" id="2559897">t</span><span class="op" id="2559898">.</span><span class="ident" id="2559899">IsVariadic</span><span class="op" id="2559909">(</span><span class="op" id="2559910">)</span>&nbsp;<span class="op" id="2559912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2559916">//&nbsp;prepare&nbsp;slice&nbsp;for&nbsp;remaining&nbsp;values</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2559956">m</span>&nbsp;<span class="op" id="2559958">:=</span>&nbsp;<span class="builtinfunc" id="2559961">len</span><span class="op" id="2559964">(</span><span class="ident" id="2559965">in</span><span class="op" id="2559967">)</span>&nbsp;<span class="op" id="2559969">-</span>&nbsp;<span class="ident" id="2559971">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2559975">slice</span>&nbsp;<span class="op" id="2559981">:=</span>&nbsp;<span class="ident" id="2559984">MakeSlice</span><span class="op" id="2559993">(</span><span class="ident" id="2559994">t</span><span class="op" id="2559995">.</span><span class="ident" id="2559996">In</span><span class="op" id="2559998">(</span><span class="ident" id="2559999">n</span><span class="op" id="2560000">)</span><span class="op" id="2560001">,</span>&nbsp;<span class="ident" id="2560003">m</span><span class="op" id="2560004">,</span>&nbsp;<span class="ident" id="2560006">m</span><span class="op" id="2560007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560011">elem</span>&nbsp;<span class="op" id="2560016">:=</span>&nbsp;<span class="ident" id="2560019">t</span><span class="op" id="2560020">.</span><span class="ident" id="2560021">In</span><span class="op" id="2560023">(</span><span class="ident" id="2560024">n</span><span class="op" id="2560025">)</span><span class="op" id="2560026">.</span><span class="ident" id="2560027">Elem</span><span class="op" id="2560031">(</span><span class="op" id="2560032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2560036">for</span>&nbsp;<span class="ident" id="2560040">i</span>&nbsp;<span class="op" id="2560042">:=</span>&nbsp;<span class="num" id="2560045">0</span><span class="op" id="2560046">;</span>&nbsp;<span class="ident" id="2560048">i</span>&nbsp;<span class="op" id="2560050">&lt;</span>&nbsp;<span class="ident" id="2560052">m</span><span class="op" id="2560053">;</span>&nbsp;<span class="ident" id="2560055">i</span><span class="op" id="2560056">++</span>&nbsp;<span class="op" id="2560059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560064">x</span>&nbsp;<span class="op" id="2560066">:=</span>&nbsp;<span class="ident" id="2560069">in</span><span class="op" id="2560071">[</span><span class="ident" id="2560072">n</span><span class="op" id="2560073">+</span><span class="ident" id="2560074">i</span><span class="op" id="2560075">]</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2560080">if</span>&nbsp;<span class="ident" id="2560083">xt</span>&nbsp;<span class="op" id="2560086">:=</span>&nbsp;<span class="ident" id="2560089">x</span><span class="op" id="2560090">.</span><span class="ident" id="2560091">Type</span><span class="op" id="2560095">(</span><span class="op" id="2560096">)</span><span class="op" id="2560097">;</span>&nbsp;<span class="op" id="2560099">!</span><span class="ident" id="2560100">xt</span><span class="op" id="2560102">.</span><span class="ident" id="2560103">AssignableTo</span><span class="op" id="2560115">(</span><span class="ident" id="2560116">elem</span><span class="op" id="2560120">)</span>&nbsp;<span class="op" id="2560122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2560128">panic</span><span class="op" id="2560133">(</span><span class="string" id="2560134">&#34;reflect:&nbsp;cannot&nbsp;use&nbsp;&#34;</span>&nbsp;<span class="op" id="2560157">+</span>&nbsp;<span class="ident" id="2560159">xt</span><span class="op" id="2560161">.</span><span class="ident" id="2560162">String</span><span class="op" id="2560168">(</span><span class="op" id="2560169">)</span>&nbsp;<span class="op" id="2560171">+</span>&nbsp;<span class="string" id="2560173">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2560185">+</span>&nbsp;<span class="ident" id="2560187">elem</span><span class="op" id="2560191">.</span><span class="ident" id="2560192">String</span><span class="op" id="2560198">(</span><span class="op" id="2560199">)</span>&nbsp;<span class="op" id="2560201">+</span>&nbsp;<span class="string" id="2560203">&#34;&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="2560210">+</span>&nbsp;<span class="ident" id="2560212">op</span><span class="op" id="2560214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2560219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560224">slice</span><span class="op" id="2560229">.</span><span class="ident" id="2560230">Index</span><span class="op" id="2560235">(</span><span class="ident" id="2560236">i</span><span class="op" id="2560237">)</span><span class="op" id="2560238">.</span><span class="ident" id="2560239">Set</span><span class="op" id="2560242">(</span><span class="ident" id="2560243">x</span><span class="op" id="2560244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2560248">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560252">origIn</span>&nbsp;<span class="op" id="2560259">:=</span>&nbsp;<span class="ident" id="2560262">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560267">in</span>&nbsp;<span class="op" id="2560270">=</span>&nbsp;<span class="builtinfunc" id="2560272">make</span><span class="op" id="2560276">(</span><span class="op" id="2560277">[</span><span class="op" id="2560278">]</span><span class="ident" id="2560279">Value</span><span class="op" id="2560284">,</span>&nbsp;<span class="ident" id="2560286">n</span><span class="op" id="2560287">+</span><span class="num" id="2560288">1</span><span class="op" id="2560289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2560293">copy</span><span class="op" id="2560297">(</span><span class="ident" id="2560298">in</span><span class="op" id="2560300">[</span><span class="op" id="2560301">:</span><span class="ident" id="2560302">n</span><span class="op" id="2560303">]</span><span class="op" id="2560304">,</span>&nbsp;<span class="ident" id="2560306">origIn</span><span class="op" id="2560312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560316">in</span><span class="op" id="2560318">[</span><span class="ident" id="2560319">n</span><span class="op" id="2560320">]</span>&nbsp;<span class="op" id="2560322">=</span>&nbsp;<span class="ident" id="2560324">slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2560331">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560335">nin</span>&nbsp;<span class="op" id="2560339">:=</span>&nbsp;<span class="builtinfunc" id="2560342">len</span><span class="op" id="2560345">(</span><span class="ident" id="2560346">in</span><span class="op" id="2560348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2560351">if</span>&nbsp;<span class="ident" id="2560354">nin</span>&nbsp;<span class="op" id="2560358">!=</span>&nbsp;<span class="ident" id="2560361">t</span><span class="op" id="2560362">.</span><span class="ident" id="2560363">NumIn</span><span class="op" id="2560368">(</span><span class="op" id="2560369">)</span>&nbsp;<span class="op" id="2560371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2560375">panic</span><span class="op" id="2560380">(</span><span class="string" id="2560381">&#34;reflect.Value.Call:&nbsp;wrong&nbsp;argument&nbsp;count&#34;</span><span class="op" id="2560423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2560426">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560429">nout</span>&nbsp;<span class="op" id="2560434">:=</span>&nbsp;<span class="ident" id="2560437">t</span><span class="op" id="2560438">.</span><span class="ident" id="2560439">NumOut</span><span class="op" id="2560445">(</span><span class="op" id="2560446">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2560450">//&nbsp;Compute&nbsp;frame&nbsp;type,&nbsp;allocate&nbsp;a&nbsp;chunk&nbsp;of&nbsp;memory&nbsp;for&nbsp;frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560511">frametype</span><span class="op" id="2560520">,</span>&nbsp;<span class="ident" id="2560522">_</span><span class="op" id="2560523">,</span>&nbsp;<span class="ident" id="2560525">retOffset</span><span class="op" id="2560534">,</span>&nbsp;<span class="ident" id="2560536">_</span>&nbsp;<span class="op" id="2560538">:=</span>&nbsp;<span class="ident" id="2560541">funcLayout</span><span class="op" id="2560551">(</span><span class="ident" id="2560552">t</span><span class="op" id="2560553">,</span>&nbsp;<span class="ident" id="2560555">rcvrtype</span><span class="op" id="2560563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560566">args</span>&nbsp;<span class="op" id="2560571">:=</span>&nbsp;<span class="ident" id="2560574">unsafe_New</span><span class="op" id="2560584">(</span><span class="ident" id="2560585">frametype</span><span class="op" id="2560594">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560597">off</span>&nbsp;<span class="op" id="2560601">:=</span>&nbsp;<span class="builtintype" id="2560604">uintptr</span><span class="op" id="2560611">(</span><span class="num" id="2560612">0</span><span class="op" id="2560613">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2560617">//&nbsp;Copy&nbsp;inputs&nbsp;into&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2560644">if</span>&nbsp;<span class="ident" id="2560647">rcvrtype</span>&nbsp;<span class="op" id="2560656">!=</span>&nbsp;<span class="ident" id="2560659">nil</span>&nbsp;<span class="op" id="2560663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560667">storeRcvr</span><span class="op" id="2560676">(</span><span class="ident" id="2560677">rcvr</span><span class="op" id="2560681">,</span>&nbsp;<span class="ident" id="2560683">args</span><span class="op" id="2560687">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560691">off</span>&nbsp;<span class="op" id="2560695">=</span>&nbsp;<span class="ident" id="2560697">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2560706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2560709">for</span>&nbsp;<span class="ident" id="2560713">i</span><span class="op" id="2560714">,</span>&nbsp;<span class="ident" id="2560716">v</span>&nbsp;<span class="op" id="2560718">:=</span>&nbsp;<span class="keyword" id="2560721">range</span>&nbsp;<span class="ident" id="2560727">in</span>&nbsp;<span class="op" id="2560730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560734">v</span><span class="op" id="2560735">.</span><span class="ident" id="2560736">mustBeExported</span><span class="op" id="2560750">(</span><span class="op" id="2560751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560755">targ</span>&nbsp;<span class="op" id="2560760">:=</span>&nbsp;<span class="ident" id="2560763">t</span><span class="op" id="2560764">.</span><span class="ident" id="2560765">In</span><span class="op" id="2560767">(</span><span class="ident" id="2560768">i</span><span class="op" id="2560769">)</span><span class="op" id="2560770">.</span><span class="op" id="2560771">(</span><span class="op" id="2560772">*</span><span class="ident" id="2560773">rtype</span><span class="op" id="2560778">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560782">a</span>&nbsp;<span class="op" id="2560784">:=</span>&nbsp;<span class="builtintype" id="2560787">uintptr</span><span class="op" id="2560794">(</span><span class="ident" id="2560795">targ</span><span class="op" id="2560799">.</span><span class="ident" id="2560800">align</span><span class="op" id="2560805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560809">off</span>&nbsp;<span class="op" id="2560813">=</span>&nbsp;<span class="op" id="2560815">(</span><span class="ident" id="2560816">off</span>&nbsp;<span class="op" id="2560820">+</span>&nbsp;<span class="ident" id="2560822">a</span>&nbsp;<span class="op" id="2560824">-</span>&nbsp;<span class="num" id="2560826">1</span><span class="op" id="2560827">)</span>&nbsp;<span class="op" id="2560829">&amp;^</span>&nbsp;<span class="op" id="2560832">(</span><span class="ident" id="2560833">a</span>&nbsp;<span class="op" id="2560835">-</span>&nbsp;<span class="num" id="2560837">1</span><span class="op" id="2560838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560842">n</span>&nbsp;<span class="op" id="2560844">:=</span>&nbsp;<span class="ident" id="2560847">targ</span><span class="op" id="2560851">.</span><span class="ident" id="2560852">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560859">addr</span>&nbsp;<span class="op" id="2560864">:=</span>&nbsp;<span class="ident" id="2560867">unsafe</span><span class="op" id="2560873">.</span><span class="ident" id="2560874">Pointer</span><span class="op" id="2560881">(</span><span class="builtintype" id="2560882">uintptr</span><span class="op" id="2560889">(</span><span class="ident" id="2560890">args</span><span class="op" id="2560894">)</span>&nbsp;<span class="op" id="2560896">+</span>&nbsp;<span class="ident" id="2560898">off</span><span class="op" id="2560901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560905">v</span>&nbsp;<span class="op" id="2560907">=</span>&nbsp;<span class="ident" id="2560909">v</span><span class="op" id="2560910">.</span><span class="ident" id="2560911">assignTo</span><span class="op" id="2560919">(</span><span class="string" id="2560920">&#34;reflect.Value.Call&#34;</span><span class="op" id="2560940">,</span>&nbsp;<span class="ident" id="2560942">targ</span><span class="op" id="2560946">,</span>&nbsp;<span class="ident" id="2560948">addr</span><span class="op" id="2560952">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2560956">if</span>&nbsp;<span class="ident" id="2560959">v</span><span class="op" id="2560960">.</span><span class="ident" id="2560961">flag</span><span class="op" id="2560965">&amp;</span><span class="ident" id="2560966">flagIndir</span>&nbsp;<span class="op" id="2560976">!=</span>&nbsp;<span class="num" id="2560979">0</span>&nbsp;<span class="op" id="2560981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2560986">memmove</span><span class="op" id="2560993">(</span><span class="ident" id="2560994">addr</span><span class="op" id="2560998">,</span>&nbsp;<span class="ident" id="2561000">v</span><span class="op" id="2561001">.</span><span class="ident" id="2561002">ptr</span><span class="op" id="2561005">,</span>&nbsp;<span class="ident" id="2561007">n</span><span class="op" id="2561008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2561012">}</span>&nbsp;<span class="keyword" id="2561014">else</span>&nbsp;<span class="op" id="2561019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2561024">*</span><span class="op" id="2561025">(</span><span class="op" id="2561026">*</span><span class="ident" id="2561027">unsafe</span><span class="op" id="2561033">.</span><span class="ident" id="2561034">Pointer</span><span class="op" id="2561041">)</span><span class="op" id="2561042">(</span><span class="ident" id="2561043">addr</span><span class="op" id="2561047">)</span>&nbsp;<span class="op" id="2561049">=</span>&nbsp;<span class="ident" id="2561051">v</span><span class="op" id="2561052">.</span><span class="ident" id="2561053">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2561059">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2561063">off</span>&nbsp;<span class="op" id="2561067">+=</span>&nbsp;<span class="ident" id="2561070">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2561073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2561077">//&nbsp;Call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2561087">call</span><span class="op" id="2561091">(</span><span class="ident" id="2561092">fn</span><span class="op" id="2561094">,</span>&nbsp;<span class="ident" id="2561096">args</span><span class="op" id="2561100">,</span>&nbsp;<span class="builtintype" id="2561102">uint32</span><span class="op" id="2561108">(</span><span class="ident" id="2561109">frametype</span><span class="op" id="2561118">.</span><span class="ident" id="2561119">size</span><span class="op" id="2561123">)</span><span class="op" id="2561124">,</span>&nbsp;<span class="builtintype" id="2561126">uint32</span><span class="op" id="2561132">(</span><span class="ident" id="2561133">retOffset</span><span class="op" id="2561142">)</span><span class="op" id="2561143">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2561147">//&nbsp;For&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2561188">if</span>&nbsp;<span class="ident" id="2561191">callGC</span>&nbsp;<span class="op" id="2561198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2561202">runtime</span><span class="op" id="2561209">.</span><span class="ident" id="2561210">GC</span><span class="op" id="2561212">(</span><span class="op" id="2561213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2561216">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2561220">//&nbsp;Copy&nbsp;return&nbsp;values&nbsp;out&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2561256">ret</span>&nbsp;<span class="op" id="2561260">:=</span>&nbsp;<span class="builtinfunc" id="2561263">make</span><span class="op" id="2561267">(</span><span class="op" id="2561268">[</span><span class="op" id="2561269">]</span><span class="ident" id="2561270">Value</span><span class="op" id="2561275">,</span>&nbsp;<span class="ident" id="2561277">nout</span><span class="op" id="2561281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2561284">off</span>&nbsp;<span class="op" id="2561288">=</span>&nbsp;<span class="ident" id="2561290">retOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2561301">for</span>&nbsp;<span class="ident" id="2561305">i</span>&nbsp;<span class="op" id="2561307">:=</span>&nbsp;<span class="num" id="2561310">0</span><span class="op" id="2561311">;</span>&nbsp;<span class="ident" id="2561313">i</span>&nbsp;<span class="op" id="2561315">&lt;</span>&nbsp;<span class="ident" id="2561317">nout</span><span class="op" id="2561321">;</span>&nbsp;<span class="ident" id="2561323">i</span><span class="op" id="2561324">++</span>&nbsp;<span class="op" id="2561327">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2561331">tv</span>&nbsp;<span class="op" id="2561334">:=</span>&nbsp;<span class="ident" id="2561337">t</span><span class="op" id="2561338">.</span><span class="ident" id="2561339">Out</span><span class="op" id="2561342">(</span><span class="ident" id="2561343">i</span><span class="op" id="2561344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2561348">a</span>&nbsp;<span class="op" id="2561350">:=</span>&nbsp;<span class="builtintype" id="2561353">uintptr</span><span class="op" id="2561360">(</span><span class="ident" id="2561361">tv</span><span class="op" id="2561363">.</span><span class="ident" id="2561364">Align</span><span class="op" id="2561369">(</span><span class="op" id="2561370">)</span><span class="op" id="2561371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2561375">off</span>&nbsp;<span class="op" id="2561379">=</span>&nbsp;<span class="op" id="2561381">(</span><span class="ident" id="2561382">off</span>&nbsp;<span class="op" id="2561386">+</span>&nbsp;<span class="ident" id="2561388">a</span>&nbsp;<span class="op" id="2561390">-</span>&nbsp;<span class="num" id="2561392">1</span><span class="op" id="2561393">)</span>&nbsp;<span class="op" id="2561395">&amp;^</span>&nbsp;<span class="op" id="2561398">(</span><span class="ident" id="2561399">a</span>&nbsp;<span class="op" id="2561401">-</span>&nbsp;<span class="num" id="2561403">1</span><span class="op" id="2561404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2561408">fl</span>&nbsp;<span class="op" id="2561411">:=</span>&nbsp;<span class="ident" id="2561414">flagIndir</span>&nbsp;<span class="op" id="2561424">|</span>&nbsp;<span class="ident" id="2561426">flag</span><span class="op" id="2561430">(</span><span class="ident" id="2561431">tv</span><span class="op" id="2561433">.</span><span class="ident" id="2561434">Kind</span><span class="op" id="2561438">(</span><span class="op" id="2561439">)</span><span class="op" id="2561440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2561444">ret</span><span class="op" id="2561447">[</span><span class="ident" id="2561448">i</span><span class="op" id="2561449">]</span>&nbsp;<span class="op" id="2561451">=</span>&nbsp;<span class="ident" id="2561453">Value</span><span class="op" id="2561458">{</span><span class="ident" id="2561459">tv</span><span class="op" id="2561461">.</span><span class="ident" id="2561462">common</span><span class="op" id="2561468">(</span><span class="op" id="2561469">)</span><span class="op" id="2561470">,</span>&nbsp;<span class="ident" id="2561472">unsafe</span><span class="op" id="2561478">.</span><span class="ident" id="2561479">Pointer</span><span class="op" id="2561486">(</span><span class="builtintype" id="2561487">uintptr</span><span class="op" id="2561494">(</span><span class="ident" id="2561495">args</span><span class="op" id="2561499">)</span>&nbsp;<span class="op" id="2561501">+</span>&nbsp;<span class="ident" id="2561503">off</span><span class="op" id="2561506">)</span><span class="op" id="2561507">,</span>&nbsp;<span class="ident" id="2561509">fl</span><span class="op" id="2561511">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2561515">off</span>&nbsp;<span class="op" id="2561519">+=</span>&nbsp;<span class="ident" id="2561522">tv</span><span class="op" id="2561524">.</span><span class="ident" id="2561525">Size</span><span class="op" id="2561529">(</span><span class="op" id="2561530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2561533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2561537">return</span>&nbsp;<span class="ident" id="2561544">ret</span><br>
<span class="lineno"></span><span class="op" id="2561548">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="2561551">//&nbsp;callReflect&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function</span><br>
<span class="lineno"></span><span class="comment" id="2561612">//&nbsp;returned&nbsp;by&nbsp;MakeFunc.&nbsp;In&nbsp;many&nbsp;ways&nbsp;it&nbsp;is&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2561676">//&nbsp;method&nbsp;Value.call&nbsp;above.&nbsp;The&nbsp;method&nbsp;above&nbsp;converts&nbsp;a&nbsp;call&nbsp;using&nbsp;Values</span><br>
<span class="lineno"></span><span class="comment" id="2561750">//&nbsp;into&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument&nbsp;frame,&nbsp;while</span><br>
<span class="lineno">445</span><span class="comment" id="2561817">//&nbsp;callReflect&nbsp;converts&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument</span><br>
<span class="lineno"></span><span class="comment" id="2561887">//&nbsp;frame&nbsp;into&nbsp;a&nbsp;call&nbsp;using&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2561922">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;call&nbsp;method&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2561993">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;MakeFunc&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2562060">//</span><br>
<span class="lineno">450</span><span class="comment" id="2562063">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno"></span><span class="comment" id="2562139">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2562211">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callReflect&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2562283">func</span>&nbsp;<span class="ident" id="2562288">callReflect</span><span class="op" id="2562299">(</span><span class="ident" id="2562300">ctxt</span>&nbsp;<span class="op" id="2562305">*</span><span class="ident" id="2562306">makeFuncImpl</span><span class="op" id="2562318">,</span>&nbsp;<span class="ident" id="2562320">frame</span>&nbsp;<span class="ident" id="2562326">unsafe</span><span class="op" id="2562332">.</span><span class="ident" id="2562333">Pointer</span><span class="op" id="2562340">)</span>&nbsp;<span class="op" id="2562342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2562345">ftyp</span>&nbsp;<span class="op" id="2562350">:=</span>&nbsp;<span class="ident" id="2562353">ctxt</span><span class="op" id="2562357">.</span><span class="ident" id="2562358">typ</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2562363">f</span>&nbsp;<span class="op" id="2562365">:=</span>&nbsp;<span class="ident" id="2562368">ctxt</span><span class="op" id="2562372">.</span><span class="ident" id="2562373">fn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2562378">//&nbsp;Copy&nbsp;argument&nbsp;frame&nbsp;into&nbsp;Values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2562415">ptr</span>&nbsp;<span class="op" id="2562419">:=</span>&nbsp;<span class="ident" id="2562422">frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2562429">off</span>&nbsp;<span class="op" id="2562433">:=</span>&nbsp;<span class="builtintype" id="2562436">uintptr</span><span class="op" id="2562443">(</span><span class="num" id="2562444">0</span><span class="op" id="2562445">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2562448">in</span>&nbsp;<span class="op" id="2562451">:=</span>&nbsp;<span class="builtinfunc" id="2562454">make</span><span class="op" id="2562458">(</span><span class="op" id="2562459">[</span><span class="op" id="2562460">]</span><span class="ident" id="2562461">Value</span><span class="op" id="2562466">,</span>&nbsp;<span class="num" id="2562468">0</span><span class="op" id="2562469">,</span>&nbsp;<span class="builtinfunc" id="2562471">len</span><span class="op" id="2562474">(</span><span class="ident" id="2562475">ftyp</span><span class="op" id="2562479">.</span><span class="ident" id="2562480">in</span><span class="op" id="2562482">)</span><span class="op" id="2562483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2562486">for</span>&nbsp;<span class="ident" id="2562490">_</span><span class="op" id="2562491">,</span>&nbsp;<span class="ident" id="2562493">arg</span>&nbsp;<span class="op" id="2562497">:=</span>&nbsp;<span class="keyword" id="2562500">range</span>&nbsp;<span class="ident" id="2562506">ftyp</span><span class="op" id="2562510">.</span><span class="ident" id="2562511">in</span>&nbsp;<span class="op" id="2562514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2562518">typ</span>&nbsp;<span class="op" id="2562522">:=</span>&nbsp;<span class="ident" id="2562525">arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2562531">off</span>&nbsp;<span class="op" id="2562535">+=</span>&nbsp;<span class="op" id="2562538">-</span><span class="ident" id="2562539">off</span>&nbsp;<span class="op" id="2562543">&amp;</span>&nbsp;<span class="builtintype" id="2562545">uintptr</span><span class="op" id="2562552">(</span><span class="ident" id="2562553">typ</span><span class="op" id="2562556">.</span><span class="ident" id="2562557">align</span><span class="op" id="2562562">-</span><span class="num" id="2562563">1</span><span class="op" id="2562564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2562568">addr</span>&nbsp;<span class="op" id="2562573">:=</span>&nbsp;<span class="ident" id="2562576">unsafe</span><span class="op" id="2562582">.</span><span class="ident" id="2562583">Pointer</span><span class="op" id="2562590">(</span><span class="builtintype" id="2562591">uintptr</span><span class="op" id="2562598">(</span><span class="ident" id="2562599">ptr</span><span class="op" id="2562602">)</span>&nbsp;<span class="op" id="2562604">+</span>&nbsp;<span class="ident" id="2562606">off</span><span class="op" id="2562609">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2562613">v</span>&nbsp;<span class="op" id="2562615">:=</span>&nbsp;<span class="ident" id="2562618">Value</span><span class="op" id="2562623">{</span><span class="ident" id="2562624">typ</span><span class="op" id="2562627">,</span>&nbsp;<span class="ident" id="2562629">nil</span><span class="op" id="2562632">,</span>&nbsp;<span class="ident" id="2562634">flag</span><span class="op" id="2562638">(</span><span class="ident" id="2562639">typ</span><span class="op" id="2562642">.</span><span class="ident" id="2562643">Kind</span><span class="op" id="2562647">(</span><span class="op" id="2562648">)</span><span class="op" id="2562649">)</span><span class="op" id="2562650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2562654">if</span>&nbsp;<span class="ident" id="2562657">ifaceIndir</span><span class="op" id="2562667">(</span><span class="ident" id="2562668">typ</span><span class="op" id="2562671">)</span>&nbsp;<span class="op" id="2562673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2562678">//&nbsp;value&nbsp;cannot&nbsp;be&nbsp;inlined&nbsp;in&nbsp;interface&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2562727">//&nbsp;Must&nbsp;make&nbsp;a&nbsp;copy,&nbsp;because&nbsp;f&nbsp;might&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;it,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2562791">//&nbsp;and&nbsp;we&nbsp;cannot&nbsp;let&nbsp;f&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;stack&nbsp;frame</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2562853">//&nbsp;after&nbsp;this&nbsp;function&nbsp;returns,&nbsp;not&nbsp;even&nbsp;a&nbsp;read-only&nbsp;reference.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2562920">v</span><span class="op" id="2562921">.</span><span class="ident" id="2562922">ptr</span>&nbsp;<span class="op" id="2562926">=</span>&nbsp;<span class="ident" id="2562928">unsafe_New</span><span class="op" id="2562938">(</span><span class="ident" id="2562939">typ</span><span class="op" id="2562942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2562947">memmove</span><span class="op" id="2562954">(</span><span class="ident" id="2562955">v</span><span class="op" id="2562956">.</span><span class="ident" id="2562957">ptr</span><span class="op" id="2562960">,</span>&nbsp;<span class="ident" id="2562962">addr</span><span class="op" id="2562966">,</span>&nbsp;<span class="ident" id="2562968">typ</span><span class="op" id="2562971">.</span><span class="ident" id="2562972">size</span><span class="op" id="2562976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2562981">v</span><span class="op" id="2562982">.</span><span class="ident" id="2562983">flag</span>&nbsp;<span class="op" id="2562988">|=</span>&nbsp;<span class="ident" id="2562991">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2563003">}</span>&nbsp;<span class="keyword" id="2563005">else</span>&nbsp;<span class="op" id="2563010">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2563015">v</span><span class="op" id="2563016">.</span><span class="ident" id="2563017">ptr</span>&nbsp;<span class="op" id="2563021">=</span>&nbsp;<span class="op" id="2563023">*</span><span class="op" id="2563024">(</span><span class="op" id="2563025">*</span><span class="ident" id="2563026">unsafe</span><span class="op" id="2563032">.</span><span class="ident" id="2563033">Pointer</span><span class="op" id="2563040">)</span><span class="op" id="2563041">(</span><span class="ident" id="2563042">addr</span><span class="op" id="2563046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2563050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2563054">in</span>&nbsp;<span class="op" id="2563057">=</span>&nbsp;<span class="builtinfunc" id="2563059">append</span><span class="op" id="2563065">(</span><span class="ident" id="2563066">in</span><span class="op" id="2563068">,</span>&nbsp;<span class="ident" id="2563070">v</span><span class="op" id="2563071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2563075">off</span>&nbsp;<span class="op" id="2563079">+=</span>&nbsp;<span class="ident" id="2563082">typ</span><span class="op" id="2563085">.</span><span class="ident" id="2563086">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2563092">}</span><br>
<span class="lineno">480</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2563096">//&nbsp;Call&nbsp;underlying&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2563126">out</span>&nbsp;<span class="op" id="2563130">:=</span>&nbsp;<span class="ident" id="2563133">f</span><span class="op" id="2563134">(</span><span class="ident" id="2563135">in</span><span class="op" id="2563137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2563140">if</span>&nbsp;<span class="builtinfunc" id="2563143">len</span><span class="op" id="2563146">(</span><span class="ident" id="2563147">out</span><span class="op" id="2563150">)</span>&nbsp;<span class="op" id="2563152">!=</span>&nbsp;<span class="builtinfunc" id="2563155">len</span><span class="op" id="2563158">(</span><span class="ident" id="2563159">ftyp</span><span class="op" id="2563163">.</span><span class="ident" id="2563164">out</span><span class="op" id="2563167">)</span>&nbsp;<span class="op" id="2563169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2563173">panic</span><span class="op" id="2563178">(</span><span class="string" id="2563179">&#34;reflect:&nbsp;wrong&nbsp;return&nbsp;count&nbsp;from&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&#34;</span><span class="op" id="2563242">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2563245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2563249">//&nbsp;Copy&nbsp;results&nbsp;back&nbsp;into&nbsp;argument&nbsp;frame.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2563292">if</span>&nbsp;<span class="builtinfunc" id="2563295">len</span><span class="op" id="2563298">(</span><span class="ident" id="2563299">ftyp</span><span class="op" id="2563303">.</span><span class="ident" id="2563304">out</span><span class="op" id="2563307">)</span>&nbsp;<span class="op" id="2563309">&gt;</span>&nbsp;<span class="num" id="2563311">0</span>&nbsp;<span class="op" id="2563313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2563317">off</span>&nbsp;<span class="op" id="2563321">+=</span>&nbsp;<span class="op" id="2563324">-</span><span class="ident" id="2563325">off</span>&nbsp;<span class="op" id="2563329">&amp;</span>&nbsp;<span class="op" id="2563331">(</span><span class="ident" id="2563332">ptrSize</span>&nbsp;<span class="op" id="2563340">-</span>&nbsp;<span class="num" id="2563342">1</span><span class="op" id="2563343">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2563347">if</span>&nbsp;<span class="ident" id="2563350">runtime</span><span class="op" id="2563357">.</span><span class="ident" id="2563358">GOARCH</span>&nbsp;<span class="op" id="2563365">==</span>&nbsp;<span class="string" id="2563368">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2563379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2563384">off</span>&nbsp;<span class="op" id="2563388">=</span>&nbsp;<span class="ident" id="2563390">align</span><span class="op" id="2563395">(</span><span class="ident" id="2563396">off</span><span class="op" id="2563399">,</span>&nbsp;<span class="num" id="2563401">8</span><span class="op" id="2563402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2563406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2563410">for</span>&nbsp;<span class="ident" id="2563414">i</span><span class="op" id="2563415">,</span>&nbsp;<span class="ident" id="2563417">arg</span>&nbsp;<span class="op" id="2563421">:=</span>&nbsp;<span class="keyword" id="2563424">range</span>&nbsp;<span class="ident" id="2563430">ftyp</span><span class="op" id="2563434">.</span><span class="ident" id="2563435">out</span>&nbsp;<span class="op" id="2563439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2563444">typ</span>&nbsp;<span class="op" id="2563448">:=</span>&nbsp;<span class="ident" id="2563451">arg</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2563458">v</span>&nbsp;<span class="op" id="2563460">:=</span>&nbsp;<span class="ident" id="2563463">out</span><span class="op" id="2563466">[</span><span class="ident" id="2563467">i</span><span class="op" id="2563468">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2563473">if</span>&nbsp;<span class="ident" id="2563476">v</span><span class="op" id="2563477">.</span><span class="ident" id="2563478">typ</span>&nbsp;<span class="op" id="2563482">!=</span>&nbsp;<span class="ident" id="2563485">typ</span>&nbsp;<span class="op" id="2563489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2563495">panic</span><span class="op" id="2563500">(</span><span class="string" id="2563501">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2563548">+</span>&nbsp;<span class="ident" id="2563550">funcName</span><span class="op" id="2563558">(</span><span class="ident" id="2563559">f</span><span class="op" id="2563560">)</span>&nbsp;<span class="op" id="2563562">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2563569">&#34;&nbsp;returned&nbsp;wrong&nbsp;type:&nbsp;have&nbsp;&#34;</span>&nbsp;<span class="op" id="2563599">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2563606">out</span><span class="op" id="2563609">[</span><span class="ident" id="2563610">i</span><span class="op" id="2563611">]</span><span class="op" id="2563612">.</span><span class="ident" id="2563613">typ</span><span class="op" id="2563616">.</span><span class="ident" id="2563617">String</span><span class="op" id="2563623">(</span><span class="op" id="2563624">)</span>&nbsp;<span class="op" id="2563626">+</span>&nbsp;<span class="string" id="2563628">&#34;&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2563636">+</span>&nbsp;<span class="ident" id="2563638">typ</span><span class="op" id="2563641">.</span><span class="ident" id="2563642">String</span><span class="op" id="2563648">(</span><span class="op" id="2563649">)</span><span class="op" id="2563650">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2563655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2563660">if</span>&nbsp;<span class="ident" id="2563663">v</span><span class="op" id="2563664">.</span><span class="ident" id="2563665">flag</span><span class="op" id="2563669">&amp;</span><span class="ident" id="2563670">flagRO</span>&nbsp;<span class="op" id="2563677">!=</span>&nbsp;<span class="num" id="2563680">0</span>&nbsp;<span class="op" id="2563682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2563688">panic</span><span class="op" id="2563693">(</span><span class="string" id="2563694">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2563741">+</span>&nbsp;<span class="ident" id="2563743">funcName</span><span class="op" id="2563751">(</span><span class="ident" id="2563752">f</span><span class="op" id="2563753">)</span>&nbsp;<span class="op" id="2563755">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2563762">&#34;&nbsp;returned&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2563810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2563815">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2563820">off</span>&nbsp;<span class="op" id="2563824">+=</span>&nbsp;<span class="op" id="2563827">-</span><span class="ident" id="2563828">off</span>&nbsp;<span class="op" id="2563832">&amp;</span>&nbsp;<span class="builtintype" id="2563834">uintptr</span><span class="op" id="2563841">(</span><span class="ident" id="2563842">typ</span><span class="op" id="2563845">.</span><span class="ident" id="2563846">align</span><span class="op" id="2563851">-</span><span class="num" id="2563852">1</span><span class="op" id="2563853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2563858">addr</span>&nbsp;<span class="op" id="2563863">:=</span>&nbsp;<span class="ident" id="2563866">unsafe</span><span class="op" id="2563872">.</span><span class="ident" id="2563873">Pointer</span><span class="op" id="2563880">(</span><span class="builtintype" id="2563881">uintptr</span><span class="op" id="2563888">(</span><span class="ident" id="2563889">ptr</span><span class="op" id="2563892">)</span>&nbsp;<span class="op" id="2563894">+</span>&nbsp;<span class="ident" id="2563896">off</span><span class="op" id="2563899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2563904">if</span>&nbsp;<span class="ident" id="2563907">v</span><span class="op" id="2563908">.</span><span class="ident" id="2563909">flag</span><span class="op" id="2563913">&amp;</span><span class="ident" id="2563914">flagIndir</span>&nbsp;<span class="op" id="2563924">!=</span>&nbsp;<span class="num" id="2563927">0</span>&nbsp;<span class="op" id="2563929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2563935">memmove</span><span class="op" id="2563942">(</span><span class="ident" id="2563943">addr</span><span class="op" id="2563947">,</span>&nbsp;<span class="ident" id="2563949">v</span><span class="op" id="2563950">.</span><span class="ident" id="2563951">ptr</span><span class="op" id="2563954">,</span>&nbsp;<span class="ident" id="2563956">typ</span><span class="op" id="2563959">.</span><span class="ident" id="2563960">size</span><span class="op" id="2563964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2563969">}</span>&nbsp;<span class="keyword" id="2563971">else</span>&nbsp;<span class="op" id="2563976">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2563982">*</span><span class="op" id="2563983">(</span><span class="op" id="2563984">*</span><span class="ident" id="2563985">unsafe</span><span class="op" id="2563991">.</span><span class="ident" id="2563992">Pointer</span><span class="op" id="2563999">)</span><span class="op" id="2564000">(</span><span class="ident" id="2564001">addr</span><span class="op" id="2564005">)</span>&nbsp;<span class="op" id="2564007">=</span>&nbsp;<span class="ident" id="2564009">v</span><span class="op" id="2564010">.</span><span class="ident" id="2564011">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2564018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2564023">off</span>&nbsp;<span class="op" id="2564027">+=</span>&nbsp;<span class="ident" id="2564030">typ</span><span class="op" id="2564033">.</span><span class="ident" id="2564034">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2564041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2564044">}</span><br>
<span class="lineno">515</span><span class="op" id="2564046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2564049">//&nbsp;methodReceiver&nbsp;returns&nbsp;information&nbsp;about&nbsp;the&nbsp;receiver</span><br>
<span class="lineno"></span><span class="comment" id="2564106">//&nbsp;described&nbsp;by&nbsp;v.&nbsp;The&nbsp;Value&nbsp;v&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2564161">//&nbsp;flagMethod&nbsp;bit&nbsp;set,&nbsp;so&nbsp;the&nbsp;kind&nbsp;cached&nbsp;in&nbsp;v.flag&nbsp;should</span><br>
<span class="lineno">520</span><span class="comment" id="2564220">//&nbsp;not&nbsp;be&nbsp;used.</span><br>
<span class="lineno"></span><span class="comment" id="2564236">//&nbsp;The&nbsp;return&nbsp;value&nbsp;rcvrtype&nbsp;gives&nbsp;the&nbsp;method&#39;s&nbsp;actual&nbsp;receiver&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2564306">//&nbsp;The&nbsp;return&nbsp;value&nbsp;t&nbsp;gives&nbsp;the&nbsp;method&nbsp;type&nbsp;signature&nbsp;(without&nbsp;the&nbsp;receiver).</span><br>
<span class="lineno"></span><span class="comment" id="2564384">//&nbsp;The&nbsp;return&nbsp;value&nbsp;fn&nbsp;is&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;method&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="2564440">func</span>&nbsp;<span class="ident" id="2564445">methodReceiver</span><span class="op" id="2564459">(</span><span class="ident" id="2564460">op</span>&nbsp;<span class="builtintype" id="2564463">string</span><span class="op" id="2564469">,</span>&nbsp;<span class="ident" id="2564471">v</span>&nbsp;<span class="ident" id="2564473">Value</span><span class="op" id="2564478">,</span>&nbsp;<span class="ident" id="2564480">methodIndex</span>&nbsp;<span class="builtintype" id="2564492">int</span><span class="op" id="2564495">)</span>&nbsp;<span class="op" id="2564497">(</span><span class="ident" id="2564498">rcvrtype</span><span class="op" id="2564506">,</span>&nbsp;<span class="ident" id="2564508">t</span>&nbsp;<span class="op" id="2564510">*</span><span class="ident" id="2564511">rtype</span><span class="op" id="2564516">,</span>&nbsp;<span class="ident" id="2564518">fn</span>&nbsp;<span class="ident" id="2564521">unsafe</span><span class="op" id="2564527">.</span><span class="ident" id="2564528">Pointer</span><span class="op" id="2564535">)</span>&nbsp;<span class="op" id="2564537">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2564540">i</span>&nbsp;<span class="op" id="2564542">:=</span>&nbsp;<span class="ident" id="2564545">methodIndex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2564558">if</span>&nbsp;<span class="ident" id="2564561">v</span><span class="op" id="2564562">.</span><span class="ident" id="2564563">typ</span><span class="op" id="2564566">.</span><span class="ident" id="2564567">Kind</span><span class="op" id="2564571">(</span><span class="op" id="2564572">)</span>&nbsp;<span class="op" id="2564574">==</span>&nbsp;<span class="ident" id="2564577">Interface</span>&nbsp;<span class="op" id="2564587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2564591">tt</span>&nbsp;<span class="op" id="2564594">:=</span>&nbsp;<span class="op" id="2564597">(</span><span class="op" id="2564598">*</span><span class="ident" id="2564599">interfaceType</span><span class="op" id="2564612">)</span><span class="op" id="2564613">(</span><span class="ident" id="2564614">unsafe</span><span class="op" id="2564620">.</span><span class="ident" id="2564621">Pointer</span><span class="op" id="2564628">(</span><span class="ident" id="2564629">v</span><span class="op" id="2564630">.</span><span class="ident" id="2564631">typ</span><span class="op" id="2564634">)</span><span class="op" id="2564635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2564639">if</span>&nbsp;<span class="builtintype" id="2564642">uint</span><span class="op" id="2564646">(</span><span class="ident" id="2564647">i</span><span class="op" id="2564648">)</span>&nbsp;<span class="op" id="2564650">&gt;=</span>&nbsp;<span class="builtintype" id="2564653">uint</span><span class="op" id="2564657">(</span><span class="builtinfunc" id="2564658">len</span><span class="op" id="2564661">(</span><span class="ident" id="2564662">tt</span><span class="op" id="2564664">.</span><span class="ident" id="2564665">methods</span><span class="op" id="2564672">)</span><span class="op" id="2564673">)</span>&nbsp;<span class="op" id="2564675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2564680">panic</span><span class="op" id="2564685">(</span><span class="string" id="2564686">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2564733">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2564737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2564741">m</span>&nbsp;<span class="op" id="2564743">:=</span>&nbsp;<span class="op" id="2564746">&amp;</span><span class="ident" id="2564747">tt</span><span class="op" id="2564749">.</span><span class="ident" id="2564750">methods</span><span class="op" id="2564757">[</span><span class="ident" id="2564758">i</span><span class="op" id="2564759">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2564763">if</span>&nbsp;<span class="ident" id="2564766">m</span><span class="op" id="2564767">.</span><span class="ident" id="2564768">pkgPath</span>&nbsp;<span class="op" id="2564776">!=</span>&nbsp;<span class="ident" id="2564779">nil</span>&nbsp;<span class="op" id="2564783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2564788">panic</span><span class="op" id="2564793">(</span><span class="string" id="2564794">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2564806">+</span>&nbsp;<span class="ident" id="2564808">op</span>&nbsp;<span class="op" id="2564811">+</span>&nbsp;<span class="string" id="2564813">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2564836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2564840">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2564844">iface</span>&nbsp;<span class="op" id="2564850">:=</span>&nbsp;<span class="op" id="2564853">(</span><span class="op" id="2564854">*</span><span class="ident" id="2564855">nonEmptyInterface</span><span class="op" id="2564872">)</span><span class="op" id="2564873">(</span><span class="ident" id="2564874">v</span><span class="op" id="2564875">.</span><span class="ident" id="2564876">ptr</span><span class="op" id="2564879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2564883">if</span>&nbsp;<span class="ident" id="2564886">iface</span><span class="op" id="2564891">.</span><span class="ident" id="2564892">itab</span>&nbsp;<span class="op" id="2564897">==</span>&nbsp;<span class="ident" id="2564900">nil</span>&nbsp;<span class="op" id="2564904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2564909">panic</span><span class="op" id="2564914">(</span><span class="string" id="2564915">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2564927">+</span>&nbsp;<span class="ident" id="2564929">op</span>&nbsp;<span class="op" id="2564932">+</span>&nbsp;<span class="string" id="2564934">&#34;&nbsp;of&nbsp;method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2564969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2564973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2564977">rcvrtype</span>&nbsp;<span class="op" id="2564986">=</span>&nbsp;<span class="ident" id="2564988">iface</span><span class="op" id="2564993">.</span><span class="ident" id="2564994">itab</span><span class="op" id="2564998">.</span><span class="ident" id="2564999">typ</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2565005">fn</span>&nbsp;<span class="op" id="2565008">=</span>&nbsp;<span class="ident" id="2565010">unsafe</span><span class="op" id="2565016">.</span><span class="ident" id="2565017">Pointer</span><span class="op" id="2565024">(</span><span class="op" id="2565025">&amp;</span><span class="ident" id="2565026">iface</span><span class="op" id="2565031">.</span><span class="ident" id="2565032">itab</span><span class="op" id="2565036">.</span><span class="ident" id="2565037">fun</span><span class="op" id="2565040">[</span><span class="ident" id="2565041">i</span><span class="op" id="2565042">]</span><span class="op" id="2565043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2565047">t</span>&nbsp;<span class="op" id="2565049">=</span>&nbsp;<span class="ident" id="2565051">m</span><span class="op" id="2565052">.</span><span class="ident" id="2565053">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2565058">}</span>&nbsp;<span class="keyword" id="2565060">else</span>&nbsp;<span class="op" id="2565065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2565069">rcvrtype</span>&nbsp;<span class="op" id="2565078">=</span>&nbsp;<span class="ident" id="2565080">v</span><span class="op" id="2565081">.</span><span class="ident" id="2565082">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2565088">ut</span>&nbsp;<span class="op" id="2565091">:=</span>&nbsp;<span class="ident" id="2565094">v</span><span class="op" id="2565095">.</span><span class="ident" id="2565096">typ</span><span class="op" id="2565099">.</span><span class="ident" id="2565100">uncommon</span><span class="op" id="2565108">(</span><span class="op" id="2565109">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2565113">if</span>&nbsp;<span class="ident" id="2565116">ut</span>&nbsp;<span class="op" id="2565119">==</span>&nbsp;<span class="ident" id="2565122">nil</span>&nbsp;<span class="op" id="2565126">||</span>&nbsp;<span class="builtintype" id="2565129">uint</span><span class="op" id="2565133">(</span><span class="ident" id="2565134">i</span><span class="op" id="2565135">)</span>&nbsp;<span class="op" id="2565137">&gt;=</span>&nbsp;<span class="builtintype" id="2565140">uint</span><span class="op" id="2565144">(</span><span class="builtinfunc" id="2565145">len</span><span class="op" id="2565148">(</span><span class="ident" id="2565149">ut</span><span class="op" id="2565151">.</span><span class="ident" id="2565152">methods</span><span class="op" id="2565159">)</span><span class="op" id="2565160">)</span>&nbsp;<span class="op" id="2565162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2565167">panic</span><span class="op" id="2565172">(</span><span class="string" id="2565173">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2565220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2565224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2565228">m</span>&nbsp;<span class="op" id="2565230">:=</span>&nbsp;<span class="op" id="2565233">&amp;</span><span class="ident" id="2565234">ut</span><span class="op" id="2565236">.</span><span class="ident" id="2565237">methods</span><span class="op" id="2565244">[</span><span class="ident" id="2565245">i</span><span class="op" id="2565246">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2565250">if</span>&nbsp;<span class="ident" id="2565253">m</span><span class="op" id="2565254">.</span><span class="ident" id="2565255">pkgPath</span>&nbsp;<span class="op" id="2565263">!=</span>&nbsp;<span class="ident" id="2565266">nil</span>&nbsp;<span class="op" id="2565270">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2565275">panic</span><span class="op" id="2565280">(</span><span class="string" id="2565281">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2565293">+</span>&nbsp;<span class="ident" id="2565295">op</span>&nbsp;<span class="op" id="2565298">+</span>&nbsp;<span class="string" id="2565300">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2565323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2565327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2565331">fn</span>&nbsp;<span class="op" id="2565334">=</span>&nbsp;<span class="ident" id="2565336">unsafe</span><span class="op" id="2565342">.</span><span class="ident" id="2565343">Pointer</span><span class="op" id="2565350">(</span><span class="op" id="2565351">&amp;</span><span class="ident" id="2565352">m</span><span class="op" id="2565353">.</span><span class="ident" id="2565354">ifn</span><span class="op" id="2565357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2565361">t</span>&nbsp;<span class="op" id="2565363">=</span>&nbsp;<span class="ident" id="2565365">m</span><span class="op" id="2565366">.</span><span class="ident" id="2565367">mtyp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2565373">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2565376">return</span><br>
<span class="lineno"></span><span class="op" id="2565383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2565386">//&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;receiver.&nbsp;&nbsp;Store&nbsp;at&nbsp;p&nbsp;the&nbsp;word&nbsp;which&nbsp;is&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2565451">//&nbsp;encode&nbsp;that&nbsp;receiver&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;argument&nbsp;list.</span><br>
<span class="lineno">560</span><span class="comment" id="2565510">//&nbsp;Reflect&nbsp;uses&nbsp;the&nbsp;&#34;interface&#34;&nbsp;calling&nbsp;convention&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2565565">//&nbsp;methods,&nbsp;which&nbsp;always&nbsp;uses&nbsp;one&nbsp;word&nbsp;to&nbsp;record&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2565628">func</span>&nbsp;<span class="ident" id="2565633">storeRcvr</span><span class="op" id="2565642">(</span><span class="ident" id="2565643">v</span>&nbsp;<span class="ident" id="2565645">Value</span><span class="op" id="2565650">,</span>&nbsp;<span class="ident" id="2565652">p</span>&nbsp;<span class="ident" id="2565654">unsafe</span><span class="op" id="2565660">.</span><span class="ident" id="2565661">Pointer</span><span class="op" id="2565668">)</span>&nbsp;<span class="op" id="2565670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2565673">t</span>&nbsp;<span class="op" id="2565675">:=</span>&nbsp;<span class="ident" id="2565678">v</span><span class="op" id="2565679">.</span><span class="ident" id="2565680">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2565685">if</span>&nbsp;<span class="ident" id="2565688">t</span><span class="op" id="2565689">.</span><span class="ident" id="2565690">Kind</span><span class="op" id="2565694">(</span><span class="op" id="2565695">)</span>&nbsp;<span class="op" id="2565697">==</span>&nbsp;<span class="ident" id="2565700">Interface</span>&nbsp;<span class="op" id="2565710">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2565714">//&nbsp;the&nbsp;interface&nbsp;data&nbsp;word&nbsp;becomes&nbsp;the&nbsp;receiver&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2565769">iface</span>&nbsp;<span class="op" id="2565775">:=</span>&nbsp;<span class="op" id="2565778">(</span><span class="op" id="2565779">*</span><span class="ident" id="2565780">nonEmptyInterface</span><span class="op" id="2565797">)</span><span class="op" id="2565798">(</span><span class="ident" id="2565799">v</span><span class="op" id="2565800">.</span><span class="ident" id="2565801">ptr</span><span class="op" id="2565804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2565808">*</span><span class="op" id="2565809">(</span><span class="op" id="2565810">*</span><span class="ident" id="2565811">unsafe</span><span class="op" id="2565817">.</span><span class="ident" id="2565818">Pointer</span><span class="op" id="2565825">)</span><span class="op" id="2565826">(</span><span class="ident" id="2565827">p</span><span class="op" id="2565828">)</span>&nbsp;<span class="op" id="2565830">=</span>&nbsp;<span class="ident" id="2565832">unsafe</span><span class="op" id="2565838">.</span><span class="ident" id="2565839">Pointer</span><span class="op" id="2565846">(</span><span class="ident" id="2565847">iface</span><span class="op" id="2565852">.</span><span class="ident" id="2565853">word</span><span class="op" id="2565857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2565860">}</span>&nbsp;<span class="keyword" id="2565862">else</span>&nbsp;<span class="keyword" id="2565867">if</span>&nbsp;<span class="ident" id="2565870">v</span><span class="op" id="2565871">.</span><span class="ident" id="2565872">flag</span><span class="op" id="2565876">&amp;</span><span class="ident" id="2565877">flagIndir</span>&nbsp;<span class="op" id="2565887">!=</span>&nbsp;<span class="num" id="2565890">0</span>&nbsp;<span class="op" id="2565892">&amp;&amp;</span>&nbsp;<span class="op" id="2565895">!</span><span class="ident" id="2565896">ifaceIndir</span><span class="op" id="2565906">(</span><span class="ident" id="2565907">t</span><span class="op" id="2565908">)</span>&nbsp;<span class="op" id="2565910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2565914">*</span><span class="op" id="2565915">(</span><span class="op" id="2565916">*</span><span class="ident" id="2565917">unsafe</span><span class="op" id="2565923">.</span><span class="ident" id="2565924">Pointer</span><span class="op" id="2565931">)</span><span class="op" id="2565932">(</span><span class="ident" id="2565933">p</span><span class="op" id="2565934">)</span>&nbsp;<span class="op" id="2565936">=</span>&nbsp;<span class="op" id="2565938">*</span><span class="op" id="2565939">(</span><span class="op" id="2565940">*</span><span class="ident" id="2565941">unsafe</span><span class="op" id="2565947">.</span><span class="ident" id="2565948">Pointer</span><span class="op" id="2565955">)</span><span class="op" id="2565956">(</span><span class="ident" id="2565957">v</span><span class="op" id="2565958">.</span><span class="ident" id="2565959">ptr</span><span class="op" id="2565962">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2565965">}</span>&nbsp;<span class="keyword" id="2565967">else</span>&nbsp;<span class="op" id="2565972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2565976">*</span><span class="op" id="2565977">(</span><span class="op" id="2565978">*</span><span class="ident" id="2565979">unsafe</span><span class="op" id="2565985">.</span><span class="ident" id="2565986">Pointer</span><span class="op" id="2565993">)</span><span class="op" id="2565994">(</span><span class="ident" id="2565995">p</span><span class="op" id="2565996">)</span>&nbsp;<span class="op" id="2565998">=</span>&nbsp;<span class="ident" id="2566000">v</span><span class="op" id="2566001">.</span><span class="ident" id="2566002">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2566007">}</span><br>
<span class="lineno"></span><span class="op" id="2566009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="2566012">//&nbsp;align&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;x&nbsp;up&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2566077">//&nbsp;n&nbsp;must&nbsp;be&nbsp;a&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="keyword" id="2566106">func</span>&nbsp;<span class="ident" id="2566111">align</span><span class="op" id="2566116">(</span><span class="ident" id="2566117">x</span><span class="op" id="2566118">,</span>&nbsp;<span class="ident" id="2566120">n</span>&nbsp;<span class="builtintype" id="2566122">uintptr</span><span class="op" id="2566129">)</span>&nbsp;<span class="builtintype" id="2566131">uintptr</span>&nbsp;<span class="op" id="2566139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2566142">return</span>&nbsp;<span class="op" id="2566149">(</span><span class="ident" id="2566150">x</span>&nbsp;<span class="op" id="2566152">+</span>&nbsp;<span class="ident" id="2566154">n</span>&nbsp;<span class="op" id="2566156">-</span>&nbsp;<span class="num" id="2566158">1</span><span class="op" id="2566159">)</span>&nbsp;<span class="op" id="2566161">&amp;^</span>&nbsp;<span class="op" id="2566164">(</span><span class="ident" id="2566165">n</span>&nbsp;<span class="op" id="2566167">-</span>&nbsp;<span class="num" id="2566169">1</span><span class="op" id="2566170">)</span><br>
<span class="lineno"></span><span class="op" id="2566172">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span><span class="comment" id="2566175">//&nbsp;callMethod&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2566244">//&nbsp;by&nbsp;makeMethodValue&nbsp;(used&nbsp;by&nbsp;v.Method(i).Interface()).</span><br>
<span class="lineno"></span><span class="comment" id="2566301">//&nbsp;It&nbsp;is&nbsp;a&nbsp;streamlined&nbsp;version&nbsp;of&nbsp;the&nbsp;usual&nbsp;reflect&nbsp;call:&nbsp;the&nbsp;caller&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="2566374">//&nbsp;already&nbsp;laid&nbsp;out&nbsp;the&nbsp;argument&nbsp;frame&nbsp;for&nbsp;us,&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;have</span><br>
<span class="lineno">585</span><span class="comment" id="2566438">//&nbsp;to&nbsp;deal&nbsp;with&nbsp;individual&nbsp;Values&nbsp;for&nbsp;each&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2566491">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;two&nbsp;similar&nbsp;functions&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2566572">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;makeMethodValue&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2566646">//</span><br>
<span class="lineno"></span><span class="comment" id="2566649">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno">590</span><span class="comment" id="2566725">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2566797">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callMethod&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2566868">func</span>&nbsp;<span class="ident" id="2566873">callMethod</span><span class="op" id="2566883">(</span><span class="ident" id="2566884">ctxt</span>&nbsp;<span class="op" id="2566889">*</span><span class="ident" id="2566890">methodValue</span><span class="op" id="2566901">,</span>&nbsp;<span class="ident" id="2566903">frame</span>&nbsp;<span class="ident" id="2566909">unsafe</span><span class="op" id="2566915">.</span><span class="ident" id="2566916">Pointer</span><span class="op" id="2566923">)</span>&nbsp;<span class="op" id="2566925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2566928">rcvr</span>&nbsp;<span class="op" id="2566933">:=</span>&nbsp;<span class="ident" id="2566936">ctxt</span><span class="op" id="2566940">.</span><span class="ident" id="2566941">rcvr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2566947">rcvrtype</span><span class="op" id="2566955">,</span>&nbsp;<span class="ident" id="2566957">t</span><span class="op" id="2566958">,</span>&nbsp;<span class="ident" id="2566960">fn</span>&nbsp;<span class="op" id="2566963">:=</span>&nbsp;<span class="ident" id="2566966">methodReceiver</span><span class="op" id="2566980">(</span><span class="string" id="2566981">&#34;call&#34;</span><span class="op" id="2566987">,</span>&nbsp;<span class="ident" id="2566989">rcvr</span><span class="op" id="2566993">,</span>&nbsp;<span class="ident" id="2566995">ctxt</span><span class="op" id="2566999">.</span><span class="ident" id="2567000">method</span><span class="op" id="2567006">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2567009">frametype</span><span class="op" id="2567018">,</span>&nbsp;<span class="ident" id="2567020">argSize</span><span class="op" id="2567027">,</span>&nbsp;<span class="ident" id="2567029">retOffset</span><span class="op" id="2567038">,</span>&nbsp;<span class="ident" id="2567040">_</span>&nbsp;<span class="op" id="2567042">:=</span>&nbsp;<span class="ident" id="2567045">funcLayout</span><span class="op" id="2567055">(</span><span class="ident" id="2567056">t</span><span class="op" id="2567057">,</span>&nbsp;<span class="ident" id="2567059">rcvrtype</span><span class="op" id="2567067">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2567071">//&nbsp;Make&nbsp;a&nbsp;new&nbsp;frame&nbsp;that&nbsp;is&nbsp;one&nbsp;word&nbsp;bigger&nbsp;so&nbsp;we&nbsp;can&nbsp;store&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2567146">args</span>&nbsp;<span class="op" id="2567151">:=</span>&nbsp;<span class="ident" id="2567154">unsafe_New</span><span class="op" id="2567164">(</span><span class="ident" id="2567165">frametype</span><span class="op" id="2567174">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2567178">//&nbsp;Copy&nbsp;in&nbsp;receiver&nbsp;and&nbsp;rest&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2567217">storeRcvr</span><span class="op" id="2567226">(</span><span class="ident" id="2567227">rcvr</span><span class="op" id="2567231">,</span>&nbsp;<span class="ident" id="2567233">args</span><span class="op" id="2567237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2567240">memmove</span><span class="op" id="2567247">(</span><span class="ident" id="2567248">unsafe</span><span class="op" id="2567254">.</span><span class="ident" id="2567255">Pointer</span><span class="op" id="2567262">(</span><span class="builtintype" id="2567263">uintptr</span><span class="op" id="2567270">(</span><span class="ident" id="2567271">args</span><span class="op" id="2567275">)</span><span class="op" id="2567276">+</span><span class="ident" id="2567277">ptrSize</span><span class="op" id="2567284">)</span><span class="op" id="2567285">,</span>&nbsp;<span class="ident" id="2567287">frame</span><span class="op" id="2567292">,</span>&nbsp;<span class="ident" id="2567294">argSize</span><span class="op" id="2567301">-</span><span class="ident" id="2567302">ptrSize</span><span class="op" id="2567309">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2567313">//&nbsp;Call.</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2567323">call</span><span class="op" id="2567327">(</span><span class="ident" id="2567328">fn</span><span class="op" id="2567330">,</span>&nbsp;<span class="ident" id="2567332">args</span><span class="op" id="2567336">,</span>&nbsp;<span class="builtintype" id="2567338">uint32</span><span class="op" id="2567344">(</span><span class="ident" id="2567345">frametype</span><span class="op" id="2567354">.</span><span class="ident" id="2567355">size</span><span class="op" id="2567359">)</span><span class="op" id="2567360">,</span>&nbsp;<span class="builtintype" id="2567362">uint32</span><span class="op" id="2567368">(</span><span class="ident" id="2567369">retOffset</span><span class="op" id="2567378">)</span><span class="op" id="2567379">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2567383">//&nbsp;Copy&nbsp;return&nbsp;values.&nbsp;On&nbsp;amd64p32,&nbsp;the&nbsp;beginning&nbsp;of&nbsp;return&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2567451">//&nbsp;is&nbsp;64-bit&nbsp;aligned,&nbsp;so&nbsp;the&nbsp;caller&#39;s&nbsp;frame&nbsp;layout&nbsp;(which&nbsp;doesn&#39;t&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2567523">//&nbsp;a&nbsp;receiver)&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;layout&nbsp;of&nbsp;the&nbsp;fn&nbsp;call,&nbsp;which&nbsp;has</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2567594">//&nbsp;a&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2567610">//&nbsp;Ignore&nbsp;any&nbsp;changes&nbsp;to&nbsp;args&nbsp;and&nbsp;just&nbsp;copy&nbsp;return&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2567670">callerRetOffset</span>&nbsp;<span class="op" id="2567686">:=</span>&nbsp;<span class="ident" id="2567689">retOffset</span>&nbsp;<span class="op" id="2567699">-</span>&nbsp;<span class="ident" id="2567701">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2567710">if</span>&nbsp;<span class="ident" id="2567713">runtime</span><span class="op" id="2567720">.</span><span class="ident" id="2567721">GOARCH</span>&nbsp;<span class="op" id="2567728">==</span>&nbsp;<span class="string" id="2567731">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2567742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2567746">callerRetOffset</span>&nbsp;<span class="op" id="2567762">=</span>&nbsp;<span class="ident" id="2567764">align</span><span class="op" id="2567769">(</span><span class="ident" id="2567770">argSize</span><span class="op" id="2567777">-</span><span class="ident" id="2567778">ptrSize</span><span class="op" id="2567785">,</span>&nbsp;<span class="num" id="2567787">8</span><span class="op" id="2567788">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2567791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2567794">memmove</span><span class="op" id="2567801">(</span><span class="ident" id="2567802">unsafe</span><span class="op" id="2567808">.</span><span class="ident" id="2567809">Pointer</span><span class="op" id="2567816">(</span><span class="builtintype" id="2567817">uintptr</span><span class="op" id="2567824">(</span><span class="ident" id="2567825">frame</span><span class="op" id="2567830">)</span><span class="op" id="2567831">+</span><span class="ident" id="2567832">callerRetOffset</span><span class="op" id="2567847">)</span><span class="op" id="2567848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2567852">unsafe</span><span class="op" id="2567858">.</span><span class="ident" id="2567859">Pointer</span><span class="op" id="2567866">(</span><span class="builtintype" id="2567867">uintptr</span><span class="op" id="2567874">(</span><span class="ident" id="2567875">args</span><span class="op" id="2567879">)</span><span class="op" id="2567880">+</span><span class="ident" id="2567881">retOffset</span><span class="op" id="2567890">)</span><span class="op" id="2567891">,</span>&nbsp;<span class="ident" id="2567893">frametype</span><span class="op" id="2567902">.</span><span class="ident" id="2567903">size</span><span class="op" id="2567907">-</span><span class="ident" id="2567908">retOffset</span><span class="op" id="2567917">)</span><br>
<span class="lineno"></span><span class="op" id="2567919">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">620</span><span class="comment" id="2567922">//&nbsp;funcName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;f,&nbsp;for&nbsp;use&nbsp;in&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="2567984">func</span>&nbsp;<span class="ident" id="2567989">funcName</span><span class="op" id="2567997">(</span><span class="ident" id="2567998">f</span>&nbsp;<span class="keyword" id="2568000">func</span><span class="op" id="2568004">(</span><span class="op" id="2568005">[</span><span class="op" id="2568006">]</span><span class="ident" id="2568007">Value</span><span class="op" id="2568012">)</span>&nbsp;<span class="op" id="2568014">[</span><span class="op" id="2568015">]</span><span class="ident" id="2568016">Value</span><span class="op" id="2568021">)</span>&nbsp;<span class="builtintype" id="2568023">string</span>&nbsp;<span class="op" id="2568030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2568033">pc</span>&nbsp;<span class="op" id="2568036">:=</span>&nbsp;<span class="op" id="2568039">*</span><span class="op" id="2568040">(</span><span class="op" id="2568041">*</span><span class="builtintype" id="2568042">uintptr</span><span class="op" id="2568049">)</span><span class="op" id="2568050">(</span><span class="ident" id="2568051">unsafe</span><span class="op" id="2568057">.</span><span class="ident" id="2568058">Pointer</span><span class="op" id="2568065">(</span><span class="op" id="2568066">&amp;</span><span class="ident" id="2568067">f</span><span class="op" id="2568068">)</span><span class="op" id="2568069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2568072">rf</span>&nbsp;<span class="op" id="2568075">:=</span>&nbsp;<span class="ident" id="2568078">runtime</span><span class="op" id="2568085">.</span><span class="ident" id="2568086">FuncForPC</span><span class="op" id="2568095">(</span><span class="ident" id="2568096">pc</span><span class="op" id="2568098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2568101">if</span>&nbsp;<span class="ident" id="2568104">rf</span>&nbsp;<span class="op" id="2568107">!=</span>&nbsp;<span class="ident" id="2568110">nil</span>&nbsp;<span class="op" id="2568114">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2568118">return</span>&nbsp;<span class="ident" id="2568125">rf</span><span class="op" id="2568127">.</span><span class="ident" id="2568128">Name</span><span class="op" id="2568132">(</span><span class="op" id="2568133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2568136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2568139">return</span>&nbsp;<span class="string" id="2568146">&#34;closure&#34;</span><br>
<span class="lineno"></span><span class="op" id="2568156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">630</span><span class="comment" id="2568159">//&nbsp;Cap&nbsp;returns&nbsp;v&#39;s&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="comment" id="2568188">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;or&nbsp;Slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2568243">func</span>&nbsp;<span class="op" id="2568248">(</span><span class="ident" id="2568249">v</span>&nbsp;<span class="ident" id="2568251">Value</span><span class="op" id="2568256">)</span>&nbsp;<span class="ident" id="2568258">Cap</span><span class="op" id="2568261">(</span><span class="op" id="2568262">)</span>&nbsp;<span class="builtintype" id="2568264">int</span>&nbsp;<span class="op" id="2568268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2568271">k</span>&nbsp;<span class="op" id="2568273">:=</span>&nbsp;<span class="ident" id="2568276">v</span><span class="op" id="2568277">.</span><span class="ident" id="2568278">kind</span><span class="op" id="2568282">(</span><span class="op" id="2568283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2568286">switch</span>&nbsp;<span class="ident" id="2568293">k</span>&nbsp;<span class="op" id="2568295">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2568298">case</span>&nbsp;<span class="ident" id="2568303">Array</span><span class="op" id="2568308">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2568312">return</span>&nbsp;<span class="ident" id="2568319">v</span><span class="op" id="2568320">.</span><span class="ident" id="2568321">typ</span><span class="op" id="2568324">.</span><span class="ident" id="2568325">Len</span><span class="op" id="2568328">(</span><span class="op" id="2568329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2568332">case</span>&nbsp;<span class="ident" id="2568337">Chan</span><span class="op" id="2568341">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2568345">return</span>&nbsp;<span class="builtintype" id="2568352">int</span><span class="op" id="2568355">(</span><span class="ident" id="2568356">chancap</span><span class="op" id="2568363">(</span><span class="ident" id="2568364">v</span><span class="op" id="2568365">.</span><span class="ident" id="2568366">pointer</span><span class="op" id="2568373">(</span><span class="op" id="2568374">)</span><span class="op" id="2568375">)</span><span class="op" id="2568376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2568379">case</span>&nbsp;<span class="ident" id="2568384">Slice</span><span class="op" id="2568389">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2568393">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2568452">return</span>&nbsp;<span class="op" id="2568459">(</span><span class="op" id="2568460">*</span><span class="ident" id="2568461">sliceHeader</span><span class="op" id="2568472">)</span><span class="op" id="2568473">(</span><span class="ident" id="2568474">v</span><span class="op" id="2568475">.</span><span class="ident" id="2568476">ptr</span><span class="op" id="2568479">)</span><span class="op" id="2568480">.</span><span class="ident" id="2568481">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2568486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2568489">panic</span><span class="op" id="2568494">(</span><span class="op" id="2568495">&amp;</span><span class="ident" id="2568496">ValueError</span><span class="op" id="2568506">{</span><span class="string" id="2568507">&#34;reflect.Value.Cap&#34;</span><span class="op" id="2568526">,</span>&nbsp;<span class="ident" id="2568528">v</span><span class="op" id="2568529">.</span><span class="ident" id="2568530">kind</span><span class="op" id="2568534">(</span><span class="op" id="2568535">)</span><span class="op" id="2568536">}</span><span class="op" id="2568537">)</span><br>
<span class="lineno"></span><span class="op" id="2568539">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span><span class="comment" id="2568542">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2568573">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="keyword" id="2568611">func</span>&nbsp;<span class="op" id="2568616">(</span><span class="ident" id="2568617">v</span>&nbsp;<span class="ident" id="2568619">Value</span><span class="op" id="2568624">)</span>&nbsp;<span class="ident" id="2568626">Close</span><span class="op" id="2568631">(</span><span class="op" id="2568632">)</span>&nbsp;<span class="op" id="2568634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2568637">v</span><span class="op" id="2568638">.</span><span class="ident" id="2568639">mustBe</span><span class="op" id="2568645">(</span><span class="ident" id="2568646">Chan</span><span class="op" id="2568650">)</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2568653">v</span><span class="op" id="2568654">.</span><span class="ident" id="2568655">mustBeExported</span><span class="op" id="2568669">(</span><span class="op" id="2568670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2568673">chanclose</span><span class="op" id="2568682">(</span><span class="ident" id="2568683">v</span><span class="op" id="2568684">.</span><span class="ident" id="2568685">pointer</span><span class="op" id="2568692">(</span><span class="op" id="2568693">)</span><span class="op" id="2568694">)</span><br>
<span class="lineno"></span><span class="op" id="2568696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2568699">//&nbsp;Complex&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;complex128.</span><br>
<span class="lineno">655</span><span class="comment" id="2568757">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128</span><br>
<span class="lineno"></span><span class="keyword" id="2568813">func</span>&nbsp;<span class="op" id="2568818">(</span><span class="ident" id="2568819">v</span>&nbsp;<span class="ident" id="2568821">Value</span><span class="op" id="2568826">)</span>&nbsp;<span class="ident" id="2568828">Complex</span><span class="op" id="2568835">(</span><span class="op" id="2568836">)</span>&nbsp;<span class="builtintype" id="2568838">complex128</span>&nbsp;<span class="op" id="2568849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2568852">k</span>&nbsp;<span class="op" id="2568854">:=</span>&nbsp;<span class="ident" id="2568857">v</span><span class="op" id="2568858">.</span><span class="ident" id="2568859">kind</span><span class="op" id="2568863">(</span><span class="op" id="2568864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2568867">switch</span>&nbsp;<span class="ident" id="2568874">k</span>&nbsp;<span class="op" id="2568876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2568879">case</span>&nbsp;<span class="ident" id="2568884">Complex64</span><span class="op" id="2568893">:</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2568897">return</span>&nbsp;<span class="builtintype" id="2568904">complex128</span><span class="op" id="2568914">(</span><span class="op" id="2568915">*</span><span class="op" id="2568916">(</span><span class="op" id="2568917">*</span><span class="builtintype" id="2568918">complex64</span><span class="op" id="2568927">)</span><span class="op" id="2568928">(</span><span class="ident" id="2568929">v</span><span class="op" id="2568930">.</span><span class="ident" id="2568931">ptr</span><span class="op" id="2568934">)</span><span class="op" id="2568935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2568938">case</span>&nbsp;<span class="ident" id="2568943">Complex128</span><span class="op" id="2568953">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2568957">return</span>&nbsp;<span class="op" id="2568964">*</span><span class="op" id="2568965">(</span><span class="op" id="2568966">*</span><span class="builtintype" id="2568967">complex128</span><span class="op" id="2568977">)</span><span class="op" id="2568978">(</span><span class="ident" id="2568979">v</span><span class="op" id="2568980">.</span><span class="ident" id="2568981">ptr</span><span class="op" id="2568984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2568987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2568990">panic</span><span class="op" id="2568995">(</span><span class="op" id="2568996">&amp;</span><span class="ident" id="2568997">ValueError</span><span class="op" id="2569007">{</span><span class="string" id="2569008">&#34;reflect.Value.Complex&#34;</span><span class="op" id="2569031">,</span>&nbsp;<span class="ident" id="2569033">v</span><span class="op" id="2569034">.</span><span class="ident" id="2569035">kind</span><span class="op" id="2569039">(</span><span class="op" id="2569040">)</span><span class="op" id="2569041">}</span><span class="op" id="2569042">)</span><br>
<span class="lineno">665</span><span class="op" id="2569044">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2569047">//&nbsp;Elem&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;the&nbsp;interface&nbsp;v&nbsp;contains</span><br>
<span class="lineno"></span><span class="comment" id="2569103">//&nbsp;or&nbsp;that&nbsp;the&nbsp;pointer&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2569139">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface&nbsp;or&nbsp;Ptr.</span><br>
<span class="lineno">670</span><span class="comment" id="2569189">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;v&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2569231">func</span>&nbsp;<span class="op" id="2569236">(</span><span class="ident" id="2569237">v</span>&nbsp;<span class="ident" id="2569239">Value</span><span class="op" id="2569244">)</span>&nbsp;<span class="ident" id="2569246">Elem</span><span class="op" id="2569250">(</span><span class="op" id="2569251">)</span>&nbsp;<span class="ident" id="2569253">Value</span>&nbsp;<span class="op" id="2569259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2569262">k</span>&nbsp;<span class="op" id="2569264">:=</span>&nbsp;<span class="ident" id="2569267">v</span><span class="op" id="2569268">.</span><span class="ident" id="2569269">kind</span><span class="op" id="2569273">(</span><span class="op" id="2569274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2569277">switch</span>&nbsp;<span class="ident" id="2569284">k</span>&nbsp;<span class="op" id="2569286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2569289">case</span>&nbsp;<span class="ident" id="2569294">Interface</span><span class="op" id="2569303">:</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2569307">var</span>&nbsp;<span class="ident" id="2569311">eface</span>&nbsp;<span class="keyword" id="2569317">interface</span><span class="op" id="2569326">{</span><span class="op" id="2569327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2569331">if</span>&nbsp;<span class="ident" id="2569334">v</span><span class="op" id="2569335">.</span><span class="ident" id="2569336">typ</span><span class="op" id="2569339">.</span><span class="ident" id="2569340">NumMethod</span><span class="op" id="2569349">(</span><span class="op" id="2569350">)</span>&nbsp;<span class="op" id="2569352">==</span>&nbsp;<span class="num" id="2569355">0</span>&nbsp;<span class="op" id="2569357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2569362">eface</span>&nbsp;<span class="op" id="2569368">=</span>&nbsp;<span class="op" id="2569370">*</span><span class="op" id="2569371">(</span><span class="op" id="2569372">*</span><span class="keyword" id="2569373">interface</span><span class="op" id="2569382">{</span><span class="op" id="2569383">}</span><span class="op" id="2569384">)</span><span class="op" id="2569385">(</span><span class="ident" id="2569386">v</span><span class="op" id="2569387">.</span><span class="ident" id="2569388">ptr</span><span class="op" id="2569391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2569395">}</span>&nbsp;<span class="keyword" id="2569397">else</span>&nbsp;<span class="op" id="2569402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2569407">eface</span>&nbsp;<span class="op" id="2569413">=</span>&nbsp;<span class="op" id="2569415">(</span><span class="keyword" id="2569416">interface</span><span class="op" id="2569425">{</span><span class="op" id="2569426">}</span><span class="op" id="2569427">)</span><span class="op" id="2569428">(</span><span class="op" id="2569429">*</span><span class="op" id="2569430">(</span><span class="op" id="2569431">*</span><span class="keyword" id="2569432">interface</span>&nbsp;<span class="op" id="2569442">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2569448">M</span><span class="op" id="2569449">(</span><span class="op" id="2569450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2569455">}</span><span class="op" id="2569456">)</span><span class="op" id="2569457">(</span><span class="ident" id="2569458">v</span><span class="op" id="2569459">.</span><span class="ident" id="2569460">ptr</span><span class="op" id="2569463">)</span><span class="op" id="2569464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2569468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2569472">x</span>&nbsp;<span class="op" id="2569474">:=</span>&nbsp;<span class="ident" id="2569477">unpackEface</span><span class="op" id="2569488">(</span><span class="ident" id="2569489">eface</span><span class="op" id="2569494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2569498">if</span>&nbsp;<span class="ident" id="2569501">x</span><span class="op" id="2569502">.</span><span class="ident" id="2569503">flag</span>&nbsp;<span class="op" id="2569508">!=</span>&nbsp;<span class="num" id="2569511">0</span>&nbsp;<span class="op" id="2569513">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2569518">x</span><span class="op" id="2569519">.</span><span class="ident" id="2569520">flag</span>&nbsp;<span class="op" id="2569525">|=</span>&nbsp;<span class="ident" id="2569528">v</span><span class="op" id="2569529">.</span><span class="ident" id="2569530">flag</span>&nbsp;<span class="op" id="2569535">&amp;</span>&nbsp;<span class="ident" id="2569537">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2569546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2569550">return</span>&nbsp;<span class="ident" id="2569557">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2569560">case</span>&nbsp;<span class="ident" id="2569565">Ptr</span><span class="op" id="2569568">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2569572">ptr</span>&nbsp;<span class="op" id="2569576">:=</span>&nbsp;<span class="ident" id="2569579">v</span><span class="op" id="2569580">.</span><span class="ident" id="2569581">ptr</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2569587">if</span>&nbsp;<span class="ident" id="2569590">v</span><span class="op" id="2569591">.</span><span class="ident" id="2569592">flag</span><span class="op" id="2569596">&amp;</span><span class="ident" id="2569597">flagIndir</span>&nbsp;<span class="op" id="2569607">!=</span>&nbsp;<span class="num" id="2569610">0</span>&nbsp;<span class="op" id="2569612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2569617">ptr</span>&nbsp;<span class="op" id="2569621">=</span>&nbsp;<span class="op" id="2569623">*</span><span class="op" id="2569624">(</span><span class="op" id="2569625">*</span><span class="ident" id="2569626">unsafe</span><span class="op" id="2569632">.</span><span class="ident" id="2569633">Pointer</span><span class="op" id="2569640">)</span><span class="op" id="2569641">(</span><span class="ident" id="2569642">ptr</span><span class="op" id="2569645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2569649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2569653">//&nbsp;The&nbsp;returned&nbsp;value&#39;s&nbsp;address&nbsp;is&nbsp;v&#39;s&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2569701">if</span>&nbsp;<span class="ident" id="2569704">ptr</span>&nbsp;<span class="op" id="2569708">==</span>&nbsp;<span class="ident" id="2569711">nil</span>&nbsp;<span class="op" id="2569715">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2569720">return</span>&nbsp;<span class="ident" id="2569727">Value</span><span class="op" id="2569732">{</span><span class="op" id="2569733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2569737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2569741">tt</span>&nbsp;<span class="op" id="2569744">:=</span>&nbsp;<span class="op" id="2569747">(</span><span class="op" id="2569748">*</span><span class="ident" id="2569749">ptrType</span><span class="op" id="2569756">)</span><span class="op" id="2569757">(</span><span class="ident" id="2569758">unsafe</span><span class="op" id="2569764">.</span><span class="ident" id="2569765">Pointer</span><span class="op" id="2569772">(</span><span class="ident" id="2569773">v</span><span class="op" id="2569774">.</span><span class="ident" id="2569775">typ</span><span class="op" id="2569778">)</span><span class="op" id="2569779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2569783">typ</span>&nbsp;<span class="op" id="2569787">:=</span>&nbsp;<span class="ident" id="2569790">tt</span><span class="op" id="2569792">.</span><span class="ident" id="2569793">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2569800">fl</span>&nbsp;<span class="op" id="2569803">:=</span>&nbsp;<span class="ident" id="2569806">v</span><span class="op" id="2569807">.</span><span class="ident" id="2569808">flag</span><span class="op" id="2569812">&amp;</span><span class="ident" id="2569813">flagRO</span>&nbsp;<span class="op" id="2569820">|</span>&nbsp;<span class="ident" id="2569822">flagIndir</span>&nbsp;<span class="op" id="2569832">|</span>&nbsp;<span class="ident" id="2569834">flagAddr</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2569845">fl</span>&nbsp;<span class="op" id="2569848">|=</span>&nbsp;<span class="ident" id="2569851">flag</span><span class="op" id="2569855">(</span><span class="ident" id="2569856">typ</span><span class="op" id="2569859">.</span><span class="ident" id="2569860">Kind</span><span class="op" id="2569864">(</span><span class="op" id="2569865">)</span><span class="op" id="2569866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2569870">return</span>&nbsp;<span class="ident" id="2569877">Value</span><span class="op" id="2569882">{</span><span class="ident" id="2569883">typ</span><span class="op" id="2569886">,</span>&nbsp;<span class="ident" id="2569888">ptr</span><span class="op" id="2569891">,</span>&nbsp;<span class="ident" id="2569893">fl</span><span class="op" id="2569895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2569898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2569901">panic</span><span class="op" id="2569906">(</span><span class="op" id="2569907">&amp;</span><span class="ident" id="2569908">ValueError</span><span class="op" id="2569918">{</span><span class="string" id="2569919">&#34;reflect.Value.Elem&#34;</span><span class="op" id="2569939">,</span>&nbsp;<span class="ident" id="2569941">v</span><span class="op" id="2569942">.</span><span class="ident" id="2569943">kind</span><span class="op" id="2569947">(</span><span class="op" id="2569948">)</span><span class="op" id="2569949">}</span><span class="op" id="2569950">)</span><br>
<span class="lineno"></span><span class="op" id="2569952">}</span><br>
<span class="lineno">705</span><br>
<span class="lineno"></span><span class="comment" id="2569955">//&nbsp;Field&nbsp;returns&nbsp;the&nbsp;i&#39;th&nbsp;field&nbsp;of&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2570004">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2570065">func</span>&nbsp;<span class="op" id="2570070">(</span><span class="ident" id="2570071">v</span>&nbsp;<span class="ident" id="2570073">Value</span><span class="op" id="2570078">)</span>&nbsp;<span class="ident" id="2570080">Field</span><span class="op" id="2570085">(</span><span class="ident" id="2570086">i</span>&nbsp;<span class="builtintype" id="2570088">int</span><span class="op" id="2570091">)</span>&nbsp;<span class="ident" id="2570093">Value</span>&nbsp;<span class="op" id="2570099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2570102">if</span>&nbsp;<span class="ident" id="2570105">v</span><span class="op" id="2570106">.</span><span class="ident" id="2570107">kind</span><span class="op" id="2570111">(</span><span class="op" id="2570112">)</span>&nbsp;<span class="op" id="2570114">!=</span>&nbsp;<span class="ident" id="2570117">Struct</span>&nbsp;<span class="op" id="2570124">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2570128">panic</span><span class="op" id="2570133">(</span><span class="op" id="2570134">&amp;</span><span class="ident" id="2570135">ValueError</span><span class="op" id="2570145">{</span><span class="string" id="2570146">&#34;reflect.Value.Field&#34;</span><span class="op" id="2570167">,</span>&nbsp;<span class="ident" id="2570169">v</span><span class="op" id="2570170">.</span><span class="ident" id="2570171">kind</span><span class="op" id="2570175">(</span><span class="op" id="2570176">)</span><span class="op" id="2570177">}</span><span class="op" id="2570178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2570181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2570184">tt</span>&nbsp;<span class="op" id="2570187">:=</span>&nbsp;<span class="op" id="2570190">(</span><span class="op" id="2570191">*</span><span class="ident" id="2570192">structType</span><span class="op" id="2570202">)</span><span class="op" id="2570203">(</span><span class="ident" id="2570204">unsafe</span><span class="op" id="2570210">.</span><span class="ident" id="2570211">Pointer</span><span class="op" id="2570218">(</span><span class="ident" id="2570219">v</span><span class="op" id="2570220">.</span><span class="ident" id="2570221">typ</span><span class="op" id="2570224">)</span><span class="op" id="2570225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2570228">if</span>&nbsp;<span class="builtintype" id="2570231">uint</span><span class="op" id="2570235">(</span><span class="ident" id="2570236">i</span><span class="op" id="2570237">)</span>&nbsp;<span class="op" id="2570239">&gt;=</span>&nbsp;<span class="builtintype" id="2570242">uint</span><span class="op" id="2570246">(</span><span class="builtinfunc" id="2570247">len</span><span class="op" id="2570250">(</span><span class="ident" id="2570251">tt</span><span class="op" id="2570253">.</span><span class="ident" id="2570254">fields</span><span class="op" id="2570260">)</span><span class="op" id="2570261">)</span>&nbsp;<span class="op" id="2570263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2570267">panic</span><span class="op" id="2570272">(</span><span class="string" id="2570273">&#34;reflect:&nbsp;Field&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2570308">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2570311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2570314">field</span>&nbsp;<span class="op" id="2570320">:=</span>&nbsp;<span class="op" id="2570323">&amp;</span><span class="ident" id="2570324">tt</span><span class="op" id="2570326">.</span><span class="ident" id="2570327">fields</span><span class="op" id="2570333">[</span><span class="ident" id="2570334">i</span><span class="op" id="2570335">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2570338">typ</span>&nbsp;<span class="op" id="2570342">:=</span>&nbsp;<span class="ident" id="2570345">field</span><span class="op" id="2570350">.</span><span class="ident" id="2570351">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2570357">//&nbsp;Inherit&nbsp;permission&nbsp;bits&nbsp;from&nbsp;v.</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2570393">fl</span>&nbsp;<span class="op" id="2570396">:=</span>&nbsp;<span class="ident" id="2570399">v</span><span class="op" id="2570400">.</span><span class="ident" id="2570401">flag</span><span class="op" id="2570405">&amp;</span><span class="op" id="2570406">(</span><span class="ident" id="2570407">flagRO</span><span class="op" id="2570413">|</span><span class="ident" id="2570414">flagIndir</span><span class="op" id="2570423">|</span><span class="ident" id="2570424">flagAddr</span><span class="op" id="2570432">)</span>&nbsp;<span class="op" id="2570434">|</span>&nbsp;<span class="ident" id="2570436">flag</span><span class="op" id="2570440">(</span><span class="ident" id="2570441">typ</span><span class="op" id="2570444">.</span><span class="ident" id="2570445">Kind</span><span class="op" id="2570449">(</span><span class="op" id="2570450">)</span><span class="op" id="2570451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2570454">//&nbsp;Using&nbsp;an&nbsp;unexported&nbsp;field&nbsp;forces&nbsp;flagRO.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2570499">if</span>&nbsp;<span class="ident" id="2570502">field</span><span class="op" id="2570507">.</span><span class="ident" id="2570508">pkgPath</span>&nbsp;<span class="op" id="2570516">!=</span>&nbsp;<span class="ident" id="2570519">nil</span>&nbsp;<span class="op" id="2570523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2570527">fl</span>&nbsp;<span class="op" id="2570530">|=</span>&nbsp;<span class="ident" id="2570533">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2570541">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2570544">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;struct,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2570600">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;struct&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2570665">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2570713">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;have&nbsp;field.offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2570771">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;field.offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2570814">ptr</span>&nbsp;<span class="op" id="2570818">:=</span>&nbsp;<span class="ident" id="2570821">unsafe</span><span class="op" id="2570827">.</span><span class="ident" id="2570828">Pointer</span><span class="op" id="2570835">(</span><span class="builtintype" id="2570836">uintptr</span><span class="op" id="2570843">(</span><span class="ident" id="2570844">v</span><span class="op" id="2570845">.</span><span class="ident" id="2570846">ptr</span><span class="op" id="2570849">)</span>&nbsp;<span class="op" id="2570851">+</span>&nbsp;<span class="ident" id="2570853">field</span><span class="op" id="2570858">.</span><span class="ident" id="2570859">offset</span><span class="op" id="2570865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2570868">return</span>&nbsp;<span class="ident" id="2570875">Value</span><span class="op" id="2570880">{</span><span class="ident" id="2570881">typ</span><span class="op" id="2570884">,</span>&nbsp;<span class="ident" id="2570886">ptr</span><span class="op" id="2570889">,</span>&nbsp;<span class="ident" id="2570891">fl</span><span class="op" id="2570893">}</span><br>
<span class="lineno"></span><span class="op" id="2570895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2570898">//&nbsp;FieldByIndex&nbsp;returns&nbsp;the&nbsp;nested&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;index.</span><br>
<span class="lineno">735</span><span class="comment" id="2570963">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2571003">func</span>&nbsp;<span class="op" id="2571008">(</span><span class="ident" id="2571009">v</span>&nbsp;<span class="ident" id="2571011">Value</span><span class="op" id="2571016">)</span>&nbsp;<span class="ident" id="2571018">FieldByIndex</span><span class="op" id="2571030">(</span><span class="ident" id="2571031">index</span>&nbsp;<span class="op" id="2571037">[</span><span class="op" id="2571038">]</span><span class="builtintype" id="2571039">int</span><span class="op" id="2571042">)</span>&nbsp;<span class="ident" id="2571044">Value</span>&nbsp;<span class="op" id="2571050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2571053">if</span>&nbsp;<span class="builtinfunc" id="2571056">len</span><span class="op" id="2571059">(</span><span class="ident" id="2571060">index</span><span class="op" id="2571065">)</span>&nbsp;<span class="op" id="2571067">==</span>&nbsp;<span class="num" id="2571070">1</span>&nbsp;<span class="op" id="2571072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2571076">return</span>&nbsp;<span class="ident" id="2571083">v</span><span class="op" id="2571084">.</span><span class="ident" id="2571085">Field</span><span class="op" id="2571090">(</span><span class="ident" id="2571091">index</span><span class="op" id="2571096">[</span><span class="num" id="2571097">0</span><span class="op" id="2571098">]</span><span class="op" id="2571099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2571102">}</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2571105">v</span><span class="op" id="2571106">.</span><span class="ident" id="2571107">mustBe</span><span class="op" id="2571113">(</span><span class="ident" id="2571114">Struct</span><span class="op" id="2571120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2571123">for</span>&nbsp;<span class="ident" id="2571127">i</span><span class="op" id="2571128">,</span>&nbsp;<span class="ident" id="2571130">x</span>&nbsp;<span class="op" id="2571132">:=</span>&nbsp;<span class="keyword" id="2571135">range</span>&nbsp;<span class="ident" id="2571141">index</span>&nbsp;<span class="op" id="2571147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2571151">if</span>&nbsp;<span class="ident" id="2571154">i</span>&nbsp;<span class="op" id="2571156">&gt;</span>&nbsp;<span class="num" id="2571158">0</span>&nbsp;<span class="op" id="2571160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2571165">if</span>&nbsp;<span class="ident" id="2571168">v</span><span class="op" id="2571169">.</span><span class="ident" id="2571170">Kind</span><span class="op" id="2571174">(</span><span class="op" id="2571175">)</span>&nbsp;<span class="op" id="2571177">==</span>&nbsp;<span class="ident" id="2571180">Ptr</span>&nbsp;<span class="op" id="2571184">&amp;&amp;</span>&nbsp;<span class="ident" id="2571187">v</span><span class="op" id="2571188">.</span><span class="ident" id="2571189">typ</span><span class="op" id="2571192">.</span><span class="ident" id="2571193">Elem</span><span class="op" id="2571197">(</span><span class="op" id="2571198">)</span><span class="op" id="2571199">.</span><span class="ident" id="2571200">Kind</span><span class="op" id="2571204">(</span><span class="op" id="2571205">)</span>&nbsp;<span class="op" id="2571207">==</span>&nbsp;<span class="ident" id="2571210">Struct</span>&nbsp;<span class="op" id="2571217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2571223">if</span>&nbsp;<span class="ident" id="2571226">v</span><span class="op" id="2571227">.</span><span class="ident" id="2571228">IsNil</span><span class="op" id="2571233">(</span><span class="op" id="2571234">)</span>&nbsp;<span class="op" id="2571236">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2571243">panic</span><span class="op" id="2571248">(</span><span class="string" id="2571249">&#34;reflect:&nbsp;indirection&nbsp;through&nbsp;nil&nbsp;pointer&nbsp;to&nbsp;embedded&nbsp;struct&#34;</span><span class="op" id="2571310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2571316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2571322">v</span>&nbsp;<span class="op" id="2571324">=</span>&nbsp;<span class="ident" id="2571326">v</span><span class="op" id="2571327">.</span><span class="ident" id="2571328">Elem</span><span class="op" id="2571332">(</span><span class="op" id="2571333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2571338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2571342">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2571346">v</span>&nbsp;<span class="op" id="2571348">=</span>&nbsp;<span class="ident" id="2571350">v</span><span class="op" id="2571351">.</span><span class="ident" id="2571352">Field</span><span class="op" id="2571357">(</span><span class="ident" id="2571358">x</span><span class="op" id="2571359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2571362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2571365">return</span>&nbsp;<span class="ident" id="2571372">v</span><br>
<span class="lineno"></span><span class="op" id="2571374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="comment" id="2571377">//&nbsp;FieldByName&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2571438">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="2571490">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2571530">func</span>&nbsp;<span class="op" id="2571535">(</span><span class="ident" id="2571536">v</span>&nbsp;<span class="ident" id="2571538">Value</span><span class="op" id="2571543">)</span>&nbsp;<span class="ident" id="2571545">FieldByName</span><span class="op" id="2571556">(</span><span class="ident" id="2571557">name</span>&nbsp;<span class="builtintype" id="2571562">string</span><span class="op" id="2571568">)</span>&nbsp;<span class="ident" id="2571570">Value</span>&nbsp;<span class="op" id="2571576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2571579">v</span><span class="op" id="2571580">.</span><span class="ident" id="2571581">mustBe</span><span class="op" id="2571587">(</span><span class="ident" id="2571588">Struct</span><span class="op" id="2571594">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2571597">if</span>&nbsp;<span class="ident" id="2571600">f</span><span class="op" id="2571601">,</span>&nbsp;<span class="ident" id="2571603">ok</span>&nbsp;<span class="op" id="2571606">:=</span>&nbsp;<span class="ident" id="2571609">v</span><span class="op" id="2571610">.</span><span class="ident" id="2571611">typ</span><span class="op" id="2571614">.</span><span class="ident" id="2571615">FieldByName</span><span class="op" id="2571626">(</span><span class="ident" id="2571627">name</span><span class="op" id="2571631">)</span><span class="op" id="2571632">;</span>&nbsp;<span class="ident" id="2571634">ok</span>&nbsp;<span class="op" id="2571637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2571641">return</span>&nbsp;<span class="ident" id="2571648">v</span><span class="op" id="2571649">.</span><span class="ident" id="2571650">FieldByIndex</span><span class="op" id="2571662">(</span><span class="ident" id="2571663">f</span><span class="op" id="2571664">.</span><span class="ident" id="2571665">Index</span><span class="op" id="2571670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2571673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2571676">return</span>&nbsp;<span class="ident" id="2571683">Value</span><span class="op" id="2571688">{</span><span class="op" id="2571689">}</span><br>
<span class="lineno"></span><span class="op" id="2571691">}</span><br>
<span class="lineno">765</span><br>
<span class="lineno"></span><span class="comment" id="2571694">//&nbsp;FieldByNameFunc&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;a&nbsp;name</span><br>
<span class="lineno"></span><span class="comment" id="2571750">//&nbsp;that&nbsp;satisfies&nbsp;the&nbsp;match&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2571788">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="2571828">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno">770</span><span class="keyword" id="2571880">func</span>&nbsp;<span class="op" id="2571885">(</span><span class="ident" id="2571886">v</span>&nbsp;<span class="ident" id="2571888">Value</span><span class="op" id="2571893">)</span>&nbsp;<span class="ident" id="2571895">FieldByNameFunc</span><span class="op" id="2571910">(</span><span class="ident" id="2571911">match</span>&nbsp;<span class="keyword" id="2571917">func</span><span class="op" id="2571921">(</span><span class="builtintype" id="2571922">string</span><span class="op" id="2571928">)</span>&nbsp;<span class="builtintype" id="2571930">bool</span><span class="op" id="2571934">)</span>&nbsp;<span class="ident" id="2571936">Value</span>&nbsp;<span class="op" id="2571942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2571945">if</span>&nbsp;<span class="ident" id="2571948">f</span><span class="op" id="2571949">,</span>&nbsp;<span class="ident" id="2571951">ok</span>&nbsp;<span class="op" id="2571954">:=</span>&nbsp;<span class="ident" id="2571957">v</span><span class="op" id="2571958">.</span><span class="ident" id="2571959">typ</span><span class="op" id="2571962">.</span><span class="ident" id="2571963">FieldByNameFunc</span><span class="op" id="2571978">(</span><span class="ident" id="2571979">match</span><span class="op" id="2571984">)</span><span class="op" id="2571985">;</span>&nbsp;<span class="ident" id="2571987">ok</span>&nbsp;<span class="op" id="2571990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2571994">return</span>&nbsp;<span class="ident" id="2572001">v</span><span class="op" id="2572002">.</span><span class="ident" id="2572003">FieldByIndex</span><span class="op" id="2572015">(</span><span class="ident" id="2572016">f</span><span class="op" id="2572017">.</span><span class="ident" id="2572018">Index</span><span class="op" id="2572023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2572026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2572029">return</span>&nbsp;<span class="ident" id="2572036">Value</span><span class="op" id="2572041">{</span><span class="op" id="2572042">}</span><br>
<span class="lineno">775</span><span class="op" id="2572044">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2572047">//&nbsp;Float&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno"></span><span class="comment" id="2572100">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64</span><br>
<span class="lineno"></span><span class="keyword" id="2572151">func</span>&nbsp;<span class="op" id="2572156">(</span><span class="ident" id="2572157">v</span>&nbsp;<span class="ident" id="2572159">Value</span><span class="op" id="2572164">)</span>&nbsp;<span class="ident" id="2572166">Float</span><span class="op" id="2572171">(</span><span class="op" id="2572172">)</span>&nbsp;<span class="builtintype" id="2572174">float64</span>&nbsp;<span class="op" id="2572182">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2572185">k</span>&nbsp;<span class="op" id="2572187">:=</span>&nbsp;<span class="ident" id="2572190">v</span><span class="op" id="2572191">.</span><span class="ident" id="2572192">kind</span><span class="op" id="2572196">(</span><span class="op" id="2572197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2572200">switch</span>&nbsp;<span class="ident" id="2572207">k</span>&nbsp;<span class="op" id="2572209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2572212">case</span>&nbsp;<span class="ident" id="2572217">Float32</span><span class="op" id="2572224">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2572228">return</span>&nbsp;<span class="builtintype" id="2572235">float64</span><span class="op" id="2572242">(</span><span class="op" id="2572243">*</span><span class="op" id="2572244">(</span><span class="op" id="2572245">*</span><span class="builtintype" id="2572246">float32</span><span class="op" id="2572253">)</span><span class="op" id="2572254">(</span><span class="ident" id="2572255">v</span><span class="op" id="2572256">.</span><span class="ident" id="2572257">ptr</span><span class="op" id="2572260">)</span><span class="op" id="2572261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2572264">case</span>&nbsp;<span class="ident" id="2572269">Float64</span><span class="op" id="2572276">:</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2572280">return</span>&nbsp;<span class="op" id="2572287">*</span><span class="op" id="2572288">(</span><span class="op" id="2572289">*</span><span class="builtintype" id="2572290">float64</span><span class="op" id="2572297">)</span><span class="op" id="2572298">(</span><span class="ident" id="2572299">v</span><span class="op" id="2572300">.</span><span class="ident" id="2572301">ptr</span><span class="op" id="2572304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2572307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2572310">panic</span><span class="op" id="2572315">(</span><span class="op" id="2572316">&amp;</span><span class="ident" id="2572317">ValueError</span><span class="op" id="2572327">{</span><span class="string" id="2572328">&#34;reflect.Value.Float&#34;</span><span class="op" id="2572349">,</span>&nbsp;<span class="ident" id="2572351">v</span><span class="op" id="2572352">.</span><span class="ident" id="2572353">kind</span><span class="op" id="2572357">(</span><span class="op" id="2572358">)</span><span class="op" id="2572359">}</span><span class="op" id="2572360">)</span><br>
<span class="lineno"></span><span class="op" id="2572362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span><span class="keyword" id="2572365">var</span>&nbsp;<span class="ident" id="2572369">uint8Type</span>&nbsp;<span class="op" id="2572379">=</span>&nbsp;<span class="ident" id="2572381">TypeOf</span><span class="op" id="2572387">(</span><span class="builtintype" id="2572388">uint8</span><span class="op" id="2572393">(</span><span class="num" id="2572394">0</span><span class="op" id="2572395">)</span><span class="op" id="2572396">)</span><span class="op" id="2572397">.</span><span class="op" id="2572398">(</span><span class="op" id="2572399">*</span><span class="ident" id="2572400">rtype</span><span class="op" id="2572405">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2572408">//&nbsp;Index&nbsp;returns&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="2572443">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice,&nbsp;or&nbsp;String&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2572521">func</span>&nbsp;<span class="op" id="2572526">(</span><span class="ident" id="2572527">v</span>&nbsp;<span class="ident" id="2572529">Value</span><span class="op" id="2572534">)</span>&nbsp;<span class="ident" id="2572536">Index</span><span class="op" id="2572541">(</span><span class="ident" id="2572542">i</span>&nbsp;<span class="builtintype" id="2572544">int</span><span class="op" id="2572547">)</span>&nbsp;<span class="ident" id="2572549">Value</span>&nbsp;<span class="op" id="2572555">{</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2572558">switch</span>&nbsp;<span class="ident" id="2572565">v</span><span class="op" id="2572566">.</span><span class="ident" id="2572567">kind</span><span class="op" id="2572571">(</span><span class="op" id="2572572">)</span>&nbsp;<span class="op" id="2572574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2572577">case</span>&nbsp;<span class="ident" id="2572582">Array</span><span class="op" id="2572587">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2572591">tt</span>&nbsp;<span class="op" id="2572594">:=</span>&nbsp;<span class="op" id="2572597">(</span><span class="op" id="2572598">*</span><span class="ident" id="2572599">arrayType</span><span class="op" id="2572608">)</span><span class="op" id="2572609">(</span><span class="ident" id="2572610">unsafe</span><span class="op" id="2572616">.</span><span class="ident" id="2572617">Pointer</span><span class="op" id="2572624">(</span><span class="ident" id="2572625">v</span><span class="op" id="2572626">.</span><span class="ident" id="2572627">typ</span><span class="op" id="2572630">)</span><span class="op" id="2572631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2572635">if</span>&nbsp;<span class="builtintype" id="2572638">uint</span><span class="op" id="2572642">(</span><span class="ident" id="2572643">i</span><span class="op" id="2572644">)</span>&nbsp;<span class="op" id="2572646">&gt;=</span>&nbsp;<span class="builtintype" id="2572649">uint</span><span class="op" id="2572653">(</span><span class="ident" id="2572654">tt</span><span class="op" id="2572656">.</span><span class="builtinfunc" id="2572657">len</span><span class="op" id="2572660">)</span>&nbsp;<span class="op" id="2572662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2572667">panic</span><span class="op" id="2572672">(</span><span class="string" id="2572673">&#34;reflect:&nbsp;array&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2572708">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2572712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2572716">typ</span>&nbsp;<span class="op" id="2572720">:=</span>&nbsp;<span class="ident" id="2572723">tt</span><span class="op" id="2572725">.</span><span class="ident" id="2572726">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2572733">offset</span>&nbsp;<span class="op" id="2572740">:=</span>&nbsp;<span class="builtintype" id="2572743">uintptr</span><span class="op" id="2572750">(</span><span class="ident" id="2572751">i</span><span class="op" id="2572752">)</span>&nbsp;<span class="op" id="2572754">*</span>&nbsp;<span class="ident" id="2572756">typ</span><span class="op" id="2572759">.</span><span class="ident" id="2572760">size</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2572768">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;array,</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2572824">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;array&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2572889">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2572938">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;doing&nbsp;Index(0),&nbsp;so&nbsp;offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2573005">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2573043">val</span>&nbsp;<span class="op" id="2573047">:=</span>&nbsp;<span class="ident" id="2573050">unsafe</span><span class="op" id="2573056">.</span><span class="ident" id="2573057">Pointer</span><span class="op" id="2573064">(</span><span class="builtintype" id="2573065">uintptr</span><span class="op" id="2573072">(</span><span class="ident" id="2573073">v</span><span class="op" id="2573074">.</span><span class="ident" id="2573075">ptr</span><span class="op" id="2573078">)</span>&nbsp;<span class="op" id="2573080">+</span>&nbsp;<span class="ident" id="2573082">offset</span><span class="op" id="2573088">)</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2573092">fl</span>&nbsp;<span class="op" id="2573095">:=</span>&nbsp;<span class="ident" id="2573098">v</span><span class="op" id="2573099">.</span><span class="ident" id="2573100">flag</span><span class="op" id="2573104">&amp;</span><span class="op" id="2573105">(</span><span class="ident" id="2573106">flagRO</span><span class="op" id="2573112">|</span><span class="ident" id="2573113">flagIndir</span><span class="op" id="2573122">|</span><span class="ident" id="2573123">flagAddr</span><span class="op" id="2573131">)</span>&nbsp;<span class="op" id="2573133">|</span>&nbsp;<span class="ident" id="2573135">flag</span><span class="op" id="2573139">(</span><span class="ident" id="2573140">typ</span><span class="op" id="2573143">.</span><span class="ident" id="2573144">Kind</span><span class="op" id="2573148">(</span><span class="op" id="2573149">)</span><span class="op" id="2573150">)</span>&nbsp;<span class="comment" id="2573152">//&nbsp;bits&nbsp;same&nbsp;as&nbsp;overall&nbsp;array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573184">return</span>&nbsp;<span class="ident" id="2573191">Value</span><span class="op" id="2573196">{</span><span class="ident" id="2573197">typ</span><span class="op" id="2573200">,</span>&nbsp;<span class="ident" id="2573202">val</span><span class="op" id="2573205">,</span>&nbsp;<span class="ident" id="2573207">fl</span><span class="op" id="2573209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573213">case</span>&nbsp;<span class="ident" id="2573218">Slice</span><span class="op" id="2573223">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2573227">//&nbsp;Element&nbsp;flag&nbsp;same&nbsp;as&nbsp;Elem&nbsp;of&nbsp;Ptr.</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2573266">//&nbsp;Addressable,&nbsp;indirect,&nbsp;possibly&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2573314">s</span>&nbsp;<span class="op" id="2573316">:=</span>&nbsp;<span class="op" id="2573319">(</span><span class="op" id="2573320">*</span><span class="ident" id="2573321">sliceHeader</span><span class="op" id="2573332">)</span><span class="op" id="2573333">(</span><span class="ident" id="2573334">v</span><span class="op" id="2573335">.</span><span class="ident" id="2573336">ptr</span><span class="op" id="2573339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573343">if</span>&nbsp;<span class="builtintype" id="2573346">uint</span><span class="op" id="2573350">(</span><span class="ident" id="2573351">i</span><span class="op" id="2573352">)</span>&nbsp;<span class="op" id="2573354">&gt;=</span>&nbsp;<span class="builtintype" id="2573357">uint</span><span class="op" id="2573361">(</span><span class="ident" id="2573362">s</span><span class="op" id="2573363">.</span><span class="ident" id="2573364">Len</span><span class="op" id="2573367">)</span>&nbsp;<span class="op" id="2573369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2573374">panic</span><span class="op" id="2573379">(</span><span class="string" id="2573380">&#34;reflect:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2573415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2573419">}</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2573423">tt</span>&nbsp;<span class="op" id="2573426">:=</span>&nbsp;<span class="op" id="2573429">(</span><span class="op" id="2573430">*</span><span class="ident" id="2573431">sliceType</span><span class="op" id="2573440">)</span><span class="op" id="2573441">(</span><span class="ident" id="2573442">unsafe</span><span class="op" id="2573448">.</span><span class="ident" id="2573449">Pointer</span><span class="op" id="2573456">(</span><span class="ident" id="2573457">v</span><span class="op" id="2573458">.</span><span class="ident" id="2573459">typ</span><span class="op" id="2573462">)</span><span class="op" id="2573463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2573467">typ</span>&nbsp;<span class="op" id="2573471">:=</span>&nbsp;<span class="ident" id="2573474">tt</span><span class="op" id="2573476">.</span><span class="ident" id="2573477">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2573484">val</span>&nbsp;<span class="op" id="2573488">:=</span>&nbsp;<span class="ident" id="2573491">unsafe</span><span class="op" id="2573497">.</span><span class="ident" id="2573498">Pointer</span><span class="op" id="2573505">(</span><span class="builtintype" id="2573506">uintptr</span><span class="op" id="2573513">(</span><span class="ident" id="2573514">s</span><span class="op" id="2573515">.</span><span class="ident" id="2573516">Data</span><span class="op" id="2573520">)</span>&nbsp;<span class="op" id="2573522">+</span>&nbsp;<span class="builtintype" id="2573524">uintptr</span><span class="op" id="2573531">(</span><span class="ident" id="2573532">i</span><span class="op" id="2573533">)</span><span class="op" id="2573534">*</span><span class="ident" id="2573535">typ</span><span class="op" id="2573538">.</span><span class="ident" id="2573539">size</span><span class="op" id="2573543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2573547">fl</span>&nbsp;<span class="op" id="2573550">:=</span>&nbsp;<span class="ident" id="2573553">flagAddr</span>&nbsp;<span class="op" id="2573562">|</span>&nbsp;<span class="ident" id="2573564">flagIndir</span>&nbsp;<span class="op" id="2573574">|</span>&nbsp;<span class="ident" id="2573576">v</span><span class="op" id="2573577">.</span><span class="ident" id="2573578">flag</span><span class="op" id="2573582">&amp;</span><span class="ident" id="2573583">flagRO</span>&nbsp;<span class="op" id="2573590">|</span>&nbsp;<span class="ident" id="2573592">flag</span><span class="op" id="2573596">(</span><span class="ident" id="2573597">typ</span><span class="op" id="2573600">.</span><span class="ident" id="2573601">Kind</span><span class="op" id="2573605">(</span><span class="op" id="2573606">)</span><span class="op" id="2573607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573611">return</span>&nbsp;<span class="ident" id="2573618">Value</span><span class="op" id="2573623">{</span><span class="ident" id="2573624">typ</span><span class="op" id="2573627">,</span>&nbsp;<span class="ident" id="2573629">val</span><span class="op" id="2573632">,</span>&nbsp;<span class="ident" id="2573634">fl</span><span class="op" id="2573636">}</span><br>
<span class="lineno">825</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573640">case</span>&nbsp;<span class="ident" id="2573645">String</span><span class="op" id="2573651">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2573655">s</span>&nbsp;<span class="op" id="2573657">:=</span>&nbsp;<span class="op" id="2573660">(</span><span class="op" id="2573661">*</span><span class="ident" id="2573662">stringHeader</span><span class="op" id="2573674">)</span><span class="op" id="2573675">(</span><span class="ident" id="2573676">v</span><span class="op" id="2573677">.</span><span class="ident" id="2573678">ptr</span><span class="op" id="2573681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573685">if</span>&nbsp;<span class="builtintype" id="2573688">uint</span><span class="op" id="2573692">(</span><span class="ident" id="2573693">i</span><span class="op" id="2573694">)</span>&nbsp;<span class="op" id="2573696">&gt;=</span>&nbsp;<span class="builtintype" id="2573699">uint</span><span class="op" id="2573703">(</span><span class="ident" id="2573704">s</span><span class="op" id="2573705">.</span><span class="ident" id="2573706">Len</span><span class="op" id="2573709">)</span>&nbsp;<span class="op" id="2573711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2573716">panic</span><span class="op" id="2573721">(</span><span class="string" id="2573722">&#34;reflect:&nbsp;string&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2573758">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2573762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2573766">p</span>&nbsp;<span class="op" id="2573768">:=</span>&nbsp;<span class="ident" id="2573771">unsafe</span><span class="op" id="2573777">.</span><span class="ident" id="2573778">Pointer</span><span class="op" id="2573785">(</span><span class="builtintype" id="2573786">uintptr</span><span class="op" id="2573793">(</span><span class="ident" id="2573794">s</span><span class="op" id="2573795">.</span><span class="ident" id="2573796">Data</span><span class="op" id="2573800">)</span>&nbsp;<span class="op" id="2573802">+</span>&nbsp;<span class="builtintype" id="2573804">uintptr</span><span class="op" id="2573811">(</span><span class="ident" id="2573812">i</span><span class="op" id="2573813">)</span><span class="op" id="2573814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2573818">fl</span>&nbsp;<span class="op" id="2573821">:=</span>&nbsp;<span class="ident" id="2573824">v</span><span class="op" id="2573825">.</span><span class="ident" id="2573826">flag</span><span class="op" id="2573830">&amp;</span><span class="ident" id="2573831">flagRO</span>&nbsp;<span class="op" id="2573838">|</span>&nbsp;<span class="ident" id="2573840">flag</span><span class="op" id="2573844">(</span><span class="ident" id="2573845">Uint8</span><span class="op" id="2573850">)</span>&nbsp;<span class="op" id="2573852">|</span>&nbsp;<span class="ident" id="2573854">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573866">return</span>&nbsp;<span class="ident" id="2573873">Value</span><span class="op" id="2573878">{</span><span class="ident" id="2573879">uint8Type</span><span class="op" id="2573888">,</span>&nbsp;<span class="ident" id="2573890">p</span><span class="op" id="2573891">,</span>&nbsp;<span class="ident" id="2573893">fl</span><span class="op" id="2573895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2573898">}</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2573901">panic</span><span class="op" id="2573906">(</span><span class="op" id="2573907">&amp;</span><span class="ident" id="2573908">ValueError</span><span class="op" id="2573918">{</span><span class="string" id="2573919">&#34;reflect.Value.Index&#34;</span><span class="op" id="2573940">,</span>&nbsp;<span class="ident" id="2573942">v</span><span class="op" id="2573943">.</span><span class="ident" id="2573944">kind</span><span class="op" id="2573948">(</span><span class="op" id="2573949">)</span><span class="op" id="2573950">}</span><span class="op" id="2573951">)</span><br>
<span class="lineno"></span><span class="op" id="2573953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2573956">//&nbsp;Int&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2574006">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno">840</span><span class="keyword" id="2574073">func</span>&nbsp;<span class="op" id="2574078">(</span><span class="ident" id="2574079">v</span>&nbsp;<span class="ident" id="2574081">Value</span><span class="op" id="2574086">)</span>&nbsp;<span class="ident" id="2574088">Int</span><span class="op" id="2574091">(</span><span class="op" id="2574092">)</span>&nbsp;<span class="ident" id="2574094">int64</span>&nbsp;<span class="op" id="2574100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2574103">k</span>&nbsp;<span class="op" id="2574105">:=</span>&nbsp;<span class="ident" id="2574108">v</span><span class="op" id="2574109">.</span><span class="ident" id="2574110">kind</span><span class="op" id="2574114">(</span><span class="op" id="2574115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2574118">p</span>&nbsp;<span class="op" id="2574120">:=</span>&nbsp;<span class="ident" id="2574123">v</span><span class="op" id="2574124">.</span><span class="ident" id="2574125">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574130">switch</span>&nbsp;<span class="ident" id="2574137">k</span>&nbsp;<span class="op" id="2574139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574142">case</span>&nbsp;<span class="ident" id="2574147">Int</span><span class="op" id="2574150">:</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574154">return</span>&nbsp;<span class="ident" id="2574161">int64</span><span class="op" id="2574166">(</span><span class="op" id="2574167">*</span><span class="op" id="2574168">(</span><span class="op" id="2574169">*</span><span class="builtintype" id="2574170">int</span><span class="op" id="2574173">)</span><span class="op" id="2574174">(</span><span class="ident" id="2574175">p</span><span class="op" id="2574176">)</span><span class="op" id="2574177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574180">case</span>&nbsp;<span class="ident" id="2574185">Int8</span><span class="op" id="2574189">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574193">return</span>&nbsp;<span class="ident" id="2574200">int64</span><span class="op" id="2574205">(</span><span class="op" id="2574206">*</span><span class="op" id="2574207">(</span><span class="op" id="2574208">*</span><span class="builtintype" id="2574209">int8</span><span class="op" id="2574213">)</span><span class="op" id="2574214">(</span><span class="ident" id="2574215">p</span><span class="op" id="2574216">)</span><span class="op" id="2574217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574220">case</span>&nbsp;<span class="ident" id="2574225">Int16</span><span class="op" id="2574230">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574234">return</span>&nbsp;<span class="ident" id="2574241">int64</span><span class="op" id="2574246">(</span><span class="op" id="2574247">*</span><span class="op" id="2574248">(</span><span class="op" id="2574249">*</span><span class="builtintype" id="2574250">int16</span><span class="op" id="2574255">)</span><span class="op" id="2574256">(</span><span class="ident" id="2574257">p</span><span class="op" id="2574258">)</span><span class="op" id="2574259">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574262">case</span>&nbsp;<span class="ident" id="2574267">Int32</span><span class="op" id="2574272">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574276">return</span>&nbsp;<span class="ident" id="2574283">int64</span><span class="op" id="2574288">(</span><span class="op" id="2574289">*</span><span class="op" id="2574290">(</span><span class="op" id="2574291">*</span><span class="builtintype" id="2574292">int32</span><span class="op" id="2574297">)</span><span class="op" id="2574298">(</span><span class="ident" id="2574299">p</span><span class="op" id="2574300">)</span><span class="op" id="2574301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574304">case</span>&nbsp;<span class="ident" id="2574309">Int64</span><span class="op" id="2574314">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574318">return</span>&nbsp;<span class="ident" id="2574325">int64</span><span class="op" id="2574330">(</span><span class="op" id="2574331">*</span><span class="op" id="2574332">(</span><span class="op" id="2574333">*</span><span class="ident" id="2574334">int64</span><span class="op" id="2574339">)</span><span class="op" id="2574340">(</span><span class="ident" id="2574341">p</span><span class="op" id="2574342">)</span><span class="op" id="2574343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2574346">}</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2574349">panic</span><span class="op" id="2574354">(</span><span class="op" id="2574355">&amp;</span><span class="ident" id="2574356">ValueError</span><span class="op" id="2574366">{</span><span class="string" id="2574367">&#34;reflect.Value.Int&#34;</span><span class="op" id="2574386">,</span>&nbsp;<span class="ident" id="2574388">v</span><span class="op" id="2574389">.</span><span class="ident" id="2574390">kind</span><span class="op" id="2574394">(</span><span class="op" id="2574395">)</span><span class="op" id="2574396">}</span><span class="op" id="2574397">)</span><br>
<span class="lineno"></span><span class="op" id="2574399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2574402">//&nbsp;CanInterface&nbsp;returns&nbsp;true&nbsp;if&nbsp;Interface&nbsp;can&nbsp;be&nbsp;used&nbsp;without&nbsp;panicking.</span><br>
<span class="lineno"></span><span class="keyword" id="2574475">func</span>&nbsp;<span class="op" id="2574480">(</span><span class="ident" id="2574481">v</span>&nbsp;<span class="ident" id="2574483">Value</span><span class="op" id="2574488">)</span>&nbsp;<span class="ident" id="2574490">CanInterface</span><span class="op" id="2574502">(</span><span class="op" id="2574503">)</span>&nbsp;<span class="builtintype" id="2574505">bool</span>&nbsp;<span class="op" id="2574510">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574513">if</span>&nbsp;<span class="ident" id="2574516">v</span><span class="op" id="2574517">.</span><span class="ident" id="2574518">flag</span>&nbsp;<span class="op" id="2574523">==</span>&nbsp;<span class="num" id="2574526">0</span>&nbsp;<span class="op" id="2574528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2574532">panic</span><span class="op" id="2574537">(</span><span class="op" id="2574538">&amp;</span><span class="ident" id="2574539">ValueError</span><span class="op" id="2574549">{</span><span class="string" id="2574550">&#34;reflect.Value.CanInterface&#34;</span><span class="op" id="2574578">,</span>&nbsp;<span class="ident" id="2574580">Invalid</span><span class="op" id="2574587">}</span><span class="op" id="2574588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2574591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574594">return</span>&nbsp;<span class="ident" id="2574601">v</span><span class="op" id="2574602">.</span><span class="ident" id="2574603">flag</span><span class="op" id="2574607">&amp;</span><span class="ident" id="2574608">flagRO</span>&nbsp;<span class="op" id="2574615">==</span>&nbsp;<span class="num" id="2574618">0</span><br>
<span class="lineno"></span><span class="op" id="2574620">}</span><br>
<span class="lineno">865</span><br>
<span class="lineno"></span><span class="comment" id="2574623">//&nbsp;Interface&nbsp;returns&nbsp;v&#39;s&nbsp;current&nbsp;value&nbsp;as&nbsp;an&nbsp;interface{}.</span><br>
<span class="lineno"></span><span class="comment" id="2574681">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to:</span><br>
<span class="lineno"></span><span class="comment" id="2574705">//&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;i&nbsp;interface{}&nbsp;=&nbsp;(v&#39;s&nbsp;underlying&nbsp;value)</span><br>
<span class="lineno"></span><span class="comment" id="2574751">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;the&nbsp;Value&nbsp;was&nbsp;obtained&nbsp;by&nbsp;accessing</span><br>
<span class="lineno">870</span><span class="comment" id="2574803">//&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="2574832">func</span>&nbsp;<span class="op" id="2574837">(</span><span class="ident" id="2574838">v</span>&nbsp;<span class="ident" id="2574840">Value</span><span class="op" id="2574845">)</span>&nbsp;<span class="ident" id="2574847">Interface</span><span class="op" id="2574856">(</span><span class="op" id="2574857">)</span>&nbsp;<span class="op" id="2574859">(</span><span class="ident" id="2574860">i</span>&nbsp;<span class="keyword" id="2574862">interface</span><span class="op" id="2574871">{</span><span class="op" id="2574872">}</span><span class="op" id="2574873">)</span>&nbsp;<span class="op" id="2574875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574878">return</span>&nbsp;<span class="ident" id="2574885">valueInterface</span><span class="op" id="2574899">(</span><span class="ident" id="2574900">v</span><span class="op" id="2574901">,</span>&nbsp;<span class="builtintype" id="2574903">true</span><span class="op" id="2574907">)</span><br>
<span class="lineno"></span><span class="op" id="2574909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">875</span><span class="keyword" id="2574912">func</span>&nbsp;<span class="ident" id="2574917">valueInterface</span><span class="op" id="2574931">(</span><span class="ident" id="2574932">v</span>&nbsp;<span class="ident" id="2574934">Value</span><span class="op" id="2574939">,</span>&nbsp;<span class="ident" id="2574941">safe</span>&nbsp;<span class="builtintype" id="2574946">bool</span><span class="op" id="2574950">)</span>&nbsp;<span class="keyword" id="2574952">interface</span><span class="op" id="2574961">{</span><span class="op" id="2574962">}</span>&nbsp;<span class="op" id="2574964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574967">if</span>&nbsp;<span class="ident" id="2574970">v</span><span class="op" id="2574971">.</span><span class="ident" id="2574972">flag</span>&nbsp;<span class="op" id="2574977">==</span>&nbsp;<span class="num" id="2574980">0</span>&nbsp;<span class="op" id="2574982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2574986">panic</span><span class="op" id="2574991">(</span><span class="op" id="2574992">&amp;</span><span class="ident" id="2574993">ValueError</span><span class="op" id="2575003">{</span><span class="string" id="2575004">&#34;reflect.Value.Interface&#34;</span><span class="op" id="2575029">,</span>&nbsp;<span class="num" id="2575031">0</span><span class="op" id="2575032">}</span><span class="op" id="2575033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2575036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2575039">if</span>&nbsp;<span class="ident" id="2575042">safe</span>&nbsp;<span class="op" id="2575047">&amp;&amp;</span>&nbsp;<span class="ident" id="2575050">v</span><span class="op" id="2575051">.</span><span class="ident" id="2575052">flag</span><span class="op" id="2575056">&amp;</span><span class="ident" id="2575057">flagRO</span>&nbsp;<span class="op" id="2575064">!=</span>&nbsp;<span class="num" id="2575067">0</span>&nbsp;<span class="op" id="2575069">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2575073">//&nbsp;Do&nbsp;not&nbsp;allow&nbsp;access&nbsp;to&nbsp;unexported&nbsp;values&nbsp;via&nbsp;Interface,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2575134">//&nbsp;because&nbsp;they&nbsp;might&nbsp;be&nbsp;pointers&nbsp;that&nbsp;should&nbsp;not&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2575189">//&nbsp;writable&nbsp;or&nbsp;methods&nbsp;or&nbsp;function&nbsp;that&nbsp;should&nbsp;not&nbsp;be&nbsp;callable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2575255">panic</span><span class="op" id="2575260">(</span><span class="string" id="2575261">&#34;reflect.Value.Interface:&nbsp;cannot&nbsp;return&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&nbsp;or&nbsp;method&#34;</span><span class="op" id="2575348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2575351">}</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2575354">if</span>&nbsp;<span class="ident" id="2575357">v</span><span class="op" id="2575358">.</span><span class="ident" id="2575359">flag</span><span class="op" id="2575363">&amp;</span><span class="ident" id="2575364">flagMethod</span>&nbsp;<span class="op" id="2575375">!=</span>&nbsp;<span class="num" id="2575378">0</span>&nbsp;<span class="op" id="2575380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2575384">v</span>&nbsp;<span class="op" id="2575386">=</span>&nbsp;<span class="ident" id="2575388">makeMethodValue</span><span class="op" id="2575403">(</span><span class="string" id="2575404">&#34;Interface&#34;</span><span class="op" id="2575415">,</span>&nbsp;<span class="ident" id="2575417">v</span><span class="op" id="2575418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2575421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2575425">if</span>&nbsp;<span class="ident" id="2575428">v</span><span class="op" id="2575429">.</span><span class="ident" id="2575430">kind</span><span class="op" id="2575434">(</span><span class="op" id="2575435">)</span>&nbsp;<span class="op" id="2575437">==</span>&nbsp;<span class="ident" id="2575440">Interface</span>&nbsp;<span class="op" id="2575450">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2575454">//&nbsp;Special&nbsp;case:&nbsp;return&nbsp;the&nbsp;element&nbsp;inside&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2575514">//&nbsp;Empty&nbsp;interface&nbsp;has&nbsp;one&nbsp;layout,&nbsp;all&nbsp;interfaces&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2575571">//&nbsp;methods&nbsp;have&nbsp;a&nbsp;second&nbsp;layout.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2575606">if</span>&nbsp;<span class="ident" id="2575609">v</span><span class="op" id="2575610">.</span><span class="ident" id="2575611">NumMethod</span><span class="op" id="2575620">(</span><span class="op" id="2575621">)</span>&nbsp;<span class="op" id="2575623">==</span>&nbsp;<span class="num" id="2575626">0</span>&nbsp;<span class="op" id="2575628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2575633">return</span>&nbsp;<span class="op" id="2575640">*</span><span class="op" id="2575641">(</span><span class="op" id="2575642">*</span><span class="keyword" id="2575643">interface</span><span class="op" id="2575652">{</span><span class="op" id="2575653">}</span><span class="op" id="2575654">)</span><span class="op" id="2575655">(</span><span class="ident" id="2575656">v</span><span class="op" id="2575657">.</span><span class="ident" id="2575658">ptr</span><span class="op" id="2575661">)</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2575665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2575669">return</span>&nbsp;<span class="op" id="2575676">*</span><span class="op" id="2575677">(</span><span class="op" id="2575678">*</span><span class="keyword" id="2575679">interface</span>&nbsp;<span class="op" id="2575689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2575694">M</span><span class="op" id="2575695">(</span><span class="op" id="2575696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2575700">}</span><span class="op" id="2575701">)</span><span class="op" id="2575702">(</span><span class="ident" id="2575703">v</span><span class="op" id="2575704">.</span><span class="ident" id="2575705">ptr</span><span class="op" id="2575708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2575711">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2575715">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;to&nbsp;packEface&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2575788">return</span>&nbsp;<span class="ident" id="2575795">packEface</span><span class="op" id="2575804">(</span><span class="ident" id="2575805">v</span><span class="op" id="2575806">)</span><br>
<span class="lineno"></span><span class="op" id="2575808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span><span class="comment" id="2575811">//&nbsp;InterfaceData&nbsp;returns&nbsp;the&nbsp;interface&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr&nbsp;pair.</span><br>
<span class="lineno"></span><span class="comment" id="2575879">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2575922">func</span>&nbsp;<span class="op" id="2575927">(</span><span class="ident" id="2575928">v</span>&nbsp;<span class="ident" id="2575930">Value</span><span class="op" id="2575935">)</span>&nbsp;<span class="ident" id="2575937">InterfaceData</span><span class="op" id="2575950">(</span><span class="op" id="2575951">)</span>&nbsp;<span class="op" id="2575953">[</span><span class="num" id="2575954">2</span><span class="op" id="2575955">]</span><span class="builtintype" id="2575956">uintptr</span>&nbsp;<span class="op" id="2575964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2575967">//&nbsp;TODO:&nbsp;deprecate&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2575992">v</span><span class="op" id="2575993">.</span><span class="ident" id="2575994">mustBe</span><span class="op" id="2576000">(</span><span class="ident" id="2576001">Interface</span><span class="op" id="2576010">)</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2576013">//&nbsp;We&nbsp;treat&nbsp;this&nbsp;as&nbsp;a&nbsp;read&nbsp;operation,&nbsp;so&nbsp;we&nbsp;allow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2576064">//&nbsp;it&nbsp;even&nbsp;for&nbsp;unexported&nbsp;data,&nbsp;because&nbsp;the&nbsp;caller</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2576116">//&nbsp;has&nbsp;to&nbsp;import&nbsp;&#34;unsafe&#34;&nbsp;to&nbsp;turn&nbsp;it&nbsp;into&nbsp;something</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2576169">//&nbsp;that&nbsp;can&nbsp;be&nbsp;abused.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2576193">//&nbsp;Interface&nbsp;value&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2576261">return</span>&nbsp;<span class="op" id="2576268">*</span><span class="op" id="2576269">(</span><span class="op" id="2576270">*</span><span class="op" id="2576271">[</span><span class="num" id="2576272">2</span><span class="op" id="2576273">]</span><span class="builtintype" id="2576274">uintptr</span><span class="op" id="2576281">)</span><span class="op" id="2576282">(</span><span class="ident" id="2576283">v</span><span class="op" id="2576284">.</span><span class="ident" id="2576285">ptr</span><span class="op" id="2576288">)</span><br>
<span class="lineno"></span><span class="op" id="2576290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2576293">//&nbsp;IsNil&nbsp;reports&nbsp;whether&nbsp;its&nbsp;argument&nbsp;v&nbsp;is&nbsp;nil.&nbsp;The&nbsp;argument&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2576362">//&nbsp;a&nbsp;chan,&nbsp;func,&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice&nbsp;value;&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno">920</span><span class="comment" id="2576429">//&nbsp;not,&nbsp;IsNil&nbsp;panics.&nbsp;Note&nbsp;that&nbsp;IsNil&nbsp;is&nbsp;not&nbsp;always&nbsp;equivalent&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2576497">//&nbsp;regular&nbsp;comparison&nbsp;with&nbsp;nil&nbsp;in&nbsp;Go.&nbsp;For&nbsp;example,&nbsp;if&nbsp;v&nbsp;was&nbsp;created</span><br>
<span class="lineno"></span><span class="comment" id="2576565">//&nbsp;by&nbsp;calling&nbsp;ValueOf&nbsp;with&nbsp;an&nbsp;uninitialized&nbsp;interface&nbsp;variable&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2576631">//&nbsp;i==nil&nbsp;will&nbsp;be&nbsp;true&nbsp;but&nbsp;v.IsNil&nbsp;will&nbsp;panic&nbsp;as&nbsp;v&nbsp;will&nbsp;be&nbsp;the&nbsp;zero</span><br>
<span class="lineno"></span><span class="comment" id="2576699">//&nbsp;Value.</span><br>
<span class="lineno">925</span><span class="keyword" id="2576709">func</span>&nbsp;<span class="op" id="2576714">(</span><span class="ident" id="2576715">v</span>&nbsp;<span class="ident" id="2576717">Value</span><span class="op" id="2576722">)</span>&nbsp;<span class="ident" id="2576724">IsNil</span><span class="op" id="2576729">(</span><span class="op" id="2576730">)</span>&nbsp;<span class="builtintype" id="2576732">bool</span>&nbsp;<span class="op" id="2576737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2576740">k</span>&nbsp;<span class="op" id="2576742">:=</span>&nbsp;<span class="ident" id="2576745">v</span><span class="op" id="2576746">.</span><span class="ident" id="2576747">kind</span><span class="op" id="2576751">(</span><span class="op" id="2576752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2576755">switch</span>&nbsp;<span class="ident" id="2576762">k</span>&nbsp;<span class="op" id="2576764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2576767">case</span>&nbsp;<span class="ident" id="2576772">Chan</span><span class="op" id="2576776">,</span>&nbsp;<span class="ident" id="2576778">Func</span><span class="op" id="2576782">,</span>&nbsp;<span class="ident" id="2576784">Map</span><span class="op" id="2576787">,</span>&nbsp;<span class="ident" id="2576789">Ptr</span><span class="op" id="2576792">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2576796">if</span>&nbsp;<span class="ident" id="2576799">v</span><span class="op" id="2576800">.</span><span class="ident" id="2576801">flag</span><span class="op" id="2576805">&amp;</span><span class="ident" id="2576806">flagMethod</span>&nbsp;<span class="op" id="2576817">!=</span>&nbsp;<span class="num" id="2576820">0</span>&nbsp;<span class="op" id="2576822">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2576827">return</span>&nbsp;<span class="builtintype" id="2576834">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2576842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2576846">ptr</span>&nbsp;<span class="op" id="2576850">:=</span>&nbsp;<span class="ident" id="2576853">v</span><span class="op" id="2576854">.</span><span class="ident" id="2576855">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2576861">if</span>&nbsp;<span class="ident" id="2576864">v</span><span class="op" id="2576865">.</span><span class="ident" id="2576866">flag</span><span class="op" id="2576870">&amp;</span><span class="ident" id="2576871">flagIndir</span>&nbsp;<span class="op" id="2576881">!=</span>&nbsp;<span class="num" id="2576884">0</span>&nbsp;<span class="op" id="2576886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2576891">ptr</span>&nbsp;<span class="op" id="2576895">=</span>&nbsp;<span class="op" id="2576897">*</span><span class="op" id="2576898">(</span><span class="op" id="2576899">*</span><span class="ident" id="2576900">unsafe</span><span class="op" id="2576906">.</span><span class="ident" id="2576907">Pointer</span><span class="op" id="2576914">)</span><span class="op" id="2576915">(</span><span class="ident" id="2576916">ptr</span><span class="op" id="2576919">)</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2576923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2576927">return</span>&nbsp;<span class="ident" id="2576934">ptr</span>&nbsp;<span class="op" id="2576938">==</span>&nbsp;<span class="ident" id="2576941">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2576946">case</span>&nbsp;<span class="ident" id="2576951">Interface</span><span class="op" id="2576960">,</span>&nbsp;<span class="ident" id="2576962">Slice</span><span class="op" id="2576967">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2576971">//&nbsp;Both&nbsp;interface&nbsp;and&nbsp;slice&nbsp;are&nbsp;nil&nbsp;if&nbsp;first&nbsp;word&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2577029">//&nbsp;Both&nbsp;are&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2577088">return</span>&nbsp;<span class="op" id="2577095">*</span><span class="op" id="2577096">(</span><span class="op" id="2577097">*</span><span class="ident" id="2577098">unsafe</span><span class="op" id="2577104">.</span><span class="ident" id="2577105">Pointer</span><span class="op" id="2577112">)</span><span class="op" id="2577113">(</span><span class="ident" id="2577114">v</span><span class="op" id="2577115">.</span><span class="ident" id="2577116">ptr</span><span class="op" id="2577119">)</span>&nbsp;<span class="op" id="2577121">==</span>&nbsp;<span class="ident" id="2577124">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2577129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2577132">panic</span><span class="op" id="2577137">(</span><span class="op" id="2577138">&amp;</span><span class="ident" id="2577139">ValueError</span><span class="op" id="2577149">{</span><span class="string" id="2577150">&#34;reflect.Value.IsNil&#34;</span><span class="op" id="2577171">,</span>&nbsp;<span class="ident" id="2577173">v</span><span class="op" id="2577174">.</span><span class="ident" id="2577175">kind</span><span class="op" id="2577179">(</span><span class="op" id="2577180">)</span><span class="op" id="2577181">}</span><span class="op" id="2577182">)</span><br>
<span class="lineno"></span><span class="op" id="2577184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span><span class="comment" id="2577187">//&nbsp;IsValid&nbsp;returns&nbsp;true&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2577236">//&nbsp;It&nbsp;returns&nbsp;false&nbsp;if&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2577280">//&nbsp;If&nbsp;IsValid&nbsp;returns&nbsp;false,&nbsp;all&nbsp;other&nbsp;methods&nbsp;except&nbsp;String&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2577348">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2577409">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno">950</span><span class="keyword" id="2577477">func</span>&nbsp;<span class="op" id="2577482">(</span><span class="ident" id="2577483">v</span>&nbsp;<span class="ident" id="2577485">Value</span><span class="op" id="2577490">)</span>&nbsp;<span class="ident" id="2577492">IsValid</span><span class="op" id="2577499">(</span><span class="op" id="2577500">)</span>&nbsp;<span class="builtintype" id="2577502">bool</span>&nbsp;<span class="op" id="2577507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2577510">return</span>&nbsp;<span class="ident" id="2577517">v</span><span class="op" id="2577518">.</span><span class="ident" id="2577519">flag</span>&nbsp;<span class="op" id="2577524">!=</span>&nbsp;<span class="num" id="2577527">0</span><br>
<span class="lineno"></span><span class="op" id="2577529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2577532">//&nbsp;Kind&nbsp;returns&nbsp;v&#39;s&nbsp;Kind.</span><br>
<span class="lineno">955</span><span class="comment" id="2577558">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;(IsValid&nbsp;returns&nbsp;false),&nbsp;Kind&nbsp;returns&nbsp;Invalid.</span><br>
<span class="lineno"></span><span class="keyword" id="2577631">func</span>&nbsp;<span class="op" id="2577636">(</span><span class="ident" id="2577637">v</span>&nbsp;<span class="ident" id="2577639">Value</span><span class="op" id="2577644">)</span>&nbsp;<span class="ident" id="2577646">Kind</span><span class="op" id="2577650">(</span><span class="op" id="2577651">)</span>&nbsp;<span class="ident" id="2577653">Kind</span>&nbsp;<span class="op" id="2577658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2577661">return</span>&nbsp;<span class="ident" id="2577668">v</span><span class="op" id="2577669">.</span><span class="ident" id="2577670">kind</span><span class="op" id="2577674">(</span><span class="op" id="2577675">)</span><br>
<span class="lineno"></span><span class="op" id="2577677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">960</span><span class="comment" id="2577680">//&nbsp;Len&nbsp;returns&nbsp;v&#39;s&nbsp;length.</span><br>
<span class="lineno"></span><span class="comment" id="2577707">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;Map,&nbsp;Slice,&nbsp;or&nbsp;String.</span><br>
<span class="lineno"></span><span class="keyword" id="2577775">func</span>&nbsp;<span class="op" id="2577780">(</span><span class="ident" id="2577781">v</span>&nbsp;<span class="ident" id="2577783">Value</span><span class="op" id="2577788">)</span>&nbsp;<span class="ident" id="2577790">Len</span><span class="op" id="2577793">(</span><span class="op" id="2577794">)</span>&nbsp;<span class="builtintype" id="2577796">int</span>&nbsp;<span class="op" id="2577800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2577803">k</span>&nbsp;<span class="op" id="2577805">:=</span>&nbsp;<span class="ident" id="2577808">v</span><span class="op" id="2577809">.</span><span class="ident" id="2577810">kind</span><span class="op" id="2577814">(</span><span class="op" id="2577815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2577818">switch</span>&nbsp;<span class="ident" id="2577825">k</span>&nbsp;<span class="op" id="2577827">{</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2577830">case</span>&nbsp;<span class="ident" id="2577835">Array</span><span class="op" id="2577840">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2577844">tt</span>&nbsp;<span class="op" id="2577847">:=</span>&nbsp;<span class="op" id="2577850">(</span><span class="op" id="2577851">*</span><span class="ident" id="2577852">arrayType</span><span class="op" id="2577861">)</span><span class="op" id="2577862">(</span><span class="ident" id="2577863">unsafe</span><span class="op" id="2577869">.</span><span class="ident" id="2577870">Pointer</span><span class="op" id="2577877">(</span><span class="ident" id="2577878">v</span><span class="op" id="2577879">.</span><span class="ident" id="2577880">typ</span><span class="op" id="2577883">)</span><span class="op" id="2577884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2577888">return</span>&nbsp;<span class="builtintype" id="2577895">int</span><span class="op" id="2577898">(</span><span class="ident" id="2577899">tt</span><span class="op" id="2577901">.</span><span class="builtinfunc" id="2577902">len</span><span class="op" id="2577905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2577908">case</span>&nbsp;<span class="ident" id="2577913">Chan</span><span class="op" id="2577917">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2577921">return</span>&nbsp;<span class="ident" id="2577928">chanlen</span><span class="op" id="2577935">(</span><span class="ident" id="2577936">v</span><span class="op" id="2577937">.</span><span class="ident" id="2577938">pointer</span><span class="op" id="2577945">(</span><span class="op" id="2577946">)</span><span class="op" id="2577947">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2577950">case</span>&nbsp;<span class="ident" id="2577955">Map</span><span class="op" id="2577958">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2577962">return</span>&nbsp;<span class="ident" id="2577969">maplen</span><span class="op" id="2577975">(</span><span class="ident" id="2577976">v</span><span class="op" id="2577977">.</span><span class="ident" id="2577978">pointer</span><span class="op" id="2577985">(</span><span class="op" id="2577986">)</span><span class="op" id="2577987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2577990">case</span>&nbsp;<span class="ident" id="2577995">Slice</span><span class="op" id="2578000">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2578004">//&nbsp;Slice&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2578056">return</span>&nbsp;<span class="op" id="2578063">(</span><span class="op" id="2578064">*</span><span class="ident" id="2578065">sliceHeader</span><span class="op" id="2578076">)</span><span class="op" id="2578077">(</span><span class="ident" id="2578078">v</span><span class="op" id="2578079">.</span><span class="ident" id="2578080">ptr</span><span class="op" id="2578083">)</span><span class="op" id="2578084">.</span><span class="ident" id="2578085">Len</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2578090">case</span>&nbsp;<span class="ident" id="2578095">String</span><span class="op" id="2578101">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2578105">//&nbsp;String&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2578158">return</span>&nbsp;<span class="op" id="2578165">(</span><span class="op" id="2578166">*</span><span class="ident" id="2578167">stringHeader</span><span class="op" id="2578179">)</span><span class="op" id="2578180">(</span><span class="ident" id="2578181">v</span><span class="op" id="2578182">.</span><span class="ident" id="2578183">ptr</span><span class="op" id="2578186">)</span><span class="op" id="2578187">.</span><span class="ident" id="2578188">Len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2578193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2578196">panic</span><span class="op" id="2578201">(</span><span class="op" id="2578202">&amp;</span><span class="ident" id="2578203">ValueError</span><span class="op" id="2578213">{</span><span class="string" id="2578214">&#34;reflect.Value.Len&#34;</span><span class="op" id="2578233">,</span>&nbsp;<span class="ident" id="2578235">v</span><span class="op" id="2578236">.</span><span class="ident" id="2578237">kind</span><span class="op" id="2578241">(</span><span class="op" id="2578242">)</span><span class="op" id="2578243">}</span><span class="op" id="2578244">)</span><br>
<span class="lineno">980</span><span class="op" id="2578246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2578249">//&nbsp;MapIndex&nbsp;returns&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2578313">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2578350">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;key&nbsp;is&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;map&nbsp;or&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno">985</span><span class="comment" id="2578440">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;the&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2578511">func</span>&nbsp;<span class="op" id="2578516">(</span><span class="ident" id="2578517">v</span>&nbsp;<span class="ident" id="2578519">Value</span><span class="op" id="2578524">)</span>&nbsp;<span class="ident" id="2578526">MapIndex</span><span class="op" id="2578534">(</span><span class="ident" id="2578535">key</span>&nbsp;<span class="ident" id="2578539">Value</span><span class="op" id="2578544">)</span>&nbsp;<span class="ident" id="2578546">Value</span>&nbsp;<span class="op" id="2578552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2578555">v</span><span class="op" id="2578556">.</span><span class="ident" id="2578557">mustBe</span><span class="op" id="2578563">(</span><span class="ident" id="2578564">Map</span><span class="op" id="2578567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2578570">tt</span>&nbsp;<span class="op" id="2578573">:=</span>&nbsp;<span class="op" id="2578576">(</span><span class="op" id="2578577">*</span><span class="ident" id="2578578">mapType</span><span class="op" id="2578585">)</span><span class="op" id="2578586">(</span><span class="ident" id="2578587">unsafe</span><span class="op" id="2578593">.</span><span class="ident" id="2578594">Pointer</span><span class="op" id="2578601">(</span><span class="ident" id="2578602">v</span><span class="op" id="2578603">.</span><span class="ident" id="2578604">typ</span><span class="op" id="2578607">)</span><span class="op" id="2578608">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2578612">//&nbsp;Do&nbsp;not&nbsp;require&nbsp;key&nbsp;to&nbsp;be&nbsp;exported,&nbsp;so&nbsp;that&nbsp;DeepEqual</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2578669">//&nbsp;and&nbsp;other&nbsp;programs&nbsp;can&nbsp;use&nbsp;all&nbsp;the&nbsp;keys&nbsp;returned&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2578725">//&nbsp;MapKeys&nbsp;as&nbsp;arguments&nbsp;to&nbsp;MapIndex.&nbsp;&nbsp;If&nbsp;either&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2578782">//&nbsp;or&nbsp;the&nbsp;key&nbsp;is&nbsp;unexported,&nbsp;though,&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2578839">//&nbsp;considered&nbsp;unexported.&nbsp;&nbsp;This&nbsp;is&nbsp;consistent&nbsp;with&nbsp;the</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2578895">//&nbsp;behavior&nbsp;for&nbsp;structs,&nbsp;which&nbsp;allow&nbsp;read&nbsp;but&nbsp;not&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2578952">//&nbsp;of&nbsp;unexported&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2578978">key</span>&nbsp;<span class="op" id="2578982">=</span>&nbsp;<span class="ident" id="2578984">key</span><span class="op" id="2578987">.</span><span class="ident" id="2578988">assignTo</span><span class="op" id="2578996">(</span><span class="string" id="2578997">&#34;reflect.Value.MapIndex&#34;</span><span class="op" id="2579021">,</span>&nbsp;<span class="ident" id="2579023">tt</span><span class="op" id="2579025">.</span><span class="ident" id="2579026">key</span><span class="op" id="2579029">,</span>&nbsp;<span class="ident" id="2579031">nil</span><span class="op" id="2579034">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2579038">var</span>&nbsp;<span class="ident" id="2579042">k</span>&nbsp;<span class="ident" id="2579044">unsafe</span><span class="op" id="2579050">.</span><span class="ident" id="2579051">Pointer</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2579060">if</span>&nbsp;<span class="ident" id="2579063">key</span><span class="op" id="2579066">.</span><span class="ident" id="2579067">flag</span><span class="op" id="2579071">&amp;</span><span class="ident" id="2579072">flagIndir</span>&nbsp;<span class="op" id="2579082">!=</span>&nbsp;<span class="num" id="2579085">0</span>&nbsp;<span class="op" id="2579087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2579091">k</span>&nbsp;<span class="op" id="2579093">=</span>&nbsp;<span class="ident" id="2579095">key</span><span class="op" id="2579098">.</span><span class="ident" id="2579099">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2579104">}</span>&nbsp;<span class="keyword" id="2579106">else</span>&nbsp;<span class="op" id="2579111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2579115">k</span>&nbsp;<span class="op" id="2579117">=</span>&nbsp;<span class="ident" id="2579119">unsafe</span><span class="op" id="2579125">.</span><span class="ident" id="2579126">Pointer</span><span class="op" id="2579133">(</span><span class="op" id="2579134">&amp;</span><span class="ident" id="2579135">key</span><span class="op" id="2579138">.</span><span class="ident" id="2579139">ptr</span><span class="op" id="2579142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2579145">}</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2579148">e</span>&nbsp;<span class="op" id="2579150">:=</span>&nbsp;<span class="ident" id="2579153">mapaccess</span><span class="op" id="2579162">(</span><span class="ident" id="2579163">v</span><span class="op" id="2579164">.</span><span class="ident" id="2579165">typ</span><span class="op" id="2579168">,</span>&nbsp;<span class="ident" id="2579170">v</span><span class="op" id="2579171">.</span><span class="ident" id="2579172">pointer</span><span class="op" id="2579179">(</span><span class="op" id="2579180">)</span><span class="op" id="2579181">,</span>&nbsp;<span class="ident" id="2579183">k</span><span class="op" id="2579184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2579187">if</span>&nbsp;<span class="ident" id="2579190">e</span>&nbsp;<span class="op" id="2579192">==</span>&nbsp;<span class="ident" id="2579195">nil</span>&nbsp;<span class="op" id="2579199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2579203">return</span>&nbsp;<span class="ident" id="2579210">Value</span><span class="op" id="2579215">{</span><span class="op" id="2579216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2579219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2579222">typ</span>&nbsp;<span class="op" id="2579226">:=</span>&nbsp;<span class="ident" id="2579229">tt</span><span class="op" id="2579231">.</span><span class="ident" id="2579232">elem</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2579238">fl</span>&nbsp;<span class="op" id="2579241">:=</span>&nbsp;<span class="op" id="2579244">(</span><span class="ident" id="2579245">v</span><span class="op" id="2579246">.</span><span class="ident" id="2579247">flag</span>&nbsp;<span class="op" id="2579252">|</span>&nbsp;<span class="ident" id="2579254">key</span><span class="op" id="2579257">.</span><span class="ident" id="2579258">flag</span><span class="op" id="2579262">)</span>&nbsp;<span class="op" id="2579264">&amp;</span>&nbsp;<span class="ident" id="2579266">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2579274">fl</span>&nbsp;<span class="op" id="2579277">|=</span>&nbsp;<span class="ident" id="2579280">flag</span><span class="op" id="2579284">(</span><span class="ident" id="2579285">typ</span><span class="op" id="2579288">.</span><span class="ident" id="2579289">Kind</span><span class="op" id="2579293">(</span><span class="op" id="2579294">)</span><span class="op" id="2579295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2579298">if</span>&nbsp;<span class="ident" id="2579301">ifaceIndir</span><span class="op" id="2579311">(</span><span class="ident" id="2579312">typ</span><span class="op" id="2579315">)</span>&nbsp;<span class="op" id="2579317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2579321">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2579367">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2579407">c</span>&nbsp;<span class="op" id="2579409">:=</span>&nbsp;<span class="ident" id="2579412">unsafe_New</span><span class="op" id="2579422">(</span><span class="ident" id="2579423">typ</span><span class="op" id="2579426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2579430">memmove</span><span class="op" id="2579437">(</span><span class="ident" id="2579438">c</span><span class="op" id="2579439">,</span>&nbsp;<span class="ident" id="2579441">e</span><span class="op" id="2579442">,</span>&nbsp;<span class="ident" id="2579444">typ</span><span class="op" id="2579447">.</span><span class="ident" id="2579448">size</span><span class="op" id="2579452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2579456">return</span>&nbsp;<span class="ident" id="2579463">Value</span><span class="op" id="2579468">{</span><span class="ident" id="2579469">typ</span><span class="op" id="2579472">,</span>&nbsp;<span class="ident" id="2579474">c</span><span class="op" id="2579475">,</span>&nbsp;<span class="ident" id="2579477">fl</span>&nbsp;<span class="op" id="2579480">|</span>&nbsp;<span class="ident" id="2579482">flagIndir</span><span class="op" id="2579491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2579494">}</span>&nbsp;<span class="keyword" id="2579496">else</span>&nbsp;<span class="op" id="2579501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2579505">return</span>&nbsp;<span class="ident" id="2579512">Value</span><span class="op" id="2579517">{</span><span class="ident" id="2579518">typ</span><span class="op" id="2579521">,</span>&nbsp;<span class="op" id="2579523">*</span><span class="op" id="2579524">(</span><span class="op" id="2579525">*</span><span class="ident" id="2579526">unsafe</span><span class="op" id="2579532">.</span><span class="ident" id="2579533">Pointer</span><span class="op" id="2579540">)</span><span class="op" id="2579541">(</span><span class="ident" id="2579542">e</span><span class="op" id="2579543">)</span><span class="op" id="2579544">,</span>&nbsp;<span class="ident" id="2579546">fl</span><span class="op" id="2579548">}</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2579551">}</span><br>
<span class="lineno"></span><span class="op" id="2579553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2579556">//&nbsp;MapKeys&nbsp;returns&nbsp;a&nbsp;slice&nbsp;containing&nbsp;all&nbsp;the&nbsp;keys&nbsp;present&nbsp;in&nbsp;the&nbsp;map,</span><br>
<span class="lineno"></span><span class="comment" id="2579627">//&nbsp;in&nbsp;unspecified&nbsp;order.</span><br>
<span class="lineno">1025</span><span class="comment" id="2579652">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2579689">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;empty&nbsp;slice&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="2579745">func</span>&nbsp;<span class="op" id="2579750">(</span><span class="ident" id="2579751">v</span>&nbsp;<span class="ident" id="2579753">Value</span><span class="op" id="2579758">)</span>&nbsp;<span class="ident" id="2579760">MapKeys</span><span class="op" id="2579767">(</span><span class="op" id="2579768">)</span>&nbsp;<span class="op" id="2579770">[</span><span class="op" id="2579771">]</span><span class="ident" id="2579772">Value</span>&nbsp;<span class="op" id="2579778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2579781">v</span><span class="op" id="2579782">.</span><span class="ident" id="2579783">mustBe</span><span class="op" id="2579789">(</span><span class="ident" id="2579790">Map</span><span class="op" id="2579793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2579796">tt</span>&nbsp;<span class="op" id="2579799">:=</span>&nbsp;<span class="op" id="2579802">(</span><span class="op" id="2579803">*</span><span class="ident" id="2579804">mapType</span><span class="op" id="2579811">)</span><span class="op" id="2579812">(</span><span class="ident" id="2579813">unsafe</span><span class="op" id="2579819">.</span><span class="ident" id="2579820">Pointer</span><span class="op" id="2579827">(</span><span class="ident" id="2579828">v</span><span class="op" id="2579829">.</span><span class="ident" id="2579830">typ</span><span class="op" id="2579833">)</span><span class="op" id="2579834">)</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2579837">keyType</span>&nbsp;<span class="op" id="2579845">:=</span>&nbsp;<span class="ident" id="2579848">tt</span><span class="op" id="2579850">.</span><span class="ident" id="2579851">key</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2579857">fl</span>&nbsp;<span class="op" id="2579860">:=</span>&nbsp;<span class="ident" id="2579863">v</span><span class="op" id="2579864">.</span><span class="ident" id="2579865">flag</span><span class="op" id="2579869">&amp;</span><span class="ident" id="2579870">flagRO</span>&nbsp;<span class="op" id="2579877">|</span>&nbsp;<span class="ident" id="2579879">flag</span><span class="op" id="2579883">(</span><span class="ident" id="2579884">keyType</span><span class="op" id="2579891">.</span><span class="ident" id="2579892">Kind</span><span class="op" id="2579896">(</span><span class="op" id="2579897">)</span><span class="op" id="2579898">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2579902">m</span>&nbsp;<span class="op" id="2579904">:=</span>&nbsp;<span class="ident" id="2579907">v</span><span class="op" id="2579908">.</span><span class="ident" id="2579909">pointer</span><span class="op" id="2579916">(</span><span class="op" id="2579917">)</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2579920">mlen</span>&nbsp;<span class="op" id="2579925">:=</span>&nbsp;<span class="builtintype" id="2579928">int</span><span class="op" id="2579931">(</span><span class="num" id="2579932">0</span><span class="op" id="2579933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2579936">if</span>&nbsp;<span class="ident" id="2579939">m</span>&nbsp;<span class="op" id="2579941">!=</span>&nbsp;<span class="ident" id="2579944">nil</span>&nbsp;<span class="op" id="2579948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2579952">mlen</span>&nbsp;<span class="op" id="2579957">=</span>&nbsp;<span class="ident" id="2579959">maplen</span><span class="op" id="2579965">(</span><span class="ident" id="2579966">m</span><span class="op" id="2579967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2579970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2579973">it</span>&nbsp;<span class="op" id="2579976">:=</span>&nbsp;<span class="ident" id="2579979">mapiterinit</span><span class="op" id="2579990">(</span><span class="ident" id="2579991">v</span><span class="op" id="2579992">.</span><span class="ident" id="2579993">typ</span><span class="op" id="2579996">,</span>&nbsp;<span class="ident" id="2579998">m</span><span class="op" id="2579999">)</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2580002">a</span>&nbsp;<span class="op" id="2580004">:=</span>&nbsp;<span class="builtinfunc" id="2580007">make</span><span class="op" id="2580011">(</span><span class="op" id="2580012">[</span><span class="op" id="2580013">]</span><span class="ident" id="2580014">Value</span><span class="op" id="2580019">,</span>&nbsp;<span class="ident" id="2580021">mlen</span><span class="op" id="2580025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2580028">var</span>&nbsp;<span class="ident" id="2580032">i</span>&nbsp;<span class="builtintype" id="2580034">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2580039">for</span>&nbsp;<span class="ident" id="2580043">i</span>&nbsp;<span class="op" id="2580045">=</span>&nbsp;<span class="num" id="2580047">0</span><span class="op" id="2580048">;</span>&nbsp;<span class="ident" id="2580050">i</span>&nbsp;<span class="op" id="2580052">&lt;</span>&nbsp;<span class="builtinfunc" id="2580054">len</span><span class="op" id="2580057">(</span><span class="ident" id="2580058">a</span><span class="op" id="2580059">)</span><span class="op" id="2580060">;</span>&nbsp;<span class="ident" id="2580062">i</span><span class="op" id="2580063">++</span>&nbsp;<span class="op" id="2580066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2580070">key</span>&nbsp;<span class="op" id="2580074">:=</span>&nbsp;<span class="ident" id="2580077">mapiterkey</span><span class="op" id="2580087">(</span><span class="ident" id="2580088">it</span><span class="op" id="2580090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2580094">if</span>&nbsp;<span class="ident" id="2580097">key</span>&nbsp;<span class="op" id="2580101">==</span>&nbsp;<span class="ident" id="2580104">nil</span>&nbsp;<span class="op" id="2580108">{</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2580113">//&nbsp;Someone&nbsp;deleted&nbsp;an&nbsp;entry&nbsp;from&nbsp;the&nbsp;map&nbsp;since&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2580166">//&nbsp;called&nbsp;maplen&nbsp;above.&nbsp;&nbsp;It&#39;s&nbsp;a&nbsp;data&nbsp;race,&nbsp;but&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2580224">//&nbsp;we&nbsp;can&nbsp;do&nbsp;about&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2580250">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2580258">}</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2580262">if</span>&nbsp;<span class="ident" id="2580265">ifaceIndir</span><span class="op" id="2580275">(</span><span class="ident" id="2580276">keyType</span><span class="op" id="2580283">)</span>&nbsp;<span class="op" id="2580285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2580290">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2580337">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2580378">c</span>&nbsp;<span class="op" id="2580380">:=</span>&nbsp;<span class="ident" id="2580383">unsafe_New</span><span class="op" id="2580393">(</span><span class="ident" id="2580394">keyType</span><span class="op" id="2580401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2580406">memmove</span><span class="op" id="2580413">(</span><span class="ident" id="2580414">c</span><span class="op" id="2580415">,</span>&nbsp;<span class="ident" id="2580417">key</span><span class="op" id="2580420">,</span>&nbsp;<span class="ident" id="2580422">keyType</span><span class="op" id="2580429">.</span><span class="ident" id="2580430">size</span><span class="op" id="2580434">)</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2580439">a</span><span class="op" id="2580440">[</span><span class="ident" id="2580441">i</span><span class="op" id="2580442">]</span>&nbsp;<span class="op" id="2580444">=</span>&nbsp;<span class="ident" id="2580446">Value</span><span class="op" id="2580451">{</span><span class="ident" id="2580452">keyType</span><span class="op" id="2580459">,</span>&nbsp;<span class="ident" id="2580461">c</span><span class="op" id="2580462">,</span>&nbsp;<span class="ident" id="2580464">fl</span>&nbsp;<span class="op" id="2580467">|</span>&nbsp;<span class="ident" id="2580469">flagIndir</span><span class="op" id="2580478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2580482">}</span>&nbsp;<span class="keyword" id="2580484">else</span>&nbsp;<span class="op" id="2580489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2580494">a</span><span class="op" id="2580495">[</span><span class="ident" id="2580496">i</span><span class="op" id="2580497">]</span>&nbsp;<span class="op" id="2580499">=</span>&nbsp;<span class="ident" id="2580501">Value</span><span class="op" id="2580506">{</span><span class="ident" id="2580507">keyType</span><span class="op" id="2580514">,</span>&nbsp;<span class="op" id="2580516">*</span><span class="op" id="2580517">(</span><span class="op" id="2580518">*</span><span class="ident" id="2580519">unsafe</span><span class="op" id="2580525">.</span><span class="ident" id="2580526">Pointer</span><span class="op" id="2580533">)</span><span class="op" id="2580534">(</span><span class="ident" id="2580535">key</span><span class="op" id="2580538">)</span><span class="op" id="2580539">,</span>&nbsp;<span class="ident" id="2580541">fl</span><span class="op" id="2580543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2580547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2580551">mapiternext</span><span class="op" id="2580562">(</span><span class="ident" id="2580563">it</span><span class="op" id="2580565">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2580568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2580571">return</span>&nbsp;<span class="ident" id="2580578">a</span><span class="op" id="2580579">[</span><span class="op" id="2580580">:</span><span class="ident" id="2580581">i</span><span class="op" id="2580582">]</span><br>
<span class="lineno"></span><span class="op" id="2580584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2580587">//&nbsp;Method&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;method.</span><br>
<span class="lineno">1065</span><span class="comment" id="2580656">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2580727">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2580799">//&nbsp;Method&nbsp;panics&nbsp;if&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2580871">func</span>&nbsp;<span class="op" id="2580876">(</span><span class="ident" id="2580877">v</span>&nbsp;<span class="ident" id="2580879">Value</span><span class="op" id="2580884">)</span>&nbsp;<span class="ident" id="2580886">Method</span><span class="op" id="2580892">(</span><span class="ident" id="2580893">i</span>&nbsp;<span class="builtintype" id="2580895">int</span><span class="op" id="2580898">)</span>&nbsp;<span class="ident" id="2580900">Value</span>&nbsp;<span class="op" id="2580906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2580909">if</span>&nbsp;<span class="ident" id="2580912">v</span><span class="op" id="2580913">.</span><span class="ident" id="2580914">typ</span>&nbsp;<span class="op" id="2580918">==</span>&nbsp;<span class="ident" id="2580921">nil</span>&nbsp;<span class="op" id="2580925">{</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2580929">panic</span><span class="op" id="2580934">(</span><span class="op" id="2580935">&amp;</span><span class="ident" id="2580936">ValueError</span><span class="op" id="2580946">{</span><span class="string" id="2580947">&#34;reflect.Value.Method&#34;</span><span class="op" id="2580969">,</span>&nbsp;<span class="ident" id="2580971">Invalid</span><span class="op" id="2580978">}</span><span class="op" id="2580979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2580982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2580985">if</span>&nbsp;<span class="ident" id="2580988">v</span><span class="op" id="2580989">.</span><span class="ident" id="2580990">flag</span><span class="op" id="2580994">&amp;</span><span class="ident" id="2580995">flagMethod</span>&nbsp;<span class="op" id="2581006">!=</span>&nbsp;<span class="num" id="2581009">0</span>&nbsp;<span class="op" id="2581011">||</span>&nbsp;<span class="builtintype" id="2581014">uint</span><span class="op" id="2581018">(</span><span class="ident" id="2581019">i</span><span class="op" id="2581020">)</span>&nbsp;<span class="op" id="2581022">&gt;=</span>&nbsp;<span class="builtintype" id="2581025">uint</span><span class="op" id="2581029">(</span><span class="ident" id="2581030">v</span><span class="op" id="2581031">.</span><span class="ident" id="2581032">typ</span><span class="op" id="2581035">.</span><span class="ident" id="2581036">NumMethod</span><span class="op" id="2581045">(</span><span class="op" id="2581046">)</span><span class="op" id="2581047">)</span>&nbsp;<span class="op" id="2581049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2581053">panic</span><span class="op" id="2581058">(</span><span class="string" id="2581059">&#34;reflect:&nbsp;Method&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2581095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2581098">}</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2581101">if</span>&nbsp;<span class="ident" id="2581104">v</span><span class="op" id="2581105">.</span><span class="ident" id="2581106">typ</span><span class="op" id="2581109">.</span><span class="ident" id="2581110">Kind</span><span class="op" id="2581114">(</span><span class="op" id="2581115">)</span>&nbsp;<span class="op" id="2581117">==</span>&nbsp;<span class="ident" id="2581120">Interface</span>&nbsp;<span class="op" id="2581130">&amp;&amp;</span>&nbsp;<span class="ident" id="2581133">v</span><span class="op" id="2581134">.</span><span class="ident" id="2581135">IsNil</span><span class="op" id="2581140">(</span><span class="op" id="2581141">)</span>&nbsp;<span class="op" id="2581143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2581147">panic</span><span class="op" id="2581152">(</span><span class="string" id="2581153">&#34;reflect:&nbsp;Method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2581193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2581196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2581199">fl</span>&nbsp;<span class="op" id="2581202">:=</span>&nbsp;<span class="ident" id="2581205">v</span><span class="op" id="2581206">.</span><span class="ident" id="2581207">flag</span>&nbsp;<span class="op" id="2581212">&amp;</span>&nbsp;<span class="op" id="2581214">(</span><span class="ident" id="2581215">flagRO</span>&nbsp;<span class="op" id="2581222">|</span>&nbsp;<span class="ident" id="2581224">flagIndir</span><span class="op" id="2581233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2581236">fl</span>&nbsp;<span class="op" id="2581239">|=</span>&nbsp;<span class="ident" id="2581242">flag</span><span class="op" id="2581246">(</span><span class="ident" id="2581247">Func</span><span class="op" id="2581251">)</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2581254">fl</span>&nbsp;<span class="op" id="2581257">|=</span>&nbsp;<span class="ident" id="2581260">flag</span><span class="op" id="2581264">(</span><span class="ident" id="2581265">i</span><span class="op" id="2581266">)</span><span class="op" id="2581267">&lt;&lt;</span><span class="ident" id="2581269">flagMethodShift</span>&nbsp;<span class="op" id="2581285">|</span>&nbsp;<span class="ident" id="2581287">flagMethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2581299">return</span>&nbsp;<span class="ident" id="2581306">Value</span><span class="op" id="2581311">{</span><span class="ident" id="2581312">v</span><span class="op" id="2581313">.</span><span class="ident" id="2581314">typ</span><span class="op" id="2581317">,</span>&nbsp;<span class="ident" id="2581319">v</span><span class="op" id="2581320">.</span><span class="ident" id="2581321">ptr</span><span class="op" id="2581324">,</span>&nbsp;<span class="ident" id="2581326">fl</span><span class="op" id="2581328">}</span><br>
<span class="lineno"></span><span class="op" id="2581330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2581333">//&nbsp;NumMethod&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;methods&nbsp;in&nbsp;the&nbsp;value&#39;s&nbsp;method&nbsp;set.</span><br>
<span class="lineno">1085</span><span class="keyword" id="2581403">func</span>&nbsp;<span class="op" id="2581408">(</span><span class="ident" id="2581409">v</span>&nbsp;<span class="ident" id="2581411">Value</span><span class="op" id="2581416">)</span>&nbsp;<span class="ident" id="2581418">NumMethod</span><span class="op" id="2581427">(</span><span class="op" id="2581428">)</span>&nbsp;<span class="builtintype" id="2581430">int</span>&nbsp;<span class="op" id="2581434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2581437">if</span>&nbsp;<span class="ident" id="2581440">v</span><span class="op" id="2581441">.</span><span class="ident" id="2581442">typ</span>&nbsp;<span class="op" id="2581446">==</span>&nbsp;<span class="ident" id="2581449">nil</span>&nbsp;<span class="op" id="2581453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2581457">panic</span><span class="op" id="2581462">(</span><span class="op" id="2581463">&amp;</span><span class="ident" id="2581464">ValueError</span><span class="op" id="2581474">{</span><span class="string" id="2581475">&#34;reflect.Value.NumMethod&#34;</span><span class="op" id="2581500">,</span>&nbsp;<span class="ident" id="2581502">Invalid</span><span class="op" id="2581509">}</span><span class="op" id="2581510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2581513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2581516">if</span>&nbsp;<span class="ident" id="2581519">v</span><span class="op" id="2581520">.</span><span class="ident" id="2581521">flag</span><span class="op" id="2581525">&amp;</span><span class="ident" id="2581526">flagMethod</span>&nbsp;<span class="op" id="2581537">!=</span>&nbsp;<span class="num" id="2581540">0</span>&nbsp;<span class="op" id="2581542">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2581546">return</span>&nbsp;<span class="num" id="2581553">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2581556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2581559">return</span>&nbsp;<span class="ident" id="2581566">v</span><span class="op" id="2581567">.</span><span class="ident" id="2581568">typ</span><span class="op" id="2581571">.</span><span class="ident" id="2581572">NumMethod</span><span class="op" id="2581581">(</span><span class="op" id="2581582">)</span><br>
<span class="lineno"></span><span class="op" id="2581584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span><span class="comment" id="2581587">//&nbsp;MethodByName&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2581656">//&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2581685">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2581756">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2581828">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;method&nbsp;was&nbsp;found.</span><br>
<span class="lineno">1100</span><span class="keyword" id="2581881">func</span>&nbsp;<span class="op" id="2581886">(</span><span class="ident" id="2581887">v</span>&nbsp;<span class="ident" id="2581889">Value</span><span class="op" id="2581894">)</span>&nbsp;<span class="ident" id="2581896">MethodByName</span><span class="op" id="2581908">(</span><span class="ident" id="2581909">name</span>&nbsp;<span class="builtintype" id="2581914">string</span><span class="op" id="2581920">)</span>&nbsp;<span class="ident" id="2581922">Value</span>&nbsp;<span class="op" id="2581928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2581931">if</span>&nbsp;<span class="ident" id="2581934">v</span><span class="op" id="2581935">.</span><span class="ident" id="2581936">typ</span>&nbsp;<span class="op" id="2581940">==</span>&nbsp;<span class="ident" id="2581943">nil</span>&nbsp;<span class="op" id="2581947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2581951">panic</span><span class="op" id="2581956">(</span><span class="op" id="2581957">&amp;</span><span class="ident" id="2581958">ValueError</span><span class="op" id="2581968">{</span><span class="string" id="2581969">&#34;reflect.Value.MethodByName&#34;</span><span class="op" id="2581997">,</span>&nbsp;<span class="ident" id="2581999">Invalid</span><span class="op" id="2582006">}</span><span class="op" id="2582007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2582010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2582013">if</span>&nbsp;<span class="ident" id="2582016">v</span><span class="op" id="2582017">.</span><span class="ident" id="2582018">flag</span><span class="op" id="2582022">&amp;</span><span class="ident" id="2582023">flagMethod</span>&nbsp;<span class="op" id="2582034">!=</span>&nbsp;<span class="num" id="2582037">0</span>&nbsp;<span class="op" id="2582039">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2582043">return</span>&nbsp;<span class="ident" id="2582050">Value</span><span class="op" id="2582055">{</span><span class="op" id="2582056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2582059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2582062">m</span><span class="op" id="2582063">,</span>&nbsp;<span class="ident" id="2582065">ok</span>&nbsp;<span class="op" id="2582068">:=</span>&nbsp;<span class="ident" id="2582071">v</span><span class="op" id="2582072">.</span><span class="ident" id="2582073">typ</span><span class="op" id="2582076">.</span><span class="ident" id="2582077">MethodByName</span><span class="op" id="2582089">(</span><span class="ident" id="2582090">name</span><span class="op" id="2582094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2582097">if</span>&nbsp;<span class="op" id="2582100">!</span><span class="ident" id="2582101">ok</span>&nbsp;<span class="op" id="2582104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2582108">return</span>&nbsp;<span class="ident" id="2582115">Value</span><span class="op" id="2582120">{</span><span class="op" id="2582121">}</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2582124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2582127">return</span>&nbsp;<span class="ident" id="2582134">v</span><span class="op" id="2582135">.</span><span class="ident" id="2582136">Method</span><span class="op" id="2582142">(</span><span class="ident" id="2582143">m</span><span class="op" id="2582144">.</span><span class="ident" id="2582145">Index</span><span class="op" id="2582150">)</span><br>
<span class="lineno"></span><span class="op" id="2582152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2582155">//&nbsp;NumField&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno">1115</span><span class="comment" id="2582213">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2582253">func</span>&nbsp;<span class="op" id="2582258">(</span><span class="ident" id="2582259">v</span>&nbsp;<span class="ident" id="2582261">Value</span><span class="op" id="2582266">)</span>&nbsp;<span class="ident" id="2582268">NumField</span><span class="op" id="2582276">(</span><span class="op" id="2582277">)</span>&nbsp;<span class="builtintype" id="2582279">int</span>&nbsp;<span class="op" id="2582283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2582286">v</span><span class="op" id="2582287">.</span><span class="ident" id="2582288">mustBe</span><span class="op" id="2582294">(</span><span class="ident" id="2582295">Struct</span><span class="op" id="2582301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2582304">tt</span>&nbsp;<span class="op" id="2582307">:=</span>&nbsp;<span class="op" id="2582310">(</span><span class="op" id="2582311">*</span><span class="ident" id="2582312">structType</span><span class="op" id="2582322">)</span><span class="op" id="2582323">(</span><span class="ident" id="2582324">unsafe</span><span class="op" id="2582330">.</span><span class="ident" id="2582331">Pointer</span><span class="op" id="2582338">(</span><span class="ident" id="2582339">v</span><span class="op" id="2582340">.</span><span class="ident" id="2582341">typ</span><span class="op" id="2582344">)</span><span class="op" id="2582345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2582348">return</span>&nbsp;<span class="builtinfunc" id="2582355">len</span><span class="op" id="2582358">(</span><span class="ident" id="2582359">tt</span><span class="op" id="2582361">.</span><span class="ident" id="2582362">fields</span><span class="op" id="2582368">)</span><br>
<span class="lineno">1120</span><span class="op" id="2582370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2582373">//&nbsp;OverflowComplex&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;complex128&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2582460">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128.</span><br>
<span class="lineno"></span><span class="keyword" id="2582517">func</span>&nbsp;<span class="op" id="2582522">(</span><span class="ident" id="2582523">v</span>&nbsp;<span class="ident" id="2582525">Value</span><span class="op" id="2582530">)</span>&nbsp;<span class="ident" id="2582532">OverflowComplex</span><span class="op" id="2582547">(</span><span class="ident" id="2582548">x</span>&nbsp;<span class="builtintype" id="2582550">complex128</span><span class="op" id="2582560">)</span>&nbsp;<span class="builtintype" id="2582562">bool</span>&nbsp;<span class="op" id="2582567">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2582570">k</span>&nbsp;<span class="op" id="2582572">:=</span>&nbsp;<span class="ident" id="2582575">v</span><span class="op" id="2582576">.</span><span class="ident" id="2582577">kind</span><span class="op" id="2582581">(</span><span class="op" id="2582582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2582585">switch</span>&nbsp;<span class="ident" id="2582592">k</span>&nbsp;<span class="op" id="2582594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2582597">case</span>&nbsp;<span class="ident" id="2582602">Complex64</span><span class="op" id="2582611">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2582615">return</span>&nbsp;<span class="ident" id="2582622">overflowFloat32</span><span class="op" id="2582637">(</span><span class="builtinfunc" id="2582638">real</span><span class="op" id="2582642">(</span><span class="ident" id="2582643">x</span><span class="op" id="2582644">)</span><span class="op" id="2582645">)</span>&nbsp;<span class="op" id="2582647">||</span>&nbsp;<span class="ident" id="2582650">overflowFloat32</span><span class="op" id="2582665">(</span><span class="builtinfunc" id="2582666">imag</span><span class="op" id="2582670">(</span><span class="ident" id="2582671">x</span><span class="op" id="2582672">)</span><span class="op" id="2582673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2582676">case</span>&nbsp;<span class="ident" id="2582681">Complex128</span><span class="op" id="2582691">:</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2582695">return</span>&nbsp;<span class="builtintype" id="2582702">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2582709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2582712">panic</span><span class="op" id="2582717">(</span><span class="op" id="2582718">&amp;</span><span class="ident" id="2582719">ValueError</span><span class="op" id="2582729">{</span><span class="string" id="2582730">&#34;reflect.Value.OverflowComplex&#34;</span><span class="op" id="2582761">,</span>&nbsp;<span class="ident" id="2582763">v</span><span class="op" id="2582764">.</span><span class="ident" id="2582765">kind</span><span class="op" id="2582769">(</span><span class="op" id="2582770">)</span><span class="op" id="2582771">}</span><span class="op" id="2582772">)</span><br>
<span class="lineno"></span><span class="op" id="2582774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1135</span><span class="comment" id="2582777">//&nbsp;OverflowFloat&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;float64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2582859">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64.</span><br>
<span class="lineno"></span><span class="keyword" id="2582911">func</span>&nbsp;<span class="op" id="2582916">(</span><span class="ident" id="2582917">v</span>&nbsp;<span class="ident" id="2582919">Value</span><span class="op" id="2582924">)</span>&nbsp;<span class="ident" id="2582926">OverflowFloat</span><span class="op" id="2582939">(</span><span class="ident" id="2582940">x</span>&nbsp;<span class="builtintype" id="2582942">float64</span><span class="op" id="2582949">)</span>&nbsp;<span class="builtintype" id="2582951">bool</span>&nbsp;<span class="op" id="2582956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2582959">k</span>&nbsp;<span class="op" id="2582961">:=</span>&nbsp;<span class="ident" id="2582964">v</span><span class="op" id="2582965">.</span><span class="ident" id="2582966">kind</span><span class="op" id="2582970">(</span><span class="op" id="2582971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2582974">switch</span>&nbsp;<span class="ident" id="2582981">k</span>&nbsp;<span class="op" id="2582983">{</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2582986">case</span>&nbsp;<span class="ident" id="2582991">Float32</span><span class="op" id="2582998">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2583002">return</span>&nbsp;<span class="ident" id="2583009">overflowFloat32</span><span class="op" id="2583024">(</span><span class="ident" id="2583025">x</span><span class="op" id="2583026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2583029">case</span>&nbsp;<span class="ident" id="2583034">Float64</span><span class="op" id="2583041">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2583045">return</span>&nbsp;<span class="builtintype" id="2583052">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2583059">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2583062">panic</span><span class="op" id="2583067">(</span><span class="op" id="2583068">&amp;</span><span class="ident" id="2583069">ValueError</span><span class="op" id="2583079">{</span><span class="string" id="2583080">&#34;reflect.Value.OverflowFloat&#34;</span><span class="op" id="2583109">,</span>&nbsp;<span class="ident" id="2583111">v</span><span class="op" id="2583112">.</span><span class="ident" id="2583113">kind</span><span class="op" id="2583117">(</span><span class="op" id="2583118">)</span><span class="op" id="2583119">}</span><span class="op" id="2583120">)</span><br>
<span class="lineno"></span><span class="op" id="2583122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2583125">func</span>&nbsp;<span class="ident" id="2583130">overflowFloat32</span><span class="op" id="2583145">(</span><span class="ident" id="2583146">x</span>&nbsp;<span class="builtintype" id="2583148">float64</span><span class="op" id="2583155">)</span>&nbsp;<span class="builtintype" id="2583157">bool</span>&nbsp;<span class="op" id="2583162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2583165">if</span>&nbsp;<span class="ident" id="2583168">x</span>&nbsp;<span class="op" id="2583170">&lt;</span>&nbsp;<span class="num" id="2583172">0</span>&nbsp;<span class="op" id="2583174">{</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2583178">x</span>&nbsp;<span class="op" id="2583180">=</span>&nbsp;<span class="op" id="2583182">-</span><span class="ident" id="2583183">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2583186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2583189">return</span>&nbsp;<span class="ident" id="2583196">math</span><span class="op" id="2583200">.</span><span class="ident" id="2583201">MaxFloat32</span>&nbsp;<span class="op" id="2583212">&lt;</span>&nbsp;<span class="ident" id="2583214">x</span>&nbsp;<span class="op" id="2583216">&amp;&amp;</span>&nbsp;<span class="ident" id="2583219">x</span>&nbsp;<span class="op" id="2583221">&lt;=</span>&nbsp;<span class="ident" id="2583224">math</span><span class="op" id="2583228">.</span><span class="ident" id="2583229">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="2583240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1155</span><span class="comment" id="2583243">//&nbsp;OverflowInt&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;int64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2583321">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno"></span><span class="keyword" id="2583388">func</span>&nbsp;<span class="op" id="2583393">(</span><span class="ident" id="2583394">v</span>&nbsp;<span class="ident" id="2583396">Value</span><span class="op" id="2583401">)</span>&nbsp;<span class="ident" id="2583403">OverflowInt</span><span class="op" id="2583414">(</span><span class="ident" id="2583415">x</span>&nbsp;<span class="ident" id="2583417">int64</span><span class="op" id="2583422">)</span>&nbsp;<span class="builtintype" id="2583424">bool</span>&nbsp;<span class="op" id="2583429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2583432">k</span>&nbsp;<span class="op" id="2583434">:=</span>&nbsp;<span class="ident" id="2583437">v</span><span class="op" id="2583438">.</span><span class="ident" id="2583439">kind</span><span class="op" id="2583443">(</span><span class="op" id="2583444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2583447">switch</span>&nbsp;<span class="ident" id="2583454">k</span>&nbsp;<span class="op" id="2583456">{</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2583459">case</span>&nbsp;<span class="ident" id="2583464">Int</span><span class="op" id="2583467">,</span>&nbsp;<span class="ident" id="2583469">Int8</span><span class="op" id="2583473">,</span>&nbsp;<span class="ident" id="2583475">Int16</span><span class="op" id="2583480">,</span>&nbsp;<span class="ident" id="2583482">Int32</span><span class="op" id="2583487">,</span>&nbsp;<span class="ident" id="2583489">Int64</span><span class="op" id="2583494">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2583498">bitSize</span>&nbsp;<span class="op" id="2583506">:=</span>&nbsp;<span class="ident" id="2583509">v</span><span class="op" id="2583510">.</span><span class="ident" id="2583511">typ</span><span class="op" id="2583514">.</span><span class="ident" id="2583515">size</span>&nbsp;<span class="op" id="2583520">*</span>&nbsp;<span class="num" id="2583522">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2583526">trunc</span>&nbsp;<span class="op" id="2583532">:=</span>&nbsp;<span class="op" id="2583535">(</span><span class="ident" id="2583536">x</span>&nbsp;<span class="op" id="2583538">&lt;&lt;</span>&nbsp;<span class="op" id="2583541">(</span><span class="num" id="2583542">64</span>&nbsp;<span class="op" id="2583545">-</span>&nbsp;<span class="ident" id="2583547">bitSize</span><span class="op" id="2583554">)</span><span class="op" id="2583555">)</span>&nbsp;<span class="op" id="2583557">&gt;&gt;</span>&nbsp;<span class="op" id="2583560">(</span><span class="num" id="2583561">64</span>&nbsp;<span class="op" id="2583564">-</span>&nbsp;<span class="ident" id="2583566">bitSize</span><span class="op" id="2583573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2583577">return</span>&nbsp;<span class="ident" id="2583584">x</span>&nbsp;<span class="op" id="2583586">!=</span>&nbsp;<span class="ident" id="2583589">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2583596">}</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2583599">panic</span><span class="op" id="2583604">(</span><span class="op" id="2583605">&amp;</span><span class="ident" id="2583606">ValueError</span><span class="op" id="2583616">{</span><span class="string" id="2583617">&#34;reflect.Value.OverflowInt&#34;</span><span class="op" id="2583644">,</span>&nbsp;<span class="ident" id="2583646">v</span><span class="op" id="2583647">.</span><span class="ident" id="2583648">kind</span><span class="op" id="2583652">(</span><span class="op" id="2583653">)</span><span class="op" id="2583654">}</span><span class="op" id="2583655">)</span><br>
<span class="lineno"></span><span class="op" id="2583657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2583660">//&nbsp;OverflowUint&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;uint64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2583740">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno">1170</span><span class="keyword" id="2583821">func</span>&nbsp;<span class="op" id="2583826">(</span><span class="ident" id="2583827">v</span>&nbsp;<span class="ident" id="2583829">Value</span><span class="op" id="2583834">)</span>&nbsp;<span class="ident" id="2583836">OverflowUint</span><span class="op" id="2583848">(</span><span class="ident" id="2583849">x</span>&nbsp;<span class="ident" id="2583851">uint64</span><span class="op" id="2583857">)</span>&nbsp;<span class="builtintype" id="2583859">bool</span>&nbsp;<span class="op" id="2583864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2583867">k</span>&nbsp;<span class="op" id="2583869">:=</span>&nbsp;<span class="ident" id="2583872">v</span><span class="op" id="2583873">.</span><span class="ident" id="2583874">kind</span><span class="op" id="2583878">(</span><span class="op" id="2583879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2583882">switch</span>&nbsp;<span class="ident" id="2583889">k</span>&nbsp;<span class="op" id="2583891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2583894">case</span>&nbsp;<span class="ident" id="2583899">Uint</span><span class="op" id="2583903">,</span>&nbsp;<span class="ident" id="2583905">Uintptr</span><span class="op" id="2583912">,</span>&nbsp;<span class="ident" id="2583914">Uint8</span><span class="op" id="2583919">,</span>&nbsp;<span class="ident" id="2583921">Uint16</span><span class="op" id="2583927">,</span>&nbsp;<span class="ident" id="2583929">Uint32</span><span class="op" id="2583935">,</span>&nbsp;<span class="ident" id="2583937">Uint64</span><span class="op" id="2583943">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2583947">bitSize</span>&nbsp;<span class="op" id="2583955">:=</span>&nbsp;<span class="ident" id="2583958">v</span><span class="op" id="2583959">.</span><span class="ident" id="2583960">typ</span><span class="op" id="2583963">.</span><span class="ident" id="2583964">size</span>&nbsp;<span class="op" id="2583969">*</span>&nbsp;<span class="num" id="2583971">8</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2583975">trunc</span>&nbsp;<span class="op" id="2583981">:=</span>&nbsp;<span class="op" id="2583984">(</span><span class="ident" id="2583985">x</span>&nbsp;<span class="op" id="2583987">&lt;&lt;</span>&nbsp;<span class="op" id="2583990">(</span><span class="num" id="2583991">64</span>&nbsp;<span class="op" id="2583994">-</span>&nbsp;<span class="ident" id="2583996">bitSize</span><span class="op" id="2584003">)</span><span class="op" id="2584004">)</span>&nbsp;<span class="op" id="2584006">&gt;&gt;</span>&nbsp;<span class="op" id="2584009">(</span><span class="num" id="2584010">64</span>&nbsp;<span class="op" id="2584013">-</span>&nbsp;<span class="ident" id="2584015">bitSize</span><span class="op" id="2584022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2584026">return</span>&nbsp;<span class="ident" id="2584033">x</span>&nbsp;<span class="op" id="2584035">!=</span>&nbsp;<span class="ident" id="2584038">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2584045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2584048">panic</span><span class="op" id="2584053">(</span><span class="op" id="2584054">&amp;</span><span class="ident" id="2584055">ValueError</span><span class="op" id="2584065">{</span><span class="string" id="2584066">&#34;reflect.Value.OverflowUint&#34;</span><span class="op" id="2584094">,</span>&nbsp;<span class="ident" id="2584096">v</span><span class="op" id="2584097">.</span><span class="ident" id="2584098">kind</span><span class="op" id="2584102">(</span><span class="op" id="2584103">)</span><span class="op" id="2584104">}</span><span class="op" id="2584105">)</span><br>
<span class="lineno"></span><span class="op" id="2584107">}</span><br>
<span class="lineno">1180</span><br>
<span class="lineno"></span><span class="comment" id="2584110">//&nbsp;Pointer&nbsp;returns&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr.</span><br>
<span class="lineno"></span><span class="comment" id="2584153">//&nbsp;It&nbsp;returns&nbsp;uintptr&nbsp;instead&nbsp;of&nbsp;unsafe.Pointer&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2584209">//&nbsp;code&nbsp;using&nbsp;reflect&nbsp;cannot&nbsp;obtain&nbsp;unsafe.Pointers</span><br>
<span class="lineno"></span><span class="comment" id="2584261">//&nbsp;without&nbsp;importing&nbsp;the&nbsp;unsafe&nbsp;package&nbsp;explicitly.</span><br>
<span class="lineno">1185</span><span class="comment" id="2584313">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan,&nbsp;Func,&nbsp;Map,&nbsp;Ptr,&nbsp;Slice,&nbsp;or&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="comment" id="2584392">//</span><br>
<span class="lineno"></span><span class="comment" id="2584395">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Func,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="2584457">//&nbsp;code&nbsp;pointer,&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to&nbsp;identify&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2584515">//&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;The&nbsp;only&nbsp;guarantee&nbsp;is&nbsp;that&nbsp;the</span><br>
<span class="lineno">1190</span><span class="comment" id="2584575">//&nbsp;result&nbsp;is&nbsp;zero&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;func&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2584631">//</span><br>
<span class="lineno"></span><span class="comment" id="2584634">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Slice,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;to&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="2584696">//&nbsp;element&nbsp;of&nbsp;the&nbsp;slice.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;nil&nbsp;the&nbsp;returned&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2584761">//&nbsp;is&nbsp;0.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;empty&nbsp;but&nbsp;non-nil&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;non-zero.</span><br>
<span class="lineno">1195</span><span class="keyword" id="2584835">func</span>&nbsp;<span class="op" id="2584840">(</span><span class="ident" id="2584841">v</span>&nbsp;<span class="ident" id="2584843">Value</span><span class="op" id="2584848">)</span>&nbsp;<span class="ident" id="2584850">Pointer</span><span class="op" id="2584857">(</span><span class="op" id="2584858">)</span>&nbsp;<span class="builtintype" id="2584860">uintptr</span>&nbsp;<span class="op" id="2584868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2584871">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2584891">k</span>&nbsp;<span class="op" id="2584893">:=</span>&nbsp;<span class="ident" id="2584896">v</span><span class="op" id="2584897">.</span><span class="ident" id="2584898">kind</span><span class="op" id="2584902">(</span><span class="op" id="2584903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2584906">switch</span>&nbsp;<span class="ident" id="2584913">k</span>&nbsp;<span class="op" id="2584915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2584918">case</span>&nbsp;<span class="ident" id="2584923">Chan</span><span class="op" id="2584927">,</span>&nbsp;<span class="ident" id="2584929">Map</span><span class="op" id="2584932">,</span>&nbsp;<span class="ident" id="2584934">Ptr</span><span class="op" id="2584937">,</span>&nbsp;<span class="ident" id="2584939">UnsafePointer</span><span class="op" id="2584952">:</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2584956">return</span>&nbsp;<span class="builtintype" id="2584963">uintptr</span><span class="op" id="2584970">(</span><span class="ident" id="2584971">v</span><span class="op" id="2584972">.</span><span class="ident" id="2584973">pointer</span><span class="op" id="2584980">(</span><span class="op" id="2584981">)</span><span class="op" id="2584982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2584985">case</span>&nbsp;<span class="ident" id="2584990">Func</span><span class="op" id="2584994">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2584998">if</span>&nbsp;<span class="ident" id="2585001">v</span><span class="op" id="2585002">.</span><span class="ident" id="2585003">flag</span><span class="op" id="2585007">&amp;</span><span class="ident" id="2585008">flagMethod</span>&nbsp;<span class="op" id="2585019">!=</span>&nbsp;<span class="num" id="2585022">0</span>&nbsp;<span class="op" id="2585024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2585029">//&nbsp;As&nbsp;the&nbsp;doc&nbsp;comment&nbsp;says,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2585087">//&nbsp;underlying&nbsp;code&nbsp;pointer&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2585147">//&nbsp;identify&nbsp;a&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;All&nbsp;method&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2585213">//&nbsp;created&nbsp;via&nbsp;reflect&nbsp;have&nbsp;the&nbsp;same&nbsp;underlying&nbsp;code&nbsp;pointer,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2585278">//&nbsp;so&nbsp;their&nbsp;Pointers&nbsp;are&nbsp;equal.&nbsp;The&nbsp;function&nbsp;used&nbsp;here&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2585341">//&nbsp;match&nbsp;the&nbsp;one&nbsp;used&nbsp;in&nbsp;makeMethodValue.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2585386">f</span>&nbsp;<span class="op" id="2585388">:=</span>&nbsp;<span class="ident" id="2585391">methodValueCall</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2585410">return</span>&nbsp;<span class="op" id="2585417">*</span><span class="op" id="2585418">*</span><span class="op" id="2585419">(</span><span class="op" id="2585420">*</span><span class="op" id="2585421">*</span><span class="builtintype" id="2585422">uintptr</span><span class="op" id="2585429">)</span><span class="op" id="2585430">(</span><span class="ident" id="2585431">unsafe</span><span class="op" id="2585437">.</span><span class="ident" id="2585438">Pointer</span><span class="op" id="2585445">(</span><span class="op" id="2585446">&amp;</span><span class="ident" id="2585447">f</span><span class="op" id="2585448">)</span><span class="op" id="2585449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2585453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2585457">p</span>&nbsp;<span class="op" id="2585459">:=</span>&nbsp;<span class="ident" id="2585462">v</span><span class="op" id="2585463">.</span><span class="ident" id="2585464">pointer</span><span class="op" id="2585471">(</span><span class="op" id="2585472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2585476">//&nbsp;Non-nil&nbsp;func&nbsp;value&nbsp;points&nbsp;at&nbsp;data&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2585522">//&nbsp;First&nbsp;word&nbsp;of&nbsp;data&nbsp;block&nbsp;is&nbsp;actual&nbsp;code.</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2585568">if</span>&nbsp;<span class="ident" id="2585571">p</span>&nbsp;<span class="op" id="2585573">!=</span>&nbsp;<span class="ident" id="2585576">nil</span>&nbsp;<span class="op" id="2585580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2585585">p</span>&nbsp;<span class="op" id="2585587">=</span>&nbsp;<span class="op" id="2585589">*</span><span class="op" id="2585590">(</span><span class="op" id="2585591">*</span><span class="ident" id="2585592">unsafe</span><span class="op" id="2585598">.</span><span class="ident" id="2585599">Pointer</span><span class="op" id="2585606">)</span><span class="op" id="2585607">(</span><span class="ident" id="2585608">p</span><span class="op" id="2585609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2585613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2585617">return</span>&nbsp;<span class="builtintype" id="2585624">uintptr</span><span class="op" id="2585631">(</span><span class="ident" id="2585632">p</span><span class="op" id="2585633">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2585637">case</span>&nbsp;<span class="ident" id="2585642">Slice</span><span class="op" id="2585647">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2585651">return</span>&nbsp;<span class="op" id="2585658">(</span><span class="op" id="2585659">*</span><span class="ident" id="2585660">SliceHeader</span><span class="op" id="2585671">)</span><span class="op" id="2585672">(</span><span class="ident" id="2585673">v</span><span class="op" id="2585674">.</span><span class="ident" id="2585675">ptr</span><span class="op" id="2585678">)</span><span class="op" id="2585679">.</span><span class="ident" id="2585680">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2585686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2585689">panic</span><span class="op" id="2585694">(</span><span class="op" id="2585695">&amp;</span><span class="ident" id="2585696">ValueError</span><span class="op" id="2585706">{</span><span class="string" id="2585707">&#34;reflect.Value.Pointer&#34;</span><span class="op" id="2585730">,</span>&nbsp;<span class="ident" id="2585732">v</span><span class="op" id="2585733">.</span><span class="ident" id="2585734">kind</span><span class="op" id="2585738">(</span><span class="op" id="2585739">)</span><span class="op" id="2585740">}</span><span class="op" id="2585741">)</span><br>
<span class="lineno"></span><span class="op" id="2585743">}</span><br>
<span class="lineno">1225</span><br>
<span class="lineno"></span><span class="comment" id="2585746">//&nbsp;Recv&nbsp;receives&nbsp;and&nbsp;returns&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2585803">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2585841">//&nbsp;The&nbsp;receive&nbsp;blocks&nbsp;until&nbsp;a&nbsp;value&nbsp;is&nbsp;ready.</span><br>
<span class="lineno"></span><span class="comment" id="2585887">//&nbsp;The&nbsp;boolean&nbsp;value&nbsp;ok&nbsp;is&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;x&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send</span><br>
<span class="lineno">1230</span><span class="comment" id="2585956">//&nbsp;on&nbsp;the&nbsp;channel,&nbsp;false&nbsp;if&nbsp;it&nbsp;is&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="2586043">func</span>&nbsp;<span class="op" id="2586048">(</span><span class="ident" id="2586049">v</span>&nbsp;<span class="ident" id="2586051">Value</span><span class="op" id="2586056">)</span>&nbsp;<span class="ident" id="2586058">Recv</span><span class="op" id="2586062">(</span><span class="op" id="2586063">)</span>&nbsp;<span class="op" id="2586065">(</span><span class="ident" id="2586066">x</span>&nbsp;<span class="ident" id="2586068">Value</span><span class="op" id="2586073">,</span>&nbsp;<span class="ident" id="2586075">ok</span>&nbsp;<span class="builtintype" id="2586078">bool</span><span class="op" id="2586082">)</span>&nbsp;<span class="op" id="2586084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2586087">v</span><span class="op" id="2586088">.</span><span class="ident" id="2586089">mustBe</span><span class="op" id="2586095">(</span><span class="ident" id="2586096">Chan</span><span class="op" id="2586100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2586103">v</span><span class="op" id="2586104">.</span><span class="ident" id="2586105">mustBeExported</span><span class="op" id="2586119">(</span><span class="op" id="2586120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2586123">return</span>&nbsp;<span class="ident" id="2586130">v</span><span class="op" id="2586131">.</span><span class="ident" id="2586132">recv</span><span class="op" id="2586136">(</span><span class="builtintype" id="2586137">false</span><span class="op" id="2586142">)</span><br>
<span class="lineno">1235</span><span class="op" id="2586144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2586147">//&nbsp;internal&nbsp;recv,&nbsp;possibly&nbsp;non-blocking&nbsp;(nb).</span><br>
<span class="lineno"></span><span class="comment" id="2586193">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2586224">func</span>&nbsp;<span class="op" id="2586229">(</span><span class="ident" id="2586230">v</span>&nbsp;<span class="ident" id="2586232">Value</span><span class="op" id="2586237">)</span>&nbsp;<span class="ident" id="2586239">recv</span><span class="op" id="2586243">(</span><span class="ident" id="2586244">nb</span>&nbsp;<span class="builtintype" id="2586247">bool</span><span class="op" id="2586251">)</span>&nbsp;<span class="op" id="2586253">(</span><span class="ident" id="2586254">val</span>&nbsp;<span class="ident" id="2586258">Value</span><span class="op" id="2586263">,</span>&nbsp;<span class="ident" id="2586265">ok</span>&nbsp;<span class="builtintype" id="2586268">bool</span><span class="op" id="2586272">)</span>&nbsp;<span class="op" id="2586274">{</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2586277">tt</span>&nbsp;<span class="op" id="2586280">:=</span>&nbsp;<span class="op" id="2586283">(</span><span class="op" id="2586284">*</span><span class="ident" id="2586285">chanType</span><span class="op" id="2586293">)</span><span class="op" id="2586294">(</span><span class="ident" id="2586295">unsafe</span><span class="op" id="2586301">.</span><span class="ident" id="2586302">Pointer</span><span class="op" id="2586309">(</span><span class="ident" id="2586310">v</span><span class="op" id="2586311">.</span><span class="ident" id="2586312">typ</span><span class="op" id="2586315">)</span><span class="op" id="2586316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2586319">if</span>&nbsp;<span class="ident" id="2586322">ChanDir</span><span class="op" id="2586329">(</span><span class="ident" id="2586330">tt</span><span class="op" id="2586332">.</span><span class="ident" id="2586333">dir</span><span class="op" id="2586336">)</span><span class="op" id="2586337">&amp;</span><span class="ident" id="2586338">RecvDir</span>&nbsp;<span class="op" id="2586346">==</span>&nbsp;<span class="num" id="2586349">0</span>&nbsp;<span class="op" id="2586351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2586355">panic</span><span class="op" id="2586360">(</span><span class="string" id="2586361">&#34;reflect:&nbsp;recv&nbsp;on&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2586397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2586400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2586403">t</span>&nbsp;<span class="op" id="2586405">:=</span>&nbsp;<span class="ident" id="2586408">tt</span><span class="op" id="2586410">.</span><span class="ident" id="2586411">elem</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2586417">val</span>&nbsp;<span class="op" id="2586421">=</span>&nbsp;<span class="ident" id="2586423">Value</span><span class="op" id="2586428">{</span><span class="ident" id="2586429">t</span><span class="op" id="2586430">,</span>&nbsp;<span class="ident" id="2586432">nil</span><span class="op" id="2586435">,</span>&nbsp;<span class="ident" id="2586437">flag</span><span class="op" id="2586441">(</span><span class="ident" id="2586442">t</span><span class="op" id="2586443">.</span><span class="ident" id="2586444">Kind</span><span class="op" id="2586448">(</span><span class="op" id="2586449">)</span><span class="op" id="2586450">)</span><span class="op" id="2586451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2586454">var</span>&nbsp;<span class="ident" id="2586458">p</span>&nbsp;<span class="ident" id="2586460">unsafe</span><span class="op" id="2586466">.</span><span class="ident" id="2586467">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2586476">if</span>&nbsp;<span class="ident" id="2586479">ifaceIndir</span><span class="op" id="2586489">(</span><span class="ident" id="2586490">t</span><span class="op" id="2586491">)</span>&nbsp;<span class="op" id="2586493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2586497">p</span>&nbsp;<span class="op" id="2586499">=</span>&nbsp;<span class="ident" id="2586501">unsafe_New</span><span class="op" id="2586511">(</span><span class="ident" id="2586512">t</span><span class="op" id="2586513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2586517">val</span><span class="op" id="2586520">.</span><span class="ident" id="2586521">ptr</span>&nbsp;<span class="op" id="2586525">=</span>&nbsp;<span class="ident" id="2586527">p</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2586531">val</span><span class="op" id="2586534">.</span><span class="ident" id="2586535">flag</span>&nbsp;<span class="op" id="2586540">|=</span>&nbsp;<span class="ident" id="2586543">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2586554">}</span>&nbsp;<span class="keyword" id="2586556">else</span>&nbsp;<span class="op" id="2586561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2586565">p</span>&nbsp;<span class="op" id="2586567">=</span>&nbsp;<span class="ident" id="2586569">unsafe</span><span class="op" id="2586575">.</span><span class="ident" id="2586576">Pointer</span><span class="op" id="2586583">(</span><span class="op" id="2586584">&amp;</span><span class="ident" id="2586585">val</span><span class="op" id="2586588">.</span><span class="ident" id="2586589">ptr</span><span class="op" id="2586592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2586595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2586598">selected</span><span class="op" id="2586606">,</span>&nbsp;<span class="ident" id="2586608">ok</span>&nbsp;<span class="op" id="2586611">:=</span>&nbsp;<span class="ident" id="2586614">chanrecv</span><span class="op" id="2586622">(</span><span class="ident" id="2586623">v</span><span class="op" id="2586624">.</span><span class="ident" id="2586625">typ</span><span class="op" id="2586628">,</span>&nbsp;<span class="ident" id="2586630">v</span><span class="op" id="2586631">.</span><span class="ident" id="2586632">pointer</span><span class="op" id="2586639">(</span><span class="op" id="2586640">)</span><span class="op" id="2586641">,</span>&nbsp;<span class="ident" id="2586643">nb</span><span class="op" id="2586645">,</span>&nbsp;<span class="ident" id="2586647">p</span><span class="op" id="2586648">)</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2586651">if</span>&nbsp;<span class="op" id="2586654">!</span><span class="ident" id="2586655">selected</span>&nbsp;<span class="op" id="2586664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2586668">val</span>&nbsp;<span class="op" id="2586672">=</span>&nbsp;<span class="ident" id="2586674">Value</span><span class="op" id="2586679">{</span><span class="op" id="2586680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2586683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2586686">return</span><br>
<span class="lineno"></span><span class="op" id="2586693">}</span><br>
<span class="lineno">1260</span><br>
<span class="lineno"></span><span class="comment" id="2586696">//&nbsp;Send&nbsp;sends&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2586730">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Chan&nbsp;or&nbsp;if&nbsp;x&#39;s&nbsp;type&nbsp;is&nbsp;not&nbsp;the&nbsp;same&nbsp;type&nbsp;as&nbsp;v&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2586824">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2586897">func</span>&nbsp;<span class="op" id="2586902">(</span><span class="ident" id="2586903">v</span>&nbsp;<span class="ident" id="2586905">Value</span><span class="op" id="2586910">)</span>&nbsp;<span class="ident" id="2586912">Send</span><span class="op" id="2586916">(</span><span class="ident" id="2586917">x</span>&nbsp;<span class="ident" id="2586919">Value</span><span class="op" id="2586924">)</span>&nbsp;<span class="op" id="2586926">{</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2586929">v</span><span class="op" id="2586930">.</span><span class="ident" id="2586931">mustBe</span><span class="op" id="2586937">(</span><span class="ident" id="2586938">Chan</span><span class="op" id="2586942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2586945">v</span><span class="op" id="2586946">.</span><span class="ident" id="2586947">mustBeExported</span><span class="op" id="2586961">(</span><span class="op" id="2586962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2586965">v</span><span class="op" id="2586966">.</span><span class="ident" id="2586967">send</span><span class="op" id="2586971">(</span><span class="ident" id="2586972">x</span><span class="op" id="2586973">,</span>&nbsp;<span class="builtintype" id="2586975">false</span><span class="op" id="2586980">)</span><br>
<span class="lineno"></span><span class="op" id="2586982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1270</span><span class="comment" id="2586985">//&nbsp;internal&nbsp;send,&nbsp;possibly&nbsp;non-blocking.</span><br>
<span class="lineno"></span><span class="comment" id="2587026">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2587057">func</span>&nbsp;<span class="op" id="2587062">(</span><span class="ident" id="2587063">v</span>&nbsp;<span class="ident" id="2587065">Value</span><span class="op" id="2587070">)</span>&nbsp;<span class="ident" id="2587072">send</span><span class="op" id="2587076">(</span><span class="ident" id="2587077">x</span>&nbsp;<span class="ident" id="2587079">Value</span><span class="op" id="2587084">,</span>&nbsp;<span class="ident" id="2587086">nb</span>&nbsp;<span class="builtintype" id="2587089">bool</span><span class="op" id="2587093">)</span>&nbsp;<span class="op" id="2587095">(</span><span class="ident" id="2587096">selected</span>&nbsp;<span class="builtintype" id="2587105">bool</span><span class="op" id="2587109">)</span>&nbsp;<span class="op" id="2587111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2587114">tt</span>&nbsp;<span class="op" id="2587117">:=</span>&nbsp;<span class="op" id="2587120">(</span><span class="op" id="2587121">*</span><span class="ident" id="2587122">chanType</span><span class="op" id="2587130">)</span><span class="op" id="2587131">(</span><span class="ident" id="2587132">unsafe</span><span class="op" id="2587138">.</span><span class="ident" id="2587139">Pointer</span><span class="op" id="2587146">(</span><span class="ident" id="2587147">v</span><span class="op" id="2587148">.</span><span class="ident" id="2587149">typ</span><span class="op" id="2587152">)</span><span class="op" id="2587153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2587156">if</span>&nbsp;<span class="ident" id="2587159">ChanDir</span><span class="op" id="2587166">(</span><span class="ident" id="2587167">tt</span><span class="op" id="2587169">.</span><span class="ident" id="2587170">dir</span><span class="op" id="2587173">)</span><span class="op" id="2587174">&amp;</span><span class="ident" id="2587175">SendDir</span>&nbsp;<span class="op" id="2587183">==</span>&nbsp;<span class="num" id="2587186">0</span>&nbsp;<span class="op" id="2587188">{</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2587192">panic</span><span class="op" id="2587197">(</span><span class="string" id="2587198">&#34;reflect:&nbsp;send&nbsp;on&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2587234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2587237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2587240">x</span><span class="op" id="2587241">.</span><span class="ident" id="2587242">mustBeExported</span><span class="op" id="2587256">(</span><span class="op" id="2587257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2587260">x</span>&nbsp;<span class="op" id="2587262">=</span>&nbsp;<span class="ident" id="2587264">x</span><span class="op" id="2587265">.</span><span class="ident" id="2587266">assignTo</span><span class="op" id="2587274">(</span><span class="string" id="2587275">&#34;reflect.Value.Send&#34;</span><span class="op" id="2587295">,</span>&nbsp;<span class="ident" id="2587297">tt</span><span class="op" id="2587299">.</span><span class="ident" id="2587300">elem</span><span class="op" id="2587304">,</span>&nbsp;<span class="ident" id="2587306">nil</span><span class="op" id="2587309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2587312">var</span>&nbsp;<span class="ident" id="2587316">p</span>&nbsp;<span class="ident" id="2587318">unsafe</span><span class="op" id="2587324">.</span><span class="ident" id="2587325">Pointer</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2587334">if</span>&nbsp;<span class="ident" id="2587337">x</span><span class="op" id="2587338">.</span><span class="ident" id="2587339">flag</span><span class="op" id="2587343">&amp;</span><span class="ident" id="2587344">flagIndir</span>&nbsp;<span class="op" id="2587354">!=</span>&nbsp;<span class="num" id="2587357">0</span>&nbsp;<span class="op" id="2587359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2587363">p</span>&nbsp;<span class="op" id="2587365">=</span>&nbsp;<span class="ident" id="2587367">x</span><span class="op" id="2587368">.</span><span class="ident" id="2587369">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2587374">}</span>&nbsp;<span class="keyword" id="2587376">else</span>&nbsp;<span class="op" id="2587381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2587385">p</span>&nbsp;<span class="op" id="2587387">=</span>&nbsp;<span class="ident" id="2587389">unsafe</span><span class="op" id="2587395">.</span><span class="ident" id="2587396">Pointer</span><span class="op" id="2587403">(</span><span class="op" id="2587404">&amp;</span><span class="ident" id="2587405">x</span><span class="op" id="2587406">.</span><span class="ident" id="2587407">ptr</span><span class="op" id="2587410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2587413">}</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2587416">return</span>&nbsp;<span class="ident" id="2587423">chansend</span><span class="op" id="2587431">(</span><span class="ident" id="2587432">v</span><span class="op" id="2587433">.</span><span class="ident" id="2587434">typ</span><span class="op" id="2587437">,</span>&nbsp;<span class="ident" id="2587439">v</span><span class="op" id="2587440">.</span><span class="ident" id="2587441">pointer</span><span class="op" id="2587448">(</span><span class="op" id="2587449">)</span><span class="op" id="2587450">,</span>&nbsp;<span class="ident" id="2587452">p</span><span class="op" id="2587453">,</span>&nbsp;<span class="ident" id="2587455">nb</span><span class="op" id="2587457">)</span><br>
<span class="lineno"></span><span class="op" id="2587459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2587462">//&nbsp;Set&nbsp;assigns&nbsp;x&nbsp;to&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2587495">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanSet&nbsp;returns&nbsp;false.</span><br>
<span class="lineno">1290</span><span class="comment" id="2587533">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2587588">func</span>&nbsp;<span class="op" id="2587593">(</span><span class="ident" id="2587594">v</span>&nbsp;<span class="ident" id="2587596">Value</span><span class="op" id="2587601">)</span>&nbsp;<span class="ident" id="2587603">Set</span><span class="op" id="2587606">(</span><span class="ident" id="2587607">x</span>&nbsp;<span class="ident" id="2587609">Value</span><span class="op" id="2587614">)</span>&nbsp;<span class="op" id="2587616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2587619">v</span><span class="op" id="2587620">.</span><span class="ident" id="2587621">mustBeAssignable</span><span class="op" id="2587637">(</span><span class="op" id="2587638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2587641">x</span><span class="op" id="2587642">.</span><span class="ident" id="2587643">mustBeExported</span><span class="op" id="2587657">(</span><span class="op" id="2587658">)</span>&nbsp;<span class="comment" id="2587660">//&nbsp;do&nbsp;not&nbsp;let&nbsp;unexported&nbsp;x&nbsp;leak</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2587693">var</span>&nbsp;<span class="ident" id="2587697">target</span>&nbsp;<span class="ident" id="2587704">unsafe</span><span class="op" id="2587710">.</span><span class="ident" id="2587711">Pointer</span><br>
<span class="lineno">1295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2587720">if</span>&nbsp;<span class="ident" id="2587723">v</span><span class="op" id="2587724">.</span><span class="ident" id="2587725">kind</span><span class="op" id="2587729">(</span><span class="op" id="2587730">)</span>&nbsp;<span class="op" id="2587732">==</span>&nbsp;<span class="ident" id="2587735">Interface</span>&nbsp;<span class="op" id="2587745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2587749">target</span>&nbsp;<span class="op" id="2587756">=</span>&nbsp;<span class="ident" id="2587758">v</span><span class="op" id="2587759">.</span><span class="ident" id="2587760">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2587765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2587768">x</span>&nbsp;<span class="op" id="2587770">=</span>&nbsp;<span class="ident" id="2587772">x</span><span class="op" id="2587773">.</span><span class="ident" id="2587774">assignTo</span><span class="op" id="2587782">(</span><span class="string" id="2587783">&#34;reflect.Set&#34;</span><span class="op" id="2587796">,</span>&nbsp;<span class="ident" id="2587798">v</span><span class="op" id="2587799">.</span><span class="ident" id="2587800">typ</span><span class="op" id="2587803">,</span>&nbsp;<span class="ident" id="2587805">target</span><span class="op" id="2587811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2587814">if</span>&nbsp;<span class="ident" id="2587817">x</span><span class="op" id="2587818">.</span><span class="ident" id="2587819">flag</span><span class="op" id="2587823">&amp;</span><span class="ident" id="2587824">flagIndir</span>&nbsp;<span class="op" id="2587834">!=</span>&nbsp;<span class="num" id="2587837">0</span>&nbsp;<span class="op" id="2587839">{</span><br>
<span class="lineno">1300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2587843">memmove</span><span class="op" id="2587850">(</span><span class="ident" id="2587851">v</span><span class="op" id="2587852">.</span><span class="ident" id="2587853">ptr</span><span class="op" id="2587856">,</span>&nbsp;<span class="ident" id="2587858">x</span><span class="op" id="2587859">.</span><span class="ident" id="2587860">ptr</span><span class="op" id="2587863">,</span>&nbsp;<span class="ident" id="2587865">v</span><span class="op" id="2587866">.</span><span class="ident" id="2587867">typ</span><span class="op" id="2587870">.</span><span class="ident" id="2587871">size</span><span class="op" id="2587875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2587878">}</span>&nbsp;<span class="keyword" id="2587880">else</span>&nbsp;<span class="op" id="2587885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2587889">*</span><span class="op" id="2587890">(</span><span class="op" id="2587891">*</span><span class="ident" id="2587892">unsafe</span><span class="op" id="2587898">.</span><span class="ident" id="2587899">Pointer</span><span class="op" id="2587906">)</span><span class="op" id="2587907">(</span><span class="ident" id="2587908">v</span><span class="op" id="2587909">.</span><span class="ident" id="2587910">ptr</span><span class="op" id="2587913">)</span>&nbsp;<span class="op" id="2587915">=</span>&nbsp;<span class="ident" id="2587917">x</span><span class="op" id="2587918">.</span><span class="ident" id="2587919">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2587924">}</span><br>
<span class="lineno"></span><span class="op" id="2587926">}</span><br>
<span class="lineno">1305</span><br>
<span class="lineno"></span><span class="comment" id="2587929">//&nbsp;SetBool&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2587967">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Bool&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2588029">func</span>&nbsp;<span class="op" id="2588034">(</span><span class="ident" id="2588035">v</span>&nbsp;<span class="ident" id="2588037">Value</span><span class="op" id="2588042">)</span>&nbsp;<span class="ident" id="2588044">SetBool</span><span class="op" id="2588051">(</span><span class="ident" id="2588052">x</span>&nbsp;<span class="builtintype" id="2588054">bool</span><span class="op" id="2588058">)</span>&nbsp;<span class="op" id="2588060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588063">v</span><span class="op" id="2588064">.</span><span class="ident" id="2588065">mustBeAssignable</span><span class="op" id="2588081">(</span><span class="op" id="2588082">)</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588085">v</span><span class="op" id="2588086">.</span><span class="ident" id="2588087">mustBe</span><span class="op" id="2588093">(</span><span class="ident" id="2588094">Bool</span><span class="op" id="2588098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2588101">*</span><span class="op" id="2588102">(</span><span class="op" id="2588103">*</span><span class="builtintype" id="2588104">bool</span><span class="op" id="2588108">)</span><span class="op" id="2588109">(</span><span class="ident" id="2588110">v</span><span class="op" id="2588111">.</span><span class="ident" id="2588112">ptr</span><span class="op" id="2588115">)</span>&nbsp;<span class="op" id="2588117">=</span>&nbsp;<span class="ident" id="2588119">x</span><br>
<span class="lineno"></span><span class="op" id="2588121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2588124">//&nbsp;SetBytes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1315</span><span class="comment" id="2588163">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2588225">func</span>&nbsp;<span class="op" id="2588230">(</span><span class="ident" id="2588231">v</span>&nbsp;<span class="ident" id="2588233">Value</span><span class="op" id="2588238">)</span>&nbsp;<span class="ident" id="2588240">SetBytes</span><span class="op" id="2588248">(</span><span class="ident" id="2588249">x</span>&nbsp;<span class="op" id="2588251">[</span><span class="op" id="2588252">]</span><span class="builtintype" id="2588253">byte</span><span class="op" id="2588257">)</span>&nbsp;<span class="op" id="2588259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588262">v</span><span class="op" id="2588263">.</span><span class="ident" id="2588264">mustBeAssignable</span><span class="op" id="2588280">(</span><span class="op" id="2588281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588284">v</span><span class="op" id="2588285">.</span><span class="ident" id="2588286">mustBe</span><span class="op" id="2588292">(</span><span class="ident" id="2588293">Slice</span><span class="op" id="2588298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2588301">if</span>&nbsp;<span class="ident" id="2588304">v</span><span class="op" id="2588305">.</span><span class="ident" id="2588306">typ</span><span class="op" id="2588309">.</span><span class="ident" id="2588310">Elem</span><span class="op" id="2588314">(</span><span class="op" id="2588315">)</span><span class="op" id="2588316">.</span><span class="ident" id="2588317">Kind</span><span class="op" id="2588321">(</span><span class="op" id="2588322">)</span>&nbsp;<span class="op" id="2588324">!=</span>&nbsp;<span class="ident" id="2588327">Uint8</span>&nbsp;<span class="op" id="2588333">{</span><br>
<span class="lineno">1320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2588337">panic</span><span class="op" id="2588342">(</span><span class="string" id="2588343">&#34;reflect.Value.SetBytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2588385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2588388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2588391">*</span><span class="op" id="2588392">(</span><span class="op" id="2588393">*</span><span class="op" id="2588394">[</span><span class="op" id="2588395">]</span><span class="builtintype" id="2588396">byte</span><span class="op" id="2588400">)</span><span class="op" id="2588401">(</span><span class="ident" id="2588402">v</span><span class="op" id="2588403">.</span><span class="ident" id="2588404">ptr</span><span class="op" id="2588407">)</span>&nbsp;<span class="op" id="2588409">=</span>&nbsp;<span class="ident" id="2588411">x</span><br>
<span class="lineno"></span><span class="op" id="2588413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1325</span><span class="comment" id="2588416">//&nbsp;setRunes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2588455">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2588526">func</span>&nbsp;<span class="op" id="2588531">(</span><span class="ident" id="2588532">v</span>&nbsp;<span class="ident" id="2588534">Value</span><span class="op" id="2588539">)</span>&nbsp;<span class="ident" id="2588541">setRunes</span><span class="op" id="2588549">(</span><span class="ident" id="2588550">x</span>&nbsp;<span class="op" id="2588552">[</span><span class="op" id="2588553">]</span><span class="builtintype" id="2588554">rune</span><span class="op" id="2588558">)</span>&nbsp;<span class="op" id="2588560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588563">v</span><span class="op" id="2588564">.</span><span class="ident" id="2588565">mustBeAssignable</span><span class="op" id="2588581">(</span><span class="op" id="2588582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588585">v</span><span class="op" id="2588586">.</span><span class="ident" id="2588587">mustBe</span><span class="op" id="2588593">(</span><span class="ident" id="2588594">Slice</span><span class="op" id="2588599">)</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2588602">if</span>&nbsp;<span class="ident" id="2588605">v</span><span class="op" id="2588606">.</span><span class="ident" id="2588607">typ</span><span class="op" id="2588610">.</span><span class="ident" id="2588611">Elem</span><span class="op" id="2588615">(</span><span class="op" id="2588616">)</span><span class="op" id="2588617">.</span><span class="ident" id="2588618">Kind</span><span class="op" id="2588622">(</span><span class="op" id="2588623">)</span>&nbsp;<span class="op" id="2588625">!=</span>&nbsp;<span class="ident" id="2588628">Int32</span>&nbsp;<span class="op" id="2588634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2588638">panic</span><span class="op" id="2588643">(</span><span class="string" id="2588644">&#34;reflect.Value.setRunes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2588686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2588689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2588692">*</span><span class="op" id="2588693">(</span><span class="op" id="2588694">*</span><span class="op" id="2588695">[</span><span class="op" id="2588696">]</span><span class="builtintype" id="2588697">rune</span><span class="op" id="2588701">)</span><span class="op" id="2588702">(</span><span class="ident" id="2588703">v</span><span class="op" id="2588704">.</span><span class="ident" id="2588705">ptr</span><span class="op" id="2588708">)</span>&nbsp;<span class="op" id="2588710">=</span>&nbsp;<span class="ident" id="2588712">x</span><br>
<span class="lineno"></span><span class="op" id="2588714">}</span><br>
<span class="lineno">1335</span><br>
<span class="lineno"></span><span class="comment" id="2588717">//&nbsp;SetComplex&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2588763">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2588845">func</span>&nbsp;<span class="op" id="2588850">(</span><span class="ident" id="2588851">v</span>&nbsp;<span class="ident" id="2588853">Value</span><span class="op" id="2588858">)</span>&nbsp;<span class="ident" id="2588860">SetComplex</span><span class="op" id="2588870">(</span><span class="ident" id="2588871">x</span>&nbsp;<span class="builtintype" id="2588873">complex128</span><span class="op" id="2588883">)</span>&nbsp;<span class="op" id="2588885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588888">v</span><span class="op" id="2588889">.</span><span class="ident" id="2588890">mustBeAssignable</span><span class="op" id="2588906">(</span><span class="op" id="2588907">)</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2588910">switch</span>&nbsp;<span class="ident" id="2588917">k</span>&nbsp;<span class="op" id="2588919">:=</span>&nbsp;<span class="ident" id="2588922">v</span><span class="op" id="2588923">.</span><span class="ident" id="2588924">kind</span><span class="op" id="2588928">(</span><span class="op" id="2588929">)</span><span class="op" id="2588930">;</span>&nbsp;<span class="ident" id="2588932">k</span>&nbsp;<span class="op" id="2588934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2588937">default</span><span class="op" id="2588944">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2588948">panic</span><span class="op" id="2588953">(</span><span class="op" id="2588954">&amp;</span><span class="ident" id="2588955">ValueError</span><span class="op" id="2588965">{</span><span class="string" id="2588966">&#34;reflect.Value.SetComplex&#34;</span><span class="op" id="2588992">,</span>&nbsp;<span class="ident" id="2588994">v</span><span class="op" id="2588995">.</span><span class="ident" id="2588996">kind</span><span class="op" id="2589000">(</span><span class="op" id="2589001">)</span><span class="op" id="2589002">}</span><span class="op" id="2589003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589006">case</span>&nbsp;<span class="ident" id="2589011">Complex64</span><span class="op" id="2589020">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2589024">*</span><span class="op" id="2589025">(</span><span class="op" id="2589026">*</span><span class="builtintype" id="2589027">complex64</span><span class="op" id="2589036">)</span><span class="op" id="2589037">(</span><span class="ident" id="2589038">v</span><span class="op" id="2589039">.</span><span class="ident" id="2589040">ptr</span><span class="op" id="2589043">)</span>&nbsp;<span class="op" id="2589045">=</span>&nbsp;<span class="builtintype" id="2589047">complex64</span><span class="op" id="2589056">(</span><span class="ident" id="2589057">x</span><span class="op" id="2589058">)</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589061">case</span>&nbsp;<span class="ident" id="2589066">Complex128</span><span class="op" id="2589076">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2589080">*</span><span class="op" id="2589081">(</span><span class="op" id="2589082">*</span><span class="builtintype" id="2589083">complex128</span><span class="op" id="2589093">)</span><span class="op" id="2589094">(</span><span class="ident" id="2589095">v</span><span class="op" id="2589096">.</span><span class="ident" id="2589097">ptr</span><span class="op" id="2589100">)</span>&nbsp;<span class="op" id="2589102">=</span>&nbsp;<span class="ident" id="2589104">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2589107">}</span><br>
<span class="lineno"></span><span class="op" id="2589109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1350</span><span class="comment" id="2589112">//&nbsp;SetFloat&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2589156">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2589233">func</span>&nbsp;<span class="op" id="2589238">(</span><span class="ident" id="2589239">v</span>&nbsp;<span class="ident" id="2589241">Value</span><span class="op" id="2589246">)</span>&nbsp;<span class="ident" id="2589248">SetFloat</span><span class="op" id="2589256">(</span><span class="ident" id="2589257">x</span>&nbsp;<span class="builtintype" id="2589259">float64</span><span class="op" id="2589266">)</span>&nbsp;<span class="op" id="2589268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2589271">v</span><span class="op" id="2589272">.</span><span class="ident" id="2589273">mustBeAssignable</span><span class="op" id="2589289">(</span><span class="op" id="2589290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589293">switch</span>&nbsp;<span class="ident" id="2589300">k</span>&nbsp;<span class="op" id="2589302">:=</span>&nbsp;<span class="ident" id="2589305">v</span><span class="op" id="2589306">.</span><span class="ident" id="2589307">kind</span><span class="op" id="2589311">(</span><span class="op" id="2589312">)</span><span class="op" id="2589313">;</span>&nbsp;<span class="ident" id="2589315">k</span>&nbsp;<span class="op" id="2589317">{</span><br>
<span class="lineno">1355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589320">default</span><span class="op" id="2589327">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2589331">panic</span><span class="op" id="2589336">(</span><span class="op" id="2589337">&amp;</span><span class="ident" id="2589338">ValueError</span><span class="op" id="2589348">{</span><span class="string" id="2589349">&#34;reflect.Value.SetFloat&#34;</span><span class="op" id="2589373">,</span>&nbsp;<span class="ident" id="2589375">v</span><span class="op" id="2589376">.</span><span class="ident" id="2589377">kind</span><span class="op" id="2589381">(</span><span class="op" id="2589382">)</span><span class="op" id="2589383">}</span><span class="op" id="2589384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589387">case</span>&nbsp;<span class="ident" id="2589392">Float32</span><span class="op" id="2589399">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2589403">*</span><span class="op" id="2589404">(</span><span class="op" id="2589405">*</span><span class="builtintype" id="2589406">float32</span><span class="op" id="2589413">)</span><span class="op" id="2589414">(</span><span class="ident" id="2589415">v</span><span class="op" id="2589416">.</span><span class="ident" id="2589417">ptr</span><span class="op" id="2589420">)</span>&nbsp;<span class="op" id="2589422">=</span>&nbsp;<span class="builtintype" id="2589424">float32</span><span class="op" id="2589431">(</span><span class="ident" id="2589432">x</span><span class="op" id="2589433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589436">case</span>&nbsp;<span class="ident" id="2589441">Float64</span><span class="op" id="2589448">:</span><br>
<span class="lineno">1360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2589452">*</span><span class="op" id="2589453">(</span><span class="op" id="2589454">*</span><span class="builtintype" id="2589455">float64</span><span class="op" id="2589462">)</span><span class="op" id="2589463">(</span><span class="ident" id="2589464">v</span><span class="op" id="2589465">.</span><span class="ident" id="2589466">ptr</span><span class="op" id="2589469">)</span>&nbsp;<span class="op" id="2589471">=</span>&nbsp;<span class="ident" id="2589473">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2589476">}</span><br>
<span class="lineno"></span><span class="op" id="2589478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2589481">//&nbsp;SetInt&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno">1365</span><span class="comment" id="2589523">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2589615">func</span>&nbsp;<span class="op" id="2589620">(</span><span class="ident" id="2589621">v</span>&nbsp;<span class="ident" id="2589623">Value</span><span class="op" id="2589628">)</span>&nbsp;<span class="ident" id="2589630">SetInt</span><span class="op" id="2589636">(</span><span class="ident" id="2589637">x</span>&nbsp;<span class="ident" id="2589639">int64</span><span class="op" id="2589644">)</span>&nbsp;<span class="op" id="2589646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2589649">v</span><span class="op" id="2589650">.</span><span class="ident" id="2589651">mustBeAssignable</span><span class="op" id="2589667">(</span><span class="op" id="2589668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589671">switch</span>&nbsp;<span class="ident" id="2589678">k</span>&nbsp;<span class="op" id="2589680">:=</span>&nbsp;<span class="ident" id="2589683">v</span><span class="op" id="2589684">.</span><span class="ident" id="2589685">kind</span><span class="op" id="2589689">(</span><span class="op" id="2589690">)</span><span class="op" id="2589691">;</span>&nbsp;<span class="ident" id="2589693">k</span>&nbsp;<span class="op" id="2589695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589698">default</span><span class="op" id="2589705">:</span><br>
<span class="lineno">1370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2589709">panic</span><span class="op" id="2589714">(</span><span class="op" id="2589715">&amp;</span><span class="ident" id="2589716">ValueError</span><span class="op" id="2589726">{</span><span class="string" id="2589727">&#34;reflect.Value.SetInt&#34;</span><span class="op" id="2589749">,</span>&nbsp;<span class="ident" id="2589751">v</span><span class="op" id="2589752">.</span><span class="ident" id="2589753">kind</span><span class="op" id="2589757">(</span><span class="op" id="2589758">)</span><span class="op" id="2589759">}</span><span class="op" id="2589760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589763">case</span>&nbsp;<span class="ident" id="2589768">Int</span><span class="op" id="2589771">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2589775">*</span><span class="op" id="2589776">(</span><span class="op" id="2589777">*</span><span class="builtintype" id="2589778">int</span><span class="op" id="2589781">)</span><span class="op" id="2589782">(</span><span class="ident" id="2589783">v</span><span class="op" id="2589784">.</span><span class="ident" id="2589785">ptr</span><span class="op" id="2589788">)</span>&nbsp;<span class="op" id="2589790">=</span>&nbsp;<span class="builtintype" id="2589792">int</span><span class="op" id="2589795">(</span><span class="ident" id="2589796">x</span><span class="op" id="2589797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589800">case</span>&nbsp;<span class="ident" id="2589805">Int8</span><span class="op" id="2589809">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2589813">*</span><span class="op" id="2589814">(</span><span class="op" id="2589815">*</span><span class="builtintype" id="2589816">int8</span><span class="op" id="2589820">)</span><span class="op" id="2589821">(</span><span class="ident" id="2589822">v</span><span class="op" id="2589823">.</span><span class="ident" id="2589824">ptr</span><span class="op" id="2589827">)</span>&nbsp;<span class="op" id="2589829">=</span>&nbsp;<span class="builtintype" id="2589831">int8</span><span class="op" id="2589835">(</span><span class="ident" id="2589836">x</span><span class="op" id="2589837">)</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589840">case</span>&nbsp;<span class="ident" id="2589845">Int16</span><span class="op" id="2589850">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2589854">*</span><span class="op" id="2589855">(</span><span class="op" id="2589856">*</span><span class="builtintype" id="2589857">int16</span><span class="op" id="2589862">)</span><span class="op" id="2589863">(</span><span class="ident" id="2589864">v</span><span class="op" id="2589865">.</span><span class="ident" id="2589866">ptr</span><span class="op" id="2589869">)</span>&nbsp;<span class="op" id="2589871">=</span>&nbsp;<span class="builtintype" id="2589873">int16</span><span class="op" id="2589878">(</span><span class="ident" id="2589879">x</span><span class="op" id="2589880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589883">case</span>&nbsp;<span class="ident" id="2589888">Int32</span><span class="op" id="2589893">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2589897">*</span><span class="op" id="2589898">(</span><span class="op" id="2589899">*</span><span class="builtintype" id="2589900">int32</span><span class="op" id="2589905">)</span><span class="op" id="2589906">(</span><span class="ident" id="2589907">v</span><span class="op" id="2589908">.</span><span class="ident" id="2589909">ptr</span><span class="op" id="2589912">)</span>&nbsp;<span class="op" id="2589914">=</span>&nbsp;<span class="builtintype" id="2589916">int32</span><span class="op" id="2589921">(</span><span class="ident" id="2589922">x</span><span class="op" id="2589923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589926">case</span>&nbsp;<span class="ident" id="2589931">Int64</span><span class="op" id="2589936">:</span><br>
<span class="lineno">1380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2589940">*</span><span class="op" id="2589941">(</span><span class="op" id="2589942">*</span><span class="ident" id="2589943">int64</span><span class="op" id="2589948">)</span><span class="op" id="2589949">(</span><span class="ident" id="2589950">v</span><span class="op" id="2589951">.</span><span class="ident" id="2589952">ptr</span><span class="op" id="2589955">)</span>&nbsp;<span class="op" id="2589957">=</span>&nbsp;<span class="ident" id="2589959">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2589962">}</span><br>
<span class="lineno"></span><span class="op" id="2589964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2589967">//&nbsp;SetLen&nbsp;sets&nbsp;v&#39;s&nbsp;length&nbsp;to&nbsp;n.</span><br>
<span class="lineno">1385</span><span class="comment" id="2589999">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;negative&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2590060">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2590103">func</span>&nbsp;<span class="op" id="2590108">(</span><span class="ident" id="2590109">v</span>&nbsp;<span class="ident" id="2590111">Value</span><span class="op" id="2590116">)</span>&nbsp;<span class="ident" id="2590118">SetLen</span><span class="op" id="2590124">(</span><span class="ident" id="2590125">n</span>&nbsp;<span class="builtintype" id="2590127">int</span><span class="op" id="2590130">)</span>&nbsp;<span class="op" id="2590132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2590135">v</span><span class="op" id="2590136">.</span><span class="ident" id="2590137">mustBeAssignable</span><span class="op" id="2590153">(</span><span class="op" id="2590154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2590157">v</span><span class="op" id="2590158">.</span><span class="ident" id="2590159">mustBe</span><span class="op" id="2590165">(</span><span class="ident" id="2590166">Slice</span><span class="op" id="2590171">)</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2590174">s</span>&nbsp;<span class="op" id="2590176">:=</span>&nbsp;<span class="op" id="2590179">(</span><span class="op" id="2590180">*</span><span class="ident" id="2590181">sliceHeader</span><span class="op" id="2590192">)</span><span class="op" id="2590193">(</span><span class="ident" id="2590194">v</span><span class="op" id="2590195">.</span><span class="ident" id="2590196">ptr</span><span class="op" id="2590199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590202">if</span>&nbsp;<span class="builtintype" id="2590205">uint</span><span class="op" id="2590209">(</span><span class="ident" id="2590210">n</span><span class="op" id="2590211">)</span>&nbsp;<span class="op" id="2590213">&gt;</span>&nbsp;<span class="builtintype" id="2590215">uint</span><span class="op" id="2590219">(</span><span class="ident" id="2590220">s</span><span class="op" id="2590221">.</span><span class="ident" id="2590222">Cap</span><span class="op" id="2590225">)</span>&nbsp;<span class="op" id="2590227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2590231">panic</span><span class="op" id="2590236">(</span><span class="string" id="2590237">&#34;reflect:&nbsp;slice&nbsp;length&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetLen&#34;</span><span class="op" id="2590283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2590286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2590289">s</span><span class="op" id="2590290">.</span><span class="ident" id="2590291">Len</span>&nbsp;<span class="op" id="2590295">=</span>&nbsp;<span class="ident" id="2590297">n</span><br>
<span class="lineno">1395</span><span class="op" id="2590299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2590302">//&nbsp;SetCap&nbsp;sets&nbsp;v&#39;s&nbsp;capacity&nbsp;to&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2590336">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;smaller&nbsp;than&nbsp;the&nbsp;length&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2590412">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno">1400</span><span class="keyword" id="2590455">func</span>&nbsp;<span class="op" id="2590460">(</span><span class="ident" id="2590461">v</span>&nbsp;<span class="ident" id="2590463">Value</span><span class="op" id="2590468">)</span>&nbsp;<span class="ident" id="2590470">SetCap</span><span class="op" id="2590476">(</span><span class="ident" id="2590477">n</span>&nbsp;<span class="builtintype" id="2590479">int</span><span class="op" id="2590482">)</span>&nbsp;<span class="op" id="2590484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2590487">v</span><span class="op" id="2590488">.</span><span class="ident" id="2590489">mustBeAssignable</span><span class="op" id="2590505">(</span><span class="op" id="2590506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2590509">v</span><span class="op" id="2590510">.</span><span class="ident" id="2590511">mustBe</span><span class="op" id="2590517">(</span><span class="ident" id="2590518">Slice</span><span class="op" id="2590523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2590526">s</span>&nbsp;<span class="op" id="2590528">:=</span>&nbsp;<span class="op" id="2590531">(</span><span class="op" id="2590532">*</span><span class="ident" id="2590533">sliceHeader</span><span class="op" id="2590544">)</span><span class="op" id="2590545">(</span><span class="ident" id="2590546">v</span><span class="op" id="2590547">.</span><span class="ident" id="2590548">ptr</span><span class="op" id="2590551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590554">if</span>&nbsp;<span class="ident" id="2590557">n</span>&nbsp;<span class="op" id="2590559">&lt;</span>&nbsp;<span class="builtintype" id="2590561">int</span><span class="op" id="2590564">(</span><span class="ident" id="2590565">s</span><span class="op" id="2590566">.</span><span class="ident" id="2590567">Len</span><span class="op" id="2590570">)</span>&nbsp;<span class="op" id="2590572">||</span>&nbsp;<span class="ident" id="2590575">n</span>&nbsp;<span class="op" id="2590577">&gt;</span>&nbsp;<span class="builtintype" id="2590579">int</span><span class="op" id="2590582">(</span><span class="ident" id="2590583">s</span><span class="op" id="2590584">.</span><span class="ident" id="2590585">Cap</span><span class="op" id="2590588">)</span>&nbsp;<span class="op" id="2590590">{</span><br>
<span class="lineno">1405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2590594">panic</span><span class="op" id="2590599">(</span><span class="string" id="2590600">&#34;reflect:&nbsp;slice&nbsp;capacity&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetCap&#34;</span><span class="op" id="2590648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2590651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2590654">s</span><span class="op" id="2590655">.</span><span class="ident" id="2590656">Cap</span>&nbsp;<span class="op" id="2590660">=</span>&nbsp;<span class="ident" id="2590662">n</span><br>
<span class="lineno"></span><span class="op" id="2590664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1410</span><span class="comment" id="2590667">//&nbsp;SetMapIndex&nbsp;sets&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v&nbsp;to&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="2590738">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2590775">//&nbsp;If&nbsp;val&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value,&nbsp;SetMapIndex&nbsp;deletes&nbsp;the&nbsp;key&nbsp;from&nbsp;the&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="2590846">//&nbsp;Otherwise&nbsp;if&nbsp;v&nbsp;holds&nbsp;a&nbsp;nil&nbsp;map,&nbsp;SetMapIndex&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2590905">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type,</span><br>
<span class="lineno">1415</span><span class="comment" id="2590972">//&nbsp;and&nbsp;val&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;value&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2591035">func</span>&nbsp;<span class="op" id="2591040">(</span><span class="ident" id="2591041">v</span>&nbsp;<span class="ident" id="2591043">Value</span><span class="op" id="2591048">)</span>&nbsp;<span class="ident" id="2591050">SetMapIndex</span><span class="op" id="2591061">(</span><span class="ident" id="2591062">key</span><span class="op" id="2591065">,</span>&nbsp;<span class="ident" id="2591067">val</span>&nbsp;<span class="ident" id="2591071">Value</span><span class="op" id="2591076">)</span>&nbsp;<span class="op" id="2591078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2591081">v</span><span class="op" id="2591082">.</span><span class="ident" id="2591083">mustBe</span><span class="op" id="2591089">(</span><span class="ident" id="2591090">Map</span><span class="op" id="2591093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2591096">v</span><span class="op" id="2591097">.</span><span class="ident" id="2591098">mustBeExported</span><span class="op" id="2591112">(</span><span class="op" id="2591113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2591116">key</span><span class="op" id="2591119">.</span><span class="ident" id="2591120">mustBeExported</span><span class="op" id="2591134">(</span><span class="op" id="2591135">)</span><br>
<span class="lineno">1420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2591138">tt</span>&nbsp;<span class="op" id="2591141">:=</span>&nbsp;<span class="op" id="2591144">(</span><span class="op" id="2591145">*</span><span class="ident" id="2591146">mapType</span><span class="op" id="2591153">)</span><span class="op" id="2591154">(</span><span class="ident" id="2591155">unsafe</span><span class="op" id="2591161">.</span><span class="ident" id="2591162">Pointer</span><span class="op" id="2591169">(</span><span class="ident" id="2591170">v</span><span class="op" id="2591171">.</span><span class="ident" id="2591172">typ</span><span class="op" id="2591175">)</span><span class="op" id="2591176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2591179">key</span>&nbsp;<span class="op" id="2591183">=</span>&nbsp;<span class="ident" id="2591185">key</span><span class="op" id="2591188">.</span><span class="ident" id="2591189">assignTo</span><span class="op" id="2591197">(</span><span class="string" id="2591198">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2591225">,</span>&nbsp;<span class="ident" id="2591227">tt</span><span class="op" id="2591229">.</span><span class="ident" id="2591230">key</span><span class="op" id="2591233">,</span>&nbsp;<span class="ident" id="2591235">nil</span><span class="op" id="2591238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2591241">var</span>&nbsp;<span class="ident" id="2591245">k</span>&nbsp;<span class="ident" id="2591247">unsafe</span><span class="op" id="2591253">.</span><span class="ident" id="2591254">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2591263">if</span>&nbsp;<span class="ident" id="2591266">key</span><span class="op" id="2591269">.</span><span class="ident" id="2591270">flag</span><span class="op" id="2591274">&amp;</span><span class="ident" id="2591275">flagIndir</span>&nbsp;<span class="op" id="2591285">!=</span>&nbsp;<span class="num" id="2591288">0</span>&nbsp;<span class="op" id="2591290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2591294">k</span>&nbsp;<span class="op" id="2591296">=</span>&nbsp;<span class="ident" id="2591298">key</span><span class="op" id="2591301">.</span><span class="ident" id="2591302">ptr</span><br>
<span class="lineno">1425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2591307">}</span>&nbsp;<span class="keyword" id="2591309">else</span>&nbsp;<span class="op" id="2591314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2591318">k</span>&nbsp;<span class="op" id="2591320">=</span>&nbsp;<span class="ident" id="2591322">unsafe</span><span class="op" id="2591328">.</span><span class="ident" id="2591329">Pointer</span><span class="op" id="2591336">(</span><span class="op" id="2591337">&amp;</span><span class="ident" id="2591338">key</span><span class="op" id="2591341">.</span><span class="ident" id="2591342">ptr</span><span class="op" id="2591345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2591348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2591351">if</span>&nbsp;<span class="ident" id="2591354">val</span><span class="op" id="2591357">.</span><span class="ident" id="2591358">typ</span>&nbsp;<span class="op" id="2591362">==</span>&nbsp;<span class="ident" id="2591365">nil</span>&nbsp;<span class="op" id="2591369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2591373">mapdelete</span><span class="op" id="2591382">(</span><span class="ident" id="2591383">v</span><span class="op" id="2591384">.</span><span class="ident" id="2591385">typ</span><span class="op" id="2591388">,</span>&nbsp;<span class="ident" id="2591390">v</span><span class="op" id="2591391">.</span><span class="ident" id="2591392">pointer</span><span class="op" id="2591399">(</span><span class="op" id="2591400">)</span><span class="op" id="2591401">,</span>&nbsp;<span class="ident" id="2591403">k</span><span class="op" id="2591404">)</span><br>
<span class="lineno">1430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2591408">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2591416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2591419">val</span><span class="op" id="2591422">.</span><span class="ident" id="2591423">mustBeExported</span><span class="op" id="2591437">(</span><span class="op" id="2591438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2591441">val</span>&nbsp;<span class="op" id="2591445">=</span>&nbsp;<span class="ident" id="2591447">val</span><span class="op" id="2591450">.</span><span class="ident" id="2591451">assignTo</span><span class="op" id="2591459">(</span><span class="string" id="2591460">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2591487">,</span>&nbsp;<span class="ident" id="2591489">tt</span><span class="op" id="2591491">.</span><span class="ident" id="2591492">elem</span><span class="op" id="2591496">,</span>&nbsp;<span class="ident" id="2591498">nil</span><span class="op" id="2591501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2591504">var</span>&nbsp;<span class="ident" id="2591508">e</span>&nbsp;<span class="ident" id="2591510">unsafe</span><span class="op" id="2591516">.</span><span class="ident" id="2591517">Pointer</span><br>
<span class="lineno">1435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2591526">if</span>&nbsp;<span class="ident" id="2591529">val</span><span class="op" id="2591532">.</span><span class="ident" id="2591533">flag</span><span class="op" id="2591537">&amp;</span><span class="ident" id="2591538">flagIndir</span>&nbsp;<span class="op" id="2591548">!=</span>&nbsp;<span class="num" id="2591551">0</span>&nbsp;<span class="op" id="2591553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2591557">e</span>&nbsp;<span class="op" id="2591559">=</span>&nbsp;<span class="ident" id="2591561">val</span><span class="op" id="2591564">.</span><span class="ident" id="2591565">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2591570">}</span>&nbsp;<span class="keyword" id="2591572">else</span>&nbsp;<span class="op" id="2591577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2591581">e</span>&nbsp;<span class="op" id="2591583">=</span>&nbsp;<span class="ident" id="2591585">unsafe</span><span class="op" id="2591591">.</span><span class="ident" id="2591592">Pointer</span><span class="op" id="2591599">(</span><span class="op" id="2591600">&amp;</span><span class="ident" id="2591601">val</span><span class="op" id="2591604">.</span><span class="ident" id="2591605">ptr</span><span class="op" id="2591608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2591611">}</span><br>
<span class="lineno">1440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2591614">mapassign</span><span class="op" id="2591623">(</span><span class="ident" id="2591624">v</span><span class="op" id="2591625">.</span><span class="ident" id="2591626">typ</span><span class="op" id="2591629">,</span>&nbsp;<span class="ident" id="2591631">v</span><span class="op" id="2591632">.</span><span class="ident" id="2591633">pointer</span><span class="op" id="2591640">(</span><span class="op" id="2591641">)</span><span class="op" id="2591642">,</span>&nbsp;<span class="ident" id="2591644">k</span><span class="op" id="2591645">,</span>&nbsp;<span class="ident" id="2591647">e</span><span class="op" id="2591648">)</span><br>
<span class="lineno"></span><span class="op" id="2591650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2591653">//&nbsp;SetUint&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2591696">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1445</span><span class="keyword" id="2591802">func</span>&nbsp;<span class="op" id="2591807">(</span><span class="ident" id="2591808">v</span>&nbsp;<span class="ident" id="2591810">Value</span><span class="op" id="2591815">)</span>&nbsp;<span class="ident" id="2591817">SetUint</span><span class="op" id="2591824">(</span><span class="ident" id="2591825">x</span>&nbsp;<span class="ident" id="2591827">uint64</span><span class="op" id="2591833">)</span>&nbsp;<span class="op" id="2591835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2591838">v</span><span class="op" id="2591839">.</span><span class="ident" id="2591840">mustBeAssignable</span><span class="op" id="2591856">(</span><span class="op" id="2591857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2591860">switch</span>&nbsp;<span class="ident" id="2591867">k</span>&nbsp;<span class="op" id="2591869">:=</span>&nbsp;<span class="ident" id="2591872">v</span><span class="op" id="2591873">.</span><span class="ident" id="2591874">kind</span><span class="op" id="2591878">(</span><span class="op" id="2591879">)</span><span class="op" id="2591880">;</span>&nbsp;<span class="ident" id="2591882">k</span>&nbsp;<span class="op" id="2591884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2591887">default</span><span class="op" id="2591894">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2591898">panic</span><span class="op" id="2591903">(</span><span class="op" id="2591904">&amp;</span><span class="ident" id="2591905">ValueError</span><span class="op" id="2591915">{</span><span class="string" id="2591916">&#34;reflect.Value.SetUint&#34;</span><span class="op" id="2591939">,</span>&nbsp;<span class="ident" id="2591941">v</span><span class="op" id="2591942">.</span><span class="ident" id="2591943">kind</span><span class="op" id="2591947">(</span><span class="op" id="2591948">)</span><span class="op" id="2591949">}</span><span class="op" id="2591950">)</span><br>
<span class="lineno">1450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2591953">case</span>&nbsp;<span class="ident" id="2591958">Uint</span><span class="op" id="2591962">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2591966">*</span><span class="op" id="2591967">(</span><span class="op" id="2591968">*</span><span class="builtintype" id="2591969">uint</span><span class="op" id="2591973">)</span><span class="op" id="2591974">(</span><span class="ident" id="2591975">v</span><span class="op" id="2591976">.</span><span class="ident" id="2591977">ptr</span><span class="op" id="2591980">)</span>&nbsp;<span class="op" id="2591982">=</span>&nbsp;<span class="builtintype" id="2591984">uint</span><span class="op" id="2591988">(</span><span class="ident" id="2591989">x</span><span class="op" id="2591990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2591993">case</span>&nbsp;<span class="ident" id="2591998">Uint8</span><span class="op" id="2592003">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2592007">*</span><span class="op" id="2592008">(</span><span class="op" id="2592009">*</span><span class="builtintype" id="2592010">uint8</span><span class="op" id="2592015">)</span><span class="op" id="2592016">(</span><span class="ident" id="2592017">v</span><span class="op" id="2592018">.</span><span class="ident" id="2592019">ptr</span><span class="op" id="2592022">)</span>&nbsp;<span class="op" id="2592024">=</span>&nbsp;<span class="builtintype" id="2592026">uint8</span><span class="op" id="2592031">(</span><span class="ident" id="2592032">x</span><span class="op" id="2592033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2592036">case</span>&nbsp;<span class="ident" id="2592041">Uint16</span><span class="op" id="2592047">:</span><br>
<span class="lineno">1455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2592051">*</span><span class="op" id="2592052">(</span><span class="op" id="2592053">*</span><span class="builtintype" id="2592054">uint16</span><span class="op" id="2592060">)</span><span class="op" id="2592061">(</span><span class="ident" id="2592062">v</span><span class="op" id="2592063">.</span><span class="ident" id="2592064">ptr</span><span class="op" id="2592067">)</span>&nbsp;<span class="op" id="2592069">=</span>&nbsp;<span class="builtintype" id="2592071">uint16</span><span class="op" id="2592077">(</span><span class="ident" id="2592078">x</span><span class="op" id="2592079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2592082">case</span>&nbsp;<span class="ident" id="2592087">Uint32</span><span class="op" id="2592093">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2592097">*</span><span class="op" id="2592098">(</span><span class="op" id="2592099">*</span><span class="builtintype" id="2592100">uint32</span><span class="op" id="2592106">)</span><span class="op" id="2592107">(</span><span class="ident" id="2592108">v</span><span class="op" id="2592109">.</span><span class="ident" id="2592110">ptr</span><span class="op" id="2592113">)</span>&nbsp;<span class="op" id="2592115">=</span>&nbsp;<span class="builtintype" id="2592117">uint32</span><span class="op" id="2592123">(</span><span class="ident" id="2592124">x</span><span class="op" id="2592125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2592128">case</span>&nbsp;<span class="ident" id="2592133">Uint64</span><span class="op" id="2592139">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2592143">*</span><span class="op" id="2592144">(</span><span class="op" id="2592145">*</span><span class="ident" id="2592146">uint64</span><span class="op" id="2592152">)</span><span class="op" id="2592153">(</span><span class="ident" id="2592154">v</span><span class="op" id="2592155">.</span><span class="ident" id="2592156">ptr</span><span class="op" id="2592159">)</span>&nbsp;<span class="op" id="2592161">=</span>&nbsp;<span class="ident" id="2592163">x</span><br>
<span class="lineno">1460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2592166">case</span>&nbsp;<span class="ident" id="2592171">Uintptr</span><span class="op" id="2592178">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2592182">*</span><span class="op" id="2592183">(</span><span class="op" id="2592184">*</span><span class="builtintype" id="2592185">uintptr</span><span class="op" id="2592192">)</span><span class="op" id="2592193">(</span><span class="ident" id="2592194">v</span><span class="op" id="2592195">.</span><span class="ident" id="2592196">ptr</span><span class="op" id="2592199">)</span>&nbsp;<span class="op" id="2592201">=</span>&nbsp;<span class="builtintype" id="2592203">uintptr</span><span class="op" id="2592210">(</span><span class="ident" id="2592211">x</span><span class="op" id="2592212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2592215">}</span><br>
<span class="lineno"></span><span class="op" id="2592217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1465</span><span class="comment" id="2592220">//&nbsp;SetPointer&nbsp;sets&nbsp;the&nbsp;unsafe.Pointer&nbsp;value&nbsp;v&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2592272">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2592319">func</span>&nbsp;<span class="op" id="2592324">(</span><span class="ident" id="2592325">v</span>&nbsp;<span class="ident" id="2592327">Value</span><span class="op" id="2592332">)</span>&nbsp;<span class="ident" id="2592334">SetPointer</span><span class="op" id="2592344">(</span><span class="ident" id="2592345">x</span>&nbsp;<span class="ident" id="2592347">unsafe</span><span class="op" id="2592353">.</span><span class="ident" id="2592354">Pointer</span><span class="op" id="2592361">)</span>&nbsp;<span class="op" id="2592363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2592366">v</span><span class="op" id="2592367">.</span><span class="ident" id="2592368">mustBeAssignable</span><span class="op" id="2592384">(</span><span class="op" id="2592385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2592388">v</span><span class="op" id="2592389">.</span><span class="ident" id="2592390">mustBe</span><span class="op" id="2592396">(</span><span class="ident" id="2592397">UnsafePointer</span><span class="op" id="2592410">)</span><br>
<span class="lineno">1470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2592413">*</span><span class="op" id="2592414">(</span><span class="op" id="2592415">*</span><span class="ident" id="2592416">unsafe</span><span class="op" id="2592422">.</span><span class="ident" id="2592423">Pointer</span><span class="op" id="2592430">)</span><span class="op" id="2592431">(</span><span class="ident" id="2592432">v</span><span class="op" id="2592433">.</span><span class="ident" id="2592434">ptr</span><span class="op" id="2592437">)</span>&nbsp;<span class="op" id="2592439">=</span>&nbsp;<span class="ident" id="2592441">x</span><br>
<span class="lineno"></span><span class="op" id="2592443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2592446">//&nbsp;SetString&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2592491">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1475</span><span class="keyword" id="2592555">func</span>&nbsp;<span class="op" id="2592560">(</span><span class="ident" id="2592561">v</span>&nbsp;<span class="ident" id="2592563">Value</span><span class="op" id="2592568">)</span>&nbsp;<span class="ident" id="2592570">SetString</span><span class="op" id="2592579">(</span><span class="ident" id="2592580">x</span>&nbsp;<span class="builtintype" id="2592582">string</span><span class="op" id="2592588">)</span>&nbsp;<span class="op" id="2592590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2592593">v</span><span class="op" id="2592594">.</span><span class="ident" id="2592595">mustBeAssignable</span><span class="op" id="2592611">(</span><span class="op" id="2592612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2592615">v</span><span class="op" id="2592616">.</span><span class="ident" id="2592617">mustBe</span><span class="op" id="2592623">(</span><span class="ident" id="2592624">String</span><span class="op" id="2592630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2592633">*</span><span class="op" id="2592634">(</span><span class="op" id="2592635">*</span><span class="builtintype" id="2592636">string</span><span class="op" id="2592642">)</span><span class="op" id="2592643">(</span><span class="ident" id="2592644">v</span><span class="op" id="2592645">.</span><span class="ident" id="2592646">ptr</span><span class="op" id="2592649">)</span>&nbsp;<span class="op" id="2592651">=</span>&nbsp;<span class="ident" id="2592653">x</span><br>
<span class="lineno"></span><span class="op" id="2592655">}</span><br>
<span class="lineno">1480</span><br>
<span class="lineno"></span><span class="comment" id="2592658">//&nbsp;Slice&nbsp;returns&nbsp;v[i:j].</span><br>
<span class="lineno"></span><span class="comment" id="2592683">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice&nbsp;or&nbsp;String,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2592774">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2592814">func</span>&nbsp;<span class="op" id="2592819">(</span><span class="ident" id="2592820">v</span>&nbsp;<span class="ident" id="2592822">Value</span><span class="op" id="2592827">)</span>&nbsp;<span class="ident" id="2592829">Slice</span><span class="op" id="2592834">(</span><span class="ident" id="2592835">i</span><span class="op" id="2592836">,</span>&nbsp;<span class="ident" id="2592838">j</span>&nbsp;<span class="builtintype" id="2592840">int</span><span class="op" id="2592843">)</span>&nbsp;<span class="ident" id="2592845">Value</span>&nbsp;<span class="op" id="2592851">{</span><br>
<span class="lineno">1485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2592854">var</span>&nbsp;<span class="op" id="2592858">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2592862">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2592867">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2592873">typ</span>&nbsp;&nbsp;<span class="op" id="2592878">*</span><span class="ident" id="2592879">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2592891">base</span>&nbsp;<span class="ident" id="2592896">unsafe</span><span class="op" id="2592902">.</span><span class="ident" id="2592903">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2592912">)</span><br>
<span class="lineno">1490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2592915">switch</span>&nbsp;<span class="ident" id="2592922">kind</span>&nbsp;<span class="op" id="2592927">:=</span>&nbsp;<span class="ident" id="2592930">v</span><span class="op" id="2592931">.</span><span class="ident" id="2592932">kind</span><span class="op" id="2592936">(</span><span class="op" id="2592937">)</span><span class="op" id="2592938">;</span>&nbsp;<span class="ident" id="2592940">kind</span>&nbsp;<span class="op" id="2592945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2592948">default</span><span class="op" id="2592955">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2592959">panic</span><span class="op" id="2592964">(</span><span class="op" id="2592965">&amp;</span><span class="ident" id="2592966">ValueError</span><span class="op" id="2592976">{</span><span class="string" id="2592977">&#34;reflect.Value.Slice&#34;</span><span class="op" id="2592998">,</span>&nbsp;<span class="ident" id="2593000">v</span><span class="op" id="2593001">.</span><span class="ident" id="2593002">kind</span><span class="op" id="2593006">(</span><span class="op" id="2593007">)</span><span class="op" id="2593008">}</span><span class="op" id="2593009">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2593013">case</span>&nbsp;<span class="ident" id="2593018">Array</span><span class="op" id="2593023">:</span><br>
<span class="lineno">1495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2593027">if</span>&nbsp;<span class="ident" id="2593030">v</span><span class="op" id="2593031">.</span><span class="ident" id="2593032">flag</span><span class="op" id="2593036">&amp;</span><span class="ident" id="2593037">flagAddr</span>&nbsp;<span class="op" id="2593046">==</span>&nbsp;<span class="num" id="2593049">0</span>&nbsp;<span class="op" id="2593051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2593056">panic</span><span class="op" id="2593061">(</span><span class="string" id="2593062">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2593113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2593117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2593121">tt</span>&nbsp;<span class="op" id="2593124">:=</span>&nbsp;<span class="op" id="2593127">(</span><span class="op" id="2593128">*</span><span class="ident" id="2593129">arrayType</span><span class="op" id="2593138">)</span><span class="op" id="2593139">(</span><span class="ident" id="2593140">unsafe</span><span class="op" id="2593146">.</span><span class="ident" id="2593147">Pointer</span><span class="op" id="2593154">(</span><span class="ident" id="2593155">v</span><span class="op" id="2593156">.</span><span class="ident" id="2593157">typ</span><span class="op" id="2593160">)</span><span class="op" id="2593161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2593165">cap</span>&nbsp;<span class="op" id="2593169">=</span>&nbsp;<span class="builtintype" id="2593171">int</span><span class="op" id="2593174">(</span><span class="ident" id="2593175">tt</span><span class="op" id="2593177">.</span><span class="builtinfunc" id="2593178">len</span><span class="op" id="2593181">)</span><br>
<span class="lineno">1500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2593185">typ</span>&nbsp;<span class="op" id="2593189">=</span>&nbsp;<span class="op" id="2593191">(</span><span class="op" id="2593192">*</span><span class="ident" id="2593193">sliceType</span><span class="op" id="2593202">)</span><span class="op" id="2593203">(</span><span class="ident" id="2593204">unsafe</span><span class="op" id="2593210">.</span><span class="ident" id="2593211">Pointer</span><span class="op" id="2593218">(</span><span class="ident" id="2593219">tt</span><span class="op" id="2593221">.</span><span class="ident" id="2593222">slice</span><span class="op" id="2593227">)</span><span class="op" id="2593228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2593232">base</span>&nbsp;<span class="op" id="2593237">=</span>&nbsp;<span class="ident" id="2593239">v</span><span class="op" id="2593240">.</span><span class="ident" id="2593241">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2593247">case</span>&nbsp;<span class="ident" id="2593252">Slice</span><span class="op" id="2593257">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2593261">typ</span>&nbsp;<span class="op" id="2593265">=</span>&nbsp;<span class="op" id="2593267">(</span><span class="op" id="2593268">*</span><span class="ident" id="2593269">sliceType</span><span class="op" id="2593278">)</span><span class="op" id="2593279">(</span><span class="ident" id="2593280">unsafe</span><span class="op" id="2593286">.</span><span class="ident" id="2593287">Pointer</span><span class="op" id="2593294">(</span><span class="ident" id="2593295">v</span><span class="op" id="2593296">.</span><span class="ident" id="2593297">typ</span><span class="op" id="2593300">)</span><span class="op" id="2593301">)</span><br>
<span class="lineno">1505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2593305">s</span>&nbsp;<span class="op" id="2593307">:=</span>&nbsp;<span class="op" id="2593310">(</span><span class="op" id="2593311">*</span><span class="ident" id="2593312">sliceHeader</span><span class="op" id="2593323">)</span><span class="op" id="2593324">(</span><span class="ident" id="2593325">v</span><span class="op" id="2593326">.</span><span class="ident" id="2593327">ptr</span><span class="op" id="2593330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2593334">base</span>&nbsp;<span class="op" id="2593339">=</span>&nbsp;<span class="ident" id="2593341">unsafe</span><span class="op" id="2593347">.</span><span class="ident" id="2593348">Pointer</span><span class="op" id="2593355">(</span><span class="ident" id="2593356">s</span><span class="op" id="2593357">.</span><span class="ident" id="2593358">Data</span><span class="op" id="2593362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2593366">cap</span>&nbsp;<span class="op" id="2593370">=</span>&nbsp;<span class="ident" id="2593372">s</span><span class="op" id="2593373">.</span><span class="ident" id="2593374">Cap</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2593380">case</span>&nbsp;<span class="ident" id="2593385">String</span><span class="op" id="2593391">:</span><br>
<span class="lineno">1510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2593395">s</span>&nbsp;<span class="op" id="2593397">:=</span>&nbsp;<span class="op" id="2593400">(</span><span class="op" id="2593401">*</span><span class="ident" id="2593402">stringHeader</span><span class="op" id="2593414">)</span><span class="op" id="2593415">(</span><span class="ident" id="2593416">v</span><span class="op" id="2593417">.</span><span class="ident" id="2593418">ptr</span><span class="op" id="2593421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2593425">if</span>&nbsp;<span class="ident" id="2593428">i</span>&nbsp;<span class="op" id="2593430">&lt;</span>&nbsp;<span class="num" id="2593432">0</span>&nbsp;<span class="op" id="2593434">||</span>&nbsp;<span class="ident" id="2593437">j</span>&nbsp;<span class="op" id="2593439">&lt;</span>&nbsp;<span class="ident" id="2593441">i</span>&nbsp;<span class="op" id="2593443">||</span>&nbsp;<span class="ident" id="2593446">j</span>&nbsp;<span class="op" id="2593448">&gt;</span>&nbsp;<span class="ident" id="2593450">s</span><span class="op" id="2593451">.</span><span class="ident" id="2593452">Len</span>&nbsp;<span class="op" id="2593456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2593461">panic</span><span class="op" id="2593466">(</span><span class="string" id="2593467">&#34;reflect.Value.Slice:&nbsp;string&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2593522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2593526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2593530">t</span>&nbsp;<span class="op" id="2593532">:=</span>&nbsp;<span class="ident" id="2593535">stringHeader</span><span class="op" id="2593547">{</span><span class="ident" id="2593548">unsafe</span><span class="op" id="2593554">.</span><span class="ident" id="2593555">Pointer</span><span class="op" id="2593562">(</span><span class="builtintype" id="2593563">uintptr</span><span class="op" id="2593570">(</span><span class="ident" id="2593571">s</span><span class="op" id="2593572">.</span><span class="ident" id="2593573">Data</span><span class="op" id="2593577">)</span>&nbsp;<span class="op" id="2593579">+</span>&nbsp;<span class="builtintype" id="2593581">uintptr</span><span class="op" id="2593588">(</span><span class="ident" id="2593589">i</span><span class="op" id="2593590">)</span><span class="op" id="2593591">)</span><span class="op" id="2593592">,</span>&nbsp;<span class="ident" id="2593594">j</span>&nbsp;<span class="op" id="2593596">-</span>&nbsp;<span class="ident" id="2593598">i</span><span class="op" id="2593599">}</span><br>
<span class="lineno">1515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2593603">return</span>&nbsp;<span class="ident" id="2593610">Value</span><span class="op" id="2593615">{</span><span class="ident" id="2593616">v</span><span class="op" id="2593617">.</span><span class="ident" id="2593618">typ</span><span class="op" id="2593621">,</span>&nbsp;<span class="ident" id="2593623">unsafe</span><span class="op" id="2593629">.</span><span class="ident" id="2593630">Pointer</span><span class="op" id="2593637">(</span><span class="op" id="2593638">&amp;</span><span class="ident" id="2593639">t</span><span class="op" id="2593640">)</span><span class="op" id="2593641">,</span>&nbsp;<span class="ident" id="2593643">v</span><span class="op" id="2593644">.</span><span class="ident" id="2593645">flag</span><span class="op" id="2593649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2593652">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2593656">if</span>&nbsp;<span class="ident" id="2593659">i</span>&nbsp;<span class="op" id="2593661">&lt;</span>&nbsp;<span class="num" id="2593663">0</span>&nbsp;<span class="op" id="2593665">||</span>&nbsp;<span class="ident" id="2593668">j</span>&nbsp;<span class="op" id="2593670">&lt;</span>&nbsp;<span class="ident" id="2593672">i</span>&nbsp;<span class="op" id="2593674">||</span>&nbsp;<span class="ident" id="2593677">j</span>&nbsp;<span class="op" id="2593679">&gt;</span>&nbsp;<span class="builtinfunc" id="2593681">cap</span>&nbsp;<span class="op" id="2593685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2593689">panic</span><span class="op" id="2593694">(</span><span class="string" id="2593695">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2593743">)</span><br>
<span class="lineno">1520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2593746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2593750">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;gc&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2593811">var</span>&nbsp;<span class="ident" id="2593815">x</span>&nbsp;<span class="op" id="2593817">[</span><span class="op" id="2593818">]</span><span class="ident" id="2593819">unsafe</span><span class="op" id="2593825">.</span><span class="ident" id="2593826">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno">1525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2593836">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2593877">s</span>&nbsp;<span class="op" id="2593879">:=</span>&nbsp;<span class="op" id="2593882">(</span><span class="op" id="2593883">*</span><span class="ident" id="2593884">sliceHeader</span><span class="op" id="2593895">)</span><span class="op" id="2593896">(</span><span class="ident" id="2593897">unsafe</span><span class="op" id="2593903">.</span><span class="ident" id="2593904">Pointer</span><span class="op" id="2593911">(</span><span class="op" id="2593912">&amp;</span><span class="ident" id="2593913">x</span><span class="op" id="2593914">)</span><span class="op" id="2593915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2593918">s</span><span class="op" id="2593919">.</span><span class="ident" id="2593920">Len</span>&nbsp;<span class="op" id="2593924">=</span>&nbsp;<span class="ident" id="2593926">j</span>&nbsp;<span class="op" id="2593928">-</span>&nbsp;<span class="ident" id="2593930">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2593933">s</span><span class="op" id="2593934">.</span><span class="ident" id="2593935">Cap</span>&nbsp;<span class="op" id="2593939">=</span>&nbsp;<span class="builtinfunc" id="2593941">cap</span>&nbsp;<span class="op" id="2593945">-</span>&nbsp;<span class="ident" id="2593947">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2593950">if</span>&nbsp;<span class="builtinfunc" id="2593953">cap</span><span class="op" id="2593956">-</span><span class="ident" id="2593957">i</span>&nbsp;<span class="op" id="2593959">&gt;</span>&nbsp;<span class="num" id="2593961">0</span>&nbsp;<span class="op" id="2593963">{</span><br>
<span class="lineno">1530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2593967">s</span><span class="op" id="2593968">.</span><span class="ident" id="2593969">Data</span>&nbsp;<span class="op" id="2593974">=</span>&nbsp;<span class="ident" id="2593976">unsafe</span><span class="op" id="2593982">.</span><span class="ident" id="2593983">Pointer</span><span class="op" id="2593990">(</span><span class="builtintype" id="2593991">uintptr</span><span class="op" id="2593998">(</span><span class="ident" id="2593999">base</span><span class="op" id="2594003">)</span>&nbsp;<span class="op" id="2594005">+</span>&nbsp;<span class="builtintype" id="2594007">uintptr</span><span class="op" id="2594014">(</span><span class="ident" id="2594015">i</span><span class="op" id="2594016">)</span><span class="op" id="2594017">*</span><span class="ident" id="2594018">typ</span><span class="op" id="2594021">.</span><span class="ident" id="2594022">elem</span><span class="op" id="2594026">.</span><span class="ident" id="2594027">Size</span><span class="op" id="2594031">(</span><span class="op" id="2594032">)</span><span class="op" id="2594033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2594036">}</span>&nbsp;<span class="keyword" id="2594038">else</span>&nbsp;<span class="op" id="2594043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2594047">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2594114">s</span><span class="op" id="2594115">.</span><span class="ident" id="2594116">Data</span>&nbsp;<span class="op" id="2594121">=</span>&nbsp;<span class="ident" id="2594123">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2594129">}</span><br>
<span class="lineno">1535</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2594133">fl</span>&nbsp;<span class="op" id="2594136">:=</span>&nbsp;<span class="ident" id="2594139">v</span><span class="op" id="2594140">.</span><span class="ident" id="2594141">flag</span><span class="op" id="2594145">&amp;</span><span class="ident" id="2594146">flagRO</span>&nbsp;<span class="op" id="2594153">|</span>&nbsp;<span class="ident" id="2594155">flagIndir</span>&nbsp;<span class="op" id="2594165">|</span>&nbsp;<span class="ident" id="2594167">flag</span><span class="op" id="2594171">(</span><span class="ident" id="2594172">Slice</span><span class="op" id="2594177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2594180">return</span>&nbsp;<span class="ident" id="2594187">Value</span><span class="op" id="2594192">{</span><span class="ident" id="2594193">typ</span><span class="op" id="2594196">.</span><span class="ident" id="2594197">common</span><span class="op" id="2594203">(</span><span class="op" id="2594204">)</span><span class="op" id="2594205">,</span>&nbsp;<span class="ident" id="2594207">unsafe</span><span class="op" id="2594213">.</span><span class="ident" id="2594214">Pointer</span><span class="op" id="2594221">(</span><span class="op" id="2594222">&amp;</span><span class="ident" id="2594223">x</span><span class="op" id="2594224">)</span><span class="op" id="2594225">,</span>&nbsp;<span class="ident" id="2594227">fl</span><span class="op" id="2594229">}</span><br>
<span class="lineno"></span><span class="op" id="2594231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1540</span><span class="comment" id="2594234">//&nbsp;Slice3&nbsp;is&nbsp;the&nbsp;3-index&nbsp;form&nbsp;of&nbsp;the&nbsp;slice&nbsp;operation:&nbsp;it&nbsp;returns&nbsp;v[i:j:k].</span><br>
<span class="lineno"></span><span class="comment" id="2594309">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array&nbsp;or&nbsp;Slice,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2594392">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2594432">func</span>&nbsp;<span class="op" id="2594437">(</span><span class="ident" id="2594438">v</span>&nbsp;<span class="ident" id="2594440">Value</span><span class="op" id="2594445">)</span>&nbsp;<span class="ident" id="2594447">Slice3</span><span class="op" id="2594453">(</span><span class="ident" id="2594454">i</span><span class="op" id="2594455">,</span>&nbsp;<span class="ident" id="2594457">j</span><span class="op" id="2594458">,</span>&nbsp;<span class="ident" id="2594460">k</span>&nbsp;<span class="builtintype" id="2594462">int</span><span class="op" id="2594465">)</span>&nbsp;<span class="ident" id="2594467">Value</span>&nbsp;<span class="op" id="2594473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2594476">var</span>&nbsp;<span class="op" id="2594480">(</span><br>
<span class="lineno">1545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2594484">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2594489">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2594495">typ</span>&nbsp;&nbsp;<span class="op" id="2594500">*</span><span class="ident" id="2594501">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2594513">base</span>&nbsp;<span class="ident" id="2594518">unsafe</span><span class="op" id="2594524">.</span><span class="ident" id="2594525">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2594534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2594537">switch</span>&nbsp;<span class="ident" id="2594544">kind</span>&nbsp;<span class="op" id="2594549">:=</span>&nbsp;<span class="ident" id="2594552">v</span><span class="op" id="2594553">.</span><span class="ident" id="2594554">kind</span><span class="op" id="2594558">(</span><span class="op" id="2594559">)</span><span class="op" id="2594560">;</span>&nbsp;<span class="ident" id="2594562">kind</span>&nbsp;<span class="op" id="2594567">{</span><br>
<span class="lineno">1550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2594570">default</span><span class="op" id="2594577">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2594581">panic</span><span class="op" id="2594586">(</span><span class="op" id="2594587">&amp;</span><span class="ident" id="2594588">ValueError</span><span class="op" id="2594598">{</span><span class="string" id="2594599">&#34;reflect.Value.Slice3&#34;</span><span class="op" id="2594621">,</span>&nbsp;<span class="ident" id="2594623">v</span><span class="op" id="2594624">.</span><span class="ident" id="2594625">kind</span><span class="op" id="2594629">(</span><span class="op" id="2594630">)</span><span class="op" id="2594631">}</span><span class="op" id="2594632">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2594636">case</span>&nbsp;<span class="ident" id="2594641">Array</span><span class="op" id="2594646">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2594650">if</span>&nbsp;<span class="ident" id="2594653">v</span><span class="op" id="2594654">.</span><span class="ident" id="2594655">flag</span><span class="op" id="2594659">&amp;</span><span class="ident" id="2594660">flagAddr</span>&nbsp;<span class="op" id="2594669">==</span>&nbsp;<span class="num" id="2594672">0</span>&nbsp;<span class="op" id="2594674">{</span><br>
<span class="lineno">1555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2594679">panic</span><span class="op" id="2594684">(</span><span class="string" id="2594685">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2594737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2594741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2594745">tt</span>&nbsp;<span class="op" id="2594748">:=</span>&nbsp;<span class="op" id="2594751">(</span><span class="op" id="2594752">*</span><span class="ident" id="2594753">arrayType</span><span class="op" id="2594762">)</span><span class="op" id="2594763">(</span><span class="ident" id="2594764">unsafe</span><span class="op" id="2594770">.</span><span class="ident" id="2594771">Pointer</span><span class="op" id="2594778">(</span><span class="ident" id="2594779">v</span><span class="op" id="2594780">.</span><span class="ident" id="2594781">typ</span><span class="op" id="2594784">)</span><span class="op" id="2594785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2594789">cap</span>&nbsp;<span class="op" id="2594793">=</span>&nbsp;<span class="builtintype" id="2594795">int</span><span class="op" id="2594798">(</span><span class="ident" id="2594799">tt</span><span class="op" id="2594801">.</span><span class="builtinfunc" id="2594802">len</span><span class="op" id="2594805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2594809">typ</span>&nbsp;<span class="op" id="2594813">=</span>&nbsp;<span class="op" id="2594815">(</span><span class="op" id="2594816">*</span><span class="ident" id="2594817">sliceType</span><span class="op" id="2594826">)</span><span class="op" id="2594827">(</span><span class="ident" id="2594828">unsafe</span><span class="op" id="2594834">.</span><span class="ident" id="2594835">Pointer</span><span class="op" id="2594842">(</span><span class="ident" id="2594843">tt</span><span class="op" id="2594845">.</span><span class="ident" id="2594846">slice</span><span class="op" id="2594851">)</span><span class="op" id="2594852">)</span><br>
<span class="lineno">1560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2594856">base</span>&nbsp;<span class="op" id="2594861">=</span>&nbsp;<span class="ident" id="2594863">v</span><span class="op" id="2594864">.</span><span class="ident" id="2594865">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2594871">case</span>&nbsp;<span class="ident" id="2594876">Slice</span><span class="op" id="2594881">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2594885">typ</span>&nbsp;<span class="op" id="2594889">=</span>&nbsp;<span class="op" id="2594891">(</span><span class="op" id="2594892">*</span><span class="ident" id="2594893">sliceType</span><span class="op" id="2594902">)</span><span class="op" id="2594903">(</span><span class="ident" id="2594904">unsafe</span><span class="op" id="2594910">.</span><span class="ident" id="2594911">Pointer</span><span class="op" id="2594918">(</span><span class="ident" id="2594919">v</span><span class="op" id="2594920">.</span><span class="ident" id="2594921">typ</span><span class="op" id="2594924">)</span><span class="op" id="2594925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2594929">s</span>&nbsp;<span class="op" id="2594931">:=</span>&nbsp;<span class="op" id="2594934">(</span><span class="op" id="2594935">*</span><span class="ident" id="2594936">sliceHeader</span><span class="op" id="2594947">)</span><span class="op" id="2594948">(</span><span class="ident" id="2594949">v</span><span class="op" id="2594950">.</span><span class="ident" id="2594951">ptr</span><span class="op" id="2594954">)</span><br>
<span class="lineno">1565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2594958">base</span>&nbsp;<span class="op" id="2594963">=</span>&nbsp;<span class="ident" id="2594965">s</span><span class="op" id="2594966">.</span><span class="ident" id="2594967">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2594974">cap</span>&nbsp;<span class="op" id="2594978">=</span>&nbsp;<span class="ident" id="2594980">s</span><span class="op" id="2594981">.</span><span class="ident" id="2594982">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2594987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2594991">if</span>&nbsp;<span class="ident" id="2594994">i</span>&nbsp;<span class="op" id="2594996">&lt;</span>&nbsp;<span class="num" id="2594998">0</span>&nbsp;<span class="op" id="2595000">||</span>&nbsp;<span class="ident" id="2595003">j</span>&nbsp;<span class="op" id="2595005">&lt;</span>&nbsp;<span class="ident" id="2595007">i</span>&nbsp;<span class="op" id="2595009">||</span>&nbsp;<span class="ident" id="2595012">k</span>&nbsp;<span class="op" id="2595014">&lt;</span>&nbsp;<span class="ident" id="2595016">j</span>&nbsp;<span class="op" id="2595018">||</span>&nbsp;<span class="ident" id="2595021">k</span>&nbsp;<span class="op" id="2595023">&gt;</span>&nbsp;<span class="builtinfunc" id="2595025">cap</span>&nbsp;<span class="op" id="2595029">{</span><br>
<span class="lineno">1570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2595033">panic</span><span class="op" id="2595038">(</span><span class="string" id="2595039">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2595088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2595091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2595095">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;the&nbsp;garbage&nbsp;collector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2595143">//&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno">1575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2595179">var</span>&nbsp;<span class="ident" id="2595183">x</span>&nbsp;<span class="op" id="2595185">[</span><span class="op" id="2595186">]</span><span class="ident" id="2595187">unsafe</span><span class="op" id="2595193">.</span><span class="ident" id="2595194">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2595204">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2595245">s</span>&nbsp;<span class="op" id="2595247">:=</span>&nbsp;<span class="op" id="2595250">(</span><span class="op" id="2595251">*</span><span class="ident" id="2595252">sliceHeader</span><span class="op" id="2595263">)</span><span class="op" id="2595264">(</span><span class="ident" id="2595265">unsafe</span><span class="op" id="2595271">.</span><span class="ident" id="2595272">Pointer</span><span class="op" id="2595279">(</span><span class="op" id="2595280">&amp;</span><span class="ident" id="2595281">x</span><span class="op" id="2595282">)</span><span class="op" id="2595283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2595286">s</span><span class="op" id="2595287">.</span><span class="ident" id="2595288">Len</span>&nbsp;<span class="op" id="2595292">=</span>&nbsp;<span class="ident" id="2595294">j</span>&nbsp;<span class="op" id="2595296">-</span>&nbsp;<span class="ident" id="2595298">i</span><br>
<span class="lineno">1580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2595301">s</span><span class="op" id="2595302">.</span><span class="ident" id="2595303">Cap</span>&nbsp;<span class="op" id="2595307">=</span>&nbsp;<span class="ident" id="2595309">k</span>&nbsp;<span class="op" id="2595311">-</span>&nbsp;<span class="ident" id="2595313">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2595316">if</span>&nbsp;<span class="ident" id="2595319">k</span><span class="op" id="2595320">-</span><span class="ident" id="2595321">i</span>&nbsp;<span class="op" id="2595323">&gt;</span>&nbsp;<span class="num" id="2595325">0</span>&nbsp;<span class="op" id="2595327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2595331">s</span><span class="op" id="2595332">.</span><span class="ident" id="2595333">Data</span>&nbsp;<span class="op" id="2595338">=</span>&nbsp;<span class="ident" id="2595340">unsafe</span><span class="op" id="2595346">.</span><span class="ident" id="2595347">Pointer</span><span class="op" id="2595354">(</span><span class="builtintype" id="2595355">uintptr</span><span class="op" id="2595362">(</span><span class="ident" id="2595363">base</span><span class="op" id="2595367">)</span>&nbsp;<span class="op" id="2595369">+</span>&nbsp;<span class="builtintype" id="2595371">uintptr</span><span class="op" id="2595378">(</span><span class="ident" id="2595379">i</span><span class="op" id="2595380">)</span><span class="op" id="2595381">*</span><span class="ident" id="2595382">typ</span><span class="op" id="2595385">.</span><span class="ident" id="2595386">elem</span><span class="op" id="2595390">.</span><span class="ident" id="2595391">Size</span><span class="op" id="2595395">(</span><span class="op" id="2595396">)</span><span class="op" id="2595397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2595400">}</span>&nbsp;<span class="keyword" id="2595402">else</span>&nbsp;<span class="op" id="2595407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2595411">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno">1585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2595478">s</span><span class="op" id="2595479">.</span><span class="ident" id="2595480">Data</span>&nbsp;<span class="op" id="2595485">=</span>&nbsp;<span class="ident" id="2595487">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2595493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2595497">fl</span>&nbsp;<span class="op" id="2595500">:=</span>&nbsp;<span class="ident" id="2595503">v</span><span class="op" id="2595504">.</span><span class="ident" id="2595505">flag</span><span class="op" id="2595509">&amp;</span><span class="ident" id="2595510">flagRO</span>&nbsp;<span class="op" id="2595517">|</span>&nbsp;<span class="ident" id="2595519">flagIndir</span>&nbsp;<span class="op" id="2595529">|</span>&nbsp;<span class="ident" id="2595531">flag</span><span class="op" id="2595535">(</span><span class="ident" id="2595536">Slice</span><span class="op" id="2595541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2595544">return</span>&nbsp;<span class="ident" id="2595551">Value</span><span class="op" id="2595556">{</span><span class="ident" id="2595557">typ</span><span class="op" id="2595560">.</span><span class="ident" id="2595561">common</span><span class="op" id="2595567">(</span><span class="op" id="2595568">)</span><span class="op" id="2595569">,</span>&nbsp;<span class="ident" id="2595571">unsafe</span><span class="op" id="2595577">.</span><span class="ident" id="2595578">Pointer</span><span class="op" id="2595585">(</span><span class="op" id="2595586">&amp;</span><span class="ident" id="2595587">x</span><span class="op" id="2595588">)</span><span class="op" id="2595589">,</span>&nbsp;<span class="ident" id="2595591">fl</span><span class="op" id="2595593">}</span><br>
<span class="lineno">1590</span><span class="op" id="2595595">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2595598">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;string&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2595662">//&nbsp;String&nbsp;is&nbsp;a&nbsp;special&nbsp;case&nbsp;because&nbsp;of&nbsp;Go&#39;s&nbsp;String&nbsp;method&nbsp;convention.</span><br>
<span class="lineno"></span><span class="comment" id="2595732">//&nbsp;Unlike&nbsp;the&nbsp;other&nbsp;getters,&nbsp;it&nbsp;does&nbsp;not&nbsp;panic&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String.</span><br>
<span class="lineno">1595</span><span class="comment" id="2595806">//&nbsp;Instead,&nbsp;it&nbsp;returns&nbsp;a&nbsp;string&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;&lt;T&nbsp;value&gt;&#34;&nbsp;where&nbsp;T&nbsp;is&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2595883">func</span>&nbsp;<span class="op" id="2595888">(</span><span class="ident" id="2595889">v</span>&nbsp;<span class="ident" id="2595891">Value</span><span class="op" id="2595896">)</span>&nbsp;<span class="ident" id="2595898">String</span><span class="op" id="2595904">(</span><span class="op" id="2595905">)</span>&nbsp;<span class="builtintype" id="2595907">string</span>&nbsp;<span class="op" id="2595914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2595917">switch</span>&nbsp;<span class="ident" id="2595924">k</span>&nbsp;<span class="op" id="2595926">:=</span>&nbsp;<span class="ident" id="2595929">v</span><span class="op" id="2595930">.</span><span class="ident" id="2595931">kind</span><span class="op" id="2595935">(</span><span class="op" id="2595936">)</span><span class="op" id="2595937">;</span>&nbsp;<span class="ident" id="2595939">k</span>&nbsp;<span class="op" id="2595941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2595944">case</span>&nbsp;<span class="ident" id="2595949">Invalid</span><span class="op" id="2595956">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2595960">return</span>&nbsp;<span class="string" id="2595967">&#34;&lt;invalid&nbsp;Value&gt;&#34;</span><br>
<span class="lineno">1600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2595986">case</span>&nbsp;<span class="ident" id="2595991">String</span><span class="op" id="2595997">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2596001">return</span>&nbsp;<span class="op" id="2596008">*</span><span class="op" id="2596009">(</span><span class="op" id="2596010">*</span><span class="builtintype" id="2596011">string</span><span class="op" id="2596017">)</span><span class="op" id="2596018">(</span><span class="ident" id="2596019">v</span><span class="op" id="2596020">.</span><span class="ident" id="2596021">ptr</span><span class="op" id="2596024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2596027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2596030">//&nbsp;If&nbsp;you&nbsp;call&nbsp;String&nbsp;on&nbsp;a&nbsp;reflect.Value&nbsp;of&nbsp;other&nbsp;type,&nbsp;it&#39;s&nbsp;better&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2596102">//&nbsp;print&nbsp;something&nbsp;than&nbsp;to&nbsp;panic.&nbsp;Useful&nbsp;in&nbsp;debugging.</span><br>
<span class="lineno">1605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2596158">return</span>&nbsp;<span class="string" id="2596165">&#34;&lt;&#34;</span>&nbsp;<span class="op" id="2596169">+</span>&nbsp;<span class="ident" id="2596171">v</span><span class="op" id="2596172">.</span><span class="ident" id="2596173">Type</span><span class="op" id="2596177">(</span><span class="op" id="2596178">)</span><span class="op" id="2596179">.</span><span class="ident" id="2596180">String</span><span class="op" id="2596186">(</span><span class="op" id="2596187">)</span>&nbsp;<span class="op" id="2596189">+</span>&nbsp;<span class="string" id="2596191">&#34;&nbsp;Value&gt;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2596201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2596204">//&nbsp;TryRecv&nbsp;attempts&nbsp;to&nbsp;receive&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="2596282">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno">1610</span><span class="comment" id="2596320">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;delivers&nbsp;a&nbsp;value,&nbsp;x&nbsp;is&nbsp;the&nbsp;transferred&nbsp;value&nbsp;and&nbsp;ok&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span><span class="comment" id="2596399">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;cannot&nbsp;finish&nbsp;without&nbsp;blocking,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2596486">//&nbsp;If&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2596583">func</span>&nbsp;<span class="op" id="2596588">(</span><span class="ident" id="2596589">v</span>&nbsp;<span class="ident" id="2596591">Value</span><span class="op" id="2596596">)</span>&nbsp;<span class="ident" id="2596598">TryRecv</span><span class="op" id="2596605">(</span><span class="op" id="2596606">)</span>&nbsp;<span class="op" id="2596608">(</span><span class="ident" id="2596609">x</span>&nbsp;<span class="ident" id="2596611">Value</span><span class="op" id="2596616">,</span>&nbsp;<span class="ident" id="2596618">ok</span>&nbsp;<span class="builtintype" id="2596621">bool</span><span class="op" id="2596625">)</span>&nbsp;<span class="op" id="2596627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2596630">v</span><span class="op" id="2596631">.</span><span class="ident" id="2596632">mustBe</span><span class="op" id="2596638">(</span><span class="ident" id="2596639">Chan</span><span class="op" id="2596643">)</span><br>
<span class="lineno">1615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2596646">v</span><span class="op" id="2596647">.</span><span class="ident" id="2596648">mustBeExported</span><span class="op" id="2596662">(</span><span class="op" id="2596663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2596666">return</span>&nbsp;<span class="ident" id="2596673">v</span><span class="op" id="2596674">.</span><span class="ident" id="2596675">recv</span><span class="op" id="2596679">(</span><span class="builtintype" id="2596680">true</span><span class="op" id="2596684">)</span><br>
<span class="lineno"></span><span class="op" id="2596686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2596689">//&nbsp;TrySend&nbsp;attempts&nbsp;to&nbsp;send&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno">1620</span><span class="comment" id="2596756">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2596794">//&nbsp;It&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;was&nbsp;sent,&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2596853">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2596926">func</span>&nbsp;<span class="op" id="2596931">(</span><span class="ident" id="2596932">v</span>&nbsp;<span class="ident" id="2596934">Value</span><span class="op" id="2596939">)</span>&nbsp;<span class="ident" id="2596941">TrySend</span><span class="op" id="2596948">(</span><span class="ident" id="2596949">x</span>&nbsp;<span class="ident" id="2596951">Value</span><span class="op" id="2596956">)</span>&nbsp;<span class="builtintype" id="2596958">bool</span>&nbsp;<span class="op" id="2596963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2596966">v</span><span class="op" id="2596967">.</span><span class="ident" id="2596968">mustBe</span><span class="op" id="2596974">(</span><span class="ident" id="2596975">Chan</span><span class="op" id="2596979">)</span><br>
<span class="lineno">1625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2596982">v</span><span class="op" id="2596983">.</span><span class="ident" id="2596984">mustBeExported</span><span class="op" id="2596998">(</span><span class="op" id="2596999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2597002">return</span>&nbsp;<span class="ident" id="2597009">v</span><span class="op" id="2597010">.</span><span class="ident" id="2597011">send</span><span class="op" id="2597015">(</span><span class="ident" id="2597016">x</span><span class="op" id="2597017">,</span>&nbsp;<span class="builtintype" id="2597019">true</span><span class="op" id="2597023">)</span><br>
<span class="lineno"></span><span class="op" id="2597025">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2597028">//&nbsp;Type&nbsp;returns&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno">1630</span><span class="keyword" id="2597054">func</span>&nbsp;<span class="op" id="2597059">(</span><span class="ident" id="2597060">v</span>&nbsp;<span class="ident" id="2597062">Value</span><span class="op" id="2597067">)</span>&nbsp;<span class="ident" id="2597069">Type</span><span class="op" id="2597073">(</span><span class="op" id="2597074">)</span>&nbsp;<span class="ident" id="2597076">Type</span>&nbsp;<span class="op" id="2597081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2597084">f</span>&nbsp;<span class="op" id="2597086">:=</span>&nbsp;<span class="ident" id="2597089">v</span><span class="op" id="2597090">.</span><span class="ident" id="2597091">flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2597097">if</span>&nbsp;<span class="ident" id="2597100">f</span>&nbsp;<span class="op" id="2597102">==</span>&nbsp;<span class="num" id="2597105">0</span>&nbsp;<span class="op" id="2597107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2597111">panic</span><span class="op" id="2597116">(</span><span class="op" id="2597117">&amp;</span><span class="ident" id="2597118">ValueError</span><span class="op" id="2597128">{</span><span class="string" id="2597129">&#34;reflect.Value.Type&#34;</span><span class="op" id="2597149">,</span>&nbsp;<span class="ident" id="2597151">Invalid</span><span class="op" id="2597158">}</span><span class="op" id="2597159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2597162">}</span><br>
<span class="lineno">1635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2597165">if</span>&nbsp;<span class="ident" id="2597168">f</span><span class="op" id="2597169">&amp;</span><span class="ident" id="2597170">flagMethod</span>&nbsp;<span class="op" id="2597181">==</span>&nbsp;<span class="num" id="2597184">0</span>&nbsp;<span class="op" id="2597186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2597190">//&nbsp;Easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2597205">return</span>&nbsp;<span class="ident" id="2597212">v</span><span class="op" id="2597213">.</span><span class="ident" id="2597214">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2597219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2597223">//&nbsp;Method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2597241">//&nbsp;v.typ&nbsp;describes&nbsp;the&nbsp;receiver,&nbsp;not&nbsp;the&nbsp;method&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2597296">i</span>&nbsp;<span class="op" id="2597298">:=</span>&nbsp;<span class="builtintype" id="2597301">int</span><span class="op" id="2597304">(</span><span class="ident" id="2597305">v</span><span class="op" id="2597306">.</span><span class="ident" id="2597307">flag</span><span class="op" id="2597311">)</span>&nbsp;<span class="op" id="2597313">&gt;&gt;</span>&nbsp;<span class="ident" id="2597316">flagMethodShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2597333">if</span>&nbsp;<span class="ident" id="2597336">v</span><span class="op" id="2597337">.</span><span class="ident" id="2597338">typ</span><span class="op" id="2597341">.</span><span class="ident" id="2597342">Kind</span><span class="op" id="2597346">(</span><span class="op" id="2597347">)</span>&nbsp;<span class="op" id="2597349">==</span>&nbsp;<span class="ident" id="2597352">Interface</span>&nbsp;<span class="op" id="2597362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2597366">//&nbsp;Method&nbsp;on&nbsp;interface.</span><br>
<span class="lineno">1645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2597392">tt</span>&nbsp;<span class="op" id="2597395">:=</span>&nbsp;<span class="op" id="2597398">(</span><span class="op" id="2597399">*</span><span class="ident" id="2597400">interfaceType</span><span class="op" id="2597413">)</span><span class="op" id="2597414">(</span><span class="ident" id="2597415">unsafe</span><span class="op" id="2597421">.</span><span class="ident" id="2597422">Pointer</span><span class="op" id="2597429">(</span><span class="ident" id="2597430">v</span><span class="op" id="2597431">.</span><span class="ident" id="2597432">typ</span><span class="op" id="2597435">)</span><span class="op" id="2597436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2597440">if</span>&nbsp;<span class="builtintype" id="2597443">uint</span><span class="op" id="2597447">(</span><span class="ident" id="2597448">i</span><span class="op" id="2597449">)</span>&nbsp;<span class="op" id="2597451">&gt;=</span>&nbsp;<span class="builtintype" id="2597454">uint</span><span class="op" id="2597458">(</span><span class="builtinfunc" id="2597459">len</span><span class="op" id="2597462">(</span><span class="ident" id="2597463">tt</span><span class="op" id="2597465">.</span><span class="ident" id="2597466">methods</span><span class="op" id="2597473">)</span><span class="op" id="2597474">)</span>&nbsp;<span class="op" id="2597476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2597481">panic</span><span class="op" id="2597486">(</span><span class="string" id="2597487">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2597534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2597538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2597542">m</span>&nbsp;<span class="op" id="2597544">:=</span>&nbsp;<span class="op" id="2597547">&amp;</span><span class="ident" id="2597548">tt</span><span class="op" id="2597550">.</span><span class="ident" id="2597551">methods</span><span class="op" id="2597558">[</span><span class="ident" id="2597559">i</span><span class="op" id="2597560">]</span><br>
<span class="lineno">1650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2597564">return</span>&nbsp;<span class="ident" id="2597571">m</span><span class="op" id="2597572">.</span><span class="ident" id="2597573">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2597578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2597581">//&nbsp;Method&nbsp;on&nbsp;concrete&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2597610">ut</span>&nbsp;<span class="op" id="2597613">:=</span>&nbsp;<span class="ident" id="2597616">v</span><span class="op" id="2597617">.</span><span class="ident" id="2597618">typ</span><span class="op" id="2597621">.</span><span class="ident" id="2597622">uncommon</span><span class="op" id="2597630">(</span><span class="op" id="2597631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2597634">if</span>&nbsp;<span class="ident" id="2597637">ut</span>&nbsp;<span class="op" id="2597640">==</span>&nbsp;<span class="ident" id="2597643">nil</span>&nbsp;<span class="op" id="2597647">||</span>&nbsp;<span class="builtintype" id="2597650">uint</span><span class="op" id="2597654">(</span><span class="ident" id="2597655">i</span><span class="op" id="2597656">)</span>&nbsp;<span class="op" id="2597658">&gt;=</span>&nbsp;<span class="builtintype" id="2597661">uint</span><span class="op" id="2597665">(</span><span class="builtinfunc" id="2597666">len</span><span class="op" id="2597669">(</span><span class="ident" id="2597670">ut</span><span class="op" id="2597672">.</span><span class="ident" id="2597673">methods</span><span class="op" id="2597680">)</span><span class="op" id="2597681">)</span>&nbsp;<span class="op" id="2597683">{</span><br>
<span class="lineno">1655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2597687">panic</span><span class="op" id="2597692">(</span><span class="string" id="2597693">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2597740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2597743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2597746">m</span>&nbsp;<span class="op" id="2597748">:=</span>&nbsp;<span class="op" id="2597751">&amp;</span><span class="ident" id="2597752">ut</span><span class="op" id="2597754">.</span><span class="ident" id="2597755">methods</span><span class="op" id="2597762">[</span><span class="ident" id="2597763">i</span><span class="op" id="2597764">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2597767">return</span>&nbsp;<span class="ident" id="2597774">m</span><span class="op" id="2597775">.</span><span class="ident" id="2597776">mtyp</span><br>
<span class="lineno"></span><span class="op" id="2597781">}</span><br>
<span class="lineno">1660</span><br>
<span class="lineno"></span><span class="comment" id="2597784">//&nbsp;Uint&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;uint64.</span><br>
<span class="lineno"></span><span class="comment" id="2597835">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno"></span><span class="keyword" id="2597916">func</span>&nbsp;<span class="op" id="2597921">(</span><span class="ident" id="2597922">v</span>&nbsp;<span class="ident" id="2597924">Value</span><span class="op" id="2597929">)</span>&nbsp;<span class="ident" id="2597931">Uint</span><span class="op" id="2597935">(</span><span class="op" id="2597936">)</span>&nbsp;<span class="ident" id="2597938">uint64</span>&nbsp;<span class="op" id="2597945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2597948">k</span>&nbsp;<span class="op" id="2597950">:=</span>&nbsp;<span class="ident" id="2597953">v</span><span class="op" id="2597954">.</span><span class="ident" id="2597955">kind</span><span class="op" id="2597959">(</span><span class="op" id="2597960">)</span><br>
<span class="lineno">1665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2597963">p</span>&nbsp;<span class="op" id="2597965">:=</span>&nbsp;<span class="ident" id="2597968">v</span><span class="op" id="2597969">.</span><span class="ident" id="2597970">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2597975">switch</span>&nbsp;<span class="ident" id="2597982">k</span>&nbsp;<span class="op" id="2597984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2597987">case</span>&nbsp;<span class="ident" id="2597992">Uint</span><span class="op" id="2597996">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2598000">return</span>&nbsp;<span class="ident" id="2598007">uint64</span><span class="op" id="2598013">(</span><span class="op" id="2598014">*</span><span class="op" id="2598015">(</span><span class="op" id="2598016">*</span><span class="builtintype" id="2598017">uint</span><span class="op" id="2598021">)</span><span class="op" id="2598022">(</span><span class="ident" id="2598023">p</span><span class="op" id="2598024">)</span><span class="op" id="2598025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2598028">case</span>&nbsp;<span class="ident" id="2598033">Uint8</span><span class="op" id="2598038">:</span><br>
<span class="lineno">1670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2598042">return</span>&nbsp;<span class="ident" id="2598049">uint64</span><span class="op" id="2598055">(</span><span class="op" id="2598056">*</span><span class="op" id="2598057">(</span><span class="op" id="2598058">*</span><span class="builtintype" id="2598059">uint8</span><span class="op" id="2598064">)</span><span class="op" id="2598065">(</span><span class="ident" id="2598066">p</span><span class="op" id="2598067">)</span><span class="op" id="2598068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2598071">case</span>&nbsp;<span class="ident" id="2598076">Uint16</span><span class="op" id="2598082">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2598086">return</span>&nbsp;<span class="ident" id="2598093">uint64</span><span class="op" id="2598099">(</span><span class="op" id="2598100">*</span><span class="op" id="2598101">(</span><span class="op" id="2598102">*</span><span class="builtintype" id="2598103">uint16</span><span class="op" id="2598109">)</span><span class="op" id="2598110">(</span><span class="ident" id="2598111">p</span><span class="op" id="2598112">)</span><span class="op" id="2598113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2598116">case</span>&nbsp;<span class="ident" id="2598121">Uint32</span><span class="op" id="2598127">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2598131">return</span>&nbsp;<span class="ident" id="2598138">uint64</span><span class="op" id="2598144">(</span><span class="op" id="2598145">*</span><span class="op" id="2598146">(</span><span class="op" id="2598147">*</span><span class="builtintype" id="2598148">uint32</span><span class="op" id="2598154">)</span><span class="op" id="2598155">(</span><span class="ident" id="2598156">p</span><span class="op" id="2598157">)</span><span class="op" id="2598158">)</span><br>
<span class="lineno">1675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2598161">case</span>&nbsp;<span class="ident" id="2598166">Uint64</span><span class="op" id="2598172">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2598176">return</span>&nbsp;<span class="ident" id="2598183">uint64</span><span class="op" id="2598189">(</span><span class="op" id="2598190">*</span><span class="op" id="2598191">(</span><span class="op" id="2598192">*</span><span class="ident" id="2598193">uint64</span><span class="op" id="2598199">)</span><span class="op" id="2598200">(</span><span class="ident" id="2598201">p</span><span class="op" id="2598202">)</span><span class="op" id="2598203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2598206">case</span>&nbsp;<span class="ident" id="2598211">Uintptr</span><span class="op" id="2598218">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2598222">return</span>&nbsp;<span class="ident" id="2598229">uint64</span><span class="op" id="2598235">(</span><span class="op" id="2598236">*</span><span class="op" id="2598237">(</span><span class="op" id="2598238">*</span><span class="builtintype" id="2598239">uintptr</span><span class="op" id="2598246">)</span><span class="op" id="2598247">(</span><span class="ident" id="2598248">p</span><span class="op" id="2598249">)</span><span class="op" id="2598250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2598253">}</span><br>
<span class="lineno">1680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2598256">panic</span><span class="op" id="2598261">(</span><span class="op" id="2598262">&amp;</span><span class="ident" id="2598263">ValueError</span><span class="op" id="2598273">{</span><span class="string" id="2598274">&#34;reflect.Value.Uint&#34;</span><span class="op" id="2598294">,</span>&nbsp;<span class="ident" id="2598296">v</span><span class="op" id="2598297">.</span><span class="ident" id="2598298">kind</span><span class="op" id="2598302">(</span><span class="op" id="2598303">)</span><span class="op" id="2598304">}</span><span class="op" id="2598305">)</span><br>
<span class="lineno"></span><span class="op" id="2598307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2598310">//&nbsp;UnsafeAddr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;to&nbsp;v&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="2598355">//&nbsp;It&nbsp;is&nbsp;for&nbsp;advanced&nbsp;clients&nbsp;that&nbsp;also&nbsp;import&nbsp;the&nbsp;&#34;unsafe&#34;&nbsp;package.</span><br>
<span class="lineno">1685</span><span class="comment" id="2598424">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2598462">func</span>&nbsp;<span class="op" id="2598467">(</span><span class="ident" id="2598468">v</span>&nbsp;<span class="ident" id="2598470">Value</span><span class="op" id="2598475">)</span>&nbsp;<span class="ident" id="2598477">UnsafeAddr</span><span class="op" id="2598487">(</span><span class="op" id="2598488">)</span>&nbsp;<span class="builtintype" id="2598490">uintptr</span>&nbsp;<span class="op" id="2598498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2598501">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2598521">if</span>&nbsp;<span class="ident" id="2598524">v</span><span class="op" id="2598525">.</span><span class="ident" id="2598526">typ</span>&nbsp;<span class="op" id="2598530">==</span>&nbsp;<span class="ident" id="2598533">nil</span>&nbsp;<span class="op" id="2598537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2598541">panic</span><span class="op" id="2598546">(</span><span class="op" id="2598547">&amp;</span><span class="ident" id="2598548">ValueError</span><span class="op" id="2598558">{</span><span class="string" id="2598559">&#34;reflect.Value.UnsafeAddr&#34;</span><span class="op" id="2598585">,</span>&nbsp;<span class="ident" id="2598587">Invalid</span><span class="op" id="2598594">}</span><span class="op" id="2598595">)</span><br>
<span class="lineno">1690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2598598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2598601">if</span>&nbsp;<span class="ident" id="2598604">v</span><span class="op" id="2598605">.</span><span class="ident" id="2598606">flag</span><span class="op" id="2598610">&amp;</span><span class="ident" id="2598611">flagAddr</span>&nbsp;<span class="op" id="2598620">==</span>&nbsp;<span class="num" id="2598623">0</span>&nbsp;<span class="op" id="2598625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2598629">panic</span><span class="op" id="2598634">(</span><span class="string" id="2598635">&#34;reflect.Value.UnsafeAddr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2598684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2598687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2598690">return</span>&nbsp;<span class="builtintype" id="2598697">uintptr</span><span class="op" id="2598704">(</span><span class="ident" id="2598705">v</span><span class="op" id="2598706">.</span><span class="ident" id="2598707">ptr</span><span class="op" id="2598710">)</span><br>
<span class="lineno">1695</span><span class="op" id="2598712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2598715">//&nbsp;StringHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2598774">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2598841">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno">1700</span><span class="comment" id="2598871">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2598939">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2599009">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="2599072">type</span>&nbsp;<span class="ident" id="2599077">StringHeader</span>&nbsp;<span class="keyword" id="2599090">struct</span>&nbsp;<span class="op" id="2599097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2599100">Data</span>&nbsp;<span class="builtintype" id="2599105">uintptr</span><br>
<span class="lineno">1705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2599114">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2599119">int</span><br>
<span class="lineno"></span><span class="op" id="2599123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2599126">//&nbsp;stringHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;StringHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2599202">type</span>&nbsp;<span class="ident" id="2599207">stringHeader</span>&nbsp;<span class="keyword" id="2599220">struct</span>&nbsp;<span class="op" id="2599227">{</span><br>
<span class="lineno">1710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2599230">Data</span>&nbsp;<span class="ident" id="2599235">unsafe</span><span class="op" id="2599241">.</span><span class="ident" id="2599242">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2599251">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2599256">int</span><br>
<span class="lineno"></span><span class="op" id="2599260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2599263">//&nbsp;SliceHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;slice.</span><br>
<span class="lineno">1715</span><span class="comment" id="2599320">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2599387">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno"></span><span class="comment" id="2599417">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2599485">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2599555">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno">1720</span><span class="keyword" id="2599618">type</span>&nbsp;<span class="ident" id="2599623">SliceHeader</span>&nbsp;<span class="keyword" id="2599635">struct</span>&nbsp;<span class="op" id="2599642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2599645">Data</span>&nbsp;<span class="builtintype" id="2599650">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2599659">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2599664">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2599669">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2599674">int</span><br>
<span class="lineno"></span><span class="op" id="2599678">}</span><br>
<span class="lineno">1725</span><br>
<span class="lineno"></span><span class="comment" id="2599681">//&nbsp;sliceHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;SliceHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2599755">type</span>&nbsp;<span class="ident" id="2599760">sliceHeader</span>&nbsp;<span class="keyword" id="2599772">struct</span>&nbsp;<span class="op" id="2599779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2599782">Data</span>&nbsp;<span class="ident" id="2599787">unsafe</span><span class="op" id="2599793">.</span><span class="ident" id="2599794">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2599803">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2599808">int</span><br>
<span class="lineno">1730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2599813">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2599818">int</span><br>
<span class="lineno"></span><span class="op" id="2599822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2599825">func</span>&nbsp;<span class="ident" id="2599830">typesMustMatch</span><span class="op" id="2599844">(</span><span class="ident" id="2599845">what</span>&nbsp;<span class="builtintype" id="2599850">string</span><span class="op" id="2599856">,</span>&nbsp;<span class="ident" id="2599858">t1</span><span class="op" id="2599860">,</span>&nbsp;<span class="ident" id="2599862">t2</span>&nbsp;<span class="ident" id="2599865">Type</span><span class="op" id="2599869">)</span>&nbsp;<span class="op" id="2599871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2599874">if</span>&nbsp;<span class="ident" id="2599877">t1</span>&nbsp;<span class="op" id="2599880">!=</span>&nbsp;<span class="ident" id="2599883">t2</span>&nbsp;<span class="op" id="2599886">{</span><br>
<span class="lineno">1735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2599890">panic</span><span class="op" id="2599895">(</span><span class="ident" id="2599896">what</span>&nbsp;<span class="op" id="2599901">+</span>&nbsp;<span class="string" id="2599903">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2599908">+</span>&nbsp;<span class="ident" id="2599910">t1</span><span class="op" id="2599912">.</span><span class="ident" id="2599913">String</span><span class="op" id="2599919">(</span><span class="op" id="2599920">)</span>&nbsp;<span class="op" id="2599922">+</span>&nbsp;<span class="string" id="2599924">&#34;&nbsp;!=&nbsp;&#34;</span>&nbsp;<span class="op" id="2599931">+</span>&nbsp;<span class="ident" id="2599933">t2</span><span class="op" id="2599935">.</span><span class="ident" id="2599936">String</span><span class="op" id="2599942">(</span><span class="op" id="2599943">)</span><span class="op" id="2599944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2599947">}</span><br>
<span class="lineno"></span><span class="op" id="2599949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2599952">//&nbsp;grow&nbsp;grows&nbsp;the&nbsp;slice&nbsp;s&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;hold&nbsp;extra&nbsp;more&nbsp;values,&nbsp;allocating</span><br>
<span class="lineno">1740</span><span class="comment" id="2600028">//&nbsp;more&nbsp;capacity&nbsp;if&nbsp;needed.&nbsp;It&nbsp;also&nbsp;returns&nbsp;the&nbsp;old&nbsp;and&nbsp;new&nbsp;slice&nbsp;lengths.</span><br>
<span class="lineno"></span><span class="keyword" id="2600103">func</span>&nbsp;<span class="ident" id="2600108">grow</span><span class="op" id="2600112">(</span><span class="ident" id="2600113">s</span>&nbsp;<span class="ident" id="2600115">Value</span><span class="op" id="2600120">,</span>&nbsp;<span class="ident" id="2600122">extra</span>&nbsp;<span class="builtintype" id="2600128">int</span><span class="op" id="2600131">)</span>&nbsp;<span class="op" id="2600133">(</span><span class="ident" id="2600134">Value</span><span class="op" id="2600139">,</span>&nbsp;<span class="builtintype" id="2600141">int</span><span class="op" id="2600144">,</span>&nbsp;<span class="builtintype" id="2600146">int</span><span class="op" id="2600149">)</span>&nbsp;<span class="op" id="2600151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600154">i0</span>&nbsp;<span class="op" id="2600157">:=</span>&nbsp;<span class="ident" id="2600160">s</span><span class="op" id="2600161">.</span><span class="ident" id="2600162">Len</span><span class="op" id="2600165">(</span><span class="op" id="2600166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600169">i1</span>&nbsp;<span class="op" id="2600172">:=</span>&nbsp;<span class="ident" id="2600175">i0</span>&nbsp;<span class="op" id="2600178">+</span>&nbsp;<span class="ident" id="2600180">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600187">if</span>&nbsp;<span class="ident" id="2600190">i1</span>&nbsp;<span class="op" id="2600193">&lt;</span>&nbsp;<span class="ident" id="2600195">i0</span>&nbsp;<span class="op" id="2600198">{</span><br>
<span class="lineno">1745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2600202">panic</span><span class="op" id="2600207">(</span><span class="string" id="2600208">&#34;reflect.Append:&nbsp;slice&nbsp;overflow&#34;</span><span class="op" id="2600240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2600243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600246">m</span>&nbsp;<span class="op" id="2600248">:=</span>&nbsp;<span class="ident" id="2600251">s</span><span class="op" id="2600252">.</span><span class="ident" id="2600253">Cap</span><span class="op" id="2600256">(</span><span class="op" id="2600257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600260">if</span>&nbsp;<span class="ident" id="2600263">i1</span>&nbsp;<span class="op" id="2600266">&lt;=</span>&nbsp;<span class="ident" id="2600269">m</span>&nbsp;<span class="op" id="2600271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600275">return</span>&nbsp;<span class="ident" id="2600282">s</span><span class="op" id="2600283">.</span><span class="ident" id="2600284">Slice</span><span class="op" id="2600289">(</span><span class="num" id="2600290">0</span><span class="op" id="2600291">,</span>&nbsp;<span class="ident" id="2600293">i1</span><span class="op" id="2600295">)</span><span class="op" id="2600296">,</span>&nbsp;<span class="ident" id="2600298">i0</span><span class="op" id="2600300">,</span>&nbsp;<span class="ident" id="2600302">i1</span><br>
<span class="lineno">1750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2600306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600309">if</span>&nbsp;<span class="ident" id="2600312">m</span>&nbsp;<span class="op" id="2600314">==</span>&nbsp;<span class="num" id="2600317">0</span>&nbsp;<span class="op" id="2600319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600323">m</span>&nbsp;<span class="op" id="2600325">=</span>&nbsp;<span class="ident" id="2600327">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2600334">}</span>&nbsp;<span class="keyword" id="2600336">else</span>&nbsp;<span class="op" id="2600341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600345">for</span>&nbsp;<span class="ident" id="2600349">m</span>&nbsp;<span class="op" id="2600351">&lt;</span>&nbsp;<span class="ident" id="2600353">i1</span>&nbsp;<span class="op" id="2600356">{</span><br>
<span class="lineno">1755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600361">if</span>&nbsp;<span class="ident" id="2600364">i0</span>&nbsp;<span class="op" id="2600367">&lt;</span>&nbsp;<span class="num" id="2600369">1024</span>&nbsp;<span class="op" id="2600374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600380">m</span>&nbsp;<span class="op" id="2600382">+=</span>&nbsp;<span class="ident" id="2600385">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2600390">}</span>&nbsp;<span class="keyword" id="2600392">else</span>&nbsp;<span class="op" id="2600397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600403">m</span>&nbsp;<span class="op" id="2600405">+=</span>&nbsp;<span class="ident" id="2600408">m</span>&nbsp;<span class="op" id="2600410">/</span>&nbsp;<span class="num" id="2600412">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2600417">}</span><br>
<span class="lineno">1760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2600421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2600424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600427">t</span>&nbsp;<span class="op" id="2600429">:=</span>&nbsp;<span class="ident" id="2600432">MakeSlice</span><span class="op" id="2600441">(</span><span class="ident" id="2600442">s</span><span class="op" id="2600443">.</span><span class="ident" id="2600444">Type</span><span class="op" id="2600448">(</span><span class="op" id="2600449">)</span><span class="op" id="2600450">,</span>&nbsp;<span class="ident" id="2600452">i1</span><span class="op" id="2600454">,</span>&nbsp;<span class="ident" id="2600456">m</span><span class="op" id="2600457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600460">Copy</span><span class="op" id="2600464">(</span><span class="ident" id="2600465">t</span><span class="op" id="2600466">,</span>&nbsp;<span class="ident" id="2600468">s</span><span class="op" id="2600469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600472">return</span>&nbsp;<span class="ident" id="2600479">t</span><span class="op" id="2600480">,</span>&nbsp;<span class="ident" id="2600482">i0</span><span class="op" id="2600484">,</span>&nbsp;<span class="ident" id="2600486">i1</span><br>
<span class="lineno">1765</span><span class="op" id="2600489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2600492">//&nbsp;Append&nbsp;appends&nbsp;the&nbsp;values&nbsp;x&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2600569">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;slice&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2600645">func</span>&nbsp;<span class="ident" id="2600650">Append</span><span class="op" id="2600656">(</span><span class="ident" id="2600657">s</span>&nbsp;<span class="ident" id="2600659">Value</span><span class="op" id="2600664">,</span>&nbsp;<span class="ident" id="2600666">x</span>&nbsp;<span class="op" id="2600668">...</span><span class="ident" id="2600671">Value</span><span class="op" id="2600676">)</span>&nbsp;<span class="ident" id="2600678">Value</span>&nbsp;<span class="op" id="2600684">{</span><br>
<span class="lineno">1770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600687">s</span><span class="op" id="2600688">.</span><span class="ident" id="2600689">mustBe</span><span class="op" id="2600695">(</span><span class="ident" id="2600696">Slice</span><span class="op" id="2600701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600704">s</span><span class="op" id="2600705">,</span>&nbsp;<span class="ident" id="2600707">i0</span><span class="op" id="2600709">,</span>&nbsp;<span class="ident" id="2600711">i1</span>&nbsp;<span class="op" id="2600714">:=</span>&nbsp;<span class="ident" id="2600717">grow</span><span class="op" id="2600721">(</span><span class="ident" id="2600722">s</span><span class="op" id="2600723">,</span>&nbsp;<span class="builtinfunc" id="2600725">len</span><span class="op" id="2600728">(</span><span class="ident" id="2600729">x</span><span class="op" id="2600730">)</span><span class="op" id="2600731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600734">for</span>&nbsp;<span class="ident" id="2600738">i</span><span class="op" id="2600739">,</span>&nbsp;<span class="ident" id="2600741">j</span>&nbsp;<span class="op" id="2600743">:=</span>&nbsp;<span class="ident" id="2600746">i0</span><span class="op" id="2600748">,</span>&nbsp;<span class="num" id="2600750">0</span><span class="op" id="2600751">;</span>&nbsp;<span class="ident" id="2600753">i</span>&nbsp;<span class="op" id="2600755">&lt;</span>&nbsp;<span class="ident" id="2600757">i1</span><span class="op" id="2600759">;</span>&nbsp;<span class="ident" id="2600761">i</span><span class="op" id="2600762">,</span>&nbsp;<span class="ident" id="2600764">j</span>&nbsp;<span class="op" id="2600766">=</span>&nbsp;<span class="ident" id="2600768">i</span><span class="op" id="2600769">+</span><span class="num" id="2600770">1</span><span class="op" id="2600771">,</span>&nbsp;<span class="ident" id="2600773">j</span><span class="op" id="2600774">+</span><span class="num" id="2600775">1</span>&nbsp;<span class="op" id="2600777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600781">s</span><span class="op" id="2600782">.</span><span class="ident" id="2600783">Index</span><span class="op" id="2600788">(</span><span class="ident" id="2600789">i</span><span class="op" id="2600790">)</span><span class="op" id="2600791">.</span><span class="ident" id="2600792">Set</span><span class="op" id="2600795">(</span><span class="ident" id="2600796">x</span><span class="op" id="2600797">[</span><span class="ident" id="2600798">j</span><span class="op" id="2600799">]</span><span class="op" id="2600800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2600803">}</span><br>
<span class="lineno">1775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2600806">return</span>&nbsp;<span class="ident" id="2600813">s</span><br>
<span class="lineno"></span><span class="op" id="2600815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2600818">//&nbsp;AppendSlice&nbsp;appends&nbsp;a&nbsp;slice&nbsp;t&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2600897">//&nbsp;The&nbsp;slices&nbsp;s&nbsp;and&nbsp;t&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno">1780</span><span class="keyword" id="2600952">func</span>&nbsp;<span class="ident" id="2600957">AppendSlice</span><span class="op" id="2600968">(</span><span class="ident" id="2600969">s</span><span class="op" id="2600970">,</span>&nbsp;<span class="ident" id="2600972">t</span>&nbsp;<span class="ident" id="2600974">Value</span><span class="op" id="2600979">)</span>&nbsp;<span class="ident" id="2600981">Value</span>&nbsp;<span class="op" id="2600987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2600990">s</span><span class="op" id="2600991">.</span><span class="ident" id="2600992">mustBe</span><span class="op" id="2600998">(</span><span class="ident" id="2600999">Slice</span><span class="op" id="2601004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601007">t</span><span class="op" id="2601008">.</span><span class="ident" id="2601009">mustBe</span><span class="op" id="2601015">(</span><span class="ident" id="2601016">Slice</span><span class="op" id="2601021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601024">typesMustMatch</span><span class="op" id="2601038">(</span><span class="string" id="2601039">&#34;reflect.AppendSlice&#34;</span><span class="op" id="2601060">,</span>&nbsp;<span class="ident" id="2601062">s</span><span class="op" id="2601063">.</span><span class="ident" id="2601064">Type</span><span class="op" id="2601068">(</span><span class="op" id="2601069">)</span><span class="op" id="2601070">.</span><span class="ident" id="2601071">Elem</span><span class="op" id="2601075">(</span><span class="op" id="2601076">)</span><span class="op" id="2601077">,</span>&nbsp;<span class="ident" id="2601079">t</span><span class="op" id="2601080">.</span><span class="ident" id="2601081">Type</span><span class="op" id="2601085">(</span><span class="op" id="2601086">)</span><span class="op" id="2601087">.</span><span class="ident" id="2601088">Elem</span><span class="op" id="2601092">(</span><span class="op" id="2601093">)</span><span class="op" id="2601094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601097">s</span><span class="op" id="2601098">,</span>&nbsp;<span class="ident" id="2601100">i0</span><span class="op" id="2601102">,</span>&nbsp;<span class="ident" id="2601104">i1</span>&nbsp;<span class="op" id="2601107">:=</span>&nbsp;<span class="ident" id="2601110">grow</span><span class="op" id="2601114">(</span><span class="ident" id="2601115">s</span><span class="op" id="2601116">,</span>&nbsp;<span class="ident" id="2601118">t</span><span class="op" id="2601119">.</span><span class="ident" id="2601120">Len</span><span class="op" id="2601123">(</span><span class="op" id="2601124">)</span><span class="op" id="2601125">)</span><br>
<span class="lineno">1785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601128">Copy</span><span class="op" id="2601132">(</span><span class="ident" id="2601133">s</span><span class="op" id="2601134">.</span><span class="ident" id="2601135">Slice</span><span class="op" id="2601140">(</span><span class="ident" id="2601141">i0</span><span class="op" id="2601143">,</span>&nbsp;<span class="ident" id="2601145">i1</span><span class="op" id="2601147">)</span><span class="op" id="2601148">,</span>&nbsp;<span class="ident" id="2601150">t</span><span class="op" id="2601151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601154">return</span>&nbsp;<span class="ident" id="2601161">s</span><br>
<span class="lineno"></span><span class="op" id="2601163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2601166">//&nbsp;Copy&nbsp;copies&nbsp;the&nbsp;contents&nbsp;of&nbsp;src&nbsp;into&nbsp;dst&nbsp;until&nbsp;either</span><br>
<span class="lineno">1790</span><span class="comment" id="2601223">//&nbsp;dst&nbsp;has&nbsp;been&nbsp;filled&nbsp;or&nbsp;src&nbsp;has&nbsp;been&nbsp;exhausted.</span><br>
<span class="lineno"></span><span class="comment" id="2601273">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;copied.</span><br>
<span class="lineno"></span><span class="comment" id="2601318">//&nbsp;Dst&nbsp;and&nbsp;src&nbsp;each&nbsp;must&nbsp;have&nbsp;kind&nbsp;Slice&nbsp;or&nbsp;Array,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2601373">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2601421">func</span>&nbsp;<span class="ident" id="2601426">Copy</span><span class="op" id="2601430">(</span><span class="ident" id="2601431">dst</span><span class="op" id="2601434">,</span>&nbsp;<span class="ident" id="2601436">src</span>&nbsp;<span class="ident" id="2601440">Value</span><span class="op" id="2601445">)</span>&nbsp;<span class="builtintype" id="2601447">int</span>&nbsp;<span class="op" id="2601451">{</span><br>
<span class="lineno">1795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601454">dk</span>&nbsp;<span class="op" id="2601457">:=</span>&nbsp;<span class="ident" id="2601460">dst</span><span class="op" id="2601463">.</span><span class="ident" id="2601464">kind</span><span class="op" id="2601468">(</span><span class="op" id="2601469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601472">if</span>&nbsp;<span class="ident" id="2601475">dk</span>&nbsp;<span class="op" id="2601478">!=</span>&nbsp;<span class="ident" id="2601481">Array</span>&nbsp;<span class="op" id="2601487">&amp;&amp;</span>&nbsp;<span class="ident" id="2601490">dk</span>&nbsp;<span class="op" id="2601493">!=</span>&nbsp;<span class="ident" id="2601496">Slice</span>&nbsp;<span class="op" id="2601502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2601506">panic</span><span class="op" id="2601511">(</span><span class="op" id="2601512">&amp;</span><span class="ident" id="2601513">ValueError</span><span class="op" id="2601523">{</span><span class="string" id="2601524">&#34;reflect.Copy&#34;</span><span class="op" id="2601538">,</span>&nbsp;<span class="ident" id="2601540">dk</span><span class="op" id="2601542">}</span><span class="op" id="2601543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2601546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601549">if</span>&nbsp;<span class="ident" id="2601552">dk</span>&nbsp;<span class="op" id="2601555">==</span>&nbsp;<span class="ident" id="2601558">Array</span>&nbsp;<span class="op" id="2601564">{</span><br>
<span class="lineno">1800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601568">dst</span><span class="op" id="2601571">.</span><span class="ident" id="2601572">mustBeAssignable</span><span class="op" id="2601588">(</span><span class="op" id="2601589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2601592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601595">dst</span><span class="op" id="2601598">.</span><span class="ident" id="2601599">mustBeExported</span><span class="op" id="2601613">(</span><span class="op" id="2601614">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601618">sk</span>&nbsp;<span class="op" id="2601621">:=</span>&nbsp;<span class="ident" id="2601624">src</span><span class="op" id="2601627">.</span><span class="ident" id="2601628">kind</span><span class="op" id="2601632">(</span><span class="op" id="2601633">)</span><br>
<span class="lineno">1805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601636">if</span>&nbsp;<span class="ident" id="2601639">sk</span>&nbsp;<span class="op" id="2601642">!=</span>&nbsp;<span class="ident" id="2601645">Array</span>&nbsp;<span class="op" id="2601651">&amp;&amp;</span>&nbsp;<span class="ident" id="2601654">sk</span>&nbsp;<span class="op" id="2601657">!=</span>&nbsp;<span class="ident" id="2601660">Slice</span>&nbsp;<span class="op" id="2601666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2601670">panic</span><span class="op" id="2601675">(</span><span class="op" id="2601676">&amp;</span><span class="ident" id="2601677">ValueError</span><span class="op" id="2601687">{</span><span class="string" id="2601688">&#34;reflect.Copy&#34;</span><span class="op" id="2601702">,</span>&nbsp;<span class="ident" id="2601704">sk</span><span class="op" id="2601706">}</span><span class="op" id="2601707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2601710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601713">src</span><span class="op" id="2601716">.</span><span class="ident" id="2601717">mustBeExported</span><span class="op" id="2601731">(</span><span class="op" id="2601732">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601736">de</span>&nbsp;<span class="op" id="2601739">:=</span>&nbsp;<span class="ident" id="2601742">dst</span><span class="op" id="2601745">.</span><span class="ident" id="2601746">typ</span><span class="op" id="2601749">.</span><span class="ident" id="2601750">Elem</span><span class="op" id="2601754">(</span><span class="op" id="2601755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601758">se</span>&nbsp;<span class="op" id="2601761">:=</span>&nbsp;<span class="ident" id="2601764">src</span><span class="op" id="2601767">.</span><span class="ident" id="2601768">typ</span><span class="op" id="2601771">.</span><span class="ident" id="2601772">Elem</span><span class="op" id="2601776">(</span><span class="op" id="2601777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601780">typesMustMatch</span><span class="op" id="2601794">(</span><span class="string" id="2601795">&#34;reflect.Copy&#34;</span><span class="op" id="2601809">,</span>&nbsp;<span class="ident" id="2601811">de</span><span class="op" id="2601813">,</span>&nbsp;<span class="ident" id="2601815">se</span><span class="op" id="2601817">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601821">n</span>&nbsp;<span class="op" id="2601823">:=</span>&nbsp;<span class="ident" id="2601826">dst</span><span class="op" id="2601829">.</span><span class="ident" id="2601830">Len</span><span class="op" id="2601833">(</span><span class="op" id="2601834">)</span><br>
<span class="lineno">1815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601837">if</span>&nbsp;<span class="ident" id="2601840">sn</span>&nbsp;<span class="op" id="2601843">:=</span>&nbsp;<span class="ident" id="2601846">src</span><span class="op" id="2601849">.</span><span class="ident" id="2601850">Len</span><span class="op" id="2601853">(</span><span class="op" id="2601854">)</span><span class="op" id="2601855">;</span>&nbsp;<span class="ident" id="2601857">n</span>&nbsp;<span class="op" id="2601859">&gt;</span>&nbsp;<span class="ident" id="2601861">sn</span>&nbsp;<span class="op" id="2601864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601868">n</span>&nbsp;<span class="op" id="2601870">=</span>&nbsp;<span class="ident" id="2601872">sn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2601876">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2601880">//&nbsp;Copy&nbsp;via&nbsp;memmove.</span><br>
<span class="lineno">1820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601902">var</span>&nbsp;<span class="ident" id="2601906">da</span><span class="op" id="2601908">,</span>&nbsp;<span class="ident" id="2601910">sa</span>&nbsp;<span class="ident" id="2601913">unsafe</span><span class="op" id="2601919">.</span><span class="ident" id="2601920">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2601929">if</span>&nbsp;<span class="ident" id="2601932">dk</span>&nbsp;<span class="op" id="2601935">==</span>&nbsp;<span class="ident" id="2601938">Array</span>&nbsp;<span class="op" id="2601944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601948">da</span>&nbsp;<span class="op" id="2601951">=</span>&nbsp;<span class="ident" id="2601953">dst</span><span class="op" id="2601956">.</span><span class="ident" id="2601957">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2601962">}</span>&nbsp;<span class="keyword" id="2601964">else</span>&nbsp;<span class="op" id="2601969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2601973">da</span>&nbsp;<span class="op" id="2601976">=</span>&nbsp;<span class="op" id="2601978">(</span><span class="op" id="2601979">*</span><span class="ident" id="2601980">sliceHeader</span><span class="op" id="2601991">)</span><span class="op" id="2601992">(</span><span class="ident" id="2601993">dst</span><span class="op" id="2601996">.</span><span class="ident" id="2601997">ptr</span><span class="op" id="2602000">)</span><span class="op" id="2602001">.</span><span class="ident" id="2602002">Data</span><br>
<span class="lineno">1825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2602008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2602011">if</span>&nbsp;<span class="ident" id="2602014">src</span><span class="op" id="2602017">.</span><span class="ident" id="2602018">flag</span><span class="op" id="2602022">&amp;</span><span class="ident" id="2602023">flagIndir</span>&nbsp;<span class="op" id="2602033">==</span>&nbsp;<span class="num" id="2602036">0</span>&nbsp;<span class="op" id="2602038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2602042">sa</span>&nbsp;<span class="op" id="2602045">=</span>&nbsp;<span class="ident" id="2602047">unsafe</span><span class="op" id="2602053">.</span><span class="ident" id="2602054">Pointer</span><span class="op" id="2602061">(</span><span class="op" id="2602062">&amp;</span><span class="ident" id="2602063">src</span><span class="op" id="2602066">.</span><span class="ident" id="2602067">ptr</span><span class="op" id="2602070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2602073">}</span>&nbsp;<span class="keyword" id="2602075">else</span>&nbsp;<span class="keyword" id="2602080">if</span>&nbsp;<span class="ident" id="2602083">sk</span>&nbsp;<span class="op" id="2602086">==</span>&nbsp;<span class="ident" id="2602089">Array</span>&nbsp;<span class="op" id="2602095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2602099">sa</span>&nbsp;<span class="op" id="2602102">=</span>&nbsp;<span class="ident" id="2602104">src</span><span class="op" id="2602107">.</span><span class="ident" id="2602108">ptr</span><br>
<span class="lineno">1830</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2602113">}</span>&nbsp;<span class="keyword" id="2602115">else</span>&nbsp;<span class="op" id="2602120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2602124">sa</span>&nbsp;<span class="op" id="2602127">=</span>&nbsp;<span class="op" id="2602129">(</span><span class="op" id="2602130">*</span><span class="ident" id="2602131">sliceHeader</span><span class="op" id="2602142">)</span><span class="op" id="2602143">(</span><span class="ident" id="2602144">src</span><span class="op" id="2602147">.</span><span class="ident" id="2602148">ptr</span><span class="op" id="2602151">)</span><span class="op" id="2602152">.</span><span class="ident" id="2602153">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2602159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2602162">memmove</span><span class="op" id="2602169">(</span><span class="ident" id="2602170">da</span><span class="op" id="2602172">,</span>&nbsp;<span class="ident" id="2602174">sa</span><span class="op" id="2602176">,</span>&nbsp;<span class="builtintype" id="2602178">uintptr</span><span class="op" id="2602185">(</span><span class="ident" id="2602186">n</span><span class="op" id="2602187">)</span><span class="op" id="2602188">*</span><span class="ident" id="2602189">de</span><span class="op" id="2602191">.</span><span class="ident" id="2602192">Size</span><span class="op" id="2602196">(</span><span class="op" id="2602197">)</span><span class="op" id="2602198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2602201">return</span>&nbsp;<span class="ident" id="2602208">n</span><br>
<span class="lineno">1835</span><span class="op" id="2602210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2602213">//&nbsp;A&nbsp;runtimeSelect&nbsp;is&nbsp;a&nbsp;single&nbsp;case&nbsp;passed&nbsp;to&nbsp;rselect.</span><br>
<span class="lineno"></span><span class="comment" id="2602268">//&nbsp;This&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/runtimeSelect</span><br>
<span class="lineno"></span><span class="keyword" id="2602323">type</span>&nbsp;<span class="ident" id="2602328">runtimeSelect</span>&nbsp;<span class="keyword" id="2602342">struct</span>&nbsp;<span class="op" id="2602349">{</span><br>
<span class="lineno">1840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2602352">dir</span>&nbsp;<span class="builtintype" id="2602356">uintptr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2602371">//&nbsp;0,&nbsp;SendDir,&nbsp;or&nbsp;RecvDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2602398">typ</span>&nbsp;<span class="op" id="2602402">*</span><span class="ident" id="2602403">rtype</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2602417">//&nbsp;channel&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2602434">ch</span>&nbsp;&nbsp;<span class="ident" id="2602438">unsafe</span><span class="op" id="2602444">.</span><span class="ident" id="2602445">Pointer</span>&nbsp;<span class="comment" id="2602453">//&nbsp;channel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2602465">val</span>&nbsp;<span class="ident" id="2602469">unsafe</span><span class="op" id="2602475">.</span><span class="ident" id="2602476">Pointer</span>&nbsp;<span class="comment" id="2602484">//&nbsp;ptr&nbsp;to&nbsp;data&nbsp;(SendDir)&nbsp;or&nbsp;ptr&nbsp;to&nbsp;receive&nbsp;buffer&nbsp;(RecvDir)</span><br>
<span class="lineno"></span><span class="op" id="2602544">}</span><br>
<span class="lineno">1845</span><br>
<span class="lineno"></span><span class="comment" id="2602547">//&nbsp;rselect&nbsp;runs&nbsp;a&nbsp;select.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2602615">//&nbsp;If&nbsp;the&nbsp;case&nbsp;was&nbsp;a&nbsp;receive,&nbsp;val&nbsp;is&nbsp;filled&nbsp;in&nbsp;with&nbsp;the&nbsp;received&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2602687">//&nbsp;The&nbsp;conventional&nbsp;OK&nbsp;bool&nbsp;indicates&nbsp;whether&nbsp;the&nbsp;receive&nbsp;corresponds</span><br>
<span class="lineno"></span><span class="comment" id="2602757">//&nbsp;to&nbsp;a&nbsp;sent&nbsp;value.</span><br>
<span class="lineno">1850</span><span class="comment" id="2602777">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2602791">func</span>&nbsp;<span class="ident" id="2602796">rselect</span><span class="op" id="2602803">(</span><span class="op" id="2602804">[</span><span class="op" id="2602805">]</span><span class="ident" id="2602806">runtimeSelect</span><span class="op" id="2602819">)</span>&nbsp;<span class="op" id="2602821">(</span><span class="ident" id="2602822">chosen</span>&nbsp;<span class="builtintype" id="2602829">int</span><span class="op" id="2602832">,</span>&nbsp;<span class="ident" id="2602834">recvOK</span>&nbsp;<span class="builtintype" id="2602841">bool</span><span class="op" id="2602845">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2602848">//&nbsp;A&nbsp;SelectDir&nbsp;describes&nbsp;the&nbsp;communication&nbsp;direction&nbsp;of&nbsp;a&nbsp;select&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2602919">type</span>&nbsp;<span class="ident" id="2602924">SelectDir</span>&nbsp;<span class="builtintype" id="2602934">int</span><br>
<span class="lineno">1855</span><br>
<span class="lineno"></span><span class="comment" id="2602939">//&nbsp;NOTE:&nbsp;These&nbsp;values&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/selectDir.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2603006">const</span>&nbsp;<span class="op" id="2603012">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2603015">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2603029">SelectDir</span>&nbsp;<span class="op" id="2603039">=</span>&nbsp;<span class="ident" id="2603041">iota</span><br>
<span class="lineno">1860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2603047">SelectSend</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2603071">//&nbsp;case&nbsp;Chan&nbsp;&lt;-&nbsp;Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2603093">SelectRecv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2603117">//&nbsp;case&nbsp;&lt;-Chan:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2603134">SelectDefault</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2603158">//&nbsp;default</span><br>
<span class="lineno"></span><span class="op" id="2603169">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1865</span><span class="comment" id="2603172">//&nbsp;A&nbsp;SelectCase&nbsp;describes&nbsp;a&nbsp;single&nbsp;case&nbsp;in&nbsp;a&nbsp;select&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2603235">//&nbsp;The&nbsp;kind&nbsp;of&nbsp;case&nbsp;depends&nbsp;on&nbsp;Dir,&nbsp;the&nbsp;communication&nbsp;direction.</span><br>
<span class="lineno"></span><span class="comment" id="2603300">//</span><br>
<span class="lineno"></span><span class="comment" id="2603303">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectDefault,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;default&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2603367">//&nbsp;Chan&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;zero&nbsp;Values.</span><br>
<span class="lineno">1870</span><span class="comment" id="2603405">//</span><br>
<span class="lineno"></span><span class="comment" id="2603408">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectSend,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;send&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2603471">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel,&nbsp;and&nbsp;Send&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2603562">//&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;if&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,</span><br>
<span class="lineno"></span><span class="comment" id="2603651">//&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;and&nbsp;the&nbsp;field&nbsp;Send&nbsp;will&nbsp;also&nbsp;be&nbsp;ignored&nbsp;and&nbsp;may&nbsp;be&nbsp;either&nbsp;zero</span><br>
<span class="lineno">1875</span><span class="comment" id="2603743">//&nbsp;or&nbsp;non-zero.</span><br>
<span class="lineno"></span><span class="comment" id="2603759">//</span><br>
<span class="lineno"></span><span class="comment" id="2603762">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectRecv,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;receive&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2603828">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2603913">//&nbsp;If&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;but&nbsp;Send&nbsp;must&nbsp;still&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno">1880</span><span class="comment" id="2604004">//&nbsp;When&nbsp;a&nbsp;receive&nbsp;operation&nbsp;is&nbsp;selected,&nbsp;the&nbsp;received&nbsp;Value&nbsp;is&nbsp;returned&nbsp;by&nbsp;Select.</span><br>
<span class="lineno"></span><span class="comment" id="2604087">//</span><br>
<span class="lineno"></span><span class="keyword" id="2604090">type</span>&nbsp;<span class="ident" id="2604095">SelectCase</span>&nbsp;<span class="keyword" id="2604106">struct</span>&nbsp;<span class="op" id="2604113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2604116">Dir</span>&nbsp;&nbsp;<span class="ident" id="2604121">SelectDir</span>&nbsp;<span class="comment" id="2604131">//&nbsp;direction&nbsp;of&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2604153">Chan</span>&nbsp;<span class="ident" id="2604158">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2604168">//&nbsp;channel&nbsp;to&nbsp;use&nbsp;(for&nbsp;send&nbsp;or&nbsp;receive)</span><br>
<span class="lineno">1885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2604209">Send</span>&nbsp;<span class="ident" id="2604214">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2604224">//&nbsp;value&nbsp;to&nbsp;send&nbsp;(for&nbsp;send)</span><br>
<span class="lineno"></span><span class="op" id="2604252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2604255">//&nbsp;Select&nbsp;executes&nbsp;a&nbsp;select&nbsp;operation&nbsp;described&nbsp;by&nbsp;the&nbsp;list&nbsp;of&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2604325">//&nbsp;Like&nbsp;the&nbsp;Go&nbsp;select&nbsp;statement,&nbsp;it&nbsp;blocks&nbsp;until&nbsp;at&nbsp;least&nbsp;one&nbsp;of&nbsp;the&nbsp;cases</span><br>
<span class="lineno">1890</span><span class="comment" id="2604400">//&nbsp;can&nbsp;proceed,&nbsp;makes&nbsp;a&nbsp;uniform&nbsp;pseudo-random&nbsp;choice,</span><br>
<span class="lineno"></span><span class="comment" id="2604454">//&nbsp;and&nbsp;then&nbsp;executes&nbsp;that&nbsp;case.&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case</span><br>
<span class="lineno"></span><span class="comment" id="2604526">//&nbsp;and,&nbsp;if&nbsp;that&nbsp;case&nbsp;was&nbsp;a&nbsp;receive&nbsp;operation,&nbsp;the&nbsp;value&nbsp;received&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2604597">//&nbsp;boolean&nbsp;indicating&nbsp;whether&nbsp;the&nbsp;value&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send&nbsp;on&nbsp;the&nbsp;channel</span><br>
<span class="lineno"></span><span class="comment" id="2604674">//&nbsp;(as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed).</span><br>
<span class="lineno">1895</span><span class="keyword" id="2604746">func</span>&nbsp;<span class="ident" id="2604751">Select</span><span class="op" id="2604757">(</span><span class="ident" id="2604758">cases</span>&nbsp;<span class="op" id="2604764">[</span><span class="op" id="2604765">]</span><span class="ident" id="2604766">SelectCase</span><span class="op" id="2604776">)</span>&nbsp;<span class="op" id="2604778">(</span><span class="ident" id="2604779">chosen</span>&nbsp;<span class="builtintype" id="2604786">int</span><span class="op" id="2604789">,</span>&nbsp;<span class="ident" id="2604791">recv</span>&nbsp;<span class="ident" id="2604796">Value</span><span class="op" id="2604801">,</span>&nbsp;<span class="ident" id="2604803">recvOK</span>&nbsp;<span class="builtintype" id="2604810">bool</span><span class="op" id="2604814">)</span>&nbsp;<span class="op" id="2604816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2604819">//&nbsp;NOTE:&nbsp;Do&nbsp;not&nbsp;trust&nbsp;that&nbsp;caller&nbsp;is&nbsp;not&nbsp;modifying&nbsp;cases&nbsp;data&nbsp;underfoot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2604893">//&nbsp;The&nbsp;range&nbsp;is&nbsp;safe&nbsp;because&nbsp;the&nbsp;caller&nbsp;cannot&nbsp;modify&nbsp;our&nbsp;copy&nbsp;of&nbsp;the&nbsp;len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2604968">//&nbsp;and&nbsp;each&nbsp;iteration&nbsp;makes&nbsp;its&nbsp;own&nbsp;copy&nbsp;of&nbsp;the&nbsp;value&nbsp;c.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605026">runcases</span>&nbsp;<span class="op" id="2605035">:=</span>&nbsp;<span class="builtinfunc" id="2605038">make</span><span class="op" id="2605042">(</span><span class="op" id="2605043">[</span><span class="op" id="2605044">]</span><span class="ident" id="2605045">runtimeSelect</span><span class="op" id="2605058">,</span>&nbsp;<span class="builtinfunc" id="2605060">len</span><span class="op" id="2605063">(</span><span class="ident" id="2605064">cases</span><span class="op" id="2605069">)</span><span class="op" id="2605070">)</span><br>
<span class="lineno">1900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605073">haveDefault</span>&nbsp;<span class="op" id="2605085">:=</span>&nbsp;<span class="builtintype" id="2605088">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2605095">for</span>&nbsp;<span class="ident" id="2605099">i</span><span class="op" id="2605100">,</span>&nbsp;<span class="ident" id="2605102">c</span>&nbsp;<span class="op" id="2605104">:=</span>&nbsp;<span class="keyword" id="2605107">range</span>&nbsp;<span class="ident" id="2605113">cases</span>&nbsp;<span class="op" id="2605119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605123">rc</span>&nbsp;<span class="op" id="2605126">:=</span>&nbsp;<span class="op" id="2605129">&amp;</span><span class="ident" id="2605130">runcases</span><span class="op" id="2605138">[</span><span class="ident" id="2605139">i</span><span class="op" id="2605140">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605144">rc</span><span class="op" id="2605146">.</span><span class="ident" id="2605147">dir</span>&nbsp;<span class="op" id="2605151">=</span>&nbsp;<span class="builtintype" id="2605153">uintptr</span><span class="op" id="2605160">(</span><span class="ident" id="2605161">c</span><span class="op" id="2605162">.</span><span class="ident" id="2605163">Dir</span><span class="op" id="2605166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2605170">switch</span>&nbsp;<span class="ident" id="2605177">c</span><span class="op" id="2605178">.</span><span class="ident" id="2605179">Dir</span>&nbsp;<span class="op" id="2605183">{</span><br>
<span class="lineno">1905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2605187">default</span><span class="op" id="2605194">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2605199">panic</span><span class="op" id="2605204">(</span><span class="string" id="2605205">&#34;reflect.Select:&nbsp;invalid&nbsp;Dir&#34;</span><span class="op" id="2605234">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2605239">case</span>&nbsp;<span class="ident" id="2605244">SelectDefault</span><span class="op" id="2605257">:</span>&nbsp;<span class="comment" id="2605259">//&nbsp;default</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2605273">if</span>&nbsp;<span class="ident" id="2605276">haveDefault</span>&nbsp;<span class="op" id="2605288">{</span><br>
<span class="lineno">1910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2605294">panic</span><span class="op" id="2605299">(</span><span class="string" id="2605300">&#34;reflect.Select:&nbsp;multiple&nbsp;default&nbsp;cases&#34;</span><span class="op" id="2605340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2605345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605350">haveDefault</span>&nbsp;<span class="op" id="2605362">=</span>&nbsp;<span class="builtintype" id="2605364">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2605372">if</span>&nbsp;<span class="ident" id="2605375">c</span><span class="op" id="2605376">.</span><span class="ident" id="2605377">Chan</span><span class="op" id="2605381">.</span><span class="ident" id="2605382">IsValid</span><span class="op" id="2605389">(</span><span class="op" id="2605390">)</span>&nbsp;<span class="op" id="2605392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2605398">panic</span><span class="op" id="2605403">(</span><span class="string" id="2605404">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Chan&nbsp;value&#34;</span><span class="op" id="2605449">)</span><br>
<span class="lineno">1915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2605454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2605459">if</span>&nbsp;<span class="ident" id="2605462">c</span><span class="op" id="2605463">.</span><span class="ident" id="2605464">Send</span><span class="op" id="2605468">.</span><span class="ident" id="2605469">IsValid</span><span class="op" id="2605476">(</span><span class="op" id="2605477">)</span>&nbsp;<span class="op" id="2605479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2605485">panic</span><span class="op" id="2605490">(</span><span class="string" id="2605491">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2605536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2605541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2605546">case</span>&nbsp;<span class="ident" id="2605551">SelectSend</span><span class="op" id="2605561">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605566">ch</span>&nbsp;<span class="op" id="2605569">:=</span>&nbsp;<span class="ident" id="2605572">c</span><span class="op" id="2605573">.</span><span class="ident" id="2605574">Chan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2605582">if</span>&nbsp;<span class="op" id="2605585">!</span><span class="ident" id="2605586">ch</span><span class="op" id="2605588">.</span><span class="ident" id="2605589">IsValid</span><span class="op" id="2605596">(</span><span class="op" id="2605597">)</span>&nbsp;<span class="op" id="2605599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2605605">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2605614">}</span><br>
<span class="lineno">1925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605619">ch</span><span class="op" id="2605621">.</span><span class="ident" id="2605622">mustBe</span><span class="op" id="2605628">(</span><span class="ident" id="2605629">Chan</span><span class="op" id="2605633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605638">ch</span><span class="op" id="2605640">.</span><span class="ident" id="2605641">mustBeExported</span><span class="op" id="2605655">(</span><span class="op" id="2605656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605661">tt</span>&nbsp;<span class="op" id="2605664">:=</span>&nbsp;<span class="op" id="2605667">(</span><span class="op" id="2605668">*</span><span class="ident" id="2605669">chanType</span><span class="op" id="2605677">)</span><span class="op" id="2605678">(</span><span class="ident" id="2605679">unsafe</span><span class="op" id="2605685">.</span><span class="ident" id="2605686">Pointer</span><span class="op" id="2605693">(</span><span class="ident" id="2605694">ch</span><span class="op" id="2605696">.</span><span class="ident" id="2605697">typ</span><span class="op" id="2605700">)</span><span class="op" id="2605701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2605706">if</span>&nbsp;<span class="ident" id="2605709">ChanDir</span><span class="op" id="2605716">(</span><span class="ident" id="2605717">tt</span><span class="op" id="2605719">.</span><span class="ident" id="2605720">dir</span><span class="op" id="2605723">)</span><span class="op" id="2605724">&amp;</span><span class="ident" id="2605725">SendDir</span>&nbsp;<span class="op" id="2605733">==</span>&nbsp;<span class="num" id="2605736">0</span>&nbsp;<span class="op" id="2605738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2605744">panic</span><span class="op" id="2605749">(</span><span class="string" id="2605750">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;using&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2605804">)</span><br>
<span class="lineno">1930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2605809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605814">rc</span><span class="op" id="2605816">.</span><span class="ident" id="2605817">ch</span>&nbsp;<span class="op" id="2605820">=</span>&nbsp;<span class="ident" id="2605822">ch</span><span class="op" id="2605824">.</span><span class="ident" id="2605825">pointer</span><span class="op" id="2605832">(</span><span class="op" id="2605833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605838">rc</span><span class="op" id="2605840">.</span><span class="ident" id="2605841">typ</span>&nbsp;<span class="op" id="2605845">=</span>&nbsp;<span class="op" id="2605847">&amp;</span><span class="ident" id="2605848">tt</span><span class="op" id="2605850">.</span><span class="ident" id="2605851">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605860">v</span>&nbsp;<span class="op" id="2605862">:=</span>&nbsp;<span class="ident" id="2605865">c</span><span class="op" id="2605866">.</span><span class="ident" id="2605867">Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2605875">if</span>&nbsp;<span class="op" id="2605878">!</span><span class="ident" id="2605879">v</span><span class="op" id="2605880">.</span><span class="ident" id="2605881">IsValid</span><span class="op" id="2605888">(</span><span class="op" id="2605889">)</span>&nbsp;<span class="op" id="2605891">{</span><br>
<span class="lineno">1935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2605897">panic</span><span class="op" id="2605902">(</span><span class="string" id="2605903">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;missing&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2605952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2605957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605962">v</span><span class="op" id="2605963">.</span><span class="ident" id="2605964">mustBeExported</span><span class="op" id="2605978">(</span><span class="op" id="2605979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605984">v</span>&nbsp;<span class="op" id="2605986">=</span>&nbsp;<span class="ident" id="2605988">v</span><span class="op" id="2605989">.</span><span class="ident" id="2605990">assignTo</span><span class="op" id="2605998">(</span><span class="string" id="2605999">&#34;reflect.Select&#34;</span><span class="op" id="2606015">,</span>&nbsp;<span class="ident" id="2606017">tt</span><span class="op" id="2606019">.</span><span class="ident" id="2606020">elem</span><span class="op" id="2606024">,</span>&nbsp;<span class="ident" id="2606026">nil</span><span class="op" id="2606029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2606034">if</span>&nbsp;<span class="ident" id="2606037">v</span><span class="op" id="2606038">.</span><span class="ident" id="2606039">flag</span><span class="op" id="2606043">&amp;</span><span class="ident" id="2606044">flagIndir</span>&nbsp;<span class="op" id="2606054">!=</span>&nbsp;<span class="num" id="2606057">0</span>&nbsp;<span class="op" id="2606059">{</span><br>
<span class="lineno">1940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606065">rc</span><span class="op" id="2606067">.</span><span class="ident" id="2606068">val</span>&nbsp;<span class="op" id="2606072">=</span>&nbsp;<span class="ident" id="2606074">v</span><span class="op" id="2606075">.</span><span class="ident" id="2606076">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2606083">}</span>&nbsp;<span class="keyword" id="2606085">else</span>&nbsp;<span class="op" id="2606090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606096">rc</span><span class="op" id="2606098">.</span><span class="ident" id="2606099">val</span>&nbsp;<span class="op" id="2606103">=</span>&nbsp;<span class="ident" id="2606105">unsafe</span><span class="op" id="2606111">.</span><span class="ident" id="2606112">Pointer</span><span class="op" id="2606119">(</span><span class="op" id="2606120">&amp;</span><span class="ident" id="2606121">v</span><span class="op" id="2606122">.</span><span class="ident" id="2606123">ptr</span><span class="op" id="2606126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2606131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2606136">case</span>&nbsp;<span class="ident" id="2606141">SelectRecv</span><span class="op" id="2606151">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2606156">if</span>&nbsp;<span class="ident" id="2606159">c</span><span class="op" id="2606160">.</span><span class="ident" id="2606161">Send</span><span class="op" id="2606165">.</span><span class="ident" id="2606166">IsValid</span><span class="op" id="2606173">(</span><span class="op" id="2606174">)</span>&nbsp;<span class="op" id="2606176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2606182">panic</span><span class="op" id="2606187">(</span><span class="string" id="2606188">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2606233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2606238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606243">ch</span>&nbsp;<span class="op" id="2606246">:=</span>&nbsp;<span class="ident" id="2606249">c</span><span class="op" id="2606250">.</span><span class="ident" id="2606251">Chan</span><br>
<span class="lineno">1950</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2606259">if</span>&nbsp;<span class="op" id="2606262">!</span><span class="ident" id="2606263">ch</span><span class="op" id="2606265">.</span><span class="ident" id="2606266">IsValid</span><span class="op" id="2606273">(</span><span class="op" id="2606274">)</span>&nbsp;<span class="op" id="2606276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2606282">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2606291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606296">ch</span><span class="op" id="2606298">.</span><span class="ident" id="2606299">mustBe</span><span class="op" id="2606305">(</span><span class="ident" id="2606306">Chan</span><span class="op" id="2606310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606315">ch</span><span class="op" id="2606317">.</span><span class="ident" id="2606318">mustBeExported</span><span class="op" id="2606332">(</span><span class="op" id="2606333">)</span><br>
<span class="lineno">1955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606338">tt</span>&nbsp;<span class="op" id="2606341">:=</span>&nbsp;<span class="op" id="2606344">(</span><span class="op" id="2606345">*</span><span class="ident" id="2606346">chanType</span><span class="op" id="2606354">)</span><span class="op" id="2606355">(</span><span class="ident" id="2606356">unsafe</span><span class="op" id="2606362">.</span><span class="ident" id="2606363">Pointer</span><span class="op" id="2606370">(</span><span class="ident" id="2606371">ch</span><span class="op" id="2606373">.</span><span class="ident" id="2606374">typ</span><span class="op" id="2606377">)</span><span class="op" id="2606378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2606383">if</span>&nbsp;<span class="ident" id="2606386">ChanDir</span><span class="op" id="2606393">(</span><span class="ident" id="2606394">tt</span><span class="op" id="2606396">.</span><span class="ident" id="2606397">dir</span><span class="op" id="2606400">)</span><span class="op" id="2606401">&amp;</span><span class="ident" id="2606402">RecvDir</span>&nbsp;<span class="op" id="2606410">==</span>&nbsp;<span class="num" id="2606413">0</span>&nbsp;<span class="op" id="2606415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2606421">panic</span><span class="op" id="2606426">(</span><span class="string" id="2606427">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;using&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2606481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2606486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606491">rc</span><span class="op" id="2606493">.</span><span class="ident" id="2606494">ch</span>&nbsp;<span class="op" id="2606497">=</span>&nbsp;<span class="ident" id="2606499">ch</span><span class="op" id="2606501">.</span><span class="ident" id="2606502">pointer</span><span class="op" id="2606509">(</span><span class="op" id="2606510">)</span><br>
<span class="lineno">1960</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606515">rc</span><span class="op" id="2606517">.</span><span class="ident" id="2606518">typ</span>&nbsp;<span class="op" id="2606522">=</span>&nbsp;<span class="op" id="2606524">&amp;</span><span class="ident" id="2606525">tt</span><span class="op" id="2606527">.</span><span class="ident" id="2606528">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606537">rc</span><span class="op" id="2606539">.</span><span class="ident" id="2606540">val</span>&nbsp;<span class="op" id="2606544">=</span>&nbsp;<span class="ident" id="2606546">unsafe_New</span><span class="op" id="2606556">(</span><span class="ident" id="2606557">tt</span><span class="op" id="2606559">.</span><span class="ident" id="2606560">elem</span><span class="op" id="2606564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2606568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2606571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1965</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606575">chosen</span><span class="op" id="2606581">,</span>&nbsp;<span class="ident" id="2606583">recvOK</span>&nbsp;<span class="op" id="2606590">=</span>&nbsp;<span class="ident" id="2606592">rselect</span><span class="op" id="2606599">(</span><span class="ident" id="2606600">runcases</span><span class="op" id="2606608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2606611">if</span>&nbsp;<span class="ident" id="2606614">runcases</span><span class="op" id="2606622">[</span><span class="ident" id="2606623">chosen</span><span class="op" id="2606629">]</span><span class="op" id="2606630">.</span><span class="ident" id="2606631">dir</span>&nbsp;<span class="op" id="2606635">==</span>&nbsp;<span class="builtintype" id="2606638">uintptr</span><span class="op" id="2606645">(</span><span class="ident" id="2606646">SelectRecv</span><span class="op" id="2606656">)</span>&nbsp;<span class="op" id="2606658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606662">tt</span>&nbsp;<span class="op" id="2606665">:=</span>&nbsp;<span class="op" id="2606668">(</span><span class="op" id="2606669">*</span><span class="ident" id="2606670">chanType</span><span class="op" id="2606678">)</span><span class="op" id="2606679">(</span><span class="ident" id="2606680">unsafe</span><span class="op" id="2606686">.</span><span class="ident" id="2606687">Pointer</span><span class="op" id="2606694">(</span><span class="ident" id="2606695">runcases</span><span class="op" id="2606703">[</span><span class="ident" id="2606704">chosen</span><span class="op" id="2606710">]</span><span class="op" id="2606711">.</span><span class="ident" id="2606712">typ</span><span class="op" id="2606715">)</span><span class="op" id="2606716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606720">t</span>&nbsp;<span class="op" id="2606722">:=</span>&nbsp;<span class="ident" id="2606725">tt</span><span class="op" id="2606727">.</span><span class="ident" id="2606728">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606735">p</span>&nbsp;<span class="op" id="2606737">:=</span>&nbsp;<span class="ident" id="2606740">runcases</span><span class="op" id="2606748">[</span><span class="ident" id="2606749">chosen</span><span class="op" id="2606755">]</span><span class="op" id="2606756">.</span><span class="ident" id="2606757">val</span><br>
<span class="lineno">1970</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606763">fl</span>&nbsp;<span class="op" id="2606766">:=</span>&nbsp;<span class="ident" id="2606769">flag</span><span class="op" id="2606773">(</span><span class="ident" id="2606774">t</span><span class="op" id="2606775">.</span><span class="ident" id="2606776">Kind</span><span class="op" id="2606780">(</span><span class="op" id="2606781">)</span><span class="op" id="2606782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2606786">if</span>&nbsp;<span class="ident" id="2606789">ifaceIndir</span><span class="op" id="2606799">(</span><span class="ident" id="2606800">t</span><span class="op" id="2606801">)</span>&nbsp;<span class="op" id="2606803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606808">recv</span>&nbsp;<span class="op" id="2606813">=</span>&nbsp;<span class="ident" id="2606815">Value</span><span class="op" id="2606820">{</span><span class="ident" id="2606821">t</span><span class="op" id="2606822">,</span>&nbsp;<span class="ident" id="2606824">p</span><span class="op" id="2606825">,</span>&nbsp;<span class="ident" id="2606827">fl</span>&nbsp;<span class="op" id="2606830">|</span>&nbsp;<span class="ident" id="2606832">flagIndir</span><span class="op" id="2606841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2606845">}</span>&nbsp;<span class="keyword" id="2606847">else</span>&nbsp;<span class="op" id="2606852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606857">recv</span>&nbsp;<span class="op" id="2606862">=</span>&nbsp;<span class="ident" id="2606864">Value</span><span class="op" id="2606869">{</span><span class="ident" id="2606870">t</span><span class="op" id="2606871">,</span>&nbsp;<span class="op" id="2606873">*</span><span class="op" id="2606874">(</span><span class="op" id="2606875">*</span><span class="ident" id="2606876">unsafe</span><span class="op" id="2606882">.</span><span class="ident" id="2606883">Pointer</span><span class="op" id="2606890">)</span><span class="op" id="2606891">(</span><span class="ident" id="2606892">p</span><span class="op" id="2606893">)</span><span class="op" id="2606894">,</span>&nbsp;<span class="ident" id="2606896">fl</span><span class="op" id="2606898">}</span><br>
<span class="lineno">1975</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2606902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2606905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2606908">return</span>&nbsp;<span class="ident" id="2606915">chosen</span><span class="op" id="2606921">,</span>&nbsp;<span class="ident" id="2606923">recv</span><span class="op" id="2606927">,</span>&nbsp;<span class="ident" id="2606929">recvOK</span><br>
<span class="lineno"></span><span class="op" id="2606936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1980</span><span class="comment" id="2606939">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;constructors<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2606963">//&nbsp;implemented&nbsp;in&nbsp;package&nbsp;runtime</span><br>
<span class="lineno">1985</span><span class="keyword" id="2606997">func</span>&nbsp;<span class="ident" id="2607002">unsafe_New</span><span class="op" id="2607012">(</span><span class="op" id="2607013">*</span><span class="ident" id="2607014">rtype</span><span class="op" id="2607019">)</span>&nbsp;<span class="ident" id="2607021">unsafe</span><span class="op" id="2607027">.</span><span class="ident" id="2607028">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2607036">func</span>&nbsp;<span class="ident" id="2607041">unsafe_NewArray</span><span class="op" id="2607056">(</span><span class="op" id="2607057">*</span><span class="ident" id="2607058">rtype</span><span class="op" id="2607063">,</span>&nbsp;<span class="builtintype" id="2607065">int</span><span class="op" id="2607068">)</span>&nbsp;<span class="ident" id="2607070">unsafe</span><span class="op" id="2607076">.</span><span class="ident" id="2607077">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2607086">//&nbsp;MakeSlice&nbsp;creates&nbsp;a&nbsp;new&nbsp;zero-initialized&nbsp;slice&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2607142">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;slice&nbsp;type,&nbsp;length,&nbsp;and&nbsp;capacity.</span><br>
<span class="lineno">1990</span><span class="keyword" id="2607197">func</span>&nbsp;<span class="ident" id="2607202">MakeSlice</span><span class="op" id="2607211">(</span><span class="ident" id="2607212">typ</span>&nbsp;<span class="ident" id="2607216">Type</span><span class="op" id="2607220">,</span>&nbsp;<span class="builtinfunc" id="2607222">len</span><span class="op" id="2607225">,</span>&nbsp;<span class="builtinfunc" id="2607227">cap</span>&nbsp;<span class="builtintype" id="2607231">int</span><span class="op" id="2607234">)</span>&nbsp;<span class="ident" id="2607236">Value</span>&nbsp;<span class="op" id="2607242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607245">if</span>&nbsp;<span class="ident" id="2607248">typ</span><span class="op" id="2607251">.</span><span class="ident" id="2607252">Kind</span><span class="op" id="2607256">(</span><span class="op" id="2607257">)</span>&nbsp;<span class="op" id="2607259">!=</span>&nbsp;<span class="ident" id="2607262">Slice</span>&nbsp;<span class="op" id="2607268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2607272">panic</span><span class="op" id="2607277">(</span><span class="string" id="2607278">&#34;reflect.MakeSlice&nbsp;of&nbsp;non-slice&nbsp;type&#34;</span><span class="op" id="2607315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2607318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607321">if</span>&nbsp;<span class="builtinfunc" id="2607324">len</span>&nbsp;<span class="op" id="2607328">&lt;</span>&nbsp;<span class="num" id="2607330">0</span>&nbsp;<span class="op" id="2607332">{</span><br>
<span class="lineno">1995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2607336">panic</span><span class="op" id="2607341">(</span><span class="string" id="2607342">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;len&#34;</span><span class="op" id="2607375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2607378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607381">if</span>&nbsp;<span class="builtinfunc" id="2607384">cap</span>&nbsp;<span class="op" id="2607388">&lt;</span>&nbsp;<span class="num" id="2607390">0</span>&nbsp;<span class="op" id="2607392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2607396">panic</span><span class="op" id="2607401">(</span><span class="string" id="2607402">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;cap&#34;</span><span class="op" id="2607435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2607438">}</span><br>
<span class="lineno">2000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607441">if</span>&nbsp;<span class="builtinfunc" id="2607444">len</span>&nbsp;<span class="op" id="2607448">&gt;</span>&nbsp;<span class="builtinfunc" id="2607450">cap</span>&nbsp;<span class="op" id="2607454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2607458">panic</span><span class="op" id="2607463">(</span><span class="string" id="2607464">&#34;reflect.MakeSlice:&nbsp;len&nbsp;&gt;&nbsp;cap&#34;</span><span class="op" id="2607494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2607497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2607501">s</span>&nbsp;<span class="op" id="2607503">:=</span>&nbsp;<span class="ident" id="2607506">sliceHeader</span><span class="op" id="2607517">{</span><span class="ident" id="2607518">unsafe_NewArray</span><span class="op" id="2607533">(</span><span class="ident" id="2607534">typ</span><span class="op" id="2607537">.</span><span class="ident" id="2607538">Elem</span><span class="op" id="2607542">(</span><span class="op" id="2607543">)</span><span class="op" id="2607544">.</span><span class="op" id="2607545">(</span><span class="op" id="2607546">*</span><span class="ident" id="2607547">rtype</span><span class="op" id="2607552">)</span><span class="op" id="2607553">,</span>&nbsp;<span class="builtinfunc" id="2607555">cap</span><span class="op" id="2607558">)</span><span class="op" id="2607559">,</span>&nbsp;<span class="builtinfunc" id="2607561">len</span><span class="op" id="2607564">,</span>&nbsp;<span class="builtinfunc" id="2607566">cap</span><span class="op" id="2607569">}</span><br>
<span class="lineno">2005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607572">return</span>&nbsp;<span class="ident" id="2607579">Value</span><span class="op" id="2607584">{</span><span class="ident" id="2607585">typ</span><span class="op" id="2607588">.</span><span class="ident" id="2607589">common</span><span class="op" id="2607595">(</span><span class="op" id="2607596">)</span><span class="op" id="2607597">,</span>&nbsp;<span class="ident" id="2607599">unsafe</span><span class="op" id="2607605">.</span><span class="ident" id="2607606">Pointer</span><span class="op" id="2607613">(</span><span class="op" id="2607614">&amp;</span><span class="ident" id="2607615">s</span><span class="op" id="2607616">)</span><span class="op" id="2607617">,</span>&nbsp;<span class="ident" id="2607619">flagIndir</span>&nbsp;<span class="op" id="2607629">|</span>&nbsp;<span class="ident" id="2607631">flag</span><span class="op" id="2607635">(</span><span class="ident" id="2607636">Slice</span><span class="op" id="2607641">)</span><span class="op" id="2607642">}</span><br>
<span class="lineno"></span><span class="op" id="2607644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2607647">//&nbsp;MakeChan&nbsp;creates&nbsp;a&nbsp;new&nbsp;channel&nbsp;with&nbsp;the&nbsp;specified&nbsp;type&nbsp;and&nbsp;buffer&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="2607722">func</span>&nbsp;<span class="ident" id="2607727">MakeChan</span><span class="op" id="2607735">(</span><span class="ident" id="2607736">typ</span>&nbsp;<span class="ident" id="2607740">Type</span><span class="op" id="2607744">,</span>&nbsp;<span class="ident" id="2607746">buffer</span>&nbsp;<span class="builtintype" id="2607753">int</span><span class="op" id="2607756">)</span>&nbsp;<span class="ident" id="2607758">Value</span>&nbsp;<span class="op" id="2607764">{</span><br>
<span class="lineno">2010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607767">if</span>&nbsp;<span class="ident" id="2607770">typ</span><span class="op" id="2607773">.</span><span class="ident" id="2607774">Kind</span><span class="op" id="2607778">(</span><span class="op" id="2607779">)</span>&nbsp;<span class="op" id="2607781">!=</span>&nbsp;<span class="ident" id="2607784">Chan</span>&nbsp;<span class="op" id="2607789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2607793">panic</span><span class="op" id="2607798">(</span><span class="string" id="2607799">&#34;reflect.MakeChan&nbsp;of&nbsp;non-chan&nbsp;type&#34;</span><span class="op" id="2607834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2607837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607840">if</span>&nbsp;<span class="ident" id="2607843">buffer</span>&nbsp;<span class="op" id="2607850">&lt;</span>&nbsp;<span class="num" id="2607852">0</span>&nbsp;<span class="op" id="2607854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2607858">panic</span><span class="op" id="2607863">(</span><span class="string" id="2607864">&#34;reflect.MakeChan:&nbsp;negative&nbsp;buffer&nbsp;size&#34;</span><span class="op" id="2607904">)</span><br>
<span class="lineno">2015</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2607907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607910">if</span>&nbsp;<span class="ident" id="2607913">typ</span><span class="op" id="2607916">.</span><span class="ident" id="2607917">ChanDir</span><span class="op" id="2607924">(</span><span class="op" id="2607925">)</span>&nbsp;<span class="op" id="2607927">!=</span>&nbsp;<span class="ident" id="2607930">BothDir</span>&nbsp;<span class="op" id="2607938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2607942">panic</span><span class="op" id="2607947">(</span><span class="string" id="2607948">&#34;reflect.MakeChan:&nbsp;unidirectional&nbsp;channel&nbsp;type&#34;</span><span class="op" id="2607995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2607998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608001">ch</span>&nbsp;<span class="op" id="2608004">:=</span>&nbsp;<span class="ident" id="2608007">makechan</span><span class="op" id="2608015">(</span><span class="ident" id="2608016">typ</span><span class="op" id="2608019">.</span><span class="op" id="2608020">(</span><span class="op" id="2608021">*</span><span class="ident" id="2608022">rtype</span><span class="op" id="2608027">)</span><span class="op" id="2608028">,</span>&nbsp;<span class="ident" id="2608030">uint64</span><span class="op" id="2608036">(</span><span class="ident" id="2608037">buffer</span><span class="op" id="2608043">)</span><span class="op" id="2608044">)</span><br>
<span class="lineno">2020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608047">return</span>&nbsp;<span class="ident" id="2608054">Value</span><span class="op" id="2608059">{</span><span class="ident" id="2608060">typ</span><span class="op" id="2608063">.</span><span class="ident" id="2608064">common</span><span class="op" id="2608070">(</span><span class="op" id="2608071">)</span><span class="op" id="2608072">,</span>&nbsp;<span class="ident" id="2608074">ch</span><span class="op" id="2608076">,</span>&nbsp;<span class="ident" id="2608078">flag</span><span class="op" id="2608082">(</span><span class="ident" id="2608083">Chan</span><span class="op" id="2608087">)</span><span class="op" id="2608088">}</span><br>
<span class="lineno"></span><span class="op" id="2608090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2608093">//&nbsp;MakeMap&nbsp;creates&nbsp;a&nbsp;new&nbsp;map&nbsp;of&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2608145">func</span>&nbsp;<span class="ident" id="2608150">MakeMap</span><span class="op" id="2608157">(</span><span class="ident" id="2608158">typ</span>&nbsp;<span class="ident" id="2608162">Type</span><span class="op" id="2608166">)</span>&nbsp;<span class="ident" id="2608168">Value</span>&nbsp;<span class="op" id="2608174">{</span><br>
<span class="lineno">2025</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608177">if</span>&nbsp;<span class="ident" id="2608180">typ</span><span class="op" id="2608183">.</span><span class="ident" id="2608184">Kind</span><span class="op" id="2608188">(</span><span class="op" id="2608189">)</span>&nbsp;<span class="op" id="2608191">!=</span>&nbsp;<span class="ident" id="2608194">Map</span>&nbsp;<span class="op" id="2608198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2608202">panic</span><span class="op" id="2608207">(</span><span class="string" id="2608208">&#34;reflect.MakeMap&nbsp;of&nbsp;non-map&nbsp;type&#34;</span><span class="op" id="2608241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2608244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608247">m</span>&nbsp;<span class="op" id="2608249">:=</span>&nbsp;<span class="ident" id="2608252">makemap</span><span class="op" id="2608259">(</span><span class="ident" id="2608260">typ</span><span class="op" id="2608263">.</span><span class="op" id="2608264">(</span><span class="op" id="2608265">*</span><span class="ident" id="2608266">rtype</span><span class="op" id="2608271">)</span><span class="op" id="2608272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608275">return</span>&nbsp;<span class="ident" id="2608282">Value</span><span class="op" id="2608287">{</span><span class="ident" id="2608288">typ</span><span class="op" id="2608291">.</span><span class="ident" id="2608292">common</span><span class="op" id="2608298">(</span><span class="op" id="2608299">)</span><span class="op" id="2608300">,</span>&nbsp;<span class="ident" id="2608302">m</span><span class="op" id="2608303">,</span>&nbsp;<span class="ident" id="2608305">flag</span><span class="op" id="2608309">(</span><span class="ident" id="2608310">Map</span><span class="op" id="2608313">)</span><span class="op" id="2608314">}</span><br>
<span class="lineno">2030</span><span class="op" id="2608316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2608319">//&nbsp;Indirect&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2608367">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2608424">//&nbsp;If&nbsp;v&nbsp;is&nbsp;not&nbsp;a&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;v.</span><br>
<span class="lineno">2035</span><span class="keyword" id="2608470">func</span>&nbsp;<span class="ident" id="2608475">Indirect</span><span class="op" id="2608483">(</span><span class="ident" id="2608484">v</span>&nbsp;<span class="ident" id="2608486">Value</span><span class="op" id="2608491">)</span>&nbsp;<span class="ident" id="2608493">Value</span>&nbsp;<span class="op" id="2608499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608502">if</span>&nbsp;<span class="ident" id="2608505">v</span><span class="op" id="2608506">.</span><span class="ident" id="2608507">Kind</span><span class="op" id="2608511">(</span><span class="op" id="2608512">)</span>&nbsp;<span class="op" id="2608514">!=</span>&nbsp;<span class="ident" id="2608517">Ptr</span>&nbsp;<span class="op" id="2608521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608525">return</span>&nbsp;<span class="ident" id="2608532">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2608535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608538">return</span>&nbsp;<span class="ident" id="2608545">v</span><span class="op" id="2608546">.</span><span class="ident" id="2608547">Elem</span><span class="op" id="2608551">(</span><span class="op" id="2608552">)</span><br>
<span class="lineno">2040</span><span class="op" id="2608554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2608557">//&nbsp;ValueOf&nbsp;returns&nbsp;a&nbsp;new&nbsp;Value&nbsp;initialized&nbsp;to&nbsp;the&nbsp;concrete&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2608622">//&nbsp;stored&nbsp;in&nbsp;the&nbsp;interface&nbsp;i.&nbsp;&nbsp;ValueOf(nil)&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2608690">func</span>&nbsp;<span class="ident" id="2608695">ValueOf</span><span class="op" id="2608702">(</span><span class="ident" id="2608703">i</span>&nbsp;<span class="keyword" id="2608705">interface</span><span class="op" id="2608714">{</span><span class="op" id="2608715">}</span><span class="op" id="2608716">)</span>&nbsp;<span class="ident" id="2608718">Value</span>&nbsp;<span class="op" id="2608724">{</span><br>
<span class="lineno">2045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608727">if</span>&nbsp;<span class="ident" id="2608730">i</span>&nbsp;<span class="op" id="2608732">==</span>&nbsp;<span class="ident" id="2608735">nil</span>&nbsp;<span class="op" id="2608739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608743">return</span>&nbsp;<span class="ident" id="2608750">Value</span><span class="op" id="2608755">{</span><span class="op" id="2608756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2608759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2608763">//&nbsp;TODO(rsc):&nbsp;Eliminate&nbsp;this&nbsp;terrible&nbsp;hack.</span><br>
<span class="lineno">2050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2608808">//&nbsp;In&nbsp;the&nbsp;call&nbsp;to&nbsp;unpackEface,&nbsp;i.typ&nbsp;doesn&#39;t&nbsp;escape,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2608862">//&nbsp;and&nbsp;i.word&nbsp;is&nbsp;an&nbsp;integer.&nbsp;&nbsp;So&nbsp;it&nbsp;looks&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2608910">//&nbsp;i&nbsp;doesn&#39;t&nbsp;escape.&nbsp;&nbsp;But&nbsp;really&nbsp;it&nbsp;does,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2608953">//&nbsp;because&nbsp;i.word&nbsp;is&nbsp;actually&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608995">escapes</span><span class="op" id="2609002">(</span><span class="ident" id="2609003">i</span><span class="op" id="2609004">)</span><br>
<span class="lineno">2055</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2609008">return</span>&nbsp;<span class="ident" id="2609015">unpackEface</span><span class="op" id="2609026">(</span><span class="ident" id="2609027">i</span><span class="op" id="2609028">)</span><br>
<span class="lineno"></span><span class="op" id="2609030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2609033">//&nbsp;Zero&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno">2060</span><span class="comment" id="2609109">//&nbsp;The&nbsp;result&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;zero&nbsp;value&nbsp;of&nbsp;the&nbsp;Value&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="2609177">//&nbsp;which&nbsp;represents&nbsp;no&nbsp;value&nbsp;at&nbsp;all.</span><br>
<span class="lineno"></span><span class="comment" id="2609214">//&nbsp;For&nbsp;example,&nbsp;Zero(TypeOf(42))&nbsp;returns&nbsp;a&nbsp;Value&nbsp;with&nbsp;Kind&nbsp;Int&nbsp;and&nbsp;value&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="2609290">//&nbsp;The&nbsp;returned&nbsp;value&nbsp;is&nbsp;neither&nbsp;addressable&nbsp;nor&nbsp;settable.</span><br>
<span class="lineno"></span><span class="keyword" id="2609349">func</span>&nbsp;<span class="ident" id="2609354">Zero</span><span class="op" id="2609358">(</span><span class="ident" id="2609359">typ</span>&nbsp;<span class="ident" id="2609363">Type</span><span class="op" id="2609367">)</span>&nbsp;<span class="ident" id="2609369">Value</span>&nbsp;<span class="op" id="2609375">{</span><br>
<span class="lineno">2065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2609378">if</span>&nbsp;<span class="ident" id="2609381">typ</span>&nbsp;<span class="op" id="2609385">==</span>&nbsp;<span class="ident" id="2609388">nil</span>&nbsp;<span class="op" id="2609392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2609396">panic</span><span class="op" id="2609401">(</span><span class="string" id="2609402">&#34;reflect:&nbsp;Zero(nil)&#34;</span><span class="op" id="2609422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2609425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2609428">t</span>&nbsp;<span class="op" id="2609430">:=</span>&nbsp;<span class="ident" id="2609433">typ</span><span class="op" id="2609436">.</span><span class="ident" id="2609437">common</span><span class="op" id="2609443">(</span><span class="op" id="2609444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2609447">fl</span>&nbsp;<span class="op" id="2609450">:=</span>&nbsp;<span class="ident" id="2609453">flag</span><span class="op" id="2609457">(</span><span class="ident" id="2609458">t</span><span class="op" id="2609459">.</span><span class="ident" id="2609460">Kind</span><span class="op" id="2609464">(</span><span class="op" id="2609465">)</span><span class="op" id="2609466">)</span><br>
<span class="lineno">2070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2609469">if</span>&nbsp;<span class="ident" id="2609472">ifaceIndir</span><span class="op" id="2609482">(</span><span class="ident" id="2609483">t</span><span class="op" id="2609484">)</span>&nbsp;<span class="op" id="2609486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2609490">return</span>&nbsp;<span class="ident" id="2609497">Value</span><span class="op" id="2609502">{</span><span class="ident" id="2609503">t</span><span class="op" id="2609504">,</span>&nbsp;<span class="ident" id="2609506">unsafe_New</span><span class="op" id="2609516">(</span><span class="ident" id="2609517">typ</span><span class="op" id="2609520">.</span><span class="op" id="2609521">(</span><span class="op" id="2609522">*</span><span class="ident" id="2609523">rtype</span><span class="op" id="2609528">)</span><span class="op" id="2609529">)</span><span class="op" id="2609530">,</span>&nbsp;<span class="ident" id="2609532">fl</span>&nbsp;<span class="op" id="2609535">|</span>&nbsp;<span class="ident" id="2609537">flagIndir</span><span class="op" id="2609546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2609549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2609552">return</span>&nbsp;<span class="ident" id="2609559">Value</span><span class="op" id="2609564">{</span><span class="ident" id="2609565">t</span><span class="op" id="2609566">,</span>&nbsp;<span class="ident" id="2609568">nil</span><span class="op" id="2609571">,</span>&nbsp;<span class="ident" id="2609573">fl</span><span class="op" id="2609575">}</span><br>
<span class="lineno"></span><span class="op" id="2609577">}</span><br>
<span class="lineno">2075</span><br>
<span class="lineno"></span><span class="comment" id="2609580">//&nbsp;New&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;new&nbsp;zero&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2609646">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.&nbsp;&nbsp;That&nbsp;is,&nbsp;the&nbsp;returned&nbsp;Value&#39;s&nbsp;Type&nbsp;is&nbsp;PtrTo(typ).</span><br>
<span class="lineno"></span><span class="keyword" id="2609724">func</span>&nbsp;<span class="ident" id="2609729">New</span><span class="op" id="2609732">(</span><span class="ident" id="2609733">typ</span>&nbsp;<span class="ident" id="2609737">Type</span><span class="op" id="2609741">)</span>&nbsp;<span class="ident" id="2609743">Value</span>&nbsp;<span class="op" id="2609749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2609752">if</span>&nbsp;<span class="ident" id="2609755">typ</span>&nbsp;<span class="op" id="2609759">==</span>&nbsp;<span class="ident" id="2609762">nil</span>&nbsp;<span class="op" id="2609766">{</span><br>
<span class="lineno">2080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2609770">panic</span><span class="op" id="2609775">(</span><span class="string" id="2609776">&#34;reflect:&nbsp;New(nil)&#34;</span><span class="op" id="2609795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2609798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2609801">ptr</span>&nbsp;<span class="op" id="2609805">:=</span>&nbsp;<span class="ident" id="2609808">unsafe_New</span><span class="op" id="2609818">(</span><span class="ident" id="2609819">typ</span><span class="op" id="2609822">.</span><span class="op" id="2609823">(</span><span class="op" id="2609824">*</span><span class="ident" id="2609825">rtype</span><span class="op" id="2609830">)</span><span class="op" id="2609831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2609834">fl</span>&nbsp;<span class="op" id="2609837">:=</span>&nbsp;<span class="ident" id="2609840">flag</span><span class="op" id="2609844">(</span><span class="ident" id="2609845">Ptr</span><span class="op" id="2609848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2609851">return</span>&nbsp;<span class="ident" id="2609858">Value</span><span class="op" id="2609863">{</span><span class="ident" id="2609864">typ</span><span class="op" id="2609867">.</span><span class="ident" id="2609868">common</span><span class="op" id="2609874">(</span><span class="op" id="2609875">)</span><span class="op" id="2609876">.</span><span class="ident" id="2609877">ptrTo</span><span class="op" id="2609882">(</span><span class="op" id="2609883">)</span><span class="op" id="2609884">,</span>&nbsp;<span class="ident" id="2609886">ptr</span><span class="op" id="2609889">,</span>&nbsp;<span class="ident" id="2609891">fl</span><span class="op" id="2609893">}</span><br>
<span class="lineno">2085</span><span class="op" id="2609895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2609898">//&nbsp;NewAt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2609964">//&nbsp;specified&nbsp;type,&nbsp;using&nbsp;p&nbsp;as&nbsp;that&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2610008">func</span>&nbsp;<span class="ident" id="2610013">NewAt</span><span class="op" id="2610018">(</span><span class="ident" id="2610019">typ</span>&nbsp;<span class="ident" id="2610023">Type</span><span class="op" id="2610027">,</span>&nbsp;<span class="ident" id="2610029">p</span>&nbsp;<span class="ident" id="2610031">unsafe</span><span class="op" id="2610037">.</span><span class="ident" id="2610038">Pointer</span><span class="op" id="2610045">)</span>&nbsp;<span class="ident" id="2610047">Value</span>&nbsp;<span class="op" id="2610053">{</span><br>
<span class="lineno">2090</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2610056">fl</span>&nbsp;<span class="op" id="2610059">:=</span>&nbsp;<span class="ident" id="2610062">flag</span><span class="op" id="2610066">(</span><span class="ident" id="2610067">Ptr</span><span class="op" id="2610070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2610073">return</span>&nbsp;<span class="ident" id="2610080">Value</span><span class="op" id="2610085">{</span><span class="ident" id="2610086">typ</span><span class="op" id="2610089">.</span><span class="ident" id="2610090">common</span><span class="op" id="2610096">(</span><span class="op" id="2610097">)</span><span class="op" id="2610098">.</span><span class="ident" id="2610099">ptrTo</span><span class="op" id="2610104">(</span><span class="op" id="2610105">)</span><span class="op" id="2610106">,</span>&nbsp;<span class="ident" id="2610108">p</span><span class="op" id="2610109">,</span>&nbsp;<span class="ident" id="2610111">fl</span><span class="op" id="2610113">}</span><br>
<span class="lineno"></span><span class="op" id="2610115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2610118">//&nbsp;assignTo&nbsp;returns&nbsp;a&nbsp;value&nbsp;v&nbsp;that&nbsp;can&nbsp;be&nbsp;assigned&nbsp;directly&nbsp;to&nbsp;typ.</span><br>
<span class="lineno">2095</span><span class="comment" id="2610186">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;typ.</span><br>
<span class="lineno"></span><span class="comment" id="2610230">//&nbsp;For&nbsp;a&nbsp;conversion&nbsp;to&nbsp;an&nbsp;interface&nbsp;type,&nbsp;target&nbsp;is&nbsp;a&nbsp;suggested&nbsp;scratch&nbsp;space&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="2610316">func</span>&nbsp;<span class="op" id="2610321">(</span><span class="ident" id="2610322">v</span>&nbsp;<span class="ident" id="2610324">Value</span><span class="op" id="2610329">)</span>&nbsp;<span class="ident" id="2610331">assignTo</span><span class="op" id="2610339">(</span><span class="ident" id="2610340">context</span>&nbsp;<span class="builtintype" id="2610348">string</span><span class="op" id="2610354">,</span>&nbsp;<span class="ident" id="2610356">dst</span>&nbsp;<span class="op" id="2610360">*</span><span class="ident" id="2610361">rtype</span><span class="op" id="2610366">,</span>&nbsp;<span class="ident" id="2610368">target</span>&nbsp;<span class="ident" id="2610375">unsafe</span><span class="op" id="2610381">.</span><span class="ident" id="2610382">Pointer</span><span class="op" id="2610389">)</span>&nbsp;<span class="ident" id="2610391">Value</span>&nbsp;<span class="op" id="2610397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2610400">if</span>&nbsp;<span class="ident" id="2610403">v</span><span class="op" id="2610404">.</span><span class="ident" id="2610405">flag</span><span class="op" id="2610409">&amp;</span><span class="ident" id="2610410">flagMethod</span>&nbsp;<span class="op" id="2610421">!=</span>&nbsp;<span class="num" id="2610424">0</span>&nbsp;<span class="op" id="2610426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2610430">v</span>&nbsp;<span class="op" id="2610432">=</span>&nbsp;<span class="ident" id="2610434">makeMethodValue</span><span class="op" id="2610449">(</span><span class="ident" id="2610450">context</span><span class="op" id="2610457">,</span>&nbsp;<span class="ident" id="2610459">v</span><span class="op" id="2610460">)</span><br>
<span class="lineno">2100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2610463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2610467">switch</span>&nbsp;<span class="op" id="2610474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2610477">case</span>&nbsp;<span class="ident" id="2610482">directlyAssignable</span><span class="op" id="2610500">(</span><span class="ident" id="2610501">dst</span><span class="op" id="2610504">,</span>&nbsp;<span class="ident" id="2610506">v</span><span class="op" id="2610507">.</span><span class="ident" id="2610508">typ</span><span class="op" id="2610511">)</span><span class="op" id="2610512">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2610516">//&nbsp;Overwrite&nbsp;type&nbsp;so&nbsp;that&nbsp;they&nbsp;match.</span><br>
<span class="lineno">2105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2610556">//&nbsp;Same&nbsp;memory&nbsp;layout,&nbsp;so&nbsp;no&nbsp;harm&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2610598">v</span><span class="op" id="2610599">.</span><span class="ident" id="2610600">typ</span>&nbsp;<span class="op" id="2610604">=</span>&nbsp;<span class="ident" id="2610606">dst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2610612">fl</span>&nbsp;<span class="op" id="2610615">:=</span>&nbsp;<span class="ident" id="2610618">v</span><span class="op" id="2610619">.</span><span class="ident" id="2610620">flag</span>&nbsp;<span class="op" id="2610625">&amp;</span>&nbsp;<span class="op" id="2610627">(</span><span class="ident" id="2610628">flagRO</span>&nbsp;<span class="op" id="2610635">|</span>&nbsp;<span class="ident" id="2610637">flagAddr</span>&nbsp;<span class="op" id="2610646">|</span>&nbsp;<span class="ident" id="2610648">flagIndir</span><span class="op" id="2610657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2610661">fl</span>&nbsp;<span class="op" id="2610664">|=</span>&nbsp;<span class="ident" id="2610667">flag</span><span class="op" id="2610671">(</span><span class="ident" id="2610672">dst</span><span class="op" id="2610675">.</span><span class="ident" id="2610676">Kind</span><span class="op" id="2610680">(</span><span class="op" id="2610681">)</span><span class="op" id="2610682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2610686">return</span>&nbsp;<span class="ident" id="2610693">Value</span><span class="op" id="2610698">{</span><span class="ident" id="2610699">dst</span><span class="op" id="2610702">,</span>&nbsp;<span class="ident" id="2610704">v</span><span class="op" id="2610705">.</span><span class="ident" id="2610706">ptr</span><span class="op" id="2610709">,</span>&nbsp;<span class="ident" id="2610711">fl</span><span class="op" id="2610713">}</span><br>
<span class="lineno">2110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2610717">case</span>&nbsp;<span class="ident" id="2610722">implements</span><span class="op" id="2610732">(</span><span class="ident" id="2610733">dst</span><span class="op" id="2610736">,</span>&nbsp;<span class="ident" id="2610738">v</span><span class="op" id="2610739">.</span><span class="ident" id="2610740">typ</span><span class="op" id="2610743">)</span><span class="op" id="2610744">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2610748">if</span>&nbsp;<span class="ident" id="2610751">target</span>&nbsp;<span class="op" id="2610758">==</span>&nbsp;<span class="ident" id="2610761">nil</span>&nbsp;<span class="op" id="2610765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2610770">target</span>&nbsp;<span class="op" id="2610777">=</span>&nbsp;<span class="ident" id="2610779">unsafe_New</span><span class="op" id="2610789">(</span><span class="ident" id="2610790">dst</span><span class="op" id="2610793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2610797">}</span><br>
<span class="lineno">2115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2610801">x</span>&nbsp;<span class="op" id="2610803">:=</span>&nbsp;<span class="ident" id="2610806">valueInterface</span><span class="op" id="2610820">(</span><span class="ident" id="2610821">v</span><span class="op" id="2610822">,</span>&nbsp;<span class="builtintype" id="2610824">false</span><span class="op" id="2610829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2610833">if</span>&nbsp;<span class="ident" id="2610836">dst</span><span class="op" id="2610839">.</span><span class="ident" id="2610840">NumMethod</span><span class="op" id="2610849">(</span><span class="op" id="2610850">)</span>&nbsp;<span class="op" id="2610852">==</span>&nbsp;<span class="num" id="2610855">0</span>&nbsp;<span class="op" id="2610857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2610862">*</span><span class="op" id="2610863">(</span><span class="op" id="2610864">*</span><span class="keyword" id="2610865">interface</span><span class="op" id="2610874">{</span><span class="op" id="2610875">}</span><span class="op" id="2610876">)</span><span class="op" id="2610877">(</span><span class="ident" id="2610878">target</span><span class="op" id="2610884">)</span>&nbsp;<span class="op" id="2610886">=</span>&nbsp;<span class="ident" id="2610888">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2610892">}</span>&nbsp;<span class="keyword" id="2610894">else</span>&nbsp;<span class="op" id="2610899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2610904">ifaceE2I</span><span class="op" id="2610912">(</span><span class="ident" id="2610913">dst</span><span class="op" id="2610916">,</span>&nbsp;<span class="ident" id="2610918">x</span><span class="op" id="2610919">,</span>&nbsp;<span class="ident" id="2610921">target</span><span class="op" id="2610927">)</span><br>
<span class="lineno">2120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2610931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2610935">return</span>&nbsp;<span class="ident" id="2610942">Value</span><span class="op" id="2610947">{</span><span class="ident" id="2610948">dst</span><span class="op" id="2610951">,</span>&nbsp;<span class="ident" id="2610953">target</span><span class="op" id="2610959">,</span>&nbsp;<span class="ident" id="2610961">flagIndir</span>&nbsp;<span class="op" id="2610971">|</span>&nbsp;<span class="ident" id="2610973">flag</span><span class="op" id="2610977">(</span><span class="ident" id="2610978">Interface</span><span class="op" id="2610987">)</span><span class="op" id="2610988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2610991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2610995">//&nbsp;Failed.</span><br>
<span class="lineno">2125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2611007">panic</span><span class="op" id="2611012">(</span><span class="ident" id="2611013">context</span>&nbsp;<span class="op" id="2611021">+</span>&nbsp;<span class="string" id="2611023">&#34;:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2611042">+</span>&nbsp;<span class="ident" id="2611044">v</span><span class="op" id="2611045">.</span><span class="ident" id="2611046">typ</span><span class="op" id="2611049">.</span><span class="ident" id="2611050">String</span><span class="op" id="2611056">(</span><span class="op" id="2611057">)</span>&nbsp;<span class="op" id="2611059">+</span>&nbsp;<span class="string" id="2611061">&#34;&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2611091">+</span>&nbsp;<span class="ident" id="2611093">dst</span><span class="op" id="2611096">.</span><span class="ident" id="2611097">String</span><span class="op" id="2611103">(</span><span class="op" id="2611104">)</span><span class="op" id="2611105">)</span><br>
<span class="lineno"></span><span class="op" id="2611107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2611110">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;value&nbsp;v&nbsp;converted&nbsp;to&nbsp;type&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2611162">//&nbsp;If&nbsp;the&nbsp;usual&nbsp;Go&nbsp;conversion&nbsp;rules&nbsp;do&nbsp;not&nbsp;allow&nbsp;conversion</span><br>
<span class="lineno">2130</span><span class="comment" id="2611222">//&nbsp;of&nbsp;the&nbsp;value&nbsp;v&nbsp;to&nbsp;type&nbsp;t,&nbsp;Convert&nbsp;panics.</span><br>
<span class="lineno"></span><span class="keyword" id="2611267">func</span>&nbsp;<span class="op" id="2611272">(</span><span class="ident" id="2611273">v</span>&nbsp;<span class="ident" id="2611275">Value</span><span class="op" id="2611280">)</span>&nbsp;<span class="ident" id="2611282">Convert</span><span class="op" id="2611289">(</span><span class="ident" id="2611290">t</span>&nbsp;<span class="ident" id="2611292">Type</span><span class="op" id="2611296">)</span>&nbsp;<span class="ident" id="2611298">Value</span>&nbsp;<span class="op" id="2611304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611307">if</span>&nbsp;<span class="ident" id="2611310">v</span><span class="op" id="2611311">.</span><span class="ident" id="2611312">flag</span><span class="op" id="2611316">&amp;</span><span class="ident" id="2611317">flagMethod</span>&nbsp;<span class="op" id="2611328">!=</span>&nbsp;<span class="num" id="2611331">0</span>&nbsp;<span class="op" id="2611333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2611337">v</span>&nbsp;<span class="op" id="2611339">=</span>&nbsp;<span class="ident" id="2611341">makeMethodValue</span><span class="op" id="2611356">(</span><span class="string" id="2611357">&#34;Convert&#34;</span><span class="op" id="2611366">,</span>&nbsp;<span class="ident" id="2611368">v</span><span class="op" id="2611369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2611372">}</span><br>
<span class="lineno">2135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2611375">op</span>&nbsp;<span class="op" id="2611378">:=</span>&nbsp;<span class="ident" id="2611381">convertOp</span><span class="op" id="2611390">(</span><span class="ident" id="2611391">t</span><span class="op" id="2611392">.</span><span class="ident" id="2611393">common</span><span class="op" id="2611399">(</span><span class="op" id="2611400">)</span><span class="op" id="2611401">,</span>&nbsp;<span class="ident" id="2611403">v</span><span class="op" id="2611404">.</span><span class="ident" id="2611405">typ</span><span class="op" id="2611408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611411">if</span>&nbsp;<span class="ident" id="2611414">op</span>&nbsp;<span class="op" id="2611417">==</span>&nbsp;<span class="ident" id="2611420">nil</span>&nbsp;<span class="op" id="2611424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2611428">panic</span><span class="op" id="2611433">(</span><span class="string" id="2611434">&#34;reflect.Value.Convert:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2611474">+</span>&nbsp;<span class="ident" id="2611476">v</span><span class="op" id="2611477">.</span><span class="ident" id="2611478">typ</span><span class="op" id="2611481">.</span><span class="ident" id="2611482">String</span><span class="op" id="2611488">(</span><span class="op" id="2611489">)</span>&nbsp;<span class="op" id="2611491">+</span>&nbsp;<span class="string" id="2611493">&#34;&nbsp;cannot&nbsp;be&nbsp;converted&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2611525">+</span>&nbsp;<span class="ident" id="2611527">t</span><span class="op" id="2611528">.</span><span class="ident" id="2611529">String</span><span class="op" id="2611535">(</span><span class="op" id="2611536">)</span><span class="op" id="2611537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2611540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611543">return</span>&nbsp;<span class="ident" id="2611550">op</span><span class="op" id="2611552">(</span><span class="ident" id="2611553">v</span><span class="op" id="2611554">,</span>&nbsp;<span class="ident" id="2611556">t</span><span class="op" id="2611557">)</span><br>
<span class="lineno">2140</span><span class="op" id="2611559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2611562">//&nbsp;convertOp&nbsp;returns&nbsp;the&nbsp;function&nbsp;to&nbsp;convert&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;src</span><br>
<span class="lineno"></span><span class="comment" id="2611627">//&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;dst.&nbsp;If&nbsp;the&nbsp;conversion&nbsp;is&nbsp;illegal,&nbsp;convertOp&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2611707">func</span>&nbsp;<span class="ident" id="2611712">convertOp</span><span class="op" id="2611721">(</span><span class="ident" id="2611722">dst</span><span class="op" id="2611725">,</span>&nbsp;<span class="ident" id="2611727">src</span>&nbsp;<span class="op" id="2611731">*</span><span class="ident" id="2611732">rtype</span><span class="op" id="2611737">)</span>&nbsp;<span class="keyword" id="2611739">func</span><span class="op" id="2611743">(</span><span class="ident" id="2611744">Value</span><span class="op" id="2611749">,</span>&nbsp;<span class="ident" id="2611751">Type</span><span class="op" id="2611755">)</span>&nbsp;<span class="ident" id="2611757">Value</span>&nbsp;<span class="op" id="2611763">{</span><br>
<span class="lineno">2145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611766">switch</span>&nbsp;<span class="ident" id="2611773">src</span><span class="op" id="2611776">.</span><span class="ident" id="2611777">Kind</span><span class="op" id="2611781">(</span><span class="op" id="2611782">)</span>&nbsp;<span class="op" id="2611784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611787">case</span>&nbsp;<span class="ident" id="2611792">Int</span><span class="op" id="2611795">,</span>&nbsp;<span class="ident" id="2611797">Int8</span><span class="op" id="2611801">,</span>&nbsp;<span class="ident" id="2611803">Int16</span><span class="op" id="2611808">,</span>&nbsp;<span class="ident" id="2611810">Int32</span><span class="op" id="2611815">,</span>&nbsp;<span class="ident" id="2611817">Int64</span><span class="op" id="2611822">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611826">switch</span>&nbsp;<span class="ident" id="2611833">dst</span><span class="op" id="2611836">.</span><span class="ident" id="2611837">Kind</span><span class="op" id="2611841">(</span><span class="op" id="2611842">)</span>&nbsp;<span class="op" id="2611844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611848">case</span>&nbsp;<span class="ident" id="2611853">Int</span><span class="op" id="2611856">,</span>&nbsp;<span class="ident" id="2611858">Int8</span><span class="op" id="2611862">,</span>&nbsp;<span class="ident" id="2611864">Int16</span><span class="op" id="2611869">,</span>&nbsp;<span class="ident" id="2611871">Int32</span><span class="op" id="2611876">,</span>&nbsp;<span class="ident" id="2611878">Int64</span><span class="op" id="2611883">,</span>&nbsp;<span class="ident" id="2611885">Uint</span><span class="op" id="2611889">,</span>&nbsp;<span class="ident" id="2611891">Uint8</span><span class="op" id="2611896">,</span>&nbsp;<span class="ident" id="2611898">Uint16</span><span class="op" id="2611904">,</span>&nbsp;<span class="ident" id="2611906">Uint32</span><span class="op" id="2611912">,</span>&nbsp;<span class="ident" id="2611914">Uint64</span><span class="op" id="2611920">,</span>&nbsp;<span class="ident" id="2611922">Uintptr</span><span class="op" id="2611929">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611934">return</span>&nbsp;<span class="ident" id="2611941">cvtInt</span><br>
<span class="lineno">2150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611950">case</span>&nbsp;<span class="ident" id="2611955">Float32</span><span class="op" id="2611962">,</span>&nbsp;<span class="ident" id="2611964">Float64</span><span class="op" id="2611971">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611976">return</span>&nbsp;<span class="ident" id="2611983">cvtIntFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611997">case</span>&nbsp;<span class="ident" id="2612002">String</span><span class="op" id="2612008">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612013">return</span>&nbsp;<span class="ident" id="2612020">cvtIntString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2612035">}</span><br>
<span class="lineno">2155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612039">case</span>&nbsp;<span class="ident" id="2612044">Uint</span><span class="op" id="2612048">,</span>&nbsp;<span class="ident" id="2612050">Uint8</span><span class="op" id="2612055">,</span>&nbsp;<span class="ident" id="2612057">Uint16</span><span class="op" id="2612063">,</span>&nbsp;<span class="ident" id="2612065">Uint32</span><span class="op" id="2612071">,</span>&nbsp;<span class="ident" id="2612073">Uint64</span><span class="op" id="2612079">,</span>&nbsp;<span class="ident" id="2612081">Uintptr</span><span class="op" id="2612088">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612092">switch</span>&nbsp;<span class="ident" id="2612099">dst</span><span class="op" id="2612102">.</span><span class="ident" id="2612103">Kind</span><span class="op" id="2612107">(</span><span class="op" id="2612108">)</span>&nbsp;<span class="op" id="2612110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612114">case</span>&nbsp;<span class="ident" id="2612119">Int</span><span class="op" id="2612122">,</span>&nbsp;<span class="ident" id="2612124">Int8</span><span class="op" id="2612128">,</span>&nbsp;<span class="ident" id="2612130">Int16</span><span class="op" id="2612135">,</span>&nbsp;<span class="ident" id="2612137">Int32</span><span class="op" id="2612142">,</span>&nbsp;<span class="ident" id="2612144">Int64</span><span class="op" id="2612149">,</span>&nbsp;<span class="ident" id="2612151">Uint</span><span class="op" id="2612155">,</span>&nbsp;<span class="ident" id="2612157">Uint8</span><span class="op" id="2612162">,</span>&nbsp;<span class="ident" id="2612164">Uint16</span><span class="op" id="2612170">,</span>&nbsp;<span class="ident" id="2612172">Uint32</span><span class="op" id="2612178">,</span>&nbsp;<span class="ident" id="2612180">Uint64</span><span class="op" id="2612186">,</span>&nbsp;<span class="ident" id="2612188">Uintptr</span><span class="op" id="2612195">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612200">return</span>&nbsp;<span class="ident" id="2612207">cvtUint</span><br>
<span class="lineno">2160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612217">case</span>&nbsp;<span class="ident" id="2612222">Float32</span><span class="op" id="2612229">,</span>&nbsp;<span class="ident" id="2612231">Float64</span><span class="op" id="2612238">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612243">return</span>&nbsp;<span class="ident" id="2612250">cvtUintFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612265">case</span>&nbsp;<span class="ident" id="2612270">String</span><span class="op" id="2612276">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612281">return</span>&nbsp;<span class="ident" id="2612288">cvtUintString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2612304">}</span><br>
<span class="lineno">2165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612308">case</span>&nbsp;<span class="ident" id="2612313">Float32</span><span class="op" id="2612320">,</span>&nbsp;<span class="ident" id="2612322">Float64</span><span class="op" id="2612329">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612333">switch</span>&nbsp;<span class="ident" id="2612340">dst</span><span class="op" id="2612343">.</span><span class="ident" id="2612344">Kind</span><span class="op" id="2612348">(</span><span class="op" id="2612349">)</span>&nbsp;<span class="op" id="2612351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612355">case</span>&nbsp;<span class="ident" id="2612360">Int</span><span class="op" id="2612363">,</span>&nbsp;<span class="ident" id="2612365">Int8</span><span class="op" id="2612369">,</span>&nbsp;<span class="ident" id="2612371">Int16</span><span class="op" id="2612376">,</span>&nbsp;<span class="ident" id="2612378">Int32</span><span class="op" id="2612383">,</span>&nbsp;<span class="ident" id="2612385">Int64</span><span class="op" id="2612390">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612395">return</span>&nbsp;<span class="ident" id="2612402">cvtFloatInt</span><br>
<span class="lineno">2170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612416">case</span>&nbsp;<span class="ident" id="2612421">Uint</span><span class="op" id="2612425">,</span>&nbsp;<span class="ident" id="2612427">Uint8</span><span class="op" id="2612432">,</span>&nbsp;<span class="ident" id="2612434">Uint16</span><span class="op" id="2612440">,</span>&nbsp;<span class="ident" id="2612442">Uint32</span><span class="op" id="2612448">,</span>&nbsp;<span class="ident" id="2612450">Uint64</span><span class="op" id="2612456">,</span>&nbsp;<span class="ident" id="2612458">Uintptr</span><span class="op" id="2612465">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612470">return</span>&nbsp;<span class="ident" id="2612477">cvtFloatUint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612492">case</span>&nbsp;<span class="ident" id="2612497">Float32</span><span class="op" id="2612504">,</span>&nbsp;<span class="ident" id="2612506">Float64</span><span class="op" id="2612513">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612518">return</span>&nbsp;<span class="ident" id="2612525">cvtFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2612536">}</span><br>
<span class="lineno">2175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612540">case</span>&nbsp;<span class="ident" id="2612545">Complex64</span><span class="op" id="2612554">,</span>&nbsp;<span class="ident" id="2612556">Complex128</span><span class="op" id="2612566">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612570">switch</span>&nbsp;<span class="ident" id="2612577">dst</span><span class="op" id="2612580">.</span><span class="ident" id="2612581">Kind</span><span class="op" id="2612585">(</span><span class="op" id="2612586">)</span>&nbsp;<span class="op" id="2612588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612592">case</span>&nbsp;<span class="ident" id="2612597">Complex64</span><span class="op" id="2612606">,</span>&nbsp;<span class="ident" id="2612608">Complex128</span><span class="op" id="2612618">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612623">return</span>&nbsp;<span class="ident" id="2612630">cvtComplex</span><br>
<span class="lineno">2180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2612643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612647">case</span>&nbsp;<span class="ident" id="2612652">String</span><span class="op" id="2612658">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612662">if</span>&nbsp;<span class="ident" id="2612665">dst</span><span class="op" id="2612668">.</span><span class="ident" id="2612669">Kind</span><span class="op" id="2612673">(</span><span class="op" id="2612674">)</span>&nbsp;<span class="op" id="2612676">==</span>&nbsp;<span class="ident" id="2612679">Slice</span>&nbsp;<span class="op" id="2612685">&amp;&amp;</span>&nbsp;<span class="ident" id="2612688">dst</span><span class="op" id="2612691">.</span><span class="ident" id="2612692">Elem</span><span class="op" id="2612696">(</span><span class="op" id="2612697">)</span><span class="op" id="2612698">.</span><span class="ident" id="2612699">PkgPath</span><span class="op" id="2612706">(</span><span class="op" id="2612707">)</span>&nbsp;<span class="op" id="2612709">==</span>&nbsp;<span class="string" id="2612712">&#34;&#34;</span>&nbsp;<span class="op" id="2612715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612720">switch</span>&nbsp;<span class="ident" id="2612727">dst</span><span class="op" id="2612730">.</span><span class="ident" id="2612731">Elem</span><span class="op" id="2612735">(</span><span class="op" id="2612736">)</span><span class="op" id="2612737">.</span><span class="ident" id="2612738">Kind</span><span class="op" id="2612742">(</span><span class="op" id="2612743">)</span>&nbsp;<span class="op" id="2612745">{</span><br>
<span class="lineno">2185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612750">case</span>&nbsp;<span class="ident" id="2612755">Uint8</span><span class="op" id="2612760">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612766">return</span>&nbsp;<span class="ident" id="2612773">cvtStringBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612791">case</span>&nbsp;<span class="ident" id="2612796">Int32</span><span class="op" id="2612801">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612807">return</span>&nbsp;<span class="ident" id="2612814">cvtStringRunes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2612832">}</span><br>
<span class="lineno">2190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2612836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612840">case</span>&nbsp;<span class="ident" id="2612845">Slice</span><span class="op" id="2612850">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612854">if</span>&nbsp;<span class="ident" id="2612857">dst</span><span class="op" id="2612860">.</span><span class="ident" id="2612861">Kind</span><span class="op" id="2612865">(</span><span class="op" id="2612866">)</span>&nbsp;<span class="op" id="2612868">==</span>&nbsp;<span class="ident" id="2612871">String</span>&nbsp;<span class="op" id="2612878">&amp;&amp;</span>&nbsp;<span class="ident" id="2612881">src</span><span class="op" id="2612884">.</span><span class="ident" id="2612885">Elem</span><span class="op" id="2612889">(</span><span class="op" id="2612890">)</span><span class="op" id="2612891">.</span><span class="ident" id="2612892">PkgPath</span><span class="op" id="2612899">(</span><span class="op" id="2612900">)</span>&nbsp;<span class="op" id="2612902">==</span>&nbsp;<span class="string" id="2612905">&#34;&#34;</span>&nbsp;<span class="op" id="2612908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612913">switch</span>&nbsp;<span class="ident" id="2612920">src</span><span class="op" id="2612923">.</span><span class="ident" id="2612924">Elem</span><span class="op" id="2612928">(</span><span class="op" id="2612929">)</span><span class="op" id="2612930">.</span><span class="ident" id="2612931">Kind</span><span class="op" id="2612935">(</span><span class="op" id="2612936">)</span>&nbsp;<span class="op" id="2612938">{</span><br>
<span class="lineno">2195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612943">case</span>&nbsp;<span class="ident" id="2612948">Uint8</span><span class="op" id="2612953">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612959">return</span>&nbsp;<span class="ident" id="2612966">cvtBytesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612984">case</span>&nbsp;<span class="ident" id="2612989">Int32</span><span class="op" id="2612994">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613000">return</span>&nbsp;<span class="ident" id="2613007">cvtRunesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2613025">}</span><br>
<span class="lineno">2200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2613029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2613032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2613036">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;have&nbsp;same&nbsp;underlying&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613079">if</span>&nbsp;<span class="ident" id="2613082">haveIdenticalUnderlyingType</span><span class="op" id="2613109">(</span><span class="ident" id="2613110">dst</span><span class="op" id="2613113">,</span>&nbsp;<span class="ident" id="2613115">src</span><span class="op" id="2613118">)</span>&nbsp;<span class="op" id="2613120">{</span><br>
<span class="lineno">2205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613124">return</span>&nbsp;<span class="ident" id="2613131">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2613142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2613146">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;are&nbsp;unnamed&nbsp;pointer&nbsp;types&nbsp;with&nbsp;same&nbsp;underlying&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613220">if</span>&nbsp;<span class="ident" id="2613223">dst</span><span class="op" id="2613226">.</span><span class="ident" id="2613227">Kind</span><span class="op" id="2613231">(</span><span class="op" id="2613232">)</span>&nbsp;<span class="op" id="2613234">==</span>&nbsp;<span class="ident" id="2613237">Ptr</span>&nbsp;<span class="op" id="2613241">&amp;&amp;</span>&nbsp;<span class="ident" id="2613244">dst</span><span class="op" id="2613247">.</span><span class="ident" id="2613248">Name</span><span class="op" id="2613252">(</span><span class="op" id="2613253">)</span>&nbsp;<span class="op" id="2613255">==</span>&nbsp;<span class="string" id="2613258">&#34;&#34;</span>&nbsp;<span class="op" id="2613261">&amp;&amp;</span><br>
<span class="lineno">2210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613266">src</span><span class="op" id="2613269">.</span><span class="ident" id="2613270">Kind</span><span class="op" id="2613274">(</span><span class="op" id="2613275">)</span>&nbsp;<span class="op" id="2613277">==</span>&nbsp;<span class="ident" id="2613280">Ptr</span>&nbsp;<span class="op" id="2613284">&amp;&amp;</span>&nbsp;<span class="ident" id="2613287">src</span><span class="op" id="2613290">.</span><span class="ident" id="2613291">Name</span><span class="op" id="2613295">(</span><span class="op" id="2613296">)</span>&nbsp;<span class="op" id="2613298">==</span>&nbsp;<span class="string" id="2613301">&#34;&#34;</span>&nbsp;<span class="op" id="2613304">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613309">haveIdenticalUnderlyingType</span><span class="op" id="2613336">(</span><span class="ident" id="2613337">dst</span><span class="op" id="2613340">.</span><span class="ident" id="2613341">Elem</span><span class="op" id="2613345">(</span><span class="op" id="2613346">)</span><span class="op" id="2613347">.</span><span class="ident" id="2613348">common</span><span class="op" id="2613354">(</span><span class="op" id="2613355">)</span><span class="op" id="2613356">,</span>&nbsp;<span class="ident" id="2613358">src</span><span class="op" id="2613361">.</span><span class="ident" id="2613362">Elem</span><span class="op" id="2613366">(</span><span class="op" id="2613367">)</span><span class="op" id="2613368">.</span><span class="ident" id="2613369">common</span><span class="op" id="2613375">(</span><span class="op" id="2613376">)</span><span class="op" id="2613377">)</span>&nbsp;<span class="op" id="2613379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613383">return</span>&nbsp;<span class="ident" id="2613390">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2613401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613405">if</span>&nbsp;<span class="ident" id="2613408">implements</span><span class="op" id="2613418">(</span><span class="ident" id="2613419">dst</span><span class="op" id="2613422">,</span>&nbsp;<span class="ident" id="2613424">src</span><span class="op" id="2613427">)</span>&nbsp;<span class="op" id="2613429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613433">if</span>&nbsp;<span class="ident" id="2613436">src</span><span class="op" id="2613439">.</span><span class="ident" id="2613440">Kind</span><span class="op" id="2613444">(</span><span class="op" id="2613445">)</span>&nbsp;<span class="op" id="2613447">==</span>&nbsp;<span class="ident" id="2613450">Interface</span>&nbsp;<span class="op" id="2613460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613465">return</span>&nbsp;<span class="ident" id="2613472">cvtI2I</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2613481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613485">return</span>&nbsp;<span class="ident" id="2613492">cvtT2I</span><br>
<span class="lineno">2220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2613500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613504">return</span>&nbsp;<span class="ident" id="2613511">nil</span><br>
<span class="lineno"></span><span class="op" id="2613515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2225</span><span class="comment" id="2613518">//&nbsp;makeInt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;bits&nbsp;(possibly&nbsp;truncated),</span><br>
<span class="lineno"></span><span class="comment" id="2613591">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2613636">func</span>&nbsp;<span class="ident" id="2613641">makeInt</span><span class="op" id="2613648">(</span><span class="ident" id="2613649">f</span>&nbsp;<span class="ident" id="2613651">flag</span><span class="op" id="2613655">,</span>&nbsp;<span class="ident" id="2613657">bits</span>&nbsp;<span class="ident" id="2613662">uint64</span><span class="op" id="2613668">,</span>&nbsp;<span class="ident" id="2613670">t</span>&nbsp;<span class="ident" id="2613672">Type</span><span class="op" id="2613676">)</span>&nbsp;<span class="ident" id="2613678">Value</span>&nbsp;<span class="op" id="2613684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613687">typ</span>&nbsp;<span class="op" id="2613691">:=</span>&nbsp;<span class="ident" id="2613694">t</span><span class="op" id="2613695">.</span><span class="ident" id="2613696">common</span><span class="op" id="2613702">(</span><span class="op" id="2613703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613706">ptr</span>&nbsp;<span class="op" id="2613710">:=</span>&nbsp;<span class="ident" id="2613713">unsafe_New</span><span class="op" id="2613723">(</span><span class="ident" id="2613724">typ</span><span class="op" id="2613727">)</span><br>
<span class="lineno">2230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613730">switch</span>&nbsp;<span class="ident" id="2613737">typ</span><span class="op" id="2613740">.</span><span class="ident" id="2613741">size</span>&nbsp;<span class="op" id="2613746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613749">case</span>&nbsp;<span class="num" id="2613754">1</span><span class="op" id="2613755">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2613759">*</span><span class="op" id="2613760">(</span><span class="op" id="2613761">*</span><span class="builtintype" id="2613762">uint8</span><span class="op" id="2613767">)</span><span class="op" id="2613768">(</span><span class="ident" id="2613769">unsafe</span><span class="op" id="2613775">.</span><span class="ident" id="2613776">Pointer</span><span class="op" id="2613783">(</span><span class="ident" id="2613784">ptr</span><span class="op" id="2613787">)</span><span class="op" id="2613788">)</span>&nbsp;<span class="op" id="2613790">=</span>&nbsp;<span class="builtintype" id="2613792">uint8</span><span class="op" id="2613797">(</span><span class="ident" id="2613798">bits</span><span class="op" id="2613802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613805">case</span>&nbsp;<span class="num" id="2613810">2</span><span class="op" id="2613811">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2613815">*</span><span class="op" id="2613816">(</span><span class="op" id="2613817">*</span><span class="builtintype" id="2613818">uint16</span><span class="op" id="2613824">)</span><span class="op" id="2613825">(</span><span class="ident" id="2613826">unsafe</span><span class="op" id="2613832">.</span><span class="ident" id="2613833">Pointer</span><span class="op" id="2613840">(</span><span class="ident" id="2613841">ptr</span><span class="op" id="2613844">)</span><span class="op" id="2613845">)</span>&nbsp;<span class="op" id="2613847">=</span>&nbsp;<span class="builtintype" id="2613849">uint16</span><span class="op" id="2613855">(</span><span class="ident" id="2613856">bits</span><span class="op" id="2613860">)</span><br>
<span class="lineno">2235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613863">case</span>&nbsp;<span class="num" id="2613868">4</span><span class="op" id="2613869">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2613873">*</span><span class="op" id="2613874">(</span><span class="op" id="2613875">*</span><span class="builtintype" id="2613876">uint32</span><span class="op" id="2613882">)</span><span class="op" id="2613883">(</span><span class="ident" id="2613884">unsafe</span><span class="op" id="2613890">.</span><span class="ident" id="2613891">Pointer</span><span class="op" id="2613898">(</span><span class="ident" id="2613899">ptr</span><span class="op" id="2613902">)</span><span class="op" id="2613903">)</span>&nbsp;<span class="op" id="2613905">=</span>&nbsp;<span class="builtintype" id="2613907">uint32</span><span class="op" id="2613913">(</span><span class="ident" id="2613914">bits</span><span class="op" id="2613918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613921">case</span>&nbsp;<span class="num" id="2613926">8</span><span class="op" id="2613927">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2613931">*</span><span class="op" id="2613932">(</span><span class="op" id="2613933">*</span><span class="ident" id="2613934">uint64</span><span class="op" id="2613940">)</span><span class="op" id="2613941">(</span><span class="ident" id="2613942">unsafe</span><span class="op" id="2613948">.</span><span class="ident" id="2613949">Pointer</span><span class="op" id="2613956">(</span><span class="ident" id="2613957">ptr</span><span class="op" id="2613960">)</span><span class="op" id="2613961">)</span>&nbsp;<span class="op" id="2613963">=</span>&nbsp;<span class="ident" id="2613965">bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2613971">}</span><br>
<span class="lineno">2240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613974">return</span>&nbsp;<span class="ident" id="2613981">Value</span><span class="op" id="2613986">{</span><span class="ident" id="2613987">typ</span><span class="op" id="2613990">,</span>&nbsp;<span class="ident" id="2613992">ptr</span><span class="op" id="2613995">,</span>&nbsp;<span class="ident" id="2613997">f</span>&nbsp;<span class="op" id="2613999">|</span>&nbsp;<span class="ident" id="2614001">flagIndir</span>&nbsp;<span class="op" id="2614011">|</span>&nbsp;<span class="ident" id="2614013">flag</span><span class="op" id="2614017">(</span><span class="ident" id="2614018">typ</span><span class="op" id="2614021">.</span><span class="ident" id="2614022">Kind</span><span class="op" id="2614026">(</span><span class="op" id="2614027">)</span><span class="op" id="2614028">)</span><span class="op" id="2614029">}</span><br>
<span class="lineno"></span><span class="op" id="2614031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2614034">//&nbsp;makeFloat&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;float32),</span><br>
<span class="lineno"></span><span class="comment" id="2614117">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;float32&nbsp;or&nbsp;float64&nbsp;type.</span><br>
<span class="lineno">2245</span><span class="keyword" id="2614158">func</span>&nbsp;<span class="ident" id="2614163">makeFloat</span><span class="op" id="2614172">(</span><span class="ident" id="2614173">f</span>&nbsp;<span class="ident" id="2614175">flag</span><span class="op" id="2614179">,</span>&nbsp;<span class="ident" id="2614181">v</span>&nbsp;<span class="builtintype" id="2614183">float64</span><span class="op" id="2614190">,</span>&nbsp;<span class="ident" id="2614192">t</span>&nbsp;<span class="ident" id="2614194">Type</span><span class="op" id="2614198">)</span>&nbsp;<span class="ident" id="2614200">Value</span>&nbsp;<span class="op" id="2614206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614209">typ</span>&nbsp;<span class="op" id="2614213">:=</span>&nbsp;<span class="ident" id="2614216">t</span><span class="op" id="2614217">.</span><span class="ident" id="2614218">common</span><span class="op" id="2614224">(</span><span class="op" id="2614225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614228">ptr</span>&nbsp;<span class="op" id="2614232">:=</span>&nbsp;<span class="ident" id="2614235">unsafe_New</span><span class="op" id="2614245">(</span><span class="ident" id="2614246">typ</span><span class="op" id="2614249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2614252">switch</span>&nbsp;<span class="ident" id="2614259">typ</span><span class="op" id="2614262">.</span><span class="ident" id="2614263">size</span>&nbsp;<span class="op" id="2614268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2614271">case</span>&nbsp;<span class="num" id="2614276">4</span><span class="op" id="2614277">:</span><br>
<span class="lineno">2250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2614281">*</span><span class="op" id="2614282">(</span><span class="op" id="2614283">*</span><span class="builtintype" id="2614284">float32</span><span class="op" id="2614291">)</span><span class="op" id="2614292">(</span><span class="ident" id="2614293">unsafe</span><span class="op" id="2614299">.</span><span class="ident" id="2614300">Pointer</span><span class="op" id="2614307">(</span><span class="ident" id="2614308">ptr</span><span class="op" id="2614311">)</span><span class="op" id="2614312">)</span>&nbsp;<span class="op" id="2614314">=</span>&nbsp;<span class="builtintype" id="2614316">float32</span><span class="op" id="2614323">(</span><span class="ident" id="2614324">v</span><span class="op" id="2614325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2614328">case</span>&nbsp;<span class="num" id="2614333">8</span><span class="op" id="2614334">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2614338">*</span><span class="op" id="2614339">(</span><span class="op" id="2614340">*</span><span class="builtintype" id="2614341">float64</span><span class="op" id="2614348">)</span><span class="op" id="2614349">(</span><span class="ident" id="2614350">unsafe</span><span class="op" id="2614356">.</span><span class="ident" id="2614357">Pointer</span><span class="op" id="2614364">(</span><span class="ident" id="2614365">ptr</span><span class="op" id="2614368">)</span><span class="op" id="2614369">)</span>&nbsp;<span class="op" id="2614371">=</span>&nbsp;<span class="ident" id="2614373">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2614376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2614379">return</span>&nbsp;<span class="ident" id="2614386">Value</span><span class="op" id="2614391">{</span><span class="ident" id="2614392">typ</span><span class="op" id="2614395">,</span>&nbsp;<span class="ident" id="2614397">ptr</span><span class="op" id="2614400">,</span>&nbsp;<span class="ident" id="2614402">f</span>&nbsp;<span class="op" id="2614404">|</span>&nbsp;<span class="ident" id="2614406">flagIndir</span>&nbsp;<span class="op" id="2614416">|</span>&nbsp;<span class="ident" id="2614418">flag</span><span class="op" id="2614422">(</span><span class="ident" id="2614423">typ</span><span class="op" id="2614426">.</span><span class="ident" id="2614427">Kind</span><span class="op" id="2614431">(</span><span class="op" id="2614432">)</span><span class="op" id="2614433">)</span><span class="op" id="2614434">}</span><br>
<span class="lineno">2255</span><span class="op" id="2614436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2614439">//&nbsp;makeComplex&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;complex64),</span><br>
<span class="lineno"></span><span class="comment" id="2614526">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;complex64&nbsp;or&nbsp;complex128&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2614572">func</span>&nbsp;<span class="ident" id="2614577">makeComplex</span><span class="op" id="2614588">(</span><span class="ident" id="2614589">f</span>&nbsp;<span class="ident" id="2614591">flag</span><span class="op" id="2614595">,</span>&nbsp;<span class="ident" id="2614597">v</span>&nbsp;<span class="builtintype" id="2614599">complex128</span><span class="op" id="2614609">,</span>&nbsp;<span class="ident" id="2614611">t</span>&nbsp;<span class="ident" id="2614613">Type</span><span class="op" id="2614617">)</span>&nbsp;<span class="ident" id="2614619">Value</span>&nbsp;<span class="op" id="2614625">{</span><br>
<span class="lineno">2260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614628">typ</span>&nbsp;<span class="op" id="2614632">:=</span>&nbsp;<span class="ident" id="2614635">t</span><span class="op" id="2614636">.</span><span class="ident" id="2614637">common</span><span class="op" id="2614643">(</span><span class="op" id="2614644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614647">ptr</span>&nbsp;<span class="op" id="2614651">:=</span>&nbsp;<span class="ident" id="2614654">unsafe_New</span><span class="op" id="2614664">(</span><span class="ident" id="2614665">typ</span><span class="op" id="2614668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2614671">switch</span>&nbsp;<span class="ident" id="2614678">typ</span><span class="op" id="2614681">.</span><span class="ident" id="2614682">size</span>&nbsp;<span class="op" id="2614687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2614690">case</span>&nbsp;<span class="num" id="2614695">8</span><span class="op" id="2614696">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2614700">*</span><span class="op" id="2614701">(</span><span class="op" id="2614702">*</span><span class="builtintype" id="2614703">complex64</span><span class="op" id="2614712">)</span><span class="op" id="2614713">(</span><span class="ident" id="2614714">unsafe</span><span class="op" id="2614720">.</span><span class="ident" id="2614721">Pointer</span><span class="op" id="2614728">(</span><span class="ident" id="2614729">ptr</span><span class="op" id="2614732">)</span><span class="op" id="2614733">)</span>&nbsp;<span class="op" id="2614735">=</span>&nbsp;<span class="builtintype" id="2614737">complex64</span><span class="op" id="2614746">(</span><span class="ident" id="2614747">v</span><span class="op" id="2614748">)</span><br>
<span class="lineno">2265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2614751">case</span>&nbsp;<span class="num" id="2614756">16</span><span class="op" id="2614758">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2614762">*</span><span class="op" id="2614763">(</span><span class="op" id="2614764">*</span><span class="builtintype" id="2614765">complex128</span><span class="op" id="2614775">)</span><span class="op" id="2614776">(</span><span class="ident" id="2614777">unsafe</span><span class="op" id="2614783">.</span><span class="ident" id="2614784">Pointer</span><span class="op" id="2614791">(</span><span class="ident" id="2614792">ptr</span><span class="op" id="2614795">)</span><span class="op" id="2614796">)</span>&nbsp;<span class="op" id="2614798">=</span>&nbsp;<span class="ident" id="2614800">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2614803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2614806">return</span>&nbsp;<span class="ident" id="2614813">Value</span><span class="op" id="2614818">{</span><span class="ident" id="2614819">typ</span><span class="op" id="2614822">,</span>&nbsp;<span class="ident" id="2614824">ptr</span><span class="op" id="2614827">,</span>&nbsp;<span class="ident" id="2614829">f</span>&nbsp;<span class="op" id="2614831">|</span>&nbsp;<span class="ident" id="2614833">flagIndir</span>&nbsp;<span class="op" id="2614843">|</span>&nbsp;<span class="ident" id="2614845">flag</span><span class="op" id="2614849">(</span><span class="ident" id="2614850">typ</span><span class="op" id="2614853">.</span><span class="ident" id="2614854">Kind</span><span class="op" id="2614858">(</span><span class="op" id="2614859">)</span><span class="op" id="2614860">)</span><span class="op" id="2614861">}</span><br>
<span class="lineno"></span><span class="op" id="2614863">}</span><br>
<span class="lineno">2270</span><br>
<span class="lineno"></span><span class="keyword" id="2614866">func</span>&nbsp;<span class="ident" id="2614871">makeString</span><span class="op" id="2614881">(</span><span class="ident" id="2614882">f</span>&nbsp;<span class="ident" id="2614884">flag</span><span class="op" id="2614888">,</span>&nbsp;<span class="ident" id="2614890">v</span>&nbsp;<span class="builtintype" id="2614892">string</span><span class="op" id="2614898">,</span>&nbsp;<span class="ident" id="2614900">t</span>&nbsp;<span class="ident" id="2614902">Type</span><span class="op" id="2614906">)</span>&nbsp;<span class="ident" id="2614908">Value</span>&nbsp;<span class="op" id="2614914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614917">ret</span>&nbsp;<span class="op" id="2614921">:=</span>&nbsp;<span class="ident" id="2614924">New</span><span class="op" id="2614927">(</span><span class="ident" id="2614928">t</span><span class="op" id="2614929">)</span><span class="op" id="2614930">.</span><span class="ident" id="2614931">Elem</span><span class="op" id="2614935">(</span><span class="op" id="2614936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614939">ret</span><span class="op" id="2614942">.</span><span class="ident" id="2614943">SetString</span><span class="op" id="2614952">(</span><span class="ident" id="2614953">v</span><span class="op" id="2614954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614957">ret</span><span class="op" id="2614960">.</span><span class="ident" id="2614961">flag</span>&nbsp;<span class="op" id="2614966">=</span>&nbsp;<span class="ident" id="2614968">ret</span><span class="op" id="2614971">.</span><span class="ident" id="2614972">flag</span><span class="op" id="2614976">&amp;^</span><span class="ident" id="2614978">flagAddr</span>&nbsp;<span class="op" id="2614987">|</span>&nbsp;<span class="ident" id="2614989">f</span><br>
<span class="lineno">2275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2614992">return</span>&nbsp;<span class="ident" id="2614999">ret</span><br>
<span class="lineno"></span><span class="op" id="2615003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2615006">func</span>&nbsp;<span class="ident" id="2615011">makeBytes</span><span class="op" id="2615020">(</span><span class="ident" id="2615021">f</span>&nbsp;<span class="ident" id="2615023">flag</span><span class="op" id="2615027">,</span>&nbsp;<span class="ident" id="2615029">v</span>&nbsp;<span class="op" id="2615031">[</span><span class="op" id="2615032">]</span><span class="builtintype" id="2615033">byte</span><span class="op" id="2615037">,</span>&nbsp;<span class="ident" id="2615039">t</span>&nbsp;<span class="ident" id="2615041">Type</span><span class="op" id="2615045">)</span>&nbsp;<span class="ident" id="2615047">Value</span>&nbsp;<span class="op" id="2615053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2615056">ret</span>&nbsp;<span class="op" id="2615060">:=</span>&nbsp;<span class="ident" id="2615063">New</span><span class="op" id="2615066">(</span><span class="ident" id="2615067">t</span><span class="op" id="2615068">)</span><span class="op" id="2615069">.</span><span class="ident" id="2615070">Elem</span><span class="op" id="2615074">(</span><span class="op" id="2615075">)</span><br>
<span class="lineno">2280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2615078">ret</span><span class="op" id="2615081">.</span><span class="ident" id="2615082">SetBytes</span><span class="op" id="2615090">(</span><span class="ident" id="2615091">v</span><span class="op" id="2615092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2615095">ret</span><span class="op" id="2615098">.</span><span class="ident" id="2615099">flag</span>&nbsp;<span class="op" id="2615104">=</span>&nbsp;<span class="ident" id="2615106">ret</span><span class="op" id="2615109">.</span><span class="ident" id="2615110">flag</span><span class="op" id="2615114">&amp;^</span><span class="ident" id="2615116">flagAddr</span>&nbsp;<span class="op" id="2615125">|</span>&nbsp;<span class="ident" id="2615127">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615130">return</span>&nbsp;<span class="ident" id="2615137">ret</span><br>
<span class="lineno"></span><span class="op" id="2615141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2285</span><span class="keyword" id="2615144">func</span>&nbsp;<span class="ident" id="2615149">makeRunes</span><span class="op" id="2615158">(</span><span class="ident" id="2615159">f</span>&nbsp;<span class="ident" id="2615161">flag</span><span class="op" id="2615165">,</span>&nbsp;<span class="ident" id="2615167">v</span>&nbsp;<span class="op" id="2615169">[</span><span class="op" id="2615170">]</span><span class="builtintype" id="2615171">rune</span><span class="op" id="2615175">,</span>&nbsp;<span class="ident" id="2615177">t</span>&nbsp;<span class="ident" id="2615179">Type</span><span class="op" id="2615183">)</span>&nbsp;<span class="ident" id="2615185">Value</span>&nbsp;<span class="op" id="2615191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2615194">ret</span>&nbsp;<span class="op" id="2615198">:=</span>&nbsp;<span class="ident" id="2615201">New</span><span class="op" id="2615204">(</span><span class="ident" id="2615205">t</span><span class="op" id="2615206">)</span><span class="op" id="2615207">.</span><span class="ident" id="2615208">Elem</span><span class="op" id="2615212">(</span><span class="op" id="2615213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2615216">ret</span><span class="op" id="2615219">.</span><span class="ident" id="2615220">setRunes</span><span class="op" id="2615228">(</span><span class="ident" id="2615229">v</span><span class="op" id="2615230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2615233">ret</span><span class="op" id="2615236">.</span><span class="ident" id="2615237">flag</span>&nbsp;<span class="op" id="2615242">=</span>&nbsp;<span class="ident" id="2615244">ret</span><span class="op" id="2615247">.</span><span class="ident" id="2615248">flag</span><span class="op" id="2615252">&amp;^</span><span class="ident" id="2615254">flagAddr</span>&nbsp;<span class="op" id="2615263">|</span>&nbsp;<span class="ident" id="2615265">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615268">return</span>&nbsp;<span class="ident" id="2615275">ret</span><br>
<span class="lineno">2290</span><span class="op" id="2615279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2615282">//&nbsp;These&nbsp;conversion&nbsp;functions&nbsp;are&nbsp;returned&nbsp;by&nbsp;convertOp</span><br>
<span class="lineno"></span><span class="comment" id="2615338">//&nbsp;for&nbsp;classes&nbsp;of&nbsp;conversions.&nbsp;For&nbsp;example,&nbsp;the&nbsp;first&nbsp;function,&nbsp;cvtInt,</span><br>
<span class="lineno"></span><span class="comment" id="2615410">//&nbsp;takes&nbsp;any&nbsp;value&nbsp;v&nbsp;of&nbsp;signed&nbsp;int&nbsp;type&nbsp;and&nbsp;returns&nbsp;the&nbsp;value&nbsp;converted</span><br>
<span class="lineno">2295</span><span class="comment" id="2615482">//&nbsp;to&nbsp;type&nbsp;t,&nbsp;where&nbsp;t&nbsp;is&nbsp;any&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2615541">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2615573">func</span>&nbsp;<span class="ident" id="2615578">cvtInt</span><span class="op" id="2615584">(</span><span class="ident" id="2615585">v</span>&nbsp;<span class="ident" id="2615587">Value</span><span class="op" id="2615592">,</span>&nbsp;<span class="ident" id="2615594">t</span>&nbsp;<span class="ident" id="2615596">Type</span><span class="op" id="2615600">)</span>&nbsp;<span class="ident" id="2615602">Value</span>&nbsp;<span class="op" id="2615608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615611">return</span>&nbsp;<span class="ident" id="2615618">makeInt</span><span class="op" id="2615625">(</span><span class="ident" id="2615626">v</span><span class="op" id="2615627">.</span><span class="ident" id="2615628">flag</span><span class="op" id="2615632">&amp;</span><span class="ident" id="2615633">flagRO</span><span class="op" id="2615639">,</span>&nbsp;<span class="ident" id="2615641">uint64</span><span class="op" id="2615647">(</span><span class="ident" id="2615648">v</span><span class="op" id="2615649">.</span><span class="ident" id="2615650">Int</span><span class="op" id="2615653">(</span><span class="op" id="2615654">)</span><span class="op" id="2615655">)</span><span class="op" id="2615656">,</span>&nbsp;<span class="ident" id="2615658">t</span><span class="op" id="2615659">)</span><br>
<span class="lineno">2300</span><span class="op" id="2615661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2615664">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2615697">func</span>&nbsp;<span class="ident" id="2615702">cvtUint</span><span class="op" id="2615709">(</span><span class="ident" id="2615710">v</span>&nbsp;<span class="ident" id="2615712">Value</span><span class="op" id="2615717">,</span>&nbsp;<span class="ident" id="2615719">t</span>&nbsp;<span class="ident" id="2615721">Type</span><span class="op" id="2615725">)</span>&nbsp;<span class="ident" id="2615727">Value</span>&nbsp;<span class="op" id="2615733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615736">return</span>&nbsp;<span class="ident" id="2615743">makeInt</span><span class="op" id="2615750">(</span><span class="ident" id="2615751">v</span><span class="op" id="2615752">.</span><span class="ident" id="2615753">flag</span><span class="op" id="2615757">&amp;</span><span class="ident" id="2615758">flagRO</span><span class="op" id="2615764">,</span>&nbsp;<span class="ident" id="2615766">v</span><span class="op" id="2615767">.</span><span class="ident" id="2615768">Uint</span><span class="op" id="2615772">(</span><span class="op" id="2615773">)</span><span class="op" id="2615774">,</span>&nbsp;<span class="ident" id="2615776">t</span><span class="op" id="2615777">)</span><br>
<span class="lineno">2305</span><span class="op" id="2615779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2615782">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2615813">func</span>&nbsp;<span class="ident" id="2615818">cvtFloatInt</span><span class="op" id="2615829">(</span><span class="ident" id="2615830">v</span>&nbsp;<span class="ident" id="2615832">Value</span><span class="op" id="2615837">,</span>&nbsp;<span class="ident" id="2615839">t</span>&nbsp;<span class="ident" id="2615841">Type</span><span class="op" id="2615845">)</span>&nbsp;<span class="ident" id="2615847">Value</span>&nbsp;<span class="op" id="2615853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615856">return</span>&nbsp;<span class="ident" id="2615863">makeInt</span><span class="op" id="2615870">(</span><span class="ident" id="2615871">v</span><span class="op" id="2615872">.</span><span class="ident" id="2615873">flag</span><span class="op" id="2615877">&amp;</span><span class="ident" id="2615878">flagRO</span><span class="op" id="2615884">,</span>&nbsp;<span class="ident" id="2615886">uint64</span><span class="op" id="2615892">(</span><span class="ident" id="2615893">int64</span><span class="op" id="2615898">(</span><span class="ident" id="2615899">v</span><span class="op" id="2615900">.</span><span class="ident" id="2615901">Float</span><span class="op" id="2615906">(</span><span class="op" id="2615907">)</span><span class="op" id="2615908">)</span><span class="op" id="2615909">)</span><span class="op" id="2615910">,</span>&nbsp;<span class="ident" id="2615912">t</span><span class="op" id="2615913">)</span><br>
<span class="lineno">2310</span><span class="op" id="2615915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2615918">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;uintXX</span><br>
<span class="lineno"></span><span class="keyword" id="2615950">func</span>&nbsp;<span class="ident" id="2615955">cvtFloatUint</span><span class="op" id="2615967">(</span><span class="ident" id="2615968">v</span>&nbsp;<span class="ident" id="2615970">Value</span><span class="op" id="2615975">,</span>&nbsp;<span class="ident" id="2615977">t</span>&nbsp;<span class="ident" id="2615979">Type</span><span class="op" id="2615983">)</span>&nbsp;<span class="ident" id="2615985">Value</span>&nbsp;<span class="op" id="2615991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615994">return</span>&nbsp;<span class="ident" id="2616001">makeInt</span><span class="op" id="2616008">(</span><span class="ident" id="2616009">v</span><span class="op" id="2616010">.</span><span class="ident" id="2616011">flag</span><span class="op" id="2616015">&amp;</span><span class="ident" id="2616016">flagRO</span><span class="op" id="2616022">,</span>&nbsp;<span class="ident" id="2616024">uint64</span><span class="op" id="2616030">(</span><span class="ident" id="2616031">v</span><span class="op" id="2616032">.</span><span class="ident" id="2616033">Float</span><span class="op" id="2616038">(</span><span class="op" id="2616039">)</span><span class="op" id="2616040">)</span><span class="op" id="2616041">,</span>&nbsp;<span class="ident" id="2616043">t</span><span class="op" id="2616044">)</span><br>
<span class="lineno">2315</span><span class="op" id="2616046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2616049">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2616080">func</span>&nbsp;<span class="ident" id="2616085">cvtIntFloat</span><span class="op" id="2616096">(</span><span class="ident" id="2616097">v</span>&nbsp;<span class="ident" id="2616099">Value</span><span class="op" id="2616104">,</span>&nbsp;<span class="ident" id="2616106">t</span>&nbsp;<span class="ident" id="2616108">Type</span><span class="op" id="2616112">)</span>&nbsp;<span class="ident" id="2616114">Value</span>&nbsp;<span class="op" id="2616120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616123">return</span>&nbsp;<span class="ident" id="2616130">makeFloat</span><span class="op" id="2616139">(</span><span class="ident" id="2616140">v</span><span class="op" id="2616141">.</span><span class="ident" id="2616142">flag</span><span class="op" id="2616146">&amp;</span><span class="ident" id="2616147">flagRO</span><span class="op" id="2616153">,</span>&nbsp;<span class="builtintype" id="2616155">float64</span><span class="op" id="2616162">(</span><span class="ident" id="2616163">v</span><span class="op" id="2616164">.</span><span class="ident" id="2616165">Int</span><span class="op" id="2616168">(</span><span class="op" id="2616169">)</span><span class="op" id="2616170">)</span><span class="op" id="2616171">,</span>&nbsp;<span class="ident" id="2616173">t</span><span class="op" id="2616174">)</span><br>
<span class="lineno">2320</span><span class="op" id="2616176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2616179">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2616211">func</span>&nbsp;<span class="ident" id="2616216">cvtUintFloat</span><span class="op" id="2616228">(</span><span class="ident" id="2616229">v</span>&nbsp;<span class="ident" id="2616231">Value</span><span class="op" id="2616236">,</span>&nbsp;<span class="ident" id="2616238">t</span>&nbsp;<span class="ident" id="2616240">Type</span><span class="op" id="2616244">)</span>&nbsp;<span class="ident" id="2616246">Value</span>&nbsp;<span class="op" id="2616252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616255">return</span>&nbsp;<span class="ident" id="2616262">makeFloat</span><span class="op" id="2616271">(</span><span class="ident" id="2616272">v</span><span class="op" id="2616273">.</span><span class="ident" id="2616274">flag</span><span class="op" id="2616278">&amp;</span><span class="ident" id="2616279">flagRO</span><span class="op" id="2616285">,</span>&nbsp;<span class="builtintype" id="2616287">float64</span><span class="op" id="2616294">(</span><span class="ident" id="2616295">v</span><span class="op" id="2616296">.</span><span class="ident" id="2616297">Uint</span><span class="op" id="2616301">(</span><span class="op" id="2616302">)</span><span class="op" id="2616303">)</span><span class="op" id="2616304">,</span>&nbsp;<span class="ident" id="2616306">t</span><span class="op" id="2616307">)</span><br>
<span class="lineno">2325</span><span class="op" id="2616309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2616312">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2616345">func</span>&nbsp;<span class="ident" id="2616350">cvtFloat</span><span class="op" id="2616358">(</span><span class="ident" id="2616359">v</span>&nbsp;<span class="ident" id="2616361">Value</span><span class="op" id="2616366">,</span>&nbsp;<span class="ident" id="2616368">t</span>&nbsp;<span class="ident" id="2616370">Type</span><span class="op" id="2616374">)</span>&nbsp;<span class="ident" id="2616376">Value</span>&nbsp;<span class="op" id="2616382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616385">return</span>&nbsp;<span class="ident" id="2616392">makeFloat</span><span class="op" id="2616401">(</span><span class="ident" id="2616402">v</span><span class="op" id="2616403">.</span><span class="ident" id="2616404">flag</span><span class="op" id="2616408">&amp;</span><span class="ident" id="2616409">flagRO</span><span class="op" id="2616415">,</span>&nbsp;<span class="ident" id="2616417">v</span><span class="op" id="2616418">.</span><span class="ident" id="2616419">Float</span><span class="op" id="2616424">(</span><span class="op" id="2616425">)</span><span class="op" id="2616426">,</span>&nbsp;<span class="ident" id="2616428">t</span><span class="op" id="2616429">)</span><br>
<span class="lineno">2330</span><span class="op" id="2616431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2616434">//&nbsp;convertOp:&nbsp;complexXX&nbsp;-&gt;&nbsp;complexXX</span><br>
<span class="lineno"></span><span class="keyword" id="2616471">func</span>&nbsp;<span class="ident" id="2616476">cvtComplex</span><span class="op" id="2616486">(</span><span class="ident" id="2616487">v</span>&nbsp;<span class="ident" id="2616489">Value</span><span class="op" id="2616494">,</span>&nbsp;<span class="ident" id="2616496">t</span>&nbsp;<span class="ident" id="2616498">Type</span><span class="op" id="2616502">)</span>&nbsp;<span class="ident" id="2616504">Value</span>&nbsp;<span class="op" id="2616510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616513">return</span>&nbsp;<span class="ident" id="2616520">makeComplex</span><span class="op" id="2616531">(</span><span class="ident" id="2616532">v</span><span class="op" id="2616533">.</span><span class="ident" id="2616534">flag</span><span class="op" id="2616538">&amp;</span><span class="ident" id="2616539">flagRO</span><span class="op" id="2616545">,</span>&nbsp;<span class="ident" id="2616547">v</span><span class="op" id="2616548">.</span><span class="ident" id="2616549">Complex</span><span class="op" id="2616556">(</span><span class="op" id="2616557">)</span><span class="op" id="2616558">,</span>&nbsp;<span class="ident" id="2616560">t</span><span class="op" id="2616561">)</span><br>
<span class="lineno">2335</span><span class="op" id="2616563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2616566">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2616596">func</span>&nbsp;<span class="ident" id="2616601">cvtIntString</span><span class="op" id="2616613">(</span><span class="ident" id="2616614">v</span>&nbsp;<span class="ident" id="2616616">Value</span><span class="op" id="2616621">,</span>&nbsp;<span class="ident" id="2616623">t</span>&nbsp;<span class="ident" id="2616625">Type</span><span class="op" id="2616629">)</span>&nbsp;<span class="ident" id="2616631">Value</span>&nbsp;<span class="op" id="2616637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616640">return</span>&nbsp;<span class="ident" id="2616647">makeString</span><span class="op" id="2616657">(</span><span class="ident" id="2616658">v</span><span class="op" id="2616659">.</span><span class="ident" id="2616660">flag</span><span class="op" id="2616664">&amp;</span><span class="ident" id="2616665">flagRO</span><span class="op" id="2616671">,</span>&nbsp;<span class="builtintype" id="2616673">string</span><span class="op" id="2616679">(</span><span class="ident" id="2616680">v</span><span class="op" id="2616681">.</span><span class="ident" id="2616682">Int</span><span class="op" id="2616685">(</span><span class="op" id="2616686">)</span><span class="op" id="2616687">)</span><span class="op" id="2616688">,</span>&nbsp;<span class="ident" id="2616690">t</span><span class="op" id="2616691">)</span><br>
<span class="lineno">2340</span><span class="op" id="2616693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2616696">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2616727">func</span>&nbsp;<span class="ident" id="2616732">cvtUintString</span><span class="op" id="2616745">(</span><span class="ident" id="2616746">v</span>&nbsp;<span class="ident" id="2616748">Value</span><span class="op" id="2616753">,</span>&nbsp;<span class="ident" id="2616755">t</span>&nbsp;<span class="ident" id="2616757">Type</span><span class="op" id="2616761">)</span>&nbsp;<span class="ident" id="2616763">Value</span>&nbsp;<span class="op" id="2616769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616772">return</span>&nbsp;<span class="ident" id="2616779">makeString</span><span class="op" id="2616789">(</span><span class="ident" id="2616790">v</span><span class="op" id="2616791">.</span><span class="ident" id="2616792">flag</span><span class="op" id="2616796">&amp;</span><span class="ident" id="2616797">flagRO</span><span class="op" id="2616803">,</span>&nbsp;<span class="builtintype" id="2616805">string</span><span class="op" id="2616811">(</span><span class="ident" id="2616812">v</span><span class="op" id="2616813">.</span><span class="ident" id="2616814">Uint</span><span class="op" id="2616818">(</span><span class="op" id="2616819">)</span><span class="op" id="2616820">)</span><span class="op" id="2616821">,</span>&nbsp;<span class="ident" id="2616823">t</span><span class="op" id="2616824">)</span><br>
<span class="lineno">2345</span><span class="op" id="2616826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2616829">//&nbsp;convertOp:&nbsp;[]byte&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2616860">func</span>&nbsp;<span class="ident" id="2616865">cvtBytesString</span><span class="op" id="2616879">(</span><span class="ident" id="2616880">v</span>&nbsp;<span class="ident" id="2616882">Value</span><span class="op" id="2616887">,</span>&nbsp;<span class="ident" id="2616889">t</span>&nbsp;<span class="ident" id="2616891">Type</span><span class="op" id="2616895">)</span>&nbsp;<span class="ident" id="2616897">Value</span>&nbsp;<span class="op" id="2616903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616906">return</span>&nbsp;<span class="ident" id="2616913">makeString</span><span class="op" id="2616923">(</span><span class="ident" id="2616924">v</span><span class="op" id="2616925">.</span><span class="ident" id="2616926">flag</span><span class="op" id="2616930">&amp;</span><span class="ident" id="2616931">flagRO</span><span class="op" id="2616937">,</span>&nbsp;<span class="builtintype" id="2616939">string</span><span class="op" id="2616945">(</span><span class="ident" id="2616946">v</span><span class="op" id="2616947">.</span><span class="ident" id="2616948">Bytes</span><span class="op" id="2616953">(</span><span class="op" id="2616954">)</span><span class="op" id="2616955">)</span><span class="op" id="2616956">,</span>&nbsp;<span class="ident" id="2616958">t</span><span class="op" id="2616959">)</span><br>
<span class="lineno">2350</span><span class="op" id="2616961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2616964">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]byte</span><br>
<span class="lineno"></span><span class="keyword" id="2616995">func</span>&nbsp;<span class="ident" id="2617000">cvtStringBytes</span><span class="op" id="2617014">(</span><span class="ident" id="2617015">v</span>&nbsp;<span class="ident" id="2617017">Value</span><span class="op" id="2617022">,</span>&nbsp;<span class="ident" id="2617024">t</span>&nbsp;<span class="ident" id="2617026">Type</span><span class="op" id="2617030">)</span>&nbsp;<span class="ident" id="2617032">Value</span>&nbsp;<span class="op" id="2617038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2617041">return</span>&nbsp;<span class="ident" id="2617048">makeBytes</span><span class="op" id="2617057">(</span><span class="ident" id="2617058">v</span><span class="op" id="2617059">.</span><span class="ident" id="2617060">flag</span><span class="op" id="2617064">&amp;</span><span class="ident" id="2617065">flagRO</span><span class="op" id="2617071">,</span>&nbsp;<span class="op" id="2617073">[</span><span class="op" id="2617074">]</span><span class="builtintype" id="2617075">byte</span><span class="op" id="2617079">(</span><span class="ident" id="2617080">v</span><span class="op" id="2617081">.</span><span class="ident" id="2617082">String</span><span class="op" id="2617088">(</span><span class="op" id="2617089">)</span><span class="op" id="2617090">)</span><span class="op" id="2617091">,</span>&nbsp;<span class="ident" id="2617093">t</span><span class="op" id="2617094">)</span><br>
<span class="lineno">2355</span><span class="op" id="2617096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2617099">//&nbsp;convertOp:&nbsp;[]rune&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2617130">func</span>&nbsp;<span class="ident" id="2617135">cvtRunesString</span><span class="op" id="2617149">(</span><span class="ident" id="2617150">v</span>&nbsp;<span class="ident" id="2617152">Value</span><span class="op" id="2617157">,</span>&nbsp;<span class="ident" id="2617159">t</span>&nbsp;<span class="ident" id="2617161">Type</span><span class="op" id="2617165">)</span>&nbsp;<span class="ident" id="2617167">Value</span>&nbsp;<span class="op" id="2617173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2617176">return</span>&nbsp;<span class="ident" id="2617183">makeString</span><span class="op" id="2617193">(</span><span class="ident" id="2617194">v</span><span class="op" id="2617195">.</span><span class="ident" id="2617196">flag</span><span class="op" id="2617200">&amp;</span><span class="ident" id="2617201">flagRO</span><span class="op" id="2617207">,</span>&nbsp;<span class="builtintype" id="2617209">string</span><span class="op" id="2617215">(</span><span class="ident" id="2617216">v</span><span class="op" id="2617217">.</span><span class="ident" id="2617218">runes</span><span class="op" id="2617223">(</span><span class="op" id="2617224">)</span><span class="op" id="2617225">)</span><span class="op" id="2617226">,</span>&nbsp;<span class="ident" id="2617228">t</span><span class="op" id="2617229">)</span><br>
<span class="lineno">2360</span><span class="op" id="2617231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2617234">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]rune</span><br>
<span class="lineno"></span><span class="keyword" id="2617265">func</span>&nbsp;<span class="ident" id="2617270">cvtStringRunes</span><span class="op" id="2617284">(</span><span class="ident" id="2617285">v</span>&nbsp;<span class="ident" id="2617287">Value</span><span class="op" id="2617292">,</span>&nbsp;<span class="ident" id="2617294">t</span>&nbsp;<span class="ident" id="2617296">Type</span><span class="op" id="2617300">)</span>&nbsp;<span class="ident" id="2617302">Value</span>&nbsp;<span class="op" id="2617308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2617311">return</span>&nbsp;<span class="ident" id="2617318">makeRunes</span><span class="op" id="2617327">(</span><span class="ident" id="2617328">v</span><span class="op" id="2617329">.</span><span class="ident" id="2617330">flag</span><span class="op" id="2617334">&amp;</span><span class="ident" id="2617335">flagRO</span><span class="op" id="2617341">,</span>&nbsp;<span class="op" id="2617343">[</span><span class="op" id="2617344">]</span><span class="builtintype" id="2617345">rune</span><span class="op" id="2617349">(</span><span class="ident" id="2617350">v</span><span class="op" id="2617351">.</span><span class="ident" id="2617352">String</span><span class="op" id="2617358">(</span><span class="op" id="2617359">)</span><span class="op" id="2617360">)</span><span class="op" id="2617361">,</span>&nbsp;<span class="ident" id="2617363">t</span><span class="op" id="2617364">)</span><br>
<span class="lineno">2365</span><span class="op" id="2617366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2617369">//&nbsp;convertOp:&nbsp;direct&nbsp;copy</span><br>
<span class="lineno"></span><span class="keyword" id="2617395">func</span>&nbsp;<span class="ident" id="2617400">cvtDirect</span><span class="op" id="2617409">(</span><span class="ident" id="2617410">v</span>&nbsp;<span class="ident" id="2617412">Value</span><span class="op" id="2617417">,</span>&nbsp;<span class="ident" id="2617419">typ</span>&nbsp;<span class="ident" id="2617423">Type</span><span class="op" id="2617427">)</span>&nbsp;<span class="ident" id="2617429">Value</span>&nbsp;<span class="op" id="2617435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617438">f</span>&nbsp;<span class="op" id="2617440">:=</span>&nbsp;<span class="ident" id="2617443">v</span><span class="op" id="2617444">.</span><span class="ident" id="2617445">flag</span><br>
<span class="lineno">2370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617451">t</span>&nbsp;<span class="op" id="2617453">:=</span>&nbsp;<span class="ident" id="2617456">typ</span><span class="op" id="2617459">.</span><span class="ident" id="2617460">common</span><span class="op" id="2617466">(</span><span class="op" id="2617467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617470">ptr</span>&nbsp;<span class="op" id="2617474">:=</span>&nbsp;<span class="ident" id="2617477">v</span><span class="op" id="2617478">.</span><span class="ident" id="2617479">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2617484">if</span>&nbsp;<span class="ident" id="2617487">f</span><span class="op" id="2617488">&amp;</span><span class="ident" id="2617489">flagAddr</span>&nbsp;<span class="op" id="2617498">!=</span>&nbsp;<span class="num" id="2617501">0</span>&nbsp;<span class="op" id="2617503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2617507">//&nbsp;indirect,&nbsp;mutable&nbsp;word&nbsp;-&nbsp;make&nbsp;a&nbsp;copy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617549">c</span>&nbsp;<span class="op" id="2617551">:=</span>&nbsp;<span class="ident" id="2617554">unsafe_New</span><span class="op" id="2617564">(</span><span class="ident" id="2617565">t</span><span class="op" id="2617566">)</span><br>
<span class="lineno">2375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617570">memmove</span><span class="op" id="2617577">(</span><span class="ident" id="2617578">c</span><span class="op" id="2617579">,</span>&nbsp;<span class="ident" id="2617581">ptr</span><span class="op" id="2617584">,</span>&nbsp;<span class="ident" id="2617586">t</span><span class="op" id="2617587">.</span><span class="ident" id="2617588">size</span><span class="op" id="2617592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617596">ptr</span>&nbsp;<span class="op" id="2617600">=</span>&nbsp;<span class="ident" id="2617602">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617606">f</span>&nbsp;<span class="op" id="2617608">&amp;^=</span>&nbsp;<span class="ident" id="2617612">flagAddr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2617622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2617625">return</span>&nbsp;<span class="ident" id="2617632">Value</span><span class="op" id="2617637">{</span><span class="ident" id="2617638">t</span><span class="op" id="2617639">,</span>&nbsp;<span class="ident" id="2617641">ptr</span><span class="op" id="2617644">,</span>&nbsp;<span class="ident" id="2617646">v</span><span class="op" id="2617647">.</span><span class="ident" id="2617648">flag</span><span class="op" id="2617652">&amp;</span><span class="ident" id="2617653">flagRO</span>&nbsp;<span class="op" id="2617660">|</span>&nbsp;<span class="ident" id="2617662">f</span><span class="op" id="2617663">}</span>&nbsp;<span class="comment" id="2617665">//&nbsp;v.flag&amp;flagRO|f&nbsp;==&nbsp;f?</span><br>
<span class="lineno">2380</span><span class="op" id="2617690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2617693">//&nbsp;convertOp:&nbsp;concrete&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno"></span><span class="keyword" id="2617729">func</span>&nbsp;<span class="ident" id="2617734">cvtT2I</span><span class="op" id="2617740">(</span><span class="ident" id="2617741">v</span>&nbsp;<span class="ident" id="2617743">Value</span><span class="op" id="2617748">,</span>&nbsp;<span class="ident" id="2617750">typ</span>&nbsp;<span class="ident" id="2617754">Type</span><span class="op" id="2617758">)</span>&nbsp;<span class="ident" id="2617760">Value</span>&nbsp;<span class="op" id="2617766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617769">target</span>&nbsp;<span class="op" id="2617776">:=</span>&nbsp;<span class="ident" id="2617779">unsafe_New</span><span class="op" id="2617789">(</span><span class="ident" id="2617790">typ</span><span class="op" id="2617793">.</span><span class="ident" id="2617794">common</span><span class="op" id="2617800">(</span><span class="op" id="2617801">)</span><span class="op" id="2617802">)</span><br>
<span class="lineno">2385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617805">x</span>&nbsp;<span class="op" id="2617807">:=</span>&nbsp;<span class="ident" id="2617810">valueInterface</span><span class="op" id="2617824">(</span><span class="ident" id="2617825">v</span><span class="op" id="2617826">,</span>&nbsp;<span class="builtintype" id="2617828">false</span><span class="op" id="2617833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2617836">if</span>&nbsp;<span class="ident" id="2617839">typ</span><span class="op" id="2617842">.</span><span class="ident" id="2617843">NumMethod</span><span class="op" id="2617852">(</span><span class="op" id="2617853">)</span>&nbsp;<span class="op" id="2617855">==</span>&nbsp;<span class="num" id="2617858">0</span>&nbsp;<span class="op" id="2617860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2617864">*</span><span class="op" id="2617865">(</span><span class="op" id="2617866">*</span><span class="keyword" id="2617867">interface</span><span class="op" id="2617876">{</span><span class="op" id="2617877">}</span><span class="op" id="2617878">)</span><span class="op" id="2617879">(</span><span class="ident" id="2617880">target</span><span class="op" id="2617886">)</span>&nbsp;<span class="op" id="2617888">=</span>&nbsp;<span class="ident" id="2617890">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2617893">}</span>&nbsp;<span class="keyword" id="2617895">else</span>&nbsp;<span class="op" id="2617900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617904">ifaceE2I</span><span class="op" id="2617912">(</span><span class="ident" id="2617913">typ</span><span class="op" id="2617916">.</span><span class="op" id="2617917">(</span><span class="op" id="2617918">*</span><span class="ident" id="2617919">rtype</span><span class="op" id="2617924">)</span><span class="op" id="2617925">,</span>&nbsp;<span class="ident" id="2617927">x</span><span class="op" id="2617928">,</span>&nbsp;<span class="ident" id="2617930">target</span><span class="op" id="2617936">)</span><br>
<span class="lineno">2390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2617939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2617942">return</span>&nbsp;<span class="ident" id="2617949">Value</span><span class="op" id="2617954">{</span><span class="ident" id="2617955">typ</span><span class="op" id="2617958">.</span><span class="ident" id="2617959">common</span><span class="op" id="2617965">(</span><span class="op" id="2617966">)</span><span class="op" id="2617967">,</span>&nbsp;<span class="ident" id="2617969">target</span><span class="op" id="2617975">,</span>&nbsp;<span class="ident" id="2617977">v</span><span class="op" id="2617978">.</span><span class="ident" id="2617979">flag</span><span class="op" id="2617983">&amp;</span><span class="ident" id="2617984">flagRO</span>&nbsp;<span class="op" id="2617991">|</span>&nbsp;<span class="ident" id="2617993">flagIndir</span>&nbsp;<span class="op" id="2618003">|</span>&nbsp;<span class="ident" id="2618005">flag</span><span class="op" id="2618009">(</span><span class="ident" id="2618010">Interface</span><span class="op" id="2618019">)</span><span class="op" id="2618020">}</span><br>
<span class="lineno"></span><span class="op" id="2618022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2618025">//&nbsp;convertOp:&nbsp;interface&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno">2395</span><span class="keyword" id="2618062">func</span>&nbsp;<span class="ident" id="2618067">cvtI2I</span><span class="op" id="2618073">(</span><span class="ident" id="2618074">v</span>&nbsp;<span class="ident" id="2618076">Value</span><span class="op" id="2618081">,</span>&nbsp;<span class="ident" id="2618083">typ</span>&nbsp;<span class="ident" id="2618087">Type</span><span class="op" id="2618091">)</span>&nbsp;<span class="ident" id="2618093">Value</span>&nbsp;<span class="op" id="2618099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2618102">if</span>&nbsp;<span class="ident" id="2618105">v</span><span class="op" id="2618106">.</span><span class="ident" id="2618107">IsNil</span><span class="op" id="2618112">(</span><span class="op" id="2618113">)</span>&nbsp;<span class="op" id="2618115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618119">ret</span>&nbsp;<span class="op" id="2618123">:=</span>&nbsp;<span class="ident" id="2618126">Zero</span><span class="op" id="2618130">(</span><span class="ident" id="2618131">typ</span><span class="op" id="2618134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618138">ret</span><span class="op" id="2618141">.</span><span class="ident" id="2618142">flag</span>&nbsp;<span class="op" id="2618147">|=</span>&nbsp;<span class="ident" id="2618150">v</span><span class="op" id="2618151">.</span><span class="ident" id="2618152">flag</span>&nbsp;<span class="op" id="2618157">&amp;</span>&nbsp;<span class="ident" id="2618159">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2618168">return</span>&nbsp;<span class="ident" id="2618175">ret</span><br>
<span class="lineno">2400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2618180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2618183">return</span>&nbsp;<span class="ident" id="2618190">cvtT2I</span><span class="op" id="2618196">(</span><span class="ident" id="2618197">v</span><span class="op" id="2618198">.</span><span class="ident" id="2618199">Elem</span><span class="op" id="2618203">(</span><span class="op" id="2618204">)</span><span class="op" id="2618205">,</span>&nbsp;<span class="ident" id="2618207">typ</span><span class="op" id="2618210">)</span><br>
<span class="lineno"></span><span class="op" id="2618212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2618215">//&nbsp;implemented&nbsp;in&nbsp;../runtime</span><br>
<span class="lineno">2405</span><span class="keyword" id="2618244">func</span>&nbsp;<span class="ident" id="2618249">chancap</span><span class="op" id="2618256">(</span><span class="ident" id="2618257">ch</span>&nbsp;<span class="ident" id="2618260">unsafe</span><span class="op" id="2618266">.</span><span class="ident" id="2618267">Pointer</span><span class="op" id="2618274">)</span>&nbsp;<span class="builtintype" id="2618276">int</span><br>
<span class="lineno"></span><span class="keyword" id="2618280">func</span>&nbsp;<span class="ident" id="2618285">chanclose</span><span class="op" id="2618294">(</span><span class="ident" id="2618295">ch</span>&nbsp;<span class="ident" id="2618298">unsafe</span><span class="op" id="2618304">.</span><span class="ident" id="2618305">Pointer</span><span class="op" id="2618312">)</span><br>
<span class="lineno"></span><span class="keyword" id="2618314">func</span>&nbsp;<span class="ident" id="2618319">chanlen</span><span class="op" id="2618326">(</span><span class="ident" id="2618327">ch</span>&nbsp;<span class="ident" id="2618330">unsafe</span><span class="op" id="2618336">.</span><span class="ident" id="2618337">Pointer</span><span class="op" id="2618344">)</span>&nbsp;<span class="builtintype" id="2618346">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2618351">//go:noescape</span><br>
<span class="lineno">2410</span><span class="keyword" id="2618365">func</span>&nbsp;<span class="ident" id="2618370">chanrecv</span><span class="op" id="2618378">(</span><span class="ident" id="2618379">t</span>&nbsp;<span class="op" id="2618381">*</span><span class="ident" id="2618382">rtype</span><span class="op" id="2618387">,</span>&nbsp;<span class="ident" id="2618389">ch</span>&nbsp;<span class="ident" id="2618392">unsafe</span><span class="op" id="2618398">.</span><span class="ident" id="2618399">Pointer</span><span class="op" id="2618406">,</span>&nbsp;<span class="ident" id="2618408">nb</span>&nbsp;<span class="builtintype" id="2618411">bool</span><span class="op" id="2618415">,</span>&nbsp;<span class="ident" id="2618417">val</span>&nbsp;<span class="ident" id="2618421">unsafe</span><span class="op" id="2618427">.</span><span class="ident" id="2618428">Pointer</span><span class="op" id="2618435">)</span>&nbsp;<span class="op" id="2618437">(</span><span class="ident" id="2618438">selected</span><span class="op" id="2618446">,</span>&nbsp;<span class="ident" id="2618448">received</span>&nbsp;<span class="builtintype" id="2618457">bool</span><span class="op" id="2618461">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2618464">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2618478">func</span>&nbsp;<span class="ident" id="2618483">chansend</span><span class="op" id="2618491">(</span><span class="ident" id="2618492">t</span>&nbsp;<span class="op" id="2618494">*</span><span class="ident" id="2618495">rtype</span><span class="op" id="2618500">,</span>&nbsp;<span class="ident" id="2618502">ch</span>&nbsp;<span class="ident" id="2618505">unsafe</span><span class="op" id="2618511">.</span><span class="ident" id="2618512">Pointer</span><span class="op" id="2618519">,</span>&nbsp;<span class="ident" id="2618521">val</span>&nbsp;<span class="ident" id="2618525">unsafe</span><span class="op" id="2618531">.</span><span class="ident" id="2618532">Pointer</span><span class="op" id="2618539">,</span>&nbsp;<span class="ident" id="2618541">nb</span>&nbsp;<span class="builtintype" id="2618544">bool</span><span class="op" id="2618548">)</span>&nbsp;<span class="builtintype" id="2618550">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">2415</span><span class="keyword" id="2618556">func</span>&nbsp;<span class="ident" id="2618561">makechan</span><span class="op" id="2618569">(</span><span class="ident" id="2618570">typ</span>&nbsp;<span class="op" id="2618574">*</span><span class="ident" id="2618575">rtype</span><span class="op" id="2618580">,</span>&nbsp;<span class="ident" id="2618582">size</span>&nbsp;<span class="ident" id="2618587">uint64</span><span class="op" id="2618593">)</span>&nbsp;<span class="op" id="2618595">(</span><span class="ident" id="2618596">ch</span>&nbsp;<span class="ident" id="2618599">unsafe</span><span class="op" id="2618605">.</span><span class="ident" id="2618606">Pointer</span><span class="op" id="2618613">)</span><br>
<span class="lineno"></span><span class="keyword" id="2618615">func</span>&nbsp;<span class="ident" id="2618620">makemap</span><span class="op" id="2618627">(</span><span class="ident" id="2618628">t</span>&nbsp;<span class="op" id="2618630">*</span><span class="ident" id="2618631">rtype</span><span class="op" id="2618636">)</span>&nbsp;<span class="op" id="2618638">(</span><span class="ident" id="2618639">m</span>&nbsp;<span class="ident" id="2618641">unsafe</span><span class="op" id="2618647">.</span><span class="ident" id="2618648">Pointer</span><span class="op" id="2618655">)</span><br>
<span class="lineno"></span><span class="keyword" id="2618657">func</span>&nbsp;<span class="ident" id="2618662">mapaccess</span><span class="op" id="2618671">(</span><span class="ident" id="2618672">t</span>&nbsp;<span class="op" id="2618674">*</span><span class="ident" id="2618675">rtype</span><span class="op" id="2618680">,</span>&nbsp;<span class="ident" id="2618682">m</span>&nbsp;<span class="ident" id="2618684">unsafe</span><span class="op" id="2618690">.</span><span class="ident" id="2618691">Pointer</span><span class="op" id="2618698">,</span>&nbsp;<span class="ident" id="2618700">key</span>&nbsp;<span class="ident" id="2618704">unsafe</span><span class="op" id="2618710">.</span><span class="ident" id="2618711">Pointer</span><span class="op" id="2618718">)</span>&nbsp;<span class="op" id="2618720">(</span><span class="ident" id="2618721">val</span>&nbsp;<span class="ident" id="2618725">unsafe</span><span class="op" id="2618731">.</span><span class="ident" id="2618732">Pointer</span><span class="op" id="2618739">)</span><br>
<span class="lineno"></span><span class="keyword" id="2618741">func</span>&nbsp;<span class="ident" id="2618746">mapassign</span><span class="op" id="2618755">(</span><span class="ident" id="2618756">t</span>&nbsp;<span class="op" id="2618758">*</span><span class="ident" id="2618759">rtype</span><span class="op" id="2618764">,</span>&nbsp;<span class="ident" id="2618766">m</span>&nbsp;<span class="ident" id="2618768">unsafe</span><span class="op" id="2618774">.</span><span class="ident" id="2618775">Pointer</span><span class="op" id="2618782">,</span>&nbsp;<span class="ident" id="2618784">key</span><span class="op" id="2618787">,</span>&nbsp;<span class="ident" id="2618789">val</span>&nbsp;<span class="ident" id="2618793">unsafe</span><span class="op" id="2618799">.</span><span class="ident" id="2618800">Pointer</span><span class="op" id="2618807">)</span><br>
<span class="lineno"></span><span class="keyword" id="2618809">func</span>&nbsp;<span class="ident" id="2618814">mapdelete</span><span class="op" id="2618823">(</span><span class="ident" id="2618824">t</span>&nbsp;<span class="op" id="2618826">*</span><span class="ident" id="2618827">rtype</span><span class="op" id="2618832">,</span>&nbsp;<span class="ident" id="2618834">m</span>&nbsp;<span class="ident" id="2618836">unsafe</span><span class="op" id="2618842">.</span><span class="ident" id="2618843">Pointer</span><span class="op" id="2618850">,</span>&nbsp;<span class="ident" id="2618852">key</span>&nbsp;<span class="ident" id="2618856">unsafe</span><span class="op" id="2618862">.</span><span class="ident" id="2618863">Pointer</span><span class="op" id="2618870">)</span><br>
<span class="lineno">2420</span><span class="keyword" id="2618872">func</span>&nbsp;<span class="ident" id="2618877">mapiterinit</span><span class="op" id="2618888">(</span><span class="ident" id="2618889">t</span>&nbsp;<span class="op" id="2618891">*</span><span class="ident" id="2618892">rtype</span><span class="op" id="2618897">,</span>&nbsp;<span class="ident" id="2618899">m</span>&nbsp;<span class="ident" id="2618901">unsafe</span><span class="op" id="2618907">.</span><span class="ident" id="2618908">Pointer</span><span class="op" id="2618915">)</span>&nbsp;<span class="ident" id="2618917">unsafe</span><span class="op" id="2618923">.</span><span class="ident" id="2618924">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2618932">func</span>&nbsp;<span class="ident" id="2618937">mapiterkey</span><span class="op" id="2618947">(</span><span class="ident" id="2618948">it</span>&nbsp;<span class="ident" id="2618951">unsafe</span><span class="op" id="2618957">.</span><span class="ident" id="2618958">Pointer</span><span class="op" id="2618965">)</span>&nbsp;<span class="op" id="2618967">(</span><span class="ident" id="2618968">key</span>&nbsp;<span class="ident" id="2618972">unsafe</span><span class="op" id="2618978">.</span><span class="ident" id="2618979">Pointer</span><span class="op" id="2618986">)</span><br>
<span class="lineno"></span><span class="keyword" id="2618988">func</span>&nbsp;<span class="ident" id="2618993">mapiternext</span><span class="op" id="2619004">(</span><span class="ident" id="2619005">it</span>&nbsp;<span class="ident" id="2619008">unsafe</span><span class="op" id="2619014">.</span><span class="ident" id="2619015">Pointer</span><span class="op" id="2619022">)</span><br>
<span class="lineno"></span><span class="keyword" id="2619024">func</span>&nbsp;<span class="ident" id="2619029">maplen</span><span class="op" id="2619035">(</span><span class="ident" id="2619036">m</span>&nbsp;<span class="ident" id="2619038">unsafe</span><span class="op" id="2619044">.</span><span class="ident" id="2619045">Pointer</span><span class="op" id="2619052">)</span>&nbsp;<span class="builtintype" id="2619054">int</span><br>
<span class="lineno"></span><span class="keyword" id="2619058">func</span>&nbsp;<span class="ident" id="2619063">call</span><span class="op" id="2619067">(</span><span class="ident" id="2619068">fn</span><span class="op" id="2619070">,</span>&nbsp;<span class="ident" id="2619072">arg</span>&nbsp;<span class="ident" id="2619076">unsafe</span><span class="op" id="2619082">.</span><span class="ident" id="2619083">Pointer</span><span class="op" id="2619090">,</span>&nbsp;<span class="ident" id="2619092">n</span>&nbsp;<span class="builtintype" id="2619094">uint32</span><span class="op" id="2619100">,</span>&nbsp;<span class="ident" id="2619102">retoffset</span>&nbsp;<span class="builtintype" id="2619112">uint32</span><span class="op" id="2619118">)</span><br>
<span class="lineno">2425</span><br>
<span class="lineno"></span><span class="keyword" id="2619121">func</span>&nbsp;<span class="ident" id="2619126">ifaceE2I</span><span class="op" id="2619134">(</span><span class="ident" id="2619135">t</span>&nbsp;<span class="op" id="2619137">*</span><span class="ident" id="2619138">rtype</span><span class="op" id="2619143">,</span>&nbsp;<span class="ident" id="2619145">src</span>&nbsp;<span class="keyword" id="2619149">interface</span><span class="op" id="2619158">{</span><span class="op" id="2619159">}</span><span class="op" id="2619160">,</span>&nbsp;<span class="ident" id="2619162">dst</span>&nbsp;<span class="ident" id="2619166">unsafe</span><span class="op" id="2619172">.</span><span class="ident" id="2619173">Pointer</span><span class="op" id="2619180">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2619183">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2619197">func</span>&nbsp;<span class="ident" id="2619202">memmove</span><span class="op" id="2619209">(</span><span class="ident" id="2619210">adst</span><span class="op" id="2619214">,</span>&nbsp;<span class="ident" id="2619216">asrc</span>&nbsp;<span class="ident" id="2619221">unsafe</span><span class="op" id="2619227">.</span><span class="ident" id="2619228">Pointer</span><span class="op" id="2619235">,</span>&nbsp;<span class="ident" id="2619237">n</span>&nbsp;<span class="builtintype" id="2619239">uintptr</span><span class="op" id="2619246">)</span><br>
<span class="lineno">2430</span><br>
<span class="lineno"></span><span class="comment" id="2619249">//&nbsp;Dummy&nbsp;annotation&nbsp;marking&nbsp;that&nbsp;the&nbsp;value&nbsp;x&nbsp;escapes,</span><br>
<span class="lineno"></span><span class="comment" id="2619303">//&nbsp;for&nbsp;use&nbsp;in&nbsp;cases&nbsp;where&nbsp;the&nbsp;reflect&nbsp;code&nbsp;is&nbsp;so&nbsp;clever&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2619364">//&nbsp;the&nbsp;compiler&nbsp;cannot&nbsp;follow.</span><br>
<span class="lineno"></span><span class="keyword" id="2619395">func</span>&nbsp;<span class="ident" id="2619400">escapes</span><span class="op" id="2619407">(</span><span class="ident" id="2619408">x</span>&nbsp;<span class="keyword" id="2619410">interface</span><span class="op" id="2619419">{</span><span class="op" id="2619420">}</span><span class="op" id="2619421">)</span>&nbsp;<span class="op" id="2619423">{</span><br>
<span class="lineno">2435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619426">if</span>&nbsp;<span class="ident" id="2619429">dummy</span><span class="op" id="2619434">.</span><span class="ident" id="2619435">b</span>&nbsp;<span class="op" id="2619437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619441">dummy</span><span class="op" id="2619446">.</span><span class="ident" id="2619447">x</span>&nbsp;<span class="op" id="2619449">=</span>&nbsp;<span class="ident" id="2619451">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619454">}</span><br>
<span class="lineno"></span><span class="op" id="2619456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2440</span><span class="keyword" id="2619459">var</span>&nbsp;<span class="ident" id="2619463">dummy</span>&nbsp;<span class="keyword" id="2619469">struct</span>&nbsp;<span class="op" id="2619476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619479">b</span>&nbsp;<span class="builtintype" id="2619481">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619487">x</span>&nbsp;<span class="keyword" id="2619489">interface</span><span class="op" id="2619498">{</span><span class="op" id="2619499">}</span><br>
<span class="lineno"></span><span class="op" id="2619501">}</span>
</div>
</body>
</html>
