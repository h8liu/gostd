<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html" class="current">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8107516">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8107571">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8107625">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8107676">package</span>&nbsp;<span class="ident" id="8107684">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8107691">import</span>&nbsp;<span class="op" id="8107698">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8107701">&#34;image/color&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8107716">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="8107726">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8107729">type</span>&nbsp;<span class="ident" id="8107734">image</span>&nbsp;<span class="keyword" id="8107740">interface</span>&nbsp;<span class="op" id="8107750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107753">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107760">Opaque</span><span class="op" id="8107766">(</span><span class="op" id="8107767">)</span>&nbsp;<span class="builtintype" id="8107769">bool</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107775">Set</span><span class="op" id="8107778">(</span><span class="builtintype" id="8107779">int</span><span class="op" id="8107782">,</span>&nbsp;<span class="builtintype" id="8107784">int</span><span class="op" id="8107787">,</span>&nbsp;<span class="ident" id="8107789">color</span><span class="op" id="8107794">.</span><span class="ident" id="8107795">Color</span><span class="op" id="8107800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107803">SubImage</span><span class="op" id="8107811">(</span><span class="ident" id="8107812">Rectangle</span><span class="op" id="8107821">)</span>&nbsp;<span class="ident" id="8107823">Image</span><br>
<span class="lineno"></span><span class="op" id="8107829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8107832">func</span>&nbsp;<span class="ident" id="8107837">cmp</span><span class="op" id="8107840">(</span><span class="ident" id="8107841">t</span>&nbsp;<span class="op" id="8107843">*</span><span class="ident" id="8107844">testing</span><span class="op" id="8107851">.</span><span class="ident" id="8107852">T</span><span class="op" id="8107853">,</span>&nbsp;<span class="ident" id="8107855">cm</span>&nbsp;<span class="ident" id="8107858">color</span><span class="op" id="8107863">.</span><span class="ident" id="8107864">Model</span><span class="op" id="8107869">,</span>&nbsp;<span class="ident" id="8107871">c0</span><span class="op" id="8107873">,</span>&nbsp;<span class="ident" id="8107875">c1</span>&nbsp;<span class="ident" id="8107878">color</span><span class="op" id="8107883">.</span><span class="ident" id="8107884">Color</span><span class="op" id="8107889">)</span>&nbsp;<span class="builtintype" id="8107891">bool</span>&nbsp;<span class="op" id="8107896">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107899">r0</span><span class="op" id="8107901">,</span>&nbsp;<span class="ident" id="8107903">g0</span><span class="op" id="8107905">,</span>&nbsp;<span class="ident" id="8107907">b0</span><span class="op" id="8107909">,</span>&nbsp;<span class="ident" id="8107911">a0</span>&nbsp;<span class="op" id="8107914">:=</span>&nbsp;<span class="ident" id="8107917">cm</span><span class="op" id="8107919">.</span><span class="ident" id="8107920">Convert</span><span class="op" id="8107927">(</span><span class="ident" id="8107928">c0</span><span class="op" id="8107930">)</span><span class="op" id="8107931">.</span><span class="ident" id="8107932">RGBA</span><span class="op" id="8107936">(</span><span class="op" id="8107937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107940">r1</span><span class="op" id="8107942">,</span>&nbsp;<span class="ident" id="8107944">g1</span><span class="op" id="8107946">,</span>&nbsp;<span class="ident" id="8107948">b1</span><span class="op" id="8107950">,</span>&nbsp;<span class="ident" id="8107952">a1</span>&nbsp;<span class="op" id="8107955">:=</span>&nbsp;<span class="ident" id="8107958">cm</span><span class="op" id="8107960">.</span><span class="ident" id="8107961">Convert</span><span class="op" id="8107968">(</span><span class="ident" id="8107969">c1</span><span class="op" id="8107971">)</span><span class="op" id="8107972">.</span><span class="ident" id="8107973">RGBA</span><span class="op" id="8107977">(</span><span class="op" id="8107978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8107981">return</span>&nbsp;<span class="ident" id="8107988">r0</span>&nbsp;<span class="op" id="8107991">==</span>&nbsp;<span class="ident" id="8107994">r1</span>&nbsp;<span class="op" id="8107997">&amp;&amp;</span>&nbsp;<span class="ident" id="8108000">g0</span>&nbsp;<span class="op" id="8108003">==</span>&nbsp;<span class="ident" id="8108006">g1</span>&nbsp;<span class="op" id="8108009">&amp;&amp;</span>&nbsp;<span class="ident" id="8108012">b0</span>&nbsp;<span class="op" id="8108015">==</span>&nbsp;<span class="ident" id="8108018">b1</span>&nbsp;<span class="op" id="8108021">&amp;&amp;</span>&nbsp;<span class="ident" id="8108024">a0</span>&nbsp;<span class="op" id="8108027">==</span>&nbsp;<span class="ident" id="8108030">a1</span><br>
<span class="lineno"></span><span class="op" id="8108033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="8108036">func</span>&nbsp;<span class="ident" id="8108041">TestImage</span><span class="op" id="8108050">(</span><span class="ident" id="8108051">t</span>&nbsp;<span class="op" id="8108053">*</span><span class="ident" id="8108054">testing</span><span class="op" id="8108061">.</span><span class="ident" id="8108062">T</span><span class="op" id="8108063">)</span>&nbsp;<span class="op" id="8108065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108068">testImage</span>&nbsp;<span class="op" id="8108078">:=</span>&nbsp;<span class="op" id="8108081">[</span><span class="op" id="8108082">]</span><span class="ident" id="8108083">image</span><span class="op" id="8108088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108092">NewRGBA</span><span class="op" id="8108099">(</span><span class="ident" id="8108100">Rect</span><span class="op" id="8108104">(</span><span class="num" id="8108105">0</span><span class="op" id="8108106">,</span>&nbsp;<span class="num" id="8108108">0</span><span class="op" id="8108109">,</span>&nbsp;<span class="num" id="8108111">10</span><span class="op" id="8108113">,</span>&nbsp;<span class="num" id="8108115">10</span><span class="op" id="8108117">)</span><span class="op" id="8108118">)</span><span class="op" id="8108119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108123">NewRGBA64</span><span class="op" id="8108132">(</span><span class="ident" id="8108133">Rect</span><span class="op" id="8108137">(</span><span class="num" id="8108138">0</span><span class="op" id="8108139">,</span>&nbsp;<span class="num" id="8108141">0</span><span class="op" id="8108142">,</span>&nbsp;<span class="num" id="8108144">10</span><span class="op" id="8108146">,</span>&nbsp;<span class="num" id="8108148">10</span><span class="op" id="8108150">)</span><span class="op" id="8108151">)</span><span class="op" id="8108152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108156">NewNRGBA</span><span class="op" id="8108164">(</span><span class="ident" id="8108165">Rect</span><span class="op" id="8108169">(</span><span class="num" id="8108170">0</span><span class="op" id="8108171">,</span>&nbsp;<span class="num" id="8108173">0</span><span class="op" id="8108174">,</span>&nbsp;<span class="num" id="8108176">10</span><span class="op" id="8108178">,</span>&nbsp;<span class="num" id="8108180">10</span><span class="op" id="8108182">)</span><span class="op" id="8108183">)</span><span class="op" id="8108184">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108188">NewNRGBA64</span><span class="op" id="8108198">(</span><span class="ident" id="8108199">Rect</span><span class="op" id="8108203">(</span><span class="num" id="8108204">0</span><span class="op" id="8108205">,</span>&nbsp;<span class="num" id="8108207">0</span><span class="op" id="8108208">,</span>&nbsp;<span class="num" id="8108210">10</span><span class="op" id="8108212">,</span>&nbsp;<span class="num" id="8108214">10</span><span class="op" id="8108216">)</span><span class="op" id="8108217">)</span><span class="op" id="8108218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108222">NewAlpha</span><span class="op" id="8108230">(</span><span class="ident" id="8108231">Rect</span><span class="op" id="8108235">(</span><span class="num" id="8108236">0</span><span class="op" id="8108237">,</span>&nbsp;<span class="num" id="8108239">0</span><span class="op" id="8108240">,</span>&nbsp;<span class="num" id="8108242">10</span><span class="op" id="8108244">,</span>&nbsp;<span class="num" id="8108246">10</span><span class="op" id="8108248">)</span><span class="op" id="8108249">)</span><span class="op" id="8108250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108254">NewAlpha16</span><span class="op" id="8108264">(</span><span class="ident" id="8108265">Rect</span><span class="op" id="8108269">(</span><span class="num" id="8108270">0</span><span class="op" id="8108271">,</span>&nbsp;<span class="num" id="8108273">0</span><span class="op" id="8108274">,</span>&nbsp;<span class="num" id="8108276">10</span><span class="op" id="8108278">,</span>&nbsp;<span class="num" id="8108280">10</span><span class="op" id="8108282">)</span><span class="op" id="8108283">)</span><span class="op" id="8108284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108288">NewGray</span><span class="op" id="8108295">(</span><span class="ident" id="8108296">Rect</span><span class="op" id="8108300">(</span><span class="num" id="8108301">0</span><span class="op" id="8108302">,</span>&nbsp;<span class="num" id="8108304">0</span><span class="op" id="8108305">,</span>&nbsp;<span class="num" id="8108307">10</span><span class="op" id="8108309">,</span>&nbsp;<span class="num" id="8108311">10</span><span class="op" id="8108313">)</span><span class="op" id="8108314">)</span><span class="op" id="8108315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108319">NewGray16</span><span class="op" id="8108328">(</span><span class="ident" id="8108329">Rect</span><span class="op" id="8108333">(</span><span class="num" id="8108334">0</span><span class="op" id="8108335">,</span>&nbsp;<span class="num" id="8108337">0</span><span class="op" id="8108338">,</span>&nbsp;<span class="num" id="8108340">10</span><span class="op" id="8108342">,</span>&nbsp;<span class="num" id="8108344">10</span><span class="op" id="8108346">)</span><span class="op" id="8108347">)</span><span class="op" id="8108348">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108352">NewPaletted</span><span class="op" id="8108363">(</span><span class="ident" id="8108364">Rect</span><span class="op" id="8108368">(</span><span class="num" id="8108369">0</span><span class="op" id="8108370">,</span>&nbsp;<span class="num" id="8108372">0</span><span class="op" id="8108373">,</span>&nbsp;<span class="num" id="8108375">10</span><span class="op" id="8108377">,</span>&nbsp;<span class="num" id="8108379">10</span><span class="op" id="8108381">)</span><span class="op" id="8108382">,</span>&nbsp;<span class="ident" id="8108384">color</span><span class="op" id="8108389">.</span><span class="ident" id="8108390">Palette</span><span class="op" id="8108397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108402">Transparent</span><span class="op" id="8108413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108418">Opaque</span><span class="op" id="8108424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8108428">}</span><span class="op" id="8108429">)</span><span class="op" id="8108430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8108433">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8108436">for</span>&nbsp;<span class="ident" id="8108440">_</span><span class="op" id="8108441">,</span>&nbsp;<span class="ident" id="8108443">m</span>&nbsp;<span class="op" id="8108445">:=</span>&nbsp;<span class="keyword" id="8108448">range</span>&nbsp;<span class="ident" id="8108454">testImage</span>&nbsp;<span class="op" id="8108464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8108468">if</span>&nbsp;<span class="op" id="8108471">!</span><span class="ident" id="8108472">Rect</span><span class="op" id="8108476">(</span><span class="num" id="8108477">0</span><span class="op" id="8108478">,</span>&nbsp;<span class="num" id="8108480">0</span><span class="op" id="8108481">,</span>&nbsp;<span class="num" id="8108483">10</span><span class="op" id="8108485">,</span>&nbsp;<span class="num" id="8108487">10</span><span class="op" id="8108489">)</span><span class="op" id="8108490">.</span><span class="ident" id="8108491">Eq</span><span class="op" id="8108493">(</span><span class="ident" id="8108494">m</span><span class="op" id="8108495">.</span><span class="ident" id="8108496">Bounds</span><span class="op" id="8108502">(</span><span class="op" id="8108503">)</span><span class="op" id="8108504">)</span>&nbsp;<span class="op" id="8108506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108511">t</span><span class="op" id="8108512">.</span><span class="ident" id="8108513">Errorf</span><span class="op" id="8108519">(</span><span class="string" id="8108520">&#34;%T:&nbsp;want&nbsp;bounds&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8108548">,</span>&nbsp;<span class="ident" id="8108550">m</span><span class="op" id="8108551">,</span>&nbsp;<span class="ident" id="8108553">Rect</span><span class="op" id="8108557">(</span><span class="num" id="8108558">0</span><span class="op" id="8108559">,</span>&nbsp;<span class="num" id="8108561">0</span><span class="op" id="8108562">,</span>&nbsp;<span class="num" id="8108564">10</span><span class="op" id="8108566">,</span>&nbsp;<span class="num" id="8108568">10</span><span class="op" id="8108570">)</span><span class="op" id="8108571">,</span>&nbsp;<span class="ident" id="8108573">m</span><span class="op" id="8108574">.</span><span class="ident" id="8108575">Bounds</span><span class="op" id="8108581">(</span><span class="op" id="8108582">)</span><span class="op" id="8108583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8108588">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8108599">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8108603">if</span>&nbsp;<span class="op" id="8108606">!</span><span class="ident" id="8108607">cmp</span><span class="op" id="8108610">(</span><span class="ident" id="8108611">t</span><span class="op" id="8108612">,</span>&nbsp;<span class="ident" id="8108614">m</span><span class="op" id="8108615">.</span><span class="ident" id="8108616">ColorModel</span><span class="op" id="8108626">(</span><span class="op" id="8108627">)</span><span class="op" id="8108628">,</span>&nbsp;<span class="ident" id="8108630">Transparent</span><span class="op" id="8108641">,</span>&nbsp;<span class="ident" id="8108643">m</span><span class="op" id="8108644">.</span><span class="ident" id="8108645">At</span><span class="op" id="8108647">(</span><span class="num" id="8108648">6</span><span class="op" id="8108649">,</span>&nbsp;<span class="num" id="8108651">3</span><span class="op" id="8108652">)</span><span class="op" id="8108653">)</span>&nbsp;<span class="op" id="8108655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108660">t</span><span class="op" id="8108661">.</span><span class="ident" id="8108662">Errorf</span><span class="op" id="8108668">(</span><span class="string" id="8108669">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8108711">,</span>&nbsp;<span class="ident" id="8108713">m</span><span class="op" id="8108714">,</span>&nbsp;<span class="ident" id="8108716">m</span><span class="op" id="8108717">.</span><span class="ident" id="8108718">At</span><span class="op" id="8108720">(</span><span class="num" id="8108721">6</span><span class="op" id="8108722">,</span>&nbsp;<span class="num" id="8108724">3</span><span class="op" id="8108725">)</span><span class="op" id="8108726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8108731">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8108742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108746">m</span><span class="op" id="8108747">.</span><span class="ident" id="8108748">Set</span><span class="op" id="8108751">(</span><span class="num" id="8108752">6</span><span class="op" id="8108753">,</span>&nbsp;<span class="num" id="8108755">3</span><span class="op" id="8108756">,</span>&nbsp;<span class="ident" id="8108758">Opaque</span><span class="op" id="8108764">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8108768">if</span>&nbsp;<span class="op" id="8108771">!</span><span class="ident" id="8108772">cmp</span><span class="op" id="8108775">(</span><span class="ident" id="8108776">t</span><span class="op" id="8108777">,</span>&nbsp;<span class="ident" id="8108779">m</span><span class="op" id="8108780">.</span><span class="ident" id="8108781">ColorModel</span><span class="op" id="8108791">(</span><span class="op" id="8108792">)</span><span class="op" id="8108793">,</span>&nbsp;<span class="ident" id="8108795">Opaque</span><span class="op" id="8108801">,</span>&nbsp;<span class="ident" id="8108803">m</span><span class="op" id="8108804">.</span><span class="ident" id="8108805">At</span><span class="op" id="8108807">(</span><span class="num" id="8108808">6</span><span class="op" id="8108809">,</span>&nbsp;<span class="num" id="8108811">3</span><span class="op" id="8108812">)</span><span class="op" id="8108813">)</span>&nbsp;<span class="op" id="8108815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108820">t</span><span class="op" id="8108821">.</span><span class="ident" id="8108822">Errorf</span><span class="op" id="8108828">(</span><span class="string" id="8108829">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8108875">,</span>&nbsp;<span class="ident" id="8108877">m</span><span class="op" id="8108878">,</span>&nbsp;<span class="ident" id="8108880">m</span><span class="op" id="8108881">.</span><span class="ident" id="8108882">At</span><span class="op" id="8108884">(</span><span class="num" id="8108885">6</span><span class="op" id="8108886">,</span>&nbsp;<span class="num" id="8108888">3</span><span class="op" id="8108889">)</span><span class="op" id="8108890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8108895">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8108906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8108910">if</span>&nbsp;<span class="op" id="8108913">!</span><span class="ident" id="8108914">m</span><span class="op" id="8108915">.</span><span class="ident" id="8108916">SubImage</span><span class="op" id="8108924">(</span><span class="ident" id="8108925">Rect</span><span class="op" id="8108929">(</span><span class="num" id="8108930">6</span><span class="op" id="8108931">,</span>&nbsp;<span class="num" id="8108933">3</span><span class="op" id="8108934">,</span>&nbsp;<span class="num" id="8108936">7</span><span class="op" id="8108937">,</span>&nbsp;<span class="num" id="8108939">4</span><span class="op" id="8108940">)</span><span class="op" id="8108941">)</span><span class="op" id="8108942">.</span><span class="op" id="8108943">(</span><span class="ident" id="8108944">image</span><span class="op" id="8108949">)</span><span class="op" id="8108950">.</span><span class="ident" id="8108951">Opaque</span><span class="op" id="8108957">(</span><span class="op" id="8108958">)</span>&nbsp;<span class="op" id="8108960">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108965">t</span><span class="op" id="8108966">.</span><span class="ident" id="8108967">Errorf</span><span class="op" id="8108973">(</span><span class="string" id="8108974">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3)&nbsp;was&nbsp;not&nbsp;opaque&#34;</span><span class="op" id="8109004">,</span>&nbsp;<span class="ident" id="8109006">m</span><span class="op" id="8109007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8109012">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8109023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109027">m</span>&nbsp;<span class="op" id="8109029">=</span>&nbsp;<span class="ident" id="8109031">m</span><span class="op" id="8109032">.</span><span class="ident" id="8109033">SubImage</span><span class="op" id="8109041">(</span><span class="ident" id="8109042">Rect</span><span class="op" id="8109046">(</span><span class="num" id="8109047">3</span><span class="op" id="8109048">,</span>&nbsp;<span class="num" id="8109050">2</span><span class="op" id="8109051">,</span>&nbsp;<span class="num" id="8109053">9</span><span class="op" id="8109054">,</span>&nbsp;<span class="num" id="8109056">8</span><span class="op" id="8109057">)</span><span class="op" id="8109058">)</span><span class="op" id="8109059">.</span><span class="op" id="8109060">(</span><span class="ident" id="8109061">image</span><span class="op" id="8109066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8109070">if</span>&nbsp;<span class="op" id="8109073">!</span><span class="ident" id="8109074">Rect</span><span class="op" id="8109078">(</span><span class="num" id="8109079">3</span><span class="op" id="8109080">,</span>&nbsp;<span class="num" id="8109082">2</span><span class="op" id="8109083">,</span>&nbsp;<span class="num" id="8109085">9</span><span class="op" id="8109086">,</span>&nbsp;<span class="num" id="8109088">8</span><span class="op" id="8109089">)</span><span class="op" id="8109090">.</span><span class="ident" id="8109091">Eq</span><span class="op" id="8109093">(</span><span class="ident" id="8109094">m</span><span class="op" id="8109095">.</span><span class="ident" id="8109096">Bounds</span><span class="op" id="8109102">(</span><span class="op" id="8109103">)</span><span class="op" id="8109104">)</span>&nbsp;<span class="op" id="8109106">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109111">t</span><span class="op" id="8109112">.</span><span class="ident" id="8109113">Errorf</span><span class="op" id="8109119">(</span><span class="string" id="8109120">&#34;%T:&nbsp;sub-image&nbsp;want&nbsp;bounds&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8109158">,</span>&nbsp;<span class="ident" id="8109160">m</span><span class="op" id="8109161">,</span>&nbsp;<span class="ident" id="8109163">Rect</span><span class="op" id="8109167">(</span><span class="num" id="8109168">3</span><span class="op" id="8109169">,</span>&nbsp;<span class="num" id="8109171">2</span><span class="op" id="8109172">,</span>&nbsp;<span class="num" id="8109174">9</span><span class="op" id="8109175">,</span>&nbsp;<span class="num" id="8109177">8</span><span class="op" id="8109178">)</span><span class="op" id="8109179">,</span>&nbsp;<span class="ident" id="8109181">m</span><span class="op" id="8109182">.</span><span class="ident" id="8109183">Bounds</span><span class="op" id="8109189">(</span><span class="op" id="8109190">)</span><span class="op" id="8109191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8109196">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8109207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8109211">if</span>&nbsp;<span class="op" id="8109214">!</span><span class="ident" id="8109215">cmp</span><span class="op" id="8109218">(</span><span class="ident" id="8109219">t</span><span class="op" id="8109220">,</span>&nbsp;<span class="ident" id="8109222">m</span><span class="op" id="8109223">.</span><span class="ident" id="8109224">ColorModel</span><span class="op" id="8109234">(</span><span class="op" id="8109235">)</span><span class="op" id="8109236">,</span>&nbsp;<span class="ident" id="8109238">Opaque</span><span class="op" id="8109244">,</span>&nbsp;<span class="ident" id="8109246">m</span><span class="op" id="8109247">.</span><span class="ident" id="8109248">At</span><span class="op" id="8109250">(</span><span class="num" id="8109251">6</span><span class="op" id="8109252">,</span>&nbsp;<span class="num" id="8109254">3</span><span class="op" id="8109255">)</span><span class="op" id="8109256">)</span>&nbsp;<span class="op" id="8109258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109263">t</span><span class="op" id="8109264">.</span><span class="ident" id="8109265">Errorf</span><span class="op" id="8109271">(</span><span class="string" id="8109272">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8109328">,</span>&nbsp;<span class="ident" id="8109330">m</span><span class="op" id="8109331">,</span>&nbsp;<span class="ident" id="8109333">m</span><span class="op" id="8109334">.</span><span class="ident" id="8109335">At</span><span class="op" id="8109337">(</span><span class="num" id="8109338">6</span><span class="op" id="8109339">,</span>&nbsp;<span class="num" id="8109341">3</span><span class="op" id="8109342">)</span><span class="op" id="8109343">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8109348">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8109359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8109363">if</span>&nbsp;<span class="op" id="8109366">!</span><span class="ident" id="8109367">cmp</span><span class="op" id="8109370">(</span><span class="ident" id="8109371">t</span><span class="op" id="8109372">,</span>&nbsp;<span class="ident" id="8109374">m</span><span class="op" id="8109375">.</span><span class="ident" id="8109376">ColorModel</span><span class="op" id="8109386">(</span><span class="op" id="8109387">)</span><span class="op" id="8109388">,</span>&nbsp;<span class="ident" id="8109390">Transparent</span><span class="op" id="8109401">,</span>&nbsp;<span class="ident" id="8109403">m</span><span class="op" id="8109404">.</span><span class="ident" id="8109405">At</span><span class="op" id="8109407">(</span><span class="num" id="8109408">3</span><span class="op" id="8109409">,</span>&nbsp;<span class="num" id="8109411">3</span><span class="op" id="8109412">)</span><span class="op" id="8109413">)</span>&nbsp;<span class="op" id="8109415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109420">t</span><span class="op" id="8109421">.</span><span class="ident" id="8109422">Errorf</span><span class="op" id="8109428">(</span><span class="string" id="8109429">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(3,&nbsp;3),&nbsp;want&nbsp;a&nbsp;zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8109481">,</span>&nbsp;<span class="ident" id="8109483">m</span><span class="op" id="8109484">,</span>&nbsp;<span class="ident" id="8109486">m</span><span class="op" id="8109487">.</span><span class="ident" id="8109488">At</span><span class="op" id="8109490">(</span><span class="num" id="8109491">3</span><span class="op" id="8109492">,</span>&nbsp;<span class="num" id="8109494">3</span><span class="op" id="8109495">)</span><span class="op" id="8109496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8109501">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8109512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109516">m</span><span class="op" id="8109517">.</span><span class="ident" id="8109518">Set</span><span class="op" id="8109521">(</span><span class="num" id="8109522">3</span><span class="op" id="8109523">,</span>&nbsp;<span class="num" id="8109525">3</span><span class="op" id="8109526">,</span>&nbsp;<span class="ident" id="8109528">Opaque</span><span class="op" id="8109534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8109538">if</span>&nbsp;<span class="op" id="8109541">!</span><span class="ident" id="8109542">cmp</span><span class="op" id="8109545">(</span><span class="ident" id="8109546">t</span><span class="op" id="8109547">,</span>&nbsp;<span class="ident" id="8109549">m</span><span class="op" id="8109550">.</span><span class="ident" id="8109551">ColorModel</span><span class="op" id="8109561">(</span><span class="op" id="8109562">)</span><span class="op" id="8109563">,</span>&nbsp;<span class="ident" id="8109565">Opaque</span><span class="op" id="8109571">,</span>&nbsp;<span class="ident" id="8109573">m</span><span class="op" id="8109574">.</span><span class="ident" id="8109575">At</span><span class="op" id="8109577">(</span><span class="num" id="8109578">3</span><span class="op" id="8109579">,</span>&nbsp;<span class="num" id="8109581">3</span><span class="op" id="8109582">)</span><span class="op" id="8109583">)</span>&nbsp;<span class="op" id="8109585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109590">t</span><span class="op" id="8109591">.</span><span class="ident" id="8109592">Errorf</span><span class="op" id="8109598">(</span><span class="string" id="8109599">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(3,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8109655">,</span>&nbsp;<span class="ident" id="8109657">m</span><span class="op" id="8109658">,</span>&nbsp;<span class="ident" id="8109660">m</span><span class="op" id="8109661">.</span><span class="ident" id="8109662">At</span><span class="op" id="8109664">(</span><span class="num" id="8109665">3</span><span class="op" id="8109666">,</span>&nbsp;<span class="num" id="8109668">3</span><span class="op" id="8109669">)</span><span class="op" id="8109670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8109675">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8109686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8109690">//&nbsp;Test&nbsp;that&nbsp;taking&nbsp;an&nbsp;empty&nbsp;sub-image&nbsp;starting&nbsp;at&nbsp;a&nbsp;corner&nbsp;does&nbsp;not&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109768">m</span><span class="op" id="8109769">.</span><span class="ident" id="8109770">SubImage</span><span class="op" id="8109778">(</span><span class="ident" id="8109779">Rect</span><span class="op" id="8109783">(</span><span class="num" id="8109784">0</span><span class="op" id="8109785">,</span>&nbsp;<span class="num" id="8109787">0</span><span class="op" id="8109788">,</span>&nbsp;<span class="num" id="8109790">0</span><span class="op" id="8109791">,</span>&nbsp;<span class="num" id="8109793">0</span><span class="op" id="8109794">)</span><span class="op" id="8109795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109799">m</span><span class="op" id="8109800">.</span><span class="ident" id="8109801">SubImage</span><span class="op" id="8109809">(</span><span class="ident" id="8109810">Rect</span><span class="op" id="8109814">(</span><span class="num" id="8109815">10</span><span class="op" id="8109817">,</span>&nbsp;<span class="num" id="8109819">0</span><span class="op" id="8109820">,</span>&nbsp;<span class="num" id="8109822">10</span><span class="op" id="8109824">,</span>&nbsp;<span class="num" id="8109826">0</span><span class="op" id="8109827">)</span><span class="op" id="8109828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109832">m</span><span class="op" id="8109833">.</span><span class="ident" id="8109834">SubImage</span><span class="op" id="8109842">(</span><span class="ident" id="8109843">Rect</span><span class="op" id="8109847">(</span><span class="num" id="8109848">0</span><span class="op" id="8109849">,</span>&nbsp;<span class="num" id="8109851">10</span><span class="op" id="8109853">,</span>&nbsp;<span class="num" id="8109855">0</span><span class="op" id="8109856">,</span>&nbsp;<span class="num" id="8109858">10</span><span class="op" id="8109860">)</span><span class="op" id="8109861">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109865">m</span><span class="op" id="8109866">.</span><span class="ident" id="8109867">SubImage</span><span class="op" id="8109875">(</span><span class="ident" id="8109876">Rect</span><span class="op" id="8109880">(</span><span class="num" id="8109881">10</span><span class="op" id="8109883">,</span>&nbsp;<span class="num" id="8109885">10</span><span class="op" id="8109887">,</span>&nbsp;<span class="num" id="8109889">10</span><span class="op" id="8109891">,</span>&nbsp;<span class="num" id="8109893">10</span><span class="op" id="8109895">)</span><span class="op" id="8109896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8109899">}</span><br>
<span class="lineno"></span><span class="op" id="8109901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8109904">func</span>&nbsp;<span class="ident" id="8109909">Test16BitsPerColorChannel</span><span class="op" id="8109934">(</span><span class="ident" id="8109935">t</span>&nbsp;<span class="op" id="8109937">*</span><span class="ident" id="8109938">testing</span><span class="op" id="8109945">.</span><span class="ident" id="8109946">T</span><span class="op" id="8109947">)</span>&nbsp;<span class="op" id="8109949">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109952">testColorModel</span>&nbsp;<span class="op" id="8109967">:=</span>&nbsp;<span class="op" id="8109970">[</span><span class="op" id="8109971">]</span><span class="ident" id="8109972">color</span><span class="op" id="8109977">.</span><span class="ident" id="8109978">Model</span><span class="op" id="8109983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109987">color</span><span class="op" id="8109992">.</span><span class="ident" id="8109993">RGBA64Model</span><span class="op" id="8110004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110008">color</span><span class="op" id="8110013">.</span><span class="ident" id="8110014">NRGBA64Model</span><span class="op" id="8110026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110030">color</span><span class="op" id="8110035">.</span><span class="ident" id="8110036">Alpha16Model</span><span class="op" id="8110048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110052">color</span><span class="op" id="8110057">.</span><span class="ident" id="8110058">Gray16Model</span><span class="op" id="8110069">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8110072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8110075">for</span>&nbsp;<span class="ident" id="8110079">_</span><span class="op" id="8110080">,</span>&nbsp;<span class="ident" id="8110082">cm</span>&nbsp;<span class="op" id="8110085">:=</span>&nbsp;<span class="keyword" id="8110088">range</span>&nbsp;<span class="ident" id="8110094">testColorModel</span>&nbsp;<span class="op" id="8110109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110113">c</span>&nbsp;<span class="op" id="8110115">:=</span>&nbsp;<span class="ident" id="8110118">cm</span><span class="op" id="8110120">.</span><span class="ident" id="8110121">Convert</span><span class="op" id="8110128">(</span><span class="ident" id="8110129">color</span><span class="op" id="8110134">.</span><span class="ident" id="8110135">RGBA64</span><span class="op" id="8110141">{</span><span class="num" id="8110142">0x1234</span><span class="op" id="8110148">,</span>&nbsp;<span class="num" id="8110150">0x1234</span><span class="op" id="8110156">,</span>&nbsp;<span class="num" id="8110158">0x1234</span><span class="op" id="8110164">,</span>&nbsp;<span class="num" id="8110166">0x1234</span><span class="op" id="8110172">}</span><span class="op" id="8110173">)</span>&nbsp;<span class="comment" id="8110175">//&nbsp;Premultiplied&nbsp;alpha.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110201">r</span><span class="op" id="8110202">,</span>&nbsp;<span class="ident" id="8110204">_</span><span class="op" id="8110205">,</span>&nbsp;<span class="ident" id="8110207">_</span><span class="op" id="8110208">,</span>&nbsp;<span class="ident" id="8110210">_</span>&nbsp;<span class="op" id="8110212">:=</span>&nbsp;<span class="ident" id="8110215">c</span><span class="op" id="8110216">.</span><span class="ident" id="8110217">RGBA</span><span class="op" id="8110221">(</span><span class="op" id="8110222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8110226">if</span>&nbsp;<span class="ident" id="8110229">r</span>&nbsp;<span class="op" id="8110231">!=</span>&nbsp;<span class="num" id="8110234">0x1234</span>&nbsp;<span class="op" id="8110241">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110246">t</span><span class="op" id="8110247">.</span><span class="ident" id="8110248">Errorf</span><span class="op" id="8110254">(</span><span class="string" id="8110255">&#34;%T:&nbsp;want&nbsp;red&nbsp;value&nbsp;0x%04x&nbsp;got&nbsp;0x%04x&#34;</span><span class="op" id="8110293">,</span>&nbsp;<span class="ident" id="8110295">c</span><span class="op" id="8110296">,</span>&nbsp;<span class="num" id="8110298">0x1234</span><span class="op" id="8110304">,</span>&nbsp;<span class="ident" id="8110306">r</span><span class="op" id="8110307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8110312">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8110323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8110326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110329">testImage</span>&nbsp;<span class="op" id="8110339">:=</span>&nbsp;<span class="op" id="8110342">[</span><span class="op" id="8110343">]</span><span class="ident" id="8110344">image</span><span class="op" id="8110349">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110353">NewRGBA64</span><span class="op" id="8110362">(</span><span class="ident" id="8110363">Rect</span><span class="op" id="8110367">(</span><span class="num" id="8110368">0</span><span class="op" id="8110369">,</span>&nbsp;<span class="num" id="8110371">0</span><span class="op" id="8110372">,</span>&nbsp;<span class="num" id="8110374">10</span><span class="op" id="8110376">,</span>&nbsp;<span class="num" id="8110378">10</span><span class="op" id="8110380">)</span><span class="op" id="8110381">)</span><span class="op" id="8110382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110386">NewNRGBA64</span><span class="op" id="8110396">(</span><span class="ident" id="8110397">Rect</span><span class="op" id="8110401">(</span><span class="num" id="8110402">0</span><span class="op" id="8110403">,</span>&nbsp;<span class="num" id="8110405">0</span><span class="op" id="8110406">,</span>&nbsp;<span class="num" id="8110408">10</span><span class="op" id="8110410">,</span>&nbsp;<span class="num" id="8110412">10</span><span class="op" id="8110414">)</span><span class="op" id="8110415">)</span><span class="op" id="8110416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110420">NewAlpha16</span><span class="op" id="8110430">(</span><span class="ident" id="8110431">Rect</span><span class="op" id="8110435">(</span><span class="num" id="8110436">0</span><span class="op" id="8110437">,</span>&nbsp;<span class="num" id="8110439">0</span><span class="op" id="8110440">,</span>&nbsp;<span class="num" id="8110442">10</span><span class="op" id="8110444">,</span>&nbsp;<span class="num" id="8110446">10</span><span class="op" id="8110448">)</span><span class="op" id="8110449">)</span><span class="op" id="8110450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110454">NewGray16</span><span class="op" id="8110463">(</span><span class="ident" id="8110464">Rect</span><span class="op" id="8110468">(</span><span class="num" id="8110469">0</span><span class="op" id="8110470">,</span>&nbsp;<span class="num" id="8110472">0</span><span class="op" id="8110473">,</span>&nbsp;<span class="num" id="8110475">10</span><span class="op" id="8110477">,</span>&nbsp;<span class="num" id="8110479">10</span><span class="op" id="8110481">)</span><span class="op" id="8110482">)</span><span class="op" id="8110483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8110486">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8110489">for</span>&nbsp;<span class="ident" id="8110493">_</span><span class="op" id="8110494">,</span>&nbsp;<span class="ident" id="8110496">m</span>&nbsp;<span class="op" id="8110498">:=</span>&nbsp;<span class="keyword" id="8110501">range</span>&nbsp;<span class="ident" id="8110507">testImage</span>&nbsp;<span class="op" id="8110517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110521">m</span><span class="op" id="8110522">.</span><span class="ident" id="8110523">Set</span><span class="op" id="8110526">(</span><span class="num" id="8110527">1</span><span class="op" id="8110528">,</span>&nbsp;<span class="num" id="8110530">2</span><span class="op" id="8110531">,</span>&nbsp;<span class="ident" id="8110533">color</span><span class="op" id="8110538">.</span><span class="ident" id="8110539">NRGBA64</span><span class="op" id="8110546">{</span><span class="num" id="8110547">0xffff</span><span class="op" id="8110553">,</span>&nbsp;<span class="num" id="8110555">0xffff</span><span class="op" id="8110561">,</span>&nbsp;<span class="num" id="8110563">0xffff</span><span class="op" id="8110569">,</span>&nbsp;<span class="num" id="8110571">0x1357</span><span class="op" id="8110577">}</span><span class="op" id="8110578">)</span>&nbsp;<span class="comment" id="8110580">//&nbsp;Non-premultiplied&nbsp;alpha.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110610">r</span><span class="op" id="8110611">,</span>&nbsp;<span class="ident" id="8110613">_</span><span class="op" id="8110614">,</span>&nbsp;<span class="ident" id="8110616">_</span><span class="op" id="8110617">,</span>&nbsp;<span class="ident" id="8110619">_</span>&nbsp;<span class="op" id="8110621">:=</span>&nbsp;<span class="ident" id="8110624">m</span><span class="op" id="8110625">.</span><span class="ident" id="8110626">At</span><span class="op" id="8110628">(</span><span class="num" id="8110629">1</span><span class="op" id="8110630">,</span>&nbsp;<span class="num" id="8110632">2</span><span class="op" id="8110633">)</span><span class="op" id="8110634">.</span><span class="ident" id="8110635">RGBA</span><span class="op" id="8110639">(</span><span class="op" id="8110640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8110644">if</span>&nbsp;<span class="ident" id="8110647">r</span>&nbsp;<span class="op" id="8110649">!=</span>&nbsp;<span class="num" id="8110652">0x1357</span>&nbsp;<span class="op" id="8110659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110664">t</span><span class="op" id="8110665">.</span><span class="ident" id="8110666">Errorf</span><span class="op" id="8110672">(</span><span class="string" id="8110673">&#34;%T:&nbsp;want&nbsp;red&nbsp;value&nbsp;0x%04x&nbsp;got&nbsp;0x%04x&#34;</span><span class="op" id="8110711">,</span>&nbsp;<span class="ident" id="8110713">m</span><span class="op" id="8110714">,</span>&nbsp;<span class="num" id="8110716">0x1357</span><span class="op" id="8110722">,</span>&nbsp;<span class="ident" id="8110724">r</span><span class="op" id="8110725">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8110730">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8110741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8110744">}</span><br>
<span class="lineno"></span><span class="op" id="8110746">}</span>
</div>
</body>
</html>
