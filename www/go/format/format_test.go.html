<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8212465">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8212520">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8212574">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8212625">package</span>&nbsp;<span class="ident" id="8212633">format</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8212641">import</span>&nbsp;<span class="op" id="8212648">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8212651">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8212660">&#34;go/parser&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8212673">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8212685">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8212698">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8212709">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8212719">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8212722">const</span>&nbsp;<span class="ident" id="8212728">testfile</span>&nbsp;<span class="op" id="8212737">=</span>&nbsp;<span class="string" id="8212739">&#34;format_test.go&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8212757">func</span>&nbsp;<span class="ident" id="8212762">diff</span><span class="op" id="8212766">(</span><span class="ident" id="8212767">t</span>&nbsp;<span class="op" id="8212769">*</span><span class="ident" id="8212770"><a href="/go/format/format_test.go.html#8212709">testing</a></span><span class="op" id="8212777">.</span><span class="ident" id="8212778">T</span><span class="op" id="8212779">,</span>&nbsp;<span class="ident" id="8212781">dst</span><span class="op" id="8212784">,</span>&nbsp;<span class="ident" id="8212786">src</span>&nbsp;<span class="op" id="8212790">[</span><span class="op" id="8212791">]</span><span class="builtintype" id="8212792">byte</span><span class="op" id="8212796">)</span>&nbsp;<span class="op" id="8212798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8212801">line</span>&nbsp;<span class="op" id="8212806">:=</span>&nbsp;<span class="num" id="8212809">1</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8212812">offs</span>&nbsp;<span class="op" id="8212817">:=</span>&nbsp;<span class="num" id="8212820">0</span>&nbsp;<span class="comment" id="8212822">//&nbsp;line&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8212838">for</span>&nbsp;<span class="ident" id="8212842">i</span>&nbsp;<span class="op" id="8212844">:=</span>&nbsp;<span class="num" id="8212847">0</span><span class="op" id="8212848">;</span>&nbsp;<span class="ident" id="8212850"><a href="/go/format/format_test.go.html#8212842">i</a></span>&nbsp;<span class="op" id="8212852">&lt;</span>&nbsp;<span class="builtinfunc" id="8212854">len</span><span class="op" id="8212857">(</span><span class="ident" id="8212858"><a href="/go/format/format_test.go.html#8212781">dst</a></span><span class="op" id="8212861">)</span>&nbsp;<span class="op" id="8212863">&amp;&amp;</span>&nbsp;<span class="ident" id="8212866"><a href="/go/format/format_test.go.html#8212842">i</a></span>&nbsp;<span class="op" id="8212868">&lt;</span>&nbsp;<span class="builtinfunc" id="8212870">len</span><span class="op" id="8212873">(</span><span class="ident" id="8212874"><a href="/go/format/format_test.go.html#8212786">src</a></span><span class="op" id="8212877">)</span><span class="op" id="8212878">;</span>&nbsp;<span class="ident" id="8212880"><a href="/go/format/format_test.go.html#8212842">i</a></span><span class="op" id="8212881">++</span>&nbsp;<span class="op" id="8212884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8212888">d</span>&nbsp;<span class="op" id="8212890">:=</span>&nbsp;<span class="ident" id="8212893"><a href="/go/format/format_test.go.html#8212781">dst</a></span><span class="op" id="8212896">[</span><span class="ident" id="8212897"><a href="/go/format/format_test.go.html#8212842">i</a></span><span class="op" id="8212898">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8212902">s</span>&nbsp;<span class="op" id="8212904">:=</span>&nbsp;<span class="ident" id="8212907"><a href="/go/format/format_test.go.html#8212786">src</a></span><span class="op" id="8212910">[</span><span class="ident" id="8212911"><a href="/go/format/format_test.go.html#8212842">i</a></span><span class="op" id="8212912">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8212916">if</span>&nbsp;<span class="ident" id="8212919"><a href="/go/format/format_test.go.html#8212888">d</a></span>&nbsp;<span class="op" id="8212921">!=</span>&nbsp;<span class="ident" id="8212924"><a href="/go/format/format_test.go.html#8212902">s</a></span>&nbsp;<span class="op" id="8212926">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8212931"><a href="/go/format/format_test.go.html#8212767">t</a></span><span class="op" id="8212932">.</span><span class="ident" id="8212933">Errorf</span><span class="op" id="8212939">(</span><span class="string" id="8212940">&#34;dst:%d:&nbsp;%s\n&#34;</span><span class="op" id="8212954">,</span>&nbsp;<span class="ident" id="8212956"><a href="/go/format/format_test.go.html#8212801">line</a></span><span class="op" id="8212960">,</span>&nbsp;<span class="ident" id="8212962"><a href="/go/format/format_test.go.html#8212781">dst</a></span><span class="op" id="8212965">[</span><span class="ident" id="8212966"><a href="/go/format/format_test.go.html#8212812">offs</a></span><span class="op" id="8212970">:</span><span class="ident" id="8212971"><a href="/go/format/format_test.go.html#8212842">i</a></span><span class="op" id="8212972">+</span><span class="num" id="8212973">1</span><span class="op" id="8212974">]</span><span class="op" id="8212975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8212980"><a href="/go/format/format_test.go.html#8212767">t</a></span><span class="op" id="8212981">.</span><span class="ident" id="8212982">Errorf</span><span class="op" id="8212988">(</span><span class="string" id="8212989">&#34;src:%d:&nbsp;%s\n&#34;</span><span class="op" id="8213003">,</span>&nbsp;<span class="ident" id="8213005"><a href="/go/format/format_test.go.html#8212801">line</a></span><span class="op" id="8213009">,</span>&nbsp;<span class="ident" id="8213011"><a href="/go/format/format_test.go.html#8212786">src</a></span><span class="op" id="8213014">[</span><span class="ident" id="8213015"><a href="/go/format/format_test.go.html#8212812">offs</a></span><span class="op" id="8213019">:</span><span class="ident" id="8213020"><a href="/go/format/format_test.go.html#8212842">i</a></span><span class="op" id="8213021">+</span><span class="num" id="8213022">1</span><span class="op" id="8213023">]</span><span class="op" id="8213024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213029">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213042">if</span>&nbsp;<span class="ident" id="8213045"><a href="/go/format/format_test.go.html#8212902">s</a></span>&nbsp;<span class="op" id="8213047">==</span>&nbsp;<span class="string" id="8213050">&#39;\n&#39;</span>&nbsp;<span class="op" id="8213055">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213060"><a href="/go/format/format_test.go.html#8212801">line</a></span><span class="op" id="8213064">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213070"><a href="/go/format/format_test.go.html#8212812">offs</a></span>&nbsp;<span class="op" id="8213075">=</span>&nbsp;<span class="ident" id="8213077"><a href="/go/format/format_test.go.html#8212842">i</a></span>&nbsp;<span class="op" id="8213079">+</span>&nbsp;<span class="num" id="8213081">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213091">if</span>&nbsp;<span class="builtinfunc" id="8213094">len</span><span class="op" id="8213097">(</span><span class="ident" id="8213098"><a href="/go/format/format_test.go.html#8212781">dst</a></span><span class="op" id="8213101">)</span>&nbsp;<span class="op" id="8213103">!=</span>&nbsp;<span class="builtinfunc" id="8213106">len</span><span class="op" id="8213109">(</span><span class="ident" id="8213110"><a href="/go/format/format_test.go.html#8212786">src</a></span><span class="op" id="8213113">)</span>&nbsp;<span class="op" id="8213115">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213119"><a href="/go/format/format_test.go.html#8212767">t</a></span><span class="op" id="8213120">.</span><span class="ident" id="8213121">Errorf</span><span class="op" id="8213127">(</span><span class="string" id="8213128">&#34;len(dst)&nbsp;=&nbsp;%d,&nbsp;len(src)&nbsp;=&nbsp;%d\nsrc&nbsp;=&nbsp;%q&#34;</span><span class="op" id="8213168">,</span>&nbsp;<span class="builtinfunc" id="8213170">len</span><span class="op" id="8213173">(</span><span class="ident" id="8213174"><a href="/go/format/format_test.go.html#8212781">dst</a></span><span class="op" id="8213177">)</span><span class="op" id="8213178">,</span>&nbsp;<span class="builtinfunc" id="8213180">len</span><span class="op" id="8213183">(</span><span class="ident" id="8213184"><a href="/go/format/format_test.go.html#8212786">src</a></span><span class="op" id="8213187">)</span><span class="op" id="8213188">,</span>&nbsp;<span class="ident" id="8213190"><a href="/go/format/format_test.go.html#8212786">src</a></span><span class="op" id="8213193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213196">}</span><br>
<span class="lineno"></span><span class="op" id="8213198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8213201">func</span>&nbsp;<span class="ident" id="8213206">TestNode</span><span class="op" id="8213214">(</span><span class="ident" id="8213215">t</span>&nbsp;<span class="op" id="8213217">*</span><span class="ident" id="8213218"><a href="/go/format/format_test.go.html#8212709">testing</a></span><span class="op" id="8213225">.</span><span class="ident" id="8213226">T</span><span class="op" id="8213227">)</span>&nbsp;<span class="op" id="8213229">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213232">src</span><span class="op" id="8213235">,</span>&nbsp;<span class="ident" id="8213237">err</span>&nbsp;<span class="op" id="8213241">:=</span>&nbsp;<span class="ident" id="8213244"><a href="/go/format/format_test.go.html#8212685">ioutil</a></span><span class="op" id="8213250">.</span><span class="ident" id="8213251">ReadFile</span><span class="op" id="8213259">(</span><span class="ident" id="8213260"><a href="/go/format/format_test.go.html#8212728">testfile</a></span><span class="op" id="8213268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213271">if</span>&nbsp;<span class="ident" id="8213274"><a href="/go/format/format_test.go.html#8213237">err</a></span>&nbsp;<span class="op" id="8213278">!=</span>&nbsp;<span class="ident" id="8213281">nil</span>&nbsp;<span class="op" id="8213285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213289"><a href="/go/format/format_test.go.html#8213215">t</a></span><span class="op" id="8213290">.</span><span class="ident" id="8213291">Fatal</span><span class="op" id="8213296">(</span><span class="ident" id="8213297"><a href="/go/format/format_test.go.html#8213237">err</a></span><span class="op" id="8213300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213307">fset</span>&nbsp;<span class="op" id="8213312">:=</span>&nbsp;<span class="ident" id="8213315"><a href="/go/format/format_test.go.html#8212673">token</a></span><span class="op" id="8213320">.</span><span class="ident" id="8213321">NewFileSet</span><span class="op" id="8213331">(</span><span class="op" id="8213332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213335">file</span><span class="op" id="8213339">,</span>&nbsp;<span class="ident" id="8213341"><a href="/go/format/format_test.go.html#8213237">err</a></span>&nbsp;<span class="op" id="8213345">:=</span>&nbsp;<span class="ident" id="8213348"><a href="/go/format/format_test.go.html#8212660">parser</a></span><span class="op" id="8213354">.</span><span class="ident" id="8213355">ParseFile</span><span class="op" id="8213364">(</span><span class="ident" id="8213365"><a href="/go/format/format_test.go.html#8213307">fset</a></span><span class="op" id="8213369">,</span>&nbsp;<span class="ident" id="8213371"><a href="/go/format/format_test.go.html#8212728">testfile</a></span><span class="op" id="8213379">,</span>&nbsp;<span class="ident" id="8213381"><a href="/go/format/format_test.go.html#8213232">src</a></span><span class="op" id="8213384">,</span>&nbsp;<span class="ident" id="8213386"><a href="/go/format/format_test.go.html#8212660">parser</a></span><span class="op" id="8213392">.</span><span class="ident" id="8213393">ParseComments</span><span class="op" id="8213406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213409">if</span>&nbsp;<span class="ident" id="8213412"><a href="/go/format/format_test.go.html#8213237">err</a></span>&nbsp;<span class="op" id="8213416">!=</span>&nbsp;<span class="ident" id="8213419">nil</span>&nbsp;<span class="op" id="8213423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213427"><a href="/go/format/format_test.go.html#8213215">t</a></span><span class="op" id="8213428">.</span><span class="ident" id="8213429">Fatal</span><span class="op" id="8213434">(</span><span class="ident" id="8213435"><a href="/go/format/format_test.go.html#8213237">err</a></span><span class="op" id="8213438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213441">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213445">var</span>&nbsp;<span class="ident" id="8213449">buf</span>&nbsp;<span class="ident" id="8213453"><a href="/go/format/format_test.go.html#8212651">bytes</a></span><span class="op" id="8213458">.</span><span class="ident" id="8213459">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213468">if</span>&nbsp;<span class="ident" id="8213471"><a href="/go/format/format_test.go.html#8213237">err</a></span>&nbsp;<span class="op" id="8213475">=</span>&nbsp;<span class="ident" id="8213477"><a href="/go/format/format.go.html#5085123">Node</a></span><span class="op" id="8213481">(</span><span class="op" id="8213482">&amp;</span><span class="ident" id="8213483"><a href="/go/format/format_test.go.html#8213449">buf</a></span><span class="op" id="8213486">,</span>&nbsp;<span class="ident" id="8213488"><a href="/go/format/format_test.go.html#8213307">fset</a></span><span class="op" id="8213492">,</span>&nbsp;<span class="ident" id="8213494"><a href="/go/format/format_test.go.html#8213335">file</a></span><span class="op" id="8213498">)</span><span class="op" id="8213499">;</span>&nbsp;<span class="ident" id="8213501"><a href="/go/format/format_test.go.html#8213237">err</a></span>&nbsp;<span class="op" id="8213505">!=</span>&nbsp;<span class="ident" id="8213508">nil</span>&nbsp;<span class="op" id="8213512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213516"><a href="/go/format/format_test.go.html#8213215">t</a></span><span class="op" id="8213517">.</span><span class="ident" id="8213518">Fatal</span><span class="op" id="8213523">(</span><span class="string" id="8213524">&#34;Node&nbsp;failed:&#34;</span><span class="op" id="8213538">,</span>&nbsp;<span class="ident" id="8213540"><a href="/go/format/format_test.go.html#8213237">err</a></span><span class="op" id="8213543">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213550"><a href="/go/format/format_test.go.html#8212762">diff</a></span><span class="op" id="8213554">(</span><span class="ident" id="8213555"><a href="/go/format/format_test.go.html#8213215">t</a></span><span class="op" id="8213556">,</span>&nbsp;<span class="ident" id="8213558"><a href="/go/format/format_test.go.html#8213449">buf</a></span><span class="op" id="8213561">.</span><span class="ident" id="8213562">Bytes</span><span class="op" id="8213567">(</span><span class="op" id="8213568">)</span><span class="op" id="8213569">,</span>&nbsp;<span class="ident" id="8213571"><a href="/go/format/format_test.go.html#8213232">src</a></span><span class="op" id="8213574">)</span><br>
<span class="lineno"></span><span class="op" id="8213576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="8213579">func</span>&nbsp;<span class="ident" id="8213584">TestSource</span><span class="op" id="8213594">(</span><span class="ident" id="8213595">t</span>&nbsp;<span class="op" id="8213597">*</span><span class="ident" id="8213598"><a href="/go/format/format_test.go.html#8212709">testing</a></span><span class="op" id="8213605">.</span><span class="ident" id="8213606">T</span><span class="op" id="8213607">)</span>&nbsp;<span class="op" id="8213609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213612">src</span><span class="op" id="8213615">,</span>&nbsp;<span class="ident" id="8213617">err</span>&nbsp;<span class="op" id="8213621">:=</span>&nbsp;<span class="ident" id="8213624"><a href="/go/format/format_test.go.html#8212685">ioutil</a></span><span class="op" id="8213630">.</span><span class="ident" id="8213631">ReadFile</span><span class="op" id="8213639">(</span><span class="ident" id="8213640"><a href="/go/format/format_test.go.html#8212728">testfile</a></span><span class="op" id="8213648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213651">if</span>&nbsp;<span class="ident" id="8213654"><a href="/go/format/format_test.go.html#8213617">err</a></span>&nbsp;<span class="op" id="8213658">!=</span>&nbsp;<span class="ident" id="8213661">nil</span>&nbsp;<span class="op" id="8213665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213669"><a href="/go/format/format_test.go.html#8213595">t</a></span><span class="op" id="8213670">.</span><span class="ident" id="8213671">Fatal</span><span class="op" id="8213676">(</span><span class="ident" id="8213677"><a href="/go/format/format_test.go.html#8213617">err</a></span><span class="op" id="8213680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213683">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213687">res</span><span class="op" id="8213690">,</span>&nbsp;<span class="ident" id="8213692"><a href="/go/format/format_test.go.html#8213617">err</a></span>&nbsp;<span class="op" id="8213696">:=</span>&nbsp;<span class="ident" id="8213699"><a href="/go/format/format.go.html#5086721">Source</a></span><span class="op" id="8213705">(</span><span class="ident" id="8213706"><a href="/go/format/format_test.go.html#8213612">src</a></span><span class="op" id="8213709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8213712">if</span>&nbsp;<span class="ident" id="8213715"><a href="/go/format/format_test.go.html#8213617">err</a></span>&nbsp;<span class="op" id="8213719">!=</span>&nbsp;<span class="ident" id="8213722">nil</span>&nbsp;<span class="op" id="8213726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213730"><a href="/go/format/format_test.go.html#8213595">t</a></span><span class="op" id="8213731">.</span><span class="ident" id="8213732">Fatal</span><span class="op" id="8213737">(</span><span class="string" id="8213738">&#34;Source&nbsp;failed:&#34;</span><span class="op" id="8213754">,</span>&nbsp;<span class="ident" id="8213756"><a href="/go/format/format_test.go.html#8213617">err</a></span><span class="op" id="8213759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8213762">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8213766"><a href="/go/format/format_test.go.html#8212762">diff</a></span><span class="op" id="8213770">(</span><span class="ident" id="8213771"><a href="/go/format/format_test.go.html#8213595">t</a></span><span class="op" id="8213772">,</span>&nbsp;<span class="ident" id="8213774"><a href="/go/format/format_test.go.html#8213687">res</a></span><span class="op" id="8213777">,</span>&nbsp;<span class="ident" id="8213779"><a href="/go/format/format_test.go.html#8213612">src</a></span><span class="op" id="8213782">)</span><br>
<span class="lineno"></span><span class="op" id="8213784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8213787">//&nbsp;Test&nbsp;cases&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;fail&nbsp;are&nbsp;marked&nbsp;by&nbsp;the&nbsp;prefix&nbsp;&#34;ERROR&#34;.</span><br>
<span class="lineno">75</span><span class="keyword" id="8213861">var</span>&nbsp;<span class="ident" id="8213865">tests</span>&nbsp;<span class="op" id="8213871">=</span>&nbsp;<span class="op" id="8213873">[</span><span class="op" id="8213874">]</span><span class="builtintype" id="8213875">string</span><span class="op" id="8213881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8213884">//&nbsp;declaration&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8213906">`import&nbsp;&#34;go/format&#34;`</span><span class="op" id="8213926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8213929">&#34;var&nbsp;x&nbsp;int&#34;</span><span class="op" id="8213940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8213943">&#34;var&nbsp;x&nbsp;int\n\ntype&nbsp;T&nbsp;struct{}&#34;</span><span class="op" id="8213973">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8213977">//&nbsp;statement&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8213997">&#34;x&nbsp;:=&nbsp;0&#34;</span><span class="op" id="8214005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8214008">&#34;f(a,&nbsp;b,&nbsp;c)\nvar&nbsp;x&nbsp;int&nbsp;=&nbsp;f(1,&nbsp;2,&nbsp;3)&#34;</span><span class="op" id="8214044">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8214048">//&nbsp;indentation,&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8214092">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()&#34;</span><span class="op" id="8214112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8214115">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8214141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8214144">&#34;\n\t\t\n\n\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8214180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8214183">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8214227">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8214230">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\nfoo\n`\n\n\n&#34;</span><span class="op" id="8214287">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8214293">//&nbsp;no&nbsp;indentation&nbsp;added&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8214337">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\n\t\tfoo\n`\n\n\n&#34;</span><span class="op" id="8214398">,</span>&nbsp;<span class="comment" id="8214400">//&nbsp;no&nbsp;indentation&nbsp;removed&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8214447">//&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8214460">&#34;i&nbsp;:=&nbsp;5&nbsp;/*&nbsp;Comment&nbsp;*/&#34;</span><span class="op" id="8214482">,</span>&nbsp;<span class="comment" id="8214484">//&nbsp;Issue&nbsp;5551.</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8214501">//&nbsp;erroneous&nbsp;programs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8214524">&#34;ERROR1&nbsp;+&nbsp;2&nbsp;+&#34;</span><span class="op" id="8214538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8214541">&#34;ERRORx&nbsp;:=&nbsp;&nbsp;0&#34;</span><span class="op" id="8214555">,</span><br>
<span class="lineno"></span><span class="op" id="8214557">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="8214560">func</span>&nbsp;<span class="ident" id="8214565">String</span><span class="op" id="8214571">(</span><span class="ident" id="8214572">s</span>&nbsp;<span class="builtintype" id="8214574">string</span><span class="op" id="8214580">)</span>&nbsp;<span class="op" id="8214582">(</span><span class="builtintype" id="8214583">string</span><span class="op" id="8214589">,</span>&nbsp;<span class="builtintype" id="8214591">error</span><span class="op" id="8214596">)</span>&nbsp;<span class="op" id="8214598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214601">res</span><span class="op" id="8214604">,</span>&nbsp;<span class="ident" id="8214606">err</span>&nbsp;<span class="op" id="8214610">:=</span>&nbsp;<span class="ident" id="8214613"><a href="/go/format/format.go.html#5086721">Source</a></span><span class="op" id="8214619">(</span><span class="op" id="8214620">[</span><span class="op" id="8214621">]</span><span class="builtintype" id="8214622">byte</span><span class="op" id="8214626">(</span><span class="ident" id="8214627"><a href="/go/format/format_test.go.html#8214572">s</a></span><span class="op" id="8214628">)</span><span class="op" id="8214629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8214632">if</span>&nbsp;<span class="ident" id="8214635"><a href="/go/format/format_test.go.html#8214606">err</a></span>&nbsp;<span class="op" id="8214639">!=</span>&nbsp;<span class="ident" id="8214642">nil</span>&nbsp;<span class="op" id="8214646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8214650">return</span>&nbsp;<span class="string" id="8214657">&#34;&#34;</span><span class="op" id="8214659">,</span>&nbsp;<span class="ident" id="8214661"><a href="/go/format/format_test.go.html#8214606">err</a></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8214666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8214669">return</span>&nbsp;<span class="builtintype" id="8214676">string</span><span class="op" id="8214682">(</span><span class="ident" id="8214683"><a href="/go/format/format_test.go.html#8214601">res</a></span><span class="op" id="8214686">)</span><span class="op" id="8214687">,</span>&nbsp;<span class="ident" id="8214689">nil</span><br>
<span class="lineno"></span><span class="op" id="8214693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8214696">func</span>&nbsp;<span class="ident" id="8214701">TestPartial</span><span class="op" id="8214712">(</span><span class="ident" id="8214713">t</span>&nbsp;<span class="op" id="8214715">*</span><span class="ident" id="8214716"><a href="/go/format/format_test.go.html#8212709">testing</a></span><span class="op" id="8214723">.</span><span class="ident" id="8214724">T</span><span class="op" id="8214725">)</span>&nbsp;<span class="op" id="8214727">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8214730">for</span>&nbsp;<span class="ident" id="8214734">_</span><span class="op" id="8214735">,</span>&nbsp;<span class="ident" id="8214737">src</span>&nbsp;<span class="op" id="8214741">:=</span>&nbsp;<span class="keyword" id="8214744">range</span>&nbsp;<span class="ident" id="8214750"><a href="/go/format/format_test.go.html#8213865">tests</a></span>&nbsp;<span class="op" id="8214756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8214760">if</span>&nbsp;<span class="ident" id="8214763"><a href="/go/format/format_test.go.html#8212698">strings</a></span><span class="op" id="8214770">.</span><span class="ident" id="8214771">HasPrefix</span><span class="op" id="8214780">(</span><span class="ident" id="8214781"><a href="/go/format/format_test.go.html#8214737">src</a></span><span class="op" id="8214784">,</span>&nbsp;<span class="string" id="8214786">&#34;ERROR&#34;</span><span class="op" id="8214793">)</span>&nbsp;<span class="op" id="8214795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8214800">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;fail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214828"><a href="/go/format/format_test.go.html#8214737">src</a></span>&nbsp;<span class="op" id="8214832">=</span>&nbsp;<span class="ident" id="8214834"><a href="/go/format/format_test.go.html#8214737">src</a></span><span class="op" id="8214837">[</span><span class="num" id="8214838">5</span><span class="op" id="8214839">:</span><span class="op" id="8214840">]</span>&nbsp;<span class="comment" id="8214842">//&nbsp;remove&nbsp;ERROR&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214868">res</span><span class="op" id="8214871">,</span>&nbsp;<span class="ident" id="8214873">err</span>&nbsp;<span class="op" id="8214877">:=</span>&nbsp;<span class="ident" id="8214880"><a href="/go/format/format_test.go.html#8214565">String</a></span><span class="op" id="8214886">(</span><span class="ident" id="8214887"><a href="/go/format/format_test.go.html#8214737">src</a></span><span class="op" id="8214890">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8214895">if</span>&nbsp;<span class="ident" id="8214898"><a href="/go/format/format_test.go.html#8214873">err</a></span>&nbsp;<span class="op" id="8214902">==</span>&nbsp;<span class="ident" id="8214905">nil</span>&nbsp;<span class="op" id="8214909">&amp;&amp;</span>&nbsp;<span class="ident" id="8214912"><a href="/go/format/format_test.go.html#8214868">res</a></span>&nbsp;<span class="op" id="8214916">==</span>&nbsp;<span class="ident" id="8214919"><a href="/go/format/format_test.go.html#8214737">src</a></span>&nbsp;<span class="op" id="8214923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8214929"><a href="/go/format/format_test.go.html#8214713">t</a></span><span class="op" id="8214930">.</span><span class="ident" id="8214931">Errorf</span><span class="op" id="8214937">(</span><span class="string" id="8214938">&#34;formatting&nbsp;succeeded&nbsp;but&nbsp;was&nbsp;expected&nbsp;to&nbsp;fail:\n%q&#34;</span><span class="op" id="8214990">,</span>&nbsp;<span class="ident" id="8214992"><a href="/go/format/format_test.go.html#8214737">src</a></span><span class="op" id="8214995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8215000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8215004">}</span>&nbsp;<span class="keyword" id="8215006">else</span>&nbsp;<span class="op" id="8215011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8215016">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;succeed</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215047">res</span><span class="op" id="8215050">,</span>&nbsp;<span class="ident" id="8215052">err</span>&nbsp;<span class="op" id="8215056">:=</span>&nbsp;<span class="ident" id="8215059"><a href="/go/format/format_test.go.html#8214565">String</a></span><span class="op" id="8215065">(</span><span class="ident" id="8215066"><a href="/go/format/format_test.go.html#8214737">src</a></span><span class="op" id="8215069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8215074">if</span>&nbsp;<span class="ident" id="8215077"><a href="/go/format/format_test.go.html#8215052">err</a></span>&nbsp;<span class="op" id="8215081">!=</span>&nbsp;<span class="ident" id="8215084">nil</span>&nbsp;<span class="op" id="8215088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215094"><a href="/go/format/format_test.go.html#8214713">t</a></span><span class="op" id="8215095">.</span><span class="ident" id="8215096">Errorf</span><span class="op" id="8215102">(</span><span class="string" id="8215103">&#34;formatting&nbsp;failed&nbsp;(%s):\n%q&#34;</span><span class="op" id="8215132">,</span>&nbsp;<span class="ident" id="8215134"><a href="/go/format/format_test.go.html#8215052">err</a></span><span class="op" id="8215137">,</span>&nbsp;<span class="ident" id="8215139"><a href="/go/format/format_test.go.html#8214737">src</a></span><span class="op" id="8215142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8215147">}</span>&nbsp;<span class="keyword" id="8215149">else</span>&nbsp;<span class="keyword" id="8215154">if</span>&nbsp;<span class="ident" id="8215157"><a href="/go/format/format_test.go.html#8215047">res</a></span>&nbsp;<span class="op" id="8215161">!=</span>&nbsp;<span class="ident" id="8215164"><a href="/go/format/format_test.go.html#8214737">src</a></span>&nbsp;<span class="op" id="8215168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215174"><a href="/go/format/format_test.go.html#8214713">t</a></span><span class="op" id="8215175">.</span><span class="ident" id="8215176">Errorf</span><span class="op" id="8215182">(</span><span class="string" id="8215183">&#34;formatting&nbsp;incorrect:\nsource:&nbsp;%q\nresult:&nbsp;%q&#34;</span><span class="op" id="8215230">,</span>&nbsp;<span class="ident" id="8215232"><a href="/go/format/format_test.go.html#8214737">src</a></span><span class="op" id="8215235">,</span>&nbsp;<span class="ident" id="8215237"><a href="/go/format/format_test.go.html#8215047">res</a></span><span class="op" id="8215240">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8215245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8215249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8215252">}</span><br>
<span class="lineno"></span><span class="op" id="8215254">}</span>
</div>
</body>
</html>
