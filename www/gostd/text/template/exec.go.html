<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4818065">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4818120">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4818174">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4818225">package</span>&nbsp;<span class="ident" id="4818233">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4818243">import</span>&nbsp;<span class="op" id="4818250">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4818253">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4818262">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4818269">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4818275">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4818286">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4818297">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4818305">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4818316">&#34;text/template/parse&#34;</span><br>
<span class="lineno"></span><span class="op" id="4818338">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4818341">//&nbsp;state&nbsp;represents&nbsp;the&nbsp;state&nbsp;of&nbsp;an&nbsp;execution.&nbsp;It&#39;s&nbsp;not&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4818409">//&nbsp;template&nbsp;so&nbsp;that&nbsp;multiple&nbsp;executions&nbsp;of&nbsp;the&nbsp;same&nbsp;template</span><br>
<span class="lineno">20</span><span class="comment" id="4818470">//&nbsp;can&nbsp;execute&nbsp;in&nbsp;parallel.</span><br>
<span class="lineno"></span><span class="keyword" id="4818498">type</span>&nbsp;<span class="ident" id="4818503">state</span>&nbsp;<span class="keyword" id="4818509">struct</span>&nbsp;<span class="op" id="4818516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4818519">tmpl</span>&nbsp;<span class="op" id="4818524">*</span><span class="ident" id="4818525">Template</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4818535">wr</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4818540">io</span><span class="op" id="4818542">.</span><span class="ident" id="4818543">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4818551">node</span>&nbsp;<span class="ident" id="4818556">parse</span><span class="op" id="4818561">.</span><span class="ident" id="4818562">Node</span>&nbsp;<span class="comment" id="4818567">//&nbsp;current&nbsp;node,&nbsp;for&nbsp;errors</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4818596">vars</span>&nbsp;<span class="op" id="4818601">[</span><span class="op" id="4818602">]</span><span class="ident" id="4818603">variable</span>&nbsp;<span class="comment" id="4818612">//&nbsp;push-down&nbsp;stack&nbsp;of&nbsp;variable&nbsp;values.</span><br>
<span class="lineno"></span><span class="op" id="4818651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4818654">//&nbsp;variable&nbsp;holds&nbsp;the&nbsp;dynamic&nbsp;value&nbsp;of&nbsp;a&nbsp;variable&nbsp;such&nbsp;as&nbsp;$,&nbsp;$x&nbsp;etc.</span><br>
<span class="lineno"></span><span class="keyword" id="4818723">type</span>&nbsp;<span class="ident" id="4818728">variable</span>&nbsp;<span class="keyword" id="4818737">struct</span>&nbsp;<span class="op" id="4818744">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4818747">name</span>&nbsp;&nbsp;<span class="builtintype" id="4818753">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4818761">value</span>&nbsp;<span class="ident" id="4818767">reflect</span><span class="op" id="4818774">.</span><span class="ident" id="4818775">Value</span><br>
<span class="lineno"></span><span class="op" id="4818781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4818784">//&nbsp;push&nbsp;pushes&nbsp;a&nbsp;new&nbsp;variable&nbsp;on&nbsp;the&nbsp;stack.</span><br>
<span class="lineno">35</span><span class="keyword" id="4818828">func</span>&nbsp;<span class="op" id="4818833">(</span><span class="ident" id="4818834">s</span>&nbsp;<span class="op" id="4818836">*</span><span class="ident" id="4818837">state</span><span class="op" id="4818842">)</span>&nbsp;<span class="ident" id="4818844">push</span><span class="op" id="4818848">(</span><span class="ident" id="4818849">name</span>&nbsp;<span class="builtintype" id="4818854">string</span><span class="op" id="4818860">,</span>&nbsp;<span class="ident" id="4818862">value</span>&nbsp;<span class="ident" id="4818868">reflect</span><span class="op" id="4818875">.</span><span class="ident" id="4818876">Value</span><span class="op" id="4818881">)</span>&nbsp;<span class="op" id="4818883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4818886">s</span><span class="op" id="4818887">.</span><span class="ident" id="4818888">vars</span>&nbsp;<span class="op" id="4818893">=</span>&nbsp;<span class="builtinfunc" id="4818895">append</span><span class="op" id="4818901">(</span><span class="ident" id="4818902">s</span><span class="op" id="4818903">.</span><span class="ident" id="4818904">vars</span><span class="op" id="4818908">,</span>&nbsp;<span class="ident" id="4818910">variable</span><span class="op" id="4818918">{</span><span class="ident" id="4818919">name</span><span class="op" id="4818923">,</span>&nbsp;<span class="ident" id="4818925">value</span><span class="op" id="4818930">}</span><span class="op" id="4818931">)</span><br>
<span class="lineno"></span><span class="op" id="4818933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4818936">//&nbsp;mark&nbsp;returns&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;variable&nbsp;stack.</span><br>
<span class="lineno">40</span><span class="keyword" id="4818986">func</span>&nbsp;<span class="op" id="4818991">(</span><span class="ident" id="4818992">s</span>&nbsp;<span class="op" id="4818994">*</span><span class="ident" id="4818995">state</span><span class="op" id="4819000">)</span>&nbsp;<span class="ident" id="4819002">mark</span><span class="op" id="4819006">(</span><span class="op" id="4819007">)</span>&nbsp;<span class="builtintype" id="4819009">int</span>&nbsp;<span class="op" id="4819013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4819016">return</span>&nbsp;<span class="builtinfunc" id="4819023">len</span><span class="op" id="4819026">(</span><span class="ident" id="4819027">s</span><span class="op" id="4819028">.</span><span class="ident" id="4819029">vars</span><span class="op" id="4819033">)</span><br>
<span class="lineno"></span><span class="op" id="4819035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4819038">//&nbsp;pop&nbsp;pops&nbsp;the&nbsp;variable&nbsp;stack&nbsp;up&nbsp;to&nbsp;the&nbsp;mark.</span><br>
<span class="lineno">45</span><span class="keyword" id="4819085">func</span>&nbsp;<span class="op" id="4819090">(</span><span class="ident" id="4819091">s</span>&nbsp;<span class="op" id="4819093">*</span><span class="ident" id="4819094">state</span><span class="op" id="4819099">)</span>&nbsp;<span class="ident" id="4819101">pop</span><span class="op" id="4819104">(</span><span class="ident" id="4819105">mark</span>&nbsp;<span class="builtintype" id="4819110">int</span><span class="op" id="4819113">)</span>&nbsp;<span class="op" id="4819115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4819118">s</span><span class="op" id="4819119">.</span><span class="ident" id="4819120">vars</span>&nbsp;<span class="op" id="4819125">=</span>&nbsp;<span class="ident" id="4819127">s</span><span class="op" id="4819128">.</span><span class="ident" id="4819129">vars</span><span class="op" id="4819133">[</span><span class="num" id="4819134">0</span><span class="op" id="4819135">:</span><span class="ident" id="4819136">mark</span><span class="op" id="4819140">]</span><br>
<span class="lineno"></span><span class="op" id="4819142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4819145">//&nbsp;setVar&nbsp;overwrites&nbsp;the&nbsp;top-nth&nbsp;variable&nbsp;on&nbsp;the&nbsp;stack.&nbsp;Used&nbsp;by&nbsp;range&nbsp;iterations.</span><br>
<span class="lineno">50</span><span class="keyword" id="4819227">func</span>&nbsp;<span class="op" id="4819232">(</span><span class="ident" id="4819233">s</span>&nbsp;<span class="op" id="4819235">*</span><span class="ident" id="4819236">state</span><span class="op" id="4819241">)</span>&nbsp;<span class="ident" id="4819243">setVar</span><span class="op" id="4819249">(</span><span class="ident" id="4819250">n</span>&nbsp;<span class="builtintype" id="4819252">int</span><span class="op" id="4819255">,</span>&nbsp;<span class="ident" id="4819257">value</span>&nbsp;<span class="ident" id="4819263">reflect</span><span class="op" id="4819270">.</span><span class="ident" id="4819271">Value</span><span class="op" id="4819276">)</span>&nbsp;<span class="op" id="4819278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4819281">s</span><span class="op" id="4819282">.</span><span class="ident" id="4819283">vars</span><span class="op" id="4819287">[</span><span class="builtinfunc" id="4819288">len</span><span class="op" id="4819291">(</span><span class="ident" id="4819292">s</span><span class="op" id="4819293">.</span><span class="ident" id="4819294">vars</span><span class="op" id="4819298">)</span><span class="op" id="4819299">-</span><span class="ident" id="4819300">n</span><span class="op" id="4819301">]</span><span class="op" id="4819302">.</span><span class="ident" id="4819303">value</span>&nbsp;<span class="op" id="4819309">=</span>&nbsp;<span class="ident" id="4819311">value</span><br>
<span class="lineno"></span><span class="op" id="4819317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4819320">//&nbsp;varValue&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;named&nbsp;variable.</span><br>
<span class="lineno">55</span><span class="keyword" id="4819373">func</span>&nbsp;<span class="op" id="4819378">(</span><span class="ident" id="4819379">s</span>&nbsp;<span class="op" id="4819381">*</span><span class="ident" id="4819382">state</span><span class="op" id="4819387">)</span>&nbsp;<span class="ident" id="4819389">varValue</span><span class="op" id="4819397">(</span><span class="ident" id="4819398">name</span>&nbsp;<span class="builtintype" id="4819403">string</span><span class="op" id="4819409">)</span>&nbsp;<span class="ident" id="4819411">reflect</span><span class="op" id="4819418">.</span><span class="ident" id="4819419">Value</span>&nbsp;<span class="op" id="4819425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4819428">for</span>&nbsp;<span class="ident" id="4819432">i</span>&nbsp;<span class="op" id="4819434">:=</span>&nbsp;<span class="ident" id="4819437">s</span><span class="op" id="4819438">.</span><span class="ident" id="4819439">mark</span><span class="op" id="4819443">(</span><span class="op" id="4819444">)</span>&nbsp;<span class="op" id="4819446">-</span>&nbsp;<span class="num" id="4819448">1</span><span class="op" id="4819449">;</span>&nbsp;<span class="ident" id="4819451">i</span>&nbsp;<span class="op" id="4819453">&gt;=</span>&nbsp;<span class="num" id="4819456">0</span><span class="op" id="4819457">;</span>&nbsp;<span class="ident" id="4819459">i</span><span class="op" id="4819460">--</span>&nbsp;<span class="op" id="4819463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4819467">if</span>&nbsp;<span class="ident" id="4819470">s</span><span class="op" id="4819471">.</span><span class="ident" id="4819472">vars</span><span class="op" id="4819476">[</span><span class="ident" id="4819477">i</span><span class="op" id="4819478">]</span><span class="op" id="4819479">.</span><span class="ident" id="4819480">name</span>&nbsp;<span class="op" id="4819485">==</span>&nbsp;<span class="ident" id="4819488">name</span>&nbsp;<span class="op" id="4819493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4819498">return</span>&nbsp;<span class="ident" id="4819505">s</span><span class="op" id="4819506">.</span><span class="ident" id="4819507">vars</span><span class="op" id="4819511">[</span><span class="ident" id="4819512">i</span><span class="op" id="4819513">]</span><span class="op" id="4819514">.</span><span class="ident" id="4819515">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4819523">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4819526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4819529">s</span><span class="op" id="4819530">.</span><span class="ident" id="4819531">errorf</span><span class="op" id="4819537">(</span><span class="string" id="4819538">&#34;undefined&nbsp;variable:&nbsp;%s&#34;</span><span class="op" id="4819562">,</span>&nbsp;<span class="ident" id="4819564">name</span><span class="op" id="4819568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4819571">return</span>&nbsp;<span class="ident" id="4819578">zero</span><br>
<span class="lineno"></span><span class="op" id="4819583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="4819586">var</span>&nbsp;<span class="ident" id="4819590">zero</span>&nbsp;<span class="ident" id="4819595">reflect</span><span class="op" id="4819602">.</span><span class="ident" id="4819603">Value</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4819610">//&nbsp;at&nbsp;marks&nbsp;the&nbsp;state&nbsp;to&nbsp;be&nbsp;on&nbsp;node&nbsp;n,&nbsp;for&nbsp;error&nbsp;reporting.</span><br>
<span class="lineno"></span><span class="keyword" id="4819670">func</span>&nbsp;<span class="op" id="4819675">(</span><span class="ident" id="4819676">s</span>&nbsp;<span class="op" id="4819678">*</span><span class="ident" id="4819679">state</span><span class="op" id="4819684">)</span>&nbsp;<span class="ident" id="4819686">at</span><span class="op" id="4819688">(</span><span class="ident" id="4819689">node</span>&nbsp;<span class="ident" id="4819694">parse</span><span class="op" id="4819699">.</span><span class="ident" id="4819700">Node</span><span class="op" id="4819704">)</span>&nbsp;<span class="op" id="4819706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4819709">s</span><span class="op" id="4819710">.</span><span class="ident" id="4819711">node</span>&nbsp;<span class="op" id="4819716">=</span>&nbsp;<span class="ident" id="4819718">node</span><br>
<span class="lineno">70</span><span class="op" id="4819723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4819726">//&nbsp;doublePercent&nbsp;returns&nbsp;the&nbsp;string&nbsp;with&nbsp;%&#39;s&nbsp;replaced&nbsp;by&nbsp;%%,&nbsp;if&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="4819801">//&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;used&nbsp;safely&nbsp;inside&nbsp;a&nbsp;Printf&nbsp;format&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4819860">func</span>&nbsp;<span class="ident" id="4819865">doublePercent</span><span class="op" id="4819878">(</span><span class="ident" id="4819879">str</span>&nbsp;<span class="builtintype" id="4819883">string</span><span class="op" id="4819889">)</span>&nbsp;<span class="builtintype" id="4819891">string</span>&nbsp;<span class="op" id="4819898">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4819901">if</span>&nbsp;<span class="ident" id="4819904">strings</span><span class="op" id="4819911">.</span><span class="ident" id="4819912">Contains</span><span class="op" id="4819920">(</span><span class="ident" id="4819921">str</span><span class="op" id="4819924">,</span>&nbsp;<span class="string" id="4819926">&#34;%&#34;</span><span class="op" id="4819929">)</span>&nbsp;<span class="op" id="4819931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4819935">str</span>&nbsp;<span class="op" id="4819939">=</span>&nbsp;<span class="ident" id="4819941">strings</span><span class="op" id="4819948">.</span><span class="ident" id="4819949">Replace</span><span class="op" id="4819956">(</span><span class="ident" id="4819957">str</span><span class="op" id="4819960">,</span>&nbsp;<span class="string" id="4819962">&#34;%&#34;</span><span class="op" id="4819965">,</span>&nbsp;<span class="string" id="4819967">&#34;%%&#34;</span><span class="op" id="4819971">,</span>&nbsp;<span class="op" id="4819973">-</span><span class="num" id="4819974">1</span><span class="op" id="4819975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4819978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4819981">return</span>&nbsp;<span class="ident" id="4819988">str</span><br>
<span class="lineno"></span><span class="op" id="4819992">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="4819995">//&nbsp;errorf&nbsp;formats&nbsp;the&nbsp;error&nbsp;and&nbsp;terminates&nbsp;processing.</span><br>
<span class="lineno"></span><span class="keyword" id="4820050">func</span>&nbsp;<span class="op" id="4820055">(</span><span class="ident" id="4820056">s</span>&nbsp;<span class="op" id="4820058">*</span><span class="ident" id="4820059">state</span><span class="op" id="4820064">)</span>&nbsp;<span class="ident" id="4820066">errorf</span><span class="op" id="4820072">(</span><span class="ident" id="4820073">format</span>&nbsp;<span class="builtintype" id="4820080">string</span><span class="op" id="4820086">,</span>&nbsp;<span class="ident" id="4820088">args</span>&nbsp;<span class="op" id="4820093">...</span><span class="keyword" id="4820096">interface</span><span class="op" id="4820105">{</span><span class="op" id="4820106">}</span><span class="op" id="4820107">)</span>&nbsp;<span class="op" id="4820109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4820112">name</span>&nbsp;<span class="op" id="4820117">:=</span>&nbsp;<span class="ident" id="4820120">doublePercent</span><span class="op" id="4820133">(</span><span class="ident" id="4820134">s</span><span class="op" id="4820135">.</span><span class="ident" id="4820136">tmpl</span><span class="op" id="4820140">.</span><span class="ident" id="4820141">Name</span><span class="op" id="4820145">(</span><span class="op" id="4820146">)</span><span class="op" id="4820147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4820150">if</span>&nbsp;<span class="ident" id="4820153">s</span><span class="op" id="4820154">.</span><span class="ident" id="4820155">node</span>&nbsp;<span class="op" id="4820160">==</span>&nbsp;<span class="ident" id="4820163">nil</span>&nbsp;<span class="op" id="4820167">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4820171">format</span>&nbsp;<span class="op" id="4820178">=</span>&nbsp;<span class="ident" id="4820180">fmt</span><span class="op" id="4820183">.</span><span class="ident" id="4820184">Sprintf</span><span class="op" id="4820191">(</span><span class="string" id="4820192">&#34;template:&nbsp;%s:&nbsp;%s&#34;</span><span class="op" id="4820210">,</span>&nbsp;<span class="ident" id="4820212">name</span><span class="op" id="4820216">,</span>&nbsp;<span class="ident" id="4820218">format</span><span class="op" id="4820224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4820227">}</span>&nbsp;<span class="keyword" id="4820229">else</span>&nbsp;<span class="op" id="4820234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4820238">location</span><span class="op" id="4820246">,</span>&nbsp;<span class="ident" id="4820248">context</span>&nbsp;<span class="op" id="4820256">:=</span>&nbsp;<span class="ident" id="4820259">s</span><span class="op" id="4820260">.</span><span class="ident" id="4820261">tmpl</span><span class="op" id="4820265">.</span><span class="ident" id="4820266">ErrorContext</span><span class="op" id="4820278">(</span><span class="ident" id="4820279">s</span><span class="op" id="4820280">.</span><span class="ident" id="4820281">node</span><span class="op" id="4820285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4820289">format</span>&nbsp;<span class="op" id="4820296">=</span>&nbsp;<span class="ident" id="4820298">fmt</span><span class="op" id="4820301">.</span><span class="ident" id="4820302">Sprintf</span><span class="op" id="4820309">(</span><span class="string" id="4820310">&#34;template:&nbsp;%s:&nbsp;executing&nbsp;%q&nbsp;at&nbsp;&lt;%s&gt;:&nbsp;%s&#34;</span><span class="op" id="4820350">,</span>&nbsp;<span class="ident" id="4820352">location</span><span class="op" id="4820360">,</span>&nbsp;<span class="ident" id="4820362">name</span><span class="op" id="4820366">,</span>&nbsp;<span class="ident" id="4820368">doublePercent</span><span class="op" id="4820381">(</span><span class="ident" id="4820382">context</span><span class="op" id="4820389">)</span><span class="op" id="4820390">,</span>&nbsp;<span class="ident" id="4820392">format</span><span class="op" id="4820398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4820401">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4820404">panic</span><span class="op" id="4820409">(</span><span class="ident" id="4820410">fmt</span><span class="op" id="4820413">.</span><span class="ident" id="4820414">Errorf</span><span class="op" id="4820420">(</span><span class="ident" id="4820421">format</span><span class="op" id="4820427">,</span>&nbsp;<span class="ident" id="4820429">args</span><span class="op" id="4820433">...</span><span class="op" id="4820436">)</span><span class="op" id="4820437">)</span><br>
<span class="lineno"></span><span class="op" id="4820439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4820442">//&nbsp;errRecover&nbsp;is&nbsp;the&nbsp;handler&nbsp;that&nbsp;turns&nbsp;panics&nbsp;into&nbsp;returns&nbsp;from&nbsp;the&nbsp;top</span><br>
<span class="lineno"></span><span class="comment" id="4820515">//&nbsp;level&nbsp;of&nbsp;Parse.</span><br>
<span class="lineno">95</span><span class="keyword" id="4820534">func</span>&nbsp;<span class="ident" id="4820539">errRecover</span><span class="op" id="4820549">(</span><span class="ident" id="4820550">errp</span>&nbsp;<span class="op" id="4820555">*</span><span class="builtintype" id="4820556">error</span><span class="op" id="4820561">)</span>&nbsp;<span class="op" id="4820563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4820566">e</span>&nbsp;<span class="op" id="4820568">:=</span>&nbsp;<span class="builtinfunc" id="4820571">recover</span><span class="op" id="4820578">(</span><span class="op" id="4820579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4820582">if</span>&nbsp;<span class="ident" id="4820585">e</span>&nbsp;<span class="op" id="4820587">!=</span>&nbsp;<span class="ident" id="4820590">nil</span>&nbsp;<span class="op" id="4820594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4820598">switch</span>&nbsp;<span class="ident" id="4820605">err</span>&nbsp;<span class="op" id="4820609">:=</span>&nbsp;<span class="ident" id="4820612">e</span><span class="op" id="4820613">.</span><span class="op" id="4820614">(</span><span class="keyword" id="4820615">type</span><span class="op" id="4820619">)</span>&nbsp;<span class="op" id="4820621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4820625">case</span>&nbsp;<span class="ident" id="4820630">runtime</span><span class="op" id="4820637">.</span><span class="ident" id="4820638">Error</span><span class="op" id="4820643">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4820648">panic</span><span class="op" id="4820653">(</span><span class="ident" id="4820654">e</span><span class="op" id="4820655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4820659">case</span>&nbsp;<span class="builtintype" id="4820664">error</span><span class="op" id="4820669">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4820674">*</span><span class="ident" id="4820675">errp</span>&nbsp;<span class="op" id="4820680">=</span>&nbsp;<span class="ident" id="4820682">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4820688">default</span><span class="op" id="4820695">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4820700">panic</span><span class="op" id="4820705">(</span><span class="ident" id="4820706">e</span><span class="op" id="4820707">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4820711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4820714">}</span><br>
<span class="lineno"></span><span class="op" id="4820716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4820719">//&nbsp;ExecuteTemplate&nbsp;applies&nbsp;the&nbsp;template&nbsp;associated&nbsp;with&nbsp;t&nbsp;that&nbsp;has&nbsp;the&nbsp;given&nbsp;name</span><br>
<span class="lineno">110</span><span class="comment" id="4820801">//&nbsp;to&nbsp;the&nbsp;specified&nbsp;data&nbsp;object&nbsp;and&nbsp;writes&nbsp;the&nbsp;output&nbsp;to&nbsp;wr.</span><br>
<span class="lineno"></span><span class="comment" id="4820862">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs&nbsp;executing&nbsp;the&nbsp;template&nbsp;or&nbsp;writing&nbsp;its&nbsp;output,</span><br>
<span class="lineno"></span><span class="comment" id="4820930">//&nbsp;execution&nbsp;stops,&nbsp;but&nbsp;partial&nbsp;results&nbsp;may&nbsp;already&nbsp;have&nbsp;been&nbsp;written&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4821003">//&nbsp;the&nbsp;output&nbsp;writer.</span><br>
<span class="lineno"></span><span class="comment" id="4821025">//&nbsp;A&nbsp;template&nbsp;may&nbsp;be&nbsp;executed&nbsp;safely&nbsp;in&nbsp;parallel.</span><br>
<span class="lineno">115</span><span class="keyword" id="4821075">func</span>&nbsp;<span class="op" id="4821080">(</span><span class="ident" id="4821081">t</span>&nbsp;<span class="op" id="4821083">*</span><span class="ident" id="4821084">Template</span><span class="op" id="4821092">)</span>&nbsp;<span class="ident" id="4821094">ExecuteTemplate</span><span class="op" id="4821109">(</span><span class="ident" id="4821110">wr</span>&nbsp;<span class="ident" id="4821113">io</span><span class="op" id="4821115">.</span><span class="ident" id="4821116">Writer</span><span class="op" id="4821122">,</span>&nbsp;<span class="ident" id="4821124">name</span>&nbsp;<span class="builtintype" id="4821129">string</span><span class="op" id="4821135">,</span>&nbsp;<span class="ident" id="4821137">data</span>&nbsp;<span class="keyword" id="4821142">interface</span><span class="op" id="4821151">{</span><span class="op" id="4821152">}</span><span class="op" id="4821153">)</span>&nbsp;<span class="builtintype" id="4821155">error</span>&nbsp;<span class="op" id="4821161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4821164">tmpl</span>&nbsp;<span class="op" id="4821169">:=</span>&nbsp;<span class="ident" id="4821172">t</span><span class="op" id="4821173">.</span><span class="ident" id="4821174">tmpl</span><span class="op" id="4821178">[</span><span class="ident" id="4821179">name</span><span class="op" id="4821183">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4821186">if</span>&nbsp;<span class="ident" id="4821189">tmpl</span>&nbsp;<span class="op" id="4821194">==</span>&nbsp;<span class="ident" id="4821197">nil</span>&nbsp;<span class="op" id="4821201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4821205">return</span>&nbsp;<span class="ident" id="4821212">fmt</span><span class="op" id="4821215">.</span><span class="ident" id="4821216">Errorf</span><span class="op" id="4821222">(</span><span class="string" id="4821223">&#34;template:&nbsp;no&nbsp;template&nbsp;%q&nbsp;associated&nbsp;with&nbsp;template&nbsp;%q&#34;</span><span class="op" id="4821277">,</span>&nbsp;<span class="ident" id="4821279">name</span><span class="op" id="4821283">,</span>&nbsp;<span class="ident" id="4821285">t</span><span class="op" id="4821286">.</span><span class="ident" id="4821287">name</span><span class="op" id="4821291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4821294">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4821297">return</span>&nbsp;<span class="ident" id="4821304">tmpl</span><span class="op" id="4821308">.</span><span class="ident" id="4821309">Execute</span><span class="op" id="4821316">(</span><span class="ident" id="4821317">wr</span><span class="op" id="4821319">,</span>&nbsp;<span class="ident" id="4821321">data</span><span class="op" id="4821325">)</span><br>
<span class="lineno"></span><span class="op" id="4821327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4821330">//&nbsp;Execute&nbsp;applies&nbsp;a&nbsp;parsed&nbsp;template&nbsp;to&nbsp;the&nbsp;specified&nbsp;data&nbsp;object,</span><br>
<span class="lineno"></span><span class="comment" id="4821397">//&nbsp;and&nbsp;writes&nbsp;the&nbsp;output&nbsp;to&nbsp;wr.</span><br>
<span class="lineno">125</span><span class="comment" id="4821429">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs&nbsp;executing&nbsp;the&nbsp;template&nbsp;or&nbsp;writing&nbsp;its&nbsp;output,</span><br>
<span class="lineno"></span><span class="comment" id="4821497">//&nbsp;execution&nbsp;stops,&nbsp;but&nbsp;partial&nbsp;results&nbsp;may&nbsp;already&nbsp;have&nbsp;been&nbsp;written&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4821570">//&nbsp;the&nbsp;output&nbsp;writer.</span><br>
<span class="lineno"></span><span class="comment" id="4821592">//&nbsp;A&nbsp;template&nbsp;may&nbsp;be&nbsp;executed&nbsp;safely&nbsp;in&nbsp;parallel.</span><br>
<span class="lineno"></span><span class="keyword" id="4821642">func</span>&nbsp;<span class="op" id="4821647">(</span><span class="ident" id="4821648">t</span>&nbsp;<span class="op" id="4821650">*</span><span class="ident" id="4821651">Template</span><span class="op" id="4821659">)</span>&nbsp;<span class="ident" id="4821661">Execute</span><span class="op" id="4821668">(</span><span class="ident" id="4821669">wr</span>&nbsp;<span class="ident" id="4821672">io</span><span class="op" id="4821674">.</span><span class="ident" id="4821675">Writer</span><span class="op" id="4821681">,</span>&nbsp;<span class="ident" id="4821683">data</span>&nbsp;<span class="keyword" id="4821688">interface</span><span class="op" id="4821697">{</span><span class="op" id="4821698">}</span><span class="op" id="4821699">)</span>&nbsp;<span class="op" id="4821701">(</span><span class="ident" id="4821702">err</span>&nbsp;<span class="builtintype" id="4821706">error</span><span class="op" id="4821711">)</span>&nbsp;<span class="op" id="4821713">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4821716">defer</span>&nbsp;<span class="ident" id="4821722">errRecover</span><span class="op" id="4821732">(</span><span class="op" id="4821733">&amp;</span><span class="ident" id="4821734">err</span><span class="op" id="4821737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4821740">value</span>&nbsp;<span class="op" id="4821746">:=</span>&nbsp;<span class="ident" id="4821749">reflect</span><span class="op" id="4821756">.</span><span class="ident" id="4821757">ValueOf</span><span class="op" id="4821764">(</span><span class="ident" id="4821765">data</span><span class="op" id="4821769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4821772">state</span>&nbsp;<span class="op" id="4821778">:=</span>&nbsp;<span class="op" id="4821781">&amp;</span><span class="ident" id="4821782">state</span><span class="op" id="4821787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4821791">tmpl</span><span class="op" id="4821795">:</span>&nbsp;<span class="ident" id="4821797">t</span><span class="op" id="4821798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4821802">wr</span><span class="op" id="4821804">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4821808">wr</span><span class="op" id="4821810">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4821814">vars</span><span class="op" id="4821818">:</span>&nbsp;<span class="op" id="4821820">[</span><span class="op" id="4821821">]</span><span class="ident" id="4821822">variable</span><span class="op" id="4821830">{</span><span class="op" id="4821831">{</span><span class="string" id="4821832">&#34;$&#34;</span><span class="op" id="4821835">,</span>&nbsp;<span class="ident" id="4821837">value</span><span class="op" id="4821842">}</span><span class="op" id="4821843">}</span><span class="op" id="4821844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4821847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4821850">t</span><span class="op" id="4821851">.</span><span class="ident" id="4821852">init</span><span class="op" id="4821856">(</span><span class="op" id="4821857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4821860">if</span>&nbsp;<span class="ident" id="4821863">t</span><span class="op" id="4821864">.</span><span class="ident" id="4821865">Tree</span>&nbsp;<span class="op" id="4821870">==</span>&nbsp;<span class="ident" id="4821873">nil</span>&nbsp;<span class="op" id="4821877">||</span>&nbsp;<span class="ident" id="4821880">t</span><span class="op" id="4821881">.</span><span class="ident" id="4821882">Root</span>&nbsp;<span class="op" id="4821887">==</span>&nbsp;<span class="ident" id="4821890">nil</span>&nbsp;<span class="op" id="4821894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4821898">var</span>&nbsp;<span class="ident" id="4821902">b</span>&nbsp;<span class="ident" id="4821904">bytes</span><span class="op" id="4821909">.</span><span class="ident" id="4821910">Buffer</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4821919">for</span>&nbsp;<span class="ident" id="4821923">name</span><span class="op" id="4821927">,</span>&nbsp;<span class="ident" id="4821929">tmpl</span>&nbsp;<span class="op" id="4821934">:=</span>&nbsp;<span class="keyword" id="4821937">range</span>&nbsp;<span class="ident" id="4821943">t</span><span class="op" id="4821944">.</span><span class="ident" id="4821945">tmpl</span>&nbsp;<span class="op" id="4821950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4821955">if</span>&nbsp;<span class="ident" id="4821958">tmpl</span><span class="op" id="4821962">.</span><span class="ident" id="4821963">Tree</span>&nbsp;<span class="op" id="4821968">==</span>&nbsp;<span class="ident" id="4821971">nil</span>&nbsp;<span class="op" id="4821975">||</span>&nbsp;<span class="ident" id="4821978">tmpl</span><span class="op" id="4821982">.</span><span class="ident" id="4821983">Root</span>&nbsp;<span class="op" id="4821988">==</span>&nbsp;<span class="ident" id="4821991">nil</span>&nbsp;<span class="op" id="4821995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4822001">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4822013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4822018">if</span>&nbsp;<span class="ident" id="4822021">b</span><span class="op" id="4822022">.</span><span class="ident" id="4822023">Len</span><span class="op" id="4822026">(</span><span class="op" id="4822027">)</span>&nbsp;<span class="op" id="4822029">&gt;</span>&nbsp;<span class="num" id="4822031">0</span>&nbsp;<span class="op" id="4822033">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4822039">b</span><span class="op" id="4822040">.</span><span class="ident" id="4822041">WriteString</span><span class="op" id="4822052">(</span><span class="string" id="4822053">&#34;,&nbsp;&#34;</span><span class="op" id="4822057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4822062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4822067">fmt</span><span class="op" id="4822070">.</span><span class="ident" id="4822071">Fprintf</span><span class="op" id="4822078">(</span><span class="op" id="4822079">&amp;</span><span class="ident" id="4822080">b</span><span class="op" id="4822081">,</span>&nbsp;<span class="string" id="4822083">&#34;%q&#34;</span><span class="op" id="4822087">,</span>&nbsp;<span class="ident" id="4822089">name</span><span class="op" id="4822093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4822097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4822101">var</span>&nbsp;<span class="ident" id="4822105">s</span>&nbsp;<span class="builtintype" id="4822107">string</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4822116">if</span>&nbsp;<span class="ident" id="4822119">b</span><span class="op" id="4822120">.</span><span class="ident" id="4822121">Len</span><span class="op" id="4822124">(</span><span class="op" id="4822125">)</span>&nbsp;<span class="op" id="4822127">&gt;</span>&nbsp;<span class="num" id="4822129">0</span>&nbsp;<span class="op" id="4822131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4822136">s</span>&nbsp;<span class="op" id="4822138">=</span>&nbsp;<span class="string" id="4822140">&#34;;&nbsp;defined&nbsp;templates&nbsp;are:&nbsp;&#34;</span>&nbsp;<span class="op" id="4822168">+</span>&nbsp;<span class="ident" id="4822170">b</span><span class="op" id="4822171">.</span><span class="ident" id="4822172">String</span><span class="op" id="4822178">(</span><span class="op" id="4822179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4822183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4822187">state</span><span class="op" id="4822192">.</span><span class="ident" id="4822193">errorf</span><span class="op" id="4822199">(</span><span class="string" id="4822200">&#34;%q&nbsp;is&nbsp;an&nbsp;incomplete&nbsp;or&nbsp;empty&nbsp;template%s&#34;</span><span class="op" id="4822241">,</span>&nbsp;<span class="ident" id="4822243">t</span><span class="op" id="4822244">.</span><span class="ident" id="4822245">Name</span><span class="op" id="4822249">(</span><span class="op" id="4822250">)</span><span class="op" id="4822251">,</span>&nbsp;<span class="ident" id="4822253">s</span><span class="op" id="4822254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4822257">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4822260">state</span><span class="op" id="4822265">.</span><span class="ident" id="4822266">walk</span><span class="op" id="4822270">(</span><span class="ident" id="4822271">value</span><span class="op" id="4822276">,</span>&nbsp;<span class="ident" id="4822278">t</span><span class="op" id="4822279">.</span><span class="ident" id="4822280">Root</span><span class="op" id="4822284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4822287">return</span><br>
<span class="lineno"></span><span class="op" id="4822294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4822297">//&nbsp;Walk&nbsp;functions&nbsp;step&nbsp;through&nbsp;the&nbsp;major&nbsp;pieces&nbsp;of&nbsp;the&nbsp;template&nbsp;structure,</span><br>
<span class="lineno">160</span><span class="comment" id="4822372">//&nbsp;generating&nbsp;output&nbsp;as&nbsp;they&nbsp;go.</span><br>
<span class="lineno"></span><span class="keyword" id="4822405">func</span>&nbsp;<span class="op" id="4822410">(</span><span class="ident" id="4822411">s</span>&nbsp;<span class="op" id="4822413">*</span><span class="ident" id="4822414">state</span><span class="op" id="4822419">)</span>&nbsp;<span class="ident" id="4822421">walk</span><span class="op" id="4822425">(</span><span class="ident" id="4822426">dot</span>&nbsp;<span class="ident" id="4822430">reflect</span><span class="op" id="4822437">.</span><span class="ident" id="4822438">Value</span><span class="op" id="4822443">,</span>&nbsp;<span class="ident" id="4822445">node</span>&nbsp;<span class="ident" id="4822450">parse</span><span class="op" id="4822455">.</span><span class="ident" id="4822456">Node</span><span class="op" id="4822460">)</span>&nbsp;<span class="op" id="4822462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4822465">s</span><span class="op" id="4822466">.</span><span class="ident" id="4822467">at</span><span class="op" id="4822469">(</span><span class="ident" id="4822470">node</span><span class="op" id="4822474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4822477">switch</span>&nbsp;<span class="ident" id="4822484">node</span>&nbsp;<span class="op" id="4822489">:=</span>&nbsp;<span class="ident" id="4822492">node</span><span class="op" id="4822496">.</span><span class="op" id="4822497">(</span><span class="keyword" id="4822498">type</span><span class="op" id="4822502">)</span>&nbsp;<span class="op" id="4822504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4822507">case</span>&nbsp;<span class="op" id="4822512">*</span><span class="ident" id="4822513">parse</span><span class="op" id="4822518">.</span><span class="ident" id="4822519">ActionNode</span><span class="op" id="4822529">:</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4822533">//&nbsp;Do&nbsp;not&nbsp;pop&nbsp;variables&nbsp;so&nbsp;they&nbsp;persist&nbsp;until&nbsp;next&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4822591">//&nbsp;Also,&nbsp;if&nbsp;the&nbsp;action&nbsp;declares&nbsp;variables,&nbsp;don&#39;t&nbsp;print&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4822660">val</span>&nbsp;<span class="op" id="4822664">:=</span>&nbsp;<span class="ident" id="4822667">s</span><span class="op" id="4822668">.</span><span class="ident" id="4822669">evalPipeline</span><span class="op" id="4822681">(</span><span class="ident" id="4822682">dot</span><span class="op" id="4822685">,</span>&nbsp;<span class="ident" id="4822687">node</span><span class="op" id="4822691">.</span><span class="ident" id="4822692">Pipe</span><span class="op" id="4822696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4822700">if</span>&nbsp;<span class="builtinfunc" id="4822703">len</span><span class="op" id="4822706">(</span><span class="ident" id="4822707">node</span><span class="op" id="4822711">.</span><span class="ident" id="4822712">Pipe</span><span class="op" id="4822716">.</span><span class="ident" id="4822717">Decl</span><span class="op" id="4822721">)</span>&nbsp;<span class="op" id="4822723">==</span>&nbsp;<span class="num" id="4822726">0</span>&nbsp;<span class="op" id="4822728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4822733">s</span><span class="op" id="4822734">.</span><span class="ident" id="4822735">printValue</span><span class="op" id="4822745">(</span><span class="ident" id="4822746">node</span><span class="op" id="4822750">,</span>&nbsp;<span class="ident" id="4822752">val</span><span class="op" id="4822755">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4822759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4822762">case</span>&nbsp;<span class="op" id="4822767">*</span><span class="ident" id="4822768">parse</span><span class="op" id="4822773">.</span><span class="ident" id="4822774">IfNode</span><span class="op" id="4822780">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4822784">s</span><span class="op" id="4822785">.</span><span class="ident" id="4822786">walkIfOrWith</span><span class="op" id="4822798">(</span><span class="ident" id="4822799">parse</span><span class="op" id="4822804">.</span><span class="ident" id="4822805">NodeIf</span><span class="op" id="4822811">,</span>&nbsp;<span class="ident" id="4822813">dot</span><span class="op" id="4822816">,</span>&nbsp;<span class="ident" id="4822818">node</span><span class="op" id="4822822">.</span><span class="ident" id="4822823">Pipe</span><span class="op" id="4822827">,</span>&nbsp;<span class="ident" id="4822829">node</span><span class="op" id="4822833">.</span><span class="ident" id="4822834">List</span><span class="op" id="4822838">,</span>&nbsp;<span class="ident" id="4822840">node</span><span class="op" id="4822844">.</span><span class="ident" id="4822845">ElseList</span><span class="op" id="4822853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4822856">case</span>&nbsp;<span class="op" id="4822861">*</span><span class="ident" id="4822862">parse</span><span class="op" id="4822867">.</span><span class="ident" id="4822868">ListNode</span><span class="op" id="4822876">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4822880">for</span>&nbsp;<span class="ident" id="4822884">_</span><span class="op" id="4822885">,</span>&nbsp;<span class="ident" id="4822887">node</span>&nbsp;<span class="op" id="4822892">:=</span>&nbsp;<span class="keyword" id="4822895">range</span>&nbsp;<span class="ident" id="4822901">node</span><span class="op" id="4822905">.</span><span class="ident" id="4822906">Nodes</span>&nbsp;<span class="op" id="4822912">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4822917">s</span><span class="op" id="4822918">.</span><span class="ident" id="4822919">walk</span><span class="op" id="4822923">(</span><span class="ident" id="4822924">dot</span><span class="op" id="4822927">,</span>&nbsp;<span class="ident" id="4822929">node</span><span class="op" id="4822933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4822937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4822940">case</span>&nbsp;<span class="op" id="4822945">*</span><span class="ident" id="4822946">parse</span><span class="op" id="4822951">.</span><span class="ident" id="4822952">RangeNode</span><span class="op" id="4822961">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4822965">s</span><span class="op" id="4822966">.</span><span class="ident" id="4822967">walkRange</span><span class="op" id="4822976">(</span><span class="ident" id="4822977">dot</span><span class="op" id="4822980">,</span>&nbsp;<span class="ident" id="4822982">node</span><span class="op" id="4822986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4822989">case</span>&nbsp;<span class="op" id="4822994">*</span><span class="ident" id="4822995">parse</span><span class="op" id="4823000">.</span><span class="ident" id="4823001">TemplateNode</span><span class="op" id="4823013">:</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4823017">s</span><span class="op" id="4823018">.</span><span class="ident" id="4823019">walkTemplate</span><span class="op" id="4823031">(</span><span class="ident" id="4823032">dot</span><span class="op" id="4823035">,</span>&nbsp;<span class="ident" id="4823037">node</span><span class="op" id="4823041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4823044">case</span>&nbsp;<span class="op" id="4823049">*</span><span class="ident" id="4823050">parse</span><span class="op" id="4823055">.</span><span class="ident" id="4823056">TextNode</span><span class="op" id="4823064">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4823068">if</span>&nbsp;<span class="ident" id="4823071">_</span><span class="op" id="4823072">,</span>&nbsp;<span class="ident" id="4823074">err</span>&nbsp;<span class="op" id="4823078">:=</span>&nbsp;<span class="ident" id="4823081">s</span><span class="op" id="4823082">.</span><span class="ident" id="4823083">wr</span><span class="op" id="4823085">.</span><span class="ident" id="4823086">Write</span><span class="op" id="4823091">(</span><span class="ident" id="4823092">node</span><span class="op" id="4823096">.</span><span class="ident" id="4823097">Text</span><span class="op" id="4823101">)</span><span class="op" id="4823102">;</span>&nbsp;<span class="ident" id="4823104">err</span>&nbsp;<span class="op" id="4823108">!=</span>&nbsp;<span class="ident" id="4823111">nil</span>&nbsp;<span class="op" id="4823115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4823120">s</span><span class="op" id="4823121">.</span><span class="ident" id="4823122">errorf</span><span class="op" id="4823128">(</span><span class="string" id="4823129">&#34;%s&#34;</span><span class="op" id="4823133">,</span>&nbsp;<span class="ident" id="4823135">err</span><span class="op" id="4823138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4823142">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4823145">case</span>&nbsp;<span class="op" id="4823150">*</span><span class="ident" id="4823151">parse</span><span class="op" id="4823156">.</span><span class="ident" id="4823157">WithNode</span><span class="op" id="4823165">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4823169">s</span><span class="op" id="4823170">.</span><span class="ident" id="4823171">walkIfOrWith</span><span class="op" id="4823183">(</span><span class="ident" id="4823184">parse</span><span class="op" id="4823189">.</span><span class="ident" id="4823190">NodeWith</span><span class="op" id="4823198">,</span>&nbsp;<span class="ident" id="4823200">dot</span><span class="op" id="4823203">,</span>&nbsp;<span class="ident" id="4823205">node</span><span class="op" id="4823209">.</span><span class="ident" id="4823210">Pipe</span><span class="op" id="4823214">,</span>&nbsp;<span class="ident" id="4823216">node</span><span class="op" id="4823220">.</span><span class="ident" id="4823221">List</span><span class="op" id="4823225">,</span>&nbsp;<span class="ident" id="4823227">node</span><span class="op" id="4823231">.</span><span class="ident" id="4823232">ElseList</span><span class="op" id="4823240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4823243">default</span><span class="op" id="4823250">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4823254">s</span><span class="op" id="4823255">.</span><span class="ident" id="4823256">errorf</span><span class="op" id="4823262">(</span><span class="string" id="4823263">&#34;unknown&nbsp;node:&nbsp;%s&#34;</span><span class="op" id="4823281">,</span>&nbsp;<span class="ident" id="4823283">node</span><span class="op" id="4823287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4823290">}</span><br>
<span class="lineno">190</span><span class="op" id="4823292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4823295">//&nbsp;walkIfOrWith&nbsp;walks&nbsp;an&nbsp;&#39;if&#39;&nbsp;or&nbsp;&#39;with&#39;&nbsp;node.&nbsp;The&nbsp;two&nbsp;control&nbsp;structures</span><br>
<span class="lineno"></span><span class="comment" id="4823368">//&nbsp;are&nbsp;identical&nbsp;in&nbsp;behavior&nbsp;except&nbsp;that&nbsp;&#39;with&#39;&nbsp;sets&nbsp;dot.</span><br>
<span class="lineno"></span><span class="keyword" id="4823426">func</span>&nbsp;<span class="op" id="4823431">(</span><span class="ident" id="4823432">s</span>&nbsp;<span class="op" id="4823434">*</span><span class="ident" id="4823435">state</span><span class="op" id="4823440">)</span>&nbsp;<span class="ident" id="4823442">walkIfOrWith</span><span class="op" id="4823454">(</span><span class="ident" id="4823455">typ</span>&nbsp;<span class="ident" id="4823459">parse</span><span class="op" id="4823464">.</span><span class="ident" id="4823465">NodeType</span><span class="op" id="4823473">,</span>&nbsp;<span class="ident" id="4823475">dot</span>&nbsp;<span class="ident" id="4823479">reflect</span><span class="op" id="4823486">.</span><span class="ident" id="4823487">Value</span><span class="op" id="4823492">,</span>&nbsp;<span class="ident" id="4823494">pipe</span>&nbsp;<span class="op" id="4823499">*</span><span class="ident" id="4823500">parse</span><span class="op" id="4823505">.</span><span class="ident" id="4823506">PipeNode</span><span class="op" id="4823514">,</span>&nbsp;<span class="ident" id="4823516">list</span><span class="op" id="4823520">,</span>&nbsp;<span class="ident" id="4823522">elseList</span>&nbsp;<span class="op" id="4823531">*</span><span class="ident" id="4823532">parse</span><span class="op" id="4823537">.</span><span class="ident" id="4823538">ListNode</span><span class="op" id="4823546">)</span>&nbsp;<span class="op" id="4823548">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4823551">defer</span>&nbsp;<span class="ident" id="4823557">s</span><span class="op" id="4823558">.</span><span class="ident" id="4823559">pop</span><span class="op" id="4823562">(</span><span class="ident" id="4823563">s</span><span class="op" id="4823564">.</span><span class="ident" id="4823565">mark</span><span class="op" id="4823569">(</span><span class="op" id="4823570">)</span><span class="op" id="4823571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4823574">val</span>&nbsp;<span class="op" id="4823578">:=</span>&nbsp;<span class="ident" id="4823581">s</span><span class="op" id="4823582">.</span><span class="ident" id="4823583">evalPipeline</span><span class="op" id="4823595">(</span><span class="ident" id="4823596">dot</span><span class="op" id="4823599">,</span>&nbsp;<span class="ident" id="4823601">pipe</span><span class="op" id="4823605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4823608">truth</span><span class="op" id="4823613">,</span>&nbsp;<span class="ident" id="4823615">ok</span>&nbsp;<span class="op" id="4823618">:=</span>&nbsp;<span class="ident" id="4823621">isTrue</span><span class="op" id="4823627">(</span><span class="ident" id="4823628">val</span><span class="op" id="4823631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4823634">if</span>&nbsp;<span class="op" id="4823637">!</span><span class="ident" id="4823638">ok</span>&nbsp;<span class="op" id="4823641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4823645">s</span><span class="op" id="4823646">.</span><span class="ident" id="4823647">errorf</span><span class="op" id="4823653">(</span><span class="string" id="4823654">&#34;if/with&nbsp;can&#39;t&nbsp;use&nbsp;%v&#34;</span><span class="op" id="4823676">,</span>&nbsp;<span class="ident" id="4823678">val</span><span class="op" id="4823681">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4823684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4823687">if</span>&nbsp;<span class="ident" id="4823690">truth</span>&nbsp;<span class="op" id="4823696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4823700">if</span>&nbsp;<span class="ident" id="4823703">typ</span>&nbsp;<span class="op" id="4823707">==</span>&nbsp;<span class="ident" id="4823710">parse</span><span class="op" id="4823715">.</span><span class="ident" id="4823716">NodeWith</span>&nbsp;<span class="op" id="4823725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4823730">s</span><span class="op" id="4823731">.</span><span class="ident" id="4823732">walk</span><span class="op" id="4823736">(</span><span class="ident" id="4823737">val</span><span class="op" id="4823740">,</span>&nbsp;<span class="ident" id="4823742">list</span><span class="op" id="4823746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4823750">}</span>&nbsp;<span class="keyword" id="4823752">else</span>&nbsp;<span class="op" id="4823757">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4823762">s</span><span class="op" id="4823763">.</span><span class="ident" id="4823764">walk</span><span class="op" id="4823768">(</span><span class="ident" id="4823769">dot</span><span class="op" id="4823772">,</span>&nbsp;<span class="ident" id="4823774">list</span><span class="op" id="4823778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4823782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4823785">}</span>&nbsp;<span class="keyword" id="4823787">else</span>&nbsp;<span class="keyword" id="4823792">if</span>&nbsp;<span class="ident" id="4823795">elseList</span>&nbsp;<span class="op" id="4823804">!=</span>&nbsp;<span class="ident" id="4823807">nil</span>&nbsp;<span class="op" id="4823811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4823815">s</span><span class="op" id="4823816">.</span><span class="ident" id="4823817">walk</span><span class="op" id="4823821">(</span><span class="ident" id="4823822">dot</span><span class="op" id="4823825">,</span>&nbsp;<span class="ident" id="4823827">elseList</span><span class="op" id="4823835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4823838">}</span><br>
<span class="lineno">210</span><span class="op" id="4823840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4823843">//&nbsp;isTrue&nbsp;reports&nbsp;whether&nbsp;the&nbsp;value&nbsp;is&nbsp;&#39;true&#39;,&nbsp;in&nbsp;the&nbsp;sense&nbsp;of&nbsp;not&nbsp;the&nbsp;zero&nbsp;of&nbsp;its&nbsp;type,</span><br>
<span class="lineno"></span><span class="comment" id="4823932">//&nbsp;and&nbsp;whether&nbsp;the&nbsp;value&nbsp;has&nbsp;a&nbsp;meaningful&nbsp;truth&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="4823987">func</span>&nbsp;<span class="ident" id="4823992">isTrue</span><span class="op" id="4823998">(</span><span class="ident" id="4823999">val</span>&nbsp;<span class="ident" id="4824003">reflect</span><span class="op" id="4824010">.</span><span class="ident" id="4824011">Value</span><span class="op" id="4824016">)</span>&nbsp;<span class="op" id="4824018">(</span><span class="ident" id="4824019">truth</span><span class="op" id="4824024">,</span>&nbsp;<span class="ident" id="4824026">ok</span>&nbsp;<span class="builtintype" id="4824029">bool</span><span class="op" id="4824033">)</span>&nbsp;<span class="op" id="4824035">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4824038">if</span>&nbsp;<span class="op" id="4824041">!</span><span class="ident" id="4824042">val</span><span class="op" id="4824045">.</span><span class="ident" id="4824046">IsValid</span><span class="op" id="4824053">(</span><span class="op" id="4824054">)</span>&nbsp;<span class="op" id="4824056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4824060">//&nbsp;Something&nbsp;like&nbsp;var&nbsp;x&nbsp;interface{},&nbsp;never&nbsp;set.&nbsp;It&#39;s&nbsp;a&nbsp;form&nbsp;of&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4824130">return</span>&nbsp;<span class="builtintype" id="4824137">false</span><span class="op" id="4824142">,</span>&nbsp;<span class="builtintype" id="4824144">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4824150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4824153">switch</span>&nbsp;<span class="ident" id="4824160">val</span><span class="op" id="4824163">.</span><span class="ident" id="4824164">Kind</span><span class="op" id="4824168">(</span><span class="op" id="4824169">)</span>&nbsp;<span class="op" id="4824171">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4824174">case</span>&nbsp;<span class="ident" id="4824179">reflect</span><span class="op" id="4824186">.</span><span class="ident" id="4824187">Array</span><span class="op" id="4824192">,</span>&nbsp;<span class="ident" id="4824194">reflect</span><span class="op" id="4824201">.</span><span class="ident" id="4824202">Map</span><span class="op" id="4824205">,</span>&nbsp;<span class="ident" id="4824207">reflect</span><span class="op" id="4824214">.</span><span class="ident" id="4824215">Slice</span><span class="op" id="4824220">,</span>&nbsp;<span class="ident" id="4824222">reflect</span><span class="op" id="4824229">.</span><span class="ident" id="4824230">String</span><span class="op" id="4824236">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4824240">truth</span>&nbsp;<span class="op" id="4824246">=</span>&nbsp;<span class="ident" id="4824248">val</span><span class="op" id="4824251">.</span><span class="ident" id="4824252">Len</span><span class="op" id="4824255">(</span><span class="op" id="4824256">)</span>&nbsp;<span class="op" id="4824258">&gt;</span>&nbsp;<span class="num" id="4824260">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4824263">case</span>&nbsp;<span class="ident" id="4824268">reflect</span><span class="op" id="4824275">.</span><span class="ident" id="4824276">Bool</span><span class="op" id="4824280">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4824284">truth</span>&nbsp;<span class="op" id="4824290">=</span>&nbsp;<span class="ident" id="4824292">val</span><span class="op" id="4824295">.</span><span class="ident" id="4824296">Bool</span><span class="op" id="4824300">(</span><span class="op" id="4824301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4824304">case</span>&nbsp;<span class="ident" id="4824309">reflect</span><span class="op" id="4824316">.</span><span class="ident" id="4824317">Complex64</span><span class="op" id="4824326">,</span>&nbsp;<span class="ident" id="4824328">reflect</span><span class="op" id="4824335">.</span><span class="ident" id="4824336">Complex128</span><span class="op" id="4824346">:</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4824350">truth</span>&nbsp;<span class="op" id="4824356">=</span>&nbsp;<span class="ident" id="4824358">val</span><span class="op" id="4824361">.</span><span class="ident" id="4824362">Complex</span><span class="op" id="4824369">(</span><span class="op" id="4824370">)</span>&nbsp;<span class="op" id="4824372">!=</span>&nbsp;<span class="num" id="4824375">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4824378">case</span>&nbsp;<span class="ident" id="4824383">reflect</span><span class="op" id="4824390">.</span><span class="ident" id="4824391">Chan</span><span class="op" id="4824395">,</span>&nbsp;<span class="ident" id="4824397">reflect</span><span class="op" id="4824404">.</span><span class="ident" id="4824405">Func</span><span class="op" id="4824409">,</span>&nbsp;<span class="ident" id="4824411">reflect</span><span class="op" id="4824418">.</span><span class="ident" id="4824419">Ptr</span><span class="op" id="4824422">,</span>&nbsp;<span class="ident" id="4824424">reflect</span><span class="op" id="4824431">.</span><span class="ident" id="4824432">Interface</span><span class="op" id="4824441">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4824445">truth</span>&nbsp;<span class="op" id="4824451">=</span>&nbsp;<span class="op" id="4824453">!</span><span class="ident" id="4824454">val</span><span class="op" id="4824457">.</span><span class="ident" id="4824458">IsNil</span><span class="op" id="4824463">(</span><span class="op" id="4824464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4824467">case</span>&nbsp;<span class="ident" id="4824472">reflect</span><span class="op" id="4824479">.</span><span class="ident" id="4824480">Int</span><span class="op" id="4824483">,</span>&nbsp;<span class="ident" id="4824485">reflect</span><span class="op" id="4824492">.</span><span class="ident" id="4824493">Int8</span><span class="op" id="4824497">,</span>&nbsp;<span class="ident" id="4824499">reflect</span><span class="op" id="4824506">.</span><span class="ident" id="4824507">Int16</span><span class="op" id="4824512">,</span>&nbsp;<span class="ident" id="4824514">reflect</span><span class="op" id="4824521">.</span><span class="ident" id="4824522">Int32</span><span class="op" id="4824527">,</span>&nbsp;<span class="ident" id="4824529">reflect</span><span class="op" id="4824536">.</span><span class="ident" id="4824537">Int64</span><span class="op" id="4824542">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4824546">truth</span>&nbsp;<span class="op" id="4824552">=</span>&nbsp;<span class="ident" id="4824554">val</span><span class="op" id="4824557">.</span><span class="ident" id="4824558">Int</span><span class="op" id="4824561">(</span><span class="op" id="4824562">)</span>&nbsp;<span class="op" id="4824564">!=</span>&nbsp;<span class="num" id="4824567">0</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4824570">case</span>&nbsp;<span class="ident" id="4824575">reflect</span><span class="op" id="4824582">.</span><span class="ident" id="4824583">Float32</span><span class="op" id="4824590">,</span>&nbsp;<span class="ident" id="4824592">reflect</span><span class="op" id="4824599">.</span><span class="ident" id="4824600">Float64</span><span class="op" id="4824607">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4824611">truth</span>&nbsp;<span class="op" id="4824617">=</span>&nbsp;<span class="ident" id="4824619">val</span><span class="op" id="4824622">.</span><span class="ident" id="4824623">Float</span><span class="op" id="4824628">(</span><span class="op" id="4824629">)</span>&nbsp;<span class="op" id="4824631">!=</span>&nbsp;<span class="num" id="4824634">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4824637">case</span>&nbsp;<span class="ident" id="4824642">reflect</span><span class="op" id="4824649">.</span><span class="ident" id="4824650">Uint</span><span class="op" id="4824654">,</span>&nbsp;<span class="ident" id="4824656">reflect</span><span class="op" id="4824663">.</span><span class="ident" id="4824664">Uint8</span><span class="op" id="4824669">,</span>&nbsp;<span class="ident" id="4824671">reflect</span><span class="op" id="4824678">.</span><span class="ident" id="4824679">Uint16</span><span class="op" id="4824685">,</span>&nbsp;<span class="ident" id="4824687">reflect</span><span class="op" id="4824694">.</span><span class="ident" id="4824695">Uint32</span><span class="op" id="4824701">,</span>&nbsp;<span class="ident" id="4824703">reflect</span><span class="op" id="4824710">.</span><span class="ident" id="4824711">Uint64</span><span class="op" id="4824717">,</span>&nbsp;<span class="ident" id="4824719">reflect</span><span class="op" id="4824726">.</span><span class="ident" id="4824727">Uintptr</span><span class="op" id="4824734">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4824738">truth</span>&nbsp;<span class="op" id="4824744">=</span>&nbsp;<span class="ident" id="4824746">val</span><span class="op" id="4824749">.</span><span class="ident" id="4824750">Uint</span><span class="op" id="4824754">(</span><span class="op" id="4824755">)</span>&nbsp;<span class="op" id="4824757">!=</span>&nbsp;<span class="num" id="4824760">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4824763">case</span>&nbsp;<span class="ident" id="4824768">reflect</span><span class="op" id="4824775">.</span><span class="ident" id="4824776">Struct</span><span class="op" id="4824782">:</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4824786">truth</span>&nbsp;<span class="op" id="4824792">=</span>&nbsp;<span class="builtintype" id="4824794">true</span>&nbsp;<span class="comment" id="4824799">//&nbsp;Struct&nbsp;values&nbsp;are&nbsp;always&nbsp;true.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4824834">default</span><span class="op" id="4824841">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4824845">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4824853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4824856">return</span>&nbsp;<span class="ident" id="4824863">truth</span><span class="op" id="4824868">,</span>&nbsp;<span class="builtintype" id="4824870">true</span><br>
<span class="lineno">240</span><span class="op" id="4824875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4824878">func</span>&nbsp;<span class="op" id="4824883">(</span><span class="ident" id="4824884">s</span>&nbsp;<span class="op" id="4824886">*</span><span class="ident" id="4824887">state</span><span class="op" id="4824892">)</span>&nbsp;<span class="ident" id="4824894">walkRange</span><span class="op" id="4824903">(</span><span class="ident" id="4824904">dot</span>&nbsp;<span class="ident" id="4824908">reflect</span><span class="op" id="4824915">.</span><span class="ident" id="4824916">Value</span><span class="op" id="4824921">,</span>&nbsp;<span class="ident" id="4824923">r</span>&nbsp;<span class="op" id="4824925">*</span><span class="ident" id="4824926">parse</span><span class="op" id="4824931">.</span><span class="ident" id="4824932">RangeNode</span><span class="op" id="4824941">)</span>&nbsp;<span class="op" id="4824943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4824946">s</span><span class="op" id="4824947">.</span><span class="ident" id="4824948">at</span><span class="op" id="4824950">(</span><span class="ident" id="4824951">r</span><span class="op" id="4824952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4824955">defer</span>&nbsp;<span class="ident" id="4824961">s</span><span class="op" id="4824962">.</span><span class="ident" id="4824963">pop</span><span class="op" id="4824966">(</span><span class="ident" id="4824967">s</span><span class="op" id="4824968">.</span><span class="ident" id="4824969">mark</span><span class="op" id="4824973">(</span><span class="op" id="4824974">)</span><span class="op" id="4824975">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4824978">val</span><span class="op" id="4824981">,</span>&nbsp;<span class="ident" id="4824983">_</span>&nbsp;<span class="op" id="4824985">:=</span>&nbsp;<span class="ident" id="4824988">indirect</span><span class="op" id="4824996">(</span><span class="ident" id="4824997">s</span><span class="op" id="4824998">.</span><span class="ident" id="4824999">evalPipeline</span><span class="op" id="4825011">(</span><span class="ident" id="4825012">dot</span><span class="op" id="4825015">,</span>&nbsp;<span class="ident" id="4825017">r</span><span class="op" id="4825018">.</span><span class="ident" id="4825019">Pipe</span><span class="op" id="4825023">)</span><span class="op" id="4825024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4825027">//&nbsp;mark&nbsp;top&nbsp;of&nbsp;stack&nbsp;before&nbsp;any&nbsp;variables&nbsp;in&nbsp;the&nbsp;body&nbsp;are&nbsp;pushed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4825094">mark</span>&nbsp;<span class="op" id="4825099">:=</span>&nbsp;<span class="ident" id="4825102">s</span><span class="op" id="4825103">.</span><span class="ident" id="4825104">mark</span><span class="op" id="4825108">(</span><span class="op" id="4825109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4825112">oneIteration</span>&nbsp;<span class="op" id="4825125">:=</span>&nbsp;<span class="keyword" id="4825128">func</span><span class="op" id="4825132">(</span><span class="ident" id="4825133">index</span><span class="op" id="4825138">,</span>&nbsp;<span class="ident" id="4825140">elem</span>&nbsp;<span class="ident" id="4825145">reflect</span><span class="op" id="4825152">.</span><span class="ident" id="4825153">Value</span><span class="op" id="4825158">)</span>&nbsp;<span class="op" id="4825160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4825164">//&nbsp;Set&nbsp;top&nbsp;var&nbsp;(lexically&nbsp;the&nbsp;second&nbsp;if&nbsp;there&nbsp;are&nbsp;two)&nbsp;to&nbsp;the&nbsp;element.</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825237">if</span>&nbsp;<span class="builtinfunc" id="4825240">len</span><span class="op" id="4825243">(</span><span class="ident" id="4825244">r</span><span class="op" id="4825245">.</span><span class="ident" id="4825246">Pipe</span><span class="op" id="4825250">.</span><span class="ident" id="4825251">Decl</span><span class="op" id="4825255">)</span>&nbsp;<span class="op" id="4825257">&gt;</span>&nbsp;<span class="num" id="4825259">0</span>&nbsp;<span class="op" id="4825261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4825266">s</span><span class="op" id="4825267">.</span><span class="ident" id="4825268">setVar</span><span class="op" id="4825274">(</span><span class="num" id="4825275">1</span><span class="op" id="4825276">,</span>&nbsp;<span class="ident" id="4825278">elem</span><span class="op" id="4825282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4825286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4825290">//&nbsp;Set&nbsp;next&nbsp;var&nbsp;(lexically&nbsp;the&nbsp;first&nbsp;if&nbsp;there&nbsp;are&nbsp;two)&nbsp;to&nbsp;the&nbsp;index.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825361">if</span>&nbsp;<span class="builtinfunc" id="4825364">len</span><span class="op" id="4825367">(</span><span class="ident" id="4825368">r</span><span class="op" id="4825369">.</span><span class="ident" id="4825370">Pipe</span><span class="op" id="4825374">.</span><span class="ident" id="4825375">Decl</span><span class="op" id="4825379">)</span>&nbsp;<span class="op" id="4825381">&gt;</span>&nbsp;<span class="num" id="4825383">1</span>&nbsp;<span class="op" id="4825385">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4825390">s</span><span class="op" id="4825391">.</span><span class="ident" id="4825392">setVar</span><span class="op" id="4825398">(</span><span class="num" id="4825399">2</span><span class="op" id="4825400">,</span>&nbsp;<span class="ident" id="4825402">index</span><span class="op" id="4825407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4825411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4825415">s</span><span class="op" id="4825416">.</span><span class="ident" id="4825417">walk</span><span class="op" id="4825421">(</span><span class="ident" id="4825422">elem</span><span class="op" id="4825426">,</span>&nbsp;<span class="ident" id="4825428">r</span><span class="op" id="4825429">.</span><span class="ident" id="4825430">List</span><span class="op" id="4825434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4825438">s</span><span class="op" id="4825439">.</span><span class="ident" id="4825440">pop</span><span class="op" id="4825443">(</span><span class="ident" id="4825444">mark</span><span class="op" id="4825448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4825451">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825454">switch</span>&nbsp;<span class="ident" id="4825461">val</span><span class="op" id="4825464">.</span><span class="ident" id="4825465">Kind</span><span class="op" id="4825469">(</span><span class="op" id="4825470">)</span>&nbsp;<span class="op" id="4825472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825475">case</span>&nbsp;<span class="ident" id="4825480">reflect</span><span class="op" id="4825487">.</span><span class="ident" id="4825488">Array</span><span class="op" id="4825493">,</span>&nbsp;<span class="ident" id="4825495">reflect</span><span class="op" id="4825502">.</span><span class="ident" id="4825503">Slice</span><span class="op" id="4825508">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825512">if</span>&nbsp;<span class="ident" id="4825515">val</span><span class="op" id="4825518">.</span><span class="ident" id="4825519">Len</span><span class="op" id="4825522">(</span><span class="op" id="4825523">)</span>&nbsp;<span class="op" id="4825525">==</span>&nbsp;<span class="num" id="4825528">0</span>&nbsp;<span class="op" id="4825530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825535">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4825543">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825547">for</span>&nbsp;<span class="ident" id="4825551">i</span>&nbsp;<span class="op" id="4825553">:=</span>&nbsp;<span class="num" id="4825556">0</span><span class="op" id="4825557">;</span>&nbsp;<span class="ident" id="4825559">i</span>&nbsp;<span class="op" id="4825561">&lt;</span>&nbsp;<span class="ident" id="4825563">val</span><span class="op" id="4825566">.</span><span class="ident" id="4825567">Len</span><span class="op" id="4825570">(</span><span class="op" id="4825571">)</span><span class="op" id="4825572">;</span>&nbsp;<span class="ident" id="4825574">i</span><span class="op" id="4825575">++</span>&nbsp;<span class="op" id="4825578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4825583">oneIteration</span><span class="op" id="4825595">(</span><span class="ident" id="4825596">reflect</span><span class="op" id="4825603">.</span><span class="ident" id="4825604">ValueOf</span><span class="op" id="4825611">(</span><span class="ident" id="4825612">i</span><span class="op" id="4825613">)</span><span class="op" id="4825614">,</span>&nbsp;<span class="ident" id="4825616">val</span><span class="op" id="4825619">.</span><span class="ident" id="4825620">Index</span><span class="op" id="4825625">(</span><span class="ident" id="4825626">i</span><span class="op" id="4825627">)</span><span class="op" id="4825628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4825632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825636">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825644">case</span>&nbsp;<span class="ident" id="4825649">reflect</span><span class="op" id="4825656">.</span><span class="ident" id="4825657">Map</span><span class="op" id="4825660">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825664">if</span>&nbsp;<span class="ident" id="4825667">val</span><span class="op" id="4825670">.</span><span class="ident" id="4825671">Len</span><span class="op" id="4825674">(</span><span class="op" id="4825675">)</span>&nbsp;<span class="op" id="4825677">==</span>&nbsp;<span class="num" id="4825680">0</span>&nbsp;<span class="op" id="4825682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825687">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4825695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825699">for</span>&nbsp;<span class="ident" id="4825703">_</span><span class="op" id="4825704">,</span>&nbsp;<span class="ident" id="4825706">key</span>&nbsp;<span class="op" id="4825710">:=</span>&nbsp;<span class="keyword" id="4825713">range</span>&nbsp;<span class="ident" id="4825719">sortKeys</span><span class="op" id="4825727">(</span><span class="ident" id="4825728">val</span><span class="op" id="4825731">.</span><span class="ident" id="4825732">MapKeys</span><span class="op" id="4825739">(</span><span class="op" id="4825740">)</span><span class="op" id="4825741">)</span>&nbsp;<span class="op" id="4825743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4825748">oneIteration</span><span class="op" id="4825760">(</span><span class="ident" id="4825761">key</span><span class="op" id="4825764">,</span>&nbsp;<span class="ident" id="4825766">val</span><span class="op" id="4825769">.</span><span class="ident" id="4825770">MapIndex</span><span class="op" id="4825778">(</span><span class="ident" id="4825779">key</span><span class="op" id="4825782">)</span><span class="op" id="4825783">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4825787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825791">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825799">case</span>&nbsp;<span class="ident" id="4825804">reflect</span><span class="op" id="4825811">.</span><span class="ident" id="4825812">Chan</span><span class="op" id="4825816">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825820">if</span>&nbsp;<span class="ident" id="4825823">val</span><span class="op" id="4825826">.</span><span class="ident" id="4825827">IsNil</span><span class="op" id="4825832">(</span><span class="op" id="4825833">)</span>&nbsp;<span class="op" id="4825835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825840">break</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4825848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4825852">i</span>&nbsp;<span class="op" id="4825854">:=</span>&nbsp;<span class="num" id="4825857">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825861">for</span>&nbsp;<span class="op" id="4825865">;</span>&nbsp;<span class="op" id="4825867">;</span>&nbsp;<span class="ident" id="4825869">i</span><span class="op" id="4825870">++</span>&nbsp;<span class="op" id="4825873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4825878">elem</span><span class="op" id="4825882">,</span>&nbsp;<span class="ident" id="4825884">ok</span>&nbsp;<span class="op" id="4825887">:=</span>&nbsp;<span class="ident" id="4825890">val</span><span class="op" id="4825893">.</span><span class="ident" id="4825894">Recv</span><span class="op" id="4825898">(</span><span class="op" id="4825899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825904">if</span>&nbsp;<span class="op" id="4825907">!</span><span class="ident" id="4825908">ok</span>&nbsp;<span class="op" id="4825911">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825917">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4825926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4825931">oneIteration</span><span class="op" id="4825943">(</span><span class="ident" id="4825944">reflect</span><span class="op" id="4825951">.</span><span class="ident" id="4825952">ValueOf</span><span class="op" id="4825959">(</span><span class="ident" id="4825960">i</span><span class="op" id="4825961">)</span><span class="op" id="4825962">,</span>&nbsp;<span class="ident" id="4825964">elem</span><span class="op" id="4825968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4825972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825976">if</span>&nbsp;<span class="ident" id="4825979">i</span>&nbsp;<span class="op" id="4825981">==</span>&nbsp;<span class="num" id="4825984">0</span>&nbsp;<span class="op" id="4825986">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4825991">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4825999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4826003">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4826011">case</span>&nbsp;<span class="ident" id="4826016">reflect</span><span class="op" id="4826023">.</span><span class="ident" id="4826024">Invalid</span><span class="op" id="4826031">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4826035">break</span>&nbsp;<span class="comment" id="4826041">//&nbsp;An&nbsp;invalid&nbsp;value&nbsp;is&nbsp;likely&nbsp;a&nbsp;nil&nbsp;map,&nbsp;etc.&nbsp;and&nbsp;acts&nbsp;like&nbsp;an&nbsp;empty&nbsp;map.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4826116">default</span><span class="op" id="4826123">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4826127">s</span><span class="op" id="4826128">.</span><span class="ident" id="4826129">errorf</span><span class="op" id="4826135">(</span><span class="string" id="4826136">&#34;range&nbsp;can&#39;t&nbsp;iterate&nbsp;over&nbsp;%v&#34;</span><span class="op" id="4826165">,</span>&nbsp;<span class="ident" id="4826167">val</span><span class="op" id="4826170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4826173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4826176">if</span>&nbsp;<span class="ident" id="4826179">r</span><span class="op" id="4826180">.</span><span class="ident" id="4826181">ElseList</span>&nbsp;<span class="op" id="4826190">!=</span>&nbsp;<span class="ident" id="4826193">nil</span>&nbsp;<span class="op" id="4826197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4826201">s</span><span class="op" id="4826202">.</span><span class="ident" id="4826203">walk</span><span class="op" id="4826207">(</span><span class="ident" id="4826208">dot</span><span class="op" id="4826211">,</span>&nbsp;<span class="ident" id="4826213">r</span><span class="op" id="4826214">.</span><span class="ident" id="4826215">ElseList</span><span class="op" id="4826223">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4826226">}</span><br>
<span class="lineno"></span><span class="op" id="4826228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4826231">func</span>&nbsp;<span class="op" id="4826236">(</span><span class="ident" id="4826237">s</span>&nbsp;<span class="op" id="4826239">*</span><span class="ident" id="4826240">state</span><span class="op" id="4826245">)</span>&nbsp;<span class="ident" id="4826247">walkTemplate</span><span class="op" id="4826259">(</span><span class="ident" id="4826260">dot</span>&nbsp;<span class="ident" id="4826264">reflect</span><span class="op" id="4826271">.</span><span class="ident" id="4826272">Value</span><span class="op" id="4826277">,</span>&nbsp;<span class="ident" id="4826279">t</span>&nbsp;<span class="op" id="4826281">*</span><span class="ident" id="4826282">parse</span><span class="op" id="4826287">.</span><span class="ident" id="4826288">TemplateNode</span><span class="op" id="4826300">)</span>&nbsp;<span class="op" id="4826302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4826305">s</span><span class="op" id="4826306">.</span><span class="ident" id="4826307">at</span><span class="op" id="4826309">(</span><span class="ident" id="4826310">t</span><span class="op" id="4826311">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4826314">tmpl</span>&nbsp;<span class="op" id="4826319">:=</span>&nbsp;<span class="ident" id="4826322">s</span><span class="op" id="4826323">.</span><span class="ident" id="4826324">tmpl</span><span class="op" id="4826328">.</span><span class="ident" id="4826329">tmpl</span><span class="op" id="4826333">[</span><span class="ident" id="4826334">t</span><span class="op" id="4826335">.</span><span class="ident" id="4826336">Name</span><span class="op" id="4826340">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4826343">if</span>&nbsp;<span class="ident" id="4826346">tmpl</span>&nbsp;<span class="op" id="4826351">==</span>&nbsp;<span class="ident" id="4826354">nil</span>&nbsp;<span class="op" id="4826358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4826362">s</span><span class="op" id="4826363">.</span><span class="ident" id="4826364">errorf</span><span class="op" id="4826370">(</span><span class="string" id="4826371">&#34;template&nbsp;%q&nbsp;not&nbsp;defined&#34;</span><span class="op" id="4826396">,</span>&nbsp;<span class="ident" id="4826398">t</span><span class="op" id="4826399">.</span><span class="ident" id="4826400">Name</span><span class="op" id="4826404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4826407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4826410">//&nbsp;Variables&nbsp;declared&nbsp;by&nbsp;the&nbsp;pipeline&nbsp;persist.</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4826458">dot</span>&nbsp;<span class="op" id="4826462">=</span>&nbsp;<span class="ident" id="4826464">s</span><span class="op" id="4826465">.</span><span class="ident" id="4826466">evalPipeline</span><span class="op" id="4826478">(</span><span class="ident" id="4826479">dot</span><span class="op" id="4826482">,</span>&nbsp;<span class="ident" id="4826484">t</span><span class="op" id="4826485">.</span><span class="ident" id="4826486">Pipe</span><span class="op" id="4826490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4826493">newState</span>&nbsp;<span class="op" id="4826502">:=</span>&nbsp;<span class="op" id="4826505">*</span><span class="ident" id="4826506">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4826509">newState</span><span class="op" id="4826517">.</span><span class="ident" id="4826518">tmpl</span>&nbsp;<span class="op" id="4826523">=</span>&nbsp;<span class="ident" id="4826525">tmpl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4826531">//&nbsp;No&nbsp;dynamic&nbsp;scoping:&nbsp;template&nbsp;invocations&nbsp;inherit&nbsp;no&nbsp;variables.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4826598">newState</span><span class="op" id="4826606">.</span><span class="ident" id="4826607">vars</span>&nbsp;<span class="op" id="4826612">=</span>&nbsp;<span class="op" id="4826614">[</span><span class="op" id="4826615">]</span><span class="ident" id="4826616">variable</span><span class="op" id="4826624">{</span><span class="op" id="4826625">{</span><span class="string" id="4826626">&#34;$&#34;</span><span class="op" id="4826629">,</span>&nbsp;<span class="ident" id="4826631">dot</span><span class="op" id="4826634">}</span><span class="op" id="4826635">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4826638">newState</span><span class="op" id="4826646">.</span><span class="ident" id="4826647">walk</span><span class="op" id="4826651">(</span><span class="ident" id="4826652">dot</span><span class="op" id="4826655">,</span>&nbsp;<span class="ident" id="4826657">tmpl</span><span class="op" id="4826661">.</span><span class="ident" id="4826662">Root</span><span class="op" id="4826666">)</span><br>
<span class="lineno"></span><span class="op" id="4826668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4826671">//&nbsp;Eval&nbsp;functions&nbsp;evaluate&nbsp;pipelines,&nbsp;commands,&nbsp;and&nbsp;their&nbsp;elements&nbsp;and&nbsp;extract</span><br>
<span class="lineno"></span><span class="comment" id="4826750">//&nbsp;values&nbsp;from&nbsp;the&nbsp;data&nbsp;structure&nbsp;by&nbsp;examining&nbsp;fields,&nbsp;calling&nbsp;methods,&nbsp;and&nbsp;so&nbsp;on.</span><br>
<span class="lineno">320</span><span class="comment" id="4826833">//&nbsp;The&nbsp;printing&nbsp;of&nbsp;those&nbsp;values&nbsp;happens&nbsp;only&nbsp;through&nbsp;walk&nbsp;functions.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4826903">//&nbsp;evalPipeline&nbsp;returns&nbsp;the&nbsp;value&nbsp;acquired&nbsp;by&nbsp;evaluating&nbsp;a&nbsp;pipeline.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4826979">//&nbsp;pipeline&nbsp;has&nbsp;a&nbsp;variable&nbsp;declaration,&nbsp;the&nbsp;variable&nbsp;will&nbsp;be&nbsp;pushed&nbsp;on&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4827054">//&nbsp;stack.&nbsp;Callers&nbsp;should&nbsp;therefore&nbsp;pop&nbsp;the&nbsp;stack&nbsp;after&nbsp;they&nbsp;are&nbsp;finished</span><br>
<span class="lineno">325</span><span class="comment" id="4827127">//&nbsp;executing&nbsp;commands&nbsp;depending&nbsp;on&nbsp;the&nbsp;pipeline&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="4827182">func</span>&nbsp;<span class="op" id="4827187">(</span><span class="ident" id="4827188">s</span>&nbsp;<span class="op" id="4827190">*</span><span class="ident" id="4827191">state</span><span class="op" id="4827196">)</span>&nbsp;<span class="ident" id="4827198">evalPipeline</span><span class="op" id="4827210">(</span><span class="ident" id="4827211">dot</span>&nbsp;<span class="ident" id="4827215">reflect</span><span class="op" id="4827222">.</span><span class="ident" id="4827223">Value</span><span class="op" id="4827228">,</span>&nbsp;<span class="ident" id="4827230">pipe</span>&nbsp;<span class="op" id="4827235">*</span><span class="ident" id="4827236">parse</span><span class="op" id="4827241">.</span><span class="ident" id="4827242">PipeNode</span><span class="op" id="4827250">)</span>&nbsp;<span class="op" id="4827252">(</span><span class="ident" id="4827253">value</span>&nbsp;<span class="ident" id="4827259">reflect</span><span class="op" id="4827266">.</span><span class="ident" id="4827267">Value</span><span class="op" id="4827272">)</span>&nbsp;<span class="op" id="4827274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4827277">if</span>&nbsp;<span class="ident" id="4827280">pipe</span>&nbsp;<span class="op" id="4827285">==</span>&nbsp;<span class="ident" id="4827288">nil</span>&nbsp;<span class="op" id="4827292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4827296">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4827304">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4827307">s</span><span class="op" id="4827308">.</span><span class="ident" id="4827309">at</span><span class="op" id="4827311">(</span><span class="ident" id="4827312">pipe</span><span class="op" id="4827316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4827319">for</span>&nbsp;<span class="ident" id="4827323">_</span><span class="op" id="4827324">,</span>&nbsp;<span class="ident" id="4827326">cmd</span>&nbsp;<span class="op" id="4827330">:=</span>&nbsp;<span class="keyword" id="4827333">range</span>&nbsp;<span class="ident" id="4827339">pipe</span><span class="op" id="4827343">.</span><span class="ident" id="4827344">Cmds</span>&nbsp;<span class="op" id="4827349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4827353">value</span>&nbsp;<span class="op" id="4827359">=</span>&nbsp;<span class="ident" id="4827361">s</span><span class="op" id="4827362">.</span><span class="ident" id="4827363">evalCommand</span><span class="op" id="4827374">(</span><span class="ident" id="4827375">dot</span><span class="op" id="4827378">,</span>&nbsp;<span class="ident" id="4827380">cmd</span><span class="op" id="4827383">,</span>&nbsp;<span class="ident" id="4827385">value</span><span class="op" id="4827390">)</span>&nbsp;<span class="comment" id="4827392">//&nbsp;previous&nbsp;value&nbsp;is&nbsp;this&nbsp;one&#39;s&nbsp;final&nbsp;arg.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4827437">//&nbsp;If&nbsp;the&nbsp;object&nbsp;has&nbsp;type&nbsp;interface{},&nbsp;dig&nbsp;down&nbsp;one&nbsp;level&nbsp;to&nbsp;the&nbsp;thing&nbsp;inside.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4827518">if</span>&nbsp;<span class="ident" id="4827521">value</span><span class="op" id="4827526">.</span><span class="ident" id="4827527">Kind</span><span class="op" id="4827531">(</span><span class="op" id="4827532">)</span>&nbsp;<span class="op" id="4827534">==</span>&nbsp;<span class="ident" id="4827537">reflect</span><span class="op" id="4827544">.</span><span class="ident" id="4827545">Interface</span>&nbsp;<span class="op" id="4827555">&amp;&amp;</span>&nbsp;<span class="ident" id="4827558">value</span><span class="op" id="4827563">.</span><span class="ident" id="4827564">Type</span><span class="op" id="4827568">(</span><span class="op" id="4827569">)</span><span class="op" id="4827570">.</span><span class="ident" id="4827571">NumMethod</span><span class="op" id="4827580">(</span><span class="op" id="4827581">)</span>&nbsp;<span class="op" id="4827583">==</span>&nbsp;<span class="num" id="4827586">0</span>&nbsp;<span class="op" id="4827588">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4827593">value</span>&nbsp;<span class="op" id="4827599">=</span>&nbsp;<span class="ident" id="4827601">reflect</span><span class="op" id="4827608">.</span><span class="ident" id="4827609">ValueOf</span><span class="op" id="4827616">(</span><span class="ident" id="4827617">value</span><span class="op" id="4827622">.</span><span class="ident" id="4827623">Interface</span><span class="op" id="4827632">(</span><span class="op" id="4827633">)</span><span class="op" id="4827634">)</span>&nbsp;<span class="comment" id="4827636">//&nbsp;lovely!</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4827649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4827652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4827655">for</span>&nbsp;<span class="ident" id="4827659">_</span><span class="op" id="4827660">,</span>&nbsp;<span class="ident" id="4827662">variable</span>&nbsp;<span class="op" id="4827671">:=</span>&nbsp;<span class="keyword" id="4827674">range</span>&nbsp;<span class="ident" id="4827680">pipe</span><span class="op" id="4827684">.</span><span class="ident" id="4827685">Decl</span>&nbsp;<span class="op" id="4827690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4827694">s</span><span class="op" id="4827695">.</span><span class="ident" id="4827696">push</span><span class="op" id="4827700">(</span><span class="ident" id="4827701">variable</span><span class="op" id="4827709">.</span><span class="ident" id="4827710">Ident</span><span class="op" id="4827715">[</span><span class="num" id="4827716">0</span><span class="op" id="4827717">]</span><span class="op" id="4827718">,</span>&nbsp;<span class="ident" id="4827720">value</span><span class="op" id="4827725">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4827728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4827731">return</span>&nbsp;<span class="ident" id="4827738">value</span><br>
<span class="lineno"></span><span class="op" id="4827744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4827747">func</span>&nbsp;<span class="op" id="4827752">(</span><span class="ident" id="4827753">s</span>&nbsp;<span class="op" id="4827755">*</span><span class="ident" id="4827756">state</span><span class="op" id="4827761">)</span>&nbsp;<span class="ident" id="4827763">notAFunction</span><span class="op" id="4827775">(</span><span class="ident" id="4827776">args</span>&nbsp;<span class="op" id="4827781">[</span><span class="op" id="4827782">]</span><span class="ident" id="4827783">parse</span><span class="op" id="4827788">.</span><span class="ident" id="4827789">Node</span><span class="op" id="4827793">,</span>&nbsp;<span class="ident" id="4827795">final</span>&nbsp;<span class="ident" id="4827801">reflect</span><span class="op" id="4827808">.</span><span class="ident" id="4827809">Value</span><span class="op" id="4827814">)</span>&nbsp;<span class="op" id="4827816">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4827819">if</span>&nbsp;<span class="builtinfunc" id="4827822">len</span><span class="op" id="4827825">(</span><span class="ident" id="4827826">args</span><span class="op" id="4827830">)</span>&nbsp;<span class="op" id="4827832">&gt;</span>&nbsp;<span class="num" id="4827834">1</span>&nbsp;<span class="op" id="4827836">||</span>&nbsp;<span class="ident" id="4827839">final</span><span class="op" id="4827844">.</span><span class="ident" id="4827845">IsValid</span><span class="op" id="4827852">(</span><span class="op" id="4827853">)</span>&nbsp;<span class="op" id="4827855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4827859">s</span><span class="op" id="4827860">.</span><span class="ident" id="4827861">errorf</span><span class="op" id="4827867">(</span><span class="string" id="4827868">&#34;can&#39;t&nbsp;give&nbsp;argument&nbsp;to&nbsp;non-function&nbsp;%s&#34;</span><span class="op" id="4827908">,</span>&nbsp;<span class="ident" id="4827910">args</span><span class="op" id="4827914">[</span><span class="num" id="4827915">0</span><span class="op" id="4827916">]</span><span class="op" id="4827917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4827920">}</span><br>
<span class="lineno"></span><span class="op" id="4827922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span><span class="keyword" id="4827925">func</span>&nbsp;<span class="op" id="4827930">(</span><span class="ident" id="4827931">s</span>&nbsp;<span class="op" id="4827933">*</span><span class="ident" id="4827934">state</span><span class="op" id="4827939">)</span>&nbsp;<span class="ident" id="4827941">evalCommand</span><span class="op" id="4827952">(</span><span class="ident" id="4827953">dot</span>&nbsp;<span class="ident" id="4827957">reflect</span><span class="op" id="4827964">.</span><span class="ident" id="4827965">Value</span><span class="op" id="4827970">,</span>&nbsp;<span class="ident" id="4827972">cmd</span>&nbsp;<span class="op" id="4827976">*</span><span class="ident" id="4827977">parse</span><span class="op" id="4827982">.</span><span class="ident" id="4827983">CommandNode</span><span class="op" id="4827994">,</span>&nbsp;<span class="ident" id="4827996">final</span>&nbsp;<span class="ident" id="4828002">reflect</span><span class="op" id="4828009">.</span><span class="ident" id="4828010">Value</span><span class="op" id="4828015">)</span>&nbsp;<span class="ident" id="4828017">reflect</span><span class="op" id="4828024">.</span><span class="ident" id="4828025">Value</span>&nbsp;<span class="op" id="4828031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4828034">firstWord</span>&nbsp;<span class="op" id="4828044">:=</span>&nbsp;<span class="ident" id="4828047">cmd</span><span class="op" id="4828050">.</span><span class="ident" id="4828051">Args</span><span class="op" id="4828055">[</span><span class="num" id="4828056">0</span><span class="op" id="4828057">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828060">switch</span>&nbsp;<span class="ident" id="4828067">n</span>&nbsp;<span class="op" id="4828069">:=</span>&nbsp;<span class="ident" id="4828072">firstWord</span><span class="op" id="4828081">.</span><span class="op" id="4828082">(</span><span class="keyword" id="4828083">type</span><span class="op" id="4828087">)</span>&nbsp;<span class="op" id="4828089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828092">case</span>&nbsp;<span class="op" id="4828097">*</span><span class="ident" id="4828098">parse</span><span class="op" id="4828103">.</span><span class="ident" id="4828104">FieldNode</span><span class="op" id="4828113">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828117">return</span>&nbsp;<span class="ident" id="4828124">s</span><span class="op" id="4828125">.</span><span class="ident" id="4828126">evalFieldNode</span><span class="op" id="4828139">(</span><span class="ident" id="4828140">dot</span><span class="op" id="4828143">,</span>&nbsp;<span class="ident" id="4828145">n</span><span class="op" id="4828146">,</span>&nbsp;<span class="ident" id="4828148">cmd</span><span class="op" id="4828151">.</span><span class="ident" id="4828152">Args</span><span class="op" id="4828156">,</span>&nbsp;<span class="ident" id="4828158">final</span><span class="op" id="4828163">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828166">case</span>&nbsp;<span class="op" id="4828171">*</span><span class="ident" id="4828172">parse</span><span class="op" id="4828177">.</span><span class="ident" id="4828178">ChainNode</span><span class="op" id="4828187">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828191">return</span>&nbsp;<span class="ident" id="4828198">s</span><span class="op" id="4828199">.</span><span class="ident" id="4828200">evalChainNode</span><span class="op" id="4828213">(</span><span class="ident" id="4828214">dot</span><span class="op" id="4828217">,</span>&nbsp;<span class="ident" id="4828219">n</span><span class="op" id="4828220">,</span>&nbsp;<span class="ident" id="4828222">cmd</span><span class="op" id="4828225">.</span><span class="ident" id="4828226">Args</span><span class="op" id="4828230">,</span>&nbsp;<span class="ident" id="4828232">final</span><span class="op" id="4828237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828240">case</span>&nbsp;<span class="op" id="4828245">*</span><span class="ident" id="4828246">parse</span><span class="op" id="4828251">.</span><span class="ident" id="4828252">IdentifierNode</span><span class="op" id="4828266">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4828270">//&nbsp;Must&nbsp;be&nbsp;a&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828295">return</span>&nbsp;<span class="ident" id="4828302">s</span><span class="op" id="4828303">.</span><span class="ident" id="4828304">evalFunction</span><span class="op" id="4828316">(</span><span class="ident" id="4828317">dot</span><span class="op" id="4828320">,</span>&nbsp;<span class="ident" id="4828322">n</span><span class="op" id="4828323">,</span>&nbsp;<span class="ident" id="4828325">cmd</span><span class="op" id="4828328">,</span>&nbsp;<span class="ident" id="4828330">cmd</span><span class="op" id="4828333">.</span><span class="ident" id="4828334">Args</span><span class="op" id="4828338">,</span>&nbsp;<span class="ident" id="4828340">final</span><span class="op" id="4828345">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828348">case</span>&nbsp;<span class="op" id="4828353">*</span><span class="ident" id="4828354">parse</span><span class="op" id="4828359">.</span><span class="ident" id="4828360">PipeNode</span><span class="op" id="4828368">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4828372">//&nbsp;Parenthesized&nbsp;pipeline.&nbsp;The&nbsp;arguments&nbsp;are&nbsp;all&nbsp;inside&nbsp;the&nbsp;pipeline;&nbsp;final&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828462">return</span>&nbsp;<span class="ident" id="4828469">s</span><span class="op" id="4828470">.</span><span class="ident" id="4828471">evalPipeline</span><span class="op" id="4828483">(</span><span class="ident" id="4828484">dot</span><span class="op" id="4828487">,</span>&nbsp;<span class="ident" id="4828489">n</span><span class="op" id="4828490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828493">case</span>&nbsp;<span class="op" id="4828498">*</span><span class="ident" id="4828499">parse</span><span class="op" id="4828504">.</span><span class="ident" id="4828505">VariableNode</span><span class="op" id="4828517">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828521">return</span>&nbsp;<span class="ident" id="4828528">s</span><span class="op" id="4828529">.</span><span class="ident" id="4828530">evalVariableNode</span><span class="op" id="4828546">(</span><span class="ident" id="4828547">dot</span><span class="op" id="4828550">,</span>&nbsp;<span class="ident" id="4828552">n</span><span class="op" id="4828553">,</span>&nbsp;<span class="ident" id="4828555">cmd</span><span class="op" id="4828558">.</span><span class="ident" id="4828559">Args</span><span class="op" id="4828563">,</span>&nbsp;<span class="ident" id="4828565">final</span><span class="op" id="4828570">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4828573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4828576">s</span><span class="op" id="4828577">.</span><span class="ident" id="4828578">at</span><span class="op" id="4828580">(</span><span class="ident" id="4828581">firstWord</span><span class="op" id="4828590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4828593">s</span><span class="op" id="4828594">.</span><span class="ident" id="4828595">notAFunction</span><span class="op" id="4828607">(</span><span class="ident" id="4828608">cmd</span><span class="op" id="4828611">.</span><span class="ident" id="4828612">Args</span><span class="op" id="4828616">,</span>&nbsp;<span class="ident" id="4828618">final</span><span class="op" id="4828623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828626">switch</span>&nbsp;<span class="ident" id="4828633">word</span>&nbsp;<span class="op" id="4828638">:=</span>&nbsp;<span class="ident" id="4828641">firstWord</span><span class="op" id="4828650">.</span><span class="op" id="4828651">(</span><span class="keyword" id="4828652">type</span><span class="op" id="4828656">)</span>&nbsp;<span class="op" id="4828658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828661">case</span>&nbsp;<span class="op" id="4828666">*</span><span class="ident" id="4828667">parse</span><span class="op" id="4828672">.</span><span class="ident" id="4828673">BoolNode</span><span class="op" id="4828681">:</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828685">return</span>&nbsp;<span class="ident" id="4828692">reflect</span><span class="op" id="4828699">.</span><span class="ident" id="4828700">ValueOf</span><span class="op" id="4828707">(</span><span class="ident" id="4828708">word</span><span class="op" id="4828712">.</span><span class="ident" id="4828713">True</span><span class="op" id="4828717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828720">case</span>&nbsp;<span class="op" id="4828725">*</span><span class="ident" id="4828726">parse</span><span class="op" id="4828731">.</span><span class="ident" id="4828732">DotNode</span><span class="op" id="4828739">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828743">return</span>&nbsp;<span class="ident" id="4828750">dot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828755">case</span>&nbsp;<span class="op" id="4828760">*</span><span class="ident" id="4828761">parse</span><span class="op" id="4828766">.</span><span class="ident" id="4828767">NilNode</span><span class="op" id="4828774">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4828778">s</span><span class="op" id="4828779">.</span><span class="ident" id="4828780">errorf</span><span class="op" id="4828786">(</span><span class="string" id="4828787">&#34;nil&nbsp;is&nbsp;not&nbsp;a&nbsp;command&#34;</span><span class="op" id="4828809">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828812">case</span>&nbsp;<span class="op" id="4828817">*</span><span class="ident" id="4828818">parse</span><span class="op" id="4828823">.</span><span class="ident" id="4828824">NumberNode</span><span class="op" id="4828834">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828838">return</span>&nbsp;<span class="ident" id="4828845">s</span><span class="op" id="4828846">.</span><span class="ident" id="4828847">idealConstant</span><span class="op" id="4828860">(</span><span class="ident" id="4828861">word</span><span class="op" id="4828865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828868">case</span>&nbsp;<span class="op" id="4828873">*</span><span class="ident" id="4828874">parse</span><span class="op" id="4828879">.</span><span class="ident" id="4828880">StringNode</span><span class="op" id="4828890">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4828894">return</span>&nbsp;<span class="ident" id="4828901">reflect</span><span class="op" id="4828908">.</span><span class="ident" id="4828909">ValueOf</span><span class="op" id="4828916">(</span><span class="ident" id="4828917">word</span><span class="op" id="4828921">.</span><span class="ident" id="4828922">Text</span><span class="op" id="4828926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4828929">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4828932">s</span><span class="op" id="4828933">.</span><span class="ident" id="4828934">errorf</span><span class="op" id="4828940">(</span><span class="string" id="4828941">&#34;can&#39;t&nbsp;evaluate&nbsp;command&nbsp;%q&#34;</span><span class="op" id="4828968">,</span>&nbsp;<span class="ident" id="4828970">firstWord</span><span class="op" id="4828979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4828982">panic</span><span class="op" id="4828987">(</span><span class="string" id="4828988">&#34;not&nbsp;reached&#34;</span><span class="op" id="4829001">)</span><br>
<span class="lineno"></span><span class="op" id="4829003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4829006">//&nbsp;idealConstant&nbsp;is&nbsp;called&nbsp;to&nbsp;return&nbsp;the&nbsp;value&nbsp;of&nbsp;a&nbsp;number&nbsp;in&nbsp;a&nbsp;context&nbsp;where</span><br>
<span class="lineno">385</span><span class="comment" id="4829084">//&nbsp;we&nbsp;don&#39;t&nbsp;know&nbsp;the&nbsp;type.&nbsp;In&nbsp;that&nbsp;case,&nbsp;the&nbsp;syntax&nbsp;of&nbsp;the&nbsp;number&nbsp;tells&nbsp;us</span><br>
<span class="lineno"></span><span class="comment" id="4829159">//&nbsp;its&nbsp;type,&nbsp;and&nbsp;we&nbsp;use&nbsp;Go&nbsp;rules&nbsp;to&nbsp;resolve.&nbsp;&nbsp;Note&nbsp;there&nbsp;is&nbsp;no&nbsp;such&nbsp;thing&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="4829236">//&nbsp;a&nbsp;uint&nbsp;ideal&nbsp;constant&nbsp;in&nbsp;this&nbsp;situation&nbsp;-&nbsp;the&nbsp;value&nbsp;must&nbsp;be&nbsp;of&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="4829312">func</span>&nbsp;<span class="op" id="4829317">(</span><span class="ident" id="4829318">s</span>&nbsp;<span class="op" id="4829320">*</span><span class="ident" id="4829321">state</span><span class="op" id="4829326">)</span>&nbsp;<span class="ident" id="4829328">idealConstant</span><span class="op" id="4829341">(</span><span class="ident" id="4829342">constant</span>&nbsp;<span class="op" id="4829351">*</span><span class="ident" id="4829352">parse</span><span class="op" id="4829357">.</span><span class="ident" id="4829358">NumberNode</span><span class="op" id="4829368">)</span>&nbsp;<span class="ident" id="4829370">reflect</span><span class="op" id="4829377">.</span><span class="ident" id="4829378">Value</span>&nbsp;<span class="op" id="4829384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4829387">//&nbsp;These&nbsp;are&nbsp;ideal&nbsp;constants&nbsp;but&nbsp;we&nbsp;don&#39;t&nbsp;know&nbsp;the&nbsp;type</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4829444">//&nbsp;and&nbsp;we&nbsp;have&nbsp;no&nbsp;context.&nbsp;&nbsp;(If&nbsp;it&nbsp;was&nbsp;a&nbsp;method&nbsp;argument,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4829503">//&nbsp;we&#39;d&nbsp;know&nbsp;what&nbsp;we&nbsp;need.)&nbsp;The&nbsp;syntax&nbsp;guides&nbsp;us&nbsp;to&nbsp;some&nbsp;extent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4829569">s</span><span class="op" id="4829570">.</span><span class="ident" id="4829571">at</span><span class="op" id="4829573">(</span><span class="ident" id="4829574">constant</span><span class="op" id="4829582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4829585">switch</span>&nbsp;<span class="op" id="4829592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4829595">case</span>&nbsp;<span class="ident" id="4829600">constant</span><span class="op" id="4829608">.</span><span class="ident" id="4829609">IsComplex</span><span class="op" id="4829618">:</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4829622">return</span>&nbsp;<span class="ident" id="4829629">reflect</span><span class="op" id="4829636">.</span><span class="ident" id="4829637">ValueOf</span><span class="op" id="4829644">(</span><span class="ident" id="4829645">constant</span><span class="op" id="4829653">.</span><span class="ident" id="4829654">Complex128</span><span class="op" id="4829664">)</span>&nbsp;<span class="comment" id="4829666">//&nbsp;incontrovertible.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4829688">case</span>&nbsp;<span class="ident" id="4829693">constant</span><span class="op" id="4829701">.</span><span class="ident" id="4829702">IsFloat</span>&nbsp;<span class="op" id="4829710">&amp;&amp;</span>&nbsp;<span class="op" id="4829713">!</span><span class="ident" id="4829714">isHexConstant</span><span class="op" id="4829727">(</span><span class="ident" id="4829728">constant</span><span class="op" id="4829736">.</span><span class="ident" id="4829737">Text</span><span class="op" id="4829741">)</span>&nbsp;<span class="op" id="4829743">&amp;&amp;</span>&nbsp;<span class="ident" id="4829746">strings</span><span class="op" id="4829753">.</span><span class="ident" id="4829754">IndexAny</span><span class="op" id="4829762">(</span><span class="ident" id="4829763">constant</span><span class="op" id="4829771">.</span><span class="ident" id="4829772">Text</span><span class="op" id="4829776">,</span>&nbsp;<span class="string" id="4829778">&#34;.eE&#34;</span><span class="op" id="4829783">)</span>&nbsp;<span class="op" id="4829785">&gt;=</span>&nbsp;<span class="num" id="4829788">0</span><span class="op" id="4829789">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4829793">return</span>&nbsp;<span class="ident" id="4829800">reflect</span><span class="op" id="4829807">.</span><span class="ident" id="4829808">ValueOf</span><span class="op" id="4829815">(</span><span class="ident" id="4829816">constant</span><span class="op" id="4829824">.</span><span class="ident" id="4829825">Float64</span><span class="op" id="4829832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4829835">case</span>&nbsp;<span class="ident" id="4829840">constant</span><span class="op" id="4829848">.</span><span class="ident" id="4829849">IsInt</span><span class="op" id="4829854">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4829858">n</span>&nbsp;<span class="op" id="4829860">:=</span>&nbsp;<span class="builtintype" id="4829863">int</span><span class="op" id="4829866">(</span><span class="ident" id="4829867">constant</span><span class="op" id="4829875">.</span><span class="ident" id="4829876">Int64</span><span class="op" id="4829881">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4829885">if</span>&nbsp;<span class="ident" id="4829888">int64</span><span class="op" id="4829893">(</span><span class="ident" id="4829894">n</span><span class="op" id="4829895">)</span>&nbsp;<span class="op" id="4829897">!=</span>&nbsp;<span class="ident" id="4829900">constant</span><span class="op" id="4829908">.</span><span class="ident" id="4829909">Int64</span>&nbsp;<span class="op" id="4829915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4829920">s</span><span class="op" id="4829921">.</span><span class="ident" id="4829922">errorf</span><span class="op" id="4829928">(</span><span class="string" id="4829929">&#34;%s&nbsp;overflows&nbsp;int&#34;</span><span class="op" id="4829947">,</span>&nbsp;<span class="ident" id="4829949">constant</span><span class="op" id="4829957">.</span><span class="ident" id="4829958">Text</span><span class="op" id="4829962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4829966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4829970">return</span>&nbsp;<span class="ident" id="4829977">reflect</span><span class="op" id="4829984">.</span><span class="ident" id="4829985">ValueOf</span><span class="op" id="4829992">(</span><span class="ident" id="4829993">n</span><span class="op" id="4829994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4829997">case</span>&nbsp;<span class="ident" id="4830002">constant</span><span class="op" id="4830010">.</span><span class="ident" id="4830011">IsUint</span><span class="op" id="4830017">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4830021">s</span><span class="op" id="4830022">.</span><span class="ident" id="4830023">errorf</span><span class="op" id="4830029">(</span><span class="string" id="4830030">&#34;%s&nbsp;overflows&nbsp;int&#34;</span><span class="op" id="4830048">,</span>&nbsp;<span class="ident" id="4830050">constant</span><span class="op" id="4830058">.</span><span class="ident" id="4830059">Text</span><span class="op" id="4830063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4830066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4830069">return</span>&nbsp;<span class="ident" id="4830076">zero</span><br>
<span class="lineno"></span><span class="op" id="4830081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="4830084">func</span>&nbsp;<span class="ident" id="4830089">isHexConstant</span><span class="op" id="4830102">(</span><span class="ident" id="4830103">s</span>&nbsp;<span class="builtintype" id="4830105">string</span><span class="op" id="4830111">)</span>&nbsp;<span class="builtintype" id="4830113">bool</span>&nbsp;<span class="op" id="4830118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4830121">return</span>&nbsp;<span class="builtinfunc" id="4830128">len</span><span class="op" id="4830131">(</span><span class="ident" id="4830132">s</span><span class="op" id="4830133">)</span>&nbsp;<span class="op" id="4830135">&gt;</span>&nbsp;<span class="num" id="4830137">2</span>&nbsp;<span class="op" id="4830139">&amp;&amp;</span>&nbsp;<span class="ident" id="4830142">s</span><span class="op" id="4830143">[</span><span class="num" id="4830144">0</span><span class="op" id="4830145">]</span>&nbsp;<span class="op" id="4830147">==</span>&nbsp;<span class="string" id="4830150">&#39;0&#39;</span>&nbsp;<span class="op" id="4830154">&amp;&amp;</span>&nbsp;<span class="op" id="4830157">(</span><span class="ident" id="4830158">s</span><span class="op" id="4830159">[</span><span class="num" id="4830160">1</span><span class="op" id="4830161">]</span>&nbsp;<span class="op" id="4830163">==</span>&nbsp;<span class="string" id="4830166">&#39;x&#39;</span>&nbsp;<span class="op" id="4830170">||</span>&nbsp;<span class="ident" id="4830173">s</span><span class="op" id="4830174">[</span><span class="num" id="4830175">1</span><span class="op" id="4830176">]</span>&nbsp;<span class="op" id="4830178">==</span>&nbsp;<span class="string" id="4830181">&#39;X&#39;</span><span class="op" id="4830184">)</span><br>
<span class="lineno"></span><span class="op" id="4830186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4830189">func</span>&nbsp;<span class="op" id="4830194">(</span><span class="ident" id="4830195">s</span>&nbsp;<span class="op" id="4830197">*</span><span class="ident" id="4830198">state</span><span class="op" id="4830203">)</span>&nbsp;<span class="ident" id="4830205">evalFieldNode</span><span class="op" id="4830218">(</span><span class="ident" id="4830219">dot</span>&nbsp;<span class="ident" id="4830223">reflect</span><span class="op" id="4830230">.</span><span class="ident" id="4830231">Value</span><span class="op" id="4830236">,</span>&nbsp;<span class="ident" id="4830238">field</span>&nbsp;<span class="op" id="4830244">*</span><span class="ident" id="4830245">parse</span><span class="op" id="4830250">.</span><span class="ident" id="4830251">FieldNode</span><span class="op" id="4830260">,</span>&nbsp;<span class="ident" id="4830262">args</span>&nbsp;<span class="op" id="4830267">[</span><span class="op" id="4830268">]</span><span class="ident" id="4830269">parse</span><span class="op" id="4830274">.</span><span class="ident" id="4830275">Node</span><span class="op" id="4830279">,</span>&nbsp;<span class="ident" id="4830281">final</span>&nbsp;<span class="ident" id="4830287">reflect</span><span class="op" id="4830294">.</span><span class="ident" id="4830295">Value</span><span class="op" id="4830300">)</span>&nbsp;<span class="ident" id="4830302">reflect</span><span class="op" id="4830309">.</span><span class="ident" id="4830310">Value</span>&nbsp;<span class="op" id="4830316">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4830319">s</span><span class="op" id="4830320">.</span><span class="ident" id="4830321">at</span><span class="op" id="4830323">(</span><span class="ident" id="4830324">field</span><span class="op" id="4830329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4830332">return</span>&nbsp;<span class="ident" id="4830339">s</span><span class="op" id="4830340">.</span><span class="ident" id="4830341">evalFieldChain</span><span class="op" id="4830355">(</span><span class="ident" id="4830356">dot</span><span class="op" id="4830359">,</span>&nbsp;<span class="ident" id="4830361">dot</span><span class="op" id="4830364">,</span>&nbsp;<span class="ident" id="4830366">field</span><span class="op" id="4830371">,</span>&nbsp;<span class="ident" id="4830373">field</span><span class="op" id="4830378">.</span><span class="ident" id="4830379">Ident</span><span class="op" id="4830384">,</span>&nbsp;<span class="ident" id="4830386">args</span><span class="op" id="4830390">,</span>&nbsp;<span class="ident" id="4830392">final</span><span class="op" id="4830397">)</span><br>
<span class="lineno"></span><span class="op" id="4830399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4830402">func</span>&nbsp;<span class="op" id="4830407">(</span><span class="ident" id="4830408">s</span>&nbsp;<span class="op" id="4830410">*</span><span class="ident" id="4830411">state</span><span class="op" id="4830416">)</span>&nbsp;<span class="ident" id="4830418">evalChainNode</span><span class="op" id="4830431">(</span><span class="ident" id="4830432">dot</span>&nbsp;<span class="ident" id="4830436">reflect</span><span class="op" id="4830443">.</span><span class="ident" id="4830444">Value</span><span class="op" id="4830449">,</span>&nbsp;<span class="ident" id="4830451">chain</span>&nbsp;<span class="op" id="4830457">*</span><span class="ident" id="4830458">parse</span><span class="op" id="4830463">.</span><span class="ident" id="4830464">ChainNode</span><span class="op" id="4830473">,</span>&nbsp;<span class="ident" id="4830475">args</span>&nbsp;<span class="op" id="4830480">[</span><span class="op" id="4830481">]</span><span class="ident" id="4830482">parse</span><span class="op" id="4830487">.</span><span class="ident" id="4830488">Node</span><span class="op" id="4830492">,</span>&nbsp;<span class="ident" id="4830494">final</span>&nbsp;<span class="ident" id="4830500">reflect</span><span class="op" id="4830507">.</span><span class="ident" id="4830508">Value</span><span class="op" id="4830513">)</span>&nbsp;<span class="ident" id="4830515">reflect</span><span class="op" id="4830522">.</span><span class="ident" id="4830523">Value</span>&nbsp;<span class="op" id="4830529">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4830532">s</span><span class="op" id="4830533">.</span><span class="ident" id="4830534">at</span><span class="op" id="4830536">(</span><span class="ident" id="4830537">chain</span><span class="op" id="4830542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4830545">//&nbsp;(pipe).Field1.Field2&nbsp;has&nbsp;pipe&nbsp;as&nbsp;.Node,&nbsp;fields&nbsp;as&nbsp;.Field.&nbsp;Eval&nbsp;the&nbsp;pipeline,&nbsp;then&nbsp;the&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4830643">pipe</span>&nbsp;<span class="op" id="4830648">:=</span>&nbsp;<span class="ident" id="4830651">s</span><span class="op" id="4830652">.</span><span class="ident" id="4830653">evalArg</span><span class="op" id="4830660">(</span><span class="ident" id="4830661">dot</span><span class="op" id="4830664">,</span>&nbsp;<span class="ident" id="4830666">nil</span><span class="op" id="4830669">,</span>&nbsp;<span class="ident" id="4830671">chain</span><span class="op" id="4830676">.</span><span class="ident" id="4830677">Node</span><span class="op" id="4830681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4830684">if</span>&nbsp;<span class="builtinfunc" id="4830687">len</span><span class="op" id="4830690">(</span><span class="ident" id="4830691">chain</span><span class="op" id="4830696">.</span><span class="ident" id="4830697">Field</span><span class="op" id="4830702">)</span>&nbsp;<span class="op" id="4830704">==</span>&nbsp;<span class="num" id="4830707">0</span>&nbsp;<span class="op" id="4830709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4830713">s</span><span class="op" id="4830714">.</span><span class="ident" id="4830715">errorf</span><span class="op" id="4830721">(</span><span class="string" id="4830722">&#34;internal&nbsp;error:&nbsp;no&nbsp;fields&nbsp;in&nbsp;evalChainNode&#34;</span><span class="op" id="4830766">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4830769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4830772">return</span>&nbsp;<span class="ident" id="4830779">s</span><span class="op" id="4830780">.</span><span class="ident" id="4830781">evalFieldChain</span><span class="op" id="4830795">(</span><span class="ident" id="4830796">dot</span><span class="op" id="4830799">,</span>&nbsp;<span class="ident" id="4830801">pipe</span><span class="op" id="4830805">,</span>&nbsp;<span class="ident" id="4830807">chain</span><span class="op" id="4830812">,</span>&nbsp;<span class="ident" id="4830814">chain</span><span class="op" id="4830819">.</span><span class="ident" id="4830820">Field</span><span class="op" id="4830825">,</span>&nbsp;<span class="ident" id="4830827">args</span><span class="op" id="4830831">,</span>&nbsp;<span class="ident" id="4830833">final</span><span class="op" id="4830838">)</span><br>
<span class="lineno"></span><span class="op" id="4830840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4830843">func</span>&nbsp;<span class="op" id="4830848">(</span><span class="ident" id="4830849">s</span>&nbsp;<span class="op" id="4830851">*</span><span class="ident" id="4830852">state</span><span class="op" id="4830857">)</span>&nbsp;<span class="ident" id="4830859">evalVariableNode</span><span class="op" id="4830875">(</span><span class="ident" id="4830876">dot</span>&nbsp;<span class="ident" id="4830880">reflect</span><span class="op" id="4830887">.</span><span class="ident" id="4830888">Value</span><span class="op" id="4830893">,</span>&nbsp;<span class="ident" id="4830895">variable</span>&nbsp;<span class="op" id="4830904">*</span><span class="ident" id="4830905">parse</span><span class="op" id="4830910">.</span><span class="ident" id="4830911">VariableNode</span><span class="op" id="4830923">,</span>&nbsp;<span class="ident" id="4830925">args</span>&nbsp;<span class="op" id="4830930">[</span><span class="op" id="4830931">]</span><span class="ident" id="4830932">parse</span><span class="op" id="4830937">.</span><span class="ident" id="4830938">Node</span><span class="op" id="4830942">,</span>&nbsp;<span class="ident" id="4830944">final</span>&nbsp;<span class="ident" id="4830950">reflect</span><span class="op" id="4830957">.</span><span class="ident" id="4830958">Value</span><span class="op" id="4830963">)</span>&nbsp;<span class="ident" id="4830965">reflect</span><span class="op" id="4830972">.</span><span class="ident" id="4830973">Value</span>&nbsp;<span class="op" id="4830979">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4830982">//&nbsp;$x.Field&nbsp;has&nbsp;$x&nbsp;as&nbsp;the&nbsp;first&nbsp;ident,&nbsp;Field&nbsp;as&nbsp;the&nbsp;second.&nbsp;Eval&nbsp;the&nbsp;var,&nbsp;then&nbsp;the&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4831074">s</span><span class="op" id="4831075">.</span><span class="ident" id="4831076">at</span><span class="op" id="4831078">(</span><span class="ident" id="4831079">variable</span><span class="op" id="4831087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4831090">value</span>&nbsp;<span class="op" id="4831096">:=</span>&nbsp;<span class="ident" id="4831099">s</span><span class="op" id="4831100">.</span><span class="ident" id="4831101">varValue</span><span class="op" id="4831109">(</span><span class="ident" id="4831110">variable</span><span class="op" id="4831118">.</span><span class="ident" id="4831119">Ident</span><span class="op" id="4831124">[</span><span class="num" id="4831125">0</span><span class="op" id="4831126">]</span><span class="op" id="4831127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4831130">if</span>&nbsp;<span class="builtinfunc" id="4831133">len</span><span class="op" id="4831136">(</span><span class="ident" id="4831137">variable</span><span class="op" id="4831145">.</span><span class="ident" id="4831146">Ident</span><span class="op" id="4831151">)</span>&nbsp;<span class="op" id="4831153">==</span>&nbsp;<span class="num" id="4831156">1</span>&nbsp;<span class="op" id="4831158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4831162">s</span><span class="op" id="4831163">.</span><span class="ident" id="4831164">notAFunction</span><span class="op" id="4831176">(</span><span class="ident" id="4831177">args</span><span class="op" id="4831181">,</span>&nbsp;<span class="ident" id="4831183">final</span><span class="op" id="4831188">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4831192">return</span>&nbsp;<span class="ident" id="4831199">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4831206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4831209">return</span>&nbsp;<span class="ident" id="4831216">s</span><span class="op" id="4831217">.</span><span class="ident" id="4831218">evalFieldChain</span><span class="op" id="4831232">(</span><span class="ident" id="4831233">dot</span><span class="op" id="4831236">,</span>&nbsp;<span class="ident" id="4831238">value</span><span class="op" id="4831243">,</span>&nbsp;<span class="ident" id="4831245">variable</span><span class="op" id="4831253">,</span>&nbsp;<span class="ident" id="4831255">variable</span><span class="op" id="4831263">.</span><span class="ident" id="4831264">Ident</span><span class="op" id="4831269">[</span><span class="num" id="4831270">1</span><span class="op" id="4831271">:</span><span class="op" id="4831272">]</span><span class="op" id="4831273">,</span>&nbsp;<span class="ident" id="4831275">args</span><span class="op" id="4831279">,</span>&nbsp;<span class="ident" id="4831281">final</span><span class="op" id="4831286">)</span><br>
<span class="lineno"></span><span class="op" id="4831288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">440</span><span class="comment" id="4831291">//&nbsp;evalFieldChain&nbsp;evaluates&nbsp;.X.Y.Z&nbsp;possibly&nbsp;followed&nbsp;by&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="comment" id="4831358">//&nbsp;dot&nbsp;is&nbsp;the&nbsp;environment&nbsp;in&nbsp;which&nbsp;to&nbsp;evaluate&nbsp;arguments,&nbsp;while</span><br>
<span class="lineno"></span><span class="comment" id="4831422">//&nbsp;receiver&nbsp;is&nbsp;the&nbsp;value&nbsp;being&nbsp;walked&nbsp;along&nbsp;the&nbsp;chain.</span><br>
<span class="lineno"></span><span class="keyword" id="4831477">func</span>&nbsp;<span class="op" id="4831482">(</span><span class="ident" id="4831483">s</span>&nbsp;<span class="op" id="4831485">*</span><span class="ident" id="4831486">state</span><span class="op" id="4831491">)</span>&nbsp;<span class="ident" id="4831493">evalFieldChain</span><span class="op" id="4831507">(</span><span class="ident" id="4831508">dot</span><span class="op" id="4831511">,</span>&nbsp;<span class="ident" id="4831513">receiver</span>&nbsp;<span class="ident" id="4831522">reflect</span><span class="op" id="4831529">.</span><span class="ident" id="4831530">Value</span><span class="op" id="4831535">,</span>&nbsp;<span class="ident" id="4831537">node</span>&nbsp;<span class="ident" id="4831542">parse</span><span class="op" id="4831547">.</span><span class="ident" id="4831548">Node</span><span class="op" id="4831552">,</span>&nbsp;<span class="ident" id="4831554">ident</span>&nbsp;<span class="op" id="4831560">[</span><span class="op" id="4831561">]</span><span class="builtintype" id="4831562">string</span><span class="op" id="4831568">,</span>&nbsp;<span class="ident" id="4831570">args</span>&nbsp;<span class="op" id="4831575">[</span><span class="op" id="4831576">]</span><span class="ident" id="4831577">parse</span><span class="op" id="4831582">.</span><span class="ident" id="4831583">Node</span><span class="op" id="4831587">,</span>&nbsp;<span class="ident" id="4831589">final</span>&nbsp;<span class="ident" id="4831595">reflect</span><span class="op" id="4831602">.</span><span class="ident" id="4831603">Value</span><span class="op" id="4831608">)</span>&nbsp;<span class="ident" id="4831610">reflect</span><span class="op" id="4831617">.</span><span class="ident" id="4831618">Value</span>&nbsp;<span class="op" id="4831624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4831627">n</span>&nbsp;<span class="op" id="4831629">:=</span>&nbsp;<span class="builtinfunc" id="4831632">len</span><span class="op" id="4831635">(</span><span class="ident" id="4831636">ident</span><span class="op" id="4831641">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4831644">for</span>&nbsp;<span class="ident" id="4831648">i</span>&nbsp;<span class="op" id="4831650">:=</span>&nbsp;<span class="num" id="4831653">0</span><span class="op" id="4831654">;</span>&nbsp;<span class="ident" id="4831656">i</span>&nbsp;<span class="op" id="4831658">&lt;</span>&nbsp;<span class="ident" id="4831660">n</span><span class="op" id="4831661">-</span><span class="num" id="4831662">1</span><span class="op" id="4831663">;</span>&nbsp;<span class="ident" id="4831665">i</span><span class="op" id="4831666">++</span>&nbsp;<span class="op" id="4831669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4831673">receiver</span>&nbsp;<span class="op" id="4831682">=</span>&nbsp;<span class="ident" id="4831684">s</span><span class="op" id="4831685">.</span><span class="ident" id="4831686">evalField</span><span class="op" id="4831695">(</span><span class="ident" id="4831696">dot</span><span class="op" id="4831699">,</span>&nbsp;<span class="ident" id="4831701">ident</span><span class="op" id="4831706">[</span><span class="ident" id="4831707">i</span><span class="op" id="4831708">]</span><span class="op" id="4831709">,</span>&nbsp;<span class="ident" id="4831711">node</span><span class="op" id="4831715">,</span>&nbsp;<span class="ident" id="4831717">nil</span><span class="op" id="4831720">,</span>&nbsp;<span class="ident" id="4831722">zero</span><span class="op" id="4831726">,</span>&nbsp;<span class="ident" id="4831728">receiver</span><span class="op" id="4831736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4831739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4831742">//&nbsp;Now&nbsp;if&nbsp;it&#39;s&nbsp;a&nbsp;method,&nbsp;it&nbsp;gets&nbsp;the&nbsp;arguments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4831791">return</span>&nbsp;<span class="ident" id="4831798">s</span><span class="op" id="4831799">.</span><span class="ident" id="4831800">evalField</span><span class="op" id="4831809">(</span><span class="ident" id="4831810">dot</span><span class="op" id="4831813">,</span>&nbsp;<span class="ident" id="4831815">ident</span><span class="op" id="4831820">[</span><span class="ident" id="4831821">n</span><span class="op" id="4831822">-</span><span class="num" id="4831823">1</span><span class="op" id="4831824">]</span><span class="op" id="4831825">,</span>&nbsp;<span class="ident" id="4831827">node</span><span class="op" id="4831831">,</span>&nbsp;<span class="ident" id="4831833">args</span><span class="op" id="4831837">,</span>&nbsp;<span class="ident" id="4831839">final</span><span class="op" id="4831844">,</span>&nbsp;<span class="ident" id="4831846">receiver</span><span class="op" id="4831854">)</span><br>
<span class="lineno">450</span><span class="op" id="4831856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4831859">func</span>&nbsp;<span class="op" id="4831864">(</span><span class="ident" id="4831865">s</span>&nbsp;<span class="op" id="4831867">*</span><span class="ident" id="4831868">state</span><span class="op" id="4831873">)</span>&nbsp;<span class="ident" id="4831875">evalFunction</span><span class="op" id="4831887">(</span><span class="ident" id="4831888">dot</span>&nbsp;<span class="ident" id="4831892">reflect</span><span class="op" id="4831899">.</span><span class="ident" id="4831900">Value</span><span class="op" id="4831905">,</span>&nbsp;<span class="ident" id="4831907">node</span>&nbsp;<span class="op" id="4831912">*</span><span class="ident" id="4831913">parse</span><span class="op" id="4831918">.</span><span class="ident" id="4831919">IdentifierNode</span><span class="op" id="4831933">,</span>&nbsp;<span class="ident" id="4831935">cmd</span>&nbsp;<span class="ident" id="4831939">parse</span><span class="op" id="4831944">.</span><span class="ident" id="4831945">Node</span><span class="op" id="4831949">,</span>&nbsp;<span class="ident" id="4831951">args</span>&nbsp;<span class="op" id="4831956">[</span><span class="op" id="4831957">]</span><span class="ident" id="4831958">parse</span><span class="op" id="4831963">.</span><span class="ident" id="4831964">Node</span><span class="op" id="4831968">,</span>&nbsp;<span class="ident" id="4831970">final</span>&nbsp;<span class="ident" id="4831976">reflect</span><span class="op" id="4831983">.</span><span class="ident" id="4831984">Value</span><span class="op" id="4831989">)</span>&nbsp;<span class="ident" id="4831991">reflect</span><span class="op" id="4831998">.</span><span class="ident" id="4831999">Value</span>&nbsp;<span class="op" id="4832005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4832008">s</span><span class="op" id="4832009">.</span><span class="ident" id="4832010">at</span><span class="op" id="4832012">(</span><span class="ident" id="4832013">node</span><span class="op" id="4832017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4832020">name</span>&nbsp;<span class="op" id="4832025">:=</span>&nbsp;<span class="ident" id="4832028">node</span><span class="op" id="4832032">.</span><span class="ident" id="4832033">Ident</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4832040">function</span><span class="op" id="4832048">,</span>&nbsp;<span class="ident" id="4832050">ok</span>&nbsp;<span class="op" id="4832053">:=</span>&nbsp;<span class="ident" id="4832056">findFunction</span><span class="op" id="4832068">(</span><span class="ident" id="4832069">name</span><span class="op" id="4832073">,</span>&nbsp;<span class="ident" id="4832075">s</span><span class="op" id="4832076">.</span><span class="ident" id="4832077">tmpl</span><span class="op" id="4832081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4832084">if</span>&nbsp;<span class="op" id="4832087">!</span><span class="ident" id="4832088">ok</span>&nbsp;<span class="op" id="4832091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4832095">s</span><span class="op" id="4832096">.</span><span class="ident" id="4832097">errorf</span><span class="op" id="4832103">(</span><span class="string" id="4832104">&#34;%q&nbsp;is&nbsp;not&nbsp;a&nbsp;defined&nbsp;function&#34;</span><span class="op" id="4832134">,</span>&nbsp;<span class="ident" id="4832136">name</span><span class="op" id="4832140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4832143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4832146">return</span>&nbsp;<span class="ident" id="4832153">s</span><span class="op" id="4832154">.</span><span class="ident" id="4832155">evalCall</span><span class="op" id="4832163">(</span><span class="ident" id="4832164">dot</span><span class="op" id="4832167">,</span>&nbsp;<span class="ident" id="4832169">function</span><span class="op" id="4832177">,</span>&nbsp;<span class="ident" id="4832179">cmd</span><span class="op" id="4832182">,</span>&nbsp;<span class="ident" id="4832184">name</span><span class="op" id="4832188">,</span>&nbsp;<span class="ident" id="4832190">args</span><span class="op" id="4832194">,</span>&nbsp;<span class="ident" id="4832196">final</span><span class="op" id="4832201">)</span><br>
<span class="lineno">460</span><span class="op" id="4832203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4832206">//&nbsp;evalField&nbsp;evaluates&nbsp;an&nbsp;expression&nbsp;like&nbsp;(.Field)&nbsp;or&nbsp;(.Field&nbsp;arg1&nbsp;arg2).</span><br>
<span class="lineno"></span><span class="comment" id="4832280">//&nbsp;The&nbsp;&#39;final&#39;&nbsp;argument&nbsp;represents&nbsp;the&nbsp;return&nbsp;value&nbsp;from&nbsp;the&nbsp;preceding</span><br>
<span class="lineno"></span><span class="comment" id="4832351">//&nbsp;value&nbsp;of&nbsp;the&nbsp;pipeline,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">465</span><span class="keyword" id="4832385">func</span>&nbsp;<span class="op" id="4832390">(</span><span class="ident" id="4832391">s</span>&nbsp;<span class="op" id="4832393">*</span><span class="ident" id="4832394">state</span><span class="op" id="4832399">)</span>&nbsp;<span class="ident" id="4832401">evalField</span><span class="op" id="4832410">(</span><span class="ident" id="4832411">dot</span>&nbsp;<span class="ident" id="4832415">reflect</span><span class="op" id="4832422">.</span><span class="ident" id="4832423">Value</span><span class="op" id="4832428">,</span>&nbsp;<span class="ident" id="4832430">fieldName</span>&nbsp;<span class="builtintype" id="4832440">string</span><span class="op" id="4832446">,</span>&nbsp;<span class="ident" id="4832448">node</span>&nbsp;<span class="ident" id="4832453">parse</span><span class="op" id="4832458">.</span><span class="ident" id="4832459">Node</span><span class="op" id="4832463">,</span>&nbsp;<span class="ident" id="4832465">args</span>&nbsp;<span class="op" id="4832470">[</span><span class="op" id="4832471">]</span><span class="ident" id="4832472">parse</span><span class="op" id="4832477">.</span><span class="ident" id="4832478">Node</span><span class="op" id="4832482">,</span>&nbsp;<span class="ident" id="4832484">final</span><span class="op" id="4832489">,</span>&nbsp;<span class="ident" id="4832491">receiver</span>&nbsp;<span class="ident" id="4832500">reflect</span><span class="op" id="4832507">.</span><span class="ident" id="4832508">Value</span><span class="op" id="4832513">)</span>&nbsp;<span class="ident" id="4832515">reflect</span><span class="op" id="4832522">.</span><span class="ident" id="4832523">Value</span>&nbsp;<span class="op" id="4832529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4832532">if</span>&nbsp;<span class="op" id="4832535">!</span><span class="ident" id="4832536">receiver</span><span class="op" id="4832544">.</span><span class="ident" id="4832545">IsValid</span><span class="op" id="4832552">(</span><span class="op" id="4832553">)</span>&nbsp;<span class="op" id="4832555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4832559">return</span>&nbsp;<span class="ident" id="4832566">zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4832572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4832575">typ</span>&nbsp;<span class="op" id="4832579">:=</span>&nbsp;<span class="ident" id="4832582">receiver</span><span class="op" id="4832590">.</span><span class="ident" id="4832591">Type</span><span class="op" id="4832595">(</span><span class="op" id="4832596">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4832599">receiver</span><span class="op" id="4832607">,</span>&nbsp;<span class="ident" id="4832609">_</span>&nbsp;<span class="op" id="4832611">=</span>&nbsp;<span class="ident" id="4832613">indirect</span><span class="op" id="4832621">(</span><span class="ident" id="4832622">receiver</span><span class="op" id="4832630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4832633">//&nbsp;Unless&nbsp;it&#39;s&nbsp;an&nbsp;interface,&nbsp;need&nbsp;to&nbsp;get&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;*T&nbsp;to&nbsp;guarantee</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4832710">//&nbsp;we&nbsp;see&nbsp;all&nbsp;methods&nbsp;of&nbsp;T&nbsp;and&nbsp;*T.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4832746">ptr</span>&nbsp;<span class="op" id="4832750">:=</span>&nbsp;<span class="ident" id="4832753">receiver</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4832763">if</span>&nbsp;<span class="ident" id="4832766">ptr</span><span class="op" id="4832769">.</span><span class="ident" id="4832770">Kind</span><span class="op" id="4832774">(</span><span class="op" id="4832775">)</span>&nbsp;<span class="op" id="4832777">!=</span>&nbsp;<span class="ident" id="4832780">reflect</span><span class="op" id="4832787">.</span><span class="ident" id="4832788">Interface</span>&nbsp;<span class="op" id="4832798">&amp;&amp;</span>&nbsp;<span class="ident" id="4832801">ptr</span><span class="op" id="4832804">.</span><span class="ident" id="4832805">CanAddr</span><span class="op" id="4832812">(</span><span class="op" id="4832813">)</span>&nbsp;<span class="op" id="4832815">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4832819">ptr</span>&nbsp;<span class="op" id="4832823">=</span>&nbsp;<span class="ident" id="4832825">ptr</span><span class="op" id="4832828">.</span><span class="ident" id="4832829">Addr</span><span class="op" id="4832833">(</span><span class="op" id="4832834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4832837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4832840">if</span>&nbsp;<span class="ident" id="4832843">method</span>&nbsp;<span class="op" id="4832850">:=</span>&nbsp;<span class="ident" id="4832853">ptr</span><span class="op" id="4832856">.</span><span class="ident" id="4832857">MethodByName</span><span class="op" id="4832869">(</span><span class="ident" id="4832870">fieldName</span><span class="op" id="4832879">)</span><span class="op" id="4832880">;</span>&nbsp;<span class="ident" id="4832882">method</span><span class="op" id="4832888">.</span><span class="ident" id="4832889">IsValid</span><span class="op" id="4832896">(</span><span class="op" id="4832897">)</span>&nbsp;<span class="op" id="4832899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4832903">return</span>&nbsp;<span class="ident" id="4832910">s</span><span class="op" id="4832911">.</span><span class="ident" id="4832912">evalCall</span><span class="op" id="4832920">(</span><span class="ident" id="4832921">dot</span><span class="op" id="4832924">,</span>&nbsp;<span class="ident" id="4832926">method</span><span class="op" id="4832932">,</span>&nbsp;<span class="ident" id="4832934">node</span><span class="op" id="4832938">,</span>&nbsp;<span class="ident" id="4832940">fieldName</span><span class="op" id="4832949">,</span>&nbsp;<span class="ident" id="4832951">args</span><span class="op" id="4832955">,</span>&nbsp;<span class="ident" id="4832957">final</span><span class="op" id="4832962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4832965">}</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4832968">hasArgs</span>&nbsp;<span class="op" id="4832976">:=</span>&nbsp;<span class="builtinfunc" id="4832979">len</span><span class="op" id="4832982">(</span><span class="ident" id="4832983">args</span><span class="op" id="4832987">)</span>&nbsp;<span class="op" id="4832989">&gt;</span>&nbsp;<span class="num" id="4832991">1</span>&nbsp;<span class="op" id="4832993">||</span>&nbsp;<span class="ident" id="4832996">final</span><span class="op" id="4833001">.</span><span class="ident" id="4833002">IsValid</span><span class="op" id="4833009">(</span><span class="op" id="4833010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4833013">//&nbsp;It&#39;s&nbsp;not&nbsp;a&nbsp;method;&nbsp;must&nbsp;be&nbsp;a&nbsp;field&nbsp;of&nbsp;a&nbsp;struct&nbsp;or&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;map.&nbsp;The&nbsp;receiver&nbsp;must&nbsp;not&nbsp;be&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4833118">receiver</span><span class="op" id="4833126">,</span>&nbsp;<span class="ident" id="4833128">isNil</span>&nbsp;<span class="op" id="4833134">:=</span>&nbsp;<span class="ident" id="4833137">indirect</span><span class="op" id="4833145">(</span><span class="ident" id="4833146">receiver</span><span class="op" id="4833154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4833157">if</span>&nbsp;<span class="ident" id="4833160">isNil</span>&nbsp;<span class="op" id="4833166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4833170">s</span><span class="op" id="4833171">.</span><span class="ident" id="4833172">errorf</span><span class="op" id="4833178">(</span><span class="string" id="4833179">&#34;nil&nbsp;pointer&nbsp;evaluating&nbsp;%s.%s&#34;</span><span class="op" id="4833209">,</span>&nbsp;<span class="ident" id="4833211">typ</span><span class="op" id="4833214">,</span>&nbsp;<span class="ident" id="4833216">fieldName</span><span class="op" id="4833225">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4833228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4833231">switch</span>&nbsp;<span class="ident" id="4833238">receiver</span><span class="op" id="4833246">.</span><span class="ident" id="4833247">Kind</span><span class="op" id="4833251">(</span><span class="op" id="4833252">)</span>&nbsp;<span class="op" id="4833254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4833257">case</span>&nbsp;<span class="ident" id="4833262">reflect</span><span class="op" id="4833269">.</span><span class="ident" id="4833270">Struct</span><span class="op" id="4833276">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4833280">tField</span><span class="op" id="4833286">,</span>&nbsp;<span class="ident" id="4833288">ok</span>&nbsp;<span class="op" id="4833291">:=</span>&nbsp;<span class="ident" id="4833294">receiver</span><span class="op" id="4833302">.</span><span class="ident" id="4833303">Type</span><span class="op" id="4833307">(</span><span class="op" id="4833308">)</span><span class="op" id="4833309">.</span><span class="ident" id="4833310">FieldByName</span><span class="op" id="4833321">(</span><span class="ident" id="4833322">fieldName</span><span class="op" id="4833331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4833335">if</span>&nbsp;<span class="ident" id="4833338">ok</span>&nbsp;<span class="op" id="4833341">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4833346">field</span>&nbsp;<span class="op" id="4833352">:=</span>&nbsp;<span class="ident" id="4833355">receiver</span><span class="op" id="4833363">.</span><span class="ident" id="4833364">FieldByIndex</span><span class="op" id="4833376">(</span><span class="ident" id="4833377">tField</span><span class="op" id="4833383">.</span><span class="ident" id="4833384">Index</span><span class="op" id="4833389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4833394">if</span>&nbsp;<span class="ident" id="4833397">tField</span><span class="op" id="4833403">.</span><span class="ident" id="4833404">PkgPath</span>&nbsp;<span class="op" id="4833412">!=</span>&nbsp;<span class="string" id="4833415">&#34;&#34;</span>&nbsp;<span class="op" id="4833418">{</span>&nbsp;<span class="comment" id="4833420">//&nbsp;field&nbsp;is&nbsp;unexported</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4833447">s</span><span class="op" id="4833448">.</span><span class="ident" id="4833449">errorf</span><span class="op" id="4833455">(</span><span class="string" id="4833456">&#34;%s&nbsp;is&nbsp;an&nbsp;unexported&nbsp;field&nbsp;of&nbsp;struct&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4833501">,</span>&nbsp;<span class="ident" id="4833503">fieldName</span><span class="op" id="4833512">,</span>&nbsp;<span class="ident" id="4833514">typ</span><span class="op" id="4833517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4833522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4833527">//&nbsp;If&nbsp;it&#39;s&nbsp;a&nbsp;function,&nbsp;we&nbsp;must&nbsp;call&nbsp;it.</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4833570">if</span>&nbsp;<span class="ident" id="4833573">hasArgs</span>&nbsp;<span class="op" id="4833581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4833587">s</span><span class="op" id="4833588">.</span><span class="ident" id="4833589">errorf</span><span class="op" id="4833595">(</span><span class="string" id="4833596">&#34;%s&nbsp;has&nbsp;arguments&nbsp;but&nbsp;cannot&nbsp;be&nbsp;invoked&nbsp;as&nbsp;function&#34;</span><span class="op" id="4833648">,</span>&nbsp;<span class="ident" id="4833650">fieldName</span><span class="op" id="4833659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4833664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4833669">return</span>&nbsp;<span class="ident" id="4833676">field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4833684">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4833688">s</span><span class="op" id="4833689">.</span><span class="ident" id="4833690">errorf</span><span class="op" id="4833696">(</span><span class="string" id="4833697">&#34;%s&nbsp;is&nbsp;not&nbsp;a&nbsp;field&nbsp;of&nbsp;struct&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4833734">,</span>&nbsp;<span class="ident" id="4833736">fieldName</span><span class="op" id="4833745">,</span>&nbsp;<span class="ident" id="4833747">typ</span><span class="op" id="4833750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4833753">case</span>&nbsp;<span class="ident" id="4833758">reflect</span><span class="op" id="4833765">.</span><span class="ident" id="4833766">Map</span><span class="op" id="4833769">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4833773">//&nbsp;If&nbsp;it&#39;s&nbsp;a&nbsp;map,&nbsp;attempt&nbsp;to&nbsp;use&nbsp;the&nbsp;field&nbsp;name&nbsp;as&nbsp;a&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4833833">nameVal</span>&nbsp;<span class="op" id="4833841">:=</span>&nbsp;<span class="ident" id="4833844">reflect</span><span class="op" id="4833851">.</span><span class="ident" id="4833852">ValueOf</span><span class="op" id="4833859">(</span><span class="ident" id="4833860">fieldName</span><span class="op" id="4833869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4833873">if</span>&nbsp;<span class="ident" id="4833876">nameVal</span><span class="op" id="4833883">.</span><span class="ident" id="4833884">Type</span><span class="op" id="4833888">(</span><span class="op" id="4833889">)</span><span class="op" id="4833890">.</span><span class="ident" id="4833891">AssignableTo</span><span class="op" id="4833903">(</span><span class="ident" id="4833904">receiver</span><span class="op" id="4833912">.</span><span class="ident" id="4833913">Type</span><span class="op" id="4833917">(</span><span class="op" id="4833918">)</span><span class="op" id="4833919">.</span><span class="ident" id="4833920">Key</span><span class="op" id="4833923">(</span><span class="op" id="4833924">)</span><span class="op" id="4833925">)</span>&nbsp;<span class="op" id="4833927">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4833932">if</span>&nbsp;<span class="ident" id="4833935">hasArgs</span>&nbsp;<span class="op" id="4833943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4833949">s</span><span class="op" id="4833950">.</span><span class="ident" id="4833951">errorf</span><span class="op" id="4833957">(</span><span class="string" id="4833958">&#34;%s&nbsp;is&nbsp;not&nbsp;a&nbsp;method&nbsp;but&nbsp;has&nbsp;arguments&#34;</span><span class="op" id="4833996">,</span>&nbsp;<span class="ident" id="4833998">fieldName</span><span class="op" id="4834007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4834012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4834017">return</span>&nbsp;<span class="ident" id="4834024">receiver</span><span class="op" id="4834032">.</span><span class="ident" id="4834033">MapIndex</span><span class="op" id="4834041">(</span><span class="ident" id="4834042">nameVal</span><span class="op" id="4834049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4834053">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4834056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4834059">s</span><span class="op" id="4834060">.</span><span class="ident" id="4834061">errorf</span><span class="op" id="4834067">(</span><span class="string" id="4834068">&#34;can&#39;t&nbsp;evaluate&nbsp;field&nbsp;%s&nbsp;in&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4834104">,</span>&nbsp;<span class="ident" id="4834106">fieldName</span><span class="op" id="4834115">,</span>&nbsp;<span class="ident" id="4834117">typ</span><span class="op" id="4834120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4834123">panic</span><span class="op" id="4834128">(</span><span class="string" id="4834129">&#34;not&nbsp;reached&#34;</span><span class="op" id="4834142">)</span><br>
<span class="lineno"></span><span class="op" id="4834144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span><span class="keyword" id="4834147">var</span>&nbsp;<span class="op" id="4834151">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4834154">errorType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4834170">=</span>&nbsp;<span class="ident" id="4834172">reflect</span><span class="op" id="4834179">.</span><span class="ident" id="4834180">TypeOf</span><span class="op" id="4834186">(</span><span class="op" id="4834187">(</span><span class="op" id="4834188">*</span><span class="builtintype" id="4834189">error</span><span class="op" id="4834194">)</span><span class="op" id="4834195">(</span><span class="ident" id="4834196">nil</span><span class="op" id="4834199">)</span><span class="op" id="4834200">)</span><span class="op" id="4834201">.</span><span class="ident" id="4834202">Elem</span><span class="op" id="4834206">(</span><span class="op" id="4834207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4834210">fmtStringerType</span>&nbsp;<span class="op" id="4834226">=</span>&nbsp;<span class="ident" id="4834228">reflect</span><span class="op" id="4834235">.</span><span class="ident" id="4834236">TypeOf</span><span class="op" id="4834242">(</span><span class="op" id="4834243">(</span><span class="op" id="4834244">*</span><span class="ident" id="4834245">fmt</span><span class="op" id="4834248">.</span><span class="ident" id="4834249">Stringer</span><span class="op" id="4834257">)</span><span class="op" id="4834258">(</span><span class="ident" id="4834259">nil</span><span class="op" id="4834262">)</span><span class="op" id="4834263">)</span><span class="op" id="4834264">.</span><span class="ident" id="4834265">Elem</span><span class="op" id="4834269">(</span><span class="op" id="4834270">)</span><br>
<span class="lineno"></span><span class="op" id="4834272">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span><span class="comment" id="4834275">//&nbsp;evalCall&nbsp;executes&nbsp;a&nbsp;function&nbsp;or&nbsp;method&nbsp;call.&nbsp;If&nbsp;it&#39;s&nbsp;a&nbsp;method,&nbsp;fun&nbsp;already&nbsp;has&nbsp;the&nbsp;receiver&nbsp;bound,&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="4834380">//&nbsp;it&nbsp;looks&nbsp;just&nbsp;like&nbsp;a&nbsp;function&nbsp;call.&nbsp;&nbsp;The&nbsp;arg&nbsp;list,&nbsp;if&nbsp;non-nil,&nbsp;includes&nbsp;(in&nbsp;the&nbsp;manner&nbsp;of&nbsp;the&nbsp;shell),&nbsp;arg[0]</span><br>
<span class="lineno"></span><span class="comment" id="4834492">//&nbsp;as&nbsp;the&nbsp;function&nbsp;itself.</span><br>
<span class="lineno"></span><span class="keyword" id="4834519">func</span>&nbsp;<span class="op" id="4834524">(</span><span class="ident" id="4834525">s</span>&nbsp;<span class="op" id="4834527">*</span><span class="ident" id="4834528">state</span><span class="op" id="4834533">)</span>&nbsp;<span class="ident" id="4834535">evalCall</span><span class="op" id="4834543">(</span><span class="ident" id="4834544">dot</span><span class="op" id="4834547">,</span>&nbsp;<span class="ident" id="4834549">fun</span>&nbsp;<span class="ident" id="4834553">reflect</span><span class="op" id="4834560">.</span><span class="ident" id="4834561">Value</span><span class="op" id="4834566">,</span>&nbsp;<span class="ident" id="4834568">node</span>&nbsp;<span class="ident" id="4834573">parse</span><span class="op" id="4834578">.</span><span class="ident" id="4834579">Node</span><span class="op" id="4834583">,</span>&nbsp;<span class="ident" id="4834585">name</span>&nbsp;<span class="builtintype" id="4834590">string</span><span class="op" id="4834596">,</span>&nbsp;<span class="ident" id="4834598">args</span>&nbsp;<span class="op" id="4834603">[</span><span class="op" id="4834604">]</span><span class="ident" id="4834605">parse</span><span class="op" id="4834610">.</span><span class="ident" id="4834611">Node</span><span class="op" id="4834615">,</span>&nbsp;<span class="ident" id="4834617">final</span>&nbsp;<span class="ident" id="4834623">reflect</span><span class="op" id="4834630">.</span><span class="ident" id="4834631">Value</span><span class="op" id="4834636">)</span>&nbsp;<span class="ident" id="4834638">reflect</span><span class="op" id="4834645">.</span><span class="ident" id="4834646">Value</span>&nbsp;<span class="op" id="4834652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4834655">if</span>&nbsp;<span class="ident" id="4834658">args</span>&nbsp;<span class="op" id="4834663">!=</span>&nbsp;<span class="ident" id="4834666">nil</span>&nbsp;<span class="op" id="4834670">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4834674">args</span>&nbsp;<span class="op" id="4834679">=</span>&nbsp;<span class="ident" id="4834681">args</span><span class="op" id="4834685">[</span><span class="num" id="4834686">1</span><span class="op" id="4834687">:</span><span class="op" id="4834688">]</span>&nbsp;<span class="comment" id="4834690">//&nbsp;Zeroth&nbsp;arg&nbsp;is&nbsp;function&nbsp;name/node;&nbsp;not&nbsp;passed&nbsp;to&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4834752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4834755">typ</span>&nbsp;<span class="op" id="4834759">:=</span>&nbsp;<span class="ident" id="4834762">fun</span><span class="op" id="4834765">.</span><span class="ident" id="4834766">Type</span><span class="op" id="4834770">(</span><span class="op" id="4834771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4834774">numIn</span>&nbsp;<span class="op" id="4834780">:=</span>&nbsp;<span class="builtinfunc" id="4834783">len</span><span class="op" id="4834786">(</span><span class="ident" id="4834787">args</span><span class="op" id="4834791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4834794">if</span>&nbsp;<span class="ident" id="4834797">final</span><span class="op" id="4834802">.</span><span class="ident" id="4834803">IsValid</span><span class="op" id="4834810">(</span><span class="op" id="4834811">)</span>&nbsp;<span class="op" id="4834813">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4834817">numIn</span><span class="op" id="4834822">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4834826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4834829">numFixed</span>&nbsp;<span class="op" id="4834838">:=</span>&nbsp;<span class="builtinfunc" id="4834841">len</span><span class="op" id="4834844">(</span><span class="ident" id="4834845">args</span><span class="op" id="4834849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4834852">if</span>&nbsp;<span class="ident" id="4834855">typ</span><span class="op" id="4834858">.</span><span class="ident" id="4834859">IsVariadic</span><span class="op" id="4834869">(</span><span class="op" id="4834870">)</span>&nbsp;<span class="op" id="4834872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4834876">numFixed</span>&nbsp;<span class="op" id="4834885">=</span>&nbsp;<span class="ident" id="4834887">typ</span><span class="op" id="4834890">.</span><span class="ident" id="4834891">NumIn</span><span class="op" id="4834896">(</span><span class="op" id="4834897">)</span>&nbsp;<span class="op" id="4834899">-</span>&nbsp;<span class="num" id="4834901">1</span>&nbsp;<span class="comment" id="4834903">//&nbsp;last&nbsp;arg&nbsp;is&nbsp;the&nbsp;variadic&nbsp;one.</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4834938">if</span>&nbsp;<span class="ident" id="4834941">numIn</span>&nbsp;<span class="op" id="4834947">&lt;</span>&nbsp;<span class="ident" id="4834949">numFixed</span>&nbsp;<span class="op" id="4834958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4834963">s</span><span class="op" id="4834964">.</span><span class="ident" id="4834965">errorf</span><span class="op" id="4834971">(</span><span class="string" id="4834972">&#34;wrong&nbsp;number&nbsp;of&nbsp;args&nbsp;for&nbsp;%s:&nbsp;want&nbsp;at&nbsp;least&nbsp;%d&nbsp;got&nbsp;%d&#34;</span><span class="op" id="4835026">,</span>&nbsp;<span class="ident" id="4835028">name</span><span class="op" id="4835032">,</span>&nbsp;<span class="ident" id="4835034">typ</span><span class="op" id="4835037">.</span><span class="ident" id="4835038">NumIn</span><span class="op" id="4835043">(</span><span class="op" id="4835044">)</span><span class="op" id="4835045">-</span><span class="num" id="4835046">1</span><span class="op" id="4835047">,</span>&nbsp;<span class="builtinfunc" id="4835049">len</span><span class="op" id="4835052">(</span><span class="ident" id="4835053">args</span><span class="op" id="4835057">)</span><span class="op" id="4835058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4835062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4835065">}</span>&nbsp;<span class="keyword" id="4835067">else</span>&nbsp;<span class="keyword" id="4835072">if</span>&nbsp;<span class="ident" id="4835075">numIn</span>&nbsp;<span class="op" id="4835081">&lt;</span>&nbsp;<span class="ident" id="4835083">typ</span><span class="op" id="4835086">.</span><span class="ident" id="4835087">NumIn</span><span class="op" id="4835092">(</span><span class="op" id="4835093">)</span><span class="op" id="4835094">-</span><span class="num" id="4835095">1</span>&nbsp;<span class="op" id="4835097">||</span>&nbsp;<span class="op" id="4835100">!</span><span class="ident" id="4835101">typ</span><span class="op" id="4835104">.</span><span class="ident" id="4835105">IsVariadic</span><span class="op" id="4835115">(</span><span class="op" id="4835116">)</span>&nbsp;<span class="op" id="4835118">&amp;&amp;</span>&nbsp;<span class="ident" id="4835121">numIn</span>&nbsp;<span class="op" id="4835127">!=</span>&nbsp;<span class="ident" id="4835130">typ</span><span class="op" id="4835133">.</span><span class="ident" id="4835134">NumIn</span><span class="op" id="4835139">(</span><span class="op" id="4835140">)</span>&nbsp;<span class="op" id="4835142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4835146">s</span><span class="op" id="4835147">.</span><span class="ident" id="4835148">errorf</span><span class="op" id="4835154">(</span><span class="string" id="4835155">&#34;wrong&nbsp;number&nbsp;of&nbsp;args&nbsp;for&nbsp;%s:&nbsp;want&nbsp;%d&nbsp;got&nbsp;%d&#34;</span><span class="op" id="4835200">,</span>&nbsp;<span class="ident" id="4835202">name</span><span class="op" id="4835206">,</span>&nbsp;<span class="ident" id="4835208">typ</span><span class="op" id="4835211">.</span><span class="ident" id="4835212">NumIn</span><span class="op" id="4835217">(</span><span class="op" id="4835218">)</span><span class="op" id="4835219">,</span>&nbsp;<span class="builtinfunc" id="4835221">len</span><span class="op" id="4835224">(</span><span class="ident" id="4835225">args</span><span class="op" id="4835229">)</span><span class="op" id="4835230">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4835233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4835236">if</span>&nbsp;<span class="op" id="4835239">!</span><span class="ident" id="4835240">goodFunc</span><span class="op" id="4835248">(</span><span class="ident" id="4835249">typ</span><span class="op" id="4835252">)</span>&nbsp;<span class="op" id="4835254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4835258">//&nbsp;TODO:&nbsp;This&nbsp;could&nbsp;still&nbsp;be&nbsp;a&nbsp;confusing&nbsp;error;&nbsp;maybe&nbsp;goodFunc&nbsp;should&nbsp;provide&nbsp;info.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4835344">s</span><span class="op" id="4835345">.</span><span class="ident" id="4835346">errorf</span><span class="op" id="4835352">(</span><span class="string" id="4835353">&#34;can&#39;t&nbsp;call&nbsp;method/function&nbsp;%q&nbsp;with&nbsp;%d&nbsp;results&#34;</span><span class="op" id="4835400">,</span>&nbsp;<span class="ident" id="4835402">name</span><span class="op" id="4835406">,</span>&nbsp;<span class="ident" id="4835408">typ</span><span class="op" id="4835411">.</span><span class="ident" id="4835412">NumOut</span><span class="op" id="4835418">(</span><span class="op" id="4835419">)</span><span class="op" id="4835420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4835423">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4835426">//&nbsp;Build&nbsp;the&nbsp;arg&nbsp;list.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4835450">argv</span>&nbsp;<span class="op" id="4835455">:=</span>&nbsp;<span class="builtinfunc" id="4835458">make</span><span class="op" id="4835462">(</span><span class="op" id="4835463">[</span><span class="op" id="4835464">]</span><span class="ident" id="4835465">reflect</span><span class="op" id="4835472">.</span><span class="ident" id="4835473">Value</span><span class="op" id="4835478">,</span>&nbsp;<span class="ident" id="4835480">numIn</span><span class="op" id="4835485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4835488">//&nbsp;Args&nbsp;must&nbsp;be&nbsp;evaluated.&nbsp;Fixed&nbsp;args&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4835534">i</span>&nbsp;<span class="op" id="4835536">:=</span>&nbsp;<span class="num" id="4835539">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4835542">for</span>&nbsp;<span class="op" id="4835546">;</span>&nbsp;<span class="ident" id="4835548">i</span>&nbsp;<span class="op" id="4835550">&lt;</span>&nbsp;<span class="ident" id="4835552">numFixed</span>&nbsp;<span class="op" id="4835561">&amp;&amp;</span>&nbsp;<span class="ident" id="4835564">i</span>&nbsp;<span class="op" id="4835566">&lt;</span>&nbsp;<span class="builtinfunc" id="4835568">len</span><span class="op" id="4835571">(</span><span class="ident" id="4835572">args</span><span class="op" id="4835576">)</span><span class="op" id="4835577">;</span>&nbsp;<span class="ident" id="4835579">i</span><span class="op" id="4835580">++</span>&nbsp;<span class="op" id="4835583">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4835587">argv</span><span class="op" id="4835591">[</span><span class="ident" id="4835592">i</span><span class="op" id="4835593">]</span>&nbsp;<span class="op" id="4835595">=</span>&nbsp;<span class="ident" id="4835597">s</span><span class="op" id="4835598">.</span><span class="ident" id="4835599">evalArg</span><span class="op" id="4835606">(</span><span class="ident" id="4835607">dot</span><span class="op" id="4835610">,</span>&nbsp;<span class="ident" id="4835612">typ</span><span class="op" id="4835615">.</span><span class="ident" id="4835616">In</span><span class="op" id="4835618">(</span><span class="ident" id="4835619">i</span><span class="op" id="4835620">)</span><span class="op" id="4835621">,</span>&nbsp;<span class="ident" id="4835623">args</span><span class="op" id="4835627">[</span><span class="ident" id="4835628">i</span><span class="op" id="4835629">]</span><span class="op" id="4835630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4835633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4835636">//&nbsp;Now&nbsp;the&nbsp;...&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4835658">if</span>&nbsp;<span class="ident" id="4835661">typ</span><span class="op" id="4835664">.</span><span class="ident" id="4835665">IsVariadic</span><span class="op" id="4835675">(</span><span class="op" id="4835676">)</span>&nbsp;<span class="op" id="4835678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4835682">argType</span>&nbsp;<span class="op" id="4835690">:=</span>&nbsp;<span class="ident" id="4835693">typ</span><span class="op" id="4835696">.</span><span class="ident" id="4835697">In</span><span class="op" id="4835699">(</span><span class="ident" id="4835700">typ</span><span class="op" id="4835703">.</span><span class="ident" id="4835704">NumIn</span><span class="op" id="4835709">(</span><span class="op" id="4835710">)</span>&nbsp;<span class="op" id="4835712">-</span>&nbsp;<span class="num" id="4835714">1</span><span class="op" id="4835715">)</span><span class="op" id="4835716">.</span><span class="ident" id="4835717">Elem</span><span class="op" id="4835721">(</span><span class="op" id="4835722">)</span>&nbsp;<span class="comment" id="4835724">//&nbsp;Argument&nbsp;is&nbsp;a&nbsp;slice.</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4835750">for</span>&nbsp;<span class="op" id="4835754">;</span>&nbsp;<span class="ident" id="4835756">i</span>&nbsp;<span class="op" id="4835758">&lt;</span>&nbsp;<span class="builtinfunc" id="4835760">len</span><span class="op" id="4835763">(</span><span class="ident" id="4835764">args</span><span class="op" id="4835768">)</span><span class="op" id="4835769">;</span>&nbsp;<span class="ident" id="4835771">i</span><span class="op" id="4835772">++</span>&nbsp;<span class="op" id="4835775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4835780">argv</span><span class="op" id="4835784">[</span><span class="ident" id="4835785">i</span><span class="op" id="4835786">]</span>&nbsp;<span class="op" id="4835788">=</span>&nbsp;<span class="ident" id="4835790">s</span><span class="op" id="4835791">.</span><span class="ident" id="4835792">evalArg</span><span class="op" id="4835799">(</span><span class="ident" id="4835800">dot</span><span class="op" id="4835803">,</span>&nbsp;<span class="ident" id="4835805">argType</span><span class="op" id="4835812">,</span>&nbsp;<span class="ident" id="4835814">args</span><span class="op" id="4835818">[</span><span class="ident" id="4835819">i</span><span class="op" id="4835820">]</span><span class="op" id="4835821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4835825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4835828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4835831">//&nbsp;Add&nbsp;final&nbsp;value&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4835865">if</span>&nbsp;<span class="ident" id="4835868">final</span><span class="op" id="4835873">.</span><span class="ident" id="4835874">IsValid</span><span class="op" id="4835881">(</span><span class="op" id="4835882">)</span>&nbsp;<span class="op" id="4835884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4835888">t</span>&nbsp;<span class="op" id="4835890">:=</span>&nbsp;<span class="ident" id="4835893">typ</span><span class="op" id="4835896">.</span><span class="ident" id="4835897">In</span><span class="op" id="4835899">(</span><span class="ident" id="4835900">typ</span><span class="op" id="4835903">.</span><span class="ident" id="4835904">NumIn</span><span class="op" id="4835909">(</span><span class="op" id="4835910">)</span>&nbsp;<span class="op" id="4835912">-</span>&nbsp;<span class="num" id="4835914">1</span><span class="op" id="4835915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4835919">if</span>&nbsp;<span class="ident" id="4835922">typ</span><span class="op" id="4835925">.</span><span class="ident" id="4835926">IsVariadic</span><span class="op" id="4835936">(</span><span class="op" id="4835937">)</span>&nbsp;<span class="op" id="4835939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4835944">t</span>&nbsp;<span class="op" id="4835946">=</span>&nbsp;<span class="ident" id="4835948">t</span><span class="op" id="4835949">.</span><span class="ident" id="4835950">Elem</span><span class="op" id="4835954">(</span><span class="op" id="4835955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4835959">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4835963">argv</span><span class="op" id="4835967">[</span><span class="ident" id="4835968">i</span><span class="op" id="4835969">]</span>&nbsp;<span class="op" id="4835971">=</span>&nbsp;<span class="ident" id="4835973">s</span><span class="op" id="4835974">.</span><span class="ident" id="4835975">validateType</span><span class="op" id="4835987">(</span><span class="ident" id="4835988">final</span><span class="op" id="4835993">,</span>&nbsp;<span class="ident" id="4835995">t</span><span class="op" id="4835996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4835999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4836002">result</span>&nbsp;<span class="op" id="4836009">:=</span>&nbsp;<span class="ident" id="4836012">fun</span><span class="op" id="4836015">.</span><span class="ident" id="4836016">Call</span><span class="op" id="4836020">(</span><span class="ident" id="4836021">argv</span><span class="op" id="4836025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4836028">//&nbsp;If&nbsp;we&nbsp;have&nbsp;an&nbsp;error&nbsp;that&nbsp;is&nbsp;not&nbsp;nil,&nbsp;stop&nbsp;execution&nbsp;and&nbsp;return&nbsp;that&nbsp;error&nbsp;to&nbsp;the&nbsp;caller.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4836121">if</span>&nbsp;<span class="builtinfunc" id="4836124">len</span><span class="op" id="4836127">(</span><span class="ident" id="4836128">result</span><span class="op" id="4836134">)</span>&nbsp;<span class="op" id="4836136">==</span>&nbsp;<span class="num" id="4836139">2</span>&nbsp;<span class="op" id="4836141">&amp;&amp;</span>&nbsp;<span class="op" id="4836144">!</span><span class="ident" id="4836145">result</span><span class="op" id="4836151">[</span><span class="num" id="4836152">1</span><span class="op" id="4836153">]</span><span class="op" id="4836154">.</span><span class="ident" id="4836155">IsNil</span><span class="op" id="4836160">(</span><span class="op" id="4836161">)</span>&nbsp;<span class="op" id="4836163">{</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4836167">s</span><span class="op" id="4836168">.</span><span class="ident" id="4836169">at</span><span class="op" id="4836171">(</span><span class="ident" id="4836172">node</span><span class="op" id="4836176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4836180">s</span><span class="op" id="4836181">.</span><span class="ident" id="4836182">errorf</span><span class="op" id="4836188">(</span><span class="string" id="4836189">&#34;error&nbsp;calling&nbsp;%s:&nbsp;%s&#34;</span><span class="op" id="4836211">,</span>&nbsp;<span class="ident" id="4836213">name</span><span class="op" id="4836217">,</span>&nbsp;<span class="ident" id="4836219">result</span><span class="op" id="4836225">[</span><span class="num" id="4836226">1</span><span class="op" id="4836227">]</span><span class="op" id="4836228">.</span><span class="ident" id="4836229">Interface</span><span class="op" id="4836238">(</span><span class="op" id="4836239">)</span><span class="op" id="4836240">.</span><span class="op" id="4836241">(</span><span class="builtintype" id="4836242">error</span><span class="op" id="4836247">)</span><span class="op" id="4836248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4836251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4836254">return</span>&nbsp;<span class="ident" id="4836261">result</span><span class="op" id="4836267">[</span><span class="num" id="4836268">0</span><span class="op" id="4836269">]</span><br>
<span class="lineno"></span><span class="op" id="4836271">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span><span class="comment" id="4836274">//&nbsp;canBeNil&nbsp;reports&nbsp;whether&nbsp;an&nbsp;untyped&nbsp;nil&nbsp;can&nbsp;be&nbsp;assigned&nbsp;to&nbsp;the&nbsp;type.&nbsp;See&nbsp;reflect.Zero.</span><br>
<span class="lineno"></span><span class="keyword" id="4836364">func</span>&nbsp;<span class="ident" id="4836369">canBeNil</span><span class="op" id="4836377">(</span><span class="ident" id="4836378">typ</span>&nbsp;<span class="ident" id="4836382">reflect</span><span class="op" id="4836389">.</span><span class="ident" id="4836390">Type</span><span class="op" id="4836394">)</span>&nbsp;<span class="builtintype" id="4836396">bool</span>&nbsp;<span class="op" id="4836401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4836404">switch</span>&nbsp;<span class="ident" id="4836411">typ</span><span class="op" id="4836414">.</span><span class="ident" id="4836415">Kind</span><span class="op" id="4836419">(</span><span class="op" id="4836420">)</span>&nbsp;<span class="op" id="4836422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4836425">case</span>&nbsp;<span class="ident" id="4836430">reflect</span><span class="op" id="4836437">.</span><span class="ident" id="4836438">Chan</span><span class="op" id="4836442">,</span>&nbsp;<span class="ident" id="4836444">reflect</span><span class="op" id="4836451">.</span><span class="ident" id="4836452">Func</span><span class="op" id="4836456">,</span>&nbsp;<span class="ident" id="4836458">reflect</span><span class="op" id="4836465">.</span><span class="ident" id="4836466">Interface</span><span class="op" id="4836475">,</span>&nbsp;<span class="ident" id="4836477">reflect</span><span class="op" id="4836484">.</span><span class="ident" id="4836485">Map</span><span class="op" id="4836488">,</span>&nbsp;<span class="ident" id="4836490">reflect</span><span class="op" id="4836497">.</span><span class="ident" id="4836498">Ptr</span><span class="op" id="4836501">,</span>&nbsp;<span class="ident" id="4836503">reflect</span><span class="op" id="4836510">.</span><span class="ident" id="4836511">Slice</span><span class="op" id="4836516">:</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4836520">return</span>&nbsp;<span class="builtintype" id="4836527">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4836533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4836536">return</span>&nbsp;<span class="builtintype" id="4836543">false</span><br>
<span class="lineno"></span><span class="op" id="4836549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">585</span><span class="comment" id="4836552">//&nbsp;validateType&nbsp;guarantees&nbsp;that&nbsp;the&nbsp;value&nbsp;is&nbsp;valid&nbsp;and&nbsp;assignable&nbsp;to&nbsp;the&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="4836631">func</span>&nbsp;<span class="op" id="4836636">(</span><span class="ident" id="4836637">s</span>&nbsp;<span class="op" id="4836639">*</span><span class="ident" id="4836640">state</span><span class="op" id="4836645">)</span>&nbsp;<span class="ident" id="4836647">validateType</span><span class="op" id="4836659">(</span><span class="ident" id="4836660">value</span>&nbsp;<span class="ident" id="4836666">reflect</span><span class="op" id="4836673">.</span><span class="ident" id="4836674">Value</span><span class="op" id="4836679">,</span>&nbsp;<span class="ident" id="4836681">typ</span>&nbsp;<span class="ident" id="4836685">reflect</span><span class="op" id="4836692">.</span><span class="ident" id="4836693">Type</span><span class="op" id="4836697">)</span>&nbsp;<span class="ident" id="4836699">reflect</span><span class="op" id="4836706">.</span><span class="ident" id="4836707">Value</span>&nbsp;<span class="op" id="4836713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4836716">if</span>&nbsp;<span class="op" id="4836719">!</span><span class="ident" id="4836720">value</span><span class="op" id="4836725">.</span><span class="ident" id="4836726">IsValid</span><span class="op" id="4836733">(</span><span class="op" id="4836734">)</span>&nbsp;<span class="op" id="4836736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4836740">if</span>&nbsp;<span class="ident" id="4836743">typ</span>&nbsp;<span class="op" id="4836747">==</span>&nbsp;<span class="ident" id="4836750">nil</span>&nbsp;<span class="op" id="4836754">||</span>&nbsp;<span class="ident" id="4836757">canBeNil</span><span class="op" id="4836765">(</span><span class="ident" id="4836766">typ</span><span class="op" id="4836769">)</span>&nbsp;<span class="op" id="4836771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4836776">//&nbsp;An&nbsp;untyped&nbsp;nil&nbsp;interface{}.&nbsp;Accept&nbsp;as&nbsp;a&nbsp;proper&nbsp;nil&nbsp;value.</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4836840">return</span>&nbsp;<span class="ident" id="4836847">reflect</span><span class="op" id="4836854">.</span><span class="ident" id="4836855">Zero</span><span class="op" id="4836859">(</span><span class="ident" id="4836860">typ</span><span class="op" id="4836863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4836867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4836871">s</span><span class="op" id="4836872">.</span><span class="ident" id="4836873">errorf</span><span class="op" id="4836879">(</span><span class="string" id="4836880">&#34;invalid&nbsp;value;&nbsp;expected&nbsp;%s&#34;</span><span class="op" id="4836908">,</span>&nbsp;<span class="ident" id="4836910">typ</span><span class="op" id="4836913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4836916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4836919">if</span>&nbsp;<span class="ident" id="4836922">typ</span>&nbsp;<span class="op" id="4836926">!=</span>&nbsp;<span class="ident" id="4836929">nil</span>&nbsp;<span class="op" id="4836933">&amp;&amp;</span>&nbsp;<span class="op" id="4836936">!</span><span class="ident" id="4836937">value</span><span class="op" id="4836942">.</span><span class="ident" id="4836943">Type</span><span class="op" id="4836947">(</span><span class="op" id="4836948">)</span><span class="op" id="4836949">.</span><span class="ident" id="4836950">AssignableTo</span><span class="op" id="4836962">(</span><span class="ident" id="4836963">typ</span><span class="op" id="4836966">)</span>&nbsp;<span class="op" id="4836968">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4836972">if</span>&nbsp;<span class="ident" id="4836975">value</span><span class="op" id="4836980">.</span><span class="ident" id="4836981">Kind</span><span class="op" id="4836985">(</span><span class="op" id="4836986">)</span>&nbsp;<span class="op" id="4836988">==</span>&nbsp;<span class="ident" id="4836991">reflect</span><span class="op" id="4836998">.</span><span class="ident" id="4836999">Interface</span>&nbsp;<span class="op" id="4837009">&amp;&amp;</span>&nbsp;<span class="op" id="4837012">!</span><span class="ident" id="4837013">value</span><span class="op" id="4837018">.</span><span class="ident" id="4837019">IsNil</span><span class="op" id="4837024">(</span><span class="op" id="4837025">)</span>&nbsp;<span class="op" id="4837027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4837032">value</span>&nbsp;<span class="op" id="4837038">=</span>&nbsp;<span class="ident" id="4837040">value</span><span class="op" id="4837045">.</span><span class="ident" id="4837046">Elem</span><span class="op" id="4837050">(</span><span class="op" id="4837051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4837056">if</span>&nbsp;<span class="ident" id="4837059">value</span><span class="op" id="4837064">.</span><span class="ident" id="4837065">Type</span><span class="op" id="4837069">(</span><span class="op" id="4837070">)</span><span class="op" id="4837071">.</span><span class="ident" id="4837072">AssignableTo</span><span class="op" id="4837084">(</span><span class="ident" id="4837085">typ</span><span class="op" id="4837088">)</span>&nbsp;<span class="op" id="4837090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4837096">return</span>&nbsp;<span class="ident" id="4837103">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4837112">}</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4837117">//&nbsp;fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4837134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4837138">//&nbsp;Does&nbsp;one&nbsp;dereference&nbsp;or&nbsp;indirection&nbsp;work?&nbsp;We&nbsp;could&nbsp;do&nbsp;more,&nbsp;as&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4837209">//&nbsp;do&nbsp;with&nbsp;method&nbsp;receivers,&nbsp;but&nbsp;that&nbsp;gets&nbsp;messy&nbsp;and&nbsp;method&nbsp;receivers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4837281">//&nbsp;are&nbsp;much&nbsp;more&nbsp;constrained,&nbsp;so&nbsp;it&nbsp;makes&nbsp;more&nbsp;sense&nbsp;there&nbsp;than&nbsp;here.</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4837353">//&nbsp;Besides,&nbsp;one&nbsp;is&nbsp;almost&nbsp;always&nbsp;all&nbsp;you&nbsp;need.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4837402">switch</span>&nbsp;<span class="op" id="4837409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4837413">case</span>&nbsp;<span class="ident" id="4837418">value</span><span class="op" id="4837423">.</span><span class="ident" id="4837424">Kind</span><span class="op" id="4837428">(</span><span class="op" id="4837429">)</span>&nbsp;<span class="op" id="4837431">==</span>&nbsp;<span class="ident" id="4837434">reflect</span><span class="op" id="4837441">.</span><span class="ident" id="4837442">Ptr</span>&nbsp;<span class="op" id="4837446">&amp;&amp;</span>&nbsp;<span class="ident" id="4837449">value</span><span class="op" id="4837454">.</span><span class="ident" id="4837455">Type</span><span class="op" id="4837459">(</span><span class="op" id="4837460">)</span><span class="op" id="4837461">.</span><span class="ident" id="4837462">Elem</span><span class="op" id="4837466">(</span><span class="op" id="4837467">)</span><span class="op" id="4837468">.</span><span class="ident" id="4837469">AssignableTo</span><span class="op" id="4837481">(</span><span class="ident" id="4837482">typ</span><span class="op" id="4837485">)</span><span class="op" id="4837486">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4837491">value</span>&nbsp;<span class="op" id="4837497">=</span>&nbsp;<span class="ident" id="4837499">value</span><span class="op" id="4837504">.</span><span class="ident" id="4837505">Elem</span><span class="op" id="4837509">(</span><span class="op" id="4837510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4837515">if</span>&nbsp;<span class="op" id="4837518">!</span><span class="ident" id="4837519">value</span><span class="op" id="4837524">.</span><span class="ident" id="4837525">IsValid</span><span class="op" id="4837532">(</span><span class="op" id="4837533">)</span>&nbsp;<span class="op" id="4837535">{</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4837541">s</span><span class="op" id="4837542">.</span><span class="ident" id="4837543">errorf</span><span class="op" id="4837549">(</span><span class="string" id="4837550">&#34;dereference&nbsp;of&nbsp;nil&nbsp;pointer&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4837589">,</span>&nbsp;<span class="ident" id="4837591">typ</span><span class="op" id="4837594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4837599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4837603">case</span>&nbsp;<span class="ident" id="4837608">reflect</span><span class="op" id="4837615">.</span><span class="ident" id="4837616">PtrTo</span><span class="op" id="4837621">(</span><span class="ident" id="4837622">value</span><span class="op" id="4837627">.</span><span class="ident" id="4837628">Type</span><span class="op" id="4837632">(</span><span class="op" id="4837633">)</span><span class="op" id="4837634">)</span><span class="op" id="4837635">.</span><span class="ident" id="4837636">AssignableTo</span><span class="op" id="4837648">(</span><span class="ident" id="4837649">typ</span><span class="op" id="4837652">)</span>&nbsp;<span class="op" id="4837654">&amp;&amp;</span>&nbsp;<span class="ident" id="4837657">value</span><span class="op" id="4837662">.</span><span class="ident" id="4837663">CanAddr</span><span class="op" id="4837670">(</span><span class="op" id="4837671">)</span><span class="op" id="4837672">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4837677">value</span>&nbsp;<span class="op" id="4837683">=</span>&nbsp;<span class="ident" id="4837685">value</span><span class="op" id="4837690">.</span><span class="ident" id="4837691">Addr</span><span class="op" id="4837695">(</span><span class="op" id="4837696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4837700">default</span><span class="op" id="4837707">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4837712">s</span><span class="op" id="4837713">.</span><span class="ident" id="4837714">errorf</span><span class="op" id="4837720">(</span><span class="string" id="4837721">&#34;wrong&nbsp;type&nbsp;for&nbsp;value;&nbsp;expected&nbsp;%s;&nbsp;got&nbsp;%s&#34;</span><span class="op" id="4837764">,</span>&nbsp;<span class="ident" id="4837766">typ</span><span class="op" id="4837769">,</span>&nbsp;<span class="ident" id="4837771">value</span><span class="op" id="4837776">.</span><span class="ident" id="4837777">Type</span><span class="op" id="4837781">(</span><span class="op" id="4837782">)</span><span class="op" id="4837783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4837787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4837790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4837793">return</span>&nbsp;<span class="ident" id="4837800">value</span><br>
<span class="lineno"></span><span class="op" id="4837806">}</span><br>
<span class="lineno">620</span><br>
<span class="lineno"></span><span class="keyword" id="4837809">func</span>&nbsp;<span class="op" id="4837814">(</span><span class="ident" id="4837815">s</span>&nbsp;<span class="op" id="4837817">*</span><span class="ident" id="4837818">state</span><span class="op" id="4837823">)</span>&nbsp;<span class="ident" id="4837825">evalArg</span><span class="op" id="4837832">(</span><span class="ident" id="4837833">dot</span>&nbsp;<span class="ident" id="4837837">reflect</span><span class="op" id="4837844">.</span><span class="ident" id="4837845">Value</span><span class="op" id="4837850">,</span>&nbsp;<span class="ident" id="4837852">typ</span>&nbsp;<span class="ident" id="4837856">reflect</span><span class="op" id="4837863">.</span><span class="ident" id="4837864">Type</span><span class="op" id="4837868">,</span>&nbsp;<span class="ident" id="4837870">n</span>&nbsp;<span class="ident" id="4837872">parse</span><span class="op" id="4837877">.</span><span class="ident" id="4837878">Node</span><span class="op" id="4837882">)</span>&nbsp;<span class="ident" id="4837884">reflect</span><span class="op" id="4837891">.</span><span class="ident" id="4837892">Value</span>&nbsp;<span class="op" id="4837898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4837901">s</span><span class="op" id="4837902">.</span><span class="ident" id="4837903">at</span><span class="op" id="4837905">(</span><span class="ident" id="4837906">n</span><span class="op" id="4837907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4837910">switch</span>&nbsp;<span class="ident" id="4837917">arg</span>&nbsp;<span class="op" id="4837921">:=</span>&nbsp;<span class="ident" id="4837924">n</span><span class="op" id="4837925">.</span><span class="op" id="4837926">(</span><span class="keyword" id="4837927">type</span><span class="op" id="4837931">)</span>&nbsp;<span class="op" id="4837933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4837936">case</span>&nbsp;<span class="op" id="4837941">*</span><span class="ident" id="4837942">parse</span><span class="op" id="4837947">.</span><span class="ident" id="4837948">DotNode</span><span class="op" id="4837955">:</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4837959">return</span>&nbsp;<span class="ident" id="4837966">s</span><span class="op" id="4837967">.</span><span class="ident" id="4837968">validateType</span><span class="op" id="4837980">(</span><span class="ident" id="4837981">dot</span><span class="op" id="4837984">,</span>&nbsp;<span class="ident" id="4837986">typ</span><span class="op" id="4837989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4837992">case</span>&nbsp;<span class="op" id="4837997">*</span><span class="ident" id="4837998">parse</span><span class="op" id="4838003">.</span><span class="ident" id="4838004">NilNode</span><span class="op" id="4838011">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838015">if</span>&nbsp;<span class="ident" id="4838018">canBeNil</span><span class="op" id="4838026">(</span><span class="ident" id="4838027">typ</span><span class="op" id="4838030">)</span>&nbsp;<span class="op" id="4838032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838037">return</span>&nbsp;<span class="ident" id="4838044">reflect</span><span class="op" id="4838051">.</span><span class="ident" id="4838052">Zero</span><span class="op" id="4838056">(</span><span class="ident" id="4838057">typ</span><span class="op" id="4838060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4838064">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4838068">s</span><span class="op" id="4838069">.</span><span class="ident" id="4838070">errorf</span><span class="op" id="4838076">(</span><span class="string" id="4838077">&#34;cannot&nbsp;assign&nbsp;nil&nbsp;to&nbsp;%s&#34;</span><span class="op" id="4838102">,</span>&nbsp;<span class="ident" id="4838104">typ</span><span class="op" id="4838107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838110">case</span>&nbsp;<span class="op" id="4838115">*</span><span class="ident" id="4838116">parse</span><span class="op" id="4838121">.</span><span class="ident" id="4838122">FieldNode</span><span class="op" id="4838131">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838135">return</span>&nbsp;<span class="ident" id="4838142">s</span><span class="op" id="4838143">.</span><span class="ident" id="4838144">validateType</span><span class="op" id="4838156">(</span><span class="ident" id="4838157">s</span><span class="op" id="4838158">.</span><span class="ident" id="4838159">evalFieldNode</span><span class="op" id="4838172">(</span><span class="ident" id="4838173">dot</span><span class="op" id="4838176">,</span>&nbsp;<span class="ident" id="4838178">arg</span><span class="op" id="4838181">,</span>&nbsp;<span class="op" id="4838183">[</span><span class="op" id="4838184">]</span><span class="ident" id="4838185">parse</span><span class="op" id="4838190">.</span><span class="ident" id="4838191">Node</span><span class="op" id="4838195">{</span><span class="ident" id="4838196">n</span><span class="op" id="4838197">}</span><span class="op" id="4838198">,</span>&nbsp;<span class="ident" id="4838200">zero</span><span class="op" id="4838204">)</span><span class="op" id="4838205">,</span>&nbsp;<span class="ident" id="4838207">typ</span><span class="op" id="4838210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838213">case</span>&nbsp;<span class="op" id="4838218">*</span><span class="ident" id="4838219">parse</span><span class="op" id="4838224">.</span><span class="ident" id="4838225">VariableNode</span><span class="op" id="4838237">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838241">return</span>&nbsp;<span class="ident" id="4838248">s</span><span class="op" id="4838249">.</span><span class="ident" id="4838250">validateType</span><span class="op" id="4838262">(</span><span class="ident" id="4838263">s</span><span class="op" id="4838264">.</span><span class="ident" id="4838265">evalVariableNode</span><span class="op" id="4838281">(</span><span class="ident" id="4838282">dot</span><span class="op" id="4838285">,</span>&nbsp;<span class="ident" id="4838287">arg</span><span class="op" id="4838290">,</span>&nbsp;<span class="ident" id="4838292">nil</span><span class="op" id="4838295">,</span>&nbsp;<span class="ident" id="4838297">zero</span><span class="op" id="4838301">)</span><span class="op" id="4838302">,</span>&nbsp;<span class="ident" id="4838304">typ</span><span class="op" id="4838307">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838310">case</span>&nbsp;<span class="op" id="4838315">*</span><span class="ident" id="4838316">parse</span><span class="op" id="4838321">.</span><span class="ident" id="4838322">PipeNode</span><span class="op" id="4838330">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838334">return</span>&nbsp;<span class="ident" id="4838341">s</span><span class="op" id="4838342">.</span><span class="ident" id="4838343">validateType</span><span class="op" id="4838355">(</span><span class="ident" id="4838356">s</span><span class="op" id="4838357">.</span><span class="ident" id="4838358">evalPipeline</span><span class="op" id="4838370">(</span><span class="ident" id="4838371">dot</span><span class="op" id="4838374">,</span>&nbsp;<span class="ident" id="4838376">arg</span><span class="op" id="4838379">)</span><span class="op" id="4838380">,</span>&nbsp;<span class="ident" id="4838382">typ</span><span class="op" id="4838385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838388">case</span>&nbsp;<span class="op" id="4838393">*</span><span class="ident" id="4838394">parse</span><span class="op" id="4838399">.</span><span class="ident" id="4838400">IdentifierNode</span><span class="op" id="4838414">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838418">return</span>&nbsp;<span class="ident" id="4838425">s</span><span class="op" id="4838426">.</span><span class="ident" id="4838427">evalFunction</span><span class="op" id="4838439">(</span><span class="ident" id="4838440">dot</span><span class="op" id="4838443">,</span>&nbsp;<span class="ident" id="4838445">arg</span><span class="op" id="4838448">,</span>&nbsp;<span class="ident" id="4838450">arg</span><span class="op" id="4838453">,</span>&nbsp;<span class="ident" id="4838455">nil</span><span class="op" id="4838458">,</span>&nbsp;<span class="ident" id="4838460">zero</span><span class="op" id="4838464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838467">case</span>&nbsp;<span class="op" id="4838472">*</span><span class="ident" id="4838473">parse</span><span class="op" id="4838478">.</span><span class="ident" id="4838479">ChainNode</span><span class="op" id="4838488">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838492">return</span>&nbsp;<span class="ident" id="4838499">s</span><span class="op" id="4838500">.</span><span class="ident" id="4838501">validateType</span><span class="op" id="4838513">(</span><span class="ident" id="4838514">s</span><span class="op" id="4838515">.</span><span class="ident" id="4838516">evalChainNode</span><span class="op" id="4838529">(</span><span class="ident" id="4838530">dot</span><span class="op" id="4838533">,</span>&nbsp;<span class="ident" id="4838535">arg</span><span class="op" id="4838538">,</span>&nbsp;<span class="ident" id="4838540">nil</span><span class="op" id="4838543">,</span>&nbsp;<span class="ident" id="4838545">zero</span><span class="op" id="4838549">)</span><span class="op" id="4838550">,</span>&nbsp;<span class="ident" id="4838552">typ</span><span class="op" id="4838555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4838558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838561">switch</span>&nbsp;<span class="ident" id="4838568">typ</span><span class="op" id="4838571">.</span><span class="ident" id="4838572">Kind</span><span class="op" id="4838576">(</span><span class="op" id="4838577">)</span>&nbsp;<span class="op" id="4838579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838582">case</span>&nbsp;<span class="ident" id="4838587">reflect</span><span class="op" id="4838594">.</span><span class="ident" id="4838595">Bool</span><span class="op" id="4838599">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838603">return</span>&nbsp;<span class="ident" id="4838610">s</span><span class="op" id="4838611">.</span><span class="ident" id="4838612">evalBool</span><span class="op" id="4838620">(</span><span class="ident" id="4838621">typ</span><span class="op" id="4838624">,</span>&nbsp;<span class="ident" id="4838626">n</span><span class="op" id="4838627">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838630">case</span>&nbsp;<span class="ident" id="4838635">reflect</span><span class="op" id="4838642">.</span><span class="ident" id="4838643">Complex64</span><span class="op" id="4838652">,</span>&nbsp;<span class="ident" id="4838654">reflect</span><span class="op" id="4838661">.</span><span class="ident" id="4838662">Complex128</span><span class="op" id="4838672">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838676">return</span>&nbsp;<span class="ident" id="4838683">s</span><span class="op" id="4838684">.</span><span class="ident" id="4838685">evalComplex</span><span class="op" id="4838696">(</span><span class="ident" id="4838697">typ</span><span class="op" id="4838700">,</span>&nbsp;<span class="ident" id="4838702">n</span><span class="op" id="4838703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838706">case</span>&nbsp;<span class="ident" id="4838711">reflect</span><span class="op" id="4838718">.</span><span class="ident" id="4838719">Float32</span><span class="op" id="4838726">,</span>&nbsp;<span class="ident" id="4838728">reflect</span><span class="op" id="4838735">.</span><span class="ident" id="4838736">Float64</span><span class="op" id="4838743">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838747">return</span>&nbsp;<span class="ident" id="4838754">s</span><span class="op" id="4838755">.</span><span class="ident" id="4838756">evalFloat</span><span class="op" id="4838765">(</span><span class="ident" id="4838766">typ</span><span class="op" id="4838769">,</span>&nbsp;<span class="ident" id="4838771">n</span><span class="op" id="4838772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838775">case</span>&nbsp;<span class="ident" id="4838780">reflect</span><span class="op" id="4838787">.</span><span class="ident" id="4838788">Int</span><span class="op" id="4838791">,</span>&nbsp;<span class="ident" id="4838793">reflect</span><span class="op" id="4838800">.</span><span class="ident" id="4838801">Int8</span><span class="op" id="4838805">,</span>&nbsp;<span class="ident" id="4838807">reflect</span><span class="op" id="4838814">.</span><span class="ident" id="4838815">Int16</span><span class="op" id="4838820">,</span>&nbsp;<span class="ident" id="4838822">reflect</span><span class="op" id="4838829">.</span><span class="ident" id="4838830">Int32</span><span class="op" id="4838835">,</span>&nbsp;<span class="ident" id="4838837">reflect</span><span class="op" id="4838844">.</span><span class="ident" id="4838845">Int64</span><span class="op" id="4838850">:</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838854">return</span>&nbsp;<span class="ident" id="4838861">s</span><span class="op" id="4838862">.</span><span class="ident" id="4838863">evalInteger</span><span class="op" id="4838874">(</span><span class="ident" id="4838875">typ</span><span class="op" id="4838878">,</span>&nbsp;<span class="ident" id="4838880">n</span><span class="op" id="4838881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838884">case</span>&nbsp;<span class="ident" id="4838889">reflect</span><span class="op" id="4838896">.</span><span class="ident" id="4838897">Interface</span><span class="op" id="4838906">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838910">if</span>&nbsp;<span class="ident" id="4838913">typ</span><span class="op" id="4838916">.</span><span class="ident" id="4838917">NumMethod</span><span class="op" id="4838926">(</span><span class="op" id="4838927">)</span>&nbsp;<span class="op" id="4838929">==</span>&nbsp;<span class="num" id="4838932">0</span>&nbsp;<span class="op" id="4838934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838939">return</span>&nbsp;<span class="ident" id="4838946">s</span><span class="op" id="4838947">.</span><span class="ident" id="4838948">evalEmptyInterface</span><span class="op" id="4838966">(</span><span class="ident" id="4838967">dot</span><span class="op" id="4838970">,</span>&nbsp;<span class="ident" id="4838972">n</span><span class="op" id="4838973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4838977">}</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4838980">case</span>&nbsp;<span class="ident" id="4838985">reflect</span><span class="op" id="4838992">.</span><span class="ident" id="4838993">String</span><span class="op" id="4838999">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4839003">return</span>&nbsp;<span class="ident" id="4839010">s</span><span class="op" id="4839011">.</span><span class="ident" id="4839012">evalString</span><span class="op" id="4839022">(</span><span class="ident" id="4839023">typ</span><span class="op" id="4839026">,</span>&nbsp;<span class="ident" id="4839028">n</span><span class="op" id="4839029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4839032">case</span>&nbsp;<span class="ident" id="4839037">reflect</span><span class="op" id="4839044">.</span><span class="ident" id="4839045">Uint</span><span class="op" id="4839049">,</span>&nbsp;<span class="ident" id="4839051">reflect</span><span class="op" id="4839058">.</span><span class="ident" id="4839059">Uint8</span><span class="op" id="4839064">,</span>&nbsp;<span class="ident" id="4839066">reflect</span><span class="op" id="4839073">.</span><span class="ident" id="4839074">Uint16</span><span class="op" id="4839080">,</span>&nbsp;<span class="ident" id="4839082">reflect</span><span class="op" id="4839089">.</span><span class="ident" id="4839090">Uint32</span><span class="op" id="4839096">,</span>&nbsp;<span class="ident" id="4839098">reflect</span><span class="op" id="4839105">.</span><span class="ident" id="4839106">Uint64</span><span class="op" id="4839112">,</span>&nbsp;<span class="ident" id="4839114">reflect</span><span class="op" id="4839121">.</span><span class="ident" id="4839122">Uintptr</span><span class="op" id="4839129">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4839133">return</span>&nbsp;<span class="ident" id="4839140">s</span><span class="op" id="4839141">.</span><span class="ident" id="4839142">evalUnsignedInteger</span><span class="op" id="4839161">(</span><span class="ident" id="4839162">typ</span><span class="op" id="4839165">,</span>&nbsp;<span class="ident" id="4839167">n</span><span class="op" id="4839168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4839171">}</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4839174">s</span><span class="op" id="4839175">.</span><span class="ident" id="4839176">errorf</span><span class="op" id="4839182">(</span><span class="string" id="4839183">&#34;can&#39;t&nbsp;handle&nbsp;%s&nbsp;for&nbsp;arg&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4839219">,</span>&nbsp;<span class="ident" id="4839221">n</span><span class="op" id="4839222">,</span>&nbsp;<span class="ident" id="4839224">typ</span><span class="op" id="4839227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4839230">panic</span><span class="op" id="4839235">(</span><span class="string" id="4839236">&#34;not&nbsp;reached&#34;</span><span class="op" id="4839249">)</span><br>
<span class="lineno"></span><span class="op" id="4839251">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4839254">func</span>&nbsp;<span class="op" id="4839259">(</span><span class="ident" id="4839260">s</span>&nbsp;<span class="op" id="4839262">*</span><span class="ident" id="4839263">state</span><span class="op" id="4839268">)</span>&nbsp;<span class="ident" id="4839270">evalBool</span><span class="op" id="4839278">(</span><span class="ident" id="4839279">typ</span>&nbsp;<span class="ident" id="4839283">reflect</span><span class="op" id="4839290">.</span><span class="ident" id="4839291">Type</span><span class="op" id="4839295">,</span>&nbsp;<span class="ident" id="4839297">n</span>&nbsp;<span class="ident" id="4839299">parse</span><span class="op" id="4839304">.</span><span class="ident" id="4839305">Node</span><span class="op" id="4839309">)</span>&nbsp;<span class="ident" id="4839311">reflect</span><span class="op" id="4839318">.</span><span class="ident" id="4839319">Value</span>&nbsp;<span class="op" id="4839325">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4839328">s</span><span class="op" id="4839329">.</span><span class="ident" id="4839330">at</span><span class="op" id="4839332">(</span><span class="ident" id="4839333">n</span><span class="op" id="4839334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4839337">if</span>&nbsp;<span class="ident" id="4839340">n</span><span class="op" id="4839341">,</span>&nbsp;<span class="ident" id="4839343">ok</span>&nbsp;<span class="op" id="4839346">:=</span>&nbsp;<span class="ident" id="4839349">n</span><span class="op" id="4839350">.</span><span class="op" id="4839351">(</span><span class="op" id="4839352">*</span><span class="ident" id="4839353">parse</span><span class="op" id="4839358">.</span><span class="ident" id="4839359">BoolNode</span><span class="op" id="4839367">)</span><span class="op" id="4839368">;</span>&nbsp;<span class="ident" id="4839370">ok</span>&nbsp;<span class="op" id="4839373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4839377">value</span>&nbsp;<span class="op" id="4839383">:=</span>&nbsp;<span class="ident" id="4839386">reflect</span><span class="op" id="4839393">.</span><span class="ident" id="4839394">New</span><span class="op" id="4839397">(</span><span class="ident" id="4839398">typ</span><span class="op" id="4839401">)</span><span class="op" id="4839402">.</span><span class="ident" id="4839403">Elem</span><span class="op" id="4839407">(</span><span class="op" id="4839408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4839412">value</span><span class="op" id="4839417">.</span><span class="ident" id="4839418">SetBool</span><span class="op" id="4839425">(</span><span class="ident" id="4839426">n</span><span class="op" id="4839427">.</span><span class="ident" id="4839428">True</span><span class="op" id="4839432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4839436">return</span>&nbsp;<span class="ident" id="4839443">value</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4839450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4839453">s</span><span class="op" id="4839454">.</span><span class="ident" id="4839455">errorf</span><span class="op" id="4839461">(</span><span class="string" id="4839462">&#34;expected&nbsp;bool;&nbsp;found&nbsp;%s&#34;</span><span class="op" id="4839487">,</span>&nbsp;<span class="ident" id="4839489">n</span><span class="op" id="4839490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4839493">panic</span><span class="op" id="4839498">(</span><span class="string" id="4839499">&#34;not&nbsp;reached&#34;</span><span class="op" id="4839512">)</span><br>
<span class="lineno"></span><span class="op" id="4839514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="4839517">func</span>&nbsp;<span class="op" id="4839522">(</span><span class="ident" id="4839523">s</span>&nbsp;<span class="op" id="4839525">*</span><span class="ident" id="4839526">state</span><span class="op" id="4839531">)</span>&nbsp;<span class="ident" id="4839533">evalString</span><span class="op" id="4839543">(</span><span class="ident" id="4839544">typ</span>&nbsp;<span class="ident" id="4839548">reflect</span><span class="op" id="4839555">.</span><span class="ident" id="4839556">Type</span><span class="op" id="4839560">,</span>&nbsp;<span class="ident" id="4839562">n</span>&nbsp;<span class="ident" id="4839564">parse</span><span class="op" id="4839569">.</span><span class="ident" id="4839570">Node</span><span class="op" id="4839574">)</span>&nbsp;<span class="ident" id="4839576">reflect</span><span class="op" id="4839583">.</span><span class="ident" id="4839584">Value</span>&nbsp;<span class="op" id="4839590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4839593">s</span><span class="op" id="4839594">.</span><span class="ident" id="4839595">at</span><span class="op" id="4839597">(</span><span class="ident" id="4839598">n</span><span class="op" id="4839599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4839602">if</span>&nbsp;<span class="ident" id="4839605">n</span><span class="op" id="4839606">,</span>&nbsp;<span class="ident" id="4839608">ok</span>&nbsp;<span class="op" id="4839611">:=</span>&nbsp;<span class="ident" id="4839614">n</span><span class="op" id="4839615">.</span><span class="op" id="4839616">(</span><span class="op" id="4839617">*</span><span class="ident" id="4839618">parse</span><span class="op" id="4839623">.</span><span class="ident" id="4839624">StringNode</span><span class="op" id="4839634">)</span><span class="op" id="4839635">;</span>&nbsp;<span class="ident" id="4839637">ok</span>&nbsp;<span class="op" id="4839640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4839644">value</span>&nbsp;<span class="op" id="4839650">:=</span>&nbsp;<span class="ident" id="4839653">reflect</span><span class="op" id="4839660">.</span><span class="ident" id="4839661">New</span><span class="op" id="4839664">(</span><span class="ident" id="4839665">typ</span><span class="op" id="4839668">)</span><span class="op" id="4839669">.</span><span class="ident" id="4839670">Elem</span><span class="op" id="4839674">(</span><span class="op" id="4839675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4839679">value</span><span class="op" id="4839684">.</span><span class="ident" id="4839685">SetString</span><span class="op" id="4839694">(</span><span class="ident" id="4839695">n</span><span class="op" id="4839696">.</span><span class="ident" id="4839697">Text</span><span class="op" id="4839701">)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4839705">return</span>&nbsp;<span class="ident" id="4839712">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4839719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4839722">s</span><span class="op" id="4839723">.</span><span class="ident" id="4839724">errorf</span><span class="op" id="4839730">(</span><span class="string" id="4839731">&#34;expected&nbsp;string;&nbsp;found&nbsp;%s&#34;</span><span class="op" id="4839758">,</span>&nbsp;<span class="ident" id="4839760">n</span><span class="op" id="4839761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4839764">panic</span><span class="op" id="4839769">(</span><span class="string" id="4839770">&#34;not&nbsp;reached&#34;</span><span class="op" id="4839783">)</span><br>
<span class="lineno"></span><span class="op" id="4839785">}</span><br>
<span class="lineno">685</span><br>
<span class="lineno"></span><span class="keyword" id="4839788">func</span>&nbsp;<span class="op" id="4839793">(</span><span class="ident" id="4839794">s</span>&nbsp;<span class="op" id="4839796">*</span><span class="ident" id="4839797">state</span><span class="op" id="4839802">)</span>&nbsp;<span class="ident" id="4839804">evalInteger</span><span class="op" id="4839815">(</span><span class="ident" id="4839816">typ</span>&nbsp;<span class="ident" id="4839820">reflect</span><span class="op" id="4839827">.</span><span class="ident" id="4839828">Type</span><span class="op" id="4839832">,</span>&nbsp;<span class="ident" id="4839834">n</span>&nbsp;<span class="ident" id="4839836">parse</span><span class="op" id="4839841">.</span><span class="ident" id="4839842">Node</span><span class="op" id="4839846">)</span>&nbsp;<span class="ident" id="4839848">reflect</span><span class="op" id="4839855">.</span><span class="ident" id="4839856">Value</span>&nbsp;<span class="op" id="4839862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4839865">s</span><span class="op" id="4839866">.</span><span class="ident" id="4839867">at</span><span class="op" id="4839869">(</span><span class="ident" id="4839870">n</span><span class="op" id="4839871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4839874">if</span>&nbsp;<span class="ident" id="4839877">n</span><span class="op" id="4839878">,</span>&nbsp;<span class="ident" id="4839880">ok</span>&nbsp;<span class="op" id="4839883">:=</span>&nbsp;<span class="ident" id="4839886">n</span><span class="op" id="4839887">.</span><span class="op" id="4839888">(</span><span class="op" id="4839889">*</span><span class="ident" id="4839890">parse</span><span class="op" id="4839895">.</span><span class="ident" id="4839896">NumberNode</span><span class="op" id="4839906">)</span><span class="op" id="4839907">;</span>&nbsp;<span class="ident" id="4839909">ok</span>&nbsp;<span class="op" id="4839912">&amp;&amp;</span>&nbsp;<span class="ident" id="4839915">n</span><span class="op" id="4839916">.</span><span class="ident" id="4839917">IsInt</span>&nbsp;<span class="op" id="4839923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4839927">value</span>&nbsp;<span class="op" id="4839933">:=</span>&nbsp;<span class="ident" id="4839936">reflect</span><span class="op" id="4839943">.</span><span class="ident" id="4839944">New</span><span class="op" id="4839947">(</span><span class="ident" id="4839948">typ</span><span class="op" id="4839951">)</span><span class="op" id="4839952">.</span><span class="ident" id="4839953">Elem</span><span class="op" id="4839957">(</span><span class="op" id="4839958">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4839962">value</span><span class="op" id="4839967">.</span><span class="ident" id="4839968">SetInt</span><span class="op" id="4839974">(</span><span class="ident" id="4839975">n</span><span class="op" id="4839976">.</span><span class="ident" id="4839977">Int64</span><span class="op" id="4839982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4839986">return</span>&nbsp;<span class="ident" id="4839993">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4840000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4840003">s</span><span class="op" id="4840004">.</span><span class="ident" id="4840005">errorf</span><span class="op" id="4840011">(</span><span class="string" id="4840012">&#34;expected&nbsp;integer;&nbsp;found&nbsp;%s&#34;</span><span class="op" id="4840040">,</span>&nbsp;<span class="ident" id="4840042">n</span><span class="op" id="4840043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4840046">panic</span><span class="op" id="4840051">(</span><span class="string" id="4840052">&#34;not&nbsp;reached&#34;</span><span class="op" id="4840065">)</span><br>
<span class="lineno">695</span><span class="op" id="4840067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4840070">func</span>&nbsp;<span class="op" id="4840075">(</span><span class="ident" id="4840076">s</span>&nbsp;<span class="op" id="4840078">*</span><span class="ident" id="4840079">state</span><span class="op" id="4840084">)</span>&nbsp;<span class="ident" id="4840086">evalUnsignedInteger</span><span class="op" id="4840105">(</span><span class="ident" id="4840106">typ</span>&nbsp;<span class="ident" id="4840110">reflect</span><span class="op" id="4840117">.</span><span class="ident" id="4840118">Type</span><span class="op" id="4840122">,</span>&nbsp;<span class="ident" id="4840124">n</span>&nbsp;<span class="ident" id="4840126">parse</span><span class="op" id="4840131">.</span><span class="ident" id="4840132">Node</span><span class="op" id="4840136">)</span>&nbsp;<span class="ident" id="4840138">reflect</span><span class="op" id="4840145">.</span><span class="ident" id="4840146">Value</span>&nbsp;<span class="op" id="4840152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4840155">s</span><span class="op" id="4840156">.</span><span class="ident" id="4840157">at</span><span class="op" id="4840159">(</span><span class="ident" id="4840160">n</span><span class="op" id="4840161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4840164">if</span>&nbsp;<span class="ident" id="4840167">n</span><span class="op" id="4840168">,</span>&nbsp;<span class="ident" id="4840170">ok</span>&nbsp;<span class="op" id="4840173">:=</span>&nbsp;<span class="ident" id="4840176">n</span><span class="op" id="4840177">.</span><span class="op" id="4840178">(</span><span class="op" id="4840179">*</span><span class="ident" id="4840180">parse</span><span class="op" id="4840185">.</span><span class="ident" id="4840186">NumberNode</span><span class="op" id="4840196">)</span><span class="op" id="4840197">;</span>&nbsp;<span class="ident" id="4840199">ok</span>&nbsp;<span class="op" id="4840202">&amp;&amp;</span>&nbsp;<span class="ident" id="4840205">n</span><span class="op" id="4840206">.</span><span class="ident" id="4840207">IsUint</span>&nbsp;<span class="op" id="4840214">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4840218">value</span>&nbsp;<span class="op" id="4840224">:=</span>&nbsp;<span class="ident" id="4840227">reflect</span><span class="op" id="4840234">.</span><span class="ident" id="4840235">New</span><span class="op" id="4840238">(</span><span class="ident" id="4840239">typ</span><span class="op" id="4840242">)</span><span class="op" id="4840243">.</span><span class="ident" id="4840244">Elem</span><span class="op" id="4840248">(</span><span class="op" id="4840249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4840253">value</span><span class="op" id="4840258">.</span><span class="ident" id="4840259">SetUint</span><span class="op" id="4840266">(</span><span class="ident" id="4840267">n</span><span class="op" id="4840268">.</span><span class="ident" id="4840269">Uint64</span><span class="op" id="4840275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4840279">return</span>&nbsp;<span class="ident" id="4840286">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4840293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4840296">s</span><span class="op" id="4840297">.</span><span class="ident" id="4840298">errorf</span><span class="op" id="4840304">(</span><span class="string" id="4840305">&#34;expected&nbsp;unsigned&nbsp;integer;&nbsp;found&nbsp;%s&#34;</span><span class="op" id="4840342">,</span>&nbsp;<span class="ident" id="4840344">n</span><span class="op" id="4840345">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4840348">panic</span><span class="op" id="4840353">(</span><span class="string" id="4840354">&#34;not&nbsp;reached&#34;</span><span class="op" id="4840367">)</span><br>
<span class="lineno"></span><span class="op" id="4840369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4840372">func</span>&nbsp;<span class="op" id="4840377">(</span><span class="ident" id="4840378">s</span>&nbsp;<span class="op" id="4840380">*</span><span class="ident" id="4840381">state</span><span class="op" id="4840386">)</span>&nbsp;<span class="ident" id="4840388">evalFloat</span><span class="op" id="4840397">(</span><span class="ident" id="4840398">typ</span>&nbsp;<span class="ident" id="4840402">reflect</span><span class="op" id="4840409">.</span><span class="ident" id="4840410">Type</span><span class="op" id="4840414">,</span>&nbsp;<span class="ident" id="4840416">n</span>&nbsp;<span class="ident" id="4840418">parse</span><span class="op" id="4840423">.</span><span class="ident" id="4840424">Node</span><span class="op" id="4840428">)</span>&nbsp;<span class="ident" id="4840430">reflect</span><span class="op" id="4840437">.</span><span class="ident" id="4840438">Value</span>&nbsp;<span class="op" id="4840444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4840447">s</span><span class="op" id="4840448">.</span><span class="ident" id="4840449">at</span><span class="op" id="4840451">(</span><span class="ident" id="4840452">n</span><span class="op" id="4840453">)</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4840456">if</span>&nbsp;<span class="ident" id="4840459">n</span><span class="op" id="4840460">,</span>&nbsp;<span class="ident" id="4840462">ok</span>&nbsp;<span class="op" id="4840465">:=</span>&nbsp;<span class="ident" id="4840468">n</span><span class="op" id="4840469">.</span><span class="op" id="4840470">(</span><span class="op" id="4840471">*</span><span class="ident" id="4840472">parse</span><span class="op" id="4840477">.</span><span class="ident" id="4840478">NumberNode</span><span class="op" id="4840488">)</span><span class="op" id="4840489">;</span>&nbsp;<span class="ident" id="4840491">ok</span>&nbsp;<span class="op" id="4840494">&amp;&amp;</span>&nbsp;<span class="ident" id="4840497">n</span><span class="op" id="4840498">.</span><span class="ident" id="4840499">IsFloat</span>&nbsp;<span class="op" id="4840507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4840511">value</span>&nbsp;<span class="op" id="4840517">:=</span>&nbsp;<span class="ident" id="4840520">reflect</span><span class="op" id="4840527">.</span><span class="ident" id="4840528">New</span><span class="op" id="4840531">(</span><span class="ident" id="4840532">typ</span><span class="op" id="4840535">)</span><span class="op" id="4840536">.</span><span class="ident" id="4840537">Elem</span><span class="op" id="4840541">(</span><span class="op" id="4840542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4840546">value</span><span class="op" id="4840551">.</span><span class="ident" id="4840552">SetFloat</span><span class="op" id="4840560">(</span><span class="ident" id="4840561">n</span><span class="op" id="4840562">.</span><span class="ident" id="4840563">Float64</span><span class="op" id="4840570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4840574">return</span>&nbsp;<span class="ident" id="4840581">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4840588">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4840591">s</span><span class="op" id="4840592">.</span><span class="ident" id="4840593">errorf</span><span class="op" id="4840599">(</span><span class="string" id="4840600">&#34;expected&nbsp;float;&nbsp;found&nbsp;%s&#34;</span><span class="op" id="4840626">,</span>&nbsp;<span class="ident" id="4840628">n</span><span class="op" id="4840629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4840632">panic</span><span class="op" id="4840637">(</span><span class="string" id="4840638">&#34;not&nbsp;reached&#34;</span><span class="op" id="4840651">)</span><br>
<span class="lineno"></span><span class="op" id="4840653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4840656">func</span>&nbsp;<span class="op" id="4840661">(</span><span class="ident" id="4840662">s</span>&nbsp;<span class="op" id="4840664">*</span><span class="ident" id="4840665">state</span><span class="op" id="4840670">)</span>&nbsp;<span class="ident" id="4840672">evalComplex</span><span class="op" id="4840683">(</span><span class="ident" id="4840684">typ</span>&nbsp;<span class="ident" id="4840688">reflect</span><span class="op" id="4840695">.</span><span class="ident" id="4840696">Type</span><span class="op" id="4840700">,</span>&nbsp;<span class="ident" id="4840702">n</span>&nbsp;<span class="ident" id="4840704">parse</span><span class="op" id="4840709">.</span><span class="ident" id="4840710">Node</span><span class="op" id="4840714">)</span>&nbsp;<span class="ident" id="4840716">reflect</span><span class="op" id="4840723">.</span><span class="ident" id="4840724">Value</span>&nbsp;<span class="op" id="4840730">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4840733">if</span>&nbsp;<span class="ident" id="4840736">n</span><span class="op" id="4840737">,</span>&nbsp;<span class="ident" id="4840739">ok</span>&nbsp;<span class="op" id="4840742">:=</span>&nbsp;<span class="ident" id="4840745">n</span><span class="op" id="4840746">.</span><span class="op" id="4840747">(</span><span class="op" id="4840748">*</span><span class="ident" id="4840749">parse</span><span class="op" id="4840754">.</span><span class="ident" id="4840755">NumberNode</span><span class="op" id="4840765">)</span><span class="op" id="4840766">;</span>&nbsp;<span class="ident" id="4840768">ok</span>&nbsp;<span class="op" id="4840771">&amp;&amp;</span>&nbsp;<span class="ident" id="4840774">n</span><span class="op" id="4840775">.</span><span class="ident" id="4840776">IsComplex</span>&nbsp;<span class="op" id="4840786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4840790">value</span>&nbsp;<span class="op" id="4840796">:=</span>&nbsp;<span class="ident" id="4840799">reflect</span><span class="op" id="4840806">.</span><span class="ident" id="4840807">New</span><span class="op" id="4840810">(</span><span class="ident" id="4840811">typ</span><span class="op" id="4840814">)</span><span class="op" id="4840815">.</span><span class="ident" id="4840816">Elem</span><span class="op" id="4840820">(</span><span class="op" id="4840821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4840825">value</span><span class="op" id="4840830">.</span><span class="ident" id="4840831">SetComplex</span><span class="op" id="4840841">(</span><span class="ident" id="4840842">n</span><span class="op" id="4840843">.</span><span class="ident" id="4840844">Complex128</span><span class="op" id="4840854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4840858">return</span>&nbsp;<span class="ident" id="4840865">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4840872">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4840875">s</span><span class="op" id="4840876">.</span><span class="ident" id="4840877">errorf</span><span class="op" id="4840883">(</span><span class="string" id="4840884">&#34;expected&nbsp;complex;&nbsp;found&nbsp;%s&#34;</span><span class="op" id="4840912">,</span>&nbsp;<span class="ident" id="4840914">n</span><span class="op" id="4840915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4840918">panic</span><span class="op" id="4840923">(</span><span class="string" id="4840924">&#34;not&nbsp;reached&#34;</span><span class="op" id="4840937">)</span><br>
<span class="lineno"></span><span class="op" id="4840939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4840942">func</span>&nbsp;<span class="op" id="4840947">(</span><span class="ident" id="4840948">s</span>&nbsp;<span class="op" id="4840950">*</span><span class="ident" id="4840951">state</span><span class="op" id="4840956">)</span>&nbsp;<span class="ident" id="4840958">evalEmptyInterface</span><span class="op" id="4840976">(</span><span class="ident" id="4840977">dot</span>&nbsp;<span class="ident" id="4840981">reflect</span><span class="op" id="4840988">.</span><span class="ident" id="4840989">Value</span><span class="op" id="4840994">,</span>&nbsp;<span class="ident" id="4840996">n</span>&nbsp;<span class="ident" id="4840998">parse</span><span class="op" id="4841003">.</span><span class="ident" id="4841004">Node</span><span class="op" id="4841008">)</span>&nbsp;<span class="ident" id="4841010">reflect</span><span class="op" id="4841017">.</span><span class="ident" id="4841018">Value</span>&nbsp;<span class="op" id="4841024">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4841027">s</span><span class="op" id="4841028">.</span><span class="ident" id="4841029">at</span><span class="op" id="4841031">(</span><span class="ident" id="4841032">n</span><span class="op" id="4841033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841036">switch</span>&nbsp;<span class="ident" id="4841043">n</span>&nbsp;<span class="op" id="4841045">:=</span>&nbsp;<span class="ident" id="4841048">n</span><span class="op" id="4841049">.</span><span class="op" id="4841050">(</span><span class="keyword" id="4841051">type</span><span class="op" id="4841055">)</span>&nbsp;<span class="op" id="4841057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841060">case</span>&nbsp;<span class="op" id="4841065">*</span><span class="ident" id="4841066">parse</span><span class="op" id="4841071">.</span><span class="ident" id="4841072">BoolNode</span><span class="op" id="4841080">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841084">return</span>&nbsp;<span class="ident" id="4841091">reflect</span><span class="op" id="4841098">.</span><span class="ident" id="4841099">ValueOf</span><span class="op" id="4841106">(</span><span class="ident" id="4841107">n</span><span class="op" id="4841108">.</span><span class="ident" id="4841109">True</span><span class="op" id="4841113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841116">case</span>&nbsp;<span class="op" id="4841121">*</span><span class="ident" id="4841122">parse</span><span class="op" id="4841127">.</span><span class="ident" id="4841128">DotNode</span><span class="op" id="4841135">:</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841139">return</span>&nbsp;<span class="ident" id="4841146">dot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841151">case</span>&nbsp;<span class="op" id="4841156">*</span><span class="ident" id="4841157">parse</span><span class="op" id="4841162">.</span><span class="ident" id="4841163">FieldNode</span><span class="op" id="4841172">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841176">return</span>&nbsp;<span class="ident" id="4841183">s</span><span class="op" id="4841184">.</span><span class="ident" id="4841185">evalFieldNode</span><span class="op" id="4841198">(</span><span class="ident" id="4841199">dot</span><span class="op" id="4841202">,</span>&nbsp;<span class="ident" id="4841204">n</span><span class="op" id="4841205">,</span>&nbsp;<span class="ident" id="4841207">nil</span><span class="op" id="4841210">,</span>&nbsp;<span class="ident" id="4841212">zero</span><span class="op" id="4841216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841219">case</span>&nbsp;<span class="op" id="4841224">*</span><span class="ident" id="4841225">parse</span><span class="op" id="4841230">.</span><span class="ident" id="4841231">IdentifierNode</span><span class="op" id="4841245">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841249">return</span>&nbsp;<span class="ident" id="4841256">s</span><span class="op" id="4841257">.</span><span class="ident" id="4841258">evalFunction</span><span class="op" id="4841270">(</span><span class="ident" id="4841271">dot</span><span class="op" id="4841274">,</span>&nbsp;<span class="ident" id="4841276">n</span><span class="op" id="4841277">,</span>&nbsp;<span class="ident" id="4841279">n</span><span class="op" id="4841280">,</span>&nbsp;<span class="ident" id="4841282">nil</span><span class="op" id="4841285">,</span>&nbsp;<span class="ident" id="4841287">zero</span><span class="op" id="4841291">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841294">case</span>&nbsp;<span class="op" id="4841299">*</span><span class="ident" id="4841300">parse</span><span class="op" id="4841305">.</span><span class="ident" id="4841306">NilNode</span><span class="op" id="4841313">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4841317">//&nbsp;NilNode&nbsp;is&nbsp;handled&nbsp;in&nbsp;evalArg,&nbsp;the&nbsp;only&nbsp;place&nbsp;that&nbsp;calls&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4841385">s</span><span class="op" id="4841386">.</span><span class="ident" id="4841387">errorf</span><span class="op" id="4841393">(</span><span class="string" id="4841394">&#34;evalEmptyInterface:&nbsp;nil&nbsp;(can&#39;t&nbsp;happen)&#34;</span><span class="op" id="4841434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841437">case</span>&nbsp;<span class="op" id="4841442">*</span><span class="ident" id="4841443">parse</span><span class="op" id="4841448">.</span><span class="ident" id="4841449">NumberNode</span><span class="op" id="4841459">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841463">return</span>&nbsp;<span class="ident" id="4841470">s</span><span class="op" id="4841471">.</span><span class="ident" id="4841472">idealConstant</span><span class="op" id="4841485">(</span><span class="ident" id="4841486">n</span><span class="op" id="4841487">)</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841490">case</span>&nbsp;<span class="op" id="4841495">*</span><span class="ident" id="4841496">parse</span><span class="op" id="4841501">.</span><span class="ident" id="4841502">StringNode</span><span class="op" id="4841512">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841516">return</span>&nbsp;<span class="ident" id="4841523">reflect</span><span class="op" id="4841530">.</span><span class="ident" id="4841531">ValueOf</span><span class="op" id="4841538">(</span><span class="ident" id="4841539">n</span><span class="op" id="4841540">.</span><span class="ident" id="4841541">Text</span><span class="op" id="4841545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841548">case</span>&nbsp;<span class="op" id="4841553">*</span><span class="ident" id="4841554">parse</span><span class="op" id="4841559">.</span><span class="ident" id="4841560">VariableNode</span><span class="op" id="4841572">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841576">return</span>&nbsp;<span class="ident" id="4841583">s</span><span class="op" id="4841584">.</span><span class="ident" id="4841585">evalVariableNode</span><span class="op" id="4841601">(</span><span class="ident" id="4841602">dot</span><span class="op" id="4841605">,</span>&nbsp;<span class="ident" id="4841607">n</span><span class="op" id="4841608">,</span>&nbsp;<span class="ident" id="4841610">nil</span><span class="op" id="4841613">,</span>&nbsp;<span class="ident" id="4841615">zero</span><span class="op" id="4841619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841622">case</span>&nbsp;<span class="op" id="4841627">*</span><span class="ident" id="4841628">parse</span><span class="op" id="4841633">.</span><span class="ident" id="4841634">PipeNode</span><span class="op" id="4841642">:</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4841646">return</span>&nbsp;<span class="ident" id="4841653">s</span><span class="op" id="4841654">.</span><span class="ident" id="4841655">evalPipeline</span><span class="op" id="4841667">(</span><span class="ident" id="4841668">dot</span><span class="op" id="4841671">,</span>&nbsp;<span class="ident" id="4841673">n</span><span class="op" id="4841674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4841677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4841680">s</span><span class="op" id="4841681">.</span><span class="ident" id="4841682">errorf</span><span class="op" id="4841688">(</span><span class="string" id="4841689">&#34;can&#39;t&nbsp;handle&nbsp;assignment&nbsp;of&nbsp;%s&nbsp;to&nbsp;empty&nbsp;interface&nbsp;argument&#34;</span><span class="op" id="4841748">,</span>&nbsp;<span class="ident" id="4841750">n</span><span class="op" id="4841751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4841754">panic</span><span class="op" id="4841759">(</span><span class="string" id="4841760">&#34;not&nbsp;reached&#34;</span><span class="op" id="4841773">)</span><br>
<span class="lineno"></span><span class="op" id="4841775">}</span><br>
<span class="lineno">755</span><br>
<span class="lineno"></span><span class="comment" id="4841778">//&nbsp;indirect&nbsp;returns&nbsp;the&nbsp;item&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;indirection,&nbsp;and&nbsp;a&nbsp;bool&nbsp;to&nbsp;indicate&nbsp;if&nbsp;it&#39;s&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="4841870">//&nbsp;We&nbsp;indirect&nbsp;through&nbsp;pointers&nbsp;and&nbsp;empty&nbsp;interfaces&nbsp;(only)&nbsp;because</span><br>
<span class="lineno"></span><span class="comment" id="4841938">//&nbsp;non-empty&nbsp;interfaces&nbsp;have&nbsp;methods&nbsp;we&nbsp;might&nbsp;need.</span><br>
<span class="lineno"></span><span class="keyword" id="4841990">func</span>&nbsp;<span class="ident" id="4841995">indirect</span><span class="op" id="4842003">(</span><span class="ident" id="4842004">v</span>&nbsp;<span class="ident" id="4842006">reflect</span><span class="op" id="4842013">.</span><span class="ident" id="4842014">Value</span><span class="op" id="4842019">)</span>&nbsp;<span class="op" id="4842021">(</span><span class="ident" id="4842022">rv</span>&nbsp;<span class="ident" id="4842025">reflect</span><span class="op" id="4842032">.</span><span class="ident" id="4842033">Value</span><span class="op" id="4842038">,</span>&nbsp;<span class="ident" id="4842040">isNil</span>&nbsp;<span class="builtintype" id="4842046">bool</span><span class="op" id="4842050">)</span>&nbsp;<span class="op" id="4842052">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4842055">for</span>&nbsp;<span class="op" id="4842059">;</span>&nbsp;<span class="ident" id="4842061">v</span><span class="op" id="4842062">.</span><span class="ident" id="4842063">Kind</span><span class="op" id="4842067">(</span><span class="op" id="4842068">)</span>&nbsp;<span class="op" id="4842070">==</span>&nbsp;<span class="ident" id="4842073">reflect</span><span class="op" id="4842080">.</span><span class="ident" id="4842081">Ptr</span>&nbsp;<span class="op" id="4842085">||</span>&nbsp;<span class="ident" id="4842088">v</span><span class="op" id="4842089">.</span><span class="ident" id="4842090">Kind</span><span class="op" id="4842094">(</span><span class="op" id="4842095">)</span>&nbsp;<span class="op" id="4842097">==</span>&nbsp;<span class="ident" id="4842100">reflect</span><span class="op" id="4842107">.</span><span class="ident" id="4842108">Interface</span><span class="op" id="4842117">;</span>&nbsp;<span class="ident" id="4842119">v</span>&nbsp;<span class="op" id="4842121">=</span>&nbsp;<span class="ident" id="4842123">v</span><span class="op" id="4842124">.</span><span class="ident" id="4842125">Elem</span><span class="op" id="4842129">(</span><span class="op" id="4842130">)</span>&nbsp;<span class="op" id="4842132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4842136">if</span>&nbsp;<span class="ident" id="4842139">v</span><span class="op" id="4842140">.</span><span class="ident" id="4842141">IsNil</span><span class="op" id="4842146">(</span><span class="op" id="4842147">)</span>&nbsp;<span class="op" id="4842149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4842154">return</span>&nbsp;<span class="ident" id="4842161">v</span><span class="op" id="4842162">,</span>&nbsp;<span class="builtintype" id="4842164">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4842171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4842175">if</span>&nbsp;<span class="ident" id="4842178">v</span><span class="op" id="4842179">.</span><span class="ident" id="4842180">Kind</span><span class="op" id="4842184">(</span><span class="op" id="4842185">)</span>&nbsp;<span class="op" id="4842187">==</span>&nbsp;<span class="ident" id="4842190">reflect</span><span class="op" id="4842197">.</span><span class="ident" id="4842198">Interface</span>&nbsp;<span class="op" id="4842208">&amp;&amp;</span>&nbsp;<span class="ident" id="4842211">v</span><span class="op" id="4842212">.</span><span class="ident" id="4842213">NumMethod</span><span class="op" id="4842222">(</span><span class="op" id="4842223">)</span>&nbsp;<span class="op" id="4842225">&gt;</span>&nbsp;<span class="num" id="4842227">0</span>&nbsp;<span class="op" id="4842229">{</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4842234">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4842242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4842245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4842248">return</span>&nbsp;<span class="ident" id="4842255">v</span><span class="op" id="4842256">,</span>&nbsp;<span class="builtintype" id="4842258">false</span><br>
<span class="lineno"></span><span class="op" id="4842264">}</span><br>
<span class="lineno">770</span><br>
<span class="lineno"></span><span class="comment" id="4842267">//&nbsp;printValue&nbsp;writes&nbsp;the&nbsp;textual&nbsp;representation&nbsp;of&nbsp;the&nbsp;value&nbsp;to&nbsp;the&nbsp;output&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4842345">//&nbsp;the&nbsp;template.</span><br>
<span class="lineno"></span><span class="keyword" id="4842362">func</span>&nbsp;<span class="op" id="4842367">(</span><span class="ident" id="4842368">s</span>&nbsp;<span class="op" id="4842370">*</span><span class="ident" id="4842371">state</span><span class="op" id="4842376">)</span>&nbsp;<span class="ident" id="4842378">printValue</span><span class="op" id="4842388">(</span><span class="ident" id="4842389">n</span>&nbsp;<span class="ident" id="4842391">parse</span><span class="op" id="4842396">.</span><span class="ident" id="4842397">Node</span><span class="op" id="4842401">,</span>&nbsp;<span class="ident" id="4842403">v</span>&nbsp;<span class="ident" id="4842405">reflect</span><span class="op" id="4842412">.</span><span class="ident" id="4842413">Value</span><span class="op" id="4842418">)</span>&nbsp;<span class="op" id="4842420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4842423">s</span><span class="op" id="4842424">.</span><span class="ident" id="4842425">at</span><span class="op" id="4842427">(</span><span class="ident" id="4842428">n</span><span class="op" id="4842429">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4842432">iface</span><span class="op" id="4842437">,</span>&nbsp;<span class="ident" id="4842439">ok</span>&nbsp;<span class="op" id="4842442">:=</span>&nbsp;<span class="ident" id="4842445">printableValue</span><span class="op" id="4842459">(</span><span class="ident" id="4842460">v</span><span class="op" id="4842461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4842464">if</span>&nbsp;<span class="op" id="4842467">!</span><span class="ident" id="4842468">ok</span>&nbsp;<span class="op" id="4842471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4842475">s</span><span class="op" id="4842476">.</span><span class="ident" id="4842477">errorf</span><span class="op" id="4842483">(</span><span class="string" id="4842484">&#34;can&#39;t&nbsp;print&nbsp;%s&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4842511">,</span>&nbsp;<span class="ident" id="4842513">n</span><span class="op" id="4842514">,</span>&nbsp;<span class="ident" id="4842516">v</span><span class="op" id="4842517">.</span><span class="ident" id="4842518">Type</span><span class="op" id="4842522">(</span><span class="op" id="4842523">)</span><span class="op" id="4842524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4842527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4842530">fmt</span><span class="op" id="4842533">.</span><span class="ident" id="4842534">Fprint</span><span class="op" id="4842540">(</span><span class="ident" id="4842541">s</span><span class="op" id="4842542">.</span><span class="ident" id="4842543">wr</span><span class="op" id="4842545">,</span>&nbsp;<span class="ident" id="4842547">iface</span><span class="op" id="4842552">)</span><br>
<span class="lineno">780</span><span class="op" id="4842554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4842557">//&nbsp;printableValue&nbsp;returns&nbsp;the,&nbsp;possibly&nbsp;indirected,&nbsp;interface&nbsp;value&nbsp;inside&nbsp;v&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4842639">//&nbsp;is&nbsp;best&nbsp;for&nbsp;a&nbsp;call&nbsp;to&nbsp;formatted&nbsp;printer.</span><br>
<span class="lineno"></span><span class="keyword" id="4842683">func</span>&nbsp;<span class="ident" id="4842688">printableValue</span><span class="op" id="4842702">(</span><span class="ident" id="4842703">v</span>&nbsp;<span class="ident" id="4842705">reflect</span><span class="op" id="4842712">.</span><span class="ident" id="4842713">Value</span><span class="op" id="4842718">)</span>&nbsp;<span class="op" id="4842720">(</span><span class="keyword" id="4842721">interface</span><span class="op" id="4842730">{</span><span class="op" id="4842731">}</span><span class="op" id="4842732">,</span>&nbsp;<span class="builtintype" id="4842734">bool</span><span class="op" id="4842738">)</span>&nbsp;<span class="op" id="4842740">{</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4842743">if</span>&nbsp;<span class="ident" id="4842746">v</span><span class="op" id="4842747">.</span><span class="ident" id="4842748">Kind</span><span class="op" id="4842752">(</span><span class="op" id="4842753">)</span>&nbsp;<span class="op" id="4842755">==</span>&nbsp;<span class="ident" id="4842758">reflect</span><span class="op" id="4842765">.</span><span class="ident" id="4842766">Ptr</span>&nbsp;<span class="op" id="4842770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4842774">v</span><span class="op" id="4842775">,</span>&nbsp;<span class="ident" id="4842777">_</span>&nbsp;<span class="op" id="4842779">=</span>&nbsp;<span class="ident" id="4842781">indirect</span><span class="op" id="4842789">(</span><span class="ident" id="4842790">v</span><span class="op" id="4842791">)</span>&nbsp;<span class="comment" id="4842793">//&nbsp;fmt.Fprint&nbsp;handles&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4842821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4842824">if</span>&nbsp;<span class="op" id="4842827">!</span><span class="ident" id="4842828">v</span><span class="op" id="4842829">.</span><span class="ident" id="4842830">IsValid</span><span class="op" id="4842837">(</span><span class="op" id="4842838">)</span>&nbsp;<span class="op" id="4842840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4842844">return</span>&nbsp;<span class="string" id="4842851">&#34;&lt;no&nbsp;value&gt;&#34;</span><span class="op" id="4842863">,</span>&nbsp;<span class="builtintype" id="4842865">true</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4842871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4842875">if</span>&nbsp;<span class="op" id="4842878">!</span><span class="ident" id="4842879">v</span><span class="op" id="4842880">.</span><span class="ident" id="4842881">Type</span><span class="op" id="4842885">(</span><span class="op" id="4842886">)</span><span class="op" id="4842887">.</span><span class="ident" id="4842888">Implements</span><span class="op" id="4842898">(</span><span class="ident" id="4842899">errorType</span><span class="op" id="4842908">)</span>&nbsp;<span class="op" id="4842910">&amp;&amp;</span>&nbsp;<span class="op" id="4842913">!</span><span class="ident" id="4842914">v</span><span class="op" id="4842915">.</span><span class="ident" id="4842916">Type</span><span class="op" id="4842920">(</span><span class="op" id="4842921">)</span><span class="op" id="4842922">.</span><span class="ident" id="4842923">Implements</span><span class="op" id="4842933">(</span><span class="ident" id="4842934">fmtStringerType</span><span class="op" id="4842949">)</span>&nbsp;<span class="op" id="4842951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4842955">if</span>&nbsp;<span class="ident" id="4842958">v</span><span class="op" id="4842959">.</span><span class="ident" id="4842960">CanAddr</span><span class="op" id="4842967">(</span><span class="op" id="4842968">)</span>&nbsp;<span class="op" id="4842970">&amp;&amp;</span>&nbsp;<span class="op" id="4842973">(</span><span class="ident" id="4842974">reflect</span><span class="op" id="4842981">.</span><span class="ident" id="4842982">PtrTo</span><span class="op" id="4842987">(</span><span class="ident" id="4842988">v</span><span class="op" id="4842989">.</span><span class="ident" id="4842990">Type</span><span class="op" id="4842994">(</span><span class="op" id="4842995">)</span><span class="op" id="4842996">)</span><span class="op" id="4842997">.</span><span class="ident" id="4842998">Implements</span><span class="op" id="4843008">(</span><span class="ident" id="4843009">errorType</span><span class="op" id="4843018">)</span>&nbsp;<span class="op" id="4843020">||</span>&nbsp;<span class="ident" id="4843023">reflect</span><span class="op" id="4843030">.</span><span class="ident" id="4843031">PtrTo</span><span class="op" id="4843036">(</span><span class="ident" id="4843037">v</span><span class="op" id="4843038">.</span><span class="ident" id="4843039">Type</span><span class="op" id="4843043">(</span><span class="op" id="4843044">)</span><span class="op" id="4843045">)</span><span class="op" id="4843046">.</span><span class="ident" id="4843047">Implements</span><span class="op" id="4843057">(</span><span class="ident" id="4843058">fmtStringerType</span><span class="op" id="4843073">)</span><span class="op" id="4843074">)</span>&nbsp;<span class="op" id="4843076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4843081">v</span>&nbsp;<span class="op" id="4843083">=</span>&nbsp;<span class="ident" id="4843085">v</span><span class="op" id="4843086">.</span><span class="ident" id="4843087">Addr</span><span class="op" id="4843091">(</span><span class="op" id="4843092">)</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4843096">}</span>&nbsp;<span class="keyword" id="4843098">else</span>&nbsp;<span class="op" id="4843103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4843108">switch</span>&nbsp;<span class="ident" id="4843115">v</span><span class="op" id="4843116">.</span><span class="ident" id="4843117">Kind</span><span class="op" id="4843121">(</span><span class="op" id="4843122">)</span>&nbsp;<span class="op" id="4843124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4843129">case</span>&nbsp;<span class="ident" id="4843134">reflect</span><span class="op" id="4843141">.</span><span class="ident" id="4843142">Chan</span><span class="op" id="4843146">,</span>&nbsp;<span class="ident" id="4843148">reflect</span><span class="op" id="4843155">.</span><span class="ident" id="4843156">Func</span><span class="op" id="4843160">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4843166">return</span>&nbsp;<span class="ident" id="4843173">nil</span><span class="op" id="4843176">,</span>&nbsp;<span class="builtintype" id="4843178">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4843187">}</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4843191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4843194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4843197">return</span>&nbsp;<span class="ident" id="4843204">v</span><span class="op" id="4843205">.</span><span class="ident" id="4843206">Interface</span><span class="op" id="4843215">(</span><span class="op" id="4843216">)</span><span class="op" id="4843217">,</span>&nbsp;<span class="builtintype" id="4843219">true</span><br>
<span class="lineno"></span><span class="op" id="4843224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">805</span><span class="comment" id="4843227">//&nbsp;Types&nbsp;to&nbsp;help&nbsp;sort&nbsp;the&nbsp;keys&nbsp;in&nbsp;a&nbsp;map&nbsp;for&nbsp;reproducible&nbsp;output.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4843293">type</span>&nbsp;<span class="ident" id="4843298">rvs</span>&nbsp;<span class="op" id="4843302">[</span><span class="op" id="4843303">]</span><span class="ident" id="4843304">reflect</span><span class="op" id="4843311">.</span><span class="ident" id="4843312">Value</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4843319">func</span>&nbsp;<span class="op" id="4843324">(</span><span class="ident" id="4843325">x</span>&nbsp;<span class="ident" id="4843327">rvs</span><span class="op" id="4843330">)</span>&nbsp;<span class="ident" id="4843332">Len</span><span class="op" id="4843335">(</span><span class="op" id="4843336">)</span>&nbsp;<span class="builtintype" id="4843338">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4843347">{</span>&nbsp;<span class="keyword" id="4843349">return</span>&nbsp;<span class="builtinfunc" id="4843356">len</span><span class="op" id="4843359">(</span><span class="ident" id="4843360">x</span><span class="op" id="4843361">)</span>&nbsp;<span class="op" id="4843363">}</span><br>
<span class="lineno">810</span><span class="keyword" id="4843365">func</span>&nbsp;<span class="op" id="4843370">(</span><span class="ident" id="4843371">x</span>&nbsp;<span class="ident" id="4843373">rvs</span><span class="op" id="4843376">)</span>&nbsp;<span class="ident" id="4843378">Swap</span><span class="op" id="4843382">(</span><span class="ident" id="4843383">i</span><span class="op" id="4843384">,</span>&nbsp;<span class="ident" id="4843386">j</span>&nbsp;<span class="builtintype" id="4843388">int</span><span class="op" id="4843391">)</span>&nbsp;<span class="op" id="4843393">{</span>&nbsp;<span class="ident" id="4843395">x</span><span class="op" id="4843396">[</span><span class="ident" id="4843397">i</span><span class="op" id="4843398">]</span><span class="op" id="4843399">,</span>&nbsp;<span class="ident" id="4843401">x</span><span class="op" id="4843402">[</span><span class="ident" id="4843403">j</span><span class="op" id="4843404">]</span>&nbsp;<span class="op" id="4843406">=</span>&nbsp;<span class="ident" id="4843408">x</span><span class="op" id="4843409">[</span><span class="ident" id="4843410">j</span><span class="op" id="4843411">]</span><span class="op" id="4843412">,</span>&nbsp;<span class="ident" id="4843414">x</span><span class="op" id="4843415">[</span><span class="ident" id="4843416">i</span><span class="op" id="4843417">]</span>&nbsp;<span class="op" id="4843419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4843422">type</span>&nbsp;<span class="ident" id="4843427">rvInts</span>&nbsp;<span class="keyword" id="4843434">struct</span><span class="op" id="4843440">{</span>&nbsp;<span class="ident" id="4843442">rvs</span>&nbsp;<span class="op" id="4843446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4843449">func</span>&nbsp;<span class="op" id="4843454">(</span><span class="ident" id="4843455">x</span>&nbsp;<span class="ident" id="4843457">rvInts</span><span class="op" id="4843463">)</span>&nbsp;<span class="ident" id="4843465">Less</span><span class="op" id="4843469">(</span><span class="ident" id="4843470">i</span><span class="op" id="4843471">,</span>&nbsp;<span class="ident" id="4843473">j</span>&nbsp;<span class="builtintype" id="4843475">int</span><span class="op" id="4843478">)</span>&nbsp;<span class="builtintype" id="4843480">bool</span>&nbsp;<span class="op" id="4843485">{</span>&nbsp;<span class="keyword" id="4843487">return</span>&nbsp;<span class="ident" id="4843494">x</span><span class="op" id="4843495">.</span><span class="ident" id="4843496">rvs</span><span class="op" id="4843499">[</span><span class="ident" id="4843500">i</span><span class="op" id="4843501">]</span><span class="op" id="4843502">.</span><span class="ident" id="4843503">Int</span><span class="op" id="4843506">(</span><span class="op" id="4843507">)</span>&nbsp;<span class="op" id="4843509">&lt;</span>&nbsp;<span class="ident" id="4843511">x</span><span class="op" id="4843512">.</span><span class="ident" id="4843513">rvs</span><span class="op" id="4843516">[</span><span class="ident" id="4843517">j</span><span class="op" id="4843518">]</span><span class="op" id="4843519">.</span><span class="ident" id="4843520">Int</span><span class="op" id="4843523">(</span><span class="op" id="4843524">)</span>&nbsp;<span class="op" id="4843526">}</span><br>
<span class="lineno">815</span><br>
<span class="lineno"></span><span class="keyword" id="4843529">type</span>&nbsp;<span class="ident" id="4843534">rvUints</span>&nbsp;<span class="keyword" id="4843542">struct</span><span class="op" id="4843548">{</span>&nbsp;<span class="ident" id="4843550">rvs</span>&nbsp;<span class="op" id="4843554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4843557">func</span>&nbsp;<span class="op" id="4843562">(</span><span class="ident" id="4843563">x</span>&nbsp;<span class="ident" id="4843565">rvUints</span><span class="op" id="4843572">)</span>&nbsp;<span class="ident" id="4843574">Less</span><span class="op" id="4843578">(</span><span class="ident" id="4843579">i</span><span class="op" id="4843580">,</span>&nbsp;<span class="ident" id="4843582">j</span>&nbsp;<span class="builtintype" id="4843584">int</span><span class="op" id="4843587">)</span>&nbsp;<span class="builtintype" id="4843589">bool</span>&nbsp;<span class="op" id="4843594">{</span>&nbsp;<span class="keyword" id="4843596">return</span>&nbsp;<span class="ident" id="4843603">x</span><span class="op" id="4843604">.</span><span class="ident" id="4843605">rvs</span><span class="op" id="4843608">[</span><span class="ident" id="4843609">i</span><span class="op" id="4843610">]</span><span class="op" id="4843611">.</span><span class="ident" id="4843612">Uint</span><span class="op" id="4843616">(</span><span class="op" id="4843617">)</span>&nbsp;<span class="op" id="4843619">&lt;</span>&nbsp;<span class="ident" id="4843621">x</span><span class="op" id="4843622">.</span><span class="ident" id="4843623">rvs</span><span class="op" id="4843626">[</span><span class="ident" id="4843627">j</span><span class="op" id="4843628">]</span><span class="op" id="4843629">.</span><span class="ident" id="4843630">Uint</span><span class="op" id="4843634">(</span><span class="op" id="4843635">)</span>&nbsp;<span class="op" id="4843637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">820</span><span class="keyword" id="4843640">type</span>&nbsp;<span class="ident" id="4843645">rvFloats</span>&nbsp;<span class="keyword" id="4843654">struct</span><span class="op" id="4843660">{</span>&nbsp;<span class="ident" id="4843662">rvs</span>&nbsp;<span class="op" id="4843666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4843669">func</span>&nbsp;<span class="op" id="4843674">(</span><span class="ident" id="4843675">x</span>&nbsp;<span class="ident" id="4843677">rvFloats</span><span class="op" id="4843685">)</span>&nbsp;<span class="ident" id="4843687">Less</span><span class="op" id="4843691">(</span><span class="ident" id="4843692">i</span><span class="op" id="4843693">,</span>&nbsp;<span class="ident" id="4843695">j</span>&nbsp;<span class="builtintype" id="4843697">int</span><span class="op" id="4843700">)</span>&nbsp;<span class="builtintype" id="4843702">bool</span>&nbsp;<span class="op" id="4843707">{</span>&nbsp;<span class="keyword" id="4843709">return</span>&nbsp;<span class="ident" id="4843716">x</span><span class="op" id="4843717">.</span><span class="ident" id="4843718">rvs</span><span class="op" id="4843721">[</span><span class="ident" id="4843722">i</span><span class="op" id="4843723">]</span><span class="op" id="4843724">.</span><span class="ident" id="4843725">Float</span><span class="op" id="4843730">(</span><span class="op" id="4843731">)</span>&nbsp;<span class="op" id="4843733">&lt;</span>&nbsp;<span class="ident" id="4843735">x</span><span class="op" id="4843736">.</span><span class="ident" id="4843737">rvs</span><span class="op" id="4843740">[</span><span class="ident" id="4843741">j</span><span class="op" id="4843742">]</span><span class="op" id="4843743">.</span><span class="ident" id="4843744">Float</span><span class="op" id="4843749">(</span><span class="op" id="4843750">)</span>&nbsp;<span class="op" id="4843752">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4843755">type</span>&nbsp;<span class="ident" id="4843760">rvStrings</span>&nbsp;<span class="keyword" id="4843770">struct</span><span class="op" id="4843776">{</span>&nbsp;<span class="ident" id="4843778">rvs</span>&nbsp;<span class="op" id="4843782">}</span><br>
<span class="lineno">825</span><br>
<span class="lineno"></span><span class="keyword" id="4843785">func</span>&nbsp;<span class="op" id="4843790">(</span><span class="ident" id="4843791">x</span>&nbsp;<span class="ident" id="4843793">rvStrings</span><span class="op" id="4843802">)</span>&nbsp;<span class="ident" id="4843804">Less</span><span class="op" id="4843808">(</span><span class="ident" id="4843809">i</span><span class="op" id="4843810">,</span>&nbsp;<span class="ident" id="4843812">j</span>&nbsp;<span class="builtintype" id="4843814">int</span><span class="op" id="4843817">)</span>&nbsp;<span class="builtintype" id="4843819">bool</span>&nbsp;<span class="op" id="4843824">{</span>&nbsp;<span class="keyword" id="4843826">return</span>&nbsp;<span class="ident" id="4843833">x</span><span class="op" id="4843834">.</span><span class="ident" id="4843835">rvs</span><span class="op" id="4843838">[</span><span class="ident" id="4843839">i</span><span class="op" id="4843840">]</span><span class="op" id="4843841">.</span><span class="ident" id="4843842">String</span><span class="op" id="4843848">(</span><span class="op" id="4843849">)</span>&nbsp;<span class="op" id="4843851">&lt;</span>&nbsp;<span class="ident" id="4843853">x</span><span class="op" id="4843854">.</span><span class="ident" id="4843855">rvs</span><span class="op" id="4843858">[</span><span class="ident" id="4843859">j</span><span class="op" id="4843860">]</span><span class="op" id="4843861">.</span><span class="ident" id="4843862">String</span><span class="op" id="4843868">(</span><span class="op" id="4843869">)</span>&nbsp;<span class="op" id="4843871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4843874">//&nbsp;sortKeys&nbsp;sorts&nbsp;(if&nbsp;it&nbsp;can)&nbsp;the&nbsp;slice&nbsp;of&nbsp;reflect.Values,&nbsp;which&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;map&nbsp;keys.</span><br>
<span class="lineno"></span><span class="keyword" id="4843963">func</span>&nbsp;<span class="ident" id="4843968">sortKeys</span><span class="op" id="4843976">(</span><span class="ident" id="4843977">v</span>&nbsp;<span class="op" id="4843979">[</span><span class="op" id="4843980">]</span><span class="ident" id="4843981">reflect</span><span class="op" id="4843988">.</span><span class="ident" id="4843989">Value</span><span class="op" id="4843994">)</span>&nbsp;<span class="op" id="4843996">[</span><span class="op" id="4843997">]</span><span class="ident" id="4843998">reflect</span><span class="op" id="4844005">.</span><span class="ident" id="4844006">Value</span>&nbsp;<span class="op" id="4844012">{</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4844015">if</span>&nbsp;<span class="builtinfunc" id="4844018">len</span><span class="op" id="4844021">(</span><span class="ident" id="4844022">v</span><span class="op" id="4844023">)</span>&nbsp;<span class="op" id="4844025">&lt;=</span>&nbsp;<span class="num" id="4844028">1</span>&nbsp;<span class="op" id="4844030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4844034">return</span>&nbsp;<span class="ident" id="4844041">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4844044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4844047">switch</span>&nbsp;<span class="ident" id="4844054">v</span><span class="op" id="4844055">[</span><span class="num" id="4844056">0</span><span class="op" id="4844057">]</span><span class="op" id="4844058">.</span><span class="ident" id="4844059">Kind</span><span class="op" id="4844063">(</span><span class="op" id="4844064">)</span>&nbsp;<span class="op" id="4844066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4844069">case</span>&nbsp;<span class="ident" id="4844074">reflect</span><span class="op" id="4844081">.</span><span class="ident" id="4844082">Float32</span><span class="op" id="4844089">,</span>&nbsp;<span class="ident" id="4844091">reflect</span><span class="op" id="4844098">.</span><span class="ident" id="4844099">Float64</span><span class="op" id="4844106">:</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4844110">sort</span><span class="op" id="4844114">.</span><span class="ident" id="4844115">Sort</span><span class="op" id="4844119">(</span><span class="ident" id="4844120">rvFloats</span><span class="op" id="4844128">{</span><span class="ident" id="4844129">v</span><span class="op" id="4844130">}</span><span class="op" id="4844131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4844134">case</span>&nbsp;<span class="ident" id="4844139">reflect</span><span class="op" id="4844146">.</span><span class="ident" id="4844147">Int</span><span class="op" id="4844150">,</span>&nbsp;<span class="ident" id="4844152">reflect</span><span class="op" id="4844159">.</span><span class="ident" id="4844160">Int8</span><span class="op" id="4844164">,</span>&nbsp;<span class="ident" id="4844166">reflect</span><span class="op" id="4844173">.</span><span class="ident" id="4844174">Int16</span><span class="op" id="4844179">,</span>&nbsp;<span class="ident" id="4844181">reflect</span><span class="op" id="4844188">.</span><span class="ident" id="4844189">Int32</span><span class="op" id="4844194">,</span>&nbsp;<span class="ident" id="4844196">reflect</span><span class="op" id="4844203">.</span><span class="ident" id="4844204">Int64</span><span class="op" id="4844209">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4844213">sort</span><span class="op" id="4844217">.</span><span class="ident" id="4844218">Sort</span><span class="op" id="4844222">(</span><span class="ident" id="4844223">rvInts</span><span class="op" id="4844229">{</span><span class="ident" id="4844230">v</span><span class="op" id="4844231">}</span><span class="op" id="4844232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4844235">case</span>&nbsp;<span class="ident" id="4844240">reflect</span><span class="op" id="4844247">.</span><span class="ident" id="4844248">String</span><span class="op" id="4844254">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4844258">sort</span><span class="op" id="4844262">.</span><span class="ident" id="4844263">Sort</span><span class="op" id="4844267">(</span><span class="ident" id="4844268">rvStrings</span><span class="op" id="4844277">{</span><span class="ident" id="4844278">v</span><span class="op" id="4844279">}</span><span class="op" id="4844280">)</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4844283">case</span>&nbsp;<span class="ident" id="4844288">reflect</span><span class="op" id="4844295">.</span><span class="ident" id="4844296">Uint</span><span class="op" id="4844300">,</span>&nbsp;<span class="ident" id="4844302">reflect</span><span class="op" id="4844309">.</span><span class="ident" id="4844310">Uint8</span><span class="op" id="4844315">,</span>&nbsp;<span class="ident" id="4844317">reflect</span><span class="op" id="4844324">.</span><span class="ident" id="4844325">Uint16</span><span class="op" id="4844331">,</span>&nbsp;<span class="ident" id="4844333">reflect</span><span class="op" id="4844340">.</span><span class="ident" id="4844341">Uint32</span><span class="op" id="4844347">,</span>&nbsp;<span class="ident" id="4844349">reflect</span><span class="op" id="4844356">.</span><span class="ident" id="4844357">Uint64</span><span class="op" id="4844363">,</span>&nbsp;<span class="ident" id="4844365">reflect</span><span class="op" id="4844372">.</span><span class="ident" id="4844373">Uintptr</span><span class="op" id="4844380">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4844384">sort</span><span class="op" id="4844388">.</span><span class="ident" id="4844389">Sort</span><span class="op" id="4844393">(</span><span class="ident" id="4844394">rvUints</span><span class="op" id="4844401">{</span><span class="ident" id="4844402">v</span><span class="op" id="4844403">}</span><span class="op" id="4844404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4844407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4844410">return</span>&nbsp;<span class="ident" id="4844417">v</span><br>
<span class="lineno"></span><span class="op" id="4844419">}</span>
</div>
</body>
</html>
