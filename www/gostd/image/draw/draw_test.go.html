<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8655297">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8655352">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8655406">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8655457">package</span>&nbsp;<span class="ident" id="8655465">draw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8655471">import</span>&nbsp;<span class="op" id="8655478">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8655481">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8655490">&#34;image/color&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8655505">&#34;image/png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8655518">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8655524">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8655534">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8655537">func</span>&nbsp;<span class="ident" id="8655542">eq</span><span class="op" id="8655544">(</span><span class="ident" id="8655545">c0</span><span class="op" id="8655547">,</span>&nbsp;<span class="ident" id="8655549">c1</span>&nbsp;<span class="ident" id="8655552">color</span><span class="op" id="8655557">.</span><span class="ident" id="8655558">Color</span><span class="op" id="8655563">)</span>&nbsp;<span class="builtintype" id="8655565">bool</span>&nbsp;<span class="op" id="8655570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8655573">r0</span><span class="op" id="8655575">,</span>&nbsp;<span class="ident" id="8655577">g0</span><span class="op" id="8655579">,</span>&nbsp;<span class="ident" id="8655581">b0</span><span class="op" id="8655583">,</span>&nbsp;<span class="ident" id="8655585">a0</span>&nbsp;<span class="op" id="8655588">:=</span>&nbsp;<span class="ident" id="8655591">c0</span><span class="op" id="8655593">.</span><span class="ident" id="8655594">RGBA</span><span class="op" id="8655598">(</span><span class="op" id="8655599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8655602">r1</span><span class="op" id="8655604">,</span>&nbsp;<span class="ident" id="8655606">g1</span><span class="op" id="8655608">,</span>&nbsp;<span class="ident" id="8655610">b1</span><span class="op" id="8655612">,</span>&nbsp;<span class="ident" id="8655614">a1</span>&nbsp;<span class="op" id="8655617">:=</span>&nbsp;<span class="ident" id="8655620">c1</span><span class="op" id="8655622">.</span><span class="ident" id="8655623">RGBA</span><span class="op" id="8655627">(</span><span class="op" id="8655628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8655631">return</span>&nbsp;<span class="ident" id="8655638">r0</span>&nbsp;<span class="op" id="8655641">==</span>&nbsp;<span class="ident" id="8655644">r1</span>&nbsp;<span class="op" id="8655647">&amp;&amp;</span>&nbsp;<span class="ident" id="8655650">g0</span>&nbsp;<span class="op" id="8655653">==</span>&nbsp;<span class="ident" id="8655656">g1</span>&nbsp;<span class="op" id="8655659">&amp;&amp;</span>&nbsp;<span class="ident" id="8655662">b0</span>&nbsp;<span class="op" id="8655665">==</span>&nbsp;<span class="ident" id="8655668">b1</span>&nbsp;<span class="op" id="8655671">&amp;&amp;</span>&nbsp;<span class="ident" id="8655674">a0</span>&nbsp;<span class="op" id="8655677">==</span>&nbsp;<span class="ident" id="8655680">a1</span><br>
<span class="lineno"></span><span class="op" id="8655683">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8655686">func</span>&nbsp;<span class="ident" id="8655691">fillBlue</span><span class="op" id="8655699">(</span><span class="ident" id="8655700">alpha</span>&nbsp;<span class="builtintype" id="8655706">int</span><span class="op" id="8655709">)</span>&nbsp;<span class="ident" id="8655711">image</span><span class="op" id="8655716">.</span><span class="ident" id="8655717">Image</span>&nbsp;<span class="op" id="8655723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8655726">return</span>&nbsp;<span class="ident" id="8655733">image</span><span class="op" id="8655738">.</span><span class="ident" id="8655739">NewUniform</span><span class="op" id="8655749">(</span><span class="ident" id="8655750">color</span><span class="op" id="8655755">.</span><span class="ident" id="8655756">RGBA</span><span class="op" id="8655760">{</span><span class="num" id="8655761">0</span><span class="op" id="8655762">,</span>&nbsp;<span class="num" id="8655764">0</span><span class="op" id="8655765">,</span>&nbsp;<span class="builtintype" id="8655767">uint8</span><span class="op" id="8655772">(</span><span class="ident" id="8655773">alpha</span><span class="op" id="8655778">)</span><span class="op" id="8655779">,</span>&nbsp;<span class="builtintype" id="8655781">uint8</span><span class="op" id="8655786">(</span><span class="ident" id="8655787">alpha</span><span class="op" id="8655792">)</span><span class="op" id="8655793">}</span><span class="op" id="8655794">)</span><br>
<span class="lineno"></span><span class="op" id="8655796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="8655799">func</span>&nbsp;<span class="ident" id="8655804">fillAlpha</span><span class="op" id="8655813">(</span><span class="ident" id="8655814">alpha</span>&nbsp;<span class="builtintype" id="8655820">int</span><span class="op" id="8655823">)</span>&nbsp;<span class="ident" id="8655825">image</span><span class="op" id="8655830">.</span><span class="ident" id="8655831">Image</span>&nbsp;<span class="op" id="8655837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8655840">return</span>&nbsp;<span class="ident" id="8655847">image</span><span class="op" id="8655852">.</span><span class="ident" id="8655853">NewUniform</span><span class="op" id="8655863">(</span><span class="ident" id="8655864">color</span><span class="op" id="8655869">.</span><span class="ident" id="8655870">Alpha</span><span class="op" id="8655875">{</span><span class="builtintype" id="8655876">uint8</span><span class="op" id="8655881">(</span><span class="ident" id="8655882">alpha</span><span class="op" id="8655887">)</span><span class="op" id="8655888">}</span><span class="op" id="8655889">)</span><br>
<span class="lineno"></span><span class="op" id="8655891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8655894">func</span>&nbsp;<span class="ident" id="8655899">vgradGreen</span><span class="op" id="8655909">(</span><span class="ident" id="8655910">alpha</span>&nbsp;<span class="builtintype" id="8655916">int</span><span class="op" id="8655919">)</span>&nbsp;<span class="ident" id="8655921">image</span><span class="op" id="8655926">.</span><span class="ident" id="8655927">Image</span>&nbsp;<span class="op" id="8655933">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8655936">m</span>&nbsp;<span class="op" id="8655938">:=</span>&nbsp;<span class="ident" id="8655941">image</span><span class="op" id="8655946">.</span><span class="ident" id="8655947">NewRGBA</span><span class="op" id="8655954">(</span><span class="ident" id="8655955">image</span><span class="op" id="8655960">.</span><span class="ident" id="8655961">Rect</span><span class="op" id="8655965">(</span><span class="num" id="8655966">0</span><span class="op" id="8655967">,</span>&nbsp;<span class="num" id="8655969">0</span><span class="op" id="8655970">,</span>&nbsp;<span class="num" id="8655972">16</span><span class="op" id="8655974">,</span>&nbsp;<span class="num" id="8655976">16</span><span class="op" id="8655978">)</span><span class="op" id="8655979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8655982">for</span>&nbsp;<span class="ident" id="8655986">y</span>&nbsp;<span class="op" id="8655988">:=</span>&nbsp;<span class="num" id="8655991">0</span><span class="op" id="8655992">;</span>&nbsp;<span class="ident" id="8655994">y</span>&nbsp;<span class="op" id="8655996">&lt;</span>&nbsp;<span class="num" id="8655998">16</span><span class="op" id="8656000">;</span>&nbsp;<span class="ident" id="8656002">y</span><span class="op" id="8656003">++</span>&nbsp;<span class="op" id="8656006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8656010">for</span>&nbsp;<span class="ident" id="8656014">x</span>&nbsp;<span class="op" id="8656016">:=</span>&nbsp;<span class="num" id="8656019">0</span><span class="op" id="8656020">;</span>&nbsp;<span class="ident" id="8656022">x</span>&nbsp;<span class="op" id="8656024">&lt;</span>&nbsp;<span class="num" id="8656026">16</span><span class="op" id="8656028">;</span>&nbsp;<span class="ident" id="8656030">x</span><span class="op" id="8656031">++</span>&nbsp;<span class="op" id="8656034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8656039">m</span><span class="op" id="8656040">.</span><span class="ident" id="8656041">Set</span><span class="op" id="8656044">(</span><span class="ident" id="8656045">x</span><span class="op" id="8656046">,</span>&nbsp;<span class="ident" id="8656048">y</span><span class="op" id="8656049">,</span>&nbsp;<span class="ident" id="8656051">color</span><span class="op" id="8656056">.</span><span class="ident" id="8656057">RGBA</span><span class="op" id="8656061">{</span><span class="num" id="8656062">0</span><span class="op" id="8656063">,</span>&nbsp;<span class="builtintype" id="8656065">uint8</span><span class="op" id="8656070">(</span><span class="ident" id="8656071">y</span>&nbsp;<span class="op" id="8656073">*</span>&nbsp;<span class="ident" id="8656075">alpha</span>&nbsp;<span class="op" id="8656081">/</span>&nbsp;<span class="num" id="8656083">15</span><span class="op" id="8656085">)</span><span class="op" id="8656086">,</span>&nbsp;<span class="num" id="8656088">0</span><span class="op" id="8656089">,</span>&nbsp;<span class="builtintype" id="8656091">uint8</span><span class="op" id="8656096">(</span><span class="ident" id="8656097">alpha</span><span class="op" id="8656102">)</span><span class="op" id="8656103">}</span><span class="op" id="8656104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656108">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8656114">return</span>&nbsp;<span class="ident" id="8656121">m</span><br>
<span class="lineno"></span><span class="op" id="8656123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8656126">func</span>&nbsp;<span class="ident" id="8656131">vgradAlpha</span><span class="op" id="8656141">(</span><span class="ident" id="8656142">alpha</span>&nbsp;<span class="builtintype" id="8656148">int</span><span class="op" id="8656151">)</span>&nbsp;<span class="ident" id="8656153">image</span><span class="op" id="8656158">.</span><span class="ident" id="8656159">Image</span>&nbsp;<span class="op" id="8656165">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8656168">m</span>&nbsp;<span class="op" id="8656170">:=</span>&nbsp;<span class="ident" id="8656173">image</span><span class="op" id="8656178">.</span><span class="ident" id="8656179">NewAlpha</span><span class="op" id="8656187">(</span><span class="ident" id="8656188">image</span><span class="op" id="8656193">.</span><span class="ident" id="8656194">Rect</span><span class="op" id="8656198">(</span><span class="num" id="8656199">0</span><span class="op" id="8656200">,</span>&nbsp;<span class="num" id="8656202">0</span><span class="op" id="8656203">,</span>&nbsp;<span class="num" id="8656205">16</span><span class="op" id="8656207">,</span>&nbsp;<span class="num" id="8656209">16</span><span class="op" id="8656211">)</span><span class="op" id="8656212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8656215">for</span>&nbsp;<span class="ident" id="8656219">y</span>&nbsp;<span class="op" id="8656221">:=</span>&nbsp;<span class="num" id="8656224">0</span><span class="op" id="8656225">;</span>&nbsp;<span class="ident" id="8656227">y</span>&nbsp;<span class="op" id="8656229">&lt;</span>&nbsp;<span class="num" id="8656231">16</span><span class="op" id="8656233">;</span>&nbsp;<span class="ident" id="8656235">y</span><span class="op" id="8656236">++</span>&nbsp;<span class="op" id="8656239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8656243">for</span>&nbsp;<span class="ident" id="8656247">x</span>&nbsp;<span class="op" id="8656249">:=</span>&nbsp;<span class="num" id="8656252">0</span><span class="op" id="8656253">;</span>&nbsp;<span class="ident" id="8656255">x</span>&nbsp;<span class="op" id="8656257">&lt;</span>&nbsp;<span class="num" id="8656259">16</span><span class="op" id="8656261">;</span>&nbsp;<span class="ident" id="8656263">x</span><span class="op" id="8656264">++</span>&nbsp;<span class="op" id="8656267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8656272">m</span><span class="op" id="8656273">.</span><span class="ident" id="8656274">Set</span><span class="op" id="8656277">(</span><span class="ident" id="8656278">x</span><span class="op" id="8656279">,</span>&nbsp;<span class="ident" id="8656281">y</span><span class="op" id="8656282">,</span>&nbsp;<span class="ident" id="8656284">color</span><span class="op" id="8656289">.</span><span class="ident" id="8656290">Alpha</span><span class="op" id="8656295">{</span><span class="builtintype" id="8656296">uint8</span><span class="op" id="8656301">(</span><span class="ident" id="8656302">y</span>&nbsp;<span class="op" id="8656304">*</span>&nbsp;<span class="ident" id="8656306">alpha</span>&nbsp;<span class="op" id="8656312">/</span>&nbsp;<span class="num" id="8656314">15</span><span class="op" id="8656316">)</span><span class="op" id="8656317">}</span><span class="op" id="8656318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656322">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8656328">return</span>&nbsp;<span class="ident" id="8656335">m</span><br>
<span class="lineno"></span><span class="op" id="8656337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8656340">func</span>&nbsp;<span class="ident" id="8656345">vgradGreenNRGBA</span><span class="op" id="8656360">(</span><span class="ident" id="8656361">alpha</span>&nbsp;<span class="builtintype" id="8656367">int</span><span class="op" id="8656370">)</span>&nbsp;<span class="ident" id="8656372">image</span><span class="op" id="8656377">.</span><span class="ident" id="8656378">Image</span>&nbsp;<span class="op" id="8656384">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8656387">m</span>&nbsp;<span class="op" id="8656389">:=</span>&nbsp;<span class="ident" id="8656392">image</span><span class="op" id="8656397">.</span><span class="ident" id="8656398">NewNRGBA</span><span class="op" id="8656406">(</span><span class="ident" id="8656407">image</span><span class="op" id="8656412">.</span><span class="ident" id="8656413">Rect</span><span class="op" id="8656417">(</span><span class="num" id="8656418">0</span><span class="op" id="8656419">,</span>&nbsp;<span class="num" id="8656421">0</span><span class="op" id="8656422">,</span>&nbsp;<span class="num" id="8656424">16</span><span class="op" id="8656426">,</span>&nbsp;<span class="num" id="8656428">16</span><span class="op" id="8656430">)</span><span class="op" id="8656431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8656434">for</span>&nbsp;<span class="ident" id="8656438">y</span>&nbsp;<span class="op" id="8656440">:=</span>&nbsp;<span class="num" id="8656443">0</span><span class="op" id="8656444">;</span>&nbsp;<span class="ident" id="8656446">y</span>&nbsp;<span class="op" id="8656448">&lt;</span>&nbsp;<span class="num" id="8656450">16</span><span class="op" id="8656452">;</span>&nbsp;<span class="ident" id="8656454">y</span><span class="op" id="8656455">++</span>&nbsp;<span class="op" id="8656458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8656462">for</span>&nbsp;<span class="ident" id="8656466">x</span>&nbsp;<span class="op" id="8656468">:=</span>&nbsp;<span class="num" id="8656471">0</span><span class="op" id="8656472">;</span>&nbsp;<span class="ident" id="8656474">x</span>&nbsp;<span class="op" id="8656476">&lt;</span>&nbsp;<span class="num" id="8656478">16</span><span class="op" id="8656480">;</span>&nbsp;<span class="ident" id="8656482">x</span><span class="op" id="8656483">++</span>&nbsp;<span class="op" id="8656486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8656491">m</span><span class="op" id="8656492">.</span><span class="ident" id="8656493">Set</span><span class="op" id="8656496">(</span><span class="ident" id="8656497">x</span><span class="op" id="8656498">,</span>&nbsp;<span class="ident" id="8656500">y</span><span class="op" id="8656501">,</span>&nbsp;<span class="ident" id="8656503">color</span><span class="op" id="8656508">.</span><span class="ident" id="8656509">RGBA</span><span class="op" id="8656513">{</span><span class="num" id="8656514">0</span><span class="op" id="8656515">,</span>&nbsp;<span class="builtintype" id="8656517">uint8</span><span class="op" id="8656522">(</span><span class="ident" id="8656523">y</span>&nbsp;<span class="op" id="8656525">*</span>&nbsp;<span class="num" id="8656527">0x11</span><span class="op" id="8656531">)</span><span class="op" id="8656532">,</span>&nbsp;<span class="num" id="8656534">0</span><span class="op" id="8656535">,</span>&nbsp;<span class="builtintype" id="8656537">uint8</span><span class="op" id="8656542">(</span><span class="ident" id="8656543">alpha</span><span class="op" id="8656548">)</span><span class="op" id="8656549">}</span><span class="op" id="8656550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656554">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8656560">return</span>&nbsp;<span class="ident" id="8656567">m</span><br>
<span class="lineno"></span><span class="op" id="8656569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8656572">func</span>&nbsp;<span class="ident" id="8656577">vgradCr</span><span class="op" id="8656584">(</span><span class="op" id="8656585">)</span>&nbsp;<span class="ident" id="8656587">image</span><span class="op" id="8656592">.</span><span class="ident" id="8656593">Image</span>&nbsp;<span class="op" id="8656599">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8656602">m</span>&nbsp;<span class="op" id="8656604">:=</span>&nbsp;<span class="op" id="8656607">&amp;</span><span class="ident" id="8656608">image</span><span class="op" id="8656613">.</span><span class="ident" id="8656614">YCbCr</span><span class="op" id="8656619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8656623">Y</span><span class="op" id="8656624">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8656639">make</span><span class="op" id="8656643">(</span><span class="op" id="8656644">[</span><span class="op" id="8656645">]</span><span class="builtintype" id="8656646">byte</span><span class="op" id="8656650">,</span>&nbsp;<span class="num" id="8656652">16</span><span class="op" id="8656654">*</span><span class="num" id="8656655">16</span><span class="op" id="8656657">)</span><span class="op" id="8656658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8656662">Cb</span><span class="op" id="8656664">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8656678">make</span><span class="op" id="8656682">(</span><span class="op" id="8656683">[</span><span class="op" id="8656684">]</span><span class="builtintype" id="8656685">byte</span><span class="op" id="8656689">,</span>&nbsp;<span class="num" id="8656691">16</span><span class="op" id="8656693">*</span><span class="num" id="8656694">16</span><span class="op" id="8656696">)</span><span class="op" id="8656697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8656701">Cr</span><span class="op" id="8656703">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8656717">make</span><span class="op" id="8656721">(</span><span class="op" id="8656722">[</span><span class="op" id="8656723">]</span><span class="builtintype" id="8656724">byte</span><span class="op" id="8656728">,</span>&nbsp;<span class="num" id="8656730">16</span><span class="op" id="8656732">*</span><span class="num" id="8656733">16</span><span class="op" id="8656735">)</span><span class="op" id="8656736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8656740">YStride</span><span class="op" id="8656747">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8656756">16</span><span class="op" id="8656758">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8656762">CStride</span><span class="op" id="8656769">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8656778">16</span><span class="op" id="8656780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8656784">SubsampleRatio</span><span class="op" id="8656798">:</span>&nbsp;<span class="ident" id="8656800">image</span><span class="op" id="8656805">.</span><span class="ident" id="8656806">YCbCrSubsampleRatio444</span><span class="op" id="8656828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8656832">Rect</span><span class="op" id="8656836">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8656848">image</span><span class="op" id="8656853">.</span><span class="ident" id="8656854">Rect</span><span class="op" id="8656858">(</span><span class="num" id="8656859">0</span><span class="op" id="8656860">,</span>&nbsp;<span class="num" id="8656862">0</span><span class="op" id="8656863">,</span>&nbsp;<span class="num" id="8656865">16</span><span class="op" id="8656867">,</span>&nbsp;<span class="num" id="8656869">16</span><span class="op" id="8656871">)</span><span class="op" id="8656872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8656878">for</span>&nbsp;<span class="ident" id="8656882">y</span>&nbsp;<span class="op" id="8656884">:=</span>&nbsp;<span class="num" id="8656887">0</span><span class="op" id="8656888">;</span>&nbsp;<span class="ident" id="8656890">y</span>&nbsp;<span class="op" id="8656892">&lt;</span>&nbsp;<span class="num" id="8656894">16</span><span class="op" id="8656896">;</span>&nbsp;<span class="ident" id="8656898">y</span><span class="op" id="8656899">++</span>&nbsp;<span class="op" id="8656902">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8656906">for</span>&nbsp;<span class="ident" id="8656910">x</span>&nbsp;<span class="op" id="8656912">:=</span>&nbsp;<span class="num" id="8656915">0</span><span class="op" id="8656916">;</span>&nbsp;<span class="ident" id="8656918">x</span>&nbsp;<span class="op" id="8656920">&lt;</span>&nbsp;<span class="num" id="8656922">16</span><span class="op" id="8656924">;</span>&nbsp;<span class="ident" id="8656926">x</span><span class="op" id="8656927">++</span>&nbsp;<span class="op" id="8656930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8656935">m</span><span class="op" id="8656936">.</span><span class="ident" id="8656937">Cr</span><span class="op" id="8656939">[</span><span class="ident" id="8656940">y</span><span class="op" id="8656941">*</span><span class="ident" id="8656942">m</span><span class="op" id="8656943">.</span><span class="ident" id="8656944">CStride</span><span class="op" id="8656951">+</span><span class="ident" id="8656952">x</span><span class="op" id="8656953">]</span>&nbsp;<span class="op" id="8656955">=</span>&nbsp;<span class="builtintype" id="8656957">uint8</span><span class="op" id="8656962">(</span><span class="ident" id="8656963">y</span>&nbsp;<span class="op" id="8656965">*</span>&nbsp;<span class="num" id="8656967">0x11</span><span class="op" id="8656971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8656981">return</span>&nbsp;<span class="ident" id="8656988">m</span><br>
<span class="lineno">75</span><span class="op" id="8656990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8656993">func</span>&nbsp;<span class="ident" id="8656998">hgradRed</span><span class="op" id="8657006">(</span><span class="ident" id="8657007">alpha</span>&nbsp;<span class="builtintype" id="8657013">int</span><span class="op" id="8657016">)</span>&nbsp;<span class="ident" id="8657018">Image</span>&nbsp;<span class="op" id="8657024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8657027">m</span>&nbsp;<span class="op" id="8657029">:=</span>&nbsp;<span class="ident" id="8657032">image</span><span class="op" id="8657037">.</span><span class="ident" id="8657038">NewRGBA</span><span class="op" id="8657045">(</span><span class="ident" id="8657046">image</span><span class="op" id="8657051">.</span><span class="ident" id="8657052">Rect</span><span class="op" id="8657056">(</span><span class="num" id="8657057">0</span><span class="op" id="8657058">,</span>&nbsp;<span class="num" id="8657060">0</span><span class="op" id="8657061">,</span>&nbsp;<span class="num" id="8657063">16</span><span class="op" id="8657065">,</span>&nbsp;<span class="num" id="8657067">16</span><span class="op" id="8657069">)</span><span class="op" id="8657070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8657073">for</span>&nbsp;<span class="ident" id="8657077">y</span>&nbsp;<span class="op" id="8657079">:=</span>&nbsp;<span class="num" id="8657082">0</span><span class="op" id="8657083">;</span>&nbsp;<span class="ident" id="8657085">y</span>&nbsp;<span class="op" id="8657087">&lt;</span>&nbsp;<span class="num" id="8657089">16</span><span class="op" id="8657091">;</span>&nbsp;<span class="ident" id="8657093">y</span><span class="op" id="8657094">++</span>&nbsp;<span class="op" id="8657097">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8657101">for</span>&nbsp;<span class="ident" id="8657105">x</span>&nbsp;<span class="op" id="8657107">:=</span>&nbsp;<span class="num" id="8657110">0</span><span class="op" id="8657111">;</span>&nbsp;<span class="ident" id="8657113">x</span>&nbsp;<span class="op" id="8657115">&lt;</span>&nbsp;<span class="num" id="8657117">16</span><span class="op" id="8657119">;</span>&nbsp;<span class="ident" id="8657121">x</span><span class="op" id="8657122">++</span>&nbsp;<span class="op" id="8657125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8657130">m</span><span class="op" id="8657131">.</span><span class="ident" id="8657132">Set</span><span class="op" id="8657135">(</span><span class="ident" id="8657136">x</span><span class="op" id="8657137">,</span>&nbsp;<span class="ident" id="8657139">y</span><span class="op" id="8657140">,</span>&nbsp;<span class="ident" id="8657142">color</span><span class="op" id="8657147">.</span><span class="ident" id="8657148">RGBA</span><span class="op" id="8657152">{</span><span class="builtintype" id="8657153">uint8</span><span class="op" id="8657158">(</span><span class="ident" id="8657159">x</span>&nbsp;<span class="op" id="8657161">*</span>&nbsp;<span class="ident" id="8657163">alpha</span>&nbsp;<span class="op" id="8657169">/</span>&nbsp;<span class="num" id="8657171">15</span><span class="op" id="8657173">)</span><span class="op" id="8657174">,</span>&nbsp;<span class="num" id="8657176">0</span><span class="op" id="8657177">,</span>&nbsp;<span class="num" id="8657179">0</span><span class="op" id="8657180">,</span>&nbsp;<span class="builtintype" id="8657182">uint8</span><span class="op" id="8657187">(</span><span class="ident" id="8657188">alpha</span><span class="op" id="8657193">)</span><span class="op" id="8657194">}</span><span class="op" id="8657195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8657205">return</span>&nbsp;<span class="ident" id="8657212">m</span><br>
<span class="lineno">85</span><span class="op" id="8657214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8657217">func</span>&nbsp;<span class="ident" id="8657222">gradYellow</span><span class="op" id="8657232">(</span><span class="ident" id="8657233">alpha</span>&nbsp;<span class="builtintype" id="8657239">int</span><span class="op" id="8657242">)</span>&nbsp;<span class="ident" id="8657244">Image</span>&nbsp;<span class="op" id="8657250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8657253">m</span>&nbsp;<span class="op" id="8657255">:=</span>&nbsp;<span class="ident" id="8657258">image</span><span class="op" id="8657263">.</span><span class="ident" id="8657264">NewRGBA</span><span class="op" id="8657271">(</span><span class="ident" id="8657272">image</span><span class="op" id="8657277">.</span><span class="ident" id="8657278">Rect</span><span class="op" id="8657282">(</span><span class="num" id="8657283">0</span><span class="op" id="8657284">,</span>&nbsp;<span class="num" id="8657286">0</span><span class="op" id="8657287">,</span>&nbsp;<span class="num" id="8657289">16</span><span class="op" id="8657291">,</span>&nbsp;<span class="num" id="8657293">16</span><span class="op" id="8657295">)</span><span class="op" id="8657296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8657299">for</span>&nbsp;<span class="ident" id="8657303">y</span>&nbsp;<span class="op" id="8657305">:=</span>&nbsp;<span class="num" id="8657308">0</span><span class="op" id="8657309">;</span>&nbsp;<span class="ident" id="8657311">y</span>&nbsp;<span class="op" id="8657313">&lt;</span>&nbsp;<span class="num" id="8657315">16</span><span class="op" id="8657317">;</span>&nbsp;<span class="ident" id="8657319">y</span><span class="op" id="8657320">++</span>&nbsp;<span class="op" id="8657323">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8657327">for</span>&nbsp;<span class="ident" id="8657331">x</span>&nbsp;<span class="op" id="8657333">:=</span>&nbsp;<span class="num" id="8657336">0</span><span class="op" id="8657337">;</span>&nbsp;<span class="ident" id="8657339">x</span>&nbsp;<span class="op" id="8657341">&lt;</span>&nbsp;<span class="num" id="8657343">16</span><span class="op" id="8657345">;</span>&nbsp;<span class="ident" id="8657347">x</span><span class="op" id="8657348">++</span>&nbsp;<span class="op" id="8657351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8657356">m</span><span class="op" id="8657357">.</span><span class="ident" id="8657358">Set</span><span class="op" id="8657361">(</span><span class="ident" id="8657362">x</span><span class="op" id="8657363">,</span>&nbsp;<span class="ident" id="8657365">y</span><span class="op" id="8657366">,</span>&nbsp;<span class="ident" id="8657368">color</span><span class="op" id="8657373">.</span><span class="ident" id="8657374">RGBA</span><span class="op" id="8657378">{</span><span class="builtintype" id="8657379">uint8</span><span class="op" id="8657384">(</span><span class="ident" id="8657385">x</span>&nbsp;<span class="op" id="8657387">*</span>&nbsp;<span class="ident" id="8657389">alpha</span>&nbsp;<span class="op" id="8657395">/</span>&nbsp;<span class="num" id="8657397">15</span><span class="op" id="8657399">)</span><span class="op" id="8657400">,</span>&nbsp;<span class="builtintype" id="8657402">uint8</span><span class="op" id="8657407">(</span><span class="ident" id="8657408">y</span>&nbsp;<span class="op" id="8657410">*</span>&nbsp;<span class="ident" id="8657412">alpha</span>&nbsp;<span class="op" id="8657418">/</span>&nbsp;<span class="num" id="8657420">15</span><span class="op" id="8657422">)</span><span class="op" id="8657423">,</span>&nbsp;<span class="num" id="8657425">0</span><span class="op" id="8657426">,</span>&nbsp;<span class="builtintype" id="8657428">uint8</span><span class="op" id="8657433">(</span><span class="ident" id="8657434">alpha</span><span class="op" id="8657439">)</span><span class="op" id="8657440">}</span><span class="op" id="8657441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8657451">return</span>&nbsp;<span class="ident" id="8657458">m</span><br>
<span class="lineno">95</span><span class="op" id="8657460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8657463">type</span>&nbsp;<span class="ident" id="8657468">drawTest</span>&nbsp;<span class="keyword" id="8657477">struct</span>&nbsp;<span class="op" id="8657484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8657487">desc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8657496">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8657504">src</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8657513">image</span><span class="op" id="8657518">.</span><span class="ident" id="8657519">Image</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8657526">mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8657535">image</span><span class="op" id="8657540">.</span><span class="ident" id="8657541">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8657548">op</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8657557">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8657561">expected</span>&nbsp;<span class="ident" id="8657570">color</span><span class="op" id="8657575">.</span><span class="ident" id="8657576">Color</span><br>
<span class="lineno"></span><span class="op" id="8657582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="8657585">var</span>&nbsp;<span class="ident" id="8657589">drawTests</span>&nbsp;<span class="op" id="8657599">=</span>&nbsp;<span class="op" id="8657601">[</span><span class="op" id="8657602">]</span><span class="ident" id="8657603">drawTest</span><span class="op" id="8657611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8657614">//&nbsp;Uniform&nbsp;mask&nbsp;(0%&nbsp;opaque).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657644">{</span><span class="string" id="8657645">&#34;nop&#34;</span><span class="op" id="8657650">,</span>&nbsp;<span class="ident" id="8657652">vgradGreen</span><span class="op" id="8657662">(</span><span class="num" id="8657663">255</span><span class="op" id="8657666">)</span><span class="op" id="8657667">,</span>&nbsp;<span class="ident" id="8657669">fillAlpha</span><span class="op" id="8657678">(</span><span class="num" id="8657679">0</span><span class="op" id="8657680">)</span><span class="op" id="8657681">,</span>&nbsp;<span class="ident" id="8657683">Over</span><span class="op" id="8657687">,</span>&nbsp;<span class="ident" id="8657689">color</span><span class="op" id="8657694">.</span><span class="ident" id="8657695">RGBA</span><span class="op" id="8657699">{</span><span class="num" id="8657700">136</span><span class="op" id="8657703">,</span>&nbsp;<span class="num" id="8657705">0</span><span class="op" id="8657706">,</span>&nbsp;<span class="num" id="8657708">0</span><span class="op" id="8657709">,</span>&nbsp;<span class="num" id="8657711">255</span><span class="op" id="8657714">}</span><span class="op" id="8657715">}</span><span class="op" id="8657716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657719">{</span><span class="string" id="8657720">&#34;clear&#34;</span><span class="op" id="8657727">,</span>&nbsp;<span class="ident" id="8657729">vgradGreen</span><span class="op" id="8657739">(</span><span class="num" id="8657740">255</span><span class="op" id="8657743">)</span><span class="op" id="8657744">,</span>&nbsp;<span class="ident" id="8657746">fillAlpha</span><span class="op" id="8657755">(</span><span class="num" id="8657756">0</span><span class="op" id="8657757">)</span><span class="op" id="8657758">,</span>&nbsp;<span class="ident" id="8657760">Src</span><span class="op" id="8657763">,</span>&nbsp;<span class="ident" id="8657765">color</span><span class="op" id="8657770">.</span><span class="ident" id="8657771">RGBA</span><span class="op" id="8657775">{</span><span class="num" id="8657776">0</span><span class="op" id="8657777">,</span>&nbsp;<span class="num" id="8657779">0</span><span class="op" id="8657780">,</span>&nbsp;<span class="num" id="8657782">0</span><span class="op" id="8657783">,</span>&nbsp;<span class="num" id="8657785">0</span><span class="op" id="8657786">}</span><span class="op" id="8657787">}</span><span class="op" id="8657788">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8657791">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;uniform&nbsp;source.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8657845">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8657870">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8657917">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;90,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657957">{</span><span class="string" id="8657958">&#34;fill&#34;</span><span class="op" id="8657964">,</span>&nbsp;<span class="ident" id="8657966">fillBlue</span><span class="op" id="8657974">(</span><span class="num" id="8657975">90</span><span class="op" id="8657977">)</span><span class="op" id="8657978">,</span>&nbsp;<span class="ident" id="8657980">fillAlpha</span><span class="op" id="8657989">(</span><span class="num" id="8657990">255</span><span class="op" id="8657993">)</span><span class="op" id="8657994">,</span>&nbsp;<span class="ident" id="8657996">Over</span><span class="op" id="8658000">,</span>&nbsp;<span class="ident" id="8658002">color</span><span class="op" id="8658007">.</span><span class="ident" id="8658008">RGBA</span><span class="op" id="8658012">{</span><span class="num" id="8658013">88</span><span class="op" id="8658015">,</span>&nbsp;<span class="num" id="8658017">0</span><span class="op" id="8658018">,</span>&nbsp;<span class="num" id="8658020">90</span><span class="op" id="8658022">,</span>&nbsp;<span class="num" id="8658024">255</span><span class="op" id="8658027">}</span><span class="op" id="8658028">}</span><span class="op" id="8658029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658032">{</span><span class="string" id="8658033">&#34;fillSrc&#34;</span><span class="op" id="8658042">,</span>&nbsp;<span class="ident" id="8658044">fillBlue</span><span class="op" id="8658052">(</span><span class="num" id="8658053">90</span><span class="op" id="8658055">)</span><span class="op" id="8658056">,</span>&nbsp;<span class="ident" id="8658058">fillAlpha</span><span class="op" id="8658067">(</span><span class="num" id="8658068">255</span><span class="op" id="8658071">)</span><span class="op" id="8658072">,</span>&nbsp;<span class="ident" id="8658074">Src</span><span class="op" id="8658077">,</span>&nbsp;<span class="ident" id="8658079">color</span><span class="op" id="8658084">.</span><span class="ident" id="8658085">RGBA</span><span class="op" id="8658089">{</span><span class="num" id="8658090">0</span><span class="op" id="8658091">,</span>&nbsp;<span class="num" id="8658093">0</span><span class="op" id="8658094">,</span>&nbsp;<span class="num" id="8658096">90</span><span class="op" id="8658098">,</span>&nbsp;<span class="num" id="8658100">90</span><span class="op" id="8658102">}</span><span class="op" id="8658103">}</span><span class="op" id="8658104">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658107">{</span><span class="string" id="8658108">&#34;fillAlpha&#34;</span><span class="op" id="8658119">,</span>&nbsp;<span class="ident" id="8658121">fillBlue</span><span class="op" id="8658129">(</span><span class="num" id="8658130">90</span><span class="op" id="8658132">)</span><span class="op" id="8658133">,</span>&nbsp;<span class="ident" id="8658135">fillAlpha</span><span class="op" id="8658144">(</span><span class="num" id="8658145">192</span><span class="op" id="8658148">)</span><span class="op" id="8658149">,</span>&nbsp;<span class="ident" id="8658151">Over</span><span class="op" id="8658155">,</span>&nbsp;<span class="ident" id="8658157">color</span><span class="op" id="8658162">.</span><span class="ident" id="8658163">RGBA</span><span class="op" id="8658167">{</span><span class="num" id="8658168">100</span><span class="op" id="8658171">,</span>&nbsp;<span class="num" id="8658173">0</span><span class="op" id="8658174">,</span>&nbsp;<span class="num" id="8658176">68</span><span class="op" id="8658178">,</span>&nbsp;<span class="num" id="8658180">255</span><span class="op" id="8658183">}</span><span class="op" id="8658184">}</span><span class="op" id="8658185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658188">{</span><span class="string" id="8658189">&#34;fillAlphaSrc&#34;</span><span class="op" id="8658203">,</span>&nbsp;<span class="ident" id="8658205">fillBlue</span><span class="op" id="8658213">(</span><span class="num" id="8658214">90</span><span class="op" id="8658216">)</span><span class="op" id="8658217">,</span>&nbsp;<span class="ident" id="8658219">fillAlpha</span><span class="op" id="8658228">(</span><span class="num" id="8658229">192</span><span class="op" id="8658232">)</span><span class="op" id="8658233">,</span>&nbsp;<span class="ident" id="8658235">Src</span><span class="op" id="8658238">,</span>&nbsp;<span class="ident" id="8658240">color</span><span class="op" id="8658245">.</span><span class="ident" id="8658246">RGBA</span><span class="op" id="8658250">{</span><span class="num" id="8658251">0</span><span class="op" id="8658252">,</span>&nbsp;<span class="num" id="8658254">0</span><span class="op" id="8658255">,</span>&nbsp;<span class="num" id="8658257">68</span><span class="op" id="8658259">,</span>&nbsp;<span class="num" id="8658261">68</span><span class="op" id="8658263">}</span><span class="op" id="8658264">}</span><span class="op" id="8658265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658268">{</span><span class="string" id="8658269">&#34;fillNil&#34;</span><span class="op" id="8658278">,</span>&nbsp;<span class="ident" id="8658280">fillBlue</span><span class="op" id="8658288">(</span><span class="num" id="8658289">90</span><span class="op" id="8658291">)</span><span class="op" id="8658292">,</span>&nbsp;<span class="ident" id="8658294">nil</span><span class="op" id="8658297">,</span>&nbsp;<span class="ident" id="8658299">Over</span><span class="op" id="8658303">,</span>&nbsp;<span class="ident" id="8658305">color</span><span class="op" id="8658310">.</span><span class="ident" id="8658311">RGBA</span><span class="op" id="8658315">{</span><span class="num" id="8658316">88</span><span class="op" id="8658318">,</span>&nbsp;<span class="num" id="8658320">0</span><span class="op" id="8658321">,</span>&nbsp;<span class="num" id="8658323">90</span><span class="op" id="8658325">,</span>&nbsp;<span class="num" id="8658327">255</span><span class="op" id="8658330">}</span><span class="op" id="8658331">}</span><span class="op" id="8658332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658335">{</span><span class="string" id="8658336">&#34;fillNilSrc&#34;</span><span class="op" id="8658348">,</span>&nbsp;<span class="ident" id="8658350">fillBlue</span><span class="op" id="8658358">(</span><span class="num" id="8658359">90</span><span class="op" id="8658361">)</span><span class="op" id="8658362">,</span>&nbsp;<span class="ident" id="8658364">nil</span><span class="op" id="8658367">,</span>&nbsp;<span class="ident" id="8658369">Src</span><span class="op" id="8658372">,</span>&nbsp;<span class="ident" id="8658374">color</span><span class="op" id="8658379">.</span><span class="ident" id="8658380">RGBA</span><span class="op" id="8658384">{</span><span class="num" id="8658385">0</span><span class="op" id="8658386">,</span>&nbsp;<span class="num" id="8658388">0</span><span class="op" id="8658389">,</span>&nbsp;<span class="num" id="8658391">90</span><span class="op" id="8658393">,</span>&nbsp;<span class="num" id="8658395">90</span><span class="op" id="8658397">}</span><span class="op" id="8658398">}</span><span class="op" id="8658399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8658402">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8658457">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8658482">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8658529">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658569">{</span><span class="string" id="8658570">&#34;copy&#34;</span><span class="op" id="8658576">,</span>&nbsp;<span class="ident" id="8658578">vgradGreen</span><span class="op" id="8658588">(</span><span class="num" id="8658589">90</span><span class="op" id="8658591">)</span><span class="op" id="8658592">,</span>&nbsp;<span class="ident" id="8658594">fillAlpha</span><span class="op" id="8658603">(</span><span class="num" id="8658604">255</span><span class="op" id="8658607">)</span><span class="op" id="8658608">,</span>&nbsp;<span class="ident" id="8658610">Over</span><span class="op" id="8658614">,</span>&nbsp;<span class="ident" id="8658616">color</span><span class="op" id="8658621">.</span><span class="ident" id="8658622">RGBA</span><span class="op" id="8658626">{</span><span class="num" id="8658627">88</span><span class="op" id="8658629">,</span>&nbsp;<span class="num" id="8658631">48</span><span class="op" id="8658633">,</span>&nbsp;<span class="num" id="8658635">0</span><span class="op" id="8658636">,</span>&nbsp;<span class="num" id="8658638">255</span><span class="op" id="8658641">}</span><span class="op" id="8658642">}</span><span class="op" id="8658643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658646">{</span><span class="string" id="8658647">&#34;copySrc&#34;</span><span class="op" id="8658656">,</span>&nbsp;<span class="ident" id="8658658">vgradGreen</span><span class="op" id="8658668">(</span><span class="num" id="8658669">90</span><span class="op" id="8658671">)</span><span class="op" id="8658672">,</span>&nbsp;<span class="ident" id="8658674">fillAlpha</span><span class="op" id="8658683">(</span><span class="num" id="8658684">255</span><span class="op" id="8658687">)</span><span class="op" id="8658688">,</span>&nbsp;<span class="ident" id="8658690">Src</span><span class="op" id="8658693">,</span>&nbsp;<span class="ident" id="8658695">color</span><span class="op" id="8658700">.</span><span class="ident" id="8658701">RGBA</span><span class="op" id="8658705">{</span><span class="num" id="8658706">0</span><span class="op" id="8658707">,</span>&nbsp;<span class="num" id="8658709">48</span><span class="op" id="8658711">,</span>&nbsp;<span class="num" id="8658713">0</span><span class="op" id="8658714">,</span>&nbsp;<span class="num" id="8658716">90</span><span class="op" id="8658718">}</span><span class="op" id="8658719">}</span><span class="op" id="8658720">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658723">{</span><span class="string" id="8658724">&#34;copyAlpha&#34;</span><span class="op" id="8658735">,</span>&nbsp;<span class="ident" id="8658737">vgradGreen</span><span class="op" id="8658747">(</span><span class="num" id="8658748">90</span><span class="op" id="8658750">)</span><span class="op" id="8658751">,</span>&nbsp;<span class="ident" id="8658753">fillAlpha</span><span class="op" id="8658762">(</span><span class="num" id="8658763">192</span><span class="op" id="8658766">)</span><span class="op" id="8658767">,</span>&nbsp;<span class="ident" id="8658769">Over</span><span class="op" id="8658773">,</span>&nbsp;<span class="ident" id="8658775">color</span><span class="op" id="8658780">.</span><span class="ident" id="8658781">RGBA</span><span class="op" id="8658785">{</span><span class="num" id="8658786">100</span><span class="op" id="8658789">,</span>&nbsp;<span class="num" id="8658791">36</span><span class="op" id="8658793">,</span>&nbsp;<span class="num" id="8658795">0</span><span class="op" id="8658796">,</span>&nbsp;<span class="num" id="8658798">255</span><span class="op" id="8658801">}</span><span class="op" id="8658802">}</span><span class="op" id="8658803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658806">{</span><span class="string" id="8658807">&#34;copyAlphaSrc&#34;</span><span class="op" id="8658821">,</span>&nbsp;<span class="ident" id="8658823">vgradGreen</span><span class="op" id="8658833">(</span><span class="num" id="8658834">90</span><span class="op" id="8658836">)</span><span class="op" id="8658837">,</span>&nbsp;<span class="ident" id="8658839">fillAlpha</span><span class="op" id="8658848">(</span><span class="num" id="8658849">192</span><span class="op" id="8658852">)</span><span class="op" id="8658853">,</span>&nbsp;<span class="ident" id="8658855">Src</span><span class="op" id="8658858">,</span>&nbsp;<span class="ident" id="8658860">color</span><span class="op" id="8658865">.</span><span class="ident" id="8658866">RGBA</span><span class="op" id="8658870">{</span><span class="num" id="8658871">0</span><span class="op" id="8658872">,</span>&nbsp;<span class="num" id="8658874">36</span><span class="op" id="8658876">,</span>&nbsp;<span class="num" id="8658878">0</span><span class="op" id="8658879">,</span>&nbsp;<span class="num" id="8658881">68</span><span class="op" id="8658883">}</span><span class="op" id="8658884">}</span><span class="op" id="8658885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658888">{</span><span class="string" id="8658889">&#34;copyNil&#34;</span><span class="op" id="8658898">,</span>&nbsp;<span class="ident" id="8658900">vgradGreen</span><span class="op" id="8658910">(</span><span class="num" id="8658911">90</span><span class="op" id="8658913">)</span><span class="op" id="8658914">,</span>&nbsp;<span class="ident" id="8658916">nil</span><span class="op" id="8658919">,</span>&nbsp;<span class="ident" id="8658921">Over</span><span class="op" id="8658925">,</span>&nbsp;<span class="ident" id="8658927">color</span><span class="op" id="8658932">.</span><span class="ident" id="8658933">RGBA</span><span class="op" id="8658937">{</span><span class="num" id="8658938">88</span><span class="op" id="8658940">,</span>&nbsp;<span class="num" id="8658942">48</span><span class="op" id="8658944">,</span>&nbsp;<span class="num" id="8658946">0</span><span class="op" id="8658947">,</span>&nbsp;<span class="num" id="8658949">255</span><span class="op" id="8658952">}</span><span class="op" id="8658953">}</span><span class="op" id="8658954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658957">{</span><span class="string" id="8658958">&#34;copyNilSrc&#34;</span><span class="op" id="8658970">,</span>&nbsp;<span class="ident" id="8658972">vgradGreen</span><span class="op" id="8658982">(</span><span class="num" id="8658983">90</span><span class="op" id="8658985">)</span><span class="op" id="8658986">,</span>&nbsp;<span class="ident" id="8658988">nil</span><span class="op" id="8658991">,</span>&nbsp;<span class="ident" id="8658993">Src</span><span class="op" id="8658996">,</span>&nbsp;<span class="ident" id="8658998">color</span><span class="op" id="8659003">.</span><span class="ident" id="8659004">RGBA</span><span class="op" id="8659008">{</span><span class="num" id="8659009">0</span><span class="op" id="8659010">,</span>&nbsp;<span class="num" id="8659012">48</span><span class="op" id="8659014">,</span>&nbsp;<span class="num" id="8659016">0</span><span class="op" id="8659017">,</span>&nbsp;<span class="num" id="8659019">90</span><span class="op" id="8659021">}</span><span class="op" id="8659022">}</span><span class="op" id="8659023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8659026">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;NRGBA&nbsp;source.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8659087">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8659112">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8659159">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;136,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;NRGBA-space,&nbsp;which&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;RGBA-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8659254">//&nbsp;The&nbsp;result&nbsp;pixel&nbsp;is&nbsp;different&nbsp;than&nbsp;in&nbsp;the&nbsp;&#34;copy*&#34;&nbsp;test&nbsp;cases&nbsp;because&nbsp;of&nbsp;rounding&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659347">{</span><span class="string" id="8659348">&#34;nrgba&#34;</span><span class="op" id="8659355">,</span>&nbsp;<span class="ident" id="8659357">vgradGreenNRGBA</span><span class="op" id="8659372">(</span><span class="num" id="8659373">90</span><span class="op" id="8659375">)</span><span class="op" id="8659376">,</span>&nbsp;<span class="ident" id="8659378">fillAlpha</span><span class="op" id="8659387">(</span><span class="num" id="8659388">255</span><span class="op" id="8659391">)</span><span class="op" id="8659392">,</span>&nbsp;<span class="ident" id="8659394">Over</span><span class="op" id="8659398">,</span>&nbsp;<span class="ident" id="8659400">color</span><span class="op" id="8659405">.</span><span class="ident" id="8659406">RGBA</span><span class="op" id="8659410">{</span><span class="num" id="8659411">88</span><span class="op" id="8659413">,</span>&nbsp;<span class="num" id="8659415">46</span><span class="op" id="8659417">,</span>&nbsp;<span class="num" id="8659419">0</span><span class="op" id="8659420">,</span>&nbsp;<span class="num" id="8659422">255</span><span class="op" id="8659425">}</span><span class="op" id="8659426">}</span><span class="op" id="8659427">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659430">{</span><span class="string" id="8659431">&#34;nrgbaSrc&#34;</span><span class="op" id="8659441">,</span>&nbsp;<span class="ident" id="8659443">vgradGreenNRGBA</span><span class="op" id="8659458">(</span><span class="num" id="8659459">90</span><span class="op" id="8659461">)</span><span class="op" id="8659462">,</span>&nbsp;<span class="ident" id="8659464">fillAlpha</span><span class="op" id="8659473">(</span><span class="num" id="8659474">255</span><span class="op" id="8659477">)</span><span class="op" id="8659478">,</span>&nbsp;<span class="ident" id="8659480">Src</span><span class="op" id="8659483">,</span>&nbsp;<span class="ident" id="8659485">color</span><span class="op" id="8659490">.</span><span class="ident" id="8659491">RGBA</span><span class="op" id="8659495">{</span><span class="num" id="8659496">0</span><span class="op" id="8659497">,</span>&nbsp;<span class="num" id="8659499">46</span><span class="op" id="8659501">,</span>&nbsp;<span class="num" id="8659503">0</span><span class="op" id="8659504">,</span>&nbsp;<span class="num" id="8659506">90</span><span class="op" id="8659508">}</span><span class="op" id="8659509">}</span><span class="op" id="8659510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659513">{</span><span class="string" id="8659514">&#34;nrgbaAlpha&#34;</span><span class="op" id="8659526">,</span>&nbsp;<span class="ident" id="8659528">vgradGreenNRGBA</span><span class="op" id="8659543">(</span><span class="num" id="8659544">90</span><span class="op" id="8659546">)</span><span class="op" id="8659547">,</span>&nbsp;<span class="ident" id="8659549">fillAlpha</span><span class="op" id="8659558">(</span><span class="num" id="8659559">192</span><span class="op" id="8659562">)</span><span class="op" id="8659563">,</span>&nbsp;<span class="ident" id="8659565">Over</span><span class="op" id="8659569">,</span>&nbsp;<span class="ident" id="8659571">color</span><span class="op" id="8659576">.</span><span class="ident" id="8659577">RGBA</span><span class="op" id="8659581">{</span><span class="num" id="8659582">100</span><span class="op" id="8659585">,</span>&nbsp;<span class="num" id="8659587">34</span><span class="op" id="8659589">,</span>&nbsp;<span class="num" id="8659591">0</span><span class="op" id="8659592">,</span>&nbsp;<span class="num" id="8659594">255</span><span class="op" id="8659597">}</span><span class="op" id="8659598">}</span><span class="op" id="8659599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659602">{</span><span class="string" id="8659603">&#34;nrgbaAlphaSrc&#34;</span><span class="op" id="8659618">,</span>&nbsp;<span class="ident" id="8659620">vgradGreenNRGBA</span><span class="op" id="8659635">(</span><span class="num" id="8659636">90</span><span class="op" id="8659638">)</span><span class="op" id="8659639">,</span>&nbsp;<span class="ident" id="8659641">fillAlpha</span><span class="op" id="8659650">(</span><span class="num" id="8659651">192</span><span class="op" id="8659654">)</span><span class="op" id="8659655">,</span>&nbsp;<span class="ident" id="8659657">Src</span><span class="op" id="8659660">,</span>&nbsp;<span class="ident" id="8659662">color</span><span class="op" id="8659667">.</span><span class="ident" id="8659668">RGBA</span><span class="op" id="8659672">{</span><span class="num" id="8659673">0</span><span class="op" id="8659674">,</span>&nbsp;<span class="num" id="8659676">34</span><span class="op" id="8659678">,</span>&nbsp;<span class="num" id="8659680">0</span><span class="op" id="8659681">,</span>&nbsp;<span class="num" id="8659683">68</span><span class="op" id="8659685">}</span><span class="op" id="8659686">}</span><span class="op" id="8659687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659690">{</span><span class="string" id="8659691">&#34;nrgbaNil&#34;</span><span class="op" id="8659701">,</span>&nbsp;<span class="ident" id="8659703">vgradGreenNRGBA</span><span class="op" id="8659718">(</span><span class="num" id="8659719">90</span><span class="op" id="8659721">)</span><span class="op" id="8659722">,</span>&nbsp;<span class="ident" id="8659724">nil</span><span class="op" id="8659727">,</span>&nbsp;<span class="ident" id="8659729">Over</span><span class="op" id="8659733">,</span>&nbsp;<span class="ident" id="8659735">color</span><span class="op" id="8659740">.</span><span class="ident" id="8659741">RGBA</span><span class="op" id="8659745">{</span><span class="num" id="8659746">88</span><span class="op" id="8659748">,</span>&nbsp;<span class="num" id="8659750">46</span><span class="op" id="8659752">,</span>&nbsp;<span class="num" id="8659754">0</span><span class="op" id="8659755">,</span>&nbsp;<span class="num" id="8659757">255</span><span class="op" id="8659760">}</span><span class="op" id="8659761">}</span><span class="op" id="8659762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659765">{</span><span class="string" id="8659766">&#34;nrgbaNilSrc&#34;</span><span class="op" id="8659779">,</span>&nbsp;<span class="ident" id="8659781">vgradGreenNRGBA</span><span class="op" id="8659796">(</span><span class="num" id="8659797">90</span><span class="op" id="8659799">)</span><span class="op" id="8659800">,</span>&nbsp;<span class="ident" id="8659802">nil</span><span class="op" id="8659805">,</span>&nbsp;<span class="ident" id="8659807">Src</span><span class="op" id="8659810">,</span>&nbsp;<span class="ident" id="8659812">color</span><span class="op" id="8659817">.</span><span class="ident" id="8659818">RGBA</span><span class="op" id="8659822">{</span><span class="num" id="8659823">0</span><span class="op" id="8659824">,</span>&nbsp;<span class="num" id="8659826">46</span><span class="op" id="8659828">,</span>&nbsp;<span class="num" id="8659830">0</span><span class="op" id="8659831">,</span>&nbsp;<span class="num" id="8659833">90</span><span class="op" id="8659835">}</span><span class="op" id="8659836">}</span><span class="op" id="8659837">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8659840">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;YCbCr&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8659901">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8659926">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8659973">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;136}&nbsp;in&nbsp;YCbCr-space,&nbsp;which&nbsp;is&nbsp;{11,&nbsp;38,&nbsp;0,&nbsp;255}&nbsp;in&nbsp;RGB-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660065">{</span><span class="string" id="8660066">&#34;ycbcr&#34;</span><span class="op" id="8660073">,</span>&nbsp;<span class="ident" id="8660075">vgradCr</span><span class="op" id="8660082">(</span><span class="op" id="8660083">)</span><span class="op" id="8660084">,</span>&nbsp;<span class="ident" id="8660086">fillAlpha</span><span class="op" id="8660095">(</span><span class="num" id="8660096">255</span><span class="op" id="8660099">)</span><span class="op" id="8660100">,</span>&nbsp;<span class="ident" id="8660102">Over</span><span class="op" id="8660106">,</span>&nbsp;<span class="ident" id="8660108">color</span><span class="op" id="8660113">.</span><span class="ident" id="8660114">RGBA</span><span class="op" id="8660118">{</span><span class="num" id="8660119">11</span><span class="op" id="8660121">,</span>&nbsp;<span class="num" id="8660123">38</span><span class="op" id="8660125">,</span>&nbsp;<span class="num" id="8660127">0</span><span class="op" id="8660128">,</span>&nbsp;<span class="num" id="8660130">255</span><span class="op" id="8660133">}</span><span class="op" id="8660134">}</span><span class="op" id="8660135">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660138">{</span><span class="string" id="8660139">&#34;ycbcrSrc&#34;</span><span class="op" id="8660149">,</span>&nbsp;<span class="ident" id="8660151">vgradCr</span><span class="op" id="8660158">(</span><span class="op" id="8660159">)</span><span class="op" id="8660160">,</span>&nbsp;<span class="ident" id="8660162">fillAlpha</span><span class="op" id="8660171">(</span><span class="num" id="8660172">255</span><span class="op" id="8660175">)</span><span class="op" id="8660176">,</span>&nbsp;<span class="ident" id="8660178">Src</span><span class="op" id="8660181">,</span>&nbsp;<span class="ident" id="8660183">color</span><span class="op" id="8660188">.</span><span class="ident" id="8660189">RGBA</span><span class="op" id="8660193">{</span><span class="num" id="8660194">11</span><span class="op" id="8660196">,</span>&nbsp;<span class="num" id="8660198">38</span><span class="op" id="8660200">,</span>&nbsp;<span class="num" id="8660202">0</span><span class="op" id="8660203">,</span>&nbsp;<span class="num" id="8660205">255</span><span class="op" id="8660208">}</span><span class="op" id="8660209">}</span><span class="op" id="8660210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660213">{</span><span class="string" id="8660214">&#34;ycbcrAlpha&#34;</span><span class="op" id="8660226">,</span>&nbsp;<span class="ident" id="8660228">vgradCr</span><span class="op" id="8660235">(</span><span class="op" id="8660236">)</span><span class="op" id="8660237">,</span>&nbsp;<span class="ident" id="8660239">fillAlpha</span><span class="op" id="8660248">(</span><span class="num" id="8660249">192</span><span class="op" id="8660252">)</span><span class="op" id="8660253">,</span>&nbsp;<span class="ident" id="8660255">Over</span><span class="op" id="8660259">,</span>&nbsp;<span class="ident" id="8660261">color</span><span class="op" id="8660266">.</span><span class="ident" id="8660267">RGBA</span><span class="op" id="8660271">{</span><span class="num" id="8660272">42</span><span class="op" id="8660274">,</span>&nbsp;<span class="num" id="8660276">28</span><span class="op" id="8660278">,</span>&nbsp;<span class="num" id="8660280">0</span><span class="op" id="8660281">,</span>&nbsp;<span class="num" id="8660283">255</span><span class="op" id="8660286">}</span><span class="op" id="8660287">}</span><span class="op" id="8660288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660291">{</span><span class="string" id="8660292">&#34;ycbcrAlphaSrc&#34;</span><span class="op" id="8660307">,</span>&nbsp;<span class="ident" id="8660309">vgradCr</span><span class="op" id="8660316">(</span><span class="op" id="8660317">)</span><span class="op" id="8660318">,</span>&nbsp;<span class="ident" id="8660320">fillAlpha</span><span class="op" id="8660329">(</span><span class="num" id="8660330">192</span><span class="op" id="8660333">)</span><span class="op" id="8660334">,</span>&nbsp;<span class="ident" id="8660336">Src</span><span class="op" id="8660339">,</span>&nbsp;<span class="ident" id="8660341">color</span><span class="op" id="8660346">.</span><span class="ident" id="8660347">RGBA</span><span class="op" id="8660351">{</span><span class="num" id="8660352">8</span><span class="op" id="8660353">,</span>&nbsp;<span class="num" id="8660355">28</span><span class="op" id="8660357">,</span>&nbsp;<span class="num" id="8660359">0</span><span class="op" id="8660360">,</span>&nbsp;<span class="num" id="8660362">192</span><span class="op" id="8660365">}</span><span class="op" id="8660366">}</span><span class="op" id="8660367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660370">{</span><span class="string" id="8660371">&#34;ycbcrNil&#34;</span><span class="op" id="8660381">,</span>&nbsp;<span class="ident" id="8660383">vgradCr</span><span class="op" id="8660390">(</span><span class="op" id="8660391">)</span><span class="op" id="8660392">,</span>&nbsp;<span class="ident" id="8660394">nil</span><span class="op" id="8660397">,</span>&nbsp;<span class="ident" id="8660399">Over</span><span class="op" id="8660403">,</span>&nbsp;<span class="ident" id="8660405">color</span><span class="op" id="8660410">.</span><span class="ident" id="8660411">RGBA</span><span class="op" id="8660415">{</span><span class="num" id="8660416">11</span><span class="op" id="8660418">,</span>&nbsp;<span class="num" id="8660420">38</span><span class="op" id="8660422">,</span>&nbsp;<span class="num" id="8660424">0</span><span class="op" id="8660425">,</span>&nbsp;<span class="num" id="8660427">255</span><span class="op" id="8660430">}</span><span class="op" id="8660431">}</span><span class="op" id="8660432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660435">{</span><span class="string" id="8660436">&#34;ycbcrNilSrc&#34;</span><span class="op" id="8660449">,</span>&nbsp;<span class="ident" id="8660451">vgradCr</span><span class="op" id="8660458">(</span><span class="op" id="8660459">)</span><span class="op" id="8660460">,</span>&nbsp;<span class="ident" id="8660462">nil</span><span class="op" id="8660465">,</span>&nbsp;<span class="ident" id="8660467">Src</span><span class="op" id="8660470">,</span>&nbsp;<span class="ident" id="8660472">color</span><span class="op" id="8660477">.</span><span class="ident" id="8660478">RGBA</span><span class="op" id="8660482">{</span><span class="num" id="8660483">11</span><span class="op" id="8660485">,</span>&nbsp;<span class="num" id="8660487">38</span><span class="op" id="8660489">,</span>&nbsp;<span class="num" id="8660491">0</span><span class="op" id="8660492">,</span>&nbsp;<span class="num" id="8660494">255</span><span class="op" id="8660497">}</span><span class="op" id="8660498">}</span><span class="op" id="8660499">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8660502">//&nbsp;Variable&nbsp;mask&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8660541">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8660566">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8660613">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;255,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8660655">//&nbsp;The&nbsp;mask&nbsp;pixel&#39;s&nbsp;alpha&nbsp;is&nbsp;102,&nbsp;or&nbsp;40%.</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660698">{</span><span class="string" id="8660699">&#34;generic&#34;</span><span class="op" id="8660708">,</span>&nbsp;<span class="ident" id="8660710">fillBlue</span><span class="op" id="8660718">(</span><span class="num" id="8660719">255</span><span class="op" id="8660722">)</span><span class="op" id="8660723">,</span>&nbsp;<span class="ident" id="8660725">vgradAlpha</span><span class="op" id="8660735">(</span><span class="num" id="8660736">192</span><span class="op" id="8660739">)</span><span class="op" id="8660740">,</span>&nbsp;<span class="ident" id="8660742">Over</span><span class="op" id="8660746">,</span>&nbsp;<span class="ident" id="8660748">color</span><span class="op" id="8660753">.</span><span class="ident" id="8660754">RGBA</span><span class="op" id="8660758">{</span><span class="num" id="8660759">81</span><span class="op" id="8660761">,</span>&nbsp;<span class="num" id="8660763">0</span><span class="op" id="8660764">,</span>&nbsp;<span class="num" id="8660766">102</span><span class="op" id="8660769">,</span>&nbsp;<span class="num" id="8660771">255</span><span class="op" id="8660774">}</span><span class="op" id="8660775">}</span><span class="op" id="8660776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660779">{</span><span class="string" id="8660780">&#34;genericSrc&#34;</span><span class="op" id="8660792">,</span>&nbsp;<span class="ident" id="8660794">fillBlue</span><span class="op" id="8660802">(</span><span class="num" id="8660803">255</span><span class="op" id="8660806">)</span><span class="op" id="8660807">,</span>&nbsp;<span class="ident" id="8660809">vgradAlpha</span><span class="op" id="8660819">(</span><span class="num" id="8660820">192</span><span class="op" id="8660823">)</span><span class="op" id="8660824">,</span>&nbsp;<span class="ident" id="8660826">Src</span><span class="op" id="8660829">,</span>&nbsp;<span class="ident" id="8660831">color</span><span class="op" id="8660836">.</span><span class="ident" id="8660837">RGBA</span><span class="op" id="8660841">{</span><span class="num" id="8660842">0</span><span class="op" id="8660843">,</span>&nbsp;<span class="num" id="8660845">0</span><span class="op" id="8660846">,</span>&nbsp;<span class="num" id="8660848">102</span><span class="op" id="8660851">,</span>&nbsp;<span class="num" id="8660853">102</span><span class="op" id="8660856">}</span><span class="op" id="8660857">}</span><span class="op" id="8660858">,</span><br>
<span class="lineno"></span><span class="op" id="8660860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8660863">func</span>&nbsp;<span class="ident" id="8660868">makeGolden</span><span class="op" id="8660878">(</span><span class="ident" id="8660879">dst</span>&nbsp;<span class="ident" id="8660883">image</span><span class="op" id="8660888">.</span><span class="ident" id="8660889">Image</span><span class="op" id="8660894">,</span>&nbsp;<span class="ident" id="8660896">r</span>&nbsp;<span class="ident" id="8660898">image</span><span class="op" id="8660903">.</span><span class="ident" id="8660904">Rectangle</span><span class="op" id="8660913">,</span>&nbsp;<span class="ident" id="8660915">src</span>&nbsp;<span class="ident" id="8660919">image</span><span class="op" id="8660924">.</span><span class="ident" id="8660925">Image</span><span class="op" id="8660930">,</span>&nbsp;<span class="ident" id="8660932">sp</span>&nbsp;<span class="ident" id="8660935">image</span><span class="op" id="8660940">.</span><span class="ident" id="8660941">Point</span><span class="op" id="8660946">,</span>&nbsp;<span class="ident" id="8660948">mask</span>&nbsp;<span class="ident" id="8660953">image</span><span class="op" id="8660958">.</span><span class="ident" id="8660959">Image</span><span class="op" id="8660964">,</span>&nbsp;<span class="ident" id="8660966">mp</span>&nbsp;<span class="ident" id="8660969">image</span><span class="op" id="8660974">.</span><span class="ident" id="8660975">Point</span><span class="op" id="8660980">,</span>&nbsp;<span class="ident" id="8660982">op</span>&nbsp;<span class="ident" id="8660985">Op</span><span class="op" id="8660987">)</span>&nbsp;<span class="ident" id="8660989">image</span><span class="op" id="8660994">.</span><span class="ident" id="8660995">Image</span>&nbsp;<span class="op" id="8661001">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8661004">//&nbsp;Since&nbsp;golden&nbsp;is&nbsp;a&nbsp;newly&nbsp;allocated&nbsp;image,&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;check&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8661079">//&nbsp;input&nbsp;source&nbsp;and&nbsp;mask&nbsp;images&nbsp;and&nbsp;the&nbsp;output&nbsp;golden&nbsp;image&nbsp;overlap.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661149">b</span>&nbsp;<span class="op" id="8661151">:=</span>&nbsp;<span class="ident" id="8661154">dst</span><span class="op" id="8661157">.</span><span class="ident" id="8661158">Bounds</span><span class="op" id="8661164">(</span><span class="op" id="8661165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661168">sb</span>&nbsp;<span class="op" id="8661171">:=</span>&nbsp;<span class="ident" id="8661174">src</span><span class="op" id="8661177">.</span><span class="ident" id="8661178">Bounds</span><span class="op" id="8661184">(</span><span class="op" id="8661185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661188">mb</span>&nbsp;<span class="op" id="8661191">:=</span>&nbsp;<span class="ident" id="8661194">image</span><span class="op" id="8661199">.</span><span class="ident" id="8661200">Rect</span><span class="op" id="8661204">(</span><span class="op" id="8661205">-</span><span class="num" id="8661206">1e9</span><span class="op" id="8661209">,</span>&nbsp;<span class="op" id="8661211">-</span><span class="num" id="8661212">1e9</span><span class="op" id="8661215">,</span>&nbsp;<span class="num" id="8661217">1e9</span><span class="op" id="8661220">,</span>&nbsp;<span class="num" id="8661222">1e9</span><span class="op" id="8661225">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8661228">if</span>&nbsp;<span class="ident" id="8661231">mask</span>&nbsp;<span class="op" id="8661236">!=</span>&nbsp;<span class="ident" id="8661239">nil</span>&nbsp;<span class="op" id="8661243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661247">mb</span>&nbsp;<span class="op" id="8661250">=</span>&nbsp;<span class="ident" id="8661252">mask</span><span class="op" id="8661256">.</span><span class="ident" id="8661257">Bounds</span><span class="op" id="8661263">(</span><span class="op" id="8661264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661270">golden</span>&nbsp;<span class="op" id="8661277">:=</span>&nbsp;<span class="ident" id="8661280">image</span><span class="op" id="8661285">.</span><span class="ident" id="8661286">NewRGBA</span><span class="op" id="8661293">(</span><span class="ident" id="8661294">image</span><span class="op" id="8661299">.</span><span class="ident" id="8661300">Rect</span><span class="op" id="8661304">(</span><span class="num" id="8661305">0</span><span class="op" id="8661306">,</span>&nbsp;<span class="num" id="8661308">0</span><span class="op" id="8661309">,</span>&nbsp;<span class="ident" id="8661311">b</span><span class="op" id="8661312">.</span><span class="ident" id="8661313">Max</span><span class="op" id="8661316">.</span><span class="ident" id="8661317">X</span><span class="op" id="8661318">,</span>&nbsp;<span class="ident" id="8661320">b</span><span class="op" id="8661321">.</span><span class="ident" id="8661322">Max</span><span class="op" id="8661325">.</span><span class="ident" id="8661326">Y</span><span class="op" id="8661327">)</span><span class="op" id="8661328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8661331">for</span>&nbsp;<span class="ident" id="8661335">y</span>&nbsp;<span class="op" id="8661337">:=</span>&nbsp;<span class="ident" id="8661340">r</span><span class="op" id="8661341">.</span><span class="ident" id="8661342">Min</span><span class="op" id="8661345">.</span><span class="ident" id="8661346">Y</span><span class="op" id="8661347">;</span>&nbsp;<span class="ident" id="8661349">y</span>&nbsp;<span class="op" id="8661351">&lt;</span>&nbsp;<span class="ident" id="8661353">r</span><span class="op" id="8661354">.</span><span class="ident" id="8661355">Max</span><span class="op" id="8661358">.</span><span class="ident" id="8661359">Y</span><span class="op" id="8661360">;</span>&nbsp;<span class="ident" id="8661362">y</span><span class="op" id="8661363">++</span>&nbsp;<span class="op" id="8661366">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661370">sy</span>&nbsp;<span class="op" id="8661373">:=</span>&nbsp;<span class="ident" id="8661376">y</span>&nbsp;<span class="op" id="8661378">+</span>&nbsp;<span class="ident" id="8661380">sp</span><span class="op" id="8661382">.</span><span class="ident" id="8661383">Y</span>&nbsp;<span class="op" id="8661385">-</span>&nbsp;<span class="ident" id="8661387">r</span><span class="op" id="8661388">.</span><span class="ident" id="8661389">Min</span><span class="op" id="8661392">.</span><span class="ident" id="8661393">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661397">my</span>&nbsp;<span class="op" id="8661400">:=</span>&nbsp;<span class="ident" id="8661403">y</span>&nbsp;<span class="op" id="8661405">+</span>&nbsp;<span class="ident" id="8661407">mp</span><span class="op" id="8661409">.</span><span class="ident" id="8661410">Y</span>&nbsp;<span class="op" id="8661412">-</span>&nbsp;<span class="ident" id="8661414">r</span><span class="op" id="8661415">.</span><span class="ident" id="8661416">Min</span><span class="op" id="8661419">.</span><span class="ident" id="8661420">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8661424">for</span>&nbsp;<span class="ident" id="8661428">x</span>&nbsp;<span class="op" id="8661430">:=</span>&nbsp;<span class="ident" id="8661433">r</span><span class="op" id="8661434">.</span><span class="ident" id="8661435">Min</span><span class="op" id="8661438">.</span><span class="ident" id="8661439">X</span><span class="op" id="8661440">;</span>&nbsp;<span class="ident" id="8661442">x</span>&nbsp;<span class="op" id="8661444">&lt;</span>&nbsp;<span class="ident" id="8661446">r</span><span class="op" id="8661447">.</span><span class="ident" id="8661448">Max</span><span class="op" id="8661451">.</span><span class="ident" id="8661452">X</span><span class="op" id="8661453">;</span>&nbsp;<span class="ident" id="8661455">x</span><span class="op" id="8661456">++</span>&nbsp;<span class="op" id="8661459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8661464">if</span>&nbsp;<span class="op" id="8661467">!</span><span class="op" id="8661468">(</span><span class="ident" id="8661469">image</span><span class="op" id="8661474">.</span><span class="ident" id="8661475">Pt</span><span class="op" id="8661477">(</span><span class="ident" id="8661478">x</span><span class="op" id="8661479">,</span>&nbsp;<span class="ident" id="8661481">y</span><span class="op" id="8661482">)</span><span class="op" id="8661483">.</span><span class="ident" id="8661484">In</span><span class="op" id="8661486">(</span><span class="ident" id="8661487">b</span><span class="op" id="8661488">)</span><span class="op" id="8661489">)</span>&nbsp;<span class="op" id="8661491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8661497">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661514">sx</span>&nbsp;<span class="op" id="8661517">:=</span>&nbsp;<span class="ident" id="8661520">x</span>&nbsp;<span class="op" id="8661522">+</span>&nbsp;<span class="ident" id="8661524">sp</span><span class="op" id="8661526">.</span><span class="ident" id="8661527">X</span>&nbsp;<span class="op" id="8661529">-</span>&nbsp;<span class="ident" id="8661531">r</span><span class="op" id="8661532">.</span><span class="ident" id="8661533">Min</span><span class="op" id="8661536">.</span><span class="ident" id="8661537">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8661542">if</span>&nbsp;<span class="op" id="8661545">!</span><span class="op" id="8661546">(</span><span class="ident" id="8661547">image</span><span class="op" id="8661552">.</span><span class="ident" id="8661553">Pt</span><span class="op" id="8661555">(</span><span class="ident" id="8661556">sx</span><span class="op" id="8661558">,</span>&nbsp;<span class="ident" id="8661560">sy</span><span class="op" id="8661562">)</span><span class="op" id="8661563">.</span><span class="ident" id="8661564">In</span><span class="op" id="8661566">(</span><span class="ident" id="8661567">sb</span><span class="op" id="8661569">)</span><span class="op" id="8661570">)</span>&nbsp;<span class="op" id="8661572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8661578">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661590">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661595">mx</span>&nbsp;<span class="op" id="8661598">:=</span>&nbsp;<span class="ident" id="8661601">x</span>&nbsp;<span class="op" id="8661603">+</span>&nbsp;<span class="ident" id="8661605">mp</span><span class="op" id="8661607">.</span><span class="ident" id="8661608">X</span>&nbsp;<span class="op" id="8661610">-</span>&nbsp;<span class="ident" id="8661612">r</span><span class="op" id="8661613">.</span><span class="ident" id="8661614">Min</span><span class="op" id="8661617">.</span><span class="ident" id="8661618">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8661623">if</span>&nbsp;<span class="op" id="8661626">!</span><span class="op" id="8661627">(</span><span class="ident" id="8661628">image</span><span class="op" id="8661633">.</span><span class="ident" id="8661634">Pt</span><span class="op" id="8661636">(</span><span class="ident" id="8661637">mx</span><span class="op" id="8661639">,</span>&nbsp;<span class="ident" id="8661641">my</span><span class="op" id="8661643">)</span><span class="op" id="8661644">.</span><span class="ident" id="8661645">In</span><span class="op" id="8661647">(</span><span class="ident" id="8661648">mb</span><span class="op" id="8661650">)</span><span class="op" id="8661651">)</span>&nbsp;<span class="op" id="8661653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8661659">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8661677">const</span>&nbsp;<span class="ident" id="8661683">M</span>&nbsp;<span class="op" id="8661685">=</span>&nbsp;<span class="num" id="8661687">1</span><span class="op" id="8661688">&lt;&lt;</span><span class="num" id="8661690">16</span>&nbsp;<span class="op" id="8661693">-</span>&nbsp;<span class="num" id="8661695">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8661700">var</span>&nbsp;<span class="ident" id="8661704">dr</span><span class="op" id="8661706">,</span>&nbsp;<span class="ident" id="8661708">dg</span><span class="op" id="8661710">,</span>&nbsp;<span class="ident" id="8661712">db</span><span class="op" id="8661714">,</span>&nbsp;<span class="ident" id="8661716">da</span>&nbsp;<span class="builtintype" id="8661719">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8661729">if</span>&nbsp;<span class="ident" id="8661732">op</span>&nbsp;<span class="op" id="8661735">==</span>&nbsp;<span class="ident" id="8661738">Over</span>&nbsp;<span class="op" id="8661743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661749">dr</span><span class="op" id="8661751">,</span>&nbsp;<span class="ident" id="8661753">dg</span><span class="op" id="8661755">,</span>&nbsp;<span class="ident" id="8661757">db</span><span class="op" id="8661759">,</span>&nbsp;<span class="ident" id="8661761">da</span>&nbsp;<span class="op" id="8661764">=</span>&nbsp;<span class="ident" id="8661766">dst</span><span class="op" id="8661769">.</span><span class="ident" id="8661770">At</span><span class="op" id="8661772">(</span><span class="ident" id="8661773">x</span><span class="op" id="8661774">,</span>&nbsp;<span class="ident" id="8661776">y</span><span class="op" id="8661777">)</span><span class="op" id="8661778">.</span><span class="ident" id="8661779">RGBA</span><span class="op" id="8661783">(</span><span class="op" id="8661784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661789">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661794">sr</span><span class="op" id="8661796">,</span>&nbsp;<span class="ident" id="8661798">sg</span><span class="op" id="8661800">,</span>&nbsp;<span class="ident" id="8661802">sb</span><span class="op" id="8661804">,</span>&nbsp;<span class="ident" id="8661806">sa</span>&nbsp;<span class="op" id="8661809">:=</span>&nbsp;<span class="ident" id="8661812">src</span><span class="op" id="8661815">.</span><span class="ident" id="8661816">At</span><span class="op" id="8661818">(</span><span class="ident" id="8661819">sx</span><span class="op" id="8661821">,</span>&nbsp;<span class="ident" id="8661823">sy</span><span class="op" id="8661825">)</span><span class="op" id="8661826">.</span><span class="ident" id="8661827">RGBA</span><span class="op" id="8661831">(</span><span class="op" id="8661832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661837">ma</span>&nbsp;<span class="op" id="8661840">:=</span>&nbsp;<span class="builtintype" id="8661843">uint32</span><span class="op" id="8661849">(</span><span class="ident" id="8661850">M</span><span class="op" id="8661851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8661856">if</span>&nbsp;<span class="ident" id="8661859">mask</span>&nbsp;<span class="op" id="8661864">!=</span>&nbsp;<span class="ident" id="8661867">nil</span>&nbsp;<span class="op" id="8661871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661877">_</span><span class="op" id="8661878">,</span>&nbsp;<span class="ident" id="8661880">_</span><span class="op" id="8661881">,</span>&nbsp;<span class="ident" id="8661883">_</span><span class="op" id="8661884">,</span>&nbsp;<span class="ident" id="8661886">ma</span>&nbsp;<span class="op" id="8661889">=</span>&nbsp;<span class="ident" id="8661891">mask</span><span class="op" id="8661895">.</span><span class="ident" id="8661896">At</span><span class="op" id="8661898">(</span><span class="ident" id="8661899">mx</span><span class="op" id="8661901">,</span>&nbsp;<span class="ident" id="8661903">my</span><span class="op" id="8661905">)</span><span class="op" id="8661906">.</span><span class="ident" id="8661907">RGBA</span><span class="op" id="8661911">(</span><span class="op" id="8661912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661917">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661922">a</span>&nbsp;<span class="op" id="8661924">:=</span>&nbsp;<span class="ident" id="8661927">M</span>&nbsp;<span class="op" id="8661929">-</span>&nbsp;<span class="op" id="8661931">(</span><span class="ident" id="8661932">sa</span>&nbsp;<span class="op" id="8661935">*</span>&nbsp;<span class="ident" id="8661937">ma</span>&nbsp;<span class="op" id="8661940">/</span>&nbsp;<span class="ident" id="8661942">M</span><span class="op" id="8661943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661948">golden</span><span class="op" id="8661954">.</span><span class="ident" id="8661955">Set</span><span class="op" id="8661958">(</span><span class="ident" id="8661959">x</span><span class="op" id="8661960">,</span>&nbsp;<span class="ident" id="8661962">y</span><span class="op" id="8661963">,</span>&nbsp;<span class="ident" id="8661965">color</span><span class="op" id="8661970">.</span><span class="ident" id="8661971">RGBA64</span><span class="op" id="8661977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8661983">uint16</span><span class="op" id="8661989">(</span><span class="op" id="8661990">(</span><span class="ident" id="8661991">dr</span><span class="op" id="8661993">*</span><span class="ident" id="8661994">a</span>&nbsp;<span class="op" id="8661996">+</span>&nbsp;<span class="ident" id="8661998">sr</span><span class="op" id="8662000">*</span><span class="ident" id="8662001">ma</span><span class="op" id="8662003">)</span>&nbsp;<span class="op" id="8662005">/</span>&nbsp;<span class="ident" id="8662007">M</span><span class="op" id="8662008">)</span><span class="op" id="8662009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8662015">uint16</span><span class="op" id="8662021">(</span><span class="op" id="8662022">(</span><span class="ident" id="8662023">dg</span><span class="op" id="8662025">*</span><span class="ident" id="8662026">a</span>&nbsp;<span class="op" id="8662028">+</span>&nbsp;<span class="ident" id="8662030">sg</span><span class="op" id="8662032">*</span><span class="ident" id="8662033">ma</span><span class="op" id="8662035">)</span>&nbsp;<span class="op" id="8662037">/</span>&nbsp;<span class="ident" id="8662039">M</span><span class="op" id="8662040">)</span><span class="op" id="8662041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8662047">uint16</span><span class="op" id="8662053">(</span><span class="op" id="8662054">(</span><span class="ident" id="8662055">db</span><span class="op" id="8662057">*</span><span class="ident" id="8662058">a</span>&nbsp;<span class="op" id="8662060">+</span>&nbsp;<span class="ident" id="8662062">sb</span><span class="op" id="8662064">*</span><span class="ident" id="8662065">ma</span><span class="op" id="8662067">)</span>&nbsp;<span class="op" id="8662069">/</span>&nbsp;<span class="ident" id="8662071">M</span><span class="op" id="8662072">)</span><span class="op" id="8662073">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8662079">uint16</span><span class="op" id="8662085">(</span><span class="op" id="8662086">(</span><span class="ident" id="8662087">da</span><span class="op" id="8662089">*</span><span class="ident" id="8662090">a</span>&nbsp;<span class="op" id="8662092">+</span>&nbsp;<span class="ident" id="8662094">sa</span><span class="op" id="8662096">*</span><span class="ident" id="8662097">ma</span><span class="op" id="8662099">)</span>&nbsp;<span class="op" id="8662101">/</span>&nbsp;<span class="ident" id="8662103">M</span><span class="op" id="8662104">)</span><span class="op" id="8662105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662110">}</span><span class="op" id="8662111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8662121">return</span>&nbsp;<span class="ident" id="8662128">golden</span><span class="op" id="8662134">.</span><span class="ident" id="8662135">SubImage</span><span class="op" id="8662143">(</span><span class="ident" id="8662144">b</span><span class="op" id="8662145">)</span><br>
<span class="lineno">205</span><span class="op" id="8662147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8662150">func</span>&nbsp;<span class="ident" id="8662155">TestDraw</span><span class="op" id="8662163">(</span><span class="ident" id="8662164">t</span>&nbsp;<span class="op" id="8662166">*</span><span class="ident" id="8662167">testing</span><span class="op" id="8662174">.</span><span class="ident" id="8662175">T</span><span class="op" id="8662176">)</span>&nbsp;<span class="op" id="8662178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662181">rr</span>&nbsp;<span class="op" id="8662184">:=</span>&nbsp;<span class="op" id="8662187">[</span><span class="op" id="8662188">]</span><span class="ident" id="8662189">image</span><span class="op" id="8662194">.</span><span class="ident" id="8662195">Rectangle</span><span class="op" id="8662204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662208">image</span><span class="op" id="8662213">.</span><span class="ident" id="8662214">Rect</span><span class="op" id="8662218">(</span><span class="num" id="8662219">0</span><span class="op" id="8662220">,</span>&nbsp;<span class="num" id="8662222">0</span><span class="op" id="8662223">,</span>&nbsp;<span class="num" id="8662225">0</span><span class="op" id="8662226">,</span>&nbsp;<span class="num" id="8662228">0</span><span class="op" id="8662229">)</span><span class="op" id="8662230">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662234">image</span><span class="op" id="8662239">.</span><span class="ident" id="8662240">Rect</span><span class="op" id="8662244">(</span><span class="num" id="8662245">0</span><span class="op" id="8662246">,</span>&nbsp;<span class="num" id="8662248">0</span><span class="op" id="8662249">,</span>&nbsp;<span class="num" id="8662251">16</span><span class="op" id="8662253">,</span>&nbsp;<span class="num" id="8662255">16</span><span class="op" id="8662257">)</span><span class="op" id="8662258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662262">image</span><span class="op" id="8662267">.</span><span class="ident" id="8662268">Rect</span><span class="op" id="8662272">(</span><span class="num" id="8662273">3</span><span class="op" id="8662274">,</span>&nbsp;<span class="num" id="8662276">5</span><span class="op" id="8662277">,</span>&nbsp;<span class="num" id="8662279">12</span><span class="op" id="8662281">,</span>&nbsp;<span class="num" id="8662283">10</span><span class="op" id="8662285">)</span><span class="op" id="8662286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662290">image</span><span class="op" id="8662295">.</span><span class="ident" id="8662296">Rect</span><span class="op" id="8662300">(</span><span class="num" id="8662301">0</span><span class="op" id="8662302">,</span>&nbsp;<span class="num" id="8662304">0</span><span class="op" id="8662305">,</span>&nbsp;<span class="num" id="8662307">9</span><span class="op" id="8662308">,</span>&nbsp;<span class="num" id="8662310">9</span><span class="op" id="8662311">)</span><span class="op" id="8662312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662316">image</span><span class="op" id="8662321">.</span><span class="ident" id="8662322">Rect</span><span class="op" id="8662326">(</span><span class="num" id="8662327">8</span><span class="op" id="8662328">,</span>&nbsp;<span class="num" id="8662330">8</span><span class="op" id="8662331">,</span>&nbsp;<span class="num" id="8662333">16</span><span class="op" id="8662335">,</span>&nbsp;<span class="num" id="8662337">16</span><span class="op" id="8662339">)</span><span class="op" id="8662340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662344">image</span><span class="op" id="8662349">.</span><span class="ident" id="8662350">Rect</span><span class="op" id="8662354">(</span><span class="num" id="8662355">8</span><span class="op" id="8662356">,</span>&nbsp;<span class="num" id="8662358">0</span><span class="op" id="8662359">,</span>&nbsp;<span class="num" id="8662361">9</span><span class="op" id="8662362">,</span>&nbsp;<span class="num" id="8662364">16</span><span class="op" id="8662366">)</span><span class="op" id="8662367">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662371">image</span><span class="op" id="8662376">.</span><span class="ident" id="8662377">Rect</span><span class="op" id="8662381">(</span><span class="num" id="8662382">0</span><span class="op" id="8662383">,</span>&nbsp;<span class="num" id="8662385">8</span><span class="op" id="8662386">,</span>&nbsp;<span class="num" id="8662388">16</span><span class="op" id="8662390">,</span>&nbsp;<span class="num" id="8662392">9</span><span class="op" id="8662393">)</span><span class="op" id="8662394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662398">image</span><span class="op" id="8662403">.</span><span class="ident" id="8662404">Rect</span><span class="op" id="8662408">(</span><span class="num" id="8662409">8</span><span class="op" id="8662410">,</span>&nbsp;<span class="num" id="8662412">8</span><span class="op" id="8662413">,</span>&nbsp;<span class="num" id="8662415">9</span><span class="op" id="8662416">,</span>&nbsp;<span class="num" id="8662418">9</span><span class="op" id="8662419">)</span><span class="op" id="8662420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662424">image</span><span class="op" id="8662429">.</span><span class="ident" id="8662430">Rect</span><span class="op" id="8662434">(</span><span class="num" id="8662435">8</span><span class="op" id="8662436">,</span>&nbsp;<span class="num" id="8662438">8</span><span class="op" id="8662439">,</span>&nbsp;<span class="num" id="8662441">8</span><span class="op" id="8662442">,</span>&nbsp;<span class="num" id="8662444">8</span><span class="op" id="8662445">)</span><span class="op" id="8662446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8662452">for</span>&nbsp;<span class="ident" id="8662456">_</span><span class="op" id="8662457">,</span>&nbsp;<span class="ident" id="8662459">r</span>&nbsp;<span class="op" id="8662461">:=</span>&nbsp;<span class="keyword" id="8662464">range</span>&nbsp;<span class="ident" id="8662470">rr</span>&nbsp;<span class="op" id="8662473">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662476">loop</span><span class="op" id="8662480">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8662484">for</span>&nbsp;<span class="ident" id="8662488">_</span><span class="op" id="8662489">,</span>&nbsp;<span class="ident" id="8662491">test</span>&nbsp;<span class="op" id="8662496">:=</span>&nbsp;<span class="keyword" id="8662499">range</span>&nbsp;<span class="ident" id="8662505">drawTests</span>&nbsp;<span class="op" id="8662515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662520">dst</span>&nbsp;<span class="op" id="8662524">:=</span>&nbsp;<span class="ident" id="8662527">hgradRed</span><span class="op" id="8662535">(</span><span class="num" id="8662536">255</span><span class="op" id="8662539">)</span><span class="op" id="8662540">.</span><span class="op" id="8662541">(</span><span class="op" id="8662542">*</span><span class="ident" id="8662543">image</span><span class="op" id="8662548">.</span><span class="ident" id="8662549">RGBA</span><span class="op" id="8662553">)</span><span class="op" id="8662554">.</span><span class="ident" id="8662555">SubImage</span><span class="op" id="8662563">(</span><span class="ident" id="8662564">r</span><span class="op" id="8662565">)</span><span class="op" id="8662566">.</span><span class="op" id="8662567">(</span><span class="ident" id="8662568">Image</span><span class="op" id="8662573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8662578">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662679">golden</span>&nbsp;<span class="op" id="8662686">:=</span>&nbsp;<span class="ident" id="8662689">makeGolden</span><span class="op" id="8662699">(</span><span class="ident" id="8662700">dst</span><span class="op" id="8662703">,</span>&nbsp;<span class="ident" id="8662705">image</span><span class="op" id="8662710">.</span><span class="ident" id="8662711">Rect</span><span class="op" id="8662715">(</span><span class="num" id="8662716">0</span><span class="op" id="8662717">,</span>&nbsp;<span class="num" id="8662719">0</span><span class="op" id="8662720">,</span>&nbsp;<span class="num" id="8662722">16</span><span class="op" id="8662724">,</span>&nbsp;<span class="num" id="8662726">16</span><span class="op" id="8662728">)</span><span class="op" id="8662729">,</span>&nbsp;<span class="ident" id="8662731">test</span><span class="op" id="8662735">.</span><span class="ident" id="8662736">src</span><span class="op" id="8662739">,</span>&nbsp;<span class="ident" id="8662741">image</span><span class="op" id="8662746">.</span><span class="ident" id="8662747">ZP</span><span class="op" id="8662749">,</span>&nbsp;<span class="ident" id="8662751">test</span><span class="op" id="8662755">.</span><span class="ident" id="8662756">mask</span><span class="op" id="8662760">,</span>&nbsp;<span class="ident" id="8662762">image</span><span class="op" id="8662767">.</span><span class="ident" id="8662768">ZP</span><span class="op" id="8662770">,</span>&nbsp;<span class="ident" id="8662772">test</span><span class="op" id="8662776">.</span><span class="ident" id="8662777">op</span><span class="op" id="8662779">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662784">b</span>&nbsp;<span class="op" id="8662786">:=</span>&nbsp;<span class="ident" id="8662789">dst</span><span class="op" id="8662792">.</span><span class="ident" id="8662793">Bounds</span><span class="op" id="8662799">(</span><span class="op" id="8662800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8662805">if</span>&nbsp;<span class="op" id="8662808">!</span><span class="ident" id="8662809">b</span><span class="op" id="8662810">.</span><span class="ident" id="8662811">Eq</span><span class="op" id="8662813">(</span><span class="ident" id="8662814">golden</span><span class="op" id="8662820">.</span><span class="ident" id="8662821">Bounds</span><span class="op" id="8662827">(</span><span class="op" id="8662828">)</span><span class="op" id="8662829">)</span>&nbsp;<span class="op" id="8662831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662837">t</span><span class="op" id="8662838">.</span><span class="ident" id="8662839">Errorf</span><span class="op" id="8662845">(</span><span class="string" id="8662846">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="8662879">,</span>&nbsp;<span class="ident" id="8662881">r</span><span class="op" id="8662882">,</span>&nbsp;<span class="ident" id="8662884">test</span><span class="op" id="8662888">.</span><span class="ident" id="8662889">desc</span><span class="op" id="8662893">,</span>&nbsp;<span class="ident" id="8662895">dst</span><span class="op" id="8662898">.</span><span class="ident" id="8662899">Bounds</span><span class="op" id="8662905">(</span><span class="op" id="8662906">)</span><span class="op" id="8662907">,</span>&nbsp;<span class="ident" id="8662909">golden</span><span class="op" id="8662915">.</span><span class="ident" id="8662916">Bounds</span><span class="op" id="8662922">(</span><span class="op" id="8662923">)</span><span class="op" id="8662924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8662930">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662942">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8662947">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8663044">DrawMask</span><span class="op" id="8663052">(</span><span class="ident" id="8663053">dst</span><span class="op" id="8663056">,</span>&nbsp;<span class="ident" id="8663058">image</span><span class="op" id="8663063">.</span><span class="ident" id="8663064">Rect</span><span class="op" id="8663068">(</span><span class="num" id="8663069">0</span><span class="op" id="8663070">,</span>&nbsp;<span class="num" id="8663072">0</span><span class="op" id="8663073">,</span>&nbsp;<span class="num" id="8663075">16</span><span class="op" id="8663077">,</span>&nbsp;<span class="num" id="8663079">16</span><span class="op" id="8663081">)</span><span class="op" id="8663082">,</span>&nbsp;<span class="ident" id="8663084">test</span><span class="op" id="8663088">.</span><span class="ident" id="8663089">src</span><span class="op" id="8663092">,</span>&nbsp;<span class="ident" id="8663094">image</span><span class="op" id="8663099">.</span><span class="ident" id="8663100">ZP</span><span class="op" id="8663102">,</span>&nbsp;<span class="ident" id="8663104">test</span><span class="op" id="8663108">.</span><span class="ident" id="8663109">mask</span><span class="op" id="8663113">,</span>&nbsp;<span class="ident" id="8663115">image</span><span class="op" id="8663120">.</span><span class="ident" id="8663121">ZP</span><span class="op" id="8663123">,</span>&nbsp;<span class="ident" id="8663125">test</span><span class="op" id="8663129">.</span><span class="ident" id="8663130">op</span><span class="op" id="8663132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8663137">if</span>&nbsp;<span class="ident" id="8663140">image</span><span class="op" id="8663145">.</span><span class="ident" id="8663146">Pt</span><span class="op" id="8663148">(</span><span class="num" id="8663149">8</span><span class="op" id="8663150">,</span>&nbsp;<span class="num" id="8663152">8</span><span class="op" id="8663153">)</span><span class="op" id="8663154">.</span><span class="ident" id="8663155">In</span><span class="op" id="8663157">(</span><span class="ident" id="8663158">r</span><span class="op" id="8663159">)</span>&nbsp;<span class="op" id="8663161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8663167">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;pixel&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;matches&nbsp;what&nbsp;we&nbsp;expect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8663238">//&nbsp;(the&nbsp;expected&nbsp;value&nbsp;can&nbsp;be&nbsp;verified&nbsp;by&nbsp;hand).</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8663291">if</span>&nbsp;<span class="op" id="8663294">!</span><span class="ident" id="8663295">eq</span><span class="op" id="8663297">(</span><span class="ident" id="8663298">dst</span><span class="op" id="8663301">.</span><span class="ident" id="8663302">At</span><span class="op" id="8663304">(</span><span class="num" id="8663305">8</span><span class="op" id="8663306">,</span>&nbsp;<span class="num" id="8663308">8</span><span class="op" id="8663309">)</span><span class="op" id="8663310">,</span>&nbsp;<span class="ident" id="8663312">test</span><span class="op" id="8663316">.</span><span class="ident" id="8663317">expected</span><span class="op" id="8663325">)</span>&nbsp;<span class="op" id="8663327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8663334">t</span><span class="op" id="8663335">.</span><span class="ident" id="8663336">Errorf</span><span class="op" id="8663342">(</span><span class="string" id="8663343">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="8663379">,</span>&nbsp;<span class="ident" id="8663381">r</span><span class="op" id="8663382">,</span>&nbsp;<span class="ident" id="8663384">test</span><span class="op" id="8663388">.</span><span class="ident" id="8663389">desc</span><span class="op" id="8663393">,</span>&nbsp;<span class="ident" id="8663395">dst</span><span class="op" id="8663398">.</span><span class="ident" id="8663399">At</span><span class="op" id="8663401">(</span><span class="num" id="8663402">8</span><span class="op" id="8663403">,</span>&nbsp;<span class="num" id="8663405">8</span><span class="op" id="8663406">)</span><span class="op" id="8663407">,</span>&nbsp;<span class="ident" id="8663409">test</span><span class="op" id="8663413">.</span><span class="ident" id="8663414">expected</span><span class="op" id="8663422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8663429">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8663442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8663447">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8663452">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8663520">for</span>&nbsp;<span class="ident" id="8663524">y</span>&nbsp;<span class="op" id="8663526">:=</span>&nbsp;<span class="ident" id="8663529">b</span><span class="op" id="8663530">.</span><span class="ident" id="8663531">Min</span><span class="op" id="8663534">.</span><span class="ident" id="8663535">Y</span><span class="op" id="8663536">;</span>&nbsp;<span class="ident" id="8663538">y</span>&nbsp;<span class="op" id="8663540">&lt;</span>&nbsp;<span class="ident" id="8663542">b</span><span class="op" id="8663543">.</span><span class="ident" id="8663544">Max</span><span class="op" id="8663547">.</span><span class="ident" id="8663548">Y</span><span class="op" id="8663549">;</span>&nbsp;<span class="ident" id="8663551">y</span><span class="op" id="8663552">++</span>&nbsp;<span class="op" id="8663555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8663561">for</span>&nbsp;<span class="ident" id="8663565">x</span>&nbsp;<span class="op" id="8663567">:=</span>&nbsp;<span class="ident" id="8663570">b</span><span class="op" id="8663571">.</span><span class="ident" id="8663572">Min</span><span class="op" id="8663575">.</span><span class="ident" id="8663576">X</span><span class="op" id="8663577">;</span>&nbsp;<span class="ident" id="8663579">x</span>&nbsp;<span class="op" id="8663581">&lt;</span>&nbsp;<span class="ident" id="8663583">b</span><span class="op" id="8663584">.</span><span class="ident" id="8663585">Max</span><span class="op" id="8663588">.</span><span class="ident" id="8663589">X</span><span class="op" id="8663590">;</span>&nbsp;<span class="ident" id="8663592">x</span><span class="op" id="8663593">++</span>&nbsp;<span class="op" id="8663596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8663603">if</span>&nbsp;<span class="op" id="8663606">!</span><span class="ident" id="8663607">eq</span><span class="op" id="8663609">(</span><span class="ident" id="8663610">dst</span><span class="op" id="8663613">.</span><span class="ident" id="8663614">At</span><span class="op" id="8663616">(</span><span class="ident" id="8663617">x</span><span class="op" id="8663618">,</span>&nbsp;<span class="ident" id="8663620">y</span><span class="op" id="8663621">)</span><span class="op" id="8663622">,</span>&nbsp;<span class="ident" id="8663624">golden</span><span class="op" id="8663630">.</span><span class="ident" id="8663631">At</span><span class="op" id="8663633">(</span><span class="ident" id="8663634">x</span><span class="op" id="8663635">,</span>&nbsp;<span class="ident" id="8663637">y</span><span class="op" id="8663638">)</span><span class="op" id="8663639">)</span>&nbsp;<span class="op" id="8663641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8663649">t</span><span class="op" id="8663650">.</span><span class="ident" id="8663651">Errorf</span><span class="op" id="8663657">(</span><span class="string" id="8663658">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="8663704">,</span>&nbsp;<span class="ident" id="8663706">r</span><span class="op" id="8663707">,</span>&nbsp;<span class="ident" id="8663709">test</span><span class="op" id="8663713">.</span><span class="ident" id="8663714">desc</span><span class="op" id="8663718">,</span>&nbsp;<span class="ident" id="8663720">x</span><span class="op" id="8663721">,</span>&nbsp;<span class="ident" id="8663723">y</span><span class="op" id="8663724">,</span>&nbsp;<span class="ident" id="8663726">dst</span><span class="op" id="8663729">.</span><span class="ident" id="8663730">At</span><span class="op" id="8663732">(</span><span class="ident" id="8663733">x</span><span class="op" id="8663734">,</span>&nbsp;<span class="ident" id="8663736">y</span><span class="op" id="8663737">)</span><span class="op" id="8663738">,</span>&nbsp;<span class="ident" id="8663740">golden</span><span class="op" id="8663746">.</span><span class="ident" id="8663747">At</span><span class="op" id="8663749">(</span><span class="ident" id="8663750">x</span><span class="op" id="8663751">,</span>&nbsp;<span class="ident" id="8663753">y</span><span class="op" id="8663754">)</span><span class="op" id="8663755">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8663763">continue</span>&nbsp;<span class="ident" id="8663772">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8663782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8663788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8663793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8663797">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8663800">}</span><br>
<span class="lineno"></span><span class="op" id="8663802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8663805">func</span>&nbsp;<span class="ident" id="8663810">TestDrawOverlap</span><span class="op" id="8663825">(</span><span class="ident" id="8663826">t</span>&nbsp;<span class="op" id="8663828">*</span><span class="ident" id="8663829">testing</span><span class="op" id="8663836">.</span><span class="ident" id="8663837">T</span><span class="op" id="8663838">)</span>&nbsp;<span class="op" id="8663840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8663843">for</span>&nbsp;<span class="ident" id="8663847">_</span><span class="op" id="8663848">,</span>&nbsp;<span class="ident" id="8663850">op</span>&nbsp;<span class="op" id="8663853">:=</span>&nbsp;<span class="keyword" id="8663856">range</span>&nbsp;<span class="op" id="8663862">[</span><span class="op" id="8663863">]</span><span class="ident" id="8663864">Op</span><span class="op" id="8663866">{</span><span class="ident" id="8663867">Over</span><span class="op" id="8663871">,</span>&nbsp;<span class="ident" id="8663873">Src</span><span class="op" id="8663876">}</span>&nbsp;<span class="op" id="8663878">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8663882">for</span>&nbsp;<span class="ident" id="8663886">yoff</span>&nbsp;<span class="op" id="8663891">:=</span>&nbsp;<span class="op" id="8663894">-</span><span class="num" id="8663895">2</span><span class="op" id="8663896">;</span>&nbsp;<span class="ident" id="8663898">yoff</span>&nbsp;<span class="op" id="8663903">&lt;=</span>&nbsp;<span class="num" id="8663906">2</span><span class="op" id="8663907">;</span>&nbsp;<span class="ident" id="8663909">yoff</span><span class="op" id="8663913">++</span>&nbsp;<span class="op" id="8663916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8663920">loop</span><span class="op" id="8663924">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8663929">for</span>&nbsp;<span class="ident" id="8663933">xoff</span>&nbsp;<span class="op" id="8663938">:=</span>&nbsp;<span class="op" id="8663941">-</span><span class="num" id="8663942">2</span><span class="op" id="8663943">;</span>&nbsp;<span class="ident" id="8663945">xoff</span>&nbsp;<span class="op" id="8663950">&lt;=</span>&nbsp;<span class="num" id="8663953">2</span><span class="op" id="8663954">;</span>&nbsp;<span class="ident" id="8663956">xoff</span><span class="op" id="8663960">++</span>&nbsp;<span class="op" id="8663963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8663969">m</span>&nbsp;<span class="op" id="8663971">:=</span>&nbsp;<span class="ident" id="8663974">gradYellow</span><span class="op" id="8663984">(</span><span class="num" id="8663985">127</span><span class="op" id="8663988">)</span><span class="op" id="8663989">.</span><span class="op" id="8663990">(</span><span class="op" id="8663991">*</span><span class="ident" id="8663992">image</span><span class="op" id="8663997">.</span><span class="ident" id="8663998">RGBA</span><span class="op" id="8664002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8664008">dst</span>&nbsp;<span class="op" id="8664012">:=</span>&nbsp;<span class="ident" id="8664015">m</span><span class="op" id="8664016">.</span><span class="ident" id="8664017">SubImage</span><span class="op" id="8664025">(</span><span class="ident" id="8664026">image</span><span class="op" id="8664031">.</span><span class="ident" id="8664032">Rect</span><span class="op" id="8664036">(</span><span class="num" id="8664037">5</span><span class="op" id="8664038">,</span>&nbsp;<span class="num" id="8664040">5</span><span class="op" id="8664041">,</span>&nbsp;<span class="num" id="8664043">10</span><span class="op" id="8664045">,</span>&nbsp;<span class="num" id="8664047">10</span><span class="op" id="8664049">)</span><span class="op" id="8664050">)</span><span class="op" id="8664051">.</span><span class="op" id="8664052">(</span><span class="op" id="8664053">*</span><span class="ident" id="8664054">image</span><span class="op" id="8664059">.</span><span class="ident" id="8664060">RGBA</span><span class="op" id="8664064">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8664070">src</span>&nbsp;<span class="op" id="8664074">:=</span>&nbsp;<span class="ident" id="8664077">m</span><span class="op" id="8664078">.</span><span class="ident" id="8664079">SubImage</span><span class="op" id="8664087">(</span><span class="ident" id="8664088">image</span><span class="op" id="8664093">.</span><span class="ident" id="8664094">Rect</span><span class="op" id="8664098">(</span><span class="num" id="8664099">5</span><span class="op" id="8664100">+</span><span class="ident" id="8664101">xoff</span><span class="op" id="8664105">,</span>&nbsp;<span class="num" id="8664107">5</span><span class="op" id="8664108">+</span><span class="ident" id="8664109">yoff</span><span class="op" id="8664113">,</span>&nbsp;<span class="num" id="8664115">10</span><span class="op" id="8664117">+</span><span class="ident" id="8664118">xoff</span><span class="op" id="8664122">,</span>&nbsp;<span class="num" id="8664124">10</span><span class="op" id="8664126">+</span><span class="ident" id="8664127">yoff</span><span class="op" id="8664131">)</span><span class="op" id="8664132">)</span><span class="op" id="8664133">.</span><span class="op" id="8664134">(</span><span class="op" id="8664135">*</span><span class="ident" id="8664136">image</span><span class="op" id="8664141">.</span><span class="ident" id="8664142">RGBA</span><span class="op" id="8664146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8664152">b</span>&nbsp;<span class="op" id="8664154">:=</span>&nbsp;<span class="ident" id="8664157">dst</span><span class="op" id="8664160">.</span><span class="ident" id="8664161">Bounds</span><span class="op" id="8664167">(</span><span class="op" id="8664168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8664174">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8664276">golden</span>&nbsp;<span class="op" id="8664283">:=</span>&nbsp;<span class="ident" id="8664286">makeGolden</span><span class="op" id="8664296">(</span><span class="ident" id="8664297">dst</span><span class="op" id="8664300">,</span>&nbsp;<span class="ident" id="8664302">b</span><span class="op" id="8664303">,</span>&nbsp;<span class="ident" id="8664305">src</span><span class="op" id="8664308">,</span>&nbsp;<span class="ident" id="8664310">src</span><span class="op" id="8664313">.</span><span class="ident" id="8664314">Bounds</span><span class="op" id="8664320">(</span><span class="op" id="8664321">)</span><span class="op" id="8664322">.</span><span class="ident" id="8664323">Min</span><span class="op" id="8664326">,</span>&nbsp;<span class="ident" id="8664328">nil</span><span class="op" id="8664331">,</span>&nbsp;<span class="ident" id="8664333">image</span><span class="op" id="8664338">.</span><span class="ident" id="8664339">ZP</span><span class="op" id="8664341">,</span>&nbsp;<span class="ident" id="8664343">op</span><span class="op" id="8664345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8664351">if</span>&nbsp;<span class="op" id="8664354">!</span><span class="ident" id="8664355">b</span><span class="op" id="8664356">.</span><span class="ident" id="8664357">Eq</span><span class="op" id="8664359">(</span><span class="ident" id="8664360">golden</span><span class="op" id="8664366">.</span><span class="ident" id="8664367">Bounds</span><span class="op" id="8664373">(</span><span class="op" id="8664374">)</span><span class="op" id="8664375">)</span>&nbsp;<span class="op" id="8664377">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8664384">t</span><span class="op" id="8664385">.</span><span class="ident" id="8664386">Errorf</span><span class="op" id="8664392">(</span><span class="string" id="8664393">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="8664443">,</span>&nbsp;<span class="ident" id="8664445">xoff</span><span class="op" id="8664449">,</span>&nbsp;<span class="ident" id="8664451">yoff</span><span class="op" id="8664455">,</span>&nbsp;<span class="ident" id="8664457">dst</span><span class="op" id="8664460">.</span><span class="ident" id="8664461">Bounds</span><span class="op" id="8664467">(</span><span class="op" id="8664468">)</span><span class="op" id="8664469">,</span>&nbsp;<span class="ident" id="8664471">golden</span><span class="op" id="8664477">.</span><span class="ident" id="8664478">Bounds</span><span class="op" id="8664484">(</span><span class="op" id="8664485">)</span><span class="op" id="8664486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8664493">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8664506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8664512">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8664610">DrawMask</span><span class="op" id="8664618">(</span><span class="ident" id="8664619">dst</span><span class="op" id="8664622">,</span>&nbsp;<span class="ident" id="8664624">b</span><span class="op" id="8664625">,</span>&nbsp;<span class="ident" id="8664627">src</span><span class="op" id="8664630">,</span>&nbsp;<span class="ident" id="8664632">src</span><span class="op" id="8664635">.</span><span class="ident" id="8664636">Bounds</span><span class="op" id="8664642">(</span><span class="op" id="8664643">)</span><span class="op" id="8664644">.</span><span class="ident" id="8664645">Min</span><span class="op" id="8664648">,</span>&nbsp;<span class="ident" id="8664650">nil</span><span class="op" id="8664653">,</span>&nbsp;<span class="ident" id="8664655">image</span><span class="op" id="8664660">.</span><span class="ident" id="8664661">ZP</span><span class="op" id="8664663">,</span>&nbsp;<span class="ident" id="8664665">op</span><span class="op" id="8664667">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8664673">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8664742">for</span>&nbsp;<span class="ident" id="8664746">y</span>&nbsp;<span class="op" id="8664748">:=</span>&nbsp;<span class="ident" id="8664751">b</span><span class="op" id="8664752">.</span><span class="ident" id="8664753">Min</span><span class="op" id="8664756">.</span><span class="ident" id="8664757">Y</span><span class="op" id="8664758">;</span>&nbsp;<span class="ident" id="8664760">y</span>&nbsp;<span class="op" id="8664762">&lt;</span>&nbsp;<span class="ident" id="8664764">b</span><span class="op" id="8664765">.</span><span class="ident" id="8664766">Max</span><span class="op" id="8664769">.</span><span class="ident" id="8664770">Y</span><span class="op" id="8664771">;</span>&nbsp;<span class="ident" id="8664773">y</span><span class="op" id="8664774">++</span>&nbsp;<span class="op" id="8664777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8664784">for</span>&nbsp;<span class="ident" id="8664788">x</span>&nbsp;<span class="op" id="8664790">:=</span>&nbsp;<span class="ident" id="8664793">b</span><span class="op" id="8664794">.</span><span class="ident" id="8664795">Min</span><span class="op" id="8664798">.</span><span class="ident" id="8664799">X</span><span class="op" id="8664800">;</span>&nbsp;<span class="ident" id="8664802">x</span>&nbsp;<span class="op" id="8664804">&lt;</span>&nbsp;<span class="ident" id="8664806">b</span><span class="op" id="8664807">.</span><span class="ident" id="8664808">Max</span><span class="op" id="8664811">.</span><span class="ident" id="8664812">X</span><span class="op" id="8664813">;</span>&nbsp;<span class="ident" id="8664815">x</span><span class="op" id="8664816">++</span>&nbsp;<span class="op" id="8664819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8664827">if</span>&nbsp;<span class="op" id="8664830">!</span><span class="ident" id="8664831">eq</span><span class="op" id="8664833">(</span><span class="ident" id="8664834">dst</span><span class="op" id="8664837">.</span><span class="ident" id="8664838">At</span><span class="op" id="8664840">(</span><span class="ident" id="8664841">x</span><span class="op" id="8664842">,</span>&nbsp;<span class="ident" id="8664844">y</span><span class="op" id="8664845">)</span><span class="op" id="8664846">,</span>&nbsp;<span class="ident" id="8664848">golden</span><span class="op" id="8664854">.</span><span class="ident" id="8664855">At</span><span class="op" id="8664857">(</span><span class="ident" id="8664858">x</span><span class="op" id="8664859">,</span>&nbsp;<span class="ident" id="8664861">y</span><span class="op" id="8664862">)</span><span class="op" id="8664863">)</span>&nbsp;<span class="op" id="8664865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8664874">t</span><span class="op" id="8664875">.</span><span class="ident" id="8664876">Errorf</span><span class="op" id="8664882">(</span><span class="string" id="8664883">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="8664946">,</span>&nbsp;<span class="ident" id="8664948">xoff</span><span class="op" id="8664952">,</span>&nbsp;<span class="ident" id="8664954">yoff</span><span class="op" id="8664958">,</span>&nbsp;<span class="ident" id="8664960">x</span><span class="op" id="8664961">,</span>&nbsp;<span class="ident" id="8664963">y</span><span class="op" id="8664964">,</span>&nbsp;<span class="ident" id="8664966">dst</span><span class="op" id="8664969">.</span><span class="ident" id="8664970">At</span><span class="op" id="8664972">(</span><span class="ident" id="8664973">x</span><span class="op" id="8664974">,</span>&nbsp;<span class="ident" id="8664976">y</span><span class="op" id="8664977">)</span><span class="op" id="8664978">,</span>&nbsp;<span class="ident" id="8664980">golden</span><span class="op" id="8664986">.</span><span class="ident" id="8664987">At</span><span class="op" id="8664989">(</span><span class="ident" id="8664990">x</span><span class="op" id="8664991">,</span>&nbsp;<span class="ident" id="8664993">y</span><span class="op" id="8664994">)</span><span class="op" id="8664995">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8665004">continue</span>&nbsp;<span class="ident" id="8665013">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8665024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8665031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8665037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8665042">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8665046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8665049">}</span><br>
<span class="lineno"></span><span class="op" id="8665051">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8665054">//&nbsp;TestNonZeroSrcPt&nbsp;checks&nbsp;drawing&nbsp;with&nbsp;a&nbsp;non-zero&nbsp;src&nbsp;point&nbsp;parameter.</span><br>
<span class="lineno">285</span><span class="keyword" id="8665126">func</span>&nbsp;<span class="ident" id="8665131">TestNonZeroSrcPt</span><span class="op" id="8665147">(</span><span class="ident" id="8665148">t</span>&nbsp;<span class="op" id="8665150">*</span><span class="ident" id="8665151">testing</span><span class="op" id="8665158">.</span><span class="ident" id="8665159">T</span><span class="op" id="8665160">)</span>&nbsp;<span class="op" id="8665162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665165">a</span>&nbsp;<span class="op" id="8665167">:=</span>&nbsp;<span class="ident" id="8665170">image</span><span class="op" id="8665175">.</span><span class="ident" id="8665176">NewRGBA</span><span class="op" id="8665183">(</span><span class="ident" id="8665184">image</span><span class="op" id="8665189">.</span><span class="ident" id="8665190">Rect</span><span class="op" id="8665194">(</span><span class="num" id="8665195">0</span><span class="op" id="8665196">,</span>&nbsp;<span class="num" id="8665198">0</span><span class="op" id="8665199">,</span>&nbsp;<span class="num" id="8665201">1</span><span class="op" id="8665202">,</span>&nbsp;<span class="num" id="8665204">1</span><span class="op" id="8665205">)</span><span class="op" id="8665206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665209">b</span>&nbsp;<span class="op" id="8665211">:=</span>&nbsp;<span class="ident" id="8665214">image</span><span class="op" id="8665219">.</span><span class="ident" id="8665220">NewRGBA</span><span class="op" id="8665227">(</span><span class="ident" id="8665228">image</span><span class="op" id="8665233">.</span><span class="ident" id="8665234">Rect</span><span class="op" id="8665238">(</span><span class="num" id="8665239">0</span><span class="op" id="8665240">,</span>&nbsp;<span class="num" id="8665242">0</span><span class="op" id="8665243">,</span>&nbsp;<span class="num" id="8665245">2</span><span class="op" id="8665246">,</span>&nbsp;<span class="num" id="8665248">2</span><span class="op" id="8665249">)</span><span class="op" id="8665250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665253">b</span><span class="op" id="8665254">.</span><span class="ident" id="8665255">Set</span><span class="op" id="8665258">(</span><span class="num" id="8665259">0</span><span class="op" id="8665260">,</span>&nbsp;<span class="num" id="8665262">0</span><span class="op" id="8665263">,</span>&nbsp;<span class="ident" id="8665265">color</span><span class="op" id="8665270">.</span><span class="ident" id="8665271">RGBA</span><span class="op" id="8665275">{</span><span class="num" id="8665276">0</span><span class="op" id="8665277">,</span>&nbsp;<span class="num" id="8665279">0</span><span class="op" id="8665280">,</span>&nbsp;<span class="num" id="8665282">0</span><span class="op" id="8665283">,</span>&nbsp;<span class="num" id="8665285">5</span><span class="op" id="8665286">}</span><span class="op" id="8665287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665290">b</span><span class="op" id="8665291">.</span><span class="ident" id="8665292">Set</span><span class="op" id="8665295">(</span><span class="num" id="8665296">1</span><span class="op" id="8665297">,</span>&nbsp;<span class="num" id="8665299">0</span><span class="op" id="8665300">,</span>&nbsp;<span class="ident" id="8665302">color</span><span class="op" id="8665307">.</span><span class="ident" id="8665308">RGBA</span><span class="op" id="8665312">{</span><span class="num" id="8665313">0</span><span class="op" id="8665314">,</span>&nbsp;<span class="num" id="8665316">0</span><span class="op" id="8665317">,</span>&nbsp;<span class="num" id="8665319">5</span><span class="op" id="8665320">,</span>&nbsp;<span class="num" id="8665322">5</span><span class="op" id="8665323">}</span><span class="op" id="8665324">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665327">b</span><span class="op" id="8665328">.</span><span class="ident" id="8665329">Set</span><span class="op" id="8665332">(</span><span class="num" id="8665333">0</span><span class="op" id="8665334">,</span>&nbsp;<span class="num" id="8665336">1</span><span class="op" id="8665337">,</span>&nbsp;<span class="ident" id="8665339">color</span><span class="op" id="8665344">.</span><span class="ident" id="8665345">RGBA</span><span class="op" id="8665349">{</span><span class="num" id="8665350">0</span><span class="op" id="8665351">,</span>&nbsp;<span class="num" id="8665353">5</span><span class="op" id="8665354">,</span>&nbsp;<span class="num" id="8665356">0</span><span class="op" id="8665357">,</span>&nbsp;<span class="num" id="8665359">5</span><span class="op" id="8665360">}</span><span class="op" id="8665361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665364">b</span><span class="op" id="8665365">.</span><span class="ident" id="8665366">Set</span><span class="op" id="8665369">(</span><span class="num" id="8665370">1</span><span class="op" id="8665371">,</span>&nbsp;<span class="num" id="8665373">1</span><span class="op" id="8665374">,</span>&nbsp;<span class="ident" id="8665376">color</span><span class="op" id="8665381">.</span><span class="ident" id="8665382">RGBA</span><span class="op" id="8665386">{</span><span class="num" id="8665387">5</span><span class="op" id="8665388">,</span>&nbsp;<span class="num" id="8665390">0</span><span class="op" id="8665391">,</span>&nbsp;<span class="num" id="8665393">0</span><span class="op" id="8665394">,</span>&nbsp;<span class="num" id="8665396">5</span><span class="op" id="8665397">}</span><span class="op" id="8665398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665401">Draw</span><span class="op" id="8665405">(</span><span class="ident" id="8665406">a</span><span class="op" id="8665407">,</span>&nbsp;<span class="ident" id="8665409">image</span><span class="op" id="8665414">.</span><span class="ident" id="8665415">Rect</span><span class="op" id="8665419">(</span><span class="num" id="8665420">0</span><span class="op" id="8665421">,</span>&nbsp;<span class="num" id="8665423">0</span><span class="op" id="8665424">,</span>&nbsp;<span class="num" id="8665426">1</span><span class="op" id="8665427">,</span>&nbsp;<span class="num" id="8665429">1</span><span class="op" id="8665430">)</span><span class="op" id="8665431">,</span>&nbsp;<span class="ident" id="8665433">b</span><span class="op" id="8665434">,</span>&nbsp;<span class="ident" id="8665436">image</span><span class="op" id="8665441">.</span><span class="ident" id="8665442">Pt</span><span class="op" id="8665444">(</span><span class="num" id="8665445">1</span><span class="op" id="8665446">,</span>&nbsp;<span class="num" id="8665448">1</span><span class="op" id="8665449">)</span><span class="op" id="8665450">,</span>&nbsp;<span class="ident" id="8665452">Over</span><span class="op" id="8665456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8665459">if</span>&nbsp;<span class="op" id="8665462">!</span><span class="ident" id="8665463">eq</span><span class="op" id="8665465">(</span><span class="ident" id="8665466">color</span><span class="op" id="8665471">.</span><span class="ident" id="8665472">RGBA</span><span class="op" id="8665476">{</span><span class="num" id="8665477">5</span><span class="op" id="8665478">,</span>&nbsp;<span class="num" id="8665480">0</span><span class="op" id="8665481">,</span>&nbsp;<span class="num" id="8665483">0</span><span class="op" id="8665484">,</span>&nbsp;<span class="num" id="8665486">5</span><span class="op" id="8665487">}</span><span class="op" id="8665488">,</span>&nbsp;<span class="ident" id="8665490">a</span><span class="op" id="8665491">.</span><span class="ident" id="8665492">At</span><span class="op" id="8665494">(</span><span class="num" id="8665495">0</span><span class="op" id="8665496">,</span>&nbsp;<span class="num" id="8665498">0</span><span class="op" id="8665499">)</span><span class="op" id="8665500">)</span>&nbsp;<span class="op" id="8665502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665506">t</span><span class="op" id="8665507">.</span><span class="ident" id="8665508">Errorf</span><span class="op" id="8665514">(</span><span class="string" id="8665515">&#34;non-zero&nbsp;src&nbsp;pt:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8665548">,</span>&nbsp;<span class="ident" id="8665550">color</span><span class="op" id="8665555">.</span><span class="ident" id="8665556">RGBA</span><span class="op" id="8665560">{</span><span class="num" id="8665561">5</span><span class="op" id="8665562">,</span>&nbsp;<span class="num" id="8665564">0</span><span class="op" id="8665565">,</span>&nbsp;<span class="num" id="8665567">0</span><span class="op" id="8665568">,</span>&nbsp;<span class="num" id="8665570">5</span><span class="op" id="8665571">}</span><span class="op" id="8665572">,</span>&nbsp;<span class="ident" id="8665574">a</span><span class="op" id="8665575">.</span><span class="ident" id="8665576">At</span><span class="op" id="8665578">(</span><span class="num" id="8665579">0</span><span class="op" id="8665580">,</span>&nbsp;<span class="num" id="8665582">0</span><span class="op" id="8665583">)</span><span class="op" id="8665584">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8665587">}</span><br>
<span class="lineno"></span><span class="op" id="8665589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8665592">func</span>&nbsp;<span class="ident" id="8665597">TestFill</span><span class="op" id="8665605">(</span><span class="ident" id="8665606">t</span>&nbsp;<span class="op" id="8665608">*</span><span class="ident" id="8665609">testing</span><span class="op" id="8665616">.</span><span class="ident" id="8665617">T</span><span class="op" id="8665618">)</span>&nbsp;<span class="op" id="8665620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665623">rr</span>&nbsp;<span class="op" id="8665626">:=</span>&nbsp;<span class="op" id="8665629">[</span><span class="op" id="8665630">]</span><span class="ident" id="8665631">image</span><span class="op" id="8665636">.</span><span class="ident" id="8665637">Rectangle</span><span class="op" id="8665646">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665650">image</span><span class="op" id="8665655">.</span><span class="ident" id="8665656">Rect</span><span class="op" id="8665660">(</span><span class="num" id="8665661">0</span><span class="op" id="8665662">,</span>&nbsp;<span class="num" id="8665664">0</span><span class="op" id="8665665">,</span>&nbsp;<span class="num" id="8665667">0</span><span class="op" id="8665668">,</span>&nbsp;<span class="num" id="8665670">0</span><span class="op" id="8665671">)</span><span class="op" id="8665672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665676">image</span><span class="op" id="8665681">.</span><span class="ident" id="8665682">Rect</span><span class="op" id="8665686">(</span><span class="num" id="8665687">0</span><span class="op" id="8665688">,</span>&nbsp;<span class="num" id="8665690">0</span><span class="op" id="8665691">,</span>&nbsp;<span class="num" id="8665693">40</span><span class="op" id="8665695">,</span>&nbsp;<span class="num" id="8665697">30</span><span class="op" id="8665699">)</span><span class="op" id="8665700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665704">image</span><span class="op" id="8665709">.</span><span class="ident" id="8665710">Rect</span><span class="op" id="8665714">(</span><span class="num" id="8665715">10</span><span class="op" id="8665717">,</span>&nbsp;<span class="num" id="8665719">0</span><span class="op" id="8665720">,</span>&nbsp;<span class="num" id="8665722">40</span><span class="op" id="8665724">,</span>&nbsp;<span class="num" id="8665726">30</span><span class="op" id="8665728">)</span><span class="op" id="8665729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665733">image</span><span class="op" id="8665738">.</span><span class="ident" id="8665739">Rect</span><span class="op" id="8665743">(</span><span class="num" id="8665744">0</span><span class="op" id="8665745">,</span>&nbsp;<span class="num" id="8665747">20</span><span class="op" id="8665749">,</span>&nbsp;<span class="num" id="8665751">40</span><span class="op" id="8665753">,</span>&nbsp;<span class="num" id="8665755">30</span><span class="op" id="8665757">)</span><span class="op" id="8665758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665762">image</span><span class="op" id="8665767">.</span><span class="ident" id="8665768">Rect</span><span class="op" id="8665772">(</span><span class="num" id="8665773">10</span><span class="op" id="8665775">,</span>&nbsp;<span class="num" id="8665777">20</span><span class="op" id="8665779">,</span>&nbsp;<span class="num" id="8665781">40</span><span class="op" id="8665783">,</span>&nbsp;<span class="num" id="8665785">30</span><span class="op" id="8665787">)</span><span class="op" id="8665788">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665792">image</span><span class="op" id="8665797">.</span><span class="ident" id="8665798">Rect</span><span class="op" id="8665802">(</span><span class="num" id="8665803">10</span><span class="op" id="8665805">,</span>&nbsp;<span class="num" id="8665807">20</span><span class="op" id="8665809">,</span>&nbsp;<span class="num" id="8665811">15</span><span class="op" id="8665813">,</span>&nbsp;<span class="num" id="8665815">25</span><span class="op" id="8665817">)</span><span class="op" id="8665818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665822">image</span><span class="op" id="8665827">.</span><span class="ident" id="8665828">Rect</span><span class="op" id="8665832">(</span><span class="num" id="8665833">10</span><span class="op" id="8665835">,</span>&nbsp;<span class="num" id="8665837">0</span><span class="op" id="8665838">,</span>&nbsp;<span class="num" id="8665840">35</span><span class="op" id="8665842">,</span>&nbsp;<span class="num" id="8665844">30</span><span class="op" id="8665846">)</span><span class="op" id="8665847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665851">image</span><span class="op" id="8665856">.</span><span class="ident" id="8665857">Rect</span><span class="op" id="8665861">(</span><span class="num" id="8665862">0</span><span class="op" id="8665863">,</span>&nbsp;<span class="num" id="8665865">15</span><span class="op" id="8665867">,</span>&nbsp;<span class="num" id="8665869">40</span><span class="op" id="8665871">,</span>&nbsp;<span class="num" id="8665873">16</span><span class="op" id="8665875">)</span><span class="op" id="8665876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665880">image</span><span class="op" id="8665885">.</span><span class="ident" id="8665886">Rect</span><span class="op" id="8665890">(</span><span class="num" id="8665891">24</span><span class="op" id="8665893">,</span>&nbsp;<span class="num" id="8665895">24</span><span class="op" id="8665897">,</span>&nbsp;<span class="num" id="8665899">25</span><span class="op" id="8665901">,</span>&nbsp;<span class="num" id="8665903">25</span><span class="op" id="8665905">)</span><span class="op" id="8665906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665910">image</span><span class="op" id="8665915">.</span><span class="ident" id="8665916">Rect</span><span class="op" id="8665920">(</span><span class="num" id="8665921">23</span><span class="op" id="8665923">,</span>&nbsp;<span class="num" id="8665925">23</span><span class="op" id="8665927">,</span>&nbsp;<span class="num" id="8665929">26</span><span class="op" id="8665931">,</span>&nbsp;<span class="num" id="8665933">26</span><span class="op" id="8665935">)</span><span class="op" id="8665936">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665940">image</span><span class="op" id="8665945">.</span><span class="ident" id="8665946">Rect</span><span class="op" id="8665950">(</span><span class="num" id="8665951">22</span><span class="op" id="8665953">,</span>&nbsp;<span class="num" id="8665955">22</span><span class="op" id="8665957">,</span>&nbsp;<span class="num" id="8665959">27</span><span class="op" id="8665961">,</span>&nbsp;<span class="num" id="8665963">27</span><span class="op" id="8665965">)</span><span class="op" id="8665966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665970">image</span><span class="op" id="8665975">.</span><span class="ident" id="8665976">Rect</span><span class="op" id="8665980">(</span><span class="num" id="8665981">21</span><span class="op" id="8665983">,</span>&nbsp;<span class="num" id="8665985">21</span><span class="op" id="8665987">,</span>&nbsp;<span class="num" id="8665989">28</span><span class="op" id="8665991">,</span>&nbsp;<span class="num" id="8665993">28</span><span class="op" id="8665995">)</span><span class="op" id="8665996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8666000">image</span><span class="op" id="8666005">.</span><span class="ident" id="8666006">Rect</span><span class="op" id="8666010">(</span><span class="num" id="8666011">20</span><span class="op" id="8666013">,</span>&nbsp;<span class="num" id="8666015">20</span><span class="op" id="8666017">,</span>&nbsp;<span class="num" id="8666019">29</span><span class="op" id="8666021">,</span>&nbsp;<span class="num" id="8666023">29</span><span class="op" id="8666025">)</span><span class="op" id="8666026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8666029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8666032">for</span>&nbsp;<span class="ident" id="8666036">_</span><span class="op" id="8666037">,</span>&nbsp;<span class="ident" id="8666039">r</span>&nbsp;<span class="op" id="8666041">:=</span>&nbsp;<span class="keyword" id="8666044">range</span>&nbsp;<span class="ident" id="8666050">rr</span>&nbsp;<span class="op" id="8666053">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8666057">m</span>&nbsp;<span class="op" id="8666059">:=</span>&nbsp;<span class="ident" id="8666062">image</span><span class="op" id="8666067">.</span><span class="ident" id="8666068">NewRGBA</span><span class="op" id="8666075">(</span><span class="ident" id="8666076">image</span><span class="op" id="8666081">.</span><span class="ident" id="8666082">Rect</span><span class="op" id="8666086">(</span><span class="num" id="8666087">0</span><span class="op" id="8666088">,</span>&nbsp;<span class="num" id="8666090">0</span><span class="op" id="8666091">,</span>&nbsp;<span class="num" id="8666093">40</span><span class="op" id="8666095">,</span>&nbsp;<span class="num" id="8666097">30</span><span class="op" id="8666099">)</span><span class="op" id="8666100">)</span><span class="op" id="8666101">.</span><span class="ident" id="8666102">SubImage</span><span class="op" id="8666110">(</span><span class="ident" id="8666111">r</span><span class="op" id="8666112">)</span><span class="op" id="8666113">.</span><span class="op" id="8666114">(</span><span class="op" id="8666115">*</span><span class="ident" id="8666116">image</span><span class="op" id="8666121">.</span><span class="ident" id="8666122">RGBA</span><span class="op" id="8666126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8666130">b</span>&nbsp;<span class="op" id="8666132">:=</span>&nbsp;<span class="ident" id="8666135">m</span><span class="op" id="8666136">.</span><span class="ident" id="8666137">Bounds</span><span class="op" id="8666143">(</span><span class="op" id="8666144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8666148">c</span>&nbsp;<span class="op" id="8666150">:=</span>&nbsp;<span class="ident" id="8666153">color</span><span class="op" id="8666158">.</span><span class="ident" id="8666159">RGBA</span><span class="op" id="8666163">{</span><span class="num" id="8666164">11</span><span class="op" id="8666166">,</span>&nbsp;<span class="num" id="8666168">0</span><span class="op" id="8666169">,</span>&nbsp;<span class="num" id="8666171">0</span><span class="op" id="8666172">,</span>&nbsp;<span class="num" id="8666174">255</span><span class="op" id="8666177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8666181">src</span>&nbsp;<span class="op" id="8666185">:=</span>&nbsp;<span class="op" id="8666188">&amp;</span><span class="ident" id="8666189">image</span><span class="op" id="8666194">.</span><span class="ident" id="8666195">Uniform</span><span class="op" id="8666202">{</span><span class="ident" id="8666203">C</span><span class="op" id="8666204">:</span>&nbsp;<span class="ident" id="8666206">c</span><span class="op" id="8666207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8666211">check</span>&nbsp;<span class="op" id="8666217">:=</span>&nbsp;<span class="keyword" id="8666220">func</span><span class="op" id="8666224">(</span><span class="ident" id="8666225">desc</span>&nbsp;<span class="builtintype" id="8666230">string</span><span class="op" id="8666236">)</span>&nbsp;<span class="op" id="8666238">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8666243">for</span>&nbsp;<span class="ident" id="8666247">y</span>&nbsp;<span class="op" id="8666249">:=</span>&nbsp;<span class="ident" id="8666252">b</span><span class="op" id="8666253">.</span><span class="ident" id="8666254">Min</span><span class="op" id="8666257">.</span><span class="ident" id="8666258">Y</span><span class="op" id="8666259">;</span>&nbsp;<span class="ident" id="8666261">y</span>&nbsp;<span class="op" id="8666263">&lt;</span>&nbsp;<span class="ident" id="8666265">b</span><span class="op" id="8666266">.</span><span class="ident" id="8666267">Max</span><span class="op" id="8666270">.</span><span class="ident" id="8666271">Y</span><span class="op" id="8666272">;</span>&nbsp;<span class="ident" id="8666274">y</span><span class="op" id="8666275">++</span>&nbsp;<span class="op" id="8666278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8666284">for</span>&nbsp;<span class="ident" id="8666288">x</span>&nbsp;<span class="op" id="8666290">:=</span>&nbsp;<span class="ident" id="8666293">b</span><span class="op" id="8666294">.</span><span class="ident" id="8666295">Min</span><span class="op" id="8666298">.</span><span class="ident" id="8666299">X</span><span class="op" id="8666300">;</span>&nbsp;<span class="ident" id="8666302">x</span>&nbsp;<span class="op" id="8666304">&lt;</span>&nbsp;<span class="ident" id="8666306">b</span><span class="op" id="8666307">.</span><span class="ident" id="8666308">Max</span><span class="op" id="8666311">.</span><span class="ident" id="8666312">X</span><span class="op" id="8666313">;</span>&nbsp;<span class="ident" id="8666315">x</span><span class="op" id="8666316">++</span>&nbsp;<span class="op" id="8666319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8666326">if</span>&nbsp;<span class="op" id="8666329">!</span><span class="ident" id="8666330">eq</span><span class="op" id="8666332">(</span><span class="ident" id="8666333">c</span><span class="op" id="8666334">,</span>&nbsp;<span class="ident" id="8666336">m</span><span class="op" id="8666337">.</span><span class="ident" id="8666338">At</span><span class="op" id="8666340">(</span><span class="ident" id="8666341">x</span><span class="op" id="8666342">,</span>&nbsp;<span class="ident" id="8666344">y</span><span class="op" id="8666345">)</span><span class="op" id="8666346">)</span>&nbsp;<span class="op" id="8666348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8666356">t</span><span class="op" id="8666357">.</span><span class="ident" id="8666358">Errorf</span><span class="op" id="8666364">(</span><span class="string" id="8666365">&#34;%s&nbsp;fill:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;sub-image&nbsp;bounds=%v:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8666424">,</span>&nbsp;<span class="ident" id="8666426">desc</span><span class="op" id="8666430">,</span>&nbsp;<span class="ident" id="8666432">x</span><span class="op" id="8666433">,</span>&nbsp;<span class="ident" id="8666435">y</span><span class="op" id="8666436">,</span>&nbsp;<span class="ident" id="8666438">r</span><span class="op" id="8666439">,</span>&nbsp;<span class="ident" id="8666441">c</span><span class="op" id="8666442">,</span>&nbsp;<span class="ident" id="8666444">m</span><span class="op" id="8666445">.</span><span class="ident" id="8666446">At</span><span class="op" id="8666448">(</span><span class="ident" id="8666449">x</span><span class="op" id="8666450">,</span>&nbsp;<span class="ident" id="8666452">y</span><span class="op" id="8666453">)</span><span class="op" id="8666454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8666462">return</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8666474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8666480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8666485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8666489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8666493">//&nbsp;Draw&nbsp;1&nbsp;pixel&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8666522">for</span>&nbsp;<span class="ident" id="8666526">y</span>&nbsp;<span class="op" id="8666528">:=</span>&nbsp;<span class="ident" id="8666531">b</span><span class="op" id="8666532">.</span><span class="ident" id="8666533">Min</span><span class="op" id="8666536">.</span><span class="ident" id="8666537">Y</span><span class="op" id="8666538">;</span>&nbsp;<span class="ident" id="8666540">y</span>&nbsp;<span class="op" id="8666542">&lt;</span>&nbsp;<span class="ident" id="8666544">b</span><span class="op" id="8666545">.</span><span class="ident" id="8666546">Max</span><span class="op" id="8666549">.</span><span class="ident" id="8666550">Y</span><span class="op" id="8666551">;</span>&nbsp;<span class="ident" id="8666553">y</span><span class="op" id="8666554">++</span>&nbsp;<span class="op" id="8666557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8666562">for</span>&nbsp;<span class="ident" id="8666566">x</span>&nbsp;<span class="op" id="8666568">:=</span>&nbsp;<span class="ident" id="8666571">b</span><span class="op" id="8666572">.</span><span class="ident" id="8666573">Min</span><span class="op" id="8666576">.</span><span class="ident" id="8666577">X</span><span class="op" id="8666578">;</span>&nbsp;<span class="ident" id="8666580">x</span>&nbsp;<span class="op" id="8666582">&lt;</span>&nbsp;<span class="ident" id="8666584">b</span><span class="op" id="8666585">.</span><span class="ident" id="8666586">Max</span><span class="op" id="8666589">.</span><span class="ident" id="8666590">X</span><span class="op" id="8666591">;</span>&nbsp;<span class="ident" id="8666593">x</span><span class="op" id="8666594">++</span>&nbsp;<span class="op" id="8666597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8666603">DrawMask</span><span class="op" id="8666611">(</span><span class="ident" id="8666612">m</span><span class="op" id="8666613">,</span>&nbsp;<span class="ident" id="8666615">image</span><span class="op" id="8666620">.</span><span class="ident" id="8666621">Rect</span><span class="op" id="8666625">(</span><span class="ident" id="8666626">x</span><span class="op" id="8666627">,</span>&nbsp;<span class="ident" id="8666629">y</span><span class="op" id="8666630">,</span>&nbsp;<span class="ident" id="8666632">x</span><span class="op" id="8666633">+</span><span class="num" id="8666634">1</span><span class="op" id="8666635">,</span>&nbsp;<span class="ident" id="8666637">y</span><span class="op" id="8666638">+</span><span class="num" id="8666639">1</span><span class="op" id="8666640">)</span><span class="op" id="8666641">,</span>&nbsp;<span class="ident" id="8666643">src</span><span class="op" id="8666646">,</span>&nbsp;<span class="ident" id="8666648">image</span><span class="op" id="8666653">.</span><span class="ident" id="8666654">ZP</span><span class="op" id="8666656">,</span>&nbsp;<span class="ident" id="8666658">nil</span><span class="op" id="8666661">,</span>&nbsp;<span class="ident" id="8666663">image</span><span class="op" id="8666668">.</span><span class="ident" id="8666669">ZP</span><span class="op" id="8666671">,</span>&nbsp;<span class="ident" id="8666673">Src</span><span class="op" id="8666676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8666681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8666685">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8666689">check</span><span class="op" id="8666694">(</span><span class="string" id="8666695">&#34;pixel&#34;</span><span class="op" id="8666702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8666706">//&nbsp;Draw&nbsp;1&nbsp;row&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8666733">c</span>&nbsp;<span class="op" id="8666735">=</span>&nbsp;<span class="ident" id="8666737">color</span><span class="op" id="8666742">.</span><span class="ident" id="8666743">RGBA</span><span class="op" id="8666747">{</span><span class="num" id="8666748">0</span><span class="op" id="8666749">,</span>&nbsp;<span class="num" id="8666751">22</span><span class="op" id="8666753">,</span>&nbsp;<span class="num" id="8666755">0</span><span class="op" id="8666756">,</span>&nbsp;<span class="num" id="8666758">255</span><span class="op" id="8666761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8666765">src</span>&nbsp;<span class="op" id="8666769">=</span>&nbsp;<span class="op" id="8666771">&amp;</span><span class="ident" id="8666772">image</span><span class="op" id="8666777">.</span><span class="ident" id="8666778">Uniform</span><span class="op" id="8666785">{</span><span class="ident" id="8666786">C</span><span class="op" id="8666787">:</span>&nbsp;<span class="ident" id="8666789">c</span><span class="op" id="8666790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8666794">for</span>&nbsp;<span class="ident" id="8666798">y</span>&nbsp;<span class="op" id="8666800">:=</span>&nbsp;<span class="ident" id="8666803">b</span><span class="op" id="8666804">.</span><span class="ident" id="8666805">Min</span><span class="op" id="8666808">.</span><span class="ident" id="8666809">Y</span><span class="op" id="8666810">;</span>&nbsp;<span class="ident" id="8666812">y</span>&nbsp;<span class="op" id="8666814">&lt;</span>&nbsp;<span class="ident" id="8666816">b</span><span class="op" id="8666817">.</span><span class="ident" id="8666818">Max</span><span class="op" id="8666821">.</span><span class="ident" id="8666822">Y</span><span class="op" id="8666823">;</span>&nbsp;<span class="ident" id="8666825">y</span><span class="op" id="8666826">++</span>&nbsp;<span class="op" id="8666829">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8666834">DrawMask</span><span class="op" id="8666842">(</span><span class="ident" id="8666843">m</span><span class="op" id="8666844">,</span>&nbsp;<span class="ident" id="8666846">image</span><span class="op" id="8666851">.</span><span class="ident" id="8666852">Rect</span><span class="op" id="8666856">(</span><span class="ident" id="8666857">b</span><span class="op" id="8666858">.</span><span class="ident" id="8666859">Min</span><span class="op" id="8666862">.</span><span class="ident" id="8666863">X</span><span class="op" id="8666864">,</span>&nbsp;<span class="ident" id="8666866">y</span><span class="op" id="8666867">,</span>&nbsp;<span class="ident" id="8666869">b</span><span class="op" id="8666870">.</span><span class="ident" id="8666871">Max</span><span class="op" id="8666874">.</span><span class="ident" id="8666875">X</span><span class="op" id="8666876">,</span>&nbsp;<span class="ident" id="8666878">y</span><span class="op" id="8666879">+</span><span class="num" id="8666880">1</span><span class="op" id="8666881">)</span><span class="op" id="8666882">,</span>&nbsp;<span class="ident" id="8666884">src</span><span class="op" id="8666887">,</span>&nbsp;<span class="ident" id="8666889">image</span><span class="op" id="8666894">.</span><span class="ident" id="8666895">ZP</span><span class="op" id="8666897">,</span>&nbsp;<span class="ident" id="8666899">nil</span><span class="op" id="8666902">,</span>&nbsp;<span class="ident" id="8666904">image</span><span class="op" id="8666909">.</span><span class="ident" id="8666910">ZP</span><span class="op" id="8666912">,</span>&nbsp;<span class="ident" id="8666914">Src</span><span class="op" id="8666917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8666921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8666925">check</span><span class="op" id="8666930">(</span><span class="string" id="8666931">&#34;row&#34;</span><span class="op" id="8666936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8666940">//&nbsp;Draw&nbsp;1&nbsp;column&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8666970">c</span>&nbsp;<span class="op" id="8666972">=</span>&nbsp;<span class="ident" id="8666974">color</span><span class="op" id="8666979">.</span><span class="ident" id="8666980">RGBA</span><span class="op" id="8666984">{</span><span class="num" id="8666985">0</span><span class="op" id="8666986">,</span>&nbsp;<span class="num" id="8666988">0</span><span class="op" id="8666989">,</span>&nbsp;<span class="num" id="8666991">33</span><span class="op" id="8666993">,</span>&nbsp;<span class="num" id="8666995">255</span><span class="op" id="8666998">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8667002">src</span>&nbsp;<span class="op" id="8667006">=</span>&nbsp;<span class="op" id="8667008">&amp;</span><span class="ident" id="8667009">image</span><span class="op" id="8667014">.</span><span class="ident" id="8667015">Uniform</span><span class="op" id="8667022">{</span><span class="ident" id="8667023">C</span><span class="op" id="8667024">:</span>&nbsp;<span class="ident" id="8667026">c</span><span class="op" id="8667027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8667031">for</span>&nbsp;<span class="ident" id="8667035">x</span>&nbsp;<span class="op" id="8667037">:=</span>&nbsp;<span class="ident" id="8667040">b</span><span class="op" id="8667041">.</span><span class="ident" id="8667042">Min</span><span class="op" id="8667045">.</span><span class="ident" id="8667046">X</span><span class="op" id="8667047">;</span>&nbsp;<span class="ident" id="8667049">x</span>&nbsp;<span class="op" id="8667051">&lt;</span>&nbsp;<span class="ident" id="8667053">b</span><span class="op" id="8667054">.</span><span class="ident" id="8667055">Max</span><span class="op" id="8667058">.</span><span class="ident" id="8667059">X</span><span class="op" id="8667060">;</span>&nbsp;<span class="ident" id="8667062">x</span><span class="op" id="8667063">++</span>&nbsp;<span class="op" id="8667066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8667071">DrawMask</span><span class="op" id="8667079">(</span><span class="ident" id="8667080">m</span><span class="op" id="8667081">,</span>&nbsp;<span class="ident" id="8667083">image</span><span class="op" id="8667088">.</span><span class="ident" id="8667089">Rect</span><span class="op" id="8667093">(</span><span class="ident" id="8667094">x</span><span class="op" id="8667095">,</span>&nbsp;<span class="ident" id="8667097">b</span><span class="op" id="8667098">.</span><span class="ident" id="8667099">Min</span><span class="op" id="8667102">.</span><span class="ident" id="8667103">Y</span><span class="op" id="8667104">,</span>&nbsp;<span class="ident" id="8667106">x</span><span class="op" id="8667107">+</span><span class="num" id="8667108">1</span><span class="op" id="8667109">,</span>&nbsp;<span class="ident" id="8667111">b</span><span class="op" id="8667112">.</span><span class="ident" id="8667113">Max</span><span class="op" id="8667116">.</span><span class="ident" id="8667117">Y</span><span class="op" id="8667118">)</span><span class="op" id="8667119">,</span>&nbsp;<span class="ident" id="8667121">src</span><span class="op" id="8667124">,</span>&nbsp;<span class="ident" id="8667126">image</span><span class="op" id="8667131">.</span><span class="ident" id="8667132">ZP</span><span class="op" id="8667134">,</span>&nbsp;<span class="ident" id="8667136">nil</span><span class="op" id="8667139">,</span>&nbsp;<span class="ident" id="8667141">image</span><span class="op" id="8667146">.</span><span class="ident" id="8667147">ZP</span><span class="op" id="8667149">,</span>&nbsp;<span class="ident" id="8667151">Src</span><span class="op" id="8667154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8667158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8667162">check</span><span class="op" id="8667167">(</span><span class="string" id="8667168">&#34;column&#34;</span><span class="op" id="8667176">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8667180">//&nbsp;Draw&nbsp;the&nbsp;whole&nbsp;image&nbsp;at&nbsp;once.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8667215">c</span>&nbsp;<span class="op" id="8667217">=</span>&nbsp;<span class="ident" id="8667219">color</span><span class="op" id="8667224">.</span><span class="ident" id="8667225">RGBA</span><span class="op" id="8667229">{</span><span class="num" id="8667230">44</span><span class="op" id="8667232">,</span>&nbsp;<span class="num" id="8667234">55</span><span class="op" id="8667236">,</span>&nbsp;<span class="num" id="8667238">66</span><span class="op" id="8667240">,</span>&nbsp;<span class="num" id="8667242">77</span><span class="op" id="8667244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8667248">src</span>&nbsp;<span class="op" id="8667252">=</span>&nbsp;<span class="op" id="8667254">&amp;</span><span class="ident" id="8667255">image</span><span class="op" id="8667260">.</span><span class="ident" id="8667261">Uniform</span><span class="op" id="8667268">{</span><span class="ident" id="8667269">C</span><span class="op" id="8667270">:</span>&nbsp;<span class="ident" id="8667272">c</span><span class="op" id="8667273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8667277">DrawMask</span><span class="op" id="8667285">(</span><span class="ident" id="8667286">m</span><span class="op" id="8667287">,</span>&nbsp;<span class="ident" id="8667289">b</span><span class="op" id="8667290">,</span>&nbsp;<span class="ident" id="8667292">src</span><span class="op" id="8667295">,</span>&nbsp;<span class="ident" id="8667297">image</span><span class="op" id="8667302">.</span><span class="ident" id="8667303">ZP</span><span class="op" id="8667305">,</span>&nbsp;<span class="ident" id="8667307">nil</span><span class="op" id="8667310">,</span>&nbsp;<span class="ident" id="8667312">image</span><span class="op" id="8667317">.</span><span class="ident" id="8667318">ZP</span><span class="op" id="8667320">,</span>&nbsp;<span class="ident" id="8667322">Src</span><span class="op" id="8667325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8667329">check</span><span class="op" id="8667334">(</span><span class="string" id="8667335">&#34;whole&#34;</span><span class="op" id="8667342">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8667345">}</span><br>
<span class="lineno"></span><span class="op" id="8667347">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8667350">//&nbsp;TestFloydSteinbergCheckerboard&nbsp;tests&nbsp;that&nbsp;the&nbsp;result&nbsp;of&nbsp;Floyd-Steinberg</span><br>
<span class="lineno"></span><span class="comment" id="8667425">//&nbsp;error&nbsp;diffusion&nbsp;of&nbsp;a&nbsp;uniform&nbsp;50%&nbsp;gray&nbsp;source&nbsp;image&nbsp;with&nbsp;a&nbsp;black-and-white</span><br>
<span class="lineno">360</span><span class="comment" id="8667502">//&nbsp;palette&nbsp;is&nbsp;a&nbsp;checkerboard&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="keyword" id="8667540">func</span>&nbsp;<span class="ident" id="8667545">TestFloydSteinbergCheckerboard</span><span class="op" id="8667575">(</span><span class="ident" id="8667576">t</span>&nbsp;<span class="op" id="8667578">*</span><span class="ident" id="8667579">testing</span><span class="op" id="8667586">.</span><span class="ident" id="8667587">T</span><span class="op" id="8667588">)</span>&nbsp;<span class="op" id="8667590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8667593">b</span>&nbsp;<span class="op" id="8667595">:=</span>&nbsp;<span class="ident" id="8667598">image</span><span class="op" id="8667603">.</span><span class="ident" id="8667604">Rect</span><span class="op" id="8667608">(</span><span class="num" id="8667609">0</span><span class="op" id="8667610">,</span>&nbsp;<span class="num" id="8667612">0</span><span class="op" id="8667613">,</span>&nbsp;<span class="num" id="8667615">640</span><span class="op" id="8667618">,</span>&nbsp;<span class="num" id="8667620">480</span><span class="op" id="8667623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8667626">//&nbsp;We&nbsp;can&#39;t&nbsp;represent&nbsp;50%&nbsp;exactly,&nbsp;but&nbsp;0x7fff&nbsp;/&nbsp;0xffff&nbsp;is&nbsp;close&nbsp;enough.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8667699">src</span>&nbsp;<span class="op" id="8667703">:=</span>&nbsp;<span class="op" id="8667706">&amp;</span><span class="ident" id="8667707">image</span><span class="op" id="8667712">.</span><span class="ident" id="8667713">Uniform</span><span class="op" id="8667720">{</span><span class="ident" id="8667721">color</span><span class="op" id="8667726">.</span><span class="ident" id="8667727">Gray16</span><span class="op" id="8667733">{</span><span class="num" id="8667734">0x7fff</span><span class="op" id="8667740">}</span><span class="op" id="8667741">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8667744">dst</span>&nbsp;<span class="op" id="8667748">:=</span>&nbsp;<span class="ident" id="8667751">image</span><span class="op" id="8667756">.</span><span class="ident" id="8667757">NewPaletted</span><span class="op" id="8667768">(</span><span class="ident" id="8667769">b</span><span class="op" id="8667770">,</span>&nbsp;<span class="ident" id="8667772">color</span><span class="op" id="8667777">.</span><span class="ident" id="8667778">Palette</span><span class="op" id="8667785">{</span><span class="ident" id="8667786">color</span><span class="op" id="8667791">.</span><span class="ident" id="8667792">Black</span><span class="op" id="8667797">,</span>&nbsp;<span class="ident" id="8667799">color</span><span class="op" id="8667804">.</span><span class="ident" id="8667805">White</span><span class="op" id="8667810">}</span><span class="op" id="8667811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8667814">FloydSteinberg</span><span class="op" id="8667828">.</span><span class="ident" id="8667829">Draw</span><span class="op" id="8667833">(</span><span class="ident" id="8667834">dst</span><span class="op" id="8667837">,</span>&nbsp;<span class="ident" id="8667839">b</span><span class="op" id="8667840">,</span>&nbsp;<span class="ident" id="8667842">src</span><span class="op" id="8667845">,</span>&nbsp;<span class="ident" id="8667847">image</span><span class="op" id="8667852">.</span><span class="ident" id="8667853">Point</span><span class="op" id="8667858">{</span><span class="op" id="8667859">}</span><span class="op" id="8667860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8667863">nErr</span>&nbsp;<span class="op" id="8667868">:=</span>&nbsp;<span class="num" id="8667871">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8667874">for</span>&nbsp;<span class="ident" id="8667878">y</span>&nbsp;<span class="op" id="8667880">:=</span>&nbsp;<span class="ident" id="8667883">b</span><span class="op" id="8667884">.</span><span class="ident" id="8667885">Min</span><span class="op" id="8667888">.</span><span class="ident" id="8667889">Y</span><span class="op" id="8667890">;</span>&nbsp;<span class="ident" id="8667892">y</span>&nbsp;<span class="op" id="8667894">&lt;</span>&nbsp;<span class="ident" id="8667896">b</span><span class="op" id="8667897">.</span><span class="ident" id="8667898">Max</span><span class="op" id="8667901">.</span><span class="ident" id="8667902">Y</span><span class="op" id="8667903">;</span>&nbsp;<span class="ident" id="8667905">y</span><span class="op" id="8667906">++</span>&nbsp;<span class="op" id="8667909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8667913">for</span>&nbsp;<span class="ident" id="8667917">x</span>&nbsp;<span class="op" id="8667919">:=</span>&nbsp;<span class="ident" id="8667922">b</span><span class="op" id="8667923">.</span><span class="ident" id="8667924">Min</span><span class="op" id="8667927">.</span><span class="ident" id="8667928">X</span><span class="op" id="8667929">;</span>&nbsp;<span class="ident" id="8667931">x</span>&nbsp;<span class="op" id="8667933">&lt;</span>&nbsp;<span class="ident" id="8667935">b</span><span class="op" id="8667936">.</span><span class="ident" id="8667937">Max</span><span class="op" id="8667940">.</span><span class="ident" id="8667941">X</span><span class="op" id="8667942">;</span>&nbsp;<span class="ident" id="8667944">x</span><span class="op" id="8667945">++</span>&nbsp;<span class="op" id="8667948">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8667953">got</span>&nbsp;<span class="op" id="8667957">:=</span>&nbsp;<span class="ident" id="8667960">dst</span><span class="op" id="8667963">.</span><span class="ident" id="8667964">Pix</span><span class="op" id="8667967">[</span><span class="ident" id="8667968">dst</span><span class="op" id="8667971">.</span><span class="ident" id="8667972">PixOffset</span><span class="op" id="8667981">(</span><span class="ident" id="8667982">x</span><span class="op" id="8667983">,</span>&nbsp;<span class="ident" id="8667985">y</span><span class="op" id="8667986">)</span><span class="op" id="8667987">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8667992">want</span>&nbsp;<span class="op" id="8667997">:=</span>&nbsp;<span class="builtintype" id="8668000">uint8</span><span class="op" id="8668005">(</span><span class="ident" id="8668006">x</span><span class="op" id="8668007">+</span><span class="ident" id="8668008">y</span><span class="op" id="8668009">)</span>&nbsp;<span class="op" id="8668011">%</span>&nbsp;<span class="num" id="8668013">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8668018">if</span>&nbsp;<span class="ident" id="8668021">got</span>&nbsp;<span class="op" id="8668025">!=</span>&nbsp;<span class="ident" id="8668028">want</span>&nbsp;<span class="op" id="8668033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8668039">t</span><span class="op" id="8668040">.</span><span class="ident" id="8668041">Errorf</span><span class="op" id="8668047">(</span><span class="string" id="8668048">&#34;at&nbsp;(%d,&nbsp;%d):&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8668078">,</span>&nbsp;<span class="ident" id="8668080">x</span><span class="op" id="8668081">,</span>&nbsp;<span class="ident" id="8668083">y</span><span class="op" id="8668084">,</span>&nbsp;<span class="ident" id="8668086">got</span><span class="op" id="8668089">,</span>&nbsp;<span class="ident" id="8668091">want</span><span class="op" id="8668095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8668101">if</span>&nbsp;<span class="ident" id="8668104">nErr</span><span class="op" id="8668108">++</span><span class="op" id="8668110">;</span>&nbsp;<span class="ident" id="8668112">nErr</span>&nbsp;<span class="op" id="8668117">==</span>&nbsp;<span class="num" id="8668120">10</span>&nbsp;<span class="op" id="8668123">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8668130">t</span><span class="op" id="8668131">.</span><span class="ident" id="8668132">Fatal</span><span class="op" id="8668137">(</span><span class="string" id="8668138">&#34;there&nbsp;may&nbsp;be&nbsp;more&nbsp;errors&#34;</span><span class="op" id="8668164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8668170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8668175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8668179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8668182">}</span><br>
<span class="lineno">380</span><span class="op" id="8668184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8668187">//&nbsp;embeddedPaletted&nbsp;is&nbsp;an&nbsp;Image&nbsp;that&nbsp;behaves&nbsp;like&nbsp;an&nbsp;*image.Paletted&nbsp;but&nbsp;whose</span><br>
<span class="lineno"></span><span class="comment" id="8668266">//&nbsp;type&nbsp;is&nbsp;not&nbsp;*image.Paletted.</span><br>
<span class="lineno"></span><span class="keyword" id="8668298">type</span>&nbsp;<span class="ident" id="8668303">embeddedPaletted</span>&nbsp;<span class="keyword" id="8668320">struct</span>&nbsp;<span class="op" id="8668327">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8668330">*</span><span class="ident" id="8668331">image</span><span class="op" id="8668336">.</span><span class="ident" id="8668337">Paletted</span><br>
<span class="lineno"></span><span class="op" id="8668346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8668349">//&nbsp;TestPaletted&nbsp;tests&nbsp;that&nbsp;the&nbsp;drawPaletted&nbsp;function&nbsp;behaves&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="8668419">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;dst&nbsp;is&nbsp;an&nbsp;*image.Paletted.</span><br>
<span class="lineno">390</span><span class="keyword" id="8668471">func</span>&nbsp;<span class="ident" id="8668476">TestPaletted</span><span class="op" id="8668488">(</span><span class="ident" id="8668489">t</span>&nbsp;<span class="op" id="8668491">*</span><span class="ident" id="8668492">testing</span><span class="op" id="8668499">.</span><span class="ident" id="8668500">T</span><span class="op" id="8668501">)</span>&nbsp;<span class="op" id="8668503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8668506">f</span><span class="op" id="8668507">,</span>&nbsp;<span class="ident" id="8668509">err</span>&nbsp;<span class="op" id="8668513">:=</span>&nbsp;<span class="ident" id="8668516">os</span><span class="op" id="8668518">.</span><span class="ident" id="8668519">Open</span><span class="op" id="8668523">(</span><span class="string" id="8668524">&#34;../testdata/video-001.png&#34;</span><span class="op" id="8668551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8668554">if</span>&nbsp;<span class="ident" id="8668557">err</span>&nbsp;<span class="op" id="8668561">!=</span>&nbsp;<span class="ident" id="8668564">nil</span>&nbsp;<span class="op" id="8668568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8668572">t</span><span class="op" id="8668573">.</span><span class="ident" id="8668574">Fatalf</span><span class="op" id="8668580">(</span><span class="string" id="8668581">&#34;open:&nbsp;%v&#34;</span><span class="op" id="8668591">,</span>&nbsp;<span class="ident" id="8668593">err</span><span class="op" id="8668596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8668599">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8668602">defer</span>&nbsp;<span class="ident" id="8668608">f</span><span class="op" id="8668609">.</span><span class="ident" id="8668610">Close</span><span class="op" id="8668615">(</span><span class="op" id="8668616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8668619">src</span><span class="op" id="8668622">,</span>&nbsp;<span class="ident" id="8668624">err</span>&nbsp;<span class="op" id="8668628">:=</span>&nbsp;<span class="ident" id="8668631">png</span><span class="op" id="8668634">.</span><span class="ident" id="8668635">Decode</span><span class="op" id="8668641">(</span><span class="ident" id="8668642">f</span><span class="op" id="8668643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8668646">if</span>&nbsp;<span class="ident" id="8668649">err</span>&nbsp;<span class="op" id="8668653">!=</span>&nbsp;<span class="ident" id="8668656">nil</span>&nbsp;<span class="op" id="8668660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8668664">t</span><span class="op" id="8668665">.</span><span class="ident" id="8668666">Fatalf</span><span class="op" id="8668672">(</span><span class="string" id="8668673">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="8668685">,</span>&nbsp;<span class="ident" id="8668687">err</span><span class="op" id="8668690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8668693">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8668696">b</span>&nbsp;<span class="op" id="8668698">:=</span>&nbsp;<span class="ident" id="8668701">src</span><span class="op" id="8668704">.</span><span class="ident" id="8668705">Bounds</span><span class="op" id="8668711">(</span><span class="op" id="8668712">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8668716">cgaPalette</span>&nbsp;<span class="op" id="8668727">:=</span>&nbsp;<span class="ident" id="8668730">color</span><span class="op" id="8668735">.</span><span class="ident" id="8668736">Palette</span><span class="op" id="8668743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8668747">color</span><span class="op" id="8668752">.</span><span class="ident" id="8668753">RGBA</span><span class="op" id="8668757">{</span><span class="num" id="8668758">0x00</span><span class="op" id="8668762">,</span>&nbsp;<span class="num" id="8668764">0x00</span><span class="op" id="8668768">,</span>&nbsp;<span class="num" id="8668770">0x00</span><span class="op" id="8668774">,</span>&nbsp;<span class="num" id="8668776">0xff</span><span class="op" id="8668780">}</span><span class="op" id="8668781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8668785">color</span><span class="op" id="8668790">.</span><span class="ident" id="8668791">RGBA</span><span class="op" id="8668795">{</span><span class="num" id="8668796">0x55</span><span class="op" id="8668800">,</span>&nbsp;<span class="num" id="8668802">0xff</span><span class="op" id="8668806">,</span>&nbsp;<span class="num" id="8668808">0xff</span><span class="op" id="8668812">,</span>&nbsp;<span class="num" id="8668814">0xff</span><span class="op" id="8668818">}</span><span class="op" id="8668819">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8668823">color</span><span class="op" id="8668828">.</span><span class="ident" id="8668829">RGBA</span><span class="op" id="8668833">{</span><span class="num" id="8668834">0xff</span><span class="op" id="8668838">,</span>&nbsp;<span class="num" id="8668840">0x55</span><span class="op" id="8668844">,</span>&nbsp;<span class="num" id="8668846">0xff</span><span class="op" id="8668850">,</span>&nbsp;<span class="num" id="8668852">0xff</span><span class="op" id="8668856">}</span><span class="op" id="8668857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8668861">color</span><span class="op" id="8668866">.</span><span class="ident" id="8668867">RGBA</span><span class="op" id="8668871">{</span><span class="num" id="8668872">0xff</span><span class="op" id="8668876">,</span>&nbsp;<span class="num" id="8668878">0xff</span><span class="op" id="8668882">,</span>&nbsp;<span class="num" id="8668884">0xff</span><span class="op" id="8668888">,</span>&nbsp;<span class="num" id="8668890">0xff</span><span class="op" id="8668894">}</span><span class="op" id="8668895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8668898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8668901">drawers</span>&nbsp;<span class="op" id="8668909">:=</span>&nbsp;<span class="keyword" id="8668912">map</span><span class="op" id="8668915">[</span><span class="builtintype" id="8668916">string</span><span class="op" id="8668922">]</span><span class="ident" id="8668923">Drawer</span><span class="op" id="8668929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8668933">&#34;src&#34;</span><span class="op" id="8668938">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8668952">Src</span><span class="op" id="8668955">,</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8668959">&#34;floyd-steinberg&#34;</span><span class="op" id="8668976">:</span>&nbsp;<span class="ident" id="8668978">FloydSteinberg</span><span class="op" id="8668992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8668995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="8668998">loop</span><span class="op" id="8669002">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8669005">for</span>&nbsp;<span class="ident" id="8669009">dName</span><span class="op" id="8669014">,</span>&nbsp;<span class="ident" id="8669016">d</span>&nbsp;<span class="op" id="8669018">:=</span>&nbsp;<span class="keyword" id="8669021">range</span>&nbsp;<span class="ident" id="8669027">drawers</span>&nbsp;<span class="op" id="8669035">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8669039">dst0</span>&nbsp;<span class="op" id="8669044">:=</span>&nbsp;<span class="ident" id="8669047">image</span><span class="op" id="8669052">.</span><span class="ident" id="8669053">NewPaletted</span><span class="op" id="8669064">(</span><span class="ident" id="8669065">b</span><span class="op" id="8669066">,</span>&nbsp;<span class="ident" id="8669068">cgaPalette</span><span class="op" id="8669078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8669082">dst1</span>&nbsp;<span class="op" id="8669087">:=</span>&nbsp;<span class="ident" id="8669090">image</span><span class="op" id="8669095">.</span><span class="ident" id="8669096">NewPaletted</span><span class="op" id="8669107">(</span><span class="ident" id="8669108">b</span><span class="op" id="8669109">,</span>&nbsp;<span class="ident" id="8669111">cgaPalette</span><span class="op" id="8669121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8669125">d</span><span class="op" id="8669126">.</span><span class="ident" id="8669127">Draw</span><span class="op" id="8669131">(</span><span class="ident" id="8669132">dst0</span><span class="op" id="8669136">,</span>&nbsp;<span class="ident" id="8669138">b</span><span class="op" id="8669139">,</span>&nbsp;<span class="ident" id="8669141">src</span><span class="op" id="8669144">,</span>&nbsp;<span class="ident" id="8669146">image</span><span class="op" id="8669151">.</span><span class="ident" id="8669152">Point</span><span class="op" id="8669157">{</span><span class="op" id="8669158">}</span><span class="op" id="8669159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8669163">d</span><span class="op" id="8669164">.</span><span class="ident" id="8669165">Draw</span><span class="op" id="8669169">(</span><span class="ident" id="8669170">embeddedPaletted</span><span class="op" id="8669186">{</span><span class="ident" id="8669187">dst1</span><span class="op" id="8669191">}</span><span class="op" id="8669192">,</span>&nbsp;<span class="ident" id="8669194">b</span><span class="op" id="8669195">,</span>&nbsp;<span class="ident" id="8669197">src</span><span class="op" id="8669200">,</span>&nbsp;<span class="ident" id="8669202">image</span><span class="op" id="8669207">.</span><span class="ident" id="8669208">Point</span><span class="op" id="8669213">{</span><span class="op" id="8669214">}</span><span class="op" id="8669215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8669219">for</span>&nbsp;<span class="ident" id="8669223">y</span>&nbsp;<span class="op" id="8669225">:=</span>&nbsp;<span class="ident" id="8669228">b</span><span class="op" id="8669229">.</span><span class="ident" id="8669230">Min</span><span class="op" id="8669233">.</span><span class="ident" id="8669234">Y</span><span class="op" id="8669235">;</span>&nbsp;<span class="ident" id="8669237">y</span>&nbsp;<span class="op" id="8669239">&lt;</span>&nbsp;<span class="ident" id="8669241">b</span><span class="op" id="8669242">.</span><span class="ident" id="8669243">Max</span><span class="op" id="8669246">.</span><span class="ident" id="8669247">Y</span><span class="op" id="8669248">;</span>&nbsp;<span class="ident" id="8669250">y</span><span class="op" id="8669251">++</span>&nbsp;<span class="op" id="8669254">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8669259">for</span>&nbsp;<span class="ident" id="8669263">x</span>&nbsp;<span class="op" id="8669265">:=</span>&nbsp;<span class="ident" id="8669268">b</span><span class="op" id="8669269">.</span><span class="ident" id="8669270">Min</span><span class="op" id="8669273">.</span><span class="ident" id="8669274">X</span><span class="op" id="8669275">;</span>&nbsp;<span class="ident" id="8669277">x</span>&nbsp;<span class="op" id="8669279">&lt;</span>&nbsp;<span class="ident" id="8669281">b</span><span class="op" id="8669282">.</span><span class="ident" id="8669283">Max</span><span class="op" id="8669286">.</span><span class="ident" id="8669287">X</span><span class="op" id="8669288">;</span>&nbsp;<span class="ident" id="8669290">x</span><span class="op" id="8669291">++</span>&nbsp;<span class="op" id="8669294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8669300">if</span>&nbsp;<span class="op" id="8669303">!</span><span class="ident" id="8669304">eq</span><span class="op" id="8669306">(</span><span class="ident" id="8669307">dst0</span><span class="op" id="8669311">.</span><span class="ident" id="8669312">At</span><span class="op" id="8669314">(</span><span class="ident" id="8669315">x</span><span class="op" id="8669316">,</span>&nbsp;<span class="ident" id="8669318">y</span><span class="op" id="8669319">)</span><span class="op" id="8669320">,</span>&nbsp;<span class="ident" id="8669322">dst1</span><span class="op" id="8669326">.</span><span class="ident" id="8669327">At</span><span class="op" id="8669329">(</span><span class="ident" id="8669330">x</span><span class="op" id="8669331">,</span>&nbsp;<span class="ident" id="8669333">y</span><span class="op" id="8669334">)</span><span class="op" id="8669335">)</span>&nbsp;<span class="op" id="8669337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8669344">t</span><span class="op" id="8669345">.</span><span class="ident" id="8669346">Errorf</span><span class="op" id="8669352">(</span><span class="string" id="8669353">&#34;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="8669384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8669392">dName</span><span class="op" id="8669397">,</span>&nbsp;<span class="ident" id="8669399">x</span><span class="op" id="8669400">,</span>&nbsp;<span class="ident" id="8669402">y</span><span class="op" id="8669403">,</span>&nbsp;<span class="ident" id="8669405">dst0</span><span class="op" id="8669409">.</span><span class="ident" id="8669410">At</span><span class="op" id="8669412">(</span><span class="ident" id="8669413">x</span><span class="op" id="8669414">,</span>&nbsp;<span class="ident" id="8669416">y</span><span class="op" id="8669417">)</span><span class="op" id="8669418">,</span>&nbsp;<span class="ident" id="8669420">dst1</span><span class="op" id="8669424">.</span><span class="ident" id="8669425">At</span><span class="op" id="8669427">(</span><span class="ident" id="8669428">x</span><span class="op" id="8669429">,</span>&nbsp;<span class="ident" id="8669431">y</span><span class="op" id="8669432">)</span><span class="op" id="8669433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8669440">continue</span>&nbsp;<span class="ident" id="8669449">loop</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8669458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8669463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8669467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8669470">}</span><br>
<span class="lineno"></span><span class="op" id="8669472">}</span>
</div>
</body>
</html>
