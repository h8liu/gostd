<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7994298">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7994353">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7994407">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7994458">package</span>&nbsp;<span class="ident" id="7994466">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7994472">import</span>&nbsp;<span class="op" id="7994479">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7994482">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7994493">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7994499">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7994509">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7994512">//&nbsp;TODO(mattn):</span><br>
<span class="lineno"></span><span class="comment" id="7994528">//&nbsp;&nbsp;&nbsp;&nbsptest&nbsp;ProxyAuth</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7994547">var</span>&nbsp;<span class="ident" id="7994551">UseProxyTests</span>&nbsp;<span class="op" id="7994565">=</span>&nbsp;<span class="op" id="7994567">[</span><span class="op" id="7994568">]</span><span class="keyword" id="7994569">struct</span>&nbsp;<span class="op" id="7994576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994579">host</span>&nbsp;&nbsp;<span class="builtintype" id="7994585">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7994593">match</span>&nbsp;<span class="builtintype" id="7994599">bool</span><br>
<span class="lineno"></span><span class="op" id="7994604">}</span><span class="op" id="7994605">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7994608">//&nbsp;Never&nbsp;proxy&nbsp;localhost:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994635">{</span><span class="string" id="7994636">&#34;localhost:80&#34;</span><span class="op" id="7994650">,</span>&nbsp;<span class="ident" id="7994652">false</span><span class="op" id="7994657">}</span><span class="op" id="7994658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994661">{</span><span class="string" id="7994662">&#34;127.0.0.1&#34;</span><span class="op" id="7994673">,</span>&nbsp;<span class="ident" id="7994675">false</span><span class="op" id="7994680">}</span><span class="op" id="7994681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994684">{</span><span class="string" id="7994685">&#34;127.0.0.2&#34;</span><span class="op" id="7994696">,</span>&nbsp;<span class="ident" id="7994698">false</span><span class="op" id="7994703">}</span><span class="op" id="7994704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994707">{</span><span class="string" id="7994708">&#34;[::1]&#34;</span><span class="op" id="7994715">,</span>&nbsp;<span class="ident" id="7994717">false</span><span class="op" id="7994722">}</span><span class="op" id="7994723">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994726">{</span><span class="string" id="7994727">&#34;[::2]&#34;</span><span class="op" id="7994734">,</span>&nbsp;<span class="ident" id="7994736">true</span><span class="op" id="7994740">}</span><span class="op" id="7994741">,</span>&nbsp;<span class="comment" id="7994743">//&nbsp;not&nbsp;a&nbsp;loopback&nbsp;address</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994771">{</span><span class="string" id="7994772">&#34;barbaz.net&#34;</span><span class="op" id="7994784">,</span>&nbsp;<span class="ident" id="7994786">false</span><span class="op" id="7994791">}</span><span class="op" id="7994792">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7994798">//&nbsp;match&nbsp;as&nbsp;.barbaz.net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994823">{</span><span class="string" id="7994824">&#34;foobar.com&#34;</span><span class="op" id="7994836">,</span>&nbsp;<span class="ident" id="7994838">false</span><span class="op" id="7994843">}</span><span class="op" id="7994844">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7994850">//&nbsp;have&nbsp;a&nbsp;port&nbsp;but&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994876">{</span><span class="string" id="7994877">&#34;foofoobar.com&#34;</span><span class="op" id="7994892">,</span>&nbsp;<span class="ident" id="7994894">true</span><span class="op" id="7994898">}</span><span class="op" id="7994899">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7994903">//&nbsp;not&nbsp;match&nbsp;as&nbsp;a&nbsp;part&nbsp;of&nbsp;foobar.com</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994941">{</span><span class="string" id="7994942">&#34;baz.com&#34;</span><span class="op" id="7994951">,</span>&nbsp;<span class="ident" id="7994953">true</span><span class="op" id="7994957">}</span><span class="op" id="7994958">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7994968">//&nbsp;not&nbsp;match&nbsp;as&nbsp;a&nbsp;part&nbsp;of&nbsp;barbaz.com</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995006">{</span><span class="string" id="7995007">&#34;localhost.net&#34;</span><span class="op" id="7995022">,</span>&nbsp;<span class="ident" id="7995024">true</span><span class="op" id="7995028">}</span><span class="op" id="7995029">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7995033">//&nbsp;not&nbsp;match&nbsp;as&nbsp;suffix&nbsp;of&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995068">{</span><span class="string" id="7995069">&#34;local.localhost&#34;</span><span class="op" id="7995086">,</span>&nbsp;<span class="ident" id="7995088">true</span><span class="op" id="7995092">}</span><span class="op" id="7995093">,</span>&nbsp;<span class="comment" id="7995095">//&nbsp;not&nbsp;match&nbsp;as&nbsp;prefix&nbsp;as&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995130">{</span><span class="string" id="7995131">&#34;barbarbaz.net&#34;</span><span class="op" id="7995146">,</span>&nbsp;<span class="ident" id="7995148">true</span><span class="op" id="7995152">}</span><span class="op" id="7995153">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7995157">//&nbsp;not&nbsp;match&nbsp;because&nbsp;NO_PROXY&nbsp;have&nbsp;a&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995199">{</span><span class="string" id="7995200">&#34;www.foobar.com&#34;</span><span class="op" id="7995216">,</span>&nbsp;<span class="ident" id="7995218">false</span><span class="op" id="7995223">}</span><span class="op" id="7995224">,</span>&nbsp;<span class="comment" id="7995226">//&nbsp;match&nbsp;because&nbsp;NO_PROXY&nbsp;includes&nbsp;&#34;foobar.com&#34;</span><br>
<span class="lineno">35</span><span class="op" id="7995274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7995277">func</span>&nbsp;<span class="ident" id="7995282">TestUseProxy</span><span class="op" id="7995294">(</span><span class="ident" id="7995295">t</span>&nbsp;<span class="op" id="7995297">*</span><span class="ident" id="7995298">testing</span><span class="op" id="7995305">.</span><span class="ident" id="7995306">T</span><span class="op" id="7995307">)</span>&nbsp;<span class="op" id="7995309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995312">ResetProxyEnv</span><span class="op" id="7995325">(</span><span class="op" id="7995326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995329">os</span><span class="op" id="7995331">.</span><span class="ident" id="7995332">Setenv</span><span class="op" id="7995338">(</span><span class="string" id="7995339">&#34;NO_PROXY&#34;</span><span class="op" id="7995349">,</span>&nbsp;<span class="string" id="7995351">&#34;foobar.com,&nbsp;.barbaz.net&#34;</span><span class="op" id="7995376">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7995379">for</span>&nbsp;<span class="ident" id="7995383">_</span><span class="op" id="7995384">,</span>&nbsp;<span class="ident" id="7995386">test</span>&nbsp;<span class="op" id="7995391">:=</span>&nbsp;<span class="keyword" id="7995394">range</span>&nbsp;<span class="ident" id="7995400">UseProxyTests</span>&nbsp;<span class="op" id="7995414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7995418">if</span>&nbsp;<span class="ident" id="7995421">useProxy</span><span class="op" id="7995429">(</span><span class="ident" id="7995430">test</span><span class="op" id="7995434">.</span><span class="ident" id="7995435">host</span><span class="op" id="7995439">+</span><span class="string" id="7995440">&#34;:80&#34;</span><span class="op" id="7995445">)</span>&nbsp;<span class="op" id="7995447">!=</span>&nbsp;<span class="ident" id="7995450">test</span><span class="op" id="7995454">.</span><span class="ident" id="7995455">match</span>&nbsp;<span class="op" id="7995461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995466">t</span><span class="op" id="7995467">.</span><span class="ident" id="7995468">Errorf</span><span class="op" id="7995474">(</span><span class="string" id="7995475">&#34;useProxy(%v)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7995503">,</span>&nbsp;<span class="ident" id="7995505">test</span><span class="op" id="7995509">.</span><span class="ident" id="7995510">host</span><span class="op" id="7995514">,</span>&nbsp;<span class="op" id="7995516">!</span><span class="ident" id="7995517">test</span><span class="op" id="7995521">.</span><span class="ident" id="7995522">match</span><span class="op" id="7995527">,</span>&nbsp;<span class="ident" id="7995529">test</span><span class="op" id="7995533">.</span><span class="ident" id="7995534">match</span><span class="op" id="7995539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995546">}</span><br>
<span class="lineno">45</span><span class="op" id="7995548">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7995551">var</span>&nbsp;<span class="ident" id="7995555">cacheKeysTests</span>&nbsp;<span class="op" id="7995570">=</span>&nbsp;<span class="op" id="7995572">[</span><span class="op" id="7995573">]</span><span class="keyword" id="7995574">struct</span>&nbsp;<span class="op" id="7995581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995584">proxy</span>&nbsp;&nbsp;<span class="builtintype" id="7995591">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995599">scheme</span>&nbsp;<span class="builtintype" id="7995606">string</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995614">addr</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7995621">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995629">key</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7995636">string</span><br>
<span class="lineno"></span><span class="op" id="7995643">}</span><span class="op" id="7995644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995647">{</span><span class="string" id="7995648">&#34;&#34;</span><span class="op" id="7995650">,</span>&nbsp;<span class="string" id="7995652">&#34;http&#34;</span><span class="op" id="7995658">,</span>&nbsp;<span class="string" id="7995660">&#34;foo.com&#34;</span><span class="op" id="7995669">,</span>&nbsp;<span class="string" id="7995671">&#34;|http|foo.com&#34;</span><span class="op" id="7995686">}</span><span class="op" id="7995687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995690">{</span><span class="string" id="7995691">&#34;&#34;</span><span class="op" id="7995693">,</span>&nbsp;<span class="string" id="7995695">&#34;https&#34;</span><span class="op" id="7995702">,</span>&nbsp;<span class="string" id="7995704">&#34;foo.com&#34;</span><span class="op" id="7995713">,</span>&nbsp;<span class="string" id="7995715">&#34;|https|foo.com&#34;</span><span class="op" id="7995731">}</span><span class="op" id="7995732">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995735">{</span><span class="string" id="7995736">&#34;http://foo.com&#34;</span><span class="op" id="7995752">,</span>&nbsp;<span class="string" id="7995754">&#34;http&#34;</span><span class="op" id="7995760">,</span>&nbsp;<span class="string" id="7995762">&#34;foo.com&#34;</span><span class="op" id="7995771">,</span>&nbsp;<span class="string" id="7995773">&#34;http://foo.com|http|&#34;</span><span class="op" id="7995795">}</span><span class="op" id="7995796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995799">{</span><span class="string" id="7995800">&#34;http://foo.com&#34;</span><span class="op" id="7995816">,</span>&nbsp;<span class="string" id="7995818">&#34;https&#34;</span><span class="op" id="7995825">,</span>&nbsp;<span class="string" id="7995827">&#34;foo.com&#34;</span><span class="op" id="7995836">,</span>&nbsp;<span class="string" id="7995838">&#34;http://foo.com|https|foo.com&#34;</span><span class="op" id="7995868">}</span><span class="op" id="7995869">,</span><br>
<span class="lineno"></span><span class="op" id="7995871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7995874">func</span>&nbsp;<span class="ident" id="7995879">TestCacheKeys</span><span class="op" id="7995892">(</span><span class="ident" id="7995893">t</span>&nbsp;<span class="op" id="7995895">*</span><span class="ident" id="7995896">testing</span><span class="op" id="7995903">.</span><span class="ident" id="7995904">T</span><span class="op" id="7995905">)</span>&nbsp;<span class="op" id="7995907">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7995910">for</span>&nbsp;<span class="ident" id="7995914">_</span><span class="op" id="7995915">,</span>&nbsp;<span class="ident" id="7995917">tt</span>&nbsp;<span class="op" id="7995920">:=</span>&nbsp;<span class="keyword" id="7995923">range</span>&nbsp;<span class="ident" id="7995929">cacheKeysTests</span>&nbsp;<span class="op" id="7995944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7995948">var</span>&nbsp;<span class="ident" id="7995952">proxy</span>&nbsp;<span class="op" id="7995958">*</span><span class="ident" id="7995959">url</span><span class="op" id="7995962">.</span><span class="ident" id="7995963">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7995969">if</span>&nbsp;<span class="ident" id="7995972">tt</span><span class="op" id="7995974">.</span><span class="ident" id="7995975">proxy</span>&nbsp;<span class="op" id="7995981">!=</span>&nbsp;<span class="string" id="7995984">&#34;&#34;</span>&nbsp;<span class="op" id="7995987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7995992">u</span><span class="op" id="7995993">,</span>&nbsp;<span class="ident" id="7995995">err</span>&nbsp;<span class="op" id="7995999">:=</span>&nbsp;<span class="ident" id="7996002">url</span><span class="op" id="7996005">.</span><span class="ident" id="7996006">Parse</span><span class="op" id="7996011">(</span><span class="ident" id="7996012">tt</span><span class="op" id="7996014">.</span><span class="ident" id="7996015">proxy</span><span class="op" id="7996020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7996025">if</span>&nbsp;<span class="ident" id="7996028">err</span>&nbsp;<span class="op" id="7996032">!=</span>&nbsp;<span class="ident" id="7996035">nil</span>&nbsp;<span class="op" id="7996039">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996045">t</span><span class="op" id="7996046">.</span><span class="ident" id="7996047">Fatal</span><span class="op" id="7996052">(</span><span class="ident" id="7996053">err</span><span class="op" id="7996056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996066">proxy</span>&nbsp;<span class="op" id="7996072">=</span>&nbsp;<span class="ident" id="7996074">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996082">cm</span>&nbsp;<span class="op" id="7996085">:=</span>&nbsp;<span class="ident" id="7996088">connectMethod</span><span class="op" id="7996101">{</span><span class="ident" id="7996102">proxy</span><span class="op" id="7996107">,</span>&nbsp;<span class="ident" id="7996109">tt</span><span class="op" id="7996111">.</span><span class="ident" id="7996112">scheme</span><span class="op" id="7996118">,</span>&nbsp;<span class="ident" id="7996120">tt</span><span class="op" id="7996122">.</span><span class="ident" id="7996123">addr</span><span class="op" id="7996127">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7996131">if</span>&nbsp;<span class="ident" id="7996134">got</span>&nbsp;<span class="op" id="7996138">:=</span>&nbsp;<span class="ident" id="7996141">cm</span><span class="op" id="7996143">.</span><span class="ident" id="7996144">key</span><span class="op" id="7996147">(</span><span class="op" id="7996148">)</span><span class="op" id="7996149">.</span><span class="ident" id="7996150">String</span><span class="op" id="7996156">(</span><span class="op" id="7996157">)</span><span class="op" id="7996158">;</span>&nbsp;<span class="ident" id="7996160">got</span>&nbsp;<span class="op" id="7996164">!=</span>&nbsp;<span class="ident" id="7996167">tt</span><span class="op" id="7996169">.</span><span class="ident" id="7996170">key</span>&nbsp;<span class="op" id="7996174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996179">t</span><span class="op" id="7996180">.</span><span class="ident" id="7996181">Fatalf</span><span class="op" id="7996187">(</span><span class="string" id="7996188">&#34;{%q,&nbsp;%q,&nbsp;%q}&nbsp;cache&nbsp;key&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7996226">,</span>&nbsp;<span class="ident" id="7996228">tt</span><span class="op" id="7996230">.</span><span class="ident" id="7996231">proxy</span><span class="op" id="7996236">,</span>&nbsp;<span class="ident" id="7996238">tt</span><span class="op" id="7996240">.</span><span class="ident" id="7996241">scheme</span><span class="op" id="7996247">,</span>&nbsp;<span class="ident" id="7996249">tt</span><span class="op" id="7996251">.</span><span class="ident" id="7996252">addr</span><span class="op" id="7996256">,</span>&nbsp;<span class="ident" id="7996258">got</span><span class="op" id="7996261">,</span>&nbsp;<span class="ident" id="7996263">tt</span><span class="op" id="7996265">.</span><span class="ident" id="7996266">key</span><span class="op" id="7996269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996276">}</span><br>
<span class="lineno"></span><span class="op" id="7996278">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="7996281">func</span>&nbsp;<span class="ident" id="7996286">ResetProxyEnv</span><span class="op" id="7996299">(</span><span class="op" id="7996300">)</span>&nbsp;<span class="op" id="7996302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7996305">for</span>&nbsp;<span class="ident" id="7996309">_</span><span class="op" id="7996310">,</span>&nbsp;<span class="ident" id="7996312">v</span>&nbsp;<span class="op" id="7996314">:=</span>&nbsp;<span class="keyword" id="7996317">range</span>&nbsp;<span class="op" id="7996323">[</span><span class="op" id="7996324">]</span><span class="builtintype" id="7996325">string</span><span class="op" id="7996331">{</span><span class="string" id="7996332">&#34;HTTP_PROXY&#34;</span><span class="op" id="7996344">,</span>&nbsp;<span class="string" id="7996346">&#34;http_proxy&#34;</span><span class="op" id="7996358">,</span>&nbsp;<span class="string" id="7996360">&#34;NO_PROXY&#34;</span><span class="op" id="7996370">,</span>&nbsp;<span class="string" id="7996372">&#34;no_proxy&#34;</span><span class="op" id="7996382">}</span>&nbsp;<span class="op" id="7996384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996388">os</span><span class="op" id="7996390">.</span><span class="ident" id="7996391">Setenv</span><span class="op" id="7996397">(</span><span class="ident" id="7996398">v</span><span class="op" id="7996399">,</span>&nbsp;<span class="string" id="7996401">&#34;&#34;</span><span class="op" id="7996403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996406">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996409">ResetCachedEnvironment</span><span class="op" id="7996431">(</span><span class="op" id="7996432">)</span><br>
<span class="lineno"></span><span class="op" id="7996434">}</span>
</div>
</body>
</html>
