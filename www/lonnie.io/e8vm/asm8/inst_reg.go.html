<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5335860">package</span>&nbsp;<span class="ident" id="5335868">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5335874">import</span>&nbsp;<span class="op" id="5335881">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5335884">&#34;strconv&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5335896">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5335918">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5335921">var</span>&nbsp;<span class="op" id="5335925">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335928">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335949">opShiftMap</span>&nbsp;<span class="op" id="5335960">=</span>&nbsp;<span class="keyword" id="5335962">map</span><span class="op" id="5335965">[</span><span class="builtintype" id="5335966">string</span><span class="op" id="5335972">]</span><span class="builtintype" id="5335973">uint32</span><span class="op" id="5335979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5335983">&#34;sll&#34;</span><span class="op" id="5335988">:</span>&nbsp;<span class="num" id="5335990">0</span><span class="op" id="5335991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5335995">&#34;srl&#34;</span><span class="op" id="5336000">:</span>&nbsp;<span class="num" id="5336002">1</span><span class="op" id="5336003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336007">&#34;sra&#34;</span><span class="op" id="5336012">:</span>&nbsp;<span class="num" id="5336014">2</span><span class="op" id="5336015">,</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5336022">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;reg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336041">opReg3Map</span>&nbsp;<span class="op" id="5336051">=</span>&nbsp;<span class="keyword" id="5336053">map</span><span class="op" id="5336056">[</span><span class="builtintype" id="5336057">string</span><span class="op" id="5336063">]</span><span class="builtintype" id="5336064">uint32</span><span class="op" id="5336070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336074">&#34;sllv&#34;</span><span class="op" id="5336080">:</span>&nbsp;<span class="num" id="5336082">3</span><span class="op" id="5336083">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336087">&#34;srlv&#34;</span><span class="op" id="5336093">:</span>&nbsp;<span class="num" id="5336095">4</span><span class="op" id="5336096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336100">&#34;srla&#34;</span><span class="op" id="5336106">:</span>&nbsp;<span class="num" id="5336108">5</span><span class="op" id="5336109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336113">&#34;add&#34;</span><span class="op" id="5336118">:</span>&nbsp;&nbsp;<span class="num" id="5336121">6</span><span class="op" id="5336122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336126">&#34;sub&#34;</span><span class="op" id="5336131">:</span>&nbsp;&nbsp;<span class="num" id="5336134">7</span><span class="op" id="5336135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336139">&#34;and&#34;</span><span class="op" id="5336144">:</span>&nbsp;&nbsp;<span class="num" id="5336147">8</span><span class="op" id="5336148">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336152">&#34;or&#34;</span><span class="op" id="5336156">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="5336160">9</span><span class="op" id="5336161">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336165">&#34;xor&#34;</span><span class="op" id="5336170">:</span>&nbsp;&nbsp;<span class="num" id="5336173">10</span><span class="op" id="5336175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336179">&#34;nor&#34;</span><span class="op" id="5336184">:</span>&nbsp;&nbsp;<span class="num" id="5336187">11</span><span class="op" id="5336189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336193">&#34;slt&#34;</span><span class="op" id="5336198">:</span>&nbsp;&nbsp;<span class="num" id="5336201">12</span><span class="op" id="5336203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336207">&#34;sltu&#34;</span><span class="op" id="5336213">:</span>&nbsp;<span class="num" id="5336215">13</span><span class="op" id="5336217">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336221">&#34;mul&#34;</span><span class="op" id="5336226">:</span>&nbsp;&nbsp;<span class="num" id="5336229">14</span><span class="op" id="5336231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336235">&#34;mulu&#34;</span><span class="op" id="5336241">:</span>&nbsp;<span class="num" id="5336243">15</span><span class="op" id="5336245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336249">&#34;div&#34;</span><span class="op" id="5336254">:</span>&nbsp;&nbsp;<span class="num" id="5336257">16</span><span class="op" id="5336259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336263">&#34;divu&#34;</span><span class="op" id="5336269">:</span>&nbsp;<span class="num" id="5336271">17</span><span class="op" id="5336273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336277">&#34;mod&#34;</span><span class="op" id="5336282">:</span>&nbsp;&nbsp;<span class="num" id="5336285">18</span><span class="op" id="5336287">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336291">&#34;modu&#34;</span><span class="op" id="5336297">:</span>&nbsp;<span class="num" id="5336299">19</span><span class="op" id="5336301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5336308">//&nbsp;op&nbsp;reg&nbsp;reg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336323">opReg2Map</span>&nbsp;<span class="op" id="5336333">=</span>&nbsp;<span class="keyword" id="5336335">map</span><span class="op" id="5336338">[</span><span class="builtintype" id="5336339">string</span><span class="op" id="5336345">]</span><span class="builtintype" id="5336346">uint32</span><span class="op" id="5336352">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336356">&#34;mov&#34;</span><span class="op" id="5336361">:</span>&nbsp;<span class="num" id="5336363">0</span><span class="op" id="5336364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5336371">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;reg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336390">opFloatMap</span>&nbsp;<span class="op" id="5336401">=</span>&nbsp;<span class="keyword" id="5336403">map</span><span class="op" id="5336406">[</span><span class="builtintype" id="5336407">string</span><span class="op" id="5336413">]</span><span class="builtintype" id="5336414">uint32</span><span class="op" id="5336420">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336424">&#34;fadd&#34;</span><span class="op" id="5336430">:</span>&nbsp;<span class="num" id="5336432">0</span><span class="op" id="5336433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336437">&#34;fsub&#34;</span><span class="op" id="5336443">:</span>&nbsp;<span class="num" id="5336445">1</span><span class="op" id="5336446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336450">&#34;fmul&#34;</span><span class="op" id="5336456">:</span>&nbsp;<span class="num" id="5336458">2</span><span class="op" id="5336459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336463">&#34;fdiv&#34;</span><span class="op" id="5336469">:</span>&nbsp;<span class="num" id="5336471">3</span><span class="op" id="5336472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336476">&#34;fint&#34;</span><span class="op" id="5336482">:</span>&nbsp;<span class="num" id="5336484">4</span><span class="op" id="5336485">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336488">}</span><br>
<span class="lineno"></span><span class="op" id="5336490">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5336493">func</span>&nbsp;<span class="ident" id="5336498">parseShift</span><span class="op" id="5336508">(</span><span class="ident" id="5336509">p</span>&nbsp;<span class="op" id="5336511">*</span><span class="ident" id="5336512"><a href="/lonnie.io/e8vm/asm8/parser.go.html#5352831">parser</a></span><span class="op" id="5336518">,</span>&nbsp;<span class="ident" id="5336520">op</span>&nbsp;<span class="op" id="5336523">*</span><span class="ident" id="5336524"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5335896">lex8</a></span><span class="op" id="5336528">.</span><span class="ident" id="5336529">Token</span><span class="op" id="5336534">)</span>&nbsp;<span class="builtintype" id="5336536">uint32</span>&nbsp;<span class="op" id="5336543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336546">ret</span><span class="op" id="5336549">,</span>&nbsp;<span class="ident" id="5336551">e</span>&nbsp;<span class="op" id="5336553">:=</span>&nbsp;<span class="ident" id="5336556"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5335884">strconv</a></span><span class="op" id="5336563">.</span><span class="ident" id="5336564">ParseUint</span><span class="op" id="5336573">(</span><span class="ident" id="5336574"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336520">op</a></span><span class="op" id="5336576">.</span><span class="ident" id="5336577">Lit</span><span class="op" id="5336580">,</span>&nbsp;<span class="num" id="5336582">0</span><span class="op" id="5336583">,</span>&nbsp;<span class="num" id="5336585">32</span><span class="op" id="5336587">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336590">if</span>&nbsp;<span class="ident" id="5336593"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336551">e</a></span>&nbsp;<span class="op" id="5336595">!=</span>&nbsp;<span class="ident" id="5336598">nil</span>&nbsp;<span class="op" id="5336602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336606"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336509">p</a></span><span class="op" id="5336607">.</span><span class="ident" id="5336608">err</span><span class="op" id="5336611">(</span><span class="ident" id="5336612"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336520">op</a></span><span class="op" id="5336614">.</span><span class="ident" id="5336615">Pos</span><span class="op" id="5336618">,</span>&nbsp;<span class="string" id="5336620">&#34;invalid&nbsp;shift&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="5336642">,</span>&nbsp;<span class="ident" id="5336644"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336520">op</a></span><span class="op" id="5336646">.</span><span class="ident" id="5336647">Lit</span><span class="op" id="5336650">,</span>&nbsp;<span class="ident" id="5336652"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336551">e</a></span><span class="op" id="5336653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336657">return</span>&nbsp;<span class="num" id="5336664">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336671">if</span>&nbsp;<span class="op" id="5336674">(</span><span class="ident" id="5336675"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336546">ret</a></span>&nbsp;<span class="op" id="5336679">&amp;</span>&nbsp;<span class="num" id="5336681">0x1f</span><span class="op" id="5336685">)</span>&nbsp;<span class="op" id="5336687">!=</span>&nbsp;<span class="ident" id="5336690"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336546">ret</a></span>&nbsp;<span class="op" id="5336694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336698"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336509">p</a></span><span class="op" id="5336699">.</span><span class="ident" id="5336700">err</span><span class="op" id="5336703">(</span><span class="ident" id="5336704"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336520">op</a></span><span class="op" id="5336706">.</span><span class="ident" id="5336707">Pos</span><span class="op" id="5336710">,</span>&nbsp;<span class="string" id="5336712">&#34;shift&nbsp;too&nbsp;large:&nbsp;%s&#34;</span><span class="op" id="5336733">,</span>&nbsp;<span class="ident" id="5336735"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336520">op</a></span><span class="op" id="5336737">.</span><span class="ident" id="5336738">Lit</span><span class="op" id="5336741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336745">return</span>&nbsp;<span class="num" id="5336752">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336759">return</span>&nbsp;<span class="builtintype" id="5336766">uint32</span><span class="op" id="5336772">(</span><span class="ident" id="5336773"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336546">ret</a></span><span class="op" id="5336776">)</span><br>
<span class="lineno"></span><span class="op" id="5336778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5336781">func</span>&nbsp;<span class="ident" id="5336786">makeInstReg</span><span class="op" id="5336797">(</span><span class="ident" id="5336798">fn</span><span class="op" id="5336800">,</span>&nbsp;<span class="ident" id="5336802">d</span><span class="op" id="5336803">,</span>&nbsp;<span class="ident" id="5336805">s1</span><span class="op" id="5336807">,</span>&nbsp;<span class="ident" id="5336809">s2</span><span class="op" id="5336811">,</span>&nbsp;<span class="ident" id="5336813">sh</span><span class="op" id="5336815">,</span>&nbsp;<span class="ident" id="5336817">isFloat</span>&nbsp;<span class="builtintype" id="5336825">uint32</span><span class="op" id="5336831">)</span>&nbsp;<span class="op" id="5336833">*</span><span class="ident" id="5336834"><a href="/lonnie.io/e8vm/asm8/inst.go.html#5330311">inst</a></span>&nbsp;<span class="op" id="5336839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336842">ret</span>&nbsp;<span class="op" id="5336846">:=</span>&nbsp;<span class="builtintype" id="5336849">uint32</span><span class="op" id="5336855">(</span><span class="num" id="5336856">0</span><span class="op" id="5336857">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336860"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336842">ret</a></span>&nbsp;<span class="op" id="5336864">|=</span>&nbsp;<span class="op" id="5336867">(</span><span class="ident" id="5336868"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336802">d</a></span>&nbsp;<span class="op" id="5336870">&amp;</span>&nbsp;<span class="num" id="5336872">0x7</span><span class="op" id="5336875">)</span>&nbsp;<span class="op" id="5336877">&lt;&lt;</span>&nbsp;<span class="num" id="5336880">21</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336884"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336842">ret</a></span>&nbsp;<span class="op" id="5336888">|=</span>&nbsp;<span class="op" id="5336891">(</span><span class="ident" id="5336892"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336805">s1</a></span>&nbsp;<span class="op" id="5336895">&amp;</span>&nbsp;<span class="num" id="5336897">0x7</span><span class="op" id="5336900">)</span>&nbsp;<span class="op" id="5336902">&lt;&lt;</span>&nbsp;<span class="num" id="5336905">18</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336909"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336842">ret</a></span>&nbsp;<span class="op" id="5336913">|=</span>&nbsp;<span class="op" id="5336916">(</span><span class="ident" id="5336917"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336809">s2</a></span>&nbsp;<span class="op" id="5336920">&amp;</span>&nbsp;<span class="num" id="5336922">0x7</span><span class="op" id="5336925">)</span>&nbsp;<span class="op" id="5336927">&lt;&lt;</span>&nbsp;<span class="num" id="5336930">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336934"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336842">ret</a></span>&nbsp;<span class="op" id="5336938">|=</span>&nbsp;<span class="op" id="5336941">(</span><span class="ident" id="5336942"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336813">sh</a></span>&nbsp;<span class="op" id="5336945">&amp;</span>&nbsp;<span class="num" id="5336947">0x1f</span><span class="op" id="5336951">)</span>&nbsp;<span class="op" id="5336953">&lt;&lt;</span>&nbsp;<span class="num" id="5336956">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336960"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336842">ret</a></span>&nbsp;<span class="op" id="5336964">|=</span>&nbsp;<span class="op" id="5336967">(</span><span class="ident" id="5336968"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336817">isFloat</a></span>&nbsp;<span class="op" id="5336976">&amp;</span>&nbsp;<span class="num" id="5336978">0x1</span><span class="op" id="5336981">)</span>&nbsp;<span class="op" id="5336983">&lt;&lt;</span>&nbsp;<span class="num" id="5336986">8</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336989"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336842">ret</a></span>&nbsp;<span class="op" id="5336993">|=</span>&nbsp;<span class="ident" id="5336996"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336798">fn</a></span>&nbsp;<span class="op" id="5336999">&amp;</span>&nbsp;<span class="num" id="5337001">0xff</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337008">return</span>&nbsp;<span class="op" id="5337015">&amp;</span><span class="ident" id="5337016"><a href="/lonnie.io/e8vm/asm8/inst.go.html#5330311">inst</a></span><span class="op" id="5337020">{</span><span class="ident" id="5337021">inst</span><span class="op" id="5337025">:</span>&nbsp;<span class="ident" id="5337027"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336842">ret</a></span><span class="op" id="5337030">}</span><br>
<span class="lineno"></span><span class="op" id="5337032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="5337035">func</span>&nbsp;<span class="ident" id="5337040">parseInstReg</span><span class="op" id="5337052">(</span><span class="ident" id="5337053">p</span>&nbsp;<span class="op" id="5337055">*</span><span class="ident" id="5337056"><a href="/lonnie.io/e8vm/asm8/parser.go.html#5352831">parser</a></span><span class="op" id="5337062">,</span>&nbsp;<span class="ident" id="5337064">ops</span>&nbsp;<span class="op" id="5337068">[</span><span class="op" id="5337069">]</span><span class="op" id="5337070">*</span><span class="ident" id="5337071"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5335896">lex8</a></span><span class="op" id="5337075">.</span><span class="ident" id="5337076">Token</span><span class="op" id="5337081">)</span>&nbsp;<span class="op" id="5337083">(</span><span class="op" id="5337084">*</span><span class="ident" id="5337085"><a href="/lonnie.io/e8vm/asm8/inst.go.html#5330311">inst</a></span><span class="op" id="5337089">,</span>&nbsp;<span class="builtintype" id="5337091">bool</span><span class="op" id="5337095">)</span>&nbsp;<span class="op" id="5337097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337100">op0</span>&nbsp;<span class="op" id="5337104">:=</span>&nbsp;<span class="ident" id="5337107"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337064">ops</a></span><span class="op" id="5337110">[</span><span class="num" id="5337111">0</span><span class="op" id="5337112">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337115">opName</span>&nbsp;<span class="op" id="5337122">:=</span>&nbsp;<span class="ident" id="5337125"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337100">op0</a></span><span class="op" id="5337128">.</span><span class="ident" id="5337129">Lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337134">args</span>&nbsp;<span class="op" id="5337139">:=</span>&nbsp;<span class="ident" id="5337142"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337064">ops</a></span><span class="op" id="5337145">[</span><span class="num" id="5337146">1</span><span class="op" id="5337147">:</span><span class="op" id="5337148">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337152">//&nbsp;common&nbsp;args</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337168">var</span>&nbsp;<span class="ident" id="5337172">fn</span><span class="op" id="5337174">,</span>&nbsp;<span class="ident" id="5337176">d</span><span class="op" id="5337177">,</span>&nbsp;<span class="ident" id="5337179">s1</span><span class="op" id="5337181">,</span>&nbsp;<span class="ident" id="5337183">s2</span><span class="op" id="5337185">,</span>&nbsp;<span class="ident" id="5337187">sh</span><span class="op" id="5337189">,</span>&nbsp;<span class="ident" id="5337191">isFloat</span>&nbsp;<span class="builtintype" id="5337199">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337208">argCount</span>&nbsp;<span class="op" id="5337217">:=</span>&nbsp;<span class="keyword" id="5337220">func</span><span class="op" id="5337224">(</span><span class="ident" id="5337225">n</span>&nbsp;<span class="builtintype" id="5337227">int</span><span class="op" id="5337230">)</span>&nbsp;<span class="builtintype" id="5337232">bool</span>&nbsp;<span class="op" id="5337237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337241">if</span>&nbsp;<span class="op" id="5337244">!</span><span class="ident" id="5337245"><a href="/lonnie.io/e8vm/asm8/parse_arg.go.html#5345685">argCount</a></span><span class="op" id="5337253">(</span><span class="ident" id="5337254"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337053">p</a></span><span class="op" id="5337255">,</span>&nbsp;<span class="ident" id="5337257"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337064">ops</a></span><span class="op" id="5337260">,</span>&nbsp;<span class="ident" id="5337262"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337225">n</a></span><span class="op" id="5337263">)</span>&nbsp;<span class="op" id="5337265">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337270">return</span>&nbsp;<span class="ident" id="5337277">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337289">if</span>&nbsp;<span class="ident" id="5337292"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337225">n</a></span>&nbsp;<span class="op" id="5337294">&gt;=</span>&nbsp;<span class="num" id="5337297">2</span>&nbsp;<span class="op" id="5337299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337304"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337176">d</a></span>&nbsp;<span class="op" id="5337306">=</span>&nbsp;<span class="ident" id="5337308"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#5349323">parseReg</a></span><span class="op" id="5337316">(</span><span class="ident" id="5337317"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337053">p</a></span><span class="op" id="5337318">,</span>&nbsp;<span class="ident" id="5337320"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337134">args</a></span><span class="op" id="5337324">[</span><span class="num" id="5337325">0</span><span class="op" id="5337326">]</span><span class="op" id="5337327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337332"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337179">s1</a></span>&nbsp;<span class="op" id="5337335">=</span>&nbsp;<span class="ident" id="5337337"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#5349323">parseReg</a></span><span class="op" id="5337345">(</span><span class="ident" id="5337346"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337053">p</a></span><span class="op" id="5337347">,</span>&nbsp;<span class="ident" id="5337349"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337134">args</a></span><span class="op" id="5337353">[</span><span class="num" id="5337354">1</span><span class="op" id="5337355">]</span><span class="op" id="5337356">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337364">return</span>&nbsp;<span class="ident" id="5337371">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337381">var</span>&nbsp;<span class="ident" id="5337385">found</span>&nbsp;<span class="builtintype" id="5337391">bool</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337397">if</span>&nbsp;<span class="ident" id="5337400"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337172">fn</a></span><span class="op" id="5337402">,</span>&nbsp;<span class="ident" id="5337404"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337385">found</a></span>&nbsp;<span class="op" id="5337410">=</span>&nbsp;<span class="ident" id="5337412"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5335949">opShiftMap</a></span><span class="op" id="5337422">[</span><span class="ident" id="5337423"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337115">opName</a></span><span class="op" id="5337429">]</span><span class="op" id="5337430">;</span>&nbsp;<span class="ident" id="5337432"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337385">found</a></span>&nbsp;<span class="op" id="5337438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337442">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337464">if</span>&nbsp;<span class="ident" id="5337467"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337208">argCount</a></span><span class="op" id="5337475">(</span><span class="num" id="5337476">3</span><span class="op" id="5337477">)</span>&nbsp;<span class="op" id="5337479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337484"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337187">sh</a></span>&nbsp;<span class="op" id="5337487">=</span>&nbsp;<span class="ident" id="5337489"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336498">parseShift</a></span><span class="op" id="5337499">(</span><span class="ident" id="5337500"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337053">p</a></span><span class="op" id="5337501">,</span>&nbsp;<span class="ident" id="5337503"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337134">args</a></span><span class="op" id="5337507">[</span><span class="num" id="5337508">2</span><span class="op" id="5337509">]</span><span class="op" id="5337510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337514">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337517">}</span>&nbsp;<span class="keyword" id="5337519">else</span>&nbsp;<span class="keyword" id="5337524">if</span>&nbsp;<span class="ident" id="5337527"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337172">fn</a></span><span class="op" id="5337529">,</span>&nbsp;<span class="ident" id="5337531"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337385">found</a></span>&nbsp;<span class="op" id="5337537">=</span>&nbsp;<span class="ident" id="5337539"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336041">opReg3Map</a></span><span class="op" id="5337548">[</span><span class="ident" id="5337549"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337115">opName</a></span><span class="op" id="5337555">]</span><span class="op" id="5337556">;</span>&nbsp;<span class="ident" id="5337558"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337385">found</a></span>&nbsp;<span class="op" id="5337564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337568">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;reg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337588">if</span>&nbsp;<span class="ident" id="5337591"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337208">argCount</a></span><span class="op" id="5337599">(</span><span class="num" id="5337600">3</span><span class="op" id="5337601">)</span>&nbsp;<span class="op" id="5337603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337608"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337183">s2</a></span>&nbsp;<span class="op" id="5337611">=</span>&nbsp;<span class="ident" id="5337613"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#5349323">parseReg</a></span><span class="op" id="5337621">(</span><span class="ident" id="5337622"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337053">p</a></span><span class="op" id="5337623">,</span>&nbsp;<span class="ident" id="5337625"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337134">args</a></span><span class="op" id="5337629">[</span><span class="num" id="5337630">2</span><span class="op" id="5337631">]</span><span class="op" id="5337632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337636">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337639">}</span>&nbsp;<span class="keyword" id="5337641">else</span>&nbsp;<span class="keyword" id="5337646">if</span>&nbsp;<span class="ident" id="5337649"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337172">fn</a></span><span class="op" id="5337651">,</span>&nbsp;<span class="ident" id="5337653"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337385">found</a></span>&nbsp;<span class="op" id="5337659">=</span>&nbsp;<span class="ident" id="5337661"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336323">opReg2Map</a></span><span class="op" id="5337670">[</span><span class="ident" id="5337671"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337115">opName</a></span><span class="op" id="5337677">]</span><span class="op" id="5337678">;</span>&nbsp;<span class="ident" id="5337680"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337385">found</a></span>&nbsp;<span class="op" id="5337686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337690">//&nbsp;op&nbsp;reg&nbsp;reg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337706"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337208">argCount</a></span><span class="op" id="5337714">(</span><span class="num" id="5337715">2</span><span class="op" id="5337716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337719">}</span>&nbsp;<span class="keyword" id="5337721">else</span>&nbsp;<span class="keyword" id="5337726">if</span>&nbsp;<span class="ident" id="5337729"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337172">fn</a></span><span class="op" id="5337731">,</span>&nbsp;<span class="ident" id="5337733"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337385">found</a></span>&nbsp;<span class="op" id="5337739">=</span>&nbsp;<span class="ident" id="5337741"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336390">opFloatMap</a></span><span class="op" id="5337751">[</span><span class="ident" id="5337752"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337115">opName</a></span><span class="op" id="5337758">]</span><span class="op" id="5337759">;</span>&nbsp;<span class="ident" id="5337761"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337385">found</a></span>&nbsp;<span class="op" id="5337767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337771">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;reg</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337791">if</span>&nbsp;<span class="ident" id="5337794"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337208">argCount</a></span><span class="op" id="5337802">(</span><span class="num" id="5337803">3</span><span class="op" id="5337804">)</span>&nbsp;<span class="op" id="5337806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337811"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337183">s2</a></span>&nbsp;<span class="op" id="5337814">=</span>&nbsp;<span class="ident" id="5337816"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#5349323">parseReg</a></span><span class="op" id="5337824">(</span><span class="ident" id="5337825"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337053">p</a></span><span class="op" id="5337826">,</span>&nbsp;<span class="ident" id="5337828"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337134">args</a></span><span class="op" id="5337832">[</span><span class="num" id="5337833">2</span><span class="op" id="5337834">]</span><span class="op" id="5337835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337843"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337191">isFloat</a></span>&nbsp;<span class="op" id="5337851">=</span>&nbsp;<span class="num" id="5337853">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337856">}</span>&nbsp;<span class="keyword" id="5337858">else</span>&nbsp;<span class="op" id="5337863">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337867">return</span>&nbsp;<span class="ident" id="5337874">nil</span><span class="op" id="5337877">,</span>&nbsp;<span class="ident" id="5337879">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337890">return</span>&nbsp;<span class="ident" id="5337897"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5336786">makeInstReg</a></span><span class="op" id="5337908">(</span><span class="ident" id="5337909"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337172">fn</a></span><span class="op" id="5337911">,</span>&nbsp;<span class="ident" id="5337913"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337176">d</a></span><span class="op" id="5337914">,</span>&nbsp;<span class="ident" id="5337916"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337179">s1</a></span><span class="op" id="5337918">,</span>&nbsp;<span class="ident" id="5337920"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337183">s2</a></span><span class="op" id="5337922">,</span>&nbsp;<span class="ident" id="5337924"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337187">sh</a></span><span class="op" id="5337926">,</span>&nbsp;<span class="ident" id="5337928"><a href="/lonnie.io/e8vm/asm8/inst_reg.go.html#5337191">isFloat</a></span><span class="op" id="5337935">)</span><span class="op" id="5337936">,</span>&nbsp;<span class="ident" id="5337938">true</span><br>
<span class="lineno"></span><span class="op" id="5337943">}</span>
</div>
</body>
</html>
