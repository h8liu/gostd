<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5058637">//&nbsp;Created&nbsp;by&nbsp;encgen&nbsp;--output&nbsp;enc_helpers.go;&nbsp;DO&nbsp;NOT&nbsp;EDIT</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5058696">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5058751">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno">5</span><span class="comment" id="5058805">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5058856">package</span>&nbsp;<span class="ident" id="5058864">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5058869">import</span>&nbsp;<span class="op" id="5058876">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5058879">&#34;reflect&#34;</span><br>
<span class="lineno"></span><span class="op" id="5058889">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5058892">var</span>&nbsp;<span class="ident" id="5058896">encArrayHelper</span>&nbsp;<span class="op" id="5058911">=</span>&nbsp;<span class="keyword" id="5058913">map</span><span class="op" id="5058916">[</span><span class="ident" id="5058917">reflect</span><span class="op" id="5058924">.</span><span class="ident" id="5058925">Kind</span><span class="op" id="5058929">]</span><span class="ident" id="5058930">encHelper</span><span class="op" id="5058939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5058942">reflect</span><span class="op" id="5058949">.</span><span class="ident" id="5058950">Bool</span><span class="op" id="5058954">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5058962">encBoolArray</span><span class="op" id="5058974">,</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5058977">reflect</span><span class="op" id="5058984">.</span><span class="ident" id="5058985">Complex64</span><span class="op" id="5058994">:</span>&nbsp;&nbsp;<span class="ident" id="5058997">encComplex64Array</span><span class="op" id="5059014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059017">reflect</span><span class="op" id="5059024">.</span><span class="ident" id="5059025">Complex128</span><span class="op" id="5059035">:</span>&nbsp;<span class="ident" id="5059037">encComplex128Array</span><span class="op" id="5059055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059058">reflect</span><span class="op" id="5059065">.</span><span class="ident" id="5059066">Float32</span><span class="op" id="5059073">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059078">encFloat32Array</span><span class="op" id="5059093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059096">reflect</span><span class="op" id="5059103">.</span><span class="ident" id="5059104">Float64</span><span class="op" id="5059111">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059116">encFloat64Array</span><span class="op" id="5059131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059134">reflect</span><span class="op" id="5059141">.</span><span class="ident" id="5059142">Int</span><span class="op" id="5059145">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059154">encIntArray</span><span class="op" id="5059165">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059168">reflect</span><span class="op" id="5059175">.</span><span class="ident" id="5059176">Int16</span><span class="op" id="5059181">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059188">encInt16Array</span><span class="op" id="5059201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059204">reflect</span><span class="op" id="5059211">.</span><span class="ident" id="5059212">Int32</span><span class="op" id="5059217">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059224">encInt32Array</span><span class="op" id="5059237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059240">reflect</span><span class="op" id="5059247">.</span><span class="ident" id="5059248">Int64</span><span class="op" id="5059253">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059260">encInt64Array</span><span class="op" id="5059273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059276">reflect</span><span class="op" id="5059283">.</span><span class="ident" id="5059284">Int8</span><span class="op" id="5059288">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059296">encInt8Array</span><span class="op" id="5059308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059311">reflect</span><span class="op" id="5059318">.</span><span class="ident" id="5059319">String</span><span class="op" id="5059325">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059331">encStringArray</span><span class="op" id="5059345">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059348">reflect</span><span class="op" id="5059355">.</span><span class="ident" id="5059356">Uint</span><span class="op" id="5059360">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059368">encUintArray</span><span class="op" id="5059380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059383">reflect</span><span class="op" id="5059390">.</span><span class="ident" id="5059391">Uint16</span><span class="op" id="5059397">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059403">encUint16Array</span><span class="op" id="5059417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059420">reflect</span><span class="op" id="5059427">.</span><span class="ident" id="5059428">Uint32</span><span class="op" id="5059434">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059440">encUint32Array</span><span class="op" id="5059454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059457">reflect</span><span class="op" id="5059464">.</span><span class="ident" id="5059465">Uint64</span><span class="op" id="5059471">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059477">encUint64Array</span><span class="op" id="5059491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059494">reflect</span><span class="op" id="5059501">.</span><span class="ident" id="5059502">Uintptr</span><span class="op" id="5059509">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059514">encUintptrArray</span><span class="op" id="5059529">,</span><br>
<span class="lineno">30</span><span class="op" id="5059531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5059534">var</span>&nbsp;<span class="ident" id="5059538">encSliceHelper</span>&nbsp;<span class="op" id="5059553">=</span>&nbsp;<span class="keyword" id="5059555">map</span><span class="op" id="5059558">[</span><span class="ident" id="5059559">reflect</span><span class="op" id="5059566">.</span><span class="ident" id="5059567">Kind</span><span class="op" id="5059571">]</span><span class="ident" id="5059572">encHelper</span><span class="op" id="5059581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059584">reflect</span><span class="op" id="5059591">.</span><span class="ident" id="5059592">Bool</span><span class="op" id="5059596">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059604">encBoolSlice</span><span class="op" id="5059616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059619">reflect</span><span class="op" id="5059626">.</span><span class="ident" id="5059627">Complex64</span><span class="op" id="5059636">:</span>&nbsp;&nbsp;<span class="ident" id="5059639">encComplex64Slice</span><span class="op" id="5059656">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059659">reflect</span><span class="op" id="5059666">.</span><span class="ident" id="5059667">Complex128</span><span class="op" id="5059677">:</span>&nbsp;<span class="ident" id="5059679">encComplex128Slice</span><span class="op" id="5059697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059700">reflect</span><span class="op" id="5059707">.</span><span class="ident" id="5059708">Float32</span><span class="op" id="5059715">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059720">encFloat32Slice</span><span class="op" id="5059735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059738">reflect</span><span class="op" id="5059745">.</span><span class="ident" id="5059746">Float64</span><span class="op" id="5059753">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059758">encFloat64Slice</span><span class="op" id="5059773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059776">reflect</span><span class="op" id="5059783">.</span><span class="ident" id="5059784">Int</span><span class="op" id="5059787">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059796">encIntSlice</span><span class="op" id="5059807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059810">reflect</span><span class="op" id="5059817">.</span><span class="ident" id="5059818">Int16</span><span class="op" id="5059823">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059830">encInt16Slice</span><span class="op" id="5059843">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059846">reflect</span><span class="op" id="5059853">.</span><span class="ident" id="5059854">Int32</span><span class="op" id="5059859">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059866">encInt32Slice</span><span class="op" id="5059879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059882">reflect</span><span class="op" id="5059889">.</span><span class="ident" id="5059890">Int64</span><span class="op" id="5059895">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059902">encInt64Slice</span><span class="op" id="5059915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059918">reflect</span><span class="op" id="5059925">.</span><span class="ident" id="5059926">Int8</span><span class="op" id="5059930">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059938">encInt8Slice</span><span class="op" id="5059950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059953">reflect</span><span class="op" id="5059960">.</span><span class="ident" id="5059961">String</span><span class="op" id="5059967">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5059973">encStringSlice</span><span class="op" id="5059987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5059990">reflect</span><span class="op" id="5059997">.</span><span class="ident" id="5059998">Uint</span><span class="op" id="5060002">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5060010">encUintSlice</span><span class="op" id="5060022">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5060025">reflect</span><span class="op" id="5060032">.</span><span class="ident" id="5060033">Uint16</span><span class="op" id="5060039">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5060045">encUint16Slice</span><span class="op" id="5060059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5060062">reflect</span><span class="op" id="5060069">.</span><span class="ident" id="5060070">Uint32</span><span class="op" id="5060076">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5060082">encUint32Slice</span><span class="op" id="5060096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5060099">reflect</span><span class="op" id="5060106">.</span><span class="ident" id="5060107">Uint64</span><span class="op" id="5060113">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5060119">encUint64Slice</span><span class="op" id="5060133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5060136">reflect</span><span class="op" id="5060143">.</span><span class="ident" id="5060144">Uintptr</span><span class="op" id="5060151">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5060156">encUintptrSlice</span><span class="op" id="5060171">,</span><br>
<span class="lineno"></span><span class="op" id="5060173">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5060176">func</span>&nbsp;<span class="ident" id="5060181">encBoolArray</span><span class="op" id="5060193">(</span><span class="ident" id="5060194">state</span>&nbsp;<span class="op" id="5060200">*</span><span class="ident" id="5060201">encoderState</span><span class="op" id="5060213">,</span>&nbsp;<span class="ident" id="5060215">v</span>&nbsp;<span class="ident" id="5060217">reflect</span><span class="op" id="5060224">.</span><span class="ident" id="5060225">Value</span><span class="op" id="5060230">)</span>&nbsp;<span class="builtintype" id="5060232">bool</span>&nbsp;<span class="op" id="5060237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5060240">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5060281">if</span>&nbsp;<span class="op" id="5060284">!</span><span class="ident" id="5060285">v</span><span class="op" id="5060286">.</span><span class="ident" id="5060287">CanAddr</span><span class="op" id="5060294">(</span><span class="op" id="5060295">)</span>&nbsp;<span class="op" id="5060297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5060301">return</span>&nbsp;<span class="builtintype" id="5060308">false</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5060315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5060318">return</span>&nbsp;<span class="ident" id="5060325">encBoolSlice</span><span class="op" id="5060337">(</span><span class="ident" id="5060338">state</span><span class="op" id="5060343">,</span>&nbsp;<span class="ident" id="5060345">v</span><span class="op" id="5060346">.</span><span class="ident" id="5060347">Slice</span><span class="op" id="5060352">(</span><span class="num" id="5060353">0</span><span class="op" id="5060354">,</span>&nbsp;<span class="ident" id="5060356">v</span><span class="op" id="5060357">.</span><span class="ident" id="5060358">Len</span><span class="op" id="5060361">(</span><span class="op" id="5060362">)</span><span class="op" id="5060363">)</span><span class="op" id="5060364">)</span><br>
<span class="lineno"></span><span class="op" id="5060366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5060369">func</span>&nbsp;<span class="ident" id="5060374">encBoolSlice</span><span class="op" id="5060386">(</span><span class="ident" id="5060387">state</span>&nbsp;<span class="op" id="5060393">*</span><span class="ident" id="5060394">encoderState</span><span class="op" id="5060406">,</span>&nbsp;<span class="ident" id="5060408">v</span>&nbsp;<span class="ident" id="5060410">reflect</span><span class="op" id="5060417">.</span><span class="ident" id="5060418">Value</span><span class="op" id="5060423">)</span>&nbsp;<span class="builtintype" id="5060425">bool</span>&nbsp;<span class="op" id="5060430">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5060433">slice</span><span class="op" id="5060438">,</span>&nbsp;<span class="ident" id="5060440">ok</span>&nbsp;<span class="op" id="5060443">:=</span>&nbsp;<span class="ident" id="5060446">v</span><span class="op" id="5060447">.</span><span class="ident" id="5060448">Interface</span><span class="op" id="5060457">(</span><span class="op" id="5060458">)</span><span class="op" id="5060459">.</span><span class="op" id="5060460">(</span><span class="op" id="5060461">[</span><span class="op" id="5060462">]</span><span class="builtintype" id="5060463">bool</span><span class="op" id="5060467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5060470">if</span>&nbsp;<span class="op" id="5060473">!</span><span class="ident" id="5060474">ok</span>&nbsp;<span class="op" id="5060477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5060481">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;bool&nbsp;but&nbsp;not&nbsp;type&nbsp;bool.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5060556">return</span>&nbsp;<span class="builtintype" id="5060563">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5060570">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5060573">for</span>&nbsp;<span class="ident" id="5060577">_</span><span class="op" id="5060578">,</span>&nbsp;<span class="ident" id="5060580">x</span>&nbsp;<span class="op" id="5060582">:=</span>&nbsp;<span class="keyword" id="5060585">range</span>&nbsp;<span class="ident" id="5060591">slice</span>&nbsp;<span class="op" id="5060597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5060601">if</span>&nbsp;<span class="ident" id="5060604">x</span>&nbsp;<span class="op" id="5060606">!=</span>&nbsp;<span class="builtintype" id="5060609">false</span>&nbsp;<span class="op" id="5060615">||</span>&nbsp;<span class="ident" id="5060618">state</span><span class="op" id="5060623">.</span><span class="ident" id="5060624">sendZero</span>&nbsp;<span class="op" id="5060633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5060638">if</span>&nbsp;<span class="ident" id="5060641">x</span>&nbsp;<span class="op" id="5060643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5060649">state</span><span class="op" id="5060654">.</span><span class="ident" id="5060655">encodeUint</span><span class="op" id="5060665">(</span><span class="num" id="5060666">1</span><span class="op" id="5060667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5060672">}</span>&nbsp;<span class="keyword" id="5060674">else</span>&nbsp;<span class="op" id="5060679">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5060685">state</span><span class="op" id="5060690">.</span><span class="ident" id="5060691">encodeUint</span><span class="op" id="5060701">(</span><span class="num" id="5060702">0</span><span class="op" id="5060703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5060708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5060712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5060715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5060718">return</span>&nbsp;<span class="builtintype" id="5060725">true</span><br>
<span class="lineno">75</span><span class="op" id="5060730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5060733">func</span>&nbsp;<span class="ident" id="5060738">encComplex64Array</span><span class="op" id="5060755">(</span><span class="ident" id="5060756">state</span>&nbsp;<span class="op" id="5060762">*</span><span class="ident" id="5060763">encoderState</span><span class="op" id="5060775">,</span>&nbsp;<span class="ident" id="5060777">v</span>&nbsp;<span class="ident" id="5060779">reflect</span><span class="op" id="5060786">.</span><span class="ident" id="5060787">Value</span><span class="op" id="5060792">)</span>&nbsp;<span class="builtintype" id="5060794">bool</span>&nbsp;<span class="op" id="5060799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5060802">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5060843">if</span>&nbsp;<span class="op" id="5060846">!</span><span class="ident" id="5060847">v</span><span class="op" id="5060848">.</span><span class="ident" id="5060849">CanAddr</span><span class="op" id="5060856">(</span><span class="op" id="5060857">)</span>&nbsp;<span class="op" id="5060859">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5060863">return</span>&nbsp;<span class="builtintype" id="5060870">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5060877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5060880">return</span>&nbsp;<span class="ident" id="5060887">encComplex64Slice</span><span class="op" id="5060904">(</span><span class="ident" id="5060905">state</span><span class="op" id="5060910">,</span>&nbsp;<span class="ident" id="5060912">v</span><span class="op" id="5060913">.</span><span class="ident" id="5060914">Slice</span><span class="op" id="5060919">(</span><span class="num" id="5060920">0</span><span class="op" id="5060921">,</span>&nbsp;<span class="ident" id="5060923">v</span><span class="op" id="5060924">.</span><span class="ident" id="5060925">Len</span><span class="op" id="5060928">(</span><span class="op" id="5060929">)</span><span class="op" id="5060930">)</span><span class="op" id="5060931">)</span><br>
<span class="lineno"></span><span class="op" id="5060933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="5060936">func</span>&nbsp;<span class="ident" id="5060941">encComplex64Slice</span><span class="op" id="5060958">(</span><span class="ident" id="5060959">state</span>&nbsp;<span class="op" id="5060965">*</span><span class="ident" id="5060966">encoderState</span><span class="op" id="5060978">,</span>&nbsp;<span class="ident" id="5060980">v</span>&nbsp;<span class="ident" id="5060982">reflect</span><span class="op" id="5060989">.</span><span class="ident" id="5060990">Value</span><span class="op" id="5060995">)</span>&nbsp;<span class="builtintype" id="5060997">bool</span>&nbsp;<span class="op" id="5061002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061005">slice</span><span class="op" id="5061010">,</span>&nbsp;<span class="ident" id="5061012">ok</span>&nbsp;<span class="op" id="5061015">:=</span>&nbsp;<span class="ident" id="5061018">v</span><span class="op" id="5061019">.</span><span class="ident" id="5061020">Interface</span><span class="op" id="5061029">(</span><span class="op" id="5061030">)</span><span class="op" id="5061031">.</span><span class="op" id="5061032">(</span><span class="op" id="5061033">[</span><span class="op" id="5061034">]</span><span class="builtintype" id="5061035">complex64</span><span class="op" id="5061044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061047">if</span>&nbsp;<span class="op" id="5061050">!</span><span class="ident" id="5061051">ok</span>&nbsp;<span class="op" id="5061054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5061058">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;complex64&nbsp;but&nbsp;not&nbsp;type&nbsp;complex64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061143">return</span>&nbsp;<span class="builtintype" id="5061150">false</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5061157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061160">for</span>&nbsp;<span class="ident" id="5061164">_</span><span class="op" id="5061165">,</span>&nbsp;<span class="ident" id="5061167">x</span>&nbsp;<span class="op" id="5061169">:=</span>&nbsp;<span class="keyword" id="5061172">range</span>&nbsp;<span class="ident" id="5061178">slice</span>&nbsp;<span class="op" id="5061184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061188">if</span>&nbsp;<span class="ident" id="5061191">x</span>&nbsp;<span class="op" id="5061193">!=</span>&nbsp;<span class="num" id="5061196">0</span><span class="op" id="5061197">+</span><span class="num" id="5061198">0i</span>&nbsp;<span class="op" id="5061201">||</span>&nbsp;<span class="ident" id="5061204">state</span><span class="op" id="5061209">.</span><span class="ident" id="5061210">sendZero</span>&nbsp;<span class="op" id="5061219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061224">rpart</span>&nbsp;<span class="op" id="5061230">:=</span>&nbsp;<span class="ident" id="5061233">floatBits</span><span class="op" id="5061242">(</span><span class="builtintype" id="5061243">float64</span><span class="op" id="5061250">(</span><span class="builtinfunc" id="5061251">real</span><span class="op" id="5061255">(</span><span class="ident" id="5061256">x</span><span class="op" id="5061257">)</span><span class="op" id="5061258">)</span><span class="op" id="5061259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061264">ipart</span>&nbsp;<span class="op" id="5061270">:=</span>&nbsp;<span class="ident" id="5061273">floatBits</span><span class="op" id="5061282">(</span><span class="builtintype" id="5061283">float64</span><span class="op" id="5061290">(</span><span class="builtinfunc" id="5061291">imag</span><span class="op" id="5061295">(</span><span class="ident" id="5061296">x</span><span class="op" id="5061297">)</span><span class="op" id="5061298">)</span><span class="op" id="5061299">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061304">state</span><span class="op" id="5061309">.</span><span class="ident" id="5061310">encodeUint</span><span class="op" id="5061320">(</span><span class="ident" id="5061321">rpart</span><span class="op" id="5061326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061331">state</span><span class="op" id="5061336">.</span><span class="ident" id="5061337">encodeUint</span><span class="op" id="5061347">(</span><span class="ident" id="5061348">ipart</span><span class="op" id="5061353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5061357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5061360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061363">return</span>&nbsp;<span class="builtintype" id="5061370">true</span><br>
<span class="lineno">100</span><span class="op" id="5061375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5061378">func</span>&nbsp;<span class="ident" id="5061383">encComplex128Array</span><span class="op" id="5061401">(</span><span class="ident" id="5061402">state</span>&nbsp;<span class="op" id="5061408">*</span><span class="ident" id="5061409">encoderState</span><span class="op" id="5061421">,</span>&nbsp;<span class="ident" id="5061423">v</span>&nbsp;<span class="ident" id="5061425">reflect</span><span class="op" id="5061432">.</span><span class="ident" id="5061433">Value</span><span class="op" id="5061438">)</span>&nbsp;<span class="builtintype" id="5061440">bool</span>&nbsp;<span class="op" id="5061445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5061448">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061489">if</span>&nbsp;<span class="op" id="5061492">!</span><span class="ident" id="5061493">v</span><span class="op" id="5061494">.</span><span class="ident" id="5061495">CanAddr</span><span class="op" id="5061502">(</span><span class="op" id="5061503">)</span>&nbsp;<span class="op" id="5061505">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061509">return</span>&nbsp;<span class="builtintype" id="5061516">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5061523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061526">return</span>&nbsp;<span class="ident" id="5061533">encComplex128Slice</span><span class="op" id="5061551">(</span><span class="ident" id="5061552">state</span><span class="op" id="5061557">,</span>&nbsp;<span class="ident" id="5061559">v</span><span class="op" id="5061560">.</span><span class="ident" id="5061561">Slice</span><span class="op" id="5061566">(</span><span class="num" id="5061567">0</span><span class="op" id="5061568">,</span>&nbsp;<span class="ident" id="5061570">v</span><span class="op" id="5061571">.</span><span class="ident" id="5061572">Len</span><span class="op" id="5061575">(</span><span class="op" id="5061576">)</span><span class="op" id="5061577">)</span><span class="op" id="5061578">)</span><br>
<span class="lineno"></span><span class="op" id="5061580">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="5061583">func</span>&nbsp;<span class="ident" id="5061588">encComplex128Slice</span><span class="op" id="5061606">(</span><span class="ident" id="5061607">state</span>&nbsp;<span class="op" id="5061613">*</span><span class="ident" id="5061614">encoderState</span><span class="op" id="5061626">,</span>&nbsp;<span class="ident" id="5061628">v</span>&nbsp;<span class="ident" id="5061630">reflect</span><span class="op" id="5061637">.</span><span class="ident" id="5061638">Value</span><span class="op" id="5061643">)</span>&nbsp;<span class="builtintype" id="5061645">bool</span>&nbsp;<span class="op" id="5061650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061653">slice</span><span class="op" id="5061658">,</span>&nbsp;<span class="ident" id="5061660">ok</span>&nbsp;<span class="op" id="5061663">:=</span>&nbsp;<span class="ident" id="5061666">v</span><span class="op" id="5061667">.</span><span class="ident" id="5061668">Interface</span><span class="op" id="5061677">(</span><span class="op" id="5061678">)</span><span class="op" id="5061679">.</span><span class="op" id="5061680">(</span><span class="op" id="5061681">[</span><span class="op" id="5061682">]</span><span class="builtintype" id="5061683">complex128</span><span class="op" id="5061693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061696">if</span>&nbsp;<span class="op" id="5061699">!</span><span class="ident" id="5061700">ok</span>&nbsp;<span class="op" id="5061703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5061707">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;complex128&nbsp;but&nbsp;not&nbsp;type&nbsp;complex128.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061794">return</span>&nbsp;<span class="builtintype" id="5061801">false</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5061808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061811">for</span>&nbsp;<span class="ident" id="5061815">_</span><span class="op" id="5061816">,</span>&nbsp;<span class="ident" id="5061818">x</span>&nbsp;<span class="op" id="5061820">:=</span>&nbsp;<span class="keyword" id="5061823">range</span>&nbsp;<span class="ident" id="5061829">slice</span>&nbsp;<span class="op" id="5061835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061839">if</span>&nbsp;<span class="ident" id="5061842">x</span>&nbsp;<span class="op" id="5061844">!=</span>&nbsp;<span class="num" id="5061847">0</span><span class="op" id="5061848">+</span><span class="num" id="5061849">0i</span>&nbsp;<span class="op" id="5061852">||</span>&nbsp;<span class="ident" id="5061855">state</span><span class="op" id="5061860">.</span><span class="ident" id="5061861">sendZero</span>&nbsp;<span class="op" id="5061870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061875">rpart</span>&nbsp;<span class="op" id="5061881">:=</span>&nbsp;<span class="ident" id="5061884">floatBits</span><span class="op" id="5061893">(</span><span class="builtinfunc" id="5061894">real</span><span class="op" id="5061898">(</span><span class="ident" id="5061899">x</span><span class="op" id="5061900">)</span><span class="op" id="5061901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061906">ipart</span>&nbsp;<span class="op" id="5061912">:=</span>&nbsp;<span class="ident" id="5061915">floatBits</span><span class="op" id="5061924">(</span><span class="builtinfunc" id="5061925">imag</span><span class="op" id="5061929">(</span><span class="ident" id="5061930">x</span><span class="op" id="5061931">)</span><span class="op" id="5061932">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061937">state</span><span class="op" id="5061942">.</span><span class="ident" id="5061943">encodeUint</span><span class="op" id="5061953">(</span><span class="ident" id="5061954">rpart</span><span class="op" id="5061959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061964">state</span><span class="op" id="5061969">.</span><span class="ident" id="5061970">encodeUint</span><span class="op" id="5061980">(</span><span class="ident" id="5061981">ipart</span><span class="op" id="5061986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5061990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5061993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061996">return</span>&nbsp;<span class="builtintype" id="5062003">true</span><br>
<span class="lineno">125</span><span class="op" id="5062008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5062011">func</span>&nbsp;<span class="ident" id="5062016">encFloat32Array</span><span class="op" id="5062031">(</span><span class="ident" id="5062032">state</span>&nbsp;<span class="op" id="5062038">*</span><span class="ident" id="5062039">encoderState</span><span class="op" id="5062051">,</span>&nbsp;<span class="ident" id="5062053">v</span>&nbsp;<span class="ident" id="5062055">reflect</span><span class="op" id="5062062">.</span><span class="ident" id="5062063">Value</span><span class="op" id="5062068">)</span>&nbsp;<span class="builtintype" id="5062070">bool</span>&nbsp;<span class="op" id="5062075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5062078">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062119">if</span>&nbsp;<span class="op" id="5062122">!</span><span class="ident" id="5062123">v</span><span class="op" id="5062124">.</span><span class="ident" id="5062125">CanAddr</span><span class="op" id="5062132">(</span><span class="op" id="5062133">)</span>&nbsp;<span class="op" id="5062135">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062139">return</span>&nbsp;<span class="builtintype" id="5062146">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5062153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062156">return</span>&nbsp;<span class="ident" id="5062163">encFloat32Slice</span><span class="op" id="5062178">(</span><span class="ident" id="5062179">state</span><span class="op" id="5062184">,</span>&nbsp;<span class="ident" id="5062186">v</span><span class="op" id="5062187">.</span><span class="ident" id="5062188">Slice</span><span class="op" id="5062193">(</span><span class="num" id="5062194">0</span><span class="op" id="5062195">,</span>&nbsp;<span class="ident" id="5062197">v</span><span class="op" id="5062198">.</span><span class="ident" id="5062199">Len</span><span class="op" id="5062202">(</span><span class="op" id="5062203">)</span><span class="op" id="5062204">)</span><span class="op" id="5062205">)</span><br>
<span class="lineno"></span><span class="op" id="5062207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="5062210">func</span>&nbsp;<span class="ident" id="5062215">encFloat32Slice</span><span class="op" id="5062230">(</span><span class="ident" id="5062231">state</span>&nbsp;<span class="op" id="5062237">*</span><span class="ident" id="5062238">encoderState</span><span class="op" id="5062250">,</span>&nbsp;<span class="ident" id="5062252">v</span>&nbsp;<span class="ident" id="5062254">reflect</span><span class="op" id="5062261">.</span><span class="ident" id="5062262">Value</span><span class="op" id="5062267">)</span>&nbsp;<span class="builtintype" id="5062269">bool</span>&nbsp;<span class="op" id="5062274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5062277">slice</span><span class="op" id="5062282">,</span>&nbsp;<span class="ident" id="5062284">ok</span>&nbsp;<span class="op" id="5062287">:=</span>&nbsp;<span class="ident" id="5062290">v</span><span class="op" id="5062291">.</span><span class="ident" id="5062292">Interface</span><span class="op" id="5062301">(</span><span class="op" id="5062302">)</span><span class="op" id="5062303">.</span><span class="op" id="5062304">(</span><span class="op" id="5062305">[</span><span class="op" id="5062306">]</span><span class="builtintype" id="5062307">float32</span><span class="op" id="5062314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062317">if</span>&nbsp;<span class="op" id="5062320">!</span><span class="ident" id="5062321">ok</span>&nbsp;<span class="op" id="5062324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5062328">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;float32&nbsp;but&nbsp;not&nbsp;type&nbsp;float32.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062409">return</span>&nbsp;<span class="builtintype" id="5062416">false</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5062423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062426">for</span>&nbsp;<span class="ident" id="5062430">_</span><span class="op" id="5062431">,</span>&nbsp;<span class="ident" id="5062433">x</span>&nbsp;<span class="op" id="5062435">:=</span>&nbsp;<span class="keyword" id="5062438">range</span>&nbsp;<span class="ident" id="5062444">slice</span>&nbsp;<span class="op" id="5062450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062454">if</span>&nbsp;<span class="ident" id="5062457">x</span>&nbsp;<span class="op" id="5062459">!=</span>&nbsp;<span class="num" id="5062462">0</span>&nbsp;<span class="op" id="5062464">||</span>&nbsp;<span class="ident" id="5062467">state</span><span class="op" id="5062472">.</span><span class="ident" id="5062473">sendZero</span>&nbsp;<span class="op" id="5062482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5062487">bits</span>&nbsp;<span class="op" id="5062492">:=</span>&nbsp;<span class="ident" id="5062495">floatBits</span><span class="op" id="5062504">(</span><span class="builtintype" id="5062505">float64</span><span class="op" id="5062512">(</span><span class="ident" id="5062513">x</span><span class="op" id="5062514">)</span><span class="op" id="5062515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5062520">state</span><span class="op" id="5062525">.</span><span class="ident" id="5062526">encodeUint</span><span class="op" id="5062536">(</span><span class="ident" id="5062537">bits</span><span class="op" id="5062541">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5062545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5062548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062551">return</span>&nbsp;<span class="builtintype" id="5062558">true</span><br>
<span class="lineno"></span><span class="op" id="5062563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="5062566">func</span>&nbsp;<span class="ident" id="5062571">encFloat64Array</span><span class="op" id="5062586">(</span><span class="ident" id="5062587">state</span>&nbsp;<span class="op" id="5062593">*</span><span class="ident" id="5062594">encoderState</span><span class="op" id="5062606">,</span>&nbsp;<span class="ident" id="5062608">v</span>&nbsp;<span class="ident" id="5062610">reflect</span><span class="op" id="5062617">.</span><span class="ident" id="5062618">Value</span><span class="op" id="5062623">)</span>&nbsp;<span class="builtintype" id="5062625">bool</span>&nbsp;<span class="op" id="5062630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5062633">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062674">if</span>&nbsp;<span class="op" id="5062677">!</span><span class="ident" id="5062678">v</span><span class="op" id="5062679">.</span><span class="ident" id="5062680">CanAddr</span><span class="op" id="5062687">(</span><span class="op" id="5062688">)</span>&nbsp;<span class="op" id="5062690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062694">return</span>&nbsp;<span class="builtintype" id="5062701">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5062708">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062711">return</span>&nbsp;<span class="ident" id="5062718">encFloat64Slice</span><span class="op" id="5062733">(</span><span class="ident" id="5062734">state</span><span class="op" id="5062739">,</span>&nbsp;<span class="ident" id="5062741">v</span><span class="op" id="5062742">.</span><span class="ident" id="5062743">Slice</span><span class="op" id="5062748">(</span><span class="num" id="5062749">0</span><span class="op" id="5062750">,</span>&nbsp;<span class="ident" id="5062752">v</span><span class="op" id="5062753">.</span><span class="ident" id="5062754">Len</span><span class="op" id="5062757">(</span><span class="op" id="5062758">)</span><span class="op" id="5062759">)</span><span class="op" id="5062760">)</span><br>
<span class="lineno"></span><span class="op" id="5062762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5062765">func</span>&nbsp;<span class="ident" id="5062770">encFloat64Slice</span><span class="op" id="5062785">(</span><span class="ident" id="5062786">state</span>&nbsp;<span class="op" id="5062792">*</span><span class="ident" id="5062793">encoderState</span><span class="op" id="5062805">,</span>&nbsp;<span class="ident" id="5062807">v</span>&nbsp;<span class="ident" id="5062809">reflect</span><span class="op" id="5062816">.</span><span class="ident" id="5062817">Value</span><span class="op" id="5062822">)</span>&nbsp;<span class="builtintype" id="5062824">bool</span>&nbsp;<span class="op" id="5062829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5062832">slice</span><span class="op" id="5062837">,</span>&nbsp;<span class="ident" id="5062839">ok</span>&nbsp;<span class="op" id="5062842">:=</span>&nbsp;<span class="ident" id="5062845">v</span><span class="op" id="5062846">.</span><span class="ident" id="5062847">Interface</span><span class="op" id="5062856">(</span><span class="op" id="5062857">)</span><span class="op" id="5062858">.</span><span class="op" id="5062859">(</span><span class="op" id="5062860">[</span><span class="op" id="5062861">]</span><span class="builtintype" id="5062862">float64</span><span class="op" id="5062869">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062872">if</span>&nbsp;<span class="op" id="5062875">!</span><span class="ident" id="5062876">ok</span>&nbsp;<span class="op" id="5062879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5062883">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;float64&nbsp;but&nbsp;not&nbsp;type&nbsp;float64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062964">return</span>&nbsp;<span class="builtintype" id="5062971">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5062978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062981">for</span>&nbsp;<span class="ident" id="5062985">_</span><span class="op" id="5062986">,</span>&nbsp;<span class="ident" id="5062988">x</span>&nbsp;<span class="op" id="5062990">:=</span>&nbsp;<span class="keyword" id="5062993">range</span>&nbsp;<span class="ident" id="5062999">slice</span>&nbsp;<span class="op" id="5063005">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063009">if</span>&nbsp;<span class="ident" id="5063012">x</span>&nbsp;<span class="op" id="5063014">!=</span>&nbsp;<span class="num" id="5063017">0</span>&nbsp;<span class="op" id="5063019">||</span>&nbsp;<span class="ident" id="5063022">state</span><span class="op" id="5063027">.</span><span class="ident" id="5063028">sendZero</span>&nbsp;<span class="op" id="5063037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5063042">bits</span>&nbsp;<span class="op" id="5063047">:=</span>&nbsp;<span class="ident" id="5063050">floatBits</span><span class="op" id="5063059">(</span><span class="ident" id="5063060">x</span><span class="op" id="5063061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5063066">state</span><span class="op" id="5063071">.</span><span class="ident" id="5063072">encodeUint</span><span class="op" id="5063082">(</span><span class="ident" id="5063083">bits</span><span class="op" id="5063087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5063091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5063094">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063097">return</span>&nbsp;<span class="builtintype" id="5063104">true</span><br>
<span class="lineno"></span><span class="op" id="5063109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5063112">func</span>&nbsp;<span class="ident" id="5063117">encIntArray</span><span class="op" id="5063128">(</span><span class="ident" id="5063129">state</span>&nbsp;<span class="op" id="5063135">*</span><span class="ident" id="5063136">encoderState</span><span class="op" id="5063148">,</span>&nbsp;<span class="ident" id="5063150">v</span>&nbsp;<span class="ident" id="5063152">reflect</span><span class="op" id="5063159">.</span><span class="ident" id="5063160">Value</span><span class="op" id="5063165">)</span>&nbsp;<span class="builtintype" id="5063167">bool</span>&nbsp;<span class="op" id="5063172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5063175">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063216">if</span>&nbsp;<span class="op" id="5063219">!</span><span class="ident" id="5063220">v</span><span class="op" id="5063221">.</span><span class="ident" id="5063222">CanAddr</span><span class="op" id="5063229">(</span><span class="op" id="5063230">)</span>&nbsp;<span class="op" id="5063232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063236">return</span>&nbsp;<span class="builtintype" id="5063243">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5063250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063253">return</span>&nbsp;<span class="ident" id="5063260">encIntSlice</span><span class="op" id="5063271">(</span><span class="ident" id="5063272">state</span><span class="op" id="5063277">,</span>&nbsp;<span class="ident" id="5063279">v</span><span class="op" id="5063280">.</span><span class="ident" id="5063281">Slice</span><span class="op" id="5063286">(</span><span class="num" id="5063287">0</span><span class="op" id="5063288">,</span>&nbsp;<span class="ident" id="5063290">v</span><span class="op" id="5063291">.</span><span class="ident" id="5063292">Len</span><span class="op" id="5063295">(</span><span class="op" id="5063296">)</span><span class="op" id="5063297">)</span><span class="op" id="5063298">)</span><br>
<span class="lineno"></span><span class="op" id="5063300">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="keyword" id="5063303">func</span>&nbsp;<span class="ident" id="5063308">encIntSlice</span><span class="op" id="5063319">(</span><span class="ident" id="5063320">state</span>&nbsp;<span class="op" id="5063326">*</span><span class="ident" id="5063327">encoderState</span><span class="op" id="5063339">,</span>&nbsp;<span class="ident" id="5063341">v</span>&nbsp;<span class="ident" id="5063343">reflect</span><span class="op" id="5063350">.</span><span class="ident" id="5063351">Value</span><span class="op" id="5063356">)</span>&nbsp;<span class="builtintype" id="5063358">bool</span>&nbsp;<span class="op" id="5063363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5063366">slice</span><span class="op" id="5063371">,</span>&nbsp;<span class="ident" id="5063373">ok</span>&nbsp;<span class="op" id="5063376">:=</span>&nbsp;<span class="ident" id="5063379">v</span><span class="op" id="5063380">.</span><span class="ident" id="5063381">Interface</span><span class="op" id="5063390">(</span><span class="op" id="5063391">)</span><span class="op" id="5063392">.</span><span class="op" id="5063393">(</span><span class="op" id="5063394">[</span><span class="op" id="5063395">]</span><span class="builtintype" id="5063396">int</span><span class="op" id="5063399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063402">if</span>&nbsp;<span class="op" id="5063405">!</span><span class="ident" id="5063406">ok</span>&nbsp;<span class="op" id="5063409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5063413">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int&nbsp;but&nbsp;not&nbsp;type&nbsp;int.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063486">return</span>&nbsp;<span class="builtintype" id="5063493">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5063500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063503">for</span>&nbsp;<span class="ident" id="5063507">_</span><span class="op" id="5063508">,</span>&nbsp;<span class="ident" id="5063510">x</span>&nbsp;<span class="op" id="5063512">:=</span>&nbsp;<span class="keyword" id="5063515">range</span>&nbsp;<span class="ident" id="5063521">slice</span>&nbsp;<span class="op" id="5063527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063531">if</span>&nbsp;<span class="ident" id="5063534">x</span>&nbsp;<span class="op" id="5063536">!=</span>&nbsp;<span class="num" id="5063539">0</span>&nbsp;<span class="op" id="5063541">||</span>&nbsp;<span class="ident" id="5063544">state</span><span class="op" id="5063549">.</span><span class="ident" id="5063550">sendZero</span>&nbsp;<span class="op" id="5063559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5063564">state</span><span class="op" id="5063569">.</span><span class="ident" id="5063570">encodeInt</span><span class="op" id="5063579">(</span><span class="ident" id="5063580">int64</span><span class="op" id="5063585">(</span><span class="ident" id="5063586">x</span><span class="op" id="5063587">)</span><span class="op" id="5063588">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5063592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5063595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063598">return</span>&nbsp;<span class="builtintype" id="5063605">true</span><br>
<span class="lineno"></span><span class="op" id="5063610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="5063613">func</span>&nbsp;<span class="ident" id="5063618">encInt16Array</span><span class="op" id="5063631">(</span><span class="ident" id="5063632">state</span>&nbsp;<span class="op" id="5063638">*</span><span class="ident" id="5063639">encoderState</span><span class="op" id="5063651">,</span>&nbsp;<span class="ident" id="5063653">v</span>&nbsp;<span class="ident" id="5063655">reflect</span><span class="op" id="5063662">.</span><span class="ident" id="5063663">Value</span><span class="op" id="5063668">)</span>&nbsp;<span class="builtintype" id="5063670">bool</span>&nbsp;<span class="op" id="5063675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5063678">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063719">if</span>&nbsp;<span class="op" id="5063722">!</span><span class="ident" id="5063723">v</span><span class="op" id="5063724">.</span><span class="ident" id="5063725">CanAddr</span><span class="op" id="5063732">(</span><span class="op" id="5063733">)</span>&nbsp;<span class="op" id="5063735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063739">return</span>&nbsp;<span class="builtintype" id="5063746">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5063753">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063756">return</span>&nbsp;<span class="ident" id="5063763">encInt16Slice</span><span class="op" id="5063776">(</span><span class="ident" id="5063777">state</span><span class="op" id="5063782">,</span>&nbsp;<span class="ident" id="5063784">v</span><span class="op" id="5063785">.</span><span class="ident" id="5063786">Slice</span><span class="op" id="5063791">(</span><span class="num" id="5063792">0</span><span class="op" id="5063793">,</span>&nbsp;<span class="ident" id="5063795">v</span><span class="op" id="5063796">.</span><span class="ident" id="5063797">Len</span><span class="op" id="5063800">(</span><span class="op" id="5063801">)</span><span class="op" id="5063802">)</span><span class="op" id="5063803">)</span><br>
<span class="lineno"></span><span class="op" id="5063805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5063808">func</span>&nbsp;<span class="ident" id="5063813">encInt16Slice</span><span class="op" id="5063826">(</span><span class="ident" id="5063827">state</span>&nbsp;<span class="op" id="5063833">*</span><span class="ident" id="5063834">encoderState</span><span class="op" id="5063846">,</span>&nbsp;<span class="ident" id="5063848">v</span>&nbsp;<span class="ident" id="5063850">reflect</span><span class="op" id="5063857">.</span><span class="ident" id="5063858">Value</span><span class="op" id="5063863">)</span>&nbsp;<span class="builtintype" id="5063865">bool</span>&nbsp;<span class="op" id="5063870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5063873">slice</span><span class="op" id="5063878">,</span>&nbsp;<span class="ident" id="5063880">ok</span>&nbsp;<span class="op" id="5063883">:=</span>&nbsp;<span class="ident" id="5063886">v</span><span class="op" id="5063887">.</span><span class="ident" id="5063888">Interface</span><span class="op" id="5063897">(</span><span class="op" id="5063898">)</span><span class="op" id="5063899">.</span><span class="op" id="5063900">(</span><span class="op" id="5063901">[</span><span class="op" id="5063902">]</span><span class="builtintype" id="5063903">int16</span><span class="op" id="5063908">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063911">if</span>&nbsp;<span class="op" id="5063914">!</span><span class="ident" id="5063915">ok</span>&nbsp;<span class="op" id="5063918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5063922">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int16&nbsp;but&nbsp;not&nbsp;type&nbsp;int16.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063999">return</span>&nbsp;<span class="builtintype" id="5064006">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5064013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5064016">for</span>&nbsp;<span class="ident" id="5064020">_</span><span class="op" id="5064021">,</span>&nbsp;<span class="ident" id="5064023">x</span>&nbsp;<span class="op" id="5064025">:=</span>&nbsp;<span class="keyword" id="5064028">range</span>&nbsp;<span class="ident" id="5064034">slice</span>&nbsp;<span class="op" id="5064040">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5064044">if</span>&nbsp;<span class="ident" id="5064047">x</span>&nbsp;<span class="op" id="5064049">!=</span>&nbsp;<span class="num" id="5064052">0</span>&nbsp;<span class="op" id="5064054">||</span>&nbsp;<span class="ident" id="5064057">state</span><span class="op" id="5064062">.</span><span class="ident" id="5064063">sendZero</span>&nbsp;<span class="op" id="5064072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5064077">state</span><span class="op" id="5064082">.</span><span class="ident" id="5064083">encodeInt</span><span class="op" id="5064092">(</span><span class="ident" id="5064093">int64</span><span class="op" id="5064098">(</span><span class="ident" id="5064099">x</span><span class="op" id="5064100">)</span><span class="op" id="5064101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5064105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5064108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5064111">return</span>&nbsp;<span class="builtintype" id="5064118">true</span><br>
<span class="lineno">215</span><span class="op" id="5064123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5064126">func</span>&nbsp;<span class="ident" id="5064131">encInt32Array</span><span class="op" id="5064144">(</span><span class="ident" id="5064145">state</span>&nbsp;<span class="op" id="5064151">*</span><span class="ident" id="5064152">encoderState</span><span class="op" id="5064164">,</span>&nbsp;<span class="ident" id="5064166">v</span>&nbsp;<span class="ident" id="5064168">reflect</span><span class="op" id="5064175">.</span><span class="ident" id="5064176">Value</span><span class="op" id="5064181">)</span>&nbsp;<span class="builtintype" id="5064183">bool</span>&nbsp;<span class="op" id="5064188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5064191">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5064232">if</span>&nbsp;<span class="op" id="5064235">!</span><span class="ident" id="5064236">v</span><span class="op" id="5064237">.</span><span class="ident" id="5064238">CanAddr</span><span class="op" id="5064245">(</span><span class="op" id="5064246">)</span>&nbsp;<span class="op" id="5064248">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5064252">return</span>&nbsp;<span class="builtintype" id="5064259">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5064266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5064269">return</span>&nbsp;<span class="ident" id="5064276">encInt32Slice</span><span class="op" id="5064289">(</span><span class="ident" id="5064290">state</span><span class="op" id="5064295">,</span>&nbsp;<span class="ident" id="5064297">v</span><span class="op" id="5064298">.</span><span class="ident" id="5064299">Slice</span><span class="op" id="5064304">(</span><span class="num" id="5064305">0</span><span class="op" id="5064306">,</span>&nbsp;<span class="ident" id="5064308">v</span><span class="op" id="5064309">.</span><span class="ident" id="5064310">Len</span><span class="op" id="5064313">(</span><span class="op" id="5064314">)</span><span class="op" id="5064315">)</span><span class="op" id="5064316">)</span><br>
<span class="lineno"></span><span class="op" id="5064318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="5064321">func</span>&nbsp;<span class="ident" id="5064326">encInt32Slice</span><span class="op" id="5064339">(</span><span class="ident" id="5064340">state</span>&nbsp;<span class="op" id="5064346">*</span><span class="ident" id="5064347">encoderState</span><span class="op" id="5064359">,</span>&nbsp;<span class="ident" id="5064361">v</span>&nbsp;<span class="ident" id="5064363">reflect</span><span class="op" id="5064370">.</span><span class="ident" id="5064371">Value</span><span class="op" id="5064376">)</span>&nbsp;<span class="builtintype" id="5064378">bool</span>&nbsp;<span class="op" id="5064383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5064386">slice</span><span class="op" id="5064391">,</span>&nbsp;<span class="ident" id="5064393">ok</span>&nbsp;<span class="op" id="5064396">:=</span>&nbsp;<span class="ident" id="5064399">v</span><span class="op" id="5064400">.</span><span class="ident" id="5064401">Interface</span><span class="op" id="5064410">(</span><span class="op" id="5064411">)</span><span class="op" id="5064412">.</span><span class="op" id="5064413">(</span><span class="op" id="5064414">[</span><span class="op" id="5064415">]</span><span class="builtintype" id="5064416">int32</span><span class="op" id="5064421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5064424">if</span>&nbsp;<span class="op" id="5064427">!</span><span class="ident" id="5064428">ok</span>&nbsp;<span class="op" id="5064431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5064435">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int32&nbsp;but&nbsp;not&nbsp;type&nbsp;int32.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5064512">return</span>&nbsp;<span class="builtintype" id="5064519">false</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5064526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5064529">for</span>&nbsp;<span class="ident" id="5064533">_</span><span class="op" id="5064534">,</span>&nbsp;<span class="ident" id="5064536">x</span>&nbsp;<span class="op" id="5064538">:=</span>&nbsp;<span class="keyword" id="5064541">range</span>&nbsp;<span class="ident" id="5064547">slice</span>&nbsp;<span class="op" id="5064553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5064557">if</span>&nbsp;<span class="ident" id="5064560">x</span>&nbsp;<span class="op" id="5064562">!=</span>&nbsp;<span class="num" id="5064565">0</span>&nbsp;<span class="op" id="5064567">||</span>&nbsp;<span class="ident" id="5064570">state</span><span class="op" id="5064575">.</span><span class="ident" id="5064576">sendZero</span>&nbsp;<span class="op" id="5064585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5064590">state</span><span class="op" id="5064595">.</span><span class="ident" id="5064596">encodeInt</span><span class="op" id="5064605">(</span><span class="ident" id="5064606">int64</span><span class="op" id="5064611">(</span><span class="ident" id="5064612">x</span><span class="op" id="5064613">)</span><span class="op" id="5064614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5064618">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5064621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5064624">return</span>&nbsp;<span class="builtintype" id="5064631">true</span><br>
<span class="lineno"></span><span class="op" id="5064636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5064639">func</span>&nbsp;<span class="ident" id="5064644">encInt64Array</span><span class="op" id="5064657">(</span><span class="ident" id="5064658">state</span>&nbsp;<span class="op" id="5064664">*</span><span class="ident" id="5064665">encoderState</span><span class="op" id="5064677">,</span>&nbsp;<span class="ident" id="5064679">v</span>&nbsp;<span class="ident" id="5064681">reflect</span><span class="op" id="5064688">.</span><span class="ident" id="5064689">Value</span><span class="op" id="5064694">)</span>&nbsp;<span class="builtintype" id="5064696">bool</span>&nbsp;<span class="op" id="5064701">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5064704">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5064745">if</span>&nbsp;<span class="op" id="5064748">!</span><span class="ident" id="5064749">v</span><span class="op" id="5064750">.</span><span class="ident" id="5064751">CanAddr</span><span class="op" id="5064758">(</span><span class="op" id="5064759">)</span>&nbsp;<span class="op" id="5064761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5064765">return</span>&nbsp;<span class="builtintype" id="5064772">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5064779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5064782">return</span>&nbsp;<span class="ident" id="5064789">encInt64Slice</span><span class="op" id="5064802">(</span><span class="ident" id="5064803">state</span><span class="op" id="5064808">,</span>&nbsp;<span class="ident" id="5064810">v</span><span class="op" id="5064811">.</span><span class="ident" id="5064812">Slice</span><span class="op" id="5064817">(</span><span class="num" id="5064818">0</span><span class="op" id="5064819">,</span>&nbsp;<span class="ident" id="5064821">v</span><span class="op" id="5064822">.</span><span class="ident" id="5064823">Len</span><span class="op" id="5064826">(</span><span class="op" id="5064827">)</span><span class="op" id="5064828">)</span><span class="op" id="5064829">)</span><br>
<span class="lineno">245</span><span class="op" id="5064831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5064834">func</span>&nbsp;<span class="ident" id="5064839">encInt64Slice</span><span class="op" id="5064852">(</span><span class="ident" id="5064853">state</span>&nbsp;<span class="op" id="5064859">*</span><span class="ident" id="5064860">encoderState</span><span class="op" id="5064872">,</span>&nbsp;<span class="ident" id="5064874">v</span>&nbsp;<span class="ident" id="5064876">reflect</span><span class="op" id="5064883">.</span><span class="ident" id="5064884">Value</span><span class="op" id="5064889">)</span>&nbsp;<span class="builtintype" id="5064891">bool</span>&nbsp;<span class="op" id="5064896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5064899">slice</span><span class="op" id="5064904">,</span>&nbsp;<span class="ident" id="5064906">ok</span>&nbsp;<span class="op" id="5064909">:=</span>&nbsp;<span class="ident" id="5064912">v</span><span class="op" id="5064913">.</span><span class="ident" id="5064914">Interface</span><span class="op" id="5064923">(</span><span class="op" id="5064924">)</span><span class="op" id="5064925">.</span><span class="op" id="5064926">(</span><span class="op" id="5064927">[</span><span class="op" id="5064928">]</span><span class="ident" id="5064929">int64</span><span class="op" id="5064934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5064937">if</span>&nbsp;<span class="op" id="5064940">!</span><span class="ident" id="5064941">ok</span>&nbsp;<span class="op" id="5064944">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5064948">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int64&nbsp;but&nbsp;not&nbsp;type&nbsp;int64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065025">return</span>&nbsp;<span class="builtintype" id="5065032">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5065039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065042">for</span>&nbsp;<span class="ident" id="5065046">_</span><span class="op" id="5065047">,</span>&nbsp;<span class="ident" id="5065049">x</span>&nbsp;<span class="op" id="5065051">:=</span>&nbsp;<span class="keyword" id="5065054">range</span>&nbsp;<span class="ident" id="5065060">slice</span>&nbsp;<span class="op" id="5065066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065070">if</span>&nbsp;<span class="ident" id="5065073">x</span>&nbsp;<span class="op" id="5065075">!=</span>&nbsp;<span class="num" id="5065078">0</span>&nbsp;<span class="op" id="5065080">||</span>&nbsp;<span class="ident" id="5065083">state</span><span class="op" id="5065088">.</span><span class="ident" id="5065089">sendZero</span>&nbsp;<span class="op" id="5065098">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5065103">state</span><span class="op" id="5065108">.</span><span class="ident" id="5065109">encodeInt</span><span class="op" id="5065118">(</span><span class="ident" id="5065119">x</span><span class="op" id="5065120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5065124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5065127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065130">return</span>&nbsp;<span class="builtintype" id="5065137">true</span><br>
<span class="lineno"></span><span class="op" id="5065142">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="5065145">func</span>&nbsp;<span class="ident" id="5065150">encInt8Array</span><span class="op" id="5065162">(</span><span class="ident" id="5065163">state</span>&nbsp;<span class="op" id="5065169">*</span><span class="ident" id="5065170">encoderState</span><span class="op" id="5065182">,</span>&nbsp;<span class="ident" id="5065184">v</span>&nbsp;<span class="ident" id="5065186">reflect</span><span class="op" id="5065193">.</span><span class="ident" id="5065194">Value</span><span class="op" id="5065199">)</span>&nbsp;<span class="builtintype" id="5065201">bool</span>&nbsp;<span class="op" id="5065206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5065209">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065250">if</span>&nbsp;<span class="op" id="5065253">!</span><span class="ident" id="5065254">v</span><span class="op" id="5065255">.</span><span class="ident" id="5065256">CanAddr</span><span class="op" id="5065263">(</span><span class="op" id="5065264">)</span>&nbsp;<span class="op" id="5065266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065270">return</span>&nbsp;<span class="builtintype" id="5065277">false</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5065284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065287">return</span>&nbsp;<span class="ident" id="5065294">encInt8Slice</span><span class="op" id="5065306">(</span><span class="ident" id="5065307">state</span><span class="op" id="5065312">,</span>&nbsp;<span class="ident" id="5065314">v</span><span class="op" id="5065315">.</span><span class="ident" id="5065316">Slice</span><span class="op" id="5065321">(</span><span class="num" id="5065322">0</span><span class="op" id="5065323">,</span>&nbsp;<span class="ident" id="5065325">v</span><span class="op" id="5065326">.</span><span class="ident" id="5065327">Len</span><span class="op" id="5065330">(</span><span class="op" id="5065331">)</span><span class="op" id="5065332">)</span><span class="op" id="5065333">)</span><br>
<span class="lineno"></span><span class="op" id="5065335">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5065338">func</span>&nbsp;<span class="ident" id="5065343">encInt8Slice</span><span class="op" id="5065355">(</span><span class="ident" id="5065356">state</span>&nbsp;<span class="op" id="5065362">*</span><span class="ident" id="5065363">encoderState</span><span class="op" id="5065375">,</span>&nbsp;<span class="ident" id="5065377">v</span>&nbsp;<span class="ident" id="5065379">reflect</span><span class="op" id="5065386">.</span><span class="ident" id="5065387">Value</span><span class="op" id="5065392">)</span>&nbsp;<span class="builtintype" id="5065394">bool</span>&nbsp;<span class="op" id="5065399">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5065402">slice</span><span class="op" id="5065407">,</span>&nbsp;<span class="ident" id="5065409">ok</span>&nbsp;<span class="op" id="5065412">:=</span>&nbsp;<span class="ident" id="5065415">v</span><span class="op" id="5065416">.</span><span class="ident" id="5065417">Interface</span><span class="op" id="5065426">(</span><span class="op" id="5065427">)</span><span class="op" id="5065428">.</span><span class="op" id="5065429">(</span><span class="op" id="5065430">[</span><span class="op" id="5065431">]</span><span class="builtintype" id="5065432">int8</span><span class="op" id="5065436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065439">if</span>&nbsp;<span class="op" id="5065442">!</span><span class="ident" id="5065443">ok</span>&nbsp;<span class="op" id="5065446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5065450">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int8&nbsp;but&nbsp;not&nbsp;type&nbsp;int8.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065525">return</span>&nbsp;<span class="builtintype" id="5065532">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5065539">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065542">for</span>&nbsp;<span class="ident" id="5065546">_</span><span class="op" id="5065547">,</span>&nbsp;<span class="ident" id="5065549">x</span>&nbsp;<span class="op" id="5065551">:=</span>&nbsp;<span class="keyword" id="5065554">range</span>&nbsp;<span class="ident" id="5065560">slice</span>&nbsp;<span class="op" id="5065566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065570">if</span>&nbsp;<span class="ident" id="5065573">x</span>&nbsp;<span class="op" id="5065575">!=</span>&nbsp;<span class="num" id="5065578">0</span>&nbsp;<span class="op" id="5065580">||</span>&nbsp;<span class="ident" id="5065583">state</span><span class="op" id="5065588">.</span><span class="ident" id="5065589">sendZero</span>&nbsp;<span class="op" id="5065598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5065603">state</span><span class="op" id="5065608">.</span><span class="ident" id="5065609">encodeInt</span><span class="op" id="5065618">(</span><span class="ident" id="5065619">int64</span><span class="op" id="5065624">(</span><span class="ident" id="5065625">x</span><span class="op" id="5065626">)</span><span class="op" id="5065627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5065631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5065634">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065637">return</span>&nbsp;<span class="builtintype" id="5065644">true</span><br>
<span class="lineno"></span><span class="op" id="5065649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5065652">func</span>&nbsp;<span class="ident" id="5065657">encStringArray</span><span class="op" id="5065671">(</span><span class="ident" id="5065672">state</span>&nbsp;<span class="op" id="5065678">*</span><span class="ident" id="5065679">encoderState</span><span class="op" id="5065691">,</span>&nbsp;<span class="ident" id="5065693">v</span>&nbsp;<span class="ident" id="5065695">reflect</span><span class="op" id="5065702">.</span><span class="ident" id="5065703">Value</span><span class="op" id="5065708">)</span>&nbsp;<span class="builtintype" id="5065710">bool</span>&nbsp;<span class="op" id="5065715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5065718">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065759">if</span>&nbsp;<span class="op" id="5065762">!</span><span class="ident" id="5065763">v</span><span class="op" id="5065764">.</span><span class="ident" id="5065765">CanAddr</span><span class="op" id="5065772">(</span><span class="op" id="5065773">)</span>&nbsp;<span class="op" id="5065775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065779">return</span>&nbsp;<span class="builtintype" id="5065786">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5065793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065796">return</span>&nbsp;<span class="ident" id="5065803">encStringSlice</span><span class="op" id="5065817">(</span><span class="ident" id="5065818">state</span><span class="op" id="5065823">,</span>&nbsp;<span class="ident" id="5065825">v</span><span class="op" id="5065826">.</span><span class="ident" id="5065827">Slice</span><span class="op" id="5065832">(</span><span class="num" id="5065833">0</span><span class="op" id="5065834">,</span>&nbsp;<span class="ident" id="5065836">v</span><span class="op" id="5065837">.</span><span class="ident" id="5065838">Len</span><span class="op" id="5065841">(</span><span class="op" id="5065842">)</span><span class="op" id="5065843">)</span><span class="op" id="5065844">)</span><br>
<span class="lineno"></span><span class="op" id="5065846">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="5065849">func</span>&nbsp;<span class="ident" id="5065854">encStringSlice</span><span class="op" id="5065868">(</span><span class="ident" id="5065869">state</span>&nbsp;<span class="op" id="5065875">*</span><span class="ident" id="5065876">encoderState</span><span class="op" id="5065888">,</span>&nbsp;<span class="ident" id="5065890">v</span>&nbsp;<span class="ident" id="5065892">reflect</span><span class="op" id="5065899">.</span><span class="ident" id="5065900">Value</span><span class="op" id="5065905">)</span>&nbsp;<span class="builtintype" id="5065907">bool</span>&nbsp;<span class="op" id="5065912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5065915">slice</span><span class="op" id="5065920">,</span>&nbsp;<span class="ident" id="5065922">ok</span>&nbsp;<span class="op" id="5065925">:=</span>&nbsp;<span class="ident" id="5065928">v</span><span class="op" id="5065929">.</span><span class="ident" id="5065930">Interface</span><span class="op" id="5065939">(</span><span class="op" id="5065940">)</span><span class="op" id="5065941">.</span><span class="op" id="5065942">(</span><span class="op" id="5065943">[</span><span class="op" id="5065944">]</span><span class="builtintype" id="5065945">string</span><span class="op" id="5065951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065954">if</span>&nbsp;<span class="op" id="5065957">!</span><span class="ident" id="5065958">ok</span>&nbsp;<span class="op" id="5065961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5065965">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;string&nbsp;but&nbsp;not&nbsp;type&nbsp;string.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066044">return</span>&nbsp;<span class="builtintype" id="5066051">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5066058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066061">for</span>&nbsp;<span class="ident" id="5066065">_</span><span class="op" id="5066066">,</span>&nbsp;<span class="ident" id="5066068">x</span>&nbsp;<span class="op" id="5066070">:=</span>&nbsp;<span class="keyword" id="5066073">range</span>&nbsp;<span class="ident" id="5066079">slice</span>&nbsp;<span class="op" id="5066085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066089">if</span>&nbsp;<span class="ident" id="5066092">x</span>&nbsp;<span class="op" id="5066094">!=</span>&nbsp;<span class="string" id="5066097">&#34;&#34;</span>&nbsp;<span class="op" id="5066100">||</span>&nbsp;<span class="ident" id="5066103">state</span><span class="op" id="5066108">.</span><span class="ident" id="5066109">sendZero</span>&nbsp;<span class="op" id="5066118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5066123">state</span><span class="op" id="5066128">.</span><span class="ident" id="5066129">encodeUint</span><span class="op" id="5066139">(</span><span class="ident" id="5066140">uint64</span><span class="op" id="5066146">(</span><span class="builtinfunc" id="5066147">len</span><span class="op" id="5066150">(</span><span class="ident" id="5066151">x</span><span class="op" id="5066152">)</span><span class="op" id="5066153">)</span><span class="op" id="5066154">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5066159">state</span><span class="op" id="5066164">.</span><span class="ident" id="5066165">b</span><span class="op" id="5066166">.</span><span class="ident" id="5066167">WriteString</span><span class="op" id="5066178">(</span><span class="ident" id="5066179">x</span><span class="op" id="5066180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5066184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5066187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066190">return</span>&nbsp;<span class="builtintype" id="5066197">true</span><br>
<span class="lineno"></span><span class="op" id="5066202">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span><span class="keyword" id="5066205">func</span>&nbsp;<span class="ident" id="5066210">encUintArray</span><span class="op" id="5066222">(</span><span class="ident" id="5066223">state</span>&nbsp;<span class="op" id="5066229">*</span><span class="ident" id="5066230">encoderState</span><span class="op" id="5066242">,</span>&nbsp;<span class="ident" id="5066244">v</span>&nbsp;<span class="ident" id="5066246">reflect</span><span class="op" id="5066253">.</span><span class="ident" id="5066254">Value</span><span class="op" id="5066259">)</span>&nbsp;<span class="builtintype" id="5066261">bool</span>&nbsp;<span class="op" id="5066266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5066269">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066310">if</span>&nbsp;<span class="op" id="5066313">!</span><span class="ident" id="5066314">v</span><span class="op" id="5066315">.</span><span class="ident" id="5066316">CanAddr</span><span class="op" id="5066323">(</span><span class="op" id="5066324">)</span>&nbsp;<span class="op" id="5066326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066330">return</span>&nbsp;<span class="builtintype" id="5066337">false</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5066344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066347">return</span>&nbsp;<span class="ident" id="5066354">encUintSlice</span><span class="op" id="5066366">(</span><span class="ident" id="5066367">state</span><span class="op" id="5066372">,</span>&nbsp;<span class="ident" id="5066374">v</span><span class="op" id="5066375">.</span><span class="ident" id="5066376">Slice</span><span class="op" id="5066381">(</span><span class="num" id="5066382">0</span><span class="op" id="5066383">,</span>&nbsp;<span class="ident" id="5066385">v</span><span class="op" id="5066386">.</span><span class="ident" id="5066387">Len</span><span class="op" id="5066390">(</span><span class="op" id="5066391">)</span><span class="op" id="5066392">)</span><span class="op" id="5066393">)</span><br>
<span class="lineno"></span><span class="op" id="5066395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5066398">func</span>&nbsp;<span class="ident" id="5066403">encUintSlice</span><span class="op" id="5066415">(</span><span class="ident" id="5066416">state</span>&nbsp;<span class="op" id="5066422">*</span><span class="ident" id="5066423">encoderState</span><span class="op" id="5066435">,</span>&nbsp;<span class="ident" id="5066437">v</span>&nbsp;<span class="ident" id="5066439">reflect</span><span class="op" id="5066446">.</span><span class="ident" id="5066447">Value</span><span class="op" id="5066452">)</span>&nbsp;<span class="builtintype" id="5066454">bool</span>&nbsp;<span class="op" id="5066459">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5066462">slice</span><span class="op" id="5066467">,</span>&nbsp;<span class="ident" id="5066469">ok</span>&nbsp;<span class="op" id="5066472">:=</span>&nbsp;<span class="ident" id="5066475">v</span><span class="op" id="5066476">.</span><span class="ident" id="5066477">Interface</span><span class="op" id="5066486">(</span><span class="op" id="5066487">)</span><span class="op" id="5066488">.</span><span class="op" id="5066489">(</span><span class="op" id="5066490">[</span><span class="op" id="5066491">]</span><span class="builtintype" id="5066492">uint</span><span class="op" id="5066496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066499">if</span>&nbsp;<span class="op" id="5066502">!</span><span class="ident" id="5066503">ok</span>&nbsp;<span class="op" id="5066506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5066510">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint&nbsp;but&nbsp;not&nbsp;type&nbsp;uint.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066585">return</span>&nbsp;<span class="builtintype" id="5066592">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5066599">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066602">for</span>&nbsp;<span class="ident" id="5066606">_</span><span class="op" id="5066607">,</span>&nbsp;<span class="ident" id="5066609">x</span>&nbsp;<span class="op" id="5066611">:=</span>&nbsp;<span class="keyword" id="5066614">range</span>&nbsp;<span class="ident" id="5066620">slice</span>&nbsp;<span class="op" id="5066626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066630">if</span>&nbsp;<span class="ident" id="5066633">x</span>&nbsp;<span class="op" id="5066635">!=</span>&nbsp;<span class="num" id="5066638">0</span>&nbsp;<span class="op" id="5066640">||</span>&nbsp;<span class="ident" id="5066643">state</span><span class="op" id="5066648">.</span><span class="ident" id="5066649">sendZero</span>&nbsp;<span class="op" id="5066658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5066663">state</span><span class="op" id="5066668">.</span><span class="ident" id="5066669">encodeUint</span><span class="op" id="5066679">(</span><span class="ident" id="5066680">uint64</span><span class="op" id="5066686">(</span><span class="ident" id="5066687">x</span><span class="op" id="5066688">)</span><span class="op" id="5066689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5066693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5066696">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066699">return</span>&nbsp;<span class="builtintype" id="5066706">true</span><br>
<span class="lineno"></span><span class="op" id="5066711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5066714">func</span>&nbsp;<span class="ident" id="5066719">encUint16Array</span><span class="op" id="5066733">(</span><span class="ident" id="5066734">state</span>&nbsp;<span class="op" id="5066740">*</span><span class="ident" id="5066741">encoderState</span><span class="op" id="5066753">,</span>&nbsp;<span class="ident" id="5066755">v</span>&nbsp;<span class="ident" id="5066757">reflect</span><span class="op" id="5066764">.</span><span class="ident" id="5066765">Value</span><span class="op" id="5066770">)</span>&nbsp;<span class="builtintype" id="5066772">bool</span>&nbsp;<span class="op" id="5066777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5066780">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066821">if</span>&nbsp;<span class="op" id="5066824">!</span><span class="ident" id="5066825">v</span><span class="op" id="5066826">.</span><span class="ident" id="5066827">CanAddr</span><span class="op" id="5066834">(</span><span class="op" id="5066835">)</span>&nbsp;<span class="op" id="5066837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066841">return</span>&nbsp;<span class="builtintype" id="5066848">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5066855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066858">return</span>&nbsp;<span class="ident" id="5066865">encUint16Slice</span><span class="op" id="5066879">(</span><span class="ident" id="5066880">state</span><span class="op" id="5066885">,</span>&nbsp;<span class="ident" id="5066887">v</span><span class="op" id="5066888">.</span><span class="ident" id="5066889">Slice</span><span class="op" id="5066894">(</span><span class="num" id="5066895">0</span><span class="op" id="5066896">,</span>&nbsp;<span class="ident" id="5066898">v</span><span class="op" id="5066899">.</span><span class="ident" id="5066900">Len</span><span class="op" id="5066903">(</span><span class="op" id="5066904">)</span><span class="op" id="5066905">)</span><span class="op" id="5066906">)</span><br>
<span class="lineno"></span><span class="op" id="5066908">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="keyword" id="5066911">func</span>&nbsp;<span class="ident" id="5066916">encUint16Slice</span><span class="op" id="5066930">(</span><span class="ident" id="5066931">state</span>&nbsp;<span class="op" id="5066937">*</span><span class="ident" id="5066938">encoderState</span><span class="op" id="5066950">,</span>&nbsp;<span class="ident" id="5066952">v</span>&nbsp;<span class="ident" id="5066954">reflect</span><span class="op" id="5066961">.</span><span class="ident" id="5066962">Value</span><span class="op" id="5066967">)</span>&nbsp;<span class="builtintype" id="5066969">bool</span>&nbsp;<span class="op" id="5066974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5066977">slice</span><span class="op" id="5066982">,</span>&nbsp;<span class="ident" id="5066984">ok</span>&nbsp;<span class="op" id="5066987">:=</span>&nbsp;<span class="ident" id="5066990">v</span><span class="op" id="5066991">.</span><span class="ident" id="5066992">Interface</span><span class="op" id="5067001">(</span><span class="op" id="5067002">)</span><span class="op" id="5067003">.</span><span class="op" id="5067004">(</span><span class="op" id="5067005">[</span><span class="op" id="5067006">]</span><span class="builtintype" id="5067007">uint16</span><span class="op" id="5067013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067016">if</span>&nbsp;<span class="op" id="5067019">!</span><span class="ident" id="5067020">ok</span>&nbsp;<span class="op" id="5067023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5067027">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint16&nbsp;but&nbsp;not&nbsp;type&nbsp;uint16.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067106">return</span>&nbsp;<span class="builtintype" id="5067113">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5067120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067123">for</span>&nbsp;<span class="ident" id="5067127">_</span><span class="op" id="5067128">,</span>&nbsp;<span class="ident" id="5067130">x</span>&nbsp;<span class="op" id="5067132">:=</span>&nbsp;<span class="keyword" id="5067135">range</span>&nbsp;<span class="ident" id="5067141">slice</span>&nbsp;<span class="op" id="5067147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067151">if</span>&nbsp;<span class="ident" id="5067154">x</span>&nbsp;<span class="op" id="5067156">!=</span>&nbsp;<span class="num" id="5067159">0</span>&nbsp;<span class="op" id="5067161">||</span>&nbsp;<span class="ident" id="5067164">state</span><span class="op" id="5067169">.</span><span class="ident" id="5067170">sendZero</span>&nbsp;<span class="op" id="5067179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5067184">state</span><span class="op" id="5067189">.</span><span class="ident" id="5067190">encodeUint</span><span class="op" id="5067200">(</span><span class="ident" id="5067201">uint64</span><span class="op" id="5067207">(</span><span class="ident" id="5067208">x</span><span class="op" id="5067209">)</span><span class="op" id="5067210">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5067214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5067217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067220">return</span>&nbsp;<span class="builtintype" id="5067227">true</span><br>
<span class="lineno"></span><span class="op" id="5067232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span><span class="keyword" id="5067235">func</span>&nbsp;<span class="ident" id="5067240">encUint32Array</span><span class="op" id="5067254">(</span><span class="ident" id="5067255">state</span>&nbsp;<span class="op" id="5067261">*</span><span class="ident" id="5067262">encoderState</span><span class="op" id="5067274">,</span>&nbsp;<span class="ident" id="5067276">v</span>&nbsp;<span class="ident" id="5067278">reflect</span><span class="op" id="5067285">.</span><span class="ident" id="5067286">Value</span><span class="op" id="5067291">)</span>&nbsp;<span class="builtintype" id="5067293">bool</span>&nbsp;<span class="op" id="5067298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5067301">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067342">if</span>&nbsp;<span class="op" id="5067345">!</span><span class="ident" id="5067346">v</span><span class="op" id="5067347">.</span><span class="ident" id="5067348">CanAddr</span><span class="op" id="5067355">(</span><span class="op" id="5067356">)</span>&nbsp;<span class="op" id="5067358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067362">return</span>&nbsp;<span class="builtintype" id="5067369">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5067376">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067379">return</span>&nbsp;<span class="ident" id="5067386">encUint32Slice</span><span class="op" id="5067400">(</span><span class="ident" id="5067401">state</span><span class="op" id="5067406">,</span>&nbsp;<span class="ident" id="5067408">v</span><span class="op" id="5067409">.</span><span class="ident" id="5067410">Slice</span><span class="op" id="5067415">(</span><span class="num" id="5067416">0</span><span class="op" id="5067417">,</span>&nbsp;<span class="ident" id="5067419">v</span><span class="op" id="5067420">.</span><span class="ident" id="5067421">Len</span><span class="op" id="5067424">(</span><span class="op" id="5067425">)</span><span class="op" id="5067426">)</span><span class="op" id="5067427">)</span><br>
<span class="lineno"></span><span class="op" id="5067429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5067432">func</span>&nbsp;<span class="ident" id="5067437">encUint32Slice</span><span class="op" id="5067451">(</span><span class="ident" id="5067452">state</span>&nbsp;<span class="op" id="5067458">*</span><span class="ident" id="5067459">encoderState</span><span class="op" id="5067471">,</span>&nbsp;<span class="ident" id="5067473">v</span>&nbsp;<span class="ident" id="5067475">reflect</span><span class="op" id="5067482">.</span><span class="ident" id="5067483">Value</span><span class="op" id="5067488">)</span>&nbsp;<span class="builtintype" id="5067490">bool</span>&nbsp;<span class="op" id="5067495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5067498">slice</span><span class="op" id="5067503">,</span>&nbsp;<span class="ident" id="5067505">ok</span>&nbsp;<span class="op" id="5067508">:=</span>&nbsp;<span class="ident" id="5067511">v</span><span class="op" id="5067512">.</span><span class="ident" id="5067513">Interface</span><span class="op" id="5067522">(</span><span class="op" id="5067523">)</span><span class="op" id="5067524">.</span><span class="op" id="5067525">(</span><span class="op" id="5067526">[</span><span class="op" id="5067527">]</span><span class="builtintype" id="5067528">uint32</span><span class="op" id="5067534">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067537">if</span>&nbsp;<span class="op" id="5067540">!</span><span class="ident" id="5067541">ok</span>&nbsp;<span class="op" id="5067544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5067548">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint32&nbsp;but&nbsp;not&nbsp;type&nbsp;uint32.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067627">return</span>&nbsp;<span class="builtintype" id="5067634">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5067641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067644">for</span>&nbsp;<span class="ident" id="5067648">_</span><span class="op" id="5067649">,</span>&nbsp;<span class="ident" id="5067651">x</span>&nbsp;<span class="op" id="5067653">:=</span>&nbsp;<span class="keyword" id="5067656">range</span>&nbsp;<span class="ident" id="5067662">slice</span>&nbsp;<span class="op" id="5067668">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067672">if</span>&nbsp;<span class="ident" id="5067675">x</span>&nbsp;<span class="op" id="5067677">!=</span>&nbsp;<span class="num" id="5067680">0</span>&nbsp;<span class="op" id="5067682">||</span>&nbsp;<span class="ident" id="5067685">state</span><span class="op" id="5067690">.</span><span class="ident" id="5067691">sendZero</span>&nbsp;<span class="op" id="5067700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5067705">state</span><span class="op" id="5067710">.</span><span class="ident" id="5067711">encodeUint</span><span class="op" id="5067721">(</span><span class="ident" id="5067722">uint64</span><span class="op" id="5067728">(</span><span class="ident" id="5067729">x</span><span class="op" id="5067730">)</span><span class="op" id="5067731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5067735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5067738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067741">return</span>&nbsp;<span class="builtintype" id="5067748">true</span><br>
<span class="lineno">370</span><span class="op" id="5067753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5067756">func</span>&nbsp;<span class="ident" id="5067761">encUint64Array</span><span class="op" id="5067775">(</span><span class="ident" id="5067776">state</span>&nbsp;<span class="op" id="5067782">*</span><span class="ident" id="5067783">encoderState</span><span class="op" id="5067795">,</span>&nbsp;<span class="ident" id="5067797">v</span>&nbsp;<span class="ident" id="5067799">reflect</span><span class="op" id="5067806">.</span><span class="ident" id="5067807">Value</span><span class="op" id="5067812">)</span>&nbsp;<span class="builtintype" id="5067814">bool</span>&nbsp;<span class="op" id="5067819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5067822">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067863">if</span>&nbsp;<span class="op" id="5067866">!</span><span class="ident" id="5067867">v</span><span class="op" id="5067868">.</span><span class="ident" id="5067869">CanAddr</span><span class="op" id="5067876">(</span><span class="op" id="5067877">)</span>&nbsp;<span class="op" id="5067879">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067883">return</span>&nbsp;<span class="builtintype" id="5067890">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5067897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067900">return</span>&nbsp;<span class="ident" id="5067907">encUint64Slice</span><span class="op" id="5067921">(</span><span class="ident" id="5067922">state</span><span class="op" id="5067927">,</span>&nbsp;<span class="ident" id="5067929">v</span><span class="op" id="5067930">.</span><span class="ident" id="5067931">Slice</span><span class="op" id="5067936">(</span><span class="num" id="5067937">0</span><span class="op" id="5067938">,</span>&nbsp;<span class="ident" id="5067940">v</span><span class="op" id="5067941">.</span><span class="ident" id="5067942">Len</span><span class="op" id="5067945">(</span><span class="op" id="5067946">)</span><span class="op" id="5067947">)</span><span class="op" id="5067948">)</span><br>
<span class="lineno"></span><span class="op" id="5067950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="keyword" id="5067953">func</span>&nbsp;<span class="ident" id="5067958">encUint64Slice</span><span class="op" id="5067972">(</span><span class="ident" id="5067973">state</span>&nbsp;<span class="op" id="5067979">*</span><span class="ident" id="5067980">encoderState</span><span class="op" id="5067992">,</span>&nbsp;<span class="ident" id="5067994">v</span>&nbsp;<span class="ident" id="5067996">reflect</span><span class="op" id="5068003">.</span><span class="ident" id="5068004">Value</span><span class="op" id="5068009">)</span>&nbsp;<span class="builtintype" id="5068011">bool</span>&nbsp;<span class="op" id="5068016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5068019">slice</span><span class="op" id="5068024">,</span>&nbsp;<span class="ident" id="5068026">ok</span>&nbsp;<span class="op" id="5068029">:=</span>&nbsp;<span class="ident" id="5068032">v</span><span class="op" id="5068033">.</span><span class="ident" id="5068034">Interface</span><span class="op" id="5068043">(</span><span class="op" id="5068044">)</span><span class="op" id="5068045">.</span><span class="op" id="5068046">(</span><span class="op" id="5068047">[</span><span class="op" id="5068048">]</span><span class="ident" id="5068049">uint64</span><span class="op" id="5068055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5068058">if</span>&nbsp;<span class="op" id="5068061">!</span><span class="ident" id="5068062">ok</span>&nbsp;<span class="op" id="5068065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5068069">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint64&nbsp;but&nbsp;not&nbsp;type&nbsp;uint64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5068148">return</span>&nbsp;<span class="builtintype" id="5068155">false</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5068162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5068165">for</span>&nbsp;<span class="ident" id="5068169">_</span><span class="op" id="5068170">,</span>&nbsp;<span class="ident" id="5068172">x</span>&nbsp;<span class="op" id="5068174">:=</span>&nbsp;<span class="keyword" id="5068177">range</span>&nbsp;<span class="ident" id="5068183">slice</span>&nbsp;<span class="op" id="5068189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5068193">if</span>&nbsp;<span class="ident" id="5068196">x</span>&nbsp;<span class="op" id="5068198">!=</span>&nbsp;<span class="num" id="5068201">0</span>&nbsp;<span class="op" id="5068203">||</span>&nbsp;<span class="ident" id="5068206">state</span><span class="op" id="5068211">.</span><span class="ident" id="5068212">sendZero</span>&nbsp;<span class="op" id="5068221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5068226">state</span><span class="op" id="5068231">.</span><span class="ident" id="5068232">encodeUint</span><span class="op" id="5068242">(</span><span class="ident" id="5068243">x</span><span class="op" id="5068244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5068248">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5068251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5068254">return</span>&nbsp;<span class="builtintype" id="5068261">true</span><br>
<span class="lineno"></span><span class="op" id="5068266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5068269">func</span>&nbsp;<span class="ident" id="5068274">encUintptrArray</span><span class="op" id="5068289">(</span><span class="ident" id="5068290">state</span>&nbsp;<span class="op" id="5068296">*</span><span class="ident" id="5068297">encoderState</span><span class="op" id="5068309">,</span>&nbsp;<span class="ident" id="5068311">v</span>&nbsp;<span class="ident" id="5068313">reflect</span><span class="op" id="5068320">.</span><span class="ident" id="5068321">Value</span><span class="op" id="5068326">)</span>&nbsp;<span class="builtintype" id="5068328">bool</span>&nbsp;<span class="op" id="5068333">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5068336">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5068377">if</span>&nbsp;<span class="op" id="5068380">!</span><span class="ident" id="5068381">v</span><span class="op" id="5068382">.</span><span class="ident" id="5068383">CanAddr</span><span class="op" id="5068390">(</span><span class="op" id="5068391">)</span>&nbsp;<span class="op" id="5068393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5068397">return</span>&nbsp;<span class="builtintype" id="5068404">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5068411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5068414">return</span>&nbsp;<span class="ident" id="5068421">encUintptrSlice</span><span class="op" id="5068436">(</span><span class="ident" id="5068437">state</span><span class="op" id="5068442">,</span>&nbsp;<span class="ident" id="5068444">v</span><span class="op" id="5068445">.</span><span class="ident" id="5068446">Slice</span><span class="op" id="5068451">(</span><span class="num" id="5068452">0</span><span class="op" id="5068453">,</span>&nbsp;<span class="ident" id="5068455">v</span><span class="op" id="5068456">.</span><span class="ident" id="5068457">Len</span><span class="op" id="5068460">(</span><span class="op" id="5068461">)</span><span class="op" id="5068462">)</span><span class="op" id="5068463">)</span><br>
<span class="lineno">400</span><span class="op" id="5068465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5068468">func</span>&nbsp;<span class="ident" id="5068473">encUintptrSlice</span><span class="op" id="5068488">(</span><span class="ident" id="5068489">state</span>&nbsp;<span class="op" id="5068495">*</span><span class="ident" id="5068496">encoderState</span><span class="op" id="5068508">,</span>&nbsp;<span class="ident" id="5068510">v</span>&nbsp;<span class="ident" id="5068512">reflect</span><span class="op" id="5068519">.</span><span class="ident" id="5068520">Value</span><span class="op" id="5068525">)</span>&nbsp;<span class="builtintype" id="5068527">bool</span>&nbsp;<span class="op" id="5068532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5068535">slice</span><span class="op" id="5068540">,</span>&nbsp;<span class="ident" id="5068542">ok</span>&nbsp;<span class="op" id="5068545">:=</span>&nbsp;<span class="ident" id="5068548">v</span><span class="op" id="5068549">.</span><span class="ident" id="5068550">Interface</span><span class="op" id="5068559">(</span><span class="op" id="5068560">)</span><span class="op" id="5068561">.</span><span class="op" id="5068562">(</span><span class="op" id="5068563">[</span><span class="op" id="5068564">]</span><span class="builtintype" id="5068565">uintptr</span><span class="op" id="5068572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5068575">if</span>&nbsp;<span class="op" id="5068578">!</span><span class="ident" id="5068579">ok</span>&nbsp;<span class="op" id="5068582">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5068586">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uintptr&nbsp;but&nbsp;not&nbsp;type&nbsp;uintptr.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5068667">return</span>&nbsp;<span class="builtintype" id="5068674">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5068681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5068684">for</span>&nbsp;<span class="ident" id="5068688">_</span><span class="op" id="5068689">,</span>&nbsp;<span class="ident" id="5068691">x</span>&nbsp;<span class="op" id="5068693">:=</span>&nbsp;<span class="keyword" id="5068696">range</span>&nbsp;<span class="ident" id="5068702">slice</span>&nbsp;<span class="op" id="5068708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5068712">if</span>&nbsp;<span class="ident" id="5068715">x</span>&nbsp;<span class="op" id="5068717">!=</span>&nbsp;<span class="num" id="5068720">0</span>&nbsp;<span class="op" id="5068722">||</span>&nbsp;<span class="ident" id="5068725">state</span><span class="op" id="5068730">.</span><span class="ident" id="5068731">sendZero</span>&nbsp;<span class="op" id="5068740">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5068745">state</span><span class="op" id="5068750">.</span><span class="ident" id="5068751">encodeUint</span><span class="op" id="5068761">(</span><span class="ident" id="5068762">uint64</span><span class="op" id="5068768">(</span><span class="ident" id="5068769">x</span><span class="op" id="5068770">)</span><span class="op" id="5068771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5068775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5068778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5068781">return</span>&nbsp;<span class="builtintype" id="5068788">true</span><br>
<span class="lineno"></span><span class="op" id="5068793">}</span>
</div>
</body>
</html>
