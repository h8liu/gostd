<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/csv</h2>
<ul>
<li><a href="/gostd/encoding/csv/reader.go.html">reader.go</a></li>
<li><a href="/gostd/encoding/csv/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/encoding/csv/writer.go.html">writer.go</a></li>
<li><a href="/gostd/encoding/csv/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6484669">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6484724">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6484778">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6484829">//&nbsp;Package&nbsp;csv&nbsp;reads&nbsp;and&nbsp;writes&nbsp;comma-separated&nbsp;values&nbsp;(CSV)&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="6484897">//</span><br>
<span class="lineno"></span><span class="comment" id="6484900">//&nbsp;A&nbsp;csv&nbsp;file&nbsp;contains&nbsp;zero&nbsp;or&nbsp;more&nbsp;records&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;fields&nbsp;per&nbsp;record.</span><br>
<span class="lineno"></span><span class="comment" id="6484978">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;separated&nbsp;by&nbsp;the&nbsp;newline&nbsp;character.&nbsp;The&nbsp;final&nbsp;record&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="6485053">//&nbsp;optionally&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;newline&nbsp;character.</span><br>
<span class="lineno">10</span><span class="comment" id="6485103">//</span><br>
<span class="lineno"></span><span class="comment" id="6485106">//&nbsp;&nbsp;&nbsp;&nbspfield1,field2,field3</span><br>
<span class="lineno"></span><span class="comment" id="6485130">//</span><br>
<span class="lineno"></span><span class="comment" id="6485133">//&nbsp;White&nbsp;space&nbsp;is&nbsp;considered&nbsp;part&nbsp;of&nbsp;a&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6485179">//</span><br>
<span class="lineno">15</span><span class="comment" id="6485182">//&nbsp;Carriage&nbsp;returns&nbsp;before&nbsp;newline&nbsp;characters&nbsp;are&nbsp;silently&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="6485250">//</span><br>
<span class="lineno"></span><span class="comment" id="6485253">//&nbsp;Blank&nbsp;lines&nbsp;are&nbsp;ignored.&nbsp;&nbsp;A&nbsp;line&nbsp;with&nbsp;only&nbsp;whitespace&nbsp;characters&nbsp;(excluding</span><br>
<span class="lineno"></span><span class="comment" id="6485332">//&nbsp;the&nbsp;ending&nbsp;newline&nbsp;character)&nbsp;is&nbsp;not&nbsp;considered&nbsp;a&nbsp;blank&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="6485397">//</span><br>
<span class="lineno">20</span><span class="comment" id="6485400">//&nbsp;Fields&nbsp;which&nbsp;start&nbsp;and&nbsp;stop&nbsp;with&nbsp;the&nbsp;quote&nbsp;character&nbsp;&#34;&nbsp;are&nbsp;called</span><br>
<span class="lineno"></span><span class="comment" id="6485469">//&nbsp;quoted-fields.&nbsp;&nbsp;The&nbsp;beginning&nbsp;and&nbsp;ending&nbsp;quote&nbsp;are&nbsp;not&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6485539">//&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6485549">//</span><br>
<span class="lineno"></span><span class="comment" id="6485552">//&nbsp;The&nbsp;source:</span><br>
<span class="lineno">25</span><span class="comment" id="6485567">//</span><br>
<span class="lineno"></span><span class="comment" id="6485570">//&nbsp;&nbsp;&nbsp;&nbspnormal&nbsp;string,&#34;quoted-field&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6485602">//</span><br>
<span class="lineno"></span><span class="comment" id="6485605">//&nbsp;results&nbsp;in&nbsp;the&nbsp;fields</span><br>
<span class="lineno"></span><span class="comment" id="6485630">//</span><br>
<span class="lineno">30</span><span class="comment" id="6485633">//&nbsp;&nbsp;&nbsp;&nbsp{`normal&nbsp;string`,&nbsp;`quoted-field`}</span><br>
<span class="lineno"></span><span class="comment" id="6485670">//</span><br>
<span class="lineno"></span><span class="comment" id="6485673">//&nbsp;Within&nbsp;a&nbsp;quoted-field&nbsp;a&nbsp;quote&nbsp;character&nbsp;followed&nbsp;by&nbsp;a&nbsp;second&nbsp;quote</span><br>
<span class="lineno"></span><span class="comment" id="6485743">//&nbsp;character&nbsp;is&nbsp;considered&nbsp;a&nbsp;single&nbsp;quote.</span><br>
<span class="lineno"></span><span class="comment" id="6485786">//</span><br>
<span class="lineno">35</span><span class="comment" id="6485789">//&nbsp;&nbsp;&nbsp;&nbsp&#34;the&nbsp;&#34;&#34;word&#34;&#34;&nbsp;is&nbsp;true&#34;,&#34;a&nbsp;&#34;&#34;quoted-field&#34;&#34;&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6485836">//</span><br>
<span class="lineno"></span><span class="comment" id="6485839">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6485853">//</span><br>
<span class="lineno"></span><span class="comment" id="6485856">//&nbsp;&nbsp;&nbsp;&nbsp{`the&nbsp;&#34;word&#34;&nbsp;is&nbsp;true`,&nbsp;`a&nbsp;&#34;quoted-field&#34;`}</span><br>
<span class="lineno">40</span><span class="comment" id="6485902">//</span><br>
<span class="lineno"></span><span class="comment" id="6485905">//&nbsp;Newlines&nbsp;and&nbsp;commas&nbsp;may&nbsp;be&nbsp;included&nbsp;in&nbsp;a&nbsp;quoted-field</span><br>
<span class="lineno"></span><span class="comment" id="6485962">//</span><br>
<span class="lineno"></span><span class="comment" id="6485965">//&nbsp;&nbsp;&nbsp;&nbsp&#34;Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="6485980">//&nbsp;&nbsp;&nbsp;&nbspfield&#34;,&#34;comma&nbsp;is&nbsp;,&#34;</span><br>
<span class="lineno">45</span><span class="comment" id="6486003">//</span><br>
<span class="lineno"></span><span class="comment" id="6486006">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6486020">//</span><br>
<span class="lineno"></span><span class="comment" id="6486023">//&nbsp;&nbsp;&nbsp;&nbsp{`Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="6486039">//&nbsp;&nbsp;&nbsp;&nbspfield`,&nbsp;`comma&nbsp;is&nbsp;,`}</span><br>
<span class="lineno">50</span><span class="keyword" id="6486064">package</span>&nbsp;<span class="ident" id="6486072">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6486077">import</span>&nbsp;<span class="op" id="6486084">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6486087">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6486096">&#34;bytes&#34;</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6486105">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6486115">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6486122">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6486128">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="6486138">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="6486141">//&nbsp;A&nbsp;ParseError&nbsp;is&nbsp;returned&nbsp;for&nbsp;parsing&nbsp;errors.</span><br>
<span class="lineno"></span><span class="comment" id="6486189">//&nbsp;The&nbsp;first&nbsp;line&nbsp;is&nbsp;1.&nbsp;&nbsp;The&nbsp;first&nbsp;column&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="6486237">type</span>&nbsp;<span class="ident" id="6486242">ParseError</span>&nbsp;<span class="keyword" id="6486253">struct</span>&nbsp;<span class="op" id="6486260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486263">Line</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6486270">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6486276">//&nbsp;Line&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486310">Column</span>&nbsp;<span class="builtintype" id="6486317">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6486323">//&nbsp;Column&nbsp;(rune&nbsp;index)&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486372">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6486379">error</span>&nbsp;<span class="comment" id="6486385">//&nbsp;The&nbsp;actual&nbsp;error</span><br>
<span class="lineno"></span><span class="op" id="6486405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6486408">func</span>&nbsp;<span class="op" id="6486413">(</span><span class="ident" id="6486414">e</span>&nbsp;<span class="op" id="6486416">*</span><span class="ident" id="6486417">ParseError</span><span class="op" id="6486427">)</span>&nbsp;<span class="ident" id="6486429">Error</span><span class="op" id="6486434">(</span><span class="op" id="6486435">)</span>&nbsp;<span class="builtintype" id="6486437">string</span>&nbsp;<span class="op" id="6486444">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6486447">return</span>&nbsp;<span class="ident" id="6486454">fmt</span><span class="op" id="6486457">.</span><span class="ident" id="6486458">Sprintf</span><span class="op" id="6486465">(</span><span class="string" id="6486466">&#34;line&nbsp;%d,&nbsp;column&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="6486490">,</span>&nbsp;<span class="ident" id="6486492">e</span><span class="op" id="6486493">.</span><span class="ident" id="6486494">Line</span><span class="op" id="6486498">,</span>&nbsp;<span class="ident" id="6486500">e</span><span class="op" id="6486501">.</span><span class="ident" id="6486502">Column</span><span class="op" id="6486508">,</span>&nbsp;<span class="ident" id="6486510">e</span><span class="op" id="6486511">.</span><span class="ident" id="6486512">Err</span><span class="op" id="6486515">)</span><br>
<span class="lineno"></span><span class="op" id="6486517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6486520">//&nbsp;These&nbsp;are&nbsp;the&nbsp;errors&nbsp;that&nbsp;can&nbsp;be&nbsp;returned&nbsp;in&nbsp;ParseError.Error</span><br>
<span class="lineno"></span><span class="keyword" id="6486585">var</span>&nbsp;<span class="op" id="6486589">(</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486592">ErrTrailingComma</span>&nbsp;<span class="op" id="6486609">=</span>&nbsp;<span class="ident" id="6486611">errors</span><span class="op" id="6486617">.</span><span class="ident" id="6486618">New</span><span class="op" id="6486621">(</span><span class="string" id="6486622">&#34;extra&nbsp;delimiter&nbsp;at&nbsp;end&nbsp;of&nbsp;line&#34;</span><span class="op" id="6486654">)</span>&nbsp;<span class="comment" id="6486656">//&nbsp;no&nbsp;longer&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486675">ErrBareQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6486692">=</span>&nbsp;<span class="ident" id="6486694">errors</span><span class="op" id="6486700">.</span><span class="ident" id="6486701">New</span><span class="op" id="6486704">(</span><span class="string" id="6486705">&#34;bare&nbsp;\&#34;&nbsp;in&nbsp;non-quoted-field&#34;</span><span class="op" id="6486734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486737">ErrQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6486754">=</span>&nbsp;<span class="ident" id="6486756">errors</span><span class="op" id="6486762">.</span><span class="ident" id="6486763">New</span><span class="op" id="6486766">(</span><span class="string" id="6486767">&#34;extraneous&nbsp;\&#34;&nbsp;in&nbsp;field&#34;</span><span class="op" id="6486791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486794">ErrFieldCount</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6486811">=</span>&nbsp;<span class="ident" id="6486813">errors</span><span class="op" id="6486819">.</span><span class="ident" id="6486820">New</span><span class="op" id="6486823">(</span><span class="string" id="6486824">&#34;wrong&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;line&#34;</span><span class="op" id="6486856">)</span><br>
<span class="lineno"></span><span class="op" id="6486858">)</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="6486861">//&nbsp;A&nbsp;Reader&nbsp;reads&nbsp;records&nbsp;from&nbsp;a&nbsp;CSV-encoded&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="6486912">//</span><br>
<span class="lineno"></span><span class="comment" id="6486915">//&nbsp;As&nbsp;returned&nbsp;by&nbsp;NewReader,&nbsp;a&nbsp;Reader&nbsp;expects&nbsp;input&nbsp;conforming&nbsp;to&nbsp;RFC&nbsp;4180.</span><br>
<span class="lineno"></span><span class="comment" id="6486991">//&nbsp;The&nbsp;exported&nbsp;fields&nbsp;can&nbsp;be&nbsp;changed&nbsp;to&nbsp;customize&nbsp;the&nbsp;details&nbsp;before&nbsp;the</span><br>
<span class="lineno">85</span><span class="comment" id="6487065">//&nbsp;first&nbsp;call&nbsp;to&nbsp;Read&nbsp;or&nbsp;ReadAll.</span><br>
<span class="lineno"></span><span class="comment" id="6487099">//</span><br>
<span class="lineno"></span><span class="comment" id="6487102">//&nbsp;Comma&nbsp;is&nbsp;the&nbsp;field&nbsp;delimiter.&nbsp;&nbsp;It&nbsp;defaults&nbsp;to&nbsp;&#39;,&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="6487156">//</span><br>
<span class="lineno"></span><span class="comment" id="6487159">//&nbsp;Comment,&nbsp;if&nbsp;not&nbsp;0,&nbsp;is&nbsp;the&nbsp;comment&nbsp;character.&nbsp;Lines&nbsp;beginning&nbsp;with&nbsp;the</span><br>
<span class="lineno">90</span><span class="comment" id="6487232">//&nbsp;Comment&nbsp;character&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="6487266">//</span><br>
<span class="lineno"></span><span class="comment" id="6487269">//&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;positive,&nbsp;Read&nbsp;requires&nbsp;each&nbsp;record&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6487333">//&nbsp;have&nbsp;the&nbsp;given&nbsp;number&nbsp;of&nbsp;fields.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;0,&nbsp;Read&nbsp;sets&nbsp;it&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6487411">//&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;first&nbsp;record,&nbsp;so&nbsp;that&nbsp;future&nbsp;records&nbsp;must</span><br>
<span class="lineno">95</span><span class="comment" id="6487484">//&nbsp;have&nbsp;the&nbsp;same&nbsp;field&nbsp;count.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;negative,&nbsp;no&nbsp;check&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6487559">//&nbsp;made&nbsp;and&nbsp;records&nbsp;may&nbsp;have&nbsp;a&nbsp;variable&nbsp;number&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6487617">//</span><br>
<span class="lineno"></span><span class="comment" id="6487620">//&nbsp;If&nbsp;LazyQuotes&nbsp;is&nbsp;true,&nbsp;a&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;an&nbsp;unquoted&nbsp;field&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6487692">//&nbsp;non-doubled&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;a&nbsp;quoted&nbsp;field.</span><br>
<span class="lineno">100</span><span class="comment" id="6487743">//</span><br>
<span class="lineno"></span><span class="comment" id="6487746">//&nbsp;If&nbsp;TrimLeadingSpace&nbsp;is&nbsp;true,&nbsp;leading&nbsp;white&nbsp;space&nbsp;in&nbsp;a&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="keyword" id="6487821">type</span>&nbsp;<span class="ident" id="6487826">Reader</span>&nbsp;<span class="keyword" id="6487833">struct</span>&nbsp;<span class="op" id="6487840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487843">Comma</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6487860">rune</span>&nbsp;<span class="comment" id="6487865">//&nbsp;field&nbsp;delimiter&nbsp;(set&nbsp;to&nbsp;&#39;,&#39;&nbsp;by&nbsp;NewReader)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487911">Comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6487928">rune</span>&nbsp;<span class="comment" id="6487933">//&nbsp;comment&nbsp;character&nbsp;for&nbsp;start&nbsp;of&nbsp;line</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487973">FieldsPerRecord</span>&nbsp;&nbsp;<span class="builtintype" id="6487990">int</span>&nbsp;&nbsp;<span class="comment" id="6487995">//&nbsp;number&nbsp;of&nbsp;expected&nbsp;fields&nbsp;per&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488036">LazyQuotes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6488053">bool</span>&nbsp;<span class="comment" id="6488058">//&nbsp;allow&nbsp;lazy&nbsp;quotes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488080">TrailingComma</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6488097">bool</span>&nbsp;<span class="comment" id="6488102">//&nbsp;ignored;&nbsp;here&nbsp;for&nbsp;backwards&nbsp;compatibility</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488148">TrimLeadingSpace</span>&nbsp;<span class="builtintype" id="6488165">bool</span>&nbsp;<span class="comment" id="6488170">//&nbsp;trim&nbsp;leading&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488193">line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6488210">int</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488215">column</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6488232">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488237">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6488254">*</span><span class="ident" id="6488255">bufio</span><span class="op" id="6488260">.</span><span class="ident" id="6488261">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488269">field</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6488286">bytes</span><span class="op" id="6488291">.</span><span class="ident" id="6488292">Buffer</span><br>
<span class="lineno"></span><span class="op" id="6488299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="6488302">//&nbsp;NewReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;that&nbsp;reads&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="6488355">func</span>&nbsp;<span class="ident" id="6488360">NewReader</span><span class="op" id="6488369">(</span><span class="ident" id="6488370">r</span>&nbsp;<span class="ident" id="6488372">io</span><span class="op" id="6488374">.</span><span class="ident" id="6488375">Reader</span><span class="op" id="6488381">)</span>&nbsp;<span class="op" id="6488383">*</span><span class="ident" id="6488384">Reader</span>&nbsp;<span class="op" id="6488391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6488394">return</span>&nbsp;<span class="op" id="6488401">&amp;</span><span class="ident" id="6488402">Reader</span><span class="op" id="6488408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488412">Comma</span><span class="op" id="6488417">:</span>&nbsp;<span class="string" id="6488419">&#39;,&#39;</span><span class="op" id="6488422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488426">r</span><span class="op" id="6488427">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6488433">bufio</span><span class="op" id="6488438">.</span><span class="ident" id="6488439">NewReader</span><span class="op" id="6488448">(</span><span class="ident" id="6488449">r</span><span class="op" id="6488450">)</span><span class="op" id="6488451">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488454">}</span><br>
<span class="lineno"></span><span class="op" id="6488456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6488459">//&nbsp;error&nbsp;creates&nbsp;a&nbsp;new&nbsp;ParseError&nbsp;based&nbsp;on&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="6488507">func</span>&nbsp;<span class="op" id="6488512">(</span><span class="ident" id="6488513">r</span>&nbsp;<span class="op" id="6488515">*</span><span class="ident" id="6488516">Reader</span><span class="op" id="6488522">)</span>&nbsp;<span class="builtintype" id="6488524">error</span><span class="op" id="6488529">(</span><span class="ident" id="6488530">err</span>&nbsp;<span class="builtintype" id="6488534">error</span><span class="op" id="6488539">)</span>&nbsp;<span class="builtintype" id="6488541">error</span>&nbsp;<span class="op" id="6488547">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6488550">return</span>&nbsp;<span class="op" id="6488557">&amp;</span><span class="ident" id="6488558">ParseError</span><span class="op" id="6488568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488572">Line</span><span class="op" id="6488576">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6488580">r</span><span class="op" id="6488581">.</span><span class="ident" id="6488582">line</span><span class="op" id="6488586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488590">Column</span><span class="op" id="6488596">:</span>&nbsp;<span class="ident" id="6488598">r</span><span class="op" id="6488599">.</span><span class="ident" id="6488600">column</span><span class="op" id="6488606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488610">Err</span><span class="op" id="6488613">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6488618">err</span><span class="op" id="6488621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488624">}</span><br>
<span class="lineno">130</span><span class="op" id="6488626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6488629">//&nbsp;Read&nbsp;reads&nbsp;one&nbsp;record&nbsp;from&nbsp;r.&nbsp;&nbsp;The&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;with&nbsp;each</span><br>
<span class="lineno"></span><span class="comment" id="6488706">//&nbsp;string&nbsp;representing&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="6488740">func</span>&nbsp;<span class="op" id="6488745">(</span><span class="ident" id="6488746">r</span>&nbsp;<span class="op" id="6488748">*</span><span class="ident" id="6488749">Reader</span><span class="op" id="6488755">)</span>&nbsp;<span class="ident" id="6488757">Read</span><span class="op" id="6488761">(</span><span class="op" id="6488762">)</span>&nbsp;<span class="op" id="6488764">(</span><span class="ident" id="6488765">record</span>&nbsp;<span class="op" id="6488772">[</span><span class="op" id="6488773">]</span><span class="builtintype" id="6488774">string</span><span class="op" id="6488780">,</span>&nbsp;<span class="ident" id="6488782">err</span>&nbsp;<span class="builtintype" id="6488786">error</span><span class="op" id="6488791">)</span>&nbsp;<span class="op" id="6488793">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6488796">for</span>&nbsp;<span class="op" id="6488800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488804">record</span><span class="op" id="6488810">,</span>&nbsp;<span class="ident" id="6488812">err</span>&nbsp;<span class="op" id="6488816">=</span>&nbsp;<span class="ident" id="6488818">r</span><span class="op" id="6488819">.</span><span class="ident" id="6488820">parseRecord</span><span class="op" id="6488831">(</span><span class="op" id="6488832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6488836">if</span>&nbsp;<span class="ident" id="6488839">record</span>&nbsp;<span class="op" id="6488846">!=</span>&nbsp;<span class="ident" id="6488849">nil</span>&nbsp;<span class="op" id="6488853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6488858">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488866">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6488870">if</span>&nbsp;<span class="ident" id="6488873">err</span>&nbsp;<span class="op" id="6488877">!=</span>&nbsp;<span class="ident" id="6488880">nil</span>&nbsp;<span class="op" id="6488884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6488889">return</span>&nbsp;<span class="ident" id="6488896">nil</span><span class="op" id="6488899">,</span>&nbsp;<span class="ident" id="6488901">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6488914">if</span>&nbsp;<span class="ident" id="6488917">r</span><span class="op" id="6488918">.</span><span class="ident" id="6488919">FieldsPerRecord</span>&nbsp;<span class="op" id="6488935">&gt;</span>&nbsp;<span class="num" id="6488937">0</span>&nbsp;<span class="op" id="6488939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6488943">if</span>&nbsp;<span class="builtinfunc" id="6488946">len</span><span class="op" id="6488949">(</span><span class="ident" id="6488950">record</span><span class="op" id="6488956">)</span>&nbsp;<span class="op" id="6488958">!=</span>&nbsp;<span class="ident" id="6488961">r</span><span class="op" id="6488962">.</span><span class="ident" id="6488963">FieldsPerRecord</span>&nbsp;<span class="op" id="6488979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488984">r</span><span class="op" id="6488985">.</span><span class="ident" id="6488986">column</span>&nbsp;<span class="op" id="6488993">=</span>&nbsp;<span class="num" id="6488995">0</span>&nbsp;<span class="comment" id="6488997">//&nbsp;report&nbsp;at&nbsp;start&nbsp;of&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6489029">return</span>&nbsp;<span class="ident" id="6489036">record</span><span class="op" id="6489042">,</span>&nbsp;<span class="ident" id="6489044">r</span><span class="op" id="6489045">.</span><span class="builtintype" id="6489046">error</span><span class="op" id="6489051">(</span><span class="ident" id="6489052">ErrFieldCount</span><span class="op" id="6489065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489069">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489072">}</span>&nbsp;<span class="keyword" id="6489074">else</span>&nbsp;<span class="keyword" id="6489079">if</span>&nbsp;<span class="ident" id="6489082">r</span><span class="op" id="6489083">.</span><span class="ident" id="6489084">FieldsPerRecord</span>&nbsp;<span class="op" id="6489100">==</span>&nbsp;<span class="num" id="6489103">0</span>&nbsp;<span class="op" id="6489105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489109">r</span><span class="op" id="6489110">.</span><span class="ident" id="6489111">FieldsPerRecord</span>&nbsp;<span class="op" id="6489127">=</span>&nbsp;<span class="builtinfunc" id="6489129">len</span><span class="op" id="6489132">(</span><span class="ident" id="6489133">record</span><span class="op" id="6489139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6489145">return</span>&nbsp;<span class="ident" id="6489152">record</span><span class="op" id="6489158">,</span>&nbsp;<span class="ident" id="6489160">nil</span><br>
<span class="lineno"></span><span class="op" id="6489164">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="6489167">//&nbsp;ReadAll&nbsp;reads&nbsp;all&nbsp;the&nbsp;remaining&nbsp;records&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="6489218">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6489255">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6489331">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;end&nbsp;of&nbsp;file&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be</span><br>
<span class="lineno">160</span><span class="comment" id="6489409">//&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="6489422">func</span>&nbsp;<span class="op" id="6489427">(</span><span class="ident" id="6489428">r</span>&nbsp;<span class="op" id="6489430">*</span><span class="ident" id="6489431">Reader</span><span class="op" id="6489437">)</span>&nbsp;<span class="ident" id="6489439">ReadAll</span><span class="op" id="6489446">(</span><span class="op" id="6489447">)</span>&nbsp;<span class="op" id="6489449">(</span><span class="ident" id="6489450">records</span>&nbsp;<span class="op" id="6489458">[</span><span class="op" id="6489459">]</span><span class="op" id="6489460">[</span><span class="op" id="6489461">]</span><span class="builtintype" id="6489462">string</span><span class="op" id="6489468">,</span>&nbsp;<span class="ident" id="6489470">err</span>&nbsp;<span class="builtintype" id="6489474">error</span><span class="op" id="6489479">)</span>&nbsp;<span class="op" id="6489481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6489484">for</span>&nbsp;<span class="op" id="6489488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489492">record</span><span class="op" id="6489498">,</span>&nbsp;<span class="ident" id="6489500">err</span>&nbsp;<span class="op" id="6489504">:=</span>&nbsp;<span class="ident" id="6489507">r</span><span class="op" id="6489508">.</span><span class="ident" id="6489509">Read</span><span class="op" id="6489513">(</span><span class="op" id="6489514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6489518">if</span>&nbsp;<span class="ident" id="6489521">err</span>&nbsp;<span class="op" id="6489525">==</span>&nbsp;<span class="ident" id="6489528">io</span><span class="op" id="6489530">.</span><span class="ident" id="6489531">EOF</span>&nbsp;<span class="op" id="6489535">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6489540">return</span>&nbsp;<span class="ident" id="6489547">records</span><span class="op" id="6489554">,</span>&nbsp;<span class="ident" id="6489556">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6489566">if</span>&nbsp;<span class="ident" id="6489569">err</span>&nbsp;<span class="op" id="6489573">!=</span>&nbsp;<span class="ident" id="6489576">nil</span>&nbsp;<span class="op" id="6489580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6489585">return</span>&nbsp;<span class="ident" id="6489592">nil</span><span class="op" id="6489595">,</span>&nbsp;<span class="ident" id="6489597">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489603">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489607">records</span>&nbsp;<span class="op" id="6489615">=</span>&nbsp;<span class="builtinfunc" id="6489617">append</span><span class="op" id="6489623">(</span><span class="ident" id="6489624">records</span><span class="op" id="6489631">,</span>&nbsp;<span class="ident" id="6489633">record</span><span class="op" id="6489639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489642">}</span><br>
<span class="lineno"></span><span class="op" id="6489644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6489647">//&nbsp;readRune&nbsp;reads&nbsp;one&nbsp;rune&nbsp;from&nbsp;r,&nbsp;folding&nbsp;\r\n&nbsp;to&nbsp;\n&nbsp;and&nbsp;keeping&nbsp;track</span><br>
<span class="lineno">175</span><span class="comment" id="6489719">//&nbsp;of&nbsp;how&nbsp;far&nbsp;into&nbsp;the&nbsp;line&nbsp;we&nbsp;have&nbsp;read.&nbsp;&nbsp;r.column&nbsp;will&nbsp;point&nbsp;to&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="6489795">//&nbsp;of&nbsp;this&nbsp;rune,&nbsp;not&nbsp;the&nbsp;end&nbsp;of&nbsp;this&nbsp;rune.</span><br>
<span class="lineno"></span><span class="keyword" id="6489838">func</span>&nbsp;<span class="op" id="6489843">(</span><span class="ident" id="6489844">r</span>&nbsp;<span class="op" id="6489846">*</span><span class="ident" id="6489847">Reader</span><span class="op" id="6489853">)</span>&nbsp;<span class="ident" id="6489855">readRune</span><span class="op" id="6489863">(</span><span class="op" id="6489864">)</span>&nbsp;<span class="op" id="6489866">(</span><span class="builtintype" id="6489867">rune</span><span class="op" id="6489871">,</span>&nbsp;<span class="builtintype" id="6489873">error</span><span class="op" id="6489878">)</span>&nbsp;<span class="op" id="6489880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489883">r1</span><span class="op" id="6489885">,</span>&nbsp;<span class="ident" id="6489887">_</span><span class="op" id="6489888">,</span>&nbsp;<span class="ident" id="6489890">err</span>&nbsp;<span class="op" id="6489894">:=</span>&nbsp;<span class="ident" id="6489897">r</span><span class="op" id="6489898">.</span><span class="ident" id="6489899">r</span><span class="op" id="6489900">.</span><span class="ident" id="6489901">ReadRune</span><span class="op" id="6489909">(</span><span class="op" id="6489910">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6489914">//&nbsp;Handle&nbsp;\r\n&nbsp;here.&nbsp;&nbsp;We&nbsp;make&nbsp;the&nbsp;simplifying&nbsp;assumption&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6489977">//&nbsp;anytime&nbsp;\r&nbsp;is&nbsp;followed&nbsp;by&nbsp;\n&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;folded&nbsp;to&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6490039">//&nbsp;We&nbsp;will&nbsp;not&nbsp;detect&nbsp;files&nbsp;which&nbsp;contain&nbsp;both&nbsp;\r\n&nbsp;and&nbsp;bare&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6490105">if</span>&nbsp;<span class="ident" id="6490108">r1</span>&nbsp;<span class="op" id="6490111">==</span>&nbsp;<span class="string" id="6490114">&#39;\r&#39;</span>&nbsp;<span class="op" id="6490119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490123">r1</span><span class="op" id="6490125">,</span>&nbsp;<span class="ident" id="6490127">_</span><span class="op" id="6490128">,</span>&nbsp;<span class="ident" id="6490130">err</span>&nbsp;<span class="op" id="6490134">=</span>&nbsp;<span class="ident" id="6490136">r</span><span class="op" id="6490137">.</span><span class="ident" id="6490138">r</span><span class="op" id="6490139">.</span><span class="ident" id="6490140">ReadRune</span><span class="op" id="6490148">(</span><span class="op" id="6490149">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6490153">if</span>&nbsp;<span class="ident" id="6490156">err</span>&nbsp;<span class="op" id="6490160">==</span>&nbsp;<span class="ident" id="6490163">nil</span>&nbsp;<span class="op" id="6490167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6490172">if</span>&nbsp;<span class="ident" id="6490175">r1</span>&nbsp;<span class="op" id="6490178">!=</span>&nbsp;<span class="string" id="6490181">&#39;\n&#39;</span>&nbsp;<span class="op" id="6490186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490192">r</span><span class="op" id="6490193">.</span><span class="ident" id="6490194">r</span><span class="op" id="6490195">.</span><span class="ident" id="6490196">UnreadRune</span><span class="op" id="6490206">(</span><span class="op" id="6490207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490213">r1</span>&nbsp;<span class="op" id="6490216">=</span>&nbsp;<span class="string" id="6490218">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490226">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490236">r</span><span class="op" id="6490237">.</span><span class="ident" id="6490238">column</span><span class="op" id="6490244">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6490248">return</span>&nbsp;<span class="ident" id="6490255">r1</span><span class="op" id="6490257">,</span>&nbsp;<span class="ident" id="6490259">err</span><br>
<span class="lineno"></span><span class="op" id="6490263">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="6490266">//&nbsp;skip&nbsp;reads&nbsp;runes&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;rune&nbsp;delim&nbsp;or&nbsp;until&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6490337">func</span>&nbsp;<span class="op" id="6490342">(</span><span class="ident" id="6490343">r</span>&nbsp;<span class="op" id="6490345">*</span><span class="ident" id="6490346">Reader</span><span class="op" id="6490352">)</span>&nbsp;<span class="ident" id="6490354">skip</span><span class="op" id="6490358">(</span><span class="ident" id="6490359">delim</span>&nbsp;<span class="builtintype" id="6490365">rune</span><span class="op" id="6490369">)</span>&nbsp;<span class="builtintype" id="6490371">error</span>&nbsp;<span class="op" id="6490377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6490380">for</span>&nbsp;<span class="op" id="6490384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490388">r1</span><span class="op" id="6490390">,</span>&nbsp;<span class="ident" id="6490392">err</span>&nbsp;<span class="op" id="6490396">:=</span>&nbsp;<span class="ident" id="6490399">r</span><span class="op" id="6490400">.</span><span class="ident" id="6490401">readRune</span><span class="op" id="6490409">(</span><span class="op" id="6490410">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6490414">if</span>&nbsp;<span class="ident" id="6490417">err</span>&nbsp;<span class="op" id="6490421">!=</span>&nbsp;<span class="ident" id="6490424">nil</span>&nbsp;<span class="op" id="6490428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6490433">return</span>&nbsp;<span class="ident" id="6490440">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6490450">if</span>&nbsp;<span class="ident" id="6490453">r1</span>&nbsp;<span class="op" id="6490456">==</span>&nbsp;<span class="ident" id="6490459">delim</span>&nbsp;<span class="op" id="6490465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6490470">return</span>&nbsp;<span class="ident" id="6490477">nil</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490486">}</span><br>
<span class="lineno"></span><span class="op" id="6490488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6490491">//&nbsp;parseRecord&nbsp;reads&nbsp;and&nbsp;parses&nbsp;a&nbsp;single&nbsp;csv&nbsp;record&nbsp;from&nbsp;r.</span><br>
<span class="lineno">210</span><span class="keyword" id="6490551">func</span>&nbsp;<span class="op" id="6490556">(</span><span class="ident" id="6490557">r</span>&nbsp;<span class="op" id="6490559">*</span><span class="ident" id="6490560">Reader</span><span class="op" id="6490566">)</span>&nbsp;<span class="ident" id="6490568">parseRecord</span><span class="op" id="6490579">(</span><span class="op" id="6490580">)</span>&nbsp;<span class="op" id="6490582">(</span><span class="ident" id="6490583">fields</span>&nbsp;<span class="op" id="6490590">[</span><span class="op" id="6490591">]</span><span class="builtintype" id="6490592">string</span><span class="op" id="6490598">,</span>&nbsp;<span class="ident" id="6490600">err</span>&nbsp;<span class="builtintype" id="6490604">error</span><span class="op" id="6490609">)</span>&nbsp;<span class="op" id="6490611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6490614">//&nbsp;Each&nbsp;record&nbsp;starts&nbsp;on&nbsp;a&nbsp;new&nbsp;line.&nbsp;&nbsp;We&nbsp;increment&nbsp;our&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6490675">//&nbsp;number&nbsp;(lines&nbsp;start&nbsp;at&nbsp;1,&nbsp;not&nbsp;0)&nbsp;and&nbsp;set&nbsp;column&nbsp;to&nbsp;-1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6490733">//&nbsp;so&nbsp;as&nbsp;we&nbsp;increment&nbsp;in&nbsp;readRune&nbsp;it&nbsp;points&nbsp;to&nbsp;the&nbsp;character&nbsp;we&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490804">r</span><span class="op" id="6490805">.</span><span class="ident" id="6490806">line</span><span class="op" id="6490810">++</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490814">r</span><span class="op" id="6490815">.</span><span class="ident" id="6490816">column</span>&nbsp;<span class="op" id="6490823">=</span>&nbsp;<span class="op" id="6490825">-</span><span class="num" id="6490826">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6490830">//&nbsp;Peek&nbsp;at&nbsp;the&nbsp;first&nbsp;rune.&nbsp;&nbsp;If&nbsp;it&nbsp;is&nbsp;an&nbsp;error&nbsp;we&nbsp;are&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6490890">//&nbsp;If&nbsp;we&nbsp;are&nbsp;support&nbsp;comments&nbsp;and&nbsp;it&nbsp;is&nbsp;the&nbsp;comment&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6490953">//&nbsp;then&nbsp;skip&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;line.</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490988">r1</span><span class="op" id="6490990">,</span>&nbsp;<span class="ident" id="6490992">_</span><span class="op" id="6490993">,</span>&nbsp;<span class="ident" id="6490995">err</span>&nbsp;<span class="op" id="6490999">:=</span>&nbsp;<span class="ident" id="6491002">r</span><span class="op" id="6491003">.</span><span class="ident" id="6491004">r</span><span class="op" id="6491005">.</span><span class="ident" id="6491006">ReadRune</span><span class="op" id="6491014">(</span><span class="op" id="6491015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491018">if</span>&nbsp;<span class="ident" id="6491021">err</span>&nbsp;<span class="op" id="6491025">!=</span>&nbsp;<span class="ident" id="6491028">nil</span>&nbsp;<span class="op" id="6491032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491036">return</span>&nbsp;<span class="ident" id="6491043">nil</span><span class="op" id="6491046">,</span>&nbsp;<span class="ident" id="6491048">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491053">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491057">if</span>&nbsp;<span class="ident" id="6491060">r</span><span class="op" id="6491061">.</span><span class="ident" id="6491062">Comment</span>&nbsp;<span class="op" id="6491070">!=</span>&nbsp;<span class="num" id="6491073">0</span>&nbsp;<span class="op" id="6491075">&amp;&amp;</span>&nbsp;<span class="ident" id="6491078">r1</span>&nbsp;<span class="op" id="6491081">==</span>&nbsp;<span class="ident" id="6491084">r</span><span class="op" id="6491085">.</span><span class="ident" id="6491086">Comment</span>&nbsp;<span class="op" id="6491094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491098">return</span>&nbsp;<span class="ident" id="6491105">nil</span><span class="op" id="6491108">,</span>&nbsp;<span class="ident" id="6491110">r</span><span class="op" id="6491111">.</span><span class="ident" id="6491112">skip</span><span class="op" id="6491116">(</span><span class="string" id="6491117">&#39;\n&#39;</span><span class="op" id="6491121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491127">r</span><span class="op" id="6491128">.</span><span class="ident" id="6491129">r</span><span class="op" id="6491130">.</span><span class="ident" id="6491131">UnreadRune</span><span class="op" id="6491141">(</span><span class="op" id="6491142">)</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6491146">//&nbsp;At&nbsp;this&nbsp;point&nbsp;we&nbsp;have&nbsp;at&nbsp;least&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491192">for</span>&nbsp;<span class="op" id="6491196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491200">haveField</span><span class="op" id="6491209">,</span>&nbsp;<span class="ident" id="6491211">delim</span><span class="op" id="6491216">,</span>&nbsp;<span class="ident" id="6491218">err</span>&nbsp;<span class="op" id="6491222">:=</span>&nbsp;<span class="ident" id="6491225">r</span><span class="op" id="6491226">.</span><span class="ident" id="6491227">parseField</span><span class="op" id="6491237">(</span><span class="op" id="6491238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491242">if</span>&nbsp;<span class="ident" id="6491245">haveField</span>&nbsp;<span class="op" id="6491255">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491260">fields</span>&nbsp;<span class="op" id="6491267">=</span>&nbsp;<span class="builtinfunc" id="6491269">append</span><span class="op" id="6491275">(</span><span class="ident" id="6491276">fields</span><span class="op" id="6491282">,</span>&nbsp;<span class="ident" id="6491284">r</span><span class="op" id="6491285">.</span><span class="ident" id="6491286">field</span><span class="op" id="6491291">.</span><span class="ident" id="6491292">String</span><span class="op" id="6491298">(</span><span class="op" id="6491299">)</span><span class="op" id="6491300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491308">if</span>&nbsp;<span class="ident" id="6491311">delim</span>&nbsp;<span class="op" id="6491317">==</span>&nbsp;<span class="string" id="6491320">&#39;\n&#39;</span>&nbsp;<span class="op" id="6491325">||</span>&nbsp;<span class="ident" id="6491328">err</span>&nbsp;<span class="op" id="6491332">==</span>&nbsp;<span class="ident" id="6491335">io</span><span class="op" id="6491337">.</span><span class="ident" id="6491338">EOF</span>&nbsp;<span class="op" id="6491342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491347">return</span>&nbsp;<span class="ident" id="6491354">fields</span><span class="op" id="6491360">,</span>&nbsp;<span class="ident" id="6491362">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491368">}</span>&nbsp;<span class="keyword" id="6491370">else</span>&nbsp;<span class="keyword" id="6491375">if</span>&nbsp;<span class="ident" id="6491378">err</span>&nbsp;<span class="op" id="6491382">!=</span>&nbsp;<span class="ident" id="6491385">nil</span>&nbsp;<span class="op" id="6491389">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491394">return</span>&nbsp;<span class="ident" id="6491401">nil</span><span class="op" id="6491404">,</span>&nbsp;<span class="ident" id="6491406">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491415">}</span><br>
<span class="lineno"></span><span class="op" id="6491417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="6491420">//&nbsp;parseField&nbsp;parses&nbsp;the&nbsp;next&nbsp;field&nbsp;in&nbsp;the&nbsp;record.&nbsp;&nbsp;The&nbsp;read&nbsp;field&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6491490">//&nbsp;located&nbsp;in&nbsp;r.field.&nbsp;&nbsp;Delim&nbsp;is&nbsp;the&nbsp;first&nbsp;character&nbsp;not&nbsp;part&nbsp;of&nbsp;the&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="6491565">//&nbsp;(r.Comma&nbsp;or&nbsp;&#39;\n&#39;).</span><br>
<span class="lineno"></span><span class="keyword" id="6491587">func</span>&nbsp;<span class="op" id="6491592">(</span><span class="ident" id="6491593">r</span>&nbsp;<span class="op" id="6491595">*</span><span class="ident" id="6491596">Reader</span><span class="op" id="6491602">)</span>&nbsp;<span class="ident" id="6491604">parseField</span><span class="op" id="6491614">(</span><span class="op" id="6491615">)</span>&nbsp;<span class="op" id="6491617">(</span><span class="ident" id="6491618">haveField</span>&nbsp;<span class="builtintype" id="6491628">bool</span><span class="op" id="6491632">,</span>&nbsp;<span class="ident" id="6491634">delim</span>&nbsp;<span class="builtintype" id="6491640">rune</span><span class="op" id="6491644">,</span>&nbsp;<span class="ident" id="6491646">err</span>&nbsp;<span class="builtintype" id="6491650">error</span><span class="op" id="6491655">)</span>&nbsp;<span class="op" id="6491657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491660">r</span><span class="op" id="6491661">.</span><span class="ident" id="6491662">field</span><span class="op" id="6491667">.</span><span class="ident" id="6491668">Reset</span><span class="op" id="6491673">(</span><span class="op" id="6491674">)</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491678">r1</span><span class="op" id="6491680">,</span>&nbsp;<span class="ident" id="6491682">err</span>&nbsp;<span class="op" id="6491686">:=</span>&nbsp;<span class="ident" id="6491689">r</span><span class="op" id="6491690">.</span><span class="ident" id="6491691">readRune</span><span class="op" id="6491699">(</span><span class="op" id="6491700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491703">for</span>&nbsp;<span class="ident" id="6491707">err</span>&nbsp;<span class="op" id="6491711">==</span>&nbsp;<span class="ident" id="6491714">nil</span>&nbsp;<span class="op" id="6491718">&amp;&amp;</span>&nbsp;<span class="ident" id="6491721">r</span><span class="op" id="6491722">.</span><span class="ident" id="6491723">TrimLeadingSpace</span>&nbsp;<span class="op" id="6491740">&amp;&amp;</span>&nbsp;<span class="ident" id="6491743">r1</span>&nbsp;<span class="op" id="6491746">!=</span>&nbsp;<span class="string" id="6491749">&#39;\n&#39;</span>&nbsp;<span class="op" id="6491754">&amp;&amp;</span>&nbsp;<span class="ident" id="6491757">unicode</span><span class="op" id="6491764">.</span><span class="ident" id="6491765">IsSpace</span><span class="op" id="6491772">(</span><span class="ident" id="6491773">r1</span><span class="op" id="6491775">)</span>&nbsp;<span class="op" id="6491777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491781">r1</span><span class="op" id="6491783">,</span>&nbsp;<span class="ident" id="6491785">err</span>&nbsp;<span class="op" id="6491789">=</span>&nbsp;<span class="ident" id="6491791">r</span><span class="op" id="6491792">.</span><span class="ident" id="6491793">readRune</span><span class="op" id="6491801">(</span><span class="op" id="6491802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491805">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491809">if</span>&nbsp;<span class="ident" id="6491812">err</span>&nbsp;<span class="op" id="6491816">==</span>&nbsp;<span class="ident" id="6491819">io</span><span class="op" id="6491821">.</span><span class="ident" id="6491822">EOF</span>&nbsp;<span class="op" id="6491826">&amp;&amp;</span>&nbsp;<span class="ident" id="6491829">r</span><span class="op" id="6491830">.</span><span class="ident" id="6491831">column</span>&nbsp;<span class="op" id="6491838">!=</span>&nbsp;<span class="num" id="6491841">0</span>&nbsp;<span class="op" id="6491843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491847">return</span>&nbsp;<span class="builtintype" id="6491854">true</span><span class="op" id="6491858">,</span>&nbsp;<span class="num" id="6491860">0</span><span class="op" id="6491861">,</span>&nbsp;<span class="ident" id="6491863">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491871">if</span>&nbsp;<span class="ident" id="6491874">err</span>&nbsp;<span class="op" id="6491878">!=</span>&nbsp;<span class="ident" id="6491881">nil</span>&nbsp;<span class="op" id="6491885">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491889">return</span>&nbsp;<span class="builtintype" id="6491896">false</span><span class="op" id="6491901">,</span>&nbsp;<span class="num" id="6491903">0</span><span class="op" id="6491904">,</span>&nbsp;<span class="ident" id="6491906">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491915">switch</span>&nbsp;<span class="ident" id="6491922">r1</span>&nbsp;<span class="op" id="6491925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491928">case</span>&nbsp;<span class="ident" id="6491933">r</span><span class="op" id="6491934">.</span><span class="ident" id="6491935">Comma</span><span class="op" id="6491940">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6491944">//&nbsp;will&nbsp;check&nbsp;below</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491966">case</span>&nbsp;<span class="string" id="6491971">&#39;\n&#39;</span><span class="op" id="6491975">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6491979">//&nbsp;We&nbsp;are&nbsp;a&nbsp;trailing&nbsp;empty&nbsp;field&nbsp;or&nbsp;a&nbsp;blank&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492030">if</span>&nbsp;<span class="ident" id="6492033">r</span><span class="op" id="6492034">.</span><span class="ident" id="6492035">column</span>&nbsp;<span class="op" id="6492042">==</span>&nbsp;<span class="num" id="6492045">0</span>&nbsp;<span class="op" id="6492047">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492052">return</span>&nbsp;<span class="builtintype" id="6492059">false</span><span class="op" id="6492064">,</span>&nbsp;<span class="ident" id="6492066">r1</span><span class="op" id="6492068">,</span>&nbsp;<span class="ident" id="6492070">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492080">return</span>&nbsp;<span class="builtintype" id="6492087">true</span><span class="op" id="6492091">,</span>&nbsp;<span class="ident" id="6492093">r1</span><span class="op" id="6492095">,</span>&nbsp;<span class="ident" id="6492097">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492103">case</span>&nbsp;<span class="string" id="6492108">&#39;&#34;&#39;</span><span class="op" id="6492111">:</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6492115">//&nbsp;quoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492132">Quoted</span><span class="op" id="6492138">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492142">for</span>&nbsp;<span class="op" id="6492146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492151">r1</span><span class="op" id="6492153">,</span>&nbsp;<span class="ident" id="6492155">err</span>&nbsp;<span class="op" id="6492159">=</span>&nbsp;<span class="ident" id="6492161">r</span><span class="op" id="6492162">.</span><span class="ident" id="6492163">readRune</span><span class="op" id="6492171">(</span><span class="op" id="6492172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492177">if</span>&nbsp;<span class="ident" id="6492180">err</span>&nbsp;<span class="op" id="6492184">!=</span>&nbsp;<span class="ident" id="6492187">nil</span>&nbsp;<span class="op" id="6492191">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492197">if</span>&nbsp;<span class="ident" id="6492200">err</span>&nbsp;<span class="op" id="6492204">==</span>&nbsp;<span class="ident" id="6492207">io</span><span class="op" id="6492209">.</span><span class="ident" id="6492210">EOF</span>&nbsp;<span class="op" id="6492214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492221">if</span>&nbsp;<span class="ident" id="6492224">r</span><span class="op" id="6492225">.</span><span class="ident" id="6492226">LazyQuotes</span>&nbsp;<span class="op" id="6492237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492245">return</span>&nbsp;<span class="builtintype" id="6492252">true</span><span class="op" id="6492256">,</span>&nbsp;<span class="num" id="6492258">0</span><span class="op" id="6492259">,</span>&nbsp;<span class="ident" id="6492261">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492277">return</span>&nbsp;<span class="builtintype" id="6492284">false</span><span class="op" id="6492289">,</span>&nbsp;<span class="num" id="6492291">0</span><span class="op" id="6492292">,</span>&nbsp;<span class="ident" id="6492294">r</span><span class="op" id="6492295">.</span><span class="builtintype" id="6492296">error</span><span class="op" id="6492301">(</span><span class="ident" id="6492302">ErrQuote</span><span class="op" id="6492310">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492322">return</span>&nbsp;<span class="builtintype" id="6492329">false</span><span class="op" id="6492334">,</span>&nbsp;<span class="num" id="6492336">0</span><span class="op" id="6492337">,</span>&nbsp;<span class="ident" id="6492339">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492351">switch</span>&nbsp;<span class="ident" id="6492358">r1</span>&nbsp;<span class="op" id="6492361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492366">case</span>&nbsp;<span class="string" id="6492371">&#39;&#34;&#39;</span><span class="op" id="6492374">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492380">r1</span><span class="op" id="6492382">,</span>&nbsp;<span class="ident" id="6492384">err</span>&nbsp;<span class="op" id="6492388">=</span>&nbsp;<span class="ident" id="6492390">r</span><span class="op" id="6492391">.</span><span class="ident" id="6492392">readRune</span><span class="op" id="6492400">(</span><span class="op" id="6492401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492407">if</span>&nbsp;<span class="ident" id="6492410">err</span>&nbsp;<span class="op" id="6492414">!=</span>&nbsp;<span class="ident" id="6492417">nil</span>&nbsp;<span class="op" id="6492421">||</span>&nbsp;<span class="ident" id="6492424">r1</span>&nbsp;<span class="op" id="6492427">==</span>&nbsp;<span class="ident" id="6492430">r</span><span class="op" id="6492431">.</span><span class="ident" id="6492432">Comma</span>&nbsp;<span class="op" id="6492438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492445">break</span>&nbsp;<span class="ident" id="6492451">Quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492468">if</span>&nbsp;<span class="ident" id="6492471">r1</span>&nbsp;<span class="op" id="6492474">==</span>&nbsp;<span class="string" id="6492477">&#39;\n&#39;</span>&nbsp;<span class="op" id="6492482">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492489">return</span>&nbsp;<span class="builtintype" id="6492496">true</span><span class="op" id="6492500">,</span>&nbsp;<span class="ident" id="6492502">r1</span><span class="op" id="6492504">,</span>&nbsp;<span class="ident" id="6492506">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492520">if</span>&nbsp;<span class="ident" id="6492523">r1</span>&nbsp;<span class="op" id="6492526">!=</span>&nbsp;<span class="string" id="6492529">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6492533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492540">if</span>&nbsp;<span class="op" id="6492543">!</span><span class="ident" id="6492544">r</span><span class="op" id="6492545">.</span><span class="ident" id="6492546">LazyQuotes</span>&nbsp;<span class="op" id="6492557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492565">r</span><span class="op" id="6492566">.</span><span class="ident" id="6492567">column</span><span class="op" id="6492573">--</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492582">return</span>&nbsp;<span class="builtintype" id="6492589">false</span><span class="op" id="6492594">,</span>&nbsp;<span class="num" id="6492596">0</span><span class="op" id="6492597">,</span>&nbsp;<span class="ident" id="6492599">r</span><span class="op" id="6492600">.</span><span class="builtintype" id="6492601">error</span><span class="op" id="6492606">(</span><span class="ident" id="6492607">ErrQuote</span><span class="op" id="6492615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6492629">//&nbsp;accept&nbsp;the&nbsp;bare&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492659">r</span><span class="op" id="6492660">.</span><span class="ident" id="6492661">field</span><span class="op" id="6492666">.</span><span class="ident" id="6492667">WriteRune</span><span class="op" id="6492676">(</span><span class="string" id="6492677">&#39;&#34;&#39;</span><span class="op" id="6492680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492686">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492691">case</span>&nbsp;<span class="string" id="6492696">&#39;\n&#39;</span><span class="op" id="6492700">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492706">r</span><span class="op" id="6492707">.</span><span class="ident" id="6492708">line</span><span class="op" id="6492712">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492719">r</span><span class="op" id="6492720">.</span><span class="ident" id="6492721">column</span>&nbsp;<span class="op" id="6492728">=</span>&nbsp;<span class="op" id="6492730">-</span><span class="num" id="6492731">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492741">r</span><span class="op" id="6492742">.</span><span class="ident" id="6492743">field</span><span class="op" id="6492748">.</span><span class="ident" id="6492749">WriteRune</span><span class="op" id="6492758">(</span><span class="ident" id="6492759">r1</span><span class="op" id="6492761">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492769">default</span><span class="op" id="6492776">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6492780">//&nbsp;unquoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492800">for</span>&nbsp;<span class="op" id="6492804">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492809">r</span><span class="op" id="6492810">.</span><span class="ident" id="6492811">field</span><span class="op" id="6492816">.</span><span class="ident" id="6492817">WriteRune</span><span class="op" id="6492826">(</span><span class="ident" id="6492827">r1</span><span class="op" id="6492829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492834">r1</span><span class="op" id="6492836">,</span>&nbsp;<span class="ident" id="6492838">err</span>&nbsp;<span class="op" id="6492842">=</span>&nbsp;<span class="ident" id="6492844">r</span><span class="op" id="6492845">.</span><span class="ident" id="6492846">readRune</span><span class="op" id="6492854">(</span><span class="op" id="6492855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492860">if</span>&nbsp;<span class="ident" id="6492863">err</span>&nbsp;<span class="op" id="6492867">!=</span>&nbsp;<span class="ident" id="6492870">nil</span>&nbsp;<span class="op" id="6492874">||</span>&nbsp;<span class="ident" id="6492877">r1</span>&nbsp;<span class="op" id="6492880">==</span>&nbsp;<span class="ident" id="6492883">r</span><span class="op" id="6492884">.</span><span class="ident" id="6492885">Comma</span>&nbsp;<span class="op" id="6492891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492897">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492906">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492911">if</span>&nbsp;<span class="ident" id="6492914">r1</span>&nbsp;<span class="op" id="6492917">==</span>&nbsp;<span class="string" id="6492920">&#39;\n&#39;</span>&nbsp;<span class="op" id="6492925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492931">return</span>&nbsp;<span class="builtintype" id="6492938">true</span><span class="op" id="6492942">,</span>&nbsp;<span class="ident" id="6492944">r1</span><span class="op" id="6492946">,</span>&nbsp;<span class="ident" id="6492948">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492960">if</span>&nbsp;<span class="op" id="6492963">!</span><span class="ident" id="6492964">r</span><span class="op" id="6492965">.</span><span class="ident" id="6492966">LazyQuotes</span>&nbsp;<span class="op" id="6492977">&amp;&amp;</span>&nbsp;<span class="ident" id="6492980">r1</span>&nbsp;<span class="op" id="6492983">==</span>&nbsp;<span class="string" id="6492986">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6492990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492996">return</span>&nbsp;<span class="builtintype" id="6493003">false</span><span class="op" id="6493008">,</span>&nbsp;<span class="num" id="6493010">0</span><span class="op" id="6493011">,</span>&nbsp;<span class="ident" id="6493013">r</span><span class="op" id="6493014">.</span><span class="builtintype" id="6493015">error</span><span class="op" id="6493020">(</span><span class="ident" id="6493021">ErrBareQuote</span><span class="op" id="6493033">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6493038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6493042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6493045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493049">if</span>&nbsp;<span class="ident" id="6493052">err</span>&nbsp;<span class="op" id="6493056">!=</span>&nbsp;<span class="ident" id="6493059">nil</span>&nbsp;<span class="op" id="6493063">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493067">if</span>&nbsp;<span class="ident" id="6493070">err</span>&nbsp;<span class="op" id="6493074">==</span>&nbsp;<span class="ident" id="6493077">io</span><span class="op" id="6493079">.</span><span class="ident" id="6493080">EOF</span>&nbsp;<span class="op" id="6493084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493089">return</span>&nbsp;<span class="builtintype" id="6493096">true</span><span class="op" id="6493100">,</span>&nbsp;<span class="num" id="6493102">0</span><span class="op" id="6493103">,</span>&nbsp;<span class="ident" id="6493105">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6493111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493115">return</span>&nbsp;<span class="builtintype" id="6493122">false</span><span class="op" id="6493127">,</span>&nbsp;<span class="num" id="6493129">0</span><span class="op" id="6493130">,</span>&nbsp;<span class="ident" id="6493132">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6493137">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493141">return</span>&nbsp;<span class="builtintype" id="6493148">true</span><span class="op" id="6493152">,</span>&nbsp;<span class="ident" id="6493154">r1</span><span class="op" id="6493156">,</span>&nbsp;<span class="ident" id="6493158">nil</span><br>
<span class="lineno"></span><span class="op" id="6493162">}</span>
</div>
</body>
</html>
