<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/rand</h2>
<ul>
<li><a href="/gostd/crypto/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/crypto/rand/rand_linux.go.html">rand_linux.go</a></li>
<li><a href="/gostd/crypto/rand/rand_test.go.html" class="current">rand_test.go</a></li>
<li><a href="/gostd/crypto/rand/rand_unix.go.html">rand_unix.go</a></li>
<li><a href="/gostd/crypto/rand/util.go.html">util.go</a></li>
<li><a href="/gostd/crypto/rand/util_test.go.html">util_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6971377">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6971433">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6971487">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6971538">package</span>&nbsp;<span class="ident" id="6971546">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6971552">import</span>&nbsp;<span class="op" id="6971559">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6971562">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6971571">&#34;compress/flate&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6971589">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6971595">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6971605">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6971608">func</span>&nbsp;<span class="ident" id="6971613">TestRead</span><span class="op" id="6971621">(</span><span class="ident" id="6971622">t</span>&nbsp;<span class="op" id="6971624">*</span><span class="ident" id="6971625">testing</span><span class="op" id="6971632">.</span><span class="ident" id="6971633">T</span><span class="op" id="6971634">)</span>&nbsp;<span class="op" id="6971636">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6971639">var</span>&nbsp;<span class="ident" id="6971643">n</span>&nbsp;<span class="builtintype" id="6971645">int</span>&nbsp;<span class="op" id="6971649">=</span>&nbsp;<span class="num" id="6971651">4e6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6971656">if</span>&nbsp;<span class="ident" id="6971659">testing</span><span class="op" id="6971666">.</span><span class="ident" id="6971667">Short</span><span class="op" id="6971672">(</span><span class="op" id="6971673">)</span>&nbsp;<span class="op" id="6971675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971679">n</span>&nbsp;<span class="op" id="6971681">=</span>&nbsp;<span class="num" id="6971683">1e5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971691">b</span>&nbsp;<span class="op" id="6971693">:=</span>&nbsp;<span class="builtinfunc" id="6971696">make</span><span class="op" id="6971700">(</span><span class="op" id="6971701">[</span><span class="op" id="6971702">]</span><span class="builtintype" id="6971703">byte</span><span class="op" id="6971707">,</span>&nbsp;<span class="ident" id="6971709">n</span><span class="op" id="6971710">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971713">n</span><span class="op" id="6971714">,</span>&nbsp;<span class="ident" id="6971716">err</span>&nbsp;<span class="op" id="6971720">:=</span>&nbsp;<span class="ident" id="6971723">io</span><span class="op" id="6971725">.</span><span class="ident" id="6971726">ReadFull</span><span class="op" id="6971734">(</span><span class="ident" id="6971735">Reader</span><span class="op" id="6971741">,</span>&nbsp;<span class="ident" id="6971743">b</span><span class="op" id="6971744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6971747">if</span>&nbsp;<span class="ident" id="6971750">n</span>&nbsp;<span class="op" id="6971752">!=</span>&nbsp;<span class="builtinfunc" id="6971755">len</span><span class="op" id="6971758">(</span><span class="ident" id="6971759">b</span><span class="op" id="6971760">)</span>&nbsp;<span class="op" id="6971762">||</span>&nbsp;<span class="ident" id="6971765">err</span>&nbsp;<span class="op" id="6971769">!=</span>&nbsp;<span class="builtintype" id="6971772">nil</span>&nbsp;<span class="op" id="6971776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971780">t</span><span class="op" id="6971781">.</span><span class="ident" id="6971782">Fatalf</span><span class="op" id="6971788">(</span><span class="string" id="6971789">&#34;ReadFull(buf)&nbsp;=&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="6971813">,</span>&nbsp;<span class="ident" id="6971815">n</span><span class="op" id="6971816">,</span>&nbsp;<span class="ident" id="6971818">err</span><span class="op" id="6971821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6971828">var</span>&nbsp;<span class="ident" id="6971832">z</span>&nbsp;<span class="ident" id="6971834">bytes</span><span class="op" id="6971839">.</span><span class="ident" id="6971840">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971848">f</span><span class="op" id="6971849">,</span>&nbsp;<span class="ident" id="6971851">_</span>&nbsp;<span class="op" id="6971853">:=</span>&nbsp;<span class="ident" id="6971856">flate</span><span class="op" id="6971861">.</span><span class="ident" id="6971862">NewWriter</span><span class="op" id="6971871">(</span><span class="op" id="6971872">&amp;</span><span class="ident" id="6971873">z</span><span class="op" id="6971874">,</span>&nbsp;<span class="num" id="6971876">5</span><span class="op" id="6971877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971880">f</span><span class="op" id="6971881">.</span><span class="ident" id="6971882">Write</span><span class="op" id="6971887">(</span><span class="ident" id="6971888">b</span><span class="op" id="6971889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971892">f</span><span class="op" id="6971893">.</span><span class="ident" id="6971894">Close</span><span class="op" id="6971899">(</span><span class="op" id="6971900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6971903">if</span>&nbsp;<span class="ident" id="6971906">z</span><span class="op" id="6971907">.</span><span class="ident" id="6971908">Len</span><span class="op" id="6971911">(</span><span class="op" id="6971912">)</span>&nbsp;<span class="op" id="6971914">&lt;</span>&nbsp;<span class="builtinfunc" id="6971916">len</span><span class="op" id="6971919">(</span><span class="ident" id="6971920">b</span><span class="op" id="6971921">)</span><span class="op" id="6971922">*</span><span class="num" id="6971923">99</span><span class="op" id="6971925">/</span><span class="num" id="6971926">100</span>&nbsp;<span class="op" id="6971930">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971934">t</span><span class="op" id="6971935">.</span><span class="ident" id="6971936">Fatalf</span><span class="op" id="6971942">(</span><span class="string" id="6971943">&#34;Compressed&nbsp;%d&nbsp;-&gt;&nbsp;%d&#34;</span><span class="op" id="6971964">,</span>&nbsp;<span class="builtinfunc" id="6971966">len</span><span class="op" id="6971969">(</span><span class="ident" id="6971970">b</span><span class="op" id="6971971">)</span><span class="op" id="6971972">,</span>&nbsp;<span class="ident" id="6971974">z</span><span class="op" id="6971975">.</span><span class="ident" id="6971976">Len</span><span class="op" id="6971979">(</span><span class="op" id="6971980">)</span><span class="op" id="6971981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971984">}</span><br>
<span class="lineno"></span><span class="op" id="6971986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6971989">func</span>&nbsp;<span class="ident" id="6971994">TestReadEmpty</span><span class="op" id="6972007">(</span><span class="ident" id="6972008">t</span>&nbsp;<span class="op" id="6972010">*</span><span class="ident" id="6972011">testing</span><span class="op" id="6972018">.</span><span class="ident" id="6972019">T</span><span class="op" id="6972020">)</span>&nbsp;<span class="op" id="6972022">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972025">n</span><span class="op" id="6972026">,</span>&nbsp;<span class="ident" id="6972028">err</span>&nbsp;<span class="op" id="6972032">:=</span>&nbsp;<span class="ident" id="6972035">Reader</span><span class="op" id="6972041">.</span><span class="ident" id="6972042">Read</span><span class="op" id="6972046">(</span><span class="builtinfunc" id="6972047">make</span><span class="op" id="6972051">(</span><span class="op" id="6972052">[</span><span class="op" id="6972053">]</span><span class="builtintype" id="6972054">byte</span><span class="op" id="6972058">,</span>&nbsp;<span class="num" id="6972060">0</span><span class="op" id="6972061">)</span><span class="op" id="6972062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6972065">if</span>&nbsp;<span class="ident" id="6972068">n</span>&nbsp;<span class="op" id="6972070">!=</span>&nbsp;<span class="num" id="6972073">0</span>&nbsp;<span class="op" id="6972075">||</span>&nbsp;<span class="ident" id="6972078">err</span>&nbsp;<span class="op" id="6972082">!=</span>&nbsp;<span class="builtintype" id="6972085">nil</span>&nbsp;<span class="op" id="6972089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972093">t</span><span class="op" id="6972094">.</span><span class="ident" id="6972095">Fatalf</span><span class="op" id="6972101">(</span><span class="string" id="6972102">&#34;Read(make([]byte,&nbsp;0))&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="6972134">,</span>&nbsp;<span class="ident" id="6972136">n</span><span class="op" id="6972137">,</span>&nbsp;<span class="ident" id="6972139">err</span><span class="op" id="6972142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6972145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972148">n</span><span class="op" id="6972149">,</span>&nbsp;<span class="ident" id="6972151">err</span>&nbsp;<span class="op" id="6972155">=</span>&nbsp;<span class="ident" id="6972157">Reader</span><span class="op" id="6972163">.</span><span class="ident" id="6972164">Read</span><span class="op" id="6972168">(</span><span class="builtintype" id="6972169">nil</span><span class="op" id="6972172">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6972175">if</span>&nbsp;<span class="ident" id="6972178">n</span>&nbsp;<span class="op" id="6972180">!=</span>&nbsp;<span class="num" id="6972183">0</span>&nbsp;<span class="op" id="6972185">||</span>&nbsp;<span class="ident" id="6972188">err</span>&nbsp;<span class="op" id="6972192">!=</span>&nbsp;<span class="builtintype" id="6972195">nil</span>&nbsp;<span class="op" id="6972199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972203">t</span><span class="op" id="6972204">.</span><span class="ident" id="6972205">Fatalf</span><span class="op" id="6972211">(</span><span class="string" id="6972212">&#34;Read(nil)&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="6972232">,</span>&nbsp;<span class="ident" id="6972234">n</span><span class="op" id="6972235">,</span>&nbsp;<span class="ident" id="6972237">err</span><span class="op" id="6972240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6972243">}</span><br>
<span class="lineno"></span><span class="op" id="6972245">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
