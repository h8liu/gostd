<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/lzw</h2>
<ul>
<li><a href="/gostd/compress/lzw/reader.go.html">reader.go</a></li>
<li><a href="/gostd/compress/lzw/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/lzw/writer.go.html">writer.go</a></li>
<li><a href="/gostd/compress/lzw/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6468986">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6469041">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6469095">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6469146">package</span>&nbsp;<span class="ident" id="6469154">lzw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6469159">import</span>&nbsp;<span class="op" id="6469166">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6469169">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6469175">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6469188">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6469194">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6469205">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6469215">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6469218">var</span>&nbsp;<span class="ident" id="6469222">filenames</span>&nbsp;<span class="op" id="6469232">=</span>&nbsp;<span class="op" id="6469234">[</span><span class="op" id="6469235">]</span><span class="builtintype" id="6469236">string</span><span class="op" id="6469242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6469245">&#34;../testdata/e.txt&#34;</span><span class="op" id="6469264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6469267">&#34;../testdata/pi.txt&#34;</span><span class="op" id="6469287">,</span><br>
<span class="lineno"></span><span class="op" id="6469289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="6469292">//&nbsp;testFile&nbsp;tests&nbsp;that&nbsp;compressing&nbsp;and&nbsp;then&nbsp;decompressing&nbsp;the&nbsp;given&nbsp;file&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="6469370">//&nbsp;the&nbsp;given&nbsp;options&nbsp;yields&nbsp;equivalent&nbsp;bytes&nbsp;to&nbsp;the&nbsp;original&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6469437">func</span>&nbsp;<span class="ident" id="6469442">testFile</span><span class="op" id="6469450">(</span><span class="ident" id="6469451">t</span>&nbsp;<span class="op" id="6469453">*</span><span class="ident" id="6469454">testing</span><span class="op" id="6469461">.</span><span class="ident" id="6469462">T</span><span class="op" id="6469463">,</span>&nbsp;<span class="ident" id="6469465">fn</span>&nbsp;<span class="builtintype" id="6469468">string</span><span class="op" id="6469474">,</span>&nbsp;<span class="ident" id="6469476">order</span>&nbsp;<span class="ident" id="6469482">Order</span><span class="op" id="6469487">,</span>&nbsp;<span class="ident" id="6469489">litWidth</span>&nbsp;<span class="builtintype" id="6469498">int</span><span class="op" id="6469501">)</span>&nbsp;<span class="op" id="6469503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6469506">//&nbsp;Read&nbsp;the&nbsp;file,&nbsp;as&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469543">golden</span><span class="op" id="6469549">,</span>&nbsp;<span class="ident" id="6469551">err</span>&nbsp;<span class="op" id="6469555">:=</span>&nbsp;<span class="ident" id="6469558">os</span><span class="op" id="6469560">.</span><span class="ident" id="6469561">Open</span><span class="op" id="6469565">(</span><span class="ident" id="6469566">fn</span><span class="op" id="6469568">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469571">if</span>&nbsp;<span class="ident" id="6469574">err</span>&nbsp;<span class="op" id="6469578">!=</span>&nbsp;<span class="ident" id="6469581">nil</span>&nbsp;<span class="op" id="6469585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469589">t</span><span class="op" id="6469590">.</span><span class="ident" id="6469591">Errorf</span><span class="op" id="6469597">(</span><span class="string" id="6469598">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6469629">,</span>&nbsp;<span class="ident" id="6469631">fn</span><span class="op" id="6469633">,</span>&nbsp;<span class="ident" id="6469635">order</span><span class="op" id="6469640">,</span>&nbsp;<span class="ident" id="6469642">litWidth</span><span class="op" id="6469650">,</span>&nbsp;<span class="ident" id="6469652">err</span><span class="op" id="6469655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469659">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469670">defer</span>&nbsp;<span class="ident" id="6469676">golden</span><span class="op" id="6469682">.</span><span class="ident" id="6469683">Close</span><span class="op" id="6469688">(</span><span class="op" id="6469689">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6469693">//&nbsp;Read&nbsp;the&nbsp;file&nbsp;again,&nbsp;and&nbsp;push&nbsp;it&nbsp;through&nbsp;a&nbsp;pipe&nbsp;that&nbsp;compresses&nbsp;at&nbsp;the&nbsp;write&nbsp;end,&nbsp;and&nbsp;decompresses&nbsp;at&nbsp;the&nbsp;read&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469813">raw</span><span class="op" id="6469816">,</span>&nbsp;<span class="ident" id="6469818">err</span>&nbsp;<span class="op" id="6469822">:=</span>&nbsp;<span class="ident" id="6469825">os</span><span class="op" id="6469827">.</span><span class="ident" id="6469828">Open</span><span class="op" id="6469832">(</span><span class="ident" id="6469833">fn</span><span class="op" id="6469835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469838">if</span>&nbsp;<span class="ident" id="6469841">err</span>&nbsp;<span class="op" id="6469845">!=</span>&nbsp;<span class="ident" id="6469848">nil</span>&nbsp;<span class="op" id="6469852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469856">t</span><span class="op" id="6469857">.</span><span class="ident" id="6469858">Errorf</span><span class="op" id="6469864">(</span><span class="string" id="6469865">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6469896">,</span>&nbsp;<span class="ident" id="6469898">fn</span><span class="op" id="6469900">,</span>&nbsp;<span class="ident" id="6469902">order</span><span class="op" id="6469907">,</span>&nbsp;<span class="ident" id="6469909">litWidth</span><span class="op" id="6469917">,</span>&nbsp;<span class="ident" id="6469919">err</span><span class="op" id="6469922">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469926">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469938">piper</span><span class="op" id="6469943">,</span>&nbsp;<span class="ident" id="6469945">pipew</span>&nbsp;<span class="op" id="6469951">:=</span>&nbsp;<span class="ident" id="6469954">io</span><span class="op" id="6469956">.</span><span class="ident" id="6469957">Pipe</span><span class="op" id="6469961">(</span><span class="op" id="6469962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469965">defer</span>&nbsp;<span class="ident" id="6469971">piper</span><span class="op" id="6469976">.</span><span class="ident" id="6469977">Close</span><span class="op" id="6469982">(</span><span class="op" id="6469983">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469986">go</span>&nbsp;<span class="keyword" id="6469989">func</span><span class="op" id="6469993">(</span><span class="op" id="6469994">)</span>&nbsp;<span class="op" id="6469996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470000">defer</span>&nbsp;<span class="ident" id="6470006">raw</span><span class="op" id="6470009">.</span><span class="ident" id="6470010">Close</span><span class="op" id="6470015">(</span><span class="op" id="6470016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470020">defer</span>&nbsp;<span class="ident" id="6470026">pipew</span><span class="op" id="6470031">.</span><span class="ident" id="6470032">Close</span><span class="op" id="6470037">(</span><span class="op" id="6470038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470042">lzww</span>&nbsp;<span class="op" id="6470047">:=</span>&nbsp;<span class="ident" id="6470050">NewWriter</span><span class="op" id="6470059">(</span><span class="ident" id="6470060">pipew</span><span class="op" id="6470065">,</span>&nbsp;<span class="ident" id="6470067">order</span><span class="op" id="6470072">,</span>&nbsp;<span class="ident" id="6470074">litWidth</span><span class="op" id="6470082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470086">defer</span>&nbsp;<span class="ident" id="6470092">lzww</span><span class="op" id="6470096">.</span><span class="ident" id="6470097">Close</span><span class="op" id="6470102">(</span><span class="op" id="6470103">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470107">var</span>&nbsp;<span class="ident" id="6470111">b</span>&nbsp;<span class="op" id="6470113">[</span><span class="num" id="6470114">4096</span><span class="op" id="6470118">]</span><span class="builtintype" id="6470119">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470126">for</span>&nbsp;<span class="op" id="6470130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470135">n</span><span class="op" id="6470136">,</span>&nbsp;<span class="ident" id="6470138">err0</span>&nbsp;<span class="op" id="6470143">:=</span>&nbsp;<span class="ident" id="6470146">raw</span><span class="op" id="6470149">.</span><span class="ident" id="6470150">Read</span><span class="op" id="6470154">(</span><span class="ident" id="6470155">b</span><span class="op" id="6470156">[</span><span class="op" id="6470157">:</span><span class="op" id="6470158">]</span><span class="op" id="6470159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470164">if</span>&nbsp;<span class="ident" id="6470167">err0</span>&nbsp;<span class="op" id="6470172">!=</span>&nbsp;<span class="ident" id="6470175">nil</span>&nbsp;<span class="op" id="6470179">&amp;&amp;</span>&nbsp;<span class="ident" id="6470182">err0</span>&nbsp;<span class="op" id="6470187">!=</span>&nbsp;<span class="ident" id="6470190">io</span><span class="op" id="6470192">.</span><span class="ident" id="6470193">EOF</span>&nbsp;<span class="op" id="6470197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470203">t</span><span class="op" id="6470204">.</span><span class="ident" id="6470205">Errorf</span><span class="op" id="6470211">(</span><span class="string" id="6470212">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6470243">,</span>&nbsp;<span class="ident" id="6470245">fn</span><span class="op" id="6470247">,</span>&nbsp;<span class="ident" id="6470249">order</span><span class="op" id="6470254">,</span>&nbsp;<span class="ident" id="6470256">litWidth</span><span class="op" id="6470264">,</span>&nbsp;<span class="ident" id="6470266">err0</span><span class="op" id="6470270">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470276">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470291">_</span><span class="op" id="6470292">,</span>&nbsp;<span class="ident" id="6470294">err1</span>&nbsp;<span class="op" id="6470299">:=</span>&nbsp;<span class="ident" id="6470302">lzww</span><span class="op" id="6470306">.</span><span class="ident" id="6470307">Write</span><span class="op" id="6470312">(</span><span class="ident" id="6470313">b</span><span class="op" id="6470314">[</span><span class="op" id="6470315">:</span><span class="ident" id="6470316">n</span><span class="op" id="6470317">]</span><span class="op" id="6470318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470323">if</span>&nbsp;<span class="ident" id="6470326">err1</span>&nbsp;<span class="op" id="6470331">!=</span>&nbsp;<span class="ident" id="6470334">nil</span>&nbsp;<span class="op" id="6470338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470344">t</span><span class="op" id="6470345">.</span><span class="ident" id="6470346">Errorf</span><span class="op" id="6470352">(</span><span class="string" id="6470353">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6470384">,</span>&nbsp;<span class="ident" id="6470386">fn</span><span class="op" id="6470388">,</span>&nbsp;<span class="ident" id="6470390">order</span><span class="op" id="6470395">,</span>&nbsp;<span class="ident" id="6470397">litWidth</span><span class="op" id="6470405">,</span>&nbsp;<span class="ident" id="6470407">err1</span><span class="op" id="6470411">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470417">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470432">if</span>&nbsp;<span class="ident" id="6470435">err0</span>&nbsp;<span class="op" id="6470440">==</span>&nbsp;<span class="ident" id="6470443">io</span><span class="op" id="6470445">.</span><span class="ident" id="6470446">EOF</span>&nbsp;<span class="op" id="6470450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470456">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470465">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470472">}</span><span class="op" id="6470473">(</span><span class="op" id="6470474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470477">lzwr</span>&nbsp;<span class="op" id="6470482">:=</span>&nbsp;<span class="ident" id="6470485">NewReader</span><span class="op" id="6470494">(</span><span class="ident" id="6470495">piper</span><span class="op" id="6470500">,</span>&nbsp;<span class="ident" id="6470502">order</span><span class="op" id="6470507">,</span>&nbsp;<span class="ident" id="6470509">litWidth</span><span class="op" id="6470517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470520">defer</span>&nbsp;<span class="ident" id="6470526">lzwr</span><span class="op" id="6470530">.</span><span class="ident" id="6470531">Close</span><span class="op" id="6470536">(</span><span class="op" id="6470537">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6470541">//&nbsp;Compare&nbsp;the&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470562">b0</span><span class="op" id="6470564">,</span>&nbsp;<span class="ident" id="6470566">err0</span>&nbsp;<span class="op" id="6470571">:=</span>&nbsp;<span class="ident" id="6470574">ioutil</span><span class="op" id="6470580">.</span><span class="ident" id="6470581">ReadAll</span><span class="op" id="6470588">(</span><span class="ident" id="6470589">golden</span><span class="op" id="6470595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470598">b1</span><span class="op" id="6470600">,</span>&nbsp;<span class="ident" id="6470602">err1</span>&nbsp;<span class="op" id="6470607">:=</span>&nbsp;<span class="ident" id="6470610">ioutil</span><span class="op" id="6470616">.</span><span class="ident" id="6470617">ReadAll</span><span class="op" id="6470624">(</span><span class="ident" id="6470625">lzwr</span><span class="op" id="6470629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470632">if</span>&nbsp;<span class="ident" id="6470635">err0</span>&nbsp;<span class="op" id="6470640">!=</span>&nbsp;<span class="ident" id="6470643">nil</span>&nbsp;<span class="op" id="6470647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470651">t</span><span class="op" id="6470652">.</span><span class="ident" id="6470653">Errorf</span><span class="op" id="6470659">(</span><span class="string" id="6470660">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6470691">,</span>&nbsp;<span class="ident" id="6470693">fn</span><span class="op" id="6470695">,</span>&nbsp;<span class="ident" id="6470697">order</span><span class="op" id="6470702">,</span>&nbsp;<span class="ident" id="6470704">litWidth</span><span class="op" id="6470712">,</span>&nbsp;<span class="ident" id="6470714">err0</span><span class="op" id="6470718">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470722">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470733">if</span>&nbsp;<span class="ident" id="6470736">err1</span>&nbsp;<span class="op" id="6470741">!=</span>&nbsp;<span class="ident" id="6470744">nil</span>&nbsp;<span class="op" id="6470748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470752">t</span><span class="op" id="6470753">.</span><span class="ident" id="6470754">Errorf</span><span class="op" id="6470760">(</span><span class="string" id="6470761">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6470792">,</span>&nbsp;<span class="ident" id="6470794">fn</span><span class="op" id="6470796">,</span>&nbsp;<span class="ident" id="6470798">order</span><span class="op" id="6470803">,</span>&nbsp;<span class="ident" id="6470805">litWidth</span><span class="op" id="6470813">,</span>&nbsp;<span class="ident" id="6470815">err1</span><span class="op" id="6470819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470823">return</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470834">if</span>&nbsp;<span class="builtinfunc" id="6470837">len</span><span class="op" id="6470840">(</span><span class="ident" id="6470841">b1</span><span class="op" id="6470843">)</span>&nbsp;<span class="op" id="6470845">!=</span>&nbsp;<span class="builtinfunc" id="6470848">len</span><span class="op" id="6470851">(</span><span class="ident" id="6470852">b0</span><span class="op" id="6470854">)</span>&nbsp;<span class="op" id="6470856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470860">t</span><span class="op" id="6470861">.</span><span class="ident" id="6470862">Errorf</span><span class="op" id="6470868">(</span><span class="string" id="6470869">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;length&nbsp;mismatch&nbsp;%d&nbsp;!=&nbsp;%d&#34;</span><span class="op" id="6470922">,</span>&nbsp;<span class="ident" id="6470924">fn</span><span class="op" id="6470926">,</span>&nbsp;<span class="ident" id="6470928">order</span><span class="op" id="6470933">,</span>&nbsp;<span class="ident" id="6470935">litWidth</span><span class="op" id="6470943">,</span>&nbsp;<span class="builtinfunc" id="6470945">len</span><span class="op" id="6470948">(</span><span class="ident" id="6470949">b1</span><span class="op" id="6470951">)</span><span class="op" id="6470952">,</span>&nbsp;<span class="builtinfunc" id="6470954">len</span><span class="op" id="6470957">(</span><span class="ident" id="6470958">b0</span><span class="op" id="6470960">)</span><span class="op" id="6470961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470965">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470973">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470976">for</span>&nbsp;<span class="ident" id="6470980">i</span>&nbsp;<span class="op" id="6470982">:=</span>&nbsp;<span class="num" id="6470985">0</span><span class="op" id="6470986">;</span>&nbsp;<span class="ident" id="6470988">i</span>&nbsp;<span class="op" id="6470990">&lt;</span>&nbsp;<span class="builtinfunc" id="6470992">len</span><span class="op" id="6470995">(</span><span class="ident" id="6470996">b0</span><span class="op" id="6470998">)</span><span class="op" id="6470999">;</span>&nbsp;<span class="ident" id="6471001">i</span><span class="op" id="6471002">++</span>&nbsp;<span class="op" id="6471005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471009">if</span>&nbsp;<span class="ident" id="6471012">b1</span><span class="op" id="6471014">[</span><span class="ident" id="6471015">i</span><span class="op" id="6471016">]</span>&nbsp;<span class="op" id="6471018">!=</span>&nbsp;<span class="ident" id="6471021">b0</span><span class="op" id="6471023">[</span><span class="ident" id="6471024">i</span><span class="op" id="6471025">]</span>&nbsp;<span class="op" id="6471027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471032">t</span><span class="op" id="6471033">.</span><span class="ident" id="6471034">Errorf</span><span class="op" id="6471040">(</span><span class="string" id="6471041">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;mismatch&nbsp;at&nbsp;%d,&nbsp;0x%02x&nbsp;!=&nbsp;0x%02x\n&#34;</span><span class="op" id="6471104">,</span>&nbsp;<span class="ident" id="6471106">fn</span><span class="op" id="6471108">,</span>&nbsp;<span class="ident" id="6471110">order</span><span class="op" id="6471115">,</span>&nbsp;<span class="ident" id="6471117">litWidth</span><span class="op" id="6471125">,</span>&nbsp;<span class="ident" id="6471127">i</span><span class="op" id="6471128">,</span>&nbsp;<span class="ident" id="6471130">b1</span><span class="op" id="6471132">[</span><span class="ident" id="6471133">i</span><span class="op" id="6471134">]</span><span class="op" id="6471135">,</span>&nbsp;<span class="ident" id="6471137">b0</span><span class="op" id="6471139">[</span><span class="ident" id="6471140">i</span><span class="op" id="6471141">]</span><span class="op" id="6471142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471147">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471156">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471159">}</span><br>
<span class="lineno"></span><span class="op" id="6471161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6471164">func</span>&nbsp;<span class="ident" id="6471169">TestWriter</span><span class="op" id="6471179">(</span><span class="ident" id="6471180">t</span>&nbsp;<span class="op" id="6471182">*</span><span class="ident" id="6471183">testing</span><span class="op" id="6471190">.</span><span class="ident" id="6471191">T</span><span class="op" id="6471192">)</span>&nbsp;<span class="op" id="6471194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471197">for</span>&nbsp;<span class="ident" id="6471201">_</span><span class="op" id="6471202">,</span>&nbsp;<span class="ident" id="6471204">filename</span>&nbsp;<span class="op" id="6471213">:=</span>&nbsp;<span class="keyword" id="6471216">range</span>&nbsp;<span class="ident" id="6471222">filenames</span>&nbsp;<span class="op" id="6471232">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471236">for</span>&nbsp;<span class="ident" id="6471240">_</span><span class="op" id="6471241">,</span>&nbsp;<span class="ident" id="6471243">order</span>&nbsp;<span class="op" id="6471249">:=</span>&nbsp;<span class="keyword" id="6471252">range</span>&nbsp;<span class="op" id="6471258">[</span><span class="op" id="6471259">...</span><span class="op" id="6471262">]</span><span class="ident" id="6471263">Order</span><span class="op" id="6471268">{</span><span class="ident" id="6471269">LSB</span><span class="op" id="6471272">,</span>&nbsp;<span class="ident" id="6471274">MSB</span><span class="op" id="6471277">}</span>&nbsp;<span class="op" id="6471279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6471284">//&nbsp;The&nbsp;test&nbsp;data&nbsp;&#34;2.71828&nbsp;etcetera&#34;&nbsp;is&nbsp;ASCII&nbsp;text&nbsp;requiring&nbsp;at&nbsp;least&nbsp;6&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471364">for</span>&nbsp;<span class="ident" id="6471368">_</span><span class="op" id="6471369">,</span>&nbsp;<span class="ident" id="6471371">litWidth</span>&nbsp;<span class="op" id="6471380">:=</span>&nbsp;<span class="keyword" id="6471383">range</span>&nbsp;<span class="op" id="6471389">[</span><span class="op" id="6471390">...</span><span class="op" id="6471393">]</span><span class="builtintype" id="6471394">int</span><span class="op" id="6471397">{</span><span class="num" id="6471398">6</span><span class="op" id="6471399">,</span>&nbsp;<span class="num" id="6471401">7</span><span class="op" id="6471402">,</span>&nbsp;<span class="num" id="6471404">8</span><span class="op" id="6471405">}</span>&nbsp;<span class="op" id="6471407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471413">testFile</span><span class="op" id="6471421">(</span><span class="ident" id="6471422">t</span><span class="op" id="6471423">,</span>&nbsp;<span class="ident" id="6471425">filename</span><span class="op" id="6471433">,</span>&nbsp;<span class="ident" id="6471435">order</span><span class="op" id="6471440">,</span>&nbsp;<span class="ident" id="6471442">litWidth</span><span class="op" id="6471450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471455">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471462">}</span><br>
<span class="lineno"></span><span class="op" id="6471464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6471467">func</span>&nbsp;<span class="ident" id="6471472">TestWriterReturnValues</span><span class="op" id="6471494">(</span><span class="ident" id="6471495">t</span>&nbsp;<span class="op" id="6471497">*</span><span class="ident" id="6471498">testing</span><span class="op" id="6471505">.</span><span class="ident" id="6471506">T</span><span class="op" id="6471507">)</span>&nbsp;<span class="op" id="6471509">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471512">w</span>&nbsp;<span class="op" id="6471514">:=</span>&nbsp;<span class="ident" id="6471517">NewWriter</span><span class="op" id="6471526">(</span><span class="ident" id="6471527">ioutil</span><span class="op" id="6471533">.</span><span class="ident" id="6471534">Discard</span><span class="op" id="6471541">,</span>&nbsp;<span class="ident" id="6471543">LSB</span><span class="op" id="6471546">,</span>&nbsp;<span class="num" id="6471548">8</span><span class="op" id="6471549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471552">n</span><span class="op" id="6471553">,</span>&nbsp;<span class="ident" id="6471555">err</span>&nbsp;<span class="op" id="6471559">:=</span>&nbsp;<span class="ident" id="6471562">w</span><span class="op" id="6471563">.</span><span class="ident" id="6471564">Write</span><span class="op" id="6471569">(</span><span class="op" id="6471570">[</span><span class="op" id="6471571">]</span><span class="builtintype" id="6471572">byte</span><span class="op" id="6471576">(</span><span class="string" id="6471577">&#34;asdf&#34;</span><span class="op" id="6471583">)</span><span class="op" id="6471584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471587">if</span>&nbsp;<span class="ident" id="6471590">n</span>&nbsp;<span class="op" id="6471592">!=</span>&nbsp;<span class="num" id="6471595">4</span>&nbsp;<span class="op" id="6471597">||</span>&nbsp;<span class="ident" id="6471600">err</span>&nbsp;<span class="op" id="6471604">!=</span>&nbsp;<span class="ident" id="6471607">nil</span>&nbsp;<span class="op" id="6471611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471615">t</span><span class="op" id="6471616">.</span><span class="ident" id="6471617">Errorf</span><span class="op" id="6471623">(</span><span class="string" id="6471624">&#34;got&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;4,&nbsp;nil&#34;</span><span class="op" id="6471649">,</span>&nbsp;<span class="ident" id="6471651">n</span><span class="op" id="6471652">,</span>&nbsp;<span class="ident" id="6471654">err</span><span class="op" id="6471657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471660">}</span><br>
<span class="lineno">105</span><span class="op" id="6471662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6471665">func</span>&nbsp;<span class="ident" id="6471670">benchmarkEncoder</span><span class="op" id="6471686">(</span><span class="ident" id="6471687">b</span>&nbsp;<span class="op" id="6471689">*</span><span class="ident" id="6471690">testing</span><span class="op" id="6471697">.</span><span class="ident" id="6471698">B</span><span class="op" id="6471699">,</span>&nbsp;<span class="ident" id="6471701">n</span>&nbsp;<span class="builtintype" id="6471703">int</span><span class="op" id="6471706">)</span>&nbsp;<span class="op" id="6471708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471711">b</span><span class="op" id="6471712">.</span><span class="ident" id="6471713">StopTimer</span><span class="op" id="6471722">(</span><span class="op" id="6471723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471726">b</span><span class="op" id="6471727">.</span><span class="ident" id="6471728">SetBytes</span><span class="op" id="6471736">(</span><span class="ident" id="6471737">int64</span><span class="op" id="6471742">(</span><span class="ident" id="6471743">n</span><span class="op" id="6471744">)</span><span class="op" id="6471745">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471748">buf0</span><span class="op" id="6471752">,</span>&nbsp;<span class="ident" id="6471754">err</span>&nbsp;<span class="op" id="6471758">:=</span>&nbsp;<span class="ident" id="6471761">ioutil</span><span class="op" id="6471767">.</span><span class="ident" id="6471768">ReadFile</span><span class="op" id="6471776">(</span><span class="string" id="6471777">&#34;../testdata/e.txt&#34;</span><span class="op" id="6471796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471799">if</span>&nbsp;<span class="ident" id="6471802">err</span>&nbsp;<span class="op" id="6471806">!=</span>&nbsp;<span class="ident" id="6471809">nil</span>&nbsp;<span class="op" id="6471813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471817">b</span><span class="op" id="6471818">.</span><span class="ident" id="6471819">Fatal</span><span class="op" id="6471824">(</span><span class="ident" id="6471825">err</span><span class="op" id="6471828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471834">if</span>&nbsp;<span class="builtinfunc" id="6471837">len</span><span class="op" id="6471840">(</span><span class="ident" id="6471841">buf0</span><span class="op" id="6471845">)</span>&nbsp;<span class="op" id="6471847">==</span>&nbsp;<span class="num" id="6471850">0</span>&nbsp;<span class="op" id="6471852">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471856">b</span><span class="op" id="6471857">.</span><span class="ident" id="6471858">Fatalf</span><span class="op" id="6471864">(</span><span class="string" id="6471865">&#34;test&nbsp;file&nbsp;has&nbsp;no&nbsp;data&#34;</span><span class="op" id="6471888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471894">buf1</span>&nbsp;<span class="op" id="6471899">:=</span>&nbsp;<span class="builtinfunc" id="6471902">make</span><span class="op" id="6471906">(</span><span class="op" id="6471907">[</span><span class="op" id="6471908">]</span><span class="builtintype" id="6471909">byte</span><span class="op" id="6471913">,</span>&nbsp;<span class="ident" id="6471915">n</span><span class="op" id="6471916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471919">for</span>&nbsp;<span class="ident" id="6471923">i</span>&nbsp;<span class="op" id="6471925">:=</span>&nbsp;<span class="num" id="6471928">0</span><span class="op" id="6471929">;</span>&nbsp;<span class="ident" id="6471931">i</span>&nbsp;<span class="op" id="6471933">&lt;</span>&nbsp;<span class="ident" id="6471935">n</span><span class="op" id="6471936">;</span>&nbsp;<span class="ident" id="6471938">i</span>&nbsp;<span class="op" id="6471940">+=</span>&nbsp;<span class="builtinfunc" id="6471943">len</span><span class="op" id="6471946">(</span><span class="ident" id="6471947">buf0</span><span class="op" id="6471951">)</span>&nbsp;<span class="op" id="6471953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471957">if</span>&nbsp;<span class="builtinfunc" id="6471960">len</span><span class="op" id="6471963">(</span><span class="ident" id="6471964">buf0</span><span class="op" id="6471968">)</span>&nbsp;<span class="op" id="6471970">&gt;</span>&nbsp;<span class="ident" id="6471972">n</span><span class="op" id="6471973">-</span><span class="ident" id="6471974">i</span>&nbsp;<span class="op" id="6471976">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471981">buf0</span>&nbsp;<span class="op" id="6471986">=</span>&nbsp;<span class="ident" id="6471988">buf0</span><span class="op" id="6471992">[</span><span class="op" id="6471993">:</span><span class="ident" id="6471994">n</span><span class="op" id="6471995">-</span><span class="ident" id="6471996">i</span><span class="op" id="6471997">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6472005">copy</span><span class="op" id="6472009">(</span><span class="ident" id="6472010">buf1</span><span class="op" id="6472014">[</span><span class="ident" id="6472015">i</span><span class="op" id="6472016">:</span><span class="op" id="6472017">]</span><span class="op" id="6472018">,</span>&nbsp;<span class="ident" id="6472020">buf0</span><span class="op" id="6472024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472030">buf0</span>&nbsp;<span class="op" id="6472035">=</span>&nbsp;<span class="ident" id="6472037">nil</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472042">runtime</span><span class="op" id="6472049">.</span><span class="ident" id="6472050">GC</span><span class="op" id="6472052">(</span><span class="op" id="6472053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472056">b</span><span class="op" id="6472057">.</span><span class="ident" id="6472058">StartTimer</span><span class="op" id="6472068">(</span><span class="op" id="6472069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472072">for</span>&nbsp;<span class="ident" id="6472076">i</span>&nbsp;<span class="op" id="6472078">:=</span>&nbsp;<span class="num" id="6472081">0</span><span class="op" id="6472082">;</span>&nbsp;<span class="ident" id="6472084">i</span>&nbsp;<span class="op" id="6472086">&lt;</span>&nbsp;<span class="ident" id="6472088">b</span><span class="op" id="6472089">.</span><span class="ident" id="6472090">N</span><span class="op" id="6472091">;</span>&nbsp;<span class="ident" id="6472093">i</span><span class="op" id="6472094">++</span>&nbsp;<span class="op" id="6472097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472101">w</span>&nbsp;<span class="op" id="6472103">:=</span>&nbsp;<span class="ident" id="6472106">NewWriter</span><span class="op" id="6472115">(</span><span class="ident" id="6472116">ioutil</span><span class="op" id="6472122">.</span><span class="ident" id="6472123">Discard</span><span class="op" id="6472130">,</span>&nbsp;<span class="ident" id="6472132">LSB</span><span class="op" id="6472135">,</span>&nbsp;<span class="num" id="6472137">8</span><span class="op" id="6472138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472142">w</span><span class="op" id="6472143">.</span><span class="ident" id="6472144">Write</span><span class="op" id="6472149">(</span><span class="ident" id="6472150">buf1</span><span class="op" id="6472154">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472158">w</span><span class="op" id="6472159">.</span><span class="ident" id="6472160">Close</span><span class="op" id="6472165">(</span><span class="op" id="6472166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472169">}</span><br>
<span class="lineno"></span><span class="op" id="6472171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6472174">func</span>&nbsp;<span class="ident" id="6472179">BenchmarkEncoder1e4</span><span class="op" id="6472198">(</span><span class="ident" id="6472199">b</span>&nbsp;<span class="op" id="6472201">*</span><span class="ident" id="6472202">testing</span><span class="op" id="6472209">.</span><span class="ident" id="6472210">B</span><span class="op" id="6472211">)</span>&nbsp;<span class="op" id="6472213">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472216">benchmarkEncoder</span><span class="op" id="6472232">(</span><span class="ident" id="6472233">b</span><span class="op" id="6472234">,</span>&nbsp;<span class="num" id="6472236">1e4</span><span class="op" id="6472239">)</span><br>
<span class="lineno"></span><span class="op" id="6472241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6472244">func</span>&nbsp;<span class="ident" id="6472249">BenchmarkEncoder1e5</span><span class="op" id="6472268">(</span><span class="ident" id="6472269">b</span>&nbsp;<span class="op" id="6472271">*</span><span class="ident" id="6472272">testing</span><span class="op" id="6472279">.</span><span class="ident" id="6472280">B</span><span class="op" id="6472281">)</span>&nbsp;<span class="op" id="6472283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472286">benchmarkEncoder</span><span class="op" id="6472302">(</span><span class="ident" id="6472303">b</span><span class="op" id="6472304">,</span>&nbsp;<span class="num" id="6472306">1e5</span><span class="op" id="6472309">)</span><br>
<span class="lineno">140</span><span class="op" id="6472311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6472314">func</span>&nbsp;<span class="ident" id="6472319">BenchmarkEncoder1e6</span><span class="op" id="6472338">(</span><span class="ident" id="6472339">b</span>&nbsp;<span class="op" id="6472341">*</span><span class="ident" id="6472342">testing</span><span class="op" id="6472349">.</span><span class="ident" id="6472350">B</span><span class="op" id="6472351">)</span>&nbsp;<span class="op" id="6472353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472356">benchmarkEncoder</span><span class="op" id="6472372">(</span><span class="ident" id="6472373">b</span><span class="op" id="6472374">,</span>&nbsp;<span class="num" id="6472376">1e6</span><span class="op" id="6472379">)</span><br>
<span class="lineno"></span><span class="op" id="6472381">}</span>
</div>
</body>
</html>
