<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4644211">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4644266">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4644320">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4644371">package</span>&nbsp;<span class="ident" id="4644379">parse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4644386">import</span>&nbsp;<span class="op" id="4644393">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4644396">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4644403">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4644414">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4644425">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4644440">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4644443">//&nbsp;item&nbsp;represents&nbsp;a&nbsp;token&nbsp;or&nbsp;text&nbsp;string&nbsp;returned&nbsp;from&nbsp;the&nbsp;scanner.</span><br>
<span class="lineno">15</span><span class="keyword" id="4644512">type</span>&nbsp;<span class="ident" id="4644517">item</span>&nbsp;<span class="keyword" id="4644522">struct</span>&nbsp;<span class="op" id="4644529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4644532">typ</span>&nbsp;<span class="ident" id="4644536">itemType</span>&nbsp;<span class="comment" id="4644545">//&nbsp;The&nbsp;type&nbsp;of&nbsp;this&nbsp;item.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4644572">pos</span>&nbsp;<span class="ident" id="4644576">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4644585">//&nbsp;The&nbsp;starting&nbsp;position,&nbsp;in&nbsp;bytes,&nbsp;of&nbsp;this&nbsp;item&nbsp;in&nbsp;the&nbsp;input&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4644656">val</span>&nbsp;<span class="builtintype" id="4644660">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4644669">//&nbsp;The&nbsp;value&nbsp;of&nbsp;this&nbsp;item.</span><br>
<span class="lineno"></span><span class="op" id="4644696">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="4644699">func</span>&nbsp;<span class="op" id="4644704">(</span><span class="ident" id="4644705">i</span>&nbsp;<span class="ident" id="4644707">item</span><span class="op" id="4644711">)</span>&nbsp;<span class="ident" id="4644713">String</span><span class="op" id="4644719">(</span><span class="op" id="4644720">)</span>&nbsp;<span class="builtintype" id="4644722">string</span>&nbsp;<span class="op" id="4644729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4644732">switch</span>&nbsp;<span class="op" id="4644739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4644742">case</span>&nbsp;<span class="ident" id="4644747">i</span><span class="op" id="4644748">.</span><span class="ident" id="4644749">typ</span>&nbsp;<span class="op" id="4644753">==</span>&nbsp;<span class="ident" id="4644756">itemEOF</span><span class="op" id="4644763">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4644767">return</span>&nbsp;<span class="string" id="4644774">&#34;EOF&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4644781">case</span>&nbsp;<span class="ident" id="4644786">i</span><span class="op" id="4644787">.</span><span class="ident" id="4644788">typ</span>&nbsp;<span class="op" id="4644792">==</span>&nbsp;<span class="ident" id="4644795">itemError</span><span class="op" id="4644804">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4644808">return</span>&nbsp;<span class="ident" id="4644815">i</span><span class="op" id="4644816">.</span><span class="ident" id="4644817">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4644822">case</span>&nbsp;<span class="ident" id="4644827">i</span><span class="op" id="4644828">.</span><span class="ident" id="4644829">typ</span>&nbsp;<span class="op" id="4644833">&gt;</span>&nbsp;<span class="ident" id="4644835">itemKeyword</span><span class="op" id="4644846">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4644850">return</span>&nbsp;<span class="ident" id="4644857">fmt</span><span class="op" id="4644860">.</span><span class="ident" id="4644861">Sprintf</span><span class="op" id="4644868">(</span><span class="string" id="4644869">&#34;&lt;%s&gt;&#34;</span><span class="op" id="4644875">,</span>&nbsp;<span class="ident" id="4644877">i</span><span class="op" id="4644878">.</span><span class="ident" id="4644879">val</span><span class="op" id="4644882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4644885">case</span>&nbsp;<span class="builtinfunc" id="4644890">len</span><span class="op" id="4644893">(</span><span class="ident" id="4644894">i</span><span class="op" id="4644895">.</span><span class="ident" id="4644896">val</span><span class="op" id="4644899">)</span>&nbsp;<span class="op" id="4644901">&gt;</span>&nbsp;<span class="num" id="4644903">10</span><span class="op" id="4644905">:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4644909">return</span>&nbsp;<span class="ident" id="4644916">fmt</span><span class="op" id="4644919">.</span><span class="ident" id="4644920">Sprintf</span><span class="op" id="4644927">(</span><span class="string" id="4644928">&#34;%.10q...&#34;</span><span class="op" id="4644938">,</span>&nbsp;<span class="ident" id="4644940">i</span><span class="op" id="4644941">.</span><span class="ident" id="4644942">val</span><span class="op" id="4644945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4644948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4644951">return</span>&nbsp;<span class="ident" id="4644958">fmt</span><span class="op" id="4644961">.</span><span class="ident" id="4644962">Sprintf</span><span class="op" id="4644969">(</span><span class="string" id="4644970">&#34;%q&#34;</span><span class="op" id="4644974">,</span>&nbsp;<span class="ident" id="4644976">i</span><span class="op" id="4644977">.</span><span class="ident" id="4644978">val</span><span class="op" id="4644981">)</span><br>
<span class="lineno"></span><span class="op" id="4644983">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="4644986">//&nbsp;itemType&nbsp;identifies&nbsp;the&nbsp;type&nbsp;of&nbsp;lex&nbsp;items.</span><br>
<span class="lineno"></span><span class="keyword" id="4645032">type</span>&nbsp;<span class="ident" id="4645037">itemType</span>&nbsp;<span class="builtintype" id="4645046">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4645051">const</span>&nbsp;<span class="op" id="4645057">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645060">itemError</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4645077">itemType</span>&nbsp;<span class="op" id="4645086">=</span>&nbsp;<span class="ident" id="4645088">iota</span>&nbsp;<span class="comment" id="4645093">//&nbsp;error&nbsp;occurred;&nbsp;value&nbsp;is&nbsp;text&nbsp;of&nbsp;error</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645136">itemBool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4645169">//&nbsp;boolean&nbsp;constant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645190">itemChar</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4645223">//&nbsp;printable&nbsp;ASCII&nbsp;character;&nbsp;grab&nbsp;bag&nbsp;for&nbsp;comma&nbsp;etc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645278">itemCharConstant</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4645311">//&nbsp;character&nbsp;constant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645334">itemComplex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4645367">//&nbsp;complex&nbsp;constant&nbsp;(1+2i);&nbsp;imaginary&nbsp;is&nbsp;just&nbsp;a&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645423">itemColonEquals</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4645456">//&nbsp;colon-equals&nbsp;(&#39;:=&#39;)&nbsp;introducing&nbsp;a&nbsp;declaration</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645506">itemEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645515">itemField</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4645530">//&nbsp;alphanumeric&nbsp;identifier&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645576">itemIdentifier</span>&nbsp;<span class="comment" id="4645591">//&nbsp;alphanumeric&nbsp;identifier&nbsp;not&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645641">itemLeftDelim</span>&nbsp;&nbsp;<span class="comment" id="4645656">//&nbsp;left&nbsp;action&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645682">itemLeftParen</span>&nbsp;&nbsp;<span class="comment" id="4645697">//&nbsp;&#39;(&#39;&nbsp;inside&nbsp;action</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645719">itemNumber</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4645734">//&nbsp;simple&nbsp;number,&nbsp;including&nbsp;imaginary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645773">itemPipe</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4645788">//&nbsp;pipe&nbsp;symbol</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645804">itemRawString</span>&nbsp;&nbsp;<span class="comment" id="4645819">//&nbsp;raw&nbsp;quoted&nbsp;string&nbsp;(includes&nbsp;quotes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645859">itemRightDelim</span>&nbsp;<span class="comment" id="4645874">//&nbsp;right&nbsp;action&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645901">itemRightParen</span>&nbsp;<span class="comment" id="4645916">//&nbsp;&#39;)&#39;&nbsp;inside&nbsp;action</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645938">itemSpace</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4645953">//&nbsp;run&nbsp;of&nbsp;spaces&nbsp;separating&nbsp;arguments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4645992">itemString</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4646007">//&nbsp;quoted&nbsp;string&nbsp;(includes&nbsp;quotes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4646043">itemText</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4646058">//&nbsp;plain&nbsp;text</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4646073">itemVariable</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4646088">//&nbsp;variable&nbsp;starting&nbsp;with&nbsp;&#39;$&#39;,&nbsp;such&nbsp;as&nbsp;&#39;$&#39;&nbsp;or&nbsp;&nbsp;&#39;$1&#39;&nbsp;or&nbsp;&#39;$hello&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4646153">//&nbsp;Keywords&nbsp;appear&nbsp;after&nbsp;all&nbsp;the&nbsp;rest.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4646193">itemKeyword</span>&nbsp;&nbsp;<span class="comment" id="4646206">//&nbsp;used&nbsp;only&nbsp;to&nbsp;delimit&nbsp;the&nbsp;keywords</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4646244">itemDot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4646257">//&nbsp;the&nbsp;cursor,&nbsp;spelled&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4646285">itemDefine</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4646298">//&nbsp;define&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4646317">itemElse</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4646330">//&nbsp;else&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4646347">itemEnd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4646360">//&nbsp;end&nbsp;keyword</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4646376">itemIf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4646389">//&nbsp;if&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4646404">itemNil</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4646417">//&nbsp;the&nbsp;untyped&nbsp;nil&nbsp;constant,&nbsp;easiest&nbsp;to&nbsp;treat&nbsp;as&nbsp;a&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4646477">itemRange</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4646490">//&nbsp;range&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4646508">itemTemplate</span>&nbsp;<span class="comment" id="4646521">//&nbsp;template&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4646542">itemWith</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4646555">//&nbsp;with&nbsp;keyword</span><br>
<span class="lineno">70</span><span class="op" id="4646571">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4646574">var</span>&nbsp;<span class="ident" id="4646578">key</span>&nbsp;<span class="op" id="4646582">=</span>&nbsp;<span class="keyword" id="4646584">map</span><span class="op" id="4646587">[</span><span class="builtintype" id="4646588">string</span><span class="op" id="4646594">]</span><span class="ident" id="4646595">itemType</span><span class="op" id="4646603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4646606">&#34;.&#34;</span><span class="op" id="4646609">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4646618">itemDot</span><span class="op" id="4646625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4646628">&#34;define&#34;</span><span class="op" id="4646636">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4646640">itemDefine</span><span class="op" id="4646650">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4646653">&#34;else&#34;</span><span class="op" id="4646659">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4646665">itemElse</span><span class="op" id="4646673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4646676">&#34;end&#34;</span><span class="op" id="4646681">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4646688">itemEnd</span><span class="op" id="4646695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4646698">&#34;if&#34;</span><span class="op" id="4646702">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4646710">itemIf</span><span class="op" id="4646716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4646719">&#34;range&#34;</span><span class="op" id="4646726">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4646731">itemRange</span><span class="op" id="4646740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4646743">&#34;nil&#34;</span><span class="op" id="4646748">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4646755">itemNil</span><span class="op" id="4646762">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4646765">&#34;template&#34;</span><span class="op" id="4646775">:</span>&nbsp;<span class="ident" id="4646777">itemTemplate</span><span class="op" id="4646789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4646792">&#34;with&#34;</span><span class="op" id="4646798">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4646804">itemWith</span><span class="op" id="4646812">,</span><br>
<span class="lineno"></span><span class="op" id="4646814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4646817">const</span>&nbsp;<span class="ident" id="4646823">eof</span>&nbsp;<span class="op" id="4646827">=</span>&nbsp;<span class="op" id="4646829">-</span><span class="num" id="4646830">1</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="comment" id="4646833">//&nbsp;stateFn&nbsp;represents&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;scanner&nbsp;as&nbsp;a&nbsp;function&nbsp;that&nbsp;returns&nbsp;the&nbsp;next&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="4646923">type</span>&nbsp;<span class="ident" id="4646928">stateFn</span>&nbsp;<span class="keyword" id="4646936">func</span><span class="op" id="4646940">(</span><span class="op" id="4646941">*</span><span class="ident" id="4646942">lexer</span><span class="op" id="4646947">)</span>&nbsp;<span class="ident" id="4646949">stateFn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4646958">//&nbsp;lexer&nbsp;holds&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;scanner.</span><br>
<span class="lineno">90</span><span class="keyword" id="4646999">type</span>&nbsp;<span class="ident" id="4647004">lexer</span>&nbsp;<span class="keyword" id="4647010">struct</span>&nbsp;<span class="op" id="4647017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4647020">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4647031">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4647041">//&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;input;&nbsp;used&nbsp;only&nbsp;for&nbsp;error&nbsp;reports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4647096">input</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4647107">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4647117">//&nbsp;the&nbsp;string&nbsp;being&nbsp;scanned</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4647146">leftDelim</span>&nbsp;&nbsp;<span class="builtintype" id="4647157">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4647167">//&nbsp;start&nbsp;of&nbsp;action</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4647187">rightDelim</span>&nbsp;<span class="builtintype" id="4647198">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4647208">//&nbsp;end&nbsp;of&nbsp;action</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4647226">state</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4647237">stateFn</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4647247">//&nbsp;the&nbsp;next&nbsp;lexing&nbsp;function&nbsp;to&nbsp;enter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4647285">pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4647296">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4647306">//&nbsp;current&nbsp;position&nbsp;in&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4647340">start</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4647351">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4647361">//&nbsp;start&nbsp;position&nbsp;of&nbsp;this&nbsp;item</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4647393">width</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4647404">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4647414">//&nbsp;width&nbsp;of&nbsp;last&nbsp;rune&nbsp;read&nbsp;from&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4647453">lastPos</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4647464">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4647474">//&nbsp;position&nbsp;of&nbsp;most&nbsp;recent&nbsp;item&nbsp;returned&nbsp;by&nbsp;nextItem</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4647528">items</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647539">chan</span>&nbsp;<span class="ident" id="4647544">item</span>&nbsp;<span class="comment" id="4647549">//&nbsp;channel&nbsp;of&nbsp;scanned&nbsp;items</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4647578">parenDepth</span>&nbsp;<span class="builtintype" id="4647589">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4647599">//&nbsp;nesting&nbsp;depth&nbsp;of&nbsp;(&nbsp;)&nbsp;exprs</span><br>
<span class="lineno"></span><span class="op" id="4647629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4647632">//&nbsp;next&nbsp;returns&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno">105</span><span class="keyword" id="4647676">func</span>&nbsp;<span class="op" id="4647681">(</span><span class="ident" id="4647682">l</span>&nbsp;<span class="op" id="4647684">*</span><span class="ident" id="4647685">lexer</span><span class="op" id="4647690">)</span>&nbsp;<span class="ident" id="4647692">next</span><span class="op" id="4647696">(</span><span class="op" id="4647697">)</span>&nbsp;<span class="builtintype" id="4647699">rune</span>&nbsp;<span class="op" id="4647704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4647707">if</span>&nbsp;<span class="builtintype" id="4647710">int</span><span class="op" id="4647713">(</span><span class="ident" id="4647714">l</span><span class="op" id="4647715">.</span><span class="ident" id="4647716">pos</span><span class="op" id="4647719">)</span>&nbsp;<span class="op" id="4647721">&gt;=</span>&nbsp;<span class="builtinfunc" id="4647724">len</span><span class="op" id="4647727">(</span><span class="ident" id="4647728">l</span><span class="op" id="4647729">.</span><span class="ident" id="4647730">input</span><span class="op" id="4647735">)</span>&nbsp;<span class="op" id="4647737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4647741">l</span><span class="op" id="4647742">.</span><span class="ident" id="4647743">width</span>&nbsp;<span class="op" id="4647749">=</span>&nbsp;<span class="num" id="4647751">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4647755">return</span>&nbsp;<span class="ident" id="4647762">eof</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4647767">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4647770">r</span><span class="op" id="4647771">,</span>&nbsp;<span class="ident" id="4647773">w</span>&nbsp;<span class="op" id="4647775">:=</span>&nbsp;<span class="ident" id="4647778">utf8</span><span class="op" id="4647782">.</span><span class="ident" id="4647783">DecodeRuneInString</span><span class="op" id="4647801">(</span><span class="ident" id="4647802">l</span><span class="op" id="4647803">.</span><span class="ident" id="4647804">input</span><span class="op" id="4647809">[</span><span class="ident" id="4647810">l</span><span class="op" id="4647811">.</span><span class="ident" id="4647812">pos</span><span class="op" id="4647815">:</span><span class="op" id="4647816">]</span><span class="op" id="4647817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4647820">l</span><span class="op" id="4647821">.</span><span class="ident" id="4647822">width</span>&nbsp;<span class="op" id="4647828">=</span>&nbsp;<span class="ident" id="4647830">Pos</span><span class="op" id="4647833">(</span><span class="ident" id="4647834">w</span><span class="op" id="4647835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4647838">l</span><span class="op" id="4647839">.</span><span class="ident" id="4647840">pos</span>&nbsp;<span class="op" id="4647844">+=</span>&nbsp;<span class="ident" id="4647847">l</span><span class="op" id="4647848">.</span><span class="ident" id="4647849">width</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4647856">return</span>&nbsp;<span class="ident" id="4647863">r</span><br>
<span class="lineno"></span><span class="op" id="4647865">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="4647868">//&nbsp;peek&nbsp;returns&nbsp;but&nbsp;does&nbsp;not&nbsp;consume&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="4647933">func</span>&nbsp;<span class="op" id="4647938">(</span><span class="ident" id="4647939">l</span>&nbsp;<span class="op" id="4647941">*</span><span class="ident" id="4647942">lexer</span><span class="op" id="4647947">)</span>&nbsp;<span class="ident" id="4647949">peek</span><span class="op" id="4647953">(</span><span class="op" id="4647954">)</span>&nbsp;<span class="builtintype" id="4647956">rune</span>&nbsp;<span class="op" id="4647961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4647964">r</span>&nbsp;<span class="op" id="4647966">:=</span>&nbsp;<span class="ident" id="4647969">l</span><span class="op" id="4647970">.</span><span class="ident" id="4647971">next</span><span class="op" id="4647975">(</span><span class="op" id="4647976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4647979">l</span><span class="op" id="4647980">.</span><span class="ident" id="4647981">backup</span><span class="op" id="4647987">(</span><span class="op" id="4647988">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4647991">return</span>&nbsp;<span class="ident" id="4647998">r</span><br>
<span class="lineno"></span><span class="op" id="4648000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4648003">//&nbsp;backup&nbsp;steps&nbsp;back&nbsp;one&nbsp;rune.&nbsp;Can&nbsp;only&nbsp;be&nbsp;called&nbsp;once&nbsp;per&nbsp;call&nbsp;of&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="4648076">func</span>&nbsp;<span class="op" id="4648081">(</span><span class="ident" id="4648082">l</span>&nbsp;<span class="op" id="4648084">*</span><span class="ident" id="4648085">lexer</span><span class="op" id="4648090">)</span>&nbsp;<span class="ident" id="4648092">backup</span><span class="op" id="4648098">(</span><span class="op" id="4648099">)</span>&nbsp;<span class="op" id="4648101">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4648104">l</span><span class="op" id="4648105">.</span><span class="ident" id="4648106">pos</span>&nbsp;<span class="op" id="4648110">-=</span>&nbsp;<span class="ident" id="4648113">l</span><span class="op" id="4648114">.</span><span class="ident" id="4648115">width</span><br>
<span class="lineno"></span><span class="op" id="4648121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4648124">//&nbsp;emit&nbsp;passes&nbsp;an&nbsp;item&nbsp;back&nbsp;to&nbsp;the&nbsp;client.</span><br>
<span class="lineno"></span><span class="keyword" id="4648167">func</span>&nbsp;<span class="op" id="4648172">(</span><span class="ident" id="4648173">l</span>&nbsp;<span class="op" id="4648175">*</span><span class="ident" id="4648176">lexer</span><span class="op" id="4648181">)</span>&nbsp;<span class="ident" id="4648183">emit</span><span class="op" id="4648187">(</span><span class="ident" id="4648188">t</span>&nbsp;<span class="ident" id="4648190">itemType</span><span class="op" id="4648198">)</span>&nbsp;<span class="op" id="4648200">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4648203">l</span><span class="op" id="4648204">.</span><span class="ident" id="4648205">items</span>&nbsp;<span class="op" id="4648211">&lt;-</span>&nbsp;<span class="ident" id="4648214">item</span><span class="op" id="4648218">{</span><span class="ident" id="4648219">t</span><span class="op" id="4648220">,</span>&nbsp;<span class="ident" id="4648222">l</span><span class="op" id="4648223">.</span><span class="ident" id="4648224">start</span><span class="op" id="4648229">,</span>&nbsp;<span class="ident" id="4648231">l</span><span class="op" id="4648232">.</span><span class="ident" id="4648233">input</span><span class="op" id="4648238">[</span><span class="ident" id="4648239">l</span><span class="op" id="4648240">.</span><span class="ident" id="4648241">start</span><span class="op" id="4648246">:</span><span class="ident" id="4648247">l</span><span class="op" id="4648248">.</span><span class="ident" id="4648249">pos</span><span class="op" id="4648252">]</span><span class="op" id="4648253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4648256">l</span><span class="op" id="4648257">.</span><span class="ident" id="4648258">start</span>&nbsp;<span class="op" id="4648264">=</span>&nbsp;<span class="ident" id="4648266">l</span><span class="op" id="4648267">.</span><span class="ident" id="4648268">pos</span><br>
<span class="lineno"></span><span class="op" id="4648272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4648275">//&nbsp;ignore&nbsp;skips&nbsp;over&nbsp;the&nbsp;pending&nbsp;input&nbsp;before&nbsp;this&nbsp;point.</span><br>
<span class="lineno">135</span><span class="keyword" id="4648333">func</span>&nbsp;<span class="op" id="4648338">(</span><span class="ident" id="4648339">l</span>&nbsp;<span class="op" id="4648341">*</span><span class="ident" id="4648342">lexer</span><span class="op" id="4648347">)</span>&nbsp;<span class="ident" id="4648349">ignore</span><span class="op" id="4648355">(</span><span class="op" id="4648356">)</span>&nbsp;<span class="op" id="4648358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4648361">l</span><span class="op" id="4648362">.</span><span class="ident" id="4648363">start</span>&nbsp;<span class="op" id="4648369">=</span>&nbsp;<span class="ident" id="4648371">l</span><span class="op" id="4648372">.</span><span class="ident" id="4648373">pos</span><br>
<span class="lineno"></span><span class="op" id="4648377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4648380">//&nbsp;accept&nbsp;consumes&nbsp;the&nbsp;next&nbsp;rune&nbsp;if&nbsp;it&#39;s&nbsp;from&nbsp;the&nbsp;valid&nbsp;set.</span><br>
<span class="lineno">140</span><span class="keyword" id="4648441">func</span>&nbsp;<span class="op" id="4648446">(</span><span class="ident" id="4648447">l</span>&nbsp;<span class="op" id="4648449">*</span><span class="ident" id="4648450">lexer</span><span class="op" id="4648455">)</span>&nbsp;<span class="ident" id="4648457">accept</span><span class="op" id="4648463">(</span><span class="ident" id="4648464">valid</span>&nbsp;<span class="builtintype" id="4648470">string</span><span class="op" id="4648476">)</span>&nbsp;<span class="builtintype" id="4648478">bool</span>&nbsp;<span class="op" id="4648483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4648486">if</span>&nbsp;<span class="ident" id="4648489">strings</span><span class="op" id="4648496">.</span><span class="ident" id="4648497">IndexRune</span><span class="op" id="4648506">(</span><span class="ident" id="4648507">valid</span><span class="op" id="4648512">,</span>&nbsp;<span class="ident" id="4648514">l</span><span class="op" id="4648515">.</span><span class="ident" id="4648516">next</span><span class="op" id="4648520">(</span><span class="op" id="4648521">)</span><span class="op" id="4648522">)</span>&nbsp;<span class="op" id="4648524">&gt;=</span>&nbsp;<span class="num" id="4648527">0</span>&nbsp;<span class="op" id="4648529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4648533">return</span>&nbsp;<span class="builtintype" id="4648540">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4648546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4648549">l</span><span class="op" id="4648550">.</span><span class="ident" id="4648551">backup</span><span class="op" id="4648557">(</span><span class="op" id="4648558">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4648561">return</span>&nbsp;<span class="builtintype" id="4648568">false</span><br>
<span class="lineno"></span><span class="op" id="4648574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4648577">//&nbsp;acceptRun&nbsp;consumes&nbsp;a&nbsp;run&nbsp;of&nbsp;runes&nbsp;from&nbsp;the&nbsp;valid&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="4648634">func</span>&nbsp;<span class="op" id="4648639">(</span><span class="ident" id="4648640">l</span>&nbsp;<span class="op" id="4648642">*</span><span class="ident" id="4648643">lexer</span><span class="op" id="4648648">)</span>&nbsp;<span class="ident" id="4648650">acceptRun</span><span class="op" id="4648659">(</span><span class="ident" id="4648660">valid</span>&nbsp;<span class="builtintype" id="4648666">string</span><span class="op" id="4648672">)</span>&nbsp;<span class="op" id="4648674">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4648677">for</span>&nbsp;<span class="ident" id="4648681">strings</span><span class="op" id="4648688">.</span><span class="ident" id="4648689">IndexRune</span><span class="op" id="4648698">(</span><span class="ident" id="4648699">valid</span><span class="op" id="4648704">,</span>&nbsp;<span class="ident" id="4648706">l</span><span class="op" id="4648707">.</span><span class="ident" id="4648708">next</span><span class="op" id="4648712">(</span><span class="op" id="4648713">)</span><span class="op" id="4648714">)</span>&nbsp;<span class="op" id="4648716">&gt;=</span>&nbsp;<span class="num" id="4648719">0</span>&nbsp;<span class="op" id="4648721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4648724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4648727">l</span><span class="op" id="4648728">.</span><span class="ident" id="4648729">backup</span><span class="op" id="4648735">(</span><span class="op" id="4648736">)</span><br>
<span class="lineno"></span><span class="op" id="4648738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="4648741">//&nbsp;lineNumber&nbsp;reports&nbsp;which&nbsp;line&nbsp;we&#39;re&nbsp;on,&nbsp;based&nbsp;on&nbsp;the&nbsp;position&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4648809">//&nbsp;the&nbsp;previous&nbsp;item&nbsp;returned&nbsp;by&nbsp;nextItem.&nbsp;Doing&nbsp;it&nbsp;this&nbsp;way</span><br>
<span class="lineno"></span><span class="comment" id="4648870">//&nbsp;means&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;worry&nbsp;about&nbsp;peek&nbsp;double&nbsp;counting.</span><br>
<span class="lineno"></span><span class="keyword" id="4648930">func</span>&nbsp;<span class="op" id="4648935">(</span><span class="ident" id="4648936">l</span>&nbsp;<span class="op" id="4648938">*</span><span class="ident" id="4648939">lexer</span><span class="op" id="4648944">)</span>&nbsp;<span class="ident" id="4648946">lineNumber</span><span class="op" id="4648956">(</span><span class="op" id="4648957">)</span>&nbsp;<span class="builtintype" id="4648959">int</span>&nbsp;<span class="op" id="4648963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4648966">return</span>&nbsp;<span class="num" id="4648973">1</span>&nbsp;<span class="op" id="4648975">+</span>&nbsp;<span class="ident" id="4648977">strings</span><span class="op" id="4648984">.</span><span class="ident" id="4648985">Count</span><span class="op" id="4648990">(</span><span class="ident" id="4648991">l</span><span class="op" id="4648992">.</span><span class="ident" id="4648993">input</span><span class="op" id="4648998">[</span><span class="op" id="4648999">:</span><span class="ident" id="4649000">l</span><span class="op" id="4649001">.</span><span class="ident" id="4649002">lastPos</span><span class="op" id="4649009">]</span><span class="op" id="4649010">,</span>&nbsp;<span class="string" id="4649012">&#34;\n&#34;</span><span class="op" id="4649016">)</span><br>
<span class="lineno">160</span><span class="op" id="4649018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4649021">//&nbsp;errorf&nbsp;returns&nbsp;an&nbsp;error&nbsp;token&nbsp;and&nbsp;terminates&nbsp;the&nbsp;scan&nbsp;by&nbsp;passing</span><br>
<span class="lineno"></span><span class="comment" id="4649089">//&nbsp;back&nbsp;a&nbsp;nil&nbsp;pointer&nbsp;that&nbsp;will&nbsp;be&nbsp;the&nbsp;next&nbsp;state,&nbsp;terminating&nbsp;l.nextItem.</span><br>
<span class="lineno"></span><span class="keyword" id="4649164">func</span>&nbsp;<span class="op" id="4649169">(</span><span class="ident" id="4649170">l</span>&nbsp;<span class="op" id="4649172">*</span><span class="ident" id="4649173">lexer</span><span class="op" id="4649178">)</span>&nbsp;<span class="ident" id="4649180">errorf</span><span class="op" id="4649186">(</span><span class="ident" id="4649187">format</span>&nbsp;<span class="builtintype" id="4649194">string</span><span class="op" id="4649200">,</span>&nbsp;<span class="ident" id="4649202">args</span>&nbsp;<span class="op" id="4649207">...</span><span class="keyword" id="4649210">interface</span><span class="op" id="4649219">{</span><span class="op" id="4649220">}</span><span class="op" id="4649221">)</span>&nbsp;<span class="ident" id="4649223">stateFn</span>&nbsp;<span class="op" id="4649231">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4649234">l</span><span class="op" id="4649235">.</span><span class="ident" id="4649236">items</span>&nbsp;<span class="op" id="4649242">&lt;-</span>&nbsp;<span class="ident" id="4649245">item</span><span class="op" id="4649249">{</span><span class="ident" id="4649250">itemError</span><span class="op" id="4649259">,</span>&nbsp;<span class="ident" id="4649261">l</span><span class="op" id="4649262">.</span><span class="ident" id="4649263">start</span><span class="op" id="4649268">,</span>&nbsp;<span class="ident" id="4649270">fmt</span><span class="op" id="4649273">.</span><span class="ident" id="4649274">Sprintf</span><span class="op" id="4649281">(</span><span class="ident" id="4649282">format</span><span class="op" id="4649288">,</span>&nbsp;<span class="ident" id="4649290">args</span><span class="op" id="4649294">...</span><span class="op" id="4649297">)</span><span class="op" id="4649298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4649301">return</span>&nbsp;<span class="ident" id="4649308">nil</span><br>
<span class="lineno"></span><span class="op" id="4649312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4649315">//&nbsp;nextItem&nbsp;returns&nbsp;the&nbsp;next&nbsp;item&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">170</span><span class="keyword" id="4649365">func</span>&nbsp;<span class="op" id="4649370">(</span><span class="ident" id="4649371">l</span>&nbsp;<span class="op" id="4649373">*</span><span class="ident" id="4649374">lexer</span><span class="op" id="4649379">)</span>&nbsp;<span class="ident" id="4649381">nextItem</span><span class="op" id="4649389">(</span><span class="op" id="4649390">)</span>&nbsp;<span class="ident" id="4649392">item</span>&nbsp;<span class="op" id="4649397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4649400">item</span>&nbsp;<span class="op" id="4649405">:=</span>&nbsp;<span class="op" id="4649408">&lt;-</span><span class="ident" id="4649410">l</span><span class="op" id="4649411">.</span><span class="ident" id="4649412">items</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4649419">l</span><span class="op" id="4649420">.</span><span class="ident" id="4649421">lastPos</span>&nbsp;<span class="op" id="4649429">=</span>&nbsp;<span class="ident" id="4649431">item</span><span class="op" id="4649435">.</span><span class="ident" id="4649436">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4649441">return</span>&nbsp;<span class="ident" id="4649448">item</span><br>
<span class="lineno"></span><span class="op" id="4649453">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="4649456">//&nbsp;lex&nbsp;creates&nbsp;a&nbsp;new&nbsp;scanner&nbsp;for&nbsp;the&nbsp;input&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4649507">func</span>&nbsp;<span class="ident" id="4649512">lex</span><span class="op" id="4649515">(</span><span class="ident" id="4649516">name</span><span class="op" id="4649520">,</span>&nbsp;<span class="ident" id="4649522">input</span><span class="op" id="4649527">,</span>&nbsp;<span class="ident" id="4649529">left</span><span class="op" id="4649533">,</span>&nbsp;<span class="ident" id="4649535">right</span>&nbsp;<span class="builtintype" id="4649541">string</span><span class="op" id="4649547">)</span>&nbsp;<span class="op" id="4649549">*</span><span class="ident" id="4649550">lexer</span>&nbsp;<span class="op" id="4649556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4649559">if</span>&nbsp;<span class="ident" id="4649562">left</span>&nbsp;<span class="op" id="4649567">==</span>&nbsp;<span class="string" id="4649570">&#34;&#34;</span>&nbsp;<span class="op" id="4649573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4649577">left</span>&nbsp;<span class="op" id="4649582">=</span>&nbsp;<span class="ident" id="4649584">leftDelim</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4649595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4649598">if</span>&nbsp;<span class="ident" id="4649601">right</span>&nbsp;<span class="op" id="4649607">==</span>&nbsp;<span class="string" id="4649610">&#34;&#34;</span>&nbsp;<span class="op" id="4649613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4649617">right</span>&nbsp;<span class="op" id="4649623">=</span>&nbsp;<span class="ident" id="4649625">rightDelim</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4649637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4649640">l</span>&nbsp;<span class="op" id="4649642">:=</span>&nbsp;<span class="op" id="4649645">&amp;</span><span class="ident" id="4649646">lexer</span><span class="op" id="4649651">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4649655">name</span><span class="op" id="4649659">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4649667">name</span><span class="op" id="4649671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4649675">input</span><span class="op" id="4649680">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4649687">input</span><span class="op" id="4649692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4649696">leftDelim</span><span class="op" id="4649705">:</span>&nbsp;&nbsp;<span class="ident" id="4649708">left</span><span class="op" id="4649712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4649716">rightDelim</span><span class="op" id="4649726">:</span>&nbsp;<span class="ident" id="4649728">right</span><span class="op" id="4649733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4649737">items</span><span class="op" id="4649742">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4649749">make</span><span class="op" id="4649753">(</span><span class="keyword" id="4649754">chan</span>&nbsp;<span class="ident" id="4649759">item</span><span class="op" id="4649763">)</span><span class="op" id="4649764">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4649767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4649770">go</span>&nbsp;<span class="ident" id="4649773">l</span><span class="op" id="4649774">.</span><span class="ident" id="4649775">run</span><span class="op" id="4649778">(</span><span class="op" id="4649779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4649782">return</span>&nbsp;<span class="ident" id="4649789">l</span><br>
<span class="lineno"></span><span class="op" id="4649791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="4649794">//&nbsp;run&nbsp;runs&nbsp;the&nbsp;state&nbsp;machine&nbsp;for&nbsp;the&nbsp;lexer.</span><br>
<span class="lineno"></span><span class="keyword" id="4649839">func</span>&nbsp;<span class="op" id="4649844">(</span><span class="ident" id="4649845">l</span>&nbsp;<span class="op" id="4649847">*</span><span class="ident" id="4649848">lexer</span><span class="op" id="4649853">)</span>&nbsp;<span class="ident" id="4649855">run</span><span class="op" id="4649858">(</span><span class="op" id="4649859">)</span>&nbsp;<span class="op" id="4649861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4649864">for</span>&nbsp;<span class="ident" id="4649868">l</span><span class="op" id="4649869">.</span><span class="ident" id="4649870">state</span>&nbsp;<span class="op" id="4649876">=</span>&nbsp;<span class="ident" id="4649878">lexText</span><span class="op" id="4649885">;</span>&nbsp;<span class="ident" id="4649887">l</span><span class="op" id="4649888">.</span><span class="ident" id="4649889">state</span>&nbsp;<span class="op" id="4649895">!=</span>&nbsp;<span class="ident" id="4649898">nil</span><span class="op" id="4649901">;</span>&nbsp;<span class="op" id="4649903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4649907">l</span><span class="op" id="4649908">.</span><span class="ident" id="4649909">state</span>&nbsp;<span class="op" id="4649915">=</span>&nbsp;<span class="ident" id="4649917">l</span><span class="op" id="4649918">.</span><span class="ident" id="4649919">state</span><span class="op" id="4649924">(</span><span class="ident" id="4649925">l</span><span class="op" id="4649926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4649929">}</span><br>
<span class="lineno">200</span><span class="op" id="4649931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4649934">//&nbsp;state&nbsp;functions</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4649954">const</span>&nbsp;<span class="op" id="4649960">(</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4649963">leftDelim</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4649976">=</span>&nbsp;<span class="string" id="4649978">&#34;{{&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4649984">rightDelim</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4649997">=</span>&nbsp;<span class="string" id="4649999">&#34;}}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4650005">leftComment</span>&nbsp;&nbsp;<span class="op" id="4650018">=</span>&nbsp;<span class="string" id="4650020">&#34;/*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4650026">rightComment</span>&nbsp;<span class="op" id="4650039">=</span>&nbsp;<span class="string" id="4650041">&#34;*/&#34;</span><br>
<span class="lineno"></span><span class="op" id="4650046">)</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="comment" id="4650049">//&nbsp;lexText&nbsp;scans&nbsp;until&nbsp;an&nbsp;opening&nbsp;action&nbsp;delimiter,&nbsp;&#34;{{&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="4650107">func</span>&nbsp;<span class="ident" id="4650112">lexText</span><span class="op" id="4650119">(</span><span class="ident" id="4650120">l</span>&nbsp;<span class="op" id="4650122">*</span><span class="ident" id="4650123">lexer</span><span class="op" id="4650128">)</span>&nbsp;<span class="ident" id="4650130">stateFn</span>&nbsp;<span class="op" id="4650138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4650141">for</span>&nbsp;<span class="op" id="4650145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4650149">if</span>&nbsp;<span class="ident" id="4650152">strings</span><span class="op" id="4650159">.</span><span class="ident" id="4650160">HasPrefix</span><span class="op" id="4650169">(</span><span class="ident" id="4650170">l</span><span class="op" id="4650171">.</span><span class="ident" id="4650172">input</span><span class="op" id="4650177">[</span><span class="ident" id="4650178">l</span><span class="op" id="4650179">.</span><span class="ident" id="4650180">pos</span><span class="op" id="4650183">:</span><span class="op" id="4650184">]</span><span class="op" id="4650185">,</span>&nbsp;<span class="ident" id="4650187">l</span><span class="op" id="4650188">.</span><span class="ident" id="4650189">leftDelim</span><span class="op" id="4650198">)</span>&nbsp;<span class="op" id="4650200">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4650205">if</span>&nbsp;<span class="ident" id="4650208">l</span><span class="op" id="4650209">.</span><span class="ident" id="4650210">pos</span>&nbsp;<span class="op" id="4650214">&gt;</span>&nbsp;<span class="ident" id="4650216">l</span><span class="op" id="4650217">.</span><span class="ident" id="4650218">start</span>&nbsp;<span class="op" id="4650224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4650230">l</span><span class="op" id="4650231">.</span><span class="ident" id="4650232">emit</span><span class="op" id="4650236">(</span><span class="ident" id="4650237">itemText</span><span class="op" id="4650245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4650250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4650255">return</span>&nbsp;<span class="ident" id="4650262">lexLeftDelim</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4650277">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4650281">if</span>&nbsp;<span class="ident" id="4650284">l</span><span class="op" id="4650285">.</span><span class="ident" id="4650286">next</span><span class="op" id="4650290">(</span><span class="op" id="4650291">)</span>&nbsp;<span class="op" id="4650293">==</span>&nbsp;<span class="ident" id="4650296">eof</span>&nbsp;<span class="op" id="4650300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4650305">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4650313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4650316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4650319">//&nbsp;Correctly&nbsp;reached&nbsp;EOF.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4650346">if</span>&nbsp;<span class="ident" id="4650349">l</span><span class="op" id="4650350">.</span><span class="ident" id="4650351">pos</span>&nbsp;<span class="op" id="4650355">&gt;</span>&nbsp;<span class="ident" id="4650357">l</span><span class="op" id="4650358">.</span><span class="ident" id="4650359">start</span>&nbsp;<span class="op" id="4650365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4650369">l</span><span class="op" id="4650370">.</span><span class="ident" id="4650371">emit</span><span class="op" id="4650375">(</span><span class="ident" id="4650376">itemText</span><span class="op" id="4650384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4650387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4650390">l</span><span class="op" id="4650391">.</span><span class="ident" id="4650392">emit</span><span class="op" id="4650396">(</span><span class="ident" id="4650397">itemEOF</span><span class="op" id="4650404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4650407">return</span>&nbsp;<span class="ident" id="4650414">nil</span><br>
<span class="lineno">230</span><span class="op" id="4650418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4650421">//&nbsp;lexLeftDelim&nbsp;scans&nbsp;the&nbsp;left&nbsp;delimiter,&nbsp;which&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="4650493">func</span>&nbsp;<span class="ident" id="4650498">lexLeftDelim</span><span class="op" id="4650510">(</span><span class="ident" id="4650511">l</span>&nbsp;<span class="op" id="4650513">*</span><span class="ident" id="4650514">lexer</span><span class="op" id="4650519">)</span>&nbsp;<span class="ident" id="4650521">stateFn</span>&nbsp;<span class="op" id="4650529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4650532">l</span><span class="op" id="4650533">.</span><span class="ident" id="4650534">pos</span>&nbsp;<span class="op" id="4650538">+=</span>&nbsp;<span class="ident" id="4650541">Pos</span><span class="op" id="4650544">(</span><span class="builtinfunc" id="4650545">len</span><span class="op" id="4650548">(</span><span class="ident" id="4650549">l</span><span class="op" id="4650550">.</span><span class="ident" id="4650551">leftDelim</span><span class="op" id="4650560">)</span><span class="op" id="4650561">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4650564">if</span>&nbsp;<span class="ident" id="4650567">strings</span><span class="op" id="4650574">.</span><span class="ident" id="4650575">HasPrefix</span><span class="op" id="4650584">(</span><span class="ident" id="4650585">l</span><span class="op" id="4650586">.</span><span class="ident" id="4650587">input</span><span class="op" id="4650592">[</span><span class="ident" id="4650593">l</span><span class="op" id="4650594">.</span><span class="ident" id="4650595">pos</span><span class="op" id="4650598">:</span><span class="op" id="4650599">]</span><span class="op" id="4650600">,</span>&nbsp;<span class="ident" id="4650602">leftComment</span><span class="op" id="4650613">)</span>&nbsp;<span class="op" id="4650615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4650619">return</span>&nbsp;<span class="ident" id="4650626">lexComment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4650638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4650641">l</span><span class="op" id="4650642">.</span><span class="ident" id="4650643">emit</span><span class="op" id="4650647">(</span><span class="ident" id="4650648">itemLeftDelim</span><span class="op" id="4650661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4650664">l</span><span class="op" id="4650665">.</span><span class="ident" id="4650666">parenDepth</span>&nbsp;<span class="op" id="4650677">=</span>&nbsp;<span class="num" id="4650679">0</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4650682">return</span>&nbsp;<span class="ident" id="4650689">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4650705">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4650708">//&nbsp;lexComment&nbsp;scans&nbsp;a&nbsp;comment.&nbsp;The&nbsp;left&nbsp;comment&nbsp;marker&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="4650787">func</span>&nbsp;<span class="ident" id="4650792">lexComment</span><span class="op" id="4650802">(</span><span class="ident" id="4650803">l</span>&nbsp;<span class="op" id="4650805">*</span><span class="ident" id="4650806">lexer</span><span class="op" id="4650811">)</span>&nbsp;<span class="ident" id="4650813">stateFn</span>&nbsp;<span class="op" id="4650821">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4650824">l</span><span class="op" id="4650825">.</span><span class="ident" id="4650826">pos</span>&nbsp;<span class="op" id="4650830">+=</span>&nbsp;<span class="ident" id="4650833">Pos</span><span class="op" id="4650836">(</span><span class="builtinfunc" id="4650837">len</span><span class="op" id="4650840">(</span><span class="ident" id="4650841">leftComment</span><span class="op" id="4650852">)</span><span class="op" id="4650853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4650856">i</span>&nbsp;<span class="op" id="4650858">:=</span>&nbsp;<span class="ident" id="4650861">strings</span><span class="op" id="4650868">.</span><span class="ident" id="4650869">Index</span><span class="op" id="4650874">(</span><span class="ident" id="4650875">l</span><span class="op" id="4650876">.</span><span class="ident" id="4650877">input</span><span class="op" id="4650882">[</span><span class="ident" id="4650883">l</span><span class="op" id="4650884">.</span><span class="ident" id="4650885">pos</span><span class="op" id="4650888">:</span><span class="op" id="4650889">]</span><span class="op" id="4650890">,</span>&nbsp;<span class="ident" id="4650892">rightComment</span><span class="op" id="4650904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4650907">if</span>&nbsp;<span class="ident" id="4650910">i</span>&nbsp;<span class="op" id="4650912">&lt;</span>&nbsp;<span class="num" id="4650914">0</span>&nbsp;<span class="op" id="4650916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4650920">return</span>&nbsp;<span class="ident" id="4650927">l</span><span class="op" id="4650928">.</span><span class="ident" id="4650929">errorf</span><span class="op" id="4650935">(</span><span class="string" id="4650936">&#34;unclosed&nbsp;comment&#34;</span><span class="op" id="4650954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4650957">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4650960">l</span><span class="op" id="4650961">.</span><span class="ident" id="4650962">pos</span>&nbsp;<span class="op" id="4650966">+=</span>&nbsp;<span class="ident" id="4650969">Pos</span><span class="op" id="4650972">(</span><span class="ident" id="4650973">i</span>&nbsp;<span class="op" id="4650975">+</span>&nbsp;<span class="builtinfunc" id="4650977">len</span><span class="op" id="4650980">(</span><span class="ident" id="4650981">rightComment</span><span class="op" id="4650993">)</span><span class="op" id="4650994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4650997">if</span>&nbsp;<span class="op" id="4651000">!</span><span class="ident" id="4651001">strings</span><span class="op" id="4651008">.</span><span class="ident" id="4651009">HasPrefix</span><span class="op" id="4651018">(</span><span class="ident" id="4651019">l</span><span class="op" id="4651020">.</span><span class="ident" id="4651021">input</span><span class="op" id="4651026">[</span><span class="ident" id="4651027">l</span><span class="op" id="4651028">.</span><span class="ident" id="4651029">pos</span><span class="op" id="4651032">:</span><span class="op" id="4651033">]</span><span class="op" id="4651034">,</span>&nbsp;<span class="ident" id="4651036">l</span><span class="op" id="4651037">.</span><span class="ident" id="4651038">rightDelim</span><span class="op" id="4651048">)</span>&nbsp;<span class="op" id="4651050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4651054">return</span>&nbsp;<span class="ident" id="4651061">l</span><span class="op" id="4651062">.</span><span class="ident" id="4651063">errorf</span><span class="op" id="4651069">(</span><span class="string" id="4651070">&#34;comment&nbsp;ends&nbsp;before&nbsp;closing&nbsp;delimiter&#34;</span><span class="op" id="4651109">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4651113">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4651116">l</span><span class="op" id="4651117">.</span><span class="ident" id="4651118">pos</span>&nbsp;<span class="op" id="4651122">+=</span>&nbsp;<span class="ident" id="4651125">Pos</span><span class="op" id="4651128">(</span><span class="builtinfunc" id="4651129">len</span><span class="op" id="4651132">(</span><span class="ident" id="4651133">l</span><span class="op" id="4651134">.</span><span class="ident" id="4651135">rightDelim</span><span class="op" id="4651145">)</span><span class="op" id="4651146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4651149">l</span><span class="op" id="4651150">.</span><span class="ident" id="4651151">ignore</span><span class="op" id="4651157">(</span><span class="op" id="4651158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4651161">return</span>&nbsp;<span class="ident" id="4651168">lexText</span><br>
<span class="lineno"></span><span class="op" id="4651176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="4651179">//&nbsp;lexRightDelim&nbsp;scans&nbsp;the&nbsp;right&nbsp;delimiter,&nbsp;which&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="4651253">func</span>&nbsp;<span class="ident" id="4651258">lexRightDelim</span><span class="op" id="4651271">(</span><span class="ident" id="4651272">l</span>&nbsp;<span class="op" id="4651274">*</span><span class="ident" id="4651275">lexer</span><span class="op" id="4651280">)</span>&nbsp;<span class="ident" id="4651282">stateFn</span>&nbsp;<span class="op" id="4651290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4651293">l</span><span class="op" id="4651294">.</span><span class="ident" id="4651295">pos</span>&nbsp;<span class="op" id="4651299">+=</span>&nbsp;<span class="ident" id="4651302">Pos</span><span class="op" id="4651305">(</span><span class="builtinfunc" id="4651306">len</span><span class="op" id="4651309">(</span><span class="ident" id="4651310">l</span><span class="op" id="4651311">.</span><span class="ident" id="4651312">rightDelim</span><span class="op" id="4651322">)</span><span class="op" id="4651323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4651326">l</span><span class="op" id="4651327">.</span><span class="ident" id="4651328">emit</span><span class="op" id="4651332">(</span><span class="ident" id="4651333">itemRightDelim</span><span class="op" id="4651347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4651350">return</span>&nbsp;<span class="ident" id="4651357">lexText</span><br>
<span class="lineno">265</span><span class="op" id="4651365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4651368">//&nbsp;lexInsideAction&nbsp;scans&nbsp;the&nbsp;elements&nbsp;inside&nbsp;action&nbsp;delimiters.</span><br>
<span class="lineno"></span><span class="keyword" id="4651432">func</span>&nbsp;<span class="ident" id="4651437">lexInsideAction</span><span class="op" id="4651452">(</span><span class="ident" id="4651453">l</span>&nbsp;<span class="op" id="4651455">*</span><span class="ident" id="4651456">lexer</span><span class="op" id="4651461">)</span>&nbsp;<span class="ident" id="4651463">stateFn</span>&nbsp;<span class="op" id="4651471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4651474">//&nbsp;Either&nbsp;number,&nbsp;quoted&nbsp;string,&nbsp;or&nbsp;identifier.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4651523">//&nbsp;Spaces&nbsp;separate&nbsp;arguments;&nbsp;runs&nbsp;of&nbsp;spaces&nbsp;turn&nbsp;into&nbsp;itemSpace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4651590">//&nbsp;Pipe&nbsp;symbols&nbsp;separate&nbsp;and&nbsp;are&nbsp;emitted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4651633">if</span>&nbsp;<span class="ident" id="4651636">strings</span><span class="op" id="4651643">.</span><span class="ident" id="4651644">HasPrefix</span><span class="op" id="4651653">(</span><span class="ident" id="4651654">l</span><span class="op" id="4651655">.</span><span class="ident" id="4651656">input</span><span class="op" id="4651661">[</span><span class="ident" id="4651662">l</span><span class="op" id="4651663">.</span><span class="ident" id="4651664">pos</span><span class="op" id="4651667">:</span><span class="op" id="4651668">]</span><span class="op" id="4651669">,</span>&nbsp;<span class="ident" id="4651671">l</span><span class="op" id="4651672">.</span><span class="ident" id="4651673">rightDelim</span><span class="op" id="4651683">)</span>&nbsp;<span class="op" id="4651685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4651689">if</span>&nbsp;<span class="ident" id="4651692">l</span><span class="op" id="4651693">.</span><span class="ident" id="4651694">parenDepth</span>&nbsp;<span class="op" id="4651705">==</span>&nbsp;<span class="num" id="4651708">0</span>&nbsp;<span class="op" id="4651710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4651715">return</span>&nbsp;<span class="ident" id="4651722">lexRightDelim</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4651738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4651742">return</span>&nbsp;<span class="ident" id="4651749">l</span><span class="op" id="4651750">.</span><span class="ident" id="4651751">errorf</span><span class="op" id="4651757">(</span><span class="string" id="4651758">&#34;unclosed&nbsp;left&nbsp;paren&#34;</span><span class="op" id="4651779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4651782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4651785">switch</span>&nbsp;<span class="ident" id="4651792">r</span>&nbsp;<span class="op" id="4651794">:=</span>&nbsp;<span class="ident" id="4651797">l</span><span class="op" id="4651798">.</span><span class="ident" id="4651799">next</span><span class="op" id="4651803">(</span><span class="op" id="4651804">)</span><span class="op" id="4651805">;</span>&nbsp;<span class="op" id="4651807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4651810">case</span>&nbsp;<span class="ident" id="4651815">r</span>&nbsp;<span class="op" id="4651817">==</span>&nbsp;<span class="ident" id="4651820">eof</span>&nbsp;<span class="op" id="4651824">||</span>&nbsp;<span class="ident" id="4651827">isEndOfLine</span><span class="op" id="4651838">(</span><span class="ident" id="4651839">r</span><span class="op" id="4651840">)</span><span class="op" id="4651841">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4651845">return</span>&nbsp;<span class="ident" id="4651852">l</span><span class="op" id="4651853">.</span><span class="ident" id="4651854">errorf</span><span class="op" id="4651860">(</span><span class="string" id="4651861">&#34;unclosed&nbsp;action&#34;</span><span class="op" id="4651878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4651881">case</span>&nbsp;<span class="ident" id="4651886">isSpace</span><span class="op" id="4651893">(</span><span class="ident" id="4651894">r</span><span class="op" id="4651895">)</span><span class="op" id="4651896">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4651900">return</span>&nbsp;<span class="ident" id="4651907">lexSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4651917">case</span>&nbsp;<span class="ident" id="4651922">r</span>&nbsp;<span class="op" id="4651924">==</span>&nbsp;<span class="string" id="4651927">&#39;:&#39;</span><span class="op" id="4651930">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4651934">if</span>&nbsp;<span class="ident" id="4651937">l</span><span class="op" id="4651938">.</span><span class="ident" id="4651939">next</span><span class="op" id="4651943">(</span><span class="op" id="4651944">)</span>&nbsp;<span class="op" id="4651946">!=</span>&nbsp;<span class="string" id="4651949">&#39;=&#39;</span>&nbsp;<span class="op" id="4651953">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4651958">return</span>&nbsp;<span class="ident" id="4651965">l</span><span class="op" id="4651966">.</span><span class="ident" id="4651967">errorf</span><span class="op" id="4651973">(</span><span class="string" id="4651974">&#34;expected&nbsp;:=&#34;</span><span class="op" id="4651987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4651991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4651995">l</span><span class="op" id="4651996">.</span><span class="ident" id="4651997">emit</span><span class="op" id="4652001">(</span><span class="ident" id="4652002">itemColonEquals</span><span class="op" id="4652017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652020">case</span>&nbsp;<span class="ident" id="4652025">r</span>&nbsp;<span class="op" id="4652027">==</span>&nbsp;<span class="string" id="4652030">&#39;|&#39;</span><span class="op" id="4652033">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4652037">l</span><span class="op" id="4652038">.</span><span class="ident" id="4652039">emit</span><span class="op" id="4652043">(</span><span class="ident" id="4652044">itemPipe</span><span class="op" id="4652052">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652055">case</span>&nbsp;<span class="ident" id="4652060">r</span>&nbsp;<span class="op" id="4652062">==</span>&nbsp;<span class="string" id="4652065">&#39;&#34;&#39;</span><span class="op" id="4652068">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652072">return</span>&nbsp;<span class="ident" id="4652079">lexQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652089">case</span>&nbsp;<span class="ident" id="4652094">r</span>&nbsp;<span class="op" id="4652096">==</span>&nbsp;<span class="string" id="4652099">&#39;`&#39;</span><span class="op" id="4652102">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652106">return</span>&nbsp;<span class="ident" id="4652113">lexRawQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652126">case</span>&nbsp;<span class="ident" id="4652131">r</span>&nbsp;<span class="op" id="4652133">==</span>&nbsp;<span class="string" id="4652136">&#39;$&#39;</span><span class="op" id="4652139">:</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652143">return</span>&nbsp;<span class="ident" id="4652150">lexVariable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652163">case</span>&nbsp;<span class="ident" id="4652168">r</span>&nbsp;<span class="op" id="4652170">==</span>&nbsp;<span class="string" id="4652173">&#39;\&#39;&#39;</span><span class="op" id="4652177">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652181">return</span>&nbsp;<span class="ident" id="4652188">lexChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652197">case</span>&nbsp;<span class="ident" id="4652202">r</span>&nbsp;<span class="op" id="4652204">==</span>&nbsp;<span class="string" id="4652207">&#39;.&#39;</span><span class="op" id="4652210">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4652214">//&nbsp;special&nbsp;look-ahead&nbsp;for&nbsp;&#34;.field&#34;&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;break&nbsp;l.backup().</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652281">if</span>&nbsp;<span class="ident" id="4652284">l</span><span class="op" id="4652285">.</span><span class="ident" id="4652286">pos</span>&nbsp;<span class="op" id="4652290">&lt;</span>&nbsp;<span class="ident" id="4652292">Pos</span><span class="op" id="4652295">(</span><span class="builtinfunc" id="4652296">len</span><span class="op" id="4652299">(</span><span class="ident" id="4652300">l</span><span class="op" id="4652301">.</span><span class="ident" id="4652302">input</span><span class="op" id="4652307">)</span><span class="op" id="4652308">)</span>&nbsp;<span class="op" id="4652310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4652315">r</span>&nbsp;<span class="op" id="4652317">:=</span>&nbsp;<span class="ident" id="4652320">l</span><span class="op" id="4652321">.</span><span class="ident" id="4652322">input</span><span class="op" id="4652327">[</span><span class="ident" id="4652328">l</span><span class="op" id="4652329">.</span><span class="ident" id="4652330">pos</span><span class="op" id="4652333">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652338">if</span>&nbsp;<span class="ident" id="4652341">r</span>&nbsp;<span class="op" id="4652343">&lt;</span>&nbsp;<span class="string" id="4652345">&#39;0&#39;</span>&nbsp;<span class="op" id="4652349">||</span>&nbsp;<span class="string" id="4652352">&#39;9&#39;</span>&nbsp;<span class="op" id="4652356">&lt;</span>&nbsp;<span class="ident" id="4652358">r</span>&nbsp;<span class="op" id="4652360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652366">return</span>&nbsp;<span class="ident" id="4652373">lexField</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4652385">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4652389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652393">fallthrough</span>&nbsp;<span class="comment" id="4652405">//&nbsp;&#39;.&#39;&nbsp;can&nbsp;start&nbsp;a&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652433">case</span>&nbsp;<span class="ident" id="4652438">r</span>&nbsp;<span class="op" id="4652440">==</span>&nbsp;<span class="string" id="4652443">&#39;+&#39;</span>&nbsp;<span class="op" id="4652447">||</span>&nbsp;<span class="ident" id="4652450">r</span>&nbsp;<span class="op" id="4652452">==</span>&nbsp;<span class="string" id="4652455">&#39;-&#39;</span>&nbsp;<span class="op" id="4652459">||</span>&nbsp;<span class="op" id="4652462">(</span><span class="string" id="4652463">&#39;0&#39;</span>&nbsp;<span class="op" id="4652467">&lt;=</span>&nbsp;<span class="ident" id="4652470">r</span>&nbsp;<span class="op" id="4652472">&amp;&amp;</span>&nbsp;<span class="ident" id="4652475">r</span>&nbsp;<span class="op" id="4652477">&lt;=</span>&nbsp;<span class="string" id="4652480">&#39;9&#39;</span><span class="op" id="4652483">)</span><span class="op" id="4652484">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4652488">l</span><span class="op" id="4652489">.</span><span class="ident" id="4652490">backup</span><span class="op" id="4652496">(</span><span class="op" id="4652497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652501">return</span>&nbsp;<span class="ident" id="4652508">lexNumber</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652519">case</span>&nbsp;<span class="ident" id="4652524">isAlphaNumeric</span><span class="op" id="4652538">(</span><span class="ident" id="4652539">r</span><span class="op" id="4652540">)</span><span class="op" id="4652541">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4652545">l</span><span class="op" id="4652546">.</span><span class="ident" id="4652547">backup</span><span class="op" id="4652553">(</span><span class="op" id="4652554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652558">return</span>&nbsp;<span class="ident" id="4652565">lexIdentifier</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652580">case</span>&nbsp;<span class="ident" id="4652585">r</span>&nbsp;<span class="op" id="4652587">==</span>&nbsp;<span class="string" id="4652590">&#39;(&#39;</span><span class="op" id="4652593">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4652597">l</span><span class="op" id="4652598">.</span><span class="ident" id="4652599">emit</span><span class="op" id="4652603">(</span><span class="ident" id="4652604">itemLeftParen</span><span class="op" id="4652617">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4652621">l</span><span class="op" id="4652622">.</span><span class="ident" id="4652623">parenDepth</span><span class="op" id="4652633">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652638">return</span>&nbsp;<span class="ident" id="4652645">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652662">case</span>&nbsp;<span class="ident" id="4652667">r</span>&nbsp;<span class="op" id="4652669">==</span>&nbsp;<span class="string" id="4652672">&#39;)&#39;</span><span class="op" id="4652675">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4652679">l</span><span class="op" id="4652680">.</span><span class="ident" id="4652681">emit</span><span class="op" id="4652685">(</span><span class="ident" id="4652686">itemRightParen</span><span class="op" id="4652700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4652704">l</span><span class="op" id="4652705">.</span><span class="ident" id="4652706">parenDepth</span><span class="op" id="4652716">--</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652721">if</span>&nbsp;<span class="ident" id="4652724">l</span><span class="op" id="4652725">.</span><span class="ident" id="4652726">parenDepth</span>&nbsp;<span class="op" id="4652737">&lt;</span>&nbsp;<span class="num" id="4652739">0</span>&nbsp;<span class="op" id="4652741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652746">return</span>&nbsp;<span class="ident" id="4652753">l</span><span class="op" id="4652754">.</span><span class="ident" id="4652755">errorf</span><span class="op" id="4652761">(</span><span class="string" id="4652762">&#34;unexpected&nbsp;right&nbsp;paren&nbsp;%#U&#34;</span><span class="op" id="4652790">,</span>&nbsp;<span class="ident" id="4652792">r</span><span class="op" id="4652793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4652797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652801">return</span>&nbsp;<span class="ident" id="4652808">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652825">case</span>&nbsp;<span class="ident" id="4652830">r</span>&nbsp;<span class="op" id="4652832">&lt;=</span>&nbsp;<span class="ident" id="4652835">unicode</span><span class="op" id="4652842">.</span><span class="ident" id="4652843">MaxASCII</span>&nbsp;<span class="op" id="4652852">&amp;&amp;</span>&nbsp;<span class="ident" id="4652855">unicode</span><span class="op" id="4652862">.</span><span class="ident" id="4652863">IsPrint</span><span class="op" id="4652870">(</span><span class="ident" id="4652871">r</span><span class="op" id="4652872">)</span><span class="op" id="4652873">:</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4652877">l</span><span class="op" id="4652878">.</span><span class="ident" id="4652879">emit</span><span class="op" id="4652883">(</span><span class="ident" id="4652884">itemChar</span><span class="op" id="4652892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652896">return</span>&nbsp;<span class="ident" id="4652903">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652920">default</span><span class="op" id="4652927">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652931">return</span>&nbsp;<span class="ident" id="4652938">l</span><span class="op" id="4652939">.</span><span class="ident" id="4652940">errorf</span><span class="op" id="4652946">(</span><span class="string" id="4652947">&#34;unrecognized&nbsp;character&nbsp;in&nbsp;action:&nbsp;%#U&#34;</span><span class="op" id="4652986">,</span>&nbsp;<span class="ident" id="4652988">r</span><span class="op" id="4652989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4652992">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4652995">return</span>&nbsp;<span class="ident" id="4653002">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4653018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4653021">//&nbsp;lexSpace&nbsp;scans&nbsp;a&nbsp;run&nbsp;of&nbsp;space&nbsp;characters.</span><br>
<span class="lineno"></span><span class="comment" id="4653066">//&nbsp;One&nbsp;space&nbsp;has&nbsp;already&nbsp;been&nbsp;seen.</span><br>
<span class="lineno">335</span><span class="keyword" id="4653102">func</span>&nbsp;<span class="ident" id="4653107">lexSpace</span><span class="op" id="4653115">(</span><span class="ident" id="4653116">l</span>&nbsp;<span class="op" id="4653118">*</span><span class="ident" id="4653119">lexer</span><span class="op" id="4653124">)</span>&nbsp;<span class="ident" id="4653126">stateFn</span>&nbsp;<span class="op" id="4653134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4653137">for</span>&nbsp;<span class="ident" id="4653141">isSpace</span><span class="op" id="4653148">(</span><span class="ident" id="4653149">l</span><span class="op" id="4653150">.</span><span class="ident" id="4653151">peek</span><span class="op" id="4653155">(</span><span class="op" id="4653156">)</span><span class="op" id="4653157">)</span>&nbsp;<span class="op" id="4653159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4653163">l</span><span class="op" id="4653164">.</span><span class="ident" id="4653165">next</span><span class="op" id="4653169">(</span><span class="op" id="4653170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4653173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4653176">l</span><span class="op" id="4653177">.</span><span class="ident" id="4653178">emit</span><span class="op" id="4653182">(</span><span class="ident" id="4653183">itemSpace</span><span class="op" id="4653192">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4653195">return</span>&nbsp;<span class="ident" id="4653202">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4653218">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4653221">//&nbsp;lexIdentifier&nbsp;scans&nbsp;an&nbsp;alphanumeric.</span><br>
<span class="lineno"></span><span class="keyword" id="4653261">func</span>&nbsp;<span class="ident" id="4653266">lexIdentifier</span><span class="op" id="4653279">(</span><span class="ident" id="4653280">l</span>&nbsp;<span class="op" id="4653282">*</span><span class="ident" id="4653283">lexer</span><span class="op" id="4653288">)</span>&nbsp;<span class="ident" id="4653290">stateFn</span>&nbsp;<span class="op" id="4653298">{</span><br>
<span class="lineno">345</span><span class="ident" id="4653300">Loop</span><span class="op" id="4653304">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4653307">for</span>&nbsp;<span class="op" id="4653311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4653315">switch</span>&nbsp;<span class="ident" id="4653322">r</span>&nbsp;<span class="op" id="4653324">:=</span>&nbsp;<span class="ident" id="4653327">l</span><span class="op" id="4653328">.</span><span class="ident" id="4653329">next</span><span class="op" id="4653333">(</span><span class="op" id="4653334">)</span><span class="op" id="4653335">;</span>&nbsp;<span class="op" id="4653337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4653341">case</span>&nbsp;<span class="ident" id="4653346">isAlphaNumeric</span><span class="op" id="4653360">(</span><span class="ident" id="4653361">r</span><span class="op" id="4653362">)</span><span class="op" id="4653363">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4653368">//&nbsp;absorb.</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4653381">default</span><span class="op" id="4653388">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4653393">l</span><span class="op" id="4653394">.</span><span class="ident" id="4653395">backup</span><span class="op" id="4653401">(</span><span class="op" id="4653402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4653407">word</span>&nbsp;<span class="op" id="4653412">:=</span>&nbsp;<span class="ident" id="4653415">l</span><span class="op" id="4653416">.</span><span class="ident" id="4653417">input</span><span class="op" id="4653422">[</span><span class="ident" id="4653423">l</span><span class="op" id="4653424">.</span><span class="ident" id="4653425">start</span><span class="op" id="4653430">:</span><span class="ident" id="4653431">l</span><span class="op" id="4653432">.</span><span class="ident" id="4653433">pos</span><span class="op" id="4653436">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4653441">if</span>&nbsp;<span class="op" id="4653444">!</span><span class="ident" id="4653445">l</span><span class="op" id="4653446">.</span><span class="ident" id="4653447">atTerminator</span><span class="op" id="4653459">(</span><span class="op" id="4653460">)</span>&nbsp;<span class="op" id="4653462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4653468">return</span>&nbsp;<span class="ident" id="4653475">l</span><span class="op" id="4653476">.</span><span class="ident" id="4653477">errorf</span><span class="op" id="4653483">(</span><span class="string" id="4653484">&#34;bad&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="4653503">,</span>&nbsp;<span class="ident" id="4653505">r</span><span class="op" id="4653506">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4653511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4653516">switch</span>&nbsp;<span class="op" id="4653523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4653528">case</span>&nbsp;<span class="ident" id="4653533">key</span><span class="op" id="4653536">[</span><span class="ident" id="4653537">word</span><span class="op" id="4653541">]</span>&nbsp;<span class="op" id="4653543">&gt;</span>&nbsp;<span class="ident" id="4653545">itemKeyword</span><span class="op" id="4653556">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4653562">l</span><span class="op" id="4653563">.</span><span class="ident" id="4653564">emit</span><span class="op" id="4653568">(</span><span class="ident" id="4653569">key</span><span class="op" id="4653572">[</span><span class="ident" id="4653573">word</span><span class="op" id="4653577">]</span><span class="op" id="4653578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4653583">case</span>&nbsp;<span class="ident" id="4653588">word</span><span class="op" id="4653592">[</span><span class="num" id="4653593">0</span><span class="op" id="4653594">]</span>&nbsp;<span class="op" id="4653596">==</span>&nbsp;<span class="string" id="4653599">&#39;.&#39;</span><span class="op" id="4653602">:</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4653608">l</span><span class="op" id="4653609">.</span><span class="ident" id="4653610">emit</span><span class="op" id="4653614">(</span><span class="ident" id="4653615">itemField</span><span class="op" id="4653624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4653629">case</span>&nbsp;<span class="ident" id="4653634">word</span>&nbsp;<span class="op" id="4653639">==</span>&nbsp;<span class="string" id="4653642">&#34;true&#34;</span><span class="op" id="4653648">,</span>&nbsp;<span class="ident" id="4653650">word</span>&nbsp;<span class="op" id="4653655">==</span>&nbsp;<span class="string" id="4653658">&#34;false&#34;</span><span class="op" id="4653665">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4653671">l</span><span class="op" id="4653672">.</span><span class="ident" id="4653673">emit</span><span class="op" id="4653677">(</span><span class="ident" id="4653678">itemBool</span><span class="op" id="4653686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4653691">default</span><span class="op" id="4653698">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4653704">l</span><span class="op" id="4653705">.</span><span class="ident" id="4653706">emit</span><span class="op" id="4653710">(</span><span class="ident" id="4653711">itemIdentifier</span><span class="op" id="4653725">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4653730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4653735">break</span>&nbsp;<span class="ident" id="4653741">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4653748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4653751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4653754">return</span>&nbsp;<span class="ident" id="4653761">lexInsideAction</span><br>
<span class="lineno">370</span><span class="op" id="4653777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4653780">//&nbsp;lexField&nbsp;scans&nbsp;a&nbsp;field:&nbsp;.Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="4653822">//&nbsp;The&nbsp;.&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno"></span><span class="keyword" id="4653849">func</span>&nbsp;<span class="ident" id="4653854">lexField</span><span class="op" id="4653862">(</span><span class="ident" id="4653863">l</span>&nbsp;<span class="op" id="4653865">*</span><span class="ident" id="4653866">lexer</span><span class="op" id="4653871">)</span>&nbsp;<span class="ident" id="4653873">stateFn</span>&nbsp;<span class="op" id="4653881">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4653884">return</span>&nbsp;<span class="ident" id="4653891">lexFieldOrVariable</span><span class="op" id="4653909">(</span><span class="ident" id="4653910">l</span><span class="op" id="4653911">,</span>&nbsp;<span class="ident" id="4653913">itemField</span><span class="op" id="4653922">)</span><br>
<span class="lineno"></span><span class="op" id="4653924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4653927">//&nbsp;lexVariable&nbsp;scans&nbsp;a&nbsp;Variable:&nbsp;$Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="4653975">//&nbsp;The&nbsp;$&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno">380</span><span class="keyword" id="4654002">func</span>&nbsp;<span class="ident" id="4654007">lexVariable</span><span class="op" id="4654018">(</span><span class="ident" id="4654019">l</span>&nbsp;<span class="op" id="4654021">*</span><span class="ident" id="4654022">lexer</span><span class="op" id="4654027">)</span>&nbsp;<span class="ident" id="4654029">stateFn</span>&nbsp;<span class="op" id="4654037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4654040">if</span>&nbsp;<span class="ident" id="4654043">l</span><span class="op" id="4654044">.</span><span class="ident" id="4654045">atTerminator</span><span class="op" id="4654057">(</span><span class="op" id="4654058">)</span>&nbsp;<span class="op" id="4654060">{</span>&nbsp;<span class="comment" id="4654062">//&nbsp;Nothing&nbsp;interesting&nbsp;follows&nbsp;-&gt;&nbsp;&#34;$&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4654103">l</span><span class="op" id="4654104">.</span><span class="ident" id="4654105">emit</span><span class="op" id="4654109">(</span><span class="ident" id="4654110">itemVariable</span><span class="op" id="4654122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4654126">return</span>&nbsp;<span class="ident" id="4654133">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4654150">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4654153">return</span>&nbsp;<span class="ident" id="4654160">lexFieldOrVariable</span><span class="op" id="4654178">(</span><span class="ident" id="4654179">l</span><span class="op" id="4654180">,</span>&nbsp;<span class="ident" id="4654182">itemVariable</span><span class="op" id="4654194">)</span><br>
<span class="lineno"></span><span class="op" id="4654196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4654199">//&nbsp;lexVariable&nbsp;scans&nbsp;a&nbsp;field&nbsp;or&nbsp;variable:&nbsp;[.$]Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="4654259">//&nbsp;The&nbsp;.&nbsp;or&nbsp;$&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno">390</span><span class="keyword" id="4654291">func</span>&nbsp;<span class="ident" id="4654296">lexFieldOrVariable</span><span class="op" id="4654314">(</span><span class="ident" id="4654315">l</span>&nbsp;<span class="op" id="4654317">*</span><span class="ident" id="4654318">lexer</span><span class="op" id="4654323">,</span>&nbsp;<span class="ident" id="4654325">typ</span>&nbsp;<span class="ident" id="4654329">itemType</span><span class="op" id="4654337">)</span>&nbsp;<span class="ident" id="4654339">stateFn</span>&nbsp;<span class="op" id="4654347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4654350">if</span>&nbsp;<span class="ident" id="4654353">l</span><span class="op" id="4654354">.</span><span class="ident" id="4654355">atTerminator</span><span class="op" id="4654367">(</span><span class="op" id="4654368">)</span>&nbsp;<span class="op" id="4654370">{</span>&nbsp;<span class="comment" id="4654372">//&nbsp;Nothing&nbsp;interesting&nbsp;follows&nbsp;-&gt;&nbsp;&#34;.&#34;&nbsp;or&nbsp;&#34;$&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4654420">if</span>&nbsp;<span class="ident" id="4654423">typ</span>&nbsp;<span class="op" id="4654427">==</span>&nbsp;<span class="ident" id="4654430">itemVariable</span>&nbsp;<span class="op" id="4654443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4654448">l</span><span class="op" id="4654449">.</span><span class="ident" id="4654450">emit</span><span class="op" id="4654454">(</span><span class="ident" id="4654455">itemVariable</span><span class="op" id="4654467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4654471">}</span>&nbsp;<span class="keyword" id="4654473">else</span>&nbsp;<span class="op" id="4654478">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4654483">l</span><span class="op" id="4654484">.</span><span class="ident" id="4654485">emit</span><span class="op" id="4654489">(</span><span class="ident" id="4654490">itemDot</span><span class="op" id="4654497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4654501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4654505">return</span>&nbsp;<span class="ident" id="4654512">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4654529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4654532">var</span>&nbsp;<span class="ident" id="4654536">r</span>&nbsp;<span class="builtintype" id="4654538">rune</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4654544">for</span>&nbsp;<span class="op" id="4654548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4654552">r</span>&nbsp;<span class="op" id="4654554">=</span>&nbsp;<span class="ident" id="4654556">l</span><span class="op" id="4654557">.</span><span class="ident" id="4654558">next</span><span class="op" id="4654562">(</span><span class="op" id="4654563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4654567">if</span>&nbsp;<span class="op" id="4654570">!</span><span class="ident" id="4654571">isAlphaNumeric</span><span class="op" id="4654585">(</span><span class="ident" id="4654586">r</span><span class="op" id="4654587">)</span>&nbsp;<span class="op" id="4654589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4654594">l</span><span class="op" id="4654595">.</span><span class="ident" id="4654596">backup</span><span class="op" id="4654602">(</span><span class="op" id="4654603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4654608">break</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4654616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4654619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4654622">if</span>&nbsp;<span class="op" id="4654625">!</span><span class="ident" id="4654626">l</span><span class="op" id="4654627">.</span><span class="ident" id="4654628">atTerminator</span><span class="op" id="4654640">(</span><span class="op" id="4654641">)</span>&nbsp;<span class="op" id="4654643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4654647">return</span>&nbsp;<span class="ident" id="4654654">l</span><span class="op" id="4654655">.</span><span class="ident" id="4654656">errorf</span><span class="op" id="4654662">(</span><span class="string" id="4654663">&#34;bad&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="4654682">,</span>&nbsp;<span class="ident" id="4654684">r</span><span class="op" id="4654685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4654688">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4654691">l</span><span class="op" id="4654692">.</span><span class="ident" id="4654693">emit</span><span class="op" id="4654697">(</span><span class="ident" id="4654698">typ</span><span class="op" id="4654701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4654704">return</span>&nbsp;<span class="ident" id="4654711">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4654727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4654730">//&nbsp;atTerminator&nbsp;reports&nbsp;whether&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;valid&nbsp;termination&nbsp;character&nbsp;to</span><br>
<span class="lineno">415</span><span class="comment" id="4654809">//&nbsp;appear&nbsp;after&nbsp;an&nbsp;identifier.&nbsp;Breaks&nbsp;.X.Y&nbsp;into&nbsp;two&nbsp;pieces.&nbsp;Also&nbsp;catches&nbsp;cases</span><br>
<span class="lineno"></span><span class="comment" id="4654888">//&nbsp;like&nbsp;&#34;$x+2&#34;&nbsp;not&nbsp;being&nbsp;acceptable&nbsp;without&nbsp;a&nbsp;space,&nbsp;in&nbsp;case&nbsp;we&nbsp;decide&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="4654963">//&nbsp;day&nbsp;to&nbsp;implement&nbsp;arithmetic.</span><br>
<span class="lineno"></span><span class="keyword" id="4654995">func</span>&nbsp;<span class="op" id="4655000">(</span><span class="ident" id="4655001">l</span>&nbsp;<span class="op" id="4655003">*</span><span class="ident" id="4655004">lexer</span><span class="op" id="4655009">)</span>&nbsp;<span class="ident" id="4655011">atTerminator</span><span class="op" id="4655023">(</span><span class="op" id="4655024">)</span>&nbsp;<span class="builtintype" id="4655026">bool</span>&nbsp;<span class="op" id="4655031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4655034">r</span>&nbsp;<span class="op" id="4655036">:=</span>&nbsp;<span class="ident" id="4655039">l</span><span class="op" id="4655040">.</span><span class="ident" id="4655041">peek</span><span class="op" id="4655045">(</span><span class="op" id="4655046">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655049">if</span>&nbsp;<span class="ident" id="4655052">isSpace</span><span class="op" id="4655059">(</span><span class="ident" id="4655060">r</span><span class="op" id="4655061">)</span>&nbsp;<span class="op" id="4655063">||</span>&nbsp;<span class="ident" id="4655066">isEndOfLine</span><span class="op" id="4655077">(</span><span class="ident" id="4655078">r</span><span class="op" id="4655079">)</span>&nbsp;<span class="op" id="4655081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655085">return</span>&nbsp;<span class="builtintype" id="4655092">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4655098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655101">switch</span>&nbsp;<span class="ident" id="4655108">r</span>&nbsp;<span class="op" id="4655110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655113">case</span>&nbsp;<span class="ident" id="4655118">eof</span><span class="op" id="4655121">,</span>&nbsp;<span class="string" id="4655123">&#39;.&#39;</span><span class="op" id="4655126">,</span>&nbsp;<span class="string" id="4655128">&#39;,&#39;</span><span class="op" id="4655131">,</span>&nbsp;<span class="string" id="4655133">&#39;|&#39;</span><span class="op" id="4655136">,</span>&nbsp;<span class="string" id="4655138">&#39;:&#39;</span><span class="op" id="4655141">,</span>&nbsp;<span class="string" id="4655143">&#39;)&#39;</span><span class="op" id="4655146">,</span>&nbsp;<span class="string" id="4655148">&#39;(&#39;</span><span class="op" id="4655151">:</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655155">return</span>&nbsp;<span class="builtintype" id="4655162">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4655168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4655171">//&nbsp;Does&nbsp;r&nbsp;start&nbsp;the&nbsp;delimiter?&nbsp;This&nbsp;can&nbsp;be&nbsp;ambiguous&nbsp;(with&nbsp;delim==&#34;//&#34;,&nbsp;$x/2&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4655254">//&nbsp;succeed&nbsp;but&nbsp;should&nbsp;fail)&nbsp;but&nbsp;only&nbsp;in&nbsp;extremely&nbsp;rare&nbsp;cases&nbsp;caused&nbsp;by&nbsp;willfully</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4655336">//&nbsp;bad&nbsp;choice&nbsp;of&nbsp;delimiter.</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655365">if</span>&nbsp;<span class="ident" id="4655368">rd</span><span class="op" id="4655370">,</span>&nbsp;<span class="ident" id="4655372">_</span>&nbsp;<span class="op" id="4655374">:=</span>&nbsp;<span class="ident" id="4655377">utf8</span><span class="op" id="4655381">.</span><span class="ident" id="4655382">DecodeRuneInString</span><span class="op" id="4655400">(</span><span class="ident" id="4655401">l</span><span class="op" id="4655402">.</span><span class="ident" id="4655403">rightDelim</span><span class="op" id="4655413">)</span><span class="op" id="4655414">;</span>&nbsp;<span class="ident" id="4655416">rd</span>&nbsp;<span class="op" id="4655419">==</span>&nbsp;<span class="ident" id="4655422">r</span>&nbsp;<span class="op" id="4655424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655428">return</span>&nbsp;<span class="builtintype" id="4655435">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4655441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655444">return</span>&nbsp;<span class="builtintype" id="4655451">false</span><br>
<span class="lineno"></span><span class="op" id="4655457">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="4655460">//&nbsp;lexChar&nbsp;scans&nbsp;a&nbsp;character&nbsp;constant.&nbsp;The&nbsp;initial&nbsp;quote&nbsp;is&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="4655528">//&nbsp;scanned.&nbsp;Syntax&nbsp;checking&nbsp;is&nbsp;done&nbsp;by&nbsp;the&nbsp;parser.</span><br>
<span class="lineno"></span><span class="keyword" id="4655579">func</span>&nbsp;<span class="ident" id="4655584">lexChar</span><span class="op" id="4655591">(</span><span class="ident" id="4655592">l</span>&nbsp;<span class="op" id="4655594">*</span><span class="ident" id="4655595">lexer</span><span class="op" id="4655600">)</span>&nbsp;<span class="ident" id="4655602">stateFn</span>&nbsp;<span class="op" id="4655610">{</span><br>
<span class="lineno"></span><span class="ident" id="4655612">Loop</span><span class="op" id="4655616">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655619">for</span>&nbsp;<span class="op" id="4655623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655627">switch</span>&nbsp;<span class="ident" id="4655634">l</span><span class="op" id="4655635">.</span><span class="ident" id="4655636">next</span><span class="op" id="4655640">(</span><span class="op" id="4655641">)</span>&nbsp;<span class="op" id="4655643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655647">case</span>&nbsp;<span class="string" id="4655652">&#39;\\&#39;</span><span class="op" id="4655656">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655661">if</span>&nbsp;<span class="ident" id="4655664">r</span>&nbsp;<span class="op" id="4655666">:=</span>&nbsp;<span class="ident" id="4655669">l</span><span class="op" id="4655670">.</span><span class="ident" id="4655671">next</span><span class="op" id="4655675">(</span><span class="op" id="4655676">)</span><span class="op" id="4655677">;</span>&nbsp;<span class="ident" id="4655679">r</span>&nbsp;<span class="op" id="4655681">!=</span>&nbsp;<span class="ident" id="4655684">eof</span>&nbsp;<span class="op" id="4655688">&amp;&amp;</span>&nbsp;<span class="ident" id="4655691">r</span>&nbsp;<span class="op" id="4655693">!=</span>&nbsp;<span class="string" id="4655696">&#39;\n&#39;</span>&nbsp;<span class="op" id="4655701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655707">break</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4655716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655721">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655735">case</span>&nbsp;<span class="ident" id="4655740">eof</span><span class="op" id="4655743">,</span>&nbsp;<span class="string" id="4655745">&#39;\n&#39;</span><span class="op" id="4655749">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655754">return</span>&nbsp;<span class="ident" id="4655761">l</span><span class="op" id="4655762">.</span><span class="ident" id="4655763">errorf</span><span class="op" id="4655769">(</span><span class="string" id="4655770">&#34;unterminated&nbsp;character&nbsp;constant&#34;</span><span class="op" id="4655803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655807">case</span>&nbsp;<span class="string" id="4655812">&#39;\&#39;&#39;</span><span class="op" id="4655816">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655821">break</span>&nbsp;<span class="ident" id="4655827">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4655834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4655837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4655840">l</span><span class="op" id="4655841">.</span><span class="ident" id="4655842">emit</span><span class="op" id="4655846">(</span><span class="ident" id="4655847">itemCharConstant</span><span class="op" id="4655863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4655866">return</span>&nbsp;<span class="ident" id="4655873">lexInsideAction</span><br>
<span class="lineno">455</span><span class="op" id="4655889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4655892">//&nbsp;lexNumber&nbsp;scans&nbsp;a&nbsp;number:&nbsp;decimal,&nbsp;octal,&nbsp;hex,&nbsp;float,&nbsp;or&nbsp;imaginary.&nbsp;This</span><br>
<span class="lineno"></span><span class="comment" id="4655968">//&nbsp;isn&#39;t&nbsp;a&nbsp;perfect&nbsp;number&nbsp;scanner&nbsp;-&nbsp;for&nbsp;instance&nbsp;it&nbsp;accepts&nbsp;&#34;.&#34;&nbsp;and&nbsp;&#34;0x0.2&#34;</span><br>
<span class="lineno"></span><span class="comment" id="4656044">//&nbsp;and&nbsp;&#34;089&#34;&nbsp;-&nbsp;but&nbsp;when&nbsp;it&#39;s&nbsp;wrong&nbsp;the&nbsp;input&nbsp;is&nbsp;invalid&nbsp;and&nbsp;the&nbsp;parser&nbsp;(via</span><br>
<span class="lineno">460</span><span class="comment" id="4656120">//&nbsp;strconv)&nbsp;will&nbsp;notice.</span><br>
<span class="lineno"></span><span class="keyword" id="4656145">func</span>&nbsp;<span class="ident" id="4656150">lexNumber</span><span class="op" id="4656159">(</span><span class="ident" id="4656160">l</span>&nbsp;<span class="op" id="4656162">*</span><span class="ident" id="4656163">lexer</span><span class="op" id="4656168">)</span>&nbsp;<span class="ident" id="4656170">stateFn</span>&nbsp;<span class="op" id="4656178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4656181">if</span>&nbsp;<span class="op" id="4656184">!</span><span class="ident" id="4656185">l</span><span class="op" id="4656186">.</span><span class="ident" id="4656187">scanNumber</span><span class="op" id="4656197">(</span><span class="op" id="4656198">)</span>&nbsp;<span class="op" id="4656200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4656204">return</span>&nbsp;<span class="ident" id="4656211">l</span><span class="op" id="4656212">.</span><span class="ident" id="4656213">errorf</span><span class="op" id="4656219">(</span><span class="string" id="4656220">&#34;bad&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="4656243">,</span>&nbsp;<span class="ident" id="4656245">l</span><span class="op" id="4656246">.</span><span class="ident" id="4656247">input</span><span class="op" id="4656252">[</span><span class="ident" id="4656253">l</span><span class="op" id="4656254">.</span><span class="ident" id="4656255">start</span><span class="op" id="4656260">:</span><span class="ident" id="4656261">l</span><span class="op" id="4656262">.</span><span class="ident" id="4656263">pos</span><span class="op" id="4656266">]</span><span class="op" id="4656267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4656270">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4656273">if</span>&nbsp;<span class="ident" id="4656276">sign</span>&nbsp;<span class="op" id="4656281">:=</span>&nbsp;<span class="ident" id="4656284">l</span><span class="op" id="4656285">.</span><span class="ident" id="4656286">peek</span><span class="op" id="4656290">(</span><span class="op" id="4656291">)</span><span class="op" id="4656292">;</span>&nbsp;<span class="ident" id="4656294">sign</span>&nbsp;<span class="op" id="4656299">==</span>&nbsp;<span class="string" id="4656302">&#39;+&#39;</span>&nbsp;<span class="op" id="4656306">||</span>&nbsp;<span class="ident" id="4656309">sign</span>&nbsp;<span class="op" id="4656314">==</span>&nbsp;<span class="string" id="4656317">&#39;-&#39;</span>&nbsp;<span class="op" id="4656321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4656325">//&nbsp;Complex:&nbsp;1+2i.&nbsp;No&nbsp;spaces,&nbsp;must&nbsp;end&nbsp;in&nbsp;&#39;i&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4656373">if</span>&nbsp;<span class="op" id="4656376">!</span><span class="ident" id="4656377">l</span><span class="op" id="4656378">.</span><span class="ident" id="4656379">scanNumber</span><span class="op" id="4656389">(</span><span class="op" id="4656390">)</span>&nbsp;<span class="op" id="4656392">||</span>&nbsp;<span class="ident" id="4656395">l</span><span class="op" id="4656396">.</span><span class="ident" id="4656397">input</span><span class="op" id="4656402">[</span><span class="ident" id="4656403">l</span><span class="op" id="4656404">.</span><span class="ident" id="4656405">pos</span><span class="op" id="4656408">-</span><span class="num" id="4656409">1</span><span class="op" id="4656410">]</span>&nbsp;<span class="op" id="4656412">!=</span>&nbsp;<span class="string" id="4656415">&#39;i&#39;</span>&nbsp;<span class="op" id="4656419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4656424">return</span>&nbsp;<span class="ident" id="4656431">l</span><span class="op" id="4656432">.</span><span class="ident" id="4656433">errorf</span><span class="op" id="4656439">(</span><span class="string" id="4656440">&#34;bad&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="4656463">,</span>&nbsp;<span class="ident" id="4656465">l</span><span class="op" id="4656466">.</span><span class="ident" id="4656467">input</span><span class="op" id="4656472">[</span><span class="ident" id="4656473">l</span><span class="op" id="4656474">.</span><span class="ident" id="4656475">start</span><span class="op" id="4656480">:</span><span class="ident" id="4656481">l</span><span class="op" id="4656482">.</span><span class="ident" id="4656483">pos</span><span class="op" id="4656486">]</span><span class="op" id="4656487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4656491">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4656495">l</span><span class="op" id="4656496">.</span><span class="ident" id="4656497">emit</span><span class="op" id="4656501">(</span><span class="ident" id="4656502">itemComplex</span><span class="op" id="4656513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4656516">}</span>&nbsp;<span class="keyword" id="4656518">else</span>&nbsp;<span class="op" id="4656523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4656527">l</span><span class="op" id="4656528">.</span><span class="ident" id="4656529">emit</span><span class="op" id="4656533">(</span><span class="ident" id="4656534">itemNumber</span><span class="op" id="4656544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4656547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4656550">return</span>&nbsp;<span class="ident" id="4656557">lexInsideAction</span><br>
<span class="lineno">475</span><span class="op" id="4656573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4656576">func</span>&nbsp;<span class="op" id="4656581">(</span><span class="ident" id="4656582">l</span>&nbsp;<span class="op" id="4656584">*</span><span class="ident" id="4656585">lexer</span><span class="op" id="4656590">)</span>&nbsp;<span class="ident" id="4656592">scanNumber</span><span class="op" id="4656602">(</span><span class="op" id="4656603">)</span>&nbsp;<span class="builtintype" id="4656605">bool</span>&nbsp;<span class="op" id="4656610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4656613">//&nbsp;Optional&nbsp;leading&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4656640">l</span><span class="op" id="4656641">.</span><span class="ident" id="4656642">accept</span><span class="op" id="4656648">(</span><span class="string" id="4656649">&#34;+-&#34;</span><span class="op" id="4656653">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4656656">//&nbsp;Is&nbsp;it&nbsp;hex?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4656671">digits</span>&nbsp;<span class="op" id="4656678">:=</span>&nbsp;<span class="string" id="4656681">&#34;0123456789&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4656695">if</span>&nbsp;<span class="ident" id="4656698">l</span><span class="op" id="4656699">.</span><span class="ident" id="4656700">accept</span><span class="op" id="4656706">(</span><span class="string" id="4656707">&#34;0&#34;</span><span class="op" id="4656710">)</span>&nbsp;<span class="op" id="4656712">&amp;&amp;</span>&nbsp;<span class="ident" id="4656715">l</span><span class="op" id="4656716">.</span><span class="ident" id="4656717">accept</span><span class="op" id="4656723">(</span><span class="string" id="4656724">&#34;xX&#34;</span><span class="op" id="4656728">)</span>&nbsp;<span class="op" id="4656730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4656734">digits</span>&nbsp;<span class="op" id="4656741">=</span>&nbsp;<span class="string" id="4656743">&#34;0123456789abcdefABCDEF&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4656769">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4656772">l</span><span class="op" id="4656773">.</span><span class="ident" id="4656774">acceptRun</span><span class="op" id="4656783">(</span><span class="ident" id="4656784">digits</span><span class="op" id="4656790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4656793">if</span>&nbsp;<span class="ident" id="4656796">l</span><span class="op" id="4656797">.</span><span class="ident" id="4656798">accept</span><span class="op" id="4656804">(</span><span class="string" id="4656805">&#34;.&#34;</span><span class="op" id="4656808">)</span>&nbsp;<span class="op" id="4656810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4656814">l</span><span class="op" id="4656815">.</span><span class="ident" id="4656816">acceptRun</span><span class="op" id="4656825">(</span><span class="ident" id="4656826">digits</span><span class="op" id="4656832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4656835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4656838">if</span>&nbsp;<span class="ident" id="4656841">l</span><span class="op" id="4656842">.</span><span class="ident" id="4656843">accept</span><span class="op" id="4656849">(</span><span class="string" id="4656850">&#34;eE&#34;</span><span class="op" id="4656854">)</span>&nbsp;<span class="op" id="4656856">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4656860">l</span><span class="op" id="4656861">.</span><span class="ident" id="4656862">accept</span><span class="op" id="4656868">(</span><span class="string" id="4656869">&#34;+-&#34;</span><span class="op" id="4656873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4656877">l</span><span class="op" id="4656878">.</span><span class="ident" id="4656879">acceptRun</span><span class="op" id="4656888">(</span><span class="string" id="4656889">&#34;0123456789&#34;</span><span class="op" id="4656901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4656904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4656907">//&nbsp;Is&nbsp;it&nbsp;imaginary?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4656928">l</span><span class="op" id="4656929">.</span><span class="ident" id="4656930">accept</span><span class="op" id="4656936">(</span><span class="string" id="4656937">&#34;i&#34;</span><span class="op" id="4656940">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4656943">//&nbsp;Next&nbsp;thing&nbsp;mustn&#39;t&nbsp;be&nbsp;alphanumeric.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4656983">if</span>&nbsp;<span class="ident" id="4656986">isAlphaNumeric</span><span class="op" id="4657000">(</span><span class="ident" id="4657001">l</span><span class="op" id="4657002">.</span><span class="ident" id="4657003">peek</span><span class="op" id="4657007">(</span><span class="op" id="4657008">)</span><span class="op" id="4657009">)</span>&nbsp;<span class="op" id="4657011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4657015">l</span><span class="op" id="4657016">.</span><span class="ident" id="4657017">next</span><span class="op" id="4657021">(</span><span class="op" id="4657022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657026">return</span>&nbsp;<span class="builtintype" id="4657033">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4657040">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657043">return</span>&nbsp;<span class="builtintype" id="4657050">true</span><br>
<span class="lineno"></span><span class="op" id="4657055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4657058">//&nbsp;lexQuote&nbsp;scans&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4657093">func</span>&nbsp;<span class="ident" id="4657098">lexQuote</span><span class="op" id="4657106">(</span><span class="ident" id="4657107">l</span>&nbsp;<span class="op" id="4657109">*</span><span class="ident" id="4657110">lexer</span><span class="op" id="4657115">)</span>&nbsp;<span class="ident" id="4657117">stateFn</span>&nbsp;<span class="op" id="4657125">{</span><br>
<span class="lineno">505</span><span class="ident" id="4657127">Loop</span><span class="op" id="4657131">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657134">for</span>&nbsp;<span class="op" id="4657138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657142">switch</span>&nbsp;<span class="ident" id="4657149">l</span><span class="op" id="4657150">.</span><span class="ident" id="4657151">next</span><span class="op" id="4657155">(</span><span class="op" id="4657156">)</span>&nbsp;<span class="op" id="4657158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657162">case</span>&nbsp;<span class="string" id="4657167">&#39;\\&#39;</span><span class="op" id="4657171">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657176">if</span>&nbsp;<span class="ident" id="4657179">r</span>&nbsp;<span class="op" id="4657181">:=</span>&nbsp;<span class="ident" id="4657184">l</span><span class="op" id="4657185">.</span><span class="ident" id="4657186">next</span><span class="op" id="4657190">(</span><span class="op" id="4657191">)</span><span class="op" id="4657192">;</span>&nbsp;<span class="ident" id="4657194">r</span>&nbsp;<span class="op" id="4657196">!=</span>&nbsp;<span class="ident" id="4657199">eof</span>&nbsp;<span class="op" id="4657203">&amp;&amp;</span>&nbsp;<span class="ident" id="4657206">r</span>&nbsp;<span class="op" id="4657208">!=</span>&nbsp;<span class="string" id="4657211">&#39;\n&#39;</span>&nbsp;<span class="op" id="4657216">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657222">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4657231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657236">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657250">case</span>&nbsp;<span class="ident" id="4657255">eof</span><span class="op" id="4657258">,</span>&nbsp;<span class="string" id="4657260">&#39;\n&#39;</span><span class="op" id="4657264">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657269">return</span>&nbsp;<span class="ident" id="4657276">l</span><span class="op" id="4657277">.</span><span class="ident" id="4657278">errorf</span><span class="op" id="4657284">(</span><span class="string" id="4657285">&#34;unterminated&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="4657313">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657317">case</span>&nbsp;<span class="string" id="4657322">&#39;&#34;&#39;</span><span class="op" id="4657325">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657330">break</span>&nbsp;<span class="ident" id="4657336">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4657343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4657346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4657349">l</span><span class="op" id="4657350">.</span><span class="ident" id="4657351">emit</span><span class="op" id="4657355">(</span><span class="ident" id="4657356">itemString</span><span class="op" id="4657366">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657369">return</span>&nbsp;<span class="ident" id="4657376">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4657392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4657395">//&nbsp;lexRawQuote&nbsp;scans&nbsp;a&nbsp;raw&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4657437">func</span>&nbsp;<span class="ident" id="4657442">lexRawQuote</span><span class="op" id="4657453">(</span><span class="ident" id="4657454">l</span>&nbsp;<span class="op" id="4657456">*</span><span class="ident" id="4657457">lexer</span><span class="op" id="4657462">)</span>&nbsp;<span class="ident" id="4657464">stateFn</span>&nbsp;<span class="op" id="4657472">{</span><br>
<span class="lineno">525</span><span class="ident" id="4657474">Loop</span><span class="op" id="4657478">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657481">for</span>&nbsp;<span class="op" id="4657485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657489">switch</span>&nbsp;<span class="ident" id="4657496">l</span><span class="op" id="4657497">.</span><span class="ident" id="4657498">next</span><span class="op" id="4657502">(</span><span class="op" id="4657503">)</span>&nbsp;<span class="op" id="4657505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657509">case</span>&nbsp;<span class="ident" id="4657514">eof</span><span class="op" id="4657517">,</span>&nbsp;<span class="string" id="4657519">&#39;\n&#39;</span><span class="op" id="4657523">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657528">return</span>&nbsp;<span class="ident" id="4657535">l</span><span class="op" id="4657536">.</span><span class="ident" id="4657537">errorf</span><span class="op" id="4657543">(</span><span class="string" id="4657544">&#34;unterminated&nbsp;raw&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="4657576">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657580">case</span>&nbsp;<span class="string" id="4657585">&#39;`&#39;</span><span class="op" id="4657588">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657593">break</span>&nbsp;<span class="ident" id="4657599">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4657606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4657609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4657612">l</span><span class="op" id="4657613">.</span><span class="ident" id="4657614">emit</span><span class="op" id="4657618">(</span><span class="ident" id="4657619">itemRawString</span><span class="op" id="4657632">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657635">return</span>&nbsp;<span class="ident" id="4657642">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4657658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4657661">//&nbsp;isSpace&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;a&nbsp;space&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="4657712">func</span>&nbsp;<span class="ident" id="4657717">isSpace</span><span class="op" id="4657724">(</span><span class="ident" id="4657725">r</span>&nbsp;<span class="builtintype" id="4657727">rune</span><span class="op" id="4657731">)</span>&nbsp;<span class="builtintype" id="4657733">bool</span>&nbsp;<span class="op" id="4657738">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657741">return</span>&nbsp;<span class="ident" id="4657748">r</span>&nbsp;<span class="op" id="4657750">==</span>&nbsp;<span class="string" id="4657753">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4657757">||</span>&nbsp;<span class="ident" id="4657760">r</span>&nbsp;<span class="op" id="4657762">==</span>&nbsp;<span class="string" id="4657765">&#39;\t&#39;</span><br>
<span class="lineno"></span><span class="op" id="4657770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4657773">//&nbsp;isEndOfLine&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;an&nbsp;end-of-line&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="4657835">func</span>&nbsp;<span class="ident" id="4657840">isEndOfLine</span><span class="op" id="4657851">(</span><span class="ident" id="4657852">r</span>&nbsp;<span class="builtintype" id="4657854">rune</span><span class="op" id="4657858">)</span>&nbsp;<span class="builtintype" id="4657860">bool</span>&nbsp;<span class="op" id="4657865">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4657868">return</span>&nbsp;<span class="ident" id="4657875">r</span>&nbsp;<span class="op" id="4657877">==</span>&nbsp;<span class="string" id="4657880">&#39;\r&#39;</span>&nbsp;<span class="op" id="4657885">||</span>&nbsp;<span class="ident" id="4657888">r</span>&nbsp;<span class="op" id="4657890">==</span>&nbsp;<span class="string" id="4657893">&#39;\n&#39;</span><br>
<span class="lineno"></span><span class="op" id="4657898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4657901">//&nbsp;isAlphaNumeric&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;an&nbsp;alphabetic,&nbsp;digit,&nbsp;or&nbsp;underscore.</span><br>
<span class="lineno"></span><span class="keyword" id="4657977">func</span>&nbsp;<span class="ident" id="4657982">isAlphaNumeric</span><span class="op" id="4657996">(</span><span class="ident" id="4657997">r</span>&nbsp;<span class="builtintype" id="4657999">rune</span><span class="op" id="4658003">)</span>&nbsp;<span class="builtintype" id="4658005">bool</span>&nbsp;<span class="op" id="4658010">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4658013">return</span>&nbsp;<span class="ident" id="4658020">r</span>&nbsp;<span class="op" id="4658022">==</span>&nbsp;<span class="string" id="4658025">&#39;_&#39;</span>&nbsp;<span class="op" id="4658029">||</span>&nbsp;<span class="ident" id="4658032">unicode</span><span class="op" id="4658039">.</span><span class="ident" id="4658040">IsLetter</span><span class="op" id="4658048">(</span><span class="ident" id="4658049">r</span><span class="op" id="4658050">)</span>&nbsp;<span class="op" id="4658052">||</span>&nbsp;<span class="ident" id="4658055">unicode</span><span class="op" id="4658062">.</span><span class="ident" id="4658063">IsDigit</span><span class="op" id="4658070">(</span><span class="ident" id="4658071">r</span><span class="op" id="4658072">)</span><br>
<span class="lineno"></span><span class="op" id="4658074">}</span>
</div>
</body>
</html>
