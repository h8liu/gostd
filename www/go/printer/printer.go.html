<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5324379">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5324434">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5324488">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5324539">//&nbsp;Package&nbsp;printer&nbsp;implements&nbsp;printing&nbsp;of&nbsp;AST&nbsp;nodes.</span><br>
<span class="lineno"></span><span class="keyword" id="5324592">package</span>&nbsp;<span class="ident" id="5324600">printer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5324609">import</span>&nbsp;<span class="op" id="5324616">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5324619">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5324626">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5324636">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5324648">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5324654">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5324660">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5324671">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5324682">&#34;text/tabwriter&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5324700">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="5324710">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="5324713">const</span>&nbsp;<span class="op" id="5324719">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324722">maxNewlines</span>&nbsp;<span class="op" id="5324734">=</span>&nbsp;<span class="num" id="5324736">2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5324742">//&nbsp;max.&nbsp;number&nbsp;of&nbsp;newlines&nbsp;between&nbsp;source&nbsp;text</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324790">debug</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5324802">=</span>&nbsp;<span class="builtintype" id="5324804">false</span>&nbsp;<span class="comment" id="5324810">//&nbsp;enable&nbsp;for&nbsp;debugging</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324835">infinity</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5324847">=</span>&nbsp;<span class="num" id="5324849">1</span>&nbsp;<span class="op" id="5324851">&lt;&lt;</span>&nbsp;<span class="num" id="5324854">30</span><br>
<span class="lineno"></span><span class="op" id="5324857">)</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5324860">type</span>&nbsp;<span class="ident" id="5324865">whiteSpace</span>&nbsp;<span class="builtintype" id="5324876">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5324882">const</span>&nbsp;<span class="op" id="5324888">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324891">ignore</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5324900">=</span>&nbsp;<span class="ident" id="5324902"><a href="/go/printer/printer.go.html#5324865">whiteSpace</a></span><span class="op" id="5324912">(</span><span class="num" id="5324913">0</span><span class="op" id="5324914">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324917">blank</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5324926">=</span>&nbsp;<span class="ident" id="5324928"><a href="/go/printer/printer.go.html#5324865">whiteSpace</a></span><span class="op" id="5324938">(</span><span class="string" id="5324939">&#39;&nbsp;&#39;</span><span class="op" id="5324942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324945">vtab</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5324954">=</span>&nbsp;<span class="ident" id="5324956"><a href="/go/printer/printer.go.html#5324865">whiteSpace</a></span><span class="op" id="5324966">(</span><span class="string" id="5324967">&#39;\v&#39;</span><span class="op" id="5324971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324974">newline</span>&nbsp;&nbsp;<span class="op" id="5324983">=</span>&nbsp;<span class="ident" id="5324985"><a href="/go/printer/printer.go.html#5324865">whiteSpace</a></span><span class="op" id="5324995">(</span><span class="string" id="5324996">&#39;\n&#39;</span><span class="op" id="5325000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325003">formfeed</span>&nbsp;<span class="op" id="5325012">=</span>&nbsp;<span class="ident" id="5325014"><a href="/go/printer/printer.go.html#5324865">whiteSpace</a></span><span class="op" id="5325024">(</span><span class="string" id="5325025">&#39;\f&#39;</span><span class="op" id="5325029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325032">indent</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5325041">=</span>&nbsp;<span class="ident" id="5325043"><a href="/go/printer/printer.go.html#5324865">whiteSpace</a></span><span class="op" id="5325053">(</span><span class="string" id="5325054">&#39;&gt;&#39;</span><span class="op" id="5325057">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325060">unindent</span>&nbsp;<span class="op" id="5325069">=</span>&nbsp;<span class="ident" id="5325071"><a href="/go/printer/printer.go.html#5324865">whiteSpace</a></span><span class="op" id="5325081">(</span><span class="string" id="5325082">&#39;&lt;&#39;</span><span class="op" id="5325085">)</span><br>
<span class="lineno"></span><span class="op" id="5325087">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5325090">//&nbsp;A&nbsp;pmode&nbsp;value&nbsp;represents&nbsp;the&nbsp;current&nbsp;printer&nbsp;mode.</span><br>
<span class="lineno"></span><span class="keyword" id="5325144">type</span>&nbsp;<span class="ident" id="5325149">pmode</span>&nbsp;<span class="builtintype" id="5325155">int</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="5325160">const</span>&nbsp;<span class="op" id="5325166">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325169">noExtraBlank</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5325186"><a href="/go/printer/printer.go.html#5325149">pmode</a></span>&nbsp;<span class="op" id="5325192">=</span>&nbsp;<span class="num" id="5325194">1</span>&nbsp;<span class="op" id="5325196">&lt;&lt;</span>&nbsp;<span class="ident" id="5325199">iota</span>&nbsp;<span class="comment" id="5325204">//&nbsp;disables&nbsp;extra&nbsp;blank&nbsp;after&nbsp;/*-style&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325252">noExtraLinebreak</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5325287">//&nbsp;disables&nbsp;extra&nbsp;line&nbsp;break&nbsp;after&nbsp;/*-style&nbsp;comment</span><br>
<span class="lineno"></span><span class="op" id="5325339">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="5325342">type</span>&nbsp;<span class="ident" id="5325347">commentInfo</span>&nbsp;<span class="keyword" id="5325359">struct</span>&nbsp;<span class="op" id="5325366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325369">cindex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5325384">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5325402">//&nbsp;current&nbsp;comment&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325428">comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5325443">*</span><span class="ident" id="5325444"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5325447">.</span><span class="ident" id="5325448">CommentGroup</span>&nbsp;<span class="comment" id="5325461">//&nbsp;=&nbsp;printer.comments[cindex];&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325500">commentOffset</span>&nbsp;&nbsp;<span class="builtintype" id="5325515">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5325533">//&nbsp;=&nbsp;printer.posFor(printer.comments[cindex].List[0].Pos()).Offset;&nbsp;or&nbsp;infinity</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325614">commentNewline</span>&nbsp;<span class="builtintype" id="5325629">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5325647">//&nbsp;true&nbsp;if&nbsp;the&nbsp;comment&nbsp;group&nbsp;contains&nbsp;newlines</span><br>
<span class="lineno"></span><span class="op" id="5325694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5325697">type</span>&nbsp;<span class="ident" id="5325702">printer</span>&nbsp;<span class="keyword" id="5325710">struct</span>&nbsp;<span class="op" id="5325717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5325720">//&nbsp;Configuration&nbsp;(does&nbsp;not&nbsp;change&nbsp;after&nbsp;initialization)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325777"><a href="/go/printer/printer.go.html#5359429">Config</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325785">fset</span>&nbsp;<span class="op" id="5325790">*</span><span class="ident" id="5325791"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5325796">.</span><span class="ident" id="5325797">FileSet</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5325807">//&nbsp;Current&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325825">output</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5325837">[</span><span class="op" id="5325838">]</span><span class="builtintype" id="5325839">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5325850">//&nbsp;raw&nbsp;printer&nbsp;result</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325873">indent</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5325885">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5325898">//&nbsp;current&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325922">mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5325934"><a href="/go/printer/printer.go.html#5325149">pmode</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5325947">//&nbsp;current&nbsp;printer&nbsp;mode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325972">impliedSemi</span>&nbsp;<span class="builtintype" id="5325984">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5325997">//&nbsp;if&nbsp;set,&nbsp;a&nbsp;linebreak&nbsp;implies&nbsp;a&nbsp;semicolon</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326041">lastTok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5326053"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5326058">.</span><span class="ident" id="5326059">Token</span>&nbsp;&nbsp;<span class="comment" id="5326066">//&nbsp;last&nbsp;token&nbsp;printed&nbsp;(token.ILLEGAL&nbsp;if&nbsp;it&#39;s&nbsp;whitespace)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326124">prevOpen</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5326136"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5326141">.</span><span class="ident" id="5326142">Token</span>&nbsp;&nbsp;<span class="comment" id="5326149">//&nbsp;previous&nbsp;non-brace&nbsp;&#34;open&#34;&nbsp;token&nbsp;(,&nbsp;[,&nbsp;or&nbsp;token.ILLEGAL</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326208">wsbuf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5326220">[</span><span class="op" id="5326221">]</span><span class="ident" id="5326222"><a href="/go/printer/printer.go.html#5324865">whiteSpace</a></span>&nbsp;<span class="comment" id="5326233">//&nbsp;delayed&nbsp;white&nbsp;space</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326258">//&nbsp;Positions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326272">//&nbsp;The&nbsp;out&nbsp;position&nbsp;differs&nbsp;from&nbsp;the&nbsp;pos&nbsp;position&nbsp;when&nbsp;the&nbsp;result</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326339">//&nbsp;formatting&nbsp;differs&nbsp;from&nbsp;the&nbsp;source&nbsp;formatting&nbsp;(in&nbsp;the&nbsp;amount&nbsp;of</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326407">//&nbsp;white&nbsp;space).&nbsp;If&nbsp;there&#39;s&nbsp;a&nbsp;difference&nbsp;and&nbsp;SourcePos&nbsp;is&nbsp;set&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326473">//&nbsp;ConfigMode,&nbsp;//line&nbsp;comments&nbsp;are&nbsp;used&nbsp;in&nbsp;the&nbsp;output&nbsp;to&nbsp;restore</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326539">//&nbsp;original&nbsp;source&nbsp;positions&nbsp;for&nbsp;a&nbsp;reader.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326583">pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5326591"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5326596">.</span><span class="ident" id="5326597">Position</span>&nbsp;<span class="comment" id="5326606">//&nbsp;current&nbsp;position&nbsp;in&nbsp;AST&nbsp;(source)&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326649">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5326657"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5326662">.</span><span class="ident" id="5326663">Position</span>&nbsp;<span class="comment" id="5326672">//&nbsp;current&nbsp;position&nbsp;in&nbsp;output&nbsp;space</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326709">last</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5326717"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5326722">.</span><span class="ident" id="5326723">Position</span>&nbsp;<span class="comment" id="5326732">//&nbsp;value&nbsp;of&nbsp;pos&nbsp;after&nbsp;calling&nbsp;writeString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326775">linePtr</span>&nbsp;<span class="op" id="5326783">*</span><span class="builtintype" id="5326784">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5326798">//&nbsp;if&nbsp;set,&nbsp;record&nbsp;out.Line&nbsp;for&nbsp;the&nbsp;next&nbsp;token&nbsp;in&nbsp;*linePtr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326858">//&nbsp;The&nbsp;list&nbsp;of&nbsp;all&nbsp;source&nbsp;comments,&nbsp;in&nbsp;order&nbsp;of&nbsp;appearance.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326919">comments</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5326935">[</span><span class="op" id="5326936">]</span><span class="op" id="5326937">*</span><span class="ident" id="5326938"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5326941">.</span><span class="ident" id="5326942">CommentGroup</span>&nbsp;<span class="comment" id="5326955">//&nbsp;may&nbsp;be&nbsp;nil</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326970">useNodeComments</span>&nbsp;<span class="builtintype" id="5326986">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5327006">//&nbsp;if&nbsp;not&nbsp;set,&nbsp;ignore&nbsp;lead&nbsp;and&nbsp;line&nbsp;comments&nbsp;of&nbsp;nodes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5327062">//&nbsp;Information&nbsp;about&nbsp;p.comments[p.cindex];&nbsp;set&nbsp;up&nbsp;by&nbsp;nextComment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327129"><a href="/go/printer/printer.go.html#5325347">commentInfo</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5327143">//&nbsp;Cache&nbsp;of&nbsp;already&nbsp;computed&nbsp;node&nbsp;sizes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327185">nodeSizes</span>&nbsp;<span class="keyword" id="5327195">map</span><span class="op" id="5327198">[</span><span class="ident" id="5327199"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5327202">.</span><span class="ident" id="5327203">Node</span><span class="op" id="5327207">]</span><span class="builtintype" id="5327208">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5327214">//&nbsp;Cache&nbsp;of&nbsp;most&nbsp;recently&nbsp;computed&nbsp;line&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327265">cachedPos</span>&nbsp;&nbsp;<span class="ident" id="5327276"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5327281">.</span><span class="ident" id="5327282">Pos</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327287">cachedLine</span>&nbsp;<span class="builtintype" id="5327298">int</span>&nbsp;<span class="comment" id="5327302">//&nbsp;line&nbsp;corresponding&nbsp;to&nbsp;cachedPos</span><br>
<span class="lineno"></span><span class="op" id="5327337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5327340">func</span>&nbsp;<span class="op" id="5327345">(</span><span class="ident" id="5327346">p</span>&nbsp;<span class="op" id="5327348">*</span><span class="ident" id="5327349"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5327356">)</span>&nbsp;<span class="ident" id="5327358">init</span><span class="op" id="5327362">(</span><span class="ident" id="5327363">cfg</span>&nbsp;<span class="op" id="5327367">*</span><span class="ident" id="5327368"><a href="/go/printer/printer.go.html#5359429">Config</a></span><span class="op" id="5327374">,</span>&nbsp;<span class="ident" id="5327376">fset</span>&nbsp;<span class="op" id="5327381">*</span><span class="ident" id="5327382"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5327387">.</span><span class="ident" id="5327388">FileSet</span><span class="op" id="5327395">,</span>&nbsp;<span class="ident" id="5327397">nodeSizes</span>&nbsp;<span class="keyword" id="5327407">map</span><span class="op" id="5327410">[</span><span class="ident" id="5327411"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5327414">.</span><span class="ident" id="5327415">Node</span><span class="op" id="5327419">]</span><span class="builtintype" id="5327420">int</span><span class="op" id="5327423">)</span>&nbsp;<span class="op" id="5327425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327428"><a href="/go/printer/printer.go.html#5327346">p</a></span><span class="op" id="5327429">.</span><span class="ident" id="5327430">Config</span>&nbsp;<span class="op" id="5327437">=</span>&nbsp;<span class="op" id="5327439">*</span><span class="ident" id="5327440"><a href="/go/printer/printer.go.html#5327363">cfg</a></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327445"><a href="/go/printer/printer.go.html#5327346">p</a></span><span class="op" id="5327446">.</span><span class="ident" id="5327447">fset</span>&nbsp;<span class="op" id="5327452">=</span>&nbsp;<span class="ident" id="5327454"><a href="/go/printer/printer.go.html#5327376">fset</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327460"><a href="/go/printer/printer.go.html#5327346">p</a></span><span class="op" id="5327461">.</span><span class="ident" id="5327462">pos</span>&nbsp;<span class="op" id="5327466">=</span>&nbsp;<span class="ident" id="5327468"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5327473">.</span><span class="ident" id="5327474">Position</span><span class="op" id="5327482">{</span><span class="ident" id="5327483">Line</span><span class="op" id="5327487">:</span>&nbsp;<span class="num" id="5327489">1</span><span class="op" id="5327490">,</span>&nbsp;<span class="ident" id="5327492">Column</span><span class="op" id="5327498">:</span>&nbsp;<span class="num" id="5327500">1</span><span class="op" id="5327501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327504"><a href="/go/printer/printer.go.html#5327346">p</a></span><span class="op" id="5327505">.</span><span class="ident" id="5327506">out</span>&nbsp;<span class="op" id="5327510">=</span>&nbsp;<span class="ident" id="5327512"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5327517">.</span><span class="ident" id="5327518">Position</span><span class="op" id="5327526">{</span><span class="ident" id="5327527">Line</span><span class="op" id="5327531">:</span>&nbsp;<span class="num" id="5327533">1</span><span class="op" id="5327534">,</span>&nbsp;<span class="ident" id="5327536">Column</span><span class="op" id="5327542">:</span>&nbsp;<span class="num" id="5327544">1</span><span class="op" id="5327545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327548"><a href="/go/printer/printer.go.html#5327346">p</a></span><span class="op" id="5327549">.</span><span class="ident" id="5327550">wsbuf</span>&nbsp;<span class="op" id="5327556">=</span>&nbsp;<span class="builtinfunc" id="5327558">make</span><span class="op" id="5327562">(</span><span class="op" id="5327563">[</span><span class="op" id="5327564">]</span><span class="ident" id="5327565"><a href="/go/printer/printer.go.html#5324865">whiteSpace</a></span><span class="op" id="5327575">,</span>&nbsp;<span class="num" id="5327577">0</span><span class="op" id="5327578">,</span>&nbsp;<span class="num" id="5327580">16</span><span class="op" id="5327582">)</span>&nbsp;<span class="comment" id="5327584">//&nbsp;whitespace&nbsp;sequences&nbsp;are&nbsp;short</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327619"><a href="/go/printer/printer.go.html#5327346">p</a></span><span class="op" id="5327620">.</span><span class="ident" id="5327621">nodeSizes</span>&nbsp;<span class="op" id="5327631">=</span>&nbsp;<span class="ident" id="5327633"><a href="/go/printer/printer.go.html#5327397">nodeSizes</a></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327644"><a href="/go/printer/printer.go.html#5327346">p</a></span><span class="op" id="5327645">.</span><span class="ident" id="5327646">cachedPos</span>&nbsp;<span class="op" id="5327656">=</span>&nbsp;<span class="op" id="5327658">-</span><span class="num" id="5327659">1</span><br>
<span class="lineno"></span><span class="op" id="5327661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5327664">func</span>&nbsp;<span class="op" id="5327669">(</span><span class="ident" id="5327670">p</span>&nbsp;<span class="op" id="5327672">*</span><span class="ident" id="5327673"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5327680">)</span>&nbsp;<span class="ident" id="5327682">internalError</span><span class="op" id="5327695">(</span><span class="ident" id="5327696">msg</span>&nbsp;<span class="op" id="5327700">...</span><span class="keyword" id="5327703">interface</span><span class="op" id="5327712">{</span><span class="op" id="5327713">}</span><span class="op" id="5327714">)</span>&nbsp;<span class="op" id="5327716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327719">if</span>&nbsp;<span class="ident" id="5327722"><a href="/go/printer/printer.go.html#5324790">debug</a></span>&nbsp;<span class="op" id="5327728">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327732"><a href="/go/printer/printer.go.html#5324619">fmt</a></span><span class="op" id="5327735">.</span><span class="ident" id="5327736">Print</span><span class="op" id="5327741">(</span><span class="ident" id="5327742"><a href="/go/printer/printer.go.html#5327670">p</a></span><span class="op" id="5327743">.</span><span class="ident" id="5327744">pos</span><span class="op" id="5327747">.</span><span class="ident" id="5327748">String</span><span class="op" id="5327754">(</span><span class="op" id="5327755">)</span>&nbsp;<span class="op" id="5327757">+</span>&nbsp;<span class="string" id="5327759">&#34;:&nbsp;&#34;</span><span class="op" id="5327763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327767"><a href="/go/printer/printer.go.html#5324619">fmt</a></span><span class="op" id="5327770">.</span><span class="ident" id="5327771">Println</span><span class="op" id="5327778">(</span><span class="ident" id="5327779"><a href="/go/printer/printer.go.html#5327696">msg</a></span><span class="op" id="5327782">...</span><span class="op" id="5327785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5327789">panic</span><span class="op" id="5327794">(</span><span class="string" id="5327795">&#34;go/printer&#34;</span><span class="op" id="5327807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5327810">}</span><br>
<span class="lineno"></span><span class="op" id="5327812">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="comment" id="5327815">//&nbsp;commentsHaveNewline&nbsp;reports&nbsp;whether&nbsp;a&nbsp;list&nbsp;of&nbsp;comments&nbsp;belonging&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5327886">//&nbsp;an&nbsp;*ast.CommentGroup&nbsp;contains&nbsp;newlines.&nbsp;Because&nbsp;the&nbsp;position&nbsp;information</span><br>
<span class="lineno"></span><span class="comment" id="5327962">//&nbsp;may&nbsp;only&nbsp;be&nbsp;partially&nbsp;correct,&nbsp;we&nbsp;also&nbsp;have&nbsp;to&nbsp;read&nbsp;the&nbsp;comment&nbsp;text.</span><br>
<span class="lineno"></span><span class="keyword" id="5328035">func</span>&nbsp;<span class="op" id="5328040">(</span><span class="ident" id="5328041">p</span>&nbsp;<span class="op" id="5328043">*</span><span class="ident" id="5328044"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5328051">)</span>&nbsp;<span class="ident" id="5328053">commentsHaveNewline</span><span class="op" id="5328072">(</span><span class="ident" id="5328073">list</span>&nbsp;<span class="op" id="5328078">[</span><span class="op" id="5328079">]</span><span class="op" id="5328080">*</span><span class="ident" id="5328081"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5328084">.</span><span class="ident" id="5328085">Comment</span><span class="op" id="5328092">)</span>&nbsp;<span class="builtintype" id="5328094">bool</span>&nbsp;<span class="op" id="5328099">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5328102">//&nbsp;len(list)&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328120">line</span>&nbsp;<span class="op" id="5328125">:=</span>&nbsp;<span class="ident" id="5328128"><a href="/go/printer/printer.go.html#5328041">p</a></span><span class="op" id="5328129">.</span><span class="ident" id="5328130">lineFor</span><span class="op" id="5328137">(</span><span class="ident" id="5328138"><a href="/go/printer/printer.go.html#5328073">list</a></span><span class="op" id="5328142">[</span><span class="num" id="5328143">0</span><span class="op" id="5328144">]</span><span class="op" id="5328145">.</span><span class="ident" id="5328146">Pos</span><span class="op" id="5328149">(</span><span class="op" id="5328150">)</span><span class="op" id="5328151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328154">for</span>&nbsp;<span class="ident" id="5328158">i</span><span class="op" id="5328159">,</span>&nbsp;<span class="ident" id="5328161">c</span>&nbsp;<span class="op" id="5328163">:=</span>&nbsp;<span class="keyword" id="5328166">range</span>&nbsp;<span class="ident" id="5328172"><a href="/go/printer/printer.go.html#5328073">list</a></span>&nbsp;<span class="op" id="5328177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328181">if</span>&nbsp;<span class="ident" id="5328184"><a href="/go/printer/printer.go.html#5328158">i</a></span>&nbsp;<span class="op" id="5328186">&gt;</span>&nbsp;<span class="num" id="5328188">0</span>&nbsp;<span class="op" id="5328190">&amp;&amp;</span>&nbsp;<span class="ident" id="5328193"><a href="/go/printer/printer.go.html#5328041">p</a></span><span class="op" id="5328194">.</span><span class="ident" id="5328195">lineFor</span><span class="op" id="5328202">(</span><span class="ident" id="5328203"><a href="/go/printer/printer.go.html#5328073">list</a></span><span class="op" id="5328207">[</span><span class="ident" id="5328208"><a href="/go/printer/printer.go.html#5328158">i</a></span><span class="op" id="5328209">]</span><span class="op" id="5328210">.</span><span class="ident" id="5328211">Pos</span><span class="op" id="5328214">(</span><span class="op" id="5328215">)</span><span class="op" id="5328216">)</span>&nbsp;<span class="op" id="5328218">!=</span>&nbsp;<span class="ident" id="5328221"><a href="/go/printer/printer.go.html#5328120">line</a></span>&nbsp;<span class="op" id="5328226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5328231">//&nbsp;not&nbsp;all&nbsp;comments&nbsp;on&nbsp;the&nbsp;same&nbsp;line</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328271">return</span>&nbsp;<span class="builtintype" id="5328278">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328289">if</span>&nbsp;<span class="ident" id="5328292">t</span>&nbsp;<span class="op" id="5328294">:=</span>&nbsp;<span class="ident" id="5328297"><a href="/go/printer/printer.go.html#5328161">c</a></span><span class="op" id="5328298">.</span><span class="ident" id="5328299">Text</span><span class="op" id="5328303">;</span>&nbsp;<span class="builtinfunc" id="5328305">len</span><span class="op" id="5328308">(</span><span class="ident" id="5328309"><a href="/go/printer/printer.go.html#5328292">t</a></span><span class="op" id="5328310">)</span>&nbsp;<span class="op" id="5328312">&gt;=</span>&nbsp;<span class="num" id="5328315">2</span>&nbsp;<span class="op" id="5328317">&amp;&amp;</span>&nbsp;<span class="op" id="5328320">(</span><span class="ident" id="5328321"><a href="/go/printer/printer.go.html#5328292">t</a></span><span class="op" id="5328322">[</span><span class="num" id="5328323">1</span><span class="op" id="5328324">]</span>&nbsp;<span class="op" id="5328326">==</span>&nbsp;<span class="string" id="5328329">&#39;/&#39;</span>&nbsp;<span class="op" id="5328333">||</span>&nbsp;<span class="ident" id="5328336"><a href="/go/printer/printer.go.html#5324671">strings</a></span><span class="op" id="5328343">.</span><span class="ident" id="5328344">Contains</span><span class="op" id="5328352">(</span><span class="ident" id="5328353"><a href="/go/printer/printer.go.html#5328292">t</a></span><span class="op" id="5328354">,</span>&nbsp;<span class="string" id="5328356">&#34;\n&#34;</span><span class="op" id="5328360">)</span><span class="op" id="5328361">)</span>&nbsp;<span class="op" id="5328363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328368">return</span>&nbsp;<span class="builtintype" id="5328375">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328382">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328388">_</span>&nbsp;<span class="op" id="5328390">=</span>&nbsp;<span class="ident" id="5328392"><a href="/go/printer/printer.go.html#5328120">line</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328398">return</span>&nbsp;<span class="builtintype" id="5328405">false</span><br>
<span class="lineno"></span><span class="op" id="5328411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="5328414">func</span>&nbsp;<span class="op" id="5328419">(</span><span class="ident" id="5328420">p</span>&nbsp;<span class="op" id="5328422">*</span><span class="ident" id="5328423"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5328430">)</span>&nbsp;<span class="ident" id="5328432">nextComment</span><span class="op" id="5328443">(</span><span class="op" id="5328444">)</span>&nbsp;<span class="op" id="5328446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328449">for</span>&nbsp;<span class="ident" id="5328453"><a href="/go/printer/printer.go.html#5328420">p</a></span><span class="op" id="5328454">.</span><span class="ident" id="5328455">cindex</span>&nbsp;<span class="op" id="5328462">&lt;</span>&nbsp;<span class="builtinfunc" id="5328464">len</span><span class="op" id="5328467">(</span><span class="ident" id="5328468"><a href="/go/printer/printer.go.html#5328420">p</a></span><span class="op" id="5328469">.</span><span class="ident" id="5328470">comments</span><span class="op" id="5328478">)</span>&nbsp;<span class="op" id="5328480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328484">c</span>&nbsp;<span class="op" id="5328486">:=</span>&nbsp;<span class="ident" id="5328489"><a href="/go/printer/printer.go.html#5328420">p</a></span><span class="op" id="5328490">.</span><span class="ident" id="5328491">comments</span><span class="op" id="5328499">[</span><span class="ident" id="5328500"><a href="/go/printer/printer.go.html#5328420">p</a></span><span class="op" id="5328501">.</span><span class="ident" id="5328502">cindex</span><span class="op" id="5328508">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328512"><a href="/go/printer/printer.go.html#5328420">p</a></span><span class="op" id="5328513">.</span><span class="ident" id="5328514">cindex</span><span class="op" id="5328520">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328525">if</span>&nbsp;<span class="ident" id="5328528">list</span>&nbsp;<span class="op" id="5328533">:=</span>&nbsp;<span class="ident" id="5328536"><a href="/go/printer/printer.go.html#5328484">c</a></span><span class="op" id="5328537">.</span><span class="ident" id="5328538">List</span><span class="op" id="5328542">;</span>&nbsp;<span class="builtinfunc" id="5328544">len</span><span class="op" id="5328547">(</span><span class="ident" id="5328548"><a href="/go/printer/printer.go.html#5328528">list</a></span><span class="op" id="5328552">)</span>&nbsp;<span class="op" id="5328554">&gt;</span>&nbsp;<span class="num" id="5328556">0</span>&nbsp;<span class="op" id="5328558">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328563"><a href="/go/printer/printer.go.html#5328420">p</a></span><span class="op" id="5328564">.</span><span class="ident" id="5328565">comment</span>&nbsp;<span class="op" id="5328573">=</span>&nbsp;<span class="ident" id="5328575"><a href="/go/printer/printer.go.html#5328484">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328580"><a href="/go/printer/printer.go.html#5328420">p</a></span><span class="op" id="5328581">.</span><span class="ident" id="5328582">commentOffset</span>&nbsp;<span class="op" id="5328596">=</span>&nbsp;<span class="ident" id="5328598"><a href="/go/printer/printer.go.html#5328420">p</a></span><span class="op" id="5328599">.</span><span class="ident" id="5328600">posFor</span><span class="op" id="5328606">(</span><span class="ident" id="5328607"><a href="/go/printer/printer.go.html#5328528">list</a></span><span class="op" id="5328611">[</span><span class="num" id="5328612">0</span><span class="op" id="5328613">]</span><span class="op" id="5328614">.</span><span class="ident" id="5328615">Pos</span><span class="op" id="5328618">(</span><span class="op" id="5328619">)</span><span class="op" id="5328620">)</span><span class="op" id="5328621">.</span><span class="ident" id="5328622">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328632"><a href="/go/printer/printer.go.html#5328420">p</a></span><span class="op" id="5328633">.</span><span class="ident" id="5328634">commentNewline</span>&nbsp;<span class="op" id="5328649">=</span>&nbsp;<span class="ident" id="5328651"><a href="/go/printer/printer.go.html#5328420">p</a></span><span class="op" id="5328652">.</span><span class="ident" id="5328653">commentsHaveNewline</span><span class="op" id="5328672">(</span><span class="ident" id="5328673"><a href="/go/printer/printer.go.html#5328528">list</a></span><span class="op" id="5328677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328682">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328691">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5328695">//&nbsp;we&nbsp;should&nbsp;not&nbsp;reach&nbsp;here&nbsp;(correct&nbsp;ASTs&nbsp;don&#39;t&nbsp;have&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5328756">//&nbsp;ast.CommentGroup&nbsp;nodes),&nbsp;but&nbsp;be&nbsp;conservative&nbsp;and&nbsp;try&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5328822">//&nbsp;no&nbsp;more&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328843"><a href="/go/printer/printer.go.html#5328420">p</a></span><span class="op" id="5328844">.</span><span class="ident" id="5328845">commentOffset</span>&nbsp;<span class="op" id="5328859">=</span>&nbsp;<span class="ident" id="5328861"><a href="/go/printer/printer.go.html#5324835">infinity</a></span><br>
<span class="lineno">145</span><span class="op" id="5328870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5328873">//&nbsp;commentBefore&nbsp;returns&nbsp;true&nbsp;iff&nbsp;the&nbsp;current&nbsp;comment&nbsp;group&nbsp;occurs</span><br>
<span class="lineno"></span><span class="comment" id="5328940">//&nbsp;before&nbsp;the&nbsp;next&nbsp;position&nbsp;in&nbsp;the&nbsp;source&nbsp;code&nbsp;and&nbsp;printing&nbsp;it&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="5329008">//&nbsp;not&nbsp;introduce&nbsp;implicit&nbsp;semicolons.</span><br>
<span class="lineno">150</span><span class="comment" id="5329046">//</span><br>
<span class="lineno"></span><span class="keyword" id="5329049">func</span>&nbsp;<span class="op" id="5329054">(</span><span class="ident" id="5329055">p</span>&nbsp;<span class="op" id="5329057">*</span><span class="ident" id="5329058"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5329065">)</span>&nbsp;<span class="ident" id="5329067">commentBefore</span><span class="op" id="5329080">(</span><span class="ident" id="5329081">next</span>&nbsp;<span class="ident" id="5329086"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5329091">.</span><span class="ident" id="5329092">Position</span><span class="op" id="5329100">)</span>&nbsp;<span class="builtintype" id="5329102">bool</span>&nbsp;<span class="op" id="5329107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329110">return</span>&nbsp;<span class="ident" id="5329117"><a href="/go/printer/printer.go.html#5329055">p</a></span><span class="op" id="5329118">.</span><span class="ident" id="5329119">commentOffset</span>&nbsp;<span class="op" id="5329133">&lt;</span>&nbsp;<span class="ident" id="5329135"><a href="/go/printer/printer.go.html#5329081">next</a></span><span class="op" id="5329139">.</span><span class="ident" id="5329140">Offset</span>&nbsp;<span class="op" id="5329147">&amp;&amp;</span>&nbsp;<span class="op" id="5329150">(</span><span class="op" id="5329151">!</span><span class="ident" id="5329152"><a href="/go/printer/printer.go.html#5329055">p</a></span><span class="op" id="5329153">.</span><span class="ident" id="5329154">impliedSemi</span>&nbsp;<span class="op" id="5329166">||</span>&nbsp;<span class="op" id="5329169">!</span><span class="ident" id="5329170"><a href="/go/printer/printer.go.html#5329055">p</a></span><span class="op" id="5329171">.</span><span class="ident" id="5329172">commentNewline</span><span class="op" id="5329186">)</span><br>
<span class="lineno"></span><span class="op" id="5329188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="5329191">//&nbsp;commentSizeBefore&nbsp;returns&nbsp;the&nbsp;estimated&nbsp;size&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5329246">//&nbsp;comments&nbsp;on&nbsp;the&nbsp;same&nbsp;line&nbsp;before&nbsp;the&nbsp;next&nbsp;position.</span><br>
<span class="lineno"></span><span class="comment" id="5329301">//</span><br>
<span class="lineno"></span><span class="keyword" id="5329304">func</span>&nbsp;<span class="op" id="5329309">(</span><span class="ident" id="5329310">p</span>&nbsp;<span class="op" id="5329312">*</span><span class="ident" id="5329313"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5329320">)</span>&nbsp;<span class="ident" id="5329322">commentSizeBefore</span><span class="op" id="5329339">(</span><span class="ident" id="5329340">next</span>&nbsp;<span class="ident" id="5329345"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5329350">.</span><span class="ident" id="5329351">Position</span><span class="op" id="5329359">)</span>&nbsp;<span class="builtintype" id="5329361">int</span>&nbsp;<span class="op" id="5329365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5329368">//&nbsp;save/restore&nbsp;current&nbsp;p.commentInfo&nbsp;(p.nextComment()&nbsp;modifies&nbsp;it)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329437">defer</span>&nbsp;<span class="keyword" id="5329443">func</span><span class="op" id="5329447">(</span><span class="ident" id="5329448">info</span>&nbsp;<span class="ident" id="5329453"><a href="/go/printer/printer.go.html#5325347">commentInfo</a></span><span class="op" id="5329464">)</span>&nbsp;<span class="op" id="5329466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329470"><a href="/go/printer/printer.go.html#5329310">p</a></span><span class="op" id="5329471">.</span><span class="ident" id="5329472">commentInfo</span>&nbsp;<span class="op" id="5329484">=</span>&nbsp;<span class="ident" id="5329486"><a href="/go/printer/printer.go.html#5329448">info</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5329492">}</span><span class="op" id="5329493">(</span><span class="ident" id="5329494"><a href="/go/printer/printer.go.html#5329310">p</a></span><span class="op" id="5329495">.</span><span class="ident" id="5329496">commentInfo</span><span class="op" id="5329507">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329511">size</span>&nbsp;<span class="op" id="5329516">:=</span>&nbsp;<span class="num" id="5329519">0</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329522">for</span>&nbsp;<span class="ident" id="5329526"><a href="/go/printer/printer.go.html#5329310">p</a></span><span class="op" id="5329527">.</span><span class="ident" id="5329528">commentBefore</span><span class="op" id="5329541">(</span><span class="ident" id="5329542"><a href="/go/printer/printer.go.html#5329340">next</a></span><span class="op" id="5329546">)</span>&nbsp;<span class="op" id="5329548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329552">for</span>&nbsp;<span class="ident" id="5329556">_</span><span class="op" id="5329557">,</span>&nbsp;<span class="ident" id="5329559">c</span>&nbsp;<span class="op" id="5329561">:=</span>&nbsp;<span class="keyword" id="5329564">range</span>&nbsp;<span class="ident" id="5329570"><a href="/go/printer/printer.go.html#5329310">p</a></span><span class="op" id="5329571">.</span><span class="ident" id="5329572">comment</span><span class="op" id="5329579">.</span><span class="ident" id="5329580">List</span>&nbsp;<span class="op" id="5329585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329590"><a href="/go/printer/printer.go.html#5329511">size</a></span>&nbsp;<span class="op" id="5329595">+=</span>&nbsp;<span class="builtinfunc" id="5329598">len</span><span class="op" id="5329601">(</span><span class="ident" id="5329602"><a href="/go/printer/printer.go.html#5329559">c</a></span><span class="op" id="5329603">.</span><span class="ident" id="5329604">Text</span><span class="op" id="5329608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5329612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329616"><a href="/go/printer/printer.go.html#5329310">p</a></span><span class="op" id="5329617">.</span><span class="ident" id="5329618">nextComment</span><span class="op" id="5329629">(</span><span class="op" id="5329630">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5329633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329636">return</span>&nbsp;<span class="ident" id="5329643"><a href="/go/printer/printer.go.html#5329511">size</a></span><br>
<span class="lineno"></span><span class="op" id="5329648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5329651">//&nbsp;recordLine&nbsp;records&nbsp;the&nbsp;output&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;next&nbsp;non-whitespace</span><br>
<span class="lineno">175</span><span class="comment" id="5329724">//&nbsp;token&nbsp;in&nbsp;*linePtr.&nbsp;It&nbsp;is&nbsp;used&nbsp;to&nbsp;compute&nbsp;an&nbsp;accurate&nbsp;line&nbsp;number&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5329798">//&nbsp;formatted&nbsp;construct,&nbsp;independent&nbsp;of&nbsp;pending&nbsp;(not&nbsp;yet&nbsp;emitted)&nbsp;whitespace</span><br>
<span class="lineno"></span><span class="comment" id="5329874">//&nbsp;or&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="5329890">//</span><br>
<span class="lineno"></span><span class="keyword" id="5329893">func</span>&nbsp;<span class="op" id="5329898">(</span><span class="ident" id="5329899">p</span>&nbsp;<span class="op" id="5329901">*</span><span class="ident" id="5329902"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5329909">)</span>&nbsp;<span class="ident" id="5329911">recordLine</span><span class="op" id="5329921">(</span><span class="ident" id="5329922">linePtr</span>&nbsp;<span class="op" id="5329930">*</span><span class="builtintype" id="5329931">int</span><span class="op" id="5329934">)</span>&nbsp;<span class="op" id="5329936">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329939"><a href="/go/printer/printer.go.html#5329899">p</a></span><span class="op" id="5329940">.</span><span class="ident" id="5329941">linePtr</span>&nbsp;<span class="op" id="5329949">=</span>&nbsp;<span class="ident" id="5329951"><a href="/go/printer/printer.go.html#5329922">linePtr</a></span><br>
<span class="lineno"></span><span class="op" id="5329959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5329962">//&nbsp;linesFrom&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;output&nbsp;lines&nbsp;between&nbsp;the&nbsp;current</span><br>
<span class="lineno"></span><span class="comment" id="5330030">//&nbsp;output&nbsp;line&nbsp;and&nbsp;the&nbsp;line&nbsp;argument,&nbsp;ignoring&nbsp;any&nbsp;pending&nbsp;(not&nbsp;yet</span><br>
<span class="lineno">185</span><span class="comment" id="5330098">//&nbsp;emitted)&nbsp;whitespace&nbsp;or&nbsp;comments.&nbsp;It&nbsp;is&nbsp;used&nbsp;to&nbsp;compute&nbsp;an&nbsp;accurate</span><br>
<span class="lineno"></span><span class="comment" id="5330168">//&nbsp;size&nbsp;(in&nbsp;number&nbsp;of&nbsp;lines)&nbsp;for&nbsp;a&nbsp;formatted&nbsp;construct.</span><br>
<span class="lineno"></span><span class="comment" id="5330224">//</span><br>
<span class="lineno"></span><span class="keyword" id="5330227">func</span>&nbsp;<span class="op" id="5330232">(</span><span class="ident" id="5330233">p</span>&nbsp;<span class="op" id="5330235">*</span><span class="ident" id="5330236"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5330243">)</span>&nbsp;<span class="ident" id="5330245">linesFrom</span><span class="op" id="5330254">(</span><span class="ident" id="5330255">line</span>&nbsp;<span class="builtintype" id="5330260">int</span><span class="op" id="5330263">)</span>&nbsp;<span class="builtintype" id="5330265">int</span>&nbsp;<span class="op" id="5330269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330272">return</span>&nbsp;<span class="ident" id="5330279"><a href="/go/printer/printer.go.html#5330233">p</a></span><span class="op" id="5330280">.</span><span class="ident" id="5330281">out</span><span class="op" id="5330284">.</span><span class="ident" id="5330285">Line</span>&nbsp;<span class="op" id="5330290">-</span>&nbsp;<span class="ident" id="5330292"><a href="/go/printer/printer.go.html#5330255">line</a></span><br>
<span class="lineno">190</span><span class="op" id="5330297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5330300">func</span>&nbsp;<span class="op" id="5330305">(</span><span class="ident" id="5330306">p</span>&nbsp;<span class="op" id="5330308">*</span><span class="ident" id="5330309"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5330316">)</span>&nbsp;<span class="ident" id="5330318">posFor</span><span class="op" id="5330324">(</span><span class="ident" id="5330325">pos</span>&nbsp;<span class="ident" id="5330329"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5330334">.</span><span class="ident" id="5330335">Pos</span><span class="op" id="5330338">)</span>&nbsp;<span class="ident" id="5330340"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5330345">.</span><span class="ident" id="5330346">Position</span>&nbsp;<span class="op" id="5330355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5330358">//&nbsp;not&nbsp;used&nbsp;frequently&nbsp;enough&nbsp;to&nbsp;cache&nbsp;entire&nbsp;token.Position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330420">return</span>&nbsp;<span class="ident" id="5330427"><a href="/go/printer/printer.go.html#5330306">p</a></span><span class="op" id="5330428">.</span><span class="ident" id="5330429">fset</span><span class="op" id="5330433">.</span><span class="ident" id="5330434">Position</span><span class="op" id="5330442">(</span><span class="ident" id="5330443"><a href="/go/printer/printer.go.html#5330325">pos</a></span><span class="op" id="5330446">)</span><br>
<span class="lineno">195</span><span class="op" id="5330448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5330451">func</span>&nbsp;<span class="op" id="5330456">(</span><span class="ident" id="5330457">p</span>&nbsp;<span class="op" id="5330459">*</span><span class="ident" id="5330460"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5330467">)</span>&nbsp;<span class="ident" id="5330469">lineFor</span><span class="op" id="5330476">(</span><span class="ident" id="5330477">pos</span>&nbsp;<span class="ident" id="5330481"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5330486">.</span><span class="ident" id="5330487">Pos</span><span class="op" id="5330490">)</span>&nbsp;<span class="builtintype" id="5330492">int</span>&nbsp;<span class="op" id="5330496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330499">if</span>&nbsp;<span class="ident" id="5330502"><a href="/go/printer/printer.go.html#5330477">pos</a></span>&nbsp;<span class="op" id="5330506">!=</span>&nbsp;<span class="ident" id="5330509"><a href="/go/printer/printer.go.html#5330457">p</a></span><span class="op" id="5330510">.</span><span class="ident" id="5330511">cachedPos</span>&nbsp;<span class="op" id="5330521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330525"><a href="/go/printer/printer.go.html#5330457">p</a></span><span class="op" id="5330526">.</span><span class="ident" id="5330527">cachedPos</span>&nbsp;<span class="op" id="5330537">=</span>&nbsp;<span class="ident" id="5330539"><a href="/go/printer/printer.go.html#5330477">pos</a></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330545"><a href="/go/printer/printer.go.html#5330457">p</a></span><span class="op" id="5330546">.</span><span class="ident" id="5330547">cachedLine</span>&nbsp;<span class="op" id="5330558">=</span>&nbsp;<span class="ident" id="5330560"><a href="/go/printer/printer.go.html#5330457">p</a></span><span class="op" id="5330561">.</span><span class="ident" id="5330562">fset</span><span class="op" id="5330566">.</span><span class="ident" id="5330567">Position</span><span class="op" id="5330575">(</span><span class="ident" id="5330576"><a href="/go/printer/printer.go.html#5330477">pos</a></span><span class="op" id="5330579">)</span><span class="op" id="5330580">.</span><span class="ident" id="5330581">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5330587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330590">return</span>&nbsp;<span class="ident" id="5330597"><a href="/go/printer/printer.go.html#5330457">p</a></span><span class="op" id="5330598">.</span><span class="ident" id="5330599">cachedLine</span><br>
<span class="lineno"></span><span class="op" id="5330610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="comment" id="5330613">//&nbsp;atLineBegin&nbsp;emits&nbsp;a&nbsp;//line&nbsp;comment&nbsp;if&nbsp;necessary&nbsp;and&nbsp;prints&nbsp;indentation.</span><br>
<span class="lineno"></span><span class="keyword" id="5330688">func</span>&nbsp;<span class="op" id="5330693">(</span><span class="ident" id="5330694">p</span>&nbsp;<span class="op" id="5330696">*</span><span class="ident" id="5330697"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5330704">)</span>&nbsp;<span class="ident" id="5330706">atLineBegin</span><span class="op" id="5330717">(</span><span class="ident" id="5330718">pos</span>&nbsp;<span class="ident" id="5330722"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5330727">.</span><span class="ident" id="5330728">Position</span><span class="op" id="5330736">)</span>&nbsp;<span class="op" id="5330738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5330741">//&nbsp;write&nbsp;a&nbsp;//line&nbsp;comment&nbsp;if&nbsp;necessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330781">if</span>&nbsp;<span class="ident" id="5330784"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5330785">.</span><span class="ident" id="5330786">Config</span><span class="op" id="5330792">.</span><span class="ident" id="5330793">Mode</span><span class="op" id="5330797">&amp;</span><span class="ident" id="5330798"><a href="/go/printer/printer.go.html#5359284">SourcePos</a></span>&nbsp;<span class="op" id="5330808">!=</span>&nbsp;<span class="num" id="5330811">0</span>&nbsp;<span class="op" id="5330813">&amp;&amp;</span>&nbsp;<span class="ident" id="5330816"><a href="/go/printer/printer.go.html#5330718">pos</a></span><span class="op" id="5330819">.</span><span class="ident" id="5330820">IsValid</span><span class="op" id="5330827">(</span><span class="op" id="5330828">)</span>&nbsp;<span class="op" id="5330830">&amp;&amp;</span>&nbsp;<span class="op" id="5330833">(</span><span class="ident" id="5330834"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5330835">.</span><span class="ident" id="5330836">out</span><span class="op" id="5330839">.</span><span class="ident" id="5330840">Line</span>&nbsp;<span class="op" id="5330845">!=</span>&nbsp;<span class="ident" id="5330848"><a href="/go/printer/printer.go.html#5330718">pos</a></span><span class="op" id="5330851">.</span><span class="ident" id="5330852">Line</span>&nbsp;<span class="op" id="5330857">||</span>&nbsp;<span class="ident" id="5330860"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5330861">.</span><span class="ident" id="5330862">out</span><span class="op" id="5330865">.</span><span class="ident" id="5330866">Filename</span>&nbsp;<span class="op" id="5330875">!=</span>&nbsp;<span class="ident" id="5330878"><a href="/go/printer/printer.go.html#5330718">pos</a></span><span class="op" id="5330881">.</span><span class="ident" id="5330882">Filename</span><span class="op" id="5330890">)</span>&nbsp;<span class="op" id="5330892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330896"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5330897">.</span><span class="ident" id="5330898">output</span>&nbsp;<span class="op" id="5330905">=</span>&nbsp;<span class="builtinfunc" id="5330907">append</span><span class="op" id="5330913">(</span><span class="ident" id="5330914"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5330915">.</span><span class="ident" id="5330916">output</span><span class="op" id="5330922">,</span>&nbsp;<span class="ident" id="5330924"><a href="/go/printer/printer.go.html#5324682">tabwriter</a></span><span class="op" id="5330933">.</span><span class="ident" id="5330934">Escape</span><span class="op" id="5330940">)</span>&nbsp;<span class="comment" id="5330942">//&nbsp;protect&nbsp;&#39;\n&#39;&nbsp;in&nbsp;//line&nbsp;from&nbsp;tabwriter&nbsp;interpretation</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331000"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5331001">.</span><span class="ident" id="5331002">output</span>&nbsp;<span class="op" id="5331009">=</span>&nbsp;<span class="builtinfunc" id="5331011">append</span><span class="op" id="5331017">(</span><span class="ident" id="5331018"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5331019">.</span><span class="ident" id="5331020">output</span><span class="op" id="5331026">,</span>&nbsp;<span class="ident" id="5331028"><a href="/go/printer/printer.go.html#5324619">fmt</a></span><span class="op" id="5331031">.</span><span class="ident" id="5331032">Sprintf</span><span class="op" id="5331039">(</span><span class="string" id="5331040">&#34;//line&nbsp;%s:%d\n&#34;</span><span class="op" id="5331056">,</span>&nbsp;<span class="ident" id="5331058"><a href="/go/printer/printer.go.html#5330718">pos</a></span><span class="op" id="5331061">.</span><span class="ident" id="5331062">Filename</span><span class="op" id="5331070">,</span>&nbsp;<span class="ident" id="5331072"><a href="/go/printer/printer.go.html#5330718">pos</a></span><span class="op" id="5331075">.</span><span class="ident" id="5331076">Line</span><span class="op" id="5331080">)</span><span class="op" id="5331081">...</span><span class="op" id="5331084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331088"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5331089">.</span><span class="ident" id="5331090">output</span>&nbsp;<span class="op" id="5331097">=</span>&nbsp;<span class="builtinfunc" id="5331099">append</span><span class="op" id="5331105">(</span><span class="ident" id="5331106"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5331107">.</span><span class="ident" id="5331108">output</span><span class="op" id="5331114">,</span>&nbsp;<span class="ident" id="5331116"><a href="/go/printer/printer.go.html#5324682">tabwriter</a></span><span class="op" id="5331125">.</span><span class="ident" id="5331126">Escape</span><span class="op" id="5331132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5331136">//&nbsp;p.out&nbsp;must&nbsp;match&nbsp;the&nbsp;//line&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331177"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5331178">.</span><span class="ident" id="5331179">out</span><span class="op" id="5331182">.</span><span class="ident" id="5331183">Filename</span>&nbsp;<span class="op" id="5331192">=</span>&nbsp;<span class="ident" id="5331194"><a href="/go/printer/printer.go.html#5330718">pos</a></span><span class="op" id="5331197">.</span><span class="ident" id="5331198">Filename</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331209"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5331210">.</span><span class="ident" id="5331211">out</span><span class="op" id="5331214">.</span><span class="ident" id="5331215">Line</span>&nbsp;<span class="op" id="5331220">=</span>&nbsp;<span class="ident" id="5331222"><a href="/go/printer/printer.go.html#5330718">pos</a></span><span class="op" id="5331225">.</span><span class="ident" id="5331226">Line</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5331236">//&nbsp;write&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5331258">//&nbsp;use&nbsp;&#34;hard&#34;&nbsp;htabs&nbsp;-&nbsp;indentation&nbsp;columns</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5331301">//&nbsp;must&nbsp;not&nbsp;be&nbsp;discarded&nbsp;by&nbsp;the&nbsp;tabwriter</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331344">n</span>&nbsp;<span class="op" id="5331346">:=</span>&nbsp;<span class="ident" id="5331349"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5331350">.</span><span class="ident" id="5331351">Config</span><span class="op" id="5331357">.</span><span class="ident" id="5331358">Indent</span>&nbsp;<span class="op" id="5331365">+</span>&nbsp;<span class="ident" id="5331367"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5331368">.</span><span class="ident" id="5331369">indent</span>&nbsp;<span class="comment" id="5331376">//&nbsp;include&nbsp;base&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331405">for</span>&nbsp;<span class="ident" id="5331409">i</span>&nbsp;<span class="op" id="5331411">:=</span>&nbsp;<span class="num" id="5331414">0</span><span class="op" id="5331415">;</span>&nbsp;<span class="ident" id="5331417"><a href="/go/printer/printer.go.html#5331409">i</a></span>&nbsp;<span class="op" id="5331419">&lt;</span>&nbsp;<span class="ident" id="5331421"><a href="/go/printer/printer.go.html#5331344">n</a></span><span class="op" id="5331422">;</span>&nbsp;<span class="ident" id="5331424"><a href="/go/printer/printer.go.html#5331409">i</a></span><span class="op" id="5331425">++</span>&nbsp;<span class="op" id="5331428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331432"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5331433">.</span><span class="ident" id="5331434">output</span>&nbsp;<span class="op" id="5331441">=</span>&nbsp;<span class="builtinfunc" id="5331443">append</span><span class="op" id="5331449">(</span><span class="ident" id="5331450"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5331451">.</span><span class="ident" id="5331452">output</span><span class="op" id="5331458">,</span>&nbsp;<span class="string" id="5331460">&#39;\t&#39;</span><span class="op" id="5331464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5331471">//&nbsp;update&nbsp;positions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331492"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5331493">.</span><span class="ident" id="5331494">pos</span><span class="op" id="5331497">.</span><span class="ident" id="5331498">Offset</span>&nbsp;<span class="op" id="5331505">+=</span>&nbsp;<span class="ident" id="5331508"><a href="/go/printer/printer.go.html#5331344">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331511"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5331512">.</span><span class="ident" id="5331513">pos</span><span class="op" id="5331516">.</span><span class="ident" id="5331517">Column</span>&nbsp;<span class="op" id="5331524">+=</span>&nbsp;<span class="ident" id="5331527"><a href="/go/printer/printer.go.html#5331344">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331530"><a href="/go/printer/printer.go.html#5330694">p</a></span><span class="op" id="5331531">.</span><span class="ident" id="5331532">out</span><span class="op" id="5331535">.</span><span class="ident" id="5331536">Column</span>&nbsp;<span class="op" id="5331543">+=</span>&nbsp;<span class="ident" id="5331546"><a href="/go/printer/printer.go.html#5331344">n</a></span><br>
<span class="lineno"></span><span class="op" id="5331548">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="5331551">//&nbsp;writeByte&nbsp;writes&nbsp;ch&nbsp;n&nbsp;times&nbsp;to&nbsp;p.output&nbsp;and&nbsp;updates&nbsp;p.pos.</span><br>
<span class="lineno"></span><span class="keyword" id="5331613">func</span>&nbsp;<span class="op" id="5331618">(</span><span class="ident" id="5331619">p</span>&nbsp;<span class="op" id="5331621">*</span><span class="ident" id="5331622"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5331629">)</span>&nbsp;<span class="ident" id="5331631">writeByte</span><span class="op" id="5331640">(</span><span class="ident" id="5331641">ch</span>&nbsp;<span class="builtintype" id="5331644">byte</span><span class="op" id="5331648">,</span>&nbsp;<span class="ident" id="5331650">n</span>&nbsp;<span class="builtintype" id="5331652">int</span><span class="op" id="5331655">)</span>&nbsp;<span class="op" id="5331657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331660">if</span>&nbsp;<span class="ident" id="5331663"><a href="/go/printer/printer.go.html#5331619">p</a></span><span class="op" id="5331664">.</span><span class="ident" id="5331665">out</span><span class="op" id="5331668">.</span><span class="ident" id="5331669">Column</span>&nbsp;<span class="op" id="5331676">==</span>&nbsp;<span class="num" id="5331679">1</span>&nbsp;<span class="op" id="5331681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331685"><a href="/go/printer/printer.go.html#5331619">p</a></span><span class="op" id="5331686">.</span><span class="ident" id="5331687">atLineBegin</span><span class="op" id="5331698">(</span><span class="ident" id="5331699"><a href="/go/printer/printer.go.html#5331619">p</a></span><span class="op" id="5331700">.</span><span class="ident" id="5331701">pos</span><span class="op" id="5331704">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331711">for</span>&nbsp;<span class="ident" id="5331715">i</span>&nbsp;<span class="op" id="5331717">:=</span>&nbsp;<span class="num" id="5331720">0</span><span class="op" id="5331721">;</span>&nbsp;<span class="ident" id="5331723"><a href="/go/printer/printer.go.html#5331715">i</a></span>&nbsp;<span class="op" id="5331725">&lt;</span>&nbsp;<span class="ident" id="5331727"><a href="/go/printer/printer.go.html#5331650">n</a></span><span class="op" id="5331728">;</span>&nbsp;<span class="ident" id="5331730"><a href="/go/printer/printer.go.html#5331715">i</a></span><span class="op" id="5331731">++</span>&nbsp;<span class="op" id="5331734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331738"><a href="/go/printer/printer.go.html#5331619">p</a></span><span class="op" id="5331739">.</span><span class="ident" id="5331740">output</span>&nbsp;<span class="op" id="5331747">=</span>&nbsp;<span class="builtinfunc" id="5331749">append</span><span class="op" id="5331755">(</span><span class="ident" id="5331756"><a href="/go/printer/printer.go.html#5331619">p</a></span><span class="op" id="5331757">.</span><span class="ident" id="5331758">output</span><span class="op" id="5331764">,</span>&nbsp;<span class="ident" id="5331766"><a href="/go/printer/printer.go.html#5331641">ch</a></span><span class="op" id="5331768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331771">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5331775">//&nbsp;update&nbsp;positions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331796"><a href="/go/printer/printer.go.html#5331619">p</a></span><span class="op" id="5331797">.</span><span class="ident" id="5331798">pos</span><span class="op" id="5331801">.</span><span class="ident" id="5331802">Offset</span>&nbsp;<span class="op" id="5331809">+=</span>&nbsp;<span class="ident" id="5331812"><a href="/go/printer/printer.go.html#5331650">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331815">if</span>&nbsp;<span class="ident" id="5331818"><a href="/go/printer/printer.go.html#5331641">ch</a></span>&nbsp;<span class="op" id="5331821">==</span>&nbsp;<span class="string" id="5331824">&#39;\n&#39;</span>&nbsp;<span class="op" id="5331829">||</span>&nbsp;<span class="ident" id="5331832"><a href="/go/printer/printer.go.html#5331641">ch</a></span>&nbsp;<span class="op" id="5331835">==</span>&nbsp;<span class="string" id="5331838">&#39;\f&#39;</span>&nbsp;<span class="op" id="5331843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331847"><a href="/go/printer/printer.go.html#5331619">p</a></span><span class="op" id="5331848">.</span><span class="ident" id="5331849">pos</span><span class="op" id="5331852">.</span><span class="ident" id="5331853">Line</span>&nbsp;<span class="op" id="5331858">+=</span>&nbsp;<span class="ident" id="5331861"><a href="/go/printer/printer.go.html#5331650">n</a></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331865"><a href="/go/printer/printer.go.html#5331619">p</a></span><span class="op" id="5331866">.</span><span class="ident" id="5331867">out</span><span class="op" id="5331870">.</span><span class="ident" id="5331871">Line</span>&nbsp;<span class="op" id="5331876">+=</span>&nbsp;<span class="ident" id="5331879"><a href="/go/printer/printer.go.html#5331650">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331883"><a href="/go/printer/printer.go.html#5331619">p</a></span><span class="op" id="5331884">.</span><span class="ident" id="5331885">pos</span><span class="op" id="5331888">.</span><span class="ident" id="5331889">Column</span>&nbsp;<span class="op" id="5331896">=</span>&nbsp;<span class="num" id="5331898">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331902"><a href="/go/printer/printer.go.html#5331619">p</a></span><span class="op" id="5331903">.</span><span class="ident" id="5331904">out</span><span class="op" id="5331907">.</span><span class="ident" id="5331908">Column</span>&nbsp;<span class="op" id="5331915">=</span>&nbsp;<span class="num" id="5331917">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331921">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331929">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331932"><a href="/go/printer/printer.go.html#5331619">p</a></span><span class="op" id="5331933">.</span><span class="ident" id="5331934">pos</span><span class="op" id="5331937">.</span><span class="ident" id="5331938">Column</span>&nbsp;<span class="op" id="5331945">+=</span>&nbsp;<span class="ident" id="5331948"><a href="/go/printer/printer.go.html#5331650">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331951"><a href="/go/printer/printer.go.html#5331619">p</a></span><span class="op" id="5331952">.</span><span class="ident" id="5331953">out</span><span class="op" id="5331956">.</span><span class="ident" id="5331957">Column</span>&nbsp;<span class="op" id="5331964">+=</span>&nbsp;<span class="ident" id="5331967"><a href="/go/printer/printer.go.html#5331650">n</a></span><br>
<span class="lineno"></span><span class="op" id="5331969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5331972">//&nbsp;writeString&nbsp;writes&nbsp;the&nbsp;string&nbsp;s&nbsp;to&nbsp;p.output&nbsp;and&nbsp;updates&nbsp;p.pos,&nbsp;p.out,</span><br>
<span class="lineno">255</span><span class="comment" id="5332045">//&nbsp;and&nbsp;p.last.&nbsp;If&nbsp;isLit&nbsp;is&nbsp;set,&nbsp;s&nbsp;is&nbsp;escaped&nbsp;w/&nbsp;tabwriter.Escape&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="5332121">//&nbsp;to&nbsp;protect&nbsp;s&nbsp;from&nbsp;being&nbsp;interpreted&nbsp;by&nbsp;the&nbsp;tabwriter.</span><br>
<span class="lineno"></span><span class="comment" id="5332178">//</span><br>
<span class="lineno"></span><span class="comment" id="5332181">//&nbsp;Note:&nbsp;writeString&nbsp;is&nbsp;only&nbsp;used&nbsp;to&nbsp;write&nbsp;Go&nbsp;tokens,&nbsp;literals,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5332249">//&nbsp;comments,&nbsp;all&nbsp;of&nbsp;which&nbsp;must&nbsp;be&nbsp;written&nbsp;literally.&nbsp;Thus,&nbsp;it&nbsp;is&nbsp;correct</span><br>
<span class="lineno">260</span><span class="comment" id="5332322">//&nbsp;to&nbsp;always&nbsp;set&nbsp;isLit&nbsp;=&nbsp;true.&nbsp;However,&nbsp;setting&nbsp;it&nbsp;explicitly&nbsp;only&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="5332394">//&nbsp;needed&nbsp;(i.e.,&nbsp;when&nbsp;we&nbsp;don&#39;t&nbsp;know&nbsp;that&nbsp;s&nbsp;contains&nbsp;no&nbsp;tabs&nbsp;or&nbsp;line&nbsp;breaks)</span><br>
<span class="lineno"></span><span class="comment" id="5332470">//&nbsp;avoids&nbsp;processing&nbsp;extra&nbsp;escape&nbsp;characters&nbsp;and&nbsp;reduces&nbsp;run&nbsp;time&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5332543">//&nbsp;printer&nbsp;benchmark&nbsp;by&nbsp;up&nbsp;to&nbsp;10%.</span><br>
<span class="lineno"></span><span class="comment" id="5332578">//</span><br>
<span class="lineno">265</span><span class="keyword" id="5332581">func</span>&nbsp;<span class="op" id="5332586">(</span><span class="ident" id="5332587">p</span>&nbsp;<span class="op" id="5332589">*</span><span class="ident" id="5332590"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5332597">)</span>&nbsp;<span class="ident" id="5332599">writeString</span><span class="op" id="5332610">(</span><span class="ident" id="5332611">pos</span>&nbsp;<span class="ident" id="5332615"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5332620">.</span><span class="ident" id="5332621">Position</span><span class="op" id="5332629">,</span>&nbsp;<span class="ident" id="5332631">s</span>&nbsp;<span class="builtintype" id="5332633">string</span><span class="op" id="5332639">,</span>&nbsp;<span class="ident" id="5332641">isLit</span>&nbsp;<span class="builtintype" id="5332647">bool</span><span class="op" id="5332651">)</span>&nbsp;<span class="op" id="5332653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332656">if</span>&nbsp;<span class="ident" id="5332659"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5332660">.</span><span class="ident" id="5332661">out</span><span class="op" id="5332664">.</span><span class="ident" id="5332665">Column</span>&nbsp;<span class="op" id="5332672">==</span>&nbsp;<span class="num" id="5332675">1</span>&nbsp;<span class="op" id="5332677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332681"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5332682">.</span><span class="ident" id="5332683">atLineBegin</span><span class="op" id="5332694">(</span><span class="ident" id="5332695"><a href="/go/printer/printer.go.html#5332611">pos</a></span><span class="op" id="5332698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332701">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332705">if</span>&nbsp;<span class="ident" id="5332708"><a href="/go/printer/printer.go.html#5332611">pos</a></span><span class="op" id="5332711">.</span><span class="ident" id="5332712">IsValid</span><span class="op" id="5332719">(</span><span class="op" id="5332720">)</span>&nbsp;<span class="op" id="5332722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5332726">//&nbsp;update&nbsp;p.pos&nbsp;(if&nbsp;pos&nbsp;is&nbsp;invalid,&nbsp;continue&nbsp;with&nbsp;existing&nbsp;p.pos)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5332794">//&nbsp;Note:&nbsp;Must&nbsp;do&nbsp;this&nbsp;after&nbsp;handling&nbsp;line&nbsp;beginnings&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5332857">//&nbsp;atLineBegin&nbsp;updates&nbsp;p.pos&nbsp;if&nbsp;there&#39;s&nbsp;indentation,&nbsp;but&nbsp;p.pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5332922">//&nbsp;is&nbsp;the&nbsp;position&nbsp;of&nbsp;s.</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332949"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5332950">.</span><span class="ident" id="5332951">pos</span>&nbsp;<span class="op" id="5332955">=</span>&nbsp;<span class="ident" id="5332957"><a href="/go/printer/printer.go.html#5332611">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332966">if</span>&nbsp;<span class="ident" id="5332969"><a href="/go/printer/printer.go.html#5332641">isLit</a></span>&nbsp;<span class="op" id="5332975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5332979">//&nbsp;Protect&nbsp;s&nbsp;such&nbsp;that&nbsp;is&nbsp;passes&nbsp;through&nbsp;the&nbsp;tabwriter</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5333036">//&nbsp;unchanged.&nbsp;Note&nbsp;that&nbsp;valid&nbsp;Go&nbsp;programs&nbsp;cannot&nbsp;contain</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5333095">//&nbsp;tabwriter.Escape&nbsp;bytes&nbsp;since&nbsp;they&nbsp;do&nbsp;not&nbsp;appear&nbsp;in&nbsp;legal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5333157">//&nbsp;UTF-8&nbsp;sequences.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333179"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5333180">.</span><span class="ident" id="5333181">output</span>&nbsp;<span class="op" id="5333188">=</span>&nbsp;<span class="builtinfunc" id="5333190">append</span><span class="op" id="5333196">(</span><span class="ident" id="5333197"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5333198">.</span><span class="ident" id="5333199">output</span><span class="op" id="5333205">,</span>&nbsp;<span class="ident" id="5333207"><a href="/go/printer/printer.go.html#5324682">tabwriter</a></span><span class="op" id="5333216">.</span><span class="ident" id="5333217">Escape</span><span class="op" id="5333223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333226">}</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333230">if</span>&nbsp;<span class="ident" id="5333233"><a href="/go/printer/printer.go.html#5324790">debug</a></span>&nbsp;<span class="op" id="5333239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333243"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5333244">.</span><span class="ident" id="5333245">output</span>&nbsp;<span class="op" id="5333252">=</span>&nbsp;<span class="builtinfunc" id="5333254">append</span><span class="op" id="5333260">(</span><span class="ident" id="5333261"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5333262">.</span><span class="ident" id="5333263">output</span><span class="op" id="5333269">,</span>&nbsp;<span class="ident" id="5333271"><a href="/go/printer/printer.go.html#5324619">fmt</a></span><span class="op" id="5333274">.</span><span class="ident" id="5333275">Sprintf</span><span class="op" id="5333282">(</span><span class="string" id="5333283">&#34;/*%s*/&#34;</span><span class="op" id="5333291">,</span>&nbsp;<span class="ident" id="5333293"><a href="/go/printer/printer.go.html#5332611">pos</a></span><span class="op" id="5333296">)</span><span class="op" id="5333297">...</span><span class="op" id="5333300">)</span>&nbsp;<span class="comment" id="5333302">//&nbsp;do&nbsp;not&nbsp;update&nbsp;p.pos!</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333330"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5333331">.</span><span class="ident" id="5333332">output</span>&nbsp;<span class="op" id="5333339">=</span>&nbsp;<span class="builtinfunc" id="5333341">append</span><span class="op" id="5333347">(</span><span class="ident" id="5333348"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5333349">.</span><span class="ident" id="5333350">output</span><span class="op" id="5333356">,</span>&nbsp;<span class="ident" id="5333358"><a href="/go/printer/printer.go.html#5332631">s</a></span><span class="op" id="5333359">...</span><span class="op" id="5333362">)</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5333366">//&nbsp;update&nbsp;positions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333387">nlines</span>&nbsp;<span class="op" id="5333394">:=</span>&nbsp;<span class="num" id="5333397">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333400">var</span>&nbsp;<span class="ident" id="5333404">li</span>&nbsp;<span class="builtintype" id="5333407">int</span>&nbsp;<span class="comment" id="5333411">//&nbsp;index&nbsp;of&nbsp;last&nbsp;newline;&nbsp;valid&nbsp;if&nbsp;nlines&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333458">for</span>&nbsp;<span class="ident" id="5333462">i</span>&nbsp;<span class="op" id="5333464">:=</span>&nbsp;<span class="num" id="5333467">0</span><span class="op" id="5333468">;</span>&nbsp;<span class="ident" id="5333470"><a href="/go/printer/printer.go.html#5333462">i</a></span>&nbsp;<span class="op" id="5333472">&lt;</span>&nbsp;<span class="builtinfunc" id="5333474">len</span><span class="op" id="5333477">(</span><span class="ident" id="5333478"><a href="/go/printer/printer.go.html#5332631">s</a></span><span class="op" id="5333479">)</span><span class="op" id="5333480">;</span>&nbsp;<span class="ident" id="5333482"><a href="/go/printer/printer.go.html#5333462">i</a></span><span class="op" id="5333483">++</span>&nbsp;<span class="op" id="5333486">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5333490">//&nbsp;Go&nbsp;tokens&nbsp;cannot&nbsp;contain&nbsp;&#39;\f&#39;&nbsp;-&nbsp;no&nbsp;need&nbsp;to&nbsp;look&nbsp;for&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333550">if</span>&nbsp;<span class="ident" id="5333553"><a href="/go/printer/printer.go.html#5332631">s</a></span><span class="op" id="5333554">[</span><span class="ident" id="5333555"><a href="/go/printer/printer.go.html#5333462">i</a></span><span class="op" id="5333556">]</span>&nbsp;<span class="op" id="5333558">==</span>&nbsp;<span class="string" id="5333561">&#39;\n&#39;</span>&nbsp;<span class="op" id="5333566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333571"><a href="/go/printer/printer.go.html#5333387">nlines</a></span><span class="op" id="5333577">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333583"><a href="/go/printer/printer.go.html#5333404">li</a></span>&nbsp;<span class="op" id="5333586">=</span>&nbsp;<span class="ident" id="5333588"><a href="/go/printer/printer.go.html#5333462">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333592">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333598"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5333599">.</span><span class="ident" id="5333600">pos</span><span class="op" id="5333603">.</span><span class="ident" id="5333604">Offset</span>&nbsp;<span class="op" id="5333611">+=</span>&nbsp;<span class="builtinfunc" id="5333614">len</span><span class="op" id="5333617">(</span><span class="ident" id="5333618"><a href="/go/printer/printer.go.html#5332631">s</a></span><span class="op" id="5333619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333622">if</span>&nbsp;<span class="ident" id="5333625"><a href="/go/printer/printer.go.html#5333387">nlines</a></span>&nbsp;<span class="op" id="5333632">&gt;</span>&nbsp;<span class="num" id="5333634">0</span>&nbsp;<span class="op" id="5333636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333640"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5333641">.</span><span class="ident" id="5333642">pos</span><span class="op" id="5333645">.</span><span class="ident" id="5333646">Line</span>&nbsp;<span class="op" id="5333651">+=</span>&nbsp;<span class="ident" id="5333654"><a href="/go/printer/printer.go.html#5333387">nlines</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333663"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5333664">.</span><span class="ident" id="5333665">out</span><span class="op" id="5333668">.</span><span class="ident" id="5333669">Line</span>&nbsp;<span class="op" id="5333674">+=</span>&nbsp;<span class="ident" id="5333677"><a href="/go/printer/printer.go.html#5333387">nlines</a></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333686">c</span>&nbsp;<span class="op" id="5333688">:=</span>&nbsp;<span class="builtinfunc" id="5333691">len</span><span class="op" id="5333694">(</span><span class="ident" id="5333695"><a href="/go/printer/printer.go.html#5332631">s</a></span><span class="op" id="5333696">)</span>&nbsp;<span class="op" id="5333698">-</span>&nbsp;<span class="ident" id="5333700"><a href="/go/printer/printer.go.html#5333404">li</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333705"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5333706">.</span><span class="ident" id="5333707">pos</span><span class="op" id="5333710">.</span><span class="ident" id="5333711">Column</span>&nbsp;<span class="op" id="5333718">=</span>&nbsp;<span class="ident" id="5333720"><a href="/go/printer/printer.go.html#5333686">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333724"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5333725">.</span><span class="ident" id="5333726">out</span><span class="op" id="5333729">.</span><span class="ident" id="5333730">Column</span>&nbsp;<span class="op" id="5333737">=</span>&nbsp;<span class="ident" id="5333739"><a href="/go/printer/printer.go.html#5333686">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333742">}</span>&nbsp;<span class="keyword" id="5333744">else</span>&nbsp;<span class="op" id="5333749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333753"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5333754">.</span><span class="ident" id="5333755">pos</span><span class="op" id="5333758">.</span><span class="ident" id="5333759">Column</span>&nbsp;<span class="op" id="5333766">+=</span>&nbsp;<span class="builtinfunc" id="5333769">len</span><span class="op" id="5333772">(</span><span class="ident" id="5333773"><a href="/go/printer/printer.go.html#5332631">s</a></span><span class="op" id="5333774">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333778"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5333779">.</span><span class="ident" id="5333780">out</span><span class="op" id="5333783">.</span><span class="ident" id="5333784">Column</span>&nbsp;<span class="op" id="5333791">+=</span>&nbsp;<span class="builtinfunc" id="5333794">len</span><span class="op" id="5333797">(</span><span class="ident" id="5333798"><a href="/go/printer/printer.go.html#5332631">s</a></span><span class="op" id="5333799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333806">if</span>&nbsp;<span class="ident" id="5333809"><a href="/go/printer/printer.go.html#5332641">isLit</a></span>&nbsp;<span class="op" id="5333815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333819"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5333820">.</span><span class="ident" id="5333821">output</span>&nbsp;<span class="op" id="5333828">=</span>&nbsp;<span class="builtinfunc" id="5333830">append</span><span class="op" id="5333836">(</span><span class="ident" id="5333837"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5333838">.</span><span class="ident" id="5333839">output</span><span class="op" id="5333845">,</span>&nbsp;<span class="ident" id="5333847"><a href="/go/printer/printer.go.html#5324682">tabwriter</a></span><span class="op" id="5333856">.</span><span class="ident" id="5333857">Escape</span><span class="op" id="5333863">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333866">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333870"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5333871">.</span><span class="ident" id="5333872">last</span>&nbsp;<span class="op" id="5333877">=</span>&nbsp;<span class="ident" id="5333879"><a href="/go/printer/printer.go.html#5332587">p</a></span><span class="op" id="5333880">.</span><span class="ident" id="5333881">pos</span><br>
<span class="lineno"></span><span class="op" id="5333885">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="5333888">//&nbsp;writeCommentPrefix&nbsp;writes&nbsp;the&nbsp;whitespace&nbsp;before&nbsp;a&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="5333950">//&nbsp;If&nbsp;there&nbsp;is&nbsp;any&nbsp;pending&nbsp;whitespace,&nbsp;it&nbsp;consumes&nbsp;as&nbsp;much&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5334012">//&nbsp;it&nbsp;as&nbsp;is&nbsp;likely&nbsp;to&nbsp;help&nbsp;position&nbsp;the&nbsp;comment&nbsp;nicely.</span><br>
<span class="lineno"></span><span class="comment" id="5334068">//&nbsp;pos&nbsp;is&nbsp;the&nbsp;comment&nbsp;position,&nbsp;next&nbsp;the&nbsp;position&nbsp;of&nbsp;the&nbsp;item</span><br>
<span class="lineno"></span><span class="comment" id="5334130">//&nbsp;after&nbsp;all&nbsp;pending&nbsp;comments,&nbsp;prev&nbsp;is&nbsp;the&nbsp;previous&nbsp;comment&nbsp;in</span><br>
<span class="lineno">325</span><span class="comment" id="5334193">//&nbsp;a&nbsp;group&nbsp;of&nbsp;comments&nbsp;(or&nbsp;nil),&nbsp;and&nbsp;tok&nbsp;is&nbsp;the&nbsp;next&nbsp;token.</span><br>
<span class="lineno"></span><span class="comment" id="5334253">//</span><br>
<span class="lineno"></span><span class="keyword" id="5334256">func</span>&nbsp;<span class="op" id="5334261">(</span><span class="ident" id="5334262">p</span>&nbsp;<span class="op" id="5334264">*</span><span class="ident" id="5334265"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5334272">)</span>&nbsp;<span class="ident" id="5334274">writeCommentPrefix</span><span class="op" id="5334292">(</span><span class="ident" id="5334293">pos</span><span class="op" id="5334296">,</span>&nbsp;<span class="ident" id="5334298">next</span>&nbsp;<span class="ident" id="5334303"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5334308">.</span><span class="ident" id="5334309">Position</span><span class="op" id="5334317">,</span>&nbsp;<span class="ident" id="5334319">prev</span><span class="op" id="5334323">,</span>&nbsp;<span class="ident" id="5334325">comment</span>&nbsp;<span class="op" id="5334333">*</span><span class="ident" id="5334334"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5334337">.</span><span class="ident" id="5334338">Comment</span><span class="op" id="5334345">,</span>&nbsp;<span class="ident" id="5334347">tok</span>&nbsp;<span class="ident" id="5334351"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5334356">.</span><span class="ident" id="5334357">Token</span><span class="op" id="5334362">)</span>&nbsp;<span class="op" id="5334364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334367">if</span>&nbsp;<span class="builtinfunc" id="5334370">len</span><span class="op" id="5334373">(</span><span class="ident" id="5334374"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5334375">.</span><span class="ident" id="5334376">output</span><span class="op" id="5334382">)</span>&nbsp;<span class="op" id="5334384">==</span>&nbsp;<span class="num" id="5334387">0</span>&nbsp;<span class="op" id="5334389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5334393">//&nbsp;the&nbsp;comment&nbsp;is&nbsp;the&nbsp;first&nbsp;item&nbsp;to&nbsp;be&nbsp;printed&nbsp;-&nbsp;don&#39;t&nbsp;write&nbsp;any&nbsp;whitespace</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334471">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334483">if</span>&nbsp;<span class="ident" id="5334486"><a href="/go/printer/printer.go.html#5334293">pos</a></span><span class="op" id="5334489">.</span><span class="ident" id="5334490">IsValid</span><span class="op" id="5334497">(</span><span class="op" id="5334498">)</span>&nbsp;<span class="op" id="5334500">&amp;&amp;</span>&nbsp;<span class="ident" id="5334503"><a href="/go/printer/printer.go.html#5334293">pos</a></span><span class="op" id="5334506">.</span><span class="ident" id="5334507">Filename</span>&nbsp;<span class="op" id="5334516">!=</span>&nbsp;<span class="ident" id="5334519"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5334520">.</span><span class="ident" id="5334521">last</span><span class="op" id="5334525">.</span><span class="ident" id="5334526">Filename</span>&nbsp;<span class="op" id="5334535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5334539">//&nbsp;comment&nbsp;in&nbsp;a&nbsp;different&nbsp;file&nbsp;-&nbsp;separate&nbsp;with&nbsp;newlines</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334597"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5334598">.</span><span class="ident" id="5334599">writeByte</span><span class="op" id="5334608">(</span><span class="string" id="5334609">&#39;\f&#39;</span><span class="op" id="5334613">,</span>&nbsp;<span class="ident" id="5334615"><a href="/go/printer/printer.go.html#5324722">maxNewlines</a></span><span class="op" id="5334626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334630">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334642">if</span>&nbsp;<span class="ident" id="5334645"><a href="/go/printer/printer.go.html#5334293">pos</a></span><span class="op" id="5334648">.</span><span class="ident" id="5334649">Line</span>&nbsp;<span class="op" id="5334654">==</span>&nbsp;<span class="ident" id="5334657"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5334658">.</span><span class="ident" id="5334659">last</span><span class="op" id="5334663">.</span><span class="ident" id="5334664">Line</span>&nbsp;<span class="op" id="5334669">&amp;&amp;</span>&nbsp;<span class="op" id="5334672">(</span><span class="ident" id="5334673"><a href="/go/printer/printer.go.html#5334319">prev</a></span>&nbsp;<span class="op" id="5334678">==</span>&nbsp;<span class="ident" id="5334681">nil</span>&nbsp;<span class="op" id="5334685">||</span>&nbsp;<span class="ident" id="5334688"><a href="/go/printer/printer.go.html#5334319">prev</a></span><span class="op" id="5334692">.</span><span class="ident" id="5334693">Text</span><span class="op" id="5334697">[</span><span class="num" id="5334698">1</span><span class="op" id="5334699">]</span>&nbsp;<span class="op" id="5334701">!=</span>&nbsp;<span class="string" id="5334704">&#39;/&#39;</span><span class="op" id="5334707">)</span>&nbsp;<span class="op" id="5334709">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5334713">//&nbsp;comment&nbsp;on&nbsp;the&nbsp;same&nbsp;line&nbsp;as&nbsp;last&nbsp;item:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5334757">//&nbsp;separate&nbsp;with&nbsp;at&nbsp;least&nbsp;one&nbsp;separator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334799">hasSep</span>&nbsp;<span class="op" id="5334806">:=</span>&nbsp;<span class="builtintype" id="5334809">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334817">if</span>&nbsp;<span class="ident" id="5334820"><a href="/go/printer/printer.go.html#5334319">prev</a></span>&nbsp;<span class="op" id="5334825">==</span>&nbsp;<span class="ident" id="5334828">nil</span>&nbsp;<span class="op" id="5334832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5334837">//&nbsp;first&nbsp;comment&nbsp;of&nbsp;a&nbsp;comment&nbsp;group</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334876">j</span>&nbsp;<span class="op" id="5334878">:=</span>&nbsp;<span class="num" id="5334881">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334886">for</span>&nbsp;<span class="ident" id="5334890">i</span><span class="op" id="5334891">,</span>&nbsp;<span class="ident" id="5334893">ch</span>&nbsp;<span class="op" id="5334896">:=</span>&nbsp;<span class="keyword" id="5334899">range</span>&nbsp;<span class="ident" id="5334905"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5334906">.</span><span class="ident" id="5334907">wsbuf</span>&nbsp;<span class="op" id="5334913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334919">switch</span>&nbsp;<span class="ident" id="5334926"><a href="/go/printer/printer.go.html#5334893">ch</a></span>&nbsp;<span class="op" id="5334929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334935">case</span>&nbsp;<span class="ident" id="5334940"><a href="/go/printer/printer.go.html#5324917">blank</a></span><span class="op" id="5334945">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5334952">//&nbsp;ignore&nbsp;any&nbsp;blanks&nbsp;before&nbsp;a&nbsp;comment</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334995"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5334996">.</span><span class="ident" id="5334997">wsbuf</span><span class="op" id="5335002">[</span><span class="ident" id="5335003"><a href="/go/printer/printer.go.html#5334890">i</a></span><span class="op" id="5335004">]</span>&nbsp;<span class="op" id="5335006">=</span>&nbsp;<span class="ident" id="5335008"><a href="/go/printer/printer.go.html#5324891">ignore</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335020">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335033">case</span>&nbsp;<span class="ident" id="5335038"><a href="/go/printer/printer.go.html#5324945">vtab</a></span><span class="op" id="5335042">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335049">//&nbsp;respect&nbsp;existing&nbsp;tabs&nbsp;-&nbsp;important</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335091">//&nbsp;for&nbsp;proper&nbsp;formatting&nbsp;of&nbsp;commented&nbsp;structs</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335142"><a href="/go/printer/printer.go.html#5334799">hasSep</a></span>&nbsp;<span class="op" id="5335149">=</span>&nbsp;<span class="builtintype" id="5335151">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335161">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335174">case</span>&nbsp;<span class="ident" id="5335179"><a href="/go/printer/printer.go.html#5325032">indent</a></span><span class="op" id="5335185">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335192">//&nbsp;apply&nbsp;pending&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335226">continue</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5335239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335245"><a href="/go/printer/printer.go.html#5334876">j</a></span>&nbsp;<span class="op" id="5335247">=</span>&nbsp;<span class="ident" id="5335249"><a href="/go/printer/printer.go.html#5334890">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335255">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5335264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335269"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5335270">.</span><span class="ident" id="5335271">writeWhitespace</span><span class="op" id="5335286">(</span><span class="ident" id="5335287"><a href="/go/printer/printer.go.html#5334876">j</a></span><span class="op" id="5335288">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5335292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335296">//&nbsp;make&nbsp;sure&nbsp;there&nbsp;is&nbsp;at&nbsp;least&nbsp;one&nbsp;separator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335343">if</span>&nbsp;<span class="op" id="5335346">!</span><span class="ident" id="5335347"><a href="/go/printer/printer.go.html#5334799">hasSep</a></span>&nbsp;<span class="op" id="5335354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335359">sep</span>&nbsp;<span class="op" id="5335363">:=</span>&nbsp;<span class="builtintype" id="5335366">byte</span><span class="op" id="5335370">(</span><span class="string" id="5335371">&#39;\t&#39;</span><span class="op" id="5335375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335380">if</span>&nbsp;<span class="ident" id="5335383"><a href="/go/printer/printer.go.html#5334293">pos</a></span><span class="op" id="5335386">.</span><span class="ident" id="5335387">Line</span>&nbsp;<span class="op" id="5335392">==</span>&nbsp;<span class="ident" id="5335395"><a href="/go/printer/printer.go.html#5334298">next</a></span><span class="op" id="5335399">.</span><span class="ident" id="5335400">Line</span>&nbsp;<span class="op" id="5335405">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335411">//&nbsp;next&nbsp;item&nbsp;is&nbsp;on&nbsp;the&nbsp;same&nbsp;line&nbsp;as&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335463">//&nbsp;(which&nbsp;must&nbsp;be&nbsp;a&nbsp;/*-style&nbsp;comment):&nbsp;separate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335515">//&nbsp;with&nbsp;a&nbsp;blank&nbsp;instead&nbsp;of&nbsp;a&nbsp;tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335552"><a href="/go/printer/printer.go.html#5335359">sep</a></span>&nbsp;<span class="op" id="5335556">=</span>&nbsp;<span class="string" id="5335558">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5335565">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335570"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5335571">.</span><span class="ident" id="5335572">writeByte</span><span class="op" id="5335581">(</span><span class="ident" id="5335582"><a href="/go/printer/printer.go.html#5335359">sep</a></span><span class="op" id="5335585">,</span>&nbsp;<span class="num" id="5335587">1</span><span class="op" id="5335588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5335592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5335596">}</span>&nbsp;<span class="keyword" id="5335598">else</span>&nbsp;<span class="op" id="5335603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335607">//&nbsp;comment&nbsp;on&nbsp;a&nbsp;different&nbsp;line:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335641">//&nbsp;separate&nbsp;with&nbsp;at&nbsp;least&nbsp;one&nbsp;line&nbsp;break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335684">droppedLinebreak</span>&nbsp;<span class="op" id="5335701">:=</span>&nbsp;<span class="builtintype" id="5335704">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335712">j</span>&nbsp;<span class="op" id="5335714">:=</span>&nbsp;<span class="num" id="5335717">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335721">for</span>&nbsp;<span class="ident" id="5335725">i</span><span class="op" id="5335726">,</span>&nbsp;<span class="ident" id="5335728">ch</span>&nbsp;<span class="op" id="5335731">:=</span>&nbsp;<span class="keyword" id="5335734">range</span>&nbsp;<span class="ident" id="5335740"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5335741">.</span><span class="ident" id="5335742">wsbuf</span>&nbsp;<span class="op" id="5335748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335753">switch</span>&nbsp;<span class="ident" id="5335760"><a href="/go/printer/printer.go.html#5335728">ch</a></span>&nbsp;<span class="op" id="5335763">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335768">case</span>&nbsp;<span class="ident" id="5335773"><a href="/go/printer/printer.go.html#5324917">blank</a></span><span class="op" id="5335778">,</span>&nbsp;<span class="ident" id="5335780"><a href="/go/printer/printer.go.html#5324945">vtab</a></span><span class="op" id="5335784">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335790">//&nbsp;ignore&nbsp;any&nbsp;horizontal&nbsp;whitespace&nbsp;before&nbsp;line&nbsp;breaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335849"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5335850">.</span><span class="ident" id="5335851">wsbuf</span><span class="op" id="5335856">[</span><span class="ident" id="5335857"><a href="/go/printer/printer.go.html#5335725">i</a></span><span class="op" id="5335858">]</span>&nbsp;<span class="op" id="5335860">=</span>&nbsp;<span class="ident" id="5335862"><a href="/go/printer/printer.go.html#5324891">ignore</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335873">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335885">case</span>&nbsp;<span class="ident" id="5335890"><a href="/go/printer/printer.go.html#5325032">indent</a></span><span class="op" id="5335896">:</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335902">//&nbsp;apply&nbsp;pending&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335935">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335947">case</span>&nbsp;<span class="ident" id="5335952"><a href="/go/printer/printer.go.html#5325060">unindent</a></span><span class="op" id="5335960">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335966">//&nbsp;if&nbsp;this&nbsp;is&nbsp;not&nbsp;the&nbsp;last&nbsp;unindent,&nbsp;apply&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5336016">//&nbsp;as&nbsp;it&nbsp;is&nbsp;(likely)&nbsp;belonging&nbsp;to&nbsp;the&nbsp;last</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5336063">//&nbsp;construct&nbsp;(e.g.,&nbsp;a&nbsp;multi-line&nbsp;expression&nbsp;list)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5336117">//&nbsp;and&nbsp;is&nbsp;not&nbsp;part&nbsp;of&nbsp;closing&nbsp;a&nbsp;block</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336159">if</span>&nbsp;<span class="ident" id="5336162"><a href="/go/printer/printer.go.html#5335725">i</a></span><span class="op" id="5336163">+</span><span class="num" id="5336164">1</span>&nbsp;<span class="op" id="5336166">&lt;</span>&nbsp;<span class="builtinfunc" id="5336168">len</span><span class="op" id="5336171">(</span><span class="ident" id="5336172"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5336173">.</span><span class="ident" id="5336174">wsbuf</span><span class="op" id="5336179">)</span>&nbsp;<span class="op" id="5336181">&amp;&amp;</span>&nbsp;<span class="ident" id="5336184"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5336185">.</span><span class="ident" id="5336186">wsbuf</span><span class="op" id="5336191">[</span><span class="ident" id="5336192"><a href="/go/printer/printer.go.html#5335725">i</a></span><span class="op" id="5336193">+</span><span class="num" id="5336194">1</span><span class="op" id="5336195">]</span>&nbsp;<span class="op" id="5336197">==</span>&nbsp;<span class="ident" id="5336200"><a href="/go/printer/printer.go.html#5325060">unindent</a></span>&nbsp;<span class="op" id="5336209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336216">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336229">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5336235">//&nbsp;if&nbsp;the&nbsp;next&nbsp;token&nbsp;is&nbsp;not&nbsp;a&nbsp;closing&nbsp;},&nbsp;apply&nbsp;the&nbsp;unindent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5336299">//&nbsp;if&nbsp;it&nbsp;appears&nbsp;that&nbsp;the&nbsp;comment&nbsp;is&nbsp;aligned&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5336357">//&nbsp;token;&nbsp;otherwise&nbsp;assume&nbsp;the&nbsp;unindent&nbsp;is&nbsp;part&nbsp;of&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5336414">//&nbsp;closing&nbsp;block&nbsp;and&nbsp;stop&nbsp;(this&nbsp;scenario&nbsp;appears&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5336472">//&nbsp;comments&nbsp;before&nbsp;a&nbsp;case&nbsp;label&nbsp;where&nbsp;the&nbsp;comments</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5336527">//&nbsp;apply&nbsp;to&nbsp;the&nbsp;next&nbsp;case&nbsp;instead&nbsp;of&nbsp;the&nbsp;current&nbsp;one)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336585">if</span>&nbsp;<span class="ident" id="5336588"><a href="/go/printer/printer.go.html#5334347">tok</a></span>&nbsp;<span class="op" id="5336592">!=</span>&nbsp;<span class="ident" id="5336595"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5336600">.</span><span class="ident" id="5336601">RBRACE</span>&nbsp;<span class="op" id="5336608">&amp;&amp;</span>&nbsp;<span class="ident" id="5336611"><a href="/go/printer/printer.go.html#5334293">pos</a></span><span class="op" id="5336614">.</span><span class="ident" id="5336615">Column</span>&nbsp;<span class="op" id="5336622">==</span>&nbsp;<span class="ident" id="5336625"><a href="/go/printer/printer.go.html#5334298">next</a></span><span class="op" id="5336629">.</span><span class="ident" id="5336630">Column</span>&nbsp;<span class="op" id="5336637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336644">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336662">case</span>&nbsp;<span class="ident" id="5336667"><a href="/go/printer/printer.go.html#5324974">newline</a></span><span class="op" id="5336674">,</span>&nbsp;<span class="ident" id="5336676"><a href="/go/printer/printer.go.html#5325003">formfeed</a></span><span class="op" id="5336684">:</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336690"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5336691">.</span><span class="ident" id="5336692">wsbuf</span><span class="op" id="5336697">[</span><span class="ident" id="5336698"><a href="/go/printer/printer.go.html#5335725">i</a></span><span class="op" id="5336699">]</span>&nbsp;<span class="op" id="5336701">=</span>&nbsp;<span class="ident" id="5336703"><a href="/go/printer/printer.go.html#5324891">ignore</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336714"><a href="/go/printer/printer.go.html#5335684">droppedLinebreak</a></span>&nbsp;<span class="op" id="5336731">=</span>&nbsp;<span class="ident" id="5336733"><a href="/go/printer/printer.go.html#5334319">prev</a></span>&nbsp;<span class="op" id="5336738">==</span>&nbsp;<span class="ident" id="5336741">nil</span>&nbsp;<span class="comment" id="5336745">//&nbsp;record&nbsp;only&nbsp;if&nbsp;first&nbsp;comment&nbsp;of&nbsp;a&nbsp;group</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336796"><a href="/go/printer/printer.go.html#5335712">j</a></span>&nbsp;<span class="op" id="5336798">=</span>&nbsp;<span class="ident" id="5336800"><a href="/go/printer/printer.go.html#5335725">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336805">break</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5336813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336817"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5336818">.</span><span class="ident" id="5336819">writeWhitespace</span><span class="op" id="5336834">(</span><span class="ident" id="5336835"><a href="/go/printer/printer.go.html#5335712">j</a></span><span class="op" id="5336836">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5336841">//&nbsp;determine&nbsp;number&nbsp;of&nbsp;linebreaks&nbsp;before&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336896">n</span>&nbsp;<span class="op" id="5336898">:=</span>&nbsp;<span class="num" id="5336901">0</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336905">if</span>&nbsp;<span class="ident" id="5336908"><a href="/go/printer/printer.go.html#5334293">pos</a></span><span class="op" id="5336911">.</span><span class="ident" id="5336912">IsValid</span><span class="op" id="5336919">(</span><span class="op" id="5336920">)</span>&nbsp;<span class="op" id="5336922">&amp;&amp;</span>&nbsp;<span class="ident" id="5336925"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5336926">.</span><span class="ident" id="5336927">last</span><span class="op" id="5336931">.</span><span class="ident" id="5336932">IsValid</span><span class="op" id="5336939">(</span><span class="op" id="5336940">)</span>&nbsp;<span class="op" id="5336942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5336947"><a href="/go/printer/printer.go.html#5336896">n</a></span>&nbsp;<span class="op" id="5336949">=</span>&nbsp;<span class="ident" id="5336951"><a href="/go/printer/printer.go.html#5334293">pos</a></span><span class="op" id="5336954">.</span><span class="ident" id="5336955">Line</span>&nbsp;<span class="op" id="5336960">-</span>&nbsp;<span class="ident" id="5336962"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5336963">.</span><span class="ident" id="5336964">last</span><span class="op" id="5336968">.</span><span class="ident" id="5336969">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5336977">if</span>&nbsp;<span class="ident" id="5336980"><a href="/go/printer/printer.go.html#5336896">n</a></span>&nbsp;<span class="op" id="5336982">&lt;</span>&nbsp;<span class="num" id="5336984">0</span>&nbsp;<span class="op" id="5336986">{</span>&nbsp;<span class="comment" id="5336988">//&nbsp;should&nbsp;never&nbsp;happen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337015"><a href="/go/printer/printer.go.html#5336896">n</a></span>&nbsp;<span class="op" id="5337017">=</span>&nbsp;<span class="num" id="5337019">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337024">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337033">//&nbsp;at&nbsp;the&nbsp;package&nbsp;scope&nbsp;level&nbsp;only&nbsp;(p.indent&nbsp;==&nbsp;0),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337087">//&nbsp;add&nbsp;an&nbsp;extra&nbsp;newline&nbsp;if&nbsp;we&nbsp;dropped&nbsp;one&nbsp;before:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337139">//&nbsp;this&nbsp;preserves&nbsp;a&nbsp;blank&nbsp;line&nbsp;before&nbsp;documentation</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337193">//&nbsp;comments&nbsp;at&nbsp;the&nbsp;package&nbsp;scope&nbsp;level&nbsp;(issue&nbsp;2570)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337247">if</span>&nbsp;<span class="ident" id="5337250"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5337251">.</span><span class="ident" id="5337252">indent</span>&nbsp;<span class="op" id="5337259">==</span>&nbsp;<span class="num" id="5337262">0</span>&nbsp;<span class="op" id="5337264">&amp;&amp;</span>&nbsp;<span class="ident" id="5337267"><a href="/go/printer/printer.go.html#5335684">droppedLinebreak</a></span>&nbsp;<span class="op" id="5337284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337289"><a href="/go/printer/printer.go.html#5336896">n</a></span><span class="op" id="5337290">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337300">//&nbsp;make&nbsp;sure&nbsp;there&nbsp;is&nbsp;at&nbsp;least&nbsp;one&nbsp;line&nbsp;break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337348">//&nbsp;if&nbsp;the&nbsp;previous&nbsp;comment&nbsp;was&nbsp;a&nbsp;line&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337396">if</span>&nbsp;<span class="ident" id="5337399"><a href="/go/printer/printer.go.html#5336896">n</a></span>&nbsp;<span class="op" id="5337401">==</span>&nbsp;<span class="num" id="5337404">0</span>&nbsp;<span class="op" id="5337406">&amp;&amp;</span>&nbsp;<span class="ident" id="5337409"><a href="/go/printer/printer.go.html#5334319">prev</a></span>&nbsp;<span class="op" id="5337414">!=</span>&nbsp;<span class="ident" id="5337417">nil</span>&nbsp;<span class="op" id="5337421">&amp;&amp;</span>&nbsp;<span class="ident" id="5337424"><a href="/go/printer/printer.go.html#5334319">prev</a></span><span class="op" id="5337428">.</span><span class="ident" id="5337429">Text</span><span class="op" id="5337433">[</span><span class="num" id="5337434">1</span><span class="op" id="5337435">]</span>&nbsp;<span class="op" id="5337437">==</span>&nbsp;<span class="string" id="5337440">&#39;/&#39;</span>&nbsp;<span class="op" id="5337444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337449"><a href="/go/printer/printer.go.html#5336896">n</a></span>&nbsp;<span class="op" id="5337451">=</span>&nbsp;<span class="num" id="5337453">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337457">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337462">if</span>&nbsp;<span class="ident" id="5337465"><a href="/go/printer/printer.go.html#5336896">n</a></span>&nbsp;<span class="op" id="5337467">&gt;</span>&nbsp;<span class="num" id="5337469">0</span>&nbsp;<span class="op" id="5337471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337476">//&nbsp;use&nbsp;formfeeds&nbsp;to&nbsp;break&nbsp;columns&nbsp;before&nbsp;a&nbsp;comment;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337531">//&nbsp;this&nbsp;is&nbsp;analogous&nbsp;to&nbsp;using&nbsp;formfeeds&nbsp;to&nbsp;separate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5337586">//&nbsp;individual&nbsp;lines&nbsp;of&nbsp;/*-style&nbsp;comments</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337630"><a href="/go/printer/printer.go.html#5334262">p</a></span><span class="op" id="5337631">.</span><span class="ident" id="5337632">writeByte</span><span class="op" id="5337641">(</span><span class="string" id="5337642">&#39;\f&#39;</span><span class="op" id="5337646">,</span>&nbsp;<span class="ident" id="5337648"><a href="/go/printer/printer.go.html#5348776">nlimit</a></span><span class="op" id="5337654">(</span><span class="ident" id="5337655"><a href="/go/printer/printer.go.html#5336896">n</a></span><span class="op" id="5337656">)</span><span class="op" id="5337657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337664">}</span><br>
<span class="lineno"></span><span class="op" id="5337666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">450</span><span class="comment" id="5337669">//&nbsp;Returns&nbsp;true&nbsp;if&nbsp;s&nbsp;contains&nbsp;only&nbsp;white&nbsp;space</span><br>
<span class="lineno"></span><span class="comment" id="5337716">//&nbsp;(only&nbsp;tabs&nbsp;and&nbsp;blanks&nbsp;can&nbsp;appear&nbsp;in&nbsp;the&nbsp;printer&#39;s&nbsp;context).</span><br>
<span class="lineno"></span><span class="comment" id="5337779">//</span><br>
<span class="lineno"></span><span class="keyword" id="5337782">func</span>&nbsp;<span class="ident" id="5337787">isBlank</span><span class="op" id="5337794">(</span><span class="ident" id="5337795">s</span>&nbsp;<span class="builtintype" id="5337797">string</span><span class="op" id="5337803">)</span>&nbsp;<span class="builtintype" id="5337805">bool</span>&nbsp;<span class="op" id="5337810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337813">for</span>&nbsp;<span class="ident" id="5337817">i</span>&nbsp;<span class="op" id="5337819">:=</span>&nbsp;<span class="num" id="5337822">0</span><span class="op" id="5337823">;</span>&nbsp;<span class="ident" id="5337825"><a href="/go/printer/printer.go.html#5337817">i</a></span>&nbsp;<span class="op" id="5337827">&lt;</span>&nbsp;<span class="builtinfunc" id="5337829">len</span><span class="op" id="5337832">(</span><span class="ident" id="5337833"><a href="/go/printer/printer.go.html#5337795">s</a></span><span class="op" id="5337834">)</span><span class="op" id="5337835">;</span>&nbsp;<span class="ident" id="5337837"><a href="/go/printer/printer.go.html#5337817">i</a></span><span class="op" id="5337838">++</span>&nbsp;<span class="op" id="5337841">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337845">if</span>&nbsp;<span class="ident" id="5337848"><a href="/go/printer/printer.go.html#5337795">s</a></span><span class="op" id="5337849">[</span><span class="ident" id="5337850"><a href="/go/printer/printer.go.html#5337817">i</a></span><span class="op" id="5337851">]</span>&nbsp;<span class="op" id="5337853">&gt;</span>&nbsp;<span class="string" id="5337855">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5337859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337864">return</span>&nbsp;<span class="builtintype" id="5337871">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5337882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5337885">return</span>&nbsp;<span class="builtintype" id="5337892">true</span><br>
<span class="lineno">460</span><span class="op" id="5337897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5337900">//&nbsp;commonPrefix&nbsp;returns&nbsp;the&nbsp;common&nbsp;prefix&nbsp;of&nbsp;a&nbsp;and&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="5337954">func</span>&nbsp;<span class="ident" id="5337959">commonPrefix</span><span class="op" id="5337971">(</span><span class="ident" id="5337972">a</span><span class="op" id="5337973">,</span>&nbsp;<span class="ident" id="5337975">b</span>&nbsp;<span class="builtintype" id="5337977">string</span><span class="op" id="5337983">)</span>&nbsp;<span class="builtintype" id="5337985">string</span>&nbsp;<span class="op" id="5337992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337995">i</span>&nbsp;<span class="op" id="5337997">:=</span>&nbsp;<span class="num" id="5338000">0</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338003">for</span>&nbsp;<span class="ident" id="5338007"><a href="/go/printer/printer.go.html#5337995">i</a></span>&nbsp;<span class="op" id="5338009">&lt;</span>&nbsp;<span class="builtinfunc" id="5338011">len</span><span class="op" id="5338014">(</span><span class="ident" id="5338015"><a href="/go/printer/printer.go.html#5337972">a</a></span><span class="op" id="5338016">)</span>&nbsp;<span class="op" id="5338018">&amp;&amp;</span>&nbsp;<span class="ident" id="5338021"><a href="/go/printer/printer.go.html#5337995">i</a></span>&nbsp;<span class="op" id="5338023">&lt;</span>&nbsp;<span class="builtinfunc" id="5338025">len</span><span class="op" id="5338028">(</span><span class="ident" id="5338029"><a href="/go/printer/printer.go.html#5337975">b</a></span><span class="op" id="5338030">)</span>&nbsp;<span class="op" id="5338032">&amp;&amp;</span>&nbsp;<span class="ident" id="5338035"><a href="/go/printer/printer.go.html#5337972">a</a></span><span class="op" id="5338036">[</span><span class="ident" id="5338037"><a href="/go/printer/printer.go.html#5337995">i</a></span><span class="op" id="5338038">]</span>&nbsp;<span class="op" id="5338040">==</span>&nbsp;<span class="ident" id="5338043"><a href="/go/printer/printer.go.html#5337975">b</a></span><span class="op" id="5338044">[</span><span class="ident" id="5338045"><a href="/go/printer/printer.go.html#5337995">i</a></span><span class="op" id="5338046">]</span>&nbsp;<span class="op" id="5338048">&amp;&amp;</span>&nbsp;<span class="op" id="5338051">(</span><span class="ident" id="5338052"><a href="/go/printer/printer.go.html#5337972">a</a></span><span class="op" id="5338053">[</span><span class="ident" id="5338054"><a href="/go/printer/printer.go.html#5337995">i</a></span><span class="op" id="5338055">]</span>&nbsp;<span class="op" id="5338057">&lt;=</span>&nbsp;<span class="string" id="5338060">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5338064">||</span>&nbsp;<span class="ident" id="5338067"><a href="/go/printer/printer.go.html#5337972">a</a></span><span class="op" id="5338068">[</span><span class="ident" id="5338069"><a href="/go/printer/printer.go.html#5337995">i</a></span><span class="op" id="5338070">]</span>&nbsp;<span class="op" id="5338072">==</span>&nbsp;<span class="string" id="5338075">&#39;*&#39;</span><span class="op" id="5338078">)</span>&nbsp;<span class="op" id="5338080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5338084"><a href="/go/printer/printer.go.html#5337995">i</a></span><span class="op" id="5338085">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5338089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338092">return</span>&nbsp;<span class="ident" id="5338099"><a href="/go/printer/printer.go.html#5337972">a</a></span><span class="op" id="5338100">[</span><span class="num" id="5338101">0</span><span class="op" id="5338102">:</span><span class="ident" id="5338103"><a href="/go/printer/printer.go.html#5337995">i</a></span><span class="op" id="5338104">]</span><br>
<span class="lineno"></span><span class="op" id="5338106">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="comment" id="5338109">//&nbsp;trimRight&nbsp;returns&nbsp;s&nbsp;with&nbsp;trailing&nbsp;whitespace&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="5338166">func</span>&nbsp;<span class="ident" id="5338171">trimRight</span><span class="op" id="5338180">(</span><span class="ident" id="5338181">s</span>&nbsp;<span class="builtintype" id="5338183">string</span><span class="op" id="5338189">)</span>&nbsp;<span class="builtintype" id="5338191">string</span>&nbsp;<span class="op" id="5338198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338201">return</span>&nbsp;<span class="ident" id="5338208"><a href="/go/printer/printer.go.html#5324671">strings</a></span><span class="op" id="5338215">.</span><span class="ident" id="5338216">TrimRightFunc</span><span class="op" id="5338229">(</span><span class="ident" id="5338230"><a href="/go/printer/printer.go.html#5338181">s</a></span><span class="op" id="5338231">,</span>&nbsp;<span class="ident" id="5338233"><a href="/go/printer/printer.go.html#5324700">unicode</a></span><span class="op" id="5338240">.</span><span class="ident" id="5338241">IsSpace</span><span class="op" id="5338248">)</span><br>
<span class="lineno"></span><span class="op" id="5338250">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span><span class="comment" id="5338253">//&nbsp;stripCommonPrefix&nbsp;removes&nbsp;a&nbsp;common&nbsp;prefix&nbsp;from&nbsp;/*-style&nbsp;comment&nbsp;lines&nbsp;(unless&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="5338337">//&nbsp;comment&nbsp;line&nbsp;is&nbsp;indented,&nbsp;all&nbsp;but&nbsp;the&nbsp;first&nbsp;line&nbsp;have&nbsp;some&nbsp;form&nbsp;of&nbsp;space&nbsp;prefix).</span><br>
<span class="lineno"></span><span class="comment" id="5338422">//&nbsp;The&nbsp;prefix&nbsp;is&nbsp;computed&nbsp;using&nbsp;heuristics&nbsp;such&nbsp;that&nbsp;is&nbsp;likely&nbsp;that&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span><span class="comment" id="5338502">//&nbsp;contents&nbsp;are&nbsp;nicely&nbsp;laid&nbsp;out&nbsp;after&nbsp;re-printing&nbsp;each&nbsp;line&nbsp;using&nbsp;the&nbsp;printer&#39;s</span><br>
<span class="lineno">480</span><span class="comment" id="5338582">//&nbsp;current&nbsp;indentation.</span><br>
<span class="lineno"></span><span class="comment" id="5338606">//</span><br>
<span class="lineno"></span><span class="keyword" id="5338609">func</span>&nbsp;<span class="ident" id="5338614">stripCommonPrefix</span><span class="op" id="5338631">(</span><span class="ident" id="5338632">lines</span>&nbsp;<span class="op" id="5338638">[</span><span class="op" id="5338639">]</span><span class="builtintype" id="5338640">string</span><span class="op" id="5338646">)</span>&nbsp;<span class="op" id="5338648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338651">if</span>&nbsp;<span class="builtinfunc" id="5338654">len</span><span class="op" id="5338657">(</span><span class="ident" id="5338658"><a href="/go/printer/printer.go.html#5338632">lines</a></span><span class="op" id="5338663">)</span>&nbsp;<span class="op" id="5338665">&lt;=</span>&nbsp;<span class="num" id="5338668">1</span>&nbsp;<span class="op" id="5338670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338674">return</span>&nbsp;<span class="comment" id="5338681">//&nbsp;at&nbsp;most&nbsp;one&nbsp;line&nbsp;-&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5338718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5338721">//&nbsp;len(lines)&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5338741">//&nbsp;The&nbsp;heuristic&nbsp;in&nbsp;this&nbsp;function&nbsp;tries&nbsp;to&nbsp;handle&nbsp;a&nbsp;few</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5338798">//&nbsp;common&nbsp;patterns&nbsp;of&nbsp;/*-style&nbsp;comments:&nbsp;Comments&nbsp;where</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5338855">//&nbsp;the&nbsp;opening&nbsp;/*&nbsp;and&nbsp;closing&nbsp;*/&nbsp;are&nbsp;aligned&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5338909">//&nbsp;rest&nbsp;of&nbsp;the&nbsp;comment&nbsp;text&nbsp;is&nbsp;aligned&nbsp;and&nbsp;indented&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5338967">//&nbsp;blanks&nbsp;or&nbsp;tabs,&nbsp;cases&nbsp;with&nbsp;a&nbsp;vertical&nbsp;&#34;line&nbsp;of&nbsp;stars&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5339025">//&nbsp;on&nbsp;the&nbsp;left,&nbsp;and&nbsp;cases&nbsp;where&nbsp;the&nbsp;closing&nbsp;*/&nbsp;is&nbsp;on&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5339083">//&nbsp;same&nbsp;line&nbsp;as&nbsp;the&nbsp;last&nbsp;comment&nbsp;text.</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5339124">//&nbsp;Compute&nbsp;maximum&nbsp;common&nbsp;white&nbsp;prefix&nbsp;of&nbsp;all&nbsp;but&nbsp;the&nbsp;first,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5339186">//&nbsp;last,&nbsp;and&nbsp;blank&nbsp;lines,&nbsp;and&nbsp;replace&nbsp;blank&nbsp;lines&nbsp;with&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5339248">//&nbsp;lines&nbsp;(the&nbsp;first&nbsp;line&nbsp;starts&nbsp;with&nbsp;/*&nbsp;and&nbsp;has&nbsp;no&nbsp;prefix).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5339309">//&nbsp;In&nbsp;case&nbsp;of&nbsp;two-line&nbsp;comments,&nbsp;consider&nbsp;the&nbsp;last&nbsp;line&nbsp;for</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5339370">//&nbsp;the&nbsp;prefix&nbsp;computation&nbsp;since&nbsp;otherwise&nbsp;the&nbsp;prefix&nbsp;would</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5339430">//&nbsp;be&nbsp;empty.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5339444">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5339448">//&nbsp;Note&nbsp;that&nbsp;the&nbsp;first&nbsp;and&nbsp;last&nbsp;line&nbsp;are&nbsp;never&nbsp;empty&nbsp;(they</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5339508">//&nbsp;contain&nbsp;the&nbsp;opening&nbsp;/*&nbsp;and&nbsp;closing&nbsp;*/&nbsp;respectively)&nbsp;and</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5339568">//&nbsp;thus&nbsp;they&nbsp;can&nbsp;be&nbsp;ignored&nbsp;by&nbsp;the&nbsp;blank&nbsp;line&nbsp;check.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339622">var</span>&nbsp;<span class="ident" id="5339626">prefix</span>&nbsp;<span class="builtintype" id="5339633">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339641">if</span>&nbsp;<span class="builtinfunc" id="5339644">len</span><span class="op" id="5339647">(</span><span class="ident" id="5339648"><a href="/go/printer/printer.go.html#5338632">lines</a></span><span class="op" id="5339653">)</span>&nbsp;<span class="op" id="5339655">&gt;</span>&nbsp;<span class="num" id="5339657">2</span>&nbsp;<span class="op" id="5339659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5339663">first</span>&nbsp;<span class="op" id="5339669">:=</span>&nbsp;<span class="builtintype" id="5339672">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339679">for</span>&nbsp;<span class="ident" id="5339683">i</span><span class="op" id="5339684">,</span>&nbsp;<span class="ident" id="5339686">line</span>&nbsp;<span class="op" id="5339691">:=</span>&nbsp;<span class="keyword" id="5339694">range</span>&nbsp;<span class="ident" id="5339700"><a href="/go/printer/printer.go.html#5338632">lines</a></span><span class="op" id="5339705">[</span><span class="num" id="5339706">1</span>&nbsp;<span class="op" id="5339708">:</span>&nbsp;<span class="builtinfunc" id="5339710">len</span><span class="op" id="5339713">(</span><span class="ident" id="5339714"><a href="/go/printer/printer.go.html#5338632">lines</a></span><span class="op" id="5339719">)</span><span class="op" id="5339720">-</span><span class="num" id="5339721">1</span><span class="op" id="5339722">]</span>&nbsp;<span class="op" id="5339724">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339729">switch</span>&nbsp;<span class="op" id="5339736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339741">case</span>&nbsp;<span class="ident" id="5339746"><a href="/go/printer/printer.go.html#5337787">isBlank</a></span><span class="op" id="5339753">(</span><span class="ident" id="5339754"><a href="/go/printer/printer.go.html#5339686">line</a></span><span class="op" id="5339758">)</span><span class="op" id="5339759">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5339765"><a href="/go/printer/printer.go.html#5338632">lines</a></span><span class="op" id="5339770">[</span><span class="num" id="5339771">1</span><span class="op" id="5339772">+</span><span class="ident" id="5339773"><a href="/go/printer/printer.go.html#5339683">i</a></span><span class="op" id="5339774">]</span>&nbsp;<span class="op" id="5339776">=</span>&nbsp;<span class="string" id="5339778">&#34;&#34;</span>&nbsp;<span class="comment" id="5339781">//&nbsp;range&nbsp;starts&nbsp;with&nbsp;lines[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339814">case</span>&nbsp;<span class="ident" id="5339819"><a href="/go/printer/printer.go.html#5339663">first</a></span><span class="op" id="5339824">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5339830"><a href="/go/printer/printer.go.html#5339626">prefix</a></span>&nbsp;<span class="op" id="5339837">=</span>&nbsp;<span class="ident" id="5339839"><a href="/go/printer/printer.go.html#5337959">commonPrefix</a></span><span class="op" id="5339851">(</span><span class="ident" id="5339852"><a href="/go/printer/printer.go.html#5339686">line</a></span><span class="op" id="5339856">,</span>&nbsp;<span class="ident" id="5339858"><a href="/go/printer/printer.go.html#5339686">line</a></span><span class="op" id="5339862">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5339868"><a href="/go/printer/printer.go.html#5339663">first</a></span>&nbsp;<span class="op" id="5339874">=</span>&nbsp;<span class="builtintype" id="5339876">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339885">default</span><span class="op" id="5339892">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5339898"><a href="/go/printer/printer.go.html#5339626">prefix</a></span>&nbsp;<span class="op" id="5339905">=</span>&nbsp;<span class="ident" id="5339907"><a href="/go/printer/printer.go.html#5337959">commonPrefix</a></span><span class="op" id="5339919">(</span><span class="ident" id="5339920"><a href="/go/printer/printer.go.html#5339626">prefix</a></span><span class="op" id="5339926">,</span>&nbsp;<span class="ident" id="5339928"><a href="/go/printer/printer.go.html#5339686">line</a></span><span class="op" id="5339932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339941">}</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339944">}</span>&nbsp;<span class="keyword" id="5339946">else</span>&nbsp;<span class="op" id="5339951">{</span>&nbsp;<span class="comment" id="5339953">//&nbsp;len(lines)&nbsp;==&nbsp;2,&nbsp;lines&nbsp;cannot&nbsp;be&nbsp;blank&nbsp;(contain&nbsp;/*&nbsp;and&nbsp;*/)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340017">line</span>&nbsp;<span class="op" id="5340022">:=</span>&nbsp;<span class="ident" id="5340025"><a href="/go/printer/printer.go.html#5338632">lines</a></span><span class="op" id="5340030">[</span><span class="num" id="5340031">1</span><span class="op" id="5340032">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340036"><a href="/go/printer/printer.go.html#5339626">prefix</a></span>&nbsp;<span class="op" id="5340043">=</span>&nbsp;<span class="ident" id="5340045"><a href="/go/printer/printer.go.html#5337959">commonPrefix</a></span><span class="op" id="5340057">(</span><span class="ident" id="5340058"><a href="/go/printer/printer.go.html#5340017">line</a></span><span class="op" id="5340062">,</span>&nbsp;<span class="ident" id="5340064"><a href="/go/printer/printer.go.html#5340017">line</a></span><span class="op" id="5340068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5340075">/*<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;Check&nbsp;for&nbsp;vertical&nbsp;&#34;line&nbsp;of&nbsp;stars&#34;&nbsp;and&nbsp;correct&nbsp;prefix&nbsp;accordingly.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340155">lineOfStars</span>&nbsp;<span class="op" id="5340167">:=</span>&nbsp;<span class="builtintype" id="5340170">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340177">if</span>&nbsp;<span class="ident" id="5340180">i</span>&nbsp;<span class="op" id="5340182">:=</span>&nbsp;<span class="ident" id="5340185"><a href="/go/printer/printer.go.html#5324671">strings</a></span><span class="op" id="5340192">.</span><span class="ident" id="5340193">Index</span><span class="op" id="5340198">(</span><span class="ident" id="5340199"><a href="/go/printer/printer.go.html#5339626">prefix</a></span><span class="op" id="5340205">,</span>&nbsp;<span class="string" id="5340207">&#34;*&#34;</span><span class="op" id="5340210">)</span><span class="op" id="5340211">;</span>&nbsp;<span class="ident" id="5340213"><a href="/go/printer/printer.go.html#5340180">i</a></span>&nbsp;<span class="op" id="5340215">&gt;=</span>&nbsp;<span class="num" id="5340218">0</span>&nbsp;<span class="op" id="5340220">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5340224">//&nbsp;Line&nbsp;of&nbsp;stars&nbsp;present.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340252">if</span>&nbsp;<span class="ident" id="5340255"><a href="/go/printer/printer.go.html#5340180">i</a></span>&nbsp;<span class="op" id="5340257">&gt;</span>&nbsp;<span class="num" id="5340259">0</span>&nbsp;<span class="op" id="5340261">&amp;&amp;</span>&nbsp;<span class="ident" id="5340264"><a href="/go/printer/printer.go.html#5339626">prefix</a></span><span class="op" id="5340270">[</span><span class="ident" id="5340271"><a href="/go/printer/printer.go.html#5340180">i</a></span><span class="op" id="5340272">-</span><span class="num" id="5340273">1</span><span class="op" id="5340274">]</span>&nbsp;<span class="op" id="5340276">==</span>&nbsp;<span class="string" id="5340279">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5340283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340288"><a href="/go/printer/printer.go.html#5340180">i</a></span><span class="op" id="5340289">--</span>&nbsp;<span class="comment" id="5340292">//&nbsp;remove&nbsp;trailing&nbsp;blank&nbsp;from&nbsp;prefix&nbsp;so&nbsp;stars&nbsp;remain&nbsp;aligned</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340359"><a href="/go/printer/printer.go.html#5339626">prefix</a></span>&nbsp;<span class="op" id="5340366">=</span>&nbsp;<span class="ident" id="5340368"><a href="/go/printer/printer.go.html#5339626">prefix</a></span><span class="op" id="5340374">[</span><span class="num" id="5340375">0</span><span class="op" id="5340376">:</span><span class="ident" id="5340377"><a href="/go/printer/printer.go.html#5340180">i</a></span><span class="op" id="5340378">]</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340382"><a href="/go/printer/printer.go.html#5340155">lineOfStars</a></span>&nbsp;<span class="op" id="5340394">=</span>&nbsp;<span class="builtintype" id="5340396">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340402">}</span>&nbsp;<span class="keyword" id="5340404">else</span>&nbsp;<span class="op" id="5340409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5340413">//&nbsp;No&nbsp;line&nbsp;of&nbsp;stars&nbsp;present.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5340444">//&nbsp;Determine&nbsp;the&nbsp;white&nbsp;space&nbsp;on&nbsp;the&nbsp;first&nbsp;line&nbsp;after&nbsp;the&nbsp;/*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5340506">//&nbsp;and&nbsp;before&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;comment&nbsp;text,&nbsp;assume&nbsp;two</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5340568">//&nbsp;blanks&nbsp;instead&nbsp;of&nbsp;the&nbsp;/*&nbsp;unless&nbsp;the&nbsp;first&nbsp;character&nbsp;after</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5340631">//&nbsp;the&nbsp;/*&nbsp;is&nbsp;a&nbsp;tab.&nbsp;If&nbsp;the&nbsp;first&nbsp;comment&nbsp;line&nbsp;is&nbsp;empty&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5340692">//&nbsp;for&nbsp;the&nbsp;opening&nbsp;/*,&nbsp;assume&nbsp;up&nbsp;to&nbsp;3&nbsp;blanks&nbsp;or&nbsp;a&nbsp;tab.&nbsp;This</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5340754">//&nbsp;whitespace&nbsp;may&nbsp;be&nbsp;found&nbsp;as&nbsp;suffix&nbsp;in&nbsp;the&nbsp;common&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340815">first</span>&nbsp;<span class="op" id="5340821">:=</span>&nbsp;<span class="ident" id="5340824"><a href="/go/printer/printer.go.html#5338632">lines</a></span><span class="op" id="5340829">[</span><span class="num" id="5340830">0</span><span class="op" id="5340831">]</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340835">if</span>&nbsp;<span class="ident" id="5340838"><a href="/go/printer/printer.go.html#5337787">isBlank</a></span><span class="op" id="5340845">(</span><span class="ident" id="5340846"><a href="/go/printer/printer.go.html#5340815">first</a></span><span class="op" id="5340851">[</span><span class="num" id="5340852">2</span><span class="op" id="5340853">:</span><span class="op" id="5340854">]</span><span class="op" id="5340855">)</span>&nbsp;<span class="op" id="5340857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5340862">//&nbsp;no&nbsp;comment&nbsp;text&nbsp;on&nbsp;the&nbsp;first&nbsp;line:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5340903">//&nbsp;reduce&nbsp;prefix&nbsp;by&nbsp;up&nbsp;to&nbsp;3&nbsp;blanks&nbsp;or&nbsp;a&nbsp;tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5340950">//&nbsp;if&nbsp;present&nbsp;-&nbsp;this&nbsp;keeps&nbsp;comment&nbsp;text&nbsp;indented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5341002">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;/*&nbsp;and&nbsp;*/&#39;s&nbsp;if&nbsp;it&nbsp;was&nbsp;indented</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5341055">//&nbsp;in&nbsp;the&nbsp;first&nbsp;place</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341080">i</span>&nbsp;<span class="op" id="5341082">:=</span>&nbsp;<span class="builtinfunc" id="5341085">len</span><span class="op" id="5341088">(</span><span class="ident" id="5341089"><a href="/go/printer/printer.go.html#5339626">prefix</a></span><span class="op" id="5341095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341100">for</span>&nbsp;<span class="ident" id="5341104">n</span>&nbsp;<span class="op" id="5341106">:=</span>&nbsp;<span class="num" id="5341109">0</span><span class="op" id="5341110">;</span>&nbsp;<span class="ident" id="5341112"><a href="/go/printer/printer.go.html#5341104">n</a></span>&nbsp;<span class="op" id="5341114">&lt;</span>&nbsp;<span class="num" id="5341116">3</span>&nbsp;<span class="op" id="5341118">&amp;&amp;</span>&nbsp;<span class="ident" id="5341121"><a href="/go/printer/printer.go.html#5341080">i</a></span>&nbsp;<span class="op" id="5341123">&gt;</span>&nbsp;<span class="num" id="5341125">0</span>&nbsp;<span class="op" id="5341127">&amp;&amp;</span>&nbsp;<span class="ident" id="5341130"><a href="/go/printer/printer.go.html#5339626">prefix</a></span><span class="op" id="5341136">[</span><span class="ident" id="5341137"><a href="/go/printer/printer.go.html#5341080">i</a></span><span class="op" id="5341138">-</span><span class="num" id="5341139">1</span><span class="op" id="5341140">]</span>&nbsp;<span class="op" id="5341142">==</span>&nbsp;<span class="string" id="5341145">&#39;&nbsp;&#39;</span><span class="op" id="5341148">;</span>&nbsp;<span class="ident" id="5341150"><a href="/go/printer/printer.go.html#5341104">n</a></span><span class="op" id="5341151">++</span>&nbsp;<span class="op" id="5341154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341160"><a href="/go/printer/printer.go.html#5341080">i</a></span><span class="op" id="5341161">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341167">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341172">if</span>&nbsp;<span class="ident" id="5341175"><a href="/go/printer/printer.go.html#5341080">i</a></span>&nbsp;<span class="op" id="5341177">==</span>&nbsp;<span class="builtinfunc" id="5341180">len</span><span class="op" id="5341183">(</span><span class="ident" id="5341184"><a href="/go/printer/printer.go.html#5339626">prefix</a></span><span class="op" id="5341190">)</span>&nbsp;<span class="op" id="5341192">&amp;&amp;</span>&nbsp;<span class="ident" id="5341195"><a href="/go/printer/printer.go.html#5341080">i</a></span>&nbsp;<span class="op" id="5341197">&gt;</span>&nbsp;<span class="num" id="5341199">0</span>&nbsp;<span class="op" id="5341201">&amp;&amp;</span>&nbsp;<span class="ident" id="5341204"><a href="/go/printer/printer.go.html#5339626">prefix</a></span><span class="op" id="5341210">[</span><span class="ident" id="5341211"><a href="/go/printer/printer.go.html#5341080">i</a></span><span class="op" id="5341212">-</span><span class="num" id="5341213">1</span><span class="op" id="5341214">]</span>&nbsp;<span class="op" id="5341216">==</span>&nbsp;<span class="string" id="5341219">&#39;\t&#39;</span>&nbsp;<span class="op" id="5341224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341230"><a href="/go/printer/printer.go.html#5341080">i</a></span><span class="op" id="5341231">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341242"><a href="/go/printer/printer.go.html#5339626">prefix</a></span>&nbsp;<span class="op" id="5341249">=</span>&nbsp;<span class="ident" id="5341251"><a href="/go/printer/printer.go.html#5339626">prefix</a></span><span class="op" id="5341257">[</span><span class="num" id="5341258">0</span><span class="op" id="5341259">:</span><span class="ident" id="5341260"><a href="/go/printer/printer.go.html#5341080">i</a></span><span class="op" id="5341261">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341265">}</span>&nbsp;<span class="keyword" id="5341267">else</span>&nbsp;<span class="op" id="5341272">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5341277">//&nbsp;comment&nbsp;text&nbsp;on&nbsp;the&nbsp;first&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341314">suffix</span>&nbsp;<span class="op" id="5341321">:=</span>&nbsp;<span class="builtinfunc" id="5341324">make</span><span class="op" id="5341328">(</span><span class="op" id="5341329">[</span><span class="op" id="5341330">]</span><span class="builtintype" id="5341331">byte</span><span class="op" id="5341335">,</span>&nbsp;<span class="builtinfunc" id="5341337">len</span><span class="op" id="5341340">(</span><span class="ident" id="5341341"><a href="/go/printer/printer.go.html#5340815">first</a></span><span class="op" id="5341346">)</span><span class="op" id="5341347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341352">n</span>&nbsp;<span class="op" id="5341354">:=</span>&nbsp;<span class="num" id="5341357">2</span>&nbsp;<span class="comment" id="5341359">//&nbsp;start&nbsp;after&nbsp;opening&nbsp;/*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341388">for</span>&nbsp;<span class="ident" id="5341392"><a href="/go/printer/printer.go.html#5341352">n</a></span>&nbsp;<span class="op" id="5341394">&lt;</span>&nbsp;<span class="builtinfunc" id="5341396">len</span><span class="op" id="5341399">(</span><span class="ident" id="5341400"><a href="/go/printer/printer.go.html#5340815">first</a></span><span class="op" id="5341405">)</span>&nbsp;<span class="op" id="5341407">&amp;&amp;</span>&nbsp;<span class="ident" id="5341410"><a href="/go/printer/printer.go.html#5340815">first</a></span><span class="op" id="5341415">[</span><span class="ident" id="5341416"><a href="/go/printer/printer.go.html#5341352">n</a></span><span class="op" id="5341417">]</span>&nbsp;<span class="op" id="5341419">&lt;=</span>&nbsp;<span class="string" id="5341422">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5341426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341432"><a href="/go/printer/printer.go.html#5341314">suffix</a></span><span class="op" id="5341438">[</span><span class="ident" id="5341439"><a href="/go/printer/printer.go.html#5341352">n</a></span><span class="op" id="5341440">]</span>&nbsp;<span class="op" id="5341442">=</span>&nbsp;<span class="ident" id="5341444"><a href="/go/printer/printer.go.html#5340815">first</a></span><span class="op" id="5341449">[</span><span class="ident" id="5341450"><a href="/go/printer/printer.go.html#5341352">n</a></span><span class="op" id="5341451">]</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341457"><a href="/go/printer/printer.go.html#5341352">n</a></span><span class="op" id="5341458">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341469">if</span>&nbsp;<span class="ident" id="5341472"><a href="/go/printer/printer.go.html#5341352">n</a></span>&nbsp;<span class="op" id="5341474">&gt;</span>&nbsp;<span class="num" id="5341476">2</span>&nbsp;<span class="op" id="5341478">&amp;&amp;</span>&nbsp;<span class="ident" id="5341481"><a href="/go/printer/printer.go.html#5341314">suffix</a></span><span class="op" id="5341487">[</span><span class="num" id="5341488">2</span><span class="op" id="5341489">]</span>&nbsp;<span class="op" id="5341491">==</span>&nbsp;<span class="string" id="5341494">&#39;\t&#39;</span>&nbsp;<span class="op" id="5341499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5341505">//&nbsp;assume&nbsp;the&nbsp;&#39;\t&#39;&nbsp;compensates&nbsp;for&nbsp;the&nbsp;/*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341551"><a href="/go/printer/printer.go.html#5341314">suffix</a></span>&nbsp;<span class="op" id="5341558">=</span>&nbsp;<span class="ident" id="5341560"><a href="/go/printer/printer.go.html#5341314">suffix</a></span><span class="op" id="5341566">[</span><span class="num" id="5341567">2</span><span class="op" id="5341568">:</span><span class="ident" id="5341569"><a href="/go/printer/printer.go.html#5341352">n</a></span><span class="op" id="5341570">]</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341575">}</span>&nbsp;<span class="keyword" id="5341577">else</span>&nbsp;<span class="op" id="5341582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5341588">//&nbsp;otherwise&nbsp;assume&nbsp;two&nbsp;blanks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341623"><a href="/go/printer/printer.go.html#5341314">suffix</a></span><span class="op" id="5341629">[</span><span class="num" id="5341630">0</span><span class="op" id="5341631">]</span><span class="op" id="5341632">,</span>&nbsp;<span class="ident" id="5341634"><a href="/go/printer/printer.go.html#5341314">suffix</a></span><span class="op" id="5341640">[</span><span class="num" id="5341641">1</span><span class="op" id="5341642">]</span>&nbsp;<span class="op" id="5341644">=</span>&nbsp;<span class="string" id="5341646">&#39;&nbsp;&#39;</span><span class="op" id="5341649">,</span>&nbsp;<span class="string" id="5341651">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341659"><a href="/go/printer/printer.go.html#5341314">suffix</a></span>&nbsp;<span class="op" id="5341666">=</span>&nbsp;<span class="ident" id="5341668"><a href="/go/printer/printer.go.html#5341314">suffix</a></span><span class="op" id="5341674">[</span><span class="num" id="5341675">0</span><span class="op" id="5341676">:</span><span class="ident" id="5341677"><a href="/go/printer/printer.go.html#5341352">n</a></span><span class="op" id="5341678">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341683">}</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5341688">//&nbsp;Shorten&nbsp;the&nbsp;computed&nbsp;common&nbsp;prefix&nbsp;by&nbsp;the&nbsp;length&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5341746">//&nbsp;suffix,&nbsp;if&nbsp;it&nbsp;is&nbsp;found&nbsp;as&nbsp;suffix&nbsp;of&nbsp;the&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341800"><a href="/go/printer/printer.go.html#5339626">prefix</a></span>&nbsp;<span class="op" id="5341807">=</span>&nbsp;<span class="ident" id="5341809"><a href="/go/printer/printer.go.html#5324671">strings</a></span><span class="op" id="5341816">.</span><span class="ident" id="5341817">TrimSuffix</span><span class="op" id="5341827">(</span><span class="ident" id="5341828"><a href="/go/printer/printer.go.html#5339626">prefix</a></span><span class="op" id="5341834">,</span>&nbsp;<span class="builtintype" id="5341836">string</span><span class="op" id="5341842">(</span><span class="ident" id="5341843"><a href="/go/printer/printer.go.html#5341314">suffix</a></span><span class="op" id="5341849">)</span><span class="op" id="5341850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341857">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5341861">//&nbsp;Handle&nbsp;last&nbsp;line:&nbsp;If&nbsp;it&nbsp;only&nbsp;contains&nbsp;a&nbsp;closing&nbsp;*/,&nbsp;align&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5341926">//&nbsp;with&nbsp;the&nbsp;opening&nbsp;/*,&nbsp;otherwise&nbsp;align&nbsp;the&nbsp;text&nbsp;with&nbsp;the&nbsp;other</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5341991">//&nbsp;lines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342002">last</span>&nbsp;<span class="op" id="5342007">:=</span>&nbsp;<span class="ident" id="5342010"><a href="/go/printer/printer.go.html#5338632">lines</a></span><span class="op" id="5342015">[</span><span class="builtinfunc" id="5342016">len</span><span class="op" id="5342019">(</span><span class="ident" id="5342020"><a href="/go/printer/printer.go.html#5338632">lines</a></span><span class="op" id="5342025">)</span><span class="op" id="5342026">-</span><span class="num" id="5342027">1</span><span class="op" id="5342028">]</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342031">closing</span>&nbsp;<span class="op" id="5342039">:=</span>&nbsp;<span class="string" id="5342042">&#34;*/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342048">i</span>&nbsp;<span class="op" id="5342050">:=</span>&nbsp;<span class="ident" id="5342053"><a href="/go/printer/printer.go.html#5324671">strings</a></span><span class="op" id="5342060">.</span><span class="ident" id="5342061">Index</span><span class="op" id="5342066">(</span><span class="ident" id="5342067"><a href="/go/printer/printer.go.html#5342002">last</a></span><span class="op" id="5342071">,</span>&nbsp;<span class="ident" id="5342073"><a href="/go/printer/printer.go.html#5342031">closing</a></span><span class="op" id="5342080">)</span>&nbsp;<span class="comment" id="5342082">//&nbsp;i&nbsp;&gt;=&nbsp;0&nbsp;(closing&nbsp;is&nbsp;always&nbsp;present)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342121">if</span>&nbsp;<span class="ident" id="5342124"><a href="/go/printer/printer.go.html#5337787">isBlank</a></span><span class="op" id="5342131">(</span><span class="ident" id="5342132"><a href="/go/printer/printer.go.html#5342002">last</a></span><span class="op" id="5342136">[</span><span class="num" id="5342137">0</span><span class="op" id="5342138">:</span><span class="ident" id="5342139"><a href="/go/printer/printer.go.html#5342048">i</a></span><span class="op" id="5342140">]</span><span class="op" id="5342141">)</span>&nbsp;<span class="op" id="5342143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5342147">//&nbsp;last&nbsp;line&nbsp;only&nbsp;contains&nbsp;closing&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342187">if</span>&nbsp;<span class="ident" id="5342190"><a href="/go/printer/printer.go.html#5340155">lineOfStars</a></span>&nbsp;<span class="op" id="5342202">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342207"><a href="/go/printer/printer.go.html#5342031">closing</a></span>&nbsp;<span class="op" id="5342215">=</span>&nbsp;<span class="string" id="5342217">&#34;&nbsp;*/&#34;</span>&nbsp;<span class="comment" id="5342223">//&nbsp;add&nbsp;blank&nbsp;to&nbsp;align&nbsp;final&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5342258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342262"><a href="/go/printer/printer.go.html#5338632">lines</a></span><span class="op" id="5342267">[</span><span class="builtinfunc" id="5342268">len</span><span class="op" id="5342271">(</span><span class="ident" id="5342272"><a href="/go/printer/printer.go.html#5338632">lines</a></span><span class="op" id="5342277">)</span><span class="op" id="5342278">-</span><span class="num" id="5342279">1</span><span class="op" id="5342280">]</span>&nbsp;<span class="op" id="5342282">=</span>&nbsp;<span class="ident" id="5342284"><a href="/go/printer/printer.go.html#5339626">prefix</a></span>&nbsp;<span class="op" id="5342291">+</span>&nbsp;<span class="ident" id="5342293"><a href="/go/printer/printer.go.html#5342031">closing</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5342302">}</span>&nbsp;<span class="keyword" id="5342304">else</span>&nbsp;<span class="op" id="5342309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5342313">//&nbsp;last&nbsp;line&nbsp;contains&nbsp;more&nbsp;comment&nbsp;text&nbsp;-&nbsp;assume</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5342364">//&nbsp;it&nbsp;is&nbsp;aligned&nbsp;like&nbsp;the&nbsp;other&nbsp;lines&nbsp;and&nbsp;include</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5342416">//&nbsp;in&nbsp;prefix&nbsp;computation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342443"><a href="/go/printer/printer.go.html#5339626">prefix</a></span>&nbsp;<span class="op" id="5342450">=</span>&nbsp;<span class="ident" id="5342452"><a href="/go/printer/printer.go.html#5337959">commonPrefix</a></span><span class="op" id="5342464">(</span><span class="ident" id="5342465"><a href="/go/printer/printer.go.html#5339626">prefix</a></span><span class="op" id="5342471">,</span>&nbsp;<span class="ident" id="5342473"><a href="/go/printer/printer.go.html#5342002">last</a></span><span class="op" id="5342477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5342480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5342484">//&nbsp;Remove&nbsp;the&nbsp;common&nbsp;prefix&nbsp;from&nbsp;all&nbsp;but&nbsp;the&nbsp;first&nbsp;and&nbsp;empty&nbsp;lines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342553">for</span>&nbsp;<span class="ident" id="5342557">i</span><span class="op" id="5342558">,</span>&nbsp;<span class="ident" id="5342560">line</span>&nbsp;<span class="op" id="5342565">:=</span>&nbsp;<span class="keyword" id="5342568">range</span>&nbsp;<span class="ident" id="5342574"><a href="/go/printer/printer.go.html#5338632">lines</a></span>&nbsp;<span class="op" id="5342580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342584">if</span>&nbsp;<span class="ident" id="5342587"><a href="/go/printer/printer.go.html#5342557">i</a></span>&nbsp;<span class="op" id="5342589">&gt;</span>&nbsp;<span class="num" id="5342591">0</span>&nbsp;<span class="op" id="5342593">&amp;&amp;</span>&nbsp;<span class="ident" id="5342596"><a href="/go/printer/printer.go.html#5342560">line</a></span>&nbsp;<span class="op" id="5342601">!=</span>&nbsp;<span class="string" id="5342604">&#34;&#34;</span>&nbsp;<span class="op" id="5342607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342612"><a href="/go/printer/printer.go.html#5338632">lines</a></span><span class="op" id="5342617">[</span><span class="ident" id="5342618"><a href="/go/printer/printer.go.html#5342557">i</a></span><span class="op" id="5342619">]</span>&nbsp;<span class="op" id="5342621">=</span>&nbsp;<span class="ident" id="5342623"><a href="/go/printer/printer.go.html#5342560">line</a></span><span class="op" id="5342627">[</span><span class="builtinfunc" id="5342628">len</span><span class="op" id="5342631">(</span><span class="ident" id="5342632"><a href="/go/printer/printer.go.html#5339626">prefix</a></span><span class="op" id="5342638">)</span><span class="op" id="5342639">:</span><span class="op" id="5342640">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5342644">}</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5342647">}</span><br>
<span class="lineno"></span><span class="op" id="5342649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5342652">func</span>&nbsp;<span class="op" id="5342657">(</span><span class="ident" id="5342658">p</span>&nbsp;<span class="op" id="5342660">*</span><span class="ident" id="5342661"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5342668">)</span>&nbsp;<span class="ident" id="5342670">writeComment</span><span class="op" id="5342682">(</span><span class="ident" id="5342683">comment</span>&nbsp;<span class="op" id="5342691">*</span><span class="ident" id="5342692"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5342695">.</span><span class="ident" id="5342696">Comment</span><span class="op" id="5342703">)</span>&nbsp;<span class="op" id="5342705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342708">text</span>&nbsp;<span class="op" id="5342713">:=</span>&nbsp;<span class="ident" id="5342716"><a href="/go/printer/printer.go.html#5342683">comment</a></span><span class="op" id="5342723">.</span><span class="ident" id="5342724">Text</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342730">pos</span>&nbsp;<span class="op" id="5342734">:=</span>&nbsp;<span class="ident" id="5342737"><a href="/go/printer/printer.go.html#5342658">p</a></span><span class="op" id="5342738">.</span><span class="ident" id="5342739">posFor</span><span class="op" id="5342745">(</span><span class="ident" id="5342746"><a href="/go/printer/printer.go.html#5342683">comment</a></span><span class="op" id="5342753">.</span><span class="ident" id="5342754">Pos</span><span class="op" id="5342757">(</span><span class="op" id="5342758">)</span><span class="op" id="5342759">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342763">const</span>&nbsp;<span class="ident" id="5342769">linePrefix</span>&nbsp;<span class="op" id="5342780">=</span>&nbsp;<span class="string" id="5342782">&#34;//line&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342793">if</span>&nbsp;<span class="ident" id="5342796"><a href="/go/printer/printer.go.html#5324671">strings</a></span><span class="op" id="5342803">.</span><span class="ident" id="5342804">HasPrefix</span><span class="op" id="5342813">(</span><span class="ident" id="5342814"><a href="/go/printer/printer.go.html#5342708">text</a></span><span class="op" id="5342818">,</span>&nbsp;<span class="ident" id="5342820"><a href="/go/printer/printer.go.html#5342769">linePrefix</a></span><span class="op" id="5342830">)</span>&nbsp;<span class="op" id="5342832">&amp;&amp;</span>&nbsp;<span class="op" id="5342835">(</span><span class="op" id="5342836">!</span><span class="ident" id="5342837"><a href="/go/printer/printer.go.html#5342730">pos</a></span><span class="op" id="5342840">.</span><span class="ident" id="5342841">IsValid</span><span class="op" id="5342848">(</span><span class="op" id="5342849">)</span>&nbsp;<span class="op" id="5342851">||</span>&nbsp;<span class="ident" id="5342854"><a href="/go/printer/printer.go.html#5342730">pos</a></span><span class="op" id="5342857">.</span><span class="ident" id="5342858">Column</span>&nbsp;<span class="op" id="5342865">==</span>&nbsp;<span class="num" id="5342868">1</span><span class="op" id="5342869">)</span>&nbsp;<span class="op" id="5342871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5342875">//&nbsp;possibly&nbsp;a&nbsp;line&nbsp;directive</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342906">ldir</span>&nbsp;<span class="op" id="5342911">:=</span>&nbsp;<span class="ident" id="5342914"><a href="/go/printer/printer.go.html#5324671">strings</a></span><span class="op" id="5342921">.</span><span class="ident" id="5342922">TrimSpace</span><span class="op" id="5342931">(</span><span class="ident" id="5342932"><a href="/go/printer/printer.go.html#5342708">text</a></span><span class="op" id="5342936">[</span><span class="builtinfunc" id="5342937">len</span><span class="op" id="5342940">(</span><span class="ident" id="5342941"><a href="/go/printer/printer.go.html#5342769">linePrefix</a></span><span class="op" id="5342951">)</span><span class="op" id="5342952">:</span><span class="op" id="5342953">]</span><span class="op" id="5342954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342958">if</span>&nbsp;<span class="ident" id="5342961">i</span>&nbsp;<span class="op" id="5342963">:=</span>&nbsp;<span class="ident" id="5342966"><a href="/go/printer/printer.go.html#5324671">strings</a></span><span class="op" id="5342973">.</span><span class="ident" id="5342974">LastIndex</span><span class="op" id="5342983">(</span><span class="ident" id="5342984"><a href="/go/printer/printer.go.html#5342906">ldir</a></span><span class="op" id="5342988">,</span>&nbsp;<span class="string" id="5342990">&#34;:&#34;</span><span class="op" id="5342993">)</span><span class="op" id="5342994">;</span>&nbsp;<span class="ident" id="5342996"><a href="/go/printer/printer.go.html#5342961">i</a></span>&nbsp;<span class="op" id="5342998">&gt;=</span>&nbsp;<span class="num" id="5343001">0</span>&nbsp;<span class="op" id="5343003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343008">if</span>&nbsp;<span class="ident" id="5343011">line</span><span class="op" id="5343015">,</span>&nbsp;<span class="ident" id="5343017">err</span>&nbsp;<span class="op" id="5343021">:=</span>&nbsp;<span class="ident" id="5343024"><a href="/go/printer/printer.go.html#5324660">strconv</a></span><span class="op" id="5343031">.</span><span class="ident" id="5343032">Atoi</span><span class="op" id="5343036">(</span><span class="ident" id="5343037"><a href="/go/printer/printer.go.html#5342906">ldir</a></span><span class="op" id="5343041">[</span><span class="ident" id="5343042"><a href="/go/printer/printer.go.html#5342961">i</a></span><span class="op" id="5343043">+</span><span class="num" id="5343044">1</span><span class="op" id="5343045">:</span><span class="op" id="5343046">]</span><span class="op" id="5343047">)</span><span class="op" id="5343048">;</span>&nbsp;<span class="ident" id="5343050"><a href="/go/printer/printer.go.html#5343017">err</a></span>&nbsp;<span class="op" id="5343054">==</span>&nbsp;<span class="ident" id="5343057">nil</span>&nbsp;<span class="op" id="5343061">&amp;&amp;</span>&nbsp;<span class="ident" id="5343064"><a href="/go/printer/printer.go.html#5343011">line</a></span>&nbsp;<span class="op" id="5343069">&gt;</span>&nbsp;<span class="num" id="5343071">0</span>&nbsp;<span class="op" id="5343073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5343079">//&nbsp;The&nbsp;line&nbsp;directive&nbsp;we&nbsp;are&nbsp;about&nbsp;to&nbsp;print&nbsp;changed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5343135">//&nbsp;the&nbsp;Filename&nbsp;and&nbsp;Line&nbsp;number&nbsp;used&nbsp;for&nbsp;subsequent</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5343191">//&nbsp;tokens.&nbsp;We&nbsp;have&nbsp;to&nbsp;update&nbsp;our&nbsp;AST-space&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5343247">//&nbsp;accordingly&nbsp;and&nbsp;suspend&nbsp;indentation&nbsp;temporarily.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343303">indent</span>&nbsp;<span class="op" id="5343310">:=</span>&nbsp;<span class="ident" id="5343313"><a href="/go/printer/printer.go.html#5342658">p</a></span><span class="op" id="5343314">.</span><span class="ident" id="5343315">indent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343326"><a href="/go/printer/printer.go.html#5342658">p</a></span><span class="op" id="5343327">.</span><span class="ident" id="5343328">indent</span>&nbsp;<span class="op" id="5343335">=</span>&nbsp;<span class="num" id="5343337">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343343">defer</span>&nbsp;<span class="keyword" id="5343349">func</span><span class="op" id="5343353">(</span><span class="op" id="5343354">)</span>&nbsp;<span class="op" id="5343356">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343363"><a href="/go/printer/printer.go.html#5342658">p</a></span><span class="op" id="5343364">.</span><span class="ident" id="5343365">pos</span><span class="op" id="5343368">.</span><span class="ident" id="5343369">Filename</span>&nbsp;<span class="op" id="5343378">=</span>&nbsp;<span class="ident" id="5343380"><a href="/go/printer/printer.go.html#5342906">ldir</a></span><span class="op" id="5343384">[</span><span class="op" id="5343385">:</span><span class="ident" id="5343386"><a href="/go/printer/printer.go.html#5342961">i</a></span><span class="op" id="5343387">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343394"><a href="/go/printer/printer.go.html#5342658">p</a></span><span class="op" id="5343395">.</span><span class="ident" id="5343396">pos</span><span class="op" id="5343399">.</span><span class="ident" id="5343400">Line</span>&nbsp;<span class="op" id="5343405">=</span>&nbsp;<span class="ident" id="5343407"><a href="/go/printer/printer.go.html#5343011">line</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343417"><a href="/go/printer/printer.go.html#5342658">p</a></span><span class="op" id="5343418">.</span><span class="ident" id="5343419">pos</span><span class="op" id="5343422">.</span><span class="ident" id="5343423">Column</span>&nbsp;<span class="op" id="5343430">=</span>&nbsp;<span class="num" id="5343432">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343439"><a href="/go/printer/printer.go.html#5342658">p</a></span><span class="op" id="5343440">.</span><span class="ident" id="5343441">indent</span>&nbsp;<span class="op" id="5343448">=</span>&nbsp;<span class="ident" id="5343450"><a href="/go/printer/printer.go.html#5343303">indent</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5343461">}</span><span class="op" id="5343462">(</span><span class="op" id="5343463">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5343468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5343472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5343475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5343479">//&nbsp;shortcut&nbsp;common&nbsp;case&nbsp;of&nbsp;//-style&nbsp;comments</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343525">if</span>&nbsp;<span class="ident" id="5343528"><a href="/go/printer/printer.go.html#5342708">text</a></span><span class="op" id="5343532">[</span><span class="num" id="5343533">1</span><span class="op" id="5343534">]</span>&nbsp;<span class="op" id="5343536">==</span>&nbsp;<span class="string" id="5343539">&#39;/&#39;</span>&nbsp;<span class="op" id="5343543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343547"><a href="/go/printer/printer.go.html#5342658">p</a></span><span class="op" id="5343548">.</span><span class="ident" id="5343549">writeString</span><span class="op" id="5343560">(</span><span class="ident" id="5343561"><a href="/go/printer/printer.go.html#5342730">pos</a></span><span class="op" id="5343564">,</span>&nbsp;<span class="ident" id="5343566"><a href="/go/printer/printer.go.html#5338171">trimRight</a></span><span class="op" id="5343575">(</span><span class="ident" id="5343576"><a href="/go/printer/printer.go.html#5342708">text</a></span><span class="op" id="5343580">)</span><span class="op" id="5343581">,</span>&nbsp;<span class="builtintype" id="5343583">true</span><span class="op" id="5343587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343591">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5343599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5343603">//&nbsp;for&nbsp;/*-style&nbsp;comments,&nbsp;print&nbsp;line&nbsp;by&nbsp;line&nbsp;and&nbsp;let&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5343661">//&nbsp;write&nbsp;function&nbsp;take&nbsp;care&nbsp;of&nbsp;the&nbsp;proper&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343716">lines</span>&nbsp;<span class="op" id="5343722">:=</span>&nbsp;<span class="ident" id="5343725"><a href="/go/printer/printer.go.html#5324671">strings</a></span><span class="op" id="5343732">.</span><span class="ident" id="5343733">Split</span><span class="op" id="5343738">(</span><span class="ident" id="5343739"><a href="/go/printer/printer.go.html#5342708">text</a></span><span class="op" id="5343743">,</span>&nbsp;<span class="string" id="5343745">&#34;\n&#34;</span><span class="op" id="5343749">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5343753">//&nbsp;The&nbsp;comment&nbsp;started&nbsp;in&nbsp;the&nbsp;first&nbsp;column&nbsp;but&nbsp;is&nbsp;going</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5343810">//&nbsp;to&nbsp;be&nbsp;indented.&nbsp;For&nbsp;an&nbsp;idempotent&nbsp;result,&nbsp;add&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5343872">//&nbsp;to&nbsp;all&nbsp;lines&nbsp;such&nbsp;that&nbsp;they&nbsp;look&nbsp;like&nbsp;they&nbsp;were&nbsp;indented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5343933">//&nbsp;before&nbsp;-&nbsp;this&nbsp;will&nbsp;make&nbsp;sure&nbsp;the&nbsp;common&nbsp;prefix&nbsp;computation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5343996">//&nbsp;is&nbsp;the&nbsp;same&nbsp;independent&nbsp;of&nbsp;how&nbsp;many&nbsp;times&nbsp;formatting&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5344056">//&nbsp;applied&nbsp;(was&nbsp;issue&nbsp;1835).</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344086">if</span>&nbsp;<span class="ident" id="5344089"><a href="/go/printer/printer.go.html#5342730">pos</a></span><span class="op" id="5344092">.</span><span class="ident" id="5344093">IsValid</span><span class="op" id="5344100">(</span><span class="op" id="5344101">)</span>&nbsp;<span class="op" id="5344103">&amp;&amp;</span>&nbsp;<span class="ident" id="5344106"><a href="/go/printer/printer.go.html#5342730">pos</a></span><span class="op" id="5344109">.</span><span class="ident" id="5344110">Column</span>&nbsp;<span class="op" id="5344117">==</span>&nbsp;<span class="num" id="5344120">1</span>&nbsp;<span class="op" id="5344122">&amp;&amp;</span>&nbsp;<span class="ident" id="5344125"><a href="/go/printer/printer.go.html#5342658">p</a></span><span class="op" id="5344126">.</span><span class="ident" id="5344127">indent</span>&nbsp;<span class="op" id="5344134">&gt;</span>&nbsp;<span class="num" id="5344136">0</span>&nbsp;<span class="op" id="5344138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344142">for</span>&nbsp;<span class="ident" id="5344146">i</span><span class="op" id="5344147">,</span>&nbsp;<span class="ident" id="5344149">line</span>&nbsp;<span class="op" id="5344154">:=</span>&nbsp;<span class="keyword" id="5344157">range</span>&nbsp;<span class="ident" id="5344163"><a href="/go/printer/printer.go.html#5343716">lines</a></span><span class="op" id="5344168">[</span><span class="num" id="5344169">1</span><span class="op" id="5344170">:</span><span class="op" id="5344171">]</span>&nbsp;<span class="op" id="5344173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344178"><a href="/go/printer/printer.go.html#5343716">lines</a></span><span class="op" id="5344183">[</span><span class="num" id="5344184">1</span><span class="op" id="5344185">+</span><span class="ident" id="5344186"><a href="/go/printer/printer.go.html#5344146">i</a></span><span class="op" id="5344187">]</span>&nbsp;<span class="op" id="5344189">=</span>&nbsp;<span class="string" id="5344191">&#34;&nbsp;&nbsp;&nbsp;&#34;</span>&nbsp;<span class="op" id="5344197">+</span>&nbsp;<span class="ident" id="5344199"><a href="/go/printer/printer.go.html#5344149">line</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5344206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5344209">}</span><br>
<span class="lineno">655</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344213"><a href="/go/printer/printer.go.html#5338614">stripCommonPrefix</a></span><span class="op" id="5344230">(</span><span class="ident" id="5344231"><a href="/go/printer/printer.go.html#5343716">lines</a></span><span class="op" id="5344236">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5344240">//&nbsp;write&nbsp;comment&nbsp;lines,&nbsp;separated&nbsp;by&nbsp;formfeed,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5344288">//&nbsp;without&nbsp;a&nbsp;line&nbsp;break&nbsp;after&nbsp;the&nbsp;last&nbsp;line</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344333">for</span>&nbsp;<span class="ident" id="5344337">i</span><span class="op" id="5344338">,</span>&nbsp;<span class="ident" id="5344340">line</span>&nbsp;<span class="op" id="5344345">:=</span>&nbsp;<span class="keyword" id="5344348">range</span>&nbsp;<span class="ident" id="5344354"><a href="/go/printer/printer.go.html#5343716">lines</a></span>&nbsp;<span class="op" id="5344360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344364">if</span>&nbsp;<span class="ident" id="5344367"><a href="/go/printer/printer.go.html#5344337">i</a></span>&nbsp;<span class="op" id="5344369">&gt;</span>&nbsp;<span class="num" id="5344371">0</span>&nbsp;<span class="op" id="5344373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344378"><a href="/go/printer/printer.go.html#5342658">p</a></span><span class="op" id="5344379">.</span><span class="ident" id="5344380">writeByte</span><span class="op" id="5344389">(</span><span class="string" id="5344390">&#39;\f&#39;</span><span class="op" id="5344394">,</span>&nbsp;<span class="num" id="5344396">1</span><span class="op" id="5344397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344402"><a href="/go/printer/printer.go.html#5342730">pos</a></span>&nbsp;<span class="op" id="5344406">=</span>&nbsp;<span class="ident" id="5344408"><a href="/go/printer/printer.go.html#5342658">p</a></span><span class="op" id="5344409">.</span><span class="ident" id="5344410">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5344416">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344420">if</span>&nbsp;<span class="builtinfunc" id="5344423">len</span><span class="op" id="5344426">(</span><span class="ident" id="5344427"><a href="/go/printer/printer.go.html#5344340">line</a></span><span class="op" id="5344431">)</span>&nbsp;<span class="op" id="5344433">&gt;</span>&nbsp;<span class="num" id="5344435">0</span>&nbsp;<span class="op" id="5344437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5344442"><a href="/go/printer/printer.go.html#5342658">p</a></span><span class="op" id="5344443">.</span><span class="ident" id="5344444">writeString</span><span class="op" id="5344455">(</span><span class="ident" id="5344456"><a href="/go/printer/printer.go.html#5342730">pos</a></span><span class="op" id="5344459">,</span>&nbsp;<span class="ident" id="5344461"><a href="/go/printer/printer.go.html#5338171">trimRight</a></span><span class="op" id="5344470">(</span><span class="ident" id="5344471"><a href="/go/printer/printer.go.html#5344340">line</a></span><span class="op" id="5344475">)</span><span class="op" id="5344476">,</span>&nbsp;<span class="builtintype" id="5344478">true</span><span class="op" id="5344482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5344486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5344489">}</span><br>
<span class="lineno"></span><span class="op" id="5344491">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="5344494">//&nbsp;writeCommentSuffix&nbsp;writes&nbsp;a&nbsp;line&nbsp;break&nbsp;after&nbsp;a&nbsp;comment&nbsp;if&nbsp;indicated</span><br>
<span class="lineno"></span><span class="comment" id="5344565">//&nbsp;and&nbsp;processes&nbsp;any&nbsp;leftover&nbsp;indentation&nbsp;information.&nbsp;If&nbsp;a&nbsp;line&nbsp;break</span><br>
<span class="lineno"></span><span class="comment" id="5344636">//&nbsp;is&nbsp;needed,&nbsp;the&nbsp;kind&nbsp;of&nbsp;break&nbsp;(newline&nbsp;vs&nbsp;formfeed)&nbsp;depends&nbsp;on&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5344705">//&nbsp;pending&nbsp;whitespace.&nbsp;The&nbsp;writeCommentSuffix&nbsp;result&nbsp;indicates&nbsp;if&nbsp;a</span><br>
<span class="lineno">675</span><span class="comment" id="5344773">//&nbsp;newline&nbsp;was&nbsp;written&nbsp;or&nbsp;if&nbsp;a&nbsp;formfeed&nbsp;was&nbsp;dropped&nbsp;from&nbsp;the&nbsp;whitespace</span><br>
<span class="lineno"></span><span class="comment" id="5344845">//&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="5344856">//</span><br>
<span class="lineno"></span><span class="keyword" id="5344859">func</span>&nbsp;<span class="op" id="5344864">(</span><span class="ident" id="5344865">p</span>&nbsp;<span class="op" id="5344867">*</span><span class="ident" id="5344868"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5344875">)</span>&nbsp;<span class="ident" id="5344877">writeCommentSuffix</span><span class="op" id="5344895">(</span><span class="ident" id="5344896">needsLinebreak</span>&nbsp;<span class="builtintype" id="5344911">bool</span><span class="op" id="5344915">)</span>&nbsp;<span class="op" id="5344917">(</span><span class="ident" id="5344918">wroteNewline</span><span class="op" id="5344930">,</span>&nbsp;<span class="ident" id="5344932">droppedFF</span>&nbsp;<span class="builtintype" id="5344942">bool</span><span class="op" id="5344946">)</span>&nbsp;<span class="op" id="5344948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344951">for</span>&nbsp;<span class="ident" id="5344955">i</span><span class="op" id="5344956">,</span>&nbsp;<span class="ident" id="5344958">ch</span>&nbsp;<span class="op" id="5344961">:=</span>&nbsp;<span class="keyword" id="5344964">range</span>&nbsp;<span class="ident" id="5344970"><a href="/go/printer/printer.go.html#5344865">p</a></span><span class="op" id="5344971">.</span><span class="ident" id="5344972">wsbuf</span>&nbsp;<span class="op" id="5344978">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344982">switch</span>&nbsp;<span class="ident" id="5344989"><a href="/go/printer/printer.go.html#5344958">ch</a></span>&nbsp;<span class="op" id="5344992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5344996">case</span>&nbsp;<span class="ident" id="5345001"><a href="/go/printer/printer.go.html#5324917">blank</a></span><span class="op" id="5345006">,</span>&nbsp;<span class="ident" id="5345008"><a href="/go/printer/printer.go.html#5324945">vtab</a></span><span class="op" id="5345012">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5345017">//&nbsp;ignore&nbsp;trailing&nbsp;whitespace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345050"><a href="/go/printer/printer.go.html#5344865">p</a></span><span class="op" id="5345051">.</span><span class="ident" id="5345052">wsbuf</span><span class="op" id="5345057">[</span><span class="ident" id="5345058"><a href="/go/printer/printer.go.html#5344955">i</a></span><span class="op" id="5345059">]</span>&nbsp;<span class="op" id="5345061">=</span>&nbsp;<span class="ident" id="5345063"><a href="/go/printer/printer.go.html#5324891">ignore</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345072">case</span>&nbsp;<span class="ident" id="5345077"><a href="/go/printer/printer.go.html#5325032">indent</a></span><span class="op" id="5345083">,</span>&nbsp;<span class="ident" id="5345085"><a href="/go/printer/printer.go.html#5325060">unindent</a></span><span class="op" id="5345093">:</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5345098">//&nbsp;don&#39;t&nbsp;lose&nbsp;indentation&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345138">case</span>&nbsp;<span class="ident" id="5345143"><a href="/go/printer/printer.go.html#5324974">newline</a></span><span class="op" id="5345150">,</span>&nbsp;<span class="ident" id="5345152"><a href="/go/printer/printer.go.html#5325003">formfeed</a></span><span class="op" id="5345160">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5345165">//&nbsp;if&nbsp;we&nbsp;need&nbsp;a&nbsp;line&nbsp;break,&nbsp;keep&nbsp;exactly&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5345213">//&nbsp;but&nbsp;remember&nbsp;if&nbsp;we&nbsp;dropped&nbsp;any&nbsp;formfeeds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345260">if</span>&nbsp;<span class="ident" id="5345263"><a href="/go/printer/printer.go.html#5344896">needsLinebreak</a></span>&nbsp;<span class="op" id="5345278">{</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345284"><a href="/go/printer/printer.go.html#5344896">needsLinebreak</a></span>&nbsp;<span class="op" id="5345299">=</span>&nbsp;<span class="builtintype" id="5345301">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345311"><a href="/go/printer/printer.go.html#5344918">wroteNewline</a></span>&nbsp;<span class="op" id="5345324">=</span>&nbsp;<span class="builtintype" id="5345326">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5345334">}</span>&nbsp;<span class="keyword" id="5345336">else</span>&nbsp;<span class="op" id="5345341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345347">if</span>&nbsp;<span class="ident" id="5345350"><a href="/go/printer/printer.go.html#5344958">ch</a></span>&nbsp;<span class="op" id="5345353">==</span>&nbsp;<span class="ident" id="5345356"><a href="/go/printer/printer.go.html#5325003">formfeed</a></span>&nbsp;<span class="op" id="5345365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345372"><a href="/go/printer/printer.go.html#5344932">droppedFF</a></span>&nbsp;<span class="op" id="5345382">=</span>&nbsp;<span class="builtintype" id="5345384">true</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5345393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345399"><a href="/go/printer/printer.go.html#5344865">p</a></span><span class="op" id="5345400">.</span><span class="ident" id="5345401">wsbuf</span><span class="op" id="5345406">[</span><span class="ident" id="5345407"><a href="/go/printer/printer.go.html#5344955">i</a></span><span class="op" id="5345408">]</span>&nbsp;<span class="op" id="5345410">=</span>&nbsp;<span class="ident" id="5345412"><a href="/go/printer/printer.go.html#5324891">ignore</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5345422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5345426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5345429">}</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345432"><a href="/go/printer/printer.go.html#5344865">p</a></span><span class="op" id="5345433">.</span><span class="ident" id="5345434">writeWhitespace</span><span class="op" id="5345449">(</span><span class="builtinfunc" id="5345450">len</span><span class="op" id="5345453">(</span><span class="ident" id="5345454"><a href="/go/printer/printer.go.html#5344865">p</a></span><span class="op" id="5345455">.</span><span class="ident" id="5345456">wsbuf</span><span class="op" id="5345461">)</span><span class="op" id="5345462">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5345466">//&nbsp;make&nbsp;sure&nbsp;we&nbsp;have&nbsp;a&nbsp;line&nbsp;break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345501">if</span>&nbsp;<span class="ident" id="5345504"><a href="/go/printer/printer.go.html#5344896">needsLinebreak</a></span>&nbsp;<span class="op" id="5345519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345523"><a href="/go/printer/printer.go.html#5344865">p</a></span><span class="op" id="5345524">.</span><span class="ident" id="5345525">writeByte</span><span class="op" id="5345534">(</span><span class="string" id="5345535">&#39;\n&#39;</span><span class="op" id="5345539">,</span>&nbsp;<span class="num" id="5345541">1</span><span class="op" id="5345542">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5345546"><a href="/go/printer/printer.go.html#5344918">wroteNewline</a></span>&nbsp;<span class="op" id="5345559">=</span>&nbsp;<span class="builtintype" id="5345561">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5345567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5345571">return</span><br>
<span class="lineno"></span><span class="op" id="5345578">}</span><br>
<span class="lineno">710</span><br>
<span class="lineno"></span><span class="comment" id="5345581">//&nbsp;intersperseComments&nbsp;consumes&nbsp;all&nbsp;comments&nbsp;that&nbsp;appear&nbsp;before&nbsp;the&nbsp;next&nbsp;token</span><br>
<span class="lineno"></span><span class="comment" id="5345660">//&nbsp;tok&nbsp;and&nbsp;prints&nbsp;it&nbsp;together&nbsp;with&nbsp;the&nbsp;buffered&nbsp;whitespace&nbsp;(i.e.,&nbsp;the&nbsp;whitespace</span><br>
<span class="lineno"></span><span class="comment" id="5345741">//&nbsp;that&nbsp;needs&nbsp;to&nbsp;be&nbsp;written&nbsp;before&nbsp;the&nbsp;next&nbsp;token).&nbsp;A&nbsp;heuristic&nbsp;is&nbsp;used&nbsp;to&nbsp;mix</span><br>
<span class="lineno"></span><span class="comment" id="5345820">//&nbsp;the&nbsp;comments&nbsp;and&nbsp;whitespace.&nbsp;The&nbsp;intersperseComments&nbsp;result&nbsp;indicates&nbsp;if&nbsp;a</span><br>
<span class="lineno">715</span><span class="comment" id="5345898">//&nbsp;newline&nbsp;was&nbsp;written&nbsp;or&nbsp;if&nbsp;a&nbsp;formfeed&nbsp;was&nbsp;dropped&nbsp;from&nbsp;the&nbsp;whitespace&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="5345978">//</span><br>
<span class="lineno"></span><span class="keyword" id="5345981">func</span>&nbsp;<span class="op" id="5345986">(</span><span class="ident" id="5345987">p</span>&nbsp;<span class="op" id="5345989">*</span><span class="ident" id="5345990"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5345997">)</span>&nbsp;<span class="ident" id="5345999">intersperseComments</span><span class="op" id="5346018">(</span><span class="ident" id="5346019">next</span>&nbsp;<span class="ident" id="5346024"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5346029">.</span><span class="ident" id="5346030">Position</span><span class="op" id="5346038">,</span>&nbsp;<span class="ident" id="5346040">tok</span>&nbsp;<span class="ident" id="5346044"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5346049">.</span><span class="ident" id="5346050">Token</span><span class="op" id="5346055">)</span>&nbsp;<span class="op" id="5346057">(</span><span class="ident" id="5346058">wroteNewline</span><span class="op" id="5346070">,</span>&nbsp;<span class="ident" id="5346072">droppedFF</span>&nbsp;<span class="builtintype" id="5346082">bool</span><span class="op" id="5346086">)</span>&nbsp;<span class="op" id="5346088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346091">var</span>&nbsp;<span class="ident" id="5346095">last</span>&nbsp;<span class="op" id="5346100">*</span><span class="ident" id="5346101"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5346104">.</span><span class="ident" id="5346105">Comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346114">for</span>&nbsp;<span class="ident" id="5346118"><a href="/go/printer/printer.go.html#5345987">p</a></span><span class="op" id="5346119">.</span><span class="ident" id="5346120">commentBefore</span><span class="op" id="5346133">(</span><span class="ident" id="5346134"><a href="/go/printer/printer.go.html#5346019">next</a></span><span class="op" id="5346138">)</span>&nbsp;<span class="op" id="5346140">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346144">for</span>&nbsp;<span class="ident" id="5346148">_</span><span class="op" id="5346149">,</span>&nbsp;<span class="ident" id="5346151">c</span>&nbsp;<span class="op" id="5346153">:=</span>&nbsp;<span class="keyword" id="5346156">range</span>&nbsp;<span class="ident" id="5346162"><a href="/go/printer/printer.go.html#5345987">p</a></span><span class="op" id="5346163">.</span><span class="ident" id="5346164">comment</span><span class="op" id="5346171">.</span><span class="ident" id="5346172">List</span>&nbsp;<span class="op" id="5346177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5346182"><a href="/go/printer/printer.go.html#5345987">p</a></span><span class="op" id="5346183">.</span><span class="ident" id="5346184">writeCommentPrefix</span><span class="op" id="5346202">(</span><span class="ident" id="5346203"><a href="/go/printer/printer.go.html#5345987">p</a></span><span class="op" id="5346204">.</span><span class="ident" id="5346205">posFor</span><span class="op" id="5346211">(</span><span class="ident" id="5346212"><a href="/go/printer/printer.go.html#5346151">c</a></span><span class="op" id="5346213">.</span><span class="ident" id="5346214">Pos</span><span class="op" id="5346217">(</span><span class="op" id="5346218">)</span><span class="op" id="5346219">)</span><span class="op" id="5346220">,</span>&nbsp;<span class="ident" id="5346222"><a href="/go/printer/printer.go.html#5346019">next</a></span><span class="op" id="5346226">,</span>&nbsp;<span class="ident" id="5346228"><a href="/go/printer/printer.go.html#5346095">last</a></span><span class="op" id="5346232">,</span>&nbsp;<span class="ident" id="5346234"><a href="/go/printer/printer.go.html#5346151">c</a></span><span class="op" id="5346235">,</span>&nbsp;<span class="ident" id="5346237"><a href="/go/printer/printer.go.html#5346040">tok</a></span><span class="op" id="5346240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5346245"><a href="/go/printer/printer.go.html#5345987">p</a></span><span class="op" id="5346246">.</span><span class="ident" id="5346247">writeComment</span><span class="op" id="5346259">(</span><span class="ident" id="5346260"><a href="/go/printer/printer.go.html#5346151">c</a></span><span class="op" id="5346261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5346266"><a href="/go/printer/printer.go.html#5346095">last</a></span>&nbsp;<span class="op" id="5346271">=</span>&nbsp;<span class="ident" id="5346273"><a href="/go/printer/printer.go.html#5346151">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5346277">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5346281"><a href="/go/printer/printer.go.html#5345987">p</a></span><span class="op" id="5346282">.</span><span class="ident" id="5346283">nextComment</span><span class="op" id="5346294">(</span><span class="op" id="5346295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5346298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346302">if</span>&nbsp;<span class="ident" id="5346305"><a href="/go/printer/printer.go.html#5346095">last</a></span>&nbsp;<span class="op" id="5346310">!=</span>&nbsp;<span class="ident" id="5346313">nil</span>&nbsp;<span class="op" id="5346317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5346321">//&nbsp;if&nbsp;the&nbsp;last&nbsp;comment&nbsp;is&nbsp;a&nbsp;/*-style&nbsp;comment&nbsp;and&nbsp;the&nbsp;next&nbsp;item</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5346386">//&nbsp;follows&nbsp;on&nbsp;the&nbsp;same&nbsp;line&nbsp;but&nbsp;is&nbsp;not&nbsp;a&nbsp;comma,&nbsp;and&nbsp;not&nbsp;a&nbsp;&#34;closing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5346456">//&nbsp;token&nbsp;immediately&nbsp;following&nbsp;its&nbsp;corresponding&nbsp;&#34;opening&#34;&nbsp;token,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5346524">//&nbsp;add&nbsp;an&nbsp;extra&nbsp;blank&nbsp;for&nbsp;separation&nbsp;unless&nbsp;explicitly&nbsp;disabled</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5346590">if</span>&nbsp;<span class="ident" id="5346593"><a href="/go/printer/printer.go.html#5345987">p</a></span><span class="op" id="5346594">.</span><span class="ident" id="5346595">mode</span><span class="op" id="5346599">&amp;</span><span class="ident" id="5346600"><a href="/go/printer/printer.go.html#5325169">noExtraBlank</a></span>&nbsp;<span class="op" id="5346613">==</span>&nbsp;<span class="num" id="5346616">0</span>&nbsp;<span class="op" id="5346618">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5346624"><a href="/go/printer/printer.go.html#5346095">last</a></span><span class="op" id="5346628">.</span><span class="ident" id="5346629">Text</span><span class="op" id="5346633">[</span><span class="num" id="5346634">1</span><span class="op" id="5346635">]</span>&nbsp;<span class="op" id="5346637">==</span>&nbsp;<span class="string" id="5346640">&#39;*&#39;</span>&nbsp;<span class="op" id="5346644">&amp;&amp;</span>&nbsp;<span class="ident" id="5346647"><a href="/go/printer/printer.go.html#5345987">p</a></span><span class="op" id="5346648">.</span><span class="ident" id="5346649">lineFor</span><span class="op" id="5346656">(</span><span class="ident" id="5346657"><a href="/go/printer/printer.go.html#5346095">last</a></span><span class="op" id="5346661">.</span><span class="ident" id="5346662">Pos</span><span class="op" id="5346665">(</span><span class="op" id="5346666">)</span><span class="op" id="5346667">)</span>&nbsp;<span class="op" id="5346669">==</span>&nbsp;<span class="ident" id="5346672"><a href="/go/printer/printer.go.html#5346019">next</a></span><span class="op" id="5346676">.</span><span class="ident" id="5346677">Line</span>&nbsp;<span class="op" id="5346682">&amp;&amp;</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5346688"><a href="/go/printer/printer.go.html#5346040">tok</a></span>&nbsp;<span class="op" id="5346692">!=</span>&nbsp;<span class="ident" id="5346695"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5346700">.</span><span class="ident" id="5346701">COMMA</span>&nbsp;<span class="op" id="5346707">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5346713">(</span><span class="ident" id="5346714"><a href="/go/printer/printer.go.html#5346040">tok</a></span>&nbsp;<span class="op" id="5346718">!=</span>&nbsp;<span class="ident" id="5346721"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5346726">.</span><span class="ident" id="5346727">RPAREN</span>&nbsp;<span class="op" id="5346734">||</span>&nbsp;<span class="ident" id="5346737"><a href="/go/printer/printer.go.html#5345987">p</a></span><span class="op" id="5346738">.</span><span class="ident" id="5346739">prevOpen</span>&nbsp;<span class="op" id="5346748">==</span>&nbsp;<span class="ident" id="5346751"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5346756">.</span><span class="ident" id="5346757">LPAREN</span><span class="op" id="5346763">)</span>&nbsp;<span class="op" id="5346765">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5346771">(</span><span class="ident" id="5346772"><a href="/go/printer/printer.go.html#5346040">tok</a></span>&nbsp;<span class="op" id="5346776">!=</span>&nbsp;<span class="ident" id="5346779"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5346784">.</span><span class="ident" id="5346785">RBRACK</span>&nbsp;<span class="op" id="5346792">||</span>&nbsp;<span class="ident" id="5346795"><a href="/go/printer/printer.go.html#5345987">p</a></span><span class="op" id="5346796">.</span><span class="ident" id="5346797">prevOpen</span>&nbsp;<span class="op" id="5346806">==</span>&nbsp;<span class="ident" id="5346809"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5346814">.</span><span class="ident" id="5346815">LBRACK</span><span class="op" id="5346821">)</span>&nbsp;<span class="op" id="5346823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5346828"><a href="/go/printer/printer.go.html#5345987">p</a></span><span class="op" id="5346829">.</span><span class="ident" id="5346830">writeByte</span><span class="op" id="5346839">(</span><span class="string" id="5346840">&#39;&nbsp;&#39;</span><span class="op" id="5346843">,</span>&nbsp;<span class="num" id="5346845">1</span><span class="op" id="5346846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5346850">}</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5346854">//&nbsp;ensure&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;line&nbsp;break&nbsp;after&nbsp;a&nbsp;//-style&nbsp;comment,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5346919">//&nbsp;before&nbsp;a&nbsp;closing&nbsp;&#39;}&#39;&nbsp;unless&nbsp;explicitly&nbsp;disabled,&nbsp;or&nbsp;at&nbsp;eof</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5346983">needsLinebreak</span>&nbsp;<span class="op" id="5346998">:=</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347004"><a href="/go/printer/printer.go.html#5346095">last</a></span><span class="op" id="5347008">.</span><span class="ident" id="5347009">Text</span><span class="op" id="5347013">[</span><span class="num" id="5347014">1</span><span class="op" id="5347015">]</span>&nbsp;<span class="op" id="5347017">==</span>&nbsp;<span class="string" id="5347020">&#39;/&#39;</span>&nbsp;<span class="op" id="5347024">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347031"><a href="/go/printer/printer.go.html#5346040">tok</a></span>&nbsp;<span class="op" id="5347035">==</span>&nbsp;<span class="ident" id="5347038"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5347043">.</span><span class="ident" id="5347044">RBRACE</span>&nbsp;<span class="op" id="5347051">&amp;&amp;</span>&nbsp;<span class="ident" id="5347054"><a href="/go/printer/printer.go.html#5345987">p</a></span><span class="op" id="5347055">.</span><span class="ident" id="5347056">mode</span><span class="op" id="5347060">&amp;</span><span class="ident" id="5347061"><a href="/go/printer/printer.go.html#5325252">noExtraLinebreak</a></span>&nbsp;<span class="op" id="5347078">==</span>&nbsp;<span class="num" id="5347081">0</span>&nbsp;<span class="op" id="5347083">||</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347090"><a href="/go/printer/printer.go.html#5346040">tok</a></span>&nbsp;<span class="op" id="5347094">==</span>&nbsp;<span class="ident" id="5347097"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5347102">.</span><span class="ident" id="5347103">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347109">return</span>&nbsp;<span class="ident" id="5347116"><a href="/go/printer/printer.go.html#5345987">p</a></span><span class="op" id="5347117">.</span><span class="ident" id="5347118">writeCommentSuffix</span><span class="op" id="5347136">(</span><span class="ident" id="5347137"><a href="/go/printer/printer.go.html#5346983">needsLinebreak</a></span><span class="op" id="5347151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5347154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5347158">//&nbsp;no&nbsp;comment&nbsp;was&nbsp;written&nbsp;-&nbsp;we&nbsp;should&nbsp;never&nbsp;reach&nbsp;here&nbsp;since</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5347220">//&nbsp;intersperseComments&nbsp;should&nbsp;not&nbsp;be&nbsp;called&nbsp;in&nbsp;that&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347278"><a href="/go/printer/printer.go.html#5345987">p</a></span><span class="op" id="5347279">.</span><span class="ident" id="5347280">internalError</span><span class="op" id="5347293">(</span><span class="string" id="5347294">&#34;intersperseComments&nbsp;called&nbsp;without&nbsp;pending&nbsp;comments&#34;</span><span class="op" id="5347347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347350">return</span><br>
<span class="lineno"></span><span class="op" id="5347357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="comment" id="5347360">//&nbsp;whiteWhitespace&nbsp;writes&nbsp;the&nbsp;first&nbsp;n&nbsp;whitespace&nbsp;entries.</span><br>
<span class="lineno"></span><span class="keyword" id="5347418">func</span>&nbsp;<span class="op" id="5347423">(</span><span class="ident" id="5347424">p</span>&nbsp;<span class="op" id="5347426">*</span><span class="ident" id="5347427"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5347434">)</span>&nbsp;<span class="ident" id="5347436">writeWhitespace</span><span class="op" id="5347451">(</span><span class="ident" id="5347452">n</span>&nbsp;<span class="builtintype" id="5347454">int</span><span class="op" id="5347457">)</span>&nbsp;<span class="op" id="5347459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5347462">//&nbsp;write&nbsp;entries</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347480">for</span>&nbsp;<span class="ident" id="5347484">i</span>&nbsp;<span class="op" id="5347486">:=</span>&nbsp;<span class="num" id="5347489">0</span><span class="op" id="5347490">;</span>&nbsp;<span class="ident" id="5347492"><a href="/go/printer/printer.go.html#5347484">i</a></span>&nbsp;<span class="op" id="5347494">&lt;</span>&nbsp;<span class="ident" id="5347496"><a href="/go/printer/printer.go.html#5347452">n</a></span><span class="op" id="5347497">;</span>&nbsp;<span class="ident" id="5347499"><a href="/go/printer/printer.go.html#5347484">i</a></span><span class="op" id="5347500">++</span>&nbsp;<span class="op" id="5347503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347507">switch</span>&nbsp;<span class="ident" id="5347514">ch</span>&nbsp;<span class="op" id="5347517">:=</span>&nbsp;<span class="ident" id="5347520"><a href="/go/printer/printer.go.html#5347424">p</a></span><span class="op" id="5347521">.</span><span class="ident" id="5347522">wsbuf</span><span class="op" id="5347527">[</span><span class="ident" id="5347528"><a href="/go/printer/printer.go.html#5347484">i</a></span><span class="op" id="5347529">]</span><span class="op" id="5347530">;</span>&nbsp;<span class="ident" id="5347532"><a href="/go/printer/printer.go.html#5347514">ch</a></span>&nbsp;<span class="op" id="5347535">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347539">case</span>&nbsp;<span class="ident" id="5347544"><a href="/go/printer/printer.go.html#5324891">ignore</a></span><span class="op" id="5347550">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5347555">//&nbsp;ignore!</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347568">case</span>&nbsp;<span class="ident" id="5347573"><a href="/go/printer/printer.go.html#5325032">indent</a></span><span class="op" id="5347579">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347584"><a href="/go/printer/printer.go.html#5347424">p</a></span><span class="op" id="5347585">.</span><span class="ident" id="5347586">indent</span><span class="op" id="5347592">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347597">case</span>&nbsp;<span class="ident" id="5347602"><a href="/go/printer/printer.go.html#5325060">unindent</a></span><span class="op" id="5347610">:</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347615"><a href="/go/printer/printer.go.html#5347424">p</a></span><span class="op" id="5347616">.</span><span class="ident" id="5347617">indent</span><span class="op" id="5347623">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347629">if</span>&nbsp;<span class="ident" id="5347632"><a href="/go/printer/printer.go.html#5347424">p</a></span><span class="op" id="5347633">.</span><span class="ident" id="5347634">indent</span>&nbsp;<span class="op" id="5347641">&lt;</span>&nbsp;<span class="num" id="5347643">0</span>&nbsp;<span class="op" id="5347645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347651"><a href="/go/printer/printer.go.html#5347424">p</a></span><span class="op" id="5347652">.</span><span class="ident" id="5347653">internalError</span><span class="op" id="5347666">(</span><span class="string" id="5347667">&#34;negative&nbsp;indentation:&#34;</span><span class="op" id="5347690">,</span>&nbsp;<span class="ident" id="5347692"><a href="/go/printer/printer.go.html#5347424">p</a></span><span class="op" id="5347693">.</span><span class="ident" id="5347694">indent</span><span class="op" id="5347700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5347706"><a href="/go/printer/printer.go.html#5347424">p</a></span><span class="op" id="5347707">.</span><span class="ident" id="5347708">indent</span>&nbsp;<span class="op" id="5347715">=</span>&nbsp;<span class="num" id="5347717">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5347722">}</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5347726">case</span>&nbsp;<span class="ident" id="5347731"><a href="/go/printer/printer.go.html#5324974">newline</a></span><span class="op" id="5347738">,</span>&nbsp;<span class="ident" id="5347740"><a href="/go/printer/printer.go.html#5325003">formfeed</a></span><span class="op" id="5347748">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5347753">//&nbsp;A&nbsp;line&nbsp;break&nbsp;immediately&nbsp;followed&nbsp;by&nbsp;a&nbsp;&#34;correcting&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5347811">//&nbsp;unindent&nbsp;is&nbsp;swapped&nbsp;with&nbsp;the&nbsp;unindent&nbsp;-&nbsp;this&nbsp;permits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5347870">//&nbsp;proper&nbsp;label&nbsp;positioning.&nbsp;If&nbsp;a&nbsp;comment&nbsp;is&nbsp;between</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5347926">//&nbsp;the&nbsp;line&nbsp;break&nbsp;and&nbsp;the&nbsp;label,&nbsp;the&nbsp;unindent&nbsp;is&nbsp;not</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5347982">//&nbsp;part&nbsp;of&nbsp;the&nbsp;comment&nbsp;whitespace&nbsp;prefix&nbsp;and&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5348042">//&nbsp;will&nbsp;be&nbsp;positioned&nbsp;correctly&nbsp;indented.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5348087">if</span>&nbsp;<span class="ident" id="5348090"><a href="/go/printer/printer.go.html#5347484">i</a></span><span class="op" id="5348091">+</span><span class="num" id="5348092">1</span>&nbsp;<span class="op" id="5348094">&lt;</span>&nbsp;<span class="ident" id="5348096"><a href="/go/printer/printer.go.html#5347452">n</a></span>&nbsp;<span class="op" id="5348098">&amp;&amp;</span>&nbsp;<span class="ident" id="5348101"><a href="/go/printer/printer.go.html#5347424">p</a></span><span class="op" id="5348102">.</span><span class="ident" id="5348103">wsbuf</span><span class="op" id="5348108">[</span><span class="ident" id="5348109"><a href="/go/printer/printer.go.html#5347484">i</a></span><span class="op" id="5348110">+</span><span class="num" id="5348111">1</span><span class="op" id="5348112">]</span>&nbsp;<span class="op" id="5348114">==</span>&nbsp;<span class="ident" id="5348117"><a href="/go/printer/printer.go.html#5325060">unindent</a></span>&nbsp;<span class="op" id="5348126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5348132">//&nbsp;Use&nbsp;a&nbsp;formfeed&nbsp;to&nbsp;terminate&nbsp;the&nbsp;current&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5348188">//&nbsp;Otherwise,&nbsp;a&nbsp;long&nbsp;label&nbsp;name&nbsp;on&nbsp;the&nbsp;next&nbsp;line&nbsp;leading</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5348249">//&nbsp;to&nbsp;a&nbsp;wide&nbsp;column&nbsp;may&nbsp;increase&nbsp;the&nbsp;indentation&nbsp;column</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5348309">//&nbsp;of&nbsp;lines&nbsp;before&nbsp;the&nbsp;label;&nbsp;effectively&nbsp;leading&nbsp;to&nbsp;wrong</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5348372">//&nbsp;indentation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348392"><a href="/go/printer/printer.go.html#5347424">p</a></span><span class="op" id="5348393">.</span><span class="ident" id="5348394">wsbuf</span><span class="op" id="5348399">[</span><span class="ident" id="5348400"><a href="/go/printer/printer.go.html#5347484">i</a></span><span class="op" id="5348401">]</span><span class="op" id="5348402">,</span>&nbsp;<span class="ident" id="5348404"><a href="/go/printer/printer.go.html#5347424">p</a></span><span class="op" id="5348405">.</span><span class="ident" id="5348406">wsbuf</span><span class="op" id="5348411">[</span><span class="ident" id="5348412"><a href="/go/printer/printer.go.html#5347484">i</a></span><span class="op" id="5348413">+</span><span class="num" id="5348414">1</span><span class="op" id="5348415">]</span>&nbsp;<span class="op" id="5348417">=</span>&nbsp;<span class="ident" id="5348419"><a href="/go/printer/printer.go.html#5325060">unindent</a></span><span class="op" id="5348427">,</span>&nbsp;<span class="ident" id="5348429"><a href="/go/printer/printer.go.html#5325003">formfeed</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348442"><a href="/go/printer/printer.go.html#5347484">i</a></span><span class="op" id="5348443">--</span>&nbsp;<span class="comment" id="5348446">//&nbsp;do&nbsp;it&nbsp;again</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5348465">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5348477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5348482">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5348496">default</span><span class="op" id="5348503">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348508"><a href="/go/printer/printer.go.html#5347424">p</a></span><span class="op" id="5348509">.</span><span class="ident" id="5348510">writeByte</span><span class="op" id="5348519">(</span><span class="builtintype" id="5348520">byte</span><span class="op" id="5348524">(</span><span class="ident" id="5348525"><a href="/go/printer/printer.go.html#5347514">ch</a></span><span class="op" id="5348527">)</span><span class="op" id="5348528">,</span>&nbsp;<span class="num" id="5348530">1</span><span class="op" id="5348531">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5348535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5348538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5348542">//&nbsp;shift&nbsp;remaining&nbsp;entries&nbsp;down</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348575">l</span>&nbsp;<span class="op" id="5348577">:=</span>&nbsp;<span class="builtinfunc" id="5348580">copy</span><span class="op" id="5348584">(</span><span class="ident" id="5348585"><a href="/go/printer/printer.go.html#5347424">p</a></span><span class="op" id="5348586">.</span><span class="ident" id="5348587">wsbuf</span><span class="op" id="5348592">,</span>&nbsp;<span class="ident" id="5348594"><a href="/go/printer/printer.go.html#5347424">p</a></span><span class="op" id="5348595">.</span><span class="ident" id="5348596">wsbuf</span><span class="op" id="5348601">[</span><span class="ident" id="5348602"><a href="/go/printer/printer.go.html#5347452">n</a></span><span class="op" id="5348603">:</span><span class="op" id="5348604">]</span><span class="op" id="5348605">)</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348608"><a href="/go/printer/printer.go.html#5347424">p</a></span><span class="op" id="5348609">.</span><span class="ident" id="5348610">wsbuf</span>&nbsp;<span class="op" id="5348616">=</span>&nbsp;<span class="ident" id="5348618"><a href="/go/printer/printer.go.html#5347424">p</a></span><span class="op" id="5348619">.</span><span class="ident" id="5348620">wsbuf</span><span class="op" id="5348625">[</span><span class="op" id="5348626">:</span><span class="ident" id="5348627"><a href="/go/printer/printer.go.html#5348575">l</a></span><span class="op" id="5348628">]</span><br>
<span class="lineno"></span><span class="op" id="5348630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5348633">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5348713">//&nbsp;Printing&nbsp;interface</span><br>
<span class="lineno">800</span><br>
<span class="lineno"></span><span class="comment" id="5348736">//&nbsp;nlines&nbsp;limits&nbsp;n&nbsp;to&nbsp;maxNewlines.</span><br>
<span class="lineno"></span><span class="keyword" id="5348771">func</span>&nbsp;<span class="ident" id="5348776">nlimit</span><span class="op" id="5348782">(</span><span class="ident" id="5348783">n</span>&nbsp;<span class="builtintype" id="5348785">int</span><span class="op" id="5348788">)</span>&nbsp;<span class="builtintype" id="5348790">int</span>&nbsp;<span class="op" id="5348794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5348797">if</span>&nbsp;<span class="ident" id="5348800"><a href="/go/printer/printer.go.html#5348783">n</a></span>&nbsp;<span class="op" id="5348802">&gt;</span>&nbsp;<span class="ident" id="5348804"><a href="/go/printer/printer.go.html#5324722">maxNewlines</a></span>&nbsp;<span class="op" id="5348816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348820"><a href="/go/printer/printer.go.html#5348783">n</a></span>&nbsp;<span class="op" id="5348822">=</span>&nbsp;<span class="ident" id="5348824"><a href="/go/printer/printer.go.html#5324722">maxNewlines</a></span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5348837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5348840">return</span>&nbsp;<span class="ident" id="5348847"><a href="/go/printer/printer.go.html#5348783">n</a></span><br>
<span class="lineno"></span><span class="op" id="5348849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5348852">func</span>&nbsp;<span class="ident" id="5348857">mayCombine</span><span class="op" id="5348867">(</span><span class="ident" id="5348868">prev</span>&nbsp;<span class="ident" id="5348873"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5348878">.</span><span class="ident" id="5348879">Token</span><span class="op" id="5348884">,</span>&nbsp;<span class="ident" id="5348886">next</span>&nbsp;<span class="builtintype" id="5348891">byte</span><span class="op" id="5348895">)</span>&nbsp;<span class="op" id="5348897">(</span><span class="ident" id="5348898">b</span>&nbsp;<span class="builtintype" id="5348900">bool</span><span class="op" id="5348904">)</span>&nbsp;<span class="op" id="5348906">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5348909">switch</span>&nbsp;<span class="ident" id="5348916"><a href="/go/printer/printer.go.html#5348868">prev</a></span>&nbsp;<span class="op" id="5348921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5348924">case</span>&nbsp;<span class="ident" id="5348929"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5348934">.</span><span class="ident" id="5348935">INT</span><span class="op" id="5348938">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348942"><a href="/go/printer/printer.go.html#5348898">b</a></span>&nbsp;<span class="op" id="5348944">=</span>&nbsp;<span class="ident" id="5348946"><a href="/go/printer/printer.go.html#5348886">next</a></span>&nbsp;<span class="op" id="5348951">==</span>&nbsp;<span class="string" id="5348954">&#39;.&#39;</span>&nbsp;<span class="comment" id="5348958">//&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5348965">case</span>&nbsp;<span class="ident" id="5348970"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5348975">.</span><span class="ident" id="5348976">ADD</span><span class="op" id="5348979">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5348983"><a href="/go/printer/printer.go.html#5348898">b</a></span>&nbsp;<span class="op" id="5348985">=</span>&nbsp;<span class="ident" id="5348987"><a href="/go/printer/printer.go.html#5348886">next</a></span>&nbsp;<span class="op" id="5348992">==</span>&nbsp;<span class="string" id="5348995">&#39;+&#39;</span>&nbsp;<span class="comment" id="5348999">//&nbsp;++</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5349006">case</span>&nbsp;<span class="ident" id="5349011"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5349016">.</span><span class="ident" id="5349017">SUB</span><span class="op" id="5349020">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5349024"><a href="/go/printer/printer.go.html#5348898">b</a></span>&nbsp;<span class="op" id="5349026">=</span>&nbsp;<span class="ident" id="5349028"><a href="/go/printer/printer.go.html#5348886">next</a></span>&nbsp;<span class="op" id="5349033">==</span>&nbsp;<span class="string" id="5349036">&#39;-&#39;</span>&nbsp;<span class="comment" id="5349040">//&nbsp;--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5349047">case</span>&nbsp;<span class="ident" id="5349052"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5349057">.</span><span class="ident" id="5349058">QUO</span><span class="op" id="5349061">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5349065"><a href="/go/printer/printer.go.html#5348898">b</a></span>&nbsp;<span class="op" id="5349067">=</span>&nbsp;<span class="ident" id="5349069"><a href="/go/printer/printer.go.html#5348886">next</a></span>&nbsp;<span class="op" id="5349074">==</span>&nbsp;<span class="string" id="5349077">&#39;*&#39;</span>&nbsp;<span class="comment" id="5349081">//&nbsp;/*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5349088">case</span>&nbsp;<span class="ident" id="5349093"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5349098">.</span><span class="ident" id="5349099">LSS</span><span class="op" id="5349102">:</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5349106"><a href="/go/printer/printer.go.html#5348898">b</a></span>&nbsp;<span class="op" id="5349108">=</span>&nbsp;<span class="ident" id="5349110"><a href="/go/printer/printer.go.html#5348886">next</a></span>&nbsp;<span class="op" id="5349115">==</span>&nbsp;<span class="string" id="5349118">&#39;-&#39;</span>&nbsp;<span class="op" id="5349122">||</span>&nbsp;<span class="ident" id="5349125"><a href="/go/printer/printer.go.html#5348886">next</a></span>&nbsp;<span class="op" id="5349130">==</span>&nbsp;<span class="string" id="5349133">&#39;&lt;&#39;</span>&nbsp;<span class="comment" id="5349137">//&nbsp;&lt;-&nbsp;or&nbsp;&lt;&lt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5349150">case</span>&nbsp;<span class="ident" id="5349155"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5349160">.</span><span class="ident" id="5349161">AND</span><span class="op" id="5349164">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5349168"><a href="/go/printer/printer.go.html#5348898">b</a></span>&nbsp;<span class="op" id="5349170">=</span>&nbsp;<span class="ident" id="5349172"><a href="/go/printer/printer.go.html#5348886">next</a></span>&nbsp;<span class="op" id="5349177">==</span>&nbsp;<span class="string" id="5349180">&#39;&amp;&#39;</span>&nbsp;<span class="op" id="5349184">||</span>&nbsp;<span class="ident" id="5349187"><a href="/go/printer/printer.go.html#5348886">next</a></span>&nbsp;<span class="op" id="5349192">==</span>&nbsp;<span class="string" id="5349195">&#39;^&#39;</span>&nbsp;<span class="comment" id="5349199">//&nbsp;&amp;&amp;&nbsp;or&nbsp;&amp;^</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5349212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5349215">return</span><br>
<span class="lineno">825</span><span class="op" id="5349222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5349225">//&nbsp;print&nbsp;prints&nbsp;a&nbsp;list&nbsp;of&nbsp;&#34;items&#34;&nbsp;(roughly&nbsp;corresponding&nbsp;to&nbsp;syntactic</span><br>
<span class="lineno"></span><span class="comment" id="5349295">//&nbsp;tokens,&nbsp;but&nbsp;also&nbsp;including&nbsp;whitespace&nbsp;and&nbsp;formatting&nbsp;information).</span><br>
<span class="lineno"></span><span class="comment" id="5349365">//&nbsp;It&nbsp;is&nbsp;the&nbsp;only&nbsp;print&nbsp;function&nbsp;that&nbsp;should&nbsp;be&nbsp;called&nbsp;directly&nbsp;from</span><br>
<span class="lineno">830</span><span class="comment" id="5349434">//&nbsp;any&nbsp;of&nbsp;the&nbsp;AST&nbsp;printing&nbsp;functions&nbsp;in&nbsp;nodes.go.</span><br>
<span class="lineno"></span><span class="comment" id="5349484">//</span><br>
<span class="lineno"></span><span class="comment" id="5349487">//&nbsp;Whitespace&nbsp;is&nbsp;accumulated&nbsp;until&nbsp;a&nbsp;non-whitespace&nbsp;token&nbsp;appears.&nbsp;Any</span><br>
<span class="lineno"></span><span class="comment" id="5349558">//&nbsp;comments&nbsp;that&nbsp;need&nbsp;to&nbsp;appear&nbsp;before&nbsp;that&nbsp;token&nbsp;are&nbsp;printed&nbsp;first,</span><br>
<span class="lineno"></span><span class="comment" id="5349627">//&nbsp;taking&nbsp;into&nbsp;account&nbsp;the&nbsp;amount&nbsp;and&nbsp;structure&nbsp;of&nbsp;any&nbsp;pending&nbsp;white-</span><br>
<span class="lineno">835</span><span class="comment" id="5349697">//&nbsp;space&nbsp;for&nbsp;best&nbsp;comment&nbsp;placement.&nbsp;Then,&nbsp;any&nbsp;leftover&nbsp;whitespace&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5349767">//&nbsp;printed,&nbsp;followed&nbsp;by&nbsp;the&nbsp;actual&nbsp;token.</span><br>
<span class="lineno"></span><span class="comment" id="5349809">//</span><br>
<span class="lineno"></span><span class="keyword" id="5349812">func</span>&nbsp;<span class="op" id="5349817">(</span><span class="ident" id="5349818">p</span>&nbsp;<span class="op" id="5349820">*</span><span class="ident" id="5349821"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5349828">)</span>&nbsp;<span class="builtinfunc" id="5349830">print</span><span class="op" id="5349835">(</span><span class="ident" id="5349836">args</span>&nbsp;<span class="op" id="5349841">...</span><span class="keyword" id="5349844">interface</span><span class="op" id="5349853">{</span><span class="op" id="5349854">}</span><span class="op" id="5349855">)</span>&nbsp;<span class="op" id="5349857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5349860">for</span>&nbsp;<span class="ident" id="5349864">_</span><span class="op" id="5349865">,</span>&nbsp;<span class="ident" id="5349867">arg</span>&nbsp;<span class="op" id="5349871">:=</span>&nbsp;<span class="keyword" id="5349874">range</span>&nbsp;<span class="ident" id="5349880"><a href="/go/printer/printer.go.html#5349836">args</a></span>&nbsp;<span class="op" id="5349885">{</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5349889">//&nbsp;information&nbsp;about&nbsp;the&nbsp;current&nbsp;arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5349928">var</span>&nbsp;<span class="ident" id="5349932">data</span>&nbsp;<span class="builtintype" id="5349937">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5349946">var</span>&nbsp;<span class="ident" id="5349950">isLit</span>&nbsp;<span class="builtintype" id="5349956">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5349963">var</span>&nbsp;<span class="ident" id="5349967">impliedSemi</span>&nbsp;<span class="builtintype" id="5349979">bool</span>&nbsp;<span class="comment" id="5349984">//&nbsp;value&nbsp;for&nbsp;p.impliedSemi&nbsp;after&nbsp;this&nbsp;arg</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5350029">//&nbsp;record&nbsp;previous&nbsp;opening&nbsp;token,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5350072">switch</span>&nbsp;<span class="ident" id="5350079"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5350080">.</span><span class="ident" id="5350081">lastTok</span>&nbsp;<span class="op" id="5350089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5350093">case</span>&nbsp;<span class="ident" id="5350098"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5350103">.</span><span class="ident" id="5350104">ILLEGAL</span><span class="op" id="5350111">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5350116">//&nbsp;ignore&nbsp;(white&nbsp;space)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5350142">case</span>&nbsp;<span class="ident" id="5350147"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5350152">.</span><span class="ident" id="5350153">LPAREN</span><span class="op" id="5350159">,</span>&nbsp;<span class="ident" id="5350161"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5350166">.</span><span class="ident" id="5350167">LBRACK</span><span class="op" id="5350173">:</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5350178"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5350179">.</span><span class="ident" id="5350180">prevOpen</span>&nbsp;<span class="op" id="5350189">=</span>&nbsp;<span class="ident" id="5350191"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5350192">.</span><span class="ident" id="5350193">lastTok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5350203">default</span><span class="op" id="5350210">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5350215">//&nbsp;other&nbsp;tokens&nbsp;followed&nbsp;any&nbsp;opening&nbsp;token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5350261"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5350262">.</span><span class="ident" id="5350263">prevOpen</span>&nbsp;<span class="op" id="5350272">=</span>&nbsp;<span class="ident" id="5350274"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5350279">.</span><span class="ident" id="5350280">ILLEGAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5350290">}</span><br>
<span class="lineno">855</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5350295">switch</span>&nbsp;<span class="ident" id="5350302">x</span>&nbsp;<span class="op" id="5350304">:=</span>&nbsp;<span class="ident" id="5350307"><a href="/go/printer/printer.go.html#5349867">arg</a></span><span class="op" id="5350310">.</span><span class="op" id="5350311">(</span><span class="keyword" id="5350312">type</span><span class="op" id="5350316">)</span>&nbsp;<span class="op" id="5350318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5350322">case</span>&nbsp;<span class="ident" id="5350327"><a href="/go/printer/printer.go.html#5325149">pmode</a></span><span class="op" id="5350332">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5350337">//&nbsp;toggle&nbsp;printer&nbsp;mode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5350363"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5350364">.</span><span class="ident" id="5350365">mode</span>&nbsp;<span class="op" id="5350370">^=</span>&nbsp;<span class="ident" id="5350373"><a href="/go/printer/printer.go.html#5350302">x</a></span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5350378">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5350390">case</span>&nbsp;<span class="ident" id="5350395"><a href="/go/printer/printer.go.html#5324865">whiteSpace</a></span><span class="op" id="5350405">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5350410">if</span>&nbsp;<span class="ident" id="5350413"><a href="/go/printer/printer.go.html#5350302">x</a></span>&nbsp;<span class="op" id="5350415">==</span>&nbsp;<span class="ident" id="5350418"><a href="/go/printer/printer.go.html#5324891">ignore</a></span>&nbsp;<span class="op" id="5350425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5350431">//&nbsp;don&#39;t&nbsp;add&nbsp;ignore&#39;s&nbsp;to&nbsp;the&nbsp;buffer;&nbsp;they</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5350477">//&nbsp;may&nbsp;screw&nbsp;up&nbsp;&#34;correcting&#34;&nbsp;unindents&nbsp;(see</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5350525">//&nbsp;LabeledStmt)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5350545">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5350557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5350562">i</span>&nbsp;<span class="op" id="5350564">:=</span>&nbsp;<span class="builtinfunc" id="5350567">len</span><span class="op" id="5350570">(</span><span class="ident" id="5350571"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5350572">.</span><span class="ident" id="5350573">wsbuf</span><span class="op" id="5350578">)</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5350583">if</span>&nbsp;<span class="ident" id="5350586"><a href="/go/printer/printer.go.html#5350562">i</a></span>&nbsp;<span class="op" id="5350588">==</span>&nbsp;<span class="builtinfunc" id="5350591">cap</span><span class="op" id="5350594">(</span><span class="ident" id="5350595"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5350596">.</span><span class="ident" id="5350597">wsbuf</span><span class="op" id="5350602">)</span>&nbsp;<span class="op" id="5350604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5350610">//&nbsp;Whitespace&nbsp;sequences&nbsp;are&nbsp;very&nbsp;short&nbsp;so&nbsp;this&nbsp;should</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5350668">//&nbsp;never&nbsp;happen.&nbsp;Handle&nbsp;gracefully&nbsp;(but&nbsp;possibly&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5350726">//&nbsp;bad&nbsp;comment&nbsp;placement)&nbsp;if&nbsp;it&nbsp;does&nbsp;happen.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5350775"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5350776">.</span><span class="ident" id="5350777">writeWhitespace</span><span class="op" id="5350792">(</span><span class="ident" id="5350793"><a href="/go/printer/printer.go.html#5350562">i</a></span><span class="op" id="5350794">)</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5350800"><a href="/go/printer/printer.go.html#5350562">i</a></span>&nbsp;<span class="op" id="5350802">=</span>&nbsp;<span class="num" id="5350804">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5350809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5350814"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5350815">.</span><span class="ident" id="5350816">wsbuf</span>&nbsp;<span class="op" id="5350822">=</span>&nbsp;<span class="ident" id="5350824"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5350825">.</span><span class="ident" id="5350826">wsbuf</span><span class="op" id="5350831">[</span><span class="num" id="5350832">0</span>&nbsp;<span class="op" id="5350834">:</span>&nbsp;<span class="ident" id="5350836"><a href="/go/printer/printer.go.html#5350562">i</a></span><span class="op" id="5350837">+</span><span class="num" id="5350838">1</span><span class="op" id="5350839">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5350844"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5350845">.</span><span class="ident" id="5350846">wsbuf</span><span class="op" id="5350851">[</span><span class="ident" id="5350852"><a href="/go/printer/printer.go.html#5350562">i</a></span><span class="op" id="5350853">]</span>&nbsp;<span class="op" id="5350855">=</span>&nbsp;<span class="ident" id="5350857"><a href="/go/printer/printer.go.html#5350302">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5350862">if</span>&nbsp;<span class="ident" id="5350865"><a href="/go/printer/printer.go.html#5350302">x</a></span>&nbsp;<span class="op" id="5350867">==</span>&nbsp;<span class="ident" id="5350870"><a href="/go/printer/printer.go.html#5324974">newline</a></span>&nbsp;<span class="op" id="5350878">||</span>&nbsp;<span class="ident" id="5350881"><a href="/go/printer/printer.go.html#5350302">x</a></span>&nbsp;<span class="op" id="5350883">==</span>&nbsp;<span class="ident" id="5350886"><a href="/go/printer/printer.go.html#5325003">formfeed</a></span>&nbsp;<span class="op" id="5350895">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5350901">//&nbsp;newlines&nbsp;affect&nbsp;the&nbsp;current&nbsp;state&nbsp;(p.impliedSemi)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5350958">//&nbsp;and&nbsp;not&nbsp;the&nbsp;state&nbsp;after&nbsp;printing&nbsp;arg&nbsp;(impliedSemi)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5351016">//&nbsp;because&nbsp;comments&nbsp;can&nbsp;be&nbsp;interspersed&nbsp;before&nbsp;the&nbsp;arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5351075">//&nbsp;in&nbsp;this&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5351095"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5351096">.</span><span class="ident" id="5351097">impliedSemi</span>&nbsp;<span class="op" id="5351109">=</span>&nbsp;<span class="builtintype" id="5351111">false</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5351120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5351125"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5351126">.</span><span class="ident" id="5351127">lastTok</span>&nbsp;<span class="op" id="5351135">=</span>&nbsp;<span class="ident" id="5351137"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5351142">.</span><span class="ident" id="5351143">ILLEGAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5351154">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5351166">case</span>&nbsp;<span class="op" id="5351171">*</span><span class="ident" id="5351172"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5351175">.</span><span class="ident" id="5351176">Ident</span><span class="op" id="5351181">:</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5351186"><a href="/go/printer/printer.go.html#5349932">data</a></span>&nbsp;<span class="op" id="5351191">=</span>&nbsp;<span class="ident" id="5351193"><a href="/go/printer/printer.go.html#5350302">x</a></span><span class="op" id="5351194">.</span><span class="ident" id="5351195">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5351203"><a href="/go/printer/printer.go.html#5349967">impliedSemi</a></span>&nbsp;<span class="op" id="5351215">=</span>&nbsp;<span class="builtintype" id="5351217">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5351225"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5351226">.</span><span class="ident" id="5351227">lastTok</span>&nbsp;<span class="op" id="5351235">=</span>&nbsp;<span class="ident" id="5351237"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5351242">.</span><span class="ident" id="5351243">IDENT</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5351252">case</span>&nbsp;<span class="op" id="5351257">*</span><span class="ident" id="5351258"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5351261">.</span><span class="ident" id="5351262">BasicLit</span><span class="op" id="5351270">:</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5351275"><a href="/go/printer/printer.go.html#5349932">data</a></span>&nbsp;<span class="op" id="5351280">=</span>&nbsp;<span class="ident" id="5351282"><a href="/go/printer/printer.go.html#5350302">x</a></span><span class="op" id="5351283">.</span><span class="ident" id="5351284">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5351293"><a href="/go/printer/printer.go.html#5349950">isLit</a></span>&nbsp;<span class="op" id="5351299">=</span>&nbsp;<span class="builtintype" id="5351301">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5351309"><a href="/go/printer/printer.go.html#5349967">impliedSemi</a></span>&nbsp;<span class="op" id="5351321">=</span>&nbsp;<span class="builtintype" id="5351323">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5351331"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5351332">.</span><span class="ident" id="5351333">lastTok</span>&nbsp;<span class="op" id="5351341">=</span>&nbsp;<span class="ident" id="5351343"><a href="/go/printer/printer.go.html#5350302">x</a></span><span class="op" id="5351344">.</span><span class="ident" id="5351345">Kind</span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5351353">case</span>&nbsp;<span class="ident" id="5351358"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5351363">.</span><span class="ident" id="5351364">Token</span><span class="op" id="5351369">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5351374">s</span>&nbsp;<span class="op" id="5351376">:=</span>&nbsp;<span class="ident" id="5351379"><a href="/go/printer/printer.go.html#5350302">x</a></span><span class="op" id="5351380">.</span><span class="ident" id="5351381">String</span><span class="op" id="5351387">(</span><span class="op" id="5351388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5351393">if</span>&nbsp;<span class="ident" id="5351396"><a href="/go/printer/printer.go.html#5348857">mayCombine</a></span><span class="op" id="5351406">(</span><span class="ident" id="5351407"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5351408">.</span><span class="ident" id="5351409">lastTok</span><span class="op" id="5351416">,</span>&nbsp;<span class="ident" id="5351418"><a href="/go/printer/printer.go.html#5351374">s</a></span><span class="op" id="5351419">[</span><span class="num" id="5351420">0</span><span class="op" id="5351421">]</span><span class="op" id="5351422">)</span>&nbsp;<span class="op" id="5351424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5351430">//&nbsp;the&nbsp;previous&nbsp;and&nbsp;the&nbsp;current&nbsp;token&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5351480">//&nbsp;separated&nbsp;by&nbsp;a&nbsp;blank&nbsp;otherwise&nbsp;they&nbsp;combine</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5351531">//&nbsp;into&nbsp;a&nbsp;different&nbsp;incorrect&nbsp;token&nbsp;sequence</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5351580">//&nbsp;(except&nbsp;for&nbsp;token.INT&nbsp;followed&nbsp;by&nbsp;a&nbsp;&#39;.&#39;&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5351632">//&nbsp;should&nbsp;never&nbsp;happen&nbsp;because&nbsp;it&nbsp;is&nbsp;taken&nbsp;care</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5351684">//&nbsp;of&nbsp;via&nbsp;binary&nbsp;expression&nbsp;formatting)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5351728">if</span>&nbsp;<span class="builtinfunc" id="5351731">len</span><span class="op" id="5351734">(</span><span class="ident" id="5351735"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5351736">.</span><span class="ident" id="5351737">wsbuf</span><span class="op" id="5351742">)</span>&nbsp;<span class="op" id="5351744">!=</span>&nbsp;<span class="num" id="5351747">0</span>&nbsp;<span class="op" id="5351749">{</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5351756"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5351757">.</span><span class="ident" id="5351758">internalError</span><span class="op" id="5351771">(</span><span class="string" id="5351772">&#34;whitespace&nbsp;buffer&nbsp;not&nbsp;empty&#34;</span><span class="op" id="5351801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5351807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5351813"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5351814">.</span><span class="ident" id="5351815">wsbuf</span>&nbsp;<span class="op" id="5351821">=</span>&nbsp;<span class="ident" id="5351823"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5351824">.</span><span class="ident" id="5351825">wsbuf</span><span class="op" id="5351830">[</span><span class="num" id="5351831">0</span><span class="op" id="5351832">:</span><span class="num" id="5351833">1</span><span class="op" id="5351834">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5351840"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5351841">.</span><span class="ident" id="5351842">wsbuf</span><span class="op" id="5351847">[</span><span class="num" id="5351848">0</span><span class="op" id="5351849">]</span>&nbsp;<span class="op" id="5351851">=</span>&nbsp;<span class="string" id="5351853">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5351860">}</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5351865"><a href="/go/printer/printer.go.html#5349932">data</a></span>&nbsp;<span class="op" id="5351870">=</span>&nbsp;<span class="ident" id="5351872"><a href="/go/printer/printer.go.html#5351374">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5351877">//&nbsp;some&nbsp;keywords&nbsp;followed&nbsp;by&nbsp;a&nbsp;newline&nbsp;imply&nbsp;a&nbsp;semicolon</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5351937">switch</span>&nbsp;<span class="ident" id="5351944"><a href="/go/printer/printer.go.html#5350302">x</a></span>&nbsp;<span class="op" id="5351946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5351951">case</span>&nbsp;<span class="ident" id="5351956"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5351961">.</span><span class="ident" id="5351962">BREAK</span><span class="op" id="5351967">,</span>&nbsp;<span class="ident" id="5351969"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5351974">.</span><span class="ident" id="5351975">CONTINUE</span><span class="op" id="5351983">,</span>&nbsp;<span class="ident" id="5351985"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5351990">.</span><span class="ident" id="5351991">FALLTHROUGH</span><span class="op" id="5352002">,</span>&nbsp;<span class="ident" id="5352004"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5352009">.</span><span class="ident" id="5352010">RETURN</span><span class="op" id="5352016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5352022"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5352027">.</span><span class="ident" id="5352028">INC</span><span class="op" id="5352031">,</span>&nbsp;<span class="ident" id="5352033"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5352038">.</span><span class="ident" id="5352039">DEC</span><span class="op" id="5352042">,</span>&nbsp;<span class="ident" id="5352044"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5352049">.</span><span class="ident" id="5352050">RPAREN</span><span class="op" id="5352056">,</span>&nbsp;<span class="ident" id="5352058"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5352063">.</span><span class="ident" id="5352064">RBRACK</span><span class="op" id="5352070">,</span>&nbsp;<span class="ident" id="5352072"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5352077">.</span><span class="ident" id="5352078">RBRACE</span><span class="op" id="5352084">:</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5352090"><a href="/go/printer/printer.go.html#5349967">impliedSemi</a></span>&nbsp;<span class="op" id="5352102">=</span>&nbsp;<span class="builtintype" id="5352104">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5352112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5352117"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5352118">.</span><span class="ident" id="5352119">lastTok</span>&nbsp;<span class="op" id="5352127">=</span>&nbsp;<span class="ident" id="5352129"><a href="/go/printer/printer.go.html#5350302">x</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5352134">case</span>&nbsp;<span class="ident" id="5352139"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5352144">.</span><span class="ident" id="5352145">Pos</span><span class="op" id="5352148">:</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5352153">if</span>&nbsp;<span class="ident" id="5352156"><a href="/go/printer/printer.go.html#5350302">x</a></span><span class="op" id="5352157">.</span><span class="ident" id="5352158">IsValid</span><span class="op" id="5352165">(</span><span class="op" id="5352166">)</span>&nbsp;<span class="op" id="5352168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5352174"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5352175">.</span><span class="ident" id="5352176">pos</span>&nbsp;<span class="op" id="5352180">=</span>&nbsp;<span class="ident" id="5352182"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5352183">.</span><span class="ident" id="5352184">posFor</span><span class="op" id="5352190">(</span><span class="ident" id="5352191"><a href="/go/printer/printer.go.html#5350302">x</a></span><span class="op" id="5352192">)</span>&nbsp;<span class="comment" id="5352194">//&nbsp;accurate&nbsp;position&nbsp;of&nbsp;next&nbsp;item</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5352231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5352236">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5352248">case</span>&nbsp;<span class="builtintype" id="5352253">string</span><span class="op" id="5352259">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5352264">//&nbsp;incorrect&nbsp;AST&nbsp;-&nbsp;print&nbsp;error&nbsp;message</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5352306"><a href="/go/printer/printer.go.html#5349932">data</a></span>&nbsp;<span class="op" id="5352311">=</span>&nbsp;<span class="ident" id="5352313"><a href="/go/printer/printer.go.html#5350302">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5352318"><a href="/go/printer/printer.go.html#5349950">isLit</a></span>&nbsp;<span class="op" id="5352324">=</span>&nbsp;<span class="builtintype" id="5352326">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5352334"><a href="/go/printer/printer.go.html#5349967">impliedSemi</a></span>&nbsp;<span class="op" id="5352346">=</span>&nbsp;<span class="builtintype" id="5352348">true</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5352356"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5352357">.</span><span class="ident" id="5352358">lastTok</span>&nbsp;<span class="op" id="5352366">=</span>&nbsp;<span class="ident" id="5352368"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5352373">.</span><span class="ident" id="5352374">STRING</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5352384">default</span><span class="op" id="5352391">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5352396"><a href="/go/printer/printer.go.html#5324619">fmt</a></span><span class="op" id="5352399">.</span><span class="ident" id="5352400">Fprintf</span><span class="op" id="5352407">(</span><span class="ident" id="5352408"><a href="/go/printer/printer.go.html#5324654">os</a></span><span class="op" id="5352410">.</span><span class="ident" id="5352411">Stderr</span><span class="op" id="5352417">,</span>&nbsp;<span class="string" id="5352419">&#34;print:&nbsp;unsupported&nbsp;argument&nbsp;%v&nbsp;(%T)\n&#34;</span><span class="op" id="5352458">,</span>&nbsp;<span class="ident" id="5352460"><a href="/go/printer/printer.go.html#5349867">arg</a></span><span class="op" id="5352463">,</span>&nbsp;<span class="ident" id="5352465"><a href="/go/printer/printer.go.html#5349867">arg</a></span><span class="op" id="5352468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5352473">panic</span><span class="op" id="5352478">(</span><span class="string" id="5352479">&#34;go/printer&nbsp;type&#34;</span><span class="op" id="5352496">)</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5352500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5352504">//&nbsp;data&nbsp;!=&nbsp;&#34;&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5352521">next</span>&nbsp;<span class="op" id="5352526">:=</span>&nbsp;<span class="ident" id="5352529"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5352530">.</span><span class="ident" id="5352531">pos</span>&nbsp;<span class="comment" id="5352535">//&nbsp;estimated/accurate&nbsp;position&nbsp;of&nbsp;next&nbsp;item</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5352581">wroteNewline</span><span class="op" id="5352593">,</span>&nbsp;<span class="ident" id="5352595">droppedFF</span>&nbsp;<span class="op" id="5352605">:=</span>&nbsp;<span class="ident" id="5352608"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5352609">.</span><span class="ident" id="5352610">flush</span><span class="op" id="5352615">(</span><span class="ident" id="5352616"><a href="/go/printer/printer.go.html#5352521">next</a></span><span class="op" id="5352620">,</span>&nbsp;<span class="ident" id="5352622"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5352623">.</span><span class="ident" id="5352624">lastTok</span><span class="op" id="5352631">)</span><br>
<span class="lineno">945</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5352636">//&nbsp;intersperse&nbsp;extra&nbsp;newlines&nbsp;if&nbsp;present&nbsp;in&nbsp;the&nbsp;source&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5352697">//&nbsp;if&nbsp;they&nbsp;don&#39;t&nbsp;cause&nbsp;extra&nbsp;semicolons&nbsp;(don&#39;t&nbsp;do&nbsp;this&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5352757">//&nbsp;flush&nbsp;as&nbsp;it&nbsp;will&nbsp;cause&nbsp;extra&nbsp;newlines&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;a&nbsp;file)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5352822">if</span>&nbsp;<span class="op" id="5352825">!</span><span class="ident" id="5352826"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5352827">.</span><span class="ident" id="5352828">impliedSemi</span>&nbsp;<span class="op" id="5352840">{</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5352845">n</span>&nbsp;<span class="op" id="5352847">:=</span>&nbsp;<span class="ident" id="5352850"><a href="/go/printer/printer.go.html#5348776">nlimit</a></span><span class="op" id="5352856">(</span><span class="ident" id="5352857"><a href="/go/printer/printer.go.html#5352521">next</a></span><span class="op" id="5352861">.</span><span class="ident" id="5352862">Line</span>&nbsp;<span class="op" id="5352867">-</span>&nbsp;<span class="ident" id="5352869"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5352870">.</span><span class="ident" id="5352871">pos</span><span class="op" id="5352874">.</span><span class="ident" id="5352875">Line</span><span class="op" id="5352879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5352884">//&nbsp;don&#39;t&nbsp;exceed&nbsp;maxNewlines&nbsp;if&nbsp;we&nbsp;already&nbsp;wrote&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5352939">if</span>&nbsp;<span class="ident" id="5352942"><a href="/go/printer/printer.go.html#5352581">wroteNewline</a></span>&nbsp;<span class="op" id="5352955">&amp;&amp;</span>&nbsp;<span class="ident" id="5352958"><a href="/go/printer/printer.go.html#5352845">n</a></span>&nbsp;<span class="op" id="5352960">==</span>&nbsp;<span class="ident" id="5352963"><a href="/go/printer/printer.go.html#5324722">maxNewlines</a></span>&nbsp;<span class="op" id="5352975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5352981"><a href="/go/printer/printer.go.html#5352845">n</a></span>&nbsp;<span class="op" id="5352983">=</span>&nbsp;<span class="ident" id="5352985"><a href="/go/printer/printer.go.html#5324722">maxNewlines</a></span>&nbsp;<span class="op" id="5352997">-</span>&nbsp;<span class="num" id="5352999">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5353004">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5353009">if</span>&nbsp;<span class="ident" id="5353012"><a href="/go/printer/printer.go.html#5352845">n</a></span>&nbsp;<span class="op" id="5353014">&gt;</span>&nbsp;<span class="num" id="5353016">0</span>&nbsp;<span class="op" id="5353018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5353024">ch</span>&nbsp;<span class="op" id="5353027">:=</span>&nbsp;<span class="builtintype" id="5353030">byte</span><span class="op" id="5353034">(</span><span class="string" id="5353035">&#39;\n&#39;</span><span class="op" id="5353039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5353045">if</span>&nbsp;<span class="ident" id="5353048"><a href="/go/printer/printer.go.html#5352595">droppedFF</a></span>&nbsp;<span class="op" id="5353058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5353065"><a href="/go/printer/printer.go.html#5353024">ch</a></span>&nbsp;<span class="op" id="5353068">=</span>&nbsp;<span class="string" id="5353070">&#39;\f&#39;</span>&nbsp;<span class="comment" id="5353075">//&nbsp;use&nbsp;formfeed&nbsp;since&nbsp;we&nbsp;dropped&nbsp;one&nbsp;before</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5353123">}</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5353129"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5353130">.</span><span class="ident" id="5353131">writeByte</span><span class="op" id="5353140">(</span><span class="ident" id="5353141"><a href="/go/printer/printer.go.html#5353024">ch</a></span><span class="op" id="5353143">,</span>&nbsp;<span class="ident" id="5353145"><a href="/go/printer/printer.go.html#5352845">n</a></span><span class="op" id="5353146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5353152"><a href="/go/printer/printer.go.html#5349967">impliedSemi</a></span>&nbsp;<span class="op" id="5353164">=</span>&nbsp;<span class="builtintype" id="5353166">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5353175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5353179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5353184">//&nbsp;the&nbsp;next&nbsp;token&nbsp;starts&nbsp;now&nbsp;-&nbsp;record&nbsp;its&nbsp;line&nbsp;number&nbsp;if&nbsp;requested</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5353253">if</span>&nbsp;<span class="ident" id="5353256"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5353257">.</span><span class="ident" id="5353258">linePtr</span>&nbsp;<span class="op" id="5353266">!=</span>&nbsp;<span class="ident" id="5353269">nil</span>&nbsp;<span class="op" id="5353273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5353278">*</span><span class="ident" id="5353279"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5353280">.</span><span class="ident" id="5353281">linePtr</span>&nbsp;<span class="op" id="5353289">=</span>&nbsp;<span class="ident" id="5353291"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5353292">.</span><span class="ident" id="5353293">out</span><span class="op" id="5353296">.</span><span class="ident" id="5353297">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5353305"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5353306">.</span><span class="ident" id="5353307">linePtr</span>&nbsp;<span class="op" id="5353315">=</span>&nbsp;<span class="ident" id="5353317">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5353323">}</span><br>
<span class="lineno">970</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5353328"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5353329">.</span><span class="ident" id="5353330">writeString</span><span class="op" id="5353341">(</span><span class="ident" id="5353342"><a href="/go/printer/printer.go.html#5352521">next</a></span><span class="op" id="5353346">,</span>&nbsp;<span class="ident" id="5353348"><a href="/go/printer/printer.go.html#5349932">data</a></span><span class="op" id="5353352">,</span>&nbsp;<span class="ident" id="5353354"><a href="/go/printer/printer.go.html#5349950">isLit</a></span><span class="op" id="5353359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5353363"><a href="/go/printer/printer.go.html#5349818">p</a></span><span class="op" id="5353364">.</span><span class="ident" id="5353365">impliedSemi</span>&nbsp;<span class="op" id="5353377">=</span>&nbsp;<span class="ident" id="5353379"><a href="/go/printer/printer.go.html#5349967">impliedSemi</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5353392">}</span><br>
<span class="lineno"></span><span class="op" id="5353394">}</span><br>
<span class="lineno">975</span><br>
<span class="lineno"></span><span class="comment" id="5353397">//&nbsp;flush&nbsp;prints&nbsp;any&nbsp;pending&nbsp;comments&nbsp;and&nbsp;whitespace&nbsp;occurring&nbsp;textually</span><br>
<span class="lineno"></span><span class="comment" id="5353469">//&nbsp;before&nbsp;the&nbsp;position&nbsp;of&nbsp;the&nbsp;next&nbsp;token&nbsp;tok.&nbsp;The&nbsp;flush&nbsp;result&nbsp;indicates</span><br>
<span class="lineno"></span><span class="comment" id="5353542">//&nbsp;if&nbsp;a&nbsp;newline&nbsp;was&nbsp;written&nbsp;or&nbsp;if&nbsp;a&nbsp;formfeed&nbsp;was&nbsp;dropped&nbsp;from&nbsp;the&nbsp;whitespace</span><br>
<span class="lineno"></span><span class="comment" id="5353619">//&nbsp;buffer.</span><br>
<span class="lineno">980</span><span class="comment" id="5353630">//</span><br>
<span class="lineno"></span><span class="keyword" id="5353633">func</span>&nbsp;<span class="op" id="5353638">(</span><span class="ident" id="5353639">p</span>&nbsp;<span class="op" id="5353641">*</span><span class="ident" id="5353642"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5353649">)</span>&nbsp;<span class="ident" id="5353651">flush</span><span class="op" id="5353656">(</span><span class="ident" id="5353657">next</span>&nbsp;<span class="ident" id="5353662"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5353667">.</span><span class="ident" id="5353668">Position</span><span class="op" id="5353676">,</span>&nbsp;<span class="ident" id="5353678">tok</span>&nbsp;<span class="ident" id="5353682"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5353687">.</span><span class="ident" id="5353688">Token</span><span class="op" id="5353693">)</span>&nbsp;<span class="op" id="5353695">(</span><span class="ident" id="5353696">wroteNewline</span><span class="op" id="5353708">,</span>&nbsp;<span class="ident" id="5353710">droppedFF</span>&nbsp;<span class="builtintype" id="5353720">bool</span><span class="op" id="5353724">)</span>&nbsp;<span class="op" id="5353726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5353729">if</span>&nbsp;<span class="ident" id="5353732"><a href="/go/printer/printer.go.html#5353639">p</a></span><span class="op" id="5353733">.</span><span class="ident" id="5353734">commentBefore</span><span class="op" id="5353747">(</span><span class="ident" id="5353748"><a href="/go/printer/printer.go.html#5353657">next</a></span><span class="op" id="5353752">)</span>&nbsp;<span class="op" id="5353754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5353758">//&nbsp;if&nbsp;there&nbsp;are&nbsp;comments&nbsp;before&nbsp;the&nbsp;next&nbsp;item,&nbsp;intersperse&nbsp;them</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5353824"><a href="/go/printer/printer.go.html#5353696">wroteNewline</a></span><span class="op" id="5353836">,</span>&nbsp;<span class="ident" id="5353838"><a href="/go/printer/printer.go.html#5353710">droppedFF</a></span>&nbsp;<span class="op" id="5353848">=</span>&nbsp;<span class="ident" id="5353850"><a href="/go/printer/printer.go.html#5353639">p</a></span><span class="op" id="5353851">.</span><span class="ident" id="5353852">intersperseComments</span><span class="op" id="5353871">(</span><span class="ident" id="5353872"><a href="/go/printer/printer.go.html#5353657">next</a></span><span class="op" id="5353876">,</span>&nbsp;<span class="ident" id="5353878"><a href="/go/printer/printer.go.html#5353678">tok</a></span><span class="op" id="5353881">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5353884">}</span>&nbsp;<span class="keyword" id="5353886">else</span>&nbsp;<span class="op" id="5353891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5353895">//&nbsp;otherwise,&nbsp;write&nbsp;any&nbsp;leftover&nbsp;whitespace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5353941"><a href="/go/printer/printer.go.html#5353639">p</a></span><span class="op" id="5353942">.</span><span class="ident" id="5353943">writeWhitespace</span><span class="op" id="5353958">(</span><span class="builtinfunc" id="5353959">len</span><span class="op" id="5353962">(</span><span class="ident" id="5353963"><a href="/go/printer/printer.go.html#5353639">p</a></span><span class="op" id="5353964">.</span><span class="ident" id="5353965">wsbuf</span><span class="op" id="5353970">)</span><span class="op" id="5353971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5353974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5353977">return</span><br>
<span class="lineno">990</span><span class="op" id="5353984">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5353987">//&nbsp;getNode&nbsp;returns&nbsp;the&nbsp;ast.CommentGroup&nbsp;associated&nbsp;with&nbsp;n,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="5354054">func</span>&nbsp;<span class="ident" id="5354059">getDoc</span><span class="op" id="5354065">(</span><span class="ident" id="5354066">n</span>&nbsp;<span class="ident" id="5354068"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5354071">.</span><span class="ident" id="5354072">Node</span><span class="op" id="5354076">)</span>&nbsp;<span class="op" id="5354078">*</span><span class="ident" id="5354079"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5354082">.</span><span class="ident" id="5354083">CommentGroup</span>&nbsp;<span class="op" id="5354096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354099">switch</span>&nbsp;<span class="ident" id="5354106">n</span>&nbsp;<span class="op" id="5354108">:=</span>&nbsp;<span class="ident" id="5354111"><a href="/go/printer/printer.go.html#5354066">n</a></span><span class="op" id="5354112">.</span><span class="op" id="5354113">(</span><span class="keyword" id="5354114">type</span><span class="op" id="5354118">)</span>&nbsp;<span class="op" id="5354120">{</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354123">case</span>&nbsp;<span class="op" id="5354128">*</span><span class="ident" id="5354129"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5354132">.</span><span class="ident" id="5354133">Field</span><span class="op" id="5354138">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354142">return</span>&nbsp;<span class="ident" id="5354149"><a href="/go/printer/printer.go.html#5354106">n</a></span><span class="op" id="5354150">.</span><span class="ident" id="5354151">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354156">case</span>&nbsp;<span class="op" id="5354161">*</span><span class="ident" id="5354162"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5354165">.</span><span class="ident" id="5354166">ImportSpec</span><span class="op" id="5354176">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354180">return</span>&nbsp;<span class="ident" id="5354187"><a href="/go/printer/printer.go.html#5354106">n</a></span><span class="op" id="5354188">.</span><span class="ident" id="5354189">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354194">case</span>&nbsp;<span class="op" id="5354199">*</span><span class="ident" id="5354200"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5354203">.</span><span class="ident" id="5354204">ValueSpec</span><span class="op" id="5354213">:</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354217">return</span>&nbsp;<span class="ident" id="5354224"><a href="/go/printer/printer.go.html#5354106">n</a></span><span class="op" id="5354225">.</span><span class="ident" id="5354226">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354231">case</span>&nbsp;<span class="op" id="5354236">*</span><span class="ident" id="5354237"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5354240">.</span><span class="ident" id="5354241">TypeSpec</span><span class="op" id="5354249">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354253">return</span>&nbsp;<span class="ident" id="5354260"><a href="/go/printer/printer.go.html#5354106">n</a></span><span class="op" id="5354261">.</span><span class="ident" id="5354262">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354267">case</span>&nbsp;<span class="op" id="5354272">*</span><span class="ident" id="5354273"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5354276">.</span><span class="ident" id="5354277">GenDecl</span><span class="op" id="5354284">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354288">return</span>&nbsp;<span class="ident" id="5354295"><a href="/go/printer/printer.go.html#5354106">n</a></span><span class="op" id="5354296">.</span><span class="ident" id="5354297">Doc</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354302">case</span>&nbsp;<span class="op" id="5354307">*</span><span class="ident" id="5354308"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5354311">.</span><span class="ident" id="5354312">FuncDecl</span><span class="op" id="5354320">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354324">return</span>&nbsp;<span class="ident" id="5354331"><a href="/go/printer/printer.go.html#5354106">n</a></span><span class="op" id="5354332">.</span><span class="ident" id="5354333">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354338">case</span>&nbsp;<span class="op" id="5354343">*</span><span class="ident" id="5354344"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5354347">.</span><span class="ident" id="5354348">File</span><span class="op" id="5354352">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354356">return</span>&nbsp;<span class="ident" id="5354363"><a href="/go/printer/printer.go.html#5354106">n</a></span><span class="op" id="5354364">.</span><span class="ident" id="5354365">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5354370">}</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354373">return</span>&nbsp;<span class="ident" id="5354380">nil</span><br>
<span class="lineno"></span><span class="op" id="5354384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5354387">func</span>&nbsp;<span class="op" id="5354392">(</span><span class="ident" id="5354393">p</span>&nbsp;<span class="op" id="5354395">*</span><span class="ident" id="5354396"><a href="/go/printer/printer.go.html#5325702">printer</a></span><span class="op" id="5354403">)</span>&nbsp;<span class="ident" id="5354405">printNode</span><span class="op" id="5354414">(</span><span class="ident" id="5354415">node</span>&nbsp;<span class="keyword" id="5354420">interface</span><span class="op" id="5354429">{</span><span class="op" id="5354430">}</span><span class="op" id="5354431">)</span>&nbsp;<span class="builtintype" id="5354433">error</span>&nbsp;<span class="op" id="5354439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5354442">//&nbsp;unpack&nbsp;*CommentedNode,&nbsp;if&nbsp;any</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354476">var</span>&nbsp;<span class="ident" id="5354480">comments</span>&nbsp;<span class="op" id="5354489">[</span><span class="op" id="5354490">]</span><span class="op" id="5354491">*</span><span class="ident" id="5354492"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5354495">.</span><span class="ident" id="5354496">CommentGroup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354510">if</span>&nbsp;<span class="ident" id="5354513">cnode</span><span class="op" id="5354518">,</span>&nbsp;<span class="ident" id="5354520">ok</span>&nbsp;<span class="op" id="5354523">:=</span>&nbsp;<span class="ident" id="5354526"><a href="/go/printer/printer.go.html#5354415">node</a></span><span class="op" id="5354530">.</span><span class="op" id="5354531">(</span><span class="op" id="5354532">*</span><span class="ident" id="5354533"><a href="/go/printer/printer.go.html#5361149">CommentedNode</a></span><span class="op" id="5354546">)</span><span class="op" id="5354547">;</span>&nbsp;<span class="ident" id="5354549"><a href="/go/printer/printer.go.html#5354520">ok</a></span>&nbsp;<span class="op" id="5354552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5354556"><a href="/go/printer/printer.go.html#5354415">node</a></span>&nbsp;<span class="op" id="5354561">=</span>&nbsp;<span class="ident" id="5354563"><a href="/go/printer/printer.go.html#5354513">cnode</a></span><span class="op" id="5354568">.</span><span class="ident" id="5354569">Node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5354576"><a href="/go/printer/printer.go.html#5354480">comments</a></span>&nbsp;<span class="op" id="5354585">=</span>&nbsp;<span class="ident" id="5354587"><a href="/go/printer/printer.go.html#5354513">cnode</a></span><span class="op" id="5354592">.</span><span class="ident" id="5354593">Comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5354603">}</span><br>
<span class="lineno">1020</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354607">if</span>&nbsp;<span class="ident" id="5354610"><a href="/go/printer/printer.go.html#5354480">comments</a></span>&nbsp;<span class="op" id="5354619">!=</span>&nbsp;<span class="ident" id="5354622">nil</span>&nbsp;<span class="op" id="5354626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5354630">//&nbsp;commented&nbsp;node&nbsp;-&nbsp;restrict&nbsp;comment&nbsp;list&nbsp;to&nbsp;relevant&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5354692">n</span><span class="op" id="5354693">,</span>&nbsp;<span class="ident" id="5354695">ok</span>&nbsp;<span class="op" id="5354698">:=</span>&nbsp;<span class="ident" id="5354701"><a href="/go/printer/printer.go.html#5354415">node</a></span><span class="op" id="5354705">.</span><span class="op" id="5354706">(</span><span class="ident" id="5354707"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5354710">.</span><span class="ident" id="5354711">Node</span><span class="op" id="5354715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354719">if</span>&nbsp;<span class="op" id="5354722">!</span><span class="ident" id="5354723"><a href="/go/printer/printer.go.html#5354695">ok</a></span>&nbsp;<span class="op" id="5354726">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354731">goto</span>&nbsp;<span class="ident" id="5354736">unsupported</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5354750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5354754">beg</span>&nbsp;<span class="op" id="5354758">:=</span>&nbsp;<span class="ident" id="5354761"><a href="/go/printer/printer.go.html#5354692">n</a></span><span class="op" id="5354762">.</span><span class="ident" id="5354763">Pos</span><span class="op" id="5354766">(</span><span class="op" id="5354767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5354771">end</span>&nbsp;<span class="op" id="5354775">:=</span>&nbsp;<span class="ident" id="5354778"><a href="/go/printer/printer.go.html#5354692">n</a></span><span class="op" id="5354779">.</span><span class="ident" id="5354780">End</span><span class="op" id="5354783">(</span><span class="op" id="5354784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5354788">//&nbsp;if&nbsp;the&nbsp;node&nbsp;has&nbsp;associated&nbsp;documentation,</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5354835">//&nbsp;include&nbsp;that&nbsp;commentgroup&nbsp;in&nbsp;the&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5354879">//&nbsp;(the&nbsp;comment&nbsp;list&nbsp;is&nbsp;sorted&nbsp;in&nbsp;the&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5354925">//&nbsp;of&nbsp;the&nbsp;comment&nbsp;appearance&nbsp;in&nbsp;the&nbsp;source&nbsp;code)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354976">if</span>&nbsp;<span class="ident" id="5354979">doc</span>&nbsp;<span class="op" id="5354983">:=</span>&nbsp;<span class="ident" id="5354986"><a href="/go/printer/printer.go.html#5354059">getDoc</a></span><span class="op" id="5354992">(</span><span class="ident" id="5354993"><a href="/go/printer/printer.go.html#5354692">n</a></span><span class="op" id="5354994">)</span><span class="op" id="5354995">;</span>&nbsp;<span class="ident" id="5354997"><a href="/go/printer/printer.go.html#5354979">doc</a></span>&nbsp;<span class="op" id="5355001">!=</span>&nbsp;<span class="ident" id="5355004">nil</span>&nbsp;<span class="op" id="5355008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355013"><a href="/go/printer/printer.go.html#5354754">beg</a></span>&nbsp;<span class="op" id="5355017">=</span>&nbsp;<span class="ident" id="5355019"><a href="/go/printer/printer.go.html#5354979">doc</a></span><span class="op" id="5355022">.</span><span class="ident" id="5355023">Pos</span><span class="op" id="5355026">(</span><span class="op" id="5355027">)</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5355031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5355035">//&nbsp;token.Pos&nbsp;values&nbsp;are&nbsp;global&nbsp;offsets,&nbsp;we&nbsp;can</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5355084">//&nbsp;compare&nbsp;them&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355111">i</span>&nbsp;<span class="op" id="5355113">:=</span>&nbsp;<span class="num" id="5355116">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355120">for</span>&nbsp;<span class="ident" id="5355124"><a href="/go/printer/printer.go.html#5355111">i</a></span>&nbsp;<span class="op" id="5355126">&lt;</span>&nbsp;<span class="builtinfunc" id="5355128">len</span><span class="op" id="5355131">(</span><span class="ident" id="5355132"><a href="/go/printer/printer.go.html#5354480">comments</a></span><span class="op" id="5355140">)</span>&nbsp;<span class="op" id="5355142">&amp;&amp;</span>&nbsp;<span class="ident" id="5355145"><a href="/go/printer/printer.go.html#5354480">comments</a></span><span class="op" id="5355153">[</span><span class="ident" id="5355154"><a href="/go/printer/printer.go.html#5355111">i</a></span><span class="op" id="5355155">]</span><span class="op" id="5355156">.</span><span class="ident" id="5355157">End</span><span class="op" id="5355160">(</span><span class="op" id="5355161">)</span>&nbsp;<span class="op" id="5355163">&lt;</span>&nbsp;<span class="ident" id="5355165"><a href="/go/printer/printer.go.html#5354754">beg</a></span>&nbsp;<span class="op" id="5355169">{</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355174"><a href="/go/printer/printer.go.html#5355111">i</a></span><span class="op" id="5355175">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5355180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355184">j</span>&nbsp;<span class="op" id="5355186">:=</span>&nbsp;<span class="ident" id="5355189"><a href="/go/printer/printer.go.html#5355111">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355193">for</span>&nbsp;<span class="ident" id="5355197"><a href="/go/printer/printer.go.html#5355184">j</a></span>&nbsp;<span class="op" id="5355199">&lt;</span>&nbsp;<span class="builtinfunc" id="5355201">len</span><span class="op" id="5355204">(</span><span class="ident" id="5355205"><a href="/go/printer/printer.go.html#5354480">comments</a></span><span class="op" id="5355213">)</span>&nbsp;<span class="op" id="5355215">&amp;&amp;</span>&nbsp;<span class="ident" id="5355218"><a href="/go/printer/printer.go.html#5354480">comments</a></span><span class="op" id="5355226">[</span><span class="ident" id="5355227"><a href="/go/printer/printer.go.html#5355184">j</a></span><span class="op" id="5355228">]</span><span class="op" id="5355229">.</span><span class="ident" id="5355230">Pos</span><span class="op" id="5355233">(</span><span class="op" id="5355234">)</span>&nbsp;<span class="op" id="5355236">&lt;</span>&nbsp;<span class="ident" id="5355238"><a href="/go/printer/printer.go.html#5354771">end</a></span>&nbsp;<span class="op" id="5355242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355247"><a href="/go/printer/printer.go.html#5355184">j</a></span><span class="op" id="5355248">++</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5355253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355257">if</span>&nbsp;<span class="ident" id="5355260"><a href="/go/printer/printer.go.html#5355111">i</a></span>&nbsp;<span class="op" id="5355262">&lt;</span>&nbsp;<span class="ident" id="5355264"><a href="/go/printer/printer.go.html#5355184">j</a></span>&nbsp;<span class="op" id="5355266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355271"><a href="/go/printer/printer.go.html#5354393">p</a></span><span class="op" id="5355272">.</span><span class="ident" id="5355273">comments</span>&nbsp;<span class="op" id="5355282">=</span>&nbsp;<span class="ident" id="5355284"><a href="/go/printer/printer.go.html#5354480">comments</a></span><span class="op" id="5355292">[</span><span class="ident" id="5355293"><a href="/go/printer/printer.go.html#5355111">i</a></span><span class="op" id="5355294">:</span><span class="ident" id="5355295"><a href="/go/printer/printer.go.html#5355184">j</a></span><span class="op" id="5355296">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5355300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5355303">}</span>&nbsp;<span class="keyword" id="5355305">else</span>&nbsp;<span class="keyword" id="5355310">if</span>&nbsp;<span class="ident" id="5355313">n</span><span class="op" id="5355314">,</span>&nbsp;<span class="ident" id="5355316">ok</span>&nbsp;<span class="op" id="5355319">:=</span>&nbsp;<span class="ident" id="5355322"><a href="/go/printer/printer.go.html#5354415">node</a></span><span class="op" id="5355326">.</span><span class="op" id="5355327">(</span><span class="op" id="5355328">*</span><span class="ident" id="5355329"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5355332">.</span><span class="ident" id="5355333">File</span><span class="op" id="5355337">)</span><span class="op" id="5355338">;</span>&nbsp;<span class="ident" id="5355340"><a href="/go/printer/printer.go.html#5355316">ok</a></span>&nbsp;<span class="op" id="5355343">{</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5355347">//&nbsp;use&nbsp;ast.File&nbsp;comments,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355382"><a href="/go/printer/printer.go.html#5354393">p</a></span><span class="op" id="5355383">.</span><span class="ident" id="5355384">comments</span>&nbsp;<span class="op" id="5355393">=</span>&nbsp;<span class="ident" id="5355395"><a href="/go/printer/printer.go.html#5355313">n</a></span><span class="op" id="5355396">.</span><span class="ident" id="5355397">Comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5355407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5355411">//&nbsp;if&nbsp;there&nbsp;are&nbsp;no&nbsp;comments,&nbsp;use&nbsp;node&nbsp;comments</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355459"><a href="/go/printer/printer.go.html#5354393">p</a></span><span class="op" id="5355460">.</span><span class="ident" id="5355461">useNodeComments</span>&nbsp;<span class="op" id="5355477">=</span>&nbsp;<span class="ident" id="5355479"><a href="/go/printer/printer.go.html#5354393">p</a></span><span class="op" id="5355480">.</span><span class="ident" id="5355481">comments</span>&nbsp;<span class="op" id="5355490">==</span>&nbsp;<span class="ident" id="5355493">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5355499">//&nbsp;get&nbsp;comments&nbsp;ready&nbsp;for&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355530"><a href="/go/printer/printer.go.html#5354393">p</a></span><span class="op" id="5355531">.</span><span class="ident" id="5355532">nextComment</span><span class="op" id="5355543">(</span><span class="op" id="5355544">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5355548">//&nbsp;format&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355564">switch</span>&nbsp;<span class="ident" id="5355571">n</span>&nbsp;<span class="op" id="5355573">:=</span>&nbsp;<span class="ident" id="5355576"><a href="/go/printer/printer.go.html#5354415">node</a></span><span class="op" id="5355580">.</span><span class="op" id="5355581">(</span><span class="keyword" id="5355582">type</span><span class="op" id="5355586">)</span>&nbsp;<span class="op" id="5355588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355591">case</span>&nbsp;<span class="ident" id="5355596"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5355599">.</span><span class="ident" id="5355600">Expr</span><span class="op" id="5355604">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355608"><a href="/go/printer/printer.go.html#5354393">p</a></span><span class="op" id="5355609">.</span><span class="ident" id="5355610">expr</span><span class="op" id="5355614">(</span><span class="ident" id="5355615"><a href="/go/printer/printer.go.html#5355571">n</a></span><span class="op" id="5355616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355619">case</span>&nbsp;<span class="ident" id="5355624"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5355627">.</span><span class="ident" id="5355628">Stmt</span><span class="op" id="5355632">:</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5355636">//&nbsp;A&nbsp;labeled&nbsp;statement&nbsp;will&nbsp;un-indent&nbsp;to&nbsp;position&nbsp;the&nbsp;label.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5355699">//&nbsp;Set&nbsp;p.indent&nbsp;to&nbsp;1&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;get&nbsp;indent&nbsp;&#34;underflow&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355758">if</span>&nbsp;<span class="ident" id="5355761">_</span><span class="op" id="5355762">,</span>&nbsp;<span class="ident" id="5355764">ok</span>&nbsp;<span class="op" id="5355767">:=</span>&nbsp;<span class="ident" id="5355770"><a href="/go/printer/printer.go.html#5355571">n</a></span><span class="op" id="5355771">.</span><span class="op" id="5355772">(</span><span class="op" id="5355773">*</span><span class="ident" id="5355774"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5355777">.</span><span class="ident" id="5355778">LabeledStmt</span><span class="op" id="5355789">)</span><span class="op" id="5355790">;</span>&nbsp;<span class="ident" id="5355792"><a href="/go/printer/printer.go.html#5355764">ok</a></span>&nbsp;<span class="op" id="5355795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355800"><a href="/go/printer/printer.go.html#5354393">p</a></span><span class="op" id="5355801">.</span><span class="ident" id="5355802">indent</span>&nbsp;<span class="op" id="5355809">=</span>&nbsp;<span class="num" id="5355811">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5355815">}</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355819"><a href="/go/printer/printer.go.html#5354393">p</a></span><span class="op" id="5355820">.</span><span class="ident" id="5355821">stmt</span><span class="op" id="5355825">(</span><span class="ident" id="5355826"><a href="/go/printer/printer.go.html#5355571">n</a></span><span class="op" id="5355827">,</span>&nbsp;<span class="builtintype" id="5355829">false</span><span class="op" id="5355834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355837">case</span>&nbsp;<span class="ident" id="5355842"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5355845">.</span><span class="ident" id="5355846">Decl</span><span class="op" id="5355850">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355854"><a href="/go/printer/printer.go.html#5354393">p</a></span><span class="op" id="5355855">.</span><span class="ident" id="5355856">decl</span><span class="op" id="5355860">(</span><span class="ident" id="5355861"><a href="/go/printer/printer.go.html#5355571">n</a></span><span class="op" id="5355862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355865">case</span>&nbsp;<span class="ident" id="5355870"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5355873">.</span><span class="ident" id="5355874">Spec</span><span class="op" id="5355878">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355882"><a href="/go/printer/printer.go.html#5354393">p</a></span><span class="op" id="5355883">.</span><span class="ident" id="5355884">spec</span><span class="op" id="5355888">(</span><span class="ident" id="5355889"><a href="/go/printer/printer.go.html#5355571">n</a></span><span class="op" id="5355890">,</span>&nbsp;<span class="num" id="5355892">1</span><span class="op" id="5355893">,</span>&nbsp;<span class="builtintype" id="5355895">false</span><span class="op" id="5355900">)</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355903">case</span>&nbsp;<span class="op" id="5355908">[</span><span class="op" id="5355909">]</span><span class="ident" id="5355910"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5355913">.</span><span class="ident" id="5355914">Stmt</span><span class="op" id="5355918">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5355922">//&nbsp;A&nbsp;labeled&nbsp;statement&nbsp;will&nbsp;un-indent&nbsp;to&nbsp;position&nbsp;the&nbsp;label.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5355985">//&nbsp;Set&nbsp;p.indent&nbsp;to&nbsp;1&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;get&nbsp;indent&nbsp;&#34;underflow&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356044">for</span>&nbsp;<span class="ident" id="5356048">_</span><span class="op" id="5356049">,</span>&nbsp;<span class="ident" id="5356051">s</span>&nbsp;<span class="op" id="5356053">:=</span>&nbsp;<span class="keyword" id="5356056">range</span>&nbsp;<span class="ident" id="5356062"><a href="/go/printer/printer.go.html#5355571">n</a></span>&nbsp;<span class="op" id="5356064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356069">if</span>&nbsp;<span class="ident" id="5356072">_</span><span class="op" id="5356073">,</span>&nbsp;<span class="ident" id="5356075">ok</span>&nbsp;<span class="op" id="5356078">:=</span>&nbsp;<span class="ident" id="5356081"><a href="/go/printer/printer.go.html#5356051">s</a></span><span class="op" id="5356082">.</span><span class="op" id="5356083">(</span><span class="op" id="5356084">*</span><span class="ident" id="5356085"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5356088">.</span><span class="ident" id="5356089">LabeledStmt</span><span class="op" id="5356100">)</span><span class="op" id="5356101">;</span>&nbsp;<span class="ident" id="5356103"><a href="/go/printer/printer.go.html#5356075">ok</a></span>&nbsp;<span class="op" id="5356106">{</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356112"><a href="/go/printer/printer.go.html#5354393">p</a></span><span class="op" id="5356113">.</span><span class="ident" id="5356114">indent</span>&nbsp;<span class="op" id="5356121">=</span>&nbsp;<span class="num" id="5356123">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5356128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5356132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356136"><a href="/go/printer/printer.go.html#5354393">p</a></span><span class="op" id="5356137">.</span><span class="ident" id="5356138">stmtList</span><span class="op" id="5356146">(</span><span class="ident" id="5356147"><a href="/go/printer/printer.go.html#5355571">n</a></span><span class="op" id="5356148">,</span>&nbsp;<span class="num" id="5356150">0</span><span class="op" id="5356151">,</span>&nbsp;<span class="builtintype" id="5356153">false</span><span class="op" id="5356158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356161">case</span>&nbsp;<span class="op" id="5356166">[</span><span class="op" id="5356167">]</span><span class="ident" id="5356168"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5356171">.</span><span class="ident" id="5356172">Decl</span><span class="op" id="5356176">:</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356180"><a href="/go/printer/printer.go.html#5354393">p</a></span><span class="op" id="5356181">.</span><span class="ident" id="5356182">declList</span><span class="op" id="5356190">(</span><span class="ident" id="5356191"><a href="/go/printer/printer.go.html#5355571">n</a></span><span class="op" id="5356192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356195">case</span>&nbsp;<span class="op" id="5356200">*</span><span class="ident" id="5356201"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5356204">.</span><span class="ident" id="5356205">File</span><span class="op" id="5356209">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356213"><a href="/go/printer/printer.go.html#5354393">p</a></span><span class="op" id="5356214">.</span><span class="ident" id="5356215">file</span><span class="op" id="5356219">(</span><span class="ident" id="5356220"><a href="/go/printer/printer.go.html#5355571">n</a></span><span class="op" id="5356221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356224">default</span><span class="op" id="5356231">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356235">goto</span>&nbsp;<span class="ident" id="5356240">unsupported</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5356253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356257">return</span>&nbsp;<span class="ident" id="5356264">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="5356269">unsupported</span><span class="op" id="5356280">:</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356283">return</span>&nbsp;<span class="ident" id="5356290"><a href="/go/printer/printer.go.html#5324619">fmt</a></span><span class="op" id="5356293">.</span><span class="ident" id="5356294">Errorf</span><span class="op" id="5356300">(</span><span class="string" id="5356301">&#34;go/printer:&nbsp;unsupported&nbsp;node&nbsp;type&nbsp;%T&#34;</span><span class="op" id="5356339">,</span>&nbsp;<span class="ident" id="5356341"><a href="/go/printer/printer.go.html#5354415">node</a></span><span class="op" id="5356345">)</span><br>
<span class="lineno"></span><span class="op" id="5356347">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5356350">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5356430">//&nbsp;Trimmer</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span><span class="comment" id="5356442">//&nbsp;A&nbsp;trimmer&nbsp;is&nbsp;an&nbsp;io.Writer&nbsp;filter&nbsp;for&nbsp;stripping&nbsp;tabwriter.Escape</span><br>
<span class="lineno"></span><span class="comment" id="5356509">//&nbsp;characters,&nbsp;trailing&nbsp;blanks&nbsp;and&nbsp;tabs,&nbsp;and&nbsp;for&nbsp;converting&nbsp;formfeed</span><br>
<span class="lineno"></span><span class="comment" id="5356578">//&nbsp;and&nbsp;vtab&nbsp;characters&nbsp;into&nbsp;newlines&nbsp;and&nbsp;htabs&nbsp;(in&nbsp;case&nbsp;no&nbsp;tabwriter</span><br>
<span class="lineno"></span><span class="comment" id="5356647">//&nbsp;is&nbsp;used).&nbsp;Text&nbsp;bracketed&nbsp;by&nbsp;tabwriter.Escape&nbsp;characters&nbsp;is&nbsp;passed</span><br>
<span class="lineno">1105</span><span class="comment" id="5356716">//&nbsp;through&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="comment" id="5356738">//</span><br>
<span class="lineno"></span><span class="keyword" id="5356741">type</span>&nbsp;<span class="ident" id="5356746">trimmer</span>&nbsp;<span class="keyword" id="5356754">struct</span>&nbsp;<span class="op" id="5356761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356764">output</span>&nbsp;<span class="ident" id="5356771"><a href="/go/printer/printer.go.html#5324648">io</a></span><span class="op" id="5356773">.</span><span class="ident" id="5356774">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356782">state</span>&nbsp;&nbsp;<span class="builtintype" id="5356789">int</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356794">space</span>&nbsp;&nbsp;<span class="op" id="5356801">[</span><span class="op" id="5356802">]</span><span class="builtintype" id="5356803">byte</span><br>
<span class="lineno"></span><span class="op" id="5356808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5356811">//&nbsp;trimmer&nbsp;is&nbsp;implemented&nbsp;as&nbsp;a&nbsp;state&nbsp;machine.</span><br>
<span class="lineno"></span><span class="comment" id="5356857">//&nbsp;It&nbsp;can&nbsp;be&nbsp;in&nbsp;one&nbsp;of&nbsp;the&nbsp;following&nbsp;states:</span><br>
<span class="lineno">1115</span><span class="keyword" id="5356902">const</span>&nbsp;<span class="op" id="5356908">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356911">inSpace</span>&nbsp;&nbsp;<span class="op" id="5356920">=</span>&nbsp;<span class="ident" id="5356922">iota</span>&nbsp;<span class="comment" id="5356927">//&nbsp;inside&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356944">inEscape</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5356960">//&nbsp;inside&nbsp;text&nbsp;bracketed&nbsp;by&nbsp;tabwriter.Escapes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357007">inText</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5357023">//&nbsp;inside&nbsp;text</span><br>
<span class="lineno"></span><span class="op" id="5357038">)</span><br>
<span class="lineno">1120</span><br>
<span class="lineno"></span><span class="keyword" id="5357041">func</span>&nbsp;<span class="op" id="5357046">(</span><span class="ident" id="5357047">p</span>&nbsp;<span class="op" id="5357049">*</span><span class="ident" id="5357050"><a href="/go/printer/printer.go.html#5356746">trimmer</a></span><span class="op" id="5357057">)</span>&nbsp;<span class="ident" id="5357059">resetSpace</span><span class="op" id="5357069">(</span><span class="op" id="5357070">)</span>&nbsp;<span class="op" id="5357072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357075"><a href="/go/printer/printer.go.html#5357047">p</a></span><span class="op" id="5357076">.</span><span class="ident" id="5357077">state</span>&nbsp;<span class="op" id="5357083">=</span>&nbsp;<span class="ident" id="5357085"><a href="/go/printer/printer.go.html#5356911">inSpace</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357094"><a href="/go/printer/printer.go.html#5357047">p</a></span><span class="op" id="5357095">.</span><span class="ident" id="5357096">space</span>&nbsp;<span class="op" id="5357102">=</span>&nbsp;<span class="ident" id="5357104"><a href="/go/printer/printer.go.html#5357047">p</a></span><span class="op" id="5357105">.</span><span class="ident" id="5357106">space</span><span class="op" id="5357111">[</span><span class="num" id="5357112">0</span><span class="op" id="5357113">:</span><span class="num" id="5357114">0</span><span class="op" id="5357115">]</span><br>
<span class="lineno"></span><span class="op" id="5357117">}</span><br>
<span class="lineno">1125</span><br>
<span class="lineno"></span><span class="comment" id="5357120">//&nbsp;Design&nbsp;note:&nbsp;It&nbsp;is&nbsp;tempting&nbsp;to&nbsp;eliminate&nbsp;extra&nbsp;blanks&nbsp;occurring&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5357190">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;whitespace&nbsp;in&nbsp;this&nbsp;function&nbsp;as&nbsp;it&nbsp;could&nbsp;simplify&nbsp;some</span><br>
<span class="lineno"></span><span class="comment" id="5357260">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;blanks&nbsp;logic&nbsp;in&nbsp;the&nbsp;node&nbsp;printing&nbsp;functions.</span><br>
<span class="lineno"></span><span class="comment" id="5357328">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;However,&nbsp;this&nbsp;would&nbsp;mess&nbsp;up&nbsp;any&nbsp;formatting&nbsp;done&nbsp;by</span><br>
<span class="lineno">1130</span><span class="comment" id="5357395">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;tabwriter.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5357427">var</span>&nbsp;<span class="ident" id="5357431">aNewline</span>&nbsp;<span class="op" id="5357440">=</span>&nbsp;<span class="op" id="5357442">[</span><span class="op" id="5357443">]</span><span class="builtintype" id="5357444">byte</span><span class="op" id="5357448">(</span><span class="string" id="5357449">&#34;\n&#34;</span><span class="op" id="5357453">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5357456">func</span>&nbsp;<span class="op" id="5357461">(</span><span class="ident" id="5357462">p</span>&nbsp;<span class="op" id="5357464">*</span><span class="ident" id="5357465"><a href="/go/printer/printer.go.html#5356746">trimmer</a></span><span class="op" id="5357472">)</span>&nbsp;<span class="ident" id="5357474">Write</span><span class="op" id="5357479">(</span><span class="ident" id="5357480">data</span>&nbsp;<span class="op" id="5357485">[</span><span class="op" id="5357486">]</span><span class="builtintype" id="5357487">byte</span><span class="op" id="5357491">)</span>&nbsp;<span class="op" id="5357493">(</span><span class="ident" id="5357494">n</span>&nbsp;<span class="builtintype" id="5357496">int</span><span class="op" id="5357499">,</span>&nbsp;<span class="ident" id="5357501">err</span>&nbsp;<span class="builtintype" id="5357505">error</span><span class="op" id="5357510">)</span>&nbsp;<span class="op" id="5357512">{</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5357515">//&nbsp;invariants:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5357531">//&nbsp;p.state&nbsp;==&nbsp;inSpace:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5357555">//&nbsp;&nbsp;&nbsp;&nbspp.space&nbsp;is&nbsp;unwritten</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5357580">//&nbsp;p.state&nbsp;==&nbsp;inEscape,&nbsp;inText:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5357613">//&nbsp;&nbsp;&nbsp;&nbspdata[m:n]&nbsp;is&nbsp;unwritten</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357640">m</span>&nbsp;<span class="op" id="5357642">:=</span>&nbsp;<span class="num" id="5357645">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5357648">var</span>&nbsp;<span class="ident" id="5357652">b</span>&nbsp;<span class="builtintype" id="5357654">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5357660">for</span>&nbsp;<span class="ident" id="5357664"><a href="/go/printer/printer.go.html#5357494">n</a></span><span class="op" id="5357665">,</span>&nbsp;<span class="ident" id="5357667"><a href="/go/printer/printer.go.html#5357652">b</a></span>&nbsp;<span class="op" id="5357669">=</span>&nbsp;<span class="keyword" id="5357671">range</span>&nbsp;<span class="ident" id="5357677"><a href="/go/printer/printer.go.html#5357480">data</a></span>&nbsp;<span class="op" id="5357682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5357686">if</span>&nbsp;<span class="ident" id="5357689"><a href="/go/printer/printer.go.html#5357652">b</a></span>&nbsp;<span class="op" id="5357691">==</span>&nbsp;<span class="string" id="5357694">&#39;\v&#39;</span>&nbsp;<span class="op" id="5357699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357704"><a href="/go/printer/printer.go.html#5357652">b</a></span>&nbsp;<span class="op" id="5357706">=</span>&nbsp;<span class="string" id="5357708">&#39;\t&#39;</span>&nbsp;<span class="comment" id="5357713">//&nbsp;convert&nbsp;to&nbsp;htab</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5357734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5357738">switch</span>&nbsp;<span class="ident" id="5357745"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5357746">.</span><span class="ident" id="5357747">state</span>&nbsp;<span class="op" id="5357753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5357757">case</span>&nbsp;<span class="ident" id="5357762"><a href="/go/printer/printer.go.html#5356911">inSpace</a></span><span class="op" id="5357769">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5357774">switch</span>&nbsp;<span class="ident" id="5357781"><a href="/go/printer/printer.go.html#5357652">b</a></span>&nbsp;<span class="op" id="5357783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5357788">case</span>&nbsp;<span class="string" id="5357793">&#39;\t&#39;</span><span class="op" id="5357797">,</span>&nbsp;<span class="string" id="5357799">&#39;&nbsp;&#39;</span><span class="op" id="5357802">:</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357808"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5357809">.</span><span class="ident" id="5357810">space</span>&nbsp;<span class="op" id="5357816">=</span>&nbsp;<span class="builtinfunc" id="5357818">append</span><span class="op" id="5357824">(</span><span class="ident" id="5357825"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5357826">.</span><span class="ident" id="5357827">space</span><span class="op" id="5357832">,</span>&nbsp;<span class="ident" id="5357834"><a href="/go/printer/printer.go.html#5357652">b</a></span><span class="op" id="5357835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5357840">case</span>&nbsp;<span class="string" id="5357845">&#39;\n&#39;</span><span class="op" id="5357849">,</span>&nbsp;<span class="string" id="5357851">&#39;\f&#39;</span><span class="op" id="5357855">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357861"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5357862">.</span><span class="ident" id="5357863">resetSpace</span><span class="op" id="5357873">(</span><span class="op" id="5357874">)</span>&nbsp;<span class="comment" id="5357876">//&nbsp;discard&nbsp;trailing&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357906">_</span><span class="op" id="5357907">,</span>&nbsp;<span class="ident" id="5357909"><a href="/go/printer/printer.go.html#5357501">err</a></span>&nbsp;<span class="op" id="5357913">=</span>&nbsp;<span class="ident" id="5357915"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5357916">.</span><span class="ident" id="5357917">output</span><span class="op" id="5357923">.</span><span class="ident" id="5357924">Write</span><span class="op" id="5357929">(</span><span class="ident" id="5357930"><a href="/go/printer/printer.go.html#5357431">aNewline</a></span><span class="op" id="5357938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5357943">case</span>&nbsp;<span class="ident" id="5357948"><a href="/go/printer/printer.go.html#5324682">tabwriter</a></span><span class="op" id="5357957">.</span><span class="ident" id="5357958">Escape</span><span class="op" id="5357964">:</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357970">_</span><span class="op" id="5357971">,</span>&nbsp;<span class="ident" id="5357973"><a href="/go/printer/printer.go.html#5357501">err</a></span>&nbsp;<span class="op" id="5357977">=</span>&nbsp;<span class="ident" id="5357979"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5357980">.</span><span class="ident" id="5357981">output</span><span class="op" id="5357987">.</span><span class="ident" id="5357988">Write</span><span class="op" id="5357993">(</span><span class="ident" id="5357994"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5357995">.</span><span class="ident" id="5357996">space</span><span class="op" id="5358001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358007"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358008">.</span><span class="ident" id="5358009">state</span>&nbsp;<span class="op" id="5358015">=</span>&nbsp;<span class="ident" id="5358017"><a href="/go/printer/printer.go.html#5356944">inEscape</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358030"><a href="/go/printer/printer.go.html#5357640">m</a></span>&nbsp;<span class="op" id="5358032">=</span>&nbsp;<span class="ident" id="5358034"><a href="/go/printer/printer.go.html#5357494">n</a></span>&nbsp;<span class="op" id="5358036">+</span>&nbsp;<span class="num" id="5358038">1</span>&nbsp;<span class="comment" id="5358040">//&nbsp;+1:&nbsp;skip&nbsp;tabwriter.Escape</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5358072">default</span><span class="op" id="5358079">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358085">_</span><span class="op" id="5358086">,</span>&nbsp;<span class="ident" id="5358088"><a href="/go/printer/printer.go.html#5357501">err</a></span>&nbsp;<span class="op" id="5358092">=</span>&nbsp;<span class="ident" id="5358094"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358095">.</span><span class="ident" id="5358096">output</span><span class="op" id="5358102">.</span><span class="ident" id="5358103">Write</span><span class="op" id="5358108">(</span><span class="ident" id="5358109"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358110">.</span><span class="ident" id="5358111">space</span><span class="op" id="5358116">)</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358122"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358123">.</span><span class="ident" id="5358124">state</span>&nbsp;<span class="op" id="5358130">=</span>&nbsp;<span class="ident" id="5358132"><a href="/go/printer/printer.go.html#5357007">inText</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358143"><a href="/go/printer/printer.go.html#5357640">m</a></span>&nbsp;<span class="op" id="5358145">=</span>&nbsp;<span class="ident" id="5358147"><a href="/go/printer/printer.go.html#5357494">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5358152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5358156">case</span>&nbsp;<span class="ident" id="5358161"><a href="/go/printer/printer.go.html#5356944">inEscape</a></span><span class="op" id="5358169">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5358174">if</span>&nbsp;<span class="ident" id="5358177"><a href="/go/printer/printer.go.html#5357652">b</a></span>&nbsp;<span class="op" id="5358179">==</span>&nbsp;<span class="ident" id="5358182"><a href="/go/printer/printer.go.html#5324682">tabwriter</a></span><span class="op" id="5358191">.</span><span class="ident" id="5358192">Escape</span>&nbsp;<span class="op" id="5358199">{</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358205">_</span><span class="op" id="5358206">,</span>&nbsp;<span class="ident" id="5358208"><a href="/go/printer/printer.go.html#5357501">err</a></span>&nbsp;<span class="op" id="5358212">=</span>&nbsp;<span class="ident" id="5358214"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358215">.</span><span class="ident" id="5358216">output</span><span class="op" id="5358222">.</span><span class="ident" id="5358223">Write</span><span class="op" id="5358228">(</span><span class="ident" id="5358229"><a href="/go/printer/printer.go.html#5357480">data</a></span><span class="op" id="5358233">[</span><span class="ident" id="5358234"><a href="/go/printer/printer.go.html#5357640">m</a></span><span class="op" id="5358235">:</span><span class="ident" id="5358236"><a href="/go/printer/printer.go.html#5357494">n</a></span><span class="op" id="5358237">]</span><span class="op" id="5358238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358244"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358245">.</span><span class="ident" id="5358246">resetSpace</span><span class="op" id="5358256">(</span><span class="op" id="5358257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5358262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5358266">case</span>&nbsp;<span class="ident" id="5358271"><a href="/go/printer/printer.go.html#5357007">inText</a></span><span class="op" id="5358277">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5358282">switch</span>&nbsp;<span class="ident" id="5358289"><a href="/go/printer/printer.go.html#5357652">b</a></span>&nbsp;<span class="op" id="5358291">{</span><br>
<span class="lineno">1170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5358296">case</span>&nbsp;<span class="string" id="5358301">&#39;\t&#39;</span><span class="op" id="5358305">,</span>&nbsp;<span class="string" id="5358307">&#39;&nbsp;&#39;</span><span class="op" id="5358310">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358316">_</span><span class="op" id="5358317">,</span>&nbsp;<span class="ident" id="5358319"><a href="/go/printer/printer.go.html#5357501">err</a></span>&nbsp;<span class="op" id="5358323">=</span>&nbsp;<span class="ident" id="5358325"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358326">.</span><span class="ident" id="5358327">output</span><span class="op" id="5358333">.</span><span class="ident" id="5358334">Write</span><span class="op" id="5358339">(</span><span class="ident" id="5358340"><a href="/go/printer/printer.go.html#5357480">data</a></span><span class="op" id="5358344">[</span><span class="ident" id="5358345"><a href="/go/printer/printer.go.html#5357640">m</a></span><span class="op" id="5358346">:</span><span class="ident" id="5358347"><a href="/go/printer/printer.go.html#5357494">n</a></span><span class="op" id="5358348">]</span><span class="op" id="5358349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358355"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358356">.</span><span class="ident" id="5358357">resetSpace</span><span class="op" id="5358367">(</span><span class="op" id="5358368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358374"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358375">.</span><span class="ident" id="5358376">space</span>&nbsp;<span class="op" id="5358382">=</span>&nbsp;<span class="builtinfunc" id="5358384">append</span><span class="op" id="5358390">(</span><span class="ident" id="5358391"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358392">.</span><span class="ident" id="5358393">space</span><span class="op" id="5358398">,</span>&nbsp;<span class="ident" id="5358400"><a href="/go/printer/printer.go.html#5357652">b</a></span><span class="op" id="5358401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5358406">case</span>&nbsp;<span class="string" id="5358411">&#39;\n&#39;</span><span class="op" id="5358415">,</span>&nbsp;<span class="string" id="5358417">&#39;\f&#39;</span><span class="op" id="5358421">:</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358427">_</span><span class="op" id="5358428">,</span>&nbsp;<span class="ident" id="5358430"><a href="/go/printer/printer.go.html#5357501">err</a></span>&nbsp;<span class="op" id="5358434">=</span>&nbsp;<span class="ident" id="5358436"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358437">.</span><span class="ident" id="5358438">output</span><span class="op" id="5358444">.</span><span class="ident" id="5358445">Write</span><span class="op" id="5358450">(</span><span class="ident" id="5358451"><a href="/go/printer/printer.go.html#5357480">data</a></span><span class="op" id="5358455">[</span><span class="ident" id="5358456"><a href="/go/printer/printer.go.html#5357640">m</a></span><span class="op" id="5358457">:</span><span class="ident" id="5358458"><a href="/go/printer/printer.go.html#5357494">n</a></span><span class="op" id="5358459">]</span><span class="op" id="5358460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358466"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358467">.</span><span class="ident" id="5358468">resetSpace</span><span class="op" id="5358478">(</span><span class="op" id="5358479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358485">_</span><span class="op" id="5358486">,</span>&nbsp;<span class="ident" id="5358488"><a href="/go/printer/printer.go.html#5357501">err</a></span>&nbsp;<span class="op" id="5358492">=</span>&nbsp;<span class="ident" id="5358494"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358495">.</span><span class="ident" id="5358496">output</span><span class="op" id="5358502">.</span><span class="ident" id="5358503">Write</span><span class="op" id="5358508">(</span><span class="ident" id="5358509"><a href="/go/printer/printer.go.html#5357431">aNewline</a></span><span class="op" id="5358517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5358522">case</span>&nbsp;<span class="ident" id="5358527"><a href="/go/printer/printer.go.html#5324682">tabwriter</a></span><span class="op" id="5358536">.</span><span class="ident" id="5358537">Escape</span><span class="op" id="5358543">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358549">_</span><span class="op" id="5358550">,</span>&nbsp;<span class="ident" id="5358552"><a href="/go/printer/printer.go.html#5357501">err</a></span>&nbsp;<span class="op" id="5358556">=</span>&nbsp;<span class="ident" id="5358558"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358559">.</span><span class="ident" id="5358560">output</span><span class="op" id="5358566">.</span><span class="ident" id="5358567">Write</span><span class="op" id="5358572">(</span><span class="ident" id="5358573"><a href="/go/printer/printer.go.html#5357480">data</a></span><span class="op" id="5358577">[</span><span class="ident" id="5358578"><a href="/go/printer/printer.go.html#5357640">m</a></span><span class="op" id="5358579">:</span><span class="ident" id="5358580"><a href="/go/printer/printer.go.html#5357494">n</a></span><span class="op" id="5358581">]</span><span class="op" id="5358582">)</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358588"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358589">.</span><span class="ident" id="5358590">state</span>&nbsp;<span class="op" id="5358596">=</span>&nbsp;<span class="ident" id="5358598"><a href="/go/printer/printer.go.html#5356944">inEscape</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358611"><a href="/go/printer/printer.go.html#5357640">m</a></span>&nbsp;<span class="op" id="5358613">=</span>&nbsp;<span class="ident" id="5358615"><a href="/go/printer/printer.go.html#5357494">n</a></span>&nbsp;<span class="op" id="5358617">+</span>&nbsp;<span class="num" id="5358619">1</span>&nbsp;<span class="comment" id="5358621">//&nbsp;+1:&nbsp;skip&nbsp;tabwriter.Escape</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5358653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5358657">default</span><span class="op" id="5358664">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5358669">panic</span><span class="op" id="5358674">(</span><span class="string" id="5358675">&#34;unreachable&#34;</span><span class="op" id="5358688">)</span><br>
<span class="lineno">1185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5358692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5358696">if</span>&nbsp;<span class="ident" id="5358699"><a href="/go/printer/printer.go.html#5357501">err</a></span>&nbsp;<span class="op" id="5358703">!=</span>&nbsp;<span class="ident" id="5358706">nil</span>&nbsp;<span class="op" id="5358710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5358715">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5358724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5358727">}</span><br>
<span class="lineno">1190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358730"><a href="/go/printer/printer.go.html#5357494">n</a></span>&nbsp;<span class="op" id="5358732">=</span>&nbsp;<span class="builtinfunc" id="5358734">len</span><span class="op" id="5358737">(</span><span class="ident" id="5358738"><a href="/go/printer/printer.go.html#5357480">data</a></span><span class="op" id="5358742">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5358746">switch</span>&nbsp;<span class="ident" id="5358753"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358754">.</span><span class="ident" id="5358755">state</span>&nbsp;<span class="op" id="5358761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5358764">case</span>&nbsp;<span class="ident" id="5358769"><a href="/go/printer/printer.go.html#5356944">inEscape</a></span><span class="op" id="5358777">,</span>&nbsp;<span class="ident" id="5358779"><a href="/go/printer/printer.go.html#5357007">inText</a></span><span class="op" id="5358785">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358789">_</span><span class="op" id="5358790">,</span>&nbsp;<span class="ident" id="5358792"><a href="/go/printer/printer.go.html#5357501">err</a></span>&nbsp;<span class="op" id="5358796">=</span>&nbsp;<span class="ident" id="5358798"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358799">.</span><span class="ident" id="5358800">output</span><span class="op" id="5358806">.</span><span class="ident" id="5358807">Write</span><span class="op" id="5358812">(</span><span class="ident" id="5358813"><a href="/go/printer/printer.go.html#5357480">data</a></span><span class="op" id="5358817">[</span><span class="ident" id="5358818"><a href="/go/printer/printer.go.html#5357640">m</a></span><span class="op" id="5358819">:</span><span class="ident" id="5358820"><a href="/go/printer/printer.go.html#5357494">n</a></span><span class="op" id="5358821">]</span><span class="op" id="5358822">)</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5358826"><a href="/go/printer/printer.go.html#5357462">p</a></span><span class="op" id="5358827">.</span><span class="ident" id="5358828">resetSpace</span><span class="op" id="5358838">(</span><span class="op" id="5358839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5358842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5358846">return</span><br>
<span class="lineno"></span><span class="op" id="5358853">}</span><br>
<span class="lineno">1200</span><br>
<span class="lineno"></span><span class="comment" id="5358856">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5358936">//&nbsp;Public&nbsp;interface</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5358957">//&nbsp;A&nbsp;Mode&nbsp;value&nbsp;is&nbsp;a&nbsp;set&nbsp;of&nbsp;flags&nbsp;(or&nbsp;0).&nbsp;They&nbsp;control&nbsp;printing.</span><br>
<span class="lineno">1205</span><span class="keyword" id="5359022">type</span>&nbsp;<span class="ident" id="5359027">Mode</span>&nbsp;<span class="builtintype" id="5359032">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5359038">const</span>&nbsp;<span class="op" id="5359044">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5359047">RawFormat</span>&nbsp;<span class="ident" id="5359057"><a href="/go/printer/printer.go.html#5359027">Mode</a></span>&nbsp;<span class="op" id="5359062">=</span>&nbsp;<span class="num" id="5359064">1</span>&nbsp;<span class="op" id="5359066">&lt;&lt;</span>&nbsp;<span class="ident" id="5359069">iota</span>&nbsp;<span class="comment" id="5359074">//&nbsp;do&nbsp;not&nbsp;use&nbsp;a&nbsp;tabwriter;&nbsp;if&nbsp;set,&nbsp;UseSpaces&nbsp;is&nbsp;ignored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5359131">TabIndent</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5359158">//&nbsp;use&nbsp;tabs&nbsp;for&nbsp;indentation&nbsp;independent&nbsp;of&nbsp;UseSpaces</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5359212">UseSpaces</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5359239">//&nbsp;use&nbsp;spaces&nbsp;instead&nbsp;of&nbsp;tabs&nbsp;for&nbsp;alignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5359284">SourcePos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5359311">//&nbsp;emit&nbsp;//line&nbsp;comments&nbsp;to&nbsp;preserve&nbsp;original&nbsp;source&nbsp;positions</span><br>
<span class="lineno"></span><span class="op" id="5359373">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5359376">//&nbsp;A&nbsp;Config&nbsp;node&nbsp;controls&nbsp;the&nbsp;output&nbsp;of&nbsp;Fprint.</span><br>
<span class="lineno">1215</span><span class="keyword" id="5359424">type</span>&nbsp;<span class="ident" id="5359429">Config</span>&nbsp;<span class="keyword" id="5359436">struct</span>&nbsp;<span class="op" id="5359443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5359446">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5359455"><a href="/go/printer/printer.go.html#5359027">Mode</a></span>&nbsp;<span class="comment" id="5359460">//&nbsp;default:&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5359475">Tabwidth</span>&nbsp;<span class="builtintype" id="5359484">int</span>&nbsp;&nbsp;<span class="comment" id="5359489">//&nbsp;default:&nbsp;8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5359504">Indent</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5359513">int</span>&nbsp;&nbsp;<span class="comment" id="5359518">//&nbsp;default:&nbsp;0&nbsp;(all&nbsp;code&nbsp;is&nbsp;indented&nbsp;at&nbsp;least&nbsp;by&nbsp;this&nbsp;much)</span><br>
<span class="lineno"></span><span class="op" id="5359577">}</span><br>
<span class="lineno">1220</span><br>
<span class="lineno"></span><span class="comment" id="5359580">//&nbsp;fprint&nbsp;implements&nbsp;Fprint&nbsp;and&nbsp;takes&nbsp;a&nbsp;nodesSizes&nbsp;map&nbsp;for&nbsp;setting&nbsp;up&nbsp;the&nbsp;printer&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="5359669">func</span>&nbsp;<span class="op" id="5359674">(</span><span class="ident" id="5359675">cfg</span>&nbsp;<span class="op" id="5359679">*</span><span class="ident" id="5359680"><a href="/go/printer/printer.go.html#5359429">Config</a></span><span class="op" id="5359686">)</span>&nbsp;<span class="ident" id="5359688">fprint</span><span class="op" id="5359694">(</span><span class="ident" id="5359695">output</span>&nbsp;<span class="ident" id="5359702"><a href="/go/printer/printer.go.html#5324648">io</a></span><span class="op" id="5359704">.</span><span class="ident" id="5359705">Writer</span><span class="op" id="5359711">,</span>&nbsp;<span class="ident" id="5359713">fset</span>&nbsp;<span class="op" id="5359718">*</span><span class="ident" id="5359719"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5359724">.</span><span class="ident" id="5359725">FileSet</span><span class="op" id="5359732">,</span>&nbsp;<span class="ident" id="5359734">node</span>&nbsp;<span class="keyword" id="5359739">interface</span><span class="op" id="5359748">{</span><span class="op" id="5359749">}</span><span class="op" id="5359750">,</span>&nbsp;<span class="ident" id="5359752">nodeSizes</span>&nbsp;<span class="keyword" id="5359762">map</span><span class="op" id="5359765">[</span><span class="ident" id="5359766"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5359769">.</span><span class="ident" id="5359770">Node</span><span class="op" id="5359774">]</span><span class="builtintype" id="5359775">int</span><span class="op" id="5359778">)</span>&nbsp;<span class="op" id="5359780">(</span><span class="ident" id="5359781">err</span>&nbsp;<span class="builtintype" id="5359785">error</span><span class="op" id="5359790">)</span>&nbsp;<span class="op" id="5359792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5359795">//&nbsp;print&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5359810">var</span>&nbsp;<span class="ident" id="5359814">p</span>&nbsp;<span class="ident" id="5359816"><a href="/go/printer/printer.go.html#5325702">printer</a></span><br>
<span class="lineno">1225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5359825"><a href="/go/printer/printer.go.html#5359814">p</a></span><span class="op" id="5359826">.</span><span class="ident" id="5359827">init</span><span class="op" id="5359831">(</span><span class="ident" id="5359832"><a href="/go/printer/printer.go.html#5359675">cfg</a></span><span class="op" id="5359835">,</span>&nbsp;<span class="ident" id="5359837"><a href="/go/printer/printer.go.html#5359713">fset</a></span><span class="op" id="5359841">,</span>&nbsp;<span class="ident" id="5359843"><a href="/go/printer/printer.go.html#5359752">nodeSizes</a></span><span class="op" id="5359852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5359855">if</span>&nbsp;<span class="ident" id="5359858"><a href="/go/printer/printer.go.html#5359781">err</a></span>&nbsp;<span class="op" id="5359862">=</span>&nbsp;<span class="ident" id="5359864"><a href="/go/printer/printer.go.html#5359814">p</a></span><span class="op" id="5359865">.</span><span class="ident" id="5359866">printNode</span><span class="op" id="5359875">(</span><span class="ident" id="5359876"><a href="/go/printer/printer.go.html#5359734">node</a></span><span class="op" id="5359880">)</span><span class="op" id="5359881">;</span>&nbsp;<span class="ident" id="5359883"><a href="/go/printer/printer.go.html#5359781">err</a></span>&nbsp;<span class="op" id="5359887">!=</span>&nbsp;<span class="ident" id="5359890">nil</span>&nbsp;<span class="op" id="5359894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5359898">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5359906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5359909">//&nbsp;print&nbsp;outstanding&nbsp;comments</span><br>
<span class="lineno">1230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5359940"><a href="/go/printer/printer.go.html#5359814">p</a></span><span class="op" id="5359941">.</span><span class="ident" id="5359942">impliedSemi</span>&nbsp;<span class="op" id="5359954">=</span>&nbsp;<span class="builtintype" id="5359956">false</span>&nbsp;<span class="comment" id="5359962">//&nbsp;EOF&nbsp;acts&nbsp;like&nbsp;a&nbsp;newline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5359990"><a href="/go/printer/printer.go.html#5359814">p</a></span><span class="op" id="5359991">.</span><span class="ident" id="5359992">flush</span><span class="op" id="5359997">(</span><span class="ident" id="5359998"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5360003">.</span><span class="ident" id="5360004">Position</span><span class="op" id="5360012">{</span><span class="ident" id="5360013">Offset</span><span class="op" id="5360019">:</span>&nbsp;<span class="ident" id="5360021"><a href="/go/printer/printer.go.html#5324835">infinity</a></span><span class="op" id="5360029">,</span>&nbsp;<span class="ident" id="5360031">Line</span><span class="op" id="5360035">:</span>&nbsp;<span class="ident" id="5360037"><a href="/go/printer/printer.go.html#5324835">infinity</a></span><span class="op" id="5360045">}</span><span class="op" id="5360046">,</span>&nbsp;<span class="ident" id="5360048"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5360053">.</span><span class="ident" id="5360054">EOF</span><span class="op" id="5360057">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5360061">//&nbsp;redirect&nbsp;output&nbsp;through&nbsp;a&nbsp;trimmer&nbsp;to&nbsp;eliminate&nbsp;trailing&nbsp;whitespace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5360132">//&nbsp;(Input&nbsp;to&nbsp;a&nbsp;tabwriter&nbsp;must&nbsp;be&nbsp;untrimmed&nbsp;since&nbsp;trailing&nbsp;tabs&nbsp;provide</span><br>
<span class="lineno">1235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5360204">//&nbsp;formatting&nbsp;information.&nbsp;The&nbsp;tabwriter&nbsp;could&nbsp;provide&nbsp;trimming</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5360269">//&nbsp;functionality&nbsp;but&nbsp;no&nbsp;tabwriter&nbsp;is&nbsp;used&nbsp;when&nbsp;RawFormat&nbsp;is&nbsp;set.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5360336"><a href="/go/printer/printer.go.html#5359695">output</a></span>&nbsp;<span class="op" id="5360343">=</span>&nbsp;<span class="op" id="5360345">&amp;</span><span class="ident" id="5360346"><a href="/go/printer/printer.go.html#5356746">trimmer</a></span><span class="op" id="5360353">{</span><span class="ident" id="5360354">output</span><span class="op" id="5360360">:</span>&nbsp;<span class="ident" id="5360362"><a href="/go/printer/printer.go.html#5359695">output</a></span><span class="op" id="5360368">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5360372">//&nbsp;redirect&nbsp;output&nbsp;through&nbsp;a&nbsp;tabwriter&nbsp;if&nbsp;necessary</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5360425">if</span>&nbsp;<span class="ident" id="5360428"><a href="/go/printer/printer.go.html#5359675">cfg</a></span><span class="op" id="5360431">.</span><span class="ident" id="5360432">Mode</span><span class="op" id="5360436">&amp;</span><span class="ident" id="5360437"><a href="/go/printer/printer.go.html#5359047">RawFormat</a></span>&nbsp;<span class="op" id="5360447">==</span>&nbsp;<span class="num" id="5360450">0</span>&nbsp;<span class="op" id="5360452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5360456">minwidth</span>&nbsp;<span class="op" id="5360465">:=</span>&nbsp;<span class="ident" id="5360468"><a href="/go/printer/printer.go.html#5359675">cfg</a></span><span class="op" id="5360471">.</span><span class="ident" id="5360472">Tabwidth</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5360484">padchar</span>&nbsp;<span class="op" id="5360492">:=</span>&nbsp;<span class="builtintype" id="5360495">byte</span><span class="op" id="5360499">(</span><span class="string" id="5360500">&#39;\t&#39;</span><span class="op" id="5360504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5360508">if</span>&nbsp;<span class="ident" id="5360511"><a href="/go/printer/printer.go.html#5359675">cfg</a></span><span class="op" id="5360514">.</span><span class="ident" id="5360515">Mode</span><span class="op" id="5360519">&amp;</span><span class="ident" id="5360520"><a href="/go/printer/printer.go.html#5359212">UseSpaces</a></span>&nbsp;<span class="op" id="5360530">!=</span>&nbsp;<span class="num" id="5360533">0</span>&nbsp;<span class="op" id="5360535">{</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5360540"><a href="/go/printer/printer.go.html#5360484">padchar</a></span>&nbsp;<span class="op" id="5360548">=</span>&nbsp;<span class="string" id="5360550">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5360556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5360561">twmode</span>&nbsp;<span class="op" id="5360568">:=</span>&nbsp;<span class="ident" id="5360571"><a href="/go/printer/printer.go.html#5324682">tabwriter</a></span><span class="op" id="5360580">.</span><span class="ident" id="5360581">DiscardEmptyColumns</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5360603">if</span>&nbsp;<span class="ident" id="5360606"><a href="/go/printer/printer.go.html#5359675">cfg</a></span><span class="op" id="5360609">.</span><span class="ident" id="5360610">Mode</span><span class="op" id="5360614">&amp;</span><span class="ident" id="5360615"><a href="/go/printer/printer.go.html#5359131">TabIndent</a></span>&nbsp;<span class="op" id="5360625">!=</span>&nbsp;<span class="num" id="5360628">0</span>&nbsp;<span class="op" id="5360630">{</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5360635"><a href="/go/printer/printer.go.html#5360456">minwidth</a></span>&nbsp;<span class="op" id="5360644">=</span>&nbsp;<span class="num" id="5360646">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5360651"><a href="/go/printer/printer.go.html#5360561">twmode</a></span>&nbsp;<span class="op" id="5360658">|=</span>&nbsp;<span class="ident" id="5360661"><a href="/go/printer/printer.go.html#5324682">tabwriter</a></span><span class="op" id="5360670">.</span><span class="ident" id="5360671">TabIndent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5360683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5360688"><a href="/go/printer/printer.go.html#5359695">output</a></span>&nbsp;<span class="op" id="5360695">=</span>&nbsp;<span class="ident" id="5360697"><a href="/go/printer/printer.go.html#5324682">tabwriter</a></span><span class="op" id="5360706">.</span><span class="ident" id="5360707">NewWriter</span><span class="op" id="5360716">(</span><span class="ident" id="5360717"><a href="/go/printer/printer.go.html#5359695">output</a></span><span class="op" id="5360723">,</span>&nbsp;<span class="ident" id="5360725"><a href="/go/printer/printer.go.html#5360456">minwidth</a></span><span class="op" id="5360733">,</span>&nbsp;<span class="ident" id="5360735"><a href="/go/printer/printer.go.html#5359675">cfg</a></span><span class="op" id="5360738">.</span><span class="ident" id="5360739">Tabwidth</span><span class="op" id="5360747">,</span>&nbsp;<span class="num" id="5360749">1</span><span class="op" id="5360750">,</span>&nbsp;<span class="ident" id="5360752"><a href="/go/printer/printer.go.html#5360484">padchar</a></span><span class="op" id="5360759">,</span>&nbsp;<span class="ident" id="5360761"><a href="/go/printer/printer.go.html#5360561">twmode</a></span><span class="op" id="5360767">)</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5360770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5360774">//&nbsp;write&nbsp;printer&nbsp;result&nbsp;via&nbsp;tabwriter/trimmer&nbsp;to&nbsp;output</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5360831">if</span>&nbsp;<span class="ident" id="5360834">_</span><span class="op" id="5360835">,</span>&nbsp;<span class="ident" id="5360837"><a href="/go/printer/printer.go.html#5359781">err</a></span>&nbsp;<span class="op" id="5360841">=</span>&nbsp;<span class="ident" id="5360843"><a href="/go/printer/printer.go.html#5359695">output</a></span><span class="op" id="5360849">.</span><span class="ident" id="5360850">Write</span><span class="op" id="5360855">(</span><span class="ident" id="5360856"><a href="/go/printer/printer.go.html#5359814">p</a></span><span class="op" id="5360857">.</span><span class="ident" id="5360858">output</span><span class="op" id="5360864">)</span><span class="op" id="5360865">;</span>&nbsp;<span class="ident" id="5360867"><a href="/go/printer/printer.go.html#5359781">err</a></span>&nbsp;<span class="op" id="5360871">!=</span>&nbsp;<span class="ident" id="5360874">nil</span>&nbsp;<span class="op" id="5360878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5360882">return</span><br>
<span class="lineno">1260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5360890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5360894">//&nbsp;flush&nbsp;tabwriter,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5360922">if</span>&nbsp;<span class="ident" id="5360925">tw</span><span class="op" id="5360927">,</span>&nbsp;<span class="ident" id="5360929">_</span>&nbsp;<span class="op" id="5360931">:=</span>&nbsp;<span class="ident" id="5360934"><a href="/go/printer/printer.go.html#5359695">output</a></span><span class="op" id="5360940">.</span><span class="op" id="5360941">(</span><span class="op" id="5360942">*</span><span class="ident" id="5360943"><a href="/go/printer/printer.go.html#5324682">tabwriter</a></span><span class="op" id="5360952">.</span><span class="ident" id="5360953">Writer</span><span class="op" id="5360959">)</span><span class="op" id="5360960">;</span>&nbsp;<span class="ident" id="5360962"><a href="/go/printer/printer.go.html#5360925">tw</a></span>&nbsp;<span class="op" id="5360965">!=</span>&nbsp;<span class="ident" id="5360968">nil</span>&nbsp;<span class="op" id="5360972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5360976"><a href="/go/printer/printer.go.html#5359781">err</a></span>&nbsp;<span class="op" id="5360980">=</span>&nbsp;<span class="ident" id="5360982"><a href="/go/printer/printer.go.html#5360925">tw</a></span><span class="op" id="5360984">.</span><span class="ident" id="5360985">Flush</span><span class="op" id="5360990">(</span><span class="op" id="5360991">)</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5360994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5360998">return</span><br>
<span class="lineno"></span><span class="op" id="5361005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1270</span><span class="comment" id="5361008">//&nbsp;A&nbsp;CommentedNode&nbsp;bundles&nbsp;an&nbsp;AST&nbsp;node&nbsp;and&nbsp;corresponding&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="5361075">//&nbsp;It&nbsp;may&nbsp;be&nbsp;provided&nbsp;as&nbsp;argument&nbsp;to&nbsp;any&nbsp;of&nbsp;the&nbsp;Fprint&nbsp;functions.</span><br>
<span class="lineno"></span><span class="comment" id="5361141">//</span><br>
<span class="lineno"></span><span class="keyword" id="5361144">type</span>&nbsp;<span class="ident" id="5361149">CommentedNode</span>&nbsp;<span class="keyword" id="5361163">struct</span>&nbsp;<span class="op" id="5361170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5361173">Node</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5361182">interface</span><span class="op" id="5361191">{</span><span class="op" id="5361192">}</span>&nbsp;<span class="comment" id="5361194">//&nbsp;*ast.File,&nbsp;or&nbsp;ast.Expr,&nbsp;ast.Decl,&nbsp;ast.Spec,&nbsp;or&nbsp;ast.Stmt</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5361254">Comments</span>&nbsp;<span class="op" id="5361263">[</span><span class="op" id="5361264">]</span><span class="op" id="5361265">*</span><span class="ident" id="5361266"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5361269">.</span><span class="ident" id="5361270">CommentGroup</span><br>
<span class="lineno"></span><span class="op" id="5361283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5361286">//&nbsp;Fprint&nbsp;&#34;pretty-prints&#34;&nbsp;an&nbsp;AST&nbsp;node&nbsp;to&nbsp;output&nbsp;for&nbsp;a&nbsp;given&nbsp;configuration&nbsp;cfg.</span><br>
<span class="lineno"></span><span class="comment" id="5361365">//&nbsp;Position&nbsp;information&nbsp;is&nbsp;interpreted&nbsp;relative&nbsp;to&nbsp;the&nbsp;file&nbsp;set&nbsp;fset.</span><br>
<span class="lineno">1280</span><span class="comment" id="5361435">//&nbsp;The&nbsp;node&nbsp;type&nbsp;must&nbsp;be&nbsp;*ast.File,&nbsp;*CommentedNode,&nbsp;[]ast.Decl,&nbsp;[]ast.Stmt,</span><br>
<span class="lineno"></span><span class="comment" id="5361511">//&nbsp;or&nbsp;assignment-compatible&nbsp;to&nbsp;ast.Expr,&nbsp;ast.Decl,&nbsp;ast.Spec,&nbsp;or&nbsp;ast.Stmt.</span><br>
<span class="lineno"></span><span class="comment" id="5361585">//</span><br>
<span class="lineno"></span><span class="keyword" id="5361588">func</span>&nbsp;<span class="op" id="5361593">(</span><span class="ident" id="5361594">cfg</span>&nbsp;<span class="op" id="5361598">*</span><span class="ident" id="5361599"><a href="/go/printer/printer.go.html#5359429">Config</a></span><span class="op" id="5361605">)</span>&nbsp;<span class="ident" id="5361607">Fprint</span><span class="op" id="5361613">(</span><span class="ident" id="5361614">output</span>&nbsp;<span class="ident" id="5361621"><a href="/go/printer/printer.go.html#5324648">io</a></span><span class="op" id="5361623">.</span><span class="ident" id="5361624">Writer</span><span class="op" id="5361630">,</span>&nbsp;<span class="ident" id="5361632">fset</span>&nbsp;<span class="op" id="5361637">*</span><span class="ident" id="5361638"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5361643">.</span><span class="ident" id="5361644">FileSet</span><span class="op" id="5361651">,</span>&nbsp;<span class="ident" id="5361653">node</span>&nbsp;<span class="keyword" id="5361658">interface</span><span class="op" id="5361667">{</span><span class="op" id="5361668">}</span><span class="op" id="5361669">)</span>&nbsp;<span class="builtintype" id="5361671">error</span>&nbsp;<span class="op" id="5361677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5361680">return</span>&nbsp;<span class="ident" id="5361687"><a href="/go/printer/printer.go.html#5361594">cfg</a></span><span class="op" id="5361690">.</span><span class="ident" id="5361691">fprint</span><span class="op" id="5361697">(</span><span class="ident" id="5361698"><a href="/go/printer/printer.go.html#5361614">output</a></span><span class="op" id="5361704">,</span>&nbsp;<span class="ident" id="5361706"><a href="/go/printer/printer.go.html#5361632">fset</a></span><span class="op" id="5361710">,</span>&nbsp;<span class="ident" id="5361712"><a href="/go/printer/printer.go.html#5361653">node</a></span><span class="op" id="5361716">,</span>&nbsp;<span class="builtinfunc" id="5361718">make</span><span class="op" id="5361722">(</span><span class="keyword" id="5361723">map</span><span class="op" id="5361726">[</span><span class="ident" id="5361727"><a href="/go/printer/printer.go.html#5324626">ast</a></span><span class="op" id="5361730">.</span><span class="ident" id="5361731">Node</span><span class="op" id="5361735">]</span><span class="builtintype" id="5361736">int</span><span class="op" id="5361739">)</span><span class="op" id="5361740">)</span><br>
<span class="lineno">1285</span><span class="op" id="5361742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5361745">//&nbsp;Fprint&nbsp;&#34;pretty-prints&#34;&nbsp;an&nbsp;AST&nbsp;node&nbsp;to&nbsp;output.</span><br>
<span class="lineno"></span><span class="comment" id="5361794">//&nbsp;It&nbsp;calls&nbsp;Config.Fprint&nbsp;with&nbsp;default&nbsp;settings.</span><br>
<span class="lineno"></span><span class="comment" id="5361843">//</span><br>
<span class="lineno">1290</span><span class="keyword" id="5361846">func</span>&nbsp;<span class="ident" id="5361851">Fprint</span><span class="op" id="5361857">(</span><span class="ident" id="5361858">output</span>&nbsp;<span class="ident" id="5361865"><a href="/go/printer/printer.go.html#5324648">io</a></span><span class="op" id="5361867">.</span><span class="ident" id="5361868">Writer</span><span class="op" id="5361874">,</span>&nbsp;<span class="ident" id="5361876">fset</span>&nbsp;<span class="op" id="5361881">*</span><span class="ident" id="5361882"><a href="/go/printer/printer.go.html#5324636">token</a></span><span class="op" id="5361887">.</span><span class="ident" id="5361888">FileSet</span><span class="op" id="5361895">,</span>&nbsp;<span class="ident" id="5361897">node</span>&nbsp;<span class="keyword" id="5361902">interface</span><span class="op" id="5361911">{</span><span class="op" id="5361912">}</span><span class="op" id="5361913">)</span>&nbsp;<span class="builtintype" id="5361915">error</span>&nbsp;<span class="op" id="5361921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5361924">return</span>&nbsp;<span class="op" id="5361931">(</span><span class="op" id="5361932">&amp;</span><span class="ident" id="5361933"><a href="/go/printer/printer.go.html#5359429">Config</a></span><span class="op" id="5361939">{</span><span class="ident" id="5361940">Tabwidth</span><span class="op" id="5361948">:</span>&nbsp;<span class="num" id="5361950">8</span><span class="op" id="5361951">}</span><span class="op" id="5361952">)</span><span class="op" id="5361953">.</span><span class="ident" id="5361954">Fprint</span><span class="op" id="5361960">(</span><span class="ident" id="5361961"><a href="/go/printer/printer.go.html#5361858">output</a></span><span class="op" id="5361967">,</span>&nbsp;<span class="ident" id="5361969"><a href="/go/printer/printer.go.html#5361876">fset</a></span><span class="op" id="5361973">,</span>&nbsp;<span class="ident" id="5361975"><a href="/go/printer/printer.go.html#5361897">node</a></span><span class="op" id="5361979">)</span><br>
<span class="lineno"></span><span class="op" id="5361981">}</span>
</div>
</body>
</html>
