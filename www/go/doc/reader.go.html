<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5746499">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5746554">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5746608">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5746659">package</span>&nbsp;<span class="ident" id="5746667">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5746672">import</span>&nbsp;<span class="op" id="5746679">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5746682">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5746692">&#34;go/token&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5746704">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5746714">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5746722">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="5746732">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5746735">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5746815">//&nbsp;function/method&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="5746839">//</span><br>
<span class="lineno"></span><span class="comment" id="5746842">//&nbsp;Internally,&nbsp;we&nbsp;treat&nbsp;functions&nbsp;like&nbsp;methods&nbsp;and&nbsp;collect&nbsp;them&nbsp;in&nbsp;method&nbsp;sets.</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="5746923">//&nbsp;A&nbsp;methodSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;methods.&nbsp;Entries&nbsp;where&nbsp;Decl&nbsp;==&nbsp;nil&nbsp;are&nbsp;conflict</span><br>
<span class="lineno"></span><span class="comment" id="5747005">//&nbsp;entries&nbsp;(more&nbsp;then&nbsp;one&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;embedding&nbsp;level).</span><br>
<span class="lineno"></span><span class="comment" id="5747087">//</span><br>
<span class="lineno"></span><span class="keyword" id="5747090">type</span>&nbsp;<span class="ident" id="5747095">methodSet</span>&nbsp;<span class="keyword" id="5747105">map</span><span class="op" id="5747108">[</span><span class="builtintype" id="5747109">string</span><span class="op" id="5747115">]</span><span class="op" id="5747116">*</span><span class="ident" id="5747117"><a href="/go/doc/doc.go.html#5726778">Func</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="5747123">//&nbsp;recvString&nbsp;returns&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;recv&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5747184">//&nbsp;form&nbsp;&#34;T&#34;,&nbsp;&#34;*T&#34;,&nbsp;or&nbsp;&#34;BADRECV&#34;&nbsp;(if&nbsp;not&nbsp;a&nbsp;proper&nbsp;receiver&nbsp;type).</span><br>
<span class="lineno"></span><span class="comment" id="5747249">//</span><br>
<span class="lineno"></span><span class="keyword" id="5747252">func</span>&nbsp;<span class="ident" id="5747257">recvString</span><span class="op" id="5747267">(</span><span class="ident" id="5747268">recv</span>&nbsp;<span class="ident" id="5747273"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5747276">.</span><span class="ident" id="5747277">Expr</span><span class="op" id="5747281">)</span>&nbsp;<span class="builtintype" id="5747283">string</span>&nbsp;<span class="op" id="5747290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5747293">switch</span>&nbsp;<span class="ident" id="5747300">t</span>&nbsp;<span class="op" id="5747302">:=</span>&nbsp;<span class="ident" id="5747305"><a href="/go/doc/reader.go.html#5747268">recv</a></span><span class="op" id="5747309">.</span><span class="op" id="5747310">(</span><span class="keyword" id="5747311">type</span><span class="op" id="5747315">)</span>&nbsp;<span class="op" id="5747317">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5747320">case</span>&nbsp;<span class="op" id="5747325">*</span><span class="ident" id="5747326"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5747329">.</span><span class="ident" id="5747330">Ident</span><span class="op" id="5747335">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5747339">return</span>&nbsp;<span class="ident" id="5747346"><a href="/go/doc/reader.go.html#5747300">t</a></span><span class="op" id="5747347">.</span><span class="ident" id="5747348">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5747354">case</span>&nbsp;<span class="op" id="5747359">*</span><span class="ident" id="5747360"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5747363">.</span><span class="ident" id="5747364">StarExpr</span><span class="op" id="5747372">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5747376">return</span>&nbsp;<span class="string" id="5747383">&#34;*&#34;</span>&nbsp;<span class="op" id="5747387">+</span>&nbsp;<span class="ident" id="5747389"><a href="/go/doc/reader.go.html#5747257">recvString</a></span><span class="op" id="5747399">(</span><span class="ident" id="5747400"><a href="/go/doc/reader.go.html#5747300">t</a></span><span class="op" id="5747401">.</span><span class="ident" id="5747402">X</span><span class="op" id="5747403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5747406">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5747409">return</span>&nbsp;<span class="string" id="5747416">&#34;BADRECV&#34;</span><br>
<span class="lineno"></span><span class="op" id="5747426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5747429">//&nbsp;set&nbsp;creates&nbsp;the&nbsp;corresponding&nbsp;Func&nbsp;for&nbsp;f&nbsp;and&nbsp;adds&nbsp;it&nbsp;to&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="5747494">//&nbsp;If&nbsp;there&nbsp;are&nbsp;multiple&nbsp;f&#39;s&nbsp;with&nbsp;the&nbsp;same&nbsp;name,&nbsp;set&nbsp;keeps&nbsp;the&nbsp;first</span><br>
<span class="lineno">40</span><span class="comment" id="5747563">//&nbsp;one&nbsp;with&nbsp;documentation;&nbsp;conflicts&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="5747613">//</span><br>
<span class="lineno"></span><span class="keyword" id="5747616">func</span>&nbsp;<span class="op" id="5747621">(</span><span class="ident" id="5747622">mset</span>&nbsp;<span class="ident" id="5747627"><a href="/go/doc/reader.go.html#5747095">methodSet</a></span><span class="op" id="5747636">)</span>&nbsp;<span class="ident" id="5747638">set</span><span class="op" id="5747641">(</span><span class="ident" id="5747642">f</span>&nbsp;<span class="op" id="5747644">*</span><span class="ident" id="5747645"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5747648">.</span><span class="ident" id="5747649">FuncDecl</span><span class="op" id="5747657">)</span>&nbsp;<span class="op" id="5747659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5747662">name</span>&nbsp;<span class="op" id="5747667">:=</span>&nbsp;<span class="ident" id="5747670"><a href="/go/doc/reader.go.html#5747642">f</a></span><span class="op" id="5747671">.</span><span class="ident" id="5747672">Name</span><span class="op" id="5747676">.</span><span class="ident" id="5747677">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5747683">if</span>&nbsp;<span class="ident" id="5747686">g</span>&nbsp;<span class="op" id="5747688">:=</span>&nbsp;<span class="ident" id="5747691"><a href="/go/doc/reader.go.html#5747622">mset</a></span><span class="op" id="5747695">[</span><span class="ident" id="5747696"><a href="/go/doc/reader.go.html#5747662">name</a></span><span class="op" id="5747700">]</span><span class="op" id="5747701">;</span>&nbsp;<span class="ident" id="5747703"><a href="/go/doc/reader.go.html#5747686">g</a></span>&nbsp;<span class="op" id="5747705">!=</span>&nbsp;<span class="ident" id="5747708">nil</span>&nbsp;<span class="op" id="5747712">&amp;&amp;</span>&nbsp;<span class="ident" id="5747715"><a href="/go/doc/reader.go.html#5747686">g</a></span><span class="op" id="5747716">.</span><span class="ident" id="5747717">Doc</span>&nbsp;<span class="op" id="5747721">!=</span>&nbsp;<span class="string" id="5747724">&#34;&#34;</span>&nbsp;<span class="op" id="5747727">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5747731">//&nbsp;A&nbsp;function&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;has&nbsp;already&nbsp;been&nbsp;registered;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5747795">//&nbsp;since&nbsp;it&nbsp;has&nbsp;documentation,&nbsp;assume&nbsp;f&nbsp;is&nbsp;simply&nbsp;another</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5747855">//&nbsp;implementation&nbsp;and&nbsp;ignore&nbsp;it.&nbsp;This&nbsp;does&nbsp;not&nbsp;happen&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5747918">//&nbsp;caller&nbsp;is&nbsp;using&nbsp;go/build.ScanDir&nbsp;to&nbsp;determine&nbsp;the&nbsp;list&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5747981">//&nbsp;files&nbsp;implementing&nbsp;a&nbsp;package.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5748016">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5748024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5748027">//&nbsp;function&nbsp;doesn&#39;t&nbsp;exist&nbsp;or&nbsp;has&nbsp;no&nbsp;documentation;&nbsp;use&nbsp;f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5748085">recv</span>&nbsp;<span class="op" id="5748090">:=</span>&nbsp;<span class="string" id="5748093">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5748097">if</span>&nbsp;<span class="ident" id="5748100"><a href="/go/doc/reader.go.html#5747642">f</a></span><span class="op" id="5748101">.</span><span class="ident" id="5748102">Recv</span>&nbsp;<span class="op" id="5748107">!=</span>&nbsp;<span class="ident" id="5748110">nil</span>&nbsp;<span class="op" id="5748114">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5748118">var</span>&nbsp;<span class="ident" id="5748122">typ</span>&nbsp;<span class="ident" id="5748126"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5748129">.</span><span class="ident" id="5748130">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5748137">//&nbsp;be&nbsp;careful&nbsp;in&nbsp;case&nbsp;of&nbsp;incorrect&nbsp;ASTs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5748179">if</span>&nbsp;<span class="ident" id="5748182">list</span>&nbsp;<span class="op" id="5748187">:=</span>&nbsp;<span class="ident" id="5748190"><a href="/go/doc/reader.go.html#5747642">f</a></span><span class="op" id="5748191">.</span><span class="ident" id="5748192">Recv</span><span class="op" id="5748196">.</span><span class="ident" id="5748197">List</span><span class="op" id="5748201">;</span>&nbsp;<span class="builtinfunc" id="5748203">len</span><span class="op" id="5748206">(</span><span class="ident" id="5748207"><a href="/go/doc/reader.go.html#5748182">list</a></span><span class="op" id="5748211">)</span>&nbsp;<span class="op" id="5748213">==</span>&nbsp;<span class="num" id="5748216">1</span>&nbsp;<span class="op" id="5748218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5748223"><a href="/go/doc/reader.go.html#5748122">typ</a></span>&nbsp;<span class="op" id="5748227">=</span>&nbsp;<span class="ident" id="5748229"><a href="/go/doc/reader.go.html#5748182">list</a></span><span class="op" id="5748233">[</span><span class="num" id="5748234">0</span><span class="op" id="5748235">]</span><span class="op" id="5748236">.</span><span class="ident" id="5748237">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5748244">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5748248"><a href="/go/doc/reader.go.html#5748085">recv</a></span>&nbsp;<span class="op" id="5748253">=</span>&nbsp;<span class="ident" id="5748255"><a href="/go/doc/reader.go.html#5747257">recvString</a></span><span class="op" id="5748265">(</span><span class="ident" id="5748266"><a href="/go/doc/reader.go.html#5748122">typ</a></span><span class="op" id="5748269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5748272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5748275"><a href="/go/doc/reader.go.html#5747622">mset</a></span><span class="op" id="5748279">[</span><span class="ident" id="5748280"><a href="/go/doc/reader.go.html#5747662">name</a></span><span class="op" id="5748284">]</span>&nbsp;<span class="op" id="5748286">=</span>&nbsp;<span class="op" id="5748288">&amp;</span><span class="ident" id="5748289"><a href="/go/doc/doc.go.html#5726778">Func</a></span><span class="op" id="5748293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5748297">Doc</span><span class="op" id="5748300">:</span>&nbsp;&nbsp;<span class="ident" id="5748303"><a href="/go/doc/reader.go.html#5747642">f</a></span><span class="op" id="5748304">.</span><span class="ident" id="5748305">Doc</span><span class="op" id="5748308">.</span><span class="ident" id="5748309">Text</span><span class="op" id="5748313">(</span><span class="op" id="5748314">)</span><span class="op" id="5748315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5748319">Name</span><span class="op" id="5748323">:</span>&nbsp;<span class="ident" id="5748325"><a href="/go/doc/reader.go.html#5747662">name</a></span><span class="op" id="5748329">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5748333">Decl</span><span class="op" id="5748337">:</span>&nbsp;<span class="ident" id="5748339"><a href="/go/doc/reader.go.html#5747642">f</a></span><span class="op" id="5748340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5748344">Recv</span><span class="op" id="5748348">:</span>&nbsp;<span class="ident" id="5748350"><a href="/go/doc/reader.go.html#5748085">recv</a></span><span class="op" id="5748354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5748358">Orig</span><span class="op" id="5748362">:</span>&nbsp;<span class="ident" id="5748364"><a href="/go/doc/reader.go.html#5748085">recv</a></span><span class="op" id="5748368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5748371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5748374"><a href="/go/doc/reader.go.html#5747642">f</a></span><span class="op" id="5748375">.</span><span class="ident" id="5748376">Doc</span>&nbsp;<span class="op" id="5748380">=</span>&nbsp;<span class="ident" id="5748382">nil</span>&nbsp;<span class="comment" id="5748386">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno">70</span><span class="op" id="5748420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5748423">//&nbsp;add&nbsp;adds&nbsp;method&nbsp;m&nbsp;to&nbsp;the&nbsp;method&nbsp;set;&nbsp;m&nbsp;is&nbsp;ignored&nbsp;if&nbsp;the&nbsp;method&nbsp;set</span><br>
<span class="lineno"></span><span class="comment" id="5748494">//&nbsp;already&nbsp;contains&nbsp;a&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;or&nbsp;a&nbsp;higher</span><br>
<span class="lineno"></span><span class="comment" id="5748566">//&nbsp;level&nbsp;then&nbsp;m.</span><br>
<span class="lineno">75</span><span class="comment" id="5748583">//</span><br>
<span class="lineno"></span><span class="keyword" id="5748586">func</span>&nbsp;<span class="op" id="5748591">(</span><span class="ident" id="5748592">mset</span>&nbsp;<span class="ident" id="5748597"><a href="/go/doc/reader.go.html#5747095">methodSet</a></span><span class="op" id="5748606">)</span>&nbsp;<span class="ident" id="5748608">add</span><span class="op" id="5748611">(</span><span class="ident" id="5748612">m</span>&nbsp;<span class="op" id="5748614">*</span><span class="ident" id="5748615"><a href="/go/doc/doc.go.html#5726778">Func</a></span><span class="op" id="5748619">)</span>&nbsp;<span class="op" id="5748621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5748624">old</span>&nbsp;<span class="op" id="5748628">:=</span>&nbsp;<span class="ident" id="5748631"><a href="/go/doc/reader.go.html#5748592">mset</a></span><span class="op" id="5748635">[</span><span class="ident" id="5748636"><a href="/go/doc/reader.go.html#5748612">m</a></span><span class="op" id="5748637">.</span><span class="ident" id="5748638">Name</span><span class="op" id="5748642">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5748645">if</span>&nbsp;<span class="ident" id="5748648"><a href="/go/doc/reader.go.html#5748624">old</a></span>&nbsp;<span class="op" id="5748652">==</span>&nbsp;<span class="ident" id="5748655">nil</span>&nbsp;<span class="op" id="5748659">||</span>&nbsp;<span class="ident" id="5748662"><a href="/go/doc/reader.go.html#5748612">m</a></span><span class="op" id="5748663">.</span><span class="ident" id="5748664">Level</span>&nbsp;<span class="op" id="5748670">&lt;</span>&nbsp;<span class="ident" id="5748672"><a href="/go/doc/reader.go.html#5748624">old</a></span><span class="op" id="5748675">.</span><span class="ident" id="5748676">Level</span>&nbsp;<span class="op" id="5748682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5748686"><a href="/go/doc/reader.go.html#5748592">mset</a></span><span class="op" id="5748690">[</span><span class="ident" id="5748691"><a href="/go/doc/reader.go.html#5748612">m</a></span><span class="op" id="5748692">.</span><span class="ident" id="5748693">Name</span><span class="op" id="5748697">]</span>&nbsp;<span class="op" id="5748699">=</span>&nbsp;<span class="ident" id="5748701"><a href="/go/doc/reader.go.html#5748612">m</a></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5748705">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5748713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5748716">if</span>&nbsp;<span class="ident" id="5748719"><a href="/go/doc/reader.go.html#5748624">old</a></span>&nbsp;<span class="op" id="5748723">!=</span>&nbsp;<span class="ident" id="5748726">nil</span>&nbsp;<span class="op" id="5748730">&amp;&amp;</span>&nbsp;<span class="ident" id="5748733"><a href="/go/doc/reader.go.html#5748612">m</a></span><span class="op" id="5748734">.</span><span class="ident" id="5748735">Level</span>&nbsp;<span class="op" id="5748741">==</span>&nbsp;<span class="ident" id="5748744"><a href="/go/doc/reader.go.html#5748624">old</a></span><span class="op" id="5748747">.</span><span class="ident" id="5748748">Level</span>&nbsp;<span class="op" id="5748754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5748758">//&nbsp;conflict&nbsp;-&nbsp;mark&nbsp;it&nbsp;using&nbsp;a&nbsp;method&nbsp;with&nbsp;nil&nbsp;Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5748811"><a href="/go/doc/reader.go.html#5748592">mset</a></span><span class="op" id="5748815">[</span><span class="ident" id="5748816"><a href="/go/doc/reader.go.html#5748612">m</a></span><span class="op" id="5748817">.</span><span class="ident" id="5748818">Name</span><span class="op" id="5748822">]</span>&nbsp;<span class="op" id="5748824">=</span>&nbsp;<span class="op" id="5748826">&amp;</span><span class="ident" id="5748827"><a href="/go/doc/doc.go.html#5726778">Func</a></span><span class="op" id="5748831">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5748836">Name</span><span class="op" id="5748840">:</span>&nbsp;&nbsp;<span class="ident" id="5748843"><a href="/go/doc/reader.go.html#5748612">m</a></span><span class="op" id="5748844">.</span><span class="ident" id="5748845">Name</span><span class="op" id="5748849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5748854">Level</span><span class="op" id="5748859">:</span>&nbsp;<span class="ident" id="5748861"><a href="/go/doc/reader.go.html#5748612">m</a></span><span class="op" id="5748862">.</span><span class="ident" id="5748863">Level</span><span class="op" id="5748868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5748872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5748875">}</span><br>
<span class="lineno"></span><span class="op" id="5748877">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="5748880">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5748960">//&nbsp;Named&nbsp;types</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5748976">//&nbsp;baseTypeName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;base&nbsp;type&nbsp;of&nbsp;x&nbsp;(or&nbsp;&#34;&#34;)</span><br>
<span class="lineno">95</span><span class="comment" id="5749039">//&nbsp;and&nbsp;whether&nbsp;the&nbsp;type&nbsp;is&nbsp;imported&nbsp;or&nbsp;not.</span><br>
<span class="lineno"></span><span class="comment" id="5749083">//</span><br>
<span class="lineno"></span><span class="keyword" id="5749086">func</span>&nbsp;<span class="ident" id="5749091">baseTypeName</span><span class="op" id="5749103">(</span><span class="ident" id="5749104">x</span>&nbsp;<span class="ident" id="5749106"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5749109">.</span><span class="ident" id="5749110">Expr</span><span class="op" id="5749114">)</span>&nbsp;<span class="op" id="5749116">(</span><span class="ident" id="5749117">name</span>&nbsp;<span class="builtintype" id="5749122">string</span><span class="op" id="5749128">,</span>&nbsp;<span class="ident" id="5749130">imported</span>&nbsp;<span class="builtintype" id="5749139">bool</span><span class="op" id="5749143">)</span>&nbsp;<span class="op" id="5749145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749148">switch</span>&nbsp;<span class="ident" id="5749155">t</span>&nbsp;<span class="op" id="5749157">:=</span>&nbsp;<span class="ident" id="5749160"><a href="/go/doc/reader.go.html#5749104">x</a></span><span class="op" id="5749161">.</span><span class="op" id="5749162">(</span><span class="keyword" id="5749163">type</span><span class="op" id="5749167">)</span>&nbsp;<span class="op" id="5749169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749172">case</span>&nbsp;<span class="op" id="5749177">*</span><span class="ident" id="5749178"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5749181">.</span><span class="ident" id="5749182">Ident</span><span class="op" id="5749187">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749191">return</span>&nbsp;<span class="ident" id="5749198"><a href="/go/doc/reader.go.html#5749155">t</a></span><span class="op" id="5749199">.</span><span class="ident" id="5749200">Name</span><span class="op" id="5749204">,</span>&nbsp;<span class="builtintype" id="5749206">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749213">case</span>&nbsp;<span class="op" id="5749218">*</span><span class="ident" id="5749219"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5749222">.</span><span class="ident" id="5749223">SelectorExpr</span><span class="op" id="5749235">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749239">if</span>&nbsp;<span class="ident" id="5749242">_</span><span class="op" id="5749243">,</span>&nbsp;<span class="ident" id="5749245">ok</span>&nbsp;<span class="op" id="5749248">:=</span>&nbsp;<span class="ident" id="5749251"><a href="/go/doc/reader.go.html#5749155">t</a></span><span class="op" id="5749252">.</span><span class="ident" id="5749253">X</span><span class="op" id="5749254">.</span><span class="op" id="5749255">(</span><span class="op" id="5749256">*</span><span class="ident" id="5749257"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5749260">.</span><span class="ident" id="5749261">Ident</span><span class="op" id="5749266">)</span><span class="op" id="5749267">;</span>&nbsp;<span class="ident" id="5749269"><a href="/go/doc/reader.go.html#5749245">ok</a></span>&nbsp;<span class="op" id="5749272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5749277">//&nbsp;only&nbsp;possible&nbsp;for&nbsp;qualified&nbsp;type&nbsp;names;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5749323">//&nbsp;assume&nbsp;type&nbsp;is&nbsp;imported</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749353">return</span>&nbsp;<span class="ident" id="5749360"><a href="/go/doc/reader.go.html#5749155">t</a></span><span class="op" id="5749361">.</span><span class="ident" id="5749362">Sel</span><span class="op" id="5749365">.</span><span class="ident" id="5749366">Name</span><span class="op" id="5749370">,</span>&nbsp;<span class="builtintype" id="5749372">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5749379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749382">case</span>&nbsp;<span class="op" id="5749387">*</span><span class="ident" id="5749388"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5749391">.</span><span class="ident" id="5749392">StarExpr</span><span class="op" id="5749400">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749404">return</span>&nbsp;<span class="ident" id="5749411"><a href="/go/doc/reader.go.html#5749091">baseTypeName</a></span><span class="op" id="5749423">(</span><span class="ident" id="5749424"><a href="/go/doc/reader.go.html#5749155">t</a></span><span class="op" id="5749425">.</span><span class="ident" id="5749426">X</span><span class="op" id="5749427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5749430">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5749433">return</span><br>
<span class="lineno"></span><span class="op" id="5749440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5749443">//&nbsp;An&nbsp;embeddedSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;embedded&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="5749496">type</span>&nbsp;<span class="ident" id="5749501">embeddedSet</span>&nbsp;<span class="keyword" id="5749513">map</span><span class="op" id="5749516">[</span><span class="op" id="5749517">*</span><span class="ident" id="5749518"><a href="/go/doc/reader.go.html#5749710">namedType</a></span><span class="op" id="5749527">]</span><span class="builtintype" id="5749528">bool</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="5749534">//&nbsp;A&nbsp;namedType&nbsp;represents&nbsp;a&nbsp;named&nbsp;unqualified&nbsp;(package&nbsp;local,&nbsp;or&nbsp;possibly</span><br>
<span class="lineno"></span><span class="comment" id="5749608">//&nbsp;predeclared)&nbsp;type.&nbsp;The&nbsp;namedType&nbsp;for&nbsp;a&nbsp;type&nbsp;name&nbsp;is&nbsp;always&nbsp;found&nbsp;via</span><br>
<span class="lineno"></span><span class="comment" id="5749680">//&nbsp;reader.lookupType.</span><br>
<span class="lineno"></span><span class="comment" id="5749702">//</span><br>
<span class="lineno">120</span><span class="keyword" id="5749705">type</span>&nbsp;<span class="ident" id="5749710">namedType</span>&nbsp;<span class="keyword" id="5749720">struct</span>&nbsp;<span class="op" id="5749727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5749730">doc</span>&nbsp;&nbsp;<span class="builtintype" id="5749735">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5749748">//&nbsp;doc&nbsp;comment&nbsp;for&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5749773">name</span>&nbsp;<span class="builtintype" id="5749778">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5749791">//&nbsp;type&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5749805">decl</span>&nbsp;<span class="op" id="5749810">*</span><span class="ident" id="5749811"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5749814">.</span><span class="ident" id="5749815">GenDecl</span>&nbsp;<span class="comment" id="5749823">//&nbsp;nil&nbsp;if&nbsp;declaration&nbsp;hasn&#39;t&nbsp;been&nbsp;seen&nbsp;yet</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5749868">isEmbedded</span>&nbsp;<span class="builtintype" id="5749879">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5749891">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5749925">isStruct</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5749936">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5749948">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;a&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5749982">embedded</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5749993"><a href="/go/doc/reader.go.html#5749501">embeddedSet</a></span>&nbsp;<span class="comment" id="5750005">//&nbsp;true&nbsp;if&nbsp;the&nbsp;embedded&nbsp;type&nbsp;is&nbsp;a&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5750049">//&nbsp;associated&nbsp;declarations</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5750077">values</span>&nbsp;&nbsp;<span class="op" id="5750085">[</span><span class="op" id="5750086">]</span><span class="op" id="5750087">*</span><span class="ident" id="5750088"><a href="/go/doc/doc.go.html#5726163">Value</a></span>&nbsp;<span class="comment" id="5750094">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5750114">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5750122"><a href="/go/doc/reader.go.html#5747095">methodSet</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5750133">methods</span>&nbsp;<span class="ident" id="5750141"><a href="/go/doc/reader.go.html#5747095">methodSet</a></span><br>
<span class="lineno"></span><span class="op" id="5750151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="5750154">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5750234">//&nbsp;AST&nbsp;reader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5750249">//&nbsp;reader&nbsp;accumulates&nbsp;documentation&nbsp;for&nbsp;a&nbsp;single&nbsp;package.</span><br>
<span class="lineno"></span><span class="comment" id="5750307">//&nbsp;It&nbsp;modifies&nbsp;the&nbsp;AST:&nbsp;Comments&nbsp;(declaration&nbsp;documentation)</span><br>
<span class="lineno">140</span><span class="comment" id="5750368">//&nbsp;that&nbsp;have&nbsp;been&nbsp;collected&nbsp;by&nbsp;the&nbsp;reader&nbsp;are&nbsp;set&nbsp;to&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="5750425">//&nbsp;in&nbsp;the&nbsp;respective&nbsp;AST&nbsp;nodes&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;printed</span><br>
<span class="lineno"></span><span class="comment" id="5750485">//&nbsp;twice&nbsp;(once&nbsp;when&nbsp;printing&nbsp;the&nbsp;documentation&nbsp;and&nbsp;once&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="5750546">//&nbsp;printing&nbsp;the&nbsp;corresponding&nbsp;AST&nbsp;node).</span><br>
<span class="lineno"></span><span class="comment" id="5750587">//</span><br>
<span class="lineno">145</span><span class="keyword" id="5750590">type</span>&nbsp;<span class="ident" id="5750595">reader</span>&nbsp;<span class="keyword" id="5750602">struct</span>&nbsp;<span class="op" id="5750609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5750612">mode</span>&nbsp;<span class="ident" id="5750617"><a href="/go/doc/doc.go.html#5727614">Mode</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5750624">//&nbsp;package&nbsp;properties</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5750647">doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5750657">string</span>&nbsp;<span class="comment" id="5750664">//&nbsp;package&nbsp;documentation,&nbsp;if&nbsp;any</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5750698">filenames</span>&nbsp;<span class="op" id="5750708">[</span><span class="op" id="5750709">]</span><span class="builtintype" id="5750710">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5750718">notes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5750728">map</span><span class="op" id="5750731">[</span><span class="builtintype" id="5750732">string</span><span class="op" id="5750738">]</span><span class="op" id="5750739">[</span><span class="op" id="5750740">]</span><span class="op" id="5750741">*</span><span class="ident" id="5750742"><a href="/go/doc/doc.go.html#5727385">Note</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5750749">//&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5750766">imports</span>&nbsp;<span class="keyword" id="5750774">map</span><span class="op" id="5750777">[</span><span class="builtintype" id="5750778">string</span><span class="op" id="5750784">]</span><span class="builtintype" id="5750785">int</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5750790">values</span>&nbsp;&nbsp;<span class="op" id="5750798">[</span><span class="op" id="5750799">]</span><span class="op" id="5750800">*</span><span class="ident" id="5750801"><a href="/go/doc/doc.go.html#5726163">Value</a></span>&nbsp;<span class="comment" id="5750807">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5750827">types</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="5750835">map</span><span class="op" id="5750838">[</span><span class="builtintype" id="5750839">string</span><span class="op" id="5750845">]</span><span class="op" id="5750846">*</span><span class="ident" id="5750847"><a href="/go/doc/reader.go.html#5749710">namedType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5750858">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5750866"><a href="/go/doc/reader.go.html#5747095">methodSet</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5750878">//&nbsp;support&nbsp;for&nbsp;package-local&nbsp;error&nbsp;type&nbsp;declarations</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5750932">errorDecl</span>&nbsp;<span class="builtintype" id="5750942">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5750963">//&nbsp;if&nbsp;set,&nbsp;type&nbsp;&#34;error&#34;&nbsp;was&nbsp;declared&nbsp;locally</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5751009">fixlist</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5751019">[</span><span class="op" id="5751020">]</span><span class="op" id="5751021">*</span><span class="ident" id="5751022"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5751025">.</span><span class="ident" id="5751026">InterfaceType</span>&nbsp;<span class="comment" id="5751040">//&nbsp;list&nbsp;of&nbsp;interfaces&nbsp;containing&nbsp;anonymous&nbsp;field&nbsp;&#34;error&#34;</span><br>
<span class="lineno"></span><span class="op" id="5751097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5751100">func</span>&nbsp;<span class="op" id="5751105">(</span><span class="ident" id="5751106">r</span>&nbsp;<span class="op" id="5751108">*</span><span class="ident" id="5751109"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5751115">)</span>&nbsp;<span class="ident" id="5751117">isVisible</span><span class="op" id="5751126">(</span><span class="ident" id="5751127">name</span>&nbsp;<span class="builtintype" id="5751132">string</span><span class="op" id="5751138">)</span>&nbsp;<span class="builtintype" id="5751140">bool</span>&nbsp;<span class="op" id="5751145">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751148">return</span>&nbsp;<span class="ident" id="5751155"><a href="/go/doc/reader.go.html#5751106">r</a></span><span class="op" id="5751156">.</span><span class="ident" id="5751157">mode</span><span class="op" id="5751161">&amp;</span><span class="ident" id="5751162"><a href="/go/doc/doc.go.html#5727722">AllDecls</a></span>&nbsp;<span class="op" id="5751171">!=</span>&nbsp;<span class="num" id="5751174">0</span>&nbsp;<span class="op" id="5751176">||</span>&nbsp;<span class="ident" id="5751179"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5751182">.</span><span class="ident" id="5751183">IsExported</span><span class="op" id="5751193">(</span><span class="ident" id="5751194"><a href="/go/doc/reader.go.html#5751127">name</a></span><span class="op" id="5751198">)</span><br>
<span class="lineno"></span><span class="op" id="5751200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5751203">//&nbsp;lookupType&nbsp;returns&nbsp;the&nbsp;base&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="5751260">//&nbsp;If&nbsp;the&nbsp;base&nbsp;type&nbsp;has&nbsp;not&nbsp;been&nbsp;encountered&nbsp;yet,&nbsp;a&nbsp;new</span><br>
<span class="lineno">170</span><span class="comment" id="5751316">//&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;but&nbsp;no&nbsp;associated&nbsp;declaration</span><br>
<span class="lineno"></span><span class="comment" id="5751374">//&nbsp;is&nbsp;added&nbsp;to&nbsp;the&nbsp;type&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="5751403">//</span><br>
<span class="lineno"></span><span class="keyword" id="5751406">func</span>&nbsp;<span class="op" id="5751411">(</span><span class="ident" id="5751412">r</span>&nbsp;<span class="op" id="5751414">*</span><span class="ident" id="5751415"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5751421">)</span>&nbsp;<span class="ident" id="5751423">lookupType</span><span class="op" id="5751433">(</span><span class="ident" id="5751434">name</span>&nbsp;<span class="builtintype" id="5751439">string</span><span class="op" id="5751445">)</span>&nbsp;<span class="op" id="5751447">*</span><span class="ident" id="5751448"><a href="/go/doc/reader.go.html#5749710">namedType</a></span>&nbsp;<span class="op" id="5751458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751461">if</span>&nbsp;<span class="ident" id="5751464"><a href="/go/doc/reader.go.html#5751434">name</a></span>&nbsp;<span class="op" id="5751469">==</span>&nbsp;<span class="string" id="5751472">&#34;&#34;</span>&nbsp;<span class="op" id="5751475">||</span>&nbsp;<span class="ident" id="5751478"><a href="/go/doc/reader.go.html#5751434">name</a></span>&nbsp;<span class="op" id="5751483">==</span>&nbsp;<span class="string" id="5751486">&#34;_&#34;</span>&nbsp;<span class="op" id="5751490">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751494">return</span>&nbsp;<span class="ident" id="5751501">nil</span>&nbsp;<span class="comment" id="5751505">//&nbsp;no&nbsp;type&nbsp;docs&nbsp;for&nbsp;anonymous&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5751542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751545">if</span>&nbsp;<span class="ident" id="5751548">typ</span><span class="op" id="5751551">,</span>&nbsp;<span class="ident" id="5751553">found</span>&nbsp;<span class="op" id="5751559">:=</span>&nbsp;<span class="ident" id="5751562"><a href="/go/doc/reader.go.html#5751412">r</a></span><span class="op" id="5751563">.</span><span class="ident" id="5751564">types</span><span class="op" id="5751569">[</span><span class="ident" id="5751570"><a href="/go/doc/reader.go.html#5751434">name</a></span><span class="op" id="5751574">]</span><span class="op" id="5751575">;</span>&nbsp;<span class="ident" id="5751577"><a href="/go/doc/reader.go.html#5751553">found</a></span>&nbsp;<span class="op" id="5751583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751587">return</span>&nbsp;<span class="ident" id="5751594"><a href="/go/doc/reader.go.html#5751548">typ</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5751599">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5751602">//&nbsp;type&nbsp;not&nbsp;found&nbsp;-&nbsp;add&nbsp;one&nbsp;without&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5751651">typ</span>&nbsp;<span class="op" id="5751655">:=</span>&nbsp;<span class="op" id="5751658">&amp;</span><span class="ident" id="5751659"><a href="/go/doc/reader.go.html#5749710">namedType</a></span><span class="op" id="5751668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5751672">name</span><span class="op" id="5751676">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5751682"><a href="/go/doc/reader.go.html#5751434">name</a></span><span class="op" id="5751686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5751690">embedded</span><span class="op" id="5751698">:</span>&nbsp;<span class="builtinfunc" id="5751700">make</span><span class="op" id="5751704">(</span><span class="ident" id="5751705"><a href="/go/doc/reader.go.html#5749501">embeddedSet</a></span><span class="op" id="5751716">)</span><span class="op" id="5751717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5751721">funcs</span><span class="op" id="5751726">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5751731">make</span><span class="op" id="5751735">(</span><span class="ident" id="5751736"><a href="/go/doc/reader.go.html#5747095">methodSet</a></span><span class="op" id="5751745">)</span><span class="op" id="5751746">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5751750">methods</span><span class="op" id="5751757">:</span>&nbsp;&nbsp;<span class="builtinfunc" id="5751760">make</span><span class="op" id="5751764">(</span><span class="ident" id="5751765"><a href="/go/doc/reader.go.html#5747095">methodSet</a></span><span class="op" id="5751774">)</span><span class="op" id="5751775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5751778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5751781"><a href="/go/doc/reader.go.html#5751412">r</a></span><span class="op" id="5751782">.</span><span class="ident" id="5751783">types</span><span class="op" id="5751788">[</span><span class="ident" id="5751789"><a href="/go/doc/reader.go.html#5751434">name</a></span><span class="op" id="5751793">]</span>&nbsp;<span class="op" id="5751795">=</span>&nbsp;<span class="ident" id="5751797"><a href="/go/doc/reader.go.html#5751651">typ</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5751802">return</span>&nbsp;<span class="ident" id="5751809"><a href="/go/doc/reader.go.html#5751651">typ</a></span><br>
<span class="lineno"></span><span class="op" id="5751813">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="5751816">//&nbsp;recordAnonymousField&nbsp;registers&nbsp;fieldType&nbsp;as&nbsp;the&nbsp;type&nbsp;of&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="5751878">//&nbsp;anonymous&nbsp;field&nbsp;in&nbsp;the&nbsp;parent&nbsp;type.&nbsp;If&nbsp;the&nbsp;field&nbsp;is&nbsp;imported</span><br>
<span class="lineno"></span><span class="comment" id="5751942">//&nbsp;(qualified&nbsp;name)&nbsp;or&nbsp;the&nbsp;parent&nbsp;is&nbsp;nil,&nbsp;the&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="5752006">//&nbsp;The&nbsp;function&nbsp;returns&nbsp;the&nbsp;field&nbsp;name.</span><br>
<span class="lineno">195</span><span class="comment" id="5752046">//</span><br>
<span class="lineno"></span><span class="keyword" id="5752049">func</span>&nbsp;<span class="op" id="5752054">(</span><span class="ident" id="5752055">r</span>&nbsp;<span class="op" id="5752057">*</span><span class="ident" id="5752058"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5752064">)</span>&nbsp;<span class="ident" id="5752066">recordAnonymousField</span><span class="op" id="5752086">(</span><span class="ident" id="5752087">parent</span>&nbsp;<span class="op" id="5752094">*</span><span class="ident" id="5752095"><a href="/go/doc/reader.go.html#5749710">namedType</a></span><span class="op" id="5752104">,</span>&nbsp;<span class="ident" id="5752106">fieldType</span>&nbsp;<span class="ident" id="5752116"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5752119">.</span><span class="ident" id="5752120">Expr</span><span class="op" id="5752124">)</span>&nbsp;<span class="op" id="5752126">(</span><span class="ident" id="5752127">fname</span>&nbsp;<span class="builtintype" id="5752133">string</span><span class="op" id="5752139">)</span>&nbsp;<span class="op" id="5752141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5752144"><a href="/go/doc/reader.go.html#5752127">fname</a></span><span class="op" id="5752149">,</span>&nbsp;<span class="ident" id="5752151">imp</span>&nbsp;<span class="op" id="5752155">:=</span>&nbsp;<span class="ident" id="5752158"><a href="/go/doc/reader.go.html#5749091">baseTypeName</a></span><span class="op" id="5752170">(</span><span class="ident" id="5752171"><a href="/go/doc/reader.go.html#5752106">fieldType</a></span><span class="op" id="5752180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752183">if</span>&nbsp;<span class="ident" id="5752186"><a href="/go/doc/reader.go.html#5752087">parent</a></span>&nbsp;<span class="op" id="5752193">==</span>&nbsp;<span class="ident" id="5752196">nil</span>&nbsp;<span class="op" id="5752200">||</span>&nbsp;<span class="ident" id="5752203"><a href="/go/doc/reader.go.html#5752151">imp</a></span>&nbsp;<span class="op" id="5752207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752211">return</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5752219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752222">if</span>&nbsp;<span class="ident" id="5752225">ftype</span>&nbsp;<span class="op" id="5752231">:=</span>&nbsp;<span class="ident" id="5752234"><a href="/go/doc/reader.go.html#5752055">r</a></span><span class="op" id="5752235">.</span><span class="ident" id="5752236">lookupType</span><span class="op" id="5752246">(</span><span class="ident" id="5752247"><a href="/go/doc/reader.go.html#5752127">fname</a></span><span class="op" id="5752252">)</span><span class="op" id="5752253">;</span>&nbsp;<span class="ident" id="5752255"><a href="/go/doc/reader.go.html#5752225">ftype</a></span>&nbsp;<span class="op" id="5752261">!=</span>&nbsp;<span class="ident" id="5752264">nil</span>&nbsp;<span class="op" id="5752268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5752272"><a href="/go/doc/reader.go.html#5752225">ftype</a></span><span class="op" id="5752277">.</span><span class="ident" id="5752278">isEmbedded</span>&nbsp;<span class="op" id="5752289">=</span>&nbsp;<span class="builtintype" id="5752291">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5752298">_</span><span class="op" id="5752299">,</span>&nbsp;<span class="ident" id="5752301">ptr</span>&nbsp;<span class="op" id="5752305">:=</span>&nbsp;<span class="ident" id="5752308"><a href="/go/doc/reader.go.html#5752106">fieldType</a></span><span class="op" id="5752317">.</span><span class="op" id="5752318">(</span><span class="op" id="5752319">*</span><span class="ident" id="5752320"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5752323">.</span><span class="ident" id="5752324">StarExpr</span><span class="op" id="5752332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5752336"><a href="/go/doc/reader.go.html#5752087">parent</a></span><span class="op" id="5752342">.</span><span class="ident" id="5752343">embedded</span><span class="op" id="5752351">[</span><span class="ident" id="5752352"><a href="/go/doc/reader.go.html#5752225">ftype</a></span><span class="op" id="5752357">]</span>&nbsp;<span class="op" id="5752359">=</span>&nbsp;<span class="ident" id="5752361"><a href="/go/doc/reader.go.html#5752301">ptr</a></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5752366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752369">return</span><br>
<span class="lineno"></span><span class="op" id="5752376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5752379">func</span>&nbsp;<span class="op" id="5752384">(</span><span class="ident" id="5752385">r</span>&nbsp;<span class="op" id="5752387">*</span><span class="ident" id="5752388"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5752394">)</span>&nbsp;<span class="ident" id="5752396">readDoc</span><span class="op" id="5752403">(</span><span class="ident" id="5752404">comment</span>&nbsp;<span class="op" id="5752412">*</span><span class="ident" id="5752413"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5752416">.</span><span class="ident" id="5752417">CommentGroup</span><span class="op" id="5752429">)</span>&nbsp;<span class="op" id="5752431">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5752434">//&nbsp;By&nbsp;convention&nbsp;there&nbsp;should&nbsp;be&nbsp;only&nbsp;one&nbsp;package&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5752493">//&nbsp;but&nbsp;collect&nbsp;all&nbsp;of&nbsp;them&nbsp;if&nbsp;there&nbsp;are&nbsp;more&nbsp;then&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5752549">text</span>&nbsp;<span class="op" id="5752554">:=</span>&nbsp;<span class="ident" id="5752557"><a href="/go/doc/reader.go.html#5752404">comment</a></span><span class="op" id="5752564">.</span><span class="ident" id="5752565">Text</span><span class="op" id="5752569">(</span><span class="op" id="5752570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752573">if</span>&nbsp;<span class="ident" id="5752576"><a href="/go/doc/reader.go.html#5752385">r</a></span><span class="op" id="5752577">.</span><span class="ident" id="5752578">doc</span>&nbsp;<span class="op" id="5752582">==</span>&nbsp;<span class="string" id="5752585">&#34;&#34;</span>&nbsp;<span class="op" id="5752588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5752592"><a href="/go/doc/reader.go.html#5752385">r</a></span><span class="op" id="5752593">.</span><span class="ident" id="5752594">doc</span>&nbsp;<span class="op" id="5752598">=</span>&nbsp;<span class="ident" id="5752600"><a href="/go/doc/reader.go.html#5752549">text</a></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752607">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5752615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5752618"><a href="/go/doc/reader.go.html#5752385">r</a></span><span class="op" id="5752619">.</span><span class="ident" id="5752620">doc</span>&nbsp;<span class="op" id="5752624">+=</span>&nbsp;<span class="string" id="5752627">&#34;\n&#34;</span>&nbsp;<span class="op" id="5752632">+</span>&nbsp;<span class="ident" id="5752634"><a href="/go/doc/reader.go.html#5752549">text</a></span><br>
<span class="lineno"></span><span class="op" id="5752639">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="5752642">func</span>&nbsp;<span class="op" id="5752647">(</span><span class="ident" id="5752648">r</span>&nbsp;<span class="op" id="5752650">*</span><span class="ident" id="5752651"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5752657">)</span>&nbsp;<span class="ident" id="5752659">remember</span><span class="op" id="5752667">(</span><span class="ident" id="5752668">typ</span>&nbsp;<span class="op" id="5752672">*</span><span class="ident" id="5752673"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5752676">.</span><span class="ident" id="5752677">InterfaceType</span><span class="op" id="5752690">)</span>&nbsp;<span class="op" id="5752692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5752695"><a href="/go/doc/reader.go.html#5752648">r</a></span><span class="op" id="5752696">.</span><span class="ident" id="5752697">fixlist</span>&nbsp;<span class="op" id="5752705">=</span>&nbsp;<span class="builtinfunc" id="5752707">append</span><span class="op" id="5752713">(</span><span class="ident" id="5752714"><a href="/go/doc/reader.go.html#5752648">r</a></span><span class="op" id="5752715">.</span><span class="ident" id="5752716">fixlist</span><span class="op" id="5752723">,</span>&nbsp;<span class="ident" id="5752725"><a href="/go/doc/reader.go.html#5752668">typ</a></span><span class="op" id="5752728">)</span><br>
<span class="lineno"></span><span class="op" id="5752730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5752733">func</span>&nbsp;<span class="ident" id="5752738">specNames</span><span class="op" id="5752747">(</span><span class="ident" id="5752748">specs</span>&nbsp;<span class="op" id="5752754">[</span><span class="op" id="5752755">]</span><span class="ident" id="5752756"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5752759">.</span><span class="ident" id="5752760">Spec</span><span class="op" id="5752764">)</span>&nbsp;<span class="op" id="5752766">[</span><span class="op" id="5752767">]</span><span class="builtintype" id="5752768">string</span>&nbsp;<span class="op" id="5752775">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5752778">names</span>&nbsp;<span class="op" id="5752784">:=</span>&nbsp;<span class="builtinfunc" id="5752787">make</span><span class="op" id="5752791">(</span><span class="op" id="5752792">[</span><span class="op" id="5752793">]</span><span class="builtintype" id="5752794">string</span><span class="op" id="5752800">,</span>&nbsp;<span class="num" id="5752802">0</span><span class="op" id="5752803">,</span>&nbsp;<span class="builtinfunc" id="5752805">len</span><span class="op" id="5752808">(</span><span class="ident" id="5752809"><a href="/go/doc/reader.go.html#5752748">specs</a></span><span class="op" id="5752814">)</span><span class="op" id="5752815">)</span>&nbsp;<span class="comment" id="5752817">//&nbsp;reasonable&nbsp;estimate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752841">for</span>&nbsp;<span class="ident" id="5752845">_</span><span class="op" id="5752846">,</span>&nbsp;<span class="ident" id="5752848">s</span>&nbsp;<span class="op" id="5752850">:=</span>&nbsp;<span class="keyword" id="5752853">range</span>&nbsp;<span class="ident" id="5752859"><a href="/go/doc/reader.go.html#5752748">specs</a></span>&nbsp;<span class="op" id="5752865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5752869">//&nbsp;s&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;an&nbsp;*ast.ValueSpec&nbsp;by&nbsp;readValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5752924">for</span>&nbsp;<span class="ident" id="5752928">_</span><span class="op" id="5752929">,</span>&nbsp;<span class="ident" id="5752931">ident</span>&nbsp;<span class="op" id="5752937">:=</span>&nbsp;<span class="keyword" id="5752940">range</span>&nbsp;<span class="ident" id="5752946"><a href="/go/doc/reader.go.html#5752848">s</a></span><span class="op" id="5752947">.</span><span class="op" id="5752948">(</span><span class="op" id="5752949">*</span><span class="ident" id="5752950"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5752953">.</span><span class="ident" id="5752954">ValueSpec</span><span class="op" id="5752963">)</span><span class="op" id="5752964">.</span><span class="ident" id="5752965">Names</span>&nbsp;<span class="op" id="5752971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5752976"><a href="/go/doc/reader.go.html#5752778">names</a></span>&nbsp;<span class="op" id="5752982">=</span>&nbsp;<span class="builtinfunc" id="5752984">append</span><span class="op" id="5752990">(</span><span class="ident" id="5752991"><a href="/go/doc/reader.go.html#5752778">names</a></span><span class="op" id="5752996">,</span>&nbsp;<span class="ident" id="5752998"><a href="/go/doc/reader.go.html#5752931">ident</a></span><span class="op" id="5753003">.</span><span class="ident" id="5753004">Name</span><span class="op" id="5753008">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5753012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5753015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753018">return</span>&nbsp;<span class="ident" id="5753025"><a href="/go/doc/reader.go.html#5752778">names</a></span><br>
<span class="lineno"></span><span class="op" id="5753031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="comment" id="5753034">//&nbsp;readValue&nbsp;processes&nbsp;a&nbsp;const&nbsp;or&nbsp;var&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="5753085">//</span><br>
<span class="lineno"></span><span class="keyword" id="5753088">func</span>&nbsp;<span class="op" id="5753093">(</span><span class="ident" id="5753094">r</span>&nbsp;<span class="op" id="5753096">*</span><span class="ident" id="5753097"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5753103">)</span>&nbsp;<span class="ident" id="5753105">readValue</span><span class="op" id="5753114">(</span><span class="ident" id="5753115">decl</span>&nbsp;<span class="op" id="5753120">*</span><span class="ident" id="5753121"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5753124">.</span><span class="ident" id="5753125">GenDecl</span><span class="op" id="5753132">)</span>&nbsp;<span class="op" id="5753134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5753137">//&nbsp;determine&nbsp;if&nbsp;decl&nbsp;should&nbsp;be&nbsp;associated&nbsp;with&nbsp;a&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5753192">//&nbsp;Heuristic:&nbsp;For&nbsp;each&nbsp;typed&nbsp;entry,&nbsp;determine&nbsp;the&nbsp;type&nbsp;name,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5753262">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;exactly&nbsp;one&nbsp;type&nbsp;name&nbsp;that&nbsp;is&nbsp;sufficiently</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5753332">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;frequent,&nbsp;associate&nbsp;the&nbsp;decl&nbsp;with&nbsp;the&nbsp;respective&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5753402">domName</span>&nbsp;<span class="op" id="5753410">:=</span>&nbsp;<span class="string" id="5753413">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5753417">domFreq</span>&nbsp;<span class="op" id="5753425">:=</span>&nbsp;<span class="num" id="5753428">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5753431">prev</span>&nbsp;<span class="op" id="5753436">:=</span>&nbsp;<span class="string" id="5753439">&#34;&#34;</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5753443">n</span>&nbsp;<span class="op" id="5753445">:=</span>&nbsp;<span class="num" id="5753448">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753451">for</span>&nbsp;<span class="ident" id="5753455">_</span><span class="op" id="5753456">,</span>&nbsp;<span class="ident" id="5753458">spec</span>&nbsp;<span class="op" id="5753463">:=</span>&nbsp;<span class="keyword" id="5753466">range</span>&nbsp;<span class="ident" id="5753472"><a href="/go/doc/reader.go.html#5753115">decl</a></span><span class="op" id="5753476">.</span><span class="ident" id="5753477">Specs</span>&nbsp;<span class="op" id="5753483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5753487">s</span><span class="op" id="5753488">,</span>&nbsp;<span class="ident" id="5753490">ok</span>&nbsp;<span class="op" id="5753493">:=</span>&nbsp;<span class="ident" id="5753496"><a href="/go/doc/reader.go.html#5753458">spec</a></span><span class="op" id="5753500">.</span><span class="op" id="5753501">(</span><span class="op" id="5753502">*</span><span class="ident" id="5753503"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5753506">.</span><span class="ident" id="5753507">ValueSpec</span><span class="op" id="5753516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753520">if</span>&nbsp;<span class="op" id="5753523">!</span><span class="ident" id="5753524"><a href="/go/doc/reader.go.html#5753490">ok</a></span>&nbsp;<span class="op" id="5753527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753532">continue</span>&nbsp;<span class="comment" id="5753541">//&nbsp;should&nbsp;not&nbsp;happen,&nbsp;but&nbsp;be&nbsp;conservative</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5753585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5753589">name</span>&nbsp;<span class="op" id="5753594">:=</span>&nbsp;<span class="string" id="5753597">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753602">switch</span>&nbsp;<span class="op" id="5753609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753613">case</span>&nbsp;<span class="ident" id="5753618"><a href="/go/doc/reader.go.html#5753487">s</a></span><span class="op" id="5753619">.</span><span class="ident" id="5753620">Type</span>&nbsp;<span class="op" id="5753625">!=</span>&nbsp;<span class="ident" id="5753628">nil</span><span class="op" id="5753631">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5753636">//&nbsp;a&nbsp;type&nbsp;is&nbsp;present;&nbsp;determine&nbsp;its&nbsp;name</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753680">if</span>&nbsp;<span class="ident" id="5753683">n</span><span class="op" id="5753684">,</span>&nbsp;<span class="ident" id="5753686">imp</span>&nbsp;<span class="op" id="5753690">:=</span>&nbsp;<span class="ident" id="5753693"><a href="/go/doc/reader.go.html#5749091">baseTypeName</a></span><span class="op" id="5753705">(</span><span class="ident" id="5753706"><a href="/go/doc/reader.go.html#5753487">s</a></span><span class="op" id="5753707">.</span><span class="ident" id="5753708">Type</span><span class="op" id="5753712">)</span><span class="op" id="5753713">;</span>&nbsp;<span class="op" id="5753715">!</span><span class="ident" id="5753716"><a href="/go/doc/reader.go.html#5753686">imp</a></span>&nbsp;<span class="op" id="5753720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5753726"><a href="/go/doc/reader.go.html#5753589">name</a></span>&nbsp;<span class="op" id="5753731">=</span>&nbsp;<span class="ident" id="5753733"><a href="/go/doc/reader.go.html#5753683">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5753738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5753742">case</span>&nbsp;<span class="ident" id="5753747"><a href="/go/doc/reader.go.html#5753115">decl</a></span><span class="op" id="5753751">.</span><span class="ident" id="5753752">Tok</span>&nbsp;<span class="op" id="5753756">==</span>&nbsp;<span class="ident" id="5753759"><a href="/go/doc/reader.go.html#5746692">token</a></span><span class="op" id="5753764">.</span><span class="ident" id="5753765">CONST</span><span class="op" id="5753770">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5753775">//&nbsp;no&nbsp;type&nbsp;is&nbsp;present&nbsp;but&nbsp;we&nbsp;have&nbsp;a&nbsp;constant&nbsp;declaration;</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5753836">//&nbsp;use&nbsp;the&nbsp;previous&nbsp;type&nbsp;name&nbsp;(w/o&nbsp;more&nbsp;type&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5753896">//&nbsp;we&nbsp;cannot&nbsp;handle&nbsp;the&nbsp;case&nbsp;of&nbsp;unnamed&nbsp;variables&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5753954">//&nbsp;initializer&nbsp;expressions&nbsp;except&nbsp;for&nbsp;some&nbsp;trivial&nbsp;cases)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5754015"><a href="/go/doc/reader.go.html#5753589">name</a></span>&nbsp;<span class="op" id="5754020">=</span>&nbsp;<span class="ident" id="5754022"><a href="/go/doc/reader.go.html#5753431">prev</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5754029">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754033">if</span>&nbsp;<span class="ident" id="5754036"><a href="/go/doc/reader.go.html#5753589">name</a></span>&nbsp;<span class="op" id="5754041">!=</span>&nbsp;<span class="string" id="5754044">&#34;&#34;</span>&nbsp;<span class="op" id="5754047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5754052">//&nbsp;entry&nbsp;has&nbsp;a&nbsp;named&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754081">if</span>&nbsp;<span class="ident" id="5754084"><a href="/go/doc/reader.go.html#5753402">domName</a></span>&nbsp;<span class="op" id="5754092">!=</span>&nbsp;<span class="string" id="5754095">&#34;&#34;</span>&nbsp;<span class="op" id="5754098">&amp;&amp;</span>&nbsp;<span class="ident" id="5754101"><a href="/go/doc/reader.go.html#5753402">domName</a></span>&nbsp;<span class="op" id="5754109">!=</span>&nbsp;<span class="ident" id="5754112"><a href="/go/doc/reader.go.html#5753589">name</a></span>&nbsp;<span class="op" id="5754117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5754123">//&nbsp;more&nbsp;than&nbsp;one&nbsp;type&nbsp;name&nbsp;-&nbsp;do&nbsp;not&nbsp;associate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5754173">//&nbsp;with&nbsp;any&nbsp;type</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5754194"><a href="/go/doc/reader.go.html#5753402">domName</a></span>&nbsp;<span class="op" id="5754202">=</span>&nbsp;<span class="string" id="5754204">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754211">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5754220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5754225"><a href="/go/doc/reader.go.html#5753402">domName</a></span>&nbsp;<span class="op" id="5754233">=</span>&nbsp;<span class="ident" id="5754235"><a href="/go/doc/reader.go.html#5753589">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5754243"><a href="/go/doc/reader.go.html#5753417">domFreq</a></span><span class="op" id="5754250">++</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5754255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5754259"><a href="/go/doc/reader.go.html#5753431">prev</a></span>&nbsp;<span class="op" id="5754264">=</span>&nbsp;<span class="ident" id="5754266"><a href="/go/doc/reader.go.html#5753589">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5754273"><a href="/go/doc/reader.go.html#5753443">n</a></span><span class="op" id="5754274">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5754278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5754282">//&nbsp;nothing&nbsp;to&nbsp;do&nbsp;w/o&nbsp;a&nbsp;legal&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754324">if</span>&nbsp;<span class="ident" id="5754327"><a href="/go/doc/reader.go.html#5753443">n</a></span>&nbsp;<span class="op" id="5754329">==</span>&nbsp;<span class="num" id="5754332">0</span>&nbsp;<span class="op" id="5754334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754338">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5754346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5754350">//&nbsp;determine&nbsp;values&nbsp;list&nbsp;with&nbsp;which&nbsp;to&nbsp;associate&nbsp;the&nbsp;Value&nbsp;for&nbsp;this&nbsp;decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5754424">values</span>&nbsp;<span class="op" id="5754431">:=</span>&nbsp;<span class="op" id="5754434">&amp;</span><span class="ident" id="5754435"><a href="/go/doc/reader.go.html#5753094">r</a></span><span class="op" id="5754436">.</span><span class="ident" id="5754437">values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754445">const</span>&nbsp;<span class="ident" id="5754451">threshold</span>&nbsp;<span class="op" id="5754461">=</span>&nbsp;<span class="num" id="5754463">0.75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754469">if</span>&nbsp;<span class="ident" id="5754472"><a href="/go/doc/reader.go.html#5753402">domName</a></span>&nbsp;<span class="op" id="5754480">!=</span>&nbsp;<span class="string" id="5754483">&#34;&#34;</span>&nbsp;<span class="op" id="5754486">&amp;&amp;</span>&nbsp;<span class="ident" id="5754489"><a href="/go/doc/reader.go.html#5753094">r</a></span><span class="op" id="5754490">.</span><span class="ident" id="5754491">isVisible</span><span class="op" id="5754500">(</span><span class="ident" id="5754501"><a href="/go/doc/reader.go.html#5753402">domName</a></span><span class="op" id="5754508">)</span>&nbsp;<span class="op" id="5754510">&amp;&amp;</span>&nbsp;<span class="ident" id="5754513"><a href="/go/doc/reader.go.html#5753417">domFreq</a></span>&nbsp;<span class="op" id="5754521">&gt;=</span>&nbsp;<span class="builtintype" id="5754524">int</span><span class="op" id="5754527">(</span><span class="builtintype" id="5754528">float64</span><span class="op" id="5754535">(</span><span class="builtinfunc" id="5754536">len</span><span class="op" id="5754539">(</span><span class="ident" id="5754540"><a href="/go/doc/reader.go.html#5753115">decl</a></span><span class="op" id="5754544">.</span><span class="ident" id="5754545">Specs</span><span class="op" id="5754550">)</span><span class="op" id="5754551">)</span><span class="op" id="5754552">*</span><span class="ident" id="5754553"><a href="/go/doc/reader.go.html#5754451">threshold</a></span><span class="op" id="5754562">)</span>&nbsp;<span class="op" id="5754564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5754568">//&nbsp;typed&nbsp;entries&nbsp;are&nbsp;sufficiently&nbsp;frequent</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5754613">if</span>&nbsp;<span class="ident" id="5754616">typ</span>&nbsp;<span class="op" id="5754620">:=</span>&nbsp;<span class="ident" id="5754623"><a href="/go/doc/reader.go.html#5753094">r</a></span><span class="op" id="5754624">.</span><span class="ident" id="5754625">lookupType</span><span class="op" id="5754635">(</span><span class="ident" id="5754636"><a href="/go/doc/reader.go.html#5753402">domName</a></span><span class="op" id="5754643">)</span><span class="op" id="5754644">;</span>&nbsp;<span class="ident" id="5754646"><a href="/go/doc/reader.go.html#5754616">typ</a></span>&nbsp;<span class="op" id="5754650">!=</span>&nbsp;<span class="ident" id="5754653">nil</span>&nbsp;<span class="op" id="5754657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5754662"><a href="/go/doc/reader.go.html#5754424">values</a></span>&nbsp;<span class="op" id="5754669">=</span>&nbsp;<span class="op" id="5754671">&amp;</span><span class="ident" id="5754672"><a href="/go/doc/reader.go.html#5754616">typ</a></span><span class="op" id="5754675">.</span><span class="ident" id="5754676">values</span>&nbsp;<span class="comment" id="5754683">//&nbsp;associate&nbsp;with&nbsp;that&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5754713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5754716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5754720">*</span><span class="ident" id="5754721"><a href="/go/doc/reader.go.html#5754424">values</a></span>&nbsp;<span class="op" id="5754728">=</span>&nbsp;<span class="builtinfunc" id="5754730">append</span><span class="op" id="5754736">(</span><span class="op" id="5754737">*</span><span class="ident" id="5754738"><a href="/go/doc/reader.go.html#5754424">values</a></span><span class="op" id="5754744">,</span>&nbsp;<span class="op" id="5754746">&amp;</span><span class="ident" id="5754747"><a href="/go/doc/doc.go.html#5726163">Value</a></span><span class="op" id="5754752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5754756">Doc</span><span class="op" id="5754759">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5754763"><a href="/go/doc/reader.go.html#5753115">decl</a></span><span class="op" id="5754767">.</span><span class="ident" id="5754768">Doc</span><span class="op" id="5754771">.</span><span class="ident" id="5754772">Text</span><span class="op" id="5754776">(</span><span class="op" id="5754777">)</span><span class="op" id="5754778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5754782">Names</span><span class="op" id="5754787">:</span>&nbsp;<span class="ident" id="5754789"><a href="/go/doc/reader.go.html#5752738">specNames</a></span><span class="op" id="5754798">(</span><span class="ident" id="5754799"><a href="/go/doc/reader.go.html#5753115">decl</a></span><span class="op" id="5754803">.</span><span class="ident" id="5754804">Specs</span><span class="op" id="5754809">)</span><span class="op" id="5754810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5754814">Decl</span><span class="op" id="5754818">:</span>&nbsp;&nbsp;<span class="ident" id="5754821"><a href="/go/doc/reader.go.html#5753115">decl</a></span><span class="op" id="5754825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5754829">order</span><span class="op" id="5754834">:</span>&nbsp;<span class="builtinfunc" id="5754836">len</span><span class="op" id="5754839">(</span><span class="op" id="5754840">*</span><span class="ident" id="5754841"><a href="/go/doc/reader.go.html#5754424">values</a></span><span class="op" id="5754847">)</span><span class="op" id="5754848">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5754851">}</span><span class="op" id="5754852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5754855"><a href="/go/doc/reader.go.html#5753115">decl</a></span><span class="op" id="5754859">.</span><span class="ident" id="5754860">Doc</span>&nbsp;<span class="op" id="5754864">=</span>&nbsp;<span class="ident" id="5754866">nil</span>&nbsp;<span class="comment" id="5754870">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="5754904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5754907">//&nbsp;fields&nbsp;returns&nbsp;a&nbsp;struct&#39;s&nbsp;fields&nbsp;or&nbsp;an&nbsp;interface&#39;s&nbsp;methods.</span><br>
<span class="lineno">305</span><span class="comment" id="5754970">//</span><br>
<span class="lineno"></span><span class="keyword" id="5754973">func</span>&nbsp;<span class="ident" id="5754978">fields</span><span class="op" id="5754984">(</span><span class="ident" id="5754985">typ</span>&nbsp;<span class="ident" id="5754989"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5754992">.</span><span class="ident" id="5754993">Expr</span><span class="op" id="5754997">)</span>&nbsp;<span class="op" id="5754999">(</span><span class="ident" id="5755000">list</span>&nbsp;<span class="op" id="5755005">[</span><span class="op" id="5755006">]</span><span class="op" id="5755007">*</span><span class="ident" id="5755008"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5755011">.</span><span class="ident" id="5755012">Field</span><span class="op" id="5755017">,</span>&nbsp;<span class="ident" id="5755019">isStruct</span>&nbsp;<span class="builtintype" id="5755028">bool</span><span class="op" id="5755032">)</span>&nbsp;<span class="op" id="5755034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5755037">var</span>&nbsp;<span class="ident" id="5755041">fields</span>&nbsp;<span class="op" id="5755048">*</span><span class="ident" id="5755049"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5755052">.</span><span class="ident" id="5755053">FieldList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5755064">switch</span>&nbsp;<span class="ident" id="5755071">t</span>&nbsp;<span class="op" id="5755073">:=</span>&nbsp;<span class="ident" id="5755076"><a href="/go/doc/reader.go.html#5754985">typ</a></span><span class="op" id="5755079">.</span><span class="op" id="5755080">(</span><span class="keyword" id="5755081">type</span><span class="op" id="5755085">)</span>&nbsp;<span class="op" id="5755087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5755090">case</span>&nbsp;<span class="op" id="5755095">*</span><span class="ident" id="5755096"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5755099">.</span><span class="ident" id="5755100">StructType</span><span class="op" id="5755110">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5755114"><a href="/go/doc/reader.go.html#5755041">fields</a></span>&nbsp;<span class="op" id="5755121">=</span>&nbsp;<span class="ident" id="5755123"><a href="/go/doc/reader.go.html#5755071">t</a></span><span class="op" id="5755124">.</span><span class="ident" id="5755125">Fields</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5755134"><a href="/go/doc/reader.go.html#5755019">isStruct</a></span>&nbsp;<span class="op" id="5755143">=</span>&nbsp;<span class="builtintype" id="5755145">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5755151">case</span>&nbsp;<span class="op" id="5755156">*</span><span class="ident" id="5755157"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5755160">.</span><span class="ident" id="5755161">InterfaceType</span><span class="op" id="5755174">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5755178"><a href="/go/doc/reader.go.html#5755041">fields</a></span>&nbsp;<span class="op" id="5755185">=</span>&nbsp;<span class="ident" id="5755187"><a href="/go/doc/reader.go.html#5755071">t</a></span><span class="op" id="5755188">.</span><span class="ident" id="5755189">Methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5755198">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5755201">if</span>&nbsp;<span class="ident" id="5755204"><a href="/go/doc/reader.go.html#5755041">fields</a></span>&nbsp;<span class="op" id="5755211">!=</span>&nbsp;<span class="ident" id="5755214">nil</span>&nbsp;<span class="op" id="5755218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5755222"><a href="/go/doc/reader.go.html#5755000">list</a></span>&nbsp;<span class="op" id="5755227">=</span>&nbsp;<span class="ident" id="5755229"><a href="/go/doc/reader.go.html#5755041">fields</a></span><span class="op" id="5755235">.</span><span class="ident" id="5755236">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5755242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5755245">return</span><br>
<span class="lineno"></span><span class="op" id="5755252">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="5755255">//&nbsp;readType&nbsp;processes&nbsp;a&nbsp;type&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="5755297">//</span><br>
<span class="lineno"></span><span class="keyword" id="5755300">func</span>&nbsp;<span class="op" id="5755305">(</span><span class="ident" id="5755306">r</span>&nbsp;<span class="op" id="5755308">*</span><span class="ident" id="5755309"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5755315">)</span>&nbsp;<span class="ident" id="5755317">readType</span><span class="op" id="5755325">(</span><span class="ident" id="5755326">decl</span>&nbsp;<span class="op" id="5755331">*</span><span class="ident" id="5755332"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5755335">.</span><span class="ident" id="5755336">GenDecl</span><span class="op" id="5755343">,</span>&nbsp;<span class="ident" id="5755345">spec</span>&nbsp;<span class="op" id="5755350">*</span><span class="ident" id="5755351"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5755354">.</span><span class="ident" id="5755355">TypeSpec</span><span class="op" id="5755363">)</span>&nbsp;<span class="op" id="5755365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5755368">typ</span>&nbsp;<span class="op" id="5755372">:=</span>&nbsp;<span class="ident" id="5755375"><a href="/go/doc/reader.go.html#5755306">r</a></span><span class="op" id="5755376">.</span><span class="ident" id="5755377">lookupType</span><span class="op" id="5755387">(</span><span class="ident" id="5755388"><a href="/go/doc/reader.go.html#5755345">spec</a></span><span class="op" id="5755392">.</span><span class="ident" id="5755393">Name</span><span class="op" id="5755397">.</span><span class="ident" id="5755398">Name</span><span class="op" id="5755402">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5755405">if</span>&nbsp;<span class="ident" id="5755408"><a href="/go/doc/reader.go.html#5755368">typ</a></span>&nbsp;<span class="op" id="5755412">==</span>&nbsp;<span class="ident" id="5755415">nil</span>&nbsp;<span class="op" id="5755419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5755423">return</span>&nbsp;<span class="comment" id="5755430">//&nbsp;no&nbsp;name&nbsp;or&nbsp;blank&nbsp;name&nbsp;-&nbsp;ignore&nbsp;the&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5755474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5755478">//&nbsp;A&nbsp;type&nbsp;should&nbsp;be&nbsp;added&nbsp;at&nbsp;most&nbsp;once,&nbsp;so&nbsp;typ.decl</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5755531">//&nbsp;should&nbsp;be&nbsp;nil&nbsp;-&nbsp;if&nbsp;it&nbsp;is&nbsp;not,&nbsp;simply&nbsp;overwrite&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5755586"><a href="/go/doc/reader.go.html#5755368">typ</a></span><span class="op" id="5755589">.</span><span class="ident" id="5755590">decl</span>&nbsp;<span class="op" id="5755595">=</span>&nbsp;<span class="ident" id="5755597"><a href="/go/doc/reader.go.html#5755326">decl</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5755604">//&nbsp;compute&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5755630">doc</span>&nbsp;<span class="op" id="5755634">:=</span>&nbsp;<span class="ident" id="5755637"><a href="/go/doc/reader.go.html#5755345">spec</a></span><span class="op" id="5755641">.</span><span class="ident" id="5755642">Doc</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5755647"><a href="/go/doc/reader.go.html#5755345">spec</a></span><span class="op" id="5755651">.</span><span class="ident" id="5755652">Doc</span>&nbsp;<span class="op" id="5755656">=</span>&nbsp;<span class="ident" id="5755658">nil</span>&nbsp;<span class="comment" id="5755662">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5755697">if</span>&nbsp;<span class="ident" id="5755700"><a href="/go/doc/reader.go.html#5755630">doc</a></span>&nbsp;<span class="op" id="5755704">==</span>&nbsp;<span class="ident" id="5755707">nil</span>&nbsp;<span class="op" id="5755711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5755715">//&nbsp;no&nbsp;doc&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec,&nbsp;use&nbsp;the&nbsp;declaration&nbsp;doc,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5755785"><a href="/go/doc/reader.go.html#5755630">doc</a></span>&nbsp;<span class="op" id="5755789">=</span>&nbsp;<span class="ident" id="5755791"><a href="/go/doc/reader.go.html#5755326">decl</a></span><span class="op" id="5755795">.</span><span class="ident" id="5755796">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5755801">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5755804"><a href="/go/doc/reader.go.html#5755326">decl</a></span><span class="op" id="5755808">.</span><span class="ident" id="5755809">Doc</span>&nbsp;<span class="op" id="5755813">=</span>&nbsp;<span class="ident" id="5755815">nil</span>&nbsp;<span class="comment" id="5755819">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5755854"><a href="/go/doc/reader.go.html#5755368">typ</a></span><span class="op" id="5755857">.</span><span class="ident" id="5755858">doc</span>&nbsp;<span class="op" id="5755862">=</span>&nbsp;<span class="ident" id="5755864"><a href="/go/doc/reader.go.html#5755630">doc</a></span><span class="op" id="5755867">.</span><span class="ident" id="5755868">Text</span><span class="op" id="5755872">(</span><span class="op" id="5755873">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5755877">//&nbsp;record&nbsp;anonymous&nbsp;fields&nbsp;(they&nbsp;may&nbsp;contribute&nbsp;methods)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5755935">//&nbsp;(some&nbsp;fields&nbsp;may&nbsp;have&nbsp;been&nbsp;recorded&nbsp;already&nbsp;when&nbsp;filtering</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5755998">//&nbsp;exports,&nbsp;but&nbsp;that&#39;s&nbsp;ok)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5756026">var</span>&nbsp;<span class="ident" id="5756030">list</span>&nbsp;<span class="op" id="5756035">[</span><span class="op" id="5756036">]</span><span class="op" id="5756037">*</span><span class="ident" id="5756038"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5756041">.</span><span class="ident" id="5756042">Field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5756049"><a href="/go/doc/reader.go.html#5756030">list</a></span><span class="op" id="5756053">,</span>&nbsp;<span class="ident" id="5756055"><a href="/go/doc/reader.go.html#5755368">typ</a></span><span class="op" id="5756058">.</span><span class="ident" id="5756059">isStruct</span>&nbsp;<span class="op" id="5756068">=</span>&nbsp;<span class="ident" id="5756070"><a href="/go/doc/reader.go.html#5754978">fields</a></span><span class="op" id="5756076">(</span><span class="ident" id="5756077"><a href="/go/doc/reader.go.html#5755345">spec</a></span><span class="op" id="5756081">.</span><span class="ident" id="5756082">Type</span><span class="op" id="5756086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5756089">for</span>&nbsp;<span class="ident" id="5756093">_</span><span class="op" id="5756094">,</span>&nbsp;<span class="ident" id="5756096">field</span>&nbsp;<span class="op" id="5756102">:=</span>&nbsp;<span class="keyword" id="5756105">range</span>&nbsp;<span class="ident" id="5756111"><a href="/go/doc/reader.go.html#5756030">list</a></span>&nbsp;<span class="op" id="5756116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5756120">if</span>&nbsp;<span class="builtinfunc" id="5756123">len</span><span class="op" id="5756126">(</span><span class="ident" id="5756127"><a href="/go/doc/reader.go.html#5756096">field</a></span><span class="op" id="5756132">.</span><span class="ident" id="5756133">Names</span><span class="op" id="5756138">)</span>&nbsp;<span class="op" id="5756140">==</span>&nbsp;<span class="num" id="5756143">0</span>&nbsp;<span class="op" id="5756145">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5756150"><a href="/go/doc/reader.go.html#5755306">r</a></span><span class="op" id="5756151">.</span><span class="ident" id="5756152">recordAnonymousField</span><span class="op" id="5756172">(</span><span class="ident" id="5756173"><a href="/go/doc/reader.go.html#5755368">typ</a></span><span class="op" id="5756176">,</span>&nbsp;<span class="ident" id="5756178"><a href="/go/doc/reader.go.html#5756096">field</a></span><span class="op" id="5756183">.</span><span class="ident" id="5756184">Type</span><span class="op" id="5756188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5756192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5756195">}</span><br>
<span class="lineno"></span><span class="op" id="5756197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="comment" id="5756200">//&nbsp;readFunc&nbsp;processes&nbsp;a&nbsp;func&nbsp;or&nbsp;method&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="5756252">//</span><br>
<span class="lineno"></span><span class="keyword" id="5756255">func</span>&nbsp;<span class="op" id="5756260">(</span><span class="ident" id="5756261">r</span>&nbsp;<span class="op" id="5756263">*</span><span class="ident" id="5756264"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5756270">)</span>&nbsp;<span class="ident" id="5756272">readFunc</span><span class="op" id="5756280">(</span><span class="ident" id="5756281">fun</span>&nbsp;<span class="op" id="5756285">*</span><span class="ident" id="5756286"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5756289">.</span><span class="ident" id="5756290">FuncDecl</span><span class="op" id="5756298">)</span>&nbsp;<span class="op" id="5756300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5756303">//&nbsp;strip&nbsp;function&nbsp;body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5756327"><a href="/go/doc/reader.go.html#5756281">fun</a></span><span class="op" id="5756330">.</span><span class="ident" id="5756331">Body</span>&nbsp;<span class="op" id="5756336">=</span>&nbsp;<span class="ident" id="5756338">nil</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5756344">//&nbsp;associate&nbsp;methods&nbsp;with&nbsp;the&nbsp;receiver&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5756397">if</span>&nbsp;<span class="ident" id="5756400"><a href="/go/doc/reader.go.html#5756281">fun</a></span><span class="op" id="5756403">.</span><span class="ident" id="5756404">Recv</span>&nbsp;<span class="op" id="5756409">!=</span>&nbsp;<span class="ident" id="5756412">nil</span>&nbsp;<span class="op" id="5756416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5756420">//&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5756432">recvTypeName</span><span class="op" id="5756444">,</span>&nbsp;<span class="ident" id="5756446">imp</span>&nbsp;<span class="op" id="5756450">:=</span>&nbsp;<span class="ident" id="5756453"><a href="/go/doc/reader.go.html#5749091">baseTypeName</a></span><span class="op" id="5756465">(</span><span class="ident" id="5756466"><a href="/go/doc/reader.go.html#5756281">fun</a></span><span class="op" id="5756469">.</span><span class="ident" id="5756470">Recv</span><span class="op" id="5756474">.</span><span class="ident" id="5756475">List</span><span class="op" id="5756479">[</span><span class="num" id="5756480">0</span><span class="op" id="5756481">]</span><span class="op" id="5756482">.</span><span class="ident" id="5756483">Type</span><span class="op" id="5756487">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5756491">if</span>&nbsp;<span class="ident" id="5756494"><a href="/go/doc/reader.go.html#5756446">imp</a></span>&nbsp;<span class="op" id="5756498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5756503">//&nbsp;should&nbsp;not&nbsp;happen&nbsp;(incorrect&nbsp;AST);</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5756544">//&nbsp;don&#39;t&nbsp;show&nbsp;this&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5756573">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5756582">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5756586">if</span>&nbsp;<span class="ident" id="5756589">typ</span>&nbsp;<span class="op" id="5756593">:=</span>&nbsp;<span class="ident" id="5756596"><a href="/go/doc/reader.go.html#5756261">r</a></span><span class="op" id="5756597">.</span><span class="ident" id="5756598">lookupType</span><span class="op" id="5756608">(</span><span class="ident" id="5756609"><a href="/go/doc/reader.go.html#5756432">recvTypeName</a></span><span class="op" id="5756621">)</span><span class="op" id="5756622">;</span>&nbsp;<span class="ident" id="5756624"><a href="/go/doc/reader.go.html#5756589">typ</a></span>&nbsp;<span class="op" id="5756628">!=</span>&nbsp;<span class="ident" id="5756631">nil</span>&nbsp;<span class="op" id="5756635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5756640"><a href="/go/doc/reader.go.html#5756589">typ</a></span><span class="op" id="5756643">.</span><span class="ident" id="5756644">methods</span><span class="op" id="5756651">.</span><span class="ident" id="5756652">set</span><span class="op" id="5756655">(</span><span class="ident" id="5756656"><a href="/go/doc/reader.go.html#5756281">fun</a></span><span class="op" id="5756659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5756663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5756667">//&nbsp;otherwise&nbsp;ignore&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5756700">//&nbsp;TODO(gri):&nbsp;There&nbsp;may&nbsp;be&nbsp;exported&nbsp;methods&nbsp;of&nbsp;non-exported&nbsp;types</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5756768">//&nbsp;that&nbsp;can&nbsp;be&nbsp;called&nbsp;because&nbsp;of&nbsp;exported&nbsp;values&nbsp;(consts,&nbsp;vars,&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5756837">//&nbsp;function&nbsp;results)&nbsp;of&nbsp;that&nbsp;type.&nbsp;Could&nbsp;determine&nbsp;if&nbsp;that&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5756905">//&nbsp;case&nbsp;and&nbsp;then&nbsp;show&nbsp;those&nbsp;methods&nbsp;in&nbsp;an&nbsp;appropriate&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5756970">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5756978">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5756982">//&nbsp;associate&nbsp;factory&nbsp;functions&nbsp;with&nbsp;the&nbsp;first&nbsp;visible&nbsp;result&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5757057">if</span>&nbsp;<span class="ident" id="5757060"><a href="/go/doc/reader.go.html#5756281">fun</a></span><span class="op" id="5757063">.</span><span class="ident" id="5757064">Type</span><span class="op" id="5757068">.</span><span class="ident" id="5757069">Results</span><span class="op" id="5757076">.</span><span class="ident" id="5757077">NumFields</span><span class="op" id="5757086">(</span><span class="op" id="5757087">)</span>&nbsp;<span class="op" id="5757089">&gt;=</span>&nbsp;<span class="num" id="5757092">1</span>&nbsp;<span class="op" id="5757094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5757098">res</span>&nbsp;<span class="op" id="5757102">:=</span>&nbsp;<span class="ident" id="5757105"><a href="/go/doc/reader.go.html#5756281">fun</a></span><span class="op" id="5757108">.</span><span class="ident" id="5757109">Type</span><span class="op" id="5757113">.</span><span class="ident" id="5757114">Results</span><span class="op" id="5757121">.</span><span class="ident" id="5757122">List</span><span class="op" id="5757126">[</span><span class="num" id="5757127">0</span><span class="op" id="5757128">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5757132">if</span>&nbsp;<span class="builtinfunc" id="5757135">len</span><span class="op" id="5757138">(</span><span class="ident" id="5757139"><a href="/go/doc/reader.go.html#5757098">res</a></span><span class="op" id="5757142">.</span><span class="ident" id="5757143">Names</span><span class="op" id="5757148">)</span>&nbsp;<span class="op" id="5757150">&lt;=</span>&nbsp;<span class="num" id="5757153">1</span>&nbsp;<span class="op" id="5757155">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5757160">//&nbsp;exactly&nbsp;one&nbsp;(named&nbsp;or&nbsp;anonymous)&nbsp;result&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5757217">//&nbsp;with&nbsp;the&nbsp;first&nbsp;type&nbsp;in&nbsp;result&nbsp;signature&nbsp;(there&nbsp;may</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5757274">//&nbsp;be&nbsp;more&nbsp;than&nbsp;one&nbsp;result)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5757305">if</span>&nbsp;<span class="ident" id="5757308">n</span><span class="op" id="5757309">,</span>&nbsp;<span class="ident" id="5757311">imp</span>&nbsp;<span class="op" id="5757315">:=</span>&nbsp;<span class="ident" id="5757318"><a href="/go/doc/reader.go.html#5749091">baseTypeName</a></span><span class="op" id="5757330">(</span><span class="ident" id="5757331"><a href="/go/doc/reader.go.html#5757098">res</a></span><span class="op" id="5757334">.</span><span class="ident" id="5757335">Type</span><span class="op" id="5757339">)</span><span class="op" id="5757340">;</span>&nbsp;<span class="op" id="5757342">!</span><span class="ident" id="5757343"><a href="/go/doc/reader.go.html#5757311">imp</a></span>&nbsp;<span class="op" id="5757347">&amp;&amp;</span>&nbsp;<span class="ident" id="5757350"><a href="/go/doc/reader.go.html#5756261">r</a></span><span class="op" id="5757351">.</span><span class="ident" id="5757352">isVisible</span><span class="op" id="5757361">(</span><span class="ident" id="5757362"><a href="/go/doc/reader.go.html#5757308">n</a></span><span class="op" id="5757363">)</span>&nbsp;<span class="op" id="5757365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5757371">if</span>&nbsp;<span class="ident" id="5757374">typ</span>&nbsp;<span class="op" id="5757378">:=</span>&nbsp;<span class="ident" id="5757381"><a href="/go/doc/reader.go.html#5756261">r</a></span><span class="op" id="5757382">.</span><span class="ident" id="5757383">lookupType</span><span class="op" id="5757393">(</span><span class="ident" id="5757394"><a href="/go/doc/reader.go.html#5757308">n</a></span><span class="op" id="5757395">)</span><span class="op" id="5757396">;</span>&nbsp;<span class="ident" id="5757398"><a href="/go/doc/reader.go.html#5757374">typ</a></span>&nbsp;<span class="op" id="5757402">!=</span>&nbsp;<span class="ident" id="5757405">nil</span>&nbsp;<span class="op" id="5757409">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5757416">//&nbsp;associate&nbsp;function&nbsp;with&nbsp;typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5757452"><a href="/go/doc/reader.go.html#5757374">typ</a></span><span class="op" id="5757455">.</span><span class="ident" id="5757456">funcs</span><span class="op" id="5757461">.</span><span class="ident" id="5757462">set</span><span class="op" id="5757465">(</span><span class="ident" id="5757466"><a href="/go/doc/reader.go.html#5756281">fun</a></span><span class="op" id="5757469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5757476">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5757487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5757492">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5757496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5757499">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5757503">//&nbsp;just&nbsp;an&nbsp;ordinary&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5757533"><a href="/go/doc/reader.go.html#5756261">r</a></span><span class="op" id="5757534">.</span><span class="ident" id="5757535">funcs</span><span class="op" id="5757540">.</span><span class="ident" id="5757541">set</span><span class="op" id="5757544">(</span><span class="ident" id="5757545"><a href="/go/doc/reader.go.html#5756281">fun</a></span><span class="op" id="5757548">)</span><br>
<span class="lineno">400</span><span class="op" id="5757550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5757553">var</span>&nbsp;<span class="op" id="5757557">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5757560">noteMarker</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5757574">=</span>&nbsp;<span class="string" id="5757576">`([A-Z][A-Z]+)\(([^)]+)\):?`</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5757624">//&nbsp;MARKER(uid),&nbsp;MARKER&nbsp;at&nbsp;least&nbsp;2&nbsp;chars,&nbsp;uid&nbsp;at&nbsp;least&nbsp;1&nbsp;char</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5757686">noteMarkerRx</span>&nbsp;&nbsp;<span class="op" id="5757700">=</span>&nbsp;<span class="ident" id="5757702"><a href="/go/doc/reader.go.html#5746704">regexp</a></span><span class="op" id="5757708">.</span><span class="ident" id="5757709">MustCompile</span><span class="op" id="5757720">(</span><span class="string" id="5757721">`^[&nbsp;\t]*`</span>&nbsp;<span class="op" id="5757731">+</span>&nbsp;<span class="ident" id="5757733"><a href="/go/doc/reader.go.html#5757560">noteMarker</a></span><span class="op" id="5757743">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5757750">//&nbsp;MARKER(uid)&nbsp;at&nbsp;text&nbsp;start</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5757780">noteCommentRx</span>&nbsp;<span class="op" id="5757794">=</span>&nbsp;<span class="ident" id="5757796"><a href="/go/doc/reader.go.html#5746704">regexp</a></span><span class="op" id="5757802">.</span><span class="ident" id="5757803">MustCompile</span><span class="op" id="5757814">(</span><span class="string" id="5757815">`^/[/*][&nbsp;\t]*`</span>&nbsp;<span class="op" id="5757830">+</span>&nbsp;<span class="ident" id="5757832"><a href="/go/doc/reader.go.html#5757560">noteMarker</a></span><span class="op" id="5757842">)</span>&nbsp;<span class="comment" id="5757844">//&nbsp;MARKER(uid)&nbsp;at&nbsp;comment&nbsp;start</span><br>
<span class="lineno"></span><span class="op" id="5757876">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5757879">//&nbsp;readNote&nbsp;collects&nbsp;a&nbsp;single&nbsp;note&nbsp;from&nbsp;a&nbsp;sequence&nbsp;of&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="5757943">//</span><br>
<span class="lineno">410</span><span class="keyword" id="5757946">func</span>&nbsp;<span class="op" id="5757951">(</span><span class="ident" id="5757952">r</span>&nbsp;<span class="op" id="5757954">*</span><span class="ident" id="5757955"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5757961">)</span>&nbsp;<span class="ident" id="5757963">readNote</span><span class="op" id="5757971">(</span><span class="ident" id="5757972">list</span>&nbsp;<span class="op" id="5757977">[</span><span class="op" id="5757978">]</span><span class="op" id="5757979">*</span><span class="ident" id="5757980"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5757983">.</span><span class="ident" id="5757984">Comment</span><span class="op" id="5757991">)</span>&nbsp;<span class="op" id="5757993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5757996">text</span>&nbsp;<span class="op" id="5758001">:=</span>&nbsp;<span class="op" id="5758004">(</span><span class="op" id="5758005">&amp;</span><span class="ident" id="5758006"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5758009">.</span><span class="ident" id="5758010">CommentGroup</span><span class="op" id="5758022">{</span><span class="ident" id="5758023">List</span><span class="op" id="5758027">:</span>&nbsp;<span class="ident" id="5758029"><a href="/go/doc/reader.go.html#5757972">list</a></span><span class="op" id="5758033">}</span><span class="op" id="5758034">)</span><span class="op" id="5758035">.</span><span class="ident" id="5758036">Text</span><span class="op" id="5758040">(</span><span class="op" id="5758041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5758044">if</span>&nbsp;<span class="ident" id="5758047">m</span>&nbsp;<span class="op" id="5758049">:=</span>&nbsp;<span class="ident" id="5758052"><a href="/go/doc/reader.go.html#5757686">noteMarkerRx</a></span><span class="op" id="5758064">.</span><span class="ident" id="5758065">FindStringSubmatchIndex</span><span class="op" id="5758088">(</span><span class="ident" id="5758089"><a href="/go/doc/reader.go.html#5757996">text</a></span><span class="op" id="5758093">)</span><span class="op" id="5758094">;</span>&nbsp;<span class="ident" id="5758096"><a href="/go/doc/reader.go.html#5758047">m</a></span>&nbsp;<span class="op" id="5758098">!=</span>&nbsp;<span class="ident" id="5758101">nil</span>&nbsp;<span class="op" id="5758105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5758109">//&nbsp;The&nbsp;note&nbsp;body&nbsp;starts&nbsp;after&nbsp;the&nbsp;marker.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5758153">//&nbsp;We&nbsp;remove&nbsp;any&nbsp;formatting&nbsp;so&nbsp;that&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5758200">//&nbsp;get&nbsp;spurious&nbsp;line&nbsp;breaks/indentation&nbsp;when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5758247">//&nbsp;showing&nbsp;the&nbsp;TODO&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5758275">body</span>&nbsp;<span class="op" id="5758280">:=</span>&nbsp;<span class="ident" id="5758283"><a href="/go/doc/synopsis.go.html#5770863">clean</a></span><span class="op" id="5758288">(</span><span class="ident" id="5758289"><a href="/go/doc/reader.go.html#5757996">text</a></span><span class="op" id="5758293">[</span><span class="ident" id="5758294"><a href="/go/doc/reader.go.html#5758047">m</a></span><span class="op" id="5758295">[</span><span class="num" id="5758296">1</span><span class="op" id="5758297">]</span><span class="op" id="5758298">:</span><span class="op" id="5758299">]</span><span class="op" id="5758300">,</span>&nbsp;<span class="ident" id="5758302"><a href="/go/doc/synopsis.go.html#5770595">keepNL</a></span><span class="op" id="5758308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5758312">if</span>&nbsp;<span class="ident" id="5758315"><a href="/go/doc/reader.go.html#5758275">body</a></span>&nbsp;<span class="op" id="5758320">!=</span>&nbsp;<span class="string" id="5758323">&#34;&#34;</span>&nbsp;<span class="op" id="5758326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5758331">marker</span>&nbsp;<span class="op" id="5758338">:=</span>&nbsp;<span class="ident" id="5758341"><a href="/go/doc/reader.go.html#5757996">text</a></span><span class="op" id="5758345">[</span><span class="ident" id="5758346"><a href="/go/doc/reader.go.html#5758047">m</a></span><span class="op" id="5758347">[</span><span class="num" id="5758348">2</span><span class="op" id="5758349">]</span><span class="op" id="5758350">:</span><span class="ident" id="5758351"><a href="/go/doc/reader.go.html#5758047">m</a></span><span class="op" id="5758352">[</span><span class="num" id="5758353">3</span><span class="op" id="5758354">]</span><span class="op" id="5758355">]</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5758360"><a href="/go/doc/reader.go.html#5757952">r</a></span><span class="op" id="5758361">.</span><span class="ident" id="5758362">notes</span><span class="op" id="5758367">[</span><span class="ident" id="5758368"><a href="/go/doc/reader.go.html#5758331">marker</a></span><span class="op" id="5758374">]</span>&nbsp;<span class="op" id="5758376">=</span>&nbsp;<span class="builtinfunc" id="5758378">append</span><span class="op" id="5758384">(</span><span class="ident" id="5758385"><a href="/go/doc/reader.go.html#5757952">r</a></span><span class="op" id="5758386">.</span><span class="ident" id="5758387">notes</span><span class="op" id="5758392">[</span><span class="ident" id="5758393"><a href="/go/doc/reader.go.html#5758331">marker</a></span><span class="op" id="5758399">]</span><span class="op" id="5758400">,</span>&nbsp;<span class="op" id="5758402">&amp;</span><span class="ident" id="5758403"><a href="/go/doc/doc.go.html#5727385">Note</a></span><span class="op" id="5758407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5758413">Pos</span><span class="op" id="5758416">:</span>&nbsp;&nbsp;<span class="ident" id="5758419"><a href="/go/doc/reader.go.html#5757972">list</a></span><span class="op" id="5758423">[</span><span class="num" id="5758424">0</span><span class="op" id="5758425">]</span><span class="op" id="5758426">.</span><span class="ident" id="5758427">Pos</span><span class="op" id="5758430">(</span><span class="op" id="5758431">)</span><span class="op" id="5758432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5758438">End</span><span class="op" id="5758441">:</span>&nbsp;&nbsp;<span class="ident" id="5758444"><a href="/go/doc/reader.go.html#5757972">list</a></span><span class="op" id="5758448">[</span><span class="builtinfunc" id="5758449">len</span><span class="op" id="5758452">(</span><span class="ident" id="5758453"><a href="/go/doc/reader.go.html#5757972">list</a></span><span class="op" id="5758457">)</span><span class="op" id="5758458">-</span><span class="num" id="5758459">1</span><span class="op" id="5758460">]</span><span class="op" id="5758461">.</span><span class="ident" id="5758462">End</span><span class="op" id="5758465">(</span><span class="op" id="5758466">)</span><span class="op" id="5758467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5758473">UID</span><span class="op" id="5758476">:</span>&nbsp;&nbsp;<span class="ident" id="5758479"><a href="/go/doc/reader.go.html#5757996">text</a></span><span class="op" id="5758483">[</span><span class="ident" id="5758484"><a href="/go/doc/reader.go.html#5758047">m</a></span><span class="op" id="5758485">[</span><span class="num" id="5758486">4</span><span class="op" id="5758487">]</span><span class="op" id="5758488">:</span><span class="ident" id="5758489"><a href="/go/doc/reader.go.html#5758047">m</a></span><span class="op" id="5758490">[</span><span class="num" id="5758491">5</span><span class="op" id="5758492">]</span><span class="op" id="5758493">]</span><span class="op" id="5758494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5758500">Body</span><span class="op" id="5758504">:</span>&nbsp;<span class="ident" id="5758506"><a href="/go/doc/reader.go.html#5758275">body</a></span><span class="op" id="5758510">,</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5758515">}</span><span class="op" id="5758516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5758520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5758523">}</span><br>
<span class="lineno"></span><span class="op" id="5758525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span><span class="comment" id="5758528">//&nbsp;readNotes&nbsp;extracts&nbsp;notes&nbsp;from&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="5758571">//&nbsp;A&nbsp;note&nbsp;must&nbsp;start&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;comment&nbsp;with&nbsp;&#34;MARKER(uid):&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5758642">//&nbsp;and&nbsp;is&nbsp;followed&nbsp;by&nbsp;the&nbsp;note&nbsp;body&nbsp;(e.g.,&nbsp;&#34;//&nbsp;BUG(gri):&nbsp;fix&nbsp;this&#34;).</span><br>
<span class="lineno"></span><span class="comment" id="5758711">//&nbsp;The&nbsp;note&nbsp;ends&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;comment&nbsp;group&nbsp;or&nbsp;at&nbsp;the&nbsp;start&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5758779">//&nbsp;another&nbsp;note&nbsp;in&nbsp;the&nbsp;same&nbsp;comment&nbsp;group,&nbsp;whichever&nbsp;comes&nbsp;first.</span><br>
<span class="lineno">435</span><span class="comment" id="5758845">//</span><br>
<span class="lineno"></span><span class="keyword" id="5758848">func</span>&nbsp;<span class="op" id="5758853">(</span><span class="ident" id="5758854">r</span>&nbsp;<span class="op" id="5758856">*</span><span class="ident" id="5758857"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5758863">)</span>&nbsp;<span class="ident" id="5758865">readNotes</span><span class="op" id="5758874">(</span><span class="ident" id="5758875">comments</span>&nbsp;<span class="op" id="5758884">[</span><span class="op" id="5758885">]</span><span class="op" id="5758886">*</span><span class="ident" id="5758887"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5758890">.</span><span class="ident" id="5758891">CommentGroup</span><span class="op" id="5758903">)</span>&nbsp;<span class="op" id="5758905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5758908">for</span>&nbsp;<span class="ident" id="5758912">_</span><span class="op" id="5758913">,</span>&nbsp;<span class="ident" id="5758915">group</span>&nbsp;<span class="op" id="5758921">:=</span>&nbsp;<span class="keyword" id="5758924">range</span>&nbsp;<span class="ident" id="5758930"><a href="/go/doc/reader.go.html#5758875">comments</a></span>&nbsp;<span class="op" id="5758939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5758943">i</span>&nbsp;<span class="op" id="5758945">:=</span>&nbsp;<span class="op" id="5758948">-</span><span class="num" id="5758949">1</span>&nbsp;<span class="comment" id="5758951">//&nbsp;comment&nbsp;index&nbsp;of&nbsp;most&nbsp;recent&nbsp;note&nbsp;start,&nbsp;valid&nbsp;if&nbsp;&gt;=&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5759011">list</span>&nbsp;<span class="op" id="5759016">:=</span>&nbsp;<span class="ident" id="5759019"><a href="/go/doc/reader.go.html#5758915">group</a></span><span class="op" id="5759024">.</span><span class="ident" id="5759025">List</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5759032">for</span>&nbsp;<span class="ident" id="5759036">j</span><span class="op" id="5759037">,</span>&nbsp;<span class="ident" id="5759039">c</span>&nbsp;<span class="op" id="5759041">:=</span>&nbsp;<span class="keyword" id="5759044">range</span>&nbsp;<span class="ident" id="5759050"><a href="/go/doc/reader.go.html#5759011">list</a></span>&nbsp;<span class="op" id="5759055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5759060">if</span>&nbsp;<span class="ident" id="5759063"><a href="/go/doc/reader.go.html#5757780">noteCommentRx</a></span><span class="op" id="5759076">.</span><span class="ident" id="5759077">MatchString</span><span class="op" id="5759088">(</span><span class="ident" id="5759089"><a href="/go/doc/reader.go.html#5759039">c</a></span><span class="op" id="5759090">.</span><span class="ident" id="5759091">Text</span><span class="op" id="5759095">)</span>&nbsp;<span class="op" id="5759097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5759103">if</span>&nbsp;<span class="ident" id="5759106"><a href="/go/doc/reader.go.html#5758943">i</a></span>&nbsp;<span class="op" id="5759108">&gt;=</span>&nbsp;<span class="num" id="5759111">0</span>&nbsp;<span class="op" id="5759113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5759120"><a href="/go/doc/reader.go.html#5758854">r</a></span><span class="op" id="5759121">.</span><span class="ident" id="5759122">readNote</span><span class="op" id="5759130">(</span><span class="ident" id="5759131"><a href="/go/doc/reader.go.html#5759011">list</a></span><span class="op" id="5759135">[</span><span class="ident" id="5759136"><a href="/go/doc/reader.go.html#5758943">i</a></span><span class="op" id="5759137">:</span><span class="ident" id="5759138"><a href="/go/doc/reader.go.html#5759036">j</a></span><span class="op" id="5759139">]</span><span class="op" id="5759140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5759146">}</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5759152"><a href="/go/doc/reader.go.html#5758943">i</a></span>&nbsp;<span class="op" id="5759154">=</span>&nbsp;<span class="ident" id="5759156"><a href="/go/doc/reader.go.html#5759036">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5759161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5759165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5759169">if</span>&nbsp;<span class="ident" id="5759172"><a href="/go/doc/reader.go.html#5758943">i</a></span>&nbsp;<span class="op" id="5759174">&gt;=</span>&nbsp;<span class="num" id="5759177">0</span>&nbsp;<span class="op" id="5759179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5759184"><a href="/go/doc/reader.go.html#5758854">r</a></span><span class="op" id="5759185">.</span><span class="ident" id="5759186">readNote</span><span class="op" id="5759194">(</span><span class="ident" id="5759195"><a href="/go/doc/reader.go.html#5759011">list</a></span><span class="op" id="5759199">[</span><span class="ident" id="5759200"><a href="/go/doc/reader.go.html#5758943">i</a></span><span class="op" id="5759201">:</span><span class="op" id="5759202">]</span><span class="op" id="5759203">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5759207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5759210">}</span><br>
<span class="lineno"></span><span class="op" id="5759212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5759215">//&nbsp;readFile&nbsp;adds&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;source&nbsp;file&nbsp;to&nbsp;the&nbsp;reader.</span><br>
<span class="lineno">455</span><span class="comment" id="5759273">//</span><br>
<span class="lineno"></span><span class="keyword" id="5759276">func</span>&nbsp;<span class="op" id="5759281">(</span><span class="ident" id="5759282">r</span>&nbsp;<span class="op" id="5759284">*</span><span class="ident" id="5759285"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5759291">)</span>&nbsp;<span class="ident" id="5759293">readFile</span><span class="op" id="5759301">(</span><span class="ident" id="5759302">src</span>&nbsp;<span class="op" id="5759306">*</span><span class="ident" id="5759307"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5759310">.</span><span class="ident" id="5759311">File</span><span class="op" id="5759315">)</span>&nbsp;<span class="op" id="5759317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5759320">//&nbsp;add&nbsp;package&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5759350">if</span>&nbsp;<span class="ident" id="5759353"><a href="/go/doc/reader.go.html#5759302">src</a></span><span class="op" id="5759356">.</span><span class="ident" id="5759357">Doc</span>&nbsp;<span class="op" id="5759361">!=</span>&nbsp;<span class="ident" id="5759364">nil</span>&nbsp;<span class="op" id="5759368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5759372"><a href="/go/doc/reader.go.html#5759282">r</a></span><span class="op" id="5759373">.</span><span class="ident" id="5759374">readDoc</span><span class="op" id="5759381">(</span><span class="ident" id="5759382"><a href="/go/doc/reader.go.html#5759302">src</a></span><span class="op" id="5759385">.</span><span class="ident" id="5759386">Doc</span><span class="op" id="5759389">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5759393"><a href="/go/doc/reader.go.html#5759302">src</a></span><span class="op" id="5759396">.</span><span class="ident" id="5759397">Doc</span>&nbsp;<span class="op" id="5759401">=</span>&nbsp;<span class="ident" id="5759403">nil</span>&nbsp;<span class="comment" id="5759407">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5759442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5759446">//&nbsp;add&nbsp;all&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5759471">for</span>&nbsp;<span class="ident" id="5759475">_</span><span class="op" id="5759476">,</span>&nbsp;<span class="ident" id="5759478">decl</span>&nbsp;<span class="op" id="5759483">:=</span>&nbsp;<span class="keyword" id="5759486">range</span>&nbsp;<span class="ident" id="5759492"><a href="/go/doc/reader.go.html#5759302">src</a></span><span class="op" id="5759495">.</span><span class="ident" id="5759496">Decls</span>&nbsp;<span class="op" id="5759502">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5759506">switch</span>&nbsp;<span class="ident" id="5759513">d</span>&nbsp;<span class="op" id="5759515">:=</span>&nbsp;<span class="ident" id="5759518"><a href="/go/doc/reader.go.html#5759478">decl</a></span><span class="op" id="5759522">.</span><span class="op" id="5759523">(</span><span class="keyword" id="5759524">type</span><span class="op" id="5759528">)</span>&nbsp;<span class="op" id="5759530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5759534">case</span>&nbsp;<span class="op" id="5759539">*</span><span class="ident" id="5759540"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5759543">.</span><span class="ident" id="5759544">GenDecl</span><span class="op" id="5759551">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5759556">switch</span>&nbsp;<span class="ident" id="5759563"><a href="/go/doc/reader.go.html#5759513">d</a></span><span class="op" id="5759564">.</span><span class="ident" id="5759565">Tok</span>&nbsp;<span class="op" id="5759569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5759574">case</span>&nbsp;<span class="ident" id="5759579"><a href="/go/doc/reader.go.html#5746692">token</a></span><span class="op" id="5759584">.</span><span class="ident" id="5759585">IMPORT</span><span class="op" id="5759591">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5759597">//&nbsp;imports&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5759637">for</span>&nbsp;<span class="ident" id="5759641">_</span><span class="op" id="5759642">,</span>&nbsp;<span class="ident" id="5759644">spec</span>&nbsp;<span class="op" id="5759649">:=</span>&nbsp;<span class="keyword" id="5759652">range</span>&nbsp;<span class="ident" id="5759658"><a href="/go/doc/reader.go.html#5759513">d</a></span><span class="op" id="5759659">.</span><span class="ident" id="5759660">Specs</span>&nbsp;<span class="op" id="5759666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5759673">if</span>&nbsp;<span class="ident" id="5759676">s</span><span class="op" id="5759677">,</span>&nbsp;<span class="ident" id="5759679">ok</span>&nbsp;<span class="op" id="5759682">:=</span>&nbsp;<span class="ident" id="5759685"><a href="/go/doc/reader.go.html#5759644">spec</a></span><span class="op" id="5759689">.</span><span class="op" id="5759690">(</span><span class="op" id="5759691">*</span><span class="ident" id="5759692"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5759695">.</span><span class="ident" id="5759696">ImportSpec</span><span class="op" id="5759706">)</span><span class="op" id="5759707">;</span>&nbsp;<span class="ident" id="5759709"><a href="/go/doc/reader.go.html#5759679">ok</a></span>&nbsp;<span class="op" id="5759712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5759720">if</span>&nbsp;<span class="ident" id="5759723">import_</span><span class="op" id="5759730">,</span>&nbsp;<span class="ident" id="5759732">err</span>&nbsp;<span class="op" id="5759736">:=</span>&nbsp;<span class="ident" id="5759739"><a href="/go/doc/reader.go.html#5746722">strconv</a></span><span class="op" id="5759746">.</span><span class="ident" id="5759747">Unquote</span><span class="op" id="5759754">(</span><span class="ident" id="5759755"><a href="/go/doc/reader.go.html#5759676">s</a></span><span class="op" id="5759756">.</span><span class="ident" id="5759757">Path</span><span class="op" id="5759761">.</span><span class="ident" id="5759762">Value</span><span class="op" id="5759767">)</span><span class="op" id="5759768">;</span>&nbsp;<span class="ident" id="5759770"><a href="/go/doc/reader.go.html#5759732">err</a></span>&nbsp;<span class="op" id="5759774">==</span>&nbsp;<span class="ident" id="5759777">nil</span>&nbsp;<span class="op" id="5759781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5759790"><a href="/go/doc/reader.go.html#5759282">r</a></span><span class="op" id="5759791">.</span><span class="ident" id="5759792">imports</span><span class="op" id="5759799">[</span><span class="ident" id="5759800"><a href="/go/doc/reader.go.html#5759723">import_</a></span><span class="op" id="5759807">]</span>&nbsp;<span class="op" id="5759809">=</span>&nbsp;<span class="num" id="5759811">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5759819">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5759826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5759832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5759837">case</span>&nbsp;<span class="ident" id="5759842"><a href="/go/doc/reader.go.html#5746692">token</a></span><span class="op" id="5759847">.</span><span class="ident" id="5759848">CONST</span><span class="op" id="5759853">,</span>&nbsp;<span class="ident" id="5759855"><a href="/go/doc/reader.go.html#5746692">token</a></span><span class="op" id="5759860">.</span><span class="ident" id="5759861">VAR</span><span class="op" id="5759864">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5759870">//&nbsp;constants&nbsp;and&nbsp;variables&nbsp;are&nbsp;always&nbsp;handled&nbsp;as&nbsp;a&nbsp;group</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5759931"><a href="/go/doc/reader.go.html#5759282">r</a></span><span class="op" id="5759932">.</span><span class="ident" id="5759933">readValue</span><span class="op" id="5759942">(</span><span class="ident" id="5759943"><a href="/go/doc/reader.go.html#5759513">d</a></span><span class="op" id="5759944">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5759949">case</span>&nbsp;<span class="ident" id="5759954"><a href="/go/doc/reader.go.html#5746692">token</a></span><span class="op" id="5759959">.</span><span class="ident" id="5759960">TYPE</span><span class="op" id="5759964">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5759970">//&nbsp;types&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5760008">if</span>&nbsp;<span class="builtinfunc" id="5760011">len</span><span class="op" id="5760014">(</span><span class="ident" id="5760015"><a href="/go/doc/reader.go.html#5759513">d</a></span><span class="op" id="5760016">.</span><span class="ident" id="5760017">Specs</span><span class="op" id="5760022">)</span>&nbsp;<span class="op" id="5760024">==</span>&nbsp;<span class="num" id="5760027">1</span>&nbsp;<span class="op" id="5760029">&amp;&amp;</span>&nbsp;<span class="op" id="5760032">!</span><span class="ident" id="5760033"><a href="/go/doc/reader.go.html#5759513">d</a></span><span class="op" id="5760034">.</span><span class="ident" id="5760035">Lparen</span><span class="op" id="5760041">.</span><span class="ident" id="5760042">IsValid</span><span class="op" id="5760049">(</span><span class="op" id="5760050">)</span>&nbsp;<span class="op" id="5760052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5760059">//&nbsp;common&nbsp;case:&nbsp;single&nbsp;declaration&nbsp;w/o&nbsp;parentheses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5760115">//&nbsp;(if&nbsp;a&nbsp;single&nbsp;declaration&nbsp;is&nbsp;parenthesized,</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5760166">//&nbsp;create&nbsp;a&nbsp;new&nbsp;fake&nbsp;declaration&nbsp;below,&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5760219">//&nbsp;go/doc&nbsp;type&nbsp;declarations&nbsp;always&nbsp;appear&nbsp;w/o</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5760270">//&nbsp;parentheses)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5760291">if</span>&nbsp;<span class="ident" id="5760294">s</span><span class="op" id="5760295">,</span>&nbsp;<span class="ident" id="5760297">ok</span>&nbsp;<span class="op" id="5760300">:=</span>&nbsp;<span class="ident" id="5760303"><a href="/go/doc/reader.go.html#5759513">d</a></span><span class="op" id="5760304">.</span><span class="ident" id="5760305">Specs</span><span class="op" id="5760310">[</span><span class="num" id="5760311">0</span><span class="op" id="5760312">]</span><span class="op" id="5760313">.</span><span class="op" id="5760314">(</span><span class="op" id="5760315">*</span><span class="ident" id="5760316"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5760319">.</span><span class="ident" id="5760320">TypeSpec</span><span class="op" id="5760328">)</span><span class="op" id="5760329">;</span>&nbsp;<span class="ident" id="5760331"><a href="/go/doc/reader.go.html#5760297">ok</a></span>&nbsp;<span class="op" id="5760334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5760342"><a href="/go/doc/reader.go.html#5759282">r</a></span><span class="op" id="5760343">.</span><span class="ident" id="5760344">readType</span><span class="op" id="5760352">(</span><span class="ident" id="5760353"><a href="/go/doc/reader.go.html#5759513">d</a></span><span class="op" id="5760354">,</span>&nbsp;<span class="ident" id="5760356"><a href="/go/doc/reader.go.html#5760294">s</a></span><span class="op" id="5760357">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5760364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5760371">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5760381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5760387">for</span>&nbsp;<span class="ident" id="5760391">_</span><span class="op" id="5760392">,</span>&nbsp;<span class="ident" id="5760394">spec</span>&nbsp;<span class="op" id="5760399">:=</span>&nbsp;<span class="keyword" id="5760402">range</span>&nbsp;<span class="ident" id="5760408"><a href="/go/doc/reader.go.html#5759513">d</a></span><span class="op" id="5760409">.</span><span class="ident" id="5760410">Specs</span>&nbsp;<span class="op" id="5760416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5760423">if</span>&nbsp;<span class="ident" id="5760426">s</span><span class="op" id="5760427">,</span>&nbsp;<span class="ident" id="5760429">ok</span>&nbsp;<span class="op" id="5760432">:=</span>&nbsp;<span class="ident" id="5760435"><a href="/go/doc/reader.go.html#5760394">spec</a></span><span class="op" id="5760439">.</span><span class="op" id="5760440">(</span><span class="op" id="5760441">*</span><span class="ident" id="5760442"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5760445">.</span><span class="ident" id="5760446">TypeSpec</span><span class="op" id="5760454">)</span><span class="op" id="5760455">;</span>&nbsp;<span class="ident" id="5760457"><a href="/go/doc/reader.go.html#5760429">ok</a></span>&nbsp;<span class="op" id="5760460">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5760468">//&nbsp;use&nbsp;an&nbsp;individual&nbsp;(possibly&nbsp;fake)&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5760523">//&nbsp;for&nbsp;each&nbsp;type;&nbsp;this&nbsp;also&nbsp;ensures&nbsp;that&nbsp;each&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5760580">//&nbsp;gets&nbsp;to&nbsp;(re-)use&nbsp;the&nbsp;declaration&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5760636">//&nbsp;if&nbsp;there&#39;s&nbsp;none&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5760693">fake</span>&nbsp;<span class="op" id="5760698">:=</span>&nbsp;<span class="op" id="5760701">&amp;</span><span class="ident" id="5760702"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5760705">.</span><span class="ident" id="5760706">GenDecl</span><span class="op" id="5760713">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5760722">Doc</span><span class="op" id="5760725">:</span>&nbsp;<span class="ident" id="5760727"><a href="/go/doc/reader.go.html#5759513">d</a></span><span class="op" id="5760728">.</span><span class="ident" id="5760729">Doc</span><span class="op" id="5760732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5760741">//&nbsp;don&#39;t&nbsp;use&nbsp;the&nbsp;existing&nbsp;TokPos&nbsp;because&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5760792">//&nbsp;will&nbsp;lead&nbsp;to&nbsp;the&nbsp;wrong&nbsp;selection&nbsp;range&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5760845">//&nbsp;the&nbsp;fake&nbsp;declaration&nbsp;if&nbsp;there&nbsp;are&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5760894">//&nbsp;than&nbsp;one&nbsp;type&nbsp;in&nbsp;the&nbsp;group&nbsp;(this&nbsp;affects</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5760945">//&nbsp;src/cmd/godoc/godoc.go&#39;s&nbsp;posLink_urlFunc)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5760997">TokPos</span><span class="op" id="5761003">:</span>&nbsp;<span class="ident" id="5761005"><a href="/go/doc/reader.go.html#5760426">s</a></span><span class="op" id="5761006">.</span><span class="ident" id="5761007">Pos</span><span class="op" id="5761010">(</span><span class="op" id="5761011">)</span><span class="op" id="5761012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761021">Tok</span><span class="op" id="5761024">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5761029"><a href="/go/doc/reader.go.html#5746692">token</a></span><span class="op" id="5761034">.</span><span class="ident" id="5761035">TYPE</span><span class="op" id="5761039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761048">Specs</span><span class="op" id="5761053">:</span>&nbsp;&nbsp;<span class="op" id="5761056">[</span><span class="op" id="5761057">]</span><span class="ident" id="5761058"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5761061">.</span><span class="ident" id="5761062">Spec</span><span class="op" id="5761066">{</span><span class="ident" id="5761067"><a href="/go/doc/reader.go.html#5760426">s</a></span><span class="op" id="5761068">}</span><span class="op" id="5761069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5761077">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761085"><a href="/go/doc/reader.go.html#5759282">r</a></span><span class="op" id="5761086">.</span><span class="ident" id="5761087">readType</span><span class="op" id="5761095">(</span><span class="ident" id="5761096"><a href="/go/doc/reader.go.html#5760693">fake</a></span><span class="op" id="5761100">,</span>&nbsp;<span class="ident" id="5761102"><a href="/go/doc/reader.go.html#5760426">s</a></span><span class="op" id="5761103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5761110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5761116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5761121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5761125">case</span>&nbsp;<span class="op" id="5761130">*</span><span class="ident" id="5761131"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5761134">.</span><span class="ident" id="5761135">FuncDecl</span><span class="op" id="5761143">:</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761148"><a href="/go/doc/reader.go.html#5759282">r</a></span><span class="op" id="5761149">.</span><span class="ident" id="5761150">readFunc</span><span class="op" id="5761158">(</span><span class="ident" id="5761159"><a href="/go/doc/reader.go.html#5759513">d</a></span><span class="op" id="5761160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5761164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5761167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5761171">//&nbsp;collect&nbsp;MARKER(...):&nbsp;annotations</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761208"><a href="/go/doc/reader.go.html#5759282">r</a></span><span class="op" id="5761209">.</span><span class="ident" id="5761210">readNotes</span><span class="op" id="5761219">(</span><span class="ident" id="5761220"><a href="/go/doc/reader.go.html#5759302">src</a></span><span class="op" id="5761223">.</span><span class="ident" id="5761224">Comments</span><span class="op" id="5761232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761235"><a href="/go/doc/reader.go.html#5759302">src</a></span><span class="op" id="5761238">.</span><span class="ident" id="5761239">Comments</span>&nbsp;<span class="op" id="5761248">=</span>&nbsp;<span class="ident" id="5761250">nil</span>&nbsp;<span class="comment" id="5761254">//&nbsp;consumed&nbsp;unassociated&nbsp;comments&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="5761306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5761309">func</span>&nbsp;<span class="op" id="5761314">(</span><span class="ident" id="5761315">r</span>&nbsp;<span class="op" id="5761317">*</span><span class="ident" id="5761318"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5761324">)</span>&nbsp;<span class="ident" id="5761326">readPackage</span><span class="op" id="5761337">(</span><span class="ident" id="5761338">pkg</span>&nbsp;<span class="op" id="5761342">*</span><span class="ident" id="5761343"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5761346">.</span><span class="ident" id="5761347">Package</span><span class="op" id="5761354">,</span>&nbsp;<span class="ident" id="5761356">mode</span>&nbsp;<span class="ident" id="5761361"><a href="/go/doc/doc.go.html#5727614">Mode</a></span><span class="op" id="5761365">)</span>&nbsp;<span class="op" id="5761367">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5761370">//&nbsp;initialize&nbsp;reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761392"><a href="/go/doc/reader.go.html#5761315">r</a></span><span class="op" id="5761393">.</span><span class="ident" id="5761394">filenames</span>&nbsp;<span class="op" id="5761404">=</span>&nbsp;<span class="builtinfunc" id="5761406">make</span><span class="op" id="5761410">(</span><span class="op" id="5761411">[</span><span class="op" id="5761412">]</span><span class="builtintype" id="5761413">string</span><span class="op" id="5761419">,</span>&nbsp;<span class="builtinfunc" id="5761421">len</span><span class="op" id="5761424">(</span><span class="ident" id="5761425"><a href="/go/doc/reader.go.html#5761338">pkg</a></span><span class="op" id="5761428">.</span><span class="ident" id="5761429">Files</span><span class="op" id="5761434">)</span><span class="op" id="5761435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761438"><a href="/go/doc/reader.go.html#5761315">r</a></span><span class="op" id="5761439">.</span><span class="ident" id="5761440">imports</span>&nbsp;<span class="op" id="5761448">=</span>&nbsp;<span class="builtinfunc" id="5761450">make</span><span class="op" id="5761454">(</span><span class="keyword" id="5761455">map</span><span class="op" id="5761458">[</span><span class="builtintype" id="5761459">string</span><span class="op" id="5761465">]</span><span class="builtintype" id="5761466">int</span><span class="op" id="5761469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761472"><a href="/go/doc/reader.go.html#5761315">r</a></span><span class="op" id="5761473">.</span><span class="ident" id="5761474">mode</span>&nbsp;<span class="op" id="5761479">=</span>&nbsp;<span class="ident" id="5761481"><a href="/go/doc/reader.go.html#5761356">mode</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761487"><a href="/go/doc/reader.go.html#5761315">r</a></span><span class="op" id="5761488">.</span><span class="ident" id="5761489">types</span>&nbsp;<span class="op" id="5761495">=</span>&nbsp;<span class="builtinfunc" id="5761497">make</span><span class="op" id="5761501">(</span><span class="keyword" id="5761502">map</span><span class="op" id="5761505">[</span><span class="builtintype" id="5761506">string</span><span class="op" id="5761512">]</span><span class="op" id="5761513">*</span><span class="ident" id="5761514"><a href="/go/doc/reader.go.html#5749710">namedType</a></span><span class="op" id="5761523">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761526"><a href="/go/doc/reader.go.html#5761315">r</a></span><span class="op" id="5761527">.</span><span class="ident" id="5761528">funcs</span>&nbsp;<span class="op" id="5761534">=</span>&nbsp;<span class="builtinfunc" id="5761536">make</span><span class="op" id="5761540">(</span><span class="ident" id="5761541"><a href="/go/doc/reader.go.html#5747095">methodSet</a></span><span class="op" id="5761550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761553"><a href="/go/doc/reader.go.html#5761315">r</a></span><span class="op" id="5761554">.</span><span class="ident" id="5761555">notes</span>&nbsp;<span class="op" id="5761561">=</span>&nbsp;<span class="builtinfunc" id="5761563">make</span><span class="op" id="5761567">(</span><span class="keyword" id="5761568">map</span><span class="op" id="5761571">[</span><span class="builtintype" id="5761572">string</span><span class="op" id="5761578">]</span><span class="op" id="5761579">[</span><span class="op" id="5761580">]</span><span class="op" id="5761581">*</span><span class="ident" id="5761582"><a href="/go/doc/doc.go.html#5727385">Note</a></span><span class="op" id="5761586">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5761590">//&nbsp;sort&nbsp;package&nbsp;files&nbsp;before&nbsp;reading&nbsp;them&nbsp;so&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5761645">//&nbsp;result&nbsp;does&nbsp;not&nbsp;depend&nbsp;on&nbsp;map&nbsp;iteration&nbsp;order</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761695">i</span>&nbsp;<span class="op" id="5761697">:=</span>&nbsp;<span class="num" id="5761700">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5761703">for</span>&nbsp;<span class="ident" id="5761707">filename</span>&nbsp;<span class="op" id="5761716">:=</span>&nbsp;<span class="keyword" id="5761719">range</span>&nbsp;<span class="ident" id="5761725"><a href="/go/doc/reader.go.html#5761338">pkg</a></span><span class="op" id="5761728">.</span><span class="ident" id="5761729">Files</span>&nbsp;<span class="op" id="5761735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761739"><a href="/go/doc/reader.go.html#5761315">r</a></span><span class="op" id="5761740">.</span><span class="ident" id="5761741">filenames</span><span class="op" id="5761750">[</span><span class="ident" id="5761751"><a href="/go/doc/reader.go.html#5761695">i</a></span><span class="op" id="5761752">]</span>&nbsp;<span class="op" id="5761754">=</span>&nbsp;<span class="ident" id="5761756"><a href="/go/doc/reader.go.html#5761707">filename</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761767"><a href="/go/doc/reader.go.html#5761695">i</a></span><span class="op" id="5761768">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5761772">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761775"><a href="/go/doc/reader.go.html#5746714">sort</a></span><span class="op" id="5761779">.</span><span class="ident" id="5761780">Strings</span><span class="op" id="5761787">(</span><span class="ident" id="5761788"><a href="/go/doc/reader.go.html#5761315">r</a></span><span class="op" id="5761789">.</span><span class="ident" id="5761790">filenames</span><span class="op" id="5761799">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5761803">//&nbsp;process&nbsp;files&nbsp;in&nbsp;sorted&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5761837">for</span>&nbsp;<span class="ident" id="5761841">_</span><span class="op" id="5761842">,</span>&nbsp;<span class="ident" id="5761844">filename</span>&nbsp;<span class="op" id="5761853">:=</span>&nbsp;<span class="keyword" id="5761856">range</span>&nbsp;<span class="ident" id="5761862"><a href="/go/doc/reader.go.html#5761315">r</a></span><span class="op" id="5761863">.</span><span class="ident" id="5761864">filenames</span>&nbsp;<span class="op" id="5761874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761878">f</span>&nbsp;<span class="op" id="5761880">:=</span>&nbsp;<span class="ident" id="5761883"><a href="/go/doc/reader.go.html#5761338">pkg</a></span><span class="op" id="5761886">.</span><span class="ident" id="5761887">Files</span><span class="op" id="5761892">[</span><span class="ident" id="5761893"><a href="/go/doc/reader.go.html#5761844">filename</a></span><span class="op" id="5761901">]</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5761905">if</span>&nbsp;<span class="ident" id="5761908"><a href="/go/doc/reader.go.html#5761356">mode</a></span><span class="op" id="5761912">&amp;</span><span class="ident" id="5761913"><a href="/go/doc/doc.go.html#5727722">AllDecls</a></span>&nbsp;<span class="op" id="5761922">==</span>&nbsp;<span class="num" id="5761925">0</span>&nbsp;<span class="op" id="5761927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761932"><a href="/go/doc/reader.go.html#5761315">r</a></span><span class="op" id="5761933">.</span><span class="ident" id="5761934">fileExports</span><span class="op" id="5761945">(</span><span class="ident" id="5761946"><a href="/go/doc/reader.go.html#5761878">f</a></span><span class="op" id="5761947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5761951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5761955"><a href="/go/doc/reader.go.html#5761315">r</a></span><span class="op" id="5761956">.</span><span class="ident" id="5761957">readFile</span><span class="op" id="5761965">(</span><span class="ident" id="5761966"><a href="/go/doc/reader.go.html#5761878">f</a></span><span class="op" id="5761967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5761970">}</span><br>
<span class="lineno">550</span><span class="op" id="5761972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5761975">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5762055">//&nbsp;Types</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="5762065">func</span>&nbsp;<span class="ident" id="5762070">customizeRecv</span><span class="op" id="5762083">(</span><span class="ident" id="5762084">f</span>&nbsp;<span class="op" id="5762086">*</span><span class="ident" id="5762087"><a href="/go/doc/doc.go.html#5726778">Func</a></span><span class="op" id="5762091">,</span>&nbsp;<span class="ident" id="5762093">recvTypeName</span>&nbsp;<span class="builtintype" id="5762106">string</span><span class="op" id="5762112">,</span>&nbsp;<span class="ident" id="5762114">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="5762128">bool</span><span class="op" id="5762132">,</span>&nbsp;<span class="ident" id="5762134">level</span>&nbsp;<span class="builtintype" id="5762140">int</span><span class="op" id="5762143">)</span>&nbsp;<span class="op" id="5762145">*</span><span class="ident" id="5762146"><a href="/go/doc/doc.go.html#5726778">Func</a></span>&nbsp;<span class="op" id="5762151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5762154">if</span>&nbsp;<span class="ident" id="5762157"><a href="/go/doc/reader.go.html#5762084">f</a></span>&nbsp;<span class="op" id="5762159">==</span>&nbsp;<span class="ident" id="5762162">nil</span>&nbsp;<span class="op" id="5762166">||</span>&nbsp;<span class="ident" id="5762169"><a href="/go/doc/reader.go.html#5762084">f</a></span><span class="op" id="5762170">.</span><span class="ident" id="5762171">Decl</span>&nbsp;<span class="op" id="5762176">==</span>&nbsp;<span class="ident" id="5762179">nil</span>&nbsp;<span class="op" id="5762183">||</span>&nbsp;<span class="ident" id="5762186"><a href="/go/doc/reader.go.html#5762084">f</a></span><span class="op" id="5762187">.</span><span class="ident" id="5762188">Decl</span><span class="op" id="5762192">.</span><span class="ident" id="5762193">Recv</span>&nbsp;<span class="op" id="5762198">==</span>&nbsp;<span class="ident" id="5762201">nil</span>&nbsp;<span class="op" id="5762205">||</span>&nbsp;<span class="builtinfunc" id="5762208">len</span><span class="op" id="5762211">(</span><span class="ident" id="5762212"><a href="/go/doc/reader.go.html#5762084">f</a></span><span class="op" id="5762213">.</span><span class="ident" id="5762214">Decl</span><span class="op" id="5762218">.</span><span class="ident" id="5762219">Recv</span><span class="op" id="5762223">.</span><span class="ident" id="5762224">List</span><span class="op" id="5762228">)</span>&nbsp;<span class="op" id="5762230">!=</span>&nbsp;<span class="num" id="5762233">1</span>&nbsp;<span class="op" id="5762235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5762239">return</span>&nbsp;<span class="ident" id="5762246"><a href="/go/doc/reader.go.html#5762084">f</a></span>&nbsp;<span class="comment" id="5762248">//&nbsp;shouldn&#39;t&nbsp;happen,&nbsp;but&nbsp;be&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5762282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5762286">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;and&nbsp;set&nbsp;new&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5762336">newField</span>&nbsp;<span class="op" id="5762345">:=</span>&nbsp;<span class="op" id="5762348">*</span><span class="ident" id="5762349"><a href="/go/doc/reader.go.html#5762084">f</a></span><span class="op" id="5762350">.</span><span class="ident" id="5762351">Decl</span><span class="op" id="5762355">.</span><span class="ident" id="5762356">Recv</span><span class="op" id="5762360">.</span><span class="ident" id="5762361">List</span><span class="op" id="5762365">[</span><span class="num" id="5762366">0</span><span class="op" id="5762367">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5762370">origPos</span>&nbsp;<span class="op" id="5762378">:=</span>&nbsp;<span class="ident" id="5762381"><a href="/go/doc/reader.go.html#5762336">newField</a></span><span class="op" id="5762389">.</span><span class="ident" id="5762390">Type</span><span class="op" id="5762394">.</span><span class="ident" id="5762395">Pos</span><span class="op" id="5762398">(</span><span class="op" id="5762399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5762402">_</span><span class="op" id="5762403">,</span>&nbsp;<span class="ident" id="5762405">origRecvIsPtr</span>&nbsp;<span class="op" id="5762419">:=</span>&nbsp;<span class="ident" id="5762422"><a href="/go/doc/reader.go.html#5762336">newField</a></span><span class="op" id="5762430">.</span><span class="ident" id="5762431">Type</span><span class="op" id="5762435">.</span><span class="op" id="5762436">(</span><span class="op" id="5762437">*</span><span class="ident" id="5762438"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5762441">.</span><span class="ident" id="5762442">StarExpr</span><span class="op" id="5762450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5762453">newIdent</span>&nbsp;<span class="op" id="5762462">:=</span>&nbsp;<span class="op" id="5762465">&amp;</span><span class="ident" id="5762466"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5762469">.</span><span class="ident" id="5762470">Ident</span><span class="op" id="5762475">{</span><span class="ident" id="5762476">NamePos</span><span class="op" id="5762483">:</span>&nbsp;<span class="ident" id="5762485"><a href="/go/doc/reader.go.html#5762370">origPos</a></span><span class="op" id="5762492">,</span>&nbsp;<span class="ident" id="5762494">Name</span><span class="op" id="5762498">:</span>&nbsp;<span class="ident" id="5762500"><a href="/go/doc/reader.go.html#5762093">recvTypeName</a></span><span class="op" id="5762512">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5762515">var</span>&nbsp;<span class="ident" id="5762519">typ</span>&nbsp;<span class="ident" id="5762523"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5762526">.</span><span class="ident" id="5762527">Expr</span>&nbsp;<span class="op" id="5762532">=</span>&nbsp;<span class="ident" id="5762534"><a href="/go/doc/reader.go.html#5762453">newIdent</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5762544">if</span>&nbsp;<span class="op" id="5762547">!</span><span class="ident" id="5762548"><a href="/go/doc/reader.go.html#5762114">embeddedIsPtr</a></span>&nbsp;<span class="op" id="5762562">&amp;&amp;</span>&nbsp;<span class="ident" id="5762565"><a href="/go/doc/reader.go.html#5762405">origRecvIsPtr</a></span>&nbsp;<span class="op" id="5762579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5762583"><a href="/go/doc/reader.go.html#5762453">newIdent</a></span><span class="op" id="5762591">.</span><span class="ident" id="5762592">NamePos</span><span class="op" id="5762599">++</span>&nbsp;<span class="comment" id="5762602">//&nbsp;&#39;*&#39;&nbsp;is&nbsp;one&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5762628"><a href="/go/doc/reader.go.html#5762519">typ</a></span>&nbsp;<span class="op" id="5762632">=</span>&nbsp;<span class="op" id="5762634">&amp;</span><span class="ident" id="5762635"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5762638">.</span><span class="ident" id="5762639">StarExpr</span><span class="op" id="5762647">{</span><span class="ident" id="5762648">Star</span><span class="op" id="5762652">:</span>&nbsp;<span class="ident" id="5762654"><a href="/go/doc/reader.go.html#5762370">origPos</a></span><span class="op" id="5762661">,</span>&nbsp;<span class="ident" id="5762663">X</span><span class="op" id="5762664">:</span>&nbsp;<span class="ident" id="5762666"><a href="/go/doc/reader.go.html#5762453">newIdent</a></span><span class="op" id="5762674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5762677">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5762680"><a href="/go/doc/reader.go.html#5762336">newField</a></span><span class="op" id="5762688">.</span><span class="ident" id="5762689">Type</span>&nbsp;<span class="op" id="5762694">=</span>&nbsp;<span class="ident" id="5762696"><a href="/go/doc/reader.go.html#5762519">typ</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5762702">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;list&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5762767">newFieldList</span>&nbsp;<span class="op" id="5762780">:=</span>&nbsp;<span class="op" id="5762783">*</span><span class="ident" id="5762784"><a href="/go/doc/reader.go.html#5762084">f</a></span><span class="op" id="5762785">.</span><span class="ident" id="5762786">Decl</span><span class="op" id="5762790">.</span><span class="ident" id="5762791">Recv</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5762797"><a href="/go/doc/reader.go.html#5762767">newFieldList</a></span><span class="op" id="5762809">.</span><span class="ident" id="5762810">List</span>&nbsp;<span class="op" id="5762815">=</span>&nbsp;<span class="op" id="5762817">[</span><span class="op" id="5762818">]</span><span class="op" id="5762819">*</span><span class="ident" id="5762820"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5762823">.</span><span class="ident" id="5762824">Field</span><span class="op" id="5762829">{</span><span class="op" id="5762830">&amp;</span><span class="ident" id="5762831"><a href="/go/doc/reader.go.html#5762336">newField</a></span><span class="op" id="5762839">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5762843">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;declaration&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5762914">newFuncDecl</span>&nbsp;<span class="op" id="5762926">:=</span>&nbsp;<span class="op" id="5762929">*</span><span class="ident" id="5762930"><a href="/go/doc/reader.go.html#5762084">f</a></span><span class="op" id="5762931">.</span><span class="ident" id="5762932">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5762938"><a href="/go/doc/reader.go.html#5762914">newFuncDecl</a></span><span class="op" id="5762949">.</span><span class="ident" id="5762950">Recv</span>&nbsp;<span class="op" id="5762955">=</span>&nbsp;<span class="op" id="5762957">&amp;</span><span class="ident" id="5762958"><a href="/go/doc/reader.go.html#5762767">newFieldList</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5762973">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;documentation&nbsp;and&nbsp;set&nbsp;new&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5763038">newF</span>&nbsp;<span class="op" id="5763043">:=</span>&nbsp;<span class="op" id="5763046">*</span><span class="ident" id="5763047"><a href="/go/doc/reader.go.html#5762084">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5763050"><a href="/go/doc/reader.go.html#5763038">newF</a></span><span class="op" id="5763054">.</span><span class="ident" id="5763055">Decl</span>&nbsp;<span class="op" id="5763060">=</span>&nbsp;<span class="op" id="5763062">&amp;</span><span class="ident" id="5763063"><a href="/go/doc/reader.go.html#5762914">newFuncDecl</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5763076"><a href="/go/doc/reader.go.html#5763038">newF</a></span><span class="op" id="5763080">.</span><span class="ident" id="5763081">Recv</span>&nbsp;<span class="op" id="5763086">=</span>&nbsp;<span class="ident" id="5763088"><a href="/go/doc/reader.go.html#5747257">recvString</a></span><span class="op" id="5763098">(</span><span class="ident" id="5763099"><a href="/go/doc/reader.go.html#5762519">typ</a></span><span class="op" id="5763102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5763105">//&nbsp;the&nbsp;Orig&nbsp;field&nbsp;never&nbsp;changes</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5763138"><a href="/go/doc/reader.go.html#5763038">newF</a></span><span class="op" id="5763142">.</span><span class="ident" id="5763143">Level</span>&nbsp;<span class="op" id="5763149">=</span>&nbsp;<span class="ident" id="5763151"><a href="/go/doc/reader.go.html#5762134">level</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5763159">return</span>&nbsp;<span class="op" id="5763166">&amp;</span><span class="ident" id="5763167"><a href="/go/doc/reader.go.html#5763038">newF</a></span><br>
<span class="lineno"></span><span class="op" id="5763172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span><span class="comment" id="5763175">//&nbsp;collectEmbeddedMethods&nbsp;collects&nbsp;the&nbsp;embedded&nbsp;methods&nbsp;of&nbsp;typ&nbsp;in&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="5763247">//</span><br>
<span class="lineno"></span><span class="keyword" id="5763250">func</span>&nbsp;<span class="op" id="5763255">(</span><span class="ident" id="5763256">r</span>&nbsp;<span class="op" id="5763258">*</span><span class="ident" id="5763259"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5763265">)</span>&nbsp;<span class="ident" id="5763267">collectEmbeddedMethods</span><span class="op" id="5763289">(</span><span class="ident" id="5763290">mset</span>&nbsp;<span class="ident" id="5763295"><a href="/go/doc/reader.go.html#5747095">methodSet</a></span><span class="op" id="5763304">,</span>&nbsp;<span class="ident" id="5763306">typ</span>&nbsp;<span class="op" id="5763310">*</span><span class="ident" id="5763311"><a href="/go/doc/reader.go.html#5749710">namedType</a></span><span class="op" id="5763320">,</span>&nbsp;<span class="ident" id="5763322">recvTypeName</span>&nbsp;<span class="builtintype" id="5763335">string</span><span class="op" id="5763341">,</span>&nbsp;<span class="ident" id="5763343">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="5763357">bool</span><span class="op" id="5763361">,</span>&nbsp;<span class="ident" id="5763363">level</span>&nbsp;<span class="builtintype" id="5763369">int</span><span class="op" id="5763372">,</span>&nbsp;<span class="ident" id="5763374">visited</span>&nbsp;<span class="ident" id="5763382"><a href="/go/doc/reader.go.html#5749501">embeddedSet</a></span><span class="op" id="5763393">)</span>&nbsp;<span class="op" id="5763395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5763398"><a href="/go/doc/reader.go.html#5763374">visited</a></span><span class="op" id="5763405">[</span><span class="ident" id="5763406"><a href="/go/doc/reader.go.html#5763306">typ</a></span><span class="op" id="5763409">]</span>&nbsp;<span class="op" id="5763411">=</span>&nbsp;<span class="builtintype" id="5763413">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5763419">for</span>&nbsp;<span class="ident" id="5763423">embedded</span><span class="op" id="5763431">,</span>&nbsp;<span class="ident" id="5763433">isPtr</span>&nbsp;<span class="op" id="5763439">:=</span>&nbsp;<span class="keyword" id="5763442">range</span>&nbsp;<span class="ident" id="5763448"><a href="/go/doc/reader.go.html#5763306">typ</a></span><span class="op" id="5763451">.</span><span class="ident" id="5763452">embedded</span>&nbsp;<span class="op" id="5763461">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5763465">//&nbsp;Once&nbsp;an&nbsp;embedded&nbsp;type&nbsp;is&nbsp;embedded&nbsp;as&nbsp;a&nbsp;pointer&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5763522">//&nbsp;all&nbsp;embedded&nbsp;types&nbsp;in&nbsp;those&nbsp;types&nbsp;are&nbsp;treated&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5763578">//&nbsp;pointer&nbsp;types&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of&nbsp;the&nbsp;receiver&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5763634">//&nbsp;computation;&nbsp;i.e.,&nbsp;embeddedIsPtr&nbsp;is&nbsp;sticky&nbsp;for&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5763691">//&nbsp;embedding&nbsp;hierarchy.</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5763717">thisEmbeddedIsPtr</span>&nbsp;<span class="op" id="5763735">:=</span>&nbsp;<span class="ident" id="5763738"><a href="/go/doc/reader.go.html#5763343">embeddedIsPtr</a></span>&nbsp;<span class="op" id="5763752">||</span>&nbsp;<span class="ident" id="5763755"><a href="/go/doc/reader.go.html#5763433">isPtr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5763763">for</span>&nbsp;<span class="ident" id="5763767">_</span><span class="op" id="5763768">,</span>&nbsp;<span class="ident" id="5763770">m</span>&nbsp;<span class="op" id="5763772">:=</span>&nbsp;<span class="keyword" id="5763775">range</span>&nbsp;<span class="ident" id="5763781"><a href="/go/doc/reader.go.html#5763423">embedded</a></span><span class="op" id="5763789">.</span><span class="ident" id="5763790">methods</span>&nbsp;<span class="op" id="5763798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5763803">//&nbsp;only&nbsp;top-level&nbsp;methods&nbsp;are&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5763845">if</span>&nbsp;<span class="ident" id="5763848"><a href="/go/doc/reader.go.html#5763770">m</a></span><span class="op" id="5763849">.</span><span class="ident" id="5763850">Level</span>&nbsp;<span class="op" id="5763856">==</span>&nbsp;<span class="num" id="5763859">0</span>&nbsp;<span class="op" id="5763861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5763867"><a href="/go/doc/reader.go.html#5763290">mset</a></span><span class="op" id="5763871">.</span><span class="ident" id="5763872">add</span><span class="op" id="5763875">(</span><span class="ident" id="5763876"><a href="/go/doc/reader.go.html#5762070">customizeRecv</a></span><span class="op" id="5763889">(</span><span class="ident" id="5763890"><a href="/go/doc/reader.go.html#5763770">m</a></span><span class="op" id="5763891">,</span>&nbsp;<span class="ident" id="5763893"><a href="/go/doc/reader.go.html#5763322">recvTypeName</a></span><span class="op" id="5763905">,</span>&nbsp;<span class="ident" id="5763907"><a href="/go/doc/reader.go.html#5763717">thisEmbeddedIsPtr</a></span><span class="op" id="5763924">,</span>&nbsp;<span class="ident" id="5763926"><a href="/go/doc/reader.go.html#5763363">level</a></span><span class="op" id="5763931">)</span><span class="op" id="5763932">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5763937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5763941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5763945">if</span>&nbsp;<span class="op" id="5763948">!</span><span class="ident" id="5763949"><a href="/go/doc/reader.go.html#5763374">visited</a></span><span class="op" id="5763956">[</span><span class="ident" id="5763957"><a href="/go/doc/reader.go.html#5763423">embedded</a></span><span class="op" id="5763965">]</span>&nbsp;<span class="op" id="5763967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5763972"><a href="/go/doc/reader.go.html#5763256">r</a></span><span class="op" id="5763973">.</span><span class="ident" id="5763974">collectEmbeddedMethods</span><span class="op" id="5763996">(</span><span class="ident" id="5763997"><a href="/go/doc/reader.go.html#5763290">mset</a></span><span class="op" id="5764001">,</span>&nbsp;<span class="ident" id="5764003"><a href="/go/doc/reader.go.html#5763423">embedded</a></span><span class="op" id="5764011">,</span>&nbsp;<span class="ident" id="5764013"><a href="/go/doc/reader.go.html#5763322">recvTypeName</a></span><span class="op" id="5764025">,</span>&nbsp;<span class="ident" id="5764027"><a href="/go/doc/reader.go.html#5763717">thisEmbeddedIsPtr</a></span><span class="op" id="5764044">,</span>&nbsp;<span class="ident" id="5764046"><a href="/go/doc/reader.go.html#5763363">level</a></span><span class="op" id="5764051">+</span><span class="num" id="5764052">1</span><span class="op" id="5764053">,</span>&nbsp;<span class="ident" id="5764055"><a href="/go/doc/reader.go.html#5763374">visited</a></span><span class="op" id="5764062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5764066">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5764069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5764072">delete</span><span class="op" id="5764078">(</span><span class="ident" id="5764079"><a href="/go/doc/reader.go.html#5763374">visited</a></span><span class="op" id="5764086">,</span>&nbsp;<span class="ident" id="5764088"><a href="/go/doc/reader.go.html#5763306">typ</a></span><span class="op" id="5764091">)</span><br>
<span class="lineno"></span><span class="op" id="5764093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5764096">//&nbsp;computeMethodSets&nbsp;determines&nbsp;the&nbsp;actual&nbsp;method&nbsp;sets&nbsp;for&nbsp;each&nbsp;type&nbsp;encountered.</span><br>
<span class="lineno">615</span><span class="comment" id="5764178">//</span><br>
<span class="lineno"></span><span class="keyword" id="5764181">func</span>&nbsp;<span class="op" id="5764186">(</span><span class="ident" id="5764187">r</span>&nbsp;<span class="op" id="5764189">*</span><span class="ident" id="5764190"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5764196">)</span>&nbsp;<span class="ident" id="5764198">computeMethodSets</span><span class="op" id="5764215">(</span><span class="op" id="5764216">)</span>&nbsp;<span class="op" id="5764218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5764221">for</span>&nbsp;<span class="ident" id="5764225">_</span><span class="op" id="5764226">,</span>&nbsp;<span class="ident" id="5764228">t</span>&nbsp;<span class="op" id="5764230">:=</span>&nbsp;<span class="keyword" id="5764233">range</span>&nbsp;<span class="ident" id="5764239"><a href="/go/doc/reader.go.html#5764187">r</a></span><span class="op" id="5764240">.</span><span class="ident" id="5764241">types</span>&nbsp;<span class="op" id="5764247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5764251">//&nbsp;collect&nbsp;embedded&nbsp;methods&nbsp;for&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5764287">if</span>&nbsp;<span class="ident" id="5764290"><a href="/go/doc/reader.go.html#5764228">t</a></span><span class="op" id="5764291">.</span><span class="ident" id="5764292">isStruct</span>&nbsp;<span class="op" id="5764301">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5764306">//&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5764319"><a href="/go/doc/reader.go.html#5764187">r</a></span><span class="op" id="5764320">.</span><span class="ident" id="5764321">collectEmbeddedMethods</span><span class="op" id="5764343">(</span><span class="ident" id="5764344"><a href="/go/doc/reader.go.html#5764228">t</a></span><span class="op" id="5764345">.</span><span class="ident" id="5764346">methods</span><span class="op" id="5764353">,</span>&nbsp;<span class="ident" id="5764355"><a href="/go/doc/reader.go.html#5764228">t</a></span><span class="op" id="5764356">,</span>&nbsp;<span class="ident" id="5764358"><a href="/go/doc/reader.go.html#5764228">t</a></span><span class="op" id="5764359">.</span><span class="ident" id="5764360">name</span><span class="op" id="5764364">,</span>&nbsp;<span class="builtintype" id="5764366">false</span><span class="op" id="5764371">,</span>&nbsp;<span class="num" id="5764373">1</span><span class="op" id="5764374">,</span>&nbsp;<span class="builtinfunc" id="5764376">make</span><span class="op" id="5764380">(</span><span class="ident" id="5764381"><a href="/go/doc/reader.go.html#5749501">embeddedSet</a></span><span class="op" id="5764392">)</span><span class="op" id="5764393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5764397">}</span>&nbsp;<span class="keyword" id="5764399">else</span>&nbsp;<span class="op" id="5764404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5764409">//&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5764425">//&nbsp;TODO(gri)&nbsp;fix&nbsp;this</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5764449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5764452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5764456">//&nbsp;if&nbsp;error&nbsp;was&nbsp;declared&nbsp;locally,&nbsp;don&#39;t&nbsp;treat&nbsp;it&nbsp;as&nbsp;exported&nbsp;field&nbsp;anymore</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5764532">if</span>&nbsp;<span class="ident" id="5764535"><a href="/go/doc/reader.go.html#5764187">r</a></span><span class="op" id="5764536">.</span><span class="ident" id="5764537">errorDecl</span>&nbsp;<span class="op" id="5764547">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5764551">for</span>&nbsp;<span class="ident" id="5764555">_</span><span class="op" id="5764556">,</span>&nbsp;<span class="ident" id="5764558">ityp</span>&nbsp;<span class="op" id="5764563">:=</span>&nbsp;<span class="keyword" id="5764566">range</span>&nbsp;<span class="ident" id="5764572"><a href="/go/doc/reader.go.html#5764187">r</a></span><span class="op" id="5764573">.</span><span class="ident" id="5764574">fixlist</span>&nbsp;<span class="op" id="5764582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5764587"><a href="/go/doc/exports.go.html#5739975">removeErrorField</a></span><span class="op" id="5764603">(</span><span class="ident" id="5764604"><a href="/go/doc/reader.go.html#5764558">ityp</a></span><span class="op" id="5764608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5764612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5764615">}</span><br>
<span class="lineno"></span><span class="op" id="5764617">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="comment" id="5764620">//&nbsp;cleanupTypes&nbsp;removes&nbsp;the&nbsp;association&nbsp;of&nbsp;functions&nbsp;and&nbsp;methods&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="5764690">//&nbsp;types&nbsp;that&nbsp;have&nbsp;no&nbsp;declaration.&nbsp;Instead,&nbsp;these&nbsp;functions&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span><span class="comment" id="5764762">//&nbsp;are&nbsp;shown&nbsp;at&nbsp;the&nbsp;package&nbsp;level.&nbsp;It&nbsp;also&nbsp;removes&nbsp;types&nbsp;with&nbsp;missing</span><br>
<span class="lineno"></span><span class="comment" id="5764832">//&nbsp;declarations&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible.</span><br>
<span class="lineno">640</span><span class="comment" id="5764874">//</span><br>
<span class="lineno"></span><span class="keyword" id="5764877">func</span>&nbsp;<span class="op" id="5764882">(</span><span class="ident" id="5764883">r</span>&nbsp;<span class="op" id="5764885">*</span><span class="ident" id="5764886"><a href="/go/doc/reader.go.html#5750595">reader</a></span><span class="op" id="5764892">)</span>&nbsp;<span class="ident" id="5764894">cleanupTypes</span><span class="op" id="5764906">(</span><span class="op" id="5764907">)</span>&nbsp;<span class="op" id="5764909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5764912">for</span>&nbsp;<span class="ident" id="5764916">_</span><span class="op" id="5764917">,</span>&nbsp;<span class="ident" id="5764919">t</span>&nbsp;<span class="op" id="5764921">:=</span>&nbsp;<span class="keyword" id="5764924">range</span>&nbsp;<span class="ident" id="5764930"><a href="/go/doc/reader.go.html#5764883">r</a></span><span class="op" id="5764931">.</span><span class="ident" id="5764932">types</span>&nbsp;<span class="op" id="5764938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5764942">visible</span>&nbsp;<span class="op" id="5764950">:=</span>&nbsp;<span class="ident" id="5764953"><a href="/go/doc/reader.go.html#5764883">r</a></span><span class="op" id="5764954">.</span><span class="ident" id="5764955">isVisible</span><span class="op" id="5764964">(</span><span class="ident" id="5764965"><a href="/go/doc/reader.go.html#5764919">t</a></span><span class="op" id="5764966">.</span><span class="ident" id="5764967">name</span><span class="op" id="5764971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5764975">if</span>&nbsp;<span class="ident" id="5764978"><a href="/go/doc/reader.go.html#5764919">t</a></span><span class="op" id="5764979">.</span><span class="ident" id="5764980">decl</span>&nbsp;<span class="op" id="5764985">==</span>&nbsp;<span class="ident" id="5764988">nil</span>&nbsp;<span class="op" id="5764992">&amp;&amp;</span>&nbsp;<span class="op" id="5764995">(</span><span class="ident" id="5764996"><a href="/go/doc/reader.go.html#5768984">predeclaredTypes</a></span><span class="op" id="5765012">[</span><span class="ident" id="5765013"><a href="/go/doc/reader.go.html#5764919">t</a></span><span class="op" id="5765014">.</span><span class="ident" id="5765015">name</span><span class="op" id="5765019">]</span>&nbsp;<span class="op" id="5765021">||</span>&nbsp;<span class="ident" id="5765024"><a href="/go/doc/reader.go.html#5764919">t</a></span><span class="op" id="5765025">.</span><span class="ident" id="5765026">isEmbedded</span>&nbsp;<span class="op" id="5765037">&amp;&amp;</span>&nbsp;<span class="ident" id="5765040"><a href="/go/doc/reader.go.html#5764942">visible</a></span><span class="op" id="5765047">)</span>&nbsp;<span class="op" id="5765049">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5765054">//&nbsp;t.name&nbsp;is&nbsp;a&nbsp;predeclared&nbsp;type&nbsp;(and&nbsp;was&nbsp;not&nbsp;redeclared&nbsp;in&nbsp;this&nbsp;package),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5765131">//&nbsp;or&nbsp;it&nbsp;was&nbsp;embedded&nbsp;somewhere&nbsp;but&nbsp;its&nbsp;declaration&nbsp;is&nbsp;missing&nbsp;(because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5765206">//&nbsp;the&nbsp;AST&nbsp;is&nbsp;incomplete):&nbsp;move&nbsp;any&nbsp;associated&nbsp;values,&nbsp;funcs,&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5765283">//&nbsp;back&nbsp;to&nbsp;the&nbsp;top-level&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;lost.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5765338">//&nbsp;1)&nbsp;move&nbsp;values</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5765359"><a href="/go/doc/reader.go.html#5764883">r</a></span><span class="op" id="5765360">.</span><span class="ident" id="5765361">values</span>&nbsp;<span class="op" id="5765368">=</span>&nbsp;<span class="builtinfunc" id="5765370">append</span><span class="op" id="5765376">(</span><span class="ident" id="5765377"><a href="/go/doc/reader.go.html#5764883">r</a></span><span class="op" id="5765378">.</span><span class="ident" id="5765379">values</span><span class="op" id="5765385">,</span>&nbsp;<span class="ident" id="5765387"><a href="/go/doc/reader.go.html#5764919">t</a></span><span class="op" id="5765388">.</span><span class="ident" id="5765389">values</span><span class="op" id="5765395">...</span><span class="op" id="5765398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5765403">//&nbsp;2)&nbsp;move&nbsp;factory&nbsp;functions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5765435">for</span>&nbsp;<span class="ident" id="5765439">name</span><span class="op" id="5765443">,</span>&nbsp;<span class="ident" id="5765445">f</span>&nbsp;<span class="op" id="5765447">:=</span>&nbsp;<span class="keyword" id="5765450">range</span>&nbsp;<span class="ident" id="5765456"><a href="/go/doc/reader.go.html#5764919">t</a></span><span class="op" id="5765457">.</span><span class="ident" id="5765458">funcs</span>&nbsp;<span class="op" id="5765464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5765470">//&nbsp;in&nbsp;a&nbsp;correct&nbsp;AST,&nbsp;package-level&nbsp;function&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5765524">//&nbsp;are&nbsp;all&nbsp;different&nbsp;-&nbsp;no&nbsp;need&nbsp;to&nbsp;check&nbsp;for&nbsp;conflicts</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5765582"><a href="/go/doc/reader.go.html#5764883">r</a></span><span class="op" id="5765583">.</span><span class="ident" id="5765584">funcs</span><span class="op" id="5765589">[</span><span class="ident" id="5765590"><a href="/go/doc/reader.go.html#5765439">name</a></span><span class="op" id="5765594">]</span>&nbsp;<span class="op" id="5765596">=</span>&nbsp;<span class="ident" id="5765598"><a href="/go/doc/reader.go.html#5765445">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5765603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5765608">//&nbsp;3)&nbsp;move&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5765630">for</span>&nbsp;<span class="ident" id="5765634">name</span><span class="op" id="5765638">,</span>&nbsp;<span class="ident" id="5765640">m</span>&nbsp;<span class="op" id="5765642">:=</span>&nbsp;<span class="keyword" id="5765645">range</span>&nbsp;<span class="ident" id="5765651"><a href="/go/doc/reader.go.html#5764919">t</a></span><span class="op" id="5765652">.</span><span class="ident" id="5765653">methods</span>&nbsp;<span class="op" id="5765661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5765667">//&nbsp;don&#39;t&nbsp;overwrite&nbsp;functions&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;-&nbsp;drop&nbsp;them</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5765731">if</span>&nbsp;<span class="ident" id="5765734">_</span><span class="op" id="5765735">,</span>&nbsp;<span class="ident" id="5765737">found</span>&nbsp;<span class="op" id="5765743">:=</span>&nbsp;<span class="ident" id="5765746"><a href="/go/doc/reader.go.html#5764883">r</a></span><span class="op" id="5765747">.</span><span class="ident" id="5765748">funcs</span><span class="op" id="5765753">[</span><span class="ident" id="5765754"><a href="/go/doc/reader.go.html#5765634">name</a></span><span class="op" id="5765758">]</span><span class="op" id="5765759">;</span>&nbsp;<span class="op" id="5765761">!</span><span class="ident" id="5765762"><a href="/go/doc/reader.go.html#5765737">found</a></span>&nbsp;<span class="op" id="5765768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5765775"><a href="/go/doc/reader.go.html#5764883">r</a></span><span class="op" id="5765776">.</span><span class="ident" id="5765777">funcs</span><span class="op" id="5765782">[</span><span class="ident" id="5765783"><a href="/go/doc/reader.go.html#5765634">name</a></span><span class="op" id="5765787">]</span>&nbsp;<span class="op" id="5765789">=</span>&nbsp;<span class="ident" id="5765791"><a href="/go/doc/reader.go.html#5765640">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5765797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5765802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5765806">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5765810">//&nbsp;remove&nbsp;types&nbsp;w/o&nbsp;declaration&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5765869">if</span>&nbsp;<span class="ident" id="5765872"><a href="/go/doc/reader.go.html#5764919">t</a></span><span class="op" id="5765873">.</span><span class="ident" id="5765874">decl</span>&nbsp;<span class="op" id="5765879">==</span>&nbsp;<span class="ident" id="5765882">nil</span>&nbsp;<span class="op" id="5765886">||</span>&nbsp;<span class="op" id="5765889">!</span><span class="ident" id="5765890"><a href="/go/doc/reader.go.html#5764942">visible</a></span>&nbsp;<span class="op" id="5765898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5765903">delete</span><span class="op" id="5765909">(</span><span class="ident" id="5765910"><a href="/go/doc/reader.go.html#5764883">r</a></span><span class="op" id="5765911">.</span><span class="ident" id="5765912">types</span><span class="op" id="5765917">,</span>&nbsp;<span class="ident" id="5765919"><a href="/go/doc/reader.go.html#5764919">t</a></span><span class="op" id="5765920">.</span><span class="ident" id="5765921">name</span><span class="op" id="5765925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5765929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5765932">}</span><br>
<span class="lineno">670</span><span class="op" id="5765934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5765937">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5766017">//&nbsp;Sorting</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="5766029">type</span>&nbsp;<span class="ident" id="5766034">data</span>&nbsp;<span class="keyword" id="5766039">struct</span>&nbsp;<span class="op" id="5766046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5766049">n</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5766054">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5766059">swap</span>&nbsp;<span class="keyword" id="5766064">func</span><span class="op" id="5766068">(</span><span class="ident" id="5766069">i</span><span class="op" id="5766070">,</span>&nbsp;<span class="ident" id="5766072">j</span>&nbsp;<span class="builtintype" id="5766074">int</span><span class="op" id="5766077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5766080">less</span>&nbsp;<span class="keyword" id="5766085">func</span><span class="op" id="5766089">(</span><span class="ident" id="5766090">i</span><span class="op" id="5766091">,</span>&nbsp;<span class="ident" id="5766093">j</span>&nbsp;<span class="builtintype" id="5766095">int</span><span class="op" id="5766098">)</span>&nbsp;<span class="builtintype" id="5766100">bool</span><br>
<span class="lineno"></span><span class="op" id="5766105">}</span><br>
<span class="lineno">680</span><br>
<span class="lineno"></span><span class="keyword" id="5766108">func</span>&nbsp;<span class="op" id="5766113">(</span><span class="ident" id="5766114">d</span>&nbsp;<span class="op" id="5766116">*</span><span class="ident" id="5766117"><a href="/go/doc/reader.go.html#5766034">data</a></span><span class="op" id="5766121">)</span>&nbsp;<span class="ident" id="5766123">Len</span><span class="op" id="5766126">(</span><span class="op" id="5766127">)</span>&nbsp;<span class="builtintype" id="5766129">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5766143">{</span>&nbsp;<span class="keyword" id="5766145">return</span>&nbsp;<span class="ident" id="5766152"><a href="/go/doc/reader.go.html#5766114">d</a></span><span class="op" id="5766153">.</span><span class="ident" id="5766154">n</span>&nbsp;<span class="op" id="5766156">}</span><br>
<span class="lineno"></span><span class="keyword" id="5766158">func</span>&nbsp;<span class="op" id="5766163">(</span><span class="ident" id="5766164">d</span>&nbsp;<span class="op" id="5766166">*</span><span class="ident" id="5766167"><a href="/go/doc/reader.go.html#5766034">data</a></span><span class="op" id="5766171">)</span>&nbsp;<span class="ident" id="5766173">Swap</span><span class="op" id="5766177">(</span><span class="ident" id="5766178">i</span><span class="op" id="5766179">,</span>&nbsp;<span class="ident" id="5766181">j</span>&nbsp;<span class="builtintype" id="5766183">int</span><span class="op" id="5766186">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5766193">{</span>&nbsp;<span class="ident" id="5766195"><a href="/go/doc/reader.go.html#5766164">d</a></span><span class="op" id="5766196">.</span><span class="ident" id="5766197">swap</span><span class="op" id="5766201">(</span><span class="ident" id="5766202"><a href="/go/doc/reader.go.html#5766178">i</a></span><span class="op" id="5766203">,</span>&nbsp;<span class="ident" id="5766205"><a href="/go/doc/reader.go.html#5766181">j</a></span><span class="op" id="5766206">)</span>&nbsp;<span class="op" id="5766208">}</span><br>
<span class="lineno"></span><span class="keyword" id="5766210">func</span>&nbsp;<span class="op" id="5766215">(</span><span class="ident" id="5766216">d</span>&nbsp;<span class="op" id="5766218">*</span><span class="ident" id="5766219"><a href="/go/doc/reader.go.html#5766034">data</a></span><span class="op" id="5766223">)</span>&nbsp;<span class="ident" id="5766225">Less</span><span class="op" id="5766229">(</span><span class="ident" id="5766230">i</span><span class="op" id="5766231">,</span>&nbsp;<span class="ident" id="5766233">j</span>&nbsp;<span class="builtintype" id="5766235">int</span><span class="op" id="5766238">)</span>&nbsp;<span class="builtintype" id="5766240">bool</span>&nbsp;<span class="op" id="5766245">{</span>&nbsp;<span class="keyword" id="5766247">return</span>&nbsp;<span class="ident" id="5766254"><a href="/go/doc/reader.go.html#5766216">d</a></span><span class="op" id="5766255">.</span><span class="ident" id="5766256">less</span><span class="op" id="5766260">(</span><span class="ident" id="5766261"><a href="/go/doc/reader.go.html#5766230">i</a></span><span class="op" id="5766262">,</span>&nbsp;<span class="ident" id="5766264"><a href="/go/doc/reader.go.html#5766233">j</a></span><span class="op" id="5766265">)</span>&nbsp;<span class="op" id="5766267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">685</span><span class="comment" id="5766270">//&nbsp;sortBy&nbsp;is&nbsp;a&nbsp;helper&nbsp;function&nbsp;for&nbsp;sorting</span><br>
<span class="lineno"></span><span class="keyword" id="5766313">func</span>&nbsp;<span class="ident" id="5766318">sortBy</span><span class="op" id="5766324">(</span><span class="ident" id="5766325">less</span>&nbsp;<span class="keyword" id="5766330">func</span><span class="op" id="5766334">(</span><span class="ident" id="5766335">i</span><span class="op" id="5766336">,</span>&nbsp;<span class="ident" id="5766338">j</span>&nbsp;<span class="builtintype" id="5766340">int</span><span class="op" id="5766343">)</span>&nbsp;<span class="builtintype" id="5766345">bool</span><span class="op" id="5766349">,</span>&nbsp;<span class="ident" id="5766351">swap</span>&nbsp;<span class="keyword" id="5766356">func</span><span class="op" id="5766360">(</span><span class="ident" id="5766361">i</span><span class="op" id="5766362">,</span>&nbsp;<span class="ident" id="5766364">j</span>&nbsp;<span class="builtintype" id="5766366">int</span><span class="op" id="5766369">)</span><span class="op" id="5766370">,</span>&nbsp;<span class="ident" id="5766372">n</span>&nbsp;<span class="builtintype" id="5766374">int</span><span class="op" id="5766377">)</span>&nbsp;<span class="op" id="5766379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5766382"><a href="/go/doc/reader.go.html#5746714">sort</a></span><span class="op" id="5766386">.</span><span class="ident" id="5766387">Sort</span><span class="op" id="5766391">(</span><span class="op" id="5766392">&amp;</span><span class="ident" id="5766393"><a href="/go/doc/reader.go.html#5766034">data</a></span><span class="op" id="5766397">{</span><span class="ident" id="5766398"><a href="/go/doc/reader.go.html#5766372">n</a></span><span class="op" id="5766399">,</span>&nbsp;<span class="ident" id="5766401"><a href="/go/doc/reader.go.html#5766351">swap</a></span><span class="op" id="5766405">,</span>&nbsp;<span class="ident" id="5766407"><a href="/go/doc/reader.go.html#5766325">less</a></span><span class="op" id="5766411">}</span><span class="op" id="5766412">)</span><br>
<span class="lineno"></span><span class="op" id="5766414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">690</span><span class="keyword" id="5766417">func</span>&nbsp;<span class="ident" id="5766422">sortedKeys</span><span class="op" id="5766432">(</span><span class="ident" id="5766433">m</span>&nbsp;<span class="keyword" id="5766435">map</span><span class="op" id="5766438">[</span><span class="builtintype" id="5766439">string</span><span class="op" id="5766445">]</span><span class="builtintype" id="5766446">int</span><span class="op" id="5766449">)</span>&nbsp;<span class="op" id="5766451">[</span><span class="op" id="5766452">]</span><span class="builtintype" id="5766453">string</span>&nbsp;<span class="op" id="5766460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5766463">list</span>&nbsp;<span class="op" id="5766468">:=</span>&nbsp;<span class="builtinfunc" id="5766471">make</span><span class="op" id="5766475">(</span><span class="op" id="5766476">[</span><span class="op" id="5766477">]</span><span class="builtintype" id="5766478">string</span><span class="op" id="5766484">,</span>&nbsp;<span class="builtinfunc" id="5766486">len</span><span class="op" id="5766489">(</span><span class="ident" id="5766490"><a href="/go/doc/reader.go.html#5766433">m</a></span><span class="op" id="5766491">)</span><span class="op" id="5766492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5766495">i</span>&nbsp;<span class="op" id="5766497">:=</span>&nbsp;<span class="num" id="5766500">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5766503">for</span>&nbsp;<span class="ident" id="5766507">key</span>&nbsp;<span class="op" id="5766511">:=</span>&nbsp;<span class="keyword" id="5766514">range</span>&nbsp;<span class="ident" id="5766520"><a href="/go/doc/reader.go.html#5766433">m</a></span>&nbsp;<span class="op" id="5766522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5766526"><a href="/go/doc/reader.go.html#5766463">list</a></span><span class="op" id="5766530">[</span><span class="ident" id="5766531"><a href="/go/doc/reader.go.html#5766495">i</a></span><span class="op" id="5766532">]</span>&nbsp;<span class="op" id="5766534">=</span>&nbsp;<span class="ident" id="5766536"><a href="/go/doc/reader.go.html#5766507">key</a></span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5766542"><a href="/go/doc/reader.go.html#5766495">i</a></span><span class="op" id="5766543">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5766547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5766550"><a href="/go/doc/reader.go.html#5746714">sort</a></span><span class="op" id="5766554">.</span><span class="ident" id="5766555">Strings</span><span class="op" id="5766562">(</span><span class="ident" id="5766563"><a href="/go/doc/reader.go.html#5766463">list</a></span><span class="op" id="5766567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5766570">return</span>&nbsp;<span class="ident" id="5766577"><a href="/go/doc/reader.go.html#5766463">list</a></span><br>
<span class="lineno"></span><span class="op" id="5766582">}</span><br>
<span class="lineno">700</span><br>
<span class="lineno"></span><span class="comment" id="5766585">//&nbsp;sortingName&nbsp;returns&nbsp;the&nbsp;name&nbsp;to&nbsp;use&nbsp;when&nbsp;sorting&nbsp;d&nbsp;into&nbsp;place.</span><br>
<span class="lineno"></span><span class="comment" id="5766651">//</span><br>
<span class="lineno"></span><span class="keyword" id="5766654">func</span>&nbsp;<span class="ident" id="5766659">sortingName</span><span class="op" id="5766670">(</span><span class="ident" id="5766671">d</span>&nbsp;<span class="op" id="5766673">*</span><span class="ident" id="5766674"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5766677">.</span><span class="ident" id="5766678">GenDecl</span><span class="op" id="5766685">)</span>&nbsp;<span class="builtintype" id="5766687">string</span>&nbsp;<span class="op" id="5766694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5766697">if</span>&nbsp;<span class="builtinfunc" id="5766700">len</span><span class="op" id="5766703">(</span><span class="ident" id="5766704"><a href="/go/doc/reader.go.html#5766671">d</a></span><span class="op" id="5766705">.</span><span class="ident" id="5766706">Specs</span><span class="op" id="5766711">)</span>&nbsp;<span class="op" id="5766713">==</span>&nbsp;<span class="num" id="5766716">1</span>&nbsp;<span class="op" id="5766718">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5766722">if</span>&nbsp;<span class="ident" id="5766725">s</span><span class="op" id="5766726">,</span>&nbsp;<span class="ident" id="5766728">ok</span>&nbsp;<span class="op" id="5766731">:=</span>&nbsp;<span class="ident" id="5766734"><a href="/go/doc/reader.go.html#5766671">d</a></span><span class="op" id="5766735">.</span><span class="ident" id="5766736">Specs</span><span class="op" id="5766741">[</span><span class="num" id="5766742">0</span><span class="op" id="5766743">]</span><span class="op" id="5766744">.</span><span class="op" id="5766745">(</span><span class="op" id="5766746">*</span><span class="ident" id="5766747"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5766750">.</span><span class="ident" id="5766751">ValueSpec</span><span class="op" id="5766760">)</span><span class="op" id="5766761">;</span>&nbsp;<span class="ident" id="5766763"><a href="/go/doc/reader.go.html#5766728">ok</a></span>&nbsp;<span class="op" id="5766766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5766771">return</span>&nbsp;<span class="ident" id="5766778"><a href="/go/doc/reader.go.html#5766725">s</a></span><span class="op" id="5766779">.</span><span class="ident" id="5766780">Names</span><span class="op" id="5766785">[</span><span class="num" id="5766786">0</span><span class="op" id="5766787">]</span><span class="op" id="5766788">.</span><span class="ident" id="5766789">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5766796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5766799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5766802">return</span>&nbsp;<span class="string" id="5766809">&#34;&#34;</span><br>
<span class="lineno">710</span><span class="op" id="5766812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5766815">func</span>&nbsp;<span class="ident" id="5766820">sortedValues</span><span class="op" id="5766832">(</span><span class="ident" id="5766833">m</span>&nbsp;<span class="op" id="5766835">[</span><span class="op" id="5766836">]</span><span class="op" id="5766837">*</span><span class="ident" id="5766838"><a href="/go/doc/doc.go.html#5726163">Value</a></span><span class="op" id="5766843">,</span>&nbsp;<span class="ident" id="5766845">tok</span>&nbsp;<span class="ident" id="5766849"><a href="/go/doc/reader.go.html#5746692">token</a></span><span class="op" id="5766854">.</span><span class="ident" id="5766855">Token</span><span class="op" id="5766860">)</span>&nbsp;<span class="op" id="5766862">[</span><span class="op" id="5766863">]</span><span class="op" id="5766864">*</span><span class="ident" id="5766865"><a href="/go/doc/doc.go.html#5726163">Value</a></span>&nbsp;<span class="op" id="5766871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5766874">list</span>&nbsp;<span class="op" id="5766879">:=</span>&nbsp;<span class="builtinfunc" id="5766882">make</span><span class="op" id="5766886">(</span><span class="op" id="5766887">[</span><span class="op" id="5766888">]</span><span class="op" id="5766889">*</span><span class="ident" id="5766890"><a href="/go/doc/doc.go.html#5726163">Value</a></span><span class="op" id="5766895">,</span>&nbsp;<span class="builtinfunc" id="5766897">len</span><span class="op" id="5766900">(</span><span class="ident" id="5766901"><a href="/go/doc/reader.go.html#5766833">m</a></span><span class="op" id="5766902">)</span><span class="op" id="5766903">)</span>&nbsp;<span class="comment" id="5766905">//&nbsp;big&nbsp;enough&nbsp;in&nbsp;any&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5766932">i</span>&nbsp;<span class="op" id="5766934">:=</span>&nbsp;<span class="num" id="5766937">0</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5766940">for</span>&nbsp;<span class="ident" id="5766944">_</span><span class="op" id="5766945">,</span>&nbsp;<span class="ident" id="5766947">val</span>&nbsp;<span class="op" id="5766951">:=</span>&nbsp;<span class="keyword" id="5766954">range</span>&nbsp;<span class="ident" id="5766960"><a href="/go/doc/reader.go.html#5766833">m</a></span>&nbsp;<span class="op" id="5766962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5766966">if</span>&nbsp;<span class="ident" id="5766969"><a href="/go/doc/reader.go.html#5766947">val</a></span><span class="op" id="5766972">.</span><span class="ident" id="5766973">Decl</span><span class="op" id="5766977">.</span><span class="ident" id="5766978">Tok</span>&nbsp;<span class="op" id="5766982">==</span>&nbsp;<span class="ident" id="5766985"><a href="/go/doc/reader.go.html#5766845">tok</a></span>&nbsp;<span class="op" id="5766989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5766994"><a href="/go/doc/reader.go.html#5766874">list</a></span><span class="op" id="5766998">[</span><span class="ident" id="5766999"><a href="/go/doc/reader.go.html#5766932">i</a></span><span class="op" id="5767000">]</span>&nbsp;<span class="op" id="5767002">=</span>&nbsp;<span class="ident" id="5767004"><a href="/go/doc/reader.go.html#5766947">val</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5767011"><a href="/go/doc/reader.go.html#5766932">i</a></span><span class="op" id="5767012">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5767017">}</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5767020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5767023"><a href="/go/doc/reader.go.html#5766874">list</a></span>&nbsp;<span class="op" id="5767028">=</span>&nbsp;<span class="ident" id="5767030"><a href="/go/doc/reader.go.html#5766874">list</a></span><span class="op" id="5767034">[</span><span class="num" id="5767035">0</span><span class="op" id="5767036">:</span><span class="ident" id="5767037"><a href="/go/doc/reader.go.html#5766932">i</a></span><span class="op" id="5767038">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5767042"><a href="/go/doc/reader.go.html#5766318">sortBy</a></span><span class="op" id="5767048">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5767052">func</span><span class="op" id="5767056">(</span><span class="ident" id="5767057">i</span><span class="op" id="5767058">,</span>&nbsp;<span class="ident" id="5767060">j</span>&nbsp;<span class="builtintype" id="5767062">int</span><span class="op" id="5767065">)</span>&nbsp;<span class="builtintype" id="5767067">bool</span>&nbsp;<span class="op" id="5767072">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5767077">if</span>&nbsp;<span class="ident" id="5767080">ni</span><span class="op" id="5767082">,</span>&nbsp;<span class="ident" id="5767084">nj</span>&nbsp;<span class="op" id="5767087">:=</span>&nbsp;<span class="ident" id="5767090"><a href="/go/doc/reader.go.html#5766659">sortingName</a></span><span class="op" id="5767101">(</span><span class="ident" id="5767102"><a href="/go/doc/reader.go.html#5766874">list</a></span><span class="op" id="5767106">[</span><span class="ident" id="5767107"><a href="/go/doc/reader.go.html#5767057">i</a></span><span class="op" id="5767108">]</span><span class="op" id="5767109">.</span><span class="ident" id="5767110">Decl</span><span class="op" id="5767114">)</span><span class="op" id="5767115">,</span>&nbsp;<span class="ident" id="5767117"><a href="/go/doc/reader.go.html#5766659">sortingName</a></span><span class="op" id="5767128">(</span><span class="ident" id="5767129"><a href="/go/doc/reader.go.html#5766874">list</a></span><span class="op" id="5767133">[</span><span class="ident" id="5767134"><a href="/go/doc/reader.go.html#5767060">j</a></span><span class="op" id="5767135">]</span><span class="op" id="5767136">.</span><span class="ident" id="5767137">Decl</span><span class="op" id="5767141">)</span><span class="op" id="5767142">;</span>&nbsp;<span class="ident" id="5767144"><a href="/go/doc/reader.go.html#5767080">ni</a></span>&nbsp;<span class="op" id="5767147">!=</span>&nbsp;<span class="ident" id="5767150"><a href="/go/doc/reader.go.html#5767084">nj</a></span>&nbsp;<span class="op" id="5767153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5767159">return</span>&nbsp;<span class="ident" id="5767166"><a href="/go/doc/reader.go.html#5767080">ni</a></span>&nbsp;<span class="op" id="5767169">&lt;</span>&nbsp;<span class="ident" id="5767171"><a href="/go/doc/reader.go.html#5767084">nj</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5767177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5767182">return</span>&nbsp;<span class="ident" id="5767189"><a href="/go/doc/reader.go.html#5766874">list</a></span><span class="op" id="5767193">[</span><span class="ident" id="5767194"><a href="/go/doc/reader.go.html#5767057">i</a></span><span class="op" id="5767195">]</span><span class="op" id="5767196">.</span><span class="ident" id="5767197">order</span>&nbsp;<span class="op" id="5767203">&lt;</span>&nbsp;<span class="ident" id="5767205"><a href="/go/doc/reader.go.html#5766874">list</a></span><span class="op" id="5767209">[</span><span class="ident" id="5767210"><a href="/go/doc/reader.go.html#5767060">j</a></span><span class="op" id="5767211">]</span><span class="op" id="5767212">.</span><span class="ident" id="5767213">order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5767221">}</span><span class="op" id="5767222">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5767226">func</span><span class="op" id="5767230">(</span><span class="ident" id="5767231">i</span><span class="op" id="5767232">,</span>&nbsp;<span class="ident" id="5767234">j</span>&nbsp;<span class="builtintype" id="5767236">int</span><span class="op" id="5767239">)</span>&nbsp;<span class="op" id="5767241">{</span>&nbsp;<span class="ident" id="5767243"><a href="/go/doc/reader.go.html#5766874">list</a></span><span class="op" id="5767247">[</span><span class="ident" id="5767248"><a href="/go/doc/reader.go.html#5767231">i</a></span><span class="op" id="5767249">]</span><span class="op" id="5767250">,</span>&nbsp;<span class="ident" id="5767252"><a href="/go/doc/reader.go.html#5766874">list</a></span><span class="op" id="5767256">[</span><span class="ident" id="5767257"><a href="/go/doc/reader.go.html#5767234">j</a></span><span class="op" id="5767258">]</span>&nbsp;<span class="op" id="5767260">=</span>&nbsp;<span class="ident" id="5767262"><a href="/go/doc/reader.go.html#5766874">list</a></span><span class="op" id="5767266">[</span><span class="ident" id="5767267"><a href="/go/doc/reader.go.html#5767234">j</a></span><span class="op" id="5767268">]</span><span class="op" id="5767269">,</span>&nbsp;<span class="ident" id="5767271"><a href="/go/doc/reader.go.html#5766874">list</a></span><span class="op" id="5767275">[</span><span class="ident" id="5767276"><a href="/go/doc/reader.go.html#5767231">i</a></span><span class="op" id="5767277">]</span>&nbsp;<span class="op" id="5767279">}</span><span class="op" id="5767280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5767284">len</span><span class="op" id="5767287">(</span><span class="ident" id="5767288"><a href="/go/doc/reader.go.html#5766874">list</a></span><span class="op" id="5767292">)</span><span class="op" id="5767293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5767296">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5767300">return</span>&nbsp;<span class="ident" id="5767307"><a href="/go/doc/reader.go.html#5766874">list</a></span><br>
<span class="lineno">735</span><span class="op" id="5767312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5767315">func</span>&nbsp;<span class="ident" id="5767320">sortedTypes</span><span class="op" id="5767331">(</span><span class="ident" id="5767332">m</span>&nbsp;<span class="keyword" id="5767334">map</span><span class="op" id="5767337">[</span><span class="builtintype" id="5767338">string</span><span class="op" id="5767344">]</span><span class="op" id="5767345">*</span><span class="ident" id="5767346"><a href="/go/doc/reader.go.html#5749710">namedType</a></span><span class="op" id="5767355">,</span>&nbsp;<span class="ident" id="5767357">allMethods</span>&nbsp;<span class="builtintype" id="5767368">bool</span><span class="op" id="5767372">)</span>&nbsp;<span class="op" id="5767374">[</span><span class="op" id="5767375">]</span><span class="op" id="5767376">*</span><span class="ident" id="5767377"><a href="/go/doc/doc.go.html#5726344">Type</a></span>&nbsp;<span class="op" id="5767382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5767385">list</span>&nbsp;<span class="op" id="5767390">:=</span>&nbsp;<span class="builtinfunc" id="5767393">make</span><span class="op" id="5767397">(</span><span class="op" id="5767398">[</span><span class="op" id="5767399">]</span><span class="op" id="5767400">*</span><span class="ident" id="5767401"><a href="/go/doc/doc.go.html#5726344">Type</a></span><span class="op" id="5767405">,</span>&nbsp;<span class="builtinfunc" id="5767407">len</span><span class="op" id="5767410">(</span><span class="ident" id="5767411"><a href="/go/doc/reader.go.html#5767332">m</a></span><span class="op" id="5767412">)</span><span class="op" id="5767413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5767416">i</span>&nbsp;<span class="op" id="5767418">:=</span>&nbsp;<span class="num" id="5767421">0</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5767424">for</span>&nbsp;<span class="ident" id="5767428">_</span><span class="op" id="5767429">,</span>&nbsp;<span class="ident" id="5767431">t</span>&nbsp;<span class="op" id="5767433">:=</span>&nbsp;<span class="keyword" id="5767436">range</span>&nbsp;<span class="ident" id="5767442"><a href="/go/doc/reader.go.html#5767332">m</a></span>&nbsp;<span class="op" id="5767444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5767448"><a href="/go/doc/reader.go.html#5767385">list</a></span><span class="op" id="5767452">[</span><span class="ident" id="5767453"><a href="/go/doc/reader.go.html#5767416">i</a></span><span class="op" id="5767454">]</span>&nbsp;<span class="op" id="5767456">=</span>&nbsp;<span class="op" id="5767458">&amp;</span><span class="ident" id="5767459"><a href="/go/doc/doc.go.html#5726344">Type</a></span><span class="op" id="5767463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5767468">Doc</span><span class="op" id="5767471">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767477"><a href="/go/doc/reader.go.html#5767431">t</a></span><span class="op" id="5767478">.</span><span class="ident" id="5767479">doc</span><span class="op" id="5767482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5767487">Name</span><span class="op" id="5767491">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767496"><a href="/go/doc/reader.go.html#5767431">t</a></span><span class="op" id="5767497">.</span><span class="ident" id="5767498">name</span><span class="op" id="5767502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5767507">Decl</span><span class="op" id="5767511">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767516"><a href="/go/doc/reader.go.html#5767431">t</a></span><span class="op" id="5767517">.</span><span class="ident" id="5767518">decl</span><span class="op" id="5767522">,</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5767527">Consts</span><span class="op" id="5767533">:</span>&nbsp;&nbsp;<span class="ident" id="5767536"><a href="/go/doc/reader.go.html#5766820">sortedValues</a></span><span class="op" id="5767548">(</span><span class="ident" id="5767549"><a href="/go/doc/reader.go.html#5767431">t</a></span><span class="op" id="5767550">.</span><span class="ident" id="5767551">values</span><span class="op" id="5767557">,</span>&nbsp;<span class="ident" id="5767559"><a href="/go/doc/reader.go.html#5746692">token</a></span><span class="op" id="5767564">.</span><span class="ident" id="5767565">CONST</span><span class="op" id="5767570">)</span><span class="op" id="5767571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5767576">Vars</span><span class="op" id="5767580">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767585"><a href="/go/doc/reader.go.html#5766820">sortedValues</a></span><span class="op" id="5767597">(</span><span class="ident" id="5767598"><a href="/go/doc/reader.go.html#5767431">t</a></span><span class="op" id="5767599">.</span><span class="ident" id="5767600">values</span><span class="op" id="5767606">,</span>&nbsp;<span class="ident" id="5767608"><a href="/go/doc/reader.go.html#5746692">token</a></span><span class="op" id="5767613">.</span><span class="ident" id="5767614">VAR</span><span class="op" id="5767617">)</span><span class="op" id="5767618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5767623">Funcs</span><span class="op" id="5767628">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5767632"><a href="/go/doc/reader.go.html#5767987">sortedFuncs</a></span><span class="op" id="5767643">(</span><span class="ident" id="5767644"><a href="/go/doc/reader.go.html#5767431">t</a></span><span class="op" id="5767645">.</span><span class="ident" id="5767646">funcs</span><span class="op" id="5767651">,</span>&nbsp;<span class="builtintype" id="5767653">true</span><span class="op" id="5767657">)</span><span class="op" id="5767658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5767663">Methods</span><span class="op" id="5767670">:</span>&nbsp;<span class="ident" id="5767672"><a href="/go/doc/reader.go.html#5767987">sortedFuncs</a></span><span class="op" id="5767683">(</span><span class="ident" id="5767684"><a href="/go/doc/reader.go.html#5767431">t</a></span><span class="op" id="5767685">.</span><span class="ident" id="5767686">methods</span><span class="op" id="5767693">,</span>&nbsp;<span class="ident" id="5767695"><a href="/go/doc/reader.go.html#5767357">allMethods</a></span><span class="op" id="5767705">)</span><span class="op" id="5767706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5767710">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5767714"><a href="/go/doc/reader.go.html#5767416">i</a></span><span class="op" id="5767715">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5767719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5767723"><a href="/go/doc/reader.go.html#5766318">sortBy</a></span><span class="op" id="5767729">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5767733">func</span><span class="op" id="5767737">(</span><span class="ident" id="5767738">i</span><span class="op" id="5767739">,</span>&nbsp;<span class="ident" id="5767741">j</span>&nbsp;<span class="builtintype" id="5767743">int</span><span class="op" id="5767746">)</span>&nbsp;<span class="builtintype" id="5767748">bool</span>&nbsp;<span class="op" id="5767753">{</span>&nbsp;<span class="keyword" id="5767755">return</span>&nbsp;<span class="ident" id="5767762"><a href="/go/doc/reader.go.html#5767385">list</a></span><span class="op" id="5767766">[</span><span class="ident" id="5767767"><a href="/go/doc/reader.go.html#5767738">i</a></span><span class="op" id="5767768">]</span><span class="op" id="5767769">.</span><span class="ident" id="5767770">Name</span>&nbsp;<span class="op" id="5767775">&lt;</span>&nbsp;<span class="ident" id="5767777"><a href="/go/doc/reader.go.html#5767385">list</a></span><span class="op" id="5767781">[</span><span class="ident" id="5767782"><a href="/go/doc/reader.go.html#5767741">j</a></span><span class="op" id="5767783">]</span><span class="op" id="5767784">.</span><span class="ident" id="5767785">Name</span>&nbsp;<span class="op" id="5767790">}</span><span class="op" id="5767791">,</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5767795">func</span><span class="op" id="5767799">(</span><span class="ident" id="5767800">i</span><span class="op" id="5767801">,</span>&nbsp;<span class="ident" id="5767803">j</span>&nbsp;<span class="builtintype" id="5767805">int</span><span class="op" id="5767808">)</span>&nbsp;<span class="op" id="5767810">{</span>&nbsp;<span class="ident" id="5767812"><a href="/go/doc/reader.go.html#5767385">list</a></span><span class="op" id="5767816">[</span><span class="ident" id="5767817"><a href="/go/doc/reader.go.html#5767800">i</a></span><span class="op" id="5767818">]</span><span class="op" id="5767819">,</span>&nbsp;<span class="ident" id="5767821"><a href="/go/doc/reader.go.html#5767385">list</a></span><span class="op" id="5767825">[</span><span class="ident" id="5767826"><a href="/go/doc/reader.go.html#5767803">j</a></span><span class="op" id="5767827">]</span>&nbsp;<span class="op" id="5767829">=</span>&nbsp;<span class="ident" id="5767831"><a href="/go/doc/reader.go.html#5767385">list</a></span><span class="op" id="5767835">[</span><span class="ident" id="5767836"><a href="/go/doc/reader.go.html#5767803">j</a></span><span class="op" id="5767837">]</span><span class="op" id="5767838">,</span>&nbsp;<span class="ident" id="5767840"><a href="/go/doc/reader.go.html#5767385">list</a></span><span class="op" id="5767844">[</span><span class="ident" id="5767845"><a href="/go/doc/reader.go.html#5767800">i</a></span><span class="op" id="5767846">]</span>&nbsp;<span class="op" id="5767848">}</span><span class="op" id="5767849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5767853">len</span><span class="op" id="5767856">(</span><span class="ident" id="5767857"><a href="/go/doc/reader.go.html#5767385">list</a></span><span class="op" id="5767861">)</span><span class="op" id="5767862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5767865">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5767869">return</span>&nbsp;<span class="ident" id="5767876"><a href="/go/doc/reader.go.html#5767385">list</a></span><br>
<span class="lineno">760</span><span class="op" id="5767881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5767884">func</span>&nbsp;<span class="ident" id="5767889">removeStar</span><span class="op" id="5767899">(</span><span class="ident" id="5767900">s</span>&nbsp;<span class="builtintype" id="5767902">string</span><span class="op" id="5767908">)</span>&nbsp;<span class="builtintype" id="5767910">string</span>&nbsp;<span class="op" id="5767917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5767920">if</span>&nbsp;<span class="builtinfunc" id="5767923">len</span><span class="op" id="5767926">(</span><span class="ident" id="5767927"><a href="/go/doc/reader.go.html#5767900">s</a></span><span class="op" id="5767928">)</span>&nbsp;<span class="op" id="5767930">&gt;</span>&nbsp;<span class="num" id="5767932">0</span>&nbsp;<span class="op" id="5767934">&amp;&amp;</span>&nbsp;<span class="ident" id="5767937"><a href="/go/doc/reader.go.html#5767900">s</a></span><span class="op" id="5767938">[</span><span class="num" id="5767939">0</span><span class="op" id="5767940">]</span>&nbsp;<span class="op" id="5767942">==</span>&nbsp;<span class="string" id="5767945">&#39;*&#39;</span>&nbsp;<span class="op" id="5767949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5767953">return</span>&nbsp;<span class="ident" id="5767960"><a href="/go/doc/reader.go.html#5767900">s</a></span><span class="op" id="5767961">[</span><span class="num" id="5767962">1</span><span class="op" id="5767963">:</span><span class="op" id="5767964">]</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5767967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5767970">return</span>&nbsp;<span class="ident" id="5767977"><a href="/go/doc/reader.go.html#5767900">s</a></span><br>
<span class="lineno"></span><span class="op" id="5767979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5767982">func</span>&nbsp;<span class="ident" id="5767987">sortedFuncs</span><span class="op" id="5767998">(</span><span class="ident" id="5767999">m</span>&nbsp;<span class="ident" id="5768001"><a href="/go/doc/reader.go.html#5747095">methodSet</a></span><span class="op" id="5768010">,</span>&nbsp;<span class="ident" id="5768012">allMethods</span>&nbsp;<span class="builtintype" id="5768023">bool</span><span class="op" id="5768027">)</span>&nbsp;<span class="op" id="5768029">[</span><span class="op" id="5768030">]</span><span class="op" id="5768031">*</span><span class="ident" id="5768032"><a href="/go/doc/doc.go.html#5726778">Func</a></span>&nbsp;<span class="op" id="5768037">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5768040">list</span>&nbsp;<span class="op" id="5768045">:=</span>&nbsp;<span class="builtinfunc" id="5768048">make</span><span class="op" id="5768052">(</span><span class="op" id="5768053">[</span><span class="op" id="5768054">]</span><span class="op" id="5768055">*</span><span class="ident" id="5768056"><a href="/go/doc/doc.go.html#5726778">Func</a></span><span class="op" id="5768060">,</span>&nbsp;<span class="builtinfunc" id="5768062">len</span><span class="op" id="5768065">(</span><span class="ident" id="5768066"><a href="/go/doc/reader.go.html#5767999">m</a></span><span class="op" id="5768067">)</span><span class="op" id="5768068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5768071">i</span>&nbsp;<span class="op" id="5768073">:=</span>&nbsp;<span class="num" id="5768076">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5768079">for</span>&nbsp;<span class="ident" id="5768083">_</span><span class="op" id="5768084">,</span>&nbsp;<span class="ident" id="5768086">m</span>&nbsp;<span class="op" id="5768088">:=</span>&nbsp;<span class="keyword" id="5768091">range</span>&nbsp;<span class="ident" id="5768097"><a href="/go/doc/reader.go.html#5767999">m</a></span>&nbsp;<span class="op" id="5768099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5768103">//&nbsp;determine&nbsp;which&nbsp;methods&nbsp;to&nbsp;include</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5768143">switch</span>&nbsp;<span class="op" id="5768150">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5768154">case</span>&nbsp;<span class="ident" id="5768159"><a href="/go/doc/reader.go.html#5768086">m</a></span><span class="op" id="5768160">.</span><span class="ident" id="5768161">Decl</span>&nbsp;<span class="op" id="5768166">==</span>&nbsp;<span class="ident" id="5768169">nil</span><span class="op" id="5768172">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5768177">//&nbsp;exclude&nbsp;conflict&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5768205">case</span>&nbsp;<span class="ident" id="5768210"><a href="/go/doc/reader.go.html#5768012">allMethods</a></span><span class="op" id="5768220">,</span>&nbsp;<span class="ident" id="5768222"><a href="/go/doc/reader.go.html#5768086">m</a></span><span class="op" id="5768223">.</span><span class="ident" id="5768224">Level</span>&nbsp;<span class="op" id="5768230">==</span>&nbsp;<span class="num" id="5768233">0</span><span class="op" id="5768234">,</span>&nbsp;<span class="op" id="5768236">!</span><span class="ident" id="5768237"><a href="/go/doc/reader.go.html#5746682">ast</a></span><span class="op" id="5768240">.</span><span class="ident" id="5768241">IsExported</span><span class="op" id="5768251">(</span><span class="ident" id="5768252"><a href="/go/doc/reader.go.html#5767889">removeStar</a></span><span class="op" id="5768262">(</span><span class="ident" id="5768263"><a href="/go/doc/reader.go.html#5768086">m</a></span><span class="op" id="5768264">.</span><span class="ident" id="5768265">Orig</span><span class="op" id="5768269">)</span><span class="op" id="5768270">)</span><span class="op" id="5768271">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5768276">//&nbsp;forced&nbsp;inclusion,&nbsp;method&nbsp;not&nbsp;embedded,&nbsp;or&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5768331">//&nbsp;embedded&nbsp;but&nbsp;original&nbsp;receiver&nbsp;type&nbsp;not&nbsp;exported</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5768386"><a href="/go/doc/reader.go.html#5768040">list</a></span><span class="op" id="5768390">[</span><span class="ident" id="5768391"><a href="/go/doc/reader.go.html#5768071">i</a></span><span class="op" id="5768392">]</span>&nbsp;<span class="op" id="5768394">=</span>&nbsp;<span class="ident" id="5768396"><a href="/go/doc/reader.go.html#5768086">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5768401"><a href="/go/doc/reader.go.html#5768071">i</a></span><span class="op" id="5768402">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5768407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5768410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5768413"><a href="/go/doc/reader.go.html#5768040">list</a></span>&nbsp;<span class="op" id="5768418">=</span>&nbsp;<span class="ident" id="5768420"><a href="/go/doc/reader.go.html#5768040">list</a></span><span class="op" id="5768424">[</span><span class="num" id="5768425">0</span><span class="op" id="5768426">:</span><span class="ident" id="5768427"><a href="/go/doc/reader.go.html#5768071">i</a></span><span class="op" id="5768428">]</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5768431"><a href="/go/doc/reader.go.html#5766318">sortBy</a></span><span class="op" id="5768437">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5768441">func</span><span class="op" id="5768445">(</span><span class="ident" id="5768446">i</span><span class="op" id="5768447">,</span>&nbsp;<span class="ident" id="5768449">j</span>&nbsp;<span class="builtintype" id="5768451">int</span><span class="op" id="5768454">)</span>&nbsp;<span class="builtintype" id="5768456">bool</span>&nbsp;<span class="op" id="5768461">{</span>&nbsp;<span class="keyword" id="5768463">return</span>&nbsp;<span class="ident" id="5768470"><a href="/go/doc/reader.go.html#5768040">list</a></span><span class="op" id="5768474">[</span><span class="ident" id="5768475"><a href="/go/doc/reader.go.html#5768446">i</a></span><span class="op" id="5768476">]</span><span class="op" id="5768477">.</span><span class="ident" id="5768478">Name</span>&nbsp;<span class="op" id="5768483">&lt;</span>&nbsp;<span class="ident" id="5768485"><a href="/go/doc/reader.go.html#5768040">list</a></span><span class="op" id="5768489">[</span><span class="ident" id="5768490"><a href="/go/doc/reader.go.html#5768449">j</a></span><span class="op" id="5768491">]</span><span class="op" id="5768492">.</span><span class="ident" id="5768493">Name</span>&nbsp;<span class="op" id="5768498">}</span><span class="op" id="5768499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5768503">func</span><span class="op" id="5768507">(</span><span class="ident" id="5768508">i</span><span class="op" id="5768509">,</span>&nbsp;<span class="ident" id="5768511">j</span>&nbsp;<span class="builtintype" id="5768513">int</span><span class="op" id="5768516">)</span>&nbsp;<span class="op" id="5768518">{</span>&nbsp;<span class="ident" id="5768520"><a href="/go/doc/reader.go.html#5768040">list</a></span><span class="op" id="5768524">[</span><span class="ident" id="5768525"><a href="/go/doc/reader.go.html#5768508">i</a></span><span class="op" id="5768526">]</span><span class="op" id="5768527">,</span>&nbsp;<span class="ident" id="5768529"><a href="/go/doc/reader.go.html#5768040">list</a></span><span class="op" id="5768533">[</span><span class="ident" id="5768534"><a href="/go/doc/reader.go.html#5768511">j</a></span><span class="op" id="5768535">]</span>&nbsp;<span class="op" id="5768537">=</span>&nbsp;<span class="ident" id="5768539"><a href="/go/doc/reader.go.html#5768040">list</a></span><span class="op" id="5768543">[</span><span class="ident" id="5768544"><a href="/go/doc/reader.go.html#5768511">j</a></span><span class="op" id="5768545">]</span><span class="op" id="5768546">,</span>&nbsp;<span class="ident" id="5768548"><a href="/go/doc/reader.go.html#5768040">list</a></span><span class="op" id="5768552">[</span><span class="ident" id="5768553"><a href="/go/doc/reader.go.html#5768508">i</a></span><span class="op" id="5768554">]</span>&nbsp;<span class="op" id="5768556">}</span><span class="op" id="5768557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5768561">len</span><span class="op" id="5768564">(</span><span class="ident" id="5768565"><a href="/go/doc/reader.go.html#5768040">list</a></span><span class="op" id="5768569">)</span><span class="op" id="5768570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5768573">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5768576">return</span>&nbsp;<span class="ident" id="5768583"><a href="/go/doc/reader.go.html#5768040">list</a></span><br>
<span class="lineno"></span><span class="op" id="5768588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5768591">//&nbsp;noteBodies&nbsp;returns&nbsp;a&nbsp;list&nbsp;of&nbsp;note&nbsp;body&nbsp;strings&nbsp;given&nbsp;a&nbsp;list&nbsp;of&nbsp;notes.</span><br>
<span class="lineno"></span><span class="comment" id="5768664">//&nbsp;This&nbsp;is&nbsp;only&nbsp;used&nbsp;to&nbsp;populate&nbsp;the&nbsp;deprecated&nbsp;Package.Bugs&nbsp;field.</span><br>
<span class="lineno">795</span><span class="comment" id="5768732">//</span><br>
<span class="lineno"></span><span class="keyword" id="5768735">func</span>&nbsp;<span class="ident" id="5768740">noteBodies</span><span class="op" id="5768750">(</span><span class="ident" id="5768751">notes</span>&nbsp;<span class="op" id="5768757">[</span><span class="op" id="5768758">]</span><span class="op" id="5768759">*</span><span class="ident" id="5768760"><a href="/go/doc/doc.go.html#5727385">Note</a></span><span class="op" id="5768764">)</span>&nbsp;<span class="op" id="5768766">[</span><span class="op" id="5768767">]</span><span class="builtintype" id="5768768">string</span>&nbsp;<span class="op" id="5768775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5768778">var</span>&nbsp;<span class="ident" id="5768782">list</span>&nbsp;<span class="op" id="5768787">[</span><span class="op" id="5768788">]</span><span class="builtintype" id="5768789">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5768797">for</span>&nbsp;<span class="ident" id="5768801">_</span><span class="op" id="5768802">,</span>&nbsp;<span class="ident" id="5768804">n</span>&nbsp;<span class="op" id="5768806">:=</span>&nbsp;<span class="keyword" id="5768809">range</span>&nbsp;<span class="ident" id="5768815"><a href="/go/doc/reader.go.html#5768751">notes</a></span>&nbsp;<span class="op" id="5768821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5768825"><a href="/go/doc/reader.go.html#5768782">list</a></span>&nbsp;<span class="op" id="5768830">=</span>&nbsp;<span class="builtinfunc" id="5768832">append</span><span class="op" id="5768838">(</span><span class="ident" id="5768839"><a href="/go/doc/reader.go.html#5768782">list</a></span><span class="op" id="5768843">,</span>&nbsp;<span class="ident" id="5768845"><a href="/go/doc/reader.go.html#5768804">n</a></span><span class="op" id="5768846">.</span><span class="ident" id="5768847">Body</span><span class="op" id="5768851">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5768854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5768857">return</span>&nbsp;<span class="ident" id="5768864"><a href="/go/doc/reader.go.html#5768782">list</a></span><br>
<span class="lineno"></span><span class="op" id="5768869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5768872">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno">805</span><span class="comment" id="5768952">//&nbsp;Predeclared&nbsp;identifiers</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5768980">var</span>&nbsp;<span class="ident" id="5768984">predeclaredTypes</span>&nbsp;<span class="op" id="5769001">=</span>&nbsp;<span class="keyword" id="5769003">map</span><span class="op" id="5769006">[</span><span class="builtintype" id="5769007">string</span><span class="op" id="5769013">]</span><span class="builtintype" id="5769014">bool</span><span class="op" id="5769018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769021">&#34;bool&#34;</span><span class="op" id="5769027">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769035">true</span><span class="op" id="5769039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769042">&#34;byte&#34;</span><span class="op" id="5769048">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769056">true</span><span class="op" id="5769060">,</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769063">&#34;complex64&#34;</span><span class="op" id="5769074">:</span>&nbsp;&nbsp;<span class="builtintype" id="5769077">true</span><span class="op" id="5769081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769084">&#34;complex128&#34;</span><span class="op" id="5769096">:</span>&nbsp;<span class="builtintype" id="5769098">true</span><span class="op" id="5769102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769105">&#34;error&#34;</span><span class="op" id="5769112">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769119">true</span><span class="op" id="5769123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769126">&#34;float32&#34;</span><span class="op" id="5769135">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769140">true</span><span class="op" id="5769144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769147">&#34;float64&#34;</span><span class="op" id="5769156">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769161">true</span><span class="op" id="5769165">,</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769168">&#34;int&#34;</span><span class="op" id="5769173">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769182">true</span><span class="op" id="5769186">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769189">&#34;int8&#34;</span><span class="op" id="5769195">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769203">true</span><span class="op" id="5769207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769210">&#34;int16&#34;</span><span class="op" id="5769217">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769224">true</span><span class="op" id="5769228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769231">&#34;int32&#34;</span><span class="op" id="5769238">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769245">true</span><span class="op" id="5769249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769252">&#34;int64&#34;</span><span class="op" id="5769259">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769266">true</span><span class="op" id="5769270">,</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769273">&#34;rune&#34;</span><span class="op" id="5769279">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769287">true</span><span class="op" id="5769291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769294">&#34;string&#34;</span><span class="op" id="5769302">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769308">true</span><span class="op" id="5769312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769315">&#34;uint&#34;</span><span class="op" id="5769321">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769329">true</span><span class="op" id="5769333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769336">&#34;uint8&#34;</span><span class="op" id="5769343">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769350">true</span><span class="op" id="5769354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769357">&#34;uint16&#34;</span><span class="op" id="5769365">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769371">true</span><span class="op" id="5769375">,</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769378">&#34;uint32&#34;</span><span class="op" id="5769386">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769392">true</span><span class="op" id="5769396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769399">&#34;uint64&#34;</span><span class="op" id="5769407">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769413">true</span><span class="op" id="5769417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769420">&#34;uintptr&#34;</span><span class="op" id="5769429">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769434">true</span><span class="op" id="5769438">,</span><br>
<span class="lineno"></span><span class="op" id="5769440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">830</span><span class="keyword" id="5769443">var</span>&nbsp;<span class="ident" id="5769447">predeclaredFuncs</span>&nbsp;<span class="op" id="5769464">=</span>&nbsp;<span class="keyword" id="5769466">map</span><span class="op" id="5769469">[</span><span class="builtintype" id="5769470">string</span><span class="op" id="5769476">]</span><span class="builtintype" id="5769477">bool</span><span class="op" id="5769481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769484">&#34;append&#34;</span><span class="op" id="5769492">:</span>&nbsp;&nbsp;<span class="builtintype" id="5769495">true</span><span class="op" id="5769499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769502">&#34;cap&#34;</span><span class="op" id="5769507">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769513">true</span><span class="op" id="5769517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769520">&#34;close&#34;</span><span class="op" id="5769527">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769531">true</span><span class="op" id="5769535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769538">&#34;complex&#34;</span><span class="op" id="5769547">:</span>&nbsp;<span class="builtintype" id="5769549">true</span><span class="op" id="5769553">,</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769556">&#34;copy&#34;</span><span class="op" id="5769562">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769567">true</span><span class="op" id="5769571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769574">&#34;delete&#34;</span><span class="op" id="5769582">:</span>&nbsp;&nbsp;<span class="builtintype" id="5769585">true</span><span class="op" id="5769589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769592">&#34;imag&#34;</span><span class="op" id="5769598">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769603">true</span><span class="op" id="5769607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769610">&#34;len&#34;</span><span class="op" id="5769615">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769621">true</span><span class="op" id="5769625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769628">&#34;make&#34;</span><span class="op" id="5769634">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769639">true</span><span class="op" id="5769643">,</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769646">&#34;new&#34;</span><span class="op" id="5769651">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769657">true</span><span class="op" id="5769661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769664">&#34;panic&#34;</span><span class="op" id="5769671">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769675">true</span><span class="op" id="5769679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769682">&#34;print&#34;</span><span class="op" id="5769689">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769693">true</span><span class="op" id="5769697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769700">&#34;println&#34;</span><span class="op" id="5769709">:</span>&nbsp;<span class="builtintype" id="5769711">true</span><span class="op" id="5769715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769718">&#34;real&#34;</span><span class="op" id="5769724">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769729">true</span><span class="op" id="5769733">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769736">&#34;recover&#34;</span><span class="op" id="5769745">:</span>&nbsp;<span class="builtintype" id="5769747">true</span><span class="op" id="5769751">,</span><br>
<span class="lineno"></span><span class="op" id="5769753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5769756">var</span>&nbsp;<span class="ident" id="5769760">predeclaredConstants</span>&nbsp;<span class="op" id="5769781">=</span>&nbsp;<span class="keyword" id="5769783">map</span><span class="op" id="5769786">[</span><span class="builtintype" id="5769787">string</span><span class="op" id="5769793">]</span><span class="builtintype" id="5769794">bool</span><span class="op" id="5769798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769801">&#34;false&#34;</span><span class="op" id="5769808">:</span>&nbsp;<span class="builtintype" id="5769810">true</span><span class="op" id="5769814">,</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769817">&#34;iota&#34;</span><span class="op" id="5769823">:</span>&nbsp;&nbsp;<span class="builtintype" id="5769826">true</span><span class="op" id="5769830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769833">&#34;nil&#34;</span><span class="op" id="5769838">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5769842">true</span><span class="op" id="5769846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5769849">&#34;true&#34;</span><span class="op" id="5769855">:</span>&nbsp;&nbsp;<span class="builtintype" id="5769858">true</span><span class="op" id="5769862">,</span><br>
<span class="lineno"></span><span class="op" id="5769864">}</span>
</div>
</body>
</html>
