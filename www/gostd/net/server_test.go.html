<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html" class="current">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6746673">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6746728">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6746782">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6746833">package</span>&nbsp;<span class="ident" id="6746841">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6746846">import</span>&nbsp;<span class="op" id="6746853">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6746856">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6746864">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6746870">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6746876">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6746887">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6746898">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6746905">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6746908">func</span>&nbsp;<span class="ident" id="6746913">skipServerTest</span><span class="op" id="6746927">(</span><span class="ident" id="6746928">net</span><span class="op" id="6746931">,</span>&nbsp;<span class="ident" id="6746933">unixsotype</span><span class="op" id="6746943">,</span>&nbsp;<span class="ident" id="6746945">addr</span>&nbsp;<span class="builtintype" id="6746950">string</span><span class="op" id="6746956">,</span>&nbsp;<span class="ident" id="6746958">ipv6</span><span class="op" id="6746962">,</span>&nbsp;<span class="ident" id="6746964">ipv4map</span><span class="op" id="6746971">,</span>&nbsp;<span class="ident" id="6746973">linuxOnly</span>&nbsp;<span class="builtintype" id="6746983">bool</span><span class="op" id="6746987">)</span>&nbsp;<span class="builtintype" id="6746989">bool</span>&nbsp;<span class="op" id="6746994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6746997">switch</span>&nbsp;<span class="ident" id="6747004">runtime</span><span class="op" id="6747011">.</span><span class="ident" id="6747012">GOOS</span>&nbsp;<span class="op" id="6747017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747020">case</span>&nbsp;<span class="string" id="6747025">&#34;linux&#34;</span><span class="op" id="6747032">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747035">case</span>&nbsp;<span class="string" id="6747040">&#34;nacl&#34;</span><span class="op" id="6747046">,</span>&nbsp;<span class="string" id="6747048">&#34;plan9&#34;</span><span class="op" id="6747055">,</span>&nbsp;<span class="string" id="6747057">&#34;windows&#34;</span><span class="op" id="6747066">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6747070">//&nbsp;&#34;unix&#34;&nbsp;sockets&nbsp;are&nbsp;not&nbsp;supported&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Plan&nbsp;9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747131">if</span>&nbsp;<span class="ident" id="6747134">net</span>&nbsp;<span class="op" id="6747138">==</span>&nbsp;<span class="ident" id="6747141">unixsotype</span>&nbsp;<span class="op" id="6747152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747157">return</span>&nbsp;<span class="builtintype" id="6747164">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6747171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747174">default</span><span class="op" id="6747181">:</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747185">if</span>&nbsp;<span class="ident" id="6747188">net</span>&nbsp;<span class="op" id="6747192">==</span>&nbsp;<span class="ident" id="6747195">unixsotype</span>&nbsp;<span class="op" id="6747206">&amp;&amp;</span>&nbsp;<span class="ident" id="6747209">linuxOnly</span>&nbsp;<span class="op" id="6747219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747224">return</span>&nbsp;<span class="builtintype" id="6747231">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6747238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6747241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747244">switch</span>&nbsp;<span class="ident" id="6747251">addr</span>&nbsp;<span class="op" id="6747256">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747259">case</span>&nbsp;<span class="string" id="6747264">&#34;&#34;</span><span class="op" id="6747266">,</span>&nbsp;<span class="string" id="6747268">&#34;0.0.0.0&#34;</span><span class="op" id="6747277">,</span>&nbsp;<span class="string" id="6747279">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6747297">,</span>&nbsp;<span class="string" id="6747299">&#34;[::]&#34;</span><span class="op" id="6747305">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747309">if</span>&nbsp;<span class="ident" id="6747312">testing</span><span class="op" id="6747319">.</span><span class="ident" id="6747320">Short</span><span class="op" id="6747325">(</span><span class="op" id="6747326">)</span>&nbsp;<span class="op" id="6747328">||</span>&nbsp;<span class="op" id="6747331">!</span><span class="op" id="6747332">*</span><span class="ident" id="6747333">testExternal</span>&nbsp;<span class="op" id="6747346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747351">return</span>&nbsp;<span class="builtintype" id="6747358">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6747365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6747368">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747371">if</span>&nbsp;<span class="ident" id="6747374">ipv6</span>&nbsp;<span class="op" id="6747379">&amp;&amp;</span>&nbsp;<span class="op" id="6747382">!</span><span class="ident" id="6747383">supportsIPv6</span>&nbsp;<span class="op" id="6747396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747400">return</span>&nbsp;<span class="builtintype" id="6747407">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6747413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747416">if</span>&nbsp;<span class="ident" id="6747419">ipv4map</span>&nbsp;<span class="op" id="6747427">&amp;&amp;</span>&nbsp;<span class="op" id="6747430">!</span><span class="ident" id="6747431">supportsIPv4map</span>&nbsp;<span class="op" id="6747447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747451">return</span>&nbsp;<span class="builtintype" id="6747458">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6747464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747467">return</span>&nbsp;<span class="builtintype" id="6747474">false</span><br>
<span class="lineno"></span><span class="op" id="6747480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6747483">var</span>&nbsp;<span class="ident" id="6747487">streamConnServerTests</span>&nbsp;<span class="op" id="6747509">=</span>&nbsp;<span class="op" id="6747511">[</span><span class="op" id="6747512">]</span><span class="keyword" id="6747513">struct</span>&nbsp;<span class="op" id="6747520">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6747523">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6747533">string</span>&nbsp;<span class="comment" id="6747540">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6747556">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6747566">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6747574">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6747584">string</span>&nbsp;<span class="comment" id="6747591">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6747607">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6747617">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6747625">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6747635">bool</span>&nbsp;<span class="comment" id="6747640">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6747681">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6747691">bool</span>&nbsp;<span class="comment" id="6747696">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6747742">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6747752">bool</span>&nbsp;<span class="comment" id="6747757">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6747782">linuxOnly</span>&nbsp;<span class="builtintype" id="6747792">bool</span>&nbsp;<span class="comment" id="6747797">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="6747851">}</span><span class="op" id="6747852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6747855">{</span><span class="ident" id="6747856">snet</span><span class="op" id="6747860">:</span>&nbsp;<span class="string" id="6747862">&#34;tcp&#34;</span><span class="op" id="6747867">,</span>&nbsp;<span class="ident" id="6747869">saddr</span><span class="op" id="6747874">:</span>&nbsp;<span class="string" id="6747876">&#34;&#34;</span><span class="op" id="6747878">,</span>&nbsp;<span class="ident" id="6747880">cnet</span><span class="op" id="6747884">:</span>&nbsp;<span class="string" id="6747886">&#34;tcp&#34;</span><span class="op" id="6747891">,</span>&nbsp;<span class="ident" id="6747893">caddr</span><span class="op" id="6747898">:</span>&nbsp;<span class="string" id="6747900">&#34;127.0.0.1&#34;</span><span class="op" id="6747911">}</span><span class="op" id="6747912">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6747915">{</span><span class="ident" id="6747916">snet</span><span class="op" id="6747920">:</span>&nbsp;<span class="string" id="6747922">&#34;tcp&#34;</span><span class="op" id="6747927">,</span>&nbsp;<span class="ident" id="6747929">saddr</span><span class="op" id="6747934">:</span>&nbsp;<span class="string" id="6747936">&#34;0.0.0.0&#34;</span><span class="op" id="6747945">,</span>&nbsp;<span class="ident" id="6747947">cnet</span><span class="op" id="6747951">:</span>&nbsp;<span class="string" id="6747953">&#34;tcp&#34;</span><span class="op" id="6747958">,</span>&nbsp;<span class="ident" id="6747960">caddr</span><span class="op" id="6747965">:</span>&nbsp;<span class="string" id="6747967">&#34;127.0.0.1&#34;</span><span class="op" id="6747978">}</span><span class="op" id="6747979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6747982">{</span><span class="ident" id="6747983">snet</span><span class="op" id="6747987">:</span>&nbsp;<span class="string" id="6747989">&#34;tcp&#34;</span><span class="op" id="6747994">,</span>&nbsp;<span class="ident" id="6747996">saddr</span><span class="op" id="6748001">:</span>&nbsp;<span class="string" id="6748003">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6748021">,</span>&nbsp;<span class="ident" id="6748023">cnet</span><span class="op" id="6748027">:</span>&nbsp;<span class="string" id="6748029">&#34;tcp&#34;</span><span class="op" id="6748034">,</span>&nbsp;<span class="ident" id="6748036">caddr</span><span class="op" id="6748041">:</span>&nbsp;<span class="string" id="6748043">&#34;127.0.0.1&#34;</span><span class="op" id="6748054">}</span><span class="op" id="6748055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6748058">{</span><span class="ident" id="6748059">snet</span><span class="op" id="6748063">:</span>&nbsp;<span class="string" id="6748065">&#34;tcp&#34;</span><span class="op" id="6748070">,</span>&nbsp;<span class="ident" id="6748072">saddr</span><span class="op" id="6748077">:</span>&nbsp;<span class="string" id="6748079">&#34;[::]&#34;</span><span class="op" id="6748085">,</span>&nbsp;<span class="ident" id="6748087">cnet</span><span class="op" id="6748091">:</span>&nbsp;<span class="string" id="6748093">&#34;tcp&#34;</span><span class="op" id="6748098">,</span>&nbsp;<span class="ident" id="6748100">caddr</span><span class="op" id="6748105">:</span>&nbsp;<span class="string" id="6748107">&#34;[::1]&#34;</span><span class="op" id="6748114">,</span>&nbsp;<span class="ident" id="6748116">ipv6</span><span class="op" id="6748120">:</span>&nbsp;<span class="builtintype" id="6748122">true</span><span class="op" id="6748126">}</span><span class="op" id="6748127">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6748131">{</span><span class="ident" id="6748132">snet</span><span class="op" id="6748136">:</span>&nbsp;<span class="string" id="6748138">&#34;tcp&#34;</span><span class="op" id="6748143">,</span>&nbsp;<span class="ident" id="6748145">saddr</span><span class="op" id="6748150">:</span>&nbsp;<span class="string" id="6748152">&#34;&#34;</span><span class="op" id="6748154">,</span>&nbsp;<span class="ident" id="6748156">cnet</span><span class="op" id="6748160">:</span>&nbsp;<span class="string" id="6748162">&#34;tcp&#34;</span><span class="op" id="6748167">,</span>&nbsp;<span class="ident" id="6748169">caddr</span><span class="op" id="6748174">:</span>&nbsp;<span class="string" id="6748176">&#34;[::1]&#34;</span><span class="op" id="6748183">,</span>&nbsp;<span class="ident" id="6748185">ipv4map</span><span class="op" id="6748192">:</span>&nbsp;<span class="builtintype" id="6748194">true</span><span class="op" id="6748198">}</span><span class="op" id="6748199">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6748202">{</span><span class="ident" id="6748203">snet</span><span class="op" id="6748207">:</span>&nbsp;<span class="string" id="6748209">&#34;tcp&#34;</span><span class="op" id="6748214">,</span>&nbsp;<span class="ident" id="6748216">saddr</span><span class="op" id="6748221">:</span>&nbsp;<span class="string" id="6748223">&#34;0.0.0.0&#34;</span><span class="op" id="6748232">,</span>&nbsp;<span class="ident" id="6748234">cnet</span><span class="op" id="6748238">:</span>&nbsp;<span class="string" id="6748240">&#34;tcp&#34;</span><span class="op" id="6748245">,</span>&nbsp;<span class="ident" id="6748247">caddr</span><span class="op" id="6748252">:</span>&nbsp;<span class="string" id="6748254">&#34;[::1]&#34;</span><span class="op" id="6748261">,</span>&nbsp;<span class="ident" id="6748263">ipv4map</span><span class="op" id="6748270">:</span>&nbsp;<span class="builtintype" id="6748272">true</span><span class="op" id="6748276">}</span><span class="op" id="6748277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6748280">{</span><span class="ident" id="6748281">snet</span><span class="op" id="6748285">:</span>&nbsp;<span class="string" id="6748287">&#34;tcp&#34;</span><span class="op" id="6748292">,</span>&nbsp;<span class="ident" id="6748294">saddr</span><span class="op" id="6748299">:</span>&nbsp;<span class="string" id="6748301">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6748319">,</span>&nbsp;<span class="ident" id="6748321">cnet</span><span class="op" id="6748325">:</span>&nbsp;<span class="string" id="6748327">&#34;tcp&#34;</span><span class="op" id="6748332">,</span>&nbsp;<span class="ident" id="6748334">caddr</span><span class="op" id="6748339">:</span>&nbsp;<span class="string" id="6748341">&#34;[::1]&#34;</span><span class="op" id="6748348">,</span>&nbsp;<span class="ident" id="6748350">ipv4map</span><span class="op" id="6748357">:</span>&nbsp;<span class="builtintype" id="6748359">true</span><span class="op" id="6748363">}</span><span class="op" id="6748364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6748367">{</span><span class="ident" id="6748368">snet</span><span class="op" id="6748372">:</span>&nbsp;<span class="string" id="6748374">&#34;tcp&#34;</span><span class="op" id="6748379">,</span>&nbsp;<span class="ident" id="6748381">saddr</span><span class="op" id="6748386">:</span>&nbsp;<span class="string" id="6748388">&#34;[::]&#34;</span><span class="op" id="6748394">,</span>&nbsp;<span class="ident" id="6748396">cnet</span><span class="op" id="6748400">:</span>&nbsp;<span class="string" id="6748402">&#34;tcp&#34;</span><span class="op" id="6748407">,</span>&nbsp;<span class="ident" id="6748409">caddr</span><span class="op" id="6748414">:</span>&nbsp;<span class="string" id="6748416">&#34;127.0.0.1&#34;</span><span class="op" id="6748427">,</span>&nbsp;<span class="ident" id="6748429">ipv4map</span><span class="op" id="6748436">:</span>&nbsp;<span class="builtintype" id="6748438">true</span><span class="op" id="6748442">}</span><span class="op" id="6748443">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6748447">{</span><span class="ident" id="6748448">snet</span><span class="op" id="6748452">:</span>&nbsp;<span class="string" id="6748454">&#34;tcp&#34;</span><span class="op" id="6748459">,</span>&nbsp;<span class="ident" id="6748461">saddr</span><span class="op" id="6748466">:</span>&nbsp;<span class="string" id="6748468">&#34;&#34;</span><span class="op" id="6748470">,</span>&nbsp;<span class="ident" id="6748472">cnet</span><span class="op" id="6748476">:</span>&nbsp;<span class="string" id="6748478">&#34;tcp4&#34;</span><span class="op" id="6748484">,</span>&nbsp;<span class="ident" id="6748486">caddr</span><span class="op" id="6748491">:</span>&nbsp;<span class="string" id="6748493">&#34;127.0.0.1&#34;</span><span class="op" id="6748504">}</span><span class="op" id="6748505">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6748508">{</span><span class="ident" id="6748509">snet</span><span class="op" id="6748513">:</span>&nbsp;<span class="string" id="6748515">&#34;tcp&#34;</span><span class="op" id="6748520">,</span>&nbsp;<span class="ident" id="6748522">saddr</span><span class="op" id="6748527">:</span>&nbsp;<span class="string" id="6748529">&#34;0.0.0.0&#34;</span><span class="op" id="6748538">,</span>&nbsp;<span class="ident" id="6748540">cnet</span><span class="op" id="6748544">:</span>&nbsp;<span class="string" id="6748546">&#34;tcp4&#34;</span><span class="op" id="6748552">,</span>&nbsp;<span class="ident" id="6748554">caddr</span><span class="op" id="6748559">:</span>&nbsp;<span class="string" id="6748561">&#34;127.0.0.1&#34;</span><span class="op" id="6748572">}</span><span class="op" id="6748573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6748576">{</span><span class="ident" id="6748577">snet</span><span class="op" id="6748581">:</span>&nbsp;<span class="string" id="6748583">&#34;tcp&#34;</span><span class="op" id="6748588">,</span>&nbsp;<span class="ident" id="6748590">saddr</span><span class="op" id="6748595">:</span>&nbsp;<span class="string" id="6748597">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6748615">,</span>&nbsp;<span class="ident" id="6748617">cnet</span><span class="op" id="6748621">:</span>&nbsp;<span class="string" id="6748623">&#34;tcp4&#34;</span><span class="op" id="6748629">,</span>&nbsp;<span class="ident" id="6748631">caddr</span><span class="op" id="6748636">:</span>&nbsp;<span class="string" id="6748638">&#34;127.0.0.1&#34;</span><span class="op" id="6748649">}</span><span class="op" id="6748650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6748653">{</span><span class="ident" id="6748654">snet</span><span class="op" id="6748658">:</span>&nbsp;<span class="string" id="6748660">&#34;tcp&#34;</span><span class="op" id="6748665">,</span>&nbsp;<span class="ident" id="6748667">saddr</span><span class="op" id="6748672">:</span>&nbsp;<span class="string" id="6748674">&#34;[::]&#34;</span><span class="op" id="6748680">,</span>&nbsp;<span class="ident" id="6748682">cnet</span><span class="op" id="6748686">:</span>&nbsp;<span class="string" id="6748688">&#34;tcp6&#34;</span><span class="op" id="6748694">,</span>&nbsp;<span class="ident" id="6748696">caddr</span><span class="op" id="6748701">:</span>&nbsp;<span class="string" id="6748703">&#34;[::1]&#34;</span><span class="op" id="6748710">,</span>&nbsp;<span class="ident" id="6748712">ipv6</span><span class="op" id="6748716">:</span>&nbsp;<span class="builtintype" id="6748718">true</span><span class="op" id="6748722">}</span><span class="op" id="6748723">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6748727">{</span><span class="ident" id="6748728">snet</span><span class="op" id="6748732">:</span>&nbsp;<span class="string" id="6748734">&#34;tcp&#34;</span><span class="op" id="6748739">,</span>&nbsp;<span class="ident" id="6748741">saddr</span><span class="op" id="6748746">:</span>&nbsp;<span class="string" id="6748748">&#34;&#34;</span><span class="op" id="6748750">,</span>&nbsp;<span class="ident" id="6748752">cnet</span><span class="op" id="6748756">:</span>&nbsp;<span class="string" id="6748758">&#34;tcp6&#34;</span><span class="op" id="6748764">,</span>&nbsp;<span class="ident" id="6748766">caddr</span><span class="op" id="6748771">:</span>&nbsp;<span class="string" id="6748773">&#34;[::1]&#34;</span><span class="op" id="6748780">,</span>&nbsp;<span class="ident" id="6748782">ipv4map</span><span class="op" id="6748789">:</span>&nbsp;<span class="builtintype" id="6748791">true</span><span class="op" id="6748795">}</span><span class="op" id="6748796">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6748799">{</span><span class="ident" id="6748800">snet</span><span class="op" id="6748804">:</span>&nbsp;<span class="string" id="6748806">&#34;tcp&#34;</span><span class="op" id="6748811">,</span>&nbsp;<span class="ident" id="6748813">saddr</span><span class="op" id="6748818">:</span>&nbsp;<span class="string" id="6748820">&#34;0.0.0.0&#34;</span><span class="op" id="6748829">,</span>&nbsp;<span class="ident" id="6748831">cnet</span><span class="op" id="6748835">:</span>&nbsp;<span class="string" id="6748837">&#34;tcp6&#34;</span><span class="op" id="6748843">,</span>&nbsp;<span class="ident" id="6748845">caddr</span><span class="op" id="6748850">:</span>&nbsp;<span class="string" id="6748852">&#34;[::1]&#34;</span><span class="op" id="6748859">,</span>&nbsp;<span class="ident" id="6748861">ipv4map</span><span class="op" id="6748868">:</span>&nbsp;<span class="builtintype" id="6748870">true</span><span class="op" id="6748874">}</span><span class="op" id="6748875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6748878">{</span><span class="ident" id="6748879">snet</span><span class="op" id="6748883">:</span>&nbsp;<span class="string" id="6748885">&#34;tcp&#34;</span><span class="op" id="6748890">,</span>&nbsp;<span class="ident" id="6748892">saddr</span><span class="op" id="6748897">:</span>&nbsp;<span class="string" id="6748899">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6748917">,</span>&nbsp;<span class="ident" id="6748919">cnet</span><span class="op" id="6748923">:</span>&nbsp;<span class="string" id="6748925">&#34;tcp6&#34;</span><span class="op" id="6748931">,</span>&nbsp;<span class="ident" id="6748933">caddr</span><span class="op" id="6748938">:</span>&nbsp;<span class="string" id="6748940">&#34;[::1]&#34;</span><span class="op" id="6748947">,</span>&nbsp;<span class="ident" id="6748949">ipv4map</span><span class="op" id="6748956">:</span>&nbsp;<span class="builtintype" id="6748958">true</span><span class="op" id="6748962">}</span><span class="op" id="6748963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6748966">{</span><span class="ident" id="6748967">snet</span><span class="op" id="6748971">:</span>&nbsp;<span class="string" id="6748973">&#34;tcp&#34;</span><span class="op" id="6748978">,</span>&nbsp;<span class="ident" id="6748980">saddr</span><span class="op" id="6748985">:</span>&nbsp;<span class="string" id="6748987">&#34;[::]&#34;</span><span class="op" id="6748993">,</span>&nbsp;<span class="ident" id="6748995">cnet</span><span class="op" id="6748999">:</span>&nbsp;<span class="string" id="6749001">&#34;tcp4&#34;</span><span class="op" id="6749007">,</span>&nbsp;<span class="ident" id="6749009">caddr</span><span class="op" id="6749014">:</span>&nbsp;<span class="string" id="6749016">&#34;127.0.0.1&#34;</span><span class="op" id="6749027">,</span>&nbsp;<span class="ident" id="6749029">ipv4map</span><span class="op" id="6749036">:</span>&nbsp;<span class="builtintype" id="6749038">true</span><span class="op" id="6749042">}</span><span class="op" id="6749043">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749047">{</span><span class="ident" id="6749048">snet</span><span class="op" id="6749052">:</span>&nbsp;<span class="string" id="6749054">&#34;tcp&#34;</span><span class="op" id="6749059">,</span>&nbsp;<span class="ident" id="6749061">saddr</span><span class="op" id="6749066">:</span>&nbsp;<span class="string" id="6749068">&#34;127.0.0.1&#34;</span><span class="op" id="6749079">,</span>&nbsp;<span class="ident" id="6749081">cnet</span><span class="op" id="6749085">:</span>&nbsp;<span class="string" id="6749087">&#34;tcp&#34;</span><span class="op" id="6749092">,</span>&nbsp;<span class="ident" id="6749094">caddr</span><span class="op" id="6749099">:</span>&nbsp;<span class="string" id="6749101">&#34;127.0.0.1&#34;</span><span class="op" id="6749112">}</span><span class="op" id="6749113">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749116">{</span><span class="ident" id="6749117">snet</span><span class="op" id="6749121">:</span>&nbsp;<span class="string" id="6749123">&#34;tcp&#34;</span><span class="op" id="6749128">,</span>&nbsp;<span class="ident" id="6749130">saddr</span><span class="op" id="6749135">:</span>&nbsp;<span class="string" id="6749137">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6749157">,</span>&nbsp;<span class="ident" id="6749159">cnet</span><span class="op" id="6749163">:</span>&nbsp;<span class="string" id="6749165">&#34;tcp&#34;</span><span class="op" id="6749170">,</span>&nbsp;<span class="ident" id="6749172">caddr</span><span class="op" id="6749177">:</span>&nbsp;<span class="string" id="6749179">&#34;127.0.0.1&#34;</span><span class="op" id="6749190">}</span><span class="op" id="6749191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749194">{</span><span class="ident" id="6749195">snet</span><span class="op" id="6749199">:</span>&nbsp;<span class="string" id="6749201">&#34;tcp&#34;</span><span class="op" id="6749206">,</span>&nbsp;<span class="ident" id="6749208">saddr</span><span class="op" id="6749213">:</span>&nbsp;<span class="string" id="6749215">&#34;[::1]&#34;</span><span class="op" id="6749222">,</span>&nbsp;<span class="ident" id="6749224">cnet</span><span class="op" id="6749228">:</span>&nbsp;<span class="string" id="6749230">&#34;tcp&#34;</span><span class="op" id="6749235">,</span>&nbsp;<span class="ident" id="6749237">caddr</span><span class="op" id="6749242">:</span>&nbsp;<span class="string" id="6749244">&#34;[::1]&#34;</span><span class="op" id="6749251">,</span>&nbsp;<span class="ident" id="6749253">ipv6</span><span class="op" id="6749257">:</span>&nbsp;<span class="builtintype" id="6749259">true</span><span class="op" id="6749263">}</span><span class="op" id="6749264">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749268">{</span><span class="ident" id="6749269">snet</span><span class="op" id="6749273">:</span>&nbsp;<span class="string" id="6749275">&#34;tcp4&#34;</span><span class="op" id="6749281">,</span>&nbsp;<span class="ident" id="6749283">saddr</span><span class="op" id="6749288">:</span>&nbsp;<span class="string" id="6749290">&#34;&#34;</span><span class="op" id="6749292">,</span>&nbsp;<span class="ident" id="6749294">cnet</span><span class="op" id="6749298">:</span>&nbsp;<span class="string" id="6749300">&#34;tcp4&#34;</span><span class="op" id="6749306">,</span>&nbsp;<span class="ident" id="6749308">caddr</span><span class="op" id="6749313">:</span>&nbsp;<span class="string" id="6749315">&#34;127.0.0.1&#34;</span><span class="op" id="6749326">}</span><span class="op" id="6749327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749330">{</span><span class="ident" id="6749331">snet</span><span class="op" id="6749335">:</span>&nbsp;<span class="string" id="6749337">&#34;tcp4&#34;</span><span class="op" id="6749343">,</span>&nbsp;<span class="ident" id="6749345">saddr</span><span class="op" id="6749350">:</span>&nbsp;<span class="string" id="6749352">&#34;0.0.0.0&#34;</span><span class="op" id="6749361">,</span>&nbsp;<span class="ident" id="6749363">cnet</span><span class="op" id="6749367">:</span>&nbsp;<span class="string" id="6749369">&#34;tcp4&#34;</span><span class="op" id="6749375">,</span>&nbsp;<span class="ident" id="6749377">caddr</span><span class="op" id="6749382">:</span>&nbsp;<span class="string" id="6749384">&#34;127.0.0.1&#34;</span><span class="op" id="6749395">}</span><span class="op" id="6749396">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749399">{</span><span class="ident" id="6749400">snet</span><span class="op" id="6749404">:</span>&nbsp;<span class="string" id="6749406">&#34;tcp4&#34;</span><span class="op" id="6749412">,</span>&nbsp;<span class="ident" id="6749414">saddr</span><span class="op" id="6749419">:</span>&nbsp;<span class="string" id="6749421">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6749439">,</span>&nbsp;<span class="ident" id="6749441">cnet</span><span class="op" id="6749445">:</span>&nbsp;<span class="string" id="6749447">&#34;tcp4&#34;</span><span class="op" id="6749453">,</span>&nbsp;<span class="ident" id="6749455">caddr</span><span class="op" id="6749460">:</span>&nbsp;<span class="string" id="6749462">&#34;127.0.0.1&#34;</span><span class="op" id="6749473">}</span><span class="op" id="6749474">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749478">{</span><span class="ident" id="6749479">snet</span><span class="op" id="6749483">:</span>&nbsp;<span class="string" id="6749485">&#34;tcp4&#34;</span><span class="op" id="6749491">,</span>&nbsp;<span class="ident" id="6749493">saddr</span><span class="op" id="6749498">:</span>&nbsp;<span class="string" id="6749500">&#34;127.0.0.1&#34;</span><span class="op" id="6749511">,</span>&nbsp;<span class="ident" id="6749513">cnet</span><span class="op" id="6749517">:</span>&nbsp;<span class="string" id="6749519">&#34;tcp4&#34;</span><span class="op" id="6749525">,</span>&nbsp;<span class="ident" id="6749527">caddr</span><span class="op" id="6749532">:</span>&nbsp;<span class="string" id="6749534">&#34;127.0.0.1&#34;</span><span class="op" id="6749545">}</span><span class="op" id="6749546">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749550">{</span><span class="ident" id="6749551">snet</span><span class="op" id="6749555">:</span>&nbsp;<span class="string" id="6749557">&#34;tcp6&#34;</span><span class="op" id="6749563">,</span>&nbsp;<span class="ident" id="6749565">saddr</span><span class="op" id="6749570">:</span>&nbsp;<span class="string" id="6749572">&#34;&#34;</span><span class="op" id="6749574">,</span>&nbsp;<span class="ident" id="6749576">cnet</span><span class="op" id="6749580">:</span>&nbsp;<span class="string" id="6749582">&#34;tcp6&#34;</span><span class="op" id="6749588">,</span>&nbsp;<span class="ident" id="6749590">caddr</span><span class="op" id="6749595">:</span>&nbsp;<span class="string" id="6749597">&#34;[::1]&#34;</span><span class="op" id="6749604">,</span>&nbsp;<span class="ident" id="6749606">ipv6</span><span class="op" id="6749610">:</span>&nbsp;<span class="builtintype" id="6749612">true</span><span class="op" id="6749616">}</span><span class="op" id="6749617">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749620">{</span><span class="ident" id="6749621">snet</span><span class="op" id="6749625">:</span>&nbsp;<span class="string" id="6749627">&#34;tcp6&#34;</span><span class="op" id="6749633">,</span>&nbsp;<span class="ident" id="6749635">saddr</span><span class="op" id="6749640">:</span>&nbsp;<span class="string" id="6749642">&#34;[::]&#34;</span><span class="op" id="6749648">,</span>&nbsp;<span class="ident" id="6749650">cnet</span><span class="op" id="6749654">:</span>&nbsp;<span class="string" id="6749656">&#34;tcp6&#34;</span><span class="op" id="6749662">,</span>&nbsp;<span class="ident" id="6749664">caddr</span><span class="op" id="6749669">:</span>&nbsp;<span class="string" id="6749671">&#34;[::1]&#34;</span><span class="op" id="6749678">,</span>&nbsp;<span class="ident" id="6749680">ipv6</span><span class="op" id="6749684">:</span>&nbsp;<span class="builtintype" id="6749686">true</span><span class="op" id="6749690">}</span><span class="op" id="6749691">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749695">{</span><span class="ident" id="6749696">snet</span><span class="op" id="6749700">:</span>&nbsp;<span class="string" id="6749702">&#34;tcp6&#34;</span><span class="op" id="6749708">,</span>&nbsp;<span class="ident" id="6749710">saddr</span><span class="op" id="6749715">:</span>&nbsp;<span class="string" id="6749717">&#34;[::1]&#34;</span><span class="op" id="6749724">,</span>&nbsp;<span class="ident" id="6749726">cnet</span><span class="op" id="6749730">:</span>&nbsp;<span class="string" id="6749732">&#34;tcp6&#34;</span><span class="op" id="6749738">,</span>&nbsp;<span class="ident" id="6749740">caddr</span><span class="op" id="6749745">:</span>&nbsp;<span class="string" id="6749747">&#34;[::1]&#34;</span><span class="op" id="6749754">,</span>&nbsp;<span class="ident" id="6749756">ipv6</span><span class="op" id="6749760">:</span>&nbsp;<span class="builtintype" id="6749762">true</span><span class="op" id="6749766">}</span><span class="op" id="6749767">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749771">{</span><span class="ident" id="6749772">snet</span><span class="op" id="6749776">:</span>&nbsp;<span class="string" id="6749778">&#34;unix&#34;</span><span class="op" id="6749784">,</span>&nbsp;<span class="ident" id="6749786">saddr</span><span class="op" id="6749791">:</span>&nbsp;<span class="ident" id="6749793">testUnixAddr</span><span class="op" id="6749805">(</span><span class="op" id="6749806">)</span><span class="op" id="6749807">,</span>&nbsp;<span class="ident" id="6749809">cnet</span><span class="op" id="6749813">:</span>&nbsp;<span class="string" id="6749815">&#34;unix&#34;</span><span class="op" id="6749821">,</span>&nbsp;<span class="ident" id="6749823">caddr</span><span class="op" id="6749828">:</span>&nbsp;<span class="ident" id="6749830">testUnixAddr</span><span class="op" id="6749842">(</span><span class="op" id="6749843">)</span><span class="op" id="6749844">}</span><span class="op" id="6749845">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749848">{</span><span class="ident" id="6749849">snet</span><span class="op" id="6749853">:</span>&nbsp;<span class="string" id="6749855">&#34;unix&#34;</span><span class="op" id="6749861">,</span>&nbsp;<span class="ident" id="6749863">saddr</span><span class="op" id="6749868">:</span>&nbsp;<span class="string" id="6749870">&#34;@gotest2/net&#34;</span><span class="op" id="6749884">,</span>&nbsp;<span class="ident" id="6749886">cnet</span><span class="op" id="6749890">:</span>&nbsp;<span class="string" id="6749892">&#34;unix&#34;</span><span class="op" id="6749898">,</span>&nbsp;<span class="ident" id="6749900">caddr</span><span class="op" id="6749905">:</span>&nbsp;<span class="string" id="6749907">&#34;@gotest2/net.local&#34;</span><span class="op" id="6749927">,</span>&nbsp;<span class="ident" id="6749929">linuxOnly</span><span class="op" id="6749938">:</span>&nbsp;<span class="builtintype" id="6749940">true</span><span class="op" id="6749944">}</span><span class="op" id="6749945">,</span><br>
<span class="lineno"></span><span class="op" id="6749947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6749950">func</span>&nbsp;<span class="ident" id="6749955">TestStreamConnServer</span><span class="op" id="6749975">(</span><span class="ident" id="6749976">t</span>&nbsp;<span class="op" id="6749978">*</span><span class="ident" id="6749979">testing</span><span class="op" id="6749986">.</span><span class="ident" id="6749987">T</span><span class="op" id="6749988">)</span>&nbsp;<span class="op" id="6749990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6749993">for</span>&nbsp;<span class="ident" id="6749997">_</span><span class="op" id="6749998">,</span>&nbsp;<span class="ident" id="6750000">tt</span>&nbsp;<span class="op" id="6750003">:=</span>&nbsp;<span class="keyword" id="6750006">range</span>&nbsp;<span class="ident" id="6750012">streamConnServerTests</span>&nbsp;<span class="op" id="6750034">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6750038">if</span>&nbsp;<span class="ident" id="6750041">skipServerTest</span><span class="op" id="6750055">(</span><span class="ident" id="6750056">tt</span><span class="op" id="6750058">.</span><span class="ident" id="6750059">snet</span><span class="op" id="6750063">,</span>&nbsp;<span class="string" id="6750065">&#34;unix&#34;</span><span class="op" id="6750071">,</span>&nbsp;<span class="ident" id="6750073">tt</span><span class="op" id="6750075">.</span><span class="ident" id="6750076">saddr</span><span class="op" id="6750081">,</span>&nbsp;<span class="ident" id="6750083">tt</span><span class="op" id="6750085">.</span><span class="ident" id="6750086">ipv6</span><span class="op" id="6750090">,</span>&nbsp;<span class="ident" id="6750092">tt</span><span class="op" id="6750094">.</span><span class="ident" id="6750095">ipv4map</span><span class="op" id="6750102">,</span>&nbsp;<span class="ident" id="6750104">tt</span><span class="op" id="6750106">.</span><span class="ident" id="6750107">linuxOnly</span><span class="op" id="6750116">)</span>&nbsp;<span class="op" id="6750118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6750123">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6750134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750139">listening</span>&nbsp;<span class="op" id="6750149">:=</span>&nbsp;<span class="builtinfunc" id="6750152">make</span><span class="op" id="6750156">(</span><span class="keyword" id="6750157">chan</span>&nbsp;<span class="builtintype" id="6750162">string</span><span class="op" id="6750168">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750172">done</span>&nbsp;<span class="op" id="6750177">:=</span>&nbsp;<span class="builtinfunc" id="6750180">make</span><span class="op" id="6750184">(</span><span class="keyword" id="6750185">chan</span>&nbsp;<span class="builtintype" id="6750190">int</span><span class="op" id="6750193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6750197">switch</span>&nbsp;<span class="ident" id="6750204">tt</span><span class="op" id="6750206">.</span><span class="ident" id="6750207">snet</span>&nbsp;<span class="op" id="6750212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6750216">case</span>&nbsp;<span class="string" id="6750221">&#34;tcp&#34;</span><span class="op" id="6750226">,</span>&nbsp;<span class="string" id="6750228">&#34;tcp4&#34;</span><span class="op" id="6750234">,</span>&nbsp;<span class="string" id="6750236">&#34;tcp6&#34;</span><span class="op" id="6750242">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750247">tt</span><span class="op" id="6750249">.</span><span class="ident" id="6750250">saddr</span>&nbsp;<span class="op" id="6750256">+=</span>&nbsp;<span class="string" id="6750259">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6750266">case</span>&nbsp;<span class="string" id="6750271">&#34;unix&#34;</span><span class="op" id="6750277">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750282">os</span><span class="op" id="6750284">.</span><span class="ident" id="6750285">Remove</span><span class="op" id="6750291">(</span><span class="ident" id="6750292">tt</span><span class="op" id="6750294">.</span><span class="ident" id="6750295">saddr</span><span class="op" id="6750300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750305">os</span><span class="op" id="6750307">.</span><span class="ident" id="6750308">Remove</span><span class="op" id="6750314">(</span><span class="ident" id="6750315">tt</span><span class="op" id="6750317">.</span><span class="ident" id="6750318">caddr</span><span class="op" id="6750323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6750327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6750332">go</span>&nbsp;<span class="ident" id="6750335">runStreamConnServer</span><span class="op" id="6750354">(</span><span class="ident" id="6750355">t</span><span class="op" id="6750356">,</span>&nbsp;<span class="ident" id="6750358">tt</span><span class="op" id="6750360">.</span><span class="ident" id="6750361">snet</span><span class="op" id="6750365">,</span>&nbsp;<span class="ident" id="6750367">tt</span><span class="op" id="6750369">.</span><span class="ident" id="6750370">saddr</span><span class="op" id="6750375">,</span>&nbsp;<span class="ident" id="6750377">listening</span><span class="op" id="6750386">,</span>&nbsp;<span class="ident" id="6750388">done</span><span class="op" id="6750392">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750396">taddr</span>&nbsp;<span class="op" id="6750402">:=</span>&nbsp;<span class="op" id="6750405">&lt;-</span><span class="ident" id="6750407">listening</span>&nbsp;<span class="comment" id="6750417">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6750448">switch</span>&nbsp;<span class="ident" id="6750455">tt</span><span class="op" id="6750457">.</span><span class="ident" id="6750458">cnet</span>&nbsp;<span class="op" id="6750463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6750467">case</span>&nbsp;<span class="string" id="6750472">&#34;tcp&#34;</span><span class="op" id="6750477">,</span>&nbsp;<span class="string" id="6750479">&#34;tcp4&#34;</span><span class="op" id="6750485">,</span>&nbsp;<span class="string" id="6750487">&#34;tcp6&#34;</span><span class="op" id="6750493">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750498">_</span><span class="op" id="6750499">,</span>&nbsp;<span class="ident" id="6750501">port</span><span class="op" id="6750505">,</span>&nbsp;<span class="ident" id="6750507">err</span>&nbsp;<span class="op" id="6750511">:=</span>&nbsp;<span class="ident" id="6750514">SplitHostPort</span><span class="op" id="6750527">(</span><span class="ident" id="6750528">taddr</span><span class="op" id="6750533">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6750538">if</span>&nbsp;<span class="ident" id="6750541">err</span>&nbsp;<span class="op" id="6750545">!=</span>&nbsp;<span class="builtintype" id="6750548">nil</span>&nbsp;<span class="op" id="6750552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750558">t</span><span class="op" id="6750559">.</span><span class="ident" id="6750560">Fatalf</span><span class="op" id="6750566">(</span><span class="string" id="6750567">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6750597">,</span>&nbsp;<span class="ident" id="6750599">taddr</span><span class="op" id="6750604">,</span>&nbsp;<span class="ident" id="6750606">err</span><span class="op" id="6750609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6750614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750619">taddr</span>&nbsp;<span class="op" id="6750625">=</span>&nbsp;<span class="ident" id="6750627">tt</span><span class="op" id="6750629">.</span><span class="ident" id="6750630">caddr</span>&nbsp;<span class="op" id="6750636">+</span>&nbsp;<span class="string" id="6750638">&#34;:&#34;</span>&nbsp;<span class="op" id="6750642">+</span>&nbsp;<span class="ident" id="6750644">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6750651">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750656">runStreamConnClient</span><span class="op" id="6750675">(</span><span class="ident" id="6750676">t</span><span class="op" id="6750677">,</span>&nbsp;<span class="ident" id="6750679">tt</span><span class="op" id="6750681">.</span><span class="ident" id="6750682">cnet</span><span class="op" id="6750686">,</span>&nbsp;<span class="ident" id="6750688">taddr</span><span class="op" id="6750693">,</span>&nbsp;<span class="ident" id="6750695">tt</span><span class="op" id="6750697">.</span><span class="ident" id="6750698">empty</span><span class="op" id="6750703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6750707">&lt;-</span><span class="ident" id="6750709">done</span>&nbsp;<span class="comment" id="6750714">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6750745">switch</span>&nbsp;<span class="ident" id="6750752">tt</span><span class="op" id="6750754">.</span><span class="ident" id="6750755">snet</span>&nbsp;<span class="op" id="6750760">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6750764">case</span>&nbsp;<span class="string" id="6750769">&#34;unix&#34;</span><span class="op" id="6750775">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750780">os</span><span class="op" id="6750782">.</span><span class="ident" id="6750783">Remove</span><span class="op" id="6750789">(</span><span class="ident" id="6750790">tt</span><span class="op" id="6750792">.</span><span class="ident" id="6750793">saddr</span><span class="op" id="6750798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750803">os</span><span class="op" id="6750805">.</span><span class="ident" id="6750806">Remove</span><span class="op" id="6750812">(</span><span class="ident" id="6750813">tt</span><span class="op" id="6750815">.</span><span class="ident" id="6750816">caddr</span><span class="op" id="6750821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6750825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6750828">}</span><br>
<span class="lineno">130</span><span class="op" id="6750830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6750833">var</span>&nbsp;<span class="ident" id="6750837">seqpacketConnServerTests</span>&nbsp;<span class="op" id="6750862">=</span>&nbsp;<span class="op" id="6750864">[</span><span class="op" id="6750865">]</span><span class="keyword" id="6750866">struct</span>&nbsp;<span class="op" id="6750873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750876">net</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6750886">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750894">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6750904">string</span>&nbsp;<span class="comment" id="6750911">//&nbsp;server&nbsp;address</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750930">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6750940">string</span>&nbsp;<span class="comment" id="6750947">//&nbsp;client&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750966">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6750976">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6750983">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751008">linuxOnly</span>&nbsp;<span class="builtintype" id="6751018">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6751025">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="6751079">}</span><span class="op" id="6751080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6751083">{</span><span class="ident" id="6751084">net</span><span class="op" id="6751087">:</span>&nbsp;<span class="string" id="6751089">&#34;unixpacket&#34;</span><span class="op" id="6751101">,</span>&nbsp;<span class="ident" id="6751103">saddr</span><span class="op" id="6751108">:</span>&nbsp;<span class="ident" id="6751110">testUnixAddr</span><span class="op" id="6751122">(</span><span class="op" id="6751123">)</span><span class="op" id="6751124">,</span>&nbsp;<span class="ident" id="6751126">caddr</span><span class="op" id="6751131">:</span>&nbsp;<span class="ident" id="6751133">testUnixAddr</span><span class="op" id="6751145">(</span><span class="op" id="6751146">)</span><span class="op" id="6751147">}</span><span class="op" id="6751148">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6751151">{</span><span class="ident" id="6751152">net</span><span class="op" id="6751155">:</span>&nbsp;<span class="string" id="6751157">&#34;unixpacket&#34;</span><span class="op" id="6751169">,</span>&nbsp;<span class="ident" id="6751171">saddr</span><span class="op" id="6751176">:</span>&nbsp;<span class="string" id="6751178">&#34;@gotest4/net&#34;</span><span class="op" id="6751192">,</span>&nbsp;<span class="ident" id="6751194">caddr</span><span class="op" id="6751199">:</span>&nbsp;<span class="string" id="6751201">&#34;@gotest4/net.local&#34;</span><span class="op" id="6751221">,</span>&nbsp;<span class="ident" id="6751223">linuxOnly</span><span class="op" id="6751232">:</span>&nbsp;<span class="builtintype" id="6751234">true</span><span class="op" id="6751238">}</span><span class="op" id="6751239">,</span><br>
<span class="lineno"></span><span class="op" id="6751241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6751244">func</span>&nbsp;<span class="ident" id="6751249">TestSeqpacketConnServer</span><span class="op" id="6751272">(</span><span class="ident" id="6751273">t</span>&nbsp;<span class="op" id="6751275">*</span><span class="ident" id="6751276">testing</span><span class="op" id="6751283">.</span><span class="ident" id="6751284">T</span><span class="op" id="6751285">)</span>&nbsp;<span class="op" id="6751287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751290">switch</span>&nbsp;<span class="ident" id="6751297">runtime</span><span class="op" id="6751304">.</span><span class="ident" id="6751305">GOOS</span>&nbsp;<span class="op" id="6751310">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751313">case</span>&nbsp;<span class="string" id="6751318">&#34;darwin&#34;</span><span class="op" id="6751326">,</span>&nbsp;<span class="string" id="6751328">&#34;nacl&#34;</span><span class="op" id="6751334">,</span>&nbsp;<span class="string" id="6751336">&#34;openbsd&#34;</span><span class="op" id="6751345">,</span>&nbsp;<span class="string" id="6751347">&#34;plan9&#34;</span><span class="op" id="6751354">,</span>&nbsp;<span class="string" id="6751356">&#34;windows&#34;</span><span class="op" id="6751365">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751369">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751382">case</span>&nbsp;<span class="string" id="6751387">&#34;freebsd&#34;</span><span class="op" id="6751396">:</span>&nbsp;<span class="comment" id="6751398">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751440">t</span><span class="op" id="6751441">.</span><span class="ident" id="6751442">Skipf</span><span class="op" id="6751447">(</span><span class="string" id="6751448">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6751469">,</span>&nbsp;<span class="ident" id="6751471">runtime</span><span class="op" id="6751478">.</span><span class="ident" id="6751479">GOOS</span><span class="op" id="6751483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6751486">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751490">for</span>&nbsp;<span class="ident" id="6751494">_</span><span class="op" id="6751495">,</span>&nbsp;<span class="ident" id="6751497">tt</span>&nbsp;<span class="op" id="6751500">:=</span>&nbsp;<span class="keyword" id="6751503">range</span>&nbsp;<span class="ident" id="6751509">seqpacketConnServerTests</span>&nbsp;<span class="op" id="6751534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751538">if</span>&nbsp;<span class="ident" id="6751541">runtime</span><span class="op" id="6751548">.</span><span class="ident" id="6751549">GOOS</span>&nbsp;<span class="op" id="6751554">!=</span>&nbsp;<span class="string" id="6751557">&#34;linux&#34;</span>&nbsp;<span class="op" id="6751565">&amp;&amp;</span>&nbsp;<span class="ident" id="6751568">tt</span><span class="op" id="6751570">.</span><span class="ident" id="6751571">linuxOnly</span>&nbsp;<span class="op" id="6751581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751586">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6751597">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751601">listening</span>&nbsp;<span class="op" id="6751611">:=</span>&nbsp;<span class="builtinfunc" id="6751614">make</span><span class="op" id="6751618">(</span><span class="keyword" id="6751619">chan</span>&nbsp;<span class="builtintype" id="6751624">string</span><span class="op" id="6751630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751634">done</span>&nbsp;<span class="op" id="6751639">:=</span>&nbsp;<span class="builtinfunc" id="6751642">make</span><span class="op" id="6751646">(</span><span class="keyword" id="6751647">chan</span>&nbsp;<span class="builtintype" id="6751652">int</span><span class="op" id="6751655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751659">switch</span>&nbsp;<span class="ident" id="6751666">tt</span><span class="op" id="6751668">.</span><span class="ident" id="6751669">net</span>&nbsp;<span class="op" id="6751673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751677">case</span>&nbsp;<span class="string" id="6751682">&#34;unixpacket&#34;</span><span class="op" id="6751694">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751699">os</span><span class="op" id="6751701">.</span><span class="ident" id="6751702">Remove</span><span class="op" id="6751708">(</span><span class="ident" id="6751709">tt</span><span class="op" id="6751711">.</span><span class="ident" id="6751712">saddr</span><span class="op" id="6751717">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751722">os</span><span class="op" id="6751724">.</span><span class="ident" id="6751725">Remove</span><span class="op" id="6751731">(</span><span class="ident" id="6751732">tt</span><span class="op" id="6751734">.</span><span class="ident" id="6751735">caddr</span><span class="op" id="6751740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6751744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751749">go</span>&nbsp;<span class="ident" id="6751752">runStreamConnServer</span><span class="op" id="6751771">(</span><span class="ident" id="6751772">t</span><span class="op" id="6751773">,</span>&nbsp;<span class="ident" id="6751775">tt</span><span class="op" id="6751777">.</span><span class="ident" id="6751778">net</span><span class="op" id="6751781">,</span>&nbsp;<span class="ident" id="6751783">tt</span><span class="op" id="6751785">.</span><span class="ident" id="6751786">saddr</span><span class="op" id="6751791">,</span>&nbsp;<span class="ident" id="6751793">listening</span><span class="op" id="6751802">,</span>&nbsp;<span class="ident" id="6751804">done</span><span class="op" id="6751808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751812">taddr</span>&nbsp;<span class="op" id="6751818">:=</span>&nbsp;<span class="op" id="6751821">&lt;-</span><span class="ident" id="6751823">listening</span>&nbsp;<span class="comment" id="6751833">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751864">runStreamConnClient</span><span class="op" id="6751883">(</span><span class="ident" id="6751884">t</span><span class="op" id="6751885">,</span>&nbsp;<span class="ident" id="6751887">tt</span><span class="op" id="6751889">.</span><span class="ident" id="6751890">net</span><span class="op" id="6751893">,</span>&nbsp;<span class="ident" id="6751895">taddr</span><span class="op" id="6751900">,</span>&nbsp;<span class="ident" id="6751902">tt</span><span class="op" id="6751904">.</span><span class="ident" id="6751905">empty</span><span class="op" id="6751910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6751914">&lt;-</span><span class="ident" id="6751916">done</span>&nbsp;<span class="comment" id="6751921">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751952">switch</span>&nbsp;<span class="ident" id="6751959">tt</span><span class="op" id="6751961">.</span><span class="ident" id="6751962">net</span>&nbsp;<span class="op" id="6751966">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751970">case</span>&nbsp;<span class="string" id="6751975">&#34;unixpacket&#34;</span><span class="op" id="6751987">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751992">os</span><span class="op" id="6751994">.</span><span class="ident" id="6751995">Remove</span><span class="op" id="6752001">(</span><span class="ident" id="6752002">tt</span><span class="op" id="6752004">.</span><span class="ident" id="6752005">saddr</span><span class="op" id="6752010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6752015">os</span><span class="op" id="6752017">.</span><span class="ident" id="6752018">Remove</span><span class="op" id="6752024">(</span><span class="ident" id="6752025">tt</span><span class="op" id="6752027">.</span><span class="ident" id="6752028">caddr</span><span class="op" id="6752033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6752037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6752040">}</span><br>
<span class="lineno">175</span><span class="op" id="6752042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6752045">func</span>&nbsp;<span class="ident" id="6752050">runStreamConnServer</span><span class="op" id="6752069">(</span><span class="ident" id="6752070">t</span>&nbsp;<span class="op" id="6752072">*</span><span class="ident" id="6752073">testing</span><span class="op" id="6752080">.</span><span class="ident" id="6752081">T</span><span class="op" id="6752082">,</span>&nbsp;<span class="ident" id="6752084">net</span><span class="op" id="6752087">,</span>&nbsp;<span class="ident" id="6752089">laddr</span>&nbsp;<span class="builtintype" id="6752095">string</span><span class="op" id="6752101">,</span>&nbsp;<span class="ident" id="6752103">listening</span>&nbsp;<span class="keyword" id="6752113">chan</span><span class="op" id="6752117">&lt;-</span>&nbsp;<span class="builtintype" id="6752120">string</span><span class="op" id="6752126">,</span>&nbsp;<span class="ident" id="6752128">done</span>&nbsp;<span class="keyword" id="6752133">chan</span><span class="op" id="6752137">&lt;-</span>&nbsp;<span class="builtintype" id="6752140">int</span><span class="op" id="6752143">)</span>&nbsp;<span class="op" id="6752145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6752148">defer</span>&nbsp;<span class="builtinfunc" id="6752154">close</span><span class="op" id="6752159">(</span><span class="ident" id="6752160">done</span><span class="op" id="6752164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6752167">l</span><span class="op" id="6752168">,</span>&nbsp;<span class="ident" id="6752170">err</span>&nbsp;<span class="op" id="6752174">:=</span>&nbsp;<span class="ident" id="6752177">Listen</span><span class="op" id="6752183">(</span><span class="ident" id="6752184">net</span><span class="op" id="6752187">,</span>&nbsp;<span class="ident" id="6752189">laddr</span><span class="op" id="6752194">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6752197">if</span>&nbsp;<span class="ident" id="6752200">err</span>&nbsp;<span class="op" id="6752204">!=</span>&nbsp;<span class="builtintype" id="6752207">nil</span>&nbsp;<span class="op" id="6752211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6752215">t</span><span class="op" id="6752216">.</span><span class="ident" id="6752217">Errorf</span><span class="op" id="6752223">(</span><span class="string" id="6752224">&#34;Listen(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6752251">,</span>&nbsp;<span class="ident" id="6752253">net</span><span class="op" id="6752256">,</span>&nbsp;<span class="ident" id="6752258">laddr</span><span class="op" id="6752263">,</span>&nbsp;<span class="ident" id="6752265">err</span><span class="op" id="6752268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6752272">listening</span>&nbsp;<span class="op" id="6752282">&lt;-</span>&nbsp;<span class="string" id="6752285">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6752295">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6752303">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6752306">defer</span>&nbsp;<span class="ident" id="6752312">l</span><span class="op" id="6752313">.</span><span class="ident" id="6752314">Close</span><span class="op" id="6752319">(</span><span class="op" id="6752320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6752323">listening</span>&nbsp;<span class="op" id="6752333">&lt;-</span>&nbsp;<span class="ident" id="6752336">l</span><span class="op" id="6752337">.</span><span class="ident" id="6752338">Addr</span><span class="op" id="6752342">(</span><span class="op" id="6752343">)</span><span class="op" id="6752344">.</span><span class="ident" id="6752345">String</span><span class="op" id="6752351">(</span><span class="op" id="6752352">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6752356">echo</span>&nbsp;<span class="op" id="6752361">:=</span>&nbsp;<span class="keyword" id="6752364">func</span><span class="op" id="6752368">(</span><span class="ident" id="6752369">rw</span>&nbsp;<span class="ident" id="6752372">io</span><span class="op" id="6752374">.</span><span class="ident" id="6752375">ReadWriter</span><span class="op" id="6752385">,</span>&nbsp;<span class="ident" id="6752387">done</span>&nbsp;<span class="keyword" id="6752392">chan</span><span class="op" id="6752396">&lt;-</span>&nbsp;<span class="builtintype" id="6752399">int</span><span class="op" id="6752402">)</span>&nbsp;<span class="op" id="6752404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6752408">buf</span>&nbsp;<span class="op" id="6752412">:=</span>&nbsp;<span class="builtinfunc" id="6752415">make</span><span class="op" id="6752419">(</span><span class="op" id="6752420">[</span><span class="op" id="6752421">]</span><span class="builtintype" id="6752422">byte</span><span class="op" id="6752426">,</span>&nbsp;<span class="num" id="6752428">1024</span><span class="op" id="6752432">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6752436">for</span>&nbsp;<span class="op" id="6752440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6752445">n</span><span class="op" id="6752446">,</span>&nbsp;<span class="ident" id="6752448">err</span>&nbsp;<span class="op" id="6752452">:=</span>&nbsp;<span class="ident" id="6752455">rw</span><span class="op" id="6752457">.</span><span class="ident" id="6752458">Read</span><span class="op" id="6752462">(</span><span class="ident" id="6752463">buf</span><span class="op" id="6752466">[</span><span class="num" id="6752467">0</span><span class="op" id="6752468">:</span><span class="op" id="6752469">]</span><span class="op" id="6752470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6752475">if</span>&nbsp;<span class="ident" id="6752478">err</span>&nbsp;<span class="op" id="6752482">!=</span>&nbsp;<span class="builtintype" id="6752485">nil</span>&nbsp;<span class="op" id="6752489">||</span>&nbsp;<span class="ident" id="6752492">n</span>&nbsp;<span class="op" id="6752494">==</span>&nbsp;<span class="num" id="6752497">0</span>&nbsp;<span class="op" id="6752499">||</span>&nbsp;<span class="builtintype" id="6752502">string</span><span class="op" id="6752508">(</span><span class="ident" id="6752509">buf</span><span class="op" id="6752512">[</span><span class="op" id="6752513">:</span><span class="ident" id="6752514">n</span><span class="op" id="6752515">]</span><span class="op" id="6752516">)</span>&nbsp;<span class="op" id="6752518">==</span>&nbsp;<span class="string" id="6752521">&#34;END&#34;</span>&nbsp;<span class="op" id="6752527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6752533">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6752542">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6752547">rw</span><span class="op" id="6752549">.</span><span class="ident" id="6752550">Write</span><span class="op" id="6752555">(</span><span class="ident" id="6752556">buf</span><span class="op" id="6752559">[</span><span class="num" id="6752560">0</span><span class="op" id="6752561">:</span><span class="ident" id="6752562">n</span><span class="op" id="6752563">]</span><span class="op" id="6752564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6752568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6752572">close</span><span class="op" id="6752577">(</span><span class="ident" id="6752578">done</span><span class="op" id="6752582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6752585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="ident" id="6752588">run</span><span class="op" id="6752591">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6752594">for</span>&nbsp;<span class="op" id="6752598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6752602">c</span><span class="op" id="6752603">,</span>&nbsp;<span class="ident" id="6752605">err</span>&nbsp;<span class="op" id="6752609">:=</span>&nbsp;<span class="ident" id="6752612">l</span><span class="op" id="6752613">.</span><span class="ident" id="6752614">Accept</span><span class="op" id="6752620">(</span><span class="op" id="6752621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6752625">if</span>&nbsp;<span class="ident" id="6752628">err</span>&nbsp;<span class="op" id="6752632">!=</span>&nbsp;<span class="builtintype" id="6752635">nil</span>&nbsp;<span class="op" id="6752639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6752644">t</span><span class="op" id="6752645">.</span><span class="ident" id="6752646">Logf</span><span class="op" id="6752650">(</span><span class="string" id="6752651">&#34;Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6752670">,</span>&nbsp;<span class="ident" id="6752672">err</span><span class="op" id="6752675">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6752680">continue</span>&nbsp;<span class="ident" id="6752689">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6752695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6752699">echodone</span>&nbsp;<span class="op" id="6752708">:=</span>&nbsp;<span class="builtinfunc" id="6752711">make</span><span class="op" id="6752715">(</span><span class="keyword" id="6752716">chan</span>&nbsp;<span class="builtintype" id="6752721">int</span><span class="op" id="6752724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6752728">go</span>&nbsp;<span class="ident" id="6752731">echo</span><span class="op" id="6752735">(</span><span class="ident" id="6752736">c</span><span class="op" id="6752737">,</span>&nbsp;<span class="ident" id="6752739">echodone</span><span class="op" id="6752747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6752751">&lt;-</span><span class="ident" id="6752753">echodone</span>&nbsp;<span class="comment" id="6752762">//&nbsp;make&nbsp;sure&nbsp;echo&nbsp;stopped</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6752790">c</span><span class="op" id="6752791">.</span><span class="ident" id="6752792">Close</span><span class="op" id="6752797">(</span><span class="op" id="6752798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6752802">break</span>&nbsp;<span class="ident" id="6752808">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6752813">}</span><br>
<span class="lineno"></span><span class="op" id="6752815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="6752818">func</span>&nbsp;<span class="ident" id="6752823">runStreamConnClient</span><span class="op" id="6752842">(</span><span class="ident" id="6752843">t</span>&nbsp;<span class="op" id="6752845">*</span><span class="ident" id="6752846">testing</span><span class="op" id="6752853">.</span><span class="ident" id="6752854">T</span><span class="op" id="6752855">,</span>&nbsp;<span class="ident" id="6752857">net</span><span class="op" id="6752860">,</span>&nbsp;<span class="ident" id="6752862">taddr</span>&nbsp;<span class="builtintype" id="6752868">string</span><span class="op" id="6752874">,</span>&nbsp;<span class="ident" id="6752876">isEmpty</span>&nbsp;<span class="builtintype" id="6752884">bool</span><span class="op" id="6752888">)</span>&nbsp;<span class="op" id="6752890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6752893">c</span><span class="op" id="6752894">,</span>&nbsp;<span class="ident" id="6752896">err</span>&nbsp;<span class="op" id="6752900">:=</span>&nbsp;<span class="ident" id="6752903">Dial</span><span class="op" id="6752907">(</span><span class="ident" id="6752908">net</span><span class="op" id="6752911">,</span>&nbsp;<span class="ident" id="6752913">taddr</span><span class="op" id="6752918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6752921">if</span>&nbsp;<span class="ident" id="6752924">err</span>&nbsp;<span class="op" id="6752928">!=</span>&nbsp;<span class="builtintype" id="6752931">nil</span>&nbsp;<span class="op" id="6752935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6752939">t</span><span class="op" id="6752940">.</span><span class="ident" id="6752941">Fatalf</span><span class="op" id="6752947">(</span><span class="string" id="6752948">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6752973">,</span>&nbsp;<span class="ident" id="6752975">net</span><span class="op" id="6752978">,</span>&nbsp;<span class="ident" id="6752980">taddr</span><span class="op" id="6752985">,</span>&nbsp;<span class="ident" id="6752987">err</span><span class="op" id="6752990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6752993">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6752996">defer</span>&nbsp;<span class="ident" id="6753002">c</span><span class="op" id="6753003">.</span><span class="ident" id="6753004">Close</span><span class="op" id="6753009">(</span><span class="op" id="6753010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6753013">c</span><span class="op" id="6753014">.</span><span class="ident" id="6753015">SetReadDeadline</span><span class="op" id="6753030">(</span><span class="ident" id="6753031">time</span><span class="op" id="6753035">.</span><span class="ident" id="6753036">Now</span><span class="op" id="6753039">(</span><span class="op" id="6753040">)</span><span class="op" id="6753041">.</span><span class="ident" id="6753042">Add</span><span class="op" id="6753045">(</span><span class="num" id="6753046">1</span>&nbsp;<span class="op" id="6753048">*</span>&nbsp;<span class="ident" id="6753050">time</span><span class="op" id="6753054">.</span><span class="ident" id="6753055">Second</span><span class="op" id="6753061">)</span><span class="op" id="6753062">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6753066">var</span>&nbsp;<span class="ident" id="6753070">wb</span>&nbsp;<span class="op" id="6753073">[</span><span class="op" id="6753074">]</span><span class="builtintype" id="6753075">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6753081">if</span>&nbsp;<span class="op" id="6753084">!</span><span class="ident" id="6753085">isEmpty</span>&nbsp;<span class="op" id="6753093">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6753097">wb</span>&nbsp;<span class="op" id="6753100">=</span>&nbsp;<span class="op" id="6753102">[</span><span class="op" id="6753103">]</span><span class="builtintype" id="6753104">byte</span><span class="op" id="6753108">(</span><span class="string" id="6753109">&#34;StreamConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="6753137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6753140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6753143">if</span>&nbsp;<span class="ident" id="6753146">n</span><span class="op" id="6753147">,</span>&nbsp;<span class="ident" id="6753149">err</span>&nbsp;<span class="op" id="6753153">:=</span>&nbsp;<span class="ident" id="6753156">c</span><span class="op" id="6753157">.</span><span class="ident" id="6753158">Write</span><span class="op" id="6753163">(</span><span class="ident" id="6753164">wb</span><span class="op" id="6753166">)</span><span class="op" id="6753167">;</span>&nbsp;<span class="ident" id="6753169">err</span>&nbsp;<span class="op" id="6753173">!=</span>&nbsp;<span class="builtintype" id="6753176">nil</span>&nbsp;<span class="op" id="6753180">||</span>&nbsp;<span class="ident" id="6753183">n</span>&nbsp;<span class="op" id="6753185">!=</span>&nbsp;<span class="builtinfunc" id="6753188">len</span><span class="op" id="6753191">(</span><span class="ident" id="6753192">wb</span><span class="op" id="6753194">)</span>&nbsp;<span class="op" id="6753196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6753200">t</span><span class="op" id="6753201">.</span><span class="ident" id="6753202">Fatalf</span><span class="op" id="6753208">(</span><span class="string" id="6753209">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6753247">,</span>&nbsp;<span class="ident" id="6753249">n</span><span class="op" id="6753250">,</span>&nbsp;<span class="ident" id="6753252">err</span><span class="op" id="6753255">,</span>&nbsp;<span class="builtinfunc" id="6753257">len</span><span class="op" id="6753260">(</span><span class="ident" id="6753261">wb</span><span class="op" id="6753263">)</span><span class="op" id="6753264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6753267">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6753271">rb</span>&nbsp;<span class="op" id="6753274">:=</span>&nbsp;<span class="builtinfunc" id="6753277">make</span><span class="op" id="6753281">(</span><span class="op" id="6753282">[</span><span class="op" id="6753283">]</span><span class="builtintype" id="6753284">byte</span><span class="op" id="6753288">,</span>&nbsp;<span class="num" id="6753290">1024</span><span class="op" id="6753294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6753297">if</span>&nbsp;<span class="ident" id="6753300">n</span><span class="op" id="6753301">,</span>&nbsp;<span class="ident" id="6753303">err</span>&nbsp;<span class="op" id="6753307">:=</span>&nbsp;<span class="ident" id="6753310">c</span><span class="op" id="6753311">.</span><span class="ident" id="6753312">Read</span><span class="op" id="6753316">(</span><span class="ident" id="6753317">rb</span><span class="op" id="6753319">[</span><span class="num" id="6753320">0</span><span class="op" id="6753321">:</span><span class="op" id="6753322">]</span><span class="op" id="6753323">)</span><span class="op" id="6753324">;</span>&nbsp;<span class="ident" id="6753326">err</span>&nbsp;<span class="op" id="6753330">!=</span>&nbsp;<span class="builtintype" id="6753333">nil</span>&nbsp;<span class="op" id="6753337">||</span>&nbsp;<span class="ident" id="6753340">n</span>&nbsp;<span class="op" id="6753342">!=</span>&nbsp;<span class="builtinfunc" id="6753345">len</span><span class="op" id="6753348">(</span><span class="ident" id="6753349">wb</span><span class="op" id="6753351">)</span>&nbsp;<span class="op" id="6753353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6753357">t</span><span class="op" id="6753358">.</span><span class="ident" id="6753359">Fatalf</span><span class="op" id="6753365">(</span><span class="string" id="6753366">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6753403">,</span>&nbsp;<span class="ident" id="6753405">n</span><span class="op" id="6753406">,</span>&nbsp;<span class="ident" id="6753408">err</span><span class="op" id="6753411">,</span>&nbsp;<span class="builtinfunc" id="6753413">len</span><span class="op" id="6753416">(</span><span class="ident" id="6753417">wb</span><span class="op" id="6753419">)</span><span class="op" id="6753420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6753423">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6753427">//&nbsp;Send&nbsp;explicit&nbsp;ending&nbsp;for&nbsp;unixpacket.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6753468">//&nbsp;Older&nbsp;Linux&nbsp;kernels&nbsp;do&nbsp;not&nbsp;stop&nbsp;reads&nbsp;on&nbsp;close.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6753520">switch</span>&nbsp;<span class="ident" id="6753527">net</span>&nbsp;<span class="op" id="6753531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6753534">case</span>&nbsp;<span class="string" id="6753539">&#34;unixpacket&#34;</span><span class="op" id="6753551">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6753555">c</span><span class="op" id="6753556">.</span><span class="ident" id="6753557">Write</span><span class="op" id="6753562">(</span><span class="op" id="6753563">[</span><span class="op" id="6753564">]</span><span class="builtintype" id="6753565">byte</span><span class="op" id="6753569">(</span><span class="string" id="6753570">&#34;END&#34;</span><span class="op" id="6753575">)</span><span class="op" id="6753576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6753579">}</span><br>
<span class="lineno"></span><span class="op" id="6753581">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6753584">//&nbsp;Do&nbsp;not&nbsp;test&nbsp;empty&nbsp;datagrams&nbsp;by&nbsp;default.</span><br>
<span class="lineno">245</span><span class="comment" id="6753627">//&nbsp;It&nbsp;causes&nbsp;unexplained&nbsp;timeouts&nbsp;on&nbsp;some&nbsp;systems,</span><br>
<span class="lineno"></span><span class="comment" id="6753678">//&nbsp;including&nbsp;Snow&nbsp;Leopard.&nbsp;&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;kernel</span><br>
<span class="lineno"></span><span class="comment" id="6753730">//&nbsp;doesn&#39;t&nbsp;quite&nbsp;expect&nbsp;them.</span><br>
<span class="lineno"></span><span class="keyword" id="6753760">var</span>&nbsp;<span class="ident" id="6753764">testDatagram</span>&nbsp;<span class="op" id="6753777">=</span>&nbsp;<span class="ident" id="6753779">flag</span><span class="op" id="6753783">.</span><span class="ident" id="6753784">Bool</span><span class="op" id="6753788">(</span><span class="string" id="6753789">&#34;datagram&#34;</span><span class="op" id="6753799">,</span>&nbsp;<span class="builtintype" id="6753801">false</span><span class="op" id="6753806">,</span>&nbsp;<span class="string" id="6753808">&#34;whether&nbsp;to&nbsp;test&nbsp;udp&nbsp;and&nbsp;unixgram&#34;</span><span class="op" id="6753842">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="6753845">var</span>&nbsp;<span class="ident" id="6753849">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="6753879">=</span>&nbsp;<span class="op" id="6753881">[</span><span class="op" id="6753882">]</span><span class="keyword" id="6753883">struct</span>&nbsp;<span class="op" id="6753890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6753893">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6753903">string</span>&nbsp;<span class="comment" id="6753910">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6753926">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6753936">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6753944">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6753954">string</span>&nbsp;<span class="comment" id="6753961">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6753977">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6753987">string</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6753995">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6754005">bool</span>&nbsp;<span class="comment" id="6754010">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6754051">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6754061">bool</span>&nbsp;<span class="comment" id="6754066">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6754112">dial</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6754122">bool</span>&nbsp;<span class="comment" id="6754127">//&nbsp;test&nbsp;with&nbsp;Dial&nbsp;or&nbsp;DialUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6754158">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6754168">bool</span>&nbsp;<span class="comment" id="6754173">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6754198">linuxOnly</span>&nbsp;<span class="builtintype" id="6754208">bool</span>&nbsp;<span class="comment" id="6754213">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno">260</span><span class="op" id="6754267">}</span><span class="op" id="6754268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6754271">{</span><span class="ident" id="6754272">snet</span><span class="op" id="6754276">:</span>&nbsp;<span class="string" id="6754278">&#34;udp&#34;</span><span class="op" id="6754283">,</span>&nbsp;<span class="ident" id="6754285">saddr</span><span class="op" id="6754290">:</span>&nbsp;<span class="string" id="6754292">&#34;&#34;</span><span class="op" id="6754294">,</span>&nbsp;<span class="ident" id="6754296">cnet</span><span class="op" id="6754300">:</span>&nbsp;<span class="string" id="6754302">&#34;udp&#34;</span><span class="op" id="6754307">,</span>&nbsp;<span class="ident" id="6754309">caddr</span><span class="op" id="6754314">:</span>&nbsp;<span class="string" id="6754316">&#34;127.0.0.1&#34;</span><span class="op" id="6754327">}</span><span class="op" id="6754328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6754331">{</span><span class="ident" id="6754332">snet</span><span class="op" id="6754336">:</span>&nbsp;<span class="string" id="6754338">&#34;udp&#34;</span><span class="op" id="6754343">,</span>&nbsp;<span class="ident" id="6754345">saddr</span><span class="op" id="6754350">:</span>&nbsp;<span class="string" id="6754352">&#34;0.0.0.0&#34;</span><span class="op" id="6754361">,</span>&nbsp;<span class="ident" id="6754363">cnet</span><span class="op" id="6754367">:</span>&nbsp;<span class="string" id="6754369">&#34;udp&#34;</span><span class="op" id="6754374">,</span>&nbsp;<span class="ident" id="6754376">caddr</span><span class="op" id="6754381">:</span>&nbsp;<span class="string" id="6754383">&#34;127.0.0.1&#34;</span><span class="op" id="6754394">}</span><span class="op" id="6754395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6754398">{</span><span class="ident" id="6754399">snet</span><span class="op" id="6754403">:</span>&nbsp;<span class="string" id="6754405">&#34;udp&#34;</span><span class="op" id="6754410">,</span>&nbsp;<span class="ident" id="6754412">saddr</span><span class="op" id="6754417">:</span>&nbsp;<span class="string" id="6754419">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6754437">,</span>&nbsp;<span class="ident" id="6754439">cnet</span><span class="op" id="6754443">:</span>&nbsp;<span class="string" id="6754445">&#34;udp&#34;</span><span class="op" id="6754450">,</span>&nbsp;<span class="ident" id="6754452">caddr</span><span class="op" id="6754457">:</span>&nbsp;<span class="string" id="6754459">&#34;127.0.0.1&#34;</span><span class="op" id="6754470">}</span><span class="op" id="6754471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6754474">{</span><span class="ident" id="6754475">snet</span><span class="op" id="6754479">:</span>&nbsp;<span class="string" id="6754481">&#34;udp&#34;</span><span class="op" id="6754486">,</span>&nbsp;<span class="ident" id="6754488">saddr</span><span class="op" id="6754493">:</span>&nbsp;<span class="string" id="6754495">&#34;[::]&#34;</span><span class="op" id="6754501">,</span>&nbsp;<span class="ident" id="6754503">cnet</span><span class="op" id="6754507">:</span>&nbsp;<span class="string" id="6754509">&#34;udp&#34;</span><span class="op" id="6754514">,</span>&nbsp;<span class="ident" id="6754516">caddr</span><span class="op" id="6754521">:</span>&nbsp;<span class="string" id="6754523">&#34;[::1]&#34;</span><span class="op" id="6754530">,</span>&nbsp;<span class="ident" id="6754532">ipv6</span><span class="op" id="6754536">:</span>&nbsp;<span class="builtintype" id="6754538">true</span><span class="op" id="6754542">}</span><span class="op" id="6754543">,</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6754547">{</span><span class="ident" id="6754548">snet</span><span class="op" id="6754552">:</span>&nbsp;<span class="string" id="6754554">&#34;udp&#34;</span><span class="op" id="6754559">,</span>&nbsp;<span class="ident" id="6754561">saddr</span><span class="op" id="6754566">:</span>&nbsp;<span class="string" id="6754568">&#34;&#34;</span><span class="op" id="6754570">,</span>&nbsp;<span class="ident" id="6754572">cnet</span><span class="op" id="6754576">:</span>&nbsp;<span class="string" id="6754578">&#34;udp&#34;</span><span class="op" id="6754583">,</span>&nbsp;<span class="ident" id="6754585">caddr</span><span class="op" id="6754590">:</span>&nbsp;<span class="string" id="6754592">&#34;[::1]&#34;</span><span class="op" id="6754599">,</span>&nbsp;<span class="ident" id="6754601">ipv4map</span><span class="op" id="6754608">:</span>&nbsp;<span class="builtintype" id="6754610">true</span><span class="op" id="6754614">}</span><span class="op" id="6754615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6754618">{</span><span class="ident" id="6754619">snet</span><span class="op" id="6754623">:</span>&nbsp;<span class="string" id="6754625">&#34;udp&#34;</span><span class="op" id="6754630">,</span>&nbsp;<span class="ident" id="6754632">saddr</span><span class="op" id="6754637">:</span>&nbsp;<span class="string" id="6754639">&#34;0.0.0.0&#34;</span><span class="op" id="6754648">,</span>&nbsp;<span class="ident" id="6754650">cnet</span><span class="op" id="6754654">:</span>&nbsp;<span class="string" id="6754656">&#34;udp&#34;</span><span class="op" id="6754661">,</span>&nbsp;<span class="ident" id="6754663">caddr</span><span class="op" id="6754668">:</span>&nbsp;<span class="string" id="6754670">&#34;[::1]&#34;</span><span class="op" id="6754677">,</span>&nbsp;<span class="ident" id="6754679">ipv4map</span><span class="op" id="6754686">:</span>&nbsp;<span class="builtintype" id="6754688">true</span><span class="op" id="6754692">}</span><span class="op" id="6754693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6754696">{</span><span class="ident" id="6754697">snet</span><span class="op" id="6754701">:</span>&nbsp;<span class="string" id="6754703">&#34;udp&#34;</span><span class="op" id="6754708">,</span>&nbsp;<span class="ident" id="6754710">saddr</span><span class="op" id="6754715">:</span>&nbsp;<span class="string" id="6754717">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6754735">,</span>&nbsp;<span class="ident" id="6754737">cnet</span><span class="op" id="6754741">:</span>&nbsp;<span class="string" id="6754743">&#34;udp&#34;</span><span class="op" id="6754748">,</span>&nbsp;<span class="ident" id="6754750">caddr</span><span class="op" id="6754755">:</span>&nbsp;<span class="string" id="6754757">&#34;[::1]&#34;</span><span class="op" id="6754764">,</span>&nbsp;<span class="ident" id="6754766">ipv4map</span><span class="op" id="6754773">:</span>&nbsp;<span class="builtintype" id="6754775">true</span><span class="op" id="6754779">}</span><span class="op" id="6754780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6754783">{</span><span class="ident" id="6754784">snet</span><span class="op" id="6754788">:</span>&nbsp;<span class="string" id="6754790">&#34;udp&#34;</span><span class="op" id="6754795">,</span>&nbsp;<span class="ident" id="6754797">saddr</span><span class="op" id="6754802">:</span>&nbsp;<span class="string" id="6754804">&#34;[::]&#34;</span><span class="op" id="6754810">,</span>&nbsp;<span class="ident" id="6754812">cnet</span><span class="op" id="6754816">:</span>&nbsp;<span class="string" id="6754818">&#34;udp&#34;</span><span class="op" id="6754823">,</span>&nbsp;<span class="ident" id="6754825">caddr</span><span class="op" id="6754830">:</span>&nbsp;<span class="string" id="6754832">&#34;127.0.0.1&#34;</span><span class="op" id="6754843">,</span>&nbsp;<span class="ident" id="6754845">ipv4map</span><span class="op" id="6754852">:</span>&nbsp;<span class="builtintype" id="6754854">true</span><span class="op" id="6754858">}</span><span class="op" id="6754859">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6754863">{</span><span class="ident" id="6754864">snet</span><span class="op" id="6754868">:</span>&nbsp;<span class="string" id="6754870">&#34;udp&#34;</span><span class="op" id="6754875">,</span>&nbsp;<span class="ident" id="6754877">saddr</span><span class="op" id="6754882">:</span>&nbsp;<span class="string" id="6754884">&#34;&#34;</span><span class="op" id="6754886">,</span>&nbsp;<span class="ident" id="6754888">cnet</span><span class="op" id="6754892">:</span>&nbsp;<span class="string" id="6754894">&#34;udp4&#34;</span><span class="op" id="6754900">,</span>&nbsp;<span class="ident" id="6754902">caddr</span><span class="op" id="6754907">:</span>&nbsp;<span class="string" id="6754909">&#34;127.0.0.1&#34;</span><span class="op" id="6754920">}</span><span class="op" id="6754921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6754924">{</span><span class="ident" id="6754925">snet</span><span class="op" id="6754929">:</span>&nbsp;<span class="string" id="6754931">&#34;udp&#34;</span><span class="op" id="6754936">,</span>&nbsp;<span class="ident" id="6754938">saddr</span><span class="op" id="6754943">:</span>&nbsp;<span class="string" id="6754945">&#34;0.0.0.0&#34;</span><span class="op" id="6754954">,</span>&nbsp;<span class="ident" id="6754956">cnet</span><span class="op" id="6754960">:</span>&nbsp;<span class="string" id="6754962">&#34;udp4&#34;</span><span class="op" id="6754968">,</span>&nbsp;<span class="ident" id="6754970">caddr</span><span class="op" id="6754975">:</span>&nbsp;<span class="string" id="6754977">&#34;127.0.0.1&#34;</span><span class="op" id="6754988">}</span><span class="op" id="6754989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6754992">{</span><span class="ident" id="6754993">snet</span><span class="op" id="6754997">:</span>&nbsp;<span class="string" id="6754999">&#34;udp&#34;</span><span class="op" id="6755004">,</span>&nbsp;<span class="ident" id="6755006">saddr</span><span class="op" id="6755011">:</span>&nbsp;<span class="string" id="6755013">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6755031">,</span>&nbsp;<span class="ident" id="6755033">cnet</span><span class="op" id="6755037">:</span>&nbsp;<span class="string" id="6755039">&#34;udp4&#34;</span><span class="op" id="6755045">,</span>&nbsp;<span class="ident" id="6755047">caddr</span><span class="op" id="6755052">:</span>&nbsp;<span class="string" id="6755054">&#34;127.0.0.1&#34;</span><span class="op" id="6755065">}</span><span class="op" id="6755066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6755069">{</span><span class="ident" id="6755070">snet</span><span class="op" id="6755074">:</span>&nbsp;<span class="string" id="6755076">&#34;udp&#34;</span><span class="op" id="6755081">,</span>&nbsp;<span class="ident" id="6755083">saddr</span><span class="op" id="6755088">:</span>&nbsp;<span class="string" id="6755090">&#34;[::]&#34;</span><span class="op" id="6755096">,</span>&nbsp;<span class="ident" id="6755098">cnet</span><span class="op" id="6755102">:</span>&nbsp;<span class="string" id="6755104">&#34;udp6&#34;</span><span class="op" id="6755110">,</span>&nbsp;<span class="ident" id="6755112">caddr</span><span class="op" id="6755117">:</span>&nbsp;<span class="string" id="6755119">&#34;[::1]&#34;</span><span class="op" id="6755126">,</span>&nbsp;<span class="ident" id="6755128">ipv6</span><span class="op" id="6755132">:</span>&nbsp;<span class="builtintype" id="6755134">true</span><span class="op" id="6755138">}</span><span class="op" id="6755139">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6755143">{</span><span class="ident" id="6755144">snet</span><span class="op" id="6755148">:</span>&nbsp;<span class="string" id="6755150">&#34;udp&#34;</span><span class="op" id="6755155">,</span>&nbsp;<span class="ident" id="6755157">saddr</span><span class="op" id="6755162">:</span>&nbsp;<span class="string" id="6755164">&#34;&#34;</span><span class="op" id="6755166">,</span>&nbsp;<span class="ident" id="6755168">cnet</span><span class="op" id="6755172">:</span>&nbsp;<span class="string" id="6755174">&#34;udp6&#34;</span><span class="op" id="6755180">,</span>&nbsp;<span class="ident" id="6755182">caddr</span><span class="op" id="6755187">:</span>&nbsp;<span class="string" id="6755189">&#34;[::1]&#34;</span><span class="op" id="6755196">,</span>&nbsp;<span class="ident" id="6755198">ipv4map</span><span class="op" id="6755205">:</span>&nbsp;<span class="builtintype" id="6755207">true</span><span class="op" id="6755211">}</span><span class="op" id="6755212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6755215">{</span><span class="ident" id="6755216">snet</span><span class="op" id="6755220">:</span>&nbsp;<span class="string" id="6755222">&#34;udp&#34;</span><span class="op" id="6755227">,</span>&nbsp;<span class="ident" id="6755229">saddr</span><span class="op" id="6755234">:</span>&nbsp;<span class="string" id="6755236">&#34;0.0.0.0&#34;</span><span class="op" id="6755245">,</span>&nbsp;<span class="ident" id="6755247">cnet</span><span class="op" id="6755251">:</span>&nbsp;<span class="string" id="6755253">&#34;udp6&#34;</span><span class="op" id="6755259">,</span>&nbsp;<span class="ident" id="6755261">caddr</span><span class="op" id="6755266">:</span>&nbsp;<span class="string" id="6755268">&#34;[::1]&#34;</span><span class="op" id="6755275">,</span>&nbsp;<span class="ident" id="6755277">ipv4map</span><span class="op" id="6755284">:</span>&nbsp;<span class="builtintype" id="6755286">true</span><span class="op" id="6755290">}</span><span class="op" id="6755291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6755294">{</span><span class="ident" id="6755295">snet</span><span class="op" id="6755299">:</span>&nbsp;<span class="string" id="6755301">&#34;udp&#34;</span><span class="op" id="6755306">,</span>&nbsp;<span class="ident" id="6755308">saddr</span><span class="op" id="6755313">:</span>&nbsp;<span class="string" id="6755315">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6755333">,</span>&nbsp;<span class="ident" id="6755335">cnet</span><span class="op" id="6755339">:</span>&nbsp;<span class="string" id="6755341">&#34;udp6&#34;</span><span class="op" id="6755347">,</span>&nbsp;<span class="ident" id="6755349">caddr</span><span class="op" id="6755354">:</span>&nbsp;<span class="string" id="6755356">&#34;[::1]&#34;</span><span class="op" id="6755363">,</span>&nbsp;<span class="ident" id="6755365">ipv4map</span><span class="op" id="6755372">:</span>&nbsp;<span class="builtintype" id="6755374">true</span><span class="op" id="6755378">}</span><span class="op" id="6755379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6755382">{</span><span class="ident" id="6755383">snet</span><span class="op" id="6755387">:</span>&nbsp;<span class="string" id="6755389">&#34;udp&#34;</span><span class="op" id="6755394">,</span>&nbsp;<span class="ident" id="6755396">saddr</span><span class="op" id="6755401">:</span>&nbsp;<span class="string" id="6755403">&#34;[::]&#34;</span><span class="op" id="6755409">,</span>&nbsp;<span class="ident" id="6755411">cnet</span><span class="op" id="6755415">:</span>&nbsp;<span class="string" id="6755417">&#34;udp4&#34;</span><span class="op" id="6755423">,</span>&nbsp;<span class="ident" id="6755425">caddr</span><span class="op" id="6755430">:</span>&nbsp;<span class="string" id="6755432">&#34;127.0.0.1&#34;</span><span class="op" id="6755443">,</span>&nbsp;<span class="ident" id="6755445">ipv4map</span><span class="op" id="6755452">:</span>&nbsp;<span class="builtintype" id="6755454">true</span><span class="op" id="6755458">}</span><span class="op" id="6755459">,</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6755463">{</span><span class="ident" id="6755464">snet</span><span class="op" id="6755468">:</span>&nbsp;<span class="string" id="6755470">&#34;udp&#34;</span><span class="op" id="6755475">,</span>&nbsp;<span class="ident" id="6755477">saddr</span><span class="op" id="6755482">:</span>&nbsp;<span class="string" id="6755484">&#34;127.0.0.1&#34;</span><span class="op" id="6755495">,</span>&nbsp;<span class="ident" id="6755497">cnet</span><span class="op" id="6755501">:</span>&nbsp;<span class="string" id="6755503">&#34;udp&#34;</span><span class="op" id="6755508">,</span>&nbsp;<span class="ident" id="6755510">caddr</span><span class="op" id="6755515">:</span>&nbsp;<span class="string" id="6755517">&#34;127.0.0.1&#34;</span><span class="op" id="6755528">}</span><span class="op" id="6755529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6755532">{</span><span class="ident" id="6755533">snet</span><span class="op" id="6755537">:</span>&nbsp;<span class="string" id="6755539">&#34;udp&#34;</span><span class="op" id="6755544">,</span>&nbsp;<span class="ident" id="6755546">saddr</span><span class="op" id="6755551">:</span>&nbsp;<span class="string" id="6755553">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6755573">,</span>&nbsp;<span class="ident" id="6755575">cnet</span><span class="op" id="6755579">:</span>&nbsp;<span class="string" id="6755581">&#34;udp&#34;</span><span class="op" id="6755586">,</span>&nbsp;<span class="ident" id="6755588">caddr</span><span class="op" id="6755593">:</span>&nbsp;<span class="string" id="6755595">&#34;127.0.0.1&#34;</span><span class="op" id="6755606">}</span><span class="op" id="6755607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6755610">{</span><span class="ident" id="6755611">snet</span><span class="op" id="6755615">:</span>&nbsp;<span class="string" id="6755617">&#34;udp&#34;</span><span class="op" id="6755622">,</span>&nbsp;<span class="ident" id="6755624">saddr</span><span class="op" id="6755629">:</span>&nbsp;<span class="string" id="6755631">&#34;[::1]&#34;</span><span class="op" id="6755638">,</span>&nbsp;<span class="ident" id="6755640">cnet</span><span class="op" id="6755644">:</span>&nbsp;<span class="string" id="6755646">&#34;udp&#34;</span><span class="op" id="6755651">,</span>&nbsp;<span class="ident" id="6755653">caddr</span><span class="op" id="6755658">:</span>&nbsp;<span class="string" id="6755660">&#34;[::1]&#34;</span><span class="op" id="6755667">,</span>&nbsp;<span class="ident" id="6755669">ipv6</span><span class="op" id="6755673">:</span>&nbsp;<span class="builtintype" id="6755675">true</span><span class="op" id="6755679">}</span><span class="op" id="6755680">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6755684">{</span><span class="ident" id="6755685">snet</span><span class="op" id="6755689">:</span>&nbsp;<span class="string" id="6755691">&#34;udp4&#34;</span><span class="op" id="6755697">,</span>&nbsp;<span class="ident" id="6755699">saddr</span><span class="op" id="6755704">:</span>&nbsp;<span class="string" id="6755706">&#34;&#34;</span><span class="op" id="6755708">,</span>&nbsp;<span class="ident" id="6755710">cnet</span><span class="op" id="6755714">:</span>&nbsp;<span class="string" id="6755716">&#34;udp4&#34;</span><span class="op" id="6755722">,</span>&nbsp;<span class="ident" id="6755724">caddr</span><span class="op" id="6755729">:</span>&nbsp;<span class="string" id="6755731">&#34;127.0.0.1&#34;</span><span class="op" id="6755742">}</span><span class="op" id="6755743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6755746">{</span><span class="ident" id="6755747">snet</span><span class="op" id="6755751">:</span>&nbsp;<span class="string" id="6755753">&#34;udp4&#34;</span><span class="op" id="6755759">,</span>&nbsp;<span class="ident" id="6755761">saddr</span><span class="op" id="6755766">:</span>&nbsp;<span class="string" id="6755768">&#34;0.0.0.0&#34;</span><span class="op" id="6755777">,</span>&nbsp;<span class="ident" id="6755779">cnet</span><span class="op" id="6755783">:</span>&nbsp;<span class="string" id="6755785">&#34;udp4&#34;</span><span class="op" id="6755791">,</span>&nbsp;<span class="ident" id="6755793">caddr</span><span class="op" id="6755798">:</span>&nbsp;<span class="string" id="6755800">&#34;127.0.0.1&#34;</span><span class="op" id="6755811">}</span><span class="op" id="6755812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6755815">{</span><span class="ident" id="6755816">snet</span><span class="op" id="6755820">:</span>&nbsp;<span class="string" id="6755822">&#34;udp4&#34;</span><span class="op" id="6755828">,</span>&nbsp;<span class="ident" id="6755830">saddr</span><span class="op" id="6755835">:</span>&nbsp;<span class="string" id="6755837">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6755855">,</span>&nbsp;<span class="ident" id="6755857">cnet</span><span class="op" id="6755861">:</span>&nbsp;<span class="string" id="6755863">&#34;udp4&#34;</span><span class="op" id="6755869">,</span>&nbsp;<span class="ident" id="6755871">caddr</span><span class="op" id="6755876">:</span>&nbsp;<span class="string" id="6755878">&#34;127.0.0.1&#34;</span><span class="op" id="6755889">}</span><span class="op" id="6755890">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6755894">{</span><span class="ident" id="6755895">snet</span><span class="op" id="6755899">:</span>&nbsp;<span class="string" id="6755901">&#34;udp4&#34;</span><span class="op" id="6755907">,</span>&nbsp;<span class="ident" id="6755909">saddr</span><span class="op" id="6755914">:</span>&nbsp;<span class="string" id="6755916">&#34;127.0.0.1&#34;</span><span class="op" id="6755927">,</span>&nbsp;<span class="ident" id="6755929">cnet</span><span class="op" id="6755933">:</span>&nbsp;<span class="string" id="6755935">&#34;udp4&#34;</span><span class="op" id="6755941">,</span>&nbsp;<span class="ident" id="6755943">caddr</span><span class="op" id="6755948">:</span>&nbsp;<span class="string" id="6755950">&#34;127.0.0.1&#34;</span><span class="op" id="6755961">}</span><span class="op" id="6755962">,</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6755966">{</span><span class="ident" id="6755967">snet</span><span class="op" id="6755971">:</span>&nbsp;<span class="string" id="6755973">&#34;udp6&#34;</span><span class="op" id="6755979">,</span>&nbsp;<span class="ident" id="6755981">saddr</span><span class="op" id="6755986">:</span>&nbsp;<span class="string" id="6755988">&#34;&#34;</span><span class="op" id="6755990">,</span>&nbsp;<span class="ident" id="6755992">cnet</span><span class="op" id="6755996">:</span>&nbsp;<span class="string" id="6755998">&#34;udp6&#34;</span><span class="op" id="6756004">,</span>&nbsp;<span class="ident" id="6756006">caddr</span><span class="op" id="6756011">:</span>&nbsp;<span class="string" id="6756013">&#34;[::1]&#34;</span><span class="op" id="6756020">,</span>&nbsp;<span class="ident" id="6756022">ipv6</span><span class="op" id="6756026">:</span>&nbsp;<span class="builtintype" id="6756028">true</span><span class="op" id="6756032">}</span><span class="op" id="6756033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6756036">{</span><span class="ident" id="6756037">snet</span><span class="op" id="6756041">:</span>&nbsp;<span class="string" id="6756043">&#34;udp6&#34;</span><span class="op" id="6756049">,</span>&nbsp;<span class="ident" id="6756051">saddr</span><span class="op" id="6756056">:</span>&nbsp;<span class="string" id="6756058">&#34;[::]&#34;</span><span class="op" id="6756064">,</span>&nbsp;<span class="ident" id="6756066">cnet</span><span class="op" id="6756070">:</span>&nbsp;<span class="string" id="6756072">&#34;udp6&#34;</span><span class="op" id="6756078">,</span>&nbsp;<span class="ident" id="6756080">caddr</span><span class="op" id="6756085">:</span>&nbsp;<span class="string" id="6756087">&#34;[::1]&#34;</span><span class="op" id="6756094">,</span>&nbsp;<span class="ident" id="6756096">ipv6</span><span class="op" id="6756100">:</span>&nbsp;<span class="builtintype" id="6756102">true</span><span class="op" id="6756106">}</span><span class="op" id="6756107">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6756111">{</span><span class="ident" id="6756112">snet</span><span class="op" id="6756116">:</span>&nbsp;<span class="string" id="6756118">&#34;udp6&#34;</span><span class="op" id="6756124">,</span>&nbsp;<span class="ident" id="6756126">saddr</span><span class="op" id="6756131">:</span>&nbsp;<span class="string" id="6756133">&#34;[::1]&#34;</span><span class="op" id="6756140">,</span>&nbsp;<span class="ident" id="6756142">cnet</span><span class="op" id="6756146">:</span>&nbsp;<span class="string" id="6756148">&#34;udp6&#34;</span><span class="op" id="6756154">,</span>&nbsp;<span class="ident" id="6756156">caddr</span><span class="op" id="6756161">:</span>&nbsp;<span class="string" id="6756163">&#34;[::1]&#34;</span><span class="op" id="6756170">,</span>&nbsp;<span class="ident" id="6756172">ipv6</span><span class="op" id="6756176">:</span>&nbsp;<span class="builtintype" id="6756178">true</span><span class="op" id="6756182">}</span><span class="op" id="6756183">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6756187">{</span><span class="ident" id="6756188">snet</span><span class="op" id="6756192">:</span>&nbsp;<span class="string" id="6756194">&#34;udp&#34;</span><span class="op" id="6756199">,</span>&nbsp;<span class="ident" id="6756201">saddr</span><span class="op" id="6756206">:</span>&nbsp;<span class="string" id="6756208">&#34;127.0.0.1&#34;</span><span class="op" id="6756219">,</span>&nbsp;<span class="ident" id="6756221">cnet</span><span class="op" id="6756225">:</span>&nbsp;<span class="string" id="6756227">&#34;udp&#34;</span><span class="op" id="6756232">,</span>&nbsp;<span class="ident" id="6756234">caddr</span><span class="op" id="6756239">:</span>&nbsp;<span class="string" id="6756241">&#34;127.0.0.1&#34;</span><span class="op" id="6756252">,</span>&nbsp;<span class="ident" id="6756254">dial</span><span class="op" id="6756258">:</span>&nbsp;<span class="builtintype" id="6756260">true</span><span class="op" id="6756264">}</span><span class="op" id="6756265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6756268">{</span><span class="ident" id="6756269">snet</span><span class="op" id="6756273">:</span>&nbsp;<span class="string" id="6756275">&#34;udp&#34;</span><span class="op" id="6756280">,</span>&nbsp;<span class="ident" id="6756282">saddr</span><span class="op" id="6756287">:</span>&nbsp;<span class="string" id="6756289">&#34;127.0.0.1&#34;</span><span class="op" id="6756300">,</span>&nbsp;<span class="ident" id="6756302">cnet</span><span class="op" id="6756306">:</span>&nbsp;<span class="string" id="6756308">&#34;udp&#34;</span><span class="op" id="6756313">,</span>&nbsp;<span class="ident" id="6756315">caddr</span><span class="op" id="6756320">:</span>&nbsp;<span class="string" id="6756322">&#34;127.0.0.1&#34;</span><span class="op" id="6756333">,</span>&nbsp;<span class="ident" id="6756335">empty</span><span class="op" id="6756340">:</span>&nbsp;<span class="builtintype" id="6756342">true</span><span class="op" id="6756346">}</span><span class="op" id="6756347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6756350">{</span><span class="ident" id="6756351">snet</span><span class="op" id="6756355">:</span>&nbsp;<span class="string" id="6756357">&#34;udp&#34;</span><span class="op" id="6756362">,</span>&nbsp;<span class="ident" id="6756364">saddr</span><span class="op" id="6756369">:</span>&nbsp;<span class="string" id="6756371">&#34;127.0.0.1&#34;</span><span class="op" id="6756382">,</span>&nbsp;<span class="ident" id="6756384">cnet</span><span class="op" id="6756388">:</span>&nbsp;<span class="string" id="6756390">&#34;udp&#34;</span><span class="op" id="6756395">,</span>&nbsp;<span class="ident" id="6756397">caddr</span><span class="op" id="6756402">:</span>&nbsp;<span class="string" id="6756404">&#34;127.0.0.1&#34;</span><span class="op" id="6756415">,</span>&nbsp;<span class="ident" id="6756417">dial</span><span class="op" id="6756421">:</span>&nbsp;<span class="builtintype" id="6756423">true</span><span class="op" id="6756427">,</span>&nbsp;<span class="ident" id="6756429">empty</span><span class="op" id="6756434">:</span>&nbsp;<span class="builtintype" id="6756436">true</span><span class="op" id="6756440">}</span><span class="op" id="6756441">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6756445">{</span><span class="ident" id="6756446">snet</span><span class="op" id="6756450">:</span>&nbsp;<span class="string" id="6756452">&#34;udp&#34;</span><span class="op" id="6756457">,</span>&nbsp;<span class="ident" id="6756459">saddr</span><span class="op" id="6756464">:</span>&nbsp;<span class="string" id="6756466">&#34;[::1]&#34;</span><span class="op" id="6756473">,</span>&nbsp;<span class="ident" id="6756475">cnet</span><span class="op" id="6756479">:</span>&nbsp;<span class="string" id="6756481">&#34;udp&#34;</span><span class="op" id="6756486">,</span>&nbsp;<span class="ident" id="6756488">caddr</span><span class="op" id="6756493">:</span>&nbsp;<span class="string" id="6756495">&#34;[::1]&#34;</span><span class="op" id="6756502">,</span>&nbsp;<span class="ident" id="6756504">ipv6</span><span class="op" id="6756508">:</span>&nbsp;<span class="builtintype" id="6756510">true</span><span class="op" id="6756514">,</span>&nbsp;<span class="ident" id="6756516">dial</span><span class="op" id="6756520">:</span>&nbsp;<span class="builtintype" id="6756522">true</span><span class="op" id="6756526">}</span><span class="op" id="6756527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6756530">{</span><span class="ident" id="6756531">snet</span><span class="op" id="6756535">:</span>&nbsp;<span class="string" id="6756537">&#34;udp&#34;</span><span class="op" id="6756542">,</span>&nbsp;<span class="ident" id="6756544">saddr</span><span class="op" id="6756549">:</span>&nbsp;<span class="string" id="6756551">&#34;[::1]&#34;</span><span class="op" id="6756558">,</span>&nbsp;<span class="ident" id="6756560">cnet</span><span class="op" id="6756564">:</span>&nbsp;<span class="string" id="6756566">&#34;udp&#34;</span><span class="op" id="6756571">,</span>&nbsp;<span class="ident" id="6756573">caddr</span><span class="op" id="6756578">:</span>&nbsp;<span class="string" id="6756580">&#34;[::1]&#34;</span><span class="op" id="6756587">,</span>&nbsp;<span class="ident" id="6756589">ipv6</span><span class="op" id="6756593">:</span>&nbsp;<span class="builtintype" id="6756595">true</span><span class="op" id="6756599">,</span>&nbsp;<span class="ident" id="6756601">empty</span><span class="op" id="6756606">:</span>&nbsp;<span class="builtintype" id="6756608">true</span><span class="op" id="6756612">}</span><span class="op" id="6756613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6756616">{</span><span class="ident" id="6756617">snet</span><span class="op" id="6756621">:</span>&nbsp;<span class="string" id="6756623">&#34;udp&#34;</span><span class="op" id="6756628">,</span>&nbsp;<span class="ident" id="6756630">saddr</span><span class="op" id="6756635">:</span>&nbsp;<span class="string" id="6756637">&#34;[::1]&#34;</span><span class="op" id="6756644">,</span>&nbsp;<span class="ident" id="6756646">cnet</span><span class="op" id="6756650">:</span>&nbsp;<span class="string" id="6756652">&#34;udp&#34;</span><span class="op" id="6756657">,</span>&nbsp;<span class="ident" id="6756659">caddr</span><span class="op" id="6756664">:</span>&nbsp;<span class="string" id="6756666">&#34;[::1]&#34;</span><span class="op" id="6756673">,</span>&nbsp;<span class="ident" id="6756675">ipv6</span><span class="op" id="6756679">:</span>&nbsp;<span class="builtintype" id="6756681">true</span><span class="op" id="6756685">,</span>&nbsp;<span class="ident" id="6756687">dial</span><span class="op" id="6756691">:</span>&nbsp;<span class="builtintype" id="6756693">true</span><span class="op" id="6756697">,</span>&nbsp;<span class="ident" id="6756699">empty</span><span class="op" id="6756704">:</span>&nbsp;<span class="builtintype" id="6756706">true</span><span class="op" id="6756710">}</span><span class="op" id="6756711">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6756715">{</span><span class="ident" id="6756716">snet</span><span class="op" id="6756720">:</span>&nbsp;<span class="string" id="6756722">&#34;unixgram&#34;</span><span class="op" id="6756732">,</span>&nbsp;<span class="ident" id="6756734">saddr</span><span class="op" id="6756739">:</span>&nbsp;<span class="ident" id="6756741">testUnixAddr</span><span class="op" id="6756753">(</span><span class="op" id="6756754">)</span><span class="op" id="6756755">,</span>&nbsp;<span class="ident" id="6756757">cnet</span><span class="op" id="6756761">:</span>&nbsp;<span class="string" id="6756763">&#34;unixgram&#34;</span><span class="op" id="6756773">,</span>&nbsp;<span class="ident" id="6756775">caddr</span><span class="op" id="6756780">:</span>&nbsp;<span class="ident" id="6756782">testUnixAddr</span><span class="op" id="6756794">(</span><span class="op" id="6756795">)</span><span class="op" id="6756796">}</span><span class="op" id="6756797">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6756800">{</span><span class="ident" id="6756801">snet</span><span class="op" id="6756805">:</span>&nbsp;<span class="string" id="6756807">&#34;unixgram&#34;</span><span class="op" id="6756817">,</span>&nbsp;<span class="ident" id="6756819">saddr</span><span class="op" id="6756824">:</span>&nbsp;<span class="ident" id="6756826">testUnixAddr</span><span class="op" id="6756838">(</span><span class="op" id="6756839">)</span><span class="op" id="6756840">,</span>&nbsp;<span class="ident" id="6756842">cnet</span><span class="op" id="6756846">:</span>&nbsp;<span class="string" id="6756848">&#34;unixgram&#34;</span><span class="op" id="6756858">,</span>&nbsp;<span class="ident" id="6756860">caddr</span><span class="op" id="6756865">:</span>&nbsp;<span class="ident" id="6756867">testUnixAddr</span><span class="op" id="6756879">(</span><span class="op" id="6756880">)</span><span class="op" id="6756881">,</span>&nbsp;<span class="ident" id="6756883">dial</span><span class="op" id="6756887">:</span>&nbsp;<span class="builtintype" id="6756889">true</span><span class="op" id="6756893">}</span><span class="op" id="6756894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6756897">{</span><span class="ident" id="6756898">snet</span><span class="op" id="6756902">:</span>&nbsp;<span class="string" id="6756904">&#34;unixgram&#34;</span><span class="op" id="6756914">,</span>&nbsp;<span class="ident" id="6756916">saddr</span><span class="op" id="6756921">:</span>&nbsp;<span class="ident" id="6756923">testUnixAddr</span><span class="op" id="6756935">(</span><span class="op" id="6756936">)</span><span class="op" id="6756937">,</span>&nbsp;<span class="ident" id="6756939">cnet</span><span class="op" id="6756943">:</span>&nbsp;<span class="string" id="6756945">&#34;unixgram&#34;</span><span class="op" id="6756955">,</span>&nbsp;<span class="ident" id="6756957">caddr</span><span class="op" id="6756962">:</span>&nbsp;<span class="ident" id="6756964">testUnixAddr</span><span class="op" id="6756976">(</span><span class="op" id="6756977">)</span><span class="op" id="6756978">,</span>&nbsp;<span class="ident" id="6756980">empty</span><span class="op" id="6756985">:</span>&nbsp;<span class="builtintype" id="6756987">true</span><span class="op" id="6756991">}</span><span class="op" id="6756992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6756995">{</span><span class="ident" id="6756996">snet</span><span class="op" id="6757000">:</span>&nbsp;<span class="string" id="6757002">&#34;unixgram&#34;</span><span class="op" id="6757012">,</span>&nbsp;<span class="ident" id="6757014">saddr</span><span class="op" id="6757019">:</span>&nbsp;<span class="ident" id="6757021">testUnixAddr</span><span class="op" id="6757033">(</span><span class="op" id="6757034">)</span><span class="op" id="6757035">,</span>&nbsp;<span class="ident" id="6757037">cnet</span><span class="op" id="6757041">:</span>&nbsp;<span class="string" id="6757043">&#34;unixgram&#34;</span><span class="op" id="6757053">,</span>&nbsp;<span class="ident" id="6757055">caddr</span><span class="op" id="6757060">:</span>&nbsp;<span class="ident" id="6757062">testUnixAddr</span><span class="op" id="6757074">(</span><span class="op" id="6757075">)</span><span class="op" id="6757076">,</span>&nbsp;<span class="ident" id="6757078">dial</span><span class="op" id="6757082">:</span>&nbsp;<span class="builtintype" id="6757084">true</span><span class="op" id="6757088">,</span>&nbsp;<span class="ident" id="6757090">empty</span><span class="op" id="6757095">:</span>&nbsp;<span class="builtintype" id="6757097">true</span><span class="op" id="6757101">}</span><span class="op" id="6757102">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6757106">{</span><span class="ident" id="6757107">snet</span><span class="op" id="6757111">:</span>&nbsp;<span class="string" id="6757113">&#34;unixgram&#34;</span><span class="op" id="6757123">,</span>&nbsp;<span class="ident" id="6757125">saddr</span><span class="op" id="6757130">:</span>&nbsp;<span class="string" id="6757132">&#34;@gotest6/net&#34;</span><span class="op" id="6757146">,</span>&nbsp;<span class="ident" id="6757148">cnet</span><span class="op" id="6757152">:</span>&nbsp;<span class="string" id="6757154">&#34;unixgram&#34;</span><span class="op" id="6757164">,</span>&nbsp;<span class="ident" id="6757166">caddr</span><span class="op" id="6757171">:</span>&nbsp;<span class="string" id="6757173">&#34;@gotest6/net.local&#34;</span><span class="op" id="6757193">,</span>&nbsp;<span class="ident" id="6757195">linuxOnly</span><span class="op" id="6757204">:</span>&nbsp;<span class="builtintype" id="6757206">true</span><span class="op" id="6757210">}</span><span class="op" id="6757211">,</span><br>
<span class="lineno">310</span><span class="op" id="6757213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6757216">func</span>&nbsp;<span class="ident" id="6757221">TestDatagramPacketConnServer</span><span class="op" id="6757249">(</span><span class="ident" id="6757250">t</span>&nbsp;<span class="op" id="6757252">*</span><span class="ident" id="6757253">testing</span><span class="op" id="6757260">.</span><span class="ident" id="6757261">T</span><span class="op" id="6757262">)</span>&nbsp;<span class="op" id="6757264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6757267">if</span>&nbsp;<span class="op" id="6757270">!</span><span class="op" id="6757271">*</span><span class="ident" id="6757272">testDatagram</span>&nbsp;<span class="op" id="6757285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6757289">return</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6757297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6757301">for</span>&nbsp;<span class="ident" id="6757305">_</span><span class="op" id="6757306">,</span>&nbsp;<span class="ident" id="6757308">tt</span>&nbsp;<span class="op" id="6757311">:=</span>&nbsp;<span class="keyword" id="6757314">range</span>&nbsp;<span class="ident" id="6757320">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="6757350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6757354">if</span>&nbsp;<span class="ident" id="6757357">skipServerTest</span><span class="op" id="6757371">(</span><span class="ident" id="6757372">tt</span><span class="op" id="6757374">.</span><span class="ident" id="6757375">snet</span><span class="op" id="6757379">,</span>&nbsp;<span class="string" id="6757381">&#34;unixgram&#34;</span><span class="op" id="6757391">,</span>&nbsp;<span class="ident" id="6757393">tt</span><span class="op" id="6757395">.</span><span class="ident" id="6757396">saddr</span><span class="op" id="6757401">,</span>&nbsp;<span class="ident" id="6757403">tt</span><span class="op" id="6757405">.</span><span class="ident" id="6757406">ipv6</span><span class="op" id="6757410">,</span>&nbsp;<span class="ident" id="6757412">tt</span><span class="op" id="6757414">.</span><span class="ident" id="6757415">ipv4map</span><span class="op" id="6757422">,</span>&nbsp;<span class="ident" id="6757424">tt</span><span class="op" id="6757426">.</span><span class="ident" id="6757427">linuxOnly</span><span class="op" id="6757436">)</span>&nbsp;<span class="op" id="6757438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6757443">continue</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6757454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6757459">listening</span>&nbsp;<span class="op" id="6757469">:=</span>&nbsp;<span class="builtinfunc" id="6757472">make</span><span class="op" id="6757476">(</span><span class="keyword" id="6757477">chan</span>&nbsp;<span class="builtintype" id="6757482">string</span><span class="op" id="6757488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6757492">done</span>&nbsp;<span class="op" id="6757497">:=</span>&nbsp;<span class="builtinfunc" id="6757500">make</span><span class="op" id="6757504">(</span><span class="keyword" id="6757505">chan</span>&nbsp;<span class="builtintype" id="6757510">int</span><span class="op" id="6757513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6757517">switch</span>&nbsp;<span class="ident" id="6757524">tt</span><span class="op" id="6757526">.</span><span class="ident" id="6757527">snet</span>&nbsp;<span class="op" id="6757532">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6757536">case</span>&nbsp;<span class="string" id="6757541">&#34;udp&#34;</span><span class="op" id="6757546">,</span>&nbsp;<span class="string" id="6757548">&#34;udp4&#34;</span><span class="op" id="6757554">,</span>&nbsp;<span class="string" id="6757556">&#34;udp6&#34;</span><span class="op" id="6757562">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6757567">tt</span><span class="op" id="6757569">.</span><span class="ident" id="6757570">saddr</span>&nbsp;<span class="op" id="6757576">+=</span>&nbsp;<span class="string" id="6757579">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6757586">case</span>&nbsp;<span class="string" id="6757591">&#34;unixgram&#34;</span><span class="op" id="6757601">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6757606">os</span><span class="op" id="6757608">.</span><span class="ident" id="6757609">Remove</span><span class="op" id="6757615">(</span><span class="ident" id="6757616">tt</span><span class="op" id="6757618">.</span><span class="ident" id="6757619">saddr</span><span class="op" id="6757624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6757629">os</span><span class="op" id="6757631">.</span><span class="ident" id="6757632">Remove</span><span class="op" id="6757638">(</span><span class="ident" id="6757639">tt</span><span class="op" id="6757641">.</span><span class="ident" id="6757642">caddr</span><span class="op" id="6757647">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6757651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6757656">go</span>&nbsp;<span class="ident" id="6757659">runDatagramPacketConnServer</span><span class="op" id="6757686">(</span><span class="ident" id="6757687">t</span><span class="op" id="6757688">,</span>&nbsp;<span class="ident" id="6757690">tt</span><span class="op" id="6757692">.</span><span class="ident" id="6757693">snet</span><span class="op" id="6757697">,</span>&nbsp;<span class="ident" id="6757699">tt</span><span class="op" id="6757701">.</span><span class="ident" id="6757702">saddr</span><span class="op" id="6757707">,</span>&nbsp;<span class="ident" id="6757709">listening</span><span class="op" id="6757718">,</span>&nbsp;<span class="ident" id="6757720">done</span><span class="op" id="6757724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6757728">taddr</span>&nbsp;<span class="op" id="6757734">:=</span>&nbsp;<span class="op" id="6757737">&lt;-</span><span class="ident" id="6757739">listening</span>&nbsp;<span class="comment" id="6757749">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6757780">switch</span>&nbsp;<span class="ident" id="6757787">tt</span><span class="op" id="6757789">.</span><span class="ident" id="6757790">cnet</span>&nbsp;<span class="op" id="6757795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6757799">case</span>&nbsp;<span class="string" id="6757804">&#34;udp&#34;</span><span class="op" id="6757809">,</span>&nbsp;<span class="string" id="6757811">&#34;udp4&#34;</span><span class="op" id="6757817">,</span>&nbsp;<span class="string" id="6757819">&#34;udp6&#34;</span><span class="op" id="6757825">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6757830">_</span><span class="op" id="6757831">,</span>&nbsp;<span class="ident" id="6757833">port</span><span class="op" id="6757837">,</span>&nbsp;<span class="ident" id="6757839">err</span>&nbsp;<span class="op" id="6757843">:=</span>&nbsp;<span class="ident" id="6757846">SplitHostPort</span><span class="op" id="6757859">(</span><span class="ident" id="6757860">taddr</span><span class="op" id="6757865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6757870">if</span>&nbsp;<span class="ident" id="6757873">err</span>&nbsp;<span class="op" id="6757877">!=</span>&nbsp;<span class="builtintype" id="6757880">nil</span>&nbsp;<span class="op" id="6757884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6757890">t</span><span class="op" id="6757891">.</span><span class="ident" id="6757892">Fatalf</span><span class="op" id="6757898">(</span><span class="string" id="6757899">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6757929">,</span>&nbsp;<span class="ident" id="6757931">taddr</span><span class="op" id="6757936">,</span>&nbsp;<span class="ident" id="6757938">err</span><span class="op" id="6757941">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6757946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6757951">taddr</span>&nbsp;<span class="op" id="6757957">=</span>&nbsp;<span class="ident" id="6757959">tt</span><span class="op" id="6757961">.</span><span class="ident" id="6757962">caddr</span>&nbsp;<span class="op" id="6757968">+</span>&nbsp;<span class="string" id="6757970">&#34;:&#34;</span>&nbsp;<span class="op" id="6757974">+</span>&nbsp;<span class="ident" id="6757976">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6757984">tt</span><span class="op" id="6757986">.</span><span class="ident" id="6757987">caddr</span>&nbsp;<span class="op" id="6757993">+=</span>&nbsp;<span class="string" id="6757996">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6758003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6758007">if</span>&nbsp;<span class="ident" id="6758010">tt</span><span class="op" id="6758012">.</span><span class="ident" id="6758013">dial</span>&nbsp;<span class="op" id="6758018">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6758023">runDatagramConnClient</span><span class="op" id="6758044">(</span><span class="ident" id="6758045">t</span><span class="op" id="6758046">,</span>&nbsp;<span class="ident" id="6758048">tt</span><span class="op" id="6758050">.</span><span class="ident" id="6758051">cnet</span><span class="op" id="6758055">,</span>&nbsp;<span class="ident" id="6758057">tt</span><span class="op" id="6758059">.</span><span class="ident" id="6758060">caddr</span><span class="op" id="6758065">,</span>&nbsp;<span class="ident" id="6758067">taddr</span><span class="op" id="6758072">,</span>&nbsp;<span class="ident" id="6758074">tt</span><span class="op" id="6758076">.</span><span class="ident" id="6758077">empty</span><span class="op" id="6758082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6758086">}</span>&nbsp;<span class="keyword" id="6758088">else</span>&nbsp;<span class="op" id="6758093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6758098">runDatagramPacketConnClient</span><span class="op" id="6758125">(</span><span class="ident" id="6758126">t</span><span class="op" id="6758127">,</span>&nbsp;<span class="ident" id="6758129">tt</span><span class="op" id="6758131">.</span><span class="ident" id="6758132">cnet</span><span class="op" id="6758136">,</span>&nbsp;<span class="ident" id="6758138">tt</span><span class="op" id="6758140">.</span><span class="ident" id="6758141">caddr</span><span class="op" id="6758146">,</span>&nbsp;<span class="ident" id="6758148">taddr</span><span class="op" id="6758153">,</span>&nbsp;<span class="ident" id="6758155">tt</span><span class="op" id="6758157">.</span><span class="ident" id="6758158">empty</span><span class="op" id="6758163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6758167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6758171">&lt;-</span><span class="ident" id="6758173">done</span>&nbsp;<span class="comment" id="6758178">//&nbsp;tell&nbsp;server&nbsp;to&nbsp;stop</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6758203">&lt;-</span><span class="ident" id="6758205">done</span>&nbsp;<span class="comment" id="6758210">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6758241">switch</span>&nbsp;<span class="ident" id="6758248">tt</span><span class="op" id="6758250">.</span><span class="ident" id="6758251">snet</span>&nbsp;<span class="op" id="6758256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6758260">case</span>&nbsp;<span class="string" id="6758265">&#34;unixgram&#34;</span><span class="op" id="6758275">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6758280">os</span><span class="op" id="6758282">.</span><span class="ident" id="6758283">Remove</span><span class="op" id="6758289">(</span><span class="ident" id="6758290">tt</span><span class="op" id="6758292">.</span><span class="ident" id="6758293">saddr</span><span class="op" id="6758298">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6758303">os</span><span class="op" id="6758305">.</span><span class="ident" id="6758306">Remove</span><span class="op" id="6758312">(</span><span class="ident" id="6758313">tt</span><span class="op" id="6758315">.</span><span class="ident" id="6758316">caddr</span><span class="op" id="6758321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6758325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6758328">}</span><br>
<span class="lineno"></span><span class="op" id="6758330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="keyword" id="6758333">func</span>&nbsp;<span class="ident" id="6758338">runDatagramPacketConnServer</span><span class="op" id="6758365">(</span><span class="ident" id="6758366">t</span>&nbsp;<span class="op" id="6758368">*</span><span class="ident" id="6758369">testing</span><span class="op" id="6758376">.</span><span class="ident" id="6758377">T</span><span class="op" id="6758378">,</span>&nbsp;<span class="ident" id="6758380">net</span><span class="op" id="6758383">,</span>&nbsp;<span class="ident" id="6758385">laddr</span>&nbsp;<span class="builtintype" id="6758391">string</span><span class="op" id="6758397">,</span>&nbsp;<span class="ident" id="6758399">listening</span>&nbsp;<span class="keyword" id="6758409">chan</span><span class="op" id="6758413">&lt;-</span>&nbsp;<span class="builtintype" id="6758416">string</span><span class="op" id="6758422">,</span>&nbsp;<span class="ident" id="6758424">done</span>&nbsp;<span class="keyword" id="6758429">chan</span><span class="op" id="6758433">&lt;-</span>&nbsp;<span class="builtintype" id="6758436">int</span><span class="op" id="6758439">)</span>&nbsp;<span class="op" id="6758441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6758444">c</span><span class="op" id="6758445">,</span>&nbsp;<span class="ident" id="6758447">err</span>&nbsp;<span class="op" id="6758451">:=</span>&nbsp;<span class="ident" id="6758454">ListenPacket</span><span class="op" id="6758466">(</span><span class="ident" id="6758467">net</span><span class="op" id="6758470">,</span>&nbsp;<span class="ident" id="6758472">laddr</span><span class="op" id="6758477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6758480">if</span>&nbsp;<span class="ident" id="6758483">err</span>&nbsp;<span class="op" id="6758487">!=</span>&nbsp;<span class="builtintype" id="6758490">nil</span>&nbsp;<span class="op" id="6758494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6758498">t</span><span class="op" id="6758499">.</span><span class="ident" id="6758500">Errorf</span><span class="op" id="6758506">(</span><span class="string" id="6758507">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6758540">,</span>&nbsp;<span class="ident" id="6758542">net</span><span class="op" id="6758545">,</span>&nbsp;<span class="ident" id="6758547">laddr</span><span class="op" id="6758552">,</span>&nbsp;<span class="ident" id="6758554">err</span><span class="op" id="6758557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6758561">listening</span>&nbsp;<span class="op" id="6758571">&lt;-</span>&nbsp;<span class="string" id="6758574">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6758584">done</span>&nbsp;<span class="op" id="6758589">&lt;-</span>&nbsp;<span class="num" id="6758592">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6758596">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6758604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6758607">defer</span>&nbsp;<span class="ident" id="6758613">c</span><span class="op" id="6758614">.</span><span class="ident" id="6758615">Close</span><span class="op" id="6758620">(</span><span class="op" id="6758621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6758624">listening</span>&nbsp;<span class="op" id="6758634">&lt;-</span>&nbsp;<span class="ident" id="6758637">c</span><span class="op" id="6758638">.</span><span class="ident" id="6758639">LocalAddr</span><span class="op" id="6758648">(</span><span class="op" id="6758649">)</span><span class="op" id="6758650">.</span><span class="ident" id="6758651">String</span><span class="op" id="6758657">(</span><span class="op" id="6758658">)</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6758662">buf</span>&nbsp;<span class="op" id="6758666">:=</span>&nbsp;<span class="builtinfunc" id="6758669">make</span><span class="op" id="6758673">(</span><span class="op" id="6758674">[</span><span class="op" id="6758675">]</span><span class="builtintype" id="6758676">byte</span><span class="op" id="6758680">,</span>&nbsp;<span class="num" id="6758682">1024</span><span class="op" id="6758686">)</span><br>
<span class="lineno"></span><span class="ident" id="6758688">run</span><span class="op" id="6758691">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6758694">for</span>&nbsp;<span class="op" id="6758698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6758702">c</span><span class="op" id="6758703">.</span><span class="ident" id="6758704">SetReadDeadline</span><span class="op" id="6758719">(</span><span class="ident" id="6758720">time</span><span class="op" id="6758724">.</span><span class="ident" id="6758725">Now</span><span class="op" id="6758728">(</span><span class="op" id="6758729">)</span><span class="op" id="6758730">.</span><span class="ident" id="6758731">Add</span><span class="op" id="6758734">(</span><span class="num" id="6758735">10</span>&nbsp;<span class="op" id="6758738">*</span>&nbsp;<span class="ident" id="6758740">time</span><span class="op" id="6758744">.</span><span class="ident" id="6758745">Millisecond</span><span class="op" id="6758756">)</span><span class="op" id="6758757">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6758761">n</span><span class="op" id="6758762">,</span>&nbsp;<span class="ident" id="6758764">ra</span><span class="op" id="6758766">,</span>&nbsp;<span class="ident" id="6758768">err</span>&nbsp;<span class="op" id="6758772">:=</span>&nbsp;<span class="ident" id="6758775">c</span><span class="op" id="6758776">.</span><span class="ident" id="6758777">ReadFrom</span><span class="op" id="6758785">(</span><span class="ident" id="6758786">buf</span><span class="op" id="6758789">[</span><span class="num" id="6758790">0</span><span class="op" id="6758791">:</span><span class="op" id="6758792">]</span><span class="op" id="6758793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6758797">if</span>&nbsp;<span class="ident" id="6758800">nerr</span><span class="op" id="6758804">,</span>&nbsp;<span class="ident" id="6758806">ok</span>&nbsp;<span class="op" id="6758809">:=</span>&nbsp;<span class="ident" id="6758812">err</span><span class="op" id="6758815">.</span><span class="op" id="6758816">(</span><span class="ident" id="6758817">Error</span><span class="op" id="6758822">)</span><span class="op" id="6758823">;</span>&nbsp;<span class="ident" id="6758825">ok</span>&nbsp;<span class="op" id="6758828">&amp;&amp;</span>&nbsp;<span class="ident" id="6758831">nerr</span><span class="op" id="6758835">.</span><span class="ident" id="6758836">Timeout</span><span class="op" id="6758843">(</span><span class="op" id="6758844">)</span>&nbsp;<span class="op" id="6758846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6758851">select</span>&nbsp;<span class="op" id="6758858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6758863">case</span>&nbsp;<span class="ident" id="6758868">done</span>&nbsp;<span class="op" id="6758873">&lt;-</span>&nbsp;<span class="num" id="6758876">1</span><span class="op" id="6758877">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6758883">break</span>&nbsp;<span class="ident" id="6758889">run</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6758896">default</span><span class="op" id="6758903">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6758909">continue</span>&nbsp;<span class="ident" id="6758918">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6758925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6758929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6758933">if</span>&nbsp;<span class="ident" id="6758936">err</span>&nbsp;<span class="op" id="6758940">!=</span>&nbsp;<span class="builtintype" id="6758943">nil</span>&nbsp;<span class="op" id="6758947">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6758952">break</span>&nbsp;<span class="ident" id="6758958">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6758964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6758968">if</span>&nbsp;<span class="ident" id="6758971">_</span><span class="op" id="6758972">,</span>&nbsp;<span class="ident" id="6758974">err</span>&nbsp;<span class="op" id="6758978">=</span>&nbsp;<span class="ident" id="6758980">c</span><span class="op" id="6758981">.</span><span class="ident" id="6758982">WriteTo</span><span class="op" id="6758989">(</span><span class="ident" id="6758990">buf</span><span class="op" id="6758993">[</span><span class="num" id="6758994">0</span><span class="op" id="6758995">:</span><span class="ident" id="6758996">n</span><span class="op" id="6758997">]</span><span class="op" id="6758998">,</span>&nbsp;<span class="ident" id="6759000">ra</span><span class="op" id="6759002">)</span><span class="op" id="6759003">;</span>&nbsp;<span class="ident" id="6759005">err</span>&nbsp;<span class="op" id="6759009">!=</span>&nbsp;<span class="builtintype" id="6759012">nil</span>&nbsp;<span class="op" id="6759016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6759021">t</span><span class="op" id="6759022">.</span><span class="ident" id="6759023">Errorf</span><span class="op" id="6759029">(</span><span class="string" id="6759030">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6759054">,</span>&nbsp;<span class="ident" id="6759056">ra</span><span class="op" id="6759058">,</span>&nbsp;<span class="ident" id="6759060">err</span><span class="op" id="6759063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6759068">break</span>&nbsp;<span class="ident" id="6759074">run</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6759080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6759083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6759086">done</span>&nbsp;<span class="op" id="6759091">&lt;-</span>&nbsp;<span class="num" id="6759094">1</span><br>
<span class="lineno"></span><span class="op" id="6759096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span><span class="keyword" id="6759099">func</span>&nbsp;<span class="ident" id="6759104">runDatagramConnClient</span><span class="op" id="6759125">(</span><span class="ident" id="6759126">t</span>&nbsp;<span class="op" id="6759128">*</span><span class="ident" id="6759129">testing</span><span class="op" id="6759136">.</span><span class="ident" id="6759137">T</span><span class="op" id="6759138">,</span>&nbsp;<span class="ident" id="6759140">net</span><span class="op" id="6759143">,</span>&nbsp;<span class="ident" id="6759145">laddr</span><span class="op" id="6759150">,</span>&nbsp;<span class="ident" id="6759152">taddr</span>&nbsp;<span class="builtintype" id="6759158">string</span><span class="op" id="6759164">,</span>&nbsp;<span class="ident" id="6759166">isEmpty</span>&nbsp;<span class="builtintype" id="6759174">bool</span><span class="op" id="6759178">)</span>&nbsp;<span class="op" id="6759180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6759183">var</span>&nbsp;<span class="ident" id="6759187">c</span>&nbsp;<span class="ident" id="6759189">Conn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6759195">var</span>&nbsp;<span class="ident" id="6759199">err</span>&nbsp;<span class="builtintype" id="6759203">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6759210">switch</span>&nbsp;<span class="ident" id="6759217">net</span>&nbsp;<span class="op" id="6759221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6759224">case</span>&nbsp;<span class="string" id="6759229">&#34;udp&#34;</span><span class="op" id="6759234">,</span>&nbsp;<span class="string" id="6759236">&#34;udp4&#34;</span><span class="op" id="6759242">,</span>&nbsp;<span class="string" id="6759244">&#34;udp6&#34;</span><span class="op" id="6759250">:</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6759254">c</span><span class="op" id="6759255">,</span>&nbsp;<span class="ident" id="6759257">err</span>&nbsp;<span class="op" id="6759261">=</span>&nbsp;<span class="ident" id="6759263">Dial</span><span class="op" id="6759267">(</span><span class="ident" id="6759268">net</span><span class="op" id="6759271">,</span>&nbsp;<span class="ident" id="6759273">taddr</span><span class="op" id="6759278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6759282">if</span>&nbsp;<span class="ident" id="6759285">err</span>&nbsp;<span class="op" id="6759289">!=</span>&nbsp;<span class="builtintype" id="6759292">nil</span>&nbsp;<span class="op" id="6759296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6759301">t</span><span class="op" id="6759302">.</span><span class="ident" id="6759303">Fatalf</span><span class="op" id="6759309">(</span><span class="string" id="6759310">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6759335">,</span>&nbsp;<span class="ident" id="6759337">net</span><span class="op" id="6759340">,</span>&nbsp;<span class="ident" id="6759342">taddr</span><span class="op" id="6759347">,</span>&nbsp;<span class="ident" id="6759349">err</span><span class="op" id="6759352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6759356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6759359">case</span>&nbsp;<span class="string" id="6759364">&#34;unixgram&#34;</span><span class="op" id="6759374">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6759378">c</span><span class="op" id="6759379">,</span>&nbsp;<span class="ident" id="6759381">err</span>&nbsp;<span class="op" id="6759385">=</span>&nbsp;<span class="ident" id="6759387">DialUnix</span><span class="op" id="6759395">(</span><span class="ident" id="6759396">net</span><span class="op" id="6759399">,</span>&nbsp;<span class="op" id="6759401">&amp;</span><span class="ident" id="6759402">UnixAddr</span><span class="op" id="6759410">{</span><span class="ident" id="6759411">Name</span><span class="op" id="6759415">:</span>&nbsp;<span class="ident" id="6759417">laddr</span><span class="op" id="6759422">,</span>&nbsp;<span class="ident" id="6759424">Net</span><span class="op" id="6759427">:</span>&nbsp;<span class="ident" id="6759429">net</span><span class="op" id="6759432">}</span><span class="op" id="6759433">,</span>&nbsp;<span class="op" id="6759435">&amp;</span><span class="ident" id="6759436">UnixAddr</span><span class="op" id="6759444">{</span><span class="ident" id="6759445">Name</span><span class="op" id="6759449">:</span>&nbsp;<span class="ident" id="6759451">taddr</span><span class="op" id="6759456">,</span>&nbsp;<span class="ident" id="6759458">Net</span><span class="op" id="6759461">:</span>&nbsp;<span class="ident" id="6759463">net</span><span class="op" id="6759466">}</span><span class="op" id="6759467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6759471">if</span>&nbsp;<span class="ident" id="6759474">err</span>&nbsp;<span class="op" id="6759478">!=</span>&nbsp;<span class="builtintype" id="6759481">nil</span>&nbsp;<span class="op" id="6759485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6759490">t</span><span class="op" id="6759491">.</span><span class="ident" id="6759492">Fatalf</span><span class="op" id="6759498">(</span><span class="string" id="6759499">&#34;DialUnix(%q,&nbsp;{%q,&nbsp;%q})&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6759534">,</span>&nbsp;<span class="ident" id="6759536">net</span><span class="op" id="6759539">,</span>&nbsp;<span class="ident" id="6759541">laddr</span><span class="op" id="6759546">,</span>&nbsp;<span class="ident" id="6759548">taddr</span><span class="op" id="6759553">,</span>&nbsp;<span class="ident" id="6759555">err</span><span class="op" id="6759558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6759562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6759565">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6759568">defer</span>&nbsp;<span class="ident" id="6759574">c</span><span class="op" id="6759575">.</span><span class="ident" id="6759576">Close</span><span class="op" id="6759581">(</span><span class="op" id="6759582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6759585">c</span><span class="op" id="6759586">.</span><span class="ident" id="6759587">SetReadDeadline</span><span class="op" id="6759602">(</span><span class="ident" id="6759603">time</span><span class="op" id="6759607">.</span><span class="ident" id="6759608">Now</span><span class="op" id="6759611">(</span><span class="op" id="6759612">)</span><span class="op" id="6759613">.</span><span class="ident" id="6759614">Add</span><span class="op" id="6759617">(</span><span class="num" id="6759618">1</span>&nbsp;<span class="op" id="6759620">*</span>&nbsp;<span class="ident" id="6759622">time</span><span class="op" id="6759626">.</span><span class="ident" id="6759627">Second</span><span class="op" id="6759633">)</span><span class="op" id="6759634">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6759638">var</span>&nbsp;<span class="ident" id="6759642">wb</span>&nbsp;<span class="op" id="6759645">[</span><span class="op" id="6759646">]</span><span class="builtintype" id="6759647">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6759653">if</span>&nbsp;<span class="op" id="6759656">!</span><span class="ident" id="6759657">isEmpty</span>&nbsp;<span class="op" id="6759665">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6759669">wb</span>&nbsp;<span class="op" id="6759672">=</span>&nbsp;<span class="op" id="6759674">[</span><span class="op" id="6759675">]</span><span class="builtintype" id="6759676">byte</span><span class="op" id="6759680">(</span><span class="string" id="6759681">&#34;DatagramConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="6759711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6759714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6759717">if</span>&nbsp;<span class="ident" id="6759720">n</span><span class="op" id="6759721">,</span>&nbsp;<span class="ident" id="6759723">err</span>&nbsp;<span class="op" id="6759727">:=</span>&nbsp;<span class="ident" id="6759730">c</span><span class="op" id="6759731">.</span><span class="ident" id="6759732">Write</span><span class="op" id="6759737">(</span><span class="ident" id="6759738">wb</span><span class="op" id="6759740">[</span><span class="num" id="6759741">0</span><span class="op" id="6759742">:</span><span class="op" id="6759743">]</span><span class="op" id="6759744">)</span><span class="op" id="6759745">;</span>&nbsp;<span class="ident" id="6759747">err</span>&nbsp;<span class="op" id="6759751">!=</span>&nbsp;<span class="builtintype" id="6759754">nil</span>&nbsp;<span class="op" id="6759758">||</span>&nbsp;<span class="ident" id="6759761">n</span>&nbsp;<span class="op" id="6759763">!=</span>&nbsp;<span class="builtinfunc" id="6759766">len</span><span class="op" id="6759769">(</span><span class="ident" id="6759770">wb</span><span class="op" id="6759772">)</span>&nbsp;<span class="op" id="6759774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6759778">t</span><span class="op" id="6759779">.</span><span class="ident" id="6759780">Fatalf</span><span class="op" id="6759786">(</span><span class="string" id="6759787">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6759825">,</span>&nbsp;<span class="ident" id="6759827">n</span><span class="op" id="6759828">,</span>&nbsp;<span class="ident" id="6759830">err</span><span class="op" id="6759833">,</span>&nbsp;<span class="builtinfunc" id="6759835">len</span><span class="op" id="6759838">(</span><span class="ident" id="6759839">wb</span><span class="op" id="6759841">)</span><span class="op" id="6759842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6759845">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6759849">rb</span>&nbsp;<span class="op" id="6759852">:=</span>&nbsp;<span class="builtinfunc" id="6759855">make</span><span class="op" id="6759859">(</span><span class="op" id="6759860">[</span><span class="op" id="6759861">]</span><span class="builtintype" id="6759862">byte</span><span class="op" id="6759866">,</span>&nbsp;<span class="num" id="6759868">1024</span><span class="op" id="6759872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6759875">if</span>&nbsp;<span class="ident" id="6759878">n</span><span class="op" id="6759879">,</span>&nbsp;<span class="ident" id="6759881">err</span>&nbsp;<span class="op" id="6759885">:=</span>&nbsp;<span class="ident" id="6759888">c</span><span class="op" id="6759889">.</span><span class="ident" id="6759890">Read</span><span class="op" id="6759894">(</span><span class="ident" id="6759895">rb</span><span class="op" id="6759897">[</span><span class="num" id="6759898">0</span><span class="op" id="6759899">:</span><span class="op" id="6759900">]</span><span class="op" id="6759901">)</span><span class="op" id="6759902">;</span>&nbsp;<span class="ident" id="6759904">err</span>&nbsp;<span class="op" id="6759908">!=</span>&nbsp;<span class="builtintype" id="6759911">nil</span>&nbsp;<span class="op" id="6759915">||</span>&nbsp;<span class="ident" id="6759918">n</span>&nbsp;<span class="op" id="6759920">!=</span>&nbsp;<span class="builtinfunc" id="6759923">len</span><span class="op" id="6759926">(</span><span class="ident" id="6759927">wb</span><span class="op" id="6759929">)</span>&nbsp;<span class="op" id="6759931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6759935">t</span><span class="op" id="6759936">.</span><span class="ident" id="6759937">Fatalf</span><span class="op" id="6759943">(</span><span class="string" id="6759944">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6759981">,</span>&nbsp;<span class="ident" id="6759983">n</span><span class="op" id="6759984">,</span>&nbsp;<span class="ident" id="6759986">err</span><span class="op" id="6759989">,</span>&nbsp;<span class="builtinfunc" id="6759991">len</span><span class="op" id="6759994">(</span><span class="ident" id="6759995">wb</span><span class="op" id="6759997">)</span><span class="op" id="6759998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6760001">}</span><br>
<span class="lineno">425</span><span class="op" id="6760003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6760006">func</span>&nbsp;<span class="ident" id="6760011">runDatagramPacketConnClient</span><span class="op" id="6760038">(</span><span class="ident" id="6760039">t</span>&nbsp;<span class="op" id="6760041">*</span><span class="ident" id="6760042">testing</span><span class="op" id="6760049">.</span><span class="ident" id="6760050">T</span><span class="op" id="6760051">,</span>&nbsp;<span class="ident" id="6760053">net</span><span class="op" id="6760056">,</span>&nbsp;<span class="ident" id="6760058">laddr</span><span class="op" id="6760063">,</span>&nbsp;<span class="ident" id="6760065">taddr</span>&nbsp;<span class="builtintype" id="6760071">string</span><span class="op" id="6760077">,</span>&nbsp;<span class="ident" id="6760079">isEmpty</span>&nbsp;<span class="builtintype" id="6760087">bool</span><span class="op" id="6760091">)</span>&nbsp;<span class="op" id="6760093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6760096">var</span>&nbsp;<span class="ident" id="6760100">ra</span>&nbsp;<span class="ident" id="6760103">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6760109">var</span>&nbsp;<span class="ident" id="6760113">err</span>&nbsp;<span class="builtintype" id="6760117">error</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6760124">switch</span>&nbsp;<span class="ident" id="6760131">net</span>&nbsp;<span class="op" id="6760135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6760138">case</span>&nbsp;<span class="string" id="6760143">&#34;udp&#34;</span><span class="op" id="6760148">,</span>&nbsp;<span class="string" id="6760150">&#34;udp4&#34;</span><span class="op" id="6760156">,</span>&nbsp;<span class="string" id="6760158">&#34;udp6&#34;</span><span class="op" id="6760164">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6760168">ra</span><span class="op" id="6760170">,</span>&nbsp;<span class="ident" id="6760172">err</span>&nbsp;<span class="op" id="6760176">=</span>&nbsp;<span class="ident" id="6760178">ResolveUDPAddr</span><span class="op" id="6760192">(</span><span class="ident" id="6760193">net</span><span class="op" id="6760196">,</span>&nbsp;<span class="ident" id="6760198">taddr</span><span class="op" id="6760203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6760207">if</span>&nbsp;<span class="ident" id="6760210">err</span>&nbsp;<span class="op" id="6760214">!=</span>&nbsp;<span class="builtintype" id="6760217">nil</span>&nbsp;<span class="op" id="6760221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6760226">t</span><span class="op" id="6760227">.</span><span class="ident" id="6760228">Fatalf</span><span class="op" id="6760234">(</span><span class="string" id="6760235">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6760270">,</span>&nbsp;<span class="ident" id="6760272">net</span><span class="op" id="6760275">,</span>&nbsp;<span class="ident" id="6760277">taddr</span><span class="op" id="6760282">,</span>&nbsp;<span class="ident" id="6760284">err</span><span class="op" id="6760287">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6760291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6760294">case</span>&nbsp;<span class="string" id="6760299">&#34;unixgram&#34;</span><span class="op" id="6760309">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6760313">ra</span><span class="op" id="6760315">,</span>&nbsp;<span class="ident" id="6760317">err</span>&nbsp;<span class="op" id="6760321">=</span>&nbsp;<span class="ident" id="6760323">ResolveUnixAddr</span><span class="op" id="6760338">(</span><span class="ident" id="6760339">net</span><span class="op" id="6760342">,</span>&nbsp;<span class="ident" id="6760344">taddr</span><span class="op" id="6760349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6760353">if</span>&nbsp;<span class="ident" id="6760356">err</span>&nbsp;<span class="op" id="6760360">!=</span>&nbsp;<span class="builtintype" id="6760363">nil</span>&nbsp;<span class="op" id="6760367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6760372">t</span><span class="op" id="6760373">.</span><span class="ident" id="6760374">Fatalf</span><span class="op" id="6760380">(</span><span class="string" id="6760381">&#34;ResolveUxixAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6760417">,</span>&nbsp;<span class="ident" id="6760419">net</span><span class="op" id="6760422">,</span>&nbsp;<span class="ident" id="6760424">taddr</span><span class="op" id="6760429">,</span>&nbsp;<span class="ident" id="6760431">err</span><span class="op" id="6760434">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6760438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6760441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6760444">c</span><span class="op" id="6760445">,</span>&nbsp;<span class="ident" id="6760447">err</span>&nbsp;<span class="op" id="6760451">:=</span>&nbsp;<span class="ident" id="6760454">ListenPacket</span><span class="op" id="6760466">(</span><span class="ident" id="6760467">net</span><span class="op" id="6760470">,</span>&nbsp;<span class="ident" id="6760472">laddr</span><span class="op" id="6760477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6760480">if</span>&nbsp;<span class="ident" id="6760483">err</span>&nbsp;<span class="op" id="6760487">!=</span>&nbsp;<span class="builtintype" id="6760490">nil</span>&nbsp;<span class="op" id="6760494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6760498">t</span><span class="op" id="6760499">.</span><span class="ident" id="6760500">Fatalf</span><span class="op" id="6760506">(</span><span class="string" id="6760507">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;faild:&nbsp;%v&#34;</span><span class="op" id="6760539">,</span>&nbsp;<span class="ident" id="6760541">net</span><span class="op" id="6760544">,</span>&nbsp;<span class="ident" id="6760546">laddr</span><span class="op" id="6760551">,</span>&nbsp;<span class="ident" id="6760553">err</span><span class="op" id="6760556">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6760559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6760562">defer</span>&nbsp;<span class="ident" id="6760568">c</span><span class="op" id="6760569">.</span><span class="ident" id="6760570">Close</span><span class="op" id="6760575">(</span><span class="op" id="6760576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6760579">c</span><span class="op" id="6760580">.</span><span class="ident" id="6760581">SetReadDeadline</span><span class="op" id="6760596">(</span><span class="ident" id="6760597">time</span><span class="op" id="6760601">.</span><span class="ident" id="6760602">Now</span><span class="op" id="6760605">(</span><span class="op" id="6760606">)</span><span class="op" id="6760607">.</span><span class="ident" id="6760608">Add</span><span class="op" id="6760611">(</span><span class="num" id="6760612">1</span>&nbsp;<span class="op" id="6760614">*</span>&nbsp;<span class="ident" id="6760616">time</span><span class="op" id="6760620">.</span><span class="ident" id="6760621">Second</span><span class="op" id="6760627">)</span><span class="op" id="6760628">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6760632">var</span>&nbsp;<span class="ident" id="6760636">wb</span>&nbsp;<span class="op" id="6760639">[</span><span class="op" id="6760640">]</span><span class="builtintype" id="6760641">byte</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6760647">if</span>&nbsp;<span class="op" id="6760650">!</span><span class="ident" id="6760651">isEmpty</span>&nbsp;<span class="op" id="6760659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6760663">wb</span>&nbsp;<span class="op" id="6760666">=</span>&nbsp;<span class="op" id="6760668">[</span><span class="op" id="6760669">]</span><span class="builtintype" id="6760670">byte</span><span class="op" id="6760674">(</span><span class="string" id="6760675">&#34;DatagramPacketConnClient&nbsp;by&nbsp;ListenPacket\n&#34;</span><span class="op" id="6760719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6760722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6760725">if</span>&nbsp;<span class="ident" id="6760728">n</span><span class="op" id="6760729">,</span>&nbsp;<span class="ident" id="6760731">err</span>&nbsp;<span class="op" id="6760735">:=</span>&nbsp;<span class="ident" id="6760738">c</span><span class="op" id="6760739">.</span><span class="ident" id="6760740">WriteTo</span><span class="op" id="6760747">(</span><span class="ident" id="6760748">wb</span><span class="op" id="6760750">[</span><span class="num" id="6760751">0</span><span class="op" id="6760752">:</span><span class="op" id="6760753">]</span><span class="op" id="6760754">,</span>&nbsp;<span class="ident" id="6760756">ra</span><span class="op" id="6760758">)</span><span class="op" id="6760759">;</span>&nbsp;<span class="ident" id="6760761">err</span>&nbsp;<span class="op" id="6760765">!=</span>&nbsp;<span class="builtintype" id="6760768">nil</span>&nbsp;<span class="op" id="6760772">||</span>&nbsp;<span class="ident" id="6760775">n</span>&nbsp;<span class="op" id="6760777">!=</span>&nbsp;<span class="builtinfunc" id="6760780">len</span><span class="op" id="6760783">(</span><span class="ident" id="6760784">wb</span><span class="op" id="6760786">)</span>&nbsp;<span class="op" id="6760788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6760792">t</span><span class="op" id="6760793">.</span><span class="ident" id="6760794">Fatalf</span><span class="op" id="6760800">(</span><span class="string" id="6760801">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6760845">,</span>&nbsp;<span class="ident" id="6760847">ra</span><span class="op" id="6760849">,</span>&nbsp;<span class="ident" id="6760851">n</span><span class="op" id="6760852">,</span>&nbsp;<span class="ident" id="6760854">err</span><span class="op" id="6760857">,</span>&nbsp;<span class="builtinfunc" id="6760859">len</span><span class="op" id="6760862">(</span><span class="ident" id="6760863">wb</span><span class="op" id="6760865">)</span><span class="op" id="6760866">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6760869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6760873">rb</span>&nbsp;<span class="op" id="6760876">:=</span>&nbsp;<span class="builtinfunc" id="6760879">make</span><span class="op" id="6760883">(</span><span class="op" id="6760884">[</span><span class="op" id="6760885">]</span><span class="builtintype" id="6760886">byte</span><span class="op" id="6760890">,</span>&nbsp;<span class="num" id="6760892">1024</span><span class="op" id="6760896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6760899">if</span>&nbsp;<span class="ident" id="6760902">n</span><span class="op" id="6760903">,</span>&nbsp;<span class="ident" id="6760905">_</span><span class="op" id="6760906">,</span>&nbsp;<span class="ident" id="6760908">err</span>&nbsp;<span class="op" id="6760912">:=</span>&nbsp;<span class="ident" id="6760915">c</span><span class="op" id="6760916">.</span><span class="ident" id="6760917">ReadFrom</span><span class="op" id="6760925">(</span><span class="ident" id="6760926">rb</span><span class="op" id="6760928">[</span><span class="num" id="6760929">0</span><span class="op" id="6760930">:</span><span class="op" id="6760931">]</span><span class="op" id="6760932">)</span><span class="op" id="6760933">;</span>&nbsp;<span class="ident" id="6760935">err</span>&nbsp;<span class="op" id="6760939">!=</span>&nbsp;<span class="builtintype" id="6760942">nil</span>&nbsp;<span class="op" id="6760946">||</span>&nbsp;<span class="ident" id="6760949">n</span>&nbsp;<span class="op" id="6760951">!=</span>&nbsp;<span class="builtinfunc" id="6760954">len</span><span class="op" id="6760957">(</span><span class="ident" id="6760958">wb</span><span class="op" id="6760960">)</span>&nbsp;<span class="op" id="6760962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6760966">t</span><span class="op" id="6760967">.</span><span class="ident" id="6760968">Fatalf</span><span class="op" id="6760974">(</span><span class="string" id="6760975">&#34;ReadFrom&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6761016">,</span>&nbsp;<span class="ident" id="6761018">n</span><span class="op" id="6761019">,</span>&nbsp;<span class="ident" id="6761021">err</span><span class="op" id="6761024">,</span>&nbsp;<span class="builtinfunc" id="6761026">len</span><span class="op" id="6761029">(</span><span class="ident" id="6761030">wb</span><span class="op" id="6761032">)</span><span class="op" id="6761033">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6761036">}</span><br>
<span class="lineno"></span><span class="op" id="6761038">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
