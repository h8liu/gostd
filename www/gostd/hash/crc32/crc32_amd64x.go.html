<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/crc32</h2>
<ul>
<li><a href="/gostd/hash/crc32/crc32.go.html">crc32.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_amd64x.go.html">crc32_amd64x.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_test.go.html">crc32_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4243937">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4243992">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4244046">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4244097">//&nbsp;+build&nbsp;amd64&nbsp;amd64p32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4244123">package</span>&nbsp;<span class="ident" id="4244131">crc32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4244138">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;the&nbsp;code&nbsp;to&nbsp;call&nbsp;the&nbsp;SSE&nbsp;4.2&nbsp;version&nbsp;of&nbsp;the&nbsp;Castagnoli</span><br>
<span class="lineno">10</span><span class="comment" id="4244215">//&nbsp;CRC.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4244224">//&nbsp;haveSSE42&nbsp;is&nbsp;defined&nbsp;in&nbsp;crc_amd64.s&nbsp;and&nbsp;uses&nbsp;CPUID&nbsp;to&nbsp;test&nbsp;for&nbsp;SSE&nbsp;4.2</span><br>
<span class="lineno"></span><span class="comment" id="4244298">//&nbsp;support.</span><br>
<span class="lineno"></span><span class="keyword" id="4244310">func</span>&nbsp;<span class="ident" id="4244315">haveSSE42</span><span class="op" id="4244324">(</span><span class="op" id="4244325">)</span>&nbsp;<span class="builtintype" id="4244327">bool</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="4244333">//&nbsp;castagnoliSSE42&nbsp;is&nbsp;defined&nbsp;in&nbsp;crc_amd64.s&nbsp;and&nbsp;uses&nbsp;the&nbsp;SSE4.2&nbsp;CRC32</span><br>
<span class="lineno"></span><span class="comment" id="4244404">//&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="keyword" id="4244420">func</span>&nbsp;<span class="ident" id="4244425">castagnoliSSE42</span><span class="op" id="4244440">(</span><span class="ident" id="4244441">crc</span>&nbsp;<span class="builtintype" id="4244445">uint32</span><span class="op" id="4244451">,</span>&nbsp;<span class="ident" id="4244453">p</span>&nbsp;<span class="op" id="4244455">[</span><span class="op" id="4244456">]</span><span class="builtintype" id="4244457">byte</span><span class="op" id="4244461">)</span>&nbsp;<span class="builtintype" id="4244463">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="4244471">var</span>&nbsp;<span class="ident" id="4244475">sse42</span>&nbsp;<span class="op" id="4244481">=</span>&nbsp;<span class="ident" id="4244483">haveSSE42</span><span class="op" id="4244492">(</span><span class="op" id="4244493">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4244496">func</span>&nbsp;<span class="ident" id="4244501">updateCastagnoli</span><span class="op" id="4244517">(</span><span class="ident" id="4244518">crc</span>&nbsp;<span class="builtintype" id="4244522">uint32</span><span class="op" id="4244528">,</span>&nbsp;<span class="ident" id="4244530">p</span>&nbsp;<span class="op" id="4244532">[</span><span class="op" id="4244533">]</span><span class="builtintype" id="4244534">byte</span><span class="op" id="4244538">)</span>&nbsp;<span class="builtintype" id="4244540">uint32</span>&nbsp;<span class="op" id="4244547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244550">if</span>&nbsp;<span class="ident" id="4244553">sse42</span>&nbsp;<span class="op" id="4244559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244563">return</span>&nbsp;<span class="ident" id="4244570">castagnoliSSE42</span><span class="op" id="4244585">(</span><span class="ident" id="4244586">crc</span><span class="op" id="4244589">,</span>&nbsp;<span class="ident" id="4244591">p</span><span class="op" id="4244592">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4244595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244598">return</span>&nbsp;<span class="ident" id="4244605">update</span><span class="op" id="4244611">(</span><span class="ident" id="4244612">crc</span><span class="op" id="4244615">,</span>&nbsp;<span class="ident" id="4244617">castagnoliTable</span><span class="op" id="4244632">,</span>&nbsp;<span class="ident" id="4244634">p</span><span class="op" id="4244635">)</span><br>
<span class="lineno"></span><span class="op" id="4244637">}</span>
</div>
</body>
</html>
