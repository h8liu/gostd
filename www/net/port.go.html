<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2668650">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2668706">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2668760">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2668811">//&nbsp;Network&nbsp;service&nbsp;port&nbsp;manipulations</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2668850">package</span>&nbsp;<span class="ident" id="2668858">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2668863">//&nbsp;parsePort&nbsp;parses&nbsp;port&nbsp;as&nbsp;a&nbsp;network&nbsp;service&nbsp;port&nbsp;number&nbsp;for&nbsp;both</span><br>
<span class="lineno">10</span><span class="comment" id="2668930">//&nbsp;TCP&nbsp;and&nbsp;UDP.</span><br>
<span class="lineno"></span><span class="keyword" id="2668946">func</span>&nbsp;<span class="ident" id="2668951">parsePort</span><span class="op" id="2668960">(</span><span class="ident" id="2668961">net</span><span class="op" id="2668964">,</span>&nbsp;<span class="ident" id="2668966">port</span>&nbsp;<span class="builtintype" id="2668971">string</span><span class="op" id="2668977">)</span>&nbsp;<span class="op" id="2668979">(</span><span class="builtintype" id="2668980">int</span><span class="op" id="2668983">,</span>&nbsp;<span class="builtintype" id="2668985">error</span><span class="op" id="2668990">)</span>&nbsp;<span class="op" id="2668992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2668995">p</span><span class="op" id="2668996">,</span>&nbsp;<span class="ident" id="2668998">i</span><span class="op" id="2668999">,</span>&nbsp;<span class="ident" id="2669001">ok</span>&nbsp;<span class="op" id="2669004">:=</span>&nbsp;<span class="ident" id="2669007"><a href="/net/parse.go.html#2665011">dtoi</a></span><span class="op" id="2669011">(</span><span class="ident" id="2669012"><a href="/net/port.go.html#2668966">port</a></span><span class="op" id="2669016">,</span>&nbsp;<span class="num" id="2669018">0</span><span class="op" id="2669019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669022">if</span>&nbsp;<span class="op" id="2669025">!</span><span class="ident" id="2669026"><a href="/net/port.go.html#2669001">ok</a></span>&nbsp;<span class="op" id="2669029">||</span>&nbsp;<span class="ident" id="2669032"><a href="/net/port.go.html#2668998">i</a></span>&nbsp;<span class="op" id="2669034">!=</span>&nbsp;<span class="builtinfunc" id="2669037">len</span><span class="op" id="2669040">(</span><span class="ident" id="2669041"><a href="/net/port.go.html#2668966">port</a></span><span class="op" id="2669045">)</span>&nbsp;<span class="op" id="2669047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669051">var</span>&nbsp;<span class="ident" id="2669055">err</span>&nbsp;<span class="builtintype" id="2669059">error</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2669067"><a href="/net/port.go.html#2668995">p</a></span><span class="op" id="2669068">,</span>&nbsp;<span class="ident" id="2669070"><a href="/net/port.go.html#2669055">err</a></span>&nbsp;<span class="op" id="2669074">=</span>&nbsp;<span class="ident" id="2669076"><a href="/net/lookup.go.html#2643934">LookupPort</a></span><span class="op" id="2669086">(</span><span class="ident" id="2669087"><a href="/net/port.go.html#2668961">net</a></span><span class="op" id="2669090">,</span>&nbsp;<span class="ident" id="2669092"><a href="/net/port.go.html#2668966">port</a></span><span class="op" id="2669096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669100">if</span>&nbsp;<span class="ident" id="2669103"><a href="/net/port.go.html#2669055">err</a></span>&nbsp;<span class="op" id="2669107">!=</span>&nbsp;<span class="ident" id="2669110">nil</span>&nbsp;<span class="op" id="2669114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669119">return</span>&nbsp;<span class="num" id="2669126">0</span><span class="op" id="2669127">,</span>&nbsp;<span class="ident" id="2669129"><a href="/net/port.go.html#2669055">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2669135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2669138">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669141">if</span>&nbsp;<span class="ident" id="2669144"><a href="/net/port.go.html#2668995">p</a></span>&nbsp;<span class="op" id="2669146">&lt;</span>&nbsp;<span class="num" id="2669148">0</span>&nbsp;<span class="op" id="2669150">||</span>&nbsp;<span class="ident" id="2669153"><a href="/net/port.go.html#2668995">p</a></span>&nbsp;<span class="op" id="2669155">&gt;</span>&nbsp;<span class="num" id="2669157">0xFFFF</span>&nbsp;<span class="op" id="2669164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669168">return</span>&nbsp;<span class="num" id="2669175">0</span><span class="op" id="2669176">,</span>&nbsp;<span class="op" id="2669178">&amp;</span><span class="ident" id="2669179"><a href="/net/net.go.html#2660706">AddrError</a></span><span class="op" id="2669188">{</span><span class="string" id="2669189">&#34;invalid&nbsp;port&#34;</span><span class="op" id="2669203">,</span>&nbsp;<span class="ident" id="2669205"><a href="/net/port.go.html#2668966">port</a></span><span class="op" id="2669209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2669212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669215">return</span>&nbsp;<span class="ident" id="2669222"><a href="/net/port.go.html#2668995">p</a></span><span class="op" id="2669223">,</span>&nbsp;<span class="ident" id="2669225">nil</span><br>
<span class="lineno"></span><span class="op" id="2669229">}</span>
</div>
</body>
</html>
