<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html" class="current">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3684837">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3684892">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3684946">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3684997">package</span>&nbsp;<span class="ident" id="3685005">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3685010">import</span>&nbsp;<span class="op" id="3685017">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3685020">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3685033">&#34;sort&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3685040">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3685043">//&nbsp;DNSError&nbsp;represents&nbsp;a&nbsp;DNS&nbsp;lookup&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3685086">type</span>&nbsp;<span class="ident" id="3685091">DNSError</span>&nbsp;<span class="keyword" id="3685100">struct</span>&nbsp;<span class="op" id="3685107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685110">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3685120">string</span>&nbsp;<span class="comment" id="3685127">//&nbsp;description&nbsp;of&nbsp;the&nbsp;error</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685156">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3685166">string</span>&nbsp;<span class="comment" id="3685173">//&nbsp;name&nbsp;looked&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685193">Server</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3685203">string</span>&nbsp;<span class="comment" id="3685210">//&nbsp;server&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685226">IsTimeout</span>&nbsp;<span class="builtintype" id="3685236">bool</span><br>
<span class="lineno"></span><span class="op" id="3685241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="3685244">func</span>&nbsp;<span class="op" id="3685249">(</span><span class="ident" id="3685250">e</span>&nbsp;<span class="op" id="3685252">*</span><span class="ident" id="3685253">DNSError</span><span class="op" id="3685261">)</span>&nbsp;<span class="ident" id="3685263">Error</span><span class="op" id="3685268">(</span><span class="op" id="3685269">)</span>&nbsp;<span class="builtintype" id="3685271">string</span>&nbsp;<span class="op" id="3685278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685281">if</span>&nbsp;<span class="ident" id="3685284">e</span>&nbsp;<span class="op" id="3685286">==</span>&nbsp;<span class="builtintype" id="3685289">nil</span>&nbsp;<span class="op" id="3685293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685297">return</span>&nbsp;<span class="string" id="3685304">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3685313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685316">s</span>&nbsp;<span class="op" id="3685318">:=</span>&nbsp;<span class="string" id="3685321">&#34;lookup&nbsp;&#34;</span>&nbsp;<span class="op" id="3685331">+</span>&nbsp;<span class="ident" id="3685333">e</span><span class="op" id="3685334">.</span><span class="ident" id="3685335">Name</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685341">if</span>&nbsp;<span class="ident" id="3685344">e</span><span class="op" id="3685345">.</span><span class="ident" id="3685346">Server</span>&nbsp;<span class="op" id="3685353">!=</span>&nbsp;<span class="string" id="3685356">&#34;&#34;</span>&nbsp;<span class="op" id="3685359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685363">s</span>&nbsp;<span class="op" id="3685365">+=</span>&nbsp;<span class="string" id="3685368">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="3685375">+</span>&nbsp;<span class="ident" id="3685377">e</span><span class="op" id="3685378">.</span><span class="ident" id="3685379">Server</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3685387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685390">s</span>&nbsp;<span class="op" id="3685392">+=</span>&nbsp;<span class="string" id="3685395">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="3685400">+</span>&nbsp;<span class="ident" id="3685402">e</span><span class="op" id="3685403">.</span><span class="ident" id="3685404">Err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685409">return</span>&nbsp;<span class="ident" id="3685416">s</span><br>
<span class="lineno">30</span><span class="op" id="3685418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3685421">func</span>&nbsp;<span class="op" id="3685426">(</span><span class="ident" id="3685427">e</span>&nbsp;<span class="op" id="3685429">*</span><span class="ident" id="3685430">DNSError</span><span class="op" id="3685438">)</span>&nbsp;<span class="ident" id="3685440">Timeout</span><span class="op" id="3685447">(</span><span class="op" id="3685448">)</span>&nbsp;<span class="builtintype" id="3685450">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3685457">{</span>&nbsp;<span class="keyword" id="3685459">return</span>&nbsp;<span class="ident" id="3685466">e</span><span class="op" id="3685467">.</span><span class="ident" id="3685468">IsTimeout</span>&nbsp;<span class="op" id="3685478">}</span><br>
<span class="lineno"></span><span class="keyword" id="3685480">func</span>&nbsp;<span class="op" id="3685485">(</span><span class="ident" id="3685486">e</span>&nbsp;<span class="op" id="3685488">*</span><span class="ident" id="3685489">DNSError</span><span class="op" id="3685497">)</span>&nbsp;<span class="ident" id="3685499">Temporary</span><span class="op" id="3685508">(</span><span class="op" id="3685509">)</span>&nbsp;<span class="builtintype" id="3685511">bool</span>&nbsp;<span class="op" id="3685516">{</span>&nbsp;<span class="keyword" id="3685518">return</span>&nbsp;<span class="ident" id="3685525">e</span><span class="op" id="3685526">.</span><span class="ident" id="3685527">IsTimeout</span>&nbsp;<span class="op" id="3685537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="3685540">const</span>&nbsp;<span class="ident" id="3685546">noSuchHost</span>&nbsp;<span class="op" id="3685557">=</span>&nbsp;<span class="string" id="3685559">&#34;no&nbsp;such&nbsp;host&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3685575">//&nbsp;reverseaddr&nbsp;returns&nbsp;the&nbsp;in-addr.arpa.&nbsp;or&nbsp;ip6.arpa.&nbsp;hostname&nbsp;of&nbsp;the&nbsp;IP</span><br>
<span class="lineno"></span><span class="comment" id="3685648">//&nbsp;address&nbsp;addr&nbsp;suitable&nbsp;for&nbsp;rDNS&nbsp;(PTR)&nbsp;record&nbsp;lookup&nbsp;or&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;fails</span><br>
<span class="lineno"></span><span class="comment" id="3685726">//&nbsp;to&nbsp;parse&nbsp;the&nbsp;IP&nbsp;address.</span><br>
<span class="lineno">40</span><span class="keyword" id="3685754">func</span>&nbsp;<span class="ident" id="3685759">reverseaddr</span><span class="op" id="3685770">(</span><span class="ident" id="3685771">addr</span>&nbsp;<span class="builtintype" id="3685776">string</span><span class="op" id="3685782">)</span>&nbsp;<span class="op" id="3685784">(</span><span class="ident" id="3685785">arpa</span>&nbsp;<span class="builtintype" id="3685790">string</span><span class="op" id="3685796">,</span>&nbsp;<span class="ident" id="3685798">err</span>&nbsp;<span class="builtintype" id="3685802">error</span><span class="op" id="3685807">)</span>&nbsp;<span class="op" id="3685809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685812">ip</span>&nbsp;<span class="op" id="3685815">:=</span>&nbsp;<span class="ident" id="3685818">ParseIP</span><span class="op" id="3685825">(</span><span class="ident" id="3685826">addr</span><span class="op" id="3685830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685833">if</span>&nbsp;<span class="ident" id="3685836">ip</span>&nbsp;<span class="op" id="3685839">==</span>&nbsp;<span class="builtintype" id="3685842">nil</span>&nbsp;<span class="op" id="3685846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685850">return</span>&nbsp;<span class="string" id="3685857">&#34;&#34;</span><span class="op" id="3685859">,</span>&nbsp;<span class="op" id="3685861">&amp;</span><span class="ident" id="3685862">DNSError</span><span class="op" id="3685870">{</span><span class="ident" id="3685871">Err</span><span class="op" id="3685874">:</span>&nbsp;<span class="string" id="3685876">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="3685898">,</span>&nbsp;<span class="ident" id="3685900">Name</span><span class="op" id="3685904">:</span>&nbsp;<span class="ident" id="3685906">addr</span><span class="op" id="3685910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3685913">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685916">if</span>&nbsp;<span class="ident" id="3685919">ip</span><span class="op" id="3685921">.</span><span class="ident" id="3685922">To4</span><span class="op" id="3685925">(</span><span class="op" id="3685926">)</span>&nbsp;<span class="op" id="3685928">!=</span>&nbsp;<span class="builtintype" id="3685931">nil</span>&nbsp;<span class="op" id="3685935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685939">return</span>&nbsp;<span class="ident" id="3685946">itoa</span><span class="op" id="3685950">(</span><span class="builtintype" id="3685951">int</span><span class="op" id="3685954">(</span><span class="ident" id="3685955">ip</span><span class="op" id="3685957">[</span><span class="num" id="3685958">15</span><span class="op" id="3685960">]</span><span class="op" id="3685961">)</span><span class="op" id="3685962">)</span>&nbsp;<span class="op" id="3685964">+</span>&nbsp;<span class="string" id="3685966">&#34;.&#34;</span>&nbsp;<span class="op" id="3685970">+</span>&nbsp;<span class="ident" id="3685972">itoa</span><span class="op" id="3685976">(</span><span class="builtintype" id="3685977">int</span><span class="op" id="3685980">(</span><span class="ident" id="3685981">ip</span><span class="op" id="3685983">[</span><span class="num" id="3685984">14</span><span class="op" id="3685986">]</span><span class="op" id="3685987">)</span><span class="op" id="3685988">)</span>&nbsp;<span class="op" id="3685990">+</span>&nbsp;<span class="string" id="3685992">&#34;.&#34;</span>&nbsp;<span class="op" id="3685996">+</span>&nbsp;<span class="ident" id="3685998">itoa</span><span class="op" id="3686002">(</span><span class="builtintype" id="3686003">int</span><span class="op" id="3686006">(</span><span class="ident" id="3686007">ip</span><span class="op" id="3686009">[</span><span class="num" id="3686010">13</span><span class="op" id="3686012">]</span><span class="op" id="3686013">)</span><span class="op" id="3686014">)</span>&nbsp;<span class="op" id="3686016">+</span>&nbsp;<span class="string" id="3686018">&#34;.&#34;</span>&nbsp;<span class="op" id="3686022">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3686027">itoa</span><span class="op" id="3686031">(</span><span class="builtintype" id="3686032">int</span><span class="op" id="3686035">(</span><span class="ident" id="3686036">ip</span><span class="op" id="3686038">[</span><span class="num" id="3686039">12</span><span class="op" id="3686041">]</span><span class="op" id="3686042">)</span><span class="op" id="3686043">)</span>&nbsp;<span class="op" id="3686045">+</span>&nbsp;<span class="string" id="3686047">&#34;.in-addr.arpa.&#34;</span><span class="op" id="3686063">,</span>&nbsp;<span class="builtintype" id="3686065">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3686070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3686073">//&nbsp;Must&nbsp;be&nbsp;IPv6</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3686090">buf</span>&nbsp;<span class="op" id="3686094">:=</span>&nbsp;<span class="builtinfunc" id="3686097">make</span><span class="op" id="3686101">(</span><span class="op" id="3686102">[</span><span class="op" id="3686103">]</span><span class="builtintype" id="3686104">byte</span><span class="op" id="3686108">,</span>&nbsp;<span class="num" id="3686110">0</span><span class="op" id="3686111">,</span>&nbsp;<span class="builtinfunc" id="3686113">len</span><span class="op" id="3686116">(</span><span class="ident" id="3686117">ip</span><span class="op" id="3686119">)</span><span class="op" id="3686120">*</span><span class="num" id="3686121">4</span><span class="op" id="3686122">+</span><span class="builtinfunc" id="3686123">len</span><span class="op" id="3686126">(</span><span class="string" id="3686127">&#34;ip6.arpa.&#34;</span><span class="op" id="3686138">)</span><span class="op" id="3686139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3686142">//&nbsp;Add&nbsp;it,&nbsp;in&nbsp;reverse,&nbsp;to&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3686180">for</span>&nbsp;<span class="ident" id="3686184">i</span>&nbsp;<span class="op" id="3686186">:=</span>&nbsp;<span class="builtinfunc" id="3686189">len</span><span class="op" id="3686192">(</span><span class="ident" id="3686193">ip</span><span class="op" id="3686195">)</span>&nbsp;<span class="op" id="3686197">-</span>&nbsp;<span class="num" id="3686199">1</span><span class="op" id="3686200">;</span>&nbsp;<span class="ident" id="3686202">i</span>&nbsp;<span class="op" id="3686204">&gt;=</span>&nbsp;<span class="num" id="3686207">0</span><span class="op" id="3686208">;</span>&nbsp;<span class="ident" id="3686210">i</span><span class="op" id="3686211">--</span>&nbsp;<span class="op" id="3686214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3686218">v</span>&nbsp;<span class="op" id="3686220">:=</span>&nbsp;<span class="ident" id="3686223">ip</span><span class="op" id="3686225">[</span><span class="ident" id="3686226">i</span><span class="op" id="3686227">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3686231">buf</span>&nbsp;<span class="op" id="3686235">=</span>&nbsp;<span class="builtinfunc" id="3686237">append</span><span class="op" id="3686243">(</span><span class="ident" id="3686244">buf</span><span class="op" id="3686247">,</span>&nbsp;<span class="ident" id="3686249">hexDigit</span><span class="op" id="3686257">[</span><span class="ident" id="3686258">v</span><span class="op" id="3686259">&amp;</span><span class="num" id="3686260">0xF</span><span class="op" id="3686263">]</span><span class="op" id="3686264">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3686268">buf</span>&nbsp;<span class="op" id="3686272">=</span>&nbsp;<span class="builtinfunc" id="3686274">append</span><span class="op" id="3686280">(</span><span class="ident" id="3686281">buf</span><span class="op" id="3686284">,</span>&nbsp;<span class="string" id="3686286">&#39;.&#39;</span><span class="op" id="3686289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3686293">buf</span>&nbsp;<span class="op" id="3686297">=</span>&nbsp;<span class="builtinfunc" id="3686299">append</span><span class="op" id="3686305">(</span><span class="ident" id="3686306">buf</span><span class="op" id="3686309">,</span>&nbsp;<span class="ident" id="3686311">hexDigit</span><span class="op" id="3686319">[</span><span class="ident" id="3686320">v</span><span class="op" id="3686321">&gt;&gt;</span><span class="num" id="3686323">4</span><span class="op" id="3686324">]</span><span class="op" id="3686325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3686329">buf</span>&nbsp;<span class="op" id="3686333">=</span>&nbsp;<span class="builtinfunc" id="3686335">append</span><span class="op" id="3686341">(</span><span class="ident" id="3686342">buf</span><span class="op" id="3686345">,</span>&nbsp;<span class="string" id="3686347">&#39;.&#39;</span><span class="op" id="3686350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3686353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3686356">//&nbsp;Append&nbsp;&#34;ip6.arpa.&#34;&nbsp;and&nbsp;return&nbsp;(buf&nbsp;already&nbsp;has&nbsp;the&nbsp;final&nbsp;.)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3686420">buf</span>&nbsp;<span class="op" id="3686424">=</span>&nbsp;<span class="builtinfunc" id="3686426">append</span><span class="op" id="3686432">(</span><span class="ident" id="3686433">buf</span><span class="op" id="3686436">,</span>&nbsp;<span class="string" id="3686438">&#34;ip6.arpa.&#34;</span><span class="op" id="3686449">...</span><span class="op" id="3686452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3686455">return</span>&nbsp;<span class="builtintype" id="3686462">string</span><span class="op" id="3686468">(</span><span class="ident" id="3686469">buf</span><span class="op" id="3686472">)</span><span class="op" id="3686473">,</span>&nbsp;<span class="builtintype" id="3686475">nil</span><br>
<span class="lineno"></span><span class="op" id="3686479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3686482">//&nbsp;Find&nbsp;answer&nbsp;for&nbsp;name&nbsp;in&nbsp;dns&nbsp;message.</span><br>
<span class="lineno">65</span><span class="comment" id="3686522">//&nbsp;On&nbsp;return,&nbsp;if&nbsp;err&nbsp;==&nbsp;nil,&nbsp;addrs&nbsp;!=&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="3686565">func</span>&nbsp;<span class="ident" id="3686570">answer</span><span class="op" id="3686576">(</span><span class="ident" id="3686577">name</span><span class="op" id="3686581">,</span>&nbsp;<span class="ident" id="3686583">server</span>&nbsp;<span class="builtintype" id="3686590">string</span><span class="op" id="3686596">,</span>&nbsp;<span class="ident" id="3686598">dns</span>&nbsp;<span class="op" id="3686602">*</span><span class="ident" id="3686603">dnsMsg</span><span class="op" id="3686609">,</span>&nbsp;<span class="ident" id="3686611">qtype</span>&nbsp;<span class="builtintype" id="3686617">uint16</span><span class="op" id="3686623">)</span>&nbsp;<span class="op" id="3686625">(</span><span class="ident" id="3686626">cname</span>&nbsp;<span class="builtintype" id="3686632">string</span><span class="op" id="3686638">,</span>&nbsp;<span class="ident" id="3686640">addrs</span>&nbsp;<span class="op" id="3686646">[</span><span class="op" id="3686647">]</span><span class="ident" id="3686648">dnsRR</span><span class="op" id="3686653">,</span>&nbsp;<span class="ident" id="3686655">err</span>&nbsp;<span class="builtintype" id="3686659">error</span><span class="op" id="3686664">)</span>&nbsp;<span class="op" id="3686666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3686669">addrs</span>&nbsp;<span class="op" id="3686675">=</span>&nbsp;<span class="builtinfunc" id="3686677">make</span><span class="op" id="3686681">(</span><span class="op" id="3686682">[</span><span class="op" id="3686683">]</span><span class="ident" id="3686684">dnsRR</span><span class="op" id="3686689">,</span>&nbsp;<span class="num" id="3686691">0</span><span class="op" id="3686692">,</span>&nbsp;<span class="builtinfunc" id="3686694">len</span><span class="op" id="3686697">(</span><span class="ident" id="3686698">dns</span><span class="op" id="3686701">.</span><span class="ident" id="3686702">answer</span><span class="op" id="3686708">)</span><span class="op" id="3686709">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3686713">if</span>&nbsp;<span class="ident" id="3686716">dns</span><span class="op" id="3686719">.</span><span class="ident" id="3686720">rcode</span>&nbsp;<span class="op" id="3686726">==</span>&nbsp;<span class="ident" id="3686729">dnsRcodeNameError</span>&nbsp;<span class="op" id="3686747">&amp;&amp;</span>&nbsp;<span class="ident" id="3686750">dns</span><span class="op" id="3686753">.</span><span class="ident" id="3686754">recursion_available</span>&nbsp;<span class="op" id="3686774">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3686778">return</span>&nbsp;<span class="string" id="3686785">&#34;&#34;</span><span class="op" id="3686787">,</span>&nbsp;<span class="builtintype" id="3686789">nil</span><span class="op" id="3686792">,</span>&nbsp;<span class="op" id="3686794">&amp;</span><span class="ident" id="3686795">DNSError</span><span class="op" id="3686803">{</span><span class="ident" id="3686804">Err</span><span class="op" id="3686807">:</span>&nbsp;<span class="ident" id="3686809">noSuchHost</span><span class="op" id="3686819">,</span>&nbsp;<span class="ident" id="3686821">Name</span><span class="op" id="3686825">:</span>&nbsp;<span class="ident" id="3686827">name</span><span class="op" id="3686831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3686834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3686837">if</span>&nbsp;<span class="ident" id="3686840">dns</span><span class="op" id="3686843">.</span><span class="ident" id="3686844">rcode</span>&nbsp;<span class="op" id="3686850">!=</span>&nbsp;<span class="ident" id="3686853">dnsRcodeSuccess</span>&nbsp;<span class="op" id="3686869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3686873">//&nbsp;None&nbsp;of&nbsp;the&nbsp;error&nbsp;codes&nbsp;make&nbsp;sense</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3686913">//&nbsp;for&nbsp;the&nbsp;query&nbsp;we&nbsp;sent.&nbsp;&nbsp;If&nbsp;we&nbsp;didn&#39;t&nbsp;get</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3686959">//&nbsp;a&nbsp;name&nbsp;error&nbsp;and&nbsp;we&nbsp;didn&#39;t&nbsp;get&nbsp;success,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3687004">//&nbsp;the&nbsp;server&nbsp;is&nbsp;behaving&nbsp;incorrectly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687045">return</span>&nbsp;<span class="string" id="3687052">&#34;&#34;</span><span class="op" id="3687054">,</span>&nbsp;<span class="builtintype" id="3687056">nil</span><span class="op" id="3687059">,</span>&nbsp;<span class="op" id="3687061">&amp;</span><span class="ident" id="3687062">DNSError</span><span class="op" id="3687070">{</span><span class="ident" id="3687071">Err</span><span class="op" id="3687074">:</span>&nbsp;<span class="string" id="3687076">&#34;server&nbsp;misbehaving&#34;</span><span class="op" id="3687096">,</span>&nbsp;<span class="ident" id="3687098">Name</span><span class="op" id="3687102">:</span>&nbsp;<span class="ident" id="3687104">name</span><span class="op" id="3687108">,</span>&nbsp;<span class="ident" id="3687110">Server</span><span class="op" id="3687116">:</span>&nbsp;<span class="ident" id="3687118">server</span><span class="op" id="3687124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3687127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3687131">//&nbsp;Look&nbsp;for&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3687154">//&nbsp;Presotto&nbsp;says&nbsp;it&#39;s&nbsp;okay&nbsp;to&nbsp;assume&nbsp;that&nbsp;servers&nbsp;listed&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3687215">//&nbsp;/etc/resolv.conf&nbsp;are&nbsp;recursive&nbsp;resolvers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3687261">//&nbsp;We&nbsp;asked&nbsp;for&nbsp;recursion,&nbsp;so&nbsp;it&nbsp;should&nbsp;have&nbsp;included</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3687316">//&nbsp;all&nbsp;the&nbsp;answers&nbsp;we&nbsp;need&nbsp;in&nbsp;this&nbsp;one&nbsp;packet.</span><br>
<span class="lineno">85</span><span class="ident" id="3687363">Cname</span><span class="op" id="3687368">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687371">for</span>&nbsp;<span class="ident" id="3687375">cnameloop</span>&nbsp;<span class="op" id="3687385">:=</span>&nbsp;<span class="num" id="3687388">0</span><span class="op" id="3687389">;</span>&nbsp;<span class="ident" id="3687391">cnameloop</span>&nbsp;<span class="op" id="3687401">&lt;</span>&nbsp;<span class="num" id="3687403">10</span><span class="op" id="3687405">;</span>&nbsp;<span class="ident" id="3687407">cnameloop</span><span class="op" id="3687416">++</span>&nbsp;<span class="op" id="3687419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3687423">addrs</span>&nbsp;<span class="op" id="3687429">=</span>&nbsp;<span class="ident" id="3687431">addrs</span><span class="op" id="3687436">[</span><span class="num" id="3687437">0</span><span class="op" id="3687438">:</span><span class="num" id="3687439">0</span><span class="op" id="3687440">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687444">for</span>&nbsp;<span class="ident" id="3687448">_</span><span class="op" id="3687449">,</span>&nbsp;<span class="ident" id="3687451">rr</span>&nbsp;<span class="op" id="3687454">:=</span>&nbsp;<span class="keyword" id="3687457">range</span>&nbsp;<span class="ident" id="3687463">dns</span><span class="op" id="3687466">.</span><span class="ident" id="3687467">answer</span>&nbsp;<span class="op" id="3687474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687479">if</span>&nbsp;<span class="ident" id="3687482">_</span><span class="op" id="3687483">,</span>&nbsp;<span class="ident" id="3687485">justHeader</span>&nbsp;<span class="op" id="3687496">:=</span>&nbsp;<span class="ident" id="3687499">rr</span><span class="op" id="3687501">.</span><span class="op" id="3687502">(</span><span class="op" id="3687503">*</span><span class="ident" id="3687504">dnsRR_Header</span><span class="op" id="3687516">)</span><span class="op" id="3687517">;</span>&nbsp;<span class="ident" id="3687519">justHeader</span>&nbsp;<span class="op" id="3687530">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3687536">//&nbsp;Corrupt&nbsp;record:&nbsp;we&nbsp;only&nbsp;have&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3687574">//&nbsp;header.&nbsp;That&nbsp;header&nbsp;might&nbsp;say&nbsp;it&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3687616">//&nbsp;of&nbsp;type&nbsp;qtype,&nbsp;but&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3687651">//&nbsp;actually&nbsp;have&nbsp;it.&nbsp;Skip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687682">continue</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3687694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3687699">h</span>&nbsp;<span class="op" id="3687701">:=</span>&nbsp;<span class="ident" id="3687704">rr</span><span class="op" id="3687706">.</span><span class="ident" id="3687707">Header</span><span class="op" id="3687713">(</span><span class="op" id="3687714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687719">if</span>&nbsp;<span class="ident" id="3687722">h</span><span class="op" id="3687723">.</span><span class="ident" id="3687724">Class</span>&nbsp;<span class="op" id="3687730">==</span>&nbsp;<span class="ident" id="3687733">dnsClassINET</span>&nbsp;<span class="op" id="3687746">&amp;&amp;</span>&nbsp;<span class="ident" id="3687749">h</span><span class="op" id="3687750">.</span><span class="ident" id="3687751">Name</span>&nbsp;<span class="op" id="3687756">==</span>&nbsp;<span class="ident" id="3687759">name</span>&nbsp;<span class="op" id="3687764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687770">switch</span>&nbsp;<span class="ident" id="3687777">h</span><span class="op" id="3687778">.</span><span class="ident" id="3687779">Rrtype</span>&nbsp;<span class="op" id="3687786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687792">case</span>&nbsp;<span class="ident" id="3687797">qtype</span><span class="op" id="3687802">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3687809">addrs</span>&nbsp;<span class="op" id="3687815">=</span>&nbsp;<span class="builtinfunc" id="3687817">append</span><span class="op" id="3687823">(</span><span class="ident" id="3687824">addrs</span><span class="op" id="3687829">,</span>&nbsp;<span class="ident" id="3687831">rr</span><span class="op" id="3687833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687839">case</span>&nbsp;<span class="ident" id="3687844">dnsTypeCNAME</span><span class="op" id="3687856">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3687863">//&nbsp;redirect&nbsp;to&nbsp;cname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3687889">name</span>&nbsp;<span class="op" id="3687894">=</span>&nbsp;<span class="ident" id="3687896">rr</span><span class="op" id="3687898">.</span><span class="op" id="3687899">(</span><span class="op" id="3687900">*</span><span class="ident" id="3687901">dnsRR_CNAME</span><span class="op" id="3687912">)</span><span class="op" id="3687913">.</span><span class="ident" id="3687914">Cname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687925">continue</span>&nbsp;<span class="ident" id="3687934">Cname</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3687944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3687949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3687953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687957">if</span>&nbsp;<span class="builtinfunc" id="3687960">len</span><span class="op" id="3687963">(</span><span class="ident" id="3687964">addrs</span><span class="op" id="3687969">)</span>&nbsp;<span class="op" id="3687971">==</span>&nbsp;<span class="num" id="3687974">0</span>&nbsp;<span class="op" id="3687976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687981">return</span>&nbsp;<span class="string" id="3687988">&#34;&#34;</span><span class="op" id="3687990">,</span>&nbsp;<span class="builtintype" id="3687992">nil</span><span class="op" id="3687995">,</span>&nbsp;<span class="op" id="3687997">&amp;</span><span class="ident" id="3687998">DNSError</span><span class="op" id="3688006">{</span><span class="ident" id="3688007">Err</span><span class="op" id="3688010">:</span>&nbsp;<span class="ident" id="3688012">noSuchHost</span><span class="op" id="3688022">,</span>&nbsp;<span class="ident" id="3688024">Name</span><span class="op" id="3688028">:</span>&nbsp;<span class="ident" id="3688030">name</span><span class="op" id="3688034">,</span>&nbsp;<span class="ident" id="3688036">Server</span><span class="op" id="3688042">:</span>&nbsp;<span class="ident" id="3688044">server</span><span class="op" id="3688050">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3688054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688058">return</span>&nbsp;<span class="ident" id="3688065">name</span><span class="op" id="3688069">,</span>&nbsp;<span class="ident" id="3688071">addrs</span><span class="op" id="3688076">,</span>&nbsp;<span class="builtintype" id="3688078">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3688083">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688087">return</span>&nbsp;<span class="string" id="3688094">&#34;&#34;</span><span class="op" id="3688096">,</span>&nbsp;<span class="builtintype" id="3688098">nil</span><span class="op" id="3688101">,</span>&nbsp;<span class="op" id="3688103">&amp;</span><span class="ident" id="3688104">DNSError</span><span class="op" id="3688112">{</span><span class="ident" id="3688113">Err</span><span class="op" id="3688116">:</span>&nbsp;<span class="string" id="3688118">&#34;too&nbsp;many&nbsp;redirects&#34;</span><span class="op" id="3688138">,</span>&nbsp;<span class="ident" id="3688140">Name</span><span class="op" id="3688144">:</span>&nbsp;<span class="ident" id="3688146">name</span><span class="op" id="3688150">,</span>&nbsp;<span class="ident" id="3688152">Server</span><span class="op" id="3688158">:</span>&nbsp;<span class="ident" id="3688160">server</span><span class="op" id="3688166">}</span><br>
<span class="lineno">115</span><span class="op" id="3688168">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3688171">func</span>&nbsp;<span class="ident" id="3688176">isDomainName</span><span class="op" id="3688188">(</span><span class="ident" id="3688189">s</span>&nbsp;<span class="builtintype" id="3688191">string</span><span class="op" id="3688197">)</span>&nbsp;<span class="builtintype" id="3688199">bool</span>&nbsp;<span class="op" id="3688204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3688207">//&nbsp;See&nbsp;RFC&nbsp;1035,&nbsp;RFC&nbsp;3696.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688235">if</span>&nbsp;<span class="builtinfunc" id="3688238">len</span><span class="op" id="3688241">(</span><span class="ident" id="3688242">s</span><span class="op" id="3688243">)</span>&nbsp;<span class="op" id="3688245">==</span>&nbsp;<span class="num" id="3688248">0</span>&nbsp;<span class="op" id="3688250">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688254">return</span>&nbsp;<span class="builtintype" id="3688261">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3688268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688271">if</span>&nbsp;<span class="builtinfunc" id="3688274">len</span><span class="op" id="3688277">(</span><span class="ident" id="3688278">s</span><span class="op" id="3688279">)</span>&nbsp;<span class="op" id="3688281">&gt;</span>&nbsp;<span class="num" id="3688283">255</span>&nbsp;<span class="op" id="3688287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688291">return</span>&nbsp;<span class="builtintype" id="3688298">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3688305">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3688309">last</span>&nbsp;<span class="op" id="3688314">:=</span>&nbsp;<span class="builtintype" id="3688317">byte</span><span class="op" id="3688321">(</span><span class="string" id="3688322">&#39;.&#39;</span><span class="op" id="3688325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3688328">ok</span>&nbsp;<span class="op" id="3688331">:=</span>&nbsp;<span class="builtintype" id="3688334">false</span>&nbsp;<span class="comment" id="3688340">//&nbsp;Ok&nbsp;once&nbsp;we&#39;ve&nbsp;seen&nbsp;a&nbsp;letter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3688373">partlen</span>&nbsp;<span class="op" id="3688381">:=</span>&nbsp;<span class="num" id="3688384">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688387">for</span>&nbsp;<span class="ident" id="3688391">i</span>&nbsp;<span class="op" id="3688393">:=</span>&nbsp;<span class="num" id="3688396">0</span><span class="op" id="3688397">;</span>&nbsp;<span class="ident" id="3688399">i</span>&nbsp;<span class="op" id="3688401">&lt;</span>&nbsp;<span class="builtinfunc" id="3688403">len</span><span class="op" id="3688406">(</span><span class="ident" id="3688407">s</span><span class="op" id="3688408">)</span><span class="op" id="3688409">;</span>&nbsp;<span class="ident" id="3688411">i</span><span class="op" id="3688412">++</span>&nbsp;<span class="op" id="3688415">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3688419">c</span>&nbsp;<span class="op" id="3688421">:=</span>&nbsp;<span class="ident" id="3688424">s</span><span class="op" id="3688425">[</span><span class="ident" id="3688426">i</span><span class="op" id="3688427">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688431">switch</span>&nbsp;<span class="op" id="3688438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688442">default</span><span class="op" id="3688449">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688454">return</span>&nbsp;<span class="builtintype" id="3688461">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688469">case</span>&nbsp;<span class="string" id="3688474">&#39;a&#39;</span>&nbsp;<span class="op" id="3688478">&lt;=</span>&nbsp;<span class="ident" id="3688481">c</span>&nbsp;<span class="op" id="3688483">&amp;&amp;</span>&nbsp;<span class="ident" id="3688486">c</span>&nbsp;<span class="op" id="3688488">&lt;=</span>&nbsp;<span class="string" id="3688491">&#39;z&#39;</span>&nbsp;<span class="op" id="3688495">||</span>&nbsp;<span class="string" id="3688498">&#39;A&#39;</span>&nbsp;<span class="op" id="3688502">&lt;=</span>&nbsp;<span class="ident" id="3688505">c</span>&nbsp;<span class="op" id="3688507">&amp;&amp;</span>&nbsp;<span class="ident" id="3688510">c</span>&nbsp;<span class="op" id="3688512">&lt;=</span>&nbsp;<span class="string" id="3688515">&#39;Z&#39;</span>&nbsp;<span class="op" id="3688519">||</span>&nbsp;<span class="ident" id="3688522">c</span>&nbsp;<span class="op" id="3688524">==</span>&nbsp;<span class="string" id="3688527">&#39;_&#39;</span><span class="op" id="3688530">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3688535">ok</span>&nbsp;<span class="op" id="3688538">=</span>&nbsp;<span class="builtintype" id="3688540">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3688548">partlen</span><span class="op" id="3688555">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688560">case</span>&nbsp;<span class="string" id="3688565">&#39;0&#39;</span>&nbsp;<span class="op" id="3688569">&lt;=</span>&nbsp;<span class="ident" id="3688572">c</span>&nbsp;<span class="op" id="3688574">&amp;&amp;</span>&nbsp;<span class="ident" id="3688577">c</span>&nbsp;<span class="op" id="3688579">&lt;=</span>&nbsp;<span class="string" id="3688582">&#39;9&#39;</span><span class="op" id="3688585">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3688590">//&nbsp;fine</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3688601">partlen</span><span class="op" id="3688608">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688613">case</span>&nbsp;<span class="ident" id="3688618">c</span>&nbsp;<span class="op" id="3688620">==</span>&nbsp;<span class="string" id="3688623">&#39;-&#39;</span><span class="op" id="3688626">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3688631">//&nbsp;Byte&nbsp;before&nbsp;dash&nbsp;cannot&nbsp;be&nbsp;dot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688669">if</span>&nbsp;<span class="ident" id="3688672">last</span>&nbsp;<span class="op" id="3688677">==</span>&nbsp;<span class="string" id="3688680">&#39;.&#39;</span>&nbsp;<span class="op" id="3688684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688690">return</span>&nbsp;<span class="builtintype" id="3688697">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3688706">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3688711">partlen</span><span class="op" id="3688718">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688723">case</span>&nbsp;<span class="ident" id="3688728">c</span>&nbsp;<span class="op" id="3688730">==</span>&nbsp;<span class="string" id="3688733">&#39;.&#39;</span><span class="op" id="3688736">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3688741">//&nbsp;Byte&nbsp;before&nbsp;dot&nbsp;cannot&nbsp;be&nbsp;dot,&nbsp;dash.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688784">if</span>&nbsp;<span class="ident" id="3688787">last</span>&nbsp;<span class="op" id="3688792">==</span>&nbsp;<span class="string" id="3688795">&#39;.&#39;</span>&nbsp;<span class="op" id="3688799">||</span>&nbsp;<span class="ident" id="3688802">last</span>&nbsp;<span class="op" id="3688807">==</span>&nbsp;<span class="string" id="3688810">&#39;-&#39;</span>&nbsp;<span class="op" id="3688814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688820">return</span>&nbsp;<span class="builtintype" id="3688827">false</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3688836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688841">if</span>&nbsp;<span class="ident" id="3688844">partlen</span>&nbsp;<span class="op" id="3688852">&gt;</span>&nbsp;<span class="num" id="3688854">63</span>&nbsp;<span class="op" id="3688857">||</span>&nbsp;<span class="ident" id="3688860">partlen</span>&nbsp;<span class="op" id="3688868">==</span>&nbsp;<span class="num" id="3688871">0</span>&nbsp;<span class="op" id="3688873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688879">return</span>&nbsp;<span class="builtintype" id="3688886">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3688895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3688900">partlen</span>&nbsp;<span class="op" id="3688908">=</span>&nbsp;<span class="num" id="3688910">0</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3688914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3688918">last</span>&nbsp;<span class="op" id="3688923">=</span>&nbsp;<span class="ident" id="3688925">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3688928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688931">if</span>&nbsp;<span class="ident" id="3688934">last</span>&nbsp;<span class="op" id="3688939">==</span>&nbsp;<span class="string" id="3688942">&#39;-&#39;</span>&nbsp;<span class="op" id="3688946">||</span>&nbsp;<span class="ident" id="3688949">partlen</span>&nbsp;<span class="op" id="3688957">&gt;</span>&nbsp;<span class="num" id="3688959">63</span>&nbsp;<span class="op" id="3688962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688966">return</span>&nbsp;<span class="builtintype" id="3688973">false</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3688980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688984">return</span>&nbsp;<span class="ident" id="3688991">ok</span><br>
<span class="lineno"></span><span class="op" id="3688994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="3688997">//&nbsp;An&nbsp;SRV&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;SRV&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="3689043">type</span>&nbsp;<span class="ident" id="3689048">SRV</span>&nbsp;<span class="keyword" id="3689052">struct</span>&nbsp;<span class="op" id="3689059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3689062">Target</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3689071">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3689079">Port</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3689088">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3689096">Priority</span>&nbsp;<span class="builtintype" id="3689105">uint16</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3689113">Weight</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3689122">uint16</span><br>
<span class="lineno"></span><span class="op" id="3689129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3689132">//&nbsp;byPriorityWeight&nbsp;sorts&nbsp;SRV&nbsp;records&nbsp;by&nbsp;ascending&nbsp;priority&nbsp;and&nbsp;weight.</span><br>
<span class="lineno"></span><span class="keyword" id="3689204">type</span>&nbsp;<span class="ident" id="3689209">byPriorityWeight</span>&nbsp;<span class="op" id="3689226">[</span><span class="op" id="3689227">]</span><span class="op" id="3689228">*</span><span class="ident" id="3689229">SRV</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="3689234">func</span>&nbsp;<span class="op" id="3689239">(</span><span class="ident" id="3689240">s</span>&nbsp;<span class="ident" id="3689242">byPriorityWeight</span><span class="op" id="3689258">)</span>&nbsp;<span class="ident" id="3689260">Len</span><span class="op" id="3689263">(</span><span class="op" id="3689264">)</span>&nbsp;<span class="builtintype" id="3689266">int</span>&nbsp;<span class="op" id="3689270">{</span>&nbsp;<span class="keyword" id="3689272">return</span>&nbsp;<span class="builtinfunc" id="3689279">len</span><span class="op" id="3689282">(</span><span class="ident" id="3689283">s</span><span class="op" id="3689284">)</span>&nbsp;<span class="op" id="3689286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3689289">func</span>&nbsp;<span class="op" id="3689294">(</span><span class="ident" id="3689295">s</span>&nbsp;<span class="ident" id="3689297">byPriorityWeight</span><span class="op" id="3689313">)</span>&nbsp;<span class="ident" id="3689315">Swap</span><span class="op" id="3689319">(</span><span class="ident" id="3689320">i</span><span class="op" id="3689321">,</span>&nbsp;<span class="ident" id="3689323">j</span>&nbsp;<span class="builtintype" id="3689325">int</span><span class="op" id="3689328">)</span>&nbsp;<span class="op" id="3689330">{</span>&nbsp;<span class="ident" id="3689332">s</span><span class="op" id="3689333">[</span><span class="ident" id="3689334">i</span><span class="op" id="3689335">]</span><span class="op" id="3689336">,</span>&nbsp;<span class="ident" id="3689338">s</span><span class="op" id="3689339">[</span><span class="ident" id="3689340">j</span><span class="op" id="3689341">]</span>&nbsp;<span class="op" id="3689343">=</span>&nbsp;<span class="ident" id="3689345">s</span><span class="op" id="3689346">[</span><span class="ident" id="3689347">j</span><span class="op" id="3689348">]</span><span class="op" id="3689349">,</span>&nbsp;<span class="ident" id="3689351">s</span><span class="op" id="3689352">[</span><span class="ident" id="3689353">i</span><span class="op" id="3689354">]</span>&nbsp;<span class="op" id="3689356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="3689359">func</span>&nbsp;<span class="op" id="3689364">(</span><span class="ident" id="3689365">s</span>&nbsp;<span class="ident" id="3689367">byPriorityWeight</span><span class="op" id="3689383">)</span>&nbsp;<span class="ident" id="3689385">Less</span><span class="op" id="3689389">(</span><span class="ident" id="3689390">i</span><span class="op" id="3689391">,</span>&nbsp;<span class="ident" id="3689393">j</span>&nbsp;<span class="builtintype" id="3689395">int</span><span class="op" id="3689398">)</span>&nbsp;<span class="builtintype" id="3689400">bool</span>&nbsp;<span class="op" id="3689405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3689408">return</span>&nbsp;<span class="ident" id="3689415">s</span><span class="op" id="3689416">[</span><span class="ident" id="3689417">i</span><span class="op" id="3689418">]</span><span class="op" id="3689419">.</span><span class="ident" id="3689420">Priority</span>&nbsp;<span class="op" id="3689429">&lt;</span>&nbsp;<span class="ident" id="3689431">s</span><span class="op" id="3689432">[</span><span class="ident" id="3689433">j</span><span class="op" id="3689434">]</span><span class="op" id="3689435">.</span><span class="ident" id="3689436">Priority</span>&nbsp;<span class="op" id="3689445">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3689450">(</span><span class="ident" id="3689451">s</span><span class="op" id="3689452">[</span><span class="ident" id="3689453">i</span><span class="op" id="3689454">]</span><span class="op" id="3689455">.</span><span class="ident" id="3689456">Priority</span>&nbsp;<span class="op" id="3689465">==</span>&nbsp;<span class="ident" id="3689468">s</span><span class="op" id="3689469">[</span><span class="ident" id="3689470">j</span><span class="op" id="3689471">]</span><span class="op" id="3689472">.</span><span class="ident" id="3689473">Priority</span>&nbsp;<span class="op" id="3689482">&amp;&amp;</span>&nbsp;<span class="ident" id="3689485">s</span><span class="op" id="3689486">[</span><span class="ident" id="3689487">i</span><span class="op" id="3689488">]</span><span class="op" id="3689489">.</span><span class="ident" id="3689490">Weight</span>&nbsp;<span class="op" id="3689497">&lt;</span>&nbsp;<span class="ident" id="3689499">s</span><span class="op" id="3689500">[</span><span class="ident" id="3689501">j</span><span class="op" id="3689502">]</span><span class="op" id="3689503">.</span><span class="ident" id="3689504">Weight</span><span class="op" id="3689510">)</span><br>
<span class="lineno"></span><span class="op" id="3689512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="comment" id="3689515">//&nbsp;shuffleByWeight&nbsp;shuffles&nbsp;SRV&nbsp;records&nbsp;by&nbsp;weight&nbsp;using&nbsp;the&nbsp;algorithm</span><br>
<span class="lineno"></span><span class="comment" id="3689585">//&nbsp;described&nbsp;in&nbsp;RFC&nbsp;2782.</span><br>
<span class="lineno"></span><span class="keyword" id="3689611">func</span>&nbsp;<span class="op" id="3689616">(</span><span class="ident" id="3689617">addrs</span>&nbsp;<span class="ident" id="3689623">byPriorityWeight</span><span class="op" id="3689639">)</span>&nbsp;<span class="ident" id="3689641">shuffleByWeight</span><span class="op" id="3689656">(</span><span class="op" id="3689657">)</span>&nbsp;<span class="op" id="3689659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3689662">sum</span>&nbsp;<span class="op" id="3689666">:=</span>&nbsp;<span class="num" id="3689669">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3689672">for</span>&nbsp;<span class="ident" id="3689676">_</span><span class="op" id="3689677">,</span>&nbsp;<span class="ident" id="3689679">addr</span>&nbsp;<span class="op" id="3689684">:=</span>&nbsp;<span class="keyword" id="3689687">range</span>&nbsp;<span class="ident" id="3689693">addrs</span>&nbsp;<span class="op" id="3689699">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3689703">sum</span>&nbsp;<span class="op" id="3689707">+=</span>&nbsp;<span class="builtintype" id="3689710">int</span><span class="op" id="3689713">(</span><span class="ident" id="3689714">addr</span><span class="op" id="3689718">.</span><span class="ident" id="3689719">Weight</span><span class="op" id="3689725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3689728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3689731">for</span>&nbsp;<span class="ident" id="3689735">sum</span>&nbsp;<span class="op" id="3689739">&gt;</span>&nbsp;<span class="num" id="3689741">0</span>&nbsp;<span class="op" id="3689743">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3689746">len</span><span class="op" id="3689749">(</span><span class="ident" id="3689750">addrs</span><span class="op" id="3689755">)</span>&nbsp;<span class="op" id="3689757">&gt;</span>&nbsp;<span class="num" id="3689759">1</span>&nbsp;<span class="op" id="3689761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3689765">s</span>&nbsp;<span class="op" id="3689767">:=</span>&nbsp;<span class="num" id="3689770">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3689774">n</span>&nbsp;<span class="op" id="3689776">:=</span>&nbsp;<span class="ident" id="3689779">rand</span><span class="op" id="3689783">.</span><span class="ident" id="3689784">Intn</span><span class="op" id="3689788">(</span><span class="ident" id="3689789">sum</span><span class="op" id="3689792">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3689796">for</span>&nbsp;<span class="ident" id="3689800">i</span>&nbsp;<span class="op" id="3689802">:=</span>&nbsp;<span class="keyword" id="3689805">range</span>&nbsp;<span class="ident" id="3689811">addrs</span>&nbsp;<span class="op" id="3689817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3689822">s</span>&nbsp;<span class="op" id="3689824">+=</span>&nbsp;<span class="builtintype" id="3689827">int</span><span class="op" id="3689830">(</span><span class="ident" id="3689831">addrs</span><span class="op" id="3689836">[</span><span class="ident" id="3689837">i</span><span class="op" id="3689838">]</span><span class="op" id="3689839">.</span><span class="ident" id="3689840">Weight</span><span class="op" id="3689846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3689851">if</span>&nbsp;<span class="ident" id="3689854">s</span>&nbsp;<span class="op" id="3689856">&gt;</span>&nbsp;<span class="ident" id="3689858">n</span>&nbsp;<span class="op" id="3689860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3689866">if</span>&nbsp;<span class="ident" id="3689869">i</span>&nbsp;<span class="op" id="3689871">&gt;</span>&nbsp;<span class="num" id="3689873">0</span>&nbsp;<span class="op" id="3689875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3689882">addrs</span><span class="op" id="3689887">[</span><span class="num" id="3689888">0</span><span class="op" id="3689889">]</span><span class="op" id="3689890">,</span>&nbsp;<span class="ident" id="3689892">addrs</span><span class="op" id="3689897">[</span><span class="ident" id="3689898">i</span><span class="op" id="3689899">]</span>&nbsp;<span class="op" id="3689901">=</span>&nbsp;<span class="ident" id="3689903">addrs</span><span class="op" id="3689908">[</span><span class="ident" id="3689909">i</span><span class="op" id="3689910">]</span><span class="op" id="3689911">,</span>&nbsp;<span class="ident" id="3689913">addrs</span><span class="op" id="3689918">[</span><span class="num" id="3689919">0</span><span class="op" id="3689920">]</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3689926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3689932">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3689941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3689945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3689949">sum</span>&nbsp;<span class="op" id="3689953">-=</span>&nbsp;<span class="builtintype" id="3689956">int</span><span class="op" id="3689959">(</span><span class="ident" id="3689960">addrs</span><span class="op" id="3689965">[</span><span class="num" id="3689966">0</span><span class="op" id="3689967">]</span><span class="op" id="3689968">.</span><span class="ident" id="3689969">Weight</span><span class="op" id="3689975">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3689979">addrs</span>&nbsp;<span class="op" id="3689985">=</span>&nbsp;<span class="ident" id="3689987">addrs</span><span class="op" id="3689992">[</span><span class="num" id="3689993">1</span><span class="op" id="3689994">:</span><span class="op" id="3689995">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3689998">}</span><br>
<span class="lineno"></span><span class="op" id="3690000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3690003">//&nbsp;sort&nbsp;reorders&nbsp;SRV&nbsp;records&nbsp;as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;2782.</span><br>
<span class="lineno">210</span><span class="keyword" id="3690058">func</span>&nbsp;<span class="op" id="3690063">(</span><span class="ident" id="3690064">addrs</span>&nbsp;<span class="ident" id="3690070">byPriorityWeight</span><span class="op" id="3690086">)</span>&nbsp;<span class="ident" id="3690088">sort</span><span class="op" id="3690092">(</span><span class="op" id="3690093">)</span>&nbsp;<span class="op" id="3690095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3690098">sort</span><span class="op" id="3690102">.</span><span class="ident" id="3690103">Sort</span><span class="op" id="3690107">(</span><span class="ident" id="3690108">addrs</span><span class="op" id="3690113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3690116">i</span>&nbsp;<span class="op" id="3690118">:=</span>&nbsp;<span class="num" id="3690121">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3690124">for</span>&nbsp;<span class="ident" id="3690128">j</span>&nbsp;<span class="op" id="3690130">:=</span>&nbsp;<span class="num" id="3690133">1</span><span class="op" id="3690134">;</span>&nbsp;<span class="ident" id="3690136">j</span>&nbsp;<span class="op" id="3690138">&lt;</span>&nbsp;<span class="builtinfunc" id="3690140">len</span><span class="op" id="3690143">(</span><span class="ident" id="3690144">addrs</span><span class="op" id="3690149">)</span><span class="op" id="3690150">;</span>&nbsp;<span class="ident" id="3690152">j</span><span class="op" id="3690153">++</span>&nbsp;<span class="op" id="3690156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3690160">if</span>&nbsp;<span class="ident" id="3690163">addrs</span><span class="op" id="3690168">[</span><span class="ident" id="3690169">i</span><span class="op" id="3690170">]</span><span class="op" id="3690171">.</span><span class="ident" id="3690172">Priority</span>&nbsp;<span class="op" id="3690181">!=</span>&nbsp;<span class="ident" id="3690184">addrs</span><span class="op" id="3690189">[</span><span class="ident" id="3690190">j</span><span class="op" id="3690191">]</span><span class="op" id="3690192">.</span><span class="ident" id="3690193">Priority</span>&nbsp;<span class="op" id="3690202">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3690207">addrs</span><span class="op" id="3690212">[</span><span class="ident" id="3690213">i</span><span class="op" id="3690214">:</span><span class="ident" id="3690215">j</span><span class="op" id="3690216">]</span><span class="op" id="3690217">.</span><span class="ident" id="3690218">shuffleByWeight</span><span class="op" id="3690233">(</span><span class="op" id="3690234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3690239">i</span>&nbsp;<span class="op" id="3690241">=</span>&nbsp;<span class="ident" id="3690243">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3690247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3690250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3690253">addrs</span><span class="op" id="3690258">[</span><span class="ident" id="3690259">i</span><span class="op" id="3690260">:</span><span class="op" id="3690261">]</span><span class="op" id="3690262">.</span><span class="ident" id="3690263">shuffleByWeight</span><span class="op" id="3690278">(</span><span class="op" id="3690279">)</span><br>
<span class="lineno">220</span><span class="op" id="3690281">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3690284">//&nbsp;An&nbsp;MX&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;MX&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="3690328">type</span>&nbsp;<span class="ident" id="3690333">MX</span>&nbsp;<span class="keyword" id="3690336">struct</span>&nbsp;<span class="op" id="3690343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3690346">Host</span>&nbsp;<span class="builtintype" id="3690351">string</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3690359">Pref</span>&nbsp;<span class="builtintype" id="3690364">uint16</span><br>
<span class="lineno"></span><span class="op" id="3690371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3690374">//&nbsp;byPref&nbsp;implements&nbsp;sort.Interface&nbsp;to&nbsp;sort&nbsp;MX&nbsp;records&nbsp;by&nbsp;preference</span><br>
<span class="lineno"></span><span class="keyword" id="3690443">type</span>&nbsp;<span class="ident" id="3690448">byPref</span>&nbsp;<span class="op" id="3690455">[</span><span class="op" id="3690456">]</span><span class="op" id="3690457">*</span><span class="ident" id="3690458">MX</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="3690462">func</span>&nbsp;<span class="op" id="3690467">(</span><span class="ident" id="3690468">s</span>&nbsp;<span class="ident" id="3690470">byPref</span><span class="op" id="3690476">)</span>&nbsp;<span class="ident" id="3690478">Len</span><span class="op" id="3690481">(</span><span class="op" id="3690482">)</span>&nbsp;<span class="builtintype" id="3690484">int</span>&nbsp;<span class="op" id="3690488">{</span>&nbsp;<span class="keyword" id="3690490">return</span>&nbsp;<span class="builtinfunc" id="3690497">len</span><span class="op" id="3690500">(</span><span class="ident" id="3690501">s</span><span class="op" id="3690502">)</span>&nbsp;<span class="op" id="3690504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3690507">func</span>&nbsp;<span class="op" id="3690512">(</span><span class="ident" id="3690513">s</span>&nbsp;<span class="ident" id="3690515">byPref</span><span class="op" id="3690521">)</span>&nbsp;<span class="ident" id="3690523">Less</span><span class="op" id="3690527">(</span><span class="ident" id="3690528">i</span><span class="op" id="3690529">,</span>&nbsp;<span class="ident" id="3690531">j</span>&nbsp;<span class="builtintype" id="3690533">int</span><span class="op" id="3690536">)</span>&nbsp;<span class="builtintype" id="3690538">bool</span>&nbsp;<span class="op" id="3690543">{</span>&nbsp;<span class="keyword" id="3690545">return</span>&nbsp;<span class="ident" id="3690552">s</span><span class="op" id="3690553">[</span><span class="ident" id="3690554">i</span><span class="op" id="3690555">]</span><span class="op" id="3690556">.</span><span class="ident" id="3690557">Pref</span>&nbsp;<span class="op" id="3690562">&lt;</span>&nbsp;<span class="ident" id="3690564">s</span><span class="op" id="3690565">[</span><span class="ident" id="3690566">j</span><span class="op" id="3690567">]</span><span class="op" id="3690568">.</span><span class="ident" id="3690569">Pref</span>&nbsp;<span class="op" id="3690574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="3690577">func</span>&nbsp;<span class="op" id="3690582">(</span><span class="ident" id="3690583">s</span>&nbsp;<span class="ident" id="3690585">byPref</span><span class="op" id="3690591">)</span>&nbsp;<span class="ident" id="3690593">Swap</span><span class="op" id="3690597">(</span><span class="ident" id="3690598">i</span><span class="op" id="3690599">,</span>&nbsp;<span class="ident" id="3690601">j</span>&nbsp;<span class="builtintype" id="3690603">int</span><span class="op" id="3690606">)</span>&nbsp;<span class="op" id="3690608">{</span>&nbsp;<span class="ident" id="3690610">s</span><span class="op" id="3690611">[</span><span class="ident" id="3690612">i</span><span class="op" id="3690613">]</span><span class="op" id="3690614">,</span>&nbsp;<span class="ident" id="3690616">s</span><span class="op" id="3690617">[</span><span class="ident" id="3690618">j</span><span class="op" id="3690619">]</span>&nbsp;<span class="op" id="3690621">=</span>&nbsp;<span class="ident" id="3690623">s</span><span class="op" id="3690624">[</span><span class="ident" id="3690625">j</span><span class="op" id="3690626">]</span><span class="op" id="3690627">,</span>&nbsp;<span class="ident" id="3690629">s</span><span class="op" id="3690630">[</span><span class="ident" id="3690631">i</span><span class="op" id="3690632">]</span>&nbsp;<span class="op" id="3690634">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3690637">//&nbsp;sort&nbsp;reorders&nbsp;MX&nbsp;records&nbsp;as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;5321.</span><br>
<span class="lineno"></span><span class="keyword" id="3690691">func</span>&nbsp;<span class="op" id="3690696">(</span><span class="ident" id="3690697">s</span>&nbsp;<span class="ident" id="3690699">byPref</span><span class="op" id="3690705">)</span>&nbsp;<span class="ident" id="3690707">sort</span><span class="op" id="3690711">(</span><span class="op" id="3690712">)</span>&nbsp;<span class="op" id="3690714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3690717">for</span>&nbsp;<span class="ident" id="3690721">i</span>&nbsp;<span class="op" id="3690723">:=</span>&nbsp;<span class="keyword" id="3690726">range</span>&nbsp;<span class="ident" id="3690732">s</span>&nbsp;<span class="op" id="3690734">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3690738">j</span>&nbsp;<span class="op" id="3690740">:=</span>&nbsp;<span class="ident" id="3690743">rand</span><span class="op" id="3690747">.</span><span class="ident" id="3690748">Intn</span><span class="op" id="3690752">(</span><span class="ident" id="3690753">i</span>&nbsp;<span class="op" id="3690755">+</span>&nbsp;<span class="num" id="3690757">1</span><span class="op" id="3690758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3690762">s</span><span class="op" id="3690763">[</span><span class="ident" id="3690764">i</span><span class="op" id="3690765">]</span><span class="op" id="3690766">,</span>&nbsp;<span class="ident" id="3690768">s</span><span class="op" id="3690769">[</span><span class="ident" id="3690770">j</span><span class="op" id="3690771">]</span>&nbsp;<span class="op" id="3690773">=</span>&nbsp;<span class="ident" id="3690775">s</span><span class="op" id="3690776">[</span><span class="ident" id="3690777">j</span><span class="op" id="3690778">]</span><span class="op" id="3690779">,</span>&nbsp;<span class="ident" id="3690781">s</span><span class="op" id="3690782">[</span><span class="ident" id="3690783">i</span><span class="op" id="3690784">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3690787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3690790">sort</span><span class="op" id="3690794">.</span><span class="ident" id="3690795">Sort</span><span class="op" id="3690799">(</span><span class="ident" id="3690800">s</span><span class="op" id="3690801">)</span><br>
<span class="lineno"></span><span class="op" id="3690803">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="comment" id="3690806">//&nbsp;An&nbsp;NS&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;NS&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="3690850">type</span>&nbsp;<span class="ident" id="3690855">NS</span>&nbsp;<span class="keyword" id="3690858">struct</span>&nbsp;<span class="op" id="3690865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3690868">Host</span>&nbsp;<span class="builtintype" id="3690873">string</span><br>
<span class="lineno"></span><span class="op" id="3690880">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
