<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>time</h2>
<ul>
<li><a href="/gostd/time/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/time/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/time/format.go.html">format.go</a></li>
<li><a href="/gostd/time/format_test.go.html">format_test.go</a></li>
<li><a href="/gostd/time/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/time/sleep.go.html">sleep.go</a></li>
<li><a href="/gostd/time/sleep_test.go.html">sleep_test.go</a></li>
<li><a href="/gostd/time/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/time/tick.go.html">tick.go</a></li>
<li><a href="/gostd/time/tick_test.go.html">tick_test.go</a></li>
<li><a href="/gostd/time/time.go.html">time.go</a></li>
<li><a href="/gostd/time/time_test.go.html">time_test.go</a></li>
<li><a href="/gostd/time/zoneinfo.go.html">zoneinfo.go</a></li>
<li><a href="/gostd/time/zoneinfo_read.go.html" class="current">zoneinfo_read.go</a></li>
<li><a href="/gostd/time/zoneinfo_test.go.html">zoneinfo_test.go</a></li>
<li><a href="/gostd/time/zoneinfo_unix.go.html">zoneinfo_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2655916">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2655971">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2656025">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2656076">//&nbsp;Parse&nbsp;&#34;zoneinfo&#34;&nbsp;time&nbsp;zone&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="2656112">//&nbsp;This&nbsp;is&nbsp;a&nbsp;fairly&nbsp;standard&nbsp;file&nbsp;format&nbsp;used&nbsp;on&nbsp;OS&nbsp;X,&nbsp;Linux,&nbsp;BSD,&nbsp;Sun,&nbsp;and&nbsp;others.</span><br>
<span class="lineno"></span><span class="comment" id="2656196">//&nbsp;See&nbsp;tzfile(5),&nbsp;http://en.wikipedia.org/wiki/Zoneinfo,</span><br>
<span class="lineno"></span><span class="comment" id="2656253">//&nbsp;and&nbsp;ftp://munnari.oz.au/pub/oldtz/</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="2656292">package</span>&nbsp;<span class="ident" id="2656300">time</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2656306">import</span>&nbsp;<span class="string" id="2656313">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2656323">//&nbsp;Simple&nbsp;I/O&nbsp;interface&nbsp;to&nbsp;binary&nbsp;blob&nbsp;of&nbsp;data.</span><br>
<span class="lineno">15</span><span class="keyword" id="2656371">type</span>&nbsp;<span class="ident" id="2656376">data</span>&nbsp;<span class="keyword" id="2656381">struct</span>&nbsp;<span class="op" id="2656388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2656391">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2656397">[</span><span class="op" id="2656398">]</span><span class="builtintype" id="2656399">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2656405">error</span>&nbsp;<span class="builtintype" id="2656411">bool</span><br>
<span class="lineno"></span><span class="op" id="2656416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="2656419">func</span>&nbsp;<span class="op" id="2656424">(</span><span class="ident" id="2656425">d</span>&nbsp;<span class="op" id="2656427">*</span><span class="ident" id="2656428">data</span><span class="op" id="2656432">)</span>&nbsp;<span class="ident" id="2656434">read</span><span class="op" id="2656438">(</span><span class="ident" id="2656439">n</span>&nbsp;<span class="builtintype" id="2656441">int</span><span class="op" id="2656444">)</span>&nbsp;<span class="op" id="2656446">[</span><span class="op" id="2656447">]</span><span class="builtintype" id="2656448">byte</span>&nbsp;<span class="op" id="2656453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2656456">if</span>&nbsp;<span class="builtinfunc" id="2656459">len</span><span class="op" id="2656462">(</span><span class="ident" id="2656463">d</span><span class="op" id="2656464">.</span><span class="ident" id="2656465">p</span><span class="op" id="2656466">)</span>&nbsp;<span class="op" id="2656468">&lt;</span>&nbsp;<span class="ident" id="2656470">n</span>&nbsp;<span class="op" id="2656472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2656476">d</span><span class="op" id="2656477">.</span><span class="ident" id="2656478">p</span>&nbsp;<span class="op" id="2656480">=</span>&nbsp;<span class="builtintype" id="2656482">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2656488">d</span><span class="op" id="2656489">.</span><span class="builtintype" id="2656490">error</span>&nbsp;<span class="op" id="2656496">=</span>&nbsp;<span class="builtintype" id="2656498">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2656505">return</span>&nbsp;<span class="builtintype" id="2656512">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2656517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2656520">p</span>&nbsp;<span class="op" id="2656522">:=</span>&nbsp;<span class="ident" id="2656525">d</span><span class="op" id="2656526">.</span><span class="ident" id="2656527">p</span><span class="op" id="2656528">[</span><span class="num" id="2656529">0</span><span class="op" id="2656530">:</span><span class="ident" id="2656531">n</span><span class="op" id="2656532">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2656535">d</span><span class="op" id="2656536">.</span><span class="ident" id="2656537">p</span>&nbsp;<span class="op" id="2656539">=</span>&nbsp;<span class="ident" id="2656541">d</span><span class="op" id="2656542">.</span><span class="ident" id="2656543">p</span><span class="op" id="2656544">[</span><span class="ident" id="2656545">n</span><span class="op" id="2656546">:</span><span class="op" id="2656547">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2656550">return</span>&nbsp;<span class="ident" id="2656557">p</span><br>
<span class="lineno"></span><span class="op" id="2656559">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="2656562">func</span>&nbsp;<span class="op" id="2656567">(</span><span class="ident" id="2656568">d</span>&nbsp;<span class="op" id="2656570">*</span><span class="ident" id="2656571">data</span><span class="op" id="2656575">)</span>&nbsp;<span class="ident" id="2656577">big4</span><span class="op" id="2656581">(</span><span class="op" id="2656582">)</span>&nbsp;<span class="op" id="2656584">(</span><span class="ident" id="2656585">n</span>&nbsp;<span class="builtintype" id="2656587">uint32</span><span class="op" id="2656593">,</span>&nbsp;<span class="ident" id="2656595">ok</span>&nbsp;<span class="builtintype" id="2656598">bool</span><span class="op" id="2656602">)</span>&nbsp;<span class="op" id="2656604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2656607">p</span>&nbsp;<span class="op" id="2656609">:=</span>&nbsp;<span class="ident" id="2656612">d</span><span class="op" id="2656613">.</span><span class="ident" id="2656614">read</span><span class="op" id="2656618">(</span><span class="num" id="2656619">4</span><span class="op" id="2656620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2656623">if</span>&nbsp;<span class="builtinfunc" id="2656626">len</span><span class="op" id="2656629">(</span><span class="ident" id="2656630">p</span><span class="op" id="2656631">)</span>&nbsp;<span class="op" id="2656633">&lt;</span>&nbsp;<span class="num" id="2656635">4</span>&nbsp;<span class="op" id="2656637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2656641">d</span><span class="op" id="2656642">.</span><span class="builtintype" id="2656643">error</span>&nbsp;<span class="op" id="2656649">=</span>&nbsp;<span class="builtintype" id="2656651">true</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2656658">return</span>&nbsp;<span class="num" id="2656665">0</span><span class="op" id="2656666">,</span>&nbsp;<span class="builtintype" id="2656668">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2656675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2656678">return</span>&nbsp;<span class="builtintype" id="2656685">uint32</span><span class="op" id="2656691">(</span><span class="ident" id="2656692">p</span><span class="op" id="2656693">[</span><span class="num" id="2656694">0</span><span class="op" id="2656695">]</span><span class="op" id="2656696">)</span><span class="op" id="2656697">&lt;&lt;</span><span class="num" id="2656699">24</span>&nbsp;<span class="op" id="2656702">|</span>&nbsp;<span class="builtintype" id="2656704">uint32</span><span class="op" id="2656710">(</span><span class="ident" id="2656711">p</span><span class="op" id="2656712">[</span><span class="num" id="2656713">1</span><span class="op" id="2656714">]</span><span class="op" id="2656715">)</span><span class="op" id="2656716">&lt;&lt;</span><span class="num" id="2656718">16</span>&nbsp;<span class="op" id="2656721">|</span>&nbsp;<span class="builtintype" id="2656723">uint32</span><span class="op" id="2656729">(</span><span class="ident" id="2656730">p</span><span class="op" id="2656731">[</span><span class="num" id="2656732">2</span><span class="op" id="2656733">]</span><span class="op" id="2656734">)</span><span class="op" id="2656735">&lt;&lt;</span><span class="num" id="2656737">8</span>&nbsp;<span class="op" id="2656739">|</span>&nbsp;<span class="builtintype" id="2656741">uint32</span><span class="op" id="2656747">(</span><span class="ident" id="2656748">p</span><span class="op" id="2656749">[</span><span class="num" id="2656750">3</span><span class="op" id="2656751">]</span><span class="op" id="2656752">)</span><span class="op" id="2656753">,</span>&nbsp;<span class="builtintype" id="2656755">true</span><br>
<span class="lineno"></span><span class="op" id="2656760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="2656763">func</span>&nbsp;<span class="op" id="2656768">(</span><span class="ident" id="2656769">d</span>&nbsp;<span class="op" id="2656771">*</span><span class="ident" id="2656772">data</span><span class="op" id="2656776">)</span>&nbsp;<span class="builtintype" id="2656778">byte</span><span class="op" id="2656782">(</span><span class="op" id="2656783">)</span>&nbsp;<span class="op" id="2656785">(</span><span class="ident" id="2656786">n</span>&nbsp;<span class="builtintype" id="2656788">byte</span><span class="op" id="2656792">,</span>&nbsp;<span class="ident" id="2656794">ok</span>&nbsp;<span class="builtintype" id="2656797">bool</span><span class="op" id="2656801">)</span>&nbsp;<span class="op" id="2656803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2656806">p</span>&nbsp;<span class="op" id="2656808">:=</span>&nbsp;<span class="ident" id="2656811">d</span><span class="op" id="2656812">.</span><span class="ident" id="2656813">read</span><span class="op" id="2656817">(</span><span class="num" id="2656818">1</span><span class="op" id="2656819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2656822">if</span>&nbsp;<span class="builtinfunc" id="2656825">len</span><span class="op" id="2656828">(</span><span class="ident" id="2656829">p</span><span class="op" id="2656830">)</span>&nbsp;<span class="op" id="2656832">&lt;</span>&nbsp;<span class="num" id="2656834">1</span>&nbsp;<span class="op" id="2656836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2656840">d</span><span class="op" id="2656841">.</span><span class="builtintype" id="2656842">error</span>&nbsp;<span class="op" id="2656848">=</span>&nbsp;<span class="builtintype" id="2656850">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2656857">return</span>&nbsp;<span class="num" id="2656864">0</span><span class="op" id="2656865">,</span>&nbsp;<span class="builtintype" id="2656867">false</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2656874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2656877">return</span>&nbsp;<span class="ident" id="2656884">p</span><span class="op" id="2656885">[</span><span class="num" id="2656886">0</span><span class="op" id="2656887">]</span><span class="op" id="2656888">,</span>&nbsp;<span class="builtintype" id="2656890">true</span><br>
<span class="lineno"></span><span class="op" id="2656895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2656898">//&nbsp;Make&nbsp;a&nbsp;string&nbsp;by&nbsp;stopping&nbsp;at&nbsp;the&nbsp;first&nbsp;NUL</span><br>
<span class="lineno">50</span><span class="keyword" id="2656944">func</span>&nbsp;<span class="ident" id="2656949">byteString</span><span class="op" id="2656959">(</span><span class="ident" id="2656960">p</span>&nbsp;<span class="op" id="2656962">[</span><span class="op" id="2656963">]</span><span class="builtintype" id="2656964">byte</span><span class="op" id="2656968">)</span>&nbsp;<span class="builtintype" id="2656970">string</span>&nbsp;<span class="op" id="2656977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2656980">for</span>&nbsp;<span class="ident" id="2656984">i</span>&nbsp;<span class="op" id="2656986">:=</span>&nbsp;<span class="num" id="2656989">0</span><span class="op" id="2656990">;</span>&nbsp;<span class="ident" id="2656992">i</span>&nbsp;<span class="op" id="2656994">&lt;</span>&nbsp;<span class="builtinfunc" id="2656996">len</span><span class="op" id="2656999">(</span><span class="ident" id="2657000">p</span><span class="op" id="2657001">)</span><span class="op" id="2657002">;</span>&nbsp;<span class="ident" id="2657004">i</span><span class="op" id="2657005">++</span>&nbsp;<span class="op" id="2657008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2657012">if</span>&nbsp;<span class="ident" id="2657015">p</span><span class="op" id="2657016">[</span><span class="ident" id="2657017">i</span><span class="op" id="2657018">]</span>&nbsp;<span class="op" id="2657020">==</span>&nbsp;<span class="num" id="2657023">0</span>&nbsp;<span class="op" id="2657025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2657030">return</span>&nbsp;<span class="builtintype" id="2657037">string</span><span class="op" id="2657043">(</span><span class="ident" id="2657044">p</span><span class="op" id="2657045">[</span><span class="num" id="2657046">0</span><span class="op" id="2657047">:</span><span class="ident" id="2657048">i</span><span class="op" id="2657049">]</span><span class="op" id="2657050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2657054">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2657057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2657060">return</span>&nbsp;<span class="builtintype" id="2657067">string</span><span class="op" id="2657073">(</span><span class="ident" id="2657074">p</span><span class="op" id="2657075">)</span><br>
<span class="lineno"></span><span class="op" id="2657077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2657080">var</span>&nbsp;<span class="ident" id="2657084">badData</span>&nbsp;<span class="op" id="2657092">=</span>&nbsp;<span class="ident" id="2657094">errors</span><span class="op" id="2657100">.</span><span class="ident" id="2657101">New</span><span class="op" id="2657104">(</span><span class="string" id="2657105">&#34;malformed&nbsp;time&nbsp;zone&nbsp;information&#34;</span><span class="op" id="2657138">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2657141">func</span>&nbsp;<span class="ident" id="2657146">loadZoneData</span><span class="op" id="2657158">(</span><span class="ident" id="2657159">bytes</span>&nbsp;<span class="op" id="2657165">[</span><span class="op" id="2657166">]</span><span class="builtintype" id="2657167">byte</span><span class="op" id="2657171">)</span>&nbsp;<span class="op" id="2657173">(</span><span class="ident" id="2657174">l</span>&nbsp;<span class="op" id="2657176">*</span><span class="ident" id="2657177">Location</span><span class="op" id="2657185">,</span>&nbsp;<span class="ident" id="2657187">err</span>&nbsp;<span class="builtintype" id="2657191">error</span><span class="op" id="2657196">)</span>&nbsp;<span class="op" id="2657198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2657201">d</span>&nbsp;<span class="op" id="2657203">:=</span>&nbsp;<span class="ident" id="2657206">data</span><span class="op" id="2657210">{</span><span class="ident" id="2657211">bytes</span><span class="op" id="2657216">,</span>&nbsp;<span class="builtintype" id="2657218">false</span><span class="op" id="2657223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2657227">//&nbsp;4-byte&nbsp;magic&nbsp;&#34;TZif&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2657251">if</span>&nbsp;<span class="ident" id="2657254">magic</span>&nbsp;<span class="op" id="2657260">:=</span>&nbsp;<span class="ident" id="2657263">d</span><span class="op" id="2657264">.</span><span class="ident" id="2657265">read</span><span class="op" id="2657269">(</span><span class="num" id="2657270">4</span><span class="op" id="2657271">)</span><span class="op" id="2657272">;</span>&nbsp;<span class="builtintype" id="2657274">string</span><span class="op" id="2657280">(</span><span class="ident" id="2657281">magic</span><span class="op" id="2657286">)</span>&nbsp;<span class="op" id="2657288">!=</span>&nbsp;<span class="string" id="2657291">&#34;TZif&#34;</span>&nbsp;<span class="op" id="2657298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2657302">return</span>&nbsp;<span class="builtintype" id="2657309">nil</span><span class="op" id="2657312">,</span>&nbsp;<span class="ident" id="2657314">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2657323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2657327">//&nbsp;1-byte&nbsp;version,&nbsp;then&nbsp;15&nbsp;bytes&nbsp;of&nbsp;padding</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2657372">var</span>&nbsp;<span class="ident" id="2657376">p</span>&nbsp;<span class="op" id="2657378">[</span><span class="op" id="2657379">]</span><span class="builtintype" id="2657380">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2657386">if</span>&nbsp;<span class="ident" id="2657389">p</span>&nbsp;<span class="op" id="2657391">=</span>&nbsp;<span class="ident" id="2657393">d</span><span class="op" id="2657394">.</span><span class="ident" id="2657395">read</span><span class="op" id="2657399">(</span><span class="num" id="2657400">16</span><span class="op" id="2657402">)</span><span class="op" id="2657403">;</span>&nbsp;<span class="builtinfunc" id="2657405">len</span><span class="op" id="2657408">(</span><span class="ident" id="2657409">p</span><span class="op" id="2657410">)</span>&nbsp;<span class="op" id="2657412">!=</span>&nbsp;<span class="num" id="2657415">16</span>&nbsp;<span class="op" id="2657418">||</span>&nbsp;<span class="ident" id="2657421">p</span><span class="op" id="2657422">[</span><span class="num" id="2657423">0</span><span class="op" id="2657424">]</span>&nbsp;<span class="op" id="2657426">!=</span>&nbsp;<span class="num" id="2657429">0</span>&nbsp;<span class="op" id="2657431">&amp;&amp;</span>&nbsp;<span class="ident" id="2657434">p</span><span class="op" id="2657435">[</span><span class="num" id="2657436">0</span><span class="op" id="2657437">]</span>&nbsp;<span class="op" id="2657439">!=</span>&nbsp;<span class="string" id="2657442">&#39;2&#39;</span>&nbsp;<span class="op" id="2657446">&amp;&amp;</span>&nbsp;<span class="ident" id="2657449">p</span><span class="op" id="2657450">[</span><span class="num" id="2657451">0</span><span class="op" id="2657452">]</span>&nbsp;<span class="op" id="2657454">!=</span>&nbsp;<span class="string" id="2657457">&#39;3&#39;</span>&nbsp;<span class="op" id="2657461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2657465">return</span>&nbsp;<span class="builtintype" id="2657472">nil</span><span class="op" id="2657475">,</span>&nbsp;<span class="ident" id="2657477">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2657486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2657490">//&nbsp;six&nbsp;big-endian&nbsp;32-bit&nbsp;integers:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2657526">//&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;of&nbsp;UTC/local&nbsp;indicators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2657561">//&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;of&nbsp;standard/wall&nbsp;indicators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2657600">//&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;of&nbsp;leap&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2657627">//&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;of&nbsp;transition&nbsp;times</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2657658">//&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;of&nbsp;local&nbsp;time&nbsp;zones</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2657689">//&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;of&nbsp;characters&nbsp;of&nbsp;time&nbsp;zone&nbsp;abbrev&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2657742">const</span>&nbsp;<span class="op" id="2657748">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2657752">NUTCLocal</span>&nbsp;<span class="op" id="2657762">=</span>&nbsp;<span class="ident" id="2657764">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2657771">NStdWall</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2657782">NLeap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2657790">NTime</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2657798">NZone</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2657806">NChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2657813">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2657816">var</span>&nbsp;<span class="ident" id="2657820">n</span>&nbsp;<span class="op" id="2657822">[</span><span class="num" id="2657823">6</span><span class="op" id="2657824">]</span><span class="builtintype" id="2657825">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2657830">for</span>&nbsp;<span class="ident" id="2657834">i</span>&nbsp;<span class="op" id="2657836">:=</span>&nbsp;<span class="num" id="2657839">0</span><span class="op" id="2657840">;</span>&nbsp;<span class="ident" id="2657842">i</span>&nbsp;<span class="op" id="2657844">&lt;</span>&nbsp;<span class="num" id="2657846">6</span><span class="op" id="2657847">;</span>&nbsp;<span class="ident" id="2657849">i</span><span class="op" id="2657850">++</span>&nbsp;<span class="op" id="2657853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2657857">nn</span><span class="op" id="2657859">,</span>&nbsp;<span class="ident" id="2657861">ok</span>&nbsp;<span class="op" id="2657864">:=</span>&nbsp;<span class="ident" id="2657867">d</span><span class="op" id="2657868">.</span><span class="ident" id="2657869">big4</span><span class="op" id="2657873">(</span><span class="op" id="2657874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2657878">if</span>&nbsp;<span class="op" id="2657881">!</span><span class="ident" id="2657882">ok</span>&nbsp;<span class="op" id="2657885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2657890">return</span>&nbsp;<span class="builtintype" id="2657897">nil</span><span class="op" id="2657900">,</span>&nbsp;<span class="ident" id="2657902">badData</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2657912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2657916">n</span><span class="op" id="2657917">[</span><span class="ident" id="2657918">i</span><span class="op" id="2657919">]</span>&nbsp;<span class="op" id="2657921">=</span>&nbsp;<span class="builtintype" id="2657923">int</span><span class="op" id="2657926">(</span><span class="ident" id="2657927">nn</span><span class="op" id="2657929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2657932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2657936">//&nbsp;Transition&nbsp;times.</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2657958">txtimes</span>&nbsp;<span class="op" id="2657966">:=</span>&nbsp;<span class="ident" id="2657969">data</span><span class="op" id="2657973">{</span><span class="ident" id="2657974">d</span><span class="op" id="2657975">.</span><span class="ident" id="2657976">read</span><span class="op" id="2657980">(</span><span class="ident" id="2657981">n</span><span class="op" id="2657982">[</span><span class="ident" id="2657983">NTime</span><span class="op" id="2657988">]</span>&nbsp;<span class="op" id="2657990">*</span>&nbsp;<span class="num" id="2657992">4</span><span class="op" id="2657993">)</span><span class="op" id="2657994">,</span>&nbsp;<span class="builtintype" id="2657996">false</span><span class="op" id="2658001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2658005">//&nbsp;Time&nbsp;zone&nbsp;indices&nbsp;for&nbsp;transition&nbsp;times.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2658049">txzones</span>&nbsp;<span class="op" id="2658057">:=</span>&nbsp;<span class="ident" id="2658060">d</span><span class="op" id="2658061">.</span><span class="ident" id="2658062">read</span><span class="op" id="2658066">(</span><span class="ident" id="2658067">n</span><span class="op" id="2658068">[</span><span class="ident" id="2658069">NTime</span><span class="op" id="2658074">]</span><span class="op" id="2658075">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2658079">//&nbsp;Zone&nbsp;info&nbsp;structures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2658104">zonedata</span>&nbsp;<span class="op" id="2658113">:=</span>&nbsp;<span class="ident" id="2658116">data</span><span class="op" id="2658120">{</span><span class="ident" id="2658121">d</span><span class="op" id="2658122">.</span><span class="ident" id="2658123">read</span><span class="op" id="2658127">(</span><span class="ident" id="2658128">n</span><span class="op" id="2658129">[</span><span class="ident" id="2658130">NZone</span><span class="op" id="2658135">]</span>&nbsp;<span class="op" id="2658137">*</span>&nbsp;<span class="num" id="2658139">6</span><span class="op" id="2658140">)</span><span class="op" id="2658141">,</span>&nbsp;<span class="builtintype" id="2658143">false</span><span class="op" id="2658148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2658152">//&nbsp;Time&nbsp;zone&nbsp;abbreviations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2658181">abbrev</span>&nbsp;<span class="op" id="2658188">:=</span>&nbsp;<span class="ident" id="2658191">d</span><span class="op" id="2658192">.</span><span class="ident" id="2658193">read</span><span class="op" id="2658197">(</span><span class="ident" id="2658198">n</span><span class="op" id="2658199">[</span><span class="ident" id="2658200">NChar</span><span class="op" id="2658205">]</span><span class="op" id="2658206">)</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2658210">//&nbsp;Leap-second&nbsp;time&nbsp;pairs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2658237">d</span><span class="op" id="2658238">.</span><span class="ident" id="2658239">read</span><span class="op" id="2658243">(</span><span class="ident" id="2658244">n</span><span class="op" id="2658245">[</span><span class="ident" id="2658246">NLeap</span><span class="op" id="2658251">]</span>&nbsp;<span class="op" id="2658253">*</span>&nbsp;<span class="num" id="2658255">8</span><span class="op" id="2658256">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2658260">//&nbsp;Whether&nbsp;tx&nbsp;times&nbsp;associated&nbsp;with&nbsp;local&nbsp;time&nbsp;types</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2658314">//&nbsp;are&nbsp;specified&nbsp;as&nbsp;standard&nbsp;time&nbsp;or&nbsp;wall&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2658363">isstd</span>&nbsp;<span class="op" id="2658369">:=</span>&nbsp;<span class="ident" id="2658372">d</span><span class="op" id="2658373">.</span><span class="ident" id="2658374">read</span><span class="op" id="2658378">(</span><span class="ident" id="2658379">n</span><span class="op" id="2658380">[</span><span class="ident" id="2658381">NStdWall</span><span class="op" id="2658389">]</span><span class="op" id="2658390">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2658394">//&nbsp;Whether&nbsp;tx&nbsp;times&nbsp;associated&nbsp;with&nbsp;local&nbsp;time&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2658448">//&nbsp;are&nbsp;specified&nbsp;as&nbsp;UTC&nbsp;or&nbsp;local&nbsp;time.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2658488">isutc</span>&nbsp;<span class="op" id="2658494">:=</span>&nbsp;<span class="ident" id="2658497">d</span><span class="op" id="2658498">.</span><span class="ident" id="2658499">read</span><span class="op" id="2658503">(</span><span class="ident" id="2658504">n</span><span class="op" id="2658505">[</span><span class="ident" id="2658506">NUTCLocal</span><span class="op" id="2658515">]</span><span class="op" id="2658516">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2658520">if</span>&nbsp;<span class="ident" id="2658523">d</span><span class="op" id="2658524">.</span><span class="builtintype" id="2658525">error</span>&nbsp;<span class="op" id="2658531">{</span>&nbsp;<span class="comment" id="2658533">//&nbsp;ran&nbsp;out&nbsp;of&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2658554">return</span>&nbsp;<span class="builtintype" id="2658561">nil</span><span class="op" id="2658564">,</span>&nbsp;<span class="ident" id="2658566">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2658575">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2658579">//&nbsp;If&nbsp;version&nbsp;==&nbsp;2&nbsp;or&nbsp;3,&nbsp;the&nbsp;entire&nbsp;file&nbsp;repeats,&nbsp;this&nbsp;time&nbsp;using</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2658646">//&nbsp;8-byte&nbsp;ints&nbsp;for&nbsp;txtimes&nbsp;and&nbsp;leap&nbsp;seconds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2658692">//&nbsp;We&nbsp;won&#39;t&nbsp;need&nbsp;those&nbsp;until&nbsp;2106.</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2658729">//&nbsp;Now&nbsp;we&nbsp;can&nbsp;build&nbsp;up&nbsp;a&nbsp;useful&nbsp;data&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2658778">//&nbsp;First&nbsp;the&nbsp;zone&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2658810">//&nbsp;&nbsp;&nbsp;&nbsp;utcoff[4]&nbsp;isdst[1]&nbsp;nameindex[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2658846">zone</span>&nbsp;<span class="op" id="2658851">:=</span>&nbsp;<span class="builtinfunc" id="2658854">make</span><span class="op" id="2658858">(</span><span class="op" id="2658859">[</span><span class="op" id="2658860">]</span><span class="ident" id="2658861">zone</span><span class="op" id="2658865">,</span>&nbsp;<span class="ident" id="2658867">n</span><span class="op" id="2658868">[</span><span class="ident" id="2658869">NZone</span><span class="op" id="2658874">]</span><span class="op" id="2658875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2658878">for</span>&nbsp;<span class="ident" id="2658882">i</span>&nbsp;<span class="op" id="2658884">:=</span>&nbsp;<span class="keyword" id="2658887">range</span>&nbsp;<span class="ident" id="2658893">zone</span>&nbsp;<span class="op" id="2658898">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2658902">var</span>&nbsp;<span class="ident" id="2658906">ok</span>&nbsp;<span class="builtintype" id="2658909">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2658916">var</span>&nbsp;<span class="ident" id="2658920">n</span>&nbsp;<span class="builtintype" id="2658922">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2658931">if</span>&nbsp;<span class="ident" id="2658934">n</span><span class="op" id="2658935">,</span>&nbsp;<span class="ident" id="2658937">ok</span>&nbsp;<span class="op" id="2658940">=</span>&nbsp;<span class="ident" id="2658942">zonedata</span><span class="op" id="2658950">.</span><span class="ident" id="2658951">big4</span><span class="op" id="2658955">(</span><span class="op" id="2658956">)</span><span class="op" id="2658957">;</span>&nbsp;<span class="op" id="2658959">!</span><span class="ident" id="2658960">ok</span>&nbsp;<span class="op" id="2658963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2658968">return</span>&nbsp;<span class="builtintype" id="2658975">nil</span><span class="op" id="2658978">,</span>&nbsp;<span class="ident" id="2658980">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2658990">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2658994">zone</span><span class="op" id="2658998">[</span><span class="ident" id="2658999">i</span><span class="op" id="2659000">]</span><span class="op" id="2659001">.</span><span class="ident" id="2659002">offset</span>&nbsp;<span class="op" id="2659009">=</span>&nbsp;<span class="builtintype" id="2659011">int</span><span class="op" id="2659014">(</span><span class="builtintype" id="2659015">int32</span><span class="op" id="2659020">(</span><span class="ident" id="2659021">n</span><span class="op" id="2659022">)</span><span class="op" id="2659023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2659027">var</span>&nbsp;<span class="ident" id="2659031">b</span>&nbsp;<span class="builtintype" id="2659033">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2659040">if</span>&nbsp;<span class="ident" id="2659043">b</span><span class="op" id="2659044">,</span>&nbsp;<span class="ident" id="2659046">ok</span>&nbsp;<span class="op" id="2659049">=</span>&nbsp;<span class="ident" id="2659051">zonedata</span><span class="op" id="2659059">.</span><span class="builtintype" id="2659060">byte</span><span class="op" id="2659064">(</span><span class="op" id="2659065">)</span><span class="op" id="2659066">;</span>&nbsp;<span class="op" id="2659068">!</span><span class="ident" id="2659069">ok</span>&nbsp;<span class="op" id="2659072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2659077">return</span>&nbsp;<span class="builtintype" id="2659084">nil</span><span class="op" id="2659087">,</span>&nbsp;<span class="ident" id="2659089">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2659099">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2659103">zone</span><span class="op" id="2659107">[</span><span class="ident" id="2659108">i</span><span class="op" id="2659109">]</span><span class="op" id="2659110">.</span><span class="ident" id="2659111">isDST</span>&nbsp;<span class="op" id="2659117">=</span>&nbsp;<span class="ident" id="2659119">b</span>&nbsp;<span class="op" id="2659121">!=</span>&nbsp;<span class="num" id="2659124">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2659128">if</span>&nbsp;<span class="ident" id="2659131">b</span><span class="op" id="2659132">,</span>&nbsp;<span class="ident" id="2659134">ok</span>&nbsp;<span class="op" id="2659137">=</span>&nbsp;<span class="ident" id="2659139">zonedata</span><span class="op" id="2659147">.</span><span class="builtintype" id="2659148">byte</span><span class="op" id="2659152">(</span><span class="op" id="2659153">)</span><span class="op" id="2659154">;</span>&nbsp;<span class="op" id="2659156">!</span><span class="ident" id="2659157">ok</span>&nbsp;<span class="op" id="2659160">||</span>&nbsp;<span class="builtintype" id="2659163">int</span><span class="op" id="2659166">(</span><span class="ident" id="2659167">b</span><span class="op" id="2659168">)</span>&nbsp;<span class="op" id="2659170">&gt;=</span>&nbsp;<span class="builtinfunc" id="2659173">len</span><span class="op" id="2659176">(</span><span class="ident" id="2659177">abbrev</span><span class="op" id="2659183">)</span>&nbsp;<span class="op" id="2659185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2659190">return</span>&nbsp;<span class="builtintype" id="2659197">nil</span><span class="op" id="2659200">,</span>&nbsp;<span class="ident" id="2659202">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2659212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2659216">zone</span><span class="op" id="2659220">[</span><span class="ident" id="2659221">i</span><span class="op" id="2659222">]</span><span class="op" id="2659223">.</span><span class="ident" id="2659224">name</span>&nbsp;<span class="op" id="2659229">=</span>&nbsp;<span class="ident" id="2659231">byteString</span><span class="op" id="2659241">(</span><span class="ident" id="2659242">abbrev</span><span class="op" id="2659248">[</span><span class="ident" id="2659249">b</span><span class="op" id="2659250">:</span><span class="op" id="2659251">]</span><span class="op" id="2659252">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2659255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2659259">//&nbsp;Now&nbsp;the&nbsp;transition&nbsp;time&nbsp;info.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2659293">tx</span>&nbsp;<span class="op" id="2659296">:=</span>&nbsp;<span class="builtinfunc" id="2659299">make</span><span class="op" id="2659303">(</span><span class="op" id="2659304">[</span><span class="op" id="2659305">]</span><span class="ident" id="2659306">zoneTrans</span><span class="op" id="2659315">,</span>&nbsp;<span class="ident" id="2659317">n</span><span class="op" id="2659318">[</span><span class="ident" id="2659319">NTime</span><span class="op" id="2659324">]</span><span class="op" id="2659325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2659328">for</span>&nbsp;<span class="ident" id="2659332">i</span>&nbsp;<span class="op" id="2659334">:=</span>&nbsp;<span class="keyword" id="2659337">range</span>&nbsp;<span class="ident" id="2659343">tx</span>&nbsp;<span class="op" id="2659346">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2659350">var</span>&nbsp;<span class="ident" id="2659354">ok</span>&nbsp;<span class="builtintype" id="2659357">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2659364">var</span>&nbsp;<span class="ident" id="2659368">n</span>&nbsp;<span class="builtintype" id="2659370">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2659379">if</span>&nbsp;<span class="ident" id="2659382">n</span><span class="op" id="2659383">,</span>&nbsp;<span class="ident" id="2659385">ok</span>&nbsp;<span class="op" id="2659388">=</span>&nbsp;<span class="ident" id="2659390">txtimes</span><span class="op" id="2659397">.</span><span class="ident" id="2659398">big4</span><span class="op" id="2659402">(</span><span class="op" id="2659403">)</span><span class="op" id="2659404">;</span>&nbsp;<span class="op" id="2659406">!</span><span class="ident" id="2659407">ok</span>&nbsp;<span class="op" id="2659410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2659415">return</span>&nbsp;<span class="builtintype" id="2659422">nil</span><span class="op" id="2659425">,</span>&nbsp;<span class="ident" id="2659427">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2659437">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2659441">tx</span><span class="op" id="2659443">[</span><span class="ident" id="2659444">i</span><span class="op" id="2659445">]</span><span class="op" id="2659446">.</span><span class="ident" id="2659447">when</span>&nbsp;<span class="op" id="2659452">=</span>&nbsp;<span class="ident" id="2659454">int64</span><span class="op" id="2659459">(</span><span class="builtintype" id="2659460">int32</span><span class="op" id="2659465">(</span><span class="ident" id="2659466">n</span><span class="op" id="2659467">)</span><span class="op" id="2659468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2659472">if</span>&nbsp;<span class="builtintype" id="2659475">int</span><span class="op" id="2659478">(</span><span class="ident" id="2659479">txzones</span><span class="op" id="2659486">[</span><span class="ident" id="2659487">i</span><span class="op" id="2659488">]</span><span class="op" id="2659489">)</span>&nbsp;<span class="op" id="2659491">&gt;=</span>&nbsp;<span class="builtinfunc" id="2659494">len</span><span class="op" id="2659497">(</span><span class="ident" id="2659498">zone</span><span class="op" id="2659502">)</span>&nbsp;<span class="op" id="2659504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2659509">return</span>&nbsp;<span class="builtintype" id="2659516">nil</span><span class="op" id="2659519">,</span>&nbsp;<span class="ident" id="2659521">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2659531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2659535">tx</span><span class="op" id="2659537">[</span><span class="ident" id="2659538">i</span><span class="op" id="2659539">]</span><span class="op" id="2659540">.</span><span class="ident" id="2659541">index</span>&nbsp;<span class="op" id="2659547">=</span>&nbsp;<span class="ident" id="2659549">txzones</span><span class="op" id="2659556">[</span><span class="ident" id="2659557">i</span><span class="op" id="2659558">]</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2659562">if</span>&nbsp;<span class="ident" id="2659565">i</span>&nbsp;<span class="op" id="2659567">&lt;</span>&nbsp;<span class="builtinfunc" id="2659569">len</span><span class="op" id="2659572">(</span><span class="ident" id="2659573">isstd</span><span class="op" id="2659578">)</span>&nbsp;<span class="op" id="2659580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2659585">tx</span><span class="op" id="2659587">[</span><span class="ident" id="2659588">i</span><span class="op" id="2659589">]</span><span class="op" id="2659590">.</span><span class="ident" id="2659591">isstd</span>&nbsp;<span class="op" id="2659597">=</span>&nbsp;<span class="ident" id="2659599">isstd</span><span class="op" id="2659604">[</span><span class="ident" id="2659605">i</span><span class="op" id="2659606">]</span>&nbsp;<span class="op" id="2659608">!=</span>&nbsp;<span class="num" id="2659611">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2659615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2659619">if</span>&nbsp;<span class="ident" id="2659622">i</span>&nbsp;<span class="op" id="2659624">&lt;</span>&nbsp;<span class="builtinfunc" id="2659626">len</span><span class="op" id="2659629">(</span><span class="ident" id="2659630">isutc</span><span class="op" id="2659635">)</span>&nbsp;<span class="op" id="2659637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2659642">tx</span><span class="op" id="2659644">[</span><span class="ident" id="2659645">i</span><span class="op" id="2659646">]</span><span class="op" id="2659647">.</span><span class="ident" id="2659648">isutc</span>&nbsp;<span class="op" id="2659654">=</span>&nbsp;<span class="ident" id="2659656">isutc</span><span class="op" id="2659661">[</span><span class="ident" id="2659662">i</span><span class="op" id="2659663">]</span>&nbsp;<span class="op" id="2659665">!=</span>&nbsp;<span class="num" id="2659668">0</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2659672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2659675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2659679">if</span>&nbsp;<span class="builtinfunc" id="2659682">len</span><span class="op" id="2659685">(</span><span class="ident" id="2659686">tx</span><span class="op" id="2659688">)</span>&nbsp;<span class="op" id="2659690">==</span>&nbsp;<span class="num" id="2659693">0</span>&nbsp;<span class="op" id="2659695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2659699">//&nbsp;Build&nbsp;fake&nbsp;transition&nbsp;to&nbsp;cover&nbsp;all&nbsp;time.</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2659745">//&nbsp;This&nbsp;happens&nbsp;in&nbsp;fixed&nbsp;locations&nbsp;like&nbsp;&#34;Etc/GMT0&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2659799">tx</span>&nbsp;<span class="op" id="2659802">=</span>&nbsp;<span class="builtinfunc" id="2659804">append</span><span class="op" id="2659810">(</span><span class="ident" id="2659811">tx</span><span class="op" id="2659813">,</span>&nbsp;<span class="ident" id="2659815">zoneTrans</span><span class="op" id="2659824">{</span><span class="ident" id="2659825">when</span><span class="op" id="2659829">:</span>&nbsp;<span class="ident" id="2659831">alpha</span><span class="op" id="2659836">,</span>&nbsp;<span class="ident" id="2659838">index</span><span class="op" id="2659843">:</span>&nbsp;<span class="num" id="2659845">0</span><span class="op" id="2659846">}</span><span class="op" id="2659847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2659850">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2659854">//&nbsp;Committed&nbsp;to&nbsp;succeed.</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2659880">l</span>&nbsp;<span class="op" id="2659882">=</span>&nbsp;<span class="op" id="2659884">&amp;</span><span class="ident" id="2659885">Location</span><span class="op" id="2659893">{</span><span class="ident" id="2659894">zone</span><span class="op" id="2659898">:</span>&nbsp;<span class="ident" id="2659900">zone</span><span class="op" id="2659904">,</span>&nbsp;<span class="ident" id="2659906">tx</span><span class="op" id="2659908">:</span>&nbsp;<span class="ident" id="2659910">tx</span><span class="op" id="2659912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2659916">//&nbsp;Fill&nbsp;in&nbsp;the&nbsp;cache&nbsp;with&nbsp;information&nbsp;about&nbsp;right&nbsp;now,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2659972">//&nbsp;since&nbsp;that&nbsp;will&nbsp;be&nbsp;the&nbsp;most&nbsp;common&nbsp;lookup.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2660019">sec</span><span class="op" id="2660022">,</span>&nbsp;<span class="ident" id="2660024">_</span>&nbsp;<span class="op" id="2660026">:=</span>&nbsp;<span class="ident" id="2660029">now</span><span class="op" id="2660032">(</span><span class="op" id="2660033">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2660036">for</span>&nbsp;<span class="ident" id="2660040">i</span>&nbsp;<span class="op" id="2660042">:=</span>&nbsp;<span class="keyword" id="2660045">range</span>&nbsp;<span class="ident" id="2660051">tx</span>&nbsp;<span class="op" id="2660054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2660058">if</span>&nbsp;<span class="ident" id="2660061">tx</span><span class="op" id="2660063">[</span><span class="ident" id="2660064">i</span><span class="op" id="2660065">]</span><span class="op" id="2660066">.</span><span class="ident" id="2660067">when</span>&nbsp;<span class="op" id="2660072">&lt;=</span>&nbsp;<span class="ident" id="2660075">sec</span>&nbsp;<span class="op" id="2660079">&amp;&amp;</span>&nbsp;<span class="op" id="2660082">(</span><span class="ident" id="2660083">i</span><span class="op" id="2660084">+</span><span class="num" id="2660085">1</span>&nbsp;<span class="op" id="2660087">==</span>&nbsp;<span class="builtinfunc" id="2660090">len</span><span class="op" id="2660093">(</span><span class="ident" id="2660094">tx</span><span class="op" id="2660096">)</span>&nbsp;<span class="op" id="2660098">||</span>&nbsp;<span class="ident" id="2660101">sec</span>&nbsp;<span class="op" id="2660105">&lt;</span>&nbsp;<span class="ident" id="2660107">tx</span><span class="op" id="2660109">[</span><span class="ident" id="2660110">i</span><span class="op" id="2660111">+</span><span class="num" id="2660112">1</span><span class="op" id="2660113">]</span><span class="op" id="2660114">.</span><span class="ident" id="2660115">when</span><span class="op" id="2660119">)</span>&nbsp;<span class="op" id="2660121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2660126">l</span><span class="op" id="2660127">.</span><span class="ident" id="2660128">cacheStart</span>&nbsp;<span class="op" id="2660139">=</span>&nbsp;<span class="ident" id="2660141">tx</span><span class="op" id="2660143">[</span><span class="ident" id="2660144">i</span><span class="op" id="2660145">]</span><span class="op" id="2660146">.</span><span class="ident" id="2660147">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2660155">l</span><span class="op" id="2660156">.</span><span class="ident" id="2660157">cacheEnd</span>&nbsp;<span class="op" id="2660166">=</span>&nbsp;<span class="ident" id="2660168">omega</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2660177">if</span>&nbsp;<span class="ident" id="2660180">i</span><span class="op" id="2660181">+</span><span class="num" id="2660182">1</span>&nbsp;<span class="op" id="2660184">&lt;</span>&nbsp;<span class="builtinfunc" id="2660186">len</span><span class="op" id="2660189">(</span><span class="ident" id="2660190">tx</span><span class="op" id="2660192">)</span>&nbsp;<span class="op" id="2660194">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2660200">l</span><span class="op" id="2660201">.</span><span class="ident" id="2660202">cacheEnd</span>&nbsp;<span class="op" id="2660211">=</span>&nbsp;<span class="ident" id="2660213">tx</span><span class="op" id="2660215">[</span><span class="ident" id="2660216">i</span><span class="op" id="2660217">+</span><span class="num" id="2660218">1</span><span class="op" id="2660219">]</span><span class="op" id="2660220">.</span><span class="ident" id="2660221">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2660229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2660234">l</span><span class="op" id="2660235">.</span><span class="ident" id="2660236">cacheZone</span>&nbsp;<span class="op" id="2660246">=</span>&nbsp;<span class="op" id="2660248">&amp;</span><span class="ident" id="2660249">l</span><span class="op" id="2660250">.</span><span class="ident" id="2660251">zone</span><span class="op" id="2660255">[</span><span class="ident" id="2660256">tx</span><span class="op" id="2660258">[</span><span class="ident" id="2660259">i</span><span class="op" id="2660260">]</span><span class="op" id="2660261">.</span><span class="ident" id="2660262">index</span><span class="op" id="2660267">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2660271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2660274">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2660278">return</span>&nbsp;<span class="ident" id="2660285">l</span><span class="op" id="2660286">,</span>&nbsp;<span class="builtintype" id="2660288">nil</span><br>
<span class="lineno"></span><span class="op" id="2660292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2660295">func</span>&nbsp;<span class="ident" id="2660300">loadZoneFile</span><span class="op" id="2660312">(</span><span class="ident" id="2660313">dir</span><span class="op" id="2660316">,</span>&nbsp;<span class="ident" id="2660318">name</span>&nbsp;<span class="builtintype" id="2660323">string</span><span class="op" id="2660329">)</span>&nbsp;<span class="op" id="2660331">(</span><span class="ident" id="2660332">l</span>&nbsp;<span class="op" id="2660334">*</span><span class="ident" id="2660335">Location</span><span class="op" id="2660343">,</span>&nbsp;<span class="ident" id="2660345">err</span>&nbsp;<span class="builtintype" id="2660349">error</span><span class="op" id="2660354">)</span>&nbsp;<span class="op" id="2660356">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2660359">if</span>&nbsp;<span class="builtinfunc" id="2660362">len</span><span class="op" id="2660365">(</span><span class="ident" id="2660366">dir</span><span class="op" id="2660369">)</span>&nbsp;<span class="op" id="2660371">&gt;</span>&nbsp;<span class="num" id="2660373">4</span>&nbsp;<span class="op" id="2660375">&amp;&amp;</span>&nbsp;<span class="ident" id="2660378">dir</span><span class="op" id="2660381">[</span><span class="builtinfunc" id="2660382">len</span><span class="op" id="2660385">(</span><span class="ident" id="2660386">dir</span><span class="op" id="2660389">)</span><span class="op" id="2660390">-</span><span class="num" id="2660391">4</span><span class="op" id="2660392">:</span><span class="op" id="2660393">]</span>&nbsp;<span class="op" id="2660395">==</span>&nbsp;<span class="string" id="2660398">&#34;.zip&#34;</span>&nbsp;<span class="op" id="2660405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2660409">return</span>&nbsp;<span class="ident" id="2660416">loadZoneZip</span><span class="op" id="2660427">(</span><span class="ident" id="2660428">dir</span><span class="op" id="2660431">,</span>&nbsp;<span class="ident" id="2660433">name</span><span class="op" id="2660437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2660440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2660443">if</span>&nbsp;<span class="ident" id="2660446">dir</span>&nbsp;<span class="op" id="2660450">!=</span>&nbsp;<span class="string" id="2660453">&#34;&#34;</span>&nbsp;<span class="op" id="2660456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2660460">name</span>&nbsp;<span class="op" id="2660465">=</span>&nbsp;<span class="ident" id="2660467">dir</span>&nbsp;<span class="op" id="2660471">+</span>&nbsp;<span class="string" id="2660473">&#34;/&#34;</span>&nbsp;<span class="op" id="2660477">+</span>&nbsp;<span class="ident" id="2660479">name</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2660485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2660488">buf</span><span class="op" id="2660491">,</span>&nbsp;<span class="ident" id="2660493">err</span>&nbsp;<span class="op" id="2660497">:=</span>&nbsp;<span class="ident" id="2660500">readFile</span><span class="op" id="2660508">(</span><span class="ident" id="2660509">name</span><span class="op" id="2660513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2660516">if</span>&nbsp;<span class="ident" id="2660519">err</span>&nbsp;<span class="op" id="2660523">!=</span>&nbsp;<span class="builtintype" id="2660526">nil</span>&nbsp;<span class="op" id="2660530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2660534">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2660542">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2660545">return</span>&nbsp;<span class="ident" id="2660552">loadZoneData</span><span class="op" id="2660564">(</span><span class="ident" id="2660565">buf</span><span class="op" id="2660568">)</span><br>
<span class="lineno"></span><span class="op" id="2660570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2660573">//&nbsp;There&nbsp;are&nbsp;500+&nbsp;zoneinfo&nbsp;files.&nbsp;&nbsp;Rather&nbsp;than&nbsp;distribute&nbsp;them&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2660640">//&nbsp;individually,&nbsp;we&nbsp;ship&nbsp;them&nbsp;in&nbsp;an&nbsp;uncompressed&nbsp;zip&nbsp;file.</span><br>
<span class="lineno">215</span><span class="comment" id="2660699">//&nbsp;Used&nbsp;this&nbsp;way,&nbsp;the&nbsp;zip&nbsp;file&nbsp;format&nbsp;serves&nbsp;as&nbsp;a&nbsp;commonly&nbsp;readable</span><br>
<span class="lineno"></span><span class="comment" id="2660767">//&nbsp;container&nbsp;for&nbsp;the&nbsp;individual&nbsp;small&nbsp;files.&nbsp;&nbsp;We&nbsp;choose&nbsp;zip&nbsp;over&nbsp;tar</span><br>
<span class="lineno"></span><span class="comment" id="2660836">//&nbsp;because&nbsp;zip&nbsp;files&nbsp;have&nbsp;a&nbsp;contiguous&nbsp;table&nbsp;of&nbsp;contents,&nbsp;making</span><br>
<span class="lineno"></span><span class="comment" id="2660901">//&nbsp;individual&nbsp;file&nbsp;lookups&nbsp;faster,&nbsp;and&nbsp;because&nbsp;the&nbsp;per-file&nbsp;overhead</span><br>
<span class="lineno"></span><span class="comment" id="2660970">//&nbsp;in&nbsp;a&nbsp;zip&nbsp;file&nbsp;is&nbsp;considerably&nbsp;less&nbsp;than&nbsp;tar&#39;s&nbsp;512&nbsp;bytes.</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="2661031">//&nbsp;get4&nbsp;returns&nbsp;the&nbsp;little-endian&nbsp;32-bit&nbsp;value&nbsp;in&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="2661084">func</span>&nbsp;<span class="ident" id="2661089">get4</span><span class="op" id="2661093">(</span><span class="ident" id="2661094">b</span>&nbsp;<span class="op" id="2661096">[</span><span class="op" id="2661097">]</span><span class="builtintype" id="2661098">byte</span><span class="op" id="2661102">)</span>&nbsp;<span class="builtintype" id="2661104">int</span>&nbsp;<span class="op" id="2661108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2661111">if</span>&nbsp;<span class="builtinfunc" id="2661114">len</span><span class="op" id="2661117">(</span><span class="ident" id="2661118">b</span><span class="op" id="2661119">)</span>&nbsp;<span class="op" id="2661121">&lt;</span>&nbsp;<span class="num" id="2661123">4</span>&nbsp;<span class="op" id="2661125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2661129">return</span>&nbsp;<span class="num" id="2661136">0</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2661139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2661142">return</span>&nbsp;<span class="builtintype" id="2661149">int</span><span class="op" id="2661152">(</span><span class="ident" id="2661153">b</span><span class="op" id="2661154">[</span><span class="num" id="2661155">0</span><span class="op" id="2661156">]</span><span class="op" id="2661157">)</span>&nbsp;<span class="op" id="2661159">|</span>&nbsp;<span class="builtintype" id="2661161">int</span><span class="op" id="2661164">(</span><span class="ident" id="2661165">b</span><span class="op" id="2661166">[</span><span class="num" id="2661167">1</span><span class="op" id="2661168">]</span><span class="op" id="2661169">)</span><span class="op" id="2661170">&lt;&lt;</span><span class="num" id="2661172">8</span>&nbsp;<span class="op" id="2661174">|</span>&nbsp;<span class="builtintype" id="2661176">int</span><span class="op" id="2661179">(</span><span class="ident" id="2661180">b</span><span class="op" id="2661181">[</span><span class="num" id="2661182">2</span><span class="op" id="2661183">]</span><span class="op" id="2661184">)</span><span class="op" id="2661185">&lt;&lt;</span><span class="num" id="2661187">16</span>&nbsp;<span class="op" id="2661190">|</span>&nbsp;<span class="builtintype" id="2661192">int</span><span class="op" id="2661195">(</span><span class="ident" id="2661196">b</span><span class="op" id="2661197">[</span><span class="num" id="2661198">3</span><span class="op" id="2661199">]</span><span class="op" id="2661200">)</span><span class="op" id="2661201">&lt;&lt;</span><span class="num" id="2661203">24</span><br>
<span class="lineno"></span><span class="op" id="2661206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2661209">//&nbsp;get2&nbsp;returns&nbsp;the&nbsp;little-endian&nbsp;16-bit&nbsp;value&nbsp;in&nbsp;b.</span><br>
<span class="lineno">230</span><span class="keyword" id="2661262">func</span>&nbsp;<span class="ident" id="2661267">get2</span><span class="op" id="2661271">(</span><span class="ident" id="2661272">b</span>&nbsp;<span class="op" id="2661274">[</span><span class="op" id="2661275">]</span><span class="builtintype" id="2661276">byte</span><span class="op" id="2661280">)</span>&nbsp;<span class="builtintype" id="2661282">int</span>&nbsp;<span class="op" id="2661286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2661289">if</span>&nbsp;<span class="builtinfunc" id="2661292">len</span><span class="op" id="2661295">(</span><span class="ident" id="2661296">b</span><span class="op" id="2661297">)</span>&nbsp;<span class="op" id="2661299">&lt;</span>&nbsp;<span class="num" id="2661301">2</span>&nbsp;<span class="op" id="2661303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2661307">return</span>&nbsp;<span class="num" id="2661314">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2661317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2661320">return</span>&nbsp;<span class="builtintype" id="2661327">int</span><span class="op" id="2661330">(</span><span class="ident" id="2661331">b</span><span class="op" id="2661332">[</span><span class="num" id="2661333">0</span><span class="op" id="2661334">]</span><span class="op" id="2661335">)</span>&nbsp;<span class="op" id="2661337">|</span>&nbsp;<span class="builtintype" id="2661339">int</span><span class="op" id="2661342">(</span><span class="ident" id="2661343">b</span><span class="op" id="2661344">[</span><span class="num" id="2661345">1</span><span class="op" id="2661346">]</span><span class="op" id="2661347">)</span><span class="op" id="2661348">&lt;&lt;</span><span class="num" id="2661350">8</span><br>
<span class="lineno">235</span><span class="op" id="2661352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2661355">func</span>&nbsp;<span class="ident" id="2661360">loadZoneZip</span><span class="op" id="2661371">(</span><span class="ident" id="2661372">zipfile</span><span class="op" id="2661379">,</span>&nbsp;<span class="ident" id="2661381">name</span>&nbsp;<span class="builtintype" id="2661386">string</span><span class="op" id="2661392">)</span>&nbsp;<span class="op" id="2661394">(</span><span class="ident" id="2661395">l</span>&nbsp;<span class="op" id="2661397">*</span><span class="ident" id="2661398">Location</span><span class="op" id="2661406">,</span>&nbsp;<span class="ident" id="2661408">err</span>&nbsp;<span class="builtintype" id="2661412">error</span><span class="op" id="2661417">)</span>&nbsp;<span class="op" id="2661419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2661422">fd</span><span class="op" id="2661424">,</span>&nbsp;<span class="ident" id="2661426">err</span>&nbsp;<span class="op" id="2661430">:=</span>&nbsp;<span class="ident" id="2661433">open</span><span class="op" id="2661437">(</span><span class="ident" id="2661438">zipfile</span><span class="op" id="2661445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2661448">if</span>&nbsp;<span class="ident" id="2661451">err</span>&nbsp;<span class="op" id="2661455">!=</span>&nbsp;<span class="builtintype" id="2661458">nil</span>&nbsp;<span class="op" id="2661462">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2661466">return</span>&nbsp;<span class="builtintype" id="2661473">nil</span><span class="op" id="2661476">,</span>&nbsp;<span class="ident" id="2661478">errors</span><span class="op" id="2661484">.</span><span class="ident" id="2661485">New</span><span class="op" id="2661488">(</span><span class="string" id="2661489">&#34;open&nbsp;&#34;</span>&nbsp;<span class="op" id="2661497">+</span>&nbsp;<span class="ident" id="2661499">zipfile</span>&nbsp;<span class="op" id="2661507">+</span>&nbsp;<span class="string" id="2661509">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2661514">+</span>&nbsp;<span class="ident" id="2661516">err</span><span class="op" id="2661519">.</span><span class="ident" id="2661520">Error</span><span class="op" id="2661525">(</span><span class="op" id="2661526">)</span><span class="op" id="2661527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2661530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2661533">defer</span>&nbsp;<span class="ident" id="2661539">closefd</span><span class="op" id="2661546">(</span><span class="ident" id="2661547">fd</span><span class="op" id="2661549">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2661553">const</span>&nbsp;<span class="op" id="2661559">(</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2661563">zecheader</span>&nbsp;<span class="op" id="2661573">=</span>&nbsp;<span class="num" id="2661575">0x06054b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2661588">zcheader</span>&nbsp;&nbsp;<span class="op" id="2661598">=</span>&nbsp;<span class="num" id="2661600">0x02014b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2661613">ztailsize</span>&nbsp;<span class="op" id="2661623">=</span>&nbsp;<span class="num" id="2661625">22</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2661631">zheadersize</span>&nbsp;<span class="op" id="2661643">=</span>&nbsp;<span class="num" id="2661645">30</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2661650">zheader</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2661662">=</span>&nbsp;<span class="num" id="2661664">0x04034b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2661676">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2661680">buf</span>&nbsp;<span class="op" id="2661684">:=</span>&nbsp;<span class="builtinfunc" id="2661687">make</span><span class="op" id="2661691">(</span><span class="op" id="2661692">[</span><span class="op" id="2661693">]</span><span class="builtintype" id="2661694">byte</span><span class="op" id="2661698">,</span>&nbsp;<span class="ident" id="2661700">ztailsize</span><span class="op" id="2661709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2661712">if</span>&nbsp;<span class="ident" id="2661715">err</span>&nbsp;<span class="op" id="2661719">:=</span>&nbsp;<span class="ident" id="2661722">preadn</span><span class="op" id="2661728">(</span><span class="ident" id="2661729">fd</span><span class="op" id="2661731">,</span>&nbsp;<span class="ident" id="2661733">buf</span><span class="op" id="2661736">,</span>&nbsp;<span class="op" id="2661738">-</span><span class="ident" id="2661739">ztailsize</span><span class="op" id="2661748">)</span><span class="op" id="2661749">;</span>&nbsp;<span class="ident" id="2661751">err</span>&nbsp;<span class="op" id="2661755">!=</span>&nbsp;<span class="builtintype" id="2661758">nil</span>&nbsp;<span class="op" id="2661762">||</span>&nbsp;<span class="ident" id="2661765">get4</span><span class="op" id="2661769">(</span><span class="ident" id="2661770">buf</span><span class="op" id="2661773">)</span>&nbsp;<span class="op" id="2661775">!=</span>&nbsp;<span class="ident" id="2661778">zecheader</span>&nbsp;<span class="op" id="2661788">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2661792">return</span>&nbsp;<span class="builtintype" id="2661799">nil</span><span class="op" id="2661802">,</span>&nbsp;<span class="ident" id="2661804">errors</span><span class="op" id="2661810">.</span><span class="ident" id="2661811">New</span><span class="op" id="2661814">(</span><span class="string" id="2661815">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2661835">+</span>&nbsp;<span class="ident" id="2661837">zipfile</span><span class="op" id="2661844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2661847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2661850">n</span>&nbsp;<span class="op" id="2661852">:=</span>&nbsp;<span class="ident" id="2661855">get2</span><span class="op" id="2661859">(</span><span class="ident" id="2661860">buf</span><span class="op" id="2661863">[</span><span class="num" id="2661864">10</span><span class="op" id="2661866">:</span><span class="op" id="2661867">]</span><span class="op" id="2661868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2661871">size</span>&nbsp;<span class="op" id="2661876">:=</span>&nbsp;<span class="ident" id="2661879">get4</span><span class="op" id="2661883">(</span><span class="ident" id="2661884">buf</span><span class="op" id="2661887">[</span><span class="num" id="2661888">12</span><span class="op" id="2661890">:</span><span class="op" id="2661891">]</span><span class="op" id="2661892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2661895">off</span>&nbsp;<span class="op" id="2661899">:=</span>&nbsp;<span class="ident" id="2661902">get4</span><span class="op" id="2661906">(</span><span class="ident" id="2661907">buf</span><span class="op" id="2661910">[</span><span class="num" id="2661911">16</span><span class="op" id="2661913">:</span><span class="op" id="2661914">]</span><span class="op" id="2661915">)</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2661919">buf</span>&nbsp;<span class="op" id="2661923">=</span>&nbsp;<span class="builtinfunc" id="2661925">make</span><span class="op" id="2661929">(</span><span class="op" id="2661930">[</span><span class="op" id="2661931">]</span><span class="builtintype" id="2661932">byte</span><span class="op" id="2661936">,</span>&nbsp;<span class="ident" id="2661938">size</span><span class="op" id="2661942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2661945">if</span>&nbsp;<span class="ident" id="2661948">err</span>&nbsp;<span class="op" id="2661952">:=</span>&nbsp;<span class="ident" id="2661955">preadn</span><span class="op" id="2661961">(</span><span class="ident" id="2661962">fd</span><span class="op" id="2661964">,</span>&nbsp;<span class="ident" id="2661966">buf</span><span class="op" id="2661969">,</span>&nbsp;<span class="ident" id="2661971">off</span><span class="op" id="2661974">)</span><span class="op" id="2661975">;</span>&nbsp;<span class="ident" id="2661977">err</span>&nbsp;<span class="op" id="2661981">!=</span>&nbsp;<span class="builtintype" id="2661984">nil</span>&nbsp;<span class="op" id="2661988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2661992">return</span>&nbsp;<span class="builtintype" id="2661999">nil</span><span class="op" id="2662002">,</span>&nbsp;<span class="ident" id="2662004">errors</span><span class="op" id="2662010">.</span><span class="ident" id="2662011">New</span><span class="op" id="2662014">(</span><span class="string" id="2662015">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2662035">+</span>&nbsp;<span class="ident" id="2662037">zipfile</span><span class="op" id="2662044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2662047">}</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2662051">for</span>&nbsp;<span class="ident" id="2662055">i</span>&nbsp;<span class="op" id="2662057">:=</span>&nbsp;<span class="num" id="2662060">0</span><span class="op" id="2662061">;</span>&nbsp;<span class="ident" id="2662063">i</span>&nbsp;<span class="op" id="2662065">&lt;</span>&nbsp;<span class="ident" id="2662067">n</span><span class="op" id="2662068">;</span>&nbsp;<span class="ident" id="2662070">i</span><span class="op" id="2662071">++</span>&nbsp;<span class="op" id="2662074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662078">//&nbsp;zip&nbsp;entry&nbsp;layout:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662101">//&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;magic[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662117">//&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;madevers[1]</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662136">//&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;&nbsp;&nbsp;&nbsp;madeos[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662153">//&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;&nbsp;&nbsp;&nbsp;extvers[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662171">//&nbsp;&nbsp;&nbsp;&nbsp;7&nbsp;&nbsp;&nbsp;&nbsp;extos[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662187">//&nbsp;&nbsp;&nbsp;&nbsp;8&nbsp;&nbsp;&nbsp;&nbsp;flags[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662203">//&nbsp;&nbsp;&nbsp;&nbsp;10&nbsp;&nbsp;&nbsp;&nbsp;meth[2]</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662219">//&nbsp;&nbsp;&nbsp;&nbsp;12&nbsp;&nbsp;&nbsp;&nbsp;modtime[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662238">//&nbsp;&nbsp;&nbsp;&nbsp;14&nbsp;&nbsp;&nbsp;&nbsp;moddate[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662257">//&nbsp;&nbsp;&nbsp;&nbsp;16&nbsp;&nbsp;&nbsp;&nbsp;crc[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662272">//&nbsp;&nbsp;&nbsp;&nbsp;20&nbsp;&nbsp;&nbsp;&nbsp;csize[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662289">//&nbsp;&nbsp;&nbsp;&nbsp;24&nbsp;&nbsp;&nbsp;&nbsp;uncsize[4]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662308">//&nbsp;&nbsp;&nbsp;&nbsp;28&nbsp;&nbsp;&nbsp;&nbsp;namelen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662327">//&nbsp;&nbsp;&nbsp;&nbsp;30&nbsp;&nbsp;&nbsp;&nbsp;xlen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662343">//&nbsp;&nbsp;&nbsp;&nbsp;32&nbsp;&nbsp;&nbsp;&nbsp;fclen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662360">//&nbsp;&nbsp;&nbsp;&nbsp;34&nbsp;&nbsp;&nbsp;&nbsp;disknum[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662379">//&nbsp;&nbsp;&nbsp;&nbsp;36&nbsp;&nbsp;&nbsp;&nbsp;iattr[2]</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662396">//&nbsp;&nbsp;&nbsp;&nbsp;38&nbsp;&nbsp;&nbsp;&nbsp;eattr[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662413">//&nbsp;&nbsp;&nbsp;&nbsp;42&nbsp;&nbsp;&nbsp;&nbsp;off[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662428">//&nbsp;&nbsp;&nbsp;&nbsp;46&nbsp;&nbsp;&nbsp;&nbsp;name[namelen]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662450">//&nbsp;&nbsp;&nbsp;&nbsp;46+namelen+xlen+fclen&nbsp;-&nbsp;next&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662491">//</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2662496">if</span>&nbsp;<span class="ident" id="2662499">get4</span><span class="op" id="2662503">(</span><span class="ident" id="2662504">buf</span><span class="op" id="2662507">)</span>&nbsp;<span class="op" id="2662509">!=</span>&nbsp;<span class="ident" id="2662512">zcheader</span>&nbsp;<span class="op" id="2662521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2662526">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2662534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2662538">meth</span>&nbsp;<span class="op" id="2662543">:=</span>&nbsp;<span class="ident" id="2662546">get2</span><span class="op" id="2662550">(</span><span class="ident" id="2662551">buf</span><span class="op" id="2662554">[</span><span class="num" id="2662555">10</span><span class="op" id="2662557">:</span><span class="op" id="2662558">]</span><span class="op" id="2662559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2662563">size</span>&nbsp;<span class="op" id="2662568">:=</span>&nbsp;<span class="ident" id="2662571">get4</span><span class="op" id="2662575">(</span><span class="ident" id="2662576">buf</span><span class="op" id="2662579">[</span><span class="num" id="2662580">24</span><span class="op" id="2662582">:</span><span class="op" id="2662583">]</span><span class="op" id="2662584">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2662588">namelen</span>&nbsp;<span class="op" id="2662596">:=</span>&nbsp;<span class="ident" id="2662599">get2</span><span class="op" id="2662603">(</span><span class="ident" id="2662604">buf</span><span class="op" id="2662607">[</span><span class="num" id="2662608">28</span><span class="op" id="2662610">:</span><span class="op" id="2662611">]</span><span class="op" id="2662612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2662616">xlen</span>&nbsp;<span class="op" id="2662621">:=</span>&nbsp;<span class="ident" id="2662624">get2</span><span class="op" id="2662628">(</span><span class="ident" id="2662629">buf</span><span class="op" id="2662632">[</span><span class="num" id="2662633">30</span><span class="op" id="2662635">:</span><span class="op" id="2662636">]</span><span class="op" id="2662637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2662641">fclen</span>&nbsp;<span class="op" id="2662647">:=</span>&nbsp;<span class="ident" id="2662650">get2</span><span class="op" id="2662654">(</span><span class="ident" id="2662655">buf</span><span class="op" id="2662658">[</span><span class="num" id="2662659">32</span><span class="op" id="2662661">:</span><span class="op" id="2662662">]</span><span class="op" id="2662663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2662667">off</span>&nbsp;<span class="op" id="2662671">:=</span>&nbsp;<span class="ident" id="2662674">get4</span><span class="op" id="2662678">(</span><span class="ident" id="2662679">buf</span><span class="op" id="2662682">[</span><span class="num" id="2662683">42</span><span class="op" id="2662685">:</span><span class="op" id="2662686">]</span><span class="op" id="2662687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2662691">zname</span>&nbsp;<span class="op" id="2662697">:=</span>&nbsp;<span class="ident" id="2662700">buf</span><span class="op" id="2662703">[</span><span class="num" id="2662704">46</span>&nbsp;<span class="op" id="2662707">:</span>&nbsp;<span class="num" id="2662709">46</span><span class="op" id="2662711">+</span><span class="ident" id="2662712">namelen</span><span class="op" id="2662719">]</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2662723">buf</span>&nbsp;<span class="op" id="2662727">=</span>&nbsp;<span class="ident" id="2662729">buf</span><span class="op" id="2662732">[</span><span class="num" id="2662733">46</span><span class="op" id="2662735">+</span><span class="ident" id="2662736">namelen</span><span class="op" id="2662743">+</span><span class="ident" id="2662744">xlen</span><span class="op" id="2662748">+</span><span class="ident" id="2662749">fclen</span><span class="op" id="2662754">:</span><span class="op" id="2662755">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2662759">if</span>&nbsp;<span class="builtintype" id="2662762">string</span><span class="op" id="2662768">(</span><span class="ident" id="2662769">zname</span><span class="op" id="2662774">)</span>&nbsp;<span class="op" id="2662776">!=</span>&nbsp;<span class="ident" id="2662779">name</span>&nbsp;<span class="op" id="2662784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2662789">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2662800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2662804">if</span>&nbsp;<span class="ident" id="2662807">meth</span>&nbsp;<span class="op" id="2662812">!=</span>&nbsp;<span class="num" id="2662815">0</span>&nbsp;<span class="op" id="2662817">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2662822">return</span>&nbsp;<span class="builtintype" id="2662829">nil</span><span class="op" id="2662832">,</span>&nbsp;<span class="ident" id="2662834">errors</span><span class="op" id="2662840">.</span><span class="ident" id="2662841">New</span><span class="op" id="2662844">(</span><span class="string" id="2662845">&#34;unsupported&nbsp;compression&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2662876">+</span>&nbsp;<span class="ident" id="2662878">name</span>&nbsp;<span class="op" id="2662883">+</span>&nbsp;<span class="string" id="2662885">&#34;&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="2662892">+</span>&nbsp;<span class="ident" id="2662894">zipfile</span><span class="op" id="2662901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2662905">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662910">//&nbsp;zip&nbsp;per-file&nbsp;header&nbsp;layout:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662943">//&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;magic[4]</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662959">//&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;extvers[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662977">//&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;&nbsp;&nbsp;&nbsp;extos[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2662993">//&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;&nbsp;&nbsp;&nbsp;flags[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2663009">//&nbsp;&nbsp;&nbsp;&nbsp;8&nbsp;&nbsp;&nbsp;&nbsp;meth[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2663024">//&nbsp;&nbsp;&nbsp;&nbsp;10&nbsp;&nbsp;&nbsp;&nbsp;modtime[2]</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2663043">//&nbsp;&nbsp;&nbsp;&nbsp;12&nbsp;&nbsp;&nbsp;&nbsp;moddate[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2663062">//&nbsp;&nbsp;&nbsp;&nbsp;14&nbsp;&nbsp;&nbsp;&nbsp;crc[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2663077">//&nbsp;&nbsp;&nbsp;&nbsp;18&nbsp;&nbsp;&nbsp;&nbsp;csize[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2663094">//&nbsp;&nbsp;&nbsp;&nbsp;22&nbsp;&nbsp;&nbsp;&nbsp;uncsize[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2663113">//&nbsp;&nbsp;&nbsp;&nbsp;26&nbsp;&nbsp;&nbsp;&nbsp;namelen[2]</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2663132">//&nbsp;&nbsp;&nbsp;&nbsp;28&nbsp;&nbsp;&nbsp;&nbsp;xlen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2663148">//&nbsp;&nbsp;&nbsp;&nbsp;30&nbsp;&nbsp;&nbsp;&nbsp;name[namelen]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2663170">//&nbsp;&nbsp;&nbsp;&nbsp;30+namelen+xlen&nbsp;-&nbsp;file&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2663203">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2663208">buf</span>&nbsp;<span class="op" id="2663212">=</span>&nbsp;<span class="builtinfunc" id="2663214">make</span><span class="op" id="2663218">(</span><span class="op" id="2663219">[</span><span class="op" id="2663220">]</span><span class="builtintype" id="2663221">byte</span><span class="op" id="2663225">,</span>&nbsp;<span class="ident" id="2663227">zheadersize</span><span class="op" id="2663238">+</span><span class="ident" id="2663239">namelen</span><span class="op" id="2663246">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2663250">if</span>&nbsp;<span class="ident" id="2663253">err</span>&nbsp;<span class="op" id="2663257">:=</span>&nbsp;<span class="ident" id="2663260">preadn</span><span class="op" id="2663266">(</span><span class="ident" id="2663267">fd</span><span class="op" id="2663269">,</span>&nbsp;<span class="ident" id="2663271">buf</span><span class="op" id="2663274">,</span>&nbsp;<span class="ident" id="2663276">off</span><span class="op" id="2663279">)</span><span class="op" id="2663280">;</span>&nbsp;<span class="ident" id="2663282">err</span>&nbsp;<span class="op" id="2663286">!=</span>&nbsp;<span class="builtintype" id="2663289">nil</span>&nbsp;<span class="op" id="2663293">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2663299">get4</span><span class="op" id="2663303">(</span><span class="ident" id="2663304">buf</span><span class="op" id="2663307">)</span>&nbsp;<span class="op" id="2663309">!=</span>&nbsp;<span class="ident" id="2663312">zheader</span>&nbsp;<span class="op" id="2663320">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2663326">get2</span><span class="op" id="2663330">(</span><span class="ident" id="2663331">buf</span><span class="op" id="2663334">[</span><span class="num" id="2663335">8</span><span class="op" id="2663336">:</span><span class="op" id="2663337">]</span><span class="op" id="2663338">)</span>&nbsp;<span class="op" id="2663340">!=</span>&nbsp;<span class="ident" id="2663343">meth</span>&nbsp;<span class="op" id="2663348">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2663354">get2</span><span class="op" id="2663358">(</span><span class="ident" id="2663359">buf</span><span class="op" id="2663362">[</span><span class="num" id="2663363">26</span><span class="op" id="2663365">:</span><span class="op" id="2663366">]</span><span class="op" id="2663367">)</span>&nbsp;<span class="op" id="2663369">!=</span>&nbsp;<span class="ident" id="2663372">namelen</span>&nbsp;<span class="op" id="2663380">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2663386">string</span><span class="op" id="2663392">(</span><span class="ident" id="2663393">buf</span><span class="op" id="2663396">[</span><span class="num" id="2663397">30</span><span class="op" id="2663399">:</span><span class="num" id="2663400">30</span><span class="op" id="2663402">+</span><span class="ident" id="2663403">namelen</span><span class="op" id="2663410">]</span><span class="op" id="2663411">)</span>&nbsp;<span class="op" id="2663413">!=</span>&nbsp;<span class="ident" id="2663416">name</span>&nbsp;<span class="op" id="2663421">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2663426">return</span>&nbsp;<span class="builtintype" id="2663433">nil</span><span class="op" id="2663436">,</span>&nbsp;<span class="ident" id="2663438">errors</span><span class="op" id="2663444">.</span><span class="ident" id="2663445">New</span><span class="op" id="2663448">(</span><span class="string" id="2663449">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2663469">+</span>&nbsp;<span class="ident" id="2663471">zipfile</span><span class="op" id="2663478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2663482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2663486">xlen</span>&nbsp;<span class="op" id="2663491">=</span>&nbsp;<span class="ident" id="2663493">get2</span><span class="op" id="2663497">(</span><span class="ident" id="2663498">buf</span><span class="op" id="2663501">[</span><span class="num" id="2663502">28</span><span class="op" id="2663504">:</span><span class="op" id="2663505">]</span><span class="op" id="2663506">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2663511">buf</span>&nbsp;<span class="op" id="2663515">=</span>&nbsp;<span class="builtinfunc" id="2663517">make</span><span class="op" id="2663521">(</span><span class="op" id="2663522">[</span><span class="op" id="2663523">]</span><span class="builtintype" id="2663524">byte</span><span class="op" id="2663528">,</span>&nbsp;<span class="ident" id="2663530">size</span><span class="op" id="2663534">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2663538">if</span>&nbsp;<span class="ident" id="2663541">err</span>&nbsp;<span class="op" id="2663545">:=</span>&nbsp;<span class="ident" id="2663548">preadn</span><span class="op" id="2663554">(</span><span class="ident" id="2663555">fd</span><span class="op" id="2663557">,</span>&nbsp;<span class="ident" id="2663559">buf</span><span class="op" id="2663562">,</span>&nbsp;<span class="ident" id="2663564">off</span><span class="op" id="2663567">+</span><span class="num" id="2663568">30</span><span class="op" id="2663570">+</span><span class="ident" id="2663571">namelen</span><span class="op" id="2663578">+</span><span class="ident" id="2663579">xlen</span><span class="op" id="2663583">)</span><span class="op" id="2663584">;</span>&nbsp;<span class="ident" id="2663586">err</span>&nbsp;<span class="op" id="2663590">!=</span>&nbsp;<span class="builtintype" id="2663593">nil</span>&nbsp;<span class="op" id="2663597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2663602">return</span>&nbsp;<span class="builtintype" id="2663609">nil</span><span class="op" id="2663612">,</span>&nbsp;<span class="ident" id="2663614">errors</span><span class="op" id="2663620">.</span><span class="ident" id="2663621">New</span><span class="op" id="2663624">(</span><span class="string" id="2663625">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2663645">+</span>&nbsp;<span class="ident" id="2663647">zipfile</span><span class="op" id="2663654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2663658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2663663">return</span>&nbsp;<span class="ident" id="2663670">loadZoneData</span><span class="op" id="2663682">(</span><span class="ident" id="2663683">buf</span><span class="op" id="2663686">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2663689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2663693">return</span>&nbsp;<span class="builtintype" id="2663700">nil</span><span class="op" id="2663703">,</span>&nbsp;<span class="ident" id="2663705">errors</span><span class="op" id="2663711">.</span><span class="ident" id="2663712">New</span><span class="op" id="2663715">(</span><span class="string" id="2663716">&#34;cannot&nbsp;find&nbsp;&#34;</span>&nbsp;<span class="op" id="2663731">+</span>&nbsp;<span class="ident" id="2663733">name</span>&nbsp;<span class="op" id="2663738">+</span>&nbsp;<span class="string" id="2663740">&#34;&nbsp;in&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2663756">+</span>&nbsp;<span class="ident" id="2663758">zipfile</span><span class="op" id="2663765">)</span><br>
<span class="lineno"></span><span class="op" id="2663767">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
