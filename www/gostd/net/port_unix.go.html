<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html" class="current">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3338538">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3338593">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3338647">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3338698">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3338763">//&nbsp;Read&nbsp;system&nbsp;port&nbsp;mappings&nbsp;from&nbsp;/etc/services</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3338812">package</span>&nbsp;<span class="ident" id="3338820">net</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="3338825">import</span>&nbsp;<span class="string" id="3338832">&#34;sync&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3338840">//&nbsp;services&nbsp;contains&nbsp;minimal&nbsp;mappings&nbsp;between&nbsp;services&nbsp;names&nbsp;and&nbsp;port</span><br>
<span class="lineno"></span><span class="comment" id="3338910">//&nbsp;numbers&nbsp;for&nbsp;platforms&nbsp;that&nbsp;don&#39;t&nbsp;have&nbsp;a&nbsp;complete&nbsp;list&nbsp;of&nbsp;port&nbsp;numbers</span><br>
<span class="lineno">15</span><span class="comment" id="3338983">//&nbsp;(some&nbsp;Solaris&nbsp;distros).</span><br>
<span class="lineno"></span><span class="keyword" id="3339010">var</span>&nbsp;<span class="ident" id="3339014">services</span>&nbsp;<span class="op" id="3339023">=</span>&nbsp;<span class="keyword" id="3339025">map</span><span class="op" id="3339028">[</span><span class="builtintype" id="3339029">string</span><span class="op" id="3339035">]</span><span class="keyword" id="3339036">map</span><span class="op" id="3339039">[</span><span class="builtintype" id="3339040">string</span><span class="op" id="3339046">]</span><span class="builtintype" id="3339047">int</span><span class="op" id="3339050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3339053">&#34;tcp&#34;</span><span class="op" id="3339058">:</span>&nbsp;<span class="op" id="3339060">{</span><span class="string" id="3339061">&#34;http&#34;</span><span class="op" id="3339067">:</span>&nbsp;<span class="num" id="3339069">80</span><span class="op" id="3339071">}</span><span class="op" id="3339072">,</span><br>
<span class="lineno"></span><span class="op" id="3339074">}</span><br>
<span class="lineno"></span><span class="keyword" id="3339076">var</span>&nbsp;<span class="ident" id="3339080">servicesError</span>&nbsp;<span class="builtintype" id="3339094">error</span><br>
<span class="lineno">20</span><span class="keyword" id="3339100">var</span>&nbsp;<span class="ident" id="3339104">onceReadServices</span>&nbsp;<span class="ident" id="3339121">sync</span><span class="op" id="3339125">.</span><span class="ident" id="3339126">Once</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3339132">func</span>&nbsp;<span class="ident" id="3339137">readServices</span><span class="op" id="3339149">(</span><span class="op" id="3339150">)</span>&nbsp;<span class="op" id="3339152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3339155">var</span>&nbsp;<span class="ident" id="3339159">file</span>&nbsp;<span class="op" id="3339164">*</span><span class="ident" id="3339165">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3339171">if</span>&nbsp;<span class="ident" id="3339174">file</span><span class="op" id="3339178">,</span>&nbsp;<span class="ident" id="3339180">servicesError</span>&nbsp;<span class="op" id="3339194">=</span>&nbsp;<span class="ident" id="3339196">open</span><span class="op" id="3339200">(</span><span class="string" id="3339201">&#34;/etc/services&#34;</span><span class="op" id="3339216">)</span><span class="op" id="3339217">;</span>&nbsp;<span class="ident" id="3339219">servicesError</span>&nbsp;<span class="op" id="3339233">!=</span>&nbsp;<span class="builtintype" id="3339236">nil</span>&nbsp;<span class="op" id="3339240">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3339244">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3339252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3339255">for</span>&nbsp;<span class="ident" id="3339259">line</span><span class="op" id="3339263">,</span>&nbsp;<span class="ident" id="3339265">ok</span>&nbsp;<span class="op" id="3339268">:=</span>&nbsp;<span class="ident" id="3339271">file</span><span class="op" id="3339275">.</span><span class="ident" id="3339276">readLine</span><span class="op" id="3339284">(</span><span class="op" id="3339285">)</span><span class="op" id="3339286">;</span>&nbsp;<span class="ident" id="3339288">ok</span><span class="op" id="3339290">;</span>&nbsp;<span class="ident" id="3339292">line</span><span class="op" id="3339296">,</span>&nbsp;<span class="ident" id="3339298">ok</span>&nbsp;<span class="op" id="3339301">=</span>&nbsp;<span class="ident" id="3339303">file</span><span class="op" id="3339307">.</span><span class="ident" id="3339308">readLine</span><span class="op" id="3339316">(</span><span class="op" id="3339317">)</span>&nbsp;<span class="op" id="3339319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3339323">//&nbsp;&#34;http&nbsp;80/tcp&nbsp;www&nbsp;www-http&nbsp;#&nbsp;World&nbsp;Wide&nbsp;Web&nbsp;HTTP&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3339377">if</span>&nbsp;<span class="ident" id="3339380">i</span>&nbsp;<span class="op" id="3339382">:=</span>&nbsp;<span class="ident" id="3339385">byteIndex</span><span class="op" id="3339394">(</span><span class="ident" id="3339395">line</span><span class="op" id="3339399">,</span>&nbsp;<span class="string" id="3339401">&#39;#&#39;</span><span class="op" id="3339404">)</span><span class="op" id="3339405">;</span>&nbsp;<span class="ident" id="3339407">i</span>&nbsp;<span class="op" id="3339409">&gt;=</span>&nbsp;<span class="num" id="3339412">0</span>&nbsp;<span class="op" id="3339414">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3339419">line</span>&nbsp;<span class="op" id="3339424">=</span>&nbsp;<span class="ident" id="3339426">line</span><span class="op" id="3339430">[</span><span class="num" id="3339431">0</span><span class="op" id="3339432">:</span><span class="ident" id="3339433">i</span><span class="op" id="3339434">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3339438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3339442">f</span>&nbsp;<span class="op" id="3339444">:=</span>&nbsp;<span class="ident" id="3339447">getFields</span><span class="op" id="3339456">(</span><span class="ident" id="3339457">line</span><span class="op" id="3339461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3339465">if</span>&nbsp;<span class="builtinfunc" id="3339468">len</span><span class="op" id="3339471">(</span><span class="ident" id="3339472">f</span><span class="op" id="3339473">)</span>&nbsp;<span class="op" id="3339475">&lt;</span>&nbsp;<span class="num" id="3339477">2</span>&nbsp;<span class="op" id="3339479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3339484">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3339495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3339499">portnet</span>&nbsp;<span class="op" id="3339507">:=</span>&nbsp;<span class="ident" id="3339510">f</span><span class="op" id="3339511">[</span><span class="num" id="3339512">1</span><span class="op" id="3339513">]</span>&nbsp;<span class="comment" id="3339515">//&nbsp;&#34;80/tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3339529">port</span><span class="op" id="3339533">,</span>&nbsp;<span class="ident" id="3339535">j</span><span class="op" id="3339536">,</span>&nbsp;<span class="ident" id="3339538">ok</span>&nbsp;<span class="op" id="3339541">:=</span>&nbsp;<span class="ident" id="3339544">dtoi</span><span class="op" id="3339548">(</span><span class="ident" id="3339549">portnet</span><span class="op" id="3339556">,</span>&nbsp;<span class="num" id="3339558">0</span><span class="op" id="3339559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3339563">if</span>&nbsp;<span class="op" id="3339566">!</span><span class="ident" id="3339567">ok</span>&nbsp;<span class="op" id="3339570">||</span>&nbsp;<span class="ident" id="3339573">port</span>&nbsp;<span class="op" id="3339578">&lt;=</span>&nbsp;<span class="num" id="3339581">0</span>&nbsp;<span class="op" id="3339583">||</span>&nbsp;<span class="ident" id="3339586">j</span>&nbsp;<span class="op" id="3339588">&gt;=</span>&nbsp;<span class="builtinfunc" id="3339591">len</span><span class="op" id="3339594">(</span><span class="ident" id="3339595">portnet</span><span class="op" id="3339602">)</span>&nbsp;<span class="op" id="3339604">||</span>&nbsp;<span class="ident" id="3339607">portnet</span><span class="op" id="3339614">[</span><span class="ident" id="3339615">j</span><span class="op" id="3339616">]</span>&nbsp;<span class="op" id="3339618">!=</span>&nbsp;<span class="string" id="3339621">&#39;/&#39;</span>&nbsp;<span class="op" id="3339625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3339630">continue</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3339641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3339645">netw</span>&nbsp;<span class="op" id="3339650">:=</span>&nbsp;<span class="ident" id="3339653">portnet</span><span class="op" id="3339660">[</span><span class="ident" id="3339661">j</span><span class="op" id="3339662">+</span><span class="num" id="3339663">1</span><span class="op" id="3339664">:</span><span class="op" id="3339665">]</span>&nbsp;<span class="comment" id="3339667">//&nbsp;&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3339678">m</span><span class="op" id="3339679">,</span>&nbsp;<span class="ident" id="3339681">ok1</span>&nbsp;<span class="op" id="3339685">:=</span>&nbsp;<span class="ident" id="3339688">services</span><span class="op" id="3339696">[</span><span class="ident" id="3339697">netw</span><span class="op" id="3339701">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3339705">if</span>&nbsp;<span class="op" id="3339708">!</span><span class="ident" id="3339709">ok1</span>&nbsp;<span class="op" id="3339713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3339718">m</span>&nbsp;<span class="op" id="3339720">=</span>&nbsp;<span class="builtinfunc" id="3339722">make</span><span class="op" id="3339726">(</span><span class="keyword" id="3339727">map</span><span class="op" id="3339730">[</span><span class="builtintype" id="3339731">string</span><span class="op" id="3339737">]</span><span class="builtintype" id="3339738">int</span><span class="op" id="3339741">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3339746">services</span><span class="op" id="3339754">[</span><span class="ident" id="3339755">netw</span><span class="op" id="3339759">]</span>&nbsp;<span class="op" id="3339761">=</span>&nbsp;<span class="ident" id="3339763">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3339767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3339771">for</span>&nbsp;<span class="ident" id="3339775">i</span>&nbsp;<span class="op" id="3339777">:=</span>&nbsp;<span class="num" id="3339780">0</span><span class="op" id="3339781">;</span>&nbsp;<span class="ident" id="3339783">i</span>&nbsp;<span class="op" id="3339785">&lt;</span>&nbsp;<span class="builtinfunc" id="3339787">len</span><span class="op" id="3339790">(</span><span class="ident" id="3339791">f</span><span class="op" id="3339792">)</span><span class="op" id="3339793">;</span>&nbsp;<span class="ident" id="3339795">i</span><span class="op" id="3339796">++</span>&nbsp;<span class="op" id="3339799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3339804">if</span>&nbsp;<span class="ident" id="3339807">i</span>&nbsp;<span class="op" id="3339809">!=</span>&nbsp;<span class="num" id="3339812">1</span>&nbsp;<span class="op" id="3339814">{</span>&nbsp;<span class="comment" id="3339816">//&nbsp;f[1]&nbsp;was&nbsp;port/net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3339841">m</span><span class="op" id="3339842">[</span><span class="ident" id="3339843">f</span><span class="op" id="3339844">[</span><span class="ident" id="3339845">i</span><span class="op" id="3339846">]</span><span class="op" id="3339847">]</span>&nbsp;<span class="op" id="3339849">=</span>&nbsp;<span class="ident" id="3339851">port</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3339859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3339863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3339866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3339869">file</span><span class="op" id="3339873">.</span><span class="builtinfunc" id="3339874">close</span><span class="op" id="3339879">(</span><span class="op" id="3339880">)</span><br>
<span class="lineno"></span><span class="op" id="3339882">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="3339885">//&nbsp;goLookupPort&nbsp;is&nbsp;the&nbsp;native&nbsp;Go&nbsp;implementation&nbsp;of&nbsp;LookupPort.</span><br>
<span class="lineno"></span><span class="keyword" id="3339948">func</span>&nbsp;<span class="ident" id="3339953">goLookupPort</span><span class="op" id="3339965">(</span><span class="ident" id="3339966">network</span><span class="op" id="3339973">,</span>&nbsp;<span class="ident" id="3339975">service</span>&nbsp;<span class="builtintype" id="3339983">string</span><span class="op" id="3339989">)</span>&nbsp;<span class="op" id="3339991">(</span><span class="ident" id="3339992">port</span>&nbsp;<span class="builtintype" id="3339997">int</span><span class="op" id="3340000">,</span>&nbsp;<span class="ident" id="3340002">err</span>&nbsp;<span class="builtintype" id="3340006">error</span><span class="op" id="3340011">)</span>&nbsp;<span class="op" id="3340013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3340016">onceReadServices</span><span class="op" id="3340032">.</span><span class="ident" id="3340033">Do</span><span class="op" id="3340035">(</span><span class="ident" id="3340036">readServices</span><span class="op" id="3340048">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3340052">switch</span>&nbsp;<span class="ident" id="3340059">network</span>&nbsp;<span class="op" id="3340067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3340070">case</span>&nbsp;<span class="string" id="3340075">&#34;tcp4&#34;</span><span class="op" id="3340081">,</span>&nbsp;<span class="string" id="3340083">&#34;tcp6&#34;</span><span class="op" id="3340089">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3340093">network</span>&nbsp;<span class="op" id="3340101">=</span>&nbsp;<span class="string" id="3340103">&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3340110">case</span>&nbsp;<span class="string" id="3340115">&#34;udp4&#34;</span><span class="op" id="3340121">,</span>&nbsp;<span class="string" id="3340123">&#34;udp6&#34;</span><span class="op" id="3340129">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3340133">network</span>&nbsp;<span class="op" id="3340141">=</span>&nbsp;<span class="string" id="3340143">&#34;udp&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3340150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3340154">if</span>&nbsp;<span class="ident" id="3340157">m</span><span class="op" id="3340158">,</span>&nbsp;<span class="ident" id="3340160">ok</span>&nbsp;<span class="op" id="3340163">:=</span>&nbsp;<span class="ident" id="3340166">services</span><span class="op" id="3340174">[</span><span class="ident" id="3340175">network</span><span class="op" id="3340182">]</span><span class="op" id="3340183">;</span>&nbsp;<span class="ident" id="3340185">ok</span>&nbsp;<span class="op" id="3340188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3340192">if</span>&nbsp;<span class="ident" id="3340195">port</span><span class="op" id="3340199">,</span>&nbsp;<span class="ident" id="3340201">ok</span>&nbsp;<span class="op" id="3340204">=</span>&nbsp;<span class="ident" id="3340206">m</span><span class="op" id="3340207">[</span><span class="ident" id="3340208">service</span><span class="op" id="3340215">]</span><span class="op" id="3340216">;</span>&nbsp;<span class="ident" id="3340218">ok</span>&nbsp;<span class="op" id="3340221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3340226">return</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3340235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3340238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3340241">return</span>&nbsp;<span class="num" id="3340248">0</span><span class="op" id="3340249">,</span>&nbsp;<span class="op" id="3340251">&amp;</span><span class="ident" id="3340252">AddrError</span><span class="op" id="3340261">{</span><span class="string" id="3340262">&#34;unknown&nbsp;port&#34;</span><span class="op" id="3340276">,</span>&nbsp;<span class="ident" id="3340278">network</span>&nbsp;<span class="op" id="3340286">+</span>&nbsp;<span class="string" id="3340288">&#34;/&#34;</span>&nbsp;<span class="op" id="3340292">+</span>&nbsp;<span class="ident" id="3340294">service</span><span class="op" id="3340301">}</span><br>
<span class="lineno"></span><span class="op" id="3340303">}</span>
</div>
</body>
</html>
