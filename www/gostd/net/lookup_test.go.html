<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7909638">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7909693">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7909747">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7909798">//&nbsp;TODO&nbsp;It&nbsp;would&nbsp;be&nbsp;nice&nbsp;to&nbsp;use&nbsp;a&nbsp;mock&nbsp;DNS&nbsp;server,&nbsp;to&nbsp;eliminate</span><br>
<span class="lineno"></span><span class="comment" id="7909862">//&nbsp;external&nbsp;dependencies.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7909889">package</span>&nbsp;<span class="ident" id="7909897">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="7909902">import</span>&nbsp;<span class="op" id="7909909">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7909912">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7909920">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7909931">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7909941">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7909944">var</span>&nbsp;<span class="ident" id="7909948">testExternal</span>&nbsp;<span class="op" id="7909961">=</span>&nbsp;<span class="ident" id="7909963">flag</span><span class="op" id="7909967">.</span><span class="ident" id="7909968">Bool</span><span class="op" id="7909972">(</span><span class="string" id="7909973">&#34;external&#34;</span><span class="op" id="7909983">,</span>&nbsp;<span class="builtintype" id="7909985">true</span><span class="op" id="7909989">,</span>&nbsp;<span class="string" id="7909991">&#34;allow&nbsp;use&nbsp;of&nbsp;external&nbsp;networks&nbsp;during&nbsp;long&nbsp;test&#34;</span><span class="op" id="7910040">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7910043">var</span>&nbsp;<span class="ident" id="7910047">lookupGoogleSRVTests</span>&nbsp;<span class="op" id="7910068">=</span>&nbsp;<span class="op" id="7910070">[</span><span class="op" id="7910071">]</span><span class="keyword" id="7910072">struct</span>&nbsp;<span class="op" id="7910079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910082">service</span><span class="op" id="7910089">,</span>&nbsp;<span class="ident" id="7910091">proto</span><span class="op" id="7910096">,</span>&nbsp;<span class="ident" id="7910098">name</span>&nbsp;<span class="builtintype" id="7910103">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910111">cname</span><span class="op" id="7910116">,</span>&nbsp;<span class="ident" id="7910118">target</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7910132">string</span><br>
<span class="lineno"></span><span class="op" id="7910139">}</span><span class="op" id="7910140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910147">&#34;xmpp-server&#34;</span><span class="op" id="7910160">,</span>&nbsp;<span class="string" id="7910162">&#34;tcp&#34;</span><span class="op" id="7910167">,</span>&nbsp;<span class="string" id="7910169">&#34;google.com&#34;</span><span class="op" id="7910181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910185">&#34;.google.com&#34;</span><span class="op" id="7910198">,</span>&nbsp;<span class="string" id="7910200">&#34;.google.com&#34;</span><span class="op" id="7910213">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910216">}</span><span class="op" id="7910217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910224">&#34;&#34;</span><span class="op" id="7910226">,</span>&nbsp;<span class="string" id="7910228">&#34;&#34;</span><span class="op" id="7910230">,</span>&nbsp;<span class="string" id="7910232">&#34;_xmpp-server._tcp.google.com&#34;</span><span class="op" id="7910262">,</span>&nbsp;<span class="comment" id="7910264">//&nbsp;non-standard&nbsp;back&nbsp;door</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7910292">&#34;.google.com&#34;</span><span class="op" id="7910305">,</span>&nbsp;<span class="string" id="7910307">&#34;.google.com&#34;</span><span class="op" id="7910320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910323">}</span><span class="op" id="7910324">,</span><br>
<span class="lineno">30</span><span class="op" id="7910326">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7910329">func</span>&nbsp;<span class="ident" id="7910334">TestLookupGoogleSRV</span><span class="op" id="7910353">(</span><span class="ident" id="7910354">t</span>&nbsp;<span class="op" id="7910356">*</span><span class="ident" id="7910357">testing</span><span class="op" id="7910364">.</span><span class="ident" id="7910365">T</span><span class="op" id="7910366">)</span>&nbsp;<span class="op" id="7910368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910371">if</span>&nbsp;<span class="ident" id="7910374">testing</span><span class="op" id="7910381">.</span><span class="ident" id="7910382">Short</span><span class="op" id="7910387">(</span><span class="op" id="7910388">)</span>&nbsp;<span class="op" id="7910390">||</span>&nbsp;<span class="op" id="7910393">!</span><span class="op" id="7910394">*</span><span class="ident" id="7910395">testExternal</span>&nbsp;<span class="op" id="7910408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910412">t</span><span class="op" id="7910413">.</span><span class="ident" id="7910414">Skip</span><span class="op" id="7910418">(</span><span class="string" id="7910419">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7910460">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910467">for</span>&nbsp;<span class="ident" id="7910471">_</span><span class="op" id="7910472">,</span>&nbsp;<span class="ident" id="7910474">tt</span>&nbsp;<span class="op" id="7910477">:=</span>&nbsp;<span class="keyword" id="7910480">range</span>&nbsp;<span class="ident" id="7910486">lookupGoogleSRVTests</span>&nbsp;<span class="op" id="7910507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910511">cname</span><span class="op" id="7910516">,</span>&nbsp;<span class="ident" id="7910518">srvs</span><span class="op" id="7910522">,</span>&nbsp;<span class="ident" id="7910524">err</span>&nbsp;<span class="op" id="7910528">:=</span>&nbsp;<span class="ident" id="7910531">LookupSRV</span><span class="op" id="7910540">(</span><span class="ident" id="7910541">tt</span><span class="op" id="7910543">.</span><span class="ident" id="7910544">service</span><span class="op" id="7910551">,</span>&nbsp;<span class="ident" id="7910553">tt</span><span class="op" id="7910555">.</span><span class="ident" id="7910556">proto</span><span class="op" id="7910561">,</span>&nbsp;<span class="ident" id="7910563">tt</span><span class="op" id="7910565">.</span><span class="ident" id="7910566">name</span><span class="op" id="7910570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910574">if</span>&nbsp;<span class="ident" id="7910577">err</span>&nbsp;<span class="op" id="7910581">!=</span>&nbsp;<span class="ident" id="7910584">nil</span>&nbsp;<span class="op" id="7910588">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910593">t</span><span class="op" id="7910594">.</span><span class="ident" id="7910595">Fatal</span><span class="op" id="7910600">(</span><span class="ident" id="7910601">err</span><span class="op" id="7910604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910612">if</span>&nbsp;<span class="builtinfunc" id="7910615">len</span><span class="op" id="7910618">(</span><span class="ident" id="7910619">srvs</span><span class="op" id="7910623">)</span>&nbsp;<span class="op" id="7910625">==</span>&nbsp;<span class="num" id="7910628">0</span>&nbsp;<span class="op" id="7910630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910635">t</span><span class="op" id="7910636">.</span><span class="ident" id="7910637">Error</span><span class="op" id="7910642">(</span><span class="string" id="7910643">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7910658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910662">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910666">if</span>&nbsp;<span class="op" id="7910669">!</span><span class="ident" id="7910670">strings</span><span class="op" id="7910677">.</span><span class="ident" id="7910678">Contains</span><span class="op" id="7910686">(</span><span class="ident" id="7910687">cname</span><span class="op" id="7910692">,</span>&nbsp;<span class="ident" id="7910694">tt</span><span class="op" id="7910696">.</span><span class="ident" id="7910697">cname</span><span class="op" id="7910702">)</span>&nbsp;<span class="op" id="7910704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910709">t</span><span class="op" id="7910710">.</span><span class="ident" id="7910711">Errorf</span><span class="op" id="7910717">(</span><span class="string" id="7910718">&#34;got&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7910735">,</span>&nbsp;<span class="ident" id="7910737">cname</span><span class="op" id="7910742">,</span>&nbsp;<span class="ident" id="7910744">tt</span><span class="op" id="7910746">.</span><span class="ident" id="7910747">cname</span><span class="op" id="7910752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910760">for</span>&nbsp;<span class="ident" id="7910764">_</span><span class="op" id="7910765">,</span>&nbsp;<span class="ident" id="7910767">srv</span>&nbsp;<span class="op" id="7910771">:=</span>&nbsp;<span class="keyword" id="7910774">range</span>&nbsp;<span class="ident" id="7910780">srvs</span>&nbsp;<span class="op" id="7910785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910790">if</span>&nbsp;<span class="op" id="7910793">!</span><span class="ident" id="7910794">strings</span><span class="op" id="7910801">.</span><span class="ident" id="7910802">Contains</span><span class="op" id="7910810">(</span><span class="ident" id="7910811">srv</span><span class="op" id="7910814">.</span><span class="ident" id="7910815">Target</span><span class="op" id="7910821">,</span>&nbsp;<span class="ident" id="7910823">tt</span><span class="op" id="7910825">.</span><span class="ident" id="7910826">target</span><span class="op" id="7910832">)</span>&nbsp;<span class="op" id="7910834">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910840">t</span><span class="op" id="7910841">.</span><span class="ident" id="7910842">Errorf</span><span class="op" id="7910848">(</span><span class="string" id="7910849">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;%q&#34;</span><span class="op" id="7910886">,</span>&nbsp;<span class="ident" id="7910888">srv</span><span class="op" id="7910891">,</span>&nbsp;<span class="ident" id="7910893">tt</span><span class="op" id="7910895">.</span><span class="ident" id="7910896">target</span><span class="op" id="7910902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7910914">}</span><br>
<span class="lineno"></span><span class="op" id="7910916">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="7910919">func</span>&nbsp;<span class="ident" id="7910924">TestLookupGmailMX</span><span class="op" id="7910941">(</span><span class="ident" id="7910942">t</span>&nbsp;<span class="op" id="7910944">*</span><span class="ident" id="7910945">testing</span><span class="op" id="7910952">.</span><span class="ident" id="7910953">T</span><span class="op" id="7910954">)</span>&nbsp;<span class="op" id="7910956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910959">if</span>&nbsp;<span class="ident" id="7910962">testing</span><span class="op" id="7910969">.</span><span class="ident" id="7910970">Short</span><span class="op" id="7910975">(</span><span class="op" id="7910976">)</span>&nbsp;<span class="op" id="7910978">||</span>&nbsp;<span class="op" id="7910981">!</span><span class="op" id="7910982">*</span><span class="ident" id="7910983">testExternal</span>&nbsp;<span class="op" id="7910996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911000">t</span><span class="op" id="7911001">.</span><span class="ident" id="7911002">Skip</span><span class="op" id="7911006">(</span><span class="string" id="7911007">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7911048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911051">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911055">mxs</span><span class="op" id="7911058">,</span>&nbsp;<span class="ident" id="7911060">err</span>&nbsp;<span class="op" id="7911064">:=</span>&nbsp;<span class="ident" id="7911067">LookupMX</span><span class="op" id="7911075">(</span><span class="string" id="7911076">&#34;gmail.com&#34;</span><span class="op" id="7911087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911090">if</span>&nbsp;<span class="ident" id="7911093">err</span>&nbsp;<span class="op" id="7911097">!=</span>&nbsp;<span class="ident" id="7911100">nil</span>&nbsp;<span class="op" id="7911104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911108">t</span><span class="op" id="7911109">.</span><span class="ident" id="7911110">Fatal</span><span class="op" id="7911115">(</span><span class="ident" id="7911116">err</span><span class="op" id="7911119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911122">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911125">if</span>&nbsp;<span class="builtinfunc" id="7911128">len</span><span class="op" id="7911131">(</span><span class="ident" id="7911132">mxs</span><span class="op" id="7911135">)</span>&nbsp;<span class="op" id="7911137">==</span>&nbsp;<span class="num" id="7911140">0</span>&nbsp;<span class="op" id="7911142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911146">t</span><span class="op" id="7911147">.</span><span class="ident" id="7911148">Error</span><span class="op" id="7911153">(</span><span class="string" id="7911154">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7911169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911175">for</span>&nbsp;<span class="ident" id="7911179">_</span><span class="op" id="7911180">,</span>&nbsp;<span class="ident" id="7911182">mx</span>&nbsp;<span class="op" id="7911185">:=</span>&nbsp;<span class="keyword" id="7911188">range</span>&nbsp;<span class="ident" id="7911194">mxs</span>&nbsp;<span class="op" id="7911198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911202">if</span>&nbsp;<span class="op" id="7911205">!</span><span class="ident" id="7911206">strings</span><span class="op" id="7911213">.</span><span class="ident" id="7911214">Contains</span><span class="op" id="7911222">(</span><span class="ident" id="7911223">mx</span><span class="op" id="7911225">.</span><span class="ident" id="7911226">Host</span><span class="op" id="7911230">,</span>&nbsp;<span class="string" id="7911232">&#34;.google.com&#34;</span><span class="op" id="7911245">)</span>&nbsp;<span class="op" id="7911247">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911252">t</span><span class="op" id="7911253">.</span><span class="ident" id="7911254">Errorf</span><span class="op" id="7911260">(</span><span class="string" id="7911261">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.google.com.&#34;</span><span class="op" id="7911308">,</span>&nbsp;<span class="ident" id="7911310">mx</span><span class="op" id="7911312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911319">}</span><br>
<span class="lineno"></span><span class="op" id="7911321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="7911324">func</span>&nbsp;<span class="ident" id="7911329">TestLookupGmailNS</span><span class="op" id="7911346">(</span><span class="ident" id="7911347">t</span>&nbsp;<span class="op" id="7911349">*</span><span class="ident" id="7911350">testing</span><span class="op" id="7911357">.</span><span class="ident" id="7911358">T</span><span class="op" id="7911359">)</span>&nbsp;<span class="op" id="7911361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911364">if</span>&nbsp;<span class="ident" id="7911367">testing</span><span class="op" id="7911374">.</span><span class="ident" id="7911375">Short</span><span class="op" id="7911380">(</span><span class="op" id="7911381">)</span>&nbsp;<span class="op" id="7911383">||</span>&nbsp;<span class="op" id="7911386">!</span><span class="op" id="7911387">*</span><span class="ident" id="7911388">testExternal</span>&nbsp;<span class="op" id="7911401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911405">t</span><span class="op" id="7911406">.</span><span class="ident" id="7911407">Skip</span><span class="op" id="7911411">(</span><span class="string" id="7911412">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7911453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911460">nss</span><span class="op" id="7911463">,</span>&nbsp;<span class="ident" id="7911465">err</span>&nbsp;<span class="op" id="7911469">:=</span>&nbsp;<span class="ident" id="7911472">LookupNS</span><span class="op" id="7911480">(</span><span class="string" id="7911481">&#34;gmail.com&#34;</span><span class="op" id="7911492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911495">if</span>&nbsp;<span class="ident" id="7911498">err</span>&nbsp;<span class="op" id="7911502">!=</span>&nbsp;<span class="ident" id="7911505">nil</span>&nbsp;<span class="op" id="7911509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911513">t</span><span class="op" id="7911514">.</span><span class="ident" id="7911515">Fatal</span><span class="op" id="7911520">(</span><span class="ident" id="7911521">err</span><span class="op" id="7911524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911530">if</span>&nbsp;<span class="builtinfunc" id="7911533">len</span><span class="op" id="7911536">(</span><span class="ident" id="7911537">nss</span><span class="op" id="7911540">)</span>&nbsp;<span class="op" id="7911542">==</span>&nbsp;<span class="num" id="7911545">0</span>&nbsp;<span class="op" id="7911547">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911551">t</span><span class="op" id="7911552">.</span><span class="ident" id="7911553">Error</span><span class="op" id="7911558">(</span><span class="string" id="7911559">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7911574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911580">for</span>&nbsp;<span class="ident" id="7911584">_</span><span class="op" id="7911585">,</span>&nbsp;<span class="ident" id="7911587">ns</span>&nbsp;<span class="op" id="7911590">:=</span>&nbsp;<span class="keyword" id="7911593">range</span>&nbsp;<span class="ident" id="7911599">nss</span>&nbsp;<span class="op" id="7911603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911607">if</span>&nbsp;<span class="op" id="7911610">!</span><span class="ident" id="7911611">strings</span><span class="op" id="7911618">.</span><span class="ident" id="7911619">Contains</span><span class="op" id="7911627">(</span><span class="ident" id="7911628">ns</span><span class="op" id="7911630">.</span><span class="ident" id="7911631">Host</span><span class="op" id="7911635">,</span>&nbsp;<span class="string" id="7911637">&#34;.google.com&#34;</span><span class="op" id="7911650">)</span>&nbsp;<span class="op" id="7911652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911657">t</span><span class="op" id="7911658">.</span><span class="ident" id="7911659">Errorf</span><span class="op" id="7911665">(</span><span class="string" id="7911666">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.google.com.&#34;</span><span class="op" id="7911713">,</span>&nbsp;<span class="ident" id="7911715">ns</span><span class="op" id="7911717">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911724">}</span><br>
<span class="lineno"></span><span class="op" id="7911726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7911729">func</span>&nbsp;<span class="ident" id="7911734">TestLookupGmailTXT</span><span class="op" id="7911752">(</span><span class="ident" id="7911753">t</span>&nbsp;<span class="op" id="7911755">*</span><span class="ident" id="7911756">testing</span><span class="op" id="7911763">.</span><span class="ident" id="7911764">T</span><span class="op" id="7911765">)</span>&nbsp;<span class="op" id="7911767">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911770">if</span>&nbsp;<span class="ident" id="7911773">testing</span><span class="op" id="7911780">.</span><span class="ident" id="7911781">Short</span><span class="op" id="7911786">(</span><span class="op" id="7911787">)</span>&nbsp;<span class="op" id="7911789">||</span>&nbsp;<span class="op" id="7911792">!</span><span class="op" id="7911793">*</span><span class="ident" id="7911794">testExternal</span>&nbsp;<span class="op" id="7911807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911811">t</span><span class="op" id="7911812">.</span><span class="ident" id="7911813">Skip</span><span class="op" id="7911817">(</span><span class="string" id="7911818">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7911859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911866">txts</span><span class="op" id="7911870">,</span>&nbsp;<span class="ident" id="7911872">err</span>&nbsp;<span class="op" id="7911876">:=</span>&nbsp;<span class="ident" id="7911879">LookupTXT</span><span class="op" id="7911888">(</span><span class="string" id="7911889">&#34;gmail.com&#34;</span><span class="op" id="7911900">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911903">if</span>&nbsp;<span class="ident" id="7911906">err</span>&nbsp;<span class="op" id="7911910">!=</span>&nbsp;<span class="ident" id="7911913">nil</span>&nbsp;<span class="op" id="7911917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911921">t</span><span class="op" id="7911922">.</span><span class="ident" id="7911923">Fatal</span><span class="op" id="7911928">(</span><span class="ident" id="7911929">err</span><span class="op" id="7911932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911938">if</span>&nbsp;<span class="builtinfunc" id="7911941">len</span><span class="op" id="7911944">(</span><span class="ident" id="7911945">txts</span><span class="op" id="7911949">)</span>&nbsp;<span class="op" id="7911951">==</span>&nbsp;<span class="num" id="7911954">0</span>&nbsp;<span class="op" id="7911956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911960">t</span><span class="op" id="7911961">.</span><span class="ident" id="7911962">Error</span><span class="op" id="7911967">(</span><span class="string" id="7911968">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7911983">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7911986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911989">for</span>&nbsp;<span class="ident" id="7911993">_</span><span class="op" id="7911994">,</span>&nbsp;<span class="ident" id="7911996">txt</span>&nbsp;<span class="op" id="7912000">:=</span>&nbsp;<span class="keyword" id="7912003">range</span>&nbsp;<span class="ident" id="7912009">txts</span>&nbsp;<span class="op" id="7912014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7912018">if</span>&nbsp;<span class="op" id="7912021">!</span><span class="ident" id="7912022">strings</span><span class="op" id="7912029">.</span><span class="ident" id="7912030">Contains</span><span class="op" id="7912038">(</span><span class="ident" id="7912039">txt</span><span class="op" id="7912042">,</span>&nbsp;<span class="string" id="7912044">&#34;spf&#34;</span><span class="op" id="7912049">)</span>&nbsp;<span class="op" id="7912051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912056">t</span><span class="op" id="7912057">.</span><span class="ident" id="7912058">Errorf</span><span class="op" id="7912064">(</span><span class="string" id="7912065">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;spf&nbsp;record&#34;</span><span class="op" id="7912092">,</span>&nbsp;<span class="ident" id="7912094">txt</span><span class="op" id="7912097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912101">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912104">}</span><br>
<span class="lineno"></span><span class="op" id="7912106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7912109">var</span>&nbsp;<span class="ident" id="7912113">lookupGooglePublicDNSAddrs</span>&nbsp;<span class="op" id="7912140">=</span>&nbsp;<span class="op" id="7912142">[</span><span class="op" id="7912143">]</span><span class="keyword" id="7912144">struct</span>&nbsp;<span class="op" id="7912151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912154">addr</span>&nbsp;<span class="builtintype" id="7912159">string</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912167">name</span>&nbsp;<span class="builtintype" id="7912172">string</span><br>
<span class="lineno"></span><span class="op" id="7912179">}</span><span class="op" id="7912180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912183">{</span><span class="string" id="7912184">&#34;8.8.8.8&#34;</span><span class="op" id="7912193">,</span>&nbsp;<span class="string" id="7912195">&#34;.google.com.&#34;</span><span class="op" id="7912209">}</span><span class="op" id="7912210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912213">{</span><span class="string" id="7912214">&#34;8.8.4.4&#34;</span><span class="op" id="7912223">,</span>&nbsp;<span class="string" id="7912225">&#34;.google.com.&#34;</span><span class="op" id="7912239">}</span><span class="op" id="7912240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912243">{</span><span class="string" id="7912244">&#34;2001:4860:4860::8888&#34;</span><span class="op" id="7912266">,</span>&nbsp;<span class="string" id="7912268">&#34;.google.com.&#34;</span><span class="op" id="7912282">}</span><span class="op" id="7912283">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912286">{</span><span class="string" id="7912287">&#34;2001:4860:4860::8844&#34;</span><span class="op" id="7912309">,</span>&nbsp;<span class="string" id="7912311">&#34;.google.com.&#34;</span><span class="op" id="7912325">}</span><span class="op" id="7912326">,</span><br>
<span class="lineno"></span><span class="op" id="7912328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7912331">func</span>&nbsp;<span class="ident" id="7912336">TestLookupGooglePublicDNSAddr</span><span class="op" id="7912365">(</span><span class="ident" id="7912366">t</span>&nbsp;<span class="op" id="7912368">*</span><span class="ident" id="7912369">testing</span><span class="op" id="7912376">.</span><span class="ident" id="7912377">T</span><span class="op" id="7912378">)</span>&nbsp;<span class="op" id="7912380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7912383">if</span>&nbsp;<span class="ident" id="7912386">testing</span><span class="op" id="7912393">.</span><span class="ident" id="7912394">Short</span><span class="op" id="7912399">(</span><span class="op" id="7912400">)</span>&nbsp;<span class="op" id="7912402">||</span>&nbsp;<span class="op" id="7912405">!</span><span class="op" id="7912406">*</span><span class="ident" id="7912407">testExternal</span>&nbsp;<span class="op" id="7912420">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912424">t</span><span class="op" id="7912425">.</span><span class="ident" id="7912426">Skip</span><span class="op" id="7912430">(</span><span class="string" id="7912431">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7912472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7912479">for</span>&nbsp;<span class="ident" id="7912483">_</span><span class="op" id="7912484">,</span>&nbsp;<span class="ident" id="7912486">tt</span>&nbsp;<span class="op" id="7912489">:=</span>&nbsp;<span class="keyword" id="7912492">range</span>&nbsp;<span class="ident" id="7912498">lookupGooglePublicDNSAddrs</span>&nbsp;<span class="op" id="7912525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912529">names</span><span class="op" id="7912534">,</span>&nbsp;<span class="ident" id="7912536">err</span>&nbsp;<span class="op" id="7912540">:=</span>&nbsp;<span class="ident" id="7912543">LookupAddr</span><span class="op" id="7912553">(</span><span class="ident" id="7912554">tt</span><span class="op" id="7912556">.</span><span class="ident" id="7912557">addr</span><span class="op" id="7912561">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7912565">if</span>&nbsp;<span class="ident" id="7912568">err</span>&nbsp;<span class="op" id="7912572">!=</span>&nbsp;<span class="ident" id="7912575">nil</span>&nbsp;<span class="op" id="7912579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912584">t</span><span class="op" id="7912585">.</span><span class="ident" id="7912586">Fatal</span><span class="op" id="7912591">(</span><span class="ident" id="7912592">err</span><span class="op" id="7912595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7912603">if</span>&nbsp;<span class="builtinfunc" id="7912606">len</span><span class="op" id="7912609">(</span><span class="ident" id="7912610">names</span><span class="op" id="7912615">)</span>&nbsp;<span class="op" id="7912617">==</span>&nbsp;<span class="num" id="7912620">0</span>&nbsp;<span class="op" id="7912622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912627">t</span><span class="op" id="7912628">.</span><span class="ident" id="7912629">Error</span><span class="op" id="7912634">(</span><span class="string" id="7912635">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7912650">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7912658">for</span>&nbsp;<span class="ident" id="7912662">_</span><span class="op" id="7912663">,</span>&nbsp;<span class="ident" id="7912665">name</span>&nbsp;<span class="op" id="7912670">:=</span>&nbsp;<span class="keyword" id="7912673">range</span>&nbsp;<span class="ident" id="7912679">names</span>&nbsp;<span class="op" id="7912685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7912690">if</span>&nbsp;<span class="op" id="7912693">!</span><span class="ident" id="7912694">strings</span><span class="op" id="7912701">.</span><span class="ident" id="7912702">HasSuffix</span><span class="op" id="7912711">(</span><span class="ident" id="7912712">name</span><span class="op" id="7912716">,</span>&nbsp;<span class="ident" id="7912718">tt</span><span class="op" id="7912720">.</span><span class="ident" id="7912721">name</span><span class="op" id="7912725">)</span>&nbsp;<span class="op" id="7912727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912733">t</span><span class="op" id="7912734">.</span><span class="ident" id="7912735">Errorf</span><span class="op" id="7912741">(</span><span class="string" id="7912742">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;%q&#34;</span><span class="op" id="7912779">,</span>&nbsp;<span class="ident" id="7912781">name</span><span class="op" id="7912785">,</span>&nbsp;<span class="ident" id="7912787">tt</span><span class="op" id="7912789">.</span><span class="ident" id="7912790">name</span><span class="op" id="7912794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912799">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912806">}</span><br>
<span class="lineno"></span><span class="op" id="7912808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7912811">func</span>&nbsp;<span class="ident" id="7912816">TestLookupIANACNAME</span><span class="op" id="7912835">(</span><span class="ident" id="7912836">t</span>&nbsp;<span class="op" id="7912838">*</span><span class="ident" id="7912839">testing</span><span class="op" id="7912846">.</span><span class="ident" id="7912847">T</span><span class="op" id="7912848">)</span>&nbsp;<span class="op" id="7912850">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7912853">if</span>&nbsp;<span class="ident" id="7912856">testing</span><span class="op" id="7912863">.</span><span class="ident" id="7912864">Short</span><span class="op" id="7912869">(</span><span class="op" id="7912870">)</span>&nbsp;<span class="op" id="7912872">||</span>&nbsp;<span class="op" id="7912875">!</span><span class="op" id="7912876">*</span><span class="ident" id="7912877">testExternal</span>&nbsp;<span class="op" id="7912890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912894">t</span><span class="op" id="7912895">.</span><span class="ident" id="7912896">Skip</span><span class="op" id="7912900">(</span><span class="string" id="7912901">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7912942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912945">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912949">cname</span><span class="op" id="7912954">,</span>&nbsp;<span class="ident" id="7912956">err</span>&nbsp;<span class="op" id="7912960">:=</span>&nbsp;<span class="ident" id="7912963">LookupCNAME</span><span class="op" id="7912974">(</span><span class="string" id="7912975">&#34;www.iana.org&#34;</span><span class="op" id="7912989">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7912992">if</span>&nbsp;<span class="ident" id="7912995">err</span>&nbsp;<span class="op" id="7912999">!=</span>&nbsp;<span class="ident" id="7913002">nil</span>&nbsp;<span class="op" id="7913006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913010">t</span><span class="op" id="7913011">.</span><span class="ident" id="7913012">Fatal</span><span class="op" id="7913017">(</span><span class="ident" id="7913018">err</span><span class="op" id="7913021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913027">if</span>&nbsp;<span class="op" id="7913030">!</span><span class="ident" id="7913031">strings</span><span class="op" id="7913038">.</span><span class="ident" id="7913039">HasSuffix</span><span class="op" id="7913048">(</span><span class="ident" id="7913049">cname</span><span class="op" id="7913054">,</span>&nbsp;<span class="string" id="7913056">&#34;.icann.org.&#34;</span><span class="op" id="7913069">)</span>&nbsp;<span class="op" id="7913071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913075">t</span><span class="op" id="7913076">.</span><span class="ident" id="7913077">Errorf</span><span class="op" id="7913083">(</span><span class="string" id="7913084">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.icann.org.&#34;</span><span class="op" id="7913130">,</span>&nbsp;<span class="ident" id="7913132">cname</span><span class="op" id="7913137">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913140">}</span><br>
<span class="lineno"></span><span class="op" id="7913142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7913145">func</span>&nbsp;<span class="ident" id="7913150">TestLookupGoogleHost</span><span class="op" id="7913170">(</span><span class="ident" id="7913171">t</span>&nbsp;<span class="op" id="7913173">*</span><span class="ident" id="7913174">testing</span><span class="op" id="7913181">.</span><span class="ident" id="7913182">T</span><span class="op" id="7913183">)</span>&nbsp;<span class="op" id="7913185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913188">if</span>&nbsp;<span class="ident" id="7913191">testing</span><span class="op" id="7913198">.</span><span class="ident" id="7913199">Short</span><span class="op" id="7913204">(</span><span class="op" id="7913205">)</span>&nbsp;<span class="op" id="7913207">||</span>&nbsp;<span class="op" id="7913210">!</span><span class="op" id="7913211">*</span><span class="ident" id="7913212">testExternal</span>&nbsp;<span class="op" id="7913225">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913229">t</span><span class="op" id="7913230">.</span><span class="ident" id="7913231">Skip</span><span class="op" id="7913235">(</span><span class="string" id="7913236">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7913277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913284">addrs</span><span class="op" id="7913289">,</span>&nbsp;<span class="ident" id="7913291">err</span>&nbsp;<span class="op" id="7913295">:=</span>&nbsp;<span class="ident" id="7913298">LookupHost</span><span class="op" id="7913308">(</span><span class="string" id="7913309">&#34;google.com&#34;</span><span class="op" id="7913321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913324">if</span>&nbsp;<span class="ident" id="7913327">err</span>&nbsp;<span class="op" id="7913331">!=</span>&nbsp;<span class="ident" id="7913334">nil</span>&nbsp;<span class="op" id="7913338">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913342">t</span><span class="op" id="7913343">.</span><span class="ident" id="7913344">Fatal</span><span class="op" id="7913349">(</span><span class="ident" id="7913350">err</span><span class="op" id="7913353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913359">if</span>&nbsp;<span class="builtinfunc" id="7913362">len</span><span class="op" id="7913365">(</span><span class="ident" id="7913366">addrs</span><span class="op" id="7913371">)</span>&nbsp;<span class="op" id="7913373">==</span>&nbsp;<span class="num" id="7913376">0</span>&nbsp;<span class="op" id="7913378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913382">t</span><span class="op" id="7913383">.</span><span class="ident" id="7913384">Error</span><span class="op" id="7913389">(</span><span class="string" id="7913390">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7913405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913408">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913411">for</span>&nbsp;<span class="ident" id="7913415">_</span><span class="op" id="7913416">,</span>&nbsp;<span class="ident" id="7913418">addr</span>&nbsp;<span class="op" id="7913423">:=</span>&nbsp;<span class="keyword" id="7913426">range</span>&nbsp;<span class="ident" id="7913432">addrs</span>&nbsp;<span class="op" id="7913438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913442">if</span>&nbsp;<span class="ident" id="7913445">ParseIP</span><span class="op" id="7913452">(</span><span class="ident" id="7913453">addr</span><span class="op" id="7913457">)</span>&nbsp;<span class="op" id="7913459">==</span>&nbsp;<span class="ident" id="7913462">nil</span>&nbsp;<span class="op" id="7913466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913471">t</span><span class="op" id="7913472">.</span><span class="ident" id="7913473">Errorf</span><span class="op" id="7913479">(</span><span class="string" id="7913480">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;literal&nbsp;ip&nbsp;address&#34;</span><span class="op" id="7913515">,</span>&nbsp;<span class="ident" id="7913517">addr</span><span class="op" id="7913521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913528">}</span><br>
<span class="lineno">175</span><span class="op" id="7913530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7913533">func</span>&nbsp;<span class="ident" id="7913538">TestLookupGoogleIP</span><span class="op" id="7913556">(</span><span class="ident" id="7913557">t</span>&nbsp;<span class="op" id="7913559">*</span><span class="ident" id="7913560">testing</span><span class="op" id="7913567">.</span><span class="ident" id="7913568">T</span><span class="op" id="7913569">)</span>&nbsp;<span class="op" id="7913571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913574">if</span>&nbsp;<span class="ident" id="7913577">testing</span><span class="op" id="7913584">.</span><span class="ident" id="7913585">Short</span><span class="op" id="7913590">(</span><span class="op" id="7913591">)</span>&nbsp;<span class="op" id="7913593">||</span>&nbsp;<span class="op" id="7913596">!</span><span class="op" id="7913597">*</span><span class="ident" id="7913598">testExternal</span>&nbsp;<span class="op" id="7913611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913615">t</span><span class="op" id="7913616">.</span><span class="ident" id="7913617">Skip</span><span class="op" id="7913621">(</span><span class="string" id="7913622">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7913663">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913670">ips</span><span class="op" id="7913673">,</span>&nbsp;<span class="ident" id="7913675">err</span>&nbsp;<span class="op" id="7913679">:=</span>&nbsp;<span class="ident" id="7913682">LookupIP</span><span class="op" id="7913690">(</span><span class="string" id="7913691">&#34;google.com&#34;</span><span class="op" id="7913703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913706">if</span>&nbsp;<span class="ident" id="7913709">err</span>&nbsp;<span class="op" id="7913713">!=</span>&nbsp;<span class="ident" id="7913716">nil</span>&nbsp;<span class="op" id="7913720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913724">t</span><span class="op" id="7913725">.</span><span class="ident" id="7913726">Fatal</span><span class="op" id="7913731">(</span><span class="ident" id="7913732">err</span><span class="op" id="7913735">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913741">if</span>&nbsp;<span class="builtinfunc" id="7913744">len</span><span class="op" id="7913747">(</span><span class="ident" id="7913748">ips</span><span class="op" id="7913751">)</span>&nbsp;<span class="op" id="7913753">==</span>&nbsp;<span class="num" id="7913756">0</span>&nbsp;<span class="op" id="7913758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913762">t</span><span class="op" id="7913763">.</span><span class="ident" id="7913764">Error</span><span class="op" id="7913769">(</span><span class="string" id="7913770">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7913785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913791">for</span>&nbsp;<span class="ident" id="7913795">_</span><span class="op" id="7913796">,</span>&nbsp;<span class="ident" id="7913798">ip</span>&nbsp;<span class="op" id="7913801">:=</span>&nbsp;<span class="keyword" id="7913804">range</span>&nbsp;<span class="ident" id="7913810">ips</span>&nbsp;<span class="op" id="7913814">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913818">if</span>&nbsp;<span class="ident" id="7913821">ip</span><span class="op" id="7913823">.</span><span class="ident" id="7913824">To4</span><span class="op" id="7913827">(</span><span class="op" id="7913828">)</span>&nbsp;<span class="op" id="7913830">==</span>&nbsp;<span class="ident" id="7913833">nil</span>&nbsp;<span class="op" id="7913837">&amp;&amp;</span>&nbsp;<span class="ident" id="7913840">ip</span><span class="op" id="7913842">.</span><span class="ident" id="7913843">To16</span><span class="op" id="7913847">(</span><span class="op" id="7913848">)</span>&nbsp;<span class="op" id="7913850">==</span>&nbsp;<span class="ident" id="7913853">nil</span>&nbsp;<span class="op" id="7913857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913862">t</span><span class="op" id="7913863">.</span><span class="ident" id="7913864">Errorf</span><span class="op" id="7913870">(</span><span class="string" id="7913871">&#34;got&nbsp;%v;&nbsp;want&nbsp;an&nbsp;ip&nbsp;address&#34;</span><span class="op" id="7913899">,</span>&nbsp;<span class="ident" id="7913901">ip</span><span class="op" id="7913903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913910">}</span><br>
<span class="lineno"></span><span class="op" id="7913912">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="7913915">var</span>&nbsp;<span class="ident" id="7913919">revAddrTests</span>&nbsp;<span class="op" id="7913932">=</span>&nbsp;<span class="op" id="7913934">[</span><span class="op" id="7913935">]</span><span class="keyword" id="7913936">struct</span>&nbsp;<span class="op" id="7913943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913946">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7913956">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913964">Reverse</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7913974">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913982">ErrPrefix</span>&nbsp;<span class="builtintype" id="7913992">string</span><br>
<span class="lineno">200</span><span class="op" id="7913999">}</span><span class="op" id="7914000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914003">{</span><span class="string" id="7914004">&#34;1.2.3.4&#34;</span><span class="op" id="7914013">,</span>&nbsp;<span class="string" id="7914015">&#34;4.3.2.1.in-addr.arpa.&#34;</span><span class="op" id="7914038">,</span>&nbsp;<span class="string" id="7914040">&#34;&#34;</span><span class="op" id="7914042">}</span><span class="op" id="7914043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914046">{</span><span class="string" id="7914047">&#34;245.110.36.114&#34;</span><span class="op" id="7914063">,</span>&nbsp;<span class="string" id="7914065">&#34;114.36.110.245.in-addr.arpa.&#34;</span><span class="op" id="7914095">,</span>&nbsp;<span class="string" id="7914097">&#34;&#34;</span><span class="op" id="7914099">}</span><span class="op" id="7914100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914103">{</span><span class="string" id="7914104">&#34;::ffff:12.34.56.78&#34;</span><span class="op" id="7914124">,</span>&nbsp;<span class="string" id="7914126">&#34;78.56.34.12.in-addr.arpa.&#34;</span><span class="op" id="7914153">,</span>&nbsp;<span class="string" id="7914155">&#34;&#34;</span><span class="op" id="7914157">}</span><span class="op" id="7914158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914161">{</span><span class="string" id="7914162">&#34;::1&#34;</span><span class="op" id="7914167">,</span>&nbsp;<span class="string" id="7914169">&#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa.&#34;</span><span class="op" id="7914244">,</span>&nbsp;<span class="string" id="7914246">&#34;&#34;</span><span class="op" id="7914248">}</span><span class="op" id="7914249">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914252">{</span><span class="string" id="7914253">&#34;1::&#34;</span><span class="op" id="7914258">,</span>&nbsp;<span class="string" id="7914260">&#34;0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1.0.0.0.ip6.arpa.&#34;</span><span class="op" id="7914335">,</span>&nbsp;<span class="string" id="7914337">&#34;&#34;</span><span class="op" id="7914339">}</span><span class="op" id="7914340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914343">{</span><span class="string" id="7914344">&#34;1234:567::89a:bcde&#34;</span><span class="op" id="7914364">,</span>&nbsp;<span class="string" id="7914366">&#34;e.d.c.b.a.9.8.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.7.6.5.0.4.3.2.1.ip6.arpa.&#34;</span><span class="op" id="7914441">,</span>&nbsp;<span class="string" id="7914443">&#34;&#34;</span><span class="op" id="7914445">}</span><span class="op" id="7914446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914449">{</span><span class="string" id="7914450">&#34;1234:567:fefe:bcbc:adad:9e4a:89a:bcde&#34;</span><span class="op" id="7914489">,</span>&nbsp;<span class="string" id="7914491">&#34;e.d.c.b.a.9.8.0.a.4.e.9.d.a.d.a.c.b.c.b.e.f.e.f.7.6.5.0.4.3.2.1.ip6.arpa.&#34;</span><span class="op" id="7914566">,</span>&nbsp;<span class="string" id="7914568">&#34;&#34;</span><span class="op" id="7914570">}</span><span class="op" id="7914571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914574">{</span><span class="string" id="7914575">&#34;1.2.3&#34;</span><span class="op" id="7914582">,</span>&nbsp;<span class="string" id="7914584">&#34;&#34;</span><span class="op" id="7914586">,</span>&nbsp;<span class="string" id="7914588">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="7914610">}</span><span class="op" id="7914611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914614">{</span><span class="string" id="7914615">&#34;1.2.3.4.5&#34;</span><span class="op" id="7914626">,</span>&nbsp;<span class="string" id="7914628">&#34;&#34;</span><span class="op" id="7914630">,</span>&nbsp;<span class="string" id="7914632">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="7914654">}</span><span class="op" id="7914655">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914658">{</span><span class="string" id="7914659">&#34;1234:567:bcbca::89a:bcde&#34;</span><span class="op" id="7914685">,</span>&nbsp;<span class="string" id="7914687">&#34;&#34;</span><span class="op" id="7914689">,</span>&nbsp;<span class="string" id="7914691">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="7914713">}</span><span class="op" id="7914714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914717">{</span><span class="string" id="7914718">&#34;1234:567::bcbc:adad::89a:bcde&#34;</span><span class="op" id="7914749">,</span>&nbsp;<span class="string" id="7914751">&#34;&#34;</span><span class="op" id="7914753">,</span>&nbsp;<span class="string" id="7914755">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="7914777">}</span><span class="op" id="7914778">,</span><br>
<span class="lineno"></span><span class="op" id="7914780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7914783">func</span>&nbsp;<span class="ident" id="7914788">TestReverseAddress</span><span class="op" id="7914806">(</span><span class="ident" id="7914807">t</span>&nbsp;<span class="op" id="7914809">*</span><span class="ident" id="7914810">testing</span><span class="op" id="7914817">.</span><span class="ident" id="7914818">T</span><span class="op" id="7914819">)</span>&nbsp;<span class="op" id="7914821">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914824">for</span>&nbsp;<span class="ident" id="7914828">i</span><span class="op" id="7914829">,</span>&nbsp;<span class="ident" id="7914831">tt</span>&nbsp;<span class="op" id="7914834">:=</span>&nbsp;<span class="keyword" id="7914837">range</span>&nbsp;<span class="ident" id="7914843">revAddrTests</span>&nbsp;<span class="op" id="7914856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914860">a</span><span class="op" id="7914861">,</span>&nbsp;<span class="ident" id="7914863">err</span>&nbsp;<span class="op" id="7914867">:=</span>&nbsp;<span class="ident" id="7914870">reverseaddr</span><span class="op" id="7914881">(</span><span class="ident" id="7914882">tt</span><span class="op" id="7914884">.</span><span class="ident" id="7914885">Addr</span><span class="op" id="7914889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914893">if</span>&nbsp;<span class="builtinfunc" id="7914896">len</span><span class="op" id="7914899">(</span><span class="ident" id="7914900">tt</span><span class="op" id="7914902">.</span><span class="ident" id="7914903">ErrPrefix</span><span class="op" id="7914912">)</span>&nbsp;<span class="op" id="7914914">&gt;</span>&nbsp;<span class="num" id="7914916">0</span>&nbsp;<span class="op" id="7914918">&amp;&amp;</span>&nbsp;<span class="ident" id="7914921">err</span>&nbsp;<span class="op" id="7914925">==</span>&nbsp;<span class="ident" id="7914928">nil</span>&nbsp;<span class="op" id="7914932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914937">t</span><span class="op" id="7914938">.</span><span class="ident" id="7914939">Errorf</span><span class="op" id="7914945">(</span><span class="string" id="7914946">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;&lt;nil&gt;&nbsp;(error)&#34;</span><span class="op" id="7914983">,</span>&nbsp;<span class="ident" id="7914985">i</span><span class="op" id="7914986">,</span>&nbsp;<span class="ident" id="7914988">tt</span><span class="op" id="7914990">.</span><span class="ident" id="7914991">ErrPrefix</span><span class="op" id="7915000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915005">continue</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915020">if</span>&nbsp;<span class="builtinfunc" id="7915023">len</span><span class="op" id="7915026">(</span><span class="ident" id="7915027">tt</span><span class="op" id="7915029">.</span><span class="ident" id="7915030">ErrPrefix</span><span class="op" id="7915039">)</span>&nbsp;<span class="op" id="7915041">==</span>&nbsp;<span class="num" id="7915044">0</span>&nbsp;<span class="op" id="7915046">&amp;&amp;</span>&nbsp;<span class="ident" id="7915049">err</span>&nbsp;<span class="op" id="7915053">!=</span>&nbsp;<span class="ident" id="7915056">nil</span>&nbsp;<span class="op" id="7915060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915065">t</span><span class="op" id="7915066">.</span><span class="ident" id="7915067">Errorf</span><span class="op" id="7915073">(</span><span class="string" id="7915074">&#34;#%d:&nbsp;expected&nbsp;&lt;nil&gt;,&nbsp;got&nbsp;%q&nbsp;(error)&#34;</span><span class="op" id="7915111">,</span>&nbsp;<span class="ident" id="7915113">i</span><span class="op" id="7915114">,</span>&nbsp;<span class="ident" id="7915116">err</span><span class="op" id="7915119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915127">if</span>&nbsp;<span class="ident" id="7915130">err</span>&nbsp;<span class="op" id="7915134">!=</span>&nbsp;<span class="ident" id="7915137">nil</span>&nbsp;<span class="op" id="7915141">&amp;&amp;</span>&nbsp;<span class="ident" id="7915144">err</span><span class="op" id="7915147">.</span><span class="op" id="7915148">(</span><span class="op" id="7915149">*</span><span class="ident" id="7915150">DNSError</span><span class="op" id="7915158">)</span><span class="op" id="7915159">.</span><span class="ident" id="7915160">Err</span>&nbsp;<span class="op" id="7915164">!=</span>&nbsp;<span class="ident" id="7915167">tt</span><span class="op" id="7915169">.</span><span class="ident" id="7915170">ErrPrefix</span>&nbsp;<span class="op" id="7915180">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915185">t</span><span class="op" id="7915186">.</span><span class="ident" id="7915187">Errorf</span><span class="op" id="7915193">(</span><span class="string" id="7915194">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&nbsp;(mismatched&nbsp;error)&#34;</span><span class="op" id="7915239">,</span>&nbsp;<span class="ident" id="7915241">i</span><span class="op" id="7915242">,</span>&nbsp;<span class="ident" id="7915244">tt</span><span class="op" id="7915246">.</span><span class="ident" id="7915247">ErrPrefix</span><span class="op" id="7915256">,</span>&nbsp;<span class="ident" id="7915258">err</span><span class="op" id="7915261">.</span><span class="op" id="7915262">(</span><span class="op" id="7915263">*</span><span class="ident" id="7915264">DNSError</span><span class="op" id="7915272">)</span><span class="op" id="7915273">.</span><span class="ident" id="7915274">Err</span><span class="op" id="7915277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915285">if</span>&nbsp;<span class="ident" id="7915288">a</span>&nbsp;<span class="op" id="7915290">!=</span>&nbsp;<span class="ident" id="7915293">tt</span><span class="op" id="7915295">.</span><span class="ident" id="7915296">Reverse</span>&nbsp;<span class="op" id="7915304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915309">t</span><span class="op" id="7915310">.</span><span class="ident" id="7915311">Errorf</span><span class="op" id="7915317">(</span><span class="string" id="7915318">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&nbsp;(reverse&nbsp;address)&#34;</span><span class="op" id="7915362">,</span>&nbsp;<span class="ident" id="7915364">i</span><span class="op" id="7915365">,</span>&nbsp;<span class="ident" id="7915367">tt</span><span class="op" id="7915369">.</span><span class="ident" id="7915370">Reverse</span><span class="op" id="7915377">,</span>&nbsp;<span class="ident" id="7915379">a</span><span class="op" id="7915380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915384">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915387">}</span><br>
<span class="lineno"></span><span class="op" id="7915389">}</span>
</div>
</body>
</html>
