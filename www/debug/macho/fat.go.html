<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5649821">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5649877">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5649931">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5649982">package</span>&nbsp;<span class="ident" id="5649990">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5649997">import</span>&nbsp;<span class="op" id="5650004">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5650007">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5650026">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5650033">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5650039">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="5650044">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5650047">//&nbsp;A&nbsp;FatFile&nbsp;is&nbsp;a&nbsp;Mach-O&nbsp;universal&nbsp;binary&nbsp;that&nbsp;contains&nbsp;at&nbsp;least&nbsp;one&nbsp;architecture.</span><br>
<span class="lineno">15</span><span class="keyword" id="5650130">type</span>&nbsp;<span class="ident" id="5650135">FatFile</span>&nbsp;<span class="keyword" id="5650143">struct</span>&nbsp;<span class="op" id="5650150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650153">Magic</span>&nbsp;&nbsp;<span class="builtintype" id="5650160">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650168">Arches</span>&nbsp;<span class="op" id="5650175">[</span><span class="op" id="5650176">]</span><span class="ident" id="5650177"><a href="/debug/macho/fat.go.html#5650473">FatArch</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650186">closer</span>&nbsp;<span class="ident" id="5650193"><a href="/debug/macho/fat.go.html#5650033">io</a></span><span class="op" id="5650195">.</span><span class="ident" id="5650196">Closer</span><br>
<span class="lineno"></span><span class="op" id="5650203">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="5650206">//&nbsp;A&nbsp;FatArchHeader&nbsp;represents&nbsp;a&nbsp;fat&nbsp;header&nbsp;for&nbsp;a&nbsp;specific&nbsp;image&nbsp;architecture.</span><br>
<span class="lineno"></span><span class="keyword" id="5650284">type</span>&nbsp;<span class="ident" id="5650289">FatArchHeader</span>&nbsp;<span class="keyword" id="5650303">struct</span>&nbsp;<span class="op" id="5650310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650313">Cpu</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5650320"><a href="/debug/macho/macho.go.html#5667584">Cpu</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650325">SubCpu</span>&nbsp;<span class="builtintype" id="5650332">uint32</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650340">Offset</span>&nbsp;<span class="builtintype" id="5650347">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650355">Size</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5650362">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650370">Align</span>&nbsp;&nbsp;<span class="builtintype" id="5650377">uint32</span><br>
<span class="lineno"></span><span class="op" id="5650384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="5650387">const</span>&nbsp;<span class="ident" id="5650393">fatArchHeaderSize</span>&nbsp;<span class="op" id="5650411">=</span>&nbsp;<span class="num" id="5650413">5</span>&nbsp;<span class="op" id="5650415">*</span>&nbsp;<span class="num" id="5650417">4</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5650420">//&nbsp;A&nbsp;FatArch&nbsp;is&nbsp;a&nbsp;Mach-O&nbsp;File&nbsp;inside&nbsp;a&nbsp;FatFile.</span><br>
<span class="lineno"></span><span class="keyword" id="5650468">type</span>&nbsp;<span class="ident" id="5650473">FatArch</span>&nbsp;<span class="keyword" id="5650481">struct</span>&nbsp;<span class="op" id="5650488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650491"><a href="/debug/macho/fat.go.html#5650289">FatArchHeader</a></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5650506">*</span><span class="ident" id="5650507"><a href="/debug/macho/file.go.html#5654269">File</a></span><br>
<span class="lineno"></span><span class="op" id="5650512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5650515">//&nbsp;ErrNotFat&nbsp;is&nbsp;returned&nbsp;from&nbsp;NewFatFile&nbsp;or&nbsp;OpenFat&nbsp;when&nbsp;the&nbsp;file&nbsp;is&nbsp;not&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5650590">//&nbsp;universal&nbsp;binary&nbsp;but&nbsp;may&nbsp;be&nbsp;a&nbsp;thin&nbsp;binary,&nbsp;based&nbsp;on&nbsp;its&nbsp;magic&nbsp;number.</span><br>
<span class="lineno">40</span><span class="keyword" id="5650663">var</span>&nbsp;<span class="ident" id="5650667">ErrNotFat</span>&nbsp;<span class="op" id="5650677">=</span>&nbsp;<span class="op" id="5650679">&amp;</span><span class="ident" id="5650680"><a href="/debug/macho/file.go.html#5657167">FormatError</a></span><span class="op" id="5650691">{</span><span class="num" id="5650692">0</span><span class="op" id="5650693">,</span>&nbsp;<span class="string" id="5650695">&#34;not&nbsp;a&nbsp;fat&nbsp;Mach-O&nbsp;file&#34;</span><span class="op" id="5650718">,</span>&nbsp;<span class="ident" id="5650720">nil</span><span class="op" id="5650723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5650726">//&nbsp;NewFatFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;FatFile&nbsp;for&nbsp;accessing&nbsp;all&nbsp;the&nbsp;Mach-O&nbsp;images&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5650803">//&nbsp;universal&nbsp;binary.&nbsp;The&nbsp;Mach-O&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5650880">//&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno">45</span><span class="keyword" id="5650897">func</span>&nbsp;<span class="ident" id="5650902">NewFatFile</span><span class="op" id="5650912">(</span><span class="ident" id="5650913">r</span>&nbsp;<span class="ident" id="5650915"><a href="/debug/macho/fat.go.html#5650033">io</a></span><span class="op" id="5650917">.</span><span class="ident" id="5650918">ReaderAt</span><span class="op" id="5650926">)</span>&nbsp;<span class="op" id="5650928">(</span><span class="op" id="5650929">*</span><span class="ident" id="5650930"><a href="/debug/macho/fat.go.html#5650135">FatFile</a></span><span class="op" id="5650937">,</span>&nbsp;<span class="builtintype" id="5650939">error</span><span class="op" id="5650944">)</span>&nbsp;<span class="op" id="5650946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650949">var</span>&nbsp;<span class="ident" id="5650953">ff</span>&nbsp;<span class="ident" id="5650956"><a href="/debug/macho/fat.go.html#5650135">FatFile</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650965">sr</span>&nbsp;<span class="op" id="5650968">:=</span>&nbsp;<span class="ident" id="5650971"><a href="/debug/macho/fat.go.html#5650033">io</a></span><span class="op" id="5650973">.</span><span class="ident" id="5650974">NewSectionReader</span><span class="op" id="5650990">(</span><span class="ident" id="5650991"><a href="/debug/macho/fat.go.html#5650913">r</a></span><span class="op" id="5650992">,</span>&nbsp;<span class="num" id="5650994">0</span><span class="op" id="5650995">,</span>&nbsp;<span class="num" id="5650997">1</span><span class="op" id="5650998">&lt;&lt;</span><span class="num" id="5651000">63</span><span class="op" id="5651002">-</span><span class="num" id="5651003">1</span><span class="op" id="5651004">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5651008">//&nbsp;Read&nbsp;the&nbsp;fat_header&nbsp;struct,&nbsp;which&nbsp;is&nbsp;always&nbsp;in&nbsp;big&nbsp;endian.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5651071">//&nbsp;Start&nbsp;with&nbsp;the&nbsp;magic&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5651104">err</span>&nbsp;<span class="op" id="5651108">:=</span>&nbsp;<span class="ident" id="5651111"><a href="/debug/macho/fat.go.html#5650007">binary</a></span><span class="op" id="5651117">.</span><span class="ident" id="5651118">Read</span><span class="op" id="5651122">(</span><span class="ident" id="5651123"><a href="/debug/macho/fat.go.html#5650965">sr</a></span><span class="op" id="5651125">,</span>&nbsp;<span class="ident" id="5651127"><a href="/debug/macho/fat.go.html#5650007">binary</a></span><span class="op" id="5651133">.</span><span class="ident" id="5651134">BigEndian</span><span class="op" id="5651143">,</span>&nbsp;<span class="op" id="5651145">&amp;</span><span class="ident" id="5651146"><a href="/debug/macho/fat.go.html#5650953">ff</a></span><span class="op" id="5651148">.</span><span class="ident" id="5651149">Magic</span><span class="op" id="5651154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651157">if</span>&nbsp;<span class="ident" id="5651160"><a href="/debug/macho/fat.go.html#5651104">err</a></span>&nbsp;<span class="op" id="5651164">!=</span>&nbsp;<span class="ident" id="5651167">nil</span>&nbsp;<span class="op" id="5651171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651175">return</span>&nbsp;<span class="ident" id="5651182">nil</span><span class="op" id="5651185">,</span>&nbsp;<span class="op" id="5651187">&amp;</span><span class="ident" id="5651188"><a href="/debug/macho/file.go.html#5657167">FormatError</a></span><span class="op" id="5651199">{</span><span class="num" id="5651200">0</span><span class="op" id="5651201">,</span>&nbsp;<span class="string" id="5651203">&#34;error&nbsp;reading&nbsp;magic&nbsp;number&#34;</span><span class="op" id="5651231">,</span>&nbsp;<span class="ident" id="5651233">nil</span><span class="op" id="5651236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5651239">}</span>&nbsp;<span class="keyword" id="5651241">else</span>&nbsp;<span class="keyword" id="5651246">if</span>&nbsp;<span class="ident" id="5651249"><a href="/debug/macho/fat.go.html#5650953">ff</a></span><span class="op" id="5651251">.</span><span class="ident" id="5651252">Magic</span>&nbsp;<span class="op" id="5651258">!=</span>&nbsp;<span class="ident" id="5651261"><a href="/debug/macho/macho.go.html#5667315">MagicFat</a></span>&nbsp;<span class="op" id="5651270">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5651274">//&nbsp;See&nbsp;if&nbsp;this&nbsp;is&nbsp;a&nbsp;Mach-O&nbsp;file&nbsp;via&nbsp;its&nbsp;magic&nbsp;number.&nbsp;The&nbsp;magic</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5651340">//&nbsp;must&nbsp;be&nbsp;converted&nbsp;to&nbsp;little&nbsp;endian&nbsp;first&nbsp;though.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651394">var</span>&nbsp;<span class="ident" id="5651398">buf</span>&nbsp;<span class="op" id="5651402">[</span><span class="num" id="5651403">4</span><span class="op" id="5651404">]</span><span class="builtintype" id="5651405">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5651412"><a href="/debug/macho/fat.go.html#5650007">binary</a></span><span class="op" id="5651418">.</span><span class="ident" id="5651419">BigEndian</span><span class="op" id="5651428">.</span><span class="ident" id="5651429">PutUint32</span><span class="op" id="5651438">(</span><span class="ident" id="5651439"><a href="/debug/macho/fat.go.html#5651398">buf</a></span><span class="op" id="5651442">[</span><span class="op" id="5651443">:</span><span class="op" id="5651444">]</span><span class="op" id="5651445">,</span>&nbsp;<span class="ident" id="5651447"><a href="/debug/macho/fat.go.html#5650953">ff</a></span><span class="op" id="5651449">.</span><span class="ident" id="5651450">Magic</span><span class="op" id="5651455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5651459">leMagic</span>&nbsp;<span class="op" id="5651467">:=</span>&nbsp;<span class="ident" id="5651470"><a href="/debug/macho/fat.go.html#5650007">binary</a></span><span class="op" id="5651476">.</span><span class="ident" id="5651477">LittleEndian</span><span class="op" id="5651489">.</span><span class="ident" id="5651490">Uint32</span><span class="op" id="5651496">(</span><span class="ident" id="5651497"><a href="/debug/macho/fat.go.html#5651398">buf</a></span><span class="op" id="5651500">[</span><span class="op" id="5651501">:</span><span class="op" id="5651502">]</span><span class="op" id="5651503">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651507">if</span>&nbsp;<span class="ident" id="5651510"><a href="/debug/macho/fat.go.html#5651459">leMagic</a></span>&nbsp;<span class="op" id="5651518">==</span>&nbsp;<span class="ident" id="5651521"><a href="/debug/macho/macho.go.html#5667255">Magic32</a></span>&nbsp;<span class="op" id="5651529">||</span>&nbsp;<span class="ident" id="5651532"><a href="/debug/macho/fat.go.html#5651459">leMagic</a></span>&nbsp;<span class="op" id="5651540">==</span>&nbsp;<span class="ident" id="5651543"><a href="/debug/macho/macho.go.html#5667285">Magic64</a></span>&nbsp;<span class="op" id="5651551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651556">return</span>&nbsp;<span class="ident" id="5651563">nil</span><span class="op" id="5651566">,</span>&nbsp;<span class="ident" id="5651568"><a href="/debug/macho/fat.go.html#5650667">ErrNotFat</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5651580">}</span>&nbsp;<span class="keyword" id="5651582">else</span>&nbsp;<span class="op" id="5651587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651592">return</span>&nbsp;<span class="ident" id="5651599">nil</span><span class="op" id="5651602">,</span>&nbsp;<span class="op" id="5651604">&amp;</span><span class="ident" id="5651605"><a href="/debug/macho/file.go.html#5657167">FormatError</a></span><span class="op" id="5651616">{</span><span class="num" id="5651617">0</span><span class="op" id="5651618">,</span>&nbsp;<span class="string" id="5651620">&#34;invalid&nbsp;magic&nbsp;number&#34;</span><span class="op" id="5651642">,</span>&nbsp;<span class="ident" id="5651644">nil</span><span class="op" id="5651647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5651651">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5651654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5651657">offset</span>&nbsp;<span class="op" id="5651664">:=</span>&nbsp;<span class="ident" id="5651667">int64</span><span class="op" id="5651672">(</span><span class="num" id="5651673">4</span><span class="op" id="5651674">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5651678">//&nbsp;Read&nbsp;the&nbsp;number&nbsp;of&nbsp;FatArchHeaders&nbsp;that&nbsp;come&nbsp;after&nbsp;the&nbsp;fat_header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651748">var</span>&nbsp;<span class="ident" id="5651752">narch</span>&nbsp;<span class="builtintype" id="5651758">uint32</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5651766"><a href="/debug/macho/fat.go.html#5651104">err</a></span>&nbsp;<span class="op" id="5651770">=</span>&nbsp;<span class="ident" id="5651772"><a href="/debug/macho/fat.go.html#5650007">binary</a></span><span class="op" id="5651778">.</span><span class="ident" id="5651779">Read</span><span class="op" id="5651783">(</span><span class="ident" id="5651784"><a href="/debug/macho/fat.go.html#5650965">sr</a></span><span class="op" id="5651786">,</span>&nbsp;<span class="ident" id="5651788"><a href="/debug/macho/fat.go.html#5650007">binary</a></span><span class="op" id="5651794">.</span><span class="ident" id="5651795">BigEndian</span><span class="op" id="5651804">,</span>&nbsp;<span class="op" id="5651806">&amp;</span><span class="ident" id="5651807"><a href="/debug/macho/fat.go.html#5651752">narch</a></span><span class="op" id="5651812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651815">if</span>&nbsp;<span class="ident" id="5651818"><a href="/debug/macho/fat.go.html#5651104">err</a></span>&nbsp;<span class="op" id="5651822">!=</span>&nbsp;<span class="ident" id="5651825">nil</span>&nbsp;<span class="op" id="5651829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651833">return</span>&nbsp;<span class="ident" id="5651840">nil</span><span class="op" id="5651843">,</span>&nbsp;<span class="op" id="5651845">&amp;</span><span class="ident" id="5651846"><a href="/debug/macho/file.go.html#5657167">FormatError</a></span><span class="op" id="5651857">{</span><span class="ident" id="5651858"><a href="/debug/macho/fat.go.html#5651657">offset</a></span><span class="op" id="5651864">,</span>&nbsp;<span class="string" id="5651866">&#34;invalid&nbsp;fat_header&#34;</span><span class="op" id="5651886">,</span>&nbsp;<span class="ident" id="5651888">nil</span><span class="op" id="5651891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5651894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5651897"><a href="/debug/macho/fat.go.html#5651657">offset</a></span>&nbsp;<span class="op" id="5651904">+=</span>&nbsp;<span class="num" id="5651907">4</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651911">if</span>&nbsp;<span class="ident" id="5651914"><a href="/debug/macho/fat.go.html#5651752">narch</a></span>&nbsp;<span class="op" id="5651920">&lt;</span>&nbsp;<span class="num" id="5651922">1</span>&nbsp;<span class="op" id="5651924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651928">return</span>&nbsp;<span class="ident" id="5651935">nil</span><span class="op" id="5651938">,</span>&nbsp;<span class="op" id="5651940">&amp;</span><span class="ident" id="5651941"><a href="/debug/macho/file.go.html#5657167">FormatError</a></span><span class="op" id="5651952">{</span><span class="ident" id="5651953"><a href="/debug/macho/fat.go.html#5651657">offset</a></span><span class="op" id="5651959">,</span>&nbsp;<span class="string" id="5651961">&#34;file&nbsp;contains&nbsp;no&nbsp;images&#34;</span><span class="op" id="5651986">,</span>&nbsp;<span class="ident" id="5651988">nil</span><span class="op" id="5651991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5651994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5651998">//&nbsp;Combine&nbsp;the&nbsp;Cpu&nbsp;and&nbsp;SubCpu&nbsp;(both&nbsp;uint32)&nbsp;into&nbsp;a&nbsp;uint64&nbsp;to&nbsp;make&nbsp;sure</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5652070">//&nbsp;there&nbsp;are&nbsp;not&nbsp;duplicate&nbsp;architectures.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652113">seenArches</span>&nbsp;<span class="op" id="5652124">:=</span>&nbsp;<span class="builtinfunc" id="5652127">make</span><span class="op" id="5652131">(</span><span class="keyword" id="5652132">map</span><span class="op" id="5652135">[</span><span class="ident" id="5652136">uint64</span><span class="op" id="5652142">]</span><span class="builtintype" id="5652143">bool</span><span class="op" id="5652147">,</span>&nbsp;<span class="ident" id="5652149"><a href="/debug/macho/fat.go.html#5651752">narch</a></span><span class="op" id="5652154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5652157">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;all&nbsp;images&nbsp;are&nbsp;for&nbsp;the&nbsp;same&nbsp;MH_&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652214">var</span>&nbsp;<span class="ident" id="5652218">machoType</span>&nbsp;<span class="ident" id="5652228"><a href="/debug/macho/macho.go.html#5667440">Type</a></span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5652235">//&nbsp;Following&nbsp;the&nbsp;fat_header&nbsp;comes&nbsp;narch&nbsp;fat_arch&nbsp;structs&nbsp;that&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5652304">//&nbsp;Mach-O&nbsp;images&nbsp;further&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652343"><a href="/debug/macho/fat.go.html#5650953">ff</a></span><span class="op" id="5652345">.</span><span class="ident" id="5652346">Arches</span>&nbsp;<span class="op" id="5652353">=</span>&nbsp;<span class="builtinfunc" id="5652355">make</span><span class="op" id="5652359">(</span><span class="op" id="5652360">[</span><span class="op" id="5652361">]</span><span class="ident" id="5652362"><a href="/debug/macho/fat.go.html#5650473">FatArch</a></span><span class="op" id="5652369">,</span>&nbsp;<span class="ident" id="5652371"><a href="/debug/macho/fat.go.html#5651752">narch</a></span><span class="op" id="5652376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652379">for</span>&nbsp;<span class="ident" id="5652383">i</span>&nbsp;<span class="op" id="5652385">:=</span>&nbsp;<span class="builtintype" id="5652388">uint32</span><span class="op" id="5652394">(</span><span class="num" id="5652395">0</span><span class="op" id="5652396">)</span><span class="op" id="5652397">;</span>&nbsp;<span class="ident" id="5652399"><a href="/debug/macho/fat.go.html#5652383">i</a></span>&nbsp;<span class="op" id="5652401">&lt;</span>&nbsp;<span class="ident" id="5652403"><a href="/debug/macho/fat.go.html#5651752">narch</a></span><span class="op" id="5652408">;</span>&nbsp;<span class="ident" id="5652410"><a href="/debug/macho/fat.go.html#5652383">i</a></span><span class="op" id="5652411">++</span>&nbsp;<span class="op" id="5652414">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652418">fa</span>&nbsp;<span class="op" id="5652421">:=</span>&nbsp;<span class="op" id="5652424">&amp;</span><span class="ident" id="5652425"><a href="/debug/macho/fat.go.html#5650953">ff</a></span><span class="op" id="5652427">.</span><span class="ident" id="5652428">Arches</span><span class="op" id="5652434">[</span><span class="ident" id="5652435"><a href="/debug/macho/fat.go.html#5652383">i</a></span><span class="op" id="5652436">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652440"><a href="/debug/macho/fat.go.html#5651104">err</a></span>&nbsp;<span class="op" id="5652444">=</span>&nbsp;<span class="ident" id="5652446"><a href="/debug/macho/fat.go.html#5650007">binary</a></span><span class="op" id="5652452">.</span><span class="ident" id="5652453">Read</span><span class="op" id="5652457">(</span><span class="ident" id="5652458"><a href="/debug/macho/fat.go.html#5650965">sr</a></span><span class="op" id="5652460">,</span>&nbsp;<span class="ident" id="5652462"><a href="/debug/macho/fat.go.html#5650007">binary</a></span><span class="op" id="5652468">.</span><span class="ident" id="5652469">BigEndian</span><span class="op" id="5652478">,</span>&nbsp;<span class="op" id="5652480">&amp;</span><span class="ident" id="5652481"><a href="/debug/macho/fat.go.html#5652418">fa</a></span><span class="op" id="5652483">.</span><span class="ident" id="5652484">FatArchHeader</span><span class="op" id="5652497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652501">if</span>&nbsp;<span class="ident" id="5652504"><a href="/debug/macho/fat.go.html#5651104">err</a></span>&nbsp;<span class="op" id="5652508">!=</span>&nbsp;<span class="ident" id="5652511">nil</span>&nbsp;<span class="op" id="5652515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652520">return</span>&nbsp;<span class="ident" id="5652527">nil</span><span class="op" id="5652530">,</span>&nbsp;<span class="op" id="5652532">&amp;</span><span class="ident" id="5652533"><a href="/debug/macho/file.go.html#5657167">FormatError</a></span><span class="op" id="5652544">{</span><span class="ident" id="5652545"><a href="/debug/macho/fat.go.html#5651657">offset</a></span><span class="op" id="5652551">,</span>&nbsp;<span class="string" id="5652553">&#34;invalid&nbsp;fat_arch&nbsp;header&#34;</span><span class="op" id="5652578">,</span>&nbsp;<span class="ident" id="5652580">nil</span><span class="op" id="5652583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5652587">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652591"><a href="/debug/macho/fat.go.html#5651657">offset</a></span>&nbsp;<span class="op" id="5652598">+=</span>&nbsp;<span class="ident" id="5652601"><a href="/debug/macho/fat.go.html#5650393">fatArchHeaderSize</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652622">fr</span>&nbsp;<span class="op" id="5652625">:=</span>&nbsp;<span class="ident" id="5652628"><a href="/debug/macho/fat.go.html#5650033">io</a></span><span class="op" id="5652630">.</span><span class="ident" id="5652631">NewSectionReader</span><span class="op" id="5652647">(</span><span class="ident" id="5652648"><a href="/debug/macho/fat.go.html#5650913">r</a></span><span class="op" id="5652649">,</span>&nbsp;<span class="ident" id="5652651">int64</span><span class="op" id="5652656">(</span><span class="ident" id="5652657"><a href="/debug/macho/fat.go.html#5652418">fa</a></span><span class="op" id="5652659">.</span><span class="ident" id="5652660">Offset</span><span class="op" id="5652666">)</span><span class="op" id="5652667">,</span>&nbsp;<span class="ident" id="5652669">int64</span><span class="op" id="5652674">(</span><span class="ident" id="5652675"><a href="/debug/macho/fat.go.html#5652418">fa</a></span><span class="op" id="5652677">.</span><span class="ident" id="5652678">Size</span><span class="op" id="5652682">)</span><span class="op" id="5652683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652687"><a href="/debug/macho/fat.go.html#5652418">fa</a></span><span class="op" id="5652689">.</span><span class="ident" id="5652690">File</span><span class="op" id="5652694">,</span>&nbsp;<span class="ident" id="5652696"><a href="/debug/macho/fat.go.html#5651104">err</a></span>&nbsp;<span class="op" id="5652700">=</span>&nbsp;<span class="ident" id="5652702"><a href="/debug/macho/file.go.html#5658116">NewFile</a></span><span class="op" id="5652709">(</span><span class="ident" id="5652710"><a href="/debug/macho/fat.go.html#5652622">fr</a></span><span class="op" id="5652712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652716">if</span>&nbsp;<span class="ident" id="5652719"><a href="/debug/macho/fat.go.html#5651104">err</a></span>&nbsp;<span class="op" id="5652723">!=</span>&nbsp;<span class="ident" id="5652726">nil</span>&nbsp;<span class="op" id="5652730">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652735">return</span>&nbsp;<span class="ident" id="5652742">nil</span><span class="op" id="5652745">,</span>&nbsp;<span class="ident" id="5652747"><a href="/debug/macho/fat.go.html#5651104">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5652753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5652758">//&nbsp;Make&nbsp;sure&nbsp;the&nbsp;architecture&nbsp;for&nbsp;this&nbsp;image&nbsp;is&nbsp;not&nbsp;duplicate.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652823">seenArch</span>&nbsp;<span class="op" id="5652832">:=</span>&nbsp;<span class="op" id="5652835">(</span><span class="ident" id="5652836">uint64</span><span class="op" id="5652842">(</span><span class="ident" id="5652843"><a href="/debug/macho/fat.go.html#5652418">fa</a></span><span class="op" id="5652845">.</span><span class="ident" id="5652846">Cpu</span><span class="op" id="5652849">)</span>&nbsp;<span class="op" id="5652851">&lt;&lt;</span>&nbsp;<span class="num" id="5652854">32</span><span class="op" id="5652856">)</span>&nbsp;<span class="op" id="5652858">|</span>&nbsp;<span class="ident" id="5652860">uint64</span><span class="op" id="5652866">(</span><span class="ident" id="5652867"><a href="/debug/macho/fat.go.html#5652418">fa</a></span><span class="op" id="5652869">.</span><span class="ident" id="5652870">SubCpu</span><span class="op" id="5652876">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652880">if</span>&nbsp;<span class="ident" id="5652883">o</span><span class="op" id="5652884">,</span>&nbsp;<span class="ident" id="5652886">k</span>&nbsp;<span class="op" id="5652888">:=</span>&nbsp;<span class="ident" id="5652891"><a href="/debug/macho/fat.go.html#5652113">seenArches</a></span><span class="op" id="5652901">[</span><span class="ident" id="5652902"><a href="/debug/macho/fat.go.html#5652823">seenArch</a></span><span class="op" id="5652910">]</span><span class="op" id="5652911">;</span>&nbsp;<span class="ident" id="5652913"><a href="/debug/macho/fat.go.html#5652883">o</a></span>&nbsp;<span class="op" id="5652915">||</span>&nbsp;<span class="ident" id="5652918"><a href="/debug/macho/fat.go.html#5652886">k</a></span>&nbsp;<span class="op" id="5652920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652925">return</span>&nbsp;<span class="ident" id="5652932">nil</span><span class="op" id="5652935">,</span>&nbsp;<span class="op" id="5652937">&amp;</span><span class="ident" id="5652938"><a href="/debug/macho/file.go.html#5657167">FormatError</a></span><span class="op" id="5652949">{</span><span class="ident" id="5652950"><a href="/debug/macho/fat.go.html#5651657">offset</a></span><span class="op" id="5652956">,</span>&nbsp;<span class="ident" id="5652958"><a href="/debug/macho/fat.go.html#5650026">fmt</a></span><span class="op" id="5652961">.</span><span class="ident" id="5652962">Sprintf</span><span class="op" id="5652969">(</span><span class="string" id="5652970">&#34;duplicate&nbsp;architecture&nbsp;cpu=%v,&nbsp;subcpu=%#x&#34;</span><span class="op" id="5653013">,</span>&nbsp;<span class="ident" id="5653015"><a href="/debug/macho/fat.go.html#5652418">fa</a></span><span class="op" id="5653017">.</span><span class="ident" id="5653018">Cpu</span><span class="op" id="5653021">,</span>&nbsp;<span class="ident" id="5653023"><a href="/debug/macho/fat.go.html#5652418">fa</a></span><span class="op" id="5653025">.</span><span class="ident" id="5653026">SubCpu</span><span class="op" id="5653032">)</span><span class="op" id="5653033">,</span>&nbsp;<span class="ident" id="5653035">nil</span><span class="op" id="5653038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5653042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653046"><a href="/debug/macho/fat.go.html#5652113">seenArches</a></span><span class="op" id="5653056">[</span><span class="ident" id="5653057"><a href="/debug/macho/fat.go.html#5652823">seenArch</a></span><span class="op" id="5653065">]</span>&nbsp;<span class="op" id="5653067">=</span>&nbsp;<span class="builtintype" id="5653069">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5653077">//&nbsp;Make&nbsp;sure&nbsp;the&nbsp;Mach-O&nbsp;type&nbsp;matches&nbsp;that&nbsp;of&nbsp;the&nbsp;first&nbsp;image.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653141">if</span>&nbsp;<span class="ident" id="5653144"><a href="/debug/macho/fat.go.html#5652383">i</a></span>&nbsp;<span class="op" id="5653146">==</span>&nbsp;<span class="num" id="5653149">0</span>&nbsp;<span class="op" id="5653151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653156"><a href="/debug/macho/fat.go.html#5652218">machoType</a></span>&nbsp;<span class="op" id="5653166">=</span>&nbsp;<span class="ident" id="5653168"><a href="/debug/macho/fat.go.html#5652418">fa</a></span><span class="op" id="5653170">.</span><span class="ident" id="5653171">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5653178">}</span>&nbsp;<span class="keyword" id="5653180">else</span>&nbsp;<span class="op" id="5653185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653190">if</span>&nbsp;<span class="ident" id="5653193"><a href="/debug/macho/fat.go.html#5652418">fa</a></span><span class="op" id="5653195">.</span><span class="ident" id="5653196">Type</span>&nbsp;<span class="op" id="5653201">!=</span>&nbsp;<span class="ident" id="5653204"><a href="/debug/macho/fat.go.html#5652218">machoType</a></span>&nbsp;<span class="op" id="5653214">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653220">return</span>&nbsp;<span class="ident" id="5653227">nil</span><span class="op" id="5653230">,</span>&nbsp;<span class="op" id="5653232">&amp;</span><span class="ident" id="5653233"><a href="/debug/macho/file.go.html#5657167">FormatError</a></span><span class="op" id="5653244">{</span><span class="ident" id="5653245"><a href="/debug/macho/fat.go.html#5651657">offset</a></span><span class="op" id="5653251">,</span>&nbsp;<span class="ident" id="5653253"><a href="/debug/macho/fat.go.html#5650026">fmt</a></span><span class="op" id="5653256">.</span><span class="ident" id="5653257">Sprintf</span><span class="op" id="5653264">(</span><span class="string" id="5653265">&#34;Mach-O&nbsp;type&nbsp;for&nbsp;architecture&nbsp;#%d&nbsp;(type=%#x)&nbsp;does&nbsp;not&nbsp;match&nbsp;first&nbsp;(type=%#x)&#34;</span><span class="op" id="5653342">,</span>&nbsp;<span class="ident" id="5653344"><a href="/debug/macho/fat.go.html#5652383">i</a></span><span class="op" id="5653345">,</span>&nbsp;<span class="ident" id="5653347"><a href="/debug/macho/fat.go.html#5652418">fa</a></span><span class="op" id="5653349">.</span><span class="ident" id="5653350">Type</span><span class="op" id="5653354">,</span>&nbsp;<span class="ident" id="5653356"><a href="/debug/macho/fat.go.html#5652218">machoType</a></span><span class="op" id="5653365">)</span><span class="op" id="5653366">,</span>&nbsp;<span class="ident" id="5653368">nil</span><span class="op" id="5653371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5653376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5653380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5653383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653387">return</span>&nbsp;<span class="op" id="5653394">&amp;</span><span class="ident" id="5653395"><a href="/debug/macho/fat.go.html#5650953">ff</a></span><span class="op" id="5653397">,</span>&nbsp;<span class="ident" id="5653399">nil</span><br>
<span class="lineno"></span><span class="op" id="5653403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5653406">//&nbsp;OpenFat&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Mach-O</span><br>
<span class="lineno"></span><span class="comment" id="5653488">//&nbsp;universal&nbsp;binary.</span><br>
<span class="lineno">125</span><span class="keyword" id="5653509">func</span>&nbsp;<span class="ident" id="5653514">OpenFat</span><span class="op" id="5653521">(</span><span class="ident" id="5653522">name</span>&nbsp;<span class="builtintype" id="5653527">string</span><span class="op" id="5653533">)</span>&nbsp;<span class="op" id="5653535">(</span><span class="ident" id="5653536">ff</span>&nbsp;<span class="op" id="5653539">*</span><span class="ident" id="5653540"><a href="/debug/macho/fat.go.html#5650135">FatFile</a></span><span class="op" id="5653547">,</span>&nbsp;<span class="ident" id="5653549">err</span>&nbsp;<span class="builtintype" id="5653553">error</span><span class="op" id="5653558">)</span>&nbsp;<span class="op" id="5653560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653563">f</span><span class="op" id="5653564">,</span>&nbsp;<span class="ident" id="5653566"><a href="/debug/macho/fat.go.html#5653549">err</a></span>&nbsp;<span class="op" id="5653570">:=</span>&nbsp;<span class="ident" id="5653573"><a href="/debug/macho/fat.go.html#5650039">os</a></span><span class="op" id="5653575">.</span><span class="ident" id="5653576">Open</span><span class="op" id="5653580">(</span><span class="ident" id="5653581"><a href="/debug/macho/fat.go.html#5653522">name</a></span><span class="op" id="5653585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653588">if</span>&nbsp;<span class="ident" id="5653591"><a href="/debug/macho/fat.go.html#5653549">err</a></span>&nbsp;<span class="op" id="5653595">!=</span>&nbsp;<span class="ident" id="5653598">nil</span>&nbsp;<span class="op" id="5653602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653606">return</span>&nbsp;<span class="ident" id="5653613">nil</span><span class="op" id="5653616">,</span>&nbsp;<span class="ident" id="5653618"><a href="/debug/macho/fat.go.html#5653549">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5653623">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653626"><a href="/debug/macho/fat.go.html#5653536">ff</a></span><span class="op" id="5653628">,</span>&nbsp;<span class="ident" id="5653630"><a href="/debug/macho/fat.go.html#5653549">err</a></span>&nbsp;<span class="op" id="5653634">=</span>&nbsp;<span class="ident" id="5653636"><a href="/debug/macho/fat.go.html#5650902">NewFatFile</a></span><span class="op" id="5653646">(</span><span class="ident" id="5653647"><a href="/debug/macho/fat.go.html#5653563">f</a></span><span class="op" id="5653648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653651">if</span>&nbsp;<span class="ident" id="5653654"><a href="/debug/macho/fat.go.html#5653549">err</a></span>&nbsp;<span class="op" id="5653658">!=</span>&nbsp;<span class="ident" id="5653661">nil</span>&nbsp;<span class="op" id="5653665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653669"><a href="/debug/macho/fat.go.html#5653563">f</a></span><span class="op" id="5653670">.</span><span class="ident" id="5653671">Close</span><span class="op" id="5653676">(</span><span class="op" id="5653677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653681">return</span>&nbsp;<span class="ident" id="5653688">nil</span><span class="op" id="5653691">,</span>&nbsp;<span class="ident" id="5653693"><a href="/debug/macho/fat.go.html#5653549">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5653698">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653701"><a href="/debug/macho/fat.go.html#5653536">ff</a></span><span class="op" id="5653703">.</span><span class="ident" id="5653704">closer</span>&nbsp;<span class="op" id="5653711">=</span>&nbsp;<span class="ident" id="5653713"><a href="/debug/macho/fat.go.html#5653563">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653716">return</span><br>
<span class="lineno"></span><span class="op" id="5653723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5653726">func</span>&nbsp;<span class="op" id="5653731">(</span><span class="ident" id="5653732">ff</span>&nbsp;<span class="op" id="5653735">*</span><span class="ident" id="5653736"><a href="/debug/macho/fat.go.html#5650135">FatFile</a></span><span class="op" id="5653743">)</span>&nbsp;<span class="ident" id="5653745">Close</span><span class="op" id="5653750">(</span><span class="op" id="5653751">)</span>&nbsp;<span class="builtintype" id="5653753">error</span>&nbsp;<span class="op" id="5653759">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653762">var</span>&nbsp;<span class="ident" id="5653766">err</span>&nbsp;<span class="builtintype" id="5653770">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653777">if</span>&nbsp;<span class="ident" id="5653780"><a href="/debug/macho/fat.go.html#5653732">ff</a></span><span class="op" id="5653782">.</span><span class="ident" id="5653783">closer</span>&nbsp;<span class="op" id="5653790">!=</span>&nbsp;<span class="ident" id="5653793">nil</span>&nbsp;<span class="op" id="5653797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653801"><a href="/debug/macho/fat.go.html#5653766">err</a></span>&nbsp;<span class="op" id="5653805">=</span>&nbsp;<span class="ident" id="5653807"><a href="/debug/macho/fat.go.html#5653732">ff</a></span><span class="op" id="5653809">.</span><span class="ident" id="5653810">closer</span><span class="op" id="5653816">.</span><span class="ident" id="5653817">Close</span><span class="op" id="5653822">(</span><span class="op" id="5653823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653827"><a href="/debug/macho/fat.go.html#5653732">ff</a></span><span class="op" id="5653829">.</span><span class="ident" id="5653830">closer</span>&nbsp;<span class="op" id="5653837">=</span>&nbsp;<span class="ident" id="5653839">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5653844">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653847">return</span>&nbsp;<span class="ident" id="5653854"><a href="/debug/macho/fat.go.html#5653766">err</a></span><br>
<span class="lineno"></span><span class="op" id="5653858">}</span>
</div>
</body>
</html>
