<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/crc32</h2>
<ul>
<li><a href="/gostd/hash/crc32/crc32.go.html">crc32.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_amd64x.go.html">crc32_amd64x.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_test.go.html" class="current">crc32_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6423679">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6423734">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6423788">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6423839">package</span>&nbsp;<span class="ident" id="6423847">crc32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6423854">import</span>&nbsp;<span class="op" id="6423861">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6423864">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6423870">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6423880">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6423883">type</span>&nbsp;<span class="ident" id="6423888">test</span>&nbsp;<span class="keyword" id="6423893">struct</span>&nbsp;<span class="op" id="6423900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6423903">ieee</span><span class="op" id="6423907">,</span>&nbsp;<span class="ident" id="6423909">castagnoli</span>&nbsp;<span class="builtintype" id="6423920">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6423928">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6423945">string</span><br>
<span class="lineno">15</span><span class="op" id="6423952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6423955">var</span>&nbsp;<span class="ident" id="6423959">golden</span>&nbsp;<span class="op" id="6423966">=</span>&nbsp;<span class="op" id="6423968">[</span><span class="op" id="6423969">]</span><span class="ident" id="6423970">test</span><span class="op" id="6423974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6423977">{</span><span class="num" id="6423978">0x0</span><span class="op" id="6423981">,</span>&nbsp;<span class="num" id="6423983">0x0</span><span class="op" id="6423986">,</span>&nbsp;<span class="string" id="6423988">&#34;&#34;</span><span class="op" id="6423990">}</span><span class="op" id="6423991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6423994">{</span><span class="num" id="6423995">0xe8b7be43</span><span class="op" id="6424005">,</span>&nbsp;<span class="num" id="6424007">0xc1d04330</span><span class="op" id="6424017">,</span>&nbsp;<span class="string" id="6424019">&#34;a&#34;</span><span class="op" id="6424022">}</span><span class="op" id="6424023">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6424026">{</span><span class="num" id="6424027">0x9e83486d</span><span class="op" id="6424037">,</span>&nbsp;<span class="num" id="6424039">0xe2a22936</span><span class="op" id="6424049">,</span>&nbsp;<span class="string" id="6424051">&#34;ab&#34;</span><span class="op" id="6424055">}</span><span class="op" id="6424056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6424059">{</span><span class="num" id="6424060">0x352441c2</span><span class="op" id="6424070">,</span>&nbsp;<span class="num" id="6424072">0x364b3fb7</span><span class="op" id="6424082">,</span>&nbsp;<span class="string" id="6424084">&#34;abc&#34;</span><span class="op" id="6424089">}</span><span class="op" id="6424090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6424093">{</span><span class="num" id="6424094">0xed82cd11</span><span class="op" id="6424104">,</span>&nbsp;<span class="num" id="6424106">0x92c80a31</span><span class="op" id="6424116">,</span>&nbsp;<span class="string" id="6424118">&#34;abcd&#34;</span><span class="op" id="6424124">}</span><span class="op" id="6424125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6424128">{</span><span class="num" id="6424129">0x8587d865</span><span class="op" id="6424139">,</span>&nbsp;<span class="num" id="6424141">0xc450d697</span><span class="op" id="6424151">,</span>&nbsp;<span class="string" id="6424153">&#34;abcde&#34;</span><span class="op" id="6424160">}</span><span class="op" id="6424161">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6424164">{</span><span class="num" id="6424165">0x4b8e39ef</span><span class="op" id="6424175">,</span>&nbsp;<span class="num" id="6424177">0x53bceff1</span><span class="op" id="6424187">,</span>&nbsp;<span class="string" id="6424189">&#34;abcdef&#34;</span><span class="op" id="6424197">}</span><span class="op" id="6424198">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6424201">{</span><span class="num" id="6424202">0x312a6aa6</span><span class="op" id="6424212">,</span>&nbsp;<span class="num" id="6424214">0xe627f441</span><span class="op" id="6424224">,</span>&nbsp;<span class="string" id="6424226">&#34;abcdefg&#34;</span><span class="op" id="6424235">}</span><span class="op" id="6424236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6424239">{</span><span class="num" id="6424240">0xaeef2a50</span><span class="op" id="6424250">,</span>&nbsp;<span class="num" id="6424252">0xa9421b7</span><span class="op" id="6424261">,</span>&nbsp;<span class="string" id="6424263">&#34;abcdefgh&#34;</span><span class="op" id="6424273">}</span><span class="op" id="6424274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6424277">{</span><span class="num" id="6424278">0x8da988af</span><span class="op" id="6424288">,</span>&nbsp;<span class="num" id="6424290">0x2ddc99fc</span><span class="op" id="6424300">,</span>&nbsp;<span class="string" id="6424302">&#34;abcdefghi&#34;</span><span class="op" id="6424313">}</span><span class="op" id="6424314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6424317">{</span><span class="num" id="6424318">0x3981703a</span><span class="op" id="6424328">,</span>&nbsp;<span class="num" id="6424330">0xe6599437</span><span class="op" id="6424340">,</span>&nbsp;<span class="string" id="6424342">&#34;abcdefghij&#34;</span><span class="op" id="6424354">}</span><span class="op" id="6424355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6424358">{</span><span class="num" id="6424359">0x6b9cdfe7</span><span class="op" id="6424369">,</span>&nbsp;<span class="num" id="6424371">0xb2cc01fe</span><span class="op" id="6424381">,</span>&nbsp;<span class="string" id="6424383">&#34;Discard&nbsp;medicine&nbsp;more&nbsp;than&nbsp;two&nbsp;years&nbsp;old.&#34;</span><span class="op" id="6424426">}</span><span class="op" id="6424427">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6424430">{</span><span class="num" id="6424431">0xc90ef73f</span><span class="op" id="6424441">,</span>&nbsp;<span class="num" id="6424443">0xe28207f</span><span class="op" id="6424452">,</span>&nbsp;<span class="string" id="6424454">&#34;He&nbsp;who&nbsp;has&nbsp;a&nbsp;shady&nbsp;past&nbsp;knows&nbsp;that&nbsp;nice&nbsp;guys&nbsp;finish&nbsp;last.&#34;</span><span class="op" id="6424513">}</span><span class="op" id="6424514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6424517">{</span><span class="num" id="6424518">0xb902341f</span><span class="op" id="6424528">,</span>&nbsp;<span class="num" id="6424530">0xbe93f964</span><span class="op" id="6424540">,</span>&nbsp;<span class="string" id="6424542">&#34;I&nbsp;wouldn&#39;t&nbsp;marry&nbsp;him&nbsp;with&nbsp;a&nbsp;ten&nbsp;foot&nbsp;pole.&#34;</span><span class="op" id="6424586">}</span><span class="op" id="6424587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6424590">{</span><span class="num" id="6424591">0x42080e8</span><span class="op" id="6424600">,</span>&nbsp;<span class="num" id="6424602">0x9e3be0c3</span><span class="op" id="6424612">,</span>&nbsp;<span class="string" id="6424614">&#34;Free!&nbsp;Free!/A&nbsp;trip/to&nbsp;Mars/for&nbsp;900/empty&nbsp;jars/Burma&nbsp;Shave&#34;</span><span class="op" id="6424673">}</span><span class="op" id="6424674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6424677">{</span><span class="num" id="6424678">0x154c6d11</span><span class="op" id="6424688">,</span>&nbsp;<span class="num" id="6424690">0xf505ef04</span><span class="op" id="6424700">,</span>&nbsp;<span class="string" id="6424702">&#34;The&nbsp;days&nbsp;of&nbsp;the&nbsp;digital&nbsp;watch&nbsp;are&nbsp;numbered.&nbsp;&nbsp;-Tom&nbsp;Stoppard&#34;</span><span class="op" id="6424762">}</span><span class="op" id="6424763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6424766">{</span><span class="num" id="6424767">0x4c418325</span><span class="op" id="6424777">,</span>&nbsp;<span class="num" id="6424779">0x85d3dc82</span><span class="op" id="6424789">,</span>&nbsp;<span class="string" id="6424791">&#34;Nepal&nbsp;premier&nbsp;won&#39;t&nbsp;resign.&#34;</span><span class="op" id="6424820">}</span><span class="op" id="6424821">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6424824">{</span><span class="num" id="6424825">0x33955150</span><span class="op" id="6424835">,</span>&nbsp;<span class="num" id="6424837">0xc5142380</span><span class="op" id="6424847">,</span>&nbsp;<span class="string" id="6424849">&#34;For&nbsp;every&nbsp;action&nbsp;there&nbsp;is&nbsp;an&nbsp;equal&nbsp;and&nbsp;opposite&nbsp;government&nbsp;program.&#34;</span><span class="op" id="6424918">}</span><span class="op" id="6424919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6424922">{</span><span class="num" id="6424923">0x26216a4b</span><span class="op" id="6424933">,</span>&nbsp;<span class="num" id="6424935">0x75eb77dd</span><span class="op" id="6424945">,</span>&nbsp;<span class="string" id="6424947">&#34;His&nbsp;money&nbsp;is&nbsp;twice&nbsp;tainted:&nbsp;&#39;taint&nbsp;yours&nbsp;and&nbsp;&#39;taint&nbsp;mine.&#34;</span><span class="op" id="6425006">}</span><span class="op" id="6425007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6425010">{</span><span class="num" id="6425011">0x1abbe45e</span><span class="op" id="6425021">,</span>&nbsp;<span class="num" id="6425023">0x91ebe9f7</span><span class="op" id="6425033">,</span>&nbsp;<span class="string" id="6425035">&#34;There&nbsp;is&nbsp;no&nbsp;reason&nbsp;for&nbsp;any&nbsp;individual&nbsp;to&nbsp;have&nbsp;a&nbsp;computer&nbsp;in&nbsp;their&nbsp;home.&nbsp;-Ken&nbsp;Olsen,&nbsp;1977&#34;</span><span class="op" id="6425125">}</span><span class="op" id="6425126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6425129">{</span><span class="num" id="6425130">0xc89a94f7</span><span class="op" id="6425140">,</span>&nbsp;<span class="num" id="6425142">0xf0b1168e</span><span class="op" id="6425152">,</span>&nbsp;<span class="string" id="6425154">&#34;It&#39;s&nbsp;a&nbsp;tiny&nbsp;change&nbsp;to&nbsp;the&nbsp;code&nbsp;and&nbsp;not&nbsp;completely&nbsp;disgusting.&nbsp;-&nbsp;Bob&nbsp;Manchek&#34;</span><span class="op" id="6425231">}</span><span class="op" id="6425232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6425235">{</span><span class="num" id="6425236">0xab3abe14</span><span class="op" id="6425246">,</span>&nbsp;<span class="num" id="6425248">0x572b74e2</span><span class="op" id="6425258">,</span>&nbsp;<span class="string" id="6425260">&#34;size:&nbsp;&nbsp;a.out:&nbsp;&nbsp;bad&nbsp;magic&#34;</span><span class="op" id="6425286">}</span><span class="op" id="6425287">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6425290">{</span><span class="num" id="6425291">0xbab102b6</span><span class="op" id="6425301">,</span>&nbsp;<span class="num" id="6425303">0x8a58a6d5</span><span class="op" id="6425313">,</span>&nbsp;<span class="string" id="6425315">&#34;The&nbsp;major&nbsp;problem&nbsp;is&nbsp;with&nbsp;sendmail.&nbsp;&nbsp;-Mark&nbsp;Horton&#34;</span><span class="op" id="6425366">}</span><span class="op" id="6425367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6425370">{</span><span class="num" id="6425371">0x999149d7</span><span class="op" id="6425381">,</span>&nbsp;<span class="num" id="6425383">0x9c426c50</span><span class="op" id="6425393">,</span>&nbsp;<span class="string" id="6425395">&#34;Give&nbsp;me&nbsp;a&nbsp;rock,&nbsp;paper&nbsp;and&nbsp;scissors&nbsp;and&nbsp;I&nbsp;will&nbsp;move&nbsp;the&nbsp;world.&nbsp;&nbsp;CCFestoon&#34;</span><span class="op" id="6425469">}</span><span class="op" id="6425470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6425473">{</span><span class="num" id="6425474">0x6d52a33c</span><span class="op" id="6425484">,</span>&nbsp;<span class="num" id="6425486">0x735400a4</span><span class="op" id="6425496">,</span>&nbsp;<span class="string" id="6425498">&#34;If&nbsp;the&nbsp;enemy&nbsp;is&nbsp;within&nbsp;range,&nbsp;then&nbsp;so&nbsp;are&nbsp;you.&#34;</span><span class="op" id="6425546">}</span><span class="op" id="6425547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6425550">{</span><span class="num" id="6425551">0x90631e8d</span><span class="op" id="6425561">,</span>&nbsp;<span class="num" id="6425563">0xbec49c95</span><span class="op" id="6425573">,</span>&nbsp;<span class="string" id="6425575">&#34;It&#39;s&nbsp;well&nbsp;we&nbsp;cannot&nbsp;hear&nbsp;the&nbsp;screams/That&nbsp;we&nbsp;create&nbsp;in&nbsp;others&#39;&nbsp;dreams.&#34;</span><span class="op" id="6425647">}</span><span class="op" id="6425648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6425651">{</span><span class="num" id="6425652">0x78309130</span><span class="op" id="6425662">,</span>&nbsp;<span class="num" id="6425664">0xa95a2079</span><span class="op" id="6425674">,</span>&nbsp;<span class="string" id="6425676">&#34;You&nbsp;remind&nbsp;me&nbsp;of&nbsp;a&nbsp;TV&nbsp;show,&nbsp;but&nbsp;that&#39;s&nbsp;all&nbsp;right:&nbsp;I&nbsp;watch&nbsp;it&nbsp;anyway.&#34;</span><span class="op" id="6425746">}</span><span class="op" id="6425747">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6425750">{</span><span class="num" id="6425751">0x7d0a377f</span><span class="op" id="6425761">,</span>&nbsp;<span class="num" id="6425763">0xde2e65c5</span><span class="op" id="6425773">,</span>&nbsp;<span class="string" id="6425775">&#34;C&nbsp;is&nbsp;as&nbsp;portable&nbsp;as&nbsp;Stonehedge!!&#34;</span><span class="op" id="6425809">}</span><span class="op" id="6425810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6425813">{</span><span class="num" id="6425814">0x8c79fd79</span><span class="op" id="6425824">,</span>&nbsp;<span class="num" id="6425826">0x297a88ed</span><span class="op" id="6425836">,</span>&nbsp;<span class="string" id="6425838">&#34;Even&nbsp;if&nbsp;I&nbsp;could&nbsp;be&nbsp;Shakespeare,&nbsp;I&nbsp;think&nbsp;I&nbsp;should&nbsp;still&nbsp;choose&nbsp;to&nbsp;be&nbsp;Faraday.&nbsp;-&nbsp;A.&nbsp;Huxley&#34;</span><span class="op" id="6425928">}</span><span class="op" id="6425929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6425932">{</span><span class="num" id="6425933">0xa20b7167</span><span class="op" id="6425943">,</span>&nbsp;<span class="num" id="6425945">0x66ed1d8b</span><span class="op" id="6425955">,</span>&nbsp;<span class="string" id="6425957">&#34;The&nbsp;fugacity&nbsp;of&nbsp;a&nbsp;constituent&nbsp;in&nbsp;a&nbsp;mixture&nbsp;of&nbsp;gases&nbsp;at&nbsp;a&nbsp;given&nbsp;temperature&nbsp;is&nbsp;proportional&nbsp;to&nbsp;its&nbsp;mole&nbsp;fraction.&nbsp;&nbsp;Lewis-Randall&nbsp;Rule&#34;</span><span class="op" id="6426091">}</span><span class="op" id="6426092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6426095">{</span><span class="num" id="6426096">0x8e0bb443</span><span class="op" id="6426106">,</span>&nbsp;<span class="num" id="6426108">0xdcded527</span><span class="op" id="6426118">,</span>&nbsp;<span class="string" id="6426120">&#34;How&nbsp;can&nbsp;you&nbsp;write&nbsp;a&nbsp;big&nbsp;system&nbsp;without&nbsp;C++?&nbsp;&nbsp;-Paul&nbsp;Glick&#34;</span><span class="op" id="6426178">}</span><span class="op" id="6426179">,</span><br>
<span class="lineno"></span><span class="op" id="6426181">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="6426184">func</span>&nbsp;<span class="ident" id="6426189">TestGolden</span><span class="op" id="6426199">(</span><span class="ident" id="6426200">t</span>&nbsp;<span class="op" id="6426202">*</span><span class="ident" id="6426203">testing</span><span class="op" id="6426210">.</span><span class="ident" id="6426211">T</span><span class="op" id="6426212">)</span>&nbsp;<span class="op" id="6426214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426217">castagnoliTab</span>&nbsp;<span class="op" id="6426231">:=</span>&nbsp;<span class="ident" id="6426234">MakeTable</span><span class="op" id="6426243">(</span><span class="ident" id="6426244">Castagnoli</span><span class="op" id="6426254">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6426258">for</span>&nbsp;<span class="ident" id="6426262">_</span><span class="op" id="6426263">,</span>&nbsp;<span class="ident" id="6426265">g</span>&nbsp;<span class="op" id="6426267">:=</span>&nbsp;<span class="keyword" id="6426270">range</span>&nbsp;<span class="ident" id="6426276">golden</span>&nbsp;<span class="op" id="6426283">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426287">ieee</span>&nbsp;<span class="op" id="6426292">:=</span>&nbsp;<span class="ident" id="6426295">NewIEEE</span><span class="op" id="6426302">(</span><span class="op" id="6426303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426307">io</span><span class="op" id="6426309">.</span><span class="ident" id="6426310">WriteString</span><span class="op" id="6426321">(</span><span class="ident" id="6426322">ieee</span><span class="op" id="6426326">,</span>&nbsp;<span class="ident" id="6426328">g</span><span class="op" id="6426329">.</span><span class="ident" id="6426330">in</span><span class="op" id="6426332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426336">s</span>&nbsp;<span class="op" id="6426338">:=</span>&nbsp;<span class="ident" id="6426341">ieee</span><span class="op" id="6426345">.</span><span class="ident" id="6426346">Sum32</span><span class="op" id="6426351">(</span><span class="op" id="6426352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6426356">if</span>&nbsp;<span class="ident" id="6426359">s</span>&nbsp;<span class="op" id="6426361">!=</span>&nbsp;<span class="ident" id="6426364">g</span><span class="op" id="6426365">.</span><span class="ident" id="6426366">ieee</span>&nbsp;<span class="op" id="6426371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426376">t</span><span class="op" id="6426377">.</span><span class="ident" id="6426378">Errorf</span><span class="op" id="6426384">(</span><span class="string" id="6426385">&#34;IEEE(%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="6426412">,</span>&nbsp;<span class="ident" id="6426414">g</span><span class="op" id="6426415">.</span><span class="ident" id="6426416">in</span><span class="op" id="6426418">,</span>&nbsp;<span class="ident" id="6426420">s</span><span class="op" id="6426421">,</span>&nbsp;<span class="ident" id="6426423">g</span><span class="op" id="6426424">.</span><span class="ident" id="6426425">ieee</span><span class="op" id="6426429">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6426433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426438">castagnoli</span>&nbsp;<span class="op" id="6426449">:=</span>&nbsp;<span class="ident" id="6426452">New</span><span class="op" id="6426455">(</span><span class="ident" id="6426456">castagnoliTab</span><span class="op" id="6426469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426473">io</span><span class="op" id="6426475">.</span><span class="ident" id="6426476">WriteString</span><span class="op" id="6426487">(</span><span class="ident" id="6426488">castagnoli</span><span class="op" id="6426498">,</span>&nbsp;<span class="ident" id="6426500">g</span><span class="op" id="6426501">.</span><span class="ident" id="6426502">in</span><span class="op" id="6426504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426508">s</span>&nbsp;<span class="op" id="6426510">=</span>&nbsp;<span class="ident" id="6426512">castagnoli</span><span class="op" id="6426522">.</span><span class="ident" id="6426523">Sum32</span><span class="op" id="6426528">(</span><span class="op" id="6426529">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6426533">if</span>&nbsp;<span class="ident" id="6426536">s</span>&nbsp;<span class="op" id="6426538">!=</span>&nbsp;<span class="ident" id="6426541">g</span><span class="op" id="6426542">.</span><span class="ident" id="6426543">castagnoli</span>&nbsp;<span class="op" id="6426554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426559">t</span><span class="op" id="6426560">.</span><span class="ident" id="6426561">Errorf</span><span class="op" id="6426567">(</span><span class="string" id="6426568">&#34;Castagnoli(%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="6426601">,</span>&nbsp;<span class="ident" id="6426603">g</span><span class="op" id="6426604">.</span><span class="ident" id="6426605">in</span><span class="op" id="6426607">,</span>&nbsp;<span class="ident" id="6426609">s</span><span class="op" id="6426610">,</span>&nbsp;<span class="ident" id="6426612">g</span><span class="op" id="6426613">.</span><span class="ident" id="6426614">castagnoli</span><span class="op" id="6426624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6426628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6426633">if</span>&nbsp;<span class="builtinfunc" id="6426636">len</span><span class="op" id="6426639">(</span><span class="ident" id="6426640">g</span><span class="op" id="6426641">.</span><span class="ident" id="6426642">in</span><span class="op" id="6426644">)</span>&nbsp;<span class="op" id="6426646">&gt;</span>&nbsp;<span class="num" id="6426648">0</span>&nbsp;<span class="op" id="6426650">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6426655">//&nbsp;The&nbsp;SSE4.2&nbsp;implementation&nbsp;of&nbsp;this&nbsp;has&nbsp;code&nbsp;to&nbsp;deal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6426712">//&nbsp;with&nbsp;misaligned&nbsp;data&nbsp;so&nbsp;we&nbsp;ensure&nbsp;that&nbsp;we&nbsp;test&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6426770">//&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426781">castagnoli</span>&nbsp;<span class="op" id="6426792">=</span>&nbsp;<span class="ident" id="6426794">New</span><span class="op" id="6426797">(</span><span class="ident" id="6426798">castagnoliTab</span><span class="op" id="6426811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426816">io</span><span class="op" id="6426818">.</span><span class="ident" id="6426819">WriteString</span><span class="op" id="6426830">(</span><span class="ident" id="6426831">castagnoli</span><span class="op" id="6426841">,</span>&nbsp;<span class="ident" id="6426843">g</span><span class="op" id="6426844">.</span><span class="ident" id="6426845">in</span><span class="op" id="6426847">[</span><span class="op" id="6426848">:</span><span class="num" id="6426849">1</span><span class="op" id="6426850">]</span><span class="op" id="6426851">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426856">io</span><span class="op" id="6426858">.</span><span class="ident" id="6426859">WriteString</span><span class="op" id="6426870">(</span><span class="ident" id="6426871">castagnoli</span><span class="op" id="6426881">,</span>&nbsp;<span class="ident" id="6426883">g</span><span class="op" id="6426884">.</span><span class="ident" id="6426885">in</span><span class="op" id="6426887">[</span><span class="num" id="6426888">1</span><span class="op" id="6426889">:</span><span class="op" id="6426890">]</span><span class="op" id="6426891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426896">s</span>&nbsp;<span class="op" id="6426898">=</span>&nbsp;<span class="ident" id="6426900">castagnoli</span><span class="op" id="6426910">.</span><span class="ident" id="6426911">Sum32</span><span class="op" id="6426916">(</span><span class="op" id="6426917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6426922">if</span>&nbsp;<span class="ident" id="6426925">s</span>&nbsp;<span class="op" id="6426927">!=</span>&nbsp;<span class="ident" id="6426930">g</span><span class="op" id="6426931">.</span><span class="ident" id="6426932">castagnoli</span>&nbsp;<span class="op" id="6426943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426949">t</span><span class="op" id="6426950">.</span><span class="ident" id="6426951">Errorf</span><span class="op" id="6426957">(</span><span class="string" id="6426958">&#34;Castagnoli[misaligned](%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="6427003">,</span>&nbsp;<span class="ident" id="6427005">g</span><span class="op" id="6427006">.</span><span class="ident" id="6427007">in</span><span class="op" id="6427009">,</span>&nbsp;<span class="ident" id="6427011">s</span><span class="op" id="6427012">,</span>&nbsp;<span class="ident" id="6427014">g</span><span class="op" id="6427015">.</span><span class="ident" id="6427016">castagnoli</span><span class="op" id="6427026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6427031">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6427035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6427038">}</span><br>
<span class="lineno"></span><span class="op" id="6427040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6427043">func</span>&nbsp;<span class="ident" id="6427048">BenchmarkCrc32KB</span><span class="op" id="6427064">(</span><span class="ident" id="6427065">b</span>&nbsp;<span class="op" id="6427067">*</span><span class="ident" id="6427068">testing</span><span class="op" id="6427075">.</span><span class="ident" id="6427076">B</span><span class="op" id="6427077">)</span>&nbsp;<span class="op" id="6427079">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6427082">b</span><span class="op" id="6427083">.</span><span class="ident" id="6427084">SetBytes</span><span class="op" id="6427092">(</span><span class="num" id="6427093">1024</span><span class="op" id="6427097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6427100">data</span>&nbsp;<span class="op" id="6427105">:=</span>&nbsp;<span class="builtinfunc" id="6427108">make</span><span class="op" id="6427112">(</span><span class="op" id="6427113">[</span><span class="op" id="6427114">]</span><span class="builtintype" id="6427115">byte</span><span class="op" id="6427119">,</span>&nbsp;<span class="num" id="6427121">1024</span><span class="op" id="6427125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6427128">for</span>&nbsp;<span class="ident" id="6427132">i</span>&nbsp;<span class="op" id="6427134">:=</span>&nbsp;<span class="keyword" id="6427137">range</span>&nbsp;<span class="ident" id="6427143">data</span>&nbsp;<span class="op" id="6427148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6427152">data</span><span class="op" id="6427156">[</span><span class="ident" id="6427157">i</span><span class="op" id="6427158">]</span>&nbsp;<span class="op" id="6427160">=</span>&nbsp;<span class="builtintype" id="6427162">byte</span><span class="op" id="6427166">(</span><span class="ident" id="6427167">i</span><span class="op" id="6427168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6427171">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6427174">h</span>&nbsp;<span class="op" id="6427176">:=</span>&nbsp;<span class="ident" id="6427179">NewIEEE</span><span class="op" id="6427186">(</span><span class="op" id="6427187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6427190">in</span>&nbsp;<span class="op" id="6427193">:=</span>&nbsp;<span class="builtinfunc" id="6427196">make</span><span class="op" id="6427200">(</span><span class="op" id="6427201">[</span><span class="op" id="6427202">]</span><span class="builtintype" id="6427203">byte</span><span class="op" id="6427207">,</span>&nbsp;<span class="num" id="6427209">0</span><span class="op" id="6427210">,</span>&nbsp;<span class="ident" id="6427212">h</span><span class="op" id="6427213">.</span><span class="ident" id="6427214">Size</span><span class="op" id="6427218">(</span><span class="op" id="6427219">)</span><span class="op" id="6427220">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6427224">b</span><span class="op" id="6427225">.</span><span class="ident" id="6427226">ResetTimer</span><span class="op" id="6427236">(</span><span class="op" id="6427237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6427240">for</span>&nbsp;<span class="ident" id="6427244">i</span>&nbsp;<span class="op" id="6427246">:=</span>&nbsp;<span class="num" id="6427249">0</span><span class="op" id="6427250">;</span>&nbsp;<span class="ident" id="6427252">i</span>&nbsp;<span class="op" id="6427254">&lt;</span>&nbsp;<span class="ident" id="6427256">b</span><span class="op" id="6427257">.</span><span class="ident" id="6427258">N</span><span class="op" id="6427259">;</span>&nbsp;<span class="ident" id="6427261">i</span><span class="op" id="6427262">++</span>&nbsp;<span class="op" id="6427265">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6427269">h</span><span class="op" id="6427270">.</span><span class="ident" id="6427271">Reset</span><span class="op" id="6427276">(</span><span class="op" id="6427277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6427281">h</span><span class="op" id="6427282">.</span><span class="ident" id="6427283">Write</span><span class="op" id="6427288">(</span><span class="ident" id="6427289">data</span><span class="op" id="6427293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6427297">h</span><span class="op" id="6427298">.</span><span class="ident" id="6427299">Sum</span><span class="op" id="6427302">(</span><span class="ident" id="6427303">in</span><span class="op" id="6427305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6427308">}</span><br>
<span class="lineno"></span><span class="op" id="6427310">}</span>
</div>
</body>
</html>
