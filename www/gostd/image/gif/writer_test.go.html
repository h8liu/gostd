<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/gif</h2>
<ul>
<li><a href="/gostd/image/gif/reader.go.html">reader.go</a></li>
<li><a href="/gostd/image/gif/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/image/gif/writer.go.html">writer.go</a></li>
<li><a href="/gostd/image/gif/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7488100">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7488155">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7488209">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7488260">package</span>&nbsp;<span class="ident" id="7488268">gif</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7488273">import</span>&nbsp;<span class="op" id="7488280">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7488283">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7488292">&#34;image&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7488301">&#34;image/color&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7488316">_</span>&nbsp;<span class="string" id="7488318">&#34;image/png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7488331">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7488344">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7488357">&#34;os&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7488363">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7488373">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7488376">func</span>&nbsp;<span class="ident" id="7488381">readImg</span><span class="op" id="7488388">(</span><span class="ident" id="7488389">filename</span>&nbsp;<span class="builtintype" id="7488398">string</span><span class="op" id="7488404">)</span>&nbsp;<span class="op" id="7488406">(</span><span class="ident" id="7488407"><a href="/gostd/image/gif/writer_test.go.html#7488292">image</a></span><span class="op" id="7488412">.</span><span class="ident" id="7488413"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="7488418">,</span>&nbsp;<span class="builtintype" id="7488420">error</span><span class="op" id="7488425">)</span>&nbsp;<span class="op" id="7488427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7488430">f</span><span class="op" id="7488431">,</span>&nbsp;<span class="ident" id="7488433">err</span>&nbsp;<span class="op" id="7488437">:=</span>&nbsp;<span class="ident" id="7488440"><a href="/gostd/image/gif/writer_test.go.html#7488357">os</a></span><span class="op" id="7488442">.</span><span class="ident" id="7488443"><a href="/gostd/os/file.go.html#2446863">Open</a></span><span class="op" id="7488447">(</span><span class="ident" id="7488448"><a href="/gostd/image/gif/writer_test.go.html#7488389">filename</a></span><span class="op" id="7488456">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7488459">if</span>&nbsp;<span class="ident" id="7488462"><a href="/gostd/image/gif/writer_test.go.html#7488433">err</a></span>&nbsp;<span class="op" id="7488466">!=</span>&nbsp;<span class="builtintype" id="7488469">nil</span>&nbsp;<span class="op" id="7488473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7488477">return</span>&nbsp;<span class="builtintype" id="7488484">nil</span><span class="op" id="7488487">,</span>&nbsp;<span class="ident" id="7488489"><a href="/gostd/image/gif/writer_test.go.html#7488433">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7488494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7488497">defer</span>&nbsp;<span class="ident" id="7488503"><a href="/gostd/image/gif/writer_test.go.html#7488430">f</a></span><span class="op" id="7488504">.</span><span class="ident" id="7488505"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="7488510">(</span><span class="op" id="7488511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7488514">m</span><span class="op" id="7488515">,</span>&nbsp;<span class="ident" id="7488517">_</span><span class="op" id="7488518">,</span>&nbsp;<span class="ident" id="7488520"><a href="/gostd/image/gif/writer_test.go.html#7488433">err</a></span>&nbsp;<span class="op" id="7488524">:=</span>&nbsp;<span class="ident" id="7488527"><a href="/gostd/image/gif/writer_test.go.html#7488292">image</a></span><span class="op" id="7488532">.</span><span class="ident" id="7488533"><a href="/gostd/image/format.go.html#5147481">Decode</a></span><span class="op" id="7488539">(</span><span class="ident" id="7488540"><a href="/gostd/image/gif/writer_test.go.html#7488430">f</a></span><span class="op" id="7488541">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7488544">return</span>&nbsp;<span class="ident" id="7488551"><a href="/gostd/image/gif/writer_test.go.html#7488514">m</a></span><span class="op" id="7488552">,</span>&nbsp;<span class="ident" id="7488554"><a href="/gostd/image/gif/writer_test.go.html#7488433">err</a></span><br>
<span class="lineno"></span><span class="op" id="7488558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7488561">func</span>&nbsp;<span class="ident" id="7488566">readGIF</span><span class="op" id="7488573">(</span><span class="ident" id="7488574">filename</span>&nbsp;<span class="builtintype" id="7488583">string</span><span class="op" id="7488589">)</span>&nbsp;<span class="op" id="7488591">(</span><span class="op" id="7488592">*</span><span class="ident" id="7488593"><a href="/gostd/image/gif/reader.go.html#5724800">GIF</a></span><span class="op" id="7488596">,</span>&nbsp;<span class="builtintype" id="7488598">error</span><span class="op" id="7488603">)</span>&nbsp;<span class="op" id="7488605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7488608">f</span><span class="op" id="7488609">,</span>&nbsp;<span class="ident" id="7488611">err</span>&nbsp;<span class="op" id="7488615">:=</span>&nbsp;<span class="ident" id="7488618"><a href="/gostd/image/gif/writer_test.go.html#7488357">os</a></span><span class="op" id="7488620">.</span><span class="ident" id="7488621"><a href="/gostd/os/file.go.html#2446863">Open</a></span><span class="op" id="7488625">(</span><span class="ident" id="7488626"><a href="/gostd/image/gif/writer_test.go.html#7488574">filename</a></span><span class="op" id="7488634">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7488637">if</span>&nbsp;<span class="ident" id="7488640"><a href="/gostd/image/gif/writer_test.go.html#7488611">err</a></span>&nbsp;<span class="op" id="7488644">!=</span>&nbsp;<span class="builtintype" id="7488647">nil</span>&nbsp;<span class="op" id="7488651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7488655">return</span>&nbsp;<span class="builtintype" id="7488662">nil</span><span class="op" id="7488665">,</span>&nbsp;<span class="ident" id="7488667"><a href="/gostd/image/gif/writer_test.go.html#7488611">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7488672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7488675">defer</span>&nbsp;<span class="ident" id="7488681"><a href="/gostd/image/gif/writer_test.go.html#7488608">f</a></span><span class="op" id="7488682">.</span><span class="ident" id="7488683"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="7488688">(</span><span class="op" id="7488689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7488692">return</span>&nbsp;<span class="ident" id="7488699"><a href="/gostd/image/gif/reader.go.html#5725121">DecodeAll</a></span><span class="op" id="7488708">(</span><span class="ident" id="7488709"><a href="/gostd/image/gif/writer_test.go.html#7488608">f</a></span><span class="op" id="7488710">)</span><br>
<span class="lineno">35</span><span class="op" id="7488712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7488715">func</span>&nbsp;<span class="ident" id="7488720">delta</span><span class="op" id="7488725">(</span><span class="ident" id="7488726">u0</span><span class="op" id="7488728">,</span>&nbsp;<span class="ident" id="7488730">u1</span>&nbsp;<span class="builtintype" id="7488733">uint32</span><span class="op" id="7488739">)</span>&nbsp;<span class="builtintype" id="7488741">int64</span>&nbsp;<span class="op" id="7488747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7488750">d</span>&nbsp;<span class="op" id="7488752">:=</span>&nbsp;<span class="builtintype" id="7488755">int64</span><span class="op" id="7488760">(</span><span class="ident" id="7488761"><a href="/gostd/image/gif/writer_test.go.html#7488726">u0</a></span><span class="op" id="7488763">)</span>&nbsp;<span class="op" id="7488765">-</span>&nbsp;<span class="builtintype" id="7488767">int64</span><span class="op" id="7488772">(</span><span class="ident" id="7488773"><a href="/gostd/image/gif/writer_test.go.html#7488730">u1</a></span><span class="op" id="7488775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7488778">if</span>&nbsp;<span class="ident" id="7488781"><a href="/gostd/image/gif/writer_test.go.html#7488750">d</a></span>&nbsp;<span class="op" id="7488783">&lt;</span>&nbsp;<span class="num" id="7488785">0</span>&nbsp;<span class="op" id="7488787">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7488791">return</span>&nbsp;<span class="op" id="7488798">-</span><span class="ident" id="7488799"><a href="/gostd/image/gif/writer_test.go.html#7488750">d</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7488802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7488805">return</span>&nbsp;<span class="ident" id="7488812"><a href="/gostd/image/gif/writer_test.go.html#7488750">d</a></span><br>
<span class="lineno"></span><span class="op" id="7488814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="7488817">//&nbsp;averageDelta&nbsp;returns&nbsp;the&nbsp;average&nbsp;delta&nbsp;in&nbsp;RGB&nbsp;space.&nbsp;The&nbsp;two&nbsp;images&nbsp;must</span><br>
<span class="lineno"></span><span class="comment" id="7488893">//&nbsp;have&nbsp;the&nbsp;same&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="7488918">func</span>&nbsp;<span class="ident" id="7488923">averageDelta</span><span class="op" id="7488935">(</span><span class="ident" id="7488936">m0</span><span class="op" id="7488938">,</span>&nbsp;<span class="ident" id="7488940">m1</span>&nbsp;<span class="ident" id="7488943"><a href="/gostd/image/gif/writer_test.go.html#7488292">image</a></span><span class="op" id="7488948">.</span><span class="ident" id="7488949"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="7488954">)</span>&nbsp;<span class="builtintype" id="7488956">int64</span>&nbsp;<span class="op" id="7488962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7488965">b</span>&nbsp;<span class="op" id="7488967">:=</span>&nbsp;<span class="ident" id="7488970"><a href="/gostd/image/gif/writer_test.go.html#7488936">m0</a></span><span class="op" id="7488972">.</span><span class="ident" id="7488973"><a href="/gostd/image/image.go.html#5155130">Bounds</a></span><span class="op" id="7488979">(</span><span class="op" id="7488980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7488983">var</span>&nbsp;<span class="ident" id="7488987">sum</span><span class="op" id="7488990">,</span>&nbsp;<span class="ident" id="7488992">n</span>&nbsp;<span class="builtintype" id="7488994">int64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7489001">for</span>&nbsp;<span class="ident" id="7489005">y</span>&nbsp;<span class="op" id="7489007">:=</span>&nbsp;<span class="ident" id="7489010"><a href="/gostd/image/gif/writer_test.go.html#7488965">b</a></span><span class="op" id="7489011">.</span><span class="ident" id="7489012"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="7489015">.</span><span class="ident" id="7489016"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="7489017">;</span>&nbsp;<span class="ident" id="7489019"><a href="/gostd/image/gif/writer_test.go.html#7489005">y</a></span>&nbsp;<span class="op" id="7489021">&lt;</span>&nbsp;<span class="ident" id="7489023"><a href="/gostd/image/gif/writer_test.go.html#7488965">b</a></span><span class="op" id="7489024">.</span><span class="ident" id="7489025"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="7489028">.</span><span class="ident" id="7489029"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="7489030">;</span>&nbsp;<span class="ident" id="7489032"><a href="/gostd/image/gif/writer_test.go.html#7489005">y</a></span><span class="op" id="7489033">++</span>&nbsp;<span class="op" id="7489036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7489040">for</span>&nbsp;<span class="ident" id="7489044">x</span>&nbsp;<span class="op" id="7489046">:=</span>&nbsp;<span class="ident" id="7489049"><a href="/gostd/image/gif/writer_test.go.html#7488965">b</a></span><span class="op" id="7489050">.</span><span class="ident" id="7489051"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="7489054">.</span><span class="ident" id="7489055"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="7489056">;</span>&nbsp;<span class="ident" id="7489058"><a href="/gostd/image/gif/writer_test.go.html#7489044">x</a></span>&nbsp;<span class="op" id="7489060">&lt;</span>&nbsp;<span class="ident" id="7489062"><a href="/gostd/image/gif/writer_test.go.html#7488965">b</a></span><span class="op" id="7489063">.</span><span class="ident" id="7489064"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="7489067">.</span><span class="ident" id="7489068"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="7489069">;</span>&nbsp;<span class="ident" id="7489071"><a href="/gostd/image/gif/writer_test.go.html#7489044">x</a></span><span class="op" id="7489072">++</span>&nbsp;<span class="op" id="7489075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489080">c0</span>&nbsp;<span class="op" id="7489083">:=</span>&nbsp;<span class="ident" id="7489086"><a href="/gostd/image/gif/writer_test.go.html#7488936">m0</a></span><span class="op" id="7489088">.</span><span class="ident" id="7489089"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="7489091">(</span><span class="ident" id="7489092"><a href="/gostd/image/gif/writer_test.go.html#7489044">x</a></span><span class="op" id="7489093">,</span>&nbsp;<span class="ident" id="7489095"><a href="/gostd/image/gif/writer_test.go.html#7489005">y</a></span><span class="op" id="7489096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489101">c1</span>&nbsp;<span class="op" id="7489104">:=</span>&nbsp;<span class="ident" id="7489107"><a href="/gostd/image/gif/writer_test.go.html#7488940">m1</a></span><span class="op" id="7489109">.</span><span class="ident" id="7489110"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="7489112">(</span><span class="ident" id="7489113"><a href="/gostd/image/gif/writer_test.go.html#7489044">x</a></span><span class="op" id="7489114">,</span>&nbsp;<span class="ident" id="7489116"><a href="/gostd/image/gif/writer_test.go.html#7489005">y</a></span><span class="op" id="7489117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489122">r0</span><span class="op" id="7489124">,</span>&nbsp;<span class="ident" id="7489126">g0</span><span class="op" id="7489128">,</span>&nbsp;<span class="ident" id="7489130">b0</span><span class="op" id="7489132">,</span>&nbsp;<span class="ident" id="7489134">_</span>&nbsp;<span class="op" id="7489136">:=</span>&nbsp;<span class="ident" id="7489139"><a href="/gostd/image/gif/writer_test.go.html#7489080">c0</a></span><span class="op" id="7489141">.</span><span class="ident" id="7489142"><a href="/gostd/image/color/color.go.html#5185453">RGBA</a></span><span class="op" id="7489146">(</span><span class="op" id="7489147">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489152">r1</span><span class="op" id="7489154">,</span>&nbsp;<span class="ident" id="7489156">g1</span><span class="op" id="7489158">,</span>&nbsp;<span class="ident" id="7489160">b1</span><span class="op" id="7489162">,</span>&nbsp;<span class="ident" id="7489164">_</span>&nbsp;<span class="op" id="7489166">:=</span>&nbsp;<span class="ident" id="7489169"><a href="/gostd/image/gif/writer_test.go.html#7489101">c1</a></span><span class="op" id="7489171">.</span><span class="ident" id="7489172"><a href="/gostd/image/color/color.go.html#5185453">RGBA</a></span><span class="op" id="7489176">(</span><span class="op" id="7489177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489182"><a href="/gostd/image/gif/writer_test.go.html#7488987">sum</a></span>&nbsp;<span class="op" id="7489186">+=</span>&nbsp;<span class="ident" id="7489189"><a href="/gostd/image/gif/writer_test.go.html#7488720">delta</a></span><span class="op" id="7489194">(</span><span class="ident" id="7489195"><a href="/gostd/image/gif/writer_test.go.html#7489122">r0</a></span><span class="op" id="7489197">,</span>&nbsp;<span class="ident" id="7489199"><a href="/gostd/image/gif/writer_test.go.html#7489152">r1</a></span><span class="op" id="7489201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489206"><a href="/gostd/image/gif/writer_test.go.html#7488987">sum</a></span>&nbsp;<span class="op" id="7489210">+=</span>&nbsp;<span class="ident" id="7489213"><a href="/gostd/image/gif/writer_test.go.html#7488720">delta</a></span><span class="op" id="7489218">(</span><span class="ident" id="7489219"><a href="/gostd/image/gif/writer_test.go.html#7489126">g0</a></span><span class="op" id="7489221">,</span>&nbsp;<span class="ident" id="7489223"><a href="/gostd/image/gif/writer_test.go.html#7489156">g1</a></span><span class="op" id="7489225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489230"><a href="/gostd/image/gif/writer_test.go.html#7488987">sum</a></span>&nbsp;<span class="op" id="7489234">+=</span>&nbsp;<span class="ident" id="7489237"><a href="/gostd/image/gif/writer_test.go.html#7488720">delta</a></span><span class="op" id="7489242">(</span><span class="ident" id="7489243"><a href="/gostd/image/gif/writer_test.go.html#7489130">b0</a></span><span class="op" id="7489245">,</span>&nbsp;<span class="ident" id="7489247"><a href="/gostd/image/gif/writer_test.go.html#7489160">b1</a></span><span class="op" id="7489249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489254"><a href="/gostd/image/gif/writer_test.go.html#7488992">n</a></span>&nbsp;<span class="op" id="7489256">+=</span>&nbsp;<span class="num" id="7489259">3</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7489263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7489266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7489269">return</span>&nbsp;<span class="ident" id="7489276"><a href="/gostd/image/gif/writer_test.go.html#7488987">sum</a></span>&nbsp;<span class="op" id="7489280">/</span>&nbsp;<span class="ident" id="7489282"><a href="/gostd/image/gif/writer_test.go.html#7488992">n</a></span><br>
<span class="lineno"></span><span class="op" id="7489284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="7489287">var</span>&nbsp;<span class="ident" id="7489291">testCase</span>&nbsp;<span class="op" id="7489300">=</span>&nbsp;<span class="op" id="7489302">[</span><span class="op" id="7489303">]</span><span class="keyword" id="7489304">struct</span>&nbsp;<span class="op" id="7489311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489314">filename</span>&nbsp;&nbsp;<span class="builtintype" id="7489324">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489332">tolerance</span>&nbsp;<span class="builtintype" id="7489342">int64</span><br>
<span class="lineno"></span><span class="op" id="7489348">}</span><span class="op" id="7489349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7489352">{</span><span class="string" id="7489353">&#34;../testdata/video-001.png&#34;</span><span class="op" id="7489380">,</span>&nbsp;<span class="num" id="7489382">1</span>&nbsp;<span class="op" id="7489384">&lt;&lt;</span>&nbsp;<span class="num" id="7489387">12</span><span class="op" id="7489389">}</span><span class="op" id="7489390">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7489393">{</span><span class="string" id="7489394">&#34;../testdata/video-001.gif&#34;</span><span class="op" id="7489421">,</span>&nbsp;<span class="num" id="7489423">0</span><span class="op" id="7489424">}</span><span class="op" id="7489425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7489428">{</span><span class="string" id="7489429">&#34;../testdata/video-001.interlaced.gif&#34;</span><span class="op" id="7489467">,</span>&nbsp;<span class="num" id="7489469">0</span><span class="op" id="7489470">}</span><span class="op" id="7489471">,</span><br>
<span class="lineno"></span><span class="op" id="7489473">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7489476">func</span>&nbsp;<span class="ident" id="7489481">TestWriter</span><span class="op" id="7489491">(</span><span class="ident" id="7489492">t</span>&nbsp;<span class="op" id="7489494">*</span><span class="ident" id="7489495"><a href="/gostd/image/gif/writer_test.go.html#7488363">testing</a></span><span class="op" id="7489502">.</span><span class="ident" id="7489503"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7489504">)</span>&nbsp;<span class="op" id="7489506">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7489509">for</span>&nbsp;<span class="ident" id="7489513">_</span><span class="op" id="7489514">,</span>&nbsp;<span class="ident" id="7489516">tc</span>&nbsp;<span class="op" id="7489519">:=</span>&nbsp;<span class="keyword" id="7489522">range</span>&nbsp;<span class="ident" id="7489528"><a href="/gostd/image/gif/writer_test.go.html#7489291">testCase</a></span>&nbsp;<span class="op" id="7489537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489541">m0</span><span class="op" id="7489543">,</span>&nbsp;<span class="ident" id="7489545">err</span>&nbsp;<span class="op" id="7489549">:=</span>&nbsp;<span class="ident" id="7489552"><a href="/gostd/image/gif/writer_test.go.html#7488381">readImg</a></span><span class="op" id="7489559">(</span><span class="ident" id="7489560"><a href="/gostd/image/gif/writer_test.go.html#7489516">tc</a></span><span class="op" id="7489562">.</span><span class="ident" id="7489563"><a href="/gostd/image/gif/writer_test.go.html#7489314">filename</a></span><span class="op" id="7489571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7489575">if</span>&nbsp;<span class="ident" id="7489578"><a href="/gostd/image/gif/writer_test.go.html#7489545">err</a></span>&nbsp;<span class="op" id="7489582">!=</span>&nbsp;<span class="builtintype" id="7489585">nil</span>&nbsp;<span class="op" id="7489589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489594"><a href="/gostd/image/gif/writer_test.go.html#7489492">t</a></span><span class="op" id="7489595">.</span><span class="ident" id="7489596"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7489601">(</span><span class="ident" id="7489602"><a href="/gostd/image/gif/writer_test.go.html#7489516">tc</a></span><span class="op" id="7489604">.</span><span class="ident" id="7489605"><a href="/gostd/image/gif/writer_test.go.html#7489314">filename</a></span><span class="op" id="7489613">,</span>&nbsp;<span class="ident" id="7489615"><a href="/gostd/image/gif/writer_test.go.html#7489545">err</a></span><span class="op" id="7489618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7489623">continue</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7489634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7489638">var</span>&nbsp;<span class="ident" id="7489642">buf</span>&nbsp;<span class="ident" id="7489646"><a href="/gostd/image/gif/writer_test.go.html#7488283">bytes</a></span><span class="op" id="7489651">.</span><span class="ident" id="7489652"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489661"><a href="/gostd/image/gif/writer_test.go.html#7489545">err</a></span>&nbsp;<span class="op" id="7489665">=</span>&nbsp;<span class="ident" id="7489667"><a href="/gostd/image/gif/writer.go.html#5732498">Encode</a></span><span class="op" id="7489673">(</span><span class="op" id="7489674">&amp;</span><span class="ident" id="7489675"><a href="/gostd/image/gif/writer_test.go.html#7489642">buf</a></span><span class="op" id="7489678">,</span>&nbsp;<span class="ident" id="7489680"><a href="/gostd/image/gif/writer_test.go.html#7489541">m0</a></span><span class="op" id="7489682">,</span>&nbsp;<span class="builtintype" id="7489684">nil</span><span class="op" id="7489687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7489691">if</span>&nbsp;<span class="ident" id="7489694"><a href="/gostd/image/gif/writer_test.go.html#7489545">err</a></span>&nbsp;<span class="op" id="7489698">!=</span>&nbsp;<span class="builtintype" id="7489701">nil</span>&nbsp;<span class="op" id="7489705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489710"><a href="/gostd/image/gif/writer_test.go.html#7489492">t</a></span><span class="op" id="7489711">.</span><span class="ident" id="7489712"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7489717">(</span><span class="ident" id="7489718"><a href="/gostd/image/gif/writer_test.go.html#7489516">tc</a></span><span class="op" id="7489720">.</span><span class="ident" id="7489721"><a href="/gostd/image/gif/writer_test.go.html#7489314">filename</a></span><span class="op" id="7489729">,</span>&nbsp;<span class="ident" id="7489731"><a href="/gostd/image/gif/writer_test.go.html#7489545">err</a></span><span class="op" id="7489734">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7489739">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7489750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489754">m1</span><span class="op" id="7489756">,</span>&nbsp;<span class="ident" id="7489758"><a href="/gostd/image/gif/writer_test.go.html#7489545">err</a></span>&nbsp;<span class="op" id="7489762">:=</span>&nbsp;<span class="ident" id="7489765"><a href="/gostd/image/gif/reader.go.html#5724576">Decode</a></span><span class="op" id="7489771">(</span><span class="op" id="7489772">&amp;</span><span class="ident" id="7489773"><a href="/gostd/image/gif/writer_test.go.html#7489642">buf</a></span><span class="op" id="7489776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7489780">if</span>&nbsp;<span class="ident" id="7489783"><a href="/gostd/image/gif/writer_test.go.html#7489545">err</a></span>&nbsp;<span class="op" id="7489787">!=</span>&nbsp;<span class="builtintype" id="7489790">nil</span>&nbsp;<span class="op" id="7489794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489799"><a href="/gostd/image/gif/writer_test.go.html#7489492">t</a></span><span class="op" id="7489800">.</span><span class="ident" id="7489801"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7489806">(</span><span class="ident" id="7489807"><a href="/gostd/image/gif/writer_test.go.html#7489516">tc</a></span><span class="op" id="7489809">.</span><span class="ident" id="7489810"><a href="/gostd/image/gif/writer_test.go.html#7489314">filename</a></span><span class="op" id="7489818">,</span>&nbsp;<span class="ident" id="7489820"><a href="/gostd/image/gif/writer_test.go.html#7489545">err</a></span><span class="op" id="7489823">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7489828">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7489839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7489843">if</span>&nbsp;<span class="ident" id="7489846"><a href="/gostd/image/gif/writer_test.go.html#7489541">m0</a></span><span class="op" id="7489848">.</span><span class="ident" id="7489849"><a href="/gostd/image/image.go.html#5155130">Bounds</a></span><span class="op" id="7489855">(</span><span class="op" id="7489856">)</span>&nbsp;<span class="op" id="7489858">!=</span>&nbsp;<span class="ident" id="7489861"><a href="/gostd/image/gif/writer_test.go.html#7489754">m1</a></span><span class="op" id="7489863">.</span><span class="ident" id="7489864"><a href="/gostd/image/image.go.html#5155130">Bounds</a></span><span class="op" id="7489870">(</span><span class="op" id="7489871">)</span>&nbsp;<span class="op" id="7489873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489878"><a href="/gostd/image/gif/writer_test.go.html#7489492">t</a></span><span class="op" id="7489879">.</span><span class="ident" id="7489880"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7489886">(</span><span class="string" id="7489887">&#34;%s,&nbsp;bounds&nbsp;differ:&nbsp;%v&nbsp;and&nbsp;%v&#34;</span><span class="op" id="7489917">,</span>&nbsp;<span class="ident" id="7489919"><a href="/gostd/image/gif/writer_test.go.html#7489516">tc</a></span><span class="op" id="7489921">.</span><span class="ident" id="7489922"><a href="/gostd/image/gif/writer_test.go.html#7489314">filename</a></span><span class="op" id="7489930">,</span>&nbsp;<span class="ident" id="7489932"><a href="/gostd/image/gif/writer_test.go.html#7489541">m0</a></span><span class="op" id="7489934">.</span><span class="ident" id="7489935"><a href="/gostd/image/image.go.html#5155130">Bounds</a></span><span class="op" id="7489941">(</span><span class="op" id="7489942">)</span><span class="op" id="7489943">,</span>&nbsp;<span class="ident" id="7489945"><a href="/gostd/image/gif/writer_test.go.html#7489754">m1</a></span><span class="op" id="7489947">.</span><span class="ident" id="7489948"><a href="/gostd/image/image.go.html#5155130">Bounds</a></span><span class="op" id="7489954">(</span><span class="op" id="7489955">)</span><span class="op" id="7489956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7489961">continue</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7489972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7489976">//&nbsp;Compare&nbsp;the&nbsp;average&nbsp;delta&nbsp;to&nbsp;the&nbsp;tolerance&nbsp;level.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7490031">avgDelta</span>&nbsp;<span class="op" id="7490040">:=</span>&nbsp;<span class="ident" id="7490043"><a href="/gostd/image/gif/writer_test.go.html#7488923">averageDelta</a></span><span class="op" id="7490055">(</span><span class="ident" id="7490056"><a href="/gostd/image/gif/writer_test.go.html#7489541">m0</a></span><span class="op" id="7490058">,</span>&nbsp;<span class="ident" id="7490060"><a href="/gostd/image/gif/writer_test.go.html#7489754">m1</a></span><span class="op" id="7490062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7490066">if</span>&nbsp;<span class="ident" id="7490069"><a href="/gostd/image/gif/writer_test.go.html#7490031">avgDelta</a></span>&nbsp;<span class="op" id="7490078">&gt;</span>&nbsp;<span class="ident" id="7490080"><a href="/gostd/image/gif/writer_test.go.html#7489516">tc</a></span><span class="op" id="7490082">.</span><span class="ident" id="7490083"><a href="/gostd/image/gif/writer_test.go.html#7489332">tolerance</a></span>&nbsp;<span class="op" id="7490093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7490098"><a href="/gostd/image/gif/writer_test.go.html#7489492">t</a></span><span class="op" id="7490099">.</span><span class="ident" id="7490100"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7490106">(</span><span class="string" id="7490107">&#34;%s:&nbsp;average&nbsp;delta&nbsp;is&nbsp;too&nbsp;high.&nbsp;expected:&nbsp;%d,&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7490160">,</span>&nbsp;<span class="ident" id="7490162"><a href="/gostd/image/gif/writer_test.go.html#7489516">tc</a></span><span class="op" id="7490164">.</span><span class="ident" id="7490165"><a href="/gostd/image/gif/writer_test.go.html#7489314">filename</a></span><span class="op" id="7490173">,</span>&nbsp;<span class="ident" id="7490175"><a href="/gostd/image/gif/writer_test.go.html#7489516">tc</a></span><span class="op" id="7490177">.</span><span class="ident" id="7490178"><a href="/gostd/image/gif/writer_test.go.html#7489332">tolerance</a></span><span class="op" id="7490187">,</span>&nbsp;<span class="ident" id="7490189"><a href="/gostd/image/gif/writer_test.go.html#7490031">avgDelta</a></span><span class="op" id="7490197">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7490202">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7490213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7490216">}</span><br>
<span class="lineno"></span><span class="op" id="7490218">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="7490221">func</span>&nbsp;<span class="ident" id="7490226">TestSubImage</span><span class="op" id="7490238">(</span><span class="ident" id="7490239">t</span>&nbsp;<span class="op" id="7490241">*</span><span class="ident" id="7490242"><a href="/gostd/image/gif/writer_test.go.html#7488363">testing</a></span><span class="op" id="7490249">.</span><span class="ident" id="7490250"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7490251">)</span>&nbsp;<span class="op" id="7490253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7490256">m0</span><span class="op" id="7490258">,</span>&nbsp;<span class="ident" id="7490260">err</span>&nbsp;<span class="op" id="7490264">:=</span>&nbsp;<span class="ident" id="7490267"><a href="/gostd/image/gif/writer_test.go.html#7488381">readImg</a></span><span class="op" id="7490274">(</span><span class="string" id="7490275">&#34;../testdata/video-001.gif&#34;</span><span class="op" id="7490302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7490305">if</span>&nbsp;<span class="ident" id="7490308"><a href="/gostd/image/gif/writer_test.go.html#7490260">err</a></span>&nbsp;<span class="op" id="7490312">!=</span>&nbsp;<span class="builtintype" id="7490315">nil</span>&nbsp;<span class="op" id="7490319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7490323"><a href="/gostd/image/gif/writer_test.go.html#7490239">t</a></span><span class="op" id="7490324">.</span><span class="ident" id="7490325"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7490331">(</span><span class="string" id="7490332">&#34;readImg:&nbsp;%v&#34;</span><span class="op" id="7490345">,</span>&nbsp;<span class="ident" id="7490347"><a href="/gostd/image/gif/writer_test.go.html#7490260">err</a></span><span class="op" id="7490350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7490353">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7490356"><a href="/gostd/image/gif/writer_test.go.html#7490256">m0</a></span>&nbsp;<span class="op" id="7490359">=</span>&nbsp;<span class="ident" id="7490361"><a href="/gostd/image/gif/writer_test.go.html#7490256">m0</a></span><span class="op" id="7490363">.</span><span class="op" id="7490364">(</span><span class="op" id="7490365">*</span><span class="ident" id="7490366"><a href="/gostd/image/gif/writer_test.go.html#7488292">image</a></span><span class="op" id="7490371">.</span><span class="ident" id="7490372"><a href="/gostd/image/image.go.html#5176435">Paletted</a></span><span class="op" id="7490380">)</span><span class="op" id="7490381">.</span><span class="ident" id="7490382"><a href="/gostd/image/image.go.html#5177942">SubImage</a></span><span class="op" id="7490390">(</span><span class="ident" id="7490391"><a href="/gostd/image/gif/writer_test.go.html#7488292">image</a></span><span class="op" id="7490396">.</span><span class="ident" id="7490397"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="7490401">(</span><span class="num" id="7490402">0</span><span class="op" id="7490403">,</span>&nbsp;<span class="num" id="7490405">0</span><span class="op" id="7490406">,</span>&nbsp;<span class="num" id="7490408">50</span><span class="op" id="7490410">,</span>&nbsp;<span class="num" id="7490412">30</span><span class="op" id="7490414">)</span><span class="op" id="7490415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7490418">var</span>&nbsp;<span class="ident" id="7490422">buf</span>&nbsp;<span class="ident" id="7490426"><a href="/gostd/image/gif/writer_test.go.html#7488283">bytes</a></span><span class="op" id="7490431">.</span><span class="ident" id="7490432"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7490440"><a href="/gostd/image/gif/writer_test.go.html#7490260">err</a></span>&nbsp;<span class="op" id="7490444">=</span>&nbsp;<span class="ident" id="7490446"><a href="/gostd/image/gif/writer.go.html#5732498">Encode</a></span><span class="op" id="7490452">(</span><span class="op" id="7490453">&amp;</span><span class="ident" id="7490454"><a href="/gostd/image/gif/writer_test.go.html#7490422">buf</a></span><span class="op" id="7490457">,</span>&nbsp;<span class="ident" id="7490459"><a href="/gostd/image/gif/writer_test.go.html#7490256">m0</a></span><span class="op" id="7490461">,</span>&nbsp;<span class="builtintype" id="7490463">nil</span><span class="op" id="7490466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7490469">if</span>&nbsp;<span class="ident" id="7490472"><a href="/gostd/image/gif/writer_test.go.html#7490260">err</a></span>&nbsp;<span class="op" id="7490476">!=</span>&nbsp;<span class="builtintype" id="7490479">nil</span>&nbsp;<span class="op" id="7490483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7490487"><a href="/gostd/image/gif/writer_test.go.html#7490239">t</a></span><span class="op" id="7490488">.</span><span class="ident" id="7490489"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7490495">(</span><span class="string" id="7490496">&#34;Encode:&nbsp;%v&#34;</span><span class="op" id="7490508">,</span>&nbsp;<span class="ident" id="7490510"><a href="/gostd/image/gif/writer_test.go.html#7490260">err</a></span><span class="op" id="7490513">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7490516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7490519">m1</span><span class="op" id="7490521">,</span>&nbsp;<span class="ident" id="7490523"><a href="/gostd/image/gif/writer_test.go.html#7490260">err</a></span>&nbsp;<span class="op" id="7490527">:=</span>&nbsp;<span class="ident" id="7490530"><a href="/gostd/image/gif/reader.go.html#5724576">Decode</a></span><span class="op" id="7490536">(</span><span class="op" id="7490537">&amp;</span><span class="ident" id="7490538"><a href="/gostd/image/gif/writer_test.go.html#7490422">buf</a></span><span class="op" id="7490541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7490544">if</span>&nbsp;<span class="ident" id="7490547"><a href="/gostd/image/gif/writer_test.go.html#7490260">err</a></span>&nbsp;<span class="op" id="7490551">!=</span>&nbsp;<span class="builtintype" id="7490554">nil</span>&nbsp;<span class="op" id="7490558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7490562"><a href="/gostd/image/gif/writer_test.go.html#7490239">t</a></span><span class="op" id="7490563">.</span><span class="ident" id="7490564"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7490570">(</span><span class="string" id="7490571">&#34;Decode:&nbsp;%v&#34;</span><span class="op" id="7490583">,</span>&nbsp;<span class="ident" id="7490585"><a href="/gostd/image/gif/writer_test.go.html#7490260">err</a></span><span class="op" id="7490588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7490591">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7490594">if</span>&nbsp;<span class="ident" id="7490597"><a href="/gostd/image/gif/writer_test.go.html#7490256">m0</a></span><span class="op" id="7490599">.</span><span class="ident" id="7490600"><a href="/gostd/image/image.go.html#5155130">Bounds</a></span><span class="op" id="7490606">(</span><span class="op" id="7490607">)</span>&nbsp;<span class="op" id="7490609">!=</span>&nbsp;<span class="ident" id="7490612"><a href="/gostd/image/gif/writer_test.go.html#7490519">m1</a></span><span class="op" id="7490614">.</span><span class="ident" id="7490615"><a href="/gostd/image/image.go.html#5155130">Bounds</a></span><span class="op" id="7490621">(</span><span class="op" id="7490622">)</span>&nbsp;<span class="op" id="7490624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7490628"><a href="/gostd/image/gif/writer_test.go.html#7490239">t</a></span><span class="op" id="7490629">.</span><span class="ident" id="7490630"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7490636">(</span><span class="string" id="7490637">&#34;bounds&nbsp;differ:&nbsp;%v&nbsp;and&nbsp;%v&#34;</span><span class="op" id="7490663">,</span>&nbsp;<span class="ident" id="7490665"><a href="/gostd/image/gif/writer_test.go.html#7490256">m0</a></span><span class="op" id="7490667">.</span><span class="ident" id="7490668"><a href="/gostd/image/image.go.html#5155130">Bounds</a></span><span class="op" id="7490674">(</span><span class="op" id="7490675">)</span><span class="op" id="7490676">,</span>&nbsp;<span class="ident" id="7490678"><a href="/gostd/image/gif/writer_test.go.html#7490519">m1</a></span><span class="op" id="7490680">.</span><span class="ident" id="7490681"><a href="/gostd/image/image.go.html#5155130">Bounds</a></span><span class="op" id="7490687">(</span><span class="op" id="7490688">)</span><span class="op" id="7490689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7490692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7490695">if</span>&nbsp;<span class="ident" id="7490698"><a href="/gostd/image/gif/writer_test.go.html#7488923">averageDelta</a></span><span class="op" id="7490710">(</span><span class="ident" id="7490711"><a href="/gostd/image/gif/writer_test.go.html#7490256">m0</a></span><span class="op" id="7490713">,</span>&nbsp;<span class="ident" id="7490715"><a href="/gostd/image/gif/writer_test.go.html#7490519">m1</a></span><span class="op" id="7490717">)</span>&nbsp;<span class="op" id="7490719">!=</span>&nbsp;<span class="num" id="7490722">0</span>&nbsp;<span class="op" id="7490724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7490728"><a href="/gostd/image/gif/writer_test.go.html#7490239">t</a></span><span class="op" id="7490729">.</span><span class="ident" id="7490730"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7490736">(</span><span class="string" id="7490737">&#34;images&nbsp;differ&#34;</span><span class="op" id="7490752">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7490755">}</span><br>
<span class="lineno"></span><span class="op" id="7490757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7490760">var</span>&nbsp;<span class="ident" id="7490764">frames</span>&nbsp;<span class="op" id="7490771">=</span>&nbsp;<span class="op" id="7490773">[</span><span class="op" id="7490774">]</span><span class="builtintype" id="7490775">string</span><span class="op" id="7490781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7490784">&#34;../testdata/video-001.gif&#34;</span><span class="op" id="7490811">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7490814">&#34;../testdata/video-005.gray.gif&#34;</span><span class="op" id="7490846">,</span><br>
<span class="lineno"></span><span class="op" id="7490848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7490851">func</span>&nbsp;<span class="ident" id="7490856">TestEncodeAll</span><span class="op" id="7490869">(</span><span class="ident" id="7490870">t</span>&nbsp;<span class="op" id="7490872">*</span><span class="ident" id="7490873"><a href="/gostd/image/gif/writer_test.go.html#7488363">testing</a></span><span class="op" id="7490880">.</span><span class="ident" id="7490881"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7490882">)</span>&nbsp;<span class="op" id="7490884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7490887">g0</span>&nbsp;<span class="op" id="7490890">:=</span>&nbsp;<span class="op" id="7490893">&amp;</span><span class="ident" id="7490894"><a href="/gostd/image/gif/reader.go.html#5724800">GIF</a></span><span class="op" id="7490897">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7490901"><a href="/gostd/image/gif/reader.go.html#5724814">Image</a></span><span class="op" id="7490906">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7490912">make</span><span class="op" id="7490916">(</span><span class="op" id="7490917">[</span><span class="op" id="7490918">]</span><span class="op" id="7490919">*</span><span class="ident" id="7490920"><a href="/gostd/image/gif/writer_test.go.html#7488292">image</a></span><span class="op" id="7490925">.</span><span class="ident" id="7490926"><a href="/gostd/image/image.go.html#5176435">Paletted</a></span><span class="op" id="7490934">,</span>&nbsp;<span class="builtinfunc" id="7490936">len</span><span class="op" id="7490939">(</span><span class="ident" id="7490940"><a href="/gostd/image/gif/writer_test.go.html#7490764">frames</a></span><span class="op" id="7490946">)</span><span class="op" id="7490947">)</span><span class="op" id="7490948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7490952"><a href="/gostd/image/gif/reader.go.html#5724869">Delay</a></span><span class="op" id="7490957">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7490963">make</span><span class="op" id="7490967">(</span><span class="op" id="7490968">[</span><span class="op" id="7490969">]</span><span class="builtintype" id="7490970">int</span><span class="op" id="7490973">,</span>&nbsp;<span class="builtinfunc" id="7490975">len</span><span class="op" id="7490978">(</span><span class="ident" id="7490979"><a href="/gostd/image/gif/writer_test.go.html#7490764">frames</a></span><span class="op" id="7490985">)</span><span class="op" id="7490986">)</span><span class="op" id="7490987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7490991"><a href="/gostd/image/gif/reader.go.html#5724967">LoopCount</a></span><span class="op" id="7491000">:</span>&nbsp;<span class="num" id="7491002">5</span><span class="op" id="7491003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7491006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7491009">for</span>&nbsp;<span class="ident" id="7491013">i</span><span class="op" id="7491014">,</span>&nbsp;<span class="ident" id="7491016">f</span>&nbsp;<span class="op" id="7491018">:=</span>&nbsp;<span class="keyword" id="7491021">range</span>&nbsp;<span class="ident" id="7491027"><a href="/gostd/image/gif/writer_test.go.html#7490764">frames</a></span>&nbsp;<span class="op" id="7491034">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7491038">m</span><span class="op" id="7491039">,</span>&nbsp;<span class="ident" id="7491041">err</span>&nbsp;<span class="op" id="7491045">:=</span>&nbsp;<span class="ident" id="7491048"><a href="/gostd/image/gif/writer_test.go.html#7488566">readGIF</a></span><span class="op" id="7491055">(</span><span class="ident" id="7491056"><a href="/gostd/image/gif/writer_test.go.html#7491016">f</a></span><span class="op" id="7491057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7491061">if</span>&nbsp;<span class="ident" id="7491064"><a href="/gostd/image/gif/writer_test.go.html#7491041">err</a></span>&nbsp;<span class="op" id="7491068">!=</span>&nbsp;<span class="builtintype" id="7491071">nil</span>&nbsp;<span class="op" id="7491075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7491080"><a href="/gostd/image/gif/writer_test.go.html#7490870">t</a></span><span class="op" id="7491081">.</span><span class="ident" id="7491082"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7491087">(</span><span class="ident" id="7491088"><a href="/gostd/image/gif/writer_test.go.html#7491016">f</a></span><span class="op" id="7491089">,</span>&nbsp;<span class="ident" id="7491091"><a href="/gostd/image/gif/writer_test.go.html#7491041">err</a></span><span class="op" id="7491094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7491098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7491102"><a href="/gostd/image/gif/writer_test.go.html#7490887">g0</a></span><span class="op" id="7491104">.</span><span class="ident" id="7491105"><a href="/gostd/image/gif/reader.go.html#5724814">Image</a></span><span class="op" id="7491110">[</span><span class="ident" id="7491111"><a href="/gostd/image/gif/writer_test.go.html#7491013">i</a></span><span class="op" id="7491112">]</span>&nbsp;<span class="op" id="7491114">=</span>&nbsp;<span class="ident" id="7491116"><a href="/gostd/image/gif/writer_test.go.html#7491038">m</a></span><span class="op" id="7491117">.</span><span class="ident" id="7491118"><a href="/gostd/image/gif/reader.go.html#5724814">Image</a></span><span class="op" id="7491123">[</span><span class="num" id="7491124">0</span><span class="op" id="7491125">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7491128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7491131">var</span>&nbsp;<span class="ident" id="7491135">buf</span>&nbsp;<span class="ident" id="7491139"><a href="/gostd/image/gif/writer_test.go.html#7488283">bytes</a></span><span class="op" id="7491144">.</span><span class="ident" id="7491145"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7491153">if</span>&nbsp;<span class="ident" id="7491156">err</span>&nbsp;<span class="op" id="7491160">:=</span>&nbsp;<span class="ident" id="7491163"><a href="/gostd/image/gif/writer.go.html#5731932">EncodeAll</a></span><span class="op" id="7491172">(</span><span class="op" id="7491173">&amp;</span><span class="ident" id="7491174"><a href="/gostd/image/gif/writer_test.go.html#7491135">buf</a></span><span class="op" id="7491177">,</span>&nbsp;<span class="ident" id="7491179"><a href="/gostd/image/gif/writer_test.go.html#7490887">g0</a></span><span class="op" id="7491181">)</span><span class="op" id="7491182">;</span>&nbsp;<span class="ident" id="7491184"><a href="/gostd/image/gif/writer_test.go.html#7491156">err</a></span>&nbsp;<span class="op" id="7491188">!=</span>&nbsp;<span class="builtintype" id="7491191">nil</span>&nbsp;<span class="op" id="7491195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7491199"><a href="/gostd/image/gif/writer_test.go.html#7490870">t</a></span><span class="op" id="7491200">.</span><span class="ident" id="7491201"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7491206">(</span><span class="string" id="7491207">&#34;EncodeAll:&#34;</span><span class="op" id="7491219">,</span>&nbsp;<span class="ident" id="7491221"><a href="/gostd/image/gif/writer_test.go.html#7491156">err</a></span><span class="op" id="7491224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7491227">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7491230">g1</span><span class="op" id="7491232">,</span>&nbsp;<span class="ident" id="7491234">err</span>&nbsp;<span class="op" id="7491238">:=</span>&nbsp;<span class="ident" id="7491241"><a href="/gostd/image/gif/reader.go.html#5725121">DecodeAll</a></span><span class="op" id="7491250">(</span><span class="op" id="7491251">&amp;</span><span class="ident" id="7491252"><a href="/gostd/image/gif/writer_test.go.html#7491135">buf</a></span><span class="op" id="7491255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7491258">if</span>&nbsp;<span class="ident" id="7491261"><a href="/gostd/image/gif/writer_test.go.html#7491234">err</a></span>&nbsp;<span class="op" id="7491265">!=</span>&nbsp;<span class="builtintype" id="7491268">nil</span>&nbsp;<span class="op" id="7491272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7491276"><a href="/gostd/image/gif/writer_test.go.html#7490870">t</a></span><span class="op" id="7491277">.</span><span class="ident" id="7491278"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7491283">(</span><span class="string" id="7491284">&#34;DecodeAll:&#34;</span><span class="op" id="7491296">,</span>&nbsp;<span class="ident" id="7491298"><a href="/gostd/image/gif/writer_test.go.html#7491234">err</a></span><span class="op" id="7491301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7491304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7491307">if</span>&nbsp;<span class="ident" id="7491310"><a href="/gostd/image/gif/writer_test.go.html#7490887">g0</a></span><span class="op" id="7491312">.</span><span class="ident" id="7491313"><a href="/gostd/image/gif/reader.go.html#5724967">LoopCount</a></span>&nbsp;<span class="op" id="7491323">!=</span>&nbsp;<span class="ident" id="7491326"><a href="/gostd/image/gif/writer_test.go.html#7491230">g1</a></span><span class="op" id="7491328">.</span><span class="ident" id="7491329"><a href="/gostd/image/gif/reader.go.html#5724967">LoopCount</a></span>&nbsp;<span class="op" id="7491339">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7491343"><a href="/gostd/image/gif/writer_test.go.html#7490870">t</a></span><span class="op" id="7491344">.</span><span class="ident" id="7491345"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7491351">(</span><span class="string" id="7491352">&#34;loop&nbsp;counts&nbsp;differ:&nbsp;%d&nbsp;and&nbsp;%d&#34;</span><span class="op" id="7491383">,</span>&nbsp;<span class="ident" id="7491385"><a href="/gostd/image/gif/writer_test.go.html#7490887">g0</a></span><span class="op" id="7491387">.</span><span class="ident" id="7491388"><a href="/gostd/image/gif/reader.go.html#5724967">LoopCount</a></span><span class="op" id="7491397">,</span>&nbsp;<span class="ident" id="7491399"><a href="/gostd/image/gif/writer_test.go.html#7491230">g1</a></span><span class="op" id="7491401">.</span><span class="ident" id="7491402"><a href="/gostd/image/gif/reader.go.html#5724967">LoopCount</a></span><span class="op" id="7491411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7491414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7491417">for</span>&nbsp;<span class="ident" id="7491421">i</span>&nbsp;<span class="op" id="7491423">:=</span>&nbsp;<span class="keyword" id="7491426">range</span>&nbsp;<span class="ident" id="7491432"><a href="/gostd/image/gif/writer_test.go.html#7490887">g0</a></span><span class="op" id="7491434">.</span><span class="ident" id="7491435"><a href="/gostd/image/gif/reader.go.html#5724814">Image</a></span>&nbsp;<span class="op" id="7491441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7491445">m0</span><span class="op" id="7491447">,</span>&nbsp;<span class="ident" id="7491449">m1</span>&nbsp;<span class="op" id="7491452">:=</span>&nbsp;<span class="ident" id="7491455"><a href="/gostd/image/gif/writer_test.go.html#7490887">g0</a></span><span class="op" id="7491457">.</span><span class="ident" id="7491458"><a href="/gostd/image/gif/reader.go.html#5724814">Image</a></span><span class="op" id="7491463">[</span><span class="ident" id="7491464"><a href="/gostd/image/gif/writer_test.go.html#7491421">i</a></span><span class="op" id="7491465">]</span><span class="op" id="7491466">,</span>&nbsp;<span class="ident" id="7491468"><a href="/gostd/image/gif/writer_test.go.html#7491230">g1</a></span><span class="op" id="7491470">.</span><span class="ident" id="7491471"><a href="/gostd/image/gif/reader.go.html#5724814">Image</a></span><span class="op" id="7491476">[</span><span class="ident" id="7491477"><a href="/gostd/image/gif/writer_test.go.html#7491421">i</a></span><span class="op" id="7491478">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7491482">if</span>&nbsp;<span class="ident" id="7491485"><a href="/gostd/image/gif/writer_test.go.html#7491445">m0</a></span><span class="op" id="7491487">.</span><span class="ident" id="7491488"><a href="/gostd/image/image.go.html#5176884">Bounds</a></span><span class="op" id="7491494">(</span><span class="op" id="7491495">)</span>&nbsp;<span class="op" id="7491497">!=</span>&nbsp;<span class="ident" id="7491500"><a href="/gostd/image/gif/writer_test.go.html#7491449">m1</a></span><span class="op" id="7491502">.</span><span class="ident" id="7491503"><a href="/gostd/image/image.go.html#5176884">Bounds</a></span><span class="op" id="7491509">(</span><span class="op" id="7491510">)</span>&nbsp;<span class="op" id="7491512">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7491517"><a href="/gostd/image/gif/writer_test.go.html#7490870">t</a></span><span class="op" id="7491518">.</span><span class="ident" id="7491519"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7491525">(</span><span class="string" id="7491526">&#34;%s,&nbsp;bounds&nbsp;differ:&nbsp;%v&nbsp;and&nbsp;%v&#34;</span><span class="op" id="7491556">,</span>&nbsp;<span class="ident" id="7491558"><a href="/gostd/image/gif/writer_test.go.html#7490764">frames</a></span><span class="op" id="7491564">[</span><span class="ident" id="7491565"><a href="/gostd/image/gif/writer_test.go.html#7491421">i</a></span><span class="op" id="7491566">]</span><span class="op" id="7491567">,</span>&nbsp;<span class="ident" id="7491569"><a href="/gostd/image/gif/writer_test.go.html#7491445">m0</a></span><span class="op" id="7491571">.</span><span class="ident" id="7491572"><a href="/gostd/image/image.go.html#5176884">Bounds</a></span><span class="op" id="7491578">(</span><span class="op" id="7491579">)</span><span class="op" id="7491580">,</span>&nbsp;<span class="ident" id="7491582"><a href="/gostd/image/gif/writer_test.go.html#7491449">m1</a></span><span class="op" id="7491584">.</span><span class="ident" id="7491585"><a href="/gostd/image/image.go.html#5176884">Bounds</a></span><span class="op" id="7491591">(</span><span class="op" id="7491592">)</span><span class="op" id="7491593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7491597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7491601">d0</span><span class="op" id="7491603">,</span>&nbsp;<span class="ident" id="7491605">d1</span>&nbsp;<span class="op" id="7491608">:=</span>&nbsp;<span class="ident" id="7491611"><a href="/gostd/image/gif/writer_test.go.html#7490887">g0</a></span><span class="op" id="7491613">.</span><span class="ident" id="7491614"><a href="/gostd/image/gif/reader.go.html#5724869">Delay</a></span><span class="op" id="7491619">[</span><span class="ident" id="7491620"><a href="/gostd/image/gif/writer_test.go.html#7491421">i</a></span><span class="op" id="7491621">]</span><span class="op" id="7491622">,</span>&nbsp;<span class="ident" id="7491624"><a href="/gostd/image/gif/writer_test.go.html#7491230">g1</a></span><span class="op" id="7491626">.</span><span class="ident" id="7491627"><a href="/gostd/image/gif/reader.go.html#5724869">Delay</a></span><span class="op" id="7491632">[</span><span class="ident" id="7491633"><a href="/gostd/image/gif/writer_test.go.html#7491421">i</a></span><span class="op" id="7491634">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7491638">if</span>&nbsp;<span class="ident" id="7491641"><a href="/gostd/image/gif/writer_test.go.html#7491601">d0</a></span>&nbsp;<span class="op" id="7491644">!=</span>&nbsp;<span class="ident" id="7491647"><a href="/gostd/image/gif/writer_test.go.html#7491605">d1</a></span>&nbsp;<span class="op" id="7491650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7491655"><a href="/gostd/image/gif/writer_test.go.html#7490870">t</a></span><span class="op" id="7491656">.</span><span class="ident" id="7491657"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7491663">(</span><span class="string" id="7491664">&#34;%s:&nbsp;delay&nbsp;values&nbsp;differ:&nbsp;%d&nbsp;and&nbsp;%d&#34;</span><span class="op" id="7491700">,</span>&nbsp;<span class="ident" id="7491702"><a href="/gostd/image/gif/writer_test.go.html#7490764">frames</a></span><span class="op" id="7491708">[</span><span class="ident" id="7491709"><a href="/gostd/image/gif/writer_test.go.html#7491421">i</a></span><span class="op" id="7491710">]</span><span class="op" id="7491711">,</span>&nbsp;<span class="ident" id="7491713"><a href="/gostd/image/gif/writer_test.go.html#7491601">d0</a></span><span class="op" id="7491715">,</span>&nbsp;<span class="ident" id="7491717"><a href="/gostd/image/gif/writer_test.go.html#7491605">d1</a></span><span class="op" id="7491719">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7491723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7491726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7491730"><a href="/gostd/image/gif/writer_test.go.html#7491230">g1</a></span><span class="op" id="7491732">.</span><span class="ident" id="7491733"><a href="/gostd/image/gif/reader.go.html#5724869">Delay</a></span>&nbsp;<span class="op" id="7491739">=</span>&nbsp;<span class="builtinfunc" id="7491741">make</span><span class="op" id="7491745">(</span><span class="op" id="7491746">[</span><span class="op" id="7491747">]</span><span class="builtintype" id="7491748">int</span><span class="op" id="7491751">,</span>&nbsp;<span class="num" id="7491753">1</span><span class="op" id="7491754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7491757">if</span>&nbsp;<span class="ident" id="7491760">err</span>&nbsp;<span class="op" id="7491764">:=</span>&nbsp;<span class="ident" id="7491767"><a href="/gostd/image/gif/writer.go.html#5731932">EncodeAll</a></span><span class="op" id="7491776">(</span><span class="ident" id="7491777"><a href="/gostd/image/gif/writer_test.go.html#7488331">ioutil</a></span><span class="op" id="7491783">.</span><span class="ident" id="7491784"><a href="/gostd/io/ioutil/ioutil.go.html#3768458">Discard</a></span><span class="op" id="7491791">,</span>&nbsp;<span class="ident" id="7491793"><a href="/gostd/image/gif/writer_test.go.html#7491230">g1</a></span><span class="op" id="7491795">)</span><span class="op" id="7491796">;</span>&nbsp;<span class="ident" id="7491798"><a href="/gostd/image/gif/writer_test.go.html#7491760">err</a></span>&nbsp;<span class="op" id="7491802">==</span>&nbsp;<span class="builtintype" id="7491805">nil</span>&nbsp;<span class="op" id="7491809">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7491813"><a href="/gostd/image/gif/writer_test.go.html#7490870">t</a></span><span class="op" id="7491814">.</span><span class="ident" id="7491815"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7491820">(</span><span class="string" id="7491821">&#34;expected&nbsp;error&nbsp;from&nbsp;mismatched&nbsp;delay&nbsp;and&nbsp;image&nbsp;slice&nbsp;lengths&#34;</span><span class="op" id="7491883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7491886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7491889">if</span>&nbsp;<span class="ident" id="7491892">err</span>&nbsp;<span class="op" id="7491896">:=</span>&nbsp;<span class="ident" id="7491899"><a href="/gostd/image/gif/writer.go.html#5731932">EncodeAll</a></span><span class="op" id="7491908">(</span><span class="ident" id="7491909"><a href="/gostd/image/gif/writer_test.go.html#7488331">ioutil</a></span><span class="op" id="7491915">.</span><span class="ident" id="7491916"><a href="/gostd/io/ioutil/ioutil.go.html#3768458">Discard</a></span><span class="op" id="7491923">,</span>&nbsp;<span class="op" id="7491925">&amp;</span><span class="ident" id="7491926"><a href="/gostd/image/gif/reader.go.html#5724800">GIF</a></span><span class="op" id="7491929">{</span><span class="op" id="7491930">}</span><span class="op" id="7491931">)</span><span class="op" id="7491932">;</span>&nbsp;<span class="ident" id="7491934"><a href="/gostd/image/gif/writer_test.go.html#7491892">err</a></span>&nbsp;<span class="op" id="7491938">==</span>&nbsp;<span class="builtintype" id="7491941">nil</span>&nbsp;<span class="op" id="7491945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7491949"><a href="/gostd/image/gif/writer_test.go.html#7490870">t</a></span><span class="op" id="7491950">.</span><span class="ident" id="7491951"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7491956">(</span><span class="string" id="7491957">&#34;expected&nbsp;error&nbsp;from&nbsp;providing&nbsp;empty&nbsp;gif&#34;</span><span class="op" id="7491998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7492001">}</span><br>
<span class="lineno">175</span><span class="op" id="7492003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7492006">func</span>&nbsp;<span class="ident" id="7492011">BenchmarkEncode</span><span class="op" id="7492026">(</span><span class="ident" id="7492027">b</span>&nbsp;<span class="op" id="7492029">*</span><span class="ident" id="7492030"><a href="/gostd/image/gif/writer_test.go.html#7488363">testing</a></span><span class="op" id="7492037">.</span><span class="ident" id="7492038"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="7492039">)</span>&nbsp;<span class="op" id="7492041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7492044"><a href="/gostd/image/gif/writer_test.go.html#7492027">b</a></span><span class="op" id="7492045">.</span><span class="ident" id="7492046"><a href="/gostd/testing/benchmark.go.html#5452096">StopTimer</a></span><span class="op" id="7492055">(</span><span class="op" id="7492056">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7492060">bo</span>&nbsp;<span class="op" id="7492063">:=</span>&nbsp;<span class="ident" id="7492066"><a href="/gostd/image/gif/writer_test.go.html#7488292">image</a></span><span class="op" id="7492071">.</span><span class="ident" id="7492072"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="7492076">(</span><span class="num" id="7492077">0</span><span class="op" id="7492078">,</span>&nbsp;<span class="num" id="7492080">0</span><span class="op" id="7492081">,</span>&nbsp;<span class="num" id="7492083">640</span><span class="op" id="7492086">,</span>&nbsp;<span class="num" id="7492088">480</span><span class="op" id="7492091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7492094">rnd</span>&nbsp;<span class="op" id="7492098">:=</span>&nbsp;<span class="ident" id="7492101"><a href="/gostd/image/gif/writer_test.go.html#7488344">rand</a></span><span class="op" id="7492105">.</span><span class="ident" id="7492106"><a href="/gostd/math/rand/rand.go.html#2922124">New</a></span><span class="op" id="7492109">(</span><span class="ident" id="7492110"><a href="/gostd/image/gif/writer_test.go.html#7488344">rand</a></span><span class="op" id="7492114">.</span><span class="ident" id="7492115"><a href="/gostd/math/rand/rand.go.html#2921867">NewSource</a></span><span class="op" id="7492124">(</span><span class="num" id="7492125">123</span><span class="op" id="7492128">)</span><span class="op" id="7492129">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7492133">//&nbsp;Restrict&nbsp;to&nbsp;a&nbsp;256-color&nbsp;paletted&nbsp;image&nbsp;to&nbsp;avoid&nbsp;quantization&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7492204">palette</span>&nbsp;<span class="op" id="7492212">:=</span>&nbsp;<span class="builtinfunc" id="7492215">make</span><span class="op" id="7492219">(</span><span class="ident" id="7492220"><a href="/gostd/image/gif/writer_test.go.html#7488301">color</a></span><span class="op" id="7492225">.</span><span class="ident" id="7492226"><a href="/gostd/image/color/color.go.html#5190467">Palette</a></span><span class="op" id="7492233">,</span>&nbsp;<span class="num" id="7492235">256</span><span class="op" id="7492238">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7492241">for</span>&nbsp;<span class="ident" id="7492245">i</span>&nbsp;<span class="op" id="7492247">:=</span>&nbsp;<span class="keyword" id="7492250">range</span>&nbsp;<span class="ident" id="7492256"><a href="/gostd/image/gif/writer_test.go.html#7492204">palette</a></span>&nbsp;<span class="op" id="7492264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7492268"><a href="/gostd/image/gif/writer_test.go.html#7492204">palette</a></span><span class="op" id="7492275">[</span><span class="ident" id="7492276"><a href="/gostd/image/gif/writer_test.go.html#7492245">i</a></span><span class="op" id="7492277">]</span>&nbsp;<span class="op" id="7492279">=</span>&nbsp;<span class="ident" id="7492281"><a href="/gostd/image/gif/writer_test.go.html#7488301">color</a></span><span class="op" id="7492286">.</span><span class="ident" id="7492287"><a href="/gostd/image/color/color.go.html#5185612">RGBA</a></span><span class="op" id="7492291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7492296">uint8</span><span class="op" id="7492301">(</span><span class="ident" id="7492302"><a href="/gostd/image/gif/writer_test.go.html#7492094">rnd</a></span><span class="op" id="7492305">.</span><span class="ident" id="7492306"><a href="/gostd/math/rand/rand.go.html#2923767">Intn</a></span><span class="op" id="7492310">(</span><span class="num" id="7492311">256</span><span class="op" id="7492314">)</span><span class="op" id="7492315">)</span><span class="op" id="7492316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7492321">uint8</span><span class="op" id="7492326">(</span><span class="ident" id="7492327"><a href="/gostd/image/gif/writer_test.go.html#7492094">rnd</a></span><span class="op" id="7492330">.</span><span class="ident" id="7492331"><a href="/gostd/math/rand/rand.go.html#2923767">Intn</a></span><span class="op" id="7492335">(</span><span class="num" id="7492336">256</span><span class="op" id="7492339">)</span><span class="op" id="7492340">)</span><span class="op" id="7492341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7492346">uint8</span><span class="op" id="7492351">(</span><span class="ident" id="7492352"><a href="/gostd/image/gif/writer_test.go.html#7492094">rnd</a></span><span class="op" id="7492355">.</span><span class="ident" id="7492356"><a href="/gostd/math/rand/rand.go.html#2923767">Intn</a></span><span class="op" id="7492360">(</span><span class="num" id="7492361">256</span><span class="op" id="7492364">)</span><span class="op" id="7492365">)</span><span class="op" id="7492366">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7492371">255</span><span class="op" id="7492374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7492378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7492381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7492384">img</span>&nbsp;<span class="op" id="7492388">:=</span>&nbsp;<span class="ident" id="7492391"><a href="/gostd/image/gif/writer_test.go.html#7488292">image</a></span><span class="op" id="7492396">.</span><span class="ident" id="7492397"><a href="/gostd/image/image.go.html#5178970">NewPaletted</a></span><span class="op" id="7492408">(</span><span class="ident" id="7492409"><a href="/gostd/image/gif/writer_test.go.html#7488292">image</a></span><span class="op" id="7492414">.</span><span class="ident" id="7492415"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="7492419">(</span><span class="num" id="7492420">0</span><span class="op" id="7492421">,</span>&nbsp;<span class="num" id="7492423">0</span><span class="op" id="7492424">,</span>&nbsp;<span class="num" id="7492426">640</span><span class="op" id="7492429">,</span>&nbsp;<span class="num" id="7492431">480</span><span class="op" id="7492434">)</span><span class="op" id="7492435">,</span>&nbsp;<span class="ident" id="7492437"><a href="/gostd/image/gif/writer_test.go.html#7492204">palette</a></span><span class="op" id="7492444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7492447">for</span>&nbsp;<span class="ident" id="7492451">y</span>&nbsp;<span class="op" id="7492453">:=</span>&nbsp;<span class="ident" id="7492456"><a href="/gostd/image/gif/writer_test.go.html#7492060">bo</a></span><span class="op" id="7492458">.</span><span class="ident" id="7492459"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="7492462">.</span><span class="ident" id="7492463"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="7492464">;</span>&nbsp;<span class="ident" id="7492466"><a href="/gostd/image/gif/writer_test.go.html#7492451">y</a></span>&nbsp;<span class="op" id="7492468">&lt;</span>&nbsp;<span class="ident" id="7492470"><a href="/gostd/image/gif/writer_test.go.html#7492060">bo</a></span><span class="op" id="7492472">.</span><span class="ident" id="7492473"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="7492476">.</span><span class="ident" id="7492477"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="7492478">;</span>&nbsp;<span class="ident" id="7492480"><a href="/gostd/image/gif/writer_test.go.html#7492451">y</a></span><span class="op" id="7492481">++</span>&nbsp;<span class="op" id="7492484">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7492488">for</span>&nbsp;<span class="ident" id="7492492">x</span>&nbsp;<span class="op" id="7492494">:=</span>&nbsp;<span class="ident" id="7492497"><a href="/gostd/image/gif/writer_test.go.html#7492060">bo</a></span><span class="op" id="7492499">.</span><span class="ident" id="7492500"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="7492503">.</span><span class="ident" id="7492504"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="7492505">;</span>&nbsp;<span class="ident" id="7492507"><a href="/gostd/image/gif/writer_test.go.html#7492492">x</a></span>&nbsp;<span class="op" id="7492509">&lt;</span>&nbsp;<span class="ident" id="7492511"><a href="/gostd/image/gif/writer_test.go.html#7492060">bo</a></span><span class="op" id="7492513">.</span><span class="ident" id="7492514"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="7492517">.</span><span class="ident" id="7492518"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="7492519">;</span>&nbsp;<span class="ident" id="7492521"><a href="/gostd/image/gif/writer_test.go.html#7492492">x</a></span><span class="op" id="7492522">++</span>&nbsp;<span class="op" id="7492525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7492530"><a href="/gostd/image/gif/writer_test.go.html#7492384">img</a></span><span class="op" id="7492533">.</span><span class="ident" id="7492534"><a href="/gostd/image/image.go.html#5177347">Set</a></span><span class="op" id="7492537">(</span><span class="ident" id="7492538"><a href="/gostd/image/gif/writer_test.go.html#7492492">x</a></span><span class="op" id="7492539">,</span>&nbsp;<span class="ident" id="7492541"><a href="/gostd/image/gif/writer_test.go.html#7492451">y</a></span><span class="op" id="7492542">,</span>&nbsp;<span class="ident" id="7492544"><a href="/gostd/image/gif/writer_test.go.html#7492204">palette</a></span><span class="op" id="7492551">[</span><span class="ident" id="7492552"><a href="/gostd/image/gif/writer_test.go.html#7492094">rnd</a></span><span class="op" id="7492555">.</span><span class="ident" id="7492556"><a href="/gostd/math/rand/rand.go.html#2923767">Intn</a></span><span class="op" id="7492560">(</span><span class="num" id="7492561">256</span><span class="op" id="7492564">)</span><span class="op" id="7492565">]</span><span class="op" id="7492566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7492570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7492573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7492577"><a href="/gostd/image/gif/writer_test.go.html#7492027">b</a></span><span class="op" id="7492578">.</span><span class="ident" id="7492579"><a href="/gostd/testing/benchmark.go.html#5452834">SetBytes</a></span><span class="op" id="7492587">(</span><span class="num" id="7492588">640</span>&nbsp;<span class="op" id="7492592">*</span>&nbsp;<span class="num" id="7492594">480</span>&nbsp;<span class="op" id="7492598">*</span>&nbsp;<span class="num" id="7492600">4</span><span class="op" id="7492601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7492604"><a href="/gostd/image/gif/writer_test.go.html#7492027">b</a></span><span class="op" id="7492605">.</span><span class="ident" id="7492606"><a href="/gostd/testing/benchmark.go.html#5451749">StartTimer</a></span><span class="op" id="7492616">(</span><span class="op" id="7492617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7492620">for</span>&nbsp;<span class="ident" id="7492624">i</span>&nbsp;<span class="op" id="7492626">:=</span>&nbsp;<span class="num" id="7492629">0</span><span class="op" id="7492630">;</span>&nbsp;<span class="ident" id="7492632"><a href="/gostd/image/gif/writer_test.go.html#7492624">i</a></span>&nbsp;<span class="op" id="7492634">&lt;</span>&nbsp;<span class="ident" id="7492636"><a href="/gostd/image/gif/writer_test.go.html#7492027">b</a></span><span class="op" id="7492637">.</span><span class="ident" id="7492638"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="7492639">;</span>&nbsp;<span class="ident" id="7492641"><a href="/gostd/image/gif/writer_test.go.html#7492624">i</a></span><span class="op" id="7492642">++</span>&nbsp;<span class="op" id="7492645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7492649"><a href="/gostd/image/gif/writer.go.html#5732498">Encode</a></span><span class="op" id="7492655">(</span><span class="ident" id="7492656"><a href="/gostd/image/gif/writer_test.go.html#7488331">ioutil</a></span><span class="op" id="7492662">.</span><span class="ident" id="7492663"><a href="/gostd/io/ioutil/ioutil.go.html#3768458">Discard</a></span><span class="op" id="7492670">,</span>&nbsp;<span class="ident" id="7492672"><a href="/gostd/image/gif/writer_test.go.html#7492384">img</a></span><span class="op" id="7492675">,</span>&nbsp;<span class="builtintype" id="7492677">nil</span><span class="op" id="7492680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7492683">}</span><br>
<span class="lineno">205</span><span class="op" id="7492685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7492688">func</span>&nbsp;<span class="ident" id="7492693">BenchmarkQuantizedEncode</span><span class="op" id="7492717">(</span><span class="ident" id="7492718">b</span>&nbsp;<span class="op" id="7492720">*</span><span class="ident" id="7492721"><a href="/gostd/image/gif/writer_test.go.html#7488363">testing</a></span><span class="op" id="7492728">.</span><span class="ident" id="7492729"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="7492730">)</span>&nbsp;<span class="op" id="7492732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7492735"><a href="/gostd/image/gif/writer_test.go.html#7492718">b</a></span><span class="op" id="7492736">.</span><span class="ident" id="7492737"><a href="/gostd/testing/benchmark.go.html#5452096">StopTimer</a></span><span class="op" id="7492746">(</span><span class="op" id="7492747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7492750">img</span>&nbsp;<span class="op" id="7492754">:=</span>&nbsp;<span class="ident" id="7492757"><a href="/gostd/image/gif/writer_test.go.html#7488292">image</a></span><span class="op" id="7492762">.</span><span class="ident" id="7492763"><a href="/gostd/image/image.go.html#5158226">NewRGBA</a></span><span class="op" id="7492770">(</span><span class="ident" id="7492771"><a href="/gostd/image/gif/writer_test.go.html#7488292">image</a></span><span class="op" id="7492776">.</span><span class="ident" id="7492777"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="7492781">(</span><span class="num" id="7492782">0</span><span class="op" id="7492783">,</span>&nbsp;<span class="num" id="7492785">0</span><span class="op" id="7492786">,</span>&nbsp;<span class="num" id="7492788">640</span><span class="op" id="7492791">,</span>&nbsp;<span class="num" id="7492793">480</span><span class="op" id="7492796">)</span><span class="op" id="7492797">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7492800">bo</span>&nbsp;<span class="op" id="7492803">:=</span>&nbsp;<span class="ident" id="7492806"><a href="/gostd/image/gif/writer_test.go.html#7492750">img</a></span><span class="op" id="7492809">.</span><span class="ident" id="7492810"><a href="/gostd/image/image.go.html#5156299">Bounds</a></span><span class="op" id="7492816">(</span><span class="op" id="7492817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7492820">rnd</span>&nbsp;<span class="op" id="7492824">:=</span>&nbsp;<span class="ident" id="7492827"><a href="/gostd/image/gif/writer_test.go.html#7488344">rand</a></span><span class="op" id="7492831">.</span><span class="ident" id="7492832"><a href="/gostd/math/rand/rand.go.html#2922124">New</a></span><span class="op" id="7492835">(</span><span class="ident" id="7492836"><a href="/gostd/image/gif/writer_test.go.html#7488344">rand</a></span><span class="op" id="7492840">.</span><span class="ident" id="7492841"><a href="/gostd/math/rand/rand.go.html#2921867">NewSource</a></span><span class="op" id="7492850">(</span><span class="num" id="7492851">123</span><span class="op" id="7492854">)</span><span class="op" id="7492855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7492858">for</span>&nbsp;<span class="ident" id="7492862">y</span>&nbsp;<span class="op" id="7492864">:=</span>&nbsp;<span class="ident" id="7492867"><a href="/gostd/image/gif/writer_test.go.html#7492800">bo</a></span><span class="op" id="7492869">.</span><span class="ident" id="7492870"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="7492873">.</span><span class="ident" id="7492874"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="7492875">;</span>&nbsp;<span class="ident" id="7492877"><a href="/gostd/image/gif/writer_test.go.html#7492862">y</a></span>&nbsp;<span class="op" id="7492879">&lt;</span>&nbsp;<span class="ident" id="7492881"><a href="/gostd/image/gif/writer_test.go.html#7492800">bo</a></span><span class="op" id="7492883">.</span><span class="ident" id="7492884"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="7492887">.</span><span class="ident" id="7492888"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="7492889">;</span>&nbsp;<span class="ident" id="7492891"><a href="/gostd/image/gif/writer_test.go.html#7492862">y</a></span><span class="op" id="7492892">++</span>&nbsp;<span class="op" id="7492895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7492899">for</span>&nbsp;<span class="ident" id="7492903">x</span>&nbsp;<span class="op" id="7492905">:=</span>&nbsp;<span class="ident" id="7492908"><a href="/gostd/image/gif/writer_test.go.html#7492800">bo</a></span><span class="op" id="7492910">.</span><span class="ident" id="7492911"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="7492914">.</span><span class="ident" id="7492915"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="7492916">;</span>&nbsp;<span class="ident" id="7492918"><a href="/gostd/image/gif/writer_test.go.html#7492903">x</a></span>&nbsp;<span class="op" id="7492920">&lt;</span>&nbsp;<span class="ident" id="7492922"><a href="/gostd/image/gif/writer_test.go.html#7492800">bo</a></span><span class="op" id="7492924">.</span><span class="ident" id="7492925"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="7492928">.</span><span class="ident" id="7492929"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="7492930">;</span>&nbsp;<span class="ident" id="7492932"><a href="/gostd/image/gif/writer_test.go.html#7492903">x</a></span><span class="op" id="7492933">++</span>&nbsp;<span class="op" id="7492936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7492941"><a href="/gostd/image/gif/writer_test.go.html#7492750">img</a></span><span class="op" id="7492944">.</span><span class="ident" id="7492945"><a href="/gostd/image/image.go.html#5157058">SetRGBA</a></span><span class="op" id="7492952">(</span><span class="ident" id="7492953"><a href="/gostd/image/gif/writer_test.go.html#7492903">x</a></span><span class="op" id="7492954">,</span>&nbsp;<span class="ident" id="7492956"><a href="/gostd/image/gif/writer_test.go.html#7492862">y</a></span><span class="op" id="7492957">,</span>&nbsp;<span class="ident" id="7492959"><a href="/gostd/image/gif/writer_test.go.html#7488301">color</a></span><span class="op" id="7492964">.</span><span class="ident" id="7492965"><a href="/gostd/image/color/color.go.html#5185612">RGBA</a></span><span class="op" id="7492969">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7492975">uint8</span><span class="op" id="7492980">(</span><span class="ident" id="7492981"><a href="/gostd/image/gif/writer_test.go.html#7492820">rnd</a></span><span class="op" id="7492984">.</span><span class="ident" id="7492985"><a href="/gostd/math/rand/rand.go.html#2923767">Intn</a></span><span class="op" id="7492989">(</span><span class="num" id="7492990">256</span><span class="op" id="7492993">)</span><span class="op" id="7492994">)</span><span class="op" id="7492995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7493001">uint8</span><span class="op" id="7493006">(</span><span class="ident" id="7493007"><a href="/gostd/image/gif/writer_test.go.html#7492820">rnd</a></span><span class="op" id="7493010">.</span><span class="ident" id="7493011"><a href="/gostd/math/rand/rand.go.html#2923767">Intn</a></span><span class="op" id="7493015">(</span><span class="num" id="7493016">256</span><span class="op" id="7493019">)</span><span class="op" id="7493020">)</span><span class="op" id="7493021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7493027">uint8</span><span class="op" id="7493032">(</span><span class="ident" id="7493033"><a href="/gostd/image/gif/writer_test.go.html#7492820">rnd</a></span><span class="op" id="7493036">.</span><span class="ident" id="7493037"><a href="/gostd/math/rand/rand.go.html#2923767">Intn</a></span><span class="op" id="7493041">(</span><span class="num" id="7493042">256</span><span class="op" id="7493045">)</span><span class="op" id="7493046">)</span><span class="op" id="7493047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7493053">255</span><span class="op" id="7493056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7493061">}</span><span class="op" id="7493062">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7493066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7493069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7493072"><a href="/gostd/image/gif/writer_test.go.html#7492718">b</a></span><span class="op" id="7493073">.</span><span class="ident" id="7493074"><a href="/gostd/testing/benchmark.go.html#5452834">SetBytes</a></span><span class="op" id="7493082">(</span><span class="num" id="7493083">640</span>&nbsp;<span class="op" id="7493087">*</span>&nbsp;<span class="num" id="7493089">480</span>&nbsp;<span class="op" id="7493093">*</span>&nbsp;<span class="num" id="7493095">4</span><span class="op" id="7493096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7493099"><a href="/gostd/image/gif/writer_test.go.html#7492718">b</a></span><span class="op" id="7493100">.</span><span class="ident" id="7493101"><a href="/gostd/testing/benchmark.go.html#5451749">StartTimer</a></span><span class="op" id="7493111">(</span><span class="op" id="7493112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7493115">for</span>&nbsp;<span class="ident" id="7493119">i</span>&nbsp;<span class="op" id="7493121">:=</span>&nbsp;<span class="num" id="7493124">0</span><span class="op" id="7493125">;</span>&nbsp;<span class="ident" id="7493127"><a href="/gostd/image/gif/writer_test.go.html#7493119">i</a></span>&nbsp;<span class="op" id="7493129">&lt;</span>&nbsp;<span class="ident" id="7493131"><a href="/gostd/image/gif/writer_test.go.html#7492718">b</a></span><span class="op" id="7493132">.</span><span class="ident" id="7493133"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="7493134">;</span>&nbsp;<span class="ident" id="7493136"><a href="/gostd/image/gif/writer_test.go.html#7493119">i</a></span><span class="op" id="7493137">++</span>&nbsp;<span class="op" id="7493140">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7493144"><a href="/gostd/image/gif/writer.go.html#5732498">Encode</a></span><span class="op" id="7493150">(</span><span class="ident" id="7493151"><a href="/gostd/image/gif/writer_test.go.html#7488331">ioutil</a></span><span class="op" id="7493157">.</span><span class="ident" id="7493158"><a href="/gostd/io/ioutil/ioutil.go.html#3768458">Discard</a></span><span class="op" id="7493165">,</span>&nbsp;<span class="ident" id="7493167"><a href="/gostd/image/gif/writer_test.go.html#7492750">img</a></span><span class="op" id="7493170">,</span>&nbsp;<span class="builtintype" id="7493172">nil</span><span class="op" id="7493175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7493178">}</span><br>
<span class="lineno"></span><span class="op" id="7493180">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
