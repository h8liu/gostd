<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/format</h2>
<ul>
<li><a href="/gostd/go/format/format.go.html">format.go</a></li>
<li><a href="/gostd/go/format/format_test.go.html" class="current">format_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8217993">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8218048">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8218102">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8218153">package</span>&nbsp;<span class="ident" id="8218161">format</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8218169">import</span>&nbsp;<span class="op" id="8218176">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8218179">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8218188">&#34;go/parser&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8218201">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8218213">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8218226">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8218237">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8218247">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8218250">const</span>&nbsp;<span class="ident" id="8218256">testfile</span>&nbsp;<span class="op" id="8218265">=</span>&nbsp;<span class="string" id="8218267">&#34;format_test.go&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8218285">func</span>&nbsp;<span class="ident" id="8218290">diff</span><span class="op" id="8218294">(</span><span class="ident" id="8218295">t</span>&nbsp;<span class="op" id="8218297">*</span><span class="ident" id="8218298">testing</span><span class="op" id="8218305">.</span><span class="ident" id="8218306">T</span><span class="op" id="8218307">,</span>&nbsp;<span class="ident" id="8218309">dst</span><span class="op" id="8218312">,</span>&nbsp;<span class="ident" id="8218314">src</span>&nbsp;<span class="op" id="8218318">[</span><span class="op" id="8218319">]</span><span class="builtintype" id="8218320">byte</span><span class="op" id="8218324">)</span>&nbsp;<span class="op" id="8218326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8218329">line</span>&nbsp;<span class="op" id="8218334">:=</span>&nbsp;<span class="num" id="8218337">1</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8218340">offs</span>&nbsp;<span class="op" id="8218345">:=</span>&nbsp;<span class="num" id="8218348">0</span>&nbsp;<span class="comment" id="8218350">//&nbsp;line&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8218366">for</span>&nbsp;<span class="ident" id="8218370">i</span>&nbsp;<span class="op" id="8218372">:=</span>&nbsp;<span class="num" id="8218375">0</span><span class="op" id="8218376">;</span>&nbsp;<span class="ident" id="8218378">i</span>&nbsp;<span class="op" id="8218380">&lt;</span>&nbsp;<span class="builtinfunc" id="8218382">len</span><span class="op" id="8218385">(</span><span class="ident" id="8218386">dst</span><span class="op" id="8218389">)</span>&nbsp;<span class="op" id="8218391">&amp;&amp;</span>&nbsp;<span class="ident" id="8218394">i</span>&nbsp;<span class="op" id="8218396">&lt;</span>&nbsp;<span class="builtinfunc" id="8218398">len</span><span class="op" id="8218401">(</span><span class="ident" id="8218402">src</span><span class="op" id="8218405">)</span><span class="op" id="8218406">;</span>&nbsp;<span class="ident" id="8218408">i</span><span class="op" id="8218409">++</span>&nbsp;<span class="op" id="8218412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8218416">d</span>&nbsp;<span class="op" id="8218418">:=</span>&nbsp;<span class="ident" id="8218421">dst</span><span class="op" id="8218424">[</span><span class="ident" id="8218425">i</span><span class="op" id="8218426">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8218430">s</span>&nbsp;<span class="op" id="8218432">:=</span>&nbsp;<span class="ident" id="8218435">src</span><span class="op" id="8218438">[</span><span class="ident" id="8218439">i</span><span class="op" id="8218440">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8218444">if</span>&nbsp;<span class="ident" id="8218447">d</span>&nbsp;<span class="op" id="8218449">!=</span>&nbsp;<span class="ident" id="8218452">s</span>&nbsp;<span class="op" id="8218454">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8218459">t</span><span class="op" id="8218460">.</span><span class="ident" id="8218461">Errorf</span><span class="op" id="8218467">(</span><span class="string" id="8218468">&#34;dst:%d:&nbsp;%s\n&#34;</span><span class="op" id="8218482">,</span>&nbsp;<span class="ident" id="8218484">line</span><span class="op" id="8218488">,</span>&nbsp;<span class="ident" id="8218490">dst</span><span class="op" id="8218493">[</span><span class="ident" id="8218494">offs</span><span class="op" id="8218498">:</span><span class="ident" id="8218499">i</span><span class="op" id="8218500">+</span><span class="num" id="8218501">1</span><span class="op" id="8218502">]</span><span class="op" id="8218503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8218508">t</span><span class="op" id="8218509">.</span><span class="ident" id="8218510">Errorf</span><span class="op" id="8218516">(</span><span class="string" id="8218517">&#34;src:%d:&nbsp;%s\n&#34;</span><span class="op" id="8218531">,</span>&nbsp;<span class="ident" id="8218533">line</span><span class="op" id="8218537">,</span>&nbsp;<span class="ident" id="8218539">src</span><span class="op" id="8218542">[</span><span class="ident" id="8218543">offs</span><span class="op" id="8218547">:</span><span class="ident" id="8218548">i</span><span class="op" id="8218549">+</span><span class="num" id="8218550">1</span><span class="op" id="8218551">]</span><span class="op" id="8218552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8218557">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8218566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8218570">if</span>&nbsp;<span class="ident" id="8218573">s</span>&nbsp;<span class="op" id="8218575">==</span>&nbsp;<span class="string" id="8218578">&#39;\n&#39;</span>&nbsp;<span class="op" id="8218583">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8218588">line</span><span class="op" id="8218592">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8218598">offs</span>&nbsp;<span class="op" id="8218603">=</span>&nbsp;<span class="ident" id="8218605">i</span>&nbsp;<span class="op" id="8218607">+</span>&nbsp;<span class="num" id="8218609">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8218613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8218616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8218619">if</span>&nbsp;<span class="builtinfunc" id="8218622">len</span><span class="op" id="8218625">(</span><span class="ident" id="8218626">dst</span><span class="op" id="8218629">)</span>&nbsp;<span class="op" id="8218631">!=</span>&nbsp;<span class="builtinfunc" id="8218634">len</span><span class="op" id="8218637">(</span><span class="ident" id="8218638">src</span><span class="op" id="8218641">)</span>&nbsp;<span class="op" id="8218643">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8218647">t</span><span class="op" id="8218648">.</span><span class="ident" id="8218649">Errorf</span><span class="op" id="8218655">(</span><span class="string" id="8218656">&#34;len(dst)&nbsp;=&nbsp;%d,&nbsp;len(src)&nbsp;=&nbsp;%d\nsrc&nbsp;=&nbsp;%q&#34;</span><span class="op" id="8218696">,</span>&nbsp;<span class="builtinfunc" id="8218698">len</span><span class="op" id="8218701">(</span><span class="ident" id="8218702">dst</span><span class="op" id="8218705">)</span><span class="op" id="8218706">,</span>&nbsp;<span class="builtinfunc" id="8218708">len</span><span class="op" id="8218711">(</span><span class="ident" id="8218712">src</span><span class="op" id="8218715">)</span><span class="op" id="8218716">,</span>&nbsp;<span class="ident" id="8218718">src</span><span class="op" id="8218721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8218724">}</span><br>
<span class="lineno"></span><span class="op" id="8218726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8218729">func</span>&nbsp;<span class="ident" id="8218734">TestNode</span><span class="op" id="8218742">(</span><span class="ident" id="8218743">t</span>&nbsp;<span class="op" id="8218745">*</span><span class="ident" id="8218746">testing</span><span class="op" id="8218753">.</span><span class="ident" id="8218754">T</span><span class="op" id="8218755">)</span>&nbsp;<span class="op" id="8218757">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8218760">src</span><span class="op" id="8218763">,</span>&nbsp;<span class="ident" id="8218765">err</span>&nbsp;<span class="op" id="8218769">:=</span>&nbsp;<span class="ident" id="8218772">ioutil</span><span class="op" id="8218778">.</span><span class="ident" id="8218779">ReadFile</span><span class="op" id="8218787">(</span><span class="ident" id="8218788">testfile</span><span class="op" id="8218796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8218799">if</span>&nbsp;<span class="ident" id="8218802">err</span>&nbsp;<span class="op" id="8218806">!=</span>&nbsp;<span class="ident" id="8218809">nil</span>&nbsp;<span class="op" id="8218813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8218817">t</span><span class="op" id="8218818">.</span><span class="ident" id="8218819">Fatal</span><span class="op" id="8218824">(</span><span class="ident" id="8218825">err</span><span class="op" id="8218828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8218831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8218835">fset</span>&nbsp;<span class="op" id="8218840">:=</span>&nbsp;<span class="ident" id="8218843">token</span><span class="op" id="8218848">.</span><span class="ident" id="8218849">NewFileSet</span><span class="op" id="8218859">(</span><span class="op" id="8218860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8218863">file</span><span class="op" id="8218867">,</span>&nbsp;<span class="ident" id="8218869">err</span>&nbsp;<span class="op" id="8218873">:=</span>&nbsp;<span class="ident" id="8218876">parser</span><span class="op" id="8218882">.</span><span class="ident" id="8218883">ParseFile</span><span class="op" id="8218892">(</span><span class="ident" id="8218893">fset</span><span class="op" id="8218897">,</span>&nbsp;<span class="ident" id="8218899">testfile</span><span class="op" id="8218907">,</span>&nbsp;<span class="ident" id="8218909">src</span><span class="op" id="8218912">,</span>&nbsp;<span class="ident" id="8218914">parser</span><span class="op" id="8218920">.</span><span class="ident" id="8218921">ParseComments</span><span class="op" id="8218934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8218937">if</span>&nbsp;<span class="ident" id="8218940">err</span>&nbsp;<span class="op" id="8218944">!=</span>&nbsp;<span class="ident" id="8218947">nil</span>&nbsp;<span class="op" id="8218951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8218955">t</span><span class="op" id="8218956">.</span><span class="ident" id="8218957">Fatal</span><span class="op" id="8218962">(</span><span class="ident" id="8218963">err</span><span class="op" id="8218966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8218969">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8218973">var</span>&nbsp;<span class="ident" id="8218977">buf</span>&nbsp;<span class="ident" id="8218981">bytes</span><span class="op" id="8218986">.</span><span class="ident" id="8218987">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8218996">if</span>&nbsp;<span class="ident" id="8218999">err</span>&nbsp;<span class="op" id="8219003">=</span>&nbsp;<span class="ident" id="8219005">Node</span><span class="op" id="8219009">(</span><span class="op" id="8219010">&amp;</span><span class="ident" id="8219011">buf</span><span class="op" id="8219014">,</span>&nbsp;<span class="ident" id="8219016">fset</span><span class="op" id="8219020">,</span>&nbsp;<span class="ident" id="8219022">file</span><span class="op" id="8219026">)</span><span class="op" id="8219027">;</span>&nbsp;<span class="ident" id="8219029">err</span>&nbsp;<span class="op" id="8219033">!=</span>&nbsp;<span class="ident" id="8219036">nil</span>&nbsp;<span class="op" id="8219040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8219044">t</span><span class="op" id="8219045">.</span><span class="ident" id="8219046">Fatal</span><span class="op" id="8219051">(</span><span class="string" id="8219052">&#34;Node&nbsp;failed:&#34;</span><span class="op" id="8219066">,</span>&nbsp;<span class="ident" id="8219068">err</span><span class="op" id="8219071">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8219074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8219078">diff</span><span class="op" id="8219082">(</span><span class="ident" id="8219083">t</span><span class="op" id="8219084">,</span>&nbsp;<span class="ident" id="8219086">buf</span><span class="op" id="8219089">.</span><span class="ident" id="8219090">Bytes</span><span class="op" id="8219095">(</span><span class="op" id="8219096">)</span><span class="op" id="8219097">,</span>&nbsp;<span class="ident" id="8219099">src</span><span class="op" id="8219102">)</span><br>
<span class="lineno"></span><span class="op" id="8219104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="8219107">func</span>&nbsp;<span class="ident" id="8219112">TestSource</span><span class="op" id="8219122">(</span><span class="ident" id="8219123">t</span>&nbsp;<span class="op" id="8219125">*</span><span class="ident" id="8219126">testing</span><span class="op" id="8219133">.</span><span class="ident" id="8219134">T</span><span class="op" id="8219135">)</span>&nbsp;<span class="op" id="8219137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8219140">src</span><span class="op" id="8219143">,</span>&nbsp;<span class="ident" id="8219145">err</span>&nbsp;<span class="op" id="8219149">:=</span>&nbsp;<span class="ident" id="8219152">ioutil</span><span class="op" id="8219158">.</span><span class="ident" id="8219159">ReadFile</span><span class="op" id="8219167">(</span><span class="ident" id="8219168">testfile</span><span class="op" id="8219176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8219179">if</span>&nbsp;<span class="ident" id="8219182">err</span>&nbsp;<span class="op" id="8219186">!=</span>&nbsp;<span class="ident" id="8219189">nil</span>&nbsp;<span class="op" id="8219193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8219197">t</span><span class="op" id="8219198">.</span><span class="ident" id="8219199">Fatal</span><span class="op" id="8219204">(</span><span class="ident" id="8219205">err</span><span class="op" id="8219208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8219211">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8219215">res</span><span class="op" id="8219218">,</span>&nbsp;<span class="ident" id="8219220">err</span>&nbsp;<span class="op" id="8219224">:=</span>&nbsp;<span class="ident" id="8219227">Source</span><span class="op" id="8219233">(</span><span class="ident" id="8219234">src</span><span class="op" id="8219237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8219240">if</span>&nbsp;<span class="ident" id="8219243">err</span>&nbsp;<span class="op" id="8219247">!=</span>&nbsp;<span class="ident" id="8219250">nil</span>&nbsp;<span class="op" id="8219254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8219258">t</span><span class="op" id="8219259">.</span><span class="ident" id="8219260">Fatal</span><span class="op" id="8219265">(</span><span class="string" id="8219266">&#34;Source&nbsp;failed:&#34;</span><span class="op" id="8219282">,</span>&nbsp;<span class="ident" id="8219284">err</span><span class="op" id="8219287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8219290">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8219294">diff</span><span class="op" id="8219298">(</span><span class="ident" id="8219299">t</span><span class="op" id="8219300">,</span>&nbsp;<span class="ident" id="8219302">res</span><span class="op" id="8219305">,</span>&nbsp;<span class="ident" id="8219307">src</span><span class="op" id="8219310">)</span><br>
<span class="lineno"></span><span class="op" id="8219312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8219315">//&nbsp;Test&nbsp;cases&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;fail&nbsp;are&nbsp;marked&nbsp;by&nbsp;the&nbsp;prefix&nbsp;&#34;ERROR&#34;.</span><br>
<span class="lineno">75</span><span class="keyword" id="8219389">var</span>&nbsp;<span class="ident" id="8219393">tests</span>&nbsp;<span class="op" id="8219399">=</span>&nbsp;<span class="op" id="8219401">[</span><span class="op" id="8219402">]</span><span class="builtintype" id="8219403">string</span><span class="op" id="8219409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8219412">//&nbsp;declaration&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8219434">`import&nbsp;&#34;go/format&#34;`</span><span class="op" id="8219454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8219457">&#34;var&nbsp;x&nbsp;int&#34;</span><span class="op" id="8219468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8219471">&#34;var&nbsp;x&nbsp;int\n\ntype&nbsp;T&nbsp;struct{}&#34;</span><span class="op" id="8219501">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8219505">//&nbsp;statement&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8219525">&#34;x&nbsp;:=&nbsp;0&#34;</span><span class="op" id="8219533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8219536">&#34;f(a,&nbsp;b,&nbsp;c)\nvar&nbsp;x&nbsp;int&nbsp;=&nbsp;f(1,&nbsp;2,&nbsp;3)&#34;</span><span class="op" id="8219572">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8219576">//&nbsp;indentation,&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8219620">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()&#34;</span><span class="op" id="8219640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8219643">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8219669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8219672">&#34;\n\t\t\n\n\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8219708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8219711">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8219755">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8219758">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\nfoo\n`\n\n\n&#34;</span><span class="op" id="8219815">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8219821">//&nbsp;no&nbsp;indentation&nbsp;added&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8219865">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\n\t\tfoo\n`\n\n\n&#34;</span><span class="op" id="8219926">,</span>&nbsp;<span class="comment" id="8219928">//&nbsp;no&nbsp;indentation&nbsp;removed&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8219975">//&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8219988">&#34;i&nbsp;:=&nbsp;5&nbsp;/*&nbsp;Comment&nbsp;*/&#34;</span><span class="op" id="8220010">,</span>&nbsp;<span class="comment" id="8220012">//&nbsp;Issue&nbsp;5551.</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8220029">//&nbsp;erroneous&nbsp;programs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8220052">&#34;ERROR1&nbsp;+&nbsp;2&nbsp;+&#34;</span><span class="op" id="8220066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8220069">&#34;ERRORx&nbsp;:=&nbsp;&nbsp;0&#34;</span><span class="op" id="8220083">,</span><br>
<span class="lineno"></span><span class="op" id="8220085">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="8220088">func</span>&nbsp;<span class="ident" id="8220093">String</span><span class="op" id="8220099">(</span><span class="ident" id="8220100">s</span>&nbsp;<span class="builtintype" id="8220102">string</span><span class="op" id="8220108">)</span>&nbsp;<span class="op" id="8220110">(</span><span class="builtintype" id="8220111">string</span><span class="op" id="8220117">,</span>&nbsp;<span class="builtintype" id="8220119">error</span><span class="op" id="8220124">)</span>&nbsp;<span class="op" id="8220126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8220129">res</span><span class="op" id="8220132">,</span>&nbsp;<span class="ident" id="8220134">err</span>&nbsp;<span class="op" id="8220138">:=</span>&nbsp;<span class="ident" id="8220141">Source</span><span class="op" id="8220147">(</span><span class="op" id="8220148">[</span><span class="op" id="8220149">]</span><span class="builtintype" id="8220150">byte</span><span class="op" id="8220154">(</span><span class="ident" id="8220155">s</span><span class="op" id="8220156">)</span><span class="op" id="8220157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8220160">if</span>&nbsp;<span class="ident" id="8220163">err</span>&nbsp;<span class="op" id="8220167">!=</span>&nbsp;<span class="ident" id="8220170">nil</span>&nbsp;<span class="op" id="8220174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8220178">return</span>&nbsp;<span class="string" id="8220185">&#34;&#34;</span><span class="op" id="8220187">,</span>&nbsp;<span class="ident" id="8220189">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8220194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8220197">return</span>&nbsp;<span class="builtintype" id="8220204">string</span><span class="op" id="8220210">(</span><span class="ident" id="8220211">res</span><span class="op" id="8220214">)</span><span class="op" id="8220215">,</span>&nbsp;<span class="ident" id="8220217">nil</span><br>
<span class="lineno"></span><span class="op" id="8220221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8220224">func</span>&nbsp;<span class="ident" id="8220229">TestPartial</span><span class="op" id="8220240">(</span><span class="ident" id="8220241">t</span>&nbsp;<span class="op" id="8220243">*</span><span class="ident" id="8220244">testing</span><span class="op" id="8220251">.</span><span class="ident" id="8220252">T</span><span class="op" id="8220253">)</span>&nbsp;<span class="op" id="8220255">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8220258">for</span>&nbsp;<span class="ident" id="8220262">_</span><span class="op" id="8220263">,</span>&nbsp;<span class="ident" id="8220265">src</span>&nbsp;<span class="op" id="8220269">:=</span>&nbsp;<span class="keyword" id="8220272">range</span>&nbsp;<span class="ident" id="8220278">tests</span>&nbsp;<span class="op" id="8220284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8220288">if</span>&nbsp;<span class="ident" id="8220291">strings</span><span class="op" id="8220298">.</span><span class="ident" id="8220299">HasPrefix</span><span class="op" id="8220308">(</span><span class="ident" id="8220309">src</span><span class="op" id="8220312">,</span>&nbsp;<span class="string" id="8220314">&#34;ERROR&#34;</span><span class="op" id="8220321">)</span>&nbsp;<span class="op" id="8220323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8220328">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;fail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8220356">src</span>&nbsp;<span class="op" id="8220360">=</span>&nbsp;<span class="ident" id="8220362">src</span><span class="op" id="8220365">[</span><span class="num" id="8220366">5</span><span class="op" id="8220367">:</span><span class="op" id="8220368">]</span>&nbsp;<span class="comment" id="8220370">//&nbsp;remove&nbsp;ERROR&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8220396">res</span><span class="op" id="8220399">,</span>&nbsp;<span class="ident" id="8220401">err</span>&nbsp;<span class="op" id="8220405">:=</span>&nbsp;<span class="ident" id="8220408">String</span><span class="op" id="8220414">(</span><span class="ident" id="8220415">src</span><span class="op" id="8220418">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8220423">if</span>&nbsp;<span class="ident" id="8220426">err</span>&nbsp;<span class="op" id="8220430">==</span>&nbsp;<span class="ident" id="8220433">nil</span>&nbsp;<span class="op" id="8220437">&amp;&amp;</span>&nbsp;<span class="ident" id="8220440">res</span>&nbsp;<span class="op" id="8220444">==</span>&nbsp;<span class="ident" id="8220447">src</span>&nbsp;<span class="op" id="8220451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8220457">t</span><span class="op" id="8220458">.</span><span class="ident" id="8220459">Errorf</span><span class="op" id="8220465">(</span><span class="string" id="8220466">&#34;formatting&nbsp;succeeded&nbsp;but&nbsp;was&nbsp;expected&nbsp;to&nbsp;fail:\n%q&#34;</span><span class="op" id="8220518">,</span>&nbsp;<span class="ident" id="8220520">src</span><span class="op" id="8220523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8220528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8220532">}</span>&nbsp;<span class="keyword" id="8220534">else</span>&nbsp;<span class="op" id="8220539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8220544">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;succeed</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8220575">res</span><span class="op" id="8220578">,</span>&nbsp;<span class="ident" id="8220580">err</span>&nbsp;<span class="op" id="8220584">:=</span>&nbsp;<span class="ident" id="8220587">String</span><span class="op" id="8220593">(</span><span class="ident" id="8220594">src</span><span class="op" id="8220597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8220602">if</span>&nbsp;<span class="ident" id="8220605">err</span>&nbsp;<span class="op" id="8220609">!=</span>&nbsp;<span class="ident" id="8220612">nil</span>&nbsp;<span class="op" id="8220616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8220622">t</span><span class="op" id="8220623">.</span><span class="ident" id="8220624">Errorf</span><span class="op" id="8220630">(</span><span class="string" id="8220631">&#34;formatting&nbsp;failed&nbsp;(%s):\n%q&#34;</span><span class="op" id="8220660">,</span>&nbsp;<span class="ident" id="8220662">err</span><span class="op" id="8220665">,</span>&nbsp;<span class="ident" id="8220667">src</span><span class="op" id="8220670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8220675">}</span>&nbsp;<span class="keyword" id="8220677">else</span>&nbsp;<span class="keyword" id="8220682">if</span>&nbsp;<span class="ident" id="8220685">res</span>&nbsp;<span class="op" id="8220689">!=</span>&nbsp;<span class="ident" id="8220692">src</span>&nbsp;<span class="op" id="8220696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8220702">t</span><span class="op" id="8220703">.</span><span class="ident" id="8220704">Errorf</span><span class="op" id="8220710">(</span><span class="string" id="8220711">&#34;formatting&nbsp;incorrect:\nsource:&nbsp;%q\nresult:&nbsp;%q&#34;</span><span class="op" id="8220758">,</span>&nbsp;<span class="ident" id="8220760">src</span><span class="op" id="8220763">,</span>&nbsp;<span class="ident" id="8220765">res</span><span class="op" id="8220768">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8220773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8220777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8220780">}</span><br>
<span class="lineno"></span><span class="op" id="8220782">}</span>
</div>
</body>
</html>
