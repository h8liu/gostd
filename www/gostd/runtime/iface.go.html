<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html" class="current">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1570537">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1570592">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1570646">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1570697">package</span>&nbsp;<span class="ident" id="1570705">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1570714">import</span>&nbsp;<span class="op" id="1570721">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1570724">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1570733">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1570736">const</span>&nbsp;<span class="op" id="1570742">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570745">hashSize</span>&nbsp;<span class="op" id="1570754">=</span>&nbsp;<span class="num" id="1570756">1009</span><br>
<span class="lineno"></span><span class="op" id="1570761">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="1570764">var</span>&nbsp;<span class="op" id="1570768">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570771">ifaceLock</span>&nbsp;<span class="ident" id="1570781">mutex</span>&nbsp;<span class="comment" id="1570787">//&nbsp;lock&nbsp;for&nbsp;accessing&nbsp;hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570815">hash</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1570825">[</span><span class="ident" id="1570826">hashSize</span><span class="op" id="1570834">]</span><span class="op" id="1570835">*</span><span class="ident" id="1570836">itab</span><br>
<span class="lineno"></span><span class="op" id="1570841">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="1570844">//&nbsp;fInterface&nbsp;is&nbsp;our&nbsp;standard&nbsp;non-empty&nbsp;interface.&nbsp;&nbsp;We&nbsp;use&nbsp;it&nbsp;instead</span><br>
<span class="lineno"></span><span class="comment" id="1570914">//&nbsp;of&nbsp;interface{f()}&nbsp;in&nbsp;function&nbsp;prototypes&nbsp;because&nbsp;gofmt&nbsp;insists&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="1570983">//&nbsp;putting&nbsp;lots&nbsp;of&nbsp;newlines&nbsp;in&nbsp;the&nbsp;otherwise&nbsp;concise&nbsp;interface{f()}.</span><br>
<span class="lineno"></span><span class="keyword" id="1571052">type</span>&nbsp;<span class="ident" id="1571057">fInterface</span>&nbsp;<span class="keyword" id="1571068">interface</span>&nbsp;<span class="op" id="1571078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571081">f</span><span class="op" id="1571082">(</span><span class="op" id="1571083">)</span><br>
<span class="lineno">25</span><span class="op" id="1571085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1571088">func</span>&nbsp;<span class="ident" id="1571093">getitab</span><span class="op" id="1571100">(</span><span class="ident" id="1571101">inter</span>&nbsp;<span class="op" id="1571107">*</span><span class="ident" id="1571108">interfacetype</span><span class="op" id="1571121">,</span>&nbsp;<span class="ident" id="1571123">typ</span>&nbsp;<span class="op" id="1571127">*</span><span class="ident" id="1571128">_type</span><span class="op" id="1571133">,</span>&nbsp;<span class="ident" id="1571135">canfail</span>&nbsp;<span class="builtintype" id="1571143">bool</span><span class="op" id="1571147">)</span>&nbsp;<span class="op" id="1571149">*</span><span class="ident" id="1571150">itab</span>&nbsp;<span class="op" id="1571155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571158">if</span>&nbsp;<span class="builtinfunc" id="1571161">len</span><span class="op" id="1571164">(</span><span class="ident" id="1571165">inter</span><span class="op" id="1571170">.</span><span class="ident" id="1571171">mhdr</span><span class="op" id="1571175">)</span>&nbsp;<span class="op" id="1571177">==</span>&nbsp;<span class="num" id="1571180">0</span>&nbsp;<span class="op" id="1571182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571186">gothrow</span><span class="op" id="1571193">(</span><span class="string" id="1571194">&#34;internal&nbsp;error&nbsp;-&nbsp;misuse&nbsp;of&nbsp;itab&#34;</span><span class="op" id="1571227">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1571230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1571234">//&nbsp;easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571248">x</span>&nbsp;<span class="op" id="1571250">:=</span>&nbsp;<span class="ident" id="1571253">typ</span><span class="op" id="1571256">.</span><span class="ident" id="1571257">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571260">if</span>&nbsp;<span class="ident" id="1571263">x</span>&nbsp;<span class="op" id="1571265">==</span>&nbsp;<span class="ident" id="1571268">nil</span>&nbsp;<span class="op" id="1571272">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571276">if</span>&nbsp;<span class="ident" id="1571279">canfail</span>&nbsp;<span class="op" id="1571287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571292">return</span>&nbsp;<span class="ident" id="1571299">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1571305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571309">i</span>&nbsp;<span class="op" id="1571311">:=</span>&nbsp;<span class="op" id="1571314">(</span><span class="op" id="1571315">*</span><span class="ident" id="1571316">imethod</span><span class="op" id="1571323">)</span><span class="op" id="1571324">(</span><span class="ident" id="1571325">add</span><span class="op" id="1571328">(</span><span class="ident" id="1571329">unsafe</span><span class="op" id="1571335">.</span><span class="ident" id="1571336">Pointer</span><span class="op" id="1571343">(</span><span class="ident" id="1571344">inter</span><span class="op" id="1571349">)</span><span class="op" id="1571350">,</span>&nbsp;<span class="ident" id="1571352">unsafe</span><span class="op" id="1571358">.</span><span class="ident" id="1571359">Sizeof</span><span class="op" id="1571365">(</span><span class="ident" id="1571366">interfacetype</span><span class="op" id="1571379">{</span><span class="op" id="1571380">}</span><span class="op" id="1571381">)</span><span class="op" id="1571382">)</span><span class="op" id="1571383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1571387">panic</span><span class="op" id="1571392">(</span><span class="op" id="1571393">&amp;</span><span class="ident" id="1571394">TypeAssertionError</span><span class="op" id="1571412">{</span><span class="string" id="1571413">&#34;&#34;</span><span class="op" id="1571415">,</span>&nbsp;<span class="op" id="1571417">*</span><span class="ident" id="1571418">typ</span><span class="op" id="1571421">.</span><span class="ident" id="1571422">_string</span><span class="op" id="1571429">,</span>&nbsp;<span class="op" id="1571431">*</span><span class="ident" id="1571432">inter</span><span class="op" id="1571437">.</span><span class="ident" id="1571438">typ</span><span class="op" id="1571441">.</span><span class="ident" id="1571442">_string</span><span class="op" id="1571449">,</span>&nbsp;<span class="op" id="1571451">*</span><span class="ident" id="1571452">i</span><span class="op" id="1571453">.</span><span class="ident" id="1571454">name</span><span class="op" id="1571458">}</span><span class="op" id="1571459">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1571462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1571466">//&nbsp;compiler&nbsp;has&nbsp;provided&nbsp;some&nbsp;good&nbsp;hash&nbsp;codes&nbsp;for&nbsp;us.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571521">h</span>&nbsp;<span class="op" id="1571523">:=</span>&nbsp;<span class="ident" id="1571526">inter</span><span class="op" id="1571531">.</span><span class="ident" id="1571532">typ</span><span class="op" id="1571535">.</span><span class="ident" id="1571536">hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571542">h</span>&nbsp;<span class="op" id="1571544">+=</span>&nbsp;<span class="num" id="1571547">17</span>&nbsp;<span class="op" id="1571550">*</span>&nbsp;<span class="ident" id="1571552">typ</span><span class="op" id="1571555">.</span><span class="ident" id="1571556">hash</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1571562">//&nbsp;TODO(rsc):&nbsp;h&nbsp;+=&nbsp;23&nbsp;*&nbsp;x.mhash&nbsp;?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571597">h</span>&nbsp;<span class="op" id="1571599">%=</span>&nbsp;<span class="ident" id="1571602">hashSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1571613">//&nbsp;look&nbsp;twice&nbsp;-&nbsp;once&nbsp;without&nbsp;lock,&nbsp;once&nbsp;with.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1571660">//&nbsp;common&nbsp;case&nbsp;will&nbsp;be&nbsp;no&nbsp;lock&nbsp;contention.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571704">var</span>&nbsp;<span class="ident" id="1571708">m</span>&nbsp;<span class="op" id="1571710">*</span><span class="ident" id="1571711">itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571717">var</span>&nbsp;<span class="ident" id="1571721">locked</span>&nbsp;<span class="builtintype" id="1571728">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571733">for</span>&nbsp;<span class="ident" id="1571737">locked</span>&nbsp;<span class="op" id="1571744">=</span>&nbsp;<span class="num" id="1571746">0</span><span class="op" id="1571747">;</span>&nbsp;<span class="ident" id="1571749">locked</span>&nbsp;<span class="op" id="1571756">&lt;</span>&nbsp;<span class="num" id="1571758">2</span><span class="op" id="1571759">;</span>&nbsp;<span class="ident" id="1571761">locked</span><span class="op" id="1571767">++</span>&nbsp;<span class="op" id="1571770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571774">if</span>&nbsp;<span class="ident" id="1571777">locked</span>&nbsp;<span class="op" id="1571784">!=</span>&nbsp;<span class="num" id="1571787">0</span>&nbsp;<span class="op" id="1571789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571794">lock</span><span class="op" id="1571798">(</span><span class="op" id="1571799">&amp;</span><span class="ident" id="1571800">ifaceLock</span><span class="op" id="1571809">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1571813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571817">for</span>&nbsp;<span class="ident" id="1571821">m</span>&nbsp;<span class="op" id="1571823">=</span>&nbsp;<span class="op" id="1571825">(</span><span class="op" id="1571826">*</span><span class="ident" id="1571827">itab</span><span class="op" id="1571831">)</span><span class="op" id="1571832">(</span><span class="ident" id="1571833">atomicloadp</span><span class="op" id="1571844">(</span><span class="ident" id="1571845">unsafe</span><span class="op" id="1571851">.</span><span class="ident" id="1571852">Pointer</span><span class="op" id="1571859">(</span><span class="op" id="1571860">&amp;</span><span class="ident" id="1571861">hash</span><span class="op" id="1571865">[</span><span class="ident" id="1571866">h</span><span class="op" id="1571867">]</span><span class="op" id="1571868">)</span><span class="op" id="1571869">)</span><span class="op" id="1571870">)</span><span class="op" id="1571871">;</span>&nbsp;<span class="ident" id="1571873">m</span>&nbsp;<span class="op" id="1571875">!=</span>&nbsp;<span class="ident" id="1571878">nil</span><span class="op" id="1571881">;</span>&nbsp;<span class="ident" id="1571883">m</span>&nbsp;<span class="op" id="1571885">=</span>&nbsp;<span class="ident" id="1571887">m</span><span class="op" id="1571888">.</span><span class="ident" id="1571889">link</span>&nbsp;<span class="op" id="1571894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571899">if</span>&nbsp;<span class="ident" id="1571902">m</span><span class="op" id="1571903">.</span><span class="ident" id="1571904">inter</span>&nbsp;<span class="op" id="1571910">==</span>&nbsp;<span class="ident" id="1571913">inter</span>&nbsp;<span class="op" id="1571919">&amp;&amp;</span>&nbsp;<span class="ident" id="1571922">m</span><span class="op" id="1571923">.</span><span class="ident" id="1571924">_type</span>&nbsp;<span class="op" id="1571930">==</span>&nbsp;<span class="ident" id="1571933">typ</span>&nbsp;<span class="op" id="1571937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571943">if</span>&nbsp;<span class="ident" id="1571946">m</span><span class="op" id="1571947">.</span><span class="ident" id="1571948">bad</span>&nbsp;<span class="op" id="1571952">!=</span>&nbsp;<span class="num" id="1571955">0</span>&nbsp;<span class="op" id="1571957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571964">m</span>&nbsp;<span class="op" id="1571966">=</span>&nbsp;<span class="ident" id="1571968">nil</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571977">if</span>&nbsp;<span class="op" id="1571980">!</span><span class="ident" id="1571981">canfail</span>&nbsp;<span class="op" id="1571989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1571997">//&nbsp;this&nbsp;can&nbsp;only&nbsp;happen&nbsp;if&nbsp;the&nbsp;conversion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1572045">//&nbsp;was&nbsp;already&nbsp;done&nbsp;once&nbsp;using&nbsp;the&nbsp;,&nbsp;ok&nbsp;form</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1572096">//&nbsp;and&nbsp;we&nbsp;have&nbsp;a&nbsp;cached&nbsp;negative&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1572143">//&nbsp;the&nbsp;cached&nbsp;result&nbsp;doesn&#39;t&nbsp;record&nbsp;which</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1572191">//&nbsp;interface&nbsp;function&nbsp;was&nbsp;missing,&nbsp;so&nbsp;jump</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1572240">//&nbsp;down&nbsp;to&nbsp;the&nbsp;interface&nbsp;check,&nbsp;which&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1572289">//&nbsp;do&nbsp;more&nbsp;work&nbsp;but&nbsp;give&nbsp;a&nbsp;better&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1572336">goto</span>&nbsp;<span class="ident" id="1572341">search</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1572353">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1572359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1572365">if</span>&nbsp;<span class="ident" id="1572368">locked</span>&nbsp;<span class="op" id="1572375">!=</span>&nbsp;<span class="num" id="1572378">0</span>&nbsp;<span class="op" id="1572380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572387">unlock</span><span class="op" id="1572393">(</span><span class="op" id="1572394">&amp;</span><span class="ident" id="1572395">ifaceLock</span><span class="op" id="1572404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1572410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1572416">return</span>&nbsp;<span class="ident" id="1572423">m</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1572428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1572432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1572435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572439">m</span>&nbsp;<span class="op" id="1572441">=</span>&nbsp;<span class="op" id="1572443">(</span><span class="op" id="1572444">*</span><span class="ident" id="1572445">itab</span><span class="op" id="1572449">)</span><span class="op" id="1572450">(</span><span class="ident" id="1572451">persistentalloc</span><span class="op" id="1572466">(</span><span class="ident" id="1572467">unsafe</span><span class="op" id="1572473">.</span><span class="ident" id="1572474">Sizeof</span><span class="op" id="1572480">(</span><span class="ident" id="1572481">itab</span><span class="op" id="1572485">{</span><span class="op" id="1572486">}</span><span class="op" id="1572487">)</span><span class="op" id="1572488">+</span><span class="builtintype" id="1572489">uintptr</span><span class="op" id="1572496">(</span><span class="builtinfunc" id="1572497">len</span><span class="op" id="1572500">(</span><span class="ident" id="1572501">inter</span><span class="op" id="1572506">.</span><span class="ident" id="1572507">mhdr</span><span class="op" id="1572511">)</span><span class="op" id="1572512">)</span><span class="op" id="1572513">*</span><span class="ident" id="1572514">ptrSize</span><span class="op" id="1572521">,</span>&nbsp;<span class="num" id="1572523">0</span><span class="op" id="1572524">,</span>&nbsp;<span class="op" id="1572526">&amp;</span><span class="ident" id="1572527">memstats</span><span class="op" id="1572535">.</span><span class="ident" id="1572536">other_sys</span><span class="op" id="1572545">)</span><span class="op" id="1572546">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572549">m</span><span class="op" id="1572550">.</span><span class="ident" id="1572551">inter</span>&nbsp;<span class="op" id="1572557">=</span>&nbsp;<span class="ident" id="1572559">inter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572566">m</span><span class="op" id="1572567">.</span><span class="ident" id="1572568">_type</span>&nbsp;<span class="op" id="1572574">=</span>&nbsp;<span class="ident" id="1572576">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="1572581">search</span><span class="op" id="1572587">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1572590">//&nbsp;both&nbsp;inter&nbsp;and&nbsp;typ&nbsp;have&nbsp;method&nbsp;sorted&nbsp;by&nbsp;name,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1572641">//&nbsp;and&nbsp;interface&nbsp;names&nbsp;are&nbsp;unique,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1572677">//&nbsp;so&nbsp;can&nbsp;iterate&nbsp;over&nbsp;both&nbsp;in&nbsp;lock&nbsp;step;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1572720">//&nbsp;the&nbsp;loop&nbsp;is&nbsp;O(ni+nt)&nbsp;not&nbsp;O(ni*nt).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572759">ni</span>&nbsp;<span class="op" id="1572762">:=</span>&nbsp;<span class="builtinfunc" id="1572765">len</span><span class="op" id="1572768">(</span><span class="ident" id="1572769">inter</span><span class="op" id="1572774">.</span><span class="ident" id="1572775">mhdr</span><span class="op" id="1572779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572782">nt</span>&nbsp;<span class="op" id="1572785">:=</span>&nbsp;<span class="builtinfunc" id="1572788">len</span><span class="op" id="1572791">(</span><span class="ident" id="1572792">x</span><span class="op" id="1572793">.</span><span class="ident" id="1572794">mhdr</span><span class="op" id="1572798">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572801">j</span>&nbsp;<span class="op" id="1572803">:=</span>&nbsp;<span class="num" id="1572806">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1572809">for</span>&nbsp;<span class="ident" id="1572813">k</span>&nbsp;<span class="op" id="1572815">:=</span>&nbsp;<span class="num" id="1572818">0</span><span class="op" id="1572819">;</span>&nbsp;<span class="ident" id="1572821">k</span>&nbsp;<span class="op" id="1572823">&lt;</span>&nbsp;<span class="ident" id="1572825">ni</span><span class="op" id="1572827">;</span>&nbsp;<span class="ident" id="1572829">k</span><span class="op" id="1572830">++</span>&nbsp;<span class="op" id="1572833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572837">i</span>&nbsp;<span class="op" id="1572839">:=</span>&nbsp;<span class="op" id="1572842">(</span><span class="op" id="1572843">*</span><span class="ident" id="1572844">imethod</span><span class="op" id="1572851">)</span><span class="op" id="1572852">(</span><span class="ident" id="1572853">add</span><span class="op" id="1572856">(</span><span class="ident" id="1572857">unsafe</span><span class="op" id="1572863">.</span><span class="ident" id="1572864">Pointer</span><span class="op" id="1572871">(</span><span class="ident" id="1572872">inter</span><span class="op" id="1572877">)</span><span class="op" id="1572878">,</span>&nbsp;<span class="ident" id="1572880">unsafe</span><span class="op" id="1572886">.</span><span class="ident" id="1572887">Sizeof</span><span class="op" id="1572893">(</span><span class="ident" id="1572894">interfacetype</span><span class="op" id="1572907">{</span><span class="op" id="1572908">}</span><span class="op" id="1572909">)</span><span class="op" id="1572910">+</span><span class="builtintype" id="1572911">uintptr</span><span class="op" id="1572918">(</span><span class="ident" id="1572919">k</span><span class="op" id="1572920">)</span><span class="op" id="1572921">*</span><span class="ident" id="1572922">unsafe</span><span class="op" id="1572928">.</span><span class="ident" id="1572929">Sizeof</span><span class="op" id="1572935">(</span><span class="ident" id="1572936">imethod</span><span class="op" id="1572943">{</span><span class="op" id="1572944">}</span><span class="op" id="1572945">)</span><span class="op" id="1572946">)</span><span class="op" id="1572947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572951">iname</span>&nbsp;<span class="op" id="1572957">:=</span>&nbsp;<span class="ident" id="1572960">i</span><span class="op" id="1572961">.</span><span class="ident" id="1572962">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572969">ipkgpath</span>&nbsp;<span class="op" id="1572978">:=</span>&nbsp;<span class="ident" id="1572981">i</span><span class="op" id="1572982">.</span><span class="ident" id="1572983">pkgpath</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572993">itype</span>&nbsp;<span class="op" id="1572999">:=</span>&nbsp;<span class="ident" id="1573002">i</span><span class="op" id="1573003">.</span><span class="ident" id="1573004">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573012">for</span>&nbsp;<span class="op" id="1573016">;</span>&nbsp;<span class="ident" id="1573018">j</span>&nbsp;<span class="op" id="1573020">&lt;</span>&nbsp;<span class="ident" id="1573022">nt</span><span class="op" id="1573024">;</span>&nbsp;<span class="ident" id="1573026">j</span><span class="op" id="1573027">++</span>&nbsp;<span class="op" id="1573030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573035">t</span>&nbsp;<span class="op" id="1573037">:=</span>&nbsp;<span class="op" id="1573040">(</span><span class="op" id="1573041">*</span><span class="ident" id="1573042">method</span><span class="op" id="1573048">)</span><span class="op" id="1573049">(</span><span class="ident" id="1573050">add</span><span class="op" id="1573053">(</span><span class="ident" id="1573054">unsafe</span><span class="op" id="1573060">.</span><span class="ident" id="1573061">Pointer</span><span class="op" id="1573068">(</span><span class="ident" id="1573069">x</span><span class="op" id="1573070">)</span><span class="op" id="1573071">,</span>&nbsp;<span class="ident" id="1573073">unsafe</span><span class="op" id="1573079">.</span><span class="ident" id="1573080">Sizeof</span><span class="op" id="1573086">(</span><span class="ident" id="1573087">uncommontype</span><span class="op" id="1573099">{</span><span class="op" id="1573100">}</span><span class="op" id="1573101">)</span><span class="op" id="1573102">+</span><span class="builtintype" id="1573103">uintptr</span><span class="op" id="1573110">(</span><span class="ident" id="1573111">j</span><span class="op" id="1573112">)</span><span class="op" id="1573113">*</span><span class="ident" id="1573114">unsafe</span><span class="op" id="1573120">.</span><span class="ident" id="1573121">Sizeof</span><span class="op" id="1573127">(</span><span class="ident" id="1573128">method</span><span class="op" id="1573134">{</span><span class="op" id="1573135">}</span><span class="op" id="1573136">)</span><span class="op" id="1573137">)</span><span class="op" id="1573138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573143">if</span>&nbsp;<span class="ident" id="1573146">t</span><span class="op" id="1573147">.</span><span class="ident" id="1573148">mtyp</span>&nbsp;<span class="op" id="1573153">==</span>&nbsp;<span class="ident" id="1573156">itype</span>&nbsp;<span class="op" id="1573162">&amp;&amp;</span>&nbsp;<span class="ident" id="1573165">t</span><span class="op" id="1573166">.</span><span class="ident" id="1573167">name</span>&nbsp;<span class="op" id="1573172">==</span>&nbsp;<span class="ident" id="1573175">iname</span>&nbsp;<span class="op" id="1573181">&amp;&amp;</span>&nbsp;<span class="ident" id="1573184">t</span><span class="op" id="1573185">.</span><span class="ident" id="1573186">pkgpath</span>&nbsp;<span class="op" id="1573194">==</span>&nbsp;<span class="ident" id="1573197">ipkgpath</span>&nbsp;<span class="op" id="1573206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573212">if</span>&nbsp;<span class="ident" id="1573215">m</span>&nbsp;<span class="op" id="1573217">!=</span>&nbsp;<span class="ident" id="1573220">nil</span>&nbsp;<span class="op" id="1573224">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573231">*</span><span class="op" id="1573232">(</span><span class="op" id="1573233">*</span><span class="ident" id="1573234">unsafe</span><span class="op" id="1573240">.</span><span class="ident" id="1573241">Pointer</span><span class="op" id="1573248">)</span><span class="op" id="1573249">(</span><span class="ident" id="1573250">add</span><span class="op" id="1573253">(</span><span class="ident" id="1573254">unsafe</span><span class="op" id="1573260">.</span><span class="ident" id="1573261">Pointer</span><span class="op" id="1573268">(</span><span class="ident" id="1573269">m</span><span class="op" id="1573270">)</span><span class="op" id="1573271">,</span>&nbsp;<span class="ident" id="1573273">unsafe</span><span class="op" id="1573279">.</span><span class="ident" id="1573280">Sizeof</span><span class="op" id="1573286">(</span><span class="ident" id="1573287">itab</span><span class="op" id="1573291">{</span><span class="op" id="1573292">}</span><span class="op" id="1573293">)</span><span class="op" id="1573294">+</span><span class="builtintype" id="1573295">uintptr</span><span class="op" id="1573302">(</span><span class="ident" id="1573303">k</span><span class="op" id="1573304">)</span><span class="op" id="1573305">*</span><span class="ident" id="1573306">ptrSize</span><span class="op" id="1573313">)</span><span class="op" id="1573314">)</span>&nbsp;<span class="op" id="1573316">=</span>&nbsp;<span class="ident" id="1573318">t</span><span class="op" id="1573319">.</span><span class="ident" id="1573320">ifn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573334">goto</span>&nbsp;<span class="ident" id="1573339">nextimethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573358">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1573362">//&nbsp;didn&#39;t&nbsp;find&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573386">if</span>&nbsp;<span class="op" id="1573389">!</span><span class="ident" id="1573390">canfail</span>&nbsp;<span class="op" id="1573398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573403">if</span>&nbsp;<span class="ident" id="1573406">locked</span>&nbsp;<span class="op" id="1573413">!=</span>&nbsp;<span class="num" id="1573416">0</span>&nbsp;<span class="op" id="1573418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573424">unlock</span><span class="op" id="1573430">(</span><span class="op" id="1573431">&amp;</span><span class="ident" id="1573432">ifaceLock</span><span class="op" id="1573441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573446">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1573451">panic</span><span class="op" id="1573456">(</span><span class="op" id="1573457">&amp;</span><span class="ident" id="1573458">TypeAssertionError</span><span class="op" id="1573476">{</span><span class="string" id="1573477">&#34;&#34;</span><span class="op" id="1573479">,</span>&nbsp;<span class="op" id="1573481">*</span><span class="ident" id="1573482">typ</span><span class="op" id="1573485">.</span><span class="ident" id="1573486">_string</span><span class="op" id="1573493">,</span>&nbsp;<span class="op" id="1573495">*</span><span class="ident" id="1573496">inter</span><span class="op" id="1573501">.</span><span class="ident" id="1573502">typ</span><span class="op" id="1573505">.</span><span class="ident" id="1573506">_string</span><span class="op" id="1573513">,</span>&nbsp;<span class="op" id="1573515">*</span><span class="ident" id="1573516">iname</span><span class="op" id="1573521">}</span><span class="op" id="1573522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573530">m</span><span class="op" id="1573531">.</span><span class="ident" id="1573532">bad</span>&nbsp;<span class="op" id="1573536">=</span>&nbsp;<span class="num" id="1573538">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573542">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573549">nextimethod</span><span class="op" id="1573560">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573566">if</span>&nbsp;<span class="ident" id="1573569">locked</span>&nbsp;<span class="op" id="1573576">==</span>&nbsp;<span class="num" id="1573579">0</span>&nbsp;<span class="op" id="1573581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573585">gothrow</span><span class="op" id="1573592">(</span><span class="string" id="1573593">&#34;invalid&nbsp;itab&nbsp;locking&#34;</span><span class="op" id="1573615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573621">m</span><span class="op" id="1573622">.</span><span class="ident" id="1573623">link</span>&nbsp;<span class="op" id="1573628">=</span>&nbsp;<span class="ident" id="1573630">hash</span><span class="op" id="1573634">[</span><span class="ident" id="1573635">h</span><span class="op" id="1573636">]</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573639">atomicstorep</span><span class="op" id="1573651">(</span><span class="ident" id="1573652">unsafe</span><span class="op" id="1573658">.</span><span class="ident" id="1573659">Pointer</span><span class="op" id="1573666">(</span><span class="op" id="1573667">&amp;</span><span class="ident" id="1573668">hash</span><span class="op" id="1573672">[</span><span class="ident" id="1573673">h</span><span class="op" id="1573674">]</span><span class="op" id="1573675">)</span><span class="op" id="1573676">,</span>&nbsp;<span class="ident" id="1573678">unsafe</span><span class="op" id="1573684">.</span><span class="ident" id="1573685">Pointer</span><span class="op" id="1573692">(</span><span class="ident" id="1573693">m</span><span class="op" id="1573694">)</span><span class="op" id="1573695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573698">unlock</span><span class="op" id="1573704">(</span><span class="op" id="1573705">&amp;</span><span class="ident" id="1573706">ifaceLock</span><span class="op" id="1573715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573718">if</span>&nbsp;<span class="ident" id="1573721">m</span><span class="op" id="1573722">.</span><span class="ident" id="1573723">bad</span>&nbsp;<span class="op" id="1573727">!=</span>&nbsp;<span class="num" id="1573730">0</span>&nbsp;<span class="op" id="1573732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573736">return</span>&nbsp;<span class="ident" id="1573743">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573748">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573751">return</span>&nbsp;<span class="ident" id="1573758">m</span><br>
<span class="lineno"></span><span class="op" id="1573760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1573763">func</span>&nbsp;<span class="ident" id="1573768">typ2Itab</span><span class="op" id="1573776">(</span><span class="ident" id="1573777">t</span>&nbsp;<span class="op" id="1573779">*</span><span class="ident" id="1573780">_type</span><span class="op" id="1573785">,</span>&nbsp;<span class="ident" id="1573787">inter</span>&nbsp;<span class="op" id="1573793">*</span><span class="ident" id="1573794">interfacetype</span><span class="op" id="1573807">,</span>&nbsp;<span class="ident" id="1573809">cache</span>&nbsp;<span class="op" id="1573815">*</span><span class="op" id="1573816">*</span><span class="ident" id="1573817">itab</span><span class="op" id="1573821">)</span>&nbsp;<span class="op" id="1573823">*</span><span class="ident" id="1573824">itab</span>&nbsp;<span class="op" id="1573829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573832">tab</span>&nbsp;<span class="op" id="1573836">:=</span>&nbsp;<span class="ident" id="1573839">getitab</span><span class="op" id="1573846">(</span><span class="ident" id="1573847">inter</span><span class="op" id="1573852">,</span>&nbsp;<span class="ident" id="1573854">t</span><span class="op" id="1573855">,</span>&nbsp;<span class="builtintype" id="1573857">false</span><span class="op" id="1573862">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573865">atomicstorep</span><span class="op" id="1573877">(</span><span class="ident" id="1573878">unsafe</span><span class="op" id="1573884">.</span><span class="ident" id="1573885">Pointer</span><span class="op" id="1573892">(</span><span class="ident" id="1573893">cache</span><span class="op" id="1573898">)</span><span class="op" id="1573899">,</span>&nbsp;<span class="ident" id="1573901">unsafe</span><span class="op" id="1573907">.</span><span class="ident" id="1573908">Pointer</span><span class="op" id="1573915">(</span><span class="ident" id="1573916">tab</span><span class="op" id="1573919">)</span><span class="op" id="1573920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573923">return</span>&nbsp;<span class="ident" id="1573930">tab</span><br>
<span class="lineno"></span><span class="op" id="1573934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1573937">func</span>&nbsp;<span class="ident" id="1573942">convT2E</span><span class="op" id="1573949">(</span><span class="ident" id="1573950">t</span>&nbsp;<span class="op" id="1573952">*</span><span class="ident" id="1573953">_type</span><span class="op" id="1573958">,</span>&nbsp;<span class="ident" id="1573960">elem</span>&nbsp;<span class="ident" id="1573965">unsafe</span><span class="op" id="1573971">.</span><span class="ident" id="1573972">Pointer</span><span class="op" id="1573979">)</span>&nbsp;<span class="op" id="1573981">(</span><span class="ident" id="1573982">e</span>&nbsp;<span class="keyword" id="1573984">interface</span><span class="op" id="1573993">{</span><span class="op" id="1573994">}</span><span class="op" id="1573995">)</span>&nbsp;<span class="op" id="1573997">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574000">size</span>&nbsp;<span class="op" id="1574005">:=</span>&nbsp;<span class="builtintype" id="1574008">uintptr</span><span class="op" id="1574015">(</span><span class="ident" id="1574016">t</span><span class="op" id="1574017">.</span><span class="ident" id="1574018">size</span><span class="op" id="1574022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574025">ep</span>&nbsp;<span class="op" id="1574028">:=</span>&nbsp;<span class="op" id="1574031">(</span><span class="op" id="1574032">*</span><span class="ident" id="1574033">eface</span><span class="op" id="1574038">)</span><span class="op" id="1574039">(</span><span class="ident" id="1574040">unsafe</span><span class="op" id="1574046">.</span><span class="ident" id="1574047">Pointer</span><span class="op" id="1574054">(</span><span class="op" id="1574055">&amp;</span><span class="ident" id="1574056">e</span><span class="op" id="1574057">)</span><span class="op" id="1574058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1574061">if</span>&nbsp;<span class="ident" id="1574064">isDirectIface</span><span class="op" id="1574077">(</span><span class="ident" id="1574078">t</span><span class="op" id="1574079">)</span>&nbsp;<span class="op" id="1574081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574085">ep</span><span class="op" id="1574087">.</span><span class="ident" id="1574088">_type</span>&nbsp;<span class="op" id="1574094">=</span>&nbsp;<span class="ident" id="1574096">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574100">memmove</span><span class="op" id="1574107">(</span><span class="ident" id="1574108">unsafe</span><span class="op" id="1574114">.</span><span class="ident" id="1574115">Pointer</span><span class="op" id="1574122">(</span><span class="op" id="1574123">&amp;</span><span class="ident" id="1574124">ep</span><span class="op" id="1574126">.</span><span class="ident" id="1574127">data</span><span class="op" id="1574131">)</span><span class="op" id="1574132">,</span>&nbsp;<span class="ident" id="1574134">elem</span><span class="op" id="1574138">,</span>&nbsp;<span class="ident" id="1574140">size</span><span class="op" id="1574144">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1574147">}</span>&nbsp;<span class="keyword" id="1574149">else</span>&nbsp;<span class="op" id="1574154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574158">x</span>&nbsp;<span class="op" id="1574160">:=</span>&nbsp;<span class="ident" id="1574163">newobject</span><span class="op" id="1574172">(</span><span class="ident" id="1574173">t</span><span class="op" id="1574174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1574178">//&nbsp;TODO:&nbsp;We&nbsp;allocate&nbsp;a&nbsp;zeroed&nbsp;object&nbsp;only&nbsp;to&nbsp;overwrite&nbsp;it&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1574243">//&nbsp;actual&nbsp;data.&nbsp;&nbsp;Figure&nbsp;out&nbsp;how&nbsp;to&nbsp;avoid&nbsp;zeroing.&nbsp;&nbsp;Also&nbsp;below&nbsp;in&nbsp;convT2I.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574319">memmove</span><span class="op" id="1574326">(</span><span class="ident" id="1574327">x</span><span class="op" id="1574328">,</span>&nbsp;<span class="ident" id="1574330">elem</span><span class="op" id="1574334">,</span>&nbsp;<span class="ident" id="1574336">size</span><span class="op" id="1574340">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574344">ep</span><span class="op" id="1574346">.</span><span class="ident" id="1574347">_type</span>&nbsp;<span class="op" id="1574353">=</span>&nbsp;<span class="ident" id="1574355">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574359">ep</span><span class="op" id="1574361">.</span><span class="ident" id="1574362">data</span>&nbsp;<span class="op" id="1574367">=</span>&nbsp;<span class="ident" id="1574369">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1574372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1574375">return</span><br>
<span class="lineno"></span><span class="op" id="1574382">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="1574385">func</span>&nbsp;<span class="ident" id="1574390">convT2I</span><span class="op" id="1574397">(</span><span class="ident" id="1574398">t</span>&nbsp;<span class="op" id="1574400">*</span><span class="ident" id="1574401">_type</span><span class="op" id="1574406">,</span>&nbsp;<span class="ident" id="1574408">inter</span>&nbsp;<span class="op" id="1574414">*</span><span class="ident" id="1574415">interfacetype</span><span class="op" id="1574428">,</span>&nbsp;<span class="ident" id="1574430">cache</span>&nbsp;<span class="op" id="1574436">*</span><span class="op" id="1574437">*</span><span class="ident" id="1574438">itab</span><span class="op" id="1574442">,</span>&nbsp;<span class="ident" id="1574444">elem</span>&nbsp;<span class="ident" id="1574449">unsafe</span><span class="op" id="1574455">.</span><span class="ident" id="1574456">Pointer</span><span class="op" id="1574463">)</span>&nbsp;<span class="op" id="1574465">(</span><span class="ident" id="1574466">i</span>&nbsp;<span class="ident" id="1574468">fInterface</span><span class="op" id="1574478">)</span>&nbsp;<span class="op" id="1574480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574483">tab</span>&nbsp;<span class="op" id="1574487">:=</span>&nbsp;<span class="op" id="1574490">(</span><span class="op" id="1574491">*</span><span class="ident" id="1574492">itab</span><span class="op" id="1574496">)</span><span class="op" id="1574497">(</span><span class="ident" id="1574498">atomicloadp</span><span class="op" id="1574509">(</span><span class="ident" id="1574510">unsafe</span><span class="op" id="1574516">.</span><span class="ident" id="1574517">Pointer</span><span class="op" id="1574524">(</span><span class="ident" id="1574525">cache</span><span class="op" id="1574530">)</span><span class="op" id="1574531">)</span><span class="op" id="1574532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1574535">if</span>&nbsp;<span class="ident" id="1574538">tab</span>&nbsp;<span class="op" id="1574542">==</span>&nbsp;<span class="ident" id="1574545">nil</span>&nbsp;<span class="op" id="1574549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574553">tab</span>&nbsp;<span class="op" id="1574557">=</span>&nbsp;<span class="ident" id="1574559">getitab</span><span class="op" id="1574566">(</span><span class="ident" id="1574567">inter</span><span class="op" id="1574572">,</span>&nbsp;<span class="ident" id="1574574">t</span><span class="op" id="1574575">,</span>&nbsp;<span class="builtintype" id="1574577">false</span><span class="op" id="1574582">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574586">atomicstorep</span><span class="op" id="1574598">(</span><span class="ident" id="1574599">unsafe</span><span class="op" id="1574605">.</span><span class="ident" id="1574606">Pointer</span><span class="op" id="1574613">(</span><span class="ident" id="1574614">cache</span><span class="op" id="1574619">)</span><span class="op" id="1574620">,</span>&nbsp;<span class="ident" id="1574622">unsafe</span><span class="op" id="1574628">.</span><span class="ident" id="1574629">Pointer</span><span class="op" id="1574636">(</span><span class="ident" id="1574637">tab</span><span class="op" id="1574640">)</span><span class="op" id="1574641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1574644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574647">size</span>&nbsp;<span class="op" id="1574652">:=</span>&nbsp;<span class="builtintype" id="1574655">uintptr</span><span class="op" id="1574662">(</span><span class="ident" id="1574663">t</span><span class="op" id="1574664">.</span><span class="ident" id="1574665">size</span><span class="op" id="1574669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574672">pi</span>&nbsp;<span class="op" id="1574675">:=</span>&nbsp;<span class="op" id="1574678">(</span><span class="op" id="1574679">*</span><span class="ident" id="1574680">iface</span><span class="op" id="1574685">)</span><span class="op" id="1574686">(</span><span class="ident" id="1574687">unsafe</span><span class="op" id="1574693">.</span><span class="ident" id="1574694">Pointer</span><span class="op" id="1574701">(</span><span class="op" id="1574702">&amp;</span><span class="ident" id="1574703">i</span><span class="op" id="1574704">)</span><span class="op" id="1574705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1574708">if</span>&nbsp;<span class="ident" id="1574711">isDirectIface</span><span class="op" id="1574724">(</span><span class="ident" id="1574725">t</span><span class="op" id="1574726">)</span>&nbsp;<span class="op" id="1574728">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574732">pi</span><span class="op" id="1574734">.</span><span class="ident" id="1574735">tab</span>&nbsp;<span class="op" id="1574739">=</span>&nbsp;<span class="ident" id="1574741">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574747">memmove</span><span class="op" id="1574754">(</span><span class="ident" id="1574755">unsafe</span><span class="op" id="1574761">.</span><span class="ident" id="1574762">Pointer</span><span class="op" id="1574769">(</span><span class="op" id="1574770">&amp;</span><span class="ident" id="1574771">pi</span><span class="op" id="1574773">.</span><span class="ident" id="1574774">data</span><span class="op" id="1574778">)</span><span class="op" id="1574779">,</span>&nbsp;<span class="ident" id="1574781">elem</span><span class="op" id="1574785">,</span>&nbsp;<span class="ident" id="1574787">size</span><span class="op" id="1574791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1574794">}</span>&nbsp;<span class="keyword" id="1574796">else</span>&nbsp;<span class="op" id="1574801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574805">x</span>&nbsp;<span class="op" id="1574807">:=</span>&nbsp;<span class="ident" id="1574810">newobject</span><span class="op" id="1574819">(</span><span class="ident" id="1574820">t</span><span class="op" id="1574821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574825">memmove</span><span class="op" id="1574832">(</span><span class="ident" id="1574833">x</span><span class="op" id="1574834">,</span>&nbsp;<span class="ident" id="1574836">elem</span><span class="op" id="1574840">,</span>&nbsp;<span class="ident" id="1574842">size</span><span class="op" id="1574846">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574850">pi</span><span class="op" id="1574852">.</span><span class="ident" id="1574853">tab</span>&nbsp;<span class="op" id="1574857">=</span>&nbsp;<span class="ident" id="1574859">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574865">pi</span><span class="op" id="1574867">.</span><span class="ident" id="1574868">data</span>&nbsp;<span class="op" id="1574873">=</span>&nbsp;<span class="ident" id="1574875">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1574878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1574881">return</span><br>
<span class="lineno"></span><span class="op" id="1574888">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="comment" id="1574891">//&nbsp;TODO:&nbsp;give&nbsp;these&nbsp;routines&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;result&nbsp;area&nbsp;instead&nbsp;of&nbsp;writing</span><br>
<span class="lineno"></span><span class="comment" id="1574968">//&nbsp;extra&nbsp;data&nbsp;in&nbsp;the&nbsp;outargs&nbsp;section.&nbsp;&nbsp;Then&nbsp;we&nbsp;can&nbsp;get&nbsp;rid&nbsp;of&nbsp;go:nosplit.</span><br>
<span class="lineno"></span><span class="comment" id="1575042">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1575055">func</span>&nbsp;<span class="ident" id="1575060">assertI2T</span><span class="op" id="1575069">(</span><span class="ident" id="1575070">t</span>&nbsp;<span class="op" id="1575072">*</span><span class="ident" id="1575073">_type</span><span class="op" id="1575078">,</span>&nbsp;<span class="ident" id="1575080">i</span>&nbsp;<span class="ident" id="1575082">fInterface</span><span class="op" id="1575092">)</span>&nbsp;<span class="op" id="1575094">(</span><span class="ident" id="1575095">r</span>&nbsp;<span class="keyword" id="1575097">struct</span><span class="op" id="1575103">{</span><span class="op" id="1575104">}</span><span class="op" id="1575105">)</span>&nbsp;<span class="op" id="1575107">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575110">ip</span>&nbsp;<span class="op" id="1575113">:=</span>&nbsp;<span class="op" id="1575116">(</span><span class="op" id="1575117">*</span><span class="ident" id="1575118">iface</span><span class="op" id="1575123">)</span><span class="op" id="1575124">(</span><span class="ident" id="1575125">unsafe</span><span class="op" id="1575131">.</span><span class="ident" id="1575132">Pointer</span><span class="op" id="1575139">(</span><span class="op" id="1575140">&amp;</span><span class="ident" id="1575141">i</span><span class="op" id="1575142">)</span><span class="op" id="1575143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575146">tab</span>&nbsp;<span class="op" id="1575150">:=</span>&nbsp;<span class="ident" id="1575153">ip</span><span class="op" id="1575155">.</span><span class="ident" id="1575156">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1575161">if</span>&nbsp;<span class="ident" id="1575164">tab</span>&nbsp;<span class="op" id="1575168">==</span>&nbsp;<span class="ident" id="1575171">nil</span>&nbsp;<span class="op" id="1575175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1575179">panic</span><span class="op" id="1575184">(</span><span class="op" id="1575185">&amp;</span><span class="ident" id="1575186">TypeAssertionError</span><span class="op" id="1575204">{</span><span class="string" id="1575205">&#34;&#34;</span><span class="op" id="1575207">,</span>&nbsp;<span class="string" id="1575209">&#34;&#34;</span><span class="op" id="1575211">,</span>&nbsp;<span class="op" id="1575213">*</span><span class="ident" id="1575214">t</span><span class="op" id="1575215">.</span><span class="ident" id="1575216">_string</span><span class="op" id="1575223">,</span>&nbsp;<span class="string" id="1575225">&#34;&#34;</span><span class="op" id="1575227">}</span><span class="op" id="1575228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1575231">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1575234">if</span>&nbsp;<span class="ident" id="1575237">tab</span><span class="op" id="1575240">.</span><span class="ident" id="1575241">_type</span>&nbsp;<span class="op" id="1575247">!=</span>&nbsp;<span class="ident" id="1575250">t</span>&nbsp;<span class="op" id="1575252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1575256">panic</span><span class="op" id="1575261">(</span><span class="op" id="1575262">&amp;</span><span class="ident" id="1575263">TypeAssertionError</span><span class="op" id="1575281">{</span><span class="op" id="1575282">*</span><span class="ident" id="1575283">tab</span><span class="op" id="1575286">.</span><span class="ident" id="1575287">inter</span><span class="op" id="1575292">.</span><span class="ident" id="1575293">typ</span><span class="op" id="1575296">.</span><span class="ident" id="1575297">_string</span><span class="op" id="1575304">,</span>&nbsp;<span class="op" id="1575306">*</span><span class="ident" id="1575307">tab</span><span class="op" id="1575310">.</span><span class="ident" id="1575311">_type</span><span class="op" id="1575316">.</span><span class="ident" id="1575317">_string</span><span class="op" id="1575324">,</span>&nbsp;<span class="op" id="1575326">*</span><span class="ident" id="1575327">t</span><span class="op" id="1575328">.</span><span class="ident" id="1575329">_string</span><span class="op" id="1575336">,</span>&nbsp;<span class="string" id="1575338">&#34;&#34;</span><span class="op" id="1575340">}</span><span class="op" id="1575341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1575344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575347">size</span>&nbsp;<span class="op" id="1575352">:=</span>&nbsp;<span class="builtintype" id="1575355">uintptr</span><span class="op" id="1575362">(</span><span class="ident" id="1575363">t</span><span class="op" id="1575364">.</span><span class="ident" id="1575365">size</span><span class="op" id="1575369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1575372">if</span>&nbsp;<span class="ident" id="1575375">isDirectIface</span><span class="op" id="1575388">(</span><span class="ident" id="1575389">t</span><span class="op" id="1575390">)</span>&nbsp;<span class="op" id="1575392">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575396">memmove</span><span class="op" id="1575403">(</span><span class="ident" id="1575404">unsafe</span><span class="op" id="1575410">.</span><span class="ident" id="1575411">Pointer</span><span class="op" id="1575418">(</span><span class="op" id="1575419">&amp;</span><span class="ident" id="1575420">r</span><span class="op" id="1575421">)</span><span class="op" id="1575422">,</span>&nbsp;<span class="ident" id="1575424">unsafe</span><span class="op" id="1575430">.</span><span class="ident" id="1575431">Pointer</span><span class="op" id="1575438">(</span><span class="op" id="1575439">&amp;</span><span class="ident" id="1575440">ip</span><span class="op" id="1575442">.</span><span class="ident" id="1575443">data</span><span class="op" id="1575447">)</span><span class="op" id="1575448">,</span>&nbsp;<span class="ident" id="1575450">size</span><span class="op" id="1575454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1575457">}</span>&nbsp;<span class="keyword" id="1575459">else</span>&nbsp;<span class="op" id="1575464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575468">memmove</span><span class="op" id="1575475">(</span><span class="ident" id="1575476">unsafe</span><span class="op" id="1575482">.</span><span class="ident" id="1575483">Pointer</span><span class="op" id="1575490">(</span><span class="op" id="1575491">&amp;</span><span class="ident" id="1575492">r</span><span class="op" id="1575493">)</span><span class="op" id="1575494">,</span>&nbsp;<span class="ident" id="1575496">ip</span><span class="op" id="1575498">.</span><span class="ident" id="1575499">data</span><span class="op" id="1575503">,</span>&nbsp;<span class="ident" id="1575505">size</span><span class="op" id="1575509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1575512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1575515">return</span><br>
<span class="lineno">190</span><span class="op" id="1575522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1575525">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1575538">func</span>&nbsp;<span class="ident" id="1575543">assertI2T2</span><span class="op" id="1575553">(</span><span class="ident" id="1575554">t</span>&nbsp;<span class="op" id="1575556">*</span><span class="ident" id="1575557">_type</span><span class="op" id="1575562">,</span>&nbsp;<span class="ident" id="1575564">i</span>&nbsp;<span class="ident" id="1575566">fInterface</span><span class="op" id="1575576">)</span>&nbsp;<span class="op" id="1575578">(</span><span class="ident" id="1575579">r</span>&nbsp;<span class="builtintype" id="1575581">byte</span><span class="op" id="1575585">)</span>&nbsp;<span class="op" id="1575587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575590">ip</span>&nbsp;<span class="op" id="1575593">:=</span>&nbsp;<span class="op" id="1575596">(</span><span class="op" id="1575597">*</span><span class="ident" id="1575598">iface</span><span class="op" id="1575603">)</span><span class="op" id="1575604">(</span><span class="ident" id="1575605">unsafe</span><span class="op" id="1575611">.</span><span class="ident" id="1575612">Pointer</span><span class="op" id="1575619">(</span><span class="op" id="1575620">&amp;</span><span class="ident" id="1575621">i</span><span class="op" id="1575622">)</span><span class="op" id="1575623">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575626">size</span>&nbsp;<span class="op" id="1575631">:=</span>&nbsp;<span class="builtintype" id="1575634">uintptr</span><span class="op" id="1575641">(</span><span class="ident" id="1575642">t</span><span class="op" id="1575643">.</span><span class="ident" id="1575644">size</span><span class="op" id="1575648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575651">ok</span>&nbsp;<span class="op" id="1575654">:=</span>&nbsp;<span class="op" id="1575657">(</span><span class="op" id="1575658">*</span><span class="builtintype" id="1575659">bool</span><span class="op" id="1575663">)</span><span class="op" id="1575664">(</span><span class="ident" id="1575665">add</span><span class="op" id="1575668">(</span><span class="ident" id="1575669">unsafe</span><span class="op" id="1575675">.</span><span class="ident" id="1575676">Pointer</span><span class="op" id="1575683">(</span><span class="op" id="1575684">&amp;</span><span class="ident" id="1575685">r</span><span class="op" id="1575686">)</span><span class="op" id="1575687">,</span>&nbsp;<span class="ident" id="1575689">size</span><span class="op" id="1575693">)</span><span class="op" id="1575694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575697">tab</span>&nbsp;<span class="op" id="1575701">:=</span>&nbsp;<span class="ident" id="1575704">ip</span><span class="op" id="1575706">.</span><span class="ident" id="1575707">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1575712">if</span>&nbsp;<span class="ident" id="1575715">tab</span>&nbsp;<span class="op" id="1575719">==</span>&nbsp;<span class="ident" id="1575722">nil</span>&nbsp;<span class="op" id="1575726">||</span>&nbsp;<span class="ident" id="1575729">tab</span><span class="op" id="1575732">.</span><span class="ident" id="1575733">_type</span>&nbsp;<span class="op" id="1575739">!=</span>&nbsp;<span class="ident" id="1575742">t</span>&nbsp;<span class="op" id="1575744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1575748">*</span><span class="ident" id="1575749">ok</span>&nbsp;<span class="op" id="1575752">=</span>&nbsp;<span class="builtintype" id="1575754">false</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575762">memclr</span><span class="op" id="1575768">(</span><span class="ident" id="1575769">unsafe</span><span class="op" id="1575775">.</span><span class="ident" id="1575776">Pointer</span><span class="op" id="1575783">(</span><span class="op" id="1575784">&amp;</span><span class="ident" id="1575785">r</span><span class="op" id="1575786">)</span><span class="op" id="1575787">,</span>&nbsp;<span class="ident" id="1575789">size</span><span class="op" id="1575793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1575797">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1575805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1575808">*</span><span class="ident" id="1575809">ok</span>&nbsp;<span class="op" id="1575812">=</span>&nbsp;<span class="builtintype" id="1575814">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1575820">if</span>&nbsp;<span class="ident" id="1575823">isDirectIface</span><span class="op" id="1575836">(</span><span class="ident" id="1575837">t</span><span class="op" id="1575838">)</span>&nbsp;<span class="op" id="1575840">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575844">memmove</span><span class="op" id="1575851">(</span><span class="ident" id="1575852">unsafe</span><span class="op" id="1575858">.</span><span class="ident" id="1575859">Pointer</span><span class="op" id="1575866">(</span><span class="op" id="1575867">&amp;</span><span class="ident" id="1575868">r</span><span class="op" id="1575869">)</span><span class="op" id="1575870">,</span>&nbsp;<span class="ident" id="1575872">unsafe</span><span class="op" id="1575878">.</span><span class="ident" id="1575879">Pointer</span><span class="op" id="1575886">(</span><span class="op" id="1575887">&amp;</span><span class="ident" id="1575888">ip</span><span class="op" id="1575890">.</span><span class="ident" id="1575891">data</span><span class="op" id="1575895">)</span><span class="op" id="1575896">,</span>&nbsp;<span class="ident" id="1575898">size</span><span class="op" id="1575902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1575905">}</span>&nbsp;<span class="keyword" id="1575907">else</span>&nbsp;<span class="op" id="1575912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575916">memmove</span><span class="op" id="1575923">(</span><span class="ident" id="1575924">unsafe</span><span class="op" id="1575930">.</span><span class="ident" id="1575931">Pointer</span><span class="op" id="1575938">(</span><span class="op" id="1575939">&amp;</span><span class="ident" id="1575940">r</span><span class="op" id="1575941">)</span><span class="op" id="1575942">,</span>&nbsp;<span class="ident" id="1575944">ip</span><span class="op" id="1575946">.</span><span class="ident" id="1575947">data</span><span class="op" id="1575951">,</span>&nbsp;<span class="ident" id="1575953">size</span><span class="op" id="1575957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1575960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1575963">return</span><br>
<span class="lineno">210</span><span class="op" id="1575970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1575973">func</span>&nbsp;<span class="ident" id="1575978">assertI2TOK</span><span class="op" id="1575989">(</span><span class="ident" id="1575990">t</span>&nbsp;<span class="op" id="1575992">*</span><span class="ident" id="1575993">_type</span><span class="op" id="1575998">,</span>&nbsp;<span class="ident" id="1576000">i</span>&nbsp;<span class="ident" id="1576002">fInterface</span><span class="op" id="1576012">)</span>&nbsp;<span class="builtintype" id="1576014">bool</span>&nbsp;<span class="op" id="1576019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576022">ip</span>&nbsp;<span class="op" id="1576025">:=</span>&nbsp;<span class="op" id="1576028">(</span><span class="op" id="1576029">*</span><span class="ident" id="1576030">iface</span><span class="op" id="1576035">)</span><span class="op" id="1576036">(</span><span class="ident" id="1576037">unsafe</span><span class="op" id="1576043">.</span><span class="ident" id="1576044">Pointer</span><span class="op" id="1576051">(</span><span class="op" id="1576052">&amp;</span><span class="ident" id="1576053">i</span><span class="op" id="1576054">)</span><span class="op" id="1576055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576058">tab</span>&nbsp;<span class="op" id="1576062">:=</span>&nbsp;<span class="ident" id="1576065">ip</span><span class="op" id="1576067">.</span><span class="ident" id="1576068">tab</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1576073">return</span>&nbsp;<span class="ident" id="1576080">tab</span>&nbsp;<span class="op" id="1576084">!=</span>&nbsp;<span class="ident" id="1576087">nil</span>&nbsp;<span class="op" id="1576091">&amp;&amp;</span>&nbsp;<span class="ident" id="1576094">tab</span><span class="op" id="1576097">.</span><span class="ident" id="1576098">_type</span>&nbsp;<span class="op" id="1576104">==</span>&nbsp;<span class="ident" id="1576107">t</span><br>
<span class="lineno"></span><span class="op" id="1576109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1576112">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1576125">func</span>&nbsp;<span class="ident" id="1576130">assertE2T</span><span class="op" id="1576139">(</span><span class="ident" id="1576140">t</span>&nbsp;<span class="op" id="1576142">*</span><span class="ident" id="1576143">_type</span><span class="op" id="1576148">,</span>&nbsp;<span class="ident" id="1576150">e</span>&nbsp;<span class="keyword" id="1576152">interface</span><span class="op" id="1576161">{</span><span class="op" id="1576162">}</span><span class="op" id="1576163">)</span>&nbsp;<span class="op" id="1576165">(</span><span class="ident" id="1576166">r</span>&nbsp;<span class="keyword" id="1576168">struct</span><span class="op" id="1576174">{</span><span class="op" id="1576175">}</span><span class="op" id="1576176">)</span>&nbsp;<span class="op" id="1576178">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576181">ep</span>&nbsp;<span class="op" id="1576184">:=</span>&nbsp;<span class="op" id="1576187">(</span><span class="op" id="1576188">*</span><span class="ident" id="1576189">eface</span><span class="op" id="1576194">)</span><span class="op" id="1576195">(</span><span class="ident" id="1576196">unsafe</span><span class="op" id="1576202">.</span><span class="ident" id="1576203">Pointer</span><span class="op" id="1576210">(</span><span class="op" id="1576211">&amp;</span><span class="ident" id="1576212">e</span><span class="op" id="1576213">)</span><span class="op" id="1576214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1576217">if</span>&nbsp;<span class="ident" id="1576220">ep</span><span class="op" id="1576222">.</span><span class="ident" id="1576223">_type</span>&nbsp;<span class="op" id="1576229">==</span>&nbsp;<span class="ident" id="1576232">nil</span>&nbsp;<span class="op" id="1576236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1576240">panic</span><span class="op" id="1576245">(</span><span class="op" id="1576246">&amp;</span><span class="ident" id="1576247">TypeAssertionError</span><span class="op" id="1576265">{</span><span class="string" id="1576266">&#34;&#34;</span><span class="op" id="1576268">,</span>&nbsp;<span class="string" id="1576270">&#34;&#34;</span><span class="op" id="1576272">,</span>&nbsp;<span class="op" id="1576274">*</span><span class="ident" id="1576275">t</span><span class="op" id="1576276">.</span><span class="ident" id="1576277">_string</span><span class="op" id="1576284">,</span>&nbsp;<span class="string" id="1576286">&#34;&#34;</span><span class="op" id="1576288">}</span><span class="op" id="1576289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1576292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1576295">if</span>&nbsp;<span class="ident" id="1576298">ep</span><span class="op" id="1576300">.</span><span class="ident" id="1576301">_type</span>&nbsp;<span class="op" id="1576307">!=</span>&nbsp;<span class="ident" id="1576310">t</span>&nbsp;<span class="op" id="1576312">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1576316">panic</span><span class="op" id="1576321">(</span><span class="op" id="1576322">&amp;</span><span class="ident" id="1576323">TypeAssertionError</span><span class="op" id="1576341">{</span><span class="string" id="1576342">&#34;&#34;</span><span class="op" id="1576344">,</span>&nbsp;<span class="op" id="1576346">*</span><span class="ident" id="1576347">ep</span><span class="op" id="1576349">.</span><span class="ident" id="1576350">_type</span><span class="op" id="1576355">.</span><span class="ident" id="1576356">_string</span><span class="op" id="1576363">,</span>&nbsp;<span class="op" id="1576365">*</span><span class="ident" id="1576366">t</span><span class="op" id="1576367">.</span><span class="ident" id="1576368">_string</span><span class="op" id="1576375">,</span>&nbsp;<span class="string" id="1576377">&#34;&#34;</span><span class="op" id="1576379">}</span><span class="op" id="1576380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1576383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576386">size</span>&nbsp;<span class="op" id="1576391">:=</span>&nbsp;<span class="builtintype" id="1576394">uintptr</span><span class="op" id="1576401">(</span><span class="ident" id="1576402">t</span><span class="op" id="1576403">.</span><span class="ident" id="1576404">size</span><span class="op" id="1576408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1576411">if</span>&nbsp;<span class="ident" id="1576414">isDirectIface</span><span class="op" id="1576427">(</span><span class="ident" id="1576428">t</span><span class="op" id="1576429">)</span>&nbsp;<span class="op" id="1576431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576435">memmove</span><span class="op" id="1576442">(</span><span class="ident" id="1576443">unsafe</span><span class="op" id="1576449">.</span><span class="ident" id="1576450">Pointer</span><span class="op" id="1576457">(</span><span class="op" id="1576458">&amp;</span><span class="ident" id="1576459">r</span><span class="op" id="1576460">)</span><span class="op" id="1576461">,</span>&nbsp;<span class="ident" id="1576463">unsafe</span><span class="op" id="1576469">.</span><span class="ident" id="1576470">Pointer</span><span class="op" id="1576477">(</span><span class="op" id="1576478">&amp;</span><span class="ident" id="1576479">ep</span><span class="op" id="1576481">.</span><span class="ident" id="1576482">data</span><span class="op" id="1576486">)</span><span class="op" id="1576487">,</span>&nbsp;<span class="ident" id="1576489">size</span><span class="op" id="1576493">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1576496">}</span>&nbsp;<span class="keyword" id="1576498">else</span>&nbsp;<span class="op" id="1576503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576507">memmove</span><span class="op" id="1576514">(</span><span class="ident" id="1576515">unsafe</span><span class="op" id="1576521">.</span><span class="ident" id="1576522">Pointer</span><span class="op" id="1576529">(</span><span class="op" id="1576530">&amp;</span><span class="ident" id="1576531">r</span><span class="op" id="1576532">)</span><span class="op" id="1576533">,</span>&nbsp;<span class="ident" id="1576535">ep</span><span class="op" id="1576537">.</span><span class="ident" id="1576538">data</span><span class="op" id="1576542">,</span>&nbsp;<span class="ident" id="1576544">size</span><span class="op" id="1576548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1576551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1576554">return</span><br>
<span class="lineno"></span><span class="op" id="1576561">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="comment" id="1576564">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1576577">func</span>&nbsp;<span class="ident" id="1576582">assertE2T2</span><span class="op" id="1576592">(</span><span class="ident" id="1576593">t</span>&nbsp;<span class="op" id="1576595">*</span><span class="ident" id="1576596">_type</span><span class="op" id="1576601">,</span>&nbsp;<span class="ident" id="1576603">e</span>&nbsp;<span class="keyword" id="1576605">interface</span><span class="op" id="1576614">{</span><span class="op" id="1576615">}</span><span class="op" id="1576616">)</span>&nbsp;<span class="op" id="1576618">(</span><span class="ident" id="1576619">r</span>&nbsp;<span class="builtintype" id="1576621">byte</span><span class="op" id="1576625">)</span>&nbsp;<span class="op" id="1576627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576630">ep</span>&nbsp;<span class="op" id="1576633">:=</span>&nbsp;<span class="op" id="1576636">(</span><span class="op" id="1576637">*</span><span class="ident" id="1576638">eface</span><span class="op" id="1576643">)</span><span class="op" id="1576644">(</span><span class="ident" id="1576645">unsafe</span><span class="op" id="1576651">.</span><span class="ident" id="1576652">Pointer</span><span class="op" id="1576659">(</span><span class="op" id="1576660">&amp;</span><span class="ident" id="1576661">e</span><span class="op" id="1576662">)</span><span class="op" id="1576663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576666">size</span>&nbsp;<span class="op" id="1576671">:=</span>&nbsp;<span class="builtintype" id="1576674">uintptr</span><span class="op" id="1576681">(</span><span class="ident" id="1576682">t</span><span class="op" id="1576683">.</span><span class="ident" id="1576684">size</span><span class="op" id="1576688">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576691">ok</span>&nbsp;<span class="op" id="1576694">:=</span>&nbsp;<span class="op" id="1576697">(</span><span class="op" id="1576698">*</span><span class="builtintype" id="1576699">bool</span><span class="op" id="1576703">)</span><span class="op" id="1576704">(</span><span class="ident" id="1576705">add</span><span class="op" id="1576708">(</span><span class="ident" id="1576709">unsafe</span><span class="op" id="1576715">.</span><span class="ident" id="1576716">Pointer</span><span class="op" id="1576723">(</span><span class="op" id="1576724">&amp;</span><span class="ident" id="1576725">r</span><span class="op" id="1576726">)</span><span class="op" id="1576727">,</span>&nbsp;<span class="ident" id="1576729">size</span><span class="op" id="1576733">)</span><span class="op" id="1576734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1576737">if</span>&nbsp;<span class="ident" id="1576740">ep</span><span class="op" id="1576742">.</span><span class="ident" id="1576743">_type</span>&nbsp;<span class="op" id="1576749">!=</span>&nbsp;<span class="ident" id="1576752">t</span>&nbsp;<span class="op" id="1576754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1576758">*</span><span class="ident" id="1576759">ok</span>&nbsp;<span class="op" id="1576762">=</span>&nbsp;<span class="builtintype" id="1576764">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576772">memclr</span><span class="op" id="1576778">(</span><span class="ident" id="1576779">unsafe</span><span class="op" id="1576785">.</span><span class="ident" id="1576786">Pointer</span><span class="op" id="1576793">(</span><span class="op" id="1576794">&amp;</span><span class="ident" id="1576795">r</span><span class="op" id="1576796">)</span><span class="op" id="1576797">,</span>&nbsp;<span class="ident" id="1576799">size</span><span class="op" id="1576803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1576807">return</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1576815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1576818">*</span><span class="ident" id="1576819">ok</span>&nbsp;<span class="op" id="1576822">=</span>&nbsp;<span class="builtintype" id="1576824">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1576830">if</span>&nbsp;<span class="ident" id="1576833">isDirectIface</span><span class="op" id="1576846">(</span><span class="ident" id="1576847">t</span><span class="op" id="1576848">)</span>&nbsp;<span class="op" id="1576850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576854">memmove</span><span class="op" id="1576861">(</span><span class="ident" id="1576862">unsafe</span><span class="op" id="1576868">.</span><span class="ident" id="1576869">Pointer</span><span class="op" id="1576876">(</span><span class="op" id="1576877">&amp;</span><span class="ident" id="1576878">r</span><span class="op" id="1576879">)</span><span class="op" id="1576880">,</span>&nbsp;<span class="ident" id="1576882">unsafe</span><span class="op" id="1576888">.</span><span class="ident" id="1576889">Pointer</span><span class="op" id="1576896">(</span><span class="op" id="1576897">&amp;</span><span class="ident" id="1576898">ep</span><span class="op" id="1576900">.</span><span class="ident" id="1576901">data</span><span class="op" id="1576905">)</span><span class="op" id="1576906">,</span>&nbsp;<span class="ident" id="1576908">size</span><span class="op" id="1576912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1576915">}</span>&nbsp;<span class="keyword" id="1576917">else</span>&nbsp;<span class="op" id="1576922">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1576926">memmove</span><span class="op" id="1576933">(</span><span class="ident" id="1576934">unsafe</span><span class="op" id="1576940">.</span><span class="ident" id="1576941">Pointer</span><span class="op" id="1576948">(</span><span class="op" id="1576949">&amp;</span><span class="ident" id="1576950">r</span><span class="op" id="1576951">)</span><span class="op" id="1576952">,</span>&nbsp;<span class="ident" id="1576954">ep</span><span class="op" id="1576956">.</span><span class="ident" id="1576957">data</span><span class="op" id="1576961">,</span>&nbsp;<span class="ident" id="1576963">size</span><span class="op" id="1576967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1576970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1576973">return</span><br>
<span class="lineno"></span><span class="op" id="1576980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="1576983">func</span>&nbsp;<span class="ident" id="1576988">assertE2TOK</span><span class="op" id="1576999">(</span><span class="ident" id="1577000">t</span>&nbsp;<span class="op" id="1577002">*</span><span class="ident" id="1577003">_type</span><span class="op" id="1577008">,</span>&nbsp;<span class="ident" id="1577010">e</span>&nbsp;<span class="keyword" id="1577012">interface</span><span class="op" id="1577021">{</span><span class="op" id="1577022">}</span><span class="op" id="1577023">)</span>&nbsp;<span class="builtintype" id="1577025">bool</span>&nbsp;<span class="op" id="1577030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577033">ep</span>&nbsp;<span class="op" id="1577036">:=</span>&nbsp;<span class="op" id="1577039">(</span><span class="op" id="1577040">*</span><span class="ident" id="1577041">eface</span><span class="op" id="1577046">)</span><span class="op" id="1577047">(</span><span class="ident" id="1577048">unsafe</span><span class="op" id="1577054">.</span><span class="ident" id="1577055">Pointer</span><span class="op" id="1577062">(</span><span class="op" id="1577063">&amp;</span><span class="ident" id="1577064">e</span><span class="op" id="1577065">)</span><span class="op" id="1577066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1577069">return</span>&nbsp;<span class="ident" id="1577076">t</span>&nbsp;<span class="op" id="1577078">==</span>&nbsp;<span class="ident" id="1577081">ep</span><span class="op" id="1577083">.</span><span class="ident" id="1577084">_type</span><br>
<span class="lineno"></span><span class="op" id="1577090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="1577093">func</span>&nbsp;<span class="ident" id="1577098">convI2E</span><span class="op" id="1577105">(</span><span class="ident" id="1577106">i</span>&nbsp;<span class="ident" id="1577108">fInterface</span><span class="op" id="1577118">)</span>&nbsp;<span class="op" id="1577120">(</span><span class="ident" id="1577121">r</span>&nbsp;<span class="keyword" id="1577123">interface</span><span class="op" id="1577132">{</span><span class="op" id="1577133">}</span><span class="op" id="1577134">)</span>&nbsp;<span class="op" id="1577136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577139">ip</span>&nbsp;<span class="op" id="1577142">:=</span>&nbsp;<span class="op" id="1577145">(</span><span class="op" id="1577146">*</span><span class="ident" id="1577147">iface</span><span class="op" id="1577152">)</span><span class="op" id="1577153">(</span><span class="ident" id="1577154">unsafe</span><span class="op" id="1577160">.</span><span class="ident" id="1577161">Pointer</span><span class="op" id="1577168">(</span><span class="op" id="1577169">&amp;</span><span class="ident" id="1577170">i</span><span class="op" id="1577171">)</span><span class="op" id="1577172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577175">tab</span>&nbsp;<span class="op" id="1577179">:=</span>&nbsp;<span class="ident" id="1577182">ip</span><span class="op" id="1577184">.</span><span class="ident" id="1577185">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1577190">if</span>&nbsp;<span class="ident" id="1577193">tab</span>&nbsp;<span class="op" id="1577197">==</span>&nbsp;<span class="ident" id="1577200">nil</span>&nbsp;<span class="op" id="1577204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1577208">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577219">rp</span>&nbsp;<span class="op" id="1577222">:=</span>&nbsp;<span class="op" id="1577225">(</span><span class="op" id="1577226">*</span><span class="ident" id="1577227">eface</span><span class="op" id="1577232">)</span><span class="op" id="1577233">(</span><span class="ident" id="1577234">unsafe</span><span class="op" id="1577240">.</span><span class="ident" id="1577241">Pointer</span><span class="op" id="1577248">(</span><span class="op" id="1577249">&amp;</span><span class="ident" id="1577250">r</span><span class="op" id="1577251">)</span><span class="op" id="1577252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577255">rp</span><span class="op" id="1577257">.</span><span class="ident" id="1577258">_type</span>&nbsp;<span class="op" id="1577264">=</span>&nbsp;<span class="ident" id="1577266">tab</span><span class="op" id="1577269">.</span><span class="ident" id="1577270">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577277">rp</span><span class="op" id="1577279">.</span><span class="ident" id="1577280">data</span>&nbsp;<span class="op" id="1577285">=</span>&nbsp;<span class="ident" id="1577287">ip</span><span class="op" id="1577289">.</span><span class="ident" id="1577290">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1577296">return</span><br>
<span class="lineno">270</span><span class="op" id="1577303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1577306">func</span>&nbsp;<span class="ident" id="1577311">assertI2E</span><span class="op" id="1577320">(</span><span class="ident" id="1577321">inter</span>&nbsp;<span class="op" id="1577327">*</span><span class="ident" id="1577328">interfacetype</span><span class="op" id="1577341">,</span>&nbsp;<span class="ident" id="1577343">i</span>&nbsp;<span class="ident" id="1577345">fInterface</span><span class="op" id="1577355">)</span>&nbsp;<span class="op" id="1577357">(</span><span class="ident" id="1577358">r</span>&nbsp;<span class="keyword" id="1577360">interface</span><span class="op" id="1577369">{</span><span class="op" id="1577370">}</span><span class="op" id="1577371">)</span>&nbsp;<span class="op" id="1577373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577376">ip</span>&nbsp;<span class="op" id="1577379">:=</span>&nbsp;<span class="op" id="1577382">(</span><span class="op" id="1577383">*</span><span class="ident" id="1577384">iface</span><span class="op" id="1577389">)</span><span class="op" id="1577390">(</span><span class="ident" id="1577391">unsafe</span><span class="op" id="1577397">.</span><span class="ident" id="1577398">Pointer</span><span class="op" id="1577405">(</span><span class="op" id="1577406">&amp;</span><span class="ident" id="1577407">i</span><span class="op" id="1577408">)</span><span class="op" id="1577409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577412">tab</span>&nbsp;<span class="op" id="1577416">:=</span>&nbsp;<span class="ident" id="1577419">ip</span><span class="op" id="1577421">.</span><span class="ident" id="1577422">tab</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1577427">if</span>&nbsp;<span class="ident" id="1577430">tab</span>&nbsp;<span class="op" id="1577434">==</span>&nbsp;<span class="ident" id="1577437">nil</span>&nbsp;<span class="op" id="1577441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1577445">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1577504">panic</span><span class="op" id="1577509">(</span><span class="op" id="1577510">&amp;</span><span class="ident" id="1577511">TypeAssertionError</span><span class="op" id="1577529">{</span><span class="string" id="1577530">&#34;&#34;</span><span class="op" id="1577532">,</span>&nbsp;<span class="string" id="1577534">&#34;&#34;</span><span class="op" id="1577536">,</span>&nbsp;<span class="op" id="1577538">*</span><span class="ident" id="1577539">inter</span><span class="op" id="1577544">.</span><span class="ident" id="1577545">typ</span><span class="op" id="1577548">.</span><span class="ident" id="1577549">_string</span><span class="op" id="1577556">,</span>&nbsp;<span class="string" id="1577558">&#34;&#34;</span><span class="op" id="1577560">}</span><span class="op" id="1577561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577567">rp</span>&nbsp;<span class="op" id="1577570">:=</span>&nbsp;<span class="op" id="1577573">(</span><span class="op" id="1577574">*</span><span class="ident" id="1577575">eface</span><span class="op" id="1577580">)</span><span class="op" id="1577581">(</span><span class="ident" id="1577582">unsafe</span><span class="op" id="1577588">.</span><span class="ident" id="1577589">Pointer</span><span class="op" id="1577596">(</span><span class="op" id="1577597">&amp;</span><span class="ident" id="1577598">r</span><span class="op" id="1577599">)</span><span class="op" id="1577600">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577603">rp</span><span class="op" id="1577605">.</span><span class="ident" id="1577606">_type</span>&nbsp;<span class="op" id="1577612">=</span>&nbsp;<span class="ident" id="1577614">tab</span><span class="op" id="1577617">.</span><span class="ident" id="1577618">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577625">rp</span><span class="op" id="1577627">.</span><span class="ident" id="1577628">data</span>&nbsp;<span class="op" id="1577633">=</span>&nbsp;<span class="ident" id="1577635">ip</span><span class="op" id="1577637">.</span><span class="ident" id="1577638">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1577644">return</span><br>
<span class="lineno"></span><span class="op" id="1577651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="1577654">func</span>&nbsp;<span class="ident" id="1577659">assertI2E2</span><span class="op" id="1577669">(</span><span class="ident" id="1577670">inter</span>&nbsp;<span class="op" id="1577676">*</span><span class="ident" id="1577677">interfacetype</span><span class="op" id="1577690">,</span>&nbsp;<span class="ident" id="1577692">i</span>&nbsp;<span class="ident" id="1577694">fInterface</span><span class="op" id="1577704">)</span>&nbsp;<span class="op" id="1577706">(</span><span class="ident" id="1577707">r</span>&nbsp;<span class="keyword" id="1577709">interface</span><span class="op" id="1577718">{</span><span class="op" id="1577719">}</span><span class="op" id="1577720">,</span>&nbsp;<span class="ident" id="1577722">ok</span>&nbsp;<span class="builtintype" id="1577725">bool</span><span class="op" id="1577729">)</span>&nbsp;<span class="op" id="1577731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577734">ip</span>&nbsp;<span class="op" id="1577737">:=</span>&nbsp;<span class="op" id="1577740">(</span><span class="op" id="1577741">*</span><span class="ident" id="1577742">iface</span><span class="op" id="1577747">)</span><span class="op" id="1577748">(</span><span class="ident" id="1577749">unsafe</span><span class="op" id="1577755">.</span><span class="ident" id="1577756">Pointer</span><span class="op" id="1577763">(</span><span class="op" id="1577764">&amp;</span><span class="ident" id="1577765">i</span><span class="op" id="1577766">)</span><span class="op" id="1577767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577770">tab</span>&nbsp;<span class="op" id="1577774">:=</span>&nbsp;<span class="ident" id="1577777">ip</span><span class="op" id="1577779">.</span><span class="ident" id="1577780">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1577785">if</span>&nbsp;<span class="ident" id="1577788">tab</span>&nbsp;<span class="op" id="1577792">==</span>&nbsp;<span class="ident" id="1577795">nil</span>&nbsp;<span class="op" id="1577799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1577803">return</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1577811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577814">rp</span>&nbsp;<span class="op" id="1577817">:=</span>&nbsp;<span class="op" id="1577820">(</span><span class="op" id="1577821">*</span><span class="ident" id="1577822">eface</span><span class="op" id="1577827">)</span><span class="op" id="1577828">(</span><span class="ident" id="1577829">unsafe</span><span class="op" id="1577835">.</span><span class="ident" id="1577836">Pointer</span><span class="op" id="1577843">(</span><span class="op" id="1577844">&amp;</span><span class="ident" id="1577845">r</span><span class="op" id="1577846">)</span><span class="op" id="1577847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577850">rp</span><span class="op" id="1577852">.</span><span class="ident" id="1577853">_type</span>&nbsp;<span class="op" id="1577859">=</span>&nbsp;<span class="ident" id="1577861">tab</span><span class="op" id="1577864">.</span><span class="ident" id="1577865">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577872">rp</span><span class="op" id="1577874">.</span><span class="ident" id="1577875">data</span>&nbsp;<span class="op" id="1577880">=</span>&nbsp;<span class="ident" id="1577882">ip</span><span class="op" id="1577884">.</span><span class="ident" id="1577885">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577891">ok</span>&nbsp;<span class="op" id="1577894">=</span>&nbsp;<span class="builtintype" id="1577896">true</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1577902">return</span><br>
<span class="lineno"></span><span class="op" id="1577909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1577912">func</span>&nbsp;<span class="ident" id="1577917">convI2I</span><span class="op" id="1577924">(</span><span class="ident" id="1577925">inter</span>&nbsp;<span class="op" id="1577931">*</span><span class="ident" id="1577932">interfacetype</span><span class="op" id="1577945">,</span>&nbsp;<span class="ident" id="1577947">i</span>&nbsp;<span class="ident" id="1577949">fInterface</span><span class="op" id="1577959">)</span>&nbsp;<span class="op" id="1577961">(</span><span class="ident" id="1577962">r</span>&nbsp;<span class="ident" id="1577964">fInterface</span><span class="op" id="1577974">)</span>&nbsp;<span class="op" id="1577976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1577979">ip</span>&nbsp;<span class="op" id="1577982">:=</span>&nbsp;<span class="op" id="1577985">(</span><span class="op" id="1577986">*</span><span class="ident" id="1577987">iface</span><span class="op" id="1577992">)</span><span class="op" id="1577993">(</span><span class="ident" id="1577994">unsafe</span><span class="op" id="1578000">.</span><span class="ident" id="1578001">Pointer</span><span class="op" id="1578008">(</span><span class="op" id="1578009">&amp;</span><span class="ident" id="1578010">i</span><span class="op" id="1578011">)</span><span class="op" id="1578012">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578015">tab</span>&nbsp;<span class="op" id="1578019">:=</span>&nbsp;<span class="ident" id="1578022">ip</span><span class="op" id="1578024">.</span><span class="ident" id="1578025">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578030">if</span>&nbsp;<span class="ident" id="1578033">tab</span>&nbsp;<span class="op" id="1578037">==</span>&nbsp;<span class="ident" id="1578040">nil</span>&nbsp;<span class="op" id="1578044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578048">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1578056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578059">rp</span>&nbsp;<span class="op" id="1578062">:=</span>&nbsp;<span class="op" id="1578065">(</span><span class="op" id="1578066">*</span><span class="ident" id="1578067">iface</span><span class="op" id="1578072">)</span><span class="op" id="1578073">(</span><span class="ident" id="1578074">unsafe</span><span class="op" id="1578080">.</span><span class="ident" id="1578081">Pointer</span><span class="op" id="1578088">(</span><span class="op" id="1578089">&amp;</span><span class="ident" id="1578090">r</span><span class="op" id="1578091">)</span><span class="op" id="1578092">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578095">if</span>&nbsp;<span class="ident" id="1578098">tab</span><span class="op" id="1578101">.</span><span class="ident" id="1578102">inter</span>&nbsp;<span class="op" id="1578108">==</span>&nbsp;<span class="ident" id="1578111">inter</span>&nbsp;<span class="op" id="1578117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578121">rp</span><span class="op" id="1578123">.</span><span class="ident" id="1578124">tab</span>&nbsp;<span class="op" id="1578128">=</span>&nbsp;<span class="ident" id="1578130">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578136">rp</span><span class="op" id="1578138">.</span><span class="ident" id="1578139">data</span>&nbsp;<span class="op" id="1578144">=</span>&nbsp;<span class="ident" id="1578146">ip</span><span class="op" id="1578148">.</span><span class="ident" id="1578149">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578156">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1578164">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578167">rp</span><span class="op" id="1578169">.</span><span class="ident" id="1578170">tab</span>&nbsp;<span class="op" id="1578174">=</span>&nbsp;<span class="ident" id="1578176">getitab</span><span class="op" id="1578183">(</span><span class="ident" id="1578184">inter</span><span class="op" id="1578189">,</span>&nbsp;<span class="ident" id="1578191">tab</span><span class="op" id="1578194">.</span><span class="ident" id="1578195">_type</span><span class="op" id="1578200">,</span>&nbsp;<span class="builtintype" id="1578202">false</span><span class="op" id="1578207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578210">rp</span><span class="op" id="1578212">.</span><span class="ident" id="1578213">data</span>&nbsp;<span class="op" id="1578218">=</span>&nbsp;<span class="ident" id="1578220">ip</span><span class="op" id="1578222">.</span><span class="ident" id="1578223">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578229">return</span><br>
<span class="lineno"></span><span class="op" id="1578236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="keyword" id="1578239">func</span>&nbsp;<span class="ident" id="1578244">assertI2I</span><span class="op" id="1578253">(</span><span class="ident" id="1578254">inter</span>&nbsp;<span class="op" id="1578260">*</span><span class="ident" id="1578261">interfacetype</span><span class="op" id="1578274">,</span>&nbsp;<span class="ident" id="1578276">i</span>&nbsp;<span class="ident" id="1578278">fInterface</span><span class="op" id="1578288">)</span>&nbsp;<span class="op" id="1578290">(</span><span class="ident" id="1578291">r</span>&nbsp;<span class="ident" id="1578293">fInterface</span><span class="op" id="1578303">)</span>&nbsp;<span class="op" id="1578305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578308">ip</span>&nbsp;<span class="op" id="1578311">:=</span>&nbsp;<span class="op" id="1578314">(</span><span class="op" id="1578315">*</span><span class="ident" id="1578316">iface</span><span class="op" id="1578321">)</span><span class="op" id="1578322">(</span><span class="ident" id="1578323">unsafe</span><span class="op" id="1578329">.</span><span class="ident" id="1578330">Pointer</span><span class="op" id="1578337">(</span><span class="op" id="1578338">&amp;</span><span class="ident" id="1578339">i</span><span class="op" id="1578340">)</span><span class="op" id="1578341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578344">tab</span>&nbsp;<span class="op" id="1578348">:=</span>&nbsp;<span class="ident" id="1578351">ip</span><span class="op" id="1578353">.</span><span class="ident" id="1578354">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578359">if</span>&nbsp;<span class="ident" id="1578362">tab</span>&nbsp;<span class="op" id="1578366">==</span>&nbsp;<span class="ident" id="1578369">nil</span>&nbsp;<span class="op" id="1578373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1578377">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1578436">panic</span><span class="op" id="1578441">(</span><span class="op" id="1578442">&amp;</span><span class="ident" id="1578443">TypeAssertionError</span><span class="op" id="1578461">{</span><span class="string" id="1578462">&#34;&#34;</span><span class="op" id="1578464">,</span>&nbsp;<span class="string" id="1578466">&#34;&#34;</span><span class="op" id="1578468">,</span>&nbsp;<span class="op" id="1578470">*</span><span class="ident" id="1578471">inter</span><span class="op" id="1578476">.</span><span class="ident" id="1578477">typ</span><span class="op" id="1578480">.</span><span class="ident" id="1578481">_string</span><span class="op" id="1578488">,</span>&nbsp;<span class="string" id="1578490">&#34;&#34;</span><span class="op" id="1578492">}</span><span class="op" id="1578493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1578496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578499">rp</span>&nbsp;<span class="op" id="1578502">:=</span>&nbsp;<span class="op" id="1578505">(</span><span class="op" id="1578506">*</span><span class="ident" id="1578507">iface</span><span class="op" id="1578512">)</span><span class="op" id="1578513">(</span><span class="ident" id="1578514">unsafe</span><span class="op" id="1578520">.</span><span class="ident" id="1578521">Pointer</span><span class="op" id="1578528">(</span><span class="op" id="1578529">&amp;</span><span class="ident" id="1578530">r</span><span class="op" id="1578531">)</span><span class="op" id="1578532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578535">if</span>&nbsp;<span class="ident" id="1578538">tab</span><span class="op" id="1578541">.</span><span class="ident" id="1578542">inter</span>&nbsp;<span class="op" id="1578548">==</span>&nbsp;<span class="ident" id="1578551">inter</span>&nbsp;<span class="op" id="1578557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578561">rp</span><span class="op" id="1578563">.</span><span class="ident" id="1578564">tab</span>&nbsp;<span class="op" id="1578568">=</span>&nbsp;<span class="ident" id="1578570">tab</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578576">rp</span><span class="op" id="1578578">.</span><span class="ident" id="1578579">data</span>&nbsp;<span class="op" id="1578584">=</span>&nbsp;<span class="ident" id="1578586">ip</span><span class="op" id="1578588">.</span><span class="ident" id="1578589">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578596">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1578604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578607">rp</span><span class="op" id="1578609">.</span><span class="ident" id="1578610">tab</span>&nbsp;<span class="op" id="1578614">=</span>&nbsp;<span class="ident" id="1578616">getitab</span><span class="op" id="1578623">(</span><span class="ident" id="1578624">inter</span><span class="op" id="1578629">,</span>&nbsp;<span class="ident" id="1578631">tab</span><span class="op" id="1578634">.</span><span class="ident" id="1578635">_type</span><span class="op" id="1578640">,</span>&nbsp;<span class="builtintype" id="1578642">false</span><span class="op" id="1578647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578650">rp</span><span class="op" id="1578652">.</span><span class="ident" id="1578653">data</span>&nbsp;<span class="op" id="1578658">=</span>&nbsp;<span class="ident" id="1578660">ip</span><span class="op" id="1578662">.</span><span class="ident" id="1578663">data</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578669">return</span><br>
<span class="lineno"></span><span class="op" id="1578676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1578679">func</span>&nbsp;<span class="ident" id="1578684">assertI2I2</span><span class="op" id="1578694">(</span><span class="ident" id="1578695">inter</span>&nbsp;<span class="op" id="1578701">*</span><span class="ident" id="1578702">interfacetype</span><span class="op" id="1578715">,</span>&nbsp;<span class="ident" id="1578717">i</span>&nbsp;<span class="ident" id="1578719">fInterface</span><span class="op" id="1578729">)</span>&nbsp;<span class="op" id="1578731">(</span><span class="ident" id="1578732">r</span>&nbsp;<span class="ident" id="1578734">fInterface</span><span class="op" id="1578744">,</span>&nbsp;<span class="ident" id="1578746">ok</span>&nbsp;<span class="builtintype" id="1578749">bool</span><span class="op" id="1578753">)</span>&nbsp;<span class="op" id="1578755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578758">ip</span>&nbsp;<span class="op" id="1578761">:=</span>&nbsp;<span class="op" id="1578764">(</span><span class="op" id="1578765">*</span><span class="ident" id="1578766">iface</span><span class="op" id="1578771">)</span><span class="op" id="1578772">(</span><span class="ident" id="1578773">unsafe</span><span class="op" id="1578779">.</span><span class="ident" id="1578780">Pointer</span><span class="op" id="1578787">(</span><span class="op" id="1578788">&amp;</span><span class="ident" id="1578789">i</span><span class="op" id="1578790">)</span><span class="op" id="1578791">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578794">tab</span>&nbsp;<span class="op" id="1578798">:=</span>&nbsp;<span class="ident" id="1578801">ip</span><span class="op" id="1578803">.</span><span class="ident" id="1578804">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578809">if</span>&nbsp;<span class="ident" id="1578812">tab</span>&nbsp;<span class="op" id="1578816">==</span>&nbsp;<span class="ident" id="1578819">nil</span>&nbsp;<span class="op" id="1578823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578827">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1578835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578838">rp</span>&nbsp;<span class="op" id="1578841">:=</span>&nbsp;<span class="op" id="1578844">(</span><span class="op" id="1578845">*</span><span class="ident" id="1578846">iface</span><span class="op" id="1578851">)</span><span class="op" id="1578852">(</span><span class="ident" id="1578853">unsafe</span><span class="op" id="1578859">.</span><span class="ident" id="1578860">Pointer</span><span class="op" id="1578867">(</span><span class="op" id="1578868">&amp;</span><span class="ident" id="1578869">r</span><span class="op" id="1578870">)</span><span class="op" id="1578871">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578874">if</span>&nbsp;<span class="ident" id="1578877">tab</span><span class="op" id="1578880">.</span><span class="ident" id="1578881">inter</span>&nbsp;<span class="op" id="1578887">==</span>&nbsp;<span class="ident" id="1578890">inter</span>&nbsp;<span class="op" id="1578896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578900">rp</span><span class="op" id="1578902">.</span><span class="ident" id="1578903">tab</span>&nbsp;<span class="op" id="1578907">=</span>&nbsp;<span class="ident" id="1578909">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578915">rp</span><span class="op" id="1578917">.</span><span class="ident" id="1578918">data</span>&nbsp;<span class="op" id="1578923">=</span>&nbsp;<span class="ident" id="1578925">ip</span><span class="op" id="1578927">.</span><span class="ident" id="1578928">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578935">ok</span>&nbsp;<span class="op" id="1578938">=</span>&nbsp;<span class="builtintype" id="1578940">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578947">return</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1578955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1578958">tab</span>&nbsp;<span class="op" id="1578962">=</span>&nbsp;<span class="ident" id="1578964">getitab</span><span class="op" id="1578971">(</span><span class="ident" id="1578972">inter</span><span class="op" id="1578977">,</span>&nbsp;<span class="ident" id="1578979">tab</span><span class="op" id="1578982">.</span><span class="ident" id="1578983">_type</span><span class="op" id="1578988">,</span>&nbsp;<span class="builtintype" id="1578990">true</span><span class="op" id="1578994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1578997">if</span>&nbsp;<span class="ident" id="1579000">tab</span>&nbsp;<span class="op" id="1579004">==</span>&nbsp;<span class="ident" id="1579007">nil</span>&nbsp;<span class="op" id="1579011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579015">rp</span><span class="op" id="1579017">.</span><span class="ident" id="1579018">data</span>&nbsp;<span class="op" id="1579023">=</span>&nbsp;<span class="ident" id="1579025">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579031">rp</span><span class="op" id="1579033">.</span><span class="ident" id="1579034">tab</span>&nbsp;<span class="op" id="1579038">=</span>&nbsp;<span class="ident" id="1579040">nil</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579046">ok</span>&nbsp;<span class="op" id="1579049">=</span>&nbsp;<span class="builtintype" id="1579051">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579059">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1579067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579070">rp</span><span class="op" id="1579072">.</span><span class="ident" id="1579073">tab</span>&nbsp;<span class="op" id="1579077">=</span>&nbsp;<span class="ident" id="1579079">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579084">rp</span><span class="op" id="1579086">.</span><span class="ident" id="1579087">data</span>&nbsp;<span class="op" id="1579092">=</span>&nbsp;<span class="ident" id="1579094">ip</span><span class="op" id="1579096">.</span><span class="ident" id="1579097">data</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579103">ok</span>&nbsp;<span class="op" id="1579106">=</span>&nbsp;<span class="builtintype" id="1579108">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579114">return</span><br>
<span class="lineno"></span><span class="op" id="1579121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1579124">func</span>&nbsp;<span class="ident" id="1579129">assertE2I</span><span class="op" id="1579138">(</span><span class="ident" id="1579139">inter</span>&nbsp;<span class="op" id="1579145">*</span><span class="ident" id="1579146">interfacetype</span><span class="op" id="1579159">,</span>&nbsp;<span class="ident" id="1579161">e</span>&nbsp;<span class="keyword" id="1579163">interface</span><span class="op" id="1579172">{</span><span class="op" id="1579173">}</span><span class="op" id="1579174">)</span>&nbsp;<span class="op" id="1579176">(</span><span class="ident" id="1579177">r</span>&nbsp;<span class="ident" id="1579179">fInterface</span><span class="op" id="1579189">)</span>&nbsp;<span class="op" id="1579191">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579194">ep</span>&nbsp;<span class="op" id="1579197">:=</span>&nbsp;<span class="op" id="1579200">(</span><span class="op" id="1579201">*</span><span class="ident" id="1579202">eface</span><span class="op" id="1579207">)</span><span class="op" id="1579208">(</span><span class="ident" id="1579209">unsafe</span><span class="op" id="1579215">.</span><span class="ident" id="1579216">Pointer</span><span class="op" id="1579223">(</span><span class="op" id="1579224">&amp;</span><span class="ident" id="1579225">e</span><span class="op" id="1579226">)</span><span class="op" id="1579227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579230">t</span>&nbsp;<span class="op" id="1579232">:=</span>&nbsp;<span class="ident" id="1579235">ep</span><span class="op" id="1579237">.</span><span class="ident" id="1579238">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579245">if</span>&nbsp;<span class="ident" id="1579248">t</span>&nbsp;<span class="op" id="1579250">==</span>&nbsp;<span class="ident" id="1579253">nil</span>&nbsp;<span class="op" id="1579257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1579261">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1579320">panic</span><span class="op" id="1579325">(</span><span class="op" id="1579326">&amp;</span><span class="ident" id="1579327">TypeAssertionError</span><span class="op" id="1579345">{</span><span class="string" id="1579346">&#34;&#34;</span><span class="op" id="1579348">,</span>&nbsp;<span class="string" id="1579350">&#34;&#34;</span><span class="op" id="1579352">,</span>&nbsp;<span class="op" id="1579354">*</span><span class="ident" id="1579355">inter</span><span class="op" id="1579360">.</span><span class="ident" id="1579361">typ</span><span class="op" id="1579364">.</span><span class="ident" id="1579365">_string</span><span class="op" id="1579372">,</span>&nbsp;<span class="string" id="1579374">&#34;&#34;</span><span class="op" id="1579376">}</span><span class="op" id="1579377">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1579380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579383">rp</span>&nbsp;<span class="op" id="1579386">:=</span>&nbsp;<span class="op" id="1579389">(</span><span class="op" id="1579390">*</span><span class="ident" id="1579391">iface</span><span class="op" id="1579396">)</span><span class="op" id="1579397">(</span><span class="ident" id="1579398">unsafe</span><span class="op" id="1579404">.</span><span class="ident" id="1579405">Pointer</span><span class="op" id="1579412">(</span><span class="op" id="1579413">&amp;</span><span class="ident" id="1579414">r</span><span class="op" id="1579415">)</span><span class="op" id="1579416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579419">rp</span><span class="op" id="1579421">.</span><span class="ident" id="1579422">tab</span>&nbsp;<span class="op" id="1579426">=</span>&nbsp;<span class="ident" id="1579428">getitab</span><span class="op" id="1579435">(</span><span class="ident" id="1579436">inter</span><span class="op" id="1579441">,</span>&nbsp;<span class="ident" id="1579443">t</span><span class="op" id="1579444">,</span>&nbsp;<span class="builtintype" id="1579446">false</span><span class="op" id="1579451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579454">rp</span><span class="op" id="1579456">.</span><span class="ident" id="1579457">data</span>&nbsp;<span class="op" id="1579462">=</span>&nbsp;<span class="ident" id="1579464">ep</span><span class="op" id="1579466">.</span><span class="ident" id="1579467">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579473">return</span><br>
<span class="lineno">370</span><span class="op" id="1579480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1579483">func</span>&nbsp;<span class="ident" id="1579488">assertE2I2</span><span class="op" id="1579498">(</span><span class="ident" id="1579499">inter</span>&nbsp;<span class="op" id="1579505">*</span><span class="ident" id="1579506">interfacetype</span><span class="op" id="1579519">,</span>&nbsp;<span class="ident" id="1579521">e</span>&nbsp;<span class="keyword" id="1579523">interface</span><span class="op" id="1579532">{</span><span class="op" id="1579533">}</span><span class="op" id="1579534">)</span>&nbsp;<span class="op" id="1579536">(</span><span class="ident" id="1579537">r</span>&nbsp;<span class="ident" id="1579539">fInterface</span><span class="op" id="1579549">,</span>&nbsp;<span class="ident" id="1579551">ok</span>&nbsp;<span class="builtintype" id="1579554">bool</span><span class="op" id="1579558">)</span>&nbsp;<span class="op" id="1579560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579563">ep</span>&nbsp;<span class="op" id="1579566">:=</span>&nbsp;<span class="op" id="1579569">(</span><span class="op" id="1579570">*</span><span class="ident" id="1579571">eface</span><span class="op" id="1579576">)</span><span class="op" id="1579577">(</span><span class="ident" id="1579578">unsafe</span><span class="op" id="1579584">.</span><span class="ident" id="1579585">Pointer</span><span class="op" id="1579592">(</span><span class="op" id="1579593">&amp;</span><span class="ident" id="1579594">e</span><span class="op" id="1579595">)</span><span class="op" id="1579596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579599">t</span>&nbsp;<span class="op" id="1579601">:=</span>&nbsp;<span class="ident" id="1579604">ep</span><span class="op" id="1579606">.</span><span class="ident" id="1579607">_type</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579614">if</span>&nbsp;<span class="ident" id="1579617">t</span>&nbsp;<span class="op" id="1579619">==</span>&nbsp;<span class="ident" id="1579622">nil</span>&nbsp;<span class="op" id="1579626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579630">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1579638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579641">tab</span>&nbsp;<span class="op" id="1579645">:=</span>&nbsp;<span class="ident" id="1579648">getitab</span><span class="op" id="1579655">(</span><span class="ident" id="1579656">inter</span><span class="op" id="1579661">,</span>&nbsp;<span class="ident" id="1579663">t</span><span class="op" id="1579664">,</span>&nbsp;<span class="builtintype" id="1579666">true</span><span class="op" id="1579670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579673">if</span>&nbsp;<span class="ident" id="1579676">tab</span>&nbsp;<span class="op" id="1579680">==</span>&nbsp;<span class="ident" id="1579683">nil</span>&nbsp;<span class="op" id="1579687">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579691">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1579699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579702">rp</span>&nbsp;<span class="op" id="1579705">:=</span>&nbsp;<span class="op" id="1579708">(</span><span class="op" id="1579709">*</span><span class="ident" id="1579710">iface</span><span class="op" id="1579715">)</span><span class="op" id="1579716">(</span><span class="ident" id="1579717">unsafe</span><span class="op" id="1579723">.</span><span class="ident" id="1579724">Pointer</span><span class="op" id="1579731">(</span><span class="op" id="1579732">&amp;</span><span class="ident" id="1579733">r</span><span class="op" id="1579734">)</span><span class="op" id="1579735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579738">rp</span><span class="op" id="1579740">.</span><span class="ident" id="1579741">tab</span>&nbsp;<span class="op" id="1579745">=</span>&nbsp;<span class="ident" id="1579747">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579752">rp</span><span class="op" id="1579754">.</span><span class="ident" id="1579755">data</span>&nbsp;<span class="op" id="1579760">=</span>&nbsp;<span class="ident" id="1579762">ep</span><span class="op" id="1579764">.</span><span class="ident" id="1579765">data</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579771">ok</span>&nbsp;<span class="op" id="1579774">=</span>&nbsp;<span class="builtintype" id="1579776">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1579782">return</span><br>
<span class="lineno"></span><span class="op" id="1579789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1579792">func</span>&nbsp;<span class="ident" id="1579797">reflect_ifaceE2I</span><span class="op" id="1579813">(</span><span class="ident" id="1579814">inter</span>&nbsp;<span class="op" id="1579820">*</span><span class="ident" id="1579821">interfacetype</span><span class="op" id="1579834">,</span>&nbsp;<span class="ident" id="1579836">e</span>&nbsp;<span class="keyword" id="1579838">interface</span><span class="op" id="1579847">{</span><span class="op" id="1579848">}</span><span class="op" id="1579849">,</span>&nbsp;<span class="ident" id="1579851">dst</span>&nbsp;<span class="op" id="1579855">*</span><span class="ident" id="1579856">fInterface</span><span class="op" id="1579866">)</span>&nbsp;<span class="op" id="1579868">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1579871">*</span><span class="ident" id="1579872">dst</span>&nbsp;<span class="op" id="1579876">=</span>&nbsp;<span class="ident" id="1579878">assertE2I</span><span class="op" id="1579887">(</span><span class="ident" id="1579888">inter</span><span class="op" id="1579893">,</span>&nbsp;<span class="ident" id="1579895">e</span><span class="op" id="1579896">)</span><br>
<span class="lineno"></span><span class="op" id="1579898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1579901">func</span>&nbsp;<span class="ident" id="1579906">assertE2E</span><span class="op" id="1579915">(</span><span class="ident" id="1579916">inter</span>&nbsp;<span class="op" id="1579922">*</span><span class="ident" id="1579923">interfacetype</span><span class="op" id="1579936">,</span>&nbsp;<span class="ident" id="1579938">e</span>&nbsp;<span class="keyword" id="1579940">interface</span><span class="op" id="1579949">{</span><span class="op" id="1579950">}</span><span class="op" id="1579951">)</span>&nbsp;<span class="keyword" id="1579953">interface</span><span class="op" id="1579962">{</span><span class="op" id="1579963">}</span>&nbsp;<span class="op" id="1579965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1579968">ep</span>&nbsp;<span class="op" id="1579971">:=</span>&nbsp;<span class="op" id="1579974">(</span><span class="op" id="1579975">*</span><span class="ident" id="1579976">eface</span><span class="op" id="1579981">)</span><span class="op" id="1579982">(</span><span class="ident" id="1579983">unsafe</span><span class="op" id="1579989">.</span><span class="ident" id="1579990">Pointer</span><span class="op" id="1579997">(</span><span class="op" id="1579998">&amp;</span><span class="ident" id="1579999">e</span><span class="op" id="1580000">)</span><span class="op" id="1580001">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580004">if</span>&nbsp;<span class="ident" id="1580007">ep</span><span class="op" id="1580009">.</span><span class="ident" id="1580010">_type</span>&nbsp;<span class="op" id="1580016">==</span>&nbsp;<span class="ident" id="1580019">nil</span>&nbsp;<span class="op" id="1580023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1580027">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1580086">panic</span><span class="op" id="1580091">(</span><span class="op" id="1580092">&amp;</span><span class="ident" id="1580093">TypeAssertionError</span><span class="op" id="1580111">{</span><span class="string" id="1580112">&#34;&#34;</span><span class="op" id="1580114">,</span>&nbsp;<span class="string" id="1580116">&#34;&#34;</span><span class="op" id="1580118">,</span>&nbsp;<span class="op" id="1580120">*</span><span class="ident" id="1580121">inter</span><span class="op" id="1580126">.</span><span class="ident" id="1580127">typ</span><span class="op" id="1580130">.</span><span class="ident" id="1580131">_string</span><span class="op" id="1580138">,</span>&nbsp;<span class="string" id="1580140">&#34;&#34;</span><span class="op" id="1580142">}</span><span class="op" id="1580143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1580146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580149">return</span>&nbsp;<span class="ident" id="1580156">e</span><br>
<span class="lineno">400</span><span class="op" id="1580158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1580161">func</span>&nbsp;<span class="ident" id="1580166">assertE2E2</span><span class="op" id="1580176">(</span><span class="ident" id="1580177">inter</span>&nbsp;<span class="op" id="1580183">*</span><span class="ident" id="1580184">interfacetype</span><span class="op" id="1580197">,</span>&nbsp;<span class="ident" id="1580199">e</span>&nbsp;<span class="keyword" id="1580201">interface</span><span class="op" id="1580210">{</span><span class="op" id="1580211">}</span><span class="op" id="1580212">)</span>&nbsp;<span class="op" id="1580214">(</span><span class="keyword" id="1580215">interface</span><span class="op" id="1580224">{</span><span class="op" id="1580225">}</span><span class="op" id="1580226">,</span>&nbsp;<span class="builtintype" id="1580228">bool</span><span class="op" id="1580232">)</span>&nbsp;<span class="op" id="1580234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1580237">ep</span>&nbsp;<span class="op" id="1580240">:=</span>&nbsp;<span class="op" id="1580243">(</span><span class="op" id="1580244">*</span><span class="ident" id="1580245">eface</span><span class="op" id="1580250">)</span><span class="op" id="1580251">(</span><span class="ident" id="1580252">unsafe</span><span class="op" id="1580258">.</span><span class="ident" id="1580259">Pointer</span><span class="op" id="1580266">(</span><span class="op" id="1580267">&amp;</span><span class="ident" id="1580268">e</span><span class="op" id="1580269">)</span><span class="op" id="1580270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580273">if</span>&nbsp;<span class="ident" id="1580276">ep</span><span class="op" id="1580278">.</span><span class="ident" id="1580279">_type</span>&nbsp;<span class="op" id="1580285">==</span>&nbsp;<span class="ident" id="1580288">nil</span>&nbsp;<span class="op" id="1580292">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580296">return</span>&nbsp;<span class="ident" id="1580303">nil</span><span class="op" id="1580306">,</span>&nbsp;<span class="builtintype" id="1580308">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1580315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580318">return</span>&nbsp;<span class="ident" id="1580325">e</span><span class="op" id="1580326">,</span>&nbsp;<span class="builtintype" id="1580328">true</span><br>
<span class="lineno"></span><span class="op" id="1580333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="1580336">func</span>&nbsp;<span class="ident" id="1580341">ifacethash</span><span class="op" id="1580351">(</span><span class="ident" id="1580352">i</span>&nbsp;<span class="ident" id="1580354">fInterface</span><span class="op" id="1580364">)</span>&nbsp;<span class="builtintype" id="1580366">uint32</span>&nbsp;<span class="op" id="1580373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1580376">ip</span>&nbsp;<span class="op" id="1580379">:=</span>&nbsp;<span class="op" id="1580382">(</span><span class="op" id="1580383">*</span><span class="ident" id="1580384">iface</span><span class="op" id="1580389">)</span><span class="op" id="1580390">(</span><span class="ident" id="1580391">unsafe</span><span class="op" id="1580397">.</span><span class="ident" id="1580398">Pointer</span><span class="op" id="1580405">(</span><span class="op" id="1580406">&amp;</span><span class="ident" id="1580407">i</span><span class="op" id="1580408">)</span><span class="op" id="1580409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1580412">tab</span>&nbsp;<span class="op" id="1580416">:=</span>&nbsp;<span class="ident" id="1580419">ip</span><span class="op" id="1580421">.</span><span class="ident" id="1580422">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580427">if</span>&nbsp;<span class="ident" id="1580430">tab</span>&nbsp;<span class="op" id="1580434">==</span>&nbsp;<span class="ident" id="1580437">nil</span>&nbsp;<span class="op" id="1580441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580445">return</span>&nbsp;<span class="num" id="1580452">0</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1580455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580458">return</span>&nbsp;<span class="ident" id="1580465">tab</span><span class="op" id="1580468">.</span><span class="ident" id="1580469">_type</span><span class="op" id="1580474">.</span><span class="ident" id="1580475">hash</span><br>
<span class="lineno"></span><span class="op" id="1580480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1580483">func</span>&nbsp;<span class="ident" id="1580488">efacethash</span><span class="op" id="1580498">(</span><span class="ident" id="1580499">e</span>&nbsp;<span class="keyword" id="1580501">interface</span><span class="op" id="1580510">{</span><span class="op" id="1580511">}</span><span class="op" id="1580512">)</span>&nbsp;<span class="builtintype" id="1580514">uint32</span>&nbsp;<span class="op" id="1580521">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1580524">ep</span>&nbsp;<span class="op" id="1580527">:=</span>&nbsp;<span class="op" id="1580530">(</span><span class="op" id="1580531">*</span><span class="ident" id="1580532">eface</span><span class="op" id="1580537">)</span><span class="op" id="1580538">(</span><span class="ident" id="1580539">unsafe</span><span class="op" id="1580545">.</span><span class="ident" id="1580546">Pointer</span><span class="op" id="1580553">(</span><span class="op" id="1580554">&amp;</span><span class="ident" id="1580555">e</span><span class="op" id="1580556">)</span><span class="op" id="1580557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1580560">t</span>&nbsp;<span class="op" id="1580562">:=</span>&nbsp;<span class="ident" id="1580565">ep</span><span class="op" id="1580567">.</span><span class="ident" id="1580568">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580575">if</span>&nbsp;<span class="ident" id="1580578">t</span>&nbsp;<span class="op" id="1580580">==</span>&nbsp;<span class="ident" id="1580583">nil</span>&nbsp;<span class="op" id="1580587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580591">return</span>&nbsp;<span class="num" id="1580598">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1580601">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580604">return</span>&nbsp;<span class="ident" id="1580611">t</span><span class="op" id="1580612">.</span><span class="ident" id="1580613">hash</span><br>
<span class="lineno"></span><span class="op" id="1580618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1580621">func</span>&nbsp;<span class="ident" id="1580626">iterate_itabs</span><span class="op" id="1580639">(</span><span class="ident" id="1580640">fn</span>&nbsp;<span class="keyword" id="1580643">func</span><span class="op" id="1580647">(</span><span class="op" id="1580648">*</span><span class="ident" id="1580649">itab</span><span class="op" id="1580653">)</span><span class="op" id="1580654">)</span>&nbsp;<span class="op" id="1580656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580659">for</span>&nbsp;<span class="ident" id="1580663">_</span><span class="op" id="1580664">,</span>&nbsp;<span class="ident" id="1580666">h</span>&nbsp;<span class="op" id="1580668">:=</span>&nbsp;<span class="keyword" id="1580671">range</span>&nbsp;<span class="op" id="1580677">&amp;</span><span class="ident" id="1580678">hash</span>&nbsp;<span class="op" id="1580683">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580687">for</span>&nbsp;<span class="op" id="1580691">;</span>&nbsp;<span class="ident" id="1580693">h</span>&nbsp;<span class="op" id="1580695">!=</span>&nbsp;<span class="ident" id="1580698">nil</span><span class="op" id="1580701">;</span>&nbsp;<span class="ident" id="1580703">h</span>&nbsp;<span class="op" id="1580705">=</span>&nbsp;<span class="ident" id="1580707">h</span><span class="op" id="1580708">.</span><span class="ident" id="1580709">link</span>&nbsp;<span class="op" id="1580714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1580719">fn</span><span class="op" id="1580721">(</span><span class="ident" id="1580722">h</span><span class="op" id="1580723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1580727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1580730">}</span><br>
<span class="lineno"></span><span class="op" id="1580732">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="1580735">func</span>&nbsp;<span class="ident" id="1580740">ifaceE2I2</span><span class="op" id="1580749">(</span><span class="ident" id="1580750">inter</span>&nbsp;<span class="op" id="1580756">*</span><span class="ident" id="1580757">interfacetype</span><span class="op" id="1580770">,</span>&nbsp;<span class="ident" id="1580772">e</span>&nbsp;<span class="keyword" id="1580774">interface</span><span class="op" id="1580783">{</span><span class="op" id="1580784">}</span><span class="op" id="1580785">,</span>&nbsp;<span class="ident" id="1580787">r</span>&nbsp;<span class="op" id="1580789">*</span><span class="ident" id="1580790">fInterface</span><span class="op" id="1580800">)</span>&nbsp;<span class="op" id="1580802">(</span><span class="ident" id="1580803">ok</span>&nbsp;<span class="builtintype" id="1580806">bool</span><span class="op" id="1580810">)</span>&nbsp;<span class="op" id="1580812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1580815">*</span><span class="ident" id="1580816">r</span><span class="op" id="1580817">,</span>&nbsp;<span class="ident" id="1580819">ok</span>&nbsp;<span class="op" id="1580822">=</span>&nbsp;<span class="ident" id="1580824">assertE2I2</span><span class="op" id="1580834">(</span><span class="ident" id="1580835">inter</span><span class="op" id="1580840">,</span>&nbsp;<span class="ident" id="1580842">e</span><span class="op" id="1580843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1580846">return</span><br>
<span class="lineno"></span><span class="op" id="1580853">}</span>
</div>
</body>
</html>
