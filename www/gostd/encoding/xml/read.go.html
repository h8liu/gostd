<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/xml</h2>
<ul>
<li><a href="/gostd/encoding/xml/atom_test.go.html">atom_test.go</a></li>
<li><a href="/gostd/encoding/xml/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/xml/marshal.go.html">marshal.go</a></li>
<li><a href="/gostd/encoding/xml/marshal_test.go.html">marshal_test.go</a></li>
<li><a href="/gostd/encoding/xml/read.go.html" class="current">read.go</a></li>
<li><a href="/gostd/encoding/xml/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/encoding/xml/typeinfo.go.html">typeinfo.go</a></li>
<li><a href="/gostd/encoding/xml/xml.go.html">xml.go</a></li>
<li><a href="/gostd/encoding/xml/xml_test.go.html">xml_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5837005">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5837061">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5837115">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5837166">package</span>&nbsp;<span class="ident" id="5837174">xml</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5837179">import</span>&nbsp;<span class="op" id="5837186">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5837189">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5837198">&#34;encoding&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5837210">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5837220">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5837227">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5837238">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5837249">&#34;strings&#34;</span><br>
<span class="lineno">15</span><span class="op" id="5837259">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5837262">//&nbsp;BUG(rsc):&nbsp;Mapping&nbsp;between&nbsp;XML&nbsp;elements&nbsp;and&nbsp;data&nbsp;structures&nbsp;is&nbsp;inherently&nbsp;flawed:</span><br>
<span class="lineno"></span><span class="comment" id="5837346">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;is&nbsp;an&nbsp;order-dependent&nbsp;collection&nbsp;of&nbsp;anonymous</span><br>
<span class="lineno"></span><span class="comment" id="5837410">//&nbsp;values,&nbsp;while&nbsp;a&nbsp;data&nbsp;structure&nbsp;is&nbsp;an&nbsp;order-independent&nbsp;collection</span><br>
<span class="lineno">20</span><span class="comment" id="5837479">//&nbsp;of&nbsp;named&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="5837499">//&nbsp;See&nbsp;package&nbsp;json&nbsp;for&nbsp;a&nbsp;textual&nbsp;representation&nbsp;more&nbsp;suitable</span><br>
<span class="lineno"></span><span class="comment" id="5837562">//&nbsp;to&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5837586">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;XML-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result&nbsp;in</span><br>
<span class="lineno">25</span><span class="comment" id="5837652">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v,&nbsp;which&nbsp;must&nbsp;be&nbsp;an&nbsp;arbitrary&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="5837717">//&nbsp;slice,&nbsp;or&nbsp;string.&nbsp;Well-formed&nbsp;data&nbsp;that&nbsp;does&nbsp;not&nbsp;fit&nbsp;into&nbsp;v&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5837783">//&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="5837797">//</span><br>
<span class="lineno"></span><span class="comment" id="5837800">//&nbsp;Because&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;reflect&nbsp;package,&nbsp;it&nbsp;can&nbsp;only&nbsp;assign</span><br>
<span class="lineno">30</span><span class="comment" id="5837866">//&nbsp;to&nbsp;exported&nbsp;(upper&nbsp;case)&nbsp;fields.&nbsp;&nbsp;Unmarshal&nbsp;uses&nbsp;a&nbsp;case-sensitive</span><br>
<span class="lineno"></span><span class="comment" id="5837935">//&nbsp;comparison&nbsp;to&nbsp;match&nbsp;XML&nbsp;element&nbsp;names&nbsp;to&nbsp;tag&nbsp;values&nbsp;and&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="5838001">//&nbsp;field&nbsp;names.</span><br>
<span class="lineno"></span><span class="comment" id="5838017">//</span><br>
<span class="lineno"></span><span class="comment" id="5838020">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;struct&nbsp;using&nbsp;the&nbsp;following&nbsp;rules.</span><br>
<span class="lineno">35</span><span class="comment" id="5838092">//&nbsp;In&nbsp;the&nbsp;rules,&nbsp;the&nbsp;tag&nbsp;of&nbsp;a&nbsp;field&nbsp;refers&nbsp;to&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5838168">//&nbsp;key&nbsp;&#39;xml&#39;&nbsp;in&nbsp;the&nbsp;struct&nbsp;field&#39;s&nbsp;tag&nbsp;(see&nbsp;the&nbsp;example&nbsp;above).</span><br>
<span class="lineno"></span><span class="comment" id="5838232">//</span><br>
<span class="lineno"></span><span class="comment" id="5838235">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;of&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string&nbsp;with&nbsp;tag</span><br>
<span class="lineno"></span><span class="comment" id="5838302">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;,innerxml&#34;,&nbsp;Unmarshal&nbsp;accumulates&nbsp;the&nbsp;raw&nbsp;XML&nbsp;nested&nbsp;inside&nbsp;the</span><br>
<span class="lineno">40</span><span class="comment" id="5838375">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;in&nbsp;that&nbsp;field.&nbsp;&nbsp;The&nbsp;rest&nbsp;of&nbsp;the&nbsp;rules&nbsp;still&nbsp;apply.</span><br>
<span class="lineno"></span><span class="comment" id="5838442">//</span><br>
<span class="lineno"></span><span class="comment" id="5838445">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;named&nbsp;XMLName&nbsp;of&nbsp;type&nbsp;xml.Name,</span><br>
<span class="lineno"></span><span class="comment" id="5838510">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;element&nbsp;name&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5838568">//</span><br>
<span class="lineno">45</span><span class="comment" id="5838571">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XMLName&nbsp;field&nbsp;has&nbsp;an&nbsp;associated&nbsp;tag&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="5838633">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;name&#34;&nbsp;or&nbsp;&#34;namespace-URL&nbsp;name&#34;,&nbsp;the&nbsp;XML&nbsp;element&nbsp;must&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="5838699">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;given&nbsp;name&nbsp;(and,&nbsp;optionally,&nbsp;name&nbsp;space)&nbsp;or&nbsp;else&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5838770">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5838796">//</span><br>
<span class="lineno">50</span><span class="comment" id="5838799">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;has&nbsp;an&nbsp;attribute&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5838863">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;field&nbsp;name&nbsp;with&nbsp;an&nbsp;associated&nbsp;tag&nbsp;containing&nbsp;&#34;,attr&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="5838934">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;explicit&nbsp;name&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&nbsp;tag&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;name,attr&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="5839007">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;attribute&nbsp;value&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5839068">//</span><br>
<span class="lineno">55</span><span class="comment" id="5839071">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;character&nbsp;data,&nbsp;that&nbsp;data&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5839135">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accumulated&nbsp;in&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,chardata&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5839207">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;struct&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="5839264">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such&nbsp;field,&nbsp;the&nbsp;character&nbsp;data&nbsp;is&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="5839332">//</span><br>
<span class="lineno">60</span><span class="comment" id="5839335">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;comments,&nbsp;they&nbsp;are&nbsp;accumulated&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5839404">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,comment&#34;.&nbsp;&nbsp;The&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="5839472">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="5839539">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field,&nbsp;the&nbsp;comments&nbsp;are&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="5839582">//</span><br>
<span class="lineno">65</span><span class="comment" id="5839585">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="5839653">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;prefix&nbsp;of&nbsp;a&nbsp;tag&nbsp;formatted&nbsp;as&nbsp;&#34;a&#34;&nbsp;or&nbsp;&#34;a&gt;b&gt;c&#34;,&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5839720">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;descend&nbsp;into&nbsp;the&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;elements&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5839794">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;given&nbsp;names,&nbsp;and&nbsp;will&nbsp;map&nbsp;the&nbsp;innermost&nbsp;elements&nbsp;to&nbsp;that&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="5839866">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field.&nbsp;A&nbsp;tag&nbsp;starting&nbsp;with&nbsp;&#34;&gt;&#34;&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;one&nbsp;starting</span><br>
<span class="lineno">70</span><span class="comment" id="5839935">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;the&nbsp;field&nbsp;name&nbsp;followed&nbsp;by&nbsp;&#34;&gt;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5839980">//</span><br>
<span class="lineno"></span><span class="comment" id="5839983">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="5840051">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;XMLName&nbsp;tag&nbsp;and&nbsp;the&nbsp;struct&nbsp;field&nbsp;has&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="5840116">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;explicit&nbsp;name&nbsp;tag&nbsp;as&nbsp;per&nbsp;the&nbsp;previous&nbsp;rule,&nbsp;unmarshal&nbsp;maps</span><br>
<span class="lineno">75</span><span class="comment" id="5840183">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5840229">//</span><br>
<span class="lineno"></span><span class="comment" id="5840232">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5840302">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;without&nbsp;any&nbsp;mode&nbsp;flags&nbsp;(&#34;,attr&#34;,&nbsp;&#34;,chardata&#34;,&nbsp;etc),&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5840378">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno">80</span><span class="comment" id="5840429">//</span><br>
<span class="lineno"></span><span class="comment" id="5840432">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;that&nbsp;hasn&#39;t&nbsp;matched&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="5840505">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;above&nbsp;rules&nbsp;and&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,any&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="5840576">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unmarshal&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5840637">//</span><br>
<span class="lineno">85</span><span class="comment" id="5840640">//&nbsp;&nbsp;&nbsp;*&nbsp;An&nbsp;anonymous&nbsp;struct&nbsp;field&nbsp;is&nbsp;handled&nbsp;as&nbsp;if&nbsp;the&nbsp;fields&nbsp;of&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="5840708">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;were&nbsp;part&nbsp;of&nbsp;the&nbsp;outer&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="5840753">//</span><br>
<span class="lineno"></span><span class="comment" id="5840756">//&nbsp;&nbsp;&nbsp;*&nbsp;A&nbsp;struct&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;-&#34;&nbsp;is&nbsp;never&nbsp;unmarshalled&nbsp;into.</span><br>
<span class="lineno"></span><span class="comment" id="5840819">//</span><br>
<span class="lineno">90</span><span class="comment" id="5840822">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5840891">//&nbsp;concatenation&nbsp;of&nbsp;that&nbsp;element&#39;s&nbsp;character&nbsp;data&nbsp;in&nbsp;the&nbsp;string&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="5840958">//&nbsp;[]byte.&nbsp;The&nbsp;saved&nbsp;[]byte&nbsp;is&nbsp;never&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="5841000">//</span><br>
<span class="lineno"></span><span class="comment" id="5841003">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving</span><br>
<span class="lineno">95</span><span class="comment" id="5841072">//&nbsp;the&nbsp;value&nbsp;in&nbsp;the&nbsp;string&nbsp;or&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="5841109">//</span><br>
<span class="lineno"></span><span class="comment" id="5841112">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;slice&nbsp;by&nbsp;extending&nbsp;the&nbsp;length&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5841183">//&nbsp;the&nbsp;slice&nbsp;and&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;the&nbsp;newly&nbsp;created&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5841248">//</span><br>
<span class="lineno">100</span><span class="comment" id="5841251">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;bool&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5841316">//&nbsp;setting&nbsp;it&nbsp;to&nbsp;the&nbsp;boolean&nbsp;value&nbsp;represented&nbsp;by&nbsp;the&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="5841378">//</span><br>
<span class="lineno"></span><span class="comment" id="5841381">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;an&nbsp;integer&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="5841450">//&nbsp;floating-point&nbsp;field&nbsp;by&nbsp;setting&nbsp;the&nbsp;field&nbsp;to&nbsp;the&nbsp;result&nbsp;of</span><br>
<span class="lineno">105</span><span class="comment" id="5841512">//&nbsp;interpreting&nbsp;the&nbsp;string&nbsp;value&nbsp;in&nbsp;decimal.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;check&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="5841580">//&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="5841593">//</span><br>
<span class="lineno"></span><span class="comment" id="5841596">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;an&nbsp;xml.Name&nbsp;by&nbsp;recording&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5841661">//&nbsp;element&nbsp;name.</span><br>
<span class="lineno">110</span><span class="comment" id="5841678">//</span><br>
<span class="lineno"></span><span class="comment" id="5841681">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;pointer&nbsp;by&nbsp;setting&nbsp;the&nbsp;pointer</span><br>
<span class="lineno"></span><span class="comment" id="5841750">//&nbsp;to&nbsp;a&nbsp;freshly&nbsp;allocated&nbsp;value&nbsp;and&nbsp;then&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;that&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5841826">//</span><br>
<span class="lineno"></span><span class="keyword" id="5841829">func</span>&nbsp;<span class="ident" id="5841834">Unmarshal</span><span class="op" id="5841843">(</span><span class="ident" id="5841844">data</span>&nbsp;<span class="op" id="5841849">[</span><span class="op" id="5841850">]</span><span class="builtintype" id="5841851">byte</span><span class="op" id="5841855">,</span>&nbsp;<span class="ident" id="5841857">v</span>&nbsp;<span class="keyword" id="5841859">interface</span><span class="op" id="5841868">{</span><span class="op" id="5841869">}</span><span class="op" id="5841870">)</span>&nbsp;<span class="builtintype" id="5841872">error</span>&nbsp;<span class="op" id="5841878">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5841881">return</span>&nbsp;<span class="ident" id="5841888">NewDecoder</span><span class="op" id="5841898">(</span><span class="ident" id="5841899">bytes</span><span class="op" id="5841904">.</span><span class="ident" id="5841905">NewReader</span><span class="op" id="5841914">(</span><span class="ident" id="5841915">data</span><span class="op" id="5841919">)</span><span class="op" id="5841920">)</span><span class="op" id="5841921">.</span><span class="ident" id="5841922">Decode</span><span class="op" id="5841928">(</span><span class="ident" id="5841929">v</span><span class="op" id="5841930">)</span><br>
<span class="lineno"></span><span class="op" id="5841932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5841935">//&nbsp;Decode&nbsp;works&nbsp;like&nbsp;xml.Unmarshal,&nbsp;except&nbsp;it&nbsp;reads&nbsp;the&nbsp;decoder</span><br>
<span class="lineno"></span><span class="comment" id="5841999">//&nbsp;stream&nbsp;to&nbsp;find&nbsp;the&nbsp;start&nbsp;element.</span><br>
<span class="lineno">120</span><span class="keyword" id="5842036">func</span>&nbsp;<span class="op" id="5842041">(</span><span class="ident" id="5842042">d</span>&nbsp;<span class="op" id="5842044">*</span><span class="ident" id="5842045">Decoder</span><span class="op" id="5842052">)</span>&nbsp;<span class="ident" id="5842054">Decode</span><span class="op" id="5842060">(</span><span class="ident" id="5842061">v</span>&nbsp;<span class="keyword" id="5842063">interface</span><span class="op" id="5842072">{</span><span class="op" id="5842073">}</span><span class="op" id="5842074">)</span>&nbsp;<span class="builtintype" id="5842076">error</span>&nbsp;<span class="op" id="5842082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842085">return</span>&nbsp;<span class="ident" id="5842092">d</span><span class="op" id="5842093">.</span><span class="ident" id="5842094">DecodeElement</span><span class="op" id="5842107">(</span><span class="ident" id="5842108">v</span><span class="op" id="5842109">,</span>&nbsp;<span class="ident" id="5842111">nil</span><span class="op" id="5842114">)</span><br>
<span class="lineno"></span><span class="op" id="5842116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5842119">//&nbsp;DecodeElement&nbsp;works&nbsp;like&nbsp;xml.Unmarshal&nbsp;except&nbsp;that&nbsp;it&nbsp;takes</span><br>
<span class="lineno">125</span><span class="comment" id="5842182">//&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;start&nbsp;XML&nbsp;element&nbsp;to&nbsp;decode&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5842238">//&nbsp;It&nbsp;is&nbsp;useful&nbsp;when&nbsp;a&nbsp;client&nbsp;reads&nbsp;some&nbsp;raw&nbsp;XML&nbsp;tokens&nbsp;itself</span><br>
<span class="lineno"></span><span class="comment" id="5842301">//&nbsp;but&nbsp;also&nbsp;wants&nbsp;to&nbsp;defer&nbsp;to&nbsp;Unmarshal&nbsp;for&nbsp;some&nbsp;elements.</span><br>
<span class="lineno"></span><span class="keyword" id="5842360">func</span>&nbsp;<span class="op" id="5842365">(</span><span class="ident" id="5842366">d</span>&nbsp;<span class="op" id="5842368">*</span><span class="ident" id="5842369">Decoder</span><span class="op" id="5842376">)</span>&nbsp;<span class="ident" id="5842378">DecodeElement</span><span class="op" id="5842391">(</span><span class="ident" id="5842392">v</span>&nbsp;<span class="keyword" id="5842394">interface</span><span class="op" id="5842403">{</span><span class="op" id="5842404">}</span><span class="op" id="5842405">,</span>&nbsp;<span class="ident" id="5842407">start</span>&nbsp;<span class="op" id="5842413">*</span><span class="ident" id="5842414">StartElement</span><span class="op" id="5842426">)</span>&nbsp;<span class="builtintype" id="5842428">error</span>&nbsp;<span class="op" id="5842434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5842437">val</span>&nbsp;<span class="op" id="5842441">:=</span>&nbsp;<span class="ident" id="5842444">reflect</span><span class="op" id="5842451">.</span><span class="ident" id="5842452">ValueOf</span><span class="op" id="5842459">(</span><span class="ident" id="5842460">v</span><span class="op" id="5842461">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842464">if</span>&nbsp;<span class="ident" id="5842467">val</span><span class="op" id="5842470">.</span><span class="ident" id="5842471">Kind</span><span class="op" id="5842475">(</span><span class="op" id="5842476">)</span>&nbsp;<span class="op" id="5842478">!=</span>&nbsp;<span class="ident" id="5842481">reflect</span><span class="op" id="5842488">.</span><span class="ident" id="5842489">Ptr</span>&nbsp;<span class="op" id="5842493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842497">return</span>&nbsp;<span class="ident" id="5842504">errors</span><span class="op" id="5842510">.</span><span class="ident" id="5842511">New</span><span class="op" id="5842514">(</span><span class="string" id="5842515">&#34;non-pointer&nbsp;passed&nbsp;to&nbsp;Unmarshal&#34;</span><span class="op" id="5842548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5842551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842554">return</span>&nbsp;<span class="ident" id="5842561">d</span><span class="op" id="5842562">.</span><span class="ident" id="5842563">unmarshal</span><span class="op" id="5842572">(</span><span class="ident" id="5842573">val</span><span class="op" id="5842576">.</span><span class="ident" id="5842577">Elem</span><span class="op" id="5842581">(</span><span class="op" id="5842582">)</span><span class="op" id="5842583">,</span>&nbsp;<span class="ident" id="5842585">start</span><span class="op" id="5842590">)</span><br>
<span class="lineno"></span><span class="op" id="5842592">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="5842595">//&nbsp;An&nbsp;UnmarshalError&nbsp;represents&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;unmarshalling&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="5842666">type</span>&nbsp;<span class="ident" id="5842671">UnmarshalError</span>&nbsp;<span class="builtintype" id="5842686">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5842694">func</span>&nbsp;<span class="op" id="5842699">(</span><span class="ident" id="5842700">e</span>&nbsp;<span class="ident" id="5842702">UnmarshalError</span><span class="op" id="5842716">)</span>&nbsp;<span class="ident" id="5842718">Error</span><span class="op" id="5842723">(</span><span class="op" id="5842724">)</span>&nbsp;<span class="builtintype" id="5842726">string</span>&nbsp;<span class="op" id="5842733">{</span>&nbsp;<span class="keyword" id="5842735">return</span>&nbsp;<span class="builtintype" id="5842742">string</span><span class="op" id="5842748">(</span><span class="ident" id="5842749">e</span><span class="op" id="5842750">)</span>&nbsp;<span class="op" id="5842752">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="5842755">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5842829">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="5842874">//</span><br>
<span class="lineno"></span><span class="comment" id="5842877">//&nbsp;UnmarshalXML&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;element</span><br>
<span class="lineno">145</span><span class="comment" id="5842922">//&nbsp;beginning&nbsp;with&nbsp;the&nbsp;given&nbsp;start&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="5842965">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5843030">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5843053">//&nbsp;UnmarshalXML&nbsp;must&nbsp;consume&nbsp;exactly&nbsp;one&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="5843107">//&nbsp;One&nbsp;common&nbsp;implementation&nbsp;strategy&nbsp;is&nbsp;to&nbsp;unmarshal&nbsp;into</span><br>
<span class="lineno">150</span><span class="comment" id="5843166">//&nbsp;a&nbsp;separate&nbsp;value&nbsp;with&nbsp;a&nbsp;layout&nbsp;matching&nbsp;the&nbsp;expected&nbsp;XML</span><br>
<span class="lineno"></span><span class="comment" id="5843226">//&nbsp;using&nbsp;d.DecodeElement,&nbsp;&nbsp;and&nbsp;then&nbsp;to&nbsp;copy&nbsp;the&nbsp;data&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="5843284">//&nbsp;that&nbsp;value&nbsp;into&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="5843317">//&nbsp;Another&nbsp;common&nbsp;strategy&nbsp;is&nbsp;to&nbsp;use&nbsp;d.Token&nbsp;to&nbsp;process&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5843377">//&nbsp;XML&nbsp;object&nbsp;one&nbsp;token&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">155</span><span class="comment" id="5843412">//&nbsp;UnmarshalXML&nbsp;may&nbsp;not&nbsp;use&nbsp;d.RawToken.</span><br>
<span class="lineno"></span><span class="keyword" id="5843452">type</span>&nbsp;<span class="ident" id="5843457">Unmarshaler</span>&nbsp;<span class="keyword" id="5843469">interface</span>&nbsp;<span class="op" id="5843479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843482">UnmarshalXML</span><span class="op" id="5843494">(</span><span class="ident" id="5843495">d</span>&nbsp;<span class="op" id="5843497">*</span><span class="ident" id="5843498">Decoder</span><span class="op" id="5843505">,</span>&nbsp;<span class="ident" id="5843507">start</span>&nbsp;<span class="ident" id="5843513">StartElement</span><span class="op" id="5843525">)</span>&nbsp;<span class="builtintype" id="5843527">error</span><br>
<span class="lineno"></span><span class="op" id="5843533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="5843536">//&nbsp;UnmarshalerAttr&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5843614">//&nbsp;an&nbsp;XML&nbsp;attribute&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="5843661">//</span><br>
<span class="lineno"></span><span class="comment" id="5843664">//&nbsp;UnmarshalXMLAttr&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute.</span><br>
<span class="lineno"></span><span class="comment" id="5843716">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno">165</span><span class="comment" id="5843781">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5843804">//&nbsp;UnmarshalXMLAttr&nbsp;is&nbsp;used&nbsp;only&nbsp;for&nbsp;struct&nbsp;fields&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5843864">//&nbsp;&#34;attr&#34;&nbsp;option&nbsp;in&nbsp;the&nbsp;field&nbsp;tag.</span><br>
<span class="lineno"></span><span class="keyword" id="5843899">type</span>&nbsp;<span class="ident" id="5843904">UnmarshalerAttr</span>&nbsp;<span class="keyword" id="5843920">interface</span>&nbsp;<span class="op" id="5843930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843933">UnmarshalXMLAttr</span><span class="op" id="5843949">(</span><span class="ident" id="5843950">attr</span>&nbsp;<span class="ident" id="5843955">Attr</span><span class="op" id="5843959">)</span>&nbsp;<span class="builtintype" id="5843961">error</span><br>
<span class="lineno">170</span><span class="op" id="5843967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5843970">//&nbsp;receiverType&nbsp;returns&nbsp;the&nbsp;receiver&nbsp;type&nbsp;to&nbsp;use&nbsp;in&nbsp;an&nbsp;expression&nbsp;like&nbsp;&#34;%s.MethodName&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="5844058">func</span>&nbsp;<span class="ident" id="5844063">receiverType</span><span class="op" id="5844075">(</span><span class="ident" id="5844076">val</span>&nbsp;<span class="keyword" id="5844080">interface</span><span class="op" id="5844089">{</span><span class="op" id="5844090">}</span><span class="op" id="5844091">)</span>&nbsp;<span class="builtintype" id="5844093">string</span>&nbsp;<span class="op" id="5844100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844103">t</span>&nbsp;<span class="op" id="5844105">:=</span>&nbsp;<span class="ident" id="5844108">reflect</span><span class="op" id="5844115">.</span><span class="ident" id="5844116">TypeOf</span><span class="op" id="5844122">(</span><span class="ident" id="5844123">val</span><span class="op" id="5844126">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844129">if</span>&nbsp;<span class="ident" id="5844132">t</span><span class="op" id="5844133">.</span><span class="ident" id="5844134">Name</span><span class="op" id="5844138">(</span><span class="op" id="5844139">)</span>&nbsp;<span class="op" id="5844141">!=</span>&nbsp;<span class="string" id="5844144">&#34;&#34;</span>&nbsp;<span class="op" id="5844147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844151">return</span>&nbsp;<span class="ident" id="5844158">t</span><span class="op" id="5844159">.</span><span class="ident" id="5844160">String</span><span class="op" id="5844166">(</span><span class="op" id="5844167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5844170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844173">return</span>&nbsp;<span class="string" id="5844180">&#34;(&#34;</span>&nbsp;<span class="op" id="5844184">+</span>&nbsp;<span class="ident" id="5844186">t</span><span class="op" id="5844187">.</span><span class="ident" id="5844188">String</span><span class="op" id="5844194">(</span><span class="op" id="5844195">)</span>&nbsp;<span class="op" id="5844197">+</span>&nbsp;<span class="string" id="5844199">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="5844203">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="comment" id="5844206">//&nbsp;unmarshalInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="5844270">//&nbsp;start&nbsp;is&nbsp;the&nbsp;opening&nbsp;tag&nbsp;of&nbsp;the&nbsp;element.</span><br>
<span class="lineno"></span><span class="keyword" id="5844314">func</span>&nbsp;<span class="op" id="5844319">(</span><span class="ident" id="5844320">p</span>&nbsp;<span class="op" id="5844322">*</span><span class="ident" id="5844323">Decoder</span><span class="op" id="5844330">)</span>&nbsp;<span class="ident" id="5844332">unmarshalInterface</span><span class="op" id="5844350">(</span><span class="ident" id="5844351">val</span>&nbsp;<span class="ident" id="5844355">Unmarshaler</span><span class="op" id="5844366">,</span>&nbsp;<span class="ident" id="5844368">start</span>&nbsp;<span class="op" id="5844374">*</span><span class="ident" id="5844375">StartElement</span><span class="op" id="5844387">)</span>&nbsp;<span class="builtintype" id="5844389">error</span>&nbsp;<span class="op" id="5844395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5844398">//&nbsp;Record&nbsp;that&nbsp;decoder&nbsp;must&nbsp;stop&nbsp;at&nbsp;end&nbsp;tag&nbsp;corresponding&nbsp;to&nbsp;start.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844467">p</span><span class="op" id="5844468">.</span><span class="ident" id="5844469">pushEOF</span><span class="op" id="5844476">(</span><span class="op" id="5844477">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844481">p</span><span class="op" id="5844482">.</span><span class="ident" id="5844483">unmarshalDepth</span><span class="op" id="5844497">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844501">err</span>&nbsp;<span class="op" id="5844505">:=</span>&nbsp;<span class="ident" id="5844508">val</span><span class="op" id="5844511">.</span><span class="ident" id="5844512">UnmarshalXML</span><span class="op" id="5844524">(</span><span class="ident" id="5844525">p</span><span class="op" id="5844526">,</span>&nbsp;<span class="op" id="5844528">*</span><span class="ident" id="5844529">start</span><span class="op" id="5844534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844537">p</span><span class="op" id="5844538">.</span><span class="ident" id="5844539">unmarshalDepth</span><span class="op" id="5844553">--</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844557">if</span>&nbsp;<span class="ident" id="5844560">err</span>&nbsp;<span class="op" id="5844564">!=</span>&nbsp;<span class="ident" id="5844567">nil</span>&nbsp;<span class="op" id="5844571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844575">p</span><span class="op" id="5844576">.</span><span class="ident" id="5844577">popEOF</span><span class="op" id="5844583">(</span><span class="op" id="5844584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844588">return</span>&nbsp;<span class="ident" id="5844595">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5844600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844604">if</span>&nbsp;<span class="op" id="5844607">!</span><span class="ident" id="5844608">p</span><span class="op" id="5844609">.</span><span class="ident" id="5844610">popEOF</span><span class="op" id="5844616">(</span><span class="op" id="5844617">)</span>&nbsp;<span class="op" id="5844619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844623">return</span>&nbsp;<span class="ident" id="5844630">fmt</span><span class="op" id="5844633">.</span><span class="ident" id="5844634">Errorf</span><span class="op" id="5844640">(</span><span class="string" id="5844641">&#34;xml:&nbsp;%s.UnmarshalXML&nbsp;did&nbsp;not&nbsp;consume&nbsp;entire&nbsp;&lt;%s&gt;&nbsp;element&#34;</span><span class="op" id="5844699">,</span>&nbsp;<span class="ident" id="5844701">receiverType</span><span class="op" id="5844713">(</span><span class="ident" id="5844714">val</span><span class="op" id="5844717">)</span><span class="op" id="5844718">,</span>&nbsp;<span class="ident" id="5844720">start</span><span class="op" id="5844725">.</span><span class="ident" id="5844726">Name</span><span class="op" id="5844730">.</span><span class="ident" id="5844731">Local</span><span class="op" id="5844736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5844739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844743">return</span>&nbsp;<span class="ident" id="5844750">nil</span><br>
<span class="lineno">200</span><span class="op" id="5844754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5844757">//&nbsp;unmarshalTextInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="5844825">//&nbsp;The&nbsp;chardata&nbsp;contained&nbsp;in&nbsp;the&nbsp;element&nbsp;(but&nbsp;not&nbsp;its&nbsp;children)</span><br>
<span class="lineno"></span><span class="comment" id="5844889">//&nbsp;is&nbsp;passed&nbsp;to&nbsp;the&nbsp;text&nbsp;unmarshaler.</span><br>
<span class="lineno">205</span><span class="keyword" id="5844927">func</span>&nbsp;<span class="op" id="5844932">(</span><span class="ident" id="5844933">p</span>&nbsp;<span class="op" id="5844935">*</span><span class="ident" id="5844936">Decoder</span><span class="op" id="5844943">)</span>&nbsp;<span class="ident" id="5844945">unmarshalTextInterface</span><span class="op" id="5844967">(</span><span class="ident" id="5844968">val</span>&nbsp;<span class="ident" id="5844972">encoding</span><span class="op" id="5844980">.</span><span class="ident" id="5844981">TextUnmarshaler</span><span class="op" id="5844996">,</span>&nbsp;<span class="ident" id="5844998">start</span>&nbsp;<span class="op" id="5845004">*</span><span class="ident" id="5845005">StartElement</span><span class="op" id="5845017">)</span>&nbsp;<span class="builtintype" id="5845019">error</span>&nbsp;<span class="op" id="5845025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845028">var</span>&nbsp;<span class="ident" id="5845032">buf</span>&nbsp;<span class="op" id="5845036">[</span><span class="op" id="5845037">]</span><span class="builtintype" id="5845038">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845044">depth</span>&nbsp;<span class="op" id="5845050">:=</span>&nbsp;<span class="num" id="5845053">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845056">for</span>&nbsp;<span class="ident" id="5845060">depth</span>&nbsp;<span class="op" id="5845066">&gt;</span>&nbsp;<span class="num" id="5845068">0</span>&nbsp;<span class="op" id="5845070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845074">t</span><span class="op" id="5845075">,</span>&nbsp;<span class="ident" id="5845077">err</span>&nbsp;<span class="op" id="5845081">:=</span>&nbsp;<span class="ident" id="5845084">p</span><span class="op" id="5845085">.</span><span class="ident" id="5845086">Token</span><span class="op" id="5845091">(</span><span class="op" id="5845092">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845096">if</span>&nbsp;<span class="ident" id="5845099">err</span>&nbsp;<span class="op" id="5845103">!=</span>&nbsp;<span class="ident" id="5845106">nil</span>&nbsp;<span class="op" id="5845110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845115">return</span>&nbsp;<span class="ident" id="5845122">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5845128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845132">switch</span>&nbsp;<span class="ident" id="5845139">t</span>&nbsp;<span class="op" id="5845141">:=</span>&nbsp;<span class="ident" id="5845144">t</span><span class="op" id="5845145">.</span><span class="op" id="5845146">(</span><span class="keyword" id="5845147">type</span><span class="op" id="5845151">)</span>&nbsp;<span class="op" id="5845153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845157">case</span>&nbsp;<span class="ident" id="5845162">CharData</span><span class="op" id="5845170">:</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845175">if</span>&nbsp;<span class="ident" id="5845178">depth</span>&nbsp;<span class="op" id="5845184">==</span>&nbsp;<span class="num" id="5845187">1</span>&nbsp;<span class="op" id="5845189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845195">buf</span>&nbsp;<span class="op" id="5845199">=</span>&nbsp;<span class="builtinfunc" id="5845201">append</span><span class="op" id="5845207">(</span><span class="ident" id="5845208">buf</span><span class="op" id="5845211">,</span>&nbsp;<span class="ident" id="5845213">t</span><span class="op" id="5845214">...</span><span class="op" id="5845217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5845222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845226">case</span>&nbsp;<span class="ident" id="5845231">StartElement</span><span class="op" id="5845243">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845248">depth</span><span class="op" id="5845253">++</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845258">case</span>&nbsp;<span class="ident" id="5845263">EndElement</span><span class="op" id="5845273">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845278">depth</span><span class="op" id="5845283">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5845288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5845291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845294">return</span>&nbsp;<span class="ident" id="5845301">val</span><span class="op" id="5845304">.</span><span class="ident" id="5845305">UnmarshalText</span><span class="op" id="5845318">(</span><span class="ident" id="5845319">buf</span><span class="op" id="5845322">)</span><br>
<span class="lineno">225</span><span class="op" id="5845324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5845327">//&nbsp;unmarshalAttr&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="5845388">func</span>&nbsp;<span class="op" id="5845393">(</span><span class="ident" id="5845394">p</span>&nbsp;<span class="op" id="5845396">*</span><span class="ident" id="5845397">Decoder</span><span class="op" id="5845404">)</span>&nbsp;<span class="ident" id="5845406">unmarshalAttr</span><span class="op" id="5845419">(</span><span class="ident" id="5845420">val</span>&nbsp;<span class="ident" id="5845424">reflect</span><span class="op" id="5845431">.</span><span class="ident" id="5845432">Value</span><span class="op" id="5845437">,</span>&nbsp;<span class="ident" id="5845439">attr</span>&nbsp;<span class="ident" id="5845444">Attr</span><span class="op" id="5845448">)</span>&nbsp;<span class="builtintype" id="5845450">error</span>&nbsp;<span class="op" id="5845456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845459">if</span>&nbsp;<span class="ident" id="5845462">val</span><span class="op" id="5845465">.</span><span class="ident" id="5845466">Kind</span><span class="op" id="5845470">(</span><span class="op" id="5845471">)</span>&nbsp;<span class="op" id="5845473">==</span>&nbsp;<span class="ident" id="5845476">reflect</span><span class="op" id="5845483">.</span><span class="ident" id="5845484">Ptr</span>&nbsp;<span class="op" id="5845488">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845492">if</span>&nbsp;<span class="ident" id="5845495">val</span><span class="op" id="5845498">.</span><span class="ident" id="5845499">IsNil</span><span class="op" id="5845504">(</span><span class="op" id="5845505">)</span>&nbsp;<span class="op" id="5845507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845512">val</span><span class="op" id="5845515">.</span><span class="ident" id="5845516">Set</span><span class="op" id="5845519">(</span><span class="ident" id="5845520">reflect</span><span class="op" id="5845527">.</span><span class="ident" id="5845528">New</span><span class="op" id="5845531">(</span><span class="ident" id="5845532">val</span><span class="op" id="5845535">.</span><span class="ident" id="5845536">Type</span><span class="op" id="5845540">(</span><span class="op" id="5845541">)</span><span class="op" id="5845542">.</span><span class="ident" id="5845543">Elem</span><span class="op" id="5845547">(</span><span class="op" id="5845548">)</span><span class="op" id="5845549">)</span><span class="op" id="5845550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5845554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845558">val</span>&nbsp;<span class="op" id="5845562">=</span>&nbsp;<span class="ident" id="5845564">val</span><span class="op" id="5845567">.</span><span class="ident" id="5845568">Elem</span><span class="op" id="5845572">(</span><span class="op" id="5845573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5845576">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845580">if</span>&nbsp;<span class="ident" id="5845583">val</span><span class="op" id="5845586">.</span><span class="ident" id="5845587">CanInterface</span><span class="op" id="5845599">(</span><span class="op" id="5845600">)</span>&nbsp;<span class="op" id="5845602">&amp;&amp;</span>&nbsp;<span class="ident" id="5845605">val</span><span class="op" id="5845608">.</span><span class="ident" id="5845609">Type</span><span class="op" id="5845613">(</span><span class="op" id="5845614">)</span><span class="op" id="5845615">.</span><span class="ident" id="5845616">Implements</span><span class="op" id="5845626">(</span><span class="ident" id="5845627">unmarshalerAttrType</span><span class="op" id="5845646">)</span>&nbsp;<span class="op" id="5845648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5845652">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5845709">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845773">return</span>&nbsp;<span class="ident" id="5845780">val</span><span class="op" id="5845783">.</span><span class="ident" id="5845784">Interface</span><span class="op" id="5845793">(</span><span class="op" id="5845794">)</span><span class="op" id="5845795">.</span><span class="op" id="5845796">(</span><span class="ident" id="5845797">UnmarshalerAttr</span><span class="op" id="5845812">)</span><span class="op" id="5845813">.</span><span class="ident" id="5845814">UnmarshalXMLAttr</span><span class="op" id="5845830">(</span><span class="ident" id="5845831">attr</span><span class="op" id="5845835">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5845838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845841">if</span>&nbsp;<span class="ident" id="5845844">val</span><span class="op" id="5845847">.</span><span class="ident" id="5845848">CanAddr</span><span class="op" id="5845855">(</span><span class="op" id="5845856">)</span>&nbsp;<span class="op" id="5845858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845862">pv</span>&nbsp;<span class="op" id="5845865">:=</span>&nbsp;<span class="ident" id="5845868">val</span><span class="op" id="5845871">.</span><span class="ident" id="5845872">Addr</span><span class="op" id="5845876">(</span><span class="op" id="5845877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845881">if</span>&nbsp;<span class="ident" id="5845884">pv</span><span class="op" id="5845886">.</span><span class="ident" id="5845887">CanInterface</span><span class="op" id="5845899">(</span><span class="op" id="5845900">)</span>&nbsp;<span class="op" id="5845902">&amp;&amp;</span>&nbsp;<span class="ident" id="5845905">pv</span><span class="op" id="5845907">.</span><span class="ident" id="5845908">Type</span><span class="op" id="5845912">(</span><span class="op" id="5845913">)</span><span class="op" id="5845914">.</span><span class="ident" id="5845915">Implements</span><span class="op" id="5845925">(</span><span class="ident" id="5845926">unmarshalerAttrType</span><span class="op" id="5845945">)</span>&nbsp;<span class="op" id="5845947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845952">return</span>&nbsp;<span class="ident" id="5845959">pv</span><span class="op" id="5845961">.</span><span class="ident" id="5845962">Interface</span><span class="op" id="5845971">(</span><span class="op" id="5845972">)</span><span class="op" id="5845973">.</span><span class="op" id="5845974">(</span><span class="ident" id="5845975">UnmarshalerAttr</span><span class="op" id="5845990">)</span><span class="op" id="5845991">.</span><span class="ident" id="5845992">UnmarshalXMLAttr</span><span class="op" id="5846008">(</span><span class="ident" id="5846009">attr</span><span class="op" id="5846013">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5846024">//&nbsp;Not&nbsp;an&nbsp;UnmarshalerAttr;&nbsp;try&nbsp;encoding.TextUnmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846082">if</span>&nbsp;<span class="ident" id="5846085">val</span><span class="op" id="5846088">.</span><span class="ident" id="5846089">CanInterface</span><span class="op" id="5846101">(</span><span class="op" id="5846102">)</span>&nbsp;<span class="op" id="5846104">&amp;&amp;</span>&nbsp;<span class="ident" id="5846107">val</span><span class="op" id="5846110">.</span><span class="ident" id="5846111">Type</span><span class="op" id="5846115">(</span><span class="op" id="5846116">)</span><span class="op" id="5846117">.</span><span class="ident" id="5846118">Implements</span><span class="op" id="5846128">(</span><span class="ident" id="5846129">textUnmarshalerType</span><span class="op" id="5846148">)</span>&nbsp;<span class="op" id="5846150">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5846154">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5846211">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846275">return</span>&nbsp;<span class="ident" id="5846282">val</span><span class="op" id="5846285">.</span><span class="ident" id="5846286">Interface</span><span class="op" id="5846295">(</span><span class="op" id="5846296">)</span><span class="op" id="5846297">.</span><span class="op" id="5846298">(</span><span class="ident" id="5846299">encoding</span><span class="op" id="5846307">.</span><span class="ident" id="5846308">TextUnmarshaler</span><span class="op" id="5846323">)</span><span class="op" id="5846324">.</span><span class="ident" id="5846325">UnmarshalText</span><span class="op" id="5846338">(</span><span class="op" id="5846339">[</span><span class="op" id="5846340">]</span><span class="builtintype" id="5846341">byte</span><span class="op" id="5846345">(</span><span class="ident" id="5846346">attr</span><span class="op" id="5846350">.</span><span class="ident" id="5846351">Value</span><span class="op" id="5846356">)</span><span class="op" id="5846357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846363">if</span>&nbsp;<span class="ident" id="5846366">val</span><span class="op" id="5846369">.</span><span class="ident" id="5846370">CanAddr</span><span class="op" id="5846377">(</span><span class="op" id="5846378">)</span>&nbsp;<span class="op" id="5846380">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846384">pv</span>&nbsp;<span class="op" id="5846387">:=</span>&nbsp;<span class="ident" id="5846390">val</span><span class="op" id="5846393">.</span><span class="ident" id="5846394">Addr</span><span class="op" id="5846398">(</span><span class="op" id="5846399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846403">if</span>&nbsp;<span class="ident" id="5846406">pv</span><span class="op" id="5846408">.</span><span class="ident" id="5846409">CanInterface</span><span class="op" id="5846421">(</span><span class="op" id="5846422">)</span>&nbsp;<span class="op" id="5846424">&amp;&amp;</span>&nbsp;<span class="ident" id="5846427">pv</span><span class="op" id="5846429">.</span><span class="ident" id="5846430">Type</span><span class="op" id="5846434">(</span><span class="op" id="5846435">)</span><span class="op" id="5846436">.</span><span class="ident" id="5846437">Implements</span><span class="op" id="5846447">(</span><span class="ident" id="5846448">textUnmarshalerType</span><span class="op" id="5846467">)</span>&nbsp;<span class="op" id="5846469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846474">return</span>&nbsp;<span class="ident" id="5846481">pv</span><span class="op" id="5846483">.</span><span class="ident" id="5846484">Interface</span><span class="op" id="5846493">(</span><span class="op" id="5846494">)</span><span class="op" id="5846495">.</span><span class="op" id="5846496">(</span><span class="ident" id="5846497">encoding</span><span class="op" id="5846505">.</span><span class="ident" id="5846506">TextUnmarshaler</span><span class="op" id="5846521">)</span><span class="op" id="5846522">.</span><span class="ident" id="5846523">UnmarshalText</span><span class="op" id="5846536">(</span><span class="op" id="5846537">[</span><span class="op" id="5846538">]</span><span class="builtintype" id="5846539">byte</span><span class="op" id="5846543">(</span><span class="ident" id="5846544">attr</span><span class="op" id="5846548">.</span><span class="ident" id="5846549">Value</span><span class="op" id="5846554">)</span><span class="op" id="5846555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846562">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846566">copyValue</span><span class="op" id="5846575">(</span><span class="ident" id="5846576">val</span><span class="op" id="5846579">,</span>&nbsp;<span class="op" id="5846581">[</span><span class="op" id="5846582">]</span><span class="builtintype" id="5846583">byte</span><span class="op" id="5846587">(</span><span class="ident" id="5846588">attr</span><span class="op" id="5846592">.</span><span class="ident" id="5846593">Value</span><span class="op" id="5846598">)</span><span class="op" id="5846599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846602">return</span>&nbsp;<span class="ident" id="5846609">nil</span><br>
<span class="lineno"></span><span class="op" id="5846613">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="5846616">var</span>&nbsp;<span class="op" id="5846620">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846623">unmarshalerType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846643">=</span>&nbsp;<span class="ident" id="5846645">reflect</span><span class="op" id="5846652">.</span><span class="ident" id="5846653">TypeOf</span><span class="op" id="5846659">(</span><span class="op" id="5846660">(</span><span class="op" id="5846661">*</span><span class="ident" id="5846662">Unmarshaler</span><span class="op" id="5846673">)</span><span class="op" id="5846674">(</span><span class="ident" id="5846675">nil</span><span class="op" id="5846678">)</span><span class="op" id="5846679">)</span><span class="op" id="5846680">.</span><span class="ident" id="5846681">Elem</span><span class="op" id="5846685">(</span><span class="op" id="5846686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846689">unmarshalerAttrType</span>&nbsp;<span class="op" id="5846709">=</span>&nbsp;<span class="ident" id="5846711">reflect</span><span class="op" id="5846718">.</span><span class="ident" id="5846719">TypeOf</span><span class="op" id="5846725">(</span><span class="op" id="5846726">(</span><span class="op" id="5846727">*</span><span class="ident" id="5846728">UnmarshalerAttr</span><span class="op" id="5846743">)</span><span class="op" id="5846744">(</span><span class="ident" id="5846745">nil</span><span class="op" id="5846748">)</span><span class="op" id="5846749">)</span><span class="op" id="5846750">.</span><span class="ident" id="5846751">Elem</span><span class="op" id="5846755">(</span><span class="op" id="5846756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846759">textUnmarshalerType</span>&nbsp;<span class="op" id="5846779">=</span>&nbsp;<span class="ident" id="5846781">reflect</span><span class="op" id="5846788">.</span><span class="ident" id="5846789">TypeOf</span><span class="op" id="5846795">(</span><span class="op" id="5846796">(</span><span class="op" id="5846797">*</span><span class="ident" id="5846798">encoding</span><span class="op" id="5846806">.</span><span class="ident" id="5846807">TextUnmarshaler</span><span class="op" id="5846822">)</span><span class="op" id="5846823">(</span><span class="ident" id="5846824">nil</span><span class="op" id="5846827">)</span><span class="op" id="5846828">)</span><span class="op" id="5846829">.</span><span class="ident" id="5846830">Elem</span><span class="op" id="5846834">(</span><span class="op" id="5846835">)</span><br>
<span class="lineno"></span><span class="op" id="5846837">)</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="comment" id="5846840">//&nbsp;Unmarshal&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="5846884">func</span>&nbsp;<span class="op" id="5846889">(</span><span class="ident" id="5846890">p</span>&nbsp;<span class="op" id="5846892">*</span><span class="ident" id="5846893">Decoder</span><span class="op" id="5846900">)</span>&nbsp;<span class="ident" id="5846902">unmarshal</span><span class="op" id="5846911">(</span><span class="ident" id="5846912">val</span>&nbsp;<span class="ident" id="5846916">reflect</span><span class="op" id="5846923">.</span><span class="ident" id="5846924">Value</span><span class="op" id="5846929">,</span>&nbsp;<span class="ident" id="5846931">start</span>&nbsp;<span class="op" id="5846937">*</span><span class="ident" id="5846938">StartElement</span><span class="op" id="5846950">)</span>&nbsp;<span class="builtintype" id="5846952">error</span>&nbsp;<span class="op" id="5846958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5846961">//&nbsp;Find&nbsp;start&nbsp;element&nbsp;if&nbsp;we&nbsp;need&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846999">if</span>&nbsp;<span class="ident" id="5847002">start</span>&nbsp;<span class="op" id="5847008">==</span>&nbsp;<span class="ident" id="5847011">nil</span>&nbsp;<span class="op" id="5847015">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847019">for</span>&nbsp;<span class="op" id="5847023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5847028">tok</span><span class="op" id="5847031">,</span>&nbsp;<span class="ident" id="5847033">err</span>&nbsp;<span class="op" id="5847037">:=</span>&nbsp;<span class="ident" id="5847040">p</span><span class="op" id="5847041">.</span><span class="ident" id="5847042">Token</span><span class="op" id="5847047">(</span><span class="op" id="5847048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847053">if</span>&nbsp;<span class="ident" id="5847056">err</span>&nbsp;<span class="op" id="5847060">!=</span>&nbsp;<span class="ident" id="5847063">nil</span>&nbsp;<span class="op" id="5847067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847073">return</span>&nbsp;<span class="ident" id="5847080">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5847087">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847092">if</span>&nbsp;<span class="ident" id="5847095">t</span><span class="op" id="5847096">,</span>&nbsp;<span class="ident" id="5847098">ok</span>&nbsp;<span class="op" id="5847101">:=</span>&nbsp;<span class="ident" id="5847104">tok</span><span class="op" id="5847107">.</span><span class="op" id="5847108">(</span><span class="ident" id="5847109">StartElement</span><span class="op" id="5847121">)</span><span class="op" id="5847122">;</span>&nbsp;<span class="ident" id="5847124">ok</span>&nbsp;<span class="op" id="5847127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5847133">start</span>&nbsp;<span class="op" id="5847139">=</span>&nbsp;<span class="op" id="5847141">&amp;</span><span class="ident" id="5847142">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847148">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5847157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5847161">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5847164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5847168">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5847230">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847256">if</span>&nbsp;<span class="ident" id="5847259">val</span><span class="op" id="5847262">.</span><span class="ident" id="5847263">Kind</span><span class="op" id="5847267">(</span><span class="op" id="5847268">)</span>&nbsp;<span class="op" id="5847270">==</span>&nbsp;<span class="ident" id="5847273">reflect</span><span class="op" id="5847280">.</span><span class="ident" id="5847281">Interface</span>&nbsp;<span class="op" id="5847291">&amp;&amp;</span>&nbsp;<span class="op" id="5847294">!</span><span class="ident" id="5847295">val</span><span class="op" id="5847298">.</span><span class="ident" id="5847299">IsNil</span><span class="op" id="5847304">(</span><span class="op" id="5847305">)</span>&nbsp;<span class="op" id="5847307">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5847311">e</span>&nbsp;<span class="op" id="5847313">:=</span>&nbsp;<span class="ident" id="5847316">val</span><span class="op" id="5847319">.</span><span class="ident" id="5847320">Elem</span><span class="op" id="5847324">(</span><span class="op" id="5847325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847329">if</span>&nbsp;<span class="ident" id="5847332">e</span><span class="op" id="5847333">.</span><span class="ident" id="5847334">Kind</span><span class="op" id="5847338">(</span><span class="op" id="5847339">)</span>&nbsp;<span class="op" id="5847341">==</span>&nbsp;<span class="ident" id="5847344">reflect</span><span class="op" id="5847351">.</span><span class="ident" id="5847352">Ptr</span>&nbsp;<span class="op" id="5847356">&amp;&amp;</span>&nbsp;<span class="op" id="5847359">!</span><span class="ident" id="5847360">e</span><span class="op" id="5847361">.</span><span class="ident" id="5847362">IsNil</span><span class="op" id="5847367">(</span><span class="op" id="5847368">)</span>&nbsp;<span class="op" id="5847370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5847375">val</span>&nbsp;<span class="op" id="5847379">=</span>&nbsp;<span class="ident" id="5847381">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5847385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5847388">}</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847392">if</span>&nbsp;<span class="ident" id="5847395">val</span><span class="op" id="5847398">.</span><span class="ident" id="5847399">Kind</span><span class="op" id="5847403">(</span><span class="op" id="5847404">)</span>&nbsp;<span class="op" id="5847406">==</span>&nbsp;<span class="ident" id="5847409">reflect</span><span class="op" id="5847416">.</span><span class="ident" id="5847417">Ptr</span>&nbsp;<span class="op" id="5847421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847425">if</span>&nbsp;<span class="ident" id="5847428">val</span><span class="op" id="5847431">.</span><span class="ident" id="5847432">IsNil</span><span class="op" id="5847437">(</span><span class="op" id="5847438">)</span>&nbsp;<span class="op" id="5847440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5847445">val</span><span class="op" id="5847448">.</span><span class="ident" id="5847449">Set</span><span class="op" id="5847452">(</span><span class="ident" id="5847453">reflect</span><span class="op" id="5847460">.</span><span class="ident" id="5847461">New</span><span class="op" id="5847464">(</span><span class="ident" id="5847465">val</span><span class="op" id="5847468">.</span><span class="ident" id="5847469">Type</span><span class="op" id="5847473">(</span><span class="op" id="5847474">)</span><span class="op" id="5847475">.</span><span class="ident" id="5847476">Elem</span><span class="op" id="5847480">(</span><span class="op" id="5847481">)</span><span class="op" id="5847482">)</span><span class="op" id="5847483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5847487">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5847491">val</span>&nbsp;<span class="op" id="5847495">=</span>&nbsp;<span class="ident" id="5847497">val</span><span class="op" id="5847500">.</span><span class="ident" id="5847501">Elem</span><span class="op" id="5847505">(</span><span class="op" id="5847506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5847509">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847513">if</span>&nbsp;<span class="ident" id="5847516">val</span><span class="op" id="5847519">.</span><span class="ident" id="5847520">CanInterface</span><span class="op" id="5847532">(</span><span class="op" id="5847533">)</span>&nbsp;<span class="op" id="5847535">&amp;&amp;</span>&nbsp;<span class="ident" id="5847538">val</span><span class="op" id="5847541">.</span><span class="ident" id="5847542">Type</span><span class="op" id="5847546">(</span><span class="op" id="5847547">)</span><span class="op" id="5847548">.</span><span class="ident" id="5847549">Implements</span><span class="op" id="5847559">(</span><span class="ident" id="5847560">unmarshalerType</span><span class="op" id="5847575">)</span>&nbsp;<span class="op" id="5847577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5847581">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5847638">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847702">return</span>&nbsp;<span class="ident" id="5847709">p</span><span class="op" id="5847710">.</span><span class="ident" id="5847711">unmarshalInterface</span><span class="op" id="5847729">(</span><span class="ident" id="5847730">val</span><span class="op" id="5847733">.</span><span class="ident" id="5847734">Interface</span><span class="op" id="5847743">(</span><span class="op" id="5847744">)</span><span class="op" id="5847745">.</span><span class="op" id="5847746">(</span><span class="ident" id="5847747">Unmarshaler</span><span class="op" id="5847758">)</span><span class="op" id="5847759">,</span>&nbsp;<span class="ident" id="5847761">start</span><span class="op" id="5847766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5847769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847773">if</span>&nbsp;<span class="ident" id="5847776">val</span><span class="op" id="5847779">.</span><span class="ident" id="5847780">CanAddr</span><span class="op" id="5847787">(</span><span class="op" id="5847788">)</span>&nbsp;<span class="op" id="5847790">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5847794">pv</span>&nbsp;<span class="op" id="5847797">:=</span>&nbsp;<span class="ident" id="5847800">val</span><span class="op" id="5847803">.</span><span class="ident" id="5847804">Addr</span><span class="op" id="5847808">(</span><span class="op" id="5847809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847813">if</span>&nbsp;<span class="ident" id="5847816">pv</span><span class="op" id="5847818">.</span><span class="ident" id="5847819">CanInterface</span><span class="op" id="5847831">(</span><span class="op" id="5847832">)</span>&nbsp;<span class="op" id="5847834">&amp;&amp;</span>&nbsp;<span class="ident" id="5847837">pv</span><span class="op" id="5847839">.</span><span class="ident" id="5847840">Type</span><span class="op" id="5847844">(</span><span class="op" id="5847845">)</span><span class="op" id="5847846">.</span><span class="ident" id="5847847">Implements</span><span class="op" id="5847857">(</span><span class="ident" id="5847858">unmarshalerType</span><span class="op" id="5847873">)</span>&nbsp;<span class="op" id="5847875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847880">return</span>&nbsp;<span class="ident" id="5847887">p</span><span class="op" id="5847888">.</span><span class="ident" id="5847889">unmarshalInterface</span><span class="op" id="5847907">(</span><span class="ident" id="5847908">pv</span><span class="op" id="5847910">.</span><span class="ident" id="5847911">Interface</span><span class="op" id="5847920">(</span><span class="op" id="5847921">)</span><span class="op" id="5847922">.</span><span class="op" id="5847923">(</span><span class="ident" id="5847924">Unmarshaler</span><span class="op" id="5847935">)</span><span class="op" id="5847936">,</span>&nbsp;<span class="ident" id="5847938">start</span><span class="op" id="5847943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5847947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5847950">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847954">if</span>&nbsp;<span class="ident" id="5847957">val</span><span class="op" id="5847960">.</span><span class="ident" id="5847961">CanInterface</span><span class="op" id="5847973">(</span><span class="op" id="5847974">)</span>&nbsp;<span class="op" id="5847976">&amp;&amp;</span>&nbsp;<span class="ident" id="5847979">val</span><span class="op" id="5847982">.</span><span class="ident" id="5847983">Type</span><span class="op" id="5847987">(</span><span class="op" id="5847988">)</span><span class="op" id="5847989">.</span><span class="ident" id="5847990">Implements</span><span class="op" id="5848000">(</span><span class="ident" id="5848001">textUnmarshalerType</span><span class="op" id="5848020">)</span>&nbsp;<span class="op" id="5848022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5848026">return</span>&nbsp;<span class="ident" id="5848033">p</span><span class="op" id="5848034">.</span><span class="ident" id="5848035">unmarshalTextInterface</span><span class="op" id="5848057">(</span><span class="ident" id="5848058">val</span><span class="op" id="5848061">.</span><span class="ident" id="5848062">Interface</span><span class="op" id="5848071">(</span><span class="op" id="5848072">)</span><span class="op" id="5848073">.</span><span class="op" id="5848074">(</span><span class="ident" id="5848075">encoding</span><span class="op" id="5848083">.</span><span class="ident" id="5848084">TextUnmarshaler</span><span class="op" id="5848099">)</span><span class="op" id="5848100">,</span>&nbsp;<span class="ident" id="5848102">start</span><span class="op" id="5848107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5848110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5848114">if</span>&nbsp;<span class="ident" id="5848117">val</span><span class="op" id="5848120">.</span><span class="ident" id="5848121">CanAddr</span><span class="op" id="5848128">(</span><span class="op" id="5848129">)</span>&nbsp;<span class="op" id="5848131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848135">pv</span>&nbsp;<span class="op" id="5848138">:=</span>&nbsp;<span class="ident" id="5848141">val</span><span class="op" id="5848144">.</span><span class="ident" id="5848145">Addr</span><span class="op" id="5848149">(</span><span class="op" id="5848150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5848154">if</span>&nbsp;<span class="ident" id="5848157">pv</span><span class="op" id="5848159">.</span><span class="ident" id="5848160">CanInterface</span><span class="op" id="5848172">(</span><span class="op" id="5848173">)</span>&nbsp;<span class="op" id="5848175">&amp;&amp;</span>&nbsp;<span class="ident" id="5848178">pv</span><span class="op" id="5848180">.</span><span class="ident" id="5848181">Type</span><span class="op" id="5848185">(</span><span class="op" id="5848186">)</span><span class="op" id="5848187">.</span><span class="ident" id="5848188">Implements</span><span class="op" id="5848198">(</span><span class="ident" id="5848199">textUnmarshalerType</span><span class="op" id="5848218">)</span>&nbsp;<span class="op" id="5848220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5848225">return</span>&nbsp;<span class="ident" id="5848232">p</span><span class="op" id="5848233">.</span><span class="ident" id="5848234">unmarshalTextInterface</span><span class="op" id="5848256">(</span><span class="ident" id="5848257">pv</span><span class="op" id="5848259">.</span><span class="ident" id="5848260">Interface</span><span class="op" id="5848269">(</span><span class="op" id="5848270">)</span><span class="op" id="5848271">.</span><span class="op" id="5848272">(</span><span class="ident" id="5848273">encoding</span><span class="op" id="5848281">.</span><span class="ident" id="5848282">TextUnmarshaler</span><span class="op" id="5848297">)</span><span class="op" id="5848298">,</span>&nbsp;<span class="ident" id="5848300">start</span><span class="op" id="5848305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5848309">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5848312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5848316">var</span>&nbsp;<span class="op" id="5848320">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848324">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5848337">[</span><span class="op" id="5848338">]</span><span class="builtintype" id="5848339">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848346">saveData</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848359">reflect</span><span class="op" id="5848366">.</span><span class="ident" id="5848367">Value</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848375">comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5848388">[</span><span class="op" id="5848389">]</span><span class="builtintype" id="5848390">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848397">saveComment</span>&nbsp;&nbsp;<span class="ident" id="5848410">reflect</span><span class="op" id="5848417">.</span><span class="ident" id="5848418">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848426">saveXML</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848439">reflect</span><span class="op" id="5848446">.</span><span class="ident" id="5848447">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848455">saveXMLIndex</span>&nbsp;<span class="builtintype" id="5848468">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848474">saveXMLData</span>&nbsp;&nbsp;<span class="op" id="5848487">[</span><span class="op" id="5848488">]</span><span class="builtintype" id="5848489">byte</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848496">saveAny</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848509">reflect</span><span class="op" id="5848516">.</span><span class="ident" id="5848517">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848525">sv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848538">reflect</span><span class="op" id="5848545">.</span><span class="ident" id="5848546">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848554">tinfo</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5848567">*</span><span class="ident" id="5848568">typeInfo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848579">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5848592">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5848599">)</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5848603">switch</span>&nbsp;<span class="ident" id="5848610">v</span>&nbsp;<span class="op" id="5848612">:=</span>&nbsp;<span class="ident" id="5848615">val</span><span class="op" id="5848618">;</span>&nbsp;<span class="ident" id="5848620">v</span><span class="op" id="5848621">.</span><span class="ident" id="5848622">Kind</span><span class="op" id="5848626">(</span><span class="op" id="5848627">)</span>&nbsp;<span class="op" id="5848629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5848632">default</span><span class="op" id="5848639">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5848643">return</span>&nbsp;<span class="ident" id="5848650">errors</span><span class="op" id="5848656">.</span><span class="ident" id="5848657">New</span><span class="op" id="5848660">(</span><span class="string" id="5848661">&#34;unknown&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="5848677">+</span>&nbsp;<span class="ident" id="5848679">v</span><span class="op" id="5848680">.</span><span class="ident" id="5848681">Type</span><span class="op" id="5848685">(</span><span class="op" id="5848686">)</span><span class="op" id="5848687">.</span><span class="ident" id="5848688">String</span><span class="op" id="5848694">(</span><span class="op" id="5848695">)</span><span class="op" id="5848696">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5848700">case</span>&nbsp;<span class="ident" id="5848705">reflect</span><span class="op" id="5848712">.</span><span class="ident" id="5848713">Interface</span><span class="op" id="5848722">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5848726">//&nbsp;TODO:&nbsp;For&nbsp;now,&nbsp;simply&nbsp;ignore&nbsp;the&nbsp;field.&nbsp;In&nbsp;the&nbsp;near</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5848783">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;future&nbsp;we&nbsp;may&nbsp;choose&nbsp;to&nbsp;unmarshal&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5848838">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;on&nbsp;it,&nbsp;if&nbsp;not&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5848876">return</span>&nbsp;<span class="ident" id="5848883">p</span><span class="op" id="5848884">.</span><span class="ident" id="5848885">Skip</span><span class="op" id="5848889">(</span><span class="op" id="5848890">)</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5848894">case</span>&nbsp;<span class="ident" id="5848899">reflect</span><span class="op" id="5848906">.</span><span class="ident" id="5848907">Slice</span><span class="op" id="5848912">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848916">typ</span>&nbsp;<span class="op" id="5848920">:=</span>&nbsp;<span class="ident" id="5848923">v</span><span class="op" id="5848924">.</span><span class="ident" id="5848925">Type</span><span class="op" id="5848929">(</span><span class="op" id="5848930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5848934">if</span>&nbsp;<span class="ident" id="5848937">typ</span><span class="op" id="5848940">.</span><span class="ident" id="5848941">Elem</span><span class="op" id="5848945">(</span><span class="op" id="5848946">)</span><span class="op" id="5848947">.</span><span class="ident" id="5848948">Kind</span><span class="op" id="5848952">(</span><span class="op" id="5848953">)</span>&nbsp;<span class="op" id="5848955">==</span>&nbsp;<span class="ident" id="5848958">reflect</span><span class="op" id="5848965">.</span><span class="ident" id="5848966">Uint8</span>&nbsp;<span class="op" id="5848972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5848977">//&nbsp;[]byte</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848990">saveData</span>&nbsp;<span class="op" id="5848999">=</span>&nbsp;<span class="ident" id="5849001">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849006">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5849014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5849019">//&nbsp;Slice&nbsp;of&nbsp;element&nbsp;values.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5849049">//&nbsp;Grow&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849066">n</span>&nbsp;<span class="op" id="5849068">:=</span>&nbsp;<span class="ident" id="5849071">v</span><span class="op" id="5849072">.</span><span class="ident" id="5849073">Len</span><span class="op" id="5849076">(</span><span class="op" id="5849077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849081">if</span>&nbsp;<span class="ident" id="5849084">n</span>&nbsp;<span class="op" id="5849086">&gt;=</span>&nbsp;<span class="ident" id="5849089">v</span><span class="op" id="5849090">.</span><span class="ident" id="5849091">Cap</span><span class="op" id="5849094">(</span><span class="op" id="5849095">)</span>&nbsp;<span class="op" id="5849097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849102">ncap</span>&nbsp;<span class="op" id="5849107">:=</span>&nbsp;<span class="num" id="5849110">2</span>&nbsp;<span class="op" id="5849112">*</span>&nbsp;<span class="ident" id="5849114">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849119">if</span>&nbsp;<span class="ident" id="5849122">ncap</span>&nbsp;<span class="op" id="5849127">&lt;</span>&nbsp;<span class="num" id="5849129">4</span>&nbsp;<span class="op" id="5849131">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849137">ncap</span>&nbsp;<span class="op" id="5849142">=</span>&nbsp;<span class="num" id="5849144">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5849149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5849154">new</span>&nbsp;<span class="op" id="5849158">:=</span>&nbsp;<span class="ident" id="5849161">reflect</span><span class="op" id="5849168">.</span><span class="ident" id="5849169">MakeSlice</span><span class="op" id="5849178">(</span><span class="ident" id="5849179">typ</span><span class="op" id="5849182">,</span>&nbsp;<span class="ident" id="5849184">n</span><span class="op" id="5849185">,</span>&nbsp;<span class="ident" id="5849187">ncap</span><span class="op" id="5849191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849196">reflect</span><span class="op" id="5849203">.</span><span class="ident" id="5849204">Copy</span><span class="op" id="5849208">(</span><span class="builtinfunc" id="5849209">new</span><span class="op" id="5849212">,</span>&nbsp;<span class="ident" id="5849214">v</span><span class="op" id="5849215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849220">v</span><span class="op" id="5849221">.</span><span class="ident" id="5849222">Set</span><span class="op" id="5849225">(</span><span class="builtinfunc" id="5849226">new</span><span class="op" id="5849229">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5849233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849237">v</span><span class="op" id="5849238">.</span><span class="ident" id="5849239">SetLen</span><span class="op" id="5849245">(</span><span class="ident" id="5849246">n</span>&nbsp;<span class="op" id="5849248">+</span>&nbsp;<span class="num" id="5849250">1</span><span class="op" id="5849251">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5849256">//&nbsp;Recur&nbsp;to&nbsp;read&nbsp;element&nbsp;into&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849295">if</span>&nbsp;<span class="ident" id="5849298">err</span>&nbsp;<span class="op" id="5849302">:=</span>&nbsp;<span class="ident" id="5849305">p</span><span class="op" id="5849306">.</span><span class="ident" id="5849307">unmarshal</span><span class="op" id="5849316">(</span><span class="ident" id="5849317">v</span><span class="op" id="5849318">.</span><span class="ident" id="5849319">Index</span><span class="op" id="5849324">(</span><span class="ident" id="5849325">n</span><span class="op" id="5849326">)</span><span class="op" id="5849327">,</span>&nbsp;<span class="ident" id="5849329">start</span><span class="op" id="5849334">)</span><span class="op" id="5849335">;</span>&nbsp;<span class="ident" id="5849337">err</span>&nbsp;<span class="op" id="5849341">!=</span>&nbsp;<span class="ident" id="5849344">nil</span>&nbsp;<span class="op" id="5849348">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849353">v</span><span class="op" id="5849354">.</span><span class="ident" id="5849355">SetLen</span><span class="op" id="5849361">(</span><span class="ident" id="5849362">n</span><span class="op" id="5849363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849368">return</span>&nbsp;<span class="ident" id="5849375">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5849381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849385">return</span>&nbsp;<span class="ident" id="5849392">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849398">case</span>&nbsp;<span class="ident" id="5849403">reflect</span><span class="op" id="5849410">.</span><span class="ident" id="5849411">Bool</span><span class="op" id="5849415">,</span>&nbsp;<span class="ident" id="5849417">reflect</span><span class="op" id="5849424">.</span><span class="ident" id="5849425">Float32</span><span class="op" id="5849432">,</span>&nbsp;<span class="ident" id="5849434">reflect</span><span class="op" id="5849441">.</span><span class="ident" id="5849442">Float64</span><span class="op" id="5849449">,</span>&nbsp;<span class="ident" id="5849451">reflect</span><span class="op" id="5849458">.</span><span class="ident" id="5849459">Int</span><span class="op" id="5849462">,</span>&nbsp;<span class="ident" id="5849464">reflect</span><span class="op" id="5849471">.</span><span class="ident" id="5849472">Int8</span><span class="op" id="5849476">,</span>&nbsp;<span class="ident" id="5849478">reflect</span><span class="op" id="5849485">.</span><span class="ident" id="5849486">Int16</span><span class="op" id="5849491">,</span>&nbsp;<span class="ident" id="5849493">reflect</span><span class="op" id="5849500">.</span><span class="ident" id="5849501">Int32</span><span class="op" id="5849506">,</span>&nbsp;<span class="ident" id="5849508">reflect</span><span class="op" id="5849515">.</span><span class="ident" id="5849516">Int64</span><span class="op" id="5849521">,</span>&nbsp;<span class="ident" id="5849523">reflect</span><span class="op" id="5849530">.</span><span class="ident" id="5849531">Uint</span><span class="op" id="5849535">,</span>&nbsp;<span class="ident" id="5849537">reflect</span><span class="op" id="5849544">.</span><span class="ident" id="5849545">Uint8</span><span class="op" id="5849550">,</span>&nbsp;<span class="ident" id="5849552">reflect</span><span class="op" id="5849559">.</span><span class="ident" id="5849560">Uint16</span><span class="op" id="5849566">,</span>&nbsp;<span class="ident" id="5849568">reflect</span><span class="op" id="5849575">.</span><span class="ident" id="5849576">Uint32</span><span class="op" id="5849582">,</span>&nbsp;<span class="ident" id="5849584">reflect</span><span class="op" id="5849591">.</span><span class="ident" id="5849592">Uint64</span><span class="op" id="5849598">,</span>&nbsp;<span class="ident" id="5849600">reflect</span><span class="op" id="5849607">.</span><span class="ident" id="5849608">Uintptr</span><span class="op" id="5849615">,</span>&nbsp;<span class="ident" id="5849617">reflect</span><span class="op" id="5849624">.</span><span class="ident" id="5849625">String</span><span class="op" id="5849631">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849635">saveData</span>&nbsp;<span class="op" id="5849644">=</span>&nbsp;<span class="ident" id="5849646">v</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849650">case</span>&nbsp;<span class="ident" id="5849655">reflect</span><span class="op" id="5849662">.</span><span class="ident" id="5849663">Struct</span><span class="op" id="5849669">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849673">typ</span>&nbsp;<span class="op" id="5849677">:=</span>&nbsp;<span class="ident" id="5849680">v</span><span class="op" id="5849681">.</span><span class="ident" id="5849682">Type</span><span class="op" id="5849686">(</span><span class="op" id="5849687">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849691">if</span>&nbsp;<span class="ident" id="5849694">typ</span>&nbsp;<span class="op" id="5849698">==</span>&nbsp;<span class="ident" id="5849701">nameType</span>&nbsp;<span class="op" id="5849710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849715">v</span><span class="op" id="5849716">.</span><span class="ident" id="5849717">Set</span><span class="op" id="5849720">(</span><span class="ident" id="5849721">reflect</span><span class="op" id="5849728">.</span><span class="ident" id="5849729">ValueOf</span><span class="op" id="5849736">(</span><span class="ident" id="5849737">start</span><span class="op" id="5849742">.</span><span class="ident" id="5849743">Name</span><span class="op" id="5849747">)</span><span class="op" id="5849748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849753">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5849761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849766">sv</span>&nbsp;<span class="op" id="5849769">=</span>&nbsp;<span class="ident" id="5849771">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849775">tinfo</span><span class="op" id="5849780">,</span>&nbsp;<span class="ident" id="5849782">err</span>&nbsp;<span class="op" id="5849786">=</span>&nbsp;<span class="ident" id="5849788">getTypeInfo</span><span class="op" id="5849799">(</span><span class="ident" id="5849800">typ</span><span class="op" id="5849803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849807">if</span>&nbsp;<span class="ident" id="5849810">err</span>&nbsp;<span class="op" id="5849814">!=</span>&nbsp;<span class="ident" id="5849817">nil</span>&nbsp;<span class="op" id="5849821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849826">return</span>&nbsp;<span class="ident" id="5849833">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5849839">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5849844">//&nbsp;Validate&nbsp;and&nbsp;assign&nbsp;element&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849883">if</span>&nbsp;<span class="ident" id="5849886">tinfo</span><span class="op" id="5849891">.</span><span class="ident" id="5849892">xmlname</span>&nbsp;<span class="op" id="5849900">!=</span>&nbsp;<span class="ident" id="5849903">nil</span>&nbsp;<span class="op" id="5849907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849912">finfo</span>&nbsp;<span class="op" id="5849918">:=</span>&nbsp;<span class="ident" id="5849921">tinfo</span><span class="op" id="5849926">.</span><span class="ident" id="5849927">xmlname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849938">if</span>&nbsp;<span class="ident" id="5849941">finfo</span><span class="op" id="5849946">.</span><span class="ident" id="5849947">name</span>&nbsp;<span class="op" id="5849952">!=</span>&nbsp;<span class="string" id="5849955">&#34;&#34;</span>&nbsp;<span class="op" id="5849958">&amp;&amp;</span>&nbsp;<span class="ident" id="5849961">finfo</span><span class="op" id="5849966">.</span><span class="ident" id="5849967">name</span>&nbsp;<span class="op" id="5849972">!=</span>&nbsp;<span class="ident" id="5849975">start</span><span class="op" id="5849980">.</span><span class="ident" id="5849981">Name</span><span class="op" id="5849985">.</span><span class="ident" id="5849986">Local</span>&nbsp;<span class="op" id="5849992">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849998">return</span>&nbsp;<span class="ident" id="5850005">UnmarshalError</span><span class="op" id="5850019">(</span><span class="string" id="5850020">&#34;expected&nbsp;element&nbsp;type&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="5850046">+</span>&nbsp;<span class="ident" id="5850048">finfo</span><span class="op" id="5850053">.</span><span class="ident" id="5850054">name</span>&nbsp;<span class="op" id="5850059">+</span>&nbsp;<span class="string" id="5850061">&#34;&gt;&nbsp;but&nbsp;have&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="5850076">+</span>&nbsp;<span class="ident" id="5850078">start</span><span class="op" id="5850083">.</span><span class="ident" id="5850084">Name</span><span class="op" id="5850088">.</span><span class="ident" id="5850089">Local</span>&nbsp;<span class="op" id="5850095">+</span>&nbsp;<span class="string" id="5850097">&#34;&gt;&#34;</span><span class="op" id="5850100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5850105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5850110">if</span>&nbsp;<span class="ident" id="5850113">finfo</span><span class="op" id="5850118">.</span><span class="ident" id="5850119">xmlns</span>&nbsp;<span class="op" id="5850125">!=</span>&nbsp;<span class="string" id="5850128">&#34;&#34;</span>&nbsp;<span class="op" id="5850131">&amp;&amp;</span>&nbsp;<span class="ident" id="5850134">finfo</span><span class="op" id="5850139">.</span><span class="ident" id="5850140">xmlns</span>&nbsp;<span class="op" id="5850146">!=</span>&nbsp;<span class="ident" id="5850149">start</span><span class="op" id="5850154">.</span><span class="ident" id="5850155">Name</span><span class="op" id="5850159">.</span><span class="ident" id="5850160">Space</span>&nbsp;<span class="op" id="5850166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5850172">e</span>&nbsp;<span class="op" id="5850174">:=</span>&nbsp;<span class="string" id="5850177">&#34;expected&nbsp;element&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="5850198">+</span>&nbsp;<span class="ident" id="5850200">finfo</span><span class="op" id="5850205">.</span><span class="ident" id="5850206">name</span>&nbsp;<span class="op" id="5850211">+</span>&nbsp;<span class="string" id="5850213">&#34;&gt;&nbsp;in&nbsp;name&nbsp;space&nbsp;&#34;</span>&nbsp;<span class="op" id="5850232">+</span>&nbsp;<span class="ident" id="5850234">finfo</span><span class="op" id="5850239">.</span><span class="ident" id="5850240">xmlns</span>&nbsp;<span class="op" id="5850246">+</span>&nbsp;<span class="string" id="5850248">&#34;&nbsp;but&nbsp;have&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5850265">if</span>&nbsp;<span class="ident" id="5850268">start</span><span class="op" id="5850273">.</span><span class="ident" id="5850274">Name</span><span class="op" id="5850278">.</span><span class="ident" id="5850279">Space</span>&nbsp;<span class="op" id="5850285">==</span>&nbsp;<span class="string" id="5850288">&#34;&#34;</span>&nbsp;<span class="op" id="5850291">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5850298">e</span>&nbsp;<span class="op" id="5850300">+=</span>&nbsp;<span class="string" id="5850303">&#34;no&nbsp;name&nbsp;space&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5850323">}</span>&nbsp;<span class="keyword" id="5850325">else</span>&nbsp;<span class="op" id="5850330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5850337">e</span>&nbsp;<span class="op" id="5850339">+=</span>&nbsp;<span class="ident" id="5850342">start</span><span class="op" id="5850347">.</span><span class="ident" id="5850348">Name</span><span class="op" id="5850352">.</span><span class="ident" id="5850353">Space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5850363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5850369">return</span>&nbsp;<span class="ident" id="5850376">UnmarshalError</span><span class="op" id="5850390">(</span><span class="ident" id="5850391">e</span><span class="op" id="5850392">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5850397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5850402">fv</span>&nbsp;<span class="op" id="5850405">:=</span>&nbsp;<span class="ident" id="5850408">finfo</span><span class="op" id="5850413">.</span><span class="ident" id="5850414">value</span><span class="op" id="5850419">(</span><span class="ident" id="5850420">sv</span><span class="op" id="5850422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5850427">if</span>&nbsp;<span class="ident" id="5850430">_</span><span class="op" id="5850431">,</span>&nbsp;<span class="ident" id="5850433">ok</span>&nbsp;<span class="op" id="5850436">:=</span>&nbsp;<span class="ident" id="5850439">fv</span><span class="op" id="5850441">.</span><span class="ident" id="5850442">Interface</span><span class="op" id="5850451">(</span><span class="op" id="5850452">)</span><span class="op" id="5850453">.</span><span class="op" id="5850454">(</span><span class="ident" id="5850455">Name</span><span class="op" id="5850459">)</span><span class="op" id="5850460">;</span>&nbsp;<span class="ident" id="5850462">ok</span>&nbsp;<span class="op" id="5850465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5850471">fv</span><span class="op" id="5850473">.</span><span class="ident" id="5850474">Set</span><span class="op" id="5850477">(</span><span class="ident" id="5850478">reflect</span><span class="op" id="5850485">.</span><span class="ident" id="5850486">ValueOf</span><span class="op" id="5850493">(</span><span class="ident" id="5850494">start</span><span class="op" id="5850499">.</span><span class="ident" id="5850500">Name</span><span class="op" id="5850504">)</span><span class="op" id="5850505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5850510">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5850514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5850519">//&nbsp;Assign&nbsp;attributes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5850543">//&nbsp;Also,&nbsp;determine&nbsp;whether&nbsp;we&nbsp;need&nbsp;to&nbsp;save&nbsp;character&nbsp;data&nbsp;or&nbsp;comments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5850616">for</span>&nbsp;<span class="ident" id="5850620">i</span>&nbsp;<span class="op" id="5850622">:=</span>&nbsp;<span class="keyword" id="5850625">range</span>&nbsp;<span class="ident" id="5850631">tinfo</span><span class="op" id="5850636">.</span><span class="ident" id="5850637">fields</span>&nbsp;<span class="op" id="5850644">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5850649">finfo</span>&nbsp;<span class="op" id="5850655">:=</span>&nbsp;<span class="op" id="5850658">&amp;</span><span class="ident" id="5850659">tinfo</span><span class="op" id="5850664">.</span><span class="ident" id="5850665">fields</span><span class="op" id="5850671">[</span><span class="ident" id="5850672">i</span><span class="op" id="5850673">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5850678">switch</span>&nbsp;<span class="ident" id="5850685">finfo</span><span class="op" id="5850690">.</span><span class="ident" id="5850691">flags</span>&nbsp;<span class="op" id="5850697">&amp;</span>&nbsp;<span class="ident" id="5850699">fMode</span>&nbsp;<span class="op" id="5850705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5850710">case</span>&nbsp;<span class="ident" id="5850715">fAttr</span><span class="op" id="5850720">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5850726">strv</span>&nbsp;<span class="op" id="5850731">:=</span>&nbsp;<span class="ident" id="5850734">finfo</span><span class="op" id="5850739">.</span><span class="ident" id="5850740">value</span><span class="op" id="5850745">(</span><span class="ident" id="5850746">sv</span><span class="op" id="5850748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5850754">//&nbsp;Look&nbsp;for&nbsp;attribute.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5850781">for</span>&nbsp;<span class="ident" id="5850785">_</span><span class="op" id="5850786">,</span>&nbsp;<span class="ident" id="5850788">a</span>&nbsp;<span class="op" id="5850790">:=</span>&nbsp;<span class="keyword" id="5850793">range</span>&nbsp;<span class="ident" id="5850799">start</span><span class="op" id="5850804">.</span><span class="ident" id="5850805">Attr</span>&nbsp;<span class="op" id="5850810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5850817">if</span>&nbsp;<span class="ident" id="5850820">a</span><span class="op" id="5850821">.</span><span class="ident" id="5850822">Name</span><span class="op" id="5850826">.</span><span class="ident" id="5850827">Local</span>&nbsp;<span class="op" id="5850833">==</span>&nbsp;<span class="ident" id="5850836">finfo</span><span class="op" id="5850841">.</span><span class="ident" id="5850842">name</span>&nbsp;<span class="op" id="5850847">&amp;&amp;</span>&nbsp;<span class="op" id="5850850">(</span><span class="ident" id="5850851">finfo</span><span class="op" id="5850856">.</span><span class="ident" id="5850857">xmlns</span>&nbsp;<span class="op" id="5850863">==</span>&nbsp;<span class="string" id="5850866">&#34;&#34;</span>&nbsp;<span class="op" id="5850869">||</span>&nbsp;<span class="ident" id="5850872">finfo</span><span class="op" id="5850877">.</span><span class="ident" id="5850878">xmlns</span>&nbsp;<span class="op" id="5850884">==</span>&nbsp;<span class="ident" id="5850887">a</span><span class="op" id="5850888">.</span><span class="ident" id="5850889">Name</span><span class="op" id="5850893">.</span><span class="ident" id="5850894">Space</span><span class="op" id="5850899">)</span>&nbsp;<span class="op" id="5850901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5850909">if</span>&nbsp;<span class="ident" id="5850912">err</span>&nbsp;<span class="op" id="5850916">:=</span>&nbsp;<span class="ident" id="5850919">p</span><span class="op" id="5850920">.</span><span class="ident" id="5850921">unmarshalAttr</span><span class="op" id="5850934">(</span><span class="ident" id="5850935">strv</span><span class="op" id="5850939">,</span>&nbsp;<span class="ident" id="5850941">a</span><span class="op" id="5850942">)</span><span class="op" id="5850943">;</span>&nbsp;<span class="ident" id="5850945">err</span>&nbsp;<span class="op" id="5850949">!=</span>&nbsp;<span class="ident" id="5850952">nil</span>&nbsp;<span class="op" id="5850956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5850965">return</span>&nbsp;<span class="ident" id="5850972">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5850982">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5850990">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851013">case</span>&nbsp;<span class="ident" id="5851018">fCharData</span><span class="op" id="5851027">:</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851033">if</span>&nbsp;<span class="op" id="5851036">!</span><span class="ident" id="5851037">saveData</span><span class="op" id="5851045">.</span><span class="ident" id="5851046">IsValid</span><span class="op" id="5851053">(</span><span class="op" id="5851054">)</span>&nbsp;<span class="op" id="5851056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851063">saveData</span>&nbsp;<span class="op" id="5851072">=</span>&nbsp;<span class="ident" id="5851074">finfo</span><span class="op" id="5851079">.</span><span class="ident" id="5851080">value</span><span class="op" id="5851085">(</span><span class="ident" id="5851086">sv</span><span class="op" id="5851088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851100">case</span>&nbsp;<span class="ident" id="5851105">fComment</span><span class="op" id="5851113">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851119">if</span>&nbsp;<span class="op" id="5851122">!</span><span class="ident" id="5851123">saveComment</span><span class="op" id="5851134">.</span><span class="ident" id="5851135">IsValid</span><span class="op" id="5851142">(</span><span class="op" id="5851143">)</span>&nbsp;<span class="op" id="5851145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851152">saveComment</span>&nbsp;<span class="op" id="5851164">=</span>&nbsp;<span class="ident" id="5851166">finfo</span><span class="op" id="5851171">.</span><span class="ident" id="5851172">value</span><span class="op" id="5851177">(</span><span class="ident" id="5851178">sv</span><span class="op" id="5851180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851192">case</span>&nbsp;<span class="ident" id="5851197">fAny</span><span class="op" id="5851201">,</span>&nbsp;<span class="ident" id="5851203">fAny</span>&nbsp;<span class="op" id="5851208">|</span>&nbsp;<span class="ident" id="5851210">fElement</span><span class="op" id="5851218">:</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851224">if</span>&nbsp;<span class="op" id="5851227">!</span><span class="ident" id="5851228">saveAny</span><span class="op" id="5851235">.</span><span class="ident" id="5851236">IsValid</span><span class="op" id="5851243">(</span><span class="op" id="5851244">)</span>&nbsp;<span class="op" id="5851246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851253">saveAny</span>&nbsp;<span class="op" id="5851261">=</span>&nbsp;<span class="ident" id="5851263">finfo</span><span class="op" id="5851268">.</span><span class="ident" id="5851269">value</span><span class="op" id="5851274">(</span><span class="ident" id="5851275">sv</span><span class="op" id="5851277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851289">case</span>&nbsp;<span class="ident" id="5851294">fInnerXml</span><span class="op" id="5851303">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851309">if</span>&nbsp;<span class="op" id="5851312">!</span><span class="ident" id="5851313">saveXML</span><span class="op" id="5851320">.</span><span class="ident" id="5851321">IsValid</span><span class="op" id="5851328">(</span><span class="op" id="5851329">)</span>&nbsp;<span class="op" id="5851331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851338">saveXML</span>&nbsp;<span class="op" id="5851346">=</span>&nbsp;<span class="ident" id="5851348">finfo</span><span class="op" id="5851353">.</span><span class="ident" id="5851354">value</span><span class="op" id="5851359">(</span><span class="ident" id="5851360">sv</span><span class="op" id="5851362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851369">if</span>&nbsp;<span class="ident" id="5851372">p</span><span class="op" id="5851373">.</span><span class="ident" id="5851374">saved</span>&nbsp;<span class="op" id="5851380">==</span>&nbsp;<span class="ident" id="5851383">nil</span>&nbsp;<span class="op" id="5851387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851395">saveXMLIndex</span>&nbsp;<span class="op" id="5851408">=</span>&nbsp;<span class="num" id="5851410">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851418">p</span><span class="op" id="5851419">.</span><span class="ident" id="5851420">saved</span>&nbsp;<span class="op" id="5851426">=</span>&nbsp;<span class="builtinfunc" id="5851428">new</span><span class="op" id="5851431">(</span><span class="ident" id="5851432">bytes</span><span class="op" id="5851437">.</span><span class="ident" id="5851438">Buffer</span><span class="op" id="5851444">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851451">}</span>&nbsp;<span class="keyword" id="5851453">else</span>&nbsp;<span class="op" id="5851458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851466">saveXMLIndex</span>&nbsp;<span class="op" id="5851479">=</span>&nbsp;<span class="ident" id="5851481">p</span><span class="op" id="5851482">.</span><span class="ident" id="5851483">savedOffset</span><span class="op" id="5851494">(</span><span class="op" id="5851495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851513">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851520">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5851524">//&nbsp;Find&nbsp;end&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5851546">//&nbsp;Process&nbsp;sub-elements&nbsp;along&nbsp;the&nbsp;way.</span><br>
<span class="lineno">465</span><span class="ident" id="5851585">Loop</span><span class="op" id="5851589">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851592">for</span>&nbsp;<span class="op" id="5851596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851600">var</span>&nbsp;<span class="ident" id="5851604">savedOffset</span>&nbsp;<span class="builtintype" id="5851616">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851622">if</span>&nbsp;<span class="ident" id="5851625">saveXML</span><span class="op" id="5851632">.</span><span class="ident" id="5851633">IsValid</span><span class="op" id="5851640">(</span><span class="op" id="5851641">)</span>&nbsp;<span class="op" id="5851643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851648">savedOffset</span>&nbsp;<span class="op" id="5851660">=</span>&nbsp;<span class="ident" id="5851662">p</span><span class="op" id="5851663">.</span><span class="ident" id="5851664">savedOffset</span><span class="op" id="5851675">(</span><span class="op" id="5851676">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851684">tok</span><span class="op" id="5851687">,</span>&nbsp;<span class="ident" id="5851689">err</span>&nbsp;<span class="op" id="5851693">:=</span>&nbsp;<span class="ident" id="5851696">p</span><span class="op" id="5851697">.</span><span class="ident" id="5851698">Token</span><span class="op" id="5851703">(</span><span class="op" id="5851704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851708">if</span>&nbsp;<span class="ident" id="5851711">err</span>&nbsp;<span class="op" id="5851715">!=</span>&nbsp;<span class="ident" id="5851718">nil</span>&nbsp;<span class="op" id="5851722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851727">return</span>&nbsp;<span class="ident" id="5851734">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851740">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851744">switch</span>&nbsp;<span class="ident" id="5851751">t</span>&nbsp;<span class="op" id="5851753">:=</span>&nbsp;<span class="ident" id="5851756">tok</span><span class="op" id="5851759">.</span><span class="op" id="5851760">(</span><span class="keyword" id="5851761">type</span><span class="op" id="5851765">)</span>&nbsp;<span class="op" id="5851767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851771">case</span>&nbsp;<span class="ident" id="5851776">StartElement</span><span class="op" id="5851788">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851793">consumed</span>&nbsp;<span class="op" id="5851802">:=</span>&nbsp;<span class="builtintype" id="5851805">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851814">if</span>&nbsp;<span class="ident" id="5851817">sv</span><span class="op" id="5851819">.</span><span class="ident" id="5851820">IsValid</span><span class="op" id="5851827">(</span><span class="op" id="5851828">)</span>&nbsp;<span class="op" id="5851830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851836">consumed</span><span class="op" id="5851844">,</span>&nbsp;<span class="ident" id="5851846">err</span>&nbsp;<span class="op" id="5851850">=</span>&nbsp;<span class="ident" id="5851852">p</span><span class="op" id="5851853">.</span><span class="ident" id="5851854">unmarshalPath</span><span class="op" id="5851867">(</span><span class="ident" id="5851868">tinfo</span><span class="op" id="5851873">,</span>&nbsp;<span class="ident" id="5851875">sv</span><span class="op" id="5851877">,</span>&nbsp;<span class="ident" id="5851879">nil</span><span class="op" id="5851882">,</span>&nbsp;<span class="op" id="5851884">&amp;</span><span class="ident" id="5851885">t</span><span class="op" id="5851886">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851892">if</span>&nbsp;<span class="ident" id="5851895">err</span>&nbsp;<span class="op" id="5851899">!=</span>&nbsp;<span class="ident" id="5851902">nil</span>&nbsp;<span class="op" id="5851906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851913">return</span>&nbsp;<span class="ident" id="5851920">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851934">if</span>&nbsp;<span class="op" id="5851937">!</span><span class="ident" id="5851938">consumed</span>&nbsp;<span class="op" id="5851947">&amp;&amp;</span>&nbsp;<span class="ident" id="5851950">saveAny</span><span class="op" id="5851957">.</span><span class="ident" id="5851958">IsValid</span><span class="op" id="5851965">(</span><span class="op" id="5851966">)</span>&nbsp;<span class="op" id="5851968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851975">consumed</span>&nbsp;<span class="op" id="5851984">=</span>&nbsp;<span class="builtintype" id="5851986">true</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851996">if</span>&nbsp;<span class="ident" id="5851999">err</span>&nbsp;<span class="op" id="5852003">:=</span>&nbsp;<span class="ident" id="5852006">p</span><span class="op" id="5852007">.</span><span class="ident" id="5852008">unmarshal</span><span class="op" id="5852017">(</span><span class="ident" id="5852018">saveAny</span><span class="op" id="5852025">,</span>&nbsp;<span class="op" id="5852027">&amp;</span><span class="ident" id="5852028">t</span><span class="op" id="5852029">)</span><span class="op" id="5852030">;</span>&nbsp;<span class="ident" id="5852032">err</span>&nbsp;<span class="op" id="5852036">!=</span>&nbsp;<span class="ident" id="5852039">nil</span>&nbsp;<span class="op" id="5852043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852051">return</span>&nbsp;<span class="ident" id="5852058">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5852067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5852073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5852078">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852083">if</span>&nbsp;<span class="op" id="5852086">!</span><span class="ident" id="5852087">consumed</span>&nbsp;<span class="op" id="5852096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852102">if</span>&nbsp;<span class="ident" id="5852105">err</span>&nbsp;<span class="op" id="5852109">:=</span>&nbsp;<span class="ident" id="5852112">p</span><span class="op" id="5852113">.</span><span class="ident" id="5852114">Skip</span><span class="op" id="5852118">(</span><span class="op" id="5852119">)</span><span class="op" id="5852120">;</span>&nbsp;<span class="ident" id="5852122">err</span>&nbsp;<span class="op" id="5852126">!=</span>&nbsp;<span class="ident" id="5852129">nil</span>&nbsp;<span class="op" id="5852133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852140">return</span>&nbsp;<span class="ident" id="5852147">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5852155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5852160">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852165">case</span>&nbsp;<span class="ident" id="5852170">EndElement</span><span class="op" id="5852180">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852185">if</span>&nbsp;<span class="ident" id="5852188">saveXML</span><span class="op" id="5852195">.</span><span class="ident" id="5852196">IsValid</span><span class="op" id="5852203">(</span><span class="op" id="5852204">)</span>&nbsp;<span class="op" id="5852206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5852212">saveXMLData</span>&nbsp;<span class="op" id="5852224">=</span>&nbsp;<span class="ident" id="5852226">p</span><span class="op" id="5852227">.</span><span class="ident" id="5852228">saved</span><span class="op" id="5852233">.</span><span class="ident" id="5852234">Bytes</span><span class="op" id="5852239">(</span><span class="op" id="5852240">)</span><span class="op" id="5852241">[</span><span class="ident" id="5852242">saveXMLIndex</span><span class="op" id="5852254">:</span><span class="ident" id="5852255">savedOffset</span><span class="op" id="5852266">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852272">if</span>&nbsp;<span class="ident" id="5852275">saveXMLIndex</span>&nbsp;<span class="op" id="5852288">==</span>&nbsp;<span class="num" id="5852291">0</span>&nbsp;<span class="op" id="5852293">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5852300">p</span><span class="op" id="5852301">.</span><span class="ident" id="5852302">saved</span>&nbsp;<span class="op" id="5852308">=</span>&nbsp;<span class="ident" id="5852310">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5852318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5852323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852328">break</span>&nbsp;<span class="ident" id="5852334">Loop</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852342">case</span>&nbsp;<span class="ident" id="5852347">CharData</span><span class="op" id="5852355">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852360">if</span>&nbsp;<span class="ident" id="5852363">saveData</span><span class="op" id="5852371">.</span><span class="ident" id="5852372">IsValid</span><span class="op" id="5852379">(</span><span class="op" id="5852380">)</span>&nbsp;<span class="op" id="5852382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5852388">data</span>&nbsp;<span class="op" id="5852393">=</span>&nbsp;<span class="builtinfunc" id="5852395">append</span><span class="op" id="5852401">(</span><span class="ident" id="5852402">data</span><span class="op" id="5852406">,</span>&nbsp;<span class="ident" id="5852408">t</span><span class="op" id="5852409">...</span><span class="op" id="5852412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5852417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852422">case</span>&nbsp;<span class="ident" id="5852427">Comment</span><span class="op" id="5852434">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852439">if</span>&nbsp;<span class="ident" id="5852442">saveComment</span><span class="op" id="5852453">.</span><span class="ident" id="5852454">IsValid</span><span class="op" id="5852461">(</span><span class="op" id="5852462">)</span>&nbsp;<span class="op" id="5852464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5852470">comment</span>&nbsp;<span class="op" id="5852478">=</span>&nbsp;<span class="builtinfunc" id="5852480">append</span><span class="op" id="5852486">(</span><span class="ident" id="5852487">comment</span><span class="op" id="5852494">,</span>&nbsp;<span class="ident" id="5852496">t</span><span class="op" id="5852497">...</span><span class="op" id="5852500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5852505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5852509">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5852512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852516">if</span>&nbsp;<span class="ident" id="5852519">saveData</span><span class="op" id="5852527">.</span><span class="ident" id="5852528">IsValid</span><span class="op" id="5852535">(</span><span class="op" id="5852536">)</span>&nbsp;<span class="op" id="5852538">&amp;&amp;</span>&nbsp;<span class="ident" id="5852541">saveData</span><span class="op" id="5852549">.</span><span class="ident" id="5852550">CanInterface</span><span class="op" id="5852562">(</span><span class="op" id="5852563">)</span>&nbsp;<span class="op" id="5852565">&amp;&amp;</span>&nbsp;<span class="ident" id="5852568">saveData</span><span class="op" id="5852576">.</span><span class="ident" id="5852577">Type</span><span class="op" id="5852581">(</span><span class="op" id="5852582">)</span><span class="op" id="5852583">.</span><span class="ident" id="5852584">Implements</span><span class="op" id="5852594">(</span><span class="ident" id="5852595">textUnmarshalerType</span><span class="op" id="5852614">)</span>&nbsp;<span class="op" id="5852616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852620">if</span>&nbsp;<span class="ident" id="5852623">err</span>&nbsp;<span class="op" id="5852627">:=</span>&nbsp;<span class="ident" id="5852630">saveData</span><span class="op" id="5852638">.</span><span class="ident" id="5852639">Interface</span><span class="op" id="5852648">(</span><span class="op" id="5852649">)</span><span class="op" id="5852650">.</span><span class="op" id="5852651">(</span><span class="ident" id="5852652">encoding</span><span class="op" id="5852660">.</span><span class="ident" id="5852661">TextUnmarshaler</span><span class="op" id="5852676">)</span><span class="op" id="5852677">.</span><span class="ident" id="5852678">UnmarshalText</span><span class="op" id="5852691">(</span><span class="ident" id="5852692">data</span><span class="op" id="5852696">)</span><span class="op" id="5852697">;</span>&nbsp;<span class="ident" id="5852699">err</span>&nbsp;<span class="op" id="5852703">!=</span>&nbsp;<span class="ident" id="5852706">nil</span>&nbsp;<span class="op" id="5852710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852715">return</span>&nbsp;<span class="ident" id="5852722">err</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5852728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5852732">saveData</span>&nbsp;<span class="op" id="5852741">=</span>&nbsp;<span class="ident" id="5852743">reflect</span><span class="op" id="5852750">.</span><span class="ident" id="5852751">Value</span><span class="op" id="5852756">{</span><span class="op" id="5852757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5852760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852764">if</span>&nbsp;<span class="ident" id="5852767">saveData</span><span class="op" id="5852775">.</span><span class="ident" id="5852776">IsValid</span><span class="op" id="5852783">(</span><span class="op" id="5852784">)</span>&nbsp;<span class="op" id="5852786">&amp;&amp;</span>&nbsp;<span class="ident" id="5852789">saveData</span><span class="op" id="5852797">.</span><span class="ident" id="5852798">CanAddr</span><span class="op" id="5852805">(</span><span class="op" id="5852806">)</span>&nbsp;<span class="op" id="5852808">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5852812">pv</span>&nbsp;<span class="op" id="5852815">:=</span>&nbsp;<span class="ident" id="5852818">saveData</span><span class="op" id="5852826">.</span><span class="ident" id="5852827">Addr</span><span class="op" id="5852831">(</span><span class="op" id="5852832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852836">if</span>&nbsp;<span class="ident" id="5852839">pv</span><span class="op" id="5852841">.</span><span class="ident" id="5852842">CanInterface</span><span class="op" id="5852854">(</span><span class="op" id="5852855">)</span>&nbsp;<span class="op" id="5852857">&amp;&amp;</span>&nbsp;<span class="ident" id="5852860">pv</span><span class="op" id="5852862">.</span><span class="ident" id="5852863">Type</span><span class="op" id="5852867">(</span><span class="op" id="5852868">)</span><span class="op" id="5852869">.</span><span class="ident" id="5852870">Implements</span><span class="op" id="5852880">(</span><span class="ident" id="5852881">textUnmarshalerType</span><span class="op" id="5852900">)</span>&nbsp;<span class="op" id="5852902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852907">if</span>&nbsp;<span class="ident" id="5852910">err</span>&nbsp;<span class="op" id="5852914">:=</span>&nbsp;<span class="ident" id="5852917">pv</span><span class="op" id="5852919">.</span><span class="ident" id="5852920">Interface</span><span class="op" id="5852929">(</span><span class="op" id="5852930">)</span><span class="op" id="5852931">.</span><span class="op" id="5852932">(</span><span class="ident" id="5852933">encoding</span><span class="op" id="5852941">.</span><span class="ident" id="5852942">TextUnmarshaler</span><span class="op" id="5852957">)</span><span class="op" id="5852958">.</span><span class="ident" id="5852959">UnmarshalText</span><span class="op" id="5852972">(</span><span class="ident" id="5852973">data</span><span class="op" id="5852977">)</span><span class="op" id="5852978">;</span>&nbsp;<span class="ident" id="5852980">err</span>&nbsp;<span class="op" id="5852984">!=</span>&nbsp;<span class="ident" id="5852987">nil</span>&nbsp;<span class="op" id="5852991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852997">return</span>&nbsp;<span class="ident" id="5853004">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5853011">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853016">saveData</span>&nbsp;<span class="op" id="5853025">=</span>&nbsp;<span class="ident" id="5853027">reflect</span><span class="op" id="5853034">.</span><span class="ident" id="5853035">Value</span><span class="op" id="5853040">{</span><span class="op" id="5853041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5853045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5853048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853052">if</span>&nbsp;<span class="ident" id="5853055">err</span>&nbsp;<span class="op" id="5853059">:=</span>&nbsp;<span class="ident" id="5853062">copyValue</span><span class="op" id="5853071">(</span><span class="ident" id="5853072">saveData</span><span class="op" id="5853080">,</span>&nbsp;<span class="ident" id="5853082">data</span><span class="op" id="5853086">)</span><span class="op" id="5853087">;</span>&nbsp;<span class="ident" id="5853089">err</span>&nbsp;<span class="op" id="5853093">!=</span>&nbsp;<span class="ident" id="5853096">nil</span>&nbsp;<span class="op" id="5853100">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853104">return</span>&nbsp;<span class="ident" id="5853111">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5853116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853120">switch</span>&nbsp;<span class="ident" id="5853127">t</span>&nbsp;<span class="op" id="5853129">:=</span>&nbsp;<span class="ident" id="5853132">saveComment</span><span class="op" id="5853143">;</span>&nbsp;<span class="ident" id="5853145">t</span><span class="op" id="5853146">.</span><span class="ident" id="5853147">Kind</span><span class="op" id="5853151">(</span><span class="op" id="5853152">)</span>&nbsp;<span class="op" id="5853154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853157">case</span>&nbsp;<span class="ident" id="5853162">reflect</span><span class="op" id="5853169">.</span><span class="ident" id="5853170">String</span><span class="op" id="5853176">:</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853180">t</span><span class="op" id="5853181">.</span><span class="ident" id="5853182">SetString</span><span class="op" id="5853191">(</span><span class="builtintype" id="5853192">string</span><span class="op" id="5853198">(</span><span class="ident" id="5853199">comment</span><span class="op" id="5853206">)</span><span class="op" id="5853207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853210">case</span>&nbsp;<span class="ident" id="5853215">reflect</span><span class="op" id="5853222">.</span><span class="ident" id="5853223">Slice</span><span class="op" id="5853228">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853232">t</span><span class="op" id="5853233">.</span><span class="ident" id="5853234">Set</span><span class="op" id="5853237">(</span><span class="ident" id="5853238">reflect</span><span class="op" id="5853245">.</span><span class="ident" id="5853246">ValueOf</span><span class="op" id="5853253">(</span><span class="ident" id="5853254">comment</span><span class="op" id="5853261">)</span><span class="op" id="5853262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5853265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853269">switch</span>&nbsp;<span class="ident" id="5853276">t</span>&nbsp;<span class="op" id="5853278">:=</span>&nbsp;<span class="ident" id="5853281">saveXML</span><span class="op" id="5853288">;</span>&nbsp;<span class="ident" id="5853290">t</span><span class="op" id="5853291">.</span><span class="ident" id="5853292">Kind</span><span class="op" id="5853296">(</span><span class="op" id="5853297">)</span>&nbsp;<span class="op" id="5853299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853302">case</span>&nbsp;<span class="ident" id="5853307">reflect</span><span class="op" id="5853314">.</span><span class="ident" id="5853315">String</span><span class="op" id="5853321">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853325">t</span><span class="op" id="5853326">.</span><span class="ident" id="5853327">SetString</span><span class="op" id="5853336">(</span><span class="builtintype" id="5853337">string</span><span class="op" id="5853343">(</span><span class="ident" id="5853344">saveXMLData</span><span class="op" id="5853355">)</span><span class="op" id="5853356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853359">case</span>&nbsp;<span class="ident" id="5853364">reflect</span><span class="op" id="5853371">.</span><span class="ident" id="5853372">Slice</span><span class="op" id="5853377">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853381">t</span><span class="op" id="5853382">.</span><span class="ident" id="5853383">Set</span><span class="op" id="5853386">(</span><span class="ident" id="5853387">reflect</span><span class="op" id="5853394">.</span><span class="ident" id="5853395">ValueOf</span><span class="op" id="5853402">(</span><span class="ident" id="5853403">saveXMLData</span><span class="op" id="5853414">)</span><span class="op" id="5853415">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5853418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853422">return</span>&nbsp;<span class="ident" id="5853429">nil</span><br>
<span class="lineno"></span><span class="op" id="5853433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="5853436">func</span>&nbsp;<span class="ident" id="5853441">copyValue</span><span class="op" id="5853450">(</span><span class="ident" id="5853451">dst</span>&nbsp;<span class="ident" id="5853455">reflect</span><span class="op" id="5853462">.</span><span class="ident" id="5853463">Value</span><span class="op" id="5853468">,</span>&nbsp;<span class="ident" id="5853470">src</span>&nbsp;<span class="op" id="5853474">[</span><span class="op" id="5853475">]</span><span class="builtintype" id="5853476">byte</span><span class="op" id="5853480">)</span>&nbsp;<span class="op" id="5853482">(</span><span class="ident" id="5853483">err</span>&nbsp;<span class="builtintype" id="5853487">error</span><span class="op" id="5853492">)</span>&nbsp;<span class="op" id="5853494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853497">dst0</span>&nbsp;<span class="op" id="5853502">:=</span>&nbsp;<span class="ident" id="5853505">dst</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853511">if</span>&nbsp;<span class="ident" id="5853514">dst</span><span class="op" id="5853517">.</span><span class="ident" id="5853518">Kind</span><span class="op" id="5853522">(</span><span class="op" id="5853523">)</span>&nbsp;<span class="op" id="5853525">==</span>&nbsp;<span class="ident" id="5853528">reflect</span><span class="op" id="5853535">.</span><span class="ident" id="5853536">Ptr</span>&nbsp;<span class="op" id="5853540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853544">if</span>&nbsp;<span class="ident" id="5853547">dst</span><span class="op" id="5853550">.</span><span class="ident" id="5853551">IsNil</span><span class="op" id="5853556">(</span><span class="op" id="5853557">)</span>&nbsp;<span class="op" id="5853559">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853564">dst</span><span class="op" id="5853567">.</span><span class="ident" id="5853568">Set</span><span class="op" id="5853571">(</span><span class="ident" id="5853572">reflect</span><span class="op" id="5853579">.</span><span class="ident" id="5853580">New</span><span class="op" id="5853583">(</span><span class="ident" id="5853584">dst</span><span class="op" id="5853587">.</span><span class="ident" id="5853588">Type</span><span class="op" id="5853592">(</span><span class="op" id="5853593">)</span><span class="op" id="5853594">.</span><span class="ident" id="5853595">Elem</span><span class="op" id="5853599">(</span><span class="op" id="5853600">)</span><span class="op" id="5853601">)</span><span class="op" id="5853602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5853606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853610">dst</span>&nbsp;<span class="op" id="5853614">=</span>&nbsp;<span class="ident" id="5853616">dst</span><span class="op" id="5853619">.</span><span class="ident" id="5853620">Elem</span><span class="op" id="5853624">(</span><span class="op" id="5853625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5853628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5853632">//&nbsp;Save&nbsp;accumulated&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853659">switch</span>&nbsp;<span class="ident" id="5853666">dst</span><span class="op" id="5853669">.</span><span class="ident" id="5853670">Kind</span><span class="op" id="5853674">(</span><span class="op" id="5853675">)</span>&nbsp;<span class="op" id="5853677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853680">case</span>&nbsp;<span class="ident" id="5853685">reflect</span><span class="op" id="5853692">.</span><span class="ident" id="5853693">Invalid</span><span class="op" id="5853700">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5853704">//&nbsp;Probably&nbsp;a&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853728">default</span><span class="op" id="5853735">:</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853739">return</span>&nbsp;<span class="ident" id="5853746">errors</span><span class="op" id="5853752">.</span><span class="ident" id="5853753">New</span><span class="op" id="5853756">(</span><span class="string" id="5853757">&#34;cannot&nbsp;unmarshal&nbsp;into&nbsp;&#34;</span>&nbsp;<span class="op" id="5853782">+</span>&nbsp;<span class="ident" id="5853784">dst0</span><span class="op" id="5853788">.</span><span class="ident" id="5853789">Type</span><span class="op" id="5853793">(</span><span class="op" id="5853794">)</span><span class="op" id="5853795">.</span><span class="ident" id="5853796">String</span><span class="op" id="5853802">(</span><span class="op" id="5853803">)</span><span class="op" id="5853804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853807">case</span>&nbsp;<span class="ident" id="5853812">reflect</span><span class="op" id="5853819">.</span><span class="ident" id="5853820">Int</span><span class="op" id="5853823">,</span>&nbsp;<span class="ident" id="5853825">reflect</span><span class="op" id="5853832">.</span><span class="ident" id="5853833">Int8</span><span class="op" id="5853837">,</span>&nbsp;<span class="ident" id="5853839">reflect</span><span class="op" id="5853846">.</span><span class="ident" id="5853847">Int16</span><span class="op" id="5853852">,</span>&nbsp;<span class="ident" id="5853854">reflect</span><span class="op" id="5853861">.</span><span class="ident" id="5853862">Int32</span><span class="op" id="5853867">,</span>&nbsp;<span class="ident" id="5853869">reflect</span><span class="op" id="5853876">.</span><span class="ident" id="5853877">Int64</span><span class="op" id="5853882">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853886">itmp</span><span class="op" id="5853890">,</span>&nbsp;<span class="ident" id="5853892">err</span>&nbsp;<span class="op" id="5853896">:=</span>&nbsp;<span class="ident" id="5853899">strconv</span><span class="op" id="5853906">.</span><span class="ident" id="5853907">ParseInt</span><span class="op" id="5853915">(</span><span class="builtintype" id="5853916">string</span><span class="op" id="5853922">(</span><span class="ident" id="5853923">src</span><span class="op" id="5853926">)</span><span class="op" id="5853927">,</span>&nbsp;<span class="num" id="5853929">10</span><span class="op" id="5853931">,</span>&nbsp;<span class="ident" id="5853933">dst</span><span class="op" id="5853936">.</span><span class="ident" id="5853937">Type</span><span class="op" id="5853941">(</span><span class="op" id="5853942">)</span><span class="op" id="5853943">.</span><span class="ident" id="5853944">Bits</span><span class="op" id="5853948">(</span><span class="op" id="5853949">)</span><span class="op" id="5853950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853954">if</span>&nbsp;<span class="ident" id="5853957">err</span>&nbsp;<span class="op" id="5853961">!=</span>&nbsp;<span class="ident" id="5853964">nil</span>&nbsp;<span class="op" id="5853968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853973">return</span>&nbsp;<span class="ident" id="5853980">err</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5853986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853990">dst</span><span class="op" id="5853993">.</span><span class="ident" id="5853994">SetInt</span><span class="op" id="5854000">(</span><span class="ident" id="5854001">itmp</span><span class="op" id="5854005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854008">case</span>&nbsp;<span class="ident" id="5854013">reflect</span><span class="op" id="5854020">.</span><span class="ident" id="5854021">Uint</span><span class="op" id="5854025">,</span>&nbsp;<span class="ident" id="5854027">reflect</span><span class="op" id="5854034">.</span><span class="ident" id="5854035">Uint8</span><span class="op" id="5854040">,</span>&nbsp;<span class="ident" id="5854042">reflect</span><span class="op" id="5854049">.</span><span class="ident" id="5854050">Uint16</span><span class="op" id="5854056">,</span>&nbsp;<span class="ident" id="5854058">reflect</span><span class="op" id="5854065">.</span><span class="ident" id="5854066">Uint32</span><span class="op" id="5854072">,</span>&nbsp;<span class="ident" id="5854074">reflect</span><span class="op" id="5854081">.</span><span class="ident" id="5854082">Uint64</span><span class="op" id="5854088">,</span>&nbsp;<span class="ident" id="5854090">reflect</span><span class="op" id="5854097">.</span><span class="ident" id="5854098">Uintptr</span><span class="op" id="5854105">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5854109">utmp</span><span class="op" id="5854113">,</span>&nbsp;<span class="ident" id="5854115">err</span>&nbsp;<span class="op" id="5854119">:=</span>&nbsp;<span class="ident" id="5854122">strconv</span><span class="op" id="5854129">.</span><span class="ident" id="5854130">ParseUint</span><span class="op" id="5854139">(</span><span class="builtintype" id="5854140">string</span><span class="op" id="5854146">(</span><span class="ident" id="5854147">src</span><span class="op" id="5854150">)</span><span class="op" id="5854151">,</span>&nbsp;<span class="num" id="5854153">10</span><span class="op" id="5854155">,</span>&nbsp;<span class="ident" id="5854157">dst</span><span class="op" id="5854160">.</span><span class="ident" id="5854161">Type</span><span class="op" id="5854165">(</span><span class="op" id="5854166">)</span><span class="op" id="5854167">.</span><span class="ident" id="5854168">Bits</span><span class="op" id="5854172">(</span><span class="op" id="5854173">)</span><span class="op" id="5854174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854178">if</span>&nbsp;<span class="ident" id="5854181">err</span>&nbsp;<span class="op" id="5854185">!=</span>&nbsp;<span class="ident" id="5854188">nil</span>&nbsp;<span class="op" id="5854192">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854197">return</span>&nbsp;<span class="ident" id="5854204">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5854210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5854214">dst</span><span class="op" id="5854217">.</span><span class="ident" id="5854218">SetUint</span><span class="op" id="5854225">(</span><span class="ident" id="5854226">utmp</span><span class="op" id="5854230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854233">case</span>&nbsp;<span class="ident" id="5854238">reflect</span><span class="op" id="5854245">.</span><span class="ident" id="5854246">Float32</span><span class="op" id="5854253">,</span>&nbsp;<span class="ident" id="5854255">reflect</span><span class="op" id="5854262">.</span><span class="ident" id="5854263">Float64</span><span class="op" id="5854270">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5854274">ftmp</span><span class="op" id="5854278">,</span>&nbsp;<span class="ident" id="5854280">err</span>&nbsp;<span class="op" id="5854284">:=</span>&nbsp;<span class="ident" id="5854287">strconv</span><span class="op" id="5854294">.</span><span class="ident" id="5854295">ParseFloat</span><span class="op" id="5854305">(</span><span class="builtintype" id="5854306">string</span><span class="op" id="5854312">(</span><span class="ident" id="5854313">src</span><span class="op" id="5854316">)</span><span class="op" id="5854317">,</span>&nbsp;<span class="ident" id="5854319">dst</span><span class="op" id="5854322">.</span><span class="ident" id="5854323">Type</span><span class="op" id="5854327">(</span><span class="op" id="5854328">)</span><span class="op" id="5854329">.</span><span class="ident" id="5854330">Bits</span><span class="op" id="5854334">(</span><span class="op" id="5854335">)</span><span class="op" id="5854336">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854340">if</span>&nbsp;<span class="ident" id="5854343">err</span>&nbsp;<span class="op" id="5854347">!=</span>&nbsp;<span class="ident" id="5854350">nil</span>&nbsp;<span class="op" id="5854354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854359">return</span>&nbsp;<span class="ident" id="5854366">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5854372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5854376">dst</span><span class="op" id="5854379">.</span><span class="ident" id="5854380">SetFloat</span><span class="op" id="5854388">(</span><span class="ident" id="5854389">ftmp</span><span class="op" id="5854393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854396">case</span>&nbsp;<span class="ident" id="5854401">reflect</span><span class="op" id="5854408">.</span><span class="ident" id="5854409">Bool</span><span class="op" id="5854413">:</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5854417">value</span><span class="op" id="5854422">,</span>&nbsp;<span class="ident" id="5854424">err</span>&nbsp;<span class="op" id="5854428">:=</span>&nbsp;<span class="ident" id="5854431">strconv</span><span class="op" id="5854438">.</span><span class="ident" id="5854439">ParseBool</span><span class="op" id="5854448">(</span><span class="ident" id="5854449">strings</span><span class="op" id="5854456">.</span><span class="ident" id="5854457">TrimSpace</span><span class="op" id="5854466">(</span><span class="builtintype" id="5854467">string</span><span class="op" id="5854473">(</span><span class="ident" id="5854474">src</span><span class="op" id="5854477">)</span><span class="op" id="5854478">)</span><span class="op" id="5854479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854483">if</span>&nbsp;<span class="ident" id="5854486">err</span>&nbsp;<span class="op" id="5854490">!=</span>&nbsp;<span class="ident" id="5854493">nil</span>&nbsp;<span class="op" id="5854497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854502">return</span>&nbsp;<span class="ident" id="5854509">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5854515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5854519">dst</span><span class="op" id="5854522">.</span><span class="ident" id="5854523">SetBool</span><span class="op" id="5854530">(</span><span class="ident" id="5854531">value</span><span class="op" id="5854536">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854539">case</span>&nbsp;<span class="ident" id="5854544">reflect</span><span class="op" id="5854551">.</span><span class="ident" id="5854552">String</span><span class="op" id="5854558">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5854562">dst</span><span class="op" id="5854565">.</span><span class="ident" id="5854566">SetString</span><span class="op" id="5854575">(</span><span class="builtintype" id="5854576">string</span><span class="op" id="5854582">(</span><span class="ident" id="5854583">src</span><span class="op" id="5854586">)</span><span class="op" id="5854587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854590">case</span>&nbsp;<span class="ident" id="5854595">reflect</span><span class="op" id="5854602">.</span><span class="ident" id="5854603">Slice</span><span class="op" id="5854608">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854612">if</span>&nbsp;<span class="builtinfunc" id="5854615">len</span><span class="op" id="5854618">(</span><span class="ident" id="5854619">src</span><span class="op" id="5854622">)</span>&nbsp;<span class="op" id="5854624">==</span>&nbsp;<span class="num" id="5854627">0</span>&nbsp;<span class="op" id="5854629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5854634">//&nbsp;non-nil&nbsp;to&nbsp;flag&nbsp;presence</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5854665">src</span>&nbsp;<span class="op" id="5854669">=</span>&nbsp;<span class="op" id="5854671">[</span><span class="op" id="5854672">]</span><span class="builtintype" id="5854673">byte</span><span class="op" id="5854677">{</span><span class="op" id="5854678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5854682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5854686">dst</span><span class="op" id="5854689">.</span><span class="ident" id="5854690">SetBytes</span><span class="op" id="5854698">(</span><span class="ident" id="5854699">src</span><span class="op" id="5854702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5854705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854708">return</span>&nbsp;<span class="ident" id="5854715">nil</span><br>
<span class="lineno">605</span><span class="op" id="5854719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5854722">//&nbsp;unmarshalPath&nbsp;walks&nbsp;down&nbsp;an&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;wanted</span><br>
<span class="lineno"></span><span class="comment" id="5854786">//&nbsp;paths,&nbsp;and&nbsp;calls&nbsp;unmarshal&nbsp;on&nbsp;them.</span><br>
<span class="lineno"></span><span class="comment" id="5854825">//&nbsp;The&nbsp;consumed&nbsp;result&nbsp;tells&nbsp;whether&nbsp;XML&nbsp;elements&nbsp;have&nbsp;been&nbsp;consumed</span><br>
<span class="lineno">610</span><span class="comment" id="5854894">//&nbsp;from&nbsp;the&nbsp;Decoder&nbsp;until&nbsp;start&#39;s&nbsp;matching&nbsp;end&nbsp;element,&nbsp;or&nbsp;if&nbsp;it&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="5854961">//&nbsp;still&nbsp;untouched&nbsp;because&nbsp;start&nbsp;is&nbsp;uninteresting&nbsp;for&nbsp;sv&#39;s&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="5855028">func</span>&nbsp;<span class="op" id="5855033">(</span><span class="ident" id="5855034">p</span>&nbsp;<span class="op" id="5855036">*</span><span class="ident" id="5855037">Decoder</span><span class="op" id="5855044">)</span>&nbsp;<span class="ident" id="5855046">unmarshalPath</span><span class="op" id="5855059">(</span><span class="ident" id="5855060">tinfo</span>&nbsp;<span class="op" id="5855066">*</span><span class="ident" id="5855067">typeInfo</span><span class="op" id="5855075">,</span>&nbsp;<span class="ident" id="5855077">sv</span>&nbsp;<span class="ident" id="5855080">reflect</span><span class="op" id="5855087">.</span><span class="ident" id="5855088">Value</span><span class="op" id="5855093">,</span>&nbsp;<span class="ident" id="5855095">parents</span>&nbsp;<span class="op" id="5855103">[</span><span class="op" id="5855104">]</span><span class="builtintype" id="5855105">string</span><span class="op" id="5855111">,</span>&nbsp;<span class="ident" id="5855113">start</span>&nbsp;<span class="op" id="5855119">*</span><span class="ident" id="5855120">StartElement</span><span class="op" id="5855132">)</span>&nbsp;<span class="op" id="5855134">(</span><span class="ident" id="5855135">consumed</span>&nbsp;<span class="builtintype" id="5855144">bool</span><span class="op" id="5855148">,</span>&nbsp;<span class="ident" id="5855150">err</span>&nbsp;<span class="builtintype" id="5855154">error</span><span class="op" id="5855159">)</span>&nbsp;<span class="op" id="5855161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5855164">recurse</span>&nbsp;<span class="op" id="5855172">:=</span>&nbsp;<span class="builtintype" id="5855175">false</span><br>
<span class="lineno"></span><span class="ident" id="5855181">Loop</span><span class="op" id="5855185">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855188">for</span>&nbsp;<span class="ident" id="5855192">i</span>&nbsp;<span class="op" id="5855194">:=</span>&nbsp;<span class="keyword" id="5855197">range</span>&nbsp;<span class="ident" id="5855203">tinfo</span><span class="op" id="5855208">.</span><span class="ident" id="5855209">fields</span>&nbsp;<span class="op" id="5855216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5855220">finfo</span>&nbsp;<span class="op" id="5855226">:=</span>&nbsp;<span class="op" id="5855229">&amp;</span><span class="ident" id="5855230">tinfo</span><span class="op" id="5855235">.</span><span class="ident" id="5855236">fields</span><span class="op" id="5855242">[</span><span class="ident" id="5855243">i</span><span class="op" id="5855244">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855248">if</span>&nbsp;<span class="ident" id="5855251">finfo</span><span class="op" id="5855256">.</span><span class="ident" id="5855257">flags</span><span class="op" id="5855262">&amp;</span><span class="ident" id="5855263">fElement</span>&nbsp;<span class="op" id="5855272">==</span>&nbsp;<span class="num" id="5855275">0</span>&nbsp;<span class="op" id="5855277">||</span>&nbsp;<span class="builtinfunc" id="5855280">len</span><span class="op" id="5855283">(</span><span class="ident" id="5855284">finfo</span><span class="op" id="5855289">.</span><span class="ident" id="5855290">parents</span><span class="op" id="5855297">)</span>&nbsp;<span class="op" id="5855299">&lt;</span>&nbsp;<span class="builtinfunc" id="5855301">len</span><span class="op" id="5855304">(</span><span class="ident" id="5855305">parents</span><span class="op" id="5855312">)</span>&nbsp;<span class="op" id="5855314">||</span>&nbsp;<span class="ident" id="5855317">finfo</span><span class="op" id="5855322">.</span><span class="ident" id="5855323">xmlns</span>&nbsp;<span class="op" id="5855329">!=</span>&nbsp;<span class="string" id="5855332">&#34;&#34;</span>&nbsp;<span class="op" id="5855335">&amp;&amp;</span>&nbsp;<span class="ident" id="5855338">finfo</span><span class="op" id="5855343">.</span><span class="ident" id="5855344">xmlns</span>&nbsp;<span class="op" id="5855350">!=</span>&nbsp;<span class="ident" id="5855353">start</span><span class="op" id="5855358">.</span><span class="ident" id="5855359">Name</span><span class="op" id="5855363">.</span><span class="ident" id="5855364">Space</span>&nbsp;<span class="op" id="5855370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855375">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5855386">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855390">for</span>&nbsp;<span class="ident" id="5855394">j</span>&nbsp;<span class="op" id="5855396">:=</span>&nbsp;<span class="keyword" id="5855399">range</span>&nbsp;<span class="ident" id="5855405">parents</span>&nbsp;<span class="op" id="5855413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855418">if</span>&nbsp;<span class="ident" id="5855421">parents</span><span class="op" id="5855428">[</span><span class="ident" id="5855429">j</span><span class="op" id="5855430">]</span>&nbsp;<span class="op" id="5855432">!=</span>&nbsp;<span class="ident" id="5855435">finfo</span><span class="op" id="5855440">.</span><span class="ident" id="5855441">parents</span><span class="op" id="5855448">[</span><span class="ident" id="5855449">j</span><span class="op" id="5855450">]</span>&nbsp;<span class="op" id="5855452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855458">continue</span>&nbsp;<span class="ident" id="5855467">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5855475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5855479">}</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855483">if</span>&nbsp;<span class="builtinfunc" id="5855486">len</span><span class="op" id="5855489">(</span><span class="ident" id="5855490">finfo</span><span class="op" id="5855495">.</span><span class="ident" id="5855496">parents</span><span class="op" id="5855503">)</span>&nbsp;<span class="op" id="5855505">==</span>&nbsp;<span class="builtinfunc" id="5855508">len</span><span class="op" id="5855511">(</span><span class="ident" id="5855512">parents</span><span class="op" id="5855519">)</span>&nbsp;<span class="op" id="5855521">&amp;&amp;</span>&nbsp;<span class="ident" id="5855524">finfo</span><span class="op" id="5855529">.</span><span class="ident" id="5855530">name</span>&nbsp;<span class="op" id="5855535">==</span>&nbsp;<span class="ident" id="5855538">start</span><span class="op" id="5855543">.</span><span class="ident" id="5855544">Name</span><span class="op" id="5855548">.</span><span class="ident" id="5855549">Local</span>&nbsp;<span class="op" id="5855555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5855560">//&nbsp;It&#39;s&nbsp;a&nbsp;perfect&nbsp;match,&nbsp;unmarshal&nbsp;the&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855609">return</span>&nbsp;<span class="builtintype" id="5855616">true</span><span class="op" id="5855620">,</span>&nbsp;<span class="ident" id="5855622">p</span><span class="op" id="5855623">.</span><span class="ident" id="5855624">unmarshal</span><span class="op" id="5855633">(</span><span class="ident" id="5855634">finfo</span><span class="op" id="5855639">.</span><span class="ident" id="5855640">value</span><span class="op" id="5855645">(</span><span class="ident" id="5855646">sv</span><span class="op" id="5855648">)</span><span class="op" id="5855649">,</span>&nbsp;<span class="ident" id="5855651">start</span><span class="op" id="5855656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5855660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855664">if</span>&nbsp;<span class="builtinfunc" id="5855667">len</span><span class="op" id="5855670">(</span><span class="ident" id="5855671">finfo</span><span class="op" id="5855676">.</span><span class="ident" id="5855677">parents</span><span class="op" id="5855684">)</span>&nbsp;<span class="op" id="5855686">&gt;</span>&nbsp;<span class="builtinfunc" id="5855688">len</span><span class="op" id="5855691">(</span><span class="ident" id="5855692">parents</span><span class="op" id="5855699">)</span>&nbsp;<span class="op" id="5855701">&amp;&amp;</span>&nbsp;<span class="ident" id="5855704">finfo</span><span class="op" id="5855709">.</span><span class="ident" id="5855710">parents</span><span class="op" id="5855717">[</span><span class="builtinfunc" id="5855718">len</span><span class="op" id="5855721">(</span><span class="ident" id="5855722">parents</span><span class="op" id="5855729">)</span><span class="op" id="5855730">]</span>&nbsp;<span class="op" id="5855732">==</span>&nbsp;<span class="ident" id="5855735">start</span><span class="op" id="5855740">.</span><span class="ident" id="5855741">Name</span><span class="op" id="5855745">.</span><span class="ident" id="5855746">Local</span>&nbsp;<span class="op" id="5855752">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5855757">//&nbsp;It&#39;s&nbsp;a&nbsp;prefix&nbsp;for&nbsp;the&nbsp;field.&nbsp;Break&nbsp;and&nbsp;recurse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5855810">//&nbsp;since&nbsp;it&#39;s&nbsp;not&nbsp;ok&nbsp;for&nbsp;one&nbsp;field&nbsp;path&nbsp;to&nbsp;be&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5855866">//&nbsp;the&nbsp;prefix&nbsp;for&nbsp;another&nbsp;field&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5855907">recurse</span>&nbsp;<span class="op" id="5855915">=</span>&nbsp;<span class="builtintype" id="5855917">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5855926">//&nbsp;We&nbsp;can&nbsp;reuse&nbsp;the&nbsp;same&nbsp;slice&nbsp;as&nbsp;long&nbsp;as&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5855974">//&nbsp;don&#39;t&nbsp;try&nbsp;to&nbsp;append&nbsp;to&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5856007">parents</span>&nbsp;<span class="op" id="5856015">=</span>&nbsp;<span class="ident" id="5856017">finfo</span><span class="op" id="5856022">.</span><span class="ident" id="5856023">parents</span><span class="op" id="5856030">[</span><span class="op" id="5856031">:</span><span class="builtinfunc" id="5856032">len</span><span class="op" id="5856035">(</span><span class="ident" id="5856036">parents</span><span class="op" id="5856043">)</span><span class="op" id="5856044">+</span><span class="num" id="5856045">1</span><span class="op" id="5856046">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856051">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5856059">}</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5856062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856065">if</span>&nbsp;<span class="op" id="5856068">!</span><span class="ident" id="5856069">recurse</span>&nbsp;<span class="op" id="5856077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5856081">//&nbsp;We&nbsp;have&nbsp;no&nbsp;business&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856125">return</span>&nbsp;<span class="builtintype" id="5856132">false</span><span class="op" id="5856137">,</span>&nbsp;<span class="ident" id="5856139">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5856144">}</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5856147">//&nbsp;The&nbsp;element&nbsp;is&nbsp;not&nbsp;a&nbsp;perfect&nbsp;match&nbsp;for&nbsp;any&nbsp;field,&nbsp;but&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5856209">//&nbsp;or&nbsp;more&nbsp;fields&nbsp;have&nbsp;the&nbsp;path&nbsp;to&nbsp;this&nbsp;element&nbsp;as&nbsp;a&nbsp;parent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5856270">//&nbsp;prefix.&nbsp;Recurse&nbsp;and&nbsp;attempt&nbsp;to&nbsp;match&nbsp;these.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856318">for</span>&nbsp;<span class="op" id="5856322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856326">var</span>&nbsp;<span class="ident" id="5856330">tok</span>&nbsp;<span class="ident" id="5856334">Token</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5856342">tok</span><span class="op" id="5856345">,</span>&nbsp;<span class="ident" id="5856347">err</span>&nbsp;<span class="op" id="5856351">=</span>&nbsp;<span class="ident" id="5856353">p</span><span class="op" id="5856354">.</span><span class="ident" id="5856355">Token</span><span class="op" id="5856360">(</span><span class="op" id="5856361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856365">if</span>&nbsp;<span class="ident" id="5856368">err</span>&nbsp;<span class="op" id="5856372">!=</span>&nbsp;<span class="ident" id="5856375">nil</span>&nbsp;<span class="op" id="5856379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856384">return</span>&nbsp;<span class="builtintype" id="5856391">true</span><span class="op" id="5856395">,</span>&nbsp;<span class="ident" id="5856397">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5856403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856407">switch</span>&nbsp;<span class="ident" id="5856414">t</span>&nbsp;<span class="op" id="5856416">:=</span>&nbsp;<span class="ident" id="5856419">tok</span><span class="op" id="5856422">.</span><span class="op" id="5856423">(</span><span class="keyword" id="5856424">type</span><span class="op" id="5856428">)</span>&nbsp;<span class="op" id="5856430">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856434">case</span>&nbsp;<span class="ident" id="5856439">StartElement</span><span class="op" id="5856451">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5856456">consumed2</span><span class="op" id="5856465">,</span>&nbsp;<span class="ident" id="5856467">err</span>&nbsp;<span class="op" id="5856471">:=</span>&nbsp;<span class="ident" id="5856474">p</span><span class="op" id="5856475">.</span><span class="ident" id="5856476">unmarshalPath</span><span class="op" id="5856489">(</span><span class="ident" id="5856490">tinfo</span><span class="op" id="5856495">,</span>&nbsp;<span class="ident" id="5856497">sv</span><span class="op" id="5856499">,</span>&nbsp;<span class="ident" id="5856501">parents</span><span class="op" id="5856508">,</span>&nbsp;<span class="op" id="5856510">&amp;</span><span class="ident" id="5856511">t</span><span class="op" id="5856512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856517">if</span>&nbsp;<span class="ident" id="5856520">err</span>&nbsp;<span class="op" id="5856524">!=</span>&nbsp;<span class="ident" id="5856527">nil</span>&nbsp;<span class="op" id="5856531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856537">return</span>&nbsp;<span class="builtintype" id="5856544">true</span><span class="op" id="5856548">,</span>&nbsp;<span class="ident" id="5856550">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5856557">}</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856562">if</span>&nbsp;<span class="op" id="5856565">!</span><span class="ident" id="5856566">consumed2</span>&nbsp;<span class="op" id="5856576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856582">if</span>&nbsp;<span class="ident" id="5856585">err</span>&nbsp;<span class="op" id="5856589">:=</span>&nbsp;<span class="ident" id="5856592">p</span><span class="op" id="5856593">.</span><span class="ident" id="5856594">Skip</span><span class="op" id="5856598">(</span><span class="op" id="5856599">)</span><span class="op" id="5856600">;</span>&nbsp;<span class="ident" id="5856602">err</span>&nbsp;<span class="op" id="5856606">!=</span>&nbsp;<span class="ident" id="5856609">nil</span>&nbsp;<span class="op" id="5856613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856620">return</span>&nbsp;<span class="builtintype" id="5856627">true</span><span class="op" id="5856631">,</span>&nbsp;<span class="ident" id="5856633">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5856641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5856646">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856650">case</span>&nbsp;<span class="ident" id="5856655">EndElement</span><span class="op" id="5856665">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856670">return</span>&nbsp;<span class="builtintype" id="5856677">true</span><span class="op" id="5856681">,</span>&nbsp;<span class="ident" id="5856683">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5856689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5856692">}</span><br>
<span class="lineno"></span><span class="op" id="5856694">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="5856697">//&nbsp;Skip&nbsp;reads&nbsp;tokens&nbsp;until&nbsp;it&nbsp;has&nbsp;consumed&nbsp;the&nbsp;end&nbsp;element</span><br>
<span class="lineno"></span><span class="comment" id="5856756">//&nbsp;matching&nbsp;the&nbsp;most&nbsp;recent&nbsp;start&nbsp;element&nbsp;already&nbsp;consumed.</span><br>
<span class="lineno"></span><span class="comment" id="5856816">//&nbsp;It&nbsp;recurs&nbsp;if&nbsp;it&nbsp;encounters&nbsp;a&nbsp;start&nbsp;element,&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5856884">//&nbsp;skip&nbsp;nested&nbsp;structures.</span><br>
<span class="lineno">675</span><span class="comment" id="5856911">//&nbsp;It&nbsp;returns&nbsp;nil&nbsp;if&nbsp;it&nbsp;finds&nbsp;an&nbsp;end&nbsp;element&nbsp;matching&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="5856975">//&nbsp;element;&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;an&nbsp;error&nbsp;describing&nbsp;the&nbsp;problem.</span><br>
<span class="lineno"></span><span class="keyword" id="5857041">func</span>&nbsp;<span class="op" id="5857046">(</span><span class="ident" id="5857047">d</span>&nbsp;<span class="op" id="5857049">*</span><span class="ident" id="5857050">Decoder</span><span class="op" id="5857057">)</span>&nbsp;<span class="ident" id="5857059">Skip</span><span class="op" id="5857063">(</span><span class="op" id="5857064">)</span>&nbsp;<span class="builtintype" id="5857066">error</span>&nbsp;<span class="op" id="5857072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5857075">for</span>&nbsp;<span class="op" id="5857079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5857083">tok</span><span class="op" id="5857086">,</span>&nbsp;<span class="ident" id="5857088">err</span>&nbsp;<span class="op" id="5857092">:=</span>&nbsp;<span class="ident" id="5857095">d</span><span class="op" id="5857096">.</span><span class="ident" id="5857097">Token</span><span class="op" id="5857102">(</span><span class="op" id="5857103">)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5857107">if</span>&nbsp;<span class="ident" id="5857110">err</span>&nbsp;<span class="op" id="5857114">!=</span>&nbsp;<span class="ident" id="5857117">nil</span>&nbsp;<span class="op" id="5857121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5857126">return</span>&nbsp;<span class="ident" id="5857133">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5857139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5857143">switch</span>&nbsp;<span class="ident" id="5857150">tok</span><span class="op" id="5857153">.</span><span class="op" id="5857154">(</span><span class="keyword" id="5857155">type</span><span class="op" id="5857159">)</span>&nbsp;<span class="op" id="5857161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5857165">case</span>&nbsp;<span class="ident" id="5857170">StartElement</span><span class="op" id="5857182">:</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5857187">if</span>&nbsp;<span class="ident" id="5857190">err</span>&nbsp;<span class="op" id="5857194">:=</span>&nbsp;<span class="ident" id="5857197">d</span><span class="op" id="5857198">.</span><span class="ident" id="5857199">Skip</span><span class="op" id="5857203">(</span><span class="op" id="5857204">)</span><span class="op" id="5857205">;</span>&nbsp;<span class="ident" id="5857207">err</span>&nbsp;<span class="op" id="5857211">!=</span>&nbsp;<span class="ident" id="5857214">nil</span>&nbsp;<span class="op" id="5857218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5857224">return</span>&nbsp;<span class="ident" id="5857231">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5857238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5857242">case</span>&nbsp;<span class="ident" id="5857247">EndElement</span><span class="op" id="5857257">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5857262">return</span>&nbsp;<span class="ident" id="5857269">nil</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5857275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5857278">}</span><br>
<span class="lineno"></span><span class="op" id="5857280">}</span>
</div>
</body>
</html>
