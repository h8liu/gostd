<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/macho</h2>
<ul>
<li><a href="/gostd/debug/macho/fat.go.html">fat.go</a></li>
<li><a href="/gostd/debug/macho/file.go.html">file.go</a></li>
<li><a href="/gostd/debug/macho/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/macho/macho.go.html">macho.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5415707">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5415763">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5415817">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5415868">//&nbsp;Package&nbsp;macho&nbsp;implements&nbsp;access&nbsp;to&nbsp;Mach-O&nbsp;object&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="5415927">package</span>&nbsp;<span class="ident" id="5415935">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5415942">//&nbsp;High&nbsp;level&nbsp;access&nbsp;to&nbsp;low&nbsp;level&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="5415994">import</span>&nbsp;<span class="op" id="5416001">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5416004">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5416013">&#34;debug/dwarf&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5416028">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5416047">&#34;fmt&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5416054">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5416060">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="5416065">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5416068">//&nbsp;A&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno">20</span><span class="keyword" id="5416110">type</span>&nbsp;<span class="ident" id="5416115">File</span>&nbsp;<span class="keyword" id="5416120">struct</span>&nbsp;<span class="op" id="5416127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416130">FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416142">ByteOrder</span>&nbsp;<span class="ident" id="5416152">binary</span><span class="op" id="5416158">.</span><span class="ident" id="5416159">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416170">Loads</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5416180">[</span><span class="op" id="5416181">]</span><span class="ident" id="5416182">Load</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416188">Sections</span>&nbsp;&nbsp;<span class="op" id="5416198">[</span><span class="op" id="5416199">]</span><span class="op" id="5416200">*</span><span class="ident" id="5416201">Section</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416211">Symtab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5416220">*</span><span class="ident" id="5416221">Symtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416229">Dysymtab</span>&nbsp;<span class="op" id="5416238">*</span><span class="ident" id="5416239">Dysymtab</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416250">closer</span>&nbsp;<span class="ident" id="5416257">io</span><span class="op" id="5416259">.</span><span class="ident" id="5416260">Closer</span><br>
<span class="lineno">30</span><span class="op" id="5416267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5416270">//&nbsp;A&nbsp;Load&nbsp;represents&nbsp;any&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5416316">type</span>&nbsp;<span class="ident" id="5416321">Load</span>&nbsp;<span class="keyword" id="5416326">interface</span>&nbsp;<span class="op" id="5416336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416339">Raw</span><span class="op" id="5416342">(</span><span class="op" id="5416343">)</span>&nbsp;<span class="op" id="5416345">[</span><span class="op" id="5416346">]</span><span class="builtintype" id="5416347">byte</span><br>
<span class="lineno">35</span><span class="op" id="5416352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5416355">//&nbsp;A&nbsp;LoadBytes&nbsp;is&nbsp;the&nbsp;uninterpreted&nbsp;bytes&nbsp;of&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5416423">type</span>&nbsp;<span class="ident" id="5416428">LoadBytes</span>&nbsp;<span class="op" id="5416438">[</span><span class="op" id="5416439">]</span><span class="builtintype" id="5416440">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="5416446">func</span>&nbsp;<span class="op" id="5416451">(</span><span class="ident" id="5416452">b</span>&nbsp;<span class="ident" id="5416454">LoadBytes</span><span class="op" id="5416463">)</span>&nbsp;<span class="ident" id="5416465">Raw</span><span class="op" id="5416468">(</span><span class="op" id="5416469">)</span>&nbsp;<span class="op" id="5416471">[</span><span class="op" id="5416472">]</span><span class="builtintype" id="5416473">byte</span>&nbsp;<span class="op" id="5416478">{</span>&nbsp;<span class="keyword" id="5416480">return</span>&nbsp;<span class="ident" id="5416487">b</span>&nbsp;<span class="op" id="5416489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5416492">//&nbsp;A&nbsp;SegmentHeader&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5416577">type</span>&nbsp;<span class="ident" id="5416582">SegmentHeader</span>&nbsp;<span class="keyword" id="5416596">struct</span>&nbsp;<span class="op" id="5416603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416606">Cmd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5416614">LoadCmd</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416623">Len</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5416631">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416639">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5416647">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416655">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5416663">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416671">Memsz</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5416679">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416687">Offset</span>&nbsp;&nbsp;<span class="ident" id="5416695">uint64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416703">Filesz</span>&nbsp;&nbsp;<span class="ident" id="5416711">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416719">Maxprot</span>&nbsp;<span class="builtintype" id="5416727">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416735">Prot</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5416743">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416751">Nsect</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5416759">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416767">Flag</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5416775">uint32</span><br>
<span class="lineno">55</span><span class="op" id="5416782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5416785">//&nbsp;A&nbsp;Segment&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5416857">type</span>&nbsp;<span class="ident" id="5416862">Segment</span>&nbsp;<span class="keyword" id="5416870">struct</span>&nbsp;<span class="op" id="5416877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416880">LoadBytes</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416891">SegmentHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5416907">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5416945">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5416985">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5417020">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5417068">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5417118">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417142">io</span><span class="op" id="5417144">.</span><span class="ident" id="5417145">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417155">sr</span>&nbsp;<span class="op" id="5417158">*</span><span class="ident" id="5417159">io</span><span class="op" id="5417161">.</span><span class="ident" id="5417162">SectionReader</span><br>
<span class="lineno">70</span><span class="op" id="5417176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5417179">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="5417234">func</span>&nbsp;<span class="op" id="5417239">(</span><span class="ident" id="5417240">s</span>&nbsp;<span class="op" id="5417242">*</span><span class="ident" id="5417243">Segment</span><span class="op" id="5417250">)</span>&nbsp;<span class="ident" id="5417252">Data</span><span class="op" id="5417256">(</span><span class="op" id="5417257">)</span>&nbsp;<span class="op" id="5417259">(</span><span class="op" id="5417260">[</span><span class="op" id="5417261">]</span><span class="builtintype" id="5417262">byte</span><span class="op" id="5417266">,</span>&nbsp;<span class="builtintype" id="5417268">error</span><span class="op" id="5417273">)</span>&nbsp;<span class="op" id="5417275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417278">dat</span>&nbsp;<span class="op" id="5417282">:=</span>&nbsp;<span class="builtinfunc" id="5417285">make</span><span class="op" id="5417289">(</span><span class="op" id="5417290">[</span><span class="op" id="5417291">]</span><span class="builtintype" id="5417292">byte</span><span class="op" id="5417296">,</span>&nbsp;<span class="ident" id="5417298">s</span><span class="op" id="5417299">.</span><span class="ident" id="5417300">sr</span><span class="op" id="5417302">.</span><span class="ident" id="5417303">Size</span><span class="op" id="5417307">(</span><span class="op" id="5417308">)</span><span class="op" id="5417309">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417312">n</span><span class="op" id="5417313">,</span>&nbsp;<span class="ident" id="5417315">err</span>&nbsp;<span class="op" id="5417319">:=</span>&nbsp;<span class="ident" id="5417322">s</span><span class="op" id="5417323">.</span><span class="ident" id="5417324">sr</span><span class="op" id="5417326">.</span><span class="ident" id="5417327">ReadAt</span><span class="op" id="5417333">(</span><span class="ident" id="5417334">dat</span><span class="op" id="5417337">,</span>&nbsp;<span class="num" id="5417339">0</span><span class="op" id="5417340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5417343">if</span>&nbsp;<span class="ident" id="5417346">n</span>&nbsp;<span class="op" id="5417348">==</span>&nbsp;<span class="builtinfunc" id="5417351">len</span><span class="op" id="5417354">(</span><span class="ident" id="5417355">dat</span><span class="op" id="5417358">)</span>&nbsp;<span class="op" id="5417360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417364">err</span>&nbsp;<span class="op" id="5417368">=</span>&nbsp;<span class="ident" id="5417370">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5417375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5417378">return</span>&nbsp;<span class="ident" id="5417385">dat</span><span class="op" id="5417388">[</span><span class="num" id="5417389">0</span><span class="op" id="5417390">:</span><span class="ident" id="5417391">n</span><span class="op" id="5417392">]</span><span class="op" id="5417393">,</span>&nbsp;<span class="ident" id="5417395">err</span><br>
<span class="lineno">80</span><span class="op" id="5417399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5417402">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="5417456">func</span>&nbsp;<span class="op" id="5417461">(</span><span class="ident" id="5417462">s</span>&nbsp;<span class="op" id="5417464">*</span><span class="ident" id="5417465">Segment</span><span class="op" id="5417472">)</span>&nbsp;<span class="ident" id="5417474">Open</span><span class="op" id="5417478">(</span><span class="op" id="5417479">)</span>&nbsp;<span class="ident" id="5417481">io</span><span class="op" id="5417483">.</span><span class="ident" id="5417484">ReadSeeker</span>&nbsp;<span class="op" id="5417495">{</span>&nbsp;<span class="keyword" id="5417497">return</span>&nbsp;<span class="ident" id="5417504">io</span><span class="op" id="5417506">.</span><span class="ident" id="5417507">NewSectionReader</span><span class="op" id="5417523">(</span><span class="ident" id="5417524">s</span><span class="op" id="5417525">.</span><span class="ident" id="5417526">sr</span><span class="op" id="5417528">,</span>&nbsp;<span class="num" id="5417530">0</span><span class="op" id="5417531">,</span>&nbsp;<span class="num" id="5417533">1</span><span class="op" id="5417534">&lt;&lt;</span><span class="num" id="5417536">63</span><span class="op" id="5417538">-</span><span class="num" id="5417539">1</span><span class="op" id="5417540">)</span>&nbsp;<span class="op" id="5417542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="5417545">type</span>&nbsp;<span class="ident" id="5417550">SectionHeader</span>&nbsp;<span class="keyword" id="5417564">struct</span>&nbsp;<span class="op" id="5417571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417574">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5417581">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417589">Seg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5417596">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417604">Addr</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5417611">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417619">Size</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5417626">uint64</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417634">Offset</span>&nbsp;<span class="builtintype" id="5417641">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417649">Align</span>&nbsp;&nbsp;<span class="builtintype" id="5417656">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417664">Reloff</span>&nbsp;<span class="builtintype" id="5417671">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417679">Nreloc</span>&nbsp;<span class="builtintype" id="5417686">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417694">Flags</span>&nbsp;&nbsp;<span class="builtintype" id="5417701">uint32</span><br>
<span class="lineno">95</span><span class="op" id="5417708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5417711">type</span>&nbsp;<span class="ident" id="5417716">Section</span>&nbsp;<span class="keyword" id="5417724">struct</span>&nbsp;<span class="op" id="5417731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417734">SectionHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5417750">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5417788">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5417828">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5417863">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5417911">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5417961">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417985">io</span><span class="op" id="5417987">.</span><span class="ident" id="5417988">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417998">sr</span>&nbsp;<span class="op" id="5418001">*</span><span class="ident" id="5418002">io</span><span class="op" id="5418004">.</span><span class="ident" id="5418005">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="5418019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="5418022">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5418084">func</span>&nbsp;<span class="op" id="5418089">(</span><span class="ident" id="5418090">s</span>&nbsp;<span class="op" id="5418092">*</span><span class="ident" id="5418093">Section</span><span class="op" id="5418100">)</span>&nbsp;<span class="ident" id="5418102">Data</span><span class="op" id="5418106">(</span><span class="op" id="5418107">)</span>&nbsp;<span class="op" id="5418109">(</span><span class="op" id="5418110">[</span><span class="op" id="5418111">]</span><span class="builtintype" id="5418112">byte</span><span class="op" id="5418116">,</span>&nbsp;<span class="builtintype" id="5418118">error</span><span class="op" id="5418123">)</span>&nbsp;<span class="op" id="5418125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418128">dat</span>&nbsp;<span class="op" id="5418132">:=</span>&nbsp;<span class="builtinfunc" id="5418135">make</span><span class="op" id="5418139">(</span><span class="op" id="5418140">[</span><span class="op" id="5418141">]</span><span class="builtintype" id="5418142">byte</span><span class="op" id="5418146">,</span>&nbsp;<span class="ident" id="5418148">s</span><span class="op" id="5418149">.</span><span class="ident" id="5418150">sr</span><span class="op" id="5418152">.</span><span class="ident" id="5418153">Size</span><span class="op" id="5418157">(</span><span class="op" id="5418158">)</span><span class="op" id="5418159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418162">n</span><span class="op" id="5418163">,</span>&nbsp;<span class="ident" id="5418165">err</span>&nbsp;<span class="op" id="5418169">:=</span>&nbsp;<span class="ident" id="5418172">s</span><span class="op" id="5418173">.</span><span class="ident" id="5418174">sr</span><span class="op" id="5418176">.</span><span class="ident" id="5418177">ReadAt</span><span class="op" id="5418183">(</span><span class="ident" id="5418184">dat</span><span class="op" id="5418187">,</span>&nbsp;<span class="num" id="5418189">0</span><span class="op" id="5418190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5418193">if</span>&nbsp;<span class="ident" id="5418196">n</span>&nbsp;<span class="op" id="5418198">==</span>&nbsp;<span class="builtinfunc" id="5418201">len</span><span class="op" id="5418204">(</span><span class="ident" id="5418205">dat</span><span class="op" id="5418208">)</span>&nbsp;<span class="op" id="5418210">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418214">err</span>&nbsp;<span class="op" id="5418218">=</span>&nbsp;<span class="ident" id="5418220">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5418225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5418228">return</span>&nbsp;<span class="ident" id="5418235">dat</span><span class="op" id="5418238">[</span><span class="num" id="5418239">0</span><span class="op" id="5418240">:</span><span class="ident" id="5418241">n</span><span class="op" id="5418242">]</span><span class="op" id="5418243">,</span>&nbsp;<span class="ident" id="5418245">err</span><br>
<span class="lineno"></span><span class="op" id="5418249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="5418252">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5418313">func</span>&nbsp;<span class="op" id="5418318">(</span><span class="ident" id="5418319">s</span>&nbsp;<span class="op" id="5418321">*</span><span class="ident" id="5418322">Section</span><span class="op" id="5418329">)</span>&nbsp;<span class="ident" id="5418331">Open</span><span class="op" id="5418335">(</span><span class="op" id="5418336">)</span>&nbsp;<span class="ident" id="5418338">io</span><span class="op" id="5418340">.</span><span class="ident" id="5418341">ReadSeeker</span>&nbsp;<span class="op" id="5418352">{</span>&nbsp;<span class="keyword" id="5418354">return</span>&nbsp;<span class="ident" id="5418361">io</span><span class="op" id="5418363">.</span><span class="ident" id="5418364">NewSectionReader</span><span class="op" id="5418380">(</span><span class="ident" id="5418381">s</span><span class="op" id="5418382">.</span><span class="ident" id="5418383">sr</span><span class="op" id="5418385">,</span>&nbsp;<span class="num" id="5418387">0</span><span class="op" id="5418388">,</span>&nbsp;<span class="num" id="5418390">1</span><span class="op" id="5418391">&lt;&lt;</span><span class="num" id="5418393">63</span><span class="op" id="5418395">-</span><span class="num" id="5418396">1</span><span class="op" id="5418397">)</span>&nbsp;<span class="op" id="5418399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5418402">//&nbsp;A&nbsp;Dylib&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;dynamic&nbsp;library&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5418463">type</span>&nbsp;<span class="ident" id="5418468">Dylib</span>&nbsp;<span class="keyword" id="5418474">struct</span>&nbsp;<span class="op" id="5418481">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418484">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418495">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5418510">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418518">Time</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5418533">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418541">CurrentVersion</span>&nbsp;<span class="builtintype" id="5418556">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418564">CompatVersion</span>&nbsp;&nbsp;<span class="builtintype" id="5418579">uint32</span><br>
<span class="lineno">130</span><span class="op" id="5418586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5418589">//&nbsp;A&nbsp;Symtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5418643">type</span>&nbsp;<span class="ident" id="5418648">Symtab</span>&nbsp;<span class="keyword" id="5418655">struct</span>&nbsp;<span class="op" id="5418662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418665">LoadBytes</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418676">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418687">Syms</span>&nbsp;<span class="op" id="5418692">[</span><span class="op" id="5418693">]</span><span class="ident" id="5418694">Symbol</span><br>
<span class="lineno"></span><span class="op" id="5418701">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5418704">//&nbsp;A&nbsp;Dysymtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;dynamic&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno">140</span><span class="keyword" id="5418768">type</span>&nbsp;<span class="ident" id="5418773">Dysymtab</span>&nbsp;<span class="keyword" id="5418782">struct</span>&nbsp;<span class="op" id="5418789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418792">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418803">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418816">IndirectSyms</span>&nbsp;<span class="op" id="5418829">[</span><span class="op" id="5418830">]</span><span class="builtintype" id="5418831">uint32</span>&nbsp;<span class="comment" id="5418838">//&nbsp;indices&nbsp;into&nbsp;Symtab.Syms</span><br>
<span class="lineno"></span><span class="op" id="5418866">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="5418869">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Mach-O&nbsp;reader<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="5418894">//&nbsp;FormatError&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;operations&nbsp;if&nbsp;the&nbsp;data&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="5418957">//&nbsp;not&nbsp;have&nbsp;the&nbsp;correct&nbsp;format&nbsp;for&nbsp;an&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5419008">type</span>&nbsp;<span class="ident" id="5419013">FormatError</span>&nbsp;<span class="keyword" id="5419025">struct</span>&nbsp;<span class="op" id="5419032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5419035">off</span>&nbsp;<span class="ident" id="5419039">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5419046">msg</span>&nbsp;<span class="builtintype" id="5419050">string</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5419058">val</span>&nbsp;<span class="keyword" id="5419062">interface</span><span class="op" id="5419071">{</span><span class="op" id="5419072">}</span><br>
<span class="lineno"></span><span class="op" id="5419074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5419077">func</span>&nbsp;<span class="op" id="5419082">(</span><span class="ident" id="5419083">e</span>&nbsp;<span class="op" id="5419085">*</span><span class="ident" id="5419086">FormatError</span><span class="op" id="5419097">)</span>&nbsp;<span class="ident" id="5419099">Error</span><span class="op" id="5419104">(</span><span class="op" id="5419105">)</span>&nbsp;<span class="builtintype" id="5419107">string</span>&nbsp;<span class="op" id="5419114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5419117">msg</span>&nbsp;<span class="op" id="5419121">:=</span>&nbsp;<span class="ident" id="5419124">e</span><span class="op" id="5419125">.</span><span class="ident" id="5419126">msg</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5419131">if</span>&nbsp;<span class="ident" id="5419134">e</span><span class="op" id="5419135">.</span><span class="ident" id="5419136">val</span>&nbsp;<span class="op" id="5419140">!=</span>&nbsp;<span class="ident" id="5419143">nil</span>&nbsp;<span class="op" id="5419147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5419151">msg</span>&nbsp;<span class="op" id="5419155">+=</span>&nbsp;<span class="ident" id="5419158">fmt</span><span class="op" id="5419161">.</span><span class="ident" id="5419162">Sprintf</span><span class="op" id="5419169">(</span><span class="string" id="5419170">&#34;&nbsp;&#39;%v&#39;&#34;</span><span class="op" id="5419177">,</span>&nbsp;<span class="ident" id="5419179">e</span><span class="op" id="5419180">.</span><span class="ident" id="5419181">val</span><span class="op" id="5419184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5419187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5419190">msg</span>&nbsp;<span class="op" id="5419194">+=</span>&nbsp;<span class="ident" id="5419197">fmt</span><span class="op" id="5419200">.</span><span class="ident" id="5419201">Sprintf</span><span class="op" id="5419208">(</span><span class="string" id="5419209">&#34;&nbsp;in&nbsp;record&nbsp;at&nbsp;byte&nbsp;%#x&#34;</span><span class="op" id="5419233">,</span>&nbsp;<span class="ident" id="5419235">e</span><span class="op" id="5419236">.</span><span class="ident" id="5419237">off</span><span class="op" id="5419240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5419243">return</span>&nbsp;<span class="ident" id="5419250">msg</span><br>
<span class="lineno">165</span><span class="op" id="5419254">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5419257">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Mach-O&nbsp;binary.</span><br>
<span class="lineno"></span><span class="keyword" id="5419344">func</span>&nbsp;<span class="ident" id="5419349">Open</span><span class="op" id="5419353">(</span><span class="ident" id="5419354">name</span>&nbsp;<span class="builtintype" id="5419359">string</span><span class="op" id="5419365">)</span>&nbsp;<span class="op" id="5419367">(</span><span class="op" id="5419368">*</span><span class="ident" id="5419369">File</span><span class="op" id="5419373">,</span>&nbsp;<span class="builtintype" id="5419375">error</span><span class="op" id="5419380">)</span>&nbsp;<span class="op" id="5419382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5419385">f</span><span class="op" id="5419386">,</span>&nbsp;<span class="ident" id="5419388">err</span>&nbsp;<span class="op" id="5419392">:=</span>&nbsp;<span class="ident" id="5419395">os</span><span class="op" id="5419397">.</span><span class="ident" id="5419398">Open</span><span class="op" id="5419402">(</span><span class="ident" id="5419403">name</span><span class="op" id="5419407">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5419410">if</span>&nbsp;<span class="ident" id="5419413">err</span>&nbsp;<span class="op" id="5419417">!=</span>&nbsp;<span class="ident" id="5419420">nil</span>&nbsp;<span class="op" id="5419424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5419428">return</span>&nbsp;<span class="ident" id="5419435">nil</span><span class="op" id="5419438">,</span>&nbsp;<span class="ident" id="5419440">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5419445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5419448">ff</span><span class="op" id="5419450">,</span>&nbsp;<span class="ident" id="5419452">err</span>&nbsp;<span class="op" id="5419456">:=</span>&nbsp;<span class="ident" id="5419459">NewFile</span><span class="op" id="5419466">(</span><span class="ident" id="5419467">f</span><span class="op" id="5419468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5419471">if</span>&nbsp;<span class="ident" id="5419474">err</span>&nbsp;<span class="op" id="5419478">!=</span>&nbsp;<span class="ident" id="5419481">nil</span>&nbsp;<span class="op" id="5419485">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5419489">f</span><span class="op" id="5419490">.</span><span class="ident" id="5419491">Close</span><span class="op" id="5419496">(</span><span class="op" id="5419497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5419501">return</span>&nbsp;<span class="ident" id="5419508">nil</span><span class="op" id="5419511">,</span>&nbsp;<span class="ident" id="5419513">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5419518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5419521">ff</span><span class="op" id="5419523">.</span><span class="ident" id="5419524">closer</span>&nbsp;<span class="op" id="5419531">=</span>&nbsp;<span class="ident" id="5419533">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5419536">return</span>&nbsp;<span class="ident" id="5419543">ff</span><span class="op" id="5419545">,</span>&nbsp;<span class="ident" id="5419547">nil</span><br>
<span class="lineno">180</span><span class="op" id="5419551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5419554">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="5419580">//&nbsp;If&nbsp;the&nbsp;File&nbsp;was&nbsp;created&nbsp;using&nbsp;NewFile&nbsp;directly&nbsp;instead&nbsp;of&nbsp;Open,</span><br>
<span class="lineno"></span><span class="comment" id="5419647">//&nbsp;Close&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">185</span><span class="keyword" id="5419671">func</span>&nbsp;<span class="op" id="5419676">(</span><span class="ident" id="5419677">f</span>&nbsp;<span class="op" id="5419679">*</span><span class="ident" id="5419680">File</span><span class="op" id="5419684">)</span>&nbsp;<span class="ident" id="5419686">Close</span><span class="op" id="5419691">(</span><span class="op" id="5419692">)</span>&nbsp;<span class="builtintype" id="5419694">error</span>&nbsp;<span class="op" id="5419700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5419703">var</span>&nbsp;<span class="ident" id="5419707">err</span>&nbsp;<span class="builtintype" id="5419711">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5419718">if</span>&nbsp;<span class="ident" id="5419721">f</span><span class="op" id="5419722">.</span><span class="ident" id="5419723">closer</span>&nbsp;<span class="op" id="5419730">!=</span>&nbsp;<span class="ident" id="5419733">nil</span>&nbsp;<span class="op" id="5419737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5419741">err</span>&nbsp;<span class="op" id="5419745">=</span>&nbsp;<span class="ident" id="5419747">f</span><span class="op" id="5419748">.</span><span class="ident" id="5419749">closer</span><span class="op" id="5419755">.</span><span class="ident" id="5419756">Close</span><span class="op" id="5419761">(</span><span class="op" id="5419762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5419766">f</span><span class="op" id="5419767">.</span><span class="ident" id="5419768">closer</span>&nbsp;<span class="op" id="5419775">=</span>&nbsp;<span class="ident" id="5419777">nil</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5419782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5419785">return</span>&nbsp;<span class="ident" id="5419792">err</span><br>
<span class="lineno"></span><span class="op" id="5419796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5419799">//&nbsp;NewFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;File&nbsp;for&nbsp;accessing&nbsp;a&nbsp;Mach-O&nbsp;binary&nbsp;in&nbsp;an&nbsp;underlying&nbsp;reader.</span><br>
<span class="lineno">195</span><span class="comment" id="5419884">//&nbsp;The&nbsp;Mach-O&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno"></span><span class="keyword" id="5419957">func</span>&nbsp;<span class="ident" id="5419962">NewFile</span><span class="op" id="5419969">(</span><span class="ident" id="5419970">r</span>&nbsp;<span class="ident" id="5419972">io</span><span class="op" id="5419974">.</span><span class="ident" id="5419975">ReaderAt</span><span class="op" id="5419983">)</span>&nbsp;<span class="op" id="5419985">(</span><span class="op" id="5419986">*</span><span class="ident" id="5419987">File</span><span class="op" id="5419991">,</span>&nbsp;<span class="builtintype" id="5419993">error</span><span class="op" id="5419998">)</span>&nbsp;<span class="op" id="5420000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420003">f</span>&nbsp;<span class="op" id="5420005">:=</span>&nbsp;<span class="builtinfunc" id="5420008">new</span><span class="op" id="5420011">(</span><span class="ident" id="5420012">File</span><span class="op" id="5420016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420019">sr</span>&nbsp;<span class="op" id="5420022">:=</span>&nbsp;<span class="ident" id="5420025">io</span><span class="op" id="5420027">.</span><span class="ident" id="5420028">NewSectionReader</span><span class="op" id="5420044">(</span><span class="ident" id="5420045">r</span><span class="op" id="5420046">,</span>&nbsp;<span class="num" id="5420048">0</span><span class="op" id="5420049">,</span>&nbsp;<span class="num" id="5420051">1</span><span class="op" id="5420052">&lt;&lt;</span><span class="num" id="5420054">63</span><span class="op" id="5420056">-</span><span class="num" id="5420057">1</span><span class="op" id="5420058">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5420062">//&nbsp;Read&nbsp;and&nbsp;decode&nbsp;Mach&nbsp;magic&nbsp;to&nbsp;determine&nbsp;byte&nbsp;order,&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5420124">//&nbsp;Magic32&nbsp;and&nbsp;Magic64&nbsp;differ&nbsp;only&nbsp;in&nbsp;the&nbsp;bottom&nbsp;bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420179">var</span>&nbsp;<span class="ident" id="5420183">ident</span>&nbsp;<span class="op" id="5420189">[</span><span class="num" id="5420190">4</span><span class="op" id="5420191">]</span><span class="builtintype" id="5420192">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420198">if</span>&nbsp;<span class="ident" id="5420201">_</span><span class="op" id="5420202">,</span>&nbsp;<span class="ident" id="5420204">err</span>&nbsp;<span class="op" id="5420208">:=</span>&nbsp;<span class="ident" id="5420211">r</span><span class="op" id="5420212">.</span><span class="ident" id="5420213">ReadAt</span><span class="op" id="5420219">(</span><span class="ident" id="5420220">ident</span><span class="op" id="5420225">[</span><span class="num" id="5420226">0</span><span class="op" id="5420227">:</span><span class="op" id="5420228">]</span><span class="op" id="5420229">,</span>&nbsp;<span class="num" id="5420231">0</span><span class="op" id="5420232">)</span><span class="op" id="5420233">;</span>&nbsp;<span class="ident" id="5420235">err</span>&nbsp;<span class="op" id="5420239">!=</span>&nbsp;<span class="ident" id="5420242">nil</span>&nbsp;<span class="op" id="5420246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420250">return</span>&nbsp;<span class="ident" id="5420257">nil</span><span class="op" id="5420260">,</span>&nbsp;<span class="ident" id="5420262">err</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5420267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420270">be</span>&nbsp;<span class="op" id="5420273">:=</span>&nbsp;<span class="ident" id="5420276">binary</span><span class="op" id="5420282">.</span><span class="ident" id="5420283">BigEndian</span><span class="op" id="5420292">.</span><span class="ident" id="5420293">Uint32</span><span class="op" id="5420299">(</span><span class="ident" id="5420300">ident</span><span class="op" id="5420305">[</span><span class="num" id="5420306">0</span><span class="op" id="5420307">:</span><span class="op" id="5420308">]</span><span class="op" id="5420309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420312">le</span>&nbsp;<span class="op" id="5420315">:=</span>&nbsp;<span class="ident" id="5420318">binary</span><span class="op" id="5420324">.</span><span class="ident" id="5420325">LittleEndian</span><span class="op" id="5420337">.</span><span class="ident" id="5420338">Uint32</span><span class="op" id="5420344">(</span><span class="ident" id="5420345">ident</span><span class="op" id="5420350">[</span><span class="num" id="5420351">0</span><span class="op" id="5420352">:</span><span class="op" id="5420353">]</span><span class="op" id="5420354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420357">switch</span>&nbsp;<span class="ident" id="5420364">Magic32</span>&nbsp;<span class="op" id="5420372">&amp;^</span>&nbsp;<span class="num" id="5420375">1</span>&nbsp;<span class="op" id="5420377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420380">case</span>&nbsp;<span class="ident" id="5420385">be</span>&nbsp;<span class="op" id="5420388">&amp;^</span>&nbsp;<span class="num" id="5420391">1</span><span class="op" id="5420392">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420396">f</span><span class="op" id="5420397">.</span><span class="ident" id="5420398">ByteOrder</span>&nbsp;<span class="op" id="5420408">=</span>&nbsp;<span class="ident" id="5420410">binary</span><span class="op" id="5420416">.</span><span class="ident" id="5420417">BigEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420429">f</span><span class="op" id="5420430">.</span><span class="ident" id="5420431">Magic</span>&nbsp;<span class="op" id="5420437">=</span>&nbsp;<span class="ident" id="5420439">be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420443">case</span>&nbsp;<span class="ident" id="5420448">le</span>&nbsp;<span class="op" id="5420451">&amp;^</span>&nbsp;<span class="num" id="5420454">1</span><span class="op" id="5420455">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420459">f</span><span class="op" id="5420460">.</span><span class="ident" id="5420461">ByteOrder</span>&nbsp;<span class="op" id="5420471">=</span>&nbsp;<span class="ident" id="5420473">binary</span><span class="op" id="5420479">.</span><span class="ident" id="5420480">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420495">f</span><span class="op" id="5420496">.</span><span class="ident" id="5420497">Magic</span>&nbsp;<span class="op" id="5420503">=</span>&nbsp;<span class="ident" id="5420505">le</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420509">default</span><span class="op" id="5420516">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420520">return</span>&nbsp;<span class="ident" id="5420527">nil</span><span class="op" id="5420530">,</span>&nbsp;<span class="op" id="5420532">&amp;</span><span class="ident" id="5420533">FormatError</span><span class="op" id="5420544">{</span><span class="num" id="5420545">0</span><span class="op" id="5420546">,</span>&nbsp;<span class="string" id="5420548">&#34;invalid&nbsp;magic&nbsp;number&#34;</span><span class="op" id="5420570">,</span>&nbsp;<span class="ident" id="5420572">nil</span><span class="op" id="5420575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5420578">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5420582">//&nbsp;Read&nbsp;entire&nbsp;file&nbsp;header.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420611">if</span>&nbsp;<span class="ident" id="5420614">err</span>&nbsp;<span class="op" id="5420618">:=</span>&nbsp;<span class="ident" id="5420621">binary</span><span class="op" id="5420627">.</span><span class="ident" id="5420628">Read</span><span class="op" id="5420632">(</span><span class="ident" id="5420633">sr</span><span class="op" id="5420635">,</span>&nbsp;<span class="ident" id="5420637">f</span><span class="op" id="5420638">.</span><span class="ident" id="5420639">ByteOrder</span><span class="op" id="5420648">,</span>&nbsp;<span class="op" id="5420650">&amp;</span><span class="ident" id="5420651">f</span><span class="op" id="5420652">.</span><span class="ident" id="5420653">FileHeader</span><span class="op" id="5420663">)</span><span class="op" id="5420664">;</span>&nbsp;<span class="ident" id="5420666">err</span>&nbsp;<span class="op" id="5420670">!=</span>&nbsp;<span class="ident" id="5420673">nil</span>&nbsp;<span class="op" id="5420677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420681">return</span>&nbsp;<span class="ident" id="5420688">nil</span><span class="op" id="5420691">,</span>&nbsp;<span class="ident" id="5420693">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5420698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5420702">//&nbsp;Then&nbsp;load&nbsp;commands.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420726">offset</span>&nbsp;<span class="op" id="5420733">:=</span>&nbsp;<span class="ident" id="5420736">int64</span><span class="op" id="5420741">(</span><span class="ident" id="5420742">fileHeaderSize32</span><span class="op" id="5420758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420761">if</span>&nbsp;<span class="ident" id="5420764">f</span><span class="op" id="5420765">.</span><span class="ident" id="5420766">Magic</span>&nbsp;<span class="op" id="5420772">==</span>&nbsp;<span class="ident" id="5420775">Magic64</span>&nbsp;<span class="op" id="5420783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420787">offset</span>&nbsp;<span class="op" id="5420794">=</span>&nbsp;<span class="ident" id="5420796">fileHeaderSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5420814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420817">dat</span>&nbsp;<span class="op" id="5420821">:=</span>&nbsp;<span class="builtinfunc" id="5420824">make</span><span class="op" id="5420828">(</span><span class="op" id="5420829">[</span><span class="op" id="5420830">]</span><span class="builtintype" id="5420831">byte</span><span class="op" id="5420835">,</span>&nbsp;<span class="ident" id="5420837">f</span><span class="op" id="5420838">.</span><span class="ident" id="5420839">Cmdsz</span><span class="op" id="5420844">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420847">if</span>&nbsp;<span class="ident" id="5420850">_</span><span class="op" id="5420851">,</span>&nbsp;<span class="ident" id="5420853">err</span>&nbsp;<span class="op" id="5420857">:=</span>&nbsp;<span class="ident" id="5420860">r</span><span class="op" id="5420861">.</span><span class="ident" id="5420862">ReadAt</span><span class="op" id="5420868">(</span><span class="ident" id="5420869">dat</span><span class="op" id="5420872">,</span>&nbsp;<span class="ident" id="5420874">offset</span><span class="op" id="5420880">)</span><span class="op" id="5420881">;</span>&nbsp;<span class="ident" id="5420883">err</span>&nbsp;<span class="op" id="5420887">!=</span>&nbsp;<span class="ident" id="5420890">nil</span>&nbsp;<span class="op" id="5420894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420898">return</span>&nbsp;<span class="ident" id="5420905">nil</span><span class="op" id="5420908">,</span>&nbsp;<span class="ident" id="5420910">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5420915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420918">f</span><span class="op" id="5420919">.</span><span class="ident" id="5420920">Loads</span>&nbsp;<span class="op" id="5420926">=</span>&nbsp;<span class="builtinfunc" id="5420928">make</span><span class="op" id="5420932">(</span><span class="op" id="5420933">[</span><span class="op" id="5420934">]</span><span class="ident" id="5420935">Load</span><span class="op" id="5420939">,</span>&nbsp;<span class="ident" id="5420941">f</span><span class="op" id="5420942">.</span><span class="ident" id="5420943">Ncmd</span><span class="op" id="5420947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420950">bo</span>&nbsp;<span class="op" id="5420953">:=</span>&nbsp;<span class="ident" id="5420956">f</span><span class="op" id="5420957">.</span><span class="ident" id="5420958">ByteOrder</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420969">for</span>&nbsp;<span class="ident" id="5420973">i</span>&nbsp;<span class="op" id="5420975">:=</span>&nbsp;<span class="keyword" id="5420978">range</span>&nbsp;<span class="ident" id="5420984">f</span><span class="op" id="5420985">.</span><span class="ident" id="5420986">Loads</span>&nbsp;<span class="op" id="5420992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5420996">//&nbsp;Each&nbsp;load&nbsp;command&nbsp;begins&nbsp;with&nbsp;uint32&nbsp;command&nbsp;and&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421058">if</span>&nbsp;<span class="builtinfunc" id="5421061">len</span><span class="op" id="5421064">(</span><span class="ident" id="5421065">dat</span><span class="op" id="5421068">)</span>&nbsp;<span class="op" id="5421070">&lt;</span>&nbsp;<span class="num" id="5421072">8</span>&nbsp;<span class="op" id="5421074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421079">return</span>&nbsp;<span class="ident" id="5421086">nil</span><span class="op" id="5421089">,</span>&nbsp;<span class="op" id="5421091">&amp;</span><span class="ident" id="5421092">FormatError</span><span class="op" id="5421103">{</span><span class="ident" id="5421104">offset</span><span class="op" id="5421110">,</span>&nbsp;<span class="string" id="5421112">&#34;command&nbsp;block&nbsp;too&nbsp;small&#34;</span><span class="op" id="5421137">,</span>&nbsp;<span class="ident" id="5421139">nil</span><span class="op" id="5421142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5421146">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421150">cmd</span><span class="op" id="5421153">,</span>&nbsp;<span class="ident" id="5421155">siz</span>&nbsp;<span class="op" id="5421159">:=</span>&nbsp;<span class="ident" id="5421162">LoadCmd</span><span class="op" id="5421169">(</span><span class="ident" id="5421170">bo</span><span class="op" id="5421172">.</span><span class="ident" id="5421173">Uint32</span><span class="op" id="5421179">(</span><span class="ident" id="5421180">dat</span><span class="op" id="5421183">[</span><span class="num" id="5421184">0</span><span class="op" id="5421185">:</span><span class="num" id="5421186">4</span><span class="op" id="5421187">]</span><span class="op" id="5421188">)</span><span class="op" id="5421189">)</span><span class="op" id="5421190">,</span>&nbsp;<span class="ident" id="5421192">bo</span><span class="op" id="5421194">.</span><span class="ident" id="5421195">Uint32</span><span class="op" id="5421201">(</span><span class="ident" id="5421202">dat</span><span class="op" id="5421205">[</span><span class="num" id="5421206">4</span><span class="op" id="5421207">:</span><span class="num" id="5421208">8</span><span class="op" id="5421209">]</span><span class="op" id="5421210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421214">if</span>&nbsp;<span class="ident" id="5421217">siz</span>&nbsp;<span class="op" id="5421221">&lt;</span>&nbsp;<span class="num" id="5421223">8</span>&nbsp;<span class="op" id="5421225">||</span>&nbsp;<span class="ident" id="5421228">siz</span>&nbsp;<span class="op" id="5421232">&gt;</span>&nbsp;<span class="builtintype" id="5421234">uint32</span><span class="op" id="5421240">(</span><span class="builtinfunc" id="5421241">len</span><span class="op" id="5421244">(</span><span class="ident" id="5421245">dat</span><span class="op" id="5421248">)</span><span class="op" id="5421249">)</span>&nbsp;<span class="op" id="5421251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421256">return</span>&nbsp;<span class="ident" id="5421263">nil</span><span class="op" id="5421266">,</span>&nbsp;<span class="op" id="5421268">&amp;</span><span class="ident" id="5421269">FormatError</span><span class="op" id="5421280">{</span><span class="ident" id="5421281">offset</span><span class="op" id="5421287">,</span>&nbsp;<span class="string" id="5421289">&#34;invalid&nbsp;command&nbsp;block&nbsp;size&#34;</span><span class="op" id="5421317">,</span>&nbsp;<span class="ident" id="5421319">nil</span><span class="op" id="5421322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5421326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421330">var</span>&nbsp;<span class="ident" id="5421334">cmddat</span>&nbsp;<span class="op" id="5421341">[</span><span class="op" id="5421342">]</span><span class="builtintype" id="5421343">byte</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421350">cmddat</span><span class="op" id="5421356">,</span>&nbsp;<span class="ident" id="5421358">dat</span>&nbsp;<span class="op" id="5421362">=</span>&nbsp;<span class="ident" id="5421364">dat</span><span class="op" id="5421367">[</span><span class="num" id="5421368">0</span><span class="op" id="5421369">:</span><span class="ident" id="5421370">siz</span><span class="op" id="5421373">]</span><span class="op" id="5421374">,</span>&nbsp;<span class="ident" id="5421376">dat</span><span class="op" id="5421379">[</span><span class="ident" id="5421380">siz</span><span class="op" id="5421383">:</span><span class="op" id="5421384">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421388">offset</span>&nbsp;<span class="op" id="5421395">+=</span>&nbsp;<span class="ident" id="5421398">int64</span><span class="op" id="5421403">(</span><span class="ident" id="5421404">siz</span><span class="op" id="5421407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421411">var</span>&nbsp;<span class="ident" id="5421415">s</span>&nbsp;<span class="op" id="5421417">*</span><span class="ident" id="5421418">Segment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421428">switch</span>&nbsp;<span class="ident" id="5421435">cmd</span>&nbsp;<span class="op" id="5421439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421443">default</span><span class="op" id="5421450">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421455">f</span><span class="op" id="5421456">.</span><span class="ident" id="5421457">Loads</span><span class="op" id="5421462">[</span><span class="ident" id="5421463">i</span><span class="op" id="5421464">]</span>&nbsp;<span class="op" id="5421466">=</span>&nbsp;<span class="ident" id="5421468">LoadBytes</span><span class="op" id="5421477">(</span><span class="ident" id="5421478">cmddat</span><span class="op" id="5421484">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421489">case</span>&nbsp;<span class="ident" id="5421494">LoadCmdDylib</span><span class="op" id="5421506">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421511">var</span>&nbsp;<span class="ident" id="5421515">hdr</span>&nbsp;<span class="ident" id="5421519">DylibCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421531">b</span>&nbsp;<span class="op" id="5421533">:=</span>&nbsp;<span class="ident" id="5421536">bytes</span><span class="op" id="5421541">.</span><span class="ident" id="5421542">NewReader</span><span class="op" id="5421551">(</span><span class="ident" id="5421552">cmddat</span><span class="op" id="5421558">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421563">if</span>&nbsp;<span class="ident" id="5421566">err</span>&nbsp;<span class="op" id="5421570">:=</span>&nbsp;<span class="ident" id="5421573">binary</span><span class="op" id="5421579">.</span><span class="ident" id="5421580">Read</span><span class="op" id="5421584">(</span><span class="ident" id="5421585">b</span><span class="op" id="5421586">,</span>&nbsp;<span class="ident" id="5421588">bo</span><span class="op" id="5421590">,</span>&nbsp;<span class="op" id="5421592">&amp;</span><span class="ident" id="5421593">hdr</span><span class="op" id="5421596">)</span><span class="op" id="5421597">;</span>&nbsp;<span class="ident" id="5421599">err</span>&nbsp;<span class="op" id="5421603">!=</span>&nbsp;<span class="ident" id="5421606">nil</span>&nbsp;<span class="op" id="5421610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421616">return</span>&nbsp;<span class="ident" id="5421623">nil</span><span class="op" id="5421626">,</span>&nbsp;<span class="ident" id="5421628">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5421635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421640">l</span>&nbsp;<span class="op" id="5421642">:=</span>&nbsp;<span class="builtinfunc" id="5421645">new</span><span class="op" id="5421648">(</span><span class="ident" id="5421649">Dylib</span><span class="op" id="5421654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421659">if</span>&nbsp;<span class="ident" id="5421662">hdr</span><span class="op" id="5421665">.</span><span class="ident" id="5421666">Name</span>&nbsp;<span class="op" id="5421671">&gt;=</span>&nbsp;<span class="builtintype" id="5421674">uint32</span><span class="op" id="5421680">(</span><span class="builtinfunc" id="5421681">len</span><span class="op" id="5421684">(</span><span class="ident" id="5421685">cmddat</span><span class="op" id="5421691">)</span><span class="op" id="5421692">)</span>&nbsp;<span class="op" id="5421694">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421700">return</span>&nbsp;<span class="ident" id="5421707">nil</span><span class="op" id="5421710">,</span>&nbsp;<span class="op" id="5421712">&amp;</span><span class="ident" id="5421713">FormatError</span><span class="op" id="5421724">{</span><span class="ident" id="5421725">offset</span><span class="op" id="5421731">,</span>&nbsp;<span class="string" id="5421733">&#34;invalid&nbsp;name&nbsp;in&nbsp;dynamic&nbsp;library&nbsp;command&#34;</span><span class="op" id="5421774">,</span>&nbsp;<span class="ident" id="5421776">hdr</span><span class="op" id="5421779">.</span><span class="ident" id="5421780">Name</span><span class="op" id="5421784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5421789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421794">l</span><span class="op" id="5421795">.</span><span class="ident" id="5421796">Name</span>&nbsp;<span class="op" id="5421801">=</span>&nbsp;<span class="ident" id="5421803">cstring</span><span class="op" id="5421810">(</span><span class="ident" id="5421811">cmddat</span><span class="op" id="5421817">[</span><span class="ident" id="5421818">hdr</span><span class="op" id="5421821">.</span><span class="ident" id="5421822">Name</span><span class="op" id="5421826">:</span><span class="op" id="5421827">]</span><span class="op" id="5421828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421833">l</span><span class="op" id="5421834">.</span><span class="ident" id="5421835">Time</span>&nbsp;<span class="op" id="5421840">=</span>&nbsp;<span class="ident" id="5421842">hdr</span><span class="op" id="5421845">.</span><span class="ident" id="5421846">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421854">l</span><span class="op" id="5421855">.</span><span class="ident" id="5421856">CurrentVersion</span>&nbsp;<span class="op" id="5421871">=</span>&nbsp;<span class="ident" id="5421873">hdr</span><span class="op" id="5421876">.</span><span class="ident" id="5421877">CurrentVersion</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421895">l</span><span class="op" id="5421896">.</span><span class="ident" id="5421897">CompatVersion</span>&nbsp;<span class="op" id="5421911">=</span>&nbsp;<span class="ident" id="5421913">hdr</span><span class="op" id="5421916">.</span><span class="ident" id="5421917">CompatVersion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421934">l</span><span class="op" id="5421935">.</span><span class="ident" id="5421936">LoadBytes</span>&nbsp;<span class="op" id="5421946">=</span>&nbsp;<span class="ident" id="5421948">LoadBytes</span><span class="op" id="5421957">(</span><span class="ident" id="5421958">cmddat</span><span class="op" id="5421964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421969">f</span><span class="op" id="5421970">.</span><span class="ident" id="5421971">Loads</span><span class="op" id="5421976">[</span><span class="ident" id="5421977">i</span><span class="op" id="5421978">]</span>&nbsp;<span class="op" id="5421980">=</span>&nbsp;<span class="ident" id="5421982">l</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421987">case</span>&nbsp;<span class="ident" id="5421992">LoadCmdSymtab</span><span class="op" id="5422005">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422010">var</span>&nbsp;<span class="ident" id="5422014">hdr</span>&nbsp;<span class="ident" id="5422018">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422031">b</span>&nbsp;<span class="op" id="5422033">:=</span>&nbsp;<span class="ident" id="5422036">bytes</span><span class="op" id="5422041">.</span><span class="ident" id="5422042">NewReader</span><span class="op" id="5422051">(</span><span class="ident" id="5422052">cmddat</span><span class="op" id="5422058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422063">if</span>&nbsp;<span class="ident" id="5422066">err</span>&nbsp;<span class="op" id="5422070">:=</span>&nbsp;<span class="ident" id="5422073">binary</span><span class="op" id="5422079">.</span><span class="ident" id="5422080">Read</span><span class="op" id="5422084">(</span><span class="ident" id="5422085">b</span><span class="op" id="5422086">,</span>&nbsp;<span class="ident" id="5422088">bo</span><span class="op" id="5422090">,</span>&nbsp;<span class="op" id="5422092">&amp;</span><span class="ident" id="5422093">hdr</span><span class="op" id="5422096">)</span><span class="op" id="5422097">;</span>&nbsp;<span class="ident" id="5422099">err</span>&nbsp;<span class="op" id="5422103">!=</span>&nbsp;<span class="ident" id="5422106">nil</span>&nbsp;<span class="op" id="5422110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422116">return</span>&nbsp;<span class="ident" id="5422123">nil</span><span class="op" id="5422126">,</span>&nbsp;<span class="ident" id="5422128">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422135">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422140">strtab</span>&nbsp;<span class="op" id="5422147">:=</span>&nbsp;<span class="builtinfunc" id="5422150">make</span><span class="op" id="5422154">(</span><span class="op" id="5422155">[</span><span class="op" id="5422156">]</span><span class="builtintype" id="5422157">byte</span><span class="op" id="5422161">,</span>&nbsp;<span class="ident" id="5422163">hdr</span><span class="op" id="5422166">.</span><span class="ident" id="5422167">Strsize</span><span class="op" id="5422174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422179">if</span>&nbsp;<span class="ident" id="5422182">_</span><span class="op" id="5422183">,</span>&nbsp;<span class="ident" id="5422185">err</span>&nbsp;<span class="op" id="5422189">:=</span>&nbsp;<span class="ident" id="5422192">r</span><span class="op" id="5422193">.</span><span class="ident" id="5422194">ReadAt</span><span class="op" id="5422200">(</span><span class="ident" id="5422201">strtab</span><span class="op" id="5422207">,</span>&nbsp;<span class="ident" id="5422209">int64</span><span class="op" id="5422214">(</span><span class="ident" id="5422215">hdr</span><span class="op" id="5422218">.</span><span class="ident" id="5422219">Stroff</span><span class="op" id="5422225">)</span><span class="op" id="5422226">)</span><span class="op" id="5422227">;</span>&nbsp;<span class="ident" id="5422229">err</span>&nbsp;<span class="op" id="5422233">!=</span>&nbsp;<span class="ident" id="5422236">nil</span>&nbsp;<span class="op" id="5422240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422246">return</span>&nbsp;<span class="ident" id="5422253">nil</span><span class="op" id="5422256">,</span>&nbsp;<span class="ident" id="5422258">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422270">var</span>&nbsp;<span class="ident" id="5422274">symsz</span>&nbsp;<span class="builtintype" id="5422280">int</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422287">if</span>&nbsp;<span class="ident" id="5422290">f</span><span class="op" id="5422291">.</span><span class="ident" id="5422292">Magic</span>&nbsp;<span class="op" id="5422298">==</span>&nbsp;<span class="ident" id="5422301">Magic64</span>&nbsp;<span class="op" id="5422309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422315">symsz</span>&nbsp;<span class="op" id="5422321">=</span>&nbsp;<span class="num" id="5422323">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422329">}</span>&nbsp;<span class="keyword" id="5422331">else</span>&nbsp;<span class="op" id="5422336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422342">symsz</span>&nbsp;<span class="op" id="5422348">=</span>&nbsp;<span class="num" id="5422350">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422356">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422361">symdat</span>&nbsp;<span class="op" id="5422368">:=</span>&nbsp;<span class="builtinfunc" id="5422371">make</span><span class="op" id="5422375">(</span><span class="op" id="5422376">[</span><span class="op" id="5422377">]</span><span class="builtintype" id="5422378">byte</span><span class="op" id="5422382">,</span>&nbsp;<span class="builtintype" id="5422384">int</span><span class="op" id="5422387">(</span><span class="ident" id="5422388">hdr</span><span class="op" id="5422391">.</span><span class="ident" id="5422392">Nsyms</span><span class="op" id="5422397">)</span><span class="op" id="5422398">*</span><span class="ident" id="5422399">symsz</span><span class="op" id="5422404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422409">if</span>&nbsp;<span class="ident" id="5422412">_</span><span class="op" id="5422413">,</span>&nbsp;<span class="ident" id="5422415">err</span>&nbsp;<span class="op" id="5422419">:=</span>&nbsp;<span class="ident" id="5422422">r</span><span class="op" id="5422423">.</span><span class="ident" id="5422424">ReadAt</span><span class="op" id="5422430">(</span><span class="ident" id="5422431">symdat</span><span class="op" id="5422437">,</span>&nbsp;<span class="ident" id="5422439">int64</span><span class="op" id="5422444">(</span><span class="ident" id="5422445">hdr</span><span class="op" id="5422448">.</span><span class="ident" id="5422449">Symoff</span><span class="op" id="5422455">)</span><span class="op" id="5422456">)</span><span class="op" id="5422457">;</span>&nbsp;<span class="ident" id="5422459">err</span>&nbsp;<span class="op" id="5422463">!=</span>&nbsp;<span class="ident" id="5422466">nil</span>&nbsp;<span class="op" id="5422470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422476">return</span>&nbsp;<span class="ident" id="5422483">nil</span><span class="op" id="5422486">,</span>&nbsp;<span class="ident" id="5422488">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422500">st</span><span class="op" id="5422502">,</span>&nbsp;<span class="ident" id="5422504">err</span>&nbsp;<span class="op" id="5422508">:=</span>&nbsp;<span class="ident" id="5422511">f</span><span class="op" id="5422512">.</span><span class="ident" id="5422513">parseSymtab</span><span class="op" id="5422524">(</span><span class="ident" id="5422525">symdat</span><span class="op" id="5422531">,</span>&nbsp;<span class="ident" id="5422533">strtab</span><span class="op" id="5422539">,</span>&nbsp;<span class="ident" id="5422541">cmddat</span><span class="op" id="5422547">,</span>&nbsp;<span class="op" id="5422549">&amp;</span><span class="ident" id="5422550">hdr</span><span class="op" id="5422553">,</span>&nbsp;<span class="ident" id="5422555">offset</span><span class="op" id="5422561">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422566">if</span>&nbsp;<span class="ident" id="5422569">err</span>&nbsp;<span class="op" id="5422573">!=</span>&nbsp;<span class="ident" id="5422576">nil</span>&nbsp;<span class="op" id="5422580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422586">return</span>&nbsp;<span class="ident" id="5422593">nil</span><span class="op" id="5422596">,</span>&nbsp;<span class="ident" id="5422598">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422610">f</span><span class="op" id="5422611">.</span><span class="ident" id="5422612">Loads</span><span class="op" id="5422617">[</span><span class="ident" id="5422618">i</span><span class="op" id="5422619">]</span>&nbsp;<span class="op" id="5422621">=</span>&nbsp;<span class="ident" id="5422623">st</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422629">f</span><span class="op" id="5422630">.</span><span class="ident" id="5422631">Symtab</span>&nbsp;<span class="op" id="5422638">=</span>&nbsp;<span class="ident" id="5422640">st</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422646">case</span>&nbsp;<span class="ident" id="5422651">LoadCmdDysymtab</span><span class="op" id="5422666">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422671">var</span>&nbsp;<span class="ident" id="5422675">hdr</span>&nbsp;<span class="ident" id="5422679">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422694">b</span>&nbsp;<span class="op" id="5422696">:=</span>&nbsp;<span class="ident" id="5422699">bytes</span><span class="op" id="5422704">.</span><span class="ident" id="5422705">NewReader</span><span class="op" id="5422714">(</span><span class="ident" id="5422715">cmddat</span><span class="op" id="5422721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422726">if</span>&nbsp;<span class="ident" id="5422729">err</span>&nbsp;<span class="op" id="5422733">:=</span>&nbsp;<span class="ident" id="5422736">binary</span><span class="op" id="5422742">.</span><span class="ident" id="5422743">Read</span><span class="op" id="5422747">(</span><span class="ident" id="5422748">b</span><span class="op" id="5422749">,</span>&nbsp;<span class="ident" id="5422751">bo</span><span class="op" id="5422753">,</span>&nbsp;<span class="op" id="5422755">&amp;</span><span class="ident" id="5422756">hdr</span><span class="op" id="5422759">)</span><span class="op" id="5422760">;</span>&nbsp;<span class="ident" id="5422762">err</span>&nbsp;<span class="op" id="5422766">!=</span>&nbsp;<span class="ident" id="5422769">nil</span>&nbsp;<span class="op" id="5422773">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422779">return</span>&nbsp;<span class="ident" id="5422786">nil</span><span class="op" id="5422789">,</span>&nbsp;<span class="ident" id="5422791">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422803">dat</span>&nbsp;<span class="op" id="5422807">:=</span>&nbsp;<span class="builtinfunc" id="5422810">make</span><span class="op" id="5422814">(</span><span class="op" id="5422815">[</span><span class="op" id="5422816">]</span><span class="builtintype" id="5422817">byte</span><span class="op" id="5422821">,</span>&nbsp;<span class="ident" id="5422823">hdr</span><span class="op" id="5422826">.</span><span class="ident" id="5422827">Nindirectsyms</span><span class="op" id="5422840">*</span><span class="num" id="5422841">4</span><span class="op" id="5422842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422847">if</span>&nbsp;<span class="ident" id="5422850">_</span><span class="op" id="5422851">,</span>&nbsp;<span class="ident" id="5422853">err</span>&nbsp;<span class="op" id="5422857">:=</span>&nbsp;<span class="ident" id="5422860">r</span><span class="op" id="5422861">.</span><span class="ident" id="5422862">ReadAt</span><span class="op" id="5422868">(</span><span class="ident" id="5422869">dat</span><span class="op" id="5422872">,</span>&nbsp;<span class="ident" id="5422874">int64</span><span class="op" id="5422879">(</span><span class="ident" id="5422880">hdr</span><span class="op" id="5422883">.</span><span class="ident" id="5422884">Indirectsymoff</span><span class="op" id="5422898">)</span><span class="op" id="5422899">)</span><span class="op" id="5422900">;</span>&nbsp;<span class="ident" id="5422902">err</span>&nbsp;<span class="op" id="5422906">!=</span>&nbsp;<span class="ident" id="5422909">nil</span>&nbsp;<span class="op" id="5422913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422919">return</span>&nbsp;<span class="ident" id="5422926">nil</span><span class="op" id="5422929">,</span>&nbsp;<span class="ident" id="5422931">err</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422943">x</span>&nbsp;<span class="op" id="5422945">:=</span>&nbsp;<span class="builtinfunc" id="5422948">make</span><span class="op" id="5422952">(</span><span class="op" id="5422953">[</span><span class="op" id="5422954">]</span><span class="builtintype" id="5422955">uint32</span><span class="op" id="5422961">,</span>&nbsp;<span class="ident" id="5422963">hdr</span><span class="op" id="5422966">.</span><span class="ident" id="5422967">Nindirectsyms</span><span class="op" id="5422980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422985">if</span>&nbsp;<span class="ident" id="5422988">err</span>&nbsp;<span class="op" id="5422992">:=</span>&nbsp;<span class="ident" id="5422995">binary</span><span class="op" id="5423001">.</span><span class="ident" id="5423002">Read</span><span class="op" id="5423006">(</span><span class="ident" id="5423007">bytes</span><span class="op" id="5423012">.</span><span class="ident" id="5423013">NewReader</span><span class="op" id="5423022">(</span><span class="ident" id="5423023">dat</span><span class="op" id="5423026">)</span><span class="op" id="5423027">,</span>&nbsp;<span class="ident" id="5423029">bo</span><span class="op" id="5423031">,</span>&nbsp;<span class="ident" id="5423033">x</span><span class="op" id="5423034">)</span><span class="op" id="5423035">;</span>&nbsp;<span class="ident" id="5423037">err</span>&nbsp;<span class="op" id="5423041">!=</span>&nbsp;<span class="ident" id="5423044">nil</span>&nbsp;<span class="op" id="5423048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423054">return</span>&nbsp;<span class="ident" id="5423061">nil</span><span class="op" id="5423064">,</span>&nbsp;<span class="ident" id="5423066">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5423073">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423078">st</span>&nbsp;<span class="op" id="5423081">:=</span>&nbsp;<span class="builtinfunc" id="5423084">new</span><span class="op" id="5423087">(</span><span class="ident" id="5423088">Dysymtab</span><span class="op" id="5423096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423101">st</span><span class="op" id="5423103">.</span><span class="ident" id="5423104">LoadBytes</span>&nbsp;<span class="op" id="5423114">=</span>&nbsp;<span class="ident" id="5423116">LoadBytes</span><span class="op" id="5423125">(</span><span class="ident" id="5423126">cmddat</span><span class="op" id="5423132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423137">st</span><span class="op" id="5423139">.</span><span class="ident" id="5423140">DysymtabCmd</span>&nbsp;<span class="op" id="5423152">=</span>&nbsp;<span class="ident" id="5423154">hdr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423161">st</span><span class="op" id="5423163">.</span><span class="ident" id="5423164">IndirectSyms</span>&nbsp;<span class="op" id="5423177">=</span>&nbsp;<span class="ident" id="5423179">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423184">f</span><span class="op" id="5423185">.</span><span class="ident" id="5423186">Loads</span><span class="op" id="5423191">[</span><span class="ident" id="5423192">i</span><span class="op" id="5423193">]</span>&nbsp;<span class="op" id="5423195">=</span>&nbsp;<span class="ident" id="5423197">st</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423203">f</span><span class="op" id="5423204">.</span><span class="ident" id="5423205">Dysymtab</span>&nbsp;<span class="op" id="5423214">=</span>&nbsp;<span class="ident" id="5423216">st</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423222">case</span>&nbsp;<span class="ident" id="5423227">LoadCmdSegment</span><span class="op" id="5423241">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423246">var</span>&nbsp;<span class="ident" id="5423250">seg32</span>&nbsp;<span class="ident" id="5423256">Segment32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423269">b</span>&nbsp;<span class="op" id="5423271">:=</span>&nbsp;<span class="ident" id="5423274">bytes</span><span class="op" id="5423279">.</span><span class="ident" id="5423280">NewReader</span><span class="op" id="5423289">(</span><span class="ident" id="5423290">cmddat</span><span class="op" id="5423296">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423301">if</span>&nbsp;<span class="ident" id="5423304">err</span>&nbsp;<span class="op" id="5423308">:=</span>&nbsp;<span class="ident" id="5423311">binary</span><span class="op" id="5423317">.</span><span class="ident" id="5423318">Read</span><span class="op" id="5423322">(</span><span class="ident" id="5423323">b</span><span class="op" id="5423324">,</span>&nbsp;<span class="ident" id="5423326">bo</span><span class="op" id="5423328">,</span>&nbsp;<span class="op" id="5423330">&amp;</span><span class="ident" id="5423331">seg32</span><span class="op" id="5423336">)</span><span class="op" id="5423337">;</span>&nbsp;<span class="ident" id="5423339">err</span>&nbsp;<span class="op" id="5423343">!=</span>&nbsp;<span class="ident" id="5423346">nil</span>&nbsp;<span class="op" id="5423350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423356">return</span>&nbsp;<span class="ident" id="5423363">nil</span><span class="op" id="5423366">,</span>&nbsp;<span class="ident" id="5423368">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5423375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423380">s</span>&nbsp;<span class="op" id="5423382">=</span>&nbsp;<span class="builtinfunc" id="5423384">new</span><span class="op" id="5423387">(</span><span class="ident" id="5423388">Segment</span><span class="op" id="5423395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423400">s</span><span class="op" id="5423401">.</span><span class="ident" id="5423402">LoadBytes</span>&nbsp;<span class="op" id="5423412">=</span>&nbsp;<span class="ident" id="5423414">cmddat</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423424">s</span><span class="op" id="5423425">.</span><span class="ident" id="5423426">Cmd</span>&nbsp;<span class="op" id="5423430">=</span>&nbsp;<span class="ident" id="5423432">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423439">s</span><span class="op" id="5423440">.</span><span class="ident" id="5423441">Len</span>&nbsp;<span class="op" id="5423445">=</span>&nbsp;<span class="ident" id="5423447">siz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423454">s</span><span class="op" id="5423455">.</span><span class="ident" id="5423456">Name</span>&nbsp;<span class="op" id="5423461">=</span>&nbsp;<span class="ident" id="5423463">cstring</span><span class="op" id="5423470">(</span><span class="ident" id="5423471">seg32</span><span class="op" id="5423476">.</span><span class="ident" id="5423477">Name</span><span class="op" id="5423481">[</span><span class="num" id="5423482">0</span><span class="op" id="5423483">:</span><span class="op" id="5423484">]</span><span class="op" id="5423485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423490">s</span><span class="op" id="5423491">.</span><span class="ident" id="5423492">Addr</span>&nbsp;<span class="op" id="5423497">=</span>&nbsp;<span class="ident" id="5423499">uint64</span><span class="op" id="5423505">(</span><span class="ident" id="5423506">seg32</span><span class="op" id="5423511">.</span><span class="ident" id="5423512">Addr</span><span class="op" id="5423516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423521">s</span><span class="op" id="5423522">.</span><span class="ident" id="5423523">Memsz</span>&nbsp;<span class="op" id="5423529">=</span>&nbsp;<span class="ident" id="5423531">uint64</span><span class="op" id="5423537">(</span><span class="ident" id="5423538">seg32</span><span class="op" id="5423543">.</span><span class="ident" id="5423544">Memsz</span><span class="op" id="5423549">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423554">s</span><span class="op" id="5423555">.</span><span class="ident" id="5423556">Offset</span>&nbsp;<span class="op" id="5423563">=</span>&nbsp;<span class="ident" id="5423565">uint64</span><span class="op" id="5423571">(</span><span class="ident" id="5423572">seg32</span><span class="op" id="5423577">.</span><span class="ident" id="5423578">Offset</span><span class="op" id="5423584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423589">s</span><span class="op" id="5423590">.</span><span class="ident" id="5423591">Filesz</span>&nbsp;<span class="op" id="5423598">=</span>&nbsp;<span class="ident" id="5423600">uint64</span><span class="op" id="5423606">(</span><span class="ident" id="5423607">seg32</span><span class="op" id="5423612">.</span><span class="ident" id="5423613">Filesz</span><span class="op" id="5423619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423624">s</span><span class="op" id="5423625">.</span><span class="ident" id="5423626">Maxprot</span>&nbsp;<span class="op" id="5423634">=</span>&nbsp;<span class="ident" id="5423636">seg32</span><span class="op" id="5423641">.</span><span class="ident" id="5423642">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423653">s</span><span class="op" id="5423654">.</span><span class="ident" id="5423655">Prot</span>&nbsp;<span class="op" id="5423660">=</span>&nbsp;<span class="ident" id="5423662">seg32</span><span class="op" id="5423667">.</span><span class="ident" id="5423668">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423676">s</span><span class="op" id="5423677">.</span><span class="ident" id="5423678">Nsect</span>&nbsp;<span class="op" id="5423684">=</span>&nbsp;<span class="ident" id="5423686">seg32</span><span class="op" id="5423691">.</span><span class="ident" id="5423692">Nsect</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423701">s</span><span class="op" id="5423702">.</span><span class="ident" id="5423703">Flag</span>&nbsp;<span class="op" id="5423708">=</span>&nbsp;<span class="ident" id="5423710">seg32</span><span class="op" id="5423715">.</span><span class="ident" id="5423716">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423724">f</span><span class="op" id="5423725">.</span><span class="ident" id="5423726">Loads</span><span class="op" id="5423731">[</span><span class="ident" id="5423732">i</span><span class="op" id="5423733">]</span>&nbsp;<span class="op" id="5423735">=</span>&nbsp;<span class="ident" id="5423737">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423742">for</span>&nbsp;<span class="ident" id="5423746">i</span>&nbsp;<span class="op" id="5423748">:=</span>&nbsp;<span class="num" id="5423751">0</span><span class="op" id="5423752">;</span>&nbsp;<span class="ident" id="5423754">i</span>&nbsp;<span class="op" id="5423756">&lt;</span>&nbsp;<span class="builtintype" id="5423758">int</span><span class="op" id="5423761">(</span><span class="ident" id="5423762">s</span><span class="op" id="5423763">.</span><span class="ident" id="5423764">Nsect</span><span class="op" id="5423769">)</span><span class="op" id="5423770">;</span>&nbsp;<span class="ident" id="5423772">i</span><span class="op" id="5423773">++</span>&nbsp;<span class="op" id="5423776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423782">var</span>&nbsp;<span class="ident" id="5423786">sh32</span>&nbsp;<span class="ident" id="5423791">Section32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423805">if</span>&nbsp;<span class="ident" id="5423808">err</span>&nbsp;<span class="op" id="5423812">:=</span>&nbsp;<span class="ident" id="5423815">binary</span><span class="op" id="5423821">.</span><span class="ident" id="5423822">Read</span><span class="op" id="5423826">(</span><span class="ident" id="5423827">b</span><span class="op" id="5423828">,</span>&nbsp;<span class="ident" id="5423830">bo</span><span class="op" id="5423832">,</span>&nbsp;<span class="op" id="5423834">&amp;</span><span class="ident" id="5423835">sh32</span><span class="op" id="5423839">)</span><span class="op" id="5423840">;</span>&nbsp;<span class="ident" id="5423842">err</span>&nbsp;<span class="op" id="5423846">!=</span>&nbsp;<span class="ident" id="5423849">nil</span>&nbsp;<span class="op" id="5423853">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423860">return</span>&nbsp;<span class="ident" id="5423867">nil</span><span class="op" id="5423870">,</span>&nbsp;<span class="ident" id="5423872">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5423880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423886">sh</span>&nbsp;<span class="op" id="5423889">:=</span>&nbsp;<span class="builtinfunc" id="5423892">new</span><span class="op" id="5423895">(</span><span class="ident" id="5423896">Section</span><span class="op" id="5423903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423909">sh</span><span class="op" id="5423911">.</span><span class="ident" id="5423912">Name</span>&nbsp;<span class="op" id="5423917">=</span>&nbsp;<span class="ident" id="5423919">cstring</span><span class="op" id="5423926">(</span><span class="ident" id="5423927">sh32</span><span class="op" id="5423931">.</span><span class="ident" id="5423932">Name</span><span class="op" id="5423936">[</span><span class="num" id="5423937">0</span><span class="op" id="5423938">:</span><span class="op" id="5423939">]</span><span class="op" id="5423940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423946">sh</span><span class="op" id="5423948">.</span><span class="ident" id="5423949">Seg</span>&nbsp;<span class="op" id="5423953">=</span>&nbsp;<span class="ident" id="5423955">cstring</span><span class="op" id="5423962">(</span><span class="ident" id="5423963">sh32</span><span class="op" id="5423967">.</span><span class="ident" id="5423968">Seg</span><span class="op" id="5423971">[</span><span class="num" id="5423972">0</span><span class="op" id="5423973">:</span><span class="op" id="5423974">]</span><span class="op" id="5423975">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423981">sh</span><span class="op" id="5423983">.</span><span class="ident" id="5423984">Addr</span>&nbsp;<span class="op" id="5423989">=</span>&nbsp;<span class="ident" id="5423991">uint64</span><span class="op" id="5423997">(</span><span class="ident" id="5423998">sh32</span><span class="op" id="5424002">.</span><span class="ident" id="5424003">Addr</span><span class="op" id="5424007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424013">sh</span><span class="op" id="5424015">.</span><span class="ident" id="5424016">Size</span>&nbsp;<span class="op" id="5424021">=</span>&nbsp;<span class="ident" id="5424023">uint64</span><span class="op" id="5424029">(</span><span class="ident" id="5424030">sh32</span><span class="op" id="5424034">.</span><span class="ident" id="5424035">Size</span><span class="op" id="5424039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424045">sh</span><span class="op" id="5424047">.</span><span class="ident" id="5424048">Offset</span>&nbsp;<span class="op" id="5424055">=</span>&nbsp;<span class="ident" id="5424057">sh32</span><span class="op" id="5424061">.</span><span class="ident" id="5424062">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424073">sh</span><span class="op" id="5424075">.</span><span class="ident" id="5424076">Align</span>&nbsp;<span class="op" id="5424082">=</span>&nbsp;<span class="ident" id="5424084">sh32</span><span class="op" id="5424088">.</span><span class="ident" id="5424089">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424099">sh</span><span class="op" id="5424101">.</span><span class="ident" id="5424102">Reloff</span>&nbsp;<span class="op" id="5424109">=</span>&nbsp;<span class="ident" id="5424111">sh32</span><span class="op" id="5424115">.</span><span class="ident" id="5424116">Reloff</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424127">sh</span><span class="op" id="5424129">.</span><span class="ident" id="5424130">Nreloc</span>&nbsp;<span class="op" id="5424137">=</span>&nbsp;<span class="ident" id="5424139">sh32</span><span class="op" id="5424143">.</span><span class="ident" id="5424144">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424155">sh</span><span class="op" id="5424157">.</span><span class="ident" id="5424158">Flags</span>&nbsp;<span class="op" id="5424164">=</span>&nbsp;<span class="ident" id="5424166">sh32</span><span class="op" id="5424170">.</span><span class="ident" id="5424171">Flags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424181">f</span><span class="op" id="5424182">.</span><span class="ident" id="5424183">pushSection</span><span class="op" id="5424194">(</span><span class="ident" id="5424195">sh</span><span class="op" id="5424197">,</span>&nbsp;<span class="ident" id="5424199">r</span><span class="op" id="5424200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5424205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424210">case</span>&nbsp;<span class="ident" id="5424215">LoadCmdSegment64</span><span class="op" id="5424231">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424236">var</span>&nbsp;<span class="ident" id="5424240">seg64</span>&nbsp;<span class="ident" id="5424246">Segment64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424259">b</span>&nbsp;<span class="op" id="5424261">:=</span>&nbsp;<span class="ident" id="5424264">bytes</span><span class="op" id="5424269">.</span><span class="ident" id="5424270">NewReader</span><span class="op" id="5424279">(</span><span class="ident" id="5424280">cmddat</span><span class="op" id="5424286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424291">if</span>&nbsp;<span class="ident" id="5424294">err</span>&nbsp;<span class="op" id="5424298">:=</span>&nbsp;<span class="ident" id="5424301">binary</span><span class="op" id="5424307">.</span><span class="ident" id="5424308">Read</span><span class="op" id="5424312">(</span><span class="ident" id="5424313">b</span><span class="op" id="5424314">,</span>&nbsp;<span class="ident" id="5424316">bo</span><span class="op" id="5424318">,</span>&nbsp;<span class="op" id="5424320">&amp;</span><span class="ident" id="5424321">seg64</span><span class="op" id="5424326">)</span><span class="op" id="5424327">;</span>&nbsp;<span class="ident" id="5424329">err</span>&nbsp;<span class="op" id="5424333">!=</span>&nbsp;<span class="ident" id="5424336">nil</span>&nbsp;<span class="op" id="5424340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424346">return</span>&nbsp;<span class="ident" id="5424353">nil</span><span class="op" id="5424356">,</span>&nbsp;<span class="ident" id="5424358">err</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5424365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424370">s</span>&nbsp;<span class="op" id="5424372">=</span>&nbsp;<span class="builtinfunc" id="5424374">new</span><span class="op" id="5424377">(</span><span class="ident" id="5424378">Segment</span><span class="op" id="5424385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424390">s</span><span class="op" id="5424391">.</span><span class="ident" id="5424392">LoadBytes</span>&nbsp;<span class="op" id="5424402">=</span>&nbsp;<span class="ident" id="5424404">cmddat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424414">s</span><span class="op" id="5424415">.</span><span class="ident" id="5424416">Cmd</span>&nbsp;<span class="op" id="5424420">=</span>&nbsp;<span class="ident" id="5424422">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424429">s</span><span class="op" id="5424430">.</span><span class="ident" id="5424431">Len</span>&nbsp;<span class="op" id="5424435">=</span>&nbsp;<span class="ident" id="5424437">siz</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424444">s</span><span class="op" id="5424445">.</span><span class="ident" id="5424446">Name</span>&nbsp;<span class="op" id="5424451">=</span>&nbsp;<span class="ident" id="5424453">cstring</span><span class="op" id="5424460">(</span><span class="ident" id="5424461">seg64</span><span class="op" id="5424466">.</span><span class="ident" id="5424467">Name</span><span class="op" id="5424471">[</span><span class="num" id="5424472">0</span><span class="op" id="5424473">:</span><span class="op" id="5424474">]</span><span class="op" id="5424475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424480">s</span><span class="op" id="5424481">.</span><span class="ident" id="5424482">Addr</span>&nbsp;<span class="op" id="5424487">=</span>&nbsp;<span class="ident" id="5424489">seg64</span><span class="op" id="5424494">.</span><span class="ident" id="5424495">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424503">s</span><span class="op" id="5424504">.</span><span class="ident" id="5424505">Memsz</span>&nbsp;<span class="op" id="5424511">=</span>&nbsp;<span class="ident" id="5424513">seg64</span><span class="op" id="5424518">.</span><span class="ident" id="5424519">Memsz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424528">s</span><span class="op" id="5424529">.</span><span class="ident" id="5424530">Offset</span>&nbsp;<span class="op" id="5424537">=</span>&nbsp;<span class="ident" id="5424539">seg64</span><span class="op" id="5424544">.</span><span class="ident" id="5424545">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424555">s</span><span class="op" id="5424556">.</span><span class="ident" id="5424557">Filesz</span>&nbsp;<span class="op" id="5424564">=</span>&nbsp;<span class="ident" id="5424566">seg64</span><span class="op" id="5424571">.</span><span class="ident" id="5424572">Filesz</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424582">s</span><span class="op" id="5424583">.</span><span class="ident" id="5424584">Maxprot</span>&nbsp;<span class="op" id="5424592">=</span>&nbsp;<span class="ident" id="5424594">seg64</span><span class="op" id="5424599">.</span><span class="ident" id="5424600">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424611">s</span><span class="op" id="5424612">.</span><span class="ident" id="5424613">Prot</span>&nbsp;<span class="op" id="5424618">=</span>&nbsp;<span class="ident" id="5424620">seg64</span><span class="op" id="5424625">.</span><span class="ident" id="5424626">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424634">s</span><span class="op" id="5424635">.</span><span class="ident" id="5424636">Nsect</span>&nbsp;<span class="op" id="5424642">=</span>&nbsp;<span class="ident" id="5424644">seg64</span><span class="op" id="5424649">.</span><span class="ident" id="5424650">Nsect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424659">s</span><span class="op" id="5424660">.</span><span class="ident" id="5424661">Flag</span>&nbsp;<span class="op" id="5424666">=</span>&nbsp;<span class="ident" id="5424668">seg64</span><span class="op" id="5424673">.</span><span class="ident" id="5424674">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424682">f</span><span class="op" id="5424683">.</span><span class="ident" id="5424684">Loads</span><span class="op" id="5424689">[</span><span class="ident" id="5424690">i</span><span class="op" id="5424691">]</span>&nbsp;<span class="op" id="5424693">=</span>&nbsp;<span class="ident" id="5424695">s</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424700">for</span>&nbsp;<span class="ident" id="5424704">i</span>&nbsp;<span class="op" id="5424706">:=</span>&nbsp;<span class="num" id="5424709">0</span><span class="op" id="5424710">;</span>&nbsp;<span class="ident" id="5424712">i</span>&nbsp;<span class="op" id="5424714">&lt;</span>&nbsp;<span class="builtintype" id="5424716">int</span><span class="op" id="5424719">(</span><span class="ident" id="5424720">s</span><span class="op" id="5424721">.</span><span class="ident" id="5424722">Nsect</span><span class="op" id="5424727">)</span><span class="op" id="5424728">;</span>&nbsp;<span class="ident" id="5424730">i</span><span class="op" id="5424731">++</span>&nbsp;<span class="op" id="5424734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424740">var</span>&nbsp;<span class="ident" id="5424744">sh64</span>&nbsp;<span class="ident" id="5424749">Section64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424763">if</span>&nbsp;<span class="ident" id="5424766">err</span>&nbsp;<span class="op" id="5424770">:=</span>&nbsp;<span class="ident" id="5424773">binary</span><span class="op" id="5424779">.</span><span class="ident" id="5424780">Read</span><span class="op" id="5424784">(</span><span class="ident" id="5424785">b</span><span class="op" id="5424786">,</span>&nbsp;<span class="ident" id="5424788">bo</span><span class="op" id="5424790">,</span>&nbsp;<span class="op" id="5424792">&amp;</span><span class="ident" id="5424793">sh64</span><span class="op" id="5424797">)</span><span class="op" id="5424798">;</span>&nbsp;<span class="ident" id="5424800">err</span>&nbsp;<span class="op" id="5424804">!=</span>&nbsp;<span class="ident" id="5424807">nil</span>&nbsp;<span class="op" id="5424811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424818">return</span>&nbsp;<span class="ident" id="5424825">nil</span><span class="op" id="5424828">,</span>&nbsp;<span class="ident" id="5424830">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5424838">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424844">sh</span>&nbsp;<span class="op" id="5424847">:=</span>&nbsp;<span class="builtinfunc" id="5424850">new</span><span class="op" id="5424853">(</span><span class="ident" id="5424854">Section</span><span class="op" id="5424861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424867">sh</span><span class="op" id="5424869">.</span><span class="ident" id="5424870">Name</span>&nbsp;<span class="op" id="5424875">=</span>&nbsp;<span class="ident" id="5424877">cstring</span><span class="op" id="5424884">(</span><span class="ident" id="5424885">sh64</span><span class="op" id="5424889">.</span><span class="ident" id="5424890">Name</span><span class="op" id="5424894">[</span><span class="num" id="5424895">0</span><span class="op" id="5424896">:</span><span class="op" id="5424897">]</span><span class="op" id="5424898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424904">sh</span><span class="op" id="5424906">.</span><span class="ident" id="5424907">Seg</span>&nbsp;<span class="op" id="5424911">=</span>&nbsp;<span class="ident" id="5424913">cstring</span><span class="op" id="5424920">(</span><span class="ident" id="5424921">sh64</span><span class="op" id="5424925">.</span><span class="ident" id="5424926">Seg</span><span class="op" id="5424929">[</span><span class="num" id="5424930">0</span><span class="op" id="5424931">:</span><span class="op" id="5424932">]</span><span class="op" id="5424933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424939">sh</span><span class="op" id="5424941">.</span><span class="ident" id="5424942">Addr</span>&nbsp;<span class="op" id="5424947">=</span>&nbsp;<span class="ident" id="5424949">sh64</span><span class="op" id="5424953">.</span><span class="ident" id="5424954">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424963">sh</span><span class="op" id="5424965">.</span><span class="ident" id="5424966">Size</span>&nbsp;<span class="op" id="5424971">=</span>&nbsp;<span class="ident" id="5424973">sh64</span><span class="op" id="5424977">.</span><span class="ident" id="5424978">Size</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424987">sh</span><span class="op" id="5424989">.</span><span class="ident" id="5424990">Offset</span>&nbsp;<span class="op" id="5424997">=</span>&nbsp;<span class="ident" id="5424999">sh64</span><span class="op" id="5425003">.</span><span class="ident" id="5425004">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425015">sh</span><span class="op" id="5425017">.</span><span class="ident" id="5425018">Align</span>&nbsp;<span class="op" id="5425024">=</span>&nbsp;<span class="ident" id="5425026">sh64</span><span class="op" id="5425030">.</span><span class="ident" id="5425031">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425041">sh</span><span class="op" id="5425043">.</span><span class="ident" id="5425044">Reloff</span>&nbsp;<span class="op" id="5425051">=</span>&nbsp;<span class="ident" id="5425053">sh64</span><span class="op" id="5425057">.</span><span class="ident" id="5425058">Reloff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425069">sh</span><span class="op" id="5425071">.</span><span class="ident" id="5425072">Nreloc</span>&nbsp;<span class="op" id="5425079">=</span>&nbsp;<span class="ident" id="5425081">sh64</span><span class="op" id="5425085">.</span><span class="ident" id="5425086">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425097">sh</span><span class="op" id="5425099">.</span><span class="ident" id="5425100">Flags</span>&nbsp;<span class="op" id="5425106">=</span>&nbsp;<span class="ident" id="5425108">sh64</span><span class="op" id="5425112">.</span><span class="ident" id="5425113">Flags</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425123">f</span><span class="op" id="5425124">.</span><span class="ident" id="5425125">pushSection</span><span class="op" id="5425136">(</span><span class="ident" id="5425137">sh</span><span class="op" id="5425139">,</span>&nbsp;<span class="ident" id="5425141">r</span><span class="op" id="5425142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425155">if</span>&nbsp;<span class="ident" id="5425158">s</span>&nbsp;<span class="op" id="5425160">!=</span>&nbsp;<span class="ident" id="5425163">nil</span>&nbsp;<span class="op" id="5425167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425172">s</span><span class="op" id="5425173">.</span><span class="ident" id="5425174">sr</span>&nbsp;<span class="op" id="5425177">=</span>&nbsp;<span class="ident" id="5425179">io</span><span class="op" id="5425181">.</span><span class="ident" id="5425182">NewSectionReader</span><span class="op" id="5425198">(</span><span class="ident" id="5425199">r</span><span class="op" id="5425200">,</span>&nbsp;<span class="ident" id="5425202">int64</span><span class="op" id="5425207">(</span><span class="ident" id="5425208">s</span><span class="op" id="5425209">.</span><span class="ident" id="5425210">Offset</span><span class="op" id="5425216">)</span><span class="op" id="5425217">,</span>&nbsp;<span class="ident" id="5425219">int64</span><span class="op" id="5425224">(</span><span class="ident" id="5425225">s</span><span class="op" id="5425226">.</span><span class="ident" id="5425227">Filesz</span><span class="op" id="5425233">)</span><span class="op" id="5425234">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425239">s</span><span class="op" id="5425240">.</span><span class="ident" id="5425241">ReaderAt</span>&nbsp;<span class="op" id="5425250">=</span>&nbsp;<span class="ident" id="5425252">s</span><span class="op" id="5425253">.</span><span class="ident" id="5425254">sr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425265">return</span>&nbsp;<span class="ident" id="5425272">f</span><span class="op" id="5425273">,</span>&nbsp;<span class="ident" id="5425275">nil</span><br>
<span class="lineno"></span><span class="op" id="5425279">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="keyword" id="5425282">func</span>&nbsp;<span class="op" id="5425287">(</span><span class="ident" id="5425288">f</span>&nbsp;<span class="op" id="5425290">*</span><span class="ident" id="5425291">File</span><span class="op" id="5425295">)</span>&nbsp;<span class="ident" id="5425297">parseSymtab</span><span class="op" id="5425308">(</span><span class="ident" id="5425309">symdat</span><span class="op" id="5425315">,</span>&nbsp;<span class="ident" id="5425317">strtab</span><span class="op" id="5425323">,</span>&nbsp;<span class="ident" id="5425325">cmddat</span>&nbsp;<span class="op" id="5425332">[</span><span class="op" id="5425333">]</span><span class="builtintype" id="5425334">byte</span><span class="op" id="5425338">,</span>&nbsp;<span class="ident" id="5425340">hdr</span>&nbsp;<span class="op" id="5425344">*</span><span class="ident" id="5425345">SymtabCmd</span><span class="op" id="5425354">,</span>&nbsp;<span class="ident" id="5425356">offset</span>&nbsp;<span class="ident" id="5425363">int64</span><span class="op" id="5425368">)</span>&nbsp;<span class="op" id="5425370">(</span><span class="op" id="5425371">*</span><span class="ident" id="5425372">Symtab</span><span class="op" id="5425378">,</span>&nbsp;<span class="builtintype" id="5425380">error</span><span class="op" id="5425385">)</span>&nbsp;<span class="op" id="5425387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425390">bo</span>&nbsp;<span class="op" id="5425393">:=</span>&nbsp;<span class="ident" id="5425396">f</span><span class="op" id="5425397">.</span><span class="ident" id="5425398">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425409">symtab</span>&nbsp;<span class="op" id="5425416">:=</span>&nbsp;<span class="builtinfunc" id="5425419">make</span><span class="op" id="5425423">(</span><span class="op" id="5425424">[</span><span class="op" id="5425425">]</span><span class="ident" id="5425426">Symbol</span><span class="op" id="5425432">,</span>&nbsp;<span class="ident" id="5425434">hdr</span><span class="op" id="5425437">.</span><span class="ident" id="5425438">Nsyms</span><span class="op" id="5425443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425446">b</span>&nbsp;<span class="op" id="5425448">:=</span>&nbsp;<span class="ident" id="5425451">bytes</span><span class="op" id="5425456">.</span><span class="ident" id="5425457">NewReader</span><span class="op" id="5425466">(</span><span class="ident" id="5425467">symdat</span><span class="op" id="5425473">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425476">for</span>&nbsp;<span class="ident" id="5425480">i</span>&nbsp;<span class="op" id="5425482">:=</span>&nbsp;<span class="keyword" id="5425485">range</span>&nbsp;<span class="ident" id="5425491">symtab</span>&nbsp;<span class="op" id="5425498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425502">var</span>&nbsp;<span class="ident" id="5425506">n</span>&nbsp;<span class="ident" id="5425508">Nlist64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425518">if</span>&nbsp;<span class="ident" id="5425521">f</span><span class="op" id="5425522">.</span><span class="ident" id="5425523">Magic</span>&nbsp;<span class="op" id="5425529">==</span>&nbsp;<span class="ident" id="5425532">Magic64</span>&nbsp;<span class="op" id="5425540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425545">if</span>&nbsp;<span class="ident" id="5425548">err</span>&nbsp;<span class="op" id="5425552">:=</span>&nbsp;<span class="ident" id="5425555">binary</span><span class="op" id="5425561">.</span><span class="ident" id="5425562">Read</span><span class="op" id="5425566">(</span><span class="ident" id="5425567">b</span><span class="op" id="5425568">,</span>&nbsp;<span class="ident" id="5425570">bo</span><span class="op" id="5425572">,</span>&nbsp;<span class="op" id="5425574">&amp;</span><span class="ident" id="5425575">n</span><span class="op" id="5425576">)</span><span class="op" id="5425577">;</span>&nbsp;<span class="ident" id="5425579">err</span>&nbsp;<span class="op" id="5425583">!=</span>&nbsp;<span class="ident" id="5425586">nil</span>&nbsp;<span class="op" id="5425590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425596">return</span>&nbsp;<span class="ident" id="5425603">nil</span><span class="op" id="5425606">,</span>&nbsp;<span class="ident" id="5425608">err</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425619">}</span>&nbsp;<span class="keyword" id="5425621">else</span>&nbsp;<span class="op" id="5425626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425631">var</span>&nbsp;<span class="ident" id="5425635">n32</span>&nbsp;<span class="ident" id="5425639">Nlist32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425650">if</span>&nbsp;<span class="ident" id="5425653">err</span>&nbsp;<span class="op" id="5425657">:=</span>&nbsp;<span class="ident" id="5425660">binary</span><span class="op" id="5425666">.</span><span class="ident" id="5425667">Read</span><span class="op" id="5425671">(</span><span class="ident" id="5425672">b</span><span class="op" id="5425673">,</span>&nbsp;<span class="ident" id="5425675">bo</span><span class="op" id="5425677">,</span>&nbsp;<span class="op" id="5425679">&amp;</span><span class="ident" id="5425680">n32</span><span class="op" id="5425683">)</span><span class="op" id="5425684">;</span>&nbsp;<span class="ident" id="5425686">err</span>&nbsp;<span class="op" id="5425690">!=</span>&nbsp;<span class="ident" id="5425693">nil</span>&nbsp;<span class="op" id="5425697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425703">return</span>&nbsp;<span class="ident" id="5425710">nil</span><span class="op" id="5425713">,</span>&nbsp;<span class="ident" id="5425715">err</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425727">n</span><span class="op" id="5425728">.</span><span class="ident" id="5425729">Name</span>&nbsp;<span class="op" id="5425734">=</span>&nbsp;<span class="ident" id="5425736">n32</span><span class="op" id="5425739">.</span><span class="ident" id="5425740">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425748">n</span><span class="op" id="5425749">.</span><span class="ident" id="5425750">Type</span>&nbsp;<span class="op" id="5425755">=</span>&nbsp;<span class="ident" id="5425757">n32</span><span class="op" id="5425760">.</span><span class="ident" id="5425761">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425769">n</span><span class="op" id="5425770">.</span><span class="ident" id="5425771">Sect</span>&nbsp;<span class="op" id="5425776">=</span>&nbsp;<span class="ident" id="5425778">n32</span><span class="op" id="5425781">.</span><span class="ident" id="5425782">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425790">n</span><span class="op" id="5425791">.</span><span class="ident" id="5425792">Desc</span>&nbsp;<span class="op" id="5425797">=</span>&nbsp;<span class="ident" id="5425799">n32</span><span class="op" id="5425802">.</span><span class="ident" id="5425803">Desc</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425811">n</span><span class="op" id="5425812">.</span><span class="ident" id="5425813">Value</span>&nbsp;<span class="op" id="5425819">=</span>&nbsp;<span class="ident" id="5425821">uint64</span><span class="op" id="5425827">(</span><span class="ident" id="5425828">n32</span><span class="op" id="5425831">.</span><span class="ident" id="5425832">Value</span><span class="op" id="5425837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425845">sym</span>&nbsp;<span class="op" id="5425849">:=</span>&nbsp;<span class="op" id="5425852">&amp;</span><span class="ident" id="5425853">symtab</span><span class="op" id="5425859">[</span><span class="ident" id="5425860">i</span><span class="op" id="5425861">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425865">if</span>&nbsp;<span class="ident" id="5425868">n</span><span class="op" id="5425869">.</span><span class="ident" id="5425870">Name</span>&nbsp;<span class="op" id="5425875">&gt;=</span>&nbsp;<span class="builtintype" id="5425878">uint32</span><span class="op" id="5425884">(</span><span class="builtinfunc" id="5425885">len</span><span class="op" id="5425888">(</span><span class="ident" id="5425889">strtab</span><span class="op" id="5425895">)</span><span class="op" id="5425896">)</span>&nbsp;<span class="op" id="5425898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425903">return</span>&nbsp;<span class="ident" id="5425910">nil</span><span class="op" id="5425913">,</span>&nbsp;<span class="op" id="5425915">&amp;</span><span class="ident" id="5425916">FormatError</span><span class="op" id="5425927">{</span><span class="ident" id="5425928">offset</span><span class="op" id="5425934">,</span>&nbsp;<span class="string" id="5425936">&#34;invalid&nbsp;name&nbsp;in&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="5425966">,</span>&nbsp;<span class="ident" id="5425968">n</span><span class="op" id="5425969">.</span><span class="ident" id="5425970">Name</span><span class="op" id="5425974">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425982">sym</span><span class="op" id="5425985">.</span><span class="ident" id="5425986">Name</span>&nbsp;<span class="op" id="5425991">=</span>&nbsp;<span class="ident" id="5425993">cstring</span><span class="op" id="5426000">(</span><span class="ident" id="5426001">strtab</span><span class="op" id="5426007">[</span><span class="ident" id="5426008">n</span><span class="op" id="5426009">.</span><span class="ident" id="5426010">Name</span><span class="op" id="5426014">:</span><span class="op" id="5426015">]</span><span class="op" id="5426016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426020">sym</span><span class="op" id="5426023">.</span><span class="ident" id="5426024">Type</span>&nbsp;<span class="op" id="5426029">=</span>&nbsp;<span class="ident" id="5426031">n</span><span class="op" id="5426032">.</span><span class="ident" id="5426033">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426040">sym</span><span class="op" id="5426043">.</span><span class="ident" id="5426044">Sect</span>&nbsp;<span class="op" id="5426049">=</span>&nbsp;<span class="ident" id="5426051">n</span><span class="op" id="5426052">.</span><span class="ident" id="5426053">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426060">sym</span><span class="op" id="5426063">.</span><span class="ident" id="5426064">Desc</span>&nbsp;<span class="op" id="5426069">=</span>&nbsp;<span class="ident" id="5426071">n</span><span class="op" id="5426072">.</span><span class="ident" id="5426073">Desc</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426080">sym</span><span class="op" id="5426083">.</span><span class="ident" id="5426084">Value</span>&nbsp;<span class="op" id="5426090">=</span>&nbsp;<span class="ident" id="5426092">n</span><span class="op" id="5426093">.</span><span class="ident" id="5426094">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5426101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426104">st</span>&nbsp;<span class="op" id="5426107">:=</span>&nbsp;<span class="builtinfunc" id="5426110">new</span><span class="op" id="5426113">(</span><span class="ident" id="5426114">Symtab</span><span class="op" id="5426120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426123">st</span><span class="op" id="5426125">.</span><span class="ident" id="5426126">LoadBytes</span>&nbsp;<span class="op" id="5426136">=</span>&nbsp;<span class="ident" id="5426138">LoadBytes</span><span class="op" id="5426147">(</span><span class="ident" id="5426148">cmddat</span><span class="op" id="5426154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426157">st</span><span class="op" id="5426159">.</span><span class="ident" id="5426160">Syms</span>&nbsp;<span class="op" id="5426165">=</span>&nbsp;<span class="ident" id="5426167">symtab</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426175">return</span>&nbsp;<span class="ident" id="5426182">st</span><span class="op" id="5426184">,</span>&nbsp;<span class="ident" id="5426186">nil</span><br>
<span class="lineno"></span><span class="op" id="5426190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5426193">func</span>&nbsp;<span class="op" id="5426198">(</span><span class="ident" id="5426199">f</span>&nbsp;<span class="op" id="5426201">*</span><span class="ident" id="5426202">File</span><span class="op" id="5426206">)</span>&nbsp;<span class="ident" id="5426208">pushSection</span><span class="op" id="5426219">(</span><span class="ident" id="5426220">sh</span>&nbsp;<span class="op" id="5426223">*</span><span class="ident" id="5426224">Section</span><span class="op" id="5426231">,</span>&nbsp;<span class="ident" id="5426233">r</span>&nbsp;<span class="ident" id="5426235">io</span><span class="op" id="5426237">.</span><span class="ident" id="5426238">ReaderAt</span><span class="op" id="5426246">)</span>&nbsp;<span class="op" id="5426248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426251">f</span><span class="op" id="5426252">.</span><span class="ident" id="5426253">Sections</span>&nbsp;<span class="op" id="5426262">=</span>&nbsp;<span class="builtinfunc" id="5426264">append</span><span class="op" id="5426270">(</span><span class="ident" id="5426271">f</span><span class="op" id="5426272">.</span><span class="ident" id="5426273">Sections</span><span class="op" id="5426281">,</span>&nbsp;<span class="ident" id="5426283">sh</span><span class="op" id="5426285">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426288">sh</span><span class="op" id="5426290">.</span><span class="ident" id="5426291">sr</span>&nbsp;<span class="op" id="5426294">=</span>&nbsp;<span class="ident" id="5426296">io</span><span class="op" id="5426298">.</span><span class="ident" id="5426299">NewSectionReader</span><span class="op" id="5426315">(</span><span class="ident" id="5426316">r</span><span class="op" id="5426317">,</span>&nbsp;<span class="ident" id="5426319">int64</span><span class="op" id="5426324">(</span><span class="ident" id="5426325">sh</span><span class="op" id="5426327">.</span><span class="ident" id="5426328">Offset</span><span class="op" id="5426334">)</span><span class="op" id="5426335">,</span>&nbsp;<span class="ident" id="5426337">int64</span><span class="op" id="5426342">(</span><span class="ident" id="5426343">sh</span><span class="op" id="5426345">.</span><span class="ident" id="5426346">Size</span><span class="op" id="5426350">)</span><span class="op" id="5426351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426354">sh</span><span class="op" id="5426356">.</span><span class="ident" id="5426357">ReaderAt</span>&nbsp;<span class="op" id="5426366">=</span>&nbsp;<span class="ident" id="5426368">sh</span><span class="op" id="5426370">.</span><span class="ident" id="5426371">sr</span><br>
<span class="lineno"></span><span class="op" id="5426374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5426377">func</span>&nbsp;<span class="ident" id="5426382">cstring</span><span class="op" id="5426389">(</span><span class="ident" id="5426390">b</span>&nbsp;<span class="op" id="5426392">[</span><span class="op" id="5426393">]</span><span class="builtintype" id="5426394">byte</span><span class="op" id="5426398">)</span>&nbsp;<span class="builtintype" id="5426400">string</span>&nbsp;<span class="op" id="5426407">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426410">var</span>&nbsp;<span class="ident" id="5426414">i</span>&nbsp;<span class="builtintype" id="5426416">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426421">for</span>&nbsp;<span class="ident" id="5426425">i</span>&nbsp;<span class="op" id="5426427">=</span>&nbsp;<span class="num" id="5426429">0</span><span class="op" id="5426430">;</span>&nbsp;<span class="ident" id="5426432">i</span>&nbsp;<span class="op" id="5426434">&lt;</span>&nbsp;<span class="builtinfunc" id="5426436">len</span><span class="op" id="5426439">(</span><span class="ident" id="5426440">b</span><span class="op" id="5426441">)</span>&nbsp;<span class="op" id="5426443">&amp;&amp;</span>&nbsp;<span class="ident" id="5426446">b</span><span class="op" id="5426447">[</span><span class="ident" id="5426448">i</span><span class="op" id="5426449">]</span>&nbsp;<span class="op" id="5426451">!=</span>&nbsp;<span class="num" id="5426454">0</span><span class="op" id="5426455">;</span>&nbsp;<span class="ident" id="5426457">i</span><span class="op" id="5426458">++</span>&nbsp;<span class="op" id="5426461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5426464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426467">return</span>&nbsp;<span class="builtintype" id="5426474">string</span><span class="op" id="5426480">(</span><span class="ident" id="5426481">b</span><span class="op" id="5426482">[</span><span class="num" id="5426483">0</span><span class="op" id="5426484">:</span><span class="ident" id="5426485">i</span><span class="op" id="5426486">]</span><span class="op" id="5426487">)</span><br>
<span class="lineno"></span><span class="op" id="5426489">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="comment" id="5426492">//&nbsp;Segment&nbsp;returns&nbsp;the&nbsp;first&nbsp;Segment&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such&nbsp;segment&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="5426584">func</span>&nbsp;<span class="op" id="5426589">(</span><span class="ident" id="5426590">f</span>&nbsp;<span class="op" id="5426592">*</span><span class="ident" id="5426593">File</span><span class="op" id="5426597">)</span>&nbsp;<span class="ident" id="5426599">Segment</span><span class="op" id="5426606">(</span><span class="ident" id="5426607">name</span>&nbsp;<span class="builtintype" id="5426612">string</span><span class="op" id="5426618">)</span>&nbsp;<span class="op" id="5426620">*</span><span class="ident" id="5426621">Segment</span>&nbsp;<span class="op" id="5426629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426632">for</span>&nbsp;<span class="ident" id="5426636">_</span><span class="op" id="5426637">,</span>&nbsp;<span class="ident" id="5426639">l</span>&nbsp;<span class="op" id="5426641">:=</span>&nbsp;<span class="keyword" id="5426644">range</span>&nbsp;<span class="ident" id="5426650">f</span><span class="op" id="5426651">.</span><span class="ident" id="5426652">Loads</span>&nbsp;<span class="op" id="5426658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426662">if</span>&nbsp;<span class="ident" id="5426665">s</span><span class="op" id="5426666">,</span>&nbsp;<span class="ident" id="5426668">ok</span>&nbsp;<span class="op" id="5426671">:=</span>&nbsp;<span class="ident" id="5426674">l</span><span class="op" id="5426675">.</span><span class="op" id="5426676">(</span><span class="op" id="5426677">*</span><span class="ident" id="5426678">Segment</span><span class="op" id="5426685">)</span><span class="op" id="5426686">;</span>&nbsp;<span class="ident" id="5426688">ok</span>&nbsp;<span class="op" id="5426691">&amp;&amp;</span>&nbsp;<span class="ident" id="5426694">s</span><span class="op" id="5426695">.</span><span class="ident" id="5426696">Name</span>&nbsp;<span class="op" id="5426701">==</span>&nbsp;<span class="ident" id="5426704">name</span>&nbsp;<span class="op" id="5426709">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426714">return</span>&nbsp;<span class="ident" id="5426721">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5426725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5426728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426731">return</span>&nbsp;<span class="ident" id="5426738">nil</span><br>
<span class="lineno"></span><span class="op" id="5426742">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="comment" id="5426745">//&nbsp;Section&nbsp;returns&nbsp;the&nbsp;first&nbsp;section&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="5426821">//&nbsp;section&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="5426840">func</span>&nbsp;<span class="op" id="5426845">(</span><span class="ident" id="5426846">f</span>&nbsp;<span class="op" id="5426848">*</span><span class="ident" id="5426849">File</span><span class="op" id="5426853">)</span>&nbsp;<span class="ident" id="5426855">Section</span><span class="op" id="5426862">(</span><span class="ident" id="5426863">name</span>&nbsp;<span class="builtintype" id="5426868">string</span><span class="op" id="5426874">)</span>&nbsp;<span class="op" id="5426876">*</span><span class="ident" id="5426877">Section</span>&nbsp;<span class="op" id="5426885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426888">for</span>&nbsp;<span class="ident" id="5426892">_</span><span class="op" id="5426893">,</span>&nbsp;<span class="ident" id="5426895">s</span>&nbsp;<span class="op" id="5426897">:=</span>&nbsp;<span class="keyword" id="5426900">range</span>&nbsp;<span class="ident" id="5426906">f</span><span class="op" id="5426907">.</span><span class="ident" id="5426908">Sections</span>&nbsp;<span class="op" id="5426917">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426921">if</span>&nbsp;<span class="ident" id="5426924">s</span><span class="op" id="5426925">.</span><span class="ident" id="5426926">Name</span>&nbsp;<span class="op" id="5426931">==</span>&nbsp;<span class="ident" id="5426934">name</span>&nbsp;<span class="op" id="5426939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426944">return</span>&nbsp;<span class="ident" id="5426951">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5426955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5426958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426961">return</span>&nbsp;<span class="ident" id="5426968">nil</span><br>
<span class="lineno">470</span><span class="op" id="5426972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5426975">//&nbsp;DWARF&nbsp;returns&nbsp;the&nbsp;DWARF&nbsp;debug&nbsp;information&nbsp;for&nbsp;the&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5427041">func</span>&nbsp;<span class="op" id="5427046">(</span><span class="ident" id="5427047">f</span>&nbsp;<span class="op" id="5427049">*</span><span class="ident" id="5427050">File</span><span class="op" id="5427054">)</span>&nbsp;<span class="ident" id="5427056">DWARF</span><span class="op" id="5427061">(</span><span class="op" id="5427062">)</span>&nbsp;<span class="op" id="5427064">(</span><span class="op" id="5427065">*</span><span class="ident" id="5427066">dwarf</span><span class="op" id="5427071">.</span><span class="ident" id="5427072">Data</span><span class="op" id="5427076">,</span>&nbsp;<span class="builtintype" id="5427078">error</span><span class="op" id="5427083">)</span>&nbsp;<span class="op" id="5427085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5427088">//&nbsp;There&nbsp;are&nbsp;many&nbsp;other&nbsp;DWARF&nbsp;sections,&nbsp;but&nbsp;these</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5427139">//&nbsp;are&nbsp;the&nbsp;required&nbsp;ones,&nbsp;and&nbsp;the&nbsp;debug/dwarf&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5427194">//&nbsp;does&nbsp;not&nbsp;use&nbsp;the&nbsp;others,&nbsp;so&nbsp;don&#39;t&nbsp;bother&nbsp;loading&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427253">var</span>&nbsp;<span class="ident" id="5427257">names</span>&nbsp;<span class="op" id="5427263">=</span>&nbsp;<span class="op" id="5427265">[</span><span class="op" id="5427266">...</span><span class="op" id="5427269">]</span><span class="builtintype" id="5427270">string</span><span class="op" id="5427276">{</span><span class="string" id="5427277">&#34;abbrev&#34;</span><span class="op" id="5427285">,</span>&nbsp;<span class="string" id="5427287">&#34;info&#34;</span><span class="op" id="5427293">,</span>&nbsp;<span class="string" id="5427295">&#34;str&#34;</span><span class="op" id="5427300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427303">var</span>&nbsp;<span class="ident" id="5427307">dat</span>&nbsp;<span class="op" id="5427311">[</span><span class="builtinfunc" id="5427312">len</span><span class="op" id="5427315">(</span><span class="ident" id="5427316">names</span><span class="op" id="5427321">)</span><span class="op" id="5427322">]</span><span class="op" id="5427323">[</span><span class="op" id="5427324">]</span><span class="builtintype" id="5427325">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427331">for</span>&nbsp;<span class="ident" id="5427335">i</span><span class="op" id="5427336">,</span>&nbsp;<span class="ident" id="5427338">name</span>&nbsp;<span class="op" id="5427343">:=</span>&nbsp;<span class="keyword" id="5427346">range</span>&nbsp;<span class="ident" id="5427352">names</span>&nbsp;<span class="op" id="5427358">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427362">name</span>&nbsp;<span class="op" id="5427367">=</span>&nbsp;<span class="string" id="5427369">&#34;__debug_&#34;</span>&nbsp;<span class="op" id="5427380">+</span>&nbsp;<span class="ident" id="5427382">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427389">s</span>&nbsp;<span class="op" id="5427391">:=</span>&nbsp;<span class="ident" id="5427394">f</span><span class="op" id="5427395">.</span><span class="ident" id="5427396">Section</span><span class="op" id="5427403">(</span><span class="ident" id="5427404">name</span><span class="op" id="5427408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427412">if</span>&nbsp;<span class="ident" id="5427415">s</span>&nbsp;<span class="op" id="5427417">==</span>&nbsp;<span class="ident" id="5427420">nil</span>&nbsp;<span class="op" id="5427424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427429">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5427440">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427444">b</span><span class="op" id="5427445">,</span>&nbsp;<span class="ident" id="5427447">err</span>&nbsp;<span class="op" id="5427451">:=</span>&nbsp;<span class="ident" id="5427454">s</span><span class="op" id="5427455">.</span><span class="ident" id="5427456">Data</span><span class="op" id="5427460">(</span><span class="op" id="5427461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427465">if</span>&nbsp;<span class="ident" id="5427468">err</span>&nbsp;<span class="op" id="5427472">!=</span>&nbsp;<span class="ident" id="5427475">nil</span>&nbsp;<span class="op" id="5427479">&amp;&amp;</span>&nbsp;<span class="ident" id="5427482">uint64</span><span class="op" id="5427488">(</span><span class="builtinfunc" id="5427489">len</span><span class="op" id="5427492">(</span><span class="ident" id="5427493">b</span><span class="op" id="5427494">)</span><span class="op" id="5427495">)</span>&nbsp;<span class="op" id="5427497">&lt;</span>&nbsp;<span class="ident" id="5427499">s</span><span class="op" id="5427500">.</span><span class="ident" id="5427501">Size</span>&nbsp;<span class="op" id="5427506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427511">return</span>&nbsp;<span class="ident" id="5427518">nil</span><span class="op" id="5427521">,</span>&nbsp;<span class="ident" id="5427523">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5427529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427533">dat</span><span class="op" id="5427536">[</span><span class="ident" id="5427537">i</span><span class="op" id="5427538">]</span>&nbsp;<span class="op" id="5427540">=</span>&nbsp;<span class="ident" id="5427542">b</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5427545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427549">abbrev</span><span class="op" id="5427555">,</span>&nbsp;<span class="ident" id="5427557">info</span><span class="op" id="5427561">,</span>&nbsp;<span class="ident" id="5427563">str</span>&nbsp;<span class="op" id="5427567">:=</span>&nbsp;<span class="ident" id="5427570">dat</span><span class="op" id="5427573">[</span><span class="num" id="5427574">0</span><span class="op" id="5427575">]</span><span class="op" id="5427576">,</span>&nbsp;<span class="ident" id="5427578">dat</span><span class="op" id="5427581">[</span><span class="num" id="5427582">1</span><span class="op" id="5427583">]</span><span class="op" id="5427584">,</span>&nbsp;<span class="ident" id="5427586">dat</span><span class="op" id="5427589">[</span><span class="num" id="5427590">2</span><span class="op" id="5427591">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427594">return</span>&nbsp;<span class="ident" id="5427601">dwarf</span><span class="op" id="5427606">.</span><span class="ident" id="5427607">New</span><span class="op" id="5427610">(</span><span class="ident" id="5427611">abbrev</span><span class="op" id="5427617">,</span>&nbsp;<span class="ident" id="5427619">nil</span><span class="op" id="5427622">,</span>&nbsp;<span class="ident" id="5427624">nil</span><span class="op" id="5427627">,</span>&nbsp;<span class="ident" id="5427629">info</span><span class="op" id="5427633">,</span>&nbsp;<span class="ident" id="5427635">nil</span><span class="op" id="5427638">,</span>&nbsp;<span class="ident" id="5427640">nil</span><span class="op" id="5427643">,</span>&nbsp;<span class="ident" id="5427645">nil</span><span class="op" id="5427648">,</span>&nbsp;<span class="ident" id="5427650">str</span><span class="op" id="5427653">)</span><br>
<span class="lineno"></span><span class="op" id="5427655">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="comment" id="5427658">//&nbsp;ImportedSymbols&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;symbols</span><br>
<span class="lineno"></span><span class="comment" id="5427710">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="5427765">//&nbsp;satisfied&nbsp;by&nbsp;other&nbsp;libraries&nbsp;at&nbsp;dynamic&nbsp;load&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="5427819">func</span>&nbsp;<span class="op" id="5427824">(</span><span class="ident" id="5427825">f</span>&nbsp;<span class="op" id="5427827">*</span><span class="ident" id="5427828">File</span><span class="op" id="5427832">)</span>&nbsp;<span class="ident" id="5427834">ImportedSymbols</span><span class="op" id="5427849">(</span><span class="op" id="5427850">)</span>&nbsp;<span class="op" id="5427852">(</span><span class="op" id="5427853">[</span><span class="op" id="5427854">]</span><span class="builtintype" id="5427855">string</span><span class="op" id="5427861">,</span>&nbsp;<span class="builtintype" id="5427863">error</span><span class="op" id="5427868">)</span>&nbsp;<span class="op" id="5427870">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427873">if</span>&nbsp;<span class="ident" id="5427876">f</span><span class="op" id="5427877">.</span><span class="ident" id="5427878">Dysymtab</span>&nbsp;<span class="op" id="5427887">==</span>&nbsp;<span class="ident" id="5427890">nil</span>&nbsp;<span class="op" id="5427894">||</span>&nbsp;<span class="ident" id="5427897">f</span><span class="op" id="5427898">.</span><span class="ident" id="5427899">Symtab</span>&nbsp;<span class="op" id="5427906">==</span>&nbsp;<span class="ident" id="5427909">nil</span>&nbsp;<span class="op" id="5427913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427917">return</span>&nbsp;<span class="ident" id="5427924">nil</span><span class="op" id="5427927">,</span>&nbsp;<span class="op" id="5427929">&amp;</span><span class="ident" id="5427930">FormatError</span><span class="op" id="5427941">{</span><span class="num" id="5427942">0</span><span class="op" id="5427943">,</span>&nbsp;<span class="string" id="5427945">&#34;missing&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="5427967">,</span>&nbsp;<span class="ident" id="5427969">nil</span><span class="op" id="5427972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5427975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427979">st</span>&nbsp;<span class="op" id="5427982">:=</span>&nbsp;<span class="ident" id="5427985">f</span><span class="op" id="5427986">.</span><span class="ident" id="5427987">Symtab</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427995">dt</span>&nbsp;<span class="op" id="5427998">:=</span>&nbsp;<span class="ident" id="5428001">f</span><span class="op" id="5428002">.</span><span class="ident" id="5428003">Dysymtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428013">var</span>&nbsp;<span class="ident" id="5428017">all</span>&nbsp;<span class="op" id="5428021">[</span><span class="op" id="5428022">]</span><span class="builtintype" id="5428023">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428031">for</span>&nbsp;<span class="ident" id="5428035">_</span><span class="op" id="5428036">,</span>&nbsp;<span class="ident" id="5428038">s</span>&nbsp;<span class="op" id="5428040">:=</span>&nbsp;<span class="keyword" id="5428043">range</span>&nbsp;<span class="ident" id="5428049">st</span><span class="op" id="5428051">.</span><span class="ident" id="5428052">Syms</span><span class="op" id="5428056">[</span><span class="ident" id="5428057">dt</span><span class="op" id="5428059">.</span><span class="ident" id="5428060">Iundefsym</span>&nbsp;<span class="op" id="5428070">:</span>&nbsp;<span class="ident" id="5428072">dt</span><span class="op" id="5428074">.</span><span class="ident" id="5428075">Iundefsym</span><span class="op" id="5428084">+</span><span class="ident" id="5428085">dt</span><span class="op" id="5428087">.</span><span class="ident" id="5428088">Nundefsym</span><span class="op" id="5428097">]</span>&nbsp;<span class="op" id="5428099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428103">all</span>&nbsp;<span class="op" id="5428107">=</span>&nbsp;<span class="builtinfunc" id="5428109">append</span><span class="op" id="5428115">(</span><span class="ident" id="5428116">all</span><span class="op" id="5428119">,</span>&nbsp;<span class="ident" id="5428121">s</span><span class="op" id="5428122">.</span><span class="ident" id="5428123">Name</span><span class="op" id="5428127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5428130">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428133">return</span>&nbsp;<span class="ident" id="5428140">all</span><span class="op" id="5428143">,</span>&nbsp;<span class="ident" id="5428145">nil</span><br>
<span class="lineno"></span><span class="op" id="5428149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5428152">//&nbsp;ImportedLibraries&nbsp;returns&nbsp;the&nbsp;paths&nbsp;of&nbsp;all&nbsp;libraries</span><br>
<span class="lineno"></span><span class="comment" id="5428208">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno">515</span><span class="comment" id="5428263">//&nbsp;linked&nbsp;with&nbsp;the&nbsp;binary&nbsp;at&nbsp;dynamic&nbsp;link&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="5428311">func</span>&nbsp;<span class="op" id="5428316">(</span><span class="ident" id="5428317">f</span>&nbsp;<span class="op" id="5428319">*</span><span class="ident" id="5428320">File</span><span class="op" id="5428324">)</span>&nbsp;<span class="ident" id="5428326">ImportedLibraries</span><span class="op" id="5428343">(</span><span class="op" id="5428344">)</span>&nbsp;<span class="op" id="5428346">(</span><span class="op" id="5428347">[</span><span class="op" id="5428348">]</span><span class="builtintype" id="5428349">string</span><span class="op" id="5428355">,</span>&nbsp;<span class="builtintype" id="5428357">error</span><span class="op" id="5428362">)</span>&nbsp;<span class="op" id="5428364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428367">var</span>&nbsp;<span class="ident" id="5428371">all</span>&nbsp;<span class="op" id="5428375">[</span><span class="op" id="5428376">]</span><span class="builtintype" id="5428377">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428385">for</span>&nbsp;<span class="ident" id="5428389">_</span><span class="op" id="5428390">,</span>&nbsp;<span class="ident" id="5428392">l</span>&nbsp;<span class="op" id="5428394">:=</span>&nbsp;<span class="keyword" id="5428397">range</span>&nbsp;<span class="ident" id="5428403">f</span><span class="op" id="5428404">.</span><span class="ident" id="5428405">Loads</span>&nbsp;<span class="op" id="5428411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428415">if</span>&nbsp;<span class="ident" id="5428418">lib</span><span class="op" id="5428421">,</span>&nbsp;<span class="ident" id="5428423">ok</span>&nbsp;<span class="op" id="5428426">:=</span>&nbsp;<span class="ident" id="5428429">l</span><span class="op" id="5428430">.</span><span class="op" id="5428431">(</span><span class="op" id="5428432">*</span><span class="ident" id="5428433">Dylib</span><span class="op" id="5428438">)</span><span class="op" id="5428439">;</span>&nbsp;<span class="ident" id="5428441">ok</span>&nbsp;<span class="op" id="5428444">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428449">all</span>&nbsp;<span class="op" id="5428453">=</span>&nbsp;<span class="builtinfunc" id="5428455">append</span><span class="op" id="5428461">(</span><span class="ident" id="5428462">all</span><span class="op" id="5428465">,</span>&nbsp;<span class="ident" id="5428467">lib</span><span class="op" id="5428470">.</span><span class="ident" id="5428471">Name</span><span class="op" id="5428475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5428479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5428482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428485">return</span>&nbsp;<span class="ident" id="5428492">all</span><span class="op" id="5428495">,</span>&nbsp;<span class="ident" id="5428497">nil</span><br>
<span class="lineno"></span><span class="op" id="5428501">}</span>
</div>
</body>
</html>
