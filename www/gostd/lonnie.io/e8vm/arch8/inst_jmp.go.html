<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/arch8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/arch8/console.go.html">console.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu.go.html">cpu.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu_test.go.html">cpu_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/device.go.html">device.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/exception.go.html">exception.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br_test.go.html">inst_br_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm_test.go.html">inst_imm_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg_test.go.html">inst_reg_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/int_bus.go.html">int_bus.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt.go.html">interrupt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt_test.go.html">interrupt_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/machine.go.html">machine.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/multi_core.go.html">multi_core.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page.go.html">page.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table.go.html">page_table.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table_test.go.html">page_table_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_test.go.html">page_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory.go.html">phy_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory_test.go.html">phy_memory_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs.go.html">regs.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs_test.go.html">regs_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/run_image.go.html">run_image.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/serial.go.html">serial.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/ticker.go.html">ticker.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory.go.html">virt_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory_test.go.html">virt_memory_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="3570967">package</span>&nbsp;<span class="ident" id="3570975">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3570982">//&nbsp;InstJmp&nbsp;executes&nbsp;jump&nbsp;instruction</span><br>
<span class="lineno"></span><span class="keyword" id="3571019">type</span>&nbsp;<span class="ident" id="3571024">instJmp</span>&nbsp;<span class="keyword" id="3571032">struct</span><span class="op" id="3571038">{</span><span class="op" id="3571039">}</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span><span class="comment" id="3571042">//&nbsp;I&nbsp;executes&nbsp;the&nbsp;jump&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="comment" id="3571078">//&nbsp;Might&nbsp;return&nbsp;invalid&nbsp;instruction&nbsp;exception.</span><br>
<span class="lineno"></span><span class="keyword" id="3571125">func</span>&nbsp;<span class="op" id="3571130">(</span><span class="ident" id="3571131">i</span>&nbsp;<span class="op" id="3571133">*</span><span class="ident" id="3571134">instJmp</span><span class="op" id="3571141">)</span>&nbsp;<span class="ident" id="3571143">I</span><span class="op" id="3571144">(</span><span class="ident" id="3571145">cpu</span>&nbsp;<span class="op" id="3571149">*</span><span class="ident" id="3571150">cpu</span><span class="op" id="3571153">,</span>&nbsp;<span class="ident" id="3571155">in</span>&nbsp;<span class="builtintype" id="3571158">uint32</span><span class="op" id="3571164">)</span>&nbsp;<span class="op" id="3571166">*</span><span class="ident" id="3571167">Excep</span>&nbsp;<span class="op" id="3571173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3571176">op</span>&nbsp;<span class="op" id="3571179">:=</span>&nbsp;<span class="op" id="3571182">(</span><span class="ident" id="3571183">in</span>&nbsp;<span class="op" id="3571186">&gt;&gt;</span>&nbsp;<span class="num" id="3571189">30</span><span class="op" id="3571191">)</span>&nbsp;<span class="op" id="3571193">&amp;</span>&nbsp;<span class="num" id="3571195">0x3</span>&nbsp;<span class="comment" id="3571199">//&nbsp;(32:30]</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3571211">off</span>&nbsp;<span class="op" id="3571215">:=</span>&nbsp;<span class="ident" id="3571218">in</span>&nbsp;<span class="op" id="3571221">&amp;</span>&nbsp;<span class="num" id="3571223">0x3fffffff</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3571236">pc</span>&nbsp;<span class="op" id="3571239">:=</span>&nbsp;<span class="ident" id="3571242">cpu</span><span class="op" id="3571245">.</span><span class="ident" id="3571246">regs</span><span class="op" id="3571250">[</span><span class="ident" id="3571251">PC</span><span class="op" id="3571253">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3571256">to</span>&nbsp;<span class="op" id="3571259">:=</span>&nbsp;<span class="ident" id="3571262">pc</span>&nbsp;<span class="op" id="3571265">+</span>&nbsp;<span class="op" id="3571267">(</span><span class="ident" id="3571268">off</span>&nbsp;<span class="op" id="3571272">&lt;&lt;</span>&nbsp;<span class="num" id="3571275">2</span><span class="op" id="3571276">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3571280">switch</span>&nbsp;<span class="ident" id="3571287">op</span>&nbsp;<span class="op" id="3571290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3571293">case</span>&nbsp;<span class="num" id="3571298">2</span><span class="op" id="3571299">:</span>&nbsp;<span class="comment" id="3571301">//&nbsp;j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3571308">/*&nbsp;do&nbsp;nothing&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3571326">case</span>&nbsp;<span class="num" id="3571331">3</span><span class="op" id="3571332">:</span>&nbsp;<span class="comment" id="3571334">//&nbsp;jal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3571343">cpu</span><span class="op" id="3571346">.</span><span class="ident" id="3571347">regs</span><span class="op" id="3571351">[</span><span class="ident" id="3571352">RET</span><span class="op" id="3571355">]</span>&nbsp;<span class="op" id="3571357">=</span>&nbsp;<span class="ident" id="3571359">pc</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3571363">default</span><span class="op" id="3571370">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3571374">return</span>&nbsp;<span class="ident" id="3571381">errInvalidInst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3571397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3571401">cpu</span><span class="op" id="3571404">.</span><span class="ident" id="3571405">regs</span><span class="op" id="3571409">[</span><span class="ident" id="3571410">PC</span><span class="op" id="3571412">]</span>&nbsp;<span class="op" id="3571414">=</span>&nbsp;<span class="ident" id="3571416">to</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3571420">return</span>&nbsp;<span class="ident" id="3571427">nil</span><br>
<span class="lineno"></span><span class="op" id="3571431">}</span>
</div>
</body>
</html>
