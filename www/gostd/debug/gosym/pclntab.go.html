<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6179761">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6179817">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6179871">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6179922">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Line&nbsp;tables<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6179945">package</span>&nbsp;<span class="ident" id="6179953">gosym</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="6179960">import</span>&nbsp;<span class="op" id="6179967">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6179970">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6179989">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="6179996">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="6179999">//&nbsp;A&nbsp;LineTable&nbsp;is&nbsp;a&nbsp;data&nbsp;structure&nbsp;mapping&nbsp;program&nbsp;counters&nbsp;to&nbsp;line&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="6180076">//</span><br>
<span class="lineno"></span><span class="comment" id="6180079">//&nbsp;In&nbsp;Go&nbsp;1.1&nbsp;and&nbsp;earlier,&nbsp;each&nbsp;function&nbsp;(represented&nbsp;by&nbsp;a&nbsp;Func)&nbsp;had&nbsp;its&nbsp;own&nbsp;LineTable,</span><br>
<span class="lineno"></span><span class="comment" id="6180166">//&nbsp;and&nbsp;the&nbsp;line&nbsp;number&nbsp;corresponded&nbsp;to&nbsp;a&nbsp;numbering&nbsp;of&nbsp;all&nbsp;source&nbsp;lines&nbsp;in&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="6180244">//&nbsp;program,&nbsp;across&nbsp;all&nbsp;files.&nbsp;That&nbsp;absolute&nbsp;line&nbsp;number&nbsp;would&nbsp;then&nbsp;have&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6180322">//&nbsp;converted&nbsp;separately&nbsp;to&nbsp;a&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;within&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="6180394">//</span><br>
<span class="lineno"></span><span class="comment" id="6180397">//&nbsp;In&nbsp;Go&nbsp;1.2,&nbsp;the&nbsp;format&nbsp;of&nbsp;the&nbsp;data&nbsp;changed&nbsp;so&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;single&nbsp;LineTable</span><br>
<span class="lineno"></span><span class="comment" id="6180478">//&nbsp;for&nbsp;the&nbsp;entire&nbsp;program,&nbsp;shared&nbsp;by&nbsp;all&nbsp;Funcs,&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;absolute&nbsp;line</span><br>
<span class="lineno">25</span><span class="comment" id="6180557">//&nbsp;numbers,&nbsp;just&nbsp;line&nbsp;numbers&nbsp;within&nbsp;specific&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="6180610">//</span><br>
<span class="lineno"></span><span class="comment" id="6180613">//&nbsp;For&nbsp;the&nbsp;most&nbsp;part,&nbsp;LineTable&#39;s&nbsp;methods&nbsp;should&nbsp;be&nbsp;treated&nbsp;as&nbsp;an&nbsp;internal</span><br>
<span class="lineno"></span><span class="comment" id="6180688">//&nbsp;detail&nbsp;of&nbsp;the&nbsp;package;&nbsp;callers&nbsp;should&nbsp;use&nbsp;the&nbsp;methods&nbsp;on&nbsp;Table&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="6180763">type</span>&nbsp;<span class="ident" id="6180768">LineTable</span>&nbsp;<span class="keyword" id="6180778">struct</span>&nbsp;<span class="op" id="6180785">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180788">Data</span>&nbsp;<span class="op" id="6180793">[</span><span class="op" id="6180794">]</span><span class="builtintype" id="6180795">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180801">PC</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6180806">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180814">Line</span>&nbsp;<span class="builtintype" id="6180819">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6180825">//&nbsp;Go&nbsp;1.2&nbsp;state</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180842">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6180851">sync</span><span class="op" id="6180855">.</span><span class="ident" id="6180856">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180863">go12</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6180872">int</span>&nbsp;<span class="comment" id="6180876">//&nbsp;is&nbsp;this&nbsp;in&nbsp;Go&nbsp;1.2&nbsp;format?&nbsp;-1&nbsp;no,&nbsp;0&nbsp;unknown,&nbsp;1&nbsp;yes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180930">binary</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6180939">binary</span><span class="op" id="6180945">.</span><span class="ident" id="6180946">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180957">quantum</span>&nbsp;&nbsp;<span class="builtintype" id="6180966">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180974">ptrsize</span>&nbsp;&nbsp;<span class="builtintype" id="6180983">uint32</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180991">functab</span>&nbsp;&nbsp;<span class="op" id="6181000">[</span><span class="op" id="6181001">]</span><span class="builtintype" id="6181002">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181008">nfunctab</span>&nbsp;<span class="builtintype" id="6181017">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181025">filetab</span>&nbsp;&nbsp;<span class="op" id="6181034">[</span><span class="op" id="6181035">]</span><span class="builtintype" id="6181036">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181042">nfiletab</span>&nbsp;<span class="builtintype" id="6181051">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181059">fileMap</span>&nbsp;&nbsp;<span class="keyword" id="6181068">map</span><span class="op" id="6181071">[</span><span class="builtintype" id="6181072">string</span><span class="op" id="6181078">]</span><span class="builtintype" id="6181079">uint32</span><br>
<span class="lineno">45</span><span class="op" id="6181086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6181089">//&nbsp;NOTE(rsc):&nbsp;This&nbsp;is&nbsp;wrong&nbsp;for&nbsp;GOARCH=arm,&nbsp;which&nbsp;uses&nbsp;a&nbsp;quantum&nbsp;of&nbsp;4,</span><br>
<span class="lineno"></span><span class="comment" id="6181160">//&nbsp;but&nbsp;we&nbsp;have&nbsp;no&nbsp;idea&nbsp;whether&nbsp;we&#39;re&nbsp;using&nbsp;arm&nbsp;or&nbsp;not.&nbsp;This&nbsp;only</span><br>
<span class="lineno"></span><span class="comment" id="6181225">//&nbsp;matters&nbsp;in&nbsp;the&nbsp;old&nbsp;(pre-Go&nbsp;1.2)&nbsp;symbol&nbsp;table&nbsp;format,&nbsp;so&nbsp;it&#39;s&nbsp;not&nbsp;worth</span><br>
<span class="lineno">50</span><span class="comment" id="6181299">//&nbsp;fixing.</span><br>
<span class="lineno"></span><span class="keyword" id="6181310">const</span>&nbsp;<span class="ident" id="6181316">oldQuantum</span>&nbsp;<span class="op" id="6181327">=</span>&nbsp;<span class="num" id="6181329">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6181332">func</span>&nbsp;<span class="op" id="6181337">(</span><span class="ident" id="6181338">t</span>&nbsp;<span class="op" id="6181340">*</span><span class="ident" id="6181341">LineTable</span><span class="op" id="6181350">)</span>&nbsp;<span class="ident" id="6181352">parse</span><span class="op" id="6181357">(</span><span class="ident" id="6181358">targetPC</span>&nbsp;<span class="ident" id="6181367">uint64</span><span class="op" id="6181373">,</span>&nbsp;<span class="ident" id="6181375">targetLine</span>&nbsp;<span class="builtintype" id="6181386">int</span><span class="op" id="6181389">)</span>&nbsp;<span class="op" id="6181391">(</span><span class="ident" id="6181392">b</span>&nbsp;<span class="op" id="6181394">[</span><span class="op" id="6181395">]</span><span class="builtintype" id="6181396">byte</span><span class="op" id="6181400">,</span>&nbsp;<span class="ident" id="6181402">pc</span>&nbsp;<span class="ident" id="6181405">uint64</span><span class="op" id="6181411">,</span>&nbsp;<span class="ident" id="6181413">line</span>&nbsp;<span class="builtintype" id="6181418">int</span><span class="op" id="6181421">)</span>&nbsp;<span class="op" id="6181423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6181426">//&nbsp;The&nbsp;PC/line&nbsp;table&nbsp;can&nbsp;be&nbsp;thought&nbsp;of&nbsp;as&nbsp;a&nbsp;sequence&nbsp;of</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6181483">//&nbsp;&nbsp;&lt;pc&nbsp;update&gt;*&nbsp;&lt;line&nbsp;update&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6181515">//&nbsp;batches.&nbsp;&nbsp;Each&nbsp;update&nbsp;batch&nbsp;results&nbsp;in&nbsp;a&nbsp;(pc,&nbsp;line)&nbsp;pair,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6181577">//&nbsp;where&nbsp;line&nbsp;applies&nbsp;to&nbsp;every&nbsp;PC&nbsp;from&nbsp;pc&nbsp;up&nbsp;to&nbsp;but&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6181634">//&nbsp;including&nbsp;the&nbsp;pc&nbsp;of&nbsp;the&nbsp;next&nbsp;pair.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6181673">//</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6181677">//&nbsp;Here&nbsp;we&nbsp;process&nbsp;each&nbsp;update&nbsp;individually,&nbsp;which&nbsp;simplifies</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6181740">//&nbsp;the&nbsp;code,&nbsp;but&nbsp;makes&nbsp;the&nbsp;corner&nbsp;cases&nbsp;more&nbsp;confusing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181797">b</span><span class="op" id="6181798">,</span>&nbsp;<span class="ident" id="6181800">pc</span><span class="op" id="6181802">,</span>&nbsp;<span class="ident" id="6181804">line</span>&nbsp;<span class="op" id="6181809">=</span>&nbsp;<span class="ident" id="6181811">t</span><span class="op" id="6181812">.</span><span class="ident" id="6181813">Data</span><span class="op" id="6181817">,</span>&nbsp;<span class="ident" id="6181819">t</span><span class="op" id="6181820">.</span><span class="ident" id="6181821">PC</span><span class="op" id="6181823">,</span>&nbsp;<span class="ident" id="6181825">t</span><span class="op" id="6181826">.</span><span class="ident" id="6181827">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181833">for</span>&nbsp;<span class="ident" id="6181837">pc</span>&nbsp;<span class="op" id="6181840">&lt;=</span>&nbsp;<span class="ident" id="6181843">targetPC</span>&nbsp;<span class="op" id="6181852">&amp;&amp;</span>&nbsp;<span class="ident" id="6181855">line</span>&nbsp;<span class="op" id="6181860">!=</span>&nbsp;<span class="ident" id="6181863">targetLine</span>&nbsp;<span class="op" id="6181874">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="6181877">len</span><span class="op" id="6181880">(</span><span class="ident" id="6181881">b</span><span class="op" id="6181882">)</span>&nbsp;<span class="op" id="6181884">&gt;</span>&nbsp;<span class="num" id="6181886">0</span>&nbsp;<span class="op" id="6181888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181892">code</span>&nbsp;<span class="op" id="6181897">:=</span>&nbsp;<span class="ident" id="6181900">b</span><span class="op" id="6181901">[</span><span class="num" id="6181902">0</span><span class="op" id="6181903">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181907">b</span>&nbsp;<span class="op" id="6181909">=</span>&nbsp;<span class="ident" id="6181911">b</span><span class="op" id="6181912">[</span><span class="num" id="6181913">1</span><span class="op" id="6181914">:</span><span class="op" id="6181915">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181919">switch</span>&nbsp;<span class="op" id="6181926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181930">case</span>&nbsp;<span class="ident" id="6181935">code</span>&nbsp;<span class="op" id="6181940">==</span>&nbsp;<span class="num" id="6181943">0</span><span class="op" id="6181944">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181949">if</span>&nbsp;<span class="builtinfunc" id="6181952">len</span><span class="op" id="6181955">(</span><span class="ident" id="6181956">b</span><span class="op" id="6181957">)</span>&nbsp;<span class="op" id="6181959">&lt;</span>&nbsp;<span class="num" id="6181961">4</span>&nbsp;<span class="op" id="6181963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181969">b</span>&nbsp;<span class="op" id="6181971">=</span>&nbsp;<span class="ident" id="6181973">b</span><span class="op" id="6181974">[</span><span class="num" id="6181975">0</span><span class="op" id="6181976">:</span><span class="num" id="6181977">0</span><span class="op" id="6181978">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181984">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6181993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181998">val</span>&nbsp;<span class="op" id="6182002">:=</span>&nbsp;<span class="ident" id="6182005">binary</span><span class="op" id="6182011">.</span><span class="ident" id="6182012">BigEndian</span><span class="op" id="6182021">.</span><span class="ident" id="6182022">Uint32</span><span class="op" id="6182028">(</span><span class="ident" id="6182029">b</span><span class="op" id="6182030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182035">b</span>&nbsp;<span class="op" id="6182037">=</span>&nbsp;<span class="ident" id="6182039">b</span><span class="op" id="6182040">[</span><span class="num" id="6182041">4</span><span class="op" id="6182042">:</span><span class="op" id="6182043">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182048">line</span>&nbsp;<span class="op" id="6182053">+=</span>&nbsp;<span class="builtintype" id="6182056">int</span><span class="op" id="6182059">(</span><span class="ident" id="6182060">val</span><span class="op" id="6182063">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182067">case</span>&nbsp;<span class="ident" id="6182072">code</span>&nbsp;<span class="op" id="6182077">&lt;=</span>&nbsp;<span class="num" id="6182080">64</span><span class="op" id="6182082">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182087">line</span>&nbsp;<span class="op" id="6182092">+=</span>&nbsp;<span class="builtintype" id="6182095">int</span><span class="op" id="6182098">(</span><span class="ident" id="6182099">code</span><span class="op" id="6182103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182107">case</span>&nbsp;<span class="ident" id="6182112">code</span>&nbsp;<span class="op" id="6182117">&lt;=</span>&nbsp;<span class="num" id="6182120">128</span><span class="op" id="6182123">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182128">line</span>&nbsp;<span class="op" id="6182133">-=</span>&nbsp;<span class="builtintype" id="6182136">int</span><span class="op" id="6182139">(</span><span class="ident" id="6182140">code</span>&nbsp;<span class="op" id="6182145">-</span>&nbsp;<span class="num" id="6182147">64</span><span class="op" id="6182149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182153">default</span><span class="op" id="6182160">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182165">pc</span>&nbsp;<span class="op" id="6182168">+=</span>&nbsp;<span class="ident" id="6182171">oldQuantum</span>&nbsp;<span class="op" id="6182182">*</span>&nbsp;<span class="ident" id="6182184">uint64</span><span class="op" id="6182190">(</span><span class="ident" id="6182191">code</span><span class="op" id="6182195">-</span><span class="num" id="6182196">128</span><span class="op" id="6182199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182204">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6182215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182219">pc</span>&nbsp;<span class="op" id="6182222">+=</span>&nbsp;<span class="ident" id="6182225">oldQuantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6182237">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182240">return</span>&nbsp;<span class="ident" id="6182247">b</span><span class="op" id="6182248">,</span>&nbsp;<span class="ident" id="6182250">pc</span><span class="op" id="6182252">,</span>&nbsp;<span class="ident" id="6182254">line</span><br>
<span class="lineno"></span><span class="op" id="6182259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6182262">func</span>&nbsp;<span class="op" id="6182267">(</span><span class="ident" id="6182268">t</span>&nbsp;<span class="op" id="6182270">*</span><span class="ident" id="6182271">LineTable</span><span class="op" id="6182280">)</span>&nbsp;<span class="ident" id="6182282">slice</span><span class="op" id="6182287">(</span><span class="ident" id="6182288">pc</span>&nbsp;<span class="ident" id="6182291">uint64</span><span class="op" id="6182297">)</span>&nbsp;<span class="op" id="6182299">*</span><span class="ident" id="6182300">LineTable</span>&nbsp;<span class="op" id="6182310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182313">data</span><span class="op" id="6182317">,</span>&nbsp;<span class="ident" id="6182319">pc</span><span class="op" id="6182321">,</span>&nbsp;<span class="ident" id="6182323">line</span>&nbsp;<span class="op" id="6182328">:=</span>&nbsp;<span class="ident" id="6182331">t</span><span class="op" id="6182332">.</span><span class="ident" id="6182333">parse</span><span class="op" id="6182338">(</span><span class="ident" id="6182339">pc</span><span class="op" id="6182341">,</span>&nbsp;<span class="op" id="6182343">-</span><span class="num" id="6182344">1</span><span class="op" id="6182345">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182348">return</span>&nbsp;<span class="op" id="6182355">&amp;</span><span class="ident" id="6182356">LineTable</span><span class="op" id="6182365">{</span><span class="ident" id="6182366">Data</span><span class="op" id="6182370">:</span>&nbsp;<span class="ident" id="6182372">data</span><span class="op" id="6182376">,</span>&nbsp;<span class="ident" id="6182378">PC</span><span class="op" id="6182380">:</span>&nbsp;<span class="ident" id="6182382">pc</span><span class="op" id="6182384">,</span>&nbsp;<span class="ident" id="6182386">Line</span><span class="op" id="6182390">:</span>&nbsp;<span class="ident" id="6182392">line</span><span class="op" id="6182396">}</span><br>
<span class="lineno"></span><span class="op" id="6182398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6182401">//&nbsp;PCToLine&nbsp;returns&nbsp;the&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="comment" id="6182468">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;PCToLine&nbsp;method&nbsp;instead.</span><br>
<span class="lineno">95</span><span class="keyword" id="6182523">func</span>&nbsp;<span class="op" id="6182528">(</span><span class="ident" id="6182529">t</span>&nbsp;<span class="op" id="6182531">*</span><span class="ident" id="6182532">LineTable</span><span class="op" id="6182541">)</span>&nbsp;<span class="ident" id="6182543">PCToLine</span><span class="op" id="6182551">(</span><span class="ident" id="6182552">pc</span>&nbsp;<span class="ident" id="6182555">uint64</span><span class="op" id="6182561">)</span>&nbsp;<span class="builtintype" id="6182563">int</span>&nbsp;<span class="op" id="6182567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182570">if</span>&nbsp;<span class="ident" id="6182573">t</span><span class="op" id="6182574">.</span><span class="ident" id="6182575">isGo12</span><span class="op" id="6182581">(</span><span class="op" id="6182582">)</span>&nbsp;<span class="op" id="6182584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182588">return</span>&nbsp;<span class="ident" id="6182595">t</span><span class="op" id="6182596">.</span><span class="ident" id="6182597">go12PCToLine</span><span class="op" id="6182609">(</span><span class="ident" id="6182610">pc</span><span class="op" id="6182612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6182615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182618">_</span><span class="op" id="6182619">,</span>&nbsp;<span class="ident" id="6182621">_</span><span class="op" id="6182622">,</span>&nbsp;<span class="ident" id="6182624">line</span>&nbsp;<span class="op" id="6182629">:=</span>&nbsp;<span class="ident" id="6182632">t</span><span class="op" id="6182633">.</span><span class="ident" id="6182634">parse</span><span class="op" id="6182639">(</span><span class="ident" id="6182640">pc</span><span class="op" id="6182642">,</span>&nbsp;<span class="op" id="6182644">-</span><span class="num" id="6182645">1</span><span class="op" id="6182646">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182649">return</span>&nbsp;<span class="ident" id="6182656">line</span><br>
<span class="lineno"></span><span class="op" id="6182661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6182664">//&nbsp;LineToPC&nbsp;returns&nbsp;the&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;given&nbsp;line&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="6182731">//&nbsp;considering&nbsp;only&nbsp;program&nbsp;counters&nbsp;before&nbsp;maxpc.</span><br>
<span class="lineno">105</span><span class="comment" id="6182782">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;LineToPC&nbsp;method&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="6182837">func</span>&nbsp;<span class="op" id="6182842">(</span><span class="ident" id="6182843">t</span>&nbsp;<span class="op" id="6182845">*</span><span class="ident" id="6182846">LineTable</span><span class="op" id="6182855">)</span>&nbsp;<span class="ident" id="6182857">LineToPC</span><span class="op" id="6182865">(</span><span class="ident" id="6182866">line</span>&nbsp;<span class="builtintype" id="6182871">int</span><span class="op" id="6182874">,</span>&nbsp;<span class="ident" id="6182876">maxpc</span>&nbsp;<span class="ident" id="6182882">uint64</span><span class="op" id="6182888">)</span>&nbsp;<span class="ident" id="6182890">uint64</span>&nbsp;<span class="op" id="6182897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182900">if</span>&nbsp;<span class="ident" id="6182903">t</span><span class="op" id="6182904">.</span><span class="ident" id="6182905">isGo12</span><span class="op" id="6182911">(</span><span class="op" id="6182912">)</span>&nbsp;<span class="op" id="6182914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182918">return</span>&nbsp;<span class="num" id="6182925">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6182928">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182931">_</span><span class="op" id="6182932">,</span>&nbsp;<span class="ident" id="6182934">pc</span><span class="op" id="6182936">,</span>&nbsp;<span class="ident" id="6182938">line1</span>&nbsp;<span class="op" id="6182944">:=</span>&nbsp;<span class="ident" id="6182947">t</span><span class="op" id="6182948">.</span><span class="ident" id="6182949">parse</span><span class="op" id="6182954">(</span><span class="ident" id="6182955">maxpc</span><span class="op" id="6182960">,</span>&nbsp;<span class="ident" id="6182962">line</span><span class="op" id="6182966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182969">if</span>&nbsp;<span class="ident" id="6182972">line1</span>&nbsp;<span class="op" id="6182978">!=</span>&nbsp;<span class="ident" id="6182981">line</span>&nbsp;<span class="op" id="6182986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182990">return</span>&nbsp;<span class="num" id="6182997">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6183000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6183003">//&nbsp;Subtract&nbsp;quantum&nbsp;from&nbsp;PC&nbsp;to&nbsp;account&nbsp;for&nbsp;post-line&nbsp;increment</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183067">return</span>&nbsp;<span class="ident" id="6183074">pc</span>&nbsp;<span class="op" id="6183077">-</span>&nbsp;<span class="ident" id="6183079">oldQuantum</span><br>
<span class="lineno"></span><span class="op" id="6183090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6183093">//&nbsp;NewLineTable&nbsp;returns&nbsp;a&nbsp;new&nbsp;PC/line&nbsp;table</span><br>
<span class="lineno"></span><span class="comment" id="6183137">//&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;encoded&nbsp;data.</span><br>
<span class="lineno">120</span><span class="comment" id="6183175">//&nbsp;Text&nbsp;must&nbsp;be&nbsp;the&nbsp;start&nbsp;address&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6183216">//&nbsp;corresponding&nbsp;text&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6183247">func</span>&nbsp;<span class="ident" id="6183252">NewLineTable</span><span class="op" id="6183264">(</span><span class="ident" id="6183265">data</span>&nbsp;<span class="op" id="6183270">[</span><span class="op" id="6183271">]</span><span class="builtintype" id="6183272">byte</span><span class="op" id="6183276">,</span>&nbsp;<span class="ident" id="6183278">text</span>&nbsp;<span class="ident" id="6183283">uint64</span><span class="op" id="6183289">)</span>&nbsp;<span class="op" id="6183291">*</span><span class="ident" id="6183292">LineTable</span>&nbsp;<span class="op" id="6183302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183305">return</span>&nbsp;<span class="op" id="6183312">&amp;</span><span class="ident" id="6183313">LineTable</span><span class="op" id="6183322">{</span><span class="ident" id="6183323">Data</span><span class="op" id="6183327">:</span>&nbsp;<span class="ident" id="6183329">data</span><span class="op" id="6183333">,</span>&nbsp;<span class="ident" id="6183335">PC</span><span class="op" id="6183337">:</span>&nbsp;<span class="ident" id="6183339">text</span><span class="op" id="6183343">,</span>&nbsp;<span class="ident" id="6183345">Line</span><span class="op" id="6183349">:</span>&nbsp;<span class="num" id="6183351">0</span><span class="op" id="6183352">}</span><br>
<span class="lineno"></span><span class="op" id="6183354">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="6183357">//&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="6183388">//&nbsp;See&nbsp;golang.org/s/go12symtab.</span><br>
<span class="lineno"></span><span class="comment" id="6183420">//</span><br>
<span class="lineno"></span><span class="comment" id="6183423">//&nbsp;A&nbsp;general&nbsp;note&nbsp;about&nbsp;the&nbsp;methods&nbsp;here:&nbsp;rather&nbsp;than&nbsp;try&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">130</span><span class="comment" id="6183490">//&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&nbsp;errors,&nbsp;we&nbsp;trust&nbsp;Go&nbsp;to&nbsp;detect&nbsp;them,&nbsp;and&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="6183558">//&nbsp;we&nbsp;recover&nbsp;from&nbsp;the&nbsp;panics&nbsp;and&nbsp;treat&nbsp;them&nbsp;as&nbsp;indicative&nbsp;of&nbsp;a&nbsp;malformed</span><br>
<span class="lineno"></span><span class="comment" id="6183632">//&nbsp;or&nbsp;incomplete&nbsp;table.</span><br>
<span class="lineno"></span><span class="comment" id="6183656">//</span><br>
<span class="lineno"></span><span class="comment" id="6183659">//&nbsp;The&nbsp;methods&nbsp;called&nbsp;by&nbsp;symtab.go,&nbsp;which&nbsp;begin&nbsp;with&nbsp;&#34;go12&#34;&nbsp;prefixes,</span><br>
<span class="lineno">135</span><span class="comment" id="6183729">//&nbsp;are&nbsp;expected&nbsp;to&nbsp;have&nbsp;that&nbsp;recovery&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6183775">//&nbsp;isGo12&nbsp;reports&nbsp;whether&nbsp;this&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;(or&nbsp;later)&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6183843">func</span>&nbsp;<span class="op" id="6183848">(</span><span class="ident" id="6183849">t</span>&nbsp;<span class="op" id="6183851">*</span><span class="ident" id="6183852">LineTable</span><span class="op" id="6183861">)</span>&nbsp;<span class="ident" id="6183863">isGo12</span><span class="op" id="6183869">(</span><span class="op" id="6183870">)</span>&nbsp;<span class="builtintype" id="6183872">bool</span>&nbsp;<span class="op" id="6183877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183880">t</span><span class="op" id="6183881">.</span><span class="ident" id="6183882">go12Init</span><span class="op" id="6183890">(</span><span class="op" id="6183891">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183894">return</span>&nbsp;<span class="ident" id="6183901">t</span><span class="op" id="6183902">.</span><span class="ident" id="6183903">go12</span>&nbsp;<span class="op" id="6183908">==</span>&nbsp;<span class="num" id="6183911">1</span><br>
<span class="lineno"></span><span class="op" id="6183913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6183916">const</span>&nbsp;<span class="ident" id="6183922">go12magic</span>&nbsp;<span class="op" id="6183932">=</span>&nbsp;<span class="num" id="6183934">0xfffffffb</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="comment" id="6183946">//&nbsp;uintptr&nbsp;returns&nbsp;the&nbsp;pointer-sized&nbsp;value&nbsp;encoded&nbsp;at&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="6184003">//&nbsp;The&nbsp;pointer&nbsp;size&nbsp;is&nbsp;dictated&nbsp;by&nbsp;the&nbsp;table&nbsp;being&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="6184060">func</span>&nbsp;<span class="op" id="6184065">(</span><span class="ident" id="6184066">t</span>&nbsp;<span class="op" id="6184068">*</span><span class="ident" id="6184069">LineTable</span><span class="op" id="6184078">)</span>&nbsp;<span class="builtintype" id="6184080">uintptr</span><span class="op" id="6184087">(</span><span class="ident" id="6184088">b</span>&nbsp;<span class="op" id="6184090">[</span><span class="op" id="6184091">]</span><span class="builtintype" id="6184092">byte</span><span class="op" id="6184096">)</span>&nbsp;<span class="ident" id="6184098">uint64</span>&nbsp;<span class="op" id="6184105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184108">if</span>&nbsp;<span class="ident" id="6184111">t</span><span class="op" id="6184112">.</span><span class="ident" id="6184113">ptrsize</span>&nbsp;<span class="op" id="6184121">==</span>&nbsp;<span class="num" id="6184124">4</span>&nbsp;<span class="op" id="6184126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184130">return</span>&nbsp;<span class="ident" id="6184137">uint64</span><span class="op" id="6184143">(</span><span class="ident" id="6184144">t</span><span class="op" id="6184145">.</span><span class="ident" id="6184146">binary</span><span class="op" id="6184152">.</span><span class="ident" id="6184153">Uint32</span><span class="op" id="6184159">(</span><span class="ident" id="6184160">b</span><span class="op" id="6184161">)</span><span class="op" id="6184162">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6184165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184168">return</span>&nbsp;<span class="ident" id="6184175">t</span><span class="op" id="6184176">.</span><span class="ident" id="6184177">binary</span><span class="op" id="6184183">.</span><span class="ident" id="6184184">Uint64</span><span class="op" id="6184190">(</span><span class="ident" id="6184191">b</span><span class="op" id="6184192">)</span><br>
<span class="lineno"></span><span class="op" id="6184194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6184197">//&nbsp;go12init&nbsp;initializes&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;metadata&nbsp;if&nbsp;t&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno">155</span><span class="keyword" id="6184272">func</span>&nbsp;<span class="op" id="6184277">(</span><span class="ident" id="6184278">t</span>&nbsp;<span class="op" id="6184280">*</span><span class="ident" id="6184281">LineTable</span><span class="op" id="6184290">)</span>&nbsp;<span class="ident" id="6184292">go12Init</span><span class="op" id="6184300">(</span><span class="op" id="6184301">)</span>&nbsp;<span class="op" id="6184303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184306">t</span><span class="op" id="6184307">.</span><span class="ident" id="6184308">mu</span><span class="op" id="6184310">.</span><span class="ident" id="6184311">Lock</span><span class="op" id="6184315">(</span><span class="op" id="6184316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184319">defer</span>&nbsp;<span class="ident" id="6184325">t</span><span class="op" id="6184326">.</span><span class="ident" id="6184327">mu</span><span class="op" id="6184329">.</span><span class="ident" id="6184330">Unlock</span><span class="op" id="6184336">(</span><span class="op" id="6184337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184340">if</span>&nbsp;<span class="ident" id="6184343">t</span><span class="op" id="6184344">.</span><span class="ident" id="6184345">go12</span>&nbsp;<span class="op" id="6184350">!=</span>&nbsp;<span class="num" id="6184353">0</span>&nbsp;<span class="op" id="6184355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184359">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6184367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184371">defer</span>&nbsp;<span class="keyword" id="6184377">func</span><span class="op" id="6184381">(</span><span class="op" id="6184382">)</span>&nbsp;<span class="op" id="6184384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6184388">//&nbsp;If&nbsp;we&nbsp;panic&nbsp;parsing,&nbsp;assume&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6184453">recover</span><span class="op" id="6184460">(</span><span class="op" id="6184461">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6184464">}</span><span class="op" id="6184465">(</span><span class="op" id="6184466">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6184470">//&nbsp;Check&nbsp;header:&nbsp;4-byte&nbsp;magic,&nbsp;two&nbsp;zeros,&nbsp;pc&nbsp;quantum,&nbsp;pointer&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184539">t</span><span class="op" id="6184540">.</span><span class="ident" id="6184541">go12</span>&nbsp;<span class="op" id="6184546">=</span>&nbsp;<span class="op" id="6184548">-</span><span class="num" id="6184549">1</span>&nbsp;<span class="comment" id="6184551">//&nbsp;not&nbsp;Go&nbsp;1.2&nbsp;until&nbsp;proven&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184589">if</span>&nbsp;<span class="builtinfunc" id="6184592">len</span><span class="op" id="6184595">(</span><span class="ident" id="6184596">t</span><span class="op" id="6184597">.</span><span class="ident" id="6184598">Data</span><span class="op" id="6184602">)</span>&nbsp;<span class="op" id="6184604">&lt;</span>&nbsp;<span class="num" id="6184606">16</span>&nbsp;<span class="op" id="6184609">||</span>&nbsp;<span class="ident" id="6184612">t</span><span class="op" id="6184613">.</span><span class="ident" id="6184614">Data</span><span class="op" id="6184618">[</span><span class="num" id="6184619">4</span><span class="op" id="6184620">]</span>&nbsp;<span class="op" id="6184622">!=</span>&nbsp;<span class="num" id="6184625">0</span>&nbsp;<span class="op" id="6184627">||</span>&nbsp;<span class="ident" id="6184630">t</span><span class="op" id="6184631">.</span><span class="ident" id="6184632">Data</span><span class="op" id="6184636">[</span><span class="num" id="6184637">5</span><span class="op" id="6184638">]</span>&nbsp;<span class="op" id="6184640">!=</span>&nbsp;<span class="num" id="6184643">0</span>&nbsp;<span class="op" id="6184645">||</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6184650">(</span><span class="ident" id="6184651">t</span><span class="op" id="6184652">.</span><span class="ident" id="6184653">Data</span><span class="op" id="6184657">[</span><span class="num" id="6184658">6</span><span class="op" id="6184659">]</span>&nbsp;<span class="op" id="6184661">!=</span>&nbsp;<span class="num" id="6184664">1</span>&nbsp;<span class="op" id="6184666">&amp;&amp;</span>&nbsp;<span class="ident" id="6184669">t</span><span class="op" id="6184670">.</span><span class="ident" id="6184671">Data</span><span class="op" id="6184675">[</span><span class="num" id="6184676">6</span><span class="op" id="6184677">]</span>&nbsp;<span class="op" id="6184679">!=</span>&nbsp;<span class="num" id="6184682">4</span><span class="op" id="6184683">)</span>&nbsp;<span class="op" id="6184685">||</span>&nbsp;<span class="comment" id="6184688">//&nbsp;pc&nbsp;quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6184704">(</span><span class="ident" id="6184705">t</span><span class="op" id="6184706">.</span><span class="ident" id="6184707">Data</span><span class="op" id="6184711">[</span><span class="num" id="6184712">7</span><span class="op" id="6184713">]</span>&nbsp;<span class="op" id="6184715">!=</span>&nbsp;<span class="num" id="6184718">4</span>&nbsp;<span class="op" id="6184720">&amp;&amp;</span>&nbsp;<span class="ident" id="6184723">t</span><span class="op" id="6184724">.</span><span class="ident" id="6184725">Data</span><span class="op" id="6184729">[</span><span class="num" id="6184730">7</span><span class="op" id="6184731">]</span>&nbsp;<span class="op" id="6184733">!=</span>&nbsp;<span class="num" id="6184736">8</span><span class="op" id="6184737">)</span>&nbsp;<span class="op" id="6184739">{</span>&nbsp;<span class="comment" id="6184741">//&nbsp;pointer&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184759">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6184767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184771">switch</span>&nbsp;<span class="builtintype" id="6184778">uint32</span><span class="op" id="6184784">(</span><span class="ident" id="6184785">go12magic</span><span class="op" id="6184794">)</span>&nbsp;<span class="op" id="6184796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184799">case</span>&nbsp;<span class="ident" id="6184804">binary</span><span class="op" id="6184810">.</span><span class="ident" id="6184811">LittleEndian</span><span class="op" id="6184823">.</span><span class="ident" id="6184824">Uint32</span><span class="op" id="6184830">(</span><span class="ident" id="6184831">t</span><span class="op" id="6184832">.</span><span class="ident" id="6184833">Data</span><span class="op" id="6184837">)</span><span class="op" id="6184838">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184842">t</span><span class="op" id="6184843">.</span><span class="ident" id="6184844">binary</span>&nbsp;<span class="op" id="6184851">=</span>&nbsp;<span class="ident" id="6184853">binary</span><span class="op" id="6184859">.</span><span class="ident" id="6184860">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184874">case</span>&nbsp;<span class="ident" id="6184879">binary</span><span class="op" id="6184885">.</span><span class="ident" id="6184886">BigEndian</span><span class="op" id="6184895">.</span><span class="ident" id="6184896">Uint32</span><span class="op" id="6184902">(</span><span class="ident" id="6184903">t</span><span class="op" id="6184904">.</span><span class="ident" id="6184905">Data</span><span class="op" id="6184909">)</span><span class="op" id="6184910">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184914">t</span><span class="op" id="6184915">.</span><span class="ident" id="6184916">binary</span>&nbsp;<span class="op" id="6184923">=</span>&nbsp;<span class="ident" id="6184925">binary</span><span class="op" id="6184931">.</span><span class="ident" id="6184932">BigEndian</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184943">default</span><span class="op" id="6184950">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184954">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6184962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184966">t</span><span class="op" id="6184967">.</span><span class="ident" id="6184968">quantum</span>&nbsp;<span class="op" id="6184976">=</span>&nbsp;<span class="builtintype" id="6184978">uint32</span><span class="op" id="6184984">(</span><span class="ident" id="6184985">t</span><span class="op" id="6184986">.</span><span class="ident" id="6184987">Data</span><span class="op" id="6184991">[</span><span class="num" id="6184992">6</span><span class="op" id="6184993">]</span><span class="op" id="6184994">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184997">t</span><span class="op" id="6184998">.</span><span class="ident" id="6184999">ptrsize</span>&nbsp;<span class="op" id="6185007">=</span>&nbsp;<span class="builtintype" id="6185009">uint32</span><span class="op" id="6185015">(</span><span class="ident" id="6185016">t</span><span class="op" id="6185017">.</span><span class="ident" id="6185018">Data</span><span class="op" id="6185022">[</span><span class="num" id="6185023">7</span><span class="op" id="6185024">]</span><span class="op" id="6185025">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185029">t</span><span class="op" id="6185030">.</span><span class="ident" id="6185031">nfunctab</span>&nbsp;<span class="op" id="6185040">=</span>&nbsp;<span class="builtintype" id="6185042">uint32</span><span class="op" id="6185048">(</span><span class="ident" id="6185049">t</span><span class="op" id="6185050">.</span><span class="builtintype" id="6185051">uintptr</span><span class="op" id="6185058">(</span><span class="ident" id="6185059">t</span><span class="op" id="6185060">.</span><span class="ident" id="6185061">Data</span><span class="op" id="6185065">[</span><span class="num" id="6185066">8</span><span class="op" id="6185067">:</span><span class="op" id="6185068">]</span><span class="op" id="6185069">)</span><span class="op" id="6185070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185073">t</span><span class="op" id="6185074">.</span><span class="ident" id="6185075">functab</span>&nbsp;<span class="op" id="6185083">=</span>&nbsp;<span class="ident" id="6185085">t</span><span class="op" id="6185086">.</span><span class="ident" id="6185087">Data</span><span class="op" id="6185091">[</span><span class="num" id="6185092">8</span><span class="op" id="6185093">+</span><span class="ident" id="6185094">t</span><span class="op" id="6185095">.</span><span class="ident" id="6185096">ptrsize</span><span class="op" id="6185103">:</span><span class="op" id="6185104">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185107">functabsize</span>&nbsp;<span class="op" id="6185119">:=</span>&nbsp;<span class="ident" id="6185122">t</span><span class="op" id="6185123">.</span><span class="ident" id="6185124">nfunctab</span><span class="op" id="6185132">*</span><span class="num" id="6185133">2</span><span class="op" id="6185134">*</span><span class="ident" id="6185135">t</span><span class="op" id="6185136">.</span><span class="ident" id="6185137">ptrsize</span>&nbsp;<span class="op" id="6185145">+</span>&nbsp;<span class="ident" id="6185147">t</span><span class="op" id="6185148">.</span><span class="ident" id="6185149">ptrsize</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185158">fileoff</span>&nbsp;<span class="op" id="6185166">:=</span>&nbsp;<span class="ident" id="6185169">t</span><span class="op" id="6185170">.</span><span class="ident" id="6185171">binary</span><span class="op" id="6185177">.</span><span class="ident" id="6185178">Uint32</span><span class="op" id="6185184">(</span><span class="ident" id="6185185">t</span><span class="op" id="6185186">.</span><span class="ident" id="6185187">functab</span><span class="op" id="6185194">[</span><span class="ident" id="6185195">functabsize</span><span class="op" id="6185206">:</span><span class="op" id="6185207">]</span><span class="op" id="6185208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185211">t</span><span class="op" id="6185212">.</span><span class="ident" id="6185213">functab</span>&nbsp;<span class="op" id="6185221">=</span>&nbsp;<span class="ident" id="6185223">t</span><span class="op" id="6185224">.</span><span class="ident" id="6185225">functab</span><span class="op" id="6185232">[</span><span class="op" id="6185233">:</span><span class="ident" id="6185234">functabsize</span><span class="op" id="6185245">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185248">t</span><span class="op" id="6185249">.</span><span class="ident" id="6185250">filetab</span>&nbsp;<span class="op" id="6185258">=</span>&nbsp;<span class="ident" id="6185260">t</span><span class="op" id="6185261">.</span><span class="ident" id="6185262">Data</span><span class="op" id="6185266">[</span><span class="ident" id="6185267">fileoff</span><span class="op" id="6185274">:</span><span class="op" id="6185275">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185278">t</span><span class="op" id="6185279">.</span><span class="ident" id="6185280">nfiletab</span>&nbsp;<span class="op" id="6185289">=</span>&nbsp;<span class="ident" id="6185291">t</span><span class="op" id="6185292">.</span><span class="ident" id="6185293">binary</span><span class="op" id="6185299">.</span><span class="ident" id="6185300">Uint32</span><span class="op" id="6185306">(</span><span class="ident" id="6185307">t</span><span class="op" id="6185308">.</span><span class="ident" id="6185309">filetab</span><span class="op" id="6185316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185319">t</span><span class="op" id="6185320">.</span><span class="ident" id="6185321">filetab</span>&nbsp;<span class="op" id="6185329">=</span>&nbsp;<span class="ident" id="6185331">t</span><span class="op" id="6185332">.</span><span class="ident" id="6185333">filetab</span><span class="op" id="6185340">[</span><span class="op" id="6185341">:</span><span class="ident" id="6185342">t</span><span class="op" id="6185343">.</span><span class="ident" id="6185344">nfiletab</span><span class="op" id="6185352">*</span><span class="num" id="6185353">4</span><span class="op" id="6185354">]</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185358">t</span><span class="op" id="6185359">.</span><span class="ident" id="6185360">go12</span>&nbsp;<span class="op" id="6185365">=</span>&nbsp;<span class="num" id="6185367">1</span>&nbsp;<span class="comment" id="6185369">//&nbsp;so&nbsp;far&nbsp;so&nbsp;good</span><br>
<span class="lineno"></span><span class="op" id="6185387">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6185390">//&nbsp;go12Funcs&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;Funcs&nbsp;derived&nbsp;from&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">200</span><span class="keyword" id="6185464">func</span>&nbsp;<span class="op" id="6185469">(</span><span class="ident" id="6185470">t</span>&nbsp;<span class="op" id="6185472">*</span><span class="ident" id="6185473">LineTable</span><span class="op" id="6185482">)</span>&nbsp;<span class="ident" id="6185484">go12Funcs</span><span class="op" id="6185493">(</span><span class="op" id="6185494">)</span>&nbsp;<span class="op" id="6185496">[</span><span class="op" id="6185497">]</span><span class="ident" id="6185498">Func</span>&nbsp;<span class="op" id="6185503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6185506">//&nbsp;Assume&nbsp;it&nbsp;is&nbsp;malformed&nbsp;and&nbsp;return&nbsp;nil&nbsp;on&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6185558">defer</span>&nbsp;<span class="keyword" id="6185564">func</span><span class="op" id="6185568">(</span><span class="op" id="6185569">)</span>&nbsp;<span class="op" id="6185571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6185575">recover</span><span class="op" id="6185582">(</span><span class="op" id="6185583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6185586">}</span><span class="op" id="6185587">(</span><span class="op" id="6185588">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185592">n</span>&nbsp;<span class="op" id="6185594">:=</span>&nbsp;<span class="builtinfunc" id="6185597">len</span><span class="op" id="6185600">(</span><span class="ident" id="6185601">t</span><span class="op" id="6185602">.</span><span class="ident" id="6185603">functab</span><span class="op" id="6185610">)</span>&nbsp;<span class="op" id="6185612">/</span>&nbsp;<span class="builtintype" id="6185614">int</span><span class="op" id="6185617">(</span><span class="ident" id="6185618">t</span><span class="op" id="6185619">.</span><span class="ident" id="6185620">ptrsize</span><span class="op" id="6185627">)</span>&nbsp;<span class="op" id="6185629">/</span>&nbsp;<span class="num" id="6185631">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185634">funcs</span>&nbsp;<span class="op" id="6185640">:=</span>&nbsp;<span class="builtinfunc" id="6185643">make</span><span class="op" id="6185647">(</span><span class="op" id="6185648">[</span><span class="op" id="6185649">]</span><span class="ident" id="6185650">Func</span><span class="op" id="6185654">,</span>&nbsp;<span class="ident" id="6185656">n</span><span class="op" id="6185657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6185660">for</span>&nbsp;<span class="ident" id="6185664">i</span>&nbsp;<span class="op" id="6185666">:=</span>&nbsp;<span class="keyword" id="6185669">range</span>&nbsp;<span class="ident" id="6185675">funcs</span>&nbsp;<span class="op" id="6185681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185685">f</span>&nbsp;<span class="op" id="6185687">:=</span>&nbsp;<span class="op" id="6185690">&amp;</span><span class="ident" id="6185691">funcs</span><span class="op" id="6185696">[</span><span class="ident" id="6185697">i</span><span class="op" id="6185698">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185702">f</span><span class="op" id="6185703">.</span><span class="ident" id="6185704">Entry</span>&nbsp;<span class="op" id="6185710">=</span>&nbsp;<span class="ident" id="6185712">uint64</span><span class="op" id="6185718">(</span><span class="ident" id="6185719">t</span><span class="op" id="6185720">.</span><span class="builtintype" id="6185721">uintptr</span><span class="op" id="6185728">(</span><span class="ident" id="6185729">t</span><span class="op" id="6185730">.</span><span class="ident" id="6185731">functab</span><span class="op" id="6185738">[</span><span class="num" id="6185739">2</span><span class="op" id="6185740">*</span><span class="ident" id="6185741">i</span><span class="op" id="6185742">*</span><span class="builtintype" id="6185743">int</span><span class="op" id="6185746">(</span><span class="ident" id="6185747">t</span><span class="op" id="6185748">.</span><span class="ident" id="6185749">ptrsize</span><span class="op" id="6185756">)</span><span class="op" id="6185757">:</span><span class="op" id="6185758">]</span><span class="op" id="6185759">)</span><span class="op" id="6185760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185764">f</span><span class="op" id="6185765">.</span><span class="ident" id="6185766">End</span>&nbsp;<span class="op" id="6185770">=</span>&nbsp;<span class="ident" id="6185772">uint64</span><span class="op" id="6185778">(</span><span class="ident" id="6185779">t</span><span class="op" id="6185780">.</span><span class="builtintype" id="6185781">uintptr</span><span class="op" id="6185788">(</span><span class="ident" id="6185789">t</span><span class="op" id="6185790">.</span><span class="ident" id="6185791">functab</span><span class="op" id="6185798">[</span><span class="op" id="6185799">(</span><span class="num" id="6185800">2</span><span class="op" id="6185801">*</span><span class="ident" id="6185802">i</span><span class="op" id="6185803">+</span><span class="num" id="6185804">2</span><span class="op" id="6185805">)</span><span class="op" id="6185806">*</span><span class="builtintype" id="6185807">int</span><span class="op" id="6185810">(</span><span class="ident" id="6185811">t</span><span class="op" id="6185812">.</span><span class="ident" id="6185813">ptrsize</span><span class="op" id="6185820">)</span><span class="op" id="6185821">:</span><span class="op" id="6185822">]</span><span class="op" id="6185823">)</span><span class="op" id="6185824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185828">info</span>&nbsp;<span class="op" id="6185833">:=</span>&nbsp;<span class="ident" id="6185836">t</span><span class="op" id="6185837">.</span><span class="ident" id="6185838">Data</span><span class="op" id="6185842">[</span><span class="ident" id="6185843">t</span><span class="op" id="6185844">.</span><span class="builtintype" id="6185845">uintptr</span><span class="op" id="6185852">(</span><span class="ident" id="6185853">t</span><span class="op" id="6185854">.</span><span class="ident" id="6185855">functab</span><span class="op" id="6185862">[</span><span class="op" id="6185863">(</span><span class="num" id="6185864">2</span><span class="op" id="6185865">*</span><span class="ident" id="6185866">i</span><span class="op" id="6185867">+</span><span class="num" id="6185868">1</span><span class="op" id="6185869">)</span><span class="op" id="6185870">*</span><span class="builtintype" id="6185871">int</span><span class="op" id="6185874">(</span><span class="ident" id="6185875">t</span><span class="op" id="6185876">.</span><span class="ident" id="6185877">ptrsize</span><span class="op" id="6185884">)</span><span class="op" id="6185885">:</span><span class="op" id="6185886">]</span><span class="op" id="6185887">)</span><span class="op" id="6185888">:</span><span class="op" id="6185889">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185893">f</span><span class="op" id="6185894">.</span><span class="ident" id="6185895">LineTable</span>&nbsp;<span class="op" id="6185905">=</span>&nbsp;<span class="ident" id="6185907">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185911">f</span><span class="op" id="6185912">.</span><span class="ident" id="6185913">FrameSize</span>&nbsp;<span class="op" id="6185923">=</span>&nbsp;<span class="builtintype" id="6185925">int</span><span class="op" id="6185928">(</span><span class="ident" id="6185929">t</span><span class="op" id="6185930">.</span><span class="ident" id="6185931">binary</span><span class="op" id="6185937">.</span><span class="ident" id="6185938">Uint32</span><span class="op" id="6185944">(</span><span class="ident" id="6185945">info</span><span class="op" id="6185949">[</span><span class="ident" id="6185950">t</span><span class="op" id="6185951">.</span><span class="ident" id="6185952">ptrsize</span><span class="op" id="6185959">+</span><span class="num" id="6185960">2</span><span class="op" id="6185961">*</span><span class="num" id="6185962">4</span><span class="op" id="6185963">:</span><span class="op" id="6185964">]</span><span class="op" id="6185965">)</span><span class="op" id="6185966">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185970">f</span><span class="op" id="6185971">.</span><span class="ident" id="6185972">Sym</span>&nbsp;<span class="op" id="6185976">=</span>&nbsp;<span class="op" id="6185978">&amp;</span><span class="ident" id="6185979">Sym</span><span class="op" id="6185982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185987">Value</span><span class="op" id="6185992">:</span>&nbsp;&nbsp;<span class="ident" id="6185995">f</span><span class="op" id="6185996">.</span><span class="ident" id="6185997">Entry</span><span class="op" id="6186002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186007">Type</span><span class="op" id="6186011">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6186015">&#39;T&#39;</span><span class="op" id="6186018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186023">Name</span><span class="op" id="6186027">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6186031">t</span><span class="op" id="6186032">.</span><span class="builtintype" id="6186033">string</span><span class="op" id="6186039">(</span><span class="ident" id="6186040">t</span><span class="op" id="6186041">.</span><span class="ident" id="6186042">binary</span><span class="op" id="6186048">.</span><span class="ident" id="6186049">Uint32</span><span class="op" id="6186055">(</span><span class="ident" id="6186056">info</span><span class="op" id="6186060">[</span><span class="ident" id="6186061">t</span><span class="op" id="6186062">.</span><span class="ident" id="6186063">ptrsize</span><span class="op" id="6186070">:</span><span class="op" id="6186071">]</span><span class="op" id="6186072">)</span><span class="op" id="6186073">)</span><span class="op" id="6186074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186079">GoType</span><span class="op" id="6186085">:</span>&nbsp;<span class="num" id="6186087">0</span><span class="op" id="6186088">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186093">Func</span><span class="op" id="6186097">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6186101">f</span><span class="op" id="6186102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6186106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6186109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6186112">return</span>&nbsp;<span class="ident" id="6186119">funcs</span><br>
<span class="lineno"></span><span class="op" id="6186125">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="6186128">//&nbsp;findFunc&nbsp;returns&nbsp;the&nbsp;func&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="keyword" id="6186201">func</span>&nbsp;<span class="op" id="6186206">(</span><span class="ident" id="6186207">t</span>&nbsp;<span class="op" id="6186209">*</span><span class="ident" id="6186210">LineTable</span><span class="op" id="6186219">)</span>&nbsp;<span class="ident" id="6186221">findFunc</span><span class="op" id="6186229">(</span><span class="ident" id="6186230">pc</span>&nbsp;<span class="ident" id="6186233">uint64</span><span class="op" id="6186239">)</span>&nbsp;<span class="op" id="6186241">[</span><span class="op" id="6186242">]</span><span class="builtintype" id="6186243">byte</span>&nbsp;<span class="op" id="6186248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6186251">if</span>&nbsp;<span class="ident" id="6186254">pc</span>&nbsp;<span class="op" id="6186257">&lt;</span>&nbsp;<span class="ident" id="6186259">t</span><span class="op" id="6186260">.</span><span class="builtintype" id="6186261">uintptr</span><span class="op" id="6186268">(</span><span class="ident" id="6186269">t</span><span class="op" id="6186270">.</span><span class="ident" id="6186271">functab</span><span class="op" id="6186278">)</span>&nbsp;<span class="op" id="6186280">||</span>&nbsp;<span class="ident" id="6186283">pc</span>&nbsp;<span class="op" id="6186286">&gt;=</span>&nbsp;<span class="ident" id="6186289">t</span><span class="op" id="6186290">.</span><span class="builtintype" id="6186291">uintptr</span><span class="op" id="6186298">(</span><span class="ident" id="6186299">t</span><span class="op" id="6186300">.</span><span class="ident" id="6186301">functab</span><span class="op" id="6186308">[</span><span class="builtinfunc" id="6186309">len</span><span class="op" id="6186312">(</span><span class="ident" id="6186313">t</span><span class="op" id="6186314">.</span><span class="ident" id="6186315">functab</span><span class="op" id="6186322">)</span><span class="op" id="6186323">-</span><span class="builtintype" id="6186324">int</span><span class="op" id="6186327">(</span><span class="ident" id="6186328">t</span><span class="op" id="6186329">.</span><span class="ident" id="6186330">ptrsize</span><span class="op" id="6186337">)</span><span class="op" id="6186338">:</span><span class="op" id="6186339">]</span><span class="op" id="6186340">)</span>&nbsp;<span class="op" id="6186342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6186346">return</span>&nbsp;<span class="ident" id="6186353">nil</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6186358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6186362">//&nbsp;The&nbsp;function&nbsp;table&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;2*nfunctab+1&nbsp;uintptrs,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6186421">//&nbsp;alternating&nbsp;program&nbsp;counters&nbsp;and&nbsp;offsets&nbsp;to&nbsp;func&nbsp;structures.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186486">f</span>&nbsp;<span class="op" id="6186488">:=</span>&nbsp;<span class="ident" id="6186491">t</span><span class="op" id="6186492">.</span><span class="ident" id="6186493">functab</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186502">nf</span>&nbsp;<span class="op" id="6186505">:=</span>&nbsp;<span class="ident" id="6186508">t</span><span class="op" id="6186509">.</span><span class="ident" id="6186510">nfunctab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6186520">for</span>&nbsp;<span class="ident" id="6186524">nf</span>&nbsp;<span class="op" id="6186527">&gt;</span>&nbsp;<span class="num" id="6186529">0</span>&nbsp;<span class="op" id="6186531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186535">m</span>&nbsp;<span class="op" id="6186537">:=</span>&nbsp;<span class="ident" id="6186540">nf</span>&nbsp;<span class="op" id="6186543">/</span>&nbsp;<span class="num" id="6186545">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186549">fm</span>&nbsp;<span class="op" id="6186552">:=</span>&nbsp;<span class="ident" id="6186555">f</span><span class="op" id="6186556">[</span><span class="num" id="6186557">2</span><span class="op" id="6186558">*</span><span class="ident" id="6186559">t</span><span class="op" id="6186560">.</span><span class="ident" id="6186561">ptrsize</span><span class="op" id="6186568">*</span><span class="ident" id="6186569">m</span><span class="op" id="6186570">:</span><span class="op" id="6186571">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6186575">if</span>&nbsp;<span class="ident" id="6186578">t</span><span class="op" id="6186579">.</span><span class="builtintype" id="6186580">uintptr</span><span class="op" id="6186587">(</span><span class="ident" id="6186588">fm</span><span class="op" id="6186590">)</span>&nbsp;<span class="op" id="6186592">&lt;=</span>&nbsp;<span class="ident" id="6186595">pc</span>&nbsp;<span class="op" id="6186598">&amp;&amp;</span>&nbsp;<span class="ident" id="6186601">pc</span>&nbsp;<span class="op" id="6186604">&lt;</span>&nbsp;<span class="ident" id="6186606">t</span><span class="op" id="6186607">.</span><span class="builtintype" id="6186608">uintptr</span><span class="op" id="6186615">(</span><span class="ident" id="6186616">fm</span><span class="op" id="6186618">[</span><span class="num" id="6186619">2</span><span class="op" id="6186620">*</span><span class="ident" id="6186621">t</span><span class="op" id="6186622">.</span><span class="ident" id="6186623">ptrsize</span><span class="op" id="6186630">:</span><span class="op" id="6186631">]</span><span class="op" id="6186632">)</span>&nbsp;<span class="op" id="6186634">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6186639">return</span>&nbsp;<span class="ident" id="6186646">t</span><span class="op" id="6186647">.</span><span class="ident" id="6186648">Data</span><span class="op" id="6186652">[</span><span class="ident" id="6186653">t</span><span class="op" id="6186654">.</span><span class="builtintype" id="6186655">uintptr</span><span class="op" id="6186662">(</span><span class="ident" id="6186663">fm</span><span class="op" id="6186665">[</span><span class="ident" id="6186666">t</span><span class="op" id="6186667">.</span><span class="ident" id="6186668">ptrsize</span><span class="op" id="6186675">:</span><span class="op" id="6186676">]</span><span class="op" id="6186677">)</span><span class="op" id="6186678">:</span><span class="op" id="6186679">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6186683">}</span>&nbsp;<span class="keyword" id="6186685">else</span>&nbsp;<span class="keyword" id="6186690">if</span>&nbsp;<span class="ident" id="6186693">pc</span>&nbsp;<span class="op" id="6186696">&lt;</span>&nbsp;<span class="ident" id="6186698">t</span><span class="op" id="6186699">.</span><span class="builtintype" id="6186700">uintptr</span><span class="op" id="6186707">(</span><span class="ident" id="6186708">fm</span><span class="op" id="6186710">)</span>&nbsp;<span class="op" id="6186712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186717">nf</span>&nbsp;<span class="op" id="6186720">=</span>&nbsp;<span class="ident" id="6186722">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6186726">}</span>&nbsp;<span class="keyword" id="6186728">else</span>&nbsp;<span class="op" id="6186733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186738">f</span>&nbsp;<span class="op" id="6186740">=</span>&nbsp;<span class="ident" id="6186742">f</span><span class="op" id="6186743">[</span><span class="op" id="6186744">(</span><span class="ident" id="6186745">m</span><span class="op" id="6186746">+</span><span class="num" id="6186747">1</span><span class="op" id="6186748">)</span><span class="op" id="6186749">*</span><span class="num" id="6186750">2</span><span class="op" id="6186751">*</span><span class="ident" id="6186752">t</span><span class="op" id="6186753">.</span><span class="ident" id="6186754">ptrsize</span><span class="op" id="6186761">:</span><span class="op" id="6186762">]</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186767">nf</span>&nbsp;<span class="op" id="6186770">-=</span>&nbsp;<span class="ident" id="6186773">m</span>&nbsp;<span class="op" id="6186775">+</span>&nbsp;<span class="num" id="6186777">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6186781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6186784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6186787">return</span>&nbsp;<span class="ident" id="6186794">nil</span><br>
<span class="lineno"></span><span class="op" id="6186798">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="6186801">//&nbsp;readvarint&nbsp;reads,&nbsp;removes,&nbsp;and&nbsp;returns&nbsp;a&nbsp;varint&nbsp;from&nbsp;*pp.</span><br>
<span class="lineno"></span><span class="keyword" id="6186862">func</span>&nbsp;<span class="op" id="6186867">(</span><span class="ident" id="6186868">t</span>&nbsp;<span class="op" id="6186870">*</span><span class="ident" id="6186871">LineTable</span><span class="op" id="6186880">)</span>&nbsp;<span class="ident" id="6186882">readvarint</span><span class="op" id="6186892">(</span><span class="ident" id="6186893">pp</span>&nbsp;<span class="op" id="6186896">*</span><span class="op" id="6186897">[</span><span class="op" id="6186898">]</span><span class="builtintype" id="6186899">byte</span><span class="op" id="6186903">)</span>&nbsp;<span class="builtintype" id="6186905">uint32</span>&nbsp;<span class="op" id="6186912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6186915">var</span>&nbsp;<span class="ident" id="6186919">v</span><span class="op" id="6186920">,</span>&nbsp;<span class="ident" id="6186922">shift</span>&nbsp;<span class="builtintype" id="6186928">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186936">p</span>&nbsp;<span class="op" id="6186938">:=</span>&nbsp;<span class="op" id="6186941">*</span><span class="ident" id="6186942">pp</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6186946">for</span>&nbsp;<span class="ident" id="6186950">shift</span>&nbsp;<span class="op" id="6186956">=</span>&nbsp;<span class="num" id="6186958">0</span><span class="op" id="6186959">;</span>&nbsp;<span class="op" id="6186961">;</span>&nbsp;<span class="ident" id="6186963">shift</span>&nbsp;<span class="op" id="6186969">+=</span>&nbsp;<span class="num" id="6186972">7</span>&nbsp;<span class="op" id="6186974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186978">b</span>&nbsp;<span class="op" id="6186980">:=</span>&nbsp;<span class="ident" id="6186983">p</span><span class="op" id="6186984">[</span><span class="num" id="6186985">0</span><span class="op" id="6186986">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186990">p</span>&nbsp;<span class="op" id="6186992">=</span>&nbsp;<span class="ident" id="6186994">p</span><span class="op" id="6186995">[</span><span class="num" id="6186996">1</span><span class="op" id="6186997">:</span><span class="op" id="6186998">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187002">v</span>&nbsp;<span class="op" id="6187004">|=</span>&nbsp;<span class="op" id="6187007">(</span><span class="builtintype" id="6187008">uint32</span><span class="op" id="6187014">(</span><span class="ident" id="6187015">b</span><span class="op" id="6187016">)</span>&nbsp;<span class="op" id="6187018">&amp;</span>&nbsp;<span class="num" id="6187020">0x7F</span><span class="op" id="6187024">)</span>&nbsp;<span class="op" id="6187026">&lt;&lt;</span>&nbsp;<span class="ident" id="6187029">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187037">if</span>&nbsp;<span class="ident" id="6187040">b</span><span class="op" id="6187041">&amp;</span><span class="num" id="6187042">0x80</span>&nbsp;<span class="op" id="6187047">==</span>&nbsp;<span class="num" id="6187050">0</span>&nbsp;<span class="op" id="6187052">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187057">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187071">*</span><span class="ident" id="6187072">pp</span>&nbsp;<span class="op" id="6187075">=</span>&nbsp;<span class="ident" id="6187077">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187080">return</span>&nbsp;<span class="ident" id="6187087">v</span><br>
<span class="lineno">265</span><span class="op" id="6187089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6187092">//&nbsp;string&nbsp;returns&nbsp;a&nbsp;Go&nbsp;string&nbsp;found&nbsp;at&nbsp;off.</span><br>
<span class="lineno"></span><span class="keyword" id="6187136">func</span>&nbsp;<span class="op" id="6187141">(</span><span class="ident" id="6187142">t</span>&nbsp;<span class="op" id="6187144">*</span><span class="ident" id="6187145">LineTable</span><span class="op" id="6187154">)</span>&nbsp;<span class="builtintype" id="6187156">string</span><span class="op" id="6187162">(</span><span class="ident" id="6187163">off</span>&nbsp;<span class="builtintype" id="6187167">uint32</span><span class="op" id="6187173">)</span>&nbsp;<span class="builtintype" id="6187175">string</span>&nbsp;<span class="op" id="6187182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187185">for</span>&nbsp;<span class="ident" id="6187189">i</span>&nbsp;<span class="op" id="6187191">:=</span>&nbsp;<span class="ident" id="6187194">off</span><span class="op" id="6187197">;</span>&nbsp;<span class="op" id="6187199">;</span>&nbsp;<span class="ident" id="6187201">i</span><span class="op" id="6187202">++</span>&nbsp;<span class="op" id="6187205">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187209">if</span>&nbsp;<span class="ident" id="6187212">t</span><span class="op" id="6187213">.</span><span class="ident" id="6187214">Data</span><span class="op" id="6187218">[</span><span class="ident" id="6187219">i</span><span class="op" id="6187220">]</span>&nbsp;<span class="op" id="6187222">==</span>&nbsp;<span class="num" id="6187225">0</span>&nbsp;<span class="op" id="6187227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187232">return</span>&nbsp;<span class="builtintype" id="6187239">string</span><span class="op" id="6187245">(</span><span class="ident" id="6187246">t</span><span class="op" id="6187247">.</span><span class="ident" id="6187248">Data</span><span class="op" id="6187252">[</span><span class="ident" id="6187253">off</span><span class="op" id="6187256">:</span><span class="ident" id="6187257">i</span><span class="op" id="6187258">]</span><span class="op" id="6187259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187266">}</span><br>
<span class="lineno"></span><span class="op" id="6187268">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="6187271">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6187337">func</span>&nbsp;<span class="op" id="6187342">(</span><span class="ident" id="6187343">t</span>&nbsp;<span class="op" id="6187345">*</span><span class="ident" id="6187346">LineTable</span><span class="op" id="6187355">)</span>&nbsp;<span class="ident" id="6187357">step</span><span class="op" id="6187361">(</span><span class="ident" id="6187362">p</span>&nbsp;<span class="op" id="6187364">*</span><span class="op" id="6187365">[</span><span class="op" id="6187366">]</span><span class="builtintype" id="6187367">byte</span><span class="op" id="6187371">,</span>&nbsp;<span class="ident" id="6187373">pc</span>&nbsp;<span class="op" id="6187376">*</span><span class="ident" id="6187377">uint64</span><span class="op" id="6187383">,</span>&nbsp;<span class="ident" id="6187385">val</span>&nbsp;<span class="op" id="6187389">*</span><span class="builtintype" id="6187390">int32</span><span class="op" id="6187395">,</span>&nbsp;<span class="ident" id="6187397">first</span>&nbsp;<span class="builtintype" id="6187403">bool</span><span class="op" id="6187407">)</span>&nbsp;<span class="builtintype" id="6187409">bool</span>&nbsp;<span class="op" id="6187414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187417">uvdelta</span>&nbsp;<span class="op" id="6187425">:=</span>&nbsp;<span class="ident" id="6187428">t</span><span class="op" id="6187429">.</span><span class="ident" id="6187430">readvarint</span><span class="op" id="6187440">(</span><span class="ident" id="6187441">p</span><span class="op" id="6187442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187445">if</span>&nbsp;<span class="ident" id="6187448">uvdelta</span>&nbsp;<span class="op" id="6187456">==</span>&nbsp;<span class="num" id="6187459">0</span>&nbsp;<span class="op" id="6187461">&amp;&amp;</span>&nbsp;<span class="op" id="6187464">!</span><span class="ident" id="6187465">first</span>&nbsp;<span class="op" id="6187471">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187475">return</span>&nbsp;<span class="builtintype" id="6187482">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187492">if</span>&nbsp;<span class="ident" id="6187495">uvdelta</span><span class="op" id="6187502">&amp;</span><span class="num" id="6187503">1</span>&nbsp;<span class="op" id="6187505">!=</span>&nbsp;<span class="num" id="6187508">0</span>&nbsp;<span class="op" id="6187510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187514">uvdelta</span>&nbsp;<span class="op" id="6187522">=</span>&nbsp;<span class="op" id="6187524">^</span><span class="op" id="6187525">(</span><span class="ident" id="6187526">uvdelta</span>&nbsp;<span class="op" id="6187534">&gt;&gt;</span>&nbsp;<span class="num" id="6187537">1</span><span class="op" id="6187538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187541">}</span>&nbsp;<span class="keyword" id="6187543">else</span>&nbsp;<span class="op" id="6187548">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187552">uvdelta</span>&nbsp;<span class="op" id="6187560">&gt;&gt;=</span>&nbsp;<span class="num" id="6187564">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187570">vdelta</span>&nbsp;<span class="op" id="6187577">:=</span>&nbsp;<span class="builtintype" id="6187580">int32</span><span class="op" id="6187585">(</span><span class="ident" id="6187586">uvdelta</span><span class="op" id="6187593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187596">pcdelta</span>&nbsp;<span class="op" id="6187604">:=</span>&nbsp;<span class="ident" id="6187607">t</span><span class="op" id="6187608">.</span><span class="ident" id="6187609">readvarint</span><span class="op" id="6187619">(</span><span class="ident" id="6187620">p</span><span class="op" id="6187621">)</span>&nbsp;<span class="op" id="6187623">*</span>&nbsp;<span class="ident" id="6187625">t</span><span class="op" id="6187626">.</span><span class="ident" id="6187627">quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187636">*</span><span class="ident" id="6187637">pc</span>&nbsp;<span class="op" id="6187640">+=</span>&nbsp;<span class="ident" id="6187643">uint64</span><span class="op" id="6187649">(</span><span class="ident" id="6187650">pcdelta</span><span class="op" id="6187657">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187660">*</span><span class="ident" id="6187661">val</span>&nbsp;<span class="op" id="6187665">+=</span>&nbsp;<span class="ident" id="6187668">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187676">return</span>&nbsp;<span class="builtintype" id="6187683">true</span><br>
<span class="lineno"></span><span class="op" id="6187688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6187691">//&nbsp;pcvalue&nbsp;reports&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;target&nbsp;pc.</span><br>
<span class="lineno">295</span><span class="comment" id="6187751">//&nbsp;off&nbsp;is&nbsp;the&nbsp;offset&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;pc-value&nbsp;table,</span><br>
<span class="lineno"></span><span class="comment" id="6187812">//&nbsp;and&nbsp;entry&nbsp;is&nbsp;the&nbsp;start&nbsp;PC&nbsp;for&nbsp;the&nbsp;corresponding&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="6187873">func</span>&nbsp;<span class="op" id="6187878">(</span><span class="ident" id="6187879">t</span>&nbsp;<span class="op" id="6187881">*</span><span class="ident" id="6187882">LineTable</span><span class="op" id="6187891">)</span>&nbsp;<span class="ident" id="6187893">pcvalue</span><span class="op" id="6187900">(</span><span class="ident" id="6187901">off</span>&nbsp;<span class="builtintype" id="6187905">uint32</span><span class="op" id="6187911">,</span>&nbsp;<span class="ident" id="6187913">entry</span><span class="op" id="6187918">,</span>&nbsp;<span class="ident" id="6187920">targetpc</span>&nbsp;<span class="ident" id="6187929">uint64</span><span class="op" id="6187935">)</span>&nbsp;<span class="builtintype" id="6187937">int32</span>&nbsp;<span class="op" id="6187943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187946">if</span>&nbsp;<span class="ident" id="6187949">off</span>&nbsp;<span class="op" id="6187953">==</span>&nbsp;<span class="num" id="6187956">0</span>&nbsp;<span class="op" id="6187958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187962">return</span>&nbsp;<span class="op" id="6187969">-</span><span class="num" id="6187970">1</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187976">p</span>&nbsp;<span class="op" id="6187978">:=</span>&nbsp;<span class="ident" id="6187981">t</span><span class="op" id="6187982">.</span><span class="ident" id="6187983">Data</span><span class="op" id="6187987">[</span><span class="ident" id="6187988">off</span><span class="op" id="6187991">:</span><span class="op" id="6187992">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187996">val</span>&nbsp;<span class="op" id="6188000">:=</span>&nbsp;<span class="builtintype" id="6188003">int32</span><span class="op" id="6188008">(</span><span class="op" id="6188009">-</span><span class="num" id="6188010">1</span><span class="op" id="6188011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188014">pc</span>&nbsp;<span class="op" id="6188017">:=</span>&nbsp;<span class="ident" id="6188020">entry</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188027">for</span>&nbsp;<span class="ident" id="6188031">t</span><span class="op" id="6188032">.</span><span class="ident" id="6188033">step</span><span class="op" id="6188037">(</span><span class="op" id="6188038">&amp;</span><span class="ident" id="6188039">p</span><span class="op" id="6188040">,</span>&nbsp;<span class="op" id="6188042">&amp;</span><span class="ident" id="6188043">pc</span><span class="op" id="6188045">,</span>&nbsp;<span class="op" id="6188047">&amp;</span><span class="ident" id="6188048">val</span><span class="op" id="6188051">,</span>&nbsp;<span class="ident" id="6188053">pc</span>&nbsp;<span class="op" id="6188056">==</span>&nbsp;<span class="ident" id="6188059">entry</span><span class="op" id="6188064">)</span>&nbsp;<span class="op" id="6188066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188070">if</span>&nbsp;<span class="ident" id="6188073">targetpc</span>&nbsp;<span class="op" id="6188082">&lt;</span>&nbsp;<span class="ident" id="6188084">pc</span>&nbsp;<span class="op" id="6188087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188092">return</span>&nbsp;<span class="ident" id="6188099">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6188105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6188108">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188111">return</span>&nbsp;<span class="op" id="6188118">-</span><span class="num" id="6188119">1</span><br>
<span class="lineno"></span><span class="op" id="6188121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6188124">//&nbsp;findFileLine&nbsp;scans&nbsp;one&nbsp;function&nbsp;in&nbsp;the&nbsp;binary&nbsp;looking&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6188187">//&nbsp;program&nbsp;counter&nbsp;in&nbsp;the&nbsp;given&nbsp;file&nbsp;on&nbsp;the&nbsp;given&nbsp;line.</span><br>
<span class="lineno">315</span><span class="comment" id="6188243">//&nbsp;It&nbsp;does&nbsp;so&nbsp;by&nbsp;running&nbsp;the&nbsp;pc-value&nbsp;tables&nbsp;mapping&nbsp;program&nbsp;counter</span><br>
<span class="lineno"></span><span class="comment" id="6188312">//&nbsp;to&nbsp;file&nbsp;number.&nbsp;Since&nbsp;most&nbsp;functions&nbsp;come&nbsp;from&nbsp;a&nbsp;single&nbsp;file,&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="6188383">//&nbsp;are&nbsp;usually&nbsp;short&nbsp;and&nbsp;quick&nbsp;to&nbsp;scan.&nbsp;If&nbsp;a&nbsp;file&nbsp;match&nbsp;is&nbsp;found,&nbsp;then&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6188458">//&nbsp;code&nbsp;goes&nbsp;to&nbsp;the&nbsp;expense&nbsp;of&nbsp;looking&nbsp;for&nbsp;a&nbsp;simultaneous&nbsp;line&nbsp;number&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="6188535">func</span>&nbsp;<span class="op" id="6188540">(</span><span class="ident" id="6188541">t</span>&nbsp;<span class="op" id="6188543">*</span><span class="ident" id="6188544">LineTable</span><span class="op" id="6188553">)</span>&nbsp;<span class="ident" id="6188555">findFileLine</span><span class="op" id="6188567">(</span><span class="ident" id="6188568">entry</span>&nbsp;<span class="ident" id="6188574">uint64</span><span class="op" id="6188580">,</span>&nbsp;<span class="ident" id="6188582">filetab</span><span class="op" id="6188589">,</span>&nbsp;<span class="ident" id="6188591">linetab</span>&nbsp;<span class="builtintype" id="6188599">uint32</span><span class="op" id="6188605">,</span>&nbsp;<span class="ident" id="6188607">filenum</span><span class="op" id="6188614">,</span>&nbsp;<span class="ident" id="6188616">line</span>&nbsp;<span class="builtintype" id="6188621">int32</span><span class="op" id="6188626">)</span>&nbsp;<span class="ident" id="6188628">uint64</span>&nbsp;<span class="op" id="6188635">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188638">if</span>&nbsp;<span class="ident" id="6188641">filetab</span>&nbsp;<span class="op" id="6188649">==</span>&nbsp;<span class="num" id="6188652">0</span>&nbsp;<span class="op" id="6188654">||</span>&nbsp;<span class="ident" id="6188657">linetab</span>&nbsp;<span class="op" id="6188665">==</span>&nbsp;<span class="num" id="6188668">0</span>&nbsp;<span class="op" id="6188670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188674">return</span>&nbsp;<span class="num" id="6188681">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6188684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188688">fp</span>&nbsp;<span class="op" id="6188691">:=</span>&nbsp;<span class="ident" id="6188694">t</span><span class="op" id="6188695">.</span><span class="ident" id="6188696">Data</span><span class="op" id="6188700">[</span><span class="ident" id="6188701">filetab</span><span class="op" id="6188708">:</span><span class="op" id="6188709">]</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188712">fl</span>&nbsp;<span class="op" id="6188715">:=</span>&nbsp;<span class="ident" id="6188718">t</span><span class="op" id="6188719">.</span><span class="ident" id="6188720">Data</span><span class="op" id="6188724">[</span><span class="ident" id="6188725">linetab</span><span class="op" id="6188732">:</span><span class="op" id="6188733">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188736">fileVal</span>&nbsp;<span class="op" id="6188744">:=</span>&nbsp;<span class="builtintype" id="6188747">int32</span><span class="op" id="6188752">(</span><span class="op" id="6188753">-</span><span class="num" id="6188754">1</span><span class="op" id="6188755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188758">filePC</span>&nbsp;<span class="op" id="6188765">:=</span>&nbsp;<span class="ident" id="6188768">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188775">lineVal</span>&nbsp;<span class="op" id="6188783">:=</span>&nbsp;<span class="builtintype" id="6188786">int32</span><span class="op" id="6188791">(</span><span class="op" id="6188792">-</span><span class="num" id="6188793">1</span><span class="op" id="6188794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188797">linePC</span>&nbsp;<span class="op" id="6188804">:=</span>&nbsp;<span class="ident" id="6188807">entry</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188814">fileStartPC</span>&nbsp;<span class="op" id="6188826">:=</span>&nbsp;<span class="ident" id="6188829">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188837">for</span>&nbsp;<span class="ident" id="6188841">t</span><span class="op" id="6188842">.</span><span class="ident" id="6188843">step</span><span class="op" id="6188847">(</span><span class="op" id="6188848">&amp;</span><span class="ident" id="6188849">fp</span><span class="op" id="6188851">,</span>&nbsp;<span class="op" id="6188853">&amp;</span><span class="ident" id="6188854">filePC</span><span class="op" id="6188860">,</span>&nbsp;<span class="op" id="6188862">&amp;</span><span class="ident" id="6188863">fileVal</span><span class="op" id="6188870">,</span>&nbsp;<span class="ident" id="6188872">filePC</span>&nbsp;<span class="op" id="6188879">==</span>&nbsp;<span class="ident" id="6188882">entry</span><span class="op" id="6188887">)</span>&nbsp;<span class="op" id="6188889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188893">if</span>&nbsp;<span class="ident" id="6188896">fileVal</span>&nbsp;<span class="op" id="6188904">==</span>&nbsp;<span class="ident" id="6188907">filenum</span>&nbsp;<span class="op" id="6188915">&amp;&amp;</span>&nbsp;<span class="ident" id="6188918">fileStartPC</span>&nbsp;<span class="op" id="6188930">&lt;</span>&nbsp;<span class="ident" id="6188932">filePC</span>&nbsp;<span class="op" id="6188939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6188944">//&nbsp;fileVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;starting&nbsp;at&nbsp;fileStartPC&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189001">//&nbsp;but&nbsp;not&nbsp;including&nbsp;filePC,&nbsp;and&nbsp;it&#39;s&nbsp;the&nbsp;file&nbsp;we&nbsp;want.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189060">//&nbsp;Run&nbsp;the&nbsp;PC&nbsp;table&nbsp;looking&nbsp;for&nbsp;a&nbsp;matching&nbsp;line&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189118">//&nbsp;or&nbsp;until&nbsp;we&nbsp;reach&nbsp;filePC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189150">lineStartPC</span>&nbsp;<span class="op" id="6189162">:=</span>&nbsp;<span class="ident" id="6189165">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189175">for</span>&nbsp;<span class="ident" id="6189179">linePC</span>&nbsp;<span class="op" id="6189186">&lt;</span>&nbsp;<span class="ident" id="6189188">filePC</span>&nbsp;<span class="op" id="6189195">&amp;&amp;</span>&nbsp;<span class="ident" id="6189198">t</span><span class="op" id="6189199">.</span><span class="ident" id="6189200">step</span><span class="op" id="6189204">(</span><span class="op" id="6189205">&amp;</span><span class="ident" id="6189206">fl</span><span class="op" id="6189208">,</span>&nbsp;<span class="op" id="6189210">&amp;</span><span class="ident" id="6189211">linePC</span><span class="op" id="6189217">,</span>&nbsp;<span class="op" id="6189219">&amp;</span><span class="ident" id="6189220">lineVal</span><span class="op" id="6189227">,</span>&nbsp;<span class="ident" id="6189229">linePC</span>&nbsp;<span class="op" id="6189236">==</span>&nbsp;<span class="ident" id="6189239">entry</span><span class="op" id="6189244">)</span>&nbsp;<span class="op" id="6189246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189252">//&nbsp;lineVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;until&nbsp;linePC,&nbsp;and&nbsp;lineStartPC&nbsp;&lt;&nbsp;filePC.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189320">if</span>&nbsp;<span class="ident" id="6189323">lineVal</span>&nbsp;<span class="op" id="6189331">==</span>&nbsp;<span class="ident" id="6189334">line</span>&nbsp;<span class="op" id="6189339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189346">if</span>&nbsp;<span class="ident" id="6189349">fileStartPC</span>&nbsp;<span class="op" id="6189361">&lt;=</span>&nbsp;<span class="ident" id="6189364">lineStartPC</span>&nbsp;<span class="op" id="6189376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189384">return</span>&nbsp;<span class="ident" id="6189391">lineStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189415">if</span>&nbsp;<span class="ident" id="6189418">fileStartPC</span>&nbsp;<span class="op" id="6189430">&lt;</span>&nbsp;<span class="ident" id="6189432">linePC</span>&nbsp;<span class="op" id="6189439">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189447">return</span>&nbsp;<span class="ident" id="6189454">fileStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189483">lineStartPC</span>&nbsp;<span class="op" id="6189495">=</span>&nbsp;<span class="ident" id="6189497">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189507">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189515">fileStartPC</span>&nbsp;<span class="op" id="6189527">=</span>&nbsp;<span class="ident" id="6189529">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189540">return</span>&nbsp;<span class="num" id="6189547">0</span><br>
<span class="lineno"></span><span class="op" id="6189549">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="6189552">//&nbsp;go12PCToLine&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6189631">func</span>&nbsp;<span class="op" id="6189636">(</span><span class="ident" id="6189637">t</span>&nbsp;<span class="op" id="6189639">*</span><span class="ident" id="6189640">LineTable</span><span class="op" id="6189649">)</span>&nbsp;<span class="ident" id="6189651">go12PCToLine</span><span class="op" id="6189663">(</span><span class="ident" id="6189664">pc</span>&nbsp;<span class="ident" id="6189667">uint64</span><span class="op" id="6189673">)</span>&nbsp;<span class="op" id="6189675">(</span><span class="ident" id="6189676">line</span>&nbsp;<span class="builtintype" id="6189681">int</span><span class="op" id="6189684">)</span>&nbsp;<span class="op" id="6189686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189689">defer</span>&nbsp;<span class="keyword" id="6189695">func</span><span class="op" id="6189699">(</span><span class="op" id="6189700">)</span>&nbsp;<span class="op" id="6189702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189706">if</span>&nbsp;<span class="builtinfunc" id="6189709">recover</span><span class="op" id="6189716">(</span><span class="op" id="6189717">)</span>&nbsp;<span class="op" id="6189719">!=</span>&nbsp;<span class="ident" id="6189722">nil</span>&nbsp;<span class="op" id="6189726">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189731">line</span>&nbsp;<span class="op" id="6189736">=</span>&nbsp;<span class="op" id="6189738">-</span><span class="num" id="6189739">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189746">}</span><span class="op" id="6189747">(</span><span class="op" id="6189748">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189752">f</span>&nbsp;<span class="op" id="6189754">:=</span>&nbsp;<span class="ident" id="6189757">t</span><span class="op" id="6189758">.</span><span class="ident" id="6189759">findFunc</span><span class="op" id="6189767">(</span><span class="ident" id="6189768">pc</span><span class="op" id="6189770">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189773">if</span>&nbsp;<span class="ident" id="6189776">f</span>&nbsp;<span class="op" id="6189778">==</span>&nbsp;<span class="ident" id="6189781">nil</span>&nbsp;<span class="op" id="6189785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189789">return</span>&nbsp;<span class="op" id="6189796">-</span><span class="num" id="6189797">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189803">entry</span>&nbsp;<span class="op" id="6189809">:=</span>&nbsp;<span class="ident" id="6189812">t</span><span class="op" id="6189813">.</span><span class="builtintype" id="6189814">uintptr</span><span class="op" id="6189821">(</span><span class="ident" id="6189822">f</span><span class="op" id="6189823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189826">linetab</span>&nbsp;<span class="op" id="6189834">:=</span>&nbsp;<span class="ident" id="6189837">t</span><span class="op" id="6189838">.</span><span class="ident" id="6189839">binary</span><span class="op" id="6189845">.</span><span class="ident" id="6189846">Uint32</span><span class="op" id="6189852">(</span><span class="ident" id="6189853">f</span><span class="op" id="6189854">[</span><span class="ident" id="6189855">t</span><span class="op" id="6189856">.</span><span class="ident" id="6189857">ptrsize</span><span class="op" id="6189864">+</span><span class="num" id="6189865">5</span><span class="op" id="6189866">*</span><span class="num" id="6189867">4</span><span class="op" id="6189868">:</span><span class="op" id="6189869">]</span><span class="op" id="6189870">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189873">return</span>&nbsp;<span class="builtintype" id="6189880">int</span><span class="op" id="6189883">(</span><span class="ident" id="6189884">t</span><span class="op" id="6189885">.</span><span class="ident" id="6189886">pcvalue</span><span class="op" id="6189893">(</span><span class="ident" id="6189894">linetab</span><span class="op" id="6189901">,</span>&nbsp;<span class="ident" id="6189903">entry</span><span class="op" id="6189908">,</span>&nbsp;<span class="ident" id="6189910">pc</span><span class="op" id="6189912">)</span><span class="op" id="6189913">)</span><br>
<span class="lineno"></span><span class="op" id="6189915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6189918">//&nbsp;go12PCToFile&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;file&nbsp;name&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6189995">func</span>&nbsp;<span class="op" id="6190000">(</span><span class="ident" id="6190001">t</span>&nbsp;<span class="op" id="6190003">*</span><span class="ident" id="6190004">LineTable</span><span class="op" id="6190013">)</span>&nbsp;<span class="ident" id="6190015">go12PCToFile</span><span class="op" id="6190027">(</span><span class="ident" id="6190028">pc</span>&nbsp;<span class="ident" id="6190031">uint64</span><span class="op" id="6190037">)</span>&nbsp;<span class="op" id="6190039">(</span><span class="ident" id="6190040">file</span>&nbsp;<span class="builtintype" id="6190045">string</span><span class="op" id="6190051">)</span>&nbsp;<span class="op" id="6190053">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190056">defer</span>&nbsp;<span class="keyword" id="6190062">func</span><span class="op" id="6190066">(</span><span class="op" id="6190067">)</span>&nbsp;<span class="op" id="6190069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190073">if</span>&nbsp;<span class="builtinfunc" id="6190076">recover</span><span class="op" id="6190083">(</span><span class="op" id="6190084">)</span>&nbsp;<span class="op" id="6190086">!=</span>&nbsp;<span class="ident" id="6190089">nil</span>&nbsp;<span class="op" id="6190093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190098">file</span>&nbsp;<span class="op" id="6190103">=</span>&nbsp;<span class="string" id="6190105">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190113">}</span><span class="op" id="6190114">(</span><span class="op" id="6190115">)</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190119">f</span>&nbsp;<span class="op" id="6190121">:=</span>&nbsp;<span class="ident" id="6190124">t</span><span class="op" id="6190125">.</span><span class="ident" id="6190126">findFunc</span><span class="op" id="6190134">(</span><span class="ident" id="6190135">pc</span><span class="op" id="6190137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190140">if</span>&nbsp;<span class="ident" id="6190143">f</span>&nbsp;<span class="op" id="6190145">==</span>&nbsp;<span class="ident" id="6190148">nil</span>&nbsp;<span class="op" id="6190152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190156">return</span>&nbsp;<span class="string" id="6190163">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190167">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190170">entry</span>&nbsp;<span class="op" id="6190176">:=</span>&nbsp;<span class="ident" id="6190179">t</span><span class="op" id="6190180">.</span><span class="builtintype" id="6190181">uintptr</span><span class="op" id="6190188">(</span><span class="ident" id="6190189">f</span><span class="op" id="6190190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190193">filetab</span>&nbsp;<span class="op" id="6190201">:=</span>&nbsp;<span class="ident" id="6190204">t</span><span class="op" id="6190205">.</span><span class="ident" id="6190206">binary</span><span class="op" id="6190212">.</span><span class="ident" id="6190213">Uint32</span><span class="op" id="6190219">(</span><span class="ident" id="6190220">f</span><span class="op" id="6190221">[</span><span class="ident" id="6190222">t</span><span class="op" id="6190223">.</span><span class="ident" id="6190224">ptrsize</span><span class="op" id="6190231">+</span><span class="num" id="6190232">4</span><span class="op" id="6190233">*</span><span class="num" id="6190234">4</span><span class="op" id="6190235">:</span><span class="op" id="6190236">]</span><span class="op" id="6190237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190240">fno</span>&nbsp;<span class="op" id="6190244">:=</span>&nbsp;<span class="ident" id="6190247">t</span><span class="op" id="6190248">.</span><span class="ident" id="6190249">pcvalue</span><span class="op" id="6190256">(</span><span class="ident" id="6190257">filetab</span><span class="op" id="6190264">,</span>&nbsp;<span class="ident" id="6190266">entry</span><span class="op" id="6190271">,</span>&nbsp;<span class="ident" id="6190273">pc</span><span class="op" id="6190275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190278">if</span>&nbsp;<span class="ident" id="6190281">fno</span>&nbsp;<span class="op" id="6190285">&lt;=</span>&nbsp;<span class="num" id="6190288">0</span>&nbsp;<span class="op" id="6190290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190294">return</span>&nbsp;<span class="string" id="6190301">&#34;&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190308">return</span>&nbsp;<span class="ident" id="6190315">t</span><span class="op" id="6190316">.</span><span class="builtintype" id="6190317">string</span><span class="op" id="6190323">(</span><span class="ident" id="6190324">t</span><span class="op" id="6190325">.</span><span class="ident" id="6190326">binary</span><span class="op" id="6190332">.</span><span class="ident" id="6190333">Uint32</span><span class="op" id="6190339">(</span><span class="ident" id="6190340">t</span><span class="op" id="6190341">.</span><span class="ident" id="6190342">filetab</span><span class="op" id="6190349">[</span><span class="num" id="6190350">4</span><span class="op" id="6190351">*</span><span class="ident" id="6190352">fno</span><span class="op" id="6190355">:</span><span class="op" id="6190356">]</span><span class="op" id="6190357">)</span><span class="op" id="6190358">)</span><br>
<span class="lineno"></span><span class="op" id="6190360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6190363">//&nbsp;go12LineToPC&nbsp;maps&nbsp;a&nbsp;(file,&nbsp;line)&nbsp;pair&nbsp;to&nbsp;a&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">395</span><span class="keyword" id="6190452">func</span>&nbsp;<span class="op" id="6190457">(</span><span class="ident" id="6190458">t</span>&nbsp;<span class="op" id="6190460">*</span><span class="ident" id="6190461">LineTable</span><span class="op" id="6190470">)</span>&nbsp;<span class="ident" id="6190472">go12LineToPC</span><span class="op" id="6190484">(</span><span class="ident" id="6190485">file</span>&nbsp;<span class="builtintype" id="6190490">string</span><span class="op" id="6190496">,</span>&nbsp;<span class="ident" id="6190498">line</span>&nbsp;<span class="builtintype" id="6190503">int</span><span class="op" id="6190506">)</span>&nbsp;<span class="op" id="6190508">(</span><span class="ident" id="6190509">pc</span>&nbsp;<span class="ident" id="6190512">uint64</span><span class="op" id="6190518">)</span>&nbsp;<span class="op" id="6190520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190523">defer</span>&nbsp;<span class="keyword" id="6190529">func</span><span class="op" id="6190533">(</span><span class="op" id="6190534">)</span>&nbsp;<span class="op" id="6190536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190540">if</span>&nbsp;<span class="builtinfunc" id="6190543">recover</span><span class="op" id="6190550">(</span><span class="op" id="6190551">)</span>&nbsp;<span class="op" id="6190553">!=</span>&nbsp;<span class="ident" id="6190556">nil</span>&nbsp;<span class="op" id="6190560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190565">pc</span>&nbsp;<span class="op" id="6190568">=</span>&nbsp;<span class="num" id="6190570">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190574">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190577">}</span><span class="op" id="6190578">(</span><span class="op" id="6190579">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190583">t</span><span class="op" id="6190584">.</span><span class="ident" id="6190585">initFileMap</span><span class="op" id="6190596">(</span><span class="op" id="6190597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190600">filenum</span>&nbsp;<span class="op" id="6190608">:=</span>&nbsp;<span class="ident" id="6190611">t</span><span class="op" id="6190612">.</span><span class="ident" id="6190613">fileMap</span><span class="op" id="6190620">[</span><span class="ident" id="6190621">file</span><span class="op" id="6190625">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190628">if</span>&nbsp;<span class="ident" id="6190631">filenum</span>&nbsp;<span class="op" id="6190639">==</span>&nbsp;<span class="num" id="6190642">0</span>&nbsp;<span class="op" id="6190644">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190648">return</span>&nbsp;<span class="num" id="6190655">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6190662">//&nbsp;Scan&nbsp;all&nbsp;functions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6190686">//&nbsp;If&nbsp;this&nbsp;turns&nbsp;out&nbsp;to&nbsp;be&nbsp;a&nbsp;bottleneck,&nbsp;we&nbsp;could&nbsp;build&nbsp;a&nbsp;map[int32][]int32</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6190763">//&nbsp;mapping&nbsp;file&nbsp;number&nbsp;to&nbsp;a&nbsp;list&nbsp;of&nbsp;functions&nbsp;with&nbsp;code&nbsp;from&nbsp;that&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190836">for</span>&nbsp;<span class="ident" id="6190840">i</span>&nbsp;<span class="op" id="6190842">:=</span>&nbsp;<span class="builtintype" id="6190845">uint32</span><span class="op" id="6190851">(</span><span class="num" id="6190852">0</span><span class="op" id="6190853">)</span><span class="op" id="6190854">;</span>&nbsp;<span class="ident" id="6190856">i</span>&nbsp;<span class="op" id="6190858">&lt;</span>&nbsp;<span class="ident" id="6190860">t</span><span class="op" id="6190861">.</span><span class="ident" id="6190862">nfunctab</span><span class="op" id="6190870">;</span>&nbsp;<span class="ident" id="6190872">i</span><span class="op" id="6190873">++</span>&nbsp;<span class="op" id="6190876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190880">f</span>&nbsp;<span class="op" id="6190882">:=</span>&nbsp;<span class="ident" id="6190885">t</span><span class="op" id="6190886">.</span><span class="ident" id="6190887">Data</span><span class="op" id="6190891">[</span><span class="ident" id="6190892">t</span><span class="op" id="6190893">.</span><span class="builtintype" id="6190894">uintptr</span><span class="op" id="6190901">(</span><span class="ident" id="6190902">t</span><span class="op" id="6190903">.</span><span class="ident" id="6190904">functab</span><span class="op" id="6190911">[</span><span class="num" id="6190912">2</span><span class="op" id="6190913">*</span><span class="ident" id="6190914">t</span><span class="op" id="6190915">.</span><span class="ident" id="6190916">ptrsize</span><span class="op" id="6190923">*</span><span class="ident" id="6190924">i</span><span class="op" id="6190925">+</span><span class="ident" id="6190926">t</span><span class="op" id="6190927">.</span><span class="ident" id="6190928">ptrsize</span><span class="op" id="6190935">:</span><span class="op" id="6190936">]</span><span class="op" id="6190937">)</span><span class="op" id="6190938">:</span><span class="op" id="6190939">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190943">entry</span>&nbsp;<span class="op" id="6190949">:=</span>&nbsp;<span class="ident" id="6190952">t</span><span class="op" id="6190953">.</span><span class="builtintype" id="6190954">uintptr</span><span class="op" id="6190961">(</span><span class="ident" id="6190962">f</span><span class="op" id="6190963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190967">filetab</span>&nbsp;<span class="op" id="6190975">:=</span>&nbsp;<span class="ident" id="6190978">t</span><span class="op" id="6190979">.</span><span class="ident" id="6190980">binary</span><span class="op" id="6190986">.</span><span class="ident" id="6190987">Uint32</span><span class="op" id="6190993">(</span><span class="ident" id="6190994">f</span><span class="op" id="6190995">[</span><span class="ident" id="6190996">t</span><span class="op" id="6190997">.</span><span class="ident" id="6190998">ptrsize</span><span class="op" id="6191005">+</span><span class="num" id="6191006">4</span><span class="op" id="6191007">*</span><span class="num" id="6191008">4</span><span class="op" id="6191009">:</span><span class="op" id="6191010">]</span><span class="op" id="6191011">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191015">linetab</span>&nbsp;<span class="op" id="6191023">:=</span>&nbsp;<span class="ident" id="6191026">t</span><span class="op" id="6191027">.</span><span class="ident" id="6191028">binary</span><span class="op" id="6191034">.</span><span class="ident" id="6191035">Uint32</span><span class="op" id="6191041">(</span><span class="ident" id="6191042">f</span><span class="op" id="6191043">[</span><span class="ident" id="6191044">t</span><span class="op" id="6191045">.</span><span class="ident" id="6191046">ptrsize</span><span class="op" id="6191053">+</span><span class="num" id="6191054">5</span><span class="op" id="6191055">*</span><span class="num" id="6191056">4</span><span class="op" id="6191057">:</span><span class="op" id="6191058">]</span><span class="op" id="6191059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191063">pc</span>&nbsp;<span class="op" id="6191066">:=</span>&nbsp;<span class="ident" id="6191069">t</span><span class="op" id="6191070">.</span><span class="ident" id="6191071">findFileLine</span><span class="op" id="6191083">(</span><span class="ident" id="6191084">entry</span><span class="op" id="6191089">,</span>&nbsp;<span class="ident" id="6191091">filetab</span><span class="op" id="6191098">,</span>&nbsp;<span class="ident" id="6191100">linetab</span><span class="op" id="6191107">,</span>&nbsp;<span class="builtintype" id="6191109">int32</span><span class="op" id="6191114">(</span><span class="ident" id="6191115">filenum</span><span class="op" id="6191122">)</span><span class="op" id="6191123">,</span>&nbsp;<span class="builtintype" id="6191125">int32</span><span class="op" id="6191130">(</span><span class="ident" id="6191131">line</span><span class="op" id="6191135">)</span><span class="op" id="6191136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191140">if</span>&nbsp;<span class="ident" id="6191143">pc</span>&nbsp;<span class="op" id="6191146">!=</span>&nbsp;<span class="num" id="6191149">0</span>&nbsp;<span class="op" id="6191151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191156">return</span>&nbsp;<span class="ident" id="6191163">pc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191168">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191174">return</span>&nbsp;<span class="num" id="6191181">0</span><br>
<span class="lineno"></span><span class="op" id="6191183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6191186">//&nbsp;initFileMap&nbsp;initializes&nbsp;the&nbsp;map&nbsp;from&nbsp;file&nbsp;name&nbsp;to&nbsp;file&nbsp;number.</span><br>
<span class="lineno">425</span><span class="keyword" id="6191252">func</span>&nbsp;<span class="op" id="6191257">(</span><span class="ident" id="6191258">t</span>&nbsp;<span class="op" id="6191260">*</span><span class="ident" id="6191261">LineTable</span><span class="op" id="6191270">)</span>&nbsp;<span class="ident" id="6191272">initFileMap</span><span class="op" id="6191283">(</span><span class="op" id="6191284">)</span>&nbsp;<span class="op" id="6191286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191289">t</span><span class="op" id="6191290">.</span><span class="ident" id="6191291">mu</span><span class="op" id="6191293">.</span><span class="ident" id="6191294">Lock</span><span class="op" id="6191298">(</span><span class="op" id="6191299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191302">defer</span>&nbsp;<span class="ident" id="6191308">t</span><span class="op" id="6191309">.</span><span class="ident" id="6191310">mu</span><span class="op" id="6191312">.</span><span class="ident" id="6191313">Unlock</span><span class="op" id="6191319">(</span><span class="op" id="6191320">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191324">if</span>&nbsp;<span class="ident" id="6191327">t</span><span class="op" id="6191328">.</span><span class="ident" id="6191329">fileMap</span>&nbsp;<span class="op" id="6191337">!=</span>&nbsp;<span class="ident" id="6191340">nil</span>&nbsp;<span class="op" id="6191344">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191348">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191359">m</span>&nbsp;<span class="op" id="6191361">:=</span>&nbsp;<span class="builtinfunc" id="6191364">make</span><span class="op" id="6191368">(</span><span class="keyword" id="6191369">map</span><span class="op" id="6191372">[</span><span class="builtintype" id="6191373">string</span><span class="op" id="6191379">]</span><span class="builtintype" id="6191380">uint32</span><span class="op" id="6191386">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191390">for</span>&nbsp;<span class="ident" id="6191394">i</span>&nbsp;<span class="op" id="6191396">:=</span>&nbsp;<span class="builtintype" id="6191399">uint32</span><span class="op" id="6191405">(</span><span class="num" id="6191406">1</span><span class="op" id="6191407">)</span><span class="op" id="6191408">;</span>&nbsp;<span class="ident" id="6191410">i</span>&nbsp;<span class="op" id="6191412">&lt;</span>&nbsp;<span class="ident" id="6191414">t</span><span class="op" id="6191415">.</span><span class="ident" id="6191416">nfiletab</span><span class="op" id="6191424">;</span>&nbsp;<span class="ident" id="6191426">i</span><span class="op" id="6191427">++</span>&nbsp;<span class="op" id="6191430">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191434">s</span>&nbsp;<span class="op" id="6191436">:=</span>&nbsp;<span class="ident" id="6191439">t</span><span class="op" id="6191440">.</span><span class="builtintype" id="6191441">string</span><span class="op" id="6191447">(</span><span class="ident" id="6191448">t</span><span class="op" id="6191449">.</span><span class="ident" id="6191450">binary</span><span class="op" id="6191456">.</span><span class="ident" id="6191457">Uint32</span><span class="op" id="6191463">(</span><span class="ident" id="6191464">t</span><span class="op" id="6191465">.</span><span class="ident" id="6191466">filetab</span><span class="op" id="6191473">[</span><span class="num" id="6191474">4</span><span class="op" id="6191475">*</span><span class="ident" id="6191476">i</span><span class="op" id="6191477">:</span><span class="op" id="6191478">]</span><span class="op" id="6191479">)</span><span class="op" id="6191480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191484">m</span><span class="op" id="6191485">[</span><span class="ident" id="6191486">s</span><span class="op" id="6191487">]</span>&nbsp;<span class="op" id="6191489">=</span>&nbsp;<span class="ident" id="6191491">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191497">t</span><span class="op" id="6191498">.</span><span class="ident" id="6191499">fileMap</span>&nbsp;<span class="op" id="6191507">=</span>&nbsp;<span class="ident" id="6191509">m</span><br>
<span class="lineno"></span><span class="op" id="6191511">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="6191514">//&nbsp;go12MapFiles&nbsp;adds&nbsp;to&nbsp;m&nbsp;a&nbsp;key&nbsp;for&nbsp;every&nbsp;file&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;LineTable.</span><br>
<span class="lineno"></span><span class="comment" id="6191586">//&nbsp;Every&nbsp;key&nbsp;maps&nbsp;to&nbsp;obj.&nbsp;That&#39;s&nbsp;not&nbsp;a&nbsp;very&nbsp;interesting&nbsp;map,&nbsp;but&nbsp;it&nbsp;provides</span><br>
<span class="lineno"></span><span class="comment" id="6191663">//&nbsp;a&nbsp;way&nbsp;for&nbsp;callers&nbsp;to&nbsp;obtain&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;in&nbsp;the&nbsp;program.</span><br>
<span class="lineno"></span><span class="keyword" id="6191728">func</span>&nbsp;<span class="op" id="6191733">(</span><span class="ident" id="6191734">t</span>&nbsp;<span class="op" id="6191736">*</span><span class="ident" id="6191737">LineTable</span><span class="op" id="6191746">)</span>&nbsp;<span class="ident" id="6191748">go12MapFiles</span><span class="op" id="6191760">(</span><span class="ident" id="6191761">m</span>&nbsp;<span class="keyword" id="6191763">map</span><span class="op" id="6191766">[</span><span class="builtintype" id="6191767">string</span><span class="op" id="6191773">]</span><span class="op" id="6191774">*</span><span class="ident" id="6191775">Obj</span><span class="op" id="6191778">,</span>&nbsp;<span class="ident" id="6191780">obj</span>&nbsp;<span class="op" id="6191784">*</span><span class="ident" id="6191785">Obj</span><span class="op" id="6191788">)</span>&nbsp;<span class="op" id="6191790">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191793">defer</span>&nbsp;<span class="keyword" id="6191799">func</span><span class="op" id="6191803">(</span><span class="op" id="6191804">)</span>&nbsp;<span class="op" id="6191806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6191810">recover</span><span class="op" id="6191817">(</span><span class="op" id="6191818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191821">}</span><span class="op" id="6191822">(</span><span class="op" id="6191823">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191827">t</span><span class="op" id="6191828">.</span><span class="ident" id="6191829">initFileMap</span><span class="op" id="6191840">(</span><span class="op" id="6191841">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191844">for</span>&nbsp;<span class="ident" id="6191848">file</span>&nbsp;<span class="op" id="6191853">:=</span>&nbsp;<span class="keyword" id="6191856">range</span>&nbsp;<span class="ident" id="6191862">t</span><span class="op" id="6191863">.</span><span class="ident" id="6191864">fileMap</span>&nbsp;<span class="op" id="6191872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191876">m</span><span class="op" id="6191877">[</span><span class="ident" id="6191878">file</span><span class="op" id="6191882">]</span>&nbsp;<span class="op" id="6191884">=</span>&nbsp;<span class="ident" id="6191886">obj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191891">}</span><br>
<span class="lineno"></span><span class="op" id="6191893">}</span>
</div>
</body>
</html>
