<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3114781">//&nbsp;Created&nbsp;by&nbsp;encgen&nbsp;--output&nbsp;enc_helpers.go;&nbsp;DO&nbsp;NOT&nbsp;EDIT</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3114840">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3114895">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno">5</span><span class="comment" id="3114949">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3115000">package</span>&nbsp;<span class="ident" id="3115008">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3115013">import</span>&nbsp;<span class="op" id="3115020">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3115023">&#34;reflect&#34;</span><br>
<span class="lineno"></span><span class="op" id="3115033">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3115036">var</span>&nbsp;<span class="ident" id="3115040">encArrayHelper</span>&nbsp;<span class="op" id="3115055">=</span>&nbsp;<span class="keyword" id="3115057">map</span><span class="op" id="3115060">[</span><span class="ident" id="3115061">reflect</span><span class="op" id="3115068">.</span><span class="ident" id="3115069">Kind</span><span class="op" id="3115073">]</span><span class="ident" id="3115074">encHelper</span><span class="op" id="3115083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115086">reflect</span><span class="op" id="3115093">.</span><span class="ident" id="3115094">Bool</span><span class="op" id="3115098">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115106">encBoolArray</span><span class="op" id="3115118">,</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115121">reflect</span><span class="op" id="3115128">.</span><span class="ident" id="3115129">Complex64</span><span class="op" id="3115138">:</span>&nbsp;&nbsp;<span class="ident" id="3115141">encComplex64Array</span><span class="op" id="3115158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115161">reflect</span><span class="op" id="3115168">.</span><span class="ident" id="3115169">Complex128</span><span class="op" id="3115179">:</span>&nbsp;<span class="ident" id="3115181">encComplex128Array</span><span class="op" id="3115199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115202">reflect</span><span class="op" id="3115209">.</span><span class="ident" id="3115210">Float32</span><span class="op" id="3115217">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115222">encFloat32Array</span><span class="op" id="3115237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115240">reflect</span><span class="op" id="3115247">.</span><span class="ident" id="3115248">Float64</span><span class="op" id="3115255">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115260">encFloat64Array</span><span class="op" id="3115275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115278">reflect</span><span class="op" id="3115285">.</span><span class="ident" id="3115286">Int</span><span class="op" id="3115289">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115298">encIntArray</span><span class="op" id="3115309">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115312">reflect</span><span class="op" id="3115319">.</span><span class="ident" id="3115320">Int16</span><span class="op" id="3115325">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115332">encInt16Array</span><span class="op" id="3115345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115348">reflect</span><span class="op" id="3115355">.</span><span class="ident" id="3115356">Int32</span><span class="op" id="3115361">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115368">encInt32Array</span><span class="op" id="3115381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115384">reflect</span><span class="op" id="3115391">.</span><span class="ident" id="3115392">Int64</span><span class="op" id="3115397">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115404">encInt64Array</span><span class="op" id="3115417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115420">reflect</span><span class="op" id="3115427">.</span><span class="ident" id="3115428">Int8</span><span class="op" id="3115432">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115440">encInt8Array</span><span class="op" id="3115452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115455">reflect</span><span class="op" id="3115462">.</span><span class="ident" id="3115463">String</span><span class="op" id="3115469">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115475">encStringArray</span><span class="op" id="3115489">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115492">reflect</span><span class="op" id="3115499">.</span><span class="ident" id="3115500">Uint</span><span class="op" id="3115504">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115512">encUintArray</span><span class="op" id="3115524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115527">reflect</span><span class="op" id="3115534">.</span><span class="ident" id="3115535">Uint16</span><span class="op" id="3115541">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115547">encUint16Array</span><span class="op" id="3115561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115564">reflect</span><span class="op" id="3115571">.</span><span class="ident" id="3115572">Uint32</span><span class="op" id="3115578">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115584">encUint32Array</span><span class="op" id="3115598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115601">reflect</span><span class="op" id="3115608">.</span><span class="ident" id="3115609">Uint64</span><span class="op" id="3115615">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115621">encUint64Array</span><span class="op" id="3115635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115638">reflect</span><span class="op" id="3115645">.</span><span class="ident" id="3115646">Uintptr</span><span class="op" id="3115653">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115658">encUintptrArray</span><span class="op" id="3115673">,</span><br>
<span class="lineno">30</span><span class="op" id="3115675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3115678">var</span>&nbsp;<span class="ident" id="3115682">encSliceHelper</span>&nbsp;<span class="op" id="3115697">=</span>&nbsp;<span class="keyword" id="3115699">map</span><span class="op" id="3115702">[</span><span class="ident" id="3115703">reflect</span><span class="op" id="3115710">.</span><span class="ident" id="3115711">Kind</span><span class="op" id="3115715">]</span><span class="ident" id="3115716">encHelper</span><span class="op" id="3115725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115728">reflect</span><span class="op" id="3115735">.</span><span class="ident" id="3115736">Bool</span><span class="op" id="3115740">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115748">encBoolSlice</span><span class="op" id="3115760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115763">reflect</span><span class="op" id="3115770">.</span><span class="ident" id="3115771">Complex64</span><span class="op" id="3115780">:</span>&nbsp;&nbsp;<span class="ident" id="3115783">encComplex64Slice</span><span class="op" id="3115800">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115803">reflect</span><span class="op" id="3115810">.</span><span class="ident" id="3115811">Complex128</span><span class="op" id="3115821">:</span>&nbsp;<span class="ident" id="3115823">encComplex128Slice</span><span class="op" id="3115841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115844">reflect</span><span class="op" id="3115851">.</span><span class="ident" id="3115852">Float32</span><span class="op" id="3115859">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115864">encFloat32Slice</span><span class="op" id="3115879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115882">reflect</span><span class="op" id="3115889">.</span><span class="ident" id="3115890">Float64</span><span class="op" id="3115897">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115902">encFloat64Slice</span><span class="op" id="3115917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115920">reflect</span><span class="op" id="3115927">.</span><span class="ident" id="3115928">Int</span><span class="op" id="3115931">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115940">encIntSlice</span><span class="op" id="3115951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115954">reflect</span><span class="op" id="3115961">.</span><span class="ident" id="3115962">Int16</span><span class="op" id="3115967">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3115974">encInt16Slice</span><span class="op" id="3115987">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115990">reflect</span><span class="op" id="3115997">.</span><span class="ident" id="3115998">Int32</span><span class="op" id="3116003">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3116010">encInt32Slice</span><span class="op" id="3116023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3116026">reflect</span><span class="op" id="3116033">.</span><span class="ident" id="3116034">Int64</span><span class="op" id="3116039">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3116046">encInt64Slice</span><span class="op" id="3116059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3116062">reflect</span><span class="op" id="3116069">.</span><span class="ident" id="3116070">Int8</span><span class="op" id="3116074">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3116082">encInt8Slice</span><span class="op" id="3116094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3116097">reflect</span><span class="op" id="3116104">.</span><span class="ident" id="3116105">String</span><span class="op" id="3116111">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3116117">encStringSlice</span><span class="op" id="3116131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3116134">reflect</span><span class="op" id="3116141">.</span><span class="ident" id="3116142">Uint</span><span class="op" id="3116146">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3116154">encUintSlice</span><span class="op" id="3116166">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3116169">reflect</span><span class="op" id="3116176">.</span><span class="ident" id="3116177">Uint16</span><span class="op" id="3116183">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3116189">encUint16Slice</span><span class="op" id="3116203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3116206">reflect</span><span class="op" id="3116213">.</span><span class="ident" id="3116214">Uint32</span><span class="op" id="3116220">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3116226">encUint32Slice</span><span class="op" id="3116240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3116243">reflect</span><span class="op" id="3116250">.</span><span class="ident" id="3116251">Uint64</span><span class="op" id="3116257">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3116263">encUint64Slice</span><span class="op" id="3116277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3116280">reflect</span><span class="op" id="3116287">.</span><span class="ident" id="3116288">Uintptr</span><span class="op" id="3116295">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3116300">encUintptrSlice</span><span class="op" id="3116315">,</span><br>
<span class="lineno"></span><span class="op" id="3116317">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="3116320">func</span>&nbsp;<span class="ident" id="3116325">encBoolArray</span><span class="op" id="3116337">(</span><span class="ident" id="3116338">state</span>&nbsp;<span class="op" id="3116344">*</span><span class="ident" id="3116345">encoderState</span><span class="op" id="3116357">,</span>&nbsp;<span class="ident" id="3116359">v</span>&nbsp;<span class="ident" id="3116361">reflect</span><span class="op" id="3116368">.</span><span class="ident" id="3116369">Value</span><span class="op" id="3116374">)</span>&nbsp;<span class="builtintype" id="3116376">bool</span>&nbsp;<span class="op" id="3116381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3116384">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3116425">if</span>&nbsp;<span class="op" id="3116428">!</span><span class="ident" id="3116429">v</span><span class="op" id="3116430">.</span><span class="ident" id="3116431">CanAddr</span><span class="op" id="3116438">(</span><span class="op" id="3116439">)</span>&nbsp;<span class="op" id="3116441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3116445">return</span>&nbsp;<span class="builtintype" id="3116452">false</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3116459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3116462">return</span>&nbsp;<span class="ident" id="3116469">encBoolSlice</span><span class="op" id="3116481">(</span><span class="ident" id="3116482">state</span><span class="op" id="3116487">,</span>&nbsp;<span class="ident" id="3116489">v</span><span class="op" id="3116490">.</span><span class="ident" id="3116491">Slice</span><span class="op" id="3116496">(</span><span class="num" id="3116497">0</span><span class="op" id="3116498">,</span>&nbsp;<span class="ident" id="3116500">v</span><span class="op" id="3116501">.</span><span class="ident" id="3116502">Len</span><span class="op" id="3116505">(</span><span class="op" id="3116506">)</span><span class="op" id="3116507">)</span><span class="op" id="3116508">)</span><br>
<span class="lineno"></span><span class="op" id="3116510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3116513">func</span>&nbsp;<span class="ident" id="3116518">encBoolSlice</span><span class="op" id="3116530">(</span><span class="ident" id="3116531">state</span>&nbsp;<span class="op" id="3116537">*</span><span class="ident" id="3116538">encoderState</span><span class="op" id="3116550">,</span>&nbsp;<span class="ident" id="3116552">v</span>&nbsp;<span class="ident" id="3116554">reflect</span><span class="op" id="3116561">.</span><span class="ident" id="3116562">Value</span><span class="op" id="3116567">)</span>&nbsp;<span class="builtintype" id="3116569">bool</span>&nbsp;<span class="op" id="3116574">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3116577">slice</span><span class="op" id="3116582">,</span>&nbsp;<span class="ident" id="3116584">ok</span>&nbsp;<span class="op" id="3116587">:=</span>&nbsp;<span class="ident" id="3116590">v</span><span class="op" id="3116591">.</span><span class="ident" id="3116592">Interface</span><span class="op" id="3116601">(</span><span class="op" id="3116602">)</span><span class="op" id="3116603">.</span><span class="op" id="3116604">(</span><span class="op" id="3116605">[</span><span class="op" id="3116606">]</span><span class="builtintype" id="3116607">bool</span><span class="op" id="3116611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3116614">if</span>&nbsp;<span class="op" id="3116617">!</span><span class="ident" id="3116618">ok</span>&nbsp;<span class="op" id="3116621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3116625">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;bool&nbsp;but&nbsp;not&nbsp;type&nbsp;bool.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3116700">return</span>&nbsp;<span class="builtintype" id="3116707">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3116714">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3116717">for</span>&nbsp;<span class="ident" id="3116721">_</span><span class="op" id="3116722">,</span>&nbsp;<span class="ident" id="3116724">x</span>&nbsp;<span class="op" id="3116726">:=</span>&nbsp;<span class="keyword" id="3116729">range</span>&nbsp;<span class="ident" id="3116735">slice</span>&nbsp;<span class="op" id="3116741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3116745">if</span>&nbsp;<span class="ident" id="3116748">x</span>&nbsp;<span class="op" id="3116750">!=</span>&nbsp;<span class="builtintype" id="3116753">false</span>&nbsp;<span class="op" id="3116759">||</span>&nbsp;<span class="ident" id="3116762">state</span><span class="op" id="3116767">.</span><span class="ident" id="3116768">sendZero</span>&nbsp;<span class="op" id="3116777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3116782">if</span>&nbsp;<span class="ident" id="3116785">x</span>&nbsp;<span class="op" id="3116787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3116793">state</span><span class="op" id="3116798">.</span><span class="ident" id="3116799">encodeUint</span><span class="op" id="3116809">(</span><span class="num" id="3116810">1</span><span class="op" id="3116811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3116816">}</span>&nbsp;<span class="keyword" id="3116818">else</span>&nbsp;<span class="op" id="3116823">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3116829">state</span><span class="op" id="3116834">.</span><span class="ident" id="3116835">encodeUint</span><span class="op" id="3116845">(</span><span class="num" id="3116846">0</span><span class="op" id="3116847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3116852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3116856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3116859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3116862">return</span>&nbsp;<span class="builtintype" id="3116869">true</span><br>
<span class="lineno">75</span><span class="op" id="3116874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3116877">func</span>&nbsp;<span class="ident" id="3116882">encComplex64Array</span><span class="op" id="3116899">(</span><span class="ident" id="3116900">state</span>&nbsp;<span class="op" id="3116906">*</span><span class="ident" id="3116907">encoderState</span><span class="op" id="3116919">,</span>&nbsp;<span class="ident" id="3116921">v</span>&nbsp;<span class="ident" id="3116923">reflect</span><span class="op" id="3116930">.</span><span class="ident" id="3116931">Value</span><span class="op" id="3116936">)</span>&nbsp;<span class="builtintype" id="3116938">bool</span>&nbsp;<span class="op" id="3116943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3116946">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3116987">if</span>&nbsp;<span class="op" id="3116990">!</span><span class="ident" id="3116991">v</span><span class="op" id="3116992">.</span><span class="ident" id="3116993">CanAddr</span><span class="op" id="3117000">(</span><span class="op" id="3117001">)</span>&nbsp;<span class="op" id="3117003">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3117007">return</span>&nbsp;<span class="builtintype" id="3117014">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3117021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3117024">return</span>&nbsp;<span class="ident" id="3117031">encComplex64Slice</span><span class="op" id="3117048">(</span><span class="ident" id="3117049">state</span><span class="op" id="3117054">,</span>&nbsp;<span class="ident" id="3117056">v</span><span class="op" id="3117057">.</span><span class="ident" id="3117058">Slice</span><span class="op" id="3117063">(</span><span class="num" id="3117064">0</span><span class="op" id="3117065">,</span>&nbsp;<span class="ident" id="3117067">v</span><span class="op" id="3117068">.</span><span class="ident" id="3117069">Len</span><span class="op" id="3117072">(</span><span class="op" id="3117073">)</span><span class="op" id="3117074">)</span><span class="op" id="3117075">)</span><br>
<span class="lineno"></span><span class="op" id="3117077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="3117080">func</span>&nbsp;<span class="ident" id="3117085">encComplex64Slice</span><span class="op" id="3117102">(</span><span class="ident" id="3117103">state</span>&nbsp;<span class="op" id="3117109">*</span><span class="ident" id="3117110">encoderState</span><span class="op" id="3117122">,</span>&nbsp;<span class="ident" id="3117124">v</span>&nbsp;<span class="ident" id="3117126">reflect</span><span class="op" id="3117133">.</span><span class="ident" id="3117134">Value</span><span class="op" id="3117139">)</span>&nbsp;<span class="builtintype" id="3117141">bool</span>&nbsp;<span class="op" id="3117146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3117149">slice</span><span class="op" id="3117154">,</span>&nbsp;<span class="ident" id="3117156">ok</span>&nbsp;<span class="op" id="3117159">:=</span>&nbsp;<span class="ident" id="3117162">v</span><span class="op" id="3117163">.</span><span class="ident" id="3117164">Interface</span><span class="op" id="3117173">(</span><span class="op" id="3117174">)</span><span class="op" id="3117175">.</span><span class="op" id="3117176">(</span><span class="op" id="3117177">[</span><span class="op" id="3117178">]</span><span class="builtintype" id="3117179">complex64</span><span class="op" id="3117188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3117191">if</span>&nbsp;<span class="op" id="3117194">!</span><span class="ident" id="3117195">ok</span>&nbsp;<span class="op" id="3117198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3117202">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;complex64&nbsp;but&nbsp;not&nbsp;type&nbsp;complex64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3117287">return</span>&nbsp;<span class="builtintype" id="3117294">false</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3117301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3117304">for</span>&nbsp;<span class="ident" id="3117308">_</span><span class="op" id="3117309">,</span>&nbsp;<span class="ident" id="3117311">x</span>&nbsp;<span class="op" id="3117313">:=</span>&nbsp;<span class="keyword" id="3117316">range</span>&nbsp;<span class="ident" id="3117322">slice</span>&nbsp;<span class="op" id="3117328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3117332">if</span>&nbsp;<span class="ident" id="3117335">x</span>&nbsp;<span class="op" id="3117337">!=</span>&nbsp;<span class="num" id="3117340">0</span><span class="op" id="3117341">+</span><span class="num" id="3117342">0i</span>&nbsp;<span class="op" id="3117345">||</span>&nbsp;<span class="ident" id="3117348">state</span><span class="op" id="3117353">.</span><span class="ident" id="3117354">sendZero</span>&nbsp;<span class="op" id="3117363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3117368">rpart</span>&nbsp;<span class="op" id="3117374">:=</span>&nbsp;<span class="ident" id="3117377">floatBits</span><span class="op" id="3117386">(</span><span class="builtintype" id="3117387">float64</span><span class="op" id="3117394">(</span><span class="builtinfunc" id="3117395">real</span><span class="op" id="3117399">(</span><span class="ident" id="3117400">x</span><span class="op" id="3117401">)</span><span class="op" id="3117402">)</span><span class="op" id="3117403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3117408">ipart</span>&nbsp;<span class="op" id="3117414">:=</span>&nbsp;<span class="ident" id="3117417">floatBits</span><span class="op" id="3117426">(</span><span class="builtintype" id="3117427">float64</span><span class="op" id="3117434">(</span><span class="builtinfunc" id="3117435">imag</span><span class="op" id="3117439">(</span><span class="ident" id="3117440">x</span><span class="op" id="3117441">)</span><span class="op" id="3117442">)</span><span class="op" id="3117443">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3117448">state</span><span class="op" id="3117453">.</span><span class="ident" id="3117454">encodeUint</span><span class="op" id="3117464">(</span><span class="ident" id="3117465">rpart</span><span class="op" id="3117470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3117475">state</span><span class="op" id="3117480">.</span><span class="ident" id="3117481">encodeUint</span><span class="op" id="3117491">(</span><span class="ident" id="3117492">ipart</span><span class="op" id="3117497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3117501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3117504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3117507">return</span>&nbsp;<span class="builtintype" id="3117514">true</span><br>
<span class="lineno">100</span><span class="op" id="3117519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3117522">func</span>&nbsp;<span class="ident" id="3117527">encComplex128Array</span><span class="op" id="3117545">(</span><span class="ident" id="3117546">state</span>&nbsp;<span class="op" id="3117552">*</span><span class="ident" id="3117553">encoderState</span><span class="op" id="3117565">,</span>&nbsp;<span class="ident" id="3117567">v</span>&nbsp;<span class="ident" id="3117569">reflect</span><span class="op" id="3117576">.</span><span class="ident" id="3117577">Value</span><span class="op" id="3117582">)</span>&nbsp;<span class="builtintype" id="3117584">bool</span>&nbsp;<span class="op" id="3117589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3117592">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3117633">if</span>&nbsp;<span class="op" id="3117636">!</span><span class="ident" id="3117637">v</span><span class="op" id="3117638">.</span><span class="ident" id="3117639">CanAddr</span><span class="op" id="3117646">(</span><span class="op" id="3117647">)</span>&nbsp;<span class="op" id="3117649">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3117653">return</span>&nbsp;<span class="builtintype" id="3117660">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3117667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3117670">return</span>&nbsp;<span class="ident" id="3117677">encComplex128Slice</span><span class="op" id="3117695">(</span><span class="ident" id="3117696">state</span><span class="op" id="3117701">,</span>&nbsp;<span class="ident" id="3117703">v</span><span class="op" id="3117704">.</span><span class="ident" id="3117705">Slice</span><span class="op" id="3117710">(</span><span class="num" id="3117711">0</span><span class="op" id="3117712">,</span>&nbsp;<span class="ident" id="3117714">v</span><span class="op" id="3117715">.</span><span class="ident" id="3117716">Len</span><span class="op" id="3117719">(</span><span class="op" id="3117720">)</span><span class="op" id="3117721">)</span><span class="op" id="3117722">)</span><br>
<span class="lineno"></span><span class="op" id="3117724">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="3117727">func</span>&nbsp;<span class="ident" id="3117732">encComplex128Slice</span><span class="op" id="3117750">(</span><span class="ident" id="3117751">state</span>&nbsp;<span class="op" id="3117757">*</span><span class="ident" id="3117758">encoderState</span><span class="op" id="3117770">,</span>&nbsp;<span class="ident" id="3117772">v</span>&nbsp;<span class="ident" id="3117774">reflect</span><span class="op" id="3117781">.</span><span class="ident" id="3117782">Value</span><span class="op" id="3117787">)</span>&nbsp;<span class="builtintype" id="3117789">bool</span>&nbsp;<span class="op" id="3117794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3117797">slice</span><span class="op" id="3117802">,</span>&nbsp;<span class="ident" id="3117804">ok</span>&nbsp;<span class="op" id="3117807">:=</span>&nbsp;<span class="ident" id="3117810">v</span><span class="op" id="3117811">.</span><span class="ident" id="3117812">Interface</span><span class="op" id="3117821">(</span><span class="op" id="3117822">)</span><span class="op" id="3117823">.</span><span class="op" id="3117824">(</span><span class="op" id="3117825">[</span><span class="op" id="3117826">]</span><span class="builtintype" id="3117827">complex128</span><span class="op" id="3117837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3117840">if</span>&nbsp;<span class="op" id="3117843">!</span><span class="ident" id="3117844">ok</span>&nbsp;<span class="op" id="3117847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3117851">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;complex128&nbsp;but&nbsp;not&nbsp;type&nbsp;complex128.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3117938">return</span>&nbsp;<span class="builtintype" id="3117945">false</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3117952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3117955">for</span>&nbsp;<span class="ident" id="3117959">_</span><span class="op" id="3117960">,</span>&nbsp;<span class="ident" id="3117962">x</span>&nbsp;<span class="op" id="3117964">:=</span>&nbsp;<span class="keyword" id="3117967">range</span>&nbsp;<span class="ident" id="3117973">slice</span>&nbsp;<span class="op" id="3117979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3117983">if</span>&nbsp;<span class="ident" id="3117986">x</span>&nbsp;<span class="op" id="3117988">!=</span>&nbsp;<span class="num" id="3117991">0</span><span class="op" id="3117992">+</span><span class="num" id="3117993">0i</span>&nbsp;<span class="op" id="3117996">||</span>&nbsp;<span class="ident" id="3117999">state</span><span class="op" id="3118004">.</span><span class="ident" id="3118005">sendZero</span>&nbsp;<span class="op" id="3118014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3118019">rpart</span>&nbsp;<span class="op" id="3118025">:=</span>&nbsp;<span class="ident" id="3118028">floatBits</span><span class="op" id="3118037">(</span><span class="builtinfunc" id="3118038">real</span><span class="op" id="3118042">(</span><span class="ident" id="3118043">x</span><span class="op" id="3118044">)</span><span class="op" id="3118045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3118050">ipart</span>&nbsp;<span class="op" id="3118056">:=</span>&nbsp;<span class="ident" id="3118059">floatBits</span><span class="op" id="3118068">(</span><span class="builtinfunc" id="3118069">imag</span><span class="op" id="3118073">(</span><span class="ident" id="3118074">x</span><span class="op" id="3118075">)</span><span class="op" id="3118076">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3118081">state</span><span class="op" id="3118086">.</span><span class="ident" id="3118087">encodeUint</span><span class="op" id="3118097">(</span><span class="ident" id="3118098">rpart</span><span class="op" id="3118103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3118108">state</span><span class="op" id="3118113">.</span><span class="ident" id="3118114">encodeUint</span><span class="op" id="3118124">(</span><span class="ident" id="3118125">ipart</span><span class="op" id="3118130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3118134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3118137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3118140">return</span>&nbsp;<span class="builtintype" id="3118147">true</span><br>
<span class="lineno">125</span><span class="op" id="3118152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3118155">func</span>&nbsp;<span class="ident" id="3118160">encFloat32Array</span><span class="op" id="3118175">(</span><span class="ident" id="3118176">state</span>&nbsp;<span class="op" id="3118182">*</span><span class="ident" id="3118183">encoderState</span><span class="op" id="3118195">,</span>&nbsp;<span class="ident" id="3118197">v</span>&nbsp;<span class="ident" id="3118199">reflect</span><span class="op" id="3118206">.</span><span class="ident" id="3118207">Value</span><span class="op" id="3118212">)</span>&nbsp;<span class="builtintype" id="3118214">bool</span>&nbsp;<span class="op" id="3118219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3118222">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3118263">if</span>&nbsp;<span class="op" id="3118266">!</span><span class="ident" id="3118267">v</span><span class="op" id="3118268">.</span><span class="ident" id="3118269">CanAddr</span><span class="op" id="3118276">(</span><span class="op" id="3118277">)</span>&nbsp;<span class="op" id="3118279">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3118283">return</span>&nbsp;<span class="builtintype" id="3118290">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3118297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3118300">return</span>&nbsp;<span class="ident" id="3118307">encFloat32Slice</span><span class="op" id="3118322">(</span><span class="ident" id="3118323">state</span><span class="op" id="3118328">,</span>&nbsp;<span class="ident" id="3118330">v</span><span class="op" id="3118331">.</span><span class="ident" id="3118332">Slice</span><span class="op" id="3118337">(</span><span class="num" id="3118338">0</span><span class="op" id="3118339">,</span>&nbsp;<span class="ident" id="3118341">v</span><span class="op" id="3118342">.</span><span class="ident" id="3118343">Len</span><span class="op" id="3118346">(</span><span class="op" id="3118347">)</span><span class="op" id="3118348">)</span><span class="op" id="3118349">)</span><br>
<span class="lineno"></span><span class="op" id="3118351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="3118354">func</span>&nbsp;<span class="ident" id="3118359">encFloat32Slice</span><span class="op" id="3118374">(</span><span class="ident" id="3118375">state</span>&nbsp;<span class="op" id="3118381">*</span><span class="ident" id="3118382">encoderState</span><span class="op" id="3118394">,</span>&nbsp;<span class="ident" id="3118396">v</span>&nbsp;<span class="ident" id="3118398">reflect</span><span class="op" id="3118405">.</span><span class="ident" id="3118406">Value</span><span class="op" id="3118411">)</span>&nbsp;<span class="builtintype" id="3118413">bool</span>&nbsp;<span class="op" id="3118418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3118421">slice</span><span class="op" id="3118426">,</span>&nbsp;<span class="ident" id="3118428">ok</span>&nbsp;<span class="op" id="3118431">:=</span>&nbsp;<span class="ident" id="3118434">v</span><span class="op" id="3118435">.</span><span class="ident" id="3118436">Interface</span><span class="op" id="3118445">(</span><span class="op" id="3118446">)</span><span class="op" id="3118447">.</span><span class="op" id="3118448">(</span><span class="op" id="3118449">[</span><span class="op" id="3118450">]</span><span class="builtintype" id="3118451">float32</span><span class="op" id="3118458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3118461">if</span>&nbsp;<span class="op" id="3118464">!</span><span class="ident" id="3118465">ok</span>&nbsp;<span class="op" id="3118468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3118472">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;float32&nbsp;but&nbsp;not&nbsp;type&nbsp;float32.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3118553">return</span>&nbsp;<span class="builtintype" id="3118560">false</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3118567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3118570">for</span>&nbsp;<span class="ident" id="3118574">_</span><span class="op" id="3118575">,</span>&nbsp;<span class="ident" id="3118577">x</span>&nbsp;<span class="op" id="3118579">:=</span>&nbsp;<span class="keyword" id="3118582">range</span>&nbsp;<span class="ident" id="3118588">slice</span>&nbsp;<span class="op" id="3118594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3118598">if</span>&nbsp;<span class="ident" id="3118601">x</span>&nbsp;<span class="op" id="3118603">!=</span>&nbsp;<span class="num" id="3118606">0</span>&nbsp;<span class="op" id="3118608">||</span>&nbsp;<span class="ident" id="3118611">state</span><span class="op" id="3118616">.</span><span class="ident" id="3118617">sendZero</span>&nbsp;<span class="op" id="3118626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3118631">bits</span>&nbsp;<span class="op" id="3118636">:=</span>&nbsp;<span class="ident" id="3118639">floatBits</span><span class="op" id="3118648">(</span><span class="builtintype" id="3118649">float64</span><span class="op" id="3118656">(</span><span class="ident" id="3118657">x</span><span class="op" id="3118658">)</span><span class="op" id="3118659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3118664">state</span><span class="op" id="3118669">.</span><span class="ident" id="3118670">encodeUint</span><span class="op" id="3118680">(</span><span class="ident" id="3118681">bits</span><span class="op" id="3118685">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3118689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3118692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3118695">return</span>&nbsp;<span class="builtintype" id="3118702">true</span><br>
<span class="lineno"></span><span class="op" id="3118707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="3118710">func</span>&nbsp;<span class="ident" id="3118715">encFloat64Array</span><span class="op" id="3118730">(</span><span class="ident" id="3118731">state</span>&nbsp;<span class="op" id="3118737">*</span><span class="ident" id="3118738">encoderState</span><span class="op" id="3118750">,</span>&nbsp;<span class="ident" id="3118752">v</span>&nbsp;<span class="ident" id="3118754">reflect</span><span class="op" id="3118761">.</span><span class="ident" id="3118762">Value</span><span class="op" id="3118767">)</span>&nbsp;<span class="builtintype" id="3118769">bool</span>&nbsp;<span class="op" id="3118774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3118777">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3118818">if</span>&nbsp;<span class="op" id="3118821">!</span><span class="ident" id="3118822">v</span><span class="op" id="3118823">.</span><span class="ident" id="3118824">CanAddr</span><span class="op" id="3118831">(</span><span class="op" id="3118832">)</span>&nbsp;<span class="op" id="3118834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3118838">return</span>&nbsp;<span class="builtintype" id="3118845">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3118852">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3118855">return</span>&nbsp;<span class="ident" id="3118862">encFloat64Slice</span><span class="op" id="3118877">(</span><span class="ident" id="3118878">state</span><span class="op" id="3118883">,</span>&nbsp;<span class="ident" id="3118885">v</span><span class="op" id="3118886">.</span><span class="ident" id="3118887">Slice</span><span class="op" id="3118892">(</span><span class="num" id="3118893">0</span><span class="op" id="3118894">,</span>&nbsp;<span class="ident" id="3118896">v</span><span class="op" id="3118897">.</span><span class="ident" id="3118898">Len</span><span class="op" id="3118901">(</span><span class="op" id="3118902">)</span><span class="op" id="3118903">)</span><span class="op" id="3118904">)</span><br>
<span class="lineno"></span><span class="op" id="3118906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3118909">func</span>&nbsp;<span class="ident" id="3118914">encFloat64Slice</span><span class="op" id="3118929">(</span><span class="ident" id="3118930">state</span>&nbsp;<span class="op" id="3118936">*</span><span class="ident" id="3118937">encoderState</span><span class="op" id="3118949">,</span>&nbsp;<span class="ident" id="3118951">v</span>&nbsp;<span class="ident" id="3118953">reflect</span><span class="op" id="3118960">.</span><span class="ident" id="3118961">Value</span><span class="op" id="3118966">)</span>&nbsp;<span class="builtintype" id="3118968">bool</span>&nbsp;<span class="op" id="3118973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3118976">slice</span><span class="op" id="3118981">,</span>&nbsp;<span class="ident" id="3118983">ok</span>&nbsp;<span class="op" id="3118986">:=</span>&nbsp;<span class="ident" id="3118989">v</span><span class="op" id="3118990">.</span><span class="ident" id="3118991">Interface</span><span class="op" id="3119000">(</span><span class="op" id="3119001">)</span><span class="op" id="3119002">.</span><span class="op" id="3119003">(</span><span class="op" id="3119004">[</span><span class="op" id="3119005">]</span><span class="builtintype" id="3119006">float64</span><span class="op" id="3119013">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3119016">if</span>&nbsp;<span class="op" id="3119019">!</span><span class="ident" id="3119020">ok</span>&nbsp;<span class="op" id="3119023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3119027">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;float64&nbsp;but&nbsp;not&nbsp;type&nbsp;float64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3119108">return</span>&nbsp;<span class="builtintype" id="3119115">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3119122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3119125">for</span>&nbsp;<span class="ident" id="3119129">_</span><span class="op" id="3119130">,</span>&nbsp;<span class="ident" id="3119132">x</span>&nbsp;<span class="op" id="3119134">:=</span>&nbsp;<span class="keyword" id="3119137">range</span>&nbsp;<span class="ident" id="3119143">slice</span>&nbsp;<span class="op" id="3119149">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3119153">if</span>&nbsp;<span class="ident" id="3119156">x</span>&nbsp;<span class="op" id="3119158">!=</span>&nbsp;<span class="num" id="3119161">0</span>&nbsp;<span class="op" id="3119163">||</span>&nbsp;<span class="ident" id="3119166">state</span><span class="op" id="3119171">.</span><span class="ident" id="3119172">sendZero</span>&nbsp;<span class="op" id="3119181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3119186">bits</span>&nbsp;<span class="op" id="3119191">:=</span>&nbsp;<span class="ident" id="3119194">floatBits</span><span class="op" id="3119203">(</span><span class="ident" id="3119204">x</span><span class="op" id="3119205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3119210">state</span><span class="op" id="3119215">.</span><span class="ident" id="3119216">encodeUint</span><span class="op" id="3119226">(</span><span class="ident" id="3119227">bits</span><span class="op" id="3119231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3119235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3119238">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3119241">return</span>&nbsp;<span class="builtintype" id="3119248">true</span><br>
<span class="lineno"></span><span class="op" id="3119253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3119256">func</span>&nbsp;<span class="ident" id="3119261">encIntArray</span><span class="op" id="3119272">(</span><span class="ident" id="3119273">state</span>&nbsp;<span class="op" id="3119279">*</span><span class="ident" id="3119280">encoderState</span><span class="op" id="3119292">,</span>&nbsp;<span class="ident" id="3119294">v</span>&nbsp;<span class="ident" id="3119296">reflect</span><span class="op" id="3119303">.</span><span class="ident" id="3119304">Value</span><span class="op" id="3119309">)</span>&nbsp;<span class="builtintype" id="3119311">bool</span>&nbsp;<span class="op" id="3119316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3119319">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3119360">if</span>&nbsp;<span class="op" id="3119363">!</span><span class="ident" id="3119364">v</span><span class="op" id="3119365">.</span><span class="ident" id="3119366">CanAddr</span><span class="op" id="3119373">(</span><span class="op" id="3119374">)</span>&nbsp;<span class="op" id="3119376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3119380">return</span>&nbsp;<span class="builtintype" id="3119387">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3119394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3119397">return</span>&nbsp;<span class="ident" id="3119404">encIntSlice</span><span class="op" id="3119415">(</span><span class="ident" id="3119416">state</span><span class="op" id="3119421">,</span>&nbsp;<span class="ident" id="3119423">v</span><span class="op" id="3119424">.</span><span class="ident" id="3119425">Slice</span><span class="op" id="3119430">(</span><span class="num" id="3119431">0</span><span class="op" id="3119432">,</span>&nbsp;<span class="ident" id="3119434">v</span><span class="op" id="3119435">.</span><span class="ident" id="3119436">Len</span><span class="op" id="3119439">(</span><span class="op" id="3119440">)</span><span class="op" id="3119441">)</span><span class="op" id="3119442">)</span><br>
<span class="lineno"></span><span class="op" id="3119444">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="keyword" id="3119447">func</span>&nbsp;<span class="ident" id="3119452">encIntSlice</span><span class="op" id="3119463">(</span><span class="ident" id="3119464">state</span>&nbsp;<span class="op" id="3119470">*</span><span class="ident" id="3119471">encoderState</span><span class="op" id="3119483">,</span>&nbsp;<span class="ident" id="3119485">v</span>&nbsp;<span class="ident" id="3119487">reflect</span><span class="op" id="3119494">.</span><span class="ident" id="3119495">Value</span><span class="op" id="3119500">)</span>&nbsp;<span class="builtintype" id="3119502">bool</span>&nbsp;<span class="op" id="3119507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3119510">slice</span><span class="op" id="3119515">,</span>&nbsp;<span class="ident" id="3119517">ok</span>&nbsp;<span class="op" id="3119520">:=</span>&nbsp;<span class="ident" id="3119523">v</span><span class="op" id="3119524">.</span><span class="ident" id="3119525">Interface</span><span class="op" id="3119534">(</span><span class="op" id="3119535">)</span><span class="op" id="3119536">.</span><span class="op" id="3119537">(</span><span class="op" id="3119538">[</span><span class="op" id="3119539">]</span><span class="builtintype" id="3119540">int</span><span class="op" id="3119543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3119546">if</span>&nbsp;<span class="op" id="3119549">!</span><span class="ident" id="3119550">ok</span>&nbsp;<span class="op" id="3119553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3119557">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int&nbsp;but&nbsp;not&nbsp;type&nbsp;int.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3119630">return</span>&nbsp;<span class="builtintype" id="3119637">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3119644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3119647">for</span>&nbsp;<span class="ident" id="3119651">_</span><span class="op" id="3119652">,</span>&nbsp;<span class="ident" id="3119654">x</span>&nbsp;<span class="op" id="3119656">:=</span>&nbsp;<span class="keyword" id="3119659">range</span>&nbsp;<span class="ident" id="3119665">slice</span>&nbsp;<span class="op" id="3119671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3119675">if</span>&nbsp;<span class="ident" id="3119678">x</span>&nbsp;<span class="op" id="3119680">!=</span>&nbsp;<span class="num" id="3119683">0</span>&nbsp;<span class="op" id="3119685">||</span>&nbsp;<span class="ident" id="3119688">state</span><span class="op" id="3119693">.</span><span class="ident" id="3119694">sendZero</span>&nbsp;<span class="op" id="3119703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3119708">state</span><span class="op" id="3119713">.</span><span class="ident" id="3119714">encodeInt</span><span class="op" id="3119723">(</span><span class="ident" id="3119724">int64</span><span class="op" id="3119729">(</span><span class="ident" id="3119730">x</span><span class="op" id="3119731">)</span><span class="op" id="3119732">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3119736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3119739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3119742">return</span>&nbsp;<span class="builtintype" id="3119749">true</span><br>
<span class="lineno"></span><span class="op" id="3119754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="3119757">func</span>&nbsp;<span class="ident" id="3119762">encInt16Array</span><span class="op" id="3119775">(</span><span class="ident" id="3119776">state</span>&nbsp;<span class="op" id="3119782">*</span><span class="ident" id="3119783">encoderState</span><span class="op" id="3119795">,</span>&nbsp;<span class="ident" id="3119797">v</span>&nbsp;<span class="ident" id="3119799">reflect</span><span class="op" id="3119806">.</span><span class="ident" id="3119807">Value</span><span class="op" id="3119812">)</span>&nbsp;<span class="builtintype" id="3119814">bool</span>&nbsp;<span class="op" id="3119819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3119822">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3119863">if</span>&nbsp;<span class="op" id="3119866">!</span><span class="ident" id="3119867">v</span><span class="op" id="3119868">.</span><span class="ident" id="3119869">CanAddr</span><span class="op" id="3119876">(</span><span class="op" id="3119877">)</span>&nbsp;<span class="op" id="3119879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3119883">return</span>&nbsp;<span class="builtintype" id="3119890">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3119897">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3119900">return</span>&nbsp;<span class="ident" id="3119907">encInt16Slice</span><span class="op" id="3119920">(</span><span class="ident" id="3119921">state</span><span class="op" id="3119926">,</span>&nbsp;<span class="ident" id="3119928">v</span><span class="op" id="3119929">.</span><span class="ident" id="3119930">Slice</span><span class="op" id="3119935">(</span><span class="num" id="3119936">0</span><span class="op" id="3119937">,</span>&nbsp;<span class="ident" id="3119939">v</span><span class="op" id="3119940">.</span><span class="ident" id="3119941">Len</span><span class="op" id="3119944">(</span><span class="op" id="3119945">)</span><span class="op" id="3119946">)</span><span class="op" id="3119947">)</span><br>
<span class="lineno"></span><span class="op" id="3119949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3119952">func</span>&nbsp;<span class="ident" id="3119957">encInt16Slice</span><span class="op" id="3119970">(</span><span class="ident" id="3119971">state</span>&nbsp;<span class="op" id="3119977">*</span><span class="ident" id="3119978">encoderState</span><span class="op" id="3119990">,</span>&nbsp;<span class="ident" id="3119992">v</span>&nbsp;<span class="ident" id="3119994">reflect</span><span class="op" id="3120001">.</span><span class="ident" id="3120002">Value</span><span class="op" id="3120007">)</span>&nbsp;<span class="builtintype" id="3120009">bool</span>&nbsp;<span class="op" id="3120014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3120017">slice</span><span class="op" id="3120022">,</span>&nbsp;<span class="ident" id="3120024">ok</span>&nbsp;<span class="op" id="3120027">:=</span>&nbsp;<span class="ident" id="3120030">v</span><span class="op" id="3120031">.</span><span class="ident" id="3120032">Interface</span><span class="op" id="3120041">(</span><span class="op" id="3120042">)</span><span class="op" id="3120043">.</span><span class="op" id="3120044">(</span><span class="op" id="3120045">[</span><span class="op" id="3120046">]</span><span class="builtintype" id="3120047">int16</span><span class="op" id="3120052">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3120055">if</span>&nbsp;<span class="op" id="3120058">!</span><span class="ident" id="3120059">ok</span>&nbsp;<span class="op" id="3120062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3120066">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int16&nbsp;but&nbsp;not&nbsp;type&nbsp;int16.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3120143">return</span>&nbsp;<span class="builtintype" id="3120150">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3120157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3120160">for</span>&nbsp;<span class="ident" id="3120164">_</span><span class="op" id="3120165">,</span>&nbsp;<span class="ident" id="3120167">x</span>&nbsp;<span class="op" id="3120169">:=</span>&nbsp;<span class="keyword" id="3120172">range</span>&nbsp;<span class="ident" id="3120178">slice</span>&nbsp;<span class="op" id="3120184">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3120188">if</span>&nbsp;<span class="ident" id="3120191">x</span>&nbsp;<span class="op" id="3120193">!=</span>&nbsp;<span class="num" id="3120196">0</span>&nbsp;<span class="op" id="3120198">||</span>&nbsp;<span class="ident" id="3120201">state</span><span class="op" id="3120206">.</span><span class="ident" id="3120207">sendZero</span>&nbsp;<span class="op" id="3120216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3120221">state</span><span class="op" id="3120226">.</span><span class="ident" id="3120227">encodeInt</span><span class="op" id="3120236">(</span><span class="ident" id="3120237">int64</span><span class="op" id="3120242">(</span><span class="ident" id="3120243">x</span><span class="op" id="3120244">)</span><span class="op" id="3120245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3120249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3120252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3120255">return</span>&nbsp;<span class="builtintype" id="3120262">true</span><br>
<span class="lineno">215</span><span class="op" id="3120267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3120270">func</span>&nbsp;<span class="ident" id="3120275">encInt32Array</span><span class="op" id="3120288">(</span><span class="ident" id="3120289">state</span>&nbsp;<span class="op" id="3120295">*</span><span class="ident" id="3120296">encoderState</span><span class="op" id="3120308">,</span>&nbsp;<span class="ident" id="3120310">v</span>&nbsp;<span class="ident" id="3120312">reflect</span><span class="op" id="3120319">.</span><span class="ident" id="3120320">Value</span><span class="op" id="3120325">)</span>&nbsp;<span class="builtintype" id="3120327">bool</span>&nbsp;<span class="op" id="3120332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3120335">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3120376">if</span>&nbsp;<span class="op" id="3120379">!</span><span class="ident" id="3120380">v</span><span class="op" id="3120381">.</span><span class="ident" id="3120382">CanAddr</span><span class="op" id="3120389">(</span><span class="op" id="3120390">)</span>&nbsp;<span class="op" id="3120392">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3120396">return</span>&nbsp;<span class="builtintype" id="3120403">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3120410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3120413">return</span>&nbsp;<span class="ident" id="3120420">encInt32Slice</span><span class="op" id="3120433">(</span><span class="ident" id="3120434">state</span><span class="op" id="3120439">,</span>&nbsp;<span class="ident" id="3120441">v</span><span class="op" id="3120442">.</span><span class="ident" id="3120443">Slice</span><span class="op" id="3120448">(</span><span class="num" id="3120449">0</span><span class="op" id="3120450">,</span>&nbsp;<span class="ident" id="3120452">v</span><span class="op" id="3120453">.</span><span class="ident" id="3120454">Len</span><span class="op" id="3120457">(</span><span class="op" id="3120458">)</span><span class="op" id="3120459">)</span><span class="op" id="3120460">)</span><br>
<span class="lineno"></span><span class="op" id="3120462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="3120465">func</span>&nbsp;<span class="ident" id="3120470">encInt32Slice</span><span class="op" id="3120483">(</span><span class="ident" id="3120484">state</span>&nbsp;<span class="op" id="3120490">*</span><span class="ident" id="3120491">encoderState</span><span class="op" id="3120503">,</span>&nbsp;<span class="ident" id="3120505">v</span>&nbsp;<span class="ident" id="3120507">reflect</span><span class="op" id="3120514">.</span><span class="ident" id="3120515">Value</span><span class="op" id="3120520">)</span>&nbsp;<span class="builtintype" id="3120522">bool</span>&nbsp;<span class="op" id="3120527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3120530">slice</span><span class="op" id="3120535">,</span>&nbsp;<span class="ident" id="3120537">ok</span>&nbsp;<span class="op" id="3120540">:=</span>&nbsp;<span class="ident" id="3120543">v</span><span class="op" id="3120544">.</span><span class="ident" id="3120545">Interface</span><span class="op" id="3120554">(</span><span class="op" id="3120555">)</span><span class="op" id="3120556">.</span><span class="op" id="3120557">(</span><span class="op" id="3120558">[</span><span class="op" id="3120559">]</span><span class="builtintype" id="3120560">int32</span><span class="op" id="3120565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3120568">if</span>&nbsp;<span class="op" id="3120571">!</span><span class="ident" id="3120572">ok</span>&nbsp;<span class="op" id="3120575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3120579">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int32&nbsp;but&nbsp;not&nbsp;type&nbsp;int32.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3120656">return</span>&nbsp;<span class="builtintype" id="3120663">false</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3120670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3120673">for</span>&nbsp;<span class="ident" id="3120677">_</span><span class="op" id="3120678">,</span>&nbsp;<span class="ident" id="3120680">x</span>&nbsp;<span class="op" id="3120682">:=</span>&nbsp;<span class="keyword" id="3120685">range</span>&nbsp;<span class="ident" id="3120691">slice</span>&nbsp;<span class="op" id="3120697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3120701">if</span>&nbsp;<span class="ident" id="3120704">x</span>&nbsp;<span class="op" id="3120706">!=</span>&nbsp;<span class="num" id="3120709">0</span>&nbsp;<span class="op" id="3120711">||</span>&nbsp;<span class="ident" id="3120714">state</span><span class="op" id="3120719">.</span><span class="ident" id="3120720">sendZero</span>&nbsp;<span class="op" id="3120729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3120734">state</span><span class="op" id="3120739">.</span><span class="ident" id="3120740">encodeInt</span><span class="op" id="3120749">(</span><span class="ident" id="3120750">int64</span><span class="op" id="3120755">(</span><span class="ident" id="3120756">x</span><span class="op" id="3120757">)</span><span class="op" id="3120758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3120762">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3120765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3120768">return</span>&nbsp;<span class="builtintype" id="3120775">true</span><br>
<span class="lineno"></span><span class="op" id="3120780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3120783">func</span>&nbsp;<span class="ident" id="3120788">encInt64Array</span><span class="op" id="3120801">(</span><span class="ident" id="3120802">state</span>&nbsp;<span class="op" id="3120808">*</span><span class="ident" id="3120809">encoderState</span><span class="op" id="3120821">,</span>&nbsp;<span class="ident" id="3120823">v</span>&nbsp;<span class="ident" id="3120825">reflect</span><span class="op" id="3120832">.</span><span class="ident" id="3120833">Value</span><span class="op" id="3120838">)</span>&nbsp;<span class="builtintype" id="3120840">bool</span>&nbsp;<span class="op" id="3120845">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3120848">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3120889">if</span>&nbsp;<span class="op" id="3120892">!</span><span class="ident" id="3120893">v</span><span class="op" id="3120894">.</span><span class="ident" id="3120895">CanAddr</span><span class="op" id="3120902">(</span><span class="op" id="3120903">)</span>&nbsp;<span class="op" id="3120905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3120909">return</span>&nbsp;<span class="builtintype" id="3120916">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3120923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3120926">return</span>&nbsp;<span class="ident" id="3120933">encInt64Slice</span><span class="op" id="3120946">(</span><span class="ident" id="3120947">state</span><span class="op" id="3120952">,</span>&nbsp;<span class="ident" id="3120954">v</span><span class="op" id="3120955">.</span><span class="ident" id="3120956">Slice</span><span class="op" id="3120961">(</span><span class="num" id="3120962">0</span><span class="op" id="3120963">,</span>&nbsp;<span class="ident" id="3120965">v</span><span class="op" id="3120966">.</span><span class="ident" id="3120967">Len</span><span class="op" id="3120970">(</span><span class="op" id="3120971">)</span><span class="op" id="3120972">)</span><span class="op" id="3120973">)</span><br>
<span class="lineno">245</span><span class="op" id="3120975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3120978">func</span>&nbsp;<span class="ident" id="3120983">encInt64Slice</span><span class="op" id="3120996">(</span><span class="ident" id="3120997">state</span>&nbsp;<span class="op" id="3121003">*</span><span class="ident" id="3121004">encoderState</span><span class="op" id="3121016">,</span>&nbsp;<span class="ident" id="3121018">v</span>&nbsp;<span class="ident" id="3121020">reflect</span><span class="op" id="3121027">.</span><span class="ident" id="3121028">Value</span><span class="op" id="3121033">)</span>&nbsp;<span class="builtintype" id="3121035">bool</span>&nbsp;<span class="op" id="3121040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3121043">slice</span><span class="op" id="3121048">,</span>&nbsp;<span class="ident" id="3121050">ok</span>&nbsp;<span class="op" id="3121053">:=</span>&nbsp;<span class="ident" id="3121056">v</span><span class="op" id="3121057">.</span><span class="ident" id="3121058">Interface</span><span class="op" id="3121067">(</span><span class="op" id="3121068">)</span><span class="op" id="3121069">.</span><span class="op" id="3121070">(</span><span class="op" id="3121071">[</span><span class="op" id="3121072">]</span><span class="ident" id="3121073">int64</span><span class="op" id="3121078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3121081">if</span>&nbsp;<span class="op" id="3121084">!</span><span class="ident" id="3121085">ok</span>&nbsp;<span class="op" id="3121088">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3121092">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int64&nbsp;but&nbsp;not&nbsp;type&nbsp;int64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3121169">return</span>&nbsp;<span class="builtintype" id="3121176">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3121183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3121186">for</span>&nbsp;<span class="ident" id="3121190">_</span><span class="op" id="3121191">,</span>&nbsp;<span class="ident" id="3121193">x</span>&nbsp;<span class="op" id="3121195">:=</span>&nbsp;<span class="keyword" id="3121198">range</span>&nbsp;<span class="ident" id="3121204">slice</span>&nbsp;<span class="op" id="3121210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3121214">if</span>&nbsp;<span class="ident" id="3121217">x</span>&nbsp;<span class="op" id="3121219">!=</span>&nbsp;<span class="num" id="3121222">0</span>&nbsp;<span class="op" id="3121224">||</span>&nbsp;<span class="ident" id="3121227">state</span><span class="op" id="3121232">.</span><span class="ident" id="3121233">sendZero</span>&nbsp;<span class="op" id="3121242">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3121247">state</span><span class="op" id="3121252">.</span><span class="ident" id="3121253">encodeInt</span><span class="op" id="3121262">(</span><span class="ident" id="3121263">x</span><span class="op" id="3121264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3121268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3121271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3121274">return</span>&nbsp;<span class="builtintype" id="3121281">true</span><br>
<span class="lineno"></span><span class="op" id="3121286">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="3121289">func</span>&nbsp;<span class="ident" id="3121294">encInt8Array</span><span class="op" id="3121306">(</span><span class="ident" id="3121307">state</span>&nbsp;<span class="op" id="3121313">*</span><span class="ident" id="3121314">encoderState</span><span class="op" id="3121326">,</span>&nbsp;<span class="ident" id="3121328">v</span>&nbsp;<span class="ident" id="3121330">reflect</span><span class="op" id="3121337">.</span><span class="ident" id="3121338">Value</span><span class="op" id="3121343">)</span>&nbsp;<span class="builtintype" id="3121345">bool</span>&nbsp;<span class="op" id="3121350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3121353">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3121394">if</span>&nbsp;<span class="op" id="3121397">!</span><span class="ident" id="3121398">v</span><span class="op" id="3121399">.</span><span class="ident" id="3121400">CanAddr</span><span class="op" id="3121407">(</span><span class="op" id="3121408">)</span>&nbsp;<span class="op" id="3121410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3121414">return</span>&nbsp;<span class="builtintype" id="3121421">false</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3121428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3121431">return</span>&nbsp;<span class="ident" id="3121438">encInt8Slice</span><span class="op" id="3121450">(</span><span class="ident" id="3121451">state</span><span class="op" id="3121456">,</span>&nbsp;<span class="ident" id="3121458">v</span><span class="op" id="3121459">.</span><span class="ident" id="3121460">Slice</span><span class="op" id="3121465">(</span><span class="num" id="3121466">0</span><span class="op" id="3121467">,</span>&nbsp;<span class="ident" id="3121469">v</span><span class="op" id="3121470">.</span><span class="ident" id="3121471">Len</span><span class="op" id="3121474">(</span><span class="op" id="3121475">)</span><span class="op" id="3121476">)</span><span class="op" id="3121477">)</span><br>
<span class="lineno"></span><span class="op" id="3121479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3121482">func</span>&nbsp;<span class="ident" id="3121487">encInt8Slice</span><span class="op" id="3121499">(</span><span class="ident" id="3121500">state</span>&nbsp;<span class="op" id="3121506">*</span><span class="ident" id="3121507">encoderState</span><span class="op" id="3121519">,</span>&nbsp;<span class="ident" id="3121521">v</span>&nbsp;<span class="ident" id="3121523">reflect</span><span class="op" id="3121530">.</span><span class="ident" id="3121531">Value</span><span class="op" id="3121536">)</span>&nbsp;<span class="builtintype" id="3121538">bool</span>&nbsp;<span class="op" id="3121543">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3121546">slice</span><span class="op" id="3121551">,</span>&nbsp;<span class="ident" id="3121553">ok</span>&nbsp;<span class="op" id="3121556">:=</span>&nbsp;<span class="ident" id="3121559">v</span><span class="op" id="3121560">.</span><span class="ident" id="3121561">Interface</span><span class="op" id="3121570">(</span><span class="op" id="3121571">)</span><span class="op" id="3121572">.</span><span class="op" id="3121573">(</span><span class="op" id="3121574">[</span><span class="op" id="3121575">]</span><span class="builtintype" id="3121576">int8</span><span class="op" id="3121580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3121583">if</span>&nbsp;<span class="op" id="3121586">!</span><span class="ident" id="3121587">ok</span>&nbsp;<span class="op" id="3121590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3121594">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int8&nbsp;but&nbsp;not&nbsp;type&nbsp;int8.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3121669">return</span>&nbsp;<span class="builtintype" id="3121676">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3121683">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3121686">for</span>&nbsp;<span class="ident" id="3121690">_</span><span class="op" id="3121691">,</span>&nbsp;<span class="ident" id="3121693">x</span>&nbsp;<span class="op" id="3121695">:=</span>&nbsp;<span class="keyword" id="3121698">range</span>&nbsp;<span class="ident" id="3121704">slice</span>&nbsp;<span class="op" id="3121710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3121714">if</span>&nbsp;<span class="ident" id="3121717">x</span>&nbsp;<span class="op" id="3121719">!=</span>&nbsp;<span class="num" id="3121722">0</span>&nbsp;<span class="op" id="3121724">||</span>&nbsp;<span class="ident" id="3121727">state</span><span class="op" id="3121732">.</span><span class="ident" id="3121733">sendZero</span>&nbsp;<span class="op" id="3121742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3121747">state</span><span class="op" id="3121752">.</span><span class="ident" id="3121753">encodeInt</span><span class="op" id="3121762">(</span><span class="ident" id="3121763">int64</span><span class="op" id="3121768">(</span><span class="ident" id="3121769">x</span><span class="op" id="3121770">)</span><span class="op" id="3121771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3121775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3121778">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3121781">return</span>&nbsp;<span class="builtintype" id="3121788">true</span><br>
<span class="lineno"></span><span class="op" id="3121793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3121796">func</span>&nbsp;<span class="ident" id="3121801">encStringArray</span><span class="op" id="3121815">(</span><span class="ident" id="3121816">state</span>&nbsp;<span class="op" id="3121822">*</span><span class="ident" id="3121823">encoderState</span><span class="op" id="3121835">,</span>&nbsp;<span class="ident" id="3121837">v</span>&nbsp;<span class="ident" id="3121839">reflect</span><span class="op" id="3121846">.</span><span class="ident" id="3121847">Value</span><span class="op" id="3121852">)</span>&nbsp;<span class="builtintype" id="3121854">bool</span>&nbsp;<span class="op" id="3121859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3121862">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3121903">if</span>&nbsp;<span class="op" id="3121906">!</span><span class="ident" id="3121907">v</span><span class="op" id="3121908">.</span><span class="ident" id="3121909">CanAddr</span><span class="op" id="3121916">(</span><span class="op" id="3121917">)</span>&nbsp;<span class="op" id="3121919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3121923">return</span>&nbsp;<span class="builtintype" id="3121930">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3121937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3121940">return</span>&nbsp;<span class="ident" id="3121947">encStringSlice</span><span class="op" id="3121961">(</span><span class="ident" id="3121962">state</span><span class="op" id="3121967">,</span>&nbsp;<span class="ident" id="3121969">v</span><span class="op" id="3121970">.</span><span class="ident" id="3121971">Slice</span><span class="op" id="3121976">(</span><span class="num" id="3121977">0</span><span class="op" id="3121978">,</span>&nbsp;<span class="ident" id="3121980">v</span><span class="op" id="3121981">.</span><span class="ident" id="3121982">Len</span><span class="op" id="3121985">(</span><span class="op" id="3121986">)</span><span class="op" id="3121987">)</span><span class="op" id="3121988">)</span><br>
<span class="lineno"></span><span class="op" id="3121990">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="3121993">func</span>&nbsp;<span class="ident" id="3121998">encStringSlice</span><span class="op" id="3122012">(</span><span class="ident" id="3122013">state</span>&nbsp;<span class="op" id="3122019">*</span><span class="ident" id="3122020">encoderState</span><span class="op" id="3122032">,</span>&nbsp;<span class="ident" id="3122034">v</span>&nbsp;<span class="ident" id="3122036">reflect</span><span class="op" id="3122043">.</span><span class="ident" id="3122044">Value</span><span class="op" id="3122049">)</span>&nbsp;<span class="builtintype" id="3122051">bool</span>&nbsp;<span class="op" id="3122056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3122059">slice</span><span class="op" id="3122064">,</span>&nbsp;<span class="ident" id="3122066">ok</span>&nbsp;<span class="op" id="3122069">:=</span>&nbsp;<span class="ident" id="3122072">v</span><span class="op" id="3122073">.</span><span class="ident" id="3122074">Interface</span><span class="op" id="3122083">(</span><span class="op" id="3122084">)</span><span class="op" id="3122085">.</span><span class="op" id="3122086">(</span><span class="op" id="3122087">[</span><span class="op" id="3122088">]</span><span class="builtintype" id="3122089">string</span><span class="op" id="3122095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3122098">if</span>&nbsp;<span class="op" id="3122101">!</span><span class="ident" id="3122102">ok</span>&nbsp;<span class="op" id="3122105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3122109">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;string&nbsp;but&nbsp;not&nbsp;type&nbsp;string.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3122188">return</span>&nbsp;<span class="builtintype" id="3122195">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3122202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3122205">for</span>&nbsp;<span class="ident" id="3122209">_</span><span class="op" id="3122210">,</span>&nbsp;<span class="ident" id="3122212">x</span>&nbsp;<span class="op" id="3122214">:=</span>&nbsp;<span class="keyword" id="3122217">range</span>&nbsp;<span class="ident" id="3122223">slice</span>&nbsp;<span class="op" id="3122229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3122233">if</span>&nbsp;<span class="ident" id="3122236">x</span>&nbsp;<span class="op" id="3122238">!=</span>&nbsp;<span class="string" id="3122241">&#34;&#34;</span>&nbsp;<span class="op" id="3122244">||</span>&nbsp;<span class="ident" id="3122247">state</span><span class="op" id="3122252">.</span><span class="ident" id="3122253">sendZero</span>&nbsp;<span class="op" id="3122262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3122267">state</span><span class="op" id="3122272">.</span><span class="ident" id="3122273">encodeUint</span><span class="op" id="3122283">(</span><span class="ident" id="3122284">uint64</span><span class="op" id="3122290">(</span><span class="builtinfunc" id="3122291">len</span><span class="op" id="3122294">(</span><span class="ident" id="3122295">x</span><span class="op" id="3122296">)</span><span class="op" id="3122297">)</span><span class="op" id="3122298">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3122303">state</span><span class="op" id="3122308">.</span><span class="ident" id="3122309">b</span><span class="op" id="3122310">.</span><span class="ident" id="3122311">WriteString</span><span class="op" id="3122322">(</span><span class="ident" id="3122323">x</span><span class="op" id="3122324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3122328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3122331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3122334">return</span>&nbsp;<span class="builtintype" id="3122341">true</span><br>
<span class="lineno"></span><span class="op" id="3122346">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span><span class="keyword" id="3122349">func</span>&nbsp;<span class="ident" id="3122354">encUintArray</span><span class="op" id="3122366">(</span><span class="ident" id="3122367">state</span>&nbsp;<span class="op" id="3122373">*</span><span class="ident" id="3122374">encoderState</span><span class="op" id="3122386">,</span>&nbsp;<span class="ident" id="3122388">v</span>&nbsp;<span class="ident" id="3122390">reflect</span><span class="op" id="3122397">.</span><span class="ident" id="3122398">Value</span><span class="op" id="3122403">)</span>&nbsp;<span class="builtintype" id="3122405">bool</span>&nbsp;<span class="op" id="3122410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3122413">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3122454">if</span>&nbsp;<span class="op" id="3122457">!</span><span class="ident" id="3122458">v</span><span class="op" id="3122459">.</span><span class="ident" id="3122460">CanAddr</span><span class="op" id="3122467">(</span><span class="op" id="3122468">)</span>&nbsp;<span class="op" id="3122470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3122474">return</span>&nbsp;<span class="builtintype" id="3122481">false</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3122488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3122491">return</span>&nbsp;<span class="ident" id="3122498">encUintSlice</span><span class="op" id="3122510">(</span><span class="ident" id="3122511">state</span><span class="op" id="3122516">,</span>&nbsp;<span class="ident" id="3122518">v</span><span class="op" id="3122519">.</span><span class="ident" id="3122520">Slice</span><span class="op" id="3122525">(</span><span class="num" id="3122526">0</span><span class="op" id="3122527">,</span>&nbsp;<span class="ident" id="3122529">v</span><span class="op" id="3122530">.</span><span class="ident" id="3122531">Len</span><span class="op" id="3122534">(</span><span class="op" id="3122535">)</span><span class="op" id="3122536">)</span><span class="op" id="3122537">)</span><br>
<span class="lineno"></span><span class="op" id="3122539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3122542">func</span>&nbsp;<span class="ident" id="3122547">encUintSlice</span><span class="op" id="3122559">(</span><span class="ident" id="3122560">state</span>&nbsp;<span class="op" id="3122566">*</span><span class="ident" id="3122567">encoderState</span><span class="op" id="3122579">,</span>&nbsp;<span class="ident" id="3122581">v</span>&nbsp;<span class="ident" id="3122583">reflect</span><span class="op" id="3122590">.</span><span class="ident" id="3122591">Value</span><span class="op" id="3122596">)</span>&nbsp;<span class="builtintype" id="3122598">bool</span>&nbsp;<span class="op" id="3122603">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3122606">slice</span><span class="op" id="3122611">,</span>&nbsp;<span class="ident" id="3122613">ok</span>&nbsp;<span class="op" id="3122616">:=</span>&nbsp;<span class="ident" id="3122619">v</span><span class="op" id="3122620">.</span><span class="ident" id="3122621">Interface</span><span class="op" id="3122630">(</span><span class="op" id="3122631">)</span><span class="op" id="3122632">.</span><span class="op" id="3122633">(</span><span class="op" id="3122634">[</span><span class="op" id="3122635">]</span><span class="builtintype" id="3122636">uint</span><span class="op" id="3122640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3122643">if</span>&nbsp;<span class="op" id="3122646">!</span><span class="ident" id="3122647">ok</span>&nbsp;<span class="op" id="3122650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3122654">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint&nbsp;but&nbsp;not&nbsp;type&nbsp;uint.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3122729">return</span>&nbsp;<span class="builtintype" id="3122736">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3122743">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3122746">for</span>&nbsp;<span class="ident" id="3122750">_</span><span class="op" id="3122751">,</span>&nbsp;<span class="ident" id="3122753">x</span>&nbsp;<span class="op" id="3122755">:=</span>&nbsp;<span class="keyword" id="3122758">range</span>&nbsp;<span class="ident" id="3122764">slice</span>&nbsp;<span class="op" id="3122770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3122774">if</span>&nbsp;<span class="ident" id="3122777">x</span>&nbsp;<span class="op" id="3122779">!=</span>&nbsp;<span class="num" id="3122782">0</span>&nbsp;<span class="op" id="3122784">||</span>&nbsp;<span class="ident" id="3122787">state</span><span class="op" id="3122792">.</span><span class="ident" id="3122793">sendZero</span>&nbsp;<span class="op" id="3122802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3122807">state</span><span class="op" id="3122812">.</span><span class="ident" id="3122813">encodeUint</span><span class="op" id="3122823">(</span><span class="ident" id="3122824">uint64</span><span class="op" id="3122830">(</span><span class="ident" id="3122831">x</span><span class="op" id="3122832">)</span><span class="op" id="3122833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3122837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3122840">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3122843">return</span>&nbsp;<span class="builtintype" id="3122850">true</span><br>
<span class="lineno"></span><span class="op" id="3122855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3122858">func</span>&nbsp;<span class="ident" id="3122863">encUint16Array</span><span class="op" id="3122877">(</span><span class="ident" id="3122878">state</span>&nbsp;<span class="op" id="3122884">*</span><span class="ident" id="3122885">encoderState</span><span class="op" id="3122897">,</span>&nbsp;<span class="ident" id="3122899">v</span>&nbsp;<span class="ident" id="3122901">reflect</span><span class="op" id="3122908">.</span><span class="ident" id="3122909">Value</span><span class="op" id="3122914">)</span>&nbsp;<span class="builtintype" id="3122916">bool</span>&nbsp;<span class="op" id="3122921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3122924">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3122965">if</span>&nbsp;<span class="op" id="3122968">!</span><span class="ident" id="3122969">v</span><span class="op" id="3122970">.</span><span class="ident" id="3122971">CanAddr</span><span class="op" id="3122978">(</span><span class="op" id="3122979">)</span>&nbsp;<span class="op" id="3122981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3122985">return</span>&nbsp;<span class="builtintype" id="3122992">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3122999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3123002">return</span>&nbsp;<span class="ident" id="3123009">encUint16Slice</span><span class="op" id="3123023">(</span><span class="ident" id="3123024">state</span><span class="op" id="3123029">,</span>&nbsp;<span class="ident" id="3123031">v</span><span class="op" id="3123032">.</span><span class="ident" id="3123033">Slice</span><span class="op" id="3123038">(</span><span class="num" id="3123039">0</span><span class="op" id="3123040">,</span>&nbsp;<span class="ident" id="3123042">v</span><span class="op" id="3123043">.</span><span class="ident" id="3123044">Len</span><span class="op" id="3123047">(</span><span class="op" id="3123048">)</span><span class="op" id="3123049">)</span><span class="op" id="3123050">)</span><br>
<span class="lineno"></span><span class="op" id="3123052">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="keyword" id="3123055">func</span>&nbsp;<span class="ident" id="3123060">encUint16Slice</span><span class="op" id="3123074">(</span><span class="ident" id="3123075">state</span>&nbsp;<span class="op" id="3123081">*</span><span class="ident" id="3123082">encoderState</span><span class="op" id="3123094">,</span>&nbsp;<span class="ident" id="3123096">v</span>&nbsp;<span class="ident" id="3123098">reflect</span><span class="op" id="3123105">.</span><span class="ident" id="3123106">Value</span><span class="op" id="3123111">)</span>&nbsp;<span class="builtintype" id="3123113">bool</span>&nbsp;<span class="op" id="3123118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3123121">slice</span><span class="op" id="3123126">,</span>&nbsp;<span class="ident" id="3123128">ok</span>&nbsp;<span class="op" id="3123131">:=</span>&nbsp;<span class="ident" id="3123134">v</span><span class="op" id="3123135">.</span><span class="ident" id="3123136">Interface</span><span class="op" id="3123145">(</span><span class="op" id="3123146">)</span><span class="op" id="3123147">.</span><span class="op" id="3123148">(</span><span class="op" id="3123149">[</span><span class="op" id="3123150">]</span><span class="builtintype" id="3123151">uint16</span><span class="op" id="3123157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3123160">if</span>&nbsp;<span class="op" id="3123163">!</span><span class="ident" id="3123164">ok</span>&nbsp;<span class="op" id="3123167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3123171">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint16&nbsp;but&nbsp;not&nbsp;type&nbsp;uint16.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3123250">return</span>&nbsp;<span class="builtintype" id="3123257">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3123264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3123267">for</span>&nbsp;<span class="ident" id="3123271">_</span><span class="op" id="3123272">,</span>&nbsp;<span class="ident" id="3123274">x</span>&nbsp;<span class="op" id="3123276">:=</span>&nbsp;<span class="keyword" id="3123279">range</span>&nbsp;<span class="ident" id="3123285">slice</span>&nbsp;<span class="op" id="3123291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3123295">if</span>&nbsp;<span class="ident" id="3123298">x</span>&nbsp;<span class="op" id="3123300">!=</span>&nbsp;<span class="num" id="3123303">0</span>&nbsp;<span class="op" id="3123305">||</span>&nbsp;<span class="ident" id="3123308">state</span><span class="op" id="3123313">.</span><span class="ident" id="3123314">sendZero</span>&nbsp;<span class="op" id="3123323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3123328">state</span><span class="op" id="3123333">.</span><span class="ident" id="3123334">encodeUint</span><span class="op" id="3123344">(</span><span class="ident" id="3123345">uint64</span><span class="op" id="3123351">(</span><span class="ident" id="3123352">x</span><span class="op" id="3123353">)</span><span class="op" id="3123354">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3123358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3123361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3123364">return</span>&nbsp;<span class="builtintype" id="3123371">true</span><br>
<span class="lineno"></span><span class="op" id="3123376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span><span class="keyword" id="3123379">func</span>&nbsp;<span class="ident" id="3123384">encUint32Array</span><span class="op" id="3123398">(</span><span class="ident" id="3123399">state</span>&nbsp;<span class="op" id="3123405">*</span><span class="ident" id="3123406">encoderState</span><span class="op" id="3123418">,</span>&nbsp;<span class="ident" id="3123420">v</span>&nbsp;<span class="ident" id="3123422">reflect</span><span class="op" id="3123429">.</span><span class="ident" id="3123430">Value</span><span class="op" id="3123435">)</span>&nbsp;<span class="builtintype" id="3123437">bool</span>&nbsp;<span class="op" id="3123442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3123445">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3123486">if</span>&nbsp;<span class="op" id="3123489">!</span><span class="ident" id="3123490">v</span><span class="op" id="3123491">.</span><span class="ident" id="3123492">CanAddr</span><span class="op" id="3123499">(</span><span class="op" id="3123500">)</span>&nbsp;<span class="op" id="3123502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3123506">return</span>&nbsp;<span class="builtintype" id="3123513">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3123520">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3123523">return</span>&nbsp;<span class="ident" id="3123530">encUint32Slice</span><span class="op" id="3123544">(</span><span class="ident" id="3123545">state</span><span class="op" id="3123550">,</span>&nbsp;<span class="ident" id="3123552">v</span><span class="op" id="3123553">.</span><span class="ident" id="3123554">Slice</span><span class="op" id="3123559">(</span><span class="num" id="3123560">0</span><span class="op" id="3123561">,</span>&nbsp;<span class="ident" id="3123563">v</span><span class="op" id="3123564">.</span><span class="ident" id="3123565">Len</span><span class="op" id="3123568">(</span><span class="op" id="3123569">)</span><span class="op" id="3123570">)</span><span class="op" id="3123571">)</span><br>
<span class="lineno"></span><span class="op" id="3123573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3123576">func</span>&nbsp;<span class="ident" id="3123581">encUint32Slice</span><span class="op" id="3123595">(</span><span class="ident" id="3123596">state</span>&nbsp;<span class="op" id="3123602">*</span><span class="ident" id="3123603">encoderState</span><span class="op" id="3123615">,</span>&nbsp;<span class="ident" id="3123617">v</span>&nbsp;<span class="ident" id="3123619">reflect</span><span class="op" id="3123626">.</span><span class="ident" id="3123627">Value</span><span class="op" id="3123632">)</span>&nbsp;<span class="builtintype" id="3123634">bool</span>&nbsp;<span class="op" id="3123639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3123642">slice</span><span class="op" id="3123647">,</span>&nbsp;<span class="ident" id="3123649">ok</span>&nbsp;<span class="op" id="3123652">:=</span>&nbsp;<span class="ident" id="3123655">v</span><span class="op" id="3123656">.</span><span class="ident" id="3123657">Interface</span><span class="op" id="3123666">(</span><span class="op" id="3123667">)</span><span class="op" id="3123668">.</span><span class="op" id="3123669">(</span><span class="op" id="3123670">[</span><span class="op" id="3123671">]</span><span class="builtintype" id="3123672">uint32</span><span class="op" id="3123678">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3123681">if</span>&nbsp;<span class="op" id="3123684">!</span><span class="ident" id="3123685">ok</span>&nbsp;<span class="op" id="3123688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3123692">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint32&nbsp;but&nbsp;not&nbsp;type&nbsp;uint32.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3123771">return</span>&nbsp;<span class="builtintype" id="3123778">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3123785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3123788">for</span>&nbsp;<span class="ident" id="3123792">_</span><span class="op" id="3123793">,</span>&nbsp;<span class="ident" id="3123795">x</span>&nbsp;<span class="op" id="3123797">:=</span>&nbsp;<span class="keyword" id="3123800">range</span>&nbsp;<span class="ident" id="3123806">slice</span>&nbsp;<span class="op" id="3123812">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3123816">if</span>&nbsp;<span class="ident" id="3123819">x</span>&nbsp;<span class="op" id="3123821">!=</span>&nbsp;<span class="num" id="3123824">0</span>&nbsp;<span class="op" id="3123826">||</span>&nbsp;<span class="ident" id="3123829">state</span><span class="op" id="3123834">.</span><span class="ident" id="3123835">sendZero</span>&nbsp;<span class="op" id="3123844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3123849">state</span><span class="op" id="3123854">.</span><span class="ident" id="3123855">encodeUint</span><span class="op" id="3123865">(</span><span class="ident" id="3123866">uint64</span><span class="op" id="3123872">(</span><span class="ident" id="3123873">x</span><span class="op" id="3123874">)</span><span class="op" id="3123875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3123879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3123882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3123885">return</span>&nbsp;<span class="builtintype" id="3123892">true</span><br>
<span class="lineno">370</span><span class="op" id="3123897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3123900">func</span>&nbsp;<span class="ident" id="3123905">encUint64Array</span><span class="op" id="3123919">(</span><span class="ident" id="3123920">state</span>&nbsp;<span class="op" id="3123926">*</span><span class="ident" id="3123927">encoderState</span><span class="op" id="3123939">,</span>&nbsp;<span class="ident" id="3123941">v</span>&nbsp;<span class="ident" id="3123943">reflect</span><span class="op" id="3123950">.</span><span class="ident" id="3123951">Value</span><span class="op" id="3123956">)</span>&nbsp;<span class="builtintype" id="3123958">bool</span>&nbsp;<span class="op" id="3123963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3123966">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3124007">if</span>&nbsp;<span class="op" id="3124010">!</span><span class="ident" id="3124011">v</span><span class="op" id="3124012">.</span><span class="ident" id="3124013">CanAddr</span><span class="op" id="3124020">(</span><span class="op" id="3124021">)</span>&nbsp;<span class="op" id="3124023">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3124027">return</span>&nbsp;<span class="builtintype" id="3124034">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3124041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3124044">return</span>&nbsp;<span class="ident" id="3124051">encUint64Slice</span><span class="op" id="3124065">(</span><span class="ident" id="3124066">state</span><span class="op" id="3124071">,</span>&nbsp;<span class="ident" id="3124073">v</span><span class="op" id="3124074">.</span><span class="ident" id="3124075">Slice</span><span class="op" id="3124080">(</span><span class="num" id="3124081">0</span><span class="op" id="3124082">,</span>&nbsp;<span class="ident" id="3124084">v</span><span class="op" id="3124085">.</span><span class="ident" id="3124086">Len</span><span class="op" id="3124089">(</span><span class="op" id="3124090">)</span><span class="op" id="3124091">)</span><span class="op" id="3124092">)</span><br>
<span class="lineno"></span><span class="op" id="3124094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="keyword" id="3124097">func</span>&nbsp;<span class="ident" id="3124102">encUint64Slice</span><span class="op" id="3124116">(</span><span class="ident" id="3124117">state</span>&nbsp;<span class="op" id="3124123">*</span><span class="ident" id="3124124">encoderState</span><span class="op" id="3124136">,</span>&nbsp;<span class="ident" id="3124138">v</span>&nbsp;<span class="ident" id="3124140">reflect</span><span class="op" id="3124147">.</span><span class="ident" id="3124148">Value</span><span class="op" id="3124153">)</span>&nbsp;<span class="builtintype" id="3124155">bool</span>&nbsp;<span class="op" id="3124160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3124163">slice</span><span class="op" id="3124168">,</span>&nbsp;<span class="ident" id="3124170">ok</span>&nbsp;<span class="op" id="3124173">:=</span>&nbsp;<span class="ident" id="3124176">v</span><span class="op" id="3124177">.</span><span class="ident" id="3124178">Interface</span><span class="op" id="3124187">(</span><span class="op" id="3124188">)</span><span class="op" id="3124189">.</span><span class="op" id="3124190">(</span><span class="op" id="3124191">[</span><span class="op" id="3124192">]</span><span class="ident" id="3124193">uint64</span><span class="op" id="3124199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3124202">if</span>&nbsp;<span class="op" id="3124205">!</span><span class="ident" id="3124206">ok</span>&nbsp;<span class="op" id="3124209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3124213">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint64&nbsp;but&nbsp;not&nbsp;type&nbsp;uint64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3124292">return</span>&nbsp;<span class="builtintype" id="3124299">false</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3124306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3124309">for</span>&nbsp;<span class="ident" id="3124313">_</span><span class="op" id="3124314">,</span>&nbsp;<span class="ident" id="3124316">x</span>&nbsp;<span class="op" id="3124318">:=</span>&nbsp;<span class="keyword" id="3124321">range</span>&nbsp;<span class="ident" id="3124327">slice</span>&nbsp;<span class="op" id="3124333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3124337">if</span>&nbsp;<span class="ident" id="3124340">x</span>&nbsp;<span class="op" id="3124342">!=</span>&nbsp;<span class="num" id="3124345">0</span>&nbsp;<span class="op" id="3124347">||</span>&nbsp;<span class="ident" id="3124350">state</span><span class="op" id="3124355">.</span><span class="ident" id="3124356">sendZero</span>&nbsp;<span class="op" id="3124365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3124370">state</span><span class="op" id="3124375">.</span><span class="ident" id="3124376">encodeUint</span><span class="op" id="3124386">(</span><span class="ident" id="3124387">x</span><span class="op" id="3124388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3124392">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3124395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3124398">return</span>&nbsp;<span class="builtintype" id="3124405">true</span><br>
<span class="lineno"></span><span class="op" id="3124410">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3124413">func</span>&nbsp;<span class="ident" id="3124418">encUintptrArray</span><span class="op" id="3124433">(</span><span class="ident" id="3124434">state</span>&nbsp;<span class="op" id="3124440">*</span><span class="ident" id="3124441">encoderState</span><span class="op" id="3124453">,</span>&nbsp;<span class="ident" id="3124455">v</span>&nbsp;<span class="ident" id="3124457">reflect</span><span class="op" id="3124464">.</span><span class="ident" id="3124465">Value</span><span class="op" id="3124470">)</span>&nbsp;<span class="builtintype" id="3124472">bool</span>&nbsp;<span class="op" id="3124477">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3124480">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3124521">if</span>&nbsp;<span class="op" id="3124524">!</span><span class="ident" id="3124525">v</span><span class="op" id="3124526">.</span><span class="ident" id="3124527">CanAddr</span><span class="op" id="3124534">(</span><span class="op" id="3124535">)</span>&nbsp;<span class="op" id="3124537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3124541">return</span>&nbsp;<span class="builtintype" id="3124548">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3124555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3124558">return</span>&nbsp;<span class="ident" id="3124565">encUintptrSlice</span><span class="op" id="3124580">(</span><span class="ident" id="3124581">state</span><span class="op" id="3124586">,</span>&nbsp;<span class="ident" id="3124588">v</span><span class="op" id="3124589">.</span><span class="ident" id="3124590">Slice</span><span class="op" id="3124595">(</span><span class="num" id="3124596">0</span><span class="op" id="3124597">,</span>&nbsp;<span class="ident" id="3124599">v</span><span class="op" id="3124600">.</span><span class="ident" id="3124601">Len</span><span class="op" id="3124604">(</span><span class="op" id="3124605">)</span><span class="op" id="3124606">)</span><span class="op" id="3124607">)</span><br>
<span class="lineno">400</span><span class="op" id="3124609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3124612">func</span>&nbsp;<span class="ident" id="3124617">encUintptrSlice</span><span class="op" id="3124632">(</span><span class="ident" id="3124633">state</span>&nbsp;<span class="op" id="3124639">*</span><span class="ident" id="3124640">encoderState</span><span class="op" id="3124652">,</span>&nbsp;<span class="ident" id="3124654">v</span>&nbsp;<span class="ident" id="3124656">reflect</span><span class="op" id="3124663">.</span><span class="ident" id="3124664">Value</span><span class="op" id="3124669">)</span>&nbsp;<span class="builtintype" id="3124671">bool</span>&nbsp;<span class="op" id="3124676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3124679">slice</span><span class="op" id="3124684">,</span>&nbsp;<span class="ident" id="3124686">ok</span>&nbsp;<span class="op" id="3124689">:=</span>&nbsp;<span class="ident" id="3124692">v</span><span class="op" id="3124693">.</span><span class="ident" id="3124694">Interface</span><span class="op" id="3124703">(</span><span class="op" id="3124704">)</span><span class="op" id="3124705">.</span><span class="op" id="3124706">(</span><span class="op" id="3124707">[</span><span class="op" id="3124708">]</span><span class="builtintype" id="3124709">uintptr</span><span class="op" id="3124716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3124719">if</span>&nbsp;<span class="op" id="3124722">!</span><span class="ident" id="3124723">ok</span>&nbsp;<span class="op" id="3124726">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3124730">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uintptr&nbsp;but&nbsp;not&nbsp;type&nbsp;uintptr.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3124811">return</span>&nbsp;<span class="builtintype" id="3124818">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3124825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3124828">for</span>&nbsp;<span class="ident" id="3124832">_</span><span class="op" id="3124833">,</span>&nbsp;<span class="ident" id="3124835">x</span>&nbsp;<span class="op" id="3124837">:=</span>&nbsp;<span class="keyword" id="3124840">range</span>&nbsp;<span class="ident" id="3124846">slice</span>&nbsp;<span class="op" id="3124852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3124856">if</span>&nbsp;<span class="ident" id="3124859">x</span>&nbsp;<span class="op" id="3124861">!=</span>&nbsp;<span class="num" id="3124864">0</span>&nbsp;<span class="op" id="3124866">||</span>&nbsp;<span class="ident" id="3124869">state</span><span class="op" id="3124874">.</span><span class="ident" id="3124875">sendZero</span>&nbsp;<span class="op" id="3124884">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3124889">state</span><span class="op" id="3124894">.</span><span class="ident" id="3124895">encodeUint</span><span class="op" id="3124905">(</span><span class="ident" id="3124906">uint64</span><span class="op" id="3124912">(</span><span class="ident" id="3124913">x</span><span class="op" id="3124914">)</span><span class="op" id="3124915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3124919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3124922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3124925">return</span>&nbsp;<span class="builtintype" id="3124932">true</span><br>
<span class="lineno"></span><span class="op" id="3124937">}</span>
</div>
</body>
</html>
