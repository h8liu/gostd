<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html" class="current">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2543456">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2543511">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2543565">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2543616">//&nbsp;Package&nbsp;os&nbsp;provides&nbsp;a&nbsp;platform-independent&nbsp;interface&nbsp;to&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span><span class="comment" id="2543692">//&nbsp;functionality.&nbsp;The&nbsp;design&nbsp;is&nbsp;Unix-like,&nbsp;although&nbsp;the&nbsp;error&nbsp;handling&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2543766">//&nbsp;Go-like;&nbsp;failing&nbsp;calls&nbsp;return&nbsp;values&nbsp;of&nbsp;type&nbsp;error&nbsp;rather&nbsp;than&nbsp;error&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2543847">//&nbsp;Often,&nbsp;more&nbsp;information&nbsp;is&nbsp;available&nbsp;within&nbsp;the&nbsp;error.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="2543918">//&nbsp;if&nbsp;a&nbsp;call&nbsp;that&nbsp;takes&nbsp;a&nbsp;file&nbsp;name&nbsp;fails,&nbsp;such&nbsp;as&nbsp;Open&nbsp;or&nbsp;Stat,&nbsp;the&nbsp;error</span><br>
<span class="lineno">10</span><span class="comment" id="2543993">//&nbsp;will&nbsp;include&nbsp;the&nbsp;failing&nbsp;file&nbsp;name&nbsp;when&nbsp;printed&nbsp;and&nbsp;will&nbsp;be&nbsp;of&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="2544064">//&nbsp;*PathError,&nbsp;which&nbsp;may&nbsp;be&nbsp;unpacked&nbsp;for&nbsp;more&nbsp;information.</span><br>
<span class="lineno"></span><span class="comment" id="2544123">//</span><br>
<span class="lineno"></span><span class="comment" id="2544126">//&nbsp;The&nbsp;os&nbsp;interface&nbsp;is&nbsp;intended&nbsp;to&nbsp;be&nbsp;uniform&nbsp;across&nbsp;all&nbsp;operating&nbsp;systems.</span><br>
<span class="lineno"></span><span class="comment" id="2544202">//&nbsp;Features&nbsp;not&nbsp;generally&nbsp;available&nbsp;appear&nbsp;in&nbsp;the&nbsp;system-specific&nbsp;package&nbsp;syscall.</span><br>
<span class="lineno">15</span><span class="comment" id="2544285">//</span><br>
<span class="lineno"></span><span class="comment" id="2544288">//&nbsp;Here&nbsp;is&nbsp;a&nbsp;simple&nbsp;example,&nbsp;opening&nbsp;a&nbsp;file&nbsp;and&nbsp;reading&nbsp;some&nbsp;of&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="2544356">//</span><br>
<span class="lineno"></span><span class="comment" id="2544359">//&nbsp;&nbsp;&nbsp;&nbspfile,&nbsp;err&nbsp;:=&nbsp;os.Open(&#34;file.go&#34;)&nbsp;//&nbsp;For&nbsp;read&nbsp;access.</span><br>
<span class="lineno"></span><span class="comment" id="2544414">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno">20</span><span class="comment" id="2544433">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2544452">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="2544457">//</span><br>
<span class="lineno"></span><span class="comment" id="2544460">//&nbsp;If&nbsp;the&nbsp;open&nbsp;fails,&nbsp;the&nbsp;error&nbsp;string&nbsp;will&nbsp;be&nbsp;self-explanatory,&nbsp;like</span><br>
<span class="lineno"></span><span class="comment" id="2544530">//</span><br>
<span class="lineno">25</span><span class="comment" id="2544533">//&nbsp;&nbsp;&nbsp;&nbspopen&nbsp;file.go:&nbsp;no&nbsp;such&nbsp;file&nbsp;or&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="2544576">//</span><br>
<span class="lineno"></span><span class="comment" id="2544579">//&nbsp;The&nbsp;file&#39;s&nbsp;data&nbsp;can&nbsp;then&nbsp;be&nbsp;read&nbsp;into&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.&nbsp;Read&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2544647">//&nbsp;Write&nbsp;take&nbsp;their&nbsp;byte&nbsp;counts&nbsp;from&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;argument&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2544718">//</span><br>
<span class="lineno">30</span><span class="comment" id="2544721">//&nbsp;&nbsp;&nbsp;&nbspdata&nbsp;:=&nbsp;make([]byte,&nbsp;100)</span><br>
<span class="lineno"></span><span class="comment" id="2544750">//&nbsp;&nbsp;&nbsp;&nbspcount,&nbsp;err&nbsp;:=&nbsp;file.Read(data)</span><br>
<span class="lineno"></span><span class="comment" id="2544783">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2544802">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2544821">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno">35</span><span class="comment" id="2544826">//&nbsp;&nbsp;&nbsp;&nbspfmt.Printf(&#34;read&nbsp;%d&nbsp;bytes:&nbsp;%q\n&#34;,&nbsp;count,&nbsp;data[:count])</span><br>
<span class="lineno"></span><span class="comment" id="2544884">//</span><br>
<span class="lineno"></span><span class="keyword" id="2544887">package</span>&nbsp;<span class="ident" id="2544895">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2544899">import</span>&nbsp;<span class="op" id="2544906">(</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2544909">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2544915">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2544925">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2544928">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;as&nbsp;presented&nbsp;to&nbsp;Open.</span><br>
<span class="lineno">45</span><span class="keyword" id="2544987">func</span>&nbsp;<span class="op" id="2544992">(</span><span class="ident" id="2544993">f</span>&nbsp;<span class="op" id="2544995">*</span><span class="ident" id="2544996">File</span><span class="op" id="2545000">)</span>&nbsp;<span class="ident" id="2545002">Name</span><span class="op" id="2545006">(</span><span class="op" id="2545007">)</span>&nbsp;<span class="builtintype" id="2545009">string</span>&nbsp;<span class="op" id="2545016">{</span>&nbsp;<span class="keyword" id="2545018">return</span>&nbsp;<span class="ident" id="2545025">f</span><span class="op" id="2545026">.</span><span class="ident" id="2545027">name</span>&nbsp;<span class="op" id="2545032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2545035">//&nbsp;Stdin,&nbsp;Stdout,&nbsp;and&nbsp;Stderr&nbsp;are&nbsp;open&nbsp;Files&nbsp;pointing&nbsp;to&nbsp;the&nbsp;standard&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="2545111">//&nbsp;standard&nbsp;output,&nbsp;and&nbsp;standard&nbsp;error&nbsp;file&nbsp;descriptors.</span><br>
<span class="lineno"></span><span class="keyword" id="2545168">var</span>&nbsp;<span class="op" id="2545172">(</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545175">Stdin</span>&nbsp;&nbsp;<span class="op" id="2545182">=</span>&nbsp;<span class="ident" id="2545184">NewFile</span><span class="op" id="2545191">(</span><span class="builtintype" id="2545192">uintptr</span><span class="op" id="2545199">(</span><span class="ident" id="2545200">syscall</span><span class="op" id="2545207">.</span><span class="ident" id="2545208">Stdin</span><span class="op" id="2545213">)</span><span class="op" id="2545214">,</span>&nbsp;<span class="string" id="2545216">&#34;/dev/stdin&#34;</span><span class="op" id="2545228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545231">Stdout</span>&nbsp;<span class="op" id="2545238">=</span>&nbsp;<span class="ident" id="2545240">NewFile</span><span class="op" id="2545247">(</span><span class="builtintype" id="2545248">uintptr</span><span class="op" id="2545255">(</span><span class="ident" id="2545256">syscall</span><span class="op" id="2545263">.</span><span class="ident" id="2545264">Stdout</span><span class="op" id="2545270">)</span><span class="op" id="2545271">,</span>&nbsp;<span class="string" id="2545273">&#34;/dev/stdout&#34;</span><span class="op" id="2545286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545289">Stderr</span>&nbsp;<span class="op" id="2545296">=</span>&nbsp;<span class="ident" id="2545298">NewFile</span><span class="op" id="2545305">(</span><span class="builtintype" id="2545306">uintptr</span><span class="op" id="2545313">(</span><span class="ident" id="2545314">syscall</span><span class="op" id="2545321">.</span><span class="ident" id="2545322">Stderr</span><span class="op" id="2545328">)</span><span class="op" id="2545329">,</span>&nbsp;<span class="string" id="2545331">&#34;/dev/stderr&#34;</span><span class="op" id="2545344">)</span><br>
<span class="lineno"></span><span class="op" id="2545346">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="2545349">//&nbsp;Flags&nbsp;to&nbsp;Open&nbsp;wrapping&nbsp;those&nbsp;of&nbsp;the&nbsp;underlying&nbsp;system.&nbsp;Not&nbsp;all&nbsp;flags</span><br>
<span class="lineno"></span><span class="comment" id="2545421">//&nbsp;may&nbsp;be&nbsp;implemented&nbsp;on&nbsp;a&nbsp;given&nbsp;system.</span><br>
<span class="lineno"></span><span class="keyword" id="2545462">const</span>&nbsp;<span class="op" id="2545468">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545471">O_RDONLY</span>&nbsp;<span class="builtintype" id="2545480">int</span>&nbsp;<span class="op" id="2545484">=</span>&nbsp;<span class="ident" id="2545486">syscall</span><span class="op" id="2545493">.</span><span class="ident" id="2545494">O_RDONLY</span>&nbsp;<span class="comment" id="2545503">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545532">O_WRONLY</span>&nbsp;<span class="builtintype" id="2545541">int</span>&nbsp;<span class="op" id="2545545">=</span>&nbsp;<span class="ident" id="2545547">syscall</span><span class="op" id="2545554">.</span><span class="ident" id="2545555">O_WRONLY</span>&nbsp;<span class="comment" id="2545564">//&nbsp;open&nbsp;the&nbsp;file&nbsp;write-only.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545594">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2545603">int</span>&nbsp;<span class="op" id="2545607">=</span>&nbsp;<span class="ident" id="2545609">syscall</span><span class="op" id="2545616">.</span><span class="ident" id="2545617">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2545626">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-write.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545656">O_APPEND</span>&nbsp;<span class="builtintype" id="2545665">int</span>&nbsp;<span class="op" id="2545669">=</span>&nbsp;<span class="ident" id="2545671">syscall</span><span class="op" id="2545678">.</span><span class="ident" id="2545679">O_APPEND</span>&nbsp;<span class="comment" id="2545688">//&nbsp;append&nbsp;data&nbsp;to&nbsp;the&nbsp;file&nbsp;when&nbsp;writing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545730">O_CREATE</span>&nbsp;<span class="builtintype" id="2545739">int</span>&nbsp;<span class="op" id="2545743">=</span>&nbsp;<span class="ident" id="2545745">syscall</span><span class="op" id="2545752">.</span><span class="ident" id="2545753">O_CREAT</span>&nbsp;&nbsp;<span class="comment" id="2545762">//&nbsp;create&nbsp;a&nbsp;new&nbsp;file&nbsp;if&nbsp;none&nbsp;exists.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545800">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2545809">int</span>&nbsp;<span class="op" id="2545813">=</span>&nbsp;<span class="ident" id="2545815">syscall</span><span class="op" id="2545822">.</span><span class="ident" id="2545823">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2545832">//&nbsp;used&nbsp;with&nbsp;O_CREATE,&nbsp;file&nbsp;must&nbsp;not&nbsp;exist</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545876">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2545885">int</span>&nbsp;<span class="op" id="2545889">=</span>&nbsp;<span class="ident" id="2545891">syscall</span><span class="op" id="2545898">.</span><span class="ident" id="2545899">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2545908">//&nbsp;open&nbsp;for&nbsp;synchronous&nbsp;I/O.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545938">O_TRUNC</span>&nbsp;&nbsp;<span class="builtintype" id="2545947">int</span>&nbsp;<span class="op" id="2545951">=</span>&nbsp;<span class="ident" id="2545953">syscall</span><span class="op" id="2545960">.</span><span class="ident" id="2545961">O_TRUNC</span>&nbsp;&nbsp;<span class="comment" id="2545970">//&nbsp;if&nbsp;possible,&nbsp;truncate&nbsp;file&nbsp;when&nbsp;opened.</span><br>
<span class="lineno"></span><span class="op" id="2546013">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2546016">//&nbsp;Seek&nbsp;whence&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2546039">const</span>&nbsp;<span class="op" id="2546045">(</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2546048">SEEK_SET</span>&nbsp;<span class="builtintype" id="2546057">int</span>&nbsp;<span class="op" id="2546061">=</span>&nbsp;<span class="num" id="2546063">0</span>&nbsp;<span class="comment" id="2546065">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2546109">SEEK_CUR</span>&nbsp;<span class="builtintype" id="2546118">int</span>&nbsp;<span class="op" id="2546122">=</span>&nbsp;<span class="num" id="2546124">1</span>&nbsp;<span class="comment" id="2546126">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2546166">SEEK_END</span>&nbsp;<span class="builtintype" id="2546175">int</span>&nbsp;<span class="op" id="2546179">=</span>&nbsp;<span class="num" id="2546181">2</span>&nbsp;<span class="comment" id="2546183">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;end</span><br>
<span class="lineno"></span><span class="op" id="2546211">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2546214">//&nbsp;LinkError&nbsp;records&nbsp;an&nbsp;error&nbsp;during&nbsp;a&nbsp;link&nbsp;or&nbsp;symlink&nbsp;or&nbsp;rename</span><br>
<span class="lineno"></span><span class="comment" id="2546279">//&nbsp;system&nbsp;call&nbsp;and&nbsp;the&nbsp;paths&nbsp;that&nbsp;caused&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="2546324">type</span>&nbsp;<span class="ident" id="2546329">LinkError</span>&nbsp;<span class="keyword" id="2546339">struct</span>&nbsp;<span class="op" id="2546346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2546349">Op</span>&nbsp;&nbsp;<span class="builtintype" id="2546353">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2546361">Old</span>&nbsp;<span class="builtintype" id="2546365">string</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2546373">New</span>&nbsp;<span class="builtintype" id="2546377">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2546385">Err</span>&nbsp;<span class="builtintype" id="2546389">error</span><br>
<span class="lineno"></span><span class="op" id="2546395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2546398">func</span>&nbsp;<span class="op" id="2546403">(</span><span class="ident" id="2546404">e</span>&nbsp;<span class="op" id="2546406">*</span><span class="ident" id="2546407">LinkError</span><span class="op" id="2546416">)</span>&nbsp;<span class="ident" id="2546418">Error</span><span class="op" id="2546423">(</span><span class="op" id="2546424">)</span>&nbsp;<span class="builtintype" id="2546426">string</span>&nbsp;<span class="op" id="2546433">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546436">return</span>&nbsp;<span class="ident" id="2546443">e</span><span class="op" id="2546444">.</span><span class="ident" id="2546445">Op</span>&nbsp;<span class="op" id="2546448">+</span>&nbsp;<span class="string" id="2546450">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2546454">+</span>&nbsp;<span class="ident" id="2546456">e</span><span class="op" id="2546457">.</span><span class="ident" id="2546458">Old</span>&nbsp;<span class="op" id="2546462">+</span>&nbsp;<span class="string" id="2546464">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2546468">+</span>&nbsp;<span class="ident" id="2546470">e</span><span class="op" id="2546471">.</span><span class="ident" id="2546472">New</span>&nbsp;<span class="op" id="2546476">+</span>&nbsp;<span class="string" id="2546478">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2546483">+</span>&nbsp;<span class="ident" id="2546485">e</span><span class="op" id="2546486">.</span><span class="ident" id="2546487">Err</span><span class="op" id="2546490">.</span><span class="ident" id="2546491">Error</span><span class="op" id="2546496">(</span><span class="op" id="2546497">)</span><br>
<span class="lineno"></span><span class="op" id="2546499">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2546502">//&nbsp;Read&nbsp;reads&nbsp;up&nbsp;to&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2546550">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">90</span><span class="comment" id="2546611">//&nbsp;EOF&nbsp;is&nbsp;signaled&nbsp;by&nbsp;a&nbsp;zero&nbsp;count&nbsp;with&nbsp;err&nbsp;set&nbsp;to&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2546670">func</span>&nbsp;<span class="op" id="2546675">(</span><span class="ident" id="2546676">f</span>&nbsp;<span class="op" id="2546678">*</span><span class="ident" id="2546679">File</span><span class="op" id="2546683">)</span>&nbsp;<span class="ident" id="2546685">Read</span><span class="op" id="2546689">(</span><span class="ident" id="2546690">b</span>&nbsp;<span class="op" id="2546692">[</span><span class="op" id="2546693">]</span><span class="builtintype" id="2546694">byte</span><span class="op" id="2546698">)</span>&nbsp;<span class="op" id="2546700">(</span><span class="ident" id="2546701">n</span>&nbsp;<span class="builtintype" id="2546703">int</span><span class="op" id="2546706">,</span>&nbsp;<span class="ident" id="2546708">err</span>&nbsp;<span class="builtintype" id="2546712">error</span><span class="op" id="2546717">)</span>&nbsp;<span class="op" id="2546719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546722">if</span>&nbsp;<span class="ident" id="2546725">f</span>&nbsp;<span class="op" id="2546727">==</span>&nbsp;<span class="ident" id="2546730">nil</span>&nbsp;<span class="op" id="2546734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546738">return</span>&nbsp;<span class="num" id="2546745">0</span><span class="op" id="2546746">,</span>&nbsp;<span class="ident" id="2546748">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2546760">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2546763">n</span><span class="op" id="2546764">,</span>&nbsp;<span class="ident" id="2546766">e</span>&nbsp;<span class="op" id="2546768">:=</span>&nbsp;<span class="ident" id="2546771">f</span><span class="op" id="2546772">.</span><span class="ident" id="2546773">read</span><span class="op" id="2546777">(</span><span class="ident" id="2546778">b</span><span class="op" id="2546779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546782">if</span>&nbsp;<span class="ident" id="2546785">n</span>&nbsp;<span class="op" id="2546787">&lt;</span>&nbsp;<span class="num" id="2546789">0</span>&nbsp;<span class="op" id="2546791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2546795">n</span>&nbsp;<span class="op" id="2546797">=</span>&nbsp;<span class="num" id="2546799">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2546802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546805">if</span>&nbsp;<span class="ident" id="2546808">n</span>&nbsp;<span class="op" id="2546810">==</span>&nbsp;<span class="num" id="2546813">0</span>&nbsp;<span class="op" id="2546815">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2546818">len</span><span class="op" id="2546821">(</span><span class="ident" id="2546822">b</span><span class="op" id="2546823">)</span>&nbsp;<span class="op" id="2546825">&gt;</span>&nbsp;<span class="num" id="2546827">0</span>&nbsp;<span class="op" id="2546829">&amp;&amp;</span>&nbsp;<span class="ident" id="2546832">e</span>&nbsp;<span class="op" id="2546834">==</span>&nbsp;<span class="ident" id="2546837">nil</span>&nbsp;<span class="op" id="2546841">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546845">return</span>&nbsp;<span class="num" id="2546852">0</span><span class="op" id="2546853">,</span>&nbsp;<span class="ident" id="2546855">io</span><span class="op" id="2546857">.</span><span class="ident" id="2546858">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2546863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546866">if</span>&nbsp;<span class="ident" id="2546869">e</span>&nbsp;<span class="op" id="2546871">!=</span>&nbsp;<span class="ident" id="2546874">nil</span>&nbsp;<span class="op" id="2546878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2546882">err</span>&nbsp;<span class="op" id="2546886">=</span>&nbsp;<span class="op" id="2546888">&amp;</span><span class="ident" id="2546889">PathError</span><span class="op" id="2546898">{</span><span class="string" id="2546899">&#34;read&#34;</span><span class="op" id="2546905">,</span>&nbsp;<span class="ident" id="2546907">f</span><span class="op" id="2546908">.</span><span class="ident" id="2546909">name</span><span class="op" id="2546913">,</span>&nbsp;<span class="ident" id="2546915">e</span><span class="op" id="2546916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2546919">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546922">return</span>&nbsp;<span class="ident" id="2546929">n</span><span class="op" id="2546930">,</span>&nbsp;<span class="ident" id="2546932">err</span><br>
<span class="lineno"></span><span class="op" id="2546936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2546939">//&nbsp;ReadAt&nbsp;reads&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2547011">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;the&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">110</span><span class="comment" id="2547073">//&nbsp;ReadAt&nbsp;always&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;&lt;&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="comment" id="2547131">//&nbsp;At&nbsp;end&nbsp;of&nbsp;file,&nbsp;that&nbsp;error&nbsp;is&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2547172">func</span>&nbsp;<span class="op" id="2547177">(</span><span class="ident" id="2547178">f</span>&nbsp;<span class="op" id="2547180">*</span><span class="ident" id="2547181">File</span><span class="op" id="2547185">)</span>&nbsp;<span class="ident" id="2547187">ReadAt</span><span class="op" id="2547193">(</span><span class="ident" id="2547194">b</span>&nbsp;<span class="op" id="2547196">[</span><span class="op" id="2547197">]</span><span class="builtintype" id="2547198">byte</span><span class="op" id="2547202">,</span>&nbsp;<span class="ident" id="2547204">off</span>&nbsp;<span class="ident" id="2547208">int64</span><span class="op" id="2547213">)</span>&nbsp;<span class="op" id="2547215">(</span><span class="ident" id="2547216">n</span>&nbsp;<span class="builtintype" id="2547218">int</span><span class="op" id="2547221">,</span>&nbsp;<span class="ident" id="2547223">err</span>&nbsp;<span class="builtintype" id="2547227">error</span><span class="op" id="2547232">)</span>&nbsp;<span class="op" id="2547234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547237">if</span>&nbsp;<span class="ident" id="2547240">f</span>&nbsp;<span class="op" id="2547242">==</span>&nbsp;<span class="ident" id="2547245">nil</span>&nbsp;<span class="op" id="2547249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547253">return</span>&nbsp;<span class="num" id="2547260">0</span><span class="op" id="2547261">,</span>&nbsp;<span class="ident" id="2547263">ErrInvalid</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2547275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547278">for</span>&nbsp;<span class="builtinfunc" id="2547282">len</span><span class="op" id="2547285">(</span><span class="ident" id="2547286">b</span><span class="op" id="2547287">)</span>&nbsp;<span class="op" id="2547289">&gt;</span>&nbsp;<span class="num" id="2547291">0</span>&nbsp;<span class="op" id="2547293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2547297">m</span><span class="op" id="2547298">,</span>&nbsp;<span class="ident" id="2547300">e</span>&nbsp;<span class="op" id="2547302">:=</span>&nbsp;<span class="ident" id="2547305">f</span><span class="op" id="2547306">.</span><span class="ident" id="2547307">pread</span><span class="op" id="2547312">(</span><span class="ident" id="2547313">b</span><span class="op" id="2547314">,</span>&nbsp;<span class="ident" id="2547316">off</span><span class="op" id="2547319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547323">if</span>&nbsp;<span class="ident" id="2547326">m</span>&nbsp;<span class="op" id="2547328">==</span>&nbsp;<span class="num" id="2547331">0</span>&nbsp;<span class="op" id="2547333">&amp;&amp;</span>&nbsp;<span class="ident" id="2547336">e</span>&nbsp;<span class="op" id="2547338">==</span>&nbsp;<span class="ident" id="2547341">nil</span>&nbsp;<span class="op" id="2547345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547350">return</span>&nbsp;<span class="ident" id="2547357">n</span><span class="op" id="2547358">,</span>&nbsp;<span class="ident" id="2547360">io</span><span class="op" id="2547362">.</span><span class="ident" id="2547363">EOF</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2547369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547373">if</span>&nbsp;<span class="ident" id="2547376">e</span>&nbsp;<span class="op" id="2547378">!=</span>&nbsp;<span class="ident" id="2547381">nil</span>&nbsp;<span class="op" id="2547385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2547390">err</span>&nbsp;<span class="op" id="2547394">=</span>&nbsp;<span class="op" id="2547396">&amp;</span><span class="ident" id="2547397">PathError</span><span class="op" id="2547406">{</span><span class="string" id="2547407">&#34;read&#34;</span><span class="op" id="2547413">,</span>&nbsp;<span class="ident" id="2547415">f</span><span class="op" id="2547416">.</span><span class="ident" id="2547417">name</span><span class="op" id="2547421">,</span>&nbsp;<span class="ident" id="2547423">e</span><span class="op" id="2547424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547429">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2547437">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2547441">n</span>&nbsp;<span class="op" id="2547443">+=</span>&nbsp;<span class="ident" id="2547446">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2547450">b</span>&nbsp;<span class="op" id="2547452">=</span>&nbsp;<span class="ident" id="2547454">b</span><span class="op" id="2547455">[</span><span class="ident" id="2547456">m</span><span class="op" id="2547457">:</span><span class="op" id="2547458">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2547462">off</span>&nbsp;<span class="op" id="2547466">+=</span>&nbsp;<span class="ident" id="2547469">int64</span><span class="op" id="2547474">(</span><span class="ident" id="2547475">m</span><span class="op" id="2547476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2547479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547482">return</span><br>
<span class="lineno">130</span><span class="op" id="2547489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2547492">//&nbsp;Write&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2547534">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2547598">//&nbsp;Write&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno">135</span><span class="keyword" id="2547649">func</span>&nbsp;<span class="op" id="2547654">(</span><span class="ident" id="2547655">f</span>&nbsp;<span class="op" id="2547657">*</span><span class="ident" id="2547658">File</span><span class="op" id="2547662">)</span>&nbsp;<span class="ident" id="2547664">Write</span><span class="op" id="2547669">(</span><span class="ident" id="2547670">b</span>&nbsp;<span class="op" id="2547672">[</span><span class="op" id="2547673">]</span><span class="builtintype" id="2547674">byte</span><span class="op" id="2547678">)</span>&nbsp;<span class="op" id="2547680">(</span><span class="ident" id="2547681">n</span>&nbsp;<span class="builtintype" id="2547683">int</span><span class="op" id="2547686">,</span>&nbsp;<span class="ident" id="2547688">err</span>&nbsp;<span class="builtintype" id="2547692">error</span><span class="op" id="2547697">)</span>&nbsp;<span class="op" id="2547699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547702">if</span>&nbsp;<span class="ident" id="2547705">f</span>&nbsp;<span class="op" id="2547707">==</span>&nbsp;<span class="ident" id="2547710">nil</span>&nbsp;<span class="op" id="2547714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547718">return</span>&nbsp;<span class="num" id="2547725">0</span><span class="op" id="2547726">,</span>&nbsp;<span class="ident" id="2547728">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2547740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2547743">n</span><span class="op" id="2547744">,</span>&nbsp;<span class="ident" id="2547746">e</span>&nbsp;<span class="op" id="2547748">:=</span>&nbsp;<span class="ident" id="2547751">f</span><span class="op" id="2547752">.</span><span class="ident" id="2547753">write</span><span class="op" id="2547758">(</span><span class="ident" id="2547759">b</span><span class="op" id="2547760">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547763">if</span>&nbsp;<span class="ident" id="2547766">n</span>&nbsp;<span class="op" id="2547768">&lt;</span>&nbsp;<span class="num" id="2547770">0</span>&nbsp;<span class="op" id="2547772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2547776">n</span>&nbsp;<span class="op" id="2547778">=</span>&nbsp;<span class="num" id="2547780">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2547783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547786">if</span>&nbsp;<span class="ident" id="2547789">n</span>&nbsp;<span class="op" id="2547791">!=</span>&nbsp;<span class="builtinfunc" id="2547794">len</span><span class="op" id="2547797">(</span><span class="ident" id="2547798">b</span><span class="op" id="2547799">)</span>&nbsp;<span class="op" id="2547801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2547805">err</span>&nbsp;<span class="op" id="2547809">=</span>&nbsp;<span class="ident" id="2547811">io</span><span class="op" id="2547813">.</span><span class="ident" id="2547814">ErrShortWrite</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2547829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2547833">epipecheck</span><span class="op" id="2547843">(</span><span class="ident" id="2547844">f</span><span class="op" id="2547845">,</span>&nbsp;<span class="ident" id="2547847">e</span><span class="op" id="2547848">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547852">if</span>&nbsp;<span class="ident" id="2547855">e</span>&nbsp;<span class="op" id="2547857">!=</span>&nbsp;<span class="ident" id="2547860">nil</span>&nbsp;<span class="op" id="2547864">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2547868">err</span>&nbsp;<span class="op" id="2547872">=</span>&nbsp;<span class="op" id="2547874">&amp;</span><span class="ident" id="2547875">PathError</span><span class="op" id="2547884">{</span><span class="string" id="2547885">&#34;write&#34;</span><span class="op" id="2547892">,</span>&nbsp;<span class="ident" id="2547894">f</span><span class="op" id="2547895">.</span><span class="ident" id="2547896">name</span><span class="op" id="2547900">,</span>&nbsp;<span class="ident" id="2547902">e</span><span class="op" id="2547903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2547906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547909">return</span>&nbsp;<span class="ident" id="2547916">n</span><span class="op" id="2547917">,</span>&nbsp;<span class="ident" id="2547919">err</span><br>
<span class="lineno"></span><span class="op" id="2547923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="2547926">//&nbsp;WriteAt&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2547998">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2548062">//&nbsp;WriteAt&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="keyword" id="2548115">func</span>&nbsp;<span class="op" id="2548120">(</span><span class="ident" id="2548121">f</span>&nbsp;<span class="op" id="2548123">*</span><span class="ident" id="2548124">File</span><span class="op" id="2548128">)</span>&nbsp;<span class="ident" id="2548130">WriteAt</span><span class="op" id="2548137">(</span><span class="ident" id="2548138">b</span>&nbsp;<span class="op" id="2548140">[</span><span class="op" id="2548141">]</span><span class="builtintype" id="2548142">byte</span><span class="op" id="2548146">,</span>&nbsp;<span class="ident" id="2548148">off</span>&nbsp;<span class="ident" id="2548152">int64</span><span class="op" id="2548157">)</span>&nbsp;<span class="op" id="2548159">(</span><span class="ident" id="2548160">n</span>&nbsp;<span class="builtintype" id="2548162">int</span><span class="op" id="2548165">,</span>&nbsp;<span class="ident" id="2548167">err</span>&nbsp;<span class="builtintype" id="2548171">error</span><span class="op" id="2548176">)</span>&nbsp;<span class="op" id="2548178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2548181">if</span>&nbsp;<span class="ident" id="2548184">f</span>&nbsp;<span class="op" id="2548186">==</span>&nbsp;<span class="ident" id="2548189">nil</span>&nbsp;<span class="op" id="2548193">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2548197">return</span>&nbsp;<span class="num" id="2548204">0</span><span class="op" id="2548205">,</span>&nbsp;<span class="ident" id="2548207">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2548219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2548222">for</span>&nbsp;<span class="builtinfunc" id="2548226">len</span><span class="op" id="2548229">(</span><span class="ident" id="2548230">b</span><span class="op" id="2548231">)</span>&nbsp;<span class="op" id="2548233">&gt;</span>&nbsp;<span class="num" id="2548235">0</span>&nbsp;<span class="op" id="2548237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2548241">m</span><span class="op" id="2548242">,</span>&nbsp;<span class="ident" id="2548244">e</span>&nbsp;<span class="op" id="2548246">:=</span>&nbsp;<span class="ident" id="2548249">f</span><span class="op" id="2548250">.</span><span class="ident" id="2548251">pwrite</span><span class="op" id="2548257">(</span><span class="ident" id="2548258">b</span><span class="op" id="2548259">,</span>&nbsp;<span class="ident" id="2548261">off</span><span class="op" id="2548264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2548268">if</span>&nbsp;<span class="ident" id="2548271">e</span>&nbsp;<span class="op" id="2548273">!=</span>&nbsp;<span class="ident" id="2548276">nil</span>&nbsp;<span class="op" id="2548280">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2548285">err</span>&nbsp;<span class="op" id="2548289">=</span>&nbsp;<span class="op" id="2548291">&amp;</span><span class="ident" id="2548292">PathError</span><span class="op" id="2548301">{</span><span class="string" id="2548302">&#34;write&#34;</span><span class="op" id="2548309">,</span>&nbsp;<span class="ident" id="2548311">f</span><span class="op" id="2548312">.</span><span class="ident" id="2548313">name</span><span class="op" id="2548317">,</span>&nbsp;<span class="ident" id="2548319">e</span><span class="op" id="2548320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2548325">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2548333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2548337">n</span>&nbsp;<span class="op" id="2548339">+=</span>&nbsp;<span class="ident" id="2548342">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2548346">b</span>&nbsp;<span class="op" id="2548348">=</span>&nbsp;<span class="ident" id="2548350">b</span><span class="op" id="2548351">[</span><span class="ident" id="2548352">m</span><span class="op" id="2548353">:</span><span class="op" id="2548354">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2548358">off</span>&nbsp;<span class="op" id="2548362">+=</span>&nbsp;<span class="ident" id="2548365">int64</span><span class="op" id="2548370">(</span><span class="ident" id="2548371">m</span><span class="op" id="2548372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2548375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2548378">return</span><br>
<span class="lineno"></span><span class="op" id="2548385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="comment" id="2548388">//&nbsp;Seek&nbsp;sets&nbsp;the&nbsp;offset&nbsp;for&nbsp;the&nbsp;next&nbsp;Read&nbsp;or&nbsp;Write&nbsp;on&nbsp;file&nbsp;to&nbsp;offset,&nbsp;interpreted</span><br>
<span class="lineno"></span><span class="comment" id="2548470">//&nbsp;according&nbsp;to&nbsp;whence:&nbsp;0&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file,&nbsp;1&nbsp;means</span><br>
<span class="lineno"></span><span class="comment" id="2548546">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset,&nbsp;and&nbsp;2&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span><span class="comment" id="2548614">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;new&nbsp;offset&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2548665">func</span>&nbsp;<span class="op" id="2548670">(</span><span class="ident" id="2548671">f</span>&nbsp;<span class="op" id="2548673">*</span><span class="ident" id="2548674">File</span><span class="op" id="2548678">)</span>&nbsp;<span class="ident" id="2548680">Seek</span><span class="op" id="2548684">(</span><span class="ident" id="2548685">offset</span>&nbsp;<span class="ident" id="2548692">int64</span><span class="op" id="2548697">,</span>&nbsp;<span class="ident" id="2548699">whence</span>&nbsp;<span class="builtintype" id="2548706">int</span><span class="op" id="2548709">)</span>&nbsp;<span class="op" id="2548711">(</span><span class="ident" id="2548712">ret</span>&nbsp;<span class="ident" id="2548716">int64</span><span class="op" id="2548721">,</span>&nbsp;<span class="ident" id="2548723">err</span>&nbsp;<span class="builtintype" id="2548727">error</span><span class="op" id="2548732">)</span>&nbsp;<span class="op" id="2548734">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2548737">if</span>&nbsp;<span class="ident" id="2548740">f</span>&nbsp;<span class="op" id="2548742">==</span>&nbsp;<span class="ident" id="2548745">nil</span>&nbsp;<span class="op" id="2548749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2548753">return</span>&nbsp;<span class="num" id="2548760">0</span><span class="op" id="2548761">,</span>&nbsp;<span class="ident" id="2548763">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2548775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2548778">r</span><span class="op" id="2548779">,</span>&nbsp;<span class="ident" id="2548781">e</span>&nbsp;<span class="op" id="2548783">:=</span>&nbsp;<span class="ident" id="2548786">f</span><span class="op" id="2548787">.</span><span class="ident" id="2548788">seek</span><span class="op" id="2548792">(</span><span class="ident" id="2548793">offset</span><span class="op" id="2548799">,</span>&nbsp;<span class="ident" id="2548801">whence</span><span class="op" id="2548807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2548810">if</span>&nbsp;<span class="ident" id="2548813">e</span>&nbsp;<span class="op" id="2548815">==</span>&nbsp;<span class="ident" id="2548818">nil</span>&nbsp;<span class="op" id="2548822">&amp;&amp;</span>&nbsp;<span class="ident" id="2548825">f</span><span class="op" id="2548826">.</span><span class="ident" id="2548827">dirinfo</span>&nbsp;<span class="op" id="2548835">!=</span>&nbsp;<span class="ident" id="2548838">nil</span>&nbsp;<span class="op" id="2548842">&amp;&amp;</span>&nbsp;<span class="ident" id="2548845">r</span>&nbsp;<span class="op" id="2548847">!=</span>&nbsp;<span class="num" id="2548850">0</span>&nbsp;<span class="op" id="2548852">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2548856">e</span>&nbsp;<span class="op" id="2548858">=</span>&nbsp;<span class="ident" id="2548860">syscall</span><span class="op" id="2548867">.</span><span class="ident" id="2548868">EISDIR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2548876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2548879">if</span>&nbsp;<span class="ident" id="2548882">e</span>&nbsp;<span class="op" id="2548884">!=</span>&nbsp;<span class="ident" id="2548887">nil</span>&nbsp;<span class="op" id="2548891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2548895">return</span>&nbsp;<span class="num" id="2548902">0</span><span class="op" id="2548903">,</span>&nbsp;<span class="op" id="2548905">&amp;</span><span class="ident" id="2548906">PathError</span><span class="op" id="2548915">{</span><span class="string" id="2548916">&#34;seek&#34;</span><span class="op" id="2548922">,</span>&nbsp;<span class="ident" id="2548924">f</span><span class="op" id="2548925">.</span><span class="ident" id="2548926">name</span><span class="op" id="2548930">,</span>&nbsp;<span class="ident" id="2548932">e</span><span class="op" id="2548933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2548936">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2548939">return</span>&nbsp;<span class="ident" id="2548946">r</span><span class="op" id="2548947">,</span>&nbsp;<span class="ident" id="2548949">nil</span><br>
<span class="lineno"></span><span class="op" id="2548953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2548956">//&nbsp;WriteString&nbsp;is&nbsp;like&nbsp;Write,&nbsp;but&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;string&nbsp;s&nbsp;rather&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="2549034">//&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno">195</span><span class="keyword" id="2549055">func</span>&nbsp;<span class="op" id="2549060">(</span><span class="ident" id="2549061">f</span>&nbsp;<span class="op" id="2549063">*</span><span class="ident" id="2549064">File</span><span class="op" id="2549068">)</span>&nbsp;<span class="ident" id="2549070">WriteString</span><span class="op" id="2549081">(</span><span class="ident" id="2549082">s</span>&nbsp;<span class="builtintype" id="2549084">string</span><span class="op" id="2549090">)</span>&nbsp;<span class="op" id="2549092">(</span><span class="ident" id="2549093">ret</span>&nbsp;<span class="builtintype" id="2549097">int</span><span class="op" id="2549100">,</span>&nbsp;<span class="ident" id="2549102">err</span>&nbsp;<span class="builtintype" id="2549106">error</span><span class="op" id="2549111">)</span>&nbsp;<span class="op" id="2549113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2549116">if</span>&nbsp;<span class="ident" id="2549119">f</span>&nbsp;<span class="op" id="2549121">==</span>&nbsp;<span class="ident" id="2549124">nil</span>&nbsp;<span class="op" id="2549128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2549132">return</span>&nbsp;<span class="num" id="2549139">0</span><span class="op" id="2549140">,</span>&nbsp;<span class="ident" id="2549142">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2549154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2549157">return</span>&nbsp;<span class="ident" id="2549164">f</span><span class="op" id="2549165">.</span><span class="ident" id="2549166">Write</span><span class="op" id="2549171">(</span><span class="op" id="2549172">[</span><span class="op" id="2549173">]</span><span class="builtintype" id="2549174">byte</span><span class="op" id="2549178">(</span><span class="ident" id="2549179">s</span><span class="op" id="2549180">)</span><span class="op" id="2549181">)</span><br>
<span class="lineno">200</span><span class="op" id="2549183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2549186">//&nbsp;Mkdir&nbsp;creates&nbsp;a&nbsp;new&nbsp;directory&nbsp;with&nbsp;the&nbsp;specified&nbsp;name&nbsp;and&nbsp;permission&nbsp;bits.</span><br>
<span class="lineno"></span><span class="comment" id="2549264">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2549320">func</span>&nbsp;<span class="ident" id="2549325">Mkdir</span><span class="op" id="2549330">(</span><span class="ident" id="2549331">name</span>&nbsp;<span class="builtintype" id="2549336">string</span><span class="op" id="2549342">,</span>&nbsp;<span class="ident" id="2549344">perm</span>&nbsp;<span class="ident" id="2549349">FileMode</span><span class="op" id="2549357">)</span>&nbsp;<span class="builtintype" id="2549359">error</span>&nbsp;<span class="op" id="2549365">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2549368">e</span>&nbsp;<span class="op" id="2549370">:=</span>&nbsp;<span class="ident" id="2549373">syscall</span><span class="op" id="2549380">.</span><span class="ident" id="2549381">Mkdir</span><span class="op" id="2549386">(</span><span class="ident" id="2549387">name</span><span class="op" id="2549391">,</span>&nbsp;<span class="ident" id="2549393">syscallMode</span><span class="op" id="2549404">(</span><span class="ident" id="2549405">perm</span><span class="op" id="2549409">)</span><span class="op" id="2549410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2549413">if</span>&nbsp;<span class="ident" id="2549416">e</span>&nbsp;<span class="op" id="2549418">!=</span>&nbsp;<span class="ident" id="2549421">nil</span>&nbsp;<span class="op" id="2549425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2549429">return</span>&nbsp;<span class="op" id="2549436">&amp;</span><span class="ident" id="2549437">PathError</span><span class="op" id="2549446">{</span><span class="string" id="2549447">&#34;mkdir&#34;</span><span class="op" id="2549454">,</span>&nbsp;<span class="ident" id="2549456">name</span><span class="op" id="2549460">,</span>&nbsp;<span class="ident" id="2549462">e</span><span class="op" id="2549463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2549466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2549469">return</span>&nbsp;<span class="ident" id="2549476">nil</span><br>
<span class="lineno">210</span><span class="op" id="2549480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2549483">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2549554">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2549610">func</span>&nbsp;<span class="ident" id="2549615">Chdir</span><span class="op" id="2549620">(</span><span class="ident" id="2549621">dir</span>&nbsp;<span class="builtintype" id="2549625">string</span><span class="op" id="2549631">)</span>&nbsp;<span class="builtintype" id="2549633">error</span>&nbsp;<span class="op" id="2549639">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2549642">if</span>&nbsp;<span class="ident" id="2549645">e</span>&nbsp;<span class="op" id="2549647">:=</span>&nbsp;<span class="ident" id="2549650">syscall</span><span class="op" id="2549657">.</span><span class="ident" id="2549658">Chdir</span><span class="op" id="2549663">(</span><span class="ident" id="2549664">dir</span><span class="op" id="2549667">)</span><span class="op" id="2549668">;</span>&nbsp;<span class="ident" id="2549670">e</span>&nbsp;<span class="op" id="2549672">!=</span>&nbsp;<span class="ident" id="2549675">nil</span>&nbsp;<span class="op" id="2549679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2549683">return</span>&nbsp;<span class="op" id="2549690">&amp;</span><span class="ident" id="2549691">PathError</span><span class="op" id="2549700">{</span><span class="string" id="2549701">&#34;chdir&#34;</span><span class="op" id="2549708">,</span>&nbsp;<span class="ident" id="2549710">dir</span><span class="op" id="2549713">,</span>&nbsp;<span class="ident" id="2549715">e</span><span class="op" id="2549716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2549719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2549722">return</span>&nbsp;<span class="ident" id="2549729">nil</span><br>
<span class="lineno"></span><span class="op" id="2549733">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="2549736">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="2549796">//&nbsp;which&nbsp;must&nbsp;be&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2549826">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2549882">func</span>&nbsp;<span class="op" id="2549887">(</span><span class="ident" id="2549888">f</span>&nbsp;<span class="op" id="2549890">*</span><span class="ident" id="2549891">File</span><span class="op" id="2549895">)</span>&nbsp;<span class="ident" id="2549897">Chdir</span><span class="op" id="2549902">(</span><span class="op" id="2549903">)</span>&nbsp;<span class="builtintype" id="2549905">error</span>&nbsp;<span class="op" id="2549911">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2549914">if</span>&nbsp;<span class="ident" id="2549917">f</span>&nbsp;<span class="op" id="2549919">==</span>&nbsp;<span class="ident" id="2549922">nil</span>&nbsp;<span class="op" id="2549926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2549930">return</span>&nbsp;<span class="ident" id="2549937">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2549949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2549952">if</span>&nbsp;<span class="ident" id="2549955">e</span>&nbsp;<span class="op" id="2549957">:=</span>&nbsp;<span class="ident" id="2549960">syscall</span><span class="op" id="2549967">.</span><span class="ident" id="2549968">Fchdir</span><span class="op" id="2549974">(</span><span class="ident" id="2549975">f</span><span class="op" id="2549976">.</span><span class="ident" id="2549977">fd</span><span class="op" id="2549979">)</span><span class="op" id="2549980">;</span>&nbsp;<span class="ident" id="2549982">e</span>&nbsp;<span class="op" id="2549984">!=</span>&nbsp;<span class="ident" id="2549987">nil</span>&nbsp;<span class="op" id="2549991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2549995">return</span>&nbsp;<span class="op" id="2550002">&amp;</span><span class="ident" id="2550003">PathError</span><span class="op" id="2550012">{</span><span class="string" id="2550013">&#34;chdir&#34;</span><span class="op" id="2550020">,</span>&nbsp;<span class="ident" id="2550022">f</span><span class="op" id="2550023">.</span><span class="ident" id="2550024">name</span><span class="op" id="2550028">,</span>&nbsp;<span class="ident" id="2550030">e</span><span class="op" id="2550031">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2550034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2550037">return</span>&nbsp;<span class="ident" id="2550044">nil</span><br>
<span class="lineno"></span><span class="op" id="2550048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2550051">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;for&nbsp;reading.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on</span><br>
<span class="lineno">235</span><span class="comment" id="2550120">//&nbsp;the&nbsp;returned&nbsp;file&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;reading;&nbsp;the&nbsp;associated&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="2550186">//&nbsp;descriptor&nbsp;has&nbsp;mode&nbsp;O_RDONLY.</span><br>
<span class="lineno"></span><span class="comment" id="2550219">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2550275">func</span>&nbsp;<span class="ident" id="2550280">Open</span><span class="op" id="2550284">(</span><span class="ident" id="2550285">name</span>&nbsp;<span class="builtintype" id="2550290">string</span><span class="op" id="2550296">)</span>&nbsp;<span class="op" id="2550298">(</span><span class="ident" id="2550299">file</span>&nbsp;<span class="op" id="2550304">*</span><span class="ident" id="2550305">File</span><span class="op" id="2550309">,</span>&nbsp;<span class="ident" id="2550311">err</span>&nbsp;<span class="builtintype" id="2550315">error</span><span class="op" id="2550320">)</span>&nbsp;<span class="op" id="2550322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2550325">return</span>&nbsp;<span class="ident" id="2550332">OpenFile</span><span class="op" id="2550340">(</span><span class="ident" id="2550341">name</span><span class="op" id="2550345">,</span>&nbsp;<span class="ident" id="2550347">O_RDONLY</span><span class="op" id="2550355">,</span>&nbsp;<span class="num" id="2550357">0</span><span class="op" id="2550358">)</span><br>
<span class="lineno">240</span><span class="op" id="2550360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2550363">//&nbsp;Create&nbsp;creates&nbsp;the&nbsp;named&nbsp;file&nbsp;mode&nbsp;0666&nbsp;(before&nbsp;umask),&nbsp;truncating</span><br>
<span class="lineno"></span><span class="comment" id="2550433">//&nbsp;it&nbsp;if&nbsp;it&nbsp;already&nbsp;exists.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on&nbsp;the&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2550501">//&nbsp;File&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;I/O;&nbsp;the&nbsp;associated&nbsp;file&nbsp;descriptor&nbsp;has&nbsp;mode</span><br>
<span class="lineno">245</span><span class="comment" id="2550570">//&nbsp;O_RDWR.</span><br>
<span class="lineno"></span><span class="comment" id="2550581">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2550637">func</span>&nbsp;<span class="ident" id="2550642">Create</span><span class="op" id="2550648">(</span><span class="ident" id="2550649">name</span>&nbsp;<span class="builtintype" id="2550654">string</span><span class="op" id="2550660">)</span>&nbsp;<span class="op" id="2550662">(</span><span class="ident" id="2550663">file</span>&nbsp;<span class="op" id="2550668">*</span><span class="ident" id="2550669">File</span><span class="op" id="2550673">,</span>&nbsp;<span class="ident" id="2550675">err</span>&nbsp;<span class="builtintype" id="2550679">error</span><span class="op" id="2550684">)</span>&nbsp;<span class="op" id="2550686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2550689">return</span>&nbsp;<span class="ident" id="2550696">OpenFile</span><span class="op" id="2550704">(</span><span class="ident" id="2550705">name</span><span class="op" id="2550709">,</span>&nbsp;<span class="ident" id="2550711">O_RDWR</span><span class="op" id="2550717">|</span><span class="ident" id="2550718">O_CREATE</span><span class="op" id="2550726">|</span><span class="ident" id="2550727">O_TRUNC</span><span class="op" id="2550734">,</span>&nbsp;<span class="num" id="2550736">0666</span><span class="op" id="2550740">)</span><br>
<span class="lineno"></span><span class="op" id="2550742">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="2550745">//&nbsp;lstat&nbsp;is&nbsp;overridden&nbsp;in&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="2550778">var</span>&nbsp;<span class="ident" id="2550782">lstat</span>&nbsp;<span class="op" id="2550788">=</span>&nbsp;<span class="ident" id="2550790">Lstat</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2550797">//&nbsp;Rename&nbsp;renames&nbsp;(moves)&nbsp;a&nbsp;file.&nbsp;OS-specific&nbsp;restrictions&nbsp;might&nbsp;apply.</span><br>
<span class="lineno">255</span><span class="keyword" id="2550869">func</span>&nbsp;<span class="ident" id="2550874">Rename</span><span class="op" id="2550880">(</span><span class="ident" id="2550881">oldpath</span><span class="op" id="2550888">,</span>&nbsp;<span class="ident" id="2550890">newpath</span>&nbsp;<span class="builtintype" id="2550898">string</span><span class="op" id="2550904">)</span>&nbsp;<span class="builtintype" id="2550906">error</span>&nbsp;<span class="op" id="2550912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2550915">return</span>&nbsp;<span class="ident" id="2550922">rename</span><span class="op" id="2550928">(</span><span class="ident" id="2550929">oldpath</span><span class="op" id="2550936">,</span>&nbsp;<span class="ident" id="2550938">newpath</span><span class="op" id="2550945">)</span><br>
<span class="lineno"></span><span class="op" id="2550947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2550950">//&nbsp;Many&nbsp;functions&nbsp;in&nbsp;package&nbsp;syscall&nbsp;return&nbsp;a&nbsp;count&nbsp;of&nbsp;-1&nbsp;instead&nbsp;of&nbsp;0.</span><br>
<span class="lineno">260</span><span class="comment" id="2551022">//&nbsp;Using&nbsp;fixCount(call())&nbsp;instead&nbsp;of&nbsp;call()&nbsp;corrects&nbsp;the&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2551086">func</span>&nbsp;<span class="ident" id="2551091">fixCount</span><span class="op" id="2551099">(</span><span class="ident" id="2551100">n</span>&nbsp;<span class="builtintype" id="2551102">int</span><span class="op" id="2551105">,</span>&nbsp;<span class="ident" id="2551107">err</span>&nbsp;<span class="builtintype" id="2551111">error</span><span class="op" id="2551116">)</span>&nbsp;<span class="op" id="2551118">(</span><span class="builtintype" id="2551119">int</span><span class="op" id="2551122">,</span>&nbsp;<span class="builtintype" id="2551124">error</span><span class="op" id="2551129">)</span>&nbsp;<span class="op" id="2551131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2551134">if</span>&nbsp;<span class="ident" id="2551137">n</span>&nbsp;<span class="op" id="2551139">&lt;</span>&nbsp;<span class="num" id="2551141">0</span>&nbsp;<span class="op" id="2551143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2551147">n</span>&nbsp;<span class="op" id="2551149">=</span>&nbsp;<span class="num" id="2551151">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2551154">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2551157">return</span>&nbsp;<span class="ident" id="2551164">n</span><span class="op" id="2551165">,</span>&nbsp;<span class="ident" id="2551167">err</span><br>
<span class="lineno"></span><span class="op" id="2551171">}</span>
</div>
</body>
</html>
