<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7936769">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7936825">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7936879">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7936930">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;API&nbsp;tests&nbsp;across&nbsp;platforms&nbsp;and&nbsp;will&nbsp;never&nbsp;have&nbsp;a&nbsp;build</span><br>
<span class="lineno"></span><span class="comment" id="7937009">//&nbsp;tag.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7937018">package</span>&nbsp;<span class="ident" id="7937026">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="7937031">import</span>&nbsp;<span class="op" id="7937038">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7937041">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7937047">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7937058">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7937069">&#34;testing&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7937080">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7937087">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7937090">func</span>&nbsp;<span class="ident" id="7937095">packetConnTestData</span><span class="op" id="7937113">(</span><span class="ident" id="7937114">t</span>&nbsp;<span class="op" id="7937116">*</span><span class="ident" id="7937117"><a href="/net/packetconn_test.go.html#7937069">testing</a></span><span class="op" id="7937124">.</span><span class="ident" id="7937125">T</span><span class="op" id="7937126">,</span>&nbsp;<span class="ident" id="7937128">net</span>&nbsp;<span class="builtintype" id="7937132">string</span><span class="op" id="7937138">,</span>&nbsp;<span class="ident" id="7937140">i</span>&nbsp;<span class="builtintype" id="7937142">int</span><span class="op" id="7937145">)</span>&nbsp;<span class="op" id="7937147">(</span><span class="op" id="7937148">[</span><span class="op" id="7937149">]</span><span class="builtintype" id="7937150">byte</span><span class="op" id="7937154">,</span>&nbsp;<span class="keyword" id="7937156">func</span><span class="op" id="7937160">(</span><span class="op" id="7937161">)</span><span class="op" id="7937162">)</span>&nbsp;<span class="op" id="7937164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7937167">switch</span>&nbsp;<span class="ident" id="7937174"><a href="/net/packetconn_test.go.html#7937128">net</a></span>&nbsp;<span class="op" id="7937178">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7937181">case</span>&nbsp;<span class="string" id="7937186">&#34;udp&#34;</span><span class="op" id="7937191">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7937195">return</span>&nbsp;<span class="op" id="7937202">[</span><span class="op" id="7937203">]</span><span class="builtintype" id="7937204">byte</span><span class="op" id="7937208">(</span><span class="string" id="7937209">&#34;UDP&nbsp;PACKETCONN&nbsp;TEST&#34;</span><span class="op" id="7937230">)</span><span class="op" id="7937231">,</span>&nbsp;<span class="ident" id="7937233">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7937238">case</span>&nbsp;<span class="string" id="7937243">&#34;ip&#34;</span><span class="op" id="7937247">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7937251">if</span>&nbsp;<span class="ident" id="7937254">skip</span><span class="op" id="7937258">,</span>&nbsp;<span class="ident" id="7937260">skipmsg</span>&nbsp;<span class="op" id="7937268">:=</span>&nbsp;<span class="ident" id="7937271"><a href="/net/ipraw_test.go.html#7904256">skipRawSocketTest</a></span><span class="op" id="7937288">(</span><span class="ident" id="7937289"><a href="/net/packetconn_test.go.html#7937114">t</a></span><span class="op" id="7937290">)</span><span class="op" id="7937291">;</span>&nbsp;<span class="ident" id="7937293"><a href="/net/packetconn_test.go.html#7937254">skip</a></span>&nbsp;<span class="op" id="7937298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7937303">return</span>&nbsp;<span class="ident" id="7937310">nil</span><span class="op" id="7937313">,</span>&nbsp;<span class="keyword" id="7937315">func</span><span class="op" id="7937319">(</span><span class="op" id="7937320">)</span>&nbsp;<span class="op" id="7937322">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7937328"><a href="/net/packetconn_test.go.html#7937114">t</a></span><span class="op" id="7937329">.</span><span class="ident" id="7937330">Logf</span><span class="op" id="7937334">(</span><span class="ident" id="7937335"><a href="/net/packetconn_test.go.html#7937260">skipmsg</a></span><span class="op" id="7937342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7937347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7937351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7937355">b</span><span class="op" id="7937356">,</span>&nbsp;<span class="ident" id="7937358">err</span>&nbsp;<span class="op" id="7937362">:=</span>&nbsp;<span class="op" id="7937365">(</span><span class="op" id="7937366">&amp;</span><span class="ident" id="7937367"><a href="/net/mockicmp_test.go.html#7921437">icmpMessage</a></span><span class="op" id="7937378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7937383">Type</span><span class="op" id="7937387">:</span>&nbsp;<span class="ident" id="7937389"><a href="/net/mockicmp_test.go.html#7921291">icmpv4EchoRequest</a></span><span class="op" id="7937406">,</span>&nbsp;<span class="ident" id="7937408">Code</span><span class="op" id="7937412">:</span>&nbsp;<span class="num" id="7937414">0</span><span class="op" id="7937415">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7937420">Body</span><span class="op" id="7937424">:</span>&nbsp;<span class="op" id="7937426">&amp;</span><span class="ident" id="7937427"><a href="/net/mockicmp_test.go.html#7923095">icmpEcho</a></span><span class="op" id="7937435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7937441">ID</span><span class="op" id="7937443">:</span>&nbsp;<span class="ident" id="7937445"><a href="/net/packetconn_test.go.html#7937041">os</a></span><span class="op" id="7937447">.</span><span class="ident" id="7937448">Getpid</span><span class="op" id="7937454">(</span><span class="op" id="7937455">)</span>&nbsp;<span class="op" id="7937457">&amp;</span>&nbsp;<span class="num" id="7937459">0xffff</span><span class="op" id="7937465">,</span>&nbsp;<span class="ident" id="7937467">Seq</span><span class="op" id="7937470">:</span>&nbsp;<span class="ident" id="7937472"><a href="/net/packetconn_test.go.html#7937140">i</a></span>&nbsp;<span class="op" id="7937474">+</span>&nbsp;<span class="num" id="7937476">1</span><span class="op" id="7937477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7937483">Data</span><span class="op" id="7937487">:</span>&nbsp;<span class="op" id="7937489">[</span><span class="op" id="7937490">]</span><span class="builtintype" id="7937491">byte</span><span class="op" id="7937495">(</span><span class="string" id="7937496">&#34;IP&nbsp;PACKETCONN&nbsp;TEST&#34;</span><span class="op" id="7937516">)</span><span class="op" id="7937517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7937522">}</span><span class="op" id="7937523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7937527">}</span><span class="op" id="7937528">)</span><span class="op" id="7937529">.</span><span class="ident" id="7937530">Marshal</span><span class="op" id="7937537">(</span><span class="op" id="7937538">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7937542">if</span>&nbsp;<span class="ident" id="7937545"><a href="/net/packetconn_test.go.html#7937358">err</a></span>&nbsp;<span class="op" id="7937549">!=</span>&nbsp;<span class="ident" id="7937552">nil</span>&nbsp;<span class="op" id="7937556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7937561">return</span>&nbsp;<span class="ident" id="7937568">nil</span><span class="op" id="7937571">,</span>&nbsp;<span class="keyword" id="7937573">func</span><span class="op" id="7937577">(</span><span class="op" id="7937578">)</span>&nbsp;<span class="op" id="7937580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7937586"><a href="/net/packetconn_test.go.html#7937114">t</a></span><span class="op" id="7937587">.</span><span class="ident" id="7937588">Fatalf</span><span class="op" id="7937594">(</span><span class="string" id="7937595">&#34;icmpMessage.Marshal&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7937627">,</span>&nbsp;<span class="ident" id="7937629"><a href="/net/packetconn_test.go.html#7937358">err</a></span><span class="op" id="7937632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7937637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7937641">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7937645">return</span>&nbsp;<span class="ident" id="7937652"><a href="/net/packetconn_test.go.html#7937355">b</a></span><span class="op" id="7937653">,</span>&nbsp;<span class="ident" id="7937655">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7937660">case</span>&nbsp;<span class="string" id="7937665">&#34;unixgram&#34;</span><span class="op" id="7937675">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7937679">switch</span>&nbsp;<span class="ident" id="7937686"><a href="/net/packetconn_test.go.html#7937047">runtime</a></span><span class="op" id="7937693">.</span><span class="ident" id="7937694">GOOS</span>&nbsp;<span class="op" id="7937699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7937703">case</span>&nbsp;<span class="string" id="7937708">&#34;nacl&#34;</span><span class="op" id="7937714">,</span>&nbsp;<span class="string" id="7937716">&#34;plan9&#34;</span><span class="op" id="7937723">,</span>&nbsp;<span class="string" id="7937725">&#34;windows&#34;</span><span class="op" id="7937734">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7937739">return</span>&nbsp;<span class="ident" id="7937746">nil</span><span class="op" id="7937749">,</span>&nbsp;<span class="keyword" id="7937751">func</span><span class="op" id="7937755">(</span><span class="op" id="7937756">)</span>&nbsp;<span class="op" id="7937758">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7937764"><a href="/net/packetconn_test.go.html#7937114">t</a></span><span class="op" id="7937765">.</span><span class="ident" id="7937766">Logf</span><span class="op" id="7937770">(</span><span class="string" id="7937771">&#34;skipping&nbsp;%q&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7937795">,</span>&nbsp;<span class="ident" id="7937797"><a href="/net/packetconn_test.go.html#7937128">net</a></span><span class="op" id="7937800">,</span>&nbsp;<span class="ident" id="7937802"><a href="/net/packetconn_test.go.html#7937047">runtime</a></span><span class="op" id="7937809">.</span><span class="ident" id="7937810">GOOS</span><span class="op" id="7937814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7937819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7937823">default</span><span class="op" id="7937830">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7937835">return</span>&nbsp;<span class="op" id="7937842">[</span><span class="op" id="7937843">]</span><span class="builtintype" id="7937844">byte</span><span class="op" id="7937848">(</span><span class="string" id="7937849">&#34;UNIXGRAM&nbsp;PACKETCONN&nbsp;TEST&#34;</span><span class="op" id="7937875">)</span><span class="op" id="7937876">,</span>&nbsp;<span class="ident" id="7937878">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7937884">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7937887">default</span><span class="op" id="7937894">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7937898">return</span>&nbsp;<span class="ident" id="7937905">nil</span><span class="op" id="7937908">,</span>&nbsp;<span class="keyword" id="7937910">func</span><span class="op" id="7937914">(</span><span class="op" id="7937915">)</span>&nbsp;<span class="op" id="7937917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7937922"><a href="/net/packetconn_test.go.html#7937114">t</a></span><span class="op" id="7937923">.</span><span class="ident" id="7937924">Logf</span><span class="op" id="7937928">(</span><span class="string" id="7937929">&#34;skipping&nbsp;%q&nbsp;test&#34;</span><span class="op" id="7937947">,</span>&nbsp;<span class="ident" id="7937949"><a href="/net/packetconn_test.go.html#7937128">net</a></span><span class="op" id="7937952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7937956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7937959">}</span><br>
<span class="lineno">55</span><span class="op" id="7937961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7937964">var</span>&nbsp;<span class="ident" id="7937968">packetConnTests</span>&nbsp;<span class="op" id="7937984">=</span>&nbsp;<span class="op" id="7937986">[</span><span class="op" id="7937987">]</span><span class="keyword" id="7937988">struct</span>&nbsp;<span class="op" id="7937995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7937998">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7938004">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7938012">addr1</span>&nbsp;<span class="builtintype" id="7938018">string</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7938026">addr2</span>&nbsp;<span class="builtintype" id="7938032">string</span><br>
<span class="lineno"></span><span class="op" id="7938039">}</span><span class="op" id="7938040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7938043">{</span><span class="string" id="7938044">&#34;udp&#34;</span><span class="op" id="7938049">,</span>&nbsp;<span class="string" id="7938051">&#34;127.0.0.1:0&#34;</span><span class="op" id="7938064">,</span>&nbsp;<span class="string" id="7938066">&#34;127.0.0.1:0&#34;</span><span class="op" id="7938079">}</span><span class="op" id="7938080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7938083">{</span><span class="string" id="7938084">&#34;ip:icmp&#34;</span><span class="op" id="7938093">,</span>&nbsp;<span class="string" id="7938095">&#34;127.0.0.1&#34;</span><span class="op" id="7938106">,</span>&nbsp;<span class="string" id="7938108">&#34;127.0.0.1&#34;</span><span class="op" id="7938119">}</span><span class="op" id="7938120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7938123">{</span><span class="string" id="7938124">&#34;unixgram&#34;</span><span class="op" id="7938134">,</span>&nbsp;<span class="ident" id="7938136"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7938148">(</span><span class="op" id="7938149">)</span><span class="op" id="7938150">,</span>&nbsp;<span class="ident" id="7938152"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7938164">(</span><span class="op" id="7938165">)</span><span class="op" id="7938166">}</span><span class="op" id="7938167">,</span><br>
<span class="lineno">65</span><span class="op" id="7938169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7938172">func</span>&nbsp;<span class="ident" id="7938177">TestPacketConn</span><span class="op" id="7938191">(</span><span class="ident" id="7938192">t</span>&nbsp;<span class="op" id="7938194">*</span><span class="ident" id="7938195"><a href="/net/packetconn_test.go.html#7937069">testing</a></span><span class="op" id="7938202">.</span><span class="ident" id="7938203">T</span><span class="op" id="7938204">)</span>&nbsp;<span class="op" id="7938206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7938209">closer</span>&nbsp;<span class="op" id="7938216">:=</span>&nbsp;<span class="keyword" id="7938219">func</span><span class="op" id="7938223">(</span><span class="ident" id="7938224">c</span>&nbsp;<span class="ident" id="7938226"><a href="/net/net.go.html#1469751">PacketConn</a></span><span class="op" id="7938236">,</span>&nbsp;<span class="ident" id="7938238">net</span><span class="op" id="7938241">,</span>&nbsp;<span class="ident" id="7938243">addr1</span><span class="op" id="7938248">,</span>&nbsp;<span class="ident" id="7938250">addr2</span>&nbsp;<span class="builtintype" id="7938256">string</span><span class="op" id="7938262">)</span>&nbsp;<span class="op" id="7938264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7938268"><a href="/net/packetconn_test.go.html#7938224">c</a></span><span class="op" id="7938269">.</span><span class="ident" id="7938270">Close</span><span class="op" id="7938275">(</span><span class="op" id="7938276">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7938280">switch</span>&nbsp;<span class="ident" id="7938287"><a href="/net/packetconn_test.go.html#7938238">net</a></span>&nbsp;<span class="op" id="7938291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7938295">case</span>&nbsp;<span class="string" id="7938300">&#34;unixgram&#34;</span><span class="op" id="7938310">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7938315"><a href="/net/packetconn_test.go.html#7937041">os</a></span><span class="op" id="7938317">.</span><span class="ident" id="7938318">Remove</span><span class="op" id="7938324">(</span><span class="ident" id="7938325"><a href="/net/packetconn_test.go.html#7938243">addr1</a></span><span class="op" id="7938330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7938335"><a href="/net/packetconn_test.go.html#7937041">os</a></span><span class="op" id="7938337">.</span><span class="ident" id="7938338">Remove</span><span class="op" id="7938344">(</span><span class="ident" id="7938345"><a href="/net/packetconn_test.go.html#7938250">addr2</a></span><span class="op" id="7938350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7938354">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7938357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7938361">for</span>&nbsp;<span class="ident" id="7938365">i</span><span class="op" id="7938366">,</span>&nbsp;<span class="ident" id="7938368">tt</span>&nbsp;<span class="op" id="7938371">:=</span>&nbsp;<span class="keyword" id="7938374">range</span>&nbsp;<span class="ident" id="7938380"><a href="/net/packetconn_test.go.html#7937968">packetConnTests</a></span>&nbsp;<span class="op" id="7938396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7938400">netstr</span>&nbsp;<span class="op" id="7938407">:=</span>&nbsp;<span class="ident" id="7938410"><a href="/net/packetconn_test.go.html#7937058">strings</a></span><span class="op" id="7938417">.</span><span class="ident" id="7938418">Split</span><span class="op" id="7938423">(</span><span class="ident" id="7938424"><a href="/net/packetconn_test.go.html#7938368">tt</a></span><span class="op" id="7938426">.</span><span class="ident" id="7938427">net</span><span class="op" id="7938430">,</span>&nbsp;<span class="string" id="7938432">&#34;:&#34;</span><span class="op" id="7938435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7938439">wb</span><span class="op" id="7938441">,</span>&nbsp;<span class="ident" id="7938443">skipOrFatalFn</span>&nbsp;<span class="op" id="7938457">:=</span>&nbsp;<span class="ident" id="7938460"><a href="/net/packetconn_test.go.html#7937095">packetConnTestData</a></span><span class="op" id="7938478">(</span><span class="ident" id="7938479"><a href="/net/packetconn_test.go.html#7938192">t</a></span><span class="op" id="7938480">,</span>&nbsp;<span class="ident" id="7938482"><a href="/net/packetconn_test.go.html#7938400">netstr</a></span><span class="op" id="7938488">[</span><span class="num" id="7938489">0</span><span class="op" id="7938490">]</span><span class="op" id="7938491">,</span>&nbsp;<span class="ident" id="7938493"><a href="/net/packetconn_test.go.html#7938365">i</a></span><span class="op" id="7938494">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7938498">if</span>&nbsp;<span class="ident" id="7938501"><a href="/net/packetconn_test.go.html#7938443">skipOrFatalFn</a></span>&nbsp;<span class="op" id="7938515">!=</span>&nbsp;<span class="ident" id="7938518">nil</span>&nbsp;<span class="op" id="7938522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7938527"><a href="/net/packetconn_test.go.html#7938443">skipOrFatalFn</a></span><span class="op" id="7938540">(</span><span class="op" id="7938541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7938546">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7938557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7938562">c1</span><span class="op" id="7938564">,</span>&nbsp;<span class="ident" id="7938566">err</span>&nbsp;<span class="op" id="7938570">:=</span>&nbsp;<span class="ident" id="7938573"><a href="/net/dial.go.html#1338827">ListenPacket</a></span><span class="op" id="7938585">(</span><span class="ident" id="7938586"><a href="/net/packetconn_test.go.html#7938368">tt</a></span><span class="op" id="7938588">.</span><span class="ident" id="7938589">net</span><span class="op" id="7938592">,</span>&nbsp;<span class="ident" id="7938594"><a href="/net/packetconn_test.go.html#7938368">tt</a></span><span class="op" id="7938596">.</span><span class="ident" id="7938597">addr1</span><span class="op" id="7938602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7938606">if</span>&nbsp;<span class="ident" id="7938609"><a href="/net/packetconn_test.go.html#7938566">err</a></span>&nbsp;<span class="op" id="7938613">!=</span>&nbsp;<span class="ident" id="7938616">nil</span>&nbsp;<span class="op" id="7938620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7938625"><a href="/net/packetconn_test.go.html#7938192">t</a></span><span class="op" id="7938626">.</span><span class="ident" id="7938627">Fatalf</span><span class="op" id="7938633">(</span><span class="string" id="7938634">&#34;ListenPacket&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7938659">,</span>&nbsp;<span class="ident" id="7938661"><a href="/net/packetconn_test.go.html#7938566">err</a></span><span class="op" id="7938664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7938668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7938672">defer</span>&nbsp;<span class="ident" id="7938678"><a href="/net/packetconn_test.go.html#7938209">closer</a></span><span class="op" id="7938684">(</span><span class="ident" id="7938685"><a href="/net/packetconn_test.go.html#7938562">c1</a></span><span class="op" id="7938687">,</span>&nbsp;<span class="ident" id="7938689"><a href="/net/packetconn_test.go.html#7938400">netstr</a></span><span class="op" id="7938695">[</span><span class="num" id="7938696">0</span><span class="op" id="7938697">]</span><span class="op" id="7938698">,</span>&nbsp;<span class="ident" id="7938700"><a href="/net/packetconn_test.go.html#7938368">tt</a></span><span class="op" id="7938702">.</span><span class="ident" id="7938703">addr1</span><span class="op" id="7938708">,</span>&nbsp;<span class="ident" id="7938710"><a href="/net/packetconn_test.go.html#7938368">tt</a></span><span class="op" id="7938712">.</span><span class="ident" id="7938713">addr2</span><span class="op" id="7938718">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7938722"><a href="/net/packetconn_test.go.html#7938562">c1</a></span><span class="op" id="7938724">.</span><span class="ident" id="7938725">LocalAddr</span><span class="op" id="7938734">(</span><span class="op" id="7938735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7938739"><a href="/net/packetconn_test.go.html#7938562">c1</a></span><span class="op" id="7938741">.</span><span class="ident" id="7938742">SetDeadline</span><span class="op" id="7938753">(</span><span class="ident" id="7938754"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7938758">.</span><span class="ident" id="7938759">Now</span><span class="op" id="7938762">(</span><span class="op" id="7938763">)</span><span class="op" id="7938764">.</span><span class="ident" id="7938765">Add</span><span class="op" id="7938768">(</span><span class="num" id="7938769">100</span>&nbsp;<span class="op" id="7938773">*</span>&nbsp;<span class="ident" id="7938775"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7938779">.</span><span class="ident" id="7938780">Millisecond</span><span class="op" id="7938791">)</span><span class="op" id="7938792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7938796"><a href="/net/packetconn_test.go.html#7938562">c1</a></span><span class="op" id="7938798">.</span><span class="ident" id="7938799">SetReadDeadline</span><span class="op" id="7938814">(</span><span class="ident" id="7938815"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7938819">.</span><span class="ident" id="7938820">Now</span><span class="op" id="7938823">(</span><span class="op" id="7938824">)</span><span class="op" id="7938825">.</span><span class="ident" id="7938826">Add</span><span class="op" id="7938829">(</span><span class="num" id="7938830">100</span>&nbsp;<span class="op" id="7938834">*</span>&nbsp;<span class="ident" id="7938836"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7938840">.</span><span class="ident" id="7938841">Millisecond</span><span class="op" id="7938852">)</span><span class="op" id="7938853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7938857"><a href="/net/packetconn_test.go.html#7938562">c1</a></span><span class="op" id="7938859">.</span><span class="ident" id="7938860">SetWriteDeadline</span><span class="op" id="7938876">(</span><span class="ident" id="7938877"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7938881">.</span><span class="ident" id="7938882">Now</span><span class="op" id="7938885">(</span><span class="op" id="7938886">)</span><span class="op" id="7938887">.</span><span class="ident" id="7938888">Add</span><span class="op" id="7938891">(</span><span class="num" id="7938892">100</span>&nbsp;<span class="op" id="7938896">*</span>&nbsp;<span class="ident" id="7938898"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7938902">.</span><span class="ident" id="7938903">Millisecond</span><span class="op" id="7938914">)</span><span class="op" id="7938915">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7938920">c2</span><span class="op" id="7938922">,</span>&nbsp;<span class="ident" id="7938924"><a href="/net/packetconn_test.go.html#7938566">err</a></span>&nbsp;<span class="op" id="7938928">:=</span>&nbsp;<span class="ident" id="7938931"><a href="/net/dial.go.html#1338827">ListenPacket</a></span><span class="op" id="7938943">(</span><span class="ident" id="7938944"><a href="/net/packetconn_test.go.html#7938368">tt</a></span><span class="op" id="7938946">.</span><span class="ident" id="7938947">net</span><span class="op" id="7938950">,</span>&nbsp;<span class="ident" id="7938952"><a href="/net/packetconn_test.go.html#7938368">tt</a></span><span class="op" id="7938954">.</span><span class="ident" id="7938955">addr2</span><span class="op" id="7938960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7938964">if</span>&nbsp;<span class="ident" id="7938967"><a href="/net/packetconn_test.go.html#7938566">err</a></span>&nbsp;<span class="op" id="7938971">!=</span>&nbsp;<span class="ident" id="7938974">nil</span>&nbsp;<span class="op" id="7938978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7938983"><a href="/net/packetconn_test.go.html#7938192">t</a></span><span class="op" id="7938984">.</span><span class="ident" id="7938985">Fatalf</span><span class="op" id="7938991">(</span><span class="string" id="7938992">&#34;ListenPacket&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7939017">,</span>&nbsp;<span class="ident" id="7939019"><a href="/net/packetconn_test.go.html#7938566">err</a></span><span class="op" id="7939022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7939026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7939030">defer</span>&nbsp;<span class="ident" id="7939036"><a href="/net/packetconn_test.go.html#7938209">closer</a></span><span class="op" id="7939042">(</span><span class="ident" id="7939043"><a href="/net/packetconn_test.go.html#7938920">c2</a></span><span class="op" id="7939045">,</span>&nbsp;<span class="ident" id="7939047"><a href="/net/packetconn_test.go.html#7938400">netstr</a></span><span class="op" id="7939053">[</span><span class="num" id="7939054">0</span><span class="op" id="7939055">]</span><span class="op" id="7939056">,</span>&nbsp;<span class="ident" id="7939058"><a href="/net/packetconn_test.go.html#7938368">tt</a></span><span class="op" id="7939060">.</span><span class="ident" id="7939061">addr1</span><span class="op" id="7939066">,</span>&nbsp;<span class="ident" id="7939068"><a href="/net/packetconn_test.go.html#7938368">tt</a></span><span class="op" id="7939070">.</span><span class="ident" id="7939071">addr2</span><span class="op" id="7939076">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7939080"><a href="/net/packetconn_test.go.html#7938920">c2</a></span><span class="op" id="7939082">.</span><span class="ident" id="7939083">LocalAddr</span><span class="op" id="7939092">(</span><span class="op" id="7939093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7939097"><a href="/net/packetconn_test.go.html#7938920">c2</a></span><span class="op" id="7939099">.</span><span class="ident" id="7939100">SetDeadline</span><span class="op" id="7939111">(</span><span class="ident" id="7939112"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7939116">.</span><span class="ident" id="7939117">Now</span><span class="op" id="7939120">(</span><span class="op" id="7939121">)</span><span class="op" id="7939122">.</span><span class="ident" id="7939123">Add</span><span class="op" id="7939126">(</span><span class="num" id="7939127">100</span>&nbsp;<span class="op" id="7939131">*</span>&nbsp;<span class="ident" id="7939133"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7939137">.</span><span class="ident" id="7939138">Millisecond</span><span class="op" id="7939149">)</span><span class="op" id="7939150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7939154"><a href="/net/packetconn_test.go.html#7938920">c2</a></span><span class="op" id="7939156">.</span><span class="ident" id="7939157">SetReadDeadline</span><span class="op" id="7939172">(</span><span class="ident" id="7939173"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7939177">.</span><span class="ident" id="7939178">Now</span><span class="op" id="7939181">(</span><span class="op" id="7939182">)</span><span class="op" id="7939183">.</span><span class="ident" id="7939184">Add</span><span class="op" id="7939187">(</span><span class="num" id="7939188">100</span>&nbsp;<span class="op" id="7939192">*</span>&nbsp;<span class="ident" id="7939194"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7939198">.</span><span class="ident" id="7939199">Millisecond</span><span class="op" id="7939210">)</span><span class="op" id="7939211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7939215"><a href="/net/packetconn_test.go.html#7938920">c2</a></span><span class="op" id="7939217">.</span><span class="ident" id="7939218">SetWriteDeadline</span><span class="op" id="7939234">(</span><span class="ident" id="7939235"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7939239">.</span><span class="ident" id="7939240">Now</span><span class="op" id="7939243">(</span><span class="op" id="7939244">)</span><span class="op" id="7939245">.</span><span class="ident" id="7939246">Add</span><span class="op" id="7939249">(</span><span class="num" id="7939250">100</span>&nbsp;<span class="op" id="7939254">*</span>&nbsp;<span class="ident" id="7939256"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7939260">.</span><span class="ident" id="7939261">Millisecond</span><span class="op" id="7939272">)</span><span class="op" id="7939273">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7939278">if</span>&nbsp;<span class="ident" id="7939281">_</span><span class="op" id="7939282">,</span>&nbsp;<span class="ident" id="7939284">err</span>&nbsp;<span class="op" id="7939288">:=</span>&nbsp;<span class="ident" id="7939291"><a href="/net/packetconn_test.go.html#7938562">c1</a></span><span class="op" id="7939293">.</span><span class="ident" id="7939294">WriteTo</span><span class="op" id="7939301">(</span><span class="ident" id="7939302"><a href="/net/packetconn_test.go.html#7938439">wb</a></span><span class="op" id="7939304">,</span>&nbsp;<span class="ident" id="7939306"><a href="/net/packetconn_test.go.html#7938920">c2</a></span><span class="op" id="7939308">.</span><span class="ident" id="7939309">LocalAddr</span><span class="op" id="7939318">(</span><span class="op" id="7939319">)</span><span class="op" id="7939320">)</span><span class="op" id="7939321">;</span>&nbsp;<span class="ident" id="7939323"><a href="/net/packetconn_test.go.html#7939284">err</a></span>&nbsp;<span class="op" id="7939327">!=</span>&nbsp;<span class="ident" id="7939330">nil</span>&nbsp;<span class="op" id="7939334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7939339"><a href="/net/packetconn_test.go.html#7938192">t</a></span><span class="op" id="7939340">.</span><span class="ident" id="7939341">Fatalf</span><span class="op" id="7939347">(</span><span class="string" id="7939348">&#34;PacketConn.WriteTo&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7939379">,</span>&nbsp;<span class="ident" id="7939381"><a href="/net/packetconn_test.go.html#7939284">err</a></span><span class="op" id="7939384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7939388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7939392">rb2</span>&nbsp;<span class="op" id="7939396">:=</span>&nbsp;<span class="builtinfunc" id="7939399">make</span><span class="op" id="7939403">(</span><span class="op" id="7939404">[</span><span class="op" id="7939405">]</span><span class="builtintype" id="7939406">byte</span><span class="op" id="7939410">,</span>&nbsp;<span class="num" id="7939412">128</span><span class="op" id="7939415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7939419">if</span>&nbsp;<span class="ident" id="7939422">_</span><span class="op" id="7939423">,</span>&nbsp;<span class="ident" id="7939425">_</span><span class="op" id="7939426">,</span>&nbsp;<span class="ident" id="7939428">err</span>&nbsp;<span class="op" id="7939432">:=</span>&nbsp;<span class="ident" id="7939435"><a href="/net/packetconn_test.go.html#7938920">c2</a></span><span class="op" id="7939437">.</span><span class="ident" id="7939438">ReadFrom</span><span class="op" id="7939446">(</span><span class="ident" id="7939447"><a href="/net/packetconn_test.go.html#7939392">rb2</a></span><span class="op" id="7939450">)</span><span class="op" id="7939451">;</span>&nbsp;<span class="ident" id="7939453"><a href="/net/packetconn_test.go.html#7939428">err</a></span>&nbsp;<span class="op" id="7939457">!=</span>&nbsp;<span class="ident" id="7939460">nil</span>&nbsp;<span class="op" id="7939464">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7939469"><a href="/net/packetconn_test.go.html#7938192">t</a></span><span class="op" id="7939470">.</span><span class="ident" id="7939471">Fatalf</span><span class="op" id="7939477">(</span><span class="string" id="7939478">&#34;PacketConn.ReadFrom&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7939510">,</span>&nbsp;<span class="ident" id="7939512"><a href="/net/packetconn_test.go.html#7939428">err</a></span><span class="op" id="7939515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7939519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7939523">if</span>&nbsp;<span class="ident" id="7939526">_</span><span class="op" id="7939527">,</span>&nbsp;<span class="ident" id="7939529">err</span>&nbsp;<span class="op" id="7939533">:=</span>&nbsp;<span class="ident" id="7939536"><a href="/net/packetconn_test.go.html#7938920">c2</a></span><span class="op" id="7939538">.</span><span class="ident" id="7939539">WriteTo</span><span class="op" id="7939546">(</span><span class="ident" id="7939547"><a href="/net/packetconn_test.go.html#7938439">wb</a></span><span class="op" id="7939549">,</span>&nbsp;<span class="ident" id="7939551"><a href="/net/packetconn_test.go.html#7938562">c1</a></span><span class="op" id="7939553">.</span><span class="ident" id="7939554">LocalAddr</span><span class="op" id="7939563">(</span><span class="op" id="7939564">)</span><span class="op" id="7939565">)</span><span class="op" id="7939566">;</span>&nbsp;<span class="ident" id="7939568"><a href="/net/packetconn_test.go.html#7939529">err</a></span>&nbsp;<span class="op" id="7939572">!=</span>&nbsp;<span class="ident" id="7939575">nil</span>&nbsp;<span class="op" id="7939579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7939584"><a href="/net/packetconn_test.go.html#7938192">t</a></span><span class="op" id="7939585">.</span><span class="ident" id="7939586">Fatalf</span><span class="op" id="7939592">(</span><span class="string" id="7939593">&#34;PacketConn.WriteTo&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7939624">,</span>&nbsp;<span class="ident" id="7939626"><a href="/net/packetconn_test.go.html#7939529">err</a></span><span class="op" id="7939629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7939633">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7939637">rb1</span>&nbsp;<span class="op" id="7939641">:=</span>&nbsp;<span class="builtinfunc" id="7939644">make</span><span class="op" id="7939648">(</span><span class="op" id="7939649">[</span><span class="op" id="7939650">]</span><span class="builtintype" id="7939651">byte</span><span class="op" id="7939655">,</span>&nbsp;<span class="num" id="7939657">128</span><span class="op" id="7939660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7939664">if</span>&nbsp;<span class="ident" id="7939667">_</span><span class="op" id="7939668">,</span>&nbsp;<span class="ident" id="7939670">_</span><span class="op" id="7939671">,</span>&nbsp;<span class="ident" id="7939673">err</span>&nbsp;<span class="op" id="7939677">:=</span>&nbsp;<span class="ident" id="7939680"><a href="/net/packetconn_test.go.html#7938562">c1</a></span><span class="op" id="7939682">.</span><span class="ident" id="7939683">ReadFrom</span><span class="op" id="7939691">(</span><span class="ident" id="7939692"><a href="/net/packetconn_test.go.html#7939637">rb1</a></span><span class="op" id="7939695">)</span><span class="op" id="7939696">;</span>&nbsp;<span class="ident" id="7939698"><a href="/net/packetconn_test.go.html#7939673">err</a></span>&nbsp;<span class="op" id="7939702">!=</span>&nbsp;<span class="ident" id="7939705">nil</span>&nbsp;<span class="op" id="7939709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7939714"><a href="/net/packetconn_test.go.html#7938192">t</a></span><span class="op" id="7939715">.</span><span class="ident" id="7939716">Fatalf</span><span class="op" id="7939722">(</span><span class="string" id="7939723">&#34;PacketConn.ReadFrom&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7939755">,</span>&nbsp;<span class="ident" id="7939757"><a href="/net/packetconn_test.go.html#7939673">err</a></span><span class="op" id="7939760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7939764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7939767">}</span><br>
<span class="lineno">120</span><span class="op" id="7939769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7939772">func</span>&nbsp;<span class="ident" id="7939777">TestConnAndPacketConn</span><span class="op" id="7939798">(</span><span class="ident" id="7939799">t</span>&nbsp;<span class="op" id="7939801">*</span><span class="ident" id="7939802"><a href="/net/packetconn_test.go.html#7937069">testing</a></span><span class="op" id="7939809">.</span><span class="ident" id="7939810">T</span><span class="op" id="7939811">)</span>&nbsp;<span class="op" id="7939813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7939816">closer</span>&nbsp;<span class="op" id="7939823">:=</span>&nbsp;<span class="keyword" id="7939826">func</span><span class="op" id="7939830">(</span><span class="ident" id="7939831">c</span>&nbsp;<span class="ident" id="7939833"><a href="/net/net.go.html#1469751">PacketConn</a></span><span class="op" id="7939843">,</span>&nbsp;<span class="ident" id="7939845">net</span><span class="op" id="7939848">,</span>&nbsp;<span class="ident" id="7939850">addr1</span><span class="op" id="7939855">,</span>&nbsp;<span class="ident" id="7939857">addr2</span>&nbsp;<span class="builtintype" id="7939863">string</span><span class="op" id="7939869">)</span>&nbsp;<span class="op" id="7939871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7939875"><a href="/net/packetconn_test.go.html#7939831">c</a></span><span class="op" id="7939876">.</span><span class="ident" id="7939877">Close</span><span class="op" id="7939882">(</span><span class="op" id="7939883">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7939887">switch</span>&nbsp;<span class="ident" id="7939894"><a href="/net/packetconn_test.go.html#7939845">net</a></span>&nbsp;<span class="op" id="7939898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7939902">case</span>&nbsp;<span class="string" id="7939907">&#34;unixgram&#34;</span><span class="op" id="7939917">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7939922"><a href="/net/packetconn_test.go.html#7937041">os</a></span><span class="op" id="7939924">.</span><span class="ident" id="7939925">Remove</span><span class="op" id="7939931">(</span><span class="ident" id="7939932"><a href="/net/packetconn_test.go.html#7939850">addr1</a></span><span class="op" id="7939937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7939942"><a href="/net/packetconn_test.go.html#7937041">os</a></span><span class="op" id="7939944">.</span><span class="ident" id="7939945">Remove</span><span class="op" id="7939951">(</span><span class="ident" id="7939952"><a href="/net/packetconn_test.go.html#7939857">addr2</a></span><span class="op" id="7939957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7939961">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7939964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7939968">for</span>&nbsp;<span class="ident" id="7939972">i</span><span class="op" id="7939973">,</span>&nbsp;<span class="ident" id="7939975">tt</span>&nbsp;<span class="op" id="7939978">:=</span>&nbsp;<span class="keyword" id="7939981">range</span>&nbsp;<span class="ident" id="7939987"><a href="/net/packetconn_test.go.html#7937968">packetConnTests</a></span>&nbsp;<span class="op" id="7940003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7940007">var</span>&nbsp;<span class="ident" id="7940011">wb</span>&nbsp;<span class="op" id="7940014">[</span><span class="op" id="7940015">]</span><span class="builtintype" id="7940016">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940023">netstr</span>&nbsp;<span class="op" id="7940030">:=</span>&nbsp;<span class="ident" id="7940033"><a href="/net/packetconn_test.go.html#7937058">strings</a></span><span class="op" id="7940040">.</span><span class="ident" id="7940041">Split</span><span class="op" id="7940046">(</span><span class="ident" id="7940047"><a href="/net/packetconn_test.go.html#7939975">tt</a></span><span class="op" id="7940049">.</span><span class="ident" id="7940050">net</span><span class="op" id="7940053">,</span>&nbsp;<span class="string" id="7940055">&#34;:&#34;</span><span class="op" id="7940058">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940062"><a href="/net/packetconn_test.go.html#7940011">wb</a></span><span class="op" id="7940064">,</span>&nbsp;<span class="ident" id="7940066">skipOrFatalFn</span>&nbsp;<span class="op" id="7940080">:=</span>&nbsp;<span class="ident" id="7940083"><a href="/net/packetconn_test.go.html#7937095">packetConnTestData</a></span><span class="op" id="7940101">(</span><span class="ident" id="7940102"><a href="/net/packetconn_test.go.html#7939799">t</a></span><span class="op" id="7940103">,</span>&nbsp;<span class="ident" id="7940105"><a href="/net/packetconn_test.go.html#7940023">netstr</a></span><span class="op" id="7940111">[</span><span class="num" id="7940112">0</span><span class="op" id="7940113">]</span><span class="op" id="7940114">,</span>&nbsp;<span class="ident" id="7940116"><a href="/net/packetconn_test.go.html#7939972">i</a></span><span class="op" id="7940117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7940121">if</span>&nbsp;<span class="ident" id="7940124"><a href="/net/packetconn_test.go.html#7940066">skipOrFatalFn</a></span>&nbsp;<span class="op" id="7940138">!=</span>&nbsp;<span class="ident" id="7940141">nil</span>&nbsp;<span class="op" id="7940145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940150"><a href="/net/packetconn_test.go.html#7940066">skipOrFatalFn</a></span><span class="op" id="7940163">(</span><span class="op" id="7940164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7940169">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7940180">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940185">c1</span><span class="op" id="7940187">,</span>&nbsp;<span class="ident" id="7940189">err</span>&nbsp;<span class="op" id="7940193">:=</span>&nbsp;<span class="ident" id="7940196"><a href="/net/dial.go.html#1338827">ListenPacket</a></span><span class="op" id="7940208">(</span><span class="ident" id="7940209"><a href="/net/packetconn_test.go.html#7939975">tt</a></span><span class="op" id="7940211">.</span><span class="ident" id="7940212">net</span><span class="op" id="7940215">,</span>&nbsp;<span class="ident" id="7940217"><a href="/net/packetconn_test.go.html#7939975">tt</a></span><span class="op" id="7940219">.</span><span class="ident" id="7940220">addr1</span><span class="op" id="7940225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7940229">if</span>&nbsp;<span class="ident" id="7940232"><a href="/net/packetconn_test.go.html#7940189">err</a></span>&nbsp;<span class="op" id="7940236">!=</span>&nbsp;<span class="ident" id="7940239">nil</span>&nbsp;<span class="op" id="7940243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940248"><a href="/net/packetconn_test.go.html#7939799">t</a></span><span class="op" id="7940249">.</span><span class="ident" id="7940250">Fatalf</span><span class="op" id="7940256">(</span><span class="string" id="7940257">&#34;ListenPacket&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7940282">,</span>&nbsp;<span class="ident" id="7940284"><a href="/net/packetconn_test.go.html#7940189">err</a></span><span class="op" id="7940287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7940291">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7940295">defer</span>&nbsp;<span class="ident" id="7940301"><a href="/net/packetconn_test.go.html#7939816">closer</a></span><span class="op" id="7940307">(</span><span class="ident" id="7940308"><a href="/net/packetconn_test.go.html#7940185">c1</a></span><span class="op" id="7940310">,</span>&nbsp;<span class="ident" id="7940312"><a href="/net/packetconn_test.go.html#7940023">netstr</a></span><span class="op" id="7940318">[</span><span class="num" id="7940319">0</span><span class="op" id="7940320">]</span><span class="op" id="7940321">,</span>&nbsp;<span class="ident" id="7940323"><a href="/net/packetconn_test.go.html#7939975">tt</a></span><span class="op" id="7940325">.</span><span class="ident" id="7940326">addr1</span><span class="op" id="7940331">,</span>&nbsp;<span class="ident" id="7940333"><a href="/net/packetconn_test.go.html#7939975">tt</a></span><span class="op" id="7940335">.</span><span class="ident" id="7940336">addr2</span><span class="op" id="7940341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940345"><a href="/net/packetconn_test.go.html#7940185">c1</a></span><span class="op" id="7940347">.</span><span class="ident" id="7940348">LocalAddr</span><span class="op" id="7940357">(</span><span class="op" id="7940358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940362"><a href="/net/packetconn_test.go.html#7940185">c1</a></span><span class="op" id="7940364">.</span><span class="ident" id="7940365">SetDeadline</span><span class="op" id="7940376">(</span><span class="ident" id="7940377"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7940381">.</span><span class="ident" id="7940382">Now</span><span class="op" id="7940385">(</span><span class="op" id="7940386">)</span><span class="op" id="7940387">.</span><span class="ident" id="7940388">Add</span><span class="op" id="7940391">(</span><span class="num" id="7940392">100</span>&nbsp;<span class="op" id="7940396">*</span>&nbsp;<span class="ident" id="7940398"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7940402">.</span><span class="ident" id="7940403">Millisecond</span><span class="op" id="7940414">)</span><span class="op" id="7940415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940419"><a href="/net/packetconn_test.go.html#7940185">c1</a></span><span class="op" id="7940421">.</span><span class="ident" id="7940422">SetReadDeadline</span><span class="op" id="7940437">(</span><span class="ident" id="7940438"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7940442">.</span><span class="ident" id="7940443">Now</span><span class="op" id="7940446">(</span><span class="op" id="7940447">)</span><span class="op" id="7940448">.</span><span class="ident" id="7940449">Add</span><span class="op" id="7940452">(</span><span class="num" id="7940453">100</span>&nbsp;<span class="op" id="7940457">*</span>&nbsp;<span class="ident" id="7940459"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7940463">.</span><span class="ident" id="7940464">Millisecond</span><span class="op" id="7940475">)</span><span class="op" id="7940476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940480"><a href="/net/packetconn_test.go.html#7940185">c1</a></span><span class="op" id="7940482">.</span><span class="ident" id="7940483">SetWriteDeadline</span><span class="op" id="7940499">(</span><span class="ident" id="7940500"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7940504">.</span><span class="ident" id="7940505">Now</span><span class="op" id="7940508">(</span><span class="op" id="7940509">)</span><span class="op" id="7940510">.</span><span class="ident" id="7940511">Add</span><span class="op" id="7940514">(</span><span class="num" id="7940515">100</span>&nbsp;<span class="op" id="7940519">*</span>&nbsp;<span class="ident" id="7940521"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7940525">.</span><span class="ident" id="7940526">Millisecond</span><span class="op" id="7940537">)</span><span class="op" id="7940538">)</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940543">c2</span><span class="op" id="7940545">,</span>&nbsp;<span class="ident" id="7940547"><a href="/net/packetconn_test.go.html#7940189">err</a></span>&nbsp;<span class="op" id="7940551">:=</span>&nbsp;<span class="ident" id="7940554"><a href="/net/dial.go.html#1334377">Dial</a></span><span class="op" id="7940558">(</span><span class="ident" id="7940559"><a href="/net/packetconn_test.go.html#7939975">tt</a></span><span class="op" id="7940561">.</span><span class="ident" id="7940562">net</span><span class="op" id="7940565">,</span>&nbsp;<span class="ident" id="7940567"><a href="/net/packetconn_test.go.html#7940185">c1</a></span><span class="op" id="7940569">.</span><span class="ident" id="7940570">LocalAddr</span><span class="op" id="7940579">(</span><span class="op" id="7940580">)</span><span class="op" id="7940581">.</span><span class="ident" id="7940582">String</span><span class="op" id="7940588">(</span><span class="op" id="7940589">)</span><span class="op" id="7940590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7940594">if</span>&nbsp;<span class="ident" id="7940597"><a href="/net/packetconn_test.go.html#7940189">err</a></span>&nbsp;<span class="op" id="7940601">!=</span>&nbsp;<span class="ident" id="7940604">nil</span>&nbsp;<span class="op" id="7940608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940613"><a href="/net/packetconn_test.go.html#7939799">t</a></span><span class="op" id="7940614">.</span><span class="ident" id="7940615">Fatalf</span><span class="op" id="7940621">(</span><span class="string" id="7940622">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7940639">,</span>&nbsp;<span class="ident" id="7940641"><a href="/net/packetconn_test.go.html#7940189">err</a></span><span class="op" id="7940644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7940648">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7940652">defer</span>&nbsp;<span class="ident" id="7940658"><a href="/net/packetconn_test.go.html#7940543">c2</a></span><span class="op" id="7940660">.</span><span class="ident" id="7940661">Close</span><span class="op" id="7940666">(</span><span class="op" id="7940667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940671"><a href="/net/packetconn_test.go.html#7940543">c2</a></span><span class="op" id="7940673">.</span><span class="ident" id="7940674">LocalAddr</span><span class="op" id="7940683">(</span><span class="op" id="7940684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940688"><a href="/net/packetconn_test.go.html#7940543">c2</a></span><span class="op" id="7940690">.</span><span class="ident" id="7940691">RemoteAddr</span><span class="op" id="7940701">(</span><span class="op" id="7940702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940706"><a href="/net/packetconn_test.go.html#7940543">c2</a></span><span class="op" id="7940708">.</span><span class="ident" id="7940709">SetDeadline</span><span class="op" id="7940720">(</span><span class="ident" id="7940721"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7940725">.</span><span class="ident" id="7940726">Now</span><span class="op" id="7940729">(</span><span class="op" id="7940730">)</span><span class="op" id="7940731">.</span><span class="ident" id="7940732">Add</span><span class="op" id="7940735">(</span><span class="num" id="7940736">100</span>&nbsp;<span class="op" id="7940740">*</span>&nbsp;<span class="ident" id="7940742"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7940746">.</span><span class="ident" id="7940747">Millisecond</span><span class="op" id="7940758">)</span><span class="op" id="7940759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940763"><a href="/net/packetconn_test.go.html#7940543">c2</a></span><span class="op" id="7940765">.</span><span class="ident" id="7940766">SetReadDeadline</span><span class="op" id="7940781">(</span><span class="ident" id="7940782"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7940786">.</span><span class="ident" id="7940787">Now</span><span class="op" id="7940790">(</span><span class="op" id="7940791">)</span><span class="op" id="7940792">.</span><span class="ident" id="7940793">Add</span><span class="op" id="7940796">(</span><span class="num" id="7940797">100</span>&nbsp;<span class="op" id="7940801">*</span>&nbsp;<span class="ident" id="7940803"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7940807">.</span><span class="ident" id="7940808">Millisecond</span><span class="op" id="7940819">)</span><span class="op" id="7940820">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940824"><a href="/net/packetconn_test.go.html#7940543">c2</a></span><span class="op" id="7940826">.</span><span class="ident" id="7940827">SetWriteDeadline</span><span class="op" id="7940843">(</span><span class="ident" id="7940844"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7940848">.</span><span class="ident" id="7940849">Now</span><span class="op" id="7940852">(</span><span class="op" id="7940853">)</span><span class="op" id="7940854">.</span><span class="ident" id="7940855">Add</span><span class="op" id="7940858">(</span><span class="num" id="7940859">100</span>&nbsp;<span class="op" id="7940863">*</span>&nbsp;<span class="ident" id="7940865"><a href="/net/packetconn_test.go.html#7937080">time</a></span><span class="op" id="7940869">.</span><span class="ident" id="7940870">Millisecond</span><span class="op" id="7940881">)</span><span class="op" id="7940882">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7940887">if</span>&nbsp;<span class="ident" id="7940890">_</span><span class="op" id="7940891">,</span>&nbsp;<span class="ident" id="7940893">err</span>&nbsp;<span class="op" id="7940897">:=</span>&nbsp;<span class="ident" id="7940900"><a href="/net/packetconn_test.go.html#7940543">c2</a></span><span class="op" id="7940902">.</span><span class="ident" id="7940903">Write</span><span class="op" id="7940908">(</span><span class="ident" id="7940909"><a href="/net/packetconn_test.go.html#7940011">wb</a></span><span class="op" id="7940911">)</span><span class="op" id="7940912">;</span>&nbsp;<span class="ident" id="7940914"><a href="/net/packetconn_test.go.html#7940893">err</a></span>&nbsp;<span class="op" id="7940918">!=</span>&nbsp;<span class="ident" id="7940921">nil</span>&nbsp;<span class="op" id="7940925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940930"><a href="/net/packetconn_test.go.html#7939799">t</a></span><span class="op" id="7940931">.</span><span class="ident" id="7940932">Fatalf</span><span class="op" id="7940938">(</span><span class="string" id="7940939">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7940962">,</span>&nbsp;<span class="ident" id="7940964"><a href="/net/packetconn_test.go.html#7940893">err</a></span><span class="op" id="7940967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7940971">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7940975">rb1</span>&nbsp;<span class="op" id="7940979">:=</span>&nbsp;<span class="builtinfunc" id="7940982">make</span><span class="op" id="7940986">(</span><span class="op" id="7940987">[</span><span class="op" id="7940988">]</span><span class="builtintype" id="7940989">byte</span><span class="op" id="7940993">,</span>&nbsp;<span class="num" id="7940995">128</span><span class="op" id="7940998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7941002">if</span>&nbsp;<span class="ident" id="7941005">_</span><span class="op" id="7941006">,</span>&nbsp;<span class="ident" id="7941008">_</span><span class="op" id="7941009">,</span>&nbsp;<span class="ident" id="7941011">err</span>&nbsp;<span class="op" id="7941015">:=</span>&nbsp;<span class="ident" id="7941018"><a href="/net/packetconn_test.go.html#7940185">c1</a></span><span class="op" id="7941020">.</span><span class="ident" id="7941021">ReadFrom</span><span class="op" id="7941029">(</span><span class="ident" id="7941030"><a href="/net/packetconn_test.go.html#7940975">rb1</a></span><span class="op" id="7941033">)</span><span class="op" id="7941034">;</span>&nbsp;<span class="ident" id="7941036"><a href="/net/packetconn_test.go.html#7941011">err</a></span>&nbsp;<span class="op" id="7941040">!=</span>&nbsp;<span class="ident" id="7941043">nil</span>&nbsp;<span class="op" id="7941047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7941052"><a href="/net/packetconn_test.go.html#7939799">t</a></span><span class="op" id="7941053">.</span><span class="ident" id="7941054">Fatalf</span><span class="op" id="7941060">(</span><span class="string" id="7941061">&#34;PacketConn.ReadFrom&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7941093">,</span>&nbsp;<span class="ident" id="7941095"><a href="/net/packetconn_test.go.html#7941011">err</a></span><span class="op" id="7941098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7941102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7941106">var</span>&nbsp;<span class="ident" id="7941110">dst</span>&nbsp;<span class="ident" id="7941114"><a href="/net/net.go.html#1465097">Addr</a></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7941121">switch</span>&nbsp;<span class="ident" id="7941128"><a href="/net/packetconn_test.go.html#7940023">netstr</a></span><span class="op" id="7941134">[</span><span class="num" id="7941135">0</span><span class="op" id="7941136">]</span>&nbsp;<span class="op" id="7941138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7941142">case</span>&nbsp;<span class="string" id="7941147">&#34;ip&#34;</span><span class="op" id="7941151">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7941156"><a href="/net/packetconn_test.go.html#7941110">dst</a></span>&nbsp;<span class="op" id="7941160">=</span>&nbsp;<span class="op" id="7941162">&amp;</span><span class="ident" id="7941163"><a href="/net/iprawsock.go.html#1432036">IPAddr</a></span><span class="op" id="7941169">{</span><span class="ident" id="7941170">IP</span><span class="op" id="7941172">:</span>&nbsp;<span class="ident" id="7941174"><a href="/net/ip.go.html#1417459">IPv4</a></span><span class="op" id="7941178">(</span><span class="num" id="7941179">127</span><span class="op" id="7941182">,</span>&nbsp;<span class="num" id="7941184">0</span><span class="op" id="7941185">,</span>&nbsp;<span class="num" id="7941187">0</span><span class="op" id="7941188">,</span>&nbsp;<span class="num" id="7941190">1</span><span class="op" id="7941191">)</span><span class="op" id="7941192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7941196">case</span>&nbsp;<span class="string" id="7941201">&#34;unixgram&#34;</span><span class="op" id="7941211">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7941216">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7941227">default</span><span class="op" id="7941234">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7941239"><a href="/net/packetconn_test.go.html#7941110">dst</a></span>&nbsp;<span class="op" id="7941243">=</span>&nbsp;<span class="ident" id="7941245"><a href="/net/packetconn_test.go.html#7940543">c2</a></span><span class="op" id="7941247">.</span><span class="ident" id="7941248">LocalAddr</span><span class="op" id="7941257">(</span><span class="op" id="7941258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7941262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7941266">if</span>&nbsp;<span class="ident" id="7941269">_</span><span class="op" id="7941270">,</span>&nbsp;<span class="ident" id="7941272">err</span>&nbsp;<span class="op" id="7941276">:=</span>&nbsp;<span class="ident" id="7941279"><a href="/net/packetconn_test.go.html#7940185">c1</a></span><span class="op" id="7941281">.</span><span class="ident" id="7941282">WriteTo</span><span class="op" id="7941289">(</span><span class="ident" id="7941290"><a href="/net/packetconn_test.go.html#7940011">wb</a></span><span class="op" id="7941292">,</span>&nbsp;<span class="ident" id="7941294"><a href="/net/packetconn_test.go.html#7941110">dst</a></span><span class="op" id="7941297">)</span><span class="op" id="7941298">;</span>&nbsp;<span class="ident" id="7941300"><a href="/net/packetconn_test.go.html#7941272">err</a></span>&nbsp;<span class="op" id="7941304">!=</span>&nbsp;<span class="ident" id="7941307">nil</span>&nbsp;<span class="op" id="7941311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7941316"><a href="/net/packetconn_test.go.html#7939799">t</a></span><span class="op" id="7941317">.</span><span class="ident" id="7941318">Fatalf</span><span class="op" id="7941324">(</span><span class="string" id="7941325">&#34;PacketConn.WriteTo&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7941356">,</span>&nbsp;<span class="ident" id="7941358"><a href="/net/packetconn_test.go.html#7941272">err</a></span><span class="op" id="7941361">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7941365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7941369">rb2</span>&nbsp;<span class="op" id="7941373">:=</span>&nbsp;<span class="builtinfunc" id="7941376">make</span><span class="op" id="7941380">(</span><span class="op" id="7941381">[</span><span class="op" id="7941382">]</span><span class="builtintype" id="7941383">byte</span><span class="op" id="7941387">,</span>&nbsp;<span class="num" id="7941389">128</span><span class="op" id="7941392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7941396">if</span>&nbsp;<span class="ident" id="7941399">_</span><span class="op" id="7941400">,</span>&nbsp;<span class="ident" id="7941402">err</span>&nbsp;<span class="op" id="7941406">:=</span>&nbsp;<span class="ident" id="7941409"><a href="/net/packetconn_test.go.html#7940543">c2</a></span><span class="op" id="7941411">.</span><span class="ident" id="7941412">Read</span><span class="op" id="7941416">(</span><span class="ident" id="7941417"><a href="/net/packetconn_test.go.html#7941369">rb2</a></span><span class="op" id="7941420">)</span><span class="op" id="7941421">;</span>&nbsp;<span class="ident" id="7941423"><a href="/net/packetconn_test.go.html#7941402">err</a></span>&nbsp;<span class="op" id="7941427">!=</span>&nbsp;<span class="ident" id="7941430">nil</span>&nbsp;<span class="op" id="7941434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7941439"><a href="/net/packetconn_test.go.html#7939799">t</a></span><span class="op" id="7941440">.</span><span class="ident" id="7941441">Fatalf</span><span class="op" id="7941447">(</span><span class="string" id="7941448">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7941470">,</span>&nbsp;<span class="ident" id="7941472"><a href="/net/packetconn_test.go.html#7941402">err</a></span><span class="op" id="7941475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7941479">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7941482">}</span><br>
<span class="lineno"></span><span class="op" id="7941484">}</span>
</div>
</body>
</html>
