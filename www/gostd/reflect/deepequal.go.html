<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2656839">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2656894">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2656948">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2656999">//&nbsp;Deep&nbsp;equality&nbsp;test&nbsp;via&nbsp;reflection</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2657037">package</span>&nbsp;<span class="ident" id="2657045">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2657054">//&nbsp;During&nbsp;deepValueEqual,&nbsp;must&nbsp;keep&nbsp;track&nbsp;of&nbsp;checks&nbsp;that&nbsp;are</span><br>
<span class="lineno">10</span><span class="comment" id="2657115">//&nbsp;in&nbsp;progress.&nbsp;&nbsp;The&nbsp;comparison&nbsp;algorithm&nbsp;assumes&nbsp;that&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2657174">//&nbsp;checks&nbsp;in&nbsp;progress&nbsp;are&nbsp;true&nbsp;when&nbsp;it&nbsp;reencounters&nbsp;them.</span><br>
<span class="lineno"></span><span class="comment" id="2657232">//&nbsp;Visited&nbsp;comparisons&nbsp;are&nbsp;stored&nbsp;in&nbsp;a&nbsp;map&nbsp;indexed&nbsp;by&nbsp;visit.</span><br>
<span class="lineno"></span><span class="keyword" id="2657293">type</span>&nbsp;<span class="ident" id="2657298">visit</span>&nbsp;<span class="keyword" id="2657304">struct</span>&nbsp;<span class="op" id="2657311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657314">a1</span>&nbsp;&nbsp;<span class="builtintype" id="2657318">uintptr</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657327">a2</span>&nbsp;&nbsp;<span class="builtintype" id="2657331">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657340">typ</span>&nbsp;<span class="ident" id="2657344">Type</span><br>
<span class="lineno"></span><span class="op" id="2657349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2657352">//&nbsp;Tests&nbsp;for&nbsp;deep&nbsp;equality&nbsp;using&nbsp;reflected&nbsp;types.&nbsp;The&nbsp;map&nbsp;argument&nbsp;tracks</span><br>
<span class="lineno">20</span><span class="comment" id="2657426">//&nbsp;comparisons&nbsp;that&nbsp;have&nbsp;already&nbsp;been&nbsp;seen,&nbsp;which&nbsp;allows&nbsp;short&nbsp;circuiting&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2657503">//&nbsp;recursive&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="2657523">func</span>&nbsp;<span class="ident" id="2657528">deepValueEqual</span><span class="op" id="2657542">(</span><span class="ident" id="2657543">v1</span><span class="op" id="2657545">,</span>&nbsp;<span class="ident" id="2657547">v2</span>&nbsp;<span class="ident" id="2657550">Value</span><span class="op" id="2657555">,</span>&nbsp;<span class="ident" id="2657557">visited</span>&nbsp;<span class="keyword" id="2657565">map</span><span class="op" id="2657568">[</span><span class="ident" id="2657569">visit</span><span class="op" id="2657574">]</span><span class="builtintype" id="2657575">bool</span><span class="op" id="2657579">,</span>&nbsp;<span class="ident" id="2657581">depth</span>&nbsp;<span class="builtintype" id="2657587">int</span><span class="op" id="2657590">)</span>&nbsp;<span class="builtintype" id="2657592">bool</span>&nbsp;<span class="op" id="2657597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2657600">if</span>&nbsp;<span class="op" id="2657603">!</span><span class="ident" id="2657604">v1</span><span class="op" id="2657606">.</span><span class="ident" id="2657607">IsValid</span><span class="op" id="2657614">(</span><span class="op" id="2657615">)</span>&nbsp;<span class="op" id="2657617">||</span>&nbsp;<span class="op" id="2657620">!</span><span class="ident" id="2657621">v2</span><span class="op" id="2657623">.</span><span class="ident" id="2657624">IsValid</span><span class="op" id="2657631">(</span><span class="op" id="2657632">)</span>&nbsp;<span class="op" id="2657634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2657638">return</span>&nbsp;<span class="ident" id="2657645">v1</span><span class="op" id="2657647">.</span><span class="ident" id="2657648">IsValid</span><span class="op" id="2657655">(</span><span class="op" id="2657656">)</span>&nbsp;<span class="op" id="2657658">==</span>&nbsp;<span class="ident" id="2657661">v2</span><span class="op" id="2657663">.</span><span class="ident" id="2657664">IsValid</span><span class="op" id="2657671">(</span><span class="op" id="2657672">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2657675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2657678">if</span>&nbsp;<span class="ident" id="2657681">v1</span><span class="op" id="2657683">.</span><span class="ident" id="2657684">Type</span><span class="op" id="2657688">(</span><span class="op" id="2657689">)</span>&nbsp;<span class="op" id="2657691">!=</span>&nbsp;<span class="ident" id="2657694">v2</span><span class="op" id="2657696">.</span><span class="ident" id="2657697">Type</span><span class="op" id="2657701">(</span><span class="op" id="2657702">)</span>&nbsp;<span class="op" id="2657704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2657708">return</span>&nbsp;<span class="builtintype" id="2657715">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2657722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2657726">//&nbsp;if&nbsp;depth&nbsp;&gt;&nbsp;10&nbsp;{&nbsp;panic(&#34;deepValueEqual&#34;)&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;for&nbsp;debugging</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657789">hard</span>&nbsp;<span class="op" id="2657794">:=</span>&nbsp;<span class="keyword" id="2657797">func</span><span class="op" id="2657801">(</span><span class="ident" id="2657802">k</span>&nbsp;<span class="ident" id="2657804">Kind</span><span class="op" id="2657808">)</span>&nbsp;<span class="builtintype" id="2657810">bool</span>&nbsp;<span class="op" id="2657815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2657819">switch</span>&nbsp;<span class="ident" id="2657826">k</span>&nbsp;<span class="op" id="2657828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2657832">case</span>&nbsp;<span class="ident" id="2657837">Array</span><span class="op" id="2657842">,</span>&nbsp;<span class="ident" id="2657844">Map</span><span class="op" id="2657847">,</span>&nbsp;<span class="ident" id="2657849">Slice</span><span class="op" id="2657854">,</span>&nbsp;<span class="ident" id="2657856">Struct</span><span class="op" id="2657862">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2657867">return</span>&nbsp;<span class="builtintype" id="2657874">true</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2657881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2657885">return</span>&nbsp;<span class="builtintype" id="2657892">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2657899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2657903">if</span>&nbsp;<span class="ident" id="2657906">v1</span><span class="op" id="2657908">.</span><span class="ident" id="2657909">CanAddr</span><span class="op" id="2657916">(</span><span class="op" id="2657917">)</span>&nbsp;<span class="op" id="2657919">&amp;&amp;</span>&nbsp;<span class="ident" id="2657922">v2</span><span class="op" id="2657924">.</span><span class="ident" id="2657925">CanAddr</span><span class="op" id="2657932">(</span><span class="op" id="2657933">)</span>&nbsp;<span class="op" id="2657935">&amp;&amp;</span>&nbsp;<span class="ident" id="2657938">hard</span><span class="op" id="2657942">(</span><span class="ident" id="2657943">v1</span><span class="op" id="2657945">.</span><span class="ident" id="2657946">Kind</span><span class="op" id="2657950">(</span><span class="op" id="2657951">)</span><span class="op" id="2657952">)</span>&nbsp;<span class="op" id="2657954">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657958">addr1</span>&nbsp;<span class="op" id="2657964">:=</span>&nbsp;<span class="ident" id="2657967">v1</span><span class="op" id="2657969">.</span><span class="ident" id="2657970">UnsafeAddr</span><span class="op" id="2657980">(</span><span class="op" id="2657981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657985">addr2</span>&nbsp;<span class="op" id="2657991">:=</span>&nbsp;<span class="ident" id="2657994">v2</span><span class="op" id="2657996">.</span><span class="ident" id="2657997">UnsafeAddr</span><span class="op" id="2658007">(</span><span class="op" id="2658008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658012">if</span>&nbsp;<span class="ident" id="2658015">addr1</span>&nbsp;<span class="op" id="2658021">&gt;</span>&nbsp;<span class="ident" id="2658023">addr2</span>&nbsp;<span class="op" id="2658029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2658034">//&nbsp;Canonicalize&nbsp;order&nbsp;to&nbsp;reduce&nbsp;number&nbsp;of&nbsp;entries&nbsp;in&nbsp;visited.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2658099">addr1</span><span class="op" id="2658104">,</span>&nbsp;<span class="ident" id="2658106">addr2</span>&nbsp;<span class="op" id="2658112">=</span>&nbsp;<span class="ident" id="2658114">addr2</span><span class="op" id="2658119">,</span>&nbsp;<span class="ident" id="2658121">addr1</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2658129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2658134">//&nbsp;Short&nbsp;circuit&nbsp;if&nbsp;references&nbsp;are&nbsp;identical&nbsp;...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658185">if</span>&nbsp;<span class="ident" id="2658188">addr1</span>&nbsp;<span class="op" id="2658194">==</span>&nbsp;<span class="ident" id="2658197">addr2</span>&nbsp;<span class="op" id="2658203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658208">return</span>&nbsp;<span class="builtintype" id="2658215">true</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2658222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2658227">//&nbsp;...&nbsp;or&nbsp;already&nbsp;seen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2658252">typ</span>&nbsp;<span class="op" id="2658256">:=</span>&nbsp;<span class="ident" id="2658259">v1</span><span class="op" id="2658261">.</span><span class="ident" id="2658262">Type</span><span class="op" id="2658266">(</span><span class="op" id="2658267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2658271">v</span>&nbsp;<span class="op" id="2658273">:=</span>&nbsp;<span class="ident" id="2658276">visit</span><span class="op" id="2658281">{</span><span class="ident" id="2658282">addr1</span><span class="op" id="2658287">,</span>&nbsp;<span class="ident" id="2658289">addr2</span><span class="op" id="2658294">,</span>&nbsp;<span class="ident" id="2658296">typ</span><span class="op" id="2658299">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658303">if</span>&nbsp;<span class="ident" id="2658306">visited</span><span class="op" id="2658313">[</span><span class="ident" id="2658314">v</span><span class="op" id="2658315">]</span>&nbsp;<span class="op" id="2658317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658322">return</span>&nbsp;<span class="builtintype" id="2658329">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2658336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2658341">//&nbsp;Remember&nbsp;for&nbsp;later.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2658366">visited</span><span class="op" id="2658373">[</span><span class="ident" id="2658374">v</span><span class="op" id="2658375">]</span>&nbsp;<span class="op" id="2658377">=</span>&nbsp;<span class="builtintype" id="2658379">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2658385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658389">switch</span>&nbsp;<span class="ident" id="2658396">v1</span><span class="op" id="2658398">.</span><span class="ident" id="2658399">Kind</span><span class="op" id="2658403">(</span><span class="op" id="2658404">)</span>&nbsp;<span class="op" id="2658406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658409">case</span>&nbsp;<span class="ident" id="2658414">Array</span><span class="op" id="2658419">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658423">for</span>&nbsp;<span class="ident" id="2658427">i</span>&nbsp;<span class="op" id="2658429">:=</span>&nbsp;<span class="num" id="2658432">0</span><span class="op" id="2658433">;</span>&nbsp;<span class="ident" id="2658435">i</span>&nbsp;<span class="op" id="2658437">&lt;</span>&nbsp;<span class="ident" id="2658439">v1</span><span class="op" id="2658441">.</span><span class="ident" id="2658442">Len</span><span class="op" id="2658445">(</span><span class="op" id="2658446">)</span><span class="op" id="2658447">;</span>&nbsp;<span class="ident" id="2658449">i</span><span class="op" id="2658450">++</span>&nbsp;<span class="op" id="2658453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658458">if</span>&nbsp;<span class="op" id="2658461">!</span><span class="ident" id="2658462">deepValueEqual</span><span class="op" id="2658476">(</span><span class="ident" id="2658477">v1</span><span class="op" id="2658479">.</span><span class="ident" id="2658480">Index</span><span class="op" id="2658485">(</span><span class="ident" id="2658486">i</span><span class="op" id="2658487">)</span><span class="op" id="2658488">,</span>&nbsp;<span class="ident" id="2658490">v2</span><span class="op" id="2658492">.</span><span class="ident" id="2658493">Index</span><span class="op" id="2658498">(</span><span class="ident" id="2658499">i</span><span class="op" id="2658500">)</span><span class="op" id="2658501">,</span>&nbsp;<span class="ident" id="2658503">visited</span><span class="op" id="2658510">,</span>&nbsp;<span class="ident" id="2658512">depth</span><span class="op" id="2658517">+</span><span class="num" id="2658518">1</span><span class="op" id="2658519">)</span>&nbsp;<span class="op" id="2658521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658527">return</span>&nbsp;<span class="builtintype" id="2658534">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2658543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2658547">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658551">return</span>&nbsp;<span class="builtintype" id="2658558">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658564">case</span>&nbsp;<span class="ident" id="2658569">Slice</span><span class="op" id="2658574">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658578">if</span>&nbsp;<span class="ident" id="2658581">v1</span><span class="op" id="2658583">.</span><span class="ident" id="2658584">IsNil</span><span class="op" id="2658589">(</span><span class="op" id="2658590">)</span>&nbsp;<span class="op" id="2658592">!=</span>&nbsp;<span class="ident" id="2658595">v2</span><span class="op" id="2658597">.</span><span class="ident" id="2658598">IsNil</span><span class="op" id="2658603">(</span><span class="op" id="2658604">)</span>&nbsp;<span class="op" id="2658606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658611">return</span>&nbsp;<span class="builtintype" id="2658618">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2658626">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658630">if</span>&nbsp;<span class="ident" id="2658633">v1</span><span class="op" id="2658635">.</span><span class="ident" id="2658636">Len</span><span class="op" id="2658639">(</span><span class="op" id="2658640">)</span>&nbsp;<span class="op" id="2658642">!=</span>&nbsp;<span class="ident" id="2658645">v2</span><span class="op" id="2658647">.</span><span class="ident" id="2658648">Len</span><span class="op" id="2658651">(</span><span class="op" id="2658652">)</span>&nbsp;<span class="op" id="2658654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658659">return</span>&nbsp;<span class="builtintype" id="2658666">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2658674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658678">if</span>&nbsp;<span class="ident" id="2658681">v1</span><span class="op" id="2658683">.</span><span class="ident" id="2658684">Pointer</span><span class="op" id="2658691">(</span><span class="op" id="2658692">)</span>&nbsp;<span class="op" id="2658694">==</span>&nbsp;<span class="ident" id="2658697">v2</span><span class="op" id="2658699">.</span><span class="ident" id="2658700">Pointer</span><span class="op" id="2658707">(</span><span class="op" id="2658708">)</span>&nbsp;<span class="op" id="2658710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658715">return</span>&nbsp;<span class="builtintype" id="2658722">true</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2658729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658733">for</span>&nbsp;<span class="ident" id="2658737">i</span>&nbsp;<span class="op" id="2658739">:=</span>&nbsp;<span class="num" id="2658742">0</span><span class="op" id="2658743">;</span>&nbsp;<span class="ident" id="2658745">i</span>&nbsp;<span class="op" id="2658747">&lt;</span>&nbsp;<span class="ident" id="2658749">v1</span><span class="op" id="2658751">.</span><span class="ident" id="2658752">Len</span><span class="op" id="2658755">(</span><span class="op" id="2658756">)</span><span class="op" id="2658757">;</span>&nbsp;<span class="ident" id="2658759">i</span><span class="op" id="2658760">++</span>&nbsp;<span class="op" id="2658763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658768">if</span>&nbsp;<span class="op" id="2658771">!</span><span class="ident" id="2658772">deepValueEqual</span><span class="op" id="2658786">(</span><span class="ident" id="2658787">v1</span><span class="op" id="2658789">.</span><span class="ident" id="2658790">Index</span><span class="op" id="2658795">(</span><span class="ident" id="2658796">i</span><span class="op" id="2658797">)</span><span class="op" id="2658798">,</span>&nbsp;<span class="ident" id="2658800">v2</span><span class="op" id="2658802">.</span><span class="ident" id="2658803">Index</span><span class="op" id="2658808">(</span><span class="ident" id="2658809">i</span><span class="op" id="2658810">)</span><span class="op" id="2658811">,</span>&nbsp;<span class="ident" id="2658813">visited</span><span class="op" id="2658820">,</span>&nbsp;<span class="ident" id="2658822">depth</span><span class="op" id="2658827">+</span><span class="num" id="2658828">1</span><span class="op" id="2658829">)</span>&nbsp;<span class="op" id="2658831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658837">return</span>&nbsp;<span class="builtintype" id="2658844">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2658853">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2658857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658861">return</span>&nbsp;<span class="builtintype" id="2658868">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658874">case</span>&nbsp;<span class="ident" id="2658879">Interface</span><span class="op" id="2658888">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658892">if</span>&nbsp;<span class="ident" id="2658895">v1</span><span class="op" id="2658897">.</span><span class="ident" id="2658898">IsNil</span><span class="op" id="2658903">(</span><span class="op" id="2658904">)</span>&nbsp;<span class="op" id="2658906">||</span>&nbsp;<span class="ident" id="2658909">v2</span><span class="op" id="2658911">.</span><span class="ident" id="2658912">IsNil</span><span class="op" id="2658917">(</span><span class="op" id="2658918">)</span>&nbsp;<span class="op" id="2658920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658925">return</span>&nbsp;<span class="ident" id="2658932">v1</span><span class="op" id="2658934">.</span><span class="ident" id="2658935">IsNil</span><span class="op" id="2658940">(</span><span class="op" id="2658941">)</span>&nbsp;<span class="op" id="2658943">==</span>&nbsp;<span class="ident" id="2658946">v2</span><span class="op" id="2658948">.</span><span class="ident" id="2658949">IsNil</span><span class="op" id="2658954">(</span><span class="op" id="2658955">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2658959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658963">return</span>&nbsp;<span class="ident" id="2658970">deepValueEqual</span><span class="op" id="2658984">(</span><span class="ident" id="2658985">v1</span><span class="op" id="2658987">.</span><span class="ident" id="2658988">Elem</span><span class="op" id="2658992">(</span><span class="op" id="2658993">)</span><span class="op" id="2658994">,</span>&nbsp;<span class="ident" id="2658996">v2</span><span class="op" id="2658998">.</span><span class="ident" id="2658999">Elem</span><span class="op" id="2659003">(</span><span class="op" id="2659004">)</span><span class="op" id="2659005">,</span>&nbsp;<span class="ident" id="2659007">visited</span><span class="op" id="2659014">,</span>&nbsp;<span class="ident" id="2659016">depth</span><span class="op" id="2659021">+</span><span class="num" id="2659022">1</span><span class="op" id="2659023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659026">case</span>&nbsp;<span class="ident" id="2659031">Ptr</span><span class="op" id="2659034">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659038">return</span>&nbsp;<span class="ident" id="2659045">deepValueEqual</span><span class="op" id="2659059">(</span><span class="ident" id="2659060">v1</span><span class="op" id="2659062">.</span><span class="ident" id="2659063">Elem</span><span class="op" id="2659067">(</span><span class="op" id="2659068">)</span><span class="op" id="2659069">,</span>&nbsp;<span class="ident" id="2659071">v2</span><span class="op" id="2659073">.</span><span class="ident" id="2659074">Elem</span><span class="op" id="2659078">(</span><span class="op" id="2659079">)</span><span class="op" id="2659080">,</span>&nbsp;<span class="ident" id="2659082">visited</span><span class="op" id="2659089">,</span>&nbsp;<span class="ident" id="2659091">depth</span><span class="op" id="2659096">+</span><span class="num" id="2659097">1</span><span class="op" id="2659098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659101">case</span>&nbsp;<span class="ident" id="2659106">Struct</span><span class="op" id="2659112">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659116">for</span>&nbsp;<span class="ident" id="2659120">i</span><span class="op" id="2659121">,</span>&nbsp;<span class="ident" id="2659123">n</span>&nbsp;<span class="op" id="2659125">:=</span>&nbsp;<span class="num" id="2659128">0</span><span class="op" id="2659129">,</span>&nbsp;<span class="ident" id="2659131">v1</span><span class="op" id="2659133">.</span><span class="ident" id="2659134">NumField</span><span class="op" id="2659142">(</span><span class="op" id="2659143">)</span><span class="op" id="2659144">;</span>&nbsp;<span class="ident" id="2659146">i</span>&nbsp;<span class="op" id="2659148">&lt;</span>&nbsp;<span class="ident" id="2659150">n</span><span class="op" id="2659151">;</span>&nbsp;<span class="ident" id="2659153">i</span><span class="op" id="2659154">++</span>&nbsp;<span class="op" id="2659157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659162">if</span>&nbsp;<span class="op" id="2659165">!</span><span class="ident" id="2659166">deepValueEqual</span><span class="op" id="2659180">(</span><span class="ident" id="2659181">v1</span><span class="op" id="2659183">.</span><span class="ident" id="2659184">Field</span><span class="op" id="2659189">(</span><span class="ident" id="2659190">i</span><span class="op" id="2659191">)</span><span class="op" id="2659192">,</span>&nbsp;<span class="ident" id="2659194">v2</span><span class="op" id="2659196">.</span><span class="ident" id="2659197">Field</span><span class="op" id="2659202">(</span><span class="ident" id="2659203">i</span><span class="op" id="2659204">)</span><span class="op" id="2659205">,</span>&nbsp;<span class="ident" id="2659207">visited</span><span class="op" id="2659214">,</span>&nbsp;<span class="ident" id="2659216">depth</span><span class="op" id="2659221">+</span><span class="num" id="2659222">1</span><span class="op" id="2659223">)</span>&nbsp;<span class="op" id="2659225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659231">return</span>&nbsp;<span class="builtintype" id="2659238">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2659247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2659251">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659255">return</span>&nbsp;<span class="builtintype" id="2659262">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659268">case</span>&nbsp;<span class="ident" id="2659273">Map</span><span class="op" id="2659276">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659280">if</span>&nbsp;<span class="ident" id="2659283">v1</span><span class="op" id="2659285">.</span><span class="ident" id="2659286">IsNil</span><span class="op" id="2659291">(</span><span class="op" id="2659292">)</span>&nbsp;<span class="op" id="2659294">!=</span>&nbsp;<span class="ident" id="2659297">v2</span><span class="op" id="2659299">.</span><span class="ident" id="2659300">IsNil</span><span class="op" id="2659305">(</span><span class="op" id="2659306">)</span>&nbsp;<span class="op" id="2659308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659313">return</span>&nbsp;<span class="builtintype" id="2659320">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2659328">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659332">if</span>&nbsp;<span class="ident" id="2659335">v1</span><span class="op" id="2659337">.</span><span class="ident" id="2659338">Len</span><span class="op" id="2659341">(</span><span class="op" id="2659342">)</span>&nbsp;<span class="op" id="2659344">!=</span>&nbsp;<span class="ident" id="2659347">v2</span><span class="op" id="2659349">.</span><span class="ident" id="2659350">Len</span><span class="op" id="2659353">(</span><span class="op" id="2659354">)</span>&nbsp;<span class="op" id="2659356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659361">return</span>&nbsp;<span class="builtintype" id="2659368">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2659376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659380">if</span>&nbsp;<span class="ident" id="2659383">v1</span><span class="op" id="2659385">.</span><span class="ident" id="2659386">Pointer</span><span class="op" id="2659393">(</span><span class="op" id="2659394">)</span>&nbsp;<span class="op" id="2659396">==</span>&nbsp;<span class="ident" id="2659399">v2</span><span class="op" id="2659401">.</span><span class="ident" id="2659402">Pointer</span><span class="op" id="2659409">(</span><span class="op" id="2659410">)</span>&nbsp;<span class="op" id="2659412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659417">return</span>&nbsp;<span class="builtintype" id="2659424">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2659431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659435">for</span>&nbsp;<span class="ident" id="2659439">_</span><span class="op" id="2659440">,</span>&nbsp;<span class="ident" id="2659442">k</span>&nbsp;<span class="op" id="2659444">:=</span>&nbsp;<span class="keyword" id="2659447">range</span>&nbsp;<span class="ident" id="2659453">v1</span><span class="op" id="2659455">.</span><span class="ident" id="2659456">MapKeys</span><span class="op" id="2659463">(</span><span class="op" id="2659464">)</span>&nbsp;<span class="op" id="2659466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659471">if</span>&nbsp;<span class="op" id="2659474">!</span><span class="ident" id="2659475">deepValueEqual</span><span class="op" id="2659489">(</span><span class="ident" id="2659490">v1</span><span class="op" id="2659492">.</span><span class="ident" id="2659493">MapIndex</span><span class="op" id="2659501">(</span><span class="ident" id="2659502">k</span><span class="op" id="2659503">)</span><span class="op" id="2659504">,</span>&nbsp;<span class="ident" id="2659506">v2</span><span class="op" id="2659508">.</span><span class="ident" id="2659509">MapIndex</span><span class="op" id="2659517">(</span><span class="ident" id="2659518">k</span><span class="op" id="2659519">)</span><span class="op" id="2659520">,</span>&nbsp;<span class="ident" id="2659522">visited</span><span class="op" id="2659529">,</span>&nbsp;<span class="ident" id="2659531">depth</span><span class="op" id="2659536">+</span><span class="num" id="2659537">1</span><span class="op" id="2659538">)</span>&nbsp;<span class="op" id="2659540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659546">return</span>&nbsp;<span class="builtintype" id="2659553">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2659562">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2659566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659570">return</span>&nbsp;<span class="builtintype" id="2659577">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659583">case</span>&nbsp;<span class="ident" id="2659588">Func</span><span class="op" id="2659592">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659596">if</span>&nbsp;<span class="ident" id="2659599">v1</span><span class="op" id="2659601">.</span><span class="ident" id="2659602">IsNil</span><span class="op" id="2659607">(</span><span class="op" id="2659608">)</span>&nbsp;<span class="op" id="2659610">&amp;&amp;</span>&nbsp;<span class="ident" id="2659613">v2</span><span class="op" id="2659615">.</span><span class="ident" id="2659616">IsNil</span><span class="op" id="2659621">(</span><span class="op" id="2659622">)</span>&nbsp;<span class="op" id="2659624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659629">return</span>&nbsp;<span class="builtintype" id="2659636">true</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2659643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2659647">//&nbsp;Can&#39;t&nbsp;do&nbsp;better&nbsp;than&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659679">return</span>&nbsp;<span class="builtintype" id="2659686">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659693">default</span><span class="op" id="2659700">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2659704">//&nbsp;Normal&nbsp;equality&nbsp;suffices</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2659734">return</span>&nbsp;<span class="ident" id="2659741">valueInterface</span><span class="op" id="2659755">(</span><span class="ident" id="2659756">v1</span><span class="op" id="2659758">,</span>&nbsp;<span class="builtintype" id="2659760">false</span><span class="op" id="2659765">)</span>&nbsp;<span class="op" id="2659767">==</span>&nbsp;<span class="ident" id="2659770">valueInterface</span><span class="op" id="2659784">(</span><span class="ident" id="2659785">v2</span><span class="op" id="2659787">,</span>&nbsp;<span class="builtintype" id="2659789">false</span><span class="op" id="2659794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2659797">}</span><br>
<span class="lineno"></span><span class="op" id="2659799">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2659802">//&nbsp;DeepEqual&nbsp;tests&nbsp;for&nbsp;deep&nbsp;equality.&nbsp;It&nbsp;uses&nbsp;normal&nbsp;==&nbsp;equality&nbsp;where</span><br>
<span class="lineno">130</span><span class="comment" id="2659873">//&nbsp;possible&nbsp;but&nbsp;will&nbsp;scan&nbsp;elements&nbsp;of&nbsp;arrays,&nbsp;slices,&nbsp;maps,&nbsp;and&nbsp;fields&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2659947">//&nbsp;structs.&nbsp;In&nbsp;maps,&nbsp;keys&nbsp;are&nbsp;compared&nbsp;with&nbsp;==&nbsp;but&nbsp;elements&nbsp;use&nbsp;deep</span><br>
<span class="lineno"></span><span class="comment" id="2660016">//&nbsp;equality.&nbsp;DeepEqual&nbsp;correctly&nbsp;handles&nbsp;recursive&nbsp;types.&nbsp;Functions&nbsp;are&nbsp;equal</span><br>
<span class="lineno"></span><span class="comment" id="2660094">//&nbsp;only&nbsp;if&nbsp;they&nbsp;are&nbsp;both&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="2660124">//&nbsp;An&nbsp;empty&nbsp;slice&nbsp;is&nbsp;not&nbsp;equal&nbsp;to&nbsp;a&nbsp;nil&nbsp;slice.</span><br>
<span class="lineno">135</span><span class="keyword" id="2660171">func</span>&nbsp;<span class="ident" id="2660176">DeepEqual</span><span class="op" id="2660185">(</span><span class="ident" id="2660186">a1</span><span class="op" id="2660188">,</span>&nbsp;<span class="ident" id="2660190">a2</span>&nbsp;<span class="keyword" id="2660193">interface</span><span class="op" id="2660202">{</span><span class="op" id="2660203">}</span><span class="op" id="2660204">)</span>&nbsp;<span class="builtintype" id="2660206">bool</span>&nbsp;<span class="op" id="2660211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2660214">if</span>&nbsp;<span class="ident" id="2660217">a1</span>&nbsp;<span class="op" id="2660220">==</span>&nbsp;<span class="ident" id="2660223">nil</span>&nbsp;<span class="op" id="2660227">||</span>&nbsp;<span class="ident" id="2660230">a2</span>&nbsp;<span class="op" id="2660233">==</span>&nbsp;<span class="ident" id="2660236">nil</span>&nbsp;<span class="op" id="2660240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2660244">return</span>&nbsp;<span class="ident" id="2660251">a1</span>&nbsp;<span class="op" id="2660254">==</span>&nbsp;<span class="ident" id="2660257">a2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2660261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2660264">v1</span>&nbsp;<span class="op" id="2660267">:=</span>&nbsp;<span class="ident" id="2660270">ValueOf</span><span class="op" id="2660277">(</span><span class="ident" id="2660278">a1</span><span class="op" id="2660280">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2660283">v2</span>&nbsp;<span class="op" id="2660286">:=</span>&nbsp;<span class="ident" id="2660289">ValueOf</span><span class="op" id="2660296">(</span><span class="ident" id="2660297">a2</span><span class="op" id="2660299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2660302">if</span>&nbsp;<span class="ident" id="2660305">v1</span><span class="op" id="2660307">.</span><span class="ident" id="2660308">Type</span><span class="op" id="2660312">(</span><span class="op" id="2660313">)</span>&nbsp;<span class="op" id="2660315">!=</span>&nbsp;<span class="ident" id="2660318">v2</span><span class="op" id="2660320">.</span><span class="ident" id="2660321">Type</span><span class="op" id="2660325">(</span><span class="op" id="2660326">)</span>&nbsp;<span class="op" id="2660328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2660332">return</span>&nbsp;<span class="builtintype" id="2660339">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2660346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2660349">return</span>&nbsp;<span class="ident" id="2660356">deepValueEqual</span><span class="op" id="2660370">(</span><span class="ident" id="2660371">v1</span><span class="op" id="2660373">,</span>&nbsp;<span class="ident" id="2660375">v2</span><span class="op" id="2660377">,</span>&nbsp;<span class="builtinfunc" id="2660379">make</span><span class="op" id="2660383">(</span><span class="keyword" id="2660384">map</span><span class="op" id="2660387">[</span><span class="ident" id="2660388">visit</span><span class="op" id="2660393">]</span><span class="builtintype" id="2660394">bool</span><span class="op" id="2660398">)</span><span class="op" id="2660399">,</span>&nbsp;<span class="num" id="2660401">0</span><span class="op" id="2660402">)</span><br>
<span class="lineno">145</span><span class="op" id="2660404">}</span>
</div>
</body>
</html>
