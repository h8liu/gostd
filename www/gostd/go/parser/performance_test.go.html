<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/parser</h2>
<ul>
<li><a href="/gostd/go/parser/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/go/parser/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/parser/interface.go.html">interface.go</a></li>
<li><a href="/gostd/go/parser/parser.go.html">parser.go</a></li>
<li><a href="/gostd/go/parser/parser_test.go.html">parser_test.go</a></li>
<li><a href="/gostd/go/parser/performance_test.go.html">performance_test.go</a></li>
<li><a href="/gostd/go/parser/short_test.go.html">short_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7285352">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7285407">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7285461">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7285512">package</span>&nbsp;<span class="ident" id="7285520">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7285528">import</span>&nbsp;<span class="op" id="7285535">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7285538">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7285550">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7285563">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7285573">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7285576">var</span>&nbsp;<span class="ident" id="7285580">src</span>&nbsp;<span class="op" id="7285584">=</span>&nbsp;<span class="ident" id="7285586">readFile</span><span class="op" id="7285594">(</span><span class="string" id="7285595">&#34;parser.go&#34;</span><span class="op" id="7285606">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7285609">func</span>&nbsp;<span class="ident" id="7285614">readFile</span><span class="op" id="7285622">(</span><span class="ident" id="7285623">filename</span>&nbsp;<span class="builtintype" id="7285632">string</span><span class="op" id="7285638">)</span>&nbsp;<span class="op" id="7285640">[</span><span class="op" id="7285641">]</span><span class="builtintype" id="7285642">byte</span>&nbsp;<span class="op" id="7285647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7285650">data</span><span class="op" id="7285654">,</span>&nbsp;<span class="ident" id="7285656">err</span>&nbsp;<span class="op" id="7285660">:=</span>&nbsp;<span class="ident" id="7285663">ioutil</span><span class="op" id="7285669">.</span><span class="ident" id="7285670">ReadFile</span><span class="op" id="7285678">(</span><span class="ident" id="7285679">filename</span><span class="op" id="7285687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7285690">if</span>&nbsp;<span class="ident" id="7285693">err</span>&nbsp;<span class="op" id="7285697">!=</span>&nbsp;<span class="ident" id="7285700">nil</span>&nbsp;<span class="op" id="7285704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7285708">panic</span><span class="op" id="7285713">(</span><span class="ident" id="7285714">err</span><span class="op" id="7285717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7285720">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7285723">return</span>&nbsp;<span class="ident" id="7285730">data</span><br>
<span class="lineno"></span><span class="op" id="7285735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7285738">func</span>&nbsp;<span class="ident" id="7285743">BenchmarkParse</span><span class="op" id="7285757">(</span><span class="ident" id="7285758">b</span>&nbsp;<span class="op" id="7285760">*</span><span class="ident" id="7285761">testing</span><span class="op" id="7285768">.</span><span class="ident" id="7285769">B</span><span class="op" id="7285770">)</span>&nbsp;<span class="op" id="7285772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7285775">b</span><span class="op" id="7285776">.</span><span class="ident" id="7285777">SetBytes</span><span class="op" id="7285785">(</span><span class="ident" id="7285786">int64</span><span class="op" id="7285791">(</span><span class="builtinfunc" id="7285792">len</span><span class="op" id="7285795">(</span><span class="ident" id="7285796">src</span><span class="op" id="7285799">)</span><span class="op" id="7285800">)</span><span class="op" id="7285801">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7285804">for</span>&nbsp;<span class="ident" id="7285808">i</span>&nbsp;<span class="op" id="7285810">:=</span>&nbsp;<span class="num" id="7285813">0</span><span class="op" id="7285814">;</span>&nbsp;<span class="ident" id="7285816">i</span>&nbsp;<span class="op" id="7285818">&lt;</span>&nbsp;<span class="ident" id="7285820">b</span><span class="op" id="7285821">.</span><span class="ident" id="7285822">N</span><span class="op" id="7285823">;</span>&nbsp;<span class="ident" id="7285825">i</span><span class="op" id="7285826">++</span>&nbsp;<span class="op" id="7285829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7285833">if</span>&nbsp;<span class="ident" id="7285836">_</span><span class="op" id="7285837">,</span>&nbsp;<span class="ident" id="7285839">err</span>&nbsp;<span class="op" id="7285843">:=</span>&nbsp;<span class="ident" id="7285846">ParseFile</span><span class="op" id="7285855">(</span><span class="ident" id="7285856">token</span><span class="op" id="7285861">.</span><span class="ident" id="7285862">NewFileSet</span><span class="op" id="7285872">(</span><span class="op" id="7285873">)</span><span class="op" id="7285874">,</span>&nbsp;<span class="string" id="7285876">&#34;&#34;</span><span class="op" id="7285878">,</span>&nbsp;<span class="ident" id="7285880">src</span><span class="op" id="7285883">,</span>&nbsp;<span class="ident" id="7285885">ParseComments</span><span class="op" id="7285898">)</span><span class="op" id="7285899">;</span>&nbsp;<span class="ident" id="7285901">err</span>&nbsp;<span class="op" id="7285905">!=</span>&nbsp;<span class="ident" id="7285908">nil</span>&nbsp;<span class="op" id="7285912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7285917">b</span><span class="op" id="7285918">.</span><span class="ident" id="7285919">Fatalf</span><span class="op" id="7285925">(</span><span class="string" id="7285926">&#34;benchmark&nbsp;failed&nbsp;due&nbsp;to&nbsp;parse&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7285967">,</span>&nbsp;<span class="ident" id="7285969">err</span><span class="op" id="7285972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7285976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7285979">}</span><br>
<span class="lineno">30</span><span class="op" id="7285981">}</span>
</div>
</body>
</html>
