<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>syscall</h2>
<ul>
<li><a href="/gostd/syscall/creds_test.go.html">creds_test.go</a></li>
<li><a href="/gostd/syscall/env_unix.go.html">env_unix.go</a></li>
<li><a href="/gostd/syscall/exec_linux.go.html">exec_linux.go</a></li>
<li><a href="/gostd/syscall/exec_unix.go.html" class="current">exec_unix.go</a></li>
<li><a href="/gostd/syscall/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/syscall/flock.go.html">flock.go</a></li>
<li><a href="/gostd/syscall/lsf_linux.go.html">lsf_linux.go</a></li>
<li><a href="/gostd/syscall/mmap_unix_test.go.html">mmap_unix_test.go</a></li>
<li><a href="/gostd/syscall/netlink_linux.go.html">netlink_linux.go</a></li>
<li><a href="/gostd/syscall/race0.go.html">race0.go</a></li>
<li><a href="/gostd/syscall/sockcmsg_linux.go.html">sockcmsg_linux.go</a></li>
<li><a href="/gostd/syscall/sockcmsg_unix.go.html">sockcmsg_unix.go</a></li>
<li><a href="/gostd/syscall/str.go.html">str.go</a></li>
<li><a href="/gostd/syscall/syscall.go.html">syscall.go</a></li>
<li><a href="/gostd/syscall/syscall_linux.go.html">syscall_linux.go</a></li>
<li><a href="/gostd/syscall/syscall_linux_amd64.go.html">syscall_linux_amd64.go</a></li>
<li><a href="/gostd/syscall/syscall_test.go.html">syscall_test.go</a></li>
<li><a href="/gostd/syscall/syscall_unix.go.html">syscall_unix.go</a></li>
<li><a href="/gostd/syscall/syscall_unix_test.go.html">syscall_unix_test.go</a></li>
<li><a href="/gostd/syscall/zerrors_linux_amd64.go.html">zerrors_linux_amd64.go</a></li>
<li><a href="/gostd/syscall/zsyscall_linux_amd64.go.html">zsyscall_linux_amd64.go</a></li>
<li><a href="/gostd/syscall/zsysnum_linux_amd64.go.html">zsysnum_linux_amd64.go</a></li>
<li><a href="/gostd/syscall/ztypes_linux_amd64.go.html">ztypes_linux_amd64.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2489183">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2489238">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2489292">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2489343">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2489408">//&nbsp;Fork,&nbsp;exec,&nbsp;wait,&nbsp;etc.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2489435">package</span>&nbsp;<span class="ident" id="2489443">syscall</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="2489452">import</span>&nbsp;<span class="op" id="2489459">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2489462">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2489473">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2489481">&#34;unsafe&#34;</span><br>
<span class="lineno">15</span><span class="op" id="2489490">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2489493">//&nbsp;Lock&nbsp;synchronizing&nbsp;creation&nbsp;of&nbsp;new&nbsp;file&nbsp;descriptors&nbsp;with&nbsp;fork.</span><br>
<span class="lineno"></span><span class="comment" id="2489559">//</span><br>
<span class="lineno"></span><span class="comment" id="2489562">//&nbsp;We&nbsp;want&nbsp;the&nbsp;child&nbsp;in&nbsp;a&nbsp;fork/exec&nbsp;sequence&nbsp;to&nbsp;inherit&nbsp;only&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="2489627">//&nbsp;file&nbsp;descriptors&nbsp;we&nbsp;intend.&nbsp;&nbsp;To&nbsp;do&nbsp;that,&nbsp;we&nbsp;mark&nbsp;all&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="2489688">//&nbsp;descriptors&nbsp;close-on-exec&nbsp;and&nbsp;then,&nbsp;in&nbsp;the&nbsp;child,&nbsp;explicitly</span><br>
<span class="lineno"></span><span class="comment" id="2489752">//&nbsp;unmark&nbsp;the&nbsp;ones&nbsp;we&nbsp;want&nbsp;the&nbsp;exec&#39;ed&nbsp;program&nbsp;to&nbsp;keep.</span><br>
<span class="lineno"></span><span class="comment" id="2489808">//&nbsp;Unix&nbsp;doesn&#39;t&nbsp;make&nbsp;this&nbsp;easy:&nbsp;there&nbsp;is,&nbsp;in&nbsp;general,&nbsp;no&nbsp;way&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2489872">//&nbsp;allocate&nbsp;a&nbsp;new&nbsp;file&nbsp;descriptor&nbsp;close-on-exec.&nbsp;&nbsp;Instead&nbsp;you</span><br>
<span class="lineno">25</span><span class="comment" id="2489934">//&nbsp;have&nbsp;to&nbsp;allocate&nbsp;the&nbsp;descriptor&nbsp;and&nbsp;then&nbsp;mark&nbsp;it&nbsp;close-on-exec.</span><br>
<span class="lineno"></span><span class="comment" id="2490001">//&nbsp;If&nbsp;a&nbsp;fork&nbsp;happens&nbsp;between&nbsp;those&nbsp;two&nbsp;events,&nbsp;the&nbsp;child&#39;s&nbsp;exec</span><br>
<span class="lineno"></span><span class="comment" id="2490065">//&nbsp;will&nbsp;inherit&nbsp;an&nbsp;unwanted&nbsp;file&nbsp;descriptor.</span><br>
<span class="lineno"></span><span class="comment" id="2490110">//</span><br>
<span class="lineno"></span><span class="comment" id="2490113">//&nbsp;This&nbsp;lock&nbsp;solves&nbsp;that&nbsp;race:&nbsp;the&nbsp;create&nbsp;new&nbsp;fd/mark&nbsp;close-on-exec</span><br>
<span class="lineno">30</span><span class="comment" id="2490181">//&nbsp;operation&nbsp;is&nbsp;done&nbsp;holding&nbsp;ForkLock&nbsp;for&nbsp;reading,&nbsp;and&nbsp;the&nbsp;fork&nbsp;itself</span><br>
<span class="lineno"></span><span class="comment" id="2490252">//&nbsp;is&nbsp;done&nbsp;holding&nbsp;ForkLock&nbsp;for&nbsp;writing.&nbsp;&nbsp;At&nbsp;least,&nbsp;that&#39;s&nbsp;the&nbsp;idea.</span><br>
<span class="lineno"></span><span class="comment" id="2490321">//&nbsp;There&nbsp;are&nbsp;some&nbsp;complications.</span><br>
<span class="lineno"></span><span class="comment" id="2490354">//</span><br>
<span class="lineno"></span><span class="comment" id="2490357">//&nbsp;Some&nbsp;system&nbsp;calls&nbsp;that&nbsp;create&nbsp;new&nbsp;file&nbsp;descriptors&nbsp;can&nbsp;block</span><br>
<span class="lineno">35</span><span class="comment" id="2490421">//&nbsp;for&nbsp;arbitrarily&nbsp;long&nbsp;times:&nbsp;open&nbsp;on&nbsp;a&nbsp;hung&nbsp;NFS&nbsp;server&nbsp;or&nbsp;named</span><br>
<span class="lineno"></span><span class="comment" id="2490487">//&nbsp;pipe,&nbsp;accept&nbsp;on&nbsp;a&nbsp;socket,&nbsp;and&nbsp;so&nbsp;on.&nbsp;&nbsp;We&nbsp;can&#39;t&nbsp;reasonably&nbsp;grab</span><br>
<span class="lineno"></span><span class="comment" id="2490553">//&nbsp;the&nbsp;lock&nbsp;across&nbsp;those&nbsp;operations.</span><br>
<span class="lineno"></span><span class="comment" id="2490590">//</span><br>
<span class="lineno"></span><span class="comment" id="2490593">//&nbsp;It&nbsp;is&nbsp;worse&nbsp;to&nbsp;inherit&nbsp;some&nbsp;file&nbsp;descriptors&nbsp;than&nbsp;others.</span><br>
<span class="lineno">40</span><span class="comment" id="2490654">//&nbsp;If&nbsp;a&nbsp;non-malicious&nbsp;child&nbsp;accidentally&nbsp;inherits&nbsp;an&nbsp;open&nbsp;ordinary&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="2490727">//&nbsp;that&#39;s&nbsp;not&nbsp;a&nbsp;big&nbsp;deal.&nbsp;&nbsp;On&nbsp;the&nbsp;other&nbsp;hand,&nbsp;if&nbsp;a&nbsp;long-lived&nbsp;child</span><br>
<span class="lineno"></span><span class="comment" id="2490795">//&nbsp;accidentally&nbsp;inherits&nbsp;the&nbsp;write&nbsp;end&nbsp;of&nbsp;a&nbsp;pipe,&nbsp;then&nbsp;the&nbsp;reader</span><br>
<span class="lineno"></span><span class="comment" id="2490861">//&nbsp;of&nbsp;that&nbsp;pipe&nbsp;will&nbsp;not&nbsp;see&nbsp;EOF&nbsp;until&nbsp;that&nbsp;child&nbsp;exits,&nbsp;potentially</span><br>
<span class="lineno"></span><span class="comment" id="2490930">//&nbsp;causing&nbsp;the&nbsp;parent&nbsp;program&nbsp;to&nbsp;hang.&nbsp;&nbsp;This&nbsp;is&nbsp;a&nbsp;common&nbsp;problem</span><br>
<span class="lineno">45</span><span class="comment" id="2490995">//&nbsp;in&nbsp;threaded&nbsp;C&nbsp;programs&nbsp;that&nbsp;use&nbsp;popen.</span><br>
<span class="lineno"></span><span class="comment" id="2491037">//</span><br>
<span class="lineno"></span><span class="comment" id="2491040">//&nbsp;Luckily,&nbsp;the&nbsp;file&nbsp;descriptors&nbsp;that&nbsp;are&nbsp;most&nbsp;important&nbsp;not&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2491104">//&nbsp;inherit&nbsp;are&nbsp;not&nbsp;the&nbsp;ones&nbsp;that&nbsp;can&nbsp;take&nbsp;an&nbsp;arbitrarily&nbsp;long&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2491171">//&nbsp;to&nbsp;create:&nbsp;pipe&nbsp;returns&nbsp;instantly,&nbsp;and&nbsp;the&nbsp;net&nbsp;package&nbsp;uses</span><br>
<span class="lineno">50</span><span class="comment" id="2491234">//&nbsp;non-blocking&nbsp;I/O&nbsp;to&nbsp;accept&nbsp;on&nbsp;a&nbsp;listening&nbsp;socket.</span><br>
<span class="lineno"></span><span class="comment" id="2491287">//&nbsp;The&nbsp;rules&nbsp;for&nbsp;which&nbsp;file&nbsp;descriptor-creating&nbsp;operations&nbsp;use&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2491354">//&nbsp;ForkLock&nbsp;are&nbsp;as&nbsp;follows:</span><br>
<span class="lineno"></span><span class="comment" id="2491382">//</span><br>
<span class="lineno"></span><span class="comment" id="2491385">//&nbsp;1)&nbsp;Pipe.&nbsp;&nbsp;&nbsp;&nbsp;Does&nbsp;not&nbsp;block.&nbsp;&nbsp;Use&nbsp;the&nbsp;ForkLock.</span><br>
<span class="lineno">55</span><span class="comment" id="2491435">//&nbsp;2)&nbsp;Socket.&nbsp;&nbsp;Does&nbsp;not&nbsp;block.&nbsp;&nbsp;Use&nbsp;the&nbsp;ForkLock.</span><br>
<span class="lineno"></span><span class="comment" id="2491485">//&nbsp;3)&nbsp;Accept.&nbsp;&nbsp;If&nbsp;using&nbsp;non-blocking&nbsp;mode,&nbsp;use&nbsp;the&nbsp;ForkLock.</span><br>
<span class="lineno"></span><span class="comment" id="2491546">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Otherwise,&nbsp;live&nbsp;with&nbsp;the&nbsp;race.</span><br>
<span class="lineno"></span><span class="comment" id="2491592">//&nbsp;4)&nbsp;Open.&nbsp;&nbsp;&nbsp;&nbsp;Can&nbsp;block.&nbsp;&nbsp;Use&nbsp;O_CLOEXEC&nbsp;if&nbsp;available&nbsp;(Linux).</span><br>
<span class="lineno"></span><span class="comment" id="2491655">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Otherwise,&nbsp;live&nbsp;with&nbsp;the&nbsp;race.</span><br>
<span class="lineno">60</span><span class="comment" id="2491701">//&nbsp;5)&nbsp;Dup.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Does&nbsp;not&nbsp;block.&nbsp;&nbsp;Use&nbsp;the&nbsp;ForkLock.</span><br>
<span class="lineno"></span><span class="comment" id="2491751">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;Linux,&nbsp;could&nbsp;use&nbsp;fcntl&nbsp;F_DUPFD_CLOEXEC</span><br>
<span class="lineno"></span><span class="comment" id="2491808">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instead&nbsp;of&nbsp;the&nbsp;ForkLock,&nbsp;but&nbsp;only&nbsp;for&nbsp;dup(fd,&nbsp;-1).</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2491875">var</span>&nbsp;<span class="ident" id="2491879">ForkLock</span>&nbsp;<span class="ident" id="2491888"><a href="/gostd/syscall/exec_unix.go.html#2489473">sync</a></span><span class="op" id="2491892">.</span><span class="ident" id="2491893"><a href="/gostd/sync/rwmutex.go.html#1456076">RWMutex</a></span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="2491902">//&nbsp;StringSlicePtr&nbsp;is&nbsp;deprecated.&nbsp;Use&nbsp;SlicePtrFromStrings&nbsp;instead.</span><br>
<span class="lineno"></span><span class="comment" id="2491968">//&nbsp;If&nbsp;any&nbsp;string&nbsp;contains&nbsp;a&nbsp;NUL&nbsp;byte&nbsp;this&nbsp;function&nbsp;panics&nbsp;instead</span><br>
<span class="lineno"></span><span class="comment" id="2492034">//&nbsp;of&nbsp;returning&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="2492060">func</span>&nbsp;<span class="ident" id="2492065">StringSlicePtr</span><span class="op" id="2492079">(</span><span class="ident" id="2492080">ss</span>&nbsp;<span class="op" id="2492083">[</span><span class="op" id="2492084">]</span><span class="builtintype" id="2492085">string</span><span class="op" id="2492091">)</span>&nbsp;<span class="op" id="2492093">[</span><span class="op" id="2492094">]</span><span class="op" id="2492095">*</span><span class="builtintype" id="2492096">byte</span>&nbsp;<span class="op" id="2492101">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2492104">bb</span>&nbsp;<span class="op" id="2492107">:=</span>&nbsp;<span class="builtinfunc" id="2492110">make</span><span class="op" id="2492114">(</span><span class="op" id="2492115">[</span><span class="op" id="2492116">]</span><span class="op" id="2492117">*</span><span class="builtintype" id="2492118">byte</span><span class="op" id="2492122">,</span>&nbsp;<span class="builtinfunc" id="2492124">len</span><span class="op" id="2492127">(</span><span class="ident" id="2492128"><a href="/gostd/syscall/exec_unix.go.html#2492080">ss</a></span><span class="op" id="2492130">)</span><span class="op" id="2492131">+</span><span class="num" id="2492132">1</span><span class="op" id="2492133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2492136">for</span>&nbsp;<span class="ident" id="2492140">i</span>&nbsp;<span class="op" id="2492142">:=</span>&nbsp;<span class="num" id="2492145">0</span><span class="op" id="2492146">;</span>&nbsp;<span class="ident" id="2492148"><a href="/gostd/syscall/exec_unix.go.html#2492140">i</a></span>&nbsp;<span class="op" id="2492150">&lt;</span>&nbsp;<span class="builtinfunc" id="2492152">len</span><span class="op" id="2492155">(</span><span class="ident" id="2492156"><a href="/gostd/syscall/exec_unix.go.html#2492080">ss</a></span><span class="op" id="2492158">)</span><span class="op" id="2492159">;</span>&nbsp;<span class="ident" id="2492161"><a href="/gostd/syscall/exec_unix.go.html#2492140">i</a></span><span class="op" id="2492162">++</span>&nbsp;<span class="op" id="2492165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2492169"><a href="/gostd/syscall/exec_unix.go.html#2492104">bb</a></span><span class="op" id="2492171">[</span><span class="ident" id="2492172"><a href="/gostd/syscall/exec_unix.go.html#2492140">i</a></span><span class="op" id="2492173">]</span>&nbsp;<span class="op" id="2492175">=</span>&nbsp;<span class="ident" id="2492177"><a href="/gostd/syscall/syscall.go.html#2511013">StringBytePtr</a></span><span class="op" id="2492190">(</span><span class="ident" id="2492191"><a href="/gostd/syscall/exec_unix.go.html#2492080">ss</a></span><span class="op" id="2492193">[</span><span class="ident" id="2492194"><a href="/gostd/syscall/exec_unix.go.html#2492140">i</a></span><span class="op" id="2492195">]</span><span class="op" id="2492196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2492199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2492202"><a href="/gostd/syscall/exec_unix.go.html#2492104">bb</a></span><span class="op" id="2492204">[</span><span class="builtinfunc" id="2492205">len</span><span class="op" id="2492208">(</span><span class="ident" id="2492209"><a href="/gostd/syscall/exec_unix.go.html#2492080">ss</a></span><span class="op" id="2492211">)</span><span class="op" id="2492212">]</span>&nbsp;<span class="op" id="2492214">=</span>&nbsp;<span class="builtintype" id="2492216">nil</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2492221">return</span>&nbsp;<span class="ident" id="2492228"><a href="/gostd/syscall/exec_unix.go.html#2492104">bb</a></span><br>
<span class="lineno"></span><span class="op" id="2492231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2492234">//&nbsp;SlicePtrFromStrings&nbsp;converts&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;to&nbsp;a&nbsp;slice&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2492299">//&nbsp;pointers&nbsp;to&nbsp;NUL-terminated&nbsp;byte&nbsp;slices.&nbsp;If&nbsp;any&nbsp;string&nbsp;contains</span><br>
<span class="lineno">80</span><span class="comment" id="2492365">//&nbsp;a&nbsp;NUL&nbsp;byte,&nbsp;it&nbsp;returns&nbsp;(nil,&nbsp;EINVAL).</span><br>
<span class="lineno"></span><span class="keyword" id="2492406">func</span>&nbsp;<span class="ident" id="2492411">SlicePtrFromStrings</span><span class="op" id="2492430">(</span><span class="ident" id="2492431">ss</span>&nbsp;<span class="op" id="2492434">[</span><span class="op" id="2492435">]</span><span class="builtintype" id="2492436">string</span><span class="op" id="2492442">)</span>&nbsp;<span class="op" id="2492444">(</span><span class="op" id="2492445">[</span><span class="op" id="2492446">]</span><span class="op" id="2492447">*</span><span class="builtintype" id="2492448">byte</span><span class="op" id="2492452">,</span>&nbsp;<span class="builtintype" id="2492454">error</span><span class="op" id="2492459">)</span>&nbsp;<span class="op" id="2492461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2492464">var</span>&nbsp;<span class="ident" id="2492468">err</span>&nbsp;<span class="builtintype" id="2492472">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2492479">bb</span>&nbsp;<span class="op" id="2492482">:=</span>&nbsp;<span class="builtinfunc" id="2492485">make</span><span class="op" id="2492489">(</span><span class="op" id="2492490">[</span><span class="op" id="2492491">]</span><span class="op" id="2492492">*</span><span class="builtintype" id="2492493">byte</span><span class="op" id="2492497">,</span>&nbsp;<span class="builtinfunc" id="2492499">len</span><span class="op" id="2492502">(</span><span class="ident" id="2492503"><a href="/gostd/syscall/exec_unix.go.html#2492431">ss</a></span><span class="op" id="2492505">)</span><span class="op" id="2492506">+</span><span class="num" id="2492507">1</span><span class="op" id="2492508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2492511">for</span>&nbsp;<span class="ident" id="2492515">i</span>&nbsp;<span class="op" id="2492517">:=</span>&nbsp;<span class="num" id="2492520">0</span><span class="op" id="2492521">;</span>&nbsp;<span class="ident" id="2492523"><a href="/gostd/syscall/exec_unix.go.html#2492515">i</a></span>&nbsp;<span class="op" id="2492525">&lt;</span>&nbsp;<span class="builtinfunc" id="2492527">len</span><span class="op" id="2492530">(</span><span class="ident" id="2492531"><a href="/gostd/syscall/exec_unix.go.html#2492431">ss</a></span><span class="op" id="2492533">)</span><span class="op" id="2492534">;</span>&nbsp;<span class="ident" id="2492536"><a href="/gostd/syscall/exec_unix.go.html#2492515">i</a></span><span class="op" id="2492537">++</span>&nbsp;<span class="op" id="2492540">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2492544"><a href="/gostd/syscall/exec_unix.go.html#2492479">bb</a></span><span class="op" id="2492546">[</span><span class="ident" id="2492547"><a href="/gostd/syscall/exec_unix.go.html#2492515">i</a></span><span class="op" id="2492548">]</span><span class="op" id="2492549">,</span>&nbsp;<span class="ident" id="2492551"><a href="/gostd/syscall/exec_unix.go.html#2492468">err</a></span>&nbsp;<span class="op" id="2492555">=</span>&nbsp;<span class="ident" id="2492557"><a href="/gostd/syscall/syscall.go.html#2511257">BytePtrFromString</a></span><span class="op" id="2492574">(</span><span class="ident" id="2492575"><a href="/gostd/syscall/exec_unix.go.html#2492431">ss</a></span><span class="op" id="2492577">[</span><span class="ident" id="2492578"><a href="/gostd/syscall/exec_unix.go.html#2492515">i</a></span><span class="op" id="2492579">]</span><span class="op" id="2492580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2492584">if</span>&nbsp;<span class="ident" id="2492587"><a href="/gostd/syscall/exec_unix.go.html#2492468">err</a></span>&nbsp;<span class="op" id="2492591">!=</span>&nbsp;<span class="builtintype" id="2492594">nil</span>&nbsp;<span class="op" id="2492598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2492603">return</span>&nbsp;<span class="builtintype" id="2492610">nil</span><span class="op" id="2492613">,</span>&nbsp;<span class="ident" id="2492615"><a href="/gostd/syscall/exec_unix.go.html#2492468">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2492621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2492624">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2492627"><a href="/gostd/syscall/exec_unix.go.html#2492479">bb</a></span><span class="op" id="2492629">[</span><span class="builtinfunc" id="2492630">len</span><span class="op" id="2492633">(</span><span class="ident" id="2492634"><a href="/gostd/syscall/exec_unix.go.html#2492431">ss</a></span><span class="op" id="2492636">)</span><span class="op" id="2492637">]</span>&nbsp;<span class="op" id="2492639">=</span>&nbsp;<span class="builtintype" id="2492641">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2492646">return</span>&nbsp;<span class="ident" id="2492653"><a href="/gostd/syscall/exec_unix.go.html#2492479">bb</a></span><span class="op" id="2492655">,</span>&nbsp;<span class="builtintype" id="2492657">nil</span><br>
<span class="lineno"></span><span class="op" id="2492661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2492664">func</span>&nbsp;<span class="ident" id="2492669">CloseOnExec</span><span class="op" id="2492680">(</span><span class="ident" id="2492681">fd</span>&nbsp;<span class="builtintype" id="2492684">int</span><span class="op" id="2492687">)</span>&nbsp;<span class="op" id="2492689">{</span>&nbsp;<span class="ident" id="2492691"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2621217">fcntl</a></span><span class="op" id="2492696">(</span><span class="ident" id="2492697"><a href="/gostd/syscall/exec_unix.go.html#2492681">fd</a></span><span class="op" id="2492699">,</span>&nbsp;<span class="ident" id="2492701"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2561885">F_SETFD</a></span><span class="op" id="2492708">,</span>&nbsp;<span class="ident" id="2492710"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2561154">FD_CLOEXEC</a></span><span class="op" id="2492720">)</span>&nbsp;<span class="op" id="2492722">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="2492725">func</span>&nbsp;<span class="ident" id="2492730">SetNonblock</span><span class="op" id="2492741">(</span><span class="ident" id="2492742">fd</span>&nbsp;<span class="builtintype" id="2492745">int</span><span class="op" id="2492748">,</span>&nbsp;<span class="ident" id="2492750">nonblocking</span>&nbsp;<span class="builtintype" id="2492762">bool</span><span class="op" id="2492766">)</span>&nbsp;<span class="op" id="2492768">(</span><span class="ident" id="2492769">err</span>&nbsp;<span class="builtintype" id="2492773">error</span><span class="op" id="2492778">)</span>&nbsp;<span class="op" id="2492780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2492783">flag</span><span class="op" id="2492787">,</span>&nbsp;<span class="ident" id="2492789"><a href="/gostd/syscall/exec_unix.go.html#2492769">err</a></span>&nbsp;<span class="op" id="2492793">:=</span>&nbsp;<span class="ident" id="2492796"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2621217">fcntl</a></span><span class="op" id="2492801">(</span><span class="ident" id="2492802"><a href="/gostd/syscall/exec_unix.go.html#2492742">fd</a></span><span class="op" id="2492804">,</span>&nbsp;<span class="ident" id="2492806"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2561398">F_GETFL</a></span><span class="op" id="2492813">,</span>&nbsp;<span class="num" id="2492815">0</span><span class="op" id="2492816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2492819">if</span>&nbsp;<span class="ident" id="2492822"><a href="/gostd/syscall/exec_unix.go.html#2492769">err</a></span>&nbsp;<span class="op" id="2492826">!=</span>&nbsp;<span class="builtintype" id="2492829">nil</span>&nbsp;<span class="op" id="2492833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2492837">return</span>&nbsp;<span class="ident" id="2492844"><a href="/gostd/syscall/exec_unix.go.html#2492769">err</a></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2492849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2492852">if</span>&nbsp;<span class="ident" id="2492855"><a href="/gostd/syscall/exec_unix.go.html#2492750">nonblocking</a></span>&nbsp;<span class="op" id="2492867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2492871"><a href="/gostd/syscall/exec_unix.go.html#2492783">flag</a></span>&nbsp;<span class="op" id="2492876">|=</span>&nbsp;<span class="ident" id="2492879"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2577505">O_NONBLOCK</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2492891">}</span>&nbsp;<span class="keyword" id="2492893">else</span>&nbsp;<span class="op" id="2492898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2492902"><a href="/gostd/syscall/exec_unix.go.html#2492783">flag</a></span>&nbsp;<span class="op" id="2492907">&amp;=</span>&nbsp;<span class="op" id="2492910">^</span><span class="ident" id="2492911"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2577505">O_NONBLOCK</a></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2492923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2492926">_</span><span class="op" id="2492927">,</span>&nbsp;<span class="ident" id="2492929"><a href="/gostd/syscall/exec_unix.go.html#2492769">err</a></span>&nbsp;<span class="op" id="2492933">=</span>&nbsp;<span class="ident" id="2492935"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2621217">fcntl</a></span><span class="op" id="2492940">(</span><span class="ident" id="2492941"><a href="/gostd/syscall/exec_unix.go.html#2492742">fd</a></span><span class="op" id="2492943">,</span>&nbsp;<span class="ident" id="2492945"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2561925">F_SETFL</a></span><span class="op" id="2492952">,</span>&nbsp;<span class="ident" id="2492954"><a href="/gostd/syscall/exec_unix.go.html#2492783">flag</a></span><span class="op" id="2492958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2492961">return</span>&nbsp;<span class="ident" id="2492968"><a href="/gostd/syscall/exec_unix.go.html#2492769">err</a></span><br>
<span class="lineno"></span><span class="op" id="2492972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="2492975">//&nbsp;Credential&nbsp;holds&nbsp;user&nbsp;and&nbsp;group&nbsp;identities&nbsp;to&nbsp;be&nbsp;assumed</span><br>
<span class="lineno"></span><span class="comment" id="2493035">//&nbsp;by&nbsp;a&nbsp;child&nbsp;process&nbsp;started&nbsp;by&nbsp;StartProcess.</span><br>
<span class="lineno"></span><span class="keyword" id="2493082">type</span>&nbsp;<span class="ident" id="2493087">Credential</span>&nbsp;<span class="keyword" id="2493098">struct</span>&nbsp;<span class="op" id="2493105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493108">Uid</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2493115">uint32</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2493124">//&nbsp;User&nbsp;ID.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493137">Gid</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2493144">uint32</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2493153">//&nbsp;Group&nbsp;ID.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493167">Groups</span>&nbsp;<span class="op" id="2493174">[</span><span class="op" id="2493175">]</span><span class="builtintype" id="2493176">uint32</span>&nbsp;<span class="comment" id="2493183">//&nbsp;Supplementary&nbsp;group&nbsp;IDs.</span><br>
<span class="lineno"></span><span class="op" id="2493211">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2493214">//&nbsp;ProcAttr&nbsp;holds&nbsp;attributes&nbsp;that&nbsp;will&nbsp;be&nbsp;applied&nbsp;to&nbsp;a&nbsp;new&nbsp;process&nbsp;started</span><br>
<span class="lineno"></span><span class="comment" id="2493289">//&nbsp;by&nbsp;StartProcess.</span><br>
<span class="lineno">120</span><span class="keyword" id="2493309">type</span>&nbsp;<span class="ident" id="2493314">ProcAttr</span>&nbsp;<span class="keyword" id="2493323">struct</span>&nbsp;<span class="op" id="2493330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493333">Dir</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2493339">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2493349">//&nbsp;Current&nbsp;working&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493380">Env</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2493386">[</span><span class="op" id="2493387">]</span><span class="builtintype" id="2493388">string</span>&nbsp;&nbsp;<span class="comment" id="2493396">//&nbsp;Environment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493413">Files</span>&nbsp;<span class="op" id="2493419">[</span><span class="op" id="2493420">]</span><span class="builtintype" id="2493421">uintptr</span>&nbsp;<span class="comment" id="2493429">//&nbsp;File&nbsp;descriptors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493451">Sys</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2493457">*</span><span class="ident" id="2493458"><a href="/gostd/syscall/exec_linux.go.html#2480043">SysProcAttr</a></span><br>
<span class="lineno">125</span><span class="op" id="2493470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2493473">var</span>&nbsp;<span class="ident" id="2493477">zeroProcAttr</span>&nbsp;<span class="ident" id="2493490"><a href="/gostd/syscall/exec_unix.go.html#2493314">ProcAttr</a></span><br>
<span class="lineno"></span><span class="keyword" id="2493499">var</span>&nbsp;<span class="ident" id="2493503">zeroSysProcAttr</span>&nbsp;<span class="ident" id="2493519"><a href="/gostd/syscall/exec_linux.go.html#2480043">SysProcAttr</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="2493532">func</span>&nbsp;<span class="ident" id="2493537">forkExec</span><span class="op" id="2493545">(</span><span class="ident" id="2493546">argv0</span>&nbsp;<span class="builtintype" id="2493552">string</span><span class="op" id="2493558">,</span>&nbsp;<span class="ident" id="2493560">argv</span>&nbsp;<span class="op" id="2493565">[</span><span class="op" id="2493566">]</span><span class="builtintype" id="2493567">string</span><span class="op" id="2493573">,</span>&nbsp;<span class="ident" id="2493575">attr</span>&nbsp;<span class="op" id="2493580">*</span><span class="ident" id="2493581"><a href="/gostd/syscall/exec_unix.go.html#2493314">ProcAttr</a></span><span class="op" id="2493589">)</span>&nbsp;<span class="op" id="2493591">(</span><span class="ident" id="2493592">pid</span>&nbsp;<span class="builtintype" id="2493596">int</span><span class="op" id="2493599">,</span>&nbsp;<span class="ident" id="2493601">err</span>&nbsp;<span class="builtintype" id="2493605">error</span><span class="op" id="2493610">)</span>&nbsp;<span class="op" id="2493612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493615">var</span>&nbsp;<span class="ident" id="2493619">p</span>&nbsp;<span class="op" id="2493621">[</span><span class="num" id="2493622">2</span><span class="op" id="2493623">]</span><span class="builtintype" id="2493624">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493629">var</span>&nbsp;<span class="ident" id="2493633">n</span>&nbsp;<span class="builtintype" id="2493635">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493640">var</span>&nbsp;<span class="ident" id="2493644">err1</span>&nbsp;<span class="ident" id="2493649"><a href="/gostd/syscall/syscall_unix.go.html#2545791">Errno</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493656">var</span>&nbsp;<span class="ident" id="2493660">wstatus</span>&nbsp;<span class="ident" id="2493668"><a href="/gostd/syscall/syscall_linux.go.html#2515702">WaitStatus</a></span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493681">if</span>&nbsp;<span class="ident" id="2493684"><a href="/gostd/syscall/exec_unix.go.html#2493575">attr</a></span>&nbsp;<span class="op" id="2493689">==</span>&nbsp;<span class="builtintype" id="2493692">nil</span>&nbsp;<span class="op" id="2493696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493700"><a href="/gostd/syscall/exec_unix.go.html#2493575">attr</a></span>&nbsp;<span class="op" id="2493705">=</span>&nbsp;<span class="op" id="2493707">&amp;</span><span class="ident" id="2493708"><a href="/gostd/syscall/exec_unix.go.html#2493477">zeroProcAttr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2493722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493725">sys</span>&nbsp;<span class="op" id="2493729">:=</span>&nbsp;<span class="ident" id="2493732"><a href="/gostd/syscall/exec_unix.go.html#2493575">attr</a></span><span class="op" id="2493736">.</span><span class="ident" id="2493737"><a href="/gostd/syscall/exec_unix.go.html#2493451">Sys</a></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493742">if</span>&nbsp;<span class="ident" id="2493745"><a href="/gostd/syscall/exec_unix.go.html#2493725">sys</a></span>&nbsp;<span class="op" id="2493749">==</span>&nbsp;<span class="builtintype" id="2493752">nil</span>&nbsp;<span class="op" id="2493756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493760"><a href="/gostd/syscall/exec_unix.go.html#2493725">sys</a></span>&nbsp;<span class="op" id="2493764">=</span>&nbsp;<span class="op" id="2493766">&amp;</span><span class="ident" id="2493767"><a href="/gostd/syscall/exec_unix.go.html#2493503">zeroSysProcAttr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2493784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493788"><a href="/gostd/syscall/exec_unix.go.html#2493619">p</a></span><span class="op" id="2493789">[</span><span class="num" id="2493790">0</span><span class="op" id="2493791">]</span>&nbsp;<span class="op" id="2493793">=</span>&nbsp;<span class="op" id="2493795">-</span><span class="num" id="2493796">1</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493799"><a href="/gostd/syscall/exec_unix.go.html#2493619">p</a></span><span class="op" id="2493800">[</span><span class="num" id="2493801">1</span><span class="op" id="2493802">]</span>&nbsp;<span class="op" id="2493804">=</span>&nbsp;<span class="op" id="2493806">-</span><span class="num" id="2493807">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2493811">//&nbsp;Convert&nbsp;args&nbsp;to&nbsp;C&nbsp;form.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493839">argv0p</span><span class="op" id="2493845">,</span>&nbsp;<span class="ident" id="2493847"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2493851">:=</span>&nbsp;<span class="ident" id="2493854"><a href="/gostd/syscall/syscall.go.html#2511257">BytePtrFromString</a></span><span class="op" id="2493871">(</span><span class="ident" id="2493872"><a href="/gostd/syscall/exec_unix.go.html#2493546">argv0</a></span><span class="op" id="2493877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493880">if</span>&nbsp;<span class="ident" id="2493883"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2493887">!=</span>&nbsp;<span class="builtintype" id="2493890">nil</span>&nbsp;<span class="op" id="2493894">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493898">return</span>&nbsp;<span class="num" id="2493905">0</span><span class="op" id="2493906">,</span>&nbsp;<span class="ident" id="2493908"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2493913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493916">argvp</span><span class="op" id="2493921">,</span>&nbsp;<span class="ident" id="2493923"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2493927">:=</span>&nbsp;<span class="ident" id="2493930"><a href="/gostd/syscall/exec_unix.go.html#2492411">SlicePtrFromStrings</a></span><span class="op" id="2493949">(</span><span class="ident" id="2493950"><a href="/gostd/syscall/exec_unix.go.html#2493560">argv</a></span><span class="op" id="2493954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493957">if</span>&nbsp;<span class="ident" id="2493960"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2493964">!=</span>&nbsp;<span class="builtintype" id="2493967">nil</span>&nbsp;<span class="op" id="2493971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493975">return</span>&nbsp;<span class="num" id="2493982">0</span><span class="op" id="2493983">,</span>&nbsp;<span class="ident" id="2493985"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2493990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493993">envvp</span><span class="op" id="2493998">,</span>&nbsp;<span class="ident" id="2494000"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2494004">:=</span>&nbsp;<span class="ident" id="2494007"><a href="/gostd/syscall/exec_unix.go.html#2492411">SlicePtrFromStrings</a></span><span class="op" id="2494026">(</span><span class="ident" id="2494027"><a href="/gostd/syscall/exec_unix.go.html#2493575">attr</a></span><span class="op" id="2494031">.</span><span class="ident" id="2494032"><a href="/gostd/syscall/exec_unix.go.html#2493380">Env</a></span><span class="op" id="2494035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494038">if</span>&nbsp;<span class="ident" id="2494041"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2494045">!=</span>&nbsp;<span class="builtintype" id="2494048">nil</span>&nbsp;<span class="op" id="2494052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494056">return</span>&nbsp;<span class="num" id="2494063">0</span><span class="op" id="2494064">,</span>&nbsp;<span class="ident" id="2494066"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2494071">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494075">if</span>&nbsp;<span class="op" id="2494078">(</span><span class="ident" id="2494079"><a href="/gostd/syscall/exec_unix.go.html#2489462">runtime</a></span><span class="op" id="2494086">.</span><span class="ident" id="2494087"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="2494092">==</span>&nbsp;<span class="string" id="2494095">&#34;freebsd&#34;</span>&nbsp;<span class="op" id="2494105">||</span>&nbsp;<span class="ident" id="2494108"><a href="/gostd/syscall/exec_unix.go.html#2489462">runtime</a></span><span class="op" id="2494115">.</span><span class="ident" id="2494116"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="2494121">==</span>&nbsp;<span class="string" id="2494124">&#34;dragonfly&#34;</span><span class="op" id="2494135">)</span>&nbsp;<span class="op" id="2494137">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2494140">len</span><span class="op" id="2494143">(</span><span class="ident" id="2494144"><a href="/gostd/syscall/exec_unix.go.html#2493560">argv</a></span><span class="op" id="2494148">[</span><span class="num" id="2494149">0</span><span class="op" id="2494150">]</span><span class="op" id="2494151">)</span>&nbsp;<span class="op" id="2494153">&gt;</span>&nbsp;<span class="builtinfunc" id="2494155">len</span><span class="op" id="2494158">(</span><span class="ident" id="2494159"><a href="/gostd/syscall/exec_unix.go.html#2493546">argv0</a></span><span class="op" id="2494164">)</span>&nbsp;<span class="op" id="2494166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494170"><a href="/gostd/syscall/exec_unix.go.html#2493916">argvp</a></span><span class="op" id="2494175">[</span><span class="num" id="2494176">0</span><span class="op" id="2494177">]</span>&nbsp;<span class="op" id="2494179">=</span>&nbsp;<span class="ident" id="2494181"><a href="/gostd/syscall/exec_unix.go.html#2493839">argv0p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2494189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494193">var</span>&nbsp;<span class="ident" id="2494197">chroot</span>&nbsp;<span class="op" id="2494204">*</span><span class="builtintype" id="2494205">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494211">if</span>&nbsp;<span class="ident" id="2494214"><a href="/gostd/syscall/exec_unix.go.html#2493725">sys</a></span><span class="op" id="2494217">.</span><span class="ident" id="2494218"><a href="/gostd/syscall/exec_linux.go.html#2480065">Chroot</a></span>&nbsp;<span class="op" id="2494225">!=</span>&nbsp;<span class="string" id="2494228">&#34;&#34;</span>&nbsp;<span class="op" id="2494231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494235"><a href="/gostd/syscall/exec_unix.go.html#2494197">chroot</a></span><span class="op" id="2494241">,</span>&nbsp;<span class="ident" id="2494243"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2494247">=</span>&nbsp;<span class="ident" id="2494249"><a href="/gostd/syscall/syscall.go.html#2511257">BytePtrFromString</a></span><span class="op" id="2494266">(</span><span class="ident" id="2494267"><a href="/gostd/syscall/exec_unix.go.html#2493725">sys</a></span><span class="op" id="2494270">.</span><span class="ident" id="2494271"><a href="/gostd/syscall/exec_linux.go.html#2480065">Chroot</a></span><span class="op" id="2494277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494281">if</span>&nbsp;<span class="ident" id="2494284"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2494288">!=</span>&nbsp;<span class="builtintype" id="2494291">nil</span>&nbsp;<span class="op" id="2494295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494300">return</span>&nbsp;<span class="num" id="2494307">0</span><span class="op" id="2494308">,</span>&nbsp;<span class="ident" id="2494310"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2494316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2494319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494322">var</span>&nbsp;<span class="ident" id="2494326">dir</span>&nbsp;<span class="op" id="2494330">*</span><span class="builtintype" id="2494331">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494337">if</span>&nbsp;<span class="ident" id="2494340"><a href="/gostd/syscall/exec_unix.go.html#2493575">attr</a></span><span class="op" id="2494344">.</span><span class="ident" id="2494345"><a href="/gostd/syscall/exec_unix.go.html#2493333">Dir</a></span>&nbsp;<span class="op" id="2494349">!=</span>&nbsp;<span class="string" id="2494352">&#34;&#34;</span>&nbsp;<span class="op" id="2494355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494359"><a href="/gostd/syscall/exec_unix.go.html#2494326">dir</a></span><span class="op" id="2494362">,</span>&nbsp;<span class="ident" id="2494364"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2494368">=</span>&nbsp;<span class="ident" id="2494370"><a href="/gostd/syscall/syscall.go.html#2511257">BytePtrFromString</a></span><span class="op" id="2494387">(</span><span class="ident" id="2494388"><a href="/gostd/syscall/exec_unix.go.html#2493575">attr</a></span><span class="op" id="2494392">.</span><span class="ident" id="2494393"><a href="/gostd/syscall/exec_unix.go.html#2493333">Dir</a></span><span class="op" id="2494396">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494400">if</span>&nbsp;<span class="ident" id="2494403"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2494407">!=</span>&nbsp;<span class="builtintype" id="2494410">nil</span>&nbsp;<span class="op" id="2494414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494419">return</span>&nbsp;<span class="num" id="2494426">0</span><span class="op" id="2494427">,</span>&nbsp;<span class="ident" id="2494429"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2494435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2494438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2494442">//&nbsp;Acquire&nbsp;the&nbsp;fork&nbsp;lock&nbsp;so&nbsp;that&nbsp;no&nbsp;other&nbsp;threads</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2494493">//&nbsp;create&nbsp;new&nbsp;fds&nbsp;that&nbsp;are&nbsp;not&nbsp;yet&nbsp;close-on-exec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2494543">//&nbsp;before&nbsp;we&nbsp;fork.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494563"><a href="/gostd/syscall/exec_unix.go.html#2491879">ForkLock</a></span><span class="op" id="2494571">.</span><span class="ident" id="2494572"><a href="/gostd/sync/rwmutex.go.html#1457713">Lock</a></span><span class="op" id="2494576">(</span><span class="op" id="2494577">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2494581">//&nbsp;Allocate&nbsp;child&nbsp;status&nbsp;pipe&nbsp;close&nbsp;on&nbsp;exec.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494627">if</span>&nbsp;<span class="ident" id="2494630"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2494634">=</span>&nbsp;<span class="ident" id="2494636"><a href="/gostd/syscall/exec_linux.go.html#2487690">forkExecPipe</a></span><span class="op" id="2494648">(</span><span class="ident" id="2494649"><a href="/gostd/syscall/exec_unix.go.html#2493619">p</a></span><span class="op" id="2494650">[</span><span class="op" id="2494651">:</span><span class="op" id="2494652">]</span><span class="op" id="2494653">)</span><span class="op" id="2494654">;</span>&nbsp;<span class="ident" id="2494656"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2494660">!=</span>&nbsp;<span class="builtintype" id="2494663">nil</span>&nbsp;<span class="op" id="2494667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494671">goto</span>&nbsp;<span class="builtintype" id="2494676"><a href="/gostd/syscall/exec_unix.go.html#2495433">error</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2494683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2494687">//&nbsp;Kick&nbsp;off&nbsp;child.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494707"><a href="/gostd/syscall/exec_unix.go.html#2493592">pid</a></span><span class="op" id="2494710">,</span>&nbsp;<span class="ident" id="2494712"><a href="/gostd/syscall/exec_unix.go.html#2493644">err1</a></span>&nbsp;<span class="op" id="2494717">=</span>&nbsp;<span class="ident" id="2494719"><a href="/gostd/syscall/exec_linux.go.html#2481510">forkAndExecInChild</a></span><span class="op" id="2494737">(</span><span class="ident" id="2494738"><a href="/gostd/syscall/exec_unix.go.html#2493839">argv0p</a></span><span class="op" id="2494744">,</span>&nbsp;<span class="ident" id="2494746"><a href="/gostd/syscall/exec_unix.go.html#2493916">argvp</a></span><span class="op" id="2494751">,</span>&nbsp;<span class="ident" id="2494753"><a href="/gostd/syscall/exec_unix.go.html#2493993">envvp</a></span><span class="op" id="2494758">,</span>&nbsp;<span class="ident" id="2494760"><a href="/gostd/syscall/exec_unix.go.html#2494197">chroot</a></span><span class="op" id="2494766">,</span>&nbsp;<span class="ident" id="2494768"><a href="/gostd/syscall/exec_unix.go.html#2494326">dir</a></span><span class="op" id="2494771">,</span>&nbsp;<span class="ident" id="2494773"><a href="/gostd/syscall/exec_unix.go.html#2493575">attr</a></span><span class="op" id="2494777">,</span>&nbsp;<span class="ident" id="2494779"><a href="/gostd/syscall/exec_unix.go.html#2493725">sys</a></span><span class="op" id="2494782">,</span>&nbsp;<span class="ident" id="2494784"><a href="/gostd/syscall/exec_unix.go.html#2493619">p</a></span><span class="op" id="2494785">[</span><span class="num" id="2494786">1</span><span class="op" id="2494787">]</span><span class="op" id="2494788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494791">if</span>&nbsp;<span class="ident" id="2494794"><a href="/gostd/syscall/exec_unix.go.html#2493644">err1</a></span>&nbsp;<span class="op" id="2494799">!=</span>&nbsp;<span class="num" id="2494802">0</span>&nbsp;<span class="op" id="2494804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494808"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2494812">=</span>&nbsp;<span class="ident" id="2494814"><a href="/gostd/syscall/syscall_unix.go.html#2545791">Errno</a></span><span class="op" id="2494819">(</span><span class="ident" id="2494820"><a href="/gostd/syscall/exec_unix.go.html#2493644">err1</a></span><span class="op" id="2494824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494828">goto</span>&nbsp;<span class="builtintype" id="2494833"><a href="/gostd/syscall/exec_unix.go.html#2495433">error</a></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2494840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494843"><a href="/gostd/syscall/exec_unix.go.html#2491879">ForkLock</a></span><span class="op" id="2494851">.</span><span class="ident" id="2494852"><a href="/gostd/sync/rwmutex.go.html#1458554">Unlock</a></span><span class="op" id="2494858">(</span><span class="op" id="2494859">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2494863">//&nbsp;Read&nbsp;child&nbsp;error&nbsp;status&nbsp;from&nbsp;pipe.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494902"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2616725">Close</a></span><span class="op" id="2494907">(</span><span class="ident" id="2494908"><a href="/gostd/syscall/exec_unix.go.html#2493619">p</a></span><span class="op" id="2494909">[</span><span class="num" id="2494910">1</span><span class="op" id="2494911">]</span><span class="op" id="2494912">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494915"><a href="/gostd/syscall/exec_unix.go.html#2493633">n</a></span><span class="op" id="2494916">,</span>&nbsp;<span class="ident" id="2494918"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2494922">=</span>&nbsp;<span class="ident" id="2494924"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2639228">readlen</a></span><span class="op" id="2494931">(</span><span class="ident" id="2494932"><a href="/gostd/syscall/exec_unix.go.html#2493619">p</a></span><span class="op" id="2494933">[</span><span class="num" id="2494934">0</span><span class="op" id="2494935">]</span><span class="op" id="2494936">,</span>&nbsp;<span class="op" id="2494938">(</span><span class="op" id="2494939">*</span><span class="builtintype" id="2494940">byte</span><span class="op" id="2494944">)</span><span class="op" id="2494945">(</span><span class="ident" id="2494946"><a href="/gostd/syscall/exec_unix.go.html#2489481">unsafe</a></span><span class="op" id="2494952">.</span><span class="ident" id="2494953">Pointer</span><span class="op" id="2494960">(</span><span class="op" id="2494961">&amp;</span><span class="ident" id="2494962"><a href="/gostd/syscall/exec_unix.go.html#2493644">err1</a></span><span class="op" id="2494966">)</span><span class="op" id="2494967">)</span><span class="op" id="2494968">,</span>&nbsp;<span class="builtintype" id="2494970">int</span><span class="op" id="2494973">(</span><span class="ident" id="2494974"><a href="/gostd/syscall/exec_unix.go.html#2489481">unsafe</a></span><span class="op" id="2494980">.</span><span class="ident" id="2494981">Sizeof</span><span class="op" id="2494987">(</span><span class="ident" id="2494988"><a href="/gostd/syscall/exec_unix.go.html#2493644">err1</a></span><span class="op" id="2494992">)</span><span class="op" id="2494993">)</span><span class="op" id="2494994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494997"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2616725">Close</a></span><span class="op" id="2495002">(</span><span class="ident" id="2495003"><a href="/gostd/syscall/exec_unix.go.html#2493619">p</a></span><span class="op" id="2495004">[</span><span class="num" id="2495005">0</span><span class="op" id="2495006">]</span><span class="op" id="2495007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495010">if</span>&nbsp;<span class="ident" id="2495013"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2495017">!=</span>&nbsp;<span class="builtintype" id="2495020">nil</span>&nbsp;<span class="op" id="2495024">||</span>&nbsp;<span class="ident" id="2495027"><a href="/gostd/syscall/exec_unix.go.html#2493633">n</a></span>&nbsp;<span class="op" id="2495029">!=</span>&nbsp;<span class="num" id="2495032">0</span>&nbsp;<span class="op" id="2495034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495038">if</span>&nbsp;<span class="ident" id="2495041"><a href="/gostd/syscall/exec_unix.go.html#2493633">n</a></span>&nbsp;<span class="op" id="2495043">==</span>&nbsp;<span class="builtintype" id="2495046">int</span><span class="op" id="2495049">(</span><span class="ident" id="2495050"><a href="/gostd/syscall/exec_unix.go.html#2489481">unsafe</a></span><span class="op" id="2495056">.</span><span class="ident" id="2495057">Sizeof</span><span class="op" id="2495063">(</span><span class="ident" id="2495064"><a href="/gostd/syscall/exec_unix.go.html#2493644">err1</a></span><span class="op" id="2495068">)</span><span class="op" id="2495069">)</span>&nbsp;<span class="op" id="2495071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2495076"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2495080">=</span>&nbsp;<span class="ident" id="2495082"><a href="/gostd/syscall/syscall_unix.go.html#2545791">Errno</a></span><span class="op" id="2495087">(</span><span class="ident" id="2495088"><a href="/gostd/syscall/exec_unix.go.html#2493644">err1</a></span><span class="op" id="2495092">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2495096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495100">if</span>&nbsp;<span class="ident" id="2495103"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2495107">==</span>&nbsp;<span class="builtintype" id="2495110">nil</span>&nbsp;<span class="op" id="2495114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2495119"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span>&nbsp;<span class="op" id="2495123">=</span>&nbsp;<span class="ident" id="2495125"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2603370">EPIPE</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2495133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2495138">//&nbsp;Child&nbsp;failed;&nbsp;wait&nbsp;for&nbsp;it&nbsp;to&nbsp;exit,&nbsp;to&nbsp;make&nbsp;sure</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2495191">//&nbsp;the&nbsp;zombies&nbsp;don&#39;t&nbsp;accumulate.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2495226">_</span><span class="op" id="2495227">,</span>&nbsp;<span class="ident" id="2495229">err1</span>&nbsp;<span class="op" id="2495234">:=</span>&nbsp;<span class="ident" id="2495237"><a href="/gostd/syscall/syscall_linux.go.html#2517105">Wait4</a></span><span class="op" id="2495242">(</span><span class="ident" id="2495243"><a href="/gostd/syscall/exec_unix.go.html#2493592">pid</a></span><span class="op" id="2495246">,</span>&nbsp;<span class="op" id="2495248">&amp;</span><span class="ident" id="2495249"><a href="/gostd/syscall/exec_unix.go.html#2493660">wstatus</a></span><span class="op" id="2495256">,</span>&nbsp;<span class="num" id="2495258">0</span><span class="op" id="2495259">,</span>&nbsp;<span class="builtintype" id="2495261">nil</span><span class="op" id="2495264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495268">for</span>&nbsp;<span class="ident" id="2495272"><a href="/gostd/syscall/exec_unix.go.html#2495229">err1</a></span>&nbsp;<span class="op" id="2495277">==</span>&nbsp;<span class="ident" id="2495280"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601301">EINTR</a></span>&nbsp;<span class="op" id="2495286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2495291">_</span><span class="op" id="2495292">,</span>&nbsp;<span class="ident" id="2495294"><a href="/gostd/syscall/exec_unix.go.html#2495229">err1</a></span>&nbsp;<span class="op" id="2495299">=</span>&nbsp;<span class="ident" id="2495301"><a href="/gostd/syscall/syscall_linux.go.html#2517105">Wait4</a></span><span class="op" id="2495306">(</span><span class="ident" id="2495307"><a href="/gostd/syscall/exec_unix.go.html#2493592">pid</a></span><span class="op" id="2495310">,</span>&nbsp;<span class="op" id="2495312">&amp;</span><span class="ident" id="2495313"><a href="/gostd/syscall/exec_unix.go.html#2493660">wstatus</a></span><span class="op" id="2495320">,</span>&nbsp;<span class="num" id="2495322">0</span><span class="op" id="2495323">,</span>&nbsp;<span class="builtintype" id="2495325">nil</span><span class="op" id="2495328">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2495332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495336">return</span>&nbsp;<span class="num" id="2495343">0</span><span class="op" id="2495344">,</span>&nbsp;<span class="ident" id="2495346"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2495351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2495355">//&nbsp;Read&nbsp;got&nbsp;EOF,&nbsp;so&nbsp;pipe&nbsp;closed&nbsp;on&nbsp;exec,&nbsp;so&nbsp;exec&nbsp;succeeded.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495416">return</span>&nbsp;<span class="ident" id="2495423"><a href="/gostd/syscall/exec_unix.go.html#2493592">pid</a></span><span class="op" id="2495426">,</span>&nbsp;<span class="builtintype" id="2495428">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="builtintype" id="2495433">error</span><span class="op" id="2495438">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495441">if</span>&nbsp;<span class="ident" id="2495444"><a href="/gostd/syscall/exec_unix.go.html#2493619">p</a></span><span class="op" id="2495445">[</span><span class="num" id="2495446">0</span><span class="op" id="2495447">]</span>&nbsp;<span class="op" id="2495449">&gt;=</span>&nbsp;<span class="num" id="2495452">0</span>&nbsp;<span class="op" id="2495454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2495458"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2616725">Close</a></span><span class="op" id="2495463">(</span><span class="ident" id="2495464"><a href="/gostd/syscall/exec_unix.go.html#2493619">p</a></span><span class="op" id="2495465">[</span><span class="num" id="2495466">0</span><span class="op" id="2495467">]</span><span class="op" id="2495468">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2495472"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2616725">Close</a></span><span class="op" id="2495477">(</span><span class="ident" id="2495478"><a href="/gostd/syscall/exec_unix.go.html#2493619">p</a></span><span class="op" id="2495479">[</span><span class="num" id="2495480">1</span><span class="op" id="2495481">]</span><span class="op" id="2495482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2495485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2495488"><a href="/gostd/syscall/exec_unix.go.html#2491879">ForkLock</a></span><span class="op" id="2495496">.</span><span class="ident" id="2495497"><a href="/gostd/sync/rwmutex.go.html#1458554">Unlock</a></span><span class="op" id="2495503">(</span><span class="op" id="2495504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495507">return</span>&nbsp;<span class="num" id="2495514">0</span><span class="op" id="2495515">,</span>&nbsp;<span class="ident" id="2495517"><a href="/gostd/syscall/exec_unix.go.html#2493601">err</a></span><br>
<span class="lineno"></span><span class="op" id="2495521">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="2495524">//&nbsp;Combination&nbsp;of&nbsp;fork&nbsp;and&nbsp;exec,&nbsp;careful&nbsp;to&nbsp;be&nbsp;thread&nbsp;safe.</span><br>
<span class="lineno"></span><span class="keyword" id="2495584">func</span>&nbsp;<span class="ident" id="2495589">ForkExec</span><span class="op" id="2495597">(</span><span class="ident" id="2495598">argv0</span>&nbsp;<span class="builtintype" id="2495604">string</span><span class="op" id="2495610">,</span>&nbsp;<span class="ident" id="2495612">argv</span>&nbsp;<span class="op" id="2495617">[</span><span class="op" id="2495618">]</span><span class="builtintype" id="2495619">string</span><span class="op" id="2495625">,</span>&nbsp;<span class="ident" id="2495627">attr</span>&nbsp;<span class="op" id="2495632">*</span><span class="ident" id="2495633"><a href="/gostd/syscall/exec_unix.go.html#2493314">ProcAttr</a></span><span class="op" id="2495641">)</span>&nbsp;<span class="op" id="2495643">(</span><span class="ident" id="2495644">pid</span>&nbsp;<span class="builtintype" id="2495648">int</span><span class="op" id="2495651">,</span>&nbsp;<span class="ident" id="2495653">err</span>&nbsp;<span class="builtintype" id="2495657">error</span><span class="op" id="2495662">)</span>&nbsp;<span class="op" id="2495664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495667">return</span>&nbsp;<span class="ident" id="2495674"><a href="/gostd/syscall/exec_unix.go.html#2493537">forkExec</a></span><span class="op" id="2495682">(</span><span class="ident" id="2495683"><a href="/gostd/syscall/exec_unix.go.html#2495598">argv0</a></span><span class="op" id="2495688">,</span>&nbsp;<span class="ident" id="2495690"><a href="/gostd/syscall/exec_unix.go.html#2495612">argv</a></span><span class="op" id="2495694">,</span>&nbsp;<span class="ident" id="2495696"><a href="/gostd/syscall/exec_unix.go.html#2495627">attr</a></span><span class="op" id="2495700">)</span><br>
<span class="lineno"></span><span class="op" id="2495702">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="comment" id="2495705">//&nbsp;StartProcess&nbsp;wraps&nbsp;ForkExec&nbsp;for&nbsp;package&nbsp;os.</span><br>
<span class="lineno"></span><span class="keyword" id="2495752">func</span>&nbsp;<span class="ident" id="2495757">StartProcess</span><span class="op" id="2495769">(</span><span class="ident" id="2495770">argv0</span>&nbsp;<span class="builtintype" id="2495776">string</span><span class="op" id="2495782">,</span>&nbsp;<span class="ident" id="2495784">argv</span>&nbsp;<span class="op" id="2495789">[</span><span class="op" id="2495790">]</span><span class="builtintype" id="2495791">string</span><span class="op" id="2495797">,</span>&nbsp;<span class="ident" id="2495799">attr</span>&nbsp;<span class="op" id="2495804">*</span><span class="ident" id="2495805"><a href="/gostd/syscall/exec_unix.go.html#2493314">ProcAttr</a></span><span class="op" id="2495813">)</span>&nbsp;<span class="op" id="2495815">(</span><span class="ident" id="2495816">pid</span>&nbsp;<span class="builtintype" id="2495820">int</span><span class="op" id="2495823">,</span>&nbsp;<span class="ident" id="2495825">handle</span>&nbsp;<span class="builtintype" id="2495832">uintptr</span><span class="op" id="2495839">,</span>&nbsp;<span class="ident" id="2495841">err</span>&nbsp;<span class="builtintype" id="2495845">error</span><span class="op" id="2495850">)</span>&nbsp;<span class="op" id="2495852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2495855"><a href="/gostd/syscall/exec_unix.go.html#2495816">pid</a></span><span class="op" id="2495858">,</span>&nbsp;<span class="ident" id="2495860"><a href="/gostd/syscall/exec_unix.go.html#2495841">err</a></span>&nbsp;<span class="op" id="2495864">=</span>&nbsp;<span class="ident" id="2495866"><a href="/gostd/syscall/exec_unix.go.html#2493537">forkExec</a></span><span class="op" id="2495874">(</span><span class="ident" id="2495875"><a href="/gostd/syscall/exec_unix.go.html#2495770">argv0</a></span><span class="op" id="2495880">,</span>&nbsp;<span class="ident" id="2495882"><a href="/gostd/syscall/exec_unix.go.html#2495784">argv</a></span><span class="op" id="2495886">,</span>&nbsp;<span class="ident" id="2495888"><a href="/gostd/syscall/exec_unix.go.html#2495799">attr</a></span><span class="op" id="2495892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495895">return</span>&nbsp;<span class="ident" id="2495902"><a href="/gostd/syscall/exec_unix.go.html#2495816">pid</a></span><span class="op" id="2495905">,</span>&nbsp;<span class="num" id="2495907">0</span><span class="op" id="2495908">,</span>&nbsp;<span class="ident" id="2495910"><a href="/gostd/syscall/exec_unix.go.html#2495841">err</a></span><br>
<span class="lineno">240</span><span class="op" id="2495914">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2495917">//&nbsp;Ordinary&nbsp;exec.</span><br>
<span class="lineno"></span><span class="keyword" id="2495935">func</span>&nbsp;<span class="ident" id="2495940">Exec</span><span class="op" id="2495944">(</span><span class="ident" id="2495945">argv0</span>&nbsp;<span class="builtintype" id="2495951">string</span><span class="op" id="2495957">,</span>&nbsp;<span class="ident" id="2495959">argv</span>&nbsp;<span class="op" id="2495964">[</span><span class="op" id="2495965">]</span><span class="builtintype" id="2495966">string</span><span class="op" id="2495972">,</span>&nbsp;<span class="ident" id="2495974">envv</span>&nbsp;<span class="op" id="2495979">[</span><span class="op" id="2495980">]</span><span class="builtintype" id="2495981">string</span><span class="op" id="2495987">)</span>&nbsp;<span class="op" id="2495989">(</span><span class="ident" id="2495990">err</span>&nbsp;<span class="builtintype" id="2495994">error</span><span class="op" id="2495999">)</span>&nbsp;<span class="op" id="2496001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2496004">argv0p</span><span class="op" id="2496010">,</span>&nbsp;<span class="ident" id="2496012"><a href="/gostd/syscall/exec_unix.go.html#2495990">err</a></span>&nbsp;<span class="op" id="2496016">:=</span>&nbsp;<span class="ident" id="2496019"><a href="/gostd/syscall/syscall.go.html#2511257">BytePtrFromString</a></span><span class="op" id="2496036">(</span><span class="ident" id="2496037"><a href="/gostd/syscall/exec_unix.go.html#2495945">argv0</a></span><span class="op" id="2496042">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2496045">if</span>&nbsp;<span class="ident" id="2496048"><a href="/gostd/syscall/exec_unix.go.html#2495990">err</a></span>&nbsp;<span class="op" id="2496052">!=</span>&nbsp;<span class="builtintype" id="2496055">nil</span>&nbsp;<span class="op" id="2496059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2496063">return</span>&nbsp;<span class="ident" id="2496070"><a href="/gostd/syscall/exec_unix.go.html#2495990">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2496075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2496078">argvp</span><span class="op" id="2496083">,</span>&nbsp;<span class="ident" id="2496085"><a href="/gostd/syscall/exec_unix.go.html#2495990">err</a></span>&nbsp;<span class="op" id="2496089">:=</span>&nbsp;<span class="ident" id="2496092"><a href="/gostd/syscall/exec_unix.go.html#2492411">SlicePtrFromStrings</a></span><span class="op" id="2496111">(</span><span class="ident" id="2496112"><a href="/gostd/syscall/exec_unix.go.html#2495959">argv</a></span><span class="op" id="2496116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2496119">if</span>&nbsp;<span class="ident" id="2496122"><a href="/gostd/syscall/exec_unix.go.html#2495990">err</a></span>&nbsp;<span class="op" id="2496126">!=</span>&nbsp;<span class="builtintype" id="2496129">nil</span>&nbsp;<span class="op" id="2496133">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2496137">return</span>&nbsp;<span class="ident" id="2496144"><a href="/gostd/syscall/exec_unix.go.html#2495990">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2496149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2496152">envvp</span><span class="op" id="2496157">,</span>&nbsp;<span class="ident" id="2496159"><a href="/gostd/syscall/exec_unix.go.html#2495990">err</a></span>&nbsp;<span class="op" id="2496163">:=</span>&nbsp;<span class="ident" id="2496166"><a href="/gostd/syscall/exec_unix.go.html#2492411">SlicePtrFromStrings</a></span><span class="op" id="2496185">(</span><span class="ident" id="2496186"><a href="/gostd/syscall/exec_unix.go.html#2495974">envv</a></span><span class="op" id="2496190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2496193">if</span>&nbsp;<span class="ident" id="2496196"><a href="/gostd/syscall/exec_unix.go.html#2495990">err</a></span>&nbsp;<span class="op" id="2496200">!=</span>&nbsp;<span class="builtintype" id="2496203">nil</span>&nbsp;<span class="op" id="2496207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2496211">return</span>&nbsp;<span class="ident" id="2496218"><a href="/gostd/syscall/exec_unix.go.html#2495990">err</a></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2496223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2496226">_</span><span class="op" id="2496227">,</span>&nbsp;<span class="ident" id="2496229">_</span><span class="op" id="2496230">,</span>&nbsp;<span class="ident" id="2496232">err1</span>&nbsp;<span class="op" id="2496237">:=</span>&nbsp;<span class="ident" id="2496240"><a href="/gostd/syscall/syscall_unix.go.html#2544009">RawSyscall</a></span><span class="op" id="2496250">(</span><span class="ident" id="2496251"><a href="/gostd/syscall/zsysnum_linux_amd64.go.html#2657921">SYS_EXECVE</a></span><span class="op" id="2496261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2496265">uintptr</span><span class="op" id="2496272">(</span><span class="ident" id="2496273"><a href="/gostd/syscall/exec_unix.go.html#2489481">unsafe</a></span><span class="op" id="2496279">.</span><span class="ident" id="2496280">Pointer</span><span class="op" id="2496287">(</span><span class="ident" id="2496288"><a href="/gostd/syscall/exec_unix.go.html#2496004">argv0p</a></span><span class="op" id="2496294">)</span><span class="op" id="2496295">)</span><span class="op" id="2496296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2496300">uintptr</span><span class="op" id="2496307">(</span><span class="ident" id="2496308"><a href="/gostd/syscall/exec_unix.go.html#2489481">unsafe</a></span><span class="op" id="2496314">.</span><span class="ident" id="2496315">Pointer</span><span class="op" id="2496322">(</span><span class="op" id="2496323">&amp;</span><span class="ident" id="2496324"><a href="/gostd/syscall/exec_unix.go.html#2496078">argvp</a></span><span class="op" id="2496329">[</span><span class="num" id="2496330">0</span><span class="op" id="2496331">]</span><span class="op" id="2496332">)</span><span class="op" id="2496333">)</span><span class="op" id="2496334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2496338">uintptr</span><span class="op" id="2496345">(</span><span class="ident" id="2496346"><a href="/gostd/syscall/exec_unix.go.html#2489481">unsafe</a></span><span class="op" id="2496352">.</span><span class="ident" id="2496353">Pointer</span><span class="op" id="2496360">(</span><span class="op" id="2496361">&amp;</span><span class="ident" id="2496362"><a href="/gostd/syscall/exec_unix.go.html#2496152">envvp</a></span><span class="op" id="2496367">[</span><span class="num" id="2496368">0</span><span class="op" id="2496369">]</span><span class="op" id="2496370">)</span><span class="op" id="2496371">)</span><span class="op" id="2496372">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2496375">return</span>&nbsp;<span class="ident" id="2496382"><a href="/gostd/syscall/syscall_unix.go.html#2545791">Errno</a></span><span class="op" id="2496387">(</span><span class="ident" id="2496388"><a href="/gostd/syscall/exec_unix.go.html#2496232">err1</a></span><span class="op" id="2496392">)</span><br>
<span class="lineno"></span><span class="op" id="2496394">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
