<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html" class="current">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6640375">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6640430">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6640484">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6640535">package</span>&nbsp;<span class="ident" id="6640543">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6640548">import</span>&nbsp;<span class="op" id="6640555">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6640558">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6640571">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6640581">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6640584">func</span>&nbsp;<span class="ident" id="6640589">checkDistribution</span><span class="op" id="6640606">(</span><span class="ident" id="6640607">t</span>&nbsp;<span class="op" id="6640609">*</span><span class="ident" id="6640610"><a href="/gostd/net/dnsclient_test.go.html#6640571">testing</a></span><span class="op" id="6640617">.</span><span class="ident" id="6640618"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6640619">,</span>&nbsp;<span class="ident" id="6640621">data</span>&nbsp;<span class="op" id="6640626">[</span><span class="op" id="6640627">]</span><span class="op" id="6640628">*</span><span class="ident" id="6640629"><a href="/gostd/net/dnsclient.go.html#3212752">SRV</a></span><span class="op" id="6640632">,</span>&nbsp;<span class="ident" id="6640634">margin</span>&nbsp;<span class="builtintype" id="6640641">float64</span><span class="op" id="6640648">)</span>&nbsp;<span class="op" id="6640650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640653">sum</span>&nbsp;<span class="op" id="6640657">:=</span>&nbsp;<span class="num" id="6640660">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6640663">for</span>&nbsp;<span class="ident" id="6640667">_</span><span class="op" id="6640668">,</span>&nbsp;<span class="ident" id="6640670">srv</span>&nbsp;<span class="op" id="6640674">:=</span>&nbsp;<span class="keyword" id="6640677">range</span>&nbsp;<span class="ident" id="6640683"><a href="/gostd/net/dnsclient_test.go.html#6640621">data</a></span>&nbsp;<span class="op" id="6640688">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640692"><a href="/gostd/net/dnsclient_test.go.html#6640653">sum</a></span>&nbsp;<span class="op" id="6640696">+=</span>&nbsp;<span class="builtintype" id="6640699">int</span><span class="op" id="6640702">(</span><span class="ident" id="6640703"><a href="/gostd/net/dnsclient_test.go.html#6640670">srv</a></span><span class="op" id="6640706">.</span><span class="ident" id="6640707"><a href="/gostd/net/dnsclient.go.html#3212817">Weight</a></span><span class="op" id="6640713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6640716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640720">results</span>&nbsp;<span class="op" id="6640728">:=</span>&nbsp;<span class="builtinfunc" id="6640731">make</span><span class="op" id="6640735">(</span><span class="keyword" id="6640736">map</span><span class="op" id="6640739">[</span><span class="builtintype" id="6640740">string</span><span class="op" id="6640746">]</span><span class="builtintype" id="6640747">int</span><span class="op" id="6640750">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640754">count</span>&nbsp;<span class="op" id="6640760">:=</span>&nbsp;<span class="num" id="6640763">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6640769">for</span>&nbsp;<span class="ident" id="6640773">j</span>&nbsp;<span class="op" id="6640775">:=</span>&nbsp;<span class="num" id="6640778">0</span><span class="op" id="6640779">;</span>&nbsp;<span class="ident" id="6640781"><a href="/gostd/net/dnsclient_test.go.html#6640773">j</a></span>&nbsp;<span class="op" id="6640783">&lt;</span>&nbsp;<span class="ident" id="6640785"><a href="/gostd/net/dnsclient_test.go.html#6640754">count</a></span><span class="op" id="6640790">;</span>&nbsp;<span class="ident" id="6640792"><a href="/gostd/net/dnsclient_test.go.html#6640773">j</a></span><span class="op" id="6640793">++</span>&nbsp;<span class="op" id="6640796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640800">d</span>&nbsp;<span class="op" id="6640802">:=</span>&nbsp;<span class="builtinfunc" id="6640805">make</span><span class="op" id="6640809">(</span><span class="op" id="6640810">[</span><span class="op" id="6640811">]</span><span class="op" id="6640812">*</span><span class="ident" id="6640813"><a href="/gostd/net/dnsclient.go.html#3212752">SRV</a></span><span class="op" id="6640816">,</span>&nbsp;<span class="builtinfunc" id="6640818">len</span><span class="op" id="6640821">(</span><span class="ident" id="6640822"><a href="/gostd/net/dnsclient_test.go.html#6640621">data</a></span><span class="op" id="6640826">)</span><span class="op" id="6640827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6640831">copy</span><span class="op" id="6640835">(</span><span class="ident" id="6640836"><a href="/gostd/net/dnsclient_test.go.html#6640800">d</a></span><span class="op" id="6640837">,</span>&nbsp;<span class="ident" id="6640839"><a href="/gostd/net/dnsclient_test.go.html#6640621">data</a></span><span class="op" id="6640843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640847"><a href="/gostd/net/dnsclient.go.html#3212913">byPriorityWeight</a></span><span class="op" id="6640863">(</span><span class="ident" id="6640864"><a href="/gostd/net/dnsclient_test.go.html#6640800">d</a></span><span class="op" id="6640865">)</span><span class="op" id="6640866">.</span><span class="ident" id="6640867"><a href="/gostd/net/dnsclient.go.html#3213345">shuffleByWeight</a></span><span class="op" id="6640882">(</span><span class="op" id="6640883">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640887">key</span>&nbsp;<span class="op" id="6640891">:=</span>&nbsp;<span class="ident" id="6640894"><a href="/gostd/net/dnsclient_test.go.html#6640800">d</a></span><span class="op" id="6640895">[</span><span class="num" id="6640896">0</span><span class="op" id="6640897">]</span><span class="op" id="6640898">.</span><span class="ident" id="6640899"><a href="/gostd/net/dnsclient.go.html#3212766">Target</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640908"><a href="/gostd/net/dnsclient_test.go.html#6640720">results</a></span><span class="op" id="6640915">[</span><span class="ident" id="6640916"><a href="/gostd/net/dnsclient_test.go.html#6640887">key</a></span><span class="op" id="6640919">]</span>&nbsp;<span class="op" id="6640921">=</span>&nbsp;<span class="ident" id="6640923"><a href="/gostd/net/dnsclient_test.go.html#6640720">results</a></span><span class="op" id="6640930">[</span><span class="ident" id="6640931"><a href="/gostd/net/dnsclient_test.go.html#6640887">key</a></span><span class="op" id="6640934">]</span>&nbsp;<span class="op" id="6640936">+</span>&nbsp;<span class="num" id="6640938">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6640941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640945">actual</span>&nbsp;<span class="op" id="6640952">:=</span>&nbsp;<span class="ident" id="6640955"><a href="/gostd/net/dnsclient_test.go.html#6640720">results</a></span><span class="op" id="6640962">[</span><span class="ident" id="6640963"><a href="/gostd/net/dnsclient_test.go.html#6640621">data</a></span><span class="op" id="6640967">[</span><span class="num" id="6640968">0</span><span class="op" id="6640969">]</span><span class="op" id="6640970">.</span><span class="ident" id="6640971"><a href="/gostd/net/dnsclient.go.html#3212766">Target</a></span><span class="op" id="6640977">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640980">expected</span>&nbsp;<span class="op" id="6640989">:=</span>&nbsp;<span class="builtintype" id="6640992">float64</span><span class="op" id="6640999">(</span><span class="ident" id="6641000"><a href="/gostd/net/dnsclient_test.go.html#6640754">count</a></span><span class="op" id="6641005">)</span>&nbsp;<span class="op" id="6641007">*</span>&nbsp;<span class="builtintype" id="6641009">float64</span><span class="op" id="6641016">(</span><span class="ident" id="6641017"><a href="/gostd/net/dnsclient_test.go.html#6640621">data</a></span><span class="op" id="6641021">[</span><span class="num" id="6641022">0</span><span class="op" id="6641023">]</span><span class="op" id="6641024">.</span><span class="ident" id="6641025"><a href="/gostd/net/dnsclient.go.html#3212817">Weight</a></span><span class="op" id="6641031">)</span>&nbsp;<span class="op" id="6641033">/</span>&nbsp;<span class="builtintype" id="6641035">float64</span><span class="op" id="6641042">(</span><span class="ident" id="6641043"><a href="/gostd/net/dnsclient_test.go.html#6640653">sum</a></span><span class="op" id="6641046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6641049">diff</span>&nbsp;<span class="op" id="6641054">:=</span>&nbsp;<span class="builtintype" id="6641057">float64</span><span class="op" id="6641064">(</span><span class="ident" id="6641065"><a href="/gostd/net/dnsclient_test.go.html#6640945">actual</a></span><span class="op" id="6641071">)</span>&nbsp;<span class="op" id="6641073">-</span>&nbsp;<span class="ident" id="6641075"><a href="/gostd/net/dnsclient_test.go.html#6640980">expected</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6641085"><a href="/gostd/net/dnsclient_test.go.html#6640607">t</a></span><span class="op" id="6641086">.</span><span class="ident" id="6641087"><a href="/gostd/testing/testing.go.html#5479816">Logf</a></span><span class="op" id="6641091">(</span><span class="string" id="6641092">&#34;actual:&nbsp;%v&nbsp;diff:&nbsp;%v&nbsp;e:&nbsp;%v&nbsp;m:&nbsp;%v&#34;</span><span class="op" id="6641125">,</span>&nbsp;<span class="ident" id="6641127"><a href="/gostd/net/dnsclient_test.go.html#6640945">actual</a></span><span class="op" id="6641133">,</span>&nbsp;<span class="ident" id="6641135"><a href="/gostd/net/dnsclient_test.go.html#6641049">diff</a></span><span class="op" id="6641139">,</span>&nbsp;<span class="ident" id="6641141"><a href="/gostd/net/dnsclient_test.go.html#6640980">expected</a></span><span class="op" id="6641149">,</span>&nbsp;<span class="ident" id="6641151"><a href="/gostd/net/dnsclient_test.go.html#6640634">margin</a></span><span class="op" id="6641157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6641160">if</span>&nbsp;<span class="ident" id="6641163"><a href="/gostd/net/dnsclient_test.go.html#6641049">diff</a></span>&nbsp;<span class="op" id="6641168">&lt;</span>&nbsp;<span class="num" id="6641170">0</span>&nbsp;<span class="op" id="6641172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6641176"><a href="/gostd/net/dnsclient_test.go.html#6641049">diff</a></span>&nbsp;<span class="op" id="6641181">=</span>&nbsp;<span class="op" id="6641183">-</span><span class="ident" id="6641184"><a href="/gostd/net/dnsclient_test.go.html#6641049">diff</a></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6641190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6641193">if</span>&nbsp;<span class="ident" id="6641196"><a href="/gostd/net/dnsclient_test.go.html#6641049">diff</a></span>&nbsp;<span class="op" id="6641201">&gt;</span>&nbsp;<span class="op" id="6641203">(</span><span class="ident" id="6641204"><a href="/gostd/net/dnsclient_test.go.html#6640980">expected</a></span>&nbsp;<span class="op" id="6641213">*</span>&nbsp;<span class="ident" id="6641215"><a href="/gostd/net/dnsclient_test.go.html#6640634">margin</a></span><span class="op" id="6641221">)</span>&nbsp;<span class="op" id="6641223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6641227"><a href="/gostd/net/dnsclient_test.go.html#6640607">t</a></span><span class="op" id="6641228">.</span><span class="ident" id="6641229"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6641235">(</span><span class="string" id="6641236">&#34;missed&nbsp;target&nbsp;weight:&nbsp;expected&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="6641275">,</span>&nbsp;<span class="ident" id="6641277"><a href="/gostd/net/dnsclient_test.go.html#6640980">expected</a></span><span class="op" id="6641285">,</span>&nbsp;<span class="ident" id="6641287"><a href="/gostd/net/dnsclient_test.go.html#6640945">actual</a></span><span class="op" id="6641293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6641296">}</span><br>
<span class="lineno"></span><span class="op" id="6641298">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="6641301">func</span>&nbsp;<span class="ident" id="6641306">testUniformity</span><span class="op" id="6641320">(</span><span class="ident" id="6641321">t</span>&nbsp;<span class="op" id="6641323">*</span><span class="ident" id="6641324"><a href="/gostd/net/dnsclient_test.go.html#6640571">testing</a></span><span class="op" id="6641331">.</span><span class="ident" id="6641332"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6641333">,</span>&nbsp;<span class="ident" id="6641335">size</span>&nbsp;<span class="builtintype" id="6641340">int</span><span class="op" id="6641343">,</span>&nbsp;<span class="ident" id="6641345">margin</span>&nbsp;<span class="builtintype" id="6641352">float64</span><span class="op" id="6641359">)</span>&nbsp;<span class="op" id="6641361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6641364"><a href="/gostd/net/dnsclient_test.go.html#6640558">rand</a></span><span class="op" id="6641368">.</span><span class="ident" id="6641369"><a href="/gostd/math/rand/rand.go.html#2926135">Seed</a></span><span class="op" id="6641373">(</span><span class="num" id="6641374">1</span><span class="op" id="6641375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6641378">data</span>&nbsp;<span class="op" id="6641383">:=</span>&nbsp;<span class="builtinfunc" id="6641386">make</span><span class="op" id="6641390">(</span><span class="op" id="6641391">[</span><span class="op" id="6641392">]</span><span class="op" id="6641393">*</span><span class="ident" id="6641394"><a href="/gostd/net/dnsclient.go.html#3212752">SRV</a></span><span class="op" id="6641397">,</span>&nbsp;<span class="ident" id="6641399"><a href="/gostd/net/dnsclient_test.go.html#6641335">size</a></span><span class="op" id="6641403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6641406">for</span>&nbsp;<span class="ident" id="6641410">i</span>&nbsp;<span class="op" id="6641412">:=</span>&nbsp;<span class="num" id="6641415">0</span><span class="op" id="6641416">;</span>&nbsp;<span class="ident" id="6641418"><a href="/gostd/net/dnsclient_test.go.html#6641410">i</a></span>&nbsp;<span class="op" id="6641420">&lt;</span>&nbsp;<span class="ident" id="6641422"><a href="/gostd/net/dnsclient_test.go.html#6641335">size</a></span><span class="op" id="6641426">;</span>&nbsp;<span class="ident" id="6641428"><a href="/gostd/net/dnsclient_test.go.html#6641410">i</a></span><span class="op" id="6641429">++</span>&nbsp;<span class="op" id="6641432">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6641436"><a href="/gostd/net/dnsclient_test.go.html#6641378">data</a></span><span class="op" id="6641440">[</span><span class="ident" id="6641441"><a href="/gostd/net/dnsclient_test.go.html#6641410">i</a></span><span class="op" id="6641442">]</span>&nbsp;<span class="op" id="6641444">=</span>&nbsp;<span class="op" id="6641446">&amp;</span><span class="ident" id="6641447"><a href="/gostd/net/dnsclient.go.html#3212752">SRV</a></span><span class="op" id="6641450">{</span><span class="ident" id="6641451"><a href="/gostd/net/dnsclient.go.html#3212766">Target</a></span><span class="op" id="6641457">:</span>&nbsp;<span class="builtintype" id="6641459">string</span><span class="op" id="6641465">(</span><span class="string" id="6641466">&#39;a&#39;</span>&nbsp;<span class="op" id="6641470">+</span>&nbsp;<span class="ident" id="6641472"><a href="/gostd/net/dnsclient_test.go.html#6641410">i</a></span><span class="op" id="6641473">)</span><span class="op" id="6641474">,</span>&nbsp;<span class="ident" id="6641476"><a href="/gostd/net/dnsclient.go.html#3212817">Weight</a></span><span class="op" id="6641482">:</span>&nbsp;<span class="num" id="6641484">1</span><span class="op" id="6641485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6641488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6641491"><a href="/gostd/net/dnsclient_test.go.html#6640589">checkDistribution</a></span><span class="op" id="6641508">(</span><span class="ident" id="6641509"><a href="/gostd/net/dnsclient_test.go.html#6641321">t</a></span><span class="op" id="6641510">,</span>&nbsp;<span class="ident" id="6641512"><a href="/gostd/net/dnsclient_test.go.html#6641378">data</a></span><span class="op" id="6641516">,</span>&nbsp;<span class="ident" id="6641518"><a href="/gostd/net/dnsclient_test.go.html#6641345">margin</a></span><span class="op" id="6641524">)</span><br>
<span class="lineno"></span><span class="op" id="6641526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="6641529">func</span>&nbsp;<span class="ident" id="6641534">TestUniformity</span><span class="op" id="6641548">(</span><span class="ident" id="6641549">t</span>&nbsp;<span class="op" id="6641551">*</span><span class="ident" id="6641552"><a href="/gostd/net/dnsclient_test.go.html#6640571">testing</a></span><span class="op" id="6641559">.</span><span class="ident" id="6641560"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6641561">)</span>&nbsp;<span class="op" id="6641563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6641566"><a href="/gostd/net/dnsclient_test.go.html#6641306">testUniformity</a></span><span class="op" id="6641580">(</span><span class="ident" id="6641581"><a href="/gostd/net/dnsclient_test.go.html#6641549">t</a></span><span class="op" id="6641582">,</span>&nbsp;<span class="num" id="6641584">2</span><span class="op" id="6641585">,</span>&nbsp;<span class="num" id="6641587">0.05</span><span class="op" id="6641591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6641594"><a href="/gostd/net/dnsclient_test.go.html#6641306">testUniformity</a></span><span class="op" id="6641608">(</span><span class="ident" id="6641609"><a href="/gostd/net/dnsclient_test.go.html#6641549">t</a></span><span class="op" id="6641610">,</span>&nbsp;<span class="num" id="6641612">3</span><span class="op" id="6641613">,</span>&nbsp;<span class="num" id="6641615">0.10</span><span class="op" id="6641619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6641622"><a href="/gostd/net/dnsclient_test.go.html#6641306">testUniformity</a></span><span class="op" id="6641636">(</span><span class="ident" id="6641637"><a href="/gostd/net/dnsclient_test.go.html#6641549">t</a></span><span class="op" id="6641638">,</span>&nbsp;<span class="num" id="6641640">10</span><span class="op" id="6641642">,</span>&nbsp;<span class="num" id="6641644">0.20</span><span class="op" id="6641648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6641651"><a href="/gostd/net/dnsclient_test.go.html#6641682">testWeighting</a></span><span class="op" id="6641664">(</span><span class="ident" id="6641665"><a href="/gostd/net/dnsclient_test.go.html#6641549">t</a></span><span class="op" id="6641666">,</span>&nbsp;<span class="num" id="6641668">0.05</span><span class="op" id="6641672">)</span><br>
<span class="lineno">55</span><span class="op" id="6641674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6641677">func</span>&nbsp;<span class="ident" id="6641682">testWeighting</span><span class="op" id="6641695">(</span><span class="ident" id="6641696">t</span>&nbsp;<span class="op" id="6641698">*</span><span class="ident" id="6641699"><a href="/gostd/net/dnsclient_test.go.html#6640571">testing</a></span><span class="op" id="6641706">.</span><span class="ident" id="6641707"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6641708">,</span>&nbsp;<span class="ident" id="6641710">margin</span>&nbsp;<span class="builtintype" id="6641717">float64</span><span class="op" id="6641724">)</span>&nbsp;<span class="op" id="6641726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6641729"><a href="/gostd/net/dnsclient_test.go.html#6640558">rand</a></span><span class="op" id="6641733">.</span><span class="ident" id="6641734"><a href="/gostd/math/rand/rand.go.html#2926135">Seed</a></span><span class="op" id="6641738">(</span><span class="num" id="6641739">1</span><span class="op" id="6641740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6641743">data</span>&nbsp;<span class="op" id="6641748">:=</span>&nbsp;<span class="op" id="6641751">[</span><span class="op" id="6641752">]</span><span class="op" id="6641753">*</span><span class="ident" id="6641754"><a href="/gostd/net/dnsclient.go.html#3212752">SRV</a></span><span class="op" id="6641757">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6641761">{</span><span class="ident" id="6641762"><a href="/gostd/net/dnsclient.go.html#3212766">Target</a></span><span class="op" id="6641768">:</span>&nbsp;<span class="string" id="6641770">&#34;a&#34;</span><span class="op" id="6641773">,</span>&nbsp;<span class="ident" id="6641775"><a href="/gostd/net/dnsclient.go.html#3212817">Weight</a></span><span class="op" id="6641781">:</span>&nbsp;<span class="num" id="6641783">60</span><span class="op" id="6641785">}</span><span class="op" id="6641786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6641790">{</span><span class="ident" id="6641791"><a href="/gostd/net/dnsclient.go.html#3212766">Target</a></span><span class="op" id="6641797">:</span>&nbsp;<span class="string" id="6641799">&#34;b&#34;</span><span class="op" id="6641802">,</span>&nbsp;<span class="ident" id="6641804"><a href="/gostd/net/dnsclient.go.html#3212817">Weight</a></span><span class="op" id="6641810">:</span>&nbsp;<span class="num" id="6641812">30</span><span class="op" id="6641814">}</span><span class="op" id="6641815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6641819">{</span><span class="ident" id="6641820"><a href="/gostd/net/dnsclient.go.html#3212766">Target</a></span><span class="op" id="6641826">:</span>&nbsp;<span class="string" id="6641828">&#34;c&#34;</span><span class="op" id="6641831">,</span>&nbsp;<span class="ident" id="6641833"><a href="/gostd/net/dnsclient.go.html#3212817">Weight</a></span><span class="op" id="6641839">:</span>&nbsp;<span class="num" id="6641841">10</span><span class="op" id="6641843">}</span><span class="op" id="6641844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6641847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6641850"><a href="/gostd/net/dnsclient_test.go.html#6640589">checkDistribution</a></span><span class="op" id="6641867">(</span><span class="ident" id="6641868"><a href="/gostd/net/dnsclient_test.go.html#6641696">t</a></span><span class="op" id="6641869">,</span>&nbsp;<span class="ident" id="6641871"><a href="/gostd/net/dnsclient_test.go.html#6641743">data</a></span><span class="op" id="6641875">,</span>&nbsp;<span class="ident" id="6641877"><a href="/gostd/net/dnsclient_test.go.html#6641710">margin</a></span><span class="op" id="6641883">)</span><br>
<span class="lineno">65</span><span class="op" id="6641885">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6641888">func</span>&nbsp;<span class="ident" id="6641893">TestWeighting</span><span class="op" id="6641906">(</span><span class="ident" id="6641907">t</span>&nbsp;<span class="op" id="6641909">*</span><span class="ident" id="6641910"><a href="/gostd/net/dnsclient_test.go.html#6640571">testing</a></span><span class="op" id="6641917">.</span><span class="ident" id="6641918"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6641919">)</span>&nbsp;<span class="op" id="6641921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6641924"><a href="/gostd/net/dnsclient_test.go.html#6641682">testWeighting</a></span><span class="op" id="6641937">(</span><span class="ident" id="6641938"><a href="/gostd/net/dnsclient_test.go.html#6641907">t</a></span><span class="op" id="6641939">,</span>&nbsp;<span class="num" id="6641941">0.05</span><span class="op" id="6641945">)</span><br>
<span class="lineno"></span><span class="op" id="6641947">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
