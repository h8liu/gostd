<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7380253">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7380308">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7380362">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7380413">package</span>&nbsp;<span class="ident" id="7380421">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7380426">import</span>&nbsp;<span class="op" id="7380433">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7380436">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7380445">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7380456">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7380466">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7380469">type</span>&nbsp;<span class="ident" id="7380474">typeT</span>&nbsp;<span class="keyword" id="7380480">struct</span>&nbsp;<span class="op" id="7380487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380490">id</span>&nbsp;&nbsp;<span class="ident" id="7380494">typeId</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380502">str</span>&nbsp;<span class="builtintype" id="7380506">string</span><br>
<span class="lineno"></span><span class="op" id="7380513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7380516">var</span>&nbsp;<span class="ident" id="7380520">basicTypes</span>&nbsp;<span class="op" id="7380531">=</span>&nbsp;<span class="op" id="7380533">[</span><span class="op" id="7380534">]</span><span class="ident" id="7380535">typeT</span><span class="op" id="7380540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380543">{</span><span class="ident" id="7380544">tBool</span><span class="op" id="7380549">,</span>&nbsp;<span class="string" id="7380551">&#34;bool&#34;</span><span class="op" id="7380557">}</span><span class="op" id="7380558">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380561">{</span><span class="ident" id="7380562">tInt</span><span class="op" id="7380566">,</span>&nbsp;<span class="string" id="7380568">&#34;int&#34;</span><span class="op" id="7380573">}</span><span class="op" id="7380574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380577">{</span><span class="ident" id="7380578">tUint</span><span class="op" id="7380583">,</span>&nbsp;<span class="string" id="7380585">&#34;uint&#34;</span><span class="op" id="7380591">}</span><span class="op" id="7380592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380595">{</span><span class="ident" id="7380596">tFloat</span><span class="op" id="7380602">,</span>&nbsp;<span class="string" id="7380604">&#34;float&#34;</span><span class="op" id="7380611">}</span><span class="op" id="7380612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380615">{</span><span class="ident" id="7380616">tBytes</span><span class="op" id="7380622">,</span>&nbsp;<span class="string" id="7380624">&#34;bytes&#34;</span><span class="op" id="7380631">}</span><span class="op" id="7380632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380635">{</span><span class="ident" id="7380636">tString</span><span class="op" id="7380643">,</span>&nbsp;<span class="string" id="7380645">&#34;string&#34;</span><span class="op" id="7380653">}</span><span class="op" id="7380654">,</span><br>
<span class="lineno">25</span><span class="op" id="7380656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7380659">func</span>&nbsp;<span class="ident" id="7380664">getTypeUnlocked</span><span class="op" id="7380679">(</span><span class="ident" id="7380680">name</span>&nbsp;<span class="builtintype" id="7380685">string</span><span class="op" id="7380691">,</span>&nbsp;<span class="ident" id="7380693">rt</span>&nbsp;<span class="ident" id="7380696">reflect</span><span class="op" id="7380703">.</span><span class="ident" id="7380704">Type</span><span class="op" id="7380708">)</span>&nbsp;<span class="ident" id="7380710">gobType</span>&nbsp;<span class="op" id="7380718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380721">typeLock</span><span class="op" id="7380729">.</span><span class="ident" id="7380730">Lock</span><span class="op" id="7380734">(</span><span class="op" id="7380735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380738">defer</span>&nbsp;<span class="ident" id="7380744">typeLock</span><span class="op" id="7380752">.</span><span class="ident" id="7380753">Unlock</span><span class="op" id="7380759">(</span><span class="op" id="7380760">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380763">t</span><span class="op" id="7380764">,</span>&nbsp;<span class="ident" id="7380766">err</span>&nbsp;<span class="op" id="7380770">:=</span>&nbsp;<span class="ident" id="7380773">getBaseType</span><span class="op" id="7380784">(</span><span class="ident" id="7380785">name</span><span class="op" id="7380789">,</span>&nbsp;<span class="ident" id="7380791">rt</span><span class="op" id="7380793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380796">if</span>&nbsp;<span class="ident" id="7380799">err</span>&nbsp;<span class="op" id="7380803">!=</span>&nbsp;<span class="ident" id="7380806">nil</span>&nbsp;<span class="op" id="7380810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7380814">panic</span><span class="op" id="7380819">(</span><span class="string" id="7380820">&#34;getTypeUnlocked:&nbsp;&#34;</span>&nbsp;<span class="op" id="7380840">+</span>&nbsp;<span class="ident" id="7380842">err</span><span class="op" id="7380845">.</span><span class="ident" id="7380846">Error</span><span class="op" id="7380851">(</span><span class="op" id="7380852">)</span><span class="op" id="7380853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380859">return</span>&nbsp;<span class="ident" id="7380866">t</span><br>
<span class="lineno">35</span><span class="op" id="7380868">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7380871">//&nbsp;Sanity&nbsp;checks</span><br>
<span class="lineno"></span><span class="keyword" id="7380888">func</span>&nbsp;<span class="ident" id="7380893">TestBasic</span><span class="op" id="7380902">(</span><span class="ident" id="7380903">t</span>&nbsp;<span class="op" id="7380905">*</span><span class="ident" id="7380906">testing</span><span class="op" id="7380913">.</span><span class="ident" id="7380914">T</span><span class="op" id="7380915">)</span>&nbsp;<span class="op" id="7380917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380920">for</span>&nbsp;<span class="ident" id="7380924">_</span><span class="op" id="7380925">,</span>&nbsp;<span class="ident" id="7380927">tt</span>&nbsp;<span class="op" id="7380930">:=</span>&nbsp;<span class="keyword" id="7380933">range</span>&nbsp;<span class="ident" id="7380939">basicTypes</span>&nbsp;<span class="op" id="7380950">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380954">if</span>&nbsp;<span class="ident" id="7380957">tt</span><span class="op" id="7380959">.</span><span class="ident" id="7380960">id</span><span class="op" id="7380962">.</span><span class="builtintype" id="7380963">string</span><span class="op" id="7380969">(</span><span class="op" id="7380970">)</span>&nbsp;<span class="op" id="7380972">!=</span>&nbsp;<span class="ident" id="7380975">tt</span><span class="op" id="7380977">.</span><span class="ident" id="7380978">str</span>&nbsp;<span class="op" id="7380982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380987">t</span><span class="op" id="7380988">.</span><span class="ident" id="7380989">Errorf</span><span class="op" id="7380995">(</span><span class="string" id="7380996">&#34;checkType:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7381027">,</span>&nbsp;<span class="ident" id="7381029">tt</span><span class="op" id="7381031">.</span><span class="ident" id="7381032">str</span><span class="op" id="7381035">,</span>&nbsp;<span class="ident" id="7381037">tt</span><span class="op" id="7381039">.</span><span class="ident" id="7381040">id</span><span class="op" id="7381042">.</span><span class="builtintype" id="7381043">string</span><span class="op" id="7381049">(</span><span class="op" id="7381050">)</span><span class="op" id="7381051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7381059">if</span>&nbsp;<span class="ident" id="7381062">tt</span><span class="op" id="7381064">.</span><span class="ident" id="7381065">id</span>&nbsp;<span class="op" id="7381068">==</span>&nbsp;<span class="num" id="7381071">0</span>&nbsp;<span class="op" id="7381073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381078">t</span><span class="op" id="7381079">.</span><span class="ident" id="7381080">Errorf</span><span class="op" id="7381086">(</span><span class="string" id="7381087">&#34;id&nbsp;for&nbsp;%q&nbsp;is&nbsp;zero&#34;</span><span class="op" id="7381106">,</span>&nbsp;<span class="ident" id="7381108">tt</span><span class="op" id="7381110">.</span><span class="ident" id="7381111">str</span><span class="op" id="7381114">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381121">}</span><br>
<span class="lineno"></span><span class="op" id="7381123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7381126">//&nbsp;Reregister&nbsp;some&nbsp;basic&nbsp;types&nbsp;to&nbsp;check&nbsp;registration&nbsp;is&nbsp;idempotent.</span><br>
<span class="lineno">50</span><span class="keyword" id="7381194">func</span>&nbsp;<span class="ident" id="7381199">TestReregistration</span><span class="op" id="7381217">(</span><span class="ident" id="7381218">t</span>&nbsp;<span class="op" id="7381220">*</span><span class="ident" id="7381221">testing</span><span class="op" id="7381228">.</span><span class="ident" id="7381229">T</span><span class="op" id="7381230">)</span>&nbsp;<span class="op" id="7381232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381235">newtyp</span>&nbsp;<span class="op" id="7381242">:=</span>&nbsp;<span class="ident" id="7381245">getTypeUnlocked</span><span class="op" id="7381260">(</span><span class="string" id="7381261">&#34;int&#34;</span><span class="op" id="7381266">,</span>&nbsp;<span class="ident" id="7381268">reflect</span><span class="op" id="7381275">.</span><span class="ident" id="7381276">TypeOf</span><span class="op" id="7381282">(</span><span class="builtintype" id="7381283">int</span><span class="op" id="7381286">(</span><span class="num" id="7381287">0</span><span class="op" id="7381288">)</span><span class="op" id="7381289">)</span><span class="op" id="7381290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7381293">if</span>&nbsp;<span class="ident" id="7381296">newtyp</span>&nbsp;<span class="op" id="7381303">!=</span>&nbsp;<span class="ident" id="7381306">tInt</span><span class="op" id="7381310">.</span><span class="ident" id="7381311">gobType</span><span class="op" id="7381318">(</span><span class="op" id="7381319">)</span>&nbsp;<span class="op" id="7381321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381325">t</span><span class="op" id="7381326">.</span><span class="ident" id="7381327">Errorf</span><span class="op" id="7381333">(</span><span class="string" id="7381334">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="7381369">,</span>&nbsp;<span class="ident" id="7381371">newtyp</span><span class="op" id="7381377">.</span><span class="builtintype" id="7381378">string</span><span class="op" id="7381384">(</span><span class="op" id="7381385">)</span><span class="op" id="7381386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381389">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381392">newtyp</span>&nbsp;<span class="op" id="7381399">=</span>&nbsp;<span class="ident" id="7381401">getTypeUnlocked</span><span class="op" id="7381416">(</span><span class="string" id="7381417">&#34;uint&#34;</span><span class="op" id="7381423">,</span>&nbsp;<span class="ident" id="7381425">reflect</span><span class="op" id="7381432">.</span><span class="ident" id="7381433">TypeOf</span><span class="op" id="7381439">(</span><span class="builtintype" id="7381440">uint</span><span class="op" id="7381444">(</span><span class="num" id="7381445">0</span><span class="op" id="7381446">)</span><span class="op" id="7381447">)</span><span class="op" id="7381448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7381451">if</span>&nbsp;<span class="ident" id="7381454">newtyp</span>&nbsp;<span class="op" id="7381461">!=</span>&nbsp;<span class="ident" id="7381464">tUint</span><span class="op" id="7381469">.</span><span class="ident" id="7381470">gobType</span><span class="op" id="7381477">(</span><span class="op" id="7381478">)</span>&nbsp;<span class="op" id="7381480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381484">t</span><span class="op" id="7381485">.</span><span class="ident" id="7381486">Errorf</span><span class="op" id="7381492">(</span><span class="string" id="7381493">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="7381528">,</span>&nbsp;<span class="ident" id="7381530">newtyp</span><span class="op" id="7381536">.</span><span class="builtintype" id="7381537">string</span><span class="op" id="7381543">(</span><span class="op" id="7381544">)</span><span class="op" id="7381545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381551">newtyp</span>&nbsp;<span class="op" id="7381558">=</span>&nbsp;<span class="ident" id="7381560">getTypeUnlocked</span><span class="op" id="7381575">(</span><span class="string" id="7381576">&#34;string&#34;</span><span class="op" id="7381584">,</span>&nbsp;<span class="ident" id="7381586">reflect</span><span class="op" id="7381593">.</span><span class="ident" id="7381594">TypeOf</span><span class="op" id="7381600">(</span><span class="string" id="7381601">&#34;hello&#34;</span><span class="op" id="7381608">)</span><span class="op" id="7381609">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7381612">if</span>&nbsp;<span class="ident" id="7381615">newtyp</span>&nbsp;<span class="op" id="7381622">!=</span>&nbsp;<span class="ident" id="7381625">tString</span><span class="op" id="7381632">.</span><span class="ident" id="7381633">gobType</span><span class="op" id="7381640">(</span><span class="op" id="7381641">)</span>&nbsp;<span class="op" id="7381643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381647">t</span><span class="op" id="7381648">.</span><span class="ident" id="7381649">Errorf</span><span class="op" id="7381655">(</span><span class="string" id="7381656">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="7381691">,</span>&nbsp;<span class="ident" id="7381693">newtyp</span><span class="op" id="7381699">.</span><span class="builtintype" id="7381700">string</span><span class="op" id="7381706">(</span><span class="op" id="7381707">)</span><span class="op" id="7381708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381711">}</span><br>
<span class="lineno"></span><span class="op" id="7381713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="7381716">func</span>&nbsp;<span class="ident" id="7381721">TestArrayType</span><span class="op" id="7381734">(</span><span class="ident" id="7381735">t</span>&nbsp;<span class="op" id="7381737">*</span><span class="ident" id="7381738">testing</span><span class="op" id="7381745">.</span><span class="ident" id="7381746">T</span><span class="op" id="7381747">)</span>&nbsp;<span class="op" id="7381749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7381752">var</span>&nbsp;<span class="ident" id="7381756">a3</span>&nbsp;<span class="op" id="7381759">[</span><span class="num" id="7381760">3</span><span class="op" id="7381761">]</span><span class="builtintype" id="7381762">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381767">a3int</span>&nbsp;<span class="op" id="7381773">:=</span>&nbsp;<span class="ident" id="7381776">getTypeUnlocked</span><span class="op" id="7381791">(</span><span class="string" id="7381792">&#34;foo&#34;</span><span class="op" id="7381797">,</span>&nbsp;<span class="ident" id="7381799">reflect</span><span class="op" id="7381806">.</span><span class="ident" id="7381807">TypeOf</span><span class="op" id="7381813">(</span><span class="ident" id="7381814">a3</span><span class="op" id="7381816">)</span><span class="op" id="7381817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381820">newa3int</span>&nbsp;<span class="op" id="7381829">:=</span>&nbsp;<span class="ident" id="7381832">getTypeUnlocked</span><span class="op" id="7381847">(</span><span class="string" id="7381848">&#34;bar&#34;</span><span class="op" id="7381853">,</span>&nbsp;<span class="ident" id="7381855">reflect</span><span class="op" id="7381862">.</span><span class="ident" id="7381863">TypeOf</span><span class="op" id="7381869">(</span><span class="ident" id="7381870">a3</span><span class="op" id="7381872">)</span><span class="op" id="7381873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7381876">if</span>&nbsp;<span class="ident" id="7381879">a3int</span>&nbsp;<span class="op" id="7381885">!=</span>&nbsp;<span class="ident" id="7381888">newa3int</span>&nbsp;<span class="op" id="7381897">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381901">t</span><span class="op" id="7381902">.</span><span class="ident" id="7381903">Errorf</span><span class="op" id="7381909">(</span><span class="string" id="7381910">&#34;second&nbsp;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="7381958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7381964">var</span>&nbsp;<span class="ident" id="7381968">a4</span>&nbsp;<span class="op" id="7381971">[</span><span class="num" id="7381972">4</span><span class="op" id="7381973">]</span><span class="builtintype" id="7381974">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381979">a4int</span>&nbsp;<span class="op" id="7381985">:=</span>&nbsp;<span class="ident" id="7381988">getTypeUnlocked</span><span class="op" id="7382003">(</span><span class="string" id="7382004">&#34;goo&#34;</span><span class="op" id="7382009">,</span>&nbsp;<span class="ident" id="7382011">reflect</span><span class="op" id="7382018">.</span><span class="ident" id="7382019">TypeOf</span><span class="op" id="7382025">(</span><span class="ident" id="7382026">a4</span><span class="op" id="7382028">)</span><span class="op" id="7382029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7382032">if</span>&nbsp;<span class="ident" id="7382035">a3int</span>&nbsp;<span class="op" id="7382041">==</span>&nbsp;<span class="ident" id="7382044">a4int</span>&nbsp;<span class="op" id="7382050">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382054">t</span><span class="op" id="7382055">.</span><span class="ident" id="7382056">Errorf</span><span class="op" id="7382062">(</span><span class="string" id="7382063">&#34;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[4]int&#34;</span><span class="op" id="7382115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7382118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7382121">var</span>&nbsp;<span class="ident" id="7382125">b3</span>&nbsp;<span class="op" id="7382128">[</span><span class="num" id="7382129">3</span><span class="op" id="7382130">]</span><span class="builtintype" id="7382131">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382137">a3bool</span>&nbsp;<span class="op" id="7382144">:=</span>&nbsp;<span class="ident" id="7382147">getTypeUnlocked</span><span class="op" id="7382162">(</span><span class="string" id="7382163">&#34;&#34;</span><span class="op" id="7382165">,</span>&nbsp;<span class="ident" id="7382167">reflect</span><span class="op" id="7382174">.</span><span class="ident" id="7382175">TypeOf</span><span class="op" id="7382181">(</span><span class="ident" id="7382182">b3</span><span class="op" id="7382184">)</span><span class="op" id="7382185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7382188">if</span>&nbsp;<span class="ident" id="7382191">a3int</span>&nbsp;<span class="op" id="7382197">==</span>&nbsp;<span class="ident" id="7382200">a3bool</span>&nbsp;<span class="op" id="7382207">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382211">t</span><span class="op" id="7382212">.</span><span class="ident" id="7382213">Errorf</span><span class="op" id="7382219">(</span><span class="string" id="7382220">&#34;registration&nbsp;of&nbsp;[3]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[3]int&#34;</span><span class="op" id="7382273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7382276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382279">str</span>&nbsp;<span class="op" id="7382283">:=</span>&nbsp;<span class="ident" id="7382286">a3bool</span><span class="op" id="7382292">.</span><span class="builtintype" id="7382293">string</span><span class="op" id="7382299">(</span><span class="op" id="7382300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382303">expected</span>&nbsp;<span class="op" id="7382312">:=</span>&nbsp;<span class="string" id="7382315">&#34;[3]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7382326">if</span>&nbsp;<span class="ident" id="7382329">str</span>&nbsp;<span class="op" id="7382333">!=</span>&nbsp;<span class="ident" id="7382336">expected</span>&nbsp;<span class="op" id="7382345">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382349">t</span><span class="op" id="7382350">.</span><span class="ident" id="7382351">Errorf</span><span class="op" id="7382357">(</span><span class="string" id="7382358">&#34;array&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7382392">,</span>&nbsp;<span class="ident" id="7382394">str</span><span class="op" id="7382397">,</span>&nbsp;<span class="ident" id="7382399">expected</span><span class="op" id="7382407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7382410">}</span><br>
<span class="lineno"></span><span class="op" id="7382412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7382415">func</span>&nbsp;<span class="ident" id="7382420">TestSliceType</span><span class="op" id="7382433">(</span><span class="ident" id="7382434">t</span>&nbsp;<span class="op" id="7382436">*</span><span class="ident" id="7382437">testing</span><span class="op" id="7382444">.</span><span class="ident" id="7382445">T</span><span class="op" id="7382446">)</span>&nbsp;<span class="op" id="7382448">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7382451">var</span>&nbsp;<span class="ident" id="7382455">s</span>&nbsp;<span class="op" id="7382457">[</span><span class="op" id="7382458">]</span><span class="builtintype" id="7382459">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382464">sint</span>&nbsp;<span class="op" id="7382469">:=</span>&nbsp;<span class="ident" id="7382472">getTypeUnlocked</span><span class="op" id="7382487">(</span><span class="string" id="7382488">&#34;slice&#34;</span><span class="op" id="7382495">,</span>&nbsp;<span class="ident" id="7382497">reflect</span><span class="op" id="7382504">.</span><span class="ident" id="7382505">TypeOf</span><span class="op" id="7382511">(</span><span class="ident" id="7382512">s</span><span class="op" id="7382513">)</span><span class="op" id="7382514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7382517">var</span>&nbsp;<span class="ident" id="7382521">news</span>&nbsp;<span class="op" id="7382526">[</span><span class="op" id="7382527">]</span><span class="builtintype" id="7382528">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382533">newsint</span>&nbsp;<span class="op" id="7382541">:=</span>&nbsp;<span class="ident" id="7382544">getTypeUnlocked</span><span class="op" id="7382559">(</span><span class="string" id="7382560">&#34;slice1&#34;</span><span class="op" id="7382568">,</span>&nbsp;<span class="ident" id="7382570">reflect</span><span class="op" id="7382577">.</span><span class="ident" id="7382578">TypeOf</span><span class="op" id="7382584">(</span><span class="ident" id="7382585">news</span><span class="op" id="7382589">)</span><span class="op" id="7382590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7382593">if</span>&nbsp;<span class="ident" id="7382596">sint</span>&nbsp;<span class="op" id="7382601">!=</span>&nbsp;<span class="ident" id="7382604">newsint</span>&nbsp;<span class="op" id="7382612">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382616">t</span><span class="op" id="7382617">.</span><span class="ident" id="7382618">Errorf</span><span class="op" id="7382624">(</span><span class="string" id="7382625">&#34;second&nbsp;registration&nbsp;of&nbsp;[]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="7382672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7382675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7382678">var</span>&nbsp;<span class="ident" id="7382682">b</span>&nbsp;<span class="op" id="7382684">[</span><span class="op" id="7382685">]</span><span class="builtintype" id="7382686">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382692">sbool</span>&nbsp;<span class="op" id="7382698">:=</span>&nbsp;<span class="ident" id="7382701">getTypeUnlocked</span><span class="op" id="7382716">(</span><span class="string" id="7382717">&#34;&#34;</span><span class="op" id="7382719">,</span>&nbsp;<span class="ident" id="7382721">reflect</span><span class="op" id="7382728">.</span><span class="ident" id="7382729">TypeOf</span><span class="op" id="7382735">(</span><span class="ident" id="7382736">b</span><span class="op" id="7382737">)</span><span class="op" id="7382738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7382741">if</span>&nbsp;<span class="ident" id="7382744">sbool</span>&nbsp;<span class="op" id="7382750">==</span>&nbsp;<span class="ident" id="7382753">sint</span>&nbsp;<span class="op" id="7382758">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382762">t</span><span class="op" id="7382763">.</span><span class="ident" id="7382764">Errorf</span><span class="op" id="7382770">(</span><span class="string" id="7382771">&#34;registration&nbsp;of&nbsp;[]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[]int&#34;</span><span class="op" id="7382822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7382825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382828">str</span>&nbsp;<span class="op" id="7382832">:=</span>&nbsp;<span class="ident" id="7382835">sbool</span><span class="op" id="7382840">.</span><span class="builtintype" id="7382841">string</span><span class="op" id="7382847">(</span><span class="op" id="7382848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382851">expected</span>&nbsp;<span class="op" id="7382860">:=</span>&nbsp;<span class="string" id="7382863">&#34;[]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7382873">if</span>&nbsp;<span class="ident" id="7382876">str</span>&nbsp;<span class="op" id="7382880">!=</span>&nbsp;<span class="ident" id="7382883">expected</span>&nbsp;<span class="op" id="7382892">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382896">t</span><span class="op" id="7382897">.</span><span class="ident" id="7382898">Errorf</span><span class="op" id="7382904">(</span><span class="string" id="7382905">&#34;slice&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7382939">,</span>&nbsp;<span class="ident" id="7382941">str</span><span class="op" id="7382944">,</span>&nbsp;<span class="ident" id="7382946">expected</span><span class="op" id="7382954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7382957">}</span><br>
<span class="lineno"></span><span class="op" id="7382959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7382962">func</span>&nbsp;<span class="ident" id="7382967">TestMapType</span><span class="op" id="7382978">(</span><span class="ident" id="7382979">t</span>&nbsp;<span class="op" id="7382981">*</span><span class="ident" id="7382982">testing</span><span class="op" id="7382989">.</span><span class="ident" id="7382990">T</span><span class="op" id="7382991">)</span>&nbsp;<span class="op" id="7382993">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7382996">var</span>&nbsp;<span class="ident" id="7383000">m</span>&nbsp;<span class="keyword" id="7383002">map</span><span class="op" id="7383005">[</span><span class="builtintype" id="7383006">string</span><span class="op" id="7383012">]</span><span class="builtintype" id="7383013">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383018">mapStringInt</span>&nbsp;<span class="op" id="7383031">:=</span>&nbsp;<span class="ident" id="7383034">getTypeUnlocked</span><span class="op" id="7383049">(</span><span class="string" id="7383050">&#34;map&#34;</span><span class="op" id="7383055">,</span>&nbsp;<span class="ident" id="7383057">reflect</span><span class="op" id="7383064">.</span><span class="ident" id="7383065">TypeOf</span><span class="op" id="7383071">(</span><span class="ident" id="7383072">m</span><span class="op" id="7383073">)</span><span class="op" id="7383074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7383077">var</span>&nbsp;<span class="ident" id="7383081">newm</span>&nbsp;<span class="keyword" id="7383086">map</span><span class="op" id="7383089">[</span><span class="builtintype" id="7383090">string</span><span class="op" id="7383096">]</span><span class="builtintype" id="7383097">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383102">newMapStringInt</span>&nbsp;<span class="op" id="7383118">:=</span>&nbsp;<span class="ident" id="7383121">getTypeUnlocked</span><span class="op" id="7383136">(</span><span class="string" id="7383137">&#34;map1&#34;</span><span class="op" id="7383143">,</span>&nbsp;<span class="ident" id="7383145">reflect</span><span class="op" id="7383152">.</span><span class="ident" id="7383153">TypeOf</span><span class="op" id="7383159">(</span><span class="ident" id="7383160">newm</span><span class="op" id="7383164">)</span><span class="op" id="7383165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7383168">if</span>&nbsp;<span class="ident" id="7383171">mapStringInt</span>&nbsp;<span class="op" id="7383184">!=</span>&nbsp;<span class="ident" id="7383187">newMapStringInt</span>&nbsp;<span class="op" id="7383203">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383207">t</span><span class="op" id="7383208">.</span><span class="ident" id="7383209">Errorf</span><span class="op" id="7383215">(</span><span class="string" id="7383216">&#34;second&nbsp;registration&nbsp;of&nbsp;map[string]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="7383272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7383275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7383278">var</span>&nbsp;<span class="ident" id="7383282">b</span>&nbsp;<span class="keyword" id="7383284">map</span><span class="op" id="7383287">[</span><span class="builtintype" id="7383288">string</span><span class="op" id="7383294">]</span><span class="builtintype" id="7383295">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383301">mapStringBool</span>&nbsp;<span class="op" id="7383315">:=</span>&nbsp;<span class="ident" id="7383318">getTypeUnlocked</span><span class="op" id="7383333">(</span><span class="string" id="7383334">&#34;&#34;</span><span class="op" id="7383336">,</span>&nbsp;<span class="ident" id="7383338">reflect</span><span class="op" id="7383345">.</span><span class="ident" id="7383346">TypeOf</span><span class="op" id="7383352">(</span><span class="ident" id="7383353">b</span><span class="op" id="7383354">)</span><span class="op" id="7383355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7383358">if</span>&nbsp;<span class="ident" id="7383361">mapStringBool</span>&nbsp;<span class="op" id="7383375">==</span>&nbsp;<span class="ident" id="7383378">mapStringInt</span>&nbsp;<span class="op" id="7383391">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383395">t</span><span class="op" id="7383396">.</span><span class="ident" id="7383397">Errorf</span><span class="op" id="7383403">(</span><span class="string" id="7383404">&#34;registration&nbsp;of&nbsp;map[string]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;map[string]int&#34;</span><span class="op" id="7383473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7383476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383479">str</span>&nbsp;<span class="op" id="7383483">:=</span>&nbsp;<span class="ident" id="7383486">mapStringBool</span><span class="op" id="7383499">.</span><span class="builtintype" id="7383500">string</span><span class="op" id="7383506">(</span><span class="op" id="7383507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383510">expected</span>&nbsp;<span class="op" id="7383519">:=</span>&nbsp;<span class="string" id="7383522">&#34;map[string]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7383541">if</span>&nbsp;<span class="ident" id="7383544">str</span>&nbsp;<span class="op" id="7383548">!=</span>&nbsp;<span class="ident" id="7383551">expected</span>&nbsp;<span class="op" id="7383560">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383564">t</span><span class="op" id="7383565">.</span><span class="ident" id="7383566">Errorf</span><span class="op" id="7383572">(</span><span class="string" id="7383573">&#34;map&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7383605">,</span>&nbsp;<span class="ident" id="7383607">str</span><span class="op" id="7383610">,</span>&nbsp;<span class="ident" id="7383612">expected</span><span class="op" id="7383620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7383623">}</span><br>
<span class="lineno"></span><span class="op" id="7383625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7383628">type</span>&nbsp;<span class="ident" id="7383633">Bar</span>&nbsp;<span class="keyword" id="7383637">struct</span>&nbsp;<span class="op" id="7383644">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383647">X</span>&nbsp;<span class="builtintype" id="7383649">string</span><br>
<span class="lineno"></span><span class="op" id="7383656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7383659">//&nbsp;This&nbsp;structure&nbsp;has&nbsp;pointers&nbsp;and&nbsp;refers&nbsp;to&nbsp;itself,&nbsp;making&nbsp;it&nbsp;a&nbsp;good&nbsp;test&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="7383740">type</span>&nbsp;<span class="ident" id="7383745">Foo</span>&nbsp;<span class="keyword" id="7383749">struct</span>&nbsp;<span class="op" id="7383756">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383759">A</span>&nbsp;<span class="builtintype" id="7383761">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383766">B</span>&nbsp;<span class="builtintype" id="7383768">int32</span>&nbsp;<span class="comment" id="7383774">//&nbsp;will&nbsp;become&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383794">C</span>&nbsp;<span class="builtintype" id="7383796">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383804">D</span>&nbsp;<span class="op" id="7383806">[</span><span class="op" id="7383807">]</span><span class="builtintype" id="7383808">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383814">E</span>&nbsp;<span class="op" id="7383816">*</span><span class="builtintype" id="7383817">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7383828">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383852">F</span>&nbsp;<span class="op" id="7383854">*</span><span class="op" id="7383855">*</span><span class="op" id="7383856">*</span><span class="op" id="7383857">*</span><span class="builtintype" id="7383858">float64</span>&nbsp;<span class="comment" id="7383866">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383890">G</span>&nbsp;<span class="op" id="7383892">*</span><span class="ident" id="7383893">Bar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383898">H</span>&nbsp;<span class="op" id="7383900">*</span><span class="ident" id="7383901">Bar</span>&nbsp;<span class="comment" id="7383905">//&nbsp;should&nbsp;not&nbsp;interpolate&nbsp;the&nbsp;definition&nbsp;of&nbsp;Bar&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383960">I</span>&nbsp;<span class="op" id="7383962">*</span><span class="ident" id="7383963">Foo</span>&nbsp;<span class="comment" id="7383967">//&nbsp;will&nbsp;not&nbsp;explode</span><br>
<span class="lineno"></span><span class="op" id="7383987">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="7383990">func</span>&nbsp;<span class="ident" id="7383995">TestStructType</span><span class="op" id="7384009">(</span><span class="ident" id="7384010">t</span>&nbsp;<span class="op" id="7384012">*</span><span class="ident" id="7384013">testing</span><span class="op" id="7384020">.</span><span class="ident" id="7384021">T</span><span class="op" id="7384022">)</span>&nbsp;<span class="op" id="7384024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384027">sstruct</span>&nbsp;<span class="op" id="7384035">:=</span>&nbsp;<span class="ident" id="7384038">getTypeUnlocked</span><span class="op" id="7384053">(</span><span class="string" id="7384054">&#34;Foo&#34;</span><span class="op" id="7384059">,</span>&nbsp;<span class="ident" id="7384061">reflect</span><span class="op" id="7384068">.</span><span class="ident" id="7384069">TypeOf</span><span class="op" id="7384075">(</span><span class="ident" id="7384076">Foo</span><span class="op" id="7384079">{</span><span class="op" id="7384080">}</span><span class="op" id="7384081">)</span><span class="op" id="7384082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384085">str</span>&nbsp;<span class="op" id="7384089">:=</span>&nbsp;<span class="ident" id="7384092">sstruct</span><span class="op" id="7384099">.</span><span class="builtintype" id="7384100">string</span><span class="op" id="7384106">(</span><span class="op" id="7384107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7384110">//&nbsp;If&nbsp;we&nbsp;can&nbsp;print&nbsp;it&nbsp;correctly,&nbsp;we&nbsp;built&nbsp;it&nbsp;correctly.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384167">expected</span>&nbsp;<span class="op" id="7384176">:=</span>&nbsp;<span class="string" id="7384179">&#34;Foo&nbsp;=&nbsp;struct&nbsp;{&nbsp;A&nbsp;int;&nbsp;B&nbsp;int;&nbsp;C&nbsp;string;&nbsp;D&nbsp;bytes;&nbsp;E&nbsp;float;&nbsp;F&nbsp;float;&nbsp;G&nbsp;Bar&nbsp;=&nbsp;struct&nbsp;{&nbsp;X&nbsp;string;&nbsp;};&nbsp;H&nbsp;Bar;&nbsp;I&nbsp;Foo;&nbsp;}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7384294">if</span>&nbsp;<span class="ident" id="7384297">str</span>&nbsp;<span class="op" id="7384301">!=</span>&nbsp;<span class="ident" id="7384304">expected</span>&nbsp;<span class="op" id="7384313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384317">t</span><span class="op" id="7384318">.</span><span class="ident" id="7384319">Errorf</span><span class="op" id="7384325">(</span><span class="string" id="7384326">&#34;struct&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7384361">,</span>&nbsp;<span class="ident" id="7384363">str</span><span class="op" id="7384366">,</span>&nbsp;<span class="ident" id="7384368">expected</span><span class="op" id="7384376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7384379">}</span><br>
<span class="lineno"></span><span class="op" id="7384381">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="7384384">//&nbsp;Should&nbsp;be&nbsp;OK&nbsp;to&nbsp;register&nbsp;the&nbsp;same&nbsp;type&nbsp;multiple&nbsp;times,&nbsp;as&nbsp;long&nbsp;as&nbsp;they&#39;re</span><br>
<span class="lineno"></span><span class="comment" id="7384461">//&nbsp;at&nbsp;the&nbsp;same&nbsp;level&nbsp;of&nbsp;indirection.</span><br>
<span class="lineno"></span><span class="keyword" id="7384498">func</span>&nbsp;<span class="ident" id="7384503">TestRegistration</span><span class="op" id="7384519">(</span><span class="ident" id="7384520">t</span>&nbsp;<span class="op" id="7384522">*</span><span class="ident" id="7384523">testing</span><span class="op" id="7384530">.</span><span class="ident" id="7384531">T</span><span class="op" id="7384532">)</span>&nbsp;<span class="op" id="7384534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7384537">type</span>&nbsp;<span class="ident" id="7384542">T</span>&nbsp;<span class="keyword" id="7384544">struct</span><span class="op" id="7384550">{</span>&nbsp;<span class="ident" id="7384552">a</span>&nbsp;<span class="builtintype" id="7384554">int</span>&nbsp;<span class="op" id="7384558">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384561">Register</span><span class="op" id="7384569">(</span><span class="builtinfunc" id="7384570">new</span><span class="op" id="7384573">(</span><span class="ident" id="7384574">T</span><span class="op" id="7384575">)</span><span class="op" id="7384576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384579">Register</span><span class="op" id="7384587">(</span><span class="builtinfunc" id="7384588">new</span><span class="op" id="7384591">(</span><span class="ident" id="7384592">T</span><span class="op" id="7384593">)</span><span class="op" id="7384594">)</span><br>
<span class="lineno"></span><span class="op" id="7384596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7384599">type</span>&nbsp;<span class="ident" id="7384604">N1</span>&nbsp;<span class="keyword" id="7384607">struct</span><span class="op" id="7384613">{</span><span class="op" id="7384614">}</span><br>
<span class="lineno">165</span><span class="keyword" id="7384616">type</span>&nbsp;<span class="ident" id="7384621">N2</span>&nbsp;<span class="keyword" id="7384624">struct</span><span class="op" id="7384630">{</span><span class="op" id="7384631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7384634">//&nbsp;See&nbsp;comment&nbsp;in&nbsp;type.go/Register.</span><br>
<span class="lineno"></span><span class="keyword" id="7384670">func</span>&nbsp;<span class="ident" id="7384675">TestRegistrationNaming</span><span class="op" id="7384697">(</span><span class="ident" id="7384698">t</span>&nbsp;<span class="op" id="7384700">*</span><span class="ident" id="7384701">testing</span><span class="op" id="7384708">.</span><span class="ident" id="7384709">T</span><span class="op" id="7384710">)</span>&nbsp;<span class="op" id="7384712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384715">testCases</span>&nbsp;<span class="op" id="7384725">:=</span>&nbsp;<span class="op" id="7384728">[</span><span class="op" id="7384729">]</span><span class="keyword" id="7384730">struct</span>&nbsp;<span class="op" id="7384737">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384741">t</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7384746">interface</span><span class="op" id="7384755">{</span><span class="op" id="7384756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384760">name</span>&nbsp;<span class="builtintype" id="7384765">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7384773">}</span><span class="op" id="7384774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7384778">{</span><span class="op" id="7384779">&amp;</span><span class="ident" id="7384780">N1</span><span class="op" id="7384782">{</span><span class="op" id="7384783">}</span><span class="op" id="7384784">,</span>&nbsp;<span class="string" id="7384786">&#34;*gob.N1&#34;</span><span class="op" id="7384795">}</span><span class="op" id="7384796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7384800">{</span><span class="ident" id="7384801">N2</span><span class="op" id="7384803">{</span><span class="op" id="7384804">}</span><span class="op" id="7384805">,</span>&nbsp;<span class="string" id="7384807">&#34;encoding/gob.N2&#34;</span><span class="op" id="7384824">}</span><span class="op" id="7384825">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7384828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7384832">for</span>&nbsp;<span class="ident" id="7384836">_</span><span class="op" id="7384837">,</span>&nbsp;<span class="ident" id="7384839">tc</span>&nbsp;<span class="op" id="7384842">:=</span>&nbsp;<span class="keyword" id="7384845">range</span>&nbsp;<span class="ident" id="7384851">testCases</span>&nbsp;<span class="op" id="7384861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384865">Register</span><span class="op" id="7384873">(</span><span class="ident" id="7384874">tc</span><span class="op" id="7384876">.</span><span class="ident" id="7384877">t</span><span class="op" id="7384878">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384883">tct</span>&nbsp;<span class="op" id="7384887">:=</span>&nbsp;<span class="ident" id="7384890">reflect</span><span class="op" id="7384897">.</span><span class="ident" id="7384898">TypeOf</span><span class="op" id="7384904">(</span><span class="ident" id="7384905">tc</span><span class="op" id="7384907">.</span><span class="ident" id="7384908">t</span><span class="op" id="7384909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384913">registerLock</span><span class="op" id="7384925">.</span><span class="ident" id="7384926">RLock</span><span class="op" id="7384931">(</span><span class="op" id="7384932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384936">ct</span>&nbsp;<span class="op" id="7384939">:=</span>&nbsp;<span class="ident" id="7384942">nameToConcreteType</span><span class="op" id="7384960">[</span><span class="ident" id="7384961">tc</span><span class="op" id="7384963">.</span><span class="ident" id="7384964">name</span><span class="op" id="7384968">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384972">registerLock</span><span class="op" id="7384984">.</span><span class="ident" id="7384985">RUnlock</span><span class="op" id="7384992">(</span><span class="op" id="7384993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7384997">if</span>&nbsp;<span class="ident" id="7385000">ct</span>&nbsp;<span class="op" id="7385003">!=</span>&nbsp;<span class="ident" id="7385006">tct</span>&nbsp;<span class="op" id="7385010">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7385015">t</span><span class="op" id="7385016">.</span><span class="ident" id="7385017">Errorf</span><span class="op" id="7385023">(</span><span class="string" id="7385024">&#34;nameToConcreteType[%q]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7385062">,</span>&nbsp;<span class="ident" id="7385064">tc</span><span class="op" id="7385066">.</span><span class="ident" id="7385067">name</span><span class="op" id="7385071">,</span>&nbsp;<span class="ident" id="7385073">ct</span><span class="op" id="7385075">,</span>&nbsp;<span class="ident" id="7385077">tct</span><span class="op" id="7385080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7385084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7385088">//&nbsp;concreteTypeToName&nbsp;is&nbsp;keyed&nbsp;off&nbsp;the&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7385140">if</span>&nbsp;<span class="ident" id="7385143">tct</span><span class="op" id="7385146">.</span><span class="ident" id="7385147">Kind</span><span class="op" id="7385151">(</span><span class="op" id="7385152">)</span>&nbsp;<span class="op" id="7385154">==</span>&nbsp;<span class="ident" id="7385157">reflect</span><span class="op" id="7385164">.</span><span class="ident" id="7385165">Ptr</span>&nbsp;<span class="op" id="7385169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7385174">tct</span>&nbsp;<span class="op" id="7385178">=</span>&nbsp;<span class="ident" id="7385180">tct</span><span class="op" id="7385183">.</span><span class="ident" id="7385184">Elem</span><span class="op" id="7385188">(</span><span class="op" id="7385189">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7385193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7385197">if</span>&nbsp;<span class="ident" id="7385200">n</span>&nbsp;<span class="op" id="7385202">:=</span>&nbsp;<span class="ident" id="7385205">concreteTypeToName</span><span class="op" id="7385223">[</span><span class="ident" id="7385224">tct</span><span class="op" id="7385227">]</span><span class="op" id="7385228">;</span>&nbsp;<span class="ident" id="7385230">n</span>&nbsp;<span class="op" id="7385232">!=</span>&nbsp;<span class="ident" id="7385235">tc</span><span class="op" id="7385237">.</span><span class="ident" id="7385238">name</span>&nbsp;<span class="op" id="7385243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7385248">t</span><span class="op" id="7385249">.</span><span class="ident" id="7385250">Errorf</span><span class="op" id="7385256">(</span><span class="string" id="7385257">&#34;concreteTypeToName[%v]&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7385297">,</span>&nbsp;<span class="ident" id="7385299">tct</span><span class="op" id="7385302">,</span>&nbsp;<span class="ident" id="7385304">n</span><span class="op" id="7385305">,</span>&nbsp;<span class="ident" id="7385307">tc</span><span class="op" id="7385309">.</span><span class="ident" id="7385310">name</span><span class="op" id="7385314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7385318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7385321">}</span><br>
<span class="lineno">195</span><span class="op" id="7385323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7385326">func</span>&nbsp;<span class="ident" id="7385331">TestStressParallel</span><span class="op" id="7385349">(</span><span class="ident" id="7385350">t</span>&nbsp;<span class="op" id="7385352">*</span><span class="ident" id="7385353">testing</span><span class="op" id="7385360">.</span><span class="ident" id="7385361">T</span><span class="op" id="7385362">)</span>&nbsp;<span class="op" id="7385364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7385367">type</span>&nbsp;<span class="ident" id="7385372">T2</span>&nbsp;<span class="keyword" id="7385375">struct</span><span class="op" id="7385381">{</span>&nbsp;<span class="ident" id="7385383">A</span>&nbsp;<span class="builtintype" id="7385385">int</span>&nbsp;<span class="op" id="7385389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7385392">c</span>&nbsp;<span class="op" id="7385394">:=</span>&nbsp;<span class="builtinfunc" id="7385397">make</span><span class="op" id="7385401">(</span><span class="keyword" id="7385402">chan</span>&nbsp;<span class="builtintype" id="7385407">bool</span><span class="op" id="7385411">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7385414">const</span>&nbsp;<span class="ident" id="7385420">N</span>&nbsp;<span class="op" id="7385422">=</span>&nbsp;<span class="num" id="7385424">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7385428">for</span>&nbsp;<span class="ident" id="7385432">i</span>&nbsp;<span class="op" id="7385434">:=</span>&nbsp;<span class="num" id="7385437">0</span><span class="op" id="7385438">;</span>&nbsp;<span class="ident" id="7385440">i</span>&nbsp;<span class="op" id="7385442">&lt;</span>&nbsp;<span class="ident" id="7385444">N</span><span class="op" id="7385445">;</span>&nbsp;<span class="ident" id="7385447">i</span><span class="op" id="7385448">++</span>&nbsp;<span class="op" id="7385451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7385455">go</span>&nbsp;<span class="keyword" id="7385458">func</span><span class="op" id="7385462">(</span><span class="op" id="7385463">)</span>&nbsp;<span class="op" id="7385465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7385470">p</span>&nbsp;<span class="op" id="7385472">:=</span>&nbsp;<span class="builtinfunc" id="7385475">new</span><span class="op" id="7385478">(</span><span class="ident" id="7385479">T2</span><span class="op" id="7385481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7385486">Register</span><span class="op" id="7385494">(</span><span class="ident" id="7385495">p</span><span class="op" id="7385496">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7385501">b</span>&nbsp;<span class="op" id="7385503">:=</span>&nbsp;<span class="builtinfunc" id="7385506">new</span><span class="op" id="7385509">(</span><span class="ident" id="7385510">bytes</span><span class="op" id="7385515">.</span><span class="ident" id="7385516">Buffer</span><span class="op" id="7385522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7385527">enc</span>&nbsp;<span class="op" id="7385531">:=</span>&nbsp;<span class="ident" id="7385534">NewEncoder</span><span class="op" id="7385544">(</span><span class="ident" id="7385545">b</span><span class="op" id="7385546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7385551">err</span>&nbsp;<span class="op" id="7385555">:=</span>&nbsp;<span class="ident" id="7385558">enc</span><span class="op" id="7385561">.</span><span class="ident" id="7385562">Encode</span><span class="op" id="7385568">(</span><span class="ident" id="7385569">p</span><span class="op" id="7385570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7385575">if</span>&nbsp;<span class="ident" id="7385578">err</span>&nbsp;<span class="op" id="7385582">!=</span>&nbsp;<span class="ident" id="7385585">nil</span>&nbsp;<span class="op" id="7385589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7385595">t</span><span class="op" id="7385596">.</span><span class="ident" id="7385597">Error</span><span class="op" id="7385602">(</span><span class="string" id="7385603">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="7385618">,</span>&nbsp;<span class="ident" id="7385620">err</span><span class="op" id="7385623">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7385628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7385633">dec</span>&nbsp;<span class="op" id="7385637">:=</span>&nbsp;<span class="ident" id="7385640">NewDecoder</span><span class="op" id="7385650">(</span><span class="ident" id="7385651">b</span><span class="op" id="7385652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7385657">err</span>&nbsp;<span class="op" id="7385661">=</span>&nbsp;<span class="ident" id="7385663">dec</span><span class="op" id="7385666">.</span><span class="ident" id="7385667">Decode</span><span class="op" id="7385673">(</span><span class="ident" id="7385674">p</span><span class="op" id="7385675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7385680">if</span>&nbsp;<span class="ident" id="7385683">err</span>&nbsp;<span class="op" id="7385687">!=</span>&nbsp;<span class="ident" id="7385690">nil</span>&nbsp;<span class="op" id="7385694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7385700">t</span><span class="op" id="7385701">.</span><span class="ident" id="7385702">Error</span><span class="op" id="7385707">(</span><span class="string" id="7385708">&#34;decoder&nbsp;fail:&#34;</span><span class="op" id="7385723">,</span>&nbsp;<span class="ident" id="7385725">err</span><span class="op" id="7385728">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7385733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7385738">c</span>&nbsp;<span class="op" id="7385740">&lt;-</span>&nbsp;<span class="ident" id="7385743">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7385750">}</span><span class="op" id="7385751">(</span><span class="op" id="7385752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7385755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7385758">for</span>&nbsp;<span class="ident" id="7385762">i</span>&nbsp;<span class="op" id="7385764">:=</span>&nbsp;<span class="num" id="7385767">0</span><span class="op" id="7385768">;</span>&nbsp;<span class="ident" id="7385770">i</span>&nbsp;<span class="op" id="7385772">&lt;</span>&nbsp;<span class="ident" id="7385774">N</span><span class="op" id="7385775">;</span>&nbsp;<span class="ident" id="7385777">i</span><span class="op" id="7385778">++</span>&nbsp;<span class="op" id="7385781">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7385785">&lt;-</span><span class="ident" id="7385787">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7385790">}</span><br>
<span class="lineno"></span><span class="op" id="7385792">}</span>
</div>
</body>
</html>
