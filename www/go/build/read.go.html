<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6470107">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6470163">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6470217">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6470268">package</span>&nbsp;<span class="ident" id="6470276">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6470283">import</span>&nbsp;<span class="op" id="6470290">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6470293">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6470302">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6470312">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="6470317">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6470320">type</span>&nbsp;<span class="ident" id="6470325">importReader</span>&nbsp;<span class="keyword" id="6470338">struct</span>&nbsp;<span class="op" id="6470345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470348">b</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6470353">*</span><span class="ident" id="6470354"><a href="/go/build/read.go.html#6470293">bufio</a></span><span class="op" id="6470359">.</span><span class="ident" id="6470360">Reader</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470368">buf</span>&nbsp;&nbsp;<span class="op" id="6470373">[</span><span class="op" id="6470374">]</span><span class="builtintype" id="6470375">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470381">peek</span>&nbsp;<span class="builtintype" id="6470386">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470392">err</span>&nbsp;&nbsp;<span class="builtintype" id="6470397">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470404">eof</span>&nbsp;&nbsp;<span class="builtintype" id="6470409">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470415">nerr</span>&nbsp;<span class="builtintype" id="6470420">int</span><br>
<span class="lineno">20</span><span class="op" id="6470424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6470427">func</span>&nbsp;<span class="ident" id="6470432">isIdent</span><span class="op" id="6470439">(</span><span class="ident" id="6470440">c</span>&nbsp;<span class="builtintype" id="6470442">byte</span><span class="op" id="6470446">)</span>&nbsp;<span class="builtintype" id="6470448">bool</span>&nbsp;<span class="op" id="6470453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470456">return</span>&nbsp;<span class="string" id="6470463">&#39;A&#39;</span>&nbsp;<span class="op" id="6470467">&lt;=</span>&nbsp;<span class="ident" id="6470470"><a href="/go/build/read.go.html#6470440">c</a></span>&nbsp;<span class="op" id="6470472">&amp;&amp;</span>&nbsp;<span class="ident" id="6470475"><a href="/go/build/read.go.html#6470440">c</a></span>&nbsp;<span class="op" id="6470477">&lt;=</span>&nbsp;<span class="string" id="6470480">&#39;Z&#39;</span>&nbsp;<span class="op" id="6470484">||</span>&nbsp;<span class="string" id="6470487">&#39;a&#39;</span>&nbsp;<span class="op" id="6470491">&lt;=</span>&nbsp;<span class="ident" id="6470494"><a href="/go/build/read.go.html#6470440">c</a></span>&nbsp;<span class="op" id="6470496">&amp;&amp;</span>&nbsp;<span class="ident" id="6470499"><a href="/go/build/read.go.html#6470440">c</a></span>&nbsp;<span class="op" id="6470501">&lt;=</span>&nbsp;<span class="string" id="6470504">&#39;z&#39;</span>&nbsp;<span class="op" id="6470508">||</span>&nbsp;<span class="string" id="6470511">&#39;0&#39;</span>&nbsp;<span class="op" id="6470515">&lt;=</span>&nbsp;<span class="ident" id="6470518"><a href="/go/build/read.go.html#6470440">c</a></span>&nbsp;<span class="op" id="6470520">&amp;&amp;</span>&nbsp;<span class="ident" id="6470523"><a href="/go/build/read.go.html#6470440">c</a></span>&nbsp;<span class="op" id="6470525">&lt;=</span>&nbsp;<span class="string" id="6470528">&#39;9&#39;</span>&nbsp;<span class="op" id="6470532">||</span>&nbsp;<span class="ident" id="6470535"><a href="/go/build/read.go.html#6470440">c</a></span>&nbsp;<span class="op" id="6470537">==</span>&nbsp;<span class="string" id="6470540">&#39;_&#39;</span>&nbsp;<span class="op" id="6470544">||</span>&nbsp;<span class="ident" id="6470547"><a href="/go/build/read.go.html#6470440">c</a></span>&nbsp;<span class="op" id="6470549">&gt;=</span>&nbsp;<span class="num" id="6470552">0x80</span><br>
<span class="lineno"></span><span class="op" id="6470557">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6470560">var</span>&nbsp;<span class="op" id="6470564">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470567">errSyntax</span>&nbsp;<span class="op" id="6470577">=</span>&nbsp;<span class="ident" id="6470579"><a href="/go/build/read.go.html#6470302">errors</a></span><span class="op" id="6470585">.</span><span class="ident" id="6470586">New</span><span class="op" id="6470589">(</span><span class="string" id="6470590">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6470604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470607">errNUL</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6470617">=</span>&nbsp;<span class="ident" id="6470619"><a href="/go/build/read.go.html#6470302">errors</a></span><span class="op" id="6470625">.</span><span class="ident" id="6470626">New</span><span class="op" id="6470629">(</span><span class="string" id="6470630">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="6470655">)</span><br>
<span class="lineno"></span><span class="op" id="6470657">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="6470660">//&nbsp;syntaxError&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;but&nbsp;only&nbsp;if&nbsp;an&nbsp;I/O&nbsp;error&nbsp;has&nbsp;not&nbsp;already&nbsp;been&nbsp;recorded.</span><br>
<span class="lineno"></span><span class="keyword" id="6470755">func</span>&nbsp;<span class="op" id="6470760">(</span><span class="ident" id="6470761">r</span>&nbsp;<span class="op" id="6470763">*</span><span class="ident" id="6470764"><a href="/go/build/read.go.html#6470325">importReader</a></span><span class="op" id="6470776">)</span>&nbsp;<span class="ident" id="6470778">syntaxError</span><span class="op" id="6470789">(</span><span class="op" id="6470790">)</span>&nbsp;<span class="op" id="6470792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470795">if</span>&nbsp;<span class="ident" id="6470798"><a href="/go/build/read.go.html#6470761">r</a></span><span class="op" id="6470799">.</span><span class="ident" id="6470800">err</span>&nbsp;<span class="op" id="6470804">==</span>&nbsp;<span class="ident" id="6470807">nil</span>&nbsp;<span class="op" id="6470811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470815"><a href="/go/build/read.go.html#6470761">r</a></span><span class="op" id="6470816">.</span><span class="ident" id="6470817">err</span>&nbsp;<span class="op" id="6470821">=</span>&nbsp;<span class="ident" id="6470823"><a href="/go/build/read.go.html#6470567">errSyntax</a></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470834">}</span><br>
<span class="lineno"></span><span class="op" id="6470836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6470839">//&nbsp;readByte&nbsp;reads&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input,&nbsp;saves&nbsp;it&nbsp;in&nbsp;buf,&nbsp;and&nbsp;returns&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="6470920">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;readByte&nbsp;records&nbsp;the&nbsp;error&nbsp;in&nbsp;r.err&nbsp;and&nbsp;returns&nbsp;0.</span><br>
<span class="lineno">40</span><span class="keyword" id="6470994">func</span>&nbsp;<span class="op" id="6470999">(</span><span class="ident" id="6471000">r</span>&nbsp;<span class="op" id="6471002">*</span><span class="ident" id="6471003"><a href="/go/build/read.go.html#6470325">importReader</a></span><span class="op" id="6471015">)</span>&nbsp;<span class="ident" id="6471017">readByte</span><span class="op" id="6471025">(</span><span class="op" id="6471026">)</span>&nbsp;<span class="builtintype" id="6471028">byte</span>&nbsp;<span class="op" id="6471033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471036">c</span><span class="op" id="6471037">,</span>&nbsp;<span class="ident" id="6471039">err</span>&nbsp;<span class="op" id="6471043">:=</span>&nbsp;<span class="ident" id="6471046"><a href="/go/build/read.go.html#6471000">r</a></span><span class="op" id="6471047">.</span><span class="ident" id="6471048">b</span><span class="op" id="6471049">.</span><span class="ident" id="6471050">ReadByte</span><span class="op" id="6471058">(</span><span class="op" id="6471059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471062">if</span>&nbsp;<span class="ident" id="6471065"><a href="/go/build/read.go.html#6471039">err</a></span>&nbsp;<span class="op" id="6471069">==</span>&nbsp;<span class="ident" id="6471072">nil</span>&nbsp;<span class="op" id="6471076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471080"><a href="/go/build/read.go.html#6471000">r</a></span><span class="op" id="6471081">.</span><span class="ident" id="6471082">buf</span>&nbsp;<span class="op" id="6471086">=</span>&nbsp;<span class="builtinfunc" id="6471088">append</span><span class="op" id="6471094">(</span><span class="ident" id="6471095"><a href="/go/build/read.go.html#6471000">r</a></span><span class="op" id="6471096">.</span><span class="ident" id="6471097">buf</span><span class="op" id="6471100">,</span>&nbsp;<span class="ident" id="6471102"><a href="/go/build/read.go.html#6471036">c</a></span><span class="op" id="6471103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471107">if</span>&nbsp;<span class="ident" id="6471110"><a href="/go/build/read.go.html#6471036">c</a></span>&nbsp;<span class="op" id="6471112">==</span>&nbsp;<span class="num" id="6471115">0</span>&nbsp;<span class="op" id="6471117">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471122"><a href="/go/build/read.go.html#6471039">err</a></span>&nbsp;<span class="op" id="6471126">=</span>&nbsp;<span class="ident" id="6471128"><a href="/go/build/read.go.html#6470607">errNUL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471143">if</span>&nbsp;<span class="ident" id="6471146"><a href="/go/build/read.go.html#6471039">err</a></span>&nbsp;<span class="op" id="6471150">!=</span>&nbsp;<span class="ident" id="6471153">nil</span>&nbsp;<span class="op" id="6471157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471161">if</span>&nbsp;<span class="ident" id="6471164"><a href="/go/build/read.go.html#6471039">err</a></span>&nbsp;<span class="op" id="6471168">==</span>&nbsp;<span class="ident" id="6471171"><a href="/go/build/read.go.html#6470312">io</a></span><span class="op" id="6471173">.</span><span class="ident" id="6471174">EOF</span>&nbsp;<span class="op" id="6471178">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471183"><a href="/go/build/read.go.html#6471000">r</a></span><span class="op" id="6471184">.</span><span class="ident" id="6471185">eof</span>&nbsp;<span class="op" id="6471189">=</span>&nbsp;<span class="builtintype" id="6471191">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471198">}</span>&nbsp;<span class="keyword" id="6471200">else</span>&nbsp;<span class="keyword" id="6471205">if</span>&nbsp;<span class="ident" id="6471208"><a href="/go/build/read.go.html#6471000">r</a></span><span class="op" id="6471209">.</span><span class="ident" id="6471210">err</span>&nbsp;<span class="op" id="6471214">==</span>&nbsp;<span class="ident" id="6471217">nil</span>&nbsp;<span class="op" id="6471221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471226"><a href="/go/build/read.go.html#6471000">r</a></span><span class="op" id="6471227">.</span><span class="ident" id="6471228">err</span>&nbsp;<span class="op" id="6471232">=</span>&nbsp;<span class="ident" id="6471234"><a href="/go/build/read.go.html#6471039">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471244"><a href="/go/build/read.go.html#6471036">c</a></span>&nbsp;<span class="op" id="6471246">=</span>&nbsp;<span class="num" id="6471248">0</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471254">return</span>&nbsp;<span class="ident" id="6471261"><a href="/go/build/read.go.html#6471036">c</a></span><br>
<span class="lineno"></span><span class="op" id="6471263">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6471266">//&nbsp;peekByte&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input&nbsp;reader&nbsp;but&nbsp;does&nbsp;not&nbsp;advance&nbsp;beyond&nbsp;it.</span><br>
<span class="lineno">60</span><span class="comment" id="6471354">//&nbsp;If&nbsp;skipSpace&nbsp;is&nbsp;set,&nbsp;peekByte&nbsp;skips&nbsp;leading&nbsp;spaces&nbsp;and&nbsp;comments.</span><br>
<span class="lineno"></span><span class="keyword" id="6471422">func</span>&nbsp;<span class="op" id="6471427">(</span><span class="ident" id="6471428">r</span>&nbsp;<span class="op" id="6471430">*</span><span class="ident" id="6471431"><a href="/go/build/read.go.html#6470325">importReader</a></span><span class="op" id="6471443">)</span>&nbsp;<span class="ident" id="6471445">peekByte</span><span class="op" id="6471453">(</span><span class="ident" id="6471454">skipSpace</span>&nbsp;<span class="builtintype" id="6471464">bool</span><span class="op" id="6471468">)</span>&nbsp;<span class="builtintype" id="6471470">byte</span>&nbsp;<span class="op" id="6471475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471478">if</span>&nbsp;<span class="ident" id="6471481"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6471482">.</span><span class="ident" id="6471483">err</span>&nbsp;<span class="op" id="6471487">!=</span>&nbsp;<span class="ident" id="6471490">nil</span>&nbsp;<span class="op" id="6471494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471498">if</span>&nbsp;<span class="ident" id="6471501"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6471502">.</span><span class="ident" id="6471503">nerr</span><span class="op" id="6471507">++</span><span class="op" id="6471509">;</span>&nbsp;<span class="ident" id="6471511"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6471512">.</span><span class="ident" id="6471513">nerr</span>&nbsp;<span class="op" id="6471518">&gt;</span>&nbsp;<span class="num" id="6471520">10000</span>&nbsp;<span class="op" id="6471526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6471531">panic</span><span class="op" id="6471536">(</span><span class="string" id="6471537">&#34;go/build:&nbsp;import&nbsp;reader&nbsp;looping&#34;</span><span class="op" id="6471570">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471578">return</span>&nbsp;<span class="num" id="6471585">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6471592">//&nbsp;Use&nbsp;r.peek&nbsp;as&nbsp;first&nbsp;input&nbsp;byte.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6471628">//&nbsp;Don&#39;t&nbsp;just&nbsp;return&nbsp;r.peek&nbsp;here:&nbsp;it&nbsp;might&nbsp;have&nbsp;been&nbsp;left&nbsp;by&nbsp;peekByte(false)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6471706">//&nbsp;and&nbsp;this&nbsp;might&nbsp;be&nbsp;peekByte(true).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471744">c</span>&nbsp;<span class="op" id="6471746">:=</span>&nbsp;<span class="ident" id="6471749"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6471750">.</span><span class="ident" id="6471751">peek</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471757">if</span>&nbsp;<span class="ident" id="6471760"><a href="/go/build/read.go.html#6471744">c</a></span>&nbsp;<span class="op" id="6471762">==</span>&nbsp;<span class="num" id="6471765">0</span>&nbsp;<span class="op" id="6471767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471771"><a href="/go/build/read.go.html#6471744">c</a></span>&nbsp;<span class="op" id="6471773">=</span>&nbsp;<span class="ident" id="6471775"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6471776">.</span><span class="ident" id="6471777">readByte</span><span class="op" id="6471785">(</span><span class="op" id="6471786">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471792">for</span>&nbsp;<span class="ident" id="6471796"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6471797">.</span><span class="ident" id="6471798">err</span>&nbsp;<span class="op" id="6471802">==</span>&nbsp;<span class="ident" id="6471805">nil</span>&nbsp;<span class="op" id="6471809">&amp;&amp;</span>&nbsp;<span class="op" id="6471812">!</span><span class="ident" id="6471813"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6471814">.</span><span class="ident" id="6471815">eof</span>&nbsp;<span class="op" id="6471819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471823">if</span>&nbsp;<span class="ident" id="6471826"><a href="/go/build/read.go.html#6471454">skipSpace</a></span>&nbsp;<span class="op" id="6471836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6471841">//&nbsp;For&nbsp;the&nbsp;purposes&nbsp;of&nbsp;this&nbsp;reader,&nbsp;semicolons&nbsp;are&nbsp;never&nbsp;necessary&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6471914">//&nbsp;understand&nbsp;the&nbsp;input&nbsp;and&nbsp;are&nbsp;treated&nbsp;as&nbsp;spaces.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471968">switch</span>&nbsp;<span class="ident" id="6471975"><a href="/go/build/read.go.html#6471744">c</a></span>&nbsp;<span class="op" id="6471977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471982">case</span>&nbsp;<span class="string" id="6471987">&#39;&nbsp;&#39;</span><span class="op" id="6471990">,</span>&nbsp;<span class="string" id="6471992">&#39;\f&#39;</span><span class="op" id="6471996">,</span>&nbsp;<span class="string" id="6471998">&#39;\t&#39;</span><span class="op" id="6472002">,</span>&nbsp;<span class="string" id="6472004">&#39;\r&#39;</span><span class="op" id="6472008">,</span>&nbsp;<span class="string" id="6472010">&#39;\n&#39;</span><span class="op" id="6472014">,</span>&nbsp;<span class="string" id="6472016">&#39;;&#39;</span><span class="op" id="6472019">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472025"><a href="/go/build/read.go.html#6471744">c</a></span>&nbsp;<span class="op" id="6472027">=</span>&nbsp;<span class="ident" id="6472029"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6472030">.</span><span class="ident" id="6472031">readByte</span><span class="op" id="6472039">(</span><span class="op" id="6472040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472046">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472059">case</span>&nbsp;<span class="string" id="6472064">&#39;/&#39;</span><span class="op" id="6472067">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472073"><a href="/go/build/read.go.html#6471744">c</a></span>&nbsp;<span class="op" id="6472075">=</span>&nbsp;<span class="ident" id="6472077"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6472078">.</span><span class="ident" id="6472079">readByte</span><span class="op" id="6472087">(</span><span class="op" id="6472088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472094">if</span>&nbsp;<span class="ident" id="6472097"><a href="/go/build/read.go.html#6471744">c</a></span>&nbsp;<span class="op" id="6472099">==</span>&nbsp;<span class="string" id="6472102">&#39;/&#39;</span>&nbsp;<span class="op" id="6472106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472113">for</span>&nbsp;<span class="ident" id="6472117"><a href="/go/build/read.go.html#6471744">c</a></span>&nbsp;<span class="op" id="6472119">!=</span>&nbsp;<span class="string" id="6472122">&#39;\n&#39;</span>&nbsp;<span class="op" id="6472127">&amp;&amp;</span>&nbsp;<span class="ident" id="6472130"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6472131">.</span><span class="ident" id="6472132">err</span>&nbsp;<span class="op" id="6472136">==</span>&nbsp;<span class="ident" id="6472139">nil</span>&nbsp;<span class="op" id="6472143">&amp;&amp;</span>&nbsp;<span class="op" id="6472146">!</span><span class="ident" id="6472147"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6472148">.</span><span class="ident" id="6472149">eof</span>&nbsp;<span class="op" id="6472153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472161"><a href="/go/build/read.go.html#6471744">c</a></span>&nbsp;<span class="op" id="6472163">=</span>&nbsp;<span class="ident" id="6472165"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6472166">.</span><span class="ident" id="6472167">readByte</span><span class="op" id="6472175">(</span><span class="op" id="6472176">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472189">}</span>&nbsp;<span class="keyword" id="6472191">else</span>&nbsp;<span class="keyword" id="6472196">if</span>&nbsp;<span class="ident" id="6472199"><a href="/go/build/read.go.html#6471744">c</a></span>&nbsp;<span class="op" id="6472201">==</span>&nbsp;<span class="string" id="6472204">&#39;*&#39;</span>&nbsp;<span class="op" id="6472208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472215">var</span>&nbsp;<span class="ident" id="6472219">c1</span>&nbsp;<span class="builtintype" id="6472222">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472232">for</span>&nbsp;<span class="op" id="6472236">(</span><span class="ident" id="6472237"><a href="/go/build/read.go.html#6471744">c</a></span>&nbsp;<span class="op" id="6472239">!=</span>&nbsp;<span class="string" id="6472242">&#39;*&#39;</span>&nbsp;<span class="op" id="6472246">||</span>&nbsp;<span class="ident" id="6472249"><a href="/go/build/read.go.html#6472219">c1</a></span>&nbsp;<span class="op" id="6472252">!=</span>&nbsp;<span class="string" id="6472255">&#39;/&#39;</span><span class="op" id="6472258">)</span>&nbsp;<span class="op" id="6472260">&amp;&amp;</span>&nbsp;<span class="ident" id="6472263"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6472264">.</span><span class="ident" id="6472265">err</span>&nbsp;<span class="op" id="6472269">==</span>&nbsp;<span class="ident" id="6472272">nil</span>&nbsp;<span class="op" id="6472276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472284">if</span>&nbsp;<span class="ident" id="6472287"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6472288">.</span><span class="ident" id="6472289">eof</span>&nbsp;<span class="op" id="6472293">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472302"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6472303">.</span><span class="ident" id="6472304">syntaxError</span><span class="op" id="6472315">(</span><span class="op" id="6472316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472332"><a href="/go/build/read.go.html#6471744">c</a></span><span class="op" id="6472333">,</span>&nbsp;<span class="ident" id="6472335"><a href="/go/build/read.go.html#6472219">c1</a></span>&nbsp;<span class="op" id="6472338">=</span>&nbsp;<span class="ident" id="6472340"><a href="/go/build/read.go.html#6472219">c1</a></span><span class="op" id="6472342">,</span>&nbsp;<span class="ident" id="6472344"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6472345">.</span><span class="ident" id="6472346">readByte</span><span class="op" id="6472354">(</span><span class="op" id="6472355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472368">}</span>&nbsp;<span class="keyword" id="6472370">else</span>&nbsp;<span class="op" id="6472375">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472382"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6472383">.</span><span class="ident" id="6472384">syntaxError</span><span class="op" id="6472395">(</span><span class="op" id="6472396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472408"><a href="/go/build/read.go.html#6471744">c</a></span>&nbsp;<span class="op" id="6472410">=</span>&nbsp;<span class="ident" id="6472412"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6472413">.</span><span class="ident" id="6472414">readByte</span><span class="op" id="6472422">(</span><span class="op" id="6472423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472429">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472441">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472449">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472459"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6472460">.</span><span class="ident" id="6472461">peek</span>&nbsp;<span class="op" id="6472466">=</span>&nbsp;<span class="ident" id="6472468"><a href="/go/build/read.go.html#6471744">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472471">return</span>&nbsp;<span class="ident" id="6472478"><a href="/go/build/read.go.html#6471428">r</a></span><span class="op" id="6472479">.</span><span class="ident" id="6472480">peek</span><br>
<span class="lineno">110</span><span class="op" id="6472485">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6472488">//&nbsp;nextByte&nbsp;is&nbsp;like&nbsp;peekByte&nbsp;but&nbsp;advances&nbsp;beyond&nbsp;the&nbsp;returned&nbsp;byte.</span><br>
<span class="lineno"></span><span class="keyword" id="6472556">func</span>&nbsp;<span class="op" id="6472561">(</span><span class="ident" id="6472562">r</span>&nbsp;<span class="op" id="6472564">*</span><span class="ident" id="6472565"><a href="/go/build/read.go.html#6470325">importReader</a></span><span class="op" id="6472577">)</span>&nbsp;<span class="ident" id="6472579">nextByte</span><span class="op" id="6472587">(</span><span class="ident" id="6472588">skipSpace</span>&nbsp;<span class="builtintype" id="6472598">bool</span><span class="op" id="6472602">)</span>&nbsp;<span class="builtintype" id="6472604">byte</span>&nbsp;<span class="op" id="6472609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472612">c</span>&nbsp;<span class="op" id="6472614">:=</span>&nbsp;<span class="ident" id="6472617"><a href="/go/build/read.go.html#6472562">r</a></span><span class="op" id="6472618">.</span><span class="ident" id="6472619">peekByte</span><span class="op" id="6472627">(</span><span class="ident" id="6472628"><a href="/go/build/read.go.html#6472588">skipSpace</a></span><span class="op" id="6472637">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472640"><a href="/go/build/read.go.html#6472562">r</a></span><span class="op" id="6472641">.</span><span class="ident" id="6472642">peek</span>&nbsp;<span class="op" id="6472647">=</span>&nbsp;<span class="num" id="6472649">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472652">return</span>&nbsp;<span class="ident" id="6472659"><a href="/go/build/read.go.html#6472612">c</a></span><br>
<span class="lineno"></span><span class="op" id="6472661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6472664">//&nbsp;readKeyword&nbsp;reads&nbsp;the&nbsp;given&nbsp;keyword&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">120</span><span class="comment" id="6472719">//&nbsp;If&nbsp;the&nbsp;keyword&nbsp;is&nbsp;not&nbsp;present,&nbsp;readKeyword&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6472789">func</span>&nbsp;<span class="op" id="6472794">(</span><span class="ident" id="6472795">r</span>&nbsp;<span class="op" id="6472797">*</span><span class="ident" id="6472798"><a href="/go/build/read.go.html#6470325">importReader</a></span><span class="op" id="6472810">)</span>&nbsp;<span class="ident" id="6472812">readKeyword</span><span class="op" id="6472823">(</span><span class="ident" id="6472824">kw</span>&nbsp;<span class="builtintype" id="6472827">string</span><span class="op" id="6472833">)</span>&nbsp;<span class="op" id="6472835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472838"><a href="/go/build/read.go.html#6472795">r</a></span><span class="op" id="6472839">.</span><span class="ident" id="6472840">peekByte</span><span class="op" id="6472848">(</span><span class="builtintype" id="6472849">true</span><span class="op" id="6472853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472856">for</span>&nbsp;<span class="ident" id="6472860">i</span>&nbsp;<span class="op" id="6472862">:=</span>&nbsp;<span class="num" id="6472865">0</span><span class="op" id="6472866">;</span>&nbsp;<span class="ident" id="6472868"><a href="/go/build/read.go.html#6472860">i</a></span>&nbsp;<span class="op" id="6472870">&lt;</span>&nbsp;<span class="builtinfunc" id="6472872">len</span><span class="op" id="6472875">(</span><span class="ident" id="6472876"><a href="/go/build/read.go.html#6472824">kw</a></span><span class="op" id="6472878">)</span><span class="op" id="6472879">;</span>&nbsp;<span class="ident" id="6472881"><a href="/go/build/read.go.html#6472860">i</a></span><span class="op" id="6472882">++</span>&nbsp;<span class="op" id="6472885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472889">if</span>&nbsp;<span class="ident" id="6472892"><a href="/go/build/read.go.html#6472795">r</a></span><span class="op" id="6472893">.</span><span class="ident" id="6472894">nextByte</span><span class="op" id="6472902">(</span><span class="builtintype" id="6472903">false</span><span class="op" id="6472908">)</span>&nbsp;<span class="op" id="6472910">!=</span>&nbsp;<span class="ident" id="6472913"><a href="/go/build/read.go.html#6472824">kw</a></span><span class="op" id="6472915">[</span><span class="ident" id="6472916"><a href="/go/build/read.go.html#6472860">i</a></span><span class="op" id="6472917">]</span>&nbsp;<span class="op" id="6472919">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472924"><a href="/go/build/read.go.html#6472795">r</a></span><span class="op" id="6472925">.</span><span class="ident" id="6472926">syntaxError</span><span class="op" id="6472937">(</span><span class="op" id="6472938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472943">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472958">if</span>&nbsp;<span class="ident" id="6472961"><a href="/go/build/read.go.html#6470432">isIdent</a></span><span class="op" id="6472968">(</span><span class="ident" id="6472969"><a href="/go/build/read.go.html#6472795">r</a></span><span class="op" id="6472970">.</span><span class="ident" id="6472971">peekByte</span><span class="op" id="6472979">(</span><span class="builtintype" id="6472980">false</span><span class="op" id="6472985">)</span><span class="op" id="6472986">)</span>&nbsp;<span class="op" id="6472988">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472992"><a href="/go/build/read.go.html#6472795">r</a></span><span class="op" id="6472993">.</span><span class="ident" id="6472994">syntaxError</span><span class="op" id="6473005">(</span><span class="op" id="6473006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473009">}</span><br>
<span class="lineno"></span><span class="op" id="6473011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6473014">//&nbsp;readIdent&nbsp;reads&nbsp;an&nbsp;identifier&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">135</span><span class="comment" id="6473063">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readIdent&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6473133">func</span>&nbsp;<span class="op" id="6473138">(</span><span class="ident" id="6473139">r</span>&nbsp;<span class="op" id="6473141">*</span><span class="ident" id="6473142"><a href="/go/build/read.go.html#6470325">importReader</a></span><span class="op" id="6473154">)</span>&nbsp;<span class="ident" id="6473156">readIdent</span><span class="op" id="6473165">(</span><span class="op" id="6473166">)</span>&nbsp;<span class="op" id="6473168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473171">c</span>&nbsp;<span class="op" id="6473173">:=</span>&nbsp;<span class="ident" id="6473176"><a href="/go/build/read.go.html#6473139">r</a></span><span class="op" id="6473177">.</span><span class="ident" id="6473178">peekByte</span><span class="op" id="6473186">(</span><span class="builtintype" id="6473187">true</span><span class="op" id="6473191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473194">if</span>&nbsp;<span class="op" id="6473197">!</span><span class="ident" id="6473198"><a href="/go/build/read.go.html#6470432">isIdent</a></span><span class="op" id="6473205">(</span><span class="ident" id="6473206"><a href="/go/build/read.go.html#6473171">c</a></span><span class="op" id="6473207">)</span>&nbsp;<span class="op" id="6473209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473213"><a href="/go/build/read.go.html#6473139">r</a></span><span class="op" id="6473214">.</span><span class="ident" id="6473215">syntaxError</span><span class="op" id="6473226">(</span><span class="op" id="6473227">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473231">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473242">for</span>&nbsp;<span class="ident" id="6473246"><a href="/go/build/read.go.html#6470432">isIdent</a></span><span class="op" id="6473253">(</span><span class="ident" id="6473254"><a href="/go/build/read.go.html#6473139">r</a></span><span class="op" id="6473255">.</span><span class="ident" id="6473256">peekByte</span><span class="op" id="6473264">(</span><span class="builtintype" id="6473265">false</span><span class="op" id="6473270">)</span><span class="op" id="6473271">)</span>&nbsp;<span class="op" id="6473273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473277"><a href="/go/build/read.go.html#6473139">r</a></span><span class="op" id="6473278">.</span><span class="ident" id="6473279">peek</span>&nbsp;<span class="op" id="6473284">=</span>&nbsp;<span class="num" id="6473286">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473289">}</span><br>
<span class="lineno">145</span><span class="op" id="6473291">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6473294">//&nbsp;readString&nbsp;reads&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="6473354">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readString&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6473425">func</span>&nbsp;<span class="op" id="6473430">(</span><span class="ident" id="6473431">r</span>&nbsp;<span class="op" id="6473433">*</span><span class="ident" id="6473434"><a href="/go/build/read.go.html#6470325">importReader</a></span><span class="op" id="6473446">)</span>&nbsp;<span class="ident" id="6473448">readString</span><span class="op" id="6473458">(</span><span class="op" id="6473459">)</span>&nbsp;<span class="op" id="6473461">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473464">switch</span>&nbsp;<span class="ident" id="6473471"><a href="/go/build/read.go.html#6473431">r</a></span><span class="op" id="6473472">.</span><span class="ident" id="6473473">nextByte</span><span class="op" id="6473481">(</span><span class="builtintype" id="6473482">true</span><span class="op" id="6473486">)</span>&nbsp;<span class="op" id="6473488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473491">case</span>&nbsp;<span class="string" id="6473496">&#39;`&#39;</span><span class="op" id="6473499">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473503">for</span>&nbsp;<span class="ident" id="6473507"><a href="/go/build/read.go.html#6473431">r</a></span><span class="op" id="6473508">.</span><span class="ident" id="6473509">err</span>&nbsp;<span class="op" id="6473513">==</span>&nbsp;<span class="ident" id="6473516">nil</span>&nbsp;<span class="op" id="6473520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473525">if</span>&nbsp;<span class="ident" id="6473528"><a href="/go/build/read.go.html#6473431">r</a></span><span class="op" id="6473529">.</span><span class="ident" id="6473530">nextByte</span><span class="op" id="6473538">(</span><span class="builtintype" id="6473539">false</span><span class="op" id="6473544">)</span>&nbsp;<span class="op" id="6473546">==</span>&nbsp;<span class="string" id="6473549">&#39;`&#39;</span>&nbsp;<span class="op" id="6473553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473559">break</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473573">if</span>&nbsp;<span class="ident" id="6473576"><a href="/go/build/read.go.html#6473431">r</a></span><span class="op" id="6473577">.</span><span class="ident" id="6473578">eof</span>&nbsp;<span class="op" id="6473582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473588"><a href="/go/build/read.go.html#6473431">r</a></span><span class="op" id="6473589">.</span><span class="ident" id="6473590">syntaxError</span><span class="op" id="6473601">(</span><span class="op" id="6473602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473611">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473614">case</span>&nbsp;<span class="string" id="6473619">&#39;&#34;&#39;</span><span class="op" id="6473622">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473626">for</span>&nbsp;<span class="ident" id="6473630"><a href="/go/build/read.go.html#6473431">r</a></span><span class="op" id="6473631">.</span><span class="ident" id="6473632">err</span>&nbsp;<span class="op" id="6473636">==</span>&nbsp;<span class="ident" id="6473639">nil</span>&nbsp;<span class="op" id="6473643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473648">c</span>&nbsp;<span class="op" id="6473650">:=</span>&nbsp;<span class="ident" id="6473653"><a href="/go/build/read.go.html#6473431">r</a></span><span class="op" id="6473654">.</span><span class="ident" id="6473655">nextByte</span><span class="op" id="6473663">(</span><span class="builtintype" id="6473664">false</span><span class="op" id="6473669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473674">if</span>&nbsp;<span class="ident" id="6473677"><a href="/go/build/read.go.html#6473648">c</a></span>&nbsp;<span class="op" id="6473679">==</span>&nbsp;<span class="string" id="6473682">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6473686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473692">break</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473706">if</span>&nbsp;<span class="ident" id="6473709"><a href="/go/build/read.go.html#6473431">r</a></span><span class="op" id="6473710">.</span><span class="ident" id="6473711">eof</span>&nbsp;<span class="op" id="6473715">||</span>&nbsp;<span class="ident" id="6473718"><a href="/go/build/read.go.html#6473648">c</a></span>&nbsp;<span class="op" id="6473720">==</span>&nbsp;<span class="string" id="6473723">&#39;\n&#39;</span>&nbsp;<span class="op" id="6473728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473734"><a href="/go/build/read.go.html#6473431">r</a></span><span class="op" id="6473735">.</span><span class="ident" id="6473736">syntaxError</span><span class="op" id="6473747">(</span><span class="op" id="6473748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473758">if</span>&nbsp;<span class="ident" id="6473761"><a href="/go/build/read.go.html#6473648">c</a></span>&nbsp;<span class="op" id="6473763">==</span>&nbsp;<span class="string" id="6473766">&#39;\\&#39;</span>&nbsp;<span class="op" id="6473771">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473777"><a href="/go/build/read.go.html#6473431">r</a></span><span class="op" id="6473778">.</span><span class="ident" id="6473779">nextByte</span><span class="op" id="6473787">(</span><span class="builtintype" id="6473788">false</span><span class="op" id="6473793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6473805">default</span><span class="op" id="6473812">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473816"><a href="/go/build/read.go.html#6473431">r</a></span><span class="op" id="6473817">.</span><span class="ident" id="6473818">syntaxError</span><span class="op" id="6473829">(</span><span class="op" id="6473830">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6473833">}</span><br>
<span class="lineno"></span><span class="op" id="6473835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6473838">//&nbsp;readImport&nbsp;reads&nbsp;an&nbsp;import&nbsp;clause&nbsp;-&nbsp;optional&nbsp;identifier&nbsp;followed&nbsp;by&nbsp;quoted&nbsp;string&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="6473925">//&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">180</span><span class="keyword" id="6473944">func</span>&nbsp;<span class="op" id="6473949">(</span><span class="ident" id="6473950">r</span>&nbsp;<span class="op" id="6473952">*</span><span class="ident" id="6473953"><a href="/go/build/read.go.html#6470325">importReader</a></span><span class="op" id="6473965">)</span>&nbsp;<span class="ident" id="6473967">readImport</span><span class="op" id="6473977">(</span><span class="op" id="6473978">)</span>&nbsp;<span class="op" id="6473980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6473983">c</span>&nbsp;<span class="op" id="6473985">:=</span>&nbsp;<span class="ident" id="6473988"><a href="/go/build/read.go.html#6473950">r</a></span><span class="op" id="6473989">.</span><span class="ident" id="6473990">peekByte</span><span class="op" id="6473998">(</span><span class="builtintype" id="6473999">true</span><span class="op" id="6474003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474006">if</span>&nbsp;<span class="ident" id="6474009"><a href="/go/build/read.go.html#6473983">c</a></span>&nbsp;<span class="op" id="6474011">==</span>&nbsp;<span class="string" id="6474014">&#39;.&#39;</span>&nbsp;<span class="op" id="6474018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474022"><a href="/go/build/read.go.html#6473950">r</a></span><span class="op" id="6474023">.</span><span class="ident" id="6474024">peek</span>&nbsp;<span class="op" id="6474029">=</span>&nbsp;<span class="num" id="6474031">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474034">}</span>&nbsp;<span class="keyword" id="6474036">else</span>&nbsp;<span class="keyword" id="6474041">if</span>&nbsp;<span class="ident" id="6474044"><a href="/go/build/read.go.html#6470432">isIdent</a></span><span class="op" id="6474051">(</span><span class="ident" id="6474052"><a href="/go/build/read.go.html#6473983">c</a></span><span class="op" id="6474053">)</span>&nbsp;<span class="op" id="6474055">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474059"><a href="/go/build/read.go.html#6473950">r</a></span><span class="op" id="6474060">.</span><span class="ident" id="6474061">readIdent</span><span class="op" id="6474070">(</span><span class="op" id="6474071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474077"><a href="/go/build/read.go.html#6473950">r</a></span><span class="op" id="6474078">.</span><span class="ident" id="6474079">readString</span><span class="op" id="6474089">(</span><span class="op" id="6474090">)</span><br>
<span class="lineno"></span><span class="op" id="6474092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="comment" id="6474095">//&nbsp;readComments&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;only&nbsp;reads&nbsp;the&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="6474173">//&nbsp;block&nbsp;of&nbsp;comments&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6474207">func</span>&nbsp;<span class="ident" id="6474212">readComments</span><span class="op" id="6474224">(</span><span class="ident" id="6474225">f</span>&nbsp;<span class="ident" id="6474227"><a href="/go/build/read.go.html#6470312">io</a></span><span class="op" id="6474229">.</span><span class="ident" id="6474230">Reader</span><span class="op" id="6474236">)</span>&nbsp;<span class="op" id="6474238">(</span><span class="op" id="6474239">[</span><span class="op" id="6474240">]</span><span class="builtintype" id="6474241">byte</span><span class="op" id="6474245">,</span>&nbsp;<span class="builtintype" id="6474247">error</span><span class="op" id="6474252">)</span>&nbsp;<span class="op" id="6474254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474257">r</span>&nbsp;<span class="op" id="6474259">:=</span>&nbsp;<span class="op" id="6474262">&amp;</span><span class="ident" id="6474263"><a href="/go/build/read.go.html#6470325">importReader</a></span><span class="op" id="6474275">{</span><span class="ident" id="6474276">b</span><span class="op" id="6474277">:</span>&nbsp;<span class="ident" id="6474279"><a href="/go/build/read.go.html#6470293">bufio</a></span><span class="op" id="6474284">.</span><span class="ident" id="6474285">NewReader</span><span class="op" id="6474294">(</span><span class="ident" id="6474295"><a href="/go/build/read.go.html#6474225">f</a></span><span class="op" id="6474296">)</span><span class="op" id="6474297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474300"><a href="/go/build/read.go.html#6474257">r</a></span><span class="op" id="6474301">.</span><span class="ident" id="6474302">peekByte</span><span class="op" id="6474310">(</span><span class="builtintype" id="6474311">true</span><span class="op" id="6474315">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474318">if</span>&nbsp;<span class="ident" id="6474321"><a href="/go/build/read.go.html#6474257">r</a></span><span class="op" id="6474322">.</span><span class="ident" id="6474323">err</span>&nbsp;<span class="op" id="6474327">==</span>&nbsp;<span class="ident" id="6474330">nil</span>&nbsp;<span class="op" id="6474334">&amp;&amp;</span>&nbsp;<span class="op" id="6474337">!</span><span class="ident" id="6474338"><a href="/go/build/read.go.html#6474257">r</a></span><span class="op" id="6474339">.</span><span class="ident" id="6474340">eof</span>&nbsp;<span class="op" id="6474344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6474348">//&nbsp;Didn&#39;t&nbsp;reach&nbsp;EOF,&nbsp;so&nbsp;must&nbsp;have&nbsp;found&nbsp;a&nbsp;non-space&nbsp;byte.&nbsp;Remove&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474419"><a href="/go/build/read.go.html#6474257">r</a></span><span class="op" id="6474420">.</span><span class="ident" id="6474421">buf</span>&nbsp;<span class="op" id="6474425">=</span>&nbsp;<span class="ident" id="6474427"><a href="/go/build/read.go.html#6474257">r</a></span><span class="op" id="6474428">.</span><span class="ident" id="6474429">buf</span><span class="op" id="6474432">[</span><span class="op" id="6474433">:</span><span class="builtinfunc" id="6474434">len</span><span class="op" id="6474437">(</span><span class="ident" id="6474438"><a href="/go/build/read.go.html#6474257">r</a></span><span class="op" id="6474439">.</span><span class="ident" id="6474440">buf</span><span class="op" id="6474443">)</span><span class="op" id="6474444">-</span><span class="num" id="6474445">1</span><span class="op" id="6474446">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474452">return</span>&nbsp;<span class="ident" id="6474459"><a href="/go/build/read.go.html#6474257">r</a></span><span class="op" id="6474460">.</span><span class="ident" id="6474461">buf</span><span class="op" id="6474464">,</span>&nbsp;<span class="ident" id="6474466"><a href="/go/build/read.go.html#6474257">r</a></span><span class="op" id="6474467">.</span><span class="ident" id="6474468">err</span><br>
<span class="lineno">200</span><span class="op" id="6474472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6474475">//&nbsp;readImports&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;expects&nbsp;a&nbsp;Go&nbsp;file&nbsp;as&nbsp;input</span><br>
<span class="lineno"></span><span class="comment" id="6474556">//&nbsp;and&nbsp;stops&nbsp;reading&nbsp;the&nbsp;input&nbsp;once&nbsp;the&nbsp;imports&nbsp;have&nbsp;completed.</span><br>
<span class="lineno"></span><span class="keyword" id="6474620">func</span>&nbsp;<span class="ident" id="6474625">readImports</span><span class="op" id="6474636">(</span><span class="ident" id="6474637">f</span>&nbsp;<span class="ident" id="6474639"><a href="/go/build/read.go.html#6470312">io</a></span><span class="op" id="6474641">.</span><span class="ident" id="6474642">Reader</span><span class="op" id="6474648">,</span>&nbsp;<span class="ident" id="6474650">reportSyntaxError</span>&nbsp;<span class="builtintype" id="6474668">bool</span><span class="op" id="6474672">)</span>&nbsp;<span class="op" id="6474674">(</span><span class="op" id="6474675">[</span><span class="op" id="6474676">]</span><span class="builtintype" id="6474677">byte</span><span class="op" id="6474681">,</span>&nbsp;<span class="builtintype" id="6474683">error</span><span class="op" id="6474688">)</span>&nbsp;<span class="op" id="6474690">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474693">r</span>&nbsp;<span class="op" id="6474695">:=</span>&nbsp;<span class="op" id="6474698">&amp;</span><span class="ident" id="6474699"><a href="/go/build/read.go.html#6470325">importReader</a></span><span class="op" id="6474711">{</span><span class="ident" id="6474712">b</span><span class="op" id="6474713">:</span>&nbsp;<span class="ident" id="6474715"><a href="/go/build/read.go.html#6470293">bufio</a></span><span class="op" id="6474720">.</span><span class="ident" id="6474721">NewReader</span><span class="op" id="6474730">(</span><span class="ident" id="6474731"><a href="/go/build/read.go.html#6474637">f</a></span><span class="op" id="6474732">)</span><span class="op" id="6474733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474737"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6474738">.</span><span class="ident" id="6474739">readKeyword</span><span class="op" id="6474750">(</span><span class="string" id="6474751">&#34;package&#34;</span><span class="op" id="6474760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474763"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6474764">.</span><span class="ident" id="6474765">readIdent</span><span class="op" id="6474774">(</span><span class="op" id="6474775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474778">for</span>&nbsp;<span class="ident" id="6474782"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6474783">.</span><span class="ident" id="6474784">peekByte</span><span class="op" id="6474792">(</span><span class="builtintype" id="6474793">true</span><span class="op" id="6474797">)</span>&nbsp;<span class="op" id="6474799">==</span>&nbsp;<span class="string" id="6474802">&#39;i&#39;</span>&nbsp;<span class="op" id="6474806">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474810"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6474811">.</span><span class="ident" id="6474812">readKeyword</span><span class="op" id="6474823">(</span><span class="string" id="6474824">&#34;import&#34;</span><span class="op" id="6474832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474836">if</span>&nbsp;<span class="ident" id="6474839"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6474840">.</span><span class="ident" id="6474841">peekByte</span><span class="op" id="6474849">(</span><span class="builtintype" id="6474850">true</span><span class="op" id="6474854">)</span>&nbsp;<span class="op" id="6474856">==</span>&nbsp;<span class="string" id="6474859">&#39;(&#39;</span>&nbsp;<span class="op" id="6474863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474868"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6474869">.</span><span class="ident" id="6474870">nextByte</span><span class="op" id="6474878">(</span><span class="builtintype" id="6474879">false</span><span class="op" id="6474884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474889">for</span>&nbsp;<span class="ident" id="6474893"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6474894">.</span><span class="ident" id="6474895">peekByte</span><span class="op" id="6474903">(</span><span class="builtintype" id="6474904">true</span><span class="op" id="6474908">)</span>&nbsp;<span class="op" id="6474910">!=</span>&nbsp;<span class="string" id="6474913">&#39;)&#39;</span>&nbsp;<span class="op" id="6474917">&amp;&amp;</span>&nbsp;<span class="ident" id="6474920"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6474921">.</span><span class="ident" id="6474922">err</span>&nbsp;<span class="op" id="6474926">==</span>&nbsp;<span class="ident" id="6474929">nil</span>&nbsp;<span class="op" id="6474933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474939"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6474940">.</span><span class="ident" id="6474941">readImport</span><span class="op" id="6474951">(</span><span class="op" id="6474952">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474962"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6474963">.</span><span class="ident" id="6474964">nextByte</span><span class="op" id="6474972">(</span><span class="builtintype" id="6474973">false</span><span class="op" id="6474978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474982">}</span>&nbsp;<span class="keyword" id="6474984">else</span>&nbsp;<span class="op" id="6474989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474994"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6474995">.</span><span class="ident" id="6474996">readImport</span><span class="op" id="6475006">(</span><span class="op" id="6475007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475011">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6475018">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;successfully&nbsp;before&nbsp;EOF,&nbsp;we&nbsp;read&nbsp;a&nbsp;byte&nbsp;that&nbsp;told&nbsp;us&nbsp;we&nbsp;were&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6475103">//&nbsp;Return&nbsp;all&nbsp;but&nbsp;that&nbsp;last&nbsp;byte,&nbsp;which&nbsp;would&nbsp;cause&nbsp;a&nbsp;syntax&nbsp;error&nbsp;if&nbsp;we&nbsp;let&nbsp;it&nbsp;through.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475193">if</span>&nbsp;<span class="ident" id="6475196"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6475197">.</span><span class="ident" id="6475198">err</span>&nbsp;<span class="op" id="6475202">==</span>&nbsp;<span class="ident" id="6475205">nil</span>&nbsp;<span class="op" id="6475209">&amp;&amp;</span>&nbsp;<span class="op" id="6475212">!</span><span class="ident" id="6475213"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6475214">.</span><span class="ident" id="6475215">eof</span>&nbsp;<span class="op" id="6475219">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475223">return</span>&nbsp;<span class="ident" id="6475230"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6475231">.</span><span class="ident" id="6475232">buf</span><span class="op" id="6475235">[</span><span class="op" id="6475236">:</span><span class="builtinfunc" id="6475237">len</span><span class="op" id="6475240">(</span><span class="ident" id="6475241"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6475242">.</span><span class="ident" id="6475243">buf</span><span class="op" id="6475246">)</span><span class="op" id="6475247">-</span><span class="num" id="6475248">1</span><span class="op" id="6475249">]</span><span class="op" id="6475250">,</span>&nbsp;<span class="ident" id="6475252">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475257">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6475261">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;for&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;consume&nbsp;the&nbsp;whole&nbsp;file&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6475330">//&nbsp;we&nbsp;are&nbsp;sure&nbsp;we&nbsp;don&#39;t&nbsp;change&nbsp;the&nbsp;errors&nbsp;that&nbsp;go/parser&nbsp;returns.</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475397">if</span>&nbsp;<span class="ident" id="6475400"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6475401">.</span><span class="ident" id="6475402">err</span>&nbsp;<span class="op" id="6475406">==</span>&nbsp;<span class="ident" id="6475409"><a href="/go/build/read.go.html#6470567">errSyntax</a></span>&nbsp;<span class="op" id="6475419">&amp;&amp;</span>&nbsp;<span class="op" id="6475422">!</span><span class="ident" id="6475423"><a href="/go/build/read.go.html#6474650">reportSyntaxError</a></span>&nbsp;<span class="op" id="6475441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475445"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6475446">.</span><span class="ident" id="6475447">err</span>&nbsp;<span class="op" id="6475451">=</span>&nbsp;<span class="ident" id="6475453">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475459">for</span>&nbsp;<span class="ident" id="6475463"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6475464">.</span><span class="ident" id="6475465">err</span>&nbsp;<span class="op" id="6475469">==</span>&nbsp;<span class="ident" id="6475472">nil</span>&nbsp;<span class="op" id="6475476">&amp;&amp;</span>&nbsp;<span class="op" id="6475479">!</span><span class="ident" id="6475480"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6475481">.</span><span class="ident" id="6475482">eof</span>&nbsp;<span class="op" id="6475486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475491"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6475492">.</span><span class="ident" id="6475493">readByte</span><span class="op" id="6475501">(</span><span class="op" id="6475502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475506">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475509">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475513">return</span>&nbsp;<span class="ident" id="6475520"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6475521">.</span><span class="ident" id="6475522">buf</span><span class="op" id="6475525">,</span>&nbsp;<span class="ident" id="6475527"><a href="/go/build/read.go.html#6474693">r</a></span><span class="op" id="6475528">.</span><span class="ident" id="6475529">err</span><br>
<span class="lineno"></span><span class="op" id="6475533">}</span>
</div>
</body>
</html>
