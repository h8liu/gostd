<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2685916">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2685972">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2686026">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2686077">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2686150">package</span>&nbsp;<span class="ident" id="2686158">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2686163">import</span>&nbsp;<span class="op" id="2686170">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2686173">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2686179">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2686189">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2686192">//&nbsp;Boolean&nbsp;to&nbsp;int.</span><br>
<span class="lineno">15</span><span class="keyword" id="2686211">func</span>&nbsp;<span class="ident" id="2686216">boolint</span><span class="op" id="2686223">(</span><span class="ident" id="2686224">b</span>&nbsp;<span class="builtintype" id="2686226">bool</span><span class="op" id="2686230">)</span>&nbsp;<span class="builtintype" id="2686232">int</span>&nbsp;<span class="op" id="2686236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686239">if</span>&nbsp;<span class="ident" id="2686242"><a href="/net/sockopt_posix.go.html#2686224">b</a></span>&nbsp;<span class="op" id="2686244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686248">return</span>&nbsp;<span class="num" id="2686255">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2686258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686261">return</span>&nbsp;<span class="num" id="2686268">0</span><br>
<span class="lineno">20</span><span class="op" id="2686270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2686273">func</span>&nbsp;<span class="ident" id="2686278">ipv4AddrToInterface</span><span class="op" id="2686297">(</span><span class="ident" id="2686298">ip</span>&nbsp;<span class="ident" id="2686301"><a href="/net/ip.go.html#2604330">IP</a></span><span class="op" id="2686303">)</span>&nbsp;<span class="op" id="2686305">(</span><span class="op" id="2686306">*</span><span class="ident" id="2686307"><a href="/net/interface.go.html#2593524">Interface</a></span><span class="op" id="2686316">,</span>&nbsp;<span class="builtintype" id="2686318">error</span><span class="op" id="2686323">)</span>&nbsp;<span class="op" id="2686325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2686328">ift</span><span class="op" id="2686331">,</span>&nbsp;<span class="ident" id="2686333">err</span>&nbsp;<span class="op" id="2686337">:=</span>&nbsp;<span class="ident" id="2686340"><a href="/net/interface.go.html#2595102">Interfaces</a></span><span class="op" id="2686350">(</span><span class="op" id="2686351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686354">if</span>&nbsp;<span class="ident" id="2686357"><a href="/net/sockopt_posix.go.html#2686333">err</a></span>&nbsp;<span class="op" id="2686361">!=</span>&nbsp;<span class="ident" id="2686364">nil</span>&nbsp;<span class="op" id="2686368">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686372">return</span>&nbsp;<span class="ident" id="2686379">nil</span><span class="op" id="2686382">,</span>&nbsp;<span class="ident" id="2686384"><a href="/net/sockopt_posix.go.html#2686333">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2686389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686392">for</span>&nbsp;<span class="ident" id="2686396">_</span><span class="op" id="2686397">,</span>&nbsp;<span class="ident" id="2686399">ifi</span>&nbsp;<span class="op" id="2686403">:=</span>&nbsp;<span class="keyword" id="2686406">range</span>&nbsp;<span class="ident" id="2686412"><a href="/net/sockopt_posix.go.html#2686328">ift</a></span>&nbsp;<span class="op" id="2686416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2686420">ifat</span><span class="op" id="2686424">,</span>&nbsp;<span class="ident" id="2686426">err</span>&nbsp;<span class="op" id="2686430">:=</span>&nbsp;<span class="ident" id="2686433"><a href="/net/sockopt_posix.go.html#2686399">ifi</a></span><span class="op" id="2686436">.</span><span class="ident" id="2686437">Addrs</span><span class="op" id="2686442">(</span><span class="op" id="2686443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686447">if</span>&nbsp;<span class="ident" id="2686450"><a href="/net/sockopt_posix.go.html#2686426">err</a></span>&nbsp;<span class="op" id="2686454">!=</span>&nbsp;<span class="ident" id="2686457">nil</span>&nbsp;<span class="op" id="2686461">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686466">return</span>&nbsp;<span class="ident" id="2686473">nil</span><span class="op" id="2686476">,</span>&nbsp;<span class="ident" id="2686478"><a href="/net/sockopt_posix.go.html#2686426">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2686484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686488">for</span>&nbsp;<span class="ident" id="2686492">_</span><span class="op" id="2686493">,</span>&nbsp;<span class="ident" id="2686495">ifa</span>&nbsp;<span class="op" id="2686499">:=</span>&nbsp;<span class="keyword" id="2686502">range</span>&nbsp;<span class="ident" id="2686508"><a href="/net/sockopt_posix.go.html#2686420">ifat</a></span>&nbsp;<span class="op" id="2686513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686518">switch</span>&nbsp;<span class="ident" id="2686525">v</span>&nbsp;<span class="op" id="2686527">:=</span>&nbsp;<span class="ident" id="2686530"><a href="/net/sockopt_posix.go.html#2686495">ifa</a></span><span class="op" id="2686533">.</span><span class="op" id="2686534">(</span><span class="keyword" id="2686535">type</span><span class="op" id="2686539">)</span>&nbsp;<span class="op" id="2686541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686546">case</span>&nbsp;<span class="op" id="2686551">*</span><span class="ident" id="2686552"><a href="/net/iprawsock.go.html#2619177">IPAddr</a></span><span class="op" id="2686558">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686564">if</span>&nbsp;<span class="ident" id="2686567"><a href="/net/sockopt_posix.go.html#2686298">ip</a></span><span class="op" id="2686569">.</span><span class="ident" id="2686570">Equal</span><span class="op" id="2686575">(</span><span class="ident" id="2686576"><a href="/net/sockopt_posix.go.html#2686525">v</a></span><span class="op" id="2686577">.</span><span class="ident" id="2686578">IP</span><span class="op" id="2686580">)</span>&nbsp;<span class="op" id="2686582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686589">return</span>&nbsp;<span class="op" id="2686596">&amp;</span><span class="ident" id="2686597"><a href="/net/sockopt_posix.go.html#2686399">ifi</a></span><span class="op" id="2686600">,</span>&nbsp;<span class="ident" id="2686602">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2686610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686615">case</span>&nbsp;<span class="op" id="2686620">*</span><span class="ident" id="2686621"><a href="/net/ip.go.html#2604436">IPNet</a></span><span class="op" id="2686626">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686632">if</span>&nbsp;<span class="ident" id="2686635"><a href="/net/sockopt_posix.go.html#2686298">ip</a></span><span class="op" id="2686637">.</span><span class="ident" id="2686638">Equal</span><span class="op" id="2686643">(</span><span class="ident" id="2686644"><a href="/net/sockopt_posix.go.html#2686525">v</a></span><span class="op" id="2686645">.</span><span class="ident" id="2686646">IP</span><span class="op" id="2686648">)</span>&nbsp;<span class="op" id="2686650">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686657">return</span>&nbsp;<span class="op" id="2686664">&amp;</span><span class="ident" id="2686665"><a href="/net/sockopt_posix.go.html#2686399">ifi</a></span><span class="op" id="2686668">,</span>&nbsp;<span class="ident" id="2686670">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2686678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2686683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2686687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2686690">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686693">if</span>&nbsp;<span class="ident" id="2686696"><a href="/net/sockopt_posix.go.html#2686298">ip</a></span><span class="op" id="2686698">.</span><span class="ident" id="2686699">Equal</span><span class="op" id="2686704">(</span><span class="ident" id="2686705"><a href="/net/ip.go.html#2605716">IPv4zero</a></span><span class="op" id="2686713">)</span>&nbsp;<span class="op" id="2686715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686719">return</span>&nbsp;<span class="ident" id="2686726">nil</span><span class="op" id="2686729">,</span>&nbsp;<span class="ident" id="2686731">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2686736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686739">return</span>&nbsp;<span class="ident" id="2686746">nil</span><span class="op" id="2686749">,</span>&nbsp;<span class="ident" id="2686751"><a href="/net/interface.go.html#2593223">errNoSuchInterface</a></span><br>
<span class="lineno"></span><span class="op" id="2686770">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="2686773">func</span>&nbsp;<span class="ident" id="2686778">interfaceToIPv4Addr</span><span class="op" id="2686797">(</span><span class="ident" id="2686798">ifi</span>&nbsp;<span class="op" id="2686802">*</span><span class="ident" id="2686803"><a href="/net/interface.go.html#2593524">Interface</a></span><span class="op" id="2686812">)</span>&nbsp;<span class="op" id="2686814">(</span><span class="ident" id="2686815"><a href="/net/ip.go.html#2604330">IP</a></span><span class="op" id="2686817">,</span>&nbsp;<span class="builtintype" id="2686819">error</span><span class="op" id="2686824">)</span>&nbsp;<span class="op" id="2686826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686829">if</span>&nbsp;<span class="ident" id="2686832"><a href="/net/sockopt_posix.go.html#2686798">ifi</a></span>&nbsp;<span class="op" id="2686836">==</span>&nbsp;<span class="ident" id="2686839">nil</span>&nbsp;<span class="op" id="2686843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686847">return</span>&nbsp;<span class="ident" id="2686854"><a href="/net/ip.go.html#2605716">IPv4zero</a></span><span class="op" id="2686862">,</span>&nbsp;<span class="ident" id="2686864">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2686869">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2686872">ifat</span><span class="op" id="2686876">,</span>&nbsp;<span class="ident" id="2686878">err</span>&nbsp;<span class="op" id="2686882">:=</span>&nbsp;<span class="ident" id="2686885"><a href="/net/sockopt_posix.go.html#2686798">ifi</a></span><span class="op" id="2686888">.</span><span class="ident" id="2686889">Addrs</span><span class="op" id="2686894">(</span><span class="op" id="2686895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686898">if</span>&nbsp;<span class="ident" id="2686901"><a href="/net/sockopt_posix.go.html#2686878">err</a></span>&nbsp;<span class="op" id="2686905">!=</span>&nbsp;<span class="ident" id="2686908">nil</span>&nbsp;<span class="op" id="2686912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686916">return</span>&nbsp;<span class="ident" id="2686923">nil</span><span class="op" id="2686926">,</span>&nbsp;<span class="ident" id="2686928"><a href="/net/sockopt_posix.go.html#2686878">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2686933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686936">for</span>&nbsp;<span class="ident" id="2686940">_</span><span class="op" id="2686941">,</span>&nbsp;<span class="ident" id="2686943">ifa</span>&nbsp;<span class="op" id="2686947">:=</span>&nbsp;<span class="keyword" id="2686950">range</span>&nbsp;<span class="ident" id="2686956"><a href="/net/sockopt_posix.go.html#2686872">ifat</a></span>&nbsp;<span class="op" id="2686961">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686965">switch</span>&nbsp;<span class="ident" id="2686972">v</span>&nbsp;<span class="op" id="2686974">:=</span>&nbsp;<span class="ident" id="2686977"><a href="/net/sockopt_posix.go.html#2686943">ifa</a></span><span class="op" id="2686980">.</span><span class="op" id="2686981">(</span><span class="keyword" id="2686982">type</span><span class="op" id="2686986">)</span>&nbsp;<span class="op" id="2686988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2686992">case</span>&nbsp;<span class="op" id="2686997">*</span><span class="ident" id="2686998"><a href="/net/iprawsock.go.html#2619177">IPAddr</a></span><span class="op" id="2687004">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687009">if</span>&nbsp;<span class="ident" id="2687012"><a href="/net/sockopt_posix.go.html#2686972">v</a></span><span class="op" id="2687013">.</span><span class="ident" id="2687014">IP</span><span class="op" id="2687016">.</span><span class="ident" id="2687017">To4</span><span class="op" id="2687020">(</span><span class="op" id="2687021">)</span>&nbsp;<span class="op" id="2687023">!=</span>&nbsp;<span class="ident" id="2687026">nil</span>&nbsp;<span class="op" id="2687030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687036">return</span>&nbsp;<span class="ident" id="2687043"><a href="/net/sockopt_posix.go.html#2686972">v</a></span><span class="op" id="2687044">.</span><span class="ident" id="2687045">IP</span><span class="op" id="2687047">,</span>&nbsp;<span class="ident" id="2687049">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2687056">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687060">case</span>&nbsp;<span class="op" id="2687065">*</span><span class="ident" id="2687066"><a href="/net/ip.go.html#2604436">IPNet</a></span><span class="op" id="2687071">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687076">if</span>&nbsp;<span class="ident" id="2687079"><a href="/net/sockopt_posix.go.html#2686972">v</a></span><span class="op" id="2687080">.</span><span class="ident" id="2687081">IP</span><span class="op" id="2687083">.</span><span class="ident" id="2687084">To4</span><span class="op" id="2687087">(</span><span class="op" id="2687088">)</span>&nbsp;<span class="op" id="2687090">!=</span>&nbsp;<span class="ident" id="2687093">nil</span>&nbsp;<span class="op" id="2687097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687103">return</span>&nbsp;<span class="ident" id="2687110"><a href="/net/sockopt_posix.go.html#2686972">v</a></span><span class="op" id="2687111">.</span><span class="ident" id="2687112">IP</span><span class="op" id="2687114">,</span>&nbsp;<span class="ident" id="2687116">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2687123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2687127">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2687130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687133">return</span>&nbsp;<span class="ident" id="2687140">nil</span><span class="op" id="2687143">,</span>&nbsp;<span class="ident" id="2687145"><a href="/net/interface.go.html#2593223">errNoSuchInterface</a></span><br>
<span class="lineno"></span><span class="op" id="2687164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2687167">func</span>&nbsp;<span class="ident" id="2687172">setIPv4MreqToInterface</span><span class="op" id="2687194">(</span><span class="ident" id="2687195">mreq</span>&nbsp;<span class="op" id="2687200">*</span><span class="ident" id="2687201"><a href="/net/sockopt_posix.go.html#2686179">syscall</a></span><span class="op" id="2687208">.</span><span class="ident" id="2687209">IPMreq</span><span class="op" id="2687215">,</span>&nbsp;<span class="ident" id="2687217">ifi</span>&nbsp;<span class="op" id="2687221">*</span><span class="ident" id="2687222"><a href="/net/interface.go.html#2593524">Interface</a></span><span class="op" id="2687231">)</span>&nbsp;<span class="builtintype" id="2687233">error</span>&nbsp;<span class="op" id="2687239">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687242">if</span>&nbsp;<span class="ident" id="2687245"><a href="/net/sockopt_posix.go.html#2687217">ifi</a></span>&nbsp;<span class="op" id="2687249">==</span>&nbsp;<span class="ident" id="2687252">nil</span>&nbsp;<span class="op" id="2687256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687260">return</span>&nbsp;<span class="ident" id="2687267">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2687272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2687275">ifat</span><span class="op" id="2687279">,</span>&nbsp;<span class="ident" id="2687281">err</span>&nbsp;<span class="op" id="2687285">:=</span>&nbsp;<span class="ident" id="2687288"><a href="/net/sockopt_posix.go.html#2687217">ifi</a></span><span class="op" id="2687291">.</span><span class="ident" id="2687292">Addrs</span><span class="op" id="2687297">(</span><span class="op" id="2687298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687301">if</span>&nbsp;<span class="ident" id="2687304"><a href="/net/sockopt_posix.go.html#2687281">err</a></span>&nbsp;<span class="op" id="2687308">!=</span>&nbsp;<span class="ident" id="2687311">nil</span>&nbsp;<span class="op" id="2687315">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687319">return</span>&nbsp;<span class="ident" id="2687326"><a href="/net/sockopt_posix.go.html#2687281">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2687331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687334">for</span>&nbsp;<span class="ident" id="2687338">_</span><span class="op" id="2687339">,</span>&nbsp;<span class="ident" id="2687341">ifa</span>&nbsp;<span class="op" id="2687345">:=</span>&nbsp;<span class="keyword" id="2687348">range</span>&nbsp;<span class="ident" id="2687354"><a href="/net/sockopt_posix.go.html#2687275">ifat</a></span>&nbsp;<span class="op" id="2687359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687363">switch</span>&nbsp;<span class="ident" id="2687370">v</span>&nbsp;<span class="op" id="2687372">:=</span>&nbsp;<span class="ident" id="2687375"><a href="/net/sockopt_posix.go.html#2687341">ifa</a></span><span class="op" id="2687378">.</span><span class="op" id="2687379">(</span><span class="keyword" id="2687380">type</span><span class="op" id="2687384">)</span>&nbsp;<span class="op" id="2687386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687390">case</span>&nbsp;<span class="op" id="2687395">*</span><span class="ident" id="2687396"><a href="/net/iprawsock.go.html#2619177">IPAddr</a></span><span class="op" id="2687402">:</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687407">if</span>&nbsp;<span class="ident" id="2687410">a</span>&nbsp;<span class="op" id="2687412">:=</span>&nbsp;<span class="ident" id="2687415"><a href="/net/sockopt_posix.go.html#2687370">v</a></span><span class="op" id="2687416">.</span><span class="ident" id="2687417">IP</span><span class="op" id="2687419">.</span><span class="ident" id="2687420">To4</span><span class="op" id="2687423">(</span><span class="op" id="2687424">)</span><span class="op" id="2687425">;</span>&nbsp;<span class="ident" id="2687427"><a href="/net/sockopt_posix.go.html#2687410">a</a></span>&nbsp;<span class="op" id="2687429">!=</span>&nbsp;<span class="ident" id="2687432">nil</span>&nbsp;<span class="op" id="2687436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2687442">copy</span><span class="op" id="2687446">(</span><span class="ident" id="2687447"><a href="/net/sockopt_posix.go.html#2687195">mreq</a></span><span class="op" id="2687451">.</span><span class="ident" id="2687452">Interface</span><span class="op" id="2687461">[</span><span class="op" id="2687462">:</span><span class="op" id="2687463">]</span><span class="op" id="2687464">,</span>&nbsp;<span class="ident" id="2687466"><a href="/net/sockopt_posix.go.html#2687410">a</a></span><span class="op" id="2687467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687473">goto</span>&nbsp;<span class="ident" id="2687478">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2687486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687490">case</span>&nbsp;<span class="op" id="2687495">*</span><span class="ident" id="2687496"><a href="/net/ip.go.html#2604436">IPNet</a></span><span class="op" id="2687501">:</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687506">if</span>&nbsp;<span class="ident" id="2687509">a</span>&nbsp;<span class="op" id="2687511">:=</span>&nbsp;<span class="ident" id="2687514"><a href="/net/sockopt_posix.go.html#2687370">v</a></span><span class="op" id="2687515">.</span><span class="ident" id="2687516">IP</span><span class="op" id="2687518">.</span><span class="ident" id="2687519">To4</span><span class="op" id="2687522">(</span><span class="op" id="2687523">)</span><span class="op" id="2687524">;</span>&nbsp;<span class="ident" id="2687526"><a href="/net/sockopt_posix.go.html#2687509">a</a></span>&nbsp;<span class="op" id="2687528">!=</span>&nbsp;<span class="ident" id="2687531">nil</span>&nbsp;<span class="op" id="2687535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2687541">copy</span><span class="op" id="2687545">(</span><span class="ident" id="2687546"><a href="/net/sockopt_posix.go.html#2687195">mreq</a></span><span class="op" id="2687550">.</span><span class="ident" id="2687551">Interface</span><span class="op" id="2687560">[</span><span class="op" id="2687561">:</span><span class="op" id="2687562">]</span><span class="op" id="2687563">,</span>&nbsp;<span class="ident" id="2687565"><a href="/net/sockopt_posix.go.html#2687509">a</a></span><span class="op" id="2687566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687572">goto</span>&nbsp;<span class="ident" id="2687577">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2687585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2687589">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2687592">}</span><br>
<span class="lineno"></span><span class="ident" id="2687594">done</span><span class="op" id="2687598">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687601">if</span>&nbsp;<span class="ident" id="2687604"><a href="/net/ip.go.html#2612284">bytesEqual</a></span><span class="op" id="2687614">(</span><span class="ident" id="2687615"><a href="/net/sockopt_posix.go.html#2687195">mreq</a></span><span class="op" id="2687619">.</span><span class="ident" id="2687620">Multiaddr</span><span class="op" id="2687629">[</span><span class="op" id="2687630">:</span><span class="op" id="2687631">]</span><span class="op" id="2687632">,</span>&nbsp;<span class="ident" id="2687634"><a href="/net/ip.go.html#2605716">IPv4zero</a></span><span class="op" id="2687642">.</span><span class="ident" id="2687643">To4</span><span class="op" id="2687646">(</span><span class="op" id="2687647">)</span><span class="op" id="2687648">)</span>&nbsp;<span class="op" id="2687650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687654">return</span>&nbsp;<span class="ident" id="2687661"><a href="/net/interface.go.html#2593294">errNoSuchMulticastInterface</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2687690">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687693">return</span>&nbsp;<span class="ident" id="2687700">nil</span><br>
<span class="lineno"></span><span class="op" id="2687704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2687707">func</span>&nbsp;<span class="ident" id="2687712">setReadBuffer</span><span class="op" id="2687725">(</span><span class="ident" id="2687726">fd</span>&nbsp;<span class="op" id="2687729">*</span><span class="ident" id="2687730"><a href="/net/fd_unix.go.html#2575420">netFD</a></span><span class="op" id="2687735">,</span>&nbsp;<span class="ident" id="2687737">bytes</span>&nbsp;<span class="builtintype" id="2687743">int</span><span class="op" id="2687746">)</span>&nbsp;<span class="builtintype" id="2687748">error</span>&nbsp;<span class="op" id="2687754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687757">if</span>&nbsp;<span class="ident" id="2687760">err</span>&nbsp;<span class="op" id="2687764">:=</span>&nbsp;<span class="ident" id="2687767"><a href="/net/sockopt_posix.go.html#2687726">fd</a></span><span class="op" id="2687769">.</span><span class="ident" id="2687770">incref</span><span class="op" id="2687776">(</span><span class="op" id="2687777">)</span><span class="op" id="2687778">;</span>&nbsp;<span class="ident" id="2687780"><a href="/net/sockopt_posix.go.html#2687760">err</a></span>&nbsp;<span class="op" id="2687784">!=</span>&nbsp;<span class="ident" id="2687787">nil</span>&nbsp;<span class="op" id="2687791">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687795">return</span>&nbsp;<span class="ident" id="2687802"><a href="/net/sockopt_posix.go.html#2687760">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2687807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687810">defer</span>&nbsp;<span class="ident" id="2687816"><a href="/net/sockopt_posix.go.html#2687726">fd</a></span><span class="op" id="2687818">.</span><span class="ident" id="2687819">decref</span><span class="op" id="2687825">(</span><span class="op" id="2687826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2687829">return</span>&nbsp;<span class="ident" id="2687836"><a href="/net/sockopt_posix.go.html#2686173">os</a></span><span class="op" id="2687838">.</span><span class="ident" id="2687839">NewSyscallError</span><span class="op" id="2687854">(</span><span class="string" id="2687855">&#34;setsockopt&#34;</span><span class="op" id="2687867">,</span>&nbsp;<span class="ident" id="2687869"><a href="/net/sockopt_posix.go.html#2686179">syscall</a></span><span class="op" id="2687876">.</span><span class="ident" id="2687877">SetsockoptInt</span><span class="op" id="2687890">(</span><span class="ident" id="2687891"><a href="/net/sockopt_posix.go.html#2687726">fd</a></span><span class="op" id="2687893">.</span><span class="ident" id="2687894">sysfd</span><span class="op" id="2687899">,</span>&nbsp;<span class="ident" id="2687901"><a href="/net/sockopt_posix.go.html#2686179">syscall</a></span><span class="op" id="2687908">.</span><span class="ident" id="2687909">SOL_SOCKET</span><span class="op" id="2687919">,</span>&nbsp;<span class="ident" id="2687921"><a href="/net/sockopt_posix.go.html#2686179">syscall</a></span><span class="op" id="2687928">.</span><span class="ident" id="2687929">SO_RCVBUF</span><span class="op" id="2687938">,</span>&nbsp;<span class="ident" id="2687940"><a href="/net/sockopt_posix.go.html#2687737">bytes</a></span><span class="op" id="2687945">)</span><span class="op" id="2687946">)</span><br>
<span class="lineno"></span><span class="op" id="2687948">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="2687951">func</span>&nbsp;<span class="ident" id="2687956">setWriteBuffer</span><span class="op" id="2687970">(</span><span class="ident" id="2687971">fd</span>&nbsp;<span class="op" id="2687974">*</span><span class="ident" id="2687975"><a href="/net/fd_unix.go.html#2575420">netFD</a></span><span class="op" id="2687980">,</span>&nbsp;<span class="ident" id="2687982">bytes</span>&nbsp;<span class="builtintype" id="2687988">int</span><span class="op" id="2687991">)</span>&nbsp;<span class="builtintype" id="2687993">error</span>&nbsp;<span class="op" id="2687999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2688002">if</span>&nbsp;<span class="ident" id="2688005">err</span>&nbsp;<span class="op" id="2688009">:=</span>&nbsp;<span class="ident" id="2688012"><a href="/net/sockopt_posix.go.html#2687971">fd</a></span><span class="op" id="2688014">.</span><span class="ident" id="2688015">incref</span><span class="op" id="2688021">(</span><span class="op" id="2688022">)</span><span class="op" id="2688023">;</span>&nbsp;<span class="ident" id="2688025"><a href="/net/sockopt_posix.go.html#2688005">err</a></span>&nbsp;<span class="op" id="2688029">!=</span>&nbsp;<span class="ident" id="2688032">nil</span>&nbsp;<span class="op" id="2688036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2688040">return</span>&nbsp;<span class="ident" id="2688047"><a href="/net/sockopt_posix.go.html#2688005">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2688052">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2688055">defer</span>&nbsp;<span class="ident" id="2688061"><a href="/net/sockopt_posix.go.html#2687971">fd</a></span><span class="op" id="2688063">.</span><span class="ident" id="2688064">decref</span><span class="op" id="2688070">(</span><span class="op" id="2688071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2688074">return</span>&nbsp;<span class="ident" id="2688081"><a href="/net/sockopt_posix.go.html#2686173">os</a></span><span class="op" id="2688083">.</span><span class="ident" id="2688084">NewSyscallError</span><span class="op" id="2688099">(</span><span class="string" id="2688100">&#34;setsockopt&#34;</span><span class="op" id="2688112">,</span>&nbsp;<span class="ident" id="2688114"><a href="/net/sockopt_posix.go.html#2686179">syscall</a></span><span class="op" id="2688121">.</span><span class="ident" id="2688122">SetsockoptInt</span><span class="op" id="2688135">(</span><span class="ident" id="2688136"><a href="/net/sockopt_posix.go.html#2687971">fd</a></span><span class="op" id="2688138">.</span><span class="ident" id="2688139">sysfd</span><span class="op" id="2688144">,</span>&nbsp;<span class="ident" id="2688146"><a href="/net/sockopt_posix.go.html#2686179">syscall</a></span><span class="op" id="2688153">.</span><span class="ident" id="2688154">SOL_SOCKET</span><span class="op" id="2688164">,</span>&nbsp;<span class="ident" id="2688166"><a href="/net/sockopt_posix.go.html#2686179">syscall</a></span><span class="op" id="2688173">.</span><span class="ident" id="2688174">SO_SNDBUF</span><span class="op" id="2688183">,</span>&nbsp;<span class="ident" id="2688185"><a href="/net/sockopt_posix.go.html#2687982">bytes</a></span><span class="op" id="2688190">)</span><span class="op" id="2688191">)</span><br>
<span class="lineno"></span><span class="op" id="2688193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2688196">func</span>&nbsp;<span class="ident" id="2688201">setKeepAlive</span><span class="op" id="2688213">(</span><span class="ident" id="2688214">fd</span>&nbsp;<span class="op" id="2688217">*</span><span class="ident" id="2688218"><a href="/net/fd_unix.go.html#2575420">netFD</a></span><span class="op" id="2688223">,</span>&nbsp;<span class="ident" id="2688225">keepalive</span>&nbsp;<span class="builtintype" id="2688235">bool</span><span class="op" id="2688239">)</span>&nbsp;<span class="builtintype" id="2688241">error</span>&nbsp;<span class="op" id="2688247">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2688250">if</span>&nbsp;<span class="ident" id="2688253">err</span>&nbsp;<span class="op" id="2688257">:=</span>&nbsp;<span class="ident" id="2688260"><a href="/net/sockopt_posix.go.html#2688214">fd</a></span><span class="op" id="2688262">.</span><span class="ident" id="2688263">incref</span><span class="op" id="2688269">(</span><span class="op" id="2688270">)</span><span class="op" id="2688271">;</span>&nbsp;<span class="ident" id="2688273"><a href="/net/sockopt_posix.go.html#2688253">err</a></span>&nbsp;<span class="op" id="2688277">!=</span>&nbsp;<span class="ident" id="2688280">nil</span>&nbsp;<span class="op" id="2688284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2688288">return</span>&nbsp;<span class="ident" id="2688295"><a href="/net/sockopt_posix.go.html#2688253">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2688300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2688303">defer</span>&nbsp;<span class="ident" id="2688309"><a href="/net/sockopt_posix.go.html#2688214">fd</a></span><span class="op" id="2688311">.</span><span class="ident" id="2688312">decref</span><span class="op" id="2688318">(</span><span class="op" id="2688319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2688322">return</span>&nbsp;<span class="ident" id="2688329"><a href="/net/sockopt_posix.go.html#2686173">os</a></span><span class="op" id="2688331">.</span><span class="ident" id="2688332">NewSyscallError</span><span class="op" id="2688347">(</span><span class="string" id="2688348">&#34;setsockopt&#34;</span><span class="op" id="2688360">,</span>&nbsp;<span class="ident" id="2688362"><a href="/net/sockopt_posix.go.html#2686179">syscall</a></span><span class="op" id="2688369">.</span><span class="ident" id="2688370">SetsockoptInt</span><span class="op" id="2688383">(</span><span class="ident" id="2688384"><a href="/net/sockopt_posix.go.html#2688214">fd</a></span><span class="op" id="2688386">.</span><span class="ident" id="2688387">sysfd</span><span class="op" id="2688392">,</span>&nbsp;<span class="ident" id="2688394"><a href="/net/sockopt_posix.go.html#2686179">syscall</a></span><span class="op" id="2688401">.</span><span class="ident" id="2688402">SOL_SOCKET</span><span class="op" id="2688412">,</span>&nbsp;<span class="ident" id="2688414"><a href="/net/sockopt_posix.go.html#2686179">syscall</a></span><span class="op" id="2688421">.</span><span class="ident" id="2688422">SO_KEEPALIVE</span><span class="op" id="2688434">,</span>&nbsp;<span class="ident" id="2688436"><a href="/net/sockopt_posix.go.html#2686216">boolint</a></span><span class="op" id="2688443">(</span><span class="ident" id="2688444"><a href="/net/sockopt_posix.go.html#2688225">keepalive</a></span><span class="op" id="2688453">)</span><span class="op" id="2688454">)</span><span class="op" id="2688455">)</span><br>
<span class="lineno">125</span><span class="op" id="2688457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2688460">func</span>&nbsp;<span class="ident" id="2688465">setLinger</span><span class="op" id="2688474">(</span><span class="ident" id="2688475">fd</span>&nbsp;<span class="op" id="2688478">*</span><span class="ident" id="2688479"><a href="/net/fd_unix.go.html#2575420">netFD</a></span><span class="op" id="2688484">,</span>&nbsp;<span class="ident" id="2688486">sec</span>&nbsp;<span class="builtintype" id="2688490">int</span><span class="op" id="2688493">)</span>&nbsp;<span class="builtintype" id="2688495">error</span>&nbsp;<span class="op" id="2688501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2688504">var</span>&nbsp;<span class="ident" id="2688508">l</span>&nbsp;<span class="ident" id="2688510"><a href="/net/sockopt_posix.go.html#2686179">syscall</a></span><span class="op" id="2688517">.</span><span class="ident" id="2688518">Linger</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2688526">if</span>&nbsp;<span class="ident" id="2688529"><a href="/net/sockopt_posix.go.html#2688486">sec</a></span>&nbsp;<span class="op" id="2688533">&gt;=</span>&nbsp;<span class="num" id="2688536">0</span>&nbsp;<span class="op" id="2688538">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2688542"><a href="/net/sockopt_posix.go.html#2688508">l</a></span><span class="op" id="2688543">.</span><span class="ident" id="2688544">Onoff</span>&nbsp;<span class="op" id="2688550">=</span>&nbsp;<span class="num" id="2688552">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2688556"><a href="/net/sockopt_posix.go.html#2688508">l</a></span><span class="op" id="2688557">.</span><span class="ident" id="2688558">Linger</span>&nbsp;<span class="op" id="2688565">=</span>&nbsp;<span class="builtintype" id="2688567">int32</span><span class="op" id="2688572">(</span><span class="ident" id="2688573"><a href="/net/sockopt_posix.go.html#2688486">sec</a></span><span class="op" id="2688576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2688579">}</span>&nbsp;<span class="keyword" id="2688581">else</span>&nbsp;<span class="op" id="2688586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2688590"><a href="/net/sockopt_posix.go.html#2688508">l</a></span><span class="op" id="2688591">.</span><span class="ident" id="2688592">Onoff</span>&nbsp;<span class="op" id="2688598">=</span>&nbsp;<span class="num" id="2688600">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2688604"><a href="/net/sockopt_posix.go.html#2688508">l</a></span><span class="op" id="2688605">.</span><span class="ident" id="2688606">Linger</span>&nbsp;<span class="op" id="2688613">=</span>&nbsp;<span class="num" id="2688615">0</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2688618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2688621">if</span>&nbsp;<span class="ident" id="2688624">err</span>&nbsp;<span class="op" id="2688628">:=</span>&nbsp;<span class="ident" id="2688631"><a href="/net/sockopt_posix.go.html#2688475">fd</a></span><span class="op" id="2688633">.</span><span class="ident" id="2688634">incref</span><span class="op" id="2688640">(</span><span class="op" id="2688641">)</span><span class="op" id="2688642">;</span>&nbsp;<span class="ident" id="2688644"><a href="/net/sockopt_posix.go.html#2688624">err</a></span>&nbsp;<span class="op" id="2688648">!=</span>&nbsp;<span class="ident" id="2688651">nil</span>&nbsp;<span class="op" id="2688655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2688659">return</span>&nbsp;<span class="ident" id="2688666"><a href="/net/sockopt_posix.go.html#2688624">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2688671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2688674">defer</span>&nbsp;<span class="ident" id="2688680"><a href="/net/sockopt_posix.go.html#2688475">fd</a></span><span class="op" id="2688682">.</span><span class="ident" id="2688683">decref</span><span class="op" id="2688689">(</span><span class="op" id="2688690">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2688693">return</span>&nbsp;<span class="ident" id="2688700"><a href="/net/sockopt_posix.go.html#2686173">os</a></span><span class="op" id="2688702">.</span><span class="ident" id="2688703">NewSyscallError</span><span class="op" id="2688718">(</span><span class="string" id="2688719">&#34;setsockopt&#34;</span><span class="op" id="2688731">,</span>&nbsp;<span class="ident" id="2688733"><a href="/net/sockopt_posix.go.html#2686179">syscall</a></span><span class="op" id="2688740">.</span><span class="ident" id="2688741">SetsockoptLinger</span><span class="op" id="2688757">(</span><span class="ident" id="2688758"><a href="/net/sockopt_posix.go.html#2688475">fd</a></span><span class="op" id="2688760">.</span><span class="ident" id="2688761">sysfd</span><span class="op" id="2688766">,</span>&nbsp;<span class="ident" id="2688768"><a href="/net/sockopt_posix.go.html#2686179">syscall</a></span><span class="op" id="2688775">.</span><span class="ident" id="2688776">SOL_SOCKET</span><span class="op" id="2688786">,</span>&nbsp;<span class="ident" id="2688788"><a href="/net/sockopt_posix.go.html#2686179">syscall</a></span><span class="op" id="2688795">.</span><span class="ident" id="2688796">SO_LINGER</span><span class="op" id="2688805">,</span>&nbsp;<span class="op" id="2688807">&amp;</span><span class="ident" id="2688808"><a href="/net/sockopt_posix.go.html#2688508">l</a></span><span class="op" id="2688809">)</span><span class="op" id="2688810">)</span><br>
<span class="lineno"></span><span class="op" id="2688812">}</span>
</div>
</body>
</html>
