<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/format</h2>
<ul>
<li><a href="/gostd/go/format/format.go.html">format.go</a></li>
<li><a href="/gostd/go/format/format_test.go.html" class="current">format_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8308761">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8308816">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8308870">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8308921">package</span>&nbsp;<span class="ident" id="8308929">format</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8308937">import</span>&nbsp;<span class="op" id="8308944">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8308947">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8308956">&#34;go/parser&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8308969">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8308981">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8308994">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8309005">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8309015">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8309018">const</span>&nbsp;<span class="ident" id="8309024">testfile</span>&nbsp;<span class="op" id="8309033">=</span>&nbsp;<span class="string" id="8309035">&#34;format_test.go&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8309053">func</span>&nbsp;<span class="ident" id="8309058">diff</span><span class="op" id="8309062">(</span><span class="ident" id="8309063">t</span>&nbsp;<span class="op" id="8309065">*</span><span class="ident" id="8309066">testing</span><span class="op" id="8309073">.</span><span class="ident" id="8309074">T</span><span class="op" id="8309075">,</span>&nbsp;<span class="ident" id="8309077">dst</span><span class="op" id="8309080">,</span>&nbsp;<span class="ident" id="8309082">src</span>&nbsp;<span class="op" id="8309086">[</span><span class="op" id="8309087">]</span><span class="builtintype" id="8309088">byte</span><span class="op" id="8309092">)</span>&nbsp;<span class="op" id="8309094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309097">line</span>&nbsp;<span class="op" id="8309102">:=</span>&nbsp;<span class="num" id="8309105">1</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309108">offs</span>&nbsp;<span class="op" id="8309113">:=</span>&nbsp;<span class="num" id="8309116">0</span>&nbsp;<span class="comment" id="8309118">//&nbsp;line&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8309134">for</span>&nbsp;<span class="ident" id="8309138">i</span>&nbsp;<span class="op" id="8309140">:=</span>&nbsp;<span class="num" id="8309143">0</span><span class="op" id="8309144">;</span>&nbsp;<span class="ident" id="8309146">i</span>&nbsp;<span class="op" id="8309148">&lt;</span>&nbsp;<span class="builtinfunc" id="8309150">len</span><span class="op" id="8309153">(</span><span class="ident" id="8309154">dst</span><span class="op" id="8309157">)</span>&nbsp;<span class="op" id="8309159">&amp;&amp;</span>&nbsp;<span class="ident" id="8309162">i</span>&nbsp;<span class="op" id="8309164">&lt;</span>&nbsp;<span class="builtinfunc" id="8309166">len</span><span class="op" id="8309169">(</span><span class="ident" id="8309170">src</span><span class="op" id="8309173">)</span><span class="op" id="8309174">;</span>&nbsp;<span class="ident" id="8309176">i</span><span class="op" id="8309177">++</span>&nbsp;<span class="op" id="8309180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309184">d</span>&nbsp;<span class="op" id="8309186">:=</span>&nbsp;<span class="ident" id="8309189">dst</span><span class="op" id="8309192">[</span><span class="ident" id="8309193">i</span><span class="op" id="8309194">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309198">s</span>&nbsp;<span class="op" id="8309200">:=</span>&nbsp;<span class="ident" id="8309203">src</span><span class="op" id="8309206">[</span><span class="ident" id="8309207">i</span><span class="op" id="8309208">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8309212">if</span>&nbsp;<span class="ident" id="8309215">d</span>&nbsp;<span class="op" id="8309217">!=</span>&nbsp;<span class="ident" id="8309220">s</span>&nbsp;<span class="op" id="8309222">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309227">t</span><span class="op" id="8309228">.</span><span class="ident" id="8309229">Errorf</span><span class="op" id="8309235">(</span><span class="string" id="8309236">&#34;dst:%d:&nbsp;%s\n&#34;</span><span class="op" id="8309250">,</span>&nbsp;<span class="ident" id="8309252">line</span><span class="op" id="8309256">,</span>&nbsp;<span class="ident" id="8309258">dst</span><span class="op" id="8309261">[</span><span class="ident" id="8309262">offs</span><span class="op" id="8309266">:</span><span class="ident" id="8309267">i</span><span class="op" id="8309268">+</span><span class="num" id="8309269">1</span><span class="op" id="8309270">]</span><span class="op" id="8309271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309276">t</span><span class="op" id="8309277">.</span><span class="ident" id="8309278">Errorf</span><span class="op" id="8309284">(</span><span class="string" id="8309285">&#34;src:%d:&nbsp;%s\n&#34;</span><span class="op" id="8309299">,</span>&nbsp;<span class="ident" id="8309301">line</span><span class="op" id="8309305">,</span>&nbsp;<span class="ident" id="8309307">src</span><span class="op" id="8309310">[</span><span class="ident" id="8309311">offs</span><span class="op" id="8309315">:</span><span class="ident" id="8309316">i</span><span class="op" id="8309317">+</span><span class="num" id="8309318">1</span><span class="op" id="8309319">]</span><span class="op" id="8309320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8309325">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8309334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8309338">if</span>&nbsp;<span class="ident" id="8309341">s</span>&nbsp;<span class="op" id="8309343">==</span>&nbsp;<span class="string" id="8309346">&#39;\n&#39;</span>&nbsp;<span class="op" id="8309351">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309356">line</span><span class="op" id="8309360">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309366">offs</span>&nbsp;<span class="op" id="8309371">=</span>&nbsp;<span class="ident" id="8309373">i</span>&nbsp;<span class="op" id="8309375">+</span>&nbsp;<span class="num" id="8309377">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8309381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8309384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8309387">if</span>&nbsp;<span class="builtinfunc" id="8309390">len</span><span class="op" id="8309393">(</span><span class="ident" id="8309394">dst</span><span class="op" id="8309397">)</span>&nbsp;<span class="op" id="8309399">!=</span>&nbsp;<span class="builtinfunc" id="8309402">len</span><span class="op" id="8309405">(</span><span class="ident" id="8309406">src</span><span class="op" id="8309409">)</span>&nbsp;<span class="op" id="8309411">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309415">t</span><span class="op" id="8309416">.</span><span class="ident" id="8309417">Errorf</span><span class="op" id="8309423">(</span><span class="string" id="8309424">&#34;len(dst)&nbsp;=&nbsp;%d,&nbsp;len(src)&nbsp;=&nbsp;%d\nsrc&nbsp;=&nbsp;%q&#34;</span><span class="op" id="8309464">,</span>&nbsp;<span class="builtinfunc" id="8309466">len</span><span class="op" id="8309469">(</span><span class="ident" id="8309470">dst</span><span class="op" id="8309473">)</span><span class="op" id="8309474">,</span>&nbsp;<span class="builtinfunc" id="8309476">len</span><span class="op" id="8309479">(</span><span class="ident" id="8309480">src</span><span class="op" id="8309483">)</span><span class="op" id="8309484">,</span>&nbsp;<span class="ident" id="8309486">src</span><span class="op" id="8309489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8309492">}</span><br>
<span class="lineno"></span><span class="op" id="8309494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8309497">func</span>&nbsp;<span class="ident" id="8309502">TestNode</span><span class="op" id="8309510">(</span><span class="ident" id="8309511">t</span>&nbsp;<span class="op" id="8309513">*</span><span class="ident" id="8309514">testing</span><span class="op" id="8309521">.</span><span class="ident" id="8309522">T</span><span class="op" id="8309523">)</span>&nbsp;<span class="op" id="8309525">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309528">src</span><span class="op" id="8309531">,</span>&nbsp;<span class="ident" id="8309533">err</span>&nbsp;<span class="op" id="8309537">:=</span>&nbsp;<span class="ident" id="8309540">ioutil</span><span class="op" id="8309546">.</span><span class="ident" id="8309547">ReadFile</span><span class="op" id="8309555">(</span><span class="ident" id="8309556">testfile</span><span class="op" id="8309564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8309567">if</span>&nbsp;<span class="ident" id="8309570">err</span>&nbsp;<span class="op" id="8309574">!=</span>&nbsp;<span class="builtintype" id="8309577">nil</span>&nbsp;<span class="op" id="8309581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309585">t</span><span class="op" id="8309586">.</span><span class="ident" id="8309587">Fatal</span><span class="op" id="8309592">(</span><span class="ident" id="8309593">err</span><span class="op" id="8309596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8309599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309603">fset</span>&nbsp;<span class="op" id="8309608">:=</span>&nbsp;<span class="ident" id="8309611">token</span><span class="op" id="8309616">.</span><span class="ident" id="8309617">NewFileSet</span><span class="op" id="8309627">(</span><span class="op" id="8309628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309631">file</span><span class="op" id="8309635">,</span>&nbsp;<span class="ident" id="8309637">err</span>&nbsp;<span class="op" id="8309641">:=</span>&nbsp;<span class="ident" id="8309644">parser</span><span class="op" id="8309650">.</span><span class="ident" id="8309651">ParseFile</span><span class="op" id="8309660">(</span><span class="ident" id="8309661">fset</span><span class="op" id="8309665">,</span>&nbsp;<span class="ident" id="8309667">testfile</span><span class="op" id="8309675">,</span>&nbsp;<span class="ident" id="8309677">src</span><span class="op" id="8309680">,</span>&nbsp;<span class="ident" id="8309682">parser</span><span class="op" id="8309688">.</span><span class="ident" id="8309689">ParseComments</span><span class="op" id="8309702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8309705">if</span>&nbsp;<span class="ident" id="8309708">err</span>&nbsp;<span class="op" id="8309712">!=</span>&nbsp;<span class="builtintype" id="8309715">nil</span>&nbsp;<span class="op" id="8309719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309723">t</span><span class="op" id="8309724">.</span><span class="ident" id="8309725">Fatal</span><span class="op" id="8309730">(</span><span class="ident" id="8309731">err</span><span class="op" id="8309734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8309737">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8309741">var</span>&nbsp;<span class="ident" id="8309745">buf</span>&nbsp;<span class="ident" id="8309749">bytes</span><span class="op" id="8309754">.</span><span class="ident" id="8309755">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8309764">if</span>&nbsp;<span class="ident" id="8309767">err</span>&nbsp;<span class="op" id="8309771">=</span>&nbsp;<span class="ident" id="8309773">Node</span><span class="op" id="8309777">(</span><span class="op" id="8309778">&amp;</span><span class="ident" id="8309779">buf</span><span class="op" id="8309782">,</span>&nbsp;<span class="ident" id="8309784">fset</span><span class="op" id="8309788">,</span>&nbsp;<span class="ident" id="8309790">file</span><span class="op" id="8309794">)</span><span class="op" id="8309795">;</span>&nbsp;<span class="ident" id="8309797">err</span>&nbsp;<span class="op" id="8309801">!=</span>&nbsp;<span class="builtintype" id="8309804">nil</span>&nbsp;<span class="op" id="8309808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309812">t</span><span class="op" id="8309813">.</span><span class="ident" id="8309814">Fatal</span><span class="op" id="8309819">(</span><span class="string" id="8309820">&#34;Node&nbsp;failed:&#34;</span><span class="op" id="8309834">,</span>&nbsp;<span class="ident" id="8309836">err</span><span class="op" id="8309839">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8309842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309846">diff</span><span class="op" id="8309850">(</span><span class="ident" id="8309851">t</span><span class="op" id="8309852">,</span>&nbsp;<span class="ident" id="8309854">buf</span><span class="op" id="8309857">.</span><span class="ident" id="8309858">Bytes</span><span class="op" id="8309863">(</span><span class="op" id="8309864">)</span><span class="op" id="8309865">,</span>&nbsp;<span class="ident" id="8309867">src</span><span class="op" id="8309870">)</span><br>
<span class="lineno"></span><span class="op" id="8309872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="8309875">func</span>&nbsp;<span class="ident" id="8309880">TestSource</span><span class="op" id="8309890">(</span><span class="ident" id="8309891">t</span>&nbsp;<span class="op" id="8309893">*</span><span class="ident" id="8309894">testing</span><span class="op" id="8309901">.</span><span class="ident" id="8309902">T</span><span class="op" id="8309903">)</span>&nbsp;<span class="op" id="8309905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309908">src</span><span class="op" id="8309911">,</span>&nbsp;<span class="ident" id="8309913">err</span>&nbsp;<span class="op" id="8309917">:=</span>&nbsp;<span class="ident" id="8309920">ioutil</span><span class="op" id="8309926">.</span><span class="ident" id="8309927">ReadFile</span><span class="op" id="8309935">(</span><span class="ident" id="8309936">testfile</span><span class="op" id="8309944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8309947">if</span>&nbsp;<span class="ident" id="8309950">err</span>&nbsp;<span class="op" id="8309954">!=</span>&nbsp;<span class="builtintype" id="8309957">nil</span>&nbsp;<span class="op" id="8309961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309965">t</span><span class="op" id="8309966">.</span><span class="ident" id="8309967">Fatal</span><span class="op" id="8309972">(</span><span class="ident" id="8309973">err</span><span class="op" id="8309976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8309979">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309983">res</span><span class="op" id="8309986">,</span>&nbsp;<span class="ident" id="8309988">err</span>&nbsp;<span class="op" id="8309992">:=</span>&nbsp;<span class="ident" id="8309995">Source</span><span class="op" id="8310001">(</span><span class="ident" id="8310002">src</span><span class="op" id="8310005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8310008">if</span>&nbsp;<span class="ident" id="8310011">err</span>&nbsp;<span class="op" id="8310015">!=</span>&nbsp;<span class="builtintype" id="8310018">nil</span>&nbsp;<span class="op" id="8310022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310026">t</span><span class="op" id="8310027">.</span><span class="ident" id="8310028">Fatal</span><span class="op" id="8310033">(</span><span class="string" id="8310034">&#34;Source&nbsp;failed:&#34;</span><span class="op" id="8310050">,</span>&nbsp;<span class="ident" id="8310052">err</span><span class="op" id="8310055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8310058">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310062">diff</span><span class="op" id="8310066">(</span><span class="ident" id="8310067">t</span><span class="op" id="8310068">,</span>&nbsp;<span class="ident" id="8310070">res</span><span class="op" id="8310073">,</span>&nbsp;<span class="ident" id="8310075">src</span><span class="op" id="8310078">)</span><br>
<span class="lineno"></span><span class="op" id="8310080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8310083">//&nbsp;Test&nbsp;cases&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;fail&nbsp;are&nbsp;marked&nbsp;by&nbsp;the&nbsp;prefix&nbsp;&#34;ERROR&#34;.</span><br>
<span class="lineno">75</span><span class="keyword" id="8310157">var</span>&nbsp;<span class="ident" id="8310161">tests</span>&nbsp;<span class="op" id="8310167">=</span>&nbsp;<span class="op" id="8310169">[</span><span class="op" id="8310170">]</span><span class="builtintype" id="8310171">string</span><span class="op" id="8310177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8310180">//&nbsp;declaration&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8310202">`import&nbsp;&#34;go/format&#34;`</span><span class="op" id="8310222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8310225">&#34;var&nbsp;x&nbsp;int&#34;</span><span class="op" id="8310236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8310239">&#34;var&nbsp;x&nbsp;int\n\ntype&nbsp;T&nbsp;struct{}&#34;</span><span class="op" id="8310269">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8310273">//&nbsp;statement&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8310293">&#34;x&nbsp;:=&nbsp;0&#34;</span><span class="op" id="8310301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8310304">&#34;f(a,&nbsp;b,&nbsp;c)\nvar&nbsp;x&nbsp;int&nbsp;=&nbsp;f(1,&nbsp;2,&nbsp;3)&#34;</span><span class="op" id="8310340">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8310344">//&nbsp;indentation,&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8310388">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()&#34;</span><span class="op" id="8310408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8310411">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8310437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8310440">&#34;\n\t\t\n\n\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8310476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8310479">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8310523">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8310526">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\nfoo\n`\n\n\n&#34;</span><span class="op" id="8310583">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8310589">//&nbsp;no&nbsp;indentation&nbsp;added&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8310633">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\n\t\tfoo\n`\n\n\n&#34;</span><span class="op" id="8310694">,</span>&nbsp;<span class="comment" id="8310696">//&nbsp;no&nbsp;indentation&nbsp;removed&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8310743">//&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8310756">&#34;i&nbsp;:=&nbsp;5&nbsp;/*&nbsp;Comment&nbsp;*/&#34;</span><span class="op" id="8310778">,</span>&nbsp;<span class="comment" id="8310780">//&nbsp;Issue&nbsp;5551.</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8310797">//&nbsp;erroneous&nbsp;programs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8310820">&#34;ERROR1&nbsp;+&nbsp;2&nbsp;+&#34;</span><span class="op" id="8310834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8310837">&#34;ERRORx&nbsp;:=&nbsp;&nbsp;0&#34;</span><span class="op" id="8310851">,</span><br>
<span class="lineno"></span><span class="op" id="8310853">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="8310856">func</span>&nbsp;<span class="ident" id="8310861">String</span><span class="op" id="8310867">(</span><span class="ident" id="8310868">s</span>&nbsp;<span class="builtintype" id="8310870">string</span><span class="op" id="8310876">)</span>&nbsp;<span class="op" id="8310878">(</span><span class="builtintype" id="8310879">string</span><span class="op" id="8310885">,</span>&nbsp;<span class="builtintype" id="8310887">error</span><span class="op" id="8310892">)</span>&nbsp;<span class="op" id="8310894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310897">res</span><span class="op" id="8310900">,</span>&nbsp;<span class="ident" id="8310902">err</span>&nbsp;<span class="op" id="8310906">:=</span>&nbsp;<span class="ident" id="8310909">Source</span><span class="op" id="8310915">(</span><span class="op" id="8310916">[</span><span class="op" id="8310917">]</span><span class="builtintype" id="8310918">byte</span><span class="op" id="8310922">(</span><span class="ident" id="8310923">s</span><span class="op" id="8310924">)</span><span class="op" id="8310925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8310928">if</span>&nbsp;<span class="ident" id="8310931">err</span>&nbsp;<span class="op" id="8310935">!=</span>&nbsp;<span class="builtintype" id="8310938">nil</span>&nbsp;<span class="op" id="8310942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8310946">return</span>&nbsp;<span class="string" id="8310953">&#34;&#34;</span><span class="op" id="8310955">,</span>&nbsp;<span class="ident" id="8310957">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8310962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8310965">return</span>&nbsp;<span class="builtintype" id="8310972">string</span><span class="op" id="8310978">(</span><span class="ident" id="8310979">res</span><span class="op" id="8310982">)</span><span class="op" id="8310983">,</span>&nbsp;<span class="builtintype" id="8310985">nil</span><br>
<span class="lineno"></span><span class="op" id="8310989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8310992">func</span>&nbsp;<span class="ident" id="8310997">TestPartial</span><span class="op" id="8311008">(</span><span class="ident" id="8311009">t</span>&nbsp;<span class="op" id="8311011">*</span><span class="ident" id="8311012">testing</span><span class="op" id="8311019">.</span><span class="ident" id="8311020">T</span><span class="op" id="8311021">)</span>&nbsp;<span class="op" id="8311023">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8311026">for</span>&nbsp;<span class="ident" id="8311030">_</span><span class="op" id="8311031">,</span>&nbsp;<span class="ident" id="8311033">src</span>&nbsp;<span class="op" id="8311037">:=</span>&nbsp;<span class="keyword" id="8311040">range</span>&nbsp;<span class="ident" id="8311046">tests</span>&nbsp;<span class="op" id="8311052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8311056">if</span>&nbsp;<span class="ident" id="8311059">strings</span><span class="op" id="8311066">.</span><span class="ident" id="8311067">HasPrefix</span><span class="op" id="8311076">(</span><span class="ident" id="8311077">src</span><span class="op" id="8311080">,</span>&nbsp;<span class="string" id="8311082">&#34;ERROR&#34;</span><span class="op" id="8311089">)</span>&nbsp;<span class="op" id="8311091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8311096">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;fail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311124">src</span>&nbsp;<span class="op" id="8311128">=</span>&nbsp;<span class="ident" id="8311130">src</span><span class="op" id="8311133">[</span><span class="num" id="8311134">5</span><span class="op" id="8311135">:</span><span class="op" id="8311136">]</span>&nbsp;<span class="comment" id="8311138">//&nbsp;remove&nbsp;ERROR&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311164">res</span><span class="op" id="8311167">,</span>&nbsp;<span class="ident" id="8311169">err</span>&nbsp;<span class="op" id="8311173">:=</span>&nbsp;<span class="ident" id="8311176">String</span><span class="op" id="8311182">(</span><span class="ident" id="8311183">src</span><span class="op" id="8311186">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8311191">if</span>&nbsp;<span class="ident" id="8311194">err</span>&nbsp;<span class="op" id="8311198">==</span>&nbsp;<span class="builtintype" id="8311201">nil</span>&nbsp;<span class="op" id="8311205">&amp;&amp;</span>&nbsp;<span class="ident" id="8311208">res</span>&nbsp;<span class="op" id="8311212">==</span>&nbsp;<span class="ident" id="8311215">src</span>&nbsp;<span class="op" id="8311219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311225">t</span><span class="op" id="8311226">.</span><span class="ident" id="8311227">Errorf</span><span class="op" id="8311233">(</span><span class="string" id="8311234">&#34;formatting&nbsp;succeeded&nbsp;but&nbsp;was&nbsp;expected&nbsp;to&nbsp;fail:\n%q&#34;</span><span class="op" id="8311286">,</span>&nbsp;<span class="ident" id="8311288">src</span><span class="op" id="8311291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8311296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8311300">}</span>&nbsp;<span class="keyword" id="8311302">else</span>&nbsp;<span class="op" id="8311307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8311312">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;succeed</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311343">res</span><span class="op" id="8311346">,</span>&nbsp;<span class="ident" id="8311348">err</span>&nbsp;<span class="op" id="8311352">:=</span>&nbsp;<span class="ident" id="8311355">String</span><span class="op" id="8311361">(</span><span class="ident" id="8311362">src</span><span class="op" id="8311365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8311370">if</span>&nbsp;<span class="ident" id="8311373">err</span>&nbsp;<span class="op" id="8311377">!=</span>&nbsp;<span class="builtintype" id="8311380">nil</span>&nbsp;<span class="op" id="8311384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311390">t</span><span class="op" id="8311391">.</span><span class="ident" id="8311392">Errorf</span><span class="op" id="8311398">(</span><span class="string" id="8311399">&#34;formatting&nbsp;failed&nbsp;(%s):\n%q&#34;</span><span class="op" id="8311428">,</span>&nbsp;<span class="ident" id="8311430">err</span><span class="op" id="8311433">,</span>&nbsp;<span class="ident" id="8311435">src</span><span class="op" id="8311438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8311443">}</span>&nbsp;<span class="keyword" id="8311445">else</span>&nbsp;<span class="keyword" id="8311450">if</span>&nbsp;<span class="ident" id="8311453">res</span>&nbsp;<span class="op" id="8311457">!=</span>&nbsp;<span class="ident" id="8311460">src</span>&nbsp;<span class="op" id="8311464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311470">t</span><span class="op" id="8311471">.</span><span class="ident" id="8311472">Errorf</span><span class="op" id="8311478">(</span><span class="string" id="8311479">&#34;formatting&nbsp;incorrect:\nsource:&nbsp;%q\nresult:&nbsp;%q&#34;</span><span class="op" id="8311526">,</span>&nbsp;<span class="ident" id="8311528">src</span><span class="op" id="8311531">,</span>&nbsp;<span class="ident" id="8311533">res</span><span class="op" id="8311536">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8311541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8311545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8311548">}</span><br>
<span class="lineno"></span><span class="op" id="8311550">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
