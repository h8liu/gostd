<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1415610">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1415665">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1415719">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1415770">package</span>&nbsp;<span class="ident" id="1415778">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1415784">//&nbsp;The&nbsp;original&nbsp;C&nbsp;code,&nbsp;the&nbsp;long&nbsp;comment,&nbsp;and&nbsp;the&nbsp;constants</span><br>
<span class="lineno"></span><span class="comment" id="1415844">//&nbsp;below&nbsp;are&nbsp;from&nbsp;FreeBSD&#39;s&nbsp;/usr/src/lib/msun/src/e_acosh.c</span><br>
<span class="lineno"></span><span class="comment" id="1415904">//&nbsp;and&nbsp;came&nbsp;with&nbsp;this&nbsp;notice.&nbsp;&nbsp;The&nbsp;go&nbsp;code&nbsp;is&nbsp;a&nbsp;simplified</span><br>
<span class="lineno">10</span><span class="comment" id="1415963">//&nbsp;version&nbsp;of&nbsp;the&nbsp;original&nbsp;C.</span><br>
<span class="lineno"></span><span class="comment" id="1415993">//</span><br>
<span class="lineno"></span><span class="comment" id="1415996">//&nbsp;====================================================</span><br>
<span class="lineno"></span><span class="comment" id="1416052">//&nbsp;Copyright&nbsp;(C)&nbsp;1993&nbsp;by&nbsp;Sun&nbsp;Microsystems,&nbsp;Inc.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1416121">//</span><br>
<span class="lineno">15</span><span class="comment" id="1416124">//&nbsp;Developed&nbsp;at&nbsp;SunPro,&nbsp;a&nbsp;Sun&nbsp;Microsystems,&nbsp;Inc.&nbsp;business.</span><br>
<span class="lineno"></span><span class="comment" id="1416183">//&nbsp;Permission&nbsp;to&nbsp;use,&nbsp;copy,&nbsp;modify,&nbsp;and&nbsp;distribute&nbsp;this</span><br>
<span class="lineno"></span><span class="comment" id="1416239">//&nbsp;software&nbsp;is&nbsp;freely&nbsp;granted,&nbsp;provided&nbsp;that&nbsp;this&nbsp;notice</span><br>
<span class="lineno"></span><span class="comment" id="1416296">//&nbsp;is&nbsp;preserved.</span><br>
<span class="lineno"></span><span class="comment" id="1416313">//&nbsp;====================================================</span><br>
<span class="lineno">20</span><span class="comment" id="1416369">//</span><br>
<span class="lineno"></span><span class="comment" id="1416372">//</span><br>
<span class="lineno"></span><span class="comment" id="1416375">//&nbsp;__ieee754_acosh(x)</span><br>
<span class="lineno"></span><span class="comment" id="1416397">//&nbsp;Method&nbsp;:</span><br>
<span class="lineno"></span><span class="comment" id="1416409">//&nbsp;&nbsp;&nbsp;&nbspBased&nbsp;on</span><br>
<span class="lineno">25</span><span class="comment" id="1416421">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acosh(x)&nbsp;=&nbsp;log&nbsp;[&nbsp;x&nbsp;+&nbsp;sqrt(x*x-1)&nbsp;]</span><br>
<span class="lineno"></span><span class="comment" id="1416467">//&nbsp;&nbsp;&nbsp;&nbspwe&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="1416478">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acosh(x)&nbsp;:=&nbsp;log(x)+ln2,&nbsp;&nbsp;&nbsp;&nbspif&nbsp;x&nbsp;is&nbsp;large;&nbsp;else</span><br>
<span class="lineno"></span><span class="comment" id="1416533">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acosh(x)&nbsp;:=&nbsp;log(2x-1/(sqrt(x*x-1)+x))&nbsp;if&nbsp;x&gt;2;&nbsp;else</span><br>
<span class="lineno"></span><span class="comment" id="1416595">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acosh(x)&nbsp;:=&nbsp;log1p(t+sqrt(2.0*t+t*t));&nbsp;where&nbsp;t=x-1.</span><br>
<span class="lineno">30</span><span class="comment" id="1416657">//</span><br>
<span class="lineno"></span><span class="comment" id="1416660">//&nbsp;Special&nbsp;cases:</span><br>
<span class="lineno"></span><span class="comment" id="1416678">//&nbsp;&nbsp;&nbsp;&nbspacosh(x)&nbsp;is&nbsp;NaN&nbsp;with&nbsp;signal&nbsp;if&nbsp;x&lt;1.</span><br>
<span class="lineno"></span><span class="comment" id="1416717">//&nbsp;&nbsp;&nbsp;&nbspacosh(NaN)&nbsp;is&nbsp;NaN&nbsp;without&nbsp;signal.</span><br>
<span class="lineno"></span><span class="comment" id="1416754">//</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="1416758">//&nbsp;Acosh&nbsp;returns&nbsp;the&nbsp;inverse&nbsp;hyperbolic&nbsp;cosine&nbsp;of&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="1416811">//</span><br>
<span class="lineno"></span><span class="comment" id="1416814">//&nbsp;Special&nbsp;cases&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="1416836">//&nbsp;&nbsp;&nbsp;&nbspAcosh(+Inf)&nbsp;=&nbsp;+Inf</span><br>
<span class="lineno">40</span><span class="comment" id="1416858">//&nbsp;&nbsp;&nbsp;&nbspAcosh(x)&nbsp;=&nbsp;NaN&nbsp;if&nbsp;x&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="1416885">//&nbsp;&nbsp;&nbsp;&nbspAcosh(NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="keyword" id="1416905">func</span>&nbsp;<span class="ident" id="1416910">Acosh</span><span class="op" id="1416915">(</span><span class="ident" id="1416916">x</span>&nbsp;<span class="builtintype" id="1416918">float64</span><span class="op" id="1416925">)</span>&nbsp;<span class="builtintype" id="1416927">float64</span>&nbsp;<span class="op" id="1416935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1416938">const</span>&nbsp;<span class="op" id="1416944">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1416948">Ln2</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1416954">=</span>&nbsp;<span class="num" id="1416956">6.93147180559945286227e-01</span>&nbsp;<span class="comment" id="1416983">//&nbsp;0x3FE62E42FEFA39EF</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1417007">Large</span>&nbsp;<span class="op" id="1417013">=</span>&nbsp;<span class="num" id="1417015">1</span>&nbsp;<span class="op" id="1417017">&lt;&lt;</span>&nbsp;<span class="num" id="1417020">28</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1417042">//&nbsp;2**28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1417052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1417055">//&nbsp;first&nbsp;case&nbsp;is&nbsp;special&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1417086">switch</span>&nbsp;<span class="op" id="1417093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1417096">case</span>&nbsp;<span class="ident" id="1417101"><a href="/math/acosh.go.html#1416916">x</a></span>&nbsp;<span class="op" id="1417103">&lt;</span>&nbsp;<span class="num" id="1417105">1</span>&nbsp;<span class="op" id="1417107">||</span>&nbsp;<span class="ident" id="1417110"><a href="/math/bits.go.html#1427394">IsNaN</a></span><span class="op" id="1417115">(</span><span class="ident" id="1417116"><a href="/math/acosh.go.html#1416916">x</a></span><span class="op" id="1417117">)</span><span class="op" id="1417118">:</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1417122">return</span>&nbsp;<span class="ident" id="1417129"><a href="/math/bits.go.html#1427274">NaN</a></span><span class="op" id="1417132">(</span><span class="op" id="1417133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1417136">case</span>&nbsp;<span class="ident" id="1417141"><a href="/math/acosh.go.html#1416916">x</a></span>&nbsp;<span class="op" id="1417143">==</span>&nbsp;<span class="num" id="1417146">1</span><span class="op" id="1417147">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1417151">return</span>&nbsp;<span class="num" id="1417158">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1417161">case</span>&nbsp;<span class="ident" id="1417166"><a href="/math/acosh.go.html#1416916">x</a></span>&nbsp;<span class="op" id="1417168">&gt;=</span>&nbsp;<span class="ident" id="1417171"><a href="/math/acosh.go.html#1417007">Large</a></span><span class="op" id="1417176">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1417180">return</span>&nbsp;<span class="ident" id="1417187"><a href="/math/log.go.html#1516693">Log</a></span><span class="op" id="1417190">(</span><span class="ident" id="1417191"><a href="/math/acosh.go.html#1416916">x</a></span><span class="op" id="1417192">)</span>&nbsp;<span class="op" id="1417194">+</span>&nbsp;<span class="ident" id="1417196"><a href="/math/acosh.go.html#1416948">Ln2</a></span>&nbsp;<span class="comment" id="1417200">//&nbsp;x&nbsp;&gt;&nbsp;2**28</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1417214">case</span>&nbsp;<span class="ident" id="1417219"><a href="/math/acosh.go.html#1416916">x</a></span>&nbsp;<span class="op" id="1417221">&gt;</span>&nbsp;<span class="num" id="1417223">2</span><span class="op" id="1417224">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1417228">return</span>&nbsp;<span class="ident" id="1417235"><a href="/math/log.go.html#1516693">Log</a></span><span class="op" id="1417238">(</span><span class="num" id="1417239">2</span><span class="op" id="1417240">*</span><span class="ident" id="1417241"><a href="/math/acosh.go.html#1416916">x</a></span>&nbsp;<span class="op" id="1417243">-</span>&nbsp;<span class="num" id="1417245">1</span><span class="op" id="1417246">/</span><span class="op" id="1417247">(</span><span class="ident" id="1417248"><a href="/math/acosh.go.html#1416916">x</a></span><span class="op" id="1417249">+</span><span class="ident" id="1417250"><a href="/math/sqrt.go.html#1548013">Sqrt</a></span><span class="op" id="1417254">(</span><span class="ident" id="1417255"><a href="/math/acosh.go.html#1416916">x</a></span><span class="op" id="1417256">*</span><span class="ident" id="1417257"><a href="/math/acosh.go.html#1416916">x</a></span><span class="op" id="1417258">-</span><span class="num" id="1417259">1</span><span class="op" id="1417260">)</span><span class="op" id="1417261">)</span><span class="op" id="1417262">)</span>&nbsp;<span class="comment" id="1417264">//&nbsp;2**28&nbsp;&gt;&nbsp;x&nbsp;&gt;&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1417282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1417285">t</span>&nbsp;<span class="op" id="1417287">:=</span>&nbsp;<span class="ident" id="1417290"><a href="/math/acosh.go.html#1416916">x</a></span>&nbsp;<span class="op" id="1417292">-</span>&nbsp;<span class="num" id="1417294">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1417297">return</span>&nbsp;<span class="ident" id="1417304"><a href="/math/log1p.go.html#1522074">Log1p</a></span><span class="op" id="1417309">(</span><span class="ident" id="1417310"><a href="/math/acosh.go.html#1417285">t</a></span>&nbsp;<span class="op" id="1417312">+</span>&nbsp;<span class="ident" id="1417314"><a href="/math/sqrt.go.html#1548013">Sqrt</a></span><span class="op" id="1417318">(</span><span class="num" id="1417319">2</span><span class="op" id="1417320">*</span><span class="ident" id="1417321"><a href="/math/acosh.go.html#1417285">t</a></span><span class="op" id="1417322">+</span><span class="ident" id="1417323"><a href="/math/acosh.go.html#1417285">t</a></span><span class="op" id="1417324">*</span><span class="ident" id="1417325"><a href="/math/acosh.go.html#1417285">t</a></span><span class="op" id="1417326">)</span><span class="op" id="1417327">)</span>&nbsp;<span class="comment" id="1417329">//&nbsp;2&nbsp;&gt;=&nbsp;x&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno">60</span><span class="op" id="1417343">}</span>
</div>
</body>
</html>
