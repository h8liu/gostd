<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/zip</h2>
<ul>
<li><a href="/gostd/archive/zip/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/zip/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/zip/reader_test.go.html" class="current">reader_test.go</a></li>
<li><a href="/gostd/archive/zip/register.go.html">register.go</a></li>
<li><a href="/gostd/archive/zip/struct.go.html">struct.go</a></li>
<li><a href="/gostd/archive/zip/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/zip/writer_test.go.html">writer_test.go</a></li>
<li><a href="/gostd/archive/zip/zip_test.go.html">zip_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6942894">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6942949">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6943003">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6943054">package</span>&nbsp;<span class="ident" id="6943062">zip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6943067">import</span>&nbsp;<span class="op" id="6943074">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6943077">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6943086">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6943105">&#34;encoding/hex&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6943121">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6943127">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6943140">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6943146">&#34;path/filepath&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6943163">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6943173">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6943184">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6943195">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6943202">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6943205">type</span>&nbsp;<span class="ident" id="6943210">ZipTest</span>&nbsp;<span class="keyword" id="6943218">struct</span>&nbsp;<span class="op" id="6943225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943228">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6943236">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943244">Source</span>&nbsp;&nbsp;<span class="keyword" id="6943252">func</span><span class="op" id="6943256">(</span><span class="op" id="6943257">)</span>&nbsp;<span class="op" id="6943259">(</span><span class="ident" id="6943260">r</span>&nbsp;<span class="ident" id="6943262">io</span><span class="op" id="6943264">.</span><span class="ident" id="6943265">ReaderAt</span><span class="op" id="6943273">,</span>&nbsp;<span class="ident" id="6943275">size</span>&nbsp;<span class="ident" id="6943280">int64</span><span class="op" id="6943285">)</span>&nbsp;<span class="comment" id="6943287">//&nbsp;if&nbsp;non-nil,&nbsp;used&nbsp;instead&nbsp;of&nbsp;testdata/&lt;Name&gt;&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943340">Comment</span>&nbsp;<span class="builtintype" id="6943348">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943356">File</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6943364">[</span><span class="op" id="6943365">]</span><span class="ident" id="6943366">ZipTestFile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943379">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6943387">error</span>&nbsp;<span class="comment" id="6943393">//&nbsp;the&nbsp;error&nbsp;that&nbsp;Opening&nbsp;this&nbsp;file&nbsp;should&nbsp;return</span><br>
<span class="lineno"></span><span class="op" id="6943443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6943446">type</span>&nbsp;<span class="ident" id="6943451">ZipTestFile</span>&nbsp;<span class="keyword" id="6943463">struct</span>&nbsp;<span class="op" id="6943470">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943473">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6943484">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943492">Content</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6943503">[</span><span class="op" id="6943504">]</span><span class="builtintype" id="6943505">byte</span>&nbsp;<span class="comment" id="6943510">//&nbsp;if&nbsp;blank,&nbsp;will&nbsp;attempt&nbsp;to&nbsp;compare&nbsp;against&nbsp;File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943561">ContentErr</span>&nbsp;<span class="builtintype" id="6943572">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943579">File</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6943590">string</span>&nbsp;<span class="comment" id="6943597">//&nbsp;name&nbsp;of&nbsp;file&nbsp;to&nbsp;compare&nbsp;to&nbsp;(relative&nbsp;to&nbsp;testdata/)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943652">Mtime</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6943663">string</span>&nbsp;<span class="comment" id="6943670">//&nbsp;modified&nbsp;time&nbsp;in&nbsp;format&nbsp;&#34;mm-dd-yy&nbsp;hh:mm:ss&#34;</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943718">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943729">os</span><span class="op" id="6943731">.</span><span class="ident" id="6943732">FileMode</span><br>
<span class="lineno"></span><span class="op" id="6943741">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6943744">//&nbsp;Caution:&nbsp;The&nbsp;Mtime&nbsp;values&nbsp;found&nbsp;for&nbsp;the&nbsp;test&nbsp;files&nbsp;should&nbsp;correspond&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6943819">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;values&nbsp;listed&nbsp;with&nbsp;unzip&nbsp;-l&nbsp;&lt;zipfile&gt;.&nbsp;However,&nbsp;the&nbsp;values</span><br>
<span class="lineno">40</span><span class="comment" id="6943894">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listed&nbsp;by&nbsp;unzip&nbsp;appear&nbsp;to&nbsp;be&nbsp;off&nbsp;by&nbsp;some&nbsp;hours.&nbsp;When&nbsp;creating</span><br>
<span class="lineno"></span><span class="comment" id="6943968">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fresh&nbsp;test&nbsp;files&nbsp;and&nbsp;testing&nbsp;them,&nbsp;this&nbsp;issue&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="comment" id="6944042">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;test&nbsp;files&nbsp;were&nbsp;created&nbsp;in&nbsp;Sydney,&nbsp;so&nbsp;there&nbsp;might&nbsp;be&nbsp;a&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="6944118">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zone&nbsp;issue.&nbsp;The&nbsp;time&nbsp;zone&nbsp;information&nbsp;does&nbsp;have&nbsp;to&nbsp;be&nbsp;encoded</span><br>
<span class="lineno"></span><span class="comment" id="6944192">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;somewhere,&nbsp;because&nbsp;otherwise&nbsp;unzip&nbsp;-l&nbsp;could&nbsp;not&nbsp;provide&nbsp;a&nbsp;different</span><br>
<span class="lineno">45</span><span class="comment" id="6944272">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;from&nbsp;what&nbsp;the&nbsp;archive/zip&nbsp;package&nbsp;provides,&nbsp;but&nbsp;there&nbsp;appears</span><br>
<span class="lineno"></span><span class="comment" id="6944351">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;be&nbsp;no&nbsp;documentation&nbsp;about&nbsp;this.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6944399">var</span>&nbsp;<span class="ident" id="6944403">tests</span>&nbsp;<span class="op" id="6944409">=</span>&nbsp;<span class="op" id="6944411">[</span><span class="op" id="6944412">]</span><span class="ident" id="6944413">ZipTest</span><span class="op" id="6944420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944423">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944427">Name</span><span class="op" id="6944431">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6944436">&#34;test.zip&#34;</span><span class="op" id="6944446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944450">Comment</span><span class="op" id="6944457">:</span>&nbsp;<span class="string" id="6944459">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="6944487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944491">File</span><span class="op" id="6944495">:</span>&nbsp;<span class="op" id="6944497">[</span><span class="op" id="6944498">]</span><span class="ident" id="6944499">ZipTestFile</span><span class="op" id="6944510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944521">Name</span><span class="op" id="6944525">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6944530">&#34;test.txt&#34;</span><span class="op" id="6944540">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944546">Content</span><span class="op" id="6944553">:</span>&nbsp;<span class="op" id="6944555">[</span><span class="op" id="6944556">]</span><span class="builtintype" id="6944557">byte</span><span class="op" id="6944561">(</span><span class="string" id="6944562">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="6944591">)</span><span class="op" id="6944592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944598">Mtime</span><span class="op" id="6944603">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6944607">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="6944626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944632">Mode</span><span class="op" id="6944636">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6944641">0644</span><span class="op" id="6944645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944650">}</span><span class="op" id="6944651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944656">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944662">Name</span><span class="op" id="6944666">:</span>&nbsp;&nbsp;<span class="string" id="6944669">&#34;gophercolor16x16.png&#34;</span><span class="op" id="6944691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944697">File</span><span class="op" id="6944701">:</span>&nbsp;&nbsp;<span class="string" id="6944704">&#34;gophercolor16x16.png&#34;</span><span class="op" id="6944726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944732">Mtime</span><span class="op" id="6944737">:</span>&nbsp;<span class="string" id="6944739">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="6944758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944764">Mode</span><span class="op" id="6944768">:</span>&nbsp;&nbsp;<span class="num" id="6944771">0644</span><span class="op" id="6944775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944780">}</span><span class="op" id="6944781">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944785">}</span><span class="op" id="6944786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944789">}</span><span class="op" id="6944790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944797">Name</span><span class="op" id="6944801">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6944806">&#34;test-trailing-junk.zip&#34;</span><span class="op" id="6944830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944834">Comment</span><span class="op" id="6944841">:</span>&nbsp;<span class="string" id="6944843">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="6944871">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944875">File</span><span class="op" id="6944879">:</span>&nbsp;<span class="op" id="6944881">[</span><span class="op" id="6944882">]</span><span class="ident" id="6944883">ZipTestFile</span><span class="op" id="6944894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944905">Name</span><span class="op" id="6944909">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6944914">&#34;test.txt&#34;</span><span class="op" id="6944924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944930">Content</span><span class="op" id="6944937">:</span>&nbsp;<span class="op" id="6944939">[</span><span class="op" id="6944940">]</span><span class="builtintype" id="6944941">byte</span><span class="op" id="6944945">(</span><span class="string" id="6944946">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="6944975">)</span><span class="op" id="6944976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944982">Mtime</span><span class="op" id="6944987">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6944991">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="6945010">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945016">Mode</span><span class="op" id="6945020">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6945025">0644</span><span class="op" id="6945029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945034">}</span><span class="op" id="6945035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945046">Name</span><span class="op" id="6945050">:</span>&nbsp;&nbsp;<span class="string" id="6945053">&#34;gophercolor16x16.png&#34;</span><span class="op" id="6945075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945081">File</span><span class="op" id="6945085">:</span>&nbsp;&nbsp;<span class="string" id="6945088">&#34;gophercolor16x16.png&#34;</span><span class="op" id="6945110">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945116">Mtime</span><span class="op" id="6945121">:</span>&nbsp;<span class="string" id="6945123">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="6945142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945148">Mode</span><span class="op" id="6945152">:</span>&nbsp;&nbsp;<span class="num" id="6945155">0644</span><span class="op" id="6945159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945164">}</span><span class="op" id="6945165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945169">}</span><span class="op" id="6945170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945173">}</span><span class="op" id="6945174">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945181">Name</span><span class="op" id="6945185">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6945189">&#34;r.zip&#34;</span><span class="op" id="6945196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945200">Source</span><span class="op" id="6945206">:</span>&nbsp;<span class="ident" id="6945208">returnRecursiveZip</span><span class="op" id="6945226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945230">File</span><span class="op" id="6945234">:</span>&nbsp;<span class="op" id="6945236">[</span><span class="op" id="6945237">]</span><span class="ident" id="6945238">ZipTestFile</span><span class="op" id="6945249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945254">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945260">Name</span><span class="op" id="6945264">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6945269">&#34;r/r.zip&#34;</span><span class="op" id="6945278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945284">Content</span><span class="op" id="6945291">:</span>&nbsp;<span class="ident" id="6945293">rZipBytes</span><span class="op" id="6945302">(</span><span class="op" id="6945303">)</span><span class="op" id="6945304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945310">Mtime</span><span class="op" id="6945315">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6945319">&#34;03-04-10&nbsp;00:24:16&#34;</span><span class="op" id="6945338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945344">Mode</span><span class="op" id="6945348">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6945353">0666</span><span class="op" id="6945357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945362">}</span><span class="op" id="6945363">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945367">}</span><span class="op" id="6945368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945371">}</span><span class="op" id="6945372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945379">Name</span><span class="op" id="6945383">:</span>&nbsp;<span class="string" id="6945385">&#34;symlink.zip&#34;</span><span class="op" id="6945398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945402">File</span><span class="op" id="6945406">:</span>&nbsp;<span class="op" id="6945408">[</span><span class="op" id="6945409">]</span><span class="ident" id="6945410">ZipTestFile</span><span class="op" id="6945421">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945432">Name</span><span class="op" id="6945436">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6945441">&#34;symlink&#34;</span><span class="op" id="6945450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945456">Content</span><span class="op" id="6945463">:</span>&nbsp;<span class="op" id="6945465">[</span><span class="op" id="6945466">]</span><span class="builtintype" id="6945467">byte</span><span class="op" id="6945471">(</span><span class="string" id="6945472">&#34;../target&#34;</span><span class="op" id="6945483">)</span><span class="op" id="6945484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945490">Mode</span><span class="op" id="6945494">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6945499">0777</span>&nbsp;<span class="op" id="6945504">|</span>&nbsp;<span class="ident" id="6945506">os</span><span class="op" id="6945508">.</span><span class="ident" id="6945509">ModeSymlink</span><span class="op" id="6945520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945525">}</span><span class="op" id="6945526">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945530">}</span><span class="op" id="6945531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945534">}</span><span class="op" id="6945535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945542">Name</span><span class="op" id="6945546">:</span>&nbsp;<span class="string" id="6945548">&#34;readme.zip&#34;</span><span class="op" id="6945560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945563">}</span><span class="op" id="6945564">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945571">Name</span><span class="op" id="6945575">:</span>&nbsp;&nbsp;<span class="string" id="6945578">&#34;readme.notzip&#34;</span><span class="op" id="6945593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945597">Error</span><span class="op" id="6945602">:</span>&nbsp;<span class="ident" id="6945604">ErrFormat</span><span class="op" id="6945613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945616">}</span><span class="op" id="6945617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945620">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945624">Name</span><span class="op" id="6945628">:</span>&nbsp;<span class="string" id="6945630">&#34;dd.zip&#34;</span><span class="op" id="6945638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945642">File</span><span class="op" id="6945646">:</span>&nbsp;<span class="op" id="6945648">[</span><span class="op" id="6945649">]</span><span class="ident" id="6945650">ZipTestFile</span><span class="op" id="6945661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945672">Name</span><span class="op" id="6945676">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6945681">&#34;filename&#34;</span><span class="op" id="6945691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945697">Content</span><span class="op" id="6945704">:</span>&nbsp;<span class="op" id="6945706">[</span><span class="op" id="6945707">]</span><span class="builtintype" id="6945708">byte</span><span class="op" id="6945712">(</span><span class="string" id="6945713">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;textfile.\n&#34;</span><span class="op" id="6945741">)</span><span class="op" id="6945742">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945748">Mtime</span><span class="op" id="6945753">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6945757">&#34;02-02-11&nbsp;13:06:20&#34;</span><span class="op" id="6945776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945782">Mode</span><span class="op" id="6945786">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6945791">0666</span><span class="op" id="6945795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945800">}</span><span class="op" id="6945801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945805">}</span><span class="op" id="6945806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945809">}</span><span class="op" id="6945810">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6945817">//&nbsp;created&nbsp;in&nbsp;windows&nbsp;XP&nbsp;file&nbsp;manager.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945858">Name</span><span class="op" id="6945862">:</span>&nbsp;<span class="string" id="6945864">&#34;winxp.zip&#34;</span><span class="op" id="6945875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945879">File</span><span class="op" id="6945883">:</span>&nbsp;<span class="ident" id="6945885">crossPlatform</span><span class="op" id="6945898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945901">}</span><span class="op" id="6945902">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6945909">//&nbsp;created&nbsp;by&nbsp;Zip&nbsp;3.0&nbsp;under&nbsp;Linux</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945945">Name</span><span class="op" id="6945949">:</span>&nbsp;<span class="string" id="6945951">&#34;unix.zip&#34;</span><span class="op" id="6945961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945965">File</span><span class="op" id="6945969">:</span>&nbsp;<span class="ident" id="6945971">crossPlatform</span><span class="op" id="6945984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945987">}</span><span class="op" id="6945988">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6945995">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;before&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6946051">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946107">Name</span><span class="op" id="6946111">:</span>&nbsp;<span class="string" id="6946113">&#34;go-no-datadesc-sig.zip&#34;</span><span class="op" id="6946137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946141">File</span><span class="op" id="6946145">:</span>&nbsp;<span class="op" id="6946147">[</span><span class="op" id="6946148">]</span><span class="ident" id="6946149">ZipTestFile</span><span class="op" id="6946160">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946171">Name</span><span class="op" id="6946175">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6946180">&#34;foo.txt&#34;</span><span class="op" id="6946189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946195">Content</span><span class="op" id="6946202">:</span>&nbsp;<span class="op" id="6946204">[</span><span class="op" id="6946205">]</span><span class="builtintype" id="6946206">byte</span><span class="op" id="6946210">(</span><span class="string" id="6946211">&#34;foo\n&#34;</span><span class="op" id="6946218">)</span><span class="op" id="6946219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946225">Mtime</span><span class="op" id="6946230">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6946234">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="6946253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946259">Mode</span><span class="op" id="6946263">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6946268">0644</span><span class="op" id="6946272">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946277">}</span><span class="op" id="6946278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946289">Name</span><span class="op" id="6946293">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6946298">&#34;bar.txt&#34;</span><span class="op" id="6946307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946313">Content</span><span class="op" id="6946320">:</span>&nbsp;<span class="op" id="6946322">[</span><span class="op" id="6946323">]</span><span class="builtintype" id="6946324">byte</span><span class="op" id="6946328">(</span><span class="string" id="6946329">&#34;bar\n&#34;</span><span class="op" id="6946336">)</span><span class="op" id="6946337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946343">Mtime</span><span class="op" id="6946348">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6946352">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="6946371">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946377">Mode</span><span class="op" id="6946381">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6946386">0644</span><span class="op" id="6946390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946395">}</span><span class="op" id="6946396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946400">}</span><span class="op" id="6946401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946404">}</span><span class="op" id="6946405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946408">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6946412">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;after&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6946467">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946523">Name</span><span class="op" id="6946527">:</span>&nbsp;<span class="string" id="6946529">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="6946555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946559">File</span><span class="op" id="6946563">:</span>&nbsp;<span class="op" id="6946565">[</span><span class="op" id="6946566">]</span><span class="ident" id="6946567">ZipTestFile</span><span class="op" id="6946578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946583">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946589">Name</span><span class="op" id="6946593">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6946598">&#34;foo.txt&#34;</span><span class="op" id="6946607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946613">Content</span><span class="op" id="6946620">:</span>&nbsp;<span class="op" id="6946622">[</span><span class="op" id="6946623">]</span><span class="builtintype" id="6946624">byte</span><span class="op" id="6946628">(</span><span class="string" id="6946629">&#34;foo\n&#34;</span><span class="op" id="6946636">)</span><span class="op" id="6946637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946643">Mode</span><span class="op" id="6946647">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6946652">0666</span><span class="op" id="6946656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946661">}</span><span class="op" id="6946662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946667">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946673">Name</span><span class="op" id="6946677">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6946682">&#34;bar.txt&#34;</span><span class="op" id="6946691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946697">Content</span><span class="op" id="6946704">:</span>&nbsp;<span class="op" id="6946706">[</span><span class="op" id="6946707">]</span><span class="builtintype" id="6946708">byte</span><span class="op" id="6946712">(</span><span class="string" id="6946713">&#34;bar\n&#34;</span><span class="op" id="6946720">)</span><span class="op" id="6946721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946727">Mode</span><span class="op" id="6946731">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6946736">0666</span><span class="op" id="6946740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946745">}</span><span class="op" id="6946746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946750">}</span><span class="op" id="6946751">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946754">}</span><span class="op" id="6946755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946762">Name</span><span class="op" id="6946766">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6946770">&#34;Bad-CRC32-in-data-descriptor&#34;</span><span class="op" id="6946800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946804">Source</span><span class="op" id="6946810">:</span>&nbsp;<span class="ident" id="6946812">returnCorruptCRC32Zip</span><span class="op" id="6946833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946837">File</span><span class="op" id="6946841">:</span>&nbsp;<span class="op" id="6946843">[</span><span class="op" id="6946844">]</span><span class="ident" id="6946845">ZipTestFile</span><span class="op" id="6946856">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946867">Name</span><span class="op" id="6946871">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6946879">&#34;foo.txt&#34;</span><span class="op" id="6946888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946894">Content</span><span class="op" id="6946901">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946906">[</span><span class="op" id="6946907">]</span><span class="builtintype" id="6946908">byte</span><span class="op" id="6946912">(</span><span class="string" id="6946913">&#34;foo\n&#34;</span><span class="op" id="6946920">)</span><span class="op" id="6946921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946927">Mode</span><span class="op" id="6946931">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6946939">0666</span><span class="op" id="6946943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946949">ContentErr</span><span class="op" id="6946959">:</span>&nbsp;<span class="ident" id="6946961">ErrChecksum</span><span class="op" id="6946972">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946977">}</span><span class="op" id="6946978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946989">Name</span><span class="op" id="6946993">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6946998">&#34;bar.txt&#34;</span><span class="op" id="6947007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947013">Content</span><span class="op" id="6947020">:</span>&nbsp;<span class="op" id="6947022">[</span><span class="op" id="6947023">]</span><span class="builtintype" id="6947024">byte</span><span class="op" id="6947028">(</span><span class="string" id="6947029">&#34;bar\n&#34;</span><span class="op" id="6947036">)</span><span class="op" id="6947037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947043">Mode</span><span class="op" id="6947047">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6947052">0666</span><span class="op" id="6947056">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6947061">}</span><span class="op" id="6947062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6947066">}</span><span class="op" id="6947067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6947070">}</span><span class="op" id="6947071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6947074">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;accept&nbsp;valid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6947134">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6947197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947201">Name</span><span class="op" id="6947205">:</span>&nbsp;<span class="string" id="6947207">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="6947231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947235">File</span><span class="op" id="6947239">:</span>&nbsp;<span class="op" id="6947241">[</span><span class="op" id="6947242">]</span><span class="ident" id="6947243">ZipTestFile</span><span class="op" id="6947254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6947259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947265">Name</span><span class="op" id="6947269">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6947274">&#34;foo.txt&#34;</span><span class="op" id="6947283">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947289">Content</span><span class="op" id="6947296">:</span>&nbsp;<span class="op" id="6947298">[</span><span class="op" id="6947299">]</span><span class="builtintype" id="6947300">byte</span><span class="op" id="6947304">(</span><span class="string" id="6947305">&#34;foo\n&#34;</span><span class="op" id="6947312">)</span><span class="op" id="6947313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947319">Mtime</span><span class="op" id="6947324">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6947328">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="6947347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947353">Mode</span><span class="op" id="6947357">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6947362">0644</span><span class="op" id="6947366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6947371">}</span><span class="op" id="6947372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6947377">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947383">Name</span><span class="op" id="6947387">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6947392">&#34;bar.txt&#34;</span><span class="op" id="6947401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947407">Content</span><span class="op" id="6947414">:</span>&nbsp;<span class="op" id="6947416">[</span><span class="op" id="6947417">]</span><span class="builtintype" id="6947418">byte</span><span class="op" id="6947422">(</span><span class="string" id="6947423">&#34;bar\n&#34;</span><span class="op" id="6947430">)</span><span class="op" id="6947431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947437">Mtime</span><span class="op" id="6947442">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6947446">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="6947465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947471">Mode</span><span class="op" id="6947475">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6947480">0644</span><span class="op" id="6947484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6947489">}</span><span class="op" id="6947490">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6947494">}</span><span class="op" id="6947495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6947498">}</span><span class="op" id="6947499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6947502">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;reject&nbsp;invalid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6947564">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6947627">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947631">Name</span><span class="op" id="6947635">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6947639">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="6947663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947667">Source</span><span class="op" id="6947673">:</span>&nbsp;<span class="ident" id="6947675">returnCorruptNotStreamedZip</span><span class="op" id="6947702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947706">File</span><span class="op" id="6947710">:</span>&nbsp;<span class="op" id="6947712">[</span><span class="op" id="6947713">]</span><span class="ident" id="6947714">ZipTestFile</span><span class="op" id="6947725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6947730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947736">Name</span><span class="op" id="6947740">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6947748">&#34;foo.txt&#34;</span><span class="op" id="6947757">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947763">Content</span><span class="op" id="6947770">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6947775">[</span><span class="op" id="6947776">]</span><span class="builtintype" id="6947777">byte</span><span class="op" id="6947781">(</span><span class="string" id="6947782">&#34;foo\n&#34;</span><span class="op" id="6947789">)</span><span class="op" id="6947790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947796">Mtime</span><span class="op" id="6947801">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6947808">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="6947827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947833">Mode</span><span class="op" id="6947837">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6947845">0644</span><span class="op" id="6947849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947855">ContentErr</span><span class="op" id="6947865">:</span>&nbsp;<span class="ident" id="6947867">ErrChecksum</span><span class="op" id="6947878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6947883">}</span><span class="op" id="6947884">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6947889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947895">Name</span><span class="op" id="6947899">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6947904">&#34;bar.txt&#34;</span><span class="op" id="6947913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947919">Content</span><span class="op" id="6947926">:</span>&nbsp;<span class="op" id="6947928">[</span><span class="op" id="6947929">]</span><span class="builtintype" id="6947930">byte</span><span class="op" id="6947934">(</span><span class="string" id="6947935">&#34;bar\n&#34;</span><span class="op" id="6947942">)</span><span class="op" id="6947943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947949">Mtime</span><span class="op" id="6947954">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6947958">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="6947977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6947983">Mode</span><span class="op" id="6947987">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6947992">0644</span><span class="op" id="6947996">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948001">}</span><span class="op" id="6948002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948006">}</span><span class="op" id="6948007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948010">}</span><span class="op" id="6948011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948018">Name</span><span class="op" id="6948022">:</span>&nbsp;<span class="string" id="6948024">&#34;zip64.zip&#34;</span><span class="op" id="6948035">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948039">File</span><span class="op" id="6948043">:</span>&nbsp;<span class="op" id="6948045">[</span><span class="op" id="6948046">]</span><span class="ident" id="6948047">ZipTestFile</span><span class="op" id="6948058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948069">Name</span><span class="op" id="6948073">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6948078">&#34;README&#34;</span><span class="op" id="6948086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948092">Content</span><span class="op" id="6948099">:</span>&nbsp;<span class="op" id="6948101">[</span><span class="op" id="6948102">]</span><span class="builtintype" id="6948103">byte</span><span class="op" id="6948107">(</span><span class="string" id="6948108">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="6948147">)</span><span class="op" id="6948148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948154">Mtime</span><span class="op" id="6948159">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6948163">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="6948182">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948188">Mode</span><span class="op" id="6948192">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6948197">0644</span><span class="op" id="6948201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948206">}</span><span class="op" id="6948207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948211">}</span><span class="op" id="6948212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948215">}</span><span class="op" id="6948216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6948219">//&nbsp;Another&nbsp;zip64&nbsp;file&nbsp;with&nbsp;different&nbsp;Extras&nbsp;fields.&nbsp;(golang.org/issue/7069)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948300">Name</span><span class="op" id="6948304">:</span>&nbsp;<span class="string" id="6948306">&#34;zip64-2.zip&#34;</span><span class="op" id="6948319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948323">File</span><span class="op" id="6948327">:</span>&nbsp;<span class="op" id="6948329">[</span><span class="op" id="6948330">]</span><span class="ident" id="6948331">ZipTestFile</span><span class="op" id="6948342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948353">Name</span><span class="op" id="6948357">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6948362">&#34;README&#34;</span><span class="op" id="6948370">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948376">Content</span><span class="op" id="6948383">:</span>&nbsp;<span class="op" id="6948385">[</span><span class="op" id="6948386">]</span><span class="builtintype" id="6948387">byte</span><span class="op" id="6948391">(</span><span class="string" id="6948392">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="6948431">)</span><span class="op" id="6948432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948438">Mtime</span><span class="op" id="6948443">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6948447">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="6948466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948472">Mode</span><span class="op" id="6948476">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6948481">0644</span><span class="op" id="6948485">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948490">}</span><span class="op" id="6948491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948495">}</span><span class="op" id="6948496">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948499">}</span><span class="op" id="6948500">,</span><br>
<span class="lineno"></span><span class="op" id="6948502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6948505">var</span>&nbsp;<span class="ident" id="6948509">crossPlatform</span>&nbsp;<span class="op" id="6948523">=</span>&nbsp;<span class="op" id="6948525">[</span><span class="op" id="6948526">]</span><span class="ident" id="6948527">ZipTestFile</span><span class="op" id="6948538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948541">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948545">Name</span><span class="op" id="6948549">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6948554">&#34;hello&#34;</span><span class="op" id="6948561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948565">Content</span><span class="op" id="6948572">:</span>&nbsp;<span class="op" id="6948574">[</span><span class="op" id="6948575">]</span><span class="builtintype" id="6948576">byte</span><span class="op" id="6948580">(</span><span class="string" id="6948581">&#34;world&nbsp;\r\n&#34;</span><span class="op" id="6948593">)</span><span class="op" id="6948594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948598">Mode</span><span class="op" id="6948602">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6948607">0666</span><span class="op" id="6948611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948614">}</span><span class="op" id="6948615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948618">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948622">Name</span><span class="op" id="6948626">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6948631">&#34;dir/bar&#34;</span><span class="op" id="6948640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948644">Content</span><span class="op" id="6948651">:</span>&nbsp;<span class="op" id="6948653">[</span><span class="op" id="6948654">]</span><span class="builtintype" id="6948655">byte</span><span class="op" id="6948659">(</span><span class="string" id="6948660">&#34;foo&nbsp;\r\n&#34;</span><span class="op" id="6948670">)</span><span class="op" id="6948671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948675">Mode</span><span class="op" id="6948679">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6948684">0666</span><span class="op" id="6948688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948691">}</span><span class="op" id="6948692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948695">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948699">Name</span><span class="op" id="6948703">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6948708">&#34;dir/empty/&#34;</span><span class="op" id="6948720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948724">Content</span><span class="op" id="6948731">:</span>&nbsp;<span class="op" id="6948733">[</span><span class="op" id="6948734">]</span><span class="builtintype" id="6948735">byte</span><span class="op" id="6948739">{</span><span class="op" id="6948740">}</span><span class="op" id="6948741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948745">Mode</span><span class="op" id="6948749">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948754">os</span><span class="op" id="6948756">.</span><span class="ident" id="6948757">ModeDir</span>&nbsp;<span class="op" id="6948765">|</span>&nbsp;<span class="num" id="6948767">0777</span><span class="op" id="6948771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948774">}</span><span class="op" id="6948775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948778">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948782">Name</span><span class="op" id="6948786">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6948791">&#34;readonly&#34;</span><span class="op" id="6948801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948805">Content</span><span class="op" id="6948812">:</span>&nbsp;<span class="op" id="6948814">[</span><span class="op" id="6948815">]</span><span class="builtintype" id="6948816">byte</span><span class="op" id="6948820">(</span><span class="string" id="6948821">&#34;important&nbsp;\r\n&#34;</span><span class="op" id="6948837">)</span><span class="op" id="6948838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948842">Mode</span><span class="op" id="6948846">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6948851">0444</span><span class="op" id="6948855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948858">}</span><span class="op" id="6948859">,</span><br>
<span class="lineno"></span><span class="op" id="6948861">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="6948864">func</span>&nbsp;<span class="ident" id="6948869">TestReader</span><span class="op" id="6948879">(</span><span class="ident" id="6948880">t</span>&nbsp;<span class="op" id="6948882">*</span><span class="ident" id="6948883">testing</span><span class="op" id="6948890">.</span><span class="ident" id="6948891">T</span><span class="op" id="6948892">)</span>&nbsp;<span class="op" id="6948894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6948897">for</span>&nbsp;<span class="ident" id="6948901">_</span><span class="op" id="6948902">,</span>&nbsp;<span class="ident" id="6948904">zt</span>&nbsp;<span class="op" id="6948907">:=</span>&nbsp;<span class="keyword" id="6948910">range</span>&nbsp;<span class="ident" id="6948916">tests</span>&nbsp;<span class="op" id="6948922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6948926">readTestZip</span><span class="op" id="6948937">(</span><span class="ident" id="6948938">t</span><span class="op" id="6948939">,</span>&nbsp;<span class="ident" id="6948941">zt</span><span class="op" id="6948943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6948946">}</span><br>
<span class="lineno">280</span><span class="op" id="6948948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6948951">func</span>&nbsp;<span class="ident" id="6948956">readTestZip</span><span class="op" id="6948967">(</span><span class="ident" id="6948968">t</span>&nbsp;<span class="op" id="6948970">*</span><span class="ident" id="6948971">testing</span><span class="op" id="6948978">.</span><span class="ident" id="6948979">T</span><span class="op" id="6948980">,</span>&nbsp;<span class="ident" id="6948982">zt</span>&nbsp;<span class="ident" id="6948985">ZipTest</span><span class="op" id="6948992">)</span>&nbsp;<span class="op" id="6948994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6948997">var</span>&nbsp;<span class="ident" id="6949001">z</span>&nbsp;<span class="op" id="6949003">*</span><span class="ident" id="6949004">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6949012">var</span>&nbsp;<span class="ident" id="6949016">err</span>&nbsp;<span class="builtintype" id="6949020">error</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6949027">if</span>&nbsp;<span class="ident" id="6949030">zt</span><span class="op" id="6949032">.</span><span class="ident" id="6949033">Source</span>&nbsp;<span class="op" id="6949040">!=</span>&nbsp;<span class="ident" id="6949043">nil</span>&nbsp;<span class="op" id="6949047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6949051">rat</span><span class="op" id="6949054">,</span>&nbsp;<span class="ident" id="6949056">size</span>&nbsp;<span class="op" id="6949061">:=</span>&nbsp;<span class="ident" id="6949064">zt</span><span class="op" id="6949066">.</span><span class="ident" id="6949067">Source</span><span class="op" id="6949073">(</span><span class="op" id="6949074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6949078">z</span><span class="op" id="6949079">,</span>&nbsp;<span class="ident" id="6949081">err</span>&nbsp;<span class="op" id="6949085">=</span>&nbsp;<span class="ident" id="6949087">NewReader</span><span class="op" id="6949096">(</span><span class="ident" id="6949097">rat</span><span class="op" id="6949100">,</span>&nbsp;<span class="ident" id="6949102">size</span><span class="op" id="6949106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6949109">}</span>&nbsp;<span class="keyword" id="6949111">else</span>&nbsp;<span class="op" id="6949116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6949120">var</span>&nbsp;<span class="ident" id="6949124">rc</span>&nbsp;<span class="op" id="6949127">*</span><span class="ident" id="6949128">ReadCloser</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6949141">rc</span><span class="op" id="6949143">,</span>&nbsp;<span class="ident" id="6949145">err</span>&nbsp;<span class="op" id="6949149">=</span>&nbsp;<span class="ident" id="6949151">OpenReader</span><span class="op" id="6949161">(</span><span class="ident" id="6949162">filepath</span><span class="op" id="6949170">.</span><span class="ident" id="6949171">Join</span><span class="op" id="6949175">(</span><span class="string" id="6949176">&#34;testdata&#34;</span><span class="op" id="6949186">,</span>&nbsp;<span class="ident" id="6949188">zt</span><span class="op" id="6949190">.</span><span class="ident" id="6949191">Name</span><span class="op" id="6949195">)</span><span class="op" id="6949196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6949200">if</span>&nbsp;<span class="ident" id="6949203">err</span>&nbsp;<span class="op" id="6949207">==</span>&nbsp;<span class="ident" id="6949210">nil</span>&nbsp;<span class="op" id="6949214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6949219">defer</span>&nbsp;<span class="ident" id="6949225">rc</span><span class="op" id="6949227">.</span><span class="ident" id="6949228">Close</span><span class="op" id="6949233">(</span><span class="op" id="6949234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6949239">z</span>&nbsp;<span class="op" id="6949241">=</span>&nbsp;<span class="op" id="6949243">&amp;</span><span class="ident" id="6949244">rc</span><span class="op" id="6949246">.</span><span class="ident" id="6949247">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6949256">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6949259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6949262">if</span>&nbsp;<span class="ident" id="6949265">err</span>&nbsp;<span class="op" id="6949269">!=</span>&nbsp;<span class="ident" id="6949272">zt</span><span class="op" id="6949274">.</span><span class="ident" id="6949275">Error</span>&nbsp;<span class="op" id="6949281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6949285">t</span><span class="op" id="6949286">.</span><span class="ident" id="6949287">Errorf</span><span class="op" id="6949293">(</span><span class="string" id="6949294">&#34;%s:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6949317">,</span>&nbsp;<span class="ident" id="6949319">zt</span><span class="op" id="6949321">.</span><span class="ident" id="6949322">Name</span><span class="op" id="6949326">,</span>&nbsp;<span class="ident" id="6949328">err</span><span class="op" id="6949331">,</span>&nbsp;<span class="ident" id="6949333">zt</span><span class="op" id="6949335">.</span><span class="ident" id="6949336">Error</span><span class="op" id="6949341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6949345">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6949353">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6949357">//&nbsp;bail&nbsp;if&nbsp;file&nbsp;is&nbsp;not&nbsp;zip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6949385">if</span>&nbsp;<span class="ident" id="6949388">err</span>&nbsp;<span class="op" id="6949392">==</span>&nbsp;<span class="ident" id="6949395">ErrFormat</span>&nbsp;<span class="op" id="6949405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6949409">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6949417">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6949421">//&nbsp;bail&nbsp;here&nbsp;if&nbsp;no&nbsp;Files&nbsp;expected&nbsp;to&nbsp;be&nbsp;tested</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6949469">//&nbsp;(there&nbsp;may&nbsp;actually&nbsp;be&nbsp;files&nbsp;in&nbsp;the&nbsp;zip,&nbsp;but&nbsp;we&nbsp;don&#39;t&nbsp;care)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6949533">if</span>&nbsp;<span class="ident" id="6949536">zt</span><span class="op" id="6949538">.</span><span class="ident" id="6949539">File</span>&nbsp;<span class="op" id="6949544">==</span>&nbsp;<span class="ident" id="6949547">nil</span>&nbsp;<span class="op" id="6949551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6949555">return</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6949563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6949567">if</span>&nbsp;<span class="ident" id="6949570">z</span><span class="op" id="6949571">.</span><span class="ident" id="6949572">Comment</span>&nbsp;<span class="op" id="6949580">!=</span>&nbsp;<span class="ident" id="6949583">zt</span><span class="op" id="6949585">.</span><span class="ident" id="6949586">Comment</span>&nbsp;<span class="op" id="6949594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6949598">t</span><span class="op" id="6949599">.</span><span class="ident" id="6949600">Errorf</span><span class="op" id="6949606">(</span><span class="string" id="6949607">&#34;%s:&nbsp;comment=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6949632">,</span>&nbsp;<span class="ident" id="6949634">zt</span><span class="op" id="6949636">.</span><span class="ident" id="6949637">Name</span><span class="op" id="6949641">,</span>&nbsp;<span class="ident" id="6949643">z</span><span class="op" id="6949644">.</span><span class="ident" id="6949645">Comment</span><span class="op" id="6949652">,</span>&nbsp;<span class="ident" id="6949654">zt</span><span class="op" id="6949656">.</span><span class="ident" id="6949657">Comment</span><span class="op" id="6949664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6949667">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6949670">if</span>&nbsp;<span class="builtinfunc" id="6949673">len</span><span class="op" id="6949676">(</span><span class="ident" id="6949677">z</span><span class="op" id="6949678">.</span><span class="ident" id="6949679">File</span><span class="op" id="6949683">)</span>&nbsp;<span class="op" id="6949685">!=</span>&nbsp;<span class="builtinfunc" id="6949688">len</span><span class="op" id="6949691">(</span><span class="ident" id="6949692">zt</span><span class="op" id="6949694">.</span><span class="ident" id="6949695">File</span><span class="op" id="6949699">)</span>&nbsp;<span class="op" id="6949701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6949705">t</span><span class="op" id="6949706">.</span><span class="ident" id="6949707">Fatalf</span><span class="op" id="6949713">(</span><span class="string" id="6949714">&#34;%s:&nbsp;file&nbsp;count=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6949742">,</span>&nbsp;<span class="ident" id="6949744">zt</span><span class="op" id="6949746">.</span><span class="ident" id="6949747">Name</span><span class="op" id="6949751">,</span>&nbsp;<span class="builtinfunc" id="6949753">len</span><span class="op" id="6949756">(</span><span class="ident" id="6949757">z</span><span class="op" id="6949758">.</span><span class="ident" id="6949759">File</span><span class="op" id="6949763">)</span><span class="op" id="6949764">,</span>&nbsp;<span class="builtinfunc" id="6949766">len</span><span class="op" id="6949769">(</span><span class="ident" id="6949770">zt</span><span class="op" id="6949772">.</span><span class="ident" id="6949773">File</span><span class="op" id="6949777">)</span><span class="op" id="6949778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6949781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6949785">//&nbsp;test&nbsp;read&nbsp;of&nbsp;each&nbsp;file</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6949812">for</span>&nbsp;<span class="ident" id="6949816">i</span><span class="op" id="6949817">,</span>&nbsp;<span class="ident" id="6949819">ft</span>&nbsp;<span class="op" id="6949822">:=</span>&nbsp;<span class="keyword" id="6949825">range</span>&nbsp;<span class="ident" id="6949831">zt</span><span class="op" id="6949833">.</span><span class="ident" id="6949834">File</span>&nbsp;<span class="op" id="6949839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6949843">readTestFile</span><span class="op" id="6949855">(</span><span class="ident" id="6949856">t</span><span class="op" id="6949857">,</span>&nbsp;<span class="ident" id="6949859">zt</span><span class="op" id="6949861">,</span>&nbsp;<span class="ident" id="6949863">ft</span><span class="op" id="6949865">,</span>&nbsp;<span class="ident" id="6949867">z</span><span class="op" id="6949868">.</span><span class="ident" id="6949869">File</span><span class="op" id="6949873">[</span><span class="ident" id="6949874">i</span><span class="op" id="6949875">]</span><span class="op" id="6949876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6949879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6949883">//&nbsp;test&nbsp;simultaneous&nbsp;reads</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6949911">n</span>&nbsp;<span class="op" id="6949913">:=</span>&nbsp;<span class="num" id="6949916">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6949919">done</span>&nbsp;<span class="op" id="6949924">:=</span>&nbsp;<span class="builtinfunc" id="6949927">make</span><span class="op" id="6949931">(</span><span class="keyword" id="6949932">chan</span>&nbsp;<span class="builtintype" id="6949937">bool</span><span class="op" id="6949941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6949944">for</span>&nbsp;<span class="ident" id="6949948">i</span>&nbsp;<span class="op" id="6949950">:=</span>&nbsp;<span class="num" id="6949953">0</span><span class="op" id="6949954">;</span>&nbsp;<span class="ident" id="6949956">i</span>&nbsp;<span class="op" id="6949958">&lt;</span>&nbsp;<span class="num" id="6949960">5</span><span class="op" id="6949961">;</span>&nbsp;<span class="ident" id="6949963">i</span><span class="op" id="6949964">++</span>&nbsp;<span class="op" id="6949967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6949971">for</span>&nbsp;<span class="ident" id="6949975">j</span><span class="op" id="6949976">,</span>&nbsp;<span class="ident" id="6949978">ft</span>&nbsp;<span class="op" id="6949981">:=</span>&nbsp;<span class="keyword" id="6949984">range</span>&nbsp;<span class="ident" id="6949990">zt</span><span class="op" id="6949992">.</span><span class="ident" id="6949993">File</span>&nbsp;<span class="op" id="6949998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6950003">go</span>&nbsp;<span class="keyword" id="6950006">func</span><span class="op" id="6950010">(</span><span class="ident" id="6950011">j</span>&nbsp;<span class="builtintype" id="6950013">int</span><span class="op" id="6950016">,</span>&nbsp;<span class="ident" id="6950018">ft</span>&nbsp;<span class="ident" id="6950021">ZipTestFile</span><span class="op" id="6950032">)</span>&nbsp;<span class="op" id="6950034">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6950040">readTestFile</span><span class="op" id="6950052">(</span><span class="ident" id="6950053">t</span><span class="op" id="6950054">,</span>&nbsp;<span class="ident" id="6950056">zt</span><span class="op" id="6950058">,</span>&nbsp;<span class="ident" id="6950060">ft</span><span class="op" id="6950062">,</span>&nbsp;<span class="ident" id="6950064">z</span><span class="op" id="6950065">.</span><span class="ident" id="6950066">File</span><span class="op" id="6950070">[</span><span class="ident" id="6950071">j</span><span class="op" id="6950072">]</span><span class="op" id="6950073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6950079">done</span>&nbsp;<span class="op" id="6950084">&lt;-</span>&nbsp;<span class="builtintype" id="6950087">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6950095">}</span><span class="op" id="6950096">(</span><span class="ident" id="6950097">j</span><span class="op" id="6950098">,</span>&nbsp;<span class="ident" id="6950100">ft</span><span class="op" id="6950102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6950107">n</span><span class="op" id="6950108">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6950113">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6950116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6950119">for</span>&nbsp;<span class="op" id="6950123">;</span>&nbsp;<span class="ident" id="6950125">n</span>&nbsp;<span class="op" id="6950127">&gt;</span>&nbsp;<span class="num" id="6950129">0</span><span class="op" id="6950130">;</span>&nbsp;<span class="ident" id="6950132">n</span><span class="op" id="6950133">--</span>&nbsp;<span class="op" id="6950136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6950140">&lt;-</span><span class="ident" id="6950142">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6950148">}</span><br>
<span class="lineno"></span><span class="op" id="6950150">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="6950153">func</span>&nbsp;<span class="ident" id="6950158">readTestFile</span><span class="op" id="6950170">(</span><span class="ident" id="6950171">t</span>&nbsp;<span class="op" id="6950173">*</span><span class="ident" id="6950174">testing</span><span class="op" id="6950181">.</span><span class="ident" id="6950182">T</span><span class="op" id="6950183">,</span>&nbsp;<span class="ident" id="6950185">zt</span>&nbsp;<span class="ident" id="6950188">ZipTest</span><span class="op" id="6950195">,</span>&nbsp;<span class="ident" id="6950197">ft</span>&nbsp;<span class="ident" id="6950200">ZipTestFile</span><span class="op" id="6950211">,</span>&nbsp;<span class="ident" id="6950213">f</span>&nbsp;<span class="op" id="6950215">*</span><span class="ident" id="6950216">File</span><span class="op" id="6950220">)</span>&nbsp;<span class="op" id="6950222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6950225">if</span>&nbsp;<span class="ident" id="6950228">f</span><span class="op" id="6950229">.</span><span class="ident" id="6950230">Name</span>&nbsp;<span class="op" id="6950235">!=</span>&nbsp;<span class="ident" id="6950238">ft</span><span class="op" id="6950240">.</span><span class="ident" id="6950241">Name</span>&nbsp;<span class="op" id="6950246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6950250">t</span><span class="op" id="6950251">.</span><span class="ident" id="6950252">Errorf</span><span class="op" id="6950258">(</span><span class="string" id="6950259">&#34;%s:&nbsp;name=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6950281">,</span>&nbsp;<span class="ident" id="6950283">zt</span><span class="op" id="6950285">.</span><span class="ident" id="6950286">Name</span><span class="op" id="6950290">,</span>&nbsp;<span class="ident" id="6950292">f</span><span class="op" id="6950293">.</span><span class="ident" id="6950294">Name</span><span class="op" id="6950298">,</span>&nbsp;<span class="ident" id="6950300">ft</span><span class="op" id="6950302">.</span><span class="ident" id="6950303">Name</span><span class="op" id="6950307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6950310">}</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6950314">if</span>&nbsp;<span class="ident" id="6950317">ft</span><span class="op" id="6950319">.</span><span class="ident" id="6950320">Mtime</span>&nbsp;<span class="op" id="6950326">!=</span>&nbsp;<span class="string" id="6950329">&#34;&#34;</span>&nbsp;<span class="op" id="6950332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6950336">mtime</span><span class="op" id="6950341">,</span>&nbsp;<span class="ident" id="6950343">err</span>&nbsp;<span class="op" id="6950347">:=</span>&nbsp;<span class="ident" id="6950350">time</span><span class="op" id="6950354">.</span><span class="ident" id="6950355">Parse</span><span class="op" id="6950360">(</span><span class="string" id="6950361">&#34;01-02-06&nbsp;15:04:05&#34;</span><span class="op" id="6950380">,</span>&nbsp;<span class="ident" id="6950382">ft</span><span class="op" id="6950384">.</span><span class="ident" id="6950385">Mtime</span><span class="op" id="6950390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6950394">if</span>&nbsp;<span class="ident" id="6950397">err</span>&nbsp;<span class="op" id="6950401">!=</span>&nbsp;<span class="ident" id="6950404">nil</span>&nbsp;<span class="op" id="6950408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6950413">t</span><span class="op" id="6950414">.</span><span class="ident" id="6950415">Error</span><span class="op" id="6950420">(</span><span class="ident" id="6950421">err</span><span class="op" id="6950424">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6950429">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6950438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6950442">if</span>&nbsp;<span class="ident" id="6950445">ft</span>&nbsp;<span class="op" id="6950448">:=</span>&nbsp;<span class="ident" id="6950451">f</span><span class="op" id="6950452">.</span><span class="ident" id="6950453">ModTime</span><span class="op" id="6950460">(</span><span class="op" id="6950461">)</span><span class="op" id="6950462">;</span>&nbsp;<span class="op" id="6950464">!</span><span class="ident" id="6950465">ft</span><span class="op" id="6950467">.</span><span class="ident" id="6950468">Equal</span><span class="op" id="6950473">(</span><span class="ident" id="6950474">mtime</span><span class="op" id="6950479">)</span>&nbsp;<span class="op" id="6950481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6950486">t</span><span class="op" id="6950487">.</span><span class="ident" id="6950488">Errorf</span><span class="op" id="6950494">(</span><span class="string" id="6950495">&#34;%s:&nbsp;%s:&nbsp;mtime=%s,&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6950522">,</span>&nbsp;<span class="ident" id="6950524">zt</span><span class="op" id="6950526">.</span><span class="ident" id="6950527">Name</span><span class="op" id="6950531">,</span>&nbsp;<span class="ident" id="6950533">f</span><span class="op" id="6950534">.</span><span class="ident" id="6950535">Name</span><span class="op" id="6950539">,</span>&nbsp;<span class="ident" id="6950541">ft</span><span class="op" id="6950543">,</span>&nbsp;<span class="ident" id="6950545">mtime</span><span class="op" id="6950550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6950554">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6950557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6950561">testFileMode</span><span class="op" id="6950573">(</span><span class="ident" id="6950574">t</span><span class="op" id="6950575">,</span>&nbsp;<span class="ident" id="6950577">zt</span><span class="op" id="6950579">.</span><span class="ident" id="6950580">Name</span><span class="op" id="6950584">,</span>&nbsp;<span class="ident" id="6950586">f</span><span class="op" id="6950587">,</span>&nbsp;<span class="ident" id="6950589">ft</span><span class="op" id="6950591">.</span><span class="ident" id="6950592">Mode</span><span class="op" id="6950596">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6950600">var</span>&nbsp;<span class="ident" id="6950604">b</span>&nbsp;<span class="ident" id="6950606">bytes</span><span class="op" id="6950611">.</span><span class="ident" id="6950612">Buffer</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6950620">r</span><span class="op" id="6950621">,</span>&nbsp;<span class="ident" id="6950623">err</span>&nbsp;<span class="op" id="6950627">:=</span>&nbsp;<span class="ident" id="6950630">f</span><span class="op" id="6950631">.</span><span class="ident" id="6950632">Open</span><span class="op" id="6950636">(</span><span class="op" id="6950637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6950640">if</span>&nbsp;<span class="ident" id="6950643">err</span>&nbsp;<span class="op" id="6950647">!=</span>&nbsp;<span class="ident" id="6950650">nil</span>&nbsp;<span class="op" id="6950654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6950658">t</span><span class="op" id="6950659">.</span><span class="ident" id="6950660">Errorf</span><span class="op" id="6950666">(</span><span class="string" id="6950667">&#34;%s:&nbsp;%v&#34;</span><span class="op" id="6950675">,</span>&nbsp;<span class="ident" id="6950677">zt</span><span class="op" id="6950679">.</span><span class="ident" id="6950680">Name</span><span class="op" id="6950684">,</span>&nbsp;<span class="ident" id="6950686">err</span><span class="op" id="6950689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6950693">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6950701">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6950705">_</span><span class="op" id="6950706">,</span>&nbsp;<span class="ident" id="6950708">err</span>&nbsp;<span class="op" id="6950712">=</span>&nbsp;<span class="ident" id="6950714">io</span><span class="op" id="6950716">.</span><span class="ident" id="6950717">Copy</span><span class="op" id="6950721">(</span><span class="op" id="6950722">&amp;</span><span class="ident" id="6950723">b</span><span class="op" id="6950724">,</span>&nbsp;<span class="ident" id="6950726">r</span><span class="op" id="6950727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6950730">if</span>&nbsp;<span class="ident" id="6950733">err</span>&nbsp;<span class="op" id="6950737">!=</span>&nbsp;<span class="ident" id="6950740">ft</span><span class="op" id="6950742">.</span><span class="ident" id="6950743">ContentErr</span>&nbsp;<span class="op" id="6950754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6950758">t</span><span class="op" id="6950759">.</span><span class="ident" id="6950760">Errorf</span><span class="op" id="6950766">(</span><span class="string" id="6950767">&#34;%s:&nbsp;copying&nbsp;contents:&nbsp;%v&nbsp;(want&nbsp;%v)&#34;</span><span class="op" id="6950803">,</span>&nbsp;<span class="ident" id="6950805">zt</span><span class="op" id="6950807">.</span><span class="ident" id="6950808">Name</span><span class="op" id="6950812">,</span>&nbsp;<span class="ident" id="6950814">err</span><span class="op" id="6950817">,</span>&nbsp;<span class="ident" id="6950819">ft</span><span class="op" id="6950821">.</span><span class="ident" id="6950822">ContentErr</span><span class="op" id="6950832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6950835">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6950838">if</span>&nbsp;<span class="ident" id="6950841">err</span>&nbsp;<span class="op" id="6950845">!=</span>&nbsp;<span class="ident" id="6950848">nil</span>&nbsp;<span class="op" id="6950852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6950856">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6950864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6950867">r</span><span class="op" id="6950868">.</span><span class="ident" id="6950869">Close</span><span class="op" id="6950874">(</span><span class="op" id="6950875">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6950879">size</span>&nbsp;<span class="op" id="6950884">:=</span>&nbsp;<span class="ident" id="6950887">uint64</span><span class="op" id="6950893">(</span><span class="ident" id="6950894">f</span><span class="op" id="6950895">.</span><span class="ident" id="6950896">UncompressedSize</span><span class="op" id="6950912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6950915">if</span>&nbsp;<span class="ident" id="6950918">size</span>&nbsp;<span class="op" id="6950923">==</span>&nbsp;<span class="ident" id="6950926">uint32max</span>&nbsp;<span class="op" id="6950936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6950940">size</span>&nbsp;<span class="op" id="6950945">=</span>&nbsp;<span class="ident" id="6950947">f</span><span class="op" id="6950948">.</span><span class="ident" id="6950949">UncompressedSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6950969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6950972">if</span>&nbsp;<span class="ident" id="6950975">g</span>&nbsp;<span class="op" id="6950977">:=</span>&nbsp;<span class="ident" id="6950980">uint64</span><span class="op" id="6950986">(</span><span class="ident" id="6950987">b</span><span class="op" id="6950988">.</span><span class="ident" id="6950989">Len</span><span class="op" id="6950992">(</span><span class="op" id="6950993">)</span><span class="op" id="6950994">)</span><span class="op" id="6950995">;</span>&nbsp;<span class="ident" id="6950997">g</span>&nbsp;<span class="op" id="6950999">!=</span>&nbsp;<span class="ident" id="6951002">size</span>&nbsp;<span class="op" id="6951007">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6951011">t</span><span class="op" id="6951012">.</span><span class="ident" id="6951013">Errorf</span><span class="op" id="6951019">(</span><span class="string" id="6951020">&#34;%v:&nbsp;read&nbsp;%v&nbsp;bytes&nbsp;but&nbsp;f.UncompressedSize&nbsp;==&nbsp;%v&#34;</span><span class="op" id="6951068">,</span>&nbsp;<span class="ident" id="6951070">f</span><span class="op" id="6951071">.</span><span class="ident" id="6951072">Name</span><span class="op" id="6951076">,</span>&nbsp;<span class="ident" id="6951078">g</span><span class="op" id="6951079">,</span>&nbsp;<span class="ident" id="6951081">size</span><span class="op" id="6951085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6951088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6951092">var</span>&nbsp;<span class="ident" id="6951096">c</span>&nbsp;<span class="op" id="6951098">[</span><span class="op" id="6951099">]</span><span class="builtintype" id="6951100">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6951106">if</span>&nbsp;<span class="ident" id="6951109">ft</span><span class="op" id="6951111">.</span><span class="ident" id="6951112">Content</span>&nbsp;<span class="op" id="6951120">!=</span>&nbsp;<span class="ident" id="6951123">nil</span>&nbsp;<span class="op" id="6951127">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6951131">c</span>&nbsp;<span class="op" id="6951133">=</span>&nbsp;<span class="ident" id="6951135">ft</span><span class="op" id="6951137">.</span><span class="ident" id="6951138">Content</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6951147">}</span>&nbsp;<span class="keyword" id="6951149">else</span>&nbsp;<span class="keyword" id="6951154">if</span>&nbsp;<span class="ident" id="6951157">c</span><span class="op" id="6951158">,</span>&nbsp;<span class="ident" id="6951160">err</span>&nbsp;<span class="op" id="6951164">=</span>&nbsp;<span class="ident" id="6951166">ioutil</span><span class="op" id="6951172">.</span><span class="ident" id="6951173">ReadFile</span><span class="op" id="6951181">(</span><span class="string" id="6951182">&#34;testdata/&#34;</span>&nbsp;<span class="op" id="6951194">+</span>&nbsp;<span class="ident" id="6951196">ft</span><span class="op" id="6951198">.</span><span class="ident" id="6951199">File</span><span class="op" id="6951203">)</span><span class="op" id="6951204">;</span>&nbsp;<span class="ident" id="6951206">err</span>&nbsp;<span class="op" id="6951210">!=</span>&nbsp;<span class="ident" id="6951213">nil</span>&nbsp;<span class="op" id="6951217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6951221">t</span><span class="op" id="6951222">.</span><span class="ident" id="6951223">Error</span><span class="op" id="6951228">(</span><span class="ident" id="6951229">err</span><span class="op" id="6951232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6951236">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6951244">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6951248">if</span>&nbsp;<span class="ident" id="6951251">b</span><span class="op" id="6951252">.</span><span class="ident" id="6951253">Len</span><span class="op" id="6951256">(</span><span class="op" id="6951257">)</span>&nbsp;<span class="op" id="6951259">!=</span>&nbsp;<span class="builtinfunc" id="6951262">len</span><span class="op" id="6951265">(</span><span class="ident" id="6951266">c</span><span class="op" id="6951267">)</span>&nbsp;<span class="op" id="6951269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6951273">t</span><span class="op" id="6951274">.</span><span class="ident" id="6951275">Errorf</span><span class="op" id="6951281">(</span><span class="string" id="6951282">&#34;%s:&nbsp;len=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6951303">,</span>&nbsp;<span class="ident" id="6951305">f</span><span class="op" id="6951306">.</span><span class="ident" id="6951307">Name</span><span class="op" id="6951311">,</span>&nbsp;<span class="ident" id="6951313">b</span><span class="op" id="6951314">.</span><span class="ident" id="6951315">Len</span><span class="op" id="6951318">(</span><span class="op" id="6951319">)</span><span class="op" id="6951320">,</span>&nbsp;<span class="builtinfunc" id="6951322">len</span><span class="op" id="6951325">(</span><span class="ident" id="6951326">c</span><span class="op" id="6951327">)</span><span class="op" id="6951328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6951332">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6951340">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6951344">for</span>&nbsp;<span class="ident" id="6951348">i</span><span class="op" id="6951349">,</span>&nbsp;<span class="ident" id="6951351">b</span>&nbsp;<span class="op" id="6951353">:=</span>&nbsp;<span class="keyword" id="6951356">range</span>&nbsp;<span class="ident" id="6951362">b</span><span class="op" id="6951363">.</span><span class="ident" id="6951364">Bytes</span><span class="op" id="6951369">(</span><span class="op" id="6951370">)</span>&nbsp;<span class="op" id="6951372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6951376">if</span>&nbsp;<span class="ident" id="6951379">b</span>&nbsp;<span class="op" id="6951381">!=</span>&nbsp;<span class="ident" id="6951384">c</span><span class="op" id="6951385">[</span><span class="ident" id="6951386">i</span><span class="op" id="6951387">]</span>&nbsp;<span class="op" id="6951389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6951394">t</span><span class="op" id="6951395">.</span><span class="ident" id="6951396">Errorf</span><span class="op" id="6951402">(</span><span class="string" id="6951403">&#34;%s:&nbsp;content[%d]=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6951431">,</span>&nbsp;<span class="ident" id="6951433">f</span><span class="op" id="6951434">.</span><span class="ident" id="6951435">Name</span><span class="op" id="6951439">,</span>&nbsp;<span class="ident" id="6951441">i</span><span class="op" id="6951442">,</span>&nbsp;<span class="ident" id="6951444">b</span><span class="op" id="6951445">,</span>&nbsp;<span class="ident" id="6951447">c</span><span class="op" id="6951448">[</span><span class="ident" id="6951449">i</span><span class="op" id="6951450">]</span><span class="op" id="6951451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6951456">return</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6951465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6951468">}</span><br>
<span class="lineno"></span><span class="op" id="6951470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6951473">func</span>&nbsp;<span class="ident" id="6951478">testFileMode</span><span class="op" id="6951490">(</span><span class="ident" id="6951491">t</span>&nbsp;<span class="op" id="6951493">*</span><span class="ident" id="6951494">testing</span><span class="op" id="6951501">.</span><span class="ident" id="6951502">T</span><span class="op" id="6951503">,</span>&nbsp;<span class="ident" id="6951505">zipName</span>&nbsp;<span class="builtintype" id="6951513">string</span><span class="op" id="6951519">,</span>&nbsp;<span class="ident" id="6951521">f</span>&nbsp;<span class="op" id="6951523">*</span><span class="ident" id="6951524">File</span><span class="op" id="6951528">,</span>&nbsp;<span class="ident" id="6951530">want</span>&nbsp;<span class="ident" id="6951535">os</span><span class="op" id="6951537">.</span><span class="ident" id="6951538">FileMode</span><span class="op" id="6951546">)</span>&nbsp;<span class="op" id="6951548">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6951551">mode</span>&nbsp;<span class="op" id="6951556">:=</span>&nbsp;<span class="ident" id="6951559">f</span><span class="op" id="6951560">.</span><span class="ident" id="6951561">Mode</span><span class="op" id="6951565">(</span><span class="op" id="6951566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6951569">if</span>&nbsp;<span class="ident" id="6951572">want</span>&nbsp;<span class="op" id="6951577">==</span>&nbsp;<span class="num" id="6951580">0</span>&nbsp;<span class="op" id="6951582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6951586">t</span><span class="op" id="6951587">.</span><span class="ident" id="6951588">Errorf</span><span class="op" id="6951594">(</span><span class="string" id="6951595">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;none&#34;</span><span class="op" id="6951627">,</span>&nbsp;<span class="ident" id="6951629">zipName</span><span class="op" id="6951636">,</span>&nbsp;<span class="ident" id="6951638">f</span><span class="op" id="6951639">.</span><span class="ident" id="6951640">Name</span><span class="op" id="6951644">,</span>&nbsp;<span class="ident" id="6951646">mode</span><span class="op" id="6951650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6951653">}</span>&nbsp;<span class="keyword" id="6951655">else</span>&nbsp;<span class="keyword" id="6951660">if</span>&nbsp;<span class="ident" id="6951663">mode</span>&nbsp;<span class="op" id="6951668">!=</span>&nbsp;<span class="ident" id="6951671">want</span>&nbsp;<span class="op" id="6951676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6951680">t</span><span class="op" id="6951681">.</span><span class="ident" id="6951682">Errorf</span><span class="op" id="6951688">(</span><span class="string" id="6951689">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;want&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6951719">,</span>&nbsp;<span class="ident" id="6951721">zipName</span><span class="op" id="6951728">,</span>&nbsp;<span class="ident" id="6951730">f</span><span class="op" id="6951731">.</span><span class="ident" id="6951732">Name</span><span class="op" id="6951736">,</span>&nbsp;<span class="ident" id="6951738">want</span><span class="op" id="6951742">,</span>&nbsp;<span class="ident" id="6951744">mode</span><span class="op" id="6951748">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6951751">}</span><br>
<span class="lineno"></span><span class="op" id="6951753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6951756">func</span>&nbsp;<span class="ident" id="6951761">TestInvalidFiles</span><span class="op" id="6951777">(</span><span class="ident" id="6951778">t</span>&nbsp;<span class="op" id="6951780">*</span><span class="ident" id="6951781">testing</span><span class="op" id="6951788">.</span><span class="ident" id="6951789">T</span><span class="op" id="6951790">)</span>&nbsp;<span class="op" id="6951792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6951795">const</span>&nbsp;<span class="ident" id="6951801">size</span>&nbsp;<span class="op" id="6951806">=</span>&nbsp;<span class="num" id="6951808">1024</span>&nbsp;<span class="op" id="6951813">*</span>&nbsp;<span class="num" id="6951815">70</span>&nbsp;<span class="comment" id="6951818">//&nbsp;70kb</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6951827">b</span>&nbsp;<span class="op" id="6951829">:=</span>&nbsp;<span class="builtinfunc" id="6951832">make</span><span class="op" id="6951836">(</span><span class="op" id="6951837">[</span><span class="op" id="6951838">]</span><span class="builtintype" id="6951839">byte</span><span class="op" id="6951843">,</span>&nbsp;<span class="ident" id="6951845">size</span><span class="op" id="6951849">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6951853">//&nbsp;zeroes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6951864">_</span><span class="op" id="6951865">,</span>&nbsp;<span class="ident" id="6951867">err</span>&nbsp;<span class="op" id="6951871">:=</span>&nbsp;<span class="ident" id="6951874">NewReader</span><span class="op" id="6951883">(</span><span class="ident" id="6951884">bytes</span><span class="op" id="6951889">.</span><span class="ident" id="6951890">NewReader</span><span class="op" id="6951899">(</span><span class="ident" id="6951900">b</span><span class="op" id="6951901">)</span><span class="op" id="6951902">,</span>&nbsp;<span class="ident" id="6951904">size</span><span class="op" id="6951908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6951911">if</span>&nbsp;<span class="ident" id="6951914">err</span>&nbsp;<span class="op" id="6951918">!=</span>&nbsp;<span class="ident" id="6951921">ErrFormat</span>&nbsp;<span class="op" id="6951931">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6951935">t</span><span class="op" id="6951936">.</span><span class="ident" id="6951937">Errorf</span><span class="op" id="6951943">(</span><span class="string" id="6951944">&#34;zeroes:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6951971">,</span>&nbsp;<span class="ident" id="6951973">err</span><span class="op" id="6951976">,</span>&nbsp;<span class="ident" id="6951978">ErrFormat</span><span class="op" id="6951987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6951990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6951994">//&nbsp;repeated&nbsp;directoryEndSignatures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6952030">sig</span>&nbsp;<span class="op" id="6952034">:=</span>&nbsp;<span class="builtinfunc" id="6952037">make</span><span class="op" id="6952041">(</span><span class="op" id="6952042">[</span><span class="op" id="6952043">]</span><span class="builtintype" id="6952044">byte</span><span class="op" id="6952048">,</span>&nbsp;<span class="num" id="6952050">4</span><span class="op" id="6952051">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6952054">binary</span><span class="op" id="6952060">.</span><span class="ident" id="6952061">LittleEndian</span><span class="op" id="6952073">.</span><span class="ident" id="6952074">PutUint32</span><span class="op" id="6952083">(</span><span class="ident" id="6952084">sig</span><span class="op" id="6952087">,</span>&nbsp;<span class="ident" id="6952089">directoryEndSignature</span><span class="op" id="6952110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6952113">for</span>&nbsp;<span class="ident" id="6952117">i</span>&nbsp;<span class="op" id="6952119">:=</span>&nbsp;<span class="num" id="6952122">0</span><span class="op" id="6952123">;</span>&nbsp;<span class="ident" id="6952125">i</span>&nbsp;<span class="op" id="6952127">&lt;</span>&nbsp;<span class="ident" id="6952129">size</span><span class="op" id="6952133">-</span><span class="num" id="6952134">4</span><span class="op" id="6952135">;</span>&nbsp;<span class="ident" id="6952137">i</span>&nbsp;<span class="op" id="6952139">+=</span>&nbsp;<span class="num" id="6952142">4</span>&nbsp;<span class="op" id="6952144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6952148">copy</span><span class="op" id="6952152">(</span><span class="ident" id="6952153">b</span><span class="op" id="6952154">[</span><span class="ident" id="6952155">i</span><span class="op" id="6952156">:</span><span class="ident" id="6952157">i</span><span class="op" id="6952158">+</span><span class="num" id="6952159">4</span><span class="op" id="6952160">]</span><span class="op" id="6952161">,</span>&nbsp;<span class="ident" id="6952163">sig</span><span class="op" id="6952166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6952169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6952172">_</span><span class="op" id="6952173">,</span>&nbsp;<span class="ident" id="6952175">err</span>&nbsp;<span class="op" id="6952179">=</span>&nbsp;<span class="ident" id="6952181">NewReader</span><span class="op" id="6952190">(</span><span class="ident" id="6952191">bytes</span><span class="op" id="6952196">.</span><span class="ident" id="6952197">NewReader</span><span class="op" id="6952206">(</span><span class="ident" id="6952207">b</span><span class="op" id="6952208">)</span><span class="op" id="6952209">,</span>&nbsp;<span class="ident" id="6952211">size</span><span class="op" id="6952215">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6952218">if</span>&nbsp;<span class="ident" id="6952221">err</span>&nbsp;<span class="op" id="6952225">!=</span>&nbsp;<span class="ident" id="6952228">ErrFormat</span>&nbsp;<span class="op" id="6952238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6952242">t</span><span class="op" id="6952243">.</span><span class="ident" id="6952244">Errorf</span><span class="op" id="6952250">(</span><span class="string" id="6952251">&#34;sigs:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6952276">,</span>&nbsp;<span class="ident" id="6952278">err</span><span class="op" id="6952281">,</span>&nbsp;<span class="ident" id="6952283">ErrFormat</span><span class="op" id="6952292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6952295">}</span><br>
<span class="lineno"></span><span class="op" id="6952297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span><span class="keyword" id="6952300">func</span>&nbsp;<span class="ident" id="6952305">messWith</span><span class="op" id="6952313">(</span><span class="ident" id="6952314">fileName</span>&nbsp;<span class="builtintype" id="6952323">string</span><span class="op" id="6952329">,</span>&nbsp;<span class="ident" id="6952331">corrupter</span>&nbsp;<span class="keyword" id="6952341">func</span><span class="op" id="6952345">(</span><span class="ident" id="6952346">b</span>&nbsp;<span class="op" id="6952348">[</span><span class="op" id="6952349">]</span><span class="builtintype" id="6952350">byte</span><span class="op" id="6952354">)</span><span class="op" id="6952355">)</span>&nbsp;<span class="op" id="6952357">(</span><span class="ident" id="6952358">r</span>&nbsp;<span class="ident" id="6952360">io</span><span class="op" id="6952362">.</span><span class="ident" id="6952363">ReaderAt</span><span class="op" id="6952371">,</span>&nbsp;<span class="ident" id="6952373">size</span>&nbsp;<span class="ident" id="6952378">int64</span><span class="op" id="6952383">)</span>&nbsp;<span class="op" id="6952385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6952388">data</span><span class="op" id="6952392">,</span>&nbsp;<span class="ident" id="6952394">err</span>&nbsp;<span class="op" id="6952398">:=</span>&nbsp;<span class="ident" id="6952401">ioutil</span><span class="op" id="6952407">.</span><span class="ident" id="6952408">ReadFile</span><span class="op" id="6952416">(</span><span class="ident" id="6952417">filepath</span><span class="op" id="6952425">.</span><span class="ident" id="6952426">Join</span><span class="op" id="6952430">(</span><span class="string" id="6952431">&#34;testdata&#34;</span><span class="op" id="6952441">,</span>&nbsp;<span class="ident" id="6952443">fileName</span><span class="op" id="6952451">)</span><span class="op" id="6952452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6952455">if</span>&nbsp;<span class="ident" id="6952458">err</span>&nbsp;<span class="op" id="6952462">!=</span>&nbsp;<span class="ident" id="6952465">nil</span>&nbsp;<span class="op" id="6952469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6952473">panic</span><span class="op" id="6952478">(</span><span class="string" id="6952479">&#34;Error&nbsp;reading&nbsp;&#34;</span>&nbsp;<span class="op" id="6952496">+</span>&nbsp;<span class="ident" id="6952498">fileName</span>&nbsp;<span class="op" id="6952507">+</span>&nbsp;<span class="string" id="6952509">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="6952514">+</span>&nbsp;<span class="ident" id="6952516">err</span><span class="op" id="6952519">.</span><span class="ident" id="6952520">Error</span><span class="op" id="6952525">(</span><span class="op" id="6952526">)</span><span class="op" id="6952527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6952530">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6952533">corrupter</span><span class="op" id="6952542">(</span><span class="ident" id="6952543">data</span><span class="op" id="6952547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6952550">return</span>&nbsp;<span class="ident" id="6952557">bytes</span><span class="op" id="6952562">.</span><span class="ident" id="6952563">NewReader</span><span class="op" id="6952572">(</span><span class="ident" id="6952573">data</span><span class="op" id="6952577">)</span><span class="op" id="6952578">,</span>&nbsp;<span class="ident" id="6952580">int64</span><span class="op" id="6952585">(</span><span class="builtinfunc" id="6952586">len</span><span class="op" id="6952589">(</span><span class="ident" id="6952590">data</span><span class="op" id="6952594">)</span><span class="op" id="6952595">)</span><br>
<span class="lineno"></span><span class="op" id="6952597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6952600">func</span>&nbsp;<span class="ident" id="6952605">returnCorruptCRC32Zip</span><span class="op" id="6952626">(</span><span class="op" id="6952627">)</span>&nbsp;<span class="op" id="6952629">(</span><span class="ident" id="6952630">r</span>&nbsp;<span class="ident" id="6952632">io</span><span class="op" id="6952634">.</span><span class="ident" id="6952635">ReaderAt</span><span class="op" id="6952643">,</span>&nbsp;<span class="ident" id="6952645">size</span>&nbsp;<span class="ident" id="6952650">int64</span><span class="op" id="6952655">)</span>&nbsp;<span class="op" id="6952657">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6952660">return</span>&nbsp;<span class="ident" id="6952667">messWith</span><span class="op" id="6952675">(</span><span class="string" id="6952676">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="6952702">,</span>&nbsp;<span class="keyword" id="6952704">func</span><span class="op" id="6952708">(</span><span class="ident" id="6952709">b</span>&nbsp;<span class="op" id="6952711">[</span><span class="op" id="6952712">]</span><span class="builtintype" id="6952713">byte</span><span class="op" id="6952717">)</span>&nbsp;<span class="op" id="6952719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6952723">//&nbsp;Corrupt&nbsp;one&nbsp;of&nbsp;the&nbsp;CRC32s&nbsp;in&nbsp;the&nbsp;data&nbsp;descriptor:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6952778">b</span><span class="op" id="6952779">[</span><span class="num" id="6952780">0x2d</span><span class="op" id="6952784">]</span><span class="op" id="6952785">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6952789">}</span><span class="op" id="6952790">)</span><br>
<span class="lineno"></span><span class="op" id="6952792">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="6952795">func</span>&nbsp;<span class="ident" id="6952800">returnCorruptNotStreamedZip</span><span class="op" id="6952827">(</span><span class="op" id="6952828">)</span>&nbsp;<span class="op" id="6952830">(</span><span class="ident" id="6952831">r</span>&nbsp;<span class="ident" id="6952833">io</span><span class="op" id="6952835">.</span><span class="ident" id="6952836">ReaderAt</span><span class="op" id="6952844">,</span>&nbsp;<span class="ident" id="6952846">size</span>&nbsp;<span class="ident" id="6952851">int64</span><span class="op" id="6952856">)</span>&nbsp;<span class="op" id="6952858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6952861">return</span>&nbsp;<span class="ident" id="6952868">messWith</span><span class="op" id="6952876">(</span><span class="string" id="6952877">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="6952901">,</span>&nbsp;<span class="keyword" id="6952903">func</span><span class="op" id="6952907">(</span><span class="ident" id="6952908">b</span>&nbsp;<span class="op" id="6952910">[</span><span class="op" id="6952911">]</span><span class="builtintype" id="6952912">byte</span><span class="op" id="6952916">)</span>&nbsp;<span class="op" id="6952918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6952922">//&nbsp;Corrupt&nbsp;foo.txt&#39;s&nbsp;final&nbsp;crc32&nbsp;byte,&nbsp;in&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6952971">//&nbsp;the&nbsp;file&nbsp;header&nbsp;and&nbsp;TOC.&nbsp;(0x7e&nbsp;-&gt;&nbsp;0x7f)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6953016">b</span><span class="op" id="6953017">[</span><span class="num" id="6953018">0x11</span><span class="op" id="6953022">]</span><span class="op" id="6953023">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6953028">b</span><span class="op" id="6953029">[</span><span class="num" id="6953030">0x9d</span><span class="op" id="6953034">]</span><span class="op" id="6953035">++</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6953041">//&nbsp;TODO(bradfitz):&nbsp;add&nbsp;a&nbsp;new&nbsp;test&nbsp;that&nbsp;only&nbsp;corrupts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6953096">//&nbsp;one&nbsp;of&nbsp;these&nbsp;values,&nbsp;and&nbsp;verify&nbsp;that&nbsp;that&#39;s&nbsp;also&nbsp;an</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6953153">//&nbsp;error.&nbsp;Currently,&nbsp;the&nbsp;reader&nbsp;code&nbsp;doesn&#39;t&nbsp;verify&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6953211">//&nbsp;fileheader&nbsp;and&nbsp;TOC&#39;s&nbsp;crc32&nbsp;match&nbsp;if&nbsp;they&#39;re&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6953265">//&nbsp;non-zero&nbsp;and&nbsp;only&nbsp;the&nbsp;second&nbsp;line&nbsp;above,&nbsp;the&nbsp;TOC,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6953320">//&nbsp;is&nbsp;what&nbsp;matters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6953341">}</span><span class="op" id="6953342">)</span><br>
<span class="lineno">465</span><span class="op" id="6953344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6953347">//&nbsp;rZipBytes&nbsp;returns&nbsp;the&nbsp;bytes&nbsp;of&nbsp;a&nbsp;recursive&nbsp;zip&nbsp;file,&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="6953411">//&nbsp;putting&nbsp;it&nbsp;on&nbsp;disk&nbsp;and&nbsp;triggering&nbsp;certain&nbsp;virus&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="keyword" id="6953472">func</span>&nbsp;<span class="ident" id="6953477">rZipBytes</span><span class="op" id="6953486">(</span><span class="op" id="6953487">)</span>&nbsp;<span class="op" id="6953489">[</span><span class="op" id="6953490">]</span><span class="builtintype" id="6953491">byte</span>&nbsp;<span class="op" id="6953496">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6953499">s</span>&nbsp;<span class="op" id="6953501">:=</span>&nbsp;<span class="string" id="6953504">`<br>
<span class="lineno"></span>0000000&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4<br>
<span class="lineno"></span>0000010&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f<br>
<span class="lineno"></span>0000020&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00<br>
<span class="lineno"></span>0000030&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00<br>
<span class="lineno">475</span>0000040&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00<br>
<span class="lineno"></span>0000050&nbsp;2f&nbsp;00&nbsp;d0&nbsp;ff&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000060&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8<br>
<span class="lineno"></span>0000070&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;2f<br>
<span class="lineno"></span>0000080&nbsp;00&nbsp;d0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e<br>
<span class="lineno">480</span>0000090&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;14&nbsp;00&nbsp;eb<br>
<span class="lineno"></span>00000a0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff<br>
<span class="lineno"></span>00000b0&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42<br>
<span class="lineno"></span>00000c0&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14<br>
<span class="lineno"></span>00000d0&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21<br>
<span class="lineno">485</span>00000e0&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;34&nbsp;00&nbsp;cb<br>
<span class="lineno"></span>00000f0&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff<br>
<span class="lineno"></span>0000100&nbsp;00&nbsp;34&nbsp;00&nbsp;cb&nbsp;ff&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a<br>
<span class="lineno"></span>0000110&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3<br>
<span class="lineno"></span>0000120&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06&nbsp;06&nbsp;40&nbsp;00&nbsp;06<br>
<span class="lineno">490</span>0000130&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000140&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf<br>
<span class="lineno"></span>0000150&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06<br>
<span class="lineno"></span>0000160&nbsp;06&nbsp;40&nbsp;00&nbsp;06&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;50&nbsp;4b&nbsp;01<br>
<span class="lineno"></span>0000170&nbsp;02&nbsp;14&nbsp;00&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89<br>
<span class="lineno">495</span>0000180&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000190&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a<br>
<span class="lineno"></span>00001a0&nbsp;69&nbsp;70&nbsp;50&nbsp;4b&nbsp;05&nbsp;06&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;01&nbsp;00&nbsp;01&nbsp;00&nbsp;35&nbsp;00<br>
<span class="lineno"></span>00001b0&nbsp;00&nbsp;00&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6955052">s</span>&nbsp;<span class="op" id="6955054">=</span>&nbsp;<span class="ident" id="6955056">regexp</span><span class="op" id="6955062">.</span><span class="ident" id="6955063">MustCompile</span><span class="op" id="6955074">(</span><span class="string" id="6955075">`[0-9a-f]{7}`</span><span class="op" id="6955088">)</span><span class="op" id="6955089">.</span><span class="ident" id="6955090">ReplaceAllString</span><span class="op" id="6955106">(</span><span class="ident" id="6955107">s</span><span class="op" id="6955108">,</span>&nbsp;<span class="string" id="6955110">&#34;&#34;</span><span class="op" id="6955112">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6955115">s</span>&nbsp;<span class="op" id="6955117">=</span>&nbsp;<span class="ident" id="6955119">regexp</span><span class="op" id="6955125">.</span><span class="ident" id="6955126">MustCompile</span><span class="op" id="6955137">(</span><span class="string" id="6955138">`\s+`</span><span class="op" id="6955143">)</span><span class="op" id="6955144">.</span><span class="ident" id="6955145">ReplaceAllString</span><span class="op" id="6955161">(</span><span class="ident" id="6955162">s</span><span class="op" id="6955163">,</span>&nbsp;<span class="string" id="6955165">&#34;&#34;</span><span class="op" id="6955167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6955170">b</span><span class="op" id="6955171">,</span>&nbsp;<span class="ident" id="6955173">err</span>&nbsp;<span class="op" id="6955177">:=</span>&nbsp;<span class="ident" id="6955180">hex</span><span class="op" id="6955183">.</span><span class="ident" id="6955184">DecodeString</span><span class="op" id="6955196">(</span><span class="ident" id="6955197">s</span><span class="op" id="6955198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6955201">if</span>&nbsp;<span class="ident" id="6955204">err</span>&nbsp;<span class="op" id="6955208">!=</span>&nbsp;<span class="ident" id="6955211">nil</span>&nbsp;<span class="op" id="6955215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6955219">panic</span><span class="op" id="6955224">(</span><span class="ident" id="6955225">err</span><span class="op" id="6955228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6955231">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6955234">return</span>&nbsp;<span class="ident" id="6955241">b</span><br>
<span class="lineno"></span><span class="op" id="6955243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6955246">func</span>&nbsp;<span class="ident" id="6955251">returnRecursiveZip</span><span class="op" id="6955269">(</span><span class="op" id="6955270">)</span>&nbsp;<span class="op" id="6955272">(</span><span class="ident" id="6955273">r</span>&nbsp;<span class="ident" id="6955275">io</span><span class="op" id="6955277">.</span><span class="ident" id="6955278">ReaderAt</span><span class="op" id="6955286">,</span>&nbsp;<span class="ident" id="6955288">size</span>&nbsp;<span class="ident" id="6955293">int64</span><span class="op" id="6955298">)</span>&nbsp;<span class="op" id="6955300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6955303">b</span>&nbsp;<span class="op" id="6955305">:=</span>&nbsp;<span class="ident" id="6955308">rZipBytes</span><span class="op" id="6955317">(</span><span class="op" id="6955318">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6955321">return</span>&nbsp;<span class="ident" id="6955328">bytes</span><span class="op" id="6955333">.</span><span class="ident" id="6955334">NewReader</span><span class="op" id="6955343">(</span><span class="ident" id="6955344">b</span><span class="op" id="6955345">)</span><span class="op" id="6955346">,</span>&nbsp;<span class="ident" id="6955348">int64</span><span class="op" id="6955353">(</span><span class="builtinfunc" id="6955354">len</span><span class="op" id="6955357">(</span><span class="ident" id="6955358">b</span><span class="op" id="6955359">)</span><span class="op" id="6955360">)</span><br>
<span class="lineno"></span><span class="op" id="6955362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6955365">func</span>&nbsp;<span class="ident" id="6955370">TestIssue8186</span><span class="op" id="6955383">(</span><span class="ident" id="6955384">t</span>&nbsp;<span class="op" id="6955386">*</span><span class="ident" id="6955387">testing</span><span class="op" id="6955394">.</span><span class="ident" id="6955395">T</span><span class="op" id="6955396">)</span>&nbsp;<span class="op" id="6955398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6955401">//&nbsp;Directory&nbsp;headers&nbsp;&amp;&nbsp;data&nbsp;found&nbsp;in&nbsp;the&nbsp;TOC&nbsp;of&nbsp;a&nbsp;JAR&nbsp;file.</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6955462">dirEnts</span>&nbsp;<span class="op" id="6955470">:=</span>&nbsp;<span class="op" id="6955473">[</span><span class="op" id="6955474">]</span><span class="builtintype" id="6955475">string</span><span class="op" id="6955481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6955485">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\xaa\x1b\x06\xf0\x81\x02\x00\x00\x81\x02\x00\x00-\x00\x05\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00res/drawable-xhdpi-v4/ic_actionbar_accept.png\xfe\xca\x00\x00\x00&#34;</span><span class="op" id="6955712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6955716">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\x90K\x89\xc7t\n\x00\x00t\n\x00\x00\x0e\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xd1\x02\x00\x00resources.arsc\x00\x00\x00&#34;</span><span class="op" id="6955894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6955898">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xff$\x18\xed3\x03\x00\x00\xb4\b\x00\x00\x13\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00t\r\x00\x00AndroidManifest.xml&#34;</span><span class="op" id="6956069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6956073">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\x14\xc5K\xab\x192\x02\x00\xc8\xcd\x04\x00\v\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe8\x10\x00\x00classes.dex&#34;</span><span class="op" id="6956241">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6956245">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?E\x96\nD\xac\x01\x00\x00P\x03\x00\x00&amp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:C\x02\x00res/layout/actionbar_set_wallpaper.xml&#34;</span><span class="op" id="6956428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6956432">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?Ļ\x14\xe3\xd8\x01\x00\x00\xd8\x03\x00\x00&nbsp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:E\x02\x00res/layout/wallpaper_cropper.xml&#34;</span><span class="op" id="6956614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6956618">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?}\xc1\x15\x9eZ\x01\x00\x00!\x02\x00\x00\x14\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00`G\x02\x00META-INF/MANIFEST.MF&#34;</span><span class="op" id="6956788">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6956792">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xe6\x98Ьo\x01\x00\x00\x84\x02\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfcH\x02\x00META-INF/CERT.SF&#34;</span><span class="op" id="6956961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6956965">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xbfP\x96b\x86\x04\x00\x00\xb2\x06\x00\x00\x11\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xa9J\x02\x00META-INF/CERT.RSA&#34;</span><span class="op" id="6957138">,</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6957141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6957144">for</span>&nbsp;<span class="ident" id="6957148">i</span><span class="op" id="6957149">,</span>&nbsp;<span class="ident" id="6957151">s</span>&nbsp;<span class="op" id="6957153">:=</span>&nbsp;<span class="keyword" id="6957156">range</span>&nbsp;<span class="ident" id="6957162">dirEnts</span>&nbsp;<span class="op" id="6957170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6957174">var</span>&nbsp;<span class="ident" id="6957178">f</span>&nbsp;<span class="ident" id="6957180">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6957187">err</span>&nbsp;<span class="op" id="6957191">:=</span>&nbsp;<span class="ident" id="6957194">readDirectoryHeader</span><span class="op" id="6957213">(</span><span class="op" id="6957214">&amp;</span><span class="ident" id="6957215">f</span><span class="op" id="6957216">,</span>&nbsp;<span class="ident" id="6957218">strings</span><span class="op" id="6957225">.</span><span class="ident" id="6957226">NewReader</span><span class="op" id="6957235">(</span><span class="ident" id="6957236">s</span><span class="op" id="6957237">)</span><span class="op" id="6957238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6957242">if</span>&nbsp;<span class="ident" id="6957245">err</span>&nbsp;<span class="op" id="6957249">!=</span>&nbsp;<span class="ident" id="6957252">nil</span>&nbsp;<span class="op" id="6957256">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6957261">t</span><span class="op" id="6957262">.</span><span class="ident" id="6957263">Errorf</span><span class="op" id="6957269">(</span><span class="string" id="6957270">&#34;error&nbsp;reading&nbsp;#%d:&nbsp;%v&#34;</span><span class="op" id="6957293">,</span>&nbsp;<span class="ident" id="6957295">i</span><span class="op" id="6957296">,</span>&nbsp;<span class="ident" id="6957298">err</span><span class="op" id="6957301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6957305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6957308">}</span><br>
<span class="lineno"></span><span class="op" id="6957310">}</span>
</div>
</body>
</html>
