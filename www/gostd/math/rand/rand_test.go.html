<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/rand</h2>
<ul>
<li><a href="/gostd/math/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/rand/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/rand/normal.go.html">normal.go</a></li>
<li><a href="/gostd/math/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/math/rand/rand_test.go.html" class="current">rand_test.go</a></li>
<li><a href="/gostd/math/rand/regress_test.go.html">regress_test.go</a></li>
<li><a href="/gostd/math/rand/rng.go.html">rng.go</a></li>
<li><a href="/gostd/math/rand/zipf.go.html">zipf.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7946162">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7946217">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7946271">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7946322">package</span>&nbsp;<span class="ident" id="7946330">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7946336">import</span>&nbsp;<span class="op" id="7946343">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7946346">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7946356">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7946363">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7946371">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7946381">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7946384">const</span>&nbsp;<span class="op" id="7946390">(</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946393">numTestSamples</span>&nbsp;<span class="op" id="7946408">=</span>&nbsp;<span class="num" id="7946410">10000</span><br>
<span class="lineno"></span><span class="op" id="7946416">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7946419">type</span>&nbsp;<span class="ident" id="7946424">statsResults</span>&nbsp;<span class="keyword" id="7946437">struct</span>&nbsp;<span class="op" id="7946444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946447">mean</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7946459">float64</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946468">stddev</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7946480">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946489">closeEnough</span>&nbsp;<span class="builtintype" id="7946501">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946510">maxError</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7946522">float64</span><br>
<span class="lineno"></span><span class="op" id="7946530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7946533">func</span>&nbsp;<span class="ident" id="7946538">max</span><span class="op" id="7946541">(</span><span class="ident" id="7946542">a</span><span class="op" id="7946543">,</span>&nbsp;<span class="ident" id="7946545">b</span>&nbsp;<span class="builtintype" id="7946547">float64</span><span class="op" id="7946554">)</span>&nbsp;<span class="builtintype" id="7946556">float64</span>&nbsp;<span class="op" id="7946564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946567">if</span>&nbsp;<span class="ident" id="7946570">a</span>&nbsp;<span class="op" id="7946572">&gt;</span>&nbsp;<span class="ident" id="7946574">b</span>&nbsp;<span class="op" id="7946576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946580">return</span>&nbsp;<span class="ident" id="7946587">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7946590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946593">return</span>&nbsp;<span class="ident" id="7946600">b</span><br>
<span class="lineno">30</span><span class="op" id="7946602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7946605">func</span>&nbsp;<span class="ident" id="7946610">nearEqual</span><span class="op" id="7946619">(</span><span class="ident" id="7946620">a</span><span class="op" id="7946621">,</span>&nbsp;<span class="ident" id="7946623">b</span><span class="op" id="7946624">,</span>&nbsp;<span class="ident" id="7946626">closeEnough</span><span class="op" id="7946637">,</span>&nbsp;<span class="ident" id="7946639">maxError</span>&nbsp;<span class="builtintype" id="7946648">float64</span><span class="op" id="7946655">)</span>&nbsp;<span class="builtintype" id="7946657">bool</span>&nbsp;<span class="op" id="7946662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946665">absDiff</span>&nbsp;<span class="op" id="7946673">:=</span>&nbsp;<span class="ident" id="7946676">math</span><span class="op" id="7946680">.</span><span class="ident" id="7946681">Abs</span><span class="op" id="7946684">(</span><span class="ident" id="7946685">a</span>&nbsp;<span class="op" id="7946687">-</span>&nbsp;<span class="ident" id="7946689">b</span><span class="op" id="7946690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946693">if</span>&nbsp;<span class="ident" id="7946696">absDiff</span>&nbsp;<span class="op" id="7946704">&lt;</span>&nbsp;<span class="ident" id="7946706">closeEnough</span>&nbsp;<span class="op" id="7946718">{</span>&nbsp;<span class="comment" id="7946720">//&nbsp;Necessary&nbsp;when&nbsp;one&nbsp;value&nbsp;is&nbsp;zero&nbsp;and&nbsp;one&nbsp;value&nbsp;is&nbsp;close&nbsp;to&nbsp;zero.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946790">return</span>&nbsp;<span class="builtintype" id="7946797">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7946803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946806">return</span>&nbsp;<span class="ident" id="7946813">absDiff</span><span class="op" id="7946820">/</span><span class="ident" id="7946821">max</span><span class="op" id="7946824">(</span><span class="ident" id="7946825">math</span><span class="op" id="7946829">.</span><span class="ident" id="7946830">Abs</span><span class="op" id="7946833">(</span><span class="ident" id="7946834">a</span><span class="op" id="7946835">)</span><span class="op" id="7946836">,</span>&nbsp;<span class="ident" id="7946838">math</span><span class="op" id="7946842">.</span><span class="ident" id="7946843">Abs</span><span class="op" id="7946846">(</span><span class="ident" id="7946847">b</span><span class="op" id="7946848">)</span><span class="op" id="7946849">)</span>&nbsp;<span class="op" id="7946851">&lt;</span>&nbsp;<span class="ident" id="7946853">maxError</span><br>
<span class="lineno"></span><span class="op" id="7946862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="7946865">var</span>&nbsp;<span class="ident" id="7946869">testSeeds</span>&nbsp;<span class="op" id="7946879">=</span>&nbsp;<span class="op" id="7946881">[</span><span class="op" id="7946882">]</span><span class="ident" id="7946883">int64</span><span class="op" id="7946888">{</span><span class="num" id="7946889">1</span><span class="op" id="7946890">,</span>&nbsp;<span class="num" id="7946892">1754801282</span><span class="op" id="7946902">,</span>&nbsp;<span class="num" id="7946904">1698661970</span><span class="op" id="7946914">,</span>&nbsp;<span class="num" id="7946916">1550503961</span><span class="op" id="7946926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7946929">//&nbsp;checkSimilarDistribution&nbsp;returns&nbsp;success&nbsp;if&nbsp;the&nbsp;mean&nbsp;and&nbsp;stddev&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="7947003">//&nbsp;two&nbsp;statsResults&nbsp;are&nbsp;similar.</span><br>
<span class="lineno"></span><span class="keyword" id="7947036">func</span>&nbsp;<span class="op" id="7947041">(</span><span class="ident" id="7947042">this</span>&nbsp;<span class="op" id="7947047">*</span><span class="ident" id="7947048">statsResults</span><span class="op" id="7947060">)</span>&nbsp;<span class="ident" id="7947062">checkSimilarDistribution</span><span class="op" id="7947086">(</span><span class="ident" id="7947087">expected</span>&nbsp;<span class="op" id="7947096">*</span><span class="ident" id="7947097">statsResults</span><span class="op" id="7947109">)</span>&nbsp;<span class="builtintype" id="7947111">error</span>&nbsp;<span class="op" id="7947117">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7947120">if</span>&nbsp;<span class="op" id="7947123">!</span><span class="ident" id="7947124">nearEqual</span><span class="op" id="7947133">(</span><span class="ident" id="7947134">this</span><span class="op" id="7947138">.</span><span class="ident" id="7947139">mean</span><span class="op" id="7947143">,</span>&nbsp;<span class="ident" id="7947145">expected</span><span class="op" id="7947153">.</span><span class="ident" id="7947154">mean</span><span class="op" id="7947158">,</span>&nbsp;<span class="ident" id="7947160">expected</span><span class="op" id="7947168">.</span><span class="ident" id="7947169">closeEnough</span><span class="op" id="7947180">,</span>&nbsp;<span class="ident" id="7947182">expected</span><span class="op" id="7947190">.</span><span class="ident" id="7947191">maxError</span><span class="op" id="7947199">)</span>&nbsp;<span class="op" id="7947201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947205">s</span>&nbsp;<span class="op" id="7947207">:=</span>&nbsp;<span class="ident" id="7947210">fmt</span><span class="op" id="7947213">.</span><span class="ident" id="7947214">Sprintf</span><span class="op" id="7947221">(</span><span class="string" id="7947222">&#34;mean&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7947260">,</span>&nbsp;<span class="ident" id="7947262">this</span><span class="op" id="7947266">.</span><span class="ident" id="7947267">mean</span><span class="op" id="7947271">,</span>&nbsp;<span class="ident" id="7947273">expected</span><span class="op" id="7947281">.</span><span class="ident" id="7947282">mean</span><span class="op" id="7947286">,</span>&nbsp;<span class="ident" id="7947288">expected</span><span class="op" id="7947296">.</span><span class="ident" id="7947297">closeEnough</span><span class="op" id="7947308">,</span>&nbsp;<span class="ident" id="7947310">expected</span><span class="op" id="7947318">.</span><span class="ident" id="7947319">maxError</span><span class="op" id="7947327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947331">fmt</span><span class="op" id="7947334">.</span><span class="ident" id="7947335">Println</span><span class="op" id="7947342">(</span><span class="ident" id="7947343">s</span><span class="op" id="7947344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7947348">return</span>&nbsp;<span class="ident" id="7947355">errors</span><span class="op" id="7947361">.</span><span class="ident" id="7947362">New</span><span class="op" id="7947365">(</span><span class="ident" id="7947366">s</span><span class="op" id="7947367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7947370">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7947373">if</span>&nbsp;<span class="op" id="7947376">!</span><span class="ident" id="7947377">nearEqual</span><span class="op" id="7947386">(</span><span class="ident" id="7947387">this</span><span class="op" id="7947391">.</span><span class="ident" id="7947392">stddev</span><span class="op" id="7947398">,</span>&nbsp;<span class="ident" id="7947400">expected</span><span class="op" id="7947408">.</span><span class="ident" id="7947409">stddev</span><span class="op" id="7947415">,</span>&nbsp;<span class="num" id="7947417">0</span><span class="op" id="7947418">,</span>&nbsp;<span class="ident" id="7947420">expected</span><span class="op" id="7947428">.</span><span class="ident" id="7947429">maxError</span><span class="op" id="7947437">)</span>&nbsp;<span class="op" id="7947439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947443">s</span>&nbsp;<span class="op" id="7947445">:=</span>&nbsp;<span class="ident" id="7947448">fmt</span><span class="op" id="7947451">.</span><span class="ident" id="7947452">Sprintf</span><span class="op" id="7947459">(</span><span class="string" id="7947460">&#34;stddev&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7947500">,</span>&nbsp;<span class="ident" id="7947502">this</span><span class="op" id="7947506">.</span><span class="ident" id="7947507">stddev</span><span class="op" id="7947513">,</span>&nbsp;<span class="ident" id="7947515">expected</span><span class="op" id="7947523">.</span><span class="ident" id="7947524">stddev</span><span class="op" id="7947530">,</span>&nbsp;<span class="ident" id="7947532">expected</span><span class="op" id="7947540">.</span><span class="ident" id="7947541">closeEnough</span><span class="op" id="7947552">,</span>&nbsp;<span class="ident" id="7947554">expected</span><span class="op" id="7947562">.</span><span class="ident" id="7947563">maxError</span><span class="op" id="7947571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947575">fmt</span><span class="op" id="7947578">.</span><span class="ident" id="7947579">Println</span><span class="op" id="7947586">(</span><span class="ident" id="7947587">s</span><span class="op" id="7947588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7947592">return</span>&nbsp;<span class="ident" id="7947599">errors</span><span class="op" id="7947605">.</span><span class="ident" id="7947606">New</span><span class="op" id="7947609">(</span><span class="ident" id="7947610">s</span><span class="op" id="7947611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7947614">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7947617">return</span>&nbsp;<span class="ident" id="7947624">nil</span><br>
<span class="lineno"></span><span class="op" id="7947628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7947631">func</span>&nbsp;<span class="ident" id="7947636">getStatsResults</span><span class="op" id="7947651">(</span><span class="ident" id="7947652">samples</span>&nbsp;<span class="op" id="7947660">[</span><span class="op" id="7947661">]</span><span class="builtintype" id="7947662">float64</span><span class="op" id="7947669">)</span>&nbsp;<span class="op" id="7947671">*</span><span class="ident" id="7947672">statsResults</span>&nbsp;<span class="op" id="7947685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947688">res</span>&nbsp;<span class="op" id="7947692">:=</span>&nbsp;<span class="builtinfunc" id="7947695">new</span><span class="op" id="7947698">(</span><span class="ident" id="7947699">statsResults</span><span class="op" id="7947711">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7947714">var</span>&nbsp;<span class="ident" id="7947718">sum</span><span class="op" id="7947721">,</span>&nbsp;<span class="ident" id="7947723">squaresum</span>&nbsp;<span class="builtintype" id="7947733">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7947742">for</span>&nbsp;<span class="ident" id="7947746">_</span><span class="op" id="7947747">,</span>&nbsp;<span class="ident" id="7947749">s</span>&nbsp;<span class="op" id="7947751">:=</span>&nbsp;<span class="keyword" id="7947754">range</span>&nbsp;<span class="ident" id="7947760">samples</span>&nbsp;<span class="op" id="7947768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947772">sum</span>&nbsp;<span class="op" id="7947776">+=</span>&nbsp;<span class="ident" id="7947779">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947783">squaresum</span>&nbsp;<span class="op" id="7947793">+=</span>&nbsp;<span class="ident" id="7947796">s</span>&nbsp;<span class="op" id="7947798">*</span>&nbsp;<span class="ident" id="7947800">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7947803">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947806">res</span><span class="op" id="7947809">.</span><span class="ident" id="7947810">mean</span>&nbsp;<span class="op" id="7947815">=</span>&nbsp;<span class="ident" id="7947817">sum</span>&nbsp;<span class="op" id="7947821">/</span>&nbsp;<span class="builtintype" id="7947823">float64</span><span class="op" id="7947830">(</span><span class="builtinfunc" id="7947831">len</span><span class="op" id="7947834">(</span><span class="ident" id="7947835">samples</span><span class="op" id="7947842">)</span><span class="op" id="7947843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947846">res</span><span class="op" id="7947849">.</span><span class="ident" id="7947850">stddev</span>&nbsp;<span class="op" id="7947857">=</span>&nbsp;<span class="ident" id="7947859">math</span><span class="op" id="7947863">.</span><span class="ident" id="7947864">Sqrt</span><span class="op" id="7947868">(</span><span class="ident" id="7947869">squaresum</span><span class="op" id="7947878">/</span><span class="builtintype" id="7947879">float64</span><span class="op" id="7947886">(</span><span class="builtinfunc" id="7947887">len</span><span class="op" id="7947890">(</span><span class="ident" id="7947891">samples</span><span class="op" id="7947898">)</span><span class="op" id="7947899">)</span>&nbsp;<span class="op" id="7947901">-</span>&nbsp;<span class="ident" id="7947903">res</span><span class="op" id="7947906">.</span><span class="ident" id="7947907">mean</span><span class="op" id="7947911">*</span><span class="ident" id="7947912">res</span><span class="op" id="7947915">.</span><span class="ident" id="7947916">mean</span><span class="op" id="7947920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7947923">return</span>&nbsp;<span class="ident" id="7947930">res</span><br>
<span class="lineno"></span><span class="op" id="7947934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="7947937">func</span>&nbsp;<span class="ident" id="7947942">checkSampleDistribution</span><span class="op" id="7947965">(</span><span class="ident" id="7947966">t</span>&nbsp;<span class="op" id="7947968">*</span><span class="ident" id="7947969">testing</span><span class="op" id="7947976">.</span><span class="ident" id="7947977">T</span><span class="op" id="7947978">,</span>&nbsp;<span class="ident" id="7947980">samples</span>&nbsp;<span class="op" id="7947988">[</span><span class="op" id="7947989">]</span><span class="builtintype" id="7947990">float64</span><span class="op" id="7947997">,</span>&nbsp;<span class="ident" id="7947999">expected</span>&nbsp;<span class="op" id="7948008">*</span><span class="ident" id="7948009">statsResults</span><span class="op" id="7948021">)</span>&nbsp;<span class="op" id="7948023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948026">actual</span>&nbsp;<span class="op" id="7948033">:=</span>&nbsp;<span class="ident" id="7948036">getStatsResults</span><span class="op" id="7948051">(</span><span class="ident" id="7948052">samples</span><span class="op" id="7948059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948062">err</span>&nbsp;<span class="op" id="7948066">:=</span>&nbsp;<span class="ident" id="7948069">actual</span><span class="op" id="7948075">.</span><span class="ident" id="7948076">checkSimilarDistribution</span><span class="op" id="7948100">(</span><span class="ident" id="7948101">expected</span><span class="op" id="7948109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7948112">if</span>&nbsp;<span class="ident" id="7948115">err</span>&nbsp;<span class="op" id="7948119">!=</span>&nbsp;<span class="ident" id="7948122">nil</span>&nbsp;<span class="op" id="7948126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948130">t</span><span class="op" id="7948131">.</span><span class="ident" id="7948132">Errorf</span><span class="op" id="7948138">(</span><span class="ident" id="7948139">err</span><span class="op" id="7948142">.</span><span class="ident" id="7948143">Error</span><span class="op" id="7948148">(</span><span class="op" id="7948149">)</span><span class="op" id="7948150">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7948153">}</span><br>
<span class="lineno"></span><span class="op" id="7948155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7948158">func</span>&nbsp;<span class="ident" id="7948163">checkSampleSliceDistributions</span><span class="op" id="7948192">(</span><span class="ident" id="7948193">t</span>&nbsp;<span class="op" id="7948195">*</span><span class="ident" id="7948196">testing</span><span class="op" id="7948203">.</span><span class="ident" id="7948204">T</span><span class="op" id="7948205">,</span>&nbsp;<span class="ident" id="7948207">samples</span>&nbsp;<span class="op" id="7948215">[</span><span class="op" id="7948216">]</span><span class="builtintype" id="7948217">float64</span><span class="op" id="7948224">,</span>&nbsp;<span class="ident" id="7948226">nslices</span>&nbsp;<span class="builtintype" id="7948234">int</span><span class="op" id="7948237">,</span>&nbsp;<span class="ident" id="7948239">expected</span>&nbsp;<span class="op" id="7948248">*</span><span class="ident" id="7948249">statsResults</span><span class="op" id="7948261">)</span>&nbsp;<span class="op" id="7948263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948266">chunk</span>&nbsp;<span class="op" id="7948272">:=</span>&nbsp;<span class="builtinfunc" id="7948275">len</span><span class="op" id="7948278">(</span><span class="ident" id="7948279">samples</span><span class="op" id="7948286">)</span>&nbsp;<span class="op" id="7948288">/</span>&nbsp;<span class="ident" id="7948290">nslices</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7948299">for</span>&nbsp;<span class="ident" id="7948303">i</span>&nbsp;<span class="op" id="7948305">:=</span>&nbsp;<span class="num" id="7948308">0</span><span class="op" id="7948309">;</span>&nbsp;<span class="ident" id="7948311">i</span>&nbsp;<span class="op" id="7948313">&lt;</span>&nbsp;<span class="ident" id="7948315">nslices</span><span class="op" id="7948322">;</span>&nbsp;<span class="ident" id="7948324">i</span><span class="op" id="7948325">++</span>&nbsp;<span class="op" id="7948328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948332">low</span>&nbsp;<span class="op" id="7948336">:=</span>&nbsp;<span class="ident" id="7948339">i</span>&nbsp;<span class="op" id="7948341">*</span>&nbsp;<span class="ident" id="7948343">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7948351">var</span>&nbsp;<span class="ident" id="7948355">high</span>&nbsp;<span class="builtintype" id="7948360">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7948366">if</span>&nbsp;<span class="ident" id="7948369">i</span>&nbsp;<span class="op" id="7948371">==</span>&nbsp;<span class="ident" id="7948374">nslices</span><span class="op" id="7948381">-</span><span class="num" id="7948382">1</span>&nbsp;<span class="op" id="7948384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948389">high</span>&nbsp;<span class="op" id="7948394">=</span>&nbsp;<span class="builtinfunc" id="7948396">len</span><span class="op" id="7948399">(</span><span class="ident" id="7948400">samples</span><span class="op" id="7948407">)</span>&nbsp;<span class="op" id="7948409">-</span>&nbsp;<span class="num" id="7948411">1</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7948415">}</span>&nbsp;<span class="keyword" id="7948417">else</span>&nbsp;<span class="op" id="7948422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948427">high</span>&nbsp;<span class="op" id="7948432">=</span>&nbsp;<span class="op" id="7948434">(</span><span class="ident" id="7948435">i</span>&nbsp;<span class="op" id="7948437">+</span>&nbsp;<span class="num" id="7948439">1</span><span class="op" id="7948440">)</span>&nbsp;<span class="op" id="7948442">*</span>&nbsp;<span class="ident" id="7948444">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7948452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948456">checkSampleDistribution</span><span class="op" id="7948479">(</span><span class="ident" id="7948480">t</span><span class="op" id="7948481">,</span>&nbsp;<span class="ident" id="7948483">samples</span><span class="op" id="7948490">[</span><span class="ident" id="7948491">low</span><span class="op" id="7948494">:</span><span class="ident" id="7948495">high</span><span class="op" id="7948499">]</span><span class="op" id="7948500">,</span>&nbsp;<span class="ident" id="7948502">expected</span><span class="op" id="7948510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7948513">}</span><br>
<span class="lineno">90</span><span class="op" id="7948515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7948518">//</span><br>
<span class="lineno"></span><span class="comment" id="7948521">//&nbsp;Normal&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7948550">//</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="7948554">func</span>&nbsp;<span class="ident" id="7948559">generateNormalSamples</span><span class="op" id="7948580">(</span><span class="ident" id="7948581">nsamples</span>&nbsp;<span class="builtintype" id="7948590">int</span><span class="op" id="7948593">,</span>&nbsp;<span class="ident" id="7948595">mean</span><span class="op" id="7948599">,</span>&nbsp;<span class="ident" id="7948601">stddev</span>&nbsp;<span class="builtintype" id="7948608">float64</span><span class="op" id="7948615">,</span>&nbsp;<span class="ident" id="7948617">seed</span>&nbsp;<span class="ident" id="7948622">int64</span><span class="op" id="7948627">)</span>&nbsp;<span class="op" id="7948629">[</span><span class="op" id="7948630">]</span><span class="builtintype" id="7948631">float64</span>&nbsp;<span class="op" id="7948639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948642">r</span>&nbsp;<span class="op" id="7948644">:=</span>&nbsp;<span class="ident" id="7948647">New</span><span class="op" id="7948650">(</span><span class="ident" id="7948651">NewSource</span><span class="op" id="7948660">(</span><span class="ident" id="7948661">seed</span><span class="op" id="7948665">)</span><span class="op" id="7948666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948669">samples</span>&nbsp;<span class="op" id="7948677">:=</span>&nbsp;<span class="builtinfunc" id="7948680">make</span><span class="op" id="7948684">(</span><span class="op" id="7948685">[</span><span class="op" id="7948686">]</span><span class="builtintype" id="7948687">float64</span><span class="op" id="7948694">,</span>&nbsp;<span class="ident" id="7948696">nsamples</span><span class="op" id="7948704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7948707">for</span>&nbsp;<span class="ident" id="7948711">i</span>&nbsp;<span class="op" id="7948713">:=</span>&nbsp;<span class="keyword" id="7948716">range</span>&nbsp;<span class="ident" id="7948722">samples</span>&nbsp;<span class="op" id="7948730">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948734">samples</span><span class="op" id="7948741">[</span><span class="ident" id="7948742">i</span><span class="op" id="7948743">]</span>&nbsp;<span class="op" id="7948745">=</span>&nbsp;<span class="ident" id="7948747">r</span><span class="op" id="7948748">.</span><span class="ident" id="7948749">NormFloat64</span><span class="op" id="7948760">(</span><span class="op" id="7948761">)</span><span class="op" id="7948762">*</span><span class="ident" id="7948763">stddev</span>&nbsp;<span class="op" id="7948770">+</span>&nbsp;<span class="ident" id="7948772">mean</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7948778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7948781">return</span>&nbsp;<span class="ident" id="7948788">samples</span><br>
<span class="lineno"></span><span class="op" id="7948796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="7948799">func</span>&nbsp;<span class="ident" id="7948804">testNormalDistribution</span><span class="op" id="7948826">(</span><span class="ident" id="7948827">t</span>&nbsp;<span class="op" id="7948829">*</span><span class="ident" id="7948830">testing</span><span class="op" id="7948837">.</span><span class="ident" id="7948838">T</span><span class="op" id="7948839">,</span>&nbsp;<span class="ident" id="7948841">nsamples</span>&nbsp;<span class="builtintype" id="7948850">int</span><span class="op" id="7948853">,</span>&nbsp;<span class="ident" id="7948855">mean</span><span class="op" id="7948859">,</span>&nbsp;<span class="ident" id="7948861">stddev</span>&nbsp;<span class="builtintype" id="7948868">float64</span><span class="op" id="7948875">,</span>&nbsp;<span class="ident" id="7948877">seed</span>&nbsp;<span class="ident" id="7948882">int64</span><span class="op" id="7948887">)</span>&nbsp;<span class="op" id="7948889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7948892">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;mean=%v&nbsp;stddev=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;mean,&nbsp;stddev,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948989">samples</span>&nbsp;<span class="op" id="7948997">:=</span>&nbsp;<span class="ident" id="7949000">generateNormalSamples</span><span class="op" id="7949021">(</span><span class="ident" id="7949022">nsamples</span><span class="op" id="7949030">,</span>&nbsp;<span class="ident" id="7949032">mean</span><span class="op" id="7949036">,</span>&nbsp;<span class="ident" id="7949038">stddev</span><span class="op" id="7949044">,</span>&nbsp;<span class="ident" id="7949046">seed</span><span class="op" id="7949050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949053">errorScale</span>&nbsp;<span class="op" id="7949064">:=</span>&nbsp;<span class="ident" id="7949067">max</span><span class="op" id="7949070">(</span><span class="num" id="7949071">1.0</span><span class="op" id="7949074">,</span>&nbsp;<span class="ident" id="7949076">stddev</span><span class="op" id="7949082">)</span>&nbsp;<span class="comment" id="7949084">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;stddev</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949113">expected</span>&nbsp;<span class="op" id="7949122">:=</span>&nbsp;<span class="op" id="7949125">&amp;</span><span class="ident" id="7949126">statsResults</span><span class="op" id="7949138">{</span><span class="ident" id="7949139">mean</span><span class="op" id="7949143">,</span>&nbsp;<span class="ident" id="7949145">stddev</span><span class="op" id="7949151">,</span>&nbsp;<span class="num" id="7949153">0.10</span>&nbsp;<span class="op" id="7949158">*</span>&nbsp;<span class="ident" id="7949160">errorScale</span><span class="op" id="7949170">,</span>&nbsp;<span class="num" id="7949172">0.08</span>&nbsp;<span class="op" id="7949177">*</span>&nbsp;<span class="ident" id="7949179">errorScale</span><span class="op" id="7949189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7949193">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949262">checkSampleDistribution</span><span class="op" id="7949285">(</span><span class="ident" id="7949286">t</span><span class="op" id="7949287">,</span>&nbsp;<span class="ident" id="7949289">samples</span><span class="op" id="7949296">,</span>&nbsp;<span class="ident" id="7949298">expected</span><span class="op" id="7949306">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7949310">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949385">checkSampleSliceDistributions</span><span class="op" id="7949414">(</span><span class="ident" id="7949415">t</span><span class="op" id="7949416">,</span>&nbsp;<span class="ident" id="7949418">samples</span><span class="op" id="7949425">,</span>&nbsp;<span class="num" id="7949427">2</span><span class="op" id="7949428">,</span>&nbsp;<span class="ident" id="7949430">expected</span><span class="op" id="7949438">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7949442">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949516">checkSampleSliceDistributions</span><span class="op" id="7949545">(</span><span class="ident" id="7949546">t</span><span class="op" id="7949547">,</span>&nbsp;<span class="ident" id="7949549">samples</span><span class="op" id="7949556">,</span>&nbsp;<span class="num" id="7949558">7</span><span class="op" id="7949559">,</span>&nbsp;<span class="ident" id="7949561">expected</span><span class="op" id="7949569">)</span><br>
<span class="lineno">120</span><span class="op" id="7949571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7949574">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7949591">func</span>&nbsp;<span class="ident" id="7949596">TestStandardNormalValues</span><span class="op" id="7949620">(</span><span class="ident" id="7949621">t</span>&nbsp;<span class="op" id="7949623">*</span><span class="ident" id="7949624">testing</span><span class="op" id="7949631">.</span><span class="ident" id="7949632">T</span><span class="op" id="7949633">)</span>&nbsp;<span class="op" id="7949635">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7949638">for</span>&nbsp;<span class="ident" id="7949642">_</span><span class="op" id="7949643">,</span>&nbsp;<span class="ident" id="7949645">seed</span>&nbsp;<span class="op" id="7949650">:=</span>&nbsp;<span class="keyword" id="7949653">range</span>&nbsp;<span class="ident" id="7949659">testSeeds</span>&nbsp;<span class="op" id="7949669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949673">testNormalDistribution</span><span class="op" id="7949695">(</span><span class="ident" id="7949696">t</span><span class="op" id="7949697">,</span>&nbsp;<span class="ident" id="7949699">numTestSamples</span><span class="op" id="7949713">,</span>&nbsp;<span class="num" id="7949715">0</span><span class="op" id="7949716">,</span>&nbsp;<span class="num" id="7949718">1</span><span class="op" id="7949719">,</span>&nbsp;<span class="ident" id="7949721">seed</span><span class="op" id="7949725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7949728">}</span><br>
<span class="lineno"></span><span class="op" id="7949730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="7949733">func</span>&nbsp;<span class="ident" id="7949738">TestNonStandardNormalValues</span><span class="op" id="7949765">(</span><span class="ident" id="7949766">t</span>&nbsp;<span class="op" id="7949768">*</span><span class="ident" id="7949769">testing</span><span class="op" id="7949776">.</span><span class="ident" id="7949777">T</span><span class="op" id="7949778">)</span>&nbsp;<span class="op" id="7949780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949783">sdmax</span>&nbsp;<span class="op" id="7949789">:=</span>&nbsp;<span class="num" id="7949792">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949800">mmax</span>&nbsp;<span class="op" id="7949805">:=</span>&nbsp;<span class="num" id="7949808">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7949816">if</span>&nbsp;<span class="ident" id="7949819">testing</span><span class="op" id="7949826">.</span><span class="ident" id="7949827">Short</span><span class="op" id="7949832">(</span><span class="op" id="7949833">)</span>&nbsp;<span class="op" id="7949835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949839">sdmax</span>&nbsp;<span class="op" id="7949845">=</span>&nbsp;<span class="num" id="7949847">5</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949851">mmax</span>&nbsp;<span class="op" id="7949856">=</span>&nbsp;<span class="num" id="7949858">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7949861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7949864">for</span>&nbsp;<span class="ident" id="7949868">sd</span>&nbsp;<span class="op" id="7949871">:=</span>&nbsp;<span class="num" id="7949874">0.5</span><span class="op" id="7949877">;</span>&nbsp;<span class="ident" id="7949879">sd</span>&nbsp;<span class="op" id="7949882">&lt;</span>&nbsp;<span class="ident" id="7949884">sdmax</span><span class="op" id="7949889">;</span>&nbsp;<span class="ident" id="7949891">sd</span>&nbsp;<span class="op" id="7949894">*=</span>&nbsp;<span class="num" id="7949897">2</span>&nbsp;<span class="op" id="7949899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7949903">for</span>&nbsp;<span class="ident" id="7949907">m</span>&nbsp;<span class="op" id="7949909">:=</span>&nbsp;<span class="num" id="7949912">0.5</span><span class="op" id="7949915">;</span>&nbsp;<span class="ident" id="7949917">m</span>&nbsp;<span class="op" id="7949919">&lt;</span>&nbsp;<span class="ident" id="7949921">mmax</span><span class="op" id="7949925">;</span>&nbsp;<span class="ident" id="7949927">m</span>&nbsp;<span class="op" id="7949929">*=</span>&nbsp;<span class="num" id="7949932">2</span>&nbsp;<span class="op" id="7949934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7949939">for</span>&nbsp;<span class="ident" id="7949943">_</span><span class="op" id="7949944">,</span>&nbsp;<span class="ident" id="7949946">seed</span>&nbsp;<span class="op" id="7949951">:=</span>&nbsp;<span class="keyword" id="7949954">range</span>&nbsp;<span class="ident" id="7949960">testSeeds</span>&nbsp;<span class="op" id="7949970">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949976">testNormalDistribution</span><span class="op" id="7949998">(</span><span class="ident" id="7949999">t</span><span class="op" id="7950000">,</span>&nbsp;<span class="ident" id="7950002">numTestSamples</span><span class="op" id="7950016">,</span>&nbsp;<span class="ident" id="7950018">m</span><span class="op" id="7950019">,</span>&nbsp;<span class="ident" id="7950021">sd</span><span class="op" id="7950023">,</span>&nbsp;<span class="ident" id="7950025">seed</span><span class="op" id="7950029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7950035">if</span>&nbsp;<span class="ident" id="7950038">testing</span><span class="op" id="7950045">.</span><span class="ident" id="7950046">Short</span><span class="op" id="7950051">(</span><span class="op" id="7950052">)</span>&nbsp;<span class="op" id="7950054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7950061">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7950071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7950076">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7950080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7950083">}</span><br>
<span class="lineno"></span><span class="op" id="7950085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7950088">//</span><br>
<span class="lineno">150</span><span class="comment" id="7950091">//&nbsp;Exponential&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7950125">//</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7950129">func</span>&nbsp;<span class="ident" id="7950134">generateExponentialSamples</span><span class="op" id="7950160">(</span><span class="ident" id="7950161">nsamples</span>&nbsp;<span class="builtintype" id="7950170">int</span><span class="op" id="7950173">,</span>&nbsp;<span class="ident" id="7950175">rate</span>&nbsp;<span class="builtintype" id="7950180">float64</span><span class="op" id="7950187">,</span>&nbsp;<span class="ident" id="7950189">seed</span>&nbsp;<span class="ident" id="7950194">int64</span><span class="op" id="7950199">)</span>&nbsp;<span class="op" id="7950201">[</span><span class="op" id="7950202">]</span><span class="builtintype" id="7950203">float64</span>&nbsp;<span class="op" id="7950211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950214">r</span>&nbsp;<span class="op" id="7950216">:=</span>&nbsp;<span class="ident" id="7950219">New</span><span class="op" id="7950222">(</span><span class="ident" id="7950223">NewSource</span><span class="op" id="7950232">(</span><span class="ident" id="7950233">seed</span><span class="op" id="7950237">)</span><span class="op" id="7950238">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950241">samples</span>&nbsp;<span class="op" id="7950249">:=</span>&nbsp;<span class="builtinfunc" id="7950252">make</span><span class="op" id="7950256">(</span><span class="op" id="7950257">[</span><span class="op" id="7950258">]</span><span class="builtintype" id="7950259">float64</span><span class="op" id="7950266">,</span>&nbsp;<span class="ident" id="7950268">nsamples</span><span class="op" id="7950276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7950279">for</span>&nbsp;<span class="ident" id="7950283">i</span>&nbsp;<span class="op" id="7950285">:=</span>&nbsp;<span class="keyword" id="7950288">range</span>&nbsp;<span class="ident" id="7950294">samples</span>&nbsp;<span class="op" id="7950302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950306">samples</span><span class="op" id="7950313">[</span><span class="ident" id="7950314">i</span><span class="op" id="7950315">]</span>&nbsp;<span class="op" id="7950317">=</span>&nbsp;<span class="ident" id="7950319">r</span><span class="op" id="7950320">.</span><span class="ident" id="7950321">ExpFloat64</span><span class="op" id="7950331">(</span><span class="op" id="7950332">)</span>&nbsp;<span class="op" id="7950334">/</span>&nbsp;<span class="ident" id="7950336">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7950342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7950345">return</span>&nbsp;<span class="ident" id="7950352">samples</span><br>
<span class="lineno">160</span><span class="op" id="7950360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7950363">func</span>&nbsp;<span class="ident" id="7950368">testExponentialDistribution</span><span class="op" id="7950395">(</span><span class="ident" id="7950396">t</span>&nbsp;<span class="op" id="7950398">*</span><span class="ident" id="7950399">testing</span><span class="op" id="7950406">.</span><span class="ident" id="7950407">T</span><span class="op" id="7950408">,</span>&nbsp;<span class="ident" id="7950410">nsamples</span>&nbsp;<span class="builtintype" id="7950419">int</span><span class="op" id="7950422">,</span>&nbsp;<span class="ident" id="7950424">rate</span>&nbsp;<span class="builtintype" id="7950429">float64</span><span class="op" id="7950436">,</span>&nbsp;<span class="ident" id="7950438">seed</span>&nbsp;<span class="ident" id="7950443">int64</span><span class="op" id="7950448">)</span>&nbsp;<span class="op" id="7950450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7950453">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;rate=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;rate,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950532">mean</span>&nbsp;<span class="op" id="7950537">:=</span>&nbsp;<span class="num" id="7950540">1</span>&nbsp;<span class="op" id="7950542">/</span>&nbsp;<span class="ident" id="7950544">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950550">stddev</span>&nbsp;<span class="op" id="7950557">:=</span>&nbsp;<span class="ident" id="7950560">mean</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950567">samples</span>&nbsp;<span class="op" id="7950575">:=</span>&nbsp;<span class="ident" id="7950578">generateExponentialSamples</span><span class="op" id="7950604">(</span><span class="ident" id="7950605">nsamples</span><span class="op" id="7950613">,</span>&nbsp;<span class="ident" id="7950615">rate</span><span class="op" id="7950619">,</span>&nbsp;<span class="ident" id="7950621">seed</span><span class="op" id="7950625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950628">errorScale</span>&nbsp;<span class="op" id="7950639">:=</span>&nbsp;<span class="ident" id="7950642">max</span><span class="op" id="7950645">(</span><span class="num" id="7950646">1.0</span><span class="op" id="7950649">,</span>&nbsp;<span class="num" id="7950651">1</span><span class="op" id="7950652">/</span><span class="ident" id="7950653">rate</span><span class="op" id="7950657">)</span>&nbsp;<span class="comment" id="7950659">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;rate</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950705">expected</span>&nbsp;<span class="op" id="7950714">:=</span>&nbsp;<span class="op" id="7950717">&amp;</span><span class="ident" id="7950718">statsResults</span><span class="op" id="7950730">{</span><span class="ident" id="7950731">mean</span><span class="op" id="7950735">,</span>&nbsp;<span class="ident" id="7950737">stddev</span><span class="op" id="7950743">,</span>&nbsp;<span class="num" id="7950745">0.10</span>&nbsp;<span class="op" id="7950750">*</span>&nbsp;<span class="ident" id="7950752">errorScale</span><span class="op" id="7950762">,</span>&nbsp;<span class="num" id="7950764">0.20</span>&nbsp;<span class="op" id="7950769">*</span>&nbsp;<span class="ident" id="7950771">errorScale</span><span class="op" id="7950781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7950785">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950854">checkSampleDistribution</span><span class="op" id="7950877">(</span><span class="ident" id="7950878">t</span><span class="op" id="7950879">,</span>&nbsp;<span class="ident" id="7950881">samples</span><span class="op" id="7950888">,</span>&nbsp;<span class="ident" id="7950890">expected</span><span class="op" id="7950898">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7950902">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950977">checkSampleSliceDistributions</span><span class="op" id="7951006">(</span><span class="ident" id="7951007">t</span><span class="op" id="7951008">,</span>&nbsp;<span class="ident" id="7951010">samples</span><span class="op" id="7951017">,</span>&nbsp;<span class="num" id="7951019">2</span><span class="op" id="7951020">,</span>&nbsp;<span class="ident" id="7951022">expected</span><span class="op" id="7951030">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7951034">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951108">checkSampleSliceDistributions</span><span class="op" id="7951137">(</span><span class="ident" id="7951138">t</span><span class="op" id="7951139">,</span>&nbsp;<span class="ident" id="7951141">samples</span><span class="op" id="7951148">,</span>&nbsp;<span class="num" id="7951150">7</span><span class="op" id="7951151">,</span>&nbsp;<span class="ident" id="7951153">expected</span><span class="op" id="7951161">)</span><br>
<span class="lineno">180</span><span class="op" id="7951163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7951166">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7951183">func</span>&nbsp;<span class="ident" id="7951188">TestStandardExponentialValues</span><span class="op" id="7951217">(</span><span class="ident" id="7951218">t</span>&nbsp;<span class="op" id="7951220">*</span><span class="ident" id="7951221">testing</span><span class="op" id="7951228">.</span><span class="ident" id="7951229">T</span><span class="op" id="7951230">)</span>&nbsp;<span class="op" id="7951232">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951235">for</span>&nbsp;<span class="ident" id="7951239">_</span><span class="op" id="7951240">,</span>&nbsp;<span class="ident" id="7951242">seed</span>&nbsp;<span class="op" id="7951247">:=</span>&nbsp;<span class="keyword" id="7951250">range</span>&nbsp;<span class="ident" id="7951256">testSeeds</span>&nbsp;<span class="op" id="7951266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951270">testExponentialDistribution</span><span class="op" id="7951297">(</span><span class="ident" id="7951298">t</span><span class="op" id="7951299">,</span>&nbsp;<span class="ident" id="7951301">numTestSamples</span><span class="op" id="7951315">,</span>&nbsp;<span class="num" id="7951317">1</span><span class="op" id="7951318">,</span>&nbsp;<span class="ident" id="7951320">seed</span><span class="op" id="7951324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7951327">}</span><br>
<span class="lineno"></span><span class="op" id="7951329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="7951332">func</span>&nbsp;<span class="ident" id="7951337">TestNonStandardExponentialValues</span><span class="op" id="7951369">(</span><span class="ident" id="7951370">t</span>&nbsp;<span class="op" id="7951372">*</span><span class="ident" id="7951373">testing</span><span class="op" id="7951380">.</span><span class="ident" id="7951381">T</span><span class="op" id="7951382">)</span>&nbsp;<span class="op" id="7951384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951387">for</span>&nbsp;<span class="ident" id="7951391">rate</span>&nbsp;<span class="op" id="7951396">:=</span>&nbsp;<span class="num" id="7951399">0.05</span><span class="op" id="7951403">;</span>&nbsp;<span class="ident" id="7951405">rate</span>&nbsp;<span class="op" id="7951410">&lt;</span>&nbsp;<span class="num" id="7951412">10</span><span class="op" id="7951414">;</span>&nbsp;<span class="ident" id="7951416">rate</span>&nbsp;<span class="op" id="7951421">*=</span>&nbsp;<span class="num" id="7951424">2</span>&nbsp;<span class="op" id="7951426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951430">for</span>&nbsp;<span class="ident" id="7951434">_</span><span class="op" id="7951435">,</span>&nbsp;<span class="ident" id="7951437">seed</span>&nbsp;<span class="op" id="7951442">:=</span>&nbsp;<span class="keyword" id="7951445">range</span>&nbsp;<span class="ident" id="7951451">testSeeds</span>&nbsp;<span class="op" id="7951461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951466">testExponentialDistribution</span><span class="op" id="7951493">(</span><span class="ident" id="7951494">t</span><span class="op" id="7951495">,</span>&nbsp;<span class="ident" id="7951497">numTestSamples</span><span class="op" id="7951511">,</span>&nbsp;<span class="ident" id="7951513">rate</span><span class="op" id="7951517">,</span>&nbsp;<span class="ident" id="7951519">seed</span><span class="op" id="7951523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951528">if</span>&nbsp;<span class="ident" id="7951531">testing</span><span class="op" id="7951538">.</span><span class="ident" id="7951539">Short</span><span class="op" id="7951544">(</span><span class="op" id="7951545">)</span>&nbsp;<span class="op" id="7951547">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951553">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7951562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7951566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7951569">}</span><br>
<span class="lineno"></span><span class="op" id="7951571">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="comment" id="7951574">//</span><br>
<span class="lineno"></span><span class="comment" id="7951577">//&nbsp;Table&nbsp;generation&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7951603">//</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="7951607">func</span>&nbsp;<span class="ident" id="7951612">initNorm</span><span class="op" id="7951620">(</span><span class="op" id="7951621">)</span>&nbsp;<span class="op" id="7951623">(</span><span class="ident" id="7951624">testKn</span>&nbsp;<span class="op" id="7951631">[</span><span class="op" id="7951632">]</span><span class="builtintype" id="7951633">uint32</span><span class="op" id="7951639">,</span>&nbsp;<span class="ident" id="7951641">testWn</span><span class="op" id="7951647">,</span>&nbsp;<span class="ident" id="7951649">testFn</span>&nbsp;<span class="op" id="7951656">[</span><span class="op" id="7951657">]</span><span class="builtintype" id="7951658">float32</span><span class="op" id="7951665">)</span>&nbsp;<span class="op" id="7951667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951670">const</span>&nbsp;<span class="ident" id="7951676">m1</span>&nbsp;<span class="op" id="7951679">=</span>&nbsp;<span class="num" id="7951681">1</span>&nbsp;<span class="op" id="7951683">&lt;&lt;</span>&nbsp;<span class="num" id="7951686">31</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951690">var</span>&nbsp;<span class="op" id="7951694">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951698">dn</span>&nbsp;<span class="builtintype" id="7951701">float64</span>&nbsp;<span class="op" id="7951709">=</span>&nbsp;<span class="ident" id="7951711">rn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951716">tn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7951727">=</span>&nbsp;<span class="ident" id="7951729">dn</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951734">vn</span>&nbsp;<span class="builtintype" id="7951737">float64</span>&nbsp;<span class="op" id="7951745">=</span>&nbsp;<span class="num" id="7951747">9.91256303526217e-3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7951768">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951772">testKn</span>&nbsp;<span class="op" id="7951779">=</span>&nbsp;<span class="builtinfunc" id="7951781">make</span><span class="op" id="7951785">(</span><span class="op" id="7951786">[</span><span class="op" id="7951787">]</span><span class="builtintype" id="7951788">uint32</span><span class="op" id="7951794">,</span>&nbsp;<span class="num" id="7951796">128</span><span class="op" id="7951799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951802">testWn</span>&nbsp;<span class="op" id="7951809">=</span>&nbsp;<span class="builtinfunc" id="7951811">make</span><span class="op" id="7951815">(</span><span class="op" id="7951816">[</span><span class="op" id="7951817">]</span><span class="builtintype" id="7951818">float32</span><span class="op" id="7951825">,</span>&nbsp;<span class="num" id="7951827">128</span><span class="op" id="7951830">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951833">testFn</span>&nbsp;<span class="op" id="7951840">=</span>&nbsp;<span class="builtinfunc" id="7951842">make</span><span class="op" id="7951846">(</span><span class="op" id="7951847">[</span><span class="op" id="7951848">]</span><span class="builtintype" id="7951849">float32</span><span class="op" id="7951856">,</span>&nbsp;<span class="num" id="7951858">128</span><span class="op" id="7951861">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951865">q</span>&nbsp;<span class="op" id="7951867">:=</span>&nbsp;<span class="ident" id="7951870">vn</span>&nbsp;<span class="op" id="7951873">/</span>&nbsp;<span class="ident" id="7951875">math</span><span class="op" id="7951879">.</span><span class="ident" id="7951880">Exp</span><span class="op" id="7951883">(</span><span class="op" id="7951884">-</span><span class="num" id="7951885">0.5</span><span class="op" id="7951888">*</span><span class="ident" id="7951889">dn</span><span class="op" id="7951891">*</span><span class="ident" id="7951892">dn</span><span class="op" id="7951894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951897">testKn</span><span class="op" id="7951903">[</span><span class="num" id="7951904">0</span><span class="op" id="7951905">]</span>&nbsp;<span class="op" id="7951907">=</span>&nbsp;<span class="builtintype" id="7951909">uint32</span><span class="op" id="7951915">(</span><span class="op" id="7951916">(</span><span class="ident" id="7951917">dn</span>&nbsp;<span class="op" id="7951920">/</span>&nbsp;<span class="ident" id="7951922">q</span><span class="op" id="7951923">)</span>&nbsp;<span class="op" id="7951925">*</span>&nbsp;<span class="ident" id="7951927">m1</span><span class="op" id="7951929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951932">testKn</span><span class="op" id="7951938">[</span><span class="num" id="7951939">1</span><span class="op" id="7951940">]</span>&nbsp;<span class="op" id="7951942">=</span>&nbsp;<span class="num" id="7951944">0</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951947">testWn</span><span class="op" id="7951953">[</span><span class="num" id="7951954">0</span><span class="op" id="7951955">]</span>&nbsp;<span class="op" id="7951957">=</span>&nbsp;<span class="builtintype" id="7951959">float32</span><span class="op" id="7951966">(</span><span class="ident" id="7951967">q</span>&nbsp;<span class="op" id="7951969">/</span>&nbsp;<span class="ident" id="7951971">m1</span><span class="op" id="7951973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951976">testWn</span><span class="op" id="7951982">[</span><span class="num" id="7951983">127</span><span class="op" id="7951986">]</span>&nbsp;<span class="op" id="7951988">=</span>&nbsp;<span class="builtintype" id="7951990">float32</span><span class="op" id="7951997">(</span><span class="ident" id="7951998">dn</span>&nbsp;<span class="op" id="7952001">/</span>&nbsp;<span class="ident" id="7952003">m1</span><span class="op" id="7952005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952008">testFn</span><span class="op" id="7952014">[</span><span class="num" id="7952015">0</span><span class="op" id="7952016">]</span>&nbsp;<span class="op" id="7952018">=</span>&nbsp;<span class="num" id="7952020">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952025">testFn</span><span class="op" id="7952031">[</span><span class="num" id="7952032">127</span><span class="op" id="7952035">]</span>&nbsp;<span class="op" id="7952037">=</span>&nbsp;<span class="builtintype" id="7952039">float32</span><span class="op" id="7952046">(</span><span class="ident" id="7952047">math</span><span class="op" id="7952051">.</span><span class="ident" id="7952052">Exp</span><span class="op" id="7952055">(</span><span class="op" id="7952056">-</span><span class="num" id="7952057">0.5</span>&nbsp;<span class="op" id="7952061">*</span>&nbsp;<span class="ident" id="7952063">dn</span>&nbsp;<span class="op" id="7952066">*</span>&nbsp;<span class="ident" id="7952068">dn</span><span class="op" id="7952070">)</span><span class="op" id="7952071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952074">for</span>&nbsp;<span class="ident" id="7952078">i</span>&nbsp;<span class="op" id="7952080">:=</span>&nbsp;<span class="num" id="7952083">126</span><span class="op" id="7952086">;</span>&nbsp;<span class="ident" id="7952088">i</span>&nbsp;<span class="op" id="7952090">&gt;=</span>&nbsp;<span class="num" id="7952093">1</span><span class="op" id="7952094">;</span>&nbsp;<span class="ident" id="7952096">i</span><span class="op" id="7952097">--</span>&nbsp;<span class="op" id="7952100">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952104">dn</span>&nbsp;<span class="op" id="7952107">=</span>&nbsp;<span class="ident" id="7952109">math</span><span class="op" id="7952113">.</span><span class="ident" id="7952114">Sqrt</span><span class="op" id="7952118">(</span><span class="op" id="7952119">-</span><span class="num" id="7952120">2.0</span>&nbsp;<span class="op" id="7952124">*</span>&nbsp;<span class="ident" id="7952126">math</span><span class="op" id="7952130">.</span><span class="ident" id="7952131">Log</span><span class="op" id="7952134">(</span><span class="ident" id="7952135">vn</span><span class="op" id="7952137">/</span><span class="ident" id="7952138">dn</span><span class="op" id="7952140">+</span><span class="ident" id="7952141">math</span><span class="op" id="7952145">.</span><span class="ident" id="7952146">Exp</span><span class="op" id="7952149">(</span><span class="op" id="7952150">-</span><span class="num" id="7952151">0.5</span><span class="op" id="7952154">*</span><span class="ident" id="7952155">dn</span><span class="op" id="7952157">*</span><span class="ident" id="7952158">dn</span><span class="op" id="7952160">)</span><span class="op" id="7952161">)</span><span class="op" id="7952162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952166">testKn</span><span class="op" id="7952172">[</span><span class="ident" id="7952173">i</span><span class="op" id="7952174">+</span><span class="num" id="7952175">1</span><span class="op" id="7952176">]</span>&nbsp;<span class="op" id="7952178">=</span>&nbsp;<span class="builtintype" id="7952180">uint32</span><span class="op" id="7952186">(</span><span class="op" id="7952187">(</span><span class="ident" id="7952188">dn</span>&nbsp;<span class="op" id="7952191">/</span>&nbsp;<span class="ident" id="7952193">tn</span><span class="op" id="7952195">)</span>&nbsp;<span class="op" id="7952197">*</span>&nbsp;<span class="ident" id="7952199">m1</span><span class="op" id="7952201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952205">tn</span>&nbsp;<span class="op" id="7952208">=</span>&nbsp;<span class="ident" id="7952210">dn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952215">testFn</span><span class="op" id="7952221">[</span><span class="ident" id="7952222">i</span><span class="op" id="7952223">]</span>&nbsp;<span class="op" id="7952225">=</span>&nbsp;<span class="builtintype" id="7952227">float32</span><span class="op" id="7952234">(</span><span class="ident" id="7952235">math</span><span class="op" id="7952239">.</span><span class="ident" id="7952240">Exp</span><span class="op" id="7952243">(</span><span class="op" id="7952244">-</span><span class="num" id="7952245">0.5</span>&nbsp;<span class="op" id="7952249">*</span>&nbsp;<span class="ident" id="7952251">dn</span>&nbsp;<span class="op" id="7952254">*</span>&nbsp;<span class="ident" id="7952256">dn</span><span class="op" id="7952258">)</span><span class="op" id="7952259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952263">testWn</span><span class="op" id="7952269">[</span><span class="ident" id="7952270">i</span><span class="op" id="7952271">]</span>&nbsp;<span class="op" id="7952273">=</span>&nbsp;<span class="builtintype" id="7952275">float32</span><span class="op" id="7952282">(</span><span class="ident" id="7952283">dn</span>&nbsp;<span class="op" id="7952286">/</span>&nbsp;<span class="ident" id="7952288">m1</span><span class="op" id="7952290">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952296">return</span><br>
<span class="lineno"></span><span class="op" id="7952303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7952306">func</span>&nbsp;<span class="ident" id="7952311">initExp</span><span class="op" id="7952318">(</span><span class="op" id="7952319">)</span>&nbsp;<span class="op" id="7952321">(</span><span class="ident" id="7952322">testKe</span>&nbsp;<span class="op" id="7952329">[</span><span class="op" id="7952330">]</span><span class="builtintype" id="7952331">uint32</span><span class="op" id="7952337">,</span>&nbsp;<span class="ident" id="7952339">testWe</span><span class="op" id="7952345">,</span>&nbsp;<span class="ident" id="7952347">testFe</span>&nbsp;<span class="op" id="7952354">[</span><span class="op" id="7952355">]</span><span class="builtintype" id="7952356">float32</span><span class="op" id="7952363">)</span>&nbsp;<span class="op" id="7952365">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952368">const</span>&nbsp;<span class="ident" id="7952374">m2</span>&nbsp;<span class="op" id="7952377">=</span>&nbsp;<span class="num" id="7952379">1</span>&nbsp;<span class="op" id="7952381">&lt;&lt;</span>&nbsp;<span class="num" id="7952384">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952388">var</span>&nbsp;<span class="op" id="7952392">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952396">de</span>&nbsp;<span class="builtintype" id="7952399">float64</span>&nbsp;<span class="op" id="7952407">=</span>&nbsp;<span class="ident" id="7952409">re</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952414">te</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7952425">=</span>&nbsp;<span class="ident" id="7952427">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952432">ve</span>&nbsp;<span class="builtintype" id="7952435">float64</span>&nbsp;<span class="op" id="7952443">=</span>&nbsp;<span class="num" id="7952445">3.9496598225815571993e-3</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952471">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952475">testKe</span>&nbsp;<span class="op" id="7952482">=</span>&nbsp;<span class="builtinfunc" id="7952484">make</span><span class="op" id="7952488">(</span><span class="op" id="7952489">[</span><span class="op" id="7952490">]</span><span class="builtintype" id="7952491">uint32</span><span class="op" id="7952497">,</span>&nbsp;<span class="num" id="7952499">256</span><span class="op" id="7952502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952505">testWe</span>&nbsp;<span class="op" id="7952512">=</span>&nbsp;<span class="builtinfunc" id="7952514">make</span><span class="op" id="7952518">(</span><span class="op" id="7952519">[</span><span class="op" id="7952520">]</span><span class="builtintype" id="7952521">float32</span><span class="op" id="7952528">,</span>&nbsp;<span class="num" id="7952530">256</span><span class="op" id="7952533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952536">testFe</span>&nbsp;<span class="op" id="7952543">=</span>&nbsp;<span class="builtinfunc" id="7952545">make</span><span class="op" id="7952549">(</span><span class="op" id="7952550">[</span><span class="op" id="7952551">]</span><span class="builtintype" id="7952552">float32</span><span class="op" id="7952559">,</span>&nbsp;<span class="num" id="7952561">256</span><span class="op" id="7952564">)</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952568">q</span>&nbsp;<span class="op" id="7952570">:=</span>&nbsp;<span class="ident" id="7952573">ve</span>&nbsp;<span class="op" id="7952576">/</span>&nbsp;<span class="ident" id="7952578">math</span><span class="op" id="7952582">.</span><span class="ident" id="7952583">Exp</span><span class="op" id="7952586">(</span><span class="op" id="7952587">-</span><span class="ident" id="7952588">de</span><span class="op" id="7952590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952593">testKe</span><span class="op" id="7952599">[</span><span class="num" id="7952600">0</span><span class="op" id="7952601">]</span>&nbsp;<span class="op" id="7952603">=</span>&nbsp;<span class="builtintype" id="7952605">uint32</span><span class="op" id="7952611">(</span><span class="op" id="7952612">(</span><span class="ident" id="7952613">de</span>&nbsp;<span class="op" id="7952616">/</span>&nbsp;<span class="ident" id="7952618">q</span><span class="op" id="7952619">)</span>&nbsp;<span class="op" id="7952621">*</span>&nbsp;<span class="ident" id="7952623">m2</span><span class="op" id="7952625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952628">testKe</span><span class="op" id="7952634">[</span><span class="num" id="7952635">1</span><span class="op" id="7952636">]</span>&nbsp;<span class="op" id="7952638">=</span>&nbsp;<span class="num" id="7952640">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952643">testWe</span><span class="op" id="7952649">[</span><span class="num" id="7952650">0</span><span class="op" id="7952651">]</span>&nbsp;<span class="op" id="7952653">=</span>&nbsp;<span class="builtintype" id="7952655">float32</span><span class="op" id="7952662">(</span><span class="ident" id="7952663">q</span>&nbsp;<span class="op" id="7952665">/</span>&nbsp;<span class="ident" id="7952667">m2</span><span class="op" id="7952669">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952672">testWe</span><span class="op" id="7952678">[</span><span class="num" id="7952679">255</span><span class="op" id="7952682">]</span>&nbsp;<span class="op" id="7952684">=</span>&nbsp;<span class="builtintype" id="7952686">float32</span><span class="op" id="7952693">(</span><span class="ident" id="7952694">de</span>&nbsp;<span class="op" id="7952697">/</span>&nbsp;<span class="ident" id="7952699">m2</span><span class="op" id="7952701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952704">testFe</span><span class="op" id="7952710">[</span><span class="num" id="7952711">0</span><span class="op" id="7952712">]</span>&nbsp;<span class="op" id="7952714">=</span>&nbsp;<span class="num" id="7952716">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952721">testFe</span><span class="op" id="7952727">[</span><span class="num" id="7952728">255</span><span class="op" id="7952731">]</span>&nbsp;<span class="op" id="7952733">=</span>&nbsp;<span class="builtintype" id="7952735">float32</span><span class="op" id="7952742">(</span><span class="ident" id="7952743">math</span><span class="op" id="7952747">.</span><span class="ident" id="7952748">Exp</span><span class="op" id="7952751">(</span><span class="op" id="7952752">-</span><span class="ident" id="7952753">de</span><span class="op" id="7952755">)</span><span class="op" id="7952756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952759">for</span>&nbsp;<span class="ident" id="7952763">i</span>&nbsp;<span class="op" id="7952765">:=</span>&nbsp;<span class="num" id="7952768">254</span><span class="op" id="7952771">;</span>&nbsp;<span class="ident" id="7952773">i</span>&nbsp;<span class="op" id="7952775">&gt;=</span>&nbsp;<span class="num" id="7952778">1</span><span class="op" id="7952779">;</span>&nbsp;<span class="ident" id="7952781">i</span><span class="op" id="7952782">--</span>&nbsp;<span class="op" id="7952785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952789">de</span>&nbsp;<span class="op" id="7952792">=</span>&nbsp;<span class="op" id="7952794">-</span><span class="ident" id="7952795">math</span><span class="op" id="7952799">.</span><span class="ident" id="7952800">Log</span><span class="op" id="7952803">(</span><span class="ident" id="7952804">ve</span><span class="op" id="7952806">/</span><span class="ident" id="7952807">de</span>&nbsp;<span class="op" id="7952810">+</span>&nbsp;<span class="ident" id="7952812">math</span><span class="op" id="7952816">.</span><span class="ident" id="7952817">Exp</span><span class="op" id="7952820">(</span><span class="op" id="7952821">-</span><span class="ident" id="7952822">de</span><span class="op" id="7952824">)</span><span class="op" id="7952825">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952829">testKe</span><span class="op" id="7952835">[</span><span class="ident" id="7952836">i</span><span class="op" id="7952837">+</span><span class="num" id="7952838">1</span><span class="op" id="7952839">]</span>&nbsp;<span class="op" id="7952841">=</span>&nbsp;<span class="builtintype" id="7952843">uint32</span><span class="op" id="7952849">(</span><span class="op" id="7952850">(</span><span class="ident" id="7952851">de</span>&nbsp;<span class="op" id="7952854">/</span>&nbsp;<span class="ident" id="7952856">te</span><span class="op" id="7952858">)</span>&nbsp;<span class="op" id="7952860">*</span>&nbsp;<span class="ident" id="7952862">m2</span><span class="op" id="7952864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952868">te</span>&nbsp;<span class="op" id="7952871">=</span>&nbsp;<span class="ident" id="7952873">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952878">testFe</span><span class="op" id="7952884">[</span><span class="ident" id="7952885">i</span><span class="op" id="7952886">]</span>&nbsp;<span class="op" id="7952888">=</span>&nbsp;<span class="builtintype" id="7952890">float32</span><span class="op" id="7952897">(</span><span class="ident" id="7952898">math</span><span class="op" id="7952902">.</span><span class="ident" id="7952903">Exp</span><span class="op" id="7952906">(</span><span class="op" id="7952907">-</span><span class="ident" id="7952908">de</span><span class="op" id="7952910">)</span><span class="op" id="7952911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952915">testWe</span><span class="op" id="7952921">[</span><span class="ident" id="7952922">i</span><span class="op" id="7952923">]</span>&nbsp;<span class="op" id="7952925">=</span>&nbsp;<span class="builtintype" id="7952927">float32</span><span class="op" id="7952934">(</span><span class="ident" id="7952935">de</span>&nbsp;<span class="op" id="7952938">/</span>&nbsp;<span class="ident" id="7952940">m2</span><span class="op" id="7952942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952945">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952948">return</span><br>
<span class="lineno"></span><span class="op" id="7952955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7952958">//&nbsp;compareUint32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7953026">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno">265</span><span class="comment" id="7953090">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7953108">func</span>&nbsp;<span class="ident" id="7953113">compareUint32Slices</span><span class="op" id="7953132">(</span><span class="ident" id="7953133">s1</span><span class="op" id="7953135">,</span>&nbsp;<span class="ident" id="7953137">s2</span>&nbsp;<span class="op" id="7953140">[</span><span class="op" id="7953141">]</span><span class="builtintype" id="7953142">uint32</span><span class="op" id="7953148">)</span>&nbsp;<span class="builtintype" id="7953150">int</span>&nbsp;<span class="op" id="7953154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953157">if</span>&nbsp;<span class="builtinfunc" id="7953160">len</span><span class="op" id="7953163">(</span><span class="ident" id="7953164">s1</span><span class="op" id="7953166">)</span>&nbsp;<span class="op" id="7953168">!=</span>&nbsp;<span class="builtinfunc" id="7953171">len</span><span class="op" id="7953174">(</span><span class="ident" id="7953175">s2</span><span class="op" id="7953177">)</span>&nbsp;<span class="op" id="7953179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953183">if</span>&nbsp;<span class="builtinfunc" id="7953186">len</span><span class="op" id="7953189">(</span><span class="ident" id="7953190">s1</span><span class="op" id="7953192">)</span>&nbsp;<span class="op" id="7953194">&gt;</span>&nbsp;<span class="builtinfunc" id="7953196">len</span><span class="op" id="7953199">(</span><span class="ident" id="7953200">s2</span><span class="op" id="7953202">)</span>&nbsp;<span class="op" id="7953204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953209">return</span>&nbsp;<span class="builtinfunc" id="7953216">len</span><span class="op" id="7953219">(</span><span class="ident" id="7953220">s2</span><span class="op" id="7953222">)</span>&nbsp;<span class="op" id="7953224">+</span>&nbsp;<span class="num" id="7953226">1</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953234">return</span>&nbsp;<span class="builtinfunc" id="7953241">len</span><span class="op" id="7953244">(</span><span class="ident" id="7953245">s1</span><span class="op" id="7953247">)</span>&nbsp;<span class="op" id="7953249">+</span>&nbsp;<span class="num" id="7953251">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953257">for</span>&nbsp;<span class="ident" id="7953261">i</span>&nbsp;<span class="op" id="7953263">:=</span>&nbsp;<span class="keyword" id="7953266">range</span>&nbsp;<span class="ident" id="7953272">s1</span>&nbsp;<span class="op" id="7953275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953279">if</span>&nbsp;<span class="ident" id="7953282">s1</span><span class="op" id="7953284">[</span><span class="ident" id="7953285">i</span><span class="op" id="7953286">]</span>&nbsp;<span class="op" id="7953288">!=</span>&nbsp;<span class="ident" id="7953291">s2</span><span class="op" id="7953293">[</span><span class="ident" id="7953294">i</span><span class="op" id="7953295">]</span>&nbsp;<span class="op" id="7953297">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953302">return</span>&nbsp;<span class="ident" id="7953309">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953319">return</span>&nbsp;<span class="op" id="7953326">-</span><span class="num" id="7953327">1</span><br>
<span class="lineno"></span><span class="op" id="7953329">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="7953332">//&nbsp;compareFloat32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7953401">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno"></span><span class="comment" id="7953465">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7953483">func</span>&nbsp;<span class="ident" id="7953488">compareFloat32Slices</span><span class="op" id="7953508">(</span><span class="ident" id="7953509">s1</span><span class="op" id="7953511">,</span>&nbsp;<span class="ident" id="7953513">s2</span>&nbsp;<span class="op" id="7953516">[</span><span class="op" id="7953517">]</span><span class="builtintype" id="7953518">float32</span><span class="op" id="7953525">)</span>&nbsp;<span class="builtintype" id="7953527">int</span>&nbsp;<span class="op" id="7953531">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953534">if</span>&nbsp;<span class="builtinfunc" id="7953537">len</span><span class="op" id="7953540">(</span><span class="ident" id="7953541">s1</span><span class="op" id="7953543">)</span>&nbsp;<span class="op" id="7953545">!=</span>&nbsp;<span class="builtinfunc" id="7953548">len</span><span class="op" id="7953551">(</span><span class="ident" id="7953552">s2</span><span class="op" id="7953554">)</span>&nbsp;<span class="op" id="7953556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953560">if</span>&nbsp;<span class="builtinfunc" id="7953563">len</span><span class="op" id="7953566">(</span><span class="ident" id="7953567">s1</span><span class="op" id="7953569">)</span>&nbsp;<span class="op" id="7953571">&gt;</span>&nbsp;<span class="builtinfunc" id="7953573">len</span><span class="op" id="7953576">(</span><span class="ident" id="7953577">s2</span><span class="op" id="7953579">)</span>&nbsp;<span class="op" id="7953581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953586">return</span>&nbsp;<span class="builtinfunc" id="7953593">len</span><span class="op" id="7953596">(</span><span class="ident" id="7953597">s2</span><span class="op" id="7953599">)</span>&nbsp;<span class="op" id="7953601">+</span>&nbsp;<span class="num" id="7953603">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953611">return</span>&nbsp;<span class="builtinfunc" id="7953618">len</span><span class="op" id="7953621">(</span><span class="ident" id="7953622">s1</span><span class="op" id="7953624">)</span>&nbsp;<span class="op" id="7953626">+</span>&nbsp;<span class="num" id="7953628">1</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953634">for</span>&nbsp;<span class="ident" id="7953638">i</span>&nbsp;<span class="op" id="7953640">:=</span>&nbsp;<span class="keyword" id="7953643">range</span>&nbsp;<span class="ident" id="7953649">s1</span>&nbsp;<span class="op" id="7953652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953656">if</span>&nbsp;<span class="op" id="7953659">!</span><span class="ident" id="7953660">nearEqual</span><span class="op" id="7953669">(</span><span class="builtintype" id="7953670">float64</span><span class="op" id="7953677">(</span><span class="ident" id="7953678">s1</span><span class="op" id="7953680">[</span><span class="ident" id="7953681">i</span><span class="op" id="7953682">]</span><span class="op" id="7953683">)</span><span class="op" id="7953684">,</span>&nbsp;<span class="builtintype" id="7953686">float64</span><span class="op" id="7953693">(</span><span class="ident" id="7953694">s2</span><span class="op" id="7953696">[</span><span class="ident" id="7953697">i</span><span class="op" id="7953698">]</span><span class="op" id="7953699">)</span><span class="op" id="7953700">,</span>&nbsp;<span class="num" id="7953702">0</span><span class="op" id="7953703">,</span>&nbsp;<span class="num" id="7953705">1e-7</span><span class="op" id="7953709">)</span>&nbsp;<span class="op" id="7953711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953716">return</span>&nbsp;<span class="ident" id="7953723">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953727">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953733">return</span>&nbsp;<span class="op" id="7953740">-</span><span class="num" id="7953741">1</span><br>
<span class="lineno"></span><span class="op" id="7953743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7953746">func</span>&nbsp;<span class="ident" id="7953751">TestNormTables</span><span class="op" id="7953765">(</span><span class="ident" id="7953766">t</span>&nbsp;<span class="op" id="7953768">*</span><span class="ident" id="7953769">testing</span><span class="op" id="7953776">.</span><span class="ident" id="7953777">T</span><span class="op" id="7953778">)</span>&nbsp;<span class="op" id="7953780">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953783">testKn</span><span class="op" id="7953789">,</span>&nbsp;<span class="ident" id="7953791">testWn</span><span class="op" id="7953797">,</span>&nbsp;<span class="ident" id="7953799">testFn</span>&nbsp;<span class="op" id="7953806">:=</span>&nbsp;<span class="ident" id="7953809">initNorm</span><span class="op" id="7953817">(</span><span class="op" id="7953818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953821">if</span>&nbsp;<span class="ident" id="7953824">i</span>&nbsp;<span class="op" id="7953826">:=</span>&nbsp;<span class="ident" id="7953829">compareUint32Slices</span><span class="op" id="7953848">(</span><span class="ident" id="7953849">kn</span><span class="op" id="7953851">[</span><span class="num" id="7953852">0</span><span class="op" id="7953853">:</span><span class="op" id="7953854">]</span><span class="op" id="7953855">,</span>&nbsp;<span class="ident" id="7953857">testKn</span><span class="op" id="7953863">)</span><span class="op" id="7953864">;</span>&nbsp;<span class="ident" id="7953866">i</span>&nbsp;<span class="op" id="7953868">&gt;=</span>&nbsp;<span class="num" id="7953871">0</span>&nbsp;<span class="op" id="7953873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953877">t</span><span class="op" id="7953878">.</span><span class="ident" id="7953879">Errorf</span><span class="op" id="7953885">(</span><span class="string" id="7953886">&#34;kn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7953922">,</span>&nbsp;<span class="ident" id="7953924">i</span><span class="op" id="7953925">,</span>&nbsp;<span class="ident" id="7953927">kn</span><span class="op" id="7953929">[</span><span class="ident" id="7953930">i</span><span class="op" id="7953931">]</span><span class="op" id="7953932">,</span>&nbsp;<span class="ident" id="7953934">testKn</span><span class="op" id="7953940">[</span><span class="ident" id="7953941">i</span><span class="op" id="7953942">]</span><span class="op" id="7953943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953949">if</span>&nbsp;<span class="ident" id="7953952">i</span>&nbsp;<span class="op" id="7953954">:=</span>&nbsp;<span class="ident" id="7953957">compareFloat32Slices</span><span class="op" id="7953977">(</span><span class="ident" id="7953978">wn</span><span class="op" id="7953980">[</span><span class="num" id="7953981">0</span><span class="op" id="7953982">:</span><span class="op" id="7953983">]</span><span class="op" id="7953984">,</span>&nbsp;<span class="ident" id="7953986">testWn</span><span class="op" id="7953992">)</span><span class="op" id="7953993">;</span>&nbsp;<span class="ident" id="7953995">i</span>&nbsp;<span class="op" id="7953997">&gt;=</span>&nbsp;<span class="num" id="7954000">0</span>&nbsp;<span class="op" id="7954002">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954006">t</span><span class="op" id="7954007">.</span><span class="ident" id="7954008">Errorf</span><span class="op" id="7954014">(</span><span class="string" id="7954015">&#34;wn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7954051">,</span>&nbsp;<span class="ident" id="7954053">i</span><span class="op" id="7954054">,</span>&nbsp;<span class="ident" id="7954056">wn</span><span class="op" id="7954058">[</span><span class="ident" id="7954059">i</span><span class="op" id="7954060">]</span><span class="op" id="7954061">,</span>&nbsp;<span class="ident" id="7954063">testWn</span><span class="op" id="7954069">[</span><span class="ident" id="7954070">i</span><span class="op" id="7954071">]</span><span class="op" id="7954072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954078">if</span>&nbsp;<span class="ident" id="7954081">i</span>&nbsp;<span class="op" id="7954083">:=</span>&nbsp;<span class="ident" id="7954086">compareFloat32Slices</span><span class="op" id="7954106">(</span><span class="ident" id="7954107">fn</span><span class="op" id="7954109">[</span><span class="num" id="7954110">0</span><span class="op" id="7954111">:</span><span class="op" id="7954112">]</span><span class="op" id="7954113">,</span>&nbsp;<span class="ident" id="7954115">testFn</span><span class="op" id="7954121">)</span><span class="op" id="7954122">;</span>&nbsp;<span class="ident" id="7954124">i</span>&nbsp;<span class="op" id="7954126">&gt;=</span>&nbsp;<span class="num" id="7954129">0</span>&nbsp;<span class="op" id="7954131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954135">t</span><span class="op" id="7954136">.</span><span class="ident" id="7954137">Errorf</span><span class="op" id="7954143">(</span><span class="string" id="7954144">&#34;fn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7954180">,</span>&nbsp;<span class="ident" id="7954182">i</span><span class="op" id="7954183">,</span>&nbsp;<span class="ident" id="7954185">fn</span><span class="op" id="7954187">[</span><span class="ident" id="7954188">i</span><span class="op" id="7954189">]</span><span class="op" id="7954190">,</span>&nbsp;<span class="ident" id="7954192">testFn</span><span class="op" id="7954198">[</span><span class="ident" id="7954199">i</span><span class="op" id="7954200">]</span><span class="op" id="7954201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954204">}</span><br>
<span class="lineno">310</span><span class="op" id="7954206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7954209">func</span>&nbsp;<span class="ident" id="7954214">TestExpTables</span><span class="op" id="7954227">(</span><span class="ident" id="7954228">t</span>&nbsp;<span class="op" id="7954230">*</span><span class="ident" id="7954231">testing</span><span class="op" id="7954238">.</span><span class="ident" id="7954239">T</span><span class="op" id="7954240">)</span>&nbsp;<span class="op" id="7954242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954245">testKe</span><span class="op" id="7954251">,</span>&nbsp;<span class="ident" id="7954253">testWe</span><span class="op" id="7954259">,</span>&nbsp;<span class="ident" id="7954261">testFe</span>&nbsp;<span class="op" id="7954268">:=</span>&nbsp;<span class="ident" id="7954271">initExp</span><span class="op" id="7954278">(</span><span class="op" id="7954279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954282">if</span>&nbsp;<span class="ident" id="7954285">i</span>&nbsp;<span class="op" id="7954287">:=</span>&nbsp;<span class="ident" id="7954290">compareUint32Slices</span><span class="op" id="7954309">(</span><span class="ident" id="7954310">ke</span><span class="op" id="7954312">[</span><span class="num" id="7954313">0</span><span class="op" id="7954314">:</span><span class="op" id="7954315">]</span><span class="op" id="7954316">,</span>&nbsp;<span class="ident" id="7954318">testKe</span><span class="op" id="7954324">)</span><span class="op" id="7954325">;</span>&nbsp;<span class="ident" id="7954327">i</span>&nbsp;<span class="op" id="7954329">&gt;=</span>&nbsp;<span class="num" id="7954332">0</span>&nbsp;<span class="op" id="7954334">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954338">t</span><span class="op" id="7954339">.</span><span class="ident" id="7954340">Errorf</span><span class="op" id="7954346">(</span><span class="string" id="7954347">&#34;ke&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7954383">,</span>&nbsp;<span class="ident" id="7954385">i</span><span class="op" id="7954386">,</span>&nbsp;<span class="ident" id="7954388">ke</span><span class="op" id="7954390">[</span><span class="ident" id="7954391">i</span><span class="op" id="7954392">]</span><span class="op" id="7954393">,</span>&nbsp;<span class="ident" id="7954395">testKe</span><span class="op" id="7954401">[</span><span class="ident" id="7954402">i</span><span class="op" id="7954403">]</span><span class="op" id="7954404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954410">if</span>&nbsp;<span class="ident" id="7954413">i</span>&nbsp;<span class="op" id="7954415">:=</span>&nbsp;<span class="ident" id="7954418">compareFloat32Slices</span><span class="op" id="7954438">(</span><span class="ident" id="7954439">we</span><span class="op" id="7954441">[</span><span class="num" id="7954442">0</span><span class="op" id="7954443">:</span><span class="op" id="7954444">]</span><span class="op" id="7954445">,</span>&nbsp;<span class="ident" id="7954447">testWe</span><span class="op" id="7954453">)</span><span class="op" id="7954454">;</span>&nbsp;<span class="ident" id="7954456">i</span>&nbsp;<span class="op" id="7954458">&gt;=</span>&nbsp;<span class="num" id="7954461">0</span>&nbsp;<span class="op" id="7954463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954467">t</span><span class="op" id="7954468">.</span><span class="ident" id="7954469">Errorf</span><span class="op" id="7954475">(</span><span class="string" id="7954476">&#34;we&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7954512">,</span>&nbsp;<span class="ident" id="7954514">i</span><span class="op" id="7954515">,</span>&nbsp;<span class="ident" id="7954517">we</span><span class="op" id="7954519">[</span><span class="ident" id="7954520">i</span><span class="op" id="7954521">]</span><span class="op" id="7954522">,</span>&nbsp;<span class="ident" id="7954524">testWe</span><span class="op" id="7954530">[</span><span class="ident" id="7954531">i</span><span class="op" id="7954532">]</span><span class="op" id="7954533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954536">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954539">if</span>&nbsp;<span class="ident" id="7954542">i</span>&nbsp;<span class="op" id="7954544">:=</span>&nbsp;<span class="ident" id="7954547">compareFloat32Slices</span><span class="op" id="7954567">(</span><span class="ident" id="7954568">fe</span><span class="op" id="7954570">[</span><span class="num" id="7954571">0</span><span class="op" id="7954572">:</span><span class="op" id="7954573">]</span><span class="op" id="7954574">,</span>&nbsp;<span class="ident" id="7954576">testFe</span><span class="op" id="7954582">)</span><span class="op" id="7954583">;</span>&nbsp;<span class="ident" id="7954585">i</span>&nbsp;<span class="op" id="7954587">&gt;=</span>&nbsp;<span class="num" id="7954590">0</span>&nbsp;<span class="op" id="7954592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954596">t</span><span class="op" id="7954597">.</span><span class="ident" id="7954598">Errorf</span><span class="op" id="7954604">(</span><span class="string" id="7954605">&#34;fe&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7954641">,</span>&nbsp;<span class="ident" id="7954643">i</span><span class="op" id="7954644">,</span>&nbsp;<span class="ident" id="7954646">fe</span><span class="op" id="7954648">[</span><span class="ident" id="7954649">i</span><span class="op" id="7954650">]</span><span class="op" id="7954651">,</span>&nbsp;<span class="ident" id="7954653">testFe</span><span class="op" id="7954659">[</span><span class="ident" id="7954660">i</span><span class="op" id="7954661">]</span><span class="op" id="7954662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954665">}</span><br>
<span class="lineno"></span><span class="op" id="7954667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="7954670">//&nbsp;For&nbsp;issue&nbsp;6721,&nbsp;the&nbsp;problem&nbsp;came&nbsp;after&nbsp;7533753&nbsp;calls,&nbsp;so&nbsp;check&nbsp;10e6.</span><br>
<span class="lineno"></span><span class="keyword" id="7954742">func</span>&nbsp;<span class="ident" id="7954747">TestFloat32</span><span class="op" id="7954758">(</span><span class="ident" id="7954759">t</span>&nbsp;<span class="op" id="7954761">*</span><span class="ident" id="7954762">testing</span><span class="op" id="7954769">.</span><span class="ident" id="7954770">T</span><span class="op" id="7954771">)</span>&nbsp;<span class="op" id="7954773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954776">r</span>&nbsp;<span class="op" id="7954778">:=</span>&nbsp;<span class="ident" id="7954781">New</span><span class="op" id="7954784">(</span><span class="ident" id="7954785">NewSource</span><span class="op" id="7954794">(</span><span class="num" id="7954795">1</span><span class="op" id="7954796">)</span><span class="op" id="7954797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954800">for</span>&nbsp;<span class="ident" id="7954804">ct</span>&nbsp;<span class="op" id="7954807">:=</span>&nbsp;<span class="num" id="7954810">0</span><span class="op" id="7954811">;</span>&nbsp;<span class="ident" id="7954813">ct</span>&nbsp;<span class="op" id="7954816">&lt;</span>&nbsp;<span class="num" id="7954818">10e6</span><span class="op" id="7954822">;</span>&nbsp;<span class="ident" id="7954824">ct</span><span class="op" id="7954826">++</span>&nbsp;<span class="op" id="7954829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954833">f</span>&nbsp;<span class="op" id="7954835">:=</span>&nbsp;<span class="ident" id="7954838">r</span><span class="op" id="7954839">.</span><span class="ident" id="7954840">Float32</span><span class="op" id="7954847">(</span><span class="op" id="7954848">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954852">if</span>&nbsp;<span class="ident" id="7954855">f</span>&nbsp;<span class="op" id="7954857">&gt;=</span>&nbsp;<span class="num" id="7954860">1</span>&nbsp;<span class="op" id="7954862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954867">t</span><span class="op" id="7954868">.</span><span class="ident" id="7954869">Fatal</span><span class="op" id="7954874">(</span><span class="string" id="7954875">&#34;Float32()&nbsp;should&nbsp;be&nbsp;in&nbsp;range&nbsp;[0,1).&nbsp;ct:&#34;</span><span class="op" id="7954916">,</span>&nbsp;<span class="ident" id="7954918">ct</span><span class="op" id="7954920">,</span>&nbsp;<span class="string" id="7954922">&#34;f:&#34;</span><span class="op" id="7954926">,</span>&nbsp;<span class="ident" id="7954928">f</span><span class="op" id="7954929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954936">}</span><br>
<span class="lineno"></span><span class="op" id="7954938">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="comment" id="7954941">//&nbsp;Benchmarks</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7954956">func</span>&nbsp;<span class="ident" id="7954961">BenchmarkInt63Threadsafe</span><span class="op" id="7954985">(</span><span class="ident" id="7954986">b</span>&nbsp;<span class="op" id="7954988">*</span><span class="ident" id="7954989">testing</span><span class="op" id="7954996">.</span><span class="ident" id="7954997">B</span><span class="op" id="7954998">)</span>&nbsp;<span class="op" id="7955000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955003">for</span>&nbsp;<span class="ident" id="7955007">n</span>&nbsp;<span class="op" id="7955009">:=</span>&nbsp;<span class="ident" id="7955012">b</span><span class="op" id="7955013">.</span><span class="ident" id="7955014">N</span><span class="op" id="7955015">;</span>&nbsp;<span class="ident" id="7955017">n</span>&nbsp;<span class="op" id="7955019">&gt;</span>&nbsp;<span class="num" id="7955021">0</span><span class="op" id="7955022">;</span>&nbsp;<span class="ident" id="7955024">n</span><span class="op" id="7955025">--</span>&nbsp;<span class="op" id="7955028">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955032">Int63</span><span class="op" id="7955037">(</span><span class="op" id="7955038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955041">}</span><br>
<span class="lineno"></span><span class="op" id="7955043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7955046">func</span>&nbsp;<span class="ident" id="7955051">BenchmarkInt63Unthreadsafe</span><span class="op" id="7955077">(</span><span class="ident" id="7955078">b</span>&nbsp;<span class="op" id="7955080">*</span><span class="ident" id="7955081">testing</span><span class="op" id="7955088">.</span><span class="ident" id="7955089">B</span><span class="op" id="7955090">)</span>&nbsp;<span class="op" id="7955092">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955095">r</span>&nbsp;<span class="op" id="7955097">:=</span>&nbsp;<span class="ident" id="7955100">New</span><span class="op" id="7955103">(</span><span class="ident" id="7955104">NewSource</span><span class="op" id="7955113">(</span><span class="num" id="7955114">1</span><span class="op" id="7955115">)</span><span class="op" id="7955116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955119">for</span>&nbsp;<span class="ident" id="7955123">n</span>&nbsp;<span class="op" id="7955125">:=</span>&nbsp;<span class="ident" id="7955128">b</span><span class="op" id="7955129">.</span><span class="ident" id="7955130">N</span><span class="op" id="7955131">;</span>&nbsp;<span class="ident" id="7955133">n</span>&nbsp;<span class="op" id="7955135">&gt;</span>&nbsp;<span class="num" id="7955137">0</span><span class="op" id="7955138">;</span>&nbsp;<span class="ident" id="7955140">n</span><span class="op" id="7955141">--</span>&nbsp;<span class="op" id="7955144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955148">r</span><span class="op" id="7955149">.</span><span class="ident" id="7955150">Int63</span><span class="op" id="7955155">(</span><span class="op" id="7955156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955159">}</span><br>
<span class="lineno"></span><span class="op" id="7955161">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="7955164">func</span>&nbsp;<span class="ident" id="7955169">BenchmarkIntn1000</span><span class="op" id="7955186">(</span><span class="ident" id="7955187">b</span>&nbsp;<span class="op" id="7955189">*</span><span class="ident" id="7955190">testing</span><span class="op" id="7955197">.</span><span class="ident" id="7955198">B</span><span class="op" id="7955199">)</span>&nbsp;<span class="op" id="7955201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955204">r</span>&nbsp;<span class="op" id="7955206">:=</span>&nbsp;<span class="ident" id="7955209">New</span><span class="op" id="7955212">(</span><span class="ident" id="7955213">NewSource</span><span class="op" id="7955222">(</span><span class="num" id="7955223">1</span><span class="op" id="7955224">)</span><span class="op" id="7955225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955228">for</span>&nbsp;<span class="ident" id="7955232">n</span>&nbsp;<span class="op" id="7955234">:=</span>&nbsp;<span class="ident" id="7955237">b</span><span class="op" id="7955238">.</span><span class="ident" id="7955239">N</span><span class="op" id="7955240">;</span>&nbsp;<span class="ident" id="7955242">n</span>&nbsp;<span class="op" id="7955244">&gt;</span>&nbsp;<span class="num" id="7955246">0</span><span class="op" id="7955247">;</span>&nbsp;<span class="ident" id="7955249">n</span><span class="op" id="7955250">--</span>&nbsp;<span class="op" id="7955253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955257">r</span><span class="op" id="7955258">.</span><span class="ident" id="7955259">Intn</span><span class="op" id="7955263">(</span><span class="num" id="7955264">1000</span><span class="op" id="7955268">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955271">}</span><br>
<span class="lineno"></span><span class="op" id="7955273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7955276">func</span>&nbsp;<span class="ident" id="7955281">BenchmarkInt63n1000</span><span class="op" id="7955300">(</span><span class="ident" id="7955301">b</span>&nbsp;<span class="op" id="7955303">*</span><span class="ident" id="7955304">testing</span><span class="op" id="7955311">.</span><span class="ident" id="7955312">B</span><span class="op" id="7955313">)</span>&nbsp;<span class="op" id="7955315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955318">r</span>&nbsp;<span class="op" id="7955320">:=</span>&nbsp;<span class="ident" id="7955323">New</span><span class="op" id="7955326">(</span><span class="ident" id="7955327">NewSource</span><span class="op" id="7955336">(</span><span class="num" id="7955337">1</span><span class="op" id="7955338">)</span><span class="op" id="7955339">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955342">for</span>&nbsp;<span class="ident" id="7955346">n</span>&nbsp;<span class="op" id="7955348">:=</span>&nbsp;<span class="ident" id="7955351">b</span><span class="op" id="7955352">.</span><span class="ident" id="7955353">N</span><span class="op" id="7955354">;</span>&nbsp;<span class="ident" id="7955356">n</span>&nbsp;<span class="op" id="7955358">&gt;</span>&nbsp;<span class="num" id="7955360">0</span><span class="op" id="7955361">;</span>&nbsp;<span class="ident" id="7955363">n</span><span class="op" id="7955364">--</span>&nbsp;<span class="op" id="7955367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955371">r</span><span class="op" id="7955372">.</span><span class="ident" id="7955373">Int63n</span><span class="op" id="7955379">(</span><span class="num" id="7955380">1000</span><span class="op" id="7955384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955387">}</span><br>
<span class="lineno"></span><span class="op" id="7955389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span><span class="keyword" id="7955392">func</span>&nbsp;<span class="ident" id="7955397">BenchmarkInt31n1000</span><span class="op" id="7955416">(</span><span class="ident" id="7955417">b</span>&nbsp;<span class="op" id="7955419">*</span><span class="ident" id="7955420">testing</span><span class="op" id="7955427">.</span><span class="ident" id="7955428">B</span><span class="op" id="7955429">)</span>&nbsp;<span class="op" id="7955431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955434">r</span>&nbsp;<span class="op" id="7955436">:=</span>&nbsp;<span class="ident" id="7955439">New</span><span class="op" id="7955442">(</span><span class="ident" id="7955443">NewSource</span><span class="op" id="7955452">(</span><span class="num" id="7955453">1</span><span class="op" id="7955454">)</span><span class="op" id="7955455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955458">for</span>&nbsp;<span class="ident" id="7955462">n</span>&nbsp;<span class="op" id="7955464">:=</span>&nbsp;<span class="ident" id="7955467">b</span><span class="op" id="7955468">.</span><span class="ident" id="7955469">N</span><span class="op" id="7955470">;</span>&nbsp;<span class="ident" id="7955472">n</span>&nbsp;<span class="op" id="7955474">&gt;</span>&nbsp;<span class="num" id="7955476">0</span><span class="op" id="7955477">;</span>&nbsp;<span class="ident" id="7955479">n</span><span class="op" id="7955480">--</span>&nbsp;<span class="op" id="7955483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955487">r</span><span class="op" id="7955488">.</span><span class="ident" id="7955489">Int31n</span><span class="op" id="7955495">(</span><span class="num" id="7955496">1000</span><span class="op" id="7955500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955503">}</span><br>
<span class="lineno">370</span><span class="op" id="7955505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7955508">func</span>&nbsp;<span class="ident" id="7955513">BenchmarkFloat32</span><span class="op" id="7955529">(</span><span class="ident" id="7955530">b</span>&nbsp;<span class="op" id="7955532">*</span><span class="ident" id="7955533">testing</span><span class="op" id="7955540">.</span><span class="ident" id="7955541">B</span><span class="op" id="7955542">)</span>&nbsp;<span class="op" id="7955544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955547">r</span>&nbsp;<span class="op" id="7955549">:=</span>&nbsp;<span class="ident" id="7955552">New</span><span class="op" id="7955555">(</span><span class="ident" id="7955556">NewSource</span><span class="op" id="7955565">(</span><span class="num" id="7955566">1</span><span class="op" id="7955567">)</span><span class="op" id="7955568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955571">for</span>&nbsp;<span class="ident" id="7955575">n</span>&nbsp;<span class="op" id="7955577">:=</span>&nbsp;<span class="ident" id="7955580">b</span><span class="op" id="7955581">.</span><span class="ident" id="7955582">N</span><span class="op" id="7955583">;</span>&nbsp;<span class="ident" id="7955585">n</span>&nbsp;<span class="op" id="7955587">&gt;</span>&nbsp;<span class="num" id="7955589">0</span><span class="op" id="7955590">;</span>&nbsp;<span class="ident" id="7955592">n</span><span class="op" id="7955593">--</span>&nbsp;<span class="op" id="7955596">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955600">r</span><span class="op" id="7955601">.</span><span class="ident" id="7955602">Float32</span><span class="op" id="7955609">(</span><span class="op" id="7955610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955613">}</span><br>
<span class="lineno"></span><span class="op" id="7955615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7955618">func</span>&nbsp;<span class="ident" id="7955623">BenchmarkFloat64</span><span class="op" id="7955639">(</span><span class="ident" id="7955640">b</span>&nbsp;<span class="op" id="7955642">*</span><span class="ident" id="7955643">testing</span><span class="op" id="7955650">.</span><span class="ident" id="7955651">B</span><span class="op" id="7955652">)</span>&nbsp;<span class="op" id="7955654">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955657">r</span>&nbsp;<span class="op" id="7955659">:=</span>&nbsp;<span class="ident" id="7955662">New</span><span class="op" id="7955665">(</span><span class="ident" id="7955666">NewSource</span><span class="op" id="7955675">(</span><span class="num" id="7955676">1</span><span class="op" id="7955677">)</span><span class="op" id="7955678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955681">for</span>&nbsp;<span class="ident" id="7955685">n</span>&nbsp;<span class="op" id="7955687">:=</span>&nbsp;<span class="ident" id="7955690">b</span><span class="op" id="7955691">.</span><span class="ident" id="7955692">N</span><span class="op" id="7955693">;</span>&nbsp;<span class="ident" id="7955695">n</span>&nbsp;<span class="op" id="7955697">&gt;</span>&nbsp;<span class="num" id="7955699">0</span><span class="op" id="7955700">;</span>&nbsp;<span class="ident" id="7955702">n</span><span class="op" id="7955703">--</span>&nbsp;<span class="op" id="7955706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955710">r</span><span class="op" id="7955711">.</span><span class="ident" id="7955712">Float64</span><span class="op" id="7955719">(</span><span class="op" id="7955720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955723">}</span><br>
<span class="lineno"></span><span class="op" id="7955725">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span><span class="keyword" id="7955728">func</span>&nbsp;<span class="ident" id="7955733">BenchmarkPerm3</span><span class="op" id="7955747">(</span><span class="ident" id="7955748">b</span>&nbsp;<span class="op" id="7955750">*</span><span class="ident" id="7955751">testing</span><span class="op" id="7955758">.</span><span class="ident" id="7955759">B</span><span class="op" id="7955760">)</span>&nbsp;<span class="op" id="7955762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955765">r</span>&nbsp;<span class="op" id="7955767">:=</span>&nbsp;<span class="ident" id="7955770">New</span><span class="op" id="7955773">(</span><span class="ident" id="7955774">NewSource</span><span class="op" id="7955783">(</span><span class="num" id="7955784">1</span><span class="op" id="7955785">)</span><span class="op" id="7955786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955789">for</span>&nbsp;<span class="ident" id="7955793">n</span>&nbsp;<span class="op" id="7955795">:=</span>&nbsp;<span class="ident" id="7955798">b</span><span class="op" id="7955799">.</span><span class="ident" id="7955800">N</span><span class="op" id="7955801">;</span>&nbsp;<span class="ident" id="7955803">n</span>&nbsp;<span class="op" id="7955805">&gt;</span>&nbsp;<span class="num" id="7955807">0</span><span class="op" id="7955808">;</span>&nbsp;<span class="ident" id="7955810">n</span><span class="op" id="7955811">--</span>&nbsp;<span class="op" id="7955814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955818">r</span><span class="op" id="7955819">.</span><span class="ident" id="7955820">Perm</span><span class="op" id="7955824">(</span><span class="num" id="7955825">3</span><span class="op" id="7955826">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955829">}</span><br>
<span class="lineno"></span><span class="op" id="7955831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7955834">func</span>&nbsp;<span class="ident" id="7955839">BenchmarkPerm30</span><span class="op" id="7955854">(</span><span class="ident" id="7955855">b</span>&nbsp;<span class="op" id="7955857">*</span><span class="ident" id="7955858">testing</span><span class="op" id="7955865">.</span><span class="ident" id="7955866">B</span><span class="op" id="7955867">)</span>&nbsp;<span class="op" id="7955869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955872">r</span>&nbsp;<span class="op" id="7955874">:=</span>&nbsp;<span class="ident" id="7955877">New</span><span class="op" id="7955880">(</span><span class="ident" id="7955881">NewSource</span><span class="op" id="7955890">(</span><span class="num" id="7955891">1</span><span class="op" id="7955892">)</span><span class="op" id="7955893">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955896">for</span>&nbsp;<span class="ident" id="7955900">n</span>&nbsp;<span class="op" id="7955902">:=</span>&nbsp;<span class="ident" id="7955905">b</span><span class="op" id="7955906">.</span><span class="ident" id="7955907">N</span><span class="op" id="7955908">;</span>&nbsp;<span class="ident" id="7955910">n</span>&nbsp;<span class="op" id="7955912">&gt;</span>&nbsp;<span class="num" id="7955914">0</span><span class="op" id="7955915">;</span>&nbsp;<span class="ident" id="7955917">n</span><span class="op" id="7955918">--</span>&nbsp;<span class="op" id="7955921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955925">r</span><span class="op" id="7955926">.</span><span class="ident" id="7955927">Perm</span><span class="op" id="7955931">(</span><span class="num" id="7955932">30</span><span class="op" id="7955934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955937">}</span><br>
<span class="lineno"></span><span class="op" id="7955939">}</span>
</div>
</body>
</html>
