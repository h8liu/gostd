<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/doc</h2>
<ul>
<li><a href="/gostd/go/doc/comment.go.html">comment.go</a></li>
<li><a href="/gostd/go/doc/comment_test.go.html">comment_test.go</a></li>
<li><a href="/gostd/go/doc/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/doc/doc_test.go.html">doc_test.go</a></li>
<li><a href="/gostd/go/doc/example.go.html">example.go</a></li>
<li><a href="/gostd/go/doc/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/doc/exports.go.html" class="current">exports.go</a></li>
<li><a href="/gostd/go/doc/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/doc/reader.go.html">reader.go</a></li>
<li><a href="/gostd/go/doc/synopsis.go.html">synopsis.go</a></li>
<li><a href="/gostd/go/doc/synopsis_test.go.html">synopsis_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3503898">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3503953">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3504007">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3504058">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;export&nbsp;filtering&nbsp;of&nbsp;an&nbsp;AST.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3504111">package</span>&nbsp;<span class="ident" id="3504119">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3504124">import</span>&nbsp;<span class="op" id="3504131">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3504134">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3504144">&#34;go/token&#34;</span><br>
<span class="lineno"></span><span class="op" id="3504155">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3504158">//&nbsp;filterIdentList&nbsp;removes&nbsp;unexported&nbsp;names&nbsp;from&nbsp;list&nbsp;in&nbsp;place</span><br>
<span class="lineno">15</span><span class="comment" id="3504221">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;list.&nbsp;If&nbsp;blankOk&nbsp;is&nbsp;set,&nbsp;blank</span><br>
<span class="lineno"></span><span class="comment" id="3504281">//&nbsp;identifiers&nbsp;are&nbsp;considered&nbsp;exported&nbsp;names.</span><br>
<span class="lineno"></span><span class="comment" id="3504327">//</span><br>
<span class="lineno"></span><span class="keyword" id="3504330">func</span>&nbsp;<span class="ident" id="3504335">filterIdentList</span><span class="op" id="3504350">(</span><span class="ident" id="3504351">list</span>&nbsp;<span class="op" id="3504356">[</span><span class="op" id="3504357">]</span><span class="op" id="3504358">*</span><span class="ident" id="3504359"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3504362">.</span><span class="ident" id="3504363"><a href="/gostd/go/ast/ast.go.html#3800239">Ident</a></span><span class="op" id="3504368">,</span>&nbsp;<span class="ident" id="3504370">blankOk</span>&nbsp;<span class="builtintype" id="3504378">bool</span><span class="op" id="3504382">)</span>&nbsp;<span class="op" id="3504384">[</span><span class="op" id="3504385">]</span><span class="op" id="3504386">*</span><span class="ident" id="3504387"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3504390">.</span><span class="ident" id="3504391"><a href="/gostd/go/ast/ast.go.html#3800239">Ident</a></span>&nbsp;<span class="op" id="3504397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3504400">j</span>&nbsp;<span class="op" id="3504402">:=</span>&nbsp;<span class="num" id="3504405">0</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3504408">for</span>&nbsp;<span class="ident" id="3504412">_</span><span class="op" id="3504413">,</span>&nbsp;<span class="ident" id="3504415">x</span>&nbsp;<span class="op" id="3504417">:=</span>&nbsp;<span class="keyword" id="3504420">range</span>&nbsp;<span class="ident" id="3504426"><a href="/gostd/go/doc/exports.go.html#3504351">list</a></span>&nbsp;<span class="op" id="3504431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3504435">if</span>&nbsp;<span class="ident" id="3504438"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3504441">.</span><span class="ident" id="3504442"><a href="/gostd/go/ast/ast.go.html#3810150">IsExported</a></span><span class="op" id="3504452">(</span><span class="ident" id="3504453"><a href="/gostd/go/doc/exports.go.html#3504415">x</a></span><span class="op" id="3504454">.</span><span class="ident" id="3504455"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="3504459">)</span>&nbsp;<span class="op" id="3504461">||</span>&nbsp;<span class="op" id="3504464">(</span><span class="ident" id="3504465"><a href="/gostd/go/doc/exports.go.html#3504370">blankOk</a></span>&nbsp;<span class="op" id="3504473">&amp;&amp;</span>&nbsp;<span class="ident" id="3504476"><a href="/gostd/go/doc/exports.go.html#3504415">x</a></span><span class="op" id="3504477">.</span><span class="ident" id="3504478"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span>&nbsp;<span class="op" id="3504483">==</span>&nbsp;<span class="string" id="3504486">&#34;_&#34;</span><span class="op" id="3504489">)</span>&nbsp;<span class="op" id="3504491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3504496"><a href="/gostd/go/doc/exports.go.html#3504351">list</a></span><span class="op" id="3504500">[</span><span class="ident" id="3504501"><a href="/gostd/go/doc/exports.go.html#3504400">j</a></span><span class="op" id="3504502">]</span>&nbsp;<span class="op" id="3504504">=</span>&nbsp;<span class="ident" id="3504506"><a href="/gostd/go/doc/exports.go.html#3504415">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3504511"><a href="/gostd/go/doc/exports.go.html#3504400">j</a></span><span class="op" id="3504512">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3504517">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3504520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3504523">return</span>&nbsp;<span class="ident" id="3504530"><a href="/gostd/go/doc/exports.go.html#3504351">list</a></span><span class="op" id="3504534">[</span><span class="num" id="3504535">0</span><span class="op" id="3504536">:</span><span class="ident" id="3504537"><a href="/gostd/go/doc/exports.go.html#3504400">j</a></span><span class="op" id="3504538">]</span><br>
<span class="lineno"></span><span class="op" id="3504540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3504543">//&nbsp;removeErrorField&nbsp;removes&nbsp;anonymous&nbsp;fields&nbsp;named&nbsp;&#34;error&#34;&nbsp;from&nbsp;an&nbsp;interface.</span><br>
<span class="lineno">30</span><span class="comment" id="3504621">//&nbsp;This&nbsp;is&nbsp;called&nbsp;when&nbsp;&#34;error&#34;&nbsp;has&nbsp;been&nbsp;determined&nbsp;to&nbsp;be&nbsp;a&nbsp;local&nbsp;name,</span><br>
<span class="lineno"></span><span class="comment" id="3504692">//&nbsp;not&nbsp;the&nbsp;predeclared&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="3504721">//</span><br>
<span class="lineno"></span><span class="keyword" id="3504724">func</span>&nbsp;<span class="ident" id="3504729">removeErrorField</span><span class="op" id="3504745">(</span><span class="ident" id="3504746">ityp</span>&nbsp;<span class="op" id="3504751">*</span><span class="ident" id="3504752"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3504755">.</span><span class="ident" id="3504756"><a href="/gostd/go/ast/ast.go.html#3805040">InterfaceType</a></span><span class="op" id="3504769">)</span>&nbsp;<span class="op" id="3504771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3504774">list</span>&nbsp;<span class="op" id="3504779">:=</span>&nbsp;<span class="ident" id="3504782"><a href="/gostd/go/doc/exports.go.html#3504746">ityp</a></span><span class="op" id="3504786">.</span><span class="ident" id="3504787"><a href="/gostd/go/ast/ast.go.html#3805124">Methods</a></span><span class="op" id="3504794">.</span><span class="ident" id="3504795"><a href="/gostd/go/ast/ast.go.html#3798946">List</a></span>&nbsp;<span class="comment" id="3504800">//&nbsp;we&nbsp;know&nbsp;that&nbsp;ityp.Methods&nbsp;!=&nbsp;nil</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3504837">j</span>&nbsp;<span class="op" id="3504839">:=</span>&nbsp;<span class="num" id="3504842">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3504845">for</span>&nbsp;<span class="ident" id="3504849">_</span><span class="op" id="3504850">,</span>&nbsp;<span class="ident" id="3504852">field</span>&nbsp;<span class="op" id="3504858">:=</span>&nbsp;<span class="keyword" id="3504861">range</span>&nbsp;<span class="ident" id="3504867"><a href="/gostd/go/doc/exports.go.html#3504774">list</a></span>&nbsp;<span class="op" id="3504872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3504876">keepField</span>&nbsp;<span class="op" id="3504886">:=</span>&nbsp;<span class="builtintype" id="3504889">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3504896">if</span>&nbsp;<span class="ident" id="3504899">n</span>&nbsp;<span class="op" id="3504901">:=</span>&nbsp;<span class="builtinfunc" id="3504904">len</span><span class="op" id="3504907">(</span><span class="ident" id="3504908"><a href="/gostd/go/doc/exports.go.html#3504852">field</a></span><span class="op" id="3504913">.</span><span class="ident" id="3504914"><a href="/gostd/go/ast/ast.go.html#3798333">Names</a></span><span class="op" id="3504919">)</span><span class="op" id="3504920">;</span>&nbsp;<span class="ident" id="3504922"><a href="/gostd/go/doc/exports.go.html#3504899">n</a></span>&nbsp;<span class="op" id="3504924">==</span>&nbsp;<span class="num" id="3504927">0</span>&nbsp;<span class="op" id="3504929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3504934">//&nbsp;anonymous&nbsp;field</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3504956">if</span>&nbsp;<span class="ident" id="3504959">fname</span><span class="op" id="3504964">,</span>&nbsp;<span class="ident" id="3504966">_</span>&nbsp;<span class="op" id="3504968">:=</span>&nbsp;<span class="ident" id="3504971"><a href="/gostd/go/doc/reader.go.html#3513845">baseTypeName</a></span><span class="op" id="3504983">(</span><span class="ident" id="3504984"><a href="/gostd/go/doc/exports.go.html#3504852">field</a></span><span class="op" id="3504989">.</span><span class="ident" id="3504990"><a href="/gostd/go/ast/ast.go.html#3798415">Type</a></span><span class="op" id="3504994">)</span><span class="op" id="3504995">;</span>&nbsp;<span class="ident" id="3504997"><a href="/gostd/go/doc/exports.go.html#3504959">fname</a></span>&nbsp;<span class="op" id="3505003">==</span>&nbsp;<span class="string" id="3505006">&#34;error&#34;</span>&nbsp;<span class="op" id="3505014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3505020"><a href="/gostd/go/doc/exports.go.html#3504876">keepField</a></span>&nbsp;<span class="op" id="3505030">=</span>&nbsp;<span class="builtintype" id="3505032">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3505041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3505045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3505049">if</span>&nbsp;<span class="ident" id="3505052"><a href="/gostd/go/doc/exports.go.html#3504876">keepField</a></span>&nbsp;<span class="op" id="3505062">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3505067"><a href="/gostd/go/doc/exports.go.html#3504774">list</a></span><span class="op" id="3505071">[</span><span class="ident" id="3505072"><a href="/gostd/go/doc/exports.go.html#3504837">j</a></span><span class="op" id="3505073">]</span>&nbsp;<span class="op" id="3505075">=</span>&nbsp;<span class="ident" id="3505077"><a href="/gostd/go/doc/exports.go.html#3504852">field</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3505086"><a href="/gostd/go/doc/exports.go.html#3504837">j</a></span><span class="op" id="3505087">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3505092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3505095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3505098">if</span>&nbsp;<span class="ident" id="3505101"><a href="/gostd/go/doc/exports.go.html#3504837">j</a></span>&nbsp;<span class="op" id="3505103">&lt;</span>&nbsp;<span class="builtinfunc" id="3505105">len</span><span class="op" id="3505108">(</span><span class="ident" id="3505109"><a href="/gostd/go/doc/exports.go.html#3504774">list</a></span><span class="op" id="3505113">)</span>&nbsp;<span class="op" id="3505115">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3505119"><a href="/gostd/go/doc/exports.go.html#3504746">ityp</a></span><span class="op" id="3505123">.</span><span class="ident" id="3505124"><a href="/gostd/go/ast/ast.go.html#3805167">Incomplete</a></span>&nbsp;<span class="op" id="3505135">=</span>&nbsp;<span class="builtintype" id="3505137">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3505143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3505146"><a href="/gostd/go/doc/exports.go.html#3504746">ityp</a></span><span class="op" id="3505150">.</span><span class="ident" id="3505151"><a href="/gostd/go/ast/ast.go.html#3805124">Methods</a></span><span class="op" id="3505158">.</span><span class="ident" id="3505159"><a href="/gostd/go/ast/ast.go.html#3798946">List</a></span>&nbsp;<span class="op" id="3505164">=</span>&nbsp;<span class="ident" id="3505166"><a href="/gostd/go/doc/exports.go.html#3504774">list</a></span><span class="op" id="3505170">[</span><span class="num" id="3505171">0</span><span class="op" id="3505172">:</span><span class="ident" id="3505173"><a href="/gostd/go/doc/exports.go.html#3504837">j</a></span><span class="op" id="3505174">]</span><br>
<span class="lineno"></span><span class="op" id="3505176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="3505179">//&nbsp;filterFieldList&nbsp;removes&nbsp;unexported&nbsp;fields&nbsp;(field&nbsp;names)&nbsp;from&nbsp;the&nbsp;field&nbsp;list</span><br>
<span class="lineno"></span><span class="comment" id="3505258">//&nbsp;in&nbsp;place&nbsp;and&nbsp;returns&nbsp;true&nbsp;if&nbsp;fields&nbsp;were&nbsp;removed.&nbsp;Anonymous&nbsp;fields&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="3505332">//&nbsp;recorded&nbsp;with&nbsp;the&nbsp;parent&nbsp;type.&nbsp;filterType&nbsp;is&nbsp;called&nbsp;with&nbsp;the&nbsp;types&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3505405">//&nbsp;all&nbsp;remaining&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="3505430">//</span><br>
<span class="lineno">60</span><span class="keyword" id="3505433">func</span>&nbsp;<span class="op" id="3505438">(</span><span class="ident" id="3505439">r</span>&nbsp;<span class="op" id="3505441">*</span><span class="ident" id="3505442"><a href="/gostd/go/doc/reader.go.html#3515349">reader</a></span><span class="op" id="3505448">)</span>&nbsp;<span class="ident" id="3505450">filterFieldList</span><span class="op" id="3505465">(</span><span class="ident" id="3505466">parent</span>&nbsp;<span class="op" id="3505473">*</span><span class="ident" id="3505474"><a href="/gostd/go/doc/reader.go.html#3514464">namedType</a></span><span class="op" id="3505483">,</span>&nbsp;<span class="ident" id="3505485">fields</span>&nbsp;<span class="op" id="3505492">*</span><span class="ident" id="3505493"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3505496">.</span><span class="ident" id="3505497"><a href="/gostd/go/ast/ast.go.html#3798858">FieldList</a></span><span class="op" id="3505506">,</span>&nbsp;<span class="ident" id="3505508">ityp</span>&nbsp;<span class="op" id="3505513">*</span><span class="ident" id="3505514"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3505517">.</span><span class="ident" id="3505518"><a href="/gostd/go/ast/ast.go.html#3805040">InterfaceType</a></span><span class="op" id="3505531">)</span>&nbsp;<span class="op" id="3505533">(</span><span class="ident" id="3505534">removedFields</span>&nbsp;<span class="builtintype" id="3505548">bool</span><span class="op" id="3505552">)</span>&nbsp;<span class="op" id="3505554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3505557">if</span>&nbsp;<span class="ident" id="3505560"><a href="/gostd/go/doc/exports.go.html#3505485">fields</a></span>&nbsp;<span class="op" id="3505567">==</span>&nbsp;<span class="builtintype" id="3505570">nil</span>&nbsp;<span class="op" id="3505574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3505578">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3505586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3505589">list</span>&nbsp;<span class="op" id="3505594">:=</span>&nbsp;<span class="ident" id="3505597"><a href="/gostd/go/doc/exports.go.html#3505485">fields</a></span><span class="op" id="3505603">.</span><span class="ident" id="3505604"><a href="/gostd/go/ast/ast.go.html#3798946">List</a></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3505610">j</span>&nbsp;<span class="op" id="3505612">:=</span>&nbsp;<span class="num" id="3505615">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3505618">for</span>&nbsp;<span class="ident" id="3505622">_</span><span class="op" id="3505623">,</span>&nbsp;<span class="ident" id="3505625">field</span>&nbsp;<span class="op" id="3505631">:=</span>&nbsp;<span class="keyword" id="3505634">range</span>&nbsp;<span class="ident" id="3505640"><a href="/gostd/go/doc/exports.go.html#3505589">list</a></span>&nbsp;<span class="op" id="3505645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3505649">keepField</span>&nbsp;<span class="op" id="3505659">:=</span>&nbsp;<span class="builtintype" id="3505662">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3505670">if</span>&nbsp;<span class="ident" id="3505673">n</span>&nbsp;<span class="op" id="3505675">:=</span>&nbsp;<span class="builtinfunc" id="3505678">len</span><span class="op" id="3505681">(</span><span class="ident" id="3505682"><a href="/gostd/go/doc/exports.go.html#3505625">field</a></span><span class="op" id="3505687">.</span><span class="ident" id="3505688"><a href="/gostd/go/ast/ast.go.html#3798333">Names</a></span><span class="op" id="3505693">)</span><span class="op" id="3505694">;</span>&nbsp;<span class="ident" id="3505696"><a href="/gostd/go/doc/exports.go.html#3505673">n</a></span>&nbsp;<span class="op" id="3505698">==</span>&nbsp;<span class="num" id="3505701">0</span>&nbsp;<span class="op" id="3505703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3505708">//&nbsp;anonymous&nbsp;field</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3505730">fname</span>&nbsp;<span class="op" id="3505736">:=</span>&nbsp;<span class="ident" id="3505739"><a href="/gostd/go/doc/exports.go.html#3505439">r</a></span><span class="op" id="3505740">.</span><span class="ident" id="3505741"><a href="/gostd/go/doc/reader.go.html#3516820">recordAnonymousField</a></span><span class="op" id="3505761">(</span><span class="ident" id="3505762"><a href="/gostd/go/doc/exports.go.html#3505466">parent</a></span><span class="op" id="3505768">,</span>&nbsp;<span class="ident" id="3505770"><a href="/gostd/go/doc/exports.go.html#3505625">field</a></span><span class="op" id="3505775">.</span><span class="ident" id="3505776"><a href="/gostd/go/ast/ast.go.html#3798415">Type</a></span><span class="op" id="3505780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3505785">if</span>&nbsp;<span class="ident" id="3505788"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3505791">.</span><span class="ident" id="3505792"><a href="/gostd/go/ast/ast.go.html#3810150">IsExported</a></span><span class="op" id="3505802">(</span><span class="ident" id="3505803"><a href="/gostd/go/doc/exports.go.html#3505730">fname</a></span><span class="op" id="3505808">)</span>&nbsp;<span class="op" id="3505810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3505816"><a href="/gostd/go/doc/exports.go.html#3505649">keepField</a></span>&nbsp;<span class="op" id="3505826">=</span>&nbsp;<span class="builtintype" id="3505828">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3505836">}</span>&nbsp;<span class="keyword" id="3505838">else</span>&nbsp;<span class="keyword" id="3505843">if</span>&nbsp;<span class="ident" id="3505846"><a href="/gostd/go/doc/exports.go.html#3505508">ityp</a></span>&nbsp;<span class="op" id="3505851">!=</span>&nbsp;<span class="builtintype" id="3505854">nil</span>&nbsp;<span class="op" id="3505858">&amp;&amp;</span>&nbsp;<span class="ident" id="3505861"><a href="/gostd/go/doc/exports.go.html#3505730">fname</a></span>&nbsp;<span class="op" id="3505867">==</span>&nbsp;<span class="string" id="3505870">&#34;error&#34;</span>&nbsp;<span class="op" id="3505878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3505884">//&nbsp;possibly&nbsp;the&nbsp;predeclared&nbsp;error&nbsp;interface;&nbsp;keep</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3505938">//&nbsp;it&nbsp;for&nbsp;now&nbsp;but&nbsp;remember&nbsp;this&nbsp;interface&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3505992">//&nbsp;it&nbsp;can&nbsp;be&nbsp;fixed&nbsp;if&nbsp;error&nbsp;is&nbsp;also&nbsp;defined&nbsp;locally</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3506048"><a href="/gostd/go/doc/exports.go.html#3505649">keepField</a></span>&nbsp;<span class="op" id="3506058">=</span>&nbsp;<span class="builtintype" id="3506060">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3506069"><a href="/gostd/go/doc/exports.go.html#3505439">r</a></span><span class="op" id="3506070">.</span><span class="ident" id="3506071"><a href="/gostd/go/doc/reader.go.html#3517413">remember</a></span><span class="op" id="3506079">(</span><span class="ident" id="3506080"><a href="/gostd/go/doc/exports.go.html#3505508">ityp</a></span><span class="op" id="3506084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3506089">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3506093">}</span>&nbsp;<span class="keyword" id="3506095">else</span>&nbsp;<span class="op" id="3506100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3506105"><a href="/gostd/go/doc/exports.go.html#3505625">field</a></span><span class="op" id="3506110">.</span><span class="ident" id="3506111"><a href="/gostd/go/ast/ast.go.html#3798333">Names</a></span>&nbsp;<span class="op" id="3506117">=</span>&nbsp;<span class="ident" id="3506119"><a href="/gostd/go/doc/exports.go.html#3504335">filterIdentList</a></span><span class="op" id="3506134">(</span><span class="ident" id="3506135"><a href="/gostd/go/doc/exports.go.html#3505625">field</a></span><span class="op" id="3506140">.</span><span class="ident" id="3506141"><a href="/gostd/go/ast/ast.go.html#3798333">Names</a></span><span class="op" id="3506146">,</span>&nbsp;<span class="builtintype" id="3506148">false</span><span class="op" id="3506153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3506158">if</span>&nbsp;<span class="builtinfunc" id="3506161">len</span><span class="op" id="3506164">(</span><span class="ident" id="3506165"><a href="/gostd/go/doc/exports.go.html#3505625">field</a></span><span class="op" id="3506170">.</span><span class="ident" id="3506171"><a href="/gostd/go/ast/ast.go.html#3798333">Names</a></span><span class="op" id="3506176">)</span>&nbsp;<span class="op" id="3506178">&lt;</span>&nbsp;<span class="ident" id="3506180"><a href="/gostd/go/doc/exports.go.html#3505673">n</a></span>&nbsp;<span class="op" id="3506182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3506188"><a href="/gostd/go/doc/exports.go.html#3505534">removedFields</a></span>&nbsp;<span class="op" id="3506202">=</span>&nbsp;<span class="builtintype" id="3506204">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3506212">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3506217">if</span>&nbsp;<span class="builtinfunc" id="3506220">len</span><span class="op" id="3506223">(</span><span class="ident" id="3506224"><a href="/gostd/go/doc/exports.go.html#3505625">field</a></span><span class="op" id="3506229">.</span><span class="ident" id="3506230"><a href="/gostd/go/ast/ast.go.html#3798333">Names</a></span><span class="op" id="3506235">)</span>&nbsp;<span class="op" id="3506237">&gt;</span>&nbsp;<span class="num" id="3506239">0</span>&nbsp;<span class="op" id="3506241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3506247"><a href="/gostd/go/doc/exports.go.html#3505649">keepField</a></span>&nbsp;<span class="op" id="3506257">=</span>&nbsp;<span class="builtintype" id="3506259">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3506267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3506271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3506275">if</span>&nbsp;<span class="ident" id="3506278"><a href="/gostd/go/doc/exports.go.html#3505649">keepField</a></span>&nbsp;<span class="op" id="3506288">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3506293"><a href="/gostd/go/doc/exports.go.html#3505439">r</a></span><span class="op" id="3506294">.</span><span class="ident" id="3506295"><a href="/gostd/go/doc/exports.go.html#3506898">filterType</a></span><span class="op" id="3506305">(</span><span class="builtintype" id="3506306">nil</span><span class="op" id="3506309">,</span>&nbsp;<span class="ident" id="3506311"><a href="/gostd/go/doc/exports.go.html#3505625">field</a></span><span class="op" id="3506316">.</span><span class="ident" id="3506317"><a href="/gostd/go/ast/ast.go.html#3798415">Type</a></span><span class="op" id="3506321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3506326"><a href="/gostd/go/doc/exports.go.html#3505589">list</a></span><span class="op" id="3506330">[</span><span class="ident" id="3506331"><a href="/gostd/go/doc/exports.go.html#3505610">j</a></span><span class="op" id="3506332">]</span>&nbsp;<span class="op" id="3506334">=</span>&nbsp;<span class="ident" id="3506336"><a href="/gostd/go/doc/exports.go.html#3505625">field</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3506345"><a href="/gostd/go/doc/exports.go.html#3505610">j</a></span><span class="op" id="3506346">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3506351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3506354">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3506357">if</span>&nbsp;<span class="ident" id="3506360"><a href="/gostd/go/doc/exports.go.html#3505610">j</a></span>&nbsp;<span class="op" id="3506362">&lt;</span>&nbsp;<span class="builtinfunc" id="3506364">len</span><span class="op" id="3506367">(</span><span class="ident" id="3506368"><a href="/gostd/go/doc/exports.go.html#3505589">list</a></span><span class="op" id="3506372">)</span>&nbsp;<span class="op" id="3506374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3506378"><a href="/gostd/go/doc/exports.go.html#3505534">removedFields</a></span>&nbsp;<span class="op" id="3506392">=</span>&nbsp;<span class="builtintype" id="3506394">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3506400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3506403"><a href="/gostd/go/doc/exports.go.html#3505485">fields</a></span><span class="op" id="3506409">.</span><span class="ident" id="3506410"><a href="/gostd/go/ast/ast.go.html#3798946">List</a></span>&nbsp;<span class="op" id="3506415">=</span>&nbsp;<span class="ident" id="3506417"><a href="/gostd/go/doc/exports.go.html#3505589">list</a></span><span class="op" id="3506421">[</span><span class="num" id="3506422">0</span><span class="op" id="3506423">:</span><span class="ident" id="3506424"><a href="/gostd/go/doc/exports.go.html#3505610">j</a></span><span class="op" id="3506425">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3506428">return</span><br>
<span class="lineno">100</span><span class="op" id="3506435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3506438">//&nbsp;filterParamList&nbsp;applies&nbsp;filterType&nbsp;to&nbsp;each&nbsp;parameter&nbsp;type&nbsp;in&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="3506510">//</span><br>
<span class="lineno"></span><span class="keyword" id="3506513">func</span>&nbsp;<span class="op" id="3506518">(</span><span class="ident" id="3506519">r</span>&nbsp;<span class="op" id="3506521">*</span><span class="ident" id="3506522"><a href="/gostd/go/doc/reader.go.html#3515349">reader</a></span><span class="op" id="3506528">)</span>&nbsp;<span class="ident" id="3506530">filterParamList</span><span class="op" id="3506545">(</span><span class="ident" id="3506546">fields</span>&nbsp;<span class="op" id="3506553">*</span><span class="ident" id="3506554"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3506557">.</span><span class="ident" id="3506558"><a href="/gostd/go/ast/ast.go.html#3798858">FieldList</a></span><span class="op" id="3506567">)</span>&nbsp;<span class="op" id="3506569">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3506572">if</span>&nbsp;<span class="ident" id="3506575"><a href="/gostd/go/doc/exports.go.html#3506546">fields</a></span>&nbsp;<span class="op" id="3506582">!=</span>&nbsp;<span class="builtintype" id="3506585">nil</span>&nbsp;<span class="op" id="3506589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3506593">for</span>&nbsp;<span class="ident" id="3506597">_</span><span class="op" id="3506598">,</span>&nbsp;<span class="ident" id="3506600">f</span>&nbsp;<span class="op" id="3506602">:=</span>&nbsp;<span class="keyword" id="3506605">range</span>&nbsp;<span class="ident" id="3506611"><a href="/gostd/go/doc/exports.go.html#3506546">fields</a></span><span class="op" id="3506617">.</span><span class="ident" id="3506618"><a href="/gostd/go/ast/ast.go.html#3798946">List</a></span>&nbsp;<span class="op" id="3506623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3506628"><a href="/gostd/go/doc/exports.go.html#3506519">r</a></span><span class="op" id="3506629">.</span><span class="ident" id="3506630"><a href="/gostd/go/doc/exports.go.html#3506898">filterType</a></span><span class="op" id="3506640">(</span><span class="builtintype" id="3506641">nil</span><span class="op" id="3506644">,</span>&nbsp;<span class="ident" id="3506646"><a href="/gostd/go/doc/exports.go.html#3506600">f</a></span><span class="op" id="3506647">.</span><span class="ident" id="3506648"><a href="/gostd/go/ast/ast.go.html#3798415">Type</a></span><span class="op" id="3506652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3506656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3506659">}</span><br>
<span class="lineno">110</span><span class="op" id="3506661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3506664">//&nbsp;filterType&nbsp;strips&nbsp;any&nbsp;unexported&nbsp;struct&nbsp;fields&nbsp;or&nbsp;method&nbsp;types&nbsp;from&nbsp;typ</span><br>
<span class="lineno"></span><span class="comment" id="3506739">//&nbsp;in&nbsp;place.&nbsp;If&nbsp;fields&nbsp;(or&nbsp;methods)&nbsp;have&nbsp;been&nbsp;removed,&nbsp;the&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="3506812">//&nbsp;struct&nbsp;or&nbsp;interface&nbsp;type&nbsp;has&nbsp;the&nbsp;Incomplete&nbsp;field&nbsp;set&nbsp;to&nbsp;true.</span><br>
<span class="lineno">115</span><span class="comment" id="3506878">//</span><br>
<span class="lineno"></span><span class="keyword" id="3506881">func</span>&nbsp;<span class="op" id="3506886">(</span><span class="ident" id="3506887">r</span>&nbsp;<span class="op" id="3506889">*</span><span class="ident" id="3506890"><a href="/gostd/go/doc/reader.go.html#3515349">reader</a></span><span class="op" id="3506896">)</span>&nbsp;<span class="ident" id="3506898">filterType</span><span class="op" id="3506908">(</span><span class="ident" id="3506909">parent</span>&nbsp;<span class="op" id="3506916">*</span><span class="ident" id="3506917"><a href="/gostd/go/doc/reader.go.html#3514464">namedType</a></span><span class="op" id="3506926">,</span>&nbsp;<span class="ident" id="3506928">typ</span>&nbsp;<span class="ident" id="3506932"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3506935">.</span><span class="ident" id="3506936"><a href="/gostd/go/ast/ast.go.html#3795238">Expr</a></span><span class="op" id="3506940">)</span>&nbsp;<span class="op" id="3506942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3506945">switch</span>&nbsp;<span class="ident" id="3506952">t</span>&nbsp;<span class="op" id="3506954">:=</span>&nbsp;<span class="ident" id="3506957"><a href="/gostd/go/doc/exports.go.html#3506928">typ</a></span><span class="op" id="3506960">.</span><span class="op" id="3506961">(</span><span class="keyword" id="3506962">type</span><span class="op" id="3506966">)</span>&nbsp;<span class="op" id="3506968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3506971">case</span>&nbsp;<span class="op" id="3506976">*</span><span class="ident" id="3506977"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3506980">.</span><span class="ident" id="3506981"><a href="/gostd/go/ast/ast.go.html#3800239">Ident</a></span><span class="op" id="3506986">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3506990">//&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507008">case</span>&nbsp;<span class="op" id="3507013">*</span><span class="ident" id="3507014"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3507017">.</span><span class="ident" id="3507018"><a href="/gostd/go/ast/ast.go.html#3801421">ParenExpr</a></span><span class="op" id="3507027">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3507031"><a href="/gostd/go/doc/exports.go.html#3506887">r</a></span><span class="op" id="3507032">.</span><span class="ident" id="3507033"><a href="/gostd/go/doc/exports.go.html#3506898">filterType</a></span><span class="op" id="3507043">(</span><span class="builtintype" id="3507044">nil</span><span class="op" id="3507047">,</span>&nbsp;<span class="ident" id="3507049"><a href="/gostd/go/doc/exports.go.html#3506952">t</a></span><span class="op" id="3507050">.</span><span class="ident" id="3507051"><a href="/gostd/go/ast/ast.go.html#3801480">X</a></span><span class="op" id="3507052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507055">case</span>&nbsp;<span class="op" id="3507060">*</span><span class="ident" id="3507061"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3507064">.</span><span class="ident" id="3507065"><a href="/gostd/go/ast/ast.go.html#3804223">ArrayType</a></span><span class="op" id="3507074">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3507078"><a href="/gostd/go/doc/exports.go.html#3506887">r</a></span><span class="op" id="3507079">.</span><span class="ident" id="3507080"><a href="/gostd/go/doc/exports.go.html#3506898">filterType</a></span><span class="op" id="3507090">(</span><span class="builtintype" id="3507091">nil</span><span class="op" id="3507094">,</span>&nbsp;<span class="ident" id="3507096"><a href="/gostd/go/doc/exports.go.html#3506952">t</a></span><span class="op" id="3507097">.</span><span class="ident" id="3507098"><a href="/gostd/go/ast/ast.go.html#3804362">Elt</a></span><span class="op" id="3507101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507104">case</span>&nbsp;<span class="op" id="3507109">*</span><span class="ident" id="3507110"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3507113">.</span><span class="ident" id="3507114"><a href="/gostd/go/ast/ast.go.html#3804448">StructType</a></span><span class="op" id="3507124">:</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507128">if</span>&nbsp;<span class="ident" id="3507131"><a href="/gostd/go/doc/exports.go.html#3506887">r</a></span><span class="op" id="3507132">.</span><span class="ident" id="3507133"><a href="/gostd/go/doc/exports.go.html#3505450">filterFieldList</a></span><span class="op" id="3507148">(</span><span class="ident" id="3507149"><a href="/gostd/go/doc/exports.go.html#3506909">parent</a></span><span class="op" id="3507155">,</span>&nbsp;<span class="ident" id="3507157"><a href="/gostd/go/doc/exports.go.html#3506952">t</a></span><span class="op" id="3507158">.</span><span class="ident" id="3507159"><a href="/gostd/go/ast/ast.go.html#3804526">Fields</a></span><span class="op" id="3507165">,</span>&nbsp;<span class="builtintype" id="3507167">nil</span><span class="op" id="3507170">)</span>&nbsp;<span class="op" id="3507172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3507177"><a href="/gostd/go/doc/exports.go.html#3506952">t</a></span><span class="op" id="3507178">.</span><span class="ident" id="3507179"><a href="/gostd/go/ast/ast.go.html#3804580">Incomplete</a></span>&nbsp;<span class="op" id="3507190">=</span>&nbsp;<span class="builtintype" id="3507192">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3507199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507202">case</span>&nbsp;<span class="op" id="3507207">*</span><span class="ident" id="3507208"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3507211">.</span><span class="ident" id="3507212"><a href="/gostd/go/ast/ast.go.html#3804768">FuncType</a></span><span class="op" id="3507220">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3507224"><a href="/gostd/go/doc/exports.go.html#3506887">r</a></span><span class="op" id="3507225">.</span><span class="ident" id="3507226"><a href="/gostd/go/doc/exports.go.html#3506530">filterParamList</a></span><span class="op" id="3507241">(</span><span class="ident" id="3507242"><a href="/gostd/go/doc/exports.go.html#3506952">t</a></span><span class="op" id="3507243">.</span><span class="ident" id="3507244"><a href="/gostd/go/ast/ast.go.html#3804875">Params</a></span><span class="op" id="3507250">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3507254"><a href="/gostd/go/doc/exports.go.html#3506887">r</a></span><span class="op" id="3507255">.</span><span class="ident" id="3507256"><a href="/gostd/go/doc/exports.go.html#3506530">filterParamList</a></span><span class="op" id="3507271">(</span><span class="ident" id="3507272"><a href="/gostd/go/doc/exports.go.html#3506952">t</a></span><span class="op" id="3507273">.</span><span class="ident" id="3507274"><a href="/gostd/go/ast/ast.go.html#3804930">Results</a></span><span class="op" id="3507281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507284">case</span>&nbsp;<span class="op" id="3507289">*</span><span class="ident" id="3507290"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3507293">.</span><span class="ident" id="3507294"><a href="/gostd/go/ast/ast.go.html#3805040">InterfaceType</a></span><span class="op" id="3507307">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507311">if</span>&nbsp;<span class="ident" id="3507314"><a href="/gostd/go/doc/exports.go.html#3506887">r</a></span><span class="op" id="3507315">.</span><span class="ident" id="3507316"><a href="/gostd/go/doc/exports.go.html#3505450">filterFieldList</a></span><span class="op" id="3507331">(</span><span class="ident" id="3507332"><a href="/gostd/go/doc/exports.go.html#3506909">parent</a></span><span class="op" id="3507338">,</span>&nbsp;<span class="ident" id="3507340"><a href="/gostd/go/doc/exports.go.html#3506952">t</a></span><span class="op" id="3507341">.</span><span class="ident" id="3507342"><a href="/gostd/go/ast/ast.go.html#3805124">Methods</a></span><span class="op" id="3507349">,</span>&nbsp;<span class="ident" id="3507351"><a href="/gostd/go/doc/exports.go.html#3506952">t</a></span><span class="op" id="3507352">)</span>&nbsp;<span class="op" id="3507354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3507359"><a href="/gostd/go/doc/exports.go.html#3506952">t</a></span><span class="op" id="3507360">.</span><span class="ident" id="3507361"><a href="/gostd/go/ast/ast.go.html#3805167">Incomplete</a></span>&nbsp;<span class="op" id="3507372">=</span>&nbsp;<span class="builtintype" id="3507374">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3507381">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507384">case</span>&nbsp;<span class="op" id="3507389">*</span><span class="ident" id="3507390"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3507393">.</span><span class="ident" id="3507394"><a href="/gostd/go/ast/ast.go.html#3805296">MapType</a></span><span class="op" id="3507401">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3507405"><a href="/gostd/go/doc/exports.go.html#3506887">r</a></span><span class="op" id="3507406">.</span><span class="ident" id="3507407"><a href="/gostd/go/doc/exports.go.html#3506898">filterType</a></span><span class="op" id="3507417">(</span><span class="builtintype" id="3507418">nil</span><span class="op" id="3507421">,</span>&nbsp;<span class="ident" id="3507423"><a href="/gostd/go/doc/exports.go.html#3506952">t</a></span><span class="op" id="3507424">.</span><span class="ident" id="3507425"><a href="/gostd/go/ast/ast.go.html#3805362">Key</a></span><span class="op" id="3507428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3507432"><a href="/gostd/go/doc/exports.go.html#3506887">r</a></span><span class="op" id="3507433">.</span><span class="ident" id="3507434"><a href="/gostd/go/doc/exports.go.html#3506898">filterType</a></span><span class="op" id="3507444">(</span><span class="builtintype" id="3507445">nil</span><span class="op" id="3507448">,</span>&nbsp;<span class="ident" id="3507450"><a href="/gostd/go/doc/exports.go.html#3506952">t</a></span><span class="op" id="3507451">.</span><span class="ident" id="3507452"><a href="/gostd/go/ast/ast.go.html#3805375">Value</a></span><span class="op" id="3507457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507460">case</span>&nbsp;<span class="op" id="3507465">*</span><span class="ident" id="3507466"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3507469">.</span><span class="ident" id="3507470"><a href="/gostd/go/ast/ast.go.html#3805438">ChanType</a></span><span class="op" id="3507478">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3507482"><a href="/gostd/go/doc/exports.go.html#3506887">r</a></span><span class="op" id="3507483">.</span><span class="ident" id="3507484"><a href="/gostd/go/doc/exports.go.html#3506898">filterType</a></span><span class="op" id="3507494">(</span><span class="builtintype" id="3507495">nil</span><span class="op" id="3507498">,</span>&nbsp;<span class="ident" id="3507500"><a href="/gostd/go/doc/exports.go.html#3506952">t</a></span><span class="op" id="3507501">.</span><span class="ident" id="3507502"><a href="/gostd/go/ast/ast.go.html#3805649">Value</a></span><span class="op" id="3507507">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3507510">}</span><br>
<span class="lineno"></span><span class="op" id="3507512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3507515">func</span>&nbsp;<span class="op" id="3507520">(</span><span class="ident" id="3507521">r</span>&nbsp;<span class="op" id="3507523">*</span><span class="ident" id="3507524"><a href="/gostd/go/doc/reader.go.html#3515349">reader</a></span><span class="op" id="3507530">)</span>&nbsp;<span class="ident" id="3507532">filterSpec</span><span class="op" id="3507542">(</span><span class="ident" id="3507543">spec</span>&nbsp;<span class="ident" id="3507548"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3507551">.</span><span class="ident" id="3507552"><a href="/gostd/go/ast/ast.go.html#3819508">Spec</a></span><span class="op" id="3507556">,</span>&nbsp;<span class="ident" id="3507558">tok</span>&nbsp;<span class="ident" id="3507562"><a href="/gostd/go/doc/exports.go.html#3504144">token</a></span><span class="op" id="3507567">.</span><span class="ident" id="3507568"><a href="/gostd/go/token/token.go.html#3889622">Token</a></span><span class="op" id="3507573">)</span>&nbsp;<span class="builtintype" id="3507575">bool</span>&nbsp;<span class="op" id="3507580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507583">switch</span>&nbsp;<span class="ident" id="3507590">s</span>&nbsp;<span class="op" id="3507592">:=</span>&nbsp;<span class="ident" id="3507595"><a href="/gostd/go/doc/exports.go.html#3507543">spec</a></span><span class="op" id="3507599">.</span><span class="op" id="3507600">(</span><span class="keyword" id="3507601">type</span><span class="op" id="3507605">)</span>&nbsp;<span class="op" id="3507607">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507610">case</span>&nbsp;<span class="op" id="3507615">*</span><span class="ident" id="3507616"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3507619">.</span><span class="ident" id="3507620"><a href="/gostd/go/ast/ast.go.html#3819609">ImportSpec</a></span><span class="op" id="3507630">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3507634">//&nbsp;always&nbsp;keep&nbsp;imports&nbsp;so&nbsp;we&nbsp;can&nbsp;collect&nbsp;them</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507682">return</span>&nbsp;<span class="builtintype" id="3507689">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507695">case</span>&nbsp;<span class="op" id="3507700">*</span><span class="ident" id="3507701"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3507704">.</span><span class="ident" id="3507705"><a href="/gostd/go/ast/ast.go.html#3820033">ValueSpec</a></span><span class="op" id="3507714">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3507718">//&nbsp;special&nbsp;case:&nbsp;consider&nbsp;blank&nbsp;constants&nbsp;as&nbsp;exported</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3507774">//&nbsp;(work-around&nbsp;for&nbsp;issue&nbsp;5397)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3507808"><a href="/gostd/go/doc/exports.go.html#3507590">s</a></span><span class="op" id="3507809">.</span><span class="ident" id="3507810"><a href="/gostd/go/ast/ast.go.html#3820114">Names</a></span>&nbsp;<span class="op" id="3507816">=</span>&nbsp;<span class="ident" id="3507818"><a href="/gostd/go/doc/exports.go.html#3504335">filterIdentList</a></span><span class="op" id="3507833">(</span><span class="ident" id="3507834"><a href="/gostd/go/doc/exports.go.html#3507590">s</a></span><span class="op" id="3507835">.</span><span class="ident" id="3507836"><a href="/gostd/go/ast/ast.go.html#3820114">Names</a></span><span class="op" id="3507841">,</span>&nbsp;<span class="ident" id="3507843"><a href="/gostd/go/doc/exports.go.html#3507558">tok</a></span>&nbsp;<span class="op" id="3507847">==</span>&nbsp;<span class="ident" id="3507850"><a href="/gostd/go/doc/exports.go.html#3504144">token</a></span><span class="op" id="3507855">.</span><span class="ident" id="3507856"><a href="/gostd/go/token/token.go.html#3890769">CONST</a></span><span class="op" id="3507861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507865">if</span>&nbsp;<span class="builtinfunc" id="3507868">len</span><span class="op" id="3507871">(</span><span class="ident" id="3507872"><a href="/gostd/go/doc/exports.go.html#3507590">s</a></span><span class="op" id="3507873">.</span><span class="ident" id="3507874"><a href="/gostd/go/ast/ast.go.html#3820114">Names</a></span><span class="op" id="3507879">)</span>&nbsp;<span class="op" id="3507881">&gt;</span>&nbsp;<span class="num" id="3507883">0</span>&nbsp;<span class="op" id="3507885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3507890"><a href="/gostd/go/doc/exports.go.html#3507521">r</a></span><span class="op" id="3507891">.</span><span class="ident" id="3507892"><a href="/gostd/go/doc/exports.go.html#3506898">filterType</a></span><span class="op" id="3507902">(</span><span class="builtintype" id="3507903">nil</span><span class="op" id="3507906">,</span>&nbsp;<span class="ident" id="3507908"><a href="/gostd/go/doc/exports.go.html#3507590">s</a></span><span class="op" id="3507909">.</span><span class="ident" id="3507910"><a href="/gostd/go/ast/ast.go.html#3820170">Type</a></span><span class="op" id="3507914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507919">return</span>&nbsp;<span class="builtintype" id="3507926">true</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3507933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507936">case</span>&nbsp;<span class="op" id="3507941">*</span><span class="ident" id="3507942"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3507945">.</span><span class="ident" id="3507946"><a href="/gostd/go/ast/ast.go.html#3820391">TypeSpec</a></span><span class="op" id="3507954">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507958">if</span>&nbsp;<span class="ident" id="3507961">name</span>&nbsp;<span class="op" id="3507966">:=</span>&nbsp;<span class="ident" id="3507969"><a href="/gostd/go/doc/exports.go.html#3507590">s</a></span><span class="op" id="3507970">.</span><span class="ident" id="3507971"><a href="/gostd/go/ast/ast.go.html#3820471">Name</a></span><span class="op" id="3507975">.</span><span class="ident" id="3507976"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="3507980">;</span>&nbsp;<span class="ident" id="3507982"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3507985">.</span><span class="ident" id="3507986"><a href="/gostd/go/ast/ast.go.html#3810150">IsExported</a></span><span class="op" id="3507996">(</span><span class="ident" id="3507997"><a href="/gostd/go/doc/exports.go.html#3507961">name</a></span><span class="op" id="3508001">)</span>&nbsp;<span class="op" id="3508003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3508008"><a href="/gostd/go/doc/exports.go.html#3507521">r</a></span><span class="op" id="3508009">.</span><span class="ident" id="3508010"><a href="/gostd/go/doc/exports.go.html#3506898">filterType</a></span><span class="op" id="3508020">(</span><span class="ident" id="3508021"><a href="/gostd/go/doc/exports.go.html#3507521">r</a></span><span class="op" id="3508022">.</span><span class="ident" id="3508023"><a href="/gostd/go/doc/reader.go.html#3516177">lookupType</a></span><span class="op" id="3508033">(</span><span class="ident" id="3508034"><a href="/gostd/go/doc/exports.go.html#3507590">s</a></span><span class="op" id="3508035">.</span><span class="ident" id="3508036"><a href="/gostd/go/ast/ast.go.html#3820471">Name</a></span><span class="op" id="3508040">.</span><span class="ident" id="3508041"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="3508045">)</span><span class="op" id="3508046">,</span>&nbsp;<span class="ident" id="3508048"><a href="/gostd/go/doc/exports.go.html#3507590">s</a></span><span class="op" id="3508049">.</span><span class="ident" id="3508050"><a href="/gostd/go/ast/ast.go.html#3820508">Type</a></span><span class="op" id="3508054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508059">return</span>&nbsp;<span class="builtintype" id="3508066">true</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3508073">}</span>&nbsp;<span class="keyword" id="3508075">else</span>&nbsp;<span class="keyword" id="3508080">if</span>&nbsp;<span class="ident" id="3508083"><a href="/gostd/go/doc/exports.go.html#3507961">name</a></span>&nbsp;<span class="op" id="3508088">==</span>&nbsp;<span class="string" id="3508091">&#34;error&#34;</span>&nbsp;<span class="op" id="3508099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3508104">//&nbsp;special&nbsp;case:&nbsp;remember&nbsp;that&nbsp;error&nbsp;is&nbsp;declared&nbsp;locally</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3508164"><a href="/gostd/go/doc/exports.go.html#3507521">r</a></span><span class="op" id="3508165">.</span><span class="ident" id="3508166"><a href="/gostd/go/doc/reader.go.html#3515686">errorDecl</a></span>&nbsp;<span class="op" id="3508176">=</span>&nbsp;<span class="builtintype" id="3508178">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3508185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3508188">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508191">return</span>&nbsp;<span class="builtintype" id="3508198">false</span><br>
<span class="lineno"></span><span class="op" id="3508204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3508207">func</span>&nbsp;<span class="op" id="3508212">(</span><span class="ident" id="3508213">r</span>&nbsp;<span class="op" id="3508215">*</span><span class="ident" id="3508216"><a href="/gostd/go/doc/reader.go.html#3515349">reader</a></span><span class="op" id="3508222">)</span>&nbsp;<span class="ident" id="3508224">filterSpecList</span><span class="op" id="3508238">(</span><span class="ident" id="3508239">list</span>&nbsp;<span class="op" id="3508244">[</span><span class="op" id="3508245">]</span><span class="ident" id="3508246"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3508249">.</span><span class="ident" id="3508250"><a href="/gostd/go/ast/ast.go.html#3819508">Spec</a></span><span class="op" id="3508254">,</span>&nbsp;<span class="ident" id="3508256">tok</span>&nbsp;<span class="ident" id="3508260"><a href="/gostd/go/doc/exports.go.html#3504144">token</a></span><span class="op" id="3508265">.</span><span class="ident" id="3508266"><a href="/gostd/go/token/token.go.html#3889622">Token</a></span><span class="op" id="3508271">)</span>&nbsp;<span class="op" id="3508273">[</span><span class="op" id="3508274">]</span><span class="ident" id="3508275"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3508278">.</span><span class="ident" id="3508279"><a href="/gostd/go/ast/ast.go.html#3819508">Spec</a></span>&nbsp;<span class="op" id="3508284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3508287">j</span>&nbsp;<span class="op" id="3508289">:=</span>&nbsp;<span class="num" id="3508292">0</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508295">for</span>&nbsp;<span class="ident" id="3508299">_</span><span class="op" id="3508300">,</span>&nbsp;<span class="ident" id="3508302">s</span>&nbsp;<span class="op" id="3508304">:=</span>&nbsp;<span class="keyword" id="3508307">range</span>&nbsp;<span class="ident" id="3508313"><a href="/gostd/go/doc/exports.go.html#3508239">list</a></span>&nbsp;<span class="op" id="3508318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508322">if</span>&nbsp;<span class="ident" id="3508325"><a href="/gostd/go/doc/exports.go.html#3508213">r</a></span><span class="op" id="3508326">.</span><span class="ident" id="3508327"><a href="/gostd/go/doc/exports.go.html#3507532">filterSpec</a></span><span class="op" id="3508337">(</span><span class="ident" id="3508338"><a href="/gostd/go/doc/exports.go.html#3508302">s</a></span><span class="op" id="3508339">,</span>&nbsp;<span class="ident" id="3508341"><a href="/gostd/go/doc/exports.go.html#3508256">tok</a></span><span class="op" id="3508344">)</span>&nbsp;<span class="op" id="3508346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3508351"><a href="/gostd/go/doc/exports.go.html#3508239">list</a></span><span class="op" id="3508355">[</span><span class="ident" id="3508356"><a href="/gostd/go/doc/exports.go.html#3508287">j</a></span><span class="op" id="3508357">]</span>&nbsp;<span class="op" id="3508359">=</span>&nbsp;<span class="ident" id="3508361"><a href="/gostd/go/doc/exports.go.html#3508302">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3508366"><a href="/gostd/go/doc/exports.go.html#3508287">j</a></span><span class="op" id="3508367">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3508372">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3508375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508378">return</span>&nbsp;<span class="ident" id="3508385"><a href="/gostd/go/doc/exports.go.html#3508239">list</a></span><span class="op" id="3508389">[</span><span class="num" id="3508390">0</span><span class="op" id="3508391">:</span><span class="ident" id="3508392"><a href="/gostd/go/doc/exports.go.html#3508287">j</a></span><span class="op" id="3508393">]</span><br>
<span class="lineno"></span><span class="op" id="3508395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3508398">func</span>&nbsp;<span class="op" id="3508403">(</span><span class="ident" id="3508404">r</span>&nbsp;<span class="op" id="3508406">*</span><span class="ident" id="3508407"><a href="/gostd/go/doc/reader.go.html#3515349">reader</a></span><span class="op" id="3508413">)</span>&nbsp;<span class="ident" id="3508415">filterDecl</span><span class="op" id="3508425">(</span><span class="ident" id="3508426">decl</span>&nbsp;<span class="ident" id="3508431"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3508434">.</span><span class="ident" id="3508435"><a href="/gostd/go/ast/ast.go.html#3795432">Decl</a></span><span class="op" id="3508439">)</span>&nbsp;<span class="builtintype" id="3508441">bool</span>&nbsp;<span class="op" id="3508446">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508449">switch</span>&nbsp;<span class="ident" id="3508456">d</span>&nbsp;<span class="op" id="3508458">:=</span>&nbsp;<span class="ident" id="3508461"><a href="/gostd/go/doc/exports.go.html#3508426">decl</a></span><span class="op" id="3508465">.</span><span class="op" id="3508466">(</span><span class="keyword" id="3508467">type</span><span class="op" id="3508471">)</span>&nbsp;<span class="op" id="3508473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508476">case</span>&nbsp;<span class="op" id="3508481">*</span><span class="ident" id="3508482"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3508485">.</span><span class="ident" id="3508486"><a href="/gostd/go/ast/ast.go.html#3822162">GenDecl</a></span><span class="op" id="3508493">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3508497"><a href="/gostd/go/doc/exports.go.html#3508456">d</a></span><span class="op" id="3508498">.</span><span class="ident" id="3508499"><a href="/gostd/go/ast/ast.go.html#3822383">Specs</a></span>&nbsp;<span class="op" id="3508505">=</span>&nbsp;<span class="ident" id="3508507"><a href="/gostd/go/doc/exports.go.html#3508404">r</a></span><span class="op" id="3508508">.</span><span class="ident" id="3508509"><a href="/gostd/go/doc/exports.go.html#3508224">filterSpecList</a></span><span class="op" id="3508523">(</span><span class="ident" id="3508524"><a href="/gostd/go/doc/exports.go.html#3508456">d</a></span><span class="op" id="3508525">.</span><span class="ident" id="3508526"><a href="/gostd/go/ast/ast.go.html#3822383">Specs</a></span><span class="op" id="3508531">,</span>&nbsp;<span class="ident" id="3508533"><a href="/gostd/go/doc/exports.go.html#3508456">d</a></span><span class="op" id="3508534">.</span><span class="ident" id="3508535"><a href="/gostd/go/ast/ast.go.html#3822282">Tok</a></span><span class="op" id="3508538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508542">return</span>&nbsp;<span class="builtinfunc" id="3508549">len</span><span class="op" id="3508552">(</span><span class="ident" id="3508553"><a href="/gostd/go/doc/exports.go.html#3508456">d</a></span><span class="op" id="3508554">.</span><span class="ident" id="3508555"><a href="/gostd/go/ast/ast.go.html#3822383">Specs</a></span><span class="op" id="3508560">)</span>&nbsp;<span class="op" id="3508562">&gt;</span>&nbsp;<span class="num" id="3508564">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508567">case</span>&nbsp;<span class="op" id="3508572">*</span><span class="ident" id="3508573"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3508576">.</span><span class="ident" id="3508577"><a href="/gostd/go/ast/ast.go.html#3822503">FuncDecl</a></span><span class="op" id="3508585">:</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3508589">//&nbsp;ok&nbsp;to&nbsp;filter&nbsp;these&nbsp;methods&nbsp;early&nbsp;because&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3508639">//&nbsp;conflicting&nbsp;method&nbsp;will&nbsp;be&nbsp;filtered&nbsp;here,&nbsp;too&nbsp;-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3508692">//&nbsp;thus,&nbsp;removing&nbsp;these&nbsp;methods&nbsp;early&nbsp;will&nbsp;not&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3508746">//&nbsp;to&nbsp;the&nbsp;false&nbsp;removal&nbsp;of&nbsp;possible&nbsp;conflicts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508794">return</span>&nbsp;<span class="ident" id="3508801"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3508804">.</span><span class="ident" id="3508805"><a href="/gostd/go/ast/ast.go.html#3810150">IsExported</a></span><span class="op" id="3508815">(</span><span class="ident" id="3508816"><a href="/gostd/go/doc/exports.go.html#3508456">d</a></span><span class="op" id="3508817">.</span><span class="ident" id="3508818"><a href="/gostd/go/ast/ast.go.html#3822643">Name</a></span><span class="op" id="3508822">.</span><span class="ident" id="3508823"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="3508827">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3508830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508833">return</span>&nbsp;<span class="builtintype" id="3508840">false</span><br>
<span class="lineno"></span><span class="op" id="3508846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3508849">//&nbsp;fileExports&nbsp;removes&nbsp;unexported&nbsp;declarations&nbsp;from&nbsp;src&nbsp;in&nbsp;place.</span><br>
<span class="lineno">195</span><span class="comment" id="3508915">//</span><br>
<span class="lineno"></span><span class="keyword" id="3508918">func</span>&nbsp;<span class="op" id="3508923">(</span><span class="ident" id="3508924">r</span>&nbsp;<span class="op" id="3508926">*</span><span class="ident" id="3508927"><a href="/gostd/go/doc/reader.go.html#3515349">reader</a></span><span class="op" id="3508933">)</span>&nbsp;<span class="ident" id="3508935">fileExports</span><span class="op" id="3508946">(</span><span class="ident" id="3508947">src</span>&nbsp;<span class="op" id="3508951">*</span><span class="ident" id="3508952"><a href="/gostd/go/doc/exports.go.html#3504134">ast</a></span><span class="op" id="3508955">.</span><span class="ident" id="3508956"><a href="/gostd/go/ast/ast.go.html#3823869">File</a></span><span class="op" id="3508960">)</span>&nbsp;<span class="op" id="3508962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3508965">j</span>&nbsp;<span class="op" id="3508967">:=</span>&nbsp;<span class="num" id="3508970">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508973">for</span>&nbsp;<span class="ident" id="3508977">_</span><span class="op" id="3508978">,</span>&nbsp;<span class="ident" id="3508980">d</span>&nbsp;<span class="op" id="3508982">:=</span>&nbsp;<span class="keyword" id="3508985">range</span>&nbsp;<span class="ident" id="3508991"><a href="/gostd/go/doc/exports.go.html#3508947">src</a></span><span class="op" id="3508994">.</span><span class="ident" id="3508995"><a href="/gostd/go/ast/ast.go.html#3824053">Decls</a></span>&nbsp;<span class="op" id="3509001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3509005">if</span>&nbsp;<span class="ident" id="3509008"><a href="/gostd/go/doc/exports.go.html#3508924">r</a></span><span class="op" id="3509009">.</span><span class="ident" id="3509010"><a href="/gostd/go/doc/exports.go.html#3508415">filterDecl</a></span><span class="op" id="3509020">(</span><span class="ident" id="3509021"><a href="/gostd/go/doc/exports.go.html#3508980">d</a></span><span class="op" id="3509022">)</span>&nbsp;<span class="op" id="3509024">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3509029"><a href="/gostd/go/doc/exports.go.html#3508947">src</a></span><span class="op" id="3509032">.</span><span class="ident" id="3509033"><a href="/gostd/go/ast/ast.go.html#3824053">Decls</a></span><span class="op" id="3509038">[</span><span class="ident" id="3509039"><a href="/gostd/go/doc/exports.go.html#3508965">j</a></span><span class="op" id="3509040">]</span>&nbsp;<span class="op" id="3509042">=</span>&nbsp;<span class="ident" id="3509044"><a href="/gostd/go/doc/exports.go.html#3508980">d</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3509049"><a href="/gostd/go/doc/exports.go.html#3508965">j</a></span><span class="op" id="3509050">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3509055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3509058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3509061"><a href="/gostd/go/doc/exports.go.html#3508947">src</a></span><span class="op" id="3509064">.</span><span class="ident" id="3509065"><a href="/gostd/go/ast/ast.go.html#3824053">Decls</a></span>&nbsp;<span class="op" id="3509071">=</span>&nbsp;<span class="ident" id="3509073"><a href="/gostd/go/doc/exports.go.html#3508947">src</a></span><span class="op" id="3509076">.</span><span class="ident" id="3509077"><a href="/gostd/go/ast/ast.go.html#3824053">Decls</a></span><span class="op" id="3509082">[</span><span class="num" id="3509083">0</span><span class="op" id="3509084">:</span><span class="ident" id="3509085"><a href="/gostd/go/doc/exports.go.html#3508965">j</a></span><span class="op" id="3509086">]</span><br>
<span class="lineno">205</span><span class="op" id="3509088">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
