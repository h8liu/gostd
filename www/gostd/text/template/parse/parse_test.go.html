<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>text/template/parse</h2>
<ul>
<li><a href="/gostd/text/template/parse/lex.go.html">lex.go</a></li>
<li><a href="/gostd/text/template/parse/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/text/template/parse/node.go.html">node.go</a></li>
<li><a href="/gostd/text/template/parse/parse.go.html">parse.go</a></li>
<li><a href="/gostd/text/template/parse/parse_test.go.html" class="current">parse_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8234349">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8234404">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8234458">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8234509">package</span>&nbsp;<span class="ident" id="8234517">parse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8234524">import</span>&nbsp;<span class="op" id="8234531">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8234534">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8234542">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8234549">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8234560">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8234570">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8234573">var</span>&nbsp;<span class="ident" id="8234577">debug</span>&nbsp;<span class="op" id="8234583">=</span>&nbsp;<span class="ident" id="8234585">flag</span><span class="op" id="8234589">.</span><span class="ident" id="8234590">Bool</span><span class="op" id="8234594">(</span><span class="string" id="8234595">&#34;debug&#34;</span><span class="op" id="8234602">,</span>&nbsp;<span class="builtintype" id="8234604">false</span><span class="op" id="8234609">,</span>&nbsp;<span class="string" id="8234611">&#34;show&nbsp;the&nbsp;errors&nbsp;produced&nbsp;by&nbsp;the&nbsp;main&nbsp;tests&#34;</span><span class="op" id="8234655">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8234658">type</span>&nbsp;<span class="ident" id="8234663">numberTest</span>&nbsp;<span class="keyword" id="8234674">struct</span>&nbsp;<span class="op" id="8234681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234684">text</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8234694">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234702">isInt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8234712">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234718">isUint</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8234728">bool</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234734">isFloat</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8234744">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234750">isComplex</span>&nbsp;<span class="builtintype" id="8234760">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234766">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234773">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8234781">float64</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8234790">complex128</span><br>
<span class="lineno"></span><span class="op" id="8234801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8234804">var</span>&nbsp;<span class="ident" id="8234808">numberTests</span>&nbsp;<span class="op" id="8234820">=</span>&nbsp;<span class="op" id="8234822">[</span><span class="op" id="8234823">]</span><span class="ident" id="8234824">numberTest</span><span class="op" id="8234834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8234837">//&nbsp;basics</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8234848">{</span><span class="string" id="8234849">&#34;0&#34;</span><span class="op" id="8234852">,</span>&nbsp;<span class="builtintype" id="8234854">true</span><span class="op" id="8234858">,</span>&nbsp;<span class="builtintype" id="8234860">true</span><span class="op" id="8234864">,</span>&nbsp;<span class="builtintype" id="8234866">true</span><span class="op" id="8234870">,</span>&nbsp;<span class="builtintype" id="8234872">false</span><span class="op" id="8234877">,</span>&nbsp;<span class="num" id="8234879">0</span><span class="op" id="8234880">,</span>&nbsp;<span class="num" id="8234882">0</span><span class="op" id="8234883">,</span>&nbsp;<span class="num" id="8234885">0</span><span class="op" id="8234886">,</span>&nbsp;<span class="num" id="8234888">0</span><span class="op" id="8234889">}</span><span class="op" id="8234890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8234893">{</span><span class="string" id="8234894">&#34;-0&#34;</span><span class="op" id="8234898">,</span>&nbsp;<span class="builtintype" id="8234900">true</span><span class="op" id="8234904">,</span>&nbsp;<span class="builtintype" id="8234906">true</span><span class="op" id="8234910">,</span>&nbsp;<span class="builtintype" id="8234912">true</span><span class="op" id="8234916">,</span>&nbsp;<span class="builtintype" id="8234918">false</span><span class="op" id="8234923">,</span>&nbsp;<span class="num" id="8234925">0</span><span class="op" id="8234926">,</span>&nbsp;<span class="num" id="8234928">0</span><span class="op" id="8234929">,</span>&nbsp;<span class="num" id="8234931">0</span><span class="op" id="8234932">,</span>&nbsp;<span class="num" id="8234934">0</span><span class="op" id="8234935">}</span><span class="op" id="8234936">,</span>&nbsp;<span class="comment" id="8234938">//&nbsp;check&nbsp;that&nbsp;-0&nbsp;is&nbsp;a&nbsp;uint.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8234967">{</span><span class="string" id="8234968">&#34;73&#34;</span><span class="op" id="8234972">,</span>&nbsp;<span class="builtintype" id="8234974">true</span><span class="op" id="8234978">,</span>&nbsp;<span class="builtintype" id="8234980">true</span><span class="op" id="8234984">,</span>&nbsp;<span class="builtintype" id="8234986">true</span><span class="op" id="8234990">,</span>&nbsp;<span class="builtintype" id="8234992">false</span><span class="op" id="8234997">,</span>&nbsp;<span class="num" id="8234999">73</span><span class="op" id="8235001">,</span>&nbsp;<span class="num" id="8235003">73</span><span class="op" id="8235005">,</span>&nbsp;<span class="num" id="8235007">73</span><span class="op" id="8235009">,</span>&nbsp;<span class="num" id="8235011">0</span><span class="op" id="8235012">}</span><span class="op" id="8235013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235016">{</span><span class="string" id="8235017">&#34;073&#34;</span><span class="op" id="8235022">,</span>&nbsp;<span class="builtintype" id="8235024">true</span><span class="op" id="8235028">,</span>&nbsp;<span class="builtintype" id="8235030">true</span><span class="op" id="8235034">,</span>&nbsp;<span class="builtintype" id="8235036">true</span><span class="op" id="8235040">,</span>&nbsp;<span class="builtintype" id="8235042">false</span><span class="op" id="8235047">,</span>&nbsp;<span class="num" id="8235049">073</span><span class="op" id="8235052">,</span>&nbsp;<span class="num" id="8235054">073</span><span class="op" id="8235057">,</span>&nbsp;<span class="num" id="8235059">073</span><span class="op" id="8235062">,</span>&nbsp;<span class="num" id="8235064">0</span><span class="op" id="8235065">}</span><span class="op" id="8235066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235069">{</span><span class="string" id="8235070">&#34;0x73&#34;</span><span class="op" id="8235076">,</span>&nbsp;<span class="builtintype" id="8235078">true</span><span class="op" id="8235082">,</span>&nbsp;<span class="builtintype" id="8235084">true</span><span class="op" id="8235088">,</span>&nbsp;<span class="builtintype" id="8235090">true</span><span class="op" id="8235094">,</span>&nbsp;<span class="builtintype" id="8235096">false</span><span class="op" id="8235101">,</span>&nbsp;<span class="num" id="8235103">0x73</span><span class="op" id="8235107">,</span>&nbsp;<span class="num" id="8235109">0x73</span><span class="op" id="8235113">,</span>&nbsp;<span class="num" id="8235115">0x73</span><span class="op" id="8235119">,</span>&nbsp;<span class="num" id="8235121">0</span><span class="op" id="8235122">}</span><span class="op" id="8235123">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235126">{</span><span class="string" id="8235127">&#34;-73&#34;</span><span class="op" id="8235132">,</span>&nbsp;<span class="builtintype" id="8235134">true</span><span class="op" id="8235138">,</span>&nbsp;<span class="builtintype" id="8235140">false</span><span class="op" id="8235145">,</span>&nbsp;<span class="builtintype" id="8235147">true</span><span class="op" id="8235151">,</span>&nbsp;<span class="builtintype" id="8235153">false</span><span class="op" id="8235158">,</span>&nbsp;<span class="op" id="8235160">-</span><span class="num" id="8235161">73</span><span class="op" id="8235163">,</span>&nbsp;<span class="num" id="8235165">0</span><span class="op" id="8235166">,</span>&nbsp;<span class="op" id="8235168">-</span><span class="num" id="8235169">73</span><span class="op" id="8235171">,</span>&nbsp;<span class="num" id="8235173">0</span><span class="op" id="8235174">}</span><span class="op" id="8235175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235178">{</span><span class="string" id="8235179">&#34;+73&#34;</span><span class="op" id="8235184">,</span>&nbsp;<span class="builtintype" id="8235186">true</span><span class="op" id="8235190">,</span>&nbsp;<span class="builtintype" id="8235192">false</span><span class="op" id="8235197">,</span>&nbsp;<span class="builtintype" id="8235199">true</span><span class="op" id="8235203">,</span>&nbsp;<span class="builtintype" id="8235205">false</span><span class="op" id="8235210">,</span>&nbsp;<span class="num" id="8235212">73</span><span class="op" id="8235214">,</span>&nbsp;<span class="num" id="8235216">0</span><span class="op" id="8235217">,</span>&nbsp;<span class="num" id="8235219">73</span><span class="op" id="8235221">,</span>&nbsp;<span class="num" id="8235223">0</span><span class="op" id="8235224">}</span><span class="op" id="8235225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235228">{</span><span class="string" id="8235229">&#34;100&#34;</span><span class="op" id="8235234">,</span>&nbsp;<span class="builtintype" id="8235236">true</span><span class="op" id="8235240">,</span>&nbsp;<span class="builtintype" id="8235242">true</span><span class="op" id="8235246">,</span>&nbsp;<span class="builtintype" id="8235248">true</span><span class="op" id="8235252">,</span>&nbsp;<span class="builtintype" id="8235254">false</span><span class="op" id="8235259">,</span>&nbsp;<span class="num" id="8235261">100</span><span class="op" id="8235264">,</span>&nbsp;<span class="num" id="8235266">100</span><span class="op" id="8235269">,</span>&nbsp;<span class="num" id="8235271">100</span><span class="op" id="8235274">,</span>&nbsp;<span class="num" id="8235276">0</span><span class="op" id="8235277">}</span><span class="op" id="8235278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235281">{</span><span class="string" id="8235282">&#34;1e9&#34;</span><span class="op" id="8235287">,</span>&nbsp;<span class="builtintype" id="8235289">true</span><span class="op" id="8235293">,</span>&nbsp;<span class="builtintype" id="8235295">true</span><span class="op" id="8235299">,</span>&nbsp;<span class="builtintype" id="8235301">true</span><span class="op" id="8235305">,</span>&nbsp;<span class="builtintype" id="8235307">false</span><span class="op" id="8235312">,</span>&nbsp;<span class="num" id="8235314">1e9</span><span class="op" id="8235317">,</span>&nbsp;<span class="num" id="8235319">1e9</span><span class="op" id="8235322">,</span>&nbsp;<span class="num" id="8235324">1e9</span><span class="op" id="8235327">,</span>&nbsp;<span class="num" id="8235329">0</span><span class="op" id="8235330">}</span><span class="op" id="8235331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235334">{</span><span class="string" id="8235335">&#34;-1e9&#34;</span><span class="op" id="8235341">,</span>&nbsp;<span class="builtintype" id="8235343">true</span><span class="op" id="8235347">,</span>&nbsp;<span class="builtintype" id="8235349">false</span><span class="op" id="8235354">,</span>&nbsp;<span class="builtintype" id="8235356">true</span><span class="op" id="8235360">,</span>&nbsp;<span class="builtintype" id="8235362">false</span><span class="op" id="8235367">,</span>&nbsp;<span class="op" id="8235369">-</span><span class="num" id="8235370">1e9</span><span class="op" id="8235373">,</span>&nbsp;<span class="num" id="8235375">0</span><span class="op" id="8235376">,</span>&nbsp;<span class="op" id="8235378">-</span><span class="num" id="8235379">1e9</span><span class="op" id="8235382">,</span>&nbsp;<span class="num" id="8235384">0</span><span class="op" id="8235385">}</span><span class="op" id="8235386">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235389">{</span><span class="string" id="8235390">&#34;-1.2&#34;</span><span class="op" id="8235396">,</span>&nbsp;<span class="builtintype" id="8235398">false</span><span class="op" id="8235403">,</span>&nbsp;<span class="builtintype" id="8235405">false</span><span class="op" id="8235410">,</span>&nbsp;<span class="builtintype" id="8235412">true</span><span class="op" id="8235416">,</span>&nbsp;<span class="builtintype" id="8235418">false</span><span class="op" id="8235423">,</span>&nbsp;<span class="num" id="8235425">0</span><span class="op" id="8235426">,</span>&nbsp;<span class="num" id="8235428">0</span><span class="op" id="8235429">,</span>&nbsp;<span class="op" id="8235431">-</span><span class="num" id="8235432">1.2</span><span class="op" id="8235435">,</span>&nbsp;<span class="num" id="8235437">0</span><span class="op" id="8235438">}</span><span class="op" id="8235439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235442">{</span><span class="string" id="8235443">&#34;1e19&#34;</span><span class="op" id="8235449">,</span>&nbsp;<span class="builtintype" id="8235451">false</span><span class="op" id="8235456">,</span>&nbsp;<span class="builtintype" id="8235458">true</span><span class="op" id="8235462">,</span>&nbsp;<span class="builtintype" id="8235464">true</span><span class="op" id="8235468">,</span>&nbsp;<span class="builtintype" id="8235470">false</span><span class="op" id="8235475">,</span>&nbsp;<span class="num" id="8235477">0</span><span class="op" id="8235478">,</span>&nbsp;<span class="num" id="8235480">1e19</span><span class="op" id="8235484">,</span>&nbsp;<span class="num" id="8235486">1e19</span><span class="op" id="8235490">,</span>&nbsp;<span class="num" id="8235492">0</span><span class="op" id="8235493">}</span><span class="op" id="8235494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235497">{</span><span class="string" id="8235498">&#34;-1e19&#34;</span><span class="op" id="8235505">,</span>&nbsp;<span class="builtintype" id="8235507">false</span><span class="op" id="8235512">,</span>&nbsp;<span class="builtintype" id="8235514">false</span><span class="op" id="8235519">,</span>&nbsp;<span class="builtintype" id="8235521">true</span><span class="op" id="8235525">,</span>&nbsp;<span class="builtintype" id="8235527">false</span><span class="op" id="8235532">,</span>&nbsp;<span class="num" id="8235534">0</span><span class="op" id="8235535">,</span>&nbsp;<span class="num" id="8235537">0</span><span class="op" id="8235538">,</span>&nbsp;<span class="op" id="8235540">-</span><span class="num" id="8235541">1e19</span><span class="op" id="8235545">,</span>&nbsp;<span class="num" id="8235547">0</span><span class="op" id="8235548">}</span><span class="op" id="8235549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235552">{</span><span class="string" id="8235553">&#34;4i&#34;</span><span class="op" id="8235557">,</span>&nbsp;<span class="builtintype" id="8235559">false</span><span class="op" id="8235564">,</span>&nbsp;<span class="builtintype" id="8235566">false</span><span class="op" id="8235571">,</span>&nbsp;<span class="builtintype" id="8235573">false</span><span class="op" id="8235578">,</span>&nbsp;<span class="builtintype" id="8235580">true</span><span class="op" id="8235584">,</span>&nbsp;<span class="num" id="8235586">0</span><span class="op" id="8235587">,</span>&nbsp;<span class="num" id="8235589">0</span><span class="op" id="8235590">,</span>&nbsp;<span class="num" id="8235592">0</span><span class="op" id="8235593">,</span>&nbsp;<span class="num" id="8235595">4i</span><span class="op" id="8235597">}</span><span class="op" id="8235598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235601">{</span><span class="string" id="8235602">&#34;-1.2+4.2i&#34;</span><span class="op" id="8235613">,</span>&nbsp;<span class="builtintype" id="8235615">false</span><span class="op" id="8235620">,</span>&nbsp;<span class="builtintype" id="8235622">false</span><span class="op" id="8235627">,</span>&nbsp;<span class="builtintype" id="8235629">false</span><span class="op" id="8235634">,</span>&nbsp;<span class="builtintype" id="8235636">true</span><span class="op" id="8235640">,</span>&nbsp;<span class="num" id="8235642">0</span><span class="op" id="8235643">,</span>&nbsp;<span class="num" id="8235645">0</span><span class="op" id="8235646">,</span>&nbsp;<span class="num" id="8235648">0</span><span class="op" id="8235649">,</span>&nbsp;<span class="op" id="8235651">-</span><span class="num" id="8235652">1.2</span>&nbsp;<span class="op" id="8235656">+</span>&nbsp;<span class="num" id="8235658">4.2i</span><span class="op" id="8235662">}</span><span class="op" id="8235663">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235666">{</span><span class="string" id="8235667">&#34;073i&#34;</span><span class="op" id="8235673">,</span>&nbsp;<span class="builtintype" id="8235675">false</span><span class="op" id="8235680">,</span>&nbsp;<span class="builtintype" id="8235682">false</span><span class="op" id="8235687">,</span>&nbsp;<span class="builtintype" id="8235689">false</span><span class="op" id="8235694">,</span>&nbsp;<span class="builtintype" id="8235696">true</span><span class="op" id="8235700">,</span>&nbsp;<span class="num" id="8235702">0</span><span class="op" id="8235703">,</span>&nbsp;<span class="num" id="8235705">0</span><span class="op" id="8235706">,</span>&nbsp;<span class="num" id="8235708">0</span><span class="op" id="8235709">,</span>&nbsp;<span class="num" id="8235711">73i</span><span class="op" id="8235714">}</span><span class="op" id="8235715">,</span>&nbsp;<span class="comment" id="8235717">//&nbsp;not&nbsp;octal!</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8235732">//&nbsp;complex&nbsp;with&nbsp;0&nbsp;imaginary&nbsp;are&nbsp;float&nbsp;(and&nbsp;maybe&nbsp;integer)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235791">{</span><span class="string" id="8235792">&#34;0i&#34;</span><span class="op" id="8235796">,</span>&nbsp;<span class="builtintype" id="8235798">true</span><span class="op" id="8235802">,</span>&nbsp;<span class="builtintype" id="8235804">true</span><span class="op" id="8235808">,</span>&nbsp;<span class="builtintype" id="8235810">true</span><span class="op" id="8235814">,</span>&nbsp;<span class="builtintype" id="8235816">true</span><span class="op" id="8235820">,</span>&nbsp;<span class="num" id="8235822">0</span><span class="op" id="8235823">,</span>&nbsp;<span class="num" id="8235825">0</span><span class="op" id="8235826">,</span>&nbsp;<span class="num" id="8235828">0</span><span class="op" id="8235829">,</span>&nbsp;<span class="num" id="8235831">0</span><span class="op" id="8235832">}</span><span class="op" id="8235833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235836">{</span><span class="string" id="8235837">&#34;-1.2+0i&#34;</span><span class="op" id="8235846">,</span>&nbsp;<span class="builtintype" id="8235848">false</span><span class="op" id="8235853">,</span>&nbsp;<span class="builtintype" id="8235855">false</span><span class="op" id="8235860">,</span>&nbsp;<span class="builtintype" id="8235862">true</span><span class="op" id="8235866">,</span>&nbsp;<span class="builtintype" id="8235868">true</span><span class="op" id="8235872">,</span>&nbsp;<span class="num" id="8235874">0</span><span class="op" id="8235875">,</span>&nbsp;<span class="num" id="8235877">0</span><span class="op" id="8235878">,</span>&nbsp;<span class="op" id="8235880">-</span><span class="num" id="8235881">1.2</span><span class="op" id="8235884">,</span>&nbsp;<span class="op" id="8235886">-</span><span class="num" id="8235887">1.2</span><span class="op" id="8235890">}</span><span class="op" id="8235891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235894">{</span><span class="string" id="8235895">&#34;-12+0i&#34;</span><span class="op" id="8235903">,</span>&nbsp;<span class="builtintype" id="8235905">true</span><span class="op" id="8235909">,</span>&nbsp;<span class="builtintype" id="8235911">false</span><span class="op" id="8235916">,</span>&nbsp;<span class="builtintype" id="8235918">true</span><span class="op" id="8235922">,</span>&nbsp;<span class="builtintype" id="8235924">true</span><span class="op" id="8235928">,</span>&nbsp;<span class="op" id="8235930">-</span><span class="num" id="8235931">12</span><span class="op" id="8235933">,</span>&nbsp;<span class="num" id="8235935">0</span><span class="op" id="8235936">,</span>&nbsp;<span class="op" id="8235938">-</span><span class="num" id="8235939">12</span><span class="op" id="8235941">,</span>&nbsp;<span class="op" id="8235943">-</span><span class="num" id="8235944">12</span><span class="op" id="8235946">}</span><span class="op" id="8235947">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235950">{</span><span class="string" id="8235951">&#34;13+0i&#34;</span><span class="op" id="8235958">,</span>&nbsp;<span class="builtintype" id="8235960">true</span><span class="op" id="8235964">,</span>&nbsp;<span class="builtintype" id="8235966">true</span><span class="op" id="8235970">,</span>&nbsp;<span class="builtintype" id="8235972">true</span><span class="op" id="8235976">,</span>&nbsp;<span class="builtintype" id="8235978">true</span><span class="op" id="8235982">,</span>&nbsp;<span class="num" id="8235984">13</span><span class="op" id="8235986">,</span>&nbsp;<span class="num" id="8235988">13</span><span class="op" id="8235990">,</span>&nbsp;<span class="num" id="8235992">13</span><span class="op" id="8235994">,</span>&nbsp;<span class="num" id="8235996">13</span><span class="op" id="8235998">}</span><span class="op" id="8235999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8236002">//&nbsp;funny&nbsp;bases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236018">{</span><span class="string" id="8236019">&#34;0123&#34;</span><span class="op" id="8236025">,</span>&nbsp;<span class="builtintype" id="8236027">true</span><span class="op" id="8236031">,</span>&nbsp;<span class="builtintype" id="8236033">true</span><span class="op" id="8236037">,</span>&nbsp;<span class="builtintype" id="8236039">true</span><span class="op" id="8236043">,</span>&nbsp;<span class="builtintype" id="8236045">false</span><span class="op" id="8236050">,</span>&nbsp;<span class="num" id="8236052">0123</span><span class="op" id="8236056">,</span>&nbsp;<span class="num" id="8236058">0123</span><span class="op" id="8236062">,</span>&nbsp;<span class="num" id="8236064">0123</span><span class="op" id="8236068">,</span>&nbsp;<span class="num" id="8236070">0</span><span class="op" id="8236071">}</span><span class="op" id="8236072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236075">{</span><span class="string" id="8236076">&#34;-0x0&#34;</span><span class="op" id="8236082">,</span>&nbsp;<span class="builtintype" id="8236084">true</span><span class="op" id="8236088">,</span>&nbsp;<span class="builtintype" id="8236090">true</span><span class="op" id="8236094">,</span>&nbsp;<span class="builtintype" id="8236096">true</span><span class="op" id="8236100">,</span>&nbsp;<span class="builtintype" id="8236102">false</span><span class="op" id="8236107">,</span>&nbsp;<span class="num" id="8236109">0</span><span class="op" id="8236110">,</span>&nbsp;<span class="num" id="8236112">0</span><span class="op" id="8236113">,</span>&nbsp;<span class="num" id="8236115">0</span><span class="op" id="8236116">,</span>&nbsp;<span class="num" id="8236118">0</span><span class="op" id="8236119">}</span><span class="op" id="8236120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236123">{</span><span class="string" id="8236124">&#34;0xdeadbeef&#34;</span><span class="op" id="8236136">,</span>&nbsp;<span class="builtintype" id="8236138">true</span><span class="op" id="8236142">,</span>&nbsp;<span class="builtintype" id="8236144">true</span><span class="op" id="8236148">,</span>&nbsp;<span class="builtintype" id="8236150">true</span><span class="op" id="8236154">,</span>&nbsp;<span class="builtintype" id="8236156">false</span><span class="op" id="8236161">,</span>&nbsp;<span class="num" id="8236163">0xdeadbeef</span><span class="op" id="8236173">,</span>&nbsp;<span class="num" id="8236175">0xdeadbeef</span><span class="op" id="8236185">,</span>&nbsp;<span class="num" id="8236187">0xdeadbeef</span><span class="op" id="8236197">,</span>&nbsp;<span class="num" id="8236199">0</span><span class="op" id="8236200">}</span><span class="op" id="8236201">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8236204">//&nbsp;character&nbsp;constants</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236228">{</span><span class="string" id="8236229">`&#39;a&#39;`</span><span class="op" id="8236234">,</span>&nbsp;<span class="builtintype" id="8236236">true</span><span class="op" id="8236240">,</span>&nbsp;<span class="builtintype" id="8236242">true</span><span class="op" id="8236246">,</span>&nbsp;<span class="builtintype" id="8236248">true</span><span class="op" id="8236252">,</span>&nbsp;<span class="builtintype" id="8236254">false</span><span class="op" id="8236259">,</span>&nbsp;<span class="string" id="8236261">&#39;a&#39;</span><span class="op" id="8236264">,</span>&nbsp;<span class="string" id="8236266">&#39;a&#39;</span><span class="op" id="8236269">,</span>&nbsp;<span class="string" id="8236271">&#39;a&#39;</span><span class="op" id="8236274">,</span>&nbsp;<span class="num" id="8236276">0</span><span class="op" id="8236277">}</span><span class="op" id="8236278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236281">{</span><span class="string" id="8236282">`&#39;\n&#39;`</span><span class="op" id="8236288">,</span>&nbsp;<span class="builtintype" id="8236290">true</span><span class="op" id="8236294">,</span>&nbsp;<span class="builtintype" id="8236296">true</span><span class="op" id="8236300">,</span>&nbsp;<span class="builtintype" id="8236302">true</span><span class="op" id="8236306">,</span>&nbsp;<span class="builtintype" id="8236308">false</span><span class="op" id="8236313">,</span>&nbsp;<span class="string" id="8236315">&#39;\n&#39;</span><span class="op" id="8236319">,</span>&nbsp;<span class="string" id="8236321">&#39;\n&#39;</span><span class="op" id="8236325">,</span>&nbsp;<span class="string" id="8236327">&#39;\n&#39;</span><span class="op" id="8236331">,</span>&nbsp;<span class="num" id="8236333">0</span><span class="op" id="8236334">}</span><span class="op" id="8236335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236338">{</span><span class="string" id="8236339">`&#39;\\&#39;`</span><span class="op" id="8236345">,</span>&nbsp;<span class="builtintype" id="8236347">true</span><span class="op" id="8236351">,</span>&nbsp;<span class="builtintype" id="8236353">true</span><span class="op" id="8236357">,</span>&nbsp;<span class="builtintype" id="8236359">true</span><span class="op" id="8236363">,</span>&nbsp;<span class="builtintype" id="8236365">false</span><span class="op" id="8236370">,</span>&nbsp;<span class="string" id="8236372">&#39;\\&#39;</span><span class="op" id="8236376">,</span>&nbsp;<span class="string" id="8236378">&#39;\\&#39;</span><span class="op" id="8236382">,</span>&nbsp;<span class="string" id="8236384">&#39;\\&#39;</span><span class="op" id="8236388">,</span>&nbsp;<span class="num" id="8236390">0</span><span class="op" id="8236391">}</span><span class="op" id="8236392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236395">{</span><span class="string" id="8236396">`&#39;\&#39;&#39;`</span><span class="op" id="8236402">,</span>&nbsp;<span class="builtintype" id="8236404">true</span><span class="op" id="8236408">,</span>&nbsp;<span class="builtintype" id="8236410">true</span><span class="op" id="8236414">,</span>&nbsp;<span class="builtintype" id="8236416">true</span><span class="op" id="8236420">,</span>&nbsp;<span class="builtintype" id="8236422">false</span><span class="op" id="8236427">,</span>&nbsp;<span class="string" id="8236429">&#39;\&#39;&#39;</span><span class="op" id="8236433">,</span>&nbsp;<span class="string" id="8236435">&#39;\&#39;&#39;</span><span class="op" id="8236439">,</span>&nbsp;<span class="string" id="8236441">&#39;\&#39;&#39;</span><span class="op" id="8236445">,</span>&nbsp;<span class="num" id="8236447">0</span><span class="op" id="8236448">}</span><span class="op" id="8236449">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236452">{</span><span class="string" id="8236453">`&#39;\xFF&#39;`</span><span class="op" id="8236461">,</span>&nbsp;<span class="builtintype" id="8236463">true</span><span class="op" id="8236467">,</span>&nbsp;<span class="builtintype" id="8236469">true</span><span class="op" id="8236473">,</span>&nbsp;<span class="builtintype" id="8236475">true</span><span class="op" id="8236479">,</span>&nbsp;<span class="builtintype" id="8236481">false</span><span class="op" id="8236486">,</span>&nbsp;<span class="num" id="8236488">0xFF</span><span class="op" id="8236492">,</span>&nbsp;<span class="num" id="8236494">0xFF</span><span class="op" id="8236498">,</span>&nbsp;<span class="num" id="8236500">0xFF</span><span class="op" id="8236504">,</span>&nbsp;<span class="num" id="8236506">0</span><span class="op" id="8236507">}</span><span class="op" id="8236508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236511">{</span><span class="string" id="8236512">`&#39;パ&#39;`</span><span class="op" id="8236519">,</span>&nbsp;<span class="builtintype" id="8236521">true</span><span class="op" id="8236525">,</span>&nbsp;<span class="builtintype" id="8236527">true</span><span class="op" id="8236531">,</span>&nbsp;<span class="builtintype" id="8236533">true</span><span class="op" id="8236537">,</span>&nbsp;<span class="builtintype" id="8236539">false</span><span class="op" id="8236544">,</span>&nbsp;<span class="num" id="8236546">0x30d1</span><span class="op" id="8236552">,</span>&nbsp;<span class="num" id="8236554">0x30d1</span><span class="op" id="8236560">,</span>&nbsp;<span class="num" id="8236562">0x30d1</span><span class="op" id="8236568">,</span>&nbsp;<span class="num" id="8236570">0</span><span class="op" id="8236571">}</span><span class="op" id="8236572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236575">{</span><span class="string" id="8236576">`&#39;\u30d1&#39;`</span><span class="op" id="8236586">,</span>&nbsp;<span class="builtintype" id="8236588">true</span><span class="op" id="8236592">,</span>&nbsp;<span class="builtintype" id="8236594">true</span><span class="op" id="8236598">,</span>&nbsp;<span class="builtintype" id="8236600">true</span><span class="op" id="8236604">,</span>&nbsp;<span class="builtintype" id="8236606">false</span><span class="op" id="8236611">,</span>&nbsp;<span class="num" id="8236613">0x30d1</span><span class="op" id="8236619">,</span>&nbsp;<span class="num" id="8236621">0x30d1</span><span class="op" id="8236627">,</span>&nbsp;<span class="num" id="8236629">0x30d1</span><span class="op" id="8236635">,</span>&nbsp;<span class="num" id="8236637">0</span><span class="op" id="8236638">}</span><span class="op" id="8236639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236642">{</span><span class="string" id="8236643">`&#39;\U000030d1&#39;`</span><span class="op" id="8236657">,</span>&nbsp;<span class="builtintype" id="8236659">true</span><span class="op" id="8236663">,</span>&nbsp;<span class="builtintype" id="8236665">true</span><span class="op" id="8236669">,</span>&nbsp;<span class="builtintype" id="8236671">true</span><span class="op" id="8236675">,</span>&nbsp;<span class="builtintype" id="8236677">false</span><span class="op" id="8236682">,</span>&nbsp;<span class="num" id="8236684">0x30d1</span><span class="op" id="8236690">,</span>&nbsp;<span class="num" id="8236692">0x30d1</span><span class="op" id="8236698">,</span>&nbsp;<span class="num" id="8236700">0x30d1</span><span class="op" id="8236706">,</span>&nbsp;<span class="num" id="8236708">0</span><span class="op" id="8236709">}</span><span class="op" id="8236710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8236713">//&nbsp;some&nbsp;broken&nbsp;syntax</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236736">{</span><span class="ident" id="8236737">text</span><span class="op" id="8236741">:</span>&nbsp;<span class="string" id="8236743">&#34;+-2&#34;</span><span class="op" id="8236748">}</span><span class="op" id="8236749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236752">{</span><span class="ident" id="8236753">text</span><span class="op" id="8236757">:</span>&nbsp;<span class="string" id="8236759">&#34;0x123.&#34;</span><span class="op" id="8236767">}</span><span class="op" id="8236768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236771">{</span><span class="ident" id="8236772">text</span><span class="op" id="8236776">:</span>&nbsp;<span class="string" id="8236778">&#34;1e.&#34;</span><span class="op" id="8236783">}</span><span class="op" id="8236784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236787">{</span><span class="ident" id="8236788">text</span><span class="op" id="8236792">:</span>&nbsp;<span class="string" id="8236794">&#34;0xi.&#34;</span><span class="op" id="8236800">}</span><span class="op" id="8236801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236804">{</span><span class="ident" id="8236805">text</span><span class="op" id="8236809">:</span>&nbsp;<span class="string" id="8236811">&#34;1+2.&#34;</span><span class="op" id="8236817">}</span><span class="op" id="8236818">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236821">{</span><span class="ident" id="8236822">text</span><span class="op" id="8236826">:</span>&nbsp;<span class="string" id="8236828">&#34;&#39;x&#34;</span><span class="op" id="8236832">}</span><span class="op" id="8236833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236836">{</span><span class="ident" id="8236837">text</span><span class="op" id="8236841">:</span>&nbsp;<span class="string" id="8236843">&#34;&#39;xx&#39;&#34;</span><span class="op" id="8236849">}</span><span class="op" id="8236850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8236853">//&nbsp;Issue&nbsp;8622&nbsp;-&nbsp;0xe&nbsp;parsed&nbsp;as&nbsp;floating&nbsp;point.&nbsp;Very&nbsp;embarrassing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236919">{</span><span class="string" id="8236920">&#34;0xef&#34;</span><span class="op" id="8236926">,</span>&nbsp;<span class="builtintype" id="8236928">true</span><span class="op" id="8236932">,</span>&nbsp;<span class="builtintype" id="8236934">true</span><span class="op" id="8236938">,</span>&nbsp;<span class="builtintype" id="8236940">true</span><span class="op" id="8236944">,</span>&nbsp;<span class="builtintype" id="8236946">false</span><span class="op" id="8236951">,</span>&nbsp;<span class="num" id="8236953">0xef</span><span class="op" id="8236957">,</span>&nbsp;<span class="num" id="8236959">0xef</span><span class="op" id="8236963">,</span>&nbsp;<span class="num" id="8236965">0xef</span><span class="op" id="8236969">,</span>&nbsp;<span class="num" id="8236971">0</span><span class="op" id="8236972">}</span><span class="op" id="8236973">,</span><br>
<span class="lineno"></span><span class="op" id="8236975">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="8236978">func</span>&nbsp;<span class="ident" id="8236983">TestNumberParse</span><span class="op" id="8236998">(</span><span class="ident" id="8236999">t</span>&nbsp;<span class="op" id="8237001">*</span><span class="ident" id="8237002">testing</span><span class="op" id="8237009">.</span><span class="ident" id="8237010">T</span><span class="op" id="8237011">)</span>&nbsp;<span class="op" id="8237013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237016">for</span>&nbsp;<span class="ident" id="8237020">_</span><span class="op" id="8237021">,</span>&nbsp;<span class="ident" id="8237023">test</span>&nbsp;<span class="op" id="8237028">:=</span>&nbsp;<span class="keyword" id="8237031">range</span>&nbsp;<span class="ident" id="8237037">numberTests</span>&nbsp;<span class="op" id="8237049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8237053">//&nbsp;If&nbsp;fmt.Sscan&nbsp;thinks&nbsp;it&#39;s&nbsp;complex,&nbsp;it&#39;s&nbsp;complex.&nbsp;&nbsp;We&nbsp;can&#39;t&nbsp;trust&nbsp;the&nbsp;output</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8237133">//&nbsp;because&nbsp;imaginary&nbsp;comes&nbsp;out&nbsp;as&nbsp;a&nbsp;number.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237179">var</span>&nbsp;<span class="ident" id="8237183">c</span>&nbsp;<span class="builtintype" id="8237185">complex128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237198">typ</span>&nbsp;<span class="op" id="8237202">:=</span>&nbsp;<span class="ident" id="8237205">itemNumber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237218">var</span>&nbsp;<span class="ident" id="8237222">tree</span>&nbsp;<span class="op" id="8237227">*</span><span class="ident" id="8237228">Tree</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237235">if</span>&nbsp;<span class="ident" id="8237238">test</span><span class="op" id="8237242">.</span><span class="ident" id="8237243">text</span><span class="op" id="8237247">[</span><span class="num" id="8237248">0</span><span class="op" id="8237249">]</span>&nbsp;<span class="op" id="8237251">==</span>&nbsp;<span class="string" id="8237254">&#39;\&#39;&#39;</span>&nbsp;<span class="op" id="8237259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237264">typ</span>&nbsp;<span class="op" id="8237268">=</span>&nbsp;<span class="ident" id="8237270">itemCharConstant</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8237289">}</span>&nbsp;<span class="keyword" id="8237291">else</span>&nbsp;<span class="op" id="8237296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237301">_</span><span class="op" id="8237302">,</span>&nbsp;<span class="ident" id="8237304">err</span>&nbsp;<span class="op" id="8237308">:=</span>&nbsp;<span class="ident" id="8237311">fmt</span><span class="op" id="8237314">.</span><span class="ident" id="8237315">Sscan</span><span class="op" id="8237320">(</span><span class="ident" id="8237321">test</span><span class="op" id="8237325">.</span><span class="ident" id="8237326">text</span><span class="op" id="8237330">,</span>&nbsp;<span class="op" id="8237332">&amp;</span><span class="ident" id="8237333">c</span><span class="op" id="8237334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237339">if</span>&nbsp;<span class="ident" id="8237342">err</span>&nbsp;<span class="op" id="8237346">==</span>&nbsp;<span class="ident" id="8237349">nil</span>&nbsp;<span class="op" id="8237353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237359">typ</span>&nbsp;<span class="op" id="8237363">=</span>&nbsp;<span class="ident" id="8237365">itemComplex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8237380">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8237384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237388">n</span><span class="op" id="8237389">,</span>&nbsp;<span class="ident" id="8237391">err</span>&nbsp;<span class="op" id="8237395">:=</span>&nbsp;<span class="ident" id="8237398">tree</span><span class="op" id="8237402">.</span><span class="ident" id="8237403">newNumber</span><span class="op" id="8237412">(</span><span class="num" id="8237413">0</span><span class="op" id="8237414">,</span>&nbsp;<span class="ident" id="8237416">test</span><span class="op" id="8237420">.</span><span class="ident" id="8237421">text</span><span class="op" id="8237425">,</span>&nbsp;<span class="ident" id="8237427">typ</span><span class="op" id="8237430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237434">ok</span>&nbsp;<span class="op" id="8237437">:=</span>&nbsp;<span class="ident" id="8237440">test</span><span class="op" id="8237444">.</span><span class="ident" id="8237445">isInt</span>&nbsp;<span class="op" id="8237451">||</span>&nbsp;<span class="ident" id="8237454">test</span><span class="op" id="8237458">.</span><span class="ident" id="8237459">isUint</span>&nbsp;<span class="op" id="8237466">||</span>&nbsp;<span class="ident" id="8237469">test</span><span class="op" id="8237473">.</span><span class="ident" id="8237474">isFloat</span>&nbsp;<span class="op" id="8237482">||</span>&nbsp;<span class="ident" id="8237485">test</span><span class="op" id="8237489">.</span><span class="ident" id="8237490">isComplex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237502">if</span>&nbsp;<span class="ident" id="8237505">ok</span>&nbsp;<span class="op" id="8237508">&amp;&amp;</span>&nbsp;<span class="ident" id="8237511">err</span>&nbsp;<span class="op" id="8237515">!=</span>&nbsp;<span class="ident" id="8237518">nil</span>&nbsp;<span class="op" id="8237522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237527">t</span><span class="op" id="8237528">.</span><span class="ident" id="8237529">Errorf</span><span class="op" id="8237535">(</span><span class="string" id="8237536">&#34;unexpected&nbsp;error&nbsp;for&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="8237565">,</span>&nbsp;<span class="ident" id="8237567">test</span><span class="op" id="8237571">.</span><span class="ident" id="8237572">text</span><span class="op" id="8237576">,</span>&nbsp;<span class="ident" id="8237578">err</span><span class="op" id="8237581">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237586">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8237597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237601">if</span>&nbsp;<span class="op" id="8237604">!</span><span class="ident" id="8237605">ok</span>&nbsp;<span class="op" id="8237608">&amp;&amp;</span>&nbsp;<span class="ident" id="8237611">err</span>&nbsp;<span class="op" id="8237615">==</span>&nbsp;<span class="ident" id="8237618">nil</span>&nbsp;<span class="op" id="8237622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237627">t</span><span class="op" id="8237628">.</span><span class="ident" id="8237629">Errorf</span><span class="op" id="8237635">(</span><span class="string" id="8237636">&#34;expected&nbsp;error&nbsp;for&nbsp;%q&#34;</span><span class="op" id="8237659">,</span>&nbsp;<span class="ident" id="8237661">test</span><span class="op" id="8237665">.</span><span class="ident" id="8237666">text</span><span class="op" id="8237670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237675">continue</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8237686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237690">if</span>&nbsp;<span class="op" id="8237693">!</span><span class="ident" id="8237694">ok</span>&nbsp;<span class="op" id="8237697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237702">if</span>&nbsp;<span class="op" id="8237705">*</span><span class="ident" id="8237706">debug</span>&nbsp;<span class="op" id="8237712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237718">fmt</span><span class="op" id="8237721">.</span><span class="ident" id="8237722">Printf</span><span class="op" id="8237728">(</span><span class="string" id="8237729">&#34;%s\n\t%s\n&#34;</span><span class="op" id="8237741">,</span>&nbsp;<span class="ident" id="8237743">test</span><span class="op" id="8237747">.</span><span class="ident" id="8237748">text</span><span class="op" id="8237752">,</span>&nbsp;<span class="ident" id="8237754">err</span><span class="op" id="8237757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8237762">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237767">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8237778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237782">if</span>&nbsp;<span class="ident" id="8237785">n</span><span class="op" id="8237786">.</span><span class="ident" id="8237787">IsComplex</span>&nbsp;<span class="op" id="8237797">!=</span>&nbsp;<span class="ident" id="8237800">test</span><span class="op" id="8237804">.</span><span class="ident" id="8237805">isComplex</span>&nbsp;<span class="op" id="8237815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237820">t</span><span class="op" id="8237821">.</span><span class="ident" id="8237822">Errorf</span><span class="op" id="8237828">(</span><span class="string" id="8237829">&#34;complex&nbsp;incorrect&nbsp;for&nbsp;%q;&nbsp;should&nbsp;be&nbsp;%t&#34;</span><span class="op" id="8237869">,</span>&nbsp;<span class="ident" id="8237871">test</span><span class="op" id="8237875">.</span><span class="ident" id="8237876">text</span><span class="op" id="8237880">,</span>&nbsp;<span class="ident" id="8237882">test</span><span class="op" id="8237886">.</span><span class="ident" id="8237887">isComplex</span><span class="op" id="8237896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8237900">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237904">if</span>&nbsp;<span class="ident" id="8237907">test</span><span class="op" id="8237911">.</span><span class="ident" id="8237912">isInt</span>&nbsp;<span class="op" id="8237918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237923">if</span>&nbsp;<span class="op" id="8237926">!</span><span class="ident" id="8237927">n</span><span class="op" id="8237928">.</span><span class="ident" id="8237929">IsInt</span>&nbsp;<span class="op" id="8237935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8237941">t</span><span class="op" id="8237942">.</span><span class="ident" id="8237943">Errorf</span><span class="op" id="8237949">(</span><span class="string" id="8237950">&#34;expected&nbsp;integer&nbsp;for&nbsp;%q&#34;</span><span class="op" id="8237975">,</span>&nbsp;<span class="ident" id="8237977">test</span><span class="op" id="8237981">.</span><span class="ident" id="8237982">text</span><span class="op" id="8237986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8237991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8237996">if</span>&nbsp;<span class="ident" id="8237999">n</span><span class="op" id="8238000">.</span><span class="ident" id="8238001">Int64</span>&nbsp;<span class="op" id="8238007">!=</span>&nbsp;<span class="ident" id="8238010">test</span><span class="op" id="8238014">.</span><span class="ident" id="8238015">int64</span>&nbsp;<span class="op" id="8238021">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238027">t</span><span class="op" id="8238028">.</span><span class="ident" id="8238029">Errorf</span><span class="op" id="8238035">(</span><span class="string" id="8238036">&#34;int64&nbsp;for&nbsp;%q&nbsp;should&nbsp;be&nbsp;%d&nbsp;Is&nbsp;%d&#34;</span><span class="op" id="8238069">,</span>&nbsp;<span class="ident" id="8238071">test</span><span class="op" id="8238075">.</span><span class="ident" id="8238076">text</span><span class="op" id="8238080">,</span>&nbsp;<span class="ident" id="8238082">test</span><span class="op" id="8238086">.</span><span class="ident" id="8238087">int64</span><span class="op" id="8238092">,</span>&nbsp;<span class="ident" id="8238094">n</span><span class="op" id="8238095">.</span><span class="ident" id="8238096">Int64</span><span class="op" id="8238101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238110">}</span>&nbsp;<span class="keyword" id="8238112">else</span>&nbsp;<span class="keyword" id="8238117">if</span>&nbsp;<span class="ident" id="8238120">n</span><span class="op" id="8238121">.</span><span class="ident" id="8238122">IsInt</span>&nbsp;<span class="op" id="8238128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238133">t</span><span class="op" id="8238134">.</span><span class="ident" id="8238135">Errorf</span><span class="op" id="8238141">(</span><span class="string" id="8238142">&#34;did&nbsp;not&nbsp;expect&nbsp;integer&nbsp;for&nbsp;%q&#34;</span><span class="op" id="8238173">,</span>&nbsp;<span class="ident" id="8238175">test</span><span class="op" id="8238179">.</span><span class="ident" id="8238180">text</span><span class="op" id="8238184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238188">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8238192">if</span>&nbsp;<span class="ident" id="8238195">test</span><span class="op" id="8238199">.</span><span class="ident" id="8238200">isUint</span>&nbsp;<span class="op" id="8238207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8238212">if</span>&nbsp;<span class="op" id="8238215">!</span><span class="ident" id="8238216">n</span><span class="op" id="8238217">.</span><span class="ident" id="8238218">IsUint</span>&nbsp;<span class="op" id="8238225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238231">t</span><span class="op" id="8238232">.</span><span class="ident" id="8238233">Errorf</span><span class="op" id="8238239">(</span><span class="string" id="8238240">&#34;expected&nbsp;unsigned&nbsp;integer&nbsp;for&nbsp;%q&#34;</span><span class="op" id="8238274">,</span>&nbsp;<span class="ident" id="8238276">test</span><span class="op" id="8238280">.</span><span class="ident" id="8238281">text</span><span class="op" id="8238285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8238295">if</span>&nbsp;<span class="ident" id="8238298">n</span><span class="op" id="8238299">.</span><span class="ident" id="8238300">Uint64</span>&nbsp;<span class="op" id="8238307">!=</span>&nbsp;<span class="ident" id="8238310">test</span><span class="op" id="8238314">.</span><span class="ident" id="8238315">uint64</span>&nbsp;<span class="op" id="8238322">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238328">t</span><span class="op" id="8238329">.</span><span class="ident" id="8238330">Errorf</span><span class="op" id="8238336">(</span><span class="string" id="8238337">&#34;uint64&nbsp;for&nbsp;%q&nbsp;should&nbsp;be&nbsp;%d&nbsp;Is&nbsp;%d&#34;</span><span class="op" id="8238371">,</span>&nbsp;<span class="ident" id="8238373">test</span><span class="op" id="8238377">.</span><span class="ident" id="8238378">text</span><span class="op" id="8238382">,</span>&nbsp;<span class="ident" id="8238384">test</span><span class="op" id="8238388">.</span><span class="ident" id="8238389">uint64</span><span class="op" id="8238395">,</span>&nbsp;<span class="ident" id="8238397">n</span><span class="op" id="8238398">.</span><span class="ident" id="8238399">Uint64</span><span class="op" id="8238405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238414">}</span>&nbsp;<span class="keyword" id="8238416">else</span>&nbsp;<span class="keyword" id="8238421">if</span>&nbsp;<span class="ident" id="8238424">n</span><span class="op" id="8238425">.</span><span class="ident" id="8238426">IsUint</span>&nbsp;<span class="op" id="8238433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238438">t</span><span class="op" id="8238439">.</span><span class="ident" id="8238440">Errorf</span><span class="op" id="8238446">(</span><span class="string" id="8238447">&#34;did&nbsp;not&nbsp;expect&nbsp;unsigned&nbsp;integer&nbsp;for&nbsp;%q&#34;</span><span class="op" id="8238487">,</span>&nbsp;<span class="ident" id="8238489">test</span><span class="op" id="8238493">.</span><span class="ident" id="8238494">text</span><span class="op" id="8238498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238502">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8238506">if</span>&nbsp;<span class="ident" id="8238509">test</span><span class="op" id="8238513">.</span><span class="ident" id="8238514">isFloat</span>&nbsp;<span class="op" id="8238522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8238527">if</span>&nbsp;<span class="op" id="8238530">!</span><span class="ident" id="8238531">n</span><span class="op" id="8238532">.</span><span class="ident" id="8238533">IsFloat</span>&nbsp;<span class="op" id="8238541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238547">t</span><span class="op" id="8238548">.</span><span class="ident" id="8238549">Errorf</span><span class="op" id="8238555">(</span><span class="string" id="8238556">&#34;expected&nbsp;float&nbsp;for&nbsp;%q&#34;</span><span class="op" id="8238579">,</span>&nbsp;<span class="ident" id="8238581">test</span><span class="op" id="8238585">.</span><span class="ident" id="8238586">text</span><span class="op" id="8238590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8238600">if</span>&nbsp;<span class="ident" id="8238603">n</span><span class="op" id="8238604">.</span><span class="ident" id="8238605">Float64</span>&nbsp;<span class="op" id="8238613">!=</span>&nbsp;<span class="ident" id="8238616">test</span><span class="op" id="8238620">.</span><span class="builtintype" id="8238621">float64</span>&nbsp;<span class="op" id="8238629">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238635">t</span><span class="op" id="8238636">.</span><span class="ident" id="8238637">Errorf</span><span class="op" id="8238643">(</span><span class="string" id="8238644">&#34;float64&nbsp;for&nbsp;%q&nbsp;should&nbsp;be&nbsp;%g&nbsp;Is&nbsp;%g&#34;</span><span class="op" id="8238679">,</span>&nbsp;<span class="ident" id="8238681">test</span><span class="op" id="8238685">.</span><span class="ident" id="8238686">text</span><span class="op" id="8238690">,</span>&nbsp;<span class="ident" id="8238692">test</span><span class="op" id="8238696">.</span><span class="builtintype" id="8238697">float64</span><span class="op" id="8238704">,</span>&nbsp;<span class="ident" id="8238706">n</span><span class="op" id="8238707">.</span><span class="ident" id="8238708">Float64</span><span class="op" id="8238715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238724">}</span>&nbsp;<span class="keyword" id="8238726">else</span>&nbsp;<span class="keyword" id="8238731">if</span>&nbsp;<span class="ident" id="8238734">n</span><span class="op" id="8238735">.</span><span class="ident" id="8238736">IsFloat</span>&nbsp;<span class="op" id="8238744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238749">t</span><span class="op" id="8238750">.</span><span class="ident" id="8238751">Errorf</span><span class="op" id="8238757">(</span><span class="string" id="8238758">&#34;did&nbsp;not&nbsp;expect&nbsp;float&nbsp;for&nbsp;%q&#34;</span><span class="op" id="8238787">,</span>&nbsp;<span class="ident" id="8238789">test</span><span class="op" id="8238793">.</span><span class="ident" id="8238794">text</span><span class="op" id="8238798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238802">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8238806">if</span>&nbsp;<span class="ident" id="8238809">test</span><span class="op" id="8238813">.</span><span class="ident" id="8238814">isComplex</span>&nbsp;<span class="op" id="8238824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8238829">if</span>&nbsp;<span class="op" id="8238832">!</span><span class="ident" id="8238833">n</span><span class="op" id="8238834">.</span><span class="ident" id="8238835">IsComplex</span>&nbsp;<span class="op" id="8238845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238851">t</span><span class="op" id="8238852">.</span><span class="ident" id="8238853">Errorf</span><span class="op" id="8238859">(</span><span class="string" id="8238860">&#34;expected&nbsp;complex&nbsp;for&nbsp;%q&#34;</span><span class="op" id="8238885">,</span>&nbsp;<span class="ident" id="8238887">test</span><span class="op" id="8238891">.</span><span class="ident" id="8238892">text</span><span class="op" id="8238896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8238901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8238906">if</span>&nbsp;<span class="ident" id="8238909">n</span><span class="op" id="8238910">.</span><span class="ident" id="8238911">Complex128</span>&nbsp;<span class="op" id="8238922">!=</span>&nbsp;<span class="ident" id="8238925">test</span><span class="op" id="8238929">.</span><span class="builtintype" id="8238930">complex128</span>&nbsp;<span class="op" id="8238941">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8238947">t</span><span class="op" id="8238948">.</span><span class="ident" id="8238949">Errorf</span><span class="op" id="8238955">(</span><span class="string" id="8238956">&#34;complex128&nbsp;for&nbsp;%q&nbsp;should&nbsp;be&nbsp;%g&nbsp;Is&nbsp;%g&#34;</span><span class="op" id="8238994">,</span>&nbsp;<span class="ident" id="8238996">test</span><span class="op" id="8239000">.</span><span class="ident" id="8239001">text</span><span class="op" id="8239005">,</span>&nbsp;<span class="ident" id="8239007">test</span><span class="op" id="8239011">.</span><span class="builtintype" id="8239012">complex128</span><span class="op" id="8239022">,</span>&nbsp;<span class="ident" id="8239024">n</span><span class="op" id="8239025">.</span><span class="ident" id="8239026">Complex128</span><span class="op" id="8239036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239045">}</span>&nbsp;<span class="keyword" id="8239047">else</span>&nbsp;<span class="keyword" id="8239052">if</span>&nbsp;<span class="ident" id="8239055">n</span><span class="op" id="8239056">.</span><span class="ident" id="8239057">IsComplex</span>&nbsp;<span class="op" id="8239067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239072">t</span><span class="op" id="8239073">.</span><span class="ident" id="8239074">Errorf</span><span class="op" id="8239080">(</span><span class="string" id="8239081">&#34;did&nbsp;not&nbsp;expect&nbsp;complex&nbsp;for&nbsp;%q&#34;</span><span class="op" id="8239112">,</span>&nbsp;<span class="ident" id="8239114">test</span><span class="op" id="8239118">.</span><span class="ident" id="8239119">text</span><span class="op" id="8239123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239127">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239130">}</span><br>
<span class="lineno"></span><span class="op" id="8239132">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8239135">type</span>&nbsp;<span class="ident" id="8239140">parseTest</span>&nbsp;<span class="keyword" id="8239150">struct</span>&nbsp;<span class="op" id="8239157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239160">name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8239167">string</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239175">input</span>&nbsp;&nbsp;<span class="builtintype" id="8239182">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239190">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8239197">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239203">result</span>&nbsp;<span class="builtintype" id="8239210">string</span>&nbsp;<span class="comment" id="8239217">//&nbsp;what&nbsp;the&nbsp;user&nbsp;would&nbsp;see&nbsp;in&nbsp;an&nbsp;error&nbsp;message.</span><br>
<span class="lineno"></span><span class="op" id="8239265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="8239268">const</span>&nbsp;<span class="op" id="8239274">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239277">noError</span>&nbsp;&nbsp;<span class="op" id="8239286">=</span>&nbsp;<span class="builtintype" id="8239288">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8239294">hasError</span>&nbsp;<span class="op" id="8239303">=</span>&nbsp;<span class="builtintype" id="8239305">false</span><br>
<span class="lineno"></span><span class="op" id="8239311">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="8239314">var</span>&nbsp;<span class="ident" id="8239318">parseTests</span>&nbsp;<span class="op" id="8239329">=</span>&nbsp;<span class="op" id="8239331">[</span><span class="op" id="8239332">]</span><span class="ident" id="8239333">parseTest</span><span class="op" id="8239342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239345">{</span><span class="string" id="8239346">&#34;empty&#34;</span><span class="op" id="8239353">,</span>&nbsp;<span class="string" id="8239355">&#34;&#34;</span><span class="op" id="8239357">,</span>&nbsp;<span class="ident" id="8239359">noError</span><span class="op" id="8239366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8239370">``</span><span class="op" id="8239372">}</span><span class="op" id="8239373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239376">{</span><span class="string" id="8239377">&#34;comment&#34;</span><span class="op" id="8239386">,</span>&nbsp;<span class="string" id="8239388">&#34;{{/*\n\n\n*/}}&#34;</span><span class="op" id="8239404">,</span>&nbsp;<span class="ident" id="8239406">noError</span><span class="op" id="8239413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8239417">``</span><span class="op" id="8239419">}</span><span class="op" id="8239420">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239423">{</span><span class="string" id="8239424">&#34;spaces&#34;</span><span class="op" id="8239432">,</span>&nbsp;<span class="string" id="8239434">&#34;&nbsp;\t\n&#34;</span><span class="op" id="8239441">,</span>&nbsp;<span class="ident" id="8239443">noError</span><span class="op" id="8239450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8239454">`&#34;&nbsp;\t\n&#34;`</span><span class="op" id="8239463">}</span><span class="op" id="8239464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239467">{</span><span class="string" id="8239468">&#34;text&#34;</span><span class="op" id="8239474">,</span>&nbsp;<span class="string" id="8239476">&#34;some&nbsp;text&#34;</span><span class="op" id="8239487">,</span>&nbsp;<span class="ident" id="8239489">noError</span><span class="op" id="8239496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8239500">`&#34;some&nbsp;text&#34;`</span><span class="op" id="8239513">}</span><span class="op" id="8239514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239517">{</span><span class="string" id="8239518">&#34;emptyAction&#34;</span><span class="op" id="8239531">,</span>&nbsp;<span class="string" id="8239533">&#34;{{}}&#34;</span><span class="op" id="8239539">,</span>&nbsp;<span class="ident" id="8239541">hasError</span><span class="op" id="8239549">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8239553">`{{}}`</span><span class="op" id="8239559">}</span><span class="op" id="8239560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239563">{</span><span class="string" id="8239564">&#34;field&#34;</span><span class="op" id="8239571">,</span>&nbsp;<span class="string" id="8239573">&#34;{{.X}}&#34;</span><span class="op" id="8239581">,</span>&nbsp;<span class="ident" id="8239583">noError</span><span class="op" id="8239590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8239594">`{{.X}}`</span><span class="op" id="8239602">}</span><span class="op" id="8239603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239606">{</span><span class="string" id="8239607">&#34;simple&nbsp;command&#34;</span><span class="op" id="8239623">,</span>&nbsp;<span class="string" id="8239625">&#34;{{printf}}&#34;</span><span class="op" id="8239637">,</span>&nbsp;<span class="ident" id="8239639">noError</span><span class="op" id="8239646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8239650">`{{printf}}`</span><span class="op" id="8239662">}</span><span class="op" id="8239663">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239666">{</span><span class="string" id="8239667">&#34;$&nbsp;invocation&#34;</span><span class="op" id="8239681">,</span>&nbsp;<span class="string" id="8239683">&#34;{{$}}&#34;</span><span class="op" id="8239690">,</span>&nbsp;<span class="ident" id="8239692">noError</span><span class="op" id="8239699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8239703">&#34;{{$}}&#34;</span><span class="op" id="8239710">}</span><span class="op" id="8239711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239714">{</span><span class="string" id="8239715">&#34;variable&nbsp;invocation&#34;</span><span class="op" id="8239736">,</span>&nbsp;<span class="string" id="8239738">&#34;{{with&nbsp;$x&nbsp;:=&nbsp;3}}{{$x&nbsp;23}}{{end}}&#34;</span><span class="op" id="8239772">,</span>&nbsp;<span class="ident" id="8239774">noError</span><span class="op" id="8239781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8239785">&#34;{{with&nbsp;$x&nbsp;:=&nbsp;3}}{{$x&nbsp;23}}{{end}}&#34;</span><span class="op" id="8239819">}</span><span class="op" id="8239820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239823">{</span><span class="string" id="8239824">&#34;variable&nbsp;with&nbsp;fields&#34;</span><span class="op" id="8239846">,</span>&nbsp;<span class="string" id="8239848">&#34;{{$.I}}&#34;</span><span class="op" id="8239857">,</span>&nbsp;<span class="ident" id="8239859">noError</span><span class="op" id="8239866">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8239870">&#34;{{$.I}}&#34;</span><span class="op" id="8239879">}</span><span class="op" id="8239880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239883">{</span><span class="string" id="8239884">&#34;multi-word&nbsp;command&#34;</span><span class="op" id="8239904">,</span>&nbsp;<span class="string" id="8239906">&#34;{{printf&nbsp;`%d`&nbsp;23}}&#34;</span><span class="op" id="8239926">,</span>&nbsp;<span class="ident" id="8239928">noError</span><span class="op" id="8239935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8239939">&#34;{{printf&nbsp;`%d`&nbsp;23}}&#34;</span><span class="op" id="8239959">}</span><span class="op" id="8239960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8239963">{</span><span class="string" id="8239964">&#34;pipeline&#34;</span><span class="op" id="8239974">,</span>&nbsp;<span class="string" id="8239976">&#34;{{.X|.Y}}&#34;</span><span class="op" id="8239987">,</span>&nbsp;<span class="ident" id="8239989">noError</span><span class="op" id="8239996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8240000">`{{.X&nbsp;|&nbsp;.Y}}`</span><span class="op" id="8240013">}</span><span class="op" id="8240014">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8240017">{</span><span class="string" id="8240018">&#34;pipeline&nbsp;with&nbsp;decl&#34;</span><span class="op" id="8240038">,</span>&nbsp;<span class="string" id="8240040">&#34;{{$x&nbsp;:=&nbsp;.X|.Y}}&#34;</span><span class="op" id="8240057">,</span>&nbsp;<span class="ident" id="8240059">noError</span><span class="op" id="8240066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8240070">`{{$x&nbsp;:=&nbsp;.X&nbsp;|&nbsp;.Y}}`</span><span class="op" id="8240089">}</span><span class="op" id="8240090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8240093">{</span><span class="string" id="8240094">&#34;nested&nbsp;pipeline&#34;</span><span class="op" id="8240111">,</span>&nbsp;<span class="string" id="8240113">&#34;{{.X&nbsp;(.Y&nbsp;.Z)&nbsp;(.A&nbsp;|&nbsp;.B&nbsp;.C)&nbsp;(.E)}}&#34;</span><span class="op" id="8240147">,</span>&nbsp;<span class="ident" id="8240149">noError</span><span class="op" id="8240156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8240160">`{{.X&nbsp;(.Y&nbsp;.Z)&nbsp;(.A&nbsp;|&nbsp;.B&nbsp;.C)&nbsp;(.E)}}`</span><span class="op" id="8240194">}</span><span class="op" id="8240195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8240198">{</span><span class="string" id="8240199">&#34;field&nbsp;applied&nbsp;to&nbsp;parentheses&#34;</span><span class="op" id="8240229">,</span>&nbsp;<span class="string" id="8240231">&#34;{{(.Y&nbsp;.Z).Field}}&#34;</span><span class="op" id="8240250">,</span>&nbsp;<span class="ident" id="8240252">noError</span><span class="op" id="8240259">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8240263">`{{(.Y&nbsp;.Z).Field}}`</span><span class="op" id="8240282">}</span><span class="op" id="8240283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8240286">{</span><span class="string" id="8240287">&#34;simple&nbsp;if&#34;</span><span class="op" id="8240298">,</span>&nbsp;<span class="string" id="8240300">&#34;{{if&nbsp;.X}}hello{{end}}&#34;</span><span class="op" id="8240323">,</span>&nbsp;<span class="ident" id="8240325">noError</span><span class="op" id="8240332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8240336">`{{if&nbsp;.X}}&#34;hello&#34;{{end}}`</span><span class="op" id="8240361">}</span><span class="op" id="8240362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8240365">{</span><span class="string" id="8240366">&#34;if&nbsp;with&nbsp;else&#34;</span><span class="op" id="8240380">,</span>&nbsp;<span class="string" id="8240382">&#34;{{if&nbsp;.X}}true{{else}}false{{end}}&#34;</span><span class="op" id="8240417">,</span>&nbsp;<span class="ident" id="8240419">noError</span><span class="op" id="8240426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8240430">`{{if&nbsp;.X}}&#34;true&#34;{{else}}&#34;false&#34;{{end}}`</span><span class="op" id="8240469">}</span><span class="op" id="8240470">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8240473">{</span><span class="string" id="8240474">&#34;if&nbsp;with&nbsp;else&nbsp;if&#34;</span><span class="op" id="8240491">,</span>&nbsp;<span class="string" id="8240493">&#34;{{if&nbsp;.X}}true{{else&nbsp;if&nbsp;.Y}}false{{end}}&#34;</span><span class="op" id="8240534">,</span>&nbsp;<span class="ident" id="8240536">noError</span><span class="op" id="8240543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8240547">`{{if&nbsp;.X}}&#34;true&#34;{{else}}{{if&nbsp;.Y}}&#34;false&#34;{{end}}{{end}}`</span><span class="op" id="8240602">}</span><span class="op" id="8240603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8240606">{</span><span class="string" id="8240607">&#34;if&nbsp;else&nbsp;chain&#34;</span><span class="op" id="8240622">,</span>&nbsp;<span class="string" id="8240624">&#34;+{{if&nbsp;.X}}X{{else&nbsp;if&nbsp;.Y}}Y{{else&nbsp;if&nbsp;.Z}}Z{{end}}+&#34;</span><span class="op" id="8240675">,</span>&nbsp;<span class="ident" id="8240677">noError</span><span class="op" id="8240684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8240688">`&#34;+&#34;{{if&nbsp;.X}}&#34;X&#34;{{else}}{{if&nbsp;.Y}}&#34;Y&#34;{{else}}{{if&nbsp;.Z}}&#34;Z&#34;{{end}}{{end}}{{end}}&#34;+&#34;`</span><span class="op" id="8240769">}</span><span class="op" id="8240770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8240773">{</span><span class="string" id="8240774">&#34;simple&nbsp;range&#34;</span><span class="op" id="8240788">,</span>&nbsp;<span class="string" id="8240790">&#34;{{range&nbsp;.X}}hello{{end}}&#34;</span><span class="op" id="8240816">,</span>&nbsp;<span class="ident" id="8240818">noError</span><span class="op" id="8240825">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8240829">`{{range&nbsp;.X}}&#34;hello&#34;{{end}}`</span><span class="op" id="8240857">}</span><span class="op" id="8240858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8240861">{</span><span class="string" id="8240862">&#34;chained&nbsp;field&nbsp;range&#34;</span><span class="op" id="8240883">,</span>&nbsp;<span class="string" id="8240885">&#34;{{range&nbsp;.X.Y.Z}}hello{{end}}&#34;</span><span class="op" id="8240915">,</span>&nbsp;<span class="ident" id="8240917">noError</span><span class="op" id="8240924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8240928">`{{range&nbsp;.X.Y.Z}}&#34;hello&#34;{{end}}`</span><span class="op" id="8240960">}</span><span class="op" id="8240961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8240964">{</span><span class="string" id="8240965">&#34;nested&nbsp;range&#34;</span><span class="op" id="8240979">,</span>&nbsp;<span class="string" id="8240981">&#34;{{range&nbsp;.X}}hello{{range&nbsp;.Y}}goodbye{{end}}{{end}}&#34;</span><span class="op" id="8241033">,</span>&nbsp;<span class="ident" id="8241035">noError</span><span class="op" id="8241042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8241046">`{{range&nbsp;.X}}&#34;hello&#34;{{range&nbsp;.Y}}&#34;goodbye&#34;{{end}}{{end}}`</span><span class="op" id="8241102">}</span><span class="op" id="8241103">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8241106">{</span><span class="string" id="8241107">&#34;range&nbsp;with&nbsp;else&#34;</span><span class="op" id="8241124">,</span>&nbsp;<span class="string" id="8241126">&#34;{{range&nbsp;.X}}true{{else}}false{{end}}&#34;</span><span class="op" id="8241164">,</span>&nbsp;<span class="ident" id="8241166">noError</span><span class="op" id="8241173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8241177">`{{range&nbsp;.X}}&#34;true&#34;{{else}}&#34;false&#34;{{end}}`</span><span class="op" id="8241219">}</span><span class="op" id="8241220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8241223">{</span><span class="string" id="8241224">&#34;range&nbsp;over&nbsp;pipeline&#34;</span><span class="op" id="8241245">,</span>&nbsp;<span class="string" id="8241247">&#34;{{range&nbsp;.X|.M}}true{{else}}false{{end}}&#34;</span><span class="op" id="8241288">,</span>&nbsp;<span class="ident" id="8241290">noError</span><span class="op" id="8241297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8241301">`{{range&nbsp;.X&nbsp;|&nbsp;.M}}&#34;true&#34;{{else}}&#34;false&#34;{{end}}`</span><span class="op" id="8241348">}</span><span class="op" id="8241349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8241352">{</span><span class="string" id="8241353">&#34;range&nbsp;[]int&#34;</span><span class="op" id="8241366">,</span>&nbsp;<span class="string" id="8241368">&#34;{{range&nbsp;.SI}}{{.}}{{end}}&#34;</span><span class="op" id="8241395">,</span>&nbsp;<span class="ident" id="8241397">noError</span><span class="op" id="8241404">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8241408">`{{range&nbsp;.SI}}{{.}}{{end}}`</span><span class="op" id="8241435">}</span><span class="op" id="8241436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8241439">{</span><span class="string" id="8241440">&#34;range&nbsp;1&nbsp;var&#34;</span><span class="op" id="8241453">,</span>&nbsp;<span class="string" id="8241455">&#34;{{range&nbsp;$x&nbsp;:=&nbsp;.SI}}{{.}}{{end}}&#34;</span><span class="op" id="8241488">,</span>&nbsp;<span class="ident" id="8241490">noError</span><span class="op" id="8241497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8241501">`{{range&nbsp;$x&nbsp;:=&nbsp;.SI}}{{.}}{{end}}`</span><span class="op" id="8241534">}</span><span class="op" id="8241535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8241538">{</span><span class="string" id="8241539">&#34;range&nbsp;2&nbsp;vars&#34;</span><span class="op" id="8241553">,</span>&nbsp;<span class="string" id="8241555">&#34;{{range&nbsp;$x,&nbsp;$y&nbsp;:=&nbsp;.SI}}{{.}}{{end}}&#34;</span><span class="op" id="8241592">,</span>&nbsp;<span class="ident" id="8241594">noError</span><span class="op" id="8241601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8241605">`{{range&nbsp;$x,&nbsp;$y&nbsp;:=&nbsp;.SI}}{{.}}{{end}}`</span><span class="op" id="8241642">}</span><span class="op" id="8241643">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8241646">{</span><span class="string" id="8241647">&#34;constants&#34;</span><span class="op" id="8241658">,</span>&nbsp;<span class="string" id="8241660">&#34;{{range&nbsp;.SI&nbsp;1&nbsp;-3.2i&nbsp;true&nbsp;false&nbsp;&#39;a&#39;&nbsp;nil}}{{end}}&#34;</span><span class="op" id="8241709">,</span>&nbsp;<span class="ident" id="8241711">noError</span><span class="op" id="8241718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8241722">`{{range&nbsp;.SI&nbsp;1&nbsp;-3.2i&nbsp;true&nbsp;false&nbsp;&#39;a&#39;&nbsp;nil}}{{end}}`</span><span class="op" id="8241771">}</span><span class="op" id="8241772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8241775">{</span><span class="string" id="8241776">&#34;template&#34;</span><span class="op" id="8241786">,</span>&nbsp;<span class="string" id="8241788">&#34;{{template&nbsp;`x`}}&#34;</span><span class="op" id="8241806">,</span>&nbsp;<span class="ident" id="8241808">noError</span><span class="op" id="8241815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8241819">`{{template&nbsp;&#34;x&#34;}}`</span><span class="op" id="8241837">}</span><span class="op" id="8241838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8241841">{</span><span class="string" id="8241842">&#34;template&nbsp;with&nbsp;arg&#34;</span><span class="op" id="8241861">,</span>&nbsp;<span class="string" id="8241863">&#34;{{template&nbsp;`x`&nbsp;.Y}}&#34;</span><span class="op" id="8241884">,</span>&nbsp;<span class="ident" id="8241886">noError</span><span class="op" id="8241893">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8241897">`{{template&nbsp;&#34;x&#34;&nbsp;.Y}}`</span><span class="op" id="8241918">}</span><span class="op" id="8241919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8241922">{</span><span class="string" id="8241923">&#34;with&#34;</span><span class="op" id="8241929">,</span>&nbsp;<span class="string" id="8241931">&#34;{{with&nbsp;.X}}hello{{end}}&#34;</span><span class="op" id="8241956">,</span>&nbsp;<span class="ident" id="8241958">noError</span><span class="op" id="8241965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8241969">`{{with&nbsp;.X}}&#34;hello&#34;{{end}}`</span><span class="op" id="8241996">}</span><span class="op" id="8241997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242000">{</span><span class="string" id="8242001">&#34;with&nbsp;with&nbsp;else&#34;</span><span class="op" id="8242017">,</span>&nbsp;<span class="string" id="8242019">&#34;{{with&nbsp;.X}}hello{{else}}goodbye{{end}}&#34;</span><span class="op" id="8242059">,</span>&nbsp;<span class="ident" id="8242061">noError</span><span class="op" id="8242068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8242072">`{{with&nbsp;.X}}&#34;hello&#34;{{else}}&#34;goodbye&#34;{{end}}`</span><span class="op" id="8242116">}</span><span class="op" id="8242117">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8242120">//&nbsp;Errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242132">{</span><span class="string" id="8242133">&#34;unclosed&nbsp;action&#34;</span><span class="op" id="8242150">,</span>&nbsp;<span class="string" id="8242152">&#34;hello{{range&#34;</span><span class="op" id="8242166">,</span>&nbsp;<span class="ident" id="8242168">hasError</span><span class="op" id="8242176">,</span>&nbsp;<span class="string" id="8242178">&#34;&#34;</span><span class="op" id="8242180">}</span><span class="op" id="8242181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242184">{</span><span class="string" id="8242185">&#34;unmatched&nbsp;end&#34;</span><span class="op" id="8242200">,</span>&nbsp;<span class="string" id="8242202">&#34;{{end}}&#34;</span><span class="op" id="8242211">,</span>&nbsp;<span class="ident" id="8242213">hasError</span><span class="op" id="8242221">,</span>&nbsp;<span class="string" id="8242223">&#34;&#34;</span><span class="op" id="8242225">}</span><span class="op" id="8242226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242229">{</span><span class="string" id="8242230">&#34;missing&nbsp;end&#34;</span><span class="op" id="8242243">,</span>&nbsp;<span class="string" id="8242245">&#34;hello{{range&nbsp;.x}}&#34;</span><span class="op" id="8242264">,</span>&nbsp;<span class="ident" id="8242266">hasError</span><span class="op" id="8242274">,</span>&nbsp;<span class="string" id="8242276">&#34;&#34;</span><span class="op" id="8242278">}</span><span class="op" id="8242279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242282">{</span><span class="string" id="8242283">&#34;missing&nbsp;end&nbsp;after&nbsp;else&#34;</span><span class="op" id="8242307">,</span>&nbsp;<span class="string" id="8242309">&#34;hello{{range&nbsp;.x}}{{else}}&#34;</span><span class="op" id="8242336">,</span>&nbsp;<span class="ident" id="8242338">hasError</span><span class="op" id="8242346">,</span>&nbsp;<span class="string" id="8242348">&#34;&#34;</span><span class="op" id="8242350">}</span><span class="op" id="8242351">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242354">{</span><span class="string" id="8242355">&#34;undefined&nbsp;function&#34;</span><span class="op" id="8242375">,</span>&nbsp;<span class="string" id="8242377">&#34;hello{{undefined}}&#34;</span><span class="op" id="8242397">,</span>&nbsp;<span class="ident" id="8242399">hasError</span><span class="op" id="8242407">,</span>&nbsp;<span class="string" id="8242409">&#34;&#34;</span><span class="op" id="8242411">}</span><span class="op" id="8242412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242415">{</span><span class="string" id="8242416">&#34;undefined&nbsp;variable&#34;</span><span class="op" id="8242436">,</span>&nbsp;<span class="string" id="8242438">&#34;{{$x}}&#34;</span><span class="op" id="8242446">,</span>&nbsp;<span class="ident" id="8242448">hasError</span><span class="op" id="8242456">,</span>&nbsp;<span class="string" id="8242458">&#34;&#34;</span><span class="op" id="8242460">}</span><span class="op" id="8242461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242464">{</span><span class="string" id="8242465">&#34;variable&nbsp;undefined&nbsp;after&nbsp;end&#34;</span><span class="op" id="8242495">,</span>&nbsp;<span class="string" id="8242497">&#34;{{with&nbsp;$x&nbsp;:=&nbsp;4}}{{end}}{{$x}}&#34;</span><span class="op" id="8242528">,</span>&nbsp;<span class="ident" id="8242530">hasError</span><span class="op" id="8242538">,</span>&nbsp;<span class="string" id="8242540">&#34;&#34;</span><span class="op" id="8242542">}</span><span class="op" id="8242543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242546">{</span><span class="string" id="8242547">&#34;variable&nbsp;undefined&nbsp;in&nbsp;template&#34;</span><span class="op" id="8242579">,</span>&nbsp;<span class="string" id="8242581">&#34;{{template&nbsp;$v}}&#34;</span><span class="op" id="8242598">,</span>&nbsp;<span class="ident" id="8242600">hasError</span><span class="op" id="8242608">,</span>&nbsp;<span class="string" id="8242610">&#34;&#34;</span><span class="op" id="8242612">}</span><span class="op" id="8242613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242616">{</span><span class="string" id="8242617">&#34;declare&nbsp;with&nbsp;field&#34;</span><span class="op" id="8242637">,</span>&nbsp;<span class="string" id="8242639">&#34;{{with&nbsp;$x.Y&nbsp;:=&nbsp;4}}{{end}}&#34;</span><span class="op" id="8242666">,</span>&nbsp;<span class="ident" id="8242668">hasError</span><span class="op" id="8242676">,</span>&nbsp;<span class="string" id="8242678">&#34;&#34;</span><span class="op" id="8242680">}</span><span class="op" id="8242681">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242684">{</span><span class="string" id="8242685">&#34;template&nbsp;with&nbsp;field&nbsp;ref&#34;</span><span class="op" id="8242710">,</span>&nbsp;<span class="string" id="8242712">&#34;{{template&nbsp;.X}}&#34;</span><span class="op" id="8242729">,</span>&nbsp;<span class="ident" id="8242731">hasError</span><span class="op" id="8242739">,</span>&nbsp;<span class="string" id="8242741">&#34;&#34;</span><span class="op" id="8242743">}</span><span class="op" id="8242744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242747">{</span><span class="string" id="8242748">&#34;template&nbsp;with&nbsp;var&#34;</span><span class="op" id="8242767">,</span>&nbsp;<span class="string" id="8242769">&#34;{{template&nbsp;$v}}&#34;</span><span class="op" id="8242786">,</span>&nbsp;<span class="ident" id="8242788">hasError</span><span class="op" id="8242796">,</span>&nbsp;<span class="string" id="8242798">&#34;&#34;</span><span class="op" id="8242800">}</span><span class="op" id="8242801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242804">{</span><span class="string" id="8242805">&#34;invalid&nbsp;punctuation&#34;</span><span class="op" id="8242826">,</span>&nbsp;<span class="string" id="8242828">&#34;{{printf&nbsp;3,&nbsp;4}}&#34;</span><span class="op" id="8242845">,</span>&nbsp;<span class="ident" id="8242847">hasError</span><span class="op" id="8242855">,</span>&nbsp;<span class="string" id="8242857">&#34;&#34;</span><span class="op" id="8242859">}</span><span class="op" id="8242860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242863">{</span><span class="string" id="8242864">&#34;multidecl&nbsp;outside&nbsp;range&#34;</span><span class="op" id="8242889">,</span>&nbsp;<span class="string" id="8242891">&#34;{{with&nbsp;$v,&nbsp;$u&nbsp;:=&nbsp;3}}{{end}}&#34;</span><span class="op" id="8242920">,</span>&nbsp;<span class="ident" id="8242922">hasError</span><span class="op" id="8242930">,</span>&nbsp;<span class="string" id="8242932">&#34;&#34;</span><span class="op" id="8242934">}</span><span class="op" id="8242935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8242938">{</span><span class="string" id="8242939">&#34;too&nbsp;many&nbsp;decls&nbsp;in&nbsp;range&#34;</span><span class="op" id="8242964">,</span>&nbsp;<span class="string" id="8242966">&#34;{{range&nbsp;$u,&nbsp;$v,&nbsp;$w&nbsp;:=&nbsp;3}}{{end}}&#34;</span><span class="op" id="8243000">,</span>&nbsp;<span class="ident" id="8243002">hasError</span><span class="op" id="8243010">,</span>&nbsp;<span class="string" id="8243012">&#34;&#34;</span><span class="op" id="8243014">}</span><span class="op" id="8243015">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243018">{</span><span class="string" id="8243019">&#34;dot&nbsp;applied&nbsp;to&nbsp;parentheses&#34;</span><span class="op" id="8243047">,</span>&nbsp;<span class="string" id="8243049">&#34;{{printf&nbsp;(printf&nbsp;.).}}&#34;</span><span class="op" id="8243073">,</span>&nbsp;<span class="ident" id="8243075">hasError</span><span class="op" id="8243083">,</span>&nbsp;<span class="string" id="8243085">&#34;&#34;</span><span class="op" id="8243087">}</span><span class="op" id="8243088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243091">{</span><span class="string" id="8243092">&#34;adjacent&nbsp;args&#34;</span><span class="op" id="8243107">,</span>&nbsp;<span class="string" id="8243109">&#34;{{printf&nbsp;3`x`}}&#34;</span><span class="op" id="8243126">,</span>&nbsp;<span class="ident" id="8243128">hasError</span><span class="op" id="8243136">,</span>&nbsp;<span class="string" id="8243138">&#34;&#34;</span><span class="op" id="8243140">}</span><span class="op" id="8243141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243144">{</span><span class="string" id="8243145">&#34;adjacent&nbsp;args&nbsp;with&nbsp;.&#34;</span><span class="op" id="8243167">,</span>&nbsp;<span class="string" id="8243169">&#34;{{printf&nbsp;`x`.}}&#34;</span><span class="op" id="8243186">,</span>&nbsp;<span class="ident" id="8243188">hasError</span><span class="op" id="8243196">,</span>&nbsp;<span class="string" id="8243198">&#34;&#34;</span><span class="op" id="8243200">}</span><span class="op" id="8243201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243204">{</span><span class="string" id="8243205">&#34;extra&nbsp;end&nbsp;after&nbsp;if&#34;</span><span class="op" id="8243225">,</span>&nbsp;<span class="string" id="8243227">&#34;{{if&nbsp;.X}}a{{else&nbsp;if&nbsp;.Y}}b{{end}}{{end}}&#34;</span><span class="op" id="8243268">,</span>&nbsp;<span class="ident" id="8243270">hasError</span><span class="op" id="8243278">,</span>&nbsp;<span class="string" id="8243280">&#34;&#34;</span><span class="op" id="8243282">}</span><span class="op" id="8243283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8243286">//&nbsp;Equals&nbsp;(and&nbsp;other&nbsp;chars)&nbsp;do&nbsp;not&nbsp;assignments&nbsp;make&nbsp;(yet).</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243346">{</span><span class="string" id="8243347">&#34;bug0a&#34;</span><span class="op" id="8243354">,</span>&nbsp;<span class="string" id="8243356">&#34;{{$x&nbsp;:=&nbsp;0}}{{$x}}&#34;</span><span class="op" id="8243375">,</span>&nbsp;<span class="ident" id="8243377">noError</span><span class="op" id="8243384">,</span>&nbsp;<span class="string" id="8243386">&#34;{{$x&nbsp;:=&nbsp;0}}{{$x}}&#34;</span><span class="op" id="8243405">}</span><span class="op" id="8243406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243409">{</span><span class="string" id="8243410">&#34;bug0b&#34;</span><span class="op" id="8243417">,</span>&nbsp;<span class="string" id="8243419">&#34;{{$x&nbsp;=&nbsp;1}}{{$x}}&#34;</span><span class="op" id="8243437">,</span>&nbsp;<span class="ident" id="8243439">hasError</span><span class="op" id="8243447">,</span>&nbsp;<span class="string" id="8243449">&#34;&#34;</span><span class="op" id="8243451">}</span><span class="op" id="8243452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243455">{</span><span class="string" id="8243456">&#34;bug0c&#34;</span><span class="op" id="8243463">,</span>&nbsp;<span class="string" id="8243465">&#34;{{$x&nbsp;!&nbsp;2}}{{$x}}&#34;</span><span class="op" id="8243483">,</span>&nbsp;<span class="ident" id="8243485">hasError</span><span class="op" id="8243493">,</span>&nbsp;<span class="string" id="8243495">&#34;&#34;</span><span class="op" id="8243497">}</span><span class="op" id="8243498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243501">{</span><span class="string" id="8243502">&#34;bug0d&#34;</span><span class="op" id="8243509">,</span>&nbsp;<span class="string" id="8243511">&#34;{{$x&nbsp;%&nbsp;3}}{{$x}}&#34;</span><span class="op" id="8243529">,</span>&nbsp;<span class="ident" id="8243531">hasError</span><span class="op" id="8243539">,</span>&nbsp;<span class="string" id="8243541">&#34;&#34;</span><span class="op" id="8243543">}</span><span class="op" id="8243544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8243547">//&nbsp;Check&nbsp;the&nbsp;parse&nbsp;fails&nbsp;for&nbsp;:=&nbsp;rather&nbsp;than&nbsp;comma.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243599">{</span><span class="string" id="8243600">&#34;bug0e&#34;</span><span class="op" id="8243607">,</span>&nbsp;<span class="string" id="8243609">&#34;{{range&nbsp;$x&nbsp;:=&nbsp;$y&nbsp;:=&nbsp;3}}{{end}}&#34;</span><span class="op" id="8243641">,</span>&nbsp;<span class="ident" id="8243643">hasError</span><span class="op" id="8243651">,</span>&nbsp;<span class="string" id="8243653">&#34;&#34;</span><span class="op" id="8243655">}</span><span class="op" id="8243656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8243659">//&nbsp;Another&nbsp;bug:&nbsp;variable&nbsp;read&nbsp;must&nbsp;ignore&nbsp;following&nbsp;punctuation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243725">{</span><span class="string" id="8243726">&#34;bug1a&#34;</span><span class="op" id="8243733">,</span>&nbsp;<span class="string" id="8243735">&#34;{{$x:=.}}{{$x!2}}&#34;</span><span class="op" id="8243754">,</span>&nbsp;<span class="ident" id="8243756">hasError</span><span class="op" id="8243764">,</span>&nbsp;<span class="string" id="8243766">&#34;&#34;</span><span class="op" id="8243768">}</span><span class="op" id="8243769">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8243791">//&nbsp;!&nbsp;is&nbsp;just&nbsp;illegal&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243819">{</span><span class="string" id="8243820">&#34;bug1b&#34;</span><span class="op" id="8243827">,</span>&nbsp;<span class="string" id="8243829">&#34;{{$x:=.}}{{$x+2}}&#34;</span><span class="op" id="8243848">,</span>&nbsp;<span class="ident" id="8243850">hasError</span><span class="op" id="8243858">,</span>&nbsp;<span class="string" id="8243860">&#34;&#34;</span><span class="op" id="8243862">}</span><span class="op" id="8243863">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8243885">//&nbsp;$x+2&nbsp;should&nbsp;not&nbsp;parse&nbsp;as&nbsp;($x)&nbsp;(+2).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243925">{</span><span class="string" id="8243926">&#34;bug1c&#34;</span><span class="op" id="8243933">,</span>&nbsp;<span class="string" id="8243935">&#34;{{$x:=.}}{{$x&nbsp;+2}}&#34;</span><span class="op" id="8243955">,</span>&nbsp;<span class="ident" id="8243957">noError</span><span class="op" id="8243964">,</span>&nbsp;<span class="string" id="8243966">&#34;{{$x&nbsp;:=&nbsp;.}}{{$x&nbsp;+2}}&#34;</span><span class="op" id="8243988">}</span><span class="op" id="8243989">,</span>&nbsp;<span class="comment" id="8243991">//&nbsp;It&#39;s&nbsp;OK&nbsp;with&nbsp;a&nbsp;space.</span><br>
<span class="lineno">260</span><span class="op" id="8244016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8244019">var</span>&nbsp;<span class="ident" id="8244023">builtins</span>&nbsp;<span class="op" id="8244032">=</span>&nbsp;<span class="keyword" id="8244034">map</span><span class="op" id="8244037">[</span><span class="builtintype" id="8244038">string</span><span class="op" id="8244044">]</span><span class="keyword" id="8244045">interface</span><span class="op" id="8244054">{</span><span class="op" id="8244055">}</span><span class="op" id="8244056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8244059">&#34;printf&#34;</span><span class="op" id="8244067">:</span>&nbsp;<span class="ident" id="8244069">fmt</span><span class="op" id="8244072">.</span><span class="ident" id="8244073">Sprintf</span><span class="op" id="8244080">,</span><br>
<span class="lineno"></span><span class="op" id="8244082">}</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span><span class="keyword" id="8244085">func</span>&nbsp;<span class="ident" id="8244090">testParse</span><span class="op" id="8244099">(</span><span class="ident" id="8244100">doCopy</span>&nbsp;<span class="builtintype" id="8244107">bool</span><span class="op" id="8244111">,</span>&nbsp;<span class="ident" id="8244113">t</span>&nbsp;<span class="op" id="8244115">*</span><span class="ident" id="8244116">testing</span><span class="op" id="8244123">.</span><span class="ident" id="8244124">T</span><span class="op" id="8244125">)</span>&nbsp;<span class="op" id="8244127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244130">textFormat</span>&nbsp;<span class="op" id="8244141">=</span>&nbsp;<span class="string" id="8244143">&#34;%q&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244149">defer</span>&nbsp;<span class="keyword" id="8244155">func</span><span class="op" id="8244159">(</span><span class="op" id="8244160">)</span>&nbsp;<span class="op" id="8244162">{</span>&nbsp;<span class="ident" id="8244164">textFormat</span>&nbsp;<span class="op" id="8244175">=</span>&nbsp;<span class="string" id="8244177">&#34;%s&#34;</span>&nbsp;<span class="op" id="8244182">}</span><span class="op" id="8244183">(</span><span class="op" id="8244184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244187">for</span>&nbsp;<span class="ident" id="8244191">_</span><span class="op" id="8244192">,</span>&nbsp;<span class="ident" id="8244194">test</span>&nbsp;<span class="op" id="8244199">:=</span>&nbsp;<span class="keyword" id="8244202">range</span>&nbsp;<span class="ident" id="8244208">parseTests</span>&nbsp;<span class="op" id="8244219">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244223">tmpl</span><span class="op" id="8244227">,</span>&nbsp;<span class="ident" id="8244229">err</span>&nbsp;<span class="op" id="8244233">:=</span>&nbsp;<span class="ident" id="8244236">New</span><span class="op" id="8244239">(</span><span class="ident" id="8244240">test</span><span class="op" id="8244244">.</span><span class="ident" id="8244245">name</span><span class="op" id="8244249">)</span><span class="op" id="8244250">.</span><span class="ident" id="8244251">Parse</span><span class="op" id="8244256">(</span><span class="ident" id="8244257">test</span><span class="op" id="8244261">.</span><span class="ident" id="8244262">input</span><span class="op" id="8244267">,</span>&nbsp;<span class="string" id="8244269">&#34;&#34;</span><span class="op" id="8244271">,</span>&nbsp;<span class="string" id="8244273">&#34;&#34;</span><span class="op" id="8244275">,</span>&nbsp;<span class="builtinfunc" id="8244277">make</span><span class="op" id="8244281">(</span><span class="keyword" id="8244282">map</span><span class="op" id="8244285">[</span><span class="builtintype" id="8244286">string</span><span class="op" id="8244292">]</span><span class="op" id="8244293">*</span><span class="ident" id="8244294">Tree</span><span class="op" id="8244298">)</span><span class="op" id="8244299">,</span>&nbsp;<span class="ident" id="8244301">builtins</span><span class="op" id="8244309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244313">switch</span>&nbsp;<span class="op" id="8244320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244324">case</span>&nbsp;<span class="ident" id="8244329">err</span>&nbsp;<span class="op" id="8244333">==</span>&nbsp;<span class="ident" id="8244336">nil</span>&nbsp;<span class="op" id="8244340">&amp;&amp;</span>&nbsp;<span class="op" id="8244343">!</span><span class="ident" id="8244344">test</span><span class="op" id="8244348">.</span><span class="ident" id="8244349">ok</span><span class="op" id="8244351">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244356">t</span><span class="op" id="8244357">.</span><span class="ident" id="8244358">Errorf</span><span class="op" id="8244364">(</span><span class="string" id="8244365">&#34;%q:&nbsp;expected&nbsp;error;&nbsp;got&nbsp;none&#34;</span><span class="op" id="8244395">,</span>&nbsp;<span class="ident" id="8244397">test</span><span class="op" id="8244401">.</span><span class="ident" id="8244402">name</span><span class="op" id="8244406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244411">continue</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244422">case</span>&nbsp;<span class="ident" id="8244427">err</span>&nbsp;<span class="op" id="8244431">!=</span>&nbsp;<span class="ident" id="8244434">nil</span>&nbsp;<span class="op" id="8244438">&amp;&amp;</span>&nbsp;<span class="ident" id="8244441">test</span><span class="op" id="8244445">.</span><span class="ident" id="8244446">ok</span><span class="op" id="8244448">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244453">t</span><span class="op" id="8244454">.</span><span class="ident" id="8244455">Errorf</span><span class="op" id="8244461">(</span><span class="string" id="8244462">&#34;%q:&nbsp;unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8244488">,</span>&nbsp;<span class="ident" id="8244490">test</span><span class="op" id="8244494">.</span><span class="ident" id="8244495">name</span><span class="op" id="8244499">,</span>&nbsp;<span class="ident" id="8244501">err</span><span class="op" id="8244504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244509">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244520">case</span>&nbsp;<span class="ident" id="8244525">err</span>&nbsp;<span class="op" id="8244529">!=</span>&nbsp;<span class="ident" id="8244532">nil</span>&nbsp;<span class="op" id="8244536">&amp;&amp;</span>&nbsp;<span class="op" id="8244539">!</span><span class="ident" id="8244540">test</span><span class="op" id="8244544">.</span><span class="ident" id="8244545">ok</span><span class="op" id="8244547">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8244552">//&nbsp;expected&nbsp;error,&nbsp;got&nbsp;one</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244582">if</span>&nbsp;<span class="op" id="8244585">*</span><span class="ident" id="8244586">debug</span>&nbsp;<span class="op" id="8244592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244598">fmt</span><span class="op" id="8244601">.</span><span class="ident" id="8244602">Printf</span><span class="op" id="8244608">(</span><span class="string" id="8244609">&#34;%s:&nbsp;%s\n\t%s\n&#34;</span><span class="op" id="8244625">,</span>&nbsp;<span class="ident" id="8244627">test</span><span class="op" id="8244631">.</span><span class="ident" id="8244632">name</span><span class="op" id="8244636">,</span>&nbsp;<span class="ident" id="8244638">test</span><span class="op" id="8244642">.</span><span class="ident" id="8244643">input</span><span class="op" id="8244648">,</span>&nbsp;<span class="ident" id="8244650">err</span><span class="op" id="8244653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244663">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244674">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244678">var</span>&nbsp;<span class="ident" id="8244682">result</span>&nbsp;<span class="builtintype" id="8244689">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244698">if</span>&nbsp;<span class="ident" id="8244701">doCopy</span>&nbsp;<span class="op" id="8244708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244713">result</span>&nbsp;<span class="op" id="8244720">=</span>&nbsp;<span class="ident" id="8244722">tmpl</span><span class="op" id="8244726">.</span><span class="ident" id="8244727">Root</span><span class="op" id="8244731">.</span><span class="ident" id="8244732">Copy</span><span class="op" id="8244736">(</span><span class="op" id="8244737">)</span><span class="op" id="8244738">.</span><span class="ident" id="8244739">String</span><span class="op" id="8244745">(</span><span class="op" id="8244746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244750">}</span>&nbsp;<span class="keyword" id="8244752">else</span>&nbsp;<span class="op" id="8244757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244762">result</span>&nbsp;<span class="op" id="8244769">=</span>&nbsp;<span class="ident" id="8244771">tmpl</span><span class="op" id="8244775">.</span><span class="ident" id="8244776">Root</span><span class="op" id="8244780">.</span><span class="ident" id="8244781">String</span><span class="op" id="8244787">(</span><span class="op" id="8244788">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8244796">if</span>&nbsp;<span class="ident" id="8244799">result</span>&nbsp;<span class="op" id="8244806">!=</span>&nbsp;<span class="ident" id="8244809">test</span><span class="op" id="8244813">.</span><span class="ident" id="8244814">result</span>&nbsp;<span class="op" id="8244821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244826">t</span><span class="op" id="8244827">.</span><span class="ident" id="8244828">Errorf</span><span class="op" id="8244834">(</span><span class="string" id="8244835">&#34;%s=(%q):&nbsp;got\n\t%v\nexpected\n\t%v&#34;</span><span class="op" id="8244871">,</span>&nbsp;<span class="ident" id="8244873">test</span><span class="op" id="8244877">.</span><span class="ident" id="8244878">name</span><span class="op" id="8244882">,</span>&nbsp;<span class="ident" id="8244884">test</span><span class="op" id="8244888">.</span><span class="ident" id="8244889">input</span><span class="op" id="8244894">,</span>&nbsp;<span class="ident" id="8244896">result</span><span class="op" id="8244902">,</span>&nbsp;<span class="ident" id="8244904">test</span><span class="op" id="8244908">.</span><span class="ident" id="8244909">result</span><span class="op" id="8244915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8244922">}</span><br>
<span class="lineno">295</span><span class="op" id="8244924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8244927">func</span>&nbsp;<span class="ident" id="8244932">TestParse</span><span class="op" id="8244941">(</span><span class="ident" id="8244942">t</span>&nbsp;<span class="op" id="8244944">*</span><span class="ident" id="8244945">testing</span><span class="op" id="8244952">.</span><span class="ident" id="8244953">T</span><span class="op" id="8244954">)</span>&nbsp;<span class="op" id="8244956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8244959">testParse</span><span class="op" id="8244968">(</span><span class="builtintype" id="8244969">false</span><span class="op" id="8244974">,</span>&nbsp;<span class="ident" id="8244976">t</span><span class="op" id="8244977">)</span><br>
<span class="lineno"></span><span class="op" id="8244979">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="8244982">//&nbsp;Same&nbsp;as&nbsp;TestParse,&nbsp;but&nbsp;we&nbsp;copy&nbsp;the&nbsp;node&nbsp;first</span><br>
<span class="lineno"></span><span class="keyword" id="8245031">func</span>&nbsp;<span class="ident" id="8245036">TestParseCopy</span><span class="op" id="8245049">(</span><span class="ident" id="8245050">t</span>&nbsp;<span class="op" id="8245052">*</span><span class="ident" id="8245053">testing</span><span class="op" id="8245060">.</span><span class="ident" id="8245061">T</span><span class="op" id="8245062">)</span>&nbsp;<span class="op" id="8245064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8245067">testParse</span><span class="op" id="8245076">(</span><span class="builtintype" id="8245077">true</span><span class="op" id="8245081">,</span>&nbsp;<span class="ident" id="8245083">t</span><span class="op" id="8245084">)</span><br>
<span class="lineno"></span><span class="op" id="8245086">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span><span class="keyword" id="8245089">type</span>&nbsp;<span class="ident" id="8245094">isEmptyTest</span>&nbsp;<span class="keyword" id="8245106">struct</span>&nbsp;<span class="op" id="8245113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8245116">name</span>&nbsp;&nbsp;<span class="builtintype" id="8245122">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8245130">input</span>&nbsp;<span class="builtintype" id="8245136">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8245144">empty</span>&nbsp;<span class="builtintype" id="8245150">bool</span><br>
<span class="lineno">310</span><span class="op" id="8245155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8245158">var</span>&nbsp;<span class="ident" id="8245162">isEmptyTests</span>&nbsp;<span class="op" id="8245175">=</span>&nbsp;<span class="op" id="8245177">[</span><span class="op" id="8245178">]</span><span class="ident" id="8245179">isEmptyTest</span><span class="op" id="8245190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245193">{</span><span class="string" id="8245194">&#34;empty&#34;</span><span class="op" id="8245201">,</span>&nbsp;<span class="string" id="8245203">``</span><span class="op" id="8245205">,</span>&nbsp;<span class="builtintype" id="8245207">true</span><span class="op" id="8245211">}</span><span class="op" id="8245212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245215">{</span><span class="string" id="8245216">&#34;nonempty&#34;</span><span class="op" id="8245226">,</span>&nbsp;<span class="string" id="8245228">`hello`</span><span class="op" id="8245235">,</span>&nbsp;<span class="builtintype" id="8245237">false</span><span class="op" id="8245242">}</span><span class="op" id="8245243">,</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245246">{</span><span class="string" id="8245247">&#34;spaces&nbsp;only&#34;</span><span class="op" id="8245260">,</span>&nbsp;<span class="string" id="8245262">&#34;&nbsp;\t\n&nbsp;\t\n&#34;</span><span class="op" id="8245274">,</span>&nbsp;<span class="builtintype" id="8245276">true</span><span class="op" id="8245280">}</span><span class="op" id="8245281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245284">{</span><span class="string" id="8245285">&#34;definition&#34;</span><span class="op" id="8245297">,</span>&nbsp;<span class="string" id="8245299">`{{define&nbsp;&#34;x&#34;}}something{{end}}`</span><span class="op" id="8245331">,</span>&nbsp;<span class="builtintype" id="8245333">true</span><span class="op" id="8245337">}</span><span class="op" id="8245338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245341">{</span><span class="string" id="8245342">&#34;definitions&nbsp;and&nbsp;space&#34;</span><span class="op" id="8245365">,</span>&nbsp;<span class="string" id="8245367">&#34;{{define&nbsp;`x`}}something{{end}}\n\n{{define&nbsp;`y`}}something{{end}}\n\n&#34;</span><span class="op" id="8245437">,</span>&nbsp;<span class="builtintype" id="8245439">true</span><span class="op" id="8245443">}</span><span class="op" id="8245444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245447">{</span><span class="string" id="8245448">&#34;definitions&nbsp;and&nbsp;text&#34;</span><span class="op" id="8245470">,</span>&nbsp;<span class="string" id="8245472">&#34;{{define&nbsp;`x`}}something{{end}}\nx\n{{define&nbsp;`y`}}something{{end}}\ny\n&#34;</span><span class="op" id="8245544">,</span>&nbsp;<span class="builtintype" id="8245546">false</span><span class="op" id="8245551">}</span><span class="op" id="8245552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245555">{</span><span class="string" id="8245556">&#34;definition&nbsp;and&nbsp;action&#34;</span><span class="op" id="8245579">,</span>&nbsp;<span class="string" id="8245581">&#34;{{define&nbsp;`x`}}something{{end}}{{if&nbsp;3}}foo{{end}}&#34;</span><span class="op" id="8245631">,</span>&nbsp;<span class="builtintype" id="8245633">false</span><span class="op" id="8245638">}</span><span class="op" id="8245639">,</span><br>
<span class="lineno">320</span><span class="op" id="8245641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8245644">func</span>&nbsp;<span class="ident" id="8245649">TestIsEmpty</span><span class="op" id="8245660">(</span><span class="ident" id="8245661">t</span>&nbsp;<span class="op" id="8245663">*</span><span class="ident" id="8245664">testing</span><span class="op" id="8245671">.</span><span class="ident" id="8245672">T</span><span class="op" id="8245673">)</span>&nbsp;<span class="op" id="8245675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8245678">if</span>&nbsp;<span class="op" id="8245681">!</span><span class="ident" id="8245682">IsEmptyTree</span><span class="op" id="8245693">(</span><span class="ident" id="8245694">nil</span><span class="op" id="8245697">)</span>&nbsp;<span class="op" id="8245699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8245703">t</span><span class="op" id="8245704">.</span><span class="ident" id="8245705">Errorf</span><span class="op" id="8245711">(</span><span class="string" id="8245712">&#34;nil&nbsp;tree&nbsp;is&nbsp;not&nbsp;empty&#34;</span><span class="op" id="8245735">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8245741">for</span>&nbsp;<span class="ident" id="8245745">_</span><span class="op" id="8245746">,</span>&nbsp;<span class="ident" id="8245748">test</span>&nbsp;<span class="op" id="8245753">:=</span>&nbsp;<span class="keyword" id="8245756">range</span>&nbsp;<span class="ident" id="8245762">isEmptyTests</span>&nbsp;<span class="op" id="8245775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8245779">tree</span><span class="op" id="8245783">,</span>&nbsp;<span class="ident" id="8245785">err</span>&nbsp;<span class="op" id="8245789">:=</span>&nbsp;<span class="ident" id="8245792">New</span><span class="op" id="8245795">(</span><span class="string" id="8245796">&#34;root&#34;</span><span class="op" id="8245802">)</span><span class="op" id="8245803">.</span><span class="ident" id="8245804">Parse</span><span class="op" id="8245809">(</span><span class="ident" id="8245810">test</span><span class="op" id="8245814">.</span><span class="ident" id="8245815">input</span><span class="op" id="8245820">,</span>&nbsp;<span class="string" id="8245822">&#34;&#34;</span><span class="op" id="8245824">,</span>&nbsp;<span class="string" id="8245826">&#34;&#34;</span><span class="op" id="8245828">,</span>&nbsp;<span class="builtinfunc" id="8245830">make</span><span class="op" id="8245834">(</span><span class="keyword" id="8245835">map</span><span class="op" id="8245838">[</span><span class="builtintype" id="8245839">string</span><span class="op" id="8245845">]</span><span class="op" id="8245846">*</span><span class="ident" id="8245847">Tree</span><span class="op" id="8245851">)</span><span class="op" id="8245852">,</span>&nbsp;<span class="ident" id="8245854">nil</span><span class="op" id="8245857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8245861">if</span>&nbsp;<span class="ident" id="8245864">err</span>&nbsp;<span class="op" id="8245868">!=</span>&nbsp;<span class="ident" id="8245871">nil</span>&nbsp;<span class="op" id="8245875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8245880">t</span><span class="op" id="8245881">.</span><span class="ident" id="8245882">Errorf</span><span class="op" id="8245888">(</span><span class="string" id="8245889">&#34;%q:&nbsp;unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8245915">,</span>&nbsp;<span class="ident" id="8245917">test</span><span class="op" id="8245921">.</span><span class="ident" id="8245922">name</span><span class="op" id="8245926">,</span>&nbsp;<span class="ident" id="8245928">err</span><span class="op" id="8245931">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8245936">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8245951">if</span>&nbsp;<span class="ident" id="8245954">empty</span>&nbsp;<span class="op" id="8245960">:=</span>&nbsp;<span class="ident" id="8245963">IsEmptyTree</span><span class="op" id="8245974">(</span><span class="ident" id="8245975">tree</span><span class="op" id="8245979">.</span><span class="ident" id="8245980">Root</span><span class="op" id="8245984">)</span><span class="op" id="8245985">;</span>&nbsp;<span class="ident" id="8245987">empty</span>&nbsp;<span class="op" id="8245993">!=</span>&nbsp;<span class="ident" id="8245996">test</span><span class="op" id="8246000">.</span><span class="ident" id="8246001">empty</span>&nbsp;<span class="op" id="8246007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246012">t</span><span class="op" id="8246013">.</span><span class="ident" id="8246014">Errorf</span><span class="op" id="8246020">(</span><span class="string" id="8246021">&#34;%q:&nbsp;expected&nbsp;%t&nbsp;got&nbsp;%t&#34;</span><span class="op" id="8246045">,</span>&nbsp;<span class="ident" id="8246047">test</span><span class="op" id="8246051">.</span><span class="ident" id="8246052">name</span><span class="op" id="8246056">,</span>&nbsp;<span class="ident" id="8246058">test</span><span class="op" id="8246062">.</span><span class="ident" id="8246063">empty</span><span class="op" id="8246068">,</span>&nbsp;<span class="ident" id="8246070">empty</span><span class="op" id="8246075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8246079">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8246082">}</span><br>
<span class="lineno"></span><span class="op" id="8246084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8246087">func</span>&nbsp;<span class="ident" id="8246092">TestErrorContextWithTreeCopy</span><span class="op" id="8246120">(</span><span class="ident" id="8246121">t</span>&nbsp;<span class="op" id="8246123">*</span><span class="ident" id="8246124">testing</span><span class="op" id="8246131">.</span><span class="ident" id="8246132">T</span><span class="op" id="8246133">)</span>&nbsp;<span class="op" id="8246135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246138">tree</span><span class="op" id="8246142">,</span>&nbsp;<span class="ident" id="8246144">err</span>&nbsp;<span class="op" id="8246148">:=</span>&nbsp;<span class="ident" id="8246151">New</span><span class="op" id="8246154">(</span><span class="string" id="8246155">&#34;root&#34;</span><span class="op" id="8246161">)</span><span class="op" id="8246162">.</span><span class="ident" id="8246163">Parse</span><span class="op" id="8246168">(</span><span class="string" id="8246169">&#34;{{if&nbsp;true}}{{end}}&#34;</span><span class="op" id="8246189">,</span>&nbsp;<span class="string" id="8246191">&#34;&#34;</span><span class="op" id="8246193">,</span>&nbsp;<span class="string" id="8246195">&#34;&#34;</span><span class="op" id="8246197">,</span>&nbsp;<span class="builtinfunc" id="8246199">make</span><span class="op" id="8246203">(</span><span class="keyword" id="8246204">map</span><span class="op" id="8246207">[</span><span class="builtintype" id="8246208">string</span><span class="op" id="8246214">]</span><span class="op" id="8246215">*</span><span class="ident" id="8246216">Tree</span><span class="op" id="8246220">)</span><span class="op" id="8246221">,</span>&nbsp;<span class="ident" id="8246223">nil</span><span class="op" id="8246226">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8246229">if</span>&nbsp;<span class="ident" id="8246232">err</span>&nbsp;<span class="op" id="8246236">!=</span>&nbsp;<span class="ident" id="8246239">nil</span>&nbsp;<span class="op" id="8246243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246247">t</span><span class="op" id="8246248">.</span><span class="ident" id="8246249">Fatalf</span><span class="op" id="8246255">(</span><span class="string" id="8246256">&#34;unexpected&nbsp;tree&nbsp;parse&nbsp;failure:&nbsp;%v&#34;</span><span class="op" id="8246291">,</span>&nbsp;<span class="ident" id="8246293">err</span><span class="op" id="8246296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8246299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246302">treeCopy</span>&nbsp;<span class="op" id="8246311">:=</span>&nbsp;<span class="ident" id="8246314">tree</span><span class="op" id="8246318">.</span><span class="ident" id="8246319">Copy</span><span class="op" id="8246323">(</span><span class="op" id="8246324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246327">wantLocation</span><span class="op" id="8246339">,</span>&nbsp;<span class="ident" id="8246341">wantContext</span>&nbsp;<span class="op" id="8246353">:=</span>&nbsp;<span class="ident" id="8246356">tree</span><span class="op" id="8246360">.</span><span class="ident" id="8246361">ErrorContext</span><span class="op" id="8246373">(</span><span class="ident" id="8246374">tree</span><span class="op" id="8246378">.</span><span class="ident" id="8246379">Root</span><span class="op" id="8246383">.</span><span class="ident" id="8246384">Nodes</span><span class="op" id="8246389">[</span><span class="num" id="8246390">0</span><span class="op" id="8246391">]</span><span class="op" id="8246392">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246395">gotLocation</span><span class="op" id="8246406">,</span>&nbsp;<span class="ident" id="8246408">gotContext</span>&nbsp;<span class="op" id="8246419">:=</span>&nbsp;<span class="ident" id="8246422">treeCopy</span><span class="op" id="8246430">.</span><span class="ident" id="8246431">ErrorContext</span><span class="op" id="8246443">(</span><span class="ident" id="8246444">treeCopy</span><span class="op" id="8246452">.</span><span class="ident" id="8246453">Root</span><span class="op" id="8246457">.</span><span class="ident" id="8246458">Nodes</span><span class="op" id="8246463">[</span><span class="num" id="8246464">0</span><span class="op" id="8246465">]</span><span class="op" id="8246466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8246469">if</span>&nbsp;<span class="ident" id="8246472">wantLocation</span>&nbsp;<span class="op" id="8246485">!=</span>&nbsp;<span class="ident" id="8246488">gotLocation</span>&nbsp;<span class="op" id="8246500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246504">t</span><span class="op" id="8246505">.</span><span class="ident" id="8246506">Errorf</span><span class="op" id="8246512">(</span><span class="string" id="8246513">&#34;wrong&nbsp;error&nbsp;location&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8246550">,</span>&nbsp;<span class="ident" id="8246552">wantLocation</span><span class="op" id="8246564">,</span>&nbsp;<span class="ident" id="8246566">gotLocation</span><span class="op" id="8246577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8246580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8246583">if</span>&nbsp;<span class="ident" id="8246586">wantContext</span>&nbsp;<span class="op" id="8246598">!=</span>&nbsp;<span class="ident" id="8246601">gotContext</span>&nbsp;<span class="op" id="8246612">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246616">t</span><span class="op" id="8246617">.</span><span class="ident" id="8246618">Errorf</span><span class="op" id="8246624">(</span><span class="string" id="8246625">&#34;wrong&nbsp;error&nbsp;location&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8246662">,</span>&nbsp;<span class="ident" id="8246664">wantContext</span><span class="op" id="8246675">,</span>&nbsp;<span class="ident" id="8246677">gotContext</span><span class="op" id="8246687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8246690">}</span><br>
<span class="lineno"></span><span class="op" id="8246692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8246695">//&nbsp;All&nbsp;failures,&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;a&nbsp;string&nbsp;that&nbsp;must&nbsp;appear&nbsp;in&nbsp;the&nbsp;error&nbsp;message.</span><br>
<span class="lineno">355</span><span class="keyword" id="8246778">var</span>&nbsp;<span class="ident" id="8246782">errorTests</span>&nbsp;<span class="op" id="8246793">=</span>&nbsp;<span class="op" id="8246795">[</span><span class="op" id="8246796">]</span><span class="ident" id="8246797">parseTest</span><span class="op" id="8246806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8246809">//&nbsp;Check&nbsp;line&nbsp;numbers&nbsp;are&nbsp;accurate.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8246846">{</span><span class="string" id="8246847">&#34;unclosed1&#34;</span><span class="op" id="8246858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8246862">&#34;line1\n{{&#34;</span><span class="op" id="8246873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246877">hasError</span><span class="op" id="8246885">,</span>&nbsp;<span class="string" id="8246887">`unclosed1:2:&nbsp;unexpected&nbsp;unclosed&nbsp;action&nbsp;in&nbsp;command`</span><span class="op" id="8246939">}</span><span class="op" id="8246940">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8246943">{</span><span class="string" id="8246944">&#34;unclosed2&#34;</span><span class="op" id="8246955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8246959">&#34;line1\n{{define&nbsp;`x`}}line2\n{{&#34;</span><span class="op" id="8246991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246995">hasError</span><span class="op" id="8247003">,</span>&nbsp;<span class="string" id="8247005">`unclosed2:3:&nbsp;unexpected&nbsp;unclosed&nbsp;action&nbsp;in&nbsp;command`</span><span class="op" id="8247057">}</span><span class="op" id="8247058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8247061">//&nbsp;Specific&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247082">{</span><span class="string" id="8247083">&#34;function&#34;</span><span class="op" id="8247093">,</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8247097">&#34;{{foo}}&#34;</span><span class="op" id="8247106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8247110">hasError</span><span class="op" id="8247118">,</span>&nbsp;<span class="string" id="8247120">`function&nbsp;&#34;foo&#34;&nbsp;not&nbsp;defined`</span><span class="op" id="8247148">}</span><span class="op" id="8247149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247152">{</span><span class="string" id="8247153">&#34;comment&#34;</span><span class="op" id="8247162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8247166">&#34;{{/*}}&#34;</span><span class="op" id="8247174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8247178">hasError</span><span class="op" id="8247186">,</span>&nbsp;<span class="string" id="8247188">`unclosed&nbsp;comment`</span><span class="op" id="8247206">}</span><span class="op" id="8247207">,</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247210">{</span><span class="string" id="8247211">&#34;lparen&#34;</span><span class="op" id="8247219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8247223">&#34;{{.X&nbsp;(1&nbsp;2&nbsp;3}}&#34;</span><span class="op" id="8247238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8247242">hasError</span><span class="op" id="8247250">,</span>&nbsp;<span class="string" id="8247252">`unclosed&nbsp;left&nbsp;paren`</span><span class="op" id="8247273">}</span><span class="op" id="8247274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247277">{</span><span class="string" id="8247278">&#34;rparen&#34;</span><span class="op" id="8247286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8247290">&#34;{{.X&nbsp;1&nbsp;2&nbsp;3)}}&#34;</span><span class="op" id="8247305">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8247309">hasError</span><span class="op" id="8247317">,</span>&nbsp;<span class="string" id="8247319">`unexpected&nbsp;&#34;)&#34;`</span><span class="op" id="8247335">}</span><span class="op" id="8247336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247339">{</span><span class="string" id="8247340">&#34;space&#34;</span><span class="op" id="8247347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8247351">&#34;{{`x`3}}&#34;</span><span class="op" id="8247361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8247365">hasError</span><span class="op" id="8247373">,</span>&nbsp;<span class="string" id="8247375">`missing&nbsp;space?`</span><span class="op" id="8247391">}</span><span class="op" id="8247392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247395">{</span><span class="string" id="8247396">&#34;idchar&#34;</span><span class="op" id="8247404">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8247408">&#34;{{a#}}&#34;</span><span class="op" id="8247416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8247420">hasError</span><span class="op" id="8247428">,</span>&nbsp;<span class="string" id="8247430">`&#39;#&#39;`</span><span class="op" id="8247435">}</span><span class="op" id="8247436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247439">{</span><span class="string" id="8247440">&#34;charconst&#34;</span><span class="op" id="8247451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8247455">&#34;{{&#39;a}}&#34;</span><span class="op" id="8247463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8247467">hasError</span><span class="op" id="8247475">,</span>&nbsp;<span class="string" id="8247477">`unterminated&nbsp;character&nbsp;constant`</span><span class="op" id="8247510">}</span><span class="op" id="8247511">,</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247514">{</span><span class="string" id="8247515">&#34;stringconst&#34;</span><span class="op" id="8247528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8247532">`{{&#34;a}}`</span><span class="op" id="8247540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8247544">hasError</span><span class="op" id="8247552">,</span>&nbsp;<span class="string" id="8247554">`unterminated&nbsp;quoted&nbsp;string`</span><span class="op" id="8247582">}</span><span class="op" id="8247583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247586">{</span><span class="string" id="8247587">&#34;rawstringconst&#34;</span><span class="op" id="8247603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8247607">&#34;{{`a}}&#34;</span><span class="op" id="8247615">,</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8247619">hasError</span><span class="op" id="8247627">,</span>&nbsp;<span class="string" id="8247629">`unterminated&nbsp;raw&nbsp;quoted&nbsp;string`</span><span class="op" id="8247661">}</span><span class="op" id="8247662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247665">{</span><span class="string" id="8247666">&#34;number&#34;</span><span class="op" id="8247674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8247678">&#34;{{0xi}}&#34;</span><span class="op" id="8247687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8247691">hasError</span><span class="op" id="8247699">,</span>&nbsp;<span class="string" id="8247701">`number&nbsp;syntax`</span><span class="op" id="8247716">}</span><span class="op" id="8247717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247720">{</span><span class="string" id="8247721">&#34;multidefine&#34;</span><span class="op" id="8247734">,</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8247738">&#34;{{define&nbsp;`a`}}a{{end}}{{define&nbsp;`a`}}b{{end}}&#34;</span><span class="op" id="8247784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8247788">hasError</span><span class="op" id="8247796">,</span>&nbsp;<span class="string" id="8247798">`multiple&nbsp;definition&nbsp;of&nbsp;template`</span><span class="op" id="8247831">}</span><span class="op" id="8247832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247835">{</span><span class="string" id="8247836">&#34;eof&#34;</span><span class="op" id="8247841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8247845">&#34;{{range&nbsp;.X}}&#34;</span><span class="op" id="8247859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8247863">hasError</span><span class="op" id="8247871">,</span>&nbsp;<span class="string" id="8247873">`unexpected&nbsp;EOF`</span><span class="op" id="8247889">}</span><span class="op" id="8247890">,</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247893">{</span><span class="string" id="8247894">&#34;variable&#34;</span><span class="op" id="8247904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8247908">//&nbsp;Declare&nbsp;$x&nbsp;so&nbsp;it&#39;s&nbsp;defined,&nbsp;to&nbsp;avoid&nbsp;that&nbsp;error,&nbsp;and&nbsp;then&nbsp;check&nbsp;we&nbsp;don&#39;t&nbsp;parse&nbsp;a&nbsp;declaration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8248007">&#34;{{$x&nbsp;:=&nbsp;23}}{{with&nbsp;$x.y&nbsp;:=&nbsp;3}}{{$x&nbsp;23}}{{end}}&#34;</span><span class="op" id="8248055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8248059">hasError</span><span class="op" id="8248067">,</span>&nbsp;<span class="string" id="8248069">`unexpected&nbsp;&#34;:=&#34;`</span><span class="op" id="8248086">}</span><span class="op" id="8248087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8248090">{</span><span class="string" id="8248091">&#34;multidecl&#34;</span><span class="op" id="8248102">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8248106">&#34;{{$a,$b,$c&nbsp;:=&nbsp;23}}&#34;</span><span class="op" id="8248126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8248130">hasError</span><span class="op" id="8248138">,</span>&nbsp;<span class="string" id="8248140">`too&nbsp;many&nbsp;declarations`</span><span class="op" id="8248163">}</span><span class="op" id="8248164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8248167">{</span><span class="string" id="8248168">&#34;undefvar&#34;</span><span class="op" id="8248178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8248182">&#34;{{$a}}&#34;</span><span class="op" id="8248190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8248194">hasError</span><span class="op" id="8248202">,</span>&nbsp;<span class="string" id="8248204">`undefined&nbsp;variable`</span><span class="op" id="8248224">}</span><span class="op" id="8248225">,</span><br>
<span class="lineno">410</span><span class="op" id="8248227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8248230">func</span>&nbsp;<span class="ident" id="8248235">TestErrors</span><span class="op" id="8248245">(</span><span class="ident" id="8248246">t</span>&nbsp;<span class="op" id="8248248">*</span><span class="ident" id="8248249">testing</span><span class="op" id="8248256">.</span><span class="ident" id="8248257">T</span><span class="op" id="8248258">)</span>&nbsp;<span class="op" id="8248260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8248263">for</span>&nbsp;<span class="ident" id="8248267">_</span><span class="op" id="8248268">,</span>&nbsp;<span class="ident" id="8248270">test</span>&nbsp;<span class="op" id="8248275">:=</span>&nbsp;<span class="keyword" id="8248278">range</span>&nbsp;<span class="ident" id="8248284">errorTests</span>&nbsp;<span class="op" id="8248295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8248299">_</span><span class="op" id="8248300">,</span>&nbsp;<span class="ident" id="8248302">err</span>&nbsp;<span class="op" id="8248306">:=</span>&nbsp;<span class="ident" id="8248309">New</span><span class="op" id="8248312">(</span><span class="ident" id="8248313">test</span><span class="op" id="8248317">.</span><span class="ident" id="8248318">name</span><span class="op" id="8248322">)</span><span class="op" id="8248323">.</span><span class="ident" id="8248324">Parse</span><span class="op" id="8248329">(</span><span class="ident" id="8248330">test</span><span class="op" id="8248334">.</span><span class="ident" id="8248335">input</span><span class="op" id="8248340">,</span>&nbsp;<span class="string" id="8248342">&#34;&#34;</span><span class="op" id="8248344">,</span>&nbsp;<span class="string" id="8248346">&#34;&#34;</span><span class="op" id="8248348">,</span>&nbsp;<span class="builtinfunc" id="8248350">make</span><span class="op" id="8248354">(</span><span class="keyword" id="8248355">map</span><span class="op" id="8248358">[</span><span class="builtintype" id="8248359">string</span><span class="op" id="8248365">]</span><span class="op" id="8248366">*</span><span class="ident" id="8248367">Tree</span><span class="op" id="8248371">)</span><span class="op" id="8248372">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8248376">if</span>&nbsp;<span class="ident" id="8248379">err</span>&nbsp;<span class="op" id="8248383">==</span>&nbsp;<span class="ident" id="8248386">nil</span>&nbsp;<span class="op" id="8248390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8248395">t</span><span class="op" id="8248396">.</span><span class="ident" id="8248397">Errorf</span><span class="op" id="8248403">(</span><span class="string" id="8248404">&#34;%q:&nbsp;expected&nbsp;error&#34;</span><span class="op" id="8248424">,</span>&nbsp;<span class="ident" id="8248426">test</span><span class="op" id="8248430">.</span><span class="ident" id="8248431">name</span><span class="op" id="8248435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8248440">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8248451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8248455">if</span>&nbsp;<span class="op" id="8248458">!</span><span class="ident" id="8248459">strings</span><span class="op" id="8248466">.</span><span class="ident" id="8248467">Contains</span><span class="op" id="8248475">(</span><span class="ident" id="8248476">err</span><span class="op" id="8248479">.</span><span class="ident" id="8248480">Error</span><span class="op" id="8248485">(</span><span class="op" id="8248486">)</span><span class="op" id="8248487">,</span>&nbsp;<span class="ident" id="8248489">test</span><span class="op" id="8248493">.</span><span class="ident" id="8248494">result</span><span class="op" id="8248500">)</span>&nbsp;<span class="op" id="8248502">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8248507">t</span><span class="op" id="8248508">.</span><span class="ident" id="8248509">Errorf</span><span class="op" id="8248515">(</span><span class="string" id="8248516">&#34;%q:&nbsp;error&nbsp;%q&nbsp;does&nbsp;not&nbsp;contain&nbsp;%q&#34;</span><span class="op" id="8248550">,</span>&nbsp;<span class="ident" id="8248552">test</span><span class="op" id="8248556">.</span><span class="ident" id="8248557">name</span><span class="op" id="8248561">,</span>&nbsp;<span class="ident" id="8248563">err</span><span class="op" id="8248566">,</span>&nbsp;<span class="ident" id="8248568">test</span><span class="op" id="8248572">.</span><span class="ident" id="8248573">result</span><span class="op" id="8248579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8248583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8248586">}</span><br>
<span class="lineno"></span><span class="op" id="8248588">}</span>
</div>
</body>
</html>
