<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5741652">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5741708">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5741762">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5741813">package</span>&nbsp;<span class="ident" id="5741821">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5741828">import</span>&nbsp;<span class="op" id="5741835">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5741838">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5741847">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5741857">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5741862">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5741865">type</span>&nbsp;<span class="ident" id="5741870">importReader</span>&nbsp;<span class="keyword" id="5741883">struct</span>&nbsp;<span class="op" id="5741890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741893">b</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5741898">*</span><span class="ident" id="5741899">bufio</span><span class="op" id="5741904">.</span><span class="ident" id="5741905">Reader</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741913">buf</span>&nbsp;&nbsp;<span class="op" id="5741918">[</span><span class="op" id="5741919">]</span><span class="builtintype" id="5741920">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741926">peek</span>&nbsp;<span class="builtintype" id="5741931">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741937">err</span>&nbsp;&nbsp;<span class="builtintype" id="5741942">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741949">eof</span>&nbsp;&nbsp;<span class="builtintype" id="5741954">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741960">nerr</span>&nbsp;<span class="builtintype" id="5741965">int</span><br>
<span class="lineno">20</span><span class="op" id="5741969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5741972">func</span>&nbsp;<span class="ident" id="5741977">isIdent</span><span class="op" id="5741984">(</span><span class="ident" id="5741985">c</span>&nbsp;<span class="builtintype" id="5741987">byte</span><span class="op" id="5741991">)</span>&nbsp;<span class="builtintype" id="5741993">bool</span>&nbsp;<span class="op" id="5741998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742001">return</span>&nbsp;<span class="string" id="5742008">&#39;A&#39;</span>&nbsp;<span class="op" id="5742012">&lt;=</span>&nbsp;<span class="ident" id="5742015">c</span>&nbsp;<span class="op" id="5742017">&amp;&amp;</span>&nbsp;<span class="ident" id="5742020">c</span>&nbsp;<span class="op" id="5742022">&lt;=</span>&nbsp;<span class="string" id="5742025">&#39;Z&#39;</span>&nbsp;<span class="op" id="5742029">||</span>&nbsp;<span class="string" id="5742032">&#39;a&#39;</span>&nbsp;<span class="op" id="5742036">&lt;=</span>&nbsp;<span class="ident" id="5742039">c</span>&nbsp;<span class="op" id="5742041">&amp;&amp;</span>&nbsp;<span class="ident" id="5742044">c</span>&nbsp;<span class="op" id="5742046">&lt;=</span>&nbsp;<span class="string" id="5742049">&#39;z&#39;</span>&nbsp;<span class="op" id="5742053">||</span>&nbsp;<span class="string" id="5742056">&#39;0&#39;</span>&nbsp;<span class="op" id="5742060">&lt;=</span>&nbsp;<span class="ident" id="5742063">c</span>&nbsp;<span class="op" id="5742065">&amp;&amp;</span>&nbsp;<span class="ident" id="5742068">c</span>&nbsp;<span class="op" id="5742070">&lt;=</span>&nbsp;<span class="string" id="5742073">&#39;9&#39;</span>&nbsp;<span class="op" id="5742077">||</span>&nbsp;<span class="ident" id="5742080">c</span>&nbsp;<span class="op" id="5742082">==</span>&nbsp;<span class="string" id="5742085">&#39;_&#39;</span>&nbsp;<span class="op" id="5742089">||</span>&nbsp;<span class="ident" id="5742092">c</span>&nbsp;<span class="op" id="5742094">&gt;=</span>&nbsp;<span class="num" id="5742097">0x80</span><br>
<span class="lineno"></span><span class="op" id="5742102">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5742105">var</span>&nbsp;<span class="op" id="5742109">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742112">errSyntax</span>&nbsp;<span class="op" id="5742122">=</span>&nbsp;<span class="ident" id="5742124">errors</span><span class="op" id="5742130">.</span><span class="ident" id="5742131">New</span><span class="op" id="5742134">(</span><span class="string" id="5742135">&#34;syntax&nbsp;error&#34;</span><span class="op" id="5742149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742152">errNUL</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5742162">=</span>&nbsp;<span class="ident" id="5742164">errors</span><span class="op" id="5742170">.</span><span class="ident" id="5742171">New</span><span class="op" id="5742174">(</span><span class="string" id="5742175">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="5742200">)</span><br>
<span class="lineno"></span><span class="op" id="5742202">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="5742205">//&nbsp;syntaxError&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;but&nbsp;only&nbsp;if&nbsp;an&nbsp;I/O&nbsp;error&nbsp;has&nbsp;not&nbsp;already&nbsp;been&nbsp;recorded.</span><br>
<span class="lineno"></span><span class="keyword" id="5742300">func</span>&nbsp;<span class="op" id="5742305">(</span><span class="ident" id="5742306">r</span>&nbsp;<span class="op" id="5742308">*</span><span class="ident" id="5742309">importReader</span><span class="op" id="5742321">)</span>&nbsp;<span class="ident" id="5742323">syntaxError</span><span class="op" id="5742334">(</span><span class="op" id="5742335">)</span>&nbsp;<span class="op" id="5742337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742340">if</span>&nbsp;<span class="ident" id="5742343">r</span><span class="op" id="5742344">.</span><span class="ident" id="5742345">err</span>&nbsp;<span class="op" id="5742349">==</span>&nbsp;<span class="ident" id="5742352">nil</span>&nbsp;<span class="op" id="5742356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742360">r</span><span class="op" id="5742361">.</span><span class="ident" id="5742362">err</span>&nbsp;<span class="op" id="5742366">=</span>&nbsp;<span class="ident" id="5742368">errSyntax</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5742379">}</span><br>
<span class="lineno"></span><span class="op" id="5742381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5742384">//&nbsp;readByte&nbsp;reads&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input,&nbsp;saves&nbsp;it&nbsp;in&nbsp;buf,&nbsp;and&nbsp;returns&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="5742465">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;readByte&nbsp;records&nbsp;the&nbsp;error&nbsp;in&nbsp;r.err&nbsp;and&nbsp;returns&nbsp;0.</span><br>
<span class="lineno">40</span><span class="keyword" id="5742539">func</span>&nbsp;<span class="op" id="5742544">(</span><span class="ident" id="5742545">r</span>&nbsp;<span class="op" id="5742547">*</span><span class="ident" id="5742548">importReader</span><span class="op" id="5742560">)</span>&nbsp;<span class="ident" id="5742562">readByte</span><span class="op" id="5742570">(</span><span class="op" id="5742571">)</span>&nbsp;<span class="builtintype" id="5742573">byte</span>&nbsp;<span class="op" id="5742578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742581">c</span><span class="op" id="5742582">,</span>&nbsp;<span class="ident" id="5742584">err</span>&nbsp;<span class="op" id="5742588">:=</span>&nbsp;<span class="ident" id="5742591">r</span><span class="op" id="5742592">.</span><span class="ident" id="5742593">b</span><span class="op" id="5742594">.</span><span class="ident" id="5742595">ReadByte</span><span class="op" id="5742603">(</span><span class="op" id="5742604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742607">if</span>&nbsp;<span class="ident" id="5742610">err</span>&nbsp;<span class="op" id="5742614">==</span>&nbsp;<span class="ident" id="5742617">nil</span>&nbsp;<span class="op" id="5742621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742625">r</span><span class="op" id="5742626">.</span><span class="ident" id="5742627">buf</span>&nbsp;<span class="op" id="5742631">=</span>&nbsp;<span class="builtinfunc" id="5742633">append</span><span class="op" id="5742639">(</span><span class="ident" id="5742640">r</span><span class="op" id="5742641">.</span><span class="ident" id="5742642">buf</span><span class="op" id="5742645">,</span>&nbsp;<span class="ident" id="5742647">c</span><span class="op" id="5742648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742652">if</span>&nbsp;<span class="ident" id="5742655">c</span>&nbsp;<span class="op" id="5742657">==</span>&nbsp;<span class="num" id="5742660">0</span>&nbsp;<span class="op" id="5742662">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742667">err</span>&nbsp;<span class="op" id="5742671">=</span>&nbsp;<span class="ident" id="5742673">errNUL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5742682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5742685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742688">if</span>&nbsp;<span class="ident" id="5742691">err</span>&nbsp;<span class="op" id="5742695">!=</span>&nbsp;<span class="ident" id="5742698">nil</span>&nbsp;<span class="op" id="5742702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742706">if</span>&nbsp;<span class="ident" id="5742709">err</span>&nbsp;<span class="op" id="5742713">==</span>&nbsp;<span class="ident" id="5742716">io</span><span class="op" id="5742718">.</span><span class="ident" id="5742719">EOF</span>&nbsp;<span class="op" id="5742723">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742728">r</span><span class="op" id="5742729">.</span><span class="ident" id="5742730">eof</span>&nbsp;<span class="op" id="5742734">=</span>&nbsp;<span class="builtintype" id="5742736">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5742743">}</span>&nbsp;<span class="keyword" id="5742745">else</span>&nbsp;<span class="keyword" id="5742750">if</span>&nbsp;<span class="ident" id="5742753">r</span><span class="op" id="5742754">.</span><span class="ident" id="5742755">err</span>&nbsp;<span class="op" id="5742759">==</span>&nbsp;<span class="ident" id="5742762">nil</span>&nbsp;<span class="op" id="5742766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742771">r</span><span class="op" id="5742772">.</span><span class="ident" id="5742773">err</span>&nbsp;<span class="op" id="5742777">=</span>&nbsp;<span class="ident" id="5742779">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5742785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742789">c</span>&nbsp;<span class="op" id="5742791">=</span>&nbsp;<span class="num" id="5742793">0</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5742796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5742799">return</span>&nbsp;<span class="ident" id="5742806">c</span><br>
<span class="lineno"></span><span class="op" id="5742808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5742811">//&nbsp;peekByte&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input&nbsp;reader&nbsp;but&nbsp;does&nbsp;not&nbsp;advance&nbsp;beyond&nbsp;it.</span><br>
<span class="lineno">60</span><span class="comment" id="5742899">//&nbsp;If&nbsp;skipSpace&nbsp;is&nbsp;set,&nbsp;peekByte&nbsp;skips&nbsp;leading&nbsp;spaces&nbsp;and&nbsp;comments.</span><br>
<span class="lineno"></span><span class="keyword" id="5742967">func</span>&nbsp;<span class="op" id="5742972">(</span><span class="ident" id="5742973">r</span>&nbsp;<span class="op" id="5742975">*</span><span class="ident" id="5742976">importReader</span><span class="op" id="5742988">)</span>&nbsp;<span class="ident" id="5742990">peekByte</span><span class="op" id="5742998">(</span><span class="ident" id="5742999">skipSpace</span>&nbsp;<span class="builtintype" id="5743009">bool</span><span class="op" id="5743013">)</span>&nbsp;<span class="builtintype" id="5743015">byte</span>&nbsp;<span class="op" id="5743020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743023">if</span>&nbsp;<span class="ident" id="5743026">r</span><span class="op" id="5743027">.</span><span class="ident" id="5743028">err</span>&nbsp;<span class="op" id="5743032">!=</span>&nbsp;<span class="ident" id="5743035">nil</span>&nbsp;<span class="op" id="5743039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743043">if</span>&nbsp;<span class="ident" id="5743046">r</span><span class="op" id="5743047">.</span><span class="ident" id="5743048">nerr</span><span class="op" id="5743052">++</span><span class="op" id="5743054">;</span>&nbsp;<span class="ident" id="5743056">r</span><span class="op" id="5743057">.</span><span class="ident" id="5743058">nerr</span>&nbsp;<span class="op" id="5743063">&gt;</span>&nbsp;<span class="num" id="5743065">10000</span>&nbsp;<span class="op" id="5743071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5743076">panic</span><span class="op" id="5743081">(</span><span class="string" id="5743082">&#34;go/build:&nbsp;import&nbsp;reader&nbsp;looping&#34;</span><span class="op" id="5743115">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5743119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743123">return</span>&nbsp;<span class="num" id="5743130">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5743133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743137">//&nbsp;Use&nbsp;r.peek&nbsp;as&nbsp;first&nbsp;input&nbsp;byte.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743173">//&nbsp;Don&#39;t&nbsp;just&nbsp;return&nbsp;r.peek&nbsp;here:&nbsp;it&nbsp;might&nbsp;have&nbsp;been&nbsp;left&nbsp;by&nbsp;peekByte(false)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743251">//&nbsp;and&nbsp;this&nbsp;might&nbsp;be&nbsp;peekByte(true).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743289">c</span>&nbsp;<span class="op" id="5743291">:=</span>&nbsp;<span class="ident" id="5743294">r</span><span class="op" id="5743295">.</span><span class="ident" id="5743296">peek</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743302">if</span>&nbsp;<span class="ident" id="5743305">c</span>&nbsp;<span class="op" id="5743307">==</span>&nbsp;<span class="num" id="5743310">0</span>&nbsp;<span class="op" id="5743312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743316">c</span>&nbsp;<span class="op" id="5743318">=</span>&nbsp;<span class="ident" id="5743320">r</span><span class="op" id="5743321">.</span><span class="ident" id="5743322">readByte</span><span class="op" id="5743330">(</span><span class="op" id="5743331">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5743334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743337">for</span>&nbsp;<span class="ident" id="5743341">r</span><span class="op" id="5743342">.</span><span class="ident" id="5743343">err</span>&nbsp;<span class="op" id="5743347">==</span>&nbsp;<span class="ident" id="5743350">nil</span>&nbsp;<span class="op" id="5743354">&amp;&amp;</span>&nbsp;<span class="op" id="5743357">!</span><span class="ident" id="5743358">r</span><span class="op" id="5743359">.</span><span class="ident" id="5743360">eof</span>&nbsp;<span class="op" id="5743364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743368">if</span>&nbsp;<span class="ident" id="5743371">skipSpace</span>&nbsp;<span class="op" id="5743381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743386">//&nbsp;For&nbsp;the&nbsp;purposes&nbsp;of&nbsp;this&nbsp;reader,&nbsp;semicolons&nbsp;are&nbsp;never&nbsp;necessary&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743459">//&nbsp;understand&nbsp;the&nbsp;input&nbsp;and&nbsp;are&nbsp;treated&nbsp;as&nbsp;spaces.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743513">switch</span>&nbsp;<span class="ident" id="5743520">c</span>&nbsp;<span class="op" id="5743522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743527">case</span>&nbsp;<span class="string" id="5743532">&#39;&nbsp;&#39;</span><span class="op" id="5743535">,</span>&nbsp;<span class="string" id="5743537">&#39;\f&#39;</span><span class="op" id="5743541">,</span>&nbsp;<span class="string" id="5743543">&#39;\t&#39;</span><span class="op" id="5743547">,</span>&nbsp;<span class="string" id="5743549">&#39;\r&#39;</span><span class="op" id="5743553">,</span>&nbsp;<span class="string" id="5743555">&#39;\n&#39;</span><span class="op" id="5743559">,</span>&nbsp;<span class="string" id="5743561">&#39;;&#39;</span><span class="op" id="5743564">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743570">c</span>&nbsp;<span class="op" id="5743572">=</span>&nbsp;<span class="ident" id="5743574">r</span><span class="op" id="5743575">.</span><span class="ident" id="5743576">readByte</span><span class="op" id="5743584">(</span><span class="op" id="5743585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743591">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743604">case</span>&nbsp;<span class="string" id="5743609">&#39;/&#39;</span><span class="op" id="5743612">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743618">c</span>&nbsp;<span class="op" id="5743620">=</span>&nbsp;<span class="ident" id="5743622">r</span><span class="op" id="5743623">.</span><span class="ident" id="5743624">readByte</span><span class="op" id="5743632">(</span><span class="op" id="5743633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743639">if</span>&nbsp;<span class="ident" id="5743642">c</span>&nbsp;<span class="op" id="5743644">==</span>&nbsp;<span class="string" id="5743647">&#39;/&#39;</span>&nbsp;<span class="op" id="5743651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743658">for</span>&nbsp;<span class="ident" id="5743662">c</span>&nbsp;<span class="op" id="5743664">!=</span>&nbsp;<span class="string" id="5743667">&#39;\n&#39;</span>&nbsp;<span class="op" id="5743672">&amp;&amp;</span>&nbsp;<span class="ident" id="5743675">r</span><span class="op" id="5743676">.</span><span class="ident" id="5743677">err</span>&nbsp;<span class="op" id="5743681">==</span>&nbsp;<span class="ident" id="5743684">nil</span>&nbsp;<span class="op" id="5743688">&amp;&amp;</span>&nbsp;<span class="op" id="5743691">!</span><span class="ident" id="5743692">r</span><span class="op" id="5743693">.</span><span class="ident" id="5743694">eof</span>&nbsp;<span class="op" id="5743698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743706">c</span>&nbsp;<span class="op" id="5743708">=</span>&nbsp;<span class="ident" id="5743710">r</span><span class="op" id="5743711">.</span><span class="ident" id="5743712">readByte</span><span class="op" id="5743720">(</span><span class="op" id="5743721">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5743728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5743734">}</span>&nbsp;<span class="keyword" id="5743736">else</span>&nbsp;<span class="keyword" id="5743741">if</span>&nbsp;<span class="ident" id="5743744">c</span>&nbsp;<span class="op" id="5743746">==</span>&nbsp;<span class="string" id="5743749">&#39;*&#39;</span>&nbsp;<span class="op" id="5743753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743760">var</span>&nbsp;<span class="ident" id="5743764">c1</span>&nbsp;<span class="builtintype" id="5743767">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743777">for</span>&nbsp;<span class="op" id="5743781">(</span><span class="ident" id="5743782">c</span>&nbsp;<span class="op" id="5743784">!=</span>&nbsp;<span class="string" id="5743787">&#39;*&#39;</span>&nbsp;<span class="op" id="5743791">||</span>&nbsp;<span class="ident" id="5743794">c1</span>&nbsp;<span class="op" id="5743797">!=</span>&nbsp;<span class="string" id="5743800">&#39;/&#39;</span><span class="op" id="5743803">)</span>&nbsp;<span class="op" id="5743805">&amp;&amp;</span>&nbsp;<span class="ident" id="5743808">r</span><span class="op" id="5743809">.</span><span class="ident" id="5743810">err</span>&nbsp;<span class="op" id="5743814">==</span>&nbsp;<span class="ident" id="5743817">nil</span>&nbsp;<span class="op" id="5743821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743829">if</span>&nbsp;<span class="ident" id="5743832">r</span><span class="op" id="5743833">.</span><span class="ident" id="5743834">eof</span>&nbsp;<span class="op" id="5743838">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743847">r</span><span class="op" id="5743848">.</span><span class="ident" id="5743849">syntaxError</span><span class="op" id="5743860">(</span><span class="op" id="5743861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5743869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743877">c</span><span class="op" id="5743878">,</span>&nbsp;<span class="ident" id="5743880">c1</span>&nbsp;<span class="op" id="5743883">=</span>&nbsp;<span class="ident" id="5743885">c1</span><span class="op" id="5743887">,</span>&nbsp;<span class="ident" id="5743889">r</span><span class="op" id="5743890">.</span><span class="ident" id="5743891">readByte</span><span class="op" id="5743899">(</span><span class="op" id="5743900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5743907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5743913">}</span>&nbsp;<span class="keyword" id="5743915">else</span>&nbsp;<span class="op" id="5743920">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743927">r</span><span class="op" id="5743928">.</span><span class="ident" id="5743929">syntaxError</span><span class="op" id="5743940">(</span><span class="op" id="5743941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5743947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743953">c</span>&nbsp;<span class="op" id="5743955">=</span>&nbsp;<span class="ident" id="5743957">r</span><span class="op" id="5743958">.</span><span class="ident" id="5743959">readByte</span><span class="op" id="5743967">(</span><span class="op" id="5743968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743974">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5743986">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5743990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5743994">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5744001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5744004">r</span><span class="op" id="5744005">.</span><span class="ident" id="5744006">peek</span>&nbsp;<span class="op" id="5744011">=</span>&nbsp;<span class="ident" id="5744013">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5744016">return</span>&nbsp;<span class="ident" id="5744023">r</span><span class="op" id="5744024">.</span><span class="ident" id="5744025">peek</span><br>
<span class="lineno">110</span><span class="op" id="5744030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5744033">//&nbsp;nextByte&nbsp;is&nbsp;like&nbsp;peekByte&nbsp;but&nbsp;advances&nbsp;beyond&nbsp;the&nbsp;returned&nbsp;byte.</span><br>
<span class="lineno"></span><span class="keyword" id="5744101">func</span>&nbsp;<span class="op" id="5744106">(</span><span class="ident" id="5744107">r</span>&nbsp;<span class="op" id="5744109">*</span><span class="ident" id="5744110">importReader</span><span class="op" id="5744122">)</span>&nbsp;<span class="ident" id="5744124">nextByte</span><span class="op" id="5744132">(</span><span class="ident" id="5744133">skipSpace</span>&nbsp;<span class="builtintype" id="5744143">bool</span><span class="op" id="5744147">)</span>&nbsp;<span class="builtintype" id="5744149">byte</span>&nbsp;<span class="op" id="5744154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5744157">c</span>&nbsp;<span class="op" id="5744159">:=</span>&nbsp;<span class="ident" id="5744162">r</span><span class="op" id="5744163">.</span><span class="ident" id="5744164">peekByte</span><span class="op" id="5744172">(</span><span class="ident" id="5744173">skipSpace</span><span class="op" id="5744182">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5744185">r</span><span class="op" id="5744186">.</span><span class="ident" id="5744187">peek</span>&nbsp;<span class="op" id="5744192">=</span>&nbsp;<span class="num" id="5744194">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5744197">return</span>&nbsp;<span class="ident" id="5744204">c</span><br>
<span class="lineno"></span><span class="op" id="5744206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5744209">//&nbsp;readKeyword&nbsp;reads&nbsp;the&nbsp;given&nbsp;keyword&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">120</span><span class="comment" id="5744264">//&nbsp;If&nbsp;the&nbsp;keyword&nbsp;is&nbsp;not&nbsp;present,&nbsp;readKeyword&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5744334">func</span>&nbsp;<span class="op" id="5744339">(</span><span class="ident" id="5744340">r</span>&nbsp;<span class="op" id="5744342">*</span><span class="ident" id="5744343">importReader</span><span class="op" id="5744355">)</span>&nbsp;<span class="ident" id="5744357">readKeyword</span><span class="op" id="5744368">(</span><span class="ident" id="5744369">kw</span>&nbsp;<span class="builtintype" id="5744372">string</span><span class="op" id="5744378">)</span>&nbsp;<span class="op" id="5744380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5744383">r</span><span class="op" id="5744384">.</span><span class="ident" id="5744385">peekByte</span><span class="op" id="5744393">(</span><span class="builtintype" id="5744394">true</span><span class="op" id="5744398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5744401">for</span>&nbsp;<span class="ident" id="5744405">i</span>&nbsp;<span class="op" id="5744407">:=</span>&nbsp;<span class="num" id="5744410">0</span><span class="op" id="5744411">;</span>&nbsp;<span class="ident" id="5744413">i</span>&nbsp;<span class="op" id="5744415">&lt;</span>&nbsp;<span class="builtinfunc" id="5744417">len</span><span class="op" id="5744420">(</span><span class="ident" id="5744421">kw</span><span class="op" id="5744423">)</span><span class="op" id="5744424">;</span>&nbsp;<span class="ident" id="5744426">i</span><span class="op" id="5744427">++</span>&nbsp;<span class="op" id="5744430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5744434">if</span>&nbsp;<span class="ident" id="5744437">r</span><span class="op" id="5744438">.</span><span class="ident" id="5744439">nextByte</span><span class="op" id="5744447">(</span><span class="builtintype" id="5744448">false</span><span class="op" id="5744453">)</span>&nbsp;<span class="op" id="5744455">!=</span>&nbsp;<span class="ident" id="5744458">kw</span><span class="op" id="5744460">[</span><span class="ident" id="5744461">i</span><span class="op" id="5744462">]</span>&nbsp;<span class="op" id="5744464">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5744469">r</span><span class="op" id="5744470">.</span><span class="ident" id="5744471">syntaxError</span><span class="op" id="5744482">(</span><span class="op" id="5744483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5744488">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5744497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5744500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5744503">if</span>&nbsp;<span class="ident" id="5744506">isIdent</span><span class="op" id="5744513">(</span><span class="ident" id="5744514">r</span><span class="op" id="5744515">.</span><span class="ident" id="5744516">peekByte</span><span class="op" id="5744524">(</span><span class="builtintype" id="5744525">false</span><span class="op" id="5744530">)</span><span class="op" id="5744531">)</span>&nbsp;<span class="op" id="5744533">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5744537">r</span><span class="op" id="5744538">.</span><span class="ident" id="5744539">syntaxError</span><span class="op" id="5744550">(</span><span class="op" id="5744551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5744554">}</span><br>
<span class="lineno"></span><span class="op" id="5744556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5744559">//&nbsp;readIdent&nbsp;reads&nbsp;an&nbsp;identifier&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">135</span><span class="comment" id="5744608">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readIdent&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5744678">func</span>&nbsp;<span class="op" id="5744683">(</span><span class="ident" id="5744684">r</span>&nbsp;<span class="op" id="5744686">*</span><span class="ident" id="5744687">importReader</span><span class="op" id="5744699">)</span>&nbsp;<span class="ident" id="5744701">readIdent</span><span class="op" id="5744710">(</span><span class="op" id="5744711">)</span>&nbsp;<span class="op" id="5744713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5744716">c</span>&nbsp;<span class="op" id="5744718">:=</span>&nbsp;<span class="ident" id="5744721">r</span><span class="op" id="5744722">.</span><span class="ident" id="5744723">peekByte</span><span class="op" id="5744731">(</span><span class="builtintype" id="5744732">true</span><span class="op" id="5744736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5744739">if</span>&nbsp;<span class="op" id="5744742">!</span><span class="ident" id="5744743">isIdent</span><span class="op" id="5744750">(</span><span class="ident" id="5744751">c</span><span class="op" id="5744752">)</span>&nbsp;<span class="op" id="5744754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5744758">r</span><span class="op" id="5744759">.</span><span class="ident" id="5744760">syntaxError</span><span class="op" id="5744771">(</span><span class="op" id="5744772">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5744776">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5744784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5744787">for</span>&nbsp;<span class="ident" id="5744791">isIdent</span><span class="op" id="5744798">(</span><span class="ident" id="5744799">r</span><span class="op" id="5744800">.</span><span class="ident" id="5744801">peekByte</span><span class="op" id="5744809">(</span><span class="builtintype" id="5744810">false</span><span class="op" id="5744815">)</span><span class="op" id="5744816">)</span>&nbsp;<span class="op" id="5744818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5744822">r</span><span class="op" id="5744823">.</span><span class="ident" id="5744824">peek</span>&nbsp;<span class="op" id="5744829">=</span>&nbsp;<span class="num" id="5744831">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5744834">}</span><br>
<span class="lineno">145</span><span class="op" id="5744836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5744839">//&nbsp;readString&nbsp;reads&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="5744899">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readString&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5744970">func</span>&nbsp;<span class="op" id="5744975">(</span><span class="ident" id="5744976">r</span>&nbsp;<span class="op" id="5744978">*</span><span class="ident" id="5744979">importReader</span><span class="op" id="5744991">)</span>&nbsp;<span class="ident" id="5744993">readString</span><span class="op" id="5745003">(</span><span class="op" id="5745004">)</span>&nbsp;<span class="op" id="5745006">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5745009">switch</span>&nbsp;<span class="ident" id="5745016">r</span><span class="op" id="5745017">.</span><span class="ident" id="5745018">nextByte</span><span class="op" id="5745026">(</span><span class="builtintype" id="5745027">true</span><span class="op" id="5745031">)</span>&nbsp;<span class="op" id="5745033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5745036">case</span>&nbsp;<span class="string" id="5745041">&#39;`&#39;</span><span class="op" id="5745044">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5745048">for</span>&nbsp;<span class="ident" id="5745052">r</span><span class="op" id="5745053">.</span><span class="ident" id="5745054">err</span>&nbsp;<span class="op" id="5745058">==</span>&nbsp;<span class="ident" id="5745061">nil</span>&nbsp;<span class="op" id="5745065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5745070">if</span>&nbsp;<span class="ident" id="5745073">r</span><span class="op" id="5745074">.</span><span class="ident" id="5745075">nextByte</span><span class="op" id="5745083">(</span><span class="builtintype" id="5745084">false</span><span class="op" id="5745089">)</span>&nbsp;<span class="op" id="5745091">==</span>&nbsp;<span class="string" id="5745094">&#39;`&#39;</span>&nbsp;<span class="op" id="5745098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5745104">break</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5745113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5745118">if</span>&nbsp;<span class="ident" id="5745121">r</span><span class="op" id="5745122">.</span><span class="ident" id="5745123">eof</span>&nbsp;<span class="op" id="5745127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5745133">r</span><span class="op" id="5745134">.</span><span class="ident" id="5745135">syntaxError</span><span class="op" id="5745146">(</span><span class="op" id="5745147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5745152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5745156">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5745159">case</span>&nbsp;<span class="string" id="5745164">&#39;&#34;&#39;</span><span class="op" id="5745167">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5745171">for</span>&nbsp;<span class="ident" id="5745175">r</span><span class="op" id="5745176">.</span><span class="ident" id="5745177">err</span>&nbsp;<span class="op" id="5745181">==</span>&nbsp;<span class="ident" id="5745184">nil</span>&nbsp;<span class="op" id="5745188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5745193">c</span>&nbsp;<span class="op" id="5745195">:=</span>&nbsp;<span class="ident" id="5745198">r</span><span class="op" id="5745199">.</span><span class="ident" id="5745200">nextByte</span><span class="op" id="5745208">(</span><span class="builtintype" id="5745209">false</span><span class="op" id="5745214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5745219">if</span>&nbsp;<span class="ident" id="5745222">c</span>&nbsp;<span class="op" id="5745224">==</span>&nbsp;<span class="string" id="5745227">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5745231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5745237">break</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5745246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5745251">if</span>&nbsp;<span class="ident" id="5745254">r</span><span class="op" id="5745255">.</span><span class="ident" id="5745256">eof</span>&nbsp;<span class="op" id="5745260">||</span>&nbsp;<span class="ident" id="5745263">c</span>&nbsp;<span class="op" id="5745265">==</span>&nbsp;<span class="string" id="5745268">&#39;\n&#39;</span>&nbsp;<span class="op" id="5745273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5745279">r</span><span class="op" id="5745280">.</span><span class="ident" id="5745281">syntaxError</span><span class="op" id="5745292">(</span><span class="op" id="5745293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5745298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5745303">if</span>&nbsp;<span class="ident" id="5745306">c</span>&nbsp;<span class="op" id="5745308">==</span>&nbsp;<span class="string" id="5745311">&#39;\\&#39;</span>&nbsp;<span class="op" id="5745316">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5745322">r</span><span class="op" id="5745323">.</span><span class="ident" id="5745324">nextByte</span><span class="op" id="5745332">(</span><span class="builtintype" id="5745333">false</span><span class="op" id="5745338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5745343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5745347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5745350">default</span><span class="op" id="5745357">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5745361">r</span><span class="op" id="5745362">.</span><span class="ident" id="5745363">syntaxError</span><span class="op" id="5745374">(</span><span class="op" id="5745375">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5745378">}</span><br>
<span class="lineno"></span><span class="op" id="5745380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5745383">//&nbsp;readImport&nbsp;reads&nbsp;an&nbsp;import&nbsp;clause&nbsp;-&nbsp;optional&nbsp;identifier&nbsp;followed&nbsp;by&nbsp;quoted&nbsp;string&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="5745470">//&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">180</span><span class="keyword" id="5745489">func</span>&nbsp;<span class="op" id="5745494">(</span><span class="ident" id="5745495">r</span>&nbsp;<span class="op" id="5745497">*</span><span class="ident" id="5745498">importReader</span><span class="op" id="5745510">)</span>&nbsp;<span class="ident" id="5745512">readImport</span><span class="op" id="5745522">(</span><span class="op" id="5745523">)</span>&nbsp;<span class="op" id="5745525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5745528">c</span>&nbsp;<span class="op" id="5745530">:=</span>&nbsp;<span class="ident" id="5745533">r</span><span class="op" id="5745534">.</span><span class="ident" id="5745535">peekByte</span><span class="op" id="5745543">(</span><span class="builtintype" id="5745544">true</span><span class="op" id="5745548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5745551">if</span>&nbsp;<span class="ident" id="5745554">c</span>&nbsp;<span class="op" id="5745556">==</span>&nbsp;<span class="string" id="5745559">&#39;.&#39;</span>&nbsp;<span class="op" id="5745563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5745567">r</span><span class="op" id="5745568">.</span><span class="ident" id="5745569">peek</span>&nbsp;<span class="op" id="5745574">=</span>&nbsp;<span class="num" id="5745576">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5745579">}</span>&nbsp;<span class="keyword" id="5745581">else</span>&nbsp;<span class="keyword" id="5745586">if</span>&nbsp;<span class="ident" id="5745589">isIdent</span><span class="op" id="5745596">(</span><span class="ident" id="5745597">c</span><span class="op" id="5745598">)</span>&nbsp;<span class="op" id="5745600">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5745604">r</span><span class="op" id="5745605">.</span><span class="ident" id="5745606">readIdent</span><span class="op" id="5745615">(</span><span class="op" id="5745616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5745619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5745622">r</span><span class="op" id="5745623">.</span><span class="ident" id="5745624">readString</span><span class="op" id="5745634">(</span><span class="op" id="5745635">)</span><br>
<span class="lineno"></span><span class="op" id="5745637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="comment" id="5745640">//&nbsp;readComments&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;only&nbsp;reads&nbsp;the&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="5745718">//&nbsp;block&nbsp;of&nbsp;comments&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5745752">func</span>&nbsp;<span class="ident" id="5745757">readComments</span><span class="op" id="5745769">(</span><span class="ident" id="5745770">f</span>&nbsp;<span class="ident" id="5745772">io</span><span class="op" id="5745774">.</span><span class="ident" id="5745775">Reader</span><span class="op" id="5745781">)</span>&nbsp;<span class="op" id="5745783">(</span><span class="op" id="5745784">[</span><span class="op" id="5745785">]</span><span class="builtintype" id="5745786">byte</span><span class="op" id="5745790">,</span>&nbsp;<span class="builtintype" id="5745792">error</span><span class="op" id="5745797">)</span>&nbsp;<span class="op" id="5745799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5745802">r</span>&nbsp;<span class="op" id="5745804">:=</span>&nbsp;<span class="op" id="5745807">&amp;</span><span class="ident" id="5745808">importReader</span><span class="op" id="5745820">{</span><span class="ident" id="5745821">b</span><span class="op" id="5745822">:</span>&nbsp;<span class="ident" id="5745824">bufio</span><span class="op" id="5745829">.</span><span class="ident" id="5745830">NewReader</span><span class="op" id="5745839">(</span><span class="ident" id="5745840">f</span><span class="op" id="5745841">)</span><span class="op" id="5745842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5745845">r</span><span class="op" id="5745846">.</span><span class="ident" id="5745847">peekByte</span><span class="op" id="5745855">(</span><span class="builtintype" id="5745856">true</span><span class="op" id="5745860">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5745863">if</span>&nbsp;<span class="ident" id="5745866">r</span><span class="op" id="5745867">.</span><span class="ident" id="5745868">err</span>&nbsp;<span class="op" id="5745872">==</span>&nbsp;<span class="ident" id="5745875">nil</span>&nbsp;<span class="op" id="5745879">&amp;&amp;</span>&nbsp;<span class="op" id="5745882">!</span><span class="ident" id="5745883">r</span><span class="op" id="5745884">.</span><span class="ident" id="5745885">eof</span>&nbsp;<span class="op" id="5745889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5745893">//&nbsp;Didn&#39;t&nbsp;reach&nbsp;EOF,&nbsp;so&nbsp;must&nbsp;have&nbsp;found&nbsp;a&nbsp;non-space&nbsp;byte.&nbsp;Remove&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5745964">r</span><span class="op" id="5745965">.</span><span class="ident" id="5745966">buf</span>&nbsp;<span class="op" id="5745970">=</span>&nbsp;<span class="ident" id="5745972">r</span><span class="op" id="5745973">.</span><span class="ident" id="5745974">buf</span><span class="op" id="5745977">[</span><span class="op" id="5745978">:</span><span class="builtinfunc" id="5745979">len</span><span class="op" id="5745982">(</span><span class="ident" id="5745983">r</span><span class="op" id="5745984">.</span><span class="ident" id="5745985">buf</span><span class="op" id="5745988">)</span><span class="op" id="5745989">-</span><span class="num" id="5745990">1</span><span class="op" id="5745991">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5745994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5745997">return</span>&nbsp;<span class="ident" id="5746004">r</span><span class="op" id="5746005">.</span><span class="ident" id="5746006">buf</span><span class="op" id="5746009">,</span>&nbsp;<span class="ident" id="5746011">r</span><span class="op" id="5746012">.</span><span class="ident" id="5746013">err</span><br>
<span class="lineno">200</span><span class="op" id="5746017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5746020">//&nbsp;readImports&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;expects&nbsp;a&nbsp;Go&nbsp;file&nbsp;as&nbsp;input</span><br>
<span class="lineno"></span><span class="comment" id="5746101">//&nbsp;and&nbsp;stops&nbsp;reading&nbsp;the&nbsp;input&nbsp;once&nbsp;the&nbsp;imports&nbsp;have&nbsp;completed.</span><br>
<span class="lineno"></span><span class="keyword" id="5746165">func</span>&nbsp;<span class="ident" id="5746170">readImports</span><span class="op" id="5746181">(</span><span class="ident" id="5746182">f</span>&nbsp;<span class="ident" id="5746184">io</span><span class="op" id="5746186">.</span><span class="ident" id="5746187">Reader</span><span class="op" id="5746193">,</span>&nbsp;<span class="ident" id="5746195">reportSyntaxError</span>&nbsp;<span class="builtintype" id="5746213">bool</span><span class="op" id="5746217">)</span>&nbsp;<span class="op" id="5746219">(</span><span class="op" id="5746220">[</span><span class="op" id="5746221">]</span><span class="builtintype" id="5746222">byte</span><span class="op" id="5746226">,</span>&nbsp;<span class="builtintype" id="5746228">error</span><span class="op" id="5746233">)</span>&nbsp;<span class="op" id="5746235">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5746238">r</span>&nbsp;<span class="op" id="5746240">:=</span>&nbsp;<span class="op" id="5746243">&amp;</span><span class="ident" id="5746244">importReader</span><span class="op" id="5746256">{</span><span class="ident" id="5746257">b</span><span class="op" id="5746258">:</span>&nbsp;<span class="ident" id="5746260">bufio</span><span class="op" id="5746265">.</span><span class="ident" id="5746266">NewReader</span><span class="op" id="5746275">(</span><span class="ident" id="5746276">f</span><span class="op" id="5746277">)</span><span class="op" id="5746278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5746282">r</span><span class="op" id="5746283">.</span><span class="ident" id="5746284">readKeyword</span><span class="op" id="5746295">(</span><span class="string" id="5746296">&#34;package&#34;</span><span class="op" id="5746305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5746308">r</span><span class="op" id="5746309">.</span><span class="ident" id="5746310">readIdent</span><span class="op" id="5746319">(</span><span class="op" id="5746320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5746323">for</span>&nbsp;<span class="ident" id="5746327">r</span><span class="op" id="5746328">.</span><span class="ident" id="5746329">peekByte</span><span class="op" id="5746337">(</span><span class="builtintype" id="5746338">true</span><span class="op" id="5746342">)</span>&nbsp;<span class="op" id="5746344">==</span>&nbsp;<span class="string" id="5746347">&#39;i&#39;</span>&nbsp;<span class="op" id="5746351">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5746355">r</span><span class="op" id="5746356">.</span><span class="ident" id="5746357">readKeyword</span><span class="op" id="5746368">(</span><span class="string" id="5746369">&#34;import&#34;</span><span class="op" id="5746377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5746381">if</span>&nbsp;<span class="ident" id="5746384">r</span><span class="op" id="5746385">.</span><span class="ident" id="5746386">peekByte</span><span class="op" id="5746394">(</span><span class="builtintype" id="5746395">true</span><span class="op" id="5746399">)</span>&nbsp;<span class="op" id="5746401">==</span>&nbsp;<span class="string" id="5746404">&#39;(&#39;</span>&nbsp;<span class="op" id="5746408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5746413">r</span><span class="op" id="5746414">.</span><span class="ident" id="5746415">nextByte</span><span class="op" id="5746423">(</span><span class="builtintype" id="5746424">false</span><span class="op" id="5746429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5746434">for</span>&nbsp;<span class="ident" id="5746438">r</span><span class="op" id="5746439">.</span><span class="ident" id="5746440">peekByte</span><span class="op" id="5746448">(</span><span class="builtintype" id="5746449">true</span><span class="op" id="5746453">)</span>&nbsp;<span class="op" id="5746455">!=</span>&nbsp;<span class="string" id="5746458">&#39;)&#39;</span>&nbsp;<span class="op" id="5746462">&amp;&amp;</span>&nbsp;<span class="ident" id="5746465">r</span><span class="op" id="5746466">.</span><span class="ident" id="5746467">err</span>&nbsp;<span class="op" id="5746471">==</span>&nbsp;<span class="ident" id="5746474">nil</span>&nbsp;<span class="op" id="5746478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5746484">r</span><span class="op" id="5746485">.</span><span class="ident" id="5746486">readImport</span><span class="op" id="5746496">(</span><span class="op" id="5746497">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5746502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5746507">r</span><span class="op" id="5746508">.</span><span class="ident" id="5746509">nextByte</span><span class="op" id="5746517">(</span><span class="builtintype" id="5746518">false</span><span class="op" id="5746523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5746527">}</span>&nbsp;<span class="keyword" id="5746529">else</span>&nbsp;<span class="op" id="5746534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5746539">r</span><span class="op" id="5746540">.</span><span class="ident" id="5746541">readImport</span><span class="op" id="5746551">(</span><span class="op" id="5746552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5746556">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5746559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5746563">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;successfully&nbsp;before&nbsp;EOF,&nbsp;we&nbsp;read&nbsp;a&nbsp;byte&nbsp;that&nbsp;told&nbsp;us&nbsp;we&nbsp;were&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5746648">//&nbsp;Return&nbsp;all&nbsp;but&nbsp;that&nbsp;last&nbsp;byte,&nbsp;which&nbsp;would&nbsp;cause&nbsp;a&nbsp;syntax&nbsp;error&nbsp;if&nbsp;we&nbsp;let&nbsp;it&nbsp;through.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5746738">if</span>&nbsp;<span class="ident" id="5746741">r</span><span class="op" id="5746742">.</span><span class="ident" id="5746743">err</span>&nbsp;<span class="op" id="5746747">==</span>&nbsp;<span class="ident" id="5746750">nil</span>&nbsp;<span class="op" id="5746754">&amp;&amp;</span>&nbsp;<span class="op" id="5746757">!</span><span class="ident" id="5746758">r</span><span class="op" id="5746759">.</span><span class="ident" id="5746760">eof</span>&nbsp;<span class="op" id="5746764">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5746768">return</span>&nbsp;<span class="ident" id="5746775">r</span><span class="op" id="5746776">.</span><span class="ident" id="5746777">buf</span><span class="op" id="5746780">[</span><span class="op" id="5746781">:</span><span class="builtinfunc" id="5746782">len</span><span class="op" id="5746785">(</span><span class="ident" id="5746786">r</span><span class="op" id="5746787">.</span><span class="ident" id="5746788">buf</span><span class="op" id="5746791">)</span><span class="op" id="5746792">-</span><span class="num" id="5746793">1</span><span class="op" id="5746794">]</span><span class="op" id="5746795">,</span>&nbsp;<span class="ident" id="5746797">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5746802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5746806">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;for&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;consume&nbsp;the&nbsp;whole&nbsp;file&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5746875">//&nbsp;we&nbsp;are&nbsp;sure&nbsp;we&nbsp;don&#39;t&nbsp;change&nbsp;the&nbsp;errors&nbsp;that&nbsp;go/parser&nbsp;returns.</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5746942">if</span>&nbsp;<span class="ident" id="5746945">r</span><span class="op" id="5746946">.</span><span class="ident" id="5746947">err</span>&nbsp;<span class="op" id="5746951">==</span>&nbsp;<span class="ident" id="5746954">errSyntax</span>&nbsp;<span class="op" id="5746964">&amp;&amp;</span>&nbsp;<span class="op" id="5746967">!</span><span class="ident" id="5746968">reportSyntaxError</span>&nbsp;<span class="op" id="5746986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5746990">r</span><span class="op" id="5746991">.</span><span class="ident" id="5746992">err</span>&nbsp;<span class="op" id="5746996">=</span>&nbsp;<span class="ident" id="5746998">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5747004">for</span>&nbsp;<span class="ident" id="5747008">r</span><span class="op" id="5747009">.</span><span class="ident" id="5747010">err</span>&nbsp;<span class="op" id="5747014">==</span>&nbsp;<span class="ident" id="5747017">nil</span>&nbsp;<span class="op" id="5747021">&amp;&amp;</span>&nbsp;<span class="op" id="5747024">!</span><span class="ident" id="5747025">r</span><span class="op" id="5747026">.</span><span class="ident" id="5747027">eof</span>&nbsp;<span class="op" id="5747031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5747036">r</span><span class="op" id="5747037">.</span><span class="ident" id="5747038">readByte</span><span class="op" id="5747046">(</span><span class="op" id="5747047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5747051">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5747054">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5747058">return</span>&nbsp;<span class="ident" id="5747065">r</span><span class="op" id="5747066">.</span><span class="ident" id="5747067">buf</span><span class="op" id="5747070">,</span>&nbsp;<span class="ident" id="5747072">r</span><span class="op" id="5747073">.</span><span class="ident" id="5747074">err</span><br>
<span class="lineno"></span><span class="op" id="5747078">}</span>
</div>
</body>
</html>
