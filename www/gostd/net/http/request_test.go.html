<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html" class="current">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="455558">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="455613">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="455667">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="455718">package</span>&nbsp;<span class="ident" id="455726">http_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="455737">import</span>&nbsp;<span class="op" id="455744">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="455747">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="455756">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="455765">&#34;encoding/base64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="455784">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="455791">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="455797">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="455810">&#34;mime/multipart&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="455828">.</span>&nbsp;<span class="string" id="455830">&#34;net/http&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="455842">&#34;net/http/httptest&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="455863">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="455874">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="455880">&#34;reflect&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="455891">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="455901">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="455912">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="455922">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="455925">func</span>&nbsp;<span class="ident" id="455930">TestQuery</span><span class="op" id="455939">(</span><span class="ident" id="455940">t</span>&nbsp;<span class="op" id="455942">*</span><span class="ident" id="455943"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="455950">.</span><span class="ident" id="455951"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="455952">)</span>&nbsp;<span class="op" id="455954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="455957">req</span>&nbsp;<span class="op" id="455961">:=</span>&nbsp;<span class="op" id="455964">&amp;</span><span class="ident" id="455965"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="455972">{</span><span class="ident" id="455973"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="455979">:</span>&nbsp;<span class="string" id="455981">&#34;GET&#34;</span><span class="op" id="455986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="455989"><a href="/gostd/net/http/request_test.go.html#455957">req</a></span><span class="op" id="455992">.</span><span class="ident" id="455993"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="455996">,</span>&nbsp;<span class="ident" id="455998">_</span>&nbsp;<span class="op" id="456000">=</span>&nbsp;<span class="ident" id="456002"><a href="/gostd/net/http/request_test.go.html#455863">url</a></span><span class="op" id="456005">.</span><span class="ident" id="456006"><a href="/gostd/net/url/url.go.html#3754169">Parse</a></span><span class="op" id="456011">(</span><span class="string" id="456012">&#34;http://www.google.com/search?q=foo&amp;q=bar&#34;</span><span class="op" id="456054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="456057">if</span>&nbsp;<span class="ident" id="456060">q</span>&nbsp;<span class="op" id="456062">:=</span>&nbsp;<span class="ident" id="456065"><a href="/gostd/net/http/request_test.go.html#455957">req</a></span><span class="op" id="456068">.</span><span class="ident" id="456069"><a href="/gostd/net/http/request.go.html#4159257">FormValue</a></span><span class="op" id="456078">(</span><span class="string" id="456079">&#34;q&#34;</span><span class="op" id="456082">)</span><span class="op" id="456083">;</span>&nbsp;<span class="ident" id="456085"><a href="/gostd/net/http/request_test.go.html#456060">q</a></span>&nbsp;<span class="op" id="456087">!=</span>&nbsp;<span class="string" id="456090">&#34;foo&#34;</span>&nbsp;<span class="op" id="456096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="456100"><a href="/gostd/net/http/request_test.go.html#455940">t</a></span><span class="op" id="456101">.</span><span class="ident" id="456102"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="456108">(</span><span class="string" id="456109">`req.FormValue(&#34;q&#34;)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;&#34;foo&#34;`</span><span class="op" id="456146">,</span>&nbsp;<span class="ident" id="456148"><a href="/gostd/net/http/request_test.go.html#456060">q</a></span><span class="op" id="456149">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="456152">}</span><br>
<span class="lineno"></span><span class="op" id="456154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="456157">func</span>&nbsp;<span class="ident" id="456162">TestPostQuery</span><span class="op" id="456175">(</span><span class="ident" id="456176">t</span>&nbsp;<span class="op" id="456178">*</span><span class="ident" id="456179"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="456186">.</span><span class="ident" id="456187"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="456188">)</span>&nbsp;<span class="op" id="456190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="456193">req</span><span class="op" id="456196">,</span>&nbsp;<span class="ident" id="456198">_</span>&nbsp;<span class="op" id="456200">:=</span>&nbsp;<span class="ident" id="456203"><a href="/gostd/net/http/request.go.html#4149529">NewRequest</a></span><span class="op" id="456213">(</span><span class="string" id="456214">&#34;POST&#34;</span><span class="op" id="456220">,</span>&nbsp;<span class="string" id="456222">&#34;http://www.google.com/search?q=foo&amp;q=bar&amp;both=x&amp;prio=1&amp;empty=not&#34;</span><span class="op" id="456288">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="456292"><a href="/gostd/net/http/request_test.go.html#455901">strings</a></span><span class="op" id="456299">.</span><span class="ident" id="456300"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="456309">(</span><span class="string" id="456310">&#34;z=post&amp;both=y&amp;prio=2&amp;empty=&#34;</span><span class="op" id="456339">)</span><span class="op" id="456340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="456343"><a href="/gostd/net/http/request_test.go.html#456193">req</a></span><span class="op" id="456346">.</span><span class="ident" id="456347"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="456353">.</span><span class="ident" id="456354"><a href="/gostd/net/http/header.go.html#4126491">Set</a></span><span class="op" id="456357">(</span><span class="string" id="456358">&#34;Content-Type&#34;</span><span class="op" id="456372">,</span>&nbsp;<span class="string" id="456374">&#34;application/x-www-form-urlencoded;&nbsp;param=value&#34;</span><span class="op" id="456422">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="456426">if</span>&nbsp;<span class="ident" id="456429">q</span>&nbsp;<span class="op" id="456431">:=</span>&nbsp;<span class="ident" id="456434"><a href="/gostd/net/http/request_test.go.html#456193">req</a></span><span class="op" id="456437">.</span><span class="ident" id="456438"><a href="/gostd/net/http/request.go.html#4159257">FormValue</a></span><span class="op" id="456447">(</span><span class="string" id="456448">&#34;q&#34;</span><span class="op" id="456451">)</span><span class="op" id="456452">;</span>&nbsp;<span class="ident" id="456454"><a href="/gostd/net/http/request_test.go.html#456429">q</a></span>&nbsp;<span class="op" id="456456">!=</span>&nbsp;<span class="string" id="456459">&#34;foo&#34;</span>&nbsp;<span class="op" id="456465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="456469"><a href="/gostd/net/http/request_test.go.html#456176">t</a></span><span class="op" id="456470">.</span><span class="ident" id="456471"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="456477">(</span><span class="string" id="456478">`req.FormValue(&#34;q&#34;)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;&#34;foo&#34;`</span><span class="op" id="456515">,</span>&nbsp;<span class="ident" id="456517"><a href="/gostd/net/http/request_test.go.html#456429">q</a></span><span class="op" id="456518">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="456521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="456524">if</span>&nbsp;<span class="ident" id="456527">z</span>&nbsp;<span class="op" id="456529">:=</span>&nbsp;<span class="ident" id="456532"><a href="/gostd/net/http/request_test.go.html#456193">req</a></span><span class="op" id="456535">.</span><span class="ident" id="456536"><a href="/gostd/net/http/request.go.html#4159257">FormValue</a></span><span class="op" id="456545">(</span><span class="string" id="456546">&#34;z&#34;</span><span class="op" id="456549">)</span><span class="op" id="456550">;</span>&nbsp;<span class="ident" id="456552"><a href="/gostd/net/http/request_test.go.html#456527">z</a></span>&nbsp;<span class="op" id="456554">!=</span>&nbsp;<span class="string" id="456557">&#34;post&#34;</span>&nbsp;<span class="op" id="456564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="456568"><a href="/gostd/net/http/request_test.go.html#456176">t</a></span><span class="op" id="456569">.</span><span class="ident" id="456570"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="456576">(</span><span class="string" id="456577">`req.FormValue(&#34;z&#34;)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;&#34;post&#34;`</span><span class="op" id="456615">,</span>&nbsp;<span class="ident" id="456617"><a href="/gostd/net/http/request_test.go.html#456527">z</a></span><span class="op" id="456618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="456621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="456624">if</span>&nbsp;<span class="ident" id="456627">bq</span><span class="op" id="456629">,</span>&nbsp;<span class="ident" id="456631">found</span>&nbsp;<span class="op" id="456637">:=</span>&nbsp;<span class="ident" id="456640"><a href="/gostd/net/http/request_test.go.html#456193">req</a></span><span class="op" id="456643">.</span><span class="ident" id="456644"><a href="/gostd/net/http/request.go.html#4139636">PostForm</a></span><span class="op" id="456652">[</span><span class="string" id="456653">&#34;q&#34;</span><span class="op" id="456656">]</span><span class="op" id="456657">;</span>&nbsp;<span class="ident" id="456659"><a href="/gostd/net/http/request_test.go.html#456631">found</a></span>&nbsp;<span class="op" id="456665">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="456669"><a href="/gostd/net/http/request_test.go.html#456176">t</a></span><span class="op" id="456670">.</span><span class="ident" id="456671"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="456677">(</span><span class="string" id="456678">`req.PostForm[&#34;q&#34;]&nbsp;=&nbsp;%q,&nbsp;want&nbsp;no&nbsp;entry&nbsp;in&nbsp;map`</span><span class="op" id="456724">,</span>&nbsp;<span class="ident" id="456726"><a href="/gostd/net/http/request_test.go.html#456627">bq</a></span><span class="op" id="456728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="456731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="456734">if</span>&nbsp;<span class="ident" id="456737">bz</span>&nbsp;<span class="op" id="456740">:=</span>&nbsp;<span class="ident" id="456743"><a href="/gostd/net/http/request_test.go.html#456193">req</a></span><span class="op" id="456746">.</span><span class="ident" id="456747"><a href="/gostd/net/http/request.go.html#4159698">PostFormValue</a></span><span class="op" id="456760">(</span><span class="string" id="456761">&#34;z&#34;</span><span class="op" id="456764">)</span><span class="op" id="456765">;</span>&nbsp;<span class="ident" id="456767"><a href="/gostd/net/http/request_test.go.html#456737">bz</a></span>&nbsp;<span class="op" id="456770">!=</span>&nbsp;<span class="string" id="456773">&#34;post&#34;</span>&nbsp;<span class="op" id="456780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="456784"><a href="/gostd/net/http/request_test.go.html#456176">t</a></span><span class="op" id="456785">.</span><span class="ident" id="456786"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="456792">(</span><span class="string" id="456793">`req.PostFormValue(&#34;z&#34;)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;&#34;post&#34;`</span><span class="op" id="456835">,</span>&nbsp;<span class="ident" id="456837"><a href="/gostd/net/http/request_test.go.html#456737">bz</a></span><span class="op" id="456839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="456842">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="456845">if</span>&nbsp;<span class="ident" id="456848">qs</span>&nbsp;<span class="op" id="456851">:=</span>&nbsp;<span class="ident" id="456854"><a href="/gostd/net/http/request_test.go.html#456193">req</a></span><span class="op" id="456857">.</span><span class="ident" id="456858"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span><span class="op" id="456862">[</span><span class="string" id="456863">&#34;q&#34;</span><span class="op" id="456866">]</span><span class="op" id="456867">;</span>&nbsp;<span class="op" id="456869">!</span><span class="ident" id="456870"><a href="/gostd/net/http/request_test.go.html#455880">reflect</a></span><span class="op" id="456877">.</span><span class="ident" id="456878"><a href="/gostd/reflect/deepequal.go.html#2775472">DeepEqual</a></span><span class="op" id="456887">(</span><span class="ident" id="456888"><a href="/gostd/net/http/request_test.go.html#456848">qs</a></span><span class="op" id="456890">,</span>&nbsp;<span class="op" id="456892">[</span><span class="op" id="456893">]</span><span class="builtintype" id="456894">string</span><span class="op" id="456900">{</span><span class="string" id="456901">&#34;foo&#34;</span><span class="op" id="456906">,</span>&nbsp;<span class="string" id="456908">&#34;bar&#34;</span><span class="op" id="456913">}</span><span class="op" id="456914">)</span>&nbsp;<span class="op" id="456916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="456920"><a href="/gostd/net/http/request_test.go.html#456176">t</a></span><span class="op" id="456921">.</span><span class="ident" id="456922"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="456928">(</span><span class="string" id="456929">`req.Form[&#34;q&#34;]&nbsp;=&nbsp;%q,&nbsp;want&nbsp;[&#34;foo&#34;,&nbsp;&#34;bar&#34;]`</span><span class="op" id="456970">,</span>&nbsp;<span class="ident" id="456972"><a href="/gostd/net/http/request_test.go.html#456848">qs</a></span><span class="op" id="456974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="456977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="456980">if</span>&nbsp;<span class="ident" id="456983">both</span>&nbsp;<span class="op" id="456988">:=</span>&nbsp;<span class="ident" id="456991"><a href="/gostd/net/http/request_test.go.html#456193">req</a></span><span class="op" id="456994">.</span><span class="ident" id="456995"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span><span class="op" id="456999">[</span><span class="string" id="457000">&#34;both&#34;</span><span class="op" id="457006">]</span><span class="op" id="457007">;</span>&nbsp;<span class="op" id="457009">!</span><span class="ident" id="457010"><a href="/gostd/net/http/request_test.go.html#455880">reflect</a></span><span class="op" id="457017">.</span><span class="ident" id="457018"><a href="/gostd/reflect/deepequal.go.html#2775472">DeepEqual</a></span><span class="op" id="457027">(</span><span class="ident" id="457028"><a href="/gostd/net/http/request_test.go.html#456983">both</a></span><span class="op" id="457032">,</span>&nbsp;<span class="op" id="457034">[</span><span class="op" id="457035">]</span><span class="builtintype" id="457036">string</span><span class="op" id="457042">{</span><span class="string" id="457043">&#34;y&#34;</span><span class="op" id="457046">,</span>&nbsp;<span class="string" id="457048">&#34;x&#34;</span><span class="op" id="457051">}</span><span class="op" id="457052">)</span>&nbsp;<span class="op" id="457054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="457058"><a href="/gostd/net/http/request_test.go.html#456176">t</a></span><span class="op" id="457059">.</span><span class="ident" id="457060"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="457066">(</span><span class="string" id="457067">`req.Form[&#34;both&#34;]&nbsp;=&nbsp;%q,&nbsp;want&nbsp;[&#34;y&#34;,&nbsp;&#34;x&#34;]`</span><span class="op" id="457107">,</span>&nbsp;<span class="ident" id="457109"><a href="/gostd/net/http/request_test.go.html#456983">both</a></span><span class="op" id="457113">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="457116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="457119">if</span>&nbsp;<span class="ident" id="457122">prio</span>&nbsp;<span class="op" id="457127">:=</span>&nbsp;<span class="ident" id="457130"><a href="/gostd/net/http/request_test.go.html#456193">req</a></span><span class="op" id="457133">.</span><span class="ident" id="457134"><a href="/gostd/net/http/request.go.html#4159257">FormValue</a></span><span class="op" id="457143">(</span><span class="string" id="457144">&#34;prio&#34;</span><span class="op" id="457150">)</span><span class="op" id="457151">;</span>&nbsp;<span class="ident" id="457153"><a href="/gostd/net/http/request_test.go.html#457122">prio</a></span>&nbsp;<span class="op" id="457158">!=</span>&nbsp;<span class="string" id="457161">&#34;2&#34;</span>&nbsp;<span class="op" id="457165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="457169"><a href="/gostd/net/http/request_test.go.html#456176">t</a></span><span class="op" id="457170">.</span><span class="ident" id="457171"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="457177">(</span><span class="string" id="457178">`req.FormValue(&#34;prio&#34;)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;&#34;2&#34;&nbsp;(from&nbsp;body)`</span><span class="op" id="457228">,</span>&nbsp;<span class="ident" id="457230"><a href="/gostd/net/http/request_test.go.html#457122">prio</a></span><span class="op" id="457234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="457237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="457240">if</span>&nbsp;<span class="ident" id="457243">empty</span>&nbsp;<span class="op" id="457249">:=</span>&nbsp;<span class="ident" id="457252"><a href="/gostd/net/http/request_test.go.html#456193">req</a></span><span class="op" id="457255">.</span><span class="ident" id="457256"><a href="/gostd/net/http/request.go.html#4159257">FormValue</a></span><span class="op" id="457265">(</span><span class="string" id="457266">&#34;empty&#34;</span><span class="op" id="457273">)</span><span class="op" id="457274">;</span>&nbsp;<span class="ident" id="457276"><a href="/gostd/net/http/request_test.go.html#457243">empty</a></span>&nbsp;<span class="op" id="457282">!=</span>&nbsp;<span class="string" id="457285">&#34;&#34;</span>&nbsp;<span class="op" id="457288">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="457292"><a href="/gostd/net/http/request_test.go.html#456176">t</a></span><span class="op" id="457293">.</span><span class="ident" id="457294"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="457300">(</span><span class="string" id="457301">`req.FormValue(&#34;empty&#34;)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;&#34;&#34;&nbsp;(from&nbsp;body)`</span><span class="op" id="457351">,</span>&nbsp;<span class="ident" id="457353"><a href="/gostd/net/http/request_test.go.html#457243">empty</a></span><span class="op" id="457358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="457361">}</span><br>
<span class="lineno"></span><span class="op" id="457363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="457366">func</span>&nbsp;<span class="ident" id="457371">TestPatchQuery</span><span class="op" id="457385">(</span><span class="ident" id="457386">t</span>&nbsp;<span class="op" id="457388">*</span><span class="ident" id="457389"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="457396">.</span><span class="ident" id="457397"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="457398">)</span>&nbsp;<span class="op" id="457400">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="457403">req</span><span class="op" id="457406">,</span>&nbsp;<span class="ident" id="457408">_</span>&nbsp;<span class="op" id="457410">:=</span>&nbsp;<span class="ident" id="457413"><a href="/gostd/net/http/request.go.html#4149529">NewRequest</a></span><span class="op" id="457423">(</span><span class="string" id="457424">&#34;PATCH&#34;</span><span class="op" id="457431">,</span>&nbsp;<span class="string" id="457433">&#34;http://www.google.com/search?q=foo&amp;q=bar&amp;both=x&amp;prio=1&amp;empty=not&#34;</span><span class="op" id="457499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="457503"><a href="/gostd/net/http/request_test.go.html#455901">strings</a></span><span class="op" id="457510">.</span><span class="ident" id="457511"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="457520">(</span><span class="string" id="457521">&#34;z=post&amp;both=y&amp;prio=2&amp;empty=&#34;</span><span class="op" id="457550">)</span><span class="op" id="457551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="457554"><a href="/gostd/net/http/request_test.go.html#457403">req</a></span><span class="op" id="457557">.</span><span class="ident" id="457558"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="457564">.</span><span class="ident" id="457565"><a href="/gostd/net/http/header.go.html#4126491">Set</a></span><span class="op" id="457568">(</span><span class="string" id="457569">&#34;Content-Type&#34;</span><span class="op" id="457583">,</span>&nbsp;<span class="string" id="457585">&#34;application/x-www-form-urlencoded;&nbsp;param=value&#34;</span><span class="op" id="457633">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="457637">if</span>&nbsp;<span class="ident" id="457640">q</span>&nbsp;<span class="op" id="457642">:=</span>&nbsp;<span class="ident" id="457645"><a href="/gostd/net/http/request_test.go.html#457403">req</a></span><span class="op" id="457648">.</span><span class="ident" id="457649"><a href="/gostd/net/http/request.go.html#4159257">FormValue</a></span><span class="op" id="457658">(</span><span class="string" id="457659">&#34;q&#34;</span><span class="op" id="457662">)</span><span class="op" id="457663">;</span>&nbsp;<span class="ident" id="457665"><a href="/gostd/net/http/request_test.go.html#457640">q</a></span>&nbsp;<span class="op" id="457667">!=</span>&nbsp;<span class="string" id="457670">&#34;foo&#34;</span>&nbsp;<span class="op" id="457676">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="457680"><a href="/gostd/net/http/request_test.go.html#457386">t</a></span><span class="op" id="457681">.</span><span class="ident" id="457682"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="457688">(</span><span class="string" id="457689">`req.FormValue(&#34;q&#34;)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;&#34;foo&#34;`</span><span class="op" id="457726">,</span>&nbsp;<span class="ident" id="457728"><a href="/gostd/net/http/request_test.go.html#457640">q</a></span><span class="op" id="457729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="457732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="457735">if</span>&nbsp;<span class="ident" id="457738">z</span>&nbsp;<span class="op" id="457740">:=</span>&nbsp;<span class="ident" id="457743"><a href="/gostd/net/http/request_test.go.html#457403">req</a></span><span class="op" id="457746">.</span><span class="ident" id="457747"><a href="/gostd/net/http/request.go.html#4159257">FormValue</a></span><span class="op" id="457756">(</span><span class="string" id="457757">&#34;z&#34;</span><span class="op" id="457760">)</span><span class="op" id="457761">;</span>&nbsp;<span class="ident" id="457763"><a href="/gostd/net/http/request_test.go.html#457738">z</a></span>&nbsp;<span class="op" id="457765">!=</span>&nbsp;<span class="string" id="457768">&#34;post&#34;</span>&nbsp;<span class="op" id="457775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="457779"><a href="/gostd/net/http/request_test.go.html#457386">t</a></span><span class="op" id="457780">.</span><span class="ident" id="457781"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="457787">(</span><span class="string" id="457788">`req.FormValue(&#34;z&#34;)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;&#34;post&#34;`</span><span class="op" id="457826">,</span>&nbsp;<span class="ident" id="457828"><a href="/gostd/net/http/request_test.go.html#457738">z</a></span><span class="op" id="457829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="457832">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="457835">if</span>&nbsp;<span class="ident" id="457838">bq</span><span class="op" id="457840">,</span>&nbsp;<span class="ident" id="457842">found</span>&nbsp;<span class="op" id="457848">:=</span>&nbsp;<span class="ident" id="457851"><a href="/gostd/net/http/request_test.go.html#457403">req</a></span><span class="op" id="457854">.</span><span class="ident" id="457855"><a href="/gostd/net/http/request.go.html#4139636">PostForm</a></span><span class="op" id="457863">[</span><span class="string" id="457864">&#34;q&#34;</span><span class="op" id="457867">]</span><span class="op" id="457868">;</span>&nbsp;<span class="ident" id="457870"><a href="/gostd/net/http/request_test.go.html#457842">found</a></span>&nbsp;<span class="op" id="457876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="457880"><a href="/gostd/net/http/request_test.go.html#457386">t</a></span><span class="op" id="457881">.</span><span class="ident" id="457882"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="457888">(</span><span class="string" id="457889">`req.PostForm[&#34;q&#34;]&nbsp;=&nbsp;%q,&nbsp;want&nbsp;no&nbsp;entry&nbsp;in&nbsp;map`</span><span class="op" id="457935">,</span>&nbsp;<span class="ident" id="457937"><a href="/gostd/net/http/request_test.go.html#457838">bq</a></span><span class="op" id="457939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="457942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="457945">if</span>&nbsp;<span class="ident" id="457948">bz</span>&nbsp;<span class="op" id="457951">:=</span>&nbsp;<span class="ident" id="457954"><a href="/gostd/net/http/request_test.go.html#457403">req</a></span><span class="op" id="457957">.</span><span class="ident" id="457958"><a href="/gostd/net/http/request.go.html#4159698">PostFormValue</a></span><span class="op" id="457971">(</span><span class="string" id="457972">&#34;z&#34;</span><span class="op" id="457975">)</span><span class="op" id="457976">;</span>&nbsp;<span class="ident" id="457978"><a href="/gostd/net/http/request_test.go.html#457948">bz</a></span>&nbsp;<span class="op" id="457981">!=</span>&nbsp;<span class="string" id="457984">&#34;post&#34;</span>&nbsp;<span class="op" id="457991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="457995"><a href="/gostd/net/http/request_test.go.html#457386">t</a></span><span class="op" id="457996">.</span><span class="ident" id="457997"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="458003">(</span><span class="string" id="458004">`req.PostFormValue(&#34;z&#34;)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;&#34;post&#34;`</span><span class="op" id="458046">,</span>&nbsp;<span class="ident" id="458048"><a href="/gostd/net/http/request_test.go.html#457948">bz</a></span><span class="op" id="458050">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="458053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="458056">if</span>&nbsp;<span class="ident" id="458059">qs</span>&nbsp;<span class="op" id="458062">:=</span>&nbsp;<span class="ident" id="458065"><a href="/gostd/net/http/request_test.go.html#457403">req</a></span><span class="op" id="458068">.</span><span class="ident" id="458069"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span><span class="op" id="458073">[</span><span class="string" id="458074">&#34;q&#34;</span><span class="op" id="458077">]</span><span class="op" id="458078">;</span>&nbsp;<span class="op" id="458080">!</span><span class="ident" id="458081"><a href="/gostd/net/http/request_test.go.html#455880">reflect</a></span><span class="op" id="458088">.</span><span class="ident" id="458089"><a href="/gostd/reflect/deepequal.go.html#2775472">DeepEqual</a></span><span class="op" id="458098">(</span><span class="ident" id="458099"><a href="/gostd/net/http/request_test.go.html#458059">qs</a></span><span class="op" id="458101">,</span>&nbsp;<span class="op" id="458103">[</span><span class="op" id="458104">]</span><span class="builtintype" id="458105">string</span><span class="op" id="458111">{</span><span class="string" id="458112">&#34;foo&#34;</span><span class="op" id="458117">,</span>&nbsp;<span class="string" id="458119">&#34;bar&#34;</span><span class="op" id="458124">}</span><span class="op" id="458125">)</span>&nbsp;<span class="op" id="458127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="458131"><a href="/gostd/net/http/request_test.go.html#457386">t</a></span><span class="op" id="458132">.</span><span class="ident" id="458133"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="458139">(</span><span class="string" id="458140">`req.Form[&#34;q&#34;]&nbsp;=&nbsp;%q,&nbsp;want&nbsp;[&#34;foo&#34;,&nbsp;&#34;bar&#34;]`</span><span class="op" id="458181">,</span>&nbsp;<span class="ident" id="458183"><a href="/gostd/net/http/request_test.go.html#458059">qs</a></span><span class="op" id="458185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="458188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="458191">if</span>&nbsp;<span class="ident" id="458194">both</span>&nbsp;<span class="op" id="458199">:=</span>&nbsp;<span class="ident" id="458202"><a href="/gostd/net/http/request_test.go.html#457403">req</a></span><span class="op" id="458205">.</span><span class="ident" id="458206"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span><span class="op" id="458210">[</span><span class="string" id="458211">&#34;both&#34;</span><span class="op" id="458217">]</span><span class="op" id="458218">;</span>&nbsp;<span class="op" id="458220">!</span><span class="ident" id="458221"><a href="/gostd/net/http/request_test.go.html#455880">reflect</a></span><span class="op" id="458228">.</span><span class="ident" id="458229"><a href="/gostd/reflect/deepequal.go.html#2775472">DeepEqual</a></span><span class="op" id="458238">(</span><span class="ident" id="458239"><a href="/gostd/net/http/request_test.go.html#458194">both</a></span><span class="op" id="458243">,</span>&nbsp;<span class="op" id="458245">[</span><span class="op" id="458246">]</span><span class="builtintype" id="458247">string</span><span class="op" id="458253">{</span><span class="string" id="458254">&#34;y&#34;</span><span class="op" id="458257">,</span>&nbsp;<span class="string" id="458259">&#34;x&#34;</span><span class="op" id="458262">}</span><span class="op" id="458263">)</span>&nbsp;<span class="op" id="458265">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="458269"><a href="/gostd/net/http/request_test.go.html#457386">t</a></span><span class="op" id="458270">.</span><span class="ident" id="458271"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="458277">(</span><span class="string" id="458278">`req.Form[&#34;both&#34;]&nbsp;=&nbsp;%q,&nbsp;want&nbsp;[&#34;y&#34;,&nbsp;&#34;x&#34;]`</span><span class="op" id="458318">,</span>&nbsp;<span class="ident" id="458320"><a href="/gostd/net/http/request_test.go.html#458194">both</a></span><span class="op" id="458324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="458327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="458330">if</span>&nbsp;<span class="ident" id="458333">prio</span>&nbsp;<span class="op" id="458338">:=</span>&nbsp;<span class="ident" id="458341"><a href="/gostd/net/http/request_test.go.html#457403">req</a></span><span class="op" id="458344">.</span><span class="ident" id="458345"><a href="/gostd/net/http/request.go.html#4159257">FormValue</a></span><span class="op" id="458354">(</span><span class="string" id="458355">&#34;prio&#34;</span><span class="op" id="458361">)</span><span class="op" id="458362">;</span>&nbsp;<span class="ident" id="458364"><a href="/gostd/net/http/request_test.go.html#458333">prio</a></span>&nbsp;<span class="op" id="458369">!=</span>&nbsp;<span class="string" id="458372">&#34;2&#34;</span>&nbsp;<span class="op" id="458376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="458380"><a href="/gostd/net/http/request_test.go.html#457386">t</a></span><span class="op" id="458381">.</span><span class="ident" id="458382"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="458388">(</span><span class="string" id="458389">`req.FormValue(&#34;prio&#34;)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;&#34;2&#34;&nbsp;(from&nbsp;body)`</span><span class="op" id="458439">,</span>&nbsp;<span class="ident" id="458441"><a href="/gostd/net/http/request_test.go.html#458333">prio</a></span><span class="op" id="458445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="458448">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="458451">if</span>&nbsp;<span class="ident" id="458454">empty</span>&nbsp;<span class="op" id="458460">:=</span>&nbsp;<span class="ident" id="458463"><a href="/gostd/net/http/request_test.go.html#457403">req</a></span><span class="op" id="458466">.</span><span class="ident" id="458467"><a href="/gostd/net/http/request.go.html#4159257">FormValue</a></span><span class="op" id="458476">(</span><span class="string" id="458477">&#34;empty&#34;</span><span class="op" id="458484">)</span><span class="op" id="458485">;</span>&nbsp;<span class="ident" id="458487"><a href="/gostd/net/http/request_test.go.html#458454">empty</a></span>&nbsp;<span class="op" id="458493">!=</span>&nbsp;<span class="string" id="458496">&#34;&#34;</span>&nbsp;<span class="op" id="458499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="458503"><a href="/gostd/net/http/request_test.go.html#457386">t</a></span><span class="op" id="458504">.</span><span class="ident" id="458505"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="458511">(</span><span class="string" id="458512">`req.FormValue(&#34;empty&#34;)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;&#34;&#34;&nbsp;(from&nbsp;body)`</span><span class="op" id="458562">,</span>&nbsp;<span class="ident" id="458564"><a href="/gostd/net/http/request_test.go.html#458454">empty</a></span><span class="op" id="458569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="458572">}</span><br>
<span class="lineno"></span><span class="op" id="458574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="458577">type</span>&nbsp;<span class="ident" id="458582">stringMap</span>&nbsp;<span class="keyword" id="458592">map</span><span class="op" id="458595">[</span><span class="builtintype" id="458596">string</span><span class="op" id="458602">]</span><span class="op" id="458603">[</span><span class="op" id="458604">]</span><span class="builtintype" id="458605">string</span><br>
<span class="lineno"></span><span class="keyword" id="458612">type</span>&nbsp;<span class="ident" id="458617">parseContentTypeTest</span>&nbsp;<span class="keyword" id="458638">struct</span>&nbsp;<span class="op" id="458645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="458648">shouldError</span>&nbsp;<span class="builtintype" id="458660">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="458666">contentType</span>&nbsp;<span class="ident" id="458678"><a href="/gostd/net/http/request_test.go.html#458582">stringMap</a></span><br>
<span class="lineno"></span><span class="op" id="458688">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="458691">var</span>&nbsp;<span class="ident" id="458695">parseContentTypeTests</span>&nbsp;<span class="op" id="458717">=</span>&nbsp;<span class="op" id="458719">[</span><span class="op" id="458720">]</span><span class="ident" id="458721"><a href="/gostd/net/http/request_test.go.html#458617">parseContentTypeTest</a></span><span class="op" id="458741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="458744">{</span><span class="builtintype" id="458745">false</span><span class="op" id="458750">,</span>&nbsp;<span class="ident" id="458752"><a href="/gostd/net/http/request_test.go.html#458582">stringMap</a></span><span class="op" id="458761">{</span><span class="string" id="458762">&#34;Content-Type&#34;</span><span class="op" id="458776">:</span>&nbsp;<span class="op" id="458778">{</span><span class="string" id="458779">&#34;text/plain&#34;</span><span class="op" id="458791">}</span><span class="op" id="458792">}</span><span class="op" id="458793">}</span><span class="op" id="458794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="458797">//&nbsp;Empty&nbsp;content&nbsp;type&nbsp;is&nbsp;legal&nbsp;-&nbsp;shoult&nbsp;be&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="458852">//&nbsp;application/octet-stream&nbsp;(RFC&nbsp;2616,&nbsp;section&nbsp;7.2.1)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="458907">{</span><span class="builtintype" id="458908">false</span><span class="op" id="458913">,</span>&nbsp;<span class="ident" id="458915"><a href="/gostd/net/http/request_test.go.html#458582">stringMap</a></span><span class="op" id="458924">{</span><span class="op" id="458925">}</span><span class="op" id="458926">}</span><span class="op" id="458927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="458930">{</span><span class="builtintype" id="458931">true</span><span class="op" id="458935">,</span>&nbsp;<span class="ident" id="458937"><a href="/gostd/net/http/request_test.go.html#458582">stringMap</a></span><span class="op" id="458946">{</span><span class="string" id="458947">&#34;Content-Type&#34;</span><span class="op" id="458961">:</span>&nbsp;<span class="op" id="458963">{</span><span class="string" id="458964">&#34;text/plain;&nbsp;boundary=&#34;</span><span class="op" id="458987">}</span><span class="op" id="458988">}</span><span class="op" id="458989">}</span><span class="op" id="458990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="458993">{</span><span class="builtintype" id="458994">false</span><span class="op" id="458999">,</span>&nbsp;<span class="ident" id="459001"><a href="/gostd/net/http/request_test.go.html#458582">stringMap</a></span><span class="op" id="459010">{</span><span class="string" id="459011">&#34;Content-Type&#34;</span><span class="op" id="459025">:</span>&nbsp;<span class="op" id="459027">{</span><span class="string" id="459028">&#34;application/unknown&#34;</span><span class="op" id="459049">}</span><span class="op" id="459050">}</span><span class="op" id="459051">}</span><span class="op" id="459052">,</span><br>
<span class="lineno"></span><span class="op" id="459054">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="459057">func</span>&nbsp;<span class="ident" id="459062">TestParseFormUnknownContentType</span><span class="op" id="459093">(</span><span class="ident" id="459094">t</span>&nbsp;<span class="op" id="459096">*</span><span class="ident" id="459097"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="459104">.</span><span class="ident" id="459105"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="459106">)</span>&nbsp;<span class="op" id="459108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="459111">for</span>&nbsp;<span class="ident" id="459115">i</span><span class="op" id="459116">,</span>&nbsp;<span class="ident" id="459118">test</span>&nbsp;<span class="op" id="459123">:=</span>&nbsp;<span class="keyword" id="459126">range</span>&nbsp;<span class="ident" id="459132"><a href="/gostd/net/http/request_test.go.html#458695">parseContentTypeTests</a></span>&nbsp;<span class="op" id="459154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="459158">req</span>&nbsp;<span class="op" id="459162">:=</span>&nbsp;<span class="op" id="459165">&amp;</span><span class="ident" id="459166"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="459173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="459178"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="459184">:</span>&nbsp;<span class="string" id="459186">&#34;POST&#34;</span><span class="op" id="459192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="459197"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="459203">:</span>&nbsp;<span class="ident" id="459205"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="459211">(</span><span class="ident" id="459212"><a href="/gostd/net/http/request_test.go.html#459118">test</a></span><span class="op" id="459216">.</span><span class="ident" id="459217"><a href="/gostd/net/http/request_test.go.html#458666">contentType</a></span><span class="op" id="459228">)</span><span class="op" id="459229">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="459234"><a href="/gostd/net/http/request.go.html#4137997">Body</a></span><span class="op" id="459238">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="459242"><a href="/gostd/net/http/request_test.go.html#455797">ioutil</a></span><span class="op" id="459248">.</span><span class="ident" id="459249"><a href="/gostd/io/ioutil/ioutil.go.html#3767601">NopCloser</a></span><span class="op" id="459258">(</span><span class="ident" id="459259"><a href="/gostd/net/http/request_test.go.html#455901">strings</a></span><span class="op" id="459266">.</span><span class="ident" id="459267"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="459276">(</span><span class="string" id="459277">&#34;body&#34;</span><span class="op" id="459283">)</span><span class="op" id="459284">)</span><span class="op" id="459285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="459289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="459293">err</span>&nbsp;<span class="op" id="459297">:=</span>&nbsp;<span class="ident" id="459300"><a href="/gostd/net/http/request_test.go.html#459158">req</a></span><span class="op" id="459303">.</span><span class="ident" id="459304"><a href="/gostd/net/http/request.go.html#4157283">ParseForm</a></span><span class="op" id="459313">(</span><span class="op" id="459314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="459318">switch</span>&nbsp;<span class="op" id="459325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="459329">case</span>&nbsp;<span class="ident" id="459334"><a href="/gostd/net/http/request_test.go.html#459293">err</a></span>&nbsp;<span class="op" id="459338">==</span>&nbsp;<span class="builtintype" id="459341">nil</span>&nbsp;<span class="op" id="459345">&amp;&amp;</span>&nbsp;<span class="ident" id="459348"><a href="/gostd/net/http/request_test.go.html#459118">test</a></span><span class="op" id="459352">.</span><span class="ident" id="459353"><a href="/gostd/net/http/request_test.go.html#458648">shouldError</a></span><span class="op" id="459364">:</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="459369"><a href="/gostd/net/http/request_test.go.html#459094">t</a></span><span class="op" id="459370">.</span><span class="ident" id="459371"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="459377">(</span><span class="string" id="459378">&#34;test&nbsp;%d&nbsp;should&nbsp;have&nbsp;returned&nbsp;error&#34;</span><span class="op" id="459414">,</span>&nbsp;<span class="ident" id="459416"><a href="/gostd/net/http/request_test.go.html#459115">i</a></span><span class="op" id="459417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="459421">case</span>&nbsp;<span class="ident" id="459426"><a href="/gostd/net/http/request_test.go.html#459293">err</a></span>&nbsp;<span class="op" id="459430">!=</span>&nbsp;<span class="builtintype" id="459433">nil</span>&nbsp;<span class="op" id="459437">&amp;&amp;</span>&nbsp;<span class="op" id="459440">!</span><span class="ident" id="459441"><a href="/gostd/net/http/request_test.go.html#459118">test</a></span><span class="op" id="459445">.</span><span class="ident" id="459446"><a href="/gostd/net/http/request_test.go.html#458648">shouldError</a></span><span class="op" id="459457">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="459462"><a href="/gostd/net/http/request_test.go.html#459094">t</a></span><span class="op" id="459463">.</span><span class="ident" id="459464"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="459470">(</span><span class="string" id="459471">&#34;test&nbsp;%d&nbsp;should&nbsp;not&nbsp;have&nbsp;returned&nbsp;error,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="459519">,</span>&nbsp;<span class="ident" id="459521"><a href="/gostd/net/http/request_test.go.html#459115">i</a></span><span class="op" id="459522">,</span>&nbsp;<span class="ident" id="459524"><a href="/gostd/net/http/request_test.go.html#459293">err</a></span><span class="op" id="459527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="459531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="459534">}</span><br>
<span class="lineno">125</span><span class="op" id="459536">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="459539">func</span>&nbsp;<span class="ident" id="459544">TestParseFormInitializeOnError</span><span class="op" id="459574">(</span><span class="ident" id="459575">t</span>&nbsp;<span class="op" id="459577">*</span><span class="ident" id="459578"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="459585">.</span><span class="ident" id="459586"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="459587">)</span>&nbsp;<span class="op" id="459589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="459592">nilBody</span><span class="op" id="459599">,</span>&nbsp;<span class="ident" id="459601">_</span>&nbsp;<span class="op" id="459603">:=</span>&nbsp;<span class="ident" id="459606"><a href="/gostd/net/http/request.go.html#4149529">NewRequest</a></span><span class="op" id="459616">(</span><span class="string" id="459617">&#34;POST&#34;</span><span class="op" id="459623">,</span>&nbsp;<span class="string" id="459625">&#34;http://www.google.com/search?q=foo&#34;</span><span class="op" id="459661">,</span>&nbsp;<span class="builtintype" id="459663">nil</span><span class="op" id="459666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="459669">tests</span>&nbsp;<span class="op" id="459675">:=</span>&nbsp;<span class="op" id="459678">[</span><span class="op" id="459679">]</span><span class="op" id="459680">*</span><span class="ident" id="459681"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="459688">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="459692"><a href="/gostd/net/http/request_test.go.html#459592">nilBody</a></span><span class="op" id="459699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="459703">{</span><span class="ident" id="459704"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="459710">:</span>&nbsp;<span class="string" id="459712">&#34;GET&#34;</span><span class="op" id="459717">,</span>&nbsp;<span class="ident" id="459719"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="459722">:</span>&nbsp;<span class="builtintype" id="459724">nil</span><span class="op" id="459727">}</span><span class="op" id="459728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="459731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="459734">for</span>&nbsp;<span class="ident" id="459738">i</span><span class="op" id="459739">,</span>&nbsp;<span class="ident" id="459741">req</span>&nbsp;<span class="op" id="459745">:=</span>&nbsp;<span class="keyword" id="459748">range</span>&nbsp;<span class="ident" id="459754"><a href="/gostd/net/http/request_test.go.html#459669">tests</a></span>&nbsp;<span class="op" id="459760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="459764">err</span>&nbsp;<span class="op" id="459768">:=</span>&nbsp;<span class="ident" id="459771"><a href="/gostd/net/http/request_test.go.html#459741">req</a></span><span class="op" id="459774">.</span><span class="ident" id="459775"><a href="/gostd/net/http/request.go.html#4157283">ParseForm</a></span><span class="op" id="459784">(</span><span class="op" id="459785">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="459789">if</span>&nbsp;<span class="ident" id="459792"><a href="/gostd/net/http/request_test.go.html#459741">req</a></span><span class="op" id="459795">.</span><span class="ident" id="459796"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span>&nbsp;<span class="op" id="459801">==</span>&nbsp;<span class="builtintype" id="459804">nil</span>&nbsp;<span class="op" id="459808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="459813"><a href="/gostd/net/http/request_test.go.html#459575">t</a></span><span class="op" id="459814">.</span><span class="ident" id="459815"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="459821">(</span><span class="string" id="459822">&#34;%d.&nbsp;Form&nbsp;not&nbsp;initialized,&nbsp;error&nbsp;%v&#34;</span><span class="op" id="459858">,</span>&nbsp;<span class="ident" id="459860"><a href="/gostd/net/http/request_test.go.html#459738">i</a></span><span class="op" id="459861">,</span>&nbsp;<span class="ident" id="459863"><a href="/gostd/net/http/request_test.go.html#459764">err</a></span><span class="op" id="459866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="459870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="459874">if</span>&nbsp;<span class="ident" id="459877"><a href="/gostd/net/http/request_test.go.html#459741">req</a></span><span class="op" id="459880">.</span><span class="ident" id="459881"><a href="/gostd/net/http/request.go.html#4139636">PostForm</a></span>&nbsp;<span class="op" id="459890">==</span>&nbsp;<span class="builtintype" id="459893">nil</span>&nbsp;<span class="op" id="459897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="459902"><a href="/gostd/net/http/request_test.go.html#459575">t</a></span><span class="op" id="459903">.</span><span class="ident" id="459904"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="459910">(</span><span class="string" id="459911">&#34;%d.&nbsp;PostForm&nbsp;not&nbsp;initialized,&nbsp;error&nbsp;%v&#34;</span><span class="op" id="459951">,</span>&nbsp;<span class="ident" id="459953"><a href="/gostd/net/http/request_test.go.html#459738">i</a></span><span class="op" id="459954">,</span>&nbsp;<span class="ident" id="459956"><a href="/gostd/net/http/request_test.go.html#459764">err</a></span><span class="op" id="459959">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="459963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="459966">}</span><br>
<span class="lineno"></span><span class="op" id="459968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="459971">func</span>&nbsp;<span class="ident" id="459976">TestMultipartReader</span><span class="op" id="459995">(</span><span class="ident" id="459996">t</span>&nbsp;<span class="op" id="459998">*</span><span class="ident" id="459999"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="460006">.</span><span class="ident" id="460007"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="460008">)</span>&nbsp;<span class="op" id="460010">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460013">req</span>&nbsp;<span class="op" id="460017">:=</span>&nbsp;<span class="op" id="460020">&amp;</span><span class="ident" id="460021"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="460028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460032"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="460038">:</span>&nbsp;<span class="string" id="460040">&#34;POST&#34;</span><span class="op" id="460046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460050"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="460056">:</span>&nbsp;<span class="ident" id="460058"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="460064">{</span><span class="string" id="460065">&#34;Content-Type&#34;</span><span class="op" id="460079">:</span>&nbsp;<span class="op" id="460081">{</span><span class="string" id="460082">`multipart/form-data;&nbsp;boundary=&#34;foo123&#34;`</span><span class="op" id="460122">}</span><span class="op" id="460123">}</span><span class="op" id="460124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460128"><a href="/gostd/net/http/request.go.html#4137997">Body</a></span><span class="op" id="460132">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="460136"><a href="/gostd/net/http/request_test.go.html#455797">ioutil</a></span><span class="op" id="460142">.</span><span class="ident" id="460143"><a href="/gostd/io/ioutil/ioutil.go.html#3767601">NopCloser</a></span><span class="op" id="460152">(</span><span class="builtinfunc" id="460153">new</span><span class="op" id="460156">(</span><span class="ident" id="460157"><a href="/gostd/net/http/request_test.go.html#455756">bytes</a></span><span class="op" id="460162">.</span><span class="ident" id="460163"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="460169">)</span><span class="op" id="460170">)</span><span class="op" id="460171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="460174">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460177">multipart</span><span class="op" id="460186">,</span>&nbsp;<span class="ident" id="460188">err</span>&nbsp;<span class="op" id="460192">:=</span>&nbsp;<span class="ident" id="460195"><a href="/gostd/net/http/request_test.go.html#460013">req</a></span><span class="op" id="460198">.</span><span class="ident" id="460199"><a href="/gostd/net/http/request.go.html#4144310">MultipartReader</a></span><span class="op" id="460214">(</span><span class="op" id="460215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="460218">if</span>&nbsp;<span class="ident" id="460221"><a href="/gostd/net/http/request_test.go.html#460177">multipart</a></span>&nbsp;<span class="op" id="460231">==</span>&nbsp;<span class="builtintype" id="460234">nil</span>&nbsp;<span class="op" id="460238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460242"><a href="/gostd/net/http/request_test.go.html#459996">t</a></span><span class="op" id="460243">.</span><span class="ident" id="460244"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="460250">(</span><span class="string" id="460251">&#34;expected&nbsp;multipart;&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="460282">,</span>&nbsp;<span class="ident" id="460284"><a href="/gostd/net/http/request_test.go.html#460188">err</a></span><span class="op" id="460287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="460290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460294"><a href="/gostd/net/http/request_test.go.html#460013">req</a></span><span class="op" id="460297">.</span><span class="ident" id="460298"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span>&nbsp;<span class="op" id="460305">=</span>&nbsp;<span class="ident" id="460307"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="460313">{</span><span class="string" id="460314">&#34;Content-Type&#34;</span><span class="op" id="460328">:</span>&nbsp;<span class="op" id="460330">{</span><span class="string" id="460331">&#34;text/plain&#34;</span><span class="op" id="460343">}</span><span class="op" id="460344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460347"><a href="/gostd/net/http/request_test.go.html#460177">multipart</a></span><span class="op" id="460356">,</span>&nbsp;<span class="ident" id="460358"><a href="/gostd/net/http/request_test.go.html#460188">err</a></span>&nbsp;<span class="op" id="460362">=</span>&nbsp;<span class="ident" id="460364"><a href="/gostd/net/http/request_test.go.html#460013">req</a></span><span class="op" id="460367">.</span><span class="ident" id="460368"><a href="/gostd/net/http/request.go.html#4144310">MultipartReader</a></span><span class="op" id="460383">(</span><span class="op" id="460384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="460387">if</span>&nbsp;<span class="ident" id="460390"><a href="/gostd/net/http/request_test.go.html#460177">multipart</a></span>&nbsp;<span class="op" id="460400">!=</span>&nbsp;<span class="builtintype" id="460403">nil</span>&nbsp;<span class="op" id="460407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460411"><a href="/gostd/net/http/request_test.go.html#459996">t</a></span><span class="op" id="460412">.</span><span class="ident" id="460413"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="460418">(</span><span class="string" id="460419">&#34;unexpected&nbsp;multipart&nbsp;for&nbsp;text/plain&#34;</span><span class="op" id="460456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="460459">}</span><br>
<span class="lineno">160</span><span class="op" id="460461">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="460464">func</span>&nbsp;<span class="ident" id="460469">TestParseMultipartForm</span><span class="op" id="460491">(</span><span class="ident" id="460492">t</span>&nbsp;<span class="op" id="460494">*</span><span class="ident" id="460495"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="460502">.</span><span class="ident" id="460503"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="460504">)</span>&nbsp;<span class="op" id="460506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460509">req</span>&nbsp;<span class="op" id="460513">:=</span>&nbsp;<span class="op" id="460516">&amp;</span><span class="ident" id="460517"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="460524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460528"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="460534">:</span>&nbsp;<span class="string" id="460536">&#34;POST&#34;</span><span class="op" id="460542">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460546"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="460552">:</span>&nbsp;<span class="ident" id="460554"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="460560">{</span><span class="string" id="460561">&#34;Content-Type&#34;</span><span class="op" id="460575">:</span>&nbsp;<span class="op" id="460577">{</span><span class="string" id="460578">`multipart/form-data;&nbsp;boundary=&#34;foo123&#34;`</span><span class="op" id="460618">}</span><span class="op" id="460619">}</span><span class="op" id="460620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460624"><a href="/gostd/net/http/request.go.html#4137997">Body</a></span><span class="op" id="460628">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="460632"><a href="/gostd/net/http/request_test.go.html#455797">ioutil</a></span><span class="op" id="460638">.</span><span class="ident" id="460639"><a href="/gostd/io/ioutil/ioutil.go.html#3767601">NopCloser</a></span><span class="op" id="460648">(</span><span class="builtinfunc" id="460649">new</span><span class="op" id="460652">(</span><span class="ident" id="460653"><a href="/gostd/net/http/request_test.go.html#455756">bytes</a></span><span class="op" id="460658">.</span><span class="ident" id="460659"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="460665">)</span><span class="op" id="460666">)</span><span class="op" id="460667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="460670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460673">err</span>&nbsp;<span class="op" id="460677">:=</span>&nbsp;<span class="ident" id="460680"><a href="/gostd/net/http/request_test.go.html#460509">req</a></span><span class="op" id="460683">.</span><span class="ident" id="460684"><a href="/gostd/net/http/request.go.html#4158338">ParseMultipartForm</a></span><span class="op" id="460702">(</span><span class="num" id="460703">25</span><span class="op" id="460705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="460708">if</span>&nbsp;<span class="ident" id="460711"><a href="/gostd/net/http/request_test.go.html#460673">err</a></span>&nbsp;<span class="op" id="460715">==</span>&nbsp;<span class="builtintype" id="460718">nil</span>&nbsp;<span class="op" id="460722">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460726"><a href="/gostd/net/http/request_test.go.html#460492">t</a></span><span class="op" id="460727">.</span><span class="ident" id="460728"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="460733">(</span><span class="string" id="460734">&#34;expected&nbsp;multipart&nbsp;EOF,&nbsp;got&nbsp;nil&#34;</span><span class="op" id="460767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="460770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460774"><a href="/gostd/net/http/request_test.go.html#460509">req</a></span><span class="op" id="460777">.</span><span class="ident" id="460778"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span>&nbsp;<span class="op" id="460785">=</span>&nbsp;<span class="ident" id="460787"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="460793">{</span><span class="string" id="460794">&#34;Content-Type&#34;</span><span class="op" id="460808">:</span>&nbsp;<span class="op" id="460810">{</span><span class="string" id="460811">&#34;text/plain&#34;</span><span class="op" id="460823">}</span><span class="op" id="460824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460827"><a href="/gostd/net/http/request_test.go.html#460673">err</a></span>&nbsp;<span class="op" id="460831">=</span>&nbsp;<span class="ident" id="460833"><a href="/gostd/net/http/request_test.go.html#460509">req</a></span><span class="op" id="460836">.</span><span class="ident" id="460837"><a href="/gostd/net/http/request.go.html#4158338">ParseMultipartForm</a></span><span class="op" id="460855">(</span><span class="num" id="460856">25</span><span class="op" id="460858">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="460861">if</span>&nbsp;<span class="ident" id="460864"><a href="/gostd/net/http/request_test.go.html#460673">err</a></span>&nbsp;<span class="op" id="460868">!=</span>&nbsp;<span class="ident" id="460871"><a href="/gostd/net/http/request.go.html#4135060">ErrNotMultipart</a></span>&nbsp;<span class="op" id="460887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460891"><a href="/gostd/net/http/request_test.go.html#460492">t</a></span><span class="op" id="460892">.</span><span class="ident" id="460893"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="460898">(</span><span class="string" id="460899">&#34;expected&nbsp;ErrNotMultipart&nbsp;for&nbsp;text/plain&#34;</span><span class="op" id="460940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="460943">}</span><br>
<span class="lineno"></span><span class="op" id="460945">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="460948">func</span>&nbsp;<span class="ident" id="460953">TestRedirect</span><span class="op" id="460965">(</span><span class="ident" id="460966">t</span>&nbsp;<span class="op" id="460968">*</span><span class="ident" id="460969"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="460976">.</span><span class="ident" id="460977"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="460978">)</span>&nbsp;<span class="op" id="460980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="460983">ts</span>&nbsp;<span class="op" id="460986">:=</span>&nbsp;<span class="ident" id="460989"><a href="/gostd/net/http/request_test.go.html#455842">httptest</a></span><span class="op" id="460997">.</span><span class="ident" id="460998"><a href="/gostd/net/http/httptest/server.go.html#6135832">NewServer</a></span><span class="op" id="461007">(</span><span class="ident" id="461008"><a href="/gostd/net/http/server.go.html#4205623">HandlerFunc</a></span><span class="op" id="461019">(</span><span class="keyword" id="461020">func</span><span class="op" id="461024">(</span><span class="ident" id="461025">w</span>&nbsp;<span class="ident" id="461027"><a href="/gostd/net/http/server.go.html#4170569">ResponseWriter</a></span><span class="op" id="461041">,</span>&nbsp;<span class="ident" id="461043">r</span>&nbsp;<span class="op" id="461045">*</span><span class="ident" id="461046"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="461053">)</span>&nbsp;<span class="op" id="461055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="461059">switch</span>&nbsp;<span class="ident" id="461066"><a href="/gostd/net/http/request_test.go.html#461043">r</a></span><span class="op" id="461067">.</span><span class="ident" id="461068"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="461071">.</span><span class="ident" id="461072"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span>&nbsp;<span class="op" id="461077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="461081">case</span>&nbsp;<span class="string" id="461086">&#34;/&#34;</span><span class="op" id="461089">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="461094"><a href="/gostd/net/http/request_test.go.html#461025">w</a></span><span class="op" id="461095">.</span><span class="ident" id="461096"><a href="/gostd/net/http/server.go.html#4170747">Header</a></span><span class="op" id="461102">(</span><span class="op" id="461103">)</span><span class="op" id="461104">.</span><span class="ident" id="461105"><a href="/gostd/net/http/header.go.html#4126491">Set</a></span><span class="op" id="461108">(</span><span class="string" id="461109">&#34;Location&#34;</span><span class="op" id="461119">,</span>&nbsp;<span class="string" id="461121">&#34;/foo/&#34;</span><span class="op" id="461128">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="461133"><a href="/gostd/net/http/request_test.go.html#461025">w</a></span><span class="op" id="461134">.</span><span class="ident" id="461135"><a href="/gostd/net/http/server.go.html#4171422">WriteHeader</a></span><span class="op" id="461146">(</span><span class="ident" id="461147"><a href="/gostd/net/http/status.go.html#4236542">StatusSeeOther</a></span><span class="op" id="461161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="461165">case</span>&nbsp;<span class="string" id="461170">&#34;/foo/&#34;</span><span class="op" id="461177">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="461182"><a href="/gostd/net/http/request_test.go.html#455784">fmt</a></span><span class="op" id="461185">.</span><span class="ident" id="461186"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="461193">(</span><span class="ident" id="461194"><a href="/gostd/net/http/request_test.go.html#461025">w</a></span><span class="op" id="461195">,</span>&nbsp;<span class="string" id="461197">&#34;foo&#34;</span><span class="op" id="461202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="461206">default</span><span class="op" id="461213">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="461218"><a href="/gostd/net/http/request_test.go.html#461025">w</a></span><span class="op" id="461219">.</span><span class="ident" id="461220"><a href="/gostd/net/http/server.go.html#4171422">WriteHeader</a></span><span class="op" id="461231">(</span><span class="ident" id="461232"><a href="/gostd/net/http/status.go.html#4236667">StatusBadRequest</a></span><span class="op" id="461248">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="461252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="461255">}</span><span class="op" id="461256">)</span><span class="op" id="461257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="461260">defer</span>&nbsp;<span class="ident" id="461266"><a href="/gostd/net/http/request_test.go.html#460983">ts</a></span><span class="op" id="461268">.</span><span class="ident" id="461269"><a href="/gostd/net/http/httptest/server.go.html#6137960">Close</a></span><span class="op" id="461274">(</span><span class="op" id="461275">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="461279">var</span>&nbsp;<span class="ident" id="461283">end</span>&nbsp;<span class="op" id="461287">=</span>&nbsp;<span class="ident" id="461289"><a href="/gostd/net/http/request_test.go.html#455891">regexp</a></span><span class="op" id="461295">.</span><span class="ident" id="461296"><a href="/gostd/regexp/regexp.go.html#3571892">MustCompile</a></span><span class="op" id="461307">(</span><span class="string" id="461308">&#34;/foo/$&#34;</span><span class="op" id="461316">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="461319">r</span><span class="op" id="461320">,</span>&nbsp;<span class="ident" id="461322">err</span>&nbsp;<span class="op" id="461326">:=</span>&nbsp;<span class="ident" id="461329"><a href="/gostd/net/http/client.go.html#4088955">Get</a></span><span class="op" id="461332">(</span><span class="ident" id="461333"><a href="/gostd/net/http/request_test.go.html#460983">ts</a></span><span class="op" id="461335">.</span><span class="ident" id="461336"><a href="/gostd/net/http/httptest/server.go.html#6134026">URL</a></span><span class="op" id="461339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="461342">if</span>&nbsp;<span class="ident" id="461345"><a href="/gostd/net/http/request_test.go.html#461322">err</a></span>&nbsp;<span class="op" id="461349">!=</span>&nbsp;<span class="builtintype" id="461352">nil</span>&nbsp;<span class="op" id="461356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="461360"><a href="/gostd/net/http/request_test.go.html#460966">t</a></span><span class="op" id="461361">.</span><span class="ident" id="461362"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="461367">(</span><span class="ident" id="461368"><a href="/gostd/net/http/request_test.go.html#461322">err</a></span><span class="op" id="461371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="461374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="461377"><a href="/gostd/net/http/request_test.go.html#461319">r</a></span><span class="op" id="461378">.</span><span class="ident" id="461379"><a href="/gostd/net/http/response.go.html#4162507">Body</a></span><span class="op" id="461383">.</span><span class="ident" id="461384"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="461389">(</span><span class="op" id="461390">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="461393">url</span>&nbsp;<span class="op" id="461397">:=</span>&nbsp;<span class="ident" id="461400"><a href="/gostd/net/http/request_test.go.html#461319">r</a></span><span class="op" id="461401">.</span><span class="ident" id="461402"><a href="/gostd/net/http/response.go.html#4163410">Request</a></span><span class="op" id="461409">.</span><span class="ident" id="461410"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="461413">.</span><span class="ident" id="461414"><a href="/gostd/net/url/url.go.html#3757924">String</a></span><span class="op" id="461420">(</span><span class="op" id="461421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="461424">if</span>&nbsp;<span class="ident" id="461427"><a href="/gostd/net/http/request_test.go.html#461319">r</a></span><span class="op" id="461428">.</span><span class="ident" id="461429"><a href="/gostd/net/http/response.go.html#4161564">StatusCode</a></span>&nbsp;<span class="op" id="461440">!=</span>&nbsp;<span class="num" id="461443">200</span>&nbsp;<span class="op" id="461447">||</span>&nbsp;<span class="op" id="461450">!</span><span class="ident" id="461451"><a href="/gostd/net/http/request_test.go.html#461283">end</a></span><span class="op" id="461454">.</span><span class="ident" id="461455"><a href="/gostd/regexp/regexp.go.html#3576314">MatchString</a></span><span class="op" id="461466">(</span><span class="ident" id="461467"><a href="/gostd/net/http/request_test.go.html#461393">url</a></span><span class="op" id="461470">)</span>&nbsp;<span class="op" id="461472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="461476"><a href="/gostd/net/http/request_test.go.html#460966">t</a></span><span class="op" id="461477">.</span><span class="ident" id="461478"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="461484">(</span><span class="string" id="461485">&#34;Get&nbsp;got&nbsp;status&nbsp;%d&nbsp;at&nbsp;%q,&nbsp;want&nbsp;200&nbsp;matching&nbsp;/foo/$&#34;</span><span class="op" id="461536">,</span>&nbsp;<span class="ident" id="461538"><a href="/gostd/net/http/request_test.go.html#461319">r</a></span><span class="op" id="461539">.</span><span class="ident" id="461540"><a href="/gostd/net/http/response.go.html#4161564">StatusCode</a></span><span class="op" id="461550">,</span>&nbsp;<span class="ident" id="461552"><a href="/gostd/net/http/request_test.go.html#461393">url</a></span><span class="op" id="461555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="461558">}</span><br>
<span class="lineno"></span><span class="op" id="461560">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="461563">func</span>&nbsp;<span class="ident" id="461568">TestSetBasicAuth</span><span class="op" id="461584">(</span><span class="ident" id="461585">t</span>&nbsp;<span class="op" id="461587">*</span><span class="ident" id="461588"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="461595">.</span><span class="ident" id="461596"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="461597">)</span>&nbsp;<span class="op" id="461599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="461602">r</span><span class="op" id="461603">,</span>&nbsp;<span class="ident" id="461605">_</span>&nbsp;<span class="op" id="461607">:=</span>&nbsp;<span class="ident" id="461610"><a href="/gostd/net/http/request.go.html#4149529">NewRequest</a></span><span class="op" id="461620">(</span><span class="string" id="461621">&#34;GET&#34;</span><span class="op" id="461626">,</span>&nbsp;<span class="string" id="461628">&#34;http://example.com/&#34;</span><span class="op" id="461649">,</span>&nbsp;<span class="builtintype" id="461651">nil</span><span class="op" id="461654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="461657"><a href="/gostd/net/http/request_test.go.html#461602">r</a></span><span class="op" id="461658">.</span><span class="ident" id="461659"><a href="/gostd/net/http/request.go.html#4151272">SetBasicAuth</a></span><span class="op" id="461671">(</span><span class="string" id="461672">&#34;Aladdin&#34;</span><span class="op" id="461681">,</span>&nbsp;<span class="string" id="461683">&#34;open&nbsp;sesame&#34;</span><span class="op" id="461696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="461699">if</span>&nbsp;<span class="ident" id="461702">g</span><span class="op" id="461703">,</span>&nbsp;<span class="ident" id="461705">e</span>&nbsp;<span class="op" id="461707">:=</span>&nbsp;<span class="ident" id="461710"><a href="/gostd/net/http/request_test.go.html#461602">r</a></span><span class="op" id="461711">.</span><span class="ident" id="461712"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="461718">.</span><span class="ident" id="461719"><a href="/gostd/net/http/header.go.html#4126793">Get</a></span><span class="op" id="461722">(</span><span class="string" id="461723">&#34;Authorization&#34;</span><span class="op" id="461738">)</span><span class="op" id="461739">,</span>&nbsp;<span class="string" id="461741">&#34;Basic&nbsp;QWxhZGRpbjpvcGVuIHNlc2FtZQ==&#34;</span><span class="op" id="461777">;</span>&nbsp;<span class="ident" id="461779"><a href="/gostd/net/http/request_test.go.html#461702">g</a></span>&nbsp;<span class="op" id="461781">!=</span>&nbsp;<span class="ident" id="461784"><a href="/gostd/net/http/request_test.go.html#461705">e</a></span>&nbsp;<span class="op" id="461786">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="461790"><a href="/gostd/net/http/request_test.go.html#461585">t</a></span><span class="op" id="461791">.</span><span class="ident" id="461792"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="461798">(</span><span class="string" id="461799">&#34;got&nbsp;header&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="461823">,</span>&nbsp;<span class="ident" id="461825"><a href="/gostd/net/http/request_test.go.html#461702">g</a></span><span class="op" id="461826">,</span>&nbsp;<span class="ident" id="461828"><a href="/gostd/net/http/request_test.go.html#461705">e</a></span><span class="op" id="461829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="461832">}</span><br>
<span class="lineno"></span><span class="op" id="461834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="461837">func</span>&nbsp;<span class="ident" id="461842">TestMultipartRequest</span><span class="op" id="461862">(</span><span class="ident" id="461863">t</span>&nbsp;<span class="op" id="461865">*</span><span class="ident" id="461866"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="461873">.</span><span class="ident" id="461874"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="461875">)</span>&nbsp;<span class="op" id="461877">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="461880">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;read&nbsp;the&nbsp;values&nbsp;and&nbsp;files&nbsp;of&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="461932">//&nbsp;multipart&nbsp;request&nbsp;with&nbsp;FormValue&nbsp;and&nbsp;FormFile,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="461983">//&nbsp;and&nbsp;that&nbsp;ParseMultipartForm&nbsp;can&nbsp;be&nbsp;called&nbsp;multiple&nbsp;times.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="462045">req</span>&nbsp;<span class="op" id="462049">:=</span>&nbsp;<span class="ident" id="462052"><a href="/gostd/net/http/request_test.go.html#470610">newTestMultipartRequest</a></span><span class="op" id="462075">(</span><span class="ident" id="462076"><a href="/gostd/net/http/request_test.go.html#461863">t</a></span><span class="op" id="462077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="462080">if</span>&nbsp;<span class="ident" id="462083">err</span>&nbsp;<span class="op" id="462087">:=</span>&nbsp;<span class="ident" id="462090"><a href="/gostd/net/http/request_test.go.html#462045">req</a></span><span class="op" id="462093">.</span><span class="ident" id="462094"><a href="/gostd/net/http/request.go.html#4158338">ParseMultipartForm</a></span><span class="op" id="462112">(</span><span class="num" id="462113">25</span><span class="op" id="462115">)</span><span class="op" id="462116">;</span>&nbsp;<span class="ident" id="462118"><a href="/gostd/net/http/request_test.go.html#462083">err</a></span>&nbsp;<span class="op" id="462122">!=</span>&nbsp;<span class="builtintype" id="462125">nil</span>&nbsp;<span class="op" id="462129">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="462133"><a href="/gostd/net/http/request_test.go.html#461863">t</a></span><span class="op" id="462134">.</span><span class="ident" id="462135"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="462140">(</span><span class="string" id="462141">&#34;ParseMultipartForm&nbsp;first&nbsp;call:&#34;</span><span class="op" id="462173">,</span>&nbsp;<span class="ident" id="462175"><a href="/gostd/net/http/request_test.go.html#462083">err</a></span><span class="op" id="462178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="462181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="462184">defer</span>&nbsp;<span class="ident" id="462190"><a href="/gostd/net/http/request_test.go.html#462045">req</a></span><span class="op" id="462193">.</span><span class="ident" id="462194"><a href="/gostd/net/http/request.go.html#4139864">MultipartForm</a></span><span class="op" id="462207">.</span><span class="ident" id="462208"><a href="/gostd/mime/multipart/formdata.go.html#4309807">RemoveAll</a></span><span class="op" id="462217">(</span><span class="op" id="462218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="462221"><a href="/gostd/net/http/request_test.go.html#470946">validateTestMultipartContents</a></span><span class="op" id="462250">(</span><span class="ident" id="462251"><a href="/gostd/net/http/request_test.go.html#461863">t</a></span><span class="op" id="462252">,</span>&nbsp;<span class="ident" id="462254"><a href="/gostd/net/http/request_test.go.html#462045">req</a></span><span class="op" id="462257">,</span>&nbsp;<span class="builtintype" id="462259">false</span><span class="op" id="462264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="462267">if</span>&nbsp;<span class="ident" id="462270">err</span>&nbsp;<span class="op" id="462274">:=</span>&nbsp;<span class="ident" id="462277"><a href="/gostd/net/http/request_test.go.html#462045">req</a></span><span class="op" id="462280">.</span><span class="ident" id="462281"><a href="/gostd/net/http/request.go.html#4158338">ParseMultipartForm</a></span><span class="op" id="462299">(</span><span class="num" id="462300">25</span><span class="op" id="462302">)</span><span class="op" id="462303">;</span>&nbsp;<span class="ident" id="462305"><a href="/gostd/net/http/request_test.go.html#462270">err</a></span>&nbsp;<span class="op" id="462309">!=</span>&nbsp;<span class="builtintype" id="462312">nil</span>&nbsp;<span class="op" id="462316">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="462320"><a href="/gostd/net/http/request_test.go.html#461863">t</a></span><span class="op" id="462321">.</span><span class="ident" id="462322"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="462327">(</span><span class="string" id="462328">&#34;ParseMultipartForm&nbsp;second&nbsp;call:&#34;</span><span class="op" id="462361">,</span>&nbsp;<span class="ident" id="462363"><a href="/gostd/net/http/request_test.go.html#462270">err</a></span><span class="op" id="462366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="462369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="462372"><a href="/gostd/net/http/request_test.go.html#470946">validateTestMultipartContents</a></span><span class="op" id="462401">(</span><span class="ident" id="462402"><a href="/gostd/net/http/request_test.go.html#461863">t</a></span><span class="op" id="462403">,</span>&nbsp;<span class="ident" id="462405"><a href="/gostd/net/http/request_test.go.html#462045">req</a></span><span class="op" id="462408">,</span>&nbsp;<span class="builtintype" id="462410">false</span><span class="op" id="462415">)</span><br>
<span class="lineno"></span><span class="op" id="462417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="keyword" id="462420">func</span>&nbsp;<span class="ident" id="462425">TestMultipartRequestAuto</span><span class="op" id="462449">(</span><span class="ident" id="462450">t</span>&nbsp;<span class="op" id="462452">*</span><span class="ident" id="462453"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="462460">.</span><span class="ident" id="462461"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="462462">)</span>&nbsp;<span class="op" id="462464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="462467">//&nbsp;Test&nbsp;that&nbsp;FormValue&nbsp;and&nbsp;FormFile&nbsp;automatically&nbsp;invoke</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="462525">//&nbsp;ParseMultipartForm&nbsp;and&nbsp;return&nbsp;the&nbsp;right&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="462577">req</span>&nbsp;<span class="op" id="462581">:=</span>&nbsp;<span class="ident" id="462584"><a href="/gostd/net/http/request_test.go.html#470610">newTestMultipartRequest</a></span><span class="op" id="462607">(</span><span class="ident" id="462608"><a href="/gostd/net/http/request_test.go.html#462450">t</a></span><span class="op" id="462609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="462612">defer</span>&nbsp;<span class="keyword" id="462618">func</span><span class="op" id="462622">(</span><span class="op" id="462623">)</span>&nbsp;<span class="op" id="462625">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="462629">if</span>&nbsp;<span class="ident" id="462632"><a href="/gostd/net/http/request_test.go.html#462577">req</a></span><span class="op" id="462635">.</span><span class="ident" id="462636"><a href="/gostd/net/http/request.go.html#4139864">MultipartForm</a></span>&nbsp;<span class="op" id="462650">!=</span>&nbsp;<span class="builtintype" id="462653">nil</span>&nbsp;<span class="op" id="462657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="462662"><a href="/gostd/net/http/request_test.go.html#462577">req</a></span><span class="op" id="462665">.</span><span class="ident" id="462666"><a href="/gostd/net/http/request.go.html#4139864">MultipartForm</a></span><span class="op" id="462679">.</span><span class="ident" id="462680"><a href="/gostd/mime/multipart/formdata.go.html#4309807">RemoveAll</a></span><span class="op" id="462689">(</span><span class="op" id="462690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="462694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="462697">}</span><span class="op" id="462698">(</span><span class="op" id="462699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="462702"><a href="/gostd/net/http/request_test.go.html#470946">validateTestMultipartContents</a></span><span class="op" id="462731">(</span><span class="ident" id="462732"><a href="/gostd/net/http/request_test.go.html#462450">t</a></span><span class="op" id="462733">,</span>&nbsp;<span class="ident" id="462735"><a href="/gostd/net/http/request_test.go.html#462577">req</a></span><span class="op" id="462738">,</span>&nbsp;<span class="builtintype" id="462740">true</span><span class="op" id="462744">)</span><br>
<span class="lineno">240</span><span class="op" id="462746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="462749">func</span>&nbsp;<span class="ident" id="462754">TestMissingFileMultipartRequest</span><span class="op" id="462785">(</span><span class="ident" id="462786">t</span>&nbsp;<span class="op" id="462788">*</span><span class="ident" id="462789"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="462796">.</span><span class="ident" id="462797"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="462798">)</span>&nbsp;<span class="op" id="462800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="462803">//&nbsp;Test&nbsp;that&nbsp;FormFile&nbsp;returns&nbsp;an&nbsp;error&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="462846">//&nbsp;the&nbsp;named&nbsp;file&nbsp;is&nbsp;missing.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="462877">req</span>&nbsp;<span class="op" id="462881">:=</span>&nbsp;<span class="ident" id="462884"><a href="/gostd/net/http/request_test.go.html#470610">newTestMultipartRequest</a></span><span class="op" id="462907">(</span><span class="ident" id="462908"><a href="/gostd/net/http/request_test.go.html#462786">t</a></span><span class="op" id="462909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="462912"><a href="/gostd/net/http/request_test.go.html#470291">testMissingFile</a></span><span class="op" id="462927">(</span><span class="ident" id="462928"><a href="/gostd/net/http/request_test.go.html#462786">t</a></span><span class="op" id="462929">,</span>&nbsp;<span class="ident" id="462931"><a href="/gostd/net/http/request_test.go.html#462877">req</a></span><span class="op" id="462934">)</span><br>
<span class="lineno"></span><span class="op" id="462936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="462939">//&nbsp;Test&nbsp;that&nbsp;FormValue&nbsp;invokes&nbsp;ParseMultipartForm.</span><br>
<span class="lineno">250</span><span class="keyword" id="462990">func</span>&nbsp;<span class="ident" id="462995">TestFormValueCallsParseMultipartForm</span><span class="op" id="463031">(</span><span class="ident" id="463032">t</span>&nbsp;<span class="op" id="463034">*</span><span class="ident" id="463035"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="463042">.</span><span class="ident" id="463043"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="463044">)</span>&nbsp;<span class="op" id="463046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="463049">req</span><span class="op" id="463052">,</span>&nbsp;<span class="ident" id="463054">_</span>&nbsp;<span class="op" id="463056">:=</span>&nbsp;<span class="ident" id="463059"><a href="/gostd/net/http/request.go.html#4149529">NewRequest</a></span><span class="op" id="463069">(</span><span class="string" id="463070">&#34;POST&#34;</span><span class="op" id="463076">,</span>&nbsp;<span class="string" id="463078">&#34;http://www.google.com/&#34;</span><span class="op" id="463102">,</span>&nbsp;<span class="ident" id="463104"><a href="/gostd/net/http/request_test.go.html#455901">strings</a></span><span class="op" id="463111">.</span><span class="ident" id="463112"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="463121">(</span><span class="string" id="463122">&#34;z=post&#34;</span><span class="op" id="463130">)</span><span class="op" id="463131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="463134"><a href="/gostd/net/http/request_test.go.html#463049">req</a></span><span class="op" id="463137">.</span><span class="ident" id="463138"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="463144">.</span><span class="ident" id="463145"><a href="/gostd/net/http/header.go.html#4126491">Set</a></span><span class="op" id="463148">(</span><span class="string" id="463149">&#34;Content-Type&#34;</span><span class="op" id="463163">,</span>&nbsp;<span class="string" id="463165">&#34;application/x-www-form-urlencoded;&nbsp;param=value&#34;</span><span class="op" id="463213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="463216">if</span>&nbsp;<span class="ident" id="463219"><a href="/gostd/net/http/request_test.go.html#463049">req</a></span><span class="op" id="463222">.</span><span class="ident" id="463223"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span>&nbsp;<span class="op" id="463228">!=</span>&nbsp;<span class="builtintype" id="463231">nil</span>&nbsp;<span class="op" id="463235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="463239"><a href="/gostd/net/http/request_test.go.html#463032">t</a></span><span class="op" id="463240">.</span><span class="ident" id="463241"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="463246">(</span><span class="string" id="463247">&#34;Unexpected&nbsp;request&nbsp;Form,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="463282">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="463285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="463288"><a href="/gostd/net/http/request_test.go.html#463049">req</a></span><span class="op" id="463291">.</span><span class="ident" id="463292"><a href="/gostd/net/http/request.go.html#4159257">FormValue</a></span><span class="op" id="463301">(</span><span class="string" id="463302">&#34;z&#34;</span><span class="op" id="463305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="463308">if</span>&nbsp;<span class="ident" id="463311"><a href="/gostd/net/http/request_test.go.html#463049">req</a></span><span class="op" id="463314">.</span><span class="ident" id="463315"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span>&nbsp;<span class="op" id="463320">==</span>&nbsp;<span class="builtintype" id="463323">nil</span>&nbsp;<span class="op" id="463327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="463331"><a href="/gostd/net/http/request_test.go.html#463032">t</a></span><span class="op" id="463332">.</span><span class="ident" id="463333"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="463338">(</span><span class="string" id="463339">&#34;ParseMultipartForm&nbsp;not&nbsp;called&nbsp;by&nbsp;FormValue&#34;</span><span class="op" id="463383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="463386">}</span><br>
<span class="lineno">260</span><span class="op" id="463388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="463391">//&nbsp;Test&nbsp;that&nbsp;FormFile&nbsp;invokes&nbsp;ParseMultipartForm.</span><br>
<span class="lineno"></span><span class="keyword" id="463441">func</span>&nbsp;<span class="ident" id="463446">TestFormFileCallsParseMultipartForm</span><span class="op" id="463481">(</span><span class="ident" id="463482">t</span>&nbsp;<span class="op" id="463484">*</span><span class="ident" id="463485"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="463492">.</span><span class="ident" id="463493"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="463494">)</span>&nbsp;<span class="op" id="463496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="463499">req</span>&nbsp;<span class="op" id="463503">:=</span>&nbsp;<span class="ident" id="463506"><a href="/gostd/net/http/request_test.go.html#470610">newTestMultipartRequest</a></span><span class="op" id="463529">(</span><span class="ident" id="463530"><a href="/gostd/net/http/request_test.go.html#463482">t</a></span><span class="op" id="463531">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="463534">if</span>&nbsp;<span class="ident" id="463537"><a href="/gostd/net/http/request_test.go.html#463499">req</a></span><span class="op" id="463540">.</span><span class="ident" id="463541"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span>&nbsp;<span class="op" id="463546">!=</span>&nbsp;<span class="builtintype" id="463549">nil</span>&nbsp;<span class="op" id="463553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="463557"><a href="/gostd/net/http/request_test.go.html#463482">t</a></span><span class="op" id="463558">.</span><span class="ident" id="463559"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="463564">(</span><span class="string" id="463565">&#34;Unexpected&nbsp;request&nbsp;Form,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="463600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="463603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="463606"><a href="/gostd/net/http/request_test.go.html#463499">req</a></span><span class="op" id="463609">.</span><span class="ident" id="463610"><a href="/gostd/net/http/request.go.html#4160019">FormFile</a></span><span class="op" id="463618">(</span><span class="string" id="463619">&#34;&#34;</span><span class="op" id="463621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="463624">if</span>&nbsp;<span class="ident" id="463627"><a href="/gostd/net/http/request_test.go.html#463499">req</a></span><span class="op" id="463630">.</span><span class="ident" id="463631"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span>&nbsp;<span class="op" id="463636">==</span>&nbsp;<span class="builtintype" id="463639">nil</span>&nbsp;<span class="op" id="463643">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="463647"><a href="/gostd/net/http/request_test.go.html#463482">t</a></span><span class="op" id="463648">.</span><span class="ident" id="463649"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="463654">(</span><span class="string" id="463655">&#34;ParseMultipartForm&nbsp;not&nbsp;called&nbsp;by&nbsp;FormFile&#34;</span><span class="op" id="463698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="463701">}</span><br>
<span class="lineno"></span><span class="op" id="463703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="463706">//&nbsp;Test&nbsp;that&nbsp;ParseMultipartForm&nbsp;errors&nbsp;if&nbsp;called</span><br>
<span class="lineno">275</span><span class="comment" id="463755">//&nbsp;after&nbsp;MultipartReader&nbsp;on&nbsp;the&nbsp;same&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="463801">func</span>&nbsp;<span class="ident" id="463806">TestParseMultipartFormOrder</span><span class="op" id="463833">(</span><span class="ident" id="463834">t</span>&nbsp;<span class="op" id="463836">*</span><span class="ident" id="463837"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="463844">.</span><span class="ident" id="463845"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="463846">)</span>&nbsp;<span class="op" id="463848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="463851">req</span>&nbsp;<span class="op" id="463855">:=</span>&nbsp;<span class="ident" id="463858"><a href="/gostd/net/http/request_test.go.html#470610">newTestMultipartRequest</a></span><span class="op" id="463881">(</span><span class="ident" id="463882"><a href="/gostd/net/http/request_test.go.html#463834">t</a></span><span class="op" id="463883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="463886">if</span>&nbsp;<span class="ident" id="463889">_</span><span class="op" id="463890">,</span>&nbsp;<span class="ident" id="463892">err</span>&nbsp;<span class="op" id="463896">:=</span>&nbsp;<span class="ident" id="463899"><a href="/gostd/net/http/request_test.go.html#463851">req</a></span><span class="op" id="463902">.</span><span class="ident" id="463903"><a href="/gostd/net/http/request.go.html#4144310">MultipartReader</a></span><span class="op" id="463918">(</span><span class="op" id="463919">)</span><span class="op" id="463920">;</span>&nbsp;<span class="ident" id="463922"><a href="/gostd/net/http/request_test.go.html#463892">err</a></span>&nbsp;<span class="op" id="463926">!=</span>&nbsp;<span class="builtintype" id="463929">nil</span>&nbsp;<span class="op" id="463933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="463937"><a href="/gostd/net/http/request_test.go.html#463834">t</a></span><span class="op" id="463938">.</span><span class="ident" id="463939"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="463945">(</span><span class="string" id="463946">&#34;MultipartReader:&nbsp;%v&#34;</span><span class="op" id="463967">,</span>&nbsp;<span class="ident" id="463969"><a href="/gostd/net/http/request_test.go.html#463892">err</a></span><span class="op" id="463972">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="463975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="463978">if</span>&nbsp;<span class="ident" id="463981">err</span>&nbsp;<span class="op" id="463985">:=</span>&nbsp;<span class="ident" id="463988"><a href="/gostd/net/http/request_test.go.html#463851">req</a></span><span class="op" id="463991">.</span><span class="ident" id="463992"><a href="/gostd/net/http/request.go.html#4158338">ParseMultipartForm</a></span><span class="op" id="464010">(</span><span class="num" id="464011">1024</span><span class="op" id="464015">)</span><span class="op" id="464016">;</span>&nbsp;<span class="ident" id="464018"><a href="/gostd/net/http/request_test.go.html#463981">err</a></span>&nbsp;<span class="op" id="464022">==</span>&nbsp;<span class="builtintype" id="464025">nil</span>&nbsp;<span class="op" id="464029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="464033"><a href="/gostd/net/http/request_test.go.html#463834">t</a></span><span class="op" id="464034">.</span><span class="ident" id="464035"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="464040">(</span><span class="string" id="464041">&#34;expected&nbsp;an&nbsp;error&nbsp;from&nbsp;ParseMultipartForm&nbsp;after&nbsp;call&nbsp;to&nbsp;MultipartReader&#34;</span><span class="op" id="464114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="464117">}</span><br>
<span class="lineno"></span><span class="op" id="464119">}</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span><span class="comment" id="464122">//&nbsp;Test&nbsp;that&nbsp;MultipartReader&nbsp;errors&nbsp;if&nbsp;called</span><br>
<span class="lineno"></span><span class="comment" id="464168">//&nbsp;after&nbsp;ParseMultipartForm&nbsp;on&nbsp;the&nbsp;same&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="464217">func</span>&nbsp;<span class="ident" id="464222">TestMultipartReaderOrder</span><span class="op" id="464246">(</span><span class="ident" id="464247">t</span>&nbsp;<span class="op" id="464249">*</span><span class="ident" id="464250"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="464257">.</span><span class="ident" id="464258"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="464259">)</span>&nbsp;<span class="op" id="464261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="464264">req</span>&nbsp;<span class="op" id="464268">:=</span>&nbsp;<span class="ident" id="464271"><a href="/gostd/net/http/request_test.go.html#470610">newTestMultipartRequest</a></span><span class="op" id="464294">(</span><span class="ident" id="464295"><a href="/gostd/net/http/request_test.go.html#464247">t</a></span><span class="op" id="464296">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="464299">if</span>&nbsp;<span class="ident" id="464302">err</span>&nbsp;<span class="op" id="464306">:=</span>&nbsp;<span class="ident" id="464309"><a href="/gostd/net/http/request_test.go.html#464264">req</a></span><span class="op" id="464312">.</span><span class="ident" id="464313"><a href="/gostd/net/http/request.go.html#4158338">ParseMultipartForm</a></span><span class="op" id="464331">(</span><span class="num" id="464332">25</span><span class="op" id="464334">)</span><span class="op" id="464335">;</span>&nbsp;<span class="ident" id="464337"><a href="/gostd/net/http/request_test.go.html#464302">err</a></span>&nbsp;<span class="op" id="464341">!=</span>&nbsp;<span class="builtintype" id="464344">nil</span>&nbsp;<span class="op" id="464348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="464352"><a href="/gostd/net/http/request_test.go.html#464247">t</a></span><span class="op" id="464353">.</span><span class="ident" id="464354"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="464360">(</span><span class="string" id="464361">&#34;ParseMultipartForm:&nbsp;%v&#34;</span><span class="op" id="464385">,</span>&nbsp;<span class="ident" id="464387"><a href="/gostd/net/http/request_test.go.html#464302">err</a></span><span class="op" id="464390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="464393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="464396">defer</span>&nbsp;<span class="ident" id="464402"><a href="/gostd/net/http/request_test.go.html#464264">req</a></span><span class="op" id="464405">.</span><span class="ident" id="464406"><a href="/gostd/net/http/request.go.html#4139864">MultipartForm</a></span><span class="op" id="464419">.</span><span class="ident" id="464420"><a href="/gostd/mime/multipart/formdata.go.html#4309807">RemoveAll</a></span><span class="op" id="464429">(</span><span class="op" id="464430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="464433">if</span>&nbsp;<span class="ident" id="464436">_</span><span class="op" id="464437">,</span>&nbsp;<span class="ident" id="464439">err</span>&nbsp;<span class="op" id="464443">:=</span>&nbsp;<span class="ident" id="464446"><a href="/gostd/net/http/request_test.go.html#464264">req</a></span><span class="op" id="464449">.</span><span class="ident" id="464450"><a href="/gostd/net/http/request.go.html#4144310">MultipartReader</a></span><span class="op" id="464465">(</span><span class="op" id="464466">)</span><span class="op" id="464467">;</span>&nbsp;<span class="ident" id="464469"><a href="/gostd/net/http/request_test.go.html#464439">err</a></span>&nbsp;<span class="op" id="464473">==</span>&nbsp;<span class="builtintype" id="464476">nil</span>&nbsp;<span class="op" id="464480">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="464484"><a href="/gostd/net/http/request_test.go.html#464247">t</a></span><span class="op" id="464485">.</span><span class="ident" id="464486"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="464491">(</span><span class="string" id="464492">&#34;expected&nbsp;an&nbsp;error&nbsp;from&nbsp;MultipartReader&nbsp;after&nbsp;call&nbsp;to&nbsp;ParseMultipartForm&#34;</span><span class="op" id="464565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="464568">}</span><br>
<span class="lineno"></span><span class="op" id="464570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="464573">//&nbsp;Test&nbsp;that&nbsp;FormFile&nbsp;errors&nbsp;if&nbsp;called&nbsp;after</span><br>
<span class="lineno">300</span><span class="comment" id="464618">//&nbsp;MultipartReader&nbsp;on&nbsp;the&nbsp;same&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="464658">func</span>&nbsp;<span class="ident" id="464663">TestFormFileOrder</span><span class="op" id="464680">(</span><span class="ident" id="464681">t</span>&nbsp;<span class="op" id="464683">*</span><span class="ident" id="464684"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="464691">.</span><span class="ident" id="464692"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="464693">)</span>&nbsp;<span class="op" id="464695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="464698">req</span>&nbsp;<span class="op" id="464702">:=</span>&nbsp;<span class="ident" id="464705"><a href="/gostd/net/http/request_test.go.html#470610">newTestMultipartRequest</a></span><span class="op" id="464728">(</span><span class="ident" id="464729"><a href="/gostd/net/http/request_test.go.html#464681">t</a></span><span class="op" id="464730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="464733">if</span>&nbsp;<span class="ident" id="464736">_</span><span class="op" id="464737">,</span>&nbsp;<span class="ident" id="464739">err</span>&nbsp;<span class="op" id="464743">:=</span>&nbsp;<span class="ident" id="464746"><a href="/gostd/net/http/request_test.go.html#464698">req</a></span><span class="op" id="464749">.</span><span class="ident" id="464750"><a href="/gostd/net/http/request.go.html#4144310">MultipartReader</a></span><span class="op" id="464765">(</span><span class="op" id="464766">)</span><span class="op" id="464767">;</span>&nbsp;<span class="ident" id="464769"><a href="/gostd/net/http/request_test.go.html#464739">err</a></span>&nbsp;<span class="op" id="464773">!=</span>&nbsp;<span class="builtintype" id="464776">nil</span>&nbsp;<span class="op" id="464780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="464784"><a href="/gostd/net/http/request_test.go.html#464681">t</a></span><span class="op" id="464785">.</span><span class="ident" id="464786"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="464792">(</span><span class="string" id="464793">&#34;MultipartReader:&nbsp;%v&#34;</span><span class="op" id="464814">,</span>&nbsp;<span class="ident" id="464816"><a href="/gostd/net/http/request_test.go.html#464739">err</a></span><span class="op" id="464819">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="464822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="464825">if</span>&nbsp;<span class="ident" id="464828">_</span><span class="op" id="464829">,</span>&nbsp;<span class="ident" id="464831">_</span><span class="op" id="464832">,</span>&nbsp;<span class="ident" id="464834">err</span>&nbsp;<span class="op" id="464838">:=</span>&nbsp;<span class="ident" id="464841"><a href="/gostd/net/http/request_test.go.html#464698">req</a></span><span class="op" id="464844">.</span><span class="ident" id="464845"><a href="/gostd/net/http/request.go.html#4160019">FormFile</a></span><span class="op" id="464853">(</span><span class="string" id="464854">&#34;&#34;</span><span class="op" id="464856">)</span><span class="op" id="464857">;</span>&nbsp;<span class="ident" id="464859"><a href="/gostd/net/http/request_test.go.html#464834">err</a></span>&nbsp;<span class="op" id="464863">==</span>&nbsp;<span class="builtintype" id="464866">nil</span>&nbsp;<span class="op" id="464870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="464874"><a href="/gostd/net/http/request_test.go.html#464681">t</a></span><span class="op" id="464875">.</span><span class="ident" id="464876"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="464881">(</span><span class="string" id="464882">&#34;expected&nbsp;an&nbsp;error&nbsp;from&nbsp;FormFile&nbsp;after&nbsp;call&nbsp;to&nbsp;MultipartReader&#34;</span><span class="op" id="464945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="464948">}</span><br>
<span class="lineno"></span><span class="op" id="464950">}</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span><span class="keyword" id="464953">var</span>&nbsp;<span class="ident" id="464957">readRequestErrorTests</span>&nbsp;<span class="op" id="464979">=</span>&nbsp;<span class="op" id="464981">[</span><span class="op" id="464982">]</span><span class="keyword" id="464983">struct</span>&nbsp;<span class="op" id="464990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="464993">in</span>&nbsp;&nbsp;<span class="builtintype" id="464997">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="465005">err</span>&nbsp;<span class="builtintype" id="465009">error</span><br>
<span class="lineno"></span><span class="op" id="465015">}</span><span class="op" id="465016">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="465019">{</span><span class="string" id="465020">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\nheader:foo\r\n\r\n&#34;</span><span class="op" id="465058">,</span>&nbsp;<span class="builtintype" id="465060">nil</span><span class="op" id="465063">}</span><span class="op" id="465064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="465067">{</span><span class="string" id="465068">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\nheader:foo\r\n&#34;</span><span class="op" id="465102">,</span>&nbsp;<span class="ident" id="465104"><a href="/gostd/net/http/request_test.go.html#455791">io</a></span><span class="op" id="465106">.</span><span class="ident" id="465107"><a href="/gostd/io/io.go.html#1420096">ErrUnexpectedEOF</a></span><span class="op" id="465123">}</span><span class="op" id="465124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="465127">{</span><span class="string" id="465128">&#34;&#34;</span><span class="op" id="465130">,</span>&nbsp;<span class="ident" id="465132"><a href="/gostd/net/http/request_test.go.html#455791">io</a></span><span class="op" id="465134">.</span><span class="ident" id="465135"><a href="/gostd/io/io.go.html#1419950">EOF</a></span><span class="op" id="465138">}</span><span class="op" id="465139">,</span><br>
<span class="lineno"></span><span class="op" id="465141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="keyword" id="465144">func</span>&nbsp;<span class="ident" id="465149">TestReadRequestErrors</span><span class="op" id="465170">(</span><span class="ident" id="465171">t</span>&nbsp;<span class="op" id="465173">*</span><span class="ident" id="465174"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="465181">.</span><span class="ident" id="465182"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="465183">)</span>&nbsp;<span class="op" id="465185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="465188">for</span>&nbsp;<span class="ident" id="465192">i</span><span class="op" id="465193">,</span>&nbsp;<span class="ident" id="465195">tt</span>&nbsp;<span class="op" id="465198">:=</span>&nbsp;<span class="keyword" id="465201">range</span>&nbsp;<span class="ident" id="465207"><a href="/gostd/net/http/request_test.go.html#464957">readRequestErrorTests</a></span>&nbsp;<span class="op" id="465229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="465233">_</span><span class="op" id="465234">,</span>&nbsp;<span class="ident" id="465236">err</span>&nbsp;<span class="op" id="465240">:=</span>&nbsp;<span class="ident" id="465243"><a href="/gostd/net/http/request.go.html#4152095">ReadRequest</a></span><span class="op" id="465254">(</span><span class="ident" id="465255"><a href="/gostd/net/http/request_test.go.html#455747">bufio</a></span><span class="op" id="465260">.</span><span class="ident" id="465261"><a href="/gostd/bufio/bufio.go.html#1355792">NewReader</a></span><span class="op" id="465270">(</span><span class="ident" id="465271"><a href="/gostd/net/http/request_test.go.html#455901">strings</a></span><span class="op" id="465278">.</span><span class="ident" id="465279"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="465288">(</span><span class="ident" id="465289"><a href="/gostd/net/http/request_test.go.html#465195">tt</a></span><span class="op" id="465291">.</span><span class="ident" id="465292"><a href="/gostd/net/http/request_test.go.html#464993">in</a></span><span class="op" id="465294">)</span><span class="op" id="465295">)</span><span class="op" id="465296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="465300">if</span>&nbsp;<span class="ident" id="465303"><a href="/gostd/net/http/request_test.go.html#465236">err</a></span>&nbsp;<span class="op" id="465307">!=</span>&nbsp;<span class="ident" id="465310"><a href="/gostd/net/http/request_test.go.html#465195">tt</a></span><span class="op" id="465312">.</span><span class="ident" id="465313"><a href="/gostd/net/http/request_test.go.html#465005">err</a></span>&nbsp;<span class="op" id="465317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="465322"><a href="/gostd/net/http/request_test.go.html#465171">t</a></span><span class="op" id="465323">.</span><span class="ident" id="465324"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="465330">(</span><span class="string" id="465331">&#34;%d.&nbsp;got&nbsp;error&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="465360">,</span>&nbsp;<span class="ident" id="465362"><a href="/gostd/net/http/request_test.go.html#465192">i</a></span><span class="op" id="465363">,</span>&nbsp;<span class="ident" id="465365"><a href="/gostd/net/http/request_test.go.html#465236">err</a></span><span class="op" id="465368">,</span>&nbsp;<span class="ident" id="465370"><a href="/gostd/net/http/request_test.go.html#465195">tt</a></span><span class="op" id="465372">.</span><span class="ident" id="465373"><a href="/gostd/net/http/request_test.go.html#465005">err</a></span><span class="op" id="465376">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="465380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="465383">}</span><br>
<span class="lineno"></span><span class="op" id="465385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="465388">func</span>&nbsp;<span class="ident" id="465393">TestNewRequestHost</span><span class="op" id="465411">(</span><span class="ident" id="465412">t</span>&nbsp;<span class="op" id="465414">*</span><span class="ident" id="465415"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="465422">.</span><span class="ident" id="465423"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="465424">)</span>&nbsp;<span class="op" id="465426">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="465429">req</span><span class="op" id="465432">,</span>&nbsp;<span class="ident" id="465434">err</span>&nbsp;<span class="op" id="465438">:=</span>&nbsp;<span class="ident" id="465441"><a href="/gostd/net/http/request.go.html#4149529">NewRequest</a></span><span class="op" id="465451">(</span><span class="string" id="465452">&#34;GET&#34;</span><span class="op" id="465457">,</span>&nbsp;<span class="string" id="465459">&#34;http://localhost:1234/&#34;</span><span class="op" id="465483">,</span>&nbsp;<span class="builtintype" id="465485">nil</span><span class="op" id="465488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="465491">if</span>&nbsp;<span class="ident" id="465494"><a href="/gostd/net/http/request_test.go.html#465434">err</a></span>&nbsp;<span class="op" id="465498">!=</span>&nbsp;<span class="builtintype" id="465501">nil</span>&nbsp;<span class="op" id="465505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="465509"><a href="/gostd/net/http/request_test.go.html#465412">t</a></span><span class="op" id="465510">.</span><span class="ident" id="465511"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="465516">(</span><span class="ident" id="465517"><a href="/gostd/net/http/request_test.go.html#465434">err</a></span><span class="op" id="465520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="465523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="465526">if</span>&nbsp;<span class="ident" id="465529"><a href="/gostd/net/http/request_test.go.html#465429">req</a></span><span class="op" id="465532">.</span><span class="ident" id="465533"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span>&nbsp;<span class="op" id="465538">!=</span>&nbsp;<span class="string" id="465541">&#34;localhost:1234&#34;</span>&nbsp;<span class="op" id="465558">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="465562"><a href="/gostd/net/http/request_test.go.html#465412">t</a></span><span class="op" id="465563">.</span><span class="ident" id="465564"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="465570">(</span><span class="string" id="465571">&#34;Host&nbsp;=&nbsp;%q;&nbsp;want&nbsp;localhost:1234&#34;</span><span class="op" id="465603">,</span>&nbsp;<span class="ident" id="465605"><a href="/gostd/net/http/request_test.go.html#465429">req</a></span><span class="op" id="465608">.</span><span class="ident" id="465609"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span><span class="op" id="465613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="465616">}</span><br>
<span class="lineno"></span><span class="op" id="465618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="465621">func</span>&nbsp;<span class="ident" id="465626">TestNewRequestContentLength</span><span class="op" id="465653">(</span><span class="ident" id="465654">t</span>&nbsp;<span class="op" id="465656">*</span><span class="ident" id="465657"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="465664">.</span><span class="ident" id="465665"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="465666">)</span>&nbsp;<span class="op" id="465668">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="465671">readByte</span>&nbsp;<span class="op" id="465680">:=</span>&nbsp;<span class="keyword" id="465683">func</span><span class="op" id="465687">(</span><span class="ident" id="465688">r</span>&nbsp;<span class="ident" id="465690"><a href="/gostd/net/http/request_test.go.html#455791">io</a></span><span class="op" id="465692">.</span><span class="ident" id="465693"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="465699">)</span>&nbsp;<span class="ident" id="465701"><a href="/gostd/net/http/request_test.go.html#455791">io</a></span><span class="op" id="465703">.</span><span class="ident" id="465704"><a href="/gostd/io/io.go.html#1421823">Reader</a></span>&nbsp;<span class="op" id="465711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="465715">var</span>&nbsp;<span class="ident" id="465719">b</span>&nbsp;<span class="op" id="465721">[</span><span class="num" id="465722">1</span><span class="op" id="465723">]</span><span class="builtintype" id="465724">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="465731"><a href="/gostd/net/http/request_test.go.html#465688">r</a></span><span class="op" id="465732">.</span><span class="ident" id="465733"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="465737">(</span><span class="ident" id="465738"><a href="/gostd/net/http/request_test.go.html#465719">b</a></span><span class="op" id="465739">[</span><span class="op" id="465740">:</span><span class="op" id="465741">]</span><span class="op" id="465742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="465746">return</span>&nbsp;<span class="ident" id="465753"><a href="/gostd/net/http/request_test.go.html#465688">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="465756">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="465759">tests</span>&nbsp;<span class="op" id="465765">:=</span>&nbsp;<span class="op" id="465768">[</span><span class="op" id="465769">]</span><span class="keyword" id="465770">struct</span>&nbsp;<span class="op" id="465777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="465781">r</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="465786"><a href="/gostd/net/http/request_test.go.html#455791">io</a></span><span class="op" id="465788">.</span><span class="ident" id="465789"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="465798">want</span>&nbsp;<span class="builtintype" id="465803">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="465810">}</span><span class="op" id="465811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="465815">{</span><span class="ident" id="465816"><a href="/gostd/net/http/request_test.go.html#455756">bytes</a></span><span class="op" id="465821">.</span><span class="ident" id="465822"><a href="/gostd/bytes/reader.go.html#1418136">NewReader</a></span><span class="op" id="465831">(</span><span class="op" id="465832">[</span><span class="op" id="465833">]</span><span class="builtintype" id="465834">byte</span><span class="op" id="465838">(</span><span class="string" id="465839">&#34;123&#34;</span><span class="op" id="465844">)</span><span class="op" id="465845">)</span><span class="op" id="465846">,</span>&nbsp;<span class="num" id="465848">3</span><span class="op" id="465849">}</span><span class="op" id="465850">,</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="465854">{</span><span class="ident" id="465855"><a href="/gostd/net/http/request_test.go.html#455756">bytes</a></span><span class="op" id="465860">.</span><span class="ident" id="465861"><a href="/gostd/bytes/buffer.go.html#1395573">NewBuffer</a></span><span class="op" id="465870">(</span><span class="op" id="465871">[</span><span class="op" id="465872">]</span><span class="builtintype" id="465873">byte</span><span class="op" id="465877">(</span><span class="string" id="465878">&#34;1234&#34;</span><span class="op" id="465884">)</span><span class="op" id="465885">)</span><span class="op" id="465886">,</span>&nbsp;<span class="num" id="465888">4</span><span class="op" id="465889">}</span><span class="op" id="465890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="465894">{</span><span class="ident" id="465895"><a href="/gostd/net/http/request_test.go.html#455901">strings</a></span><span class="op" id="465902">.</span><span class="ident" id="465903"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="465912">(</span><span class="string" id="465913">&#34;12345&#34;</span><span class="op" id="465920">)</span><span class="op" id="465921">,</span>&nbsp;<span class="num" id="465923">5</span><span class="op" id="465924">}</span><span class="op" id="465925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="465929">//&nbsp;Not&nbsp;detected:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="465948">{</span><span class="keyword" id="465949">struct</span><span class="op" id="465955">{</span>&nbsp;<span class="ident" id="465957"><a href="/gostd/net/http/request_test.go.html#455791">io</a></span><span class="op" id="465959">.</span><span class="ident" id="465960"><a href="/gostd/io/io.go.html#1421823">Reader</a></span>&nbsp;<span class="op" id="465967">}</span><span class="op" id="465968">{</span><span class="ident" id="465969"><a href="/gostd/net/http/request_test.go.html#455901">strings</a></span><span class="op" id="465976">.</span><span class="ident" id="465977"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="465986">(</span><span class="string" id="465987">&#34;xyz&#34;</span><span class="op" id="465992">)</span><span class="op" id="465993">}</span><span class="op" id="465994">,</span>&nbsp;<span class="num" id="465996">0</span><span class="op" id="465997">}</span><span class="op" id="465998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="466002">{</span><span class="ident" id="466003"><a href="/gostd/net/http/request_test.go.html#455791">io</a></span><span class="op" id="466005">.</span><span class="ident" id="466006"><a href="/gostd/io/io.go.html#1432455">NewSectionReader</a></span><span class="op" id="466022">(</span><span class="ident" id="466023"><a href="/gostd/net/http/request_test.go.html#455901">strings</a></span><span class="op" id="466030">.</span><span class="ident" id="466031"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="466040">(</span><span class="string" id="466041">&#34;x&#34;</span><span class="op" id="466044">)</span><span class="op" id="466045">,</span>&nbsp;<span class="num" id="466047">0</span><span class="op" id="466048">,</span>&nbsp;<span class="num" id="466050">6</span><span class="op" id="466051">)</span><span class="op" id="466052">,</span>&nbsp;<span class="num" id="466054">0</span><span class="op" id="466055">}</span><span class="op" id="466056">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="466060">{</span><span class="ident" id="466061"><a href="/gostd/net/http/request_test.go.html#465671">readByte</a></span><span class="op" id="466069">(</span><span class="ident" id="466070"><a href="/gostd/net/http/request_test.go.html#455791">io</a></span><span class="op" id="466072">.</span><span class="ident" id="466073"><a href="/gostd/io/io.go.html#1432455">NewSectionReader</a></span><span class="op" id="466089">(</span><span class="ident" id="466090"><a href="/gostd/net/http/request_test.go.html#455901">strings</a></span><span class="op" id="466097">.</span><span class="ident" id="466098"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="466107">(</span><span class="string" id="466108">&#34;xy&#34;</span><span class="op" id="466112">)</span><span class="op" id="466113">,</span>&nbsp;<span class="num" id="466115">0</span><span class="op" id="466116">,</span>&nbsp;<span class="num" id="466118">6</span><span class="op" id="466119">)</span><span class="op" id="466120">)</span><span class="op" id="466121">,</span>&nbsp;<span class="num" id="466123">0</span><span class="op" id="466124">}</span><span class="op" id="466125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="466128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="466131">for</span>&nbsp;<span class="ident" id="466135">_</span><span class="op" id="466136">,</span>&nbsp;<span class="ident" id="466138">tt</span>&nbsp;<span class="op" id="466141">:=</span>&nbsp;<span class="keyword" id="466144">range</span>&nbsp;<span class="ident" id="466150"><a href="/gostd/net/http/request_test.go.html#465759">tests</a></span>&nbsp;<span class="op" id="466156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="466160">req</span><span class="op" id="466163">,</span>&nbsp;<span class="ident" id="466165">err</span>&nbsp;<span class="op" id="466169">:=</span>&nbsp;<span class="ident" id="466172"><a href="/gostd/net/http/request.go.html#4149529">NewRequest</a></span><span class="op" id="466182">(</span><span class="string" id="466183">&#34;POST&#34;</span><span class="op" id="466189">,</span>&nbsp;<span class="string" id="466191">&#34;http://localhost/&#34;</span><span class="op" id="466210">,</span>&nbsp;<span class="ident" id="466212"><a href="/gostd/net/http/request_test.go.html#466138">tt</a></span><span class="op" id="466214">.</span><span class="ident" id="466215"><a href="/gostd/net/http/request_test.go.html#465781">r</a></span><span class="op" id="466216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="466220">if</span>&nbsp;<span class="ident" id="466223"><a href="/gostd/net/http/request_test.go.html#466165">err</a></span>&nbsp;<span class="op" id="466227">!=</span>&nbsp;<span class="builtintype" id="466230">nil</span>&nbsp;<span class="op" id="466234">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="466239"><a href="/gostd/net/http/request_test.go.html#465654">t</a></span><span class="op" id="466240">.</span><span class="ident" id="466241"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="466246">(</span><span class="ident" id="466247"><a href="/gostd/net/http/request_test.go.html#466165">err</a></span><span class="op" id="466250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="466254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="466258">if</span>&nbsp;<span class="ident" id="466261"><a href="/gostd/net/http/request_test.go.html#466160">req</a></span><span class="op" id="466264">.</span><span class="ident" id="466265"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span>&nbsp;<span class="op" id="466279">!=</span>&nbsp;<span class="ident" id="466282"><a href="/gostd/net/http/request_test.go.html#466138">tt</a></span><span class="op" id="466284">.</span><span class="ident" id="466285"><a href="/gostd/net/http/request_test.go.html#465798">want</a></span>&nbsp;<span class="op" id="466290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="466295"><a href="/gostd/net/http/request_test.go.html#465654">t</a></span><span class="op" id="466296">.</span><span class="ident" id="466297"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="466303">(</span><span class="string" id="466304">&#34;ContentLength(%T)&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="466337">,</span>&nbsp;<span class="ident" id="466339"><a href="/gostd/net/http/request_test.go.html#466138">tt</a></span><span class="op" id="466341">.</span><span class="ident" id="466342"><a href="/gostd/net/http/request_test.go.html#465781">r</a></span><span class="op" id="466343">,</span>&nbsp;<span class="ident" id="466345"><a href="/gostd/net/http/request_test.go.html#466160">req</a></span><span class="op" id="466348">.</span><span class="ident" id="466349"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span><span class="op" id="466362">,</span>&nbsp;<span class="ident" id="466364"><a href="/gostd/net/http/request_test.go.html#466138">tt</a></span><span class="op" id="466366">.</span><span class="ident" id="466367"><a href="/gostd/net/http/request_test.go.html#465798">want</a></span><span class="op" id="466371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="466375">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="466378">}</span><br>
<span class="lineno"></span><span class="op" id="466380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="466383">var</span>&nbsp;<span class="ident" id="466387">parseHTTPVersionTests</span>&nbsp;<span class="op" id="466409">=</span>&nbsp;<span class="op" id="466411">[</span><span class="op" id="466412">]</span><span class="keyword" id="466413">struct</span>&nbsp;<span class="op" id="466420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="466423">vers</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="466436">string</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="466444">major</span><span class="op" id="466449">,</span>&nbsp;<span class="ident" id="466451">minor</span>&nbsp;<span class="builtintype" id="466457">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="466462">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="466475">bool</span><br>
<span class="lineno"></span><span class="op" id="466480">}</span><span class="op" id="466481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="466484">{</span><span class="string" id="466485">&#34;HTTP/0.9&#34;</span><span class="op" id="466495">,</span>&nbsp;<span class="num" id="466497">0</span><span class="op" id="466498">,</span>&nbsp;<span class="num" id="466500">9</span><span class="op" id="466501">,</span>&nbsp;<span class="builtintype" id="466503">true</span><span class="op" id="466507">}</span><span class="op" id="466508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="466511">{</span><span class="string" id="466512">&#34;HTTP/1.0&#34;</span><span class="op" id="466522">,</span>&nbsp;<span class="num" id="466524">1</span><span class="op" id="466525">,</span>&nbsp;<span class="num" id="466527">0</span><span class="op" id="466528">,</span>&nbsp;<span class="builtintype" id="466530">true</span><span class="op" id="466534">}</span><span class="op" id="466535">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="466538">{</span><span class="string" id="466539">&#34;HTTP/1.1&#34;</span><span class="op" id="466549">,</span>&nbsp;<span class="num" id="466551">1</span><span class="op" id="466552">,</span>&nbsp;<span class="num" id="466554">1</span><span class="op" id="466555">,</span>&nbsp;<span class="builtintype" id="466557">true</span><span class="op" id="466561">}</span><span class="op" id="466562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="466565">{</span><span class="string" id="466566">&#34;HTTP/3.14&#34;</span><span class="op" id="466577">,</span>&nbsp;<span class="num" id="466579">3</span><span class="op" id="466580">,</span>&nbsp;<span class="num" id="466582">14</span><span class="op" id="466584">,</span>&nbsp;<span class="builtintype" id="466586">true</span><span class="op" id="466590">}</span><span class="op" id="466591">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="466595">{</span><span class="string" id="466596">&#34;HTTP&#34;</span><span class="op" id="466602">,</span>&nbsp;<span class="num" id="466604">0</span><span class="op" id="466605">,</span>&nbsp;<span class="num" id="466607">0</span><span class="op" id="466608">,</span>&nbsp;<span class="builtintype" id="466610">false</span><span class="op" id="466615">}</span><span class="op" id="466616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="466619">{</span><span class="string" id="466620">&#34;HTTP/one.one&#34;</span><span class="op" id="466634">,</span>&nbsp;<span class="num" id="466636">0</span><span class="op" id="466637">,</span>&nbsp;<span class="num" id="466639">0</span><span class="op" id="466640">,</span>&nbsp;<span class="builtintype" id="466642">false</span><span class="op" id="466647">}</span><span class="op" id="466648">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="466651">{</span><span class="string" id="466652">&#34;HTTP/1.1/&#34;</span><span class="op" id="466663">,</span>&nbsp;<span class="num" id="466665">0</span><span class="op" id="466666">,</span>&nbsp;<span class="num" id="466668">0</span><span class="op" id="466669">,</span>&nbsp;<span class="builtintype" id="466671">false</span><span class="op" id="466676">}</span><span class="op" id="466677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="466680">{</span><span class="string" id="466681">&#34;HTTP/-1,0&#34;</span><span class="op" id="466692">,</span>&nbsp;<span class="num" id="466694">0</span><span class="op" id="466695">,</span>&nbsp;<span class="num" id="466697">0</span><span class="op" id="466698">,</span>&nbsp;<span class="builtintype" id="466700">false</span><span class="op" id="466705">}</span><span class="op" id="466706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="466709">{</span><span class="string" id="466710">&#34;HTTP/0,-1&#34;</span><span class="op" id="466721">,</span>&nbsp;<span class="num" id="466723">0</span><span class="op" id="466724">,</span>&nbsp;<span class="num" id="466726">0</span><span class="op" id="466727">,</span>&nbsp;<span class="builtintype" id="466729">false</span><span class="op" id="466734">}</span><span class="op" id="466735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="466738">{</span><span class="string" id="466739">&#34;HTTP/&#34;</span><span class="op" id="466746">,</span>&nbsp;<span class="num" id="466748">0</span><span class="op" id="466749">,</span>&nbsp;<span class="num" id="466751">0</span><span class="op" id="466752">,</span>&nbsp;<span class="builtintype" id="466754">false</span><span class="op" id="466759">}</span><span class="op" id="466760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="466763">{</span><span class="string" id="466764">&#34;HTTP/1,1&#34;</span><span class="op" id="466774">,</span>&nbsp;<span class="num" id="466776">0</span><span class="op" id="466777">,</span>&nbsp;<span class="num" id="466779">0</span><span class="op" id="466780">,</span>&nbsp;<span class="builtintype" id="466782">false</span><span class="op" id="466787">}</span><span class="op" id="466788">,</span><br>
<span class="lineno">385</span><span class="op" id="466790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="466793">func</span>&nbsp;<span class="ident" id="466798">TestParseHTTPVersion</span><span class="op" id="466818">(</span><span class="ident" id="466819">t</span>&nbsp;<span class="op" id="466821">*</span><span class="ident" id="466822"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="466829">.</span><span class="ident" id="466830"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="466831">)</span>&nbsp;<span class="op" id="466833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="466836">for</span>&nbsp;<span class="ident" id="466840">_</span><span class="op" id="466841">,</span>&nbsp;<span class="ident" id="466843">tt</span>&nbsp;<span class="op" id="466846">:=</span>&nbsp;<span class="keyword" id="466849">range</span>&nbsp;<span class="ident" id="466855"><a href="/gostd/net/http/request_test.go.html#466387">parseHTTPVersionTests</a></span>&nbsp;<span class="op" id="466877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="466881">major</span><span class="op" id="466886">,</span>&nbsp;<span class="ident" id="466888">minor</span><span class="op" id="466893">,</span>&nbsp;<span class="ident" id="466895">ok</span>&nbsp;<span class="op" id="466898">:=</span>&nbsp;<span class="ident" id="466901"><a href="/gostd/net/http/request.go.html#4148677">ParseHTTPVersion</a></span><span class="op" id="466917">(</span><span class="ident" id="466918"><a href="/gostd/net/http/request_test.go.html#466843">tt</a></span><span class="op" id="466920">.</span><span class="ident" id="466921"><a href="/gostd/net/http/request_test.go.html#466423">vers</a></span><span class="op" id="466925">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="466929">if</span>&nbsp;<span class="ident" id="466932"><a href="/gostd/net/http/request_test.go.html#466895">ok</a></span>&nbsp;<span class="op" id="466935">!=</span>&nbsp;<span class="ident" id="466938"><a href="/gostd/net/http/request_test.go.html#466843">tt</a></span><span class="op" id="466940">.</span><span class="ident" id="466941"><a href="/gostd/net/http/request_test.go.html#466462">ok</a></span>&nbsp;<span class="op" id="466944">||</span>&nbsp;<span class="ident" id="466947"><a href="/gostd/net/http/request_test.go.html#466881">major</a></span>&nbsp;<span class="op" id="466953">!=</span>&nbsp;<span class="ident" id="466956"><a href="/gostd/net/http/request_test.go.html#466843">tt</a></span><span class="op" id="466958">.</span><span class="ident" id="466959"><a href="/gostd/net/http/request_test.go.html#466444">major</a></span>&nbsp;<span class="op" id="466965">||</span>&nbsp;<span class="ident" id="466968"><a href="/gostd/net/http/request_test.go.html#466888">minor</a></span>&nbsp;<span class="op" id="466974">!=</span>&nbsp;<span class="ident" id="466977"><a href="/gostd/net/http/request_test.go.html#466843">tt</a></span><span class="op" id="466979">.</span><span class="ident" id="466980"><a href="/gostd/net/http/request_test.go.html#466451">minor</a></span>&nbsp;<span class="op" id="466986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="466991">type</span>&nbsp;<span class="ident" id="466996">version</span>&nbsp;<span class="keyword" id="467004">struct</span>&nbsp;<span class="op" id="467011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="467017">major</span><span class="op" id="467022">,</span>&nbsp;<span class="ident" id="467024">minor</span>&nbsp;<span class="builtintype" id="467030">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="467038">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="467051">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="467059">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="467064"><a href="/gostd/net/http/request_test.go.html#466819">t</a></span><span class="op" id="467065">.</span><span class="ident" id="467066"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="467072">(</span><span class="string" id="467073">&#34;failed&nbsp;to&nbsp;parse&nbsp;%q,&nbsp;expected:&nbsp;%#v,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="467117">,</span>&nbsp;<span class="ident" id="467119"><a href="/gostd/net/http/request_test.go.html#466843">tt</a></span><span class="op" id="467121">.</span><span class="ident" id="467122"><a href="/gostd/net/http/request_test.go.html#466423">vers</a></span><span class="op" id="467126">,</span>&nbsp;<span class="ident" id="467128"><a href="/gostd/net/http/request_test.go.html#466996">version</a></span><span class="op" id="467135">{</span><span class="ident" id="467136"><a href="/gostd/net/http/request_test.go.html#466843">tt</a></span><span class="op" id="467138">.</span><span class="ident" id="467139"><a href="/gostd/net/http/request_test.go.html#466444">major</a></span><span class="op" id="467144">,</span>&nbsp;<span class="ident" id="467146"><a href="/gostd/net/http/request_test.go.html#466843">tt</a></span><span class="op" id="467148">.</span><span class="ident" id="467149"><a href="/gostd/net/http/request_test.go.html#466451">minor</a></span><span class="op" id="467154">,</span>&nbsp;<span class="ident" id="467156"><a href="/gostd/net/http/request_test.go.html#466843">tt</a></span><span class="op" id="467158">.</span><span class="ident" id="467159"><a href="/gostd/net/http/request_test.go.html#466462">ok</a></span><span class="op" id="467161">}</span><span class="op" id="467162">,</span>&nbsp;<span class="ident" id="467164"><a href="/gostd/net/http/request_test.go.html#466996">version</a></span><span class="op" id="467171">{</span><span class="ident" id="467172"><a href="/gostd/net/http/request_test.go.html#466881">major</a></span><span class="op" id="467177">,</span>&nbsp;<span class="ident" id="467179"><a href="/gostd/net/http/request_test.go.html#466888">minor</a></span><span class="op" id="467184">,</span>&nbsp;<span class="ident" id="467186"><a href="/gostd/net/http/request_test.go.html#466895">ok</a></span><span class="op" id="467188">}</span><span class="op" id="467189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="467193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="467196">}</span><br>
<span class="lineno"></span><span class="op" id="467198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">400</span><span class="keyword" id="467201">type</span>&nbsp;<span class="ident" id="467206">getBasicAuthTest</span>&nbsp;<span class="keyword" id="467223">struct</span>&nbsp;<span class="op" id="467230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="467233">username</span><span class="op" id="467241">,</span>&nbsp;<span class="ident" id="467243">password</span>&nbsp;<span class="builtintype" id="467252">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="467260">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="467279">bool</span><br>
<span class="lineno"></span><span class="op" id="467284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span><span class="keyword" id="467287">type</span>&nbsp;<span class="ident" id="467292">parseBasicAuthTest</span>&nbsp;<span class="ident" id="467311"><a href="/gostd/net/http/request_test.go.html#467206">getBasicAuthTest</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="467329">type</span>&nbsp;<span class="ident" id="467334">basicAuthCredentialsTest</span>&nbsp;<span class="keyword" id="467359">struct</span>&nbsp;<span class="op" id="467366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="467369">username</span><span class="op" id="467377">,</span>&nbsp;<span class="ident" id="467379">password</span>&nbsp;<span class="builtintype" id="467388">string</span><br>
<span class="lineno"></span><span class="op" id="467395">}</span><br>
<span class="lineno">410</span><br>
<span class="lineno"></span><span class="keyword" id="467398">var</span>&nbsp;<span class="ident" id="467402">getBasicAuthTests</span>&nbsp;<span class="op" id="467420">=</span>&nbsp;<span class="op" id="467422">[</span><span class="op" id="467423">]</span><span class="keyword" id="467424">struct</span>&nbsp;<span class="op" id="467431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="467434">username</span><span class="op" id="467442">,</span>&nbsp;<span class="ident" id="467444">password</span>&nbsp;<span class="builtintype" id="467453">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="467461">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="467480">bool</span><br>
<span class="lineno"></span><span class="op" id="467485">}</span><span class="op" id="467486">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="467489">{</span><span class="string" id="467490">&#34;Aladdin&#34;</span><span class="op" id="467499">,</span>&nbsp;<span class="string" id="467501">&#34;open&nbsp;sesame&#34;</span><span class="op" id="467514">,</span>&nbsp;<span class="builtintype" id="467516">true</span><span class="op" id="467520">}</span><span class="op" id="467521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="467524">{</span><span class="string" id="467525">&#34;Aladdin&#34;</span><span class="op" id="467534">,</span>&nbsp;<span class="string" id="467536">&#34;open:sesame&#34;</span><span class="op" id="467549">,</span>&nbsp;<span class="builtintype" id="467551">true</span><span class="op" id="467555">}</span><span class="op" id="467556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="467559">{</span><span class="string" id="467560">&#34;&#34;</span><span class="op" id="467562">,</span>&nbsp;<span class="string" id="467564">&#34;&#34;</span><span class="op" id="467566">,</span>&nbsp;<span class="builtintype" id="467568">true</span><span class="op" id="467572">}</span><span class="op" id="467573">,</span><br>
<span class="lineno"></span><span class="op" id="467575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="keyword" id="467578">func</span>&nbsp;<span class="ident" id="467583">TestGetBasicAuth</span><span class="op" id="467599">(</span><span class="ident" id="467600">t</span>&nbsp;<span class="op" id="467602">*</span><span class="ident" id="467603"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="467610">.</span><span class="ident" id="467611"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="467612">)</span>&nbsp;<span class="op" id="467614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="467617">for</span>&nbsp;<span class="ident" id="467621">_</span><span class="op" id="467622">,</span>&nbsp;<span class="ident" id="467624">tt</span>&nbsp;<span class="op" id="467627">:=</span>&nbsp;<span class="keyword" id="467630">range</span>&nbsp;<span class="ident" id="467636"><a href="/gostd/net/http/request_test.go.html#467402">getBasicAuthTests</a></span>&nbsp;<span class="op" id="467654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="467658">r</span><span class="op" id="467659">,</span>&nbsp;<span class="ident" id="467661">_</span>&nbsp;<span class="op" id="467663">:=</span>&nbsp;<span class="ident" id="467666"><a href="/gostd/net/http/request.go.html#4149529">NewRequest</a></span><span class="op" id="467676">(</span><span class="string" id="467677">&#34;GET&#34;</span><span class="op" id="467682">,</span>&nbsp;<span class="string" id="467684">&#34;http://example.com/&#34;</span><span class="op" id="467705">,</span>&nbsp;<span class="builtintype" id="467707">nil</span><span class="op" id="467710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="467714"><a href="/gostd/net/http/request_test.go.html#467658">r</a></span><span class="op" id="467715">.</span><span class="ident" id="467716"><a href="/gostd/net/http/request.go.html#4151272">SetBasicAuth</a></span><span class="op" id="467728">(</span><span class="ident" id="467729"><a href="/gostd/net/http/request_test.go.html#467624">tt</a></span><span class="op" id="467731">.</span><span class="ident" id="467732"><a href="/gostd/net/http/request_test.go.html#467434">username</a></span><span class="op" id="467740">,</span>&nbsp;<span class="ident" id="467742"><a href="/gostd/net/http/request_test.go.html#467624">tt</a></span><span class="op" id="467744">.</span><span class="ident" id="467745"><a href="/gostd/net/http/request_test.go.html#467444">password</a></span><span class="op" id="467753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="467757">username</span><span class="op" id="467765">,</span>&nbsp;<span class="ident" id="467767">password</span><span class="op" id="467775">,</span>&nbsp;<span class="ident" id="467777">ok</span>&nbsp;<span class="op" id="467780">:=</span>&nbsp;<span class="ident" id="467783"><a href="/gostd/net/http/request_test.go.html#467658">r</a></span><span class="op" id="467784">.</span><span class="ident" id="467785"><a href="/gostd/net/http/request.go.html#4150391">BasicAuth</a></span><span class="op" id="467794">(</span><span class="op" id="467795">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="467799">if</span>&nbsp;<span class="ident" id="467802"><a href="/gostd/net/http/request_test.go.html#467777">ok</a></span>&nbsp;<span class="op" id="467805">!=</span>&nbsp;<span class="ident" id="467808"><a href="/gostd/net/http/request_test.go.html#467624">tt</a></span><span class="op" id="467810">.</span><span class="ident" id="467811"><a href="/gostd/net/http/request_test.go.html#467461">ok</a></span>&nbsp;<span class="op" id="467814">||</span>&nbsp;<span class="ident" id="467817"><a href="/gostd/net/http/request_test.go.html#467757">username</a></span>&nbsp;<span class="op" id="467826">!=</span>&nbsp;<span class="ident" id="467829"><a href="/gostd/net/http/request_test.go.html#467624">tt</a></span><span class="op" id="467831">.</span><span class="ident" id="467832"><a href="/gostd/net/http/request_test.go.html#467434">username</a></span>&nbsp;<span class="op" id="467841">||</span>&nbsp;<span class="ident" id="467844"><a href="/gostd/net/http/request_test.go.html#467767">password</a></span>&nbsp;<span class="op" id="467853">!=</span>&nbsp;<span class="ident" id="467856"><a href="/gostd/net/http/request_test.go.html#467624">tt</a></span><span class="op" id="467858">.</span><span class="ident" id="467859"><a href="/gostd/net/http/request_test.go.html#467444">password</a></span>&nbsp;<span class="op" id="467868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="467873"><a href="/gostd/net/http/request_test.go.html#467600">t</a></span><span class="op" id="467874">.</span><span class="ident" id="467875"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="467881">(</span><span class="string" id="467882">&#34;BasicAuth()&nbsp;=&nbsp;%#v,&nbsp;want&nbsp;%#v&#34;</span><span class="op" id="467911">,</span>&nbsp;<span class="ident" id="467913"><a href="/gostd/net/http/request_test.go.html#467206">getBasicAuthTest</a></span><span class="op" id="467929">{</span><span class="ident" id="467930"><a href="/gostd/net/http/request_test.go.html#467757">username</a></span><span class="op" id="467938">,</span>&nbsp;<span class="ident" id="467940"><a href="/gostd/net/http/request_test.go.html#467767">password</a></span><span class="op" id="467948">,</span>&nbsp;<span class="ident" id="467950"><a href="/gostd/net/http/request_test.go.html#467777">ok</a></span><span class="op" id="467952">}</span><span class="op" id="467953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="467959"><a href="/gostd/net/http/request_test.go.html#467206">getBasicAuthTest</a></span><span class="op" id="467975">{</span><span class="ident" id="467976"><a href="/gostd/net/http/request_test.go.html#467624">tt</a></span><span class="op" id="467978">.</span><span class="ident" id="467979"><a href="/gostd/net/http/request_test.go.html#467434">username</a></span><span class="op" id="467987">,</span>&nbsp;<span class="ident" id="467989"><a href="/gostd/net/http/request_test.go.html#467624">tt</a></span><span class="op" id="467991">.</span><span class="ident" id="467992"><a href="/gostd/net/http/request_test.go.html#467444">password</a></span><span class="op" id="468000">,</span>&nbsp;<span class="ident" id="468002"><a href="/gostd/net/http/request_test.go.html#467624">tt</a></span><span class="op" id="468004">.</span><span class="ident" id="468005"><a href="/gostd/net/http/request_test.go.html#467461">ok</a></span><span class="op" id="468007">}</span><span class="op" id="468008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="468012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="468015">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="468018">//&nbsp;Unauthenticated&nbsp;request.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="468047">r</span><span class="op" id="468048">,</span>&nbsp;<span class="ident" id="468050">_</span>&nbsp;<span class="op" id="468052">:=</span>&nbsp;<span class="ident" id="468055"><a href="/gostd/net/http/request.go.html#4149529">NewRequest</a></span><span class="op" id="468065">(</span><span class="string" id="468066">&#34;GET&#34;</span><span class="op" id="468071">,</span>&nbsp;<span class="string" id="468073">&#34;http://example.com/&#34;</span><span class="op" id="468094">,</span>&nbsp;<span class="builtintype" id="468096">nil</span><span class="op" id="468099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="468102">username</span><span class="op" id="468110">,</span>&nbsp;<span class="ident" id="468112">password</span><span class="op" id="468120">,</span>&nbsp;<span class="ident" id="468122">ok</span>&nbsp;<span class="op" id="468125">:=</span>&nbsp;<span class="ident" id="468128"><a href="/gostd/net/http/request_test.go.html#468047">r</a></span><span class="op" id="468129">.</span><span class="ident" id="468130"><a href="/gostd/net/http/request.go.html#4150391">BasicAuth</a></span><span class="op" id="468139">(</span><span class="op" id="468140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="468143">if</span>&nbsp;<span class="ident" id="468146"><a href="/gostd/net/http/request_test.go.html#468122">ok</a></span>&nbsp;<span class="op" id="468149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="468153"><a href="/gostd/net/http/request_test.go.html#467600">t</a></span><span class="op" id="468154">.</span><span class="ident" id="468155"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="468161">(</span><span class="string" id="468162">&#34;expected&nbsp;false&nbsp;from&nbsp;BasicAuth&nbsp;when&nbsp;the&nbsp;request&nbsp;is&nbsp;unauthenticated&#34;</span><span class="op" id="468229">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="468232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="468235">want</span>&nbsp;<span class="op" id="468240">:=</span>&nbsp;<span class="ident" id="468243"><a href="/gostd/net/http/request_test.go.html#467334">basicAuthCredentialsTest</a></span><span class="op" id="468267">{</span><span class="string" id="468268">&#34;&#34;</span><span class="op" id="468270">,</span>&nbsp;<span class="string" id="468272">&#34;&#34;</span><span class="op" id="468274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="468277">if</span>&nbsp;<span class="ident" id="468280"><a href="/gostd/net/http/request_test.go.html#468102">username</a></span>&nbsp;<span class="op" id="468289">!=</span>&nbsp;<span class="ident" id="468292"><a href="/gostd/net/http/request_test.go.html#468235">want</a></span><span class="op" id="468296">.</span><span class="ident" id="468297"><a href="/gostd/net/http/request_test.go.html#467369">username</a></span>&nbsp;<span class="op" id="468306">||</span>&nbsp;<span class="ident" id="468309"><a href="/gostd/net/http/request_test.go.html#468112">password</a></span>&nbsp;<span class="op" id="468318">!=</span>&nbsp;<span class="ident" id="468321"><a href="/gostd/net/http/request_test.go.html#468235">want</a></span><span class="op" id="468325">.</span><span class="ident" id="468326"><a href="/gostd/net/http/request_test.go.html#467379">password</a></span>&nbsp;<span class="op" id="468335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="468339"><a href="/gostd/net/http/request_test.go.html#467600">t</a></span><span class="op" id="468340">.</span><span class="ident" id="468341"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="468347">(</span><span class="string" id="468348">&#34;expected&nbsp;credentials:&nbsp;%#v&nbsp;when&nbsp;the&nbsp;request&nbsp;is&nbsp;unauthenticated,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="468420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="468425"><a href="/gostd/net/http/request_test.go.html#468235">want</a></span><span class="op" id="468429">,</span>&nbsp;<span class="ident" id="468431"><a href="/gostd/net/http/request_test.go.html#467334">basicAuthCredentialsTest</a></span><span class="op" id="468455">{</span><span class="ident" id="468456"><a href="/gostd/net/http/request_test.go.html#468102">username</a></span><span class="op" id="468464">,</span>&nbsp;<span class="ident" id="468466"><a href="/gostd/net/http/request_test.go.html#468112">password</a></span><span class="op" id="468474">}</span><span class="op" id="468475">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="468478">}</span><br>
<span class="lineno"></span><span class="op" id="468480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="468483">var</span>&nbsp;<span class="ident" id="468487">parseBasicAuthTests</span>&nbsp;<span class="op" id="468507">=</span>&nbsp;<span class="op" id="468509">[</span><span class="op" id="468510">]</span><span class="keyword" id="468511">struct</span>&nbsp;<span class="op" id="468518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="468521">header</span><span class="op" id="468527">,</span>&nbsp;<span class="ident" id="468529">username</span><span class="op" id="468537">,</span>&nbsp;<span class="ident" id="468539">password</span>&nbsp;<span class="builtintype" id="468548">string</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="468556">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="468583">bool</span><br>
<span class="lineno"></span><span class="op" id="468588">}</span><span class="op" id="468589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="468592">{</span><span class="string" id="468593">&#34;Basic&nbsp;&#34;</span>&nbsp;<span class="op" id="468602">+</span>&nbsp;<span class="ident" id="468604"><a href="/gostd/net/http/request_test.go.html#455765">base64</a></span><span class="op" id="468610">.</span><span class="ident" id="468611"><a href="/gostd/encoding/base64/base64.go.html#4053069">StdEncoding</a></span><span class="op" id="468622">.</span><span class="ident" id="468623"><a href="/gostd/encoding/base64/base64.go.html#4054475">EncodeToString</a></span><span class="op" id="468637">(</span><span class="op" id="468638">[</span><span class="op" id="468639">]</span><span class="builtintype" id="468640">byte</span><span class="op" id="468644">(</span><span class="string" id="468645">&#34;Aladdin:open&nbsp;sesame&#34;</span><span class="op" id="468666">)</span><span class="op" id="468667">)</span><span class="op" id="468668">,</span>&nbsp;<span class="string" id="468670">&#34;Aladdin&#34;</span><span class="op" id="468679">,</span>&nbsp;<span class="string" id="468681">&#34;open&nbsp;sesame&#34;</span><span class="op" id="468694">,</span>&nbsp;<span class="builtintype" id="468696">true</span><span class="op" id="468700">}</span><span class="op" id="468701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="468704">{</span><span class="string" id="468705">&#34;Basic&nbsp;&#34;</span>&nbsp;<span class="op" id="468714">+</span>&nbsp;<span class="ident" id="468716"><a href="/gostd/net/http/request_test.go.html#455765">base64</a></span><span class="op" id="468722">.</span><span class="ident" id="468723"><a href="/gostd/encoding/base64/base64.go.html#4053069">StdEncoding</a></span><span class="op" id="468734">.</span><span class="ident" id="468735"><a href="/gostd/encoding/base64/base64.go.html#4054475">EncodeToString</a></span><span class="op" id="468749">(</span><span class="op" id="468750">[</span><span class="op" id="468751">]</span><span class="builtintype" id="468752">byte</span><span class="op" id="468756">(</span><span class="string" id="468757">&#34;Aladdin:open:sesame&#34;</span><span class="op" id="468778">)</span><span class="op" id="468779">)</span><span class="op" id="468780">,</span>&nbsp;<span class="string" id="468782">&#34;Aladdin&#34;</span><span class="op" id="468791">,</span>&nbsp;<span class="string" id="468793">&#34;open:sesame&#34;</span><span class="op" id="468806">,</span>&nbsp;<span class="builtintype" id="468808">true</span><span class="op" id="468812">}</span><span class="op" id="468813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="468816">{</span><span class="string" id="468817">&#34;Basic&nbsp;&#34;</span>&nbsp;<span class="op" id="468826">+</span>&nbsp;<span class="ident" id="468828"><a href="/gostd/net/http/request_test.go.html#455765">base64</a></span><span class="op" id="468834">.</span><span class="ident" id="468835"><a href="/gostd/encoding/base64/base64.go.html#4053069">StdEncoding</a></span><span class="op" id="468846">.</span><span class="ident" id="468847"><a href="/gostd/encoding/base64/base64.go.html#4054475">EncodeToString</a></span><span class="op" id="468861">(</span><span class="op" id="468862">[</span><span class="op" id="468863">]</span><span class="builtintype" id="468864">byte</span><span class="op" id="468868">(</span><span class="string" id="468869">&#34;:&#34;</span><span class="op" id="468872">)</span><span class="op" id="468873">)</span><span class="op" id="468874">,</span>&nbsp;<span class="string" id="468876">&#34;&#34;</span><span class="op" id="468878">,</span>&nbsp;<span class="string" id="468880">&#34;&#34;</span><span class="op" id="468882">,</span>&nbsp;<span class="builtintype" id="468884">true</span><span class="op" id="468888">}</span><span class="op" id="468889">,</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="468892">{</span><span class="string" id="468893">&#34;Basic&#34;</span>&nbsp;<span class="op" id="468901">+</span>&nbsp;<span class="ident" id="468903"><a href="/gostd/net/http/request_test.go.html#455765">base64</a></span><span class="op" id="468909">.</span><span class="ident" id="468910"><a href="/gostd/encoding/base64/base64.go.html#4053069">StdEncoding</a></span><span class="op" id="468921">.</span><span class="ident" id="468922"><a href="/gostd/encoding/base64/base64.go.html#4054475">EncodeToString</a></span><span class="op" id="468936">(</span><span class="op" id="468937">[</span><span class="op" id="468938">]</span><span class="builtintype" id="468939">byte</span><span class="op" id="468943">(</span><span class="string" id="468944">&#34;Aladdin:open&nbsp;sesame&#34;</span><span class="op" id="468965">)</span><span class="op" id="468966">)</span><span class="op" id="468967">,</span>&nbsp;<span class="string" id="468969">&#34;&#34;</span><span class="op" id="468971">,</span>&nbsp;<span class="string" id="468973">&#34;&#34;</span><span class="op" id="468975">,</span>&nbsp;<span class="builtintype" id="468977">false</span><span class="op" id="468982">}</span><span class="op" id="468983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="468986">{</span><span class="ident" id="468987"><a href="/gostd/net/http/request_test.go.html#455765">base64</a></span><span class="op" id="468993">.</span><span class="ident" id="468994"><a href="/gostd/encoding/base64/base64.go.html#4053069">StdEncoding</a></span><span class="op" id="469005">.</span><span class="ident" id="469006"><a href="/gostd/encoding/base64/base64.go.html#4054475">EncodeToString</a></span><span class="op" id="469020">(</span><span class="op" id="469021">[</span><span class="op" id="469022">]</span><span class="builtintype" id="469023">byte</span><span class="op" id="469027">(</span><span class="string" id="469028">&#34;Aladdin:open&nbsp;sesame&#34;</span><span class="op" id="469049">)</span><span class="op" id="469050">)</span><span class="op" id="469051">,</span>&nbsp;<span class="string" id="469053">&#34;&#34;</span><span class="op" id="469055">,</span>&nbsp;<span class="string" id="469057">&#34;&#34;</span><span class="op" id="469059">,</span>&nbsp;<span class="builtintype" id="469061">false</span><span class="op" id="469066">}</span><span class="op" id="469067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="469070">{</span><span class="string" id="469071">&#34;Basic&nbsp;&#34;</span><span class="op" id="469079">,</span>&nbsp;<span class="string" id="469081">&#34;&#34;</span><span class="op" id="469083">,</span>&nbsp;<span class="string" id="469085">&#34;&#34;</span><span class="op" id="469087">,</span>&nbsp;<span class="builtintype" id="469089">false</span><span class="op" id="469094">}</span><span class="op" id="469095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="469098">{</span><span class="string" id="469099">&#34;Basic&nbsp;Aladdin:open&nbsp;sesame&#34;</span><span class="op" id="469126">,</span>&nbsp;<span class="string" id="469128">&#34;&#34;</span><span class="op" id="469130">,</span>&nbsp;<span class="string" id="469132">&#34;&#34;</span><span class="op" id="469134">,</span>&nbsp;<span class="builtintype" id="469136">false</span><span class="op" id="469141">}</span><span class="op" id="469142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="469145">{</span><span class="string" id="469146">`Digest&nbsp;username=&#34;Aladdin&#34;`</span><span class="op" id="469173">,</span>&nbsp;<span class="string" id="469175">&#34;&#34;</span><span class="op" id="469177">,</span>&nbsp;<span class="string" id="469179">&#34;&#34;</span><span class="op" id="469181">,</span>&nbsp;<span class="builtintype" id="469183">false</span><span class="op" id="469188">}</span><span class="op" id="469189">,</span><br>
<span class="lineno">455</span><span class="op" id="469191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="469194">func</span>&nbsp;<span class="ident" id="469199">TestParseBasicAuth</span><span class="op" id="469217">(</span><span class="ident" id="469218">t</span>&nbsp;<span class="op" id="469220">*</span><span class="ident" id="469221"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="469228">.</span><span class="ident" id="469229"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="469230">)</span>&nbsp;<span class="op" id="469232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="469235">for</span>&nbsp;<span class="ident" id="469239">_</span><span class="op" id="469240">,</span>&nbsp;<span class="ident" id="469242">tt</span>&nbsp;<span class="op" id="469245">:=</span>&nbsp;<span class="keyword" id="469248">range</span>&nbsp;<span class="ident" id="469254"><a href="/gostd/net/http/request_test.go.html#468487">parseBasicAuthTests</a></span>&nbsp;<span class="op" id="469274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="469278">r</span><span class="op" id="469279">,</span>&nbsp;<span class="ident" id="469281">_</span>&nbsp;<span class="op" id="469283">:=</span>&nbsp;<span class="ident" id="469286"><a href="/gostd/net/http/request.go.html#4149529">NewRequest</a></span><span class="op" id="469296">(</span><span class="string" id="469297">&#34;GET&#34;</span><span class="op" id="469302">,</span>&nbsp;<span class="string" id="469304">&#34;http://example.com/&#34;</span><span class="op" id="469325">,</span>&nbsp;<span class="builtintype" id="469327">nil</span><span class="op" id="469330">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="469334"><a href="/gostd/net/http/request_test.go.html#469278">r</a></span><span class="op" id="469335">.</span><span class="ident" id="469336"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="469342">.</span><span class="ident" id="469343"><a href="/gostd/net/http/header.go.html#4126491">Set</a></span><span class="op" id="469346">(</span><span class="string" id="469347">&#34;Authorization&#34;</span><span class="op" id="469362">,</span>&nbsp;<span class="ident" id="469364"><a href="/gostd/net/http/request_test.go.html#469242">tt</a></span><span class="op" id="469366">.</span><span class="ident" id="469367"><a href="/gostd/net/http/request_test.go.html#468521">header</a></span><span class="op" id="469373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="469377">username</span><span class="op" id="469385">,</span>&nbsp;<span class="ident" id="469387">password</span><span class="op" id="469395">,</span>&nbsp;<span class="ident" id="469397">ok</span>&nbsp;<span class="op" id="469400">:=</span>&nbsp;<span class="ident" id="469403"><a href="/gostd/net/http/request_test.go.html#469278">r</a></span><span class="op" id="469404">.</span><span class="ident" id="469405"><a href="/gostd/net/http/request.go.html#4150391">BasicAuth</a></span><span class="op" id="469414">(</span><span class="op" id="469415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="469419">if</span>&nbsp;<span class="ident" id="469422"><a href="/gostd/net/http/request_test.go.html#469397">ok</a></span>&nbsp;<span class="op" id="469425">!=</span>&nbsp;<span class="ident" id="469428"><a href="/gostd/net/http/request_test.go.html#469242">tt</a></span><span class="op" id="469430">.</span><span class="ident" id="469431"><a href="/gostd/net/http/request_test.go.html#468556">ok</a></span>&nbsp;<span class="op" id="469434">||</span>&nbsp;<span class="ident" id="469437"><a href="/gostd/net/http/request_test.go.html#469377">username</a></span>&nbsp;<span class="op" id="469446">!=</span>&nbsp;<span class="ident" id="469449"><a href="/gostd/net/http/request_test.go.html#469242">tt</a></span><span class="op" id="469451">.</span><span class="ident" id="469452"><a href="/gostd/net/http/request_test.go.html#468529">username</a></span>&nbsp;<span class="op" id="469461">||</span>&nbsp;<span class="ident" id="469464"><a href="/gostd/net/http/request_test.go.html#469387">password</a></span>&nbsp;<span class="op" id="469473">!=</span>&nbsp;<span class="ident" id="469476"><a href="/gostd/net/http/request_test.go.html#469242">tt</a></span><span class="op" id="469478">.</span><span class="ident" id="469479"><a href="/gostd/net/http/request_test.go.html#468539">password</a></span>&nbsp;<span class="op" id="469488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="469493"><a href="/gostd/net/http/request_test.go.html#469218">t</a></span><span class="op" id="469494">.</span><span class="ident" id="469495"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="469501">(</span><span class="string" id="469502">&#34;BasicAuth()&nbsp;=&nbsp;%#v,&nbsp;want&nbsp;%#v&#34;</span><span class="op" id="469531">,</span>&nbsp;<span class="ident" id="469533"><a href="/gostd/net/http/request_test.go.html#467206">getBasicAuthTest</a></span><span class="op" id="469549">{</span><span class="ident" id="469550"><a href="/gostd/net/http/request_test.go.html#469377">username</a></span><span class="op" id="469558">,</span>&nbsp;<span class="ident" id="469560"><a href="/gostd/net/http/request_test.go.html#469387">password</a></span><span class="op" id="469568">,</span>&nbsp;<span class="ident" id="469570"><a href="/gostd/net/http/request_test.go.html#469397">ok</a></span><span class="op" id="469572">}</span><span class="op" id="469573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="469579"><a href="/gostd/net/http/request_test.go.html#467206">getBasicAuthTest</a></span><span class="op" id="469595">{</span><span class="ident" id="469596"><a href="/gostd/net/http/request_test.go.html#469242">tt</a></span><span class="op" id="469598">.</span><span class="ident" id="469599"><a href="/gostd/net/http/request_test.go.html#468529">username</a></span><span class="op" id="469607">,</span>&nbsp;<span class="ident" id="469609"><a href="/gostd/net/http/request_test.go.html#469242">tt</a></span><span class="op" id="469611">.</span><span class="ident" id="469612"><a href="/gostd/net/http/request_test.go.html#468539">password</a></span><span class="op" id="469620">,</span>&nbsp;<span class="ident" id="469622"><a href="/gostd/net/http/request_test.go.html#469242">tt</a></span><span class="op" id="469624">.</span><span class="ident" id="469625"><a href="/gostd/net/http/request_test.go.html#468556">ok</a></span><span class="op" id="469627">}</span><span class="op" id="469628">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="469632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="469635">}</span><br>
<span class="lineno"></span><span class="op" id="469637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="469640">type</span>&nbsp;<span class="ident" id="469645">logWrites</span>&nbsp;<span class="keyword" id="469655">struct</span>&nbsp;<span class="op" id="469662">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="469665">t</span>&nbsp;&nbsp;&nbsp;<span class="op" id="469669">*</span><span class="ident" id="469670"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="469677">.</span><span class="ident" id="469678"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="469681">dst</span>&nbsp;<span class="op" id="469685">*</span><span class="op" id="469686">[</span><span class="op" id="469687">]</span><span class="builtintype" id="469688">string</span><br>
<span class="lineno"></span><span class="op" id="469695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="469698">func</span>&nbsp;<span class="op" id="469703">(</span><span class="ident" id="469704">l</span>&nbsp;<span class="ident" id="469706"><a href="/gostd/net/http/request_test.go.html#469645">logWrites</a></span><span class="op" id="469715">)</span>&nbsp;<span class="ident" id="469717">WriteByte</span><span class="op" id="469726">(</span><span class="ident" id="469727">c</span>&nbsp;<span class="builtintype" id="469729">byte</span><span class="op" id="469733">)</span>&nbsp;<span class="builtintype" id="469735">error</span>&nbsp;<span class="op" id="469741">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="469744"><a href="/gostd/net/http/request_test.go.html#469704">l</a></span><span class="op" id="469745">.</span><span class="ident" id="469746"><a href="/gostd/net/http/request_test.go.html#469665">t</a></span><span class="op" id="469747">.</span><span class="ident" id="469748"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="469754">(</span><span class="string" id="469755">&#34;unexpected&nbsp;WriteByte&nbsp;call&#34;</span><span class="op" id="469782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="469785">return</span>&nbsp;<span class="builtintype" id="469792">nil</span><br>
<span class="lineno"></span><span class="op" id="469796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="469799">func</span>&nbsp;<span class="op" id="469804">(</span><span class="ident" id="469805">l</span>&nbsp;<span class="ident" id="469807"><a href="/gostd/net/http/request_test.go.html#469645">logWrites</a></span><span class="op" id="469816">)</span>&nbsp;<span class="ident" id="469818">Write</span><span class="op" id="469823">(</span><span class="ident" id="469824">p</span>&nbsp;<span class="op" id="469826">[</span><span class="op" id="469827">]</span><span class="builtintype" id="469828">byte</span><span class="op" id="469832">)</span>&nbsp;<span class="op" id="469834">(</span><span class="ident" id="469835">n</span>&nbsp;<span class="builtintype" id="469837">int</span><span class="op" id="469840">,</span>&nbsp;<span class="ident" id="469842">err</span>&nbsp;<span class="builtintype" id="469846">error</span><span class="op" id="469851">)</span>&nbsp;<span class="op" id="469853">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="469856">*</span><span class="ident" id="469857"><a href="/gostd/net/http/request_test.go.html#469805">l</a></span><span class="op" id="469858">.</span><span class="ident" id="469859"><a href="/gostd/net/http/request_test.go.html#469681">dst</a></span>&nbsp;<span class="op" id="469863">=</span>&nbsp;<span class="builtinfunc" id="469865">append</span><span class="op" id="469871">(</span><span class="op" id="469872">*</span><span class="ident" id="469873"><a href="/gostd/net/http/request_test.go.html#469805">l</a></span><span class="op" id="469874">.</span><span class="ident" id="469875"><a href="/gostd/net/http/request_test.go.html#469681">dst</a></span><span class="op" id="469878">,</span>&nbsp;<span class="builtintype" id="469880">string</span><span class="op" id="469886">(</span><span class="ident" id="469887"><a href="/gostd/net/http/request_test.go.html#469824">p</a></span><span class="op" id="469888">)</span><span class="op" id="469889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="469892">return</span>&nbsp;<span class="builtinfunc" id="469899">len</span><span class="op" id="469902">(</span><span class="ident" id="469903"><a href="/gostd/net/http/request_test.go.html#469824">p</a></span><span class="op" id="469904">)</span><span class="op" id="469905">,</span>&nbsp;<span class="builtintype" id="469907">nil</span><br>
<span class="lineno"></span><span class="op" id="469911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="469914">func</span>&nbsp;<span class="ident" id="469919">TestRequestWriteBufferedWriter</span><span class="op" id="469949">(</span><span class="ident" id="469950">t</span>&nbsp;<span class="op" id="469952">*</span><span class="ident" id="469953"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="469960">.</span><span class="ident" id="469961"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="469962">)</span>&nbsp;<span class="op" id="469964">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="469967">got</span>&nbsp;<span class="op" id="469971">:=</span>&nbsp;<span class="op" id="469974">[</span><span class="op" id="469975">]</span><span class="builtintype" id="469976">string</span><span class="op" id="469982">{</span><span class="op" id="469983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="469986">req</span><span class="op" id="469989">,</span>&nbsp;<span class="ident" id="469991">_</span>&nbsp;<span class="op" id="469993">:=</span>&nbsp;<span class="ident" id="469996"><a href="/gostd/net/http/request.go.html#4149529">NewRequest</a></span><span class="op" id="470006">(</span><span class="string" id="470007">&#34;GET&#34;</span><span class="op" id="470012">,</span>&nbsp;<span class="string" id="470014">&#34;http://foo.com/&#34;</span><span class="op" id="470031">,</span>&nbsp;<span class="builtintype" id="470033">nil</span><span class="op" id="470036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="470039"><a href="/gostd/net/http/request_test.go.html#469986">req</a></span><span class="op" id="470042">.</span><span class="ident" id="470043"><a href="/gostd/net/http/request.go.html#4146008">Write</a></span><span class="op" id="470048">(</span><span class="ident" id="470049"><a href="/gostd/net/http/request_test.go.html#469645">logWrites</a></span><span class="op" id="470058">{</span><span class="ident" id="470059"><a href="/gostd/net/http/request_test.go.html#469950">t</a></span><span class="op" id="470060">,</span>&nbsp;<span class="op" id="470062">&amp;</span><span class="ident" id="470063"><a href="/gostd/net/http/request_test.go.html#469967">got</a></span><span class="op" id="470066">}</span><span class="op" id="470067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="470070">want</span>&nbsp;<span class="op" id="470075">:=</span>&nbsp;<span class="op" id="470078">[</span><span class="op" id="470079">]</span><span class="builtintype" id="470080">string</span><span class="op" id="470086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="470090">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span><span class="op" id="470110">,</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="470114">&#34;Host:&nbsp;foo.com\r\n&#34;</span><span class="op" id="470133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="470137">&#34;User-Agent:&nbsp;&#34;</span>&nbsp;<span class="op" id="470152">+</span>&nbsp;<span class="ident" id="470154"><a href="/gostd/net/http/export_test.go.html#7505570">DefaultUserAgent</a></span>&nbsp;<span class="op" id="470171">+</span>&nbsp;<span class="string" id="470173">&#34;\r\n&#34;</span><span class="op" id="470179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="470183">&#34;\r\n&#34;</span><span class="op" id="470189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="470192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="470195">if</span>&nbsp;<span class="op" id="470198">!</span><span class="ident" id="470199"><a href="/gostd/net/http/request_test.go.html#455880">reflect</a></span><span class="op" id="470206">.</span><span class="ident" id="470207"><a href="/gostd/reflect/deepequal.go.html#2775472">DeepEqual</a></span><span class="op" id="470216">(</span><span class="ident" id="470217"><a href="/gostd/net/http/request_test.go.html#469967">got</a></span><span class="op" id="470220">,</span>&nbsp;<span class="ident" id="470222"><a href="/gostd/net/http/request_test.go.html#470070">want</a></span><span class="op" id="470226">)</span>&nbsp;<span class="op" id="470228">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="470232"><a href="/gostd/net/http/request_test.go.html#469950">t</a></span><span class="op" id="470233">.</span><span class="ident" id="470234"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="470240">(</span><span class="string" id="470241">&#34;Writes&nbsp;=&nbsp;%q\n&nbsp;&nbsp;Want&nbsp;=&nbsp;%q&#34;</span><span class="op" id="470267">,</span>&nbsp;<span class="ident" id="470269"><a href="/gostd/net/http/request_test.go.html#469967">got</a></span><span class="op" id="470272">,</span>&nbsp;<span class="ident" id="470274"><a href="/gostd/net/http/request_test.go.html#470070">want</a></span><span class="op" id="470278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="470281">}</span><br>
<span class="lineno"></span><span class="op" id="470283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="470286">func</span>&nbsp;<span class="ident" id="470291">testMissingFile</span><span class="op" id="470306">(</span><span class="ident" id="470307">t</span>&nbsp;<span class="op" id="470309">*</span><span class="ident" id="470310"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="470317">.</span><span class="ident" id="470318"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="470319">,</span>&nbsp;<span class="ident" id="470321">req</span>&nbsp;<span class="op" id="470325">*</span><span class="ident" id="470326"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="470333">)</span>&nbsp;<span class="op" id="470335">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="470338">f</span><span class="op" id="470339">,</span>&nbsp;<span class="ident" id="470341">fh</span><span class="op" id="470343">,</span>&nbsp;<span class="ident" id="470345">err</span>&nbsp;<span class="op" id="470349">:=</span>&nbsp;<span class="ident" id="470352"><a href="/gostd/net/http/request_test.go.html#470321">req</a></span><span class="op" id="470355">.</span><span class="ident" id="470356"><a href="/gostd/net/http/request.go.html#4160019">FormFile</a></span><span class="op" id="470364">(</span><span class="string" id="470365">&#34;missing&#34;</span><span class="op" id="470374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="470377">if</span>&nbsp;<span class="ident" id="470380"><a href="/gostd/net/http/request_test.go.html#470338">f</a></span>&nbsp;<span class="op" id="470382">!=</span>&nbsp;<span class="builtintype" id="470385">nil</span>&nbsp;<span class="op" id="470389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="470393"><a href="/gostd/net/http/request_test.go.html#470307">t</a></span><span class="op" id="470394">.</span><span class="ident" id="470395"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="470401">(</span><span class="string" id="470402">&#34;FormFile&nbsp;file&nbsp;=&nbsp;%v,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="470432">,</span>&nbsp;<span class="ident" id="470434"><a href="/gostd/net/http/request_test.go.html#470338">f</a></span><span class="op" id="470435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="470438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="470441">if</span>&nbsp;<span class="ident" id="470444"><a href="/gostd/net/http/request_test.go.html#470341">fh</a></span>&nbsp;<span class="op" id="470447">!=</span>&nbsp;<span class="builtintype" id="470450">nil</span>&nbsp;<span class="op" id="470454">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="470458"><a href="/gostd/net/http/request_test.go.html#470307">t</a></span><span class="op" id="470459">.</span><span class="ident" id="470460"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="470466">(</span><span class="string" id="470467">&#34;FormFile&nbsp;file&nbsp;header&nbsp;=&nbsp;%q,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="470504">,</span>&nbsp;<span class="ident" id="470506"><a href="/gostd/net/http/request_test.go.html#470341">fh</a></span><span class="op" id="470508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="470511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="470514">if</span>&nbsp;<span class="ident" id="470517"><a href="/gostd/net/http/request_test.go.html#470345">err</a></span>&nbsp;<span class="op" id="470521">!=</span>&nbsp;<span class="ident" id="470524"><a href="/gostd/net/http/request.go.html#4134477">ErrMissingFile</a></span>&nbsp;<span class="op" id="470539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="470543"><a href="/gostd/net/http/request_test.go.html#470307">t</a></span><span class="op" id="470544">.</span><span class="ident" id="470545"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="470551">(</span><span class="string" id="470552">&#34;FormFile&nbsp;err&nbsp;=&nbsp;%q,&nbsp;want&nbsp;ErrMissingFile&#34;</span><span class="op" id="470592">,</span>&nbsp;<span class="ident" id="470594"><a href="/gostd/net/http/request_test.go.html#470345">err</a></span><span class="op" id="470597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="470600">}</span><br>
<span class="lineno">510</span><span class="op" id="470602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="470605">func</span>&nbsp;<span class="ident" id="470610">newTestMultipartRequest</span><span class="op" id="470633">(</span><span class="ident" id="470634">t</span>&nbsp;<span class="op" id="470636">*</span><span class="ident" id="470637"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="470644">.</span><span class="ident" id="470645"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="470646">)</span>&nbsp;<span class="op" id="470648">*</span><span class="ident" id="470649"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span>&nbsp;<span class="op" id="470657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="470660">b</span>&nbsp;<span class="op" id="470662">:=</span>&nbsp;<span class="ident" id="470665"><a href="/gostd/net/http/request_test.go.html#455901">strings</a></span><span class="op" id="470672">.</span><span class="ident" id="470673"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="470682">(</span><span class="ident" id="470683"><a href="/gostd/net/http/request_test.go.html#455901">strings</a></span><span class="op" id="470690">.</span><span class="ident" id="470691"><a href="/gostd/strings/strings.go.html#2983409">Replace</a></span><span class="op" id="470698">(</span><span class="ident" id="470699"><a href="/gostd/net/http/request_test.go.html#472552">message</a></span><span class="op" id="470706">,</span>&nbsp;<span class="string" id="470708">&#34;\n&#34;</span><span class="op" id="470712">,</span>&nbsp;<span class="string" id="470714">&#34;\r\n&#34;</span><span class="op" id="470720">,</span>&nbsp;<span class="op" id="470722">-</span><span class="num" id="470723">1</span><span class="op" id="470724">)</span><span class="op" id="470725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="470728">req</span><span class="op" id="470731">,</span>&nbsp;<span class="ident" id="470733">err</span>&nbsp;<span class="op" id="470737">:=</span>&nbsp;<span class="ident" id="470740"><a href="/gostd/net/http/request.go.html#4149529">NewRequest</a></span><span class="op" id="470750">(</span><span class="string" id="470751">&#34;POST&#34;</span><span class="op" id="470757">,</span>&nbsp;<span class="string" id="470759">&#34;/&#34;</span><span class="op" id="470762">,</span>&nbsp;<span class="ident" id="470764"><a href="/gostd/net/http/request_test.go.html#470660">b</a></span><span class="op" id="470765">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="470768">if</span>&nbsp;<span class="ident" id="470771"><a href="/gostd/net/http/request_test.go.html#470733">err</a></span>&nbsp;<span class="op" id="470775">!=</span>&nbsp;<span class="builtintype" id="470778">nil</span>&nbsp;<span class="op" id="470782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="470786"><a href="/gostd/net/http/request_test.go.html#470634">t</a></span><span class="op" id="470787">.</span><span class="ident" id="470788"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="470793">(</span><span class="string" id="470794">&#34;NewRequest:&#34;</span><span class="op" id="470807">,</span>&nbsp;<span class="ident" id="470809"><a href="/gostd/net/http/request_test.go.html#470733">err</a></span><span class="op" id="470812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="470815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="470818">ctype</span>&nbsp;<span class="op" id="470824">:=</span>&nbsp;<span class="ident" id="470827"><a href="/gostd/net/http/request_test.go.html#455784">fmt</a></span><span class="op" id="470830">.</span><span class="ident" id="470831"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="470838">(</span><span class="string" id="470839">`multipart/form-data;&nbsp;boundary=&#34;%s&#34;`</span><span class="op" id="470875">,</span>&nbsp;<span class="ident" id="470877"><a href="/gostd/net/http/request_test.go.html#472514">boundary</a></span><span class="op" id="470885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="470888"><a href="/gostd/net/http/request_test.go.html#470728">req</a></span><span class="op" id="470891">.</span><span class="ident" id="470892"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="470898">.</span><span class="ident" id="470899"><a href="/gostd/net/http/header.go.html#4126491">Set</a></span><span class="op" id="470902">(</span><span class="string" id="470903">&#34;Content-type&#34;</span><span class="op" id="470917">,</span>&nbsp;<span class="ident" id="470919"><a href="/gostd/net/http/request_test.go.html#470818">ctype</a></span><span class="op" id="470924">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="470927">return</span>&nbsp;<span class="ident" id="470934"><a href="/gostd/net/http/request_test.go.html#470728">req</a></span><br>
<span class="lineno"></span><span class="op" id="470938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="470941">func</span>&nbsp;<span class="ident" id="470946">validateTestMultipartContents</span><span class="op" id="470975">(</span><span class="ident" id="470976">t</span>&nbsp;<span class="op" id="470978">*</span><span class="ident" id="470979"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="470986">.</span><span class="ident" id="470987"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="470988">,</span>&nbsp;<span class="ident" id="470990">req</span>&nbsp;<span class="op" id="470994">*</span><span class="ident" id="470995"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="471002">,</span>&nbsp;<span class="ident" id="471004">allMem</span>&nbsp;<span class="builtintype" id="471011">bool</span><span class="op" id="471015">)</span>&nbsp;<span class="op" id="471017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="471020">if</span>&nbsp;<span class="ident" id="471023">g</span><span class="op" id="471024">,</span>&nbsp;<span class="ident" id="471026">e</span>&nbsp;<span class="op" id="471028">:=</span>&nbsp;<span class="ident" id="471031"><a href="/gostd/net/http/request_test.go.html#470990">req</a></span><span class="op" id="471034">.</span><span class="ident" id="471035"><a href="/gostd/net/http/request.go.html#4159257">FormValue</a></span><span class="op" id="471044">(</span><span class="string" id="471045">&#34;texta&#34;</span><span class="op" id="471052">)</span><span class="op" id="471053">,</span>&nbsp;<span class="ident" id="471055"><a href="/gostd/net/http/request_test.go.html#472468">textaValue</a></span><span class="op" id="471065">;</span>&nbsp;<span class="ident" id="471067"><a href="/gostd/net/http/request_test.go.html#471023">g</a></span>&nbsp;<span class="op" id="471069">!=</span>&nbsp;<span class="ident" id="471072"><a href="/gostd/net/http/request_test.go.html#471026">e</a></span>&nbsp;<span class="op" id="471074">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="471078"><a href="/gostd/net/http/request_test.go.html#470976">t</a></span><span class="op" id="471079">.</span><span class="ident" id="471080"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="471086">(</span><span class="string" id="471087">&#34;texta&nbsp;value&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="471114">,</span>&nbsp;<span class="ident" id="471116"><a href="/gostd/net/http/request_test.go.html#471023">g</a></span><span class="op" id="471117">,</span>&nbsp;<span class="ident" id="471119"><a href="/gostd/net/http/request_test.go.html#471026">e</a></span><span class="op" id="471120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="471123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="471126">if</span>&nbsp;<span class="ident" id="471129">g</span><span class="op" id="471130">,</span>&nbsp;<span class="ident" id="471132">e</span>&nbsp;<span class="op" id="471134">:=</span>&nbsp;<span class="ident" id="471137"><a href="/gostd/net/http/request_test.go.html#470990">req</a></span><span class="op" id="471140">.</span><span class="ident" id="471141"><a href="/gostd/net/http/request.go.html#4159257">FormValue</a></span><span class="op" id="471150">(</span><span class="string" id="471151">&#34;textb&#34;</span><span class="op" id="471158">)</span><span class="op" id="471159">,</span>&nbsp;<span class="ident" id="471161"><a href="/gostd/net/http/request_test.go.html#472491">textbValue</a></span><span class="op" id="471171">;</span>&nbsp;<span class="ident" id="471173"><a href="/gostd/net/http/request_test.go.html#471129">g</a></span>&nbsp;<span class="op" id="471175">!=</span>&nbsp;<span class="ident" id="471178"><a href="/gostd/net/http/request_test.go.html#471132">e</a></span>&nbsp;<span class="op" id="471180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="471184"><a href="/gostd/net/http/request_test.go.html#470976">t</a></span><span class="op" id="471185">.</span><span class="ident" id="471186"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="471192">(</span><span class="string" id="471193">&#34;textb&nbsp;value&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="471220">,</span>&nbsp;<span class="ident" id="471222"><a href="/gostd/net/http/request_test.go.html#471129">g</a></span><span class="op" id="471223">,</span>&nbsp;<span class="ident" id="471225"><a href="/gostd/net/http/request_test.go.html#471132">e</a></span><span class="op" id="471226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="471229">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="471232">if</span>&nbsp;<span class="ident" id="471235">g</span>&nbsp;<span class="op" id="471237">:=</span>&nbsp;<span class="ident" id="471240"><a href="/gostd/net/http/request_test.go.html#470990">req</a></span><span class="op" id="471243">.</span><span class="ident" id="471244"><a href="/gostd/net/http/request.go.html#4159257">FormValue</a></span><span class="op" id="471253">(</span><span class="string" id="471254">&#34;missing&#34;</span><span class="op" id="471263">)</span><span class="op" id="471264">;</span>&nbsp;<span class="ident" id="471266"><a href="/gostd/net/http/request_test.go.html#471235">g</a></span>&nbsp;<span class="op" id="471268">!=</span>&nbsp;<span class="string" id="471271">&#34;&#34;</span>&nbsp;<span class="op" id="471274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="471278"><a href="/gostd/net/http/request_test.go.html#470976">t</a></span><span class="op" id="471279">.</span><span class="ident" id="471280"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="471286">(</span><span class="string" id="471287">&#34;missing&nbsp;value&nbsp;=&nbsp;%q,&nbsp;want&nbsp;empty&nbsp;string&#34;</span><span class="op" id="471326">,</span>&nbsp;<span class="ident" id="471328"><a href="/gostd/net/http/request_test.go.html#471235">g</a></span><span class="op" id="471329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="471332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="471336">assertMem</span>&nbsp;<span class="op" id="471346">:=</span>&nbsp;<span class="keyword" id="471349">func</span><span class="op" id="471353">(</span><span class="ident" id="471354">n</span>&nbsp;<span class="builtintype" id="471356">string</span><span class="op" id="471362">,</span>&nbsp;<span class="ident" id="471364">fd</span>&nbsp;<span class="ident" id="471367"><a href="/gostd/net/http/request_test.go.html#455810">multipart</a></span><span class="op" id="471376">.</span><span class="ident" id="471377"><a href="/gostd/mime/multipart/formdata.go.html#4310690">File</a></span><span class="op" id="471381">)</span>&nbsp;<span class="op" id="471383">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="471387">if</span>&nbsp;<span class="ident" id="471390">_</span><span class="op" id="471391">,</span>&nbsp;<span class="ident" id="471393">ok</span>&nbsp;<span class="op" id="471396">:=</span>&nbsp;<span class="ident" id="471399"><a href="/gostd/net/http/request_test.go.html#471364">fd</a></span><span class="op" id="471401">.</span><span class="op" id="471402">(</span><span class="op" id="471403">*</span><span class="ident" id="471404"><a href="/gostd/net/http/request_test.go.html#455874">os</a></span><span class="op" id="471406">.</span><span class="ident" id="471407"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="471411">)</span><span class="op" id="471412">;</span>&nbsp;<span class="ident" id="471414"><a href="/gostd/net/http/request_test.go.html#471393">ok</a></span>&nbsp;<span class="op" id="471417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="471422"><a href="/gostd/net/http/request_test.go.html#470976">t</a></span><span class="op" id="471423">.</span><span class="ident" id="471424"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="471429">(</span><span class="ident" id="471430"><a href="/gostd/net/http/request_test.go.html#471354">n</a></span><span class="op" id="471431">,</span>&nbsp;<span class="string" id="471433">&#34;&nbsp;is&nbsp;*os.File,&nbsp;should&nbsp;not&nbsp;be&#34;</span><span class="op" id="471462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="471466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="471469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="471472">fda</span>&nbsp;<span class="op" id="471476">:=</span>&nbsp;<span class="ident" id="471479"><a href="/gostd/net/http/request_test.go.html#471862">testMultipartFile</a></span><span class="op" id="471496">(</span><span class="ident" id="471497"><a href="/gostd/net/http/request_test.go.html#470976">t</a></span><span class="op" id="471498">,</span>&nbsp;<span class="ident" id="471500"><a href="/gostd/net/http/request_test.go.html#470990">req</a></span><span class="op" id="471503">,</span>&nbsp;<span class="string" id="471505">&#34;filea&#34;</span><span class="op" id="471512">,</span>&nbsp;<span class="string" id="471514">&#34;filea.txt&#34;</span><span class="op" id="471525">,</span>&nbsp;<span class="ident" id="471527"><a href="/gostd/net/http/request_test.go.html#472390">fileaContents</a></span><span class="op" id="471540">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="471543">defer</span>&nbsp;<span class="ident" id="471549"><a href="/gostd/net/http/request_test.go.html#471472">fda</a></span><span class="op" id="471552">.</span><span class="ident" id="471553"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="471558">(</span><span class="op" id="471559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="471562"><a href="/gostd/net/http/request_test.go.html#471336">assertMem</a></span><span class="op" id="471571">(</span><span class="string" id="471572">&#34;filea&#34;</span><span class="op" id="471579">,</span>&nbsp;<span class="ident" id="471581"><a href="/gostd/net/http/request_test.go.html#471472">fda</a></span><span class="op" id="471584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="471587">fdb</span>&nbsp;<span class="op" id="471591">:=</span>&nbsp;<span class="ident" id="471594"><a href="/gostd/net/http/request_test.go.html#471862">testMultipartFile</a></span><span class="op" id="471611">(</span><span class="ident" id="471612"><a href="/gostd/net/http/request_test.go.html#470976">t</a></span><span class="op" id="471613">,</span>&nbsp;<span class="ident" id="471615"><a href="/gostd/net/http/request_test.go.html#470990">req</a></span><span class="op" id="471618">,</span>&nbsp;<span class="string" id="471620">&#34;fileb&#34;</span><span class="op" id="471627">,</span>&nbsp;<span class="string" id="471629">&#34;fileb.txt&#34;</span><span class="op" id="471640">,</span>&nbsp;<span class="ident" id="471642"><a href="/gostd/net/http/request_test.go.html#472430">filebContents</a></span><span class="op" id="471655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="471658">defer</span>&nbsp;<span class="ident" id="471664"><a href="/gostd/net/http/request_test.go.html#471587">fdb</a></span><span class="op" id="471667">.</span><span class="ident" id="471668"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="471673">(</span><span class="op" id="471674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="471677">if</span>&nbsp;<span class="ident" id="471680"><a href="/gostd/net/http/request_test.go.html#471004">allMem</a></span>&nbsp;<span class="op" id="471687">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="471691"><a href="/gostd/net/http/request_test.go.html#471336">assertMem</a></span><span class="op" id="471700">(</span><span class="string" id="471701">&#34;fileb&#34;</span><span class="op" id="471708">,</span>&nbsp;<span class="ident" id="471710"><a href="/gostd/net/http/request_test.go.html#471587">fdb</a></span><span class="op" id="471713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="471716">}</span>&nbsp;<span class="keyword" id="471718">else</span>&nbsp;<span class="op" id="471723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="471727">if</span>&nbsp;<span class="ident" id="471730">_</span><span class="op" id="471731">,</span>&nbsp;<span class="ident" id="471733">ok</span>&nbsp;<span class="op" id="471736">:=</span>&nbsp;<span class="ident" id="471739"><a href="/gostd/net/http/request_test.go.html#471587">fdb</a></span><span class="op" id="471742">.</span><span class="op" id="471743">(</span><span class="op" id="471744">*</span><span class="ident" id="471745"><a href="/gostd/net/http/request_test.go.html#455874">os</a></span><span class="op" id="471747">.</span><span class="ident" id="471748"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="471752">)</span><span class="op" id="471753">;</span>&nbsp;<span class="op" id="471755">!</span><span class="ident" id="471756"><a href="/gostd/net/http/request_test.go.html#471733">ok</a></span>&nbsp;<span class="op" id="471759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="471764"><a href="/gostd/net/http/request_test.go.html#470976">t</a></span><span class="op" id="471765">.</span><span class="ident" id="471766"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="471772">(</span><span class="string" id="471773">&#34;fileb&nbsp;has&nbsp;unexpected&nbsp;underlying&nbsp;type&nbsp;%T&#34;</span><span class="op" id="471814">,</span>&nbsp;<span class="ident" id="471816"><a href="/gostd/net/http/request_test.go.html#471587">fdb</a></span><span class="op" id="471819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="471823">}</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="471826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="471830"><a href="/gostd/net/http/request_test.go.html#470291">testMissingFile</a></span><span class="op" id="471845">(</span><span class="ident" id="471846"><a href="/gostd/net/http/request_test.go.html#470976">t</a></span><span class="op" id="471847">,</span>&nbsp;<span class="ident" id="471849"><a href="/gostd/net/http/request_test.go.html#470990">req</a></span><span class="op" id="471852">)</span><br>
<span class="lineno"></span><span class="op" id="471854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="471857">func</span>&nbsp;<span class="ident" id="471862">testMultipartFile</span><span class="op" id="471879">(</span><span class="ident" id="471880">t</span>&nbsp;<span class="op" id="471882">*</span><span class="ident" id="471883"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="471890">.</span><span class="ident" id="471891"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="471892">,</span>&nbsp;<span class="ident" id="471894">req</span>&nbsp;<span class="op" id="471898">*</span><span class="ident" id="471899"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="471906">,</span>&nbsp;<span class="ident" id="471908">key</span><span class="op" id="471911">,</span>&nbsp;<span class="ident" id="471913">expectFilename</span><span class="op" id="471927">,</span>&nbsp;<span class="ident" id="471929">expectContent</span>&nbsp;<span class="builtintype" id="471943">string</span><span class="op" id="471949">)</span>&nbsp;<span class="ident" id="471951"><a href="/gostd/net/http/request_test.go.html#455810">multipart</a></span><span class="op" id="471960">.</span><span class="ident" id="471961"><a href="/gostd/mime/multipart/formdata.go.html#4310690">File</a></span>&nbsp;<span class="op" id="471966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="471969">f</span><span class="op" id="471970">,</span>&nbsp;<span class="ident" id="471972">fh</span><span class="op" id="471974">,</span>&nbsp;<span class="ident" id="471976">err</span>&nbsp;<span class="op" id="471980">:=</span>&nbsp;<span class="ident" id="471983"><a href="/gostd/net/http/request_test.go.html#471894">req</a></span><span class="op" id="471986">.</span><span class="ident" id="471987"><a href="/gostd/net/http/request.go.html#4160019">FormFile</a></span><span class="op" id="471995">(</span><span class="ident" id="471996"><a href="/gostd/net/http/request_test.go.html#471908">key</a></span><span class="op" id="471999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="472002">if</span>&nbsp;<span class="ident" id="472005"><a href="/gostd/net/http/request_test.go.html#471976">err</a></span>&nbsp;<span class="op" id="472009">!=</span>&nbsp;<span class="builtintype" id="472012">nil</span>&nbsp;<span class="op" id="472016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="472020"><a href="/gostd/net/http/request_test.go.html#471880">t</a></span><span class="op" id="472021">.</span><span class="ident" id="472022"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="472028">(</span><span class="string" id="472029">&#34;FormFile(%q):&nbsp;%q&#34;</span><span class="op" id="472047">,</span>&nbsp;<span class="ident" id="472049"><a href="/gostd/net/http/request_test.go.html#471908">key</a></span><span class="op" id="472052">,</span>&nbsp;<span class="ident" id="472054"><a href="/gostd/net/http/request_test.go.html#471976">err</a></span><span class="op" id="472057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="472060">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="472063">if</span>&nbsp;<span class="ident" id="472066"><a href="/gostd/net/http/request_test.go.html#471972">fh</a></span><span class="op" id="472068">.</span><span class="ident" id="472069"><a href="/gostd/mime/multipart/formdata.go.html#4310121">Filename</a></span>&nbsp;<span class="op" id="472078">!=</span>&nbsp;<span class="ident" id="472081"><a href="/gostd/net/http/request_test.go.html#471913">expectFilename</a></span>&nbsp;<span class="op" id="472096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="472100"><a href="/gostd/net/http/request_test.go.html#471880">t</a></span><span class="op" id="472101">.</span><span class="ident" id="472102"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="472108">(</span><span class="string" id="472109">&#34;filename&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="472133">,</span>&nbsp;<span class="ident" id="472135"><a href="/gostd/net/http/request_test.go.html#471972">fh</a></span><span class="op" id="472137">.</span><span class="ident" id="472138"><a href="/gostd/mime/multipart/formdata.go.html#4310121">Filename</a></span><span class="op" id="472146">,</span>&nbsp;<span class="ident" id="472148"><a href="/gostd/net/http/request_test.go.html#471913">expectFilename</a></span><span class="op" id="472162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="472165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="472168">var</span>&nbsp;<span class="ident" id="472172">b</span>&nbsp;<span class="ident" id="472174"><a href="/gostd/net/http/request_test.go.html#455756">bytes</a></span><span class="op" id="472179">.</span><span class="ident" id="472180"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="472188">_</span><span class="op" id="472189">,</span>&nbsp;<span class="ident" id="472191"><a href="/gostd/net/http/request_test.go.html#471976">err</a></span>&nbsp;<span class="op" id="472195">=</span>&nbsp;<span class="ident" id="472197"><a href="/gostd/net/http/request_test.go.html#455791">io</a></span><span class="op" id="472199">.</span><span class="ident" id="472200"><a href="/gostd/io/io.go.html#1430946">Copy</a></span><span class="op" id="472204">(</span><span class="op" id="472205">&amp;</span><span class="ident" id="472206"><a href="/gostd/net/http/request_test.go.html#472172">b</a></span><span class="op" id="472207">,</span>&nbsp;<span class="ident" id="472209"><a href="/gostd/net/http/request_test.go.html#471969">f</a></span><span class="op" id="472210">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="472213">if</span>&nbsp;<span class="ident" id="472216"><a href="/gostd/net/http/request_test.go.html#471976">err</a></span>&nbsp;<span class="op" id="472220">!=</span>&nbsp;<span class="builtintype" id="472223">nil</span>&nbsp;<span class="op" id="472227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="472231"><a href="/gostd/net/http/request_test.go.html#471880">t</a></span><span class="op" id="472232">.</span><span class="ident" id="472233"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="472238">(</span><span class="string" id="472239">&#34;copying&nbsp;contents:&#34;</span><span class="op" id="472258">,</span>&nbsp;<span class="ident" id="472260"><a href="/gostd/net/http/request_test.go.html#471976">err</a></span><span class="op" id="472263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="472266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="472269">if</span>&nbsp;<span class="ident" id="472272">g</span>&nbsp;<span class="op" id="472274">:=</span>&nbsp;<span class="ident" id="472277"><a href="/gostd/net/http/request_test.go.html#472172">b</a></span><span class="op" id="472278">.</span><span class="ident" id="472279"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="472285">(</span><span class="op" id="472286">)</span><span class="op" id="472287">;</span>&nbsp;<span class="ident" id="472289"><a href="/gostd/net/http/request_test.go.html#472272">g</a></span>&nbsp;<span class="op" id="472291">!=</span>&nbsp;<span class="ident" id="472294"><a href="/gostd/net/http/request_test.go.html#471929">expectContent</a></span>&nbsp;<span class="op" id="472308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="472312"><a href="/gostd/net/http/request_test.go.html#471880">t</a></span><span class="op" id="472313">.</span><span class="ident" id="472314"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="472320">(</span><span class="string" id="472321">&#34;contents&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="472345">,</span>&nbsp;<span class="ident" id="472347"><a href="/gostd/net/http/request_test.go.html#472272">g</a></span><span class="op" id="472348">,</span>&nbsp;<span class="ident" id="472350"><a href="/gostd/net/http/request_test.go.html#471929">expectContent</a></span><span class="op" id="472363">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="472366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="472369">return</span>&nbsp;<span class="ident" id="472376"><a href="/gostd/net/http/request_test.go.html#471969">f</a></span><br>
<span class="lineno"></span><span class="op" id="472378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="472381">const</span>&nbsp;<span class="op" id="472387">(</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="472390">fileaContents</span>&nbsp;<span class="op" id="472404">=</span>&nbsp;<span class="string" id="472406">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;file.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="472430">filebContents</span>&nbsp;<span class="op" id="472444">=</span>&nbsp;<span class="string" id="472446">&#34;Another&nbsp;test&nbsp;file.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="472468">textaValue</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="472482">=</span>&nbsp;<span class="string" id="472484">&#34;foo&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="472491">textbValue</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="472505">=</span>&nbsp;<span class="string" id="472507">&#34;bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="472514">boundary</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="472528">=</span>&nbsp;<span class="string" id="472530">`MyBoundary`</span><br>
<span class="lineno">580</span><span class="op" id="472543">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="472546">const</span>&nbsp;<span class="ident" id="472552">message</span>&nbsp;<span class="op" id="472560">=</span>&nbsp;<span class="string" id="472562">`<br>
<span class="lineno"></span>--MyBoundary<br>
<span class="lineno"></span>Content-Disposition:&nbsp;form-data;&nbsp;name=&#34;filea&#34;;&nbsp;filename=&#34;filea.txt&#34;<br>
<span class="lineno">585</span>Content-Type:&nbsp;text/plain<br>
<span class="lineno"></span><br>
<span class="lineno"></span>`</span>&nbsp;<span class="op" id="472672">+</span>&nbsp;<span class="ident" id="472674"><a href="/gostd/net/http/request_test.go.html#472390">fileaContents</a></span>&nbsp;<span class="op" id="472688">+</span>&nbsp;<span class="string" id="472690">`<br>
<span class="lineno"></span>--MyBoundary<br>
<span class="lineno"></span>Content-Disposition:&nbsp;form-data;&nbsp;name=&#34;fileb&#34;;&nbsp;filename=&#34;fileb.txt&#34;<br>
<span class="lineno">590</span>Content-Type:&nbsp;text/plain<br>
<span class="lineno"></span><br>
<span class="lineno"></span>`</span>&nbsp;<span class="op" id="472800">+</span>&nbsp;<span class="ident" id="472802"><a href="/gostd/net/http/request_test.go.html#472430">filebContents</a></span>&nbsp;<span class="op" id="472816">+</span>&nbsp;<span class="string" id="472818">`<br>
<span class="lineno"></span>--MyBoundary<br>
<span class="lineno"></span>Content-Disposition:&nbsp;form-data;&nbsp;name=&#34;texta&#34;<br>
<span class="lineno">595</span><br>
<span class="lineno"></span>`</span>&nbsp;<span class="op" id="472881">+</span>&nbsp;<span class="ident" id="472883"><a href="/gostd/net/http/request_test.go.html#472468">textaValue</a></span>&nbsp;<span class="op" id="472894">+</span>&nbsp;<span class="string" id="472896">`<br>
<span class="lineno"></span>--MyBoundary<br>
<span class="lineno"></span>Content-Disposition:&nbsp;form-data;&nbsp;name=&#34;textb&#34;<br>
<span class="lineno"></span><br>
<span class="lineno">600</span>`</span>&nbsp;<span class="op" id="472959">+</span>&nbsp;<span class="ident" id="472961"><a href="/gostd/net/http/request_test.go.html#472491">textbValue</a></span>&nbsp;<span class="op" id="472972">+</span>&nbsp;<span class="string" id="472974">`<br>
<span class="lineno"></span>--MyBoundary--<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="472994">func</span>&nbsp;<span class="ident" id="472999">benchmarkReadRequest</span><span class="op" id="473019">(</span><span class="ident" id="473020">b</span>&nbsp;<span class="op" id="473022">*</span><span class="ident" id="473023"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="473030">.</span><span class="ident" id="473031"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="473032">,</span>&nbsp;<span class="ident" id="473034">request</span>&nbsp;<span class="builtintype" id="473042">string</span><span class="op" id="473048">)</span>&nbsp;<span class="op" id="473050">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="473053"><a href="/gostd/net/http/request_test.go.html#473034">request</a></span>&nbsp;<span class="op" id="473061">=</span>&nbsp;<span class="ident" id="473063"><a href="/gostd/net/http/request_test.go.html#473034">request</a></span>&nbsp;<span class="op" id="473071">+</span>&nbsp;<span class="string" id="473073">&#34;\n&#34;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="473106">//&nbsp;final&nbsp;\n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="473119"><a href="/gostd/net/http/request_test.go.html#473034">request</a></span>&nbsp;<span class="op" id="473127">=</span>&nbsp;<span class="ident" id="473129"><a href="/gostd/net/http/request_test.go.html#455901">strings</a></span><span class="op" id="473136">.</span><span class="ident" id="473137"><a href="/gostd/strings/strings.go.html#2983409">Replace</a></span><span class="op" id="473144">(</span><span class="ident" id="473145"><a href="/gostd/net/http/request_test.go.html#473034">request</a></span><span class="op" id="473152">,</span>&nbsp;<span class="string" id="473154">&#34;\n&#34;</span><span class="op" id="473158">,</span>&nbsp;<span class="string" id="473160">&#34;\r\n&#34;</span><span class="op" id="473166">,</span>&nbsp;<span class="op" id="473168">-</span><span class="num" id="473169">1</span><span class="op" id="473170">)</span>&nbsp;<span class="comment" id="473172">//&nbsp;expand&nbsp;\n&nbsp;to&nbsp;\r\n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="473194"><a href="/gostd/net/http/request_test.go.html#473020">b</a></span><span class="op" id="473195">.</span><span class="ident" id="473196"><a href="/gostd/testing/benchmark.go.html#5452834">SetBytes</a></span><span class="op" id="473204">(</span><span class="builtintype" id="473205">int64</span><span class="op" id="473210">(</span><span class="builtinfunc" id="473211">len</span><span class="op" id="473214">(</span><span class="ident" id="473215"><a href="/gostd/net/http/request_test.go.html#473034">request</a></span><span class="op" id="473222">)</span><span class="op" id="473223">)</span><span class="op" id="473224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="473227">r</span>&nbsp;<span class="op" id="473229">:=</span>&nbsp;<span class="ident" id="473232"><a href="/gostd/net/http/request_test.go.html#455747">bufio</a></span><span class="op" id="473237">.</span><span class="ident" id="473238"><a href="/gostd/bufio/bufio.go.html#1355792">NewReader</a></span><span class="op" id="473247">(</span><span class="op" id="473248">&amp;</span><span class="ident" id="473249"><a href="/gostd/net/http/request_test.go.html#473546">infiniteReader</a></span><span class="op" id="473263">{</span><span class="ident" id="473264"><a href="/gostd/net/http/request_test.go.html#473571">buf</a></span><span class="op" id="473267">:</span>&nbsp;<span class="op" id="473269">[</span><span class="op" id="473270">]</span><span class="builtintype" id="473271">byte</span><span class="op" id="473275">(</span><span class="ident" id="473276"><a href="/gostd/net/http/request_test.go.html#473034">request</a></span><span class="op" id="473283">)</span><span class="op" id="473284">}</span><span class="op" id="473285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="473288"><a href="/gostd/net/http/request_test.go.html#473020">b</a></span><span class="op" id="473289">.</span><span class="ident" id="473290"><a href="/gostd/testing/benchmark.go.html#5453061">ReportAllocs</a></span><span class="op" id="473302">(</span><span class="op" id="473303">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="473306"><a href="/gostd/net/http/request_test.go.html#473020">b</a></span><span class="op" id="473307">.</span><span class="ident" id="473308"><a href="/gostd/testing/benchmark.go.html#5452470">ResetTimer</a></span><span class="op" id="473318">(</span><span class="op" id="473319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="473322">for</span>&nbsp;<span class="ident" id="473326">i</span>&nbsp;<span class="op" id="473328">:=</span>&nbsp;<span class="num" id="473331">0</span><span class="op" id="473332">;</span>&nbsp;<span class="ident" id="473334"><a href="/gostd/net/http/request_test.go.html#473326">i</a></span>&nbsp;<span class="op" id="473336">&lt;</span>&nbsp;<span class="ident" id="473338"><a href="/gostd/net/http/request_test.go.html#473020">b</a></span><span class="op" id="473339">.</span><span class="ident" id="473340"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="473341">;</span>&nbsp;<span class="ident" id="473343"><a href="/gostd/net/http/request_test.go.html#473326">i</a></span><span class="op" id="473344">++</span>&nbsp;<span class="op" id="473347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="473351">_</span><span class="op" id="473352">,</span>&nbsp;<span class="ident" id="473354">err</span>&nbsp;<span class="op" id="473358">:=</span>&nbsp;<span class="ident" id="473361"><a href="/gostd/net/http/request.go.html#4152095">ReadRequest</a></span><span class="op" id="473372">(</span><span class="ident" id="473373"><a href="/gostd/net/http/request_test.go.html#473227">r</a></span><span class="op" id="473374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="473378">if</span>&nbsp;<span class="ident" id="473381"><a href="/gostd/net/http/request_test.go.html#473354">err</a></span>&nbsp;<span class="op" id="473385">!=</span>&nbsp;<span class="builtintype" id="473388">nil</span>&nbsp;<span class="op" id="473392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="473397"><a href="/gostd/net/http/request_test.go.html#473020">b</a></span><span class="op" id="473398">.</span><span class="ident" id="473399"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="473405">(</span><span class="string" id="473406">&#34;failed&nbsp;to&nbsp;read&nbsp;request:&nbsp;%v&#34;</span><span class="op" id="473434">,</span>&nbsp;<span class="ident" id="473436"><a href="/gostd/net/http/request_test.go.html#473354">err</a></span><span class="op" id="473439">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="473443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="473446">}</span><br>
<span class="lineno"></span><span class="op" id="473448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="473451">//&nbsp;infiniteReader&nbsp;satisfies&nbsp;Read&nbsp;requests&nbsp;as&nbsp;if&nbsp;the&nbsp;contents&nbsp;of&nbsp;buf</span><br>
<span class="lineno">620</span><span class="comment" id="473519">//&nbsp;loop&nbsp;indefinitely.</span><br>
<span class="lineno"></span><span class="keyword" id="473541">type</span>&nbsp;<span class="ident" id="473546">infiniteReader</span>&nbsp;<span class="keyword" id="473561">struct</span>&nbsp;<span class="op" id="473568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="473571">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="473578">[</span><span class="op" id="473579">]</span><span class="builtintype" id="473580">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="473586">offset</span>&nbsp;<span class="builtintype" id="473593">int</span><br>
<span class="lineno"></span><span class="op" id="473597">}</span><br>
<span class="lineno">625</span><br>
<span class="lineno"></span><span class="keyword" id="473600">func</span>&nbsp;<span class="op" id="473605">(</span><span class="ident" id="473606">r</span>&nbsp;<span class="op" id="473608">*</span><span class="ident" id="473609"><a href="/gostd/net/http/request_test.go.html#473546">infiniteReader</a></span><span class="op" id="473623">)</span>&nbsp;<span class="ident" id="473625">Read</span><span class="op" id="473629">(</span><span class="ident" id="473630">b</span>&nbsp;<span class="op" id="473632">[</span><span class="op" id="473633">]</span><span class="builtintype" id="473634">byte</span><span class="op" id="473638">)</span>&nbsp;<span class="op" id="473640">(</span><span class="builtintype" id="473641">int</span><span class="op" id="473644">,</span>&nbsp;<span class="builtintype" id="473646">error</span><span class="op" id="473651">)</span>&nbsp;<span class="op" id="473653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="473656">n</span>&nbsp;<span class="op" id="473658">:=</span>&nbsp;<span class="builtinfunc" id="473661">copy</span><span class="op" id="473665">(</span><span class="ident" id="473666"><a href="/gostd/net/http/request_test.go.html#473630">b</a></span><span class="op" id="473667">,</span>&nbsp;<span class="ident" id="473669"><a href="/gostd/net/http/request_test.go.html#473606">r</a></span><span class="op" id="473670">.</span><span class="ident" id="473671"><a href="/gostd/net/http/request_test.go.html#473571">buf</a></span><span class="op" id="473674">[</span><span class="ident" id="473675"><a href="/gostd/net/http/request_test.go.html#473606">r</a></span><span class="op" id="473676">.</span><span class="ident" id="473677"><a href="/gostd/net/http/request_test.go.html#473586">offset</a></span><span class="op" id="473683">:</span><span class="op" id="473684">]</span><span class="op" id="473685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="473688"><a href="/gostd/net/http/request_test.go.html#473606">r</a></span><span class="op" id="473689">.</span><span class="ident" id="473690"><a href="/gostd/net/http/request_test.go.html#473586">offset</a></span>&nbsp;<span class="op" id="473697">=</span>&nbsp;<span class="op" id="473699">(</span><span class="ident" id="473700"><a href="/gostd/net/http/request_test.go.html#473606">r</a></span><span class="op" id="473701">.</span><span class="ident" id="473702"><a href="/gostd/net/http/request_test.go.html#473586">offset</a></span>&nbsp;<span class="op" id="473709">+</span>&nbsp;<span class="ident" id="473711"><a href="/gostd/net/http/request_test.go.html#473656">n</a></span><span class="op" id="473712">)</span>&nbsp;<span class="op" id="473714">%</span>&nbsp;<span class="builtinfunc" id="473716">len</span><span class="op" id="473719">(</span><span class="ident" id="473720"><a href="/gostd/net/http/request_test.go.html#473606">r</a></span><span class="op" id="473721">.</span><span class="ident" id="473722"><a href="/gostd/net/http/request_test.go.html#473571">buf</a></span><span class="op" id="473725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="473728">return</span>&nbsp;<span class="ident" id="473735"><a href="/gostd/net/http/request_test.go.html#473656">n</a></span><span class="op" id="473736">,</span>&nbsp;<span class="builtintype" id="473738">nil</span><br>
<span class="lineno">630</span><span class="op" id="473742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="473745">func</span>&nbsp;<span class="ident" id="473750">BenchmarkReadRequestChrome</span><span class="op" id="473776">(</span><span class="ident" id="473777">b</span>&nbsp;<span class="op" id="473779">*</span><span class="ident" id="473780"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="473787">.</span><span class="ident" id="473788"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="473789">)</span>&nbsp;<span class="op" id="473791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="473794">//&nbsp;https://github.com/felixge/node-http-perf/blob/master/fixtures/get.http</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="473870"><a href="/gostd/net/http/request_test.go.html#472999">benchmarkReadRequest</a></span><span class="op" id="473890">(</span><span class="ident" id="473891"><a href="/gostd/net/http/request_test.go.html#473777">b</a></span><span class="op" id="473892">,</span>&nbsp;<span class="string" id="473894">`GET&nbsp;/&nbsp;HTTP/1.1<br>
<span class="lineno">635</span>Host:&nbsp;localhost:8080<br>
<span class="lineno"></span>Connection:&nbsp;keep-alive<br>
<span class="lineno"></span>Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8<br>
<span class="lineno"></span>User-Agent:&nbsp;Mozilla/5.0&nbsp;(Macintosh;&nbsp;Intel&nbsp;Mac&nbsp;OS&nbsp;X&nbsp;10_8_2)&nbsp;AppleWebKit/537.17&nbsp;(KHTML,&nbsp;like&nbsp;Gecko)&nbsp;Chrome/24.0.1312.52&nbsp;Safari/537.17<br>
<span class="lineno"></span>Accept-Encoding:&nbsp;gzip,deflate,sdch<br>
<span class="lineno">640</span>Accept-Language:&nbsp;en-US,en;q=0.8<br>
<span class="lineno"></span>Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.3<br>
<span class="lineno"></span>Cookie:&nbsp;__utma=1.1978842379.1323102373.1323102373.1323102373.1;&nbsp;EPi:NumberOfVisits=1,2012-02-28T13:42:18;&nbsp;CrmSession=5b707226b9563e1bc69084d07a107c98;&nbsp;plushContainerWidth=100%25;&nbsp;plushNoTopMenu=0;&nbsp;hudson_auto_refresh=false<br>
<span class="lineno"></span>`</span><span class="op" id="474496">)</span><br>
<span class="lineno"></span><span class="op" id="474498">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span><span class="keyword" id="474501">func</span>&nbsp;<span class="ident" id="474506">BenchmarkReadRequestCurl</span><span class="op" id="474530">(</span><span class="ident" id="474531">b</span>&nbsp;<span class="op" id="474533">*</span><span class="ident" id="474534"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="474541">.</span><span class="ident" id="474542"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="474543">)</span>&nbsp;<span class="op" id="474545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="474548">//&nbsp;curl&nbsp;http://localhost:8080/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="474580"><a href="/gostd/net/http/request_test.go.html#472999">benchmarkReadRequest</a></span><span class="op" id="474600">(</span><span class="ident" id="474601"><a href="/gostd/net/http/request_test.go.html#474531">b</a></span><span class="op" id="474602">,</span>&nbsp;<span class="string" id="474604">`GET&nbsp;/&nbsp;HTTP/1.1<br>
<span class="lineno"></span>User-Agent:&nbsp;curl/7.27.0<br>
<span class="lineno">650</span>Host:&nbsp;localhost:8080<br>
<span class="lineno"></span>Accept:&nbsp;*/*<br>
<span class="lineno"></span>`</span><span class="op" id="474678">)</span><br>
<span class="lineno"></span><span class="op" id="474680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">655</span><span class="keyword" id="474683">func</span>&nbsp;<span class="ident" id="474688">BenchmarkReadRequestApachebench</span><span class="op" id="474719">(</span><span class="ident" id="474720">b</span>&nbsp;<span class="op" id="474722">*</span><span class="ident" id="474723"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="474730">.</span><span class="ident" id="474731"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="474732">)</span>&nbsp;<span class="op" id="474734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="474737">//&nbsp;ab&nbsp;-n&nbsp;1&nbsp;-c&nbsp;1&nbsp;http://localhost:8080/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="474777"><a href="/gostd/net/http/request_test.go.html#472999">benchmarkReadRequest</a></span><span class="op" id="474797">(</span><span class="ident" id="474798"><a href="/gostd/net/http/request_test.go.html#474720">b</a></span><span class="op" id="474799">,</span>&nbsp;<span class="string" id="474801">`GET&nbsp;/&nbsp;HTTP/1.0<br>
<span class="lineno"></span>Host:&nbsp;localhost:8080<br>
<span class="lineno"></span>User-Agent:&nbsp;ApacheBench/2.3<br>
<span class="lineno">660</span>Accept:&nbsp;*/*<br>
<span class="lineno"></span>`</span><span class="op" id="474879">)</span><br>
<span class="lineno"></span><span class="op" id="474881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="474884">func</span>&nbsp;<span class="ident" id="474889">BenchmarkReadRequestSiege</span><span class="op" id="474914">(</span><span class="ident" id="474915">b</span>&nbsp;<span class="op" id="474917">*</span><span class="ident" id="474918"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="474925">.</span><span class="ident" id="474926"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="474927">)</span>&nbsp;<span class="op" id="474929">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="474932">//&nbsp;siege&nbsp;-r&nbsp;1&nbsp;-c&nbsp;1&nbsp;http://localhost:8080/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="474975"><a href="/gostd/net/http/request_test.go.html#472999">benchmarkReadRequest</a></span><span class="op" id="474995">(</span><span class="ident" id="474996"><a href="/gostd/net/http/request_test.go.html#474915">b</a></span><span class="op" id="474997">,</span>&nbsp;<span class="string" id="474999">`GET&nbsp;/&nbsp;HTTP/1.1<br>
<span class="lineno"></span>Host:&nbsp;localhost:8080<br>
<span class="lineno"></span>Accept:&nbsp;*/*<br>
<span class="lineno"></span>Accept-Encoding:&nbsp;gzip<br>
<span class="lineno">670</span>User-Agent:&nbsp;JoeDog/1.00&nbsp;[en]&nbsp;(X11;&nbsp;I;&nbsp;Siege&nbsp;2.70)<br>
<span class="lineno"></span>Connection:&nbsp;keep-alive<br>
<span class="lineno"></span>`</span><span class="op" id="475144">)</span><br>
<span class="lineno"></span><span class="op" id="475146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="475149">func</span>&nbsp;<span class="ident" id="475154">BenchmarkReadRequestWrk</span><span class="op" id="475177">(</span><span class="ident" id="475178">b</span>&nbsp;<span class="op" id="475180">*</span><span class="ident" id="475181"><a href="/gostd/net/http/request_test.go.html#455912">testing</a></span><span class="op" id="475188">.</span><span class="ident" id="475189"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="475190">)</span>&nbsp;<span class="op" id="475192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="475195">//&nbsp;wrk&nbsp;-t&nbsp;1&nbsp;-r&nbsp;1&nbsp;-c&nbsp;1&nbsp;http://localhost:8080/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="475241"><a href="/gostd/net/http/request_test.go.html#472999">benchmarkReadRequest</a></span><span class="op" id="475261">(</span><span class="ident" id="475262"><a href="/gostd/net/http/request_test.go.html#475178">b</a></span><span class="op" id="475263">,</span>&nbsp;<span class="string" id="475265">`GET&nbsp;/&nbsp;HTTP/1.1<br>
<span class="lineno"></span>Host:&nbsp;localhost:8080<br>
<span class="lineno"></span>`</span><span class="op" id="475303">)</span><br>
<span class="lineno">680</span><span class="op" id="475305">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
