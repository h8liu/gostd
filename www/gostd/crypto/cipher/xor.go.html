<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/cipher</h2>
<ul>
<li><a href="/gostd/crypto/cipher/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc.go.html">cbc.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc_aes_test.go.html">cbc_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb.go.html">cfb.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb_test.go.html">cfb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher.go.html">cipher.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher_test.go.html">cipher_test.go</a></li>
<li><a href="/gostd/crypto/cipher/common_test.go.html">common_test.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr.go.html">ctr.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr_aes_test.go.html">ctr_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm.go.html">gcm.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm_test.go.html">gcm_test.go</a></li>
<li><a href="/gostd/crypto/cipher/io.go.html">io.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb.go.html">ofb.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb_test.go.html">ofb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/xor.go.html" class="current">xor.go</a></li>
<li><a href="/gostd/crypto/cipher/xor_test.go.html">xor_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4384012">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4384067">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4384121">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4384172">package</span>&nbsp;<span class="ident" id="4384180">cipher</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4384188">import</span>&nbsp;<span class="op" id="4384195">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4384198">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4384209">&#34;unsafe&#34;</span><br>
<span class="lineno">10</span><span class="op" id="4384218">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4384221">const</span>&nbsp;<span class="ident" id="4384227">wordSize</span>&nbsp;<span class="op" id="4384236">=</span>&nbsp;<span class="builtintype" id="4384238">int</span><span class="op" id="4384241">(</span><span class="ident" id="4384242">unsafe</span><span class="op" id="4384248">.</span><span class="ident" id="4384249">Sizeof</span><span class="op" id="4384255">(</span><span class="builtintype" id="4384256">uintptr</span><span class="op" id="4384263">(</span><span class="num" id="4384264">0</span><span class="op" id="4384265">)</span><span class="op" id="4384266">)</span><span class="op" id="4384267">)</span><br>
<span class="lineno"></span><span class="keyword" id="4384269">const</span>&nbsp;<span class="ident" id="4384275">supportsUnaligned</span>&nbsp;<span class="op" id="4384293">=</span>&nbsp;<span class="ident" id="4384295">runtime</span><span class="op" id="4384302">.</span><span class="ident" id="4384303">GOARCH</span>&nbsp;<span class="op" id="4384310">==</span>&nbsp;<span class="string" id="4384313">&#34;386&#34;</span>&nbsp;<span class="op" id="4384319">||</span>&nbsp;<span class="ident" id="4384322">runtime</span><span class="op" id="4384329">.</span><span class="ident" id="4384330">GOARCH</span>&nbsp;<span class="op" id="4384337">==</span>&nbsp;<span class="string" id="4384340">&#34;amd64&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4384349">//&nbsp;fastXORBytes&nbsp;xors&nbsp;in&nbsp;bulk.&nbsp;It&nbsp;only&nbsp;works&nbsp;on&nbsp;architectures&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4384415">//&nbsp;support&nbsp;unaligned&nbsp;read/writes.</span><br>
<span class="lineno"></span><span class="keyword" id="4384449">func</span>&nbsp;<span class="ident" id="4384454">fastXORBytes</span><span class="op" id="4384466">(</span><span class="ident" id="4384467">dst</span><span class="op" id="4384470">,</span>&nbsp;<span class="ident" id="4384472">a</span><span class="op" id="4384473">,</span>&nbsp;<span class="ident" id="4384475">b</span>&nbsp;<span class="op" id="4384477">[</span><span class="op" id="4384478">]</span><span class="builtintype" id="4384479">byte</span><span class="op" id="4384483">)</span>&nbsp;<span class="builtintype" id="4384485">int</span>&nbsp;<span class="op" id="4384489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4384492">n</span>&nbsp;<span class="op" id="4384494">:=</span>&nbsp;<span class="builtinfunc" id="4384497">len</span><span class="op" id="4384500">(</span><span class="ident" id="4384501">a</span><span class="op" id="4384502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4384505">if</span>&nbsp;<span class="builtinfunc" id="4384508">len</span><span class="op" id="4384511">(</span><span class="ident" id="4384512">b</span><span class="op" id="4384513">)</span>&nbsp;<span class="op" id="4384515">&lt;</span>&nbsp;<span class="ident" id="4384517">n</span>&nbsp;<span class="op" id="4384519">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4384523">n</span>&nbsp;<span class="op" id="4384525">=</span>&nbsp;<span class="builtinfunc" id="4384527">len</span><span class="op" id="4384530">(</span><span class="ident" id="4384531">b</span><span class="op" id="4384532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4384535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4384539">w</span>&nbsp;<span class="op" id="4384541">:=</span>&nbsp;<span class="ident" id="4384544">n</span>&nbsp;<span class="op" id="4384546">/</span>&nbsp;<span class="ident" id="4384548">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4384558">if</span>&nbsp;<span class="ident" id="4384561">w</span>&nbsp;<span class="op" id="4384563">&gt;</span>&nbsp;<span class="num" id="4384565">0</span>&nbsp;<span class="op" id="4384567">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4384571">dw</span>&nbsp;<span class="op" id="4384574">:=</span>&nbsp;<span class="op" id="4384577">*</span><span class="op" id="4384578">(</span><span class="op" id="4384579">*</span><span class="op" id="4384580">[</span><span class="op" id="4384581">]</span><span class="builtintype" id="4384582">uintptr</span><span class="op" id="4384589">)</span><span class="op" id="4384590">(</span><span class="ident" id="4384591">unsafe</span><span class="op" id="4384597">.</span><span class="ident" id="4384598">Pointer</span><span class="op" id="4384605">(</span><span class="op" id="4384606">&amp;</span><span class="ident" id="4384607">dst</span><span class="op" id="4384610">)</span><span class="op" id="4384611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4384615">aw</span>&nbsp;<span class="op" id="4384618">:=</span>&nbsp;<span class="op" id="4384621">*</span><span class="op" id="4384622">(</span><span class="op" id="4384623">*</span><span class="op" id="4384624">[</span><span class="op" id="4384625">]</span><span class="builtintype" id="4384626">uintptr</span><span class="op" id="4384633">)</span><span class="op" id="4384634">(</span><span class="ident" id="4384635">unsafe</span><span class="op" id="4384641">.</span><span class="ident" id="4384642">Pointer</span><span class="op" id="4384649">(</span><span class="op" id="4384650">&amp;</span><span class="ident" id="4384651">a</span><span class="op" id="4384652">)</span><span class="op" id="4384653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4384657">bw</span>&nbsp;<span class="op" id="4384660">:=</span>&nbsp;<span class="op" id="4384663">*</span><span class="op" id="4384664">(</span><span class="op" id="4384665">*</span><span class="op" id="4384666">[</span><span class="op" id="4384667">]</span><span class="builtintype" id="4384668">uintptr</span><span class="op" id="4384675">)</span><span class="op" id="4384676">(</span><span class="ident" id="4384677">unsafe</span><span class="op" id="4384683">.</span><span class="ident" id="4384684">Pointer</span><span class="op" id="4384691">(</span><span class="op" id="4384692">&amp;</span><span class="ident" id="4384693">b</span><span class="op" id="4384694">)</span><span class="op" id="4384695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4384699">for</span>&nbsp;<span class="ident" id="4384703">i</span>&nbsp;<span class="op" id="4384705">:=</span>&nbsp;<span class="num" id="4384708">0</span><span class="op" id="4384709">;</span>&nbsp;<span class="ident" id="4384711">i</span>&nbsp;<span class="op" id="4384713">&lt;</span>&nbsp;<span class="ident" id="4384715">w</span><span class="op" id="4384716">;</span>&nbsp;<span class="ident" id="4384718">i</span><span class="op" id="4384719">++</span>&nbsp;<span class="op" id="4384722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4384727">dw</span><span class="op" id="4384729">[</span><span class="ident" id="4384730">i</span><span class="op" id="4384731">]</span>&nbsp;<span class="op" id="4384733">=</span>&nbsp;<span class="ident" id="4384735">aw</span><span class="op" id="4384737">[</span><span class="ident" id="4384738">i</span><span class="op" id="4384739">]</span>&nbsp;<span class="op" id="4384741">^</span>&nbsp;<span class="ident" id="4384743">bw</span><span class="op" id="4384745">[</span><span class="ident" id="4384746">i</span><span class="op" id="4384747">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4384751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4384754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4384758">for</span>&nbsp;<span class="ident" id="4384762">i</span>&nbsp;<span class="op" id="4384764">:=</span>&nbsp;<span class="op" id="4384767">(</span><span class="ident" id="4384768">n</span>&nbsp;<span class="op" id="4384770">-</span>&nbsp;<span class="ident" id="4384772">n</span><span class="op" id="4384773">%</span><span class="ident" id="4384774">wordSize</span><span class="op" id="4384782">)</span><span class="op" id="4384783">;</span>&nbsp;<span class="ident" id="4384785">i</span>&nbsp;<span class="op" id="4384787">&lt;</span>&nbsp;<span class="ident" id="4384789">n</span><span class="op" id="4384790">;</span>&nbsp;<span class="ident" id="4384792">i</span><span class="op" id="4384793">++</span>&nbsp;<span class="op" id="4384796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4384800">dst</span><span class="op" id="4384803">[</span><span class="ident" id="4384804">i</span><span class="op" id="4384805">]</span>&nbsp;<span class="op" id="4384807">=</span>&nbsp;<span class="ident" id="4384809">a</span><span class="op" id="4384810">[</span><span class="ident" id="4384811">i</span><span class="op" id="4384812">]</span>&nbsp;<span class="op" id="4384814">^</span>&nbsp;<span class="ident" id="4384816">b</span><span class="op" id="4384817">[</span><span class="ident" id="4384818">i</span><span class="op" id="4384819">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4384822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4384826">return</span>&nbsp;<span class="ident" id="4384833">n</span><br>
<span class="lineno"></span><span class="op" id="4384835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="4384838">func</span>&nbsp;<span class="ident" id="4384843">safeXORBytes</span><span class="op" id="4384855">(</span><span class="ident" id="4384856">dst</span><span class="op" id="4384859">,</span>&nbsp;<span class="ident" id="4384861">a</span><span class="op" id="4384862">,</span>&nbsp;<span class="ident" id="4384864">b</span>&nbsp;<span class="op" id="4384866">[</span><span class="op" id="4384867">]</span><span class="builtintype" id="4384868">byte</span><span class="op" id="4384872">)</span>&nbsp;<span class="builtintype" id="4384874">int</span>&nbsp;<span class="op" id="4384878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4384881">n</span>&nbsp;<span class="op" id="4384883">:=</span>&nbsp;<span class="builtinfunc" id="4384886">len</span><span class="op" id="4384889">(</span><span class="ident" id="4384890">a</span><span class="op" id="4384891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4384894">if</span>&nbsp;<span class="builtinfunc" id="4384897">len</span><span class="op" id="4384900">(</span><span class="ident" id="4384901">b</span><span class="op" id="4384902">)</span>&nbsp;<span class="op" id="4384904">&lt;</span>&nbsp;<span class="ident" id="4384906">n</span>&nbsp;<span class="op" id="4384908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4384912">n</span>&nbsp;<span class="op" id="4384914">=</span>&nbsp;<span class="builtinfunc" id="4384916">len</span><span class="op" id="4384919">(</span><span class="ident" id="4384920">b</span><span class="op" id="4384921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4384924">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4384927">for</span>&nbsp;<span class="ident" id="4384931">i</span>&nbsp;<span class="op" id="4384933">:=</span>&nbsp;<span class="num" id="4384936">0</span><span class="op" id="4384937">;</span>&nbsp;<span class="ident" id="4384939">i</span>&nbsp;<span class="op" id="4384941">&lt;</span>&nbsp;<span class="ident" id="4384943">n</span><span class="op" id="4384944">;</span>&nbsp;<span class="ident" id="4384946">i</span><span class="op" id="4384947">++</span>&nbsp;<span class="op" id="4384950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4384954">dst</span><span class="op" id="4384957">[</span><span class="ident" id="4384958">i</span><span class="op" id="4384959">]</span>&nbsp;<span class="op" id="4384961">=</span>&nbsp;<span class="ident" id="4384963">a</span><span class="op" id="4384964">[</span><span class="ident" id="4384965">i</span><span class="op" id="4384966">]</span>&nbsp;<span class="op" id="4384968">^</span>&nbsp;<span class="ident" id="4384970">b</span><span class="op" id="4384971">[</span><span class="ident" id="4384972">i</span><span class="op" id="4384973">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4384976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4384979">return</span>&nbsp;<span class="ident" id="4384986">n</span><br>
<span class="lineno"></span><span class="op" id="4384988">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="4384991">//&nbsp;xorBytes&nbsp;xors&nbsp;the&nbsp;bytes&nbsp;in&nbsp;a&nbsp;and&nbsp;b.&nbsp;The&nbsp;destination&nbsp;is&nbsp;assumed&nbsp;to&nbsp;have&nbsp;enough</span><br>
<span class="lineno"></span><span class="comment" id="4385072">//&nbsp;space.&nbsp;Returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;xor&#39;d.</span><br>
<span class="lineno"></span><span class="keyword" id="4385117">func</span>&nbsp;<span class="ident" id="4385122">xorBytes</span><span class="op" id="4385130">(</span><span class="ident" id="4385131">dst</span><span class="op" id="4385134">,</span>&nbsp;<span class="ident" id="4385136">a</span><span class="op" id="4385137">,</span>&nbsp;<span class="ident" id="4385139">b</span>&nbsp;<span class="op" id="4385141">[</span><span class="op" id="4385142">]</span><span class="builtintype" id="4385143">byte</span><span class="op" id="4385147">)</span>&nbsp;<span class="builtintype" id="4385149">int</span>&nbsp;<span class="op" id="4385153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4385156">if</span>&nbsp;<span class="ident" id="4385159">supportsUnaligned</span>&nbsp;<span class="op" id="4385177">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4385181">return</span>&nbsp;<span class="ident" id="4385188">fastXORBytes</span><span class="op" id="4385200">(</span><span class="ident" id="4385201">dst</span><span class="op" id="4385204">,</span>&nbsp;<span class="ident" id="4385206">a</span><span class="op" id="4385207">,</span>&nbsp;<span class="ident" id="4385209">b</span><span class="op" id="4385210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4385213">}</span>&nbsp;<span class="keyword" id="4385215">else</span>&nbsp;<span class="op" id="4385220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4385224">//&nbsp;TODO(hanwen):&nbsp;if&nbsp;(dst,&nbsp;a,&nbsp;b)&nbsp;have&nbsp;common&nbsp;alignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4385280">//&nbsp;we&nbsp;could&nbsp;still&nbsp;try&nbsp;fastXORBytes.&nbsp;It&nbsp;is&nbsp;not&nbsp;clear</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4385334">//&nbsp;how&nbsp;often&nbsp;this&nbsp;happens,&nbsp;and&nbsp;it&#39;s&nbsp;only&nbsp;worth&nbsp;it&nbsp;if</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4385389">//&nbsp;the&nbsp;block&nbsp;encryption&nbsp;itself&nbsp;is&nbsp;hardware</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4385434">//&nbsp;accelerated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4385452">return</span>&nbsp;<span class="ident" id="4385459">safeXORBytes</span><span class="op" id="4385471">(</span><span class="ident" id="4385472">dst</span><span class="op" id="4385475">,</span>&nbsp;<span class="ident" id="4385477">a</span><span class="op" id="4385478">,</span>&nbsp;<span class="ident" id="4385480">b</span><span class="op" id="4385481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4385484">}</span><br>
<span class="lineno"></span><span class="op" id="4385486">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="4385489">//&nbsp;fastXORWords&nbsp;XORs&nbsp;multiples&nbsp;of&nbsp;4&nbsp;or&nbsp;8&nbsp;bytes&nbsp;(depending&nbsp;on&nbsp;architecture.)</span><br>
<span class="lineno"></span><span class="comment" id="4385565">//&nbsp;The&nbsp;arguments&nbsp;are&nbsp;assumed&nbsp;to&nbsp;be&nbsp;of&nbsp;equal&nbsp;length.</span><br>
<span class="lineno"></span><span class="keyword" id="4385617">func</span>&nbsp;<span class="ident" id="4385622">fastXORWords</span><span class="op" id="4385634">(</span><span class="ident" id="4385635">dst</span><span class="op" id="4385638">,</span>&nbsp;<span class="ident" id="4385640">a</span><span class="op" id="4385641">,</span>&nbsp;<span class="ident" id="4385643">b</span>&nbsp;<span class="op" id="4385645">[</span><span class="op" id="4385646">]</span><span class="builtintype" id="4385647">byte</span><span class="op" id="4385651">)</span>&nbsp;<span class="op" id="4385653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4385656">dw</span>&nbsp;<span class="op" id="4385659">:=</span>&nbsp;<span class="op" id="4385662">*</span><span class="op" id="4385663">(</span><span class="op" id="4385664">*</span><span class="op" id="4385665">[</span><span class="op" id="4385666">]</span><span class="builtintype" id="4385667">uintptr</span><span class="op" id="4385674">)</span><span class="op" id="4385675">(</span><span class="ident" id="4385676">unsafe</span><span class="op" id="4385682">.</span><span class="ident" id="4385683">Pointer</span><span class="op" id="4385690">(</span><span class="op" id="4385691">&amp;</span><span class="ident" id="4385692">dst</span><span class="op" id="4385695">)</span><span class="op" id="4385696">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4385699">aw</span>&nbsp;<span class="op" id="4385702">:=</span>&nbsp;<span class="op" id="4385705">*</span><span class="op" id="4385706">(</span><span class="op" id="4385707">*</span><span class="op" id="4385708">[</span><span class="op" id="4385709">]</span><span class="builtintype" id="4385710">uintptr</span><span class="op" id="4385717">)</span><span class="op" id="4385718">(</span><span class="ident" id="4385719">unsafe</span><span class="op" id="4385725">.</span><span class="ident" id="4385726">Pointer</span><span class="op" id="4385733">(</span><span class="op" id="4385734">&amp;</span><span class="ident" id="4385735">a</span><span class="op" id="4385736">)</span><span class="op" id="4385737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4385740">bw</span>&nbsp;<span class="op" id="4385743">:=</span>&nbsp;<span class="op" id="4385746">*</span><span class="op" id="4385747">(</span><span class="op" id="4385748">*</span><span class="op" id="4385749">[</span><span class="op" id="4385750">]</span><span class="builtintype" id="4385751">uintptr</span><span class="op" id="4385758">)</span><span class="op" id="4385759">(</span><span class="ident" id="4385760">unsafe</span><span class="op" id="4385766">.</span><span class="ident" id="4385767">Pointer</span><span class="op" id="4385774">(</span><span class="op" id="4385775">&amp;</span><span class="ident" id="4385776">b</span><span class="op" id="4385777">)</span><span class="op" id="4385778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4385781">n</span>&nbsp;<span class="op" id="4385783">:=</span>&nbsp;<span class="builtinfunc" id="4385786">len</span><span class="op" id="4385789">(</span><span class="ident" id="4385790">b</span><span class="op" id="4385791">)</span>&nbsp;<span class="op" id="4385793">/</span>&nbsp;<span class="ident" id="4385795">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4385805">for</span>&nbsp;<span class="ident" id="4385809">i</span>&nbsp;<span class="op" id="4385811">:=</span>&nbsp;<span class="num" id="4385814">0</span><span class="op" id="4385815">;</span>&nbsp;<span class="ident" id="4385817">i</span>&nbsp;<span class="op" id="4385819">&lt;</span>&nbsp;<span class="ident" id="4385821">n</span><span class="op" id="4385822">;</span>&nbsp;<span class="ident" id="4385824">i</span><span class="op" id="4385825">++</span>&nbsp;<span class="op" id="4385828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4385832">dw</span><span class="op" id="4385834">[</span><span class="ident" id="4385835">i</span><span class="op" id="4385836">]</span>&nbsp;<span class="op" id="4385838">=</span>&nbsp;<span class="ident" id="4385840">aw</span><span class="op" id="4385842">[</span><span class="ident" id="4385843">i</span><span class="op" id="4385844">]</span>&nbsp;<span class="op" id="4385846">^</span>&nbsp;<span class="ident" id="4385848">bw</span><span class="op" id="4385850">[</span><span class="ident" id="4385851">i</span><span class="op" id="4385852">]</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4385855">}</span><br>
<span class="lineno"></span><span class="op" id="4385857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4385860">func</span>&nbsp;<span class="ident" id="4385865">xorWords</span><span class="op" id="4385873">(</span><span class="ident" id="4385874">dst</span><span class="op" id="4385877">,</span>&nbsp;<span class="ident" id="4385879">a</span><span class="op" id="4385880">,</span>&nbsp;<span class="ident" id="4385882">b</span>&nbsp;<span class="op" id="4385884">[</span><span class="op" id="4385885">]</span><span class="builtintype" id="4385886">byte</span><span class="op" id="4385890">)</span>&nbsp;<span class="op" id="4385892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4385895">if</span>&nbsp;<span class="ident" id="4385898">supportsUnaligned</span>&nbsp;<span class="op" id="4385916">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4385920">fastXORWords</span><span class="op" id="4385932">(</span><span class="ident" id="4385933">dst</span><span class="op" id="4385936">,</span>&nbsp;<span class="ident" id="4385938">a</span><span class="op" id="4385939">,</span>&nbsp;<span class="ident" id="4385941">b</span><span class="op" id="4385942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4385945">}</span>&nbsp;<span class="keyword" id="4385947">else</span>&nbsp;<span class="op" id="4385952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4385956">safeXORBytes</span><span class="op" id="4385968">(</span><span class="ident" id="4385969">dst</span><span class="op" id="4385972">,</span>&nbsp;<span class="ident" id="4385974">a</span><span class="op" id="4385975">,</span>&nbsp;<span class="ident" id="4385977">b</span><span class="op" id="4385978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4385981">}</span><br>
<span class="lineno"></span><span class="op" id="4385983">}</span>
</div>
</body>
</html>
