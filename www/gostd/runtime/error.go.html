<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html" class="current">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1470516">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1470571">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1470625">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1470676">package</span>&nbsp;<span class="ident" id="1470684">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1470693">import</span>&nbsp;<span class="string" id="1470700">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1470710">//&nbsp;The&nbsp;Error&nbsp;interface&nbsp;identifies&nbsp;a&nbsp;run&nbsp;time&nbsp;error.</span><br>
<span class="lineno">10</span><span class="keyword" id="1470762">type</span>&nbsp;<span class="ident" id="1470767">Error</span>&nbsp;<span class="keyword" id="1470773">interface</span>&nbsp;<span class="op" id="1470783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1470786">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1470794">//&nbsp;RuntimeError&nbsp;is&nbsp;a&nbsp;no-op&nbsp;function&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1470835">//&nbsp;serves&nbsp;to&nbsp;distinguish&nbsp;types&nbsp;that&nbsp;are&nbsp;runtime</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1470884">//&nbsp;errors&nbsp;from&nbsp;ordinary&nbsp;errors:&nbsp;a&nbsp;type&nbsp;is&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1470929">//&nbsp;runtime&nbsp;error&nbsp;if&nbsp;it&nbsp;has&nbsp;a&nbsp;RuntimeError&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1470980">RuntimeError</span><span class="op" id="1470992">(</span><span class="op" id="1470993">)</span><br>
<span class="lineno"></span><span class="op" id="1470995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="1470998">//&nbsp;A&nbsp;TypeAssertionError&nbsp;explains&nbsp;a&nbsp;failed&nbsp;type&nbsp;assertion.</span><br>
<span class="lineno"></span><span class="keyword" id="1471056">type</span>&nbsp;<span class="ident" id="1471061">TypeAssertionError</span>&nbsp;<span class="keyword" id="1471080">struct</span>&nbsp;<span class="op" id="1471087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1471090">interfaceString</span>&nbsp;<span class="builtintype" id="1471106">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1471114">concreteString</span>&nbsp;&nbsp;<span class="builtintype" id="1471130">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1471138">assertedString</span>&nbsp;&nbsp;<span class="builtintype" id="1471154">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1471162">missingMethod</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1471178">string</span>&nbsp;<span class="comment" id="1471185">//&nbsp;one&nbsp;method&nbsp;needed&nbsp;by&nbsp;Interface,&nbsp;missing&nbsp;from&nbsp;Concrete</span><br>
<span class="lineno"></span><span class="op" id="1471242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1471245">func</span>&nbsp;<span class="op" id="1471250">(</span><span class="op" id="1471251">*</span><span class="ident" id="1471252">TypeAssertionError</span><span class="op" id="1471270">)</span>&nbsp;<span class="ident" id="1471272">RuntimeError</span><span class="op" id="1471284">(</span><span class="op" id="1471285">)</span>&nbsp;<span class="op" id="1471287">{</span><span class="op" id="1471288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="1471291">func</span>&nbsp;<span class="op" id="1471296">(</span><span class="ident" id="1471297">e</span>&nbsp;<span class="op" id="1471299">*</span><span class="ident" id="1471300">TypeAssertionError</span><span class="op" id="1471318">)</span>&nbsp;<span class="ident" id="1471320">Error</span><span class="op" id="1471325">(</span><span class="op" id="1471326">)</span>&nbsp;<span class="builtintype" id="1471328">string</span>&nbsp;<span class="op" id="1471335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1471338">inter</span>&nbsp;<span class="op" id="1471344">:=</span>&nbsp;<span class="ident" id="1471347">e</span><span class="op" id="1471348">.</span><span class="ident" id="1471349">interfaceString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1471366">if</span>&nbsp;<span class="ident" id="1471369">inter</span>&nbsp;<span class="op" id="1471375">==</span>&nbsp;<span class="string" id="1471378">&#34;&#34;</span>&nbsp;<span class="op" id="1471381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1471385">inter</span>&nbsp;<span class="op" id="1471391">=</span>&nbsp;<span class="string" id="1471393">&#34;interface&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1471406">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1471409">if</span>&nbsp;<span class="ident" id="1471412">e</span><span class="op" id="1471413">.</span><span class="ident" id="1471414">concreteString</span>&nbsp;<span class="op" id="1471429">==</span>&nbsp;<span class="string" id="1471432">&#34;&#34;</span>&nbsp;<span class="op" id="1471435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1471439">return</span>&nbsp;<span class="string" id="1471446">&#34;interface&nbsp;conversion:&nbsp;&#34;</span>&nbsp;<span class="op" id="1471471">+</span>&nbsp;<span class="ident" id="1471473">inter</span>&nbsp;<span class="op" id="1471479">+</span>&nbsp;<span class="string" id="1471481">&#34;&nbsp;is&nbsp;nil,&nbsp;not&nbsp;&#34;</span>&nbsp;<span class="op" id="1471497">+</span>&nbsp;<span class="ident" id="1471499">e</span><span class="op" id="1471500">.</span><span class="ident" id="1471501">assertedString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1471517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1471520">if</span>&nbsp;<span class="ident" id="1471523">e</span><span class="op" id="1471524">.</span><span class="ident" id="1471525">missingMethod</span>&nbsp;<span class="op" id="1471539">==</span>&nbsp;<span class="string" id="1471542">&#34;&#34;</span>&nbsp;<span class="op" id="1471545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1471549">return</span>&nbsp;<span class="string" id="1471556">&#34;interface&nbsp;conversion:&nbsp;&#34;</span>&nbsp;<span class="op" id="1471581">+</span>&nbsp;<span class="ident" id="1471583">inter</span>&nbsp;<span class="op" id="1471589">+</span>&nbsp;<span class="string" id="1471591">&#34;&nbsp;is&nbsp;&#34;</span>&nbsp;<span class="op" id="1471598">+</span>&nbsp;<span class="ident" id="1471600">e</span><span class="op" id="1471601">.</span><span class="ident" id="1471602">concreteString</span>&nbsp;<span class="op" id="1471617">+</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1471622">&#34;,&nbsp;not&nbsp;&#34;</span>&nbsp;<span class="op" id="1471631">+</span>&nbsp;<span class="ident" id="1471633">e</span><span class="op" id="1471634">.</span><span class="ident" id="1471635">assertedString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1471651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1471654">return</span>&nbsp;<span class="string" id="1471661">&#34;interface&nbsp;conversion:&nbsp;&#34;</span>&nbsp;<span class="op" id="1471686">+</span>&nbsp;<span class="ident" id="1471688">e</span><span class="op" id="1471689">.</span><span class="ident" id="1471690">concreteString</span>&nbsp;<span class="op" id="1471705">+</span>&nbsp;<span class="string" id="1471707">&#34;&nbsp;is&nbsp;not&nbsp;&#34;</span>&nbsp;<span class="op" id="1471718">+</span>&nbsp;<span class="ident" id="1471720">e</span><span class="op" id="1471721">.</span><span class="ident" id="1471722">assertedString</span>&nbsp;<span class="op" id="1471737">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1471741">&#34;:&nbsp;missing&nbsp;method&nbsp;&#34;</span>&nbsp;<span class="op" id="1471761">+</span>&nbsp;<span class="ident" id="1471763">e</span><span class="op" id="1471764">.</span><span class="ident" id="1471765">missingMethod</span><br>
<span class="lineno"></span><span class="op" id="1471779">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="1471782">//&nbsp;For&nbsp;calling&nbsp;from&nbsp;C.</span><br>
<span class="lineno"></span><span class="keyword" id="1471805">func</span>&nbsp;<span class="ident" id="1471810">newTypeAssertionError</span><span class="op" id="1471831">(</span><span class="ident" id="1471832">ps1</span><span class="op" id="1471835">,</span>&nbsp;<span class="ident" id="1471837">ps2</span><span class="op" id="1471840">,</span>&nbsp;<span class="ident" id="1471842">ps3</span>&nbsp;<span class="op" id="1471846">*</span><span class="builtintype" id="1471847">string</span><span class="op" id="1471853">,</span>&nbsp;<span class="ident" id="1471855">pmeth</span>&nbsp;<span class="op" id="1471861">*</span><span class="builtintype" id="1471862">string</span><span class="op" id="1471868">,</span>&nbsp;<span class="ident" id="1471870">ret</span>&nbsp;<span class="op" id="1471874">*</span><span class="keyword" id="1471875">interface</span><span class="op" id="1471884">{</span><span class="op" id="1471885">}</span><span class="op" id="1471886">)</span>&nbsp;<span class="op" id="1471888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1471891">var</span>&nbsp;<span class="ident" id="1471895">s1</span><span class="op" id="1471897">,</span>&nbsp;<span class="ident" id="1471899">s2</span><span class="op" id="1471901">,</span>&nbsp;<span class="ident" id="1471903">s3</span><span class="op" id="1471905">,</span>&nbsp;<span class="ident" id="1471907">meth</span>&nbsp;<span class="builtintype" id="1471912">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1471921">if</span>&nbsp;<span class="ident" id="1471924">ps1</span>&nbsp;<span class="op" id="1471928">!=</span>&nbsp;<span class="ident" id="1471931">nil</span>&nbsp;<span class="op" id="1471935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1471939">s1</span>&nbsp;<span class="op" id="1471942">=</span>&nbsp;<span class="op" id="1471944">*</span><span class="ident" id="1471945">ps1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1471950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1471953">if</span>&nbsp;<span class="ident" id="1471956">ps2</span>&nbsp;<span class="op" id="1471960">!=</span>&nbsp;<span class="ident" id="1471963">nil</span>&nbsp;<span class="op" id="1471967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1471971">s2</span>&nbsp;<span class="op" id="1471974">=</span>&nbsp;<span class="op" id="1471976">*</span><span class="ident" id="1471977">ps2</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1471982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1471985">if</span>&nbsp;<span class="ident" id="1471988">ps3</span>&nbsp;<span class="op" id="1471992">!=</span>&nbsp;<span class="ident" id="1471995">nil</span>&nbsp;<span class="op" id="1471999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1472003">s3</span>&nbsp;<span class="op" id="1472006">=</span>&nbsp;<span class="op" id="1472008">*</span><span class="ident" id="1472009">ps3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1472014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1472017">if</span>&nbsp;<span class="ident" id="1472020">pmeth</span>&nbsp;<span class="op" id="1472026">!=</span>&nbsp;<span class="ident" id="1472029">nil</span>&nbsp;<span class="op" id="1472033">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1472037">meth</span>&nbsp;<span class="op" id="1472042">=</span>&nbsp;<span class="op" id="1472044">*</span><span class="ident" id="1472045">pmeth</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1472052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1472055">*</span><span class="ident" id="1472056">ret</span>&nbsp;<span class="op" id="1472060">=</span>&nbsp;<span class="op" id="1472062">&amp;</span><span class="ident" id="1472063">TypeAssertionError</span><span class="op" id="1472081">{</span><span class="ident" id="1472082">s1</span><span class="op" id="1472084">,</span>&nbsp;<span class="ident" id="1472086">s2</span><span class="op" id="1472088">,</span>&nbsp;<span class="ident" id="1472090">s3</span><span class="op" id="1472092">,</span>&nbsp;<span class="ident" id="1472094">meth</span><span class="op" id="1472098">}</span><br>
<span class="lineno"></span><span class="op" id="1472100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="comment" id="1472103">//&nbsp;An&nbsp;errorString&nbsp;represents&nbsp;a&nbsp;runtime&nbsp;error&nbsp;described&nbsp;by&nbsp;a&nbsp;single&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="1472178">type</span>&nbsp;<span class="ident" id="1472183">errorString</span>&nbsp;<span class="builtintype" id="1472195">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1472203">func</span>&nbsp;<span class="op" id="1472208">(</span><span class="ident" id="1472209">e</span>&nbsp;<span class="ident" id="1472211">errorString</span><span class="op" id="1472222">)</span>&nbsp;<span class="ident" id="1472224">RuntimeError</span><span class="op" id="1472236">(</span><span class="op" id="1472237">)</span>&nbsp;<span class="op" id="1472239">{</span><span class="op" id="1472240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="1472243">func</span>&nbsp;<span class="op" id="1472248">(</span><span class="ident" id="1472249">e</span>&nbsp;<span class="ident" id="1472251">errorString</span><span class="op" id="1472262">)</span>&nbsp;<span class="ident" id="1472264">Error</span><span class="op" id="1472269">(</span><span class="op" id="1472270">)</span>&nbsp;<span class="builtintype" id="1472272">string</span>&nbsp;<span class="op" id="1472279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1472282">return</span>&nbsp;<span class="string" id="1472289">&#34;runtime&nbsp;error:&nbsp;&#34;</span>&nbsp;<span class="op" id="1472307">+</span>&nbsp;<span class="builtintype" id="1472309">string</span><span class="op" id="1472315">(</span><span class="ident" id="1472316">e</span><span class="op" id="1472317">)</span><br>
<span class="lineno"></span><span class="op" id="1472319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1472322">type</span>&nbsp;<span class="ident" id="1472327">stringer</span>&nbsp;<span class="keyword" id="1472336">interface</span>&nbsp;<span class="op" id="1472346">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1472349">String</span><span class="op" id="1472355">(</span><span class="op" id="1472356">)</span>&nbsp;<span class="builtintype" id="1472358">string</span><br>
<span class="lineno"></span><span class="op" id="1472365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1472368">func</span>&nbsp;<span class="ident" id="1472373">typestring</span><span class="op" id="1472383">(</span><span class="ident" id="1472384">x</span>&nbsp;<span class="keyword" id="1472386">interface</span><span class="op" id="1472395">{</span><span class="op" id="1472396">}</span><span class="op" id="1472397">)</span>&nbsp;<span class="builtintype" id="1472399">string</span>&nbsp;<span class="op" id="1472406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1472409">e</span>&nbsp;<span class="op" id="1472411">:=</span>&nbsp;<span class="op" id="1472414">(</span><span class="op" id="1472415">*</span><span class="ident" id="1472416">eface</span><span class="op" id="1472421">)</span><span class="op" id="1472422">(</span><span class="ident" id="1472423">unsafe</span><span class="op" id="1472429">.</span><span class="ident" id="1472430">Pointer</span><span class="op" id="1472437">(</span><span class="op" id="1472438">&amp;</span><span class="ident" id="1472439">x</span><span class="op" id="1472440">)</span><span class="op" id="1472441">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1472444">return</span>&nbsp;<span class="op" id="1472451">*</span><span class="ident" id="1472452">e</span><span class="op" id="1472453">.</span><span class="ident" id="1472454">_type</span><span class="op" id="1472459">.</span><span class="ident" id="1472460">_string</span><br>
<span class="lineno"></span><span class="op" id="1472468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1472471">//&nbsp;For&nbsp;calling&nbsp;from&nbsp;C.</span><br>
<span class="lineno"></span><span class="comment" id="1472494">//&nbsp;Prints&nbsp;an&nbsp;argument&nbsp;passed&nbsp;to&nbsp;panic.</span><br>
<span class="lineno">85</span><span class="comment" id="1472533">//&nbsp;There&#39;s&nbsp;room&nbsp;for&nbsp;arbitrary&nbsp;complexity&nbsp;here,&nbsp;but&nbsp;we&nbsp;keep&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="1472595">//&nbsp;simple&nbsp;and&nbsp;handle&nbsp;just&nbsp;a&nbsp;few&nbsp;important&nbsp;cases:&nbsp;int,&nbsp;string,&nbsp;and&nbsp;Stringer.</span><br>
<span class="lineno"></span><span class="keyword" id="1472671">func</span>&nbsp;<span class="ident" id="1472676">printany</span><span class="op" id="1472684">(</span><span class="ident" id="1472685">i</span>&nbsp;<span class="keyword" id="1472687">interface</span><span class="op" id="1472696">{</span><span class="op" id="1472697">}</span><span class="op" id="1472698">)</span>&nbsp;<span class="op" id="1472700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1472703">switch</span>&nbsp;<span class="ident" id="1472710">v</span>&nbsp;<span class="op" id="1472712">:=</span>&nbsp;<span class="ident" id="1472715">i</span><span class="op" id="1472716">.</span><span class="op" id="1472717">(</span><span class="keyword" id="1472718">type</span><span class="op" id="1472722">)</span>&nbsp;<span class="op" id="1472724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1472727">case</span>&nbsp;<span class="ident" id="1472732">nil</span><span class="op" id="1472735">:</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1472739">print</span><span class="op" id="1472744">(</span><span class="string" id="1472745">&#34;nil&#34;</span><span class="op" id="1472750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1472753">case</span>&nbsp;<span class="ident" id="1472758">stringer</span><span class="op" id="1472766">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1472770">print</span><span class="op" id="1472775">(</span><span class="ident" id="1472776">v</span><span class="op" id="1472777">.</span><span class="ident" id="1472778">String</span><span class="op" id="1472784">(</span><span class="op" id="1472785">)</span><span class="op" id="1472786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1472789">case</span>&nbsp;<span class="builtintype" id="1472794">error</span><span class="op" id="1472799">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1472803">print</span><span class="op" id="1472808">(</span><span class="ident" id="1472809">v</span><span class="op" id="1472810">.</span><span class="ident" id="1472811">Error</span><span class="op" id="1472816">(</span><span class="op" id="1472817">)</span><span class="op" id="1472818">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1472821">case</span>&nbsp;<span class="builtintype" id="1472826">int</span><span class="op" id="1472829">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1472833">print</span><span class="op" id="1472838">(</span><span class="ident" id="1472839">v</span><span class="op" id="1472840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1472843">case</span>&nbsp;<span class="builtintype" id="1472848">string</span><span class="op" id="1472854">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1472858">print</span><span class="op" id="1472863">(</span><span class="ident" id="1472864">v</span><span class="op" id="1472865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1472868">default</span><span class="op" id="1472875">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1472879">print</span><span class="op" id="1472884">(</span><span class="string" id="1472885">&#34;(&#34;</span><span class="op" id="1472888">,</span>&nbsp;<span class="ident" id="1472890">typestring</span><span class="op" id="1472900">(</span><span class="ident" id="1472901">i</span><span class="op" id="1472902">)</span><span class="op" id="1472903">,</span>&nbsp;<span class="string" id="1472905">&#34;)&nbsp;&#34;</span><span class="op" id="1472909">,</span>&nbsp;<span class="ident" id="1472911">i</span><span class="op" id="1472912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1472915">}</span><br>
<span class="lineno"></span><span class="op" id="1472917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1472920">//&nbsp;called&nbsp;from&nbsp;generated&nbsp;code</span><br>
<span class="lineno">105</span><span class="keyword" id="1472950">func</span>&nbsp;<span class="ident" id="1472955">panicwrap</span><span class="op" id="1472964">(</span><span class="ident" id="1472965">pkg</span><span class="op" id="1472968">,</span>&nbsp;<span class="ident" id="1472970">typ</span><span class="op" id="1472973">,</span>&nbsp;<span class="ident" id="1472975">meth</span>&nbsp;<span class="builtintype" id="1472980">string</span><span class="op" id="1472986">)</span>&nbsp;<span class="op" id="1472988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1472991">panic</span><span class="op" id="1472996">(</span><span class="string" id="1472997">&#34;value&nbsp;method&nbsp;&#34;</span>&nbsp;<span class="op" id="1473013">+</span>&nbsp;<span class="ident" id="1473015">pkg</span>&nbsp;<span class="op" id="1473019">+</span>&nbsp;<span class="string" id="1473021">&#34;.&#34;</span>&nbsp;<span class="op" id="1473025">+</span>&nbsp;<span class="ident" id="1473027">typ</span>&nbsp;<span class="op" id="1473031">+</span>&nbsp;<span class="string" id="1473033">&#34;.&#34;</span>&nbsp;<span class="op" id="1473037">+</span>&nbsp;<span class="ident" id="1473039">meth</span>&nbsp;<span class="op" id="1473044">+</span>&nbsp;<span class="string" id="1473046">&#34;&nbsp;called&nbsp;using&nbsp;nil&nbsp;*&#34;</span>&nbsp;<span class="op" id="1473068">+</span>&nbsp;<span class="ident" id="1473070">typ</span>&nbsp;<span class="op" id="1473074">+</span>&nbsp;<span class="string" id="1473076">&#34;&nbsp;pointer&#34;</span><span class="op" id="1473086">)</span><br>
<span class="lineno"></span><span class="op" id="1473088">}</span>
</div>
</body>
</html>
