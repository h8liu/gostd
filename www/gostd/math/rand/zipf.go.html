<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/rand</h2>
<ul>
<li><a href="/gostd/math/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/rand/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/rand/normal.go.html">normal.go</a></li>
<li><a href="/gostd/math/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/math/rand/rand_test.go.html">rand_test.go</a></li>
<li><a href="/gostd/math/rand/regress_test.go.html">regress_test.go</a></li>
<li><a href="/gostd/math/rand/rng.go.html">rng.go</a></li>
<li><a href="/gostd/math/rand/zipf.go.html" class="current">zipf.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2943500">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2943555">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2943609">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2943660">//&nbsp;W.Hormann,&nbsp;G.Derflinger:</span><br>
<span class="lineno"></span><span class="comment" id="2943688">//&nbsp;&#34;Rejection-Inversion&nbsp;to&nbsp;Generate&nbsp;Variates</span><br>
<span class="lineno"></span><span class="comment" id="2943733">//&nbsp;from&nbsp;Monotone&nbsp;Discrete&nbsp;Distributions&#34;</span><br>
<span class="lineno"></span><span class="comment" id="2943774">//&nbsp;http://eeyore.wu-wien.ac.at/papers/96-04-04.wh-der.ps.gz</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="2943835">package</span>&nbsp;<span class="ident" id="2943843">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2943849">import</span>&nbsp;<span class="string" id="2943856">&#34;math&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2943864">//&nbsp;A&nbsp;Zipf&nbsp;generates&nbsp;Zipf&nbsp;distributed&nbsp;variates.</span><br>
<span class="lineno">15</span><span class="keyword" id="2943911">type</span>&nbsp;<span class="ident" id="2943916">Zipf</span>&nbsp;<span class="keyword" id="2943921">struct</span>&nbsp;<span class="op" id="2943928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943931">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2943944">*</span><span class="ident" id="2943945"><a href="/gostd/math/rand/rand.go.html#2921995">Rand</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943951">imax</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2943964">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943973">v</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2943986">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943995">q</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2944008">float64</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944017">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2944030">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944039">oneminusQ</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2944052">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944061">oneminusQinv</span>&nbsp;<span class="builtintype" id="2944074">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944083">hxm</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2944096">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944105">hx0minusHxm</span>&nbsp;&nbsp;<span class="builtintype" id="2944118">float64</span><br>
<span class="lineno">25</span><span class="op" id="2944126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2944129">func</span>&nbsp;<span class="op" id="2944134">(</span><span class="ident" id="2944135">z</span>&nbsp;<span class="op" id="2944137">*</span><span class="ident" id="2944138"><a href="/gostd/math/rand/zipf.go.html#2943916">Zipf</a></span><span class="op" id="2944142">)</span>&nbsp;<span class="ident" id="2944144">h</span><span class="op" id="2944145">(</span><span class="ident" id="2944146">x</span>&nbsp;<span class="builtintype" id="2944148">float64</span><span class="op" id="2944155">)</span>&nbsp;<span class="builtintype" id="2944157">float64</span>&nbsp;<span class="op" id="2944165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2944168">return</span>&nbsp;<span class="ident" id="2944175"><a href="/gostd/math/rand/zipf.go.html#2943856">math</a></span><span class="op" id="2944179">.</span><span class="ident" id="2944180"><a href="/gostd/math/exp.go.html#2229936">Exp</a></span><span class="op" id="2944183">(</span><span class="ident" id="2944184"><a href="/gostd/math/rand/zipf.go.html#2944135">z</a></span><span class="op" id="2944185">.</span><span class="ident" id="2944186"><a href="/gostd/math/rand/zipf.go.html#2944039">oneminusQ</a></span><span class="op" id="2944195">*</span><span class="ident" id="2944196"><a href="/gostd/math/rand/zipf.go.html#2943856">math</a></span><span class="op" id="2944200">.</span><span class="ident" id="2944201"><a href="/gostd/math/log.go.html#2300722">Log</a></span><span class="op" id="2944204">(</span><span class="ident" id="2944205"><a href="/gostd/math/rand/zipf.go.html#2944135">z</a></span><span class="op" id="2944206">.</span><span class="ident" id="2944207"><a href="/gostd/math/rand/zipf.go.html#2943973">v</a></span><span class="op" id="2944208">+</span><span class="ident" id="2944209"><a href="/gostd/math/rand/zipf.go.html#2944146">x</a></span><span class="op" id="2944210">)</span><span class="op" id="2944211">)</span>&nbsp;<span class="op" id="2944213">*</span>&nbsp;<span class="ident" id="2944215"><a href="/gostd/math/rand/zipf.go.html#2944135">z</a></span><span class="op" id="2944216">.</span><span class="ident" id="2944217"><a href="/gostd/math/rand/zipf.go.html#2944061">oneminusQinv</a></span><br>
<span class="lineno"></span><span class="op" id="2944230">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="2944233">func</span>&nbsp;<span class="op" id="2944238">(</span><span class="ident" id="2944239">z</span>&nbsp;<span class="op" id="2944241">*</span><span class="ident" id="2944242"><a href="/gostd/math/rand/zipf.go.html#2943916">Zipf</a></span><span class="op" id="2944246">)</span>&nbsp;<span class="ident" id="2944248">hinv</span><span class="op" id="2944252">(</span><span class="ident" id="2944253">x</span>&nbsp;<span class="builtintype" id="2944255">float64</span><span class="op" id="2944262">)</span>&nbsp;<span class="builtintype" id="2944264">float64</span>&nbsp;<span class="op" id="2944272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2944275">return</span>&nbsp;<span class="ident" id="2944282"><a href="/gostd/math/rand/zipf.go.html#2943856">math</a></span><span class="op" id="2944286">.</span><span class="ident" id="2944287"><a href="/gostd/math/exp.go.html#2229936">Exp</a></span><span class="op" id="2944290">(</span><span class="ident" id="2944291"><a href="/gostd/math/rand/zipf.go.html#2944239">z</a></span><span class="op" id="2944292">.</span><span class="ident" id="2944293"><a href="/gostd/math/rand/zipf.go.html#2944061">oneminusQinv</a></span><span class="op" id="2944305">*</span><span class="ident" id="2944306"><a href="/gostd/math/rand/zipf.go.html#2943856">math</a></span><span class="op" id="2944310">.</span><span class="ident" id="2944311"><a href="/gostd/math/log.go.html#2300722">Log</a></span><span class="op" id="2944314">(</span><span class="ident" id="2944315"><a href="/gostd/math/rand/zipf.go.html#2944239">z</a></span><span class="op" id="2944316">.</span><span class="ident" id="2944317"><a href="/gostd/math/rand/zipf.go.html#2944039">oneminusQ</a></span><span class="op" id="2944326">*</span><span class="ident" id="2944327"><a href="/gostd/math/rand/zipf.go.html#2944253">x</a></span><span class="op" id="2944328">)</span><span class="op" id="2944329">)</span>&nbsp;<span class="op" id="2944331">-</span>&nbsp;<span class="ident" id="2944333"><a href="/gostd/math/rand/zipf.go.html#2944239">z</a></span><span class="op" id="2944334">.</span><span class="ident" id="2944335"><a href="/gostd/math/rand/zipf.go.html#2943973">v</a></span><br>
<span class="lineno"></span><span class="op" id="2944337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="2944340">//&nbsp;NewZipf&nbsp;returns&nbsp;a&nbsp;Zipf&nbsp;generating&nbsp;variates&nbsp;p(k)&nbsp;on&nbsp;[0,&nbsp;imax]</span><br>
<span class="lineno"></span><span class="comment" id="2944404">//&nbsp;proportional&nbsp;to&nbsp;(v+k)**(-s)&nbsp;where&nbsp;s&gt;1&nbsp;and&nbsp;k&gt;=0,&nbsp;and&nbsp;v&gt;=1.</span><br>
<span class="lineno"></span><span class="keyword" id="2944465">func</span>&nbsp;<span class="ident" id="2944470">NewZipf</span><span class="op" id="2944477">(</span><span class="ident" id="2944478">r</span>&nbsp;<span class="op" id="2944480">*</span><span class="ident" id="2944481"><a href="/gostd/math/rand/rand.go.html#2921995">Rand</a></span><span class="op" id="2944485">,</span>&nbsp;<span class="ident" id="2944487">s</span>&nbsp;<span class="builtintype" id="2944489">float64</span><span class="op" id="2944496">,</span>&nbsp;<span class="ident" id="2944498">v</span>&nbsp;<span class="builtintype" id="2944500">float64</span><span class="op" id="2944507">,</span>&nbsp;<span class="ident" id="2944509">imax</span>&nbsp;<span class="builtintype" id="2944514">uint64</span><span class="op" id="2944520">)</span>&nbsp;<span class="op" id="2944522">*</span><span class="ident" id="2944523"><a href="/gostd/math/rand/zipf.go.html#2943916">Zipf</a></span>&nbsp;<span class="op" id="2944528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944531">z</span>&nbsp;<span class="op" id="2944533">:=</span>&nbsp;<span class="builtinfunc" id="2944536">new</span><span class="op" id="2944539">(</span><span class="ident" id="2944540"><a href="/gostd/math/rand/zipf.go.html#2943916">Zipf</a></span><span class="op" id="2944544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2944547">if</span>&nbsp;<span class="ident" id="2944550"><a href="/gostd/math/rand/zipf.go.html#2944487">s</a></span>&nbsp;<span class="op" id="2944552">&lt;=</span>&nbsp;<span class="num" id="2944555">1.0</span>&nbsp;<span class="op" id="2944559">||</span>&nbsp;<span class="ident" id="2944562"><a href="/gostd/math/rand/zipf.go.html#2944498">v</a></span>&nbsp;<span class="op" id="2944564">&lt;</span>&nbsp;<span class="num" id="2944566">1</span>&nbsp;<span class="op" id="2944568">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2944572">return</span>&nbsp;<span class="builtintype" id="2944579">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2944584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944587"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944588">.</span><span class="ident" id="2944589"><a href="/gostd/math/rand/zipf.go.html#2943931">r</a></span>&nbsp;<span class="op" id="2944591">=</span>&nbsp;<span class="ident" id="2944593"><a href="/gostd/math/rand/zipf.go.html#2944478">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944596"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944597">.</span><span class="ident" id="2944598"><a href="/gostd/math/rand/zipf.go.html#2943951">imax</a></span>&nbsp;<span class="op" id="2944603">=</span>&nbsp;<span class="builtintype" id="2944605">float64</span><span class="op" id="2944612">(</span><span class="ident" id="2944613"><a href="/gostd/math/rand/zipf.go.html#2944509">imax</a></span><span class="op" id="2944617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944620"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944621">.</span><span class="ident" id="2944622"><a href="/gostd/math/rand/zipf.go.html#2943973">v</a></span>&nbsp;<span class="op" id="2944624">=</span>&nbsp;<span class="ident" id="2944626"><a href="/gostd/math/rand/zipf.go.html#2944498">v</a></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944629"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944630">.</span><span class="ident" id="2944631"><a href="/gostd/math/rand/zipf.go.html#2943995">q</a></span>&nbsp;<span class="op" id="2944633">=</span>&nbsp;<span class="ident" id="2944635"><a href="/gostd/math/rand/zipf.go.html#2944487">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944638"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944639">.</span><span class="ident" id="2944640"><a href="/gostd/math/rand/zipf.go.html#2944039">oneminusQ</a></span>&nbsp;<span class="op" id="2944650">=</span>&nbsp;<span class="num" id="2944652">1.0</span>&nbsp;<span class="op" id="2944656">-</span>&nbsp;<span class="ident" id="2944658"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944659">.</span><span class="ident" id="2944660"><a href="/gostd/math/rand/zipf.go.html#2943995">q</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944663"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944664">.</span><span class="ident" id="2944665"><a href="/gostd/math/rand/zipf.go.html#2944061">oneminusQinv</a></span>&nbsp;<span class="op" id="2944678">=</span>&nbsp;<span class="num" id="2944680">1.0</span>&nbsp;<span class="op" id="2944684">/</span>&nbsp;<span class="ident" id="2944686"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944687">.</span><span class="ident" id="2944688"><a href="/gostd/math/rand/zipf.go.html#2944039">oneminusQ</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944699"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944700">.</span><span class="ident" id="2944701"><a href="/gostd/math/rand/zipf.go.html#2944083">hxm</a></span>&nbsp;<span class="op" id="2944705">=</span>&nbsp;<span class="ident" id="2944707"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944708">.</span><span class="ident" id="2944709"><a href="/gostd/math/rand/zipf.go.html#2944144">h</a></span><span class="op" id="2944710">(</span><span class="ident" id="2944711"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944712">.</span><span class="ident" id="2944713"><a href="/gostd/math/rand/zipf.go.html#2943951">imax</a></span>&nbsp;<span class="op" id="2944718">+</span>&nbsp;<span class="num" id="2944720">0.5</span><span class="op" id="2944723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944726"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944727">.</span><span class="ident" id="2944728"><a href="/gostd/math/rand/zipf.go.html#2944105">hx0minusHxm</a></span>&nbsp;<span class="op" id="2944740">=</span>&nbsp;<span class="ident" id="2944742"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944743">.</span><span class="ident" id="2944744"><a href="/gostd/math/rand/zipf.go.html#2944144">h</a></span><span class="op" id="2944745">(</span><span class="num" id="2944746">0.5</span><span class="op" id="2944749">)</span>&nbsp;<span class="op" id="2944751">-</span>&nbsp;<span class="ident" id="2944753"><a href="/gostd/math/rand/zipf.go.html#2943856">math</a></span><span class="op" id="2944757">.</span><span class="ident" id="2944758"><a href="/gostd/math/exp.go.html#2229936">Exp</a></span><span class="op" id="2944761">(</span><span class="ident" id="2944762"><a href="/gostd/math/rand/zipf.go.html#2943856">math</a></span><span class="op" id="2944766">.</span><span class="ident" id="2944767"><a href="/gostd/math/log.go.html#2300722">Log</a></span><span class="op" id="2944770">(</span><span class="ident" id="2944771"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944772">.</span><span class="ident" id="2944773"><a href="/gostd/math/rand/zipf.go.html#2943973">v</a></span><span class="op" id="2944774">)</span><span class="op" id="2944775">*</span><span class="op" id="2944776">(</span><span class="op" id="2944777">-</span><span class="ident" id="2944778"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944779">.</span><span class="ident" id="2944780"><a href="/gostd/math/rand/zipf.go.html#2943995">q</a></span><span class="op" id="2944781">)</span><span class="op" id="2944782">)</span>&nbsp;<span class="op" id="2944784">-</span>&nbsp;<span class="ident" id="2944786"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944787">.</span><span class="ident" id="2944788"><a href="/gostd/math/rand/zipf.go.html#2944083">hxm</a></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944793"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944794">.</span><span class="ident" id="2944795"><a href="/gostd/math/rand/zipf.go.html#2944017">s</a></span>&nbsp;<span class="op" id="2944797">=</span>&nbsp;<span class="num" id="2944799">1</span>&nbsp;<span class="op" id="2944801">-</span>&nbsp;<span class="ident" id="2944803"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944804">.</span><span class="ident" id="2944805"><a href="/gostd/math/rand/zipf.go.html#2944248">hinv</a></span><span class="op" id="2944809">(</span><span class="ident" id="2944810"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944811">.</span><span class="ident" id="2944812"><a href="/gostd/math/rand/zipf.go.html#2944144">h</a></span><span class="op" id="2944813">(</span><span class="num" id="2944814">1.5</span><span class="op" id="2944817">)</span><span class="op" id="2944818">-</span><span class="ident" id="2944819"><a href="/gostd/math/rand/zipf.go.html#2943856">math</a></span><span class="op" id="2944823">.</span><span class="ident" id="2944824"><a href="/gostd/math/exp.go.html#2229936">Exp</a></span><span class="op" id="2944827">(</span><span class="op" id="2944828">-</span><span class="ident" id="2944829"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944830">.</span><span class="ident" id="2944831"><a href="/gostd/math/rand/zipf.go.html#2943995">q</a></span><span class="op" id="2944832">*</span><span class="ident" id="2944833"><a href="/gostd/math/rand/zipf.go.html#2943856">math</a></span><span class="op" id="2944837">.</span><span class="ident" id="2944838"><a href="/gostd/math/log.go.html#2300722">Log</a></span><span class="op" id="2944841">(</span><span class="ident" id="2944842"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><span class="op" id="2944843">.</span><span class="ident" id="2944844"><a href="/gostd/math/rand/zipf.go.html#2943973">v</a></span><span class="op" id="2944845">+</span><span class="num" id="2944846">1.0</span><span class="op" id="2944849">)</span><span class="op" id="2944850">)</span><span class="op" id="2944851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2944854">return</span>&nbsp;<span class="ident" id="2944861"><a href="/gostd/math/rand/zipf.go.html#2944531">z</a></span><br>
<span class="lineno"></span><span class="op" id="2944863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2944866">//&nbsp;Uint64&nbsp;returns&nbsp;a&nbsp;value&nbsp;drawn&nbsp;from&nbsp;the&nbsp;Zipf&nbsp;distribution&nbsp;described</span><br>
<span class="lineno">55</span><span class="comment" id="2944935">//&nbsp;by&nbsp;the&nbsp;Zipf&nbsp;object.</span><br>
<span class="lineno"></span><span class="keyword" id="2944958">func</span>&nbsp;<span class="op" id="2944963">(</span><span class="ident" id="2944964">z</span>&nbsp;<span class="op" id="2944966">*</span><span class="ident" id="2944967"><a href="/gostd/math/rand/zipf.go.html#2943916">Zipf</a></span><span class="op" id="2944971">)</span>&nbsp;<span class="ident" id="2944973">Uint64</span><span class="op" id="2944979">(</span><span class="op" id="2944980">)</span>&nbsp;<span class="builtintype" id="2944982">uint64</span>&nbsp;<span class="op" id="2944989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2944992">if</span>&nbsp;<span class="ident" id="2944995"><a href="/gostd/math/rand/zipf.go.html#2944964">z</a></span>&nbsp;<span class="op" id="2944997">==</span>&nbsp;<span class="builtintype" id="2945000">nil</span>&nbsp;<span class="op" id="2945004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2945008">panic</span><span class="op" id="2945013">(</span><span class="string" id="2945014">&#34;rand:&nbsp;nil&nbsp;Zipf&#34;</span><span class="op" id="2945030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2945033">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945036">k</span>&nbsp;<span class="op" id="2945038">:=</span>&nbsp;<span class="num" id="2945041">0.0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2945047">for</span>&nbsp;<span class="op" id="2945051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945055">r</span>&nbsp;<span class="op" id="2945057">:=</span>&nbsp;<span class="ident" id="2945060"><a href="/gostd/math/rand/zipf.go.html#2944964">z</a></span><span class="op" id="2945061">.</span><span class="ident" id="2945062"><a href="/gostd/math/rand/zipf.go.html#2943931">r</a></span><span class="op" id="2945063">.</span><span class="ident" id="2945064"><a href="/gostd/math/rand/rand.go.html#2924013">Float64</a></span><span class="op" id="2945071">(</span><span class="op" id="2945072">)</span>&nbsp;<span class="comment" id="2945074">//&nbsp;r&nbsp;on&nbsp;[0,1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945090">ur</span>&nbsp;<span class="op" id="2945093">:=</span>&nbsp;<span class="ident" id="2945096"><a href="/gostd/math/rand/zipf.go.html#2944964">z</a></span><span class="op" id="2945097">.</span><span class="ident" id="2945098"><a href="/gostd/math/rand/zipf.go.html#2944083">hxm</a></span>&nbsp;<span class="op" id="2945102">+</span>&nbsp;<span class="ident" id="2945104"><a href="/gostd/math/rand/zipf.go.html#2945055">r</a></span><span class="op" id="2945105">*</span><span class="ident" id="2945106"><a href="/gostd/math/rand/zipf.go.html#2944964">z</a></span><span class="op" id="2945107">.</span><span class="ident" id="2945108"><a href="/gostd/math/rand/zipf.go.html#2944105">hx0minusHxm</a></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945122">x</span>&nbsp;<span class="op" id="2945124">:=</span>&nbsp;<span class="ident" id="2945127"><a href="/gostd/math/rand/zipf.go.html#2944964">z</a></span><span class="op" id="2945128">.</span><span class="ident" id="2945129"><a href="/gostd/math/rand/zipf.go.html#2944248">hinv</a></span><span class="op" id="2945133">(</span><span class="ident" id="2945134"><a href="/gostd/math/rand/zipf.go.html#2945090">ur</a></span><span class="op" id="2945136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945140"><a href="/gostd/math/rand/zipf.go.html#2945036">k</a></span>&nbsp;<span class="op" id="2945142">=</span>&nbsp;<span class="ident" id="2945144"><a href="/gostd/math/rand/zipf.go.html#2943856">math</a></span><span class="op" id="2945148">.</span><span class="ident" id="2945149"><a href="/gostd/math/floor.go.html#2243355">Floor</a></span><span class="op" id="2945154">(</span><span class="ident" id="2945155"><a href="/gostd/math/rand/zipf.go.html#2945122">x</a></span>&nbsp;<span class="op" id="2945157">+</span>&nbsp;<span class="num" id="2945159">0.5</span><span class="op" id="2945162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2945166">if</span>&nbsp;<span class="ident" id="2945169"><a href="/gostd/math/rand/zipf.go.html#2945036">k</a></span><span class="op" id="2945170">-</span><span class="ident" id="2945171"><a href="/gostd/math/rand/zipf.go.html#2945122">x</a></span>&nbsp;<span class="op" id="2945173">&lt;=</span>&nbsp;<span class="ident" id="2945176"><a href="/gostd/math/rand/zipf.go.html#2944964">z</a></span><span class="op" id="2945177">.</span><span class="ident" id="2945178"><a href="/gostd/math/rand/zipf.go.html#2944017">s</a></span>&nbsp;<span class="op" id="2945180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2945185">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2945193">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2945197">if</span>&nbsp;<span class="ident" id="2945200"><a href="/gostd/math/rand/zipf.go.html#2945090">ur</a></span>&nbsp;<span class="op" id="2945203">&gt;=</span>&nbsp;<span class="ident" id="2945206"><a href="/gostd/math/rand/zipf.go.html#2944964">z</a></span><span class="op" id="2945207">.</span><span class="ident" id="2945208"><a href="/gostd/math/rand/zipf.go.html#2944144">h</a></span><span class="op" id="2945209">(</span><span class="ident" id="2945210"><a href="/gostd/math/rand/zipf.go.html#2945036">k</a></span><span class="op" id="2945211">+</span><span class="num" id="2945212">0.5</span><span class="op" id="2945215">)</span><span class="op" id="2945216">-</span><span class="ident" id="2945217"><a href="/gostd/math/rand/zipf.go.html#2943856">math</a></span><span class="op" id="2945221">.</span><span class="ident" id="2945222"><a href="/gostd/math/exp.go.html#2229936">Exp</a></span><span class="op" id="2945225">(</span><span class="op" id="2945226">-</span><span class="ident" id="2945227"><a href="/gostd/math/rand/zipf.go.html#2943856">math</a></span><span class="op" id="2945231">.</span><span class="ident" id="2945232"><a href="/gostd/math/log.go.html#2300722">Log</a></span><span class="op" id="2945235">(</span><span class="ident" id="2945236"><a href="/gostd/math/rand/zipf.go.html#2945036">k</a></span><span class="op" id="2945237">+</span><span class="ident" id="2945238"><a href="/gostd/math/rand/zipf.go.html#2944964">z</a></span><span class="op" id="2945239">.</span><span class="ident" id="2945240"><a href="/gostd/math/rand/zipf.go.html#2943973">v</a></span><span class="op" id="2945241">)</span><span class="op" id="2945242">*</span><span class="ident" id="2945243"><a href="/gostd/math/rand/zipf.go.html#2944964">z</a></span><span class="op" id="2945244">.</span><span class="ident" id="2945245"><a href="/gostd/math/rand/zipf.go.html#2943995">q</a></span><span class="op" id="2945246">)</span>&nbsp;<span class="op" id="2945248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2945253">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2945261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2945264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2945267">return</span>&nbsp;<span class="builtintype" id="2945274">uint64</span><span class="op" id="2945280">(</span><span class="ident" id="2945281"><a href="/gostd/math/rand/zipf.go.html#2945036">k</a></span><span class="op" id="2945282">)</span><br>
<span class="lineno">75</span><span class="op" id="2945284">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
