<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/rpc</h2>
<ul>
<li><a href="/gostd/net/rpc/client.go.html">client.go</a></li>
<li><a href="/gostd/net/rpc/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/rpc/debug.go.html">debug.go</a></li>
<li><a href="/gostd/net/rpc/server.go.html">server.go</a></li>
<li><a href="/gostd/net/rpc/server_test.go.html">server_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8174328">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8174383">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8174437">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8174488">package</span>&nbsp;<span class="ident" id="8174496">rpc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8174501">import</span>&nbsp;<span class="op" id="8174508">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8174511">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8174521">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8174528">&#34;net&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8174535">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8174546">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8174557">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8174567">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8174570">type</span>&nbsp;<span class="ident" id="8174575">shutdownCodec</span>&nbsp;<span class="keyword" id="8174589">struct</span>&nbsp;<span class="op" id="8174596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174599">responded</span>&nbsp;<span class="keyword" id="8174609">chan</span>&nbsp;<span class="builtintype" id="8174614">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174619">closed</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8174629">bool</span><br>
<span class="lineno"></span><span class="op" id="8174634">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8174637">func</span>&nbsp;<span class="op" id="8174642">(</span><span class="ident" id="8174643">c</span>&nbsp;<span class="op" id="8174645">*</span><span class="ident" id="8174646">shutdownCodec</span><span class="op" id="8174659">)</span>&nbsp;<span class="ident" id="8174661">WriteRequest</span><span class="op" id="8174673">(</span><span class="op" id="8174674">*</span><span class="ident" id="8174675">Request</span><span class="op" id="8174682">,</span>&nbsp;<span class="keyword" id="8174684">interface</span><span class="op" id="8174693">{</span><span class="op" id="8174694">}</span><span class="op" id="8174695">)</span>&nbsp;<span class="builtintype" id="8174697">error</span>&nbsp;<span class="op" id="8174703">{</span>&nbsp;<span class="keyword" id="8174705">return</span>&nbsp;<span class="ident" id="8174712">nil</span>&nbsp;<span class="op" id="8174716">}</span><br>
<span class="lineno"></span><span class="keyword" id="8174718">func</span>&nbsp;<span class="op" id="8174723">(</span><span class="ident" id="8174724">c</span>&nbsp;<span class="op" id="8174726">*</span><span class="ident" id="8174727">shutdownCodec</span><span class="op" id="8174740">)</span>&nbsp;<span class="ident" id="8174742">ReadResponseBody</span><span class="op" id="8174758">(</span><span class="keyword" id="8174759">interface</span><span class="op" id="8174768">{</span><span class="op" id="8174769">}</span><span class="op" id="8174770">)</span>&nbsp;<span class="builtintype" id="8174772">error</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8174784">{</span>&nbsp;<span class="keyword" id="8174786">return</span>&nbsp;<span class="ident" id="8174793">nil</span>&nbsp;<span class="op" id="8174797">}</span><br>
<span class="lineno"></span><span class="keyword" id="8174799">func</span>&nbsp;<span class="op" id="8174804">(</span><span class="ident" id="8174805">c</span>&nbsp;<span class="op" id="8174807">*</span><span class="ident" id="8174808">shutdownCodec</span><span class="op" id="8174821">)</span>&nbsp;<span class="ident" id="8174823">ReadResponseHeader</span><span class="op" id="8174841">(</span><span class="op" id="8174842">*</span><span class="ident" id="8174843">Response</span><span class="op" id="8174851">)</span>&nbsp;<span class="builtintype" id="8174853">error</span>&nbsp;<span class="op" id="8174859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174862">c</span><span class="op" id="8174863">.</span><span class="ident" id="8174864">responded</span>&nbsp;<span class="op" id="8174874">&lt;-</span>&nbsp;<span class="num" id="8174877">1</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8174880">return</span>&nbsp;<span class="ident" id="8174887">errors</span><span class="op" id="8174893">.</span><span class="ident" id="8174894">New</span><span class="op" id="8174897">(</span><span class="string" id="8174898">&#34;shutdownCodec&nbsp;ReadResponseHeader&#34;</span><span class="op" id="8174932">)</span><br>
<span class="lineno"></span><span class="op" id="8174934">}</span><br>
<span class="lineno"></span><span class="keyword" id="8174936">func</span>&nbsp;<span class="op" id="8174941">(</span><span class="ident" id="8174942">c</span>&nbsp;<span class="op" id="8174944">*</span><span class="ident" id="8174945">shutdownCodec</span><span class="op" id="8174958">)</span>&nbsp;<span class="ident" id="8174960">Close</span><span class="op" id="8174965">(</span><span class="op" id="8174966">)</span>&nbsp;<span class="builtintype" id="8174968">error</span>&nbsp;<span class="op" id="8174974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174977">c</span><span class="op" id="8174978">.</span><span class="ident" id="8174979">closed</span>&nbsp;<span class="op" id="8174986">=</span>&nbsp;<span class="builtintype" id="8174988">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8174994">return</span>&nbsp;<span class="ident" id="8175001">nil</span><br>
<span class="lineno">30</span><span class="op" id="8175005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8175008">func</span>&nbsp;<span class="ident" id="8175013">TestCloseCodec</span><span class="op" id="8175027">(</span><span class="ident" id="8175028">t</span>&nbsp;<span class="op" id="8175030">*</span><span class="ident" id="8175031">testing</span><span class="op" id="8175038">.</span><span class="ident" id="8175039">T</span><span class="op" id="8175040">)</span>&nbsp;<span class="op" id="8175042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175045">codec</span>&nbsp;<span class="op" id="8175051">:=</span>&nbsp;<span class="op" id="8175054">&amp;</span><span class="ident" id="8175055">shutdownCodec</span><span class="op" id="8175068">{</span><span class="ident" id="8175069">responded</span><span class="op" id="8175078">:</span>&nbsp;<span class="builtinfunc" id="8175080">make</span><span class="op" id="8175084">(</span><span class="keyword" id="8175085">chan</span>&nbsp;<span class="builtintype" id="8175090">int</span><span class="op" id="8175093">)</span><span class="op" id="8175094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175097">client</span>&nbsp;<span class="op" id="8175104">:=</span>&nbsp;<span class="ident" id="8175107">NewClientWithCodec</span><span class="op" id="8175125">(</span><span class="ident" id="8175126">codec</span><span class="op" id="8175131">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175134">&lt;-</span><span class="ident" id="8175136">codec</span><span class="op" id="8175141">.</span><span class="ident" id="8175142">responded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175153">client</span><span class="op" id="8175159">.</span><span class="ident" id="8175160">Close</span><span class="op" id="8175165">(</span><span class="op" id="8175166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175169">if</span>&nbsp;<span class="op" id="8175172">!</span><span class="ident" id="8175173">codec</span><span class="op" id="8175178">.</span><span class="ident" id="8175179">closed</span>&nbsp;<span class="op" id="8175186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175190">t</span><span class="op" id="8175191">.</span><span class="ident" id="8175192">Error</span><span class="op" id="8175197">(</span><span class="string" id="8175198">&#34;client.Close&nbsp;did&nbsp;not&nbsp;close&nbsp;codec&#34;</span><span class="op" id="8175232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175235">}</span><br>
<span class="lineno">40</span><span class="op" id="8175237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8175240">//&nbsp;Test&nbsp;that&nbsp;errors&nbsp;in&nbsp;gob&nbsp;shut&nbsp;down&nbsp;the&nbsp;connection.&nbsp;Issue&nbsp;7689.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8175306">type</span>&nbsp;<span class="ident" id="8175311">R</span>&nbsp;<span class="keyword" id="8175313">struct</span>&nbsp;<span class="op" id="8175320">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175323">msg</span>&nbsp;<span class="op" id="8175327">[</span><span class="op" id="8175328">]</span><span class="builtintype" id="8175329">byte</span>&nbsp;<span class="comment" id="8175334">//&nbsp;Not&nbsp;exported,&nbsp;so&nbsp;R&nbsp;does&nbsp;not&nbsp;work&nbsp;with&nbsp;gob.</span><br>
<span class="lineno"></span><span class="op" id="8175380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8175383">type</span>&nbsp;<span class="ident" id="8175388">S</span>&nbsp;<span class="keyword" id="8175390">struct</span><span class="op" id="8175396">{</span><span class="op" id="8175397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="8175400">func</span>&nbsp;<span class="op" id="8175405">(</span><span class="ident" id="8175406">s</span>&nbsp;<span class="op" id="8175408">*</span><span class="ident" id="8175409">S</span><span class="op" id="8175410">)</span>&nbsp;<span class="ident" id="8175412">Recv</span><span class="op" id="8175416">(</span><span class="ident" id="8175417">nul</span>&nbsp;<span class="op" id="8175421">*</span><span class="keyword" id="8175422">struct</span><span class="op" id="8175428">{</span><span class="op" id="8175429">}</span><span class="op" id="8175430">,</span>&nbsp;<span class="ident" id="8175432">reply</span>&nbsp;<span class="op" id="8175438">*</span><span class="ident" id="8175439">R</span><span class="op" id="8175440">)</span>&nbsp;<span class="builtintype" id="8175442">error</span>&nbsp;<span class="op" id="8175448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175451">*</span><span class="ident" id="8175452">reply</span>&nbsp;<span class="op" id="8175458">=</span>&nbsp;<span class="ident" id="8175460">R</span><span class="op" id="8175461">{</span><span class="op" id="8175462">[</span><span class="op" id="8175463">]</span><span class="builtintype" id="8175464">byte</span><span class="op" id="8175468">(</span><span class="string" id="8175469">&#34;foo&#34;</span><span class="op" id="8175474">)</span><span class="op" id="8175475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175478">return</span>&nbsp;<span class="ident" id="8175485">nil</span><br>
<span class="lineno"></span><span class="op" id="8175489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="8175492">func</span>&nbsp;<span class="ident" id="8175497">TestGobError</span><span class="op" id="8175509">(</span><span class="ident" id="8175510">t</span>&nbsp;<span class="op" id="8175512">*</span><span class="ident" id="8175513">testing</span><span class="op" id="8175520">.</span><span class="ident" id="8175521">T</span><span class="op" id="8175522">)</span>&nbsp;<span class="op" id="8175524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175527">if</span>&nbsp;<span class="ident" id="8175530">runtime</span><span class="op" id="8175537">.</span><span class="ident" id="8175538">GOOS</span>&nbsp;<span class="op" id="8175543">==</span>&nbsp;<span class="string" id="8175546">&#34;plan9&#34;</span>&nbsp;<span class="op" id="8175554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175558">t</span><span class="op" id="8175559">.</span><span class="ident" id="8175560">Skip</span><span class="op" id="8175564">(</span><span class="string" id="8175565">&#34;skipping&nbsp;test;&nbsp;see&nbsp;http://golang.org/issue/8908&#34;</span><span class="op" id="8175614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175620">defer</span>&nbsp;<span class="keyword" id="8175626">func</span><span class="op" id="8175630">(</span><span class="op" id="8175631">)</span>&nbsp;<span class="op" id="8175633">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175637">err</span>&nbsp;<span class="op" id="8175641">:=</span>&nbsp;<span class="builtinfunc" id="8175644">recover</span><span class="op" id="8175651">(</span><span class="op" id="8175652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175656">if</span>&nbsp;<span class="ident" id="8175659">err</span>&nbsp;<span class="op" id="8175663">==</span>&nbsp;<span class="ident" id="8175666">nil</span>&nbsp;<span class="op" id="8175670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175675">t</span><span class="op" id="8175676">.</span><span class="ident" id="8175677">Fatal</span><span class="op" id="8175682">(</span><span class="string" id="8175683">&#34;no&nbsp;error&#34;</span><span class="op" id="8175693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175701">if</span>&nbsp;<span class="op" id="8175704">!</span><span class="ident" id="8175705">strings</span><span class="op" id="8175712">.</span><span class="ident" id="8175713">Contains</span><span class="op" id="8175721">(</span><span class="string" id="8175722">&#34;reading&nbsp;body&nbsp;EOF&#34;</span><span class="op" id="8175740">,</span>&nbsp;<span class="ident" id="8175742">err</span><span class="op" id="8175745">.</span><span class="op" id="8175746">(</span><span class="builtintype" id="8175747">error</span><span class="op" id="8175752">)</span><span class="op" id="8175753">.</span><span class="ident" id="8175754">Error</span><span class="op" id="8175759">(</span><span class="op" id="8175760">)</span><span class="op" id="8175761">)</span>&nbsp;<span class="op" id="8175763">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175768">t</span><span class="op" id="8175769">.</span><span class="ident" id="8175770">Fatal</span><span class="op" id="8175775">(</span><span class="string" id="8175776">&#34;expected&nbsp;`reading&nbsp;body&nbsp;EOF&#39;,&nbsp;got&#34;</span><span class="op" id="8175810">,</span>&nbsp;<span class="ident" id="8175812">err</span><span class="op" id="8175815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175822">}</span><span class="op" id="8175823">(</span><span class="op" id="8175824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175827">Register</span><span class="op" id="8175835">(</span><span class="builtinfunc" id="8175836">new</span><span class="op" id="8175839">(</span><span class="ident" id="8175840">S</span><span class="op" id="8175841">)</span><span class="op" id="8175842">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175846">listen</span><span class="op" id="8175852">,</span>&nbsp;<span class="ident" id="8175854">err</span>&nbsp;<span class="op" id="8175858">:=</span>&nbsp;<span class="ident" id="8175861">net</span><span class="op" id="8175864">.</span><span class="ident" id="8175865">Listen</span><span class="op" id="8175871">(</span><span class="string" id="8175872">&#34;tcp&#34;</span><span class="op" id="8175877">,</span>&nbsp;<span class="string" id="8175879">&#34;127.0.0.1:0&#34;</span><span class="op" id="8175892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175895">if</span>&nbsp;<span class="ident" id="8175898">err</span>&nbsp;<span class="op" id="8175902">!=</span>&nbsp;<span class="ident" id="8175905">nil</span>&nbsp;<span class="op" id="8175909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8175913">panic</span><span class="op" id="8175918">(</span><span class="ident" id="8175919">err</span><span class="op" id="8175922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175928">go</span>&nbsp;<span class="ident" id="8175931">Accept</span><span class="op" id="8175937">(</span><span class="ident" id="8175938">listen</span><span class="op" id="8175944">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175948">client</span><span class="op" id="8175954">,</span>&nbsp;<span class="ident" id="8175956">err</span>&nbsp;<span class="op" id="8175960">:=</span>&nbsp;<span class="ident" id="8175963">Dial</span><span class="op" id="8175967">(</span><span class="string" id="8175968">&#34;tcp&#34;</span><span class="op" id="8175973">,</span>&nbsp;<span class="ident" id="8175975">listen</span><span class="op" id="8175981">.</span><span class="ident" id="8175982">Addr</span><span class="op" id="8175986">(</span><span class="op" id="8175987">)</span><span class="op" id="8175988">.</span><span class="ident" id="8175989">String</span><span class="op" id="8175995">(</span><span class="op" id="8175996">)</span><span class="op" id="8175997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8176000">if</span>&nbsp;<span class="ident" id="8176003">err</span>&nbsp;<span class="op" id="8176007">!=</span>&nbsp;<span class="ident" id="8176010">nil</span>&nbsp;<span class="op" id="8176014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8176018">panic</span><span class="op" id="8176023">(</span><span class="ident" id="8176024">err</span><span class="op" id="8176027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176030">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8176034">var</span>&nbsp;<span class="ident" id="8176038">reply</span>&nbsp;<span class="ident" id="8176044">Reply</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176051">err</span>&nbsp;<span class="op" id="8176055">=</span>&nbsp;<span class="ident" id="8176057">client</span><span class="op" id="8176063">.</span><span class="ident" id="8176064">Call</span><span class="op" id="8176068">(</span><span class="string" id="8176069">&#34;S.Recv&#34;</span><span class="op" id="8176077">,</span>&nbsp;<span class="op" id="8176079">&amp;</span><span class="keyword" id="8176080">struct</span><span class="op" id="8176086">{</span><span class="op" id="8176087">}</span><span class="op" id="8176088">{</span><span class="op" id="8176089">}</span><span class="op" id="8176090">,</span>&nbsp;<span class="op" id="8176092">&amp;</span><span class="ident" id="8176093">reply</span><span class="op" id="8176098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8176101">if</span>&nbsp;<span class="ident" id="8176104">err</span>&nbsp;<span class="op" id="8176108">!=</span>&nbsp;<span class="ident" id="8176111">nil</span>&nbsp;<span class="op" id="8176115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8176119">panic</span><span class="op" id="8176124">(</span><span class="ident" id="8176125">err</span><span class="op" id="8176128">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176135">fmt</span><span class="op" id="8176138">.</span><span class="ident" id="8176139">Printf</span><span class="op" id="8176145">(</span><span class="string" id="8176146">&#34;%#v\n&#34;</span><span class="op" id="8176153">,</span>&nbsp;<span class="ident" id="8176155">reply</span><span class="op" id="8176160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176163">client</span><span class="op" id="8176169">.</span><span class="ident" id="8176170">Close</span><span class="op" id="8176175">(</span><span class="op" id="8176176">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176180">listen</span><span class="op" id="8176186">.</span><span class="ident" id="8176187">Close</span><span class="op" id="8176192">(</span><span class="op" id="8176193">)</span><br>
<span class="lineno"></span><span class="op" id="8176195">}</span>
</div>
</body>
</html>
