<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7054322">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7054377">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7054431">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7054482">package</span>&nbsp;<span class="ident" id="7054490">httptest</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7054500">import</span>&nbsp;<span class="op" id="7054507">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7054510">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7054517">&#34;net/http&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7054529">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7054539">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7054542">func</span>&nbsp;<span class="ident" id="7054547">TestRecorder</span><span class="op" id="7054559">(</span><span class="ident" id="7054560">t</span>&nbsp;<span class="op" id="7054562">*</span><span class="ident" id="7054563"><a href="/net/http/httptest/recorder_test.go.html#7054529">testing</a></span><span class="op" id="7054570">.</span><span class="ident" id="7054571">T</span><span class="op" id="7054572">)</span>&nbsp;<span class="op" id="7054574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054577">type</span>&nbsp;<span class="ident" id="7054582">checkFunc</span>&nbsp;<span class="keyword" id="7054592">func</span><span class="op" id="7054596">(</span><span class="op" id="7054597">*</span><span class="ident" id="7054598"><a href="/net/http/httptest/recorder.go.html#4812225">ResponseRecorder</a></span><span class="op" id="7054614">)</span>&nbsp;<span class="builtintype" id="7054616">error</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054623">check</span>&nbsp;<span class="op" id="7054629">:=</span>&nbsp;<span class="keyword" id="7054632">func</span><span class="op" id="7054636">(</span><span class="ident" id="7054637">fns</span>&nbsp;<span class="op" id="7054641">...</span><span class="ident" id="7054644"><a href="/net/http/httptest/recorder_test.go.html#7054582">checkFunc</a></span><span class="op" id="7054653">)</span>&nbsp;<span class="op" id="7054655">[</span><span class="op" id="7054656">]</span><span class="ident" id="7054657"><a href="/net/http/httptest/recorder_test.go.html#7054582">checkFunc</a></span>&nbsp;<span class="op" id="7054667">{</span>&nbsp;<span class="keyword" id="7054669">return</span>&nbsp;<span class="ident" id="7054676"><a href="/net/http/httptest/recorder_test.go.html#7054637">fns</a></span>&nbsp;<span class="op" id="7054680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054684">hasStatus</span>&nbsp;<span class="op" id="7054694">:=</span>&nbsp;<span class="keyword" id="7054697">func</span><span class="op" id="7054701">(</span><span class="ident" id="7054702">wantCode</span>&nbsp;<span class="builtintype" id="7054711">int</span><span class="op" id="7054714">)</span>&nbsp;<span class="ident" id="7054716"><a href="/net/http/httptest/recorder_test.go.html#7054582">checkFunc</a></span>&nbsp;<span class="op" id="7054726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054730">return</span>&nbsp;<span class="keyword" id="7054737">func</span><span class="op" id="7054741">(</span><span class="ident" id="7054742">rec</span>&nbsp;<span class="op" id="7054746">*</span><span class="ident" id="7054747"><a href="/net/http/httptest/recorder.go.html#4812225">ResponseRecorder</a></span><span class="op" id="7054763">)</span>&nbsp;<span class="builtintype" id="7054765">error</span>&nbsp;<span class="op" id="7054771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054776">if</span>&nbsp;<span class="ident" id="7054779"><a href="/net/http/httptest/recorder_test.go.html#7054742">rec</a></span><span class="op" id="7054782">.</span><span class="ident" id="7054783">Code</span>&nbsp;<span class="op" id="7054788">!=</span>&nbsp;<span class="ident" id="7054791"><a href="/net/http/httptest/recorder_test.go.html#7054702">wantCode</a></span>&nbsp;<span class="op" id="7054800">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054806">return</span>&nbsp;<span class="ident" id="7054813"><a href="/net/http/httptest/recorder_test.go.html#7054510">fmt</a></span><span class="op" id="7054816">.</span><span class="ident" id="7054817">Errorf</span><span class="op" id="7054823">(</span><span class="string" id="7054824">&#34;Status&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7054846">,</span>&nbsp;<span class="ident" id="7054848"><a href="/net/http/httptest/recorder_test.go.html#7054742">rec</a></span><span class="op" id="7054851">.</span><span class="ident" id="7054852">Code</span><span class="op" id="7054856">,</span>&nbsp;<span class="ident" id="7054858"><a href="/net/http/httptest/recorder_test.go.html#7054702">wantCode</a></span><span class="op" id="7054866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7054871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054876">return</span>&nbsp;<span class="ident" id="7054883">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7054889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7054892">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054895">hasContents</span>&nbsp;<span class="op" id="7054907">:=</span>&nbsp;<span class="keyword" id="7054910">func</span><span class="op" id="7054914">(</span><span class="ident" id="7054915">want</span>&nbsp;<span class="builtintype" id="7054920">string</span><span class="op" id="7054926">)</span>&nbsp;<span class="ident" id="7054928"><a href="/net/http/httptest/recorder_test.go.html#7054582">checkFunc</a></span>&nbsp;<span class="op" id="7054938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054942">return</span>&nbsp;<span class="keyword" id="7054949">func</span><span class="op" id="7054953">(</span><span class="ident" id="7054954">rec</span>&nbsp;<span class="op" id="7054958">*</span><span class="ident" id="7054959"><a href="/net/http/httptest/recorder.go.html#4812225">ResponseRecorder</a></span><span class="op" id="7054975">)</span>&nbsp;<span class="builtintype" id="7054977">error</span>&nbsp;<span class="op" id="7054983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054988">if</span>&nbsp;<span class="ident" id="7054991"><a href="/net/http/httptest/recorder_test.go.html#7054954">rec</a></span><span class="op" id="7054994">.</span><span class="ident" id="7054995">Body</span><span class="op" id="7054999">.</span><span class="ident" id="7055000">String</span><span class="op" id="7055006">(</span><span class="op" id="7055007">)</span>&nbsp;<span class="op" id="7055009">!=</span>&nbsp;<span class="ident" id="7055012"><a href="/net/http/httptest/recorder_test.go.html#7054915">want</a></span>&nbsp;<span class="op" id="7055017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055023">return</span>&nbsp;<span class="ident" id="7055030"><a href="/net/http/httptest/recorder_test.go.html#7054510">fmt</a></span><span class="op" id="7055033">.</span><span class="ident" id="7055034">Errorf</span><span class="op" id="7055040">(</span><span class="string" id="7055041">&#34;wrote&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7055062">,</span>&nbsp;<span class="ident" id="7055064"><a href="/net/http/httptest/recorder_test.go.html#7054954">rec</a></span><span class="op" id="7055067">.</span><span class="ident" id="7055068">Body</span><span class="op" id="7055072">.</span><span class="ident" id="7055073">String</span><span class="op" id="7055079">(</span><span class="op" id="7055080">)</span><span class="op" id="7055081">,</span>&nbsp;<span class="ident" id="7055083"><a href="/net/http/httptest/recorder_test.go.html#7054915">want</a></span><span class="op" id="7055087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055092">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055097">return</span>&nbsp;<span class="ident" id="7055104">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055116">hasFlush</span>&nbsp;<span class="op" id="7055125">:=</span>&nbsp;<span class="keyword" id="7055128">func</span><span class="op" id="7055132">(</span><span class="ident" id="7055133">want</span>&nbsp;<span class="builtintype" id="7055138">bool</span><span class="op" id="7055142">)</span>&nbsp;<span class="ident" id="7055144"><a href="/net/http/httptest/recorder_test.go.html#7054582">checkFunc</a></span>&nbsp;<span class="op" id="7055154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055158">return</span>&nbsp;<span class="keyword" id="7055165">func</span><span class="op" id="7055169">(</span><span class="ident" id="7055170">rec</span>&nbsp;<span class="op" id="7055174">*</span><span class="ident" id="7055175"><a href="/net/http/httptest/recorder.go.html#4812225">ResponseRecorder</a></span><span class="op" id="7055191">)</span>&nbsp;<span class="builtintype" id="7055193">error</span>&nbsp;<span class="op" id="7055199">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055204">if</span>&nbsp;<span class="ident" id="7055207"><a href="/net/http/httptest/recorder_test.go.html#7055170">rec</a></span><span class="op" id="7055210">.</span><span class="ident" id="7055211">Flushed</span>&nbsp;<span class="op" id="7055219">!=</span>&nbsp;<span class="ident" id="7055222"><a href="/net/http/httptest/recorder_test.go.html#7055133">want</a></span>&nbsp;<span class="op" id="7055227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055233">return</span>&nbsp;<span class="ident" id="7055240"><a href="/net/http/httptest/recorder_test.go.html#7054510">fmt</a></span><span class="op" id="7055243">.</span><span class="ident" id="7055244">Errorf</span><span class="op" id="7055250">(</span><span class="string" id="7055251">&#34;Flushed&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7055274">,</span>&nbsp;<span class="ident" id="7055276"><a href="/net/http/httptest/recorder_test.go.html#7055170">rec</a></span><span class="op" id="7055279">.</span><span class="ident" id="7055280">Flushed</span><span class="op" id="7055287">,</span>&nbsp;<span class="ident" id="7055289"><a href="/net/http/httptest/recorder_test.go.html#7055133">want</a></span><span class="op" id="7055293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055303">return</span>&nbsp;<span class="ident" id="7055310">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055316">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055323">tests</span>&nbsp;<span class="op" id="7055329">:=</span>&nbsp;<span class="op" id="7055332">[</span><span class="op" id="7055333">]</span><span class="keyword" id="7055334">struct</span>&nbsp;<span class="op" id="7055341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055345">name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7055352">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055361">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7055368">func</span><span class="op" id="7055372">(</span><span class="ident" id="7055373">w</span>&nbsp;<span class="ident" id="7055375"><a href="/net/http/httptest/recorder_test.go.html#7054517">http</a></span><span class="op" id="7055379">.</span><span class="ident" id="7055380">ResponseWriter</span><span class="op" id="7055394">,</span>&nbsp;<span class="ident" id="7055396">r</span>&nbsp;<span class="op" id="7055398">*</span><span class="ident" id="7055399"><a href="/net/http/httptest/recorder_test.go.html#7054517">http</a></span><span class="op" id="7055403">.</span><span class="ident" id="7055404">Request</span><span class="op" id="7055411">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055415">checks</span>&nbsp;<span class="op" id="7055422">[</span><span class="op" id="7055423">]</span><span class="ident" id="7055424"><a href="/net/http/httptest/recorder_test.go.html#7054582">checkFunc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055435">}</span><span class="op" id="7055436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7055445">&#34;200&nbsp;default&#34;</span><span class="op" id="7055458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055463">func</span><span class="op" id="7055467">(</span><span class="ident" id="7055468">w</span>&nbsp;<span class="ident" id="7055470"><a href="/net/http/httptest/recorder_test.go.html#7054517">http</a></span><span class="op" id="7055474">.</span><span class="ident" id="7055475">ResponseWriter</span><span class="op" id="7055489">,</span>&nbsp;<span class="ident" id="7055491">r</span>&nbsp;<span class="op" id="7055493">*</span><span class="ident" id="7055494"><a href="/net/http/httptest/recorder_test.go.html#7054517">http</a></span><span class="op" id="7055498">.</span><span class="ident" id="7055499">Request</span><span class="op" id="7055506">)</span>&nbsp;<span class="op" id="7055508">{</span><span class="op" id="7055509">}</span><span class="op" id="7055510">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055515"><a href="/net/http/httptest/recorder_test.go.html#7054623">check</a></span><span class="op" id="7055520">(</span><span class="ident" id="7055521"><a href="/net/http/httptest/recorder_test.go.html#7054684">hasStatus</a></span><span class="op" id="7055530">(</span><span class="num" id="7055531">200</span><span class="op" id="7055534">)</span><span class="op" id="7055535">,</span>&nbsp;<span class="ident" id="7055537"><a href="/net/http/httptest/recorder_test.go.html#7054895">hasContents</a></span><span class="op" id="7055548">(</span><span class="string" id="7055549">&#34;&#34;</span><span class="op" id="7055551">)</span><span class="op" id="7055552">)</span><span class="op" id="7055553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055557">}</span><span class="op" id="7055558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7055567">&#34;first&nbsp;code&nbsp;only&#34;</span><span class="op" id="7055584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055589">func</span><span class="op" id="7055593">(</span><span class="ident" id="7055594">w</span>&nbsp;<span class="ident" id="7055596"><a href="/net/http/httptest/recorder_test.go.html#7054517">http</a></span><span class="op" id="7055600">.</span><span class="ident" id="7055601">ResponseWriter</span><span class="op" id="7055615">,</span>&nbsp;<span class="ident" id="7055617">r</span>&nbsp;<span class="op" id="7055619">*</span><span class="ident" id="7055620"><a href="/net/http/httptest/recorder_test.go.html#7054517">http</a></span><span class="op" id="7055624">.</span><span class="ident" id="7055625">Request</span><span class="op" id="7055632">)</span>&nbsp;<span class="op" id="7055634">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055640"><a href="/net/http/httptest/recorder_test.go.html#7055594">w</a></span><span class="op" id="7055641">.</span><span class="ident" id="7055642">WriteHeader</span><span class="op" id="7055653">(</span><span class="num" id="7055654">201</span><span class="op" id="7055657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055663"><a href="/net/http/httptest/recorder_test.go.html#7055594">w</a></span><span class="op" id="7055664">.</span><span class="ident" id="7055665">WriteHeader</span><span class="op" id="7055676">(</span><span class="num" id="7055677">202</span><span class="op" id="7055680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055686"><a href="/net/http/httptest/recorder_test.go.html#7055594">w</a></span><span class="op" id="7055687">.</span><span class="ident" id="7055688">Write</span><span class="op" id="7055693">(</span><span class="op" id="7055694">[</span><span class="op" id="7055695">]</span><span class="builtintype" id="7055696">byte</span><span class="op" id="7055700">(</span><span class="string" id="7055701">&#34;hi&#34;</span><span class="op" id="7055705">)</span><span class="op" id="7055706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055711">}</span><span class="op" id="7055712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055717"><a href="/net/http/httptest/recorder_test.go.html#7054623">check</a></span><span class="op" id="7055722">(</span><span class="ident" id="7055723"><a href="/net/http/httptest/recorder_test.go.html#7054684">hasStatus</a></span><span class="op" id="7055732">(</span><span class="num" id="7055733">201</span><span class="op" id="7055736">)</span><span class="op" id="7055737">,</span>&nbsp;<span class="ident" id="7055739"><a href="/net/http/httptest/recorder_test.go.html#7054895">hasContents</a></span><span class="op" id="7055750">(</span><span class="string" id="7055751">&#34;hi&#34;</span><span class="op" id="7055755">)</span><span class="op" id="7055756">)</span><span class="op" id="7055757">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055761">}</span><span class="op" id="7055762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7055771">&#34;write&nbsp;sends&nbsp;200&#34;</span><span class="op" id="7055788">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055793">func</span><span class="op" id="7055797">(</span><span class="ident" id="7055798">w</span>&nbsp;<span class="ident" id="7055800"><a href="/net/http/httptest/recorder_test.go.html#7054517">http</a></span><span class="op" id="7055804">.</span><span class="ident" id="7055805">ResponseWriter</span><span class="op" id="7055819">,</span>&nbsp;<span class="ident" id="7055821">r</span>&nbsp;<span class="op" id="7055823">*</span><span class="ident" id="7055824"><a href="/net/http/httptest/recorder_test.go.html#7054517">http</a></span><span class="op" id="7055828">.</span><span class="ident" id="7055829">Request</span><span class="op" id="7055836">)</span>&nbsp;<span class="op" id="7055838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055844"><a href="/net/http/httptest/recorder_test.go.html#7055798">w</a></span><span class="op" id="7055845">.</span><span class="ident" id="7055846">Write</span><span class="op" id="7055851">(</span><span class="op" id="7055852">[</span><span class="op" id="7055853">]</span><span class="builtintype" id="7055854">byte</span><span class="op" id="7055858">(</span><span class="string" id="7055859">&#34;hi&nbsp;first&#34;</span><span class="op" id="7055869">)</span><span class="op" id="7055870">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055876"><a href="/net/http/httptest/recorder_test.go.html#7055798">w</a></span><span class="op" id="7055877">.</span><span class="ident" id="7055878">WriteHeader</span><span class="op" id="7055889">(</span><span class="num" id="7055890">201</span><span class="op" id="7055893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055899"><a href="/net/http/httptest/recorder_test.go.html#7055798">w</a></span><span class="op" id="7055900">.</span><span class="ident" id="7055901">WriteHeader</span><span class="op" id="7055912">(</span><span class="num" id="7055913">202</span><span class="op" id="7055916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055921">}</span><span class="op" id="7055922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055927"><a href="/net/http/httptest/recorder_test.go.html#7054623">check</a></span><span class="op" id="7055932">(</span><span class="ident" id="7055933"><a href="/net/http/httptest/recorder_test.go.html#7054684">hasStatus</a></span><span class="op" id="7055942">(</span><span class="num" id="7055943">200</span><span class="op" id="7055946">)</span><span class="op" id="7055947">,</span>&nbsp;<span class="ident" id="7055949"><a href="/net/http/httptest/recorder_test.go.html#7054895">hasContents</a></span><span class="op" id="7055960">(</span><span class="string" id="7055961">&#34;hi&nbsp;first&#34;</span><span class="op" id="7055971">)</span><span class="op" id="7055972">,</span>&nbsp;<span class="ident" id="7055974"><a href="/net/http/httptest/recorder_test.go.html#7055116">hasFlush</a></span><span class="op" id="7055982">(</span><span class="ident" id="7055983">false</span><span class="op" id="7055988">)</span><span class="op" id="7055989">)</span><span class="op" id="7055990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055994">}</span><span class="op" id="7055995">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7056004">&#34;flush&#34;</span><span class="op" id="7056011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7056016">func</span><span class="op" id="7056020">(</span><span class="ident" id="7056021">w</span>&nbsp;<span class="ident" id="7056023"><a href="/net/http/httptest/recorder_test.go.html#7054517">http</a></span><span class="op" id="7056027">.</span><span class="ident" id="7056028">ResponseWriter</span><span class="op" id="7056042">,</span>&nbsp;<span class="ident" id="7056044">r</span>&nbsp;<span class="op" id="7056046">*</span><span class="ident" id="7056047"><a href="/net/http/httptest/recorder_test.go.html#7054517">http</a></span><span class="op" id="7056051">.</span><span class="ident" id="7056052">Request</span><span class="op" id="7056059">)</span>&nbsp;<span class="op" id="7056061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056067"><a href="/net/http/httptest/recorder_test.go.html#7056021">w</a></span><span class="op" id="7056068">.</span><span class="op" id="7056069">(</span><span class="ident" id="7056070"><a href="/net/http/httptest/recorder_test.go.html#7054517">http</a></span><span class="op" id="7056074">.</span><span class="ident" id="7056075">Flusher</span><span class="op" id="7056082">)</span><span class="op" id="7056083">.</span><span class="ident" id="7056084">Flush</span><span class="op" id="7056089">(</span><span class="op" id="7056090">)</span>&nbsp;<span class="comment" id="7056092">//&nbsp;also&nbsp;sends&nbsp;a&nbsp;200</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056116"><a href="/net/http/httptest/recorder_test.go.html#7056021">w</a></span><span class="op" id="7056117">.</span><span class="ident" id="7056118">WriteHeader</span><span class="op" id="7056129">(</span><span class="num" id="7056130">201</span><span class="op" id="7056133">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7056138">}</span><span class="op" id="7056139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056144"><a href="/net/http/httptest/recorder_test.go.html#7054623">check</a></span><span class="op" id="7056149">(</span><span class="ident" id="7056150"><a href="/net/http/httptest/recorder_test.go.html#7054684">hasStatus</a></span><span class="op" id="7056159">(</span><span class="num" id="7056160">200</span><span class="op" id="7056163">)</span><span class="op" id="7056164">,</span>&nbsp;<span class="ident" id="7056166"><a href="/net/http/httptest/recorder_test.go.html#7055116">hasFlush</a></span><span class="op" id="7056174">(</span><span class="ident" id="7056175">true</span><span class="op" id="7056179">)</span><span class="op" id="7056180">)</span><span class="op" id="7056181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7056185">}</span><span class="op" id="7056186">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7056189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056192">r</span><span class="op" id="7056193">,</span>&nbsp;<span class="ident" id="7056195">_</span>&nbsp;<span class="op" id="7056197">:=</span>&nbsp;<span class="ident" id="7056200"><a href="/net/http/httptest/recorder_test.go.html#7054517">http</a></span><span class="op" id="7056204">.</span><span class="ident" id="7056205">NewRequest</span><span class="op" id="7056215">(</span><span class="string" id="7056216">&#34;GET&#34;</span><span class="op" id="7056221">,</span>&nbsp;<span class="string" id="7056223">&#34;http://foo.com/&#34;</span><span class="op" id="7056240">,</span>&nbsp;<span class="ident" id="7056242">nil</span><span class="op" id="7056245">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7056248">for</span>&nbsp;<span class="ident" id="7056252">_</span><span class="op" id="7056253">,</span>&nbsp;<span class="ident" id="7056255">tt</span>&nbsp;<span class="op" id="7056258">:=</span>&nbsp;<span class="keyword" id="7056261">range</span>&nbsp;<span class="ident" id="7056267"><a href="/net/http/httptest/recorder_test.go.html#7055323">tests</a></span>&nbsp;<span class="op" id="7056273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056277">h</span>&nbsp;<span class="op" id="7056279">:=</span>&nbsp;<span class="ident" id="7056282"><a href="/net/http/httptest/recorder_test.go.html#7054517">http</a></span><span class="op" id="7056286">.</span><span class="ident" id="7056287">HandlerFunc</span><span class="op" id="7056298">(</span><span class="ident" id="7056299"><a href="/net/http/httptest/recorder_test.go.html#7056255">tt</a></span><span class="op" id="7056301">.</span><span class="ident" id="7056302">h</span><span class="op" id="7056303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056307">rec</span>&nbsp;<span class="op" id="7056311">:=</span>&nbsp;<span class="ident" id="7056314"><a href="/net/http/httptest/recorder.go.html#4812555">NewRecorder</a></span><span class="op" id="7056325">(</span><span class="op" id="7056326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056330"><a href="/net/http/httptest/recorder_test.go.html#7056277">h</a></span><span class="op" id="7056331">.</span><span class="ident" id="7056332">ServeHTTP</span><span class="op" id="7056341">(</span><span class="ident" id="7056342"><a href="/net/http/httptest/recorder_test.go.html#7056307">rec</a></span><span class="op" id="7056345">,</span>&nbsp;<span class="ident" id="7056347"><a href="/net/http/httptest/recorder_test.go.html#7056192">r</a></span><span class="op" id="7056348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7056352">for</span>&nbsp;<span class="ident" id="7056356">_</span><span class="op" id="7056357">,</span>&nbsp;<span class="ident" id="7056359">check</span>&nbsp;<span class="op" id="7056365">:=</span>&nbsp;<span class="keyword" id="7056368">range</span>&nbsp;<span class="ident" id="7056374"><a href="/net/http/httptest/recorder_test.go.html#7056255">tt</a></span><span class="op" id="7056376">.</span><span class="ident" id="7056377">checks</span>&nbsp;<span class="op" id="7056384">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7056389">if</span>&nbsp;<span class="ident" id="7056392">err</span>&nbsp;<span class="op" id="7056396">:=</span>&nbsp;<span class="ident" id="7056399"><a href="/net/http/httptest/recorder_test.go.html#7056359">check</a></span><span class="op" id="7056404">(</span><span class="ident" id="7056405"><a href="/net/http/httptest/recorder_test.go.html#7056307">rec</a></span><span class="op" id="7056408">)</span><span class="op" id="7056409">;</span>&nbsp;<span class="ident" id="7056411"><a href="/net/http/httptest/recorder_test.go.html#7056392">err</a></span>&nbsp;<span class="op" id="7056415">!=</span>&nbsp;<span class="ident" id="7056418">nil</span>&nbsp;<span class="op" id="7056422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056428"><a href="/net/http/httptest/recorder_test.go.html#7054560">t</a></span><span class="op" id="7056429">.</span><span class="ident" id="7056430">Errorf</span><span class="op" id="7056436">(</span><span class="string" id="7056437">&#34;%s:&nbsp;%v&#34;</span><span class="op" id="7056445">,</span>&nbsp;<span class="ident" id="7056447"><a href="/net/http/httptest/recorder_test.go.html#7056255">tt</a></span><span class="op" id="7056449">.</span><span class="ident" id="7056450">name</span><span class="op" id="7056454">,</span>&nbsp;<span class="ident" id="7056456"><a href="/net/http/httptest/recorder_test.go.html#7056392">err</a></span><span class="op" id="7056459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7056464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7056468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7056471">}</span><br>
<span class="lineno">90</span><span class="op" id="7056473">}</span>
</div>
</body>
</html>
