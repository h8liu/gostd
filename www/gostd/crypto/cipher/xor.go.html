<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3634399">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3634454">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3634508">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3634559">package</span>&nbsp;<span class="ident" id="3634567">cipher</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3634575">import</span>&nbsp;<span class="op" id="3634582">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3634585">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3634596">&#34;unsafe&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3634605">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3634608">const</span>&nbsp;<span class="ident" id="3634614">wordSize</span>&nbsp;<span class="op" id="3634623">=</span>&nbsp;<span class="builtintype" id="3634625">int</span><span class="op" id="3634628">(</span><span class="ident" id="3634629">unsafe</span><span class="op" id="3634635">.</span><span class="ident" id="3634636">Sizeof</span><span class="op" id="3634642">(</span><span class="builtintype" id="3634643">uintptr</span><span class="op" id="3634650">(</span><span class="num" id="3634651">0</span><span class="op" id="3634652">)</span><span class="op" id="3634653">)</span><span class="op" id="3634654">)</span><br>
<span class="lineno"></span><span class="keyword" id="3634656">const</span>&nbsp;<span class="ident" id="3634662">supportsUnaligned</span>&nbsp;<span class="op" id="3634680">=</span>&nbsp;<span class="ident" id="3634682">runtime</span><span class="op" id="3634689">.</span><span class="ident" id="3634690">GOARCH</span>&nbsp;<span class="op" id="3634697">==</span>&nbsp;<span class="string" id="3634700">&#34;386&#34;</span>&nbsp;<span class="op" id="3634706">||</span>&nbsp;<span class="ident" id="3634709">runtime</span><span class="op" id="3634716">.</span><span class="ident" id="3634717">GOARCH</span>&nbsp;<span class="op" id="3634724">==</span>&nbsp;<span class="string" id="3634727">&#34;amd64&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3634736">//&nbsp;fastXORBytes&nbsp;xors&nbsp;in&nbsp;bulk.&nbsp;It&nbsp;only&nbsp;works&nbsp;on&nbsp;architectures&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3634802">//&nbsp;support&nbsp;unaligned&nbsp;read/writes.</span><br>
<span class="lineno"></span><span class="keyword" id="3634836">func</span>&nbsp;<span class="ident" id="3634841">fastXORBytes</span><span class="op" id="3634853">(</span><span class="ident" id="3634854">dst</span><span class="op" id="3634857">,</span>&nbsp;<span class="ident" id="3634859">a</span><span class="op" id="3634860">,</span>&nbsp;<span class="ident" id="3634862">b</span>&nbsp;<span class="op" id="3634864">[</span><span class="op" id="3634865">]</span><span class="builtintype" id="3634866">byte</span><span class="op" id="3634870">)</span>&nbsp;<span class="builtintype" id="3634872">int</span>&nbsp;<span class="op" id="3634876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3634879">n</span>&nbsp;<span class="op" id="3634881">:=</span>&nbsp;<span class="builtinfunc" id="3634884">len</span><span class="op" id="3634887">(</span><span class="ident" id="3634888">a</span><span class="op" id="3634889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3634892">if</span>&nbsp;<span class="builtinfunc" id="3634895">len</span><span class="op" id="3634898">(</span><span class="ident" id="3634899">b</span><span class="op" id="3634900">)</span>&nbsp;<span class="op" id="3634902">&lt;</span>&nbsp;<span class="ident" id="3634904">n</span>&nbsp;<span class="op" id="3634906">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3634910">n</span>&nbsp;<span class="op" id="3634912">=</span>&nbsp;<span class="builtinfunc" id="3634914">len</span><span class="op" id="3634917">(</span><span class="ident" id="3634918">b</span><span class="op" id="3634919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3634922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3634926">w</span>&nbsp;<span class="op" id="3634928">:=</span>&nbsp;<span class="ident" id="3634931">n</span>&nbsp;<span class="op" id="3634933">/</span>&nbsp;<span class="ident" id="3634935">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3634945">if</span>&nbsp;<span class="ident" id="3634948">w</span>&nbsp;<span class="op" id="3634950">&gt;</span>&nbsp;<span class="num" id="3634952">0</span>&nbsp;<span class="op" id="3634954">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3634958">dw</span>&nbsp;<span class="op" id="3634961">:=</span>&nbsp;<span class="op" id="3634964">*</span><span class="op" id="3634965">(</span><span class="op" id="3634966">*</span><span class="op" id="3634967">[</span><span class="op" id="3634968">]</span><span class="builtintype" id="3634969">uintptr</span><span class="op" id="3634976">)</span><span class="op" id="3634977">(</span><span class="ident" id="3634978">unsafe</span><span class="op" id="3634984">.</span><span class="ident" id="3634985">Pointer</span><span class="op" id="3634992">(</span><span class="op" id="3634993">&amp;</span><span class="ident" id="3634994">dst</span><span class="op" id="3634997">)</span><span class="op" id="3634998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3635002">aw</span>&nbsp;<span class="op" id="3635005">:=</span>&nbsp;<span class="op" id="3635008">*</span><span class="op" id="3635009">(</span><span class="op" id="3635010">*</span><span class="op" id="3635011">[</span><span class="op" id="3635012">]</span><span class="builtintype" id="3635013">uintptr</span><span class="op" id="3635020">)</span><span class="op" id="3635021">(</span><span class="ident" id="3635022">unsafe</span><span class="op" id="3635028">.</span><span class="ident" id="3635029">Pointer</span><span class="op" id="3635036">(</span><span class="op" id="3635037">&amp;</span><span class="ident" id="3635038">a</span><span class="op" id="3635039">)</span><span class="op" id="3635040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3635044">bw</span>&nbsp;<span class="op" id="3635047">:=</span>&nbsp;<span class="op" id="3635050">*</span><span class="op" id="3635051">(</span><span class="op" id="3635052">*</span><span class="op" id="3635053">[</span><span class="op" id="3635054">]</span><span class="builtintype" id="3635055">uintptr</span><span class="op" id="3635062">)</span><span class="op" id="3635063">(</span><span class="ident" id="3635064">unsafe</span><span class="op" id="3635070">.</span><span class="ident" id="3635071">Pointer</span><span class="op" id="3635078">(</span><span class="op" id="3635079">&amp;</span><span class="ident" id="3635080">b</span><span class="op" id="3635081">)</span><span class="op" id="3635082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3635086">for</span>&nbsp;<span class="ident" id="3635090">i</span>&nbsp;<span class="op" id="3635092">:=</span>&nbsp;<span class="num" id="3635095">0</span><span class="op" id="3635096">;</span>&nbsp;<span class="ident" id="3635098">i</span>&nbsp;<span class="op" id="3635100">&lt;</span>&nbsp;<span class="ident" id="3635102">w</span><span class="op" id="3635103">;</span>&nbsp;<span class="ident" id="3635105">i</span><span class="op" id="3635106">++</span>&nbsp;<span class="op" id="3635109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3635114">dw</span><span class="op" id="3635116">[</span><span class="ident" id="3635117">i</span><span class="op" id="3635118">]</span>&nbsp;<span class="op" id="3635120">=</span>&nbsp;<span class="ident" id="3635122">aw</span><span class="op" id="3635124">[</span><span class="ident" id="3635125">i</span><span class="op" id="3635126">]</span>&nbsp;<span class="op" id="3635128">^</span>&nbsp;<span class="ident" id="3635130">bw</span><span class="op" id="3635132">[</span><span class="ident" id="3635133">i</span><span class="op" id="3635134">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3635138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3635141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3635145">for</span>&nbsp;<span class="ident" id="3635149">i</span>&nbsp;<span class="op" id="3635151">:=</span>&nbsp;<span class="op" id="3635154">(</span><span class="ident" id="3635155">n</span>&nbsp;<span class="op" id="3635157">-</span>&nbsp;<span class="ident" id="3635159">n</span><span class="op" id="3635160">%</span><span class="ident" id="3635161">wordSize</span><span class="op" id="3635169">)</span><span class="op" id="3635170">;</span>&nbsp;<span class="ident" id="3635172">i</span>&nbsp;<span class="op" id="3635174">&lt;</span>&nbsp;<span class="ident" id="3635176">n</span><span class="op" id="3635177">;</span>&nbsp;<span class="ident" id="3635179">i</span><span class="op" id="3635180">++</span>&nbsp;<span class="op" id="3635183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3635187">dst</span><span class="op" id="3635190">[</span><span class="ident" id="3635191">i</span><span class="op" id="3635192">]</span>&nbsp;<span class="op" id="3635194">=</span>&nbsp;<span class="ident" id="3635196">a</span><span class="op" id="3635197">[</span><span class="ident" id="3635198">i</span><span class="op" id="3635199">]</span>&nbsp;<span class="op" id="3635201">^</span>&nbsp;<span class="ident" id="3635203">b</span><span class="op" id="3635204">[</span><span class="ident" id="3635205">i</span><span class="op" id="3635206">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3635209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3635213">return</span>&nbsp;<span class="ident" id="3635220">n</span><br>
<span class="lineno"></span><span class="op" id="3635222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="3635225">func</span>&nbsp;<span class="ident" id="3635230">safeXORBytes</span><span class="op" id="3635242">(</span><span class="ident" id="3635243">dst</span><span class="op" id="3635246">,</span>&nbsp;<span class="ident" id="3635248">a</span><span class="op" id="3635249">,</span>&nbsp;<span class="ident" id="3635251">b</span>&nbsp;<span class="op" id="3635253">[</span><span class="op" id="3635254">]</span><span class="builtintype" id="3635255">byte</span><span class="op" id="3635259">)</span>&nbsp;<span class="builtintype" id="3635261">int</span>&nbsp;<span class="op" id="3635265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3635268">n</span>&nbsp;<span class="op" id="3635270">:=</span>&nbsp;<span class="builtinfunc" id="3635273">len</span><span class="op" id="3635276">(</span><span class="ident" id="3635277">a</span><span class="op" id="3635278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3635281">if</span>&nbsp;<span class="builtinfunc" id="3635284">len</span><span class="op" id="3635287">(</span><span class="ident" id="3635288">b</span><span class="op" id="3635289">)</span>&nbsp;<span class="op" id="3635291">&lt;</span>&nbsp;<span class="ident" id="3635293">n</span>&nbsp;<span class="op" id="3635295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3635299">n</span>&nbsp;<span class="op" id="3635301">=</span>&nbsp;<span class="builtinfunc" id="3635303">len</span><span class="op" id="3635306">(</span><span class="ident" id="3635307">b</span><span class="op" id="3635308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3635311">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3635314">for</span>&nbsp;<span class="ident" id="3635318">i</span>&nbsp;<span class="op" id="3635320">:=</span>&nbsp;<span class="num" id="3635323">0</span><span class="op" id="3635324">;</span>&nbsp;<span class="ident" id="3635326">i</span>&nbsp;<span class="op" id="3635328">&lt;</span>&nbsp;<span class="ident" id="3635330">n</span><span class="op" id="3635331">;</span>&nbsp;<span class="ident" id="3635333">i</span><span class="op" id="3635334">++</span>&nbsp;<span class="op" id="3635337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3635341">dst</span><span class="op" id="3635344">[</span><span class="ident" id="3635345">i</span><span class="op" id="3635346">]</span>&nbsp;<span class="op" id="3635348">=</span>&nbsp;<span class="ident" id="3635350">a</span><span class="op" id="3635351">[</span><span class="ident" id="3635352">i</span><span class="op" id="3635353">]</span>&nbsp;<span class="op" id="3635355">^</span>&nbsp;<span class="ident" id="3635357">b</span><span class="op" id="3635358">[</span><span class="ident" id="3635359">i</span><span class="op" id="3635360">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3635363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3635366">return</span>&nbsp;<span class="ident" id="3635373">n</span><br>
<span class="lineno"></span><span class="op" id="3635375">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="3635378">//&nbsp;xorBytes&nbsp;xors&nbsp;the&nbsp;bytes&nbsp;in&nbsp;a&nbsp;and&nbsp;b.&nbsp;The&nbsp;destination&nbsp;is&nbsp;assumed&nbsp;to&nbsp;have&nbsp;enough</span><br>
<span class="lineno"></span><span class="comment" id="3635459">//&nbsp;space.&nbsp;Returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;xor&#39;d.</span><br>
<span class="lineno"></span><span class="keyword" id="3635504">func</span>&nbsp;<span class="ident" id="3635509">xorBytes</span><span class="op" id="3635517">(</span><span class="ident" id="3635518">dst</span><span class="op" id="3635521">,</span>&nbsp;<span class="ident" id="3635523">a</span><span class="op" id="3635524">,</span>&nbsp;<span class="ident" id="3635526">b</span>&nbsp;<span class="op" id="3635528">[</span><span class="op" id="3635529">]</span><span class="builtintype" id="3635530">byte</span><span class="op" id="3635534">)</span>&nbsp;<span class="builtintype" id="3635536">int</span>&nbsp;<span class="op" id="3635540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3635543">if</span>&nbsp;<span class="ident" id="3635546">supportsUnaligned</span>&nbsp;<span class="op" id="3635564">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3635568">return</span>&nbsp;<span class="ident" id="3635575">fastXORBytes</span><span class="op" id="3635587">(</span><span class="ident" id="3635588">dst</span><span class="op" id="3635591">,</span>&nbsp;<span class="ident" id="3635593">a</span><span class="op" id="3635594">,</span>&nbsp;<span class="ident" id="3635596">b</span><span class="op" id="3635597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3635600">}</span>&nbsp;<span class="keyword" id="3635602">else</span>&nbsp;<span class="op" id="3635607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3635611">//&nbsp;TODO(hanwen):&nbsp;if&nbsp;(dst,&nbsp;a,&nbsp;b)&nbsp;have&nbsp;common&nbsp;alignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3635667">//&nbsp;we&nbsp;could&nbsp;still&nbsp;try&nbsp;fastXORBytes.&nbsp;It&nbsp;is&nbsp;not&nbsp;clear</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3635721">//&nbsp;how&nbsp;often&nbsp;this&nbsp;happens,&nbsp;and&nbsp;it&#39;s&nbsp;only&nbsp;worth&nbsp;it&nbsp;if</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3635776">//&nbsp;the&nbsp;block&nbsp;encryption&nbsp;itself&nbsp;is&nbsp;hardware</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3635821">//&nbsp;accelerated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3635839">return</span>&nbsp;<span class="ident" id="3635846">safeXORBytes</span><span class="op" id="3635858">(</span><span class="ident" id="3635859">dst</span><span class="op" id="3635862">,</span>&nbsp;<span class="ident" id="3635864">a</span><span class="op" id="3635865">,</span>&nbsp;<span class="ident" id="3635867">b</span><span class="op" id="3635868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3635871">}</span><br>
<span class="lineno"></span><span class="op" id="3635873">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="3635876">//&nbsp;fastXORWords&nbsp;XORs&nbsp;multiples&nbsp;of&nbsp;4&nbsp;or&nbsp;8&nbsp;bytes&nbsp;(depending&nbsp;on&nbsp;architecture.)</span><br>
<span class="lineno"></span><span class="comment" id="3635952">//&nbsp;The&nbsp;arguments&nbsp;are&nbsp;assumed&nbsp;to&nbsp;be&nbsp;of&nbsp;equal&nbsp;length.</span><br>
<span class="lineno"></span><span class="keyword" id="3636004">func</span>&nbsp;<span class="ident" id="3636009">fastXORWords</span><span class="op" id="3636021">(</span><span class="ident" id="3636022">dst</span><span class="op" id="3636025">,</span>&nbsp;<span class="ident" id="3636027">a</span><span class="op" id="3636028">,</span>&nbsp;<span class="ident" id="3636030">b</span>&nbsp;<span class="op" id="3636032">[</span><span class="op" id="3636033">]</span><span class="builtintype" id="3636034">byte</span><span class="op" id="3636038">)</span>&nbsp;<span class="op" id="3636040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3636043">dw</span>&nbsp;<span class="op" id="3636046">:=</span>&nbsp;<span class="op" id="3636049">*</span><span class="op" id="3636050">(</span><span class="op" id="3636051">*</span><span class="op" id="3636052">[</span><span class="op" id="3636053">]</span><span class="builtintype" id="3636054">uintptr</span><span class="op" id="3636061">)</span><span class="op" id="3636062">(</span><span class="ident" id="3636063">unsafe</span><span class="op" id="3636069">.</span><span class="ident" id="3636070">Pointer</span><span class="op" id="3636077">(</span><span class="op" id="3636078">&amp;</span><span class="ident" id="3636079">dst</span><span class="op" id="3636082">)</span><span class="op" id="3636083">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3636086">aw</span>&nbsp;<span class="op" id="3636089">:=</span>&nbsp;<span class="op" id="3636092">*</span><span class="op" id="3636093">(</span><span class="op" id="3636094">*</span><span class="op" id="3636095">[</span><span class="op" id="3636096">]</span><span class="builtintype" id="3636097">uintptr</span><span class="op" id="3636104">)</span><span class="op" id="3636105">(</span><span class="ident" id="3636106">unsafe</span><span class="op" id="3636112">.</span><span class="ident" id="3636113">Pointer</span><span class="op" id="3636120">(</span><span class="op" id="3636121">&amp;</span><span class="ident" id="3636122">a</span><span class="op" id="3636123">)</span><span class="op" id="3636124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3636127">bw</span>&nbsp;<span class="op" id="3636130">:=</span>&nbsp;<span class="op" id="3636133">*</span><span class="op" id="3636134">(</span><span class="op" id="3636135">*</span><span class="op" id="3636136">[</span><span class="op" id="3636137">]</span><span class="builtintype" id="3636138">uintptr</span><span class="op" id="3636145">)</span><span class="op" id="3636146">(</span><span class="ident" id="3636147">unsafe</span><span class="op" id="3636153">.</span><span class="ident" id="3636154">Pointer</span><span class="op" id="3636161">(</span><span class="op" id="3636162">&amp;</span><span class="ident" id="3636163">b</span><span class="op" id="3636164">)</span><span class="op" id="3636165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3636168">n</span>&nbsp;<span class="op" id="3636170">:=</span>&nbsp;<span class="builtinfunc" id="3636173">len</span><span class="op" id="3636176">(</span><span class="ident" id="3636177">b</span><span class="op" id="3636178">)</span>&nbsp;<span class="op" id="3636180">/</span>&nbsp;<span class="ident" id="3636182">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3636192">for</span>&nbsp;<span class="ident" id="3636196">i</span>&nbsp;<span class="op" id="3636198">:=</span>&nbsp;<span class="num" id="3636201">0</span><span class="op" id="3636202">;</span>&nbsp;<span class="ident" id="3636204">i</span>&nbsp;<span class="op" id="3636206">&lt;</span>&nbsp;<span class="ident" id="3636208">n</span><span class="op" id="3636209">;</span>&nbsp;<span class="ident" id="3636211">i</span><span class="op" id="3636212">++</span>&nbsp;<span class="op" id="3636215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3636219">dw</span><span class="op" id="3636221">[</span><span class="ident" id="3636222">i</span><span class="op" id="3636223">]</span>&nbsp;<span class="op" id="3636225">=</span>&nbsp;<span class="ident" id="3636227">aw</span><span class="op" id="3636229">[</span><span class="ident" id="3636230">i</span><span class="op" id="3636231">]</span>&nbsp;<span class="op" id="3636233">^</span>&nbsp;<span class="ident" id="3636235">bw</span><span class="op" id="3636237">[</span><span class="ident" id="3636238">i</span><span class="op" id="3636239">]</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3636242">}</span><br>
<span class="lineno"></span><span class="op" id="3636244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3636247">func</span>&nbsp;<span class="ident" id="3636252">xorWords</span><span class="op" id="3636260">(</span><span class="ident" id="3636261">dst</span><span class="op" id="3636264">,</span>&nbsp;<span class="ident" id="3636266">a</span><span class="op" id="3636267">,</span>&nbsp;<span class="ident" id="3636269">b</span>&nbsp;<span class="op" id="3636271">[</span><span class="op" id="3636272">]</span><span class="builtintype" id="3636273">byte</span><span class="op" id="3636277">)</span>&nbsp;<span class="op" id="3636279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3636282">if</span>&nbsp;<span class="ident" id="3636285">supportsUnaligned</span>&nbsp;<span class="op" id="3636303">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3636307">fastXORWords</span><span class="op" id="3636319">(</span><span class="ident" id="3636320">dst</span><span class="op" id="3636323">,</span>&nbsp;<span class="ident" id="3636325">a</span><span class="op" id="3636326">,</span>&nbsp;<span class="ident" id="3636328">b</span><span class="op" id="3636329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3636332">}</span>&nbsp;<span class="keyword" id="3636334">else</span>&nbsp;<span class="op" id="3636339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3636343">safeXORBytes</span><span class="op" id="3636355">(</span><span class="ident" id="3636356">dst</span><span class="op" id="3636359">,</span>&nbsp;<span class="ident" id="3636361">a</span><span class="op" id="3636362">,</span>&nbsp;<span class="ident" id="3636364">b</span><span class="op" id="3636365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3636368">}</span><br>
<span class="lineno"></span><span class="op" id="3636370">}</span>
</div>
</body>
</html>
