<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8541779">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8541835">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8541889">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8541940">package</span>&nbsp;<span class="ident" id="8541948">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8541957">//&nbsp;MakeRO&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;read-only&nbsp;flag&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="8542016">func</span>&nbsp;<span class="ident" id="8542021">MakeRO</span><span class="op" id="8542027">(</span><span class="ident" id="8542028">v</span>&nbsp;<span class="ident" id="8542030">Value</span><span class="op" id="8542035">)</span>&nbsp;<span class="ident" id="8542037">Value</span>&nbsp;<span class="op" id="8542043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542046">v</span><span class="op" id="8542047">.</span><span class="ident" id="8542048">flag</span>&nbsp;<span class="op" id="8542053">|=</span>&nbsp;<span class="ident" id="8542056">flagRO</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8542064">return</span>&nbsp;<span class="ident" id="8542071">v</span><br>
<span class="lineno"></span><span class="op" id="8542073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8542076">//&nbsp;IsRO&nbsp;reports&nbsp;whether&nbsp;v&#39;s&nbsp;read-only&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="8542127">func</span>&nbsp;<span class="ident" id="8542132">IsRO</span><span class="op" id="8542136">(</span><span class="ident" id="8542137">v</span>&nbsp;<span class="ident" id="8542139">Value</span><span class="op" id="8542144">)</span>&nbsp;<span class="builtintype" id="8542146">bool</span>&nbsp;<span class="op" id="8542151">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8542154">return</span>&nbsp;<span class="ident" id="8542161">v</span><span class="op" id="8542162">.</span><span class="ident" id="8542163">flag</span><span class="op" id="8542167">&amp;</span><span class="ident" id="8542168">flagRO</span>&nbsp;<span class="op" id="8542175">!=</span>&nbsp;<span class="num" id="8542178">0</span><br>
<span class="lineno"></span><span class="op" id="8542180">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8542183">var</span>&nbsp;<span class="ident" id="8542187">ArrayOf</span>&nbsp;<span class="op" id="8542195">=</span>&nbsp;<span class="ident" id="8542197">arrayOf</span><br>
<span class="lineno"></span><span class="keyword" id="8542205">var</span>&nbsp;<span class="ident" id="8542209">CallGC</span>&nbsp;<span class="op" id="8542216">=</span>&nbsp;<span class="op" id="8542218">&amp;</span><span class="ident" id="8542219">callGC</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8542227">const</span>&nbsp;<span class="ident" id="8542233">PtrSize</span>&nbsp;<span class="op" id="8542241">=</span>&nbsp;<span class="ident" id="8542243">ptrSize</span><br>
<span class="lineno"></span><span class="keyword" id="8542251">const</span>&nbsp;<span class="ident" id="8542257">BitsPointer</span>&nbsp;<span class="op" id="8542269">=</span>&nbsp;<span class="ident" id="8542271">bitsPointer</span><br>
<span class="lineno"></span><span class="keyword" id="8542283">const</span>&nbsp;<span class="ident" id="8542289">BitsScalar</span>&nbsp;<span class="op" id="8542300">=</span>&nbsp;<span class="ident" id="8542302">bitsScalar</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="8542314">func</span>&nbsp;<span class="ident" id="8542319">FuncLayout</span><span class="op" id="8542329">(</span><span class="ident" id="8542330">t</span>&nbsp;<span class="ident" id="8542332">Type</span><span class="op" id="8542336">,</span>&nbsp;<span class="ident" id="8542338">rcvr</span>&nbsp;<span class="ident" id="8542343">Type</span><span class="op" id="8542347">)</span>&nbsp;<span class="op" id="8542349">(</span><span class="ident" id="8542350">frametype</span>&nbsp;<span class="ident" id="8542360">Type</span><span class="op" id="8542364">,</span>&nbsp;<span class="ident" id="8542366">argSize</span><span class="op" id="8542373">,</span>&nbsp;<span class="ident" id="8542375">retOffset</span>&nbsp;<span class="builtintype" id="8542385">uintptr</span><span class="op" id="8542392">,</span>&nbsp;<span class="ident" id="8542394">stack</span>&nbsp;<span class="op" id="8542400">[</span><span class="op" id="8542401">]</span><span class="builtintype" id="8542402">byte</span><span class="op" id="8542406">)</span>&nbsp;<span class="op" id="8542408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8542411">var</span>&nbsp;<span class="ident" id="8542415">ft</span>&nbsp;<span class="op" id="8542418">*</span><span class="ident" id="8542419">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8542426">var</span>&nbsp;<span class="ident" id="8542430">s</span>&nbsp;<span class="op" id="8542432">*</span><span class="ident" id="8542433">bitVector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8542444">if</span>&nbsp;<span class="ident" id="8542447">rcvr</span>&nbsp;<span class="op" id="8542452">!=</span>&nbsp;<span class="ident" id="8542455">nil</span>&nbsp;<span class="op" id="8542459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542463">ft</span><span class="op" id="8542465">,</span>&nbsp;<span class="ident" id="8542467">argSize</span><span class="op" id="8542474">,</span>&nbsp;<span class="ident" id="8542476">retOffset</span><span class="op" id="8542485">,</span>&nbsp;<span class="ident" id="8542487">s</span>&nbsp;<span class="op" id="8542489">=</span>&nbsp;<span class="ident" id="8542491">funcLayout</span><span class="op" id="8542501">(</span><span class="ident" id="8542502">t</span><span class="op" id="8542503">.</span><span class="op" id="8542504">(</span><span class="op" id="8542505">*</span><span class="ident" id="8542506">rtype</span><span class="op" id="8542511">)</span><span class="op" id="8542512">,</span>&nbsp;<span class="ident" id="8542514">rcvr</span><span class="op" id="8542518">.</span><span class="op" id="8542519">(</span><span class="op" id="8542520">*</span><span class="ident" id="8542521">rtype</span><span class="op" id="8542526">)</span><span class="op" id="8542527">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8542530">}</span>&nbsp;<span class="keyword" id="8542532">else</span>&nbsp;<span class="op" id="8542537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542541">ft</span><span class="op" id="8542543">,</span>&nbsp;<span class="ident" id="8542545">argSize</span><span class="op" id="8542552">,</span>&nbsp;<span class="ident" id="8542554">retOffset</span><span class="op" id="8542563">,</span>&nbsp;<span class="ident" id="8542565">s</span>&nbsp;<span class="op" id="8542567">=</span>&nbsp;<span class="ident" id="8542569">funcLayout</span><span class="op" id="8542579">(</span><span class="ident" id="8542580">t</span><span class="op" id="8542581">.</span><span class="op" id="8542582">(</span><span class="op" id="8542583">*</span><span class="ident" id="8542584">rtype</span><span class="op" id="8542589">)</span><span class="op" id="8542590">,</span>&nbsp;<span class="ident" id="8542592">nil</span><span class="op" id="8542595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8542598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542601">frametype</span>&nbsp;<span class="op" id="8542611">=</span>&nbsp;<span class="ident" id="8542613">ft</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8542617">for</span>&nbsp;<span class="ident" id="8542621">i</span>&nbsp;<span class="op" id="8542623">:=</span>&nbsp;<span class="builtintype" id="8542626">uint32</span><span class="op" id="8542632">(</span><span class="num" id="8542633">0</span><span class="op" id="8542634">)</span><span class="op" id="8542635">;</span>&nbsp;<span class="ident" id="8542637">i</span>&nbsp;<span class="op" id="8542639">&lt;</span>&nbsp;<span class="ident" id="8542641">s</span><span class="op" id="8542642">.</span><span class="ident" id="8542643">n</span><span class="op" id="8542644">;</span>&nbsp;<span class="ident" id="8542646">i</span>&nbsp;<span class="op" id="8542648">+=</span>&nbsp;<span class="num" id="8542651">2</span>&nbsp;<span class="op" id="8542653">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542657">stack</span>&nbsp;<span class="op" id="8542663">=</span>&nbsp;<span class="builtinfunc" id="8542665">append</span><span class="op" id="8542671">(</span><span class="ident" id="8542672">stack</span><span class="op" id="8542677">,</span>&nbsp;<span class="ident" id="8542679">s</span><span class="op" id="8542680">.</span><span class="ident" id="8542681">data</span><span class="op" id="8542685">[</span><span class="ident" id="8542686">i</span><span class="op" id="8542687">/</span><span class="num" id="8542688">8</span><span class="op" id="8542689">]</span><span class="op" id="8542690">&gt;&gt;</span><span class="op" id="8542692">(</span><span class="ident" id="8542693">i</span><span class="op" id="8542694">%</span><span class="num" id="8542695">8</span><span class="op" id="8542696">)</span><span class="op" id="8542697">&amp;</span><span class="num" id="8542698">3</span><span class="op" id="8542699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8542702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8542705">return</span><br>
<span class="lineno"></span><span class="op" id="8542712">}</span>
</div>
</body>
</html>
