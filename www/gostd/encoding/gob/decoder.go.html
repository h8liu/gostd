<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html" class="current">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5937753">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5937808">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5937862">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5937913">package</span>&nbsp;<span class="ident" id="5937921">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5937926">import</span>&nbsp;<span class="op" id="5937933">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5937936">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5937945">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5937955">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5937961">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5937972">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="5937979">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5937982">//&nbsp;tooBig&nbsp;provides&nbsp;a&nbsp;sanity&nbsp;check&nbsp;for&nbsp;sizes;&nbsp;used&nbsp;in&nbsp;several&nbsp;places.</span><br>
<span class="lineno"></span><span class="comment" id="5938051">//&nbsp;Upper&nbsp;limit&nbsp;of&nbsp;1GB,&nbsp;allowing&nbsp;room&nbsp;to&nbsp;grow&nbsp;a&nbsp;little&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="5938123">//&nbsp;TODO:&nbsp;make&nbsp;this&nbsp;adjustable?</span><br>
<span class="lineno"></span><span class="keyword" id="5938154">const</span>&nbsp;<span class="ident" id="5938160">tooBig</span>&nbsp;<span class="op" id="5938167">=</span>&nbsp;<span class="num" id="5938169">1</span>&nbsp;<span class="op" id="5938171">&lt;&lt;</span>&nbsp;<span class="num" id="5938174">30</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="5938178">//&nbsp;A&nbsp;Decoder&nbsp;manages&nbsp;the&nbsp;receipt&nbsp;of&nbsp;type&nbsp;and&nbsp;data&nbsp;information&nbsp;read&nbsp;from&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5938254">//&nbsp;remote&nbsp;side&nbsp;of&nbsp;a&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="5938286">type</span>&nbsp;<span class="ident" id="5938291">Decoder</span>&nbsp;<span class="keyword" id="5938299">struct</span>&nbsp;<span class="op" id="5938306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5938309">mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938322">sync</span><span class="op" id="5938326">.</span><span class="ident" id="5938327">Mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938362">//&nbsp;each&nbsp;item&nbsp;must&nbsp;be&nbsp;received&nbsp;atomically</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5938404">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938417">io</span><span class="op" id="5938419">.</span><span class="ident" id="5938420">Reader</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938457">//&nbsp;source&nbsp;of&nbsp;the&nbsp;data</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5938480">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938493">decBuffer</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938533">//&nbsp;buffer&nbsp;for&nbsp;more&nbsp;efficient&nbsp;i/o&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5938574">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938587">map</span><span class="op" id="5938590">[</span><span class="ident" id="5938591">typeId</span><span class="op" id="5938597">]</span><span class="op" id="5938598">*</span><span class="ident" id="5938599">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938627">//&nbsp;map&nbsp;from&nbsp;remote&nbsp;ID&nbsp;to&nbsp;local&nbsp;description</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5938671">decoderCache</span>&nbsp;<span class="keyword" id="5938684">map</span><span class="op" id="5938687">[</span><span class="ident" id="5938688">reflect</span><span class="op" id="5938695">.</span><span class="ident" id="5938696">Type</span><span class="op" id="5938700">]</span><span class="keyword" id="5938701">map</span><span class="op" id="5938704">[</span><span class="ident" id="5938705">typeId</span><span class="op" id="5938711">]</span><span class="op" id="5938712">*</span><span class="op" id="5938713">*</span><span class="ident" id="5938714">decEngine</span>&nbsp;<span class="comment" id="5938724">//&nbsp;cache&nbsp;of&nbsp;compiled&nbsp;engines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5938754">ignorerCache</span>&nbsp;<span class="keyword" id="5938767">map</span><span class="op" id="5938770">[</span><span class="ident" id="5938771">typeId</span><span class="op" id="5938777">]</span><span class="op" id="5938778">*</span><span class="op" id="5938779">*</span><span class="ident" id="5938780">decEngine</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938807">//&nbsp;ditto&nbsp;for&nbsp;ignored&nbsp;objects</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5938837">freeList</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5938850">*</span><span class="ident" id="5938851">decoderState</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938890">//&nbsp;list&nbsp;of&nbsp;free&nbsp;decoderStates;&nbsp;avoids&nbsp;reallocation</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5938942">countBuf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5938955">[</span><span class="op" id="5938956">]</span><span class="builtintype" id="5938957">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938995">//&nbsp;used&nbsp;for&nbsp;decoding&nbsp;integers&nbsp;while&nbsp;parsing&nbsp;messages</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5939049">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5939062">error</span><br>
<span class="lineno"></span><span class="op" id="5939068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5939071">//&nbsp;NewDecoder&nbsp;returns&nbsp;a&nbsp;new&nbsp;decoder&nbsp;that&nbsp;reads&nbsp;from&nbsp;the&nbsp;io.Reader.</span><br>
<span class="lineno">35</span><span class="comment" id="5939138">//&nbsp;If&nbsp;r&nbsp;does&nbsp;not&nbsp;also&nbsp;implement&nbsp;io.ByteReader,&nbsp;it&nbsp;will&nbsp;be&nbsp;wrapped&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5939209">//&nbsp;bufio.Reader.</span><br>
<span class="lineno"></span><span class="keyword" id="5939226">func</span>&nbsp;<span class="ident" id="5939231">NewDecoder</span><span class="op" id="5939241">(</span><span class="ident" id="5939242">r</span>&nbsp;<span class="ident" id="5939244">io</span><span class="op" id="5939246">.</span><span class="ident" id="5939247">Reader</span><span class="op" id="5939253">)</span>&nbsp;<span class="op" id="5939255">*</span><span class="ident" id="5939256">Decoder</span>&nbsp;<span class="op" id="5939264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5939267">dec</span>&nbsp;<span class="op" id="5939271">:=</span>&nbsp;<span class="builtinfunc" id="5939274">new</span><span class="op" id="5939277">(</span><span class="ident" id="5939278">Decoder</span><span class="op" id="5939285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5939288">//&nbsp;We&nbsp;use&nbsp;the&nbsp;ability&nbsp;to&nbsp;read&nbsp;bytes&nbsp;as&nbsp;a&nbsp;plausible&nbsp;surrogate&nbsp;for&nbsp;buffering.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5939365">if</span>&nbsp;<span class="ident" id="5939368">_</span><span class="op" id="5939369">,</span>&nbsp;<span class="ident" id="5939371">ok</span>&nbsp;<span class="op" id="5939374">:=</span>&nbsp;<span class="ident" id="5939377">r</span><span class="op" id="5939378">.</span><span class="op" id="5939379">(</span><span class="ident" id="5939380">io</span><span class="op" id="5939382">.</span><span class="ident" id="5939383">ByteReader</span><span class="op" id="5939393">)</span><span class="op" id="5939394">;</span>&nbsp;<span class="op" id="5939396">!</span><span class="ident" id="5939397">ok</span>&nbsp;<span class="op" id="5939400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5939404">r</span>&nbsp;<span class="op" id="5939406">=</span>&nbsp;<span class="ident" id="5939408">bufio</span><span class="op" id="5939413">.</span><span class="ident" id="5939414">NewReader</span><span class="op" id="5939423">(</span><span class="ident" id="5939424">r</span><span class="op" id="5939425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5939428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5939431">dec</span><span class="op" id="5939434">.</span><span class="ident" id="5939435">r</span>&nbsp;<span class="op" id="5939437">=</span>&nbsp;<span class="ident" id="5939439">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5939442">dec</span><span class="op" id="5939445">.</span><span class="ident" id="5939446">wireType</span>&nbsp;<span class="op" id="5939455">=</span>&nbsp;<span class="builtinfunc" id="5939457">make</span><span class="op" id="5939461">(</span><span class="keyword" id="5939462">map</span><span class="op" id="5939465">[</span><span class="ident" id="5939466">typeId</span><span class="op" id="5939472">]</span><span class="op" id="5939473">*</span><span class="ident" id="5939474">wireType</span><span class="op" id="5939482">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5939485">dec</span><span class="op" id="5939488">.</span><span class="ident" id="5939489">decoderCache</span>&nbsp;<span class="op" id="5939502">=</span>&nbsp;<span class="builtinfunc" id="5939504">make</span><span class="op" id="5939508">(</span><span class="keyword" id="5939509">map</span><span class="op" id="5939512">[</span><span class="ident" id="5939513">reflect</span><span class="op" id="5939520">.</span><span class="ident" id="5939521">Type</span><span class="op" id="5939525">]</span><span class="keyword" id="5939526">map</span><span class="op" id="5939529">[</span><span class="ident" id="5939530">typeId</span><span class="op" id="5939536">]</span><span class="op" id="5939537">*</span><span class="op" id="5939538">*</span><span class="ident" id="5939539">decEngine</span><span class="op" id="5939548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5939551">dec</span><span class="op" id="5939554">.</span><span class="ident" id="5939555">ignorerCache</span>&nbsp;<span class="op" id="5939568">=</span>&nbsp;<span class="builtinfunc" id="5939570">make</span><span class="op" id="5939574">(</span><span class="keyword" id="5939575">map</span><span class="op" id="5939578">[</span><span class="ident" id="5939579">typeId</span><span class="op" id="5939585">]</span><span class="op" id="5939586">*</span><span class="op" id="5939587">*</span><span class="ident" id="5939588">decEngine</span><span class="op" id="5939597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5939600">dec</span><span class="op" id="5939603">.</span><span class="ident" id="5939604">countBuf</span>&nbsp;<span class="op" id="5939613">=</span>&nbsp;<span class="builtinfunc" id="5939615">make</span><span class="op" id="5939619">(</span><span class="op" id="5939620">[</span><span class="op" id="5939621">]</span><span class="builtintype" id="5939622">byte</span><span class="op" id="5939626">,</span>&nbsp;<span class="num" id="5939628">9</span><span class="op" id="5939629">)</span>&nbsp;<span class="comment" id="5939631">//&nbsp;counts&nbsp;may&nbsp;be&nbsp;uint64s&nbsp;(unlikely!),&nbsp;require&nbsp;9&nbsp;bytes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5939687">return</span>&nbsp;<span class="ident" id="5939694">dec</span><br>
<span class="lineno">50</span><span class="op" id="5939698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5939701">//&nbsp;recvType&nbsp;loads&nbsp;the&nbsp;definition&nbsp;of&nbsp;a&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5939745">func</span>&nbsp;<span class="op" id="5939750">(</span><span class="ident" id="5939751">dec</span>&nbsp;<span class="op" id="5939755">*</span><span class="ident" id="5939756">Decoder</span><span class="op" id="5939763">)</span>&nbsp;<span class="ident" id="5939765">recvType</span><span class="op" id="5939773">(</span><span class="ident" id="5939774">id</span>&nbsp;<span class="ident" id="5939777">typeId</span><span class="op" id="5939783">)</span>&nbsp;<span class="op" id="5939785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5939788">//&nbsp;Have&nbsp;we&nbsp;already&nbsp;seen&nbsp;this&nbsp;type?&nbsp;&nbsp;That&#39;s&nbsp;an&nbsp;error</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5939841">if</span>&nbsp;<span class="ident" id="5939844">id</span>&nbsp;<span class="op" id="5939847">&lt;</span>&nbsp;<span class="ident" id="5939849">firstUserId</span>&nbsp;<span class="op" id="5939861">||</span>&nbsp;<span class="ident" id="5939864">dec</span><span class="op" id="5939867">.</span><span class="ident" id="5939868">wireType</span><span class="op" id="5939876">[</span><span class="ident" id="5939877">id</span><span class="op" id="5939879">]</span>&nbsp;<span class="op" id="5939881">!=</span>&nbsp;<span class="ident" id="5939884">nil</span>&nbsp;<span class="op" id="5939888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5939892">dec</span><span class="op" id="5939895">.</span><span class="ident" id="5939896">err</span>&nbsp;<span class="op" id="5939900">=</span>&nbsp;<span class="ident" id="5939902">errors</span><span class="op" id="5939908">.</span><span class="ident" id="5939909">New</span><span class="op" id="5939912">(</span><span class="string" id="5939913">&#34;gob:&nbsp;duplicate&nbsp;type&nbsp;received&#34;</span><span class="op" id="5939943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5939947">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5939955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5939959">//&nbsp;Type:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5939969">wire</span>&nbsp;<span class="op" id="5939974">:=</span>&nbsp;<span class="builtinfunc" id="5939977">new</span><span class="op" id="5939980">(</span><span class="ident" id="5939981">wireType</span><span class="op" id="5939989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5939992">dec</span><span class="op" id="5939995">.</span><span class="ident" id="5939996">decodeValue</span><span class="op" id="5940007">(</span><span class="ident" id="5940008">tWireType</span><span class="op" id="5940017">,</span>&nbsp;<span class="ident" id="5940019">reflect</span><span class="op" id="5940026">.</span><span class="ident" id="5940027">ValueOf</span><span class="op" id="5940034">(</span><span class="ident" id="5940035">wire</span><span class="op" id="5940039">)</span><span class="op" id="5940040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5940043">if</span>&nbsp;<span class="ident" id="5940046">dec</span><span class="op" id="5940049">.</span><span class="ident" id="5940050">err</span>&nbsp;<span class="op" id="5940054">!=</span>&nbsp;<span class="ident" id="5940057">nil</span>&nbsp;<span class="op" id="5940061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5940065">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5940073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5940076">//&nbsp;Remember&nbsp;we&#39;ve&nbsp;seen&nbsp;this&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5940111">dec</span><span class="op" id="5940114">.</span><span class="ident" id="5940115">wireType</span><span class="op" id="5940123">[</span><span class="ident" id="5940124">id</span><span class="op" id="5940126">]</span>&nbsp;<span class="op" id="5940128">=</span>&nbsp;<span class="ident" id="5940130">wire</span><br>
<span class="lineno"></span><span class="op" id="5940135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="5940138">var</span>&nbsp;<span class="ident" id="5940142">errBadCount</span>&nbsp;<span class="op" id="5940154">=</span>&nbsp;<span class="ident" id="5940156">errors</span><span class="op" id="5940162">.</span><span class="ident" id="5940163">New</span><span class="op" id="5940166">(</span><span class="string" id="5940167">&#34;invalid&nbsp;message&nbsp;length&#34;</span><span class="op" id="5940191">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5940194">//&nbsp;recvMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;count-delimited&nbsp;item&nbsp;from&nbsp;the&nbsp;input.&nbsp;It&nbsp;is&nbsp;the&nbsp;converse</span><br>
<span class="lineno"></span><span class="comment" id="5940280">//&nbsp;of&nbsp;Encoder.writeMessage.&nbsp;It&nbsp;returns&nbsp;false&nbsp;on&nbsp;EOF&nbsp;or&nbsp;other&nbsp;error&nbsp;reading&nbsp;the&nbsp;message.</span><br>
<span class="lineno"></span><span class="keyword" id="5940368">func</span>&nbsp;<span class="op" id="5940373">(</span><span class="ident" id="5940374">dec</span>&nbsp;<span class="op" id="5940378">*</span><span class="ident" id="5940379">Decoder</span><span class="op" id="5940386">)</span>&nbsp;<span class="ident" id="5940388">recvMessage</span><span class="op" id="5940399">(</span><span class="op" id="5940400">)</span>&nbsp;<span class="builtintype" id="5940402">bool</span>&nbsp;<span class="op" id="5940407">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5940410">//&nbsp;Read&nbsp;a&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5940428">nbytes</span><span class="op" id="5940434">,</span>&nbsp;<span class="ident" id="5940436">_</span><span class="op" id="5940437">,</span>&nbsp;<span class="ident" id="5940439">err</span>&nbsp;<span class="op" id="5940443">:=</span>&nbsp;<span class="ident" id="5940446">decodeUintReader</span><span class="op" id="5940462">(</span><span class="ident" id="5940463">dec</span><span class="op" id="5940466">.</span><span class="ident" id="5940467">r</span><span class="op" id="5940468">,</span>&nbsp;<span class="ident" id="5940470">dec</span><span class="op" id="5940473">.</span><span class="ident" id="5940474">countBuf</span><span class="op" id="5940482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5940485">if</span>&nbsp;<span class="ident" id="5940488">err</span>&nbsp;<span class="op" id="5940492">!=</span>&nbsp;<span class="ident" id="5940495">nil</span>&nbsp;<span class="op" id="5940499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5940503">dec</span><span class="op" id="5940506">.</span><span class="ident" id="5940507">err</span>&nbsp;<span class="op" id="5940511">=</span>&nbsp;<span class="ident" id="5940513">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5940519">return</span>&nbsp;<span class="builtintype" id="5940526">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5940533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5940536">if</span>&nbsp;<span class="ident" id="5940539">nbytes</span>&nbsp;<span class="op" id="5940546">&gt;=</span>&nbsp;<span class="ident" id="5940549">tooBig</span>&nbsp;<span class="op" id="5940556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5940560">dec</span><span class="op" id="5940563">.</span><span class="ident" id="5940564">err</span>&nbsp;<span class="op" id="5940568">=</span>&nbsp;<span class="ident" id="5940570">errBadCount</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5940584">return</span>&nbsp;<span class="builtintype" id="5940591">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5940598">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5940601">dec</span><span class="op" id="5940604">.</span><span class="ident" id="5940605">readMessage</span><span class="op" id="5940616">(</span><span class="builtintype" id="5940617">int</span><span class="op" id="5940620">(</span><span class="ident" id="5940621">nbytes</span><span class="op" id="5940627">)</span><span class="op" id="5940628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5940631">return</span>&nbsp;<span class="ident" id="5940638">dec</span><span class="op" id="5940641">.</span><span class="ident" id="5940642">err</span>&nbsp;<span class="op" id="5940646">==</span>&nbsp;<span class="ident" id="5940649">nil</span><br>
<span class="lineno"></span><span class="op" id="5940653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5940656">//&nbsp;readMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;nbytes&nbsp;bytes&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">90</span><span class="keyword" id="5940715">func</span>&nbsp;<span class="op" id="5940720">(</span><span class="ident" id="5940721">dec</span>&nbsp;<span class="op" id="5940725">*</span><span class="ident" id="5940726">Decoder</span><span class="op" id="5940733">)</span>&nbsp;<span class="ident" id="5940735">readMessage</span><span class="op" id="5940746">(</span><span class="ident" id="5940747">nbytes</span>&nbsp;<span class="builtintype" id="5940754">int</span><span class="op" id="5940757">)</span>&nbsp;<span class="op" id="5940759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5940762">if</span>&nbsp;<span class="ident" id="5940765">dec</span><span class="op" id="5940768">.</span><span class="ident" id="5940769">buf</span><span class="op" id="5940772">.</span><span class="ident" id="5940773">Len</span><span class="op" id="5940776">(</span><span class="op" id="5940777">)</span>&nbsp;<span class="op" id="5940779">!=</span>&nbsp;<span class="num" id="5940782">0</span>&nbsp;<span class="op" id="5940784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5940788">//&nbsp;The&nbsp;buffer&nbsp;should&nbsp;always&nbsp;be&nbsp;empty&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5940832">panic</span><span class="op" id="5940837">(</span><span class="string" id="5940838">&#34;non-empty&nbsp;decoder&nbsp;buffer&#34;</span><span class="op" id="5940864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5940867">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5940870">//&nbsp;Read&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5940888">dec</span><span class="op" id="5940891">.</span><span class="ident" id="5940892">buf</span><span class="op" id="5940895">.</span><span class="ident" id="5940896">Size</span><span class="op" id="5940900">(</span><span class="ident" id="5940901">nbytes</span><span class="op" id="5940907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5940910">_</span><span class="op" id="5940911">,</span>&nbsp;<span class="ident" id="5940913">dec</span><span class="op" id="5940916">.</span><span class="ident" id="5940917">err</span>&nbsp;<span class="op" id="5940921">=</span>&nbsp;<span class="ident" id="5940923">io</span><span class="op" id="5940925">.</span><span class="ident" id="5940926">ReadFull</span><span class="op" id="5940934">(</span><span class="ident" id="5940935">dec</span><span class="op" id="5940938">.</span><span class="ident" id="5940939">r</span><span class="op" id="5940940">,</span>&nbsp;<span class="ident" id="5940942">dec</span><span class="op" id="5940945">.</span><span class="ident" id="5940946">buf</span><span class="op" id="5940949">.</span><span class="ident" id="5940950">Bytes</span><span class="op" id="5940955">(</span><span class="op" id="5940956">)</span><span class="op" id="5940957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5940960">if</span>&nbsp;<span class="ident" id="5940963">dec</span><span class="op" id="5940966">.</span><span class="ident" id="5940967">err</span>&nbsp;<span class="op" id="5940971">!=</span>&nbsp;<span class="ident" id="5940974">nil</span>&nbsp;<span class="op" id="5940978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5940982">if</span>&nbsp;<span class="ident" id="5940985">dec</span><span class="op" id="5940988">.</span><span class="ident" id="5940989">err</span>&nbsp;<span class="op" id="5940993">==</span>&nbsp;<span class="ident" id="5940996">io</span><span class="op" id="5940998">.</span><span class="ident" id="5940999">EOF</span>&nbsp;<span class="op" id="5941003">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5941008">dec</span><span class="op" id="5941011">.</span><span class="ident" id="5941012">err</span>&nbsp;<span class="op" id="5941016">=</span>&nbsp;<span class="ident" id="5941018">io</span><span class="op" id="5941020">.</span><span class="ident" id="5941021">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5941040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5941043">}</span><br>
<span class="lineno"></span><span class="op" id="5941045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="5941048">//&nbsp;toInt&nbsp;turns&nbsp;an&nbsp;encoded&nbsp;uint64&nbsp;into&nbsp;an&nbsp;int,&nbsp;according&nbsp;to&nbsp;the&nbsp;marshaling&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="5941129">func</span>&nbsp;<span class="ident" id="5941134">toInt</span><span class="op" id="5941139">(</span><span class="ident" id="5941140">x</span>&nbsp;<span class="ident" id="5941142">uint64</span><span class="op" id="5941148">)</span>&nbsp;<span class="ident" id="5941150">int64</span>&nbsp;<span class="op" id="5941156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5941159">i</span>&nbsp;<span class="op" id="5941161">:=</span>&nbsp;<span class="ident" id="5941164">int64</span><span class="op" id="5941169">(</span><span class="ident" id="5941170">x</span>&nbsp;<span class="op" id="5941172">&gt;&gt;</span>&nbsp;<span class="num" id="5941175">1</span><span class="op" id="5941176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941179">if</span>&nbsp;<span class="ident" id="5941182">x</span><span class="op" id="5941183">&amp;</span><span class="num" id="5941184">1</span>&nbsp;<span class="op" id="5941186">!=</span>&nbsp;<span class="num" id="5941189">0</span>&nbsp;<span class="op" id="5941191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5941195">i</span>&nbsp;<span class="op" id="5941197">=</span>&nbsp;<span class="op" id="5941199">^</span><span class="ident" id="5941200">i</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5941203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941206">return</span>&nbsp;<span class="ident" id="5941213">i</span><br>
<span class="lineno"></span><span class="op" id="5941215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5941218">func</span>&nbsp;<span class="op" id="5941223">(</span><span class="ident" id="5941224">dec</span>&nbsp;<span class="op" id="5941228">*</span><span class="ident" id="5941229">Decoder</span><span class="op" id="5941236">)</span>&nbsp;<span class="ident" id="5941238">nextInt</span><span class="op" id="5941245">(</span><span class="op" id="5941246">)</span>&nbsp;<span class="ident" id="5941248">int64</span>&nbsp;<span class="op" id="5941254">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5941257">n</span><span class="op" id="5941258">,</span>&nbsp;<span class="ident" id="5941260">_</span><span class="op" id="5941261">,</span>&nbsp;<span class="ident" id="5941263">err</span>&nbsp;<span class="op" id="5941267">:=</span>&nbsp;<span class="ident" id="5941270">decodeUintReader</span><span class="op" id="5941286">(</span><span class="op" id="5941287">&amp;</span><span class="ident" id="5941288">dec</span><span class="op" id="5941291">.</span><span class="ident" id="5941292">buf</span><span class="op" id="5941295">,</span>&nbsp;<span class="ident" id="5941297">dec</span><span class="op" id="5941300">.</span><span class="ident" id="5941301">countBuf</span><span class="op" id="5941309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941312">if</span>&nbsp;<span class="ident" id="5941315">err</span>&nbsp;<span class="op" id="5941319">!=</span>&nbsp;<span class="ident" id="5941322">nil</span>&nbsp;<span class="op" id="5941326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5941330">dec</span><span class="op" id="5941333">.</span><span class="ident" id="5941334">err</span>&nbsp;<span class="op" id="5941338">=</span>&nbsp;<span class="ident" id="5941340">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5941345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941348">return</span>&nbsp;<span class="ident" id="5941355">toInt</span><span class="op" id="5941360">(</span><span class="ident" id="5941361">n</span><span class="op" id="5941362">)</span><br>
<span class="lineno">120</span><span class="op" id="5941364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5941367">func</span>&nbsp;<span class="op" id="5941372">(</span><span class="ident" id="5941373">dec</span>&nbsp;<span class="op" id="5941377">*</span><span class="ident" id="5941378">Decoder</span><span class="op" id="5941385">)</span>&nbsp;<span class="ident" id="5941387">nextUint</span><span class="op" id="5941395">(</span><span class="op" id="5941396">)</span>&nbsp;<span class="ident" id="5941398">uint64</span>&nbsp;<span class="op" id="5941405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5941408">n</span><span class="op" id="5941409">,</span>&nbsp;<span class="ident" id="5941411">_</span><span class="op" id="5941412">,</span>&nbsp;<span class="ident" id="5941414">err</span>&nbsp;<span class="op" id="5941418">:=</span>&nbsp;<span class="ident" id="5941421">decodeUintReader</span><span class="op" id="5941437">(</span><span class="op" id="5941438">&amp;</span><span class="ident" id="5941439">dec</span><span class="op" id="5941442">.</span><span class="ident" id="5941443">buf</span><span class="op" id="5941446">,</span>&nbsp;<span class="ident" id="5941448">dec</span><span class="op" id="5941451">.</span><span class="ident" id="5941452">countBuf</span><span class="op" id="5941460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941463">if</span>&nbsp;<span class="ident" id="5941466">err</span>&nbsp;<span class="op" id="5941470">!=</span>&nbsp;<span class="ident" id="5941473">nil</span>&nbsp;<span class="op" id="5941477">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5941481">dec</span><span class="op" id="5941484">.</span><span class="ident" id="5941485">err</span>&nbsp;<span class="op" id="5941489">=</span>&nbsp;<span class="ident" id="5941491">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5941496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941499">return</span>&nbsp;<span class="ident" id="5941506">n</span><br>
<span class="lineno"></span><span class="op" id="5941508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="5941511">//&nbsp;decodeTypeSequence&nbsp;parses:</span><br>
<span class="lineno"></span><span class="comment" id="5941541">//&nbsp;TypeSequence</span><br>
<span class="lineno"></span><span class="comment" id="5941557">//&nbsp;&nbsp;&nbsp;&nbsp(TypeDefinition&nbsp;DelimitedTypeDefinition*)?</span><br>
<span class="lineno"></span><span class="comment" id="5941603">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;type&nbsp;id&nbsp;of&nbsp;the&nbsp;next&nbsp;value.&nbsp;&nbsp;It&nbsp;returns&nbsp;-1&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="5941667">//&nbsp;EOF.&nbsp;&nbsp;Upon&nbsp;return,&nbsp;the&nbsp;remainder&nbsp;of&nbsp;dec.buf&nbsp;is&nbsp;the&nbsp;value&nbsp;to&nbsp;be</span><br>
<span class="lineno">135</span><span class="comment" id="5941733">//&nbsp;decoded.&nbsp;&nbsp;If&nbsp;this&nbsp;is&nbsp;an&nbsp;interface&nbsp;value,&nbsp;it&nbsp;can&nbsp;be&nbsp;ignored&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5941798">//&nbsp;resetting&nbsp;that&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="5941824">func</span>&nbsp;<span class="op" id="5941829">(</span><span class="ident" id="5941830">dec</span>&nbsp;<span class="op" id="5941834">*</span><span class="ident" id="5941835">Decoder</span><span class="op" id="5941842">)</span>&nbsp;<span class="ident" id="5941844">decodeTypeSequence</span><span class="op" id="5941862">(</span><span class="ident" id="5941863">isInterface</span>&nbsp;<span class="builtintype" id="5941875">bool</span><span class="op" id="5941879">)</span>&nbsp;<span class="ident" id="5941881">typeId</span>&nbsp;<span class="op" id="5941888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941891">for</span>&nbsp;<span class="ident" id="5941895">dec</span><span class="op" id="5941898">.</span><span class="ident" id="5941899">err</span>&nbsp;<span class="op" id="5941903">==</span>&nbsp;<span class="ident" id="5941906">nil</span>&nbsp;<span class="op" id="5941910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941914">if</span>&nbsp;<span class="ident" id="5941917">dec</span><span class="op" id="5941920">.</span><span class="ident" id="5941921">buf</span><span class="op" id="5941924">.</span><span class="ident" id="5941925">Len</span><span class="op" id="5941928">(</span><span class="op" id="5941929">)</span>&nbsp;<span class="op" id="5941931">==</span>&nbsp;<span class="num" id="5941934">0</span>&nbsp;<span class="op" id="5941936">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941941">if</span>&nbsp;<span class="op" id="5941944">!</span><span class="ident" id="5941945">dec</span><span class="op" id="5941948">.</span><span class="ident" id="5941949">recvMessage</span><span class="op" id="5941960">(</span><span class="op" id="5941961">)</span>&nbsp;<span class="op" id="5941963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941969">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5941978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5941982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5941986">//&nbsp;Receive&nbsp;a&nbsp;type&nbsp;id.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5942010">id</span>&nbsp;<span class="op" id="5942013">:=</span>&nbsp;<span class="ident" id="5942016">typeId</span><span class="op" id="5942022">(</span><span class="ident" id="5942023">dec</span><span class="op" id="5942026">.</span><span class="ident" id="5942027">nextInt</span><span class="op" id="5942034">(</span><span class="op" id="5942035">)</span><span class="op" id="5942036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5942040">if</span>&nbsp;<span class="ident" id="5942043">id</span>&nbsp;<span class="op" id="5942046">&gt;=</span>&nbsp;<span class="num" id="5942049">0</span>&nbsp;<span class="op" id="5942051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5942056">//&nbsp;Value&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5942077">return</span>&nbsp;<span class="ident" id="5942084">id</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5942089">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5942093">//&nbsp;Type&nbsp;definition&nbsp;for&nbsp;(-id)&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5942133">dec</span><span class="op" id="5942136">.</span><span class="ident" id="5942137">recvType</span><span class="op" id="5942145">(</span><span class="op" id="5942146">-</span><span class="ident" id="5942147">id</span><span class="op" id="5942149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5942153">//&nbsp;When&nbsp;decoding&nbsp;an&nbsp;interface,&nbsp;after&nbsp;a&nbsp;type&nbsp;there&nbsp;may&nbsp;be&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5942214">//&nbsp;DelimitedValue&nbsp;still&nbsp;in&nbsp;the&nbsp;buffer.&nbsp;&nbsp;Skip&nbsp;its&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5942272">//&nbsp;(Alternatively,&nbsp;the&nbsp;buffer&nbsp;is&nbsp;empty&nbsp;and&nbsp;the&nbsp;byte&nbsp;count</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5942332">//&nbsp;will&nbsp;be&nbsp;absorbed&nbsp;by&nbsp;recvMessage.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5942371">if</span>&nbsp;<span class="ident" id="5942374">dec</span><span class="op" id="5942377">.</span><span class="ident" id="5942378">buf</span><span class="op" id="5942381">.</span><span class="ident" id="5942382">Len</span><span class="op" id="5942385">(</span><span class="op" id="5942386">)</span>&nbsp;<span class="op" id="5942388">&gt;</span>&nbsp;<span class="num" id="5942390">0</span>&nbsp;<span class="op" id="5942392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5942397">if</span>&nbsp;<span class="op" id="5942400">!</span><span class="ident" id="5942401">isInterface</span>&nbsp;<span class="op" id="5942413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5942419">dec</span><span class="op" id="5942422">.</span><span class="ident" id="5942423">err</span>&nbsp;<span class="op" id="5942427">=</span>&nbsp;<span class="ident" id="5942429">errors</span><span class="op" id="5942435">.</span><span class="ident" id="5942436">New</span><span class="op" id="5942439">(</span><span class="string" id="5942440">&#34;extra&nbsp;data&nbsp;in&nbsp;buffer&#34;</span><span class="op" id="5942462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5942468">break</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5942477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5942482">dec</span><span class="op" id="5942485">.</span><span class="ident" id="5942486">nextUint</span><span class="op" id="5942494">(</span><span class="op" id="5942495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5942499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5942502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5942505">return</span>&nbsp;<span class="op" id="5942512">-</span><span class="num" id="5942513">1</span><br>
<span class="lineno">165</span><span class="op" id="5942515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5942518">//&nbsp;Decode&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream&nbsp;and&nbsp;stores</span><br>
<span class="lineno"></span><span class="comment" id="5942582">//&nbsp;it&nbsp;in&nbsp;the&nbsp;data&nbsp;represented&nbsp;by&nbsp;the&nbsp;empty&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5942642">//&nbsp;If&nbsp;e&nbsp;is&nbsp;nil,&nbsp;the&nbsp;value&nbsp;will&nbsp;be&nbsp;discarded.&nbsp;Otherwise,</span><br>
<span class="lineno">170</span><span class="comment" id="5942698">//&nbsp;the&nbsp;value&nbsp;underlying&nbsp;e&nbsp;must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5942749">//&nbsp;correct&nbsp;type&nbsp;for&nbsp;the&nbsp;next&nbsp;data&nbsp;item&nbsp;received.</span><br>
<span class="lineno"></span><span class="comment" id="5942798">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;Decode&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5942851">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="5942873">func</span>&nbsp;<span class="op" id="5942878">(</span><span class="ident" id="5942879">dec</span>&nbsp;<span class="op" id="5942883">*</span><span class="ident" id="5942884">Decoder</span><span class="op" id="5942891">)</span>&nbsp;<span class="ident" id="5942893">Decode</span><span class="op" id="5942899">(</span><span class="ident" id="5942900">e</span>&nbsp;<span class="keyword" id="5942902">interface</span><span class="op" id="5942911">{</span><span class="op" id="5942912">}</span><span class="op" id="5942913">)</span>&nbsp;<span class="builtintype" id="5942915">error</span>&nbsp;<span class="op" id="5942921">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5942924">if</span>&nbsp;<span class="ident" id="5942927">e</span>&nbsp;<span class="op" id="5942929">==</span>&nbsp;<span class="ident" id="5942932">nil</span>&nbsp;<span class="op" id="5942936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5942940">return</span>&nbsp;<span class="ident" id="5942947">dec</span><span class="op" id="5942950">.</span><span class="ident" id="5942951">DecodeValue</span><span class="op" id="5942962">(</span><span class="ident" id="5942963">reflect</span><span class="op" id="5942970">.</span><span class="ident" id="5942971">Value</span><span class="op" id="5942976">{</span><span class="op" id="5942977">}</span><span class="op" id="5942978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5942981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5942984">value</span>&nbsp;<span class="op" id="5942990">:=</span>&nbsp;<span class="ident" id="5942993">reflect</span><span class="op" id="5943000">.</span><span class="ident" id="5943001">ValueOf</span><span class="op" id="5943008">(</span><span class="ident" id="5943009">e</span><span class="op" id="5943010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5943013">//&nbsp;If&nbsp;e&nbsp;represents&nbsp;a&nbsp;value&nbsp;as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;pointer,&nbsp;the&nbsp;answer&nbsp;won&#39;t</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5943083">//&nbsp;get&nbsp;back&nbsp;to&nbsp;the&nbsp;caller.&nbsp;&nbsp;Make&nbsp;sure&nbsp;it&#39;s&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5943138">if</span>&nbsp;<span class="ident" id="5943141">value</span><span class="op" id="5943146">.</span><span class="ident" id="5943147">Type</span><span class="op" id="5943151">(</span><span class="op" id="5943152">)</span><span class="op" id="5943153">.</span><span class="ident" id="5943154">Kind</span><span class="op" id="5943158">(</span><span class="op" id="5943159">)</span>&nbsp;<span class="op" id="5943161">!=</span>&nbsp;<span class="ident" id="5943164">reflect</span><span class="op" id="5943171">.</span><span class="ident" id="5943172">Ptr</span>&nbsp;<span class="op" id="5943176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5943180">dec</span><span class="op" id="5943183">.</span><span class="ident" id="5943184">err</span>&nbsp;<span class="op" id="5943188">=</span>&nbsp;<span class="ident" id="5943190">errors</span><span class="op" id="5943196">.</span><span class="ident" id="5943197">New</span><span class="op" id="5943200">(</span><span class="string" id="5943201">&#34;gob:&nbsp;attempt&nbsp;to&nbsp;decode&nbsp;into&nbsp;a&nbsp;non-pointer&#34;</span><span class="op" id="5943244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5943248">return</span>&nbsp;<span class="ident" id="5943255">dec</span><span class="op" id="5943258">.</span><span class="ident" id="5943259">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5943264">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5943267">return</span>&nbsp;<span class="ident" id="5943274">dec</span><span class="op" id="5943277">.</span><span class="ident" id="5943278">DecodeValue</span><span class="op" id="5943289">(</span><span class="ident" id="5943290">value</span><span class="op" id="5943295">)</span><br>
<span class="lineno"></span><span class="op" id="5943297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5943300">//&nbsp;DecodeValue&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="5943359">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;reflect.Value&nbsp;(v.Kind()&nbsp;==&nbsp;Invalid),&nbsp;DecodeValue&nbsp;discards&nbsp;the&nbsp;value.</span><br>
<span class="lineno">190</span><span class="comment" id="5943448">//&nbsp;Otherwise,&nbsp;it&nbsp;stores&nbsp;the&nbsp;value&nbsp;into&nbsp;v.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;v&nbsp;must&nbsp;represent</span><br>
<span class="lineno"></span><span class="comment" id="5943522">//&nbsp;a&nbsp;non-nil&nbsp;pointer&nbsp;to&nbsp;data&nbsp;or&nbsp;be&nbsp;an&nbsp;assignable&nbsp;reflect.Value&nbsp;(v.CanSet())</span><br>
<span class="lineno"></span><span class="comment" id="5943598">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;DecodeValue&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5943656">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="5943678">func</span>&nbsp;<span class="op" id="5943683">(</span><span class="ident" id="5943684">dec</span>&nbsp;<span class="op" id="5943688">*</span><span class="ident" id="5943689">Decoder</span><span class="op" id="5943696">)</span>&nbsp;<span class="ident" id="5943698">DecodeValue</span><span class="op" id="5943709">(</span><span class="ident" id="5943710">v</span>&nbsp;<span class="ident" id="5943712">reflect</span><span class="op" id="5943719">.</span><span class="ident" id="5943720">Value</span><span class="op" id="5943725">)</span>&nbsp;<span class="builtintype" id="5943727">error</span>&nbsp;<span class="op" id="5943733">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5943736">if</span>&nbsp;<span class="ident" id="5943739">v</span><span class="op" id="5943740">.</span><span class="ident" id="5943741">IsValid</span><span class="op" id="5943748">(</span><span class="op" id="5943749">)</span>&nbsp;<span class="op" id="5943751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5943755">if</span>&nbsp;<span class="ident" id="5943758">v</span><span class="op" id="5943759">.</span><span class="ident" id="5943760">Kind</span><span class="op" id="5943764">(</span><span class="op" id="5943765">)</span>&nbsp;<span class="op" id="5943767">==</span>&nbsp;<span class="ident" id="5943770">reflect</span><span class="op" id="5943777">.</span><span class="ident" id="5943778">Ptr</span>&nbsp;<span class="op" id="5943782">&amp;&amp;</span>&nbsp;<span class="op" id="5943785">!</span><span class="ident" id="5943786">v</span><span class="op" id="5943787">.</span><span class="ident" id="5943788">IsNil</span><span class="op" id="5943793">(</span><span class="op" id="5943794">)</span>&nbsp;<span class="op" id="5943796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5943801">//&nbsp;That&#39;s&nbsp;okay,&nbsp;we&#39;ll&nbsp;store&nbsp;through&nbsp;the&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5943852">}</span>&nbsp;<span class="keyword" id="5943854">else</span>&nbsp;<span class="keyword" id="5943859">if</span>&nbsp;<span class="op" id="5943862">!</span><span class="ident" id="5943863">v</span><span class="op" id="5943864">.</span><span class="ident" id="5943865">CanSet</span><span class="op" id="5943871">(</span><span class="op" id="5943872">)</span>&nbsp;<span class="op" id="5943874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5943879">return</span>&nbsp;<span class="ident" id="5943886">errors</span><span class="op" id="5943892">.</span><span class="ident" id="5943893">New</span><span class="op" id="5943896">(</span><span class="string" id="5943897">&#34;gob:&nbsp;DecodeValue&nbsp;of&nbsp;unassignable&nbsp;value&#34;</span><span class="op" id="5943937">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5943941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5943944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5943947">//&nbsp;Make&nbsp;sure&nbsp;we&#39;re&nbsp;single-threaded&nbsp;through&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5943997">dec</span><span class="op" id="5944000">.</span><span class="ident" id="5944001">mutex</span><span class="op" id="5944006">.</span><span class="ident" id="5944007">Lock</span><span class="op" id="5944011">(</span><span class="op" id="5944012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5944015">defer</span>&nbsp;<span class="ident" id="5944021">dec</span><span class="op" id="5944024">.</span><span class="ident" id="5944025">mutex</span><span class="op" id="5944030">.</span><span class="ident" id="5944031">Unlock</span><span class="op" id="5944037">(</span><span class="op" id="5944038">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5944042">dec</span><span class="op" id="5944045">.</span><span class="ident" id="5944046">buf</span><span class="op" id="5944049">.</span><span class="ident" id="5944050">Reset</span><span class="op" id="5944055">(</span><span class="op" id="5944056">)</span>&nbsp;<span class="comment" id="5944058">//&nbsp;In&nbsp;case&nbsp;data&nbsp;lingers&nbsp;from&nbsp;previous&nbsp;invocation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5944109">dec</span><span class="op" id="5944112">.</span><span class="ident" id="5944113">err</span>&nbsp;<span class="op" id="5944117">=</span>&nbsp;<span class="ident" id="5944119">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5944124">id</span>&nbsp;<span class="op" id="5944127">:=</span>&nbsp;<span class="ident" id="5944130">dec</span><span class="op" id="5944133">.</span><span class="ident" id="5944134">decodeTypeSequence</span><span class="op" id="5944152">(</span><span class="builtintype" id="5944153">false</span><span class="op" id="5944158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5944161">if</span>&nbsp;<span class="ident" id="5944164">dec</span><span class="op" id="5944167">.</span><span class="ident" id="5944168">err</span>&nbsp;<span class="op" id="5944172">==</span>&nbsp;<span class="ident" id="5944175">nil</span>&nbsp;<span class="op" id="5944179">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5944183">dec</span><span class="op" id="5944186">.</span><span class="ident" id="5944187">decodeValue</span><span class="op" id="5944198">(</span><span class="ident" id="5944199">id</span><span class="op" id="5944201">,</span>&nbsp;<span class="ident" id="5944203">v</span><span class="op" id="5944204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5944207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5944210">return</span>&nbsp;<span class="ident" id="5944217">dec</span><span class="op" id="5944220">.</span><span class="ident" id="5944221">err</span><br>
<span class="lineno"></span><span class="op" id="5944225">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="5944228">//&nbsp;If&nbsp;debug.go&nbsp;is&nbsp;compiled&nbsp;into&nbsp;the&nbsp;program&nbsp;,&nbsp;debugFunc&nbsp;prints&nbsp;a&nbsp;human-readable</span><br>
<span class="lineno"></span><span class="comment" id="5944308">//&nbsp;representation&nbsp;of&nbsp;the&nbsp;gob&nbsp;data&nbsp;read&nbsp;from&nbsp;r&nbsp;by&nbsp;calling&nbsp;that&nbsp;file&#39;s&nbsp;Debug&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="5944393">//&nbsp;Otherwise&nbsp;it&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="5944417">var</span>&nbsp;<span class="ident" id="5944421">debugFunc</span>&nbsp;<span class="keyword" id="5944431">func</span><span class="op" id="5944435">(</span><span class="ident" id="5944436">io</span><span class="op" id="5944438">.</span><span class="ident" id="5944439">Reader</span><span class="op" id="5944445">)</span>
</div>
</body>
</html>
