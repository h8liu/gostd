<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/textproto</h2>
<ul>
<li><a href="/gostd/net/textproto/header.go.html">header.go</a></li>
<li><a href="/gostd/net/textproto/pipeline.go.html">pipeline.go</a></li>
<li><a href="/gostd/net/textproto/reader.go.html">reader.go</a></li>
<li><a href="/gostd/net/textproto/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/net/textproto/textproto.go.html">textproto.go</a></li>
<li><a href="/gostd/net/textproto/writer.go.html">writer.go</a></li>
<li><a href="/gostd/net/textproto/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7465550">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7465606">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7465660">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7465711">package</span>&nbsp;<span class="ident" id="7465719">textproto</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7465730">import</span>&nbsp;<span class="op" id="7465737">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7465740">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7465749">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7465758">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7465768">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7465771">func</span>&nbsp;<span class="ident" id="7465776">TestPrintfLine</span><span class="op" id="7465790">(</span><span class="ident" id="7465791">t</span>&nbsp;<span class="op" id="7465793">*</span><span class="ident" id="7465794">testing</span><span class="op" id="7465801">.</span><span class="ident" id="7465802">T</span><span class="op" id="7465803">)</span>&nbsp;<span class="op" id="7465805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7465808">var</span>&nbsp;<span class="ident" id="7465812">buf</span>&nbsp;<span class="ident" id="7465816">bytes</span><span class="op" id="7465821">.</span><span class="ident" id="7465822">Buffer</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465830">w</span>&nbsp;<span class="op" id="7465832">:=</span>&nbsp;<span class="ident" id="7465835">NewWriter</span><span class="op" id="7465844">(</span><span class="ident" id="7465845">bufio</span><span class="op" id="7465850">.</span><span class="ident" id="7465851">NewWriter</span><span class="op" id="7465860">(</span><span class="op" id="7465861">&amp;</span><span class="ident" id="7465862">buf</span><span class="op" id="7465865">)</span><span class="op" id="7465866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465869">err</span>&nbsp;<span class="op" id="7465873">:=</span>&nbsp;<span class="ident" id="7465876">w</span><span class="op" id="7465877">.</span><span class="ident" id="7465878">PrintfLine</span><span class="op" id="7465888">(</span><span class="string" id="7465889">&#34;foo&nbsp;%d&#34;</span><span class="op" id="7465897">,</span>&nbsp;<span class="num" id="7465899">123</span><span class="op" id="7465902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7465905">if</span>&nbsp;<span class="ident" id="7465908">s</span>&nbsp;<span class="op" id="7465910">:=</span>&nbsp;<span class="ident" id="7465913">buf</span><span class="op" id="7465916">.</span><span class="ident" id="7465917">String</span><span class="op" id="7465923">(</span><span class="op" id="7465924">)</span><span class="op" id="7465925">;</span>&nbsp;<span class="ident" id="7465927">s</span>&nbsp;<span class="op" id="7465929">!=</span>&nbsp;<span class="string" id="7465932">&#34;foo&nbsp;123\r\n&#34;</span>&nbsp;<span class="op" id="7465946">||</span>&nbsp;<span class="ident" id="7465949">err</span>&nbsp;<span class="op" id="7465953">!=</span>&nbsp;<span class="ident" id="7465956">nil</span>&nbsp;<span class="op" id="7465960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465964">t</span><span class="op" id="7465965">.</span><span class="ident" id="7465966">Fatalf</span><span class="op" id="7465972">(</span><span class="string" id="7465973">&#34;s=%q;&nbsp;err=%s&#34;</span><span class="op" id="7465987">,</span>&nbsp;<span class="ident" id="7465989">s</span><span class="op" id="7465990">,</span>&nbsp;<span class="ident" id="7465992">err</span><span class="op" id="7465995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7465998">}</span><br>
<span class="lineno">20</span><span class="op" id="7466000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7466003">func</span>&nbsp;<span class="ident" id="7466008">TestDotWriter</span><span class="op" id="7466021">(</span><span class="ident" id="7466022">t</span>&nbsp;<span class="op" id="7466024">*</span><span class="ident" id="7466025">testing</span><span class="op" id="7466032">.</span><span class="ident" id="7466033">T</span><span class="op" id="7466034">)</span>&nbsp;<span class="op" id="7466036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7466039">var</span>&nbsp;<span class="ident" id="7466043">buf</span>&nbsp;<span class="ident" id="7466047">bytes</span><span class="op" id="7466052">.</span><span class="ident" id="7466053">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466061">w</span>&nbsp;<span class="op" id="7466063">:=</span>&nbsp;<span class="ident" id="7466066">NewWriter</span><span class="op" id="7466075">(</span><span class="ident" id="7466076">bufio</span><span class="op" id="7466081">.</span><span class="ident" id="7466082">NewWriter</span><span class="op" id="7466091">(</span><span class="op" id="7466092">&amp;</span><span class="ident" id="7466093">buf</span><span class="op" id="7466096">)</span><span class="op" id="7466097">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466100">d</span>&nbsp;<span class="op" id="7466102">:=</span>&nbsp;<span class="ident" id="7466105">w</span><span class="op" id="7466106">.</span><span class="ident" id="7466107">DotWriter</span><span class="op" id="7466116">(</span><span class="op" id="7466117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466120">n</span><span class="op" id="7466121">,</span>&nbsp;<span class="ident" id="7466123">err</span>&nbsp;<span class="op" id="7466127">:=</span>&nbsp;<span class="ident" id="7466130">d</span><span class="op" id="7466131">.</span><span class="ident" id="7466132">Write</span><span class="op" id="7466137">(</span><span class="op" id="7466138">[</span><span class="op" id="7466139">]</span><span class="builtintype" id="7466140">byte</span><span class="op" id="7466144">(</span><span class="string" id="7466145">&#34;abc\n.def\n..ghi\n.jkl\n.&#34;</span><span class="op" id="7466172">)</span><span class="op" id="7466173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7466176">if</span>&nbsp;<span class="ident" id="7466179">n</span>&nbsp;<span class="op" id="7466181">!=</span>&nbsp;<span class="num" id="7466184">21</span>&nbsp;<span class="op" id="7466187">||</span>&nbsp;<span class="ident" id="7466190">err</span>&nbsp;<span class="op" id="7466194">!=</span>&nbsp;<span class="ident" id="7466197">nil</span>&nbsp;<span class="op" id="7466201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466205">t</span><span class="op" id="7466206">.</span><span class="ident" id="7466207">Fatalf</span><span class="op" id="7466213">(</span><span class="string" id="7466214">&#34;Write:&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="7466229">,</span>&nbsp;<span class="ident" id="7466231">n</span><span class="op" id="7466232">,</span>&nbsp;<span class="ident" id="7466234">err</span><span class="op" id="7466237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7466240">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466243">d</span><span class="op" id="7466244">.</span><span class="ident" id="7466245">Close</span><span class="op" id="7466250">(</span><span class="op" id="7466251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466254">want</span>&nbsp;<span class="op" id="7466259">:=</span>&nbsp;<span class="string" id="7466262">&#34;abc\r\n..def\r\n...ghi\r\n..jkl\r\n..\r\n.\r\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7466312">if</span>&nbsp;<span class="ident" id="7466315">s</span>&nbsp;<span class="op" id="7466317">:=</span>&nbsp;<span class="ident" id="7466320">buf</span><span class="op" id="7466323">.</span><span class="ident" id="7466324">String</span><span class="op" id="7466330">(</span><span class="op" id="7466331">)</span><span class="op" id="7466332">;</span>&nbsp;<span class="ident" id="7466334">s</span>&nbsp;<span class="op" id="7466336">!=</span>&nbsp;<span class="ident" id="7466339">want</span>&nbsp;<span class="op" id="7466344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466348">t</span><span class="op" id="7466349">.</span><span class="ident" id="7466350">Fatalf</span><span class="op" id="7466356">(</span><span class="string" id="7466357">&#34;wrote&nbsp;%q&#34;</span><span class="op" id="7466367">,</span>&nbsp;<span class="ident" id="7466369">s</span><span class="op" id="7466370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7466373">}</span><br>
<span class="lineno">35</span><span class="op" id="7466375">}</span>
</div>
</body>
</html>
