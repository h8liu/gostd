<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html" class="current">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3506857">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3506913">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3506967">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3507018">package</span>&nbsp;<span class="ident" id="3507026">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3507032">import</span>&nbsp;<span class="op" id="3507039">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3507042">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3507048">&#34;net/textproto&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3507065">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3507073">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3507084">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3507092">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="3507099">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="3507102">var</span>&nbsp;<span class="ident" id="3507106">raceEnabled</span>&nbsp;<span class="op" id="3507118">=</span>&nbsp;<span class="builtintype" id="3507120">false</span>&nbsp;<span class="comment" id="3507126">//&nbsp;set&nbsp;by&nbsp;race.go</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3507145">//&nbsp;A&nbsp;Header&nbsp;represents&nbsp;the&nbsp;key-value&nbsp;pairs&nbsp;in&nbsp;an&nbsp;HTTP&nbsp;header.</span><br>
<span class="lineno"></span><span class="keyword" id="3507207">type</span>&nbsp;<span class="ident" id="3507212">Header</span>&nbsp;<span class="keyword" id="3507219">map</span><span class="op" id="3507222">[</span><span class="builtintype" id="3507223">string</span><span class="op" id="3507229">]</span><span class="op" id="3507230">[</span><span class="op" id="3507231">]</span><span class="builtintype" id="3507232">string</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="3507240">//&nbsp;Add&nbsp;adds&nbsp;the&nbsp;key,&nbsp;value&nbsp;pair&nbsp;to&nbsp;the&nbsp;header.</span><br>
<span class="lineno"></span><span class="comment" id="3507287">//&nbsp;It&nbsp;appends&nbsp;to&nbsp;any&nbsp;existing&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno"></span><span class="keyword" id="3507345">func</span>&nbsp;<span class="op" id="3507350">(</span><span class="ident" id="3507351">h</span>&nbsp;<span class="ident" id="3507353">Header</span><span class="op" id="3507359">)</span>&nbsp;<span class="ident" id="3507361">Add</span><span class="op" id="3507364">(</span><span class="ident" id="3507365">key</span><span class="op" id="3507368">,</span>&nbsp;<span class="ident" id="3507370">value</span>&nbsp;<span class="builtintype" id="3507376">string</span><span class="op" id="3507382">)</span>&nbsp;<span class="op" id="3507384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3507387">textproto</span><span class="op" id="3507396">.</span><span class="ident" id="3507397">MIMEHeader</span><span class="op" id="3507407">(</span><span class="ident" id="3507408">h</span><span class="op" id="3507409">)</span><span class="op" id="3507410">.</span><span class="ident" id="3507411">Add</span><span class="op" id="3507414">(</span><span class="ident" id="3507415">key</span><span class="op" id="3507418">,</span>&nbsp;<span class="ident" id="3507420">value</span><span class="op" id="3507425">)</span><br>
<span class="lineno">25</span><span class="op" id="3507427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3507430">//&nbsp;Set&nbsp;sets&nbsp;the&nbsp;header&nbsp;entries&nbsp;associated&nbsp;with&nbsp;key&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3507484">//&nbsp;the&nbsp;single&nbsp;element&nbsp;value.&nbsp;&nbsp;It&nbsp;replaces&nbsp;any&nbsp;existing</span><br>
<span class="lineno"></span><span class="comment" id="3507539">//&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno">30</span><span class="keyword" id="3507570">func</span>&nbsp;<span class="op" id="3507575">(</span><span class="ident" id="3507576">h</span>&nbsp;<span class="ident" id="3507578">Header</span><span class="op" id="3507584">)</span>&nbsp;<span class="ident" id="3507586">Set</span><span class="op" id="3507589">(</span><span class="ident" id="3507590">key</span><span class="op" id="3507593">,</span>&nbsp;<span class="ident" id="3507595">value</span>&nbsp;<span class="builtintype" id="3507601">string</span><span class="op" id="3507607">)</span>&nbsp;<span class="op" id="3507609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3507612">textproto</span><span class="op" id="3507621">.</span><span class="ident" id="3507622">MIMEHeader</span><span class="op" id="3507632">(</span><span class="ident" id="3507633">h</span><span class="op" id="3507634">)</span><span class="op" id="3507635">.</span><span class="ident" id="3507636">Set</span><span class="op" id="3507639">(</span><span class="ident" id="3507640">key</span><span class="op" id="3507643">,</span>&nbsp;<span class="ident" id="3507645">value</span><span class="op" id="3507650">)</span><br>
<span class="lineno"></span><span class="op" id="3507652">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3507655">//&nbsp;Get&nbsp;gets&nbsp;the&nbsp;first&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;given&nbsp;key.</span><br>
<span class="lineno">35</span><span class="comment" id="3507714">//&nbsp;If&nbsp;there&nbsp;are&nbsp;no&nbsp;values&nbsp;associated&nbsp;with&nbsp;the&nbsp;key,&nbsp;Get&nbsp;returns&nbsp;&#34;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3507781">//&nbsp;To&nbsp;access&nbsp;multiple&nbsp;values&nbsp;of&nbsp;a&nbsp;key,&nbsp;access&nbsp;the&nbsp;map&nbsp;directly</span><br>
<span class="lineno"></span><span class="comment" id="3507844">//&nbsp;with&nbsp;CanonicalHeaderKey.</span><br>
<span class="lineno"></span><span class="keyword" id="3507872">func</span>&nbsp;<span class="op" id="3507877">(</span><span class="ident" id="3507878">h</span>&nbsp;<span class="ident" id="3507880">Header</span><span class="op" id="3507886">)</span>&nbsp;<span class="ident" id="3507888">Get</span><span class="op" id="3507891">(</span><span class="ident" id="3507892">key</span>&nbsp;<span class="builtintype" id="3507896">string</span><span class="op" id="3507902">)</span>&nbsp;<span class="builtintype" id="3507904">string</span>&nbsp;<span class="op" id="3507911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3507914">return</span>&nbsp;<span class="ident" id="3507921">textproto</span><span class="op" id="3507930">.</span><span class="ident" id="3507931">MIMEHeader</span><span class="op" id="3507941">(</span><span class="ident" id="3507942">h</span><span class="op" id="3507943">)</span><span class="op" id="3507944">.</span><span class="ident" id="3507945">Get</span><span class="op" id="3507948">(</span><span class="ident" id="3507949">key</span><span class="op" id="3507952">)</span><br>
<span class="lineno">40</span><span class="op" id="3507954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3507957">//&nbsp;get&nbsp;is&nbsp;like&nbsp;Get,&nbsp;but&nbsp;key&nbsp;must&nbsp;already&nbsp;be&nbsp;in&nbsp;CanonicalHeaderKey&nbsp;form.</span><br>
<span class="lineno"></span><span class="keyword" id="3508029">func</span>&nbsp;<span class="op" id="3508034">(</span><span class="ident" id="3508035">h</span>&nbsp;<span class="ident" id="3508037">Header</span><span class="op" id="3508043">)</span>&nbsp;<span class="ident" id="3508045">get</span><span class="op" id="3508048">(</span><span class="ident" id="3508049">key</span>&nbsp;<span class="builtintype" id="3508053">string</span><span class="op" id="3508059">)</span>&nbsp;<span class="builtintype" id="3508061">string</span>&nbsp;<span class="op" id="3508068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508071">if</span>&nbsp;<span class="ident" id="3508074">v</span>&nbsp;<span class="op" id="3508076">:=</span>&nbsp;<span class="ident" id="3508079">h</span><span class="op" id="3508080">[</span><span class="ident" id="3508081">key</span><span class="op" id="3508084">]</span><span class="op" id="3508085">;</span>&nbsp;<span class="builtinfunc" id="3508087">len</span><span class="op" id="3508090">(</span><span class="ident" id="3508091">v</span><span class="op" id="3508092">)</span>&nbsp;<span class="op" id="3508094">&gt;</span>&nbsp;<span class="num" id="3508096">0</span>&nbsp;<span class="op" id="3508098">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508102">return</span>&nbsp;<span class="ident" id="3508109">v</span><span class="op" id="3508110">[</span><span class="num" id="3508111">0</span><span class="op" id="3508112">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3508115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508118">return</span>&nbsp;<span class="string" id="3508125">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="3508128">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="3508131">//&nbsp;Del&nbsp;deletes&nbsp;the&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno"></span><span class="keyword" id="3508178">func</span>&nbsp;<span class="op" id="3508183">(</span><span class="ident" id="3508184">h</span>&nbsp;<span class="ident" id="3508186">Header</span><span class="op" id="3508192">)</span>&nbsp;<span class="ident" id="3508194">Del</span><span class="op" id="3508197">(</span><span class="ident" id="3508198">key</span>&nbsp;<span class="builtintype" id="3508202">string</span><span class="op" id="3508208">)</span>&nbsp;<span class="op" id="3508210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3508213">textproto</span><span class="op" id="3508222">.</span><span class="ident" id="3508223">MIMEHeader</span><span class="op" id="3508233">(</span><span class="ident" id="3508234">h</span><span class="op" id="3508235">)</span><span class="op" id="3508236">.</span><span class="ident" id="3508237">Del</span><span class="op" id="3508240">(</span><span class="ident" id="3508241">key</span><span class="op" id="3508244">)</span><br>
<span class="lineno"></span><span class="op" id="3508246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="3508249">//&nbsp;Write&nbsp;writes&nbsp;a&nbsp;header&nbsp;in&nbsp;wire&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="3508290">func</span>&nbsp;<span class="op" id="3508295">(</span><span class="ident" id="3508296">h</span>&nbsp;<span class="ident" id="3508298">Header</span><span class="op" id="3508304">)</span>&nbsp;<span class="ident" id="3508306">Write</span><span class="op" id="3508311">(</span><span class="ident" id="3508312">w</span>&nbsp;<span class="ident" id="3508314">io</span><span class="op" id="3508316">.</span><span class="ident" id="3508317">Writer</span><span class="op" id="3508323">)</span>&nbsp;<span class="builtintype" id="3508325">error</span>&nbsp;<span class="op" id="3508331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508334">return</span>&nbsp;<span class="ident" id="3508341">h</span><span class="op" id="3508342">.</span><span class="ident" id="3508343">WriteSubset</span><span class="op" id="3508354">(</span><span class="ident" id="3508355">w</span><span class="op" id="3508356">,</span>&nbsp;<span class="builtintype" id="3508358">nil</span><span class="op" id="3508361">)</span><br>
<span class="lineno"></span><span class="op" id="3508363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="3508366">func</span>&nbsp;<span class="op" id="3508371">(</span><span class="ident" id="3508372">h</span>&nbsp;<span class="ident" id="3508374">Header</span><span class="op" id="3508380">)</span>&nbsp;<span class="ident" id="3508382">clone</span><span class="op" id="3508387">(</span><span class="op" id="3508388">)</span>&nbsp;<span class="ident" id="3508390">Header</span>&nbsp;<span class="op" id="3508397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3508400">h2</span>&nbsp;<span class="op" id="3508403">:=</span>&nbsp;<span class="builtinfunc" id="3508406">make</span><span class="op" id="3508410">(</span><span class="ident" id="3508411">Header</span><span class="op" id="3508417">,</span>&nbsp;<span class="builtinfunc" id="3508419">len</span><span class="op" id="3508422">(</span><span class="ident" id="3508423">h</span><span class="op" id="3508424">)</span><span class="op" id="3508425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508428">for</span>&nbsp;<span class="ident" id="3508432">k</span><span class="op" id="3508433">,</span>&nbsp;<span class="ident" id="3508435">vv</span>&nbsp;<span class="op" id="3508438">:=</span>&nbsp;<span class="keyword" id="3508441">range</span>&nbsp;<span class="ident" id="3508447">h</span>&nbsp;<span class="op" id="3508449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3508453">vv2</span>&nbsp;<span class="op" id="3508457">:=</span>&nbsp;<span class="builtinfunc" id="3508460">make</span><span class="op" id="3508464">(</span><span class="op" id="3508465">[</span><span class="op" id="3508466">]</span><span class="builtintype" id="3508467">string</span><span class="op" id="3508473">,</span>&nbsp;<span class="builtinfunc" id="3508475">len</span><span class="op" id="3508478">(</span><span class="ident" id="3508479">vv</span><span class="op" id="3508481">)</span><span class="op" id="3508482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3508486">copy</span><span class="op" id="3508490">(</span><span class="ident" id="3508491">vv2</span><span class="op" id="3508494">,</span>&nbsp;<span class="ident" id="3508496">vv</span><span class="op" id="3508498">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3508502">h2</span><span class="op" id="3508504">[</span><span class="ident" id="3508505">k</span><span class="op" id="3508506">]</span>&nbsp;<span class="op" id="3508508">=</span>&nbsp;<span class="ident" id="3508510">vv2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3508515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508518">return</span>&nbsp;<span class="ident" id="3508525">h2</span><br>
<span class="lineno"></span><span class="op" id="3508528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="3508531">var</span>&nbsp;<span class="ident" id="3508535">timeFormats</span>&nbsp;<span class="op" id="3508547">=</span>&nbsp;<span class="op" id="3508549">[</span><span class="op" id="3508550">]</span><span class="builtintype" id="3508551">string</span><span class="op" id="3508557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3508560">TimeFormat</span><span class="op" id="3508570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3508573">time</span><span class="op" id="3508577">.</span><span class="ident" id="3508578">RFC850</span><span class="op" id="3508584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3508587">time</span><span class="op" id="3508591">.</span><span class="ident" id="3508592">ANSIC</span><span class="op" id="3508597">,</span><br>
<span class="lineno"></span><span class="op" id="3508599">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="3508602">//&nbsp;ParseTime&nbsp;parses&nbsp;a&nbsp;time&nbsp;header&nbsp;(such&nbsp;as&nbsp;the&nbsp;Date:&nbsp;header),</span><br>
<span class="lineno"></span><span class="comment" id="3508664">//&nbsp;trying&nbsp;each&nbsp;of&nbsp;the&nbsp;three&nbsp;formats&nbsp;allowed&nbsp;by&nbsp;HTTP/1.1:</span><br>
<span class="lineno"></span><span class="comment" id="3508721">//&nbsp;TimeFormat,&nbsp;time.RFC850,&nbsp;and&nbsp;time.ANSIC.</span><br>
<span class="lineno"></span><span class="keyword" id="3508765">func</span>&nbsp;<span class="ident" id="3508770">ParseTime</span><span class="op" id="3508779">(</span><span class="ident" id="3508780">text</span>&nbsp;<span class="builtintype" id="3508785">string</span><span class="op" id="3508791">)</span>&nbsp;<span class="op" id="3508793">(</span><span class="ident" id="3508794">t</span>&nbsp;<span class="ident" id="3508796">time</span><span class="op" id="3508800">.</span><span class="ident" id="3508801">Time</span><span class="op" id="3508805">,</span>&nbsp;<span class="ident" id="3508807">err</span>&nbsp;<span class="builtintype" id="3508811">error</span><span class="op" id="3508816">)</span>&nbsp;<span class="op" id="3508818">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508821">for</span>&nbsp;<span class="ident" id="3508825">_</span><span class="op" id="3508826">,</span>&nbsp;<span class="ident" id="3508828">layout</span>&nbsp;<span class="op" id="3508835">:=</span>&nbsp;<span class="keyword" id="3508838">range</span>&nbsp;<span class="ident" id="3508844">timeFormats</span>&nbsp;<span class="op" id="3508856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3508860">t</span><span class="op" id="3508861">,</span>&nbsp;<span class="ident" id="3508863">err</span>&nbsp;<span class="op" id="3508867">=</span>&nbsp;<span class="ident" id="3508869">time</span><span class="op" id="3508873">.</span><span class="ident" id="3508874">Parse</span><span class="op" id="3508879">(</span><span class="ident" id="3508880">layout</span><span class="op" id="3508886">,</span>&nbsp;<span class="ident" id="3508888">text</span><span class="op" id="3508892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508896">if</span>&nbsp;<span class="ident" id="3508899">err</span>&nbsp;<span class="op" id="3508903">==</span>&nbsp;<span class="builtintype" id="3508906">nil</span>&nbsp;<span class="op" id="3508910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508915">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3508924">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3508927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3508930">return</span><br>
<span class="lineno"></span><span class="op" id="3508937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3508940">var</span>&nbsp;<span class="ident" id="3508944">headerNewlineToSpace</span>&nbsp;<span class="op" id="3508965">=</span>&nbsp;<span class="ident" id="3508967">strings</span><span class="op" id="3508974">.</span><span class="ident" id="3508975">NewReplacer</span><span class="op" id="3508986">(</span><span class="string" id="3508987">&#34;\n&#34;</span><span class="op" id="3508991">,</span>&nbsp;<span class="string" id="3508993">&#34;&nbsp;&#34;</span><span class="op" id="3508996">,</span>&nbsp;<span class="string" id="3508998">&#34;\r&#34;</span><span class="op" id="3509002">,</span>&nbsp;<span class="string" id="3509004">&#34;&nbsp;&#34;</span><span class="op" id="3509007">)</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="keyword" id="3509010">type</span>&nbsp;<span class="ident" id="3509015">writeStringer</span>&nbsp;<span class="keyword" id="3509029">interface</span>&nbsp;<span class="op" id="3509039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3509042">WriteString</span><span class="op" id="3509053">(</span><span class="builtintype" id="3509054">string</span><span class="op" id="3509060">)</span>&nbsp;<span class="op" id="3509062">(</span><span class="builtintype" id="3509063">int</span><span class="op" id="3509066">,</span>&nbsp;<span class="builtintype" id="3509068">error</span><span class="op" id="3509073">)</span><br>
<span class="lineno"></span><span class="op" id="3509075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="3509078">//&nbsp;stringWriter&nbsp;implements&nbsp;WriteString&nbsp;on&nbsp;a&nbsp;Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="3509130">type</span>&nbsp;<span class="ident" id="3509135">stringWriter</span>&nbsp;<span class="keyword" id="3509148">struct</span>&nbsp;<span class="op" id="3509155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3509158">w</span>&nbsp;<span class="ident" id="3509160">io</span><span class="op" id="3509162">.</span><span class="ident" id="3509163">Writer</span><br>
<span class="lineno"></span><span class="op" id="3509170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="3509173">func</span>&nbsp;<span class="op" id="3509178">(</span><span class="ident" id="3509179">w</span>&nbsp;<span class="ident" id="3509181">stringWriter</span><span class="op" id="3509193">)</span>&nbsp;<span class="ident" id="3509195">WriteString</span><span class="op" id="3509206">(</span><span class="ident" id="3509207">s</span>&nbsp;<span class="builtintype" id="3509209">string</span><span class="op" id="3509215">)</span>&nbsp;<span class="op" id="3509217">(</span><span class="ident" id="3509218">n</span>&nbsp;<span class="builtintype" id="3509220">int</span><span class="op" id="3509223">,</span>&nbsp;<span class="ident" id="3509225">err</span>&nbsp;<span class="builtintype" id="3509229">error</span><span class="op" id="3509234">)</span>&nbsp;<span class="op" id="3509236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3509239">return</span>&nbsp;<span class="ident" id="3509246">w</span><span class="op" id="3509247">.</span><span class="ident" id="3509248">w</span><span class="op" id="3509249">.</span><span class="ident" id="3509250">Write</span><span class="op" id="3509255">(</span><span class="op" id="3509256">[</span><span class="op" id="3509257">]</span><span class="builtintype" id="3509258">byte</span><span class="op" id="3509262">(</span><span class="ident" id="3509263">s</span><span class="op" id="3509264">)</span><span class="op" id="3509265">)</span><br>
<span class="lineno"></span><span class="op" id="3509267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3509270">type</span>&nbsp;<span class="ident" id="3509275">keyValues</span>&nbsp;<span class="keyword" id="3509285">struct</span>&nbsp;<span class="op" id="3509292">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3509295">key</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3509302">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3509310">values</span>&nbsp;<span class="op" id="3509317">[</span><span class="op" id="3509318">]</span><span class="builtintype" id="3509319">string</span><br>
<span class="lineno"></span><span class="op" id="3509326">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3509329">//&nbsp;A&nbsp;headerSorter&nbsp;implements&nbsp;sort.Interface&nbsp;by&nbsp;sorting&nbsp;a&nbsp;[]keyValues</span><br>
<span class="lineno">110</span><span class="comment" id="3509398">//&nbsp;by&nbsp;key.&nbsp;It&#39;s&nbsp;used&nbsp;as&nbsp;a&nbsp;pointer,&nbsp;so&nbsp;it&nbsp;can&nbsp;fit&nbsp;in&nbsp;a&nbsp;sort.Interface</span><br>
<span class="lineno"></span><span class="comment" id="3509467">//&nbsp;interface&nbsp;value&nbsp;without&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="keyword" id="3509506">type</span>&nbsp;<span class="ident" id="3509511">headerSorter</span>&nbsp;<span class="keyword" id="3509524">struct</span>&nbsp;<span class="op" id="3509531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3509534">kvs</span>&nbsp;<span class="op" id="3509538">[</span><span class="op" id="3509539">]</span><span class="ident" id="3509540">keyValues</span><br>
<span class="lineno"></span><span class="op" id="3509550">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="keyword" id="3509553">func</span>&nbsp;<span class="op" id="3509558">(</span><span class="ident" id="3509559">s</span>&nbsp;<span class="op" id="3509561">*</span><span class="ident" id="3509562">headerSorter</span><span class="op" id="3509574">)</span>&nbsp;<span class="ident" id="3509576">Len</span><span class="op" id="3509579">(</span><span class="op" id="3509580">)</span>&nbsp;<span class="builtintype" id="3509582">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3509596">{</span>&nbsp;<span class="keyword" id="3509598">return</span>&nbsp;<span class="builtinfunc" id="3509605">len</span><span class="op" id="3509608">(</span><span class="ident" id="3509609">s</span><span class="op" id="3509610">.</span><span class="ident" id="3509611">kvs</span><span class="op" id="3509614">)</span>&nbsp;<span class="op" id="3509616">}</span><br>
<span class="lineno"></span><span class="keyword" id="3509618">func</span>&nbsp;<span class="op" id="3509623">(</span><span class="ident" id="3509624">s</span>&nbsp;<span class="op" id="3509626">*</span><span class="ident" id="3509627">headerSorter</span><span class="op" id="3509639">)</span>&nbsp;<span class="ident" id="3509641">Swap</span><span class="op" id="3509645">(</span><span class="ident" id="3509646">i</span><span class="op" id="3509647">,</span>&nbsp;<span class="ident" id="3509649">j</span>&nbsp;<span class="builtintype" id="3509651">int</span><span class="op" id="3509654">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3509661">{</span>&nbsp;<span class="ident" id="3509663">s</span><span class="op" id="3509664">.</span><span class="ident" id="3509665">kvs</span><span class="op" id="3509668">[</span><span class="ident" id="3509669">i</span><span class="op" id="3509670">]</span><span class="op" id="3509671">,</span>&nbsp;<span class="ident" id="3509673">s</span><span class="op" id="3509674">.</span><span class="ident" id="3509675">kvs</span><span class="op" id="3509678">[</span><span class="ident" id="3509679">j</span><span class="op" id="3509680">]</span>&nbsp;<span class="op" id="3509682">=</span>&nbsp;<span class="ident" id="3509684">s</span><span class="op" id="3509685">.</span><span class="ident" id="3509686">kvs</span><span class="op" id="3509689">[</span><span class="ident" id="3509690">j</span><span class="op" id="3509691">]</span><span class="op" id="3509692">,</span>&nbsp;<span class="ident" id="3509694">s</span><span class="op" id="3509695">.</span><span class="ident" id="3509696">kvs</span><span class="op" id="3509699">[</span><span class="ident" id="3509700">i</span><span class="op" id="3509701">]</span>&nbsp;<span class="op" id="3509703">}</span><br>
<span class="lineno"></span><span class="keyword" id="3509705">func</span>&nbsp;<span class="op" id="3509710">(</span><span class="ident" id="3509711">s</span>&nbsp;<span class="op" id="3509713">*</span><span class="ident" id="3509714">headerSorter</span><span class="op" id="3509726">)</span>&nbsp;<span class="ident" id="3509728">Less</span><span class="op" id="3509732">(</span><span class="ident" id="3509733">i</span><span class="op" id="3509734">,</span>&nbsp;<span class="ident" id="3509736">j</span>&nbsp;<span class="builtintype" id="3509738">int</span><span class="op" id="3509741">)</span>&nbsp;<span class="builtintype" id="3509743">bool</span>&nbsp;<span class="op" id="3509748">{</span>&nbsp;<span class="keyword" id="3509750">return</span>&nbsp;<span class="ident" id="3509757">s</span><span class="op" id="3509758">.</span><span class="ident" id="3509759">kvs</span><span class="op" id="3509762">[</span><span class="ident" id="3509763">i</span><span class="op" id="3509764">]</span><span class="op" id="3509765">.</span><span class="ident" id="3509766">key</span>&nbsp;<span class="op" id="3509770">&lt;</span>&nbsp;<span class="ident" id="3509772">s</span><span class="op" id="3509773">.</span><span class="ident" id="3509774">kvs</span><span class="op" id="3509777">[</span><span class="ident" id="3509778">j</span><span class="op" id="3509779">]</span><span class="op" id="3509780">.</span><span class="ident" id="3509781">key</span>&nbsp;<span class="op" id="3509785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="3509788">var</span>&nbsp;<span class="ident" id="3509792">headerSorterPool</span>&nbsp;<span class="op" id="3509809">=</span>&nbsp;<span class="ident" id="3509811">sync</span><span class="op" id="3509815">.</span><span class="ident" id="3509816">Pool</span><span class="op" id="3509820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3509823">New</span><span class="op" id="3509826">:</span>&nbsp;<span class="keyword" id="3509828">func</span><span class="op" id="3509832">(</span><span class="op" id="3509833">)</span>&nbsp;<span class="keyword" id="3509835">interface</span><span class="op" id="3509844">{</span><span class="op" id="3509845">}</span>&nbsp;<span class="op" id="3509847">{</span>&nbsp;<span class="keyword" id="3509849">return</span>&nbsp;<span class="builtinfunc" id="3509856">new</span><span class="op" id="3509859">(</span><span class="ident" id="3509860">headerSorter</span><span class="op" id="3509872">)</span>&nbsp;<span class="op" id="3509874">}</span><span class="op" id="3509875">,</span><br>
<span class="lineno"></span><span class="op" id="3509877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3509880">//&nbsp;sortedKeyValues&nbsp;returns&nbsp;h&#39;s&nbsp;keys&nbsp;sorted&nbsp;in&nbsp;the&nbsp;returned&nbsp;kvs</span><br>
<span class="lineno">125</span><span class="comment" id="3509943">//&nbsp;slice.&nbsp;The&nbsp;headerSorter&nbsp;used&nbsp;to&nbsp;sort&nbsp;is&nbsp;also&nbsp;returned,&nbsp;for&nbsp;possible</span><br>
<span class="lineno"></span><span class="comment" id="3510014">//&nbsp;return&nbsp;to&nbsp;headerSorterCache.</span><br>
<span class="lineno"></span><span class="keyword" id="3510046">func</span>&nbsp;<span class="op" id="3510051">(</span><span class="ident" id="3510052">h</span>&nbsp;<span class="ident" id="3510054">Header</span><span class="op" id="3510060">)</span>&nbsp;<span class="ident" id="3510062">sortedKeyValues</span><span class="op" id="3510077">(</span><span class="ident" id="3510078">exclude</span>&nbsp;<span class="keyword" id="3510086">map</span><span class="op" id="3510089">[</span><span class="builtintype" id="3510090">string</span><span class="op" id="3510096">]</span><span class="builtintype" id="3510097">bool</span><span class="op" id="3510101">)</span>&nbsp;<span class="op" id="3510103">(</span><span class="ident" id="3510104">kvs</span>&nbsp;<span class="op" id="3510108">[</span><span class="op" id="3510109">]</span><span class="ident" id="3510110">keyValues</span><span class="op" id="3510119">,</span>&nbsp;<span class="ident" id="3510121">hs</span>&nbsp;<span class="op" id="3510124">*</span><span class="ident" id="3510125">headerSorter</span><span class="op" id="3510137">)</span>&nbsp;<span class="op" id="3510139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3510142">hs</span>&nbsp;<span class="op" id="3510145">=</span>&nbsp;<span class="ident" id="3510147">headerSorterPool</span><span class="op" id="3510163">.</span><span class="ident" id="3510164">Get</span><span class="op" id="3510167">(</span><span class="op" id="3510168">)</span><span class="op" id="3510169">.</span><span class="op" id="3510170">(</span><span class="op" id="3510171">*</span><span class="ident" id="3510172">headerSorter</span><span class="op" id="3510184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3510187">if</span>&nbsp;<span class="builtinfunc" id="3510190">cap</span><span class="op" id="3510193">(</span><span class="ident" id="3510194">hs</span><span class="op" id="3510196">.</span><span class="ident" id="3510197">kvs</span><span class="op" id="3510200">)</span>&nbsp;<span class="op" id="3510202">&lt;</span>&nbsp;<span class="builtinfunc" id="3510204">len</span><span class="op" id="3510207">(</span><span class="ident" id="3510208">h</span><span class="op" id="3510209">)</span>&nbsp;<span class="op" id="3510211">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3510215">hs</span><span class="op" id="3510217">.</span><span class="ident" id="3510218">kvs</span>&nbsp;<span class="op" id="3510222">=</span>&nbsp;<span class="builtinfunc" id="3510224">make</span><span class="op" id="3510228">(</span><span class="op" id="3510229">[</span><span class="op" id="3510230">]</span><span class="ident" id="3510231">keyValues</span><span class="op" id="3510240">,</span>&nbsp;<span class="num" id="3510242">0</span><span class="op" id="3510243">,</span>&nbsp;<span class="builtinfunc" id="3510245">len</span><span class="op" id="3510248">(</span><span class="ident" id="3510249">h</span><span class="op" id="3510250">)</span><span class="op" id="3510251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3510254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3510257">kvs</span>&nbsp;<span class="op" id="3510261">=</span>&nbsp;<span class="ident" id="3510263">hs</span><span class="op" id="3510265">.</span><span class="ident" id="3510266">kvs</span><span class="op" id="3510269">[</span><span class="op" id="3510270">:</span><span class="num" id="3510271">0</span><span class="op" id="3510272">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3510275">for</span>&nbsp;<span class="ident" id="3510279">k</span><span class="op" id="3510280">,</span>&nbsp;<span class="ident" id="3510282">vv</span>&nbsp;<span class="op" id="3510285">:=</span>&nbsp;<span class="keyword" id="3510288">range</span>&nbsp;<span class="ident" id="3510294">h</span>&nbsp;<span class="op" id="3510296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3510300">if</span>&nbsp;<span class="op" id="3510303">!</span><span class="ident" id="3510304">exclude</span><span class="op" id="3510311">[</span><span class="ident" id="3510312">k</span><span class="op" id="3510313">]</span>&nbsp;<span class="op" id="3510315">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3510320">kvs</span>&nbsp;<span class="op" id="3510324">=</span>&nbsp;<span class="builtinfunc" id="3510326">append</span><span class="op" id="3510332">(</span><span class="ident" id="3510333">kvs</span><span class="op" id="3510336">,</span>&nbsp;<span class="ident" id="3510338">keyValues</span><span class="op" id="3510347">{</span><span class="ident" id="3510348">k</span><span class="op" id="3510349">,</span>&nbsp;<span class="ident" id="3510351">vv</span><span class="op" id="3510353">}</span><span class="op" id="3510354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3510358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3510361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3510364">hs</span><span class="op" id="3510366">.</span><span class="ident" id="3510367">kvs</span>&nbsp;<span class="op" id="3510371">=</span>&nbsp;<span class="ident" id="3510373">kvs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3510378">sort</span><span class="op" id="3510382">.</span><span class="ident" id="3510383">Sort</span><span class="op" id="3510387">(</span><span class="ident" id="3510388">hs</span><span class="op" id="3510390">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3510393">return</span>&nbsp;<span class="ident" id="3510400">kvs</span><span class="op" id="3510403">,</span>&nbsp;<span class="ident" id="3510405">hs</span><br>
<span class="lineno"></span><span class="op" id="3510408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3510411">//&nbsp;WriteSubset&nbsp;writes&nbsp;a&nbsp;header&nbsp;in&nbsp;wire&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="3510458">//&nbsp;If&nbsp;exclude&nbsp;is&nbsp;not&nbsp;nil,&nbsp;keys&nbsp;where&nbsp;exclude[key]&nbsp;==&nbsp;true&nbsp;are&nbsp;not&nbsp;written.</span><br>
<span class="lineno">145</span><span class="keyword" id="3510533">func</span>&nbsp;<span class="op" id="3510538">(</span><span class="ident" id="3510539">h</span>&nbsp;<span class="ident" id="3510541">Header</span><span class="op" id="3510547">)</span>&nbsp;<span class="ident" id="3510549">WriteSubset</span><span class="op" id="3510560">(</span><span class="ident" id="3510561">w</span>&nbsp;<span class="ident" id="3510563">io</span><span class="op" id="3510565">.</span><span class="ident" id="3510566">Writer</span><span class="op" id="3510572">,</span>&nbsp;<span class="ident" id="3510574">exclude</span>&nbsp;<span class="keyword" id="3510582">map</span><span class="op" id="3510585">[</span><span class="builtintype" id="3510586">string</span><span class="op" id="3510592">]</span><span class="builtintype" id="3510593">bool</span><span class="op" id="3510597">)</span>&nbsp;<span class="builtintype" id="3510599">error</span>&nbsp;<span class="op" id="3510605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3510608">ws</span><span class="op" id="3510610">,</span>&nbsp;<span class="ident" id="3510612">ok</span>&nbsp;<span class="op" id="3510615">:=</span>&nbsp;<span class="ident" id="3510618">w</span><span class="op" id="3510619">.</span><span class="op" id="3510620">(</span><span class="ident" id="3510621">writeStringer</span><span class="op" id="3510634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3510637">if</span>&nbsp;<span class="op" id="3510640">!</span><span class="ident" id="3510641">ok</span>&nbsp;<span class="op" id="3510644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3510648">ws</span>&nbsp;<span class="op" id="3510651">=</span>&nbsp;<span class="ident" id="3510653">stringWriter</span><span class="op" id="3510665">{</span><span class="ident" id="3510666">w</span><span class="op" id="3510667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3510670">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3510673">kvs</span><span class="op" id="3510676">,</span>&nbsp;<span class="ident" id="3510678">sorter</span>&nbsp;<span class="op" id="3510685">:=</span>&nbsp;<span class="ident" id="3510688">h</span><span class="op" id="3510689">.</span><span class="ident" id="3510690">sortedKeyValues</span><span class="op" id="3510705">(</span><span class="ident" id="3510706">exclude</span><span class="op" id="3510713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3510716">for</span>&nbsp;<span class="ident" id="3510720">_</span><span class="op" id="3510721">,</span>&nbsp;<span class="ident" id="3510723">kv</span>&nbsp;<span class="op" id="3510726">:=</span>&nbsp;<span class="keyword" id="3510729">range</span>&nbsp;<span class="ident" id="3510735">kvs</span>&nbsp;<span class="op" id="3510739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3510743">for</span>&nbsp;<span class="ident" id="3510747">_</span><span class="op" id="3510748">,</span>&nbsp;<span class="ident" id="3510750">v</span>&nbsp;<span class="op" id="3510752">:=</span>&nbsp;<span class="keyword" id="3510755">range</span>&nbsp;<span class="ident" id="3510761">kv</span><span class="op" id="3510763">.</span><span class="ident" id="3510764">values</span>&nbsp;<span class="op" id="3510771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3510776">v</span>&nbsp;<span class="op" id="3510778">=</span>&nbsp;<span class="ident" id="3510780">headerNewlineToSpace</span><span class="op" id="3510800">.</span><span class="ident" id="3510801">Replace</span><span class="op" id="3510808">(</span><span class="ident" id="3510809">v</span><span class="op" id="3510810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3510815">v</span>&nbsp;<span class="op" id="3510817">=</span>&nbsp;<span class="ident" id="3510819">textproto</span><span class="op" id="3510828">.</span><span class="ident" id="3510829">TrimString</span><span class="op" id="3510839">(</span><span class="ident" id="3510840">v</span><span class="op" id="3510841">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3510846">for</span>&nbsp;<span class="ident" id="3510850">_</span><span class="op" id="3510851">,</span>&nbsp;<span class="ident" id="3510853">s</span>&nbsp;<span class="op" id="3510855">:=</span>&nbsp;<span class="keyword" id="3510858">range</span>&nbsp;<span class="op" id="3510864">[</span><span class="op" id="3510865">]</span><span class="builtintype" id="3510866">string</span><span class="op" id="3510872">{</span><span class="ident" id="3510873">kv</span><span class="op" id="3510875">.</span><span class="ident" id="3510876">key</span><span class="op" id="3510879">,</span>&nbsp;<span class="string" id="3510881">&#34;:&nbsp;&#34;</span><span class="op" id="3510885">,</span>&nbsp;<span class="ident" id="3510887">v</span><span class="op" id="3510888">,</span>&nbsp;<span class="string" id="3510890">&#34;\r\n&#34;</span><span class="op" id="3510896">}</span>&nbsp;<span class="op" id="3510898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3510904">if</span>&nbsp;<span class="ident" id="3510907">_</span><span class="op" id="3510908">,</span>&nbsp;<span class="ident" id="3510910">err</span>&nbsp;<span class="op" id="3510914">:=</span>&nbsp;<span class="ident" id="3510917">ws</span><span class="op" id="3510919">.</span><span class="ident" id="3510920">WriteString</span><span class="op" id="3510931">(</span><span class="ident" id="3510932">s</span><span class="op" id="3510933">)</span><span class="op" id="3510934">;</span>&nbsp;<span class="ident" id="3510936">err</span>&nbsp;<span class="op" id="3510940">!=</span>&nbsp;<span class="builtintype" id="3510943">nil</span>&nbsp;<span class="op" id="3510947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3510954">return</span>&nbsp;<span class="ident" id="3510961">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3510969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3510974">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3510978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3510981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3510984">headerSorterPool</span><span class="op" id="3511000">.</span><span class="ident" id="3511001">Put</span><span class="op" id="3511004">(</span><span class="ident" id="3511005">sorter</span><span class="op" id="3511011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3511014">return</span>&nbsp;<span class="builtintype" id="3511021">nil</span><br>
<span class="lineno"></span><span class="op" id="3511025">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="comment" id="3511028">//&nbsp;CanonicalHeaderKey&nbsp;returns&nbsp;the&nbsp;canonical&nbsp;format&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3511086">//&nbsp;header&nbsp;key&nbsp;s.&nbsp;&nbsp;The&nbsp;canonicalization&nbsp;converts&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="3511144">//&nbsp;letter&nbsp;and&nbsp;any&nbsp;letter&nbsp;following&nbsp;a&nbsp;hyphen&nbsp;to&nbsp;upper&nbsp;case;</span><br>
<span class="lineno"></span><span class="comment" id="3511203">//&nbsp;the&nbsp;rest&nbsp;are&nbsp;converted&nbsp;to&nbsp;lowercase.&nbsp;&nbsp;For&nbsp;example,&nbsp;the</span><br>
<span class="lineno">170</span><span class="comment" id="3511261">//&nbsp;canonical&nbsp;key&nbsp;for&nbsp;&#34;accept-encoding&#34;&nbsp;is&nbsp;&#34;Accept-Encoding&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3511322">func</span>&nbsp;<span class="ident" id="3511327">CanonicalHeaderKey</span><span class="op" id="3511345">(</span><span class="ident" id="3511346">s</span>&nbsp;<span class="builtintype" id="3511348">string</span><span class="op" id="3511354">)</span>&nbsp;<span class="builtintype" id="3511356">string</span>&nbsp;<span class="op" id="3511363">{</span>&nbsp;<span class="keyword" id="3511365">return</span>&nbsp;<span class="ident" id="3511372">textproto</span><span class="op" id="3511381">.</span><span class="ident" id="3511382">CanonicalMIMEHeaderKey</span><span class="op" id="3511404">(</span><span class="ident" id="3511405">s</span><span class="op" id="3511406">)</span>&nbsp;<span class="op" id="3511408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3511411">//&nbsp;hasToken&nbsp;reports&nbsp;whether&nbsp;token&nbsp;appears&nbsp;with&nbsp;v,&nbsp;ASCII</span><br>
<span class="lineno"></span><span class="comment" id="3511467">//&nbsp;case-insensitive,&nbsp;with&nbsp;space&nbsp;or&nbsp;comma&nbsp;boundaries.</span><br>
<span class="lineno">175</span><span class="comment" id="3511520">//&nbsp;token&nbsp;must&nbsp;be&nbsp;all&nbsp;lowercase.</span><br>
<span class="lineno"></span><span class="comment" id="3511552">//&nbsp;v&nbsp;may&nbsp;contain&nbsp;mixed&nbsp;cased.</span><br>
<span class="lineno"></span><span class="keyword" id="3511582">func</span>&nbsp;<span class="ident" id="3511587">hasToken</span><span class="op" id="3511595">(</span><span class="ident" id="3511596">v</span><span class="op" id="3511597">,</span>&nbsp;<span class="ident" id="3511599">token</span>&nbsp;<span class="builtintype" id="3511605">string</span><span class="op" id="3511611">)</span>&nbsp;<span class="builtintype" id="3511613">bool</span>&nbsp;<span class="op" id="3511618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3511621">if</span>&nbsp;<span class="builtinfunc" id="3511624">len</span><span class="op" id="3511627">(</span><span class="ident" id="3511628">token</span><span class="op" id="3511633">)</span>&nbsp;<span class="op" id="3511635">&gt;</span>&nbsp;<span class="builtinfunc" id="3511637">len</span><span class="op" id="3511640">(</span><span class="ident" id="3511641">v</span><span class="op" id="3511642">)</span>&nbsp;<span class="op" id="3511644">||</span>&nbsp;<span class="ident" id="3511647">token</span>&nbsp;<span class="op" id="3511653">==</span>&nbsp;<span class="string" id="3511656">&#34;&#34;</span>&nbsp;<span class="op" id="3511659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3511663">return</span>&nbsp;<span class="builtintype" id="3511670">false</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3511677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3511680">if</span>&nbsp;<span class="ident" id="3511683">v</span>&nbsp;<span class="op" id="3511685">==</span>&nbsp;<span class="ident" id="3511688">token</span>&nbsp;<span class="op" id="3511694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3511698">return</span>&nbsp;<span class="builtintype" id="3511705">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3511711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3511714">for</span>&nbsp;<span class="ident" id="3511718">sp</span>&nbsp;<span class="op" id="3511721">:=</span>&nbsp;<span class="num" id="3511724">0</span><span class="op" id="3511725">;</span>&nbsp;<span class="ident" id="3511727">sp</span>&nbsp;<span class="op" id="3511730">&lt;=</span>&nbsp;<span class="builtinfunc" id="3511733">len</span><span class="op" id="3511736">(</span><span class="ident" id="3511737">v</span><span class="op" id="3511738">)</span><span class="op" id="3511739">-</span><span class="builtinfunc" id="3511740">len</span><span class="op" id="3511743">(</span><span class="ident" id="3511744">token</span><span class="op" id="3511749">)</span><span class="op" id="3511750">;</span>&nbsp;<span class="ident" id="3511752">sp</span><span class="op" id="3511754">++</span>&nbsp;<span class="op" id="3511757">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3511761">//&nbsp;Check&nbsp;that&nbsp;first&nbsp;character&nbsp;is&nbsp;good.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3511802">//&nbsp;The&nbsp;token&nbsp;is&nbsp;ASCII,&nbsp;so&nbsp;checking&nbsp;only&nbsp;a&nbsp;single&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3511858">//&nbsp;is&nbsp;sufficient.&nbsp;&nbsp;We&nbsp;skip&nbsp;this&nbsp;potential&nbsp;starting</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3511911">//&nbsp;position&nbsp;if&nbsp;both&nbsp;the&nbsp;first&nbsp;byte&nbsp;and&nbsp;its&nbsp;potential</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3511966">//&nbsp;ASCII&nbsp;uppercase&nbsp;equivalent&nbsp;(b|0x20)&nbsp;don&#39;t&nbsp;match.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3512020">//&nbsp;False&nbsp;positives&nbsp;(&#39;^&#39;&nbsp;=&gt;&nbsp;&#39;~&#39;)&nbsp;are&nbsp;caught&nbsp;by&nbsp;EqualFold.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3512079">if</span>&nbsp;<span class="ident" id="3512082">b</span>&nbsp;<span class="op" id="3512084">:=</span>&nbsp;<span class="ident" id="3512087">v</span><span class="op" id="3512088">[</span><span class="ident" id="3512089">sp</span><span class="op" id="3512091">]</span><span class="op" id="3512092">;</span>&nbsp;<span class="ident" id="3512094">b</span>&nbsp;<span class="op" id="3512096">!=</span>&nbsp;<span class="ident" id="3512099">token</span><span class="op" id="3512104">[</span><span class="num" id="3512105">0</span><span class="op" id="3512106">]</span>&nbsp;<span class="op" id="3512108">&amp;&amp;</span>&nbsp;<span class="ident" id="3512111">b</span><span class="op" id="3512112">|</span><span class="num" id="3512113">0x20</span>&nbsp;<span class="op" id="3512118">!=</span>&nbsp;<span class="ident" id="3512121">token</span><span class="op" id="3512126">[</span><span class="num" id="3512127">0</span><span class="op" id="3512128">]</span>&nbsp;<span class="op" id="3512130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3512135">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3512146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3512150">//&nbsp;Check&nbsp;that&nbsp;start&nbsp;pos&nbsp;is&nbsp;on&nbsp;a&nbsp;valid&nbsp;token&nbsp;boundary.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3512206">if</span>&nbsp;<span class="ident" id="3512209">sp</span>&nbsp;<span class="op" id="3512212">&gt;</span>&nbsp;<span class="num" id="3512214">0</span>&nbsp;<span class="op" id="3512216">&amp;&amp;</span>&nbsp;<span class="op" id="3512219">!</span><span class="ident" id="3512220">isTokenBoundary</span><span class="op" id="3512235">(</span><span class="ident" id="3512236">v</span><span class="op" id="3512237">[</span><span class="ident" id="3512238">sp</span><span class="op" id="3512240">-</span><span class="num" id="3512241">1</span><span class="op" id="3512242">]</span><span class="op" id="3512243">)</span>&nbsp;<span class="op" id="3512245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3512250">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3512261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3512265">//&nbsp;Check&nbsp;that&nbsp;end&nbsp;pos&nbsp;is&nbsp;on&nbsp;a&nbsp;valid&nbsp;token&nbsp;boundary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3512319">if</span>&nbsp;<span class="ident" id="3512322">endPos</span>&nbsp;<span class="op" id="3512329">:=</span>&nbsp;<span class="ident" id="3512332">sp</span>&nbsp;<span class="op" id="3512335">+</span>&nbsp;<span class="builtinfunc" id="3512337">len</span><span class="op" id="3512340">(</span><span class="ident" id="3512341">token</span><span class="op" id="3512346">)</span><span class="op" id="3512347">;</span>&nbsp;<span class="ident" id="3512349">endPos</span>&nbsp;<span class="op" id="3512356">!=</span>&nbsp;<span class="builtinfunc" id="3512359">len</span><span class="op" id="3512362">(</span><span class="ident" id="3512363">v</span><span class="op" id="3512364">)</span>&nbsp;<span class="op" id="3512366">&amp;&amp;</span>&nbsp;<span class="op" id="3512369">!</span><span class="ident" id="3512370">isTokenBoundary</span><span class="op" id="3512385">(</span><span class="ident" id="3512386">v</span><span class="op" id="3512387">[</span><span class="ident" id="3512388">endPos</span><span class="op" id="3512394">]</span><span class="op" id="3512395">)</span>&nbsp;<span class="op" id="3512397">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3512402">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3512413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3512417">if</span>&nbsp;<span class="ident" id="3512420">strings</span><span class="op" id="3512427">.</span><span class="ident" id="3512428">EqualFold</span><span class="op" id="3512437">(</span><span class="ident" id="3512438">v</span><span class="op" id="3512439">[</span><span class="ident" id="3512440">sp</span><span class="op" id="3512442">:</span><span class="ident" id="3512443">sp</span><span class="op" id="3512445">+</span><span class="builtinfunc" id="3512446">len</span><span class="op" id="3512449">(</span><span class="ident" id="3512450">token</span><span class="op" id="3512455">)</span><span class="op" id="3512456">]</span><span class="op" id="3512457">,</span>&nbsp;<span class="ident" id="3512459">token</span><span class="op" id="3512464">)</span>&nbsp;<span class="op" id="3512466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3512471">return</span>&nbsp;<span class="builtintype" id="3512478">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3512485">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3512488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3512491">return</span>&nbsp;<span class="builtintype" id="3512498">false</span><br>
<span class="lineno"></span><span class="op" id="3512504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3512507">func</span>&nbsp;<span class="ident" id="3512512">isTokenBoundary</span><span class="op" id="3512527">(</span><span class="ident" id="3512528">b</span>&nbsp;<span class="builtintype" id="3512530">byte</span><span class="op" id="3512534">)</span>&nbsp;<span class="builtintype" id="3512536">bool</span>&nbsp;<span class="op" id="3512541">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3512544">return</span>&nbsp;<span class="ident" id="3512551">b</span>&nbsp;<span class="op" id="3512553">==</span>&nbsp;<span class="string" id="3512556">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3512560">||</span>&nbsp;<span class="ident" id="3512563">b</span>&nbsp;<span class="op" id="3512565">==</span>&nbsp;<span class="string" id="3512568">&#39;,&#39;</span>&nbsp;<span class="op" id="3512572">||</span>&nbsp;<span class="ident" id="3512575">b</span>&nbsp;<span class="op" id="3512577">==</span>&nbsp;<span class="string" id="3512580">&#39;\t&#39;</span><br>
<span class="lineno"></span><span class="op" id="3512585">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
