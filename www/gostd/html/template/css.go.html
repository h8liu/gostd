<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html" class="current">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4304693">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4304748">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4304802">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4304853">package</span>&nbsp;<span class="ident" id="4304861">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4304871">import</span>&nbsp;<span class="op" id="4304878">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4304881">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4304890">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4304897">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4304908">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4304923">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4304926">//&nbsp;endsWithCSSKeyword&nbsp;reports&nbsp;whether&nbsp;b&nbsp;ends&nbsp;with&nbsp;an&nbsp;ident&nbsp;that</span><br>
<span class="lineno">15</span><span class="comment" id="4304990">//&nbsp;case-insensitively&nbsp;matches&nbsp;the&nbsp;lower-case&nbsp;kw.</span><br>
<span class="lineno"></span><span class="keyword" id="4305039">func</span>&nbsp;<span class="ident" id="4305044">endsWithCSSKeyword</span><span class="op" id="4305062">(</span><span class="ident" id="4305063">b</span>&nbsp;<span class="op" id="4305065">[</span><span class="op" id="4305066">]</span><span class="builtintype" id="4305067">byte</span><span class="op" id="4305071">,</span>&nbsp;<span class="ident" id="4305073">kw</span>&nbsp;<span class="builtintype" id="4305076">string</span><span class="op" id="4305082">)</span>&nbsp;<span class="builtintype" id="4305084">bool</span>&nbsp;<span class="op" id="4305089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4305092">i</span>&nbsp;<span class="op" id="4305094">:=</span>&nbsp;<span class="builtinfunc" id="4305097">len</span><span class="op" id="4305100">(</span><span class="ident" id="4305101">b</span><span class="op" id="4305102">)</span>&nbsp;<span class="op" id="4305104">-</span>&nbsp;<span class="builtinfunc" id="4305106">len</span><span class="op" id="4305109">(</span><span class="ident" id="4305110">kw</span><span class="op" id="4305112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4305115">if</span>&nbsp;<span class="ident" id="4305118">i</span>&nbsp;<span class="op" id="4305120">&lt;</span>&nbsp;<span class="num" id="4305122">0</span>&nbsp;<span class="op" id="4305124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4305128">//&nbsp;Too&nbsp;short.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4305144">return</span>&nbsp;<span class="builtintype" id="4305151">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4305158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4305161">if</span>&nbsp;<span class="ident" id="4305164">i</span>&nbsp;<span class="op" id="4305166">!=</span>&nbsp;<span class="num" id="4305169">0</span>&nbsp;<span class="op" id="4305171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4305175">r</span><span class="op" id="4305176">,</span>&nbsp;<span class="ident" id="4305178">_</span>&nbsp;<span class="op" id="4305180">:=</span>&nbsp;<span class="ident" id="4305183">utf8</span><span class="op" id="4305187">.</span><span class="ident" id="4305188">DecodeLastRune</span><span class="op" id="4305202">(</span><span class="ident" id="4305203">b</span><span class="op" id="4305204">[</span><span class="op" id="4305205">:</span><span class="ident" id="4305206">i</span><span class="op" id="4305207">]</span><span class="op" id="4305208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4305212">if</span>&nbsp;<span class="ident" id="4305215">isCSSNmchar</span><span class="op" id="4305226">(</span><span class="ident" id="4305227">r</span><span class="op" id="4305228">)</span>&nbsp;<span class="op" id="4305230">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4305235">//&nbsp;Too&nbsp;long.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4305251">return</span>&nbsp;<span class="builtintype" id="4305258">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4305266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4305269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4305272">//&nbsp;Many&nbsp;CSS&nbsp;keywords,&nbsp;such&nbsp;as&nbsp;&#34;!important&#34;&nbsp;can&nbsp;have&nbsp;characters&nbsp;encoded,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4305345">//&nbsp;but&nbsp;the&nbsp;URI&nbsp;production&nbsp;does&nbsp;not&nbsp;allow&nbsp;that&nbsp;according&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4305405">//&nbsp;http://www.w3.org/TR/css3-syntax/#TOK-URI</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4305451">//&nbsp;This&nbsp;does&nbsp;not&nbsp;attempt&nbsp;to&nbsp;recognize&nbsp;encoded&nbsp;keywords.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4305521">//&nbsp;given&nbsp;&#34;\75\72\6c&#34;&nbsp;and&nbsp;&#34;url&#34;&nbsp;this&nbsp;return&nbsp;false.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4305572">return</span>&nbsp;<span class="builtintype" id="4305579">string</span><span class="op" id="4305585">(</span><span class="ident" id="4305586">bytes</span><span class="op" id="4305591">.</span><span class="ident" id="4305592">ToLower</span><span class="op" id="4305599">(</span><span class="ident" id="4305600">b</span><span class="op" id="4305601">[</span><span class="ident" id="4305602">i</span><span class="op" id="4305603">:</span><span class="op" id="4305604">]</span><span class="op" id="4305605">)</span><span class="op" id="4305606">)</span>&nbsp;<span class="op" id="4305608">==</span>&nbsp;<span class="ident" id="4305611">kw</span><br>
<span class="lineno">35</span><span class="op" id="4305614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4305617">//&nbsp;isCSSNmchar&nbsp;reports&nbsp;whether&nbsp;rune&nbsp;is&nbsp;allowed&nbsp;anywhere&nbsp;in&nbsp;a&nbsp;CSS&nbsp;identifier.</span><br>
<span class="lineno"></span><span class="keyword" id="4305694">func</span>&nbsp;<span class="ident" id="4305699">isCSSNmchar</span><span class="op" id="4305710">(</span><span class="ident" id="4305711">r</span>&nbsp;<span class="builtintype" id="4305713">rune</span><span class="op" id="4305717">)</span>&nbsp;<span class="builtintype" id="4305719">bool</span>&nbsp;<span class="op" id="4305724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4305727">//&nbsp;Based&nbsp;on&nbsp;the&nbsp;CSS3&nbsp;nmchar&nbsp;production&nbsp;but&nbsp;ignores&nbsp;multi-rune&nbsp;escape</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4305797">//&nbsp;sequences.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4305812">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-nmchar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4305864">return</span>&nbsp;<span class="string" id="4305871">&#39;a&#39;</span>&nbsp;<span class="op" id="4305875">&lt;=</span>&nbsp;<span class="ident" id="4305878">r</span>&nbsp;<span class="op" id="4305880">&amp;&amp;</span>&nbsp;<span class="ident" id="4305883">r</span>&nbsp;<span class="op" id="4305885">&lt;=</span>&nbsp;<span class="string" id="4305888">&#39;z&#39;</span>&nbsp;<span class="op" id="4305892">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4305897">&#39;A&#39;</span>&nbsp;<span class="op" id="4305901">&lt;=</span>&nbsp;<span class="ident" id="4305904">r</span>&nbsp;<span class="op" id="4305906">&amp;&amp;</span>&nbsp;<span class="ident" id="4305909">r</span>&nbsp;<span class="op" id="4305911">&lt;=</span>&nbsp;<span class="string" id="4305914">&#39;Z&#39;</span>&nbsp;<span class="op" id="4305918">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4305923">&#39;0&#39;</span>&nbsp;<span class="op" id="4305927">&lt;=</span>&nbsp;<span class="ident" id="4305930">r</span>&nbsp;<span class="op" id="4305932">&amp;&amp;</span>&nbsp;<span class="ident" id="4305935">r</span>&nbsp;<span class="op" id="4305937">&lt;=</span>&nbsp;<span class="string" id="4305940">&#39;9&#39;</span>&nbsp;<span class="op" id="4305944">||</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4305949">r</span>&nbsp;<span class="op" id="4305951">==</span>&nbsp;<span class="string" id="4305954">&#39;-&#39;</span>&nbsp;<span class="op" id="4305958">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4305963">r</span>&nbsp;<span class="op" id="4305965">==</span>&nbsp;<span class="string" id="4305968">&#39;_&#39;</span>&nbsp;<span class="op" id="4305972">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4305977">//&nbsp;Non-ASCII&nbsp;cases&nbsp;below.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="4306005">0x80</span>&nbsp;<span class="op" id="4306010">&lt;=</span>&nbsp;<span class="ident" id="4306013">r</span>&nbsp;<span class="op" id="4306015">&amp;&amp;</span>&nbsp;<span class="ident" id="4306018">r</span>&nbsp;<span class="op" id="4306020">&lt;=</span>&nbsp;<span class="num" id="4306023">0xd7ff</span>&nbsp;<span class="op" id="4306030">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="4306035">0xe000</span>&nbsp;<span class="op" id="4306042">&lt;=</span>&nbsp;<span class="ident" id="4306045">r</span>&nbsp;<span class="op" id="4306047">&amp;&amp;</span>&nbsp;<span class="ident" id="4306050">r</span>&nbsp;<span class="op" id="4306052">&lt;=</span>&nbsp;<span class="num" id="4306055">0xfffd</span>&nbsp;<span class="op" id="4306062">||</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="4306067">0x10000</span>&nbsp;<span class="op" id="4306075">&lt;=</span>&nbsp;<span class="ident" id="4306078">r</span>&nbsp;<span class="op" id="4306080">&amp;&amp;</span>&nbsp;<span class="ident" id="4306083">r</span>&nbsp;<span class="op" id="4306085">&lt;=</span>&nbsp;<span class="num" id="4306088">0x10ffff</span><br>
<span class="lineno"></span><span class="op" id="4306097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4306100">//&nbsp;decodeCSS&nbsp;decodes&nbsp;CSS3&nbsp;escapes&nbsp;given&nbsp;a&nbsp;sequence&nbsp;of&nbsp;stringchars.</span><br>
<span class="lineno"></span><span class="comment" id="4306167">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;change,&nbsp;it&nbsp;returns&nbsp;the&nbsp;input,&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice</span><br>
<span class="lineno">55</span><span class="comment" id="4306244">//&nbsp;backed&nbsp;by&nbsp;a&nbsp;new&nbsp;array.</span><br>
<span class="lineno"></span><span class="comment" id="4306270">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-stringchar&nbsp;defines&nbsp;stringchar.</span><br>
<span class="lineno"></span><span class="keyword" id="4306345">func</span>&nbsp;<span class="ident" id="4306350">decodeCSS</span><span class="op" id="4306359">(</span><span class="ident" id="4306360">s</span>&nbsp;<span class="op" id="4306362">[</span><span class="op" id="4306363">]</span><span class="builtintype" id="4306364">byte</span><span class="op" id="4306368">)</span>&nbsp;<span class="op" id="4306370">[</span><span class="op" id="4306371">]</span><span class="builtintype" id="4306372">byte</span>&nbsp;<span class="op" id="4306377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4306380">i</span>&nbsp;<span class="op" id="4306382">:=</span>&nbsp;<span class="ident" id="4306385">bytes</span><span class="op" id="4306390">.</span><span class="ident" id="4306391">IndexByte</span><span class="op" id="4306400">(</span><span class="ident" id="4306401">s</span><span class="op" id="4306402">,</span>&nbsp;<span class="string" id="4306404">&#39;\\&#39;</span><span class="op" id="4306408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4306411">if</span>&nbsp;<span class="ident" id="4306414">i</span>&nbsp;<span class="op" id="4306416">==</span>&nbsp;<span class="op" id="4306419">-</span><span class="num" id="4306420">1</span>&nbsp;<span class="op" id="4306422">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4306426">return</span>&nbsp;<span class="ident" id="4306433">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4306436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4306439">//&nbsp;The&nbsp;UTF-8&nbsp;sequence&nbsp;for&nbsp;a&nbsp;codepoint&nbsp;is&nbsp;never&nbsp;longer&nbsp;than&nbsp;1&nbsp;+&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4306507">//&nbsp;number&nbsp;hex&nbsp;digits&nbsp;need&nbsp;to&nbsp;represent&nbsp;that&nbsp;codepoint,&nbsp;so&nbsp;len(s)&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4306579">//&nbsp;upper&nbsp;bound&nbsp;on&nbsp;the&nbsp;output&nbsp;length.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4306617">b</span>&nbsp;<span class="op" id="4306619">:=</span>&nbsp;<span class="builtinfunc" id="4306622">make</span><span class="op" id="4306626">(</span><span class="op" id="4306627">[</span><span class="op" id="4306628">]</span><span class="builtintype" id="4306629">byte</span><span class="op" id="4306633">,</span>&nbsp;<span class="num" id="4306635">0</span><span class="op" id="4306636">,</span>&nbsp;<span class="builtinfunc" id="4306638">len</span><span class="op" id="4306641">(</span><span class="ident" id="4306642">s</span><span class="op" id="4306643">)</span><span class="op" id="4306644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4306647">for</span>&nbsp;<span class="builtinfunc" id="4306651">len</span><span class="op" id="4306654">(</span><span class="ident" id="4306655">s</span><span class="op" id="4306656">)</span>&nbsp;<span class="op" id="4306658">!=</span>&nbsp;<span class="num" id="4306661">0</span>&nbsp;<span class="op" id="4306663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4306667">i</span>&nbsp;<span class="op" id="4306669">:=</span>&nbsp;<span class="ident" id="4306672">bytes</span><span class="op" id="4306677">.</span><span class="ident" id="4306678">IndexByte</span><span class="op" id="4306687">(</span><span class="ident" id="4306688">s</span><span class="op" id="4306689">,</span>&nbsp;<span class="string" id="4306691">&#39;\\&#39;</span><span class="op" id="4306695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4306699">if</span>&nbsp;<span class="ident" id="4306702">i</span>&nbsp;<span class="op" id="4306704">==</span>&nbsp;<span class="op" id="4306707">-</span><span class="num" id="4306708">1</span>&nbsp;<span class="op" id="4306710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4306715">i</span>&nbsp;<span class="op" id="4306717">=</span>&nbsp;<span class="builtinfunc" id="4306719">len</span><span class="op" id="4306722">(</span><span class="ident" id="4306723">s</span><span class="op" id="4306724">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4306728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4306732">b</span><span class="op" id="4306733">,</span>&nbsp;<span class="ident" id="4306735">s</span>&nbsp;<span class="op" id="4306737">=</span>&nbsp;<span class="builtinfunc" id="4306739">append</span><span class="op" id="4306745">(</span><span class="ident" id="4306746">b</span><span class="op" id="4306747">,</span>&nbsp;<span class="ident" id="4306749">s</span><span class="op" id="4306750">[</span><span class="op" id="4306751">:</span><span class="ident" id="4306752">i</span><span class="op" id="4306753">]</span><span class="op" id="4306754">...</span><span class="op" id="4306757">)</span><span class="op" id="4306758">,</span>&nbsp;<span class="ident" id="4306760">s</span><span class="op" id="4306761">[</span><span class="ident" id="4306762">i</span><span class="op" id="4306763">:</span><span class="op" id="4306764">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4306768">if</span>&nbsp;<span class="builtinfunc" id="4306771">len</span><span class="op" id="4306774">(</span><span class="ident" id="4306775">s</span><span class="op" id="4306776">)</span>&nbsp;<span class="op" id="4306778">&lt;</span>&nbsp;<span class="num" id="4306780">2</span>&nbsp;<span class="op" id="4306782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4306787">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4306795">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4306799">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-escape</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4306852">//&nbsp;escape&nbsp;::=&nbsp;unicode&nbsp;|&nbsp;&#39;\&#39;&nbsp;[#x20-#x7E#x80-#xD7FF#xE000-#xFFFD#x10000-#x10FFFF]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4306934">if</span>&nbsp;<span class="ident" id="4306937">isHex</span><span class="op" id="4306942">(</span><span class="ident" id="4306943">s</span><span class="op" id="4306944">[</span><span class="num" id="4306945">1</span><span class="op" id="4306946">]</span><span class="op" id="4306947">)</span>&nbsp;<span class="op" id="4306949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4306954">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-unicode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4307009">//&nbsp;&nbsp;&nbsp;unicode&nbsp;::=&nbsp;&#39;\&#39;&nbsp;[0-9a-fA-F]{1,6}&nbsp;wc?</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4307054">j</span>&nbsp;<span class="op" id="4307056">:=</span>&nbsp;<span class="num" id="4307059">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4307064">for</span>&nbsp;<span class="ident" id="4307068">j</span>&nbsp;<span class="op" id="4307070">&lt;</span>&nbsp;<span class="builtinfunc" id="4307072">len</span><span class="op" id="4307075">(</span><span class="ident" id="4307076">s</span><span class="op" id="4307077">)</span>&nbsp;<span class="op" id="4307079">&amp;&amp;</span>&nbsp;<span class="ident" id="4307082">j</span>&nbsp;<span class="op" id="4307084">&lt;</span>&nbsp;<span class="num" id="4307086">7</span>&nbsp;<span class="op" id="4307088">&amp;&amp;</span>&nbsp;<span class="ident" id="4307091">isHex</span><span class="op" id="4307096">(</span><span class="ident" id="4307097">s</span><span class="op" id="4307098">[</span><span class="ident" id="4307099">j</span><span class="op" id="4307100">]</span><span class="op" id="4307101">)</span>&nbsp;<span class="op" id="4307103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4307109">j</span><span class="op" id="4307110">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4307116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4307121">r</span>&nbsp;<span class="op" id="4307123">:=</span>&nbsp;<span class="ident" id="4307126">hexDecode</span><span class="op" id="4307135">(</span><span class="ident" id="4307136">s</span><span class="op" id="4307137">[</span><span class="num" id="4307138">1</span><span class="op" id="4307139">:</span><span class="ident" id="4307140">j</span><span class="op" id="4307141">]</span><span class="op" id="4307142">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4307147">if</span>&nbsp;<span class="ident" id="4307150">r</span>&nbsp;<span class="op" id="4307152">&gt;</span>&nbsp;<span class="ident" id="4307154">unicode</span><span class="op" id="4307161">.</span><span class="ident" id="4307162">MaxRune</span>&nbsp;<span class="op" id="4307170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4307176">r</span><span class="op" id="4307177">,</span>&nbsp;<span class="ident" id="4307179">j</span>&nbsp;<span class="op" id="4307181">=</span>&nbsp;<span class="ident" id="4307183">r</span><span class="op" id="4307184">/</span><span class="num" id="4307185">16</span><span class="op" id="4307187">,</span>&nbsp;<span class="ident" id="4307189">j</span><span class="op" id="4307190">-</span><span class="num" id="4307191">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4307196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4307201">n</span>&nbsp;<span class="op" id="4307203">:=</span>&nbsp;<span class="ident" id="4307206">utf8</span><span class="op" id="4307210">.</span><span class="ident" id="4307211">EncodeRune</span><span class="op" id="4307221">(</span><span class="ident" id="4307222">b</span><span class="op" id="4307223">[</span><span class="builtinfunc" id="4307224">len</span><span class="op" id="4307227">(</span><span class="ident" id="4307228">b</span><span class="op" id="4307229">)</span><span class="op" id="4307230">:</span><span class="builtinfunc" id="4307231">cap</span><span class="op" id="4307234">(</span><span class="ident" id="4307235">b</span><span class="op" id="4307236">)</span><span class="op" id="4307237">]</span><span class="op" id="4307238">,</span>&nbsp;<span class="ident" id="4307240">r</span><span class="op" id="4307241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4307246">//&nbsp;The&nbsp;optional&nbsp;space&nbsp;at&nbsp;the&nbsp;end&nbsp;allows&nbsp;a&nbsp;hex</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4307295">//&nbsp;sequence&nbsp;to&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;literal&nbsp;hex.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4307343">//&nbsp;string(decodeCSS([]byte(`\A&nbsp;B`)))&nbsp;==&nbsp;&#34;\nB&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4307392">b</span><span class="op" id="4307393">,</span>&nbsp;<span class="ident" id="4307395">s</span>&nbsp;<span class="op" id="4307397">=</span>&nbsp;<span class="ident" id="4307399">b</span><span class="op" id="4307400">[</span><span class="op" id="4307401">:</span><span class="builtinfunc" id="4307402">len</span><span class="op" id="4307405">(</span><span class="ident" id="4307406">b</span><span class="op" id="4307407">)</span><span class="op" id="4307408">+</span><span class="ident" id="4307409">n</span><span class="op" id="4307410">]</span><span class="op" id="4307411">,</span>&nbsp;<span class="ident" id="4307413">skipCSSSpace</span><span class="op" id="4307425">(</span><span class="ident" id="4307426">s</span><span class="op" id="4307427">[</span><span class="ident" id="4307428">j</span><span class="op" id="4307429">:</span><span class="op" id="4307430">]</span><span class="op" id="4307431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4307435">}</span>&nbsp;<span class="keyword" id="4307437">else</span>&nbsp;<span class="op" id="4307442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4307447">//&nbsp;`\\`&nbsp;decodes&nbsp;to&nbsp;`\`&nbsp;and&nbsp;`\&#34;`&nbsp;to&nbsp;`&#34;`.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4307490">_</span><span class="op" id="4307491">,</span>&nbsp;<span class="ident" id="4307493">n</span>&nbsp;<span class="op" id="4307495">:=</span>&nbsp;<span class="ident" id="4307498">utf8</span><span class="op" id="4307502">.</span><span class="ident" id="4307503">DecodeRune</span><span class="op" id="4307513">(</span><span class="ident" id="4307514">s</span><span class="op" id="4307515">[</span><span class="num" id="4307516">1</span><span class="op" id="4307517">:</span><span class="op" id="4307518">]</span><span class="op" id="4307519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4307524">b</span><span class="op" id="4307525">,</span>&nbsp;<span class="ident" id="4307527">s</span>&nbsp;<span class="op" id="4307529">=</span>&nbsp;<span class="builtinfunc" id="4307531">append</span><span class="op" id="4307537">(</span><span class="ident" id="4307538">b</span><span class="op" id="4307539">,</span>&nbsp;<span class="ident" id="4307541">s</span><span class="op" id="4307542">[</span><span class="num" id="4307543">1</span><span class="op" id="4307544">:</span><span class="num" id="4307545">1</span><span class="op" id="4307546">+</span><span class="ident" id="4307547">n</span><span class="op" id="4307548">]</span><span class="op" id="4307549">...</span><span class="op" id="4307552">)</span><span class="op" id="4307553">,</span>&nbsp;<span class="ident" id="4307555">s</span><span class="op" id="4307556">[</span><span class="num" id="4307557">1</span><span class="op" id="4307558">+</span><span class="ident" id="4307559">n</span><span class="op" id="4307560">:</span><span class="op" id="4307561">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4307565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4307568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4307571">return</span>&nbsp;<span class="ident" id="4307578">b</span><br>
<span class="lineno">100</span><span class="op" id="4307580">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4307583">//&nbsp;isHex&nbsp;reports&nbsp;whether&nbsp;the&nbsp;given&nbsp;character&nbsp;is&nbsp;a&nbsp;hex&nbsp;digit.</span><br>
<span class="lineno"></span><span class="keyword" id="4307644">func</span>&nbsp;<span class="ident" id="4307649">isHex</span><span class="op" id="4307654">(</span><span class="ident" id="4307655">c</span>&nbsp;<span class="builtintype" id="4307657">byte</span><span class="op" id="4307661">)</span>&nbsp;<span class="builtintype" id="4307663">bool</span>&nbsp;<span class="op" id="4307668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4307671">return</span>&nbsp;<span class="string" id="4307678">&#39;0&#39;</span>&nbsp;<span class="op" id="4307682">&lt;=</span>&nbsp;<span class="ident" id="4307685">c</span>&nbsp;<span class="op" id="4307687">&amp;&amp;</span>&nbsp;<span class="ident" id="4307690">c</span>&nbsp;<span class="op" id="4307692">&lt;=</span>&nbsp;<span class="string" id="4307695">&#39;9&#39;</span>&nbsp;<span class="op" id="4307699">||</span>&nbsp;<span class="string" id="4307702">&#39;a&#39;</span>&nbsp;<span class="op" id="4307706">&lt;=</span>&nbsp;<span class="ident" id="4307709">c</span>&nbsp;<span class="op" id="4307711">&amp;&amp;</span>&nbsp;<span class="ident" id="4307714">c</span>&nbsp;<span class="op" id="4307716">&lt;=</span>&nbsp;<span class="string" id="4307719">&#39;f&#39;</span>&nbsp;<span class="op" id="4307723">||</span>&nbsp;<span class="string" id="4307726">&#39;A&#39;</span>&nbsp;<span class="op" id="4307730">&lt;=</span>&nbsp;<span class="ident" id="4307733">c</span>&nbsp;<span class="op" id="4307735">&amp;&amp;</span>&nbsp;<span class="ident" id="4307738">c</span>&nbsp;<span class="op" id="4307740">&lt;=</span>&nbsp;<span class="string" id="4307743">&#39;F&#39;</span><br>
<span class="lineno">105</span><span class="op" id="4307747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4307750">//&nbsp;hexDecode&nbsp;decodes&nbsp;a&nbsp;short&nbsp;hex&nbsp;digit&nbsp;sequence:&nbsp;&#34;10&#34;&nbsp;-&gt;&nbsp;16.</span><br>
<span class="lineno"></span><span class="keyword" id="4307811">func</span>&nbsp;<span class="ident" id="4307816">hexDecode</span><span class="op" id="4307825">(</span><span class="ident" id="4307826">s</span>&nbsp;<span class="op" id="4307828">[</span><span class="op" id="4307829">]</span><span class="builtintype" id="4307830">byte</span><span class="op" id="4307834">)</span>&nbsp;<span class="builtintype" id="4307836">rune</span>&nbsp;<span class="op" id="4307841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4307844">n</span>&nbsp;<span class="op" id="4307846">:=</span>&nbsp;<span class="string" id="4307849">&#39;\x00&#39;</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4307857">for</span>&nbsp;<span class="ident" id="4307861">_</span><span class="op" id="4307862">,</span>&nbsp;<span class="ident" id="4307864">c</span>&nbsp;<span class="op" id="4307866">:=</span>&nbsp;<span class="keyword" id="4307869">range</span>&nbsp;<span class="ident" id="4307875">s</span>&nbsp;<span class="op" id="4307877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4307881">n</span>&nbsp;<span class="op" id="4307883">&lt;&lt;=</span>&nbsp;<span class="num" id="4307887">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4307891">switch</span>&nbsp;<span class="op" id="4307898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4307902">case</span>&nbsp;<span class="string" id="4307907">&#39;0&#39;</span>&nbsp;<span class="op" id="4307911">&lt;=</span>&nbsp;<span class="ident" id="4307914">c</span>&nbsp;<span class="op" id="4307916">&amp;&amp;</span>&nbsp;<span class="ident" id="4307919">c</span>&nbsp;<span class="op" id="4307921">&lt;=</span>&nbsp;<span class="string" id="4307924">&#39;9&#39;</span><span class="op" id="4307927">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4307932">n</span>&nbsp;<span class="op" id="4307934">|=</span>&nbsp;<span class="builtintype" id="4307937">rune</span><span class="op" id="4307941">(</span><span class="ident" id="4307942">c</span>&nbsp;<span class="op" id="4307944">-</span>&nbsp;<span class="string" id="4307946">&#39;0&#39;</span><span class="op" id="4307949">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4307953">case</span>&nbsp;<span class="string" id="4307958">&#39;a&#39;</span>&nbsp;<span class="op" id="4307962">&lt;=</span>&nbsp;<span class="ident" id="4307965">c</span>&nbsp;<span class="op" id="4307967">&amp;&amp;</span>&nbsp;<span class="ident" id="4307970">c</span>&nbsp;<span class="op" id="4307972">&lt;=</span>&nbsp;<span class="string" id="4307975">&#39;f&#39;</span><span class="op" id="4307978">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4307983">n</span>&nbsp;<span class="op" id="4307985">|=</span>&nbsp;<span class="builtintype" id="4307988">rune</span><span class="op" id="4307992">(</span><span class="ident" id="4307993">c</span><span class="op" id="4307994">-</span><span class="string" id="4307995">&#39;a&#39;</span><span class="op" id="4307998">)</span>&nbsp;<span class="op" id="4308000">+</span>&nbsp;<span class="num" id="4308002">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308007">case</span>&nbsp;<span class="string" id="4308012">&#39;A&#39;</span>&nbsp;<span class="op" id="4308016">&lt;=</span>&nbsp;<span class="ident" id="4308019">c</span>&nbsp;<span class="op" id="4308021">&amp;&amp;</span>&nbsp;<span class="ident" id="4308024">c</span>&nbsp;<span class="op" id="4308026">&lt;=</span>&nbsp;<span class="string" id="4308029">&#39;F&#39;</span><span class="op" id="4308032">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4308037">n</span>&nbsp;<span class="op" id="4308039">|=</span>&nbsp;<span class="builtintype" id="4308042">rune</span><span class="op" id="4308046">(</span><span class="ident" id="4308047">c</span><span class="op" id="4308048">-</span><span class="string" id="4308049">&#39;A&#39;</span><span class="op" id="4308052">)</span>&nbsp;<span class="op" id="4308054">+</span>&nbsp;<span class="num" id="4308056">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308061">default</span><span class="op" id="4308068">:</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4308073">panic</span><span class="op" id="4308078">(</span><span class="ident" id="4308079">fmt</span><span class="op" id="4308082">.</span><span class="ident" id="4308083">Sprintf</span><span class="op" id="4308090">(</span><span class="string" id="4308091">&#34;Bad&nbsp;hex&nbsp;digit&nbsp;in&nbsp;%q&#34;</span><span class="op" id="4308112">,</span>&nbsp;<span class="ident" id="4308114">s</span><span class="op" id="4308115">)</span><span class="op" id="4308116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4308120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4308123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308126">return</span>&nbsp;<span class="ident" id="4308133">n</span><br>
<span class="lineno"></span><span class="op" id="4308135">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="4308138">//&nbsp;skipCSSSpace&nbsp;returns&nbsp;a&nbsp;suffix&nbsp;of&nbsp;c,&nbsp;skipping&nbsp;over&nbsp;a&nbsp;single&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="4308207">func</span>&nbsp;<span class="ident" id="4308212">skipCSSSpace</span><span class="op" id="4308224">(</span><span class="ident" id="4308225">c</span>&nbsp;<span class="op" id="4308227">[</span><span class="op" id="4308228">]</span><span class="builtintype" id="4308229">byte</span><span class="op" id="4308233">)</span>&nbsp;<span class="op" id="4308235">[</span><span class="op" id="4308236">]</span><span class="builtintype" id="4308237">byte</span>&nbsp;<span class="op" id="4308242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308245">if</span>&nbsp;<span class="builtinfunc" id="4308248">len</span><span class="op" id="4308251">(</span><span class="ident" id="4308252">c</span><span class="op" id="4308253">)</span>&nbsp;<span class="op" id="4308255">==</span>&nbsp;<span class="num" id="4308258">0</span>&nbsp;<span class="op" id="4308260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308264">return</span>&nbsp;<span class="ident" id="4308271">c</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4308274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4308277">//&nbsp;wc&nbsp;::=&nbsp;#x9&nbsp;|&nbsp;#xA&nbsp;|&nbsp;#xC&nbsp;|&nbsp;#xD&nbsp;|&nbsp;#x20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308317">switch</span>&nbsp;<span class="ident" id="4308324">c</span><span class="op" id="4308325">[</span><span class="num" id="4308326">0</span><span class="op" id="4308327">]</span>&nbsp;<span class="op" id="4308329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308332">case</span>&nbsp;<span class="string" id="4308337">&#39;\t&#39;</span><span class="op" id="4308341">,</span>&nbsp;<span class="string" id="4308343">&#39;\n&#39;</span><span class="op" id="4308347">,</span>&nbsp;<span class="string" id="4308349">&#39;\f&#39;</span><span class="op" id="4308353">,</span>&nbsp;<span class="string" id="4308355">&#39;&nbsp;&#39;</span><span class="op" id="4308358">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308362">return</span>&nbsp;<span class="ident" id="4308369">c</span><span class="op" id="4308370">[</span><span class="num" id="4308371">1</span><span class="op" id="4308372">:</span><span class="op" id="4308373">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308376">case</span>&nbsp;<span class="string" id="4308381">&#39;\r&#39;</span><span class="op" id="4308385">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4308389">//&nbsp;This&nbsp;differs&nbsp;from&nbsp;CSS3&#39;s&nbsp;wc&nbsp;production&nbsp;because&nbsp;it&nbsp;contains&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4308455">//&nbsp;probable&nbsp;spec&nbsp;error&nbsp;whereby&nbsp;wc&nbsp;contains&nbsp;all&nbsp;the&nbsp;single&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4308520">//&nbsp;sequences&nbsp;in&nbsp;nl&nbsp;(newline)&nbsp;but&nbsp;not&nbsp;CRLF.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308565">if</span>&nbsp;<span class="builtinfunc" id="4308568">len</span><span class="op" id="4308571">(</span><span class="ident" id="4308572">c</span><span class="op" id="4308573">)</span>&nbsp;<span class="op" id="4308575">&gt;=</span>&nbsp;<span class="num" id="4308578">2</span>&nbsp;<span class="op" id="4308580">&amp;&amp;</span>&nbsp;<span class="ident" id="4308583">c</span><span class="op" id="4308584">[</span><span class="num" id="4308585">1</span><span class="op" id="4308586">]</span>&nbsp;<span class="op" id="4308588">==</span>&nbsp;<span class="string" id="4308591">&#39;\n&#39;</span>&nbsp;<span class="op" id="4308596">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308601">return</span>&nbsp;<span class="ident" id="4308608">c</span><span class="op" id="4308609">[</span><span class="num" id="4308610">2</span><span class="op" id="4308611">:</span><span class="op" id="4308612">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4308616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308620">return</span>&nbsp;<span class="ident" id="4308627">c</span><span class="op" id="4308628">[</span><span class="num" id="4308629">1</span><span class="op" id="4308630">:</span><span class="op" id="4308631">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4308634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308637">return</span>&nbsp;<span class="ident" id="4308644">c</span><br>
<span class="lineno">145</span><span class="op" id="4308646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4308649">//&nbsp;isCSSSpace&nbsp;reports&nbsp;whether&nbsp;b&nbsp;is&nbsp;a&nbsp;CSS&nbsp;space&nbsp;char&nbsp;as&nbsp;defined&nbsp;in&nbsp;wc.</span><br>
<span class="lineno"></span><span class="keyword" id="4308719">func</span>&nbsp;<span class="ident" id="4308724">isCSSSpace</span><span class="op" id="4308734">(</span><span class="ident" id="4308735">b</span>&nbsp;<span class="builtintype" id="4308737">byte</span><span class="op" id="4308741">)</span>&nbsp;<span class="builtintype" id="4308743">bool</span>&nbsp;<span class="op" id="4308748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308751">switch</span>&nbsp;<span class="ident" id="4308758">b</span>&nbsp;<span class="op" id="4308760">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308763">case</span>&nbsp;<span class="string" id="4308768">&#39;\t&#39;</span><span class="op" id="4308772">,</span>&nbsp;<span class="string" id="4308774">&#39;\n&#39;</span><span class="op" id="4308778">,</span>&nbsp;<span class="string" id="4308780">&#39;\f&#39;</span><span class="op" id="4308784">,</span>&nbsp;<span class="string" id="4308786">&#39;\r&#39;</span><span class="op" id="4308790">,</span>&nbsp;<span class="string" id="4308792">&#39;&nbsp;&#39;</span><span class="op" id="4308795">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308799">return</span>&nbsp;<span class="builtintype" id="4308806">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4308812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308815">return</span>&nbsp;<span class="builtintype" id="4308822">false</span><br>
<span class="lineno"></span><span class="op" id="4308828">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="4308831">//&nbsp;cssEscaper&nbsp;escapes&nbsp;HTML&nbsp;and&nbsp;CSS&nbsp;special&nbsp;characters&nbsp;using&nbsp;\&lt;hex&gt;+&nbsp;escapes.</span><br>
<span class="lineno"></span><span class="keyword" id="4308908">func</span>&nbsp;<span class="ident" id="4308913">cssEscaper</span><span class="op" id="4308923">(</span><span class="ident" id="4308924">args</span>&nbsp;<span class="op" id="4308929">...</span><span class="keyword" id="4308932">interface</span><span class="op" id="4308941">{</span><span class="op" id="4308942">}</span><span class="op" id="4308943">)</span>&nbsp;<span class="builtintype" id="4308945">string</span>&nbsp;<span class="op" id="4308952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4308955">s</span><span class="op" id="4308956">,</span>&nbsp;<span class="ident" id="4308958">_</span>&nbsp;<span class="op" id="4308960">:=</span>&nbsp;<span class="ident" id="4308963">stringify</span><span class="op" id="4308972">(</span><span class="ident" id="4308973">args</span><span class="op" id="4308977">...</span><span class="op" id="4308980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4308983">var</span>&nbsp;<span class="ident" id="4308987">b</span>&nbsp;<span class="ident" id="4308989">bytes</span><span class="op" id="4308994">.</span><span class="ident" id="4308995">Buffer</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309003">written</span>&nbsp;<span class="op" id="4309011">:=</span>&nbsp;<span class="num" id="4309014">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309017">for</span>&nbsp;<span class="ident" id="4309021">i</span><span class="op" id="4309022">,</span>&nbsp;<span class="ident" id="4309024">r</span>&nbsp;<span class="op" id="4309026">:=</span>&nbsp;<span class="keyword" id="4309029">range</span>&nbsp;<span class="ident" id="4309035">s</span>&nbsp;<span class="op" id="4309037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309041">var</span>&nbsp;<span class="ident" id="4309045">repl</span>&nbsp;<span class="builtintype" id="4309050">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309059">switch</span>&nbsp;<span class="ident" id="4309066">r</span>&nbsp;<span class="op" id="4309068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309072">case</span>&nbsp;<span class="num" id="4309077">0</span><span class="op" id="4309078">:</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309083">repl</span>&nbsp;<span class="op" id="4309088">=</span>&nbsp;<span class="string" id="4309090">`\0`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309097">case</span>&nbsp;<span class="string" id="4309102">&#39;\t&#39;</span><span class="op" id="4309106">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309111">repl</span>&nbsp;<span class="op" id="4309116">=</span>&nbsp;<span class="string" id="4309118">`\9`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309125">case</span>&nbsp;<span class="string" id="4309130">&#39;\n&#39;</span><span class="op" id="4309134">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309139">repl</span>&nbsp;<span class="op" id="4309144">=</span>&nbsp;<span class="string" id="4309146">`\a`</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309153">case</span>&nbsp;<span class="string" id="4309158">&#39;\f&#39;</span><span class="op" id="4309162">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309167">repl</span>&nbsp;<span class="op" id="4309172">=</span>&nbsp;<span class="string" id="4309174">`\c`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309181">case</span>&nbsp;<span class="string" id="4309186">&#39;\r&#39;</span><span class="op" id="4309190">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309195">repl</span>&nbsp;<span class="op" id="4309200">=</span>&nbsp;<span class="string" id="4309202">`\d`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4309209">//&nbsp;Encode&nbsp;HTML&nbsp;specials&nbsp;as&nbsp;hex&nbsp;so&nbsp;the&nbsp;output&nbsp;can&nbsp;be&nbsp;embedded</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4309272">//&nbsp;in&nbsp;HTML&nbsp;attributes&nbsp;without&nbsp;further&nbsp;encoding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309322">case</span>&nbsp;<span class="string" id="4309327">&#39;&#34;&#39;</span><span class="op" id="4309330">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309335">repl</span>&nbsp;<span class="op" id="4309340">=</span>&nbsp;<span class="string" id="4309342">`\22`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309350">case</span>&nbsp;<span class="string" id="4309355">&#39;&amp;&#39;</span><span class="op" id="4309358">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309363">repl</span>&nbsp;<span class="op" id="4309368">=</span>&nbsp;<span class="string" id="4309370">`\26`</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309378">case</span>&nbsp;<span class="string" id="4309383">&#39;\&#39;&#39;</span><span class="op" id="4309387">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309392">repl</span>&nbsp;<span class="op" id="4309397">=</span>&nbsp;<span class="string" id="4309399">`\27`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309407">case</span>&nbsp;<span class="string" id="4309412">&#39;(&#39;</span><span class="op" id="4309415">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309420">repl</span>&nbsp;<span class="op" id="4309425">=</span>&nbsp;<span class="string" id="4309427">`\28`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309435">case</span>&nbsp;<span class="string" id="4309440">&#39;)&#39;</span><span class="op" id="4309443">:</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309448">repl</span>&nbsp;<span class="op" id="4309453">=</span>&nbsp;<span class="string" id="4309455">`\29`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309463">case</span>&nbsp;<span class="string" id="4309468">&#39;+&#39;</span><span class="op" id="4309471">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309476">repl</span>&nbsp;<span class="op" id="4309481">=</span>&nbsp;<span class="string" id="4309483">`\2b`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309491">case</span>&nbsp;<span class="string" id="4309496">&#39;/&#39;</span><span class="op" id="4309499">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309504">repl</span>&nbsp;<span class="op" id="4309509">=</span>&nbsp;<span class="string" id="4309511">`\2f`</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309519">case</span>&nbsp;<span class="string" id="4309524">&#39;:&#39;</span><span class="op" id="4309527">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309532">repl</span>&nbsp;<span class="op" id="4309537">=</span>&nbsp;<span class="string" id="4309539">`\3a`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309547">case</span>&nbsp;<span class="string" id="4309552">&#39;;&#39;</span><span class="op" id="4309555">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309560">repl</span>&nbsp;<span class="op" id="4309565">=</span>&nbsp;<span class="string" id="4309567">`\3b`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309575">case</span>&nbsp;<span class="string" id="4309580">&#39;&lt;&#39;</span><span class="op" id="4309583">:</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309588">repl</span>&nbsp;<span class="op" id="4309593">=</span>&nbsp;<span class="string" id="4309595">`\3c`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309603">case</span>&nbsp;<span class="string" id="4309608">&#39;&gt;&#39;</span><span class="op" id="4309611">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309616">repl</span>&nbsp;<span class="op" id="4309621">=</span>&nbsp;<span class="string" id="4309623">`\3e`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309631">case</span>&nbsp;<span class="string" id="4309636">&#39;\\&#39;</span><span class="op" id="4309640">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309645">repl</span>&nbsp;<span class="op" id="4309650">=</span>&nbsp;<span class="string" id="4309652">`\\`</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309659">case</span>&nbsp;<span class="string" id="4309664">&#39;{&#39;</span><span class="op" id="4309667">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309672">repl</span>&nbsp;<span class="op" id="4309677">=</span>&nbsp;<span class="string" id="4309679">`\7b`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309687">case</span>&nbsp;<span class="string" id="4309692">&#39;}&#39;</span><span class="op" id="4309695">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309700">repl</span>&nbsp;<span class="op" id="4309705">=</span>&nbsp;<span class="string" id="4309707">`\7d`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309715">default</span><span class="op" id="4309722">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309727">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4309738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309742">b</span><span class="op" id="4309743">.</span><span class="ident" id="4309744">WriteString</span><span class="op" id="4309755">(</span><span class="ident" id="4309756">s</span><span class="op" id="4309757">[</span><span class="ident" id="4309758">written</span><span class="op" id="4309765">:</span><span class="ident" id="4309766">i</span><span class="op" id="4309767">]</span><span class="op" id="4309768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309772">b</span><span class="op" id="4309773">.</span><span class="ident" id="4309774">WriteString</span><span class="op" id="4309785">(</span><span class="ident" id="4309786">repl</span><span class="op" id="4309790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309794">written</span>&nbsp;<span class="op" id="4309802">=</span>&nbsp;<span class="ident" id="4309804">i</span>&nbsp;<span class="op" id="4309806">+</span>&nbsp;<span class="ident" id="4309808">utf8</span><span class="op" id="4309812">.</span><span class="ident" id="4309813">RuneLen</span><span class="op" id="4309820">(</span><span class="ident" id="4309821">r</span><span class="op" id="4309822">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309826">if</span>&nbsp;<span class="ident" id="4309829">repl</span>&nbsp;<span class="op" id="4309834">!=</span>&nbsp;<span class="string" id="4309837">`\\`</span>&nbsp;<span class="op" id="4309842">&amp;&amp;</span>&nbsp;<span class="op" id="4309845">(</span><span class="ident" id="4309846">written</span>&nbsp;<span class="op" id="4309854">==</span>&nbsp;<span class="builtinfunc" id="4309857">len</span><span class="op" id="4309860">(</span><span class="ident" id="4309861">s</span><span class="op" id="4309862">)</span>&nbsp;<span class="op" id="4309864">||</span>&nbsp;<span class="ident" id="4309867">isHex</span><span class="op" id="4309872">(</span><span class="ident" id="4309873">s</span><span class="op" id="4309874">[</span><span class="ident" id="4309875">written</span><span class="op" id="4309882">]</span><span class="op" id="4309883">)</span>&nbsp;<span class="op" id="4309885">||</span>&nbsp;<span class="ident" id="4309888">isCSSSpace</span><span class="op" id="4309898">(</span><span class="ident" id="4309899">s</span><span class="op" id="4309900">[</span><span class="ident" id="4309901">written</span><span class="op" id="4309908">]</span><span class="op" id="4309909">)</span><span class="op" id="4309910">)</span>&nbsp;<span class="op" id="4309912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309917">b</span><span class="op" id="4309918">.</span><span class="ident" id="4309919">WriteByte</span><span class="op" id="4309928">(</span><span class="string" id="4309929">&#39;&nbsp;&#39;</span><span class="op" id="4309932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4309936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4309939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309942">if</span>&nbsp;<span class="ident" id="4309945">written</span>&nbsp;<span class="op" id="4309953">==</span>&nbsp;<span class="num" id="4309956">0</span>&nbsp;<span class="op" id="4309958">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4309962">return</span>&nbsp;<span class="ident" id="4309969">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4309972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4309975">b</span><span class="op" id="4309976">.</span><span class="ident" id="4309977">WriteString</span><span class="op" id="4309988">(</span><span class="ident" id="4309989">s</span><span class="op" id="4309990">[</span><span class="ident" id="4309991">written</span><span class="op" id="4309998">:</span><span class="op" id="4309999">]</span><span class="op" id="4310000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4310003">return</span>&nbsp;<span class="ident" id="4310010">b</span><span class="op" id="4310011">.</span><span class="ident" id="4310012">String</span><span class="op" id="4310018">(</span><span class="op" id="4310019">)</span><br>
<span class="lineno"></span><span class="op" id="4310021">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="keyword" id="4310024">var</span>&nbsp;<span class="ident" id="4310028">expressionBytes</span>&nbsp;<span class="op" id="4310044">=</span>&nbsp;<span class="op" id="4310046">[</span><span class="op" id="4310047">]</span><span class="builtintype" id="4310048">byte</span><span class="op" id="4310052">(</span><span class="string" id="4310053">&#34;expression&#34;</span><span class="op" id="4310065">)</span><br>
<span class="lineno"></span><span class="keyword" id="4310067">var</span>&nbsp;<span class="ident" id="4310071">mozBindingBytes</span>&nbsp;<span class="op" id="4310087">=</span>&nbsp;<span class="op" id="4310089">[</span><span class="op" id="4310090">]</span><span class="builtintype" id="4310091">byte</span><span class="op" id="4310095">(</span><span class="string" id="4310096">&#34;mozbinding&#34;</span><span class="op" id="4310108">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4310111">//&nbsp;cssValueFilter&nbsp;allows&nbsp;innocuous&nbsp;CSS&nbsp;values&nbsp;in&nbsp;the&nbsp;output&nbsp;including&nbsp;CSS</span><br>
<span class="lineno">225</span><span class="comment" id="4310185">//&nbsp;quantities&nbsp;(10px&nbsp;or&nbsp;25%),&nbsp;ID&nbsp;or&nbsp;class&nbsp;literals&nbsp;(#foo,&nbsp;.bar),&nbsp;keyword&nbsp;values</span><br>
<span class="lineno"></span><span class="comment" id="4310264">//&nbsp;(inherit,&nbsp;blue),&nbsp;and&nbsp;colors&nbsp;(#888).</span><br>
<span class="lineno"></span><span class="comment" id="4310303">//&nbsp;It&nbsp;filters&nbsp;out&nbsp;unsafe&nbsp;values,&nbsp;such&nbsp;as&nbsp;those&nbsp;that&nbsp;affect&nbsp;token&nbsp;boundaries,</span><br>
<span class="lineno"></span><span class="comment" id="4310380">//&nbsp;and&nbsp;anything&nbsp;that&nbsp;might&nbsp;execute&nbsp;scripts.</span><br>
<span class="lineno"></span><span class="keyword" id="4310424">func</span>&nbsp;<span class="ident" id="4310429">cssValueFilter</span><span class="op" id="4310443">(</span><span class="ident" id="4310444">args</span>&nbsp;<span class="op" id="4310449">...</span><span class="keyword" id="4310452">interface</span><span class="op" id="4310461">{</span><span class="op" id="4310462">}</span><span class="op" id="4310463">)</span>&nbsp;<span class="builtintype" id="4310465">string</span>&nbsp;<span class="op" id="4310472">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4310475">s</span><span class="op" id="4310476">,</span>&nbsp;<span class="ident" id="4310478">t</span>&nbsp;<span class="op" id="4310480">:=</span>&nbsp;<span class="ident" id="4310483">stringify</span><span class="op" id="4310492">(</span><span class="ident" id="4310493">args</span><span class="op" id="4310497">...</span><span class="op" id="4310500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4310503">if</span>&nbsp;<span class="ident" id="4310506">t</span>&nbsp;<span class="op" id="4310508">==</span>&nbsp;<span class="ident" id="4310511">contentTypeCSS</span>&nbsp;<span class="op" id="4310526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4310530">return</span>&nbsp;<span class="ident" id="4310537">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4310540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4310543">b</span><span class="op" id="4310544">,</span>&nbsp;<span class="ident" id="4310546">id</span>&nbsp;<span class="op" id="4310549">:=</span>&nbsp;<span class="ident" id="4310552">decodeCSS</span><span class="op" id="4310561">(</span><span class="op" id="4310562">[</span><span class="op" id="4310563">]</span><span class="builtintype" id="4310564">byte</span><span class="op" id="4310568">(</span><span class="ident" id="4310569">s</span><span class="op" id="4310570">)</span><span class="op" id="4310571">)</span><span class="op" id="4310572">,</span>&nbsp;<span class="builtinfunc" id="4310574">make</span><span class="op" id="4310578">(</span><span class="op" id="4310579">[</span><span class="op" id="4310580">]</span><span class="builtintype" id="4310581">byte</span><span class="op" id="4310585">,</span>&nbsp;<span class="num" id="4310587">0</span><span class="op" id="4310588">,</span>&nbsp;<span class="num" id="4310590">64</span><span class="op" id="4310592">)</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4310596">//&nbsp;CSS3&nbsp;error&nbsp;handling&nbsp;is&nbsp;specified&nbsp;as&nbsp;honoring&nbsp;string&nbsp;boundaries&nbsp;per</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4310667">//&nbsp;http://www.w3.org/TR/css3-syntax/#error-handling&nbsp;:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4310722">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Malformed&nbsp;declarations.&nbsp;User&nbsp;agents&nbsp;must&nbsp;handle&nbsp;unexpected</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4310789">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tokens&nbsp;encountered&nbsp;while&nbsp;parsing&nbsp;a&nbsp;declaration&nbsp;by&nbsp;reading&nbsp;until</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4310861">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;declaration,&nbsp;while&nbsp;observing&nbsp;the&nbsp;rules&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4310927">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matching&nbsp;pairs&nbsp;of&nbsp;(),&nbsp;[],&nbsp;{},&nbsp;&#34;&#34;,&nbsp;and&nbsp;&#39;&#39;,&nbsp;and&nbsp;correctly&nbsp;handling</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4311000">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escapes.&nbsp;For&nbsp;example,&nbsp;a&nbsp;malformed&nbsp;declaration&nbsp;may&nbsp;be&nbsp;missing&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4311071">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;property,&nbsp;colon&nbsp;(:)&nbsp;or&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4311109">//&nbsp;So&nbsp;we&nbsp;need&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;values&nbsp;do&nbsp;not&nbsp;have&nbsp;mismatched&nbsp;bracket</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4311180">//&nbsp;or&nbsp;quote&nbsp;characters&nbsp;to&nbsp;prevent&nbsp;the&nbsp;browser&nbsp;from&nbsp;restarting&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4311251">//&nbsp;inside&nbsp;a&nbsp;string&nbsp;that&nbsp;might&nbsp;embed&nbsp;JavaScript&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4311307">for</span>&nbsp;<span class="ident" id="4311311">i</span><span class="op" id="4311312">,</span>&nbsp;<span class="ident" id="4311314">c</span>&nbsp;<span class="op" id="4311316">:=</span>&nbsp;<span class="keyword" id="4311319">range</span>&nbsp;<span class="ident" id="4311325">b</span>&nbsp;<span class="op" id="4311327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4311331">switch</span>&nbsp;<span class="ident" id="4311338">c</span>&nbsp;<span class="op" id="4311340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4311344">case</span>&nbsp;<span class="num" id="4311349">0</span><span class="op" id="4311350">,</span>&nbsp;<span class="string" id="4311352">&#39;&#34;&#39;</span><span class="op" id="4311355">,</span>&nbsp;<span class="string" id="4311357">&#39;\&#39;&#39;</span><span class="op" id="4311361">,</span>&nbsp;<span class="string" id="4311363">&#39;(&#39;</span><span class="op" id="4311366">,</span>&nbsp;<span class="string" id="4311368">&#39;)&#39;</span><span class="op" id="4311371">,</span>&nbsp;<span class="string" id="4311373">&#39;/&#39;</span><span class="op" id="4311376">,</span>&nbsp;<span class="string" id="4311378">&#39;;&#39;</span><span class="op" id="4311381">,</span>&nbsp;<span class="string" id="4311383">&#39;@&#39;</span><span class="op" id="4311386">,</span>&nbsp;<span class="string" id="4311388">&#39;[&#39;</span><span class="op" id="4311391">,</span>&nbsp;<span class="string" id="4311393">&#39;\\&#39;</span><span class="op" id="4311397">,</span>&nbsp;<span class="string" id="4311399">&#39;]&#39;</span><span class="op" id="4311402">,</span>&nbsp;<span class="string" id="4311404">&#39;`&#39;</span><span class="op" id="4311407">,</span>&nbsp;<span class="string" id="4311409">&#39;{&#39;</span><span class="op" id="4311412">,</span>&nbsp;<span class="string" id="4311414">&#39;}&#39;</span><span class="op" id="4311417">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4311422">return</span>&nbsp;<span class="ident" id="4311429">filterFailsafe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4311446">case</span>&nbsp;<span class="string" id="4311451">&#39;-&#39;</span><span class="op" id="4311454">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4311459">//&nbsp;Disallow&nbsp;&lt;!--&nbsp;or&nbsp;--&gt;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4311487">//&nbsp;--&nbsp;should&nbsp;not&nbsp;appear&nbsp;in&nbsp;valid&nbsp;identifiers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4311536">if</span>&nbsp;<span class="ident" id="4311539">i</span>&nbsp;<span class="op" id="4311541">!=</span>&nbsp;<span class="num" id="4311544">0</span>&nbsp;<span class="op" id="4311546">&amp;&amp;</span>&nbsp;<span class="ident" id="4311549">b</span><span class="op" id="4311550">[</span><span class="ident" id="4311551">i</span><span class="op" id="4311552">-</span><span class="num" id="4311553">1</span><span class="op" id="4311554">]</span>&nbsp;<span class="op" id="4311556">==</span>&nbsp;<span class="string" id="4311559">&#39;-&#39;</span>&nbsp;<span class="op" id="4311563">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4311569">return</span>&nbsp;<span class="ident" id="4311576">filterFailsafe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4311594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4311598">default</span><span class="op" id="4311605">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4311610">if</span>&nbsp;<span class="ident" id="4311613">c</span>&nbsp;<span class="op" id="4311615">&lt;</span>&nbsp;<span class="num" id="4311617">0x80</span>&nbsp;<span class="op" id="4311622">&amp;&amp;</span>&nbsp;<span class="ident" id="4311625">isCSSNmchar</span><span class="op" id="4311636">(</span><span class="builtintype" id="4311637">rune</span><span class="op" id="4311641">(</span><span class="ident" id="4311642">c</span><span class="op" id="4311643">)</span><span class="op" id="4311644">)</span>&nbsp;<span class="op" id="4311646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4311652">id</span>&nbsp;<span class="op" id="4311655">=</span>&nbsp;<span class="builtinfunc" id="4311657">append</span><span class="op" id="4311663">(</span><span class="ident" id="4311664">id</span><span class="op" id="4311666">,</span>&nbsp;<span class="ident" id="4311668">c</span><span class="op" id="4311669">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4311674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4311678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4311681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4311684">id</span>&nbsp;<span class="op" id="4311687">=</span>&nbsp;<span class="ident" id="4311689">bytes</span><span class="op" id="4311694">.</span><span class="ident" id="4311695">ToLower</span><span class="op" id="4311702">(</span><span class="ident" id="4311703">id</span><span class="op" id="4311705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4311708">if</span>&nbsp;<span class="ident" id="4311711">bytes</span><span class="op" id="4311716">.</span><span class="ident" id="4311717">Index</span><span class="op" id="4311722">(</span><span class="ident" id="4311723">id</span><span class="op" id="4311725">,</span>&nbsp;<span class="ident" id="4311727">expressionBytes</span><span class="op" id="4311742">)</span>&nbsp;<span class="op" id="4311744">!=</span>&nbsp;<span class="op" id="4311747">-</span><span class="num" id="4311748">1</span>&nbsp;<span class="op" id="4311750">||</span>&nbsp;<span class="ident" id="4311753">bytes</span><span class="op" id="4311758">.</span><span class="ident" id="4311759">Index</span><span class="op" id="4311764">(</span><span class="ident" id="4311765">id</span><span class="op" id="4311767">,</span>&nbsp;<span class="ident" id="4311769">mozBindingBytes</span><span class="op" id="4311784">)</span>&nbsp;<span class="op" id="4311786">!=</span>&nbsp;<span class="op" id="4311789">-</span><span class="num" id="4311790">1</span>&nbsp;<span class="op" id="4311792">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4311796">return</span>&nbsp;<span class="ident" id="4311803">filterFailsafe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4311819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4311822">return</span>&nbsp;<span class="builtintype" id="4311829">string</span><span class="op" id="4311835">(</span><span class="ident" id="4311836">b</span><span class="op" id="4311837">)</span><br>
<span class="lineno"></span><span class="op" id="4311839">}</span>
</div>
</body>
</html>
