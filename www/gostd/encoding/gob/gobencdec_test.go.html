<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8337990">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8338045">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8338099">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8338150">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;tests&nbsp;of&nbsp;the&nbsp;GobEncoder/GobDecoder&nbsp;support.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8338217">package</span>&nbsp;<span class="ident" id="8338225">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8338230">import</span>&nbsp;<span class="op" id="8338237">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8338240">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8338249">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8338259">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8338266">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8338272">&#34;net&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8338279">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8338290">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8338301">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8338308">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="8338311">//&nbsp;Types&nbsp;that&nbsp;implement&nbsp;the&nbsp;GobEncoder/Decoder&nbsp;interfaces.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8338371">type</span>&nbsp;<span class="ident" id="8338376">ByteStruct</span>&nbsp;<span class="keyword" id="8338387">struct</span>&nbsp;<span class="op" id="8338394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338397">a</span>&nbsp;<span class="builtintype" id="8338399">byte</span>&nbsp;<span class="comment" id="8338404">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8338429">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8338432">type</span>&nbsp;<span class="ident" id="8338437">StringStruct</span>&nbsp;<span class="keyword" id="8338450">struct</span>&nbsp;<span class="op" id="8338457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338460">s</span>&nbsp;<span class="builtintype" id="8338462">string</span>&nbsp;<span class="comment" id="8338469">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8338494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="8338497">type</span>&nbsp;<span class="ident" id="8338502">ArrayStruct</span>&nbsp;<span class="keyword" id="8338514">struct</span>&nbsp;<span class="op" id="8338521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338524">a</span>&nbsp;<span class="op" id="8338526">[</span><span class="num" id="8338527">8192</span><span class="op" id="8338531">]</span><span class="builtintype" id="8338532">byte</span>&nbsp;<span class="comment" id="8338537">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8338562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8338565">type</span>&nbsp;<span class="ident" id="8338570">Gobber</span>&nbsp;<span class="builtintype" id="8338577">int</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="8338582">type</span>&nbsp;<span class="ident" id="8338587">ValueGobber</span>&nbsp;<span class="builtintype" id="8338599">string</span>&nbsp;<span class="comment" id="8338606">//&nbsp;encodes&nbsp;with&nbsp;a&nbsp;value,&nbsp;decodes&nbsp;with&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8338656">type</span>&nbsp;<span class="ident" id="8338661">BinaryGobber</span>&nbsp;<span class="builtintype" id="8338674">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="8338679">type</span>&nbsp;<span class="ident" id="8338684">BinaryValueGobber</span>&nbsp;<span class="builtintype" id="8338702">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8338710">type</span>&nbsp;<span class="ident" id="8338715">TextGobber</span>&nbsp;<span class="builtintype" id="8338726">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8338731">type</span>&nbsp;<span class="ident" id="8338736">TextValueGobber</span>&nbsp;<span class="builtintype" id="8338752">string</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="8338760">//&nbsp;The&nbsp;relevant&nbsp;methods</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8338785">func</span>&nbsp;<span class="op" id="8338790">(</span><span class="ident" id="8338791">g</span>&nbsp;<span class="op" id="8338793">*</span><span class="ident" id="8338794">ByteStruct</span><span class="op" id="8338804">)</span>&nbsp;<span class="ident" id="8338806">GobEncode</span><span class="op" id="8338815">(</span><span class="op" id="8338816">)</span>&nbsp;<span class="op" id="8338818">(</span><span class="op" id="8338819">[</span><span class="op" id="8338820">]</span><span class="builtintype" id="8338821">byte</span><span class="op" id="8338825">,</span>&nbsp;<span class="builtintype" id="8338827">error</span><span class="op" id="8338832">)</span>&nbsp;<span class="op" id="8338834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338837">b</span>&nbsp;<span class="op" id="8338839">:=</span>&nbsp;<span class="builtinfunc" id="8338842">make</span><span class="op" id="8338846">(</span><span class="op" id="8338847">[</span><span class="op" id="8338848">]</span><span class="builtintype" id="8338849">byte</span><span class="op" id="8338853">,</span>&nbsp;<span class="num" id="8338855">3</span><span class="op" id="8338856">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338859">b</span><span class="op" id="8338860">[</span><span class="num" id="8338861">0</span><span class="op" id="8338862">]</span>&nbsp;<span class="op" id="8338864">=</span>&nbsp;<span class="ident" id="8338866">g</span><span class="op" id="8338867">.</span><span class="ident" id="8338868">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338871">b</span><span class="op" id="8338872">[</span><span class="num" id="8338873">1</span><span class="op" id="8338874">]</span>&nbsp;<span class="op" id="8338876">=</span>&nbsp;<span class="ident" id="8338878">g</span><span class="op" id="8338879">.</span><span class="ident" id="8338880">a</span>&nbsp;<span class="op" id="8338882">+</span>&nbsp;<span class="num" id="8338884">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338887">b</span><span class="op" id="8338888">[</span><span class="num" id="8338889">2</span><span class="op" id="8338890">]</span>&nbsp;<span class="op" id="8338892">=</span>&nbsp;<span class="ident" id="8338894">g</span><span class="op" id="8338895">.</span><span class="ident" id="8338896">a</span>&nbsp;<span class="op" id="8338898">+</span>&nbsp;<span class="num" id="8338900">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338903">return</span>&nbsp;<span class="ident" id="8338910">b</span><span class="op" id="8338911">,</span>&nbsp;<span class="ident" id="8338913">nil</span><br>
<span class="lineno"></span><span class="op" id="8338917">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="8338920">func</span>&nbsp;<span class="op" id="8338925">(</span><span class="ident" id="8338926">g</span>&nbsp;<span class="op" id="8338928">*</span><span class="ident" id="8338929">ByteStruct</span><span class="op" id="8338939">)</span>&nbsp;<span class="ident" id="8338941">GobDecode</span><span class="op" id="8338950">(</span><span class="ident" id="8338951">data</span>&nbsp;<span class="op" id="8338956">[</span><span class="op" id="8338957">]</span><span class="builtintype" id="8338958">byte</span><span class="op" id="8338962">)</span>&nbsp;<span class="builtintype" id="8338964">error</span>&nbsp;<span class="op" id="8338970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338973">if</span>&nbsp;<span class="ident" id="8338976">g</span>&nbsp;<span class="op" id="8338978">==</span>&nbsp;<span class="ident" id="8338981">nil</span>&nbsp;<span class="op" id="8338985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338989">return</span>&nbsp;<span class="ident" id="8338996">errors</span><span class="op" id="8339002">.</span><span class="ident" id="8339003">New</span><span class="op" id="8339006">(</span><span class="string" id="8339007">&#34;NIL&nbsp;RECEIVER&#34;</span><span class="op" id="8339021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8339024">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8339027">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339065">if</span>&nbsp;<span class="builtinfunc" id="8339068">len</span><span class="op" id="8339071">(</span><span class="ident" id="8339072">data</span><span class="op" id="8339076">)</span>&nbsp;<span class="op" id="8339078">==</span>&nbsp;<span class="num" id="8339081">0</span>&nbsp;<span class="op" id="8339083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339087">return</span>&nbsp;<span class="ident" id="8339094">io</span><span class="op" id="8339096">.</span><span class="ident" id="8339097">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8339102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8339105">g</span><span class="op" id="8339106">.</span><span class="ident" id="8339107">a</span>&nbsp;<span class="op" id="8339109">=</span>&nbsp;<span class="ident" id="8339111">data</span><span class="op" id="8339115">[</span><span class="num" id="8339116">0</span><span class="op" id="8339117">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339120">for</span>&nbsp;<span class="ident" id="8339124">i</span><span class="op" id="8339125">,</span>&nbsp;<span class="ident" id="8339127">c</span>&nbsp;<span class="op" id="8339129">:=</span>&nbsp;<span class="keyword" id="8339132">range</span>&nbsp;<span class="ident" id="8339138">data</span>&nbsp;<span class="op" id="8339143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339147">if</span>&nbsp;<span class="ident" id="8339150">c</span>&nbsp;<span class="op" id="8339152">!=</span>&nbsp;<span class="ident" id="8339155">g</span><span class="op" id="8339156">.</span><span class="ident" id="8339157">a</span><span class="op" id="8339158">+</span><span class="builtintype" id="8339159">byte</span><span class="op" id="8339163">(</span><span class="ident" id="8339164">i</span><span class="op" id="8339165">)</span>&nbsp;<span class="op" id="8339167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339172">return</span>&nbsp;<span class="ident" id="8339179">errors</span><span class="op" id="8339185">.</span><span class="ident" id="8339186">New</span><span class="op" id="8339189">(</span><span class="string" id="8339190">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="8339213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8339217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8339220">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339223">return</span>&nbsp;<span class="ident" id="8339230">nil</span><br>
<span class="lineno"></span><span class="op" id="8339234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8339237">func</span>&nbsp;<span class="op" id="8339242">(</span><span class="ident" id="8339243">g</span>&nbsp;<span class="op" id="8339245">*</span><span class="ident" id="8339246">StringStruct</span><span class="op" id="8339258">)</span>&nbsp;<span class="ident" id="8339260">GobEncode</span><span class="op" id="8339269">(</span><span class="op" id="8339270">)</span>&nbsp;<span class="op" id="8339272">(</span><span class="op" id="8339273">[</span><span class="op" id="8339274">]</span><span class="builtintype" id="8339275">byte</span><span class="op" id="8339279">,</span>&nbsp;<span class="builtintype" id="8339281">error</span><span class="op" id="8339286">)</span>&nbsp;<span class="op" id="8339288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339291">return</span>&nbsp;<span class="op" id="8339298">[</span><span class="op" id="8339299">]</span><span class="builtintype" id="8339300">byte</span><span class="op" id="8339304">(</span><span class="ident" id="8339305">g</span><span class="op" id="8339306">.</span><span class="ident" id="8339307">s</span><span class="op" id="8339308">)</span><span class="op" id="8339309">,</span>&nbsp;<span class="ident" id="8339311">nil</span><br>
<span class="lineno">75</span><span class="op" id="8339315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8339318">func</span>&nbsp;<span class="op" id="8339323">(</span><span class="ident" id="8339324">g</span>&nbsp;<span class="op" id="8339326">*</span><span class="ident" id="8339327">StringStruct</span><span class="op" id="8339339">)</span>&nbsp;<span class="ident" id="8339341">GobDecode</span><span class="op" id="8339350">(</span><span class="ident" id="8339351">data</span>&nbsp;<span class="op" id="8339356">[</span><span class="op" id="8339357">]</span><span class="builtintype" id="8339358">byte</span><span class="op" id="8339362">)</span>&nbsp;<span class="builtintype" id="8339364">error</span>&nbsp;<span class="op" id="8339370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8339373">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339411">if</span>&nbsp;<span class="builtinfunc" id="8339414">len</span><span class="op" id="8339417">(</span><span class="ident" id="8339418">data</span><span class="op" id="8339422">)</span>&nbsp;<span class="op" id="8339424">==</span>&nbsp;<span class="num" id="8339427">0</span>&nbsp;<span class="op" id="8339429">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339433">return</span>&nbsp;<span class="ident" id="8339440">io</span><span class="op" id="8339442">.</span><span class="ident" id="8339443">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8339448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8339451">a</span>&nbsp;<span class="op" id="8339453">:=</span>&nbsp;<span class="ident" id="8339456">data</span><span class="op" id="8339460">[</span><span class="num" id="8339461">0</span><span class="op" id="8339462">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339465">for</span>&nbsp;<span class="ident" id="8339469">i</span><span class="op" id="8339470">,</span>&nbsp;<span class="ident" id="8339472">c</span>&nbsp;<span class="op" id="8339474">:=</span>&nbsp;<span class="keyword" id="8339477">range</span>&nbsp;<span class="ident" id="8339483">data</span>&nbsp;<span class="op" id="8339488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339492">if</span>&nbsp;<span class="ident" id="8339495">c</span>&nbsp;<span class="op" id="8339497">!=</span>&nbsp;<span class="ident" id="8339500">a</span><span class="op" id="8339501">+</span><span class="builtintype" id="8339502">byte</span><span class="op" id="8339506">(</span><span class="ident" id="8339507">i</span><span class="op" id="8339508">)</span>&nbsp;<span class="op" id="8339510">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339515">return</span>&nbsp;<span class="ident" id="8339522">errors</span><span class="op" id="8339528">.</span><span class="ident" id="8339529">New</span><span class="op" id="8339532">(</span><span class="string" id="8339533">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="8339556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8339560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8339563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8339566">g</span><span class="op" id="8339567">.</span><span class="ident" id="8339568">s</span>&nbsp;<span class="op" id="8339570">=</span>&nbsp;<span class="builtintype" id="8339572">string</span><span class="op" id="8339578">(</span><span class="ident" id="8339579">data</span><span class="op" id="8339583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339586">return</span>&nbsp;<span class="ident" id="8339593">nil</span><br>
<span class="lineno">90</span><span class="op" id="8339597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8339600">func</span>&nbsp;<span class="op" id="8339605">(</span><span class="ident" id="8339606">a</span>&nbsp;<span class="op" id="8339608">*</span><span class="ident" id="8339609">ArrayStruct</span><span class="op" id="8339620">)</span>&nbsp;<span class="ident" id="8339622">GobEncode</span><span class="op" id="8339631">(</span><span class="op" id="8339632">)</span>&nbsp;<span class="op" id="8339634">(</span><span class="op" id="8339635">[</span><span class="op" id="8339636">]</span><span class="builtintype" id="8339637">byte</span><span class="op" id="8339641">,</span>&nbsp;<span class="builtintype" id="8339643">error</span><span class="op" id="8339648">)</span>&nbsp;<span class="op" id="8339650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339653">return</span>&nbsp;<span class="ident" id="8339660">a</span><span class="op" id="8339661">.</span><span class="ident" id="8339662">a</span><span class="op" id="8339663">[</span><span class="op" id="8339664">:</span><span class="op" id="8339665">]</span><span class="op" id="8339666">,</span>&nbsp;<span class="ident" id="8339668">nil</span><br>
<span class="lineno"></span><span class="op" id="8339672">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="8339675">func</span>&nbsp;<span class="op" id="8339680">(</span><span class="ident" id="8339681">a</span>&nbsp;<span class="op" id="8339683">*</span><span class="ident" id="8339684">ArrayStruct</span><span class="op" id="8339695">)</span>&nbsp;<span class="ident" id="8339697">GobDecode</span><span class="op" id="8339706">(</span><span class="ident" id="8339707">data</span>&nbsp;<span class="op" id="8339712">[</span><span class="op" id="8339713">]</span><span class="builtintype" id="8339714">byte</span><span class="op" id="8339718">)</span>&nbsp;<span class="builtintype" id="8339720">error</span>&nbsp;<span class="op" id="8339726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339729">if</span>&nbsp;<span class="builtinfunc" id="8339732">len</span><span class="op" id="8339735">(</span><span class="ident" id="8339736">data</span><span class="op" id="8339740">)</span>&nbsp;<span class="op" id="8339742">!=</span>&nbsp;<span class="builtinfunc" id="8339745">len</span><span class="op" id="8339748">(</span><span class="ident" id="8339749">a</span><span class="op" id="8339750">.</span><span class="ident" id="8339751">a</span><span class="op" id="8339752">)</span>&nbsp;<span class="op" id="8339754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339758">return</span>&nbsp;<span class="ident" id="8339765">errors</span><span class="op" id="8339771">.</span><span class="ident" id="8339772">New</span><span class="op" id="8339775">(</span><span class="string" id="8339776">&#34;wrong&nbsp;length&nbsp;in&nbsp;array&nbsp;decode&#34;</span><span class="op" id="8339806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8339809">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8339812">copy</span><span class="op" id="8339816">(</span><span class="ident" id="8339817">a</span><span class="op" id="8339818">.</span><span class="ident" id="8339819">a</span><span class="op" id="8339820">[</span><span class="op" id="8339821">:</span><span class="op" id="8339822">]</span><span class="op" id="8339823">,</span>&nbsp;<span class="ident" id="8339825">data</span><span class="op" id="8339829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339832">return</span>&nbsp;<span class="ident" id="8339839">nil</span><br>
<span class="lineno"></span><span class="op" id="8339843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8339846">func</span>&nbsp;<span class="op" id="8339851">(</span><span class="ident" id="8339852">g</span>&nbsp;<span class="op" id="8339854">*</span><span class="ident" id="8339855">Gobber</span><span class="op" id="8339861">)</span>&nbsp;<span class="ident" id="8339863">GobEncode</span><span class="op" id="8339872">(</span><span class="op" id="8339873">)</span>&nbsp;<span class="op" id="8339875">(</span><span class="op" id="8339876">[</span><span class="op" id="8339877">]</span><span class="builtintype" id="8339878">byte</span><span class="op" id="8339882">,</span>&nbsp;<span class="builtintype" id="8339884">error</span><span class="op" id="8339889">)</span>&nbsp;<span class="op" id="8339891">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339894">return</span>&nbsp;<span class="op" id="8339901">[</span><span class="op" id="8339902">]</span><span class="builtintype" id="8339903">byte</span><span class="op" id="8339907">(</span><span class="ident" id="8339908">fmt</span><span class="op" id="8339911">.</span><span class="ident" id="8339912">Sprintf</span><span class="op" id="8339919">(</span><span class="string" id="8339920">&#34;VALUE=%d&#34;</span><span class="op" id="8339930">,</span>&nbsp;<span class="op" id="8339932">*</span><span class="ident" id="8339933">g</span><span class="op" id="8339934">)</span><span class="op" id="8339935">)</span><span class="op" id="8339936">,</span>&nbsp;<span class="ident" id="8339938">nil</span><br>
<span class="lineno"></span><span class="op" id="8339942">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8339945">func</span>&nbsp;<span class="op" id="8339950">(</span><span class="ident" id="8339951">g</span>&nbsp;<span class="op" id="8339953">*</span><span class="ident" id="8339954">Gobber</span><span class="op" id="8339960">)</span>&nbsp;<span class="ident" id="8339962">GobDecode</span><span class="op" id="8339971">(</span><span class="ident" id="8339972">data</span>&nbsp;<span class="op" id="8339977">[</span><span class="op" id="8339978">]</span><span class="builtintype" id="8339979">byte</span><span class="op" id="8339983">)</span>&nbsp;<span class="builtintype" id="8339985">error</span>&nbsp;<span class="op" id="8339991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8339994">_</span><span class="op" id="8339995">,</span>&nbsp;<span class="ident" id="8339997">err</span>&nbsp;<span class="op" id="8340001">:=</span>&nbsp;<span class="ident" id="8340004">fmt</span><span class="op" id="8340007">.</span><span class="ident" id="8340008">Sscanf</span><span class="op" id="8340014">(</span><span class="builtintype" id="8340015">string</span><span class="op" id="8340021">(</span><span class="ident" id="8340022">data</span><span class="op" id="8340026">)</span><span class="op" id="8340027">,</span>&nbsp;<span class="string" id="8340029">&#34;VALUE=%d&#34;</span><span class="op" id="8340039">,</span>&nbsp;<span class="op" id="8340041">(</span><span class="op" id="8340042">*</span><span class="builtintype" id="8340043">int</span><span class="op" id="8340046">)</span><span class="op" id="8340047">(</span><span class="ident" id="8340048">g</span><span class="op" id="8340049">)</span><span class="op" id="8340050">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340053">return</span>&nbsp;<span class="ident" id="8340060">err</span><br>
<span class="lineno"></span><span class="op" id="8340064">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8340067">func</span>&nbsp;<span class="op" id="8340072">(</span><span class="ident" id="8340073">g</span>&nbsp;<span class="op" id="8340075">*</span><span class="ident" id="8340076">BinaryGobber</span><span class="op" id="8340088">)</span>&nbsp;<span class="ident" id="8340090">MarshalBinary</span><span class="op" id="8340103">(</span><span class="op" id="8340104">)</span>&nbsp;<span class="op" id="8340106">(</span><span class="op" id="8340107">[</span><span class="op" id="8340108">]</span><span class="builtintype" id="8340109">byte</span><span class="op" id="8340113">,</span>&nbsp;<span class="builtintype" id="8340115">error</span><span class="op" id="8340120">)</span>&nbsp;<span class="op" id="8340122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340125">return</span>&nbsp;<span class="op" id="8340132">[</span><span class="op" id="8340133">]</span><span class="builtintype" id="8340134">byte</span><span class="op" id="8340138">(</span><span class="ident" id="8340139">fmt</span><span class="op" id="8340142">.</span><span class="ident" id="8340143">Sprintf</span><span class="op" id="8340150">(</span><span class="string" id="8340151">&#34;VALUE=%d&#34;</span><span class="op" id="8340161">,</span>&nbsp;<span class="op" id="8340163">*</span><span class="ident" id="8340164">g</span><span class="op" id="8340165">)</span><span class="op" id="8340166">)</span><span class="op" id="8340167">,</span>&nbsp;<span class="ident" id="8340169">nil</span><br>
<span class="lineno">115</span><span class="op" id="8340173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8340176">func</span>&nbsp;<span class="op" id="8340181">(</span><span class="ident" id="8340182">g</span>&nbsp;<span class="op" id="8340184">*</span><span class="ident" id="8340185">BinaryGobber</span><span class="op" id="8340197">)</span>&nbsp;<span class="ident" id="8340199">UnmarshalBinary</span><span class="op" id="8340214">(</span><span class="ident" id="8340215">data</span>&nbsp;<span class="op" id="8340220">[</span><span class="op" id="8340221">]</span><span class="builtintype" id="8340222">byte</span><span class="op" id="8340226">)</span>&nbsp;<span class="builtintype" id="8340228">error</span>&nbsp;<span class="op" id="8340234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340237">_</span><span class="op" id="8340238">,</span>&nbsp;<span class="ident" id="8340240">err</span>&nbsp;<span class="op" id="8340244">:=</span>&nbsp;<span class="ident" id="8340247">fmt</span><span class="op" id="8340250">.</span><span class="ident" id="8340251">Sscanf</span><span class="op" id="8340257">(</span><span class="builtintype" id="8340258">string</span><span class="op" id="8340264">(</span><span class="ident" id="8340265">data</span><span class="op" id="8340269">)</span><span class="op" id="8340270">,</span>&nbsp;<span class="string" id="8340272">&#34;VALUE=%d&#34;</span><span class="op" id="8340282">,</span>&nbsp;<span class="op" id="8340284">(</span><span class="op" id="8340285">*</span><span class="builtintype" id="8340286">int</span><span class="op" id="8340289">)</span><span class="op" id="8340290">(</span><span class="ident" id="8340291">g</span><span class="op" id="8340292">)</span><span class="op" id="8340293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340296">return</span>&nbsp;<span class="ident" id="8340303">err</span><br>
<span class="lineno">120</span><span class="op" id="8340307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8340310">func</span>&nbsp;<span class="op" id="8340315">(</span><span class="ident" id="8340316">g</span>&nbsp;<span class="op" id="8340318">*</span><span class="ident" id="8340319">TextGobber</span><span class="op" id="8340329">)</span>&nbsp;<span class="ident" id="8340331">MarshalText</span><span class="op" id="8340342">(</span><span class="op" id="8340343">)</span>&nbsp;<span class="op" id="8340345">(</span><span class="op" id="8340346">[</span><span class="op" id="8340347">]</span><span class="builtintype" id="8340348">byte</span><span class="op" id="8340352">,</span>&nbsp;<span class="builtintype" id="8340354">error</span><span class="op" id="8340359">)</span>&nbsp;<span class="op" id="8340361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340364">return</span>&nbsp;<span class="op" id="8340371">[</span><span class="op" id="8340372">]</span><span class="builtintype" id="8340373">byte</span><span class="op" id="8340377">(</span><span class="ident" id="8340378">fmt</span><span class="op" id="8340381">.</span><span class="ident" id="8340382">Sprintf</span><span class="op" id="8340389">(</span><span class="string" id="8340390">&#34;VALUE=%d&#34;</span><span class="op" id="8340400">,</span>&nbsp;<span class="op" id="8340402">*</span><span class="ident" id="8340403">g</span><span class="op" id="8340404">)</span><span class="op" id="8340405">)</span><span class="op" id="8340406">,</span>&nbsp;<span class="ident" id="8340408">nil</span><br>
<span class="lineno"></span><span class="op" id="8340412">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="8340415">func</span>&nbsp;<span class="op" id="8340420">(</span><span class="ident" id="8340421">g</span>&nbsp;<span class="op" id="8340423">*</span><span class="ident" id="8340424">TextGobber</span><span class="op" id="8340434">)</span>&nbsp;<span class="ident" id="8340436">UnmarshalText</span><span class="op" id="8340449">(</span><span class="ident" id="8340450">data</span>&nbsp;<span class="op" id="8340455">[</span><span class="op" id="8340456">]</span><span class="builtintype" id="8340457">byte</span><span class="op" id="8340461">)</span>&nbsp;<span class="builtintype" id="8340463">error</span>&nbsp;<span class="op" id="8340469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340472">_</span><span class="op" id="8340473">,</span>&nbsp;<span class="ident" id="8340475">err</span>&nbsp;<span class="op" id="8340479">:=</span>&nbsp;<span class="ident" id="8340482">fmt</span><span class="op" id="8340485">.</span><span class="ident" id="8340486">Sscanf</span><span class="op" id="8340492">(</span><span class="builtintype" id="8340493">string</span><span class="op" id="8340499">(</span><span class="ident" id="8340500">data</span><span class="op" id="8340504">)</span><span class="op" id="8340505">,</span>&nbsp;<span class="string" id="8340507">&#34;VALUE=%d&#34;</span><span class="op" id="8340517">,</span>&nbsp;<span class="op" id="8340519">(</span><span class="op" id="8340520">*</span><span class="builtintype" id="8340521">int</span><span class="op" id="8340524">)</span><span class="op" id="8340525">(</span><span class="ident" id="8340526">g</span><span class="op" id="8340527">)</span><span class="op" id="8340528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340531">return</span>&nbsp;<span class="ident" id="8340538">err</span><br>
<span class="lineno"></span><span class="op" id="8340542">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="8340545">func</span>&nbsp;<span class="op" id="8340550">(</span><span class="ident" id="8340551">v</span>&nbsp;<span class="ident" id="8340553">ValueGobber</span><span class="op" id="8340564">)</span>&nbsp;<span class="ident" id="8340566">GobEncode</span><span class="op" id="8340575">(</span><span class="op" id="8340576">)</span>&nbsp;<span class="op" id="8340578">(</span><span class="op" id="8340579">[</span><span class="op" id="8340580">]</span><span class="builtintype" id="8340581">byte</span><span class="op" id="8340585">,</span>&nbsp;<span class="builtintype" id="8340587">error</span><span class="op" id="8340592">)</span>&nbsp;<span class="op" id="8340594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340597">return</span>&nbsp;<span class="op" id="8340604">[</span><span class="op" id="8340605">]</span><span class="builtintype" id="8340606">byte</span><span class="op" id="8340610">(</span><span class="ident" id="8340611">fmt</span><span class="op" id="8340614">.</span><span class="ident" id="8340615">Sprintf</span><span class="op" id="8340622">(</span><span class="string" id="8340623">&#34;VALUE=%s&#34;</span><span class="op" id="8340633">,</span>&nbsp;<span class="ident" id="8340635">v</span><span class="op" id="8340636">)</span><span class="op" id="8340637">)</span><span class="op" id="8340638">,</span>&nbsp;<span class="ident" id="8340640">nil</span><br>
<span class="lineno"></span><span class="op" id="8340644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="8340647">func</span>&nbsp;<span class="op" id="8340652">(</span><span class="ident" id="8340653">v</span>&nbsp;<span class="op" id="8340655">*</span><span class="ident" id="8340656">ValueGobber</span><span class="op" id="8340667">)</span>&nbsp;<span class="ident" id="8340669">GobDecode</span><span class="op" id="8340678">(</span><span class="ident" id="8340679">data</span>&nbsp;<span class="op" id="8340684">[</span><span class="op" id="8340685">]</span><span class="builtintype" id="8340686">byte</span><span class="op" id="8340690">)</span>&nbsp;<span class="builtintype" id="8340692">error</span>&nbsp;<span class="op" id="8340698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340701">_</span><span class="op" id="8340702">,</span>&nbsp;<span class="ident" id="8340704">err</span>&nbsp;<span class="op" id="8340708">:=</span>&nbsp;<span class="ident" id="8340711">fmt</span><span class="op" id="8340714">.</span><span class="ident" id="8340715">Sscanf</span><span class="op" id="8340721">(</span><span class="builtintype" id="8340722">string</span><span class="op" id="8340728">(</span><span class="ident" id="8340729">data</span><span class="op" id="8340733">)</span><span class="op" id="8340734">,</span>&nbsp;<span class="string" id="8340736">&#34;VALUE=%s&#34;</span><span class="op" id="8340746">,</span>&nbsp;<span class="op" id="8340748">(</span><span class="op" id="8340749">*</span><span class="builtintype" id="8340750">string</span><span class="op" id="8340756">)</span><span class="op" id="8340757">(</span><span class="ident" id="8340758">v</span><span class="op" id="8340759">)</span><span class="op" id="8340760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340763">return</span>&nbsp;<span class="ident" id="8340770">err</span><br>
<span class="lineno"></span><span class="op" id="8340774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="8340777">func</span>&nbsp;<span class="op" id="8340782">(</span><span class="ident" id="8340783">v</span>&nbsp;<span class="ident" id="8340785">BinaryValueGobber</span><span class="op" id="8340802">)</span>&nbsp;<span class="ident" id="8340804">MarshalBinary</span><span class="op" id="8340817">(</span><span class="op" id="8340818">)</span>&nbsp;<span class="op" id="8340820">(</span><span class="op" id="8340821">[</span><span class="op" id="8340822">]</span><span class="builtintype" id="8340823">byte</span><span class="op" id="8340827">,</span>&nbsp;<span class="builtintype" id="8340829">error</span><span class="op" id="8340834">)</span>&nbsp;<span class="op" id="8340836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340839">return</span>&nbsp;<span class="op" id="8340846">[</span><span class="op" id="8340847">]</span><span class="builtintype" id="8340848">byte</span><span class="op" id="8340852">(</span><span class="ident" id="8340853">fmt</span><span class="op" id="8340856">.</span><span class="ident" id="8340857">Sprintf</span><span class="op" id="8340864">(</span><span class="string" id="8340865">&#34;VALUE=%s&#34;</span><span class="op" id="8340875">,</span>&nbsp;<span class="ident" id="8340877">v</span><span class="op" id="8340878">)</span><span class="op" id="8340879">)</span><span class="op" id="8340880">,</span>&nbsp;<span class="ident" id="8340882">nil</span><br>
<span class="lineno"></span><span class="op" id="8340886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8340889">func</span>&nbsp;<span class="op" id="8340894">(</span><span class="ident" id="8340895">v</span>&nbsp;<span class="op" id="8340897">*</span><span class="ident" id="8340898">BinaryValueGobber</span><span class="op" id="8340915">)</span>&nbsp;<span class="ident" id="8340917">UnmarshalBinary</span><span class="op" id="8340932">(</span><span class="ident" id="8340933">data</span>&nbsp;<span class="op" id="8340938">[</span><span class="op" id="8340939">]</span><span class="builtintype" id="8340940">byte</span><span class="op" id="8340944">)</span>&nbsp;<span class="builtintype" id="8340946">error</span>&nbsp;<span class="op" id="8340952">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340955">_</span><span class="op" id="8340956">,</span>&nbsp;<span class="ident" id="8340958">err</span>&nbsp;<span class="op" id="8340962">:=</span>&nbsp;<span class="ident" id="8340965">fmt</span><span class="op" id="8340968">.</span><span class="ident" id="8340969">Sscanf</span><span class="op" id="8340975">(</span><span class="builtintype" id="8340976">string</span><span class="op" id="8340982">(</span><span class="ident" id="8340983">data</span><span class="op" id="8340987">)</span><span class="op" id="8340988">,</span>&nbsp;<span class="string" id="8340990">&#34;VALUE=%s&#34;</span><span class="op" id="8341000">,</span>&nbsp;<span class="op" id="8341002">(</span><span class="op" id="8341003">*</span><span class="builtintype" id="8341004">string</span><span class="op" id="8341010">)</span><span class="op" id="8341011">(</span><span class="ident" id="8341012">v</span><span class="op" id="8341013">)</span><span class="op" id="8341014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8341017">return</span>&nbsp;<span class="ident" id="8341024">err</span><br>
<span class="lineno"></span><span class="op" id="8341028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8341031">func</span>&nbsp;<span class="op" id="8341036">(</span><span class="ident" id="8341037">v</span>&nbsp;<span class="ident" id="8341039">TextValueGobber</span><span class="op" id="8341054">)</span>&nbsp;<span class="ident" id="8341056">MarshalText</span><span class="op" id="8341067">(</span><span class="op" id="8341068">)</span>&nbsp;<span class="op" id="8341070">(</span><span class="op" id="8341071">[</span><span class="op" id="8341072">]</span><span class="builtintype" id="8341073">byte</span><span class="op" id="8341077">,</span>&nbsp;<span class="builtintype" id="8341079">error</span><span class="op" id="8341084">)</span>&nbsp;<span class="op" id="8341086">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8341089">return</span>&nbsp;<span class="op" id="8341096">[</span><span class="op" id="8341097">]</span><span class="builtintype" id="8341098">byte</span><span class="op" id="8341102">(</span><span class="ident" id="8341103">fmt</span><span class="op" id="8341106">.</span><span class="ident" id="8341107">Sprintf</span><span class="op" id="8341114">(</span><span class="string" id="8341115">&#34;VALUE=%s&#34;</span><span class="op" id="8341125">,</span>&nbsp;<span class="ident" id="8341127">v</span><span class="op" id="8341128">)</span><span class="op" id="8341129">)</span><span class="op" id="8341130">,</span>&nbsp;<span class="ident" id="8341132">nil</span><br>
<span class="lineno"></span><span class="op" id="8341136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8341139">func</span>&nbsp;<span class="op" id="8341144">(</span><span class="ident" id="8341145">v</span>&nbsp;<span class="op" id="8341147">*</span><span class="ident" id="8341148">TextValueGobber</span><span class="op" id="8341163">)</span>&nbsp;<span class="ident" id="8341165">UnmarshalText</span><span class="op" id="8341178">(</span><span class="ident" id="8341179">data</span>&nbsp;<span class="op" id="8341184">[</span><span class="op" id="8341185">]</span><span class="builtintype" id="8341186">byte</span><span class="op" id="8341190">)</span>&nbsp;<span class="builtintype" id="8341192">error</span>&nbsp;<span class="op" id="8341198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341201">_</span><span class="op" id="8341202">,</span>&nbsp;<span class="ident" id="8341204">err</span>&nbsp;<span class="op" id="8341208">:=</span>&nbsp;<span class="ident" id="8341211">fmt</span><span class="op" id="8341214">.</span><span class="ident" id="8341215">Sscanf</span><span class="op" id="8341221">(</span><span class="builtintype" id="8341222">string</span><span class="op" id="8341228">(</span><span class="ident" id="8341229">data</span><span class="op" id="8341233">)</span><span class="op" id="8341234">,</span>&nbsp;<span class="string" id="8341236">&#34;VALUE=%s&#34;</span><span class="op" id="8341246">,</span>&nbsp;<span class="op" id="8341248">(</span><span class="op" id="8341249">*</span><span class="builtintype" id="8341250">string</span><span class="op" id="8341256">)</span><span class="op" id="8341257">(</span><span class="ident" id="8341258">v</span><span class="op" id="8341259">)</span><span class="op" id="8341260">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8341263">return</span>&nbsp;<span class="ident" id="8341270">err</span><br>
<span class="lineno"></span><span class="op" id="8341274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8341277">//&nbsp;Structs&nbsp;that&nbsp;include&nbsp;GobEncodable&nbsp;fields.</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="8341323">type</span>&nbsp;<span class="ident" id="8341328">GobTest0</span>&nbsp;<span class="keyword" id="8341337">struct</span>&nbsp;<span class="op" id="8341344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341347">X</span>&nbsp;<span class="builtintype" id="8341349">int</span>&nbsp;<span class="comment" id="8341353">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341410">G</span>&nbsp;<span class="op" id="8341412">*</span><span class="ident" id="8341413">ByteStruct</span><br>
<span class="lineno"></span><span class="op" id="8341424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="8341427">type</span>&nbsp;<span class="ident" id="8341432">GobTest1</span>&nbsp;<span class="keyword" id="8341441">struct</span>&nbsp;<span class="op" id="8341448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341451">X</span>&nbsp;<span class="builtintype" id="8341453">int</span>&nbsp;<span class="comment" id="8341457">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341514">G</span>&nbsp;<span class="op" id="8341516">*</span><span class="ident" id="8341517">StringStruct</span><br>
<span class="lineno"></span><span class="op" id="8341530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="8341533">type</span>&nbsp;<span class="ident" id="8341538">GobTest2</span>&nbsp;<span class="keyword" id="8341547">struct</span>&nbsp;<span class="op" id="8341554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341557">X</span>&nbsp;<span class="builtintype" id="8341559">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8341566">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341623">G</span>&nbsp;<span class="builtintype" id="8341625">string</span>&nbsp;<span class="comment" id="8341632">//&nbsp;not&nbsp;a&nbsp;GobEncoder&nbsp;-&nbsp;should&nbsp;give&nbsp;us&nbsp;errors</span><br>
<span class="lineno"></span><span class="op" id="8341676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="8341679">type</span>&nbsp;<span class="ident" id="8341684">GobTest3</span>&nbsp;<span class="keyword" id="8341693">struct</span>&nbsp;<span class="op" id="8341700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341703">X</span>&nbsp;<span class="builtintype" id="8341705">int</span>&nbsp;<span class="comment" id="8341709">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341766">G</span>&nbsp;<span class="op" id="8341768">*</span><span class="ident" id="8341769">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341777">B</span>&nbsp;<span class="op" id="8341779">*</span><span class="ident" id="8341780">BinaryGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341794">T</span>&nbsp;<span class="op" id="8341796">*</span><span class="ident" id="8341797">TextGobber</span><br>
<span class="lineno">180</span><span class="op" id="8341808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8341811">type</span>&nbsp;<span class="ident" id="8341816">GobTest4</span>&nbsp;<span class="keyword" id="8341825">struct</span>&nbsp;<span class="op" id="8341832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341835">X</span>&nbsp;&nbsp;<span class="builtintype" id="8341838">int</span>&nbsp;<span class="comment" id="8341842">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341899">V</span>&nbsp;&nbsp;<span class="ident" id="8341902">ValueGobber</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341915">BV</span>&nbsp;<span class="ident" id="8341918">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341937">TV</span>&nbsp;<span class="ident" id="8341940">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8341956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8341959">type</span>&nbsp;<span class="ident" id="8341964">GobTest5</span>&nbsp;<span class="keyword" id="8341973">struct</span>&nbsp;<span class="op" id="8341980">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341983">X</span>&nbsp;&nbsp;<span class="builtintype" id="8341986">int</span>&nbsp;<span class="comment" id="8341990">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342047">V</span>&nbsp;&nbsp;<span class="op" id="8342050">*</span><span class="ident" id="8342051">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342064">BV</span>&nbsp;<span class="op" id="8342067">*</span><span class="ident" id="8342068">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342087">TV</span>&nbsp;<span class="op" id="8342090">*</span><span class="ident" id="8342091">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8342107">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="8342110">type</span>&nbsp;<span class="ident" id="8342115">GobTest6</span>&nbsp;<span class="keyword" id="8342124">struct</span>&nbsp;<span class="op" id="8342131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342134">X</span>&nbsp;&nbsp;<span class="builtintype" id="8342137">int</span>&nbsp;<span class="comment" id="8342141">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342198">V</span>&nbsp;&nbsp;<span class="ident" id="8342201">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342214">W</span>&nbsp;&nbsp;<span class="op" id="8342217">*</span><span class="ident" id="8342218">ValueGobber</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342231">BV</span>&nbsp;<span class="ident" id="8342234">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342253">BW</span>&nbsp;<span class="op" id="8342256">*</span><span class="ident" id="8342257">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342276">TV</span>&nbsp;<span class="ident" id="8342279">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342296">TW</span>&nbsp;<span class="op" id="8342299">*</span><span class="ident" id="8342300">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8342316">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="8342319">type</span>&nbsp;<span class="ident" id="8342324">GobTest7</span>&nbsp;<span class="keyword" id="8342333">struct</span>&nbsp;<span class="op" id="8342340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342343">X</span>&nbsp;&nbsp;<span class="builtintype" id="8342346">int</span>&nbsp;<span class="comment" id="8342350">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342407">V</span>&nbsp;&nbsp;<span class="op" id="8342410">*</span><span class="ident" id="8342411">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342424">W</span>&nbsp;&nbsp;<span class="ident" id="8342427">ValueGobber</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342440">BV</span>&nbsp;<span class="op" id="8342443">*</span><span class="ident" id="8342444">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342463">BW</span>&nbsp;<span class="ident" id="8342466">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342485">TV</span>&nbsp;<span class="op" id="8342488">*</span><span class="ident" id="8342489">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342506">TW</span>&nbsp;<span class="ident" id="8342509">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8342525">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="8342528">type</span>&nbsp;<span class="ident" id="8342533">GobTestIgnoreEncoder</span>&nbsp;<span class="keyword" id="8342554">struct</span>&nbsp;<span class="op" id="8342561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342564">X</span>&nbsp;<span class="builtintype" id="8342566">int</span>&nbsp;<span class="comment" id="8342570">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span><span class="op" id="8342626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="8342629">type</span>&nbsp;<span class="ident" id="8342634">GobTestValueEncDec</span>&nbsp;<span class="keyword" id="8342653">struct</span>&nbsp;<span class="op" id="8342660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342663">X</span>&nbsp;<span class="builtintype" id="8342665">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8342678">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342735">G</span>&nbsp;<span class="ident" id="8342737">StringStruct</span>&nbsp;<span class="comment" id="8342750">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="8342768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="8342771">type</span>&nbsp;<span class="ident" id="8342776">GobTestIndirectEncDec</span>&nbsp;<span class="keyword" id="8342798">struct</span>&nbsp;<span class="op" id="8342805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342808">X</span>&nbsp;<span class="builtintype" id="8342810">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8342826">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342883">G</span>&nbsp;<span class="op" id="8342885">*</span><span class="op" id="8342886">*</span><span class="op" id="8342887">*</span><span class="ident" id="8342888">StringStruct</span>&nbsp;<span class="comment" id="8342901">//&nbsp;indirections&nbsp;to&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="8342934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="keyword" id="8342937">type</span>&nbsp;<span class="ident" id="8342942">GobTestArrayEncDec</span>&nbsp;<span class="keyword" id="8342961">struct</span>&nbsp;<span class="op" id="8342968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342971">X</span>&nbsp;<span class="builtintype" id="8342973">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8342985">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343042">A</span>&nbsp;<span class="ident" id="8343044">ArrayStruct</span>&nbsp;<span class="comment" id="8343056">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="8343074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="8343077">type</span>&nbsp;<span class="ident" id="8343082">GobTestIndirectArrayEncDec</span>&nbsp;<span class="keyword" id="8343109">struct</span>&nbsp;<span class="op" id="8343116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343119">X</span>&nbsp;<span class="builtintype" id="8343121">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8343136">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343193">A</span>&nbsp;<span class="op" id="8343195">*</span><span class="op" id="8343196">*</span><span class="op" id="8343197">*</span><span class="ident" id="8343198">ArrayStruct</span>&nbsp;<span class="comment" id="8343210">//&nbsp;indirections&nbsp;to&nbsp;a&nbsp;large&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="8343247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="8343250">func</span>&nbsp;<span class="ident" id="8343255">TestGobEncoderField</span><span class="op" id="8343274">(</span><span class="ident" id="8343275">t</span>&nbsp;<span class="op" id="8343277">*</span><span class="ident" id="8343278">testing</span><span class="op" id="8343285">.</span><span class="ident" id="8343286">T</span><span class="op" id="8343287">)</span>&nbsp;<span class="op" id="8343289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343292">b</span>&nbsp;<span class="op" id="8343294">:=</span>&nbsp;<span class="builtinfunc" id="8343297">new</span><span class="op" id="8343300">(</span><span class="ident" id="8343301">bytes</span><span class="op" id="8343306">.</span><span class="ident" id="8343307">Buffer</span><span class="op" id="8343313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8343316">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343354">enc</span>&nbsp;<span class="op" id="8343358">:=</span>&nbsp;<span class="ident" id="8343361">NewEncoder</span><span class="op" id="8343371">(</span><span class="ident" id="8343372">b</span><span class="op" id="8343373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343376">err</span>&nbsp;<span class="op" id="8343380">:=</span>&nbsp;<span class="ident" id="8343383">enc</span><span class="op" id="8343386">.</span><span class="ident" id="8343387">Encode</span><span class="op" id="8343393">(</span><span class="ident" id="8343394">GobTest0</span><span class="op" id="8343402">{</span><span class="num" id="8343403">17</span><span class="op" id="8343405">,</span>&nbsp;<span class="op" id="8343407">&amp;</span><span class="ident" id="8343408">ByteStruct</span><span class="op" id="8343418">{</span><span class="string" id="8343419">&#39;A&#39;</span><span class="op" id="8343422">}</span><span class="op" id="8343423">}</span><span class="op" id="8343424">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8343427">if</span>&nbsp;<span class="ident" id="8343430">err</span>&nbsp;<span class="op" id="8343434">!=</span>&nbsp;<span class="ident" id="8343437">nil</span>&nbsp;<span class="op" id="8343441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343445">t</span><span class="op" id="8343446">.</span><span class="ident" id="8343447">Fatal</span><span class="op" id="8343452">(</span><span class="string" id="8343453">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8343468">,</span>&nbsp;<span class="ident" id="8343470">err</span><span class="op" id="8343473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8343476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343479">dec</span>&nbsp;<span class="op" id="8343483">:=</span>&nbsp;<span class="ident" id="8343486">NewDecoder</span><span class="op" id="8343496">(</span><span class="ident" id="8343497">b</span><span class="op" id="8343498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343501">x</span>&nbsp;<span class="op" id="8343503">:=</span>&nbsp;<span class="builtinfunc" id="8343506">new</span><span class="op" id="8343509">(</span><span class="ident" id="8343510">GobTest0</span><span class="op" id="8343518">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343521">err</span>&nbsp;<span class="op" id="8343525">=</span>&nbsp;<span class="ident" id="8343527">dec</span><span class="op" id="8343530">.</span><span class="ident" id="8343531">Decode</span><span class="op" id="8343537">(</span><span class="ident" id="8343538">x</span><span class="op" id="8343539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8343542">if</span>&nbsp;<span class="ident" id="8343545">err</span>&nbsp;<span class="op" id="8343549">!=</span>&nbsp;<span class="ident" id="8343552">nil</span>&nbsp;<span class="op" id="8343556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343560">t</span><span class="op" id="8343561">.</span><span class="ident" id="8343562">Fatal</span><span class="op" id="8343567">(</span><span class="string" id="8343568">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8343583">,</span>&nbsp;<span class="ident" id="8343585">err</span><span class="op" id="8343588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8343591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8343594">if</span>&nbsp;<span class="ident" id="8343597">x</span><span class="op" id="8343598">.</span><span class="ident" id="8343599">G</span><span class="op" id="8343600">.</span><span class="ident" id="8343601">a</span>&nbsp;<span class="op" id="8343603">!=</span>&nbsp;<span class="string" id="8343606">&#39;A&#39;</span>&nbsp;<span class="op" id="8343610">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343614">t</span><span class="op" id="8343615">.</span><span class="ident" id="8343616">Errorf</span><span class="op" id="8343622">(</span><span class="string" id="8343623">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8343644">,</span>&nbsp;<span class="ident" id="8343646">x</span><span class="op" id="8343647">.</span><span class="ident" id="8343648">G</span><span class="op" id="8343649">.</span><span class="ident" id="8343650">a</span><span class="op" id="8343651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8343654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8343657">//&nbsp;Now&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;not&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343697">b</span><span class="op" id="8343698">.</span><span class="ident" id="8343699">Reset</span><span class="op" id="8343704">(</span><span class="op" id="8343705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343708">gobber</span>&nbsp;<span class="op" id="8343715">:=</span>&nbsp;<span class="ident" id="8343718">Gobber</span><span class="op" id="8343724">(</span><span class="num" id="8343725">23</span><span class="op" id="8343727">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343730">bgobber</span>&nbsp;<span class="op" id="8343738">:=</span>&nbsp;<span class="ident" id="8343741">BinaryGobber</span><span class="op" id="8343753">(</span><span class="num" id="8343754">24</span><span class="op" id="8343756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343759">tgobber</span>&nbsp;<span class="op" id="8343767">:=</span>&nbsp;<span class="ident" id="8343770">TextGobber</span><span class="op" id="8343780">(</span><span class="num" id="8343781">25</span><span class="op" id="8343783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343786">err</span>&nbsp;<span class="op" id="8343790">=</span>&nbsp;<span class="ident" id="8343792">enc</span><span class="op" id="8343795">.</span><span class="ident" id="8343796">Encode</span><span class="op" id="8343802">(</span><span class="ident" id="8343803">GobTest3</span><span class="op" id="8343811">{</span><span class="num" id="8343812">17</span><span class="op" id="8343814">,</span>&nbsp;<span class="op" id="8343816">&amp;</span><span class="ident" id="8343817">gobber</span><span class="op" id="8343823">,</span>&nbsp;<span class="op" id="8343825">&amp;</span><span class="ident" id="8343826">bgobber</span><span class="op" id="8343833">,</span>&nbsp;<span class="op" id="8343835">&amp;</span><span class="ident" id="8343836">tgobber</span><span class="op" id="8343843">}</span><span class="op" id="8343844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8343847">if</span>&nbsp;<span class="ident" id="8343850">err</span>&nbsp;<span class="op" id="8343854">!=</span>&nbsp;<span class="ident" id="8343857">nil</span>&nbsp;<span class="op" id="8343861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343865">t</span><span class="op" id="8343866">.</span><span class="ident" id="8343867">Fatal</span><span class="op" id="8343872">(</span><span class="string" id="8343873">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8343888">,</span>&nbsp;<span class="ident" id="8343890">err</span><span class="op" id="8343893">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8343896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343899">y</span>&nbsp;<span class="op" id="8343901">:=</span>&nbsp;<span class="builtinfunc" id="8343904">new</span><span class="op" id="8343907">(</span><span class="ident" id="8343908">GobTest3</span><span class="op" id="8343916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343919">err</span>&nbsp;<span class="op" id="8343923">=</span>&nbsp;<span class="ident" id="8343925">dec</span><span class="op" id="8343928">.</span><span class="ident" id="8343929">Decode</span><span class="op" id="8343935">(</span><span class="ident" id="8343936">y</span><span class="op" id="8343937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8343940">if</span>&nbsp;<span class="ident" id="8343943">err</span>&nbsp;<span class="op" id="8343947">!=</span>&nbsp;<span class="ident" id="8343950">nil</span>&nbsp;<span class="op" id="8343954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343958">t</span><span class="op" id="8343959">.</span><span class="ident" id="8343960">Fatal</span><span class="op" id="8343965">(</span><span class="string" id="8343966">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8343981">,</span>&nbsp;<span class="ident" id="8343983">err</span><span class="op" id="8343986">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8343989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8343992">if</span>&nbsp;<span class="op" id="8343995">*</span><span class="ident" id="8343996">y</span><span class="op" id="8343997">.</span><span class="ident" id="8343998">G</span>&nbsp;<span class="op" id="8344000">!=</span>&nbsp;<span class="num" id="8344003">23</span>&nbsp;<span class="op" id="8344006">||</span>&nbsp;<span class="op" id="8344009">*</span><span class="ident" id="8344010">y</span><span class="op" id="8344011">.</span><span class="ident" id="8344012">B</span>&nbsp;<span class="op" id="8344014">!=</span>&nbsp;<span class="num" id="8344017">24</span>&nbsp;<span class="op" id="8344020">||</span>&nbsp;<span class="op" id="8344023">*</span><span class="ident" id="8344024">y</span><span class="op" id="8344025">.</span><span class="ident" id="8344026">T</span>&nbsp;<span class="op" id="8344028">!=</span>&nbsp;<span class="num" id="8344031">25</span>&nbsp;<span class="op" id="8344034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344038">t</span><span class="op" id="8344039">.</span><span class="ident" id="8344040">Errorf</span><span class="op" id="8344046">(</span><span class="string" id="8344047">&#34;expected&nbsp;&#39;23&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8344068">,</span>&nbsp;<span class="op" id="8344070">*</span><span class="ident" id="8344071">y</span><span class="op" id="8344072">.</span><span class="ident" id="8344073">G</span><span class="op" id="8344074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344077">}</span><br>
<span class="lineno"></span><span class="op" id="8344079">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="8344082">//&nbsp;Even&nbsp;though&nbsp;the&nbsp;field&nbsp;is&nbsp;a&nbsp;value,&nbsp;we&nbsp;can&nbsp;still&nbsp;take&nbsp;its&nbsp;address</span><br>
<span class="lineno"></span><span class="comment" id="8344149">//&nbsp;and&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;call&nbsp;the&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8344192">func</span>&nbsp;<span class="ident" id="8344197">TestGobEncoderValueField</span><span class="op" id="8344221">(</span><span class="ident" id="8344222">t</span>&nbsp;<span class="op" id="8344224">*</span><span class="ident" id="8344225">testing</span><span class="op" id="8344232">.</span><span class="ident" id="8344233">T</span><span class="op" id="8344234">)</span>&nbsp;<span class="op" id="8344236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344239">b</span>&nbsp;<span class="op" id="8344241">:=</span>&nbsp;<span class="builtinfunc" id="8344244">new</span><span class="op" id="8344247">(</span><span class="ident" id="8344248">bytes</span><span class="op" id="8344253">.</span><span class="ident" id="8344254">Buffer</span><span class="op" id="8344260">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8344263">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344301">enc</span>&nbsp;<span class="op" id="8344305">:=</span>&nbsp;<span class="ident" id="8344308">NewEncoder</span><span class="op" id="8344318">(</span><span class="ident" id="8344319">b</span><span class="op" id="8344320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344323">err</span>&nbsp;<span class="op" id="8344327">:=</span>&nbsp;<span class="ident" id="8344330">enc</span><span class="op" id="8344333">.</span><span class="ident" id="8344334">Encode</span><span class="op" id="8344340">(</span><span class="op" id="8344341">&amp;</span><span class="ident" id="8344342">GobTestValueEncDec</span><span class="op" id="8344360">{</span><span class="num" id="8344361">17</span><span class="op" id="8344363">,</span>&nbsp;<span class="ident" id="8344365">StringStruct</span><span class="op" id="8344377">{</span><span class="string" id="8344378">&#34;HIJKL&#34;</span><span class="op" id="8344385">}</span><span class="op" id="8344386">}</span><span class="op" id="8344387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8344390">if</span>&nbsp;<span class="ident" id="8344393">err</span>&nbsp;<span class="op" id="8344397">!=</span>&nbsp;<span class="ident" id="8344400">nil</span>&nbsp;<span class="op" id="8344404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344408">t</span><span class="op" id="8344409">.</span><span class="ident" id="8344410">Fatal</span><span class="op" id="8344415">(</span><span class="string" id="8344416">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8344431">,</span>&nbsp;<span class="ident" id="8344433">err</span><span class="op" id="8344436">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344442">dec</span>&nbsp;<span class="op" id="8344446">:=</span>&nbsp;<span class="ident" id="8344449">NewDecoder</span><span class="op" id="8344459">(</span><span class="ident" id="8344460">b</span><span class="op" id="8344461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344464">x</span>&nbsp;<span class="op" id="8344466">:=</span>&nbsp;<span class="builtinfunc" id="8344469">new</span><span class="op" id="8344472">(</span><span class="ident" id="8344473">GobTestValueEncDec</span><span class="op" id="8344491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344494">err</span>&nbsp;<span class="op" id="8344498">=</span>&nbsp;<span class="ident" id="8344500">dec</span><span class="op" id="8344503">.</span><span class="ident" id="8344504">Decode</span><span class="op" id="8344510">(</span><span class="ident" id="8344511">x</span><span class="op" id="8344512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8344515">if</span>&nbsp;<span class="ident" id="8344518">err</span>&nbsp;<span class="op" id="8344522">!=</span>&nbsp;<span class="ident" id="8344525">nil</span>&nbsp;<span class="op" id="8344529">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344533">t</span><span class="op" id="8344534">.</span><span class="ident" id="8344535">Fatal</span><span class="op" id="8344540">(</span><span class="string" id="8344541">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8344556">,</span>&nbsp;<span class="ident" id="8344558">err</span><span class="op" id="8344561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8344567">if</span>&nbsp;<span class="ident" id="8344570">x</span><span class="op" id="8344571">.</span><span class="ident" id="8344572">G</span><span class="op" id="8344573">.</span><span class="ident" id="8344574">s</span>&nbsp;<span class="op" id="8344576">!=</span>&nbsp;<span class="string" id="8344579">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="8344587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344591">t</span><span class="op" id="8344592">.</span><span class="ident" id="8344593">Errorf</span><span class="op" id="8344599">(</span><span class="string" id="8344600">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8344625">,</span>&nbsp;<span class="ident" id="8344627">x</span><span class="op" id="8344628">.</span><span class="ident" id="8344629">G</span><span class="op" id="8344630">.</span><span class="ident" id="8344631">s</span><span class="op" id="8344632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344635">}</span><br>
<span class="lineno">295</span><span class="op" id="8344637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8344640">//&nbsp;GobEncode/Decode&nbsp;should&nbsp;work&nbsp;even&nbsp;if&nbsp;the&nbsp;value&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="8344693">//&nbsp;more&nbsp;indirect&nbsp;than&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="8344729">func</span>&nbsp;<span class="ident" id="8344734">TestGobEncoderIndirectField</span><span class="op" id="8344761">(</span><span class="ident" id="8344762">t</span>&nbsp;<span class="op" id="8344764">*</span><span class="ident" id="8344765">testing</span><span class="op" id="8344772">.</span><span class="ident" id="8344773">T</span><span class="op" id="8344774">)</span>&nbsp;<span class="op" id="8344776">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344779">b</span>&nbsp;<span class="op" id="8344781">:=</span>&nbsp;<span class="builtinfunc" id="8344784">new</span><span class="op" id="8344787">(</span><span class="ident" id="8344788">bytes</span><span class="op" id="8344793">.</span><span class="ident" id="8344794">Buffer</span><span class="op" id="8344800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8344803">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344841">enc</span>&nbsp;<span class="op" id="8344845">:=</span>&nbsp;<span class="ident" id="8344848">NewEncoder</span><span class="op" id="8344858">(</span><span class="ident" id="8344859">b</span><span class="op" id="8344860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344863">s</span>&nbsp;<span class="op" id="8344865">:=</span>&nbsp;<span class="op" id="8344868">&amp;</span><span class="ident" id="8344869">StringStruct</span><span class="op" id="8344881">{</span><span class="string" id="8344882">&#34;HIJKL&#34;</span><span class="op" id="8344889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344892">sp</span>&nbsp;<span class="op" id="8344895">:=</span>&nbsp;<span class="op" id="8344898">&amp;</span><span class="ident" id="8344899">s</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344902">err</span>&nbsp;<span class="op" id="8344906">:=</span>&nbsp;<span class="ident" id="8344909">enc</span><span class="op" id="8344912">.</span><span class="ident" id="8344913">Encode</span><span class="op" id="8344919">(</span><span class="ident" id="8344920">GobTestIndirectEncDec</span><span class="op" id="8344941">{</span><span class="num" id="8344942">17</span><span class="op" id="8344944">,</span>&nbsp;<span class="op" id="8344946">&amp;</span><span class="ident" id="8344947">sp</span><span class="op" id="8344949">}</span><span class="op" id="8344950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8344953">if</span>&nbsp;<span class="ident" id="8344956">err</span>&nbsp;<span class="op" id="8344960">!=</span>&nbsp;<span class="ident" id="8344963">nil</span>&nbsp;<span class="op" id="8344967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344971">t</span><span class="op" id="8344972">.</span><span class="ident" id="8344973">Fatal</span><span class="op" id="8344978">(</span><span class="string" id="8344979">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8344994">,</span>&nbsp;<span class="ident" id="8344996">err</span><span class="op" id="8344999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345005">dec</span>&nbsp;<span class="op" id="8345009">:=</span>&nbsp;<span class="ident" id="8345012">NewDecoder</span><span class="op" id="8345022">(</span><span class="ident" id="8345023">b</span><span class="op" id="8345024">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345027">x</span>&nbsp;<span class="op" id="8345029">:=</span>&nbsp;<span class="builtinfunc" id="8345032">new</span><span class="op" id="8345035">(</span><span class="ident" id="8345036">GobTestIndirectEncDec</span><span class="op" id="8345057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345060">err</span>&nbsp;<span class="op" id="8345064">=</span>&nbsp;<span class="ident" id="8345066">dec</span><span class="op" id="8345069">.</span><span class="ident" id="8345070">Decode</span><span class="op" id="8345076">(</span><span class="ident" id="8345077">x</span><span class="op" id="8345078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8345081">if</span>&nbsp;<span class="ident" id="8345084">err</span>&nbsp;<span class="op" id="8345088">!=</span>&nbsp;<span class="ident" id="8345091">nil</span>&nbsp;<span class="op" id="8345095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345099">t</span><span class="op" id="8345100">.</span><span class="ident" id="8345101">Fatal</span><span class="op" id="8345106">(</span><span class="string" id="8345107">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8345122">,</span>&nbsp;<span class="ident" id="8345124">err</span><span class="op" id="8345127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345130">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8345133">if</span>&nbsp;<span class="op" id="8345136">(</span><span class="op" id="8345137">*</span><span class="op" id="8345138">*</span><span class="op" id="8345139">*</span><span class="ident" id="8345140">x</span><span class="op" id="8345141">.</span><span class="ident" id="8345142">G</span><span class="op" id="8345143">)</span><span class="op" id="8345144">.</span><span class="ident" id="8345145">s</span>&nbsp;<span class="op" id="8345147">!=</span>&nbsp;<span class="string" id="8345150">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="8345158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345162">t</span><span class="op" id="8345163">.</span><span class="ident" id="8345164">Errorf</span><span class="op" id="8345170">(</span><span class="string" id="8345171">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8345196">,</span>&nbsp;<span class="op" id="8345198">(</span><span class="op" id="8345199">*</span><span class="op" id="8345200">*</span><span class="op" id="8345201">*</span><span class="ident" id="8345202">x</span><span class="op" id="8345203">.</span><span class="ident" id="8345204">G</span><span class="op" id="8345205">)</span><span class="op" id="8345206">.</span><span class="ident" id="8345207">s</span><span class="op" id="8345208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345211">}</span><br>
<span class="lineno"></span><span class="op" id="8345213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="8345216">//&nbsp;Test&nbsp;with&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8345257">func</span>&nbsp;<span class="ident" id="8345262">TestGobEncoderArrayField</span><span class="op" id="8345286">(</span><span class="ident" id="8345287">t</span>&nbsp;<span class="op" id="8345289">*</span><span class="ident" id="8345290">testing</span><span class="op" id="8345297">.</span><span class="ident" id="8345298">T</span><span class="op" id="8345299">)</span>&nbsp;<span class="op" id="8345301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345304">b</span>&nbsp;<span class="op" id="8345306">:=</span>&nbsp;<span class="builtinfunc" id="8345309">new</span><span class="op" id="8345312">(</span><span class="ident" id="8345313">bytes</span><span class="op" id="8345318">.</span><span class="ident" id="8345319">Buffer</span><span class="op" id="8345325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345328">enc</span>&nbsp;<span class="op" id="8345332">:=</span>&nbsp;<span class="ident" id="8345335">NewEncoder</span><span class="op" id="8345345">(</span><span class="ident" id="8345346">b</span><span class="op" id="8345347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8345350">var</span>&nbsp;<span class="ident" id="8345354">a</span>&nbsp;<span class="ident" id="8345356">GobTestArrayEncDec</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345376">a</span><span class="op" id="8345377">.</span><span class="ident" id="8345378">X</span>&nbsp;<span class="op" id="8345380">=</span>&nbsp;<span class="num" id="8345382">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8345386">for</span>&nbsp;<span class="ident" id="8345390">i</span>&nbsp;<span class="op" id="8345392">:=</span>&nbsp;<span class="keyword" id="8345395">range</span>&nbsp;<span class="ident" id="8345401">a</span><span class="op" id="8345402">.</span><span class="ident" id="8345403">A</span><span class="op" id="8345404">.</span><span class="ident" id="8345405">a</span>&nbsp;<span class="op" id="8345407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345411">a</span><span class="op" id="8345412">.</span><span class="ident" id="8345413">A</span><span class="op" id="8345414">.</span><span class="ident" id="8345415">a</span><span class="op" id="8345416">[</span><span class="ident" id="8345417">i</span><span class="op" id="8345418">]</span>&nbsp;<span class="op" id="8345420">=</span>&nbsp;<span class="builtintype" id="8345422">byte</span><span class="op" id="8345426">(</span><span class="ident" id="8345427">i</span><span class="op" id="8345428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345434">err</span>&nbsp;<span class="op" id="8345438">:=</span>&nbsp;<span class="ident" id="8345441">enc</span><span class="op" id="8345444">.</span><span class="ident" id="8345445">Encode</span><span class="op" id="8345451">(</span><span class="op" id="8345452">&amp;</span><span class="ident" id="8345453">a</span><span class="op" id="8345454">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8345457">if</span>&nbsp;<span class="ident" id="8345460">err</span>&nbsp;<span class="op" id="8345464">!=</span>&nbsp;<span class="ident" id="8345467">nil</span>&nbsp;<span class="op" id="8345471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345475">t</span><span class="op" id="8345476">.</span><span class="ident" id="8345477">Fatal</span><span class="op" id="8345482">(</span><span class="string" id="8345483">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8345498">,</span>&nbsp;<span class="ident" id="8345500">err</span><span class="op" id="8345503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345509">dec</span>&nbsp;<span class="op" id="8345513">:=</span>&nbsp;<span class="ident" id="8345516">NewDecoder</span><span class="op" id="8345526">(</span><span class="ident" id="8345527">b</span><span class="op" id="8345528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345531">x</span>&nbsp;<span class="op" id="8345533">:=</span>&nbsp;<span class="builtinfunc" id="8345536">new</span><span class="op" id="8345539">(</span><span class="ident" id="8345540">GobTestArrayEncDec</span><span class="op" id="8345558">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345561">err</span>&nbsp;<span class="op" id="8345565">=</span>&nbsp;<span class="ident" id="8345567">dec</span><span class="op" id="8345570">.</span><span class="ident" id="8345571">Decode</span><span class="op" id="8345577">(</span><span class="ident" id="8345578">x</span><span class="op" id="8345579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8345582">if</span>&nbsp;<span class="ident" id="8345585">err</span>&nbsp;<span class="op" id="8345589">!=</span>&nbsp;<span class="ident" id="8345592">nil</span>&nbsp;<span class="op" id="8345596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345600">t</span><span class="op" id="8345601">.</span><span class="ident" id="8345602">Fatal</span><span class="op" id="8345607">(</span><span class="string" id="8345608">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8345623">,</span>&nbsp;<span class="ident" id="8345625">err</span><span class="op" id="8345628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8345634">for</span>&nbsp;<span class="ident" id="8345638">i</span><span class="op" id="8345639">,</span>&nbsp;<span class="ident" id="8345641">v</span>&nbsp;<span class="op" id="8345643">:=</span>&nbsp;<span class="keyword" id="8345646">range</span>&nbsp;<span class="ident" id="8345652">x</span><span class="op" id="8345653">.</span><span class="ident" id="8345654">A</span><span class="op" id="8345655">.</span><span class="ident" id="8345656">a</span>&nbsp;<span class="op" id="8345658">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8345662">if</span>&nbsp;<span class="ident" id="8345665">v</span>&nbsp;<span class="op" id="8345667">!=</span>&nbsp;<span class="builtintype" id="8345670">byte</span><span class="op" id="8345674">(</span><span class="ident" id="8345675">i</span><span class="op" id="8345676">)</span>&nbsp;<span class="op" id="8345678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345683">t</span><span class="op" id="8345684">.</span><span class="ident" id="8345685">Errorf</span><span class="op" id="8345691">(</span><span class="string" id="8345692">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="8345712">,</span>&nbsp;<span class="builtintype" id="8345714">byte</span><span class="op" id="8345718">(</span><span class="ident" id="8345719">i</span><span class="op" id="8345720">)</span><span class="op" id="8345721">,</span>&nbsp;<span class="ident" id="8345723">v</span><span class="op" id="8345724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8345729">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345740">}</span><br>
<span class="lineno">345</span><span class="op" id="8345742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8345745">//&nbsp;Test&nbsp;an&nbsp;indirection&nbsp;to&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8345799">func</span>&nbsp;<span class="ident" id="8345804">TestGobEncoderIndirectArrayField</span><span class="op" id="8345836">(</span><span class="ident" id="8345837">t</span>&nbsp;<span class="op" id="8345839">*</span><span class="ident" id="8345840">testing</span><span class="op" id="8345847">.</span><span class="ident" id="8345848">T</span><span class="op" id="8345849">)</span>&nbsp;<span class="op" id="8345851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345854">b</span>&nbsp;<span class="op" id="8345856">:=</span>&nbsp;<span class="builtinfunc" id="8345859">new</span><span class="op" id="8345862">(</span><span class="ident" id="8345863">bytes</span><span class="op" id="8345868">.</span><span class="ident" id="8345869">Buffer</span><span class="op" id="8345875">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345878">enc</span>&nbsp;<span class="op" id="8345882">:=</span>&nbsp;<span class="ident" id="8345885">NewEncoder</span><span class="op" id="8345895">(</span><span class="ident" id="8345896">b</span><span class="op" id="8345897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8345900">var</span>&nbsp;<span class="ident" id="8345904">a</span>&nbsp;<span class="ident" id="8345906">GobTestIndirectArrayEncDec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345934">a</span><span class="op" id="8345935">.</span><span class="ident" id="8345936">X</span>&nbsp;<span class="op" id="8345938">=</span>&nbsp;<span class="num" id="8345940">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8345944">var</span>&nbsp;<span class="ident" id="8345948">array</span>&nbsp;<span class="ident" id="8345954">ArrayStruct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345967">ap</span>&nbsp;<span class="op" id="8345970">:=</span>&nbsp;<span class="op" id="8345973">&amp;</span><span class="ident" id="8345974">array</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345981">app</span>&nbsp;<span class="op" id="8345985">:=</span>&nbsp;<span class="op" id="8345988">&amp;</span><span class="ident" id="8345989">ap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345993">a</span><span class="op" id="8345994">.</span><span class="ident" id="8345995">A</span>&nbsp;<span class="op" id="8345997">=</span>&nbsp;<span class="op" id="8345999">&amp;</span><span class="ident" id="8346000">app</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8346005">for</span>&nbsp;<span class="ident" id="8346009">i</span>&nbsp;<span class="op" id="8346011">:=</span>&nbsp;<span class="keyword" id="8346014">range</span>&nbsp;<span class="ident" id="8346020">array</span><span class="op" id="8346025">.</span><span class="ident" id="8346026">a</span>&nbsp;<span class="op" id="8346028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346032">array</span><span class="op" id="8346037">.</span><span class="ident" id="8346038">a</span><span class="op" id="8346039">[</span><span class="ident" id="8346040">i</span><span class="op" id="8346041">]</span>&nbsp;<span class="op" id="8346043">=</span>&nbsp;<span class="builtintype" id="8346045">byte</span><span class="op" id="8346049">(</span><span class="ident" id="8346050">i</span><span class="op" id="8346051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8346054">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346057">err</span>&nbsp;<span class="op" id="8346061">:=</span>&nbsp;<span class="ident" id="8346064">enc</span><span class="op" id="8346067">.</span><span class="ident" id="8346068">Encode</span><span class="op" id="8346074">(</span><span class="ident" id="8346075">a</span><span class="op" id="8346076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8346079">if</span>&nbsp;<span class="ident" id="8346082">err</span>&nbsp;<span class="op" id="8346086">!=</span>&nbsp;<span class="ident" id="8346089">nil</span>&nbsp;<span class="op" id="8346093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346097">t</span><span class="op" id="8346098">.</span><span class="ident" id="8346099">Fatal</span><span class="op" id="8346104">(</span><span class="string" id="8346105">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8346120">,</span>&nbsp;<span class="ident" id="8346122">err</span><span class="op" id="8346125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8346128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346131">dec</span>&nbsp;<span class="op" id="8346135">:=</span>&nbsp;<span class="ident" id="8346138">NewDecoder</span><span class="op" id="8346148">(</span><span class="ident" id="8346149">b</span><span class="op" id="8346150">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346153">x</span>&nbsp;<span class="op" id="8346155">:=</span>&nbsp;<span class="builtinfunc" id="8346158">new</span><span class="op" id="8346161">(</span><span class="ident" id="8346162">GobTestIndirectArrayEncDec</span><span class="op" id="8346188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346191">err</span>&nbsp;<span class="op" id="8346195">=</span>&nbsp;<span class="ident" id="8346197">dec</span><span class="op" id="8346200">.</span><span class="ident" id="8346201">Decode</span><span class="op" id="8346207">(</span><span class="ident" id="8346208">x</span><span class="op" id="8346209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8346212">if</span>&nbsp;<span class="ident" id="8346215">err</span>&nbsp;<span class="op" id="8346219">!=</span>&nbsp;<span class="ident" id="8346222">nil</span>&nbsp;<span class="op" id="8346226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346230">t</span><span class="op" id="8346231">.</span><span class="ident" id="8346232">Fatal</span><span class="op" id="8346237">(</span><span class="string" id="8346238">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8346253">,</span>&nbsp;<span class="ident" id="8346255">err</span><span class="op" id="8346258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8346261">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8346264">for</span>&nbsp;<span class="ident" id="8346268">i</span><span class="op" id="8346269">,</span>&nbsp;<span class="ident" id="8346271">v</span>&nbsp;<span class="op" id="8346273">:=</span>&nbsp;<span class="keyword" id="8346276">range</span>&nbsp;<span class="op" id="8346282">(</span><span class="op" id="8346283">*</span><span class="op" id="8346284">*</span><span class="op" id="8346285">*</span><span class="ident" id="8346286">x</span><span class="op" id="8346287">.</span><span class="ident" id="8346288">A</span><span class="op" id="8346289">)</span><span class="op" id="8346290">.</span><span class="ident" id="8346291">a</span>&nbsp;<span class="op" id="8346293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8346297">if</span>&nbsp;<span class="ident" id="8346300">v</span>&nbsp;<span class="op" id="8346302">!=</span>&nbsp;<span class="builtintype" id="8346305">byte</span><span class="op" id="8346309">(</span><span class="ident" id="8346310">i</span><span class="op" id="8346311">)</span>&nbsp;<span class="op" id="8346313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346318">t</span><span class="op" id="8346319">.</span><span class="ident" id="8346320">Errorf</span><span class="op" id="8346326">(</span><span class="string" id="8346327">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="8346347">,</span>&nbsp;<span class="builtintype" id="8346349">byte</span><span class="op" id="8346353">(</span><span class="ident" id="8346354">i</span><span class="op" id="8346355">)</span><span class="op" id="8346356">,</span>&nbsp;<span class="ident" id="8346358">v</span><span class="op" id="8346359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8346364">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8346372">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8346375">}</span><br>
<span class="lineno"></span><span class="op" id="8346377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8346380">//&nbsp;As&nbsp;long&nbsp;as&nbsp;the&nbsp;fields&nbsp;have&nbsp;the&nbsp;same&nbsp;name&nbsp;and&nbsp;implement&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="8346442">//&nbsp;interface,&nbsp;we&nbsp;can&nbsp;cross-connect&nbsp;them.&nbsp;&nbsp;Not&nbsp;sure&nbsp;it&#39;s&nbsp;useful</span><br>
<span class="lineno">380</span><span class="comment" id="8346505">//&nbsp;and&nbsp;may&nbsp;even&nbsp;be&nbsp;bad&nbsp;but&nbsp;it&nbsp;works&nbsp;and&nbsp;it&#39;s&nbsp;hard&nbsp;to&nbsp;prevent</span><br>
<span class="lineno"></span><span class="comment" id="8346566">//&nbsp;without&nbsp;exposing&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;object,&nbsp;which&nbsp;would</span><br>
<span class="lineno"></span><span class="comment" id="8346626">//&nbsp;defeat&nbsp;the&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="keyword" id="8346649">func</span>&nbsp;<span class="ident" id="8346654">TestGobEncoderFieldsOfDifferentType</span><span class="op" id="8346689">(</span><span class="ident" id="8346690">t</span>&nbsp;<span class="op" id="8346692">*</span><span class="ident" id="8346693">testing</span><span class="op" id="8346700">.</span><span class="ident" id="8346701">T</span><span class="op" id="8346702">)</span>&nbsp;<span class="op" id="8346704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8346707">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346751">b</span>&nbsp;<span class="op" id="8346753">:=</span>&nbsp;<span class="builtinfunc" id="8346756">new</span><span class="op" id="8346759">(</span><span class="ident" id="8346760">bytes</span><span class="op" id="8346765">.</span><span class="ident" id="8346766">Buffer</span><span class="op" id="8346772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346775">enc</span>&nbsp;<span class="op" id="8346779">:=</span>&nbsp;<span class="ident" id="8346782">NewEncoder</span><span class="op" id="8346792">(</span><span class="ident" id="8346793">b</span><span class="op" id="8346794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346797">err</span>&nbsp;<span class="op" id="8346801">:=</span>&nbsp;<span class="ident" id="8346804">enc</span><span class="op" id="8346807">.</span><span class="ident" id="8346808">Encode</span><span class="op" id="8346814">(</span><span class="ident" id="8346815">GobTest1</span><span class="op" id="8346823">{</span><span class="num" id="8346824">17</span><span class="op" id="8346826">,</span>&nbsp;<span class="op" id="8346828">&amp;</span><span class="ident" id="8346829">StringStruct</span><span class="op" id="8346841">{</span><span class="string" id="8346842">&#34;ABC&#34;</span><span class="op" id="8346847">}</span><span class="op" id="8346848">}</span><span class="op" id="8346849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8346852">if</span>&nbsp;<span class="ident" id="8346855">err</span>&nbsp;<span class="op" id="8346859">!=</span>&nbsp;<span class="ident" id="8346862">nil</span>&nbsp;<span class="op" id="8346866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346870">t</span><span class="op" id="8346871">.</span><span class="ident" id="8346872">Fatal</span><span class="op" id="8346877">(</span><span class="string" id="8346878">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8346893">,</span>&nbsp;<span class="ident" id="8346895">err</span><span class="op" id="8346898">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8346901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346904">dec</span>&nbsp;<span class="op" id="8346908">:=</span>&nbsp;<span class="ident" id="8346911">NewDecoder</span><span class="op" id="8346921">(</span><span class="ident" id="8346922">b</span><span class="op" id="8346923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346926">x</span>&nbsp;<span class="op" id="8346928">:=</span>&nbsp;<span class="builtinfunc" id="8346931">new</span><span class="op" id="8346934">(</span><span class="ident" id="8346935">GobTest0</span><span class="op" id="8346943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346946">err</span>&nbsp;<span class="op" id="8346950">=</span>&nbsp;<span class="ident" id="8346952">dec</span><span class="op" id="8346955">.</span><span class="ident" id="8346956">Decode</span><span class="op" id="8346962">(</span><span class="ident" id="8346963">x</span><span class="op" id="8346964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8346967">if</span>&nbsp;<span class="ident" id="8346970">err</span>&nbsp;<span class="op" id="8346974">!=</span>&nbsp;<span class="ident" id="8346977">nil</span>&nbsp;<span class="op" id="8346981">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346985">t</span><span class="op" id="8346986">.</span><span class="ident" id="8346987">Fatal</span><span class="op" id="8346992">(</span><span class="string" id="8346993">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8347008">,</span>&nbsp;<span class="ident" id="8347010">err</span><span class="op" id="8347013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8347019">if</span>&nbsp;<span class="ident" id="8347022">x</span><span class="op" id="8347023">.</span><span class="ident" id="8347024">G</span><span class="op" id="8347025">.</span><span class="ident" id="8347026">a</span>&nbsp;<span class="op" id="8347028">!=</span>&nbsp;<span class="string" id="8347031">&#39;A&#39;</span>&nbsp;<span class="op" id="8347035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347039">t</span><span class="op" id="8347040">.</span><span class="ident" id="8347041">Errorf</span><span class="op" id="8347047">(</span><span class="string" id="8347048">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8347069">,</span>&nbsp;<span class="ident" id="8347071">x</span><span class="op" id="8347072">.</span><span class="ident" id="8347073">G</span><span class="op" id="8347074">.</span><span class="ident" id="8347075">a</span><span class="op" id="8347076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347079">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8347082">//&nbsp;now&nbsp;the&nbsp;other&nbsp;direction,&nbsp;byte&nbsp;in&nbsp;field&nbsp;to&nbsp;string&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347144">b</span><span class="op" id="8347145">.</span><span class="ident" id="8347146">Reset</span><span class="op" id="8347151">(</span><span class="op" id="8347152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347155">err</span>&nbsp;<span class="op" id="8347159">=</span>&nbsp;<span class="ident" id="8347161">enc</span><span class="op" id="8347164">.</span><span class="ident" id="8347165">Encode</span><span class="op" id="8347171">(</span><span class="ident" id="8347172">GobTest0</span><span class="op" id="8347180">{</span><span class="num" id="8347181">17</span><span class="op" id="8347183">,</span>&nbsp;<span class="op" id="8347185">&amp;</span><span class="ident" id="8347186">ByteStruct</span><span class="op" id="8347196">{</span><span class="string" id="8347197">&#39;X&#39;</span><span class="op" id="8347200">}</span><span class="op" id="8347201">}</span><span class="op" id="8347202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8347205">if</span>&nbsp;<span class="ident" id="8347208">err</span>&nbsp;<span class="op" id="8347212">!=</span>&nbsp;<span class="ident" id="8347215">nil</span>&nbsp;<span class="op" id="8347219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347223">t</span><span class="op" id="8347224">.</span><span class="ident" id="8347225">Fatal</span><span class="op" id="8347230">(</span><span class="string" id="8347231">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8347246">,</span>&nbsp;<span class="ident" id="8347248">err</span><span class="op" id="8347251">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347257">y</span>&nbsp;<span class="op" id="8347259">:=</span>&nbsp;<span class="builtinfunc" id="8347262">new</span><span class="op" id="8347265">(</span><span class="ident" id="8347266">GobTest1</span><span class="op" id="8347274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347277">err</span>&nbsp;<span class="op" id="8347281">=</span>&nbsp;<span class="ident" id="8347283">dec</span><span class="op" id="8347286">.</span><span class="ident" id="8347287">Decode</span><span class="op" id="8347293">(</span><span class="ident" id="8347294">y</span><span class="op" id="8347295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8347298">if</span>&nbsp;<span class="ident" id="8347301">err</span>&nbsp;<span class="op" id="8347305">!=</span>&nbsp;<span class="ident" id="8347308">nil</span>&nbsp;<span class="op" id="8347312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347316">t</span><span class="op" id="8347317">.</span><span class="ident" id="8347318">Fatal</span><span class="op" id="8347323">(</span><span class="string" id="8347324">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8347339">,</span>&nbsp;<span class="ident" id="8347341">err</span><span class="op" id="8347344">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8347350">if</span>&nbsp;<span class="ident" id="8347353">y</span><span class="op" id="8347354">.</span><span class="ident" id="8347355">G</span><span class="op" id="8347356">.</span><span class="ident" id="8347357">s</span>&nbsp;<span class="op" id="8347359">!=</span>&nbsp;<span class="string" id="8347362">&#34;XYZ&#34;</span>&nbsp;<span class="op" id="8347368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347372">t</span><span class="op" id="8347373">.</span><span class="ident" id="8347374">Fatalf</span><span class="op" id="8347380">(</span><span class="string" id="8347381">&#34;expected&nbsp;`XYZ`&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8347404">,</span>&nbsp;<span class="ident" id="8347406">y</span><span class="op" id="8347407">.</span><span class="ident" id="8347408">G</span><span class="op" id="8347409">.</span><span class="ident" id="8347410">s</span><span class="op" id="8347411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347414">}</span><br>
<span class="lineno"></span><span class="op" id="8347416">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="comment" id="8347419">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;encode&nbsp;a&nbsp;value&nbsp;and&nbsp;decode&nbsp;into&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="8347481">func</span>&nbsp;<span class="ident" id="8347486">TestGobEncoderValueEncoder</span><span class="op" id="8347512">(</span><span class="ident" id="8347513">t</span>&nbsp;<span class="op" id="8347515">*</span><span class="ident" id="8347516">testing</span><span class="op" id="8347523">.</span><span class="ident" id="8347524">T</span><span class="op" id="8347525">)</span>&nbsp;<span class="op" id="8347527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8347530">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347574">b</span>&nbsp;<span class="op" id="8347576">:=</span>&nbsp;<span class="builtinfunc" id="8347579">new</span><span class="op" id="8347582">(</span><span class="ident" id="8347583">bytes</span><span class="op" id="8347588">.</span><span class="ident" id="8347589">Buffer</span><span class="op" id="8347595">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347598">enc</span>&nbsp;<span class="op" id="8347602">:=</span>&nbsp;<span class="ident" id="8347605">NewEncoder</span><span class="op" id="8347615">(</span><span class="ident" id="8347616">b</span><span class="op" id="8347617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347620">err</span>&nbsp;<span class="op" id="8347624">:=</span>&nbsp;<span class="ident" id="8347627">enc</span><span class="op" id="8347630">.</span><span class="ident" id="8347631">Encode</span><span class="op" id="8347637">(</span><span class="ident" id="8347638">GobTest4</span><span class="op" id="8347646">{</span><span class="num" id="8347647">17</span><span class="op" id="8347649">,</span>&nbsp;<span class="ident" id="8347651">ValueGobber</span><span class="op" id="8347662">(</span><span class="string" id="8347663">&#34;hello&#34;</span><span class="op" id="8347670">)</span><span class="op" id="8347671">,</span>&nbsp;<span class="ident" id="8347673">BinaryValueGobber</span><span class="op" id="8347690">(</span><span class="string" id="8347691">&#34;&#34;</span><span class="op" id="8347709">)</span><span class="op" id="8347710">,</span>&nbsp;<span class="ident" id="8347712">TextValueGobber</span><span class="op" id="8347727">(</span><span class="string" id="8347728">&#34;&#34;</span><span class="op" id="8347745">)</span><span class="op" id="8347746">}</span><span class="op" id="8347747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8347750">if</span>&nbsp;<span class="ident" id="8347753">err</span>&nbsp;<span class="op" id="8347757">!=</span>&nbsp;<span class="ident" id="8347760">nil</span>&nbsp;<span class="op" id="8347764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347768">t</span><span class="op" id="8347769">.</span><span class="ident" id="8347770">Fatal</span><span class="op" id="8347775">(</span><span class="string" id="8347776">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8347791">,</span>&nbsp;<span class="ident" id="8347793">err</span><span class="op" id="8347796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347799">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347802">dec</span>&nbsp;<span class="op" id="8347806">:=</span>&nbsp;<span class="ident" id="8347809">NewDecoder</span><span class="op" id="8347819">(</span><span class="ident" id="8347820">b</span><span class="op" id="8347821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347824">x</span>&nbsp;<span class="op" id="8347826">:=</span>&nbsp;<span class="builtinfunc" id="8347829">new</span><span class="op" id="8347832">(</span><span class="ident" id="8347833">GobTest5</span><span class="op" id="8347841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347844">err</span>&nbsp;<span class="op" id="8347848">=</span>&nbsp;<span class="ident" id="8347850">dec</span><span class="op" id="8347853">.</span><span class="ident" id="8347854">Decode</span><span class="op" id="8347860">(</span><span class="ident" id="8347861">x</span><span class="op" id="8347862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8347865">if</span>&nbsp;<span class="ident" id="8347868">err</span>&nbsp;<span class="op" id="8347872">!=</span>&nbsp;<span class="ident" id="8347875">nil</span>&nbsp;<span class="op" id="8347879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347883">t</span><span class="op" id="8347884">.</span><span class="ident" id="8347885">Fatal</span><span class="op" id="8347890">(</span><span class="string" id="8347891">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8347906">,</span>&nbsp;<span class="ident" id="8347908">err</span><span class="op" id="8347911">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8347917">if</span>&nbsp;<span class="op" id="8347920">*</span><span class="ident" id="8347921">x</span><span class="op" id="8347922">.</span><span class="ident" id="8347923">V</span>&nbsp;<span class="op" id="8347925">!=</span>&nbsp;<span class="string" id="8347928">&#34;hello&#34;</span>&nbsp;<span class="op" id="8347936">||</span>&nbsp;<span class="op" id="8347939">*</span><span class="ident" id="8347940">x</span><span class="op" id="8347941">.</span><span class="ident" id="8347942">BV</span>&nbsp;<span class="op" id="8347945">!=</span>&nbsp;<span class="string" id="8347948">&#34;&#34;</span>&nbsp;<span class="op" id="8347967">||</span>&nbsp;<span class="op" id="8347970">*</span><span class="ident" id="8347971">x</span><span class="op" id="8347972">.</span><span class="ident" id="8347973">TV</span>&nbsp;<span class="op" id="8347976">!=</span>&nbsp;<span class="string" id="8347979">&#34;&#34;</span>&nbsp;<span class="op" id="8347997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348001">t</span><span class="op" id="8348002">.</span><span class="ident" id="8348003">Errorf</span><span class="op" id="8348009">(</span><span class="string" id="8348010">&#34;expected&nbsp;`hello`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8348035">,</span>&nbsp;<span class="op" id="8348037">*</span><span class="ident" id="8348038">x</span><span class="op" id="8348039">.</span><span class="ident" id="8348040">V</span><span class="op" id="8348041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8348044">}</span><br>
<span class="lineno"></span><span class="op" id="8348046">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="8348049">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;value&nbsp;then&nbsp;a&nbsp;pointer&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="8348117">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.&nbsp;&nbsp;Bug&nbsp;4647.</span><br>
<span class="lineno"></span><span class="keyword" id="8348158">func</span>&nbsp;<span class="ident" id="8348163">TestGobEncoderValueThenPointer</span><span class="op" id="8348193">(</span><span class="ident" id="8348194">t</span>&nbsp;<span class="op" id="8348196">*</span><span class="ident" id="8348197">testing</span><span class="op" id="8348204">.</span><span class="ident" id="8348205">T</span><span class="op" id="8348206">)</span>&nbsp;<span class="op" id="8348208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348211">v</span>&nbsp;<span class="op" id="8348213">:=</span>&nbsp;<span class="ident" id="8348216">ValueGobber</span><span class="op" id="8348227">(</span><span class="string" id="8348228">&#34;forty-two&#34;</span><span class="op" id="8348239">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348242">w</span>&nbsp;<span class="op" id="8348244">:=</span>&nbsp;<span class="ident" id="8348247">ValueGobber</span><span class="op" id="8348258">(</span><span class="string" id="8348259">&#34;six-by-nine&#34;</span><span class="op" id="8348272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348275">bv</span>&nbsp;<span class="op" id="8348278">:=</span>&nbsp;<span class="ident" id="8348281">BinaryValueGobber</span><span class="op" id="8348298">(</span><span class="string" id="8348299">&#34;1nanocentury&#34;</span><span class="op" id="8348313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348316">bw</span>&nbsp;<span class="op" id="8348319">:=</span>&nbsp;<span class="ident" id="8348322">BinaryValueGobber</span><span class="op" id="8348339">(</span><span class="string" id="8348340">&#34;seconds&#34;</span><span class="op" id="8348351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348354">tv</span>&nbsp;<span class="op" id="8348357">:=</span>&nbsp;<span class="ident" id="8348360">TextValueGobber</span><span class="op" id="8348375">(</span><span class="string" id="8348376">&#34;gravitationalacceleration&#34;</span><span class="op" id="8348403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348406">tw</span>&nbsp;<span class="op" id="8348409">:=</span>&nbsp;<span class="ident" id="8348412">TextValueGobber</span><span class="op" id="8348427">(</span><span class="string" id="8348428">&#34;ft/s&#34;</span><span class="op" id="8348440">)</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8348444">//&nbsp;this&nbsp;was&nbsp;a&nbsp;bug:&nbsp;encoding&nbsp;a&nbsp;GobEncoder&nbsp;by&nbsp;value&nbsp;before&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8348515">//&nbsp;pointer&nbsp;would&nbsp;cause&nbsp;duplicate&nbsp;type&nbsp;definitions&nbsp;to&nbsp;be&nbsp;sent.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348579">b</span>&nbsp;<span class="op" id="8348581">:=</span>&nbsp;<span class="builtinfunc" id="8348584">new</span><span class="op" id="8348587">(</span><span class="ident" id="8348588">bytes</span><span class="op" id="8348593">.</span><span class="ident" id="8348594">Buffer</span><span class="op" id="8348600">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348603">enc</span>&nbsp;<span class="op" id="8348607">:=</span>&nbsp;<span class="ident" id="8348610">NewEncoder</span><span class="op" id="8348620">(</span><span class="ident" id="8348621">b</span><span class="op" id="8348622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8348625">if</span>&nbsp;<span class="ident" id="8348628">err</span>&nbsp;<span class="op" id="8348632">:=</span>&nbsp;<span class="ident" id="8348635">enc</span><span class="op" id="8348638">.</span><span class="ident" id="8348639">Encode</span><span class="op" id="8348645">(</span><span class="ident" id="8348646">GobTest6</span><span class="op" id="8348654">{</span><span class="num" id="8348655">42</span><span class="op" id="8348657">,</span>&nbsp;<span class="ident" id="8348659">v</span><span class="op" id="8348660">,</span>&nbsp;<span class="op" id="8348662">&amp;</span><span class="ident" id="8348663">w</span><span class="op" id="8348664">,</span>&nbsp;<span class="ident" id="8348666">bv</span><span class="op" id="8348668">,</span>&nbsp;<span class="op" id="8348670">&amp;</span><span class="ident" id="8348671">bw</span><span class="op" id="8348673">,</span>&nbsp;<span class="ident" id="8348675">tv</span><span class="op" id="8348677">,</span>&nbsp;<span class="op" id="8348679">&amp;</span><span class="ident" id="8348680">tw</span><span class="op" id="8348682">}</span><span class="op" id="8348683">)</span><span class="op" id="8348684">;</span>&nbsp;<span class="ident" id="8348686">err</span>&nbsp;<span class="op" id="8348690">!=</span>&nbsp;<span class="ident" id="8348693">nil</span>&nbsp;<span class="op" id="8348697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348701">t</span><span class="op" id="8348702">.</span><span class="ident" id="8348703">Fatal</span><span class="op" id="8348708">(</span><span class="string" id="8348709">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8348724">,</span>&nbsp;<span class="ident" id="8348726">err</span><span class="op" id="8348729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8348732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348735">dec</span>&nbsp;<span class="op" id="8348739">:=</span>&nbsp;<span class="ident" id="8348742">NewDecoder</span><span class="op" id="8348752">(</span><span class="ident" id="8348753">b</span><span class="op" id="8348754">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348757">x</span>&nbsp;<span class="op" id="8348759">:=</span>&nbsp;<span class="builtinfunc" id="8348762">new</span><span class="op" id="8348765">(</span><span class="ident" id="8348766">GobTest6</span><span class="op" id="8348774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8348777">if</span>&nbsp;<span class="ident" id="8348780">err</span>&nbsp;<span class="op" id="8348784">:=</span>&nbsp;<span class="ident" id="8348787">dec</span><span class="op" id="8348790">.</span><span class="ident" id="8348791">Decode</span><span class="op" id="8348797">(</span><span class="ident" id="8348798">x</span><span class="op" id="8348799">)</span><span class="op" id="8348800">;</span>&nbsp;<span class="ident" id="8348802">err</span>&nbsp;<span class="op" id="8348806">!=</span>&nbsp;<span class="ident" id="8348809">nil</span>&nbsp;<span class="op" id="8348813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348817">t</span><span class="op" id="8348818">.</span><span class="ident" id="8348819">Fatal</span><span class="op" id="8348824">(</span><span class="string" id="8348825">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8348840">,</span>&nbsp;<span class="ident" id="8348842">err</span><span class="op" id="8348845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8348848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8348852">if</span>&nbsp;<span class="ident" id="8348855">got</span><span class="op" id="8348858">,</span>&nbsp;<span class="ident" id="8348860">want</span>&nbsp;<span class="op" id="8348865">:=</span>&nbsp;<span class="ident" id="8348868">x</span><span class="op" id="8348869">.</span><span class="ident" id="8348870">V</span><span class="op" id="8348871">,</span>&nbsp;<span class="ident" id="8348873">v</span><span class="op" id="8348874">;</span>&nbsp;<span class="ident" id="8348876">got</span>&nbsp;<span class="op" id="8348880">!=</span>&nbsp;<span class="ident" id="8348883">want</span>&nbsp;<span class="op" id="8348888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348892">t</span><span class="op" id="8348893">.</span><span class="ident" id="8348894">Errorf</span><span class="op" id="8348900">(</span><span class="string" id="8348901">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8348918">,</span>&nbsp;<span class="ident" id="8348920">got</span><span class="op" id="8348923">,</span>&nbsp;<span class="ident" id="8348925">want</span><span class="op" id="8348929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8348932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8348935">if</span>&nbsp;<span class="ident" id="8348938">got</span><span class="op" id="8348941">,</span>&nbsp;<span class="ident" id="8348943">want</span>&nbsp;<span class="op" id="8348948">:=</span>&nbsp;<span class="ident" id="8348951">x</span><span class="op" id="8348952">.</span><span class="ident" id="8348953">W</span><span class="op" id="8348954">,</span>&nbsp;<span class="ident" id="8348956">w</span><span class="op" id="8348957">;</span>&nbsp;<span class="ident" id="8348959">got</span>&nbsp;<span class="op" id="8348963">==</span>&nbsp;<span class="ident" id="8348966">nil</span>&nbsp;<span class="op" id="8348970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348974">t</span><span class="op" id="8348975">.</span><span class="ident" id="8348976">Errorf</span><span class="op" id="8348982">(</span><span class="string" id="8348983">&#34;w&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8349001">,</span>&nbsp;<span class="ident" id="8349003">want</span><span class="op" id="8349007">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8349010">}</span>&nbsp;<span class="keyword" id="8349012">else</span>&nbsp;<span class="keyword" id="8349017">if</span>&nbsp;<span class="op" id="8349020">*</span><span class="ident" id="8349021">got</span>&nbsp;<span class="op" id="8349025">!=</span>&nbsp;<span class="ident" id="8349028">want</span>&nbsp;<span class="op" id="8349033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8349037">t</span><span class="op" id="8349038">.</span><span class="ident" id="8349039">Errorf</span><span class="op" id="8349045">(</span><span class="string" id="8349046">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8349063">,</span>&nbsp;<span class="op" id="8349065">*</span><span class="ident" id="8349066">got</span><span class="op" id="8349069">,</span>&nbsp;<span class="ident" id="8349071">want</span><span class="op" id="8349075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8349078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8349082">if</span>&nbsp;<span class="ident" id="8349085">got</span><span class="op" id="8349088">,</span>&nbsp;<span class="ident" id="8349090">want</span>&nbsp;<span class="op" id="8349095">:=</span>&nbsp;<span class="ident" id="8349098">x</span><span class="op" id="8349099">.</span><span class="ident" id="8349100">BV</span><span class="op" id="8349102">,</span>&nbsp;<span class="ident" id="8349104">bv</span><span class="op" id="8349106">;</span>&nbsp;<span class="ident" id="8349108">got</span>&nbsp;<span class="op" id="8349112">!=</span>&nbsp;<span class="ident" id="8349115">want</span>&nbsp;<span class="op" id="8349120">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8349124">t</span><span class="op" id="8349125">.</span><span class="ident" id="8349126">Errorf</span><span class="op" id="8349132">(</span><span class="string" id="8349133">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8349151">,</span>&nbsp;<span class="ident" id="8349153">got</span><span class="op" id="8349156">,</span>&nbsp;<span class="ident" id="8349158">want</span><span class="op" id="8349162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8349165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8349168">if</span>&nbsp;<span class="ident" id="8349171">got</span><span class="op" id="8349174">,</span>&nbsp;<span class="ident" id="8349176">want</span>&nbsp;<span class="op" id="8349181">:=</span>&nbsp;<span class="ident" id="8349184">x</span><span class="op" id="8349185">.</span><span class="ident" id="8349186">BW</span><span class="op" id="8349188">,</span>&nbsp;<span class="ident" id="8349190">bw</span><span class="op" id="8349192">;</span>&nbsp;<span class="ident" id="8349194">got</span>&nbsp;<span class="op" id="8349198">==</span>&nbsp;<span class="ident" id="8349201">nil</span>&nbsp;<span class="op" id="8349205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8349209">t</span><span class="op" id="8349210">.</span><span class="ident" id="8349211">Errorf</span><span class="op" id="8349217">(</span><span class="string" id="8349218">&#34;bw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8349237">,</span>&nbsp;<span class="ident" id="8349239">want</span><span class="op" id="8349243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8349246">}</span>&nbsp;<span class="keyword" id="8349248">else</span>&nbsp;<span class="keyword" id="8349253">if</span>&nbsp;<span class="op" id="8349256">*</span><span class="ident" id="8349257">got</span>&nbsp;<span class="op" id="8349261">!=</span>&nbsp;<span class="ident" id="8349264">want</span>&nbsp;<span class="op" id="8349269">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8349273">t</span><span class="op" id="8349274">.</span><span class="ident" id="8349275">Errorf</span><span class="op" id="8349281">(</span><span class="string" id="8349282">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8349300">,</span>&nbsp;<span class="op" id="8349302">*</span><span class="ident" id="8349303">got</span><span class="op" id="8349306">,</span>&nbsp;<span class="ident" id="8349308">want</span><span class="op" id="8349312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8349315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8349319">if</span>&nbsp;<span class="ident" id="8349322">got</span><span class="op" id="8349325">,</span>&nbsp;<span class="ident" id="8349327">want</span>&nbsp;<span class="op" id="8349332">:=</span>&nbsp;<span class="ident" id="8349335">x</span><span class="op" id="8349336">.</span><span class="ident" id="8349337">TV</span><span class="op" id="8349339">,</span>&nbsp;<span class="ident" id="8349341">tv</span><span class="op" id="8349343">;</span>&nbsp;<span class="ident" id="8349345">got</span>&nbsp;<span class="op" id="8349349">!=</span>&nbsp;<span class="ident" id="8349352">want</span>&nbsp;<span class="op" id="8349357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8349361">t</span><span class="op" id="8349362">.</span><span class="ident" id="8349363">Errorf</span><span class="op" id="8349369">(</span><span class="string" id="8349370">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8349388">,</span>&nbsp;<span class="ident" id="8349390">got</span><span class="op" id="8349393">,</span>&nbsp;<span class="ident" id="8349395">want</span><span class="op" id="8349399">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8349402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8349405">if</span>&nbsp;<span class="ident" id="8349408">got</span><span class="op" id="8349411">,</span>&nbsp;<span class="ident" id="8349413">want</span>&nbsp;<span class="op" id="8349418">:=</span>&nbsp;<span class="ident" id="8349421">x</span><span class="op" id="8349422">.</span><span class="ident" id="8349423">TW</span><span class="op" id="8349425">,</span>&nbsp;<span class="ident" id="8349427">tw</span><span class="op" id="8349429">;</span>&nbsp;<span class="ident" id="8349431">got</span>&nbsp;<span class="op" id="8349435">==</span>&nbsp;<span class="ident" id="8349438">nil</span>&nbsp;<span class="op" id="8349442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8349446">t</span><span class="op" id="8349447">.</span><span class="ident" id="8349448">Errorf</span><span class="op" id="8349454">(</span><span class="string" id="8349455">&#34;tw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8349474">,</span>&nbsp;<span class="ident" id="8349476">want</span><span class="op" id="8349480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8349483">}</span>&nbsp;<span class="keyword" id="8349485">else</span>&nbsp;<span class="keyword" id="8349490">if</span>&nbsp;<span class="op" id="8349493">*</span><span class="ident" id="8349494">got</span>&nbsp;<span class="op" id="8349498">!=</span>&nbsp;<span class="ident" id="8349501">want</span>&nbsp;<span class="op" id="8349506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8349510">t</span><span class="op" id="8349511">.</span><span class="ident" id="8349512">Errorf</span><span class="op" id="8349518">(</span><span class="string" id="8349519">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8349537">,</span>&nbsp;<span class="op" id="8349539">*</span><span class="ident" id="8349540">got</span><span class="op" id="8349543">,</span>&nbsp;<span class="ident" id="8349545">want</span><span class="op" id="8349549">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8349552">}</span><br>
<span class="lineno"></span><span class="op" id="8349554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8349557">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;pointer&nbsp;then&nbsp;a&nbsp;value&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="8349625">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.</span><br>
<span class="lineno">490</span><span class="keyword" id="8349655">func</span>&nbsp;<span class="ident" id="8349660">TestGobEncoderPointerThenValue</span><span class="op" id="8349690">(</span><span class="ident" id="8349691">t</span>&nbsp;<span class="op" id="8349693">*</span><span class="ident" id="8349694">testing</span><span class="op" id="8349701">.</span><span class="ident" id="8349702">T</span><span class="op" id="8349703">)</span>&nbsp;<span class="op" id="8349705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8349708">v</span>&nbsp;<span class="op" id="8349710">:=</span>&nbsp;<span class="ident" id="8349713">ValueGobber</span><span class="op" id="8349724">(</span><span class="string" id="8349725">&#34;forty-two&#34;</span><span class="op" id="8349736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8349739">w</span>&nbsp;<span class="op" id="8349741">:=</span>&nbsp;<span class="ident" id="8349744">ValueGobber</span><span class="op" id="8349755">(</span><span class="string" id="8349756">&#34;six-by-nine&#34;</span><span class="op" id="8349769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8349772">bv</span>&nbsp;<span class="op" id="8349775">:=</span>&nbsp;<span class="ident" id="8349778">BinaryValueGobber</span><span class="op" id="8349795">(</span><span class="string" id="8349796">&#34;1nanocentury&#34;</span><span class="op" id="8349810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8349813">bw</span>&nbsp;<span class="op" id="8349816">:=</span>&nbsp;<span class="ident" id="8349819">BinaryValueGobber</span><span class="op" id="8349836">(</span><span class="string" id="8349837">&#34;seconds&#34;</span><span class="op" id="8349848">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8349851">tv</span>&nbsp;<span class="op" id="8349854">:=</span>&nbsp;<span class="ident" id="8349857">TextValueGobber</span><span class="op" id="8349872">(</span><span class="string" id="8349873">&#34;gravitationalacceleration&#34;</span><span class="op" id="8349900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8349903">tw</span>&nbsp;<span class="op" id="8349906">:=</span>&nbsp;<span class="ident" id="8349909">TextValueGobber</span><span class="op" id="8349924">(</span><span class="string" id="8349925">&#34;ft/s&#34;</span><span class="op" id="8349937">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8349941">b</span>&nbsp;<span class="op" id="8349943">:=</span>&nbsp;<span class="builtinfunc" id="8349946">new</span><span class="op" id="8349949">(</span><span class="ident" id="8349950">bytes</span><span class="op" id="8349955">.</span><span class="ident" id="8349956">Buffer</span><span class="op" id="8349962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8349965">enc</span>&nbsp;<span class="op" id="8349969">:=</span>&nbsp;<span class="ident" id="8349972">NewEncoder</span><span class="op" id="8349982">(</span><span class="ident" id="8349983">b</span><span class="op" id="8349984">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8349987">if</span>&nbsp;<span class="ident" id="8349990">err</span>&nbsp;<span class="op" id="8349994">:=</span>&nbsp;<span class="ident" id="8349997">enc</span><span class="op" id="8350000">.</span><span class="ident" id="8350001">Encode</span><span class="op" id="8350007">(</span><span class="ident" id="8350008">GobTest7</span><span class="op" id="8350016">{</span><span class="num" id="8350017">42</span><span class="op" id="8350019">,</span>&nbsp;<span class="op" id="8350021">&amp;</span><span class="ident" id="8350022">v</span><span class="op" id="8350023">,</span>&nbsp;<span class="ident" id="8350025">w</span><span class="op" id="8350026">,</span>&nbsp;<span class="op" id="8350028">&amp;</span><span class="ident" id="8350029">bv</span><span class="op" id="8350031">,</span>&nbsp;<span class="ident" id="8350033">bw</span><span class="op" id="8350035">,</span>&nbsp;<span class="op" id="8350037">&amp;</span><span class="ident" id="8350038">tv</span><span class="op" id="8350040">,</span>&nbsp;<span class="ident" id="8350042">tw</span><span class="op" id="8350044">}</span><span class="op" id="8350045">)</span><span class="op" id="8350046">;</span>&nbsp;<span class="ident" id="8350048">err</span>&nbsp;<span class="op" id="8350052">!=</span>&nbsp;<span class="ident" id="8350055">nil</span>&nbsp;<span class="op" id="8350059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8350063">t</span><span class="op" id="8350064">.</span><span class="ident" id="8350065">Fatal</span><span class="op" id="8350070">(</span><span class="string" id="8350071">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8350086">,</span>&nbsp;<span class="ident" id="8350088">err</span><span class="op" id="8350091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8350094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8350097">dec</span>&nbsp;<span class="op" id="8350101">:=</span>&nbsp;<span class="ident" id="8350104">NewDecoder</span><span class="op" id="8350114">(</span><span class="ident" id="8350115">b</span><span class="op" id="8350116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8350119">x</span>&nbsp;<span class="op" id="8350121">:=</span>&nbsp;<span class="builtinfunc" id="8350124">new</span><span class="op" id="8350127">(</span><span class="ident" id="8350128">GobTest7</span><span class="op" id="8350136">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8350139">if</span>&nbsp;<span class="ident" id="8350142">err</span>&nbsp;<span class="op" id="8350146">:=</span>&nbsp;<span class="ident" id="8350149">dec</span><span class="op" id="8350152">.</span><span class="ident" id="8350153">Decode</span><span class="op" id="8350159">(</span><span class="ident" id="8350160">x</span><span class="op" id="8350161">)</span><span class="op" id="8350162">;</span>&nbsp;<span class="ident" id="8350164">err</span>&nbsp;<span class="op" id="8350168">!=</span>&nbsp;<span class="ident" id="8350171">nil</span>&nbsp;<span class="op" id="8350175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8350179">t</span><span class="op" id="8350180">.</span><span class="ident" id="8350181">Fatal</span><span class="op" id="8350186">(</span><span class="string" id="8350187">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8350202">,</span>&nbsp;<span class="ident" id="8350204">err</span><span class="op" id="8350207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8350210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8350214">if</span>&nbsp;<span class="ident" id="8350217">got</span><span class="op" id="8350220">,</span>&nbsp;<span class="ident" id="8350222">want</span>&nbsp;<span class="op" id="8350227">:=</span>&nbsp;<span class="ident" id="8350230">x</span><span class="op" id="8350231">.</span><span class="ident" id="8350232">V</span><span class="op" id="8350233">,</span>&nbsp;<span class="ident" id="8350235">v</span><span class="op" id="8350236">;</span>&nbsp;<span class="ident" id="8350238">got</span>&nbsp;<span class="op" id="8350242">==</span>&nbsp;<span class="ident" id="8350245">nil</span>&nbsp;<span class="op" id="8350249">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8350253">t</span><span class="op" id="8350254">.</span><span class="ident" id="8350255">Errorf</span><span class="op" id="8350261">(</span><span class="string" id="8350262">&#34;v&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8350280">,</span>&nbsp;<span class="ident" id="8350282">want</span><span class="op" id="8350286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8350289">}</span>&nbsp;<span class="keyword" id="8350291">else</span>&nbsp;<span class="keyword" id="8350296">if</span>&nbsp;<span class="op" id="8350299">*</span><span class="ident" id="8350300">got</span>&nbsp;<span class="op" id="8350304">!=</span>&nbsp;<span class="ident" id="8350307">want</span>&nbsp;<span class="op" id="8350312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8350316">t</span><span class="op" id="8350317">.</span><span class="ident" id="8350318">Errorf</span><span class="op" id="8350324">(</span><span class="string" id="8350325">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8350342">,</span>&nbsp;<span class="op" id="8350344">*</span><span class="ident" id="8350345">got</span><span class="op" id="8350348">,</span>&nbsp;<span class="ident" id="8350350">want</span><span class="op" id="8350354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8350357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8350360">if</span>&nbsp;<span class="ident" id="8350363">got</span><span class="op" id="8350366">,</span>&nbsp;<span class="ident" id="8350368">want</span>&nbsp;<span class="op" id="8350373">:=</span>&nbsp;<span class="ident" id="8350376">x</span><span class="op" id="8350377">.</span><span class="ident" id="8350378">W</span><span class="op" id="8350379">,</span>&nbsp;<span class="ident" id="8350381">w</span><span class="op" id="8350382">;</span>&nbsp;<span class="ident" id="8350384">got</span>&nbsp;<span class="op" id="8350388">!=</span>&nbsp;<span class="ident" id="8350391">want</span>&nbsp;<span class="op" id="8350396">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8350400">t</span><span class="op" id="8350401">.</span><span class="ident" id="8350402">Errorf</span><span class="op" id="8350408">(</span><span class="string" id="8350409">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8350426">,</span>&nbsp;<span class="ident" id="8350428">got</span><span class="op" id="8350431">,</span>&nbsp;<span class="ident" id="8350433">want</span><span class="op" id="8350437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8350440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8350444">if</span>&nbsp;<span class="ident" id="8350447">got</span><span class="op" id="8350450">,</span>&nbsp;<span class="ident" id="8350452">want</span>&nbsp;<span class="op" id="8350457">:=</span>&nbsp;<span class="ident" id="8350460">x</span><span class="op" id="8350461">.</span><span class="ident" id="8350462">BV</span><span class="op" id="8350464">,</span>&nbsp;<span class="ident" id="8350466">bv</span><span class="op" id="8350468">;</span>&nbsp;<span class="ident" id="8350470">got</span>&nbsp;<span class="op" id="8350474">==</span>&nbsp;<span class="ident" id="8350477">nil</span>&nbsp;<span class="op" id="8350481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8350485">t</span><span class="op" id="8350486">.</span><span class="ident" id="8350487">Errorf</span><span class="op" id="8350493">(</span><span class="string" id="8350494">&#34;bv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8350513">,</span>&nbsp;<span class="ident" id="8350515">want</span><span class="op" id="8350519">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8350522">}</span>&nbsp;<span class="keyword" id="8350524">else</span>&nbsp;<span class="keyword" id="8350529">if</span>&nbsp;<span class="op" id="8350532">*</span><span class="ident" id="8350533">got</span>&nbsp;<span class="op" id="8350537">!=</span>&nbsp;<span class="ident" id="8350540">want</span>&nbsp;<span class="op" id="8350545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8350549">t</span><span class="op" id="8350550">.</span><span class="ident" id="8350551">Errorf</span><span class="op" id="8350557">(</span><span class="string" id="8350558">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8350576">,</span>&nbsp;<span class="op" id="8350578">*</span><span class="ident" id="8350579">got</span><span class="op" id="8350582">,</span>&nbsp;<span class="ident" id="8350584">want</span><span class="op" id="8350588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8350591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8350594">if</span>&nbsp;<span class="ident" id="8350597">got</span><span class="op" id="8350600">,</span>&nbsp;<span class="ident" id="8350602">want</span>&nbsp;<span class="op" id="8350607">:=</span>&nbsp;<span class="ident" id="8350610">x</span><span class="op" id="8350611">.</span><span class="ident" id="8350612">BW</span><span class="op" id="8350614">,</span>&nbsp;<span class="ident" id="8350616">bw</span><span class="op" id="8350618">;</span>&nbsp;<span class="ident" id="8350620">got</span>&nbsp;<span class="op" id="8350624">!=</span>&nbsp;<span class="ident" id="8350627">want</span>&nbsp;<span class="op" id="8350632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8350636">t</span><span class="op" id="8350637">.</span><span class="ident" id="8350638">Errorf</span><span class="op" id="8350644">(</span><span class="string" id="8350645">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8350663">,</span>&nbsp;<span class="ident" id="8350665">got</span><span class="op" id="8350668">,</span>&nbsp;<span class="ident" id="8350670">want</span><span class="op" id="8350674">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8350677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8350681">if</span>&nbsp;<span class="ident" id="8350684">got</span><span class="op" id="8350687">,</span>&nbsp;<span class="ident" id="8350689">want</span>&nbsp;<span class="op" id="8350694">:=</span>&nbsp;<span class="ident" id="8350697">x</span><span class="op" id="8350698">.</span><span class="ident" id="8350699">TV</span><span class="op" id="8350701">,</span>&nbsp;<span class="ident" id="8350703">tv</span><span class="op" id="8350705">;</span>&nbsp;<span class="ident" id="8350707">got</span>&nbsp;<span class="op" id="8350711">==</span>&nbsp;<span class="ident" id="8350714">nil</span>&nbsp;<span class="op" id="8350718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8350722">t</span><span class="op" id="8350723">.</span><span class="ident" id="8350724">Errorf</span><span class="op" id="8350730">(</span><span class="string" id="8350731">&#34;tv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8350750">,</span>&nbsp;<span class="ident" id="8350752">want</span><span class="op" id="8350756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8350759">}</span>&nbsp;<span class="keyword" id="8350761">else</span>&nbsp;<span class="keyword" id="8350766">if</span>&nbsp;<span class="op" id="8350769">*</span><span class="ident" id="8350770">got</span>&nbsp;<span class="op" id="8350774">!=</span>&nbsp;<span class="ident" id="8350777">want</span>&nbsp;<span class="op" id="8350782">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8350786">t</span><span class="op" id="8350787">.</span><span class="ident" id="8350788">Errorf</span><span class="op" id="8350794">(</span><span class="string" id="8350795">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8350813">,</span>&nbsp;<span class="op" id="8350815">*</span><span class="ident" id="8350816">got</span><span class="op" id="8350819">,</span>&nbsp;<span class="ident" id="8350821">want</span><span class="op" id="8350825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8350828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8350831">if</span>&nbsp;<span class="ident" id="8350834">got</span><span class="op" id="8350837">,</span>&nbsp;<span class="ident" id="8350839">want</span>&nbsp;<span class="op" id="8350844">:=</span>&nbsp;<span class="ident" id="8350847">x</span><span class="op" id="8350848">.</span><span class="ident" id="8350849">TW</span><span class="op" id="8350851">,</span>&nbsp;<span class="ident" id="8350853">tw</span><span class="op" id="8350855">;</span>&nbsp;<span class="ident" id="8350857">got</span>&nbsp;<span class="op" id="8350861">!=</span>&nbsp;<span class="ident" id="8350864">want</span>&nbsp;<span class="op" id="8350869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8350873">t</span><span class="op" id="8350874">.</span><span class="ident" id="8350875">Errorf</span><span class="op" id="8350881">(</span><span class="string" id="8350882">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8350900">,</span>&nbsp;<span class="ident" id="8350902">got</span><span class="op" id="8350905">,</span>&nbsp;<span class="ident" id="8350907">want</span><span class="op" id="8350911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8350914">}</span><br>
<span class="lineno">535</span><span class="op" id="8350916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8350919">func</span>&nbsp;<span class="ident" id="8350924">TestGobEncoderFieldTypeError</span><span class="op" id="8350952">(</span><span class="ident" id="8350953">t</span>&nbsp;<span class="op" id="8350955">*</span><span class="ident" id="8350956">testing</span><span class="op" id="8350963">.</span><span class="ident" id="8350964">T</span><span class="op" id="8350965">)</span>&nbsp;<span class="op" id="8350967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8350970">//&nbsp;GobEncoder&nbsp;to&nbsp;non-decoder:&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351007">b</span>&nbsp;<span class="op" id="8351009">:=</span>&nbsp;<span class="builtinfunc" id="8351012">new</span><span class="op" id="8351015">(</span><span class="ident" id="8351016">bytes</span><span class="op" id="8351021">.</span><span class="ident" id="8351022">Buffer</span><span class="op" id="8351028">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351031">enc</span>&nbsp;<span class="op" id="8351035">:=</span>&nbsp;<span class="ident" id="8351038">NewEncoder</span><span class="op" id="8351048">(</span><span class="ident" id="8351049">b</span><span class="op" id="8351050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351053">err</span>&nbsp;<span class="op" id="8351057">:=</span>&nbsp;<span class="ident" id="8351060">enc</span><span class="op" id="8351063">.</span><span class="ident" id="8351064">Encode</span><span class="op" id="8351070">(</span><span class="ident" id="8351071">GobTest1</span><span class="op" id="8351079">{</span><span class="num" id="8351080">17</span><span class="op" id="8351082">,</span>&nbsp;<span class="op" id="8351084">&amp;</span><span class="ident" id="8351085">StringStruct</span><span class="op" id="8351097">{</span><span class="string" id="8351098">&#34;ABC&#34;</span><span class="op" id="8351103">}</span><span class="op" id="8351104">}</span><span class="op" id="8351105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8351108">if</span>&nbsp;<span class="ident" id="8351111">err</span>&nbsp;<span class="op" id="8351115">!=</span>&nbsp;<span class="ident" id="8351118">nil</span>&nbsp;<span class="op" id="8351122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351126">t</span><span class="op" id="8351127">.</span><span class="ident" id="8351128">Fatal</span><span class="op" id="8351133">(</span><span class="string" id="8351134">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8351149">,</span>&nbsp;<span class="ident" id="8351151">err</span><span class="op" id="8351154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8351157">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351160">dec</span>&nbsp;<span class="op" id="8351164">:=</span>&nbsp;<span class="ident" id="8351167">NewDecoder</span><span class="op" id="8351177">(</span><span class="ident" id="8351178">b</span><span class="op" id="8351179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351182">x</span>&nbsp;<span class="op" id="8351184">:=</span>&nbsp;<span class="op" id="8351187">&amp;</span><span class="ident" id="8351188">GobTest2</span><span class="op" id="8351196">{</span><span class="op" id="8351197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351200">err</span>&nbsp;<span class="op" id="8351204">=</span>&nbsp;<span class="ident" id="8351206">dec</span><span class="op" id="8351209">.</span><span class="ident" id="8351210">Decode</span><span class="op" id="8351216">(</span><span class="ident" id="8351217">x</span><span class="op" id="8351218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8351221">if</span>&nbsp;<span class="ident" id="8351224">err</span>&nbsp;<span class="op" id="8351228">==</span>&nbsp;<span class="ident" id="8351231">nil</span>&nbsp;<span class="op" id="8351235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351239">t</span><span class="op" id="8351240">.</span><span class="ident" id="8351241">Fatal</span><span class="op" id="8351246">(</span><span class="string" id="8351247">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(encoder&nbsp;to&nbsp;non-decoder)&#34;</span><span class="op" id="8351317">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8351320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8351323">if</span>&nbsp;<span class="ident" id="8351326">strings</span><span class="op" id="8351333">.</span><span class="ident" id="8351334">Index</span><span class="op" id="8351339">(</span><span class="ident" id="8351340">err</span><span class="op" id="8351343">.</span><span class="ident" id="8351344">Error</span><span class="op" id="8351349">(</span><span class="op" id="8351350">)</span><span class="op" id="8351351">,</span>&nbsp;<span class="string" id="8351353">&#34;type&#34;</span><span class="op" id="8351359">)</span>&nbsp;<span class="op" id="8351361">&lt;</span>&nbsp;<span class="num" id="8351363">0</span>&nbsp;<span class="op" id="8351365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351369">t</span><span class="op" id="8351370">.</span><span class="ident" id="8351371">Fatal</span><span class="op" id="8351376">(</span><span class="string" id="8351377">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="8351403">,</span>&nbsp;<span class="ident" id="8351405">err</span><span class="op" id="8351408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8351411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8351414">//&nbsp;Non-encoder&nbsp;to&nbsp;GobDecoder:&nbsp;error</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351451">b</span><span class="op" id="8351452">.</span><span class="ident" id="8351453">Reset</span><span class="op" id="8351458">(</span><span class="op" id="8351459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351462">err</span>&nbsp;<span class="op" id="8351466">=</span>&nbsp;<span class="ident" id="8351468">enc</span><span class="op" id="8351471">.</span><span class="ident" id="8351472">Encode</span><span class="op" id="8351478">(</span><span class="ident" id="8351479">GobTest2</span><span class="op" id="8351487">{</span><span class="num" id="8351488">17</span><span class="op" id="8351490">,</span>&nbsp;<span class="string" id="8351492">&#34;ABC&#34;</span><span class="op" id="8351497">}</span><span class="op" id="8351498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8351501">if</span>&nbsp;<span class="ident" id="8351504">err</span>&nbsp;<span class="op" id="8351508">!=</span>&nbsp;<span class="ident" id="8351511">nil</span>&nbsp;<span class="op" id="8351515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351519">t</span><span class="op" id="8351520">.</span><span class="ident" id="8351521">Fatal</span><span class="op" id="8351526">(</span><span class="string" id="8351527">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8351542">,</span>&nbsp;<span class="ident" id="8351544">err</span><span class="op" id="8351547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8351550">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351553">y</span>&nbsp;<span class="op" id="8351555">:=</span>&nbsp;<span class="op" id="8351558">&amp;</span><span class="ident" id="8351559">GobTest1</span><span class="op" id="8351567">{</span><span class="op" id="8351568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351571">err</span>&nbsp;<span class="op" id="8351575">=</span>&nbsp;<span class="ident" id="8351577">dec</span><span class="op" id="8351580">.</span><span class="ident" id="8351581">Decode</span><span class="op" id="8351587">(</span><span class="ident" id="8351588">y</span><span class="op" id="8351589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8351592">if</span>&nbsp;<span class="ident" id="8351595">err</span>&nbsp;<span class="op" id="8351599">==</span>&nbsp;<span class="ident" id="8351602">nil</span>&nbsp;<span class="op" id="8351606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351610">t</span><span class="op" id="8351611">.</span><span class="ident" id="8351612">Fatal</span><span class="op" id="8351617">(</span><span class="string" id="8351618">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(non-encoder&nbsp;to&nbsp;decoder)&#34;</span><span class="op" id="8351688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8351691">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8351694">if</span>&nbsp;<span class="ident" id="8351697">strings</span><span class="op" id="8351704">.</span><span class="ident" id="8351705">Index</span><span class="op" id="8351710">(</span><span class="ident" id="8351711">err</span><span class="op" id="8351714">.</span><span class="ident" id="8351715">Error</span><span class="op" id="8351720">(</span><span class="op" id="8351721">)</span><span class="op" id="8351722">,</span>&nbsp;<span class="string" id="8351724">&#34;type&#34;</span><span class="op" id="8351730">)</span>&nbsp;<span class="op" id="8351732">&lt;</span>&nbsp;<span class="num" id="8351734">0</span>&nbsp;<span class="op" id="8351736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351740">t</span><span class="op" id="8351741">.</span><span class="ident" id="8351742">Fatal</span><span class="op" id="8351747">(</span><span class="string" id="8351748">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="8351774">,</span>&nbsp;<span class="ident" id="8351776">err</span><span class="op" id="8351779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8351782">}</span><br>
<span class="lineno"></span><span class="op" id="8351784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="8351787">//&nbsp;Even&nbsp;though&nbsp;ByteStruct&nbsp;is&nbsp;a&nbsp;struct,&nbsp;it&#39;s&nbsp;treated&nbsp;as&nbsp;a&nbsp;singleton&nbsp;at&nbsp;the&nbsp;top&nbsp;level.</span><br>
<span class="lineno"></span><span class="keyword" id="8351872">func</span>&nbsp;<span class="ident" id="8351877">TestGobEncoderStructSingleton</span><span class="op" id="8351906">(</span><span class="ident" id="8351907">t</span>&nbsp;<span class="op" id="8351909">*</span><span class="ident" id="8351910">testing</span><span class="op" id="8351917">.</span><span class="ident" id="8351918">T</span><span class="op" id="8351919">)</span>&nbsp;<span class="op" id="8351921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351924">b</span>&nbsp;<span class="op" id="8351926">:=</span>&nbsp;<span class="builtinfunc" id="8351929">new</span><span class="op" id="8351932">(</span><span class="ident" id="8351933">bytes</span><span class="op" id="8351938">.</span><span class="ident" id="8351939">Buffer</span><span class="op" id="8351945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351948">enc</span>&nbsp;<span class="op" id="8351952">:=</span>&nbsp;<span class="ident" id="8351955">NewEncoder</span><span class="op" id="8351965">(</span><span class="ident" id="8351966">b</span><span class="op" id="8351967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351970">err</span>&nbsp;<span class="op" id="8351974">:=</span>&nbsp;<span class="ident" id="8351977">enc</span><span class="op" id="8351980">.</span><span class="ident" id="8351981">Encode</span><span class="op" id="8351987">(</span><span class="op" id="8351988">&amp;</span><span class="ident" id="8351989">ByteStruct</span><span class="op" id="8351999">{</span><span class="string" id="8352000">&#39;A&#39;</span><span class="op" id="8352003">}</span><span class="op" id="8352004">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8352007">if</span>&nbsp;<span class="ident" id="8352010">err</span>&nbsp;<span class="op" id="8352014">!=</span>&nbsp;<span class="ident" id="8352017">nil</span>&nbsp;<span class="op" id="8352021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352025">t</span><span class="op" id="8352026">.</span><span class="ident" id="8352027">Fatal</span><span class="op" id="8352032">(</span><span class="string" id="8352033">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8352048">,</span>&nbsp;<span class="ident" id="8352050">err</span><span class="op" id="8352053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8352056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352059">dec</span>&nbsp;<span class="op" id="8352063">:=</span>&nbsp;<span class="ident" id="8352066">NewDecoder</span><span class="op" id="8352076">(</span><span class="ident" id="8352077">b</span><span class="op" id="8352078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352081">x</span>&nbsp;<span class="op" id="8352083">:=</span>&nbsp;<span class="builtinfunc" id="8352086">new</span><span class="op" id="8352089">(</span><span class="ident" id="8352090">ByteStruct</span><span class="op" id="8352100">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352103">err</span>&nbsp;<span class="op" id="8352107">=</span>&nbsp;<span class="ident" id="8352109">dec</span><span class="op" id="8352112">.</span><span class="ident" id="8352113">Decode</span><span class="op" id="8352119">(</span><span class="ident" id="8352120">x</span><span class="op" id="8352121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8352124">if</span>&nbsp;<span class="ident" id="8352127">err</span>&nbsp;<span class="op" id="8352131">!=</span>&nbsp;<span class="ident" id="8352134">nil</span>&nbsp;<span class="op" id="8352138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352142">t</span><span class="op" id="8352143">.</span><span class="ident" id="8352144">Fatal</span><span class="op" id="8352149">(</span><span class="string" id="8352150">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8352165">,</span>&nbsp;<span class="ident" id="8352167">err</span><span class="op" id="8352170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8352173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8352176">if</span>&nbsp;<span class="ident" id="8352179">x</span><span class="op" id="8352180">.</span><span class="ident" id="8352181">a</span>&nbsp;<span class="op" id="8352183">!=</span>&nbsp;<span class="string" id="8352186">&#39;A&#39;</span>&nbsp;<span class="op" id="8352190">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352194">t</span><span class="op" id="8352195">.</span><span class="ident" id="8352196">Errorf</span><span class="op" id="8352202">(</span><span class="string" id="8352203">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8352224">,</span>&nbsp;<span class="ident" id="8352226">x</span><span class="op" id="8352227">.</span><span class="ident" id="8352228">a</span><span class="op" id="8352229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8352232">}</span><br>
<span class="lineno"></span><span class="op" id="8352234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8352237">func</span>&nbsp;<span class="ident" id="8352242">TestGobEncoderNonStructSingleton</span><span class="op" id="8352274">(</span><span class="ident" id="8352275">t</span>&nbsp;<span class="op" id="8352277">*</span><span class="ident" id="8352278">testing</span><span class="op" id="8352285">.</span><span class="ident" id="8352286">T</span><span class="op" id="8352287">)</span>&nbsp;<span class="op" id="8352289">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352292">b</span>&nbsp;<span class="op" id="8352294">:=</span>&nbsp;<span class="builtinfunc" id="8352297">new</span><span class="op" id="8352300">(</span><span class="ident" id="8352301">bytes</span><span class="op" id="8352306">.</span><span class="ident" id="8352307">Buffer</span><span class="op" id="8352313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352316">enc</span>&nbsp;<span class="op" id="8352320">:=</span>&nbsp;<span class="ident" id="8352323">NewEncoder</span><span class="op" id="8352333">(</span><span class="ident" id="8352334">b</span><span class="op" id="8352335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8352338">var</span>&nbsp;<span class="ident" id="8352342">g</span>&nbsp;<span class="ident" id="8352344">Gobber</span>&nbsp;<span class="op" id="8352351">=</span>&nbsp;<span class="num" id="8352353">1234</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352359">err</span>&nbsp;<span class="op" id="8352363">:=</span>&nbsp;<span class="ident" id="8352366">enc</span><span class="op" id="8352369">.</span><span class="ident" id="8352370">Encode</span><span class="op" id="8352376">(</span><span class="op" id="8352377">&amp;</span><span class="ident" id="8352378">g</span><span class="op" id="8352379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8352382">if</span>&nbsp;<span class="ident" id="8352385">err</span>&nbsp;<span class="op" id="8352389">!=</span>&nbsp;<span class="ident" id="8352392">nil</span>&nbsp;<span class="op" id="8352396">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352400">t</span><span class="op" id="8352401">.</span><span class="ident" id="8352402">Fatal</span><span class="op" id="8352407">(</span><span class="string" id="8352408">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8352423">,</span>&nbsp;<span class="ident" id="8352425">err</span><span class="op" id="8352428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8352431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352434">dec</span>&nbsp;<span class="op" id="8352438">:=</span>&nbsp;<span class="ident" id="8352441">NewDecoder</span><span class="op" id="8352451">(</span><span class="ident" id="8352452">b</span><span class="op" id="8352453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8352456">var</span>&nbsp;<span class="ident" id="8352460">x</span>&nbsp;<span class="ident" id="8352462">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352470">err</span>&nbsp;<span class="op" id="8352474">=</span>&nbsp;<span class="ident" id="8352476">dec</span><span class="op" id="8352479">.</span><span class="ident" id="8352480">Decode</span><span class="op" id="8352486">(</span><span class="op" id="8352487">&amp;</span><span class="ident" id="8352488">x</span><span class="op" id="8352489">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8352492">if</span>&nbsp;<span class="ident" id="8352495">err</span>&nbsp;<span class="op" id="8352499">!=</span>&nbsp;<span class="ident" id="8352502">nil</span>&nbsp;<span class="op" id="8352506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352510">t</span><span class="op" id="8352511">.</span><span class="ident" id="8352512">Fatal</span><span class="op" id="8352517">(</span><span class="string" id="8352518">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8352533">,</span>&nbsp;<span class="ident" id="8352535">err</span><span class="op" id="8352538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8352541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8352544">if</span>&nbsp;<span class="ident" id="8352547">x</span>&nbsp;<span class="op" id="8352549">!=</span>&nbsp;<span class="num" id="8352552">1234</span>&nbsp;<span class="op" id="8352557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352561">t</span><span class="op" id="8352562">.</span><span class="ident" id="8352563">Errorf</span><span class="op" id="8352569">(</span><span class="string" id="8352570">&#34;expected&nbsp;1234&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8352592">,</span>&nbsp;<span class="ident" id="8352594">x</span><span class="op" id="8352595">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8352598">}</span><br>
<span class="lineno"></span><span class="op" id="8352600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8352603">func</span>&nbsp;<span class="ident" id="8352608">TestGobEncoderIgnoreStructField</span><span class="op" id="8352639">(</span><span class="ident" id="8352640">t</span>&nbsp;<span class="op" id="8352642">*</span><span class="ident" id="8352643">testing</span><span class="op" id="8352650">.</span><span class="ident" id="8352651">T</span><span class="op" id="8352652">)</span>&nbsp;<span class="op" id="8352654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352657">b</span>&nbsp;<span class="op" id="8352659">:=</span>&nbsp;<span class="builtinfunc" id="8352662">new</span><span class="op" id="8352665">(</span><span class="ident" id="8352666">bytes</span><span class="op" id="8352671">.</span><span class="ident" id="8352672">Buffer</span><span class="op" id="8352678">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8352681">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352719">enc</span>&nbsp;<span class="op" id="8352723">:=</span>&nbsp;<span class="ident" id="8352726">NewEncoder</span><span class="op" id="8352736">(</span><span class="ident" id="8352737">b</span><span class="op" id="8352738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352741">err</span>&nbsp;<span class="op" id="8352745">:=</span>&nbsp;<span class="ident" id="8352748">enc</span><span class="op" id="8352751">.</span><span class="ident" id="8352752">Encode</span><span class="op" id="8352758">(</span><span class="ident" id="8352759">GobTest0</span><span class="op" id="8352767">{</span><span class="num" id="8352768">17</span><span class="op" id="8352770">,</span>&nbsp;<span class="op" id="8352772">&amp;</span><span class="ident" id="8352773">ByteStruct</span><span class="op" id="8352783">{</span><span class="string" id="8352784">&#39;A&#39;</span><span class="op" id="8352787">}</span><span class="op" id="8352788">}</span><span class="op" id="8352789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8352792">if</span>&nbsp;<span class="ident" id="8352795">err</span>&nbsp;<span class="op" id="8352799">!=</span>&nbsp;<span class="ident" id="8352802">nil</span>&nbsp;<span class="op" id="8352806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352810">t</span><span class="op" id="8352811">.</span><span class="ident" id="8352812">Fatal</span><span class="op" id="8352817">(</span><span class="string" id="8352818">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8352833">,</span>&nbsp;<span class="ident" id="8352835">err</span><span class="op" id="8352838">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8352841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352844">dec</span>&nbsp;<span class="op" id="8352848">:=</span>&nbsp;<span class="ident" id="8352851">NewDecoder</span><span class="op" id="8352861">(</span><span class="ident" id="8352862">b</span><span class="op" id="8352863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352866">x</span>&nbsp;<span class="op" id="8352868">:=</span>&nbsp;<span class="builtinfunc" id="8352871">new</span><span class="op" id="8352874">(</span><span class="ident" id="8352875">GobTestIgnoreEncoder</span><span class="op" id="8352895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352898">err</span>&nbsp;<span class="op" id="8352902">=</span>&nbsp;<span class="ident" id="8352904">dec</span><span class="op" id="8352907">.</span><span class="ident" id="8352908">Decode</span><span class="op" id="8352914">(</span><span class="ident" id="8352915">x</span><span class="op" id="8352916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8352919">if</span>&nbsp;<span class="ident" id="8352922">err</span>&nbsp;<span class="op" id="8352926">!=</span>&nbsp;<span class="ident" id="8352929">nil</span>&nbsp;<span class="op" id="8352933">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352937">t</span><span class="op" id="8352938">.</span><span class="ident" id="8352939">Fatal</span><span class="op" id="8352944">(</span><span class="string" id="8352945">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8352960">,</span>&nbsp;<span class="ident" id="8352962">err</span><span class="op" id="8352965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8352968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8352971">if</span>&nbsp;<span class="ident" id="8352974">x</span><span class="op" id="8352975">.</span><span class="ident" id="8352976">X</span>&nbsp;<span class="op" id="8352978">!=</span>&nbsp;<span class="num" id="8352981">17</span>&nbsp;<span class="op" id="8352984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352988">t</span><span class="op" id="8352989">.</span><span class="ident" id="8352990">Errorf</span><span class="op" id="8352996">(</span><span class="string" id="8352997">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8353017">,</span>&nbsp;<span class="ident" id="8353019">x</span><span class="op" id="8353020">.</span><span class="ident" id="8353021">X</span><span class="op" id="8353022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353025">}</span><br>
<span class="lineno">625</span><span class="op" id="8353027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8353030">func</span>&nbsp;<span class="ident" id="8353035">TestGobEncoderIgnoreNonStructField</span><span class="op" id="8353069">(</span><span class="ident" id="8353070">t</span>&nbsp;<span class="op" id="8353072">*</span><span class="ident" id="8353073">testing</span><span class="op" id="8353080">.</span><span class="ident" id="8353081">T</span><span class="op" id="8353082">)</span>&nbsp;<span class="op" id="8353084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353087">b</span>&nbsp;<span class="op" id="8353089">:=</span>&nbsp;<span class="builtinfunc" id="8353092">new</span><span class="op" id="8353095">(</span><span class="ident" id="8353096">bytes</span><span class="op" id="8353101">.</span><span class="ident" id="8353102">Buffer</span><span class="op" id="8353108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8353111">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353149">enc</span>&nbsp;<span class="op" id="8353153">:=</span>&nbsp;<span class="ident" id="8353156">NewEncoder</span><span class="op" id="8353166">(</span><span class="ident" id="8353167">b</span><span class="op" id="8353168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353171">gobber</span>&nbsp;<span class="op" id="8353178">:=</span>&nbsp;<span class="ident" id="8353181">Gobber</span><span class="op" id="8353187">(</span><span class="num" id="8353188">23</span><span class="op" id="8353190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353193">bgobber</span>&nbsp;<span class="op" id="8353201">:=</span>&nbsp;<span class="ident" id="8353204">BinaryGobber</span><span class="op" id="8353216">(</span><span class="num" id="8353217">24</span><span class="op" id="8353219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353222">tgobber</span>&nbsp;<span class="op" id="8353230">:=</span>&nbsp;<span class="ident" id="8353233">TextGobber</span><span class="op" id="8353243">(</span><span class="num" id="8353244">25</span><span class="op" id="8353246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353249">err</span>&nbsp;<span class="op" id="8353253">:=</span>&nbsp;<span class="ident" id="8353256">enc</span><span class="op" id="8353259">.</span><span class="ident" id="8353260">Encode</span><span class="op" id="8353266">(</span><span class="ident" id="8353267">GobTest3</span><span class="op" id="8353275">{</span><span class="num" id="8353276">17</span><span class="op" id="8353278">,</span>&nbsp;<span class="op" id="8353280">&amp;</span><span class="ident" id="8353281">gobber</span><span class="op" id="8353287">,</span>&nbsp;<span class="op" id="8353289">&amp;</span><span class="ident" id="8353290">bgobber</span><span class="op" id="8353297">,</span>&nbsp;<span class="op" id="8353299">&amp;</span><span class="ident" id="8353300">tgobber</span><span class="op" id="8353307">}</span><span class="op" id="8353308">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8353311">if</span>&nbsp;<span class="ident" id="8353314">err</span>&nbsp;<span class="op" id="8353318">!=</span>&nbsp;<span class="ident" id="8353321">nil</span>&nbsp;<span class="op" id="8353325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353329">t</span><span class="op" id="8353330">.</span><span class="ident" id="8353331">Fatal</span><span class="op" id="8353336">(</span><span class="string" id="8353337">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8353352">,</span>&nbsp;<span class="ident" id="8353354">err</span><span class="op" id="8353357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353363">dec</span>&nbsp;<span class="op" id="8353367">:=</span>&nbsp;<span class="ident" id="8353370">NewDecoder</span><span class="op" id="8353380">(</span><span class="ident" id="8353381">b</span><span class="op" id="8353382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353385">x</span>&nbsp;<span class="op" id="8353387">:=</span>&nbsp;<span class="builtinfunc" id="8353390">new</span><span class="op" id="8353393">(</span><span class="ident" id="8353394">GobTestIgnoreEncoder</span><span class="op" id="8353414">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353417">err</span>&nbsp;<span class="op" id="8353421">=</span>&nbsp;<span class="ident" id="8353423">dec</span><span class="op" id="8353426">.</span><span class="ident" id="8353427">Decode</span><span class="op" id="8353433">(</span><span class="ident" id="8353434">x</span><span class="op" id="8353435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8353438">if</span>&nbsp;<span class="ident" id="8353441">err</span>&nbsp;<span class="op" id="8353445">!=</span>&nbsp;<span class="ident" id="8353448">nil</span>&nbsp;<span class="op" id="8353452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353456">t</span><span class="op" id="8353457">.</span><span class="ident" id="8353458">Fatal</span><span class="op" id="8353463">(</span><span class="string" id="8353464">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8353479">,</span>&nbsp;<span class="ident" id="8353481">err</span><span class="op" id="8353484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8353490">if</span>&nbsp;<span class="ident" id="8353493">x</span><span class="op" id="8353494">.</span><span class="ident" id="8353495">X</span>&nbsp;<span class="op" id="8353497">!=</span>&nbsp;<span class="num" id="8353500">17</span>&nbsp;<span class="op" id="8353503">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353507">t</span><span class="op" id="8353508">.</span><span class="ident" id="8353509">Errorf</span><span class="op" id="8353515">(</span><span class="string" id="8353516">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8353536">,</span>&nbsp;<span class="ident" id="8353538">x</span><span class="op" id="8353539">.</span><span class="ident" id="8353540">X</span><span class="op" id="8353541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353544">}</span><br>
<span class="lineno"></span><span class="op" id="8353546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8353549">func</span>&nbsp;<span class="ident" id="8353554">TestGobEncoderIgnoreNilEncoder</span><span class="op" id="8353584">(</span><span class="ident" id="8353585">t</span>&nbsp;<span class="op" id="8353587">*</span><span class="ident" id="8353588">testing</span><span class="op" id="8353595">.</span><span class="ident" id="8353596">T</span><span class="op" id="8353597">)</span>&nbsp;<span class="op" id="8353599">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353602">b</span>&nbsp;<span class="op" id="8353604">:=</span>&nbsp;<span class="builtinfunc" id="8353607">new</span><span class="op" id="8353610">(</span><span class="ident" id="8353611">bytes</span><span class="op" id="8353616">.</span><span class="ident" id="8353617">Buffer</span><span class="op" id="8353623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8353626">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353664">enc</span>&nbsp;<span class="op" id="8353668">:=</span>&nbsp;<span class="ident" id="8353671">NewEncoder</span><span class="op" id="8353681">(</span><span class="ident" id="8353682">b</span><span class="op" id="8353683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353686">err</span>&nbsp;<span class="op" id="8353690">:=</span>&nbsp;<span class="ident" id="8353693">enc</span><span class="op" id="8353696">.</span><span class="ident" id="8353697">Encode</span><span class="op" id="8353703">(</span><span class="ident" id="8353704">GobTest0</span><span class="op" id="8353712">{</span><span class="ident" id="8353713">X</span><span class="op" id="8353714">:</span>&nbsp;<span class="num" id="8353716">18</span><span class="op" id="8353718">}</span><span class="op" id="8353719">)</span>&nbsp;<span class="comment" id="8353721">//&nbsp;G&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8353734">if</span>&nbsp;<span class="ident" id="8353737">err</span>&nbsp;<span class="op" id="8353741">!=</span>&nbsp;<span class="ident" id="8353744">nil</span>&nbsp;<span class="op" id="8353748">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353752">t</span><span class="op" id="8353753">.</span><span class="ident" id="8353754">Fatal</span><span class="op" id="8353759">(</span><span class="string" id="8353760">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8353775">,</span>&nbsp;<span class="ident" id="8353777">err</span><span class="op" id="8353780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353786">dec</span>&nbsp;<span class="op" id="8353790">:=</span>&nbsp;<span class="ident" id="8353793">NewDecoder</span><span class="op" id="8353803">(</span><span class="ident" id="8353804">b</span><span class="op" id="8353805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353808">x</span>&nbsp;<span class="op" id="8353810">:=</span>&nbsp;<span class="builtinfunc" id="8353813">new</span><span class="op" id="8353816">(</span><span class="ident" id="8353817">GobTest0</span><span class="op" id="8353825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353828">err</span>&nbsp;<span class="op" id="8353832">=</span>&nbsp;<span class="ident" id="8353834">dec</span><span class="op" id="8353837">.</span><span class="ident" id="8353838">Decode</span><span class="op" id="8353844">(</span><span class="ident" id="8353845">x</span><span class="op" id="8353846">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8353849">if</span>&nbsp;<span class="ident" id="8353852">err</span>&nbsp;<span class="op" id="8353856">!=</span>&nbsp;<span class="ident" id="8353859">nil</span>&nbsp;<span class="op" id="8353863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353867">t</span><span class="op" id="8353868">.</span><span class="ident" id="8353869">Fatal</span><span class="op" id="8353874">(</span><span class="string" id="8353875">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8353890">,</span>&nbsp;<span class="ident" id="8353892">err</span><span class="op" id="8353895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8353901">if</span>&nbsp;<span class="ident" id="8353904">x</span><span class="op" id="8353905">.</span><span class="ident" id="8353906">X</span>&nbsp;<span class="op" id="8353908">!=</span>&nbsp;<span class="num" id="8353911">18</span>&nbsp;<span class="op" id="8353914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353918">t</span><span class="op" id="8353919">.</span><span class="ident" id="8353920">Errorf</span><span class="op" id="8353926">(</span><span class="string" id="8353927">&#34;expected&nbsp;x.X&nbsp;=&nbsp;18,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8353954">,</span>&nbsp;<span class="ident" id="8353956">x</span><span class="op" id="8353957">.</span><span class="ident" id="8353958">X</span><span class="op" id="8353959">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8353965">if</span>&nbsp;<span class="ident" id="8353968">x</span><span class="op" id="8353969">.</span><span class="ident" id="8353970">G</span>&nbsp;<span class="op" id="8353972">!=</span>&nbsp;<span class="ident" id="8353975">nil</span>&nbsp;<span class="op" id="8353979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353983">t</span><span class="op" id="8353984">.</span><span class="ident" id="8353985">Errorf</span><span class="op" id="8353991">(</span><span class="string" id="8353992">&#34;expected&nbsp;x.G&nbsp;=&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8354020">,</span>&nbsp;<span class="ident" id="8354022">x</span><span class="op" id="8354023">.</span><span class="ident" id="8354024">G</span><span class="op" id="8354025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354028">}</span><br>
<span class="lineno"></span><span class="op" id="8354030">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="keyword" id="8354033">type</span>&nbsp;<span class="ident" id="8354038">gobDecoderBug0</span>&nbsp;<span class="keyword" id="8354053">struct</span>&nbsp;<span class="op" id="8354060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354063">foo</span><span class="op" id="8354066">,</span>&nbsp;<span class="ident" id="8354068">bar</span>&nbsp;<span class="builtintype" id="8354072">string</span><br>
<span class="lineno"></span><span class="op" id="8354079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="8354082">func</span>&nbsp;<span class="op" id="8354087">(</span><span class="ident" id="8354088">br</span>&nbsp;<span class="op" id="8354091">*</span><span class="ident" id="8354092">gobDecoderBug0</span><span class="op" id="8354106">)</span>&nbsp;<span class="ident" id="8354108">String</span><span class="op" id="8354114">(</span><span class="op" id="8354115">)</span>&nbsp;<span class="builtintype" id="8354117">string</span>&nbsp;<span class="op" id="8354124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8354127">return</span>&nbsp;<span class="ident" id="8354134">br</span><span class="op" id="8354136">.</span><span class="ident" id="8354137">foo</span>&nbsp;<span class="op" id="8354141">+</span>&nbsp;<span class="string" id="8354143">&#34;-&#34;</span>&nbsp;<span class="op" id="8354147">+</span>&nbsp;<span class="ident" id="8354149">br</span><span class="op" id="8354151">.</span><span class="ident" id="8354152">bar</span><br>
<span class="lineno"></span><span class="op" id="8354156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8354159">func</span>&nbsp;<span class="op" id="8354164">(</span><span class="ident" id="8354165">br</span>&nbsp;<span class="op" id="8354168">*</span><span class="ident" id="8354169">gobDecoderBug0</span><span class="op" id="8354183">)</span>&nbsp;<span class="ident" id="8354185">GobEncode</span><span class="op" id="8354194">(</span><span class="op" id="8354195">)</span>&nbsp;<span class="op" id="8354197">(</span><span class="op" id="8354198">[</span><span class="op" id="8354199">]</span><span class="builtintype" id="8354200">byte</span><span class="op" id="8354204">,</span>&nbsp;<span class="builtintype" id="8354206">error</span><span class="op" id="8354211">)</span>&nbsp;<span class="op" id="8354213">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8354216">return</span>&nbsp;<span class="op" id="8354223">[</span><span class="op" id="8354224">]</span><span class="builtintype" id="8354225">byte</span><span class="op" id="8354229">(</span><span class="ident" id="8354230">br</span><span class="op" id="8354232">.</span><span class="ident" id="8354233">String</span><span class="op" id="8354239">(</span><span class="op" id="8354240">)</span><span class="op" id="8354241">)</span><span class="op" id="8354242">,</span>&nbsp;<span class="ident" id="8354244">nil</span><br>
<span class="lineno"></span><span class="op" id="8354248">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8354251">func</span>&nbsp;<span class="op" id="8354256">(</span><span class="ident" id="8354257">br</span>&nbsp;<span class="op" id="8354260">*</span><span class="ident" id="8354261">gobDecoderBug0</span><span class="op" id="8354275">)</span>&nbsp;<span class="ident" id="8354277">GobDecode</span><span class="op" id="8354286">(</span><span class="ident" id="8354287">b</span>&nbsp;<span class="op" id="8354289">[</span><span class="op" id="8354290">]</span><span class="builtintype" id="8354291">byte</span><span class="op" id="8354295">)</span>&nbsp;<span class="builtintype" id="8354297">error</span>&nbsp;<span class="op" id="8354303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354306">br</span><span class="op" id="8354308">.</span><span class="ident" id="8354309">foo</span>&nbsp;<span class="op" id="8354313">=</span>&nbsp;<span class="string" id="8354315">&#34;foo&#34;</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354322">br</span><span class="op" id="8354324">.</span><span class="ident" id="8354325">bar</span>&nbsp;<span class="op" id="8354329">=</span>&nbsp;<span class="string" id="8354331">&#34;bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8354338">return</span>&nbsp;<span class="ident" id="8354345">nil</span><br>
<span class="lineno"></span><span class="op" id="8354349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8354352">//&nbsp;This&nbsp;was&nbsp;a&nbsp;bug:&nbsp;the&nbsp;receiver&nbsp;has&nbsp;a&nbsp;different&nbsp;indirection&nbsp;level</span><br>
<span class="lineno">690</span><span class="comment" id="8354418">//&nbsp;than&nbsp;the&nbsp;variable.</span><br>
<span class="lineno"></span><span class="keyword" id="8354440">func</span>&nbsp;<span class="ident" id="8354445">TestGobEncoderExtraIndirect</span><span class="op" id="8354472">(</span><span class="ident" id="8354473">t</span>&nbsp;<span class="op" id="8354475">*</span><span class="ident" id="8354476">testing</span><span class="op" id="8354483">.</span><span class="ident" id="8354484">T</span><span class="op" id="8354485">)</span>&nbsp;<span class="op" id="8354487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354490">gdb</span>&nbsp;<span class="op" id="8354494">:=</span>&nbsp;<span class="op" id="8354497">&amp;</span><span class="ident" id="8354498">gobDecoderBug0</span><span class="op" id="8354512">{</span><span class="string" id="8354513">&#34;foo&#34;</span><span class="op" id="8354518">,</span>&nbsp;<span class="string" id="8354520">&#34;bar&#34;</span><span class="op" id="8354525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354528">buf</span>&nbsp;<span class="op" id="8354532">:=</span>&nbsp;<span class="builtinfunc" id="8354535">new</span><span class="op" id="8354538">(</span><span class="ident" id="8354539">bytes</span><span class="op" id="8354544">.</span><span class="ident" id="8354545">Buffer</span><span class="op" id="8354551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354554">e</span>&nbsp;<span class="op" id="8354556">:=</span>&nbsp;<span class="ident" id="8354559">NewEncoder</span><span class="op" id="8354569">(</span><span class="ident" id="8354570">buf</span><span class="op" id="8354573">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8354576">if</span>&nbsp;<span class="ident" id="8354579">err</span>&nbsp;<span class="op" id="8354583">:=</span>&nbsp;<span class="ident" id="8354586">e</span><span class="op" id="8354587">.</span><span class="ident" id="8354588">Encode</span><span class="op" id="8354594">(</span><span class="ident" id="8354595">gdb</span><span class="op" id="8354598">)</span><span class="op" id="8354599">;</span>&nbsp;<span class="ident" id="8354601">err</span>&nbsp;<span class="op" id="8354605">!=</span>&nbsp;<span class="ident" id="8354608">nil</span>&nbsp;<span class="op" id="8354612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354616">t</span><span class="op" id="8354617">.</span><span class="ident" id="8354618">Fatalf</span><span class="op" id="8354624">(</span><span class="string" id="8354625">&#34;encode:&nbsp;%v&#34;</span><span class="op" id="8354637">,</span>&nbsp;<span class="ident" id="8354639">err</span><span class="op" id="8354642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354648">d</span>&nbsp;<span class="op" id="8354650">:=</span>&nbsp;<span class="ident" id="8354653">NewDecoder</span><span class="op" id="8354663">(</span><span class="ident" id="8354664">buf</span><span class="op" id="8354667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8354670">var</span>&nbsp;<span class="ident" id="8354674">got</span>&nbsp;<span class="op" id="8354678">*</span><span class="ident" id="8354679">gobDecoderBug0</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8354695">if</span>&nbsp;<span class="ident" id="8354698">err</span>&nbsp;<span class="op" id="8354702">:=</span>&nbsp;<span class="ident" id="8354705">d</span><span class="op" id="8354706">.</span><span class="ident" id="8354707">Decode</span><span class="op" id="8354713">(</span><span class="op" id="8354714">&amp;</span><span class="ident" id="8354715">got</span><span class="op" id="8354718">)</span><span class="op" id="8354719">;</span>&nbsp;<span class="ident" id="8354721">err</span>&nbsp;<span class="op" id="8354725">!=</span>&nbsp;<span class="ident" id="8354728">nil</span>&nbsp;<span class="op" id="8354732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354736">t</span><span class="op" id="8354737">.</span><span class="ident" id="8354738">Fatalf</span><span class="op" id="8354744">(</span><span class="string" id="8354745">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="8354757">,</span>&nbsp;<span class="ident" id="8354759">err</span><span class="op" id="8354762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8354768">if</span>&nbsp;<span class="ident" id="8354771">got</span><span class="op" id="8354774">.</span><span class="ident" id="8354775">foo</span>&nbsp;<span class="op" id="8354779">!=</span>&nbsp;<span class="ident" id="8354782">gdb</span><span class="op" id="8354785">.</span><span class="ident" id="8354786">foo</span>&nbsp;<span class="op" id="8354790">||</span>&nbsp;<span class="ident" id="8354793">got</span><span class="op" id="8354796">.</span><span class="ident" id="8354797">bar</span>&nbsp;<span class="op" id="8354801">!=</span>&nbsp;<span class="ident" id="8354804">gdb</span><span class="op" id="8354807">.</span><span class="ident" id="8354808">bar</span>&nbsp;<span class="op" id="8354812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354816">t</span><span class="op" id="8354817">.</span><span class="ident" id="8354818">Errorf</span><span class="op" id="8354824">(</span><span class="string" id="8354825">&#34;got&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8354844">,</span>&nbsp;<span class="ident" id="8354846">got</span><span class="op" id="8354849">,</span>&nbsp;<span class="ident" id="8354851">gdb</span><span class="op" id="8354854">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354857">}</span><br>
<span class="lineno"></span><span class="op" id="8354859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8354862">//&nbsp;Another&nbsp;bug:&nbsp;this&nbsp;caused&nbsp;a&nbsp;crash&nbsp;with&nbsp;the&nbsp;new&nbsp;Go1&nbsp;Time&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="8354926">//&nbsp;We&nbsp;throw&nbsp;in&nbsp;a&nbsp;gob-encoding&nbsp;array,&nbsp;to&nbsp;test&nbsp;another&nbsp;case&nbsp;of&nbsp;isZero,</span><br>
<span class="lineno">710</span><span class="comment" id="8354995">//&nbsp;and&nbsp;a&nbsp;struct&nbsp;containing&nbsp;an&nbsp;nil&nbsp;interface,&nbsp;to&nbsp;test&nbsp;a&nbsp;third.</span><br>
<span class="lineno"></span><span class="keyword" id="8355057">type</span>&nbsp;<span class="ident" id="8355062">isZeroBug</span>&nbsp;<span class="keyword" id="8355072">struct</span>&nbsp;<span class="op" id="8355079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355082">T</span>&nbsp;<span class="ident" id="8355084">time</span><span class="op" id="8355088">.</span><span class="ident" id="8355089">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355095">S</span>&nbsp;<span class="builtintype" id="8355097">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355105">I</span>&nbsp;<span class="builtintype" id="8355107">int</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355112">A</span>&nbsp;<span class="ident" id="8355114">isZeroBugArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355130">F</span>&nbsp;<span class="ident" id="8355132">isZeroBugInterface</span><br>
<span class="lineno"></span><span class="op" id="8355151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8355154">type</span>&nbsp;<span class="ident" id="8355159">isZeroBugArray</span>&nbsp;<span class="op" id="8355174">[</span><span class="num" id="8355175">2</span><span class="op" id="8355176">]</span><span class="builtintype" id="8355177">uint8</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span><span class="comment" id="8355184">//&nbsp;Receiver&nbsp;is&nbsp;value,&nbsp;not&nbsp;pointer,&nbsp;to&nbsp;test&nbsp;isZero&nbsp;of&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="8355244">func</span>&nbsp;<span class="op" id="8355249">(</span><span class="ident" id="8355250">a</span>&nbsp;<span class="ident" id="8355252">isZeroBugArray</span><span class="op" id="8355266">)</span>&nbsp;<span class="ident" id="8355268">GobEncode</span><span class="op" id="8355277">(</span><span class="op" id="8355278">)</span>&nbsp;<span class="op" id="8355280">(</span><span class="ident" id="8355281">b</span>&nbsp;<span class="op" id="8355283">[</span><span class="op" id="8355284">]</span><span class="builtintype" id="8355285">byte</span><span class="op" id="8355289">,</span>&nbsp;<span class="ident" id="8355291">e</span>&nbsp;<span class="builtintype" id="8355293">error</span><span class="op" id="8355298">)</span>&nbsp;<span class="op" id="8355300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355303">b</span>&nbsp;<span class="op" id="8355305">=</span>&nbsp;<span class="builtinfunc" id="8355307">append</span><span class="op" id="8355313">(</span><span class="ident" id="8355314">b</span><span class="op" id="8355315">,</span>&nbsp;<span class="ident" id="8355317">a</span><span class="op" id="8355318">[</span><span class="op" id="8355319">:</span><span class="op" id="8355320">]</span><span class="op" id="8355321">...</span><span class="op" id="8355324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8355327">return</span>&nbsp;<span class="ident" id="8355334">b</span><span class="op" id="8355335">,</span>&nbsp;<span class="ident" id="8355337">nil</span><br>
<span class="lineno">725</span><span class="op" id="8355341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8355344">func</span>&nbsp;<span class="op" id="8355349">(</span><span class="ident" id="8355350">a</span>&nbsp;<span class="op" id="8355352">*</span><span class="ident" id="8355353">isZeroBugArray</span><span class="op" id="8355367">)</span>&nbsp;<span class="ident" id="8355369">GobDecode</span><span class="op" id="8355378">(</span><span class="ident" id="8355379">data</span>&nbsp;<span class="op" id="8355384">[</span><span class="op" id="8355385">]</span><span class="builtintype" id="8355386">byte</span><span class="op" id="8355390">)</span>&nbsp;<span class="builtintype" id="8355392">error</span>&nbsp;<span class="op" id="8355398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8355401">if</span>&nbsp;<span class="builtinfunc" id="8355404">len</span><span class="op" id="8355407">(</span><span class="ident" id="8355408">data</span><span class="op" id="8355412">)</span>&nbsp;<span class="op" id="8355414">!=</span>&nbsp;<span class="builtinfunc" id="8355417">len</span><span class="op" id="8355420">(</span><span class="ident" id="8355421">a</span><span class="op" id="8355422">)</span>&nbsp;<span class="op" id="8355424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8355428">return</span>&nbsp;<span class="ident" id="8355435">io</span><span class="op" id="8355437">.</span><span class="ident" id="8355438">EOF</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8355443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355446">a</span><span class="op" id="8355447">[</span><span class="num" id="8355448">0</span><span class="op" id="8355449">]</span>&nbsp;<span class="op" id="8355451">=</span>&nbsp;<span class="ident" id="8355453">data</span><span class="op" id="8355457">[</span><span class="num" id="8355458">0</span><span class="op" id="8355459">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355462">a</span><span class="op" id="8355463">[</span><span class="num" id="8355464">1</span><span class="op" id="8355465">]</span>&nbsp;<span class="op" id="8355467">=</span>&nbsp;<span class="ident" id="8355469">data</span><span class="op" id="8355473">[</span><span class="num" id="8355474">1</span><span class="op" id="8355475">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8355478">return</span>&nbsp;<span class="ident" id="8355485">nil</span><br>
<span class="lineno"></span><span class="op" id="8355489">}</span><br>
<span class="lineno">735</span><br>
<span class="lineno"></span><span class="keyword" id="8355492">type</span>&nbsp;<span class="ident" id="8355497">isZeroBugInterface</span>&nbsp;<span class="keyword" id="8355516">struct</span>&nbsp;<span class="op" id="8355523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355526">I</span>&nbsp;<span class="keyword" id="8355528">interface</span><span class="op" id="8355537">{</span><span class="op" id="8355538">}</span><br>
<span class="lineno"></span><span class="op" id="8355540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="keyword" id="8355543">func</span>&nbsp;<span class="op" id="8355548">(</span><span class="ident" id="8355549">i</span>&nbsp;<span class="ident" id="8355551">isZeroBugInterface</span><span class="op" id="8355569">)</span>&nbsp;<span class="ident" id="8355571">GobEncode</span><span class="op" id="8355580">(</span><span class="op" id="8355581">)</span>&nbsp;<span class="op" id="8355583">(</span><span class="ident" id="8355584">b</span>&nbsp;<span class="op" id="8355586">[</span><span class="op" id="8355587">]</span><span class="builtintype" id="8355588">byte</span><span class="op" id="8355592">,</span>&nbsp;<span class="ident" id="8355594">e</span>&nbsp;<span class="builtintype" id="8355596">error</span><span class="op" id="8355601">)</span>&nbsp;<span class="op" id="8355603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8355606">return</span>&nbsp;<span class="op" id="8355613">[</span><span class="op" id="8355614">]</span><span class="builtintype" id="8355615">byte</span><span class="op" id="8355619">{</span><span class="op" id="8355620">}</span><span class="op" id="8355621">,</span>&nbsp;<span class="ident" id="8355623">nil</span><br>
<span class="lineno"></span><span class="op" id="8355627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8355630">func</span>&nbsp;<span class="op" id="8355635">(</span><span class="ident" id="8355636">i</span>&nbsp;<span class="op" id="8355638">*</span><span class="ident" id="8355639">isZeroBugInterface</span><span class="op" id="8355657">)</span>&nbsp;<span class="ident" id="8355659">GobDecode</span><span class="op" id="8355668">(</span><span class="ident" id="8355669">data</span>&nbsp;<span class="op" id="8355674">[</span><span class="op" id="8355675">]</span><span class="builtintype" id="8355676">byte</span><span class="op" id="8355680">)</span>&nbsp;<span class="builtintype" id="8355682">error</span>&nbsp;<span class="op" id="8355688">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8355691">return</span>&nbsp;<span class="ident" id="8355698">nil</span><br>
<span class="lineno"></span><span class="op" id="8355702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8355705">func</span>&nbsp;<span class="ident" id="8355710">TestGobEncodeIsZero</span><span class="op" id="8355729">(</span><span class="ident" id="8355730">t</span>&nbsp;<span class="op" id="8355732">*</span><span class="ident" id="8355733">testing</span><span class="op" id="8355740">.</span><span class="ident" id="8355741">T</span><span class="op" id="8355742">)</span>&nbsp;<span class="op" id="8355744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355747">x</span>&nbsp;<span class="op" id="8355749">:=</span>&nbsp;<span class="ident" id="8355752">isZeroBug</span><span class="op" id="8355761">{</span><span class="ident" id="8355762">time</span><span class="op" id="8355766">.</span><span class="ident" id="8355767">Now</span><span class="op" id="8355770">(</span><span class="op" id="8355771">)</span><span class="op" id="8355772">,</span>&nbsp;<span class="string" id="8355774">&#34;hello&#34;</span><span class="op" id="8355781">,</span>&nbsp;<span class="op" id="8355783">-</span><span class="num" id="8355784">55</span><span class="op" id="8355786">,</span>&nbsp;<span class="ident" id="8355788">isZeroBugArray</span><span class="op" id="8355802">{</span><span class="num" id="8355803">1</span><span class="op" id="8355804">,</span>&nbsp;<span class="num" id="8355806">2</span><span class="op" id="8355807">}</span><span class="op" id="8355808">,</span>&nbsp;<span class="ident" id="8355810">isZeroBugInterface</span><span class="op" id="8355828">{</span><span class="op" id="8355829">}</span><span class="op" id="8355830">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355833">b</span>&nbsp;<span class="op" id="8355835">:=</span>&nbsp;<span class="builtinfunc" id="8355838">new</span><span class="op" id="8355841">(</span><span class="ident" id="8355842">bytes</span><span class="op" id="8355847">.</span><span class="ident" id="8355848">Buffer</span><span class="op" id="8355854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355857">enc</span>&nbsp;<span class="op" id="8355861">:=</span>&nbsp;<span class="ident" id="8355864">NewEncoder</span><span class="op" id="8355874">(</span><span class="ident" id="8355875">b</span><span class="op" id="8355876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355879">err</span>&nbsp;<span class="op" id="8355883">:=</span>&nbsp;<span class="ident" id="8355886">enc</span><span class="op" id="8355889">.</span><span class="ident" id="8355890">Encode</span><span class="op" id="8355896">(</span><span class="ident" id="8355897">x</span><span class="op" id="8355898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8355901">if</span>&nbsp;<span class="ident" id="8355904">err</span>&nbsp;<span class="op" id="8355908">!=</span>&nbsp;<span class="ident" id="8355911">nil</span>&nbsp;<span class="op" id="8355915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355919">t</span><span class="op" id="8355920">.</span><span class="ident" id="8355921">Fatal</span><span class="op" id="8355926">(</span><span class="string" id="8355927">&#34;encode:&#34;</span><span class="op" id="8355936">,</span>&nbsp;<span class="ident" id="8355938">err</span><span class="op" id="8355941">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8355944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8355947">var</span>&nbsp;<span class="ident" id="8355951">y</span>&nbsp;<span class="ident" id="8355953">isZeroBug</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355964">dec</span>&nbsp;<span class="op" id="8355968">:=</span>&nbsp;<span class="ident" id="8355971">NewDecoder</span><span class="op" id="8355981">(</span><span class="ident" id="8355982">b</span><span class="op" id="8355983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355986">err</span>&nbsp;<span class="op" id="8355990">=</span>&nbsp;<span class="ident" id="8355992">dec</span><span class="op" id="8355995">.</span><span class="ident" id="8355996">Decode</span><span class="op" id="8356002">(</span><span class="op" id="8356003">&amp;</span><span class="ident" id="8356004">y</span><span class="op" id="8356005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8356008">if</span>&nbsp;<span class="ident" id="8356011">err</span>&nbsp;<span class="op" id="8356015">!=</span>&nbsp;<span class="ident" id="8356018">nil</span>&nbsp;<span class="op" id="8356022">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356026">t</span><span class="op" id="8356027">.</span><span class="ident" id="8356028">Fatal</span><span class="op" id="8356033">(</span><span class="string" id="8356034">&#34;decode:&#34;</span><span class="op" id="8356043">,</span>&nbsp;<span class="ident" id="8356045">err</span><span class="op" id="8356048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8356054">if</span>&nbsp;<span class="ident" id="8356057">x</span>&nbsp;<span class="op" id="8356059">!=</span>&nbsp;<span class="ident" id="8356062">y</span>&nbsp;<span class="op" id="8356064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356068">t</span><span class="op" id="8356069">.</span><span class="ident" id="8356070">Fatalf</span><span class="op" id="8356076">(</span><span class="string" id="8356077">&#34;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="8356087">,</span>&nbsp;<span class="ident" id="8356089">x</span><span class="op" id="8356090">,</span>&nbsp;<span class="ident" id="8356092">y</span><span class="op" id="8356093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356096">}</span><br>
<span class="lineno">765</span><span class="op" id="8356098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8356101">func</span>&nbsp;<span class="ident" id="8356106">TestGobEncodePtrError</span><span class="op" id="8356127">(</span><span class="ident" id="8356128">t</span>&nbsp;<span class="op" id="8356130">*</span><span class="ident" id="8356131">testing</span><span class="op" id="8356138">.</span><span class="ident" id="8356139">T</span><span class="op" id="8356140">)</span>&nbsp;<span class="op" id="8356142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8356145">var</span>&nbsp;<span class="ident" id="8356149">err</span>&nbsp;<span class="builtintype" id="8356153">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356160">b</span>&nbsp;<span class="op" id="8356162">:=</span>&nbsp;<span class="builtinfunc" id="8356165">new</span><span class="op" id="8356168">(</span><span class="ident" id="8356169">bytes</span><span class="op" id="8356174">.</span><span class="ident" id="8356175">Buffer</span><span class="op" id="8356181">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356184">enc</span>&nbsp;<span class="op" id="8356188">:=</span>&nbsp;<span class="ident" id="8356191">NewEncoder</span><span class="op" id="8356201">(</span><span class="ident" id="8356202">b</span><span class="op" id="8356203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356206">err</span>&nbsp;<span class="op" id="8356210">=</span>&nbsp;<span class="ident" id="8356212">enc</span><span class="op" id="8356215">.</span><span class="ident" id="8356216">Encode</span><span class="op" id="8356222">(</span><span class="op" id="8356223">&amp;</span><span class="ident" id="8356224">err</span><span class="op" id="8356227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8356230">if</span>&nbsp;<span class="ident" id="8356233">err</span>&nbsp;<span class="op" id="8356237">!=</span>&nbsp;<span class="ident" id="8356240">nil</span>&nbsp;<span class="op" id="8356244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356248">t</span><span class="op" id="8356249">.</span><span class="ident" id="8356250">Fatal</span><span class="op" id="8356255">(</span><span class="string" id="8356256">&#34;encode:&#34;</span><span class="op" id="8356265">,</span>&nbsp;<span class="ident" id="8356267">err</span><span class="op" id="8356270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356273">}</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356276">dec</span>&nbsp;<span class="op" id="8356280">:=</span>&nbsp;<span class="ident" id="8356283">NewDecoder</span><span class="op" id="8356293">(</span><span class="ident" id="8356294">b</span><span class="op" id="8356295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356298">err2</span>&nbsp;<span class="op" id="8356303">:=</span>&nbsp;<span class="ident" id="8356306">fmt</span><span class="op" id="8356309">.</span><span class="ident" id="8356310">Errorf</span><span class="op" id="8356316">(</span><span class="string" id="8356317">&#34;foo&#34;</span><span class="op" id="8356322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356325">err</span>&nbsp;<span class="op" id="8356329">=</span>&nbsp;<span class="ident" id="8356331">dec</span><span class="op" id="8356334">.</span><span class="ident" id="8356335">Decode</span><span class="op" id="8356341">(</span><span class="op" id="8356342">&amp;</span><span class="ident" id="8356343">err2</span><span class="op" id="8356347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8356350">if</span>&nbsp;<span class="ident" id="8356353">err</span>&nbsp;<span class="op" id="8356357">!=</span>&nbsp;<span class="ident" id="8356360">nil</span>&nbsp;<span class="op" id="8356364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356368">t</span><span class="op" id="8356369">.</span><span class="ident" id="8356370">Fatal</span><span class="op" id="8356375">(</span><span class="string" id="8356376">&#34;decode:&#34;</span><span class="op" id="8356385">,</span>&nbsp;<span class="ident" id="8356387">err</span><span class="op" id="8356390">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8356396">if</span>&nbsp;<span class="ident" id="8356399">err2</span>&nbsp;<span class="op" id="8356404">!=</span>&nbsp;<span class="ident" id="8356407">nil</span>&nbsp;<span class="op" id="8356411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356415">t</span><span class="op" id="8356416">.</span><span class="ident" id="8356417">Fatalf</span><span class="op" id="8356423">(</span><span class="string" id="8356424">&#34;expected&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8356446">,</span>&nbsp;<span class="ident" id="8356448">err2</span><span class="op" id="8356452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356455">}</span><br>
<span class="lineno"></span><span class="op" id="8356457">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="keyword" id="8356460">func</span>&nbsp;<span class="ident" id="8356465">TestNetIP</span><span class="op" id="8356474">(</span><span class="ident" id="8356475">t</span>&nbsp;<span class="op" id="8356477">*</span><span class="ident" id="8356478">testing</span><span class="op" id="8356485">.</span><span class="ident" id="8356486">T</span><span class="op" id="8356487">)</span>&nbsp;<span class="op" id="8356489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8356492">//&nbsp;Encoding&nbsp;of&nbsp;net.IP{1,2,3,4}&nbsp;in&nbsp;Go&nbsp;1.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356535">enc</span>&nbsp;<span class="op" id="8356539">:=</span>&nbsp;<span class="op" id="8356542">[</span><span class="op" id="8356543">]</span><span class="builtintype" id="8356544">byte</span><span class="op" id="8356548">{</span><span class="num" id="8356549">0x07</span><span class="op" id="8356553">,</span>&nbsp;<span class="num" id="8356555">0x0a</span><span class="op" id="8356559">,</span>&nbsp;<span class="num" id="8356561">0x00</span><span class="op" id="8356565">,</span>&nbsp;<span class="num" id="8356567">0x04</span><span class="op" id="8356571">,</span>&nbsp;<span class="num" id="8356573">0x01</span><span class="op" id="8356577">,</span>&nbsp;<span class="num" id="8356579">0x02</span><span class="op" id="8356583">,</span>&nbsp;<span class="num" id="8356585">0x03</span><span class="op" id="8356589">,</span>&nbsp;<span class="num" id="8356591">0x04</span><span class="op" id="8356595">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8356599">var</span>&nbsp;<span class="ident" id="8356603">ip</span>&nbsp;<span class="ident" id="8356606">net</span><span class="op" id="8356609">.</span><span class="ident" id="8356610">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356614">err</span>&nbsp;<span class="op" id="8356618">:=</span>&nbsp;<span class="ident" id="8356621">NewDecoder</span><span class="op" id="8356631">(</span><span class="ident" id="8356632">bytes</span><span class="op" id="8356637">.</span><span class="ident" id="8356638">NewReader</span><span class="op" id="8356647">(</span><span class="ident" id="8356648">enc</span><span class="op" id="8356651">)</span><span class="op" id="8356652">)</span><span class="op" id="8356653">.</span><span class="ident" id="8356654">Decode</span><span class="op" id="8356660">(</span><span class="op" id="8356661">&amp;</span><span class="ident" id="8356662">ip</span><span class="op" id="8356664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8356667">if</span>&nbsp;<span class="ident" id="8356670">err</span>&nbsp;<span class="op" id="8356674">!=</span>&nbsp;<span class="ident" id="8356677">nil</span>&nbsp;<span class="op" id="8356681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356685">t</span><span class="op" id="8356686">.</span><span class="ident" id="8356687">Fatalf</span><span class="op" id="8356693">(</span><span class="string" id="8356694">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="8356706">,</span>&nbsp;<span class="ident" id="8356708">err</span><span class="op" id="8356711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356714">}</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8356717">if</span>&nbsp;<span class="ident" id="8356720">ip</span><span class="op" id="8356722">.</span><span class="ident" id="8356723">String</span><span class="op" id="8356729">(</span><span class="op" id="8356730">)</span>&nbsp;<span class="op" id="8356732">!=</span>&nbsp;<span class="string" id="8356735">&#34;1.2.3.4&#34;</span>&nbsp;<span class="op" id="8356745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356749">t</span><span class="op" id="8356750">.</span><span class="ident" id="8356751">Errorf</span><span class="op" id="8356757">(</span><span class="string" id="8356758">&#34;decoded&nbsp;to&nbsp;%v,&nbsp;want&nbsp;1.2.3.4&#34;</span><span class="op" id="8356787">,</span>&nbsp;<span class="ident" id="8356789">ip</span><span class="op" id="8356791">.</span><span class="ident" id="8356792">String</span><span class="op" id="8356798">(</span><span class="op" id="8356799">)</span><span class="op" id="8356800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356803">}</span><br>
<span class="lineno"></span><span class="op" id="8356805">}</span>
</div>
</body>
</html>
