<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/fnv</h2>
<ul>
<li><a href="/gostd/hash/fnv/fnv.go.html">fnv.go</a></li>
<li><a href="/gostd/hash/fnv/fnv_test.go.html">fnv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6058027">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6058082">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6058136">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6058187">//&nbsp;Package&nbsp;fnv&nbsp;implements&nbsp;FNV-1&nbsp;and&nbsp;FNV-1a,&nbsp;non-cryptographic&nbsp;hash&nbsp;functions</span><br>
<span class="lineno"></span><span class="comment" id="6058264">//&nbsp;created&nbsp;by&nbsp;Glenn&nbsp;Fowler,&nbsp;Landon&nbsp;Curt&nbsp;Noll,&nbsp;and&nbsp;Phong&nbsp;Vo.</span><br>
<span class="lineno"></span><span class="comment" id="6058324">//&nbsp;See</span><br>
<span class="lineno"></span><span class="comment" id="6058331">//&nbsp;http://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function.</span><br>
<span class="lineno"></span><span class="keyword" id="6058409">package</span>&nbsp;<span class="ident" id="6058417">fnv</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="6058422">import</span>&nbsp;<span class="op" id="6058429">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6058432">&#34;hash&#34;</span><br>
<span class="lineno"></span><span class="op" id="6058439">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6058442">type</span>&nbsp;<span class="op" id="6058447">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058450">sum32</span>&nbsp;&nbsp;<span class="builtintype" id="6058457">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058465">sum32a</span>&nbsp;<span class="builtintype" id="6058472">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058480">sum64</span>&nbsp;&nbsp;<span class="ident" id="6058487">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058495">sum64a</span>&nbsp;<span class="ident" id="6058502">uint64</span><br>
<span class="lineno">20</span><span class="op" id="6058509">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6058512">const</span>&nbsp;<span class="op" id="6058518">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058521">offset32</span>&nbsp;<span class="op" id="6058530">=</span>&nbsp;<span class="num" id="6058532">2166136261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058544">offset64</span>&nbsp;<span class="op" id="6058553">=</span>&nbsp;<span class="num" id="6058555">14695981039346656037</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058577">prime32</span>&nbsp;&nbsp;<span class="op" id="6058586">=</span>&nbsp;<span class="num" id="6058588">16777619</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058598">prime64</span>&nbsp;&nbsp;<span class="op" id="6058607">=</span>&nbsp;<span class="num" id="6058609">1099511628211</span><br>
<span class="lineno"></span><span class="op" id="6058623">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6058626">//&nbsp;New32&nbsp;returns&nbsp;a&nbsp;new&nbsp;32-bit&nbsp;FNV-1&nbsp;hash.Hash.</span><br>
<span class="lineno">30</span><span class="keyword" id="6058673">func</span>&nbsp;<span class="ident" id="6058678">New32</span><span class="op" id="6058683">(</span><span class="op" id="6058684">)</span>&nbsp;<span class="ident" id="6058686">hash</span><span class="op" id="6058690">.</span><span class="ident" id="6058691">Hash32</span>&nbsp;<span class="op" id="6058698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6058701">var</span>&nbsp;<span class="ident" id="6058705">s</span>&nbsp;<span class="ident" id="6058707">sum32</span>&nbsp;<span class="op" id="6058713">=</span>&nbsp;<span class="ident" id="6058715">offset32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6058725">return</span>&nbsp;<span class="op" id="6058732">&amp;</span><span class="ident" id="6058733">s</span><br>
<span class="lineno"></span><span class="op" id="6058735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="6058738">//&nbsp;New32a&nbsp;returns&nbsp;a&nbsp;new&nbsp;32-bit&nbsp;FNV-1a&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="6058787">func</span>&nbsp;<span class="ident" id="6058792">New32a</span><span class="op" id="6058798">(</span><span class="op" id="6058799">)</span>&nbsp;<span class="ident" id="6058801">hash</span><span class="op" id="6058805">.</span><span class="ident" id="6058806">Hash32</span>&nbsp;<span class="op" id="6058813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6058816">var</span>&nbsp;<span class="ident" id="6058820">s</span>&nbsp;<span class="ident" id="6058822">sum32a</span>&nbsp;<span class="op" id="6058829">=</span>&nbsp;<span class="ident" id="6058831">offset32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6058841">return</span>&nbsp;<span class="op" id="6058848">&amp;</span><span class="ident" id="6058849">s</span><br>
<span class="lineno"></span><span class="op" id="6058851">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="6058854">//&nbsp;New64&nbsp;returns&nbsp;a&nbsp;new&nbsp;64-bit&nbsp;FNV-1&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="6058901">func</span>&nbsp;<span class="ident" id="6058906">New64</span><span class="op" id="6058911">(</span><span class="op" id="6058912">)</span>&nbsp;<span class="ident" id="6058914">hash</span><span class="op" id="6058918">.</span><span class="ident" id="6058919">Hash64</span>&nbsp;<span class="op" id="6058926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6058929">var</span>&nbsp;<span class="ident" id="6058933">s</span>&nbsp;<span class="ident" id="6058935">sum64</span>&nbsp;<span class="op" id="6058941">=</span>&nbsp;<span class="ident" id="6058943">offset64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6058953">return</span>&nbsp;<span class="op" id="6058960">&amp;</span><span class="ident" id="6058961">s</span><br>
<span class="lineno">45</span><span class="op" id="6058963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6058966">//&nbsp;New64a&nbsp;returns&nbsp;a&nbsp;new&nbsp;64-bit&nbsp;FNV-1a&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="6059015">func</span>&nbsp;<span class="ident" id="6059020">New64a</span><span class="op" id="6059026">(</span><span class="op" id="6059027">)</span>&nbsp;<span class="ident" id="6059029">hash</span><span class="op" id="6059033">.</span><span class="ident" id="6059034">Hash64</span>&nbsp;<span class="op" id="6059041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6059044">var</span>&nbsp;<span class="ident" id="6059048">s</span>&nbsp;<span class="ident" id="6059050">sum64a</span>&nbsp;<span class="op" id="6059057">=</span>&nbsp;<span class="ident" id="6059059">offset64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6059069">return</span>&nbsp;<span class="op" id="6059076">&amp;</span><span class="ident" id="6059077">s</span><br>
<span class="lineno"></span><span class="op" id="6059079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6059082">func</span>&nbsp;<span class="op" id="6059087">(</span><span class="ident" id="6059088">s</span>&nbsp;<span class="op" id="6059090">*</span><span class="ident" id="6059091">sum32</span><span class="op" id="6059096">)</span>&nbsp;<span class="ident" id="6059098">Reset</span><span class="op" id="6059103">(</span><span class="op" id="6059104">)</span>&nbsp;&nbsp;<span class="op" id="6059107">{</span>&nbsp;<span class="op" id="6059109">*</span><span class="ident" id="6059110">s</span>&nbsp;<span class="op" id="6059112">=</span>&nbsp;<span class="ident" id="6059114">offset32</span>&nbsp;<span class="op" id="6059123">}</span><br>
<span class="lineno"></span><span class="keyword" id="6059125">func</span>&nbsp;<span class="op" id="6059130">(</span><span class="ident" id="6059131">s</span>&nbsp;<span class="op" id="6059133">*</span><span class="ident" id="6059134">sum32a</span><span class="op" id="6059140">)</span>&nbsp;<span class="ident" id="6059142">Reset</span><span class="op" id="6059147">(</span><span class="op" id="6059148">)</span>&nbsp;<span class="op" id="6059150">{</span>&nbsp;<span class="op" id="6059152">*</span><span class="ident" id="6059153">s</span>&nbsp;<span class="op" id="6059155">=</span>&nbsp;<span class="ident" id="6059157">offset32</span>&nbsp;<span class="op" id="6059166">}</span><br>
<span class="lineno">55</span><span class="keyword" id="6059168">func</span>&nbsp;<span class="op" id="6059173">(</span><span class="ident" id="6059174">s</span>&nbsp;<span class="op" id="6059176">*</span><span class="ident" id="6059177">sum64</span><span class="op" id="6059182">)</span>&nbsp;<span class="ident" id="6059184">Reset</span><span class="op" id="6059189">(</span><span class="op" id="6059190">)</span>&nbsp;&nbsp;<span class="op" id="6059193">{</span>&nbsp;<span class="op" id="6059195">*</span><span class="ident" id="6059196">s</span>&nbsp;<span class="op" id="6059198">=</span>&nbsp;<span class="ident" id="6059200">offset64</span>&nbsp;<span class="op" id="6059209">}</span><br>
<span class="lineno"></span><span class="keyword" id="6059211">func</span>&nbsp;<span class="op" id="6059216">(</span><span class="ident" id="6059217">s</span>&nbsp;<span class="op" id="6059219">*</span><span class="ident" id="6059220">sum64a</span><span class="op" id="6059226">)</span>&nbsp;<span class="ident" id="6059228">Reset</span><span class="op" id="6059233">(</span><span class="op" id="6059234">)</span>&nbsp;<span class="op" id="6059236">{</span>&nbsp;<span class="op" id="6059238">*</span><span class="ident" id="6059239">s</span>&nbsp;<span class="op" id="6059241">=</span>&nbsp;<span class="ident" id="6059243">offset64</span>&nbsp;<span class="op" id="6059252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6059255">func</span>&nbsp;<span class="op" id="6059260">(</span><span class="ident" id="6059261">s</span>&nbsp;<span class="op" id="6059263">*</span><span class="ident" id="6059264">sum32</span><span class="op" id="6059269">)</span>&nbsp;<span class="ident" id="6059271">Sum32</span><span class="op" id="6059276">(</span><span class="op" id="6059277">)</span>&nbsp;<span class="builtintype" id="6059279">uint32</span>&nbsp;&nbsp;<span class="op" id="6059287">{</span>&nbsp;<span class="keyword" id="6059289">return</span>&nbsp;<span class="builtintype" id="6059296">uint32</span><span class="op" id="6059302">(</span><span class="op" id="6059303">*</span><span class="ident" id="6059304">s</span><span class="op" id="6059305">)</span>&nbsp;<span class="op" id="6059307">}</span><br>
<span class="lineno"></span><span class="keyword" id="6059309">func</span>&nbsp;<span class="op" id="6059314">(</span><span class="ident" id="6059315">s</span>&nbsp;<span class="op" id="6059317">*</span><span class="ident" id="6059318">sum32a</span><span class="op" id="6059324">)</span>&nbsp;<span class="ident" id="6059326">Sum32</span><span class="op" id="6059331">(</span><span class="op" id="6059332">)</span>&nbsp;<span class="builtintype" id="6059334">uint32</span>&nbsp;<span class="op" id="6059341">{</span>&nbsp;<span class="keyword" id="6059343">return</span>&nbsp;<span class="builtintype" id="6059350">uint32</span><span class="op" id="6059356">(</span><span class="op" id="6059357">*</span><span class="ident" id="6059358">s</span><span class="op" id="6059359">)</span>&nbsp;<span class="op" id="6059361">}</span><br>
<span class="lineno">60</span><span class="keyword" id="6059363">func</span>&nbsp;<span class="op" id="6059368">(</span><span class="ident" id="6059369">s</span>&nbsp;<span class="op" id="6059371">*</span><span class="ident" id="6059372">sum64</span><span class="op" id="6059377">)</span>&nbsp;<span class="ident" id="6059379">Sum64</span><span class="op" id="6059384">(</span><span class="op" id="6059385">)</span>&nbsp;<span class="ident" id="6059387">uint64</span>&nbsp;&nbsp;<span class="op" id="6059395">{</span>&nbsp;<span class="keyword" id="6059397">return</span>&nbsp;<span class="ident" id="6059404">uint64</span><span class="op" id="6059410">(</span><span class="op" id="6059411">*</span><span class="ident" id="6059412">s</span><span class="op" id="6059413">)</span>&nbsp;<span class="op" id="6059415">}</span><br>
<span class="lineno"></span><span class="keyword" id="6059417">func</span>&nbsp;<span class="op" id="6059422">(</span><span class="ident" id="6059423">s</span>&nbsp;<span class="op" id="6059425">*</span><span class="ident" id="6059426">sum64a</span><span class="op" id="6059432">)</span>&nbsp;<span class="ident" id="6059434">Sum64</span><span class="op" id="6059439">(</span><span class="op" id="6059440">)</span>&nbsp;<span class="ident" id="6059442">uint64</span>&nbsp;<span class="op" id="6059449">{</span>&nbsp;<span class="keyword" id="6059451">return</span>&nbsp;<span class="ident" id="6059458">uint64</span><span class="op" id="6059464">(</span><span class="op" id="6059465">*</span><span class="ident" id="6059466">s</span><span class="op" id="6059467">)</span>&nbsp;<span class="op" id="6059469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6059472">func</span>&nbsp;<span class="op" id="6059477">(</span><span class="ident" id="6059478">s</span>&nbsp;<span class="op" id="6059480">*</span><span class="ident" id="6059481">sum32</span><span class="op" id="6059486">)</span>&nbsp;<span class="ident" id="6059488">Write</span><span class="op" id="6059493">(</span><span class="ident" id="6059494">data</span>&nbsp;<span class="op" id="6059499">[</span><span class="op" id="6059500">]</span><span class="builtintype" id="6059501">byte</span><span class="op" id="6059505">)</span>&nbsp;<span class="op" id="6059507">(</span><span class="builtintype" id="6059508">int</span><span class="op" id="6059511">,</span>&nbsp;<span class="builtintype" id="6059513">error</span><span class="op" id="6059518">)</span>&nbsp;<span class="op" id="6059520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059523">hash</span>&nbsp;<span class="op" id="6059528">:=</span>&nbsp;<span class="op" id="6059531">*</span><span class="ident" id="6059532">s</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6059535">for</span>&nbsp;<span class="ident" id="6059539">_</span><span class="op" id="6059540">,</span>&nbsp;<span class="ident" id="6059542">c</span>&nbsp;<span class="op" id="6059544">:=</span>&nbsp;<span class="keyword" id="6059547">range</span>&nbsp;<span class="ident" id="6059553">data</span>&nbsp;<span class="op" id="6059558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059562">hash</span>&nbsp;<span class="op" id="6059567">*=</span>&nbsp;<span class="ident" id="6059570">prime32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059580">hash</span>&nbsp;<span class="op" id="6059585">^=</span>&nbsp;<span class="ident" id="6059588">sum32</span><span class="op" id="6059593">(</span><span class="ident" id="6059594">c</span><span class="op" id="6059595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6059598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6059601">*</span><span class="ident" id="6059602">s</span>&nbsp;<span class="op" id="6059604">=</span>&nbsp;<span class="ident" id="6059606">hash</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6059612">return</span>&nbsp;<span class="builtinfunc" id="6059619">len</span><span class="op" id="6059622">(</span><span class="ident" id="6059623">data</span><span class="op" id="6059627">)</span><span class="op" id="6059628">,</span>&nbsp;<span class="ident" id="6059630">nil</span><br>
<span class="lineno"></span><span class="op" id="6059634">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6059637">func</span>&nbsp;<span class="op" id="6059642">(</span><span class="ident" id="6059643">s</span>&nbsp;<span class="op" id="6059645">*</span><span class="ident" id="6059646">sum32a</span><span class="op" id="6059652">)</span>&nbsp;<span class="ident" id="6059654">Write</span><span class="op" id="6059659">(</span><span class="ident" id="6059660">data</span>&nbsp;<span class="op" id="6059665">[</span><span class="op" id="6059666">]</span><span class="builtintype" id="6059667">byte</span><span class="op" id="6059671">)</span>&nbsp;<span class="op" id="6059673">(</span><span class="builtintype" id="6059674">int</span><span class="op" id="6059677">,</span>&nbsp;<span class="builtintype" id="6059679">error</span><span class="op" id="6059684">)</span>&nbsp;<span class="op" id="6059686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059689">hash</span>&nbsp;<span class="op" id="6059694">:=</span>&nbsp;<span class="op" id="6059697">*</span><span class="ident" id="6059698">s</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6059701">for</span>&nbsp;<span class="ident" id="6059705">_</span><span class="op" id="6059706">,</span>&nbsp;<span class="ident" id="6059708">c</span>&nbsp;<span class="op" id="6059710">:=</span>&nbsp;<span class="keyword" id="6059713">range</span>&nbsp;<span class="ident" id="6059719">data</span>&nbsp;<span class="op" id="6059724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059728">hash</span>&nbsp;<span class="op" id="6059733">^=</span>&nbsp;<span class="ident" id="6059736">sum32a</span><span class="op" id="6059742">(</span><span class="ident" id="6059743">c</span><span class="op" id="6059744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059748">hash</span>&nbsp;<span class="op" id="6059753">*=</span>&nbsp;<span class="ident" id="6059756">prime32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6059765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6059768">*</span><span class="ident" id="6059769">s</span>&nbsp;<span class="op" id="6059771">=</span>&nbsp;<span class="ident" id="6059773">hash</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6059779">return</span>&nbsp;<span class="builtinfunc" id="6059786">len</span><span class="op" id="6059789">(</span><span class="ident" id="6059790">data</span><span class="op" id="6059794">)</span><span class="op" id="6059795">,</span>&nbsp;<span class="ident" id="6059797">nil</span><br>
<span class="lineno"></span><span class="op" id="6059801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6059804">func</span>&nbsp;<span class="op" id="6059809">(</span><span class="ident" id="6059810">s</span>&nbsp;<span class="op" id="6059812">*</span><span class="ident" id="6059813">sum64</span><span class="op" id="6059818">)</span>&nbsp;<span class="ident" id="6059820">Write</span><span class="op" id="6059825">(</span><span class="ident" id="6059826">data</span>&nbsp;<span class="op" id="6059831">[</span><span class="op" id="6059832">]</span><span class="builtintype" id="6059833">byte</span><span class="op" id="6059837">)</span>&nbsp;<span class="op" id="6059839">(</span><span class="builtintype" id="6059840">int</span><span class="op" id="6059843">,</span>&nbsp;<span class="builtintype" id="6059845">error</span><span class="op" id="6059850">)</span>&nbsp;<span class="op" id="6059852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059855">hash</span>&nbsp;<span class="op" id="6059860">:=</span>&nbsp;<span class="op" id="6059863">*</span><span class="ident" id="6059864">s</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6059867">for</span>&nbsp;<span class="ident" id="6059871">_</span><span class="op" id="6059872">,</span>&nbsp;<span class="ident" id="6059874">c</span>&nbsp;<span class="op" id="6059876">:=</span>&nbsp;<span class="keyword" id="6059879">range</span>&nbsp;<span class="ident" id="6059885">data</span>&nbsp;<span class="op" id="6059890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059894">hash</span>&nbsp;<span class="op" id="6059899">*=</span>&nbsp;<span class="ident" id="6059902">prime64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059912">hash</span>&nbsp;<span class="op" id="6059917">^=</span>&nbsp;<span class="ident" id="6059920">sum64</span><span class="op" id="6059925">(</span><span class="ident" id="6059926">c</span><span class="op" id="6059927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6059930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6059933">*</span><span class="ident" id="6059934">s</span>&nbsp;<span class="op" id="6059936">=</span>&nbsp;<span class="ident" id="6059938">hash</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6059944">return</span>&nbsp;<span class="builtinfunc" id="6059951">len</span><span class="op" id="6059954">(</span><span class="ident" id="6059955">data</span><span class="op" id="6059959">)</span><span class="op" id="6059960">,</span>&nbsp;<span class="ident" id="6059962">nil</span><br>
<span class="lineno"></span><span class="op" id="6059966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6059969">func</span>&nbsp;<span class="op" id="6059974">(</span><span class="ident" id="6059975">s</span>&nbsp;<span class="op" id="6059977">*</span><span class="ident" id="6059978">sum64a</span><span class="op" id="6059984">)</span>&nbsp;<span class="ident" id="6059986">Write</span><span class="op" id="6059991">(</span><span class="ident" id="6059992">data</span>&nbsp;<span class="op" id="6059997">[</span><span class="op" id="6059998">]</span><span class="builtintype" id="6059999">byte</span><span class="op" id="6060003">)</span>&nbsp;<span class="op" id="6060005">(</span><span class="builtintype" id="6060006">int</span><span class="op" id="6060009">,</span>&nbsp;<span class="builtintype" id="6060011">error</span><span class="op" id="6060016">)</span>&nbsp;<span class="op" id="6060018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060021">hash</span>&nbsp;<span class="op" id="6060026">:=</span>&nbsp;<span class="op" id="6060029">*</span><span class="ident" id="6060030">s</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060033">for</span>&nbsp;<span class="ident" id="6060037">_</span><span class="op" id="6060038">,</span>&nbsp;<span class="ident" id="6060040">c</span>&nbsp;<span class="op" id="6060042">:=</span>&nbsp;<span class="keyword" id="6060045">range</span>&nbsp;<span class="ident" id="6060051">data</span>&nbsp;<span class="op" id="6060056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060060">hash</span>&nbsp;<span class="op" id="6060065">^=</span>&nbsp;<span class="ident" id="6060068">sum64a</span><span class="op" id="6060074">(</span><span class="ident" id="6060075">c</span><span class="op" id="6060076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060080">hash</span>&nbsp;<span class="op" id="6060085">*=</span>&nbsp;<span class="ident" id="6060088">prime64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6060097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6060100">*</span><span class="ident" id="6060101">s</span>&nbsp;<span class="op" id="6060103">=</span>&nbsp;<span class="ident" id="6060105">hash</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060111">return</span>&nbsp;<span class="builtinfunc" id="6060118">len</span><span class="op" id="6060121">(</span><span class="ident" id="6060122">data</span><span class="op" id="6060126">)</span><span class="op" id="6060127">,</span>&nbsp;<span class="ident" id="6060129">nil</span><br>
<span class="lineno"></span><span class="op" id="6060133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6060136">func</span>&nbsp;<span class="op" id="6060141">(</span><span class="ident" id="6060142">s</span>&nbsp;<span class="op" id="6060144">*</span><span class="ident" id="6060145">sum32</span><span class="op" id="6060150">)</span>&nbsp;<span class="ident" id="6060152">Size</span><span class="op" id="6060156">(</span><span class="op" id="6060157">)</span>&nbsp;<span class="builtintype" id="6060159">int</span>&nbsp;&nbsp;<span class="op" id="6060164">{</span>&nbsp;<span class="keyword" id="6060166">return</span>&nbsp;<span class="num" id="6060173">4</span>&nbsp;<span class="op" id="6060175">}</span><br>
<span class="lineno"></span><span class="keyword" id="6060177">func</span>&nbsp;<span class="op" id="6060182">(</span><span class="ident" id="6060183">s</span>&nbsp;<span class="op" id="6060185">*</span><span class="ident" id="6060186">sum32a</span><span class="op" id="6060192">)</span>&nbsp;<span class="ident" id="6060194">Size</span><span class="op" id="6060198">(</span><span class="op" id="6060199">)</span>&nbsp;<span class="builtintype" id="6060201">int</span>&nbsp;<span class="op" id="6060205">{</span>&nbsp;<span class="keyword" id="6060207">return</span>&nbsp;<span class="num" id="6060214">4</span>&nbsp;<span class="op" id="6060216">}</span><br>
<span class="lineno">105</span><span class="keyword" id="6060218">func</span>&nbsp;<span class="op" id="6060223">(</span><span class="ident" id="6060224">s</span>&nbsp;<span class="op" id="6060226">*</span><span class="ident" id="6060227">sum64</span><span class="op" id="6060232">)</span>&nbsp;<span class="ident" id="6060234">Size</span><span class="op" id="6060238">(</span><span class="op" id="6060239">)</span>&nbsp;<span class="builtintype" id="6060241">int</span>&nbsp;&nbsp;<span class="op" id="6060246">{</span>&nbsp;<span class="keyword" id="6060248">return</span>&nbsp;<span class="num" id="6060255">8</span>&nbsp;<span class="op" id="6060257">}</span><br>
<span class="lineno"></span><span class="keyword" id="6060259">func</span>&nbsp;<span class="op" id="6060264">(</span><span class="ident" id="6060265">s</span>&nbsp;<span class="op" id="6060267">*</span><span class="ident" id="6060268">sum64a</span><span class="op" id="6060274">)</span>&nbsp;<span class="ident" id="6060276">Size</span><span class="op" id="6060280">(</span><span class="op" id="6060281">)</span>&nbsp;<span class="builtintype" id="6060283">int</span>&nbsp;<span class="op" id="6060287">{</span>&nbsp;<span class="keyword" id="6060289">return</span>&nbsp;<span class="num" id="6060296">8</span>&nbsp;<span class="op" id="6060298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6060301">func</span>&nbsp;<span class="op" id="6060306">(</span><span class="ident" id="6060307">s</span>&nbsp;<span class="op" id="6060309">*</span><span class="ident" id="6060310">sum32</span><span class="op" id="6060315">)</span>&nbsp;<span class="ident" id="6060317">BlockSize</span><span class="op" id="6060326">(</span><span class="op" id="6060327">)</span>&nbsp;<span class="builtintype" id="6060329">int</span>&nbsp;&nbsp;<span class="op" id="6060334">{</span>&nbsp;<span class="keyword" id="6060336">return</span>&nbsp;<span class="num" id="6060343">1</span>&nbsp;<span class="op" id="6060345">}</span><br>
<span class="lineno"></span><span class="keyword" id="6060347">func</span>&nbsp;<span class="op" id="6060352">(</span><span class="ident" id="6060353">s</span>&nbsp;<span class="op" id="6060355">*</span><span class="ident" id="6060356">sum32a</span><span class="op" id="6060362">)</span>&nbsp;<span class="ident" id="6060364">BlockSize</span><span class="op" id="6060373">(</span><span class="op" id="6060374">)</span>&nbsp;<span class="builtintype" id="6060376">int</span>&nbsp;<span class="op" id="6060380">{</span>&nbsp;<span class="keyword" id="6060382">return</span>&nbsp;<span class="num" id="6060389">1</span>&nbsp;<span class="op" id="6060391">}</span><br>
<span class="lineno">110</span><span class="keyword" id="6060393">func</span>&nbsp;<span class="op" id="6060398">(</span><span class="ident" id="6060399">s</span>&nbsp;<span class="op" id="6060401">*</span><span class="ident" id="6060402">sum64</span><span class="op" id="6060407">)</span>&nbsp;<span class="ident" id="6060409">BlockSize</span><span class="op" id="6060418">(</span><span class="op" id="6060419">)</span>&nbsp;<span class="builtintype" id="6060421">int</span>&nbsp;&nbsp;<span class="op" id="6060426">{</span>&nbsp;<span class="keyword" id="6060428">return</span>&nbsp;<span class="num" id="6060435">1</span>&nbsp;<span class="op" id="6060437">}</span><br>
<span class="lineno"></span><span class="keyword" id="6060439">func</span>&nbsp;<span class="op" id="6060444">(</span><span class="ident" id="6060445">s</span>&nbsp;<span class="op" id="6060447">*</span><span class="ident" id="6060448">sum64a</span><span class="op" id="6060454">)</span>&nbsp;<span class="ident" id="6060456">BlockSize</span><span class="op" id="6060465">(</span><span class="op" id="6060466">)</span>&nbsp;<span class="builtintype" id="6060468">int</span>&nbsp;<span class="op" id="6060472">{</span>&nbsp;<span class="keyword" id="6060474">return</span>&nbsp;<span class="num" id="6060481">1</span>&nbsp;<span class="op" id="6060483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6060486">func</span>&nbsp;<span class="op" id="6060491">(</span><span class="ident" id="6060492">s</span>&nbsp;<span class="op" id="6060494">*</span><span class="ident" id="6060495">sum32</span><span class="op" id="6060500">)</span>&nbsp;<span class="ident" id="6060502">Sum</span><span class="op" id="6060505">(</span><span class="ident" id="6060506">in</span>&nbsp;<span class="op" id="6060509">[</span><span class="op" id="6060510">]</span><span class="builtintype" id="6060511">byte</span><span class="op" id="6060515">)</span>&nbsp;<span class="op" id="6060517">[</span><span class="op" id="6060518">]</span><span class="builtintype" id="6060519">byte</span>&nbsp;<span class="op" id="6060524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060527">v</span>&nbsp;<span class="op" id="6060529">:=</span>&nbsp;<span class="builtintype" id="6060532">uint32</span><span class="op" id="6060538">(</span><span class="op" id="6060539">*</span><span class="ident" id="6060540">s</span><span class="op" id="6060541">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060544">return</span>&nbsp;<span class="builtinfunc" id="6060551">append</span><span class="op" id="6060557">(</span><span class="ident" id="6060558">in</span><span class="op" id="6060560">,</span>&nbsp;<span class="builtintype" id="6060562">byte</span><span class="op" id="6060566">(</span><span class="ident" id="6060567">v</span><span class="op" id="6060568">&gt;&gt;</span><span class="num" id="6060570">24</span><span class="op" id="6060572">)</span><span class="op" id="6060573">,</span>&nbsp;<span class="builtintype" id="6060575">byte</span><span class="op" id="6060579">(</span><span class="ident" id="6060580">v</span><span class="op" id="6060581">&gt;&gt;</span><span class="num" id="6060583">16</span><span class="op" id="6060585">)</span><span class="op" id="6060586">,</span>&nbsp;<span class="builtintype" id="6060588">byte</span><span class="op" id="6060592">(</span><span class="ident" id="6060593">v</span><span class="op" id="6060594">&gt;&gt;</span><span class="num" id="6060596">8</span><span class="op" id="6060597">)</span><span class="op" id="6060598">,</span>&nbsp;<span class="builtintype" id="6060600">byte</span><span class="op" id="6060604">(</span><span class="ident" id="6060605">v</span><span class="op" id="6060606">)</span><span class="op" id="6060607">)</span><br>
<span class="lineno"></span><span class="op" id="6060609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6060612">func</span>&nbsp;<span class="op" id="6060617">(</span><span class="ident" id="6060618">s</span>&nbsp;<span class="op" id="6060620">*</span><span class="ident" id="6060621">sum32a</span><span class="op" id="6060627">)</span>&nbsp;<span class="ident" id="6060629">Sum</span><span class="op" id="6060632">(</span><span class="ident" id="6060633">in</span>&nbsp;<span class="op" id="6060636">[</span><span class="op" id="6060637">]</span><span class="builtintype" id="6060638">byte</span><span class="op" id="6060642">)</span>&nbsp;<span class="op" id="6060644">[</span><span class="op" id="6060645">]</span><span class="builtintype" id="6060646">byte</span>&nbsp;<span class="op" id="6060651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060654">v</span>&nbsp;<span class="op" id="6060656">:=</span>&nbsp;<span class="builtintype" id="6060659">uint32</span><span class="op" id="6060665">(</span><span class="op" id="6060666">*</span><span class="ident" id="6060667">s</span><span class="op" id="6060668">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060671">return</span>&nbsp;<span class="builtinfunc" id="6060678">append</span><span class="op" id="6060684">(</span><span class="ident" id="6060685">in</span><span class="op" id="6060687">,</span>&nbsp;<span class="builtintype" id="6060689">byte</span><span class="op" id="6060693">(</span><span class="ident" id="6060694">v</span><span class="op" id="6060695">&gt;&gt;</span><span class="num" id="6060697">24</span><span class="op" id="6060699">)</span><span class="op" id="6060700">,</span>&nbsp;<span class="builtintype" id="6060702">byte</span><span class="op" id="6060706">(</span><span class="ident" id="6060707">v</span><span class="op" id="6060708">&gt;&gt;</span><span class="num" id="6060710">16</span><span class="op" id="6060712">)</span><span class="op" id="6060713">,</span>&nbsp;<span class="builtintype" id="6060715">byte</span><span class="op" id="6060719">(</span><span class="ident" id="6060720">v</span><span class="op" id="6060721">&gt;&gt;</span><span class="num" id="6060723">8</span><span class="op" id="6060724">)</span><span class="op" id="6060725">,</span>&nbsp;<span class="builtintype" id="6060727">byte</span><span class="op" id="6060731">(</span><span class="ident" id="6060732">v</span><span class="op" id="6060733">)</span><span class="op" id="6060734">)</span><br>
<span class="lineno"></span><span class="op" id="6060736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6060739">func</span>&nbsp;<span class="op" id="6060744">(</span><span class="ident" id="6060745">s</span>&nbsp;<span class="op" id="6060747">*</span><span class="ident" id="6060748">sum64</span><span class="op" id="6060753">)</span>&nbsp;<span class="ident" id="6060755">Sum</span><span class="op" id="6060758">(</span><span class="ident" id="6060759">in</span>&nbsp;<span class="op" id="6060762">[</span><span class="op" id="6060763">]</span><span class="builtintype" id="6060764">byte</span><span class="op" id="6060768">)</span>&nbsp;<span class="op" id="6060770">[</span><span class="op" id="6060771">]</span><span class="builtintype" id="6060772">byte</span>&nbsp;<span class="op" id="6060777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060780">v</span>&nbsp;<span class="op" id="6060782">:=</span>&nbsp;<span class="ident" id="6060785">uint64</span><span class="op" id="6060791">(</span><span class="op" id="6060792">*</span><span class="ident" id="6060793">s</span><span class="op" id="6060794">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060797">return</span>&nbsp;<span class="builtinfunc" id="6060804">append</span><span class="op" id="6060810">(</span><span class="ident" id="6060811">in</span><span class="op" id="6060813">,</span>&nbsp;<span class="builtintype" id="6060815">byte</span><span class="op" id="6060819">(</span><span class="ident" id="6060820">v</span><span class="op" id="6060821">&gt;&gt;</span><span class="num" id="6060823">56</span><span class="op" id="6060825">)</span><span class="op" id="6060826">,</span>&nbsp;<span class="builtintype" id="6060828">byte</span><span class="op" id="6060832">(</span><span class="ident" id="6060833">v</span><span class="op" id="6060834">&gt;&gt;</span><span class="num" id="6060836">48</span><span class="op" id="6060838">)</span><span class="op" id="6060839">,</span>&nbsp;<span class="builtintype" id="6060841">byte</span><span class="op" id="6060845">(</span><span class="ident" id="6060846">v</span><span class="op" id="6060847">&gt;&gt;</span><span class="num" id="6060849">40</span><span class="op" id="6060851">)</span><span class="op" id="6060852">,</span>&nbsp;<span class="builtintype" id="6060854">byte</span><span class="op" id="6060858">(</span><span class="ident" id="6060859">v</span><span class="op" id="6060860">&gt;&gt;</span><span class="num" id="6060862">32</span><span class="op" id="6060864">)</span><span class="op" id="6060865">,</span>&nbsp;<span class="builtintype" id="6060867">byte</span><span class="op" id="6060871">(</span><span class="ident" id="6060872">v</span><span class="op" id="6060873">&gt;&gt;</span><span class="num" id="6060875">24</span><span class="op" id="6060877">)</span><span class="op" id="6060878">,</span>&nbsp;<span class="builtintype" id="6060880">byte</span><span class="op" id="6060884">(</span><span class="ident" id="6060885">v</span><span class="op" id="6060886">&gt;&gt;</span><span class="num" id="6060888">16</span><span class="op" id="6060890">)</span><span class="op" id="6060891">,</span>&nbsp;<span class="builtintype" id="6060893">byte</span><span class="op" id="6060897">(</span><span class="ident" id="6060898">v</span><span class="op" id="6060899">&gt;&gt;</span><span class="num" id="6060901">8</span><span class="op" id="6060902">)</span><span class="op" id="6060903">,</span>&nbsp;<span class="builtintype" id="6060905">byte</span><span class="op" id="6060909">(</span><span class="ident" id="6060910">v</span><span class="op" id="6060911">)</span><span class="op" id="6060912">)</span><br>
<span class="lineno"></span><span class="op" id="6060914">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6060917">func</span>&nbsp;<span class="op" id="6060922">(</span><span class="ident" id="6060923">s</span>&nbsp;<span class="op" id="6060925">*</span><span class="ident" id="6060926">sum64a</span><span class="op" id="6060932">)</span>&nbsp;<span class="ident" id="6060934">Sum</span><span class="op" id="6060937">(</span><span class="ident" id="6060938">in</span>&nbsp;<span class="op" id="6060941">[</span><span class="op" id="6060942">]</span><span class="builtintype" id="6060943">byte</span><span class="op" id="6060947">)</span>&nbsp;<span class="op" id="6060949">[</span><span class="op" id="6060950">]</span><span class="builtintype" id="6060951">byte</span>&nbsp;<span class="op" id="6060956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060959">v</span>&nbsp;<span class="op" id="6060961">:=</span>&nbsp;<span class="ident" id="6060964">uint64</span><span class="op" id="6060970">(</span><span class="op" id="6060971">*</span><span class="ident" id="6060972">s</span><span class="op" id="6060973">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060976">return</span>&nbsp;<span class="builtinfunc" id="6060983">append</span><span class="op" id="6060989">(</span><span class="ident" id="6060990">in</span><span class="op" id="6060992">,</span>&nbsp;<span class="builtintype" id="6060994">byte</span><span class="op" id="6060998">(</span><span class="ident" id="6060999">v</span><span class="op" id="6061000">&gt;&gt;</span><span class="num" id="6061002">56</span><span class="op" id="6061004">)</span><span class="op" id="6061005">,</span>&nbsp;<span class="builtintype" id="6061007">byte</span><span class="op" id="6061011">(</span><span class="ident" id="6061012">v</span><span class="op" id="6061013">&gt;&gt;</span><span class="num" id="6061015">48</span><span class="op" id="6061017">)</span><span class="op" id="6061018">,</span>&nbsp;<span class="builtintype" id="6061020">byte</span><span class="op" id="6061024">(</span><span class="ident" id="6061025">v</span><span class="op" id="6061026">&gt;&gt;</span><span class="num" id="6061028">40</span><span class="op" id="6061030">)</span><span class="op" id="6061031">,</span>&nbsp;<span class="builtintype" id="6061033">byte</span><span class="op" id="6061037">(</span><span class="ident" id="6061038">v</span><span class="op" id="6061039">&gt;&gt;</span><span class="num" id="6061041">32</span><span class="op" id="6061043">)</span><span class="op" id="6061044">,</span>&nbsp;<span class="builtintype" id="6061046">byte</span><span class="op" id="6061050">(</span><span class="ident" id="6061051">v</span><span class="op" id="6061052">&gt;&gt;</span><span class="num" id="6061054">24</span><span class="op" id="6061056">)</span><span class="op" id="6061057">,</span>&nbsp;<span class="builtintype" id="6061059">byte</span><span class="op" id="6061063">(</span><span class="ident" id="6061064">v</span><span class="op" id="6061065">&gt;&gt;</span><span class="num" id="6061067">16</span><span class="op" id="6061069">)</span><span class="op" id="6061070">,</span>&nbsp;<span class="builtintype" id="6061072">byte</span><span class="op" id="6061076">(</span><span class="ident" id="6061077">v</span><span class="op" id="6061078">&gt;&gt;</span><span class="num" id="6061080">8</span><span class="op" id="6061081">)</span><span class="op" id="6061082">,</span>&nbsp;<span class="builtintype" id="6061084">byte</span><span class="op" id="6061088">(</span><span class="ident" id="6061089">v</span><span class="op" id="6061090">)</span><span class="op" id="6061091">)</span><br>
<span class="lineno"></span><span class="op" id="6061093">}</span>
</div>
</body>
</html>
