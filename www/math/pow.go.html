<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1528730">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1528785">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1528839">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1528890">package</span>&nbsp;<span class="ident" id="1528898">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1528904">func</span>&nbsp;<span class="ident" id="1528909">isOddInt</span><span class="op" id="1528917">(</span><span class="ident" id="1528918">x</span>&nbsp;<span class="builtintype" id="1528920">float64</span><span class="op" id="1528927">)</span>&nbsp;<span class="builtintype" id="1528929">bool</span>&nbsp;<span class="op" id="1528934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1528937">xi</span><span class="op" id="1528939">,</span>&nbsp;<span class="ident" id="1528941">xf</span>&nbsp;<span class="op" id="1528944">:=</span>&nbsp;<span class="ident" id="1528947"><a href="/math/modf.go.html#1527081">Modf</a></span><span class="op" id="1528951">(</span><span class="ident" id="1528952"><a href="/math/pow.go.html#1528918">x</a></span><span class="op" id="1528953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1528956">return</span>&nbsp;<span class="ident" id="1528963"><a href="/math/pow.go.html#1528941">xf</a></span>&nbsp;<span class="op" id="1528966">==</span>&nbsp;<span class="num" id="1528969">0</span>&nbsp;<span class="op" id="1528971">&amp;&amp;</span>&nbsp;<span class="ident" id="1528974">int64</span><span class="op" id="1528979">(</span><span class="ident" id="1528980"><a href="/math/pow.go.html#1528937">xi</a></span><span class="op" id="1528982">)</span><span class="op" id="1528983">&amp;</span><span class="num" id="1528984">1</span>&nbsp;<span class="op" id="1528986">==</span>&nbsp;<span class="num" id="1528989">1</span><br>
<span class="lineno">10</span><span class="op" id="1528991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1528994">//&nbsp;Special&nbsp;cases&nbsp;taken&nbsp;from&nbsp;FreeBSD&#39;s&nbsp;/usr/src/lib/msun/src/e_pow.c</span><br>
<span class="lineno"></span><span class="comment" id="1529062">//&nbsp;updated&nbsp;by&nbsp;IEEE&nbsp;Std.&nbsp;754-2008&nbsp;&#34;Section&nbsp;9.2.1&nbsp;Special&nbsp;values&#34;.</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="1529128">//&nbsp;Pow&nbsp;returns&nbsp;x**y,&nbsp;the&nbsp;base-x&nbsp;exponential&nbsp;of&nbsp;y.</span><br>
<span class="lineno"></span><span class="comment" id="1529178">//</span><br>
<span class="lineno"></span><span class="comment" id="1529181">//&nbsp;Special&nbsp;cases&nbsp;are&nbsp;(in&nbsp;order):</span><br>
<span class="lineno"></span><span class="comment" id="1529214">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;±0)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="1529243">//&nbsp;&nbsp;&nbsp;&nbspPow(1,&nbsp;y)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;y</span><br>
<span class="lineno">20</span><span class="comment" id="1529270">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;1)&nbsp;=&nbsp;x&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="1529297">//&nbsp;&nbsp;&nbsp;&nbspPow(NaN,&nbsp;y)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="1529318">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="1529339">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±Inf&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="1529387">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;-Inf)&nbsp;=&nbsp;+Inf</span><br>
<span class="lineno">25</span><span class="comment" id="1529412">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;+Inf)&nbsp;=&nbsp;+0</span><br>
<span class="lineno"></span><span class="comment" id="1529435">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;finite&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="1529497">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±0&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="1529543">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;finite&nbsp;y&nbsp;&gt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="1529603">//&nbsp;&nbsp;&nbsp;&nbspPow(-1,&nbsp;±Inf)&nbsp;=&nbsp;1</span><br>
<span class="lineno">30</span><span class="comment" id="1529625">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="1529660">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="1529693">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="1529726">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="1529761">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;y&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno">35</span><span class="comment" id="1529794">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;y&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="1529825">//&nbsp;&nbsp;&nbsp;&nbspPow(-Inf,&nbsp;y)&nbsp;=&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno"></span><span class="comment" id="1529855">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;y)&nbsp;=&nbsp;NaN&nbsp;for&nbsp;finite&nbsp;x&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;finite&nbsp;non-integer&nbsp;y</span><br>
<span class="lineno"></span><span class="keyword" id="1529916">func</span>&nbsp;<span class="ident" id="1529921">Pow</span><span class="op" id="1529924">(</span><span class="ident" id="1529925">x</span><span class="op" id="1529926">,</span>&nbsp;<span class="ident" id="1529928">y</span>&nbsp;<span class="builtintype" id="1529930">float64</span><span class="op" id="1529937">)</span>&nbsp;<span class="builtintype" id="1529939">float64</span>&nbsp;<span class="op" id="1529947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1529950">switch</span>&nbsp;<span class="op" id="1529957">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1529960">case</span>&nbsp;<span class="ident" id="1529965"><a href="/math/pow.go.html#1529928">y</a></span>&nbsp;<span class="op" id="1529967">==</span>&nbsp;<span class="num" id="1529970">0</span>&nbsp;<span class="op" id="1529972">||</span>&nbsp;<span class="ident" id="1529975"><a href="/math/pow.go.html#1529925">x</a></span>&nbsp;<span class="op" id="1529977">==</span>&nbsp;<span class="num" id="1529980">1</span><span class="op" id="1529981">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1529985">return</span>&nbsp;<span class="num" id="1529992">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1529995">case</span>&nbsp;<span class="ident" id="1530000"><a href="/math/pow.go.html#1529928">y</a></span>&nbsp;<span class="op" id="1530002">==</span>&nbsp;<span class="num" id="1530005">1</span><span class="op" id="1530006">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530010">return</span>&nbsp;<span class="ident" id="1530017"><a href="/math/pow.go.html#1529925">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530020">case</span>&nbsp;<span class="ident" id="1530025"><a href="/math/pow.go.html#1529928">y</a></span>&nbsp;<span class="op" id="1530027">==</span>&nbsp;<span class="num" id="1530030">0.5</span><span class="op" id="1530033">:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530037">return</span>&nbsp;<span class="ident" id="1530044"><a href="/math/sqrt.go.html#1548013">Sqrt</a></span><span class="op" id="1530048">(</span><span class="ident" id="1530049"><a href="/math/pow.go.html#1529925">x</a></span><span class="op" id="1530050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530053">case</span>&nbsp;<span class="ident" id="1530058"><a href="/math/pow.go.html#1529928">y</a></span>&nbsp;<span class="op" id="1530060">==</span>&nbsp;<span class="op" id="1530063">-</span><span class="num" id="1530064">0.5</span><span class="op" id="1530067">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530071">return</span>&nbsp;<span class="num" id="1530078">1</span>&nbsp;<span class="op" id="1530080">/</span>&nbsp;<span class="ident" id="1530082"><a href="/math/sqrt.go.html#1548013">Sqrt</a></span><span class="op" id="1530086">(</span><span class="ident" id="1530087"><a href="/math/pow.go.html#1529925">x</a></span><span class="op" id="1530088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530091">case</span>&nbsp;<span class="ident" id="1530096"><a href="/math/bits.go.html#1427394">IsNaN</a></span><span class="op" id="1530101">(</span><span class="ident" id="1530102"><a href="/math/pow.go.html#1529925">x</a></span><span class="op" id="1530103">)</span>&nbsp;<span class="op" id="1530105">||</span>&nbsp;<span class="ident" id="1530108"><a href="/math/bits.go.html#1427394">IsNaN</a></span><span class="op" id="1530113">(</span><span class="ident" id="1530114"><a href="/math/pow.go.html#1529928">y</a></span><span class="op" id="1530115">)</span><span class="op" id="1530116">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530120">return</span>&nbsp;<span class="ident" id="1530127"><a href="/math/bits.go.html#1427274">NaN</a></span><span class="op" id="1530130">(</span><span class="op" id="1530131">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530134">case</span>&nbsp;<span class="ident" id="1530139"><a href="/math/pow.go.html#1529925">x</a></span>&nbsp;<span class="op" id="1530141">==</span>&nbsp;<span class="num" id="1530144">0</span><span class="op" id="1530145">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530149">switch</span>&nbsp;<span class="op" id="1530156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530160">case</span>&nbsp;<span class="ident" id="1530165"><a href="/math/pow.go.html#1529928">y</a></span>&nbsp;<span class="op" id="1530167">&lt;</span>&nbsp;<span class="num" id="1530169">0</span><span class="op" id="1530170">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530175">if</span>&nbsp;<span class="ident" id="1530178"><a href="/math/pow.go.html#1528909">isOddInt</a></span><span class="op" id="1530186">(</span><span class="ident" id="1530187"><a href="/math/pow.go.html#1529928">y</a></span><span class="op" id="1530188">)</span>&nbsp;<span class="op" id="1530190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530196">return</span>&nbsp;<span class="ident" id="1530203"><a href="/math/copysign.go.html#1432437">Copysign</a></span><span class="op" id="1530211">(</span><span class="ident" id="1530212"><a href="/math/bits.go.html#1427094">Inf</a></span><span class="op" id="1530215">(</span><span class="num" id="1530216">1</span><span class="op" id="1530217">)</span><span class="op" id="1530218">,</span>&nbsp;<span class="ident" id="1530220"><a href="/math/pow.go.html#1529925">x</a></span><span class="op" id="1530221">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1530226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530231">return</span>&nbsp;<span class="ident" id="1530238"><a href="/math/bits.go.html#1427094">Inf</a></span><span class="op" id="1530241">(</span><span class="num" id="1530242">1</span><span class="op" id="1530243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530247">case</span>&nbsp;<span class="ident" id="1530252"><a href="/math/pow.go.html#1529928">y</a></span>&nbsp;<span class="op" id="1530254">&gt;</span>&nbsp;<span class="num" id="1530256">0</span><span class="op" id="1530257">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530262">if</span>&nbsp;<span class="ident" id="1530265"><a href="/math/pow.go.html#1528909">isOddInt</a></span><span class="op" id="1530273">(</span><span class="ident" id="1530274"><a href="/math/pow.go.html#1529928">y</a></span><span class="op" id="1530275">)</span>&nbsp;<span class="op" id="1530277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530283">return</span>&nbsp;<span class="ident" id="1530290"><a href="/math/pow.go.html#1529925">x</a></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1530295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530300">return</span>&nbsp;<span class="num" id="1530307">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1530311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530314">case</span>&nbsp;<span class="ident" id="1530319"><a href="/math/bits.go.html#1427892">IsInf</a></span><span class="op" id="1530324">(</span><span class="ident" id="1530325"><a href="/math/pow.go.html#1529928">y</a></span><span class="op" id="1530326">,</span>&nbsp;<span class="num" id="1530328">0</span><span class="op" id="1530329">)</span><span class="op" id="1530330">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530334">switch</span>&nbsp;<span class="op" id="1530341">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530345">case</span>&nbsp;<span class="ident" id="1530350"><a href="/math/pow.go.html#1529925">x</a></span>&nbsp;<span class="op" id="1530352">==</span>&nbsp;<span class="op" id="1530355">-</span><span class="num" id="1530356">1</span><span class="op" id="1530357">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530362">return</span>&nbsp;<span class="num" id="1530369">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530373">case</span>&nbsp;<span class="op" id="1530378">(</span><span class="ident" id="1530379"><a href="/math/abs.go.html#1415452">Abs</a></span><span class="op" id="1530382">(</span><span class="ident" id="1530383"><a href="/math/pow.go.html#1529925">x</a></span><span class="op" id="1530384">)</span>&nbsp;<span class="op" id="1530386">&lt;</span>&nbsp;<span class="num" id="1530388">1</span><span class="op" id="1530389">)</span>&nbsp;<span class="op" id="1530391">==</span>&nbsp;<span class="ident" id="1530394"><a href="/math/bits.go.html#1427892">IsInf</a></span><span class="op" id="1530399">(</span><span class="ident" id="1530400"><a href="/math/pow.go.html#1529928">y</a></span><span class="op" id="1530401">,</span>&nbsp;<span class="num" id="1530403">1</span><span class="op" id="1530404">)</span><span class="op" id="1530405">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530410">return</span>&nbsp;<span class="num" id="1530417">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530421">default</span><span class="op" id="1530428">:</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530433">return</span>&nbsp;<span class="ident" id="1530440"><a href="/math/bits.go.html#1427094">Inf</a></span><span class="op" id="1530443">(</span><span class="num" id="1530444">1</span><span class="op" id="1530445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1530449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530452">case</span>&nbsp;<span class="ident" id="1530457"><a href="/math/bits.go.html#1427892">IsInf</a></span><span class="op" id="1530462">(</span><span class="ident" id="1530463"><a href="/math/pow.go.html#1529925">x</a></span><span class="op" id="1530464">,</span>&nbsp;<span class="num" id="1530466">0</span><span class="op" id="1530467">)</span><span class="op" id="1530468">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530472">if</span>&nbsp;<span class="ident" id="1530475"><a href="/math/bits.go.html#1427892">IsInf</a></span><span class="op" id="1530480">(</span><span class="ident" id="1530481"><a href="/math/pow.go.html#1529925">x</a></span><span class="op" id="1530482">,</span>&nbsp;<span class="op" id="1530484">-</span><span class="num" id="1530485">1</span><span class="op" id="1530486">)</span>&nbsp;<span class="op" id="1530488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530493">return</span>&nbsp;<span class="ident" id="1530500"><a href="/math/pow.go.html#1529921">Pow</a></span><span class="op" id="1530503">(</span><span class="num" id="1530504">1</span><span class="op" id="1530505">/</span><span class="ident" id="1530506"><a href="/math/pow.go.html#1529925">x</a></span><span class="op" id="1530507">,</span>&nbsp;<span class="op" id="1530509">-</span><span class="ident" id="1530510"><a href="/math/pow.go.html#1529928">y</a></span><span class="op" id="1530511">)</span>&nbsp;<span class="comment" id="1530513">//&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1530530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530534">switch</span>&nbsp;<span class="op" id="1530541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530545">case</span>&nbsp;<span class="ident" id="1530550"><a href="/math/pow.go.html#1529928">y</a></span>&nbsp;<span class="op" id="1530552">&lt;</span>&nbsp;<span class="num" id="1530554">0</span><span class="op" id="1530555">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530560">return</span>&nbsp;<span class="num" id="1530567">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530571">case</span>&nbsp;<span class="ident" id="1530576"><a href="/math/pow.go.html#1529928">y</a></span>&nbsp;<span class="op" id="1530578">&gt;</span>&nbsp;<span class="num" id="1530580">0</span><span class="op" id="1530581">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530586">return</span>&nbsp;<span class="ident" id="1530593"><a href="/math/bits.go.html#1427094">Inf</a></span><span class="op" id="1530596">(</span><span class="num" id="1530597">1</span><span class="op" id="1530598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1530602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1530605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530609">absy</span>&nbsp;<span class="op" id="1530614">:=</span>&nbsp;<span class="ident" id="1530617"><a href="/math/pow.go.html#1529928">y</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530620">flip</span>&nbsp;<span class="op" id="1530625">:=</span>&nbsp;<span class="ident" id="1530628">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530635">if</span>&nbsp;<span class="ident" id="1530638"><a href="/math/pow.go.html#1530609">absy</a></span>&nbsp;<span class="op" id="1530643">&lt;</span>&nbsp;<span class="num" id="1530645">0</span>&nbsp;<span class="op" id="1530647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530651"><a href="/math/pow.go.html#1530609">absy</a></span>&nbsp;<span class="op" id="1530656">=</span>&nbsp;<span class="op" id="1530658">-</span><span class="ident" id="1530659"><a href="/math/pow.go.html#1530609">absy</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530666"><a href="/math/pow.go.html#1530620">flip</a></span>&nbsp;<span class="op" id="1530671">=</span>&nbsp;<span class="ident" id="1530673">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1530679">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530682">yi</span><span class="op" id="1530684">,</span>&nbsp;<span class="ident" id="1530686">yf</span>&nbsp;<span class="op" id="1530689">:=</span>&nbsp;<span class="ident" id="1530692"><a href="/math/modf.go.html#1527081">Modf</a></span><span class="op" id="1530696">(</span><span class="ident" id="1530697"><a href="/math/pow.go.html#1530609">absy</a></span><span class="op" id="1530701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530704">if</span>&nbsp;<span class="ident" id="1530707"><a href="/math/pow.go.html#1530686">yf</a></span>&nbsp;<span class="op" id="1530710">!=</span>&nbsp;<span class="num" id="1530713">0</span>&nbsp;<span class="op" id="1530715">&amp;&amp;</span>&nbsp;<span class="ident" id="1530718"><a href="/math/pow.go.html#1529925">x</a></span>&nbsp;<span class="op" id="1530720">&lt;</span>&nbsp;<span class="num" id="1530722">0</span>&nbsp;<span class="op" id="1530724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530728">return</span>&nbsp;<span class="ident" id="1530735"><a href="/math/bits.go.html#1427274">NaN</a></span><span class="op" id="1530738">(</span><span class="op" id="1530739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1530742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530745">if</span>&nbsp;<span class="ident" id="1530748"><a href="/math/pow.go.html#1530682">yi</a></span>&nbsp;<span class="op" id="1530751">&gt;=</span>&nbsp;<span class="num" id="1530754">1</span><span class="op" id="1530755">&lt;&lt;</span><span class="num" id="1530757">63</span>&nbsp;<span class="op" id="1530760">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530764">return</span>&nbsp;<span class="ident" id="1530771"><a href="/math/exp.go.html#1445907">Exp</a></span><span class="op" id="1530774">(</span><span class="ident" id="1530775"><a href="/math/pow.go.html#1529928">y</a></span>&nbsp;<span class="op" id="1530777">*</span>&nbsp;<span class="ident" id="1530779"><a href="/math/log.go.html#1516693">Log</a></span><span class="op" id="1530782">(</span><span class="ident" id="1530783"><a href="/math/pow.go.html#1529925">x</a></span><span class="op" id="1530784">)</span><span class="op" id="1530785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1530788">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1530792">//&nbsp;ans&nbsp;=&nbsp;a1&nbsp;*&nbsp;2**ae&nbsp;(=&nbsp;1&nbsp;for&nbsp;now).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530828">a1</span>&nbsp;<span class="op" id="1530831">:=</span>&nbsp;<span class="num" id="1530834">1.0</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530839">ae</span>&nbsp;<span class="op" id="1530842">:=</span>&nbsp;<span class="num" id="1530845">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1530849">//&nbsp;ans&nbsp;*=&nbsp;x**yf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530866">if</span>&nbsp;<span class="ident" id="1530869"><a href="/math/pow.go.html#1530686">yf</a></span>&nbsp;<span class="op" id="1530872">!=</span>&nbsp;<span class="num" id="1530875">0</span>&nbsp;<span class="op" id="1530877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530881">if</span>&nbsp;<span class="ident" id="1530884"><a href="/math/pow.go.html#1530686">yf</a></span>&nbsp;<span class="op" id="1530887">&gt;</span>&nbsp;<span class="num" id="1530889">0.5</span>&nbsp;<span class="op" id="1530893">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530898"><a href="/math/pow.go.html#1530686">yf</a></span><span class="op" id="1530900">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530906"><a href="/math/pow.go.html#1530682">yi</a></span><span class="op" id="1530908">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1530913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530917"><a href="/math/pow.go.html#1530828">a1</a></span>&nbsp;<span class="op" id="1530920">=</span>&nbsp;<span class="ident" id="1530922"><a href="/math/exp.go.html#1445907">Exp</a></span><span class="op" id="1530925">(</span><span class="ident" id="1530926"><a href="/math/pow.go.html#1530686">yf</a></span>&nbsp;<span class="op" id="1530929">*</span>&nbsp;<span class="ident" id="1530931"><a href="/math/log.go.html#1516693">Log</a></span><span class="op" id="1530934">(</span><span class="ident" id="1530935"><a href="/math/pow.go.html#1529925">x</a></span><span class="op" id="1530936">)</span><span class="op" id="1530937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1530940">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1530944">//&nbsp;ans&nbsp;*=&nbsp;x**yi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1530961">//&nbsp;by&nbsp;multiplying&nbsp;in&nbsp;successive&nbsp;squarings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1531004">//&nbsp;of&nbsp;x&nbsp;according&nbsp;to&nbsp;bits&nbsp;of&nbsp;yi.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1531038">//&nbsp;accumulate&nbsp;powers&nbsp;of&nbsp;two&nbsp;into&nbsp;exp.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1531077">x1</span><span class="op" id="1531079">,</span>&nbsp;<span class="ident" id="1531081">xe</span>&nbsp;<span class="op" id="1531084">:=</span>&nbsp;<span class="ident" id="1531087"><a href="/math/frexp.go.html#1460543">Frexp</a></span><span class="op" id="1531092">(</span><span class="ident" id="1531093"><a href="/math/pow.go.html#1529925">x</a></span><span class="op" id="1531094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1531097">for</span>&nbsp;<span class="ident" id="1531101">i</span>&nbsp;<span class="op" id="1531103">:=</span>&nbsp;<span class="ident" id="1531106">int64</span><span class="op" id="1531111">(</span><span class="ident" id="1531112"><a href="/math/pow.go.html#1530682">yi</a></span><span class="op" id="1531114">)</span><span class="op" id="1531115">;</span>&nbsp;<span class="ident" id="1531117"><a href="/math/pow.go.html#1531101">i</a></span>&nbsp;<span class="op" id="1531119">!=</span>&nbsp;<span class="num" id="1531122">0</span><span class="op" id="1531123">;</span>&nbsp;<span class="ident" id="1531125"><a href="/math/pow.go.html#1531101">i</a></span>&nbsp;<span class="op" id="1531127">&gt;&gt;=</span>&nbsp;<span class="num" id="1531131">1</span>&nbsp;<span class="op" id="1531133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1531137">if</span>&nbsp;<span class="ident" id="1531140"><a href="/math/pow.go.html#1531101">i</a></span><span class="op" id="1531141">&amp;</span><span class="num" id="1531142">1</span>&nbsp;<span class="op" id="1531144">==</span>&nbsp;<span class="num" id="1531147">1</span>&nbsp;<span class="op" id="1531149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1531154"><a href="/math/pow.go.html#1530828">a1</a></span>&nbsp;<span class="op" id="1531157">*=</span>&nbsp;<span class="ident" id="1531160"><a href="/math/pow.go.html#1531077">x1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1531166"><a href="/math/pow.go.html#1530839">ae</a></span>&nbsp;<span class="op" id="1531169">+=</span>&nbsp;<span class="ident" id="1531172"><a href="/math/pow.go.html#1531081">xe</a></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1531177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1531181"><a href="/math/pow.go.html#1531077">x1</a></span>&nbsp;<span class="op" id="1531184">*=</span>&nbsp;<span class="ident" id="1531187"><a href="/math/pow.go.html#1531077">x1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1531192"><a href="/math/pow.go.html#1531081">xe</a></span>&nbsp;<span class="op" id="1531195">&lt;&lt;=</span>&nbsp;<span class="num" id="1531199">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1531203">if</span>&nbsp;<span class="ident" id="1531206"><a href="/math/pow.go.html#1531077">x1</a></span>&nbsp;<span class="op" id="1531209">&lt;</span>&nbsp;<span class="num" id="1531211">.5</span>&nbsp;<span class="op" id="1531214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1531219"><a href="/math/pow.go.html#1531077">x1</a></span>&nbsp;<span class="op" id="1531222">+=</span>&nbsp;<span class="ident" id="1531225"><a href="/math/pow.go.html#1531077">x1</a></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1531231"><a href="/math/pow.go.html#1531081">xe</a></span><span class="op" id="1531233">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1531238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1531241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1531245">//&nbsp;ans&nbsp;=&nbsp;a1*2**ae</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1531264">//&nbsp;if&nbsp;flip&nbsp;{&nbsp;ans&nbsp;=&nbsp;1&nbsp;/&nbsp;ans&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1531294">//&nbsp;but&nbsp;in&nbsp;the&nbsp;opposite&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1531324">if</span>&nbsp;<span class="ident" id="1531327"><a href="/math/pow.go.html#1530620">flip</a></span>&nbsp;<span class="op" id="1531332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1531336"><a href="/math/pow.go.html#1530828">a1</a></span>&nbsp;<span class="op" id="1531339">=</span>&nbsp;<span class="num" id="1531341">1</span>&nbsp;<span class="op" id="1531343">/</span>&nbsp;<span class="ident" id="1531345"><a href="/math/pow.go.html#1530828">a1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1531350"><a href="/math/pow.go.html#1530839">ae</a></span>&nbsp;<span class="op" id="1531353">=</span>&nbsp;<span class="op" id="1531355">-</span><span class="ident" id="1531356"><a href="/math/pow.go.html#1530839">ae</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1531360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1531363">return</span>&nbsp;<span class="ident" id="1531370"><a href="/math/ldexp.go.html#1501970">Ldexp</a></span><span class="op" id="1531375">(</span><span class="ident" id="1531376"><a href="/math/pow.go.html#1530828">a1</a></span><span class="op" id="1531378">,</span>&nbsp;<span class="ident" id="1531380"><a href="/math/pow.go.html#1530839">ae</a></span><span class="op" id="1531382">)</span><br>
<span class="lineno"></span><span class="op" id="1531384">}</span>
</div>
</body>
</html>
