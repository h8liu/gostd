<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/plan9obj</h2>
<ul>
<li><a href="/gostd/debug/plan9obj/file.go.html">file.go</a></li>
<li><a href="/gostd/debug/plan9obj/file_test.go.html" class="current">file_test.go</a></li>
<li><a href="/gostd/debug/plan9obj/plan9obj.go.html">plan9obj.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8077717">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8077773">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8077827">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8077878">package</span>&nbsp;<span class="ident" id="8077886">plan9obj</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8077896">import</span>&nbsp;<span class="op" id="8077903">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8077906">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8077917">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="8077927">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8077930">type</span>&nbsp;<span class="ident" id="8077935">fileTest</span>&nbsp;<span class="keyword" id="8077944">struct</span>&nbsp;<span class="op" id="8077951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8077954">file</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8077963">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8077971">hdr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8077980">FileHeader</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8077992">sections</span>&nbsp;<span class="op" id="8078001">[</span><span class="op" id="8078002">]</span><span class="op" id="8078003">*</span><span class="ident" id="8078004">SectionHeader</span><br>
<span class="lineno"></span><span class="op" id="8078018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8078021">var</span>&nbsp;<span class="ident" id="8078025">fileTests</span>&nbsp;<span class="op" id="8078035">=</span>&nbsp;<span class="op" id="8078037">[</span><span class="op" id="8078038">]</span><span class="ident" id="8078039">fileTest</span><span class="op" id="8078047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078050">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8078054">&#34;testdata/386-plan9-exec&#34;</span><span class="op" id="8078079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8078083">FileHeader</span><span class="op" id="8078093">{</span><span class="ident" id="8078094">Magic386</span><span class="op" id="8078102">,</span>&nbsp;<span class="num" id="8078104">0x324</span><span class="op" id="8078109">,</span>&nbsp;<span class="num" id="8078111">0x14</span><span class="op" id="8078115">,</span>&nbsp;<span class="num" id="8078117">4</span><span class="op" id="8078118">,</span>&nbsp;<span class="num" id="8078120">0x1000</span><span class="op" id="8078126">,</span>&nbsp;<span class="num" id="8078128">32</span><span class="op" id="8078130">}</span><span class="op" id="8078131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078135">[</span><span class="op" id="8078136">]</span><span class="op" id="8078137">*</span><span class="ident" id="8078138">SectionHeader</span><span class="op" id="8078151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078156">{</span><span class="string" id="8078157">&#34;text&#34;</span><span class="op" id="8078163">,</span>&nbsp;<span class="num" id="8078165">0x4c5f</span><span class="op" id="8078171">,</span>&nbsp;<span class="num" id="8078173">0x20</span><span class="op" id="8078177">}</span><span class="op" id="8078178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078183">{</span><span class="string" id="8078184">&#34;data&#34;</span><span class="op" id="8078190">,</span>&nbsp;<span class="num" id="8078192">0x94c</span><span class="op" id="8078197">,</span>&nbsp;<span class="num" id="8078199">0x4c7f</span><span class="op" id="8078205">}</span><span class="op" id="8078206">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078211">{</span><span class="string" id="8078212">&#34;syms&#34;</span><span class="op" id="8078218">,</span>&nbsp;<span class="num" id="8078220">0x2c2b</span><span class="op" id="8078226">,</span>&nbsp;<span class="num" id="8078228">0x55cb</span><span class="op" id="8078234">}</span><span class="op" id="8078235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078240">{</span><span class="string" id="8078241">&#34;spsz&#34;</span><span class="op" id="8078247">,</span>&nbsp;<span class="num" id="8078249">0x0</span><span class="op" id="8078252">,</span>&nbsp;<span class="num" id="8078254">0x81f6</span><span class="op" id="8078260">}</span><span class="op" id="8078261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078266">{</span><span class="string" id="8078267">&#34;pcsz&#34;</span><span class="op" id="8078273">,</span>&nbsp;<span class="num" id="8078275">0xf7a</span><span class="op" id="8078280">,</span>&nbsp;<span class="num" id="8078282">0x81f6</span><span class="op" id="8078288">}</span><span class="op" id="8078289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078293">}</span><span class="op" id="8078294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078297">}</span><span class="op" id="8078298">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8078305">&#34;testdata/amd64-plan9-exec&#34;</span><span class="op" id="8078332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8078336">FileHeader</span><span class="op" id="8078346">{</span><span class="ident" id="8078347">MagicAMD64</span><span class="op" id="8078357">,</span>&nbsp;<span class="num" id="8078359">0x618</span><span class="op" id="8078364">,</span>&nbsp;<span class="num" id="8078366">0x13</span><span class="op" id="8078370">,</span>&nbsp;<span class="num" id="8078372">8</span><span class="op" id="8078373">,</span>&nbsp;<span class="num" id="8078375">0x200000</span><span class="op" id="8078383">,</span>&nbsp;<span class="num" id="8078385">40</span><span class="op" id="8078387">}</span><span class="op" id="8078388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078392">[</span><span class="op" id="8078393">]</span><span class="op" id="8078394">*</span><span class="ident" id="8078395">SectionHeader</span><span class="op" id="8078408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078413">{</span><span class="string" id="8078414">&#34;text&#34;</span><span class="op" id="8078420">,</span>&nbsp;<span class="num" id="8078422">0x4213</span><span class="op" id="8078428">,</span>&nbsp;<span class="num" id="8078430">0x28</span><span class="op" id="8078434">}</span><span class="op" id="8078435">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078440">{</span><span class="string" id="8078441">&#34;data&#34;</span><span class="op" id="8078447">,</span>&nbsp;<span class="num" id="8078449">0xa80</span><span class="op" id="8078454">,</span>&nbsp;<span class="num" id="8078456">0x423b</span><span class="op" id="8078462">}</span><span class="op" id="8078463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078468">{</span><span class="string" id="8078469">&#34;syms&#34;</span><span class="op" id="8078475">,</span>&nbsp;<span class="num" id="8078477">0x2c8c</span><span class="op" id="8078483">,</span>&nbsp;<span class="num" id="8078485">0x4cbb</span><span class="op" id="8078491">}</span><span class="op" id="8078492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078497">{</span><span class="string" id="8078498">&#34;spsz&#34;</span><span class="op" id="8078504">,</span>&nbsp;<span class="num" id="8078506">0x0</span><span class="op" id="8078509">,</span>&nbsp;<span class="num" id="8078511">0x7947</span><span class="op" id="8078517">}</span><span class="op" id="8078518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078523">{</span><span class="string" id="8078524">&#34;pcsz&#34;</span><span class="op" id="8078530">,</span>&nbsp;<span class="num" id="8078532">0xca0</span><span class="op" id="8078537">,</span>&nbsp;<span class="num" id="8078539">0x7947</span><span class="op" id="8078545">}</span><span class="op" id="8078546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078550">}</span><span class="op" id="8078551">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078554">}</span><span class="op" id="8078555">,</span><br>
<span class="lineno"></span><span class="op" id="8078557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8078560">func</span>&nbsp;<span class="ident" id="8078565">TestOpen</span><span class="op" id="8078573">(</span><span class="ident" id="8078574">t</span>&nbsp;<span class="op" id="8078576">*</span><span class="ident" id="8078577">testing</span><span class="op" id="8078584">.</span><span class="ident" id="8078585">T</span><span class="op" id="8078586">)</span>&nbsp;<span class="op" id="8078588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8078591">for</span>&nbsp;<span class="ident" id="8078595">i</span>&nbsp;<span class="op" id="8078597">:=</span>&nbsp;<span class="keyword" id="8078600">range</span>&nbsp;<span class="ident" id="8078606">fileTests</span>&nbsp;<span class="op" id="8078616">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8078620">tt</span>&nbsp;<span class="op" id="8078623">:=</span>&nbsp;<span class="op" id="8078626">&amp;</span><span class="ident" id="8078627">fileTests</span><span class="op" id="8078636">[</span><span class="ident" id="8078637">i</span><span class="op" id="8078638">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8078643">f</span><span class="op" id="8078644">,</span>&nbsp;<span class="ident" id="8078646">err</span>&nbsp;<span class="op" id="8078650">:=</span>&nbsp;<span class="ident" id="8078653">Open</span><span class="op" id="8078657">(</span><span class="ident" id="8078658">tt</span><span class="op" id="8078660">.</span><span class="ident" id="8078661">file</span><span class="op" id="8078665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8078669">if</span>&nbsp;<span class="ident" id="8078672">err</span>&nbsp;<span class="op" id="8078676">!=</span>&nbsp;<span class="ident" id="8078679">nil</span>&nbsp;<span class="op" id="8078683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8078688">t</span><span class="op" id="8078689">.</span><span class="ident" id="8078690">Error</span><span class="op" id="8078695">(</span><span class="ident" id="8078696">err</span><span class="op" id="8078699">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8078704">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8078719">if</span>&nbsp;<span class="op" id="8078722">!</span><span class="ident" id="8078723">reflect</span><span class="op" id="8078730">.</span><span class="ident" id="8078731">DeepEqual</span><span class="op" id="8078740">(</span><span class="ident" id="8078741">f</span><span class="op" id="8078742">.</span><span class="ident" id="8078743">FileHeader</span><span class="op" id="8078753">,</span>&nbsp;<span class="ident" id="8078755">tt</span><span class="op" id="8078757">.</span><span class="ident" id="8078758">hdr</span><span class="op" id="8078761">)</span>&nbsp;<span class="op" id="8078763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8078768">t</span><span class="op" id="8078769">.</span><span class="ident" id="8078770">Errorf</span><span class="op" id="8078776">(</span><span class="string" id="8078777">&#34;open&nbsp;%s:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="8078813">,</span>&nbsp;<span class="ident" id="8078815">tt</span><span class="op" id="8078817">.</span><span class="ident" id="8078818">file</span><span class="op" id="8078822">,</span>&nbsp;<span class="ident" id="8078824">f</span><span class="op" id="8078825">.</span><span class="ident" id="8078826">FileHeader</span><span class="op" id="8078836">,</span>&nbsp;<span class="ident" id="8078838">tt</span><span class="op" id="8078840">.</span><span class="ident" id="8078841">hdr</span><span class="op" id="8078844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8078849">continue</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8078865">for</span>&nbsp;<span class="ident" id="8078869">i</span><span class="op" id="8078870">,</span>&nbsp;<span class="ident" id="8078872">sh</span>&nbsp;<span class="op" id="8078875">:=</span>&nbsp;<span class="keyword" id="8078878">range</span>&nbsp;<span class="ident" id="8078884">f</span><span class="op" id="8078885">.</span><span class="ident" id="8078886">Sections</span>&nbsp;<span class="op" id="8078895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8078900">if</span>&nbsp;<span class="ident" id="8078903">i</span>&nbsp;<span class="op" id="8078905">&gt;=</span>&nbsp;<span class="builtinfunc" id="8078908">len</span><span class="op" id="8078911">(</span><span class="ident" id="8078912">tt</span><span class="op" id="8078914">.</span><span class="ident" id="8078915">sections</span><span class="op" id="8078923">)</span>&nbsp;<span class="op" id="8078925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8078931">break</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8078940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8078945">have</span>&nbsp;<span class="op" id="8078950">:=</span>&nbsp;<span class="op" id="8078953">&amp;</span><span class="ident" id="8078954">sh</span><span class="op" id="8078956">.</span><span class="ident" id="8078957">SectionHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8078974">want</span>&nbsp;<span class="op" id="8078979">:=</span>&nbsp;<span class="ident" id="8078982">tt</span><span class="op" id="8078984">.</span><span class="ident" id="8078985">sections</span><span class="op" id="8078993">[</span><span class="ident" id="8078994">i</span><span class="op" id="8078995">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8079000">if</span>&nbsp;<span class="op" id="8079003">!</span><span class="ident" id="8079004">reflect</span><span class="op" id="8079011">.</span><span class="ident" id="8079012">DeepEqual</span><span class="op" id="8079021">(</span><span class="ident" id="8079022">have</span><span class="op" id="8079026">,</span>&nbsp;<span class="ident" id="8079028">want</span><span class="op" id="8079032">)</span>&nbsp;<span class="op" id="8079034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8079040">t</span><span class="op" id="8079041">.</span><span class="ident" id="8079042">Errorf</span><span class="op" id="8079048">(</span><span class="string" id="8079049">&#34;open&nbsp;%s,&nbsp;section&nbsp;%d:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="8079097">,</span>&nbsp;<span class="ident" id="8079099">tt</span><span class="op" id="8079101">.</span><span class="ident" id="8079102">file</span><span class="op" id="8079106">,</span>&nbsp;<span class="ident" id="8079108">i</span><span class="op" id="8079109">,</span>&nbsp;<span class="ident" id="8079111">have</span><span class="op" id="8079115">,</span>&nbsp;<span class="ident" id="8079117">want</span><span class="op" id="8079121">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8079126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8079130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8079134">tn</span>&nbsp;<span class="op" id="8079137">:=</span>&nbsp;<span class="builtinfunc" id="8079140">len</span><span class="op" id="8079143">(</span><span class="ident" id="8079144">tt</span><span class="op" id="8079146">.</span><span class="ident" id="8079147">sections</span><span class="op" id="8079155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8079159">fn</span>&nbsp;<span class="op" id="8079162">:=</span>&nbsp;<span class="builtinfunc" id="8079165">len</span><span class="op" id="8079168">(</span><span class="ident" id="8079169">f</span><span class="op" id="8079170">.</span><span class="ident" id="8079171">Sections</span><span class="op" id="8079179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8079183">if</span>&nbsp;<span class="ident" id="8079186">tn</span>&nbsp;<span class="op" id="8079189">!=</span>&nbsp;<span class="ident" id="8079192">fn</span>&nbsp;<span class="op" id="8079195">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8079200">t</span><span class="op" id="8079201">.</span><span class="ident" id="8079202">Errorf</span><span class="op" id="8079208">(</span><span class="string" id="8079209">&#34;open&nbsp;%s:&nbsp;len(Sections)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8079247">,</span>&nbsp;<span class="ident" id="8079249">tt</span><span class="op" id="8079251">.</span><span class="ident" id="8079252">file</span><span class="op" id="8079256">,</span>&nbsp;<span class="ident" id="8079258">fn</span><span class="op" id="8079260">,</span>&nbsp;<span class="ident" id="8079262">tn</span><span class="op" id="8079264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8079268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8079271">}</span><br>
<span class="lineno"></span><span class="op" id="8079273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="8079276">func</span>&nbsp;<span class="ident" id="8079281">TestOpenFailure</span><span class="op" id="8079296">(</span><span class="ident" id="8079297">t</span>&nbsp;<span class="op" id="8079299">*</span><span class="ident" id="8079300">testing</span><span class="op" id="8079307">.</span><span class="ident" id="8079308">T</span><span class="op" id="8079309">)</span>&nbsp;<span class="op" id="8079311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8079314">filename</span>&nbsp;<span class="op" id="8079323">:=</span>&nbsp;<span class="string" id="8079326">&#34;file.go&#34;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8079339">//&nbsp;not&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8079367">_</span><span class="op" id="8079368">,</span>&nbsp;<span class="ident" id="8079370">err</span>&nbsp;<span class="op" id="8079374">:=</span>&nbsp;<span class="ident" id="8079377">Open</span><span class="op" id="8079381">(</span><span class="ident" id="8079382">filename</span><span class="op" id="8079390">)</span>&nbsp;<span class="comment" id="8079392">//&nbsp;don&#39;t&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8079408">if</span>&nbsp;<span class="ident" id="8079411">err</span>&nbsp;<span class="op" id="8079415">==</span>&nbsp;<span class="ident" id="8079418">nil</span>&nbsp;<span class="op" id="8079422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8079426">t</span><span class="op" id="8079427">.</span><span class="ident" id="8079428">Errorf</span><span class="op" id="8079434">(</span><span class="string" id="8079435">&#34;open&nbsp;%s:&nbsp;succeeded&nbsp;unexpectedly&#34;</span><span class="op" id="8079468">,</span>&nbsp;<span class="ident" id="8079470">filename</span><span class="op" id="8079478">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8079481">}</span><br>
<span class="lineno"></span><span class="op" id="8079483">}</span>
</div>
</body>
</html>
