<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html" class="current">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7037107">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7037163">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7037217">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7037268">package</span>&nbsp;<span class="ident" id="7037276">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7037282">import</span>&nbsp;<span class="op" id="7037289">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7037292">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7037301">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7037312">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7037323">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7037330">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7037333">var</span>&nbsp;<span class="ident" id="7037337">headerWriteTests</span>&nbsp;<span class="op" id="7037354">=</span>&nbsp;<span class="op" id="7037356">[</span><span class="op" id="7037357">]</span><span class="keyword" id="7037358">struct</span>&nbsp;<span class="op" id="7037365">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037368">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7037377">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037385">exclude</span>&nbsp;&nbsp;<span class="keyword" id="7037394">map</span><span class="op" id="7037397">[</span><span class="builtintype" id="7037398">string</span><span class="op" id="7037404">]</span><span class="builtintype" id="7037405">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037411">expected</span>&nbsp;<span class="builtintype" id="7037420">string</span><br>
<span class="lineno"></span><span class="op" id="7037427">}</span><span class="op" id="7037428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037431">{</span><span class="ident" id="7037432">Header</span><span class="op" id="7037438">{</span><span class="op" id="7037439">}</span><span class="op" id="7037440">,</span>&nbsp;<span class="ident" id="7037442">nil</span><span class="op" id="7037445">,</span>&nbsp;<span class="string" id="7037447">&#34;&#34;</span><span class="op" id="7037449">}</span><span class="op" id="7037450">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037457">Header</span><span class="op" id="7037463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7037468">&#34;Content-Type&#34;</span><span class="op" id="7037482">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7037486">{</span><span class="string" id="7037487">&#34;text/html;&nbsp;charset=UTF-8&#34;</span><span class="op" id="7037513">}</span><span class="op" id="7037514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7037519">&#34;Content-Length&#34;</span><span class="op" id="7037535">:</span>&nbsp;<span class="op" id="7037537">{</span><span class="string" id="7037538">&#34;0&#34;</span><span class="op" id="7037541">}</span><span class="op" id="7037542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037546">}</span><span class="op" id="7037547">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037551">nil</span><span class="op" id="7037554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7037558">&#34;Content-Length:&nbsp;0\r\nContent-Type:&nbsp;text/html;&nbsp;charset=UTF-8\r\n&#34;</span><span class="op" id="7037623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037626">}</span><span class="op" id="7037627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037634">Header</span><span class="op" id="7037640">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7037645">&#34;Content-Length&#34;</span><span class="op" id="7037661">:</span>&nbsp;<span class="op" id="7037663">{</span><span class="string" id="7037664">&#34;0&#34;</span><span class="op" id="7037667">,</span>&nbsp;<span class="string" id="7037669">&#34;1&#34;</span><span class="op" id="7037672">,</span>&nbsp;<span class="string" id="7037674">&#34;2&#34;</span><span class="op" id="7037677">}</span><span class="op" id="7037678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037682">}</span><span class="op" id="7037683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037687">nil</span><span class="op" id="7037690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7037694">&#34;Content-Length:&nbsp;0\r\nContent-Length:&nbsp;1\r\nContent-Length:&nbsp;2\r\n&#34;</span><span class="op" id="7037759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037762">}</span><span class="op" id="7037763">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037770">Header</span><span class="op" id="7037776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7037781">&#34;Expires&#34;</span><span class="op" id="7037790">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7037801">{</span><span class="string" id="7037802">&#34;-1&#34;</span><span class="op" id="7037806">}</span><span class="op" id="7037807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7037812">&#34;Content-Length&#34;</span><span class="op" id="7037828">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7037832">{</span><span class="string" id="7037833">&#34;0&#34;</span><span class="op" id="7037836">}</span><span class="op" id="7037837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7037842">&#34;Content-Encoding&#34;</span><span class="op" id="7037860">:</span>&nbsp;<span class="op" id="7037862">{</span><span class="string" id="7037863">&#34;gzip&#34;</span><span class="op" id="7037869">}</span><span class="op" id="7037870">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037874">}</span><span class="op" id="7037875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7037879">map</span><span class="op" id="7037882">[</span><span class="builtintype" id="7037883">string</span><span class="op" id="7037889">]</span><span class="builtintype" id="7037890">bool</span><span class="op" id="7037894">{</span><span class="string" id="7037895">&#34;Content-Length&#34;</span><span class="op" id="7037911">:</span>&nbsp;<span class="builtintype" id="7037913">true</span><span class="op" id="7037917">}</span><span class="op" id="7037918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7037922">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="7037965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037968">}</span><span class="op" id="7037969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037972">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037976">Header</span><span class="op" id="7037982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7037987">&#34;Expires&#34;</span><span class="op" id="7037996">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7038007">{</span><span class="string" id="7038008">&#34;-1&#34;</span><span class="op" id="7038012">}</span><span class="op" id="7038013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038018">&#34;Content-Length&#34;</span><span class="op" id="7038034">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7038038">{</span><span class="string" id="7038039">&#34;0&#34;</span><span class="op" id="7038042">,</span>&nbsp;<span class="string" id="7038044">&#34;1&#34;</span><span class="op" id="7038047">,</span>&nbsp;<span class="string" id="7038049">&#34;2&#34;</span><span class="op" id="7038052">}</span><span class="op" id="7038053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038058">&#34;Content-Encoding&#34;</span><span class="op" id="7038076">:</span>&nbsp;<span class="op" id="7038078">{</span><span class="string" id="7038079">&#34;gzip&#34;</span><span class="op" id="7038085">}</span><span class="op" id="7038086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038090">}</span><span class="op" id="7038091">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7038095">map</span><span class="op" id="7038098">[</span><span class="builtintype" id="7038099">string</span><span class="op" id="7038105">]</span><span class="builtintype" id="7038106">bool</span><span class="op" id="7038110">{</span><span class="string" id="7038111">&#34;Content-Length&#34;</span><span class="op" id="7038127">:</span>&nbsp;<span class="builtintype" id="7038129">true</span><span class="op" id="7038133">}</span><span class="op" id="7038134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038138">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="7038181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038184">}</span><span class="op" id="7038185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7038192">Header</span><span class="op" id="7038198">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038203">&#34;Expires&#34;</span><span class="op" id="7038212">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7038223">{</span><span class="string" id="7038224">&#34;-1&#34;</span><span class="op" id="7038228">}</span><span class="op" id="7038229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038234">&#34;Content-Length&#34;</span><span class="op" id="7038250">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7038254">{</span><span class="string" id="7038255">&#34;0&#34;</span><span class="op" id="7038258">}</span><span class="op" id="7038259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038264">&#34;Content-Encoding&#34;</span><span class="op" id="7038282">:</span>&nbsp;<span class="op" id="7038284">{</span><span class="string" id="7038285">&#34;gzip&#34;</span><span class="op" id="7038291">}</span><span class="op" id="7038292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038296">}</span><span class="op" id="7038297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7038301">map</span><span class="op" id="7038304">[</span><span class="builtintype" id="7038305">string</span><span class="op" id="7038311">]</span><span class="builtintype" id="7038312">bool</span><span class="op" id="7038316">{</span><span class="string" id="7038317">&#34;Content-Length&#34;</span><span class="op" id="7038333">:</span>&nbsp;<span class="builtintype" id="7038335">true</span><span class="op" id="7038339">,</span>&nbsp;<span class="string" id="7038341">&#34;Expires&#34;</span><span class="op" id="7038350">:</span>&nbsp;<span class="builtintype" id="7038352">true</span><span class="op" id="7038356">,</span>&nbsp;<span class="string" id="7038358">&#34;Content-Encoding&#34;</span><span class="op" id="7038376">:</span>&nbsp;<span class="builtintype" id="7038378">true</span><span class="op" id="7038382">}</span><span class="op" id="7038383">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038387">&#34;&#34;</span><span class="op" id="7038389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038392">}</span><span class="op" id="7038393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7038400">Header</span><span class="op" id="7038406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038411">&#34;Nil&#34;</span><span class="op" id="7038416">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7038427">nil</span><span class="op" id="7038430">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038435">&#34;Empty&#34;</span><span class="op" id="7038442">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7038451">{</span><span class="op" id="7038452">}</span><span class="op" id="7038453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038458">&#34;Blank&#34;</span><span class="op" id="7038465">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7038474">{</span><span class="string" id="7038475">&#34;&#34;</span><span class="op" id="7038477">}</span><span class="op" id="7038478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038483">&#34;Double-Blank&#34;</span><span class="op" id="7038497">:</span>&nbsp;<span class="op" id="7038499">{</span><span class="string" id="7038500">&#34;&#34;</span><span class="op" id="7038502">,</span>&nbsp;<span class="string" id="7038504">&#34;&#34;</span><span class="op" id="7038506">}</span><span class="op" id="7038507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038511">}</span><span class="op" id="7038512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7038516">nil</span><span class="op" id="7038519">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038523">&#34;Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\n&#34;</span><span class="op" id="7038572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038575">}</span><span class="op" id="7038576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7038579">//&nbsp;Tests&nbsp;header&nbsp;sorting&nbsp;when&nbsp;over&nbsp;the&nbsp;insertion&nbsp;sort&nbsp;threshold&nbsp;side:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7038653">Header</span><span class="op" id="7038659">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038664">&#34;k1&#34;</span><span class="op" id="7038668">:</span>&nbsp;<span class="op" id="7038670">{</span><span class="string" id="7038671">&#34;1a&#34;</span><span class="op" id="7038675">,</span>&nbsp;<span class="string" id="7038677">&#34;1b&#34;</span><span class="op" id="7038681">}</span><span class="op" id="7038682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038687">&#34;k2&#34;</span><span class="op" id="7038691">:</span>&nbsp;<span class="op" id="7038693">{</span><span class="string" id="7038694">&#34;2a&#34;</span><span class="op" id="7038698">,</span>&nbsp;<span class="string" id="7038700">&#34;2b&#34;</span><span class="op" id="7038704">}</span><span class="op" id="7038705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038710">&#34;k3&#34;</span><span class="op" id="7038714">:</span>&nbsp;<span class="op" id="7038716">{</span><span class="string" id="7038717">&#34;3a&#34;</span><span class="op" id="7038721">,</span>&nbsp;<span class="string" id="7038723">&#34;3b&#34;</span><span class="op" id="7038727">}</span><span class="op" id="7038728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038733">&#34;k4&#34;</span><span class="op" id="7038737">:</span>&nbsp;<span class="op" id="7038739">{</span><span class="string" id="7038740">&#34;4a&#34;</span><span class="op" id="7038744">,</span>&nbsp;<span class="string" id="7038746">&#34;4b&#34;</span><span class="op" id="7038750">}</span><span class="op" id="7038751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038756">&#34;k5&#34;</span><span class="op" id="7038760">:</span>&nbsp;<span class="op" id="7038762">{</span><span class="string" id="7038763">&#34;5a&#34;</span><span class="op" id="7038767">,</span>&nbsp;<span class="string" id="7038769">&#34;5b&#34;</span><span class="op" id="7038773">}</span><span class="op" id="7038774">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038779">&#34;k6&#34;</span><span class="op" id="7038783">:</span>&nbsp;<span class="op" id="7038785">{</span><span class="string" id="7038786">&#34;6a&#34;</span><span class="op" id="7038790">,</span>&nbsp;<span class="string" id="7038792">&#34;6b&#34;</span><span class="op" id="7038796">}</span><span class="op" id="7038797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038802">&#34;k7&#34;</span><span class="op" id="7038806">:</span>&nbsp;<span class="op" id="7038808">{</span><span class="string" id="7038809">&#34;7a&#34;</span><span class="op" id="7038813">,</span>&nbsp;<span class="string" id="7038815">&#34;7b&#34;</span><span class="op" id="7038819">}</span><span class="op" id="7038820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038825">&#34;k8&#34;</span><span class="op" id="7038829">:</span>&nbsp;<span class="op" id="7038831">{</span><span class="string" id="7038832">&#34;8a&#34;</span><span class="op" id="7038836">,</span>&nbsp;<span class="string" id="7038838">&#34;8b&#34;</span><span class="op" id="7038842">}</span><span class="op" id="7038843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038848">&#34;k9&#34;</span><span class="op" id="7038852">:</span>&nbsp;<span class="op" id="7038854">{</span><span class="string" id="7038855">&#34;9a&#34;</span><span class="op" id="7038859">,</span>&nbsp;<span class="string" id="7038861">&#34;9b&#34;</span><span class="op" id="7038865">}</span><span class="op" id="7038866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038870">}</span><span class="op" id="7038871">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7038875">map</span><span class="op" id="7038878">[</span><span class="builtintype" id="7038879">string</span><span class="op" id="7038885">]</span><span class="builtintype" id="7038886">bool</span><span class="op" id="7038890">{</span><span class="string" id="7038891">&#34;k5&#34;</span><span class="op" id="7038895">:</span>&nbsp;<span class="builtintype" id="7038897">true</span><span class="op" id="7038901">}</span><span class="op" id="7038902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038906">&#34;k1:&nbsp;1a\r\nk1:&nbsp;1b\r\nk2:&nbsp;2a\r\nk2:&nbsp;2b\r\nk3:&nbsp;3a\r\nk3:&nbsp;3b\r\n&#34;</span>&nbsp;<span class="op" id="7038969">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7038974">&#34;k4:&nbsp;4a\r\nk4:&nbsp;4b\r\nk6:&nbsp;6a\r\nk6:&nbsp;6b\r\n&#34;</span>&nbsp;<span class="op" id="7039017">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7039022">&#34;k7:&nbsp;7a\r\nk7:&nbsp;7b\r\nk8:&nbsp;8a\r\nk8:&nbsp;8b\r\nk9:&nbsp;9a\r\nk9:&nbsp;9b\r\n&#34;</span><span class="op" id="7039084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7039087">}</span><span class="op" id="7039088">,</span><br>
<span class="lineno">90</span><span class="op" id="7039090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7039093">func</span>&nbsp;<span class="ident" id="7039098">TestHeaderWrite</span><span class="op" id="7039113">(</span><span class="ident" id="7039114">t</span>&nbsp;<span class="op" id="7039116">*</span><span class="ident" id="7039117">testing</span><span class="op" id="7039124">.</span><span class="ident" id="7039125">T</span><span class="op" id="7039126">)</span>&nbsp;<span class="op" id="7039128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7039131">var</span>&nbsp;<span class="ident" id="7039135">buf</span>&nbsp;<span class="ident" id="7039139">bytes</span><span class="op" id="7039144">.</span><span class="ident" id="7039145">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7039153">for</span>&nbsp;<span class="ident" id="7039157">i</span><span class="op" id="7039158">,</span>&nbsp;<span class="ident" id="7039160">test</span>&nbsp;<span class="op" id="7039165">:=</span>&nbsp;<span class="keyword" id="7039168">range</span>&nbsp;<span class="ident" id="7039174">headerWriteTests</span>&nbsp;<span class="op" id="7039191">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7039195">test</span><span class="op" id="7039199">.</span><span class="ident" id="7039200">h</span><span class="op" id="7039201">.</span><span class="ident" id="7039202">WriteSubset</span><span class="op" id="7039213">(</span><span class="op" id="7039214">&amp;</span><span class="ident" id="7039215">buf</span><span class="op" id="7039218">,</span>&nbsp;<span class="ident" id="7039220">test</span><span class="op" id="7039224">.</span><span class="ident" id="7039225">exclude</span><span class="op" id="7039232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7039236">if</span>&nbsp;<span class="ident" id="7039239">buf</span><span class="op" id="7039242">.</span><span class="ident" id="7039243">String</span><span class="op" id="7039249">(</span><span class="op" id="7039250">)</span>&nbsp;<span class="op" id="7039252">!=</span>&nbsp;<span class="ident" id="7039255">test</span><span class="op" id="7039259">.</span><span class="ident" id="7039260">expected</span>&nbsp;<span class="op" id="7039269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7039274">t</span><span class="op" id="7039275">.</span><span class="ident" id="7039276">Errorf</span><span class="op" id="7039282">(</span><span class="string" id="7039283">&#34;#%d:\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op" id="7039309">,</span>&nbsp;<span class="ident" id="7039311">i</span><span class="op" id="7039312">,</span>&nbsp;<span class="ident" id="7039314">buf</span><span class="op" id="7039317">.</span><span class="ident" id="7039318">String</span><span class="op" id="7039324">(</span><span class="op" id="7039325">)</span><span class="op" id="7039326">,</span>&nbsp;<span class="ident" id="7039328">test</span><span class="op" id="7039332">.</span><span class="ident" id="7039333">expected</span><span class="op" id="7039341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7039345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7039349">buf</span><span class="op" id="7039352">.</span><span class="ident" id="7039353">Reset</span><span class="op" id="7039358">(</span><span class="op" id="7039359">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7039362">}</span><br>
<span class="lineno"></span><span class="op" id="7039364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7039367">var</span>&nbsp;<span class="ident" id="7039371">parseTimeTests</span>&nbsp;<span class="op" id="7039386">=</span>&nbsp;<span class="op" id="7039388">[</span><span class="op" id="7039389">]</span><span class="keyword" id="7039390">struct</span>&nbsp;<span class="op" id="7039397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7039400">h</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7039404">Header</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7039412">err</span>&nbsp;<span class="builtintype" id="7039416">bool</span><br>
<span class="lineno"></span><span class="op" id="7039421">}</span><span class="op" id="7039422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7039425">{</span><span class="ident" id="7039426">Header</span><span class="op" id="7039432">{</span><span class="string" id="7039433">&#34;Date&#34;</span><span class="op" id="7039439">:</span>&nbsp;<span class="op" id="7039441">{</span><span class="string" id="7039442">&#34;&#34;</span><span class="op" id="7039444">}</span><span class="op" id="7039445">}</span><span class="op" id="7039446">,</span>&nbsp;<span class="builtintype" id="7039448">true</span><span class="op" id="7039452">}</span><span class="op" id="7039453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7039456">{</span><span class="ident" id="7039457">Header</span><span class="op" id="7039463">{</span><span class="string" id="7039464">&#34;Date&#34;</span><span class="op" id="7039470">:</span>&nbsp;<span class="op" id="7039472">{</span><span class="string" id="7039473">&#34;invalid&#34;</span><span class="op" id="7039482">}</span><span class="op" id="7039483">}</span><span class="op" id="7039484">,</span>&nbsp;<span class="builtintype" id="7039486">true</span><span class="op" id="7039490">}</span><span class="op" id="7039491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7039494">{</span><span class="ident" id="7039495">Header</span><span class="op" id="7039501">{</span><span class="string" id="7039502">&#34;Date&#34;</span><span class="op" id="7039508">:</span>&nbsp;<span class="op" id="7039510">{</span><span class="string" id="7039511">&#34;1994-11-06T08:49:37Z00:00&#34;</span><span class="op" id="7039538">}</span><span class="op" id="7039539">}</span><span class="op" id="7039540">,</span>&nbsp;<span class="builtintype" id="7039542">true</span><span class="op" id="7039546">}</span><span class="op" id="7039547">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7039550">{</span><span class="ident" id="7039551">Header</span><span class="op" id="7039557">{</span><span class="string" id="7039558">&#34;Date&#34;</span><span class="op" id="7039564">:</span>&nbsp;<span class="op" id="7039566">{</span><span class="string" id="7039567">&#34;Sun,&nbsp;06&nbsp;Nov&nbsp;1994&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="7039598">}</span><span class="op" id="7039599">}</span><span class="op" id="7039600">,</span>&nbsp;<span class="builtintype" id="7039602">false</span><span class="op" id="7039607">}</span><span class="op" id="7039608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7039611">{</span><span class="ident" id="7039612">Header</span><span class="op" id="7039618">{</span><span class="string" id="7039619">&#34;Date&#34;</span><span class="op" id="7039625">:</span>&nbsp;<span class="op" id="7039627">{</span><span class="string" id="7039628">&#34;Sunday,&nbsp;06-Nov-94&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="7039660">}</span><span class="op" id="7039661">}</span><span class="op" id="7039662">,</span>&nbsp;<span class="builtintype" id="7039664">false</span><span class="op" id="7039669">}</span><span class="op" id="7039670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7039673">{</span><span class="ident" id="7039674">Header</span><span class="op" id="7039680">{</span><span class="string" id="7039681">&#34;Date&#34;</span><span class="op" id="7039687">:</span>&nbsp;<span class="op" id="7039689">{</span><span class="string" id="7039690">&#34;Sun&nbsp;Nov&nbsp;&nbsp;6&nbsp;08:49:37&nbsp;1994&#34;</span><span class="op" id="7039716">}</span><span class="op" id="7039717">}</span><span class="op" id="7039718">,</span>&nbsp;<span class="builtintype" id="7039720">false</span><span class="op" id="7039725">}</span><span class="op" id="7039726">,</span><br>
<span class="lineno"></span><span class="op" id="7039728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="7039731">func</span>&nbsp;<span class="ident" id="7039736">TestParseTime</span><span class="op" id="7039749">(</span><span class="ident" id="7039750">t</span>&nbsp;<span class="op" id="7039752">*</span><span class="ident" id="7039753">testing</span><span class="op" id="7039760">.</span><span class="ident" id="7039761">T</span><span class="op" id="7039762">)</span>&nbsp;<span class="op" id="7039764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7039767">expect</span>&nbsp;<span class="op" id="7039774">:=</span>&nbsp;<span class="ident" id="7039777">time</span><span class="op" id="7039781">.</span><span class="ident" id="7039782">Date</span><span class="op" id="7039786">(</span><span class="num" id="7039787">1994</span><span class="op" id="7039791">,</span>&nbsp;<span class="num" id="7039793">11</span><span class="op" id="7039795">,</span>&nbsp;<span class="num" id="7039797">6</span><span class="op" id="7039798">,</span>&nbsp;<span class="num" id="7039800">8</span><span class="op" id="7039801">,</span>&nbsp;<span class="num" id="7039803">49</span><span class="op" id="7039805">,</span>&nbsp;<span class="num" id="7039807">37</span><span class="op" id="7039809">,</span>&nbsp;<span class="num" id="7039811">0</span><span class="op" id="7039812">,</span>&nbsp;<span class="ident" id="7039814">time</span><span class="op" id="7039818">.</span><span class="ident" id="7039819">UTC</span><span class="op" id="7039822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7039825">for</span>&nbsp;<span class="ident" id="7039829">i</span><span class="op" id="7039830">,</span>&nbsp;<span class="ident" id="7039832">test</span>&nbsp;<span class="op" id="7039837">:=</span>&nbsp;<span class="keyword" id="7039840">range</span>&nbsp;<span class="ident" id="7039846">parseTimeTests</span>&nbsp;<span class="op" id="7039861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7039865">d</span><span class="op" id="7039866">,</span>&nbsp;<span class="ident" id="7039868">err</span>&nbsp;<span class="op" id="7039872">:=</span>&nbsp;<span class="ident" id="7039875">ParseTime</span><span class="op" id="7039884">(</span><span class="ident" id="7039885">test</span><span class="op" id="7039889">.</span><span class="ident" id="7039890">h</span><span class="op" id="7039891">.</span><span class="ident" id="7039892">Get</span><span class="op" id="7039895">(</span><span class="string" id="7039896">&#34;Date&#34;</span><span class="op" id="7039902">)</span><span class="op" id="7039903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7039907">if</span>&nbsp;<span class="ident" id="7039910">err</span>&nbsp;<span class="op" id="7039914">!=</span>&nbsp;<span class="ident" id="7039917">nil</span>&nbsp;<span class="op" id="7039921">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7039926">if</span>&nbsp;<span class="op" id="7039929">!</span><span class="ident" id="7039930">test</span><span class="op" id="7039934">.</span><span class="ident" id="7039935">err</span>&nbsp;<span class="op" id="7039939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7039945">t</span><span class="op" id="7039946">.</span><span class="ident" id="7039947">Errorf</span><span class="op" id="7039953">(</span><span class="string" id="7039954">&#34;#%d:\n&nbsp;got&nbsp;err:&nbsp;%v&#34;</span><span class="op" id="7039974">,</span>&nbsp;<span class="ident" id="7039976">i</span><span class="op" id="7039977">,</span>&nbsp;<span class="ident" id="7039979">err</span><span class="op" id="7039982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7039987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7039992">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040003">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7040007">if</span>&nbsp;<span class="ident" id="7040010">test</span><span class="op" id="7040014">.</span><span class="ident" id="7040015">err</span>&nbsp;<span class="op" id="7040019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7040024">t</span><span class="op" id="7040025">.</span><span class="ident" id="7040026">Errorf</span><span class="op" id="7040032">(</span><span class="string" id="7040033">&#34;#%d:\n&nbsp;&nbsp;should&nbsp;err&#34;</span><span class="op" id="7040053">,</span>&nbsp;<span class="ident" id="7040055">i</span><span class="op" id="7040056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7040061">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7040076">if</span>&nbsp;<span class="op" id="7040079">!</span><span class="ident" id="7040080">expect</span><span class="op" id="7040086">.</span><span class="ident" id="7040087">Equal</span><span class="op" id="7040092">(</span><span class="ident" id="7040093">d</span><span class="op" id="7040094">)</span>&nbsp;<span class="op" id="7040096">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7040101">t</span><span class="op" id="7040102">.</span><span class="ident" id="7040103">Errorf</span><span class="op" id="7040109">(</span><span class="string" id="7040110">&#34;#%d:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="7040136">,</span>&nbsp;<span class="ident" id="7040138">i</span><span class="op" id="7040139">,</span>&nbsp;<span class="ident" id="7040141">d</span><span class="op" id="7040142">,</span>&nbsp;<span class="ident" id="7040144">expect</span><span class="op" id="7040150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040157">}</span><br>
<span class="lineno"></span><span class="op" id="7040159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7040162">type</span>&nbsp;<span class="ident" id="7040167">hasTokenTest</span>&nbsp;<span class="keyword" id="7040180">struct</span>&nbsp;<span class="op" id="7040187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7040190">header</span>&nbsp;<span class="builtintype" id="7040197">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7040205">token</span>&nbsp;&nbsp;<span class="builtintype" id="7040212">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7040220">want</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7040227">bool</span><br>
<span class="lineno"></span><span class="op" id="7040232">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7040235">var</span>&nbsp;<span class="ident" id="7040239">hasTokenTests</span>&nbsp;<span class="op" id="7040253">=</span>&nbsp;<span class="op" id="7040255">[</span><span class="op" id="7040256">]</span><span class="ident" id="7040257">hasTokenTest</span><span class="op" id="7040269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040272">{</span><span class="string" id="7040273">&#34;&#34;</span><span class="op" id="7040275">,</span>&nbsp;<span class="string" id="7040277">&#34;&#34;</span><span class="op" id="7040279">,</span>&nbsp;<span class="builtintype" id="7040281">false</span><span class="op" id="7040286">}</span><span class="op" id="7040287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040290">{</span><span class="string" id="7040291">&#34;&#34;</span><span class="op" id="7040293">,</span>&nbsp;<span class="string" id="7040295">&#34;foo&#34;</span><span class="op" id="7040300">,</span>&nbsp;<span class="builtintype" id="7040302">false</span><span class="op" id="7040307">}</span><span class="op" id="7040308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040311">{</span><span class="string" id="7040312">&#34;foo&#34;</span><span class="op" id="7040317">,</span>&nbsp;<span class="string" id="7040319">&#34;foo&#34;</span><span class="op" id="7040324">,</span>&nbsp;<span class="builtintype" id="7040326">true</span><span class="op" id="7040330">}</span><span class="op" id="7040331">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040334">{</span><span class="string" id="7040335">&#34;foo&nbsp;&#34;</span><span class="op" id="7040341">,</span>&nbsp;<span class="string" id="7040343">&#34;foo&#34;</span><span class="op" id="7040348">,</span>&nbsp;<span class="builtintype" id="7040350">true</span><span class="op" id="7040354">}</span><span class="op" id="7040355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040358">{</span><span class="string" id="7040359">&#34;&nbsp;foo&#34;</span><span class="op" id="7040365">,</span>&nbsp;<span class="string" id="7040367">&#34;foo&#34;</span><span class="op" id="7040372">,</span>&nbsp;<span class="builtintype" id="7040374">true</span><span class="op" id="7040378">}</span><span class="op" id="7040379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040382">{</span><span class="string" id="7040383">&#34;&nbsp;foo&nbsp;&#34;</span><span class="op" id="7040390">,</span>&nbsp;<span class="string" id="7040392">&#34;foo&#34;</span><span class="op" id="7040397">,</span>&nbsp;<span class="builtintype" id="7040399">true</span><span class="op" id="7040403">}</span><span class="op" id="7040404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040407">{</span><span class="string" id="7040408">&#34;foo,bar&#34;</span><span class="op" id="7040417">,</span>&nbsp;<span class="string" id="7040419">&#34;foo&#34;</span><span class="op" id="7040424">,</span>&nbsp;<span class="builtintype" id="7040426">true</span><span class="op" id="7040430">}</span><span class="op" id="7040431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040434">{</span><span class="string" id="7040435">&#34;bar,foo&#34;</span><span class="op" id="7040444">,</span>&nbsp;<span class="string" id="7040446">&#34;foo&#34;</span><span class="op" id="7040451">,</span>&nbsp;<span class="builtintype" id="7040453">true</span><span class="op" id="7040457">}</span><span class="op" id="7040458">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040461">{</span><span class="string" id="7040462">&#34;bar,&nbsp;foo&#34;</span><span class="op" id="7040472">,</span>&nbsp;<span class="string" id="7040474">&#34;foo&#34;</span><span class="op" id="7040479">,</span>&nbsp;<span class="builtintype" id="7040481">true</span><span class="op" id="7040485">}</span><span class="op" id="7040486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040489">{</span><span class="string" id="7040490">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="7040504">,</span>&nbsp;<span class="string" id="7040506">&#34;foo&#34;</span><span class="op" id="7040511">,</span>&nbsp;<span class="builtintype" id="7040513">true</span><span class="op" id="7040517">}</span><span class="op" id="7040518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040521">{</span><span class="string" id="7040522">&#34;bar,&nbsp;foo,baz&#34;</span><span class="op" id="7040536">,</span>&nbsp;<span class="string" id="7040538">&#34;foo&#34;</span><span class="op" id="7040543">,</span>&nbsp;<span class="builtintype" id="7040545">true</span><span class="op" id="7040549">}</span><span class="op" id="7040550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040553">{</span><span class="string" id="7040554">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="7040568">,</span>&nbsp;<span class="string" id="7040570">&#34;foo&#34;</span><span class="op" id="7040575">,</span>&nbsp;<span class="builtintype" id="7040577">true</span><span class="op" id="7040581">}</span><span class="op" id="7040582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040585">{</span><span class="string" id="7040586">&#34;bar,&nbsp;foo,&nbsp;baz&#34;</span><span class="op" id="7040601">,</span>&nbsp;<span class="string" id="7040603">&#34;foo&#34;</span><span class="op" id="7040608">,</span>&nbsp;<span class="builtintype" id="7040610">true</span><span class="op" id="7040614">}</span><span class="op" id="7040615">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040618">{</span><span class="string" id="7040619">&#34;FOO&#34;</span><span class="op" id="7040624">,</span>&nbsp;<span class="string" id="7040626">&#34;foo&#34;</span><span class="op" id="7040631">,</span>&nbsp;<span class="builtintype" id="7040633">true</span><span class="op" id="7040637">}</span><span class="op" id="7040638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040641">{</span><span class="string" id="7040642">&#34;FOO&nbsp;&#34;</span><span class="op" id="7040648">,</span>&nbsp;<span class="string" id="7040650">&#34;foo&#34;</span><span class="op" id="7040655">,</span>&nbsp;<span class="builtintype" id="7040657">true</span><span class="op" id="7040661">}</span><span class="op" id="7040662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040665">{</span><span class="string" id="7040666">&#34;&nbsp;FOO&#34;</span><span class="op" id="7040672">,</span>&nbsp;<span class="string" id="7040674">&#34;foo&#34;</span><span class="op" id="7040679">,</span>&nbsp;<span class="builtintype" id="7040681">true</span><span class="op" id="7040685">}</span><span class="op" id="7040686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040689">{</span><span class="string" id="7040690">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="7040697">,</span>&nbsp;<span class="string" id="7040699">&#34;foo&#34;</span><span class="op" id="7040704">,</span>&nbsp;<span class="builtintype" id="7040706">true</span><span class="op" id="7040710">}</span><span class="op" id="7040711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040714">{</span><span class="string" id="7040715">&#34;FOO,BAR&#34;</span><span class="op" id="7040724">,</span>&nbsp;<span class="string" id="7040726">&#34;foo&#34;</span><span class="op" id="7040731">,</span>&nbsp;<span class="builtintype" id="7040733">true</span><span class="op" id="7040737">}</span><span class="op" id="7040738">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040741">{</span><span class="string" id="7040742">&#34;BAR,FOO&#34;</span><span class="op" id="7040751">,</span>&nbsp;<span class="string" id="7040753">&#34;foo&#34;</span><span class="op" id="7040758">,</span>&nbsp;<span class="builtintype" id="7040760">true</span><span class="op" id="7040764">}</span><span class="op" id="7040765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040768">{</span><span class="string" id="7040769">&#34;BAR,&nbsp;FOO&#34;</span><span class="op" id="7040779">,</span>&nbsp;<span class="string" id="7040781">&#34;foo&#34;</span><span class="op" id="7040786">,</span>&nbsp;<span class="builtintype" id="7040788">true</span><span class="op" id="7040792">}</span><span class="op" id="7040793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040796">{</span><span class="string" id="7040797">&#34;BAR,FOO,&nbsp;baz&#34;</span><span class="op" id="7040811">,</span>&nbsp;<span class="string" id="7040813">&#34;foo&#34;</span><span class="op" id="7040818">,</span>&nbsp;<span class="builtintype" id="7040820">true</span><span class="op" id="7040824">}</span><span class="op" id="7040825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040828">{</span><span class="string" id="7040829">&#34;BAR,&nbsp;FOO,BAZ&#34;</span><span class="op" id="7040843">,</span>&nbsp;<span class="string" id="7040845">&#34;foo&#34;</span><span class="op" id="7040850">,</span>&nbsp;<span class="builtintype" id="7040852">true</span><span class="op" id="7040856">}</span><span class="op" id="7040857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040860">{</span><span class="string" id="7040861">&#34;BAR,FOO,&nbsp;BAZ&#34;</span><span class="op" id="7040875">,</span>&nbsp;<span class="string" id="7040877">&#34;foo&#34;</span><span class="op" id="7040882">,</span>&nbsp;<span class="builtintype" id="7040884">true</span><span class="op" id="7040888">}</span><span class="op" id="7040889">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040892">{</span><span class="string" id="7040893">&#34;BAR,&nbsp;FOO,&nbsp;BAZ&#34;</span><span class="op" id="7040908">,</span>&nbsp;<span class="string" id="7040910">&#34;foo&#34;</span><span class="op" id="7040915">,</span>&nbsp;<span class="builtintype" id="7040917">true</span><span class="op" id="7040921">}</span><span class="op" id="7040922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040925">{</span><span class="string" id="7040926">&#34;foobar&#34;</span><span class="op" id="7040934">,</span>&nbsp;<span class="string" id="7040936">&#34;foo&#34;</span><span class="op" id="7040941">,</span>&nbsp;<span class="builtintype" id="7040943">false</span><span class="op" id="7040948">}</span><span class="op" id="7040949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040952">{</span><span class="string" id="7040953">&#34;barfoo&nbsp;&#34;</span><span class="op" id="7040962">,</span>&nbsp;<span class="string" id="7040964">&#34;foo&#34;</span><span class="op" id="7040969">,</span>&nbsp;<span class="builtintype" id="7040971">false</span><span class="op" id="7040976">}</span><span class="op" id="7040977">,</span><br>
<span class="lineno"></span><span class="op" id="7040979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="7040982">func</span>&nbsp;<span class="ident" id="7040987">TestHasToken</span><span class="op" id="7040999">(</span><span class="ident" id="7041000">t</span>&nbsp;<span class="op" id="7041002">*</span><span class="ident" id="7041003">testing</span><span class="op" id="7041010">.</span><span class="ident" id="7041011">T</span><span class="op" id="7041012">)</span>&nbsp;<span class="op" id="7041014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7041017">for</span>&nbsp;<span class="ident" id="7041021">_</span><span class="op" id="7041022">,</span>&nbsp;<span class="ident" id="7041024">tt</span>&nbsp;<span class="op" id="7041027">:=</span>&nbsp;<span class="keyword" id="7041030">range</span>&nbsp;<span class="ident" id="7041036">hasTokenTests</span>&nbsp;<span class="op" id="7041050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7041054">if</span>&nbsp;<span class="ident" id="7041057">hasToken</span><span class="op" id="7041065">(</span><span class="ident" id="7041066">tt</span><span class="op" id="7041068">.</span><span class="ident" id="7041069">header</span><span class="op" id="7041075">,</span>&nbsp;<span class="ident" id="7041077">tt</span><span class="op" id="7041079">.</span><span class="ident" id="7041080">token</span><span class="op" id="7041085">)</span>&nbsp;<span class="op" id="7041087">!=</span>&nbsp;<span class="ident" id="7041090">tt</span><span class="op" id="7041092">.</span><span class="ident" id="7041093">want</span>&nbsp;<span class="op" id="7041098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041103">t</span><span class="op" id="7041104">.</span><span class="ident" id="7041105">Errorf</span><span class="op" id="7041111">(</span><span class="string" id="7041112">&#34;hasToken(%q,&nbsp;%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7041144">,</span>&nbsp;<span class="ident" id="7041146">tt</span><span class="op" id="7041148">.</span><span class="ident" id="7041149">header</span><span class="op" id="7041155">,</span>&nbsp;<span class="ident" id="7041157">tt</span><span class="op" id="7041159">.</span><span class="ident" id="7041160">token</span><span class="op" id="7041165">,</span>&nbsp;<span class="op" id="7041167">!</span><span class="ident" id="7041168">tt</span><span class="op" id="7041170">.</span><span class="ident" id="7041171">want</span><span class="op" id="7041175">,</span>&nbsp;<span class="ident" id="7041177">tt</span><span class="op" id="7041179">.</span><span class="ident" id="7041180">want</span><span class="op" id="7041184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041188">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041191">}</span><br>
<span class="lineno"></span><span class="op" id="7041193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7041196">var</span>&nbsp;<span class="ident" id="7041200">testHeader</span>&nbsp;<span class="op" id="7041211">=</span>&nbsp;<span class="ident" id="7041213">Header</span><span class="op" id="7041219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7041222">&#34;Content-Length&#34;</span><span class="op" id="7041238">:</span>&nbsp;<span class="op" id="7041240">{</span><span class="string" id="7041241">&#34;123&#34;</span><span class="op" id="7041246">}</span><span class="op" id="7041247">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7041250">&#34;Content-Type&#34;</span><span class="op" id="7041264">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7041268">{</span><span class="string" id="7041269">&#34;text/plain&#34;</span><span class="op" id="7041281">}</span><span class="op" id="7041282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7041285">&#34;Date&#34;</span><span class="op" id="7041291">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7041303">{</span><span class="string" id="7041304">&#34;some&nbsp;date&nbsp;at&nbsp;some&nbsp;time&nbsp;Z&#34;</span><span class="op" id="7041330">}</span><span class="op" id="7041331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7041334">&#34;Server&#34;</span><span class="op" id="7041342">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7041352">{</span><span class="ident" id="7041353">DefaultUserAgent</span><span class="op" id="7041369">}</span><span class="op" id="7041370">,</span><br>
<span class="lineno"></span><span class="op" id="7041372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="7041375">var</span>&nbsp;<span class="ident" id="7041379">buf</span>&nbsp;<span class="ident" id="7041383">bytes</span><span class="op" id="7041388">.</span><span class="ident" id="7041389">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7041397">func</span>&nbsp;<span class="ident" id="7041402">BenchmarkHeaderWriteSubset</span><span class="op" id="7041428">(</span><span class="ident" id="7041429">b</span>&nbsp;<span class="op" id="7041431">*</span><span class="ident" id="7041432">testing</span><span class="op" id="7041439">.</span><span class="ident" id="7041440">B</span><span class="op" id="7041441">)</span>&nbsp;<span class="op" id="7041443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041446">b</span><span class="op" id="7041447">.</span><span class="ident" id="7041448">ReportAllocs</span><span class="op" id="7041460">(</span><span class="op" id="7041461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7041464">for</span>&nbsp;<span class="ident" id="7041468">i</span>&nbsp;<span class="op" id="7041470">:=</span>&nbsp;<span class="num" id="7041473">0</span><span class="op" id="7041474">;</span>&nbsp;<span class="ident" id="7041476">i</span>&nbsp;<span class="op" id="7041478">&lt;</span>&nbsp;<span class="ident" id="7041480">b</span><span class="op" id="7041481">.</span><span class="ident" id="7041482">N</span><span class="op" id="7041483">;</span>&nbsp;<span class="ident" id="7041485">i</span><span class="op" id="7041486">++</span>&nbsp;<span class="op" id="7041489">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041493">buf</span><span class="op" id="7041496">.</span><span class="ident" id="7041497">Reset</span><span class="op" id="7041502">(</span><span class="op" id="7041503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041507">testHeader</span><span class="op" id="7041517">.</span><span class="ident" id="7041518">WriteSubset</span><span class="op" id="7041529">(</span><span class="op" id="7041530">&amp;</span><span class="ident" id="7041531">buf</span><span class="op" id="7041534">,</span>&nbsp;<span class="ident" id="7041536">nil</span><span class="op" id="7041539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041542">}</span><br>
<span class="lineno"></span><span class="op" id="7041544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7041547">func</span>&nbsp;<span class="ident" id="7041552">TestHeaderWriteSubsetAllocs</span><span class="op" id="7041579">(</span><span class="ident" id="7041580">t</span>&nbsp;<span class="op" id="7041582">*</span><span class="ident" id="7041583">testing</span><span class="op" id="7041590">.</span><span class="ident" id="7041591">T</span><span class="op" id="7041592">)</span>&nbsp;<span class="op" id="7041594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7041597">if</span>&nbsp;<span class="ident" id="7041600">testing</span><span class="op" id="7041607">.</span><span class="ident" id="7041608">Short</span><span class="op" id="7041613">(</span><span class="op" id="7041614">)</span>&nbsp;<span class="op" id="7041616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041620">t</span><span class="op" id="7041621">.</span><span class="ident" id="7041622">Skip</span><span class="op" id="7041626">(</span><span class="string" id="7041627">&#34;skipping&nbsp;alloc&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7041662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7041668">if</span>&nbsp;<span class="ident" id="7041671">raceEnabled</span>&nbsp;<span class="op" id="7041683">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041687">t</span><span class="op" id="7041688">.</span><span class="ident" id="7041689">Skip</span><span class="op" id="7041693">(</span><span class="string" id="7041694">&#34;skipping&nbsp;test&nbsp;under&nbsp;race&nbsp;detector&#34;</span><span class="op" id="7041729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7041735">if</span>&nbsp;<span class="ident" id="7041738">runtime</span><span class="op" id="7041745">.</span><span class="ident" id="7041746">GOMAXPROCS</span><span class="op" id="7041756">(</span><span class="num" id="7041757">0</span><span class="op" id="7041758">)</span>&nbsp;<span class="op" id="7041760">&gt;</span>&nbsp;<span class="num" id="7041762">1</span>&nbsp;<span class="op" id="7041764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041768">t</span><span class="op" id="7041769">.</span><span class="ident" id="7041770">Skip</span><span class="op" id="7041774">(</span><span class="string" id="7041775">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7041799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041802">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041805">n</span>&nbsp;<span class="op" id="7041807">:=</span>&nbsp;<span class="ident" id="7041810">testing</span><span class="op" id="7041817">.</span><span class="ident" id="7041818">AllocsPerRun</span><span class="op" id="7041830">(</span><span class="num" id="7041831">100</span><span class="op" id="7041834">,</span>&nbsp;<span class="keyword" id="7041836">func</span><span class="op" id="7041840">(</span><span class="op" id="7041841">)</span>&nbsp;<span class="op" id="7041843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041847">buf</span><span class="op" id="7041850">.</span><span class="ident" id="7041851">Reset</span><span class="op" id="7041856">(</span><span class="op" id="7041857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041861">testHeader</span><span class="op" id="7041871">.</span><span class="ident" id="7041872">WriteSubset</span><span class="op" id="7041883">(</span><span class="op" id="7041884">&amp;</span><span class="ident" id="7041885">buf</span><span class="op" id="7041888">,</span>&nbsp;<span class="ident" id="7041890">nil</span><span class="op" id="7041893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041896">}</span><span class="op" id="7041897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7041900">if</span>&nbsp;<span class="ident" id="7041903">n</span>&nbsp;<span class="op" id="7041905">&gt;</span>&nbsp;<span class="num" id="7041907">0</span>&nbsp;<span class="op" id="7041909">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041913">t</span><span class="op" id="7041914">.</span><span class="ident" id="7041915">Errorf</span><span class="op" id="7041921">(</span><span class="string" id="7041922">&#34;allocs&nbsp;=&nbsp;%g;&nbsp;want&nbsp;0&#34;</span><span class="op" id="7041943">,</span>&nbsp;<span class="ident" id="7041945">n</span><span class="op" id="7041946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041949">}</span><br>
<span class="lineno"></span><span class="op" id="7041951">}</span>
</div>
</body>
</html>
