<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/png</h2>
<ul>
<li><a href="/gostd/image/png/paeth.go.html">paeth.go</a></li>
<li><a href="/gostd/image/png/paeth_test.go.html">paeth_test.go</a></li>
<li><a href="/gostd/image/png/reader.go.html">reader.go</a></li>
<li><a href="/gostd/image/png/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/image/png/writer.go.html">writer.go</a></li>
<li><a href="/gostd/image/png/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8327016">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8327071">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8327125">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8327176">package</span>&nbsp;<span class="ident" id="8327184">png</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8327189">import</span>&nbsp;<span class="op" id="8327196">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8327199">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8327208">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8327215">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8327224">&#34;image/color&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8327239">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8327252">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8327262">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8327265">func</span>&nbsp;<span class="ident" id="8327270">diff</span><span class="op" id="8327274">(</span><span class="ident" id="8327275">m0</span><span class="op" id="8327277">,</span>&nbsp;<span class="ident" id="8327279">m1</span>&nbsp;<span class="ident" id="8327282"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8327287">.</span><span class="ident" id="8327288"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="8327293">)</span>&nbsp;<span class="builtintype" id="8327295">error</span>&nbsp;<span class="op" id="8327301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327304">b0</span><span class="op" id="8327306">,</span>&nbsp;<span class="ident" id="8327308">b1</span>&nbsp;<span class="op" id="8327311">:=</span>&nbsp;<span class="ident" id="8327314"><a href="/gostd/image/png/writer_test.go.html#8327275">m0</a></span><span class="op" id="8327316">.</span><span class="ident" id="8327317"><a href="/gostd/image/image.go.html#5155130">Bounds</a></span><span class="op" id="8327323">(</span><span class="op" id="8327324">)</span><span class="op" id="8327325">,</span>&nbsp;<span class="ident" id="8327327"><a href="/gostd/image/png/writer_test.go.html#8327279">m1</a></span><span class="op" id="8327329">.</span><span class="ident" id="8327330"><a href="/gostd/image/image.go.html#5155130">Bounds</a></span><span class="op" id="8327336">(</span><span class="op" id="8327337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327340">if</span>&nbsp;<span class="op" id="8327343">!</span><span class="ident" id="8327344"><a href="/gostd/image/png/writer_test.go.html#8327304">b0</a></span><span class="op" id="8327346">.</span><span class="ident" id="8327347"><a href="/gostd/image/geom.go.html#5150413">Size</a></span><span class="op" id="8327351">(</span><span class="op" id="8327352">)</span><span class="op" id="8327353">.</span><span class="ident" id="8327354"><a href="/gostd/image/geom.go.html#5149556">Eq</a></span><span class="op" id="8327356">(</span><span class="ident" id="8327357"><a href="/gostd/image/png/writer_test.go.html#8327308">b1</a></span><span class="op" id="8327359">.</span><span class="ident" id="8327360"><a href="/gostd/image/geom.go.html#5150413">Size</a></span><span class="op" id="8327364">(</span><span class="op" id="8327365">)</span><span class="op" id="8327366">)</span>&nbsp;<span class="op" id="8327368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327372">return</span>&nbsp;<span class="ident" id="8327379"><a href="/gostd/image/png/writer_test.go.html#8327208">fmt</a></span><span class="op" id="8327382">.</span><span class="ident" id="8327383"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="8327389">(</span><span class="string" id="8327390">&#34;dimensions&nbsp;differ:&nbsp;%v&nbsp;vs&nbsp;%v&#34;</span><span class="op" id="8327419">,</span>&nbsp;<span class="ident" id="8327421"><a href="/gostd/image/png/writer_test.go.html#8327304">b0</a></span><span class="op" id="8327423">,</span>&nbsp;<span class="ident" id="8327425"><a href="/gostd/image/png/writer_test.go.html#8327308">b1</a></span><span class="op" id="8327427">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8327430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327433">dx</span>&nbsp;<span class="op" id="8327436">:=</span>&nbsp;<span class="ident" id="8327439"><a href="/gostd/image/png/writer_test.go.html#8327308">b1</a></span><span class="op" id="8327441">.</span><span class="ident" id="8327442"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8327445">.</span><span class="ident" id="8327446"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="8327448">-</span>&nbsp;<span class="ident" id="8327450"><a href="/gostd/image/png/writer_test.go.html#8327304">b0</a></span><span class="op" id="8327452">.</span><span class="ident" id="8327453"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8327456">.</span><span class="ident" id="8327457"><a href="/gostd/image/geom.go.html#5148451">X</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327460">dy</span>&nbsp;<span class="op" id="8327463">:=</span>&nbsp;<span class="ident" id="8327466"><a href="/gostd/image/png/writer_test.go.html#8327308">b1</a></span><span class="op" id="8327468">.</span><span class="ident" id="8327469"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8327472">.</span><span class="ident" id="8327473"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="8327475">-</span>&nbsp;<span class="ident" id="8327477"><a href="/gostd/image/png/writer_test.go.html#8327304">b0</a></span><span class="op" id="8327479">.</span><span class="ident" id="8327480"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8327483">.</span><span class="ident" id="8327484"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327487">for</span>&nbsp;<span class="ident" id="8327491">y</span>&nbsp;<span class="op" id="8327493">:=</span>&nbsp;<span class="ident" id="8327496"><a href="/gostd/image/png/writer_test.go.html#8327304">b0</a></span><span class="op" id="8327498">.</span><span class="ident" id="8327499"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8327502">.</span><span class="ident" id="8327503"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="8327504">;</span>&nbsp;<span class="ident" id="8327506"><a href="/gostd/image/png/writer_test.go.html#8327491">y</a></span>&nbsp;<span class="op" id="8327508">&lt;</span>&nbsp;<span class="ident" id="8327510"><a href="/gostd/image/png/writer_test.go.html#8327304">b0</a></span><span class="op" id="8327512">.</span><span class="ident" id="8327513"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="8327516">.</span><span class="ident" id="8327517"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="8327518">;</span>&nbsp;<span class="ident" id="8327520"><a href="/gostd/image/png/writer_test.go.html#8327491">y</a></span><span class="op" id="8327521">++</span>&nbsp;<span class="op" id="8327524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327528">for</span>&nbsp;<span class="ident" id="8327532">x</span>&nbsp;<span class="op" id="8327534">:=</span>&nbsp;<span class="ident" id="8327537"><a href="/gostd/image/png/writer_test.go.html#8327304">b0</a></span><span class="op" id="8327539">.</span><span class="ident" id="8327540"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8327543">.</span><span class="ident" id="8327544"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8327545">;</span>&nbsp;<span class="ident" id="8327547"><a href="/gostd/image/png/writer_test.go.html#8327532">x</a></span>&nbsp;<span class="op" id="8327549">&lt;</span>&nbsp;<span class="ident" id="8327551"><a href="/gostd/image/png/writer_test.go.html#8327304">b0</a></span><span class="op" id="8327553">.</span><span class="ident" id="8327554"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="8327557">.</span><span class="ident" id="8327558"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8327559">;</span>&nbsp;<span class="ident" id="8327561"><a href="/gostd/image/png/writer_test.go.html#8327532">x</a></span><span class="op" id="8327562">++</span>&nbsp;<span class="op" id="8327565">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327570">c0</span>&nbsp;<span class="op" id="8327573">:=</span>&nbsp;<span class="ident" id="8327576"><a href="/gostd/image/png/writer_test.go.html#8327275">m0</a></span><span class="op" id="8327578">.</span><span class="ident" id="8327579"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="8327581">(</span><span class="ident" id="8327582"><a href="/gostd/image/png/writer_test.go.html#8327532">x</a></span><span class="op" id="8327583">,</span>&nbsp;<span class="ident" id="8327585"><a href="/gostd/image/png/writer_test.go.html#8327491">y</a></span><span class="op" id="8327586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327591">c1</span>&nbsp;<span class="op" id="8327594">:=</span>&nbsp;<span class="ident" id="8327597"><a href="/gostd/image/png/writer_test.go.html#8327279">m1</a></span><span class="op" id="8327599">.</span><span class="ident" id="8327600"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="8327602">(</span><span class="ident" id="8327603"><a href="/gostd/image/png/writer_test.go.html#8327532">x</a></span><span class="op" id="8327604">+</span><span class="ident" id="8327605"><a href="/gostd/image/png/writer_test.go.html#8327433">dx</a></span><span class="op" id="8327607">,</span>&nbsp;<span class="ident" id="8327609"><a href="/gostd/image/png/writer_test.go.html#8327491">y</a></span><span class="op" id="8327610">+</span><span class="ident" id="8327611"><a href="/gostd/image/png/writer_test.go.html#8327460">dy</a></span><span class="op" id="8327613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327618">r0</span><span class="op" id="8327620">,</span>&nbsp;<span class="ident" id="8327622">g0</span><span class="op" id="8327624">,</span>&nbsp;<span class="ident" id="8327626">b0</span><span class="op" id="8327628">,</span>&nbsp;<span class="ident" id="8327630">a0</span>&nbsp;<span class="op" id="8327633">:=</span>&nbsp;<span class="ident" id="8327636"><a href="/gostd/image/png/writer_test.go.html#8327570">c0</a></span><span class="op" id="8327638">.</span><span class="ident" id="8327639"><a href="/gostd/image/color/color.go.html#5185453">RGBA</a></span><span class="op" id="8327643">(</span><span class="op" id="8327644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327649">r1</span><span class="op" id="8327651">,</span>&nbsp;<span class="ident" id="8327653">g1</span><span class="op" id="8327655">,</span>&nbsp;<span class="ident" id="8327657">b1</span><span class="op" id="8327659">,</span>&nbsp;<span class="ident" id="8327661">a1</span>&nbsp;<span class="op" id="8327664">:=</span>&nbsp;<span class="ident" id="8327667"><a href="/gostd/image/png/writer_test.go.html#8327591">c1</a></span><span class="op" id="8327669">.</span><span class="ident" id="8327670"><a href="/gostd/image/color/color.go.html#5185453">RGBA</a></span><span class="op" id="8327674">(</span><span class="op" id="8327675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327680">if</span>&nbsp;<span class="ident" id="8327683"><a href="/gostd/image/png/writer_test.go.html#8327618">r0</a></span>&nbsp;<span class="op" id="8327686">!=</span>&nbsp;<span class="ident" id="8327689"><a href="/gostd/image/png/writer_test.go.html#8327649">r1</a></span>&nbsp;<span class="op" id="8327692">||</span>&nbsp;<span class="ident" id="8327695"><a href="/gostd/image/png/writer_test.go.html#8327622">g0</a></span>&nbsp;<span class="op" id="8327698">!=</span>&nbsp;<span class="ident" id="8327701"><a href="/gostd/image/png/writer_test.go.html#8327653">g1</a></span>&nbsp;<span class="op" id="8327704">||</span>&nbsp;<span class="ident" id="8327707"><a href="/gostd/image/png/writer_test.go.html#8327626">b0</a></span>&nbsp;<span class="op" id="8327710">!=</span>&nbsp;<span class="ident" id="8327713"><a href="/gostd/image/png/writer_test.go.html#8327657">b1</a></span>&nbsp;<span class="op" id="8327716">||</span>&nbsp;<span class="ident" id="8327719"><a href="/gostd/image/png/writer_test.go.html#8327630">a0</a></span>&nbsp;<span class="op" id="8327722">!=</span>&nbsp;<span class="ident" id="8327725"><a href="/gostd/image/png/writer_test.go.html#8327661">a1</a></span>&nbsp;<span class="op" id="8327728">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327734">return</span>&nbsp;<span class="ident" id="8327741"><a href="/gostd/image/png/writer_test.go.html#8327208">fmt</a></span><span class="op" id="8327744">.</span><span class="ident" id="8327745"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="8327751">(</span><span class="string" id="8327752">&#34;colors&nbsp;differ&nbsp;at&nbsp;(%d,&nbsp;%d):&nbsp;%v&nbsp;vs&nbsp;%v&#34;</span><span class="op" id="8327789">,</span>&nbsp;<span class="ident" id="8327791"><a href="/gostd/image/png/writer_test.go.html#8327532">x</a></span><span class="op" id="8327792">,</span>&nbsp;<span class="ident" id="8327794"><a href="/gostd/image/png/writer_test.go.html#8327491">y</a></span><span class="op" id="8327795">,</span>&nbsp;<span class="ident" id="8327797"><a href="/gostd/image/png/writer_test.go.html#8327570">c0</a></span><span class="op" id="8327799">,</span>&nbsp;<span class="ident" id="8327801"><a href="/gostd/image/png/writer_test.go.html#8327591">c1</a></span><span class="op" id="8327803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8327808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8327812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8327815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327818">return</span>&nbsp;<span class="builtintype" id="8327825">nil</span><br>
<span class="lineno">35</span><span class="op" id="8327829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8327832">func</span>&nbsp;<span class="ident" id="8327837">encodeDecode</span><span class="op" id="8327849">(</span><span class="ident" id="8327850">m</span>&nbsp;<span class="ident" id="8327852"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8327857">.</span><span class="ident" id="8327858"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="8327863">)</span>&nbsp;<span class="op" id="8327865">(</span><span class="ident" id="8327866"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8327871">.</span><span class="ident" id="8327872"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="8327877">,</span>&nbsp;<span class="builtintype" id="8327879">error</span><span class="op" id="8327884">)</span>&nbsp;<span class="op" id="8327886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327889">var</span>&nbsp;<span class="ident" id="8327893">b</span>&nbsp;<span class="ident" id="8327895"><a href="/gostd/image/png/writer_test.go.html#8327199">bytes</a></span><span class="op" id="8327900">.</span><span class="ident" id="8327901"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327909">err</span>&nbsp;<span class="op" id="8327913">:=</span>&nbsp;<span class="ident" id="8327916"><a href="/gostd/image/png/writer.go.html#6179905">Encode</a></span><span class="op" id="8327922">(</span><span class="op" id="8327923">&amp;</span><span class="ident" id="8327924"><a href="/gostd/image/png/writer_test.go.html#8327893">b</a></span><span class="op" id="8327925">,</span>&nbsp;<span class="ident" id="8327927"><a href="/gostd/image/png/writer_test.go.html#8327850">m</a></span><span class="op" id="8327928">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327931">if</span>&nbsp;<span class="ident" id="8327934"><a href="/gostd/image/png/writer_test.go.html#8327909">err</a></span>&nbsp;<span class="op" id="8327938">!=</span>&nbsp;<span class="builtintype" id="8327941">nil</span>&nbsp;<span class="op" id="8327945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327949">return</span>&nbsp;<span class="builtintype" id="8327956">nil</span><span class="op" id="8327959">,</span>&nbsp;<span class="ident" id="8327961"><a href="/gostd/image/png/writer_test.go.html#8327909">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8327966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327969">return</span>&nbsp;<span class="ident" id="8327976"><a href="/gostd/image/png/reader.go.html#6167292">Decode</a></span><span class="op" id="8327982">(</span><span class="op" id="8327983">&amp;</span><span class="ident" id="8327984"><a href="/gostd/image/png/writer_test.go.html#8327893">b</a></span><span class="op" id="8327985">)</span><br>
<span class="lineno"></span><span class="op" id="8327987">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="8327990">func</span>&nbsp;<span class="ident" id="8327995">TestWriter</span><span class="op" id="8328005">(</span><span class="ident" id="8328006">t</span>&nbsp;<span class="op" id="8328008">*</span><span class="ident" id="8328009"><a href="/gostd/image/png/writer_test.go.html#8327252">testing</a></span><span class="op" id="8328016">.</span><span class="ident" id="8328017"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8328018">)</span>&nbsp;<span class="op" id="8328020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8328023">//&nbsp;The&nbsp;filenames&nbsp;variable&nbsp;is&nbsp;declared&nbsp;in&nbsp;reader_test.go.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328081">names</span>&nbsp;<span class="op" id="8328087">:=</span>&nbsp;<span class="ident" id="8328090"><a href="/gostd/image/png/reader_test.go.html#8318859">filenames</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328101">if</span>&nbsp;<span class="ident" id="8328104"><a href="/gostd/image/png/writer_test.go.html#8327252">testing</a></span><span class="op" id="8328111">.</span><span class="ident" id="8328112"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="8328117">(</span><span class="op" id="8328118">)</span>&nbsp;<span class="op" id="8328120">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328124"><a href="/gostd/image/png/writer_test.go.html#8328081">names</a></span>&nbsp;<span class="op" id="8328130">=</span>&nbsp;<span class="ident" id="8328132"><a href="/gostd/image/png/reader_test.go.html#8319273">filenamesShort</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8328148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328151">for</span>&nbsp;<span class="ident" id="8328155">_</span><span class="op" id="8328156">,</span>&nbsp;<span class="ident" id="8328158">fn</span>&nbsp;<span class="op" id="8328161">:=</span>&nbsp;<span class="keyword" id="8328164">range</span>&nbsp;<span class="ident" id="8328170"><a href="/gostd/image/png/writer_test.go.html#8328081">names</a></span>&nbsp;<span class="op" id="8328176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328180">qfn</span>&nbsp;<span class="op" id="8328184">:=</span>&nbsp;<span class="string" id="8328187">&#34;testdata/pngsuite/&#34;</span>&nbsp;<span class="op" id="8328208">+</span>&nbsp;<span class="ident" id="8328210"><a href="/gostd/image/png/writer_test.go.html#8328158">fn</a></span>&nbsp;<span class="op" id="8328213">+</span>&nbsp;<span class="string" id="8328215">&#34;.png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8328224">//&nbsp;Read&nbsp;the&nbsp;image.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328245">m0</span><span class="op" id="8328247">,</span>&nbsp;<span class="ident" id="8328249">err</span>&nbsp;<span class="op" id="8328253">:=</span>&nbsp;<span class="ident" id="8328256"><a href="/gostd/image/png/reader_test.go.html#8319350">readPNG</a></span><span class="op" id="8328263">(</span><span class="ident" id="8328264"><a href="/gostd/image/png/writer_test.go.html#8328180">qfn</a></span><span class="op" id="8328267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328271">if</span>&nbsp;<span class="ident" id="8328274"><a href="/gostd/image/png/writer_test.go.html#8328249">err</a></span>&nbsp;<span class="op" id="8328278">!=</span>&nbsp;<span class="builtintype" id="8328281">nil</span>&nbsp;<span class="op" id="8328285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328290"><a href="/gostd/image/png/writer_test.go.html#8328006">t</a></span><span class="op" id="8328291">.</span><span class="ident" id="8328292"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="8328297">(</span><span class="ident" id="8328298"><a href="/gostd/image/png/writer_test.go.html#8328158">fn</a></span><span class="op" id="8328300">,</span>&nbsp;<span class="ident" id="8328302"><a href="/gostd/image/png/writer_test.go.html#8328249">err</a></span><span class="op" id="8328305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328310">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8328321">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8328325">//&nbsp;Read&nbsp;the&nbsp;image&nbsp;again,&nbsp;encode&nbsp;it,&nbsp;and&nbsp;decode&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328378">m1</span><span class="op" id="8328380">,</span>&nbsp;<span class="ident" id="8328382"><a href="/gostd/image/png/writer_test.go.html#8328249">err</a></span>&nbsp;<span class="op" id="8328386">:=</span>&nbsp;<span class="ident" id="8328389"><a href="/gostd/image/png/reader_test.go.html#8319350">readPNG</a></span><span class="op" id="8328396">(</span><span class="ident" id="8328397"><a href="/gostd/image/png/writer_test.go.html#8328180">qfn</a></span><span class="op" id="8328400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328404">if</span>&nbsp;<span class="ident" id="8328407"><a href="/gostd/image/png/writer_test.go.html#8328249">err</a></span>&nbsp;<span class="op" id="8328411">!=</span>&nbsp;<span class="builtintype" id="8328414">nil</span>&nbsp;<span class="op" id="8328418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328423"><a href="/gostd/image/png/writer_test.go.html#8328006">t</a></span><span class="op" id="8328424">.</span><span class="ident" id="8328425"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="8328430">(</span><span class="ident" id="8328431"><a href="/gostd/image/png/writer_test.go.html#8328158">fn</a></span><span class="op" id="8328433">,</span>&nbsp;<span class="ident" id="8328435"><a href="/gostd/image/png/writer_test.go.html#8328249">err</a></span><span class="op" id="8328438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328443">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8328452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328456">m2</span><span class="op" id="8328458">,</span>&nbsp;<span class="ident" id="8328460"><a href="/gostd/image/png/writer_test.go.html#8328249">err</a></span>&nbsp;<span class="op" id="8328464">:=</span>&nbsp;<span class="ident" id="8328467"><a href="/gostd/image/png/writer_test.go.html#8327837">encodeDecode</a></span><span class="op" id="8328479">(</span><span class="ident" id="8328480"><a href="/gostd/image/png/writer_test.go.html#8328378">m1</a></span><span class="op" id="8328482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328486">if</span>&nbsp;<span class="ident" id="8328489"><a href="/gostd/image/png/writer_test.go.html#8328249">err</a></span>&nbsp;<span class="op" id="8328493">!=</span>&nbsp;<span class="builtintype" id="8328496">nil</span>&nbsp;<span class="op" id="8328500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328505"><a href="/gostd/image/png/writer_test.go.html#8328006">t</a></span><span class="op" id="8328506">.</span><span class="ident" id="8328507"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="8328512">(</span><span class="ident" id="8328513"><a href="/gostd/image/png/writer_test.go.html#8328158">fn</a></span><span class="op" id="8328515">,</span>&nbsp;<span class="ident" id="8328517"><a href="/gostd/image/png/writer_test.go.html#8328249">err</a></span><span class="op" id="8328520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328525">return</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8328534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8328538">//&nbsp;Compare&nbsp;the&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328560"><a href="/gostd/image/png/writer_test.go.html#8328249">err</a></span>&nbsp;<span class="op" id="8328564">=</span>&nbsp;<span class="ident" id="8328566"><a href="/gostd/image/png/writer_test.go.html#8327270">diff</a></span><span class="op" id="8328570">(</span><span class="ident" id="8328571"><a href="/gostd/image/png/writer_test.go.html#8328245">m0</a></span><span class="op" id="8328573">,</span>&nbsp;<span class="ident" id="8328575"><a href="/gostd/image/png/writer_test.go.html#8328456">m2</a></span><span class="op" id="8328577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328581">if</span>&nbsp;<span class="ident" id="8328584"><a href="/gostd/image/png/writer_test.go.html#8328249">err</a></span>&nbsp;<span class="op" id="8328588">!=</span>&nbsp;<span class="builtintype" id="8328591">nil</span>&nbsp;<span class="op" id="8328595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328600"><a href="/gostd/image/png/writer_test.go.html#8328006">t</a></span><span class="op" id="8328601">.</span><span class="ident" id="8328602"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="8328607">(</span><span class="ident" id="8328608"><a href="/gostd/image/png/writer_test.go.html#8328158">fn</a></span><span class="op" id="8328610">,</span>&nbsp;<span class="ident" id="8328612"><a href="/gostd/image/png/writer_test.go.html#8328249">err</a></span><span class="op" id="8328615">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328620">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8328631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8328634">}</span><br>
<span class="lineno"></span><span class="op" id="8328636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="8328639">func</span>&nbsp;<span class="ident" id="8328644">TestWriterLevels</span><span class="op" id="8328660">(</span><span class="ident" id="8328661">t</span>&nbsp;<span class="op" id="8328663">*</span><span class="ident" id="8328664"><a href="/gostd/image/png/writer_test.go.html#8327252">testing</a></span><span class="op" id="8328671">.</span><span class="ident" id="8328672"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8328673">)</span>&nbsp;<span class="op" id="8328675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328678">m</span>&nbsp;<span class="op" id="8328680">:=</span>&nbsp;<span class="ident" id="8328683"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8328688">.</span><span class="ident" id="8328689"><a href="/gostd/image/image.go.html#5163804">NewNRGBA</a></span><span class="op" id="8328697">(</span><span class="ident" id="8328698"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8328703">.</span><span class="ident" id="8328704"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="8328708">(</span><span class="num" id="8328709">0</span><span class="op" id="8328710">,</span>&nbsp;<span class="num" id="8328712">0</span><span class="op" id="8328713">,</span>&nbsp;<span class="num" id="8328715">100</span><span class="op" id="8328718">,</span>&nbsp;<span class="num" id="8328720">100</span><span class="op" id="8328723">)</span><span class="op" id="8328724">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328728">var</span>&nbsp;<span class="ident" id="8328732">b1</span><span class="op" id="8328734">,</span>&nbsp;<span class="ident" id="8328736">b2</span>&nbsp;<span class="ident" id="8328739"><a href="/gostd/image/png/writer_test.go.html#8327199">bytes</a></span><span class="op" id="8328744">.</span><span class="ident" id="8328745"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328753">if</span>&nbsp;<span class="ident" id="8328756">err</span>&nbsp;<span class="op" id="8328760">:=</span>&nbsp;<span class="op" id="8328763">(</span><span class="op" id="8328764">&amp;</span><span class="ident" id="8328765"><a href="/gostd/image/png/writer.go.html#6169246">Encoder</a></span><span class="op" id="8328772">{</span><span class="op" id="8328773">}</span><span class="op" id="8328774">)</span><span class="op" id="8328775">.</span><span class="ident" id="8328776"><a href="/gostd/image/png/writer.go.html#6180058">Encode</a></span><span class="op" id="8328782">(</span><span class="op" id="8328783">&amp;</span><span class="ident" id="8328784"><a href="/gostd/image/png/writer_test.go.html#8328732">b1</a></span><span class="op" id="8328786">,</span>&nbsp;<span class="ident" id="8328788"><a href="/gostd/image/png/writer_test.go.html#8328678">m</a></span><span class="op" id="8328789">)</span><span class="op" id="8328790">;</span>&nbsp;<span class="ident" id="8328792"><a href="/gostd/image/png/writer_test.go.html#8328756">err</a></span>&nbsp;<span class="op" id="8328796">!=</span>&nbsp;<span class="builtintype" id="8328799">nil</span>&nbsp;<span class="op" id="8328803">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328807"><a href="/gostd/image/png/writer_test.go.html#8328661">t</a></span><span class="op" id="8328808">.</span><span class="ident" id="8328809"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="8328814">(</span><span class="ident" id="8328815"><a href="/gostd/image/png/writer_test.go.html#8328756">err</a></span><span class="op" id="8328818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8328821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328824">noenc</span>&nbsp;<span class="op" id="8328830">:=</span>&nbsp;<span class="op" id="8328833">&amp;</span><span class="ident" id="8328834"><a href="/gostd/image/png/writer.go.html#6169246">Encoder</a></span><span class="op" id="8328841">{</span><span class="ident" id="8328842"><a href="/gostd/image/png/writer.go.html#6169264">CompressionLevel</a></span><span class="op" id="8328858">:</span>&nbsp;<span class="ident" id="8328860"><a href="/gostd/image/png/writer.go.html#6169538">NoCompression</a></span><span class="op" id="8328873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328876">if</span>&nbsp;<span class="ident" id="8328879">err</span>&nbsp;<span class="op" id="8328883">:=</span>&nbsp;<span class="ident" id="8328886"><a href="/gostd/image/png/writer_test.go.html#8328824">noenc</a></span><span class="op" id="8328891">.</span><span class="ident" id="8328892"><a href="/gostd/image/png/writer.go.html#6180058">Encode</a></span><span class="op" id="8328898">(</span><span class="op" id="8328899">&amp;</span><span class="ident" id="8328900"><a href="/gostd/image/png/writer_test.go.html#8328736">b2</a></span><span class="op" id="8328902">,</span>&nbsp;<span class="ident" id="8328904"><a href="/gostd/image/png/writer_test.go.html#8328678">m</a></span><span class="op" id="8328905">)</span><span class="op" id="8328906">;</span>&nbsp;<span class="ident" id="8328908"><a href="/gostd/image/png/writer_test.go.html#8328879">err</a></span>&nbsp;<span class="op" id="8328912">!=</span>&nbsp;<span class="builtintype" id="8328915">nil</span>&nbsp;<span class="op" id="8328919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328923"><a href="/gostd/image/png/writer_test.go.html#8328661">t</a></span><span class="op" id="8328924">.</span><span class="ident" id="8328925"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="8328930">(</span><span class="ident" id="8328931"><a href="/gostd/image/png/writer_test.go.html#8328879">err</a></span><span class="op" id="8328934">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8328937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328941">if</span>&nbsp;<span class="ident" id="8328944"><a href="/gostd/image/png/writer_test.go.html#8328736">b2</a></span><span class="op" id="8328946">.</span><span class="ident" id="8328947"><a href="/gostd/bytes/buffer.go.html#1384893">Len</a></span><span class="op" id="8328950">(</span><span class="op" id="8328951">)</span>&nbsp;<span class="op" id="8328953">&lt;=</span>&nbsp;<span class="ident" id="8328956"><a href="/gostd/image/png/writer_test.go.html#8328732">b1</a></span><span class="op" id="8328958">.</span><span class="ident" id="8328959"><a href="/gostd/bytes/buffer.go.html#1384893">Len</a></span><span class="op" id="8328962">(</span><span class="op" id="8328963">)</span>&nbsp;<span class="op" id="8328965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328969"><a href="/gostd/image/png/writer_test.go.html#8328661">t</a></span><span class="op" id="8328970">.</span><span class="ident" id="8328971"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="8328976">(</span><span class="string" id="8328977">&#34;DefaultCompression&nbsp;encoding&nbsp;was&nbsp;larger&nbsp;than&nbsp;NoCompression&nbsp;encoding&#34;</span><span class="op" id="8329045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329048">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8329051">if</span>&nbsp;<span class="ident" id="8329054">_</span><span class="op" id="8329055">,</span>&nbsp;<span class="ident" id="8329057">err</span>&nbsp;<span class="op" id="8329061">:=</span>&nbsp;<span class="ident" id="8329064"><a href="/gostd/image/png/reader.go.html#6167292">Decode</a></span><span class="op" id="8329070">(</span><span class="op" id="8329071">&amp;</span><span class="ident" id="8329072"><a href="/gostd/image/png/writer_test.go.html#8328732">b1</a></span><span class="op" id="8329074">)</span><span class="op" id="8329075">;</span>&nbsp;<span class="ident" id="8329077"><a href="/gostd/image/png/writer_test.go.html#8329057">err</a></span>&nbsp;<span class="op" id="8329081">!=</span>&nbsp;<span class="builtintype" id="8329084">nil</span>&nbsp;<span class="op" id="8329088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329092"><a href="/gostd/image/png/writer_test.go.html#8328661">t</a></span><span class="op" id="8329093">.</span><span class="ident" id="8329094"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="8329099">(</span><span class="string" id="8329100">&#34;cannot&nbsp;decode&nbsp;DefaultCompression&#34;</span><span class="op" id="8329134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8329140">if</span>&nbsp;<span class="ident" id="8329143">_</span><span class="op" id="8329144">,</span>&nbsp;<span class="ident" id="8329146">err</span>&nbsp;<span class="op" id="8329150">:=</span>&nbsp;<span class="ident" id="8329153"><a href="/gostd/image/png/reader.go.html#6167292">Decode</a></span><span class="op" id="8329159">(</span><span class="op" id="8329160">&amp;</span><span class="ident" id="8329161"><a href="/gostd/image/png/writer_test.go.html#8328736">b2</a></span><span class="op" id="8329163">)</span><span class="op" id="8329164">;</span>&nbsp;<span class="ident" id="8329166"><a href="/gostd/image/png/writer_test.go.html#8329146">err</a></span>&nbsp;<span class="op" id="8329170">!=</span>&nbsp;<span class="builtintype" id="8329173">nil</span>&nbsp;<span class="op" id="8329177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329181"><a href="/gostd/image/png/writer_test.go.html#8328661">t</a></span><span class="op" id="8329182">.</span><span class="ident" id="8329183"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="8329188">(</span><span class="string" id="8329189">&#34;cannot&nbsp;decode&nbsp;NoCompression&#34;</span><span class="op" id="8329218">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329221">}</span><br>
<span class="lineno"></span><span class="op" id="8329223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8329226">func</span>&nbsp;<span class="ident" id="8329231">TestSubImage</span><span class="op" id="8329243">(</span><span class="ident" id="8329244">t</span>&nbsp;<span class="op" id="8329246">*</span><span class="ident" id="8329247"><a href="/gostd/image/png/writer_test.go.html#8327252">testing</a></span><span class="op" id="8329254">.</span><span class="ident" id="8329255"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8329256">)</span>&nbsp;<span class="op" id="8329258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329261">m0</span>&nbsp;<span class="op" id="8329264">:=</span>&nbsp;<span class="ident" id="8329267"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8329272">.</span><span class="ident" id="8329273"><a href="/gostd/image/image.go.html#5158226">NewRGBA</a></span><span class="op" id="8329280">(</span><span class="ident" id="8329281"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8329286">.</span><span class="ident" id="8329287"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="8329291">(</span><span class="num" id="8329292">0</span><span class="op" id="8329293">,</span>&nbsp;<span class="num" id="8329295">0</span><span class="op" id="8329296">,</span>&nbsp;<span class="num" id="8329298">256</span><span class="op" id="8329301">,</span>&nbsp;<span class="num" id="8329303">256</span><span class="op" id="8329306">)</span><span class="op" id="8329307">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8329310">for</span>&nbsp;<span class="ident" id="8329314">y</span>&nbsp;<span class="op" id="8329316">:=</span>&nbsp;<span class="num" id="8329319">0</span><span class="op" id="8329320">;</span>&nbsp;<span class="ident" id="8329322"><a href="/gostd/image/png/writer_test.go.html#8329314">y</a></span>&nbsp;<span class="op" id="8329324">&lt;</span>&nbsp;<span class="num" id="8329326">256</span><span class="op" id="8329329">;</span>&nbsp;<span class="ident" id="8329331"><a href="/gostd/image/png/writer_test.go.html#8329314">y</a></span><span class="op" id="8329332">++</span>&nbsp;<span class="op" id="8329335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8329339">for</span>&nbsp;<span class="ident" id="8329343">x</span>&nbsp;<span class="op" id="8329345">:=</span>&nbsp;<span class="num" id="8329348">0</span><span class="op" id="8329349">;</span>&nbsp;<span class="ident" id="8329351"><a href="/gostd/image/png/writer_test.go.html#8329343">x</a></span>&nbsp;<span class="op" id="8329353">&lt;</span>&nbsp;<span class="num" id="8329355">256</span><span class="op" id="8329358">;</span>&nbsp;<span class="ident" id="8329360"><a href="/gostd/image/png/writer_test.go.html#8329343">x</a></span><span class="op" id="8329361">++</span>&nbsp;<span class="op" id="8329364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329369"><a href="/gostd/image/png/writer_test.go.html#8329261">m0</a></span><span class="op" id="8329371">.</span><span class="ident" id="8329372"><a href="/gostd/image/image.go.html#5156818">Set</a></span><span class="op" id="8329375">(</span><span class="ident" id="8329376"><a href="/gostd/image/png/writer_test.go.html#8329343">x</a></span><span class="op" id="8329377">,</span>&nbsp;<span class="ident" id="8329379"><a href="/gostd/image/png/writer_test.go.html#8329314">y</a></span><span class="op" id="8329380">,</span>&nbsp;<span class="ident" id="8329382"><a href="/gostd/image/png/writer_test.go.html#8327224">color</a></span><span class="op" id="8329387">.</span><span class="ident" id="8329388"><a href="/gostd/image/color/color.go.html#5185612">RGBA</a></span><span class="op" id="8329392">{</span><span class="builtintype" id="8329393">uint8</span><span class="op" id="8329398">(</span><span class="ident" id="8329399"><a href="/gostd/image/png/writer_test.go.html#8329343">x</a></span><span class="op" id="8329400">)</span><span class="op" id="8329401">,</span>&nbsp;<span class="builtintype" id="8329403">uint8</span><span class="op" id="8329408">(</span><span class="ident" id="8329409"><a href="/gostd/image/png/writer_test.go.html#8329314">y</a></span><span class="op" id="8329410">)</span><span class="op" id="8329411">,</span>&nbsp;<span class="num" id="8329413">0</span><span class="op" id="8329414">,</span>&nbsp;<span class="num" id="8329416">255</span><span class="op" id="8329419">}</span><span class="op" id="8329420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329427">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329430"><a href="/gostd/image/png/writer_test.go.html#8329261">m0</a></span>&nbsp;<span class="op" id="8329433">=</span>&nbsp;<span class="ident" id="8329435"><a href="/gostd/image/png/writer_test.go.html#8329261">m0</a></span><span class="op" id="8329437">.</span><span class="ident" id="8329438"><a href="/gostd/image/image.go.html#5157399">SubImage</a></span><span class="op" id="8329446">(</span><span class="ident" id="8329447"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8329452">.</span><span class="ident" id="8329453"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="8329457">(</span><span class="num" id="8329458">50</span><span class="op" id="8329460">,</span>&nbsp;<span class="num" id="8329462">30</span><span class="op" id="8329464">,</span>&nbsp;<span class="num" id="8329466">250</span><span class="op" id="8329469">,</span>&nbsp;<span class="num" id="8329471">130</span><span class="op" id="8329474">)</span><span class="op" id="8329475">)</span><span class="op" id="8329476">.</span><span class="op" id="8329477">(</span><span class="op" id="8329478">*</span><span class="ident" id="8329479"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8329484">.</span><span class="ident" id="8329485"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><span class="op" id="8329489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329492">m1</span><span class="op" id="8329494">,</span>&nbsp;<span class="ident" id="8329496">err</span>&nbsp;<span class="op" id="8329500">:=</span>&nbsp;<span class="ident" id="8329503"><a href="/gostd/image/png/writer_test.go.html#8327837">encodeDecode</a></span><span class="op" id="8329515">(</span><span class="ident" id="8329516"><a href="/gostd/image/png/writer_test.go.html#8329261">m0</a></span><span class="op" id="8329518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8329521">if</span>&nbsp;<span class="ident" id="8329524"><a href="/gostd/image/png/writer_test.go.html#8329496">err</a></span>&nbsp;<span class="op" id="8329528">!=</span>&nbsp;<span class="builtintype" id="8329531">nil</span>&nbsp;<span class="op" id="8329535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329539"><a href="/gostd/image/png/writer_test.go.html#8329244">t</a></span><span class="op" id="8329540">.</span><span class="ident" id="8329541"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="8329546">(</span><span class="ident" id="8329547"><a href="/gostd/image/png/writer_test.go.html#8329496">err</a></span><span class="op" id="8329550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8329554">return</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329565"><a href="/gostd/image/png/writer_test.go.html#8329496">err</a></span>&nbsp;<span class="op" id="8329569">=</span>&nbsp;<span class="ident" id="8329571"><a href="/gostd/image/png/writer_test.go.html#8327270">diff</a></span><span class="op" id="8329575">(</span><span class="ident" id="8329576"><a href="/gostd/image/png/writer_test.go.html#8329261">m0</a></span><span class="op" id="8329578">,</span>&nbsp;<span class="ident" id="8329580"><a href="/gostd/image/png/writer_test.go.html#8329492">m1</a></span><span class="op" id="8329582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8329585">if</span>&nbsp;<span class="ident" id="8329588"><a href="/gostd/image/png/writer_test.go.html#8329496">err</a></span>&nbsp;<span class="op" id="8329592">!=</span>&nbsp;<span class="builtintype" id="8329595">nil</span>&nbsp;<span class="op" id="8329599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329603"><a href="/gostd/image/png/writer_test.go.html#8329244">t</a></span><span class="op" id="8329604">.</span><span class="ident" id="8329605"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="8329610">(</span><span class="ident" id="8329611"><a href="/gostd/image/png/writer_test.go.html#8329496">err</a></span><span class="op" id="8329614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8329618">return</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329626">}</span><br>
<span class="lineno"></span><span class="op" id="8329628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8329631">func</span>&nbsp;<span class="ident" id="8329636">BenchmarkEncodeGray</span><span class="op" id="8329655">(</span><span class="ident" id="8329656">b</span>&nbsp;<span class="op" id="8329658">*</span><span class="ident" id="8329659"><a href="/gostd/image/png/writer_test.go.html#8327252">testing</a></span><span class="op" id="8329666">.</span><span class="ident" id="8329667"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="8329668">)</span>&nbsp;<span class="op" id="8329670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329673"><a href="/gostd/image/png/writer_test.go.html#8329656">b</a></span><span class="op" id="8329674">.</span><span class="ident" id="8329675"><a href="/gostd/testing/benchmark.go.html#5452096">StopTimer</a></span><span class="op" id="8329684">(</span><span class="op" id="8329685">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329688">img</span>&nbsp;<span class="op" id="8329692">:=</span>&nbsp;<span class="ident" id="8329695"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8329700">.</span><span class="ident" id="8329701"><a href="/gostd/image/image.go.html#5173939">NewGray</a></span><span class="op" id="8329708">(</span><span class="ident" id="8329709"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8329714">.</span><span class="ident" id="8329715"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="8329719">(</span><span class="num" id="8329720">0</span><span class="op" id="8329721">,</span>&nbsp;<span class="num" id="8329723">0</span><span class="op" id="8329724">,</span>&nbsp;<span class="num" id="8329726">640</span><span class="op" id="8329729">,</span>&nbsp;<span class="num" id="8329731">480</span><span class="op" id="8329734">)</span><span class="op" id="8329735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329738"><a href="/gostd/image/png/writer_test.go.html#8329656">b</a></span><span class="op" id="8329739">.</span><span class="ident" id="8329740"><a href="/gostd/testing/benchmark.go.html#5452834">SetBytes</a></span><span class="op" id="8329748">(</span><span class="num" id="8329749">640</span>&nbsp;<span class="op" id="8329753">*</span>&nbsp;<span class="num" id="8329755">480</span>&nbsp;<span class="op" id="8329759">*</span>&nbsp;<span class="num" id="8329761">1</span><span class="op" id="8329762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329765"><a href="/gostd/image/png/writer_test.go.html#8329656">b</a></span><span class="op" id="8329766">.</span><span class="ident" id="8329767"><a href="/gostd/testing/benchmark.go.html#5451749">StartTimer</a></span><span class="op" id="8329777">(</span><span class="op" id="8329778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8329781">for</span>&nbsp;<span class="ident" id="8329785">i</span>&nbsp;<span class="op" id="8329787">:=</span>&nbsp;<span class="num" id="8329790">0</span><span class="op" id="8329791">;</span>&nbsp;<span class="ident" id="8329793"><a href="/gostd/image/png/writer_test.go.html#8329785">i</a></span>&nbsp;<span class="op" id="8329795">&lt;</span>&nbsp;<span class="ident" id="8329797"><a href="/gostd/image/png/writer_test.go.html#8329656">b</a></span><span class="op" id="8329798">.</span><span class="ident" id="8329799"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="8329800">;</span>&nbsp;<span class="ident" id="8329802"><a href="/gostd/image/png/writer_test.go.html#8329785">i</a></span><span class="op" id="8329803">++</span>&nbsp;<span class="op" id="8329806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329810"><a href="/gostd/image/png/writer.go.html#6179905">Encode</a></span><span class="op" id="8329816">(</span><span class="ident" id="8329817"><a href="/gostd/image/png/writer_test.go.html#8327239">ioutil</a></span><span class="op" id="8329823">.</span><span class="ident" id="8329824"><a href="/gostd/io/ioutil/ioutil.go.html#3768458">Discard</a></span><span class="op" id="8329831">,</span>&nbsp;<span class="ident" id="8329833"><a href="/gostd/image/png/writer_test.go.html#8329688">img</a></span><span class="op" id="8329836">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329839">}</span><br>
<span class="lineno"></span><span class="op" id="8329841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8329844">func</span>&nbsp;<span class="ident" id="8329849">BenchmarkEncodeNRGBOpaque</span><span class="op" id="8329874">(</span><span class="ident" id="8329875">b</span>&nbsp;<span class="op" id="8329877">*</span><span class="ident" id="8329878"><a href="/gostd/image/png/writer_test.go.html#8327252">testing</a></span><span class="op" id="8329885">.</span><span class="ident" id="8329886"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="8329887">)</span>&nbsp;<span class="op" id="8329889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329892"><a href="/gostd/image/png/writer_test.go.html#8329875">b</a></span><span class="op" id="8329893">.</span><span class="ident" id="8329894"><a href="/gostd/testing/benchmark.go.html#5452096">StopTimer</a></span><span class="op" id="8329903">(</span><span class="op" id="8329904">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329907">img</span>&nbsp;<span class="op" id="8329911">:=</span>&nbsp;<span class="ident" id="8329914"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8329919">.</span><span class="ident" id="8329920"><a href="/gostd/image/image.go.html#5163804">NewNRGBA</a></span><span class="op" id="8329928">(</span><span class="ident" id="8329929"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8329934">.</span><span class="ident" id="8329935"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="8329939">(</span><span class="num" id="8329940">0</span><span class="op" id="8329941">,</span>&nbsp;<span class="num" id="8329943">0</span><span class="op" id="8329944">,</span>&nbsp;<span class="num" id="8329946">640</span><span class="op" id="8329949">,</span>&nbsp;<span class="num" id="8329951">480</span><span class="op" id="8329954">)</span><span class="op" id="8329955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8329958">//&nbsp;Set&nbsp;all&nbsp;pixels&nbsp;to&nbsp;0xFF&nbsp;alpha&nbsp;to&nbsp;force&nbsp;opaque&nbsp;mode.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330013">bo</span>&nbsp;<span class="op" id="8330016">:=</span>&nbsp;<span class="ident" id="8330019"><a href="/gostd/image/png/writer_test.go.html#8329907">img</a></span><span class="op" id="8330022">.</span><span class="ident" id="8330023"><a href="/gostd/image/image.go.html#5161857">Bounds</a></span><span class="op" id="8330029">(</span><span class="op" id="8330030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8330033">for</span>&nbsp;<span class="ident" id="8330037">y</span>&nbsp;<span class="op" id="8330039">:=</span>&nbsp;<span class="ident" id="8330042"><a href="/gostd/image/png/writer_test.go.html#8330013">bo</a></span><span class="op" id="8330044">.</span><span class="ident" id="8330045"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8330048">.</span><span class="ident" id="8330049"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="8330050">;</span>&nbsp;<span class="ident" id="8330052"><a href="/gostd/image/png/writer_test.go.html#8330037">y</a></span>&nbsp;<span class="op" id="8330054">&lt;</span>&nbsp;<span class="ident" id="8330056"><a href="/gostd/image/png/writer_test.go.html#8330013">bo</a></span><span class="op" id="8330058">.</span><span class="ident" id="8330059"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="8330062">.</span><span class="ident" id="8330063"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="8330064">;</span>&nbsp;<span class="ident" id="8330066"><a href="/gostd/image/png/writer_test.go.html#8330037">y</a></span><span class="op" id="8330067">++</span>&nbsp;<span class="op" id="8330070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8330074">for</span>&nbsp;<span class="ident" id="8330078">x</span>&nbsp;<span class="op" id="8330080">:=</span>&nbsp;<span class="ident" id="8330083"><a href="/gostd/image/png/writer_test.go.html#8330013">bo</a></span><span class="op" id="8330085">.</span><span class="ident" id="8330086"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8330089">.</span><span class="ident" id="8330090"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8330091">;</span>&nbsp;<span class="ident" id="8330093"><a href="/gostd/image/png/writer_test.go.html#8330078">x</a></span>&nbsp;<span class="op" id="8330095">&lt;</span>&nbsp;<span class="ident" id="8330097"><a href="/gostd/image/png/writer_test.go.html#8330013">bo</a></span><span class="op" id="8330099">.</span><span class="ident" id="8330100"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="8330103">.</span><span class="ident" id="8330104"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8330105">;</span>&nbsp;<span class="ident" id="8330107"><a href="/gostd/image/png/writer_test.go.html#8330078">x</a></span><span class="op" id="8330108">++</span>&nbsp;<span class="op" id="8330111">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330116"><a href="/gostd/image/png/writer_test.go.html#8329907">img</a></span><span class="op" id="8330119">.</span><span class="ident" id="8330120"><a href="/gostd/image/image.go.html#5162385">Set</a></span><span class="op" id="8330123">(</span><span class="ident" id="8330124"><a href="/gostd/image/png/writer_test.go.html#8330078">x</a></span><span class="op" id="8330125">,</span>&nbsp;<span class="ident" id="8330127"><a href="/gostd/image/png/writer_test.go.html#8330037">y</a></span><span class="op" id="8330128">,</span>&nbsp;<span class="ident" id="8330130"><a href="/gostd/image/png/writer_test.go.html#8327224">color</a></span><span class="op" id="8330135">.</span><span class="ident" id="8330136"><a href="/gostd/image/color/color.go.html#5186151">NRGBA</a></span><span class="op" id="8330141">{</span><span class="num" id="8330142">0</span><span class="op" id="8330143">,</span>&nbsp;<span class="num" id="8330145">0</span><span class="op" id="8330146">,</span>&nbsp;<span class="num" id="8330148">0</span><span class="op" id="8330149">,</span>&nbsp;<span class="num" id="8330151">255</span><span class="op" id="8330154">}</span><span class="op" id="8330155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8330159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8330162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8330165">if</span>&nbsp;<span class="op" id="8330168">!</span><span class="ident" id="8330169"><a href="/gostd/image/png/writer_test.go.html#8329907">img</a></span><span class="op" id="8330172">.</span><span class="ident" id="8330173"><a href="/gostd/image/image.go.html#5163478">Opaque</a></span><span class="op" id="8330179">(</span><span class="op" id="8330180">)</span>&nbsp;<span class="op" id="8330182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330186"><a href="/gostd/image/png/writer_test.go.html#8329875">b</a></span><span class="op" id="8330187">.</span><span class="ident" id="8330188"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="8330193">(</span><span class="string" id="8330194">&#34;expected&nbsp;image&nbsp;to&nbsp;be&nbsp;opaque&#34;</span><span class="op" id="8330223">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8330226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330229"><a href="/gostd/image/png/writer_test.go.html#8329875">b</a></span><span class="op" id="8330230">.</span><span class="ident" id="8330231"><a href="/gostd/testing/benchmark.go.html#5452834">SetBytes</a></span><span class="op" id="8330239">(</span><span class="num" id="8330240">640</span>&nbsp;<span class="op" id="8330244">*</span>&nbsp;<span class="num" id="8330246">480</span>&nbsp;<span class="op" id="8330250">*</span>&nbsp;<span class="num" id="8330252">4</span><span class="op" id="8330253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330256"><a href="/gostd/image/png/writer_test.go.html#8329875">b</a></span><span class="op" id="8330257">.</span><span class="ident" id="8330258"><a href="/gostd/testing/benchmark.go.html#5451749">StartTimer</a></span><span class="op" id="8330268">(</span><span class="op" id="8330269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8330272">for</span>&nbsp;<span class="ident" id="8330276">i</span>&nbsp;<span class="op" id="8330278">:=</span>&nbsp;<span class="num" id="8330281">0</span><span class="op" id="8330282">;</span>&nbsp;<span class="ident" id="8330284"><a href="/gostd/image/png/writer_test.go.html#8330276">i</a></span>&nbsp;<span class="op" id="8330286">&lt;</span>&nbsp;<span class="ident" id="8330288"><a href="/gostd/image/png/writer_test.go.html#8329875">b</a></span><span class="op" id="8330289">.</span><span class="ident" id="8330290"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="8330291">;</span>&nbsp;<span class="ident" id="8330293"><a href="/gostd/image/png/writer_test.go.html#8330276">i</a></span><span class="op" id="8330294">++</span>&nbsp;<span class="op" id="8330297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330301"><a href="/gostd/image/png/writer.go.html#6179905">Encode</a></span><span class="op" id="8330307">(</span><span class="ident" id="8330308"><a href="/gostd/image/png/writer_test.go.html#8327239">ioutil</a></span><span class="op" id="8330314">.</span><span class="ident" id="8330315"><a href="/gostd/io/ioutil/ioutil.go.html#3768458">Discard</a></span><span class="op" id="8330322">,</span>&nbsp;<span class="ident" id="8330324"><a href="/gostd/image/png/writer_test.go.html#8329907">img</a></span><span class="op" id="8330327">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8330330">}</span><br>
<span class="lineno"></span><span class="op" id="8330332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8330335">func</span>&nbsp;<span class="ident" id="8330340">BenchmarkEncodeNRGBA</span><span class="op" id="8330360">(</span><span class="ident" id="8330361">b</span>&nbsp;<span class="op" id="8330363">*</span><span class="ident" id="8330364"><a href="/gostd/image/png/writer_test.go.html#8327252">testing</a></span><span class="op" id="8330371">.</span><span class="ident" id="8330372"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="8330373">)</span>&nbsp;<span class="op" id="8330375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330378"><a href="/gostd/image/png/writer_test.go.html#8330361">b</a></span><span class="op" id="8330379">.</span><span class="ident" id="8330380"><a href="/gostd/testing/benchmark.go.html#5452096">StopTimer</a></span><span class="op" id="8330389">(</span><span class="op" id="8330390">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330393">img</span>&nbsp;<span class="op" id="8330397">:=</span>&nbsp;<span class="ident" id="8330400"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8330405">.</span><span class="ident" id="8330406"><a href="/gostd/image/image.go.html#5163804">NewNRGBA</a></span><span class="op" id="8330414">(</span><span class="ident" id="8330415"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8330420">.</span><span class="ident" id="8330421"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="8330425">(</span><span class="num" id="8330426">0</span><span class="op" id="8330427">,</span>&nbsp;<span class="num" id="8330429">0</span><span class="op" id="8330430">,</span>&nbsp;<span class="num" id="8330432">640</span><span class="op" id="8330435">,</span>&nbsp;<span class="num" id="8330437">480</span><span class="op" id="8330440">)</span><span class="op" id="8330441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8330444">if</span>&nbsp;<span class="ident" id="8330447"><a href="/gostd/image/png/writer_test.go.html#8330393">img</a></span><span class="op" id="8330450">.</span><span class="ident" id="8330451"><a href="/gostd/image/image.go.html#5163478">Opaque</a></span><span class="op" id="8330457">(</span><span class="op" id="8330458">)</span>&nbsp;<span class="op" id="8330460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330464"><a href="/gostd/image/png/writer_test.go.html#8330361">b</a></span><span class="op" id="8330465">.</span><span class="ident" id="8330466"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="8330471">(</span><span class="string" id="8330472">&#34;expected&nbsp;image&nbsp;not&nbsp;to&nbsp;be&nbsp;opaque&#34;</span><span class="op" id="8330505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8330508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330511"><a href="/gostd/image/png/writer_test.go.html#8330361">b</a></span><span class="op" id="8330512">.</span><span class="ident" id="8330513"><a href="/gostd/testing/benchmark.go.html#5452834">SetBytes</a></span><span class="op" id="8330521">(</span><span class="num" id="8330522">640</span>&nbsp;<span class="op" id="8330526">*</span>&nbsp;<span class="num" id="8330528">480</span>&nbsp;<span class="op" id="8330532">*</span>&nbsp;<span class="num" id="8330534">4</span><span class="op" id="8330535">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330538"><a href="/gostd/image/png/writer_test.go.html#8330361">b</a></span><span class="op" id="8330539">.</span><span class="ident" id="8330540"><a href="/gostd/testing/benchmark.go.html#5451749">StartTimer</a></span><span class="op" id="8330550">(</span><span class="op" id="8330551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8330554">for</span>&nbsp;<span class="ident" id="8330558">i</span>&nbsp;<span class="op" id="8330560">:=</span>&nbsp;<span class="num" id="8330563">0</span><span class="op" id="8330564">;</span>&nbsp;<span class="ident" id="8330566"><a href="/gostd/image/png/writer_test.go.html#8330558">i</a></span>&nbsp;<span class="op" id="8330568">&lt;</span>&nbsp;<span class="ident" id="8330570"><a href="/gostd/image/png/writer_test.go.html#8330361">b</a></span><span class="op" id="8330571">.</span><span class="ident" id="8330572"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="8330573">;</span>&nbsp;<span class="ident" id="8330575"><a href="/gostd/image/png/writer_test.go.html#8330558">i</a></span><span class="op" id="8330576">++</span>&nbsp;<span class="op" id="8330579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330583"><a href="/gostd/image/png/writer.go.html#6179905">Encode</a></span><span class="op" id="8330589">(</span><span class="ident" id="8330590"><a href="/gostd/image/png/writer_test.go.html#8327239">ioutil</a></span><span class="op" id="8330596">.</span><span class="ident" id="8330597"><a href="/gostd/io/ioutil/ioutil.go.html#3768458">Discard</a></span><span class="op" id="8330604">,</span>&nbsp;<span class="ident" id="8330606"><a href="/gostd/image/png/writer_test.go.html#8330393">img</a></span><span class="op" id="8330609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8330612">}</span><br>
<span class="lineno"></span><span class="op" id="8330614">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="8330617">func</span>&nbsp;<span class="ident" id="8330622">BenchmarkEncodePaletted</span><span class="op" id="8330645">(</span><span class="ident" id="8330646">b</span>&nbsp;<span class="op" id="8330648">*</span><span class="ident" id="8330649"><a href="/gostd/image/png/writer_test.go.html#8327252">testing</a></span><span class="op" id="8330656">.</span><span class="ident" id="8330657"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="8330658">)</span>&nbsp;<span class="op" id="8330660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330663"><a href="/gostd/image/png/writer_test.go.html#8330646">b</a></span><span class="op" id="8330664">.</span><span class="ident" id="8330665"><a href="/gostd/testing/benchmark.go.html#5452096">StopTimer</a></span><span class="op" id="8330674">(</span><span class="op" id="8330675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330678">img</span>&nbsp;<span class="op" id="8330682">:=</span>&nbsp;<span class="ident" id="8330685"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8330690">.</span><span class="ident" id="8330691"><a href="/gostd/image/image.go.html#5178970">NewPaletted</a></span><span class="op" id="8330702">(</span><span class="ident" id="8330703"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8330708">.</span><span class="ident" id="8330709"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="8330713">(</span><span class="num" id="8330714">0</span><span class="op" id="8330715">,</span>&nbsp;<span class="num" id="8330717">0</span><span class="op" id="8330718">,</span>&nbsp;<span class="num" id="8330720">640</span><span class="op" id="8330723">,</span>&nbsp;<span class="num" id="8330725">480</span><span class="op" id="8330728">)</span><span class="op" id="8330729">,</span>&nbsp;<span class="ident" id="8330731"><a href="/gostd/image/png/writer_test.go.html#8327224">color</a></span><span class="op" id="8330736">.</span><span class="ident" id="8330737"><a href="/gostd/image/color/color.go.html#5190467">Palette</a></span><span class="op" id="8330744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330748"><a href="/gostd/image/png/writer_test.go.html#8327224">color</a></span><span class="op" id="8330753">.</span><span class="ident" id="8330754"><a href="/gostd/image/color/color.go.html#5185612">RGBA</a></span><span class="op" id="8330758">{</span><span class="num" id="8330759">0</span><span class="op" id="8330760">,</span>&nbsp;<span class="num" id="8330762">0</span><span class="op" id="8330763">,</span>&nbsp;<span class="num" id="8330765">0</span><span class="op" id="8330766">,</span>&nbsp;<span class="num" id="8330768">255</span><span class="op" id="8330771">}</span><span class="op" id="8330772">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330776"><a href="/gostd/image/png/writer_test.go.html#8327224">color</a></span><span class="op" id="8330781">.</span><span class="ident" id="8330782"><a href="/gostd/image/color/color.go.html#5185612">RGBA</a></span><span class="op" id="8330786">{</span><span class="num" id="8330787">255</span><span class="op" id="8330790">,</span>&nbsp;<span class="num" id="8330792">255</span><span class="op" id="8330795">,</span>&nbsp;<span class="num" id="8330797">255</span><span class="op" id="8330800">,</span>&nbsp;<span class="num" id="8330802">255</span><span class="op" id="8330805">}</span><span class="op" id="8330806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8330809">}</span><span class="op" id="8330810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330813"><a href="/gostd/image/png/writer_test.go.html#8330646">b</a></span><span class="op" id="8330814">.</span><span class="ident" id="8330815"><a href="/gostd/testing/benchmark.go.html#5452834">SetBytes</a></span><span class="op" id="8330823">(</span><span class="num" id="8330824">640</span>&nbsp;<span class="op" id="8330828">*</span>&nbsp;<span class="num" id="8330830">480</span>&nbsp;<span class="op" id="8330834">*</span>&nbsp;<span class="num" id="8330836">1</span><span class="op" id="8330837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330840"><a href="/gostd/image/png/writer_test.go.html#8330646">b</a></span><span class="op" id="8330841">.</span><span class="ident" id="8330842"><a href="/gostd/testing/benchmark.go.html#5451749">StartTimer</a></span><span class="op" id="8330852">(</span><span class="op" id="8330853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8330856">for</span>&nbsp;<span class="ident" id="8330860">i</span>&nbsp;<span class="op" id="8330862">:=</span>&nbsp;<span class="num" id="8330865">0</span><span class="op" id="8330866">;</span>&nbsp;<span class="ident" id="8330868"><a href="/gostd/image/png/writer_test.go.html#8330860">i</a></span>&nbsp;<span class="op" id="8330870">&lt;</span>&nbsp;<span class="ident" id="8330872"><a href="/gostd/image/png/writer_test.go.html#8330646">b</a></span><span class="op" id="8330873">.</span><span class="ident" id="8330874"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="8330875">;</span>&nbsp;<span class="ident" id="8330877"><a href="/gostd/image/png/writer_test.go.html#8330860">i</a></span><span class="op" id="8330878">++</span>&nbsp;<span class="op" id="8330881">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330885"><a href="/gostd/image/png/writer.go.html#6179905">Encode</a></span><span class="op" id="8330891">(</span><span class="ident" id="8330892"><a href="/gostd/image/png/writer_test.go.html#8327239">ioutil</a></span><span class="op" id="8330898">.</span><span class="ident" id="8330899"><a href="/gostd/io/ioutil/ioutil.go.html#3768458">Discard</a></span><span class="op" id="8330906">,</span>&nbsp;<span class="ident" id="8330908"><a href="/gostd/image/png/writer_test.go.html#8330678">img</a></span><span class="op" id="8330911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8330914">}</span><br>
<span class="lineno"></span><span class="op" id="8330916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8330919">func</span>&nbsp;<span class="ident" id="8330924">BenchmarkEncodeRGBOpaque</span><span class="op" id="8330948">(</span><span class="ident" id="8330949">b</span>&nbsp;<span class="op" id="8330951">*</span><span class="ident" id="8330952"><a href="/gostd/image/png/writer_test.go.html#8327252">testing</a></span><span class="op" id="8330959">.</span><span class="ident" id="8330960"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="8330961">)</span>&nbsp;<span class="op" id="8330963">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330966"><a href="/gostd/image/png/writer_test.go.html#8330949">b</a></span><span class="op" id="8330967">.</span><span class="ident" id="8330968"><a href="/gostd/testing/benchmark.go.html#5452096">StopTimer</a></span><span class="op" id="8330977">(</span><span class="op" id="8330978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330981">img</span>&nbsp;<span class="op" id="8330985">:=</span>&nbsp;<span class="ident" id="8330988"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8330993">.</span><span class="ident" id="8330994"><a href="/gostd/image/image.go.html#5158226">NewRGBA</a></span><span class="op" id="8331001">(</span><span class="ident" id="8331002"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8331007">.</span><span class="ident" id="8331008"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="8331012">(</span><span class="num" id="8331013">0</span><span class="op" id="8331014">,</span>&nbsp;<span class="num" id="8331016">0</span><span class="op" id="8331017">,</span>&nbsp;<span class="num" id="8331019">640</span><span class="op" id="8331022">,</span>&nbsp;<span class="num" id="8331024">480</span><span class="op" id="8331027">)</span><span class="op" id="8331028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8331031">//&nbsp;Set&nbsp;all&nbsp;pixels&nbsp;to&nbsp;0xFF&nbsp;alpha&nbsp;to&nbsp;force&nbsp;opaque&nbsp;mode.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331086">bo</span>&nbsp;<span class="op" id="8331089">:=</span>&nbsp;<span class="ident" id="8331092"><a href="/gostd/image/png/writer_test.go.html#8330981">img</a></span><span class="op" id="8331095">.</span><span class="ident" id="8331096"><a href="/gostd/image/image.go.html#5156299">Bounds</a></span><span class="op" id="8331102">(</span><span class="op" id="8331103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8331106">for</span>&nbsp;<span class="ident" id="8331110">y</span>&nbsp;<span class="op" id="8331112">:=</span>&nbsp;<span class="ident" id="8331115"><a href="/gostd/image/png/writer_test.go.html#8331086">bo</a></span><span class="op" id="8331117">.</span><span class="ident" id="8331118"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8331121">.</span><span class="ident" id="8331122"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="8331123">;</span>&nbsp;<span class="ident" id="8331125"><a href="/gostd/image/png/writer_test.go.html#8331110">y</a></span>&nbsp;<span class="op" id="8331127">&lt;</span>&nbsp;<span class="ident" id="8331129"><a href="/gostd/image/png/writer_test.go.html#8331086">bo</a></span><span class="op" id="8331131">.</span><span class="ident" id="8331132"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="8331135">.</span><span class="ident" id="8331136"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="8331137">;</span>&nbsp;<span class="ident" id="8331139"><a href="/gostd/image/png/writer_test.go.html#8331110">y</a></span><span class="op" id="8331140">++</span>&nbsp;<span class="op" id="8331143">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8331147">for</span>&nbsp;<span class="ident" id="8331151">x</span>&nbsp;<span class="op" id="8331153">:=</span>&nbsp;<span class="ident" id="8331156"><a href="/gostd/image/png/writer_test.go.html#8331086">bo</a></span><span class="op" id="8331158">.</span><span class="ident" id="8331159"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8331162">.</span><span class="ident" id="8331163"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8331164">;</span>&nbsp;<span class="ident" id="8331166"><a href="/gostd/image/png/writer_test.go.html#8331151">x</a></span>&nbsp;<span class="op" id="8331168">&lt;</span>&nbsp;<span class="ident" id="8331170"><a href="/gostd/image/png/writer_test.go.html#8331086">bo</a></span><span class="op" id="8331172">.</span><span class="ident" id="8331173"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="8331176">.</span><span class="ident" id="8331177"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8331178">;</span>&nbsp;<span class="ident" id="8331180"><a href="/gostd/image/png/writer_test.go.html#8331151">x</a></span><span class="op" id="8331181">++</span>&nbsp;<span class="op" id="8331184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331189"><a href="/gostd/image/png/writer_test.go.html#8330981">img</a></span><span class="op" id="8331192">.</span><span class="ident" id="8331193"><a href="/gostd/image/image.go.html#5156818">Set</a></span><span class="op" id="8331196">(</span><span class="ident" id="8331197"><a href="/gostd/image/png/writer_test.go.html#8331151">x</a></span><span class="op" id="8331198">,</span>&nbsp;<span class="ident" id="8331200"><a href="/gostd/image/png/writer_test.go.html#8331110">y</a></span><span class="op" id="8331201">,</span>&nbsp;<span class="ident" id="8331203"><a href="/gostd/image/png/writer_test.go.html#8327224">color</a></span><span class="op" id="8331208">.</span><span class="ident" id="8331209"><a href="/gostd/image/color/color.go.html#5185612">RGBA</a></span><span class="op" id="8331213">{</span><span class="num" id="8331214">0</span><span class="op" id="8331215">,</span>&nbsp;<span class="num" id="8331217">0</span><span class="op" id="8331218">,</span>&nbsp;<span class="num" id="8331220">0</span><span class="op" id="8331221">,</span>&nbsp;<span class="num" id="8331223">255</span><span class="op" id="8331226">}</span><span class="op" id="8331227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8331231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8331234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8331237">if</span>&nbsp;<span class="op" id="8331240">!</span><span class="ident" id="8331241"><a href="/gostd/image/png/writer_test.go.html#8330981">img</a></span><span class="op" id="8331244">.</span><span class="ident" id="8331245"><a href="/gostd/image/image.go.html#5157902">Opaque</a></span><span class="op" id="8331251">(</span><span class="op" id="8331252">)</span>&nbsp;<span class="op" id="8331254">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331258"><a href="/gostd/image/png/writer_test.go.html#8330949">b</a></span><span class="op" id="8331259">.</span><span class="ident" id="8331260"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="8331265">(</span><span class="string" id="8331266">&#34;expected&nbsp;image&nbsp;to&nbsp;be&nbsp;opaque&#34;</span><span class="op" id="8331295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8331298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331301"><a href="/gostd/image/png/writer_test.go.html#8330949">b</a></span><span class="op" id="8331302">.</span><span class="ident" id="8331303"><a href="/gostd/testing/benchmark.go.html#5452834">SetBytes</a></span><span class="op" id="8331311">(</span><span class="num" id="8331312">640</span>&nbsp;<span class="op" id="8331316">*</span>&nbsp;<span class="num" id="8331318">480</span>&nbsp;<span class="op" id="8331322">*</span>&nbsp;<span class="num" id="8331324">4</span><span class="op" id="8331325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331328"><a href="/gostd/image/png/writer_test.go.html#8330949">b</a></span><span class="op" id="8331329">.</span><span class="ident" id="8331330"><a href="/gostd/testing/benchmark.go.html#5451749">StartTimer</a></span><span class="op" id="8331340">(</span><span class="op" id="8331341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8331344">for</span>&nbsp;<span class="ident" id="8331348">i</span>&nbsp;<span class="op" id="8331350">:=</span>&nbsp;<span class="num" id="8331353">0</span><span class="op" id="8331354">;</span>&nbsp;<span class="ident" id="8331356"><a href="/gostd/image/png/writer_test.go.html#8331348">i</a></span>&nbsp;<span class="op" id="8331358">&lt;</span>&nbsp;<span class="ident" id="8331360"><a href="/gostd/image/png/writer_test.go.html#8330949">b</a></span><span class="op" id="8331361">.</span><span class="ident" id="8331362"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="8331363">;</span>&nbsp;<span class="ident" id="8331365"><a href="/gostd/image/png/writer_test.go.html#8331348">i</a></span><span class="op" id="8331366">++</span>&nbsp;<span class="op" id="8331369">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331373"><a href="/gostd/image/png/writer.go.html#6179905">Encode</a></span><span class="op" id="8331379">(</span><span class="ident" id="8331380"><a href="/gostd/image/png/writer_test.go.html#8327239">ioutil</a></span><span class="op" id="8331386">.</span><span class="ident" id="8331387"><a href="/gostd/io/ioutil/ioutil.go.html#3768458">Discard</a></span><span class="op" id="8331394">,</span>&nbsp;<span class="ident" id="8331396"><a href="/gostd/image/png/writer_test.go.html#8330981">img</a></span><span class="op" id="8331399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8331402">}</span><br>
<span class="lineno"></span><span class="op" id="8331404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8331407">func</span>&nbsp;<span class="ident" id="8331412">BenchmarkEncodeRGBA</span><span class="op" id="8331431">(</span><span class="ident" id="8331432">b</span>&nbsp;<span class="op" id="8331434">*</span><span class="ident" id="8331435"><a href="/gostd/image/png/writer_test.go.html#8327252">testing</a></span><span class="op" id="8331442">.</span><span class="ident" id="8331443"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="8331444">)</span>&nbsp;<span class="op" id="8331446">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331449"><a href="/gostd/image/png/writer_test.go.html#8331432">b</a></span><span class="op" id="8331450">.</span><span class="ident" id="8331451"><a href="/gostd/testing/benchmark.go.html#5452096">StopTimer</a></span><span class="op" id="8331460">(</span><span class="op" id="8331461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331464">img</span>&nbsp;<span class="op" id="8331468">:=</span>&nbsp;<span class="ident" id="8331471"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8331476">.</span><span class="ident" id="8331477"><a href="/gostd/image/image.go.html#5158226">NewRGBA</a></span><span class="op" id="8331484">(</span><span class="ident" id="8331485"><a href="/gostd/image/png/writer_test.go.html#8327215">image</a></span><span class="op" id="8331490">.</span><span class="ident" id="8331491"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="8331495">(</span><span class="num" id="8331496">0</span><span class="op" id="8331497">,</span>&nbsp;<span class="num" id="8331499">0</span><span class="op" id="8331500">,</span>&nbsp;<span class="num" id="8331502">640</span><span class="op" id="8331505">,</span>&nbsp;<span class="num" id="8331507">480</span><span class="op" id="8331510">)</span><span class="op" id="8331511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8331514">if</span>&nbsp;<span class="ident" id="8331517"><a href="/gostd/image/png/writer_test.go.html#8331464">img</a></span><span class="op" id="8331520">.</span><span class="ident" id="8331521"><a href="/gostd/image/image.go.html#5157902">Opaque</a></span><span class="op" id="8331527">(</span><span class="op" id="8331528">)</span>&nbsp;<span class="op" id="8331530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331534"><a href="/gostd/image/png/writer_test.go.html#8331432">b</a></span><span class="op" id="8331535">.</span><span class="ident" id="8331536"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="8331541">(</span><span class="string" id="8331542">&#34;expected&nbsp;image&nbsp;not&nbsp;to&nbsp;be&nbsp;opaque&#34;</span><span class="op" id="8331575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8331578">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331581"><a href="/gostd/image/png/writer_test.go.html#8331432">b</a></span><span class="op" id="8331582">.</span><span class="ident" id="8331583"><a href="/gostd/testing/benchmark.go.html#5452834">SetBytes</a></span><span class="op" id="8331591">(</span><span class="num" id="8331592">640</span>&nbsp;<span class="op" id="8331596">*</span>&nbsp;<span class="num" id="8331598">480</span>&nbsp;<span class="op" id="8331602">*</span>&nbsp;<span class="num" id="8331604">4</span><span class="op" id="8331605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331608"><a href="/gostd/image/png/writer_test.go.html#8331432">b</a></span><span class="op" id="8331609">.</span><span class="ident" id="8331610"><a href="/gostd/testing/benchmark.go.html#5451749">StartTimer</a></span><span class="op" id="8331620">(</span><span class="op" id="8331621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8331624">for</span>&nbsp;<span class="ident" id="8331628">i</span>&nbsp;<span class="op" id="8331630">:=</span>&nbsp;<span class="num" id="8331633">0</span><span class="op" id="8331634">;</span>&nbsp;<span class="ident" id="8331636"><a href="/gostd/image/png/writer_test.go.html#8331628">i</a></span>&nbsp;<span class="op" id="8331638">&lt;</span>&nbsp;<span class="ident" id="8331640"><a href="/gostd/image/png/writer_test.go.html#8331432">b</a></span><span class="op" id="8331641">.</span><span class="ident" id="8331642"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="8331643">;</span>&nbsp;<span class="ident" id="8331645"><a href="/gostd/image/png/writer_test.go.html#8331628">i</a></span><span class="op" id="8331646">++</span>&nbsp;<span class="op" id="8331649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331653"><a href="/gostd/image/png/writer.go.html#6179905">Encode</a></span><span class="op" id="8331659">(</span><span class="ident" id="8331660"><a href="/gostd/image/png/writer_test.go.html#8327239">ioutil</a></span><span class="op" id="8331666">.</span><span class="ident" id="8331667"><a href="/gostd/io/ioutil/ioutil.go.html#3768458">Discard</a></span><span class="op" id="8331674">,</span>&nbsp;<span class="ident" id="8331676"><a href="/gostd/image/png/writer_test.go.html#8331464">img</a></span><span class="op" id="8331679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8331682">}</span><br>
<span class="lineno">210</span><span class="op" id="8331684">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
