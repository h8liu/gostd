<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html" class="current">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7840310">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7840366">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7840420">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7840471">package</span>&nbsp;<span class="ident" id="7840479">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7840486">import</span>&nbsp;<span class="op" id="7840493">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7840496">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7840502">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7840508">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7840525">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7840536">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7840547">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7840558">&#34;testing&#34;</span><br>
<span class="lineno">15</span><span class="op" id="7840568">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7840571">func</span>&nbsp;<span class="ident" id="7840576">TestMatch</span><span class="op" id="7840585">(</span><span class="ident" id="7840586">t</span>&nbsp;<span class="op" id="7840588">*</span><span class="ident" id="7840589"><a href="/gostd/go/build/build_test.go.html#7840558">testing</a></span><span class="op" id="7840596">.</span><span class="ident" id="7840597"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7840598">)</span>&nbsp;<span class="op" id="7840600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7840603">ctxt</span>&nbsp;<span class="op" id="7840608">:=</span>&nbsp;<span class="ident" id="7840611"><a href="/gostd/go/build/build.go.html#5908209">Default</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7840620">what</span>&nbsp;<span class="op" id="7840625">:=</span>&nbsp;<span class="string" id="7840628">&#34;default&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7840639">match</span>&nbsp;<span class="op" id="7840645">:=</span>&nbsp;<span class="keyword" id="7840648">func</span><span class="op" id="7840652">(</span><span class="ident" id="7840653">tag</span>&nbsp;<span class="builtintype" id="7840657">string</span><span class="op" id="7840663">,</span>&nbsp;<span class="ident" id="7840665">want</span>&nbsp;<span class="keyword" id="7840670">map</span><span class="op" id="7840673">[</span><span class="builtintype" id="7840674">string</span><span class="op" id="7840680">]</span><span class="builtintype" id="7840681">bool</span><span class="op" id="7840685">)</span>&nbsp;<span class="op" id="7840687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7840691">m</span>&nbsp;<span class="op" id="7840693">:=</span>&nbsp;<span class="builtinfunc" id="7840696">make</span><span class="op" id="7840700">(</span><span class="keyword" id="7840701">map</span><span class="op" id="7840704">[</span><span class="builtintype" id="7840705">string</span><span class="op" id="7840711">]</span><span class="builtintype" id="7840712">bool</span><span class="op" id="7840716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7840720">if</span>&nbsp;<span class="op" id="7840723">!</span><span class="ident" id="7840724"><a href="/gostd/go/build/build_test.go.html#7840603">ctxt</a></span><span class="op" id="7840728">.</span><span class="ident" id="7840729"><a href="/gostd/go/build/build.go.html#5935370">match</a></span><span class="op" id="7840734">(</span><span class="ident" id="7840735"><a href="/gostd/go/build/build_test.go.html#7840653">tag</a></span><span class="op" id="7840738">,</span>&nbsp;<span class="ident" id="7840740"><a href="/gostd/go/build/build_test.go.html#7840691">m</a></span><span class="op" id="7840741">)</span>&nbsp;<span class="op" id="7840743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7840748"><a href="/gostd/go/build/build_test.go.html#7840586">t</a></span><span class="op" id="7840749">.</span><span class="ident" id="7840750"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7840756">(</span><span class="string" id="7840757">&#34;%s&nbsp;context&nbsp;should&nbsp;match&nbsp;%s,&nbsp;does&nbsp;not&#34;</span><span class="op" id="7840795">,</span>&nbsp;<span class="ident" id="7840797"><a href="/gostd/go/build/build_test.go.html#7840620">what</a></span><span class="op" id="7840801">,</span>&nbsp;<span class="ident" id="7840803"><a href="/gostd/go/build/build_test.go.html#7840653">tag</a></span><span class="op" id="7840806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7840810">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7840814">if</span>&nbsp;<span class="op" id="7840817">!</span><span class="ident" id="7840818"><a href="/gostd/go/build/build_test.go.html#7840525">reflect</a></span><span class="op" id="7840825">.</span><span class="ident" id="7840826"><a href="/gostd/reflect/deepequal.go.html#2775472">DeepEqual</a></span><span class="op" id="7840835">(</span><span class="ident" id="7840836"><a href="/gostd/go/build/build_test.go.html#7840691">m</a></span><span class="op" id="7840837">,</span>&nbsp;<span class="ident" id="7840839"><a href="/gostd/go/build/build_test.go.html#7840665">want</a></span><span class="op" id="7840843">)</span>&nbsp;<span class="op" id="7840845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7840850"><a href="/gostd/go/build/build_test.go.html#7840586">t</a></span><span class="op" id="7840851">.</span><span class="ident" id="7840852"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7840858">(</span><span class="string" id="7840859">&#34;%s&nbsp;tags&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7840882">,</span>&nbsp;<span class="ident" id="7840884"><a href="/gostd/go/build/build_test.go.html#7840653">tag</a></span><span class="op" id="7840887">,</span>&nbsp;<span class="ident" id="7840889"><a href="/gostd/go/build/build_test.go.html#7840691">m</a></span><span class="op" id="7840890">,</span>&nbsp;<span class="ident" id="7840892"><a href="/gostd/go/build/build_test.go.html#7840665">want</a></span><span class="op" id="7840896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7840900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7840903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7840906">nomatch</span>&nbsp;<span class="op" id="7840914">:=</span>&nbsp;<span class="keyword" id="7840917">func</span><span class="op" id="7840921">(</span><span class="ident" id="7840922">tag</span>&nbsp;<span class="builtintype" id="7840926">string</span><span class="op" id="7840932">,</span>&nbsp;<span class="ident" id="7840934">want</span>&nbsp;<span class="keyword" id="7840939">map</span><span class="op" id="7840942">[</span><span class="builtintype" id="7840943">string</span><span class="op" id="7840949">]</span><span class="builtintype" id="7840950">bool</span><span class="op" id="7840954">)</span>&nbsp;<span class="op" id="7840956">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7840960">m</span>&nbsp;<span class="op" id="7840962">:=</span>&nbsp;<span class="builtinfunc" id="7840965">make</span><span class="op" id="7840969">(</span><span class="keyword" id="7840970">map</span><span class="op" id="7840973">[</span><span class="builtintype" id="7840974">string</span><span class="op" id="7840980">]</span><span class="builtintype" id="7840981">bool</span><span class="op" id="7840985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7840989">if</span>&nbsp;<span class="ident" id="7840992"><a href="/gostd/go/build/build_test.go.html#7840603">ctxt</a></span><span class="op" id="7840996">.</span><span class="ident" id="7840997"><a href="/gostd/go/build/build.go.html#5935370">match</a></span><span class="op" id="7841002">(</span><span class="ident" id="7841003"><a href="/gostd/go/build/build_test.go.html#7840922">tag</a></span><span class="op" id="7841006">,</span>&nbsp;<span class="ident" id="7841008"><a href="/gostd/go/build/build_test.go.html#7840960">m</a></span><span class="op" id="7841009">)</span>&nbsp;<span class="op" id="7841011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7841016"><a href="/gostd/go/build/build_test.go.html#7840586">t</a></span><span class="op" id="7841017">.</span><span class="ident" id="7841018"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7841024">(</span><span class="string" id="7841025">&#34;%s&nbsp;context&nbsp;should&nbsp;NOT&nbsp;match&nbsp;%s,&nbsp;does&#34;</span><span class="op" id="7841063">,</span>&nbsp;<span class="ident" id="7841065"><a href="/gostd/go/build/build_test.go.html#7840620">what</a></span><span class="op" id="7841069">,</span>&nbsp;<span class="ident" id="7841071"><a href="/gostd/go/build/build_test.go.html#7840922">tag</a></span><span class="op" id="7841074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7841078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7841082">if</span>&nbsp;<span class="op" id="7841085">!</span><span class="ident" id="7841086"><a href="/gostd/go/build/build_test.go.html#7840525">reflect</a></span><span class="op" id="7841093">.</span><span class="ident" id="7841094"><a href="/gostd/reflect/deepequal.go.html#2775472">DeepEqual</a></span><span class="op" id="7841103">(</span><span class="ident" id="7841104"><a href="/gostd/go/build/build_test.go.html#7840960">m</a></span><span class="op" id="7841105">,</span>&nbsp;<span class="ident" id="7841107"><a href="/gostd/go/build/build_test.go.html#7840934">want</a></span><span class="op" id="7841111">)</span>&nbsp;<span class="op" id="7841113">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7841118"><a href="/gostd/go/build/build_test.go.html#7840586">t</a></span><span class="op" id="7841119">.</span><span class="ident" id="7841120"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7841126">(</span><span class="string" id="7841127">&#34;%s&nbsp;tags&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7841150">,</span>&nbsp;<span class="ident" id="7841152"><a href="/gostd/go/build/build_test.go.html#7840922">tag</a></span><span class="op" id="7841155">,</span>&nbsp;<span class="ident" id="7841157"><a href="/gostd/go/build/build_test.go.html#7840960">m</a></span><span class="op" id="7841158">,</span>&nbsp;<span class="ident" id="7841160"><a href="/gostd/go/build/build_test.go.html#7840934">want</a></span><span class="op" id="7841164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7841168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7841171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7841175"><a href="/gostd/go/build/build_test.go.html#7840639">match</a></span><span class="op" id="7841180">(</span><span class="ident" id="7841181"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841188">.</span><span class="ident" id="7841189"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="7841193">+</span><span class="string" id="7841194">&#34;,&#34;</span><span class="op" id="7841197">+</span><span class="ident" id="7841198"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841205">.</span><span class="ident" id="7841206"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="7841212">,</span>&nbsp;<span class="keyword" id="7841214">map</span><span class="op" id="7841217">[</span><span class="builtintype" id="7841218">string</span><span class="op" id="7841224">]</span><span class="builtintype" id="7841225">bool</span><span class="op" id="7841229">{</span><span class="ident" id="7841230"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841237">.</span><span class="ident" id="7841238"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="7841242">:</span>&nbsp;<span class="builtintype" id="7841244">true</span><span class="op" id="7841248">,</span>&nbsp;<span class="ident" id="7841250"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841257">.</span><span class="ident" id="7841258"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="7841264">:</span>&nbsp;<span class="builtintype" id="7841266">true</span><span class="op" id="7841270">}</span><span class="op" id="7841271">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7841274"><a href="/gostd/go/build/build_test.go.html#7840639">match</a></span><span class="op" id="7841279">(</span><span class="ident" id="7841280"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841287">.</span><span class="ident" id="7841288"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="7841292">+</span><span class="string" id="7841293">&#34;,&#34;</span><span class="op" id="7841296">+</span><span class="ident" id="7841297"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841304">.</span><span class="ident" id="7841305"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="7841311">+</span><span class="string" id="7841312">&#34;,!foo&#34;</span><span class="op" id="7841319">,</span>&nbsp;<span class="keyword" id="7841321">map</span><span class="op" id="7841324">[</span><span class="builtintype" id="7841325">string</span><span class="op" id="7841331">]</span><span class="builtintype" id="7841332">bool</span><span class="op" id="7841336">{</span><span class="ident" id="7841337"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841344">.</span><span class="ident" id="7841345"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="7841349">:</span>&nbsp;<span class="builtintype" id="7841351">true</span><span class="op" id="7841355">,</span>&nbsp;<span class="ident" id="7841357"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841364">.</span><span class="ident" id="7841365"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="7841371">:</span>&nbsp;<span class="builtintype" id="7841373">true</span><span class="op" id="7841377">,</span>&nbsp;<span class="string" id="7841379">&#34;foo&#34;</span><span class="op" id="7841384">:</span>&nbsp;<span class="builtintype" id="7841386">true</span><span class="op" id="7841390">}</span><span class="op" id="7841391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7841394"><a href="/gostd/go/build/build_test.go.html#7840906">nomatch</a></span><span class="op" id="7841401">(</span><span class="ident" id="7841402"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841409">.</span><span class="ident" id="7841410"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="7841414">+</span><span class="string" id="7841415">&#34;,&#34;</span><span class="op" id="7841418">+</span><span class="ident" id="7841419"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841426">.</span><span class="ident" id="7841427"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="7841433">+</span><span class="string" id="7841434">&#34;,foo&#34;</span><span class="op" id="7841440">,</span>&nbsp;<span class="keyword" id="7841442">map</span><span class="op" id="7841445">[</span><span class="builtintype" id="7841446">string</span><span class="op" id="7841452">]</span><span class="builtintype" id="7841453">bool</span><span class="op" id="7841457">{</span><span class="ident" id="7841458"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841465">.</span><span class="ident" id="7841466"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="7841470">:</span>&nbsp;<span class="builtintype" id="7841472">true</span><span class="op" id="7841476">,</span>&nbsp;<span class="ident" id="7841478"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841485">.</span><span class="ident" id="7841486"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="7841492">:</span>&nbsp;<span class="builtintype" id="7841494">true</span><span class="op" id="7841498">,</span>&nbsp;<span class="string" id="7841500">&#34;foo&#34;</span><span class="op" id="7841505">:</span>&nbsp;<span class="builtintype" id="7841507">true</span><span class="op" id="7841511">}</span><span class="op" id="7841512">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7841516"><a href="/gostd/go/build/build_test.go.html#7840620">what</a></span>&nbsp;<span class="op" id="7841521">=</span>&nbsp;<span class="string" id="7841523">&#34;modified&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7841535"><a href="/gostd/go/build/build_test.go.html#7840603">ctxt</a></span><span class="op" id="7841539">.</span><span class="ident" id="7841540"><a href="/gostd/go/build/build.go.html#5901522">BuildTags</a></span>&nbsp;<span class="op" id="7841550">=</span>&nbsp;<span class="op" id="7841552">[</span><span class="op" id="7841553">]</span><span class="builtintype" id="7841554">string</span><span class="op" id="7841560">{</span><span class="string" id="7841561">&#34;foo&#34;</span><span class="op" id="7841566">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7841569"><a href="/gostd/go/build/build_test.go.html#7840639">match</a></span><span class="op" id="7841574">(</span><span class="ident" id="7841575"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841582">.</span><span class="ident" id="7841583"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="7841587">+</span><span class="string" id="7841588">&#34;,&#34;</span><span class="op" id="7841591">+</span><span class="ident" id="7841592"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841599">.</span><span class="ident" id="7841600"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="7841606">,</span>&nbsp;<span class="keyword" id="7841608">map</span><span class="op" id="7841611">[</span><span class="builtintype" id="7841612">string</span><span class="op" id="7841618">]</span><span class="builtintype" id="7841619">bool</span><span class="op" id="7841623">{</span><span class="ident" id="7841624"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841631">.</span><span class="ident" id="7841632"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="7841636">:</span>&nbsp;<span class="builtintype" id="7841638">true</span><span class="op" id="7841642">,</span>&nbsp;<span class="ident" id="7841644"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841651">.</span><span class="ident" id="7841652"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="7841658">:</span>&nbsp;<span class="builtintype" id="7841660">true</span><span class="op" id="7841664">}</span><span class="op" id="7841665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7841668"><a href="/gostd/go/build/build_test.go.html#7840639">match</a></span><span class="op" id="7841673">(</span><span class="ident" id="7841674"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841681">.</span><span class="ident" id="7841682"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="7841686">+</span><span class="string" id="7841687">&#34;,&#34;</span><span class="op" id="7841690">+</span><span class="ident" id="7841691"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841698">.</span><span class="ident" id="7841699"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="7841705">+</span><span class="string" id="7841706">&#34;,foo&#34;</span><span class="op" id="7841712">,</span>&nbsp;<span class="keyword" id="7841714">map</span><span class="op" id="7841717">[</span><span class="builtintype" id="7841718">string</span><span class="op" id="7841724">]</span><span class="builtintype" id="7841725">bool</span><span class="op" id="7841729">{</span><span class="ident" id="7841730"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841737">.</span><span class="ident" id="7841738"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="7841742">:</span>&nbsp;<span class="builtintype" id="7841744">true</span><span class="op" id="7841748">,</span>&nbsp;<span class="ident" id="7841750"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841757">.</span><span class="ident" id="7841758"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="7841764">:</span>&nbsp;<span class="builtintype" id="7841766">true</span><span class="op" id="7841770">,</span>&nbsp;<span class="string" id="7841772">&#34;foo&#34;</span><span class="op" id="7841777">:</span>&nbsp;<span class="builtintype" id="7841779">true</span><span class="op" id="7841783">}</span><span class="op" id="7841784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7841787"><a href="/gostd/go/build/build_test.go.html#7840906">nomatch</a></span><span class="op" id="7841794">(</span><span class="ident" id="7841795"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841802">.</span><span class="ident" id="7841803"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="7841807">+</span><span class="string" id="7841808">&#34;,&#34;</span><span class="op" id="7841811">+</span><span class="ident" id="7841812"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841819">.</span><span class="ident" id="7841820"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="7841826">+</span><span class="string" id="7841827">&#34;,!foo&#34;</span><span class="op" id="7841834">,</span>&nbsp;<span class="keyword" id="7841836">map</span><span class="op" id="7841839">[</span><span class="builtintype" id="7841840">string</span><span class="op" id="7841846">]</span><span class="builtintype" id="7841847">bool</span><span class="op" id="7841851">{</span><span class="ident" id="7841852"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841859">.</span><span class="ident" id="7841860"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="7841864">:</span>&nbsp;<span class="builtintype" id="7841866">true</span><span class="op" id="7841870">,</span>&nbsp;<span class="ident" id="7841872"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841879">.</span><span class="ident" id="7841880"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="7841886">:</span>&nbsp;<span class="builtintype" id="7841888">true</span><span class="op" id="7841892">,</span>&nbsp;<span class="string" id="7841894">&#34;foo&#34;</span><span class="op" id="7841899">:</span>&nbsp;<span class="builtintype" id="7841901">true</span><span class="op" id="7841905">}</span><span class="op" id="7841906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7841909"><a href="/gostd/go/build/build_test.go.html#7840639">match</a></span><span class="op" id="7841914">(</span><span class="ident" id="7841915"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841922">.</span><span class="ident" id="7841923"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="7841927">+</span><span class="string" id="7841928">&#34;,&#34;</span><span class="op" id="7841931">+</span><span class="ident" id="7841932"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841939">.</span><span class="ident" id="7841940"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="7841946">+</span><span class="string" id="7841947">&#34;,!bar&#34;</span><span class="op" id="7841954">,</span>&nbsp;<span class="keyword" id="7841956">map</span><span class="op" id="7841959">[</span><span class="builtintype" id="7841960">string</span><span class="op" id="7841966">]</span><span class="builtintype" id="7841967">bool</span><span class="op" id="7841971">{</span><span class="ident" id="7841972"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841979">.</span><span class="ident" id="7841980"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="7841984">:</span>&nbsp;<span class="builtintype" id="7841986">true</span><span class="op" id="7841990">,</span>&nbsp;<span class="ident" id="7841992"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7841999">.</span><span class="ident" id="7842000"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="7842006">:</span>&nbsp;<span class="builtintype" id="7842008">true</span><span class="op" id="7842012">,</span>&nbsp;<span class="string" id="7842014">&#34;bar&#34;</span><span class="op" id="7842019">:</span>&nbsp;<span class="builtintype" id="7842021">true</span><span class="op" id="7842025">}</span><span class="op" id="7842026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7842029"><a href="/gostd/go/build/build_test.go.html#7840906">nomatch</a></span><span class="op" id="7842036">(</span><span class="ident" id="7842037"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7842044">.</span><span class="ident" id="7842045"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="7842049">+</span><span class="string" id="7842050">&#34;,&#34;</span><span class="op" id="7842053">+</span><span class="ident" id="7842054"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7842061">.</span><span class="ident" id="7842062"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="7842068">+</span><span class="string" id="7842069">&#34;,bar&#34;</span><span class="op" id="7842075">,</span>&nbsp;<span class="keyword" id="7842077">map</span><span class="op" id="7842080">[</span><span class="builtintype" id="7842081">string</span><span class="op" id="7842087">]</span><span class="builtintype" id="7842088">bool</span><span class="op" id="7842092">{</span><span class="ident" id="7842093"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7842100">.</span><span class="ident" id="7842101"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="7842105">:</span>&nbsp;<span class="builtintype" id="7842107">true</span><span class="op" id="7842111">,</span>&nbsp;<span class="ident" id="7842113"><a href="/gostd/go/build/build_test.go.html#7840536">runtime</a></span><span class="op" id="7842120">.</span><span class="ident" id="7842121"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="7842127">:</span>&nbsp;<span class="builtintype" id="7842129">true</span><span class="op" id="7842133">,</span>&nbsp;<span class="string" id="7842135">&#34;bar&#34;</span><span class="op" id="7842140">:</span>&nbsp;<span class="builtintype" id="7842142">true</span><span class="op" id="7842146">}</span><span class="op" id="7842147">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7842150"><a href="/gostd/go/build/build_test.go.html#7840906">nomatch</a></span><span class="op" id="7842157">(</span><span class="string" id="7842158">&#34;!&#34;</span><span class="op" id="7842161">,</span>&nbsp;<span class="keyword" id="7842163">map</span><span class="op" id="7842166">[</span><span class="builtintype" id="7842167">string</span><span class="op" id="7842173">]</span><span class="builtintype" id="7842174">bool</span><span class="op" id="7842178">{</span><span class="op" id="7842179">}</span><span class="op" id="7842180">)</span><br>
<span class="lineno"></span><span class="op" id="7842182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7842185">func</span>&nbsp;<span class="ident" id="7842190">TestDotSlashImport</span><span class="op" id="7842208">(</span><span class="ident" id="7842209">t</span>&nbsp;<span class="op" id="7842211">*</span><span class="ident" id="7842212"><a href="/gostd/go/build/build_test.go.html#7840558">testing</a></span><span class="op" id="7842219">.</span><span class="ident" id="7842220"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7842221">)</span>&nbsp;<span class="op" id="7842223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7842226">p</span><span class="op" id="7842227">,</span>&nbsp;<span class="ident" id="7842229">err</span>&nbsp;<span class="op" id="7842233">:=</span>&nbsp;<span class="ident" id="7842236"><a href="/gostd/go/build/build.go.html#5929114">ImportDir</a></span><span class="op" id="7842245">(</span><span class="string" id="7842246">&#34;testdata/other&#34;</span><span class="op" id="7842262">,</span>&nbsp;<span class="num" id="7842264">0</span><span class="op" id="7842265">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7842268">if</span>&nbsp;<span class="ident" id="7842271"><a href="/gostd/go/build/build_test.go.html#7842229">err</a></span>&nbsp;<span class="op" id="7842275">!=</span>&nbsp;<span class="builtintype" id="7842278">nil</span>&nbsp;<span class="op" id="7842282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7842286"><a href="/gostd/go/build/build_test.go.html#7842209">t</a></span><span class="op" id="7842287">.</span><span class="ident" id="7842288"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7842293">(</span><span class="ident" id="7842294"><a href="/gostd/go/build/build_test.go.html#7842229">err</a></span><span class="op" id="7842297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7842300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7842303">if</span>&nbsp;<span class="builtinfunc" id="7842306">len</span><span class="op" id="7842309">(</span><span class="ident" id="7842310"><a href="/gostd/go/build/build_test.go.html#7842226">p</a></span><span class="op" id="7842311">.</span><span class="ident" id="7842312"><a href="/gostd/go/build/build.go.html#5912601">Imports</a></span><span class="op" id="7842319">)</span>&nbsp;<span class="op" id="7842321">!=</span>&nbsp;<span class="num" id="7842324">1</span>&nbsp;<span class="op" id="7842326">||</span>&nbsp;<span class="ident" id="7842329"><a href="/gostd/go/build/build_test.go.html#7842226">p</a></span><span class="op" id="7842330">.</span><span class="ident" id="7842331"><a href="/gostd/go/build/build.go.html#5912601">Imports</a></span><span class="op" id="7842338">[</span><span class="num" id="7842339">0</span><span class="op" id="7842340">]</span>&nbsp;<span class="op" id="7842342">!=</span>&nbsp;<span class="string" id="7842345">&#34;./file&#34;</span>&nbsp;<span class="op" id="7842354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7842358"><a href="/gostd/go/build/build_test.go.html#7842209">t</a></span><span class="op" id="7842359">.</span><span class="ident" id="7842360"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7842366">(</span><span class="string" id="7842367">&#34;testdata/other:&nbsp;Imports=%v,&nbsp;want&nbsp;[./file]&#34;</span><span class="op" id="7842410">,</span>&nbsp;<span class="ident" id="7842412"><a href="/gostd/go/build/build_test.go.html#7842226">p</a></span><span class="op" id="7842413">.</span><span class="ident" id="7842414"><a href="/gostd/go/build/build.go.html#5912601">Imports</a></span><span class="op" id="7842421">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7842424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7842428">p1</span><span class="op" id="7842430">,</span>&nbsp;<span class="ident" id="7842432"><a href="/gostd/go/build/build_test.go.html#7842229">err</a></span>&nbsp;<span class="op" id="7842436">:=</span>&nbsp;<span class="ident" id="7842439"><a href="/gostd/go/build/build.go.html#5928949">Import</a></span><span class="op" id="7842445">(</span><span class="string" id="7842446">&#34;./file&#34;</span><span class="op" id="7842454">,</span>&nbsp;<span class="string" id="7842456">&#34;testdata/other&#34;</span><span class="op" id="7842472">,</span>&nbsp;<span class="num" id="7842474">0</span><span class="op" id="7842475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7842478">if</span>&nbsp;<span class="ident" id="7842481"><a href="/gostd/go/build/build_test.go.html#7842229">err</a></span>&nbsp;<span class="op" id="7842485">!=</span>&nbsp;<span class="builtintype" id="7842488">nil</span>&nbsp;<span class="op" id="7842492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7842496"><a href="/gostd/go/build/build_test.go.html#7842209">t</a></span><span class="op" id="7842497">.</span><span class="ident" id="7842498"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7842503">(</span><span class="ident" id="7842504"><a href="/gostd/go/build/build_test.go.html#7842229">err</a></span><span class="op" id="7842507">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7842510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7842513">if</span>&nbsp;<span class="ident" id="7842516"><a href="/gostd/go/build/build_test.go.html#7842428">p1</a></span><span class="op" id="7842518">.</span><span class="ident" id="7842519"><a href="/gostd/go/build/build.go.html#5910882">Name</a></span>&nbsp;<span class="op" id="7842524">!=</span>&nbsp;<span class="string" id="7842527">&#34;file&#34;</span>&nbsp;<span class="op" id="7842534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7842538"><a href="/gostd/go/build/build_test.go.html#7842209">t</a></span><span class="op" id="7842539">.</span><span class="ident" id="7842540"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7842546">(</span><span class="string" id="7842547">&#34;./file:&nbsp;Name=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7842573">,</span>&nbsp;<span class="ident" id="7842575"><a href="/gostd/go/build/build_test.go.html#7842428">p1</a></span><span class="op" id="7842577">.</span><span class="ident" id="7842578"><a href="/gostd/go/build/build.go.html#5910882">Name</a></span><span class="op" id="7842582">,</span>&nbsp;<span class="string" id="7842584">&#34;file&#34;</span><span class="op" id="7842590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7842593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7842596">dir</span>&nbsp;<span class="op" id="7842600">:=</span>&nbsp;<span class="ident" id="7842603"><a href="/gostd/go/build/build_test.go.html#7840508">filepath</a></span><span class="op" id="7842611">.</span><span class="ident" id="7842612"><a href="/gostd/path/filepath/path.go.html#3780312">Clean</a></span><span class="op" id="7842617">(</span><span class="string" id="7842618">&#34;testdata/other/file&#34;</span><span class="op" id="7842639">)</span>&nbsp;<span class="comment" id="7842641">//&nbsp;Clean&nbsp;to&nbsp;use&nbsp;\&nbsp;on&nbsp;Windows</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7842671">if</span>&nbsp;<span class="ident" id="7842674"><a href="/gostd/go/build/build_test.go.html#7842428">p1</a></span><span class="op" id="7842676">.</span><span class="ident" id="7842677"><a href="/gostd/go/build/build.go.html#5910818">Dir</a></span>&nbsp;<span class="op" id="7842681">!=</span>&nbsp;<span class="ident" id="7842684"><a href="/gostd/go/build/build_test.go.html#7842596">dir</a></span>&nbsp;<span class="op" id="7842688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7842692"><a href="/gostd/go/build/build_test.go.html#7842209">t</a></span><span class="op" id="7842693">.</span><span class="ident" id="7842694"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7842700">(</span><span class="string" id="7842701">&#34;./file:&nbsp;Dir=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7842726">,</span>&nbsp;<span class="ident" id="7842728"><a href="/gostd/go/build/build_test.go.html#7842428">p1</a></span><span class="op" id="7842730">.</span><span class="ident" id="7842731"><a href="/gostd/go/build/build.go.html#5910882">Name</a></span><span class="op" id="7842735">,</span>&nbsp;<span class="ident" id="7842737"><a href="/gostd/go/build/build_test.go.html#7842596">dir</a></span><span class="op" id="7842740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7842743">}</span><br>
<span class="lineno"></span><span class="op" id="7842745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="7842748">func</span>&nbsp;<span class="ident" id="7842753">TestEmptyImport</span><span class="op" id="7842768">(</span><span class="ident" id="7842769">t</span>&nbsp;<span class="op" id="7842771">*</span><span class="ident" id="7842772"><a href="/gostd/go/build/build_test.go.html#7840558">testing</a></span><span class="op" id="7842779">.</span><span class="ident" id="7842780"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7842781">)</span>&nbsp;<span class="op" id="7842783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7842786">p</span><span class="op" id="7842787">,</span>&nbsp;<span class="ident" id="7842789">err</span>&nbsp;<span class="op" id="7842793">:=</span>&nbsp;<span class="ident" id="7842796"><a href="/gostd/go/build/build.go.html#5928949">Import</a></span><span class="op" id="7842802">(</span><span class="string" id="7842803">&#34;&#34;</span><span class="op" id="7842805">,</span>&nbsp;<span class="ident" id="7842807"><a href="/gostd/go/build/build.go.html#5908209">Default</a></span><span class="op" id="7842814">.</span><span class="ident" id="7842815"><a href="/gostd/go/build/build.go.html#5900785">GOROOT</a></span><span class="op" id="7842821">,</span>&nbsp;<span class="ident" id="7842823"><a href="/gostd/go/build/build.go.html#5910290">FindOnly</a></span><span class="op" id="7842831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7842834">if</span>&nbsp;<span class="ident" id="7842837"><a href="/gostd/go/build/build_test.go.html#7842789">err</a></span>&nbsp;<span class="op" id="7842841">==</span>&nbsp;<span class="builtintype" id="7842844">nil</span>&nbsp;<span class="op" id="7842848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7842852"><a href="/gostd/go/build/build_test.go.html#7842769">t</a></span><span class="op" id="7842853">.</span><span class="ident" id="7842854"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7842859">(</span><span class="string" id="7842860">`Import(&#34;&#34;)&nbsp;returned&nbsp;nil&nbsp;error.`</span><span class="op" id="7842892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7842895">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7842898">if</span>&nbsp;<span class="ident" id="7842901"><a href="/gostd/go/build/build_test.go.html#7842786">p</a></span>&nbsp;<span class="op" id="7842903">==</span>&nbsp;<span class="builtintype" id="7842906">nil</span>&nbsp;<span class="op" id="7842910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7842914"><a href="/gostd/go/build/build_test.go.html#7842769">t</a></span><span class="op" id="7842915">.</span><span class="ident" id="7842916"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7842921">(</span><span class="string" id="7842922">`Import(&#34;&#34;)&nbsp;returned&nbsp;nil&nbsp;package.`</span><span class="op" id="7842956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7842959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7842962">if</span>&nbsp;<span class="ident" id="7842965"><a href="/gostd/go/build/build_test.go.html#7842786">p</a></span><span class="op" id="7842966">.</span><span class="ident" id="7842967"><a href="/gostd/go/build/build.go.html#5911043">ImportPath</a></span>&nbsp;<span class="op" id="7842978">!=</span>&nbsp;<span class="string" id="7842981">&#34;&#34;</span>&nbsp;<span class="op" id="7842984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7842988"><a href="/gostd/go/build/build_test.go.html#7842769">t</a></span><span class="op" id="7842989">.</span><span class="ident" id="7842990"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7842996">(</span><span class="string" id="7842997">&#34;ImportPath=%q,&nbsp;want&nbsp;%q.&#34;</span><span class="op" id="7843022">,</span>&nbsp;<span class="ident" id="7843024"><a href="/gostd/go/build/build_test.go.html#7842786">p</a></span><span class="op" id="7843025">.</span><span class="ident" id="7843026"><a href="/gostd/go/build/build.go.html#5911043">ImportPath</a></span><span class="op" id="7843036">,</span>&nbsp;<span class="string" id="7843038">&#34;&#34;</span><span class="op" id="7843040">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7843043">}</span><br>
<span class="lineno"></span><span class="op" id="7843045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7843048">func</span>&nbsp;<span class="ident" id="7843053">TestEmptyFolderImport</span><span class="op" id="7843074">(</span><span class="ident" id="7843075">t</span>&nbsp;<span class="op" id="7843077">*</span><span class="ident" id="7843078"><a href="/gostd/go/build/build_test.go.html#7840558">testing</a></span><span class="op" id="7843085">.</span><span class="ident" id="7843086"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7843087">)</span>&nbsp;<span class="op" id="7843089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7843092">_</span><span class="op" id="7843093">,</span>&nbsp;<span class="ident" id="7843095">err</span>&nbsp;<span class="op" id="7843099">:=</span>&nbsp;<span class="ident" id="7843102"><a href="/gostd/go/build/build.go.html#5928949">Import</a></span><span class="op" id="7843108">(</span><span class="string" id="7843109">&#34;.&#34;</span><span class="op" id="7843112">,</span>&nbsp;<span class="string" id="7843114">&#34;testdata/empty&#34;</span><span class="op" id="7843130">,</span>&nbsp;<span class="num" id="7843132">0</span><span class="op" id="7843133">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7843136">if</span>&nbsp;<span class="ident" id="7843139">_</span><span class="op" id="7843140">,</span>&nbsp;<span class="ident" id="7843142">ok</span>&nbsp;<span class="op" id="7843145">:=</span>&nbsp;<span class="ident" id="7843148"><a href="/gostd/go/build/build_test.go.html#7843095">err</a></span><span class="op" id="7843151">.</span><span class="op" id="7843152">(</span><span class="op" id="7843153">*</span><span class="ident" id="7843154"><a href="/gostd/go/build/build.go.html#5913847">NoGoError</a></span><span class="op" id="7843163">)</span><span class="op" id="7843164">;</span>&nbsp;<span class="op" id="7843166">!</span><span class="ident" id="7843167"><a href="/gostd/go/build/build_test.go.html#7843142">ok</a></span>&nbsp;<span class="op" id="7843170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7843174"><a href="/gostd/go/build/build_test.go.html#7843075">t</a></span><span class="op" id="7843175">.</span><span class="ident" id="7843176"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7843181">(</span><span class="string" id="7843182">`Import(&#34;testdata/empty&#34;)&nbsp;did&nbsp;not&nbsp;return&nbsp;NoGoError.`</span><span class="op" id="7843234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7843237">}</span><br>
<span class="lineno"></span><span class="op" id="7843239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="7843242">func</span>&nbsp;<span class="ident" id="7843247">TestMultiplePackageImport</span><span class="op" id="7843272">(</span><span class="ident" id="7843273">t</span>&nbsp;<span class="op" id="7843275">*</span><span class="ident" id="7843276"><a href="/gostd/go/build/build_test.go.html#7840558">testing</a></span><span class="op" id="7843283">.</span><span class="ident" id="7843284"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7843285">)</span>&nbsp;<span class="op" id="7843287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7843290">_</span><span class="op" id="7843291">,</span>&nbsp;<span class="ident" id="7843293">err</span>&nbsp;<span class="op" id="7843297">:=</span>&nbsp;<span class="ident" id="7843300"><a href="/gostd/go/build/build.go.html#5928949">Import</a></span><span class="op" id="7843306">(</span><span class="string" id="7843307">&#34;.&#34;</span><span class="op" id="7843310">,</span>&nbsp;<span class="string" id="7843312">&#34;testdata/multi&#34;</span><span class="op" id="7843328">,</span>&nbsp;<span class="num" id="7843330">0</span><span class="op" id="7843331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7843334">if</span>&nbsp;<span class="ident" id="7843337">_</span><span class="op" id="7843338">,</span>&nbsp;<span class="ident" id="7843340">ok</span>&nbsp;<span class="op" id="7843343">:=</span>&nbsp;<span class="ident" id="7843346"><a href="/gostd/go/build/build_test.go.html#7843293">err</a></span><span class="op" id="7843349">.</span><span class="op" id="7843350">(</span><span class="op" id="7843351">*</span><span class="ident" id="7843352"><a href="/gostd/go/build/build.go.html#5914095">MultiplePackageError</a></span><span class="op" id="7843372">)</span><span class="op" id="7843373">;</span>&nbsp;<span class="op" id="7843375">!</span><span class="ident" id="7843376"><a href="/gostd/go/build/build_test.go.html#7843340">ok</a></span>&nbsp;<span class="op" id="7843379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7843383"><a href="/gostd/go/build/build_test.go.html#7843273">t</a></span><span class="op" id="7843384">.</span><span class="ident" id="7843385"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7843390">(</span><span class="string" id="7843391">`Import(&#34;testdata/multi&#34;)&nbsp;did&nbsp;not&nbsp;return&nbsp;MultiplePackageError.`</span><span class="op" id="7843454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7843457">}</span><br>
<span class="lineno">100</span><span class="op" id="7843459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7843462">func</span>&nbsp;<span class="ident" id="7843467">TestLocalDirectory</span><span class="op" id="7843485">(</span><span class="ident" id="7843486">t</span>&nbsp;<span class="op" id="7843488">*</span><span class="ident" id="7843489"><a href="/gostd/go/build/build_test.go.html#7840558">testing</a></span><span class="op" id="7843496">.</span><span class="ident" id="7843497"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7843498">)</span>&nbsp;<span class="op" id="7843500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7843503">cwd</span><span class="op" id="7843506">,</span>&nbsp;<span class="ident" id="7843508">err</span>&nbsp;<span class="op" id="7843512">:=</span>&nbsp;<span class="ident" id="7843515"><a href="/gostd/go/build/build_test.go.html#7840502">os</a></span><span class="op" id="7843517">.</span><span class="ident" id="7843518"><a href="/gostd/os/getwd.go.html#2462017">Getwd</a></span><span class="op" id="7843523">(</span><span class="op" id="7843524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7843527">if</span>&nbsp;<span class="ident" id="7843530"><a href="/gostd/go/build/build_test.go.html#7843508">err</a></span>&nbsp;<span class="op" id="7843534">!=</span>&nbsp;<span class="builtintype" id="7843537">nil</span>&nbsp;<span class="op" id="7843541">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7843545"><a href="/gostd/go/build/build_test.go.html#7843486">t</a></span><span class="op" id="7843546">.</span><span class="ident" id="7843547"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7843552">(</span><span class="ident" id="7843553"><a href="/gostd/go/build/build_test.go.html#7843508">err</a></span><span class="op" id="7843556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7843559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7843563">p</span><span class="op" id="7843564">,</span>&nbsp;<span class="ident" id="7843566"><a href="/gostd/go/build/build_test.go.html#7843508">err</a></span>&nbsp;<span class="op" id="7843570">:=</span>&nbsp;<span class="ident" id="7843573"><a href="/gostd/go/build/build.go.html#5929114">ImportDir</a></span><span class="op" id="7843582">(</span><span class="ident" id="7843583"><a href="/gostd/go/build/build_test.go.html#7843503">cwd</a></span><span class="op" id="7843586">,</span>&nbsp;<span class="num" id="7843588">0</span><span class="op" id="7843589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7843592">if</span>&nbsp;<span class="ident" id="7843595"><a href="/gostd/go/build/build_test.go.html#7843508">err</a></span>&nbsp;<span class="op" id="7843599">!=</span>&nbsp;<span class="builtintype" id="7843602">nil</span>&nbsp;<span class="op" id="7843606">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7843610"><a href="/gostd/go/build/build_test.go.html#7843486">t</a></span><span class="op" id="7843611">.</span><span class="ident" id="7843612"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7843617">(</span><span class="ident" id="7843618"><a href="/gostd/go/build/build_test.go.html#7843508">err</a></span><span class="op" id="7843621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7843624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7843627">if</span>&nbsp;<span class="ident" id="7843630"><a href="/gostd/go/build/build_test.go.html#7843563">p</a></span><span class="op" id="7843631">.</span><span class="ident" id="7843632"><a href="/gostd/go/build/build.go.html#5911043">ImportPath</a></span>&nbsp;<span class="op" id="7843643">!=</span>&nbsp;<span class="string" id="7843646">&#34;go/build&#34;</span>&nbsp;<span class="op" id="7843657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7843661"><a href="/gostd/go/build/build_test.go.html#7843486">t</a></span><span class="op" id="7843662">.</span><span class="ident" id="7843663"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7843669">(</span><span class="string" id="7843670">&#34;ImportPath=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7843694">,</span>&nbsp;<span class="ident" id="7843696"><a href="/gostd/go/build/build_test.go.html#7843563">p</a></span><span class="op" id="7843697">.</span><span class="ident" id="7843698"><a href="/gostd/go/build/build.go.html#5911043">ImportPath</a></span><span class="op" id="7843708">,</span>&nbsp;<span class="string" id="7843710">&#34;go/build&#34;</span><span class="op" id="7843720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7843723">}</span><br>
<span class="lineno">115</span><span class="op" id="7843725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7843728">func</span>&nbsp;<span class="ident" id="7843733">TestShouldBuild</span><span class="op" id="7843748">(</span><span class="ident" id="7843749">t</span>&nbsp;<span class="op" id="7843751">*</span><span class="ident" id="7843752"><a href="/gostd/go/build/build_test.go.html#7840558">testing</a></span><span class="op" id="7843759">.</span><span class="ident" id="7843760"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7843761">)</span>&nbsp;<span class="op" id="7843763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7843766">const</span>&nbsp;<span class="ident" id="7843772">file1</span>&nbsp;<span class="op" id="7843778">=</span>&nbsp;<span class="string" id="7843780">&#34;//&nbsp;+build&nbsp;tag1\n\n&#34;</span>&nbsp;<span class="op" id="7843801">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7843805">&#34;package&nbsp;main\n&#34;</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7843823">want1</span>&nbsp;<span class="op" id="7843829">:=</span>&nbsp;<span class="keyword" id="7843832">map</span><span class="op" id="7843835">[</span><span class="builtintype" id="7843836">string</span><span class="op" id="7843842">]</span><span class="builtintype" id="7843843">bool</span><span class="op" id="7843847">{</span><span class="string" id="7843848">&#34;tag1&#34;</span><span class="op" id="7843854">:</span>&nbsp;<span class="builtintype" id="7843856">true</span><span class="op" id="7843860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7843864">const</span>&nbsp;<span class="ident" id="7843870">file2</span>&nbsp;<span class="op" id="7843876">=</span>&nbsp;<span class="string" id="7843878">&#34;//&nbsp;+build&nbsp;cgo\n\n&#34;</span>&nbsp;<span class="op" id="7843898">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7843902">&#34;//&nbsp;This&nbsp;package&nbsp;implements&nbsp;parsing&nbsp;of&nbsp;tags&nbsp;like\n&#34;</span>&nbsp;<span class="op" id="7843954">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7843958">&#34;//&nbsp;+build&nbsp;tag1\n&#34;</span>&nbsp;<span class="op" id="7843977">+</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7843981">&#34;package&nbsp;build&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7843998">want2</span>&nbsp;<span class="op" id="7844004">:=</span>&nbsp;<span class="keyword" id="7844007">map</span><span class="op" id="7844010">[</span><span class="builtintype" id="7844011">string</span><span class="op" id="7844017">]</span><span class="builtintype" id="7844018">bool</span><span class="op" id="7844022">{</span><span class="string" id="7844023">&#34;cgo&#34;</span><span class="op" id="7844028">:</span>&nbsp;<span class="builtintype" id="7844030">true</span><span class="op" id="7844034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7844038">const</span>&nbsp;<span class="ident" id="7844044">file3</span>&nbsp;<span class="op" id="7844050">=</span>&nbsp;<span class="string" id="7844052">&#34;//&nbsp;Copyright&nbsp;The&nbsp;Go&nbsp;Authors.\n\n&#34;</span>&nbsp;<span class="op" id="7844087">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7844091">&#34;package&nbsp;build\n\n&#34;</span>&nbsp;<span class="op" id="7844111">+</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7844115">&#34;//&nbsp;shouldBuild&nbsp;checks&nbsp;tags&nbsp;given&nbsp;by&nbsp;lines&nbsp;of&nbsp;the&nbsp;form\n&#34;</span>&nbsp;<span class="op" id="7844173">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7844177">&#34;//&nbsp;+build&nbsp;tag\n&#34;</span>&nbsp;<span class="op" id="7844195">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7844199">&#34;func&nbsp;shouldBuild(content&nbsp;[]byte)\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7844237">want3</span>&nbsp;<span class="op" id="7844243">:=</span>&nbsp;<span class="keyword" id="7844246">map</span><span class="op" id="7844249">[</span><span class="builtintype" id="7844250">string</span><span class="op" id="7844256">]</span><span class="builtintype" id="7844257">bool</span><span class="op" id="7844261">{</span><span class="op" id="7844262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7844266">ctx</span>&nbsp;<span class="op" id="7844270">:=</span>&nbsp;<span class="op" id="7844273">&amp;</span><span class="ident" id="7844274"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="7844281">{</span><span class="ident" id="7844282"><a href="/gostd/go/build/build.go.html#5901522">BuildTags</a></span><span class="op" id="7844291">:</span>&nbsp;<span class="op" id="7844293">[</span><span class="op" id="7844294">]</span><span class="builtintype" id="7844295">string</span><span class="op" id="7844301">{</span><span class="string" id="7844302">&#34;tag1&#34;</span><span class="op" id="7844308">}</span><span class="op" id="7844309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7844312">m</span>&nbsp;<span class="op" id="7844314">:=</span>&nbsp;<span class="keyword" id="7844317">map</span><span class="op" id="7844320">[</span><span class="builtintype" id="7844321">string</span><span class="op" id="7844327">]</span><span class="builtintype" id="7844328">bool</span><span class="op" id="7844332">{</span><span class="op" id="7844333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7844336">if</span>&nbsp;<span class="op" id="7844339">!</span><span class="ident" id="7844340"><a href="/gostd/go/build/build_test.go.html#7844266">ctx</a></span><span class="op" id="7844343">.</span><span class="ident" id="7844344"><a href="/gostd/go/build/build.go.html#5929766">shouldBuild</a></span><span class="op" id="7844355">(</span><span class="op" id="7844356">[</span><span class="op" id="7844357">]</span><span class="builtintype" id="7844358">byte</span><span class="op" id="7844362">(</span><span class="ident" id="7844363"><a href="/gostd/go/build/build_test.go.html#7843772">file1</a></span><span class="op" id="7844368">)</span><span class="op" id="7844369">,</span>&nbsp;<span class="ident" id="7844371"><a href="/gostd/go/build/build_test.go.html#7844312">m</a></span><span class="op" id="7844372">)</span>&nbsp;<span class="op" id="7844374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7844378"><a href="/gostd/go/build/build_test.go.html#7843749">t</a></span><span class="op" id="7844379">.</span><span class="ident" id="7844380"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7844386">(</span><span class="string" id="7844387">&#34;shouldBuild(file1)&nbsp;=&nbsp;false,&nbsp;want&nbsp;true&#34;</span><span class="op" id="7844426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7844429">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7844432">if</span>&nbsp;<span class="op" id="7844435">!</span><span class="ident" id="7844436"><a href="/gostd/go/build/build_test.go.html#7840525">reflect</a></span><span class="op" id="7844443">.</span><span class="ident" id="7844444"><a href="/gostd/reflect/deepequal.go.html#2775472">DeepEqual</a></span><span class="op" id="7844453">(</span><span class="ident" id="7844454"><a href="/gostd/go/build/build_test.go.html#7844312">m</a></span><span class="op" id="7844455">,</span>&nbsp;<span class="ident" id="7844457"><a href="/gostd/go/build/build_test.go.html#7843823">want1</a></span><span class="op" id="7844462">)</span>&nbsp;<span class="op" id="7844464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7844468"><a href="/gostd/go/build/build_test.go.html#7843749">t</a></span><span class="op" id="7844469">.</span><span class="ident" id="7844470"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7844476">(</span><span class="string" id="7844477">&#34;shoudBuild(file1)&nbsp;tags&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7844515">,</span>&nbsp;<span class="ident" id="7844517"><a href="/gostd/go/build/build_test.go.html#7844312">m</a></span><span class="op" id="7844518">,</span>&nbsp;<span class="ident" id="7844520"><a href="/gostd/go/build/build_test.go.html#7843823">want1</a></span><span class="op" id="7844525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7844528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7844532"><a href="/gostd/go/build/build_test.go.html#7844312">m</a></span>&nbsp;<span class="op" id="7844534">=</span>&nbsp;<span class="keyword" id="7844536">map</span><span class="op" id="7844539">[</span><span class="builtintype" id="7844540">string</span><span class="op" id="7844546">]</span><span class="builtintype" id="7844547">bool</span><span class="op" id="7844551">{</span><span class="op" id="7844552">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7844555">if</span>&nbsp;<span class="ident" id="7844558"><a href="/gostd/go/build/build_test.go.html#7844266">ctx</a></span><span class="op" id="7844561">.</span><span class="ident" id="7844562"><a href="/gostd/go/build/build.go.html#5929766">shouldBuild</a></span><span class="op" id="7844573">(</span><span class="op" id="7844574">[</span><span class="op" id="7844575">]</span><span class="builtintype" id="7844576">byte</span><span class="op" id="7844580">(</span><span class="ident" id="7844581"><a href="/gostd/go/build/build_test.go.html#7843870">file2</a></span><span class="op" id="7844586">)</span><span class="op" id="7844587">,</span>&nbsp;<span class="ident" id="7844589"><a href="/gostd/go/build/build_test.go.html#7844312">m</a></span><span class="op" id="7844590">)</span>&nbsp;<span class="op" id="7844592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7844596"><a href="/gostd/go/build/build_test.go.html#7843749">t</a></span><span class="op" id="7844597">.</span><span class="ident" id="7844598"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7844604">(</span><span class="string" id="7844605">&#34;shouldBuild(file2)&nbsp;=&nbsp;true,&nbsp;want&nbsp;fakse&#34;</span><span class="op" id="7844644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7844647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7844650">if</span>&nbsp;<span class="op" id="7844653">!</span><span class="ident" id="7844654"><a href="/gostd/go/build/build_test.go.html#7840525">reflect</a></span><span class="op" id="7844661">.</span><span class="ident" id="7844662"><a href="/gostd/reflect/deepequal.go.html#2775472">DeepEqual</a></span><span class="op" id="7844671">(</span><span class="ident" id="7844672"><a href="/gostd/go/build/build_test.go.html#7844312">m</a></span><span class="op" id="7844673">,</span>&nbsp;<span class="ident" id="7844675"><a href="/gostd/go/build/build_test.go.html#7843998">want2</a></span><span class="op" id="7844680">)</span>&nbsp;<span class="op" id="7844682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7844686"><a href="/gostd/go/build/build_test.go.html#7843749">t</a></span><span class="op" id="7844687">.</span><span class="ident" id="7844688"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7844694">(</span><span class="string" id="7844695">&#34;shoudBuild(file2)&nbsp;tags&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7844733">,</span>&nbsp;<span class="ident" id="7844735"><a href="/gostd/go/build/build_test.go.html#7844312">m</a></span><span class="op" id="7844736">,</span>&nbsp;<span class="ident" id="7844738"><a href="/gostd/go/build/build_test.go.html#7843998">want2</a></span><span class="op" id="7844743">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7844746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7844750"><a href="/gostd/go/build/build_test.go.html#7844312">m</a></span>&nbsp;<span class="op" id="7844752">=</span>&nbsp;<span class="keyword" id="7844754">map</span><span class="op" id="7844757">[</span><span class="builtintype" id="7844758">string</span><span class="op" id="7844764">]</span><span class="builtintype" id="7844765">bool</span><span class="op" id="7844769">{</span><span class="op" id="7844770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7844773"><a href="/gostd/go/build/build_test.go.html#7844266">ctx</a></span>&nbsp;<span class="op" id="7844777">=</span>&nbsp;<span class="op" id="7844779">&amp;</span><span class="ident" id="7844780"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="7844787">{</span><span class="ident" id="7844788"><a href="/gostd/go/build/build.go.html#5901522">BuildTags</a></span><span class="op" id="7844797">:</span>&nbsp;<span class="builtintype" id="7844799">nil</span><span class="op" id="7844802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7844805">if</span>&nbsp;<span class="op" id="7844808">!</span><span class="ident" id="7844809"><a href="/gostd/go/build/build_test.go.html#7844266">ctx</a></span><span class="op" id="7844812">.</span><span class="ident" id="7844813"><a href="/gostd/go/build/build.go.html#5929766">shouldBuild</a></span><span class="op" id="7844824">(</span><span class="op" id="7844825">[</span><span class="op" id="7844826">]</span><span class="builtintype" id="7844827">byte</span><span class="op" id="7844831">(</span><span class="ident" id="7844832"><a href="/gostd/go/build/build_test.go.html#7844044">file3</a></span><span class="op" id="7844837">)</span><span class="op" id="7844838">,</span>&nbsp;<span class="ident" id="7844840"><a href="/gostd/go/build/build_test.go.html#7844312">m</a></span><span class="op" id="7844841">)</span>&nbsp;<span class="op" id="7844843">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7844847"><a href="/gostd/go/build/build_test.go.html#7843749">t</a></span><span class="op" id="7844848">.</span><span class="ident" id="7844849"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7844855">(</span><span class="string" id="7844856">&#34;shouldBuild(file3)&nbsp;=&nbsp;false,&nbsp;want&nbsp;true&#34;</span><span class="op" id="7844895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7844898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7844901">if</span>&nbsp;<span class="op" id="7844904">!</span><span class="ident" id="7844905"><a href="/gostd/go/build/build_test.go.html#7840525">reflect</a></span><span class="op" id="7844912">.</span><span class="ident" id="7844913"><a href="/gostd/reflect/deepequal.go.html#2775472">DeepEqual</a></span><span class="op" id="7844922">(</span><span class="ident" id="7844923"><a href="/gostd/go/build/build_test.go.html#7844312">m</a></span><span class="op" id="7844924">,</span>&nbsp;<span class="ident" id="7844926"><a href="/gostd/go/build/build_test.go.html#7844237">want3</a></span><span class="op" id="7844931">)</span>&nbsp;<span class="op" id="7844933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7844937"><a href="/gostd/go/build/build_test.go.html#7843749">t</a></span><span class="op" id="7844938">.</span><span class="ident" id="7844939"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7844945">(</span><span class="string" id="7844946">&#34;shoudBuild(file3)&nbsp;tags&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7844984">,</span>&nbsp;<span class="ident" id="7844986"><a href="/gostd/go/build/build_test.go.html#7844312">m</a></span><span class="op" id="7844987">,</span>&nbsp;<span class="ident" id="7844989"><a href="/gostd/go/build/build_test.go.html#7844237">want3</a></span><span class="op" id="7844994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7844997">}</span><br>
<span class="lineno">160</span><span class="op" id="7844999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7845002">type</span>&nbsp;<span class="ident" id="7845007">readNopCloser</span>&nbsp;<span class="keyword" id="7845021">struct</span>&nbsp;<span class="op" id="7845028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7845031"><a href="/gostd/go/build/build_test.go.html#7840496">io</a></span><span class="op" id="7845033">.</span><span class="ident" id="7845034"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><br>
<span class="lineno"></span><span class="op" id="7845041">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="7845044">func</span>&nbsp;<span class="op" id="7845049">(</span><span class="ident" id="7845050">r</span>&nbsp;<span class="ident" id="7845052"><a href="/gostd/go/build/build_test.go.html#7845007">readNopCloser</a></span><span class="op" id="7845065">)</span>&nbsp;<span class="ident" id="7845067">Close</span><span class="op" id="7845072">(</span><span class="op" id="7845073">)</span>&nbsp;<span class="builtintype" id="7845075">error</span>&nbsp;<span class="op" id="7845081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7845084">return</span>&nbsp;<span class="builtintype" id="7845091">nil</span><br>
<span class="lineno"></span><span class="op" id="7845095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="7845098">var</span>&nbsp;<span class="op" id="7845102">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7845105">ctxtP9</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7845117">=</span>&nbsp;<span class="ident" id="7845119"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="7845126">{</span><span class="ident" id="7845127"><a href="/gostd/go/build/build.go.html#5900695">GOARCH</a></span><span class="op" id="7845133">:</span>&nbsp;<span class="string" id="7845135">&#34;arm&#34;</span><span class="op" id="7845140">,</span>&nbsp;<span class="ident" id="7845142"><a href="/gostd/go/build/build.go.html#5900738">GOOS</a></span><span class="op" id="7845146">:</span>&nbsp;<span class="string" id="7845148">&#34;plan9&#34;</span><span class="op" id="7845155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7845158">ctxtAndroid</span>&nbsp;<span class="op" id="7845170">=</span>&nbsp;<span class="ident" id="7845172"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="7845179">{</span><span class="ident" id="7845180"><a href="/gostd/go/build/build.go.html#5900695">GOARCH</a></span><span class="op" id="7845186">:</span>&nbsp;<span class="string" id="7845188">&#34;arm&#34;</span><span class="op" id="7845193">,</span>&nbsp;<span class="ident" id="7845195"><a href="/gostd/go/build/build.go.html#5900738">GOOS</a></span><span class="op" id="7845199">:</span>&nbsp;<span class="string" id="7845201">&#34;android&#34;</span><span class="op" id="7845210">}</span><br>
<span class="lineno"></span><span class="op" id="7845212">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="7845215">var</span>&nbsp;<span class="ident" id="7845219">matchFileTests</span>&nbsp;<span class="op" id="7845234">=</span>&nbsp;<span class="op" id="7845236">[</span><span class="op" id="7845237">]</span><span class="keyword" id="7845238">struct</span>&nbsp;<span class="op" id="7845245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7845248">ctxt</span>&nbsp;&nbsp;<span class="ident" id="7845254"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7845263">name</span>&nbsp;&nbsp;<span class="builtintype" id="7845269">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7845277">data</span>&nbsp;&nbsp;<span class="builtintype" id="7845283">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7845291">match</span>&nbsp;<span class="builtintype" id="7845297">bool</span><br>
<span class="lineno">180</span><span class="op" id="7845302">}</span><span class="op" id="7845303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7845306">{</span><span class="ident" id="7845307"><a href="/gostd/go/build/build_test.go.html#7845105">ctxtP9</a></span><span class="op" id="7845313">,</span>&nbsp;<span class="string" id="7845315">&#34;foo_arm.go&#34;</span><span class="op" id="7845327">,</span>&nbsp;<span class="string" id="7845329">&#34;&#34;</span><span class="op" id="7845331">,</span>&nbsp;<span class="builtintype" id="7845333">true</span><span class="op" id="7845337">}</span><span class="op" id="7845338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7845341">{</span><span class="ident" id="7845342"><a href="/gostd/go/build/build_test.go.html#7845105">ctxtP9</a></span><span class="op" id="7845348">,</span>&nbsp;<span class="string" id="7845350">&#34;foo1_arm.go&#34;</span><span class="op" id="7845363">,</span>&nbsp;<span class="string" id="7845365">&#34;//&nbsp;+build&nbsp;linux\n\npackage&nbsp;main\n&#34;</span><span class="op" id="7845400">,</span>&nbsp;<span class="builtintype" id="7845402">false</span><span class="op" id="7845407">}</span><span class="op" id="7845408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7845411">{</span><span class="ident" id="7845412"><a href="/gostd/go/build/build_test.go.html#7845105">ctxtP9</a></span><span class="op" id="7845418">,</span>&nbsp;<span class="string" id="7845420">&#34;foo_darwin.go&#34;</span><span class="op" id="7845435">,</span>&nbsp;<span class="string" id="7845437">&#34;&#34;</span><span class="op" id="7845439">,</span>&nbsp;<span class="builtintype" id="7845441">false</span><span class="op" id="7845446">}</span><span class="op" id="7845447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7845450">{</span><span class="ident" id="7845451"><a href="/gostd/go/build/build_test.go.html#7845105">ctxtP9</a></span><span class="op" id="7845457">,</span>&nbsp;<span class="string" id="7845459">&#34;foo.go&#34;</span><span class="op" id="7845467">,</span>&nbsp;<span class="string" id="7845469">&#34;&#34;</span><span class="op" id="7845471">,</span>&nbsp;<span class="builtintype" id="7845473">true</span><span class="op" id="7845477">}</span><span class="op" id="7845478">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7845481">{</span><span class="ident" id="7845482"><a href="/gostd/go/build/build_test.go.html#7845105">ctxtP9</a></span><span class="op" id="7845488">,</span>&nbsp;<span class="string" id="7845490">&#34;foo1.go&#34;</span><span class="op" id="7845499">,</span>&nbsp;<span class="string" id="7845501">&#34;//&nbsp;+build&nbsp;linux\n\npackage&nbsp;main\n&#34;</span><span class="op" id="7845536">,</span>&nbsp;<span class="builtintype" id="7845538">false</span><span class="op" id="7845543">}</span><span class="op" id="7845544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7845547">{</span><span class="ident" id="7845548"><a href="/gostd/go/build/build_test.go.html#7845105">ctxtP9</a></span><span class="op" id="7845554">,</span>&nbsp;<span class="string" id="7845556">&#34;foo.badsuffix&#34;</span><span class="op" id="7845571">,</span>&nbsp;<span class="string" id="7845573">&#34;&#34;</span><span class="op" id="7845575">,</span>&nbsp;<span class="builtintype" id="7845577">false</span><span class="op" id="7845582">}</span><span class="op" id="7845583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7845586">{</span><span class="ident" id="7845587"><a href="/gostd/go/build/build_test.go.html#7845158">ctxtAndroid</a></span><span class="op" id="7845598">,</span>&nbsp;<span class="string" id="7845600">&#34;foo_linux.go&#34;</span><span class="op" id="7845614">,</span>&nbsp;<span class="string" id="7845616">&#34;&#34;</span><span class="op" id="7845618">,</span>&nbsp;<span class="builtintype" id="7845620">true</span><span class="op" id="7845624">}</span><span class="op" id="7845625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7845628">{</span><span class="ident" id="7845629"><a href="/gostd/go/build/build_test.go.html#7845158">ctxtAndroid</a></span><span class="op" id="7845640">,</span>&nbsp;<span class="string" id="7845642">&#34;foo_android.go&#34;</span><span class="op" id="7845658">,</span>&nbsp;<span class="string" id="7845660">&#34;&#34;</span><span class="op" id="7845662">,</span>&nbsp;<span class="builtintype" id="7845664">true</span><span class="op" id="7845668">}</span><span class="op" id="7845669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7845672">{</span><span class="ident" id="7845673"><a href="/gostd/go/build/build_test.go.html#7845158">ctxtAndroid</a></span><span class="op" id="7845684">,</span>&nbsp;<span class="string" id="7845686">&#34;foo_plan9.go&#34;</span><span class="op" id="7845700">,</span>&nbsp;<span class="string" id="7845702">&#34;&#34;</span><span class="op" id="7845704">,</span>&nbsp;<span class="builtintype" id="7845706">false</span><span class="op" id="7845711">}</span><span class="op" id="7845712">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7845715">{</span><span class="ident" id="7845716"><a href="/gostd/go/build/build_test.go.html#7845158">ctxtAndroid</a></span><span class="op" id="7845727">,</span>&nbsp;<span class="string" id="7845729">&#34;android.go&#34;</span><span class="op" id="7845741">,</span>&nbsp;<span class="string" id="7845743">&#34;&#34;</span><span class="op" id="7845745">,</span>&nbsp;<span class="builtintype" id="7845747">true</span><span class="op" id="7845751">}</span><span class="op" id="7845752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7845755">{</span><span class="ident" id="7845756"><a href="/gostd/go/build/build_test.go.html#7845158">ctxtAndroid</a></span><span class="op" id="7845767">,</span>&nbsp;<span class="string" id="7845769">&#34;plan9.go&#34;</span><span class="op" id="7845779">,</span>&nbsp;<span class="string" id="7845781">&#34;&#34;</span><span class="op" id="7845783">,</span>&nbsp;<span class="builtintype" id="7845785">true</span><span class="op" id="7845789">}</span><span class="op" id="7845790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7845793">{</span><span class="ident" id="7845794"><a href="/gostd/go/build/build_test.go.html#7845158">ctxtAndroid</a></span><span class="op" id="7845805">,</span>&nbsp;<span class="string" id="7845807">&#34;plan9_test.go&#34;</span><span class="op" id="7845822">,</span>&nbsp;<span class="string" id="7845824">&#34;&#34;</span><span class="op" id="7845826">,</span>&nbsp;<span class="builtintype" id="7845828">true</span><span class="op" id="7845832">}</span><span class="op" id="7845833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7845836">{</span><span class="ident" id="7845837"><a href="/gostd/go/build/build_test.go.html#7845158">ctxtAndroid</a></span><span class="op" id="7845848">,</span>&nbsp;<span class="string" id="7845850">&#34;arm.s&#34;</span><span class="op" id="7845857">,</span>&nbsp;<span class="string" id="7845859">&#34;&#34;</span><span class="op" id="7845861">,</span>&nbsp;<span class="builtintype" id="7845863">true</span><span class="op" id="7845867">}</span><span class="op" id="7845868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7845871">{</span><span class="ident" id="7845872"><a href="/gostd/go/build/build_test.go.html#7845158">ctxtAndroid</a></span><span class="op" id="7845883">,</span>&nbsp;<span class="string" id="7845885">&#34;amd64.s&#34;</span><span class="op" id="7845894">,</span>&nbsp;<span class="string" id="7845896">&#34;&#34;</span><span class="op" id="7845898">,</span>&nbsp;<span class="builtintype" id="7845900">true</span><span class="op" id="7845904">}</span><span class="op" id="7845905">,</span><br>
<span class="lineno">195</span><span class="op" id="7845907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7845910">func</span>&nbsp;<span class="ident" id="7845915">TestMatchFile</span><span class="op" id="7845928">(</span><span class="ident" id="7845929">t</span>&nbsp;<span class="op" id="7845931">*</span><span class="ident" id="7845932"><a href="/gostd/go/build/build_test.go.html#7840558">testing</a></span><span class="op" id="7845939">.</span><span class="ident" id="7845940"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7845941">)</span>&nbsp;<span class="op" id="7845943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7845946">for</span>&nbsp;<span class="ident" id="7845950">_</span><span class="op" id="7845951">,</span>&nbsp;<span class="ident" id="7845953">tt</span>&nbsp;<span class="op" id="7845956">:=</span>&nbsp;<span class="keyword" id="7845959">range</span>&nbsp;<span class="ident" id="7845965"><a href="/gostd/go/build/build_test.go.html#7845219">matchFileTests</a></span>&nbsp;<span class="op" id="7845980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7845984">ctxt</span>&nbsp;<span class="op" id="7845989">:=</span>&nbsp;<span class="ident" id="7845992"><a href="/gostd/go/build/build_test.go.html#7845953">tt</a></span><span class="op" id="7845994">.</span><span class="ident" id="7845995"><a href="/gostd/go/build/build_test.go.html#7845248">ctxt</a></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7846002"><a href="/gostd/go/build/build_test.go.html#7845984">ctxt</a></span><span class="op" id="7846006">.</span><span class="ident" id="7846007"><a href="/gostd/go/build/build.go.html#5903690">OpenFile</a></span>&nbsp;<span class="op" id="7846016">=</span>&nbsp;<span class="keyword" id="7846018">func</span><span class="op" id="7846022">(</span><span class="ident" id="7846023">path</span>&nbsp;<span class="builtintype" id="7846028">string</span><span class="op" id="7846034">)</span>&nbsp;<span class="op" id="7846036">(</span><span class="ident" id="7846037">r</span>&nbsp;<span class="ident" id="7846039"><a href="/gostd/go/build/build_test.go.html#7840496">io</a></span><span class="op" id="7846041">.</span><span class="ident" id="7846042"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span><span class="op" id="7846052">,</span>&nbsp;<span class="ident" id="7846054">err</span>&nbsp;<span class="builtintype" id="7846058">error</span><span class="op" id="7846063">)</span>&nbsp;<span class="op" id="7846065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7846070">if</span>&nbsp;<span class="ident" id="7846073"><a href="/gostd/go/build/build_test.go.html#7846023">path</a></span>&nbsp;<span class="op" id="7846078">!=</span>&nbsp;<span class="string" id="7846081">&#34;x+&#34;</span><span class="op" id="7846085">+</span><span class="ident" id="7846086"><a href="/gostd/go/build/build_test.go.html#7845953">tt</a></span><span class="op" id="7846088">.</span><span class="ident" id="7846089"><a href="/gostd/go/build/build_test.go.html#7845263">name</a></span>&nbsp;<span class="op" id="7846094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7846100"><a href="/gostd/go/build/build_test.go.html#7845929">t</a></span><span class="op" id="7846101">.</span><span class="ident" id="7846102"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7846108">(</span><span class="string" id="7846109">&#34;OpenFile&nbsp;asked&nbsp;for&nbsp;%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7846145">,</span>&nbsp;<span class="ident" id="7846147"><a href="/gostd/go/build/build_test.go.html#7846023">path</a></span><span class="op" id="7846151">,</span>&nbsp;<span class="string" id="7846153">&#34;x+&#34;</span><span class="op" id="7846157">+</span><span class="ident" id="7846158"><a href="/gostd/go/build/build_test.go.html#7845953">tt</a></span><span class="op" id="7846160">.</span><span class="ident" id="7846161"><a href="/gostd/go/build/build_test.go.html#7845263">name</a></span><span class="op" id="7846165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7846170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7846175">return</span>&nbsp;<span class="op" id="7846182">&amp;</span><span class="ident" id="7846183"><a href="/gostd/go/build/build_test.go.html#7845007">readNopCloser</a></span><span class="op" id="7846196">{</span><span class="ident" id="7846197"><a href="/gostd/go/build/build_test.go.html#7840547">strings</a></span><span class="op" id="7846204">.</span><span class="ident" id="7846205"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="7846214">(</span><span class="ident" id="7846215"><a href="/gostd/go/build/build_test.go.html#7845953">tt</a></span><span class="op" id="7846217">.</span><span class="ident" id="7846218"><a href="/gostd/go/build/build_test.go.html#7845277">data</a></span><span class="op" id="7846222">)</span><span class="op" id="7846223">}</span><span class="op" id="7846224">,</span>&nbsp;<span class="builtintype" id="7846226">nil</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7846232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7846236"><a href="/gostd/go/build/build_test.go.html#7845984">ctxt</a></span><span class="op" id="7846240">.</span><span class="ident" id="7846241"><a href="/gostd/go/build/build.go.html#5902477">JoinPath</a></span>&nbsp;<span class="op" id="7846250">=</span>&nbsp;<span class="keyword" id="7846252">func</span><span class="op" id="7846256">(</span><span class="ident" id="7846257">elem</span>&nbsp;<span class="op" id="7846262">...</span><span class="builtintype" id="7846265">string</span><span class="op" id="7846271">)</span>&nbsp;<span class="builtintype" id="7846273">string</span>&nbsp;<span class="op" id="7846280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7846285">return</span>&nbsp;<span class="ident" id="7846292"><a href="/gostd/go/build/build_test.go.html#7840547">strings</a></span><span class="op" id="7846299">.</span><span class="ident" id="7846300"><a href="/gostd/strings/strings.go.html#2974969">Join</a></span><span class="op" id="7846304">(</span><span class="ident" id="7846305"><a href="/gostd/go/build/build_test.go.html#7846257">elem</a></span><span class="op" id="7846309">,</span>&nbsp;<span class="string" id="7846311">&#34;+&#34;</span><span class="op" id="7846314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7846318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7846322">match</span><span class="op" id="7846327">,</span>&nbsp;<span class="ident" id="7846329">err</span>&nbsp;<span class="op" id="7846333">:=</span>&nbsp;<span class="ident" id="7846336"><a href="/gostd/go/build/build_test.go.html#7845984">ctxt</a></span><span class="op" id="7846340">.</span><span class="ident" id="7846341"><a href="/gostd/go/build/build.go.html#5926955">MatchFile</a></span><span class="op" id="7846350">(</span><span class="string" id="7846351">&#34;x&#34;</span><span class="op" id="7846354">,</span>&nbsp;<span class="ident" id="7846356"><a href="/gostd/go/build/build_test.go.html#7845953">tt</a></span><span class="op" id="7846358">.</span><span class="ident" id="7846359"><a href="/gostd/go/build/build_test.go.html#7845263">name</a></span><span class="op" id="7846363">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7846367">if</span>&nbsp;<span class="ident" id="7846370"><a href="/gostd/go/build/build_test.go.html#7846322">match</a></span>&nbsp;<span class="op" id="7846376">!=</span>&nbsp;<span class="ident" id="7846379"><a href="/gostd/go/build/build_test.go.html#7845953">tt</a></span><span class="op" id="7846381">.</span><span class="ident" id="7846382"><a href="/gostd/go/build/build_test.go.html#7845291">match</a></span>&nbsp;<span class="op" id="7846388">||</span>&nbsp;<span class="ident" id="7846391"><a href="/gostd/go/build/build_test.go.html#7846329">err</a></span>&nbsp;<span class="op" id="7846395">!=</span>&nbsp;<span class="builtintype" id="7846398">nil</span>&nbsp;<span class="op" id="7846402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7846407"><a href="/gostd/go/build/build_test.go.html#7845929">t</a></span><span class="op" id="7846408">.</span><span class="ident" id="7846409"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7846415">(</span><span class="string" id="7846416">&#34;MatchFile(%q)&nbsp;=&nbsp;%v,&nbsp;%v,&nbsp;want&nbsp;%v,&nbsp;nil&#34;</span><span class="op" id="7846454">,</span>&nbsp;<span class="ident" id="7846456"><a href="/gostd/go/build/build_test.go.html#7845953">tt</a></span><span class="op" id="7846458">.</span><span class="ident" id="7846459"><a href="/gostd/go/build/build_test.go.html#7845263">name</a></span><span class="op" id="7846463">,</span>&nbsp;<span class="ident" id="7846465"><a href="/gostd/go/build/build_test.go.html#7846322">match</a></span><span class="op" id="7846470">,</span>&nbsp;<span class="ident" id="7846472"><a href="/gostd/go/build/build_test.go.html#7846329">err</a></span><span class="op" id="7846475">,</span>&nbsp;<span class="ident" id="7846477"><a href="/gostd/go/build/build_test.go.html#7845953">tt</a></span><span class="op" id="7846479">.</span><span class="ident" id="7846480"><a href="/gostd/go/build/build_test.go.html#7845291">match</a></span><span class="op" id="7846485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7846489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7846492">}</span><br>
<span class="lineno"></span><span class="op" id="7846494">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="7846497">func</span>&nbsp;<span class="ident" id="7846502">TestImportCmd</span><span class="op" id="7846515">(</span><span class="ident" id="7846516">t</span>&nbsp;<span class="op" id="7846518">*</span><span class="ident" id="7846519"><a href="/gostd/go/build/build_test.go.html#7840558">testing</a></span><span class="op" id="7846526">.</span><span class="ident" id="7846527"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7846528">)</span>&nbsp;<span class="op" id="7846530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7846533">p</span><span class="op" id="7846534">,</span>&nbsp;<span class="ident" id="7846536">err</span>&nbsp;<span class="op" id="7846540">:=</span>&nbsp;<span class="ident" id="7846543"><a href="/gostd/go/build/build.go.html#5928949">Import</a></span><span class="op" id="7846549">(</span><span class="string" id="7846550">&#34;cmd/internal/objfile&#34;</span><span class="op" id="7846572">,</span>&nbsp;<span class="string" id="7846574">&#34;&#34;</span><span class="op" id="7846576">,</span>&nbsp;<span class="num" id="7846578">0</span><span class="op" id="7846579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7846582">if</span>&nbsp;<span class="ident" id="7846585"><a href="/gostd/go/build/build_test.go.html#7846536">err</a></span>&nbsp;<span class="op" id="7846589">!=</span>&nbsp;<span class="builtintype" id="7846592">nil</span>&nbsp;<span class="op" id="7846596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7846600"><a href="/gostd/go/build/build_test.go.html#7846516">t</a></span><span class="op" id="7846601">.</span><span class="ident" id="7846602"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7846607">(</span><span class="ident" id="7846608"><a href="/gostd/go/build/build_test.go.html#7846536">err</a></span><span class="op" id="7846611">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7846614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7846617">if</span>&nbsp;<span class="op" id="7846620">!</span><span class="ident" id="7846621"><a href="/gostd/go/build/build_test.go.html#7840547">strings</a></span><span class="op" id="7846628">.</span><span class="ident" id="7846629"><a href="/gostd/strings/strings.go.html#2975527">HasSuffix</a></span><span class="op" id="7846638">(</span><span class="ident" id="7846639"><a href="/gostd/go/build/build_test.go.html#7840508">filepath</a></span><span class="op" id="7846647">.</span><span class="ident" id="7846648"><a href="/gostd/path/filepath/path.go.html#3782237">ToSlash</a></span><span class="op" id="7846655">(</span><span class="ident" id="7846656"><a href="/gostd/go/build/build_test.go.html#7846533">p</a></span><span class="op" id="7846657">.</span><span class="ident" id="7846658"><a href="/gostd/go/build/build.go.html#5910818">Dir</a></span><span class="op" id="7846661">)</span><span class="op" id="7846662">,</span>&nbsp;<span class="string" id="7846664">&#34;src/cmd/internal/objfile&#34;</span><span class="op" id="7846690">)</span>&nbsp;<span class="op" id="7846692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7846696"><a href="/gostd/go/build/build_test.go.html#7846516">t</a></span><span class="op" id="7846697">.</span><span class="ident" id="7846698"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7846704">(</span><span class="string" id="7846705">&#34;Import&nbsp;cmd/internal/objfile&nbsp;returned&nbsp;Dir=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7846759">,</span>&nbsp;<span class="ident" id="7846761"><a href="/gostd/go/build/build_test.go.html#7840508">filepath</a></span><span class="op" id="7846769">.</span><span class="ident" id="7846770"><a href="/gostd/path/filepath/path.go.html#3782237">ToSlash</a></span><span class="op" id="7846777">(</span><span class="ident" id="7846778"><a href="/gostd/go/build/build_test.go.html#7846533">p</a></span><span class="op" id="7846779">.</span><span class="ident" id="7846780"><a href="/gostd/go/build/build.go.html#5910818">Dir</a></span><span class="op" id="7846783">)</span><span class="op" id="7846784">,</span>&nbsp;<span class="string" id="7846786">&#34;.../src/cmd/internal/objfile&#34;</span><span class="op" id="7846816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7846819">}</span><br>
<span class="lineno"></span><span class="op" id="7846821">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
