<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/mail</h2>
<ul>
<li><a href="/gostd/net/mail/message.go.html">message.go</a></li>
<li><a href="/gostd/net/mail/message_test.go.html" class="current">message_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7875240">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7875295">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7875349">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7875400">package</span>&nbsp;<span class="ident" id="7875408">mail</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7875414">import</span>&nbsp;<span class="op" id="7875421">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7875424">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7875433">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7875446">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7875457">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7875468">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7875479">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7875486">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7875489">var</span>&nbsp;<span class="ident" id="7875493">parseTests</span>&nbsp;<span class="op" id="7875504">=</span>&nbsp;<span class="op" id="7875506">[</span><span class="op" id="7875507">]</span><span class="keyword" id="7875508">struct</span>&nbsp;<span class="op" id="7875515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7875518">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7875525">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7875533">header</span>&nbsp;<span class="ident" id="7875540">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7875548">body</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7875555">string</span><br>
<span class="lineno">20</span><span class="op" id="7875562">}</span><span class="op" id="7875563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7875566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7875570">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7875600">in</span><span class="op" id="7875602">:</span>&nbsp;<span class="string" id="7875604">`From:&nbsp;John&nbsp;Doe&nbsp;&lt;jdoe@machine.example&gt;<br>
<span class="lineno"></span>To:&nbsp;Mary&nbsp;Smith&nbsp;&lt;mary@example.net&gt;<br>
<span class="lineno">25</span>Subject:&nbsp;Saying&nbsp;Hello<br>
<span class="lineno"></span>Date:&nbsp;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600<br>
<span class="lineno"></span>Message-ID:&nbsp;&lt;1234@local.machine.example&gt;<br>
<span class="lineno"></span><br>
<span class="lineno"></span>This&nbsp;is&nbsp;a&nbsp;message&nbsp;just&nbsp;to&nbsp;say&nbsp;hello.<br>
<span class="lineno">30</span>So,&nbsp;&#34;Hello&#34;.<br>
<span class="lineno"></span>`</span><span class="op" id="7875830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7875834">header</span><span class="op" id="7875840">:</span>&nbsp;<span class="ident" id="7875842">Header</span><span class="op" id="7875848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7875853">&#34;From&#34;</span><span class="op" id="7875859">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7875867">[</span><span class="op" id="7875868">]</span><span class="builtintype" id="7875869">string</span><span class="op" id="7875875">{</span><span class="string" id="7875876">&#34;John&nbsp;Doe&nbsp;&lt;jdoe@machine.example&gt;&#34;</span><span class="op" id="7875909">}</span><span class="op" id="7875910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7875915">&#34;To&#34;</span><span class="op" id="7875919">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7875929">[</span><span class="op" id="7875930">]</span><span class="builtintype" id="7875931">string</span><span class="op" id="7875937">{</span><span class="string" id="7875938">&#34;Mary&nbsp;Smith&nbsp;&lt;mary@example.net&gt;&#34;</span><span class="op" id="7875969">}</span><span class="op" id="7875970">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7875975">&#34;Subject&#34;</span><span class="op" id="7875984">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7875989">[</span><span class="op" id="7875990">]</span><span class="builtintype" id="7875991">string</span><span class="op" id="7875997">{</span><span class="string" id="7875998">&#34;Saying&nbsp;Hello&#34;</span><span class="op" id="7876012">}</span><span class="op" id="7876013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7876018">&#34;Date&#34;</span><span class="op" id="7876024">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7876032">[</span><span class="op" id="7876033">]</span><span class="builtintype" id="7876034">string</span><span class="op" id="7876040">{</span><span class="string" id="7876041">&#34;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600&#34;</span><span class="op" id="7876074">}</span><span class="op" id="7876075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7876080">&#34;Message-Id&#34;</span><span class="op" id="7876092">:</span>&nbsp;<span class="op" id="7876094">[</span><span class="op" id="7876095">]</span><span class="builtintype" id="7876096">string</span><span class="op" id="7876102">{</span><span class="string" id="7876103">&#34;&lt;1234@local.machine.example&gt;&#34;</span><span class="op" id="7876133">}</span><span class="op" id="7876134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7876138">}</span><span class="op" id="7876139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876143">body</span><span class="op" id="7876147">:</span>&nbsp;<span class="string" id="7876149">&#34;This&nbsp;is&nbsp;a&nbsp;message&nbsp;just&nbsp;to&nbsp;say&nbsp;hello.\nSo,&nbsp;\&#34;Hello\&#34;.\n&#34;</span><span class="op" id="7876205">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7876208">}</span><span class="op" id="7876209">,</span><br>
<span class="lineno"></span><span class="op" id="7876211">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7876214">func</span>&nbsp;<span class="ident" id="7876219">TestParsing</span><span class="op" id="7876230">(</span><span class="ident" id="7876231">t</span>&nbsp;<span class="op" id="7876233">*</span><span class="ident" id="7876234">testing</span><span class="op" id="7876241">.</span><span class="ident" id="7876242">T</span><span class="op" id="7876243">)</span>&nbsp;<span class="op" id="7876245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876248">for</span>&nbsp;<span class="ident" id="7876252">i</span><span class="op" id="7876253">,</span>&nbsp;<span class="ident" id="7876255">test</span>&nbsp;<span class="op" id="7876260">:=</span>&nbsp;<span class="keyword" id="7876263">range</span>&nbsp;<span class="ident" id="7876269">parseTests</span>&nbsp;<span class="op" id="7876280">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876284">msg</span><span class="op" id="7876287">,</span>&nbsp;<span class="ident" id="7876289">err</span>&nbsp;<span class="op" id="7876293">:=</span>&nbsp;<span class="ident" id="7876296">ReadMessage</span><span class="op" id="7876307">(</span><span class="ident" id="7876308">bytes</span><span class="op" id="7876313">.</span><span class="ident" id="7876314">NewBuffer</span><span class="op" id="7876323">(</span><span class="op" id="7876324">[</span><span class="op" id="7876325">]</span><span class="builtintype" id="7876326">byte</span><span class="op" id="7876330">(</span><span class="ident" id="7876331">test</span><span class="op" id="7876335">.</span><span class="ident" id="7876336">in</span><span class="op" id="7876338">)</span><span class="op" id="7876339">)</span><span class="op" id="7876340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876344">if</span>&nbsp;<span class="ident" id="7876347">err</span>&nbsp;<span class="op" id="7876351">!=</span>&nbsp;<span class="ident" id="7876354">nil</span>&nbsp;<span class="op" id="7876358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876363">t</span><span class="op" id="7876364">.</span><span class="ident" id="7876365">Errorf</span><span class="op" id="7876371">(</span><span class="string" id="7876372">&#34;test&nbsp;#%d:&nbsp;Failed&nbsp;parsing&nbsp;message:&nbsp;%v&#34;</span><span class="op" id="7876410">,</span>&nbsp;<span class="ident" id="7876412">i</span><span class="op" id="7876413">,</span>&nbsp;<span class="ident" id="7876415">err</span><span class="op" id="7876418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876423">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7876434">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876438">if</span>&nbsp;<span class="op" id="7876441">!</span><span class="ident" id="7876442">headerEq</span><span class="op" id="7876450">(</span><span class="ident" id="7876451">msg</span><span class="op" id="7876454">.</span><span class="ident" id="7876455">Header</span><span class="op" id="7876461">,</span>&nbsp;<span class="ident" id="7876463">test</span><span class="op" id="7876467">.</span><span class="ident" id="7876468">header</span><span class="op" id="7876474">)</span>&nbsp;<span class="op" id="7876476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876481">t</span><span class="op" id="7876482">.</span><span class="ident" id="7876483">Errorf</span><span class="op" id="7876489">(</span><span class="string" id="7876490">&#34;test&nbsp;#%d:&nbsp;Incorrectly&nbsp;parsed&nbsp;message&nbsp;header.\nGot:\n%+v\nWant:\n%+v&#34;</span><span class="op" id="7876559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876565">i</span><span class="op" id="7876566">,</span>&nbsp;<span class="ident" id="7876568">msg</span><span class="op" id="7876571">.</span><span class="ident" id="7876572">Header</span><span class="op" id="7876578">,</span>&nbsp;<span class="ident" id="7876580">test</span><span class="op" id="7876584">.</span><span class="ident" id="7876585">header</span><span class="op" id="7876591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7876595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876599">body</span><span class="op" id="7876603">,</span>&nbsp;<span class="ident" id="7876605">err</span>&nbsp;<span class="op" id="7876609">:=</span>&nbsp;<span class="ident" id="7876612">ioutil</span><span class="op" id="7876618">.</span><span class="ident" id="7876619">ReadAll</span><span class="op" id="7876626">(</span><span class="ident" id="7876627">msg</span><span class="op" id="7876630">.</span><span class="ident" id="7876631">Body</span><span class="op" id="7876635">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876639">if</span>&nbsp;<span class="ident" id="7876642">err</span>&nbsp;<span class="op" id="7876646">!=</span>&nbsp;<span class="ident" id="7876649">nil</span>&nbsp;<span class="op" id="7876653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876658">t</span><span class="op" id="7876659">.</span><span class="ident" id="7876660">Errorf</span><span class="op" id="7876666">(</span><span class="string" id="7876667">&#34;test&nbsp;#%d:&nbsp;Failed&nbsp;reading&nbsp;body:&nbsp;%v&#34;</span><span class="op" id="7876702">,</span>&nbsp;<span class="ident" id="7876704">i</span><span class="op" id="7876705">,</span>&nbsp;<span class="ident" id="7876707">err</span><span class="op" id="7876710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876715">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7876726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876730">bodyStr</span>&nbsp;<span class="op" id="7876738">:=</span>&nbsp;<span class="builtintype" id="7876741">string</span><span class="op" id="7876747">(</span><span class="ident" id="7876748">body</span><span class="op" id="7876752">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876756">if</span>&nbsp;<span class="ident" id="7876759">bodyStr</span>&nbsp;<span class="op" id="7876767">!=</span>&nbsp;<span class="ident" id="7876770">test</span><span class="op" id="7876774">.</span><span class="ident" id="7876775">body</span>&nbsp;<span class="op" id="7876780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876785">t</span><span class="op" id="7876786">.</span><span class="ident" id="7876787">Errorf</span><span class="op" id="7876793">(</span><span class="string" id="7876794">&#34;test&nbsp;#%d:&nbsp;Incorrectly&nbsp;parsed&nbsp;message&nbsp;body.\nGot:\n%+v\nWant:\n%+v&#34;</span><span class="op" id="7876861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876867">i</span><span class="op" id="7876868">,</span>&nbsp;<span class="ident" id="7876870">bodyStr</span><span class="op" id="7876877">,</span>&nbsp;<span class="ident" id="7876879">test</span><span class="op" id="7876883">.</span><span class="ident" id="7876884">body</span><span class="op" id="7876888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7876892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7876895">}</span><br>
<span class="lineno">65</span><span class="op" id="7876897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7876900">func</span>&nbsp;<span class="ident" id="7876905">headerEq</span><span class="op" id="7876913">(</span><span class="ident" id="7876914">a</span><span class="op" id="7876915">,</span>&nbsp;<span class="ident" id="7876917">b</span>&nbsp;<span class="ident" id="7876919">Header</span><span class="op" id="7876925">)</span>&nbsp;<span class="builtintype" id="7876927">bool</span>&nbsp;<span class="op" id="7876932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876935">if</span>&nbsp;<span class="builtinfunc" id="7876938">len</span><span class="op" id="7876941">(</span><span class="ident" id="7876942">a</span><span class="op" id="7876943">)</span>&nbsp;<span class="op" id="7876945">!=</span>&nbsp;<span class="builtinfunc" id="7876948">len</span><span class="op" id="7876951">(</span><span class="ident" id="7876952">b</span><span class="op" id="7876953">)</span>&nbsp;<span class="op" id="7876955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876959">return</span>&nbsp;<span class="builtintype" id="7876966">false</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7876973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876976">for</span>&nbsp;<span class="ident" id="7876980">k</span><span class="op" id="7876981">,</span>&nbsp;<span class="ident" id="7876983">as</span>&nbsp;<span class="op" id="7876986">:=</span>&nbsp;<span class="keyword" id="7876989">range</span>&nbsp;<span class="ident" id="7876995">a</span>&nbsp;<span class="op" id="7876997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877001">bs</span><span class="op" id="7877003">,</span>&nbsp;<span class="ident" id="7877005">ok</span>&nbsp;<span class="op" id="7877008">:=</span>&nbsp;<span class="ident" id="7877011">b</span><span class="op" id="7877012">[</span><span class="ident" id="7877013">k</span><span class="op" id="7877014">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877018">if</span>&nbsp;<span class="op" id="7877021">!</span><span class="ident" id="7877022">ok</span>&nbsp;<span class="op" id="7877025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877030">return</span>&nbsp;<span class="builtintype" id="7877037">false</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877049">if</span>&nbsp;<span class="op" id="7877052">!</span><span class="ident" id="7877053">reflect</span><span class="op" id="7877060">.</span><span class="ident" id="7877061">DeepEqual</span><span class="op" id="7877070">(</span><span class="ident" id="7877071">as</span><span class="op" id="7877073">,</span>&nbsp;<span class="ident" id="7877075">bs</span><span class="op" id="7877077">)</span>&nbsp;<span class="op" id="7877079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877084">return</span>&nbsp;<span class="builtintype" id="7877091">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877102">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877105">return</span>&nbsp;<span class="builtintype" id="7877112">true</span><br>
<span class="lineno"></span><span class="op" id="7877117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7877120">func</span>&nbsp;<span class="ident" id="7877125">TestDateParsing</span><span class="op" id="7877140">(</span><span class="ident" id="7877141">t</span>&nbsp;<span class="op" id="7877143">*</span><span class="ident" id="7877144">testing</span><span class="op" id="7877151">.</span><span class="ident" id="7877152">T</span><span class="op" id="7877153">)</span>&nbsp;<span class="op" id="7877155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877158">tests</span>&nbsp;<span class="op" id="7877164">:=</span>&nbsp;<span class="op" id="7877167">[</span><span class="op" id="7877168">]</span><span class="keyword" id="7877169">struct</span>&nbsp;<span class="op" id="7877176">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877180">dateStr</span>&nbsp;<span class="builtintype" id="7877188">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877197">exp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877205">time</span><span class="op" id="7877209">.</span><span class="ident" id="7877210">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877216">}</span><span class="op" id="7877217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7877221">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877251">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7877256">&#34;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600&#34;</span><span class="op" id="7877289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877294">time</span><span class="op" id="7877298">.</span><span class="ident" id="7877299">Date</span><span class="op" id="7877303">(</span><span class="num" id="7877304">1997</span><span class="op" id="7877308">,</span>&nbsp;<span class="num" id="7877310">11</span><span class="op" id="7877312">,</span>&nbsp;<span class="num" id="7877314">21</span><span class="op" id="7877316">,</span>&nbsp;<span class="num" id="7877318">9</span><span class="op" id="7877319">,</span>&nbsp;<span class="num" id="7877321">55</span><span class="op" id="7877323">,</span>&nbsp;<span class="num" id="7877325">6</span><span class="op" id="7877326">,</span>&nbsp;<span class="num" id="7877328">0</span><span class="op" id="7877329">,</span>&nbsp;<span class="ident" id="7877331">time</span><span class="op" id="7877335">.</span><span class="ident" id="7877336">FixedZone</span><span class="op" id="7877345">(</span><span class="string" id="7877346">&#34;&#34;</span><span class="op" id="7877348">,</span>&nbsp;<span class="op" id="7877350">-</span><span class="num" id="7877351">6</span><span class="op" id="7877352">*</span><span class="num" id="7877353">60</span><span class="op" id="7877355">*</span><span class="num" id="7877356">60</span><span class="op" id="7877358">)</span><span class="op" id="7877359">)</span><span class="op" id="7877360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877364">}</span><span class="op" id="7877365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7877369">//&nbsp;RFC5322,&nbsp;Appendix&nbsp;A.6.2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7877398">//&nbsp;Obsolete&nbsp;date.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7877423">&#34;21&nbsp;Nov&nbsp;97&nbsp;09:55:06&nbsp;GMT&#34;</span><span class="op" id="7877447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877452">time</span><span class="op" id="7877456">.</span><span class="ident" id="7877457">Date</span><span class="op" id="7877461">(</span><span class="num" id="7877462">1997</span><span class="op" id="7877466">,</span>&nbsp;<span class="num" id="7877468">11</span><span class="op" id="7877470">,</span>&nbsp;<span class="num" id="7877472">21</span><span class="op" id="7877474">,</span>&nbsp;<span class="num" id="7877476">9</span><span class="op" id="7877477">,</span>&nbsp;<span class="num" id="7877479">55</span><span class="op" id="7877481">,</span>&nbsp;<span class="num" id="7877483">6</span><span class="op" id="7877484">,</span>&nbsp;<span class="num" id="7877486">0</span><span class="op" id="7877487">,</span>&nbsp;<span class="ident" id="7877489">time</span><span class="op" id="7877493">.</span><span class="ident" id="7877494">FixedZone</span><span class="op" id="7877503">(</span><span class="string" id="7877504">&#34;GMT&#34;</span><span class="op" id="7877509">,</span>&nbsp;<span class="num" id="7877511">0</span><span class="op" id="7877512">)</span><span class="op" id="7877513">)</span><span class="op" id="7877514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877518">}</span><span class="op" id="7877519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7877523">//&nbsp;Commonly&nbsp;found&nbsp;format&nbsp;not&nbsp;specified&nbsp;by&nbsp;RFC&nbsp;5322.</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7877582">&#34;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600&nbsp;(MDT)&#34;</span><span class="op" id="7877621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877626">time</span><span class="op" id="7877630">.</span><span class="ident" id="7877631">Date</span><span class="op" id="7877635">(</span><span class="num" id="7877636">1997</span><span class="op" id="7877640">,</span>&nbsp;<span class="num" id="7877642">11</span><span class="op" id="7877644">,</span>&nbsp;<span class="num" id="7877646">21</span><span class="op" id="7877648">,</span>&nbsp;<span class="num" id="7877650">9</span><span class="op" id="7877651">,</span>&nbsp;<span class="num" id="7877653">55</span><span class="op" id="7877655">,</span>&nbsp;<span class="num" id="7877657">6</span><span class="op" id="7877658">,</span>&nbsp;<span class="num" id="7877660">0</span><span class="op" id="7877661">,</span>&nbsp;<span class="ident" id="7877663">time</span><span class="op" id="7877667">.</span><span class="ident" id="7877668">FixedZone</span><span class="op" id="7877677">(</span><span class="string" id="7877678">&#34;&#34;</span><span class="op" id="7877680">,</span>&nbsp;<span class="op" id="7877682">-</span><span class="num" id="7877683">6</span><span class="op" id="7877684">*</span><span class="num" id="7877685">60</span><span class="op" id="7877687">*</span><span class="num" id="7877688">60</span><span class="op" id="7877690">)</span><span class="op" id="7877691">)</span><span class="op" id="7877692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877696">}</span><span class="op" id="7877697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877700">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877703">for</span>&nbsp;<span class="ident" id="7877707">_</span><span class="op" id="7877708">,</span>&nbsp;<span class="ident" id="7877710">test</span>&nbsp;<span class="op" id="7877715">:=</span>&nbsp;<span class="keyword" id="7877718">range</span>&nbsp;<span class="ident" id="7877724">tests</span>&nbsp;<span class="op" id="7877730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877734">hdr</span>&nbsp;<span class="op" id="7877738">:=</span>&nbsp;<span class="ident" id="7877741">Header</span><span class="op" id="7877747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7877752">&#34;Date&#34;</span><span class="op" id="7877758">:</span>&nbsp;<span class="op" id="7877760">[</span><span class="op" id="7877761">]</span><span class="builtintype" id="7877762">string</span><span class="op" id="7877768">{</span><span class="ident" id="7877769">test</span><span class="op" id="7877773">.</span><span class="ident" id="7877774">dateStr</span><span class="op" id="7877781">}</span><span class="op" id="7877782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877790">date</span><span class="op" id="7877794">,</span>&nbsp;<span class="ident" id="7877796">err</span>&nbsp;<span class="op" id="7877800">:=</span>&nbsp;<span class="ident" id="7877803">hdr</span><span class="op" id="7877806">.</span><span class="ident" id="7877807">Date</span><span class="op" id="7877811">(</span><span class="op" id="7877812">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877816">if</span>&nbsp;<span class="ident" id="7877819">err</span>&nbsp;<span class="op" id="7877823">!=</span>&nbsp;<span class="ident" id="7877826">nil</span>&nbsp;<span class="op" id="7877830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877835">t</span><span class="op" id="7877836">.</span><span class="ident" id="7877837">Errorf</span><span class="op" id="7877843">(</span><span class="string" id="7877844">&#34;Failed&nbsp;parsing&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7877867">,</span>&nbsp;<span class="ident" id="7877869">test</span><span class="op" id="7877873">.</span><span class="ident" id="7877874">dateStr</span><span class="op" id="7877881">,</span>&nbsp;<span class="ident" id="7877883">err</span><span class="op" id="7877886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877891">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877906">if</span>&nbsp;<span class="op" id="7877909">!</span><span class="ident" id="7877910">date</span><span class="op" id="7877914">.</span><span class="ident" id="7877915">Equal</span><span class="op" id="7877920">(</span><span class="ident" id="7877921">test</span><span class="op" id="7877925">.</span><span class="ident" id="7877926">exp</span><span class="op" id="7877929">)</span>&nbsp;<span class="op" id="7877931">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877936">t</span><span class="op" id="7877937">.</span><span class="ident" id="7877938">Errorf</span><span class="op" id="7877944">(</span><span class="string" id="7877945">&#34;Parse&nbsp;of&nbsp;%q:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7877977">,</span>&nbsp;<span class="ident" id="7877979">test</span><span class="op" id="7877983">.</span><span class="ident" id="7877984">dateStr</span><span class="op" id="7877991">,</span>&nbsp;<span class="ident" id="7877993">date</span><span class="op" id="7877997">,</span>&nbsp;<span class="ident" id="7877999">test</span><span class="op" id="7878003">.</span><span class="ident" id="7878004">exp</span><span class="op" id="7878007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878014">}</span><br>
<span class="lineno"></span><span class="op" id="7878016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="7878019">func</span>&nbsp;<span class="ident" id="7878024">TestAddressParsingError</span><span class="op" id="7878047">(</span><span class="ident" id="7878048">t</span>&nbsp;<span class="op" id="7878050">*</span><span class="ident" id="7878051">testing</span><span class="op" id="7878058">.</span><span class="ident" id="7878059">T</span><span class="op" id="7878060">)</span>&nbsp;<span class="op" id="7878062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7878065">const</span>&nbsp;<span class="ident" id="7878071">txt</span>&nbsp;<span class="op" id="7878075">=</span>&nbsp;<span class="string" id="7878077">&#34;=?iso-8859-2?Q?Bogl=E1rka_Tak=E1cs?=&nbsp;&lt;unknown@gmail.com&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7878137">_</span><span class="op" id="7878138">,</span>&nbsp;<span class="ident" id="7878140">err</span>&nbsp;<span class="op" id="7878144">:=</span>&nbsp;<span class="ident" id="7878147">ParseAddress</span><span class="op" id="7878159">(</span><span class="ident" id="7878160">txt</span><span class="op" id="7878163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7878166">if</span>&nbsp;<span class="ident" id="7878169">err</span>&nbsp;<span class="op" id="7878173">==</span>&nbsp;<span class="ident" id="7878176">nil</span>&nbsp;<span class="op" id="7878180">||</span>&nbsp;<span class="op" id="7878183">!</span><span class="ident" id="7878184">strings</span><span class="op" id="7878191">.</span><span class="ident" id="7878192">Contains</span><span class="op" id="7878200">(</span><span class="ident" id="7878201">err</span><span class="op" id="7878204">.</span><span class="ident" id="7878205">Error</span><span class="op" id="7878210">(</span><span class="op" id="7878211">)</span><span class="op" id="7878212">,</span>&nbsp;<span class="string" id="7878214">&#34;charset&nbsp;not&nbsp;supported&#34;</span><span class="op" id="7878237">)</span>&nbsp;<span class="op" id="7878239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7878243">t</span><span class="op" id="7878244">.</span><span class="ident" id="7878245">Errorf</span><span class="op" id="7878251">(</span><span class="string" id="7878252">`mail.ParseAddress(%q)&nbsp;err:&nbsp;%q,&nbsp;want&nbsp;&#34;.*charset&nbsp;not&nbsp;supported.*&#34;`</span><span class="op" id="7878317">,</span>&nbsp;<span class="ident" id="7878319">txt</span><span class="op" id="7878322">,</span>&nbsp;<span class="ident" id="7878324">err</span><span class="op" id="7878327">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878330">}</span><br>
<span class="lineno"></span><span class="op" id="7878332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7878335">func</span>&nbsp;<span class="ident" id="7878340">TestAddressParsing</span><span class="op" id="7878358">(</span><span class="ident" id="7878359">t</span>&nbsp;<span class="op" id="7878361">*</span><span class="ident" id="7878362">testing</span><span class="op" id="7878369">.</span><span class="ident" id="7878370">T</span><span class="op" id="7878371">)</span>&nbsp;<span class="op" id="7878373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7878376">tests</span>&nbsp;<span class="op" id="7878382">:=</span>&nbsp;<span class="op" id="7878385">[</span><span class="op" id="7878386">]</span><span class="keyword" id="7878387">struct</span>&nbsp;<span class="op" id="7878394">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7878398">addrsStr</span>&nbsp;<span class="builtintype" id="7878407">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7878416">exp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878425">[</span><span class="op" id="7878426">]</span><span class="op" id="7878427">*</span><span class="ident" id="7878428">Address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878437">}</span><span class="op" id="7878438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7878442">//&nbsp;Bare&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878460">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7878465">`jdoe@machine.example`</span><span class="op" id="7878487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878492">[</span><span class="op" id="7878493">]</span><span class="op" id="7878494">*</span><span class="ident" id="7878495">Address</span><span class="op" id="7878502">{</span><span class="op" id="7878503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7878509">Address</span><span class="op" id="7878516">:</span>&nbsp;<span class="string" id="7878518">&#34;jdoe@machine.example&#34;</span><span class="op" id="7878540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878545">}</span><span class="op" id="7878546">}</span><span class="op" id="7878547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878551">}</span><span class="op" id="7878552">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7878556">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7878591">`John&nbsp;Doe&nbsp;&lt;jdoe@machine.example&gt;`</span><span class="op" id="7878624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878629">[</span><span class="op" id="7878630">]</span><span class="op" id="7878631">*</span><span class="ident" id="7878632">Address</span><span class="op" id="7878639">{</span><span class="op" id="7878640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7878646">Name</span><span class="op" id="7878650">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7878655">&#34;John&nbsp;Doe&#34;</span><span class="op" id="7878665">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7878671">Address</span><span class="op" id="7878678">:</span>&nbsp;<span class="string" id="7878680">&#34;jdoe@machine.example&#34;</span><span class="op" id="7878702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878707">}</span><span class="op" id="7878708">}</span><span class="op" id="7878709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878713">}</span><span class="op" id="7878714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7878718">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878748">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7878753">`&#34;Joe&nbsp;Q.&nbsp;Public&#34;&nbsp;&lt;john.q.public@example.com&gt;`</span><span class="op" id="7878798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878803">[</span><span class="op" id="7878804">]</span><span class="op" id="7878805">*</span><span class="ident" id="7878806">Address</span><span class="op" id="7878813">{</span><span class="op" id="7878814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7878820">Name</span><span class="op" id="7878824">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7878829">&#34;Joe&nbsp;Q.&nbsp;Public&#34;</span><span class="op" id="7878844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7878850">Address</span><span class="op" id="7878857">:</span>&nbsp;<span class="string" id="7878859">&#34;john.q.public@example.com&#34;</span><span class="op" id="7878886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878891">}</span><span class="op" id="7878892">}</span><span class="op" id="7878893">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878897">}</span><span class="op" id="7878898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7878907">`Mary&nbsp;Smith&nbsp;&lt;mary@x.test&gt;,&nbsp;jdoe@example.org,&nbsp;Who?&nbsp;&lt;one@y.test&gt;`</span><span class="op" id="7878970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878975">[</span><span class="op" id="7878976">]</span><span class="op" id="7878977">*</span><span class="ident" id="7878978">Address</span><span class="op" id="7878985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878991">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7878998">Name</span><span class="op" id="7879002">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7879007">&#34;Mary&nbsp;Smith&#34;</span><span class="op" id="7879019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7879026">Address</span><span class="op" id="7879033">:</span>&nbsp;<span class="string" id="7879035">&#34;mary@x.test&#34;</span><span class="op" id="7879048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879054">}</span><span class="op" id="7879055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7879068">Address</span><span class="op" id="7879075">:</span>&nbsp;<span class="string" id="7879077">&#34;jdoe@example.org&#34;</span><span class="op" id="7879095">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879101">}</span><span class="op" id="7879102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7879115">Name</span><span class="op" id="7879119">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7879124">&#34;Who?&#34;</span><span class="op" id="7879130">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7879137">Address</span><span class="op" id="7879144">:</span>&nbsp;<span class="string" id="7879146">&#34;one@y.test&#34;</span><span class="op" id="7879158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879164">}</span><span class="op" id="7879165">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879170">}</span><span class="op" id="7879171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879175">}</span><span class="op" id="7879176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7879185">`&lt;boss@nil.test&gt;,&nbsp;&#34;Giant;&nbsp;\&#34;Big\&#34;&nbsp;Box&#34;&nbsp;&lt;sysservices@example.net&gt;`</span><span class="op" id="7879250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879255">[</span><span class="op" id="7879256">]</span><span class="op" id="7879257">*</span><span class="ident" id="7879258">Address</span><span class="op" id="7879265">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7879278">Address</span><span class="op" id="7879285">:</span>&nbsp;<span class="string" id="7879287">&#34;boss@nil.test&#34;</span><span class="op" id="7879302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879308">}</span><span class="op" id="7879309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7879322">Name</span><span class="op" id="7879326">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7879331">`Giant;&nbsp;&#34;Big&#34;&nbsp;Box`</span><span class="op" id="7879349">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7879356">Address</span><span class="op" id="7879363">:</span>&nbsp;<span class="string" id="7879365">&#34;sysservices@example.net&#34;</span><span class="op" id="7879390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879396">}</span><span class="op" id="7879397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879402">}</span><span class="op" id="7879403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879407">}</span><span class="op" id="7879408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7879412">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.3</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7879442">//&nbsp;TODO(dsymonds):&nbsp;Group&nbsp;addresses.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7879481">//&nbsp;RFC&nbsp;2047&nbsp;&#34;Q&#34;-encoded&nbsp;ISO-8859-1&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7879532">`=?iso-8859-1?q?J=F6rg_Doe?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7879581">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879586">[</span><span class="op" id="7879587">]</span><span class="op" id="7879588">*</span><span class="ident" id="7879589">Address</span><span class="op" id="7879596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7879609">Name</span><span class="op" id="7879613">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7879618">`Jrg&nbsp;Doe`</span><span class="op" id="7879629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7879636">Address</span><span class="op" id="7879643">:</span>&nbsp;<span class="string" id="7879645">&#34;joerg@example.com&#34;</span><span class="op" id="7879664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879670">}</span><span class="op" id="7879671">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879676">}</span><span class="op" id="7879677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879681">}</span><span class="op" id="7879682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7879686">//&nbsp;RFC&nbsp;2047&nbsp;&#34;Q&#34;-encoded&nbsp;US-ASCII&nbsp;address.&nbsp;Dumb&nbsp;but&nbsp;legal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7879751">`=?us-ascii?q?J=6Frg_Doe?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7879798">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879803">[</span><span class="op" id="7879804">]</span><span class="op" id="7879805">*</span><span class="ident" id="7879806">Address</span><span class="op" id="7879813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7879826">Name</span><span class="op" id="7879830">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7879835">`Jorg&nbsp;Doe`</span><span class="op" id="7879845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7879852">Address</span><span class="op" id="7879859">:</span>&nbsp;<span class="string" id="7879861">&#34;joerg@example.com&#34;</span><span class="op" id="7879880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879886">}</span><span class="op" id="7879887">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879892">}</span><span class="op" id="7879893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879897">}</span><span class="op" id="7879898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7879902">//&nbsp;RFC&nbsp;2047&nbsp;&#34;Q&#34;-encoded&nbsp;UTF-8&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7879943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7879948">`=?utf-8?q?J=C3=B6rg_Doe?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7879995">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880000">[</span><span class="op" id="7880001">]</span><span class="op" id="7880002">*</span><span class="ident" id="7880003">Address</span><span class="op" id="7880010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7880023">Name</span><span class="op" id="7880027">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7880032">`Jrg&nbsp;Doe`</span><span class="op" id="7880043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7880050">Address</span><span class="op" id="7880057">:</span>&nbsp;<span class="string" id="7880059">&#34;joerg@example.com&#34;</span><span class="op" id="7880078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880084">}</span><span class="op" id="7880085">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880090">}</span><span class="op" id="7880091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880095">}</span><span class="op" id="7880096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7880100">//&nbsp;RFC&nbsp;2047,&nbsp;Section&nbsp;8.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7880131">`=?ISO-8859-1?Q?Andr=E9?=&nbsp;Pirard&nbsp;&lt;PIRARD@vm1.ulg.ac.be&gt;`</span><span class="op" id="7880187">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880192">[</span><span class="op" id="7880193">]</span><span class="op" id="7880194">*</span><span class="ident" id="7880195">Address</span><span class="op" id="7880202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7880215">Name</span><span class="op" id="7880219">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7880224">`Andr&nbsp;Pirard`</span><span class="op" id="7880239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7880246">Address</span><span class="op" id="7880253">:</span>&nbsp;<span class="string" id="7880255">&#34;PIRARD@vm1.ulg.ac.be&#34;</span><span class="op" id="7880277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880283">}</span><span class="op" id="7880284">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880289">}</span><span class="op" id="7880290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880294">}</span><span class="op" id="7880295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7880299">//&nbsp;Custom&nbsp;example&nbsp;of&nbsp;RFC&nbsp;2047&nbsp;&#34;B&#34;-encoded&nbsp;ISO-8859-1&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7880368">`=?ISO-8859-1?B?SvZyZw==?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7880415">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880420">[</span><span class="op" id="7880421">]</span><span class="op" id="7880422">*</span><span class="ident" id="7880423">Address</span><span class="op" id="7880430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7880443">Name</span><span class="op" id="7880447">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7880452">`Jrg`</span><span class="op" id="7880459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7880466">Address</span><span class="op" id="7880473">:</span>&nbsp;<span class="string" id="7880475">&#34;joerg@example.com&#34;</span><span class="op" id="7880494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880500">}</span><span class="op" id="7880501">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880506">}</span><span class="op" id="7880507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880511">}</span><span class="op" id="7880512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7880516">//&nbsp;Custom&nbsp;example&nbsp;of&nbsp;RFC&nbsp;2047&nbsp;&#34;B&#34;-encoded&nbsp;UTF-8&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7880580">`=?UTF-8?B?SsO2cmc=?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7880622">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880627">[</span><span class="op" id="7880628">]</span><span class="op" id="7880629">*</span><span class="ident" id="7880630">Address</span><span class="op" id="7880637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7880650">Name</span><span class="op" id="7880654">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7880659">`Jrg`</span><span class="op" id="7880666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7880673">Address</span><span class="op" id="7880680">:</span>&nbsp;<span class="string" id="7880682">&#34;joerg@example.com&#34;</span><span class="op" id="7880701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880707">}</span><span class="op" id="7880708">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880713">}</span><span class="op" id="7880714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880718">}</span><span class="op" id="7880719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7880723">//&nbsp;Custom&nbsp;example&nbsp;with&nbsp;&#34;.&#34;&nbsp;in&nbsp;name.&nbsp;For&nbsp;issue&nbsp;4938</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7880781">`Asem&nbsp;H.&nbsp;&lt;noreply@example.com&gt;`</span><span class="op" id="7880812">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880817">[</span><span class="op" id="7880818">]</span><span class="op" id="7880819">*</span><span class="ident" id="7880820">Address</span><span class="op" id="7880827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7880840">Name</span><span class="op" id="7880844">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7880849">`Asem&nbsp;H.`</span><span class="op" id="7880858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7880865">Address</span><span class="op" id="7880872">:</span>&nbsp;<span class="string" id="7880874">&#34;noreply@example.com&#34;</span><span class="op" id="7880895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880901">}</span><span class="op" id="7880902">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880907">}</span><span class="op" id="7880908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880912">}</span><span class="op" id="7880913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7880916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7880919">for</span>&nbsp;<span class="ident" id="7880923">_</span><span class="op" id="7880924">,</span>&nbsp;<span class="ident" id="7880926">test</span>&nbsp;<span class="op" id="7880931">:=</span>&nbsp;<span class="keyword" id="7880934">range</span>&nbsp;<span class="ident" id="7880940">tests</span>&nbsp;<span class="op" id="7880946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7880950">if</span>&nbsp;<span class="builtinfunc" id="7880953">len</span><span class="op" id="7880956">(</span><span class="ident" id="7880957">test</span><span class="op" id="7880961">.</span><span class="ident" id="7880962">exp</span><span class="op" id="7880965">)</span>&nbsp;<span class="op" id="7880967">==</span>&nbsp;<span class="num" id="7880970">1</span>&nbsp;<span class="op" id="7880972">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7880977">addr</span><span class="op" id="7880981">,</span>&nbsp;<span class="ident" id="7880983">err</span>&nbsp;<span class="op" id="7880987">:=</span>&nbsp;<span class="ident" id="7880990">ParseAddress</span><span class="op" id="7881002">(</span><span class="ident" id="7881003">test</span><span class="op" id="7881007">.</span><span class="ident" id="7881008">addrsStr</span><span class="op" id="7881016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7881021">if</span>&nbsp;<span class="ident" id="7881024">err</span>&nbsp;<span class="op" id="7881028">!=</span>&nbsp;<span class="ident" id="7881031">nil</span>&nbsp;<span class="op" id="7881035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7881041">t</span><span class="op" id="7881042">.</span><span class="ident" id="7881043">Errorf</span><span class="op" id="7881049">(</span><span class="string" id="7881050">&#34;Failed&nbsp;parsing&nbsp;(single)&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7881082">,</span>&nbsp;<span class="ident" id="7881084">test</span><span class="op" id="7881088">.</span><span class="ident" id="7881089">addrsStr</span><span class="op" id="7881097">,</span>&nbsp;<span class="ident" id="7881099">err</span><span class="op" id="7881102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7881108">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881120">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7881125">if</span>&nbsp;<span class="op" id="7881128">!</span><span class="ident" id="7881129">reflect</span><span class="op" id="7881136">.</span><span class="ident" id="7881137">DeepEqual</span><span class="op" id="7881146">(</span><span class="op" id="7881147">[</span><span class="op" id="7881148">]</span><span class="op" id="7881149">*</span><span class="ident" id="7881150">Address</span><span class="op" id="7881157">{</span><span class="ident" id="7881158">addr</span><span class="op" id="7881162">}</span><span class="op" id="7881163">,</span>&nbsp;<span class="ident" id="7881165">test</span><span class="op" id="7881169">.</span><span class="ident" id="7881170">exp</span><span class="op" id="7881173">)</span>&nbsp;<span class="op" id="7881175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7881181">t</span><span class="op" id="7881182">.</span><span class="ident" id="7881183">Errorf</span><span class="op" id="7881189">(</span><span class="string" id="7881190">&#34;Parse&nbsp;(single)&nbsp;of&nbsp;%q:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7881231">,</span>&nbsp;<span class="ident" id="7881233">test</span><span class="op" id="7881237">.</span><span class="ident" id="7881238">addrsStr</span><span class="op" id="7881246">,</span>&nbsp;<span class="ident" id="7881248">addr</span><span class="op" id="7881252">,</span>&nbsp;<span class="ident" id="7881254">test</span><span class="op" id="7881258">.</span><span class="ident" id="7881259">exp</span><span class="op" id="7881262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7881276">addrs</span><span class="op" id="7881281">,</span>&nbsp;<span class="ident" id="7881283">err</span>&nbsp;<span class="op" id="7881287">:=</span>&nbsp;<span class="ident" id="7881290">ParseAddressList</span><span class="op" id="7881306">(</span><span class="ident" id="7881307">test</span><span class="op" id="7881311">.</span><span class="ident" id="7881312">addrsStr</span><span class="op" id="7881320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7881324">if</span>&nbsp;<span class="ident" id="7881327">err</span>&nbsp;<span class="op" id="7881331">!=</span>&nbsp;<span class="ident" id="7881334">nil</span>&nbsp;<span class="op" id="7881338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7881343">t</span><span class="op" id="7881344">.</span><span class="ident" id="7881345">Errorf</span><span class="op" id="7881351">(</span><span class="string" id="7881352">&#34;Failed&nbsp;parsing&nbsp;(list)&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7881382">,</span>&nbsp;<span class="ident" id="7881384">test</span><span class="op" id="7881388">.</span><span class="ident" id="7881389">addrsStr</span><span class="op" id="7881397">,</span>&nbsp;<span class="ident" id="7881399">err</span><span class="op" id="7881402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7881407">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881418">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7881422">if</span>&nbsp;<span class="op" id="7881425">!</span><span class="ident" id="7881426">reflect</span><span class="op" id="7881433">.</span><span class="ident" id="7881434">DeepEqual</span><span class="op" id="7881443">(</span><span class="ident" id="7881444">addrs</span><span class="op" id="7881449">,</span>&nbsp;<span class="ident" id="7881451">test</span><span class="op" id="7881455">.</span><span class="ident" id="7881456">exp</span><span class="op" id="7881459">)</span>&nbsp;<span class="op" id="7881461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7881466">t</span><span class="op" id="7881467">.</span><span class="ident" id="7881468">Errorf</span><span class="op" id="7881474">(</span><span class="string" id="7881475">&#34;Parse&nbsp;(list)&nbsp;of&nbsp;%q:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7881514">,</span>&nbsp;<span class="ident" id="7881516">test</span><span class="op" id="7881520">.</span><span class="ident" id="7881521">addrsStr</span><span class="op" id="7881529">,</span>&nbsp;<span class="ident" id="7881531">addrs</span><span class="op" id="7881536">,</span>&nbsp;<span class="ident" id="7881538">test</span><span class="op" id="7881542">.</span><span class="ident" id="7881543">exp</span><span class="op" id="7881546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881553">}</span><br>
<span class="lineno"></span><span class="op" id="7881555">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="keyword" id="7881558">func</span>&nbsp;<span class="ident" id="7881563">TestAddressFormatting</span><span class="op" id="7881584">(</span><span class="ident" id="7881585">t</span>&nbsp;<span class="op" id="7881587">*</span><span class="ident" id="7881588">testing</span><span class="op" id="7881595">.</span><span class="ident" id="7881596">T</span><span class="op" id="7881597">)</span>&nbsp;<span class="op" id="7881599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7881602">tests</span>&nbsp;<span class="op" id="7881608">:=</span>&nbsp;<span class="op" id="7881611">[</span><span class="op" id="7881612">]</span><span class="keyword" id="7881613">struct</span>&nbsp;<span class="op" id="7881620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7881624">addr</span>&nbsp;<span class="op" id="7881629">*</span><span class="ident" id="7881630">Address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7881640">exp</span>&nbsp;&nbsp;<span class="builtintype" id="7881645">string</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881653">}</span><span class="op" id="7881654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881663">&amp;</span><span class="ident" id="7881664">Address</span><span class="op" id="7881671">{</span><span class="ident" id="7881672">Address</span><span class="op" id="7881679">:</span>&nbsp;<span class="string" id="7881681">&#34;bob@example.com&#34;</span><span class="op" id="7881698">}</span><span class="op" id="7881699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7881704">&#34;&lt;bob@example.com&gt;&#34;</span><span class="op" id="7881723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881727">}</span><span class="op" id="7881728">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881737">&amp;</span><span class="ident" id="7881738">Address</span><span class="op" id="7881745">{</span><span class="ident" id="7881746">Name</span><span class="op" id="7881750">:</span>&nbsp;<span class="string" id="7881752">&#34;Bob&#34;</span><span class="op" id="7881757">,</span>&nbsp;<span class="ident" id="7881759">Address</span><span class="op" id="7881766">:</span>&nbsp;<span class="string" id="7881768">&#34;bob@example.com&#34;</span><span class="op" id="7881785">}</span><span class="op" id="7881786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7881791">`&#34;Bob&#34;&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="7881816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881820">}</span><span class="op" id="7881821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881825">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7881830">//&nbsp;note&nbsp;the&nbsp;&nbsp;(o&nbsp;with&nbsp;an&nbsp;umlaut)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881867">&amp;</span><span class="ident" id="7881868">Address</span><span class="op" id="7881875">{</span><span class="ident" id="7881876">Name</span><span class="op" id="7881880">:</span>&nbsp;<span class="string" id="7881882">&#34;Bb&#34;</span><span class="op" id="7881888">,</span>&nbsp;<span class="ident" id="7881890">Address</span><span class="op" id="7881897">:</span>&nbsp;<span class="string" id="7881899">&#34;bob@example.com&#34;</span><span class="op" id="7881916">}</span><span class="op" id="7881917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7881922">`=?utf-8?q?B=C3=B6b?=&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="7881962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881966">}</span><span class="op" id="7881967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881971">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7881976">&amp;</span><span class="ident" id="7881977">Address</span><span class="op" id="7881984">{</span><span class="ident" id="7881985">Name</span><span class="op" id="7881989">:</span>&nbsp;<span class="string" id="7881991">&#34;Bob&nbsp;Jane&#34;</span><span class="op" id="7882001">,</span>&nbsp;<span class="ident" id="7882003">Address</span><span class="op" id="7882010">:</span>&nbsp;<span class="string" id="7882012">&#34;bob@example.com&#34;</span><span class="op" id="7882029">}</span><span class="op" id="7882030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7882035">`&#34;Bob&nbsp;Jane&#34;&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="7882065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7882069">}</span><span class="op" id="7882070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7882074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7882079">&amp;</span><span class="ident" id="7882080">Address</span><span class="op" id="7882087">{</span><span class="ident" id="7882088">Name</span><span class="op" id="7882092">:</span>&nbsp;<span class="string" id="7882094">&#34;Bb&nbsp;Jacb&#34;</span><span class="op" id="7882107">,</span>&nbsp;<span class="ident" id="7882109">Address</span><span class="op" id="7882116">:</span>&nbsp;<span class="string" id="7882118">&#34;bob@example.com&#34;</span><span class="op" id="7882135">}</span><span class="op" id="7882136">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7882141">`=?utf-8?q?B=C3=B6b_Jac=C3=B6b?=&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="7882192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7882196">}</span><span class="op" id="7882197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7882200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7882203">for</span>&nbsp;<span class="ident" id="7882207">_</span><span class="op" id="7882208">,</span>&nbsp;<span class="ident" id="7882210">test</span>&nbsp;<span class="op" id="7882215">:=</span>&nbsp;<span class="keyword" id="7882218">range</span>&nbsp;<span class="ident" id="7882224">tests</span>&nbsp;<span class="op" id="7882230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7882234">s</span>&nbsp;<span class="op" id="7882236">:=</span>&nbsp;<span class="ident" id="7882239">test</span><span class="op" id="7882243">.</span><span class="ident" id="7882244">addr</span><span class="op" id="7882248">.</span><span class="ident" id="7882249">String</span><span class="op" id="7882255">(</span><span class="op" id="7882256">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7882260">if</span>&nbsp;<span class="ident" id="7882263">s</span>&nbsp;<span class="op" id="7882265">!=</span>&nbsp;<span class="ident" id="7882268">test</span><span class="op" id="7882272">.</span><span class="ident" id="7882273">exp</span>&nbsp;<span class="op" id="7882277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7882282">t</span><span class="op" id="7882283">.</span><span class="ident" id="7882284">Errorf</span><span class="op" id="7882290">(</span><span class="string" id="7882291">&#34;Address%+v.String()&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7882326">,</span>&nbsp;<span class="op" id="7882328">*</span><span class="ident" id="7882329">test</span><span class="op" id="7882333">.</span><span class="ident" id="7882334">addr</span><span class="op" id="7882338">,</span>&nbsp;<span class="ident" id="7882340">s</span><span class="op" id="7882341">,</span>&nbsp;<span class="ident" id="7882343">test</span><span class="op" id="7882347">.</span><span class="ident" id="7882348">exp</span><span class="op" id="7882351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7882355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7882358">}</span><br>
<span class="lineno"></span><span class="op" id="7882360">}</span>
</div>
</body>
</html>
