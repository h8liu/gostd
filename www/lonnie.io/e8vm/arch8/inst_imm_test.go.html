<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="8605346">package</span>&nbsp;<span class="ident" id="8605354">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8605361">import</span>&nbsp;<span class="op" id="8605368">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8605371">&#34;testing&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8605383">&#34;math/rand&#34;</span><br>
<span class="lineno"></span><span class="op" id="8605395">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8605398">func</span>&nbsp;<span class="ident" id="8605403">TestInstImm</span><span class="op" id="8605414">(</span><span class="ident" id="8605415">t</span>&nbsp;<span class="op" id="8605417">*</span><span class="ident" id="8605418"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605371">testing</a></span><span class="op" id="8605425">.</span><span class="ident" id="8605426">T</span><span class="op" id="8605427">)</span>&nbsp;<span class="op" id="8605429">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605432">m</span>&nbsp;<span class="op" id="8605434">:=</span>&nbsp;<span class="ident" id="8605437"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5984648">newPhyMemory</a></span><span class="op" id="8605449">(</span><span class="ident" id="8605450"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span>&nbsp;<span class="op" id="8605459">*</span>&nbsp;<span class="num" id="8605461">32</span><span class="op" id="8605463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605466">cpu</span>&nbsp;<span class="op" id="8605470">:=</span>&nbsp;<span class="ident" id="8605473"><a href="/lonnie.io/e8vm/arch8/cpu.go.html#5961361">newCPU</a></span><span class="op" id="8605479">(</span><span class="ident" id="8605480"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605432">m</a></span><span class="op" id="8605481">,</span>&nbsp;<span class="builtinfunc" id="8605483">new</span><span class="op" id="8605486">(</span><span class="ident" id="8605487"><a href="/lonnie.io/e8vm/arch8/inst_imm.go.html#5967849">instImm</a></span><span class="op" id="8605494">)</span><span class="op" id="8605495">,</span>&nbsp;<span class="num" id="8605497">0</span><span class="op" id="8605498">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605502">tst</span>&nbsp;<span class="op" id="8605506">:=</span>&nbsp;<span class="keyword" id="8605509">func</span><span class="op" id="8605513">(</span><span class="ident" id="8605514">op</span><span class="op" id="8605516">,</span>&nbsp;<span class="ident" id="8605518">s</span><span class="op" id="8605519">,</span>&nbsp;<span class="ident" id="8605521">v</span><span class="op" id="8605522">,</span>&nbsp;<span class="ident" id="8605524">im</span><span class="op" id="8605526">,</span>&nbsp;<span class="ident" id="8605528">d</span><span class="op" id="8605529">,</span>&nbsp;<span class="ident" id="8605531">res</span>&nbsp;<span class="builtintype" id="8605535">uint32</span><span class="op" id="8605541">)</span>&nbsp;<span class="op" id="8605543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605547"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605466">cpu</a></span><span class="op" id="8605550">.</span><span class="ident" id="8605551">Reset</span><span class="op" id="8605556">(</span><span class="op" id="8605557">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605562">in</span>&nbsp;<span class="op" id="8605565">:=</span>&nbsp;<span class="op" id="8605568">(</span><span class="ident" id="8605569"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605514">op</a></span>&nbsp;<span class="op" id="8605572">&amp;</span>&nbsp;<span class="num" id="8605574">0xff</span><span class="op" id="8605578">)</span>&nbsp;<span class="op" id="8605580">&lt;&lt;</span>&nbsp;<span class="num" id="8605583">24</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605588"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605562">in</a></span>&nbsp;<span class="op" id="8605591">|=</span>&nbsp;<span class="op" id="8605594">(</span><span class="ident" id="8605595"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605518">s</a></span>&nbsp;<span class="op" id="8605597">&amp;</span>&nbsp;<span class="num" id="8605599">0x7</span><span class="op" id="8605602">)</span>&nbsp;<span class="op" id="8605604">&lt;&lt;</span>&nbsp;<span class="num" id="8605607">18</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605612"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605562">in</a></span>&nbsp;<span class="op" id="8605615">|=</span>&nbsp;<span class="op" id="8605618">(</span><span class="ident" id="8605619"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605528">d</a></span>&nbsp;<span class="op" id="8605621">&amp;</span>&nbsp;<span class="num" id="8605623">0x7</span><span class="op" id="8605626">)</span>&nbsp;<span class="op" id="8605628">&lt;&lt;</span>&nbsp;<span class="num" id="8605631">21</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605636"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605562">in</a></span>&nbsp;<span class="op" id="8605639">|=</span>&nbsp;<span class="ident" id="8605642"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605524">im</a></span>&nbsp;<span class="op" id="8605645">&amp;</span>&nbsp;<span class="num" id="8605647">0xffff</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605657"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605432">m</a></span><span class="op" id="8605658">.</span><span class="ident" id="8605659">WriteWord</span><span class="op" id="8605668">(</span><span class="ident" id="8605669"><a href="/lonnie.io/e8vm/arch8/cpu.go.html#5961279">InitPC</a></span><span class="op" id="8605675">,</span>&nbsp;<span class="ident" id="8605677"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605562">in</a></span><span class="op" id="8605679">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605684"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605466">cpu</a></span><span class="op" id="8605687">.</span><span class="ident" id="8605688">regs</span><span class="op" id="8605692">[</span><span class="ident" id="8605693"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605518">s</a></span><span class="op" id="8605694">]</span>&nbsp;<span class="op" id="8605696">=</span>&nbsp;<span class="ident" id="8605698"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605521">v</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605702">e</span>&nbsp;<span class="op" id="8605704">:=</span>&nbsp;<span class="ident" id="8605707"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605466">cpu</a></span><span class="op" id="8605710">.</span><span class="ident" id="8605711">Tick</span><span class="op" id="8605715">(</span><span class="op" id="8605716">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8605720">if</span>&nbsp;<span class="ident" id="8605723"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605702">e</a></span>&nbsp;<span class="op" id="8605725">!=</span>&nbsp;<span class="ident" id="8605728">nil</span>&nbsp;<span class="op" id="8605732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605737"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605415">t</a></span><span class="op" id="8605738">.</span><span class="ident" id="8605739">Fatal</span><span class="op" id="8605744">(</span><span class="string" id="8605745">&#34;unexpected&nbsp;exception&#34;</span><span class="op" id="8605767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8605771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605776">got</span>&nbsp;<span class="op" id="8605780">:=</span>&nbsp;<span class="ident" id="8605783"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605466">cpu</a></span><span class="op" id="8605786">.</span><span class="ident" id="8605787">regs</span><span class="op" id="8605791">[</span><span class="ident" id="8605792"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605528">d</a></span><span class="op" id="8605793">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8605797">if</span>&nbsp;<span class="ident" id="8605800"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605776">got</a></span>&nbsp;<span class="op" id="8605804">!=</span>&nbsp;<span class="ident" id="8605807"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605531">res</a></span>&nbsp;<span class="op" id="8605811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605816"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605415">t</a></span><span class="op" id="8605817">.</span><span class="ident" id="8605818">Fatalf</span><span class="op" id="8605824">(</span><span class="string" id="8605825">&#34;got&nbsp;0x%08x,&nbsp;expect&nbsp;0x%08x&#34;</span><span class="op" id="8605852">,</span>&nbsp;<span class="ident" id="8605854"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605776">got</a></span><span class="op" id="8605857">,</span>&nbsp;<span class="ident" id="8605859"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605531">res</a></span><span class="op" id="8605862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8605866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8605869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605873">twr</span>&nbsp;<span class="op" id="8605877">:=</span>&nbsp;<span class="keyword" id="8605880">func</span><span class="op" id="8605884">(</span><span class="ident" id="8605885">op</span><span class="op" id="8605887">,</span>&nbsp;<span class="ident" id="8605889">s</span><span class="op" id="8605890">,</span>&nbsp;<span class="ident" id="8605892">v</span><span class="op" id="8605893">,</span>&nbsp;<span class="ident" id="8605895">im</span><span class="op" id="8605897">,</span>&nbsp;<span class="ident" id="8605899">d</span><span class="op" id="8605900">,</span>&nbsp;<span class="ident" id="8605902">w</span>&nbsp;<span class="builtintype" id="8605904">uint32</span><span class="op" id="8605910">)</span>&nbsp;<span class="op" id="8605912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605916"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605466">cpu</a></span><span class="op" id="8605919">.</span><span class="ident" id="8605920">Reset</span><span class="op" id="8605925">(</span><span class="op" id="8605926">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605931">in</span>&nbsp;<span class="op" id="8605934">:=</span>&nbsp;<span class="op" id="8605937">(</span><span class="ident" id="8605938"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605885">op</a></span>&nbsp;<span class="op" id="8605941">&amp;</span>&nbsp;<span class="num" id="8605943">0xff</span><span class="op" id="8605947">)</span>&nbsp;<span class="op" id="8605949">&lt;&lt;</span>&nbsp;<span class="num" id="8605952">24</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605957"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605931">in</a></span>&nbsp;<span class="op" id="8605960">|=</span>&nbsp;<span class="op" id="8605963">(</span><span class="ident" id="8605964"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605889">s</a></span>&nbsp;<span class="op" id="8605966">&amp;</span>&nbsp;<span class="num" id="8605968">0x7</span><span class="op" id="8605971">)</span>&nbsp;<span class="op" id="8605973">&lt;&lt;</span>&nbsp;<span class="num" id="8605976">18</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8605981"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605931">in</a></span>&nbsp;<span class="op" id="8605984">|=</span>&nbsp;<span class="op" id="8605987">(</span><span class="ident" id="8605988"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605899">d</a></span>&nbsp;<span class="op" id="8605990">&amp;</span>&nbsp;<span class="num" id="8605992">0x7</span><span class="op" id="8605995">)</span>&nbsp;<span class="op" id="8605997">&lt;&lt;</span>&nbsp;<span class="num" id="8606000">21</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606005"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605931">in</a></span>&nbsp;<span class="op" id="8606008">|=</span>&nbsp;<span class="ident" id="8606011"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605895">im</a></span>&nbsp;<span class="op" id="8606014">&amp;</span>&nbsp;<span class="num" id="8606016">0xffff</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606026"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605432">m</a></span><span class="op" id="8606027">.</span><span class="ident" id="8606028">WriteWord</span><span class="op" id="8606037">(</span><span class="ident" id="8606038"><a href="/lonnie.io/e8vm/arch8/cpu.go.html#5961279">InitPC</a></span><span class="op" id="8606044">,</span>&nbsp;<span class="ident" id="8606046"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605931">in</a></span><span class="op" id="8606048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606052"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605466">cpu</a></span><span class="op" id="8606055">.</span><span class="ident" id="8606056">regs</span><span class="op" id="8606060">[</span><span class="ident" id="8606061"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605889">s</a></span><span class="op" id="8606062">]</span>&nbsp;<span class="op" id="8606064">=</span>&nbsp;<span class="ident" id="8606066"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605892">v</a></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606070"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605466">cpu</a></span><span class="op" id="8606073">.</span><span class="ident" id="8606074">regs</span><span class="op" id="8606078">[</span><span class="ident" id="8606079"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605899">d</a></span><span class="op" id="8606080">]</span>&nbsp;<span class="op" id="8606082">=</span>&nbsp;<span class="ident" id="8606084"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605902">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606088">e</span>&nbsp;<span class="op" id="8606090">:=</span>&nbsp;<span class="ident" id="8606093"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605466">cpu</a></span><span class="op" id="8606096">.</span><span class="ident" id="8606097">Tick</span><span class="op" id="8606101">(</span><span class="op" id="8606102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8606106">if</span>&nbsp;<span class="ident" id="8606109"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606088">e</a></span>&nbsp;<span class="op" id="8606111">!=</span>&nbsp;<span class="ident" id="8606114">nil</span>&nbsp;<span class="op" id="8606118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606123"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605415">t</a></span><span class="op" id="8606124">.</span><span class="ident" id="8606125">Fatal</span><span class="op" id="8606130">(</span><span class="string" id="8606131">&#34;unexpected&nbsp;exception&#34;</span><span class="op" id="8606153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8606157">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8606160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606164">tf</span>&nbsp;<span class="op" id="8606167">:=</span>&nbsp;<span class="keyword" id="8606170">func</span><span class="op" id="8606174">(</span><span class="ident" id="8606175">op</span>&nbsp;<span class="builtintype" id="8606178">uint32</span><span class="op" id="8606184">,</span>&nbsp;<span class="ident" id="8606186">f</span>&nbsp;<span class="keyword" id="8606188">func</span><span class="op" id="8606192">(</span><span class="ident" id="8606193">v</span><span class="op" id="8606194">,</span>&nbsp;<span class="ident" id="8606196">im</span>&nbsp;<span class="builtintype" id="8606199">uint32</span><span class="op" id="8606205">)</span>&nbsp;<span class="builtintype" id="8606207">uint32</span><span class="op" id="8606213">)</span>&nbsp;<span class="op" id="8606215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8606219">for</span>&nbsp;<span class="ident" id="8606223">i</span>&nbsp;<span class="op" id="8606225">:=</span>&nbsp;<span class="num" id="8606228">0</span><span class="op" id="8606229">;</span>&nbsp;<span class="ident" id="8606231"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606223">i</a></span>&nbsp;<span class="op" id="8606233">&lt;</span>&nbsp;<span class="num" id="8606235">100</span><span class="op" id="8606238">;</span>&nbsp;<span class="ident" id="8606240"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606223">i</a></span><span class="op" id="8606241">++</span>&nbsp;<span class="op" id="8606244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606249">s</span>&nbsp;<span class="op" id="8606251">:=</span>&nbsp;<span class="builtintype" id="8606254">uint32</span><span class="op" id="8606260">(</span><span class="ident" id="8606261"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8606265">.</span><span class="ident" id="8606266">Intn</span><span class="op" id="8606270">(</span><span class="num" id="8606271">5</span><span class="op" id="8606272">)</span><span class="op" id="8606273">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606278">d</span>&nbsp;<span class="op" id="8606280">:=</span>&nbsp;<span class="builtintype" id="8606283">uint32</span><span class="op" id="8606289">(</span><span class="ident" id="8606290"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8606294">.</span><span class="ident" id="8606295">Intn</span><span class="op" id="8606299">(</span><span class="num" id="8606300">5</span><span class="op" id="8606301">)</span><span class="op" id="8606302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606307">v</span>&nbsp;<span class="op" id="8606309">:=</span>&nbsp;<span class="builtintype" id="8606312">uint32</span><span class="op" id="8606318">(</span><span class="ident" id="8606319"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8606323">.</span><span class="ident" id="8606324">Int63</span><span class="op" id="8606329">(</span><span class="op" id="8606330">)</span><span class="op" id="8606331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606336">im</span>&nbsp;<span class="op" id="8606339">:=</span>&nbsp;<span class="builtintype" id="8606342">uint32</span><span class="op" id="8606348">(</span><span class="ident" id="8606349"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8606353">.</span><span class="ident" id="8606354">Int63</span><span class="op" id="8606359">(</span><span class="op" id="8606360">)</span><span class="op" id="8606361">)</span>&nbsp;<span class="op" id="8606363">&amp;</span>&nbsp;<span class="num" id="8606365">0xffff</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606376">exp</span>&nbsp;<span class="op" id="8606380">:=</span>&nbsp;<span class="ident" id="8606383"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606186">f</a></span><span class="op" id="8606384">(</span><span class="ident" id="8606385"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606307">v</a></span><span class="op" id="8606386">,</span>&nbsp;<span class="ident" id="8606388"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606336">im</a></span><span class="op" id="8606390">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606396"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605502">tst</a></span><span class="op" id="8606399">(</span><span class="ident" id="8606400"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606175">op</a></span><span class="op" id="8606402">,</span>&nbsp;<span class="ident" id="8606404"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606249">s</a></span><span class="op" id="8606405">,</span>&nbsp;<span class="ident" id="8606407"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606307">v</a></span><span class="op" id="8606408">,</span>&nbsp;<span class="ident" id="8606410"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606336">im</a></span><span class="op" id="8606412">,</span>&nbsp;<span class="ident" id="8606414"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606278">d</a></span><span class="op" id="8606415">,</span>&nbsp;<span class="ident" id="8606417"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606376">exp</a></span><span class="op" id="8606420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8606424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8606427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606431">sext</span>&nbsp;<span class="op" id="8606436">:=</span>&nbsp;<span class="keyword" id="8606439">func</span><span class="op" id="8606443">(</span><span class="ident" id="8606444">i</span>&nbsp;<span class="builtintype" id="8606446">uint32</span><span class="op" id="8606452">)</span>&nbsp;<span class="builtintype" id="8606454">uint32</span>&nbsp;<span class="op" id="8606461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8606465">return</span>&nbsp;<span class="builtintype" id="8606472">uint32</span><span class="op" id="8606478">(</span><span class="op" id="8606479">(</span><span class="builtintype" id="8606480">int32</span><span class="op" id="8606485">(</span><span class="ident" id="8606486"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606444">i</a></span>&nbsp;<span class="op" id="8606488">&lt;&lt;</span>&nbsp;<span class="num" id="8606491">16</span><span class="op" id="8606493">)</span><span class="op" id="8606494">)</span>&nbsp;<span class="op" id="8606496">&gt;&gt;</span>&nbsp;<span class="num" id="8606499">16</span><span class="op" id="8606501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8606504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606508"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606164">tf</a></span><span class="op" id="8606510">(</span><span class="num" id="8606511">1</span><span class="op" id="8606512">,</span>&nbsp;<span class="keyword" id="8606514">func</span><span class="op" id="8606518">(</span><span class="ident" id="8606519">v</span><span class="op" id="8606520">,</span>&nbsp;<span class="ident" id="8606522">im</span>&nbsp;<span class="builtintype" id="8606525">uint32</span><span class="op" id="8606531">)</span>&nbsp;<span class="builtintype" id="8606533">uint32</span>&nbsp;<span class="op" id="8606540">{</span>&nbsp;<span class="keyword" id="8606542">return</span>&nbsp;<span class="ident" id="8606549"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606519">v</a></span>&nbsp;<span class="op" id="8606551">+</span>&nbsp;<span class="ident" id="8606553"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606431">sext</a></span><span class="op" id="8606557">(</span><span class="ident" id="8606558"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606522">im</a></span><span class="op" id="8606560">)</span>&nbsp;<span class="op" id="8606562">}</span><span class="op" id="8606563">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606566"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606164">tf</a></span><span class="op" id="8606568">(</span><span class="num" id="8606569">2</span><span class="op" id="8606570">,</span>&nbsp;<span class="keyword" id="8606572">func</span><span class="op" id="8606576">(</span><span class="ident" id="8606577">v</span><span class="op" id="8606578">,</span>&nbsp;<span class="ident" id="8606580">im</span>&nbsp;<span class="builtintype" id="8606583">uint32</span><span class="op" id="8606589">)</span>&nbsp;<span class="builtintype" id="8606591">uint32</span>&nbsp;<span class="op" id="8606598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606602">se</span>&nbsp;<span class="op" id="8606605">:=</span>&nbsp;<span class="ident" id="8606608"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606431">sext</a></span><span class="op" id="8606612">(</span><span class="ident" id="8606613"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606580">im</a></span><span class="op" id="8606615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8606619">if</span>&nbsp;<span class="builtintype" id="8606622">int32</span><span class="op" id="8606627">(</span><span class="ident" id="8606628"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606577">v</a></span><span class="op" id="8606629">)</span>&nbsp;<span class="op" id="8606631">&lt;</span>&nbsp;<span class="builtintype" id="8606633">int32</span><span class="op" id="8606638">(</span><span class="ident" id="8606639"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606602">se</a></span><span class="op" id="8606641">)</span>&nbsp;<span class="op" id="8606643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8606648">return</span>&nbsp;<span class="num" id="8606655">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8606659">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8606663">return</span>&nbsp;<span class="num" id="8606670">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8606673">}</span><span class="op" id="8606674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606677"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606164">tf</a></span><span class="op" id="8606679">(</span><span class="num" id="8606680">3</span><span class="op" id="8606681">,</span>&nbsp;<span class="keyword" id="8606683">func</span><span class="op" id="8606687">(</span><span class="ident" id="8606688">v</span><span class="op" id="8606689">,</span>&nbsp;<span class="ident" id="8606691">im</span>&nbsp;<span class="builtintype" id="8606694">uint32</span><span class="op" id="8606700">)</span>&nbsp;<span class="builtintype" id="8606702">uint32</span>&nbsp;<span class="op" id="8606709">{</span>&nbsp;<span class="keyword" id="8606711">return</span>&nbsp;<span class="ident" id="8606718"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606688">v</a></span>&nbsp;<span class="op" id="8606720">&amp;</span>&nbsp;<span class="ident" id="8606722"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606691">im</a></span>&nbsp;<span class="op" id="8606725">}</span><span class="op" id="8606726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606729"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606164">tf</a></span><span class="op" id="8606731">(</span><span class="num" id="8606732">4</span><span class="op" id="8606733">,</span>&nbsp;<span class="keyword" id="8606735">func</span><span class="op" id="8606739">(</span><span class="ident" id="8606740">v</span><span class="op" id="8606741">,</span>&nbsp;<span class="ident" id="8606743">im</span>&nbsp;<span class="builtintype" id="8606746">uint32</span><span class="op" id="8606752">)</span>&nbsp;<span class="builtintype" id="8606754">uint32</span>&nbsp;<span class="op" id="8606761">{</span>&nbsp;<span class="keyword" id="8606763">return</span>&nbsp;<span class="ident" id="8606770"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606740">v</a></span>&nbsp;<span class="op" id="8606772">|</span>&nbsp;<span class="ident" id="8606774"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606743">im</a></span>&nbsp;<span class="op" id="8606777">}</span><span class="op" id="8606778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606781"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606164">tf</a></span><span class="op" id="8606783">(</span><span class="num" id="8606784">5</span><span class="op" id="8606785">,</span>&nbsp;<span class="keyword" id="8606787">func</span><span class="op" id="8606791">(</span><span class="ident" id="8606792">_</span><span class="op" id="8606793">,</span>&nbsp;<span class="ident" id="8606795">im</span>&nbsp;<span class="builtintype" id="8606798">uint32</span><span class="op" id="8606804">)</span>&nbsp;<span class="builtintype" id="8606806">uint32</span>&nbsp;<span class="op" id="8606813">{</span>&nbsp;<span class="keyword" id="8606815">return</span>&nbsp;<span class="ident" id="8606822"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606795">im</a></span>&nbsp;<span class="op" id="8606825">&lt;&lt;</span>&nbsp;<span class="num" id="8606828">16</span>&nbsp;<span class="op" id="8606831">}</span><span class="op" id="8606832">)</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8606836">for</span>&nbsp;<span class="ident" id="8606840">i</span>&nbsp;<span class="op" id="8606842">:=</span>&nbsp;<span class="num" id="8606845">0</span><span class="op" id="8606846">;</span>&nbsp;<span class="ident" id="8606848"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606840">i</a></span>&nbsp;<span class="op" id="8606850">&lt;</span>&nbsp;<span class="num" id="8606852">100</span><span class="op" id="8606855">;</span>&nbsp;<span class="ident" id="8606857"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606840">i</a></span><span class="op" id="8606858">++</span>&nbsp;<span class="op" id="8606861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606865">addr</span>&nbsp;<span class="op" id="8606870">:=</span>&nbsp;<span class="builtintype" id="8606873">uint32</span><span class="op" id="8606879">(</span><span class="ident" id="8606880"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span>&nbsp;<span class="op" id="8606889">*</span>&nbsp;<span class="num" id="8606891">10</span><span class="op" id="8606893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606897"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606865">addr</a></span>&nbsp;<span class="op" id="8606902">+=</span>&nbsp;<span class="builtintype" id="8606905">uint32</span><span class="op" id="8606911">(</span><span class="ident" id="8606912"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8606916">.</span><span class="ident" id="8606917">Int63</span><span class="op" id="8606922">(</span><span class="op" id="8606923">)</span><span class="op" id="8606924">)</span>&nbsp;<span class="op" id="8606926">%</span>&nbsp;<span class="ident" id="8606928"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span>&nbsp;<span class="op" id="8606937">*</span>&nbsp;<span class="num" id="8606939">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606943">offset</span>&nbsp;<span class="op" id="8606950">:=</span>&nbsp;<span class="builtintype" id="8606953">uint32</span><span class="op" id="8606959">(</span><span class="ident" id="8606960"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8606964">.</span><span class="ident" id="8606965">Int63</span><span class="op" id="8606970">(</span><span class="op" id="8606971">)</span><span class="op" id="8606972">)</span>&nbsp;<span class="op" id="8606974">%</span>&nbsp;<span class="ident" id="8606976"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8606987"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606943">offset</a></span>&nbsp;<span class="op" id="8606994">-=</span>&nbsp;<span class="ident" id="8606997"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606943">offset</a></span>&nbsp;<span class="op" id="8607004">%</span>&nbsp;<span class="num" id="8607006">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607010"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606943">offset</a></span>&nbsp;<span class="op" id="8607017">-=</span>&nbsp;<span class="ident" id="8607020"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span>&nbsp;<span class="op" id="8607029">/</span>&nbsp;<span class="num" id="8607031">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607035">w</span>&nbsp;<span class="op" id="8607037">:=</span>&nbsp;<span class="builtintype" id="8607040">uint32</span><span class="op" id="8607046">(</span><span class="ident" id="8607047"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8607051">.</span><span class="ident" id="8607052">Int63</span><span class="op" id="8607057">(</span><span class="op" id="8607058">)</span><span class="op" id="8607059">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607064">e</span>&nbsp;<span class="op" id="8607066">:=</span>&nbsp;<span class="ident" id="8607069"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605432">m</a></span><span class="op" id="8607070">.</span><span class="ident" id="8607071">WriteWord</span><span class="op" id="8607080">(</span><span class="ident" id="8607081"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606865">addr</a></span><span class="op" id="8607085">+</span><span class="ident" id="8607086"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606943">offset</a></span><span class="op" id="8607092">,</span>&nbsp;<span class="ident" id="8607094"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607035">w</a></span><span class="op" id="8607095">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8607099">if</span>&nbsp;<span class="ident" id="8607102"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607064">e</a></span>&nbsp;<span class="op" id="8607104">!=</span>&nbsp;<span class="ident" id="8607107">nil</span>&nbsp;<span class="op" id="8607111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607116"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605415">t</a></span><span class="op" id="8607117">.</span><span class="ident" id="8607118">Fatal</span><span class="op" id="8607123">(</span><span class="string" id="8607124">&#34;write&nbsp;fail&#34;</span><span class="op" id="8607136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8607140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607144">s</span>&nbsp;<span class="op" id="8607146">:=</span>&nbsp;<span class="builtintype" id="8607149">uint32</span><span class="op" id="8607155">(</span><span class="ident" id="8607156"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8607160">.</span><span class="ident" id="8607161">Intn</span><span class="op" id="8607165">(</span><span class="num" id="8607166">5</span><span class="op" id="8607167">)</span><span class="op" id="8607168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607172">d</span>&nbsp;<span class="op" id="8607174">:=</span>&nbsp;<span class="builtintype" id="8607177">uint32</span><span class="op" id="8607183">(</span><span class="ident" id="8607184"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8607188">.</span><span class="ident" id="8607189">Intn</span><span class="op" id="8607193">(</span><span class="num" id="8607194">5</span><span class="op" id="8607195">)</span><span class="op" id="8607196">)</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607201"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605502">tst</a></span><span class="op" id="8607204">(</span><span class="num" id="8607205">6</span><span class="op" id="8607206">,</span>&nbsp;<span class="ident" id="8607208"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607144">s</a></span><span class="op" id="8607209">,</span>&nbsp;<span class="ident" id="8607211"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606865">addr</a></span><span class="op" id="8607215">,</span>&nbsp;<span class="ident" id="8607217"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8606943">offset</a></span><span class="op" id="8607223">,</span>&nbsp;<span class="ident" id="8607225"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607172">d</a></span><span class="op" id="8607226">,</span>&nbsp;<span class="ident" id="8607228"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607035">w</a></span><span class="op" id="8607229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8607232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8607236">for</span>&nbsp;<span class="ident" id="8607240">i</span>&nbsp;<span class="op" id="8607242">:=</span>&nbsp;<span class="num" id="8607245">0</span><span class="op" id="8607246">;</span>&nbsp;<span class="ident" id="8607248"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607240">i</a></span>&nbsp;<span class="op" id="8607250">&lt;</span>&nbsp;<span class="num" id="8607252">100</span><span class="op" id="8607255">;</span>&nbsp;<span class="ident" id="8607257"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607240">i</a></span><span class="op" id="8607258">++</span>&nbsp;<span class="op" id="8607261">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607265">addr</span>&nbsp;<span class="op" id="8607270">:=</span>&nbsp;<span class="builtintype" id="8607273">uint32</span><span class="op" id="8607279">(</span><span class="ident" id="8607280"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span>&nbsp;<span class="op" id="8607289">*</span>&nbsp;<span class="num" id="8607291">10</span><span class="op" id="8607293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607297"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607265">addr</a></span>&nbsp;<span class="op" id="8607302">+=</span>&nbsp;<span class="builtintype" id="8607305">uint32</span><span class="op" id="8607311">(</span><span class="ident" id="8607312"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8607316">.</span><span class="ident" id="8607317">Int63</span><span class="op" id="8607322">(</span><span class="op" id="8607323">)</span><span class="op" id="8607324">)</span>&nbsp;<span class="op" id="8607326">%</span>&nbsp;<span class="ident" id="8607328"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span>&nbsp;<span class="op" id="8607337">*</span>&nbsp;<span class="num" id="8607339">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607343">offset</span>&nbsp;<span class="op" id="8607350">:=</span>&nbsp;<span class="builtintype" id="8607353">uint32</span><span class="op" id="8607359">(</span><span class="ident" id="8607360"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8607364">.</span><span class="ident" id="8607365">Int63</span><span class="op" id="8607370">(</span><span class="op" id="8607371">)</span><span class="op" id="8607372">)</span>&nbsp;<span class="op" id="8607374">%</span>&nbsp;<span class="ident" id="8607376"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607387"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607343">offset</a></span>&nbsp;<span class="op" id="8607394">-=</span>&nbsp;<span class="ident" id="8607397"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span>&nbsp;<span class="op" id="8607406">/</span>&nbsp;<span class="num" id="8607408">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607412">b</span>&nbsp;<span class="op" id="8607414">:=</span>&nbsp;<span class="builtintype" id="8607417">byte</span><span class="op" id="8607421">(</span><span class="ident" id="8607422"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8607426">.</span><span class="ident" id="8607427">Int63</span><span class="op" id="8607432">(</span><span class="op" id="8607433">)</span><span class="op" id="8607434">)</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607439">e</span>&nbsp;<span class="op" id="8607441">:=</span>&nbsp;<span class="ident" id="8607444"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605432">m</a></span><span class="op" id="8607445">.</span><span class="ident" id="8607446">WriteByte</span><span class="op" id="8607455">(</span><span class="ident" id="8607456"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607265">addr</a></span><span class="op" id="8607460">+</span><span class="ident" id="8607461"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607343">offset</a></span><span class="op" id="8607467">,</span>&nbsp;<span class="ident" id="8607469"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607412">b</a></span><span class="op" id="8607470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8607474">if</span>&nbsp;<span class="ident" id="8607477"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607439">e</a></span>&nbsp;<span class="op" id="8607479">!=</span>&nbsp;<span class="ident" id="8607482">nil</span>&nbsp;<span class="op" id="8607486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607491"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605415">t</a></span><span class="op" id="8607492">.</span><span class="ident" id="8607493">Fatal</span><span class="op" id="8607498">(</span><span class="string" id="8607499">&#34;write&nbsp;fail&#34;</span><span class="op" id="8607511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8607515">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607519">s</span>&nbsp;<span class="op" id="8607521">:=</span>&nbsp;<span class="builtintype" id="8607524">uint32</span><span class="op" id="8607530">(</span><span class="ident" id="8607531"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8607535">.</span><span class="ident" id="8607536">Intn</span><span class="op" id="8607540">(</span><span class="num" id="8607541">5</span><span class="op" id="8607542">)</span><span class="op" id="8607543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607547">d</span>&nbsp;<span class="op" id="8607549">:=</span>&nbsp;<span class="builtintype" id="8607552">uint32</span><span class="op" id="8607558">(</span><span class="ident" id="8607559"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8607563">.</span><span class="ident" id="8607564">Intn</span><span class="op" id="8607568">(</span><span class="num" id="8607569">5</span><span class="op" id="8607570">)</span><span class="op" id="8607571">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607576">w</span>&nbsp;<span class="op" id="8607578">:=</span>&nbsp;<span class="builtintype" id="8607581">uint32</span><span class="op" id="8607587">(</span><span class="builtintype" id="8607588">int32</span><span class="op" id="8607593">(</span><span class="builtintype" id="8607594">uint32</span><span class="op" id="8607600">(</span><span class="ident" id="8607601"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607412">b</a></span><span class="op" id="8607602">)</span><span class="op" id="8607603">&lt;&lt;</span><span class="num" id="8607605">24</span><span class="op" id="8607607">)</span>&nbsp;<span class="op" id="8607609">&gt;&gt;</span>&nbsp;<span class="num" id="8607612">24</span><span class="op" id="8607614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607618"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605502">tst</a></span><span class="op" id="8607621">(</span><span class="num" id="8607622">7</span><span class="op" id="8607623">,</span>&nbsp;<span class="ident" id="8607625"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607519">s</a></span><span class="op" id="8607626">,</span>&nbsp;<span class="ident" id="8607628"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607265">addr</a></span><span class="op" id="8607632">,</span>&nbsp;<span class="ident" id="8607634"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607343">offset</a></span><span class="op" id="8607640">,</span>&nbsp;<span class="ident" id="8607642"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607547">d</a></span><span class="op" id="8607643">,</span>&nbsp;<span class="ident" id="8607645"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607576">w</a></span><span class="op" id="8607646">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607650"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605502">tst</a></span><span class="op" id="8607653">(</span><span class="num" id="8607654">8</span><span class="op" id="8607655">,</span>&nbsp;<span class="ident" id="8607657"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607519">s</a></span><span class="op" id="8607658">,</span>&nbsp;<span class="ident" id="8607660"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607265">addr</a></span><span class="op" id="8607664">,</span>&nbsp;<span class="ident" id="8607666"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607343">offset</a></span><span class="op" id="8607672">,</span>&nbsp;<span class="ident" id="8607674"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607547">d</a></span><span class="op" id="8607675">,</span>&nbsp;<span class="builtintype" id="8607677">uint32</span><span class="op" id="8607683">(</span><span class="ident" id="8607684"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607412">b</a></span><span class="op" id="8607685">)</span><span class="op" id="8607686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8607689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8607693">for</span>&nbsp;<span class="ident" id="8607697">i</span>&nbsp;<span class="op" id="8607699">:=</span>&nbsp;<span class="num" id="8607702">0</span><span class="op" id="8607703">;</span>&nbsp;<span class="ident" id="8607705"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607697">i</a></span>&nbsp;<span class="op" id="8607707">&lt;</span>&nbsp;<span class="num" id="8607709">100</span><span class="op" id="8607712">;</span>&nbsp;<span class="ident" id="8607714"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607697">i</a></span><span class="op" id="8607715">++</span>&nbsp;<span class="op" id="8607718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607722">addr</span>&nbsp;<span class="op" id="8607727">:=</span>&nbsp;<span class="builtintype" id="8607730">uint32</span><span class="op" id="8607736">(</span><span class="ident" id="8607737"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span>&nbsp;<span class="op" id="8607746">*</span>&nbsp;<span class="num" id="8607748">10</span><span class="op" id="8607750">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607754"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607722">addr</a></span>&nbsp;<span class="op" id="8607759">+=</span>&nbsp;<span class="builtintype" id="8607762">uint32</span><span class="op" id="8607768">(</span><span class="ident" id="8607769"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8607773">.</span><span class="ident" id="8607774">Int63</span><span class="op" id="8607779">(</span><span class="op" id="8607780">)</span><span class="op" id="8607781">)</span>&nbsp;<span class="op" id="8607783">%</span>&nbsp;<span class="ident" id="8607785"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span>&nbsp;<span class="op" id="8607794">*</span>&nbsp;<span class="num" id="8607796">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607800">offset</span>&nbsp;<span class="op" id="8607807">:=</span>&nbsp;<span class="builtintype" id="8607810">uint32</span><span class="op" id="8607816">(</span><span class="ident" id="8607817"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8607821">.</span><span class="ident" id="8607822">Int63</span><span class="op" id="8607827">(</span><span class="op" id="8607828">)</span><span class="op" id="8607829">)</span>&nbsp;<span class="op" id="8607831">%</span>&nbsp;<span class="ident" id="8607833"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607844"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607800">offset</a></span>&nbsp;<span class="op" id="8607851">-=</span>&nbsp;<span class="ident" id="8607854"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607800">offset</a></span>&nbsp;<span class="op" id="8607861">%</span>&nbsp;<span class="num" id="8607863">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607867"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607800">offset</a></span>&nbsp;<span class="op" id="8607874">-=</span>&nbsp;<span class="ident" id="8607877"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span>&nbsp;<span class="op" id="8607886">/</span>&nbsp;<span class="num" id="8607888">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607892">w</span>&nbsp;<span class="op" id="8607894">:=</span>&nbsp;<span class="builtintype" id="8607897">uint32</span><span class="op" id="8607903">(</span><span class="ident" id="8607904"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8607908">.</span><span class="ident" id="8607909">Int63</span><span class="op" id="8607914">(</span><span class="op" id="8607915">)</span><span class="op" id="8607916">)</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607921">s</span>&nbsp;<span class="op" id="8607923">:=</span>&nbsp;<span class="builtintype" id="8607926">uint32</span><span class="op" id="8607932">(</span><span class="ident" id="8607933"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8607937">.</span><span class="ident" id="8607938">Intn</span><span class="op" id="8607942">(</span><span class="num" id="8607943">5</span><span class="op" id="8607944">)</span><span class="op" id="8607945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607949">d</span>&nbsp;<span class="op" id="8607951">:=</span>&nbsp;<span class="builtintype" id="8607954">uint32</span><span class="op" id="8607960">(</span><span class="ident" id="8607961"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8607965">.</span><span class="ident" id="8607966">Intn</span><span class="op" id="8607970">(</span><span class="num" id="8607971">5</span><span class="op" id="8607972">)</span><span class="op" id="8607973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8607977">for</span>&nbsp;<span class="ident" id="8607981"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607949">d</a></span>&nbsp;<span class="op" id="8607983">==</span>&nbsp;<span class="ident" id="8607986"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607921">s</a></span>&nbsp;<span class="op" id="8607988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8607993"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607949">d</a></span>&nbsp;<span class="op" id="8607995">=</span>&nbsp;<span class="builtintype" id="8607997">uint32</span><span class="op" id="8608003">(</span><span class="ident" id="8608004"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8608008">.</span><span class="ident" id="8608009">Intn</span><span class="op" id="8608013">(</span><span class="num" id="8608014">5</span><span class="op" id="8608015">)</span><span class="op" id="8608016">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8608020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8608025"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605873">twr</a></span><span class="op" id="8608028">(</span><span class="num" id="8608029">9</span><span class="op" id="8608030">,</span>&nbsp;<span class="ident" id="8608032"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607921">s</a></span><span class="op" id="8608033">,</span>&nbsp;<span class="ident" id="8608035"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607722">addr</a></span><span class="op" id="8608039">,</span>&nbsp;<span class="ident" id="8608041"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607800">offset</a></span><span class="op" id="8608047">,</span>&nbsp;<span class="ident" id="8608049"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607949">d</a></span><span class="op" id="8608050">,</span>&nbsp;<span class="ident" id="8608052"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607892">w</a></span><span class="op" id="8608053">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8608058">got</span><span class="op" id="8608061">,</span>&nbsp;<span class="ident" id="8608063">e</span>&nbsp;<span class="op" id="8608065">:=</span>&nbsp;<span class="ident" id="8608068"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605432">m</a></span><span class="op" id="8608069">.</span><span class="ident" id="8608070">ReadWord</span><span class="op" id="8608078">(</span><span class="ident" id="8608079"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607722">addr</a></span>&nbsp;<span class="op" id="8608084">+</span>&nbsp;<span class="ident" id="8608086"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607800">offset</a></span><span class="op" id="8608092">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8608096">if</span>&nbsp;<span class="ident" id="8608099"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608063">e</a></span>&nbsp;<span class="op" id="8608101">!=</span>&nbsp;<span class="ident" id="8608104">nil</span>&nbsp;<span class="op" id="8608108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8608113"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605415">t</a></span><span class="op" id="8608114">.</span><span class="ident" id="8608115">Fatal</span><span class="op" id="8608120">(</span><span class="string" id="8608121">&#34;read&nbsp;fail&#34;</span><span class="op" id="8608132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8608136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8608141">if</span>&nbsp;<span class="ident" id="8608144"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608058">got</a></span>&nbsp;<span class="op" id="8608148">!=</span>&nbsp;<span class="ident" id="8608151"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607892">w</a></span>&nbsp;<span class="op" id="8608153">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8608158"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605415">t</a></span><span class="op" id="8608159">.</span><span class="ident" id="8608160">Fatalf</span><span class="op" id="8608166">(</span><span class="string" id="8608167">&#34;expect&nbsp;0x%08x,&nbsp;got&nbsp;0x%08x&#34;</span><span class="op" id="8608194">,</span>&nbsp;<span class="ident" id="8608196"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8607892">w</a></span><span class="op" id="8608197">,</span>&nbsp;<span class="ident" id="8608199"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608058">got</a></span><span class="op" id="8608202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8608206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8608209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8608213">for</span>&nbsp;<span class="ident" id="8608217">i</span>&nbsp;<span class="op" id="8608219">:=</span>&nbsp;<span class="num" id="8608222">0</span><span class="op" id="8608223">;</span>&nbsp;<span class="ident" id="8608225"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608217">i</a></span>&nbsp;<span class="op" id="8608227">&lt;</span>&nbsp;<span class="num" id="8608229">100</span><span class="op" id="8608232">;</span>&nbsp;<span class="ident" id="8608234"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608217">i</a></span><span class="op" id="8608235">++</span>&nbsp;<span class="op" id="8608238">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8608242">addr</span>&nbsp;<span class="op" id="8608247">:=</span>&nbsp;<span class="builtintype" id="8608250">uint32</span><span class="op" id="8608256">(</span><span class="ident" id="8608257"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span>&nbsp;<span class="op" id="8608266">*</span>&nbsp;<span class="num" id="8608268">10</span><span class="op" id="8608270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8608274"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608242">addr</a></span>&nbsp;<span class="op" id="8608279">+=</span>&nbsp;<span class="builtintype" id="8608282">uint32</span><span class="op" id="8608288">(</span><span class="ident" id="8608289"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8608293">.</span><span class="ident" id="8608294">Int63</span><span class="op" id="8608299">(</span><span class="op" id="8608300">)</span><span class="op" id="8608301">)</span>&nbsp;<span class="op" id="8608303">%</span>&nbsp;<span class="ident" id="8608305"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span>&nbsp;<span class="op" id="8608314">*</span>&nbsp;<span class="num" id="8608316">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8608320">offset</span>&nbsp;<span class="op" id="8608327">:=</span>&nbsp;<span class="builtintype" id="8608330">uint32</span><span class="op" id="8608336">(</span><span class="ident" id="8608337"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8608341">.</span><span class="ident" id="8608342">Int63</span><span class="op" id="8608347">(</span><span class="op" id="8608348">)</span><span class="op" id="8608349">)</span>&nbsp;<span class="op" id="8608351">%</span>&nbsp;<span class="ident" id="8608353"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8608364"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608320">offset</a></span>&nbsp;<span class="op" id="8608371">-=</span>&nbsp;<span class="ident" id="8608374"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span>&nbsp;<span class="op" id="8608383">/</span>&nbsp;<span class="num" id="8608385">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8608389">b</span>&nbsp;<span class="op" id="8608391">:=</span>&nbsp;<span class="builtintype" id="8608394">byte</span><span class="op" id="8608398">(</span><span class="ident" id="8608399"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8608403">.</span><span class="ident" id="8608404">Int63</span><span class="op" id="8608409">(</span><span class="op" id="8608410">)</span><span class="op" id="8608411">)</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8608416">s</span>&nbsp;<span class="op" id="8608418">:=</span>&nbsp;<span class="builtintype" id="8608421">uint32</span><span class="op" id="8608427">(</span><span class="ident" id="8608428"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8608432">.</span><span class="ident" id="8608433">Intn</span><span class="op" id="8608437">(</span><span class="num" id="8608438">5</span><span class="op" id="8608439">)</span><span class="op" id="8608440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8608444">d</span>&nbsp;<span class="op" id="8608446">:=</span>&nbsp;<span class="builtintype" id="8608449">uint32</span><span class="op" id="8608455">(</span><span class="ident" id="8608456"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8608460">.</span><span class="ident" id="8608461">Intn</span><span class="op" id="8608465">(</span><span class="num" id="8608466">5</span><span class="op" id="8608467">)</span><span class="op" id="8608468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8608472">for</span>&nbsp;<span class="ident" id="8608476"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608444">d</a></span>&nbsp;<span class="op" id="8608478">==</span>&nbsp;<span class="ident" id="8608481"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608416">s</a></span>&nbsp;<span class="op" id="8608483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8608488"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608444">d</a></span>&nbsp;<span class="op" id="8608490">=</span>&nbsp;<span class="builtintype" id="8608492">uint32</span><span class="op" id="8608498">(</span><span class="ident" id="8608499"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605383">rand</a></span><span class="op" id="8608503">.</span><span class="ident" id="8608504">Intn</span><span class="op" id="8608508">(</span><span class="num" id="8608509">5</span><span class="op" id="8608510">)</span><span class="op" id="8608511">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8608515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8608520"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605873">twr</a></span><span class="op" id="8608523">(</span><span class="num" id="8608524">10</span><span class="op" id="8608526">,</span>&nbsp;<span class="ident" id="8608528"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608416">s</a></span><span class="op" id="8608529">,</span>&nbsp;<span class="ident" id="8608531"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608242">addr</a></span><span class="op" id="8608535">,</span>&nbsp;<span class="ident" id="8608537"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608320">offset</a></span><span class="op" id="8608543">,</span>&nbsp;<span class="ident" id="8608545"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608444">d</a></span><span class="op" id="8608546">,</span>&nbsp;<span class="builtintype" id="8608548">uint32</span><span class="op" id="8608554">(</span><span class="ident" id="8608555"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608389">b</a></span><span class="op" id="8608556">)</span><span class="op" id="8608557">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8608562">got</span><span class="op" id="8608565">,</span>&nbsp;<span class="ident" id="8608567">e</span>&nbsp;<span class="op" id="8608569">:=</span>&nbsp;<span class="ident" id="8608572"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605432">m</a></span><span class="op" id="8608573">.</span><span class="ident" id="8608574">ReadByte</span><span class="op" id="8608582">(</span><span class="ident" id="8608583"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608242">addr</a></span>&nbsp;<span class="op" id="8608588">+</span>&nbsp;<span class="ident" id="8608590"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608320">offset</a></span><span class="op" id="8608596">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8608600">if</span>&nbsp;<span class="ident" id="8608603"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608567">e</a></span>&nbsp;<span class="op" id="8608605">!=</span>&nbsp;<span class="ident" id="8608608">nil</span>&nbsp;<span class="op" id="8608612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8608617"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605415">t</a></span><span class="op" id="8608618">.</span><span class="ident" id="8608619">Fatal</span><span class="op" id="8608624">(</span><span class="string" id="8608625">&#34;read&nbsp;fail&#34;</span><span class="op" id="8608636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8608640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8608645">if</span>&nbsp;<span class="ident" id="8608648"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608562">got</a></span>&nbsp;<span class="op" id="8608652">!=</span>&nbsp;<span class="ident" id="8608655"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608389">b</a></span>&nbsp;<span class="op" id="8608657">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8608662"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8605415">t</a></span><span class="op" id="8608663">.</span><span class="ident" id="8608664">Fatalf</span><span class="op" id="8608670">(</span><span class="string" id="8608671">&#34;expect&nbsp;0x%08x,&nbsp;got&nbsp;0x%08x&#34;</span><span class="op" id="8608698">,</span>&nbsp;<span class="ident" id="8608700"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608389">b</a></span><span class="op" id="8608701">,</span>&nbsp;<span class="ident" id="8608703"><a href="/lonnie.io/e8vm/arch8/inst_imm_test.go.html#8608562">got</a></span><span class="op" id="8608706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8608710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8608713">}</span><br>
<span class="lineno"></span><span class="op" id="8608715">}</span>
</div>
</body>
</html>
