<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html" class="current">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7611957">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7612012">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7612066">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7612117">package</span>&nbsp;<span class="ident" id="7612125">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7612130">import</span>&nbsp;<span class="op" id="7612137">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7612140">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7612149">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7612155">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7612161">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7612172">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7612182">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7612185">type</span>&nbsp;<span class="ident" id="7612190">Bench</span>&nbsp;<span class="keyword" id="7612196">struct</span>&nbsp;<span class="op" id="7612203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7612206">A</span>&nbsp;<span class="builtintype" id="7612208">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7612213">B</span>&nbsp;<span class="builtintype" id="7612215">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7612224">C</span>&nbsp;<span class="builtintype" id="7612226">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7612234">D</span>&nbsp;<span class="op" id="7612236">[</span><span class="op" id="7612237">]</span><span class="builtintype" id="7612238">byte</span><br>
<span class="lineno">20</span><span class="op" id="7612243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7612246">func</span>&nbsp;<span class="ident" id="7612251">benchmarkEndToEnd</span><span class="op" id="7612268">(</span><span class="ident" id="7612269">b</span>&nbsp;<span class="op" id="7612271">*</span><span class="ident" id="7612272">testing</span><span class="op" id="7612279">.</span><span class="ident" id="7612280">B</span><span class="op" id="7612281">,</span>&nbsp;<span class="ident" id="7612283">ctor</span>&nbsp;<span class="keyword" id="7612288">func</span><span class="op" id="7612292">(</span><span class="op" id="7612293">)</span>&nbsp;<span class="keyword" id="7612295">interface</span><span class="op" id="7612304">{</span><span class="op" id="7612305">}</span><span class="op" id="7612306">,</span>&nbsp;<span class="ident" id="7612308">pipe</span>&nbsp;<span class="keyword" id="7612313">func</span><span class="op" id="7612317">(</span><span class="op" id="7612318">)</span>&nbsp;<span class="op" id="7612320">(</span><span class="ident" id="7612321">r</span>&nbsp;<span class="ident" id="7612323">io</span><span class="op" id="7612325">.</span><span class="ident" id="7612326">Reader</span><span class="op" id="7612332">,</span>&nbsp;<span class="ident" id="7612334">w</span>&nbsp;<span class="ident" id="7612336">io</span><span class="op" id="7612338">.</span><span class="ident" id="7612339">Writer</span><span class="op" id="7612345">,</span>&nbsp;<span class="ident" id="7612347">err</span>&nbsp;<span class="builtintype" id="7612351">error</span><span class="op" id="7612356">)</span><span class="op" id="7612357">)</span>&nbsp;<span class="op" id="7612359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7612362">b</span><span class="op" id="7612363">.</span><span class="ident" id="7612364">RunParallel</span><span class="op" id="7612375">(</span><span class="keyword" id="7612376">func</span><span class="op" id="7612380">(</span><span class="ident" id="7612381">pb</span>&nbsp;<span class="op" id="7612384">*</span><span class="ident" id="7612385">testing</span><span class="op" id="7612392">.</span><span class="ident" id="7612393">PB</span><span class="op" id="7612395">)</span>&nbsp;<span class="op" id="7612397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7612401">r</span><span class="op" id="7612402">,</span>&nbsp;<span class="ident" id="7612404">w</span><span class="op" id="7612405">,</span>&nbsp;<span class="ident" id="7612407">err</span>&nbsp;<span class="op" id="7612411">:=</span>&nbsp;<span class="ident" id="7612414">pipe</span><span class="op" id="7612418">(</span><span class="op" id="7612419">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7612423">if</span>&nbsp;<span class="ident" id="7612426">err</span>&nbsp;<span class="op" id="7612430">!=</span>&nbsp;<span class="ident" id="7612433">nil</span>&nbsp;<span class="op" id="7612437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7612442">b</span><span class="op" id="7612443">.</span><span class="ident" id="7612444">Fatal</span><span class="op" id="7612449">(</span><span class="string" id="7612450">&#34;can&#39;t&nbsp;get&nbsp;pipe:&#34;</span><span class="op" id="7612467">,</span>&nbsp;<span class="ident" id="7612469">err</span><span class="op" id="7612472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7612476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7612480">v</span>&nbsp;<span class="op" id="7612482">:=</span>&nbsp;<span class="ident" id="7612485">ctor</span><span class="op" id="7612489">(</span><span class="op" id="7612490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7612494">enc</span>&nbsp;<span class="op" id="7612498">:=</span>&nbsp;<span class="ident" id="7612501">NewEncoder</span><span class="op" id="7612511">(</span><span class="ident" id="7612512">w</span><span class="op" id="7612513">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7612517">dec</span>&nbsp;<span class="op" id="7612521">:=</span>&nbsp;<span class="ident" id="7612524">NewDecoder</span><span class="op" id="7612534">(</span><span class="ident" id="7612535">r</span><span class="op" id="7612536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7612540">for</span>&nbsp;<span class="ident" id="7612544">pb</span><span class="op" id="7612546">.</span><span class="ident" id="7612547">Next</span><span class="op" id="7612551">(</span><span class="op" id="7612552">)</span>&nbsp;<span class="op" id="7612554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7612559">if</span>&nbsp;<span class="ident" id="7612562">err</span>&nbsp;<span class="op" id="7612566">:=</span>&nbsp;<span class="ident" id="7612569">enc</span><span class="op" id="7612572">.</span><span class="ident" id="7612573">Encode</span><span class="op" id="7612579">(</span><span class="ident" id="7612580">v</span><span class="op" id="7612581">)</span><span class="op" id="7612582">;</span>&nbsp;<span class="ident" id="7612584">err</span>&nbsp;<span class="op" id="7612588">!=</span>&nbsp;<span class="ident" id="7612591">nil</span>&nbsp;<span class="op" id="7612595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7612601">b</span><span class="op" id="7612602">.</span><span class="ident" id="7612603">Fatal</span><span class="op" id="7612608">(</span><span class="string" id="7612609">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7612624">,</span>&nbsp;<span class="ident" id="7612626">err</span><span class="op" id="7612629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7612634">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7612639">if</span>&nbsp;<span class="ident" id="7612642">err</span>&nbsp;<span class="op" id="7612646">:=</span>&nbsp;<span class="ident" id="7612649">dec</span><span class="op" id="7612652">.</span><span class="ident" id="7612653">Decode</span><span class="op" id="7612659">(</span><span class="ident" id="7612660">v</span><span class="op" id="7612661">)</span><span class="op" id="7612662">;</span>&nbsp;<span class="ident" id="7612664">err</span>&nbsp;<span class="op" id="7612668">!=</span>&nbsp;<span class="ident" id="7612671">nil</span>&nbsp;<span class="op" id="7612675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7612681">b</span><span class="op" id="7612682">.</span><span class="ident" id="7612683">Fatal</span><span class="op" id="7612688">(</span><span class="string" id="7612689">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7612704">,</span>&nbsp;<span class="ident" id="7612706">err</span><span class="op" id="7612709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7612714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7612718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7612721">}</span><span class="op" id="7612722">)</span><br>
<span class="lineno">40</span><span class="op" id="7612724">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7612727">func</span>&nbsp;<span class="ident" id="7612732">BenchmarkEndToEndPipe</span><span class="op" id="7612753">(</span><span class="ident" id="7612754">b</span>&nbsp;<span class="op" id="7612756">*</span><span class="ident" id="7612757">testing</span><span class="op" id="7612764">.</span><span class="ident" id="7612765">B</span><span class="op" id="7612766">)</span>&nbsp;<span class="op" id="7612768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7612771">benchmarkEndToEnd</span><span class="op" id="7612788">(</span><span class="ident" id="7612789">b</span><span class="op" id="7612790">,</span>&nbsp;<span class="keyword" id="7612792">func</span><span class="op" id="7612796">(</span><span class="op" id="7612797">)</span>&nbsp;<span class="keyword" id="7612799">interface</span><span class="op" id="7612808">{</span><span class="op" id="7612809">}</span>&nbsp;<span class="op" id="7612811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7612815">return</span>&nbsp;<span class="op" id="7612822">&amp;</span><span class="ident" id="7612823">Bench</span><span class="op" id="7612828">{</span><span class="num" id="7612829">7</span><span class="op" id="7612830">,</span>&nbsp;<span class="num" id="7612832">3.2</span><span class="op" id="7612835">,</span>&nbsp;<span class="string" id="7612837">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7612854">,</span>&nbsp;<span class="ident" id="7612856">bytes</span><span class="op" id="7612861">.</span><span class="ident" id="7612862">Repeat</span><span class="op" id="7612868">(</span><span class="op" id="7612869">[</span><span class="op" id="7612870">]</span><span class="builtintype" id="7612871">byte</span><span class="op" id="7612875">(</span><span class="string" id="7612876">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7612894">)</span><span class="op" id="7612895">,</span>&nbsp;<span class="num" id="7612897">100</span><span class="op" id="7612900">)</span><span class="op" id="7612901">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7612904">}</span><span class="op" id="7612905">,</span>&nbsp;<span class="keyword" id="7612907">func</span><span class="op" id="7612911">(</span><span class="op" id="7612912">)</span>&nbsp;<span class="op" id="7612914">(</span><span class="ident" id="7612915">r</span>&nbsp;<span class="ident" id="7612917">io</span><span class="op" id="7612919">.</span><span class="ident" id="7612920">Reader</span><span class="op" id="7612926">,</span>&nbsp;<span class="ident" id="7612928">w</span>&nbsp;<span class="ident" id="7612930">io</span><span class="op" id="7612932">.</span><span class="ident" id="7612933">Writer</span><span class="op" id="7612939">,</span>&nbsp;<span class="ident" id="7612941">err</span>&nbsp;<span class="builtintype" id="7612945">error</span><span class="op" id="7612950">)</span>&nbsp;<span class="op" id="7612952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7612956">r</span><span class="op" id="7612957">,</span>&nbsp;<span class="ident" id="7612959">w</span><span class="op" id="7612960">,</span>&nbsp;<span class="ident" id="7612962">err</span>&nbsp;<span class="op" id="7612966">=</span>&nbsp;<span class="ident" id="7612968">os</span><span class="op" id="7612970">.</span><span class="ident" id="7612971">Pipe</span><span class="op" id="7612975">(</span><span class="op" id="7612976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7612980">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7612988">}</span><span class="op" id="7612989">)</span><br>
<span class="lineno"></span><span class="op" id="7612991">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="7612994">func</span>&nbsp;<span class="ident" id="7612999">BenchmarkEndToEndByteBuffer</span><span class="op" id="7613026">(</span><span class="ident" id="7613027">b</span>&nbsp;<span class="op" id="7613029">*</span><span class="ident" id="7613030">testing</span><span class="op" id="7613037">.</span><span class="ident" id="7613038">B</span><span class="op" id="7613039">)</span>&nbsp;<span class="op" id="7613041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7613044">benchmarkEndToEnd</span><span class="op" id="7613061">(</span><span class="ident" id="7613062">b</span><span class="op" id="7613063">,</span>&nbsp;<span class="keyword" id="7613065">func</span><span class="op" id="7613069">(</span><span class="op" id="7613070">)</span>&nbsp;<span class="keyword" id="7613072">interface</span><span class="op" id="7613081">{</span><span class="op" id="7613082">}</span>&nbsp;<span class="op" id="7613084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7613088">return</span>&nbsp;<span class="op" id="7613095">&amp;</span><span class="ident" id="7613096">Bench</span><span class="op" id="7613101">{</span><span class="num" id="7613102">7</span><span class="op" id="7613103">,</span>&nbsp;<span class="num" id="7613105">3.2</span><span class="op" id="7613108">,</span>&nbsp;<span class="string" id="7613110">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7613127">,</span>&nbsp;<span class="ident" id="7613129">bytes</span><span class="op" id="7613134">.</span><span class="ident" id="7613135">Repeat</span><span class="op" id="7613141">(</span><span class="op" id="7613142">[</span><span class="op" id="7613143">]</span><span class="builtintype" id="7613144">byte</span><span class="op" id="7613148">(</span><span class="string" id="7613149">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7613167">)</span><span class="op" id="7613168">,</span>&nbsp;<span class="num" id="7613170">100</span><span class="op" id="7613173">)</span><span class="op" id="7613174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7613177">}</span><span class="op" id="7613178">,</span>&nbsp;<span class="keyword" id="7613180">func</span><span class="op" id="7613184">(</span><span class="op" id="7613185">)</span>&nbsp;<span class="op" id="7613187">(</span><span class="ident" id="7613188">r</span>&nbsp;<span class="ident" id="7613190">io</span><span class="op" id="7613192">.</span><span class="ident" id="7613193">Reader</span><span class="op" id="7613199">,</span>&nbsp;<span class="ident" id="7613201">w</span>&nbsp;<span class="ident" id="7613203">io</span><span class="op" id="7613205">.</span><span class="ident" id="7613206">Writer</span><span class="op" id="7613212">,</span>&nbsp;<span class="ident" id="7613214">err</span>&nbsp;<span class="builtintype" id="7613218">error</span><span class="op" id="7613223">)</span>&nbsp;<span class="op" id="7613225">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7613229">var</span>&nbsp;<span class="ident" id="7613233">buf</span>&nbsp;<span class="ident" id="7613237">bytes</span><span class="op" id="7613242">.</span><span class="ident" id="7613243">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7613252">return</span>&nbsp;<span class="op" id="7613259">&amp;</span><span class="ident" id="7613260">buf</span><span class="op" id="7613263">,</span>&nbsp;<span class="op" id="7613265">&amp;</span><span class="ident" id="7613266">buf</span><span class="op" id="7613269">,</span>&nbsp;<span class="ident" id="7613271">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7613276">}</span><span class="op" id="7613277">)</span><br>
<span class="lineno"></span><span class="op" id="7613279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="7613282">func</span>&nbsp;<span class="ident" id="7613287">BenchmarkEndToEndSliceByteBuffer</span><span class="op" id="7613319">(</span><span class="ident" id="7613320">b</span>&nbsp;<span class="op" id="7613322">*</span><span class="ident" id="7613323">testing</span><span class="op" id="7613330">.</span><span class="ident" id="7613331">B</span><span class="op" id="7613332">)</span>&nbsp;<span class="op" id="7613334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7613337">benchmarkEndToEnd</span><span class="op" id="7613354">(</span><span class="ident" id="7613355">b</span><span class="op" id="7613356">,</span>&nbsp;<span class="keyword" id="7613358">func</span><span class="op" id="7613362">(</span><span class="op" id="7613363">)</span>&nbsp;<span class="keyword" id="7613365">interface</span><span class="op" id="7613374">{</span><span class="op" id="7613375">}</span>&nbsp;<span class="op" id="7613377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7613381">v</span>&nbsp;<span class="op" id="7613383">:=</span>&nbsp;<span class="op" id="7613386">&amp;</span><span class="ident" id="7613387">Bench</span><span class="op" id="7613392">{</span><span class="num" id="7613393">7</span><span class="op" id="7613394">,</span>&nbsp;<span class="num" id="7613396">3.2</span><span class="op" id="7613399">,</span>&nbsp;<span class="string" id="7613401">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7613418">,</span>&nbsp;<span class="ident" id="7613420">nil</span><span class="op" id="7613423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7613427">Register</span><span class="op" id="7613435">(</span><span class="ident" id="7613436">v</span><span class="op" id="7613437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7613441">arr</span>&nbsp;<span class="op" id="7613445">:=</span>&nbsp;<span class="builtinfunc" id="7613448">make</span><span class="op" id="7613452">(</span><span class="op" id="7613453">[</span><span class="op" id="7613454">]</span><span class="keyword" id="7613455">interface</span><span class="op" id="7613464">{</span><span class="op" id="7613465">}</span><span class="op" id="7613466">,</span>&nbsp;<span class="num" id="7613468">100</span><span class="op" id="7613471">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7613475">for</span>&nbsp;<span class="ident" id="7613479">i</span>&nbsp;<span class="op" id="7613481">:=</span>&nbsp;<span class="keyword" id="7613484">range</span>&nbsp;<span class="ident" id="7613490">arr</span>&nbsp;<span class="op" id="7613494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7613499">arr</span><span class="op" id="7613502">[</span><span class="ident" id="7613503">i</span><span class="op" id="7613504">]</span>&nbsp;<span class="op" id="7613506">=</span>&nbsp;<span class="ident" id="7613508">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7613512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7613516">return</span>&nbsp;<span class="op" id="7613523">&amp;</span><span class="ident" id="7613524">arr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7613529">}</span><span class="op" id="7613530">,</span>&nbsp;<span class="keyword" id="7613532">func</span><span class="op" id="7613536">(</span><span class="op" id="7613537">)</span>&nbsp;<span class="op" id="7613539">(</span><span class="ident" id="7613540">r</span>&nbsp;<span class="ident" id="7613542">io</span><span class="op" id="7613544">.</span><span class="ident" id="7613545">Reader</span><span class="op" id="7613551">,</span>&nbsp;<span class="ident" id="7613553">w</span>&nbsp;<span class="ident" id="7613555">io</span><span class="op" id="7613557">.</span><span class="ident" id="7613558">Writer</span><span class="op" id="7613564">,</span>&nbsp;<span class="ident" id="7613566">err</span>&nbsp;<span class="builtintype" id="7613570">error</span><span class="op" id="7613575">)</span>&nbsp;<span class="op" id="7613577">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7613581">var</span>&nbsp;<span class="ident" id="7613585">buf</span>&nbsp;<span class="ident" id="7613589">bytes</span><span class="op" id="7613594">.</span><span class="ident" id="7613595">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7613604">return</span>&nbsp;<span class="op" id="7613611">&amp;</span><span class="ident" id="7613612">buf</span><span class="op" id="7613615">,</span>&nbsp;<span class="op" id="7613617">&amp;</span><span class="ident" id="7613618">buf</span><span class="op" id="7613621">,</span>&nbsp;<span class="ident" id="7613623">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7613628">}</span><span class="op" id="7613629">)</span><br>
<span class="lineno"></span><span class="op" id="7613631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="7613634">func</span>&nbsp;<span class="ident" id="7613639">TestCountEncodeMallocs</span><span class="op" id="7613661">(</span><span class="ident" id="7613662">t</span>&nbsp;<span class="op" id="7613664">*</span><span class="ident" id="7613665">testing</span><span class="op" id="7613672">.</span><span class="ident" id="7613673">T</span><span class="op" id="7613674">)</span>&nbsp;<span class="op" id="7613676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7613679">if</span>&nbsp;<span class="ident" id="7613682">testing</span><span class="op" id="7613689">.</span><span class="ident" id="7613690">Short</span><span class="op" id="7613695">(</span><span class="op" id="7613696">)</span>&nbsp;<span class="op" id="7613698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7613702">t</span><span class="op" id="7613703">.</span><span class="ident" id="7613704">Skip</span><span class="op" id="7613708">(</span><span class="string" id="7613709">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7613746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7613749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7613752">if</span>&nbsp;<span class="ident" id="7613755">runtime</span><span class="op" id="7613762">.</span><span class="ident" id="7613763">GOMAXPROCS</span><span class="op" id="7613773">(</span><span class="num" id="7613774">0</span><span class="op" id="7613775">)</span>&nbsp;<span class="op" id="7613777">&gt;</span>&nbsp;<span class="num" id="7613779">1</span>&nbsp;<span class="op" id="7613781">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7613785">t</span><span class="op" id="7613786">.</span><span class="ident" id="7613787">Skip</span><span class="op" id="7613791">(</span><span class="string" id="7613792">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7613816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7613819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7613823">const</span>&nbsp;<span class="ident" id="7613829">N</span>&nbsp;<span class="op" id="7613831">=</span>&nbsp;<span class="num" id="7613833">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7613840">var</span>&nbsp;<span class="ident" id="7613844">buf</span>&nbsp;<span class="ident" id="7613848">bytes</span><span class="op" id="7613853">.</span><span class="ident" id="7613854">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7613862">enc</span>&nbsp;<span class="op" id="7613866">:=</span>&nbsp;<span class="ident" id="7613869">NewEncoder</span><span class="op" id="7613879">(</span><span class="op" id="7613880">&amp;</span><span class="ident" id="7613881">buf</span><span class="op" id="7613884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7613887">bench</span>&nbsp;<span class="op" id="7613893">:=</span>&nbsp;<span class="op" id="7613896">&amp;</span><span class="ident" id="7613897">Bench</span><span class="op" id="7613902">{</span><span class="num" id="7613903">7</span><span class="op" id="7613904">,</span>&nbsp;<span class="num" id="7613906">3.2</span><span class="op" id="7613909">,</span>&nbsp;<span class="string" id="7613911">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7613928">,</span>&nbsp;<span class="op" id="7613930">[</span><span class="op" id="7613931">]</span><span class="builtintype" id="7613932">byte</span><span class="op" id="7613936">(</span><span class="string" id="7613937">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7613955">)</span><span class="op" id="7613956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7613960">allocs</span>&nbsp;<span class="op" id="7613967">:=</span>&nbsp;<span class="ident" id="7613970">testing</span><span class="op" id="7613977">.</span><span class="ident" id="7613978">AllocsPerRun</span><span class="op" id="7613990">(</span><span class="ident" id="7613991">N</span><span class="op" id="7613992">,</span>&nbsp;<span class="keyword" id="7613994">func</span><span class="op" id="7613998">(</span><span class="op" id="7613999">)</span>&nbsp;<span class="op" id="7614001">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7614005">err</span>&nbsp;<span class="op" id="7614009">:=</span>&nbsp;<span class="ident" id="7614012">enc</span><span class="op" id="7614015">.</span><span class="ident" id="7614016">Encode</span><span class="op" id="7614022">(</span><span class="ident" id="7614023">bench</span><span class="op" id="7614028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7614032">if</span>&nbsp;<span class="ident" id="7614035">err</span>&nbsp;<span class="op" id="7614039">!=</span>&nbsp;<span class="ident" id="7614042">nil</span>&nbsp;<span class="op" id="7614046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7614051">t</span><span class="op" id="7614052">.</span><span class="ident" id="7614053">Fatal</span><span class="op" id="7614058">(</span><span class="string" id="7614059">&#34;encode:&#34;</span><span class="op" id="7614068">,</span>&nbsp;<span class="ident" id="7614070">err</span><span class="op" id="7614073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7614077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7614080">}</span><span class="op" id="7614081">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7614084">if</span>&nbsp;<span class="ident" id="7614087">allocs</span>&nbsp;<span class="op" id="7614094">!=</span>&nbsp;<span class="num" id="7614097">0</span>&nbsp;<span class="op" id="7614099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7614103">t</span><span class="op" id="7614104">.</span><span class="ident" id="7614105">Fatalf</span><span class="op" id="7614111">(</span><span class="string" id="7614112">&#34;mallocs&nbsp;per&nbsp;encode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;0\n&#34;</span><span class="op" id="7614162">,</span>&nbsp;<span class="ident" id="7614164">allocs</span><span class="op" id="7614170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7614173">}</span><br>
<span class="lineno"></span><span class="op" id="7614175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="7614178">func</span>&nbsp;<span class="ident" id="7614183">TestCountDecodeMallocs</span><span class="op" id="7614205">(</span><span class="ident" id="7614206">t</span>&nbsp;<span class="op" id="7614208">*</span><span class="ident" id="7614209">testing</span><span class="op" id="7614216">.</span><span class="ident" id="7614217">T</span><span class="op" id="7614218">)</span>&nbsp;<span class="op" id="7614220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7614223">if</span>&nbsp;<span class="ident" id="7614226">testing</span><span class="op" id="7614233">.</span><span class="ident" id="7614234">Short</span><span class="op" id="7614239">(</span><span class="op" id="7614240">)</span>&nbsp;<span class="op" id="7614242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7614246">t</span><span class="op" id="7614247">.</span><span class="ident" id="7614248">Skip</span><span class="op" id="7614252">(</span><span class="string" id="7614253">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7614290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7614293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7614296">if</span>&nbsp;<span class="ident" id="7614299">runtime</span><span class="op" id="7614306">.</span><span class="ident" id="7614307">GOMAXPROCS</span><span class="op" id="7614317">(</span><span class="num" id="7614318">0</span><span class="op" id="7614319">)</span>&nbsp;<span class="op" id="7614321">&gt;</span>&nbsp;<span class="num" id="7614323">1</span>&nbsp;<span class="op" id="7614325">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7614329">t</span><span class="op" id="7614330">.</span><span class="ident" id="7614331">Skip</span><span class="op" id="7614335">(</span><span class="string" id="7614336">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7614360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7614363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7614367">const</span>&nbsp;<span class="ident" id="7614373">N</span>&nbsp;<span class="op" id="7614375">=</span>&nbsp;<span class="num" id="7614377">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7614384">var</span>&nbsp;<span class="ident" id="7614388">buf</span>&nbsp;<span class="ident" id="7614392">bytes</span><span class="op" id="7614397">.</span><span class="ident" id="7614398">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7614406">enc</span>&nbsp;<span class="op" id="7614410">:=</span>&nbsp;<span class="ident" id="7614413">NewEncoder</span><span class="op" id="7614423">(</span><span class="op" id="7614424">&amp;</span><span class="ident" id="7614425">buf</span><span class="op" id="7614428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7614431">bench</span>&nbsp;<span class="op" id="7614437">:=</span>&nbsp;<span class="op" id="7614440">&amp;</span><span class="ident" id="7614441">Bench</span><span class="op" id="7614446">{</span><span class="num" id="7614447">7</span><span class="op" id="7614448">,</span>&nbsp;<span class="num" id="7614450">3.2</span><span class="op" id="7614453">,</span>&nbsp;<span class="string" id="7614455">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7614472">,</span>&nbsp;<span class="op" id="7614474">[</span><span class="op" id="7614475">]</span><span class="builtintype" id="7614476">byte</span><span class="op" id="7614480">(</span><span class="string" id="7614481">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7614499">)</span><span class="op" id="7614500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7614504">//&nbsp;Fill&nbsp;the&nbsp;buffer&nbsp;with&nbsp;enough&nbsp;to&nbsp;decode</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7614546">testing</span><span class="op" id="7614553">.</span><span class="ident" id="7614554">AllocsPerRun</span><span class="op" id="7614566">(</span><span class="ident" id="7614567">N</span><span class="op" id="7614568">,</span>&nbsp;<span class="keyword" id="7614570">func</span><span class="op" id="7614574">(</span><span class="op" id="7614575">)</span>&nbsp;<span class="op" id="7614577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7614581">err</span>&nbsp;<span class="op" id="7614585">:=</span>&nbsp;<span class="ident" id="7614588">enc</span><span class="op" id="7614591">.</span><span class="ident" id="7614592">Encode</span><span class="op" id="7614598">(</span><span class="ident" id="7614599">bench</span><span class="op" id="7614604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7614608">if</span>&nbsp;<span class="ident" id="7614611">err</span>&nbsp;<span class="op" id="7614615">!=</span>&nbsp;<span class="ident" id="7614618">nil</span>&nbsp;<span class="op" id="7614622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7614627">t</span><span class="op" id="7614628">.</span><span class="ident" id="7614629">Fatal</span><span class="op" id="7614634">(</span><span class="string" id="7614635">&#34;encode:&#34;</span><span class="op" id="7614644">,</span>&nbsp;<span class="ident" id="7614646">err</span><span class="op" id="7614649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7614653">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7614656">}</span><span class="op" id="7614657">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7614661">dec</span>&nbsp;<span class="op" id="7614665">:=</span>&nbsp;<span class="ident" id="7614668">NewDecoder</span><span class="op" id="7614678">(</span><span class="op" id="7614679">&amp;</span><span class="ident" id="7614680">buf</span><span class="op" id="7614683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7614686">allocs</span>&nbsp;<span class="op" id="7614693">:=</span>&nbsp;<span class="ident" id="7614696">testing</span><span class="op" id="7614703">.</span><span class="ident" id="7614704">AllocsPerRun</span><span class="op" id="7614716">(</span><span class="ident" id="7614717">N</span><span class="op" id="7614718">,</span>&nbsp;<span class="keyword" id="7614720">func</span><span class="op" id="7614724">(</span><span class="op" id="7614725">)</span>&nbsp;<span class="op" id="7614727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7614731">*</span><span class="ident" id="7614732">bench</span>&nbsp;<span class="op" id="7614738">=</span>&nbsp;<span class="ident" id="7614740">Bench</span><span class="op" id="7614745">{</span><span class="op" id="7614746">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7614750">err</span>&nbsp;<span class="op" id="7614754">:=</span>&nbsp;<span class="ident" id="7614757">dec</span><span class="op" id="7614760">.</span><span class="ident" id="7614761">Decode</span><span class="op" id="7614767">(</span><span class="op" id="7614768">&amp;</span><span class="ident" id="7614769">bench</span><span class="op" id="7614774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7614778">if</span>&nbsp;<span class="ident" id="7614781">err</span>&nbsp;<span class="op" id="7614785">!=</span>&nbsp;<span class="ident" id="7614788">nil</span>&nbsp;<span class="op" id="7614792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7614797">t</span><span class="op" id="7614798">.</span><span class="ident" id="7614799">Fatal</span><span class="op" id="7614804">(</span><span class="string" id="7614805">&#34;decode:&#34;</span><span class="op" id="7614814">,</span>&nbsp;<span class="ident" id="7614816">err</span><span class="op" id="7614819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7614823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7614826">}</span><span class="op" id="7614827">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7614830">if</span>&nbsp;<span class="ident" id="7614833">allocs</span>&nbsp;<span class="op" id="7614840">!=</span>&nbsp;<span class="num" id="7614843">4</span>&nbsp;<span class="op" id="7614845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7614849">t</span><span class="op" id="7614850">.</span><span class="ident" id="7614851">Fatalf</span><span class="op" id="7614857">(</span><span class="string" id="7614858">&#34;mallocs&nbsp;per&nbsp;decode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;4\n&#34;</span><span class="op" id="7614908">,</span>&nbsp;<span class="ident" id="7614910">allocs</span><span class="op" id="7614916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7614919">}</span><br>
<span class="lineno"></span><span class="op" id="7614921">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7614924">func</span>&nbsp;<span class="ident" id="7614929">BenchmarkEncodeComplex128Slice</span><span class="op" id="7614959">(</span><span class="ident" id="7614960">b</span>&nbsp;<span class="op" id="7614962">*</span><span class="ident" id="7614963">testing</span><span class="op" id="7614970">.</span><span class="ident" id="7614971">B</span><span class="op" id="7614972">)</span>&nbsp;<span class="op" id="7614974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7614977">var</span>&nbsp;<span class="ident" id="7614981">buf</span>&nbsp;<span class="ident" id="7614985">bytes</span><span class="op" id="7614990">.</span><span class="ident" id="7614991">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7614999">enc</span>&nbsp;<span class="op" id="7615003">:=</span>&nbsp;<span class="ident" id="7615006">NewEncoder</span><span class="op" id="7615016">(</span><span class="op" id="7615017">&amp;</span><span class="ident" id="7615018">buf</span><span class="op" id="7615021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615024">a</span>&nbsp;<span class="op" id="7615026">:=</span>&nbsp;<span class="builtinfunc" id="7615029">make</span><span class="op" id="7615033">(</span><span class="op" id="7615034">[</span><span class="op" id="7615035">]</span><span class="builtintype" id="7615036">complex128</span><span class="op" id="7615046">,</span>&nbsp;<span class="num" id="7615048">1000</span><span class="op" id="7615052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7615055">for</span>&nbsp;<span class="ident" id="7615059">i</span>&nbsp;<span class="op" id="7615061">:=</span>&nbsp;<span class="keyword" id="7615064">range</span>&nbsp;<span class="ident" id="7615070">a</span>&nbsp;<span class="op" id="7615072">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615076">a</span><span class="op" id="7615077">[</span><span class="ident" id="7615078">i</span><span class="op" id="7615079">]</span>&nbsp;<span class="op" id="7615081">=</span>&nbsp;<span class="num" id="7615083">1.2</span>&nbsp;<span class="op" id="7615087">+</span>&nbsp;<span class="num" id="7615089">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7615095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615098">b</span><span class="op" id="7615099">.</span><span class="ident" id="7615100">ResetTimer</span><span class="op" id="7615110">(</span><span class="op" id="7615111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7615114">for</span>&nbsp;<span class="ident" id="7615118">i</span>&nbsp;<span class="op" id="7615120">:=</span>&nbsp;<span class="num" id="7615123">0</span><span class="op" id="7615124">;</span>&nbsp;<span class="ident" id="7615126">i</span>&nbsp;<span class="op" id="7615128">&lt;</span>&nbsp;<span class="ident" id="7615130">b</span><span class="op" id="7615131">.</span><span class="ident" id="7615132">N</span><span class="op" id="7615133">;</span>&nbsp;<span class="ident" id="7615135">i</span><span class="op" id="7615136">++</span>&nbsp;<span class="op" id="7615139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615143">buf</span><span class="op" id="7615146">.</span><span class="ident" id="7615147">Reset</span><span class="op" id="7615152">(</span><span class="op" id="7615153">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615157">err</span>&nbsp;<span class="op" id="7615161">:=</span>&nbsp;<span class="ident" id="7615164">enc</span><span class="op" id="7615167">.</span><span class="ident" id="7615168">Encode</span><span class="op" id="7615174">(</span><span class="ident" id="7615175">a</span><span class="op" id="7615176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7615180">if</span>&nbsp;<span class="ident" id="7615183">err</span>&nbsp;<span class="op" id="7615187">!=</span>&nbsp;<span class="ident" id="7615190">nil</span>&nbsp;<span class="op" id="7615194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615199">b</span><span class="op" id="7615200">.</span><span class="ident" id="7615201">Fatal</span><span class="op" id="7615206">(</span><span class="ident" id="7615207">err</span><span class="op" id="7615210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7615214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7615217">}</span><br>
<span class="lineno">150</span><span class="op" id="7615219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7615222">func</span>&nbsp;<span class="ident" id="7615227">BenchmarkEncodeFloat64Slice</span><span class="op" id="7615254">(</span><span class="ident" id="7615255">b</span>&nbsp;<span class="op" id="7615257">*</span><span class="ident" id="7615258">testing</span><span class="op" id="7615265">.</span><span class="ident" id="7615266">B</span><span class="op" id="7615267">)</span>&nbsp;<span class="op" id="7615269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7615272">var</span>&nbsp;<span class="ident" id="7615276">buf</span>&nbsp;<span class="ident" id="7615280">bytes</span><span class="op" id="7615285">.</span><span class="ident" id="7615286">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615294">enc</span>&nbsp;<span class="op" id="7615298">:=</span>&nbsp;<span class="ident" id="7615301">NewEncoder</span><span class="op" id="7615311">(</span><span class="op" id="7615312">&amp;</span><span class="ident" id="7615313">buf</span><span class="op" id="7615316">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615319">a</span>&nbsp;<span class="op" id="7615321">:=</span>&nbsp;<span class="builtinfunc" id="7615324">make</span><span class="op" id="7615328">(</span><span class="op" id="7615329">[</span><span class="op" id="7615330">]</span><span class="builtintype" id="7615331">float64</span><span class="op" id="7615338">,</span>&nbsp;<span class="num" id="7615340">1000</span><span class="op" id="7615344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7615347">for</span>&nbsp;<span class="ident" id="7615351">i</span>&nbsp;<span class="op" id="7615353">:=</span>&nbsp;<span class="keyword" id="7615356">range</span>&nbsp;<span class="ident" id="7615362">a</span>&nbsp;<span class="op" id="7615364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615368">a</span><span class="op" id="7615369">[</span><span class="ident" id="7615370">i</span><span class="op" id="7615371">]</span>&nbsp;<span class="op" id="7615373">=</span>&nbsp;<span class="num" id="7615375">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7615383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615386">b</span><span class="op" id="7615387">.</span><span class="ident" id="7615388">ResetTimer</span><span class="op" id="7615398">(</span><span class="op" id="7615399">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7615402">for</span>&nbsp;<span class="ident" id="7615406">i</span>&nbsp;<span class="op" id="7615408">:=</span>&nbsp;<span class="num" id="7615411">0</span><span class="op" id="7615412">;</span>&nbsp;<span class="ident" id="7615414">i</span>&nbsp;<span class="op" id="7615416">&lt;</span>&nbsp;<span class="ident" id="7615418">b</span><span class="op" id="7615419">.</span><span class="ident" id="7615420">N</span><span class="op" id="7615421">;</span>&nbsp;<span class="ident" id="7615423">i</span><span class="op" id="7615424">++</span>&nbsp;<span class="op" id="7615427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615431">buf</span><span class="op" id="7615434">.</span><span class="ident" id="7615435">Reset</span><span class="op" id="7615440">(</span><span class="op" id="7615441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615445">err</span>&nbsp;<span class="op" id="7615449">:=</span>&nbsp;<span class="ident" id="7615452">enc</span><span class="op" id="7615455">.</span><span class="ident" id="7615456">Encode</span><span class="op" id="7615462">(</span><span class="ident" id="7615463">a</span><span class="op" id="7615464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7615468">if</span>&nbsp;<span class="ident" id="7615471">err</span>&nbsp;<span class="op" id="7615475">!=</span>&nbsp;<span class="ident" id="7615478">nil</span>&nbsp;<span class="op" id="7615482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615487">b</span><span class="op" id="7615488">.</span><span class="ident" id="7615489">Fatal</span><span class="op" id="7615494">(</span><span class="ident" id="7615495">err</span><span class="op" id="7615498">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7615502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7615505">}</span><br>
<span class="lineno"></span><span class="op" id="7615507">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7615510">func</span>&nbsp;<span class="ident" id="7615515">BenchmarkEncodeInt32Slice</span><span class="op" id="7615540">(</span><span class="ident" id="7615541">b</span>&nbsp;<span class="op" id="7615543">*</span><span class="ident" id="7615544">testing</span><span class="op" id="7615551">.</span><span class="ident" id="7615552">B</span><span class="op" id="7615553">)</span>&nbsp;<span class="op" id="7615555">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7615558">var</span>&nbsp;<span class="ident" id="7615562">buf</span>&nbsp;<span class="ident" id="7615566">bytes</span><span class="op" id="7615571">.</span><span class="ident" id="7615572">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615580">enc</span>&nbsp;<span class="op" id="7615584">:=</span>&nbsp;<span class="ident" id="7615587">NewEncoder</span><span class="op" id="7615597">(</span><span class="op" id="7615598">&amp;</span><span class="ident" id="7615599">buf</span><span class="op" id="7615602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615605">a</span>&nbsp;<span class="op" id="7615607">:=</span>&nbsp;<span class="builtinfunc" id="7615610">make</span><span class="op" id="7615614">(</span><span class="op" id="7615615">[</span><span class="op" id="7615616">]</span><span class="builtintype" id="7615617">int32</span><span class="op" id="7615622">,</span>&nbsp;<span class="num" id="7615624">1000</span><span class="op" id="7615628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7615631">for</span>&nbsp;<span class="ident" id="7615635">i</span>&nbsp;<span class="op" id="7615637">:=</span>&nbsp;<span class="keyword" id="7615640">range</span>&nbsp;<span class="ident" id="7615646">a</span>&nbsp;<span class="op" id="7615648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615652">a</span><span class="op" id="7615653">[</span><span class="ident" id="7615654">i</span><span class="op" id="7615655">]</span>&nbsp;<span class="op" id="7615657">=</span>&nbsp;<span class="num" id="7615659">1234</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7615665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615668">b</span><span class="op" id="7615669">.</span><span class="ident" id="7615670">ResetTimer</span><span class="op" id="7615680">(</span><span class="op" id="7615681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7615684">for</span>&nbsp;<span class="ident" id="7615688">i</span>&nbsp;<span class="op" id="7615690">:=</span>&nbsp;<span class="num" id="7615693">0</span><span class="op" id="7615694">;</span>&nbsp;<span class="ident" id="7615696">i</span>&nbsp;<span class="op" id="7615698">&lt;</span>&nbsp;<span class="ident" id="7615700">b</span><span class="op" id="7615701">.</span><span class="ident" id="7615702">N</span><span class="op" id="7615703">;</span>&nbsp;<span class="ident" id="7615705">i</span><span class="op" id="7615706">++</span>&nbsp;<span class="op" id="7615709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615713">buf</span><span class="op" id="7615716">.</span><span class="ident" id="7615717">Reset</span><span class="op" id="7615722">(</span><span class="op" id="7615723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615727">err</span>&nbsp;<span class="op" id="7615731">:=</span>&nbsp;<span class="ident" id="7615734">enc</span><span class="op" id="7615737">.</span><span class="ident" id="7615738">Encode</span><span class="op" id="7615744">(</span><span class="ident" id="7615745">a</span><span class="op" id="7615746">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7615750">if</span>&nbsp;<span class="ident" id="7615753">err</span>&nbsp;<span class="op" id="7615757">!=</span>&nbsp;<span class="ident" id="7615760">nil</span>&nbsp;<span class="op" id="7615764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615769">b</span><span class="op" id="7615770">.</span><span class="ident" id="7615771">Fatal</span><span class="op" id="7615776">(</span><span class="ident" id="7615777">err</span><span class="op" id="7615780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7615784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7615787">}</span><br>
<span class="lineno"></span><span class="op" id="7615789">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="7615792">func</span>&nbsp;<span class="ident" id="7615797">BenchmarkEncodeStringSlice</span><span class="op" id="7615823">(</span><span class="ident" id="7615824">b</span>&nbsp;<span class="op" id="7615826">*</span><span class="ident" id="7615827">testing</span><span class="op" id="7615834">.</span><span class="ident" id="7615835">B</span><span class="op" id="7615836">)</span>&nbsp;<span class="op" id="7615838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7615841">var</span>&nbsp;<span class="ident" id="7615845">buf</span>&nbsp;<span class="ident" id="7615849">bytes</span><span class="op" id="7615854">.</span><span class="ident" id="7615855">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615863">enc</span>&nbsp;<span class="op" id="7615867">:=</span>&nbsp;<span class="ident" id="7615870">NewEncoder</span><span class="op" id="7615880">(</span><span class="op" id="7615881">&amp;</span><span class="ident" id="7615882">buf</span><span class="op" id="7615885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615888">a</span>&nbsp;<span class="op" id="7615890">:=</span>&nbsp;<span class="builtinfunc" id="7615893">make</span><span class="op" id="7615897">(</span><span class="op" id="7615898">[</span><span class="op" id="7615899">]</span><span class="builtintype" id="7615900">string</span><span class="op" id="7615906">,</span>&nbsp;<span class="num" id="7615908">1000</span><span class="op" id="7615912">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7615915">for</span>&nbsp;<span class="ident" id="7615919">i</span>&nbsp;<span class="op" id="7615921">:=</span>&nbsp;<span class="keyword" id="7615924">range</span>&nbsp;<span class="ident" id="7615930">a</span>&nbsp;<span class="op" id="7615932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615936">a</span><span class="op" id="7615937">[</span><span class="ident" id="7615938">i</span><span class="op" id="7615939">]</span>&nbsp;<span class="op" id="7615941">=</span>&nbsp;<span class="string" id="7615943">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7615962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7615965">b</span><span class="op" id="7615966">.</span><span class="ident" id="7615967">ResetTimer</span><span class="op" id="7615977">(</span><span class="op" id="7615978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7615981">for</span>&nbsp;<span class="ident" id="7615985">i</span>&nbsp;<span class="op" id="7615987">:=</span>&nbsp;<span class="num" id="7615990">0</span><span class="op" id="7615991">;</span>&nbsp;<span class="ident" id="7615993">i</span>&nbsp;<span class="op" id="7615995">&lt;</span>&nbsp;<span class="ident" id="7615997">b</span><span class="op" id="7615998">.</span><span class="ident" id="7615999">N</span><span class="op" id="7616000">;</span>&nbsp;<span class="ident" id="7616002">i</span><span class="op" id="7616003">++</span>&nbsp;<span class="op" id="7616006">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616010">buf</span><span class="op" id="7616013">.</span><span class="ident" id="7616014">Reset</span><span class="op" id="7616019">(</span><span class="op" id="7616020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616024">err</span>&nbsp;<span class="op" id="7616028">:=</span>&nbsp;<span class="ident" id="7616031">enc</span><span class="op" id="7616034">.</span><span class="ident" id="7616035">Encode</span><span class="op" id="7616041">(</span><span class="ident" id="7616042">a</span><span class="op" id="7616043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7616047">if</span>&nbsp;<span class="ident" id="7616050">err</span>&nbsp;<span class="op" id="7616054">!=</span>&nbsp;<span class="ident" id="7616057">nil</span>&nbsp;<span class="op" id="7616061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616066">b</span><span class="op" id="7616067">.</span><span class="ident" id="7616068">Fatal</span><span class="op" id="7616073">(</span><span class="ident" id="7616074">err</span><span class="op" id="7616077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7616081">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7616084">}</span><br>
<span class="lineno"></span><span class="op" id="7616086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7616089">//&nbsp;benchmarkBuf&nbsp;is&nbsp;a&nbsp;read&nbsp;buffer&nbsp;we&nbsp;can&nbsp;reset</span><br>
<span class="lineno"></span><span class="keyword" id="7616135">type</span>&nbsp;<span class="ident" id="7616140">benchmarkBuf</span>&nbsp;<span class="keyword" id="7616153">struct</span>&nbsp;<span class="op" id="7616160">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616163">offset</span>&nbsp;<span class="builtintype" id="7616170">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616175">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7616182">[</span><span class="op" id="7616183">]</span><span class="builtintype" id="7616184">byte</span><br>
<span class="lineno"></span><span class="op" id="7616189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7616192">func</span>&nbsp;<span class="op" id="7616197">(</span><span class="ident" id="7616198">b</span>&nbsp;<span class="op" id="7616200">*</span><span class="ident" id="7616201">benchmarkBuf</span><span class="op" id="7616213">)</span>&nbsp;<span class="ident" id="7616215">Read</span><span class="op" id="7616219">(</span><span class="ident" id="7616220">p</span>&nbsp;<span class="op" id="7616222">[</span><span class="op" id="7616223">]</span><span class="builtintype" id="7616224">byte</span><span class="op" id="7616228">)</span>&nbsp;<span class="op" id="7616230">(</span><span class="ident" id="7616231">n</span>&nbsp;<span class="builtintype" id="7616233">int</span><span class="op" id="7616236">,</span>&nbsp;<span class="ident" id="7616238">err</span>&nbsp;<span class="builtintype" id="7616242">error</span><span class="op" id="7616247">)</span>&nbsp;<span class="op" id="7616249">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616252">n</span>&nbsp;<span class="op" id="7616254">=</span>&nbsp;<span class="builtinfunc" id="7616256">copy</span><span class="op" id="7616260">(</span><span class="ident" id="7616261">p</span><span class="op" id="7616262">,</span>&nbsp;<span class="ident" id="7616264">b</span><span class="op" id="7616265">.</span><span class="ident" id="7616266">data</span><span class="op" id="7616270">[</span><span class="ident" id="7616271">b</span><span class="op" id="7616272">.</span><span class="ident" id="7616273">offset</span><span class="op" id="7616279">:</span><span class="op" id="7616280">]</span><span class="op" id="7616281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7616284">if</span>&nbsp;<span class="ident" id="7616287">n</span>&nbsp;<span class="op" id="7616289">==</span>&nbsp;<span class="num" id="7616292">0</span>&nbsp;<span class="op" id="7616294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7616298">return</span>&nbsp;<span class="num" id="7616305">0</span><span class="op" id="7616306">,</span>&nbsp;<span class="ident" id="7616308">io</span><span class="op" id="7616310">.</span><span class="ident" id="7616311">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7616316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616319">b</span><span class="op" id="7616320">.</span><span class="ident" id="7616321">offset</span>&nbsp;<span class="op" id="7616328">+=</span>&nbsp;<span class="ident" id="7616331">n</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7616334">return</span><br>
<span class="lineno"></span><span class="op" id="7616341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7616344">func</span>&nbsp;<span class="op" id="7616349">(</span><span class="ident" id="7616350">b</span>&nbsp;<span class="op" id="7616352">*</span><span class="ident" id="7616353">benchmarkBuf</span><span class="op" id="7616365">)</span>&nbsp;<span class="ident" id="7616367">ReadByte</span><span class="op" id="7616375">(</span><span class="op" id="7616376">)</span>&nbsp;<span class="op" id="7616378">(</span><span class="ident" id="7616379">c</span>&nbsp;<span class="builtintype" id="7616381">byte</span><span class="op" id="7616385">,</span>&nbsp;<span class="ident" id="7616387">err</span>&nbsp;<span class="builtintype" id="7616391">error</span><span class="op" id="7616396">)</span>&nbsp;<span class="op" id="7616398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7616401">if</span>&nbsp;<span class="ident" id="7616404">b</span><span class="op" id="7616405">.</span><span class="ident" id="7616406">offset</span>&nbsp;<span class="op" id="7616413">&gt;=</span>&nbsp;<span class="builtinfunc" id="7616416">len</span><span class="op" id="7616419">(</span><span class="ident" id="7616420">b</span><span class="op" id="7616421">.</span><span class="ident" id="7616422">data</span><span class="op" id="7616426">)</span>&nbsp;<span class="op" id="7616428">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7616432">return</span>&nbsp;<span class="num" id="7616439">0</span><span class="op" id="7616440">,</span>&nbsp;<span class="ident" id="7616442">io</span><span class="op" id="7616444">.</span><span class="ident" id="7616445">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7616450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616453">c</span>&nbsp;<span class="op" id="7616455">=</span>&nbsp;<span class="ident" id="7616457">b</span><span class="op" id="7616458">.</span><span class="ident" id="7616459">data</span><span class="op" id="7616463">[</span><span class="ident" id="7616464">b</span><span class="op" id="7616465">.</span><span class="ident" id="7616466">offset</span><span class="op" id="7616472">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616475">b</span><span class="op" id="7616476">.</span><span class="ident" id="7616477">offset</span><span class="op" id="7616483">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7616487">return</span><br>
<span class="lineno">225</span><span class="op" id="7616494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7616497">func</span>&nbsp;<span class="op" id="7616502">(</span><span class="ident" id="7616503">b</span>&nbsp;<span class="op" id="7616505">*</span><span class="ident" id="7616506">benchmarkBuf</span><span class="op" id="7616518">)</span>&nbsp;<span class="ident" id="7616520">reset</span><span class="op" id="7616525">(</span><span class="op" id="7616526">)</span>&nbsp;<span class="op" id="7616528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616531">b</span><span class="op" id="7616532">.</span><span class="ident" id="7616533">offset</span>&nbsp;<span class="op" id="7616540">=</span>&nbsp;<span class="num" id="7616542">0</span><br>
<span class="lineno"></span><span class="op" id="7616544">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="7616547">func</span>&nbsp;<span class="ident" id="7616552">BenchmarkDecodeComplex128Slice</span><span class="op" id="7616582">(</span><span class="ident" id="7616583">b</span>&nbsp;<span class="op" id="7616585">*</span><span class="ident" id="7616586">testing</span><span class="op" id="7616593">.</span><span class="ident" id="7616594">B</span><span class="op" id="7616595">)</span>&nbsp;<span class="op" id="7616597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7616600">var</span>&nbsp;<span class="ident" id="7616604">buf</span>&nbsp;<span class="ident" id="7616608">bytes</span><span class="op" id="7616613">.</span><span class="ident" id="7616614">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616622">enc</span>&nbsp;<span class="op" id="7616626">:=</span>&nbsp;<span class="ident" id="7616629">NewEncoder</span><span class="op" id="7616639">(</span><span class="op" id="7616640">&amp;</span><span class="ident" id="7616641">buf</span><span class="op" id="7616644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616647">a</span>&nbsp;<span class="op" id="7616649">:=</span>&nbsp;<span class="builtinfunc" id="7616652">make</span><span class="op" id="7616656">(</span><span class="op" id="7616657">[</span><span class="op" id="7616658">]</span><span class="builtintype" id="7616659">complex128</span><span class="op" id="7616669">,</span>&nbsp;<span class="num" id="7616671">1000</span><span class="op" id="7616675">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7616678">for</span>&nbsp;<span class="ident" id="7616682">i</span>&nbsp;<span class="op" id="7616684">:=</span>&nbsp;<span class="keyword" id="7616687">range</span>&nbsp;<span class="ident" id="7616693">a</span>&nbsp;<span class="op" id="7616695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616699">a</span><span class="op" id="7616700">[</span><span class="ident" id="7616701">i</span><span class="op" id="7616702">]</span>&nbsp;<span class="op" id="7616704">=</span>&nbsp;<span class="num" id="7616706">1.2</span>&nbsp;<span class="op" id="7616710">+</span>&nbsp;<span class="num" id="7616712">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7616718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616721">err</span>&nbsp;<span class="op" id="7616725">:=</span>&nbsp;<span class="ident" id="7616728">enc</span><span class="op" id="7616731">.</span><span class="ident" id="7616732">Encode</span><span class="op" id="7616738">(</span><span class="ident" id="7616739">a</span><span class="op" id="7616740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7616743">if</span>&nbsp;<span class="ident" id="7616746">err</span>&nbsp;<span class="op" id="7616750">!=</span>&nbsp;<span class="ident" id="7616753">nil</span>&nbsp;<span class="op" id="7616757">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616761">b</span><span class="op" id="7616762">.</span><span class="ident" id="7616763">Fatal</span><span class="op" id="7616768">(</span><span class="ident" id="7616769">err</span><span class="op" id="7616772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7616775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616778">x</span>&nbsp;<span class="op" id="7616780">:=</span>&nbsp;<span class="builtinfunc" id="7616783">make</span><span class="op" id="7616787">(</span><span class="op" id="7616788">[</span><span class="op" id="7616789">]</span><span class="builtintype" id="7616790">complex128</span><span class="op" id="7616800">,</span>&nbsp;<span class="num" id="7616802">1000</span><span class="op" id="7616806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616809">bbuf</span>&nbsp;<span class="op" id="7616814">:=</span>&nbsp;<span class="ident" id="7616817">benchmarkBuf</span><span class="op" id="7616829">{</span><span class="ident" id="7616830">data</span><span class="op" id="7616834">:</span>&nbsp;<span class="ident" id="7616836">buf</span><span class="op" id="7616839">.</span><span class="ident" id="7616840">Bytes</span><span class="op" id="7616845">(</span><span class="op" id="7616846">)</span><span class="op" id="7616847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616850">b</span><span class="op" id="7616851">.</span><span class="ident" id="7616852">ResetTimer</span><span class="op" id="7616862">(</span><span class="op" id="7616863">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7616866">for</span>&nbsp;<span class="ident" id="7616870">i</span>&nbsp;<span class="op" id="7616872">:=</span>&nbsp;<span class="num" id="7616875">0</span><span class="op" id="7616876">;</span>&nbsp;<span class="ident" id="7616878">i</span>&nbsp;<span class="op" id="7616880">&lt;</span>&nbsp;<span class="ident" id="7616882">b</span><span class="op" id="7616883">.</span><span class="ident" id="7616884">N</span><span class="op" id="7616885">;</span>&nbsp;<span class="ident" id="7616887">i</span><span class="op" id="7616888">++</span>&nbsp;<span class="op" id="7616891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616895">bbuf</span><span class="op" id="7616899">.</span><span class="ident" id="7616900">reset</span><span class="op" id="7616905">(</span><span class="op" id="7616906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616910">dec</span>&nbsp;<span class="op" id="7616914">:=</span>&nbsp;<span class="ident" id="7616917">NewDecoder</span><span class="op" id="7616927">(</span><span class="op" id="7616928">&amp;</span><span class="ident" id="7616929">bbuf</span><span class="op" id="7616933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616937">err</span>&nbsp;<span class="op" id="7616941">:=</span>&nbsp;<span class="ident" id="7616944">dec</span><span class="op" id="7616947">.</span><span class="ident" id="7616948">Decode</span><span class="op" id="7616954">(</span><span class="op" id="7616955">&amp;</span><span class="ident" id="7616956">x</span><span class="op" id="7616957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7616961">if</span>&nbsp;<span class="ident" id="7616964">err</span>&nbsp;<span class="op" id="7616968">!=</span>&nbsp;<span class="ident" id="7616971">nil</span>&nbsp;<span class="op" id="7616975">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7616980">b</span><span class="op" id="7616981">.</span><span class="ident" id="7616982">Fatal</span><span class="op" id="7616987">(</span><span class="ident" id="7616988">i</span><span class="op" id="7616989">,</span>&nbsp;<span class="ident" id="7616991">err</span><span class="op" id="7616994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7616998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7617001">}</span><br>
<span class="lineno"></span><span class="op" id="7617003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="7617006">func</span>&nbsp;<span class="ident" id="7617011">BenchmarkDecodeFloat64Slice</span><span class="op" id="7617038">(</span><span class="ident" id="7617039">b</span>&nbsp;<span class="op" id="7617041">*</span><span class="ident" id="7617042">testing</span><span class="op" id="7617049">.</span><span class="ident" id="7617050">B</span><span class="op" id="7617051">)</span>&nbsp;<span class="op" id="7617053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7617056">var</span>&nbsp;<span class="ident" id="7617060">buf</span>&nbsp;<span class="ident" id="7617064">bytes</span><span class="op" id="7617069">.</span><span class="ident" id="7617070">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617078">enc</span>&nbsp;<span class="op" id="7617082">:=</span>&nbsp;<span class="ident" id="7617085">NewEncoder</span><span class="op" id="7617095">(</span><span class="op" id="7617096">&amp;</span><span class="ident" id="7617097">buf</span><span class="op" id="7617100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617103">a</span>&nbsp;<span class="op" id="7617105">:=</span>&nbsp;<span class="builtinfunc" id="7617108">make</span><span class="op" id="7617112">(</span><span class="op" id="7617113">[</span><span class="op" id="7617114">]</span><span class="builtintype" id="7617115">float64</span><span class="op" id="7617122">,</span>&nbsp;<span class="num" id="7617124">1000</span><span class="op" id="7617128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7617131">for</span>&nbsp;<span class="ident" id="7617135">i</span>&nbsp;<span class="op" id="7617137">:=</span>&nbsp;<span class="keyword" id="7617140">range</span>&nbsp;<span class="ident" id="7617146">a</span>&nbsp;<span class="op" id="7617148">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617152">a</span><span class="op" id="7617153">[</span><span class="ident" id="7617154">i</span><span class="op" id="7617155">]</span>&nbsp;<span class="op" id="7617157">=</span>&nbsp;<span class="num" id="7617159">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7617167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617170">err</span>&nbsp;<span class="op" id="7617174">:=</span>&nbsp;<span class="ident" id="7617177">enc</span><span class="op" id="7617180">.</span><span class="ident" id="7617181">Encode</span><span class="op" id="7617187">(</span><span class="ident" id="7617188">a</span><span class="op" id="7617189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7617192">if</span>&nbsp;<span class="ident" id="7617195">err</span>&nbsp;<span class="op" id="7617199">!=</span>&nbsp;<span class="ident" id="7617202">nil</span>&nbsp;<span class="op" id="7617206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617210">b</span><span class="op" id="7617211">.</span><span class="ident" id="7617212">Fatal</span><span class="op" id="7617217">(</span><span class="ident" id="7617218">err</span><span class="op" id="7617221">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7617224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617227">x</span>&nbsp;<span class="op" id="7617229">:=</span>&nbsp;<span class="builtinfunc" id="7617232">make</span><span class="op" id="7617236">(</span><span class="op" id="7617237">[</span><span class="op" id="7617238">]</span><span class="builtintype" id="7617239">float64</span><span class="op" id="7617246">,</span>&nbsp;<span class="num" id="7617248">1000</span><span class="op" id="7617252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617255">bbuf</span>&nbsp;<span class="op" id="7617260">:=</span>&nbsp;<span class="ident" id="7617263">benchmarkBuf</span><span class="op" id="7617275">{</span><span class="ident" id="7617276">data</span><span class="op" id="7617280">:</span>&nbsp;<span class="ident" id="7617282">buf</span><span class="op" id="7617285">.</span><span class="ident" id="7617286">Bytes</span><span class="op" id="7617291">(</span><span class="op" id="7617292">)</span><span class="op" id="7617293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617296">b</span><span class="op" id="7617297">.</span><span class="ident" id="7617298">ResetTimer</span><span class="op" id="7617308">(</span><span class="op" id="7617309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7617312">for</span>&nbsp;<span class="ident" id="7617316">i</span>&nbsp;<span class="op" id="7617318">:=</span>&nbsp;<span class="num" id="7617321">0</span><span class="op" id="7617322">;</span>&nbsp;<span class="ident" id="7617324">i</span>&nbsp;<span class="op" id="7617326">&lt;</span>&nbsp;<span class="ident" id="7617328">b</span><span class="op" id="7617329">.</span><span class="ident" id="7617330">N</span><span class="op" id="7617331">;</span>&nbsp;<span class="ident" id="7617333">i</span><span class="op" id="7617334">++</span>&nbsp;<span class="op" id="7617337">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617341">bbuf</span><span class="op" id="7617345">.</span><span class="ident" id="7617346">reset</span><span class="op" id="7617351">(</span><span class="op" id="7617352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617356">dec</span>&nbsp;<span class="op" id="7617360">:=</span>&nbsp;<span class="ident" id="7617363">NewDecoder</span><span class="op" id="7617373">(</span><span class="op" id="7617374">&amp;</span><span class="ident" id="7617375">bbuf</span><span class="op" id="7617379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617383">err</span>&nbsp;<span class="op" id="7617387">:=</span>&nbsp;<span class="ident" id="7617390">dec</span><span class="op" id="7617393">.</span><span class="ident" id="7617394">Decode</span><span class="op" id="7617400">(</span><span class="op" id="7617401">&amp;</span><span class="ident" id="7617402">x</span><span class="op" id="7617403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7617407">if</span>&nbsp;<span class="ident" id="7617410">err</span>&nbsp;<span class="op" id="7617414">!=</span>&nbsp;<span class="ident" id="7617417">nil</span>&nbsp;<span class="op" id="7617421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617426">b</span><span class="op" id="7617427">.</span><span class="ident" id="7617428">Fatal</span><span class="op" id="7617433">(</span><span class="ident" id="7617434">i</span><span class="op" id="7617435">,</span>&nbsp;<span class="ident" id="7617437">err</span><span class="op" id="7617440">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7617444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7617447">}</span><br>
<span class="lineno"></span><span class="op" id="7617449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7617452">func</span>&nbsp;<span class="ident" id="7617457">BenchmarkDecodeInt32Slice</span><span class="op" id="7617482">(</span><span class="ident" id="7617483">b</span>&nbsp;<span class="op" id="7617485">*</span><span class="ident" id="7617486">testing</span><span class="op" id="7617493">.</span><span class="ident" id="7617494">B</span><span class="op" id="7617495">)</span>&nbsp;<span class="op" id="7617497">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7617500">var</span>&nbsp;<span class="ident" id="7617504">buf</span>&nbsp;<span class="ident" id="7617508">bytes</span><span class="op" id="7617513">.</span><span class="ident" id="7617514">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617522">enc</span>&nbsp;<span class="op" id="7617526">:=</span>&nbsp;<span class="ident" id="7617529">NewEncoder</span><span class="op" id="7617539">(</span><span class="op" id="7617540">&amp;</span><span class="ident" id="7617541">buf</span><span class="op" id="7617544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617547">a</span>&nbsp;<span class="op" id="7617549">:=</span>&nbsp;<span class="builtinfunc" id="7617552">make</span><span class="op" id="7617556">(</span><span class="op" id="7617557">[</span><span class="op" id="7617558">]</span><span class="builtintype" id="7617559">int32</span><span class="op" id="7617564">,</span>&nbsp;<span class="num" id="7617566">1000</span><span class="op" id="7617570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7617573">for</span>&nbsp;<span class="ident" id="7617577">i</span>&nbsp;<span class="op" id="7617579">:=</span>&nbsp;<span class="keyword" id="7617582">range</span>&nbsp;<span class="ident" id="7617588">a</span>&nbsp;<span class="op" id="7617590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617594">a</span><span class="op" id="7617595">[</span><span class="ident" id="7617596">i</span><span class="op" id="7617597">]</span>&nbsp;<span class="op" id="7617599">=</span>&nbsp;<span class="num" id="7617601">1234</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7617607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617610">err</span>&nbsp;<span class="op" id="7617614">:=</span>&nbsp;<span class="ident" id="7617617">enc</span><span class="op" id="7617620">.</span><span class="ident" id="7617621">Encode</span><span class="op" id="7617627">(</span><span class="ident" id="7617628">a</span><span class="op" id="7617629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7617632">if</span>&nbsp;<span class="ident" id="7617635">err</span>&nbsp;<span class="op" id="7617639">!=</span>&nbsp;<span class="ident" id="7617642">nil</span>&nbsp;<span class="op" id="7617646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617650">b</span><span class="op" id="7617651">.</span><span class="ident" id="7617652">Fatal</span><span class="op" id="7617657">(</span><span class="ident" id="7617658">err</span><span class="op" id="7617661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7617664">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617667">x</span>&nbsp;<span class="op" id="7617669">:=</span>&nbsp;<span class="builtinfunc" id="7617672">make</span><span class="op" id="7617676">(</span><span class="op" id="7617677">[</span><span class="op" id="7617678">]</span><span class="builtintype" id="7617679">int32</span><span class="op" id="7617684">,</span>&nbsp;<span class="num" id="7617686">1000</span><span class="op" id="7617690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617693">bbuf</span>&nbsp;<span class="op" id="7617698">:=</span>&nbsp;<span class="ident" id="7617701">benchmarkBuf</span><span class="op" id="7617713">{</span><span class="ident" id="7617714">data</span><span class="op" id="7617718">:</span>&nbsp;<span class="ident" id="7617720">buf</span><span class="op" id="7617723">.</span><span class="ident" id="7617724">Bytes</span><span class="op" id="7617729">(</span><span class="op" id="7617730">)</span><span class="op" id="7617731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617734">b</span><span class="op" id="7617735">.</span><span class="ident" id="7617736">ResetTimer</span><span class="op" id="7617746">(</span><span class="op" id="7617747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7617750">for</span>&nbsp;<span class="ident" id="7617754">i</span>&nbsp;<span class="op" id="7617756">:=</span>&nbsp;<span class="num" id="7617759">0</span><span class="op" id="7617760">;</span>&nbsp;<span class="ident" id="7617762">i</span>&nbsp;<span class="op" id="7617764">&lt;</span>&nbsp;<span class="ident" id="7617766">b</span><span class="op" id="7617767">.</span><span class="ident" id="7617768">N</span><span class="op" id="7617769">;</span>&nbsp;<span class="ident" id="7617771">i</span><span class="op" id="7617772">++</span>&nbsp;<span class="op" id="7617775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617779">bbuf</span><span class="op" id="7617783">.</span><span class="ident" id="7617784">reset</span><span class="op" id="7617789">(</span><span class="op" id="7617790">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617794">dec</span>&nbsp;<span class="op" id="7617798">:=</span>&nbsp;<span class="ident" id="7617801">NewDecoder</span><span class="op" id="7617811">(</span><span class="op" id="7617812">&amp;</span><span class="ident" id="7617813">bbuf</span><span class="op" id="7617817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617821">err</span>&nbsp;<span class="op" id="7617825">:=</span>&nbsp;<span class="ident" id="7617828">dec</span><span class="op" id="7617831">.</span><span class="ident" id="7617832">Decode</span><span class="op" id="7617838">(</span><span class="op" id="7617839">&amp;</span><span class="ident" id="7617840">x</span><span class="op" id="7617841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7617845">if</span>&nbsp;<span class="ident" id="7617848">err</span>&nbsp;<span class="op" id="7617852">!=</span>&nbsp;<span class="ident" id="7617855">nil</span>&nbsp;<span class="op" id="7617859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617864">b</span><span class="op" id="7617865">.</span><span class="ident" id="7617866">Fatal</span><span class="op" id="7617871">(</span><span class="ident" id="7617872">i</span><span class="op" id="7617873">,</span>&nbsp;<span class="ident" id="7617875">err</span><span class="op" id="7617878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7617882">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7617885">}</span><br>
<span class="lineno"></span><span class="op" id="7617887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7617890">func</span>&nbsp;<span class="ident" id="7617895">BenchmarkDecodeStringSlice</span><span class="op" id="7617921">(</span><span class="ident" id="7617922">b</span>&nbsp;<span class="op" id="7617924">*</span><span class="ident" id="7617925">testing</span><span class="op" id="7617932">.</span><span class="ident" id="7617933">B</span><span class="op" id="7617934">)</span>&nbsp;<span class="op" id="7617936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7617939">var</span>&nbsp;<span class="ident" id="7617943">buf</span>&nbsp;<span class="ident" id="7617947">bytes</span><span class="op" id="7617952">.</span><span class="ident" id="7617953">Buffer</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617961">enc</span>&nbsp;<span class="op" id="7617965">:=</span>&nbsp;<span class="ident" id="7617968">NewEncoder</span><span class="op" id="7617978">(</span><span class="op" id="7617979">&amp;</span><span class="ident" id="7617980">buf</span><span class="op" id="7617983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7617986">a</span>&nbsp;<span class="op" id="7617988">:=</span>&nbsp;<span class="builtinfunc" id="7617991">make</span><span class="op" id="7617995">(</span><span class="op" id="7617996">[</span><span class="op" id="7617997">]</span><span class="builtintype" id="7617998">string</span><span class="op" id="7618004">,</span>&nbsp;<span class="num" id="7618006">1000</span><span class="op" id="7618010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7618013">for</span>&nbsp;<span class="ident" id="7618017">i</span>&nbsp;<span class="op" id="7618019">:=</span>&nbsp;<span class="keyword" id="7618022">range</span>&nbsp;<span class="ident" id="7618028">a</span>&nbsp;<span class="op" id="7618030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7618034">a</span><span class="op" id="7618035">[</span><span class="ident" id="7618036">i</span><span class="op" id="7618037">]</span>&nbsp;<span class="op" id="7618039">=</span>&nbsp;<span class="string" id="7618041">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7618060">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7618063">err</span>&nbsp;<span class="op" id="7618067">:=</span>&nbsp;<span class="ident" id="7618070">enc</span><span class="op" id="7618073">.</span><span class="ident" id="7618074">Encode</span><span class="op" id="7618080">(</span><span class="ident" id="7618081">a</span><span class="op" id="7618082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7618085">if</span>&nbsp;<span class="ident" id="7618088">err</span>&nbsp;<span class="op" id="7618092">!=</span>&nbsp;<span class="ident" id="7618095">nil</span>&nbsp;<span class="op" id="7618099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7618103">b</span><span class="op" id="7618104">.</span><span class="ident" id="7618105">Fatal</span><span class="op" id="7618110">(</span><span class="ident" id="7618111">err</span><span class="op" id="7618114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7618117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7618120">x</span>&nbsp;<span class="op" id="7618122">:=</span>&nbsp;<span class="builtinfunc" id="7618125">make</span><span class="op" id="7618129">(</span><span class="op" id="7618130">[</span><span class="op" id="7618131">]</span><span class="builtintype" id="7618132">string</span><span class="op" id="7618138">,</span>&nbsp;<span class="num" id="7618140">1000</span><span class="op" id="7618144">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7618147">bbuf</span>&nbsp;<span class="op" id="7618152">:=</span>&nbsp;<span class="ident" id="7618155">benchmarkBuf</span><span class="op" id="7618167">{</span><span class="ident" id="7618168">data</span><span class="op" id="7618172">:</span>&nbsp;<span class="ident" id="7618174">buf</span><span class="op" id="7618177">.</span><span class="ident" id="7618178">Bytes</span><span class="op" id="7618183">(</span><span class="op" id="7618184">)</span><span class="op" id="7618185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7618188">b</span><span class="op" id="7618189">.</span><span class="ident" id="7618190">ResetTimer</span><span class="op" id="7618200">(</span><span class="op" id="7618201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7618204">for</span>&nbsp;<span class="ident" id="7618208">i</span>&nbsp;<span class="op" id="7618210">:=</span>&nbsp;<span class="num" id="7618213">0</span><span class="op" id="7618214">;</span>&nbsp;<span class="ident" id="7618216">i</span>&nbsp;<span class="op" id="7618218">&lt;</span>&nbsp;<span class="ident" id="7618220">b</span><span class="op" id="7618221">.</span><span class="ident" id="7618222">N</span><span class="op" id="7618223">;</span>&nbsp;<span class="ident" id="7618225">i</span><span class="op" id="7618226">++</span>&nbsp;<span class="op" id="7618229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7618233">bbuf</span><span class="op" id="7618237">.</span><span class="ident" id="7618238">reset</span><span class="op" id="7618243">(</span><span class="op" id="7618244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7618248">dec</span>&nbsp;<span class="op" id="7618252">:=</span>&nbsp;<span class="ident" id="7618255">NewDecoder</span><span class="op" id="7618265">(</span><span class="op" id="7618266">&amp;</span><span class="ident" id="7618267">bbuf</span><span class="op" id="7618271">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7618275">err</span>&nbsp;<span class="op" id="7618279">:=</span>&nbsp;<span class="ident" id="7618282">dec</span><span class="op" id="7618285">.</span><span class="ident" id="7618286">Decode</span><span class="op" id="7618292">(</span><span class="op" id="7618293">&amp;</span><span class="ident" id="7618294">x</span><span class="op" id="7618295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7618299">if</span>&nbsp;<span class="ident" id="7618302">err</span>&nbsp;<span class="op" id="7618306">!=</span>&nbsp;<span class="ident" id="7618309">nil</span>&nbsp;<span class="op" id="7618313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7618318">b</span><span class="op" id="7618319">.</span><span class="ident" id="7618320">Fatal</span><span class="op" id="7618325">(</span><span class="ident" id="7618326">i</span><span class="op" id="7618327">,</span>&nbsp;<span class="ident" id="7618329">err</span><span class="op" id="7618332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7618336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7618339">}</span><br>
<span class="lineno">325</span><span class="op" id="7618341">}</span>
</div>
</body>
</html>
