<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>regexp/syntax</h2>
<ul>
<li><a href="/gostd/regexp/syntax/compile.go.html">compile.go</a></li>
<li><a href="/gostd/regexp/syntax/doc.go.html">doc.go</a></li>
<li><a href="/gostd/regexp/syntax/parse.go.html">parse.go</a></li>
<li><a href="/gostd/regexp/syntax/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/regexp/syntax/perl_groups.go.html">perl_groups.go</a></li>
<li><a href="/gostd/regexp/syntax/prog.go.html">prog.go</a></li>
<li><a href="/gostd/regexp/syntax/prog_test.go.html">prog_test.go</a></li>
<li><a href="/gostd/regexp/syntax/regexp.go.html">regexp.go</a></li>
<li><a href="/gostd/regexp/syntax/simplify.go.html">simplify.go</a></li>
<li><a href="/gostd/regexp/syntax/simplify_test.go.html">simplify_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6763889">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6763945">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6763999">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6764050">package</span>&nbsp;<span class="ident" id="6764058">syntax</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6764066">import</span>&nbsp;<span class="op" id="6764073">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6764076">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6764085">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6764092">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6764103">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="6764113">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6764116">type</span>&nbsp;<span class="ident" id="6764121">parseTest</span>&nbsp;<span class="keyword" id="6764131">struct</span>&nbsp;<span class="op" id="6764138">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6764141">Regexp</span>&nbsp;<span class="builtintype" id="6764148">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6764156">Dump</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6764163">string</span><br>
<span class="lineno"></span><span class="op" id="6764170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6764173">var</span>&nbsp;<span class="ident" id="6764177">parseTests</span>&nbsp;<span class="op" id="6764188">=</span>&nbsp;<span class="op" id="6764190">[</span><span class="op" id="6764191">]</span><span class="ident" id="6764192">parseTest</span><span class="op" id="6764201">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6764204">//&nbsp;Base&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764219">{</span><span class="string" id="6764220">`a`</span><span class="op" id="6764223">,</span>&nbsp;<span class="string" id="6764225">`lit{a}`</span><span class="op" id="6764233">}</span><span class="op" id="6764234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764237">{</span><span class="string" id="6764238">`a.`</span><span class="op" id="6764242">,</span>&nbsp;<span class="string" id="6764244">`cat{lit{a}dot{}}`</span><span class="op" id="6764262">}</span><span class="op" id="6764263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764266">{</span><span class="string" id="6764267">`a.b`</span><span class="op" id="6764272">,</span>&nbsp;<span class="string" id="6764274">`cat{lit{a}dot{}lit{b}}`</span><span class="op" id="6764298">}</span><span class="op" id="6764299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764302">{</span><span class="string" id="6764303">`ab`</span><span class="op" id="6764307">,</span>&nbsp;<span class="string" id="6764309">`str{ab}`</span><span class="op" id="6764318">}</span><span class="op" id="6764319">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764322">{</span><span class="string" id="6764323">`a.b.c`</span><span class="op" id="6764330">,</span>&nbsp;<span class="string" id="6764332">`cat{lit{a}dot{}lit{b}dot{}lit{c}}`</span><span class="op" id="6764367">}</span><span class="op" id="6764368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764371">{</span><span class="string" id="6764372">`abc`</span><span class="op" id="6764377">,</span>&nbsp;<span class="string" id="6764379">`str{abc}`</span><span class="op" id="6764389">}</span><span class="op" id="6764390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764393">{</span><span class="string" id="6764394">`a|^`</span><span class="op" id="6764399">,</span>&nbsp;<span class="string" id="6764401">`alt{lit{a}bol{}}`</span><span class="op" id="6764419">}</span><span class="op" id="6764420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764423">{</span><span class="string" id="6764424">`a|b`</span><span class="op" id="6764429">,</span>&nbsp;<span class="string" id="6764431">`cc{0x61-0x62}`</span><span class="op" id="6764446">}</span><span class="op" id="6764447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764450">{</span><span class="string" id="6764451">`(a)`</span><span class="op" id="6764456">,</span>&nbsp;<span class="string" id="6764458">`cap{lit{a}}`</span><span class="op" id="6764471">}</span><span class="op" id="6764472">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764475">{</span><span class="string" id="6764476">`(a)|b`</span><span class="op" id="6764483">,</span>&nbsp;<span class="string" id="6764485">`alt{cap{lit{a}}lit{b}}`</span><span class="op" id="6764509">}</span><span class="op" id="6764510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764513">{</span><span class="string" id="6764514">`a*`</span><span class="op" id="6764518">,</span>&nbsp;<span class="string" id="6764520">`star{lit{a}}`</span><span class="op" id="6764534">}</span><span class="op" id="6764535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764538">{</span><span class="string" id="6764539">`a+`</span><span class="op" id="6764543">,</span>&nbsp;<span class="string" id="6764545">`plus{lit{a}}`</span><span class="op" id="6764559">}</span><span class="op" id="6764560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764563">{</span><span class="string" id="6764564">`a?`</span><span class="op" id="6764568">,</span>&nbsp;<span class="string" id="6764570">`que{lit{a}}`</span><span class="op" id="6764583">}</span><span class="op" id="6764584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764587">{</span><span class="string" id="6764588">`a{2}`</span><span class="op" id="6764594">,</span>&nbsp;<span class="string" id="6764596">`rep{2,2&nbsp;lit{a}}`</span><span class="op" id="6764613">}</span><span class="op" id="6764614">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764617">{</span><span class="string" id="6764618">`a{2,3}`</span><span class="op" id="6764626">,</span>&nbsp;<span class="string" id="6764628">`rep{2,3&nbsp;lit{a}}`</span><span class="op" id="6764645">}</span><span class="op" id="6764646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764649">{</span><span class="string" id="6764650">`a{2,}`</span><span class="op" id="6764657">,</span>&nbsp;<span class="string" id="6764659">`rep{2,-1&nbsp;lit{a}}`</span><span class="op" id="6764677">}</span><span class="op" id="6764678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764681">{</span><span class="string" id="6764682">`a*?`</span><span class="op" id="6764687">,</span>&nbsp;<span class="string" id="6764689">`nstar{lit{a}}`</span><span class="op" id="6764704">}</span><span class="op" id="6764705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764708">{</span><span class="string" id="6764709">`a+?`</span><span class="op" id="6764714">,</span>&nbsp;<span class="string" id="6764716">`nplus{lit{a}}`</span><span class="op" id="6764731">}</span><span class="op" id="6764732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764735">{</span><span class="string" id="6764736">`a??`</span><span class="op" id="6764741">,</span>&nbsp;<span class="string" id="6764743">`nque{lit{a}}`</span><span class="op" id="6764757">}</span><span class="op" id="6764758">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764761">{</span><span class="string" id="6764762">`a{2}?`</span><span class="op" id="6764769">,</span>&nbsp;<span class="string" id="6764771">`nrep{2,2&nbsp;lit{a}}`</span><span class="op" id="6764789">}</span><span class="op" id="6764790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764793">{</span><span class="string" id="6764794">`a{2,3}?`</span><span class="op" id="6764803">,</span>&nbsp;<span class="string" id="6764805">`nrep{2,3&nbsp;lit{a}}`</span><span class="op" id="6764823">}</span><span class="op" id="6764824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764827">{</span><span class="string" id="6764828">`a{2,}?`</span><span class="op" id="6764836">,</span>&nbsp;<span class="string" id="6764838">`nrep{2,-1&nbsp;lit{a}}`</span><span class="op" id="6764857">}</span><span class="op" id="6764858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6764861">//&nbsp;Malformed&nbsp;{&nbsp;}&nbsp;are&nbsp;treated&nbsp;as&nbsp;literals.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764904">{</span><span class="string" id="6764905">`x{1001`</span><span class="op" id="6764913">,</span>&nbsp;<span class="string" id="6764915">`str{x{1001}`</span><span class="op" id="6764928">}</span><span class="op" id="6764929">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764932">{</span><span class="string" id="6764933">`x{9876543210`</span><span class="op" id="6764947">,</span>&nbsp;<span class="string" id="6764949">`str{x{9876543210}`</span><span class="op" id="6764968">}</span><span class="op" id="6764969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6764972">{</span><span class="string" id="6764973">`x{9876543210,`</span><span class="op" id="6764988">,</span>&nbsp;<span class="string" id="6764990">`str{x{9876543210,}`</span><span class="op" id="6765010">}</span><span class="op" id="6765011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765014">{</span><span class="string" id="6765015">`x{2,1`</span><span class="op" id="6765022">,</span>&nbsp;<span class="string" id="6765024">`str{x{2,1}`</span><span class="op" id="6765036">}</span><span class="op" id="6765037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765040">{</span><span class="string" id="6765041">`x{1,9876543210`</span><span class="op" id="6765057">,</span>&nbsp;<span class="string" id="6765059">`str{x{1,9876543210}`</span><span class="op" id="6765080">}</span><span class="op" id="6765081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765084">{</span><span class="string" id="6765085">``</span><span class="op" id="6765087">,</span>&nbsp;<span class="string" id="6765089">`emp{}`</span><span class="op" id="6765096">}</span><span class="op" id="6765097">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765100">{</span><span class="string" id="6765101">`|`</span><span class="op" id="6765104">,</span>&nbsp;<span class="string" id="6765106">`emp{}`</span><span class="op" id="6765113">}</span><span class="op" id="6765114">,</span>&nbsp;<span class="comment" id="6765116">//&nbsp;alt{emp{}emp{}}&nbsp;but&nbsp;got&nbsp;factored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765153">{</span><span class="string" id="6765154">`|x|`</span><span class="op" id="6765159">,</span>&nbsp;<span class="string" id="6765161">`alt{emp{}lit{x}emp{}}`</span><span class="op" id="6765184">}</span><span class="op" id="6765185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765188">{</span><span class="string" id="6765189">`.`</span><span class="op" id="6765192">,</span>&nbsp;<span class="string" id="6765194">`dot{}`</span><span class="op" id="6765201">}</span><span class="op" id="6765202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765205">{</span><span class="string" id="6765206">`^`</span><span class="op" id="6765209">,</span>&nbsp;<span class="string" id="6765211">`bol{}`</span><span class="op" id="6765218">}</span><span class="op" id="6765219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765222">{</span><span class="string" id="6765223">`$`</span><span class="op" id="6765226">,</span>&nbsp;<span class="string" id="6765228">`eol{}`</span><span class="op" id="6765235">}</span><span class="op" id="6765236">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765239">{</span><span class="string" id="6765240">`\|`</span><span class="op" id="6765244">,</span>&nbsp;<span class="string" id="6765246">`lit{|}`</span><span class="op" id="6765254">}</span><span class="op" id="6765255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765258">{</span><span class="string" id="6765259">`\(`</span><span class="op" id="6765263">,</span>&nbsp;<span class="string" id="6765265">`lit{(}`</span><span class="op" id="6765273">}</span><span class="op" id="6765274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765277">{</span><span class="string" id="6765278">`\)`</span><span class="op" id="6765282">,</span>&nbsp;<span class="string" id="6765284">`lit{)}`</span><span class="op" id="6765292">}</span><span class="op" id="6765293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765296">{</span><span class="string" id="6765297">`\*`</span><span class="op" id="6765301">,</span>&nbsp;<span class="string" id="6765303">`lit{*}`</span><span class="op" id="6765311">}</span><span class="op" id="6765312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765315">{</span><span class="string" id="6765316">`\+`</span><span class="op" id="6765320">,</span>&nbsp;<span class="string" id="6765322">`lit{+}`</span><span class="op" id="6765330">}</span><span class="op" id="6765331">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765334">{</span><span class="string" id="6765335">`\?`</span><span class="op" id="6765339">,</span>&nbsp;<span class="string" id="6765341">`lit{?}`</span><span class="op" id="6765349">}</span><span class="op" id="6765350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765353">{</span><span class="string" id="6765354">`{`</span><span class="op" id="6765357">,</span>&nbsp;<span class="string" id="6765359">`lit{{}`</span><span class="op" id="6765367">}</span><span class="op" id="6765368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765371">{</span><span class="string" id="6765372">`}`</span><span class="op" id="6765375">,</span>&nbsp;<span class="string" id="6765377">`lit{}}`</span><span class="op" id="6765385">}</span><span class="op" id="6765386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765389">{</span><span class="string" id="6765390">`\.`</span><span class="op" id="6765394">,</span>&nbsp;<span class="string" id="6765396">`lit{.}`</span><span class="op" id="6765404">}</span><span class="op" id="6765405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765408">{</span><span class="string" id="6765409">`\^`</span><span class="op" id="6765413">,</span>&nbsp;<span class="string" id="6765415">`lit{^}`</span><span class="op" id="6765423">}</span><span class="op" id="6765424">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765427">{</span><span class="string" id="6765428">`\$`</span><span class="op" id="6765432">,</span>&nbsp;<span class="string" id="6765434">`lit{$}`</span><span class="op" id="6765442">}</span><span class="op" id="6765443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765446">{</span><span class="string" id="6765447">`\\`</span><span class="op" id="6765451">,</span>&nbsp;<span class="string" id="6765453">`lit{\}`</span><span class="op" id="6765461">}</span><span class="op" id="6765462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765465">{</span><span class="string" id="6765466">`[ace]`</span><span class="op" id="6765473">,</span>&nbsp;<span class="string" id="6765475">`cc{0x61&nbsp;0x63&nbsp;0x65}`</span><span class="op" id="6765495">}</span><span class="op" id="6765496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765499">{</span><span class="string" id="6765500">`[abc]`</span><span class="op" id="6765507">,</span>&nbsp;<span class="string" id="6765509">`cc{0x61-0x63}`</span><span class="op" id="6765524">}</span><span class="op" id="6765525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765528">{</span><span class="string" id="6765529">`[a-z]`</span><span class="op" id="6765536">,</span>&nbsp;<span class="string" id="6765538">`cc{0x61-0x7a}`</span><span class="op" id="6765553">}</span><span class="op" id="6765554">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765557">{</span><span class="string" id="6765558">`[a]`</span><span class="op" id="6765563">,</span>&nbsp;<span class="string" id="6765565">`lit{a}`</span><span class="op" id="6765573">}</span><span class="op" id="6765574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765577">{</span><span class="string" id="6765578">`\-`</span><span class="op" id="6765582">,</span>&nbsp;<span class="string" id="6765584">`lit{-}`</span><span class="op" id="6765592">}</span><span class="op" id="6765593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765596">{</span><span class="string" id="6765597">`-`</span><span class="op" id="6765600">,</span>&nbsp;<span class="string" id="6765602">`lit{-}`</span><span class="op" id="6765610">}</span><span class="op" id="6765611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765614">{</span><span class="string" id="6765615">`\_`</span><span class="op" id="6765619">,</span>&nbsp;<span class="string" id="6765621">`lit{_}`</span><span class="op" id="6765629">}</span><span class="op" id="6765630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765633">{</span><span class="string" id="6765634">`abc`</span><span class="op" id="6765639">,</span>&nbsp;<span class="string" id="6765641">`str{abc}`</span><span class="op" id="6765651">}</span><span class="op" id="6765652">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765655">{</span><span class="string" id="6765656">`abc|def`</span><span class="op" id="6765665">,</span>&nbsp;<span class="string" id="6765667">`alt{str{abc}str{def}}`</span><span class="op" id="6765690">}</span><span class="op" id="6765691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765694">{</span><span class="string" id="6765695">`abc|def|ghi`</span><span class="op" id="6765708">,</span>&nbsp;<span class="string" id="6765710">`alt{str{abc}str{def}str{ghi}}`</span><span class="op" id="6765741">}</span><span class="op" id="6765742">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6765746">//&nbsp;Posix&nbsp;and&nbsp;Perl&nbsp;extensions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765776">{</span><span class="string" id="6765777">`[[:lower:]]`</span><span class="op" id="6765790">,</span>&nbsp;<span class="string" id="6765792">`cc{0x61-0x7a}`</span><span class="op" id="6765807">}</span><span class="op" id="6765808">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765811">{</span><span class="string" id="6765812">`[a-z]`</span><span class="op" id="6765819">,</span>&nbsp;<span class="string" id="6765821">`cc{0x61-0x7a}`</span><span class="op" id="6765836">}</span><span class="op" id="6765837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765840">{</span><span class="string" id="6765841">`[^[:lower:]]`</span><span class="op" id="6765855">,</span>&nbsp;<span class="string" id="6765857">`cc{0x0-0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="6765885">}</span><span class="op" id="6765886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765889">{</span><span class="string" id="6765890">`[[:^lower:]]`</span><span class="op" id="6765904">,</span>&nbsp;<span class="string" id="6765906">`cc{0x0-0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="6765934">}</span><span class="op" id="6765935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765938">{</span><span class="string" id="6765939">`(?i)[[:lower:]]`</span><span class="op" id="6765956">,</span>&nbsp;<span class="string" id="6765958">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="6765996">}</span><span class="op" id="6765997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766000">{</span><span class="string" id="6766001">`(?i)[a-z]`</span><span class="op" id="6766012">,</span>&nbsp;<span class="string" id="6766014">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="6766052">}</span><span class="op" id="6766053">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766056">{</span><span class="string" id="6766057">`(?i)[^[:lower:]]`</span><span class="op" id="6766075">,</span>&nbsp;<span class="string" id="6766077">`cc{0x0-0x40&nbsp;0x5b-0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="6766141">}</span><span class="op" id="6766142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766145">{</span><span class="string" id="6766146">`(?i)[[:^lower:]]`</span><span class="op" id="6766164">,</span>&nbsp;<span class="string" id="6766166">`cc{0x0-0x40&nbsp;0x5b-0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="6766230">}</span><span class="op" id="6766231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766234">{</span><span class="string" id="6766235">`\d`</span><span class="op" id="6766239">,</span>&nbsp;<span class="string" id="6766241">`cc{0x30-0x39}`</span><span class="op" id="6766256">}</span><span class="op" id="6766257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766260">{</span><span class="string" id="6766261">`\D`</span><span class="op" id="6766265">,</span>&nbsp;<span class="string" id="6766267">`cc{0x0-0x2f&nbsp;0x3a-0x10ffff}`</span><span class="op" id="6766295">}</span><span class="op" id="6766296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766299">{</span><span class="string" id="6766300">`\s`</span><span class="op" id="6766304">,</span>&nbsp;<span class="string" id="6766306">`cc{0x9-0xa&nbsp;0xc-0xd&nbsp;0x20}`</span><span class="op" id="6766332">}</span><span class="op" id="6766333">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766336">{</span><span class="string" id="6766337">`\S`</span><span class="op" id="6766341">,</span>&nbsp;<span class="string" id="6766343">`cc{0x0-0x8&nbsp;0xb&nbsp;0xe-0x1f&nbsp;0x21-0x10ffff}`</span><span class="op" id="6766383">}</span><span class="op" id="6766384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766387">{</span><span class="string" id="6766388">`\w`</span><span class="op" id="6766392">,</span>&nbsp;<span class="string" id="6766394">`cc{0x30-0x39&nbsp;0x41-0x5a&nbsp;0x5f&nbsp;0x61-0x7a}`</span><span class="op" id="6766434">}</span><span class="op" id="6766435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766438">{</span><span class="string" id="6766439">`\W`</span><span class="op" id="6766443">,</span>&nbsp;<span class="string" id="6766445">`cc{0x0-0x2f&nbsp;0x3a-0x40&nbsp;0x5b-0x5e&nbsp;0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="6766498">}</span><span class="op" id="6766499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766502">{</span><span class="string" id="6766503">`(?i)\w`</span><span class="op" id="6766511">,</span>&nbsp;<span class="string" id="6766513">`cc{0x30-0x39&nbsp;0x41-0x5a&nbsp;0x5f&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="6766566">}</span><span class="op" id="6766567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766570">{</span><span class="string" id="6766571">`(?i)\W`</span><span class="op" id="6766579">,</span>&nbsp;<span class="string" id="6766581">`cc{0x0-0x2f&nbsp;0x3a-0x40&nbsp;0x5b-0x5e&nbsp;0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="6766660">}</span><span class="op" id="6766661">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766664">{</span><span class="string" id="6766665">`[^\\]`</span><span class="op" id="6766672">,</span>&nbsp;<span class="string" id="6766674">`cc{0x0-0x5b&nbsp;0x5d-0x10ffff}`</span><span class="op" id="6766702">}</span><span class="op" id="6766703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6766706">//&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;`\C`,&nbsp;`byte{}`&nbsp;},&nbsp;&nbsp;//&nbsp;probably&nbsp;never</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6766750">//&nbsp;Unicode,&nbsp;negatives,&nbsp;and&nbsp;a&nbsp;double&nbsp;negative.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766797">{</span><span class="string" id="6766798">`\p{Braille}`</span><span class="op" id="6766811">,</span>&nbsp;<span class="string" id="6766813">`cc{0x2800-0x28ff}`</span><span class="op" id="6766832">}</span><span class="op" id="6766833">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766836">{</span><span class="string" id="6766837">`\P{Braille}`</span><span class="op" id="6766850">,</span>&nbsp;<span class="string" id="6766852">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="6766884">}</span><span class="op" id="6766885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766888">{</span><span class="string" id="6766889">`\p{^Braille}`</span><span class="op" id="6766903">,</span>&nbsp;<span class="string" id="6766905">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="6766937">}</span><span class="op" id="6766938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766941">{</span><span class="string" id="6766942">`\P{^Braille}`</span><span class="op" id="6766956">,</span>&nbsp;<span class="string" id="6766958">`cc{0x2800-0x28ff}`</span><span class="op" id="6766977">}</span><span class="op" id="6766978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766981">{</span><span class="string" id="6766982">`\pZ`</span><span class="op" id="6766987">,</span>&nbsp;<span class="string" id="6766989">`cc{0x20&nbsp;0xa0&nbsp;0x1680&nbsp;0x2000-0x200a&nbsp;0x2028-0x2029&nbsp;0x202f&nbsp;0x205f&nbsp;0x3000}`</span><span class="op" id="6767060">}</span><span class="op" id="6767061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767064">{</span><span class="string" id="6767065">`[\p{Braille}]`</span><span class="op" id="6767080">,</span>&nbsp;<span class="string" id="6767082">`cc{0x2800-0x28ff}`</span><span class="op" id="6767101">}</span><span class="op" id="6767102">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767105">{</span><span class="string" id="6767106">`[\P{Braille}]`</span><span class="op" id="6767121">,</span>&nbsp;<span class="string" id="6767123">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="6767155">}</span><span class="op" id="6767156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767159">{</span><span class="string" id="6767160">`[\p{^Braille}]`</span><span class="op" id="6767176">,</span>&nbsp;<span class="string" id="6767178">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="6767210">}</span><span class="op" id="6767211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767214">{</span><span class="string" id="6767215">`[\P{^Braille}]`</span><span class="op" id="6767231">,</span>&nbsp;<span class="string" id="6767233">`cc{0x2800-0x28ff}`</span><span class="op" id="6767252">}</span><span class="op" id="6767253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767256">{</span><span class="string" id="6767257">`[\pZ]`</span><span class="op" id="6767264">,</span>&nbsp;<span class="string" id="6767266">`cc{0x20&nbsp;0xa0&nbsp;0x1680&nbsp;0x2000-0x200a&nbsp;0x2028-0x2029&nbsp;0x202f&nbsp;0x205f&nbsp;0x3000}`</span><span class="op" id="6767337">}</span><span class="op" id="6767338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767341">{</span><span class="string" id="6767342">`\p{Lu}`</span><span class="op" id="6767350">,</span>&nbsp;<span class="ident" id="6767352">mkCharClass</span><span class="op" id="6767363">(</span><span class="ident" id="6767364">unicode</span><span class="op" id="6767371">.</span><span class="ident" id="6767372">IsUpper</span><span class="op" id="6767379">)</span><span class="op" id="6767380">}</span><span class="op" id="6767381">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767384">{</span><span class="string" id="6767385">`[\p{Lu}]`</span><span class="op" id="6767395">,</span>&nbsp;<span class="ident" id="6767397">mkCharClass</span><span class="op" id="6767408">(</span><span class="ident" id="6767409">unicode</span><span class="op" id="6767416">.</span><span class="ident" id="6767417">IsUpper</span><span class="op" id="6767424">)</span><span class="op" id="6767425">}</span><span class="op" id="6767426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767429">{</span><span class="string" id="6767430">`(?i)[\p{Lu}]`</span><span class="op" id="6767444">,</span>&nbsp;<span class="ident" id="6767446">mkCharClass</span><span class="op" id="6767457">(</span><span class="ident" id="6767458">isUpperFold</span><span class="op" id="6767469">)</span><span class="op" id="6767470">}</span><span class="op" id="6767471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767474">{</span><span class="string" id="6767475">`\p{Any}`</span><span class="op" id="6767484">,</span>&nbsp;<span class="string" id="6767486">`dot{}`</span><span class="op" id="6767493">}</span><span class="op" id="6767494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767497">{</span><span class="string" id="6767498">`\p{^Any}`</span><span class="op" id="6767508">,</span>&nbsp;<span class="string" id="6767510">`cc{}`</span><span class="op" id="6767516">}</span><span class="op" id="6767517">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6767521">//&nbsp;Hex,&nbsp;octal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767537">{</span><span class="string" id="6767538">`[\012-\234]\141`</span><span class="op" id="6767555">,</span>&nbsp;<span class="string" id="6767557">`cat{cc{0xa-0x9c}lit{a}}`</span><span class="op" id="6767582">}</span><span class="op" id="6767583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767586">{</span><span class="string" id="6767587">`[\x{41}-\x7a]\x61`</span><span class="op" id="6767606">,</span>&nbsp;<span class="string" id="6767608">`cat{cc{0x41-0x7a}lit{a}}`</span><span class="op" id="6767634">}</span><span class="op" id="6767635">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6767639">//&nbsp;More&nbsp;interesting&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767681">{</span><span class="string" id="6767682">`a{,2}`</span><span class="op" id="6767689">,</span>&nbsp;<span class="string" id="6767691">`str{a{,2}}`</span><span class="op" id="6767703">}</span><span class="op" id="6767704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767707">{</span><span class="string" id="6767708">`\.\^\$\\`</span><span class="op" id="6767718">,</span>&nbsp;<span class="string" id="6767720">`str{.^$\}`</span><span class="op" id="6767731">}</span><span class="op" id="6767732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767735">{</span><span class="string" id="6767736">`[a-zABC]`</span><span class="op" id="6767746">,</span>&nbsp;<span class="string" id="6767748">`cc{0x41-0x43&nbsp;0x61-0x7a}`</span><span class="op" id="6767773">}</span><span class="op" id="6767774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767777">{</span><span class="string" id="6767778">`[^a]`</span><span class="op" id="6767784">,</span>&nbsp;<span class="string" id="6767786">`cc{0x0-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="6767814">}</span><span class="op" id="6767815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767818">{</span><span class="string" id="6767819">`[α-ε☺]`</span><span class="op" id="6767831">,</span>&nbsp;<span class="string" id="6767833">`cc{0x3b1-0x3b5&nbsp;0x263a}`</span><span class="op" id="6767857">}</span><span class="op" id="6767858">,</span>&nbsp;<span class="comment" id="6767860">//&nbsp;utf-8</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767870">{</span><span class="string" id="6767871">`a*{`</span><span class="op" id="6767876">,</span>&nbsp;<span class="string" id="6767878">`cat{star{lit{a}}lit{{}}`</span><span class="op" id="6767903">}</span><span class="op" id="6767904">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6767908">//&nbsp;Test&nbsp;precedences</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767929">{</span><span class="string" id="6767930">`(?:ab)*`</span><span class="op" id="6767939">,</span>&nbsp;<span class="string" id="6767941">`star{str{ab}}`</span><span class="op" id="6767956">}</span><span class="op" id="6767957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767960">{</span><span class="string" id="6767961">`(ab)*`</span><span class="op" id="6767968">,</span>&nbsp;<span class="string" id="6767970">`star{cap{str{ab}}}`</span><span class="op" id="6767990">}</span><span class="op" id="6767991">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767994">{</span><span class="string" id="6767995">`ab|cd`</span><span class="op" id="6768002">,</span>&nbsp;<span class="string" id="6768004">`alt{str{ab}str{cd}}`</span><span class="op" id="6768025">}</span><span class="op" id="6768026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768029">{</span><span class="string" id="6768030">`a(b|c)d`</span><span class="op" id="6768039">,</span>&nbsp;<span class="string" id="6768041">`cat{lit{a}cap{cc{0x62-0x63}}lit{d}}`</span><span class="op" id="6768078">}</span><span class="op" id="6768079">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6768083">//&nbsp;Test&nbsp;flattening.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768104">{</span><span class="string" id="6768105">`(?:a)`</span><span class="op" id="6768112">,</span>&nbsp;<span class="string" id="6768114">`lit{a}`</span><span class="op" id="6768122">}</span><span class="op" id="6768123">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768126">{</span><span class="string" id="6768127">`(?:ab)(?:cd)`</span><span class="op" id="6768141">,</span>&nbsp;<span class="string" id="6768143">`str{abcd}`</span><span class="op" id="6768154">}</span><span class="op" id="6768155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768158">{</span><span class="string" id="6768159">`(?:a+b+)(?:c+d+)`</span><span class="op" id="6768177">,</span>&nbsp;<span class="string" id="6768179">`cat{plus{lit{a}}plus{lit{b}}plus{lit{c}}plus{lit{d}}}`</span><span class="op" id="6768234">}</span><span class="op" id="6768235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768238">{</span><span class="string" id="6768239">`(?:a+|b+)|(?:c+|d+)`</span><span class="op" id="6768260">,</span>&nbsp;<span class="string" id="6768262">`alt{plus{lit{a}}plus{lit{b}}plus{lit{c}}plus{lit{d}}}`</span><span class="op" id="6768317">}</span><span class="op" id="6768318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768321">{</span><span class="string" id="6768322">`(?:a|b)|(?:c|d)`</span><span class="op" id="6768339">,</span>&nbsp;<span class="string" id="6768341">`cc{0x61-0x64}`</span><span class="op" id="6768356">}</span><span class="op" id="6768357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768360">{</span><span class="string" id="6768361">`a|.`</span><span class="op" id="6768366">,</span>&nbsp;<span class="string" id="6768368">`dot{}`</span><span class="op" id="6768375">}</span><span class="op" id="6768376">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768379">{</span><span class="string" id="6768380">`.|a`</span><span class="op" id="6768385">,</span>&nbsp;<span class="string" id="6768387">`dot{}`</span><span class="op" id="6768394">}</span><span class="op" id="6768395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768398">{</span><span class="string" id="6768399">`(?:[abc]|A|Z|hello|world)`</span><span class="op" id="6768426">,</span>&nbsp;<span class="string" id="6768428">`alt{cc{0x41&nbsp;0x5a&nbsp;0x61-0x63}str{hello}str{world}}`</span><span class="op" id="6768478">}</span><span class="op" id="6768479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768482">{</span><span class="string" id="6768483">`(?:[abc]|A|Z)`</span><span class="op" id="6768498">,</span>&nbsp;<span class="string" id="6768500">`cc{0x41&nbsp;0x5a&nbsp;0x61-0x63}`</span><span class="op" id="6768525">}</span><span class="op" id="6768526">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6768530">//&nbsp;Test&nbsp;Perl&nbsp;quoted&nbsp;literals</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768560">{</span><span class="string" id="6768561">`\Q+|*?{[\E`</span><span class="op" id="6768573">,</span>&nbsp;<span class="string" id="6768575">`str{+|*?{[}`</span><span class="op" id="6768588">}</span><span class="op" id="6768589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768592">{</span><span class="string" id="6768593">`\Q+\E+`</span><span class="op" id="6768601">,</span>&nbsp;<span class="string" id="6768603">`plus{lit{+}}`</span><span class="op" id="6768617">}</span><span class="op" id="6768618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768621">{</span><span class="string" id="6768622">`\Q\\E`</span><span class="op" id="6768629">,</span>&nbsp;<span class="string" id="6768631">`lit{\}`</span><span class="op" id="6768639">}</span><span class="op" id="6768640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768643">{</span><span class="string" id="6768644">`\Q\\\E`</span><span class="op" id="6768652">,</span>&nbsp;<span class="string" id="6768654">`str{\\}`</span><span class="op" id="6768663">}</span><span class="op" id="6768664">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6768668">//&nbsp;Test&nbsp;Perl&nbsp;\A&nbsp;and&nbsp;\z</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768692">{</span><span class="string" id="6768693">`(?m)^`</span><span class="op" id="6768700">,</span>&nbsp;<span class="string" id="6768702">`bol{}`</span><span class="op" id="6768709">}</span><span class="op" id="6768710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768713">{</span><span class="string" id="6768714">`(?m)$`</span><span class="op" id="6768721">,</span>&nbsp;<span class="string" id="6768723">`eol{}`</span><span class="op" id="6768730">}</span><span class="op" id="6768731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768734">{</span><span class="string" id="6768735">`(?-m)^`</span><span class="op" id="6768743">,</span>&nbsp;<span class="string" id="6768745">`bot{}`</span><span class="op" id="6768752">}</span><span class="op" id="6768753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768756">{</span><span class="string" id="6768757">`(?-m)$`</span><span class="op" id="6768765">,</span>&nbsp;<span class="string" id="6768767">`eot{}`</span><span class="op" id="6768774">}</span><span class="op" id="6768775">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768778">{</span><span class="string" id="6768779">`(?m)\A`</span><span class="op" id="6768787">,</span>&nbsp;<span class="string" id="6768789">`bot{}`</span><span class="op" id="6768796">}</span><span class="op" id="6768797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768800">{</span><span class="string" id="6768801">`(?m)\z`</span><span class="op" id="6768809">,</span>&nbsp;<span class="string" id="6768811">`eot{\z}`</span><span class="op" id="6768820">}</span><span class="op" id="6768821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768824">{</span><span class="string" id="6768825">`(?-m)\A`</span><span class="op" id="6768834">,</span>&nbsp;<span class="string" id="6768836">`bot{}`</span><span class="op" id="6768843">}</span><span class="op" id="6768844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768847">{</span><span class="string" id="6768848">`(?-m)\z`</span><span class="op" id="6768857">,</span>&nbsp;<span class="string" id="6768859">`eot{\z}`</span><span class="op" id="6768868">}</span><span class="op" id="6768869">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6768873">//&nbsp;Test&nbsp;named&nbsp;captures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768897">{</span><span class="string" id="6768898">`(?P&lt;name&gt;a)`</span><span class="op" id="6768911">,</span>&nbsp;<span class="string" id="6768913">`cap{name:lit{a}}`</span><span class="op" id="6768931">}</span><span class="op" id="6768932">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6768936">//&nbsp;Case-folded&nbsp;literals</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768961">{</span><span class="string" id="6768962">`[Aa]`</span><span class="op" id="6768968">,</span>&nbsp;<span class="string" id="6768970">`litfold{A}`</span><span class="op" id="6768982">}</span><span class="op" id="6768983">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768986">{</span><span class="string" id="6768987">`[\x{100}\x{101}]`</span><span class="op" id="6769005">,</span>&nbsp;<span class="string" id="6769007">`litfold{Ā}`</span><span class="op" id="6769020">}</span><span class="op" id="6769021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769024">{</span><span class="string" id="6769025">`[Δδ]`</span><span class="op" id="6769033">,</span>&nbsp;<span class="string" id="6769035">`litfold{Δ}`</span><span class="op" id="6769048">}</span><span class="op" id="6769049">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6769053">//&nbsp;Strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769065">{</span><span class="string" id="6769066">`abcde`</span><span class="op" id="6769073">,</span>&nbsp;<span class="string" id="6769075">`str{abcde}`</span><span class="op" id="6769087">}</span><span class="op" id="6769088">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769091">{</span><span class="string" id="6769092">`[Aa][Bb]cd`</span><span class="op" id="6769104">,</span>&nbsp;<span class="string" id="6769106">`cat{strfold{AB}str{cd}}`</span><span class="op" id="6769131">}</span><span class="op" id="6769132">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6769136">//&nbsp;Factoring.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769151">{</span><span class="string" id="6769152">`abc|abd|aef|bcx|bcy`</span><span class="op" id="6769173">,</span>&nbsp;<span class="string" id="6769175">`alt{cat{lit{a}alt{cat{lit{b}cc{0x63-0x64}}str{ef}}}cat{str{bc}cc{0x78-0x79}}}`</span><span class="op" id="6769254">}</span><span class="op" id="6769255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769258">{</span><span class="string" id="6769259">`ax+y|ax+z|ay+w`</span><span class="op" id="6769275">,</span>&nbsp;<span class="string" id="6769277">`cat{lit{a}alt{cat{plus{lit{x}}cc{0x79-0x7a}}cat{plus{lit{y}}lit{w}}}}`</span><span class="op" id="6769348">}</span><span class="op" id="6769349">,</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6769353">//&nbsp;Bug&nbsp;fixes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769368">{</span><span class="string" id="6769369">`(?:.)`</span><span class="op" id="6769376">,</span>&nbsp;<span class="string" id="6769378">`dot{}`</span><span class="op" id="6769385">}</span><span class="op" id="6769386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769389">{</span><span class="string" id="6769390">`(?:x|(?:xa))`</span><span class="op" id="6769404">,</span>&nbsp;<span class="string" id="6769406">`cat{lit{x}alt{emp{}lit{a}}}`</span><span class="op" id="6769435">}</span><span class="op" id="6769436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769439">{</span><span class="string" id="6769440">`(?:.|(?:.a))`</span><span class="op" id="6769454">,</span>&nbsp;<span class="string" id="6769456">`cat{dot{}alt{emp{}lit{a}}}`</span><span class="op" id="6769484">}</span><span class="op" id="6769485">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769488">{</span><span class="string" id="6769489">`(?:A(?:A|a))`</span><span class="op" id="6769503">,</span>&nbsp;<span class="string" id="6769505">`cat{lit{A}litfold{A}}`</span><span class="op" id="6769528">}</span><span class="op" id="6769529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769532">{</span><span class="string" id="6769533">`(?:A|a)`</span><span class="op" id="6769542">,</span>&nbsp;<span class="string" id="6769544">`litfold{A}`</span><span class="op" id="6769556">}</span><span class="op" id="6769557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769560">{</span><span class="string" id="6769561">`A|(?:A|a)`</span><span class="op" id="6769572">,</span>&nbsp;<span class="string" id="6769574">`litfold{A}`</span><span class="op" id="6769586">}</span><span class="op" id="6769587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769590">{</span><span class="string" id="6769591">`(?s).`</span><span class="op" id="6769598">,</span>&nbsp;<span class="string" id="6769600">`dot{}`</span><span class="op" id="6769607">}</span><span class="op" id="6769608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769611">{</span><span class="string" id="6769612">`(?-s).`</span><span class="op" id="6769620">,</span>&nbsp;<span class="string" id="6769622">`dnl{}`</span><span class="op" id="6769629">}</span><span class="op" id="6769630">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769633">{</span><span class="string" id="6769634">`(?:(?:^).)`</span><span class="op" id="6769646">,</span>&nbsp;<span class="string" id="6769648">`cat{bol{}dot{}}`</span><span class="op" id="6769665">}</span><span class="op" id="6769666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769669">{</span><span class="string" id="6769670">`(?-s)(?:(?:^).)`</span><span class="op" id="6769687">,</span>&nbsp;<span class="string" id="6769689">`cat{bol{}dnl{}}`</span><span class="op" id="6769706">}</span><span class="op" id="6769707">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6769711">//&nbsp;RE2&nbsp;prefix_tests</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769732">{</span><span class="string" id="6769733">`abc|abd`</span><span class="op" id="6769742">,</span>&nbsp;<span class="string" id="6769744">`cat{str{ab}cc{0x63-0x64}}`</span><span class="op" id="6769771">}</span><span class="op" id="6769772">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769775">{</span><span class="string" id="6769776">`a(?:b)c|abd`</span><span class="op" id="6769789">,</span>&nbsp;<span class="string" id="6769791">`cat{str{ab}cc{0x63-0x64}}`</span><span class="op" id="6769818">}</span><span class="op" id="6769819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769822">{</span><span class="string" id="6769823">`abc|abd|aef|bcx|bcy`</span><span class="op" id="6769844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6769848">`alt{cat{lit{a}alt{cat{lit{b}cc{0x63-0x64}}str{ef}}}`</span>&nbsp;<span class="op" id="6769902">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6769907">`cat{str{bc}cc{0x78-0x79}}}`</span><span class="op" id="6769935">}</span><span class="op" id="6769936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769939">{</span><span class="string" id="6769940">`abc|x|abd`</span><span class="op" id="6769951">,</span>&nbsp;<span class="string" id="6769953">`alt{str{abc}lit{x}str{abd}}`</span><span class="op" id="6769982">}</span><span class="op" id="6769983">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769986">{</span><span class="string" id="6769987">`(?i)abc|ABD`</span><span class="op" id="6770000">,</span>&nbsp;<span class="string" id="6770002">`cat{strfold{AB}cc{0x43-0x44&nbsp;0x63-0x64}}`</span><span class="op" id="6770043">}</span><span class="op" id="6770044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770047">{</span><span class="string" id="6770048">`[ab]c|[ab]d`</span><span class="op" id="6770061">,</span>&nbsp;<span class="string" id="6770063">`cat{cc{0x61-0x62}cc{0x63-0x64}}`</span><span class="op" id="6770096">}</span><span class="op" id="6770097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770100">{</span><span class="string" id="6770101">`(?:xx|yy)c|(?:xx|yy)d`</span><span class="op" id="6770124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6770128">`cat{alt{str{xx}str{yy}}cc{0x63-0x64}}`</span><span class="op" id="6770167">}</span><span class="op" id="6770168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770171">{</span><span class="string" id="6770172">`x{2}|x{2}[0-9]`</span><span class="op" id="6770188">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6770192">`cat{rep{2,2&nbsp;lit{x}}alt{emp{}cc{0x30-0x39}}}`</span><span class="op" id="6770237">}</span><span class="op" id="6770238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770241">{</span><span class="string" id="6770242">`x{2}y|x{2}[0-9]y`</span><span class="op" id="6770260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6770264">`cat{rep{2,2&nbsp;lit{x}}alt{lit{y}cat{cc{0x30-0x39}lit{y}}}}`</span><span class="op" id="6770321">}</span><span class="op" id="6770322">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6770326">//&nbsp;Valid&nbsp;repetitions.</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770349">{</span><span class="string" id="6770350">`((((((((((x{2}){2}){2}){2}){2}){2}){2}){2}){2}))`</span><span class="op" id="6770400">,</span>&nbsp;<span class="string" id="6770402">``</span><span class="op" id="6770404">}</span><span class="op" id="6770405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770408">{</span><span class="string" id="6770409">`((((((((((x{1}){2}){2}){2}){2}){2}){2}){2}){2}){2})`</span><span class="op" id="6770462">,</span>&nbsp;<span class="string" id="6770464">``</span><span class="op" id="6770466">}</span><span class="op" id="6770467">,</span><br>
<span class="lineno"></span><span class="op" id="6770469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6770472">const</span>&nbsp;<span class="ident" id="6770478">testFlags</span>&nbsp;<span class="op" id="6770488">=</span>&nbsp;<span class="ident" id="6770490">MatchNL</span>&nbsp;<span class="op" id="6770498">|</span>&nbsp;<span class="ident" id="6770500">PerlX</span>&nbsp;<span class="op" id="6770506">|</span>&nbsp;<span class="ident" id="6770508">UnicodeGroups</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="6770523">func</span>&nbsp;<span class="ident" id="6770528">TestParseSimple</span><span class="op" id="6770543">(</span><span class="ident" id="6770544">t</span>&nbsp;<span class="op" id="6770546">*</span><span class="ident" id="6770547">testing</span><span class="op" id="6770554">.</span><span class="ident" id="6770555">T</span><span class="op" id="6770556">)</span>&nbsp;<span class="op" id="6770558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6770561">testParseDump</span><span class="op" id="6770574">(</span><span class="ident" id="6770575">t</span><span class="op" id="6770576">,</span>&nbsp;<span class="ident" id="6770578">parseTests</span><span class="op" id="6770588">,</span>&nbsp;<span class="ident" id="6770590">testFlags</span><span class="op" id="6770599">)</span><br>
<span class="lineno"></span><span class="op" id="6770601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="6770604">var</span>&nbsp;<span class="ident" id="6770608">foldcaseTests</span>&nbsp;<span class="op" id="6770622">=</span>&nbsp;<span class="op" id="6770624">[</span><span class="op" id="6770625">]</span><span class="ident" id="6770626">parseTest</span><span class="op" id="6770635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770638">{</span><span class="string" id="6770639">`AbCdE`</span><span class="op" id="6770646">,</span>&nbsp;<span class="string" id="6770648">`strfold{ABCDE}`</span><span class="op" id="6770664">}</span><span class="op" id="6770665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770668">{</span><span class="string" id="6770669">`[Aa]`</span><span class="op" id="6770675">,</span>&nbsp;<span class="string" id="6770677">`litfold{A}`</span><span class="op" id="6770689">}</span><span class="op" id="6770690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770693">{</span><span class="string" id="6770694">`a`</span><span class="op" id="6770697">,</span>&nbsp;<span class="string" id="6770699">`litfold{A}`</span><span class="op" id="6770711">}</span><span class="op" id="6770712">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6770716">//&nbsp;0x17F&nbsp;is&nbsp;an&nbsp;old&nbsp;English&nbsp;long&nbsp;s&nbsp;(looks&nbsp;like&nbsp;an&nbsp;f)&nbsp;and&nbsp;folds&nbsp;to&nbsp;s.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6770785">//&nbsp;0x212A&nbsp;is&nbsp;the&nbsp;Kelvin&nbsp;symbol&nbsp;and&nbsp;folds&nbsp;to&nbsp;k.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770833">{</span><span class="string" id="6770834">`A[F-g]`</span><span class="op" id="6770842">,</span>&nbsp;<span class="string" id="6770844">`cat{litfold{A}cc{0x41-0x7a&nbsp;0x17f&nbsp;0x212a}}`</span><span class="op" id="6770887">}</span><span class="op" id="6770888">,</span>&nbsp;<span class="comment" id="6770890">//&nbsp;[Aa][A-z...]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770907">{</span><span class="string" id="6770908">`[[:upper:]]`</span><span class="op" id="6770921">,</span>&nbsp;<span class="string" id="6770923">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="6770961">}</span><span class="op" id="6770962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770965">{</span><span class="string" id="6770966">`[[:lower:]]`</span><span class="op" id="6770979">,</span>&nbsp;<span class="string" id="6770981">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="6771019">}</span><span class="op" id="6771020">,</span><br>
<span class="lineno">225</span><span class="op" id="6771022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6771025">func</span>&nbsp;<span class="ident" id="6771030">TestParseFoldCase</span><span class="op" id="6771047">(</span><span class="ident" id="6771048">t</span>&nbsp;<span class="op" id="6771050">*</span><span class="ident" id="6771051">testing</span><span class="op" id="6771058">.</span><span class="ident" id="6771059">T</span><span class="op" id="6771060">)</span>&nbsp;<span class="op" id="6771062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771065">testParseDump</span><span class="op" id="6771078">(</span><span class="ident" id="6771079">t</span><span class="op" id="6771080">,</span>&nbsp;<span class="ident" id="6771082">foldcaseTests</span><span class="op" id="6771095">,</span>&nbsp;<span class="ident" id="6771097">FoldCase</span><span class="op" id="6771105">)</span><br>
<span class="lineno"></span><span class="op" id="6771107">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="6771110">var</span>&nbsp;<span class="ident" id="6771114">literalTests</span>&nbsp;<span class="op" id="6771127">=</span>&nbsp;<span class="op" id="6771129">[</span><span class="op" id="6771130">]</span><span class="ident" id="6771131">parseTest</span><span class="op" id="6771140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771143">{</span><span class="string" id="6771144">&#34;(|)^$.[*+?]{5,10},\\&#34;</span><span class="op" id="6771166">,</span>&nbsp;<span class="string" id="6771168">&#34;str{(|)^$.[*+?]{5,10},\\}&#34;</span><span class="op" id="6771195">}</span><span class="op" id="6771196">,</span><br>
<span class="lineno"></span><span class="op" id="6771198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="6771201">func</span>&nbsp;<span class="ident" id="6771206">TestParseLiteral</span><span class="op" id="6771222">(</span><span class="ident" id="6771223">t</span>&nbsp;<span class="op" id="6771225">*</span><span class="ident" id="6771226">testing</span><span class="op" id="6771233">.</span><span class="ident" id="6771234">T</span><span class="op" id="6771235">)</span>&nbsp;<span class="op" id="6771237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771240">testParseDump</span><span class="op" id="6771253">(</span><span class="ident" id="6771254">t</span><span class="op" id="6771255">,</span>&nbsp;<span class="ident" id="6771257">literalTests</span><span class="op" id="6771269">,</span>&nbsp;<span class="ident" id="6771271">Literal</span><span class="op" id="6771278">)</span><br>
<span class="lineno"></span><span class="op" id="6771280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6771283">var</span>&nbsp;<span class="ident" id="6771287">matchnlTests</span>&nbsp;<span class="op" id="6771300">=</span>&nbsp;<span class="op" id="6771302">[</span><span class="op" id="6771303">]</span><span class="ident" id="6771304">parseTest</span><span class="op" id="6771313">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771316">{</span><span class="string" id="6771317">`.`</span><span class="op" id="6771320">,</span>&nbsp;<span class="string" id="6771322">`dot{}`</span><span class="op" id="6771329">}</span><span class="op" id="6771330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771333">{</span><span class="string" id="6771334">&#34;\n&#34;</span><span class="op" id="6771338">,</span>&nbsp;<span class="string" id="6771340">&#34;lit{\n}&#34;</span><span class="op" id="6771349">}</span><span class="op" id="6771350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771353">{</span><span class="string" id="6771354">`[^a]`</span><span class="op" id="6771360">,</span>&nbsp;<span class="string" id="6771362">`cc{0x0-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="6771390">}</span><span class="op" id="6771391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771394">{</span><span class="string" id="6771395">`[a\n]`</span><span class="op" id="6771402">,</span>&nbsp;<span class="string" id="6771404">`cc{0xa&nbsp;0x61}`</span><span class="op" id="6771418">}</span><span class="op" id="6771419">,</span><br>
<span class="lineno"></span><span class="op" id="6771421">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="keyword" id="6771424">func</span>&nbsp;<span class="ident" id="6771429">TestParseMatchNL</span><span class="op" id="6771445">(</span><span class="ident" id="6771446">t</span>&nbsp;<span class="op" id="6771448">*</span><span class="ident" id="6771449">testing</span><span class="op" id="6771456">.</span><span class="ident" id="6771457">T</span><span class="op" id="6771458">)</span>&nbsp;<span class="op" id="6771460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771463">testParseDump</span><span class="op" id="6771476">(</span><span class="ident" id="6771477">t</span><span class="op" id="6771478">,</span>&nbsp;<span class="ident" id="6771480">matchnlTests</span><span class="op" id="6771492">,</span>&nbsp;<span class="ident" id="6771494">MatchNL</span><span class="op" id="6771501">)</span><br>
<span class="lineno"></span><span class="op" id="6771503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="6771506">var</span>&nbsp;<span class="ident" id="6771510">nomatchnlTests</span>&nbsp;<span class="op" id="6771525">=</span>&nbsp;<span class="op" id="6771527">[</span><span class="op" id="6771528">]</span><span class="ident" id="6771529">parseTest</span><span class="op" id="6771538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771541">{</span><span class="string" id="6771542">`.`</span><span class="op" id="6771545">,</span>&nbsp;<span class="string" id="6771547">`dnl{}`</span><span class="op" id="6771554">}</span><span class="op" id="6771555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771558">{</span><span class="string" id="6771559">&#34;\n&#34;</span><span class="op" id="6771563">,</span>&nbsp;<span class="string" id="6771565">&#34;lit{\n}&#34;</span><span class="op" id="6771574">}</span><span class="op" id="6771575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771578">{</span><span class="string" id="6771579">`[^a]`</span><span class="op" id="6771585">,</span>&nbsp;<span class="string" id="6771587">`cc{0x0-0x9&nbsp;0xb-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="6771623">}</span><span class="op" id="6771624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771627">{</span><span class="string" id="6771628">`[a\n]`</span><span class="op" id="6771635">,</span>&nbsp;<span class="string" id="6771637">`cc{0xa&nbsp;0x61}`</span><span class="op" id="6771651">}</span><span class="op" id="6771652">,</span><br>
<span class="lineno">255</span><span class="op" id="6771654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6771657">func</span>&nbsp;<span class="ident" id="6771662">TestParseNoMatchNL</span><span class="op" id="6771680">(</span><span class="ident" id="6771681">t</span>&nbsp;<span class="op" id="6771683">*</span><span class="ident" id="6771684">testing</span><span class="op" id="6771691">.</span><span class="ident" id="6771692">T</span><span class="op" id="6771693">)</span>&nbsp;<span class="op" id="6771695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771698">testParseDump</span><span class="op" id="6771711">(</span><span class="ident" id="6771712">t</span><span class="op" id="6771713">,</span>&nbsp;<span class="ident" id="6771715">nomatchnlTests</span><span class="op" id="6771729">,</span>&nbsp;<span class="num" id="6771731">0</span><span class="op" id="6771732">)</span><br>
<span class="lineno"></span><span class="op" id="6771734">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="comment" id="6771737">//&nbsp;Test&nbsp;Parse&nbsp;-&gt;&nbsp;Dump.</span><br>
<span class="lineno"></span><span class="keyword" id="6771760">func</span>&nbsp;<span class="ident" id="6771765">testParseDump</span><span class="op" id="6771778">(</span><span class="ident" id="6771779">t</span>&nbsp;<span class="op" id="6771781">*</span><span class="ident" id="6771782">testing</span><span class="op" id="6771789">.</span><span class="ident" id="6771790">T</span><span class="op" id="6771791">,</span>&nbsp;<span class="ident" id="6771793">tests</span>&nbsp;<span class="op" id="6771799">[</span><span class="op" id="6771800">]</span><span class="ident" id="6771801">parseTest</span><span class="op" id="6771810">,</span>&nbsp;<span class="ident" id="6771812">flags</span>&nbsp;<span class="ident" id="6771818">Flags</span><span class="op" id="6771823">)</span>&nbsp;<span class="op" id="6771825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6771828">for</span>&nbsp;<span class="ident" id="6771832">_</span><span class="op" id="6771833">,</span>&nbsp;<span class="ident" id="6771835">tt</span>&nbsp;<span class="op" id="6771838">:=</span>&nbsp;<span class="keyword" id="6771841">range</span>&nbsp;<span class="ident" id="6771847">tests</span>&nbsp;<span class="op" id="6771853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771857">re</span><span class="op" id="6771859">,</span>&nbsp;<span class="ident" id="6771861">err</span>&nbsp;<span class="op" id="6771865">:=</span>&nbsp;<span class="ident" id="6771868">Parse</span><span class="op" id="6771873">(</span><span class="ident" id="6771874">tt</span><span class="op" id="6771876">.</span><span class="ident" id="6771877">Regexp</span><span class="op" id="6771883">,</span>&nbsp;<span class="ident" id="6771885">flags</span><span class="op" id="6771890">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6771894">if</span>&nbsp;<span class="ident" id="6771897">err</span>&nbsp;<span class="op" id="6771901">!=</span>&nbsp;<span class="ident" id="6771904">nil</span>&nbsp;<span class="op" id="6771908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771913">t</span><span class="op" id="6771914">.</span><span class="ident" id="6771915">Errorf</span><span class="op" id="6771921">(</span><span class="string" id="6771922">&#34;Parse(%#q):&nbsp;%v&#34;</span><span class="op" id="6771938">,</span>&nbsp;<span class="ident" id="6771940">tt</span><span class="op" id="6771942">.</span><span class="ident" id="6771943">Regexp</span><span class="op" id="6771949">,</span>&nbsp;<span class="ident" id="6771951">err</span><span class="op" id="6771954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6771959">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6771974">if</span>&nbsp;<span class="ident" id="6771977">tt</span><span class="op" id="6771979">.</span><span class="ident" id="6771980">Dump</span>&nbsp;<span class="op" id="6771985">==</span>&nbsp;<span class="string" id="6771988">&#34;&#34;</span>&nbsp;<span class="op" id="6771991">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6771996">//&nbsp;It&nbsp;parsed.&nbsp;That&#39;s&nbsp;all&nbsp;we&nbsp;care&nbsp;about.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6772039">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6772050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772054">d</span>&nbsp;<span class="op" id="6772056">:=</span>&nbsp;<span class="ident" id="6772059">dump</span><span class="op" id="6772063">(</span><span class="ident" id="6772064">re</span><span class="op" id="6772066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6772070">if</span>&nbsp;<span class="ident" id="6772073">d</span>&nbsp;<span class="op" id="6772075">!=</span>&nbsp;<span class="ident" id="6772078">tt</span><span class="op" id="6772080">.</span><span class="ident" id="6772081">Dump</span>&nbsp;<span class="op" id="6772086">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772091">t</span><span class="op" id="6772092">.</span><span class="ident" id="6772093">Errorf</span><span class="op" id="6772099">(</span><span class="string" id="6772100">&#34;Parse(%#q).Dump()&nbsp;=&nbsp;%#q&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6772134">,</span>&nbsp;<span class="ident" id="6772136">tt</span><span class="op" id="6772138">.</span><span class="ident" id="6772139">Regexp</span><span class="op" id="6772145">,</span>&nbsp;<span class="ident" id="6772147">d</span><span class="op" id="6772148">,</span>&nbsp;<span class="ident" id="6772150">tt</span><span class="op" id="6772152">.</span><span class="ident" id="6772153">Dump</span><span class="op" id="6772157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6772161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6772164">}</span><br>
<span class="lineno"></span><span class="op" id="6772166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="comment" id="6772169">//&nbsp;dump&nbsp;prints&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;the&nbsp;regexp&nbsp;showing</span><br>
<span class="lineno"></span><span class="comment" id="6772230">//&nbsp;the&nbsp;structure&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="keyword" id="6772259">func</span>&nbsp;<span class="ident" id="6772264">dump</span><span class="op" id="6772268">(</span><span class="ident" id="6772269">re</span>&nbsp;<span class="op" id="6772272">*</span><span class="ident" id="6772273">Regexp</span><span class="op" id="6772279">)</span>&nbsp;<span class="builtintype" id="6772281">string</span>&nbsp;<span class="op" id="6772288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6772291">var</span>&nbsp;<span class="ident" id="6772295">b</span>&nbsp;<span class="ident" id="6772297">bytes</span><span class="op" id="6772302">.</span><span class="ident" id="6772303">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772311">dumpRegexp</span><span class="op" id="6772321">(</span><span class="op" id="6772322">&amp;</span><span class="ident" id="6772323">b</span><span class="op" id="6772324">,</span>&nbsp;<span class="ident" id="6772326">re</span><span class="op" id="6772328">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6772331">return</span>&nbsp;<span class="ident" id="6772338">b</span><span class="op" id="6772339">.</span><span class="ident" id="6772340">String</span><span class="op" id="6772346">(</span><span class="op" id="6772347">)</span><br>
<span class="lineno"></span><span class="op" id="6772349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6772352">var</span>&nbsp;<span class="ident" id="6772356">opNames</span>&nbsp;<span class="op" id="6772364">=</span>&nbsp;<span class="op" id="6772366">[</span><span class="op" id="6772367">]</span><span class="builtintype" id="6772368">string</span><span class="op" id="6772374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772377">OpNoMatch</span><span class="op" id="6772386">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6772395">&#34;no&#34;</span><span class="op" id="6772399">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772402">OpEmptyMatch</span><span class="op" id="6772414">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6772420">&#34;emp&#34;</span><span class="op" id="6772425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772428">OpLiteral</span><span class="op" id="6772437">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6772446">&#34;lit&#34;</span><span class="op" id="6772451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772454">OpCharClass</span><span class="op" id="6772465">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6772472">&#34;cc&#34;</span><span class="op" id="6772476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772479">OpAnyCharNotNL</span><span class="op" id="6772493">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6772497">&#34;dnl&#34;</span><span class="op" id="6772502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772505">OpAnyChar</span><span class="op" id="6772514">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6772523">&#34;dot&#34;</span><span class="op" id="6772528">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772531">OpBeginLine</span><span class="op" id="6772542">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6772549">&#34;bol&#34;</span><span class="op" id="6772554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772557">OpEndLine</span><span class="op" id="6772566">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6772575">&#34;eol&#34;</span><span class="op" id="6772580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772583">OpBeginText</span><span class="op" id="6772594">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6772601">&#34;bot&#34;</span><span class="op" id="6772606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772609">OpEndText</span><span class="op" id="6772618">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6772627">&#34;eot&#34;</span><span class="op" id="6772632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772635">OpWordBoundary</span><span class="op" id="6772649">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6772653">&#34;wb&#34;</span><span class="op" id="6772657">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772660">OpNoWordBoundary</span><span class="op" id="6772676">:</span>&nbsp;<span class="string" id="6772678">&#34;nwb&#34;</span><span class="op" id="6772683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772686">OpCapture</span><span class="op" id="6772695">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6772704">&#34;cap&#34;</span><span class="op" id="6772709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772712">OpStar</span><span class="op" id="6772718">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6772730">&#34;star&#34;</span><span class="op" id="6772736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772739">OpPlus</span><span class="op" id="6772745">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6772757">&#34;plus&#34;</span><span class="op" id="6772763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772766">OpQuest</span><span class="op" id="6772773">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6772784">&#34;que&#34;</span><span class="op" id="6772789">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772792">OpRepeat</span><span class="op" id="6772800">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6772810">&#34;rep&#34;</span><span class="op" id="6772815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772818">OpConcat</span><span class="op" id="6772826">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6772836">&#34;cat&#34;</span><span class="op" id="6772841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772844">OpAlternate</span><span class="op" id="6772855">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6772862">&#34;alt&#34;</span><span class="op" id="6772867">,</span><br>
<span class="lineno"></span><span class="op" id="6772869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">310</span><span class="comment" id="6772872">//&nbsp;dumpRegexp&nbsp;writes&nbsp;an&nbsp;encoding&nbsp;of&nbsp;the&nbsp;syntax&nbsp;tree&nbsp;for&nbsp;the&nbsp;regexp&nbsp;re&nbsp;to&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="6772948">//&nbsp;It&nbsp;is&nbsp;used&nbsp;during&nbsp;testing&nbsp;to&nbsp;distinguish&nbsp;between&nbsp;parses&nbsp;that&nbsp;might&nbsp;print</span><br>
<span class="lineno"></span><span class="comment" id="6773024">//&nbsp;the&nbsp;same&nbsp;using&nbsp;re&#39;s&nbsp;String&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="6773062">func</span>&nbsp;<span class="ident" id="6773067">dumpRegexp</span><span class="op" id="6773077">(</span><span class="ident" id="6773078">b</span>&nbsp;<span class="op" id="6773080">*</span><span class="ident" id="6773081">bytes</span><span class="op" id="6773086">.</span><span class="ident" id="6773087">Buffer</span><span class="op" id="6773093">,</span>&nbsp;<span class="ident" id="6773095">re</span>&nbsp;<span class="op" id="6773098">*</span><span class="ident" id="6773099">Regexp</span><span class="op" id="6773105">)</span>&nbsp;<span class="op" id="6773107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773110">if</span>&nbsp;<span class="builtintype" id="6773113">int</span><span class="op" id="6773116">(</span><span class="ident" id="6773117">re</span><span class="op" id="6773119">.</span><span class="ident" id="6773120">Op</span><span class="op" id="6773122">)</span>&nbsp;<span class="op" id="6773124">&gt;=</span>&nbsp;<span class="builtinfunc" id="6773127">len</span><span class="op" id="6773130">(</span><span class="ident" id="6773131">opNames</span><span class="op" id="6773138">)</span>&nbsp;<span class="op" id="6773140">||</span>&nbsp;<span class="ident" id="6773143">opNames</span><span class="op" id="6773150">[</span><span class="ident" id="6773151">re</span><span class="op" id="6773153">.</span><span class="ident" id="6773154">Op</span><span class="op" id="6773156">]</span>&nbsp;<span class="op" id="6773158">==</span>&nbsp;<span class="string" id="6773161">&#34;&#34;</span>&nbsp;<span class="op" id="6773164">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773168">fmt</span><span class="op" id="6773171">.</span><span class="ident" id="6773172">Fprintf</span><span class="op" id="6773179">(</span><span class="ident" id="6773180">b</span><span class="op" id="6773181">,</span>&nbsp;<span class="string" id="6773183">&#34;op%d&#34;</span><span class="op" id="6773189">,</span>&nbsp;<span class="ident" id="6773191">re</span><span class="op" id="6773193">.</span><span class="ident" id="6773194">Op</span><span class="op" id="6773196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6773199">}</span>&nbsp;<span class="keyword" id="6773201">else</span>&nbsp;<span class="op" id="6773206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773210">switch</span>&nbsp;<span class="ident" id="6773217">re</span><span class="op" id="6773219">.</span><span class="ident" id="6773220">Op</span>&nbsp;<span class="op" id="6773223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773227">default</span><span class="op" id="6773234">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773239">b</span><span class="op" id="6773240">.</span><span class="ident" id="6773241">WriteString</span><span class="op" id="6773252">(</span><span class="ident" id="6773253">opNames</span><span class="op" id="6773260">[</span><span class="ident" id="6773261">re</span><span class="op" id="6773263">.</span><span class="ident" id="6773264">Op</span><span class="op" id="6773266">]</span><span class="op" id="6773267">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773271">case</span>&nbsp;<span class="ident" id="6773276">OpStar</span><span class="op" id="6773282">,</span>&nbsp;<span class="ident" id="6773284">OpPlus</span><span class="op" id="6773290">,</span>&nbsp;<span class="ident" id="6773292">OpQuest</span><span class="op" id="6773299">,</span>&nbsp;<span class="ident" id="6773301">OpRepeat</span><span class="op" id="6773309">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773314">if</span>&nbsp;<span class="ident" id="6773317">re</span><span class="op" id="6773319">.</span><span class="ident" id="6773320">Flags</span><span class="op" id="6773325">&amp;</span><span class="ident" id="6773326">NonGreedy</span>&nbsp;<span class="op" id="6773336">!=</span>&nbsp;<span class="num" id="6773339">0</span>&nbsp;<span class="op" id="6773341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773347">b</span><span class="op" id="6773348">.</span><span class="ident" id="6773349">WriteByte</span><span class="op" id="6773358">(</span><span class="string" id="6773359">&#39;n&#39;</span><span class="op" id="6773362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6773367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773372">b</span><span class="op" id="6773373">.</span><span class="ident" id="6773374">WriteString</span><span class="op" id="6773385">(</span><span class="ident" id="6773386">opNames</span><span class="op" id="6773393">[</span><span class="ident" id="6773394">re</span><span class="op" id="6773396">.</span><span class="ident" id="6773397">Op</span><span class="op" id="6773399">]</span><span class="op" id="6773400">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773404">case</span>&nbsp;<span class="ident" id="6773409">OpLiteral</span><span class="op" id="6773418">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773423">if</span>&nbsp;<span class="builtinfunc" id="6773426">len</span><span class="op" id="6773429">(</span><span class="ident" id="6773430">re</span><span class="op" id="6773432">.</span><span class="ident" id="6773433">Rune</span><span class="op" id="6773437">)</span>&nbsp;<span class="op" id="6773439">&gt;</span>&nbsp;<span class="num" id="6773441">1</span>&nbsp;<span class="op" id="6773443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773449">b</span><span class="op" id="6773450">.</span><span class="ident" id="6773451">WriteString</span><span class="op" id="6773462">(</span><span class="string" id="6773463">&#34;str&#34;</span><span class="op" id="6773468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6773473">}</span>&nbsp;<span class="keyword" id="6773475">else</span>&nbsp;<span class="op" id="6773480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773486">b</span><span class="op" id="6773487">.</span><span class="ident" id="6773488">WriteString</span><span class="op" id="6773499">(</span><span class="string" id="6773500">&#34;lit&#34;</span><span class="op" id="6773505">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6773510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773515">if</span>&nbsp;<span class="ident" id="6773518">re</span><span class="op" id="6773520">.</span><span class="ident" id="6773521">Flags</span><span class="op" id="6773526">&amp;</span><span class="ident" id="6773527">FoldCase</span>&nbsp;<span class="op" id="6773536">!=</span>&nbsp;<span class="num" id="6773539">0</span>&nbsp;<span class="op" id="6773541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773547">for</span>&nbsp;<span class="ident" id="6773551">_</span><span class="op" id="6773552">,</span>&nbsp;<span class="ident" id="6773554">r</span>&nbsp;<span class="op" id="6773556">:=</span>&nbsp;<span class="keyword" id="6773559">range</span>&nbsp;<span class="ident" id="6773565">re</span><span class="op" id="6773567">.</span><span class="ident" id="6773568">Rune</span>&nbsp;<span class="op" id="6773573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773580">if</span>&nbsp;<span class="ident" id="6773583">unicode</span><span class="op" id="6773590">.</span><span class="ident" id="6773591">SimpleFold</span><span class="op" id="6773601">(</span><span class="ident" id="6773602">r</span><span class="op" id="6773603">)</span>&nbsp;<span class="op" id="6773605">!=</span>&nbsp;<span class="ident" id="6773608">r</span>&nbsp;<span class="op" id="6773610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773618">b</span><span class="op" id="6773619">.</span><span class="ident" id="6773620">WriteString</span><span class="op" id="6773631">(</span><span class="string" id="6773632">&#34;fold&#34;</span><span class="op" id="6773638">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773646">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6773657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6773663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6773668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6773672">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6773675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773678">b</span><span class="op" id="6773679">.</span><span class="ident" id="6773680">WriteByte</span><span class="op" id="6773689">(</span><span class="string" id="6773690">&#39;{&#39;</span><span class="op" id="6773693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773696">switch</span>&nbsp;<span class="ident" id="6773703">re</span><span class="op" id="6773705">.</span><span class="ident" id="6773706">Op</span>&nbsp;<span class="op" id="6773709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773712">case</span>&nbsp;<span class="ident" id="6773717">OpEndText</span><span class="op" id="6773726">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773730">if</span>&nbsp;<span class="ident" id="6773733">re</span><span class="op" id="6773735">.</span><span class="ident" id="6773736">Flags</span><span class="op" id="6773741">&amp;</span><span class="ident" id="6773742">WasDollar</span>&nbsp;<span class="op" id="6773752">==</span>&nbsp;<span class="num" id="6773755">0</span>&nbsp;<span class="op" id="6773757">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773762">b</span><span class="op" id="6773763">.</span><span class="ident" id="6773764">WriteString</span><span class="op" id="6773775">(</span><span class="string" id="6773776">`\z`</span><span class="op" id="6773780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6773784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773787">case</span>&nbsp;<span class="ident" id="6773792">OpLiteral</span><span class="op" id="6773801">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773805">for</span>&nbsp;<span class="ident" id="6773809">_</span><span class="op" id="6773810">,</span>&nbsp;<span class="ident" id="6773812">r</span>&nbsp;<span class="op" id="6773814">:=</span>&nbsp;<span class="keyword" id="6773817">range</span>&nbsp;<span class="ident" id="6773823">re</span><span class="op" id="6773825">.</span><span class="ident" id="6773826">Rune</span>&nbsp;<span class="op" id="6773831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773836">b</span><span class="op" id="6773837">.</span><span class="ident" id="6773838">WriteRune</span><span class="op" id="6773847">(</span><span class="ident" id="6773848">r</span><span class="op" id="6773849">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6773853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773856">case</span>&nbsp;<span class="ident" id="6773861">OpConcat</span><span class="op" id="6773869">,</span>&nbsp;<span class="ident" id="6773871">OpAlternate</span><span class="op" id="6773882">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773886">for</span>&nbsp;<span class="ident" id="6773890">_</span><span class="op" id="6773891">,</span>&nbsp;<span class="ident" id="6773893">sub</span>&nbsp;<span class="op" id="6773897">:=</span>&nbsp;<span class="keyword" id="6773900">range</span>&nbsp;<span class="ident" id="6773906">re</span><span class="op" id="6773908">.</span><span class="ident" id="6773909">Sub</span>&nbsp;<span class="op" id="6773913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773918">dumpRegexp</span><span class="op" id="6773928">(</span><span class="ident" id="6773929">b</span><span class="op" id="6773930">,</span>&nbsp;<span class="ident" id="6773932">sub</span><span class="op" id="6773935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6773939">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773942">case</span>&nbsp;<span class="ident" id="6773947">OpStar</span><span class="op" id="6773953">,</span>&nbsp;<span class="ident" id="6773955">OpPlus</span><span class="op" id="6773961">,</span>&nbsp;<span class="ident" id="6773963">OpQuest</span><span class="op" id="6773970">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773974">dumpRegexp</span><span class="op" id="6773984">(</span><span class="ident" id="6773985">b</span><span class="op" id="6773986">,</span>&nbsp;<span class="ident" id="6773988">re</span><span class="op" id="6773990">.</span><span class="ident" id="6773991">Sub</span><span class="op" id="6773994">[</span><span class="num" id="6773995">0</span><span class="op" id="6773996">]</span><span class="op" id="6773997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774000">case</span>&nbsp;<span class="ident" id="6774005">OpRepeat</span><span class="op" id="6774013">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774017">fmt</span><span class="op" id="6774020">.</span><span class="ident" id="6774021">Fprintf</span><span class="op" id="6774028">(</span><span class="ident" id="6774029">b</span><span class="op" id="6774030">,</span>&nbsp;<span class="string" id="6774032">&#34;%d,%d&nbsp;&#34;</span><span class="op" id="6774040">,</span>&nbsp;<span class="ident" id="6774042">re</span><span class="op" id="6774044">.</span><span class="ident" id="6774045">Min</span><span class="op" id="6774048">,</span>&nbsp;<span class="ident" id="6774050">re</span><span class="op" id="6774052">.</span><span class="ident" id="6774053">Max</span><span class="op" id="6774056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774060">dumpRegexp</span><span class="op" id="6774070">(</span><span class="ident" id="6774071">b</span><span class="op" id="6774072">,</span>&nbsp;<span class="ident" id="6774074">re</span><span class="op" id="6774076">.</span><span class="ident" id="6774077">Sub</span><span class="op" id="6774080">[</span><span class="num" id="6774081">0</span><span class="op" id="6774082">]</span><span class="op" id="6774083">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774086">case</span>&nbsp;<span class="ident" id="6774091">OpCapture</span><span class="op" id="6774100">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774104">if</span>&nbsp;<span class="ident" id="6774107">re</span><span class="op" id="6774109">.</span><span class="ident" id="6774110">Name</span>&nbsp;<span class="op" id="6774115">!=</span>&nbsp;<span class="string" id="6774118">&#34;&#34;</span>&nbsp;<span class="op" id="6774121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774126">b</span><span class="op" id="6774127">.</span><span class="ident" id="6774128">WriteString</span><span class="op" id="6774139">(</span><span class="ident" id="6774140">re</span><span class="op" id="6774142">.</span><span class="ident" id="6774143">Name</span><span class="op" id="6774147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774152">b</span><span class="op" id="6774153">.</span><span class="ident" id="6774154">WriteByte</span><span class="op" id="6774163">(</span><span class="string" id="6774164">&#39;:&#39;</span><span class="op" id="6774167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774171">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774175">dumpRegexp</span><span class="op" id="6774185">(</span><span class="ident" id="6774186">b</span><span class="op" id="6774187">,</span>&nbsp;<span class="ident" id="6774189">re</span><span class="op" id="6774191">.</span><span class="ident" id="6774192">Sub</span><span class="op" id="6774195">[</span><span class="num" id="6774196">0</span><span class="op" id="6774197">]</span><span class="op" id="6774198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774201">case</span>&nbsp;<span class="ident" id="6774206">OpCharClass</span><span class="op" id="6774217">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774221">sep</span>&nbsp;<span class="op" id="6774225">:=</span>&nbsp;<span class="string" id="6774228">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774233">for</span>&nbsp;<span class="ident" id="6774237">i</span>&nbsp;<span class="op" id="6774239">:=</span>&nbsp;<span class="num" id="6774242">0</span><span class="op" id="6774243">;</span>&nbsp;<span class="ident" id="6774245">i</span>&nbsp;<span class="op" id="6774247">&lt;</span>&nbsp;<span class="builtinfunc" id="6774249">len</span><span class="op" id="6774252">(</span><span class="ident" id="6774253">re</span><span class="op" id="6774255">.</span><span class="ident" id="6774256">Rune</span><span class="op" id="6774260">)</span><span class="op" id="6774261">;</span>&nbsp;<span class="ident" id="6774263">i</span>&nbsp;<span class="op" id="6774265">+=</span>&nbsp;<span class="num" id="6774268">2</span>&nbsp;<span class="op" id="6774270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774275">b</span><span class="op" id="6774276">.</span><span class="ident" id="6774277">WriteString</span><span class="op" id="6774288">(</span><span class="ident" id="6774289">sep</span><span class="op" id="6774292">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774297">sep</span>&nbsp;<span class="op" id="6774301">=</span>&nbsp;<span class="string" id="6774303">&#34;&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774310">lo</span><span class="op" id="6774312">,</span>&nbsp;<span class="ident" id="6774314">hi</span>&nbsp;<span class="op" id="6774317">:=</span>&nbsp;<span class="ident" id="6774320">re</span><span class="op" id="6774322">.</span><span class="ident" id="6774323">Rune</span><span class="op" id="6774327">[</span><span class="ident" id="6774328">i</span><span class="op" id="6774329">]</span><span class="op" id="6774330">,</span>&nbsp;<span class="ident" id="6774332">re</span><span class="op" id="6774334">.</span><span class="ident" id="6774335">Rune</span><span class="op" id="6774339">[</span><span class="ident" id="6774340">i</span><span class="op" id="6774341">+</span><span class="num" id="6774342">1</span><span class="op" id="6774343">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774348">if</span>&nbsp;<span class="ident" id="6774351">lo</span>&nbsp;<span class="op" id="6774354">==</span>&nbsp;<span class="ident" id="6774357">hi</span>&nbsp;<span class="op" id="6774360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774366">fmt</span><span class="op" id="6774369">.</span><span class="ident" id="6774370">Fprintf</span><span class="op" id="6774377">(</span><span class="ident" id="6774378">b</span><span class="op" id="6774379">,</span>&nbsp;<span class="string" id="6774381">&#34;%#x&#34;</span><span class="op" id="6774386">,</span>&nbsp;<span class="ident" id="6774388">lo</span><span class="op" id="6774390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774395">}</span>&nbsp;<span class="keyword" id="6774397">else</span>&nbsp;<span class="op" id="6774402">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774408">fmt</span><span class="op" id="6774411">.</span><span class="ident" id="6774412">Fprintf</span><span class="op" id="6774419">(</span><span class="ident" id="6774420">b</span><span class="op" id="6774421">,</span>&nbsp;<span class="string" id="6774423">&#34;%#x-%#x&#34;</span><span class="op" id="6774432">,</span>&nbsp;<span class="ident" id="6774434">lo</span><span class="op" id="6774436">,</span>&nbsp;<span class="ident" id="6774438">hi</span><span class="op" id="6774440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774455">b</span><span class="op" id="6774456">.</span><span class="ident" id="6774457">WriteByte</span><span class="op" id="6774466">(</span><span class="string" id="6774467">&#39;}&#39;</span><span class="op" id="6774470">)</span><br>
<span class="lineno">380</span><span class="op" id="6774472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6774475">func</span>&nbsp;<span class="ident" id="6774480">mkCharClass</span><span class="op" id="6774491">(</span><span class="ident" id="6774492">f</span>&nbsp;<span class="keyword" id="6774494">func</span><span class="op" id="6774498">(</span><span class="builtintype" id="6774499">rune</span><span class="op" id="6774503">)</span>&nbsp;<span class="builtintype" id="6774505">bool</span><span class="op" id="6774509">)</span>&nbsp;<span class="builtintype" id="6774511">string</span>&nbsp;<span class="op" id="6774518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774521">re</span>&nbsp;<span class="op" id="6774524">:=</span>&nbsp;<span class="op" id="6774527">&amp;</span><span class="ident" id="6774528">Regexp</span><span class="op" id="6774534">{</span><span class="ident" id="6774535">Op</span><span class="op" id="6774537">:</span>&nbsp;<span class="ident" id="6774539">OpCharClass</span><span class="op" id="6774550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774553">lo</span>&nbsp;<span class="op" id="6774556">:=</span>&nbsp;<span class="builtintype" id="6774559">rune</span><span class="op" id="6774563">(</span><span class="op" id="6774564">-</span><span class="num" id="6774565">1</span><span class="op" id="6774566">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774569">for</span>&nbsp;<span class="ident" id="6774573">i</span>&nbsp;<span class="op" id="6774575">:=</span>&nbsp;<span class="builtintype" id="6774578">rune</span><span class="op" id="6774582">(</span><span class="num" id="6774583">0</span><span class="op" id="6774584">)</span><span class="op" id="6774585">;</span>&nbsp;<span class="ident" id="6774587">i</span>&nbsp;<span class="op" id="6774589">&lt;=</span>&nbsp;<span class="ident" id="6774592">unicode</span><span class="op" id="6774599">.</span><span class="ident" id="6774600">MaxRune</span><span class="op" id="6774607">;</span>&nbsp;<span class="ident" id="6774609">i</span><span class="op" id="6774610">++</span>&nbsp;<span class="op" id="6774613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774617">if</span>&nbsp;<span class="ident" id="6774620">f</span><span class="op" id="6774621">(</span><span class="ident" id="6774622">i</span><span class="op" id="6774623">)</span>&nbsp;<span class="op" id="6774625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774630">if</span>&nbsp;<span class="ident" id="6774633">lo</span>&nbsp;<span class="op" id="6774636">&lt;</span>&nbsp;<span class="num" id="6774638">0</span>&nbsp;<span class="op" id="6774640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774646">lo</span>&nbsp;<span class="op" id="6774649">=</span>&nbsp;<span class="ident" id="6774651">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774656">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774660">}</span>&nbsp;<span class="keyword" id="6774662">else</span>&nbsp;<span class="op" id="6774667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774672">if</span>&nbsp;<span class="ident" id="6774675">lo</span>&nbsp;<span class="op" id="6774678">&gt;=</span>&nbsp;<span class="num" id="6774681">0</span>&nbsp;<span class="op" id="6774683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774689">re</span><span class="op" id="6774691">.</span><span class="ident" id="6774692">Rune</span>&nbsp;<span class="op" id="6774697">=</span>&nbsp;<span class="builtinfunc" id="6774699">append</span><span class="op" id="6774705">(</span><span class="ident" id="6774706">re</span><span class="op" id="6774708">.</span><span class="ident" id="6774709">Rune</span><span class="op" id="6774713">,</span>&nbsp;<span class="ident" id="6774715">lo</span><span class="op" id="6774717">,</span>&nbsp;<span class="ident" id="6774719">i</span><span class="op" id="6774720">-</span><span class="num" id="6774721">1</span><span class="op" id="6774722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774728">lo</span>&nbsp;<span class="op" id="6774731">=</span>&nbsp;<span class="op" id="6774733">-</span><span class="num" id="6774734">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774739">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774749">if</span>&nbsp;<span class="ident" id="6774752">lo</span>&nbsp;<span class="op" id="6774755">&gt;=</span>&nbsp;<span class="num" id="6774758">0</span>&nbsp;<span class="op" id="6774760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774764">re</span><span class="op" id="6774766">.</span><span class="ident" id="6774767">Rune</span>&nbsp;<span class="op" id="6774772">=</span>&nbsp;<span class="builtinfunc" id="6774774">append</span><span class="op" id="6774780">(</span><span class="ident" id="6774781">re</span><span class="op" id="6774783">.</span><span class="ident" id="6774784">Rune</span><span class="op" id="6774788">,</span>&nbsp;<span class="ident" id="6774790">lo</span><span class="op" id="6774792">,</span>&nbsp;<span class="ident" id="6774794">unicode</span><span class="op" id="6774801">.</span><span class="ident" id="6774802">MaxRune</span><span class="op" id="6774809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774812">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774815">return</span>&nbsp;<span class="ident" id="6774822">dump</span><span class="op" id="6774826">(</span><span class="ident" id="6774827">re</span><span class="op" id="6774829">)</span><br>
<span class="lineno"></span><span class="op" id="6774831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6774834">func</span>&nbsp;<span class="ident" id="6774839">isUpperFold</span><span class="op" id="6774850">(</span><span class="ident" id="6774851">r</span>&nbsp;<span class="builtintype" id="6774853">rune</span><span class="op" id="6774857">)</span>&nbsp;<span class="builtintype" id="6774859">bool</span>&nbsp;<span class="op" id="6774864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774867">if</span>&nbsp;<span class="ident" id="6774870">unicode</span><span class="op" id="6774877">.</span><span class="ident" id="6774878">IsUpper</span><span class="op" id="6774885">(</span><span class="ident" id="6774886">r</span><span class="op" id="6774887">)</span>&nbsp;<span class="op" id="6774889">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774893">return</span>&nbsp;<span class="builtintype" id="6774900">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774909">c</span>&nbsp;<span class="op" id="6774911">:=</span>&nbsp;<span class="ident" id="6774914">unicode</span><span class="op" id="6774921">.</span><span class="ident" id="6774922">SimpleFold</span><span class="op" id="6774932">(</span><span class="ident" id="6774933">r</span><span class="op" id="6774934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774937">for</span>&nbsp;<span class="ident" id="6774941">c</span>&nbsp;<span class="op" id="6774943">!=</span>&nbsp;<span class="ident" id="6774946">r</span>&nbsp;<span class="op" id="6774948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774952">if</span>&nbsp;<span class="ident" id="6774955">unicode</span><span class="op" id="6774962">.</span><span class="ident" id="6774963">IsUpper</span><span class="op" id="6774970">(</span><span class="ident" id="6774971">c</span><span class="op" id="6774972">)</span>&nbsp;<span class="op" id="6774974">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774979">return</span>&nbsp;<span class="builtintype" id="6774986">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774997">c</span>&nbsp;<span class="op" id="6774999">=</span>&nbsp;<span class="ident" id="6775001">unicode</span><span class="op" id="6775008">.</span><span class="ident" id="6775009">SimpleFold</span><span class="op" id="6775019">(</span><span class="ident" id="6775020">c</span><span class="op" id="6775021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6775024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6775027">return</span>&nbsp;<span class="builtintype" id="6775034">false</span><br>
<span class="lineno">415</span><span class="op" id="6775040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6775043">func</span>&nbsp;<span class="ident" id="6775048">TestFoldConstants</span><span class="op" id="6775065">(</span><span class="ident" id="6775066">t</span>&nbsp;<span class="op" id="6775068">*</span><span class="ident" id="6775069">testing</span><span class="op" id="6775076">.</span><span class="ident" id="6775077">T</span><span class="op" id="6775078">)</span>&nbsp;<span class="op" id="6775080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6775083">last</span>&nbsp;<span class="op" id="6775088">:=</span>&nbsp;<span class="builtintype" id="6775091">rune</span><span class="op" id="6775095">(</span><span class="op" id="6775096">-</span><span class="num" id="6775097">1</span><span class="op" id="6775098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6775101">for</span>&nbsp;<span class="ident" id="6775105">i</span>&nbsp;<span class="op" id="6775107">:=</span>&nbsp;<span class="builtintype" id="6775110">rune</span><span class="op" id="6775114">(</span><span class="num" id="6775115">0</span><span class="op" id="6775116">)</span><span class="op" id="6775117">;</span>&nbsp;<span class="ident" id="6775119">i</span>&nbsp;<span class="op" id="6775121">&lt;=</span>&nbsp;<span class="ident" id="6775124">unicode</span><span class="op" id="6775131">.</span><span class="ident" id="6775132">MaxRune</span><span class="op" id="6775139">;</span>&nbsp;<span class="ident" id="6775141">i</span><span class="op" id="6775142">++</span>&nbsp;<span class="op" id="6775145">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6775149">if</span>&nbsp;<span class="ident" id="6775152">unicode</span><span class="op" id="6775159">.</span><span class="ident" id="6775160">SimpleFold</span><span class="op" id="6775170">(</span><span class="ident" id="6775171">i</span><span class="op" id="6775172">)</span>&nbsp;<span class="op" id="6775174">==</span>&nbsp;<span class="ident" id="6775177">i</span>&nbsp;<span class="op" id="6775179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6775184">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6775195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6775199">if</span>&nbsp;<span class="ident" id="6775202">last</span>&nbsp;<span class="op" id="6775207">==</span>&nbsp;<span class="op" id="6775210">-</span><span class="num" id="6775211">1</span>&nbsp;<span class="op" id="6775213">&amp;&amp;</span>&nbsp;<span class="ident" id="6775216">minFold</span>&nbsp;<span class="op" id="6775224">!=</span>&nbsp;<span class="ident" id="6775227">i</span>&nbsp;<span class="op" id="6775229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6775234">t</span><span class="op" id="6775235">.</span><span class="ident" id="6775236">Errorf</span><span class="op" id="6775242">(</span><span class="string" id="6775243">&#34;minFold=%#U&nbsp;should&nbsp;be&nbsp;%#U&#34;</span><span class="op" id="6775270">,</span>&nbsp;<span class="ident" id="6775272">minFold</span><span class="op" id="6775279">,</span>&nbsp;<span class="ident" id="6775281">i</span><span class="op" id="6775282">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6775286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6775290">last</span>&nbsp;<span class="op" id="6775295">=</span>&nbsp;<span class="ident" id="6775297">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6775300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6775303">if</span>&nbsp;<span class="ident" id="6775306">maxFold</span>&nbsp;<span class="op" id="6775314">!=</span>&nbsp;<span class="ident" id="6775317">last</span>&nbsp;<span class="op" id="6775322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6775326">t</span><span class="op" id="6775327">.</span><span class="ident" id="6775328">Errorf</span><span class="op" id="6775334">(</span><span class="string" id="6775335">&#34;maxFold=%#U&nbsp;should&nbsp;be&nbsp;%#U&#34;</span><span class="op" id="6775362">,</span>&nbsp;<span class="ident" id="6775364">maxFold</span><span class="op" id="6775371">,</span>&nbsp;<span class="ident" id="6775373">last</span><span class="op" id="6775377">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6775380">}</span><br>
<span class="lineno"></span><span class="op" id="6775382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6775385">func</span>&nbsp;<span class="ident" id="6775390">TestAppendRangeCollapse</span><span class="op" id="6775413">(</span><span class="ident" id="6775414">t</span>&nbsp;<span class="op" id="6775416">*</span><span class="ident" id="6775417">testing</span><span class="op" id="6775424">.</span><span class="ident" id="6775425">T</span><span class="op" id="6775426">)</span>&nbsp;<span class="op" id="6775428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6775431">//&nbsp;AppendRange&nbsp;should&nbsp;collapse&nbsp;each&nbsp;of&nbsp;the&nbsp;new&nbsp;ranges</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6775486">//&nbsp;into&nbsp;the&nbsp;earlier&nbsp;ones&nbsp;(it&nbsp;looks&nbsp;back&nbsp;two&nbsp;ranges),&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6775548">//&nbsp;the&nbsp;slice&nbsp;never&nbsp;grows&nbsp;very&nbsp;large.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6775586">//&nbsp;Note&nbsp;that&nbsp;we&nbsp;are&nbsp;not&nbsp;calling&nbsp;cleanClass.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6775631">var</span>&nbsp;<span class="ident" id="6775635">r</span>&nbsp;<span class="op" id="6775637">[</span><span class="op" id="6775638">]</span><span class="builtintype" id="6775639">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6775645">for</span>&nbsp;<span class="ident" id="6775649">i</span>&nbsp;<span class="op" id="6775651">:=</span>&nbsp;<span class="builtintype" id="6775654">rune</span><span class="op" id="6775658">(</span><span class="string" id="6775659">&#39;A&#39;</span><span class="op" id="6775662">)</span><span class="op" id="6775663">;</span>&nbsp;<span class="ident" id="6775665">i</span>&nbsp;<span class="op" id="6775667">&lt;=</span>&nbsp;<span class="string" id="6775670">&#39;Z&#39;</span><span class="op" id="6775673">;</span>&nbsp;<span class="ident" id="6775675">i</span><span class="op" id="6775676">++</span>&nbsp;<span class="op" id="6775679">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6775683">r</span>&nbsp;<span class="op" id="6775685">=</span>&nbsp;<span class="ident" id="6775687">appendRange</span><span class="op" id="6775698">(</span><span class="ident" id="6775699">r</span><span class="op" id="6775700">,</span>&nbsp;<span class="ident" id="6775702">i</span><span class="op" id="6775703">,</span>&nbsp;<span class="ident" id="6775705">i</span><span class="op" id="6775706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6775710">r</span>&nbsp;<span class="op" id="6775712">=</span>&nbsp;<span class="ident" id="6775714">appendRange</span><span class="op" id="6775725">(</span><span class="ident" id="6775726">r</span><span class="op" id="6775727">,</span>&nbsp;<span class="ident" id="6775729">i</span><span class="op" id="6775730">+</span><span class="string" id="6775731">&#39;a&#39;</span><span class="op" id="6775734">-</span><span class="string" id="6775735">&#39;A&#39;</span><span class="op" id="6775738">,</span>&nbsp;<span class="ident" id="6775740">i</span><span class="op" id="6775741">+</span><span class="string" id="6775742">&#39;a&#39;</span><span class="op" id="6775745">-</span><span class="string" id="6775746">&#39;A&#39;</span><span class="op" id="6775749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6775752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6775755">if</span>&nbsp;<span class="builtintype" id="6775758">string</span><span class="op" id="6775764">(</span><span class="ident" id="6775765">r</span><span class="op" id="6775766">)</span>&nbsp;<span class="op" id="6775768">!=</span>&nbsp;<span class="string" id="6775771">&#34;AZaz&#34;</span>&nbsp;<span class="op" id="6775778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6775782">t</span><span class="op" id="6775783">.</span><span class="ident" id="6775784">Errorf</span><span class="op" id="6775790">(</span><span class="string" id="6775791">&#34;appendRange&nbsp;interlaced&nbsp;A-Z&nbsp;a-z&nbsp;=&nbsp;%s,&nbsp;want&nbsp;AZaz&#34;</span><span class="op" id="6775839">,</span>&nbsp;<span class="builtintype" id="6775841">string</span><span class="op" id="6775847">(</span><span class="ident" id="6775848">r</span><span class="op" id="6775849">)</span><span class="op" id="6775850">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6775853">}</span><br>
<span class="lineno"></span><span class="op" id="6775855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6775858">var</span>&nbsp;<span class="ident" id="6775862">invalidRegexps</span>&nbsp;<span class="op" id="6775877">=</span>&nbsp;<span class="op" id="6775879">[</span><span class="op" id="6775880">]</span><span class="builtintype" id="6775881">string</span><span class="op" id="6775887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6775890">`(`</span><span class="op" id="6775893">,</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6775896">`)`</span><span class="op" id="6775899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6775902">`(a`</span><span class="op" id="6775906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6775909">`a)`</span><span class="op" id="6775913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6775916">`(a))`</span><span class="op" id="6775922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6775925">`(a|b|`</span><span class="op" id="6775932">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6775935">`a|b|)`</span><span class="op" id="6775942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6775945">`(a|b|))`</span><span class="op" id="6775954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6775957">`(a|b`</span><span class="op" id="6775963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6775966">`a|b)`</span><span class="op" id="6775972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6775975">`(a|b))`</span><span class="op" id="6775983">,</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6775986">`[a-z`</span><span class="op" id="6775992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6775995">`([a-z)`</span><span class="op" id="6776003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776006">`[a-z)`</span><span class="op" id="6776013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776016">`([a-z]))`</span><span class="op" id="6776026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776029">`x{1001}`</span><span class="op" id="6776038">,</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776041">`x{9876543210}`</span><span class="op" id="6776056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776059">`x{2,1}`</span><span class="op" id="6776067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776070">`x{1,9876543210}`</span><span class="op" id="6776087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776090">&#34;\xff&#34;</span><span class="op" id="6776096">,</span>&nbsp;<span class="comment" id="6776098">//&nbsp;Invalid&nbsp;UTF-8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776116">&#34;[\xff]&#34;</span><span class="op" id="6776124">,</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776127">&#34;[\\\xff]&#34;</span><span class="op" id="6776137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776140">&#34;\\\xff&#34;</span><span class="op" id="6776148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776151">`(?P&lt;name&gt;a`</span><span class="op" id="6776163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776166">`(?P&lt;name&gt;`</span><span class="op" id="6776177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776180">`(?P&lt;name`</span><span class="op" id="6776190">,</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776193">`(?P&lt;x&nbsp;y&gt;a)`</span><span class="op" id="6776205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776208">`(?P&lt;&gt;a)`</span><span class="op" id="6776217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776220">`[a-Z]`</span><span class="op" id="6776227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776230">`(?i)[a-Z]`</span><span class="op" id="6776241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776244">`a{100000}`</span><span class="op" id="6776255">,</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776258">`a{100000,}`</span><span class="op" id="6776270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776273">&#34;((((((((((x{2}){2}){2}){2}){2}){2}){2}){2}){2}){2})&#34;</span><span class="op" id="6776326">,</span><br>
<span class="lineno"></span><span class="op" id="6776328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6776331">var</span>&nbsp;<span class="ident" id="6776335">onlyPerl</span>&nbsp;<span class="op" id="6776344">=</span>&nbsp;<span class="op" id="6776346">[</span><span class="op" id="6776347">]</span><span class="builtintype" id="6776348">string</span><span class="op" id="6776354">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776357">`[a-b-c]`</span><span class="op" id="6776366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776369">`\Qabc\E`</span><span class="op" id="6776378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776381">`\Q*+?{[\E`</span><span class="op" id="6776392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776395">`\Q\\E`</span><span class="op" id="6776402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776405">`\Q\\\E`</span><span class="op" id="6776413">,</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776416">`\Q\\\\E`</span><span class="op" id="6776425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776428">`\Q\\\\\E`</span><span class="op" id="6776438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776441">`(?:a)`</span><span class="op" id="6776448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776451">`(?P&lt;name&gt;a)`</span><span class="op" id="6776464">,</span><br>
<span class="lineno"></span><span class="op" id="6776466">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="keyword" id="6776469">var</span>&nbsp;<span class="ident" id="6776473">onlyPOSIX</span>&nbsp;<span class="op" id="6776483">=</span>&nbsp;<span class="op" id="6776485">[</span><span class="op" id="6776486">]</span><span class="builtintype" id="6776487">string</span><span class="op" id="6776493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776496">&#34;a++&#34;</span><span class="op" id="6776501">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776504">&#34;a**&#34;</span><span class="op" id="6776509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776512">&#34;a?*&#34;</span><span class="op" id="6776517">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776520">&#34;a+*&#34;</span><span class="op" id="6776525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776528">&#34;a{1}*&#34;</span><span class="op" id="6776535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6776538">&#34;.{1}{2}.{3}&#34;</span><span class="op" id="6776551">,</span><br>
<span class="lineno"></span><span class="op" id="6776553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span><span class="keyword" id="6776556">func</span>&nbsp;<span class="ident" id="6776561">TestParseInvalidRegexps</span><span class="op" id="6776584">(</span><span class="ident" id="6776585">t</span>&nbsp;<span class="op" id="6776587">*</span><span class="ident" id="6776588">testing</span><span class="op" id="6776595">.</span><span class="ident" id="6776596">T</span><span class="op" id="6776597">)</span>&nbsp;<span class="op" id="6776599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6776602">for</span>&nbsp;<span class="ident" id="6776606">_</span><span class="op" id="6776607">,</span>&nbsp;<span class="ident" id="6776609">regexp</span>&nbsp;<span class="op" id="6776616">:=</span>&nbsp;<span class="keyword" id="6776619">range</span>&nbsp;<span class="ident" id="6776625">invalidRegexps</span>&nbsp;<span class="op" id="6776640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6776644">if</span>&nbsp;<span class="ident" id="6776647">re</span><span class="op" id="6776649">,</span>&nbsp;<span class="ident" id="6776651">err</span>&nbsp;<span class="op" id="6776655">:=</span>&nbsp;<span class="ident" id="6776658">Parse</span><span class="op" id="6776663">(</span><span class="ident" id="6776664">regexp</span><span class="op" id="6776670">,</span>&nbsp;<span class="ident" id="6776672">Perl</span><span class="op" id="6776676">)</span><span class="op" id="6776677">;</span>&nbsp;<span class="ident" id="6776679">err</span>&nbsp;<span class="op" id="6776683">==</span>&nbsp;<span class="ident" id="6776686">nil</span>&nbsp;<span class="op" id="6776690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6776695">t</span><span class="op" id="6776696">.</span><span class="ident" id="6776697">Errorf</span><span class="op" id="6776703">(</span><span class="string" id="6776704">&#34;Parse(%#q,&nbsp;Perl)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="6776747">,</span>&nbsp;<span class="ident" id="6776749">regexp</span><span class="op" id="6776755">,</span>&nbsp;<span class="ident" id="6776757">dump</span><span class="op" id="6776761">(</span><span class="ident" id="6776762">re</span><span class="op" id="6776764">)</span><span class="op" id="6776765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6776769">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6776773">if</span>&nbsp;<span class="ident" id="6776776">re</span><span class="op" id="6776778">,</span>&nbsp;<span class="ident" id="6776780">err</span>&nbsp;<span class="op" id="6776784">:=</span>&nbsp;<span class="ident" id="6776787">Parse</span><span class="op" id="6776792">(</span><span class="ident" id="6776793">regexp</span><span class="op" id="6776799">,</span>&nbsp;<span class="ident" id="6776801">POSIX</span><span class="op" id="6776806">)</span><span class="op" id="6776807">;</span>&nbsp;<span class="ident" id="6776809">err</span>&nbsp;<span class="op" id="6776813">==</span>&nbsp;<span class="ident" id="6776816">nil</span>&nbsp;<span class="op" id="6776820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6776825">t</span><span class="op" id="6776826">.</span><span class="ident" id="6776827">Errorf</span><span class="op" id="6776833">(</span><span class="string" id="6776834">&#34;Parse(%#q,&nbsp;POSIX)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="6776878">,</span>&nbsp;<span class="ident" id="6776880">regexp</span><span class="op" id="6776886">,</span>&nbsp;<span class="ident" id="6776888">dump</span><span class="op" id="6776892">(</span><span class="ident" id="6776893">re</span><span class="op" id="6776895">)</span><span class="op" id="6776896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6776900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6776903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6776906">for</span>&nbsp;<span class="ident" id="6776910">_</span><span class="op" id="6776911">,</span>&nbsp;<span class="ident" id="6776913">regexp</span>&nbsp;<span class="op" id="6776920">:=</span>&nbsp;<span class="keyword" id="6776923">range</span>&nbsp;<span class="ident" id="6776929">onlyPerl</span>&nbsp;<span class="op" id="6776938">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6776942">if</span>&nbsp;<span class="ident" id="6776945">_</span><span class="op" id="6776946">,</span>&nbsp;<span class="ident" id="6776948">err</span>&nbsp;<span class="op" id="6776952">:=</span>&nbsp;<span class="ident" id="6776955">Parse</span><span class="op" id="6776960">(</span><span class="ident" id="6776961">regexp</span><span class="op" id="6776967">,</span>&nbsp;<span class="ident" id="6776969">Perl</span><span class="op" id="6776973">)</span><span class="op" id="6776974">;</span>&nbsp;<span class="ident" id="6776976">err</span>&nbsp;<span class="op" id="6776980">!=</span>&nbsp;<span class="ident" id="6776983">nil</span>&nbsp;<span class="op" id="6776987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6776992">t</span><span class="op" id="6776993">.</span><span class="ident" id="6776994">Errorf</span><span class="op" id="6777000">(</span><span class="string" id="6777001">&#34;Parse(%#q,&nbsp;Perl):&nbsp;%v&#34;</span><span class="op" id="6777023">,</span>&nbsp;<span class="ident" id="6777025">regexp</span><span class="op" id="6777031">,</span>&nbsp;<span class="ident" id="6777033">err</span><span class="op" id="6777036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6777040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6777044">if</span>&nbsp;<span class="ident" id="6777047">re</span><span class="op" id="6777049">,</span>&nbsp;<span class="ident" id="6777051">err</span>&nbsp;<span class="op" id="6777055">:=</span>&nbsp;<span class="ident" id="6777058">Parse</span><span class="op" id="6777063">(</span><span class="ident" id="6777064">regexp</span><span class="op" id="6777070">,</span>&nbsp;<span class="ident" id="6777072">POSIX</span><span class="op" id="6777077">)</span><span class="op" id="6777078">;</span>&nbsp;<span class="ident" id="6777080">err</span>&nbsp;<span class="op" id="6777084">==</span>&nbsp;<span class="ident" id="6777087">nil</span>&nbsp;<span class="op" id="6777091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6777096">t</span><span class="op" id="6777097">.</span><span class="ident" id="6777098">Errorf</span><span class="op" id="6777104">(</span><span class="string" id="6777105">&#34;Parse(%#q,&nbsp;POSIX)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="6777149">,</span>&nbsp;<span class="ident" id="6777151">regexp</span><span class="op" id="6777157">,</span>&nbsp;<span class="ident" id="6777159">dump</span><span class="op" id="6777163">(</span><span class="ident" id="6777164">re</span><span class="op" id="6777166">)</span><span class="op" id="6777167">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6777171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6777174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6777177">for</span>&nbsp;<span class="ident" id="6777181">_</span><span class="op" id="6777182">,</span>&nbsp;<span class="ident" id="6777184">regexp</span>&nbsp;<span class="op" id="6777191">:=</span>&nbsp;<span class="keyword" id="6777194">range</span>&nbsp;<span class="ident" id="6777200">onlyPOSIX</span>&nbsp;<span class="op" id="6777210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6777214">if</span>&nbsp;<span class="ident" id="6777217">re</span><span class="op" id="6777219">,</span>&nbsp;<span class="ident" id="6777221">err</span>&nbsp;<span class="op" id="6777225">:=</span>&nbsp;<span class="ident" id="6777228">Parse</span><span class="op" id="6777233">(</span><span class="ident" id="6777234">regexp</span><span class="op" id="6777240">,</span>&nbsp;<span class="ident" id="6777242">Perl</span><span class="op" id="6777246">)</span><span class="op" id="6777247">;</span>&nbsp;<span class="ident" id="6777249">err</span>&nbsp;<span class="op" id="6777253">==</span>&nbsp;<span class="ident" id="6777256">nil</span>&nbsp;<span class="op" id="6777260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6777265">t</span><span class="op" id="6777266">.</span><span class="ident" id="6777267">Errorf</span><span class="op" id="6777273">(</span><span class="string" id="6777274">&#34;Parse(%#q,&nbsp;Perl)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="6777317">,</span>&nbsp;<span class="ident" id="6777319">regexp</span><span class="op" id="6777325">,</span>&nbsp;<span class="ident" id="6777327">dump</span><span class="op" id="6777331">(</span><span class="ident" id="6777332">re</span><span class="op" id="6777334">)</span><span class="op" id="6777335">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6777339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6777343">if</span>&nbsp;<span class="ident" id="6777346">_</span><span class="op" id="6777347">,</span>&nbsp;<span class="ident" id="6777349">err</span>&nbsp;<span class="op" id="6777353">:=</span>&nbsp;<span class="ident" id="6777356">Parse</span><span class="op" id="6777361">(</span><span class="ident" id="6777362">regexp</span><span class="op" id="6777368">,</span>&nbsp;<span class="ident" id="6777370">POSIX</span><span class="op" id="6777375">)</span><span class="op" id="6777376">;</span>&nbsp;<span class="ident" id="6777378">err</span>&nbsp;<span class="op" id="6777382">!=</span>&nbsp;<span class="ident" id="6777385">nil</span>&nbsp;<span class="op" id="6777389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6777394">t</span><span class="op" id="6777395">.</span><span class="ident" id="6777396">Errorf</span><span class="op" id="6777402">(</span><span class="string" id="6777403">&#34;Parse(%#q,&nbsp;POSIX):&nbsp;%v&#34;</span><span class="op" id="6777426">,</span>&nbsp;<span class="ident" id="6777428">regexp</span><span class="op" id="6777434">,</span>&nbsp;<span class="ident" id="6777436">err</span><span class="op" id="6777439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6777443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6777446">}</span><br>
<span class="lineno">530</span><span class="op" id="6777448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6777451">func</span>&nbsp;<span class="ident" id="6777456">TestToStringEquivalentParse</span><span class="op" id="6777483">(</span><span class="ident" id="6777484">t</span>&nbsp;<span class="op" id="6777486">*</span><span class="ident" id="6777487">testing</span><span class="op" id="6777494">.</span><span class="ident" id="6777495">T</span><span class="op" id="6777496">)</span>&nbsp;<span class="op" id="6777498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6777501">for</span>&nbsp;<span class="ident" id="6777505">_</span><span class="op" id="6777506">,</span>&nbsp;<span class="ident" id="6777508">tt</span>&nbsp;<span class="op" id="6777511">:=</span>&nbsp;<span class="keyword" id="6777514">range</span>&nbsp;<span class="ident" id="6777520">parseTests</span>&nbsp;<span class="op" id="6777531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6777535">re</span><span class="op" id="6777537">,</span>&nbsp;<span class="ident" id="6777539">err</span>&nbsp;<span class="op" id="6777543">:=</span>&nbsp;<span class="ident" id="6777546">Parse</span><span class="op" id="6777551">(</span><span class="ident" id="6777552">tt</span><span class="op" id="6777554">.</span><span class="ident" id="6777555">Regexp</span><span class="op" id="6777561">,</span>&nbsp;<span class="ident" id="6777563">testFlags</span><span class="op" id="6777572">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6777576">if</span>&nbsp;<span class="ident" id="6777579">err</span>&nbsp;<span class="op" id="6777583">!=</span>&nbsp;<span class="ident" id="6777586">nil</span>&nbsp;<span class="op" id="6777590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6777595">t</span><span class="op" id="6777596">.</span><span class="ident" id="6777597">Errorf</span><span class="op" id="6777603">(</span><span class="string" id="6777604">&#34;Parse(%#q):&nbsp;%v&#34;</span><span class="op" id="6777620">,</span>&nbsp;<span class="ident" id="6777622">tt</span><span class="op" id="6777624">.</span><span class="ident" id="6777625">Regexp</span><span class="op" id="6777631">,</span>&nbsp;<span class="ident" id="6777633">err</span><span class="op" id="6777636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6777641">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6777652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6777656">if</span>&nbsp;<span class="ident" id="6777659">tt</span><span class="op" id="6777661">.</span><span class="ident" id="6777662">Dump</span>&nbsp;<span class="op" id="6777667">==</span>&nbsp;<span class="string" id="6777670">&#34;&#34;</span>&nbsp;<span class="op" id="6777673">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6777678">//&nbsp;It&nbsp;parsed.&nbsp;That&#39;s&nbsp;all&nbsp;we&nbsp;care&nbsp;about.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6777721">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6777732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6777736">d</span>&nbsp;<span class="op" id="6777738">:=</span>&nbsp;<span class="ident" id="6777741">dump</span><span class="op" id="6777745">(</span><span class="ident" id="6777746">re</span><span class="op" id="6777748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6777752">if</span>&nbsp;<span class="ident" id="6777755">d</span>&nbsp;<span class="op" id="6777757">!=</span>&nbsp;<span class="ident" id="6777760">tt</span><span class="op" id="6777762">.</span><span class="ident" id="6777763">Dump</span>&nbsp;<span class="op" id="6777768">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6777773">t</span><span class="op" id="6777774">.</span><span class="ident" id="6777775">Errorf</span><span class="op" id="6777781">(</span><span class="string" id="6777782">&#34;Parse(%#q).Dump()&nbsp;=&nbsp;%#q&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6777816">,</span>&nbsp;<span class="ident" id="6777818">tt</span><span class="op" id="6777820">.</span><span class="ident" id="6777821">Regexp</span><span class="op" id="6777827">,</span>&nbsp;<span class="ident" id="6777829">d</span><span class="op" id="6777830">,</span>&nbsp;<span class="ident" id="6777832">tt</span><span class="op" id="6777834">.</span><span class="ident" id="6777835">Dump</span><span class="op" id="6777839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6777844">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6777855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6777860">s</span>&nbsp;<span class="op" id="6777862">:=</span>&nbsp;<span class="ident" id="6777865">re</span><span class="op" id="6777867">.</span><span class="ident" id="6777868">String</span><span class="op" id="6777874">(</span><span class="op" id="6777875">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6777879">if</span>&nbsp;<span class="ident" id="6777882">s</span>&nbsp;<span class="op" id="6777884">!=</span>&nbsp;<span class="ident" id="6777887">tt</span><span class="op" id="6777889">.</span><span class="ident" id="6777890">Regexp</span>&nbsp;<span class="op" id="6777897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6777902">//&nbsp;If&nbsp;ToString&nbsp;didn&#39;t&nbsp;return&nbsp;the&nbsp;original&nbsp;regexp,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6777955">//&nbsp;it&nbsp;must&nbsp;have&nbsp;found&nbsp;one&nbsp;with&nbsp;fewer&nbsp;parens.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6778003">//&nbsp;Unfortunately&nbsp;we&nbsp;can&#39;t&nbsp;check&nbsp;the&nbsp;length&nbsp;here,&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6778063">//&nbsp;ToString&nbsp;produces&nbsp;&#34;\\{&#34;&nbsp;for&nbsp;a&nbsp;literal&nbsp;brace,</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6778114">//&nbsp;but&nbsp;&#34;{&#34;&nbsp;is&nbsp;a&nbsp;shorter&nbsp;equivalent&nbsp;in&nbsp;some&nbsp;contexts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6778170">nre</span><span class="op" id="6778173">,</span>&nbsp;<span class="ident" id="6778175">err</span>&nbsp;<span class="op" id="6778179">:=</span>&nbsp;<span class="ident" id="6778182">Parse</span><span class="op" id="6778187">(</span><span class="ident" id="6778188">s</span><span class="op" id="6778189">,</span>&nbsp;<span class="ident" id="6778191">testFlags</span><span class="op" id="6778200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778205">if</span>&nbsp;<span class="ident" id="6778208">err</span>&nbsp;<span class="op" id="6778212">!=</span>&nbsp;<span class="ident" id="6778215">nil</span>&nbsp;<span class="op" id="6778219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6778225">t</span><span class="op" id="6778226">.</span><span class="ident" id="6778227">Errorf</span><span class="op" id="6778233">(</span><span class="string" id="6778234">&#34;Parse(%#q.String()&nbsp;=&nbsp;%#q):&nbsp;%v&#34;</span><span class="op" id="6778265">,</span>&nbsp;<span class="ident" id="6778267">tt</span><span class="op" id="6778269">.</span><span class="ident" id="6778270">Regexp</span><span class="op" id="6778276">,</span>&nbsp;<span class="ident" id="6778278">s</span><span class="op" id="6778279">,</span>&nbsp;<span class="ident" id="6778281">err</span><span class="op" id="6778284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778290">continue</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6778302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6778307">nd</span>&nbsp;<span class="op" id="6778310">:=</span>&nbsp;<span class="ident" id="6778313">dump</span><span class="op" id="6778317">(</span><span class="ident" id="6778318">nre</span><span class="op" id="6778321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778326">if</span>&nbsp;<span class="ident" id="6778329">d</span>&nbsp;<span class="op" id="6778331">!=</span>&nbsp;<span class="ident" id="6778334">nd</span>&nbsp;<span class="op" id="6778337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6778343">t</span><span class="op" id="6778344">.</span><span class="ident" id="6778345">Errorf</span><span class="op" id="6778351">(</span><span class="string" id="6778352">&#34;Parse(%#q)&nbsp;-&gt;&nbsp;%#q;&nbsp;%#q&nbsp;vs&nbsp;%#q&#34;</span><span class="op" id="6778383">,</span>&nbsp;<span class="ident" id="6778385">tt</span><span class="op" id="6778387">.</span><span class="ident" id="6778388">Regexp</span><span class="op" id="6778394">,</span>&nbsp;<span class="ident" id="6778396">s</span><span class="op" id="6778397">,</span>&nbsp;<span class="ident" id="6778399">d</span><span class="op" id="6778400">,</span>&nbsp;<span class="ident" id="6778402">nd</span><span class="op" id="6778404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6778409">}</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6778415">ns</span>&nbsp;<span class="op" id="6778418">:=</span>&nbsp;<span class="ident" id="6778421">nre</span><span class="op" id="6778424">.</span><span class="ident" id="6778425">String</span><span class="op" id="6778431">(</span><span class="op" id="6778432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778437">if</span>&nbsp;<span class="ident" id="6778440">s</span>&nbsp;<span class="op" id="6778442">!=</span>&nbsp;<span class="ident" id="6778445">ns</span>&nbsp;<span class="op" id="6778448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6778454">t</span><span class="op" id="6778455">.</span><span class="ident" id="6778456">Errorf</span><span class="op" id="6778462">(</span><span class="string" id="6778463">&#34;Parse(%#q)&nbsp;-&gt;&nbsp;%#q&nbsp;-&gt;&nbsp;%#q&#34;</span><span class="op" id="6778489">,</span>&nbsp;<span class="ident" id="6778491">tt</span><span class="op" id="6778493">.</span><span class="ident" id="6778494">Regexp</span><span class="op" id="6778500">,</span>&nbsp;<span class="ident" id="6778502">s</span><span class="op" id="6778503">,</span>&nbsp;<span class="ident" id="6778505">ns</span><span class="op" id="6778507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6778512">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6778516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6778519">}</span><br>
<span class="lineno"></span><span class="op" id="6778521">}</span>
</div>
</body>
</html>
