<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/adler32</h2>
<ul>
<li><a href="/gostd/hash/adler32/adler32.go.html">adler32.go</a></li>
<li><a href="/gostd/hash/adler32/adler32_test.go.html" class="current">adler32_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7180515">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7180570">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7180624">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7180675">package</span>&nbsp;<span class="ident" id="7180683">adler32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7180692">import</span>&nbsp;<span class="op" id="7180699">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7180702">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7180713">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7180723">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7180726">var</span>&nbsp;<span class="ident" id="7180730">golden</span>&nbsp;<span class="op" id="7180737">=</span>&nbsp;<span class="op" id="7180739">[</span><span class="op" id="7180740">]</span><span class="keyword" id="7180741">struct</span>&nbsp;<span class="op" id="7180748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180751">out</span>&nbsp;<span class="builtintype" id="7180755">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180763">in</span>&nbsp;&nbsp;<span class="builtintype" id="7180767">string</span><br>
<span class="lineno">15</span><span class="op" id="7180774">}</span><span class="op" id="7180775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180778">{</span><span class="num" id="7180779">0x00000001</span><span class="op" id="7180789">,</span>&nbsp;<span class="string" id="7180791">&#34;&#34;</span><span class="op" id="7180793">}</span><span class="op" id="7180794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180797">{</span><span class="num" id="7180798">0x00620062</span><span class="op" id="7180808">,</span>&nbsp;<span class="string" id="7180810">&#34;a&#34;</span><span class="op" id="7180813">}</span><span class="op" id="7180814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180817">{</span><span class="num" id="7180818">0x012600c4</span><span class="op" id="7180828">,</span>&nbsp;<span class="string" id="7180830">&#34;ab&#34;</span><span class="op" id="7180834">}</span><span class="op" id="7180835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180838">{</span><span class="num" id="7180839">0x024d0127</span><span class="op" id="7180849">,</span>&nbsp;<span class="string" id="7180851">&#34;abc&#34;</span><span class="op" id="7180856">}</span><span class="op" id="7180857">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180860">{</span><span class="num" id="7180861">0x03d8018b</span><span class="op" id="7180871">,</span>&nbsp;<span class="string" id="7180873">&#34;abcd&#34;</span><span class="op" id="7180879">}</span><span class="op" id="7180880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180883">{</span><span class="num" id="7180884">0x05c801f0</span><span class="op" id="7180894">,</span>&nbsp;<span class="string" id="7180896">&#34;abcde&#34;</span><span class="op" id="7180903">}</span><span class="op" id="7180904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180907">{</span><span class="num" id="7180908">0x081e0256</span><span class="op" id="7180918">,</span>&nbsp;<span class="string" id="7180920">&#34;abcdef&#34;</span><span class="op" id="7180928">}</span><span class="op" id="7180929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180932">{</span><span class="num" id="7180933">0x0adb02bd</span><span class="op" id="7180943">,</span>&nbsp;<span class="string" id="7180945">&#34;abcdefg&#34;</span><span class="op" id="7180954">}</span><span class="op" id="7180955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180958">{</span><span class="num" id="7180959">0x0e000325</span><span class="op" id="7180969">,</span>&nbsp;<span class="string" id="7180971">&#34;abcdefgh&#34;</span><span class="op" id="7180981">}</span><span class="op" id="7180982">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180985">{</span><span class="num" id="7180986">0x118e038e</span><span class="op" id="7180996">,</span>&nbsp;<span class="string" id="7180998">&#34;abcdefghi&#34;</span><span class="op" id="7181009">}</span><span class="op" id="7181010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181013">{</span><span class="num" id="7181014">0x158603f8</span><span class="op" id="7181024">,</span>&nbsp;<span class="string" id="7181026">&#34;abcdefghij&#34;</span><span class="op" id="7181038">}</span><span class="op" id="7181039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181042">{</span><span class="num" id="7181043">0x3f090f02</span><span class="op" id="7181053">,</span>&nbsp;<span class="string" id="7181055">&#34;Discard&nbsp;medicine&nbsp;more&nbsp;than&nbsp;two&nbsp;years&nbsp;old.&#34;</span><span class="op" id="7181098">}</span><span class="op" id="7181099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181102">{</span><span class="num" id="7181103">0x46d81477</span><span class="op" id="7181113">,</span>&nbsp;<span class="string" id="7181115">&#34;He&nbsp;who&nbsp;has&nbsp;a&nbsp;shady&nbsp;past&nbsp;knows&nbsp;that&nbsp;nice&nbsp;guys&nbsp;finish&nbsp;last.&#34;</span><span class="op" id="7181174">}</span><span class="op" id="7181175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181178">{</span><span class="num" id="7181179">0x40ee0ee1</span><span class="op" id="7181189">,</span>&nbsp;<span class="string" id="7181191">&#34;I&nbsp;wouldn&#39;t&nbsp;marry&nbsp;him&nbsp;with&nbsp;a&nbsp;ten&nbsp;foot&nbsp;pole.&#34;</span><span class="op" id="7181235">}</span><span class="op" id="7181236">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181239">{</span><span class="num" id="7181240">0x16661315</span><span class="op" id="7181250">,</span>&nbsp;<span class="string" id="7181252">&#34;Free!&nbsp;Free!/A&nbsp;trip/to&nbsp;Mars/for&nbsp;900/empty&nbsp;jars/Burma&nbsp;Shave&#34;</span><span class="op" id="7181311">}</span><span class="op" id="7181312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181315">{</span><span class="num" id="7181316">0x5b2e1480</span><span class="op" id="7181326">,</span>&nbsp;<span class="string" id="7181328">&#34;The&nbsp;days&nbsp;of&nbsp;the&nbsp;digital&nbsp;watch&nbsp;are&nbsp;numbered.&nbsp;&nbsp;-Tom&nbsp;Stoppard&#34;</span><span class="op" id="7181388">}</span><span class="op" id="7181389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181392">{</span><span class="num" id="7181393">0x8c3c09ea</span><span class="op" id="7181403">,</span>&nbsp;<span class="string" id="7181405">&#34;Nepal&nbsp;premier&nbsp;won&#39;t&nbsp;resign.&#34;</span><span class="op" id="7181434">}</span><span class="op" id="7181435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181438">{</span><span class="num" id="7181439">0x45ac18fd</span><span class="op" id="7181449">,</span>&nbsp;<span class="string" id="7181451">&#34;For&nbsp;every&nbsp;action&nbsp;there&nbsp;is&nbsp;an&nbsp;equal&nbsp;and&nbsp;opposite&nbsp;government&nbsp;program.&#34;</span><span class="op" id="7181520">}</span><span class="op" id="7181521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181524">{</span><span class="num" id="7181525">0x53c61462</span><span class="op" id="7181535">,</span>&nbsp;<span class="string" id="7181537">&#34;His&nbsp;money&nbsp;is&nbsp;twice&nbsp;tainted:&nbsp;&#39;taint&nbsp;yours&nbsp;and&nbsp;&#39;taint&nbsp;mine.&#34;</span><span class="op" id="7181596">}</span><span class="op" id="7181597">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181600">{</span><span class="num" id="7181601">0x7e511e63</span><span class="op" id="7181611">,</span>&nbsp;<span class="string" id="7181613">&#34;There&nbsp;is&nbsp;no&nbsp;reason&nbsp;for&nbsp;any&nbsp;individual&nbsp;to&nbsp;have&nbsp;a&nbsp;computer&nbsp;in&nbsp;their&nbsp;home.&nbsp;-Ken&nbsp;Olsen,&nbsp;1977&#34;</span><span class="op" id="7181703">}</span><span class="op" id="7181704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181707">{</span><span class="num" id="7181708">0xe4801a6a</span><span class="op" id="7181718">,</span>&nbsp;<span class="string" id="7181720">&#34;It&#39;s&nbsp;a&nbsp;tiny&nbsp;change&nbsp;to&nbsp;the&nbsp;code&nbsp;and&nbsp;not&nbsp;completely&nbsp;disgusting.&nbsp;-&nbsp;Bob&nbsp;Manchek&#34;</span><span class="op" id="7181797">}</span><span class="op" id="7181798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181801">{</span><span class="num" id="7181802">0x61b507df</span><span class="op" id="7181812">,</span>&nbsp;<span class="string" id="7181814">&#34;size:&nbsp;&nbsp;a.out:&nbsp;&nbsp;bad&nbsp;magic&#34;</span><span class="op" id="7181840">}</span><span class="op" id="7181841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181844">{</span><span class="num" id="7181845">0xb8631171</span><span class="op" id="7181855">,</span>&nbsp;<span class="string" id="7181857">&#34;The&nbsp;major&nbsp;problem&nbsp;is&nbsp;with&nbsp;sendmail.&nbsp;&nbsp;-Mark&nbsp;Horton&#34;</span><span class="op" id="7181908">}</span><span class="op" id="7181909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181912">{</span><span class="num" id="7181913">0x8b5e1904</span><span class="op" id="7181923">,</span>&nbsp;<span class="string" id="7181925">&#34;Give&nbsp;me&nbsp;a&nbsp;rock,&nbsp;paper&nbsp;and&nbsp;scissors&nbsp;and&nbsp;I&nbsp;will&nbsp;move&nbsp;the&nbsp;world.&nbsp;&nbsp;CCFestoon&#34;</span><span class="op" id="7181999">}</span><span class="op" id="7182000">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182003">{</span><span class="num" id="7182004">0x7cc6102b</span><span class="op" id="7182014">,</span>&nbsp;<span class="string" id="7182016">&#34;If&nbsp;the&nbsp;enemy&nbsp;is&nbsp;within&nbsp;range,&nbsp;then&nbsp;so&nbsp;are&nbsp;you.&#34;</span><span class="op" id="7182064">}</span><span class="op" id="7182065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182068">{</span><span class="num" id="7182069">0x700318e7</span><span class="op" id="7182079">,</span>&nbsp;<span class="string" id="7182081">&#34;It&#39;s&nbsp;well&nbsp;we&nbsp;cannot&nbsp;hear&nbsp;the&nbsp;screams/That&nbsp;we&nbsp;create&nbsp;in&nbsp;others&#39;&nbsp;dreams.&#34;</span><span class="op" id="7182153">}</span><span class="op" id="7182154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182157">{</span><span class="num" id="7182158">0x1e601747</span><span class="op" id="7182168">,</span>&nbsp;<span class="string" id="7182170">&#34;You&nbsp;remind&nbsp;me&nbsp;of&nbsp;a&nbsp;TV&nbsp;show,&nbsp;but&nbsp;that&#39;s&nbsp;all&nbsp;right:&nbsp;I&nbsp;watch&nbsp;it&nbsp;anyway.&#34;</span><span class="op" id="7182240">}</span><span class="op" id="7182241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182244">{</span><span class="num" id="7182245">0xb55b0b09</span><span class="op" id="7182255">,</span>&nbsp;<span class="string" id="7182257">&#34;C&nbsp;is&nbsp;as&nbsp;portable&nbsp;as&nbsp;Stonehedge!!&#34;</span><span class="op" id="7182291">}</span><span class="op" id="7182292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182295">{</span><span class="num" id="7182296">0x39111dd0</span><span class="op" id="7182306">,</span>&nbsp;<span class="string" id="7182308">&#34;Even&nbsp;if&nbsp;I&nbsp;could&nbsp;be&nbsp;Shakespeare,&nbsp;I&nbsp;think&nbsp;I&nbsp;should&nbsp;still&nbsp;choose&nbsp;to&nbsp;be&nbsp;Faraday.&nbsp;-&nbsp;A.&nbsp;Huxley&#34;</span><span class="op" id="7182398">}</span><span class="op" id="7182399">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182402">{</span><span class="num" id="7182403">0x91dd304f</span><span class="op" id="7182413">,</span>&nbsp;<span class="string" id="7182415">&#34;The&nbsp;fugacity&nbsp;of&nbsp;a&nbsp;constituent&nbsp;in&nbsp;a&nbsp;mixture&nbsp;of&nbsp;gases&nbsp;at&nbsp;a&nbsp;given&nbsp;temperature&nbsp;is&nbsp;proportional&nbsp;to&nbsp;its&nbsp;mole&nbsp;fraction.&nbsp;&nbsp;Lewis-Randall&nbsp;Rule&#34;</span><span class="op" id="7182549">}</span><span class="op" id="7182550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182553">{</span><span class="num" id="7182554">0x2e5d1316</span><span class="op" id="7182564">,</span>&nbsp;<span class="string" id="7182566">&#34;How&nbsp;can&nbsp;you&nbsp;write&nbsp;a&nbsp;big&nbsp;system&nbsp;without&nbsp;C++?&nbsp;&nbsp;-Paul&nbsp;Glick&#34;</span><span class="op" id="7182624">}</span><span class="op" id="7182625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182628">{</span><span class="num" id="7182629">0xd0201df6</span><span class="op" id="7182639">,</span>&nbsp;<span class="string" id="7182641">&#34;&#39;Invariant&nbsp;assertions&#39;&nbsp;is&nbsp;the&nbsp;most&nbsp;elegant&nbsp;programming&nbsp;technique!&nbsp;&nbsp;-Tom&nbsp;Szymanski&#34;</span><span class="op" id="7182724">}</span><span class="op" id="7182725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182728">{</span><span class="num" id="7182729">0x211297c8</span><span class="op" id="7182739">,</span>&nbsp;<span class="ident" id="7182741">strings</span><span class="op" id="7182748">.</span><span class="ident" id="7182749">Repeat</span><span class="op" id="7182755">(</span><span class="string" id="7182756">&#34;\xff&#34;</span><span class="op" id="7182762">,</span>&nbsp;<span class="num" id="7182764">5548</span><span class="op" id="7182768">)</span>&nbsp;<span class="op" id="7182770">+</span>&nbsp;<span class="string" id="7182772">&#34;8&#34;</span><span class="op" id="7182775">}</span><span class="op" id="7182776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182779">{</span><span class="num" id="7182780">0xbaa198c8</span><span class="op" id="7182790">,</span>&nbsp;<span class="ident" id="7182792">strings</span><span class="op" id="7182799">.</span><span class="ident" id="7182800">Repeat</span><span class="op" id="7182806">(</span><span class="string" id="7182807">&#34;\xff&#34;</span><span class="op" id="7182813">,</span>&nbsp;<span class="num" id="7182815">5549</span><span class="op" id="7182819">)</span>&nbsp;<span class="op" id="7182821">+</span>&nbsp;<span class="string" id="7182823">&#34;9&#34;</span><span class="op" id="7182826">}</span><span class="op" id="7182827">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182830">{</span><span class="num" id="7182831">0x553499be</span><span class="op" id="7182841">,</span>&nbsp;<span class="ident" id="7182843">strings</span><span class="op" id="7182850">.</span><span class="ident" id="7182851">Repeat</span><span class="op" id="7182857">(</span><span class="string" id="7182858">&#34;\xff&#34;</span><span class="op" id="7182864">,</span>&nbsp;<span class="num" id="7182866">5550</span><span class="op" id="7182870">)</span>&nbsp;<span class="op" id="7182872">+</span>&nbsp;<span class="string" id="7182874">&#34;0&#34;</span><span class="op" id="7182877">}</span><span class="op" id="7182878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182881">{</span><span class="num" id="7182882">0xf0c19abe</span><span class="op" id="7182892">,</span>&nbsp;<span class="ident" id="7182894">strings</span><span class="op" id="7182901">.</span><span class="ident" id="7182902">Repeat</span><span class="op" id="7182908">(</span><span class="string" id="7182909">&#34;\xff&#34;</span><span class="op" id="7182915">,</span>&nbsp;<span class="num" id="7182917">5551</span><span class="op" id="7182921">)</span>&nbsp;<span class="op" id="7182923">+</span>&nbsp;<span class="string" id="7182925">&#34;1&#34;</span><span class="op" id="7182928">}</span><span class="op" id="7182929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182932">{</span><span class="num" id="7182933">0x8d5c9bbe</span><span class="op" id="7182943">,</span>&nbsp;<span class="ident" id="7182945">strings</span><span class="op" id="7182952">.</span><span class="ident" id="7182953">Repeat</span><span class="op" id="7182959">(</span><span class="string" id="7182960">&#34;\xff&#34;</span><span class="op" id="7182966">,</span>&nbsp;<span class="num" id="7182968">5552</span><span class="op" id="7182972">)</span>&nbsp;<span class="op" id="7182974">+</span>&nbsp;<span class="string" id="7182976">&#34;2&#34;</span><span class="op" id="7182979">}</span><span class="op" id="7182980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182983">{</span><span class="num" id="7182984">0x2af69cbe</span><span class="op" id="7182994">,</span>&nbsp;<span class="ident" id="7182996">strings</span><span class="op" id="7183003">.</span><span class="ident" id="7183004">Repeat</span><span class="op" id="7183010">(</span><span class="string" id="7183011">&#34;\xff&#34;</span><span class="op" id="7183017">,</span>&nbsp;<span class="num" id="7183019">5553</span><span class="op" id="7183023">)</span>&nbsp;<span class="op" id="7183025">+</span>&nbsp;<span class="string" id="7183027">&#34;3&#34;</span><span class="op" id="7183030">}</span><span class="op" id="7183031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7183034">{</span><span class="num" id="7183035">0xc9809dbe</span><span class="op" id="7183045">,</span>&nbsp;<span class="ident" id="7183047">strings</span><span class="op" id="7183054">.</span><span class="ident" id="7183055">Repeat</span><span class="op" id="7183061">(</span><span class="string" id="7183062">&#34;\xff&#34;</span><span class="op" id="7183068">,</span>&nbsp;<span class="num" id="7183070">5554</span><span class="op" id="7183074">)</span>&nbsp;<span class="op" id="7183076">+</span>&nbsp;<span class="string" id="7183078">&#34;4&#34;</span><span class="op" id="7183081">}</span><span class="op" id="7183082">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7183085">{</span><span class="num" id="7183086">0x69189ebe</span><span class="op" id="7183096">,</span>&nbsp;<span class="ident" id="7183098">strings</span><span class="op" id="7183105">.</span><span class="ident" id="7183106">Repeat</span><span class="op" id="7183112">(</span><span class="string" id="7183113">&#34;\xff&#34;</span><span class="op" id="7183119">,</span>&nbsp;<span class="num" id="7183121">5555</span><span class="op" id="7183125">)</span>&nbsp;<span class="op" id="7183127">+</span>&nbsp;<span class="string" id="7183129">&#34;5&#34;</span><span class="op" id="7183132">}</span><span class="op" id="7183133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7183136">{</span><span class="num" id="7183137">0x86af0001</span><span class="op" id="7183147">,</span>&nbsp;<span class="ident" id="7183149">strings</span><span class="op" id="7183156">.</span><span class="ident" id="7183157">Repeat</span><span class="op" id="7183163">(</span><span class="string" id="7183164">&#34;\x00&#34;</span><span class="op" id="7183170">,</span>&nbsp;<span class="num" id="7183172">1e5</span><span class="op" id="7183175">)</span><span class="op" id="7183176">}</span><span class="op" id="7183177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7183180">{</span><span class="num" id="7183181">0x79660b4d</span><span class="op" id="7183191">,</span>&nbsp;<span class="ident" id="7183193">strings</span><span class="op" id="7183200">.</span><span class="ident" id="7183201">Repeat</span><span class="op" id="7183207">(</span><span class="string" id="7183208">&#34;a&#34;</span><span class="op" id="7183211">,</span>&nbsp;<span class="num" id="7183213">1e5</span><span class="op" id="7183216">)</span><span class="op" id="7183217">}</span><span class="op" id="7183218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7183221">{</span><span class="num" id="7183222">0x110588ee</span><span class="op" id="7183232">,</span>&nbsp;<span class="ident" id="7183234">strings</span><span class="op" id="7183241">.</span><span class="ident" id="7183242">Repeat</span><span class="op" id="7183248">(</span><span class="string" id="7183249">&#34;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#34;</span><span class="op" id="7183277">,</span>&nbsp;<span class="num" id="7183279">1e4</span><span class="op" id="7183282">)</span><span class="op" id="7183283">}</span><span class="op" id="7183284">,</span><br>
<span class="lineno"></span><span class="op" id="7183286">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="7183289">//&nbsp;checksum&nbsp;is&nbsp;a&nbsp;slow&nbsp;but&nbsp;simple&nbsp;implementation&nbsp;of&nbsp;the&nbsp;Adler-32&nbsp;checksum.</span><br>
<span class="lineno"></span><span class="comment" id="7183363">//&nbsp;It&nbsp;is&nbsp;a&nbsp;straight&nbsp;port&nbsp;of&nbsp;the&nbsp;sample&nbsp;code&nbsp;in&nbsp;RFC&nbsp;1950&nbsp;section&nbsp;9.</span><br>
<span class="lineno"></span><span class="keyword" id="7183430">func</span>&nbsp;<span class="ident" id="7183435">checksum</span><span class="op" id="7183443">(</span><span class="ident" id="7183444">p</span>&nbsp;<span class="op" id="7183446">[</span><span class="op" id="7183447">]</span><span class="builtintype" id="7183448">byte</span><span class="op" id="7183452">)</span>&nbsp;<span class="builtintype" id="7183454">uint32</span>&nbsp;<span class="op" id="7183461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7183464">s1</span><span class="op" id="7183466">,</span>&nbsp;<span class="ident" id="7183468">s2</span>&nbsp;<span class="op" id="7183471">:=</span>&nbsp;<span class="builtintype" id="7183474">uint32</span><span class="op" id="7183480">(</span><span class="num" id="7183481">1</span><span class="op" id="7183482">)</span><span class="op" id="7183483">,</span>&nbsp;<span class="builtintype" id="7183485">uint32</span><span class="op" id="7183491">(</span><span class="num" id="7183492">0</span><span class="op" id="7183493">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7183496">for</span>&nbsp;<span class="ident" id="7183500">_</span><span class="op" id="7183501">,</span>&nbsp;<span class="ident" id="7183503">x</span>&nbsp;<span class="op" id="7183505">:=</span>&nbsp;<span class="keyword" id="7183508">range</span>&nbsp;<span class="ident" id="7183514">p</span>&nbsp;<span class="op" id="7183516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7183520">s1</span>&nbsp;<span class="op" id="7183523">=</span>&nbsp;<span class="op" id="7183525">(</span><span class="ident" id="7183526">s1</span>&nbsp;<span class="op" id="7183529">+</span>&nbsp;<span class="builtintype" id="7183531">uint32</span><span class="op" id="7183537">(</span><span class="ident" id="7183538">x</span><span class="op" id="7183539">)</span><span class="op" id="7183540">)</span>&nbsp;<span class="op" id="7183542">%</span>&nbsp;<span class="ident" id="7183544">mod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7183550">s2</span>&nbsp;<span class="op" id="7183553">=</span>&nbsp;<span class="op" id="7183555">(</span><span class="ident" id="7183556">s2</span>&nbsp;<span class="op" id="7183559">+</span>&nbsp;<span class="ident" id="7183561">s1</span><span class="op" id="7183563">)</span>&nbsp;<span class="op" id="7183565">%</span>&nbsp;<span class="ident" id="7183567">mod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7183572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7183575">return</span>&nbsp;<span class="ident" id="7183582">s2</span><span class="op" id="7183584">&lt;&lt;</span><span class="num" id="7183586">16</span>&nbsp;<span class="op" id="7183589">|</span>&nbsp;<span class="ident" id="7183591">s1</span><br>
<span class="lineno">70</span><span class="op" id="7183594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7183597">func</span>&nbsp;<span class="ident" id="7183602">TestGolden</span><span class="op" id="7183612">(</span><span class="ident" id="7183613">t</span>&nbsp;<span class="op" id="7183615">*</span><span class="ident" id="7183616">testing</span><span class="op" id="7183623">.</span><span class="ident" id="7183624">T</span><span class="op" id="7183625">)</span>&nbsp;<span class="op" id="7183627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7183630">for</span>&nbsp;<span class="ident" id="7183634">_</span><span class="op" id="7183635">,</span>&nbsp;<span class="ident" id="7183637">g</span>&nbsp;<span class="op" id="7183639">:=</span>&nbsp;<span class="keyword" id="7183642">range</span>&nbsp;<span class="ident" id="7183648">golden</span>&nbsp;<span class="op" id="7183655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7183659">in</span>&nbsp;<span class="op" id="7183662">:=</span>&nbsp;<span class="ident" id="7183665">g</span><span class="op" id="7183666">.</span><span class="ident" id="7183667">in</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7183672">if</span>&nbsp;<span class="builtinfunc" id="7183675">len</span><span class="op" id="7183678">(</span><span class="ident" id="7183679">in</span><span class="op" id="7183681">)</span>&nbsp;<span class="op" id="7183683">&gt;</span>&nbsp;<span class="num" id="7183685">220</span>&nbsp;<span class="op" id="7183689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7183694">in</span>&nbsp;<span class="op" id="7183697">=</span>&nbsp;<span class="ident" id="7183699">in</span><span class="op" id="7183701">[</span><span class="op" id="7183702">:</span><span class="num" id="7183703">100</span><span class="op" id="7183706">]</span>&nbsp;<span class="op" id="7183708">+</span>&nbsp;<span class="string" id="7183710">&#34;...&#34;</span>&nbsp;<span class="op" id="7183716">+</span>&nbsp;<span class="ident" id="7183718">in</span><span class="op" id="7183720">[</span><span class="builtinfunc" id="7183721">len</span><span class="op" id="7183724">(</span><span class="ident" id="7183725">in</span><span class="op" id="7183727">)</span><span class="op" id="7183728">-</span><span class="num" id="7183729">100</span><span class="op" id="7183732">:</span><span class="op" id="7183733">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7183737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7183741">p</span>&nbsp;<span class="op" id="7183743">:=</span>&nbsp;<span class="op" id="7183746">[</span><span class="op" id="7183747">]</span><span class="builtintype" id="7183748">byte</span><span class="op" id="7183752">(</span><span class="ident" id="7183753">g</span><span class="op" id="7183754">.</span><span class="ident" id="7183755">in</span><span class="op" id="7183757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7183761">if</span>&nbsp;<span class="ident" id="7183764">got</span>&nbsp;<span class="op" id="7183768">:=</span>&nbsp;<span class="ident" id="7183771">checksum</span><span class="op" id="7183779">(</span><span class="ident" id="7183780">p</span><span class="op" id="7183781">)</span><span class="op" id="7183782">;</span>&nbsp;<span class="ident" id="7183784">got</span>&nbsp;<span class="op" id="7183788">!=</span>&nbsp;<span class="ident" id="7183791">g</span><span class="op" id="7183792">.</span><span class="ident" id="7183793">out</span>&nbsp;<span class="op" id="7183797">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7183802">t</span><span class="op" id="7183803">.</span><span class="ident" id="7183804">Errorf</span><span class="op" id="7183810">(</span><span class="string" id="7183811">&#34;simple&nbsp;implementation:&nbsp;checksum(%q)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="7183865">,</span>&nbsp;<span class="ident" id="7183867">in</span><span class="op" id="7183869">,</span>&nbsp;<span class="ident" id="7183871">got</span><span class="op" id="7183874">,</span>&nbsp;<span class="ident" id="7183876">g</span><span class="op" id="7183877">.</span><span class="ident" id="7183878">out</span><span class="op" id="7183881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7183886">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7183897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7183901">if</span>&nbsp;<span class="ident" id="7183904">got</span>&nbsp;<span class="op" id="7183908">:=</span>&nbsp;<span class="ident" id="7183911">Checksum</span><span class="op" id="7183919">(</span><span class="ident" id="7183920">p</span><span class="op" id="7183921">)</span><span class="op" id="7183922">;</span>&nbsp;<span class="ident" id="7183924">got</span>&nbsp;<span class="op" id="7183928">!=</span>&nbsp;<span class="ident" id="7183931">g</span><span class="op" id="7183932">.</span><span class="ident" id="7183933">out</span>&nbsp;<span class="op" id="7183937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7183942">t</span><span class="op" id="7183943">.</span><span class="ident" id="7183944">Errorf</span><span class="op" id="7183950">(</span><span class="string" id="7183951">&#34;optimized&nbsp;implementation:&nbsp;Checksum(%q)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="7184008">,</span>&nbsp;<span class="ident" id="7184010">in</span><span class="op" id="7184012">,</span>&nbsp;<span class="ident" id="7184014">got</span><span class="op" id="7184017">,</span>&nbsp;<span class="ident" id="7184019">g</span><span class="op" id="7184020">.</span><span class="ident" id="7184021">out</span><span class="op" id="7184024">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7184029">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7184040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7184043">}</span><br>
<span class="lineno"></span><span class="op" id="7184045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="7184048">func</span>&nbsp;<span class="ident" id="7184053">BenchmarkAdler32KB</span><span class="op" id="7184071">(</span><span class="ident" id="7184072">b</span>&nbsp;<span class="op" id="7184074">*</span><span class="ident" id="7184075">testing</span><span class="op" id="7184082">.</span><span class="ident" id="7184083">B</span><span class="op" id="7184084">)</span>&nbsp;<span class="op" id="7184086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7184089">b</span><span class="op" id="7184090">.</span><span class="ident" id="7184091">SetBytes</span><span class="op" id="7184099">(</span><span class="num" id="7184100">1024</span><span class="op" id="7184104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7184107">data</span>&nbsp;<span class="op" id="7184112">:=</span>&nbsp;<span class="builtinfunc" id="7184115">make</span><span class="op" id="7184119">(</span><span class="op" id="7184120">[</span><span class="op" id="7184121">]</span><span class="builtintype" id="7184122">byte</span><span class="op" id="7184126">,</span>&nbsp;<span class="num" id="7184128">1024</span><span class="op" id="7184132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7184135">for</span>&nbsp;<span class="ident" id="7184139">i</span>&nbsp;<span class="op" id="7184141">:=</span>&nbsp;<span class="keyword" id="7184144">range</span>&nbsp;<span class="ident" id="7184150">data</span>&nbsp;<span class="op" id="7184155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7184159">data</span><span class="op" id="7184163">[</span><span class="ident" id="7184164">i</span><span class="op" id="7184165">]</span>&nbsp;<span class="op" id="7184167">=</span>&nbsp;<span class="builtintype" id="7184169">byte</span><span class="op" id="7184173">(</span><span class="ident" id="7184174">i</span><span class="op" id="7184175">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7184178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7184181">h</span>&nbsp;<span class="op" id="7184183">:=</span>&nbsp;<span class="ident" id="7184186">New</span><span class="op" id="7184189">(</span><span class="op" id="7184190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7184193">in</span>&nbsp;<span class="op" id="7184196">:=</span>&nbsp;<span class="builtinfunc" id="7184199">make</span><span class="op" id="7184203">(</span><span class="op" id="7184204">[</span><span class="op" id="7184205">]</span><span class="builtintype" id="7184206">byte</span><span class="op" id="7184210">,</span>&nbsp;<span class="num" id="7184212">0</span><span class="op" id="7184213">,</span>&nbsp;<span class="ident" id="7184215">h</span><span class="op" id="7184216">.</span><span class="ident" id="7184217">Size</span><span class="op" id="7184221">(</span><span class="op" id="7184222">)</span><span class="op" id="7184223">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7184227">b</span><span class="op" id="7184228">.</span><span class="ident" id="7184229">ResetTimer</span><span class="op" id="7184239">(</span><span class="op" id="7184240">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7184243">for</span>&nbsp;<span class="ident" id="7184247">i</span>&nbsp;<span class="op" id="7184249">:=</span>&nbsp;<span class="num" id="7184252">0</span><span class="op" id="7184253">;</span>&nbsp;<span class="ident" id="7184255">i</span>&nbsp;<span class="op" id="7184257">&lt;</span>&nbsp;<span class="ident" id="7184259">b</span><span class="op" id="7184260">.</span><span class="ident" id="7184261">N</span><span class="op" id="7184262">;</span>&nbsp;<span class="ident" id="7184264">i</span><span class="op" id="7184265">++</span>&nbsp;<span class="op" id="7184268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7184272">h</span><span class="op" id="7184273">.</span><span class="ident" id="7184274">Reset</span><span class="op" id="7184279">(</span><span class="op" id="7184280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7184284">h</span><span class="op" id="7184285">.</span><span class="ident" id="7184286">Write</span><span class="op" id="7184291">(</span><span class="ident" id="7184292">data</span><span class="op" id="7184296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7184300">h</span><span class="op" id="7184301">.</span><span class="ident" id="7184302">Sum</span><span class="op" id="7184305">(</span><span class="ident" id="7184306">in</span><span class="op" id="7184308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7184311">}</span><br>
<span class="lineno">105</span><span class="op" id="7184313">}</span>
</div>
</body>
</html>
