<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/cookiejar</h2>
<ul>
<li><a href="/gostd/net/http/cookiejar/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/cookiejar/jar_test.go.html">jar_test.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode.go.html" class="current">punycode.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode_test.go.html">punycode_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5924555">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5924610">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5924664">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5924715">package</span>&nbsp;<span class="ident" id="5924723">cookiejar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5924734">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;the&nbsp;Punycode&nbsp;algorithm&nbsp;from&nbsp;RFC&nbsp;3492.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5924797">import</span>&nbsp;<span class="op" id="5924804">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5924807">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5924814">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5924825">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5924840">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5924843">//&nbsp;These&nbsp;parameter&nbsp;values&nbsp;are&nbsp;specified&nbsp;in&nbsp;section&nbsp;5.</span><br>
<span class="lineno"></span><span class="comment" id="5924897">//</span><br>
<span class="lineno"></span><span class="comment" id="5924900">//&nbsp;All&nbsp;computation&nbsp;is&nbsp;done&nbsp;with&nbsp;int32s,&nbsp;so&nbsp;that&nbsp;overflow&nbsp;behavior&nbsp;is&nbsp;identical</span><br>
<span class="lineno"></span><span class="comment" id="5924979">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;int&nbsp;is&nbsp;32-bit&nbsp;or&nbsp;64-bit.</span><br>
<span class="lineno"></span><span class="keyword" id="5925029">const</span>&nbsp;<span class="op" id="5925035">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925038">base</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5925050">int32</span>&nbsp;<span class="op" id="5925056">=</span>&nbsp;<span class="num" id="5925058">36</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925062">damp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5925074">int32</span>&nbsp;<span class="op" id="5925080">=</span>&nbsp;<span class="num" id="5925082">700</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925087">initialBias</span>&nbsp;<span class="builtintype" id="5925099">int32</span>&nbsp;<span class="op" id="5925105">=</span>&nbsp;<span class="num" id="5925107">72</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925111">initialN</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5925123">int32</span>&nbsp;<span class="op" id="5925129">=</span>&nbsp;<span class="num" id="5925131">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925136">skew</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5925148">int32</span>&nbsp;<span class="op" id="5925154">=</span>&nbsp;<span class="num" id="5925156">38</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925160">tmax</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5925172">int32</span>&nbsp;<span class="op" id="5925178">=</span>&nbsp;<span class="num" id="5925180">26</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925184">tmin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5925196">int32</span>&nbsp;<span class="op" id="5925202">=</span>&nbsp;<span class="num" id="5925204">1</span><br>
<span class="lineno"></span><span class="op" id="5925206">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5925209">//&nbsp;encode&nbsp;encodes&nbsp;a&nbsp;string&nbsp;as&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.3&nbsp;and&nbsp;prepends&nbsp;prefix&nbsp;to</span><br>
<span class="lineno">30</span><span class="comment" id="5925287">//&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span><span class="comment" id="5925302">//</span><br>
<span class="lineno"></span><span class="comment" id="5925305">//&nbsp;The&nbsp;&#34;while&nbsp;h&nbsp;&lt;&nbsp;length(input)&#34;&nbsp;line&nbsp;in&nbsp;the&nbsp;specification&nbsp;becomes&nbsp;&#34;for</span><br>
<span class="lineno"></span><span class="comment" id="5925377">//&nbsp;remaining&nbsp;!=&nbsp;0&#34;&nbsp;in&nbsp;the&nbsp;Go&nbsp;code,&nbsp;because&nbsp;len(s)&nbsp;in&nbsp;Go&nbsp;is&nbsp;in&nbsp;bytes,&nbsp;not&nbsp;runes.</span><br>
<span class="lineno"></span><span class="keyword" id="5925457">func</span>&nbsp;<span class="ident" id="5925462">encode</span><span class="op" id="5925468">(</span><span class="ident" id="5925469">prefix</span><span class="op" id="5925475">,</span>&nbsp;<span class="ident" id="5925477">s</span>&nbsp;<span class="builtintype" id="5925479">string</span><span class="op" id="5925485">)</span>&nbsp;<span class="op" id="5925487">(</span><span class="builtintype" id="5925488">string</span><span class="op" id="5925494">,</span>&nbsp;<span class="builtintype" id="5925496">error</span><span class="op" id="5925501">)</span>&nbsp;<span class="op" id="5925503">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925506">output</span>&nbsp;<span class="op" id="5925513">:=</span>&nbsp;<span class="builtinfunc" id="5925516">make</span><span class="op" id="5925520">(</span><span class="op" id="5925521">[</span><span class="op" id="5925522">]</span><span class="builtintype" id="5925523">byte</span><span class="op" id="5925527">,</span>&nbsp;<span class="builtinfunc" id="5925529">len</span><span class="op" id="5925532">(</span><span class="ident" id="5925533">prefix</span><span class="op" id="5925539">)</span><span class="op" id="5925540">,</span>&nbsp;<span class="builtinfunc" id="5925542">len</span><span class="op" id="5925545">(</span><span class="ident" id="5925546">prefix</span><span class="op" id="5925552">)</span><span class="op" id="5925553">+</span><span class="num" id="5925554">1</span><span class="op" id="5925555">+</span><span class="num" id="5925556">2</span><span class="op" id="5925557">*</span><span class="builtinfunc" id="5925558">len</span><span class="op" id="5925561">(</span><span class="ident" id="5925562">s</span><span class="op" id="5925563">)</span><span class="op" id="5925564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5925567">copy</span><span class="op" id="5925571">(</span><span class="ident" id="5925572">output</span><span class="op" id="5925578">,</span>&nbsp;<span class="ident" id="5925580">prefix</span><span class="op" id="5925586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925589">delta</span><span class="op" id="5925594">,</span>&nbsp;<span class="ident" id="5925596">n</span><span class="op" id="5925597">,</span>&nbsp;<span class="ident" id="5925599">bias</span>&nbsp;<span class="op" id="5925604">:=</span>&nbsp;<span class="builtintype" id="5925607">int32</span><span class="op" id="5925612">(</span><span class="num" id="5925613">0</span><span class="op" id="5925614">)</span><span class="op" id="5925615">,</span>&nbsp;<span class="ident" id="5925617">initialN</span><span class="op" id="5925625">,</span>&nbsp;<span class="ident" id="5925627">initialBias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925640">b</span><span class="op" id="5925641">,</span>&nbsp;<span class="ident" id="5925643">remaining</span>&nbsp;<span class="op" id="5925653">:=</span>&nbsp;<span class="builtintype" id="5925656">int32</span><span class="op" id="5925661">(</span><span class="num" id="5925662">0</span><span class="op" id="5925663">)</span><span class="op" id="5925664">,</span>&nbsp;<span class="builtintype" id="5925666">int32</span><span class="op" id="5925671">(</span><span class="num" id="5925672">0</span><span class="op" id="5925673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925676">for</span>&nbsp;<span class="ident" id="5925680">_</span><span class="op" id="5925681">,</span>&nbsp;<span class="ident" id="5925683">r</span>&nbsp;<span class="op" id="5925685">:=</span>&nbsp;<span class="keyword" id="5925688">range</span>&nbsp;<span class="ident" id="5925694">s</span>&nbsp;<span class="op" id="5925696">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925700">if</span>&nbsp;<span class="ident" id="5925703">r</span>&nbsp;<span class="op" id="5925705">&lt;</span>&nbsp;<span class="num" id="5925707">0x80</span>&nbsp;<span class="op" id="5925712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925717">b</span><span class="op" id="5925718">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925724">output</span>&nbsp;<span class="op" id="5925731">=</span>&nbsp;<span class="builtinfunc" id="5925733">append</span><span class="op" id="5925739">(</span><span class="ident" id="5925740">output</span><span class="op" id="5925746">,</span>&nbsp;<span class="builtintype" id="5925748">byte</span><span class="op" id="5925752">(</span><span class="ident" id="5925753">r</span><span class="op" id="5925754">)</span><span class="op" id="5925755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925759">}</span>&nbsp;<span class="keyword" id="5925761">else</span>&nbsp;<span class="op" id="5925766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925771">remaining</span><span class="op" id="5925780">++</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925791">h</span>&nbsp;<span class="op" id="5925793">:=</span>&nbsp;<span class="ident" id="5925796">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925799">if</span>&nbsp;<span class="ident" id="5925802">b</span>&nbsp;<span class="op" id="5925804">&gt;</span>&nbsp;<span class="num" id="5925806">0</span>&nbsp;<span class="op" id="5925808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925812">output</span>&nbsp;<span class="op" id="5925819">=</span>&nbsp;<span class="builtinfunc" id="5925821">append</span><span class="op" id="5925827">(</span><span class="ident" id="5925828">output</span><span class="op" id="5925834">,</span>&nbsp;<span class="string" id="5925836">&#39;-&#39;</span><span class="op" id="5925839">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925845">for</span>&nbsp;<span class="ident" id="5925849">remaining</span>&nbsp;<span class="op" id="5925859">!=</span>&nbsp;<span class="num" id="5925862">0</span>&nbsp;<span class="op" id="5925864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925868">m</span>&nbsp;<span class="op" id="5925870">:=</span>&nbsp;<span class="builtintype" id="5925873">int32</span><span class="op" id="5925878">(</span><span class="num" id="5925879">0x7fffffff</span><span class="op" id="5925889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925893">for</span>&nbsp;<span class="ident" id="5925897">_</span><span class="op" id="5925898">,</span>&nbsp;<span class="ident" id="5925900">r</span>&nbsp;<span class="op" id="5925902">:=</span>&nbsp;<span class="keyword" id="5925905">range</span>&nbsp;<span class="ident" id="5925911">s</span>&nbsp;<span class="op" id="5925913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925918">if</span>&nbsp;<span class="ident" id="5925921">m</span>&nbsp;<span class="op" id="5925923">&gt;</span>&nbsp;<span class="ident" id="5925925">r</span>&nbsp;<span class="op" id="5925927">&amp;&amp;</span>&nbsp;<span class="ident" id="5925930">r</span>&nbsp;<span class="op" id="5925932">&gt;=</span>&nbsp;<span class="ident" id="5925935">n</span>&nbsp;<span class="op" id="5925937">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925943">m</span>&nbsp;<span class="op" id="5925945">=</span>&nbsp;<span class="ident" id="5925947">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925960">delta</span>&nbsp;<span class="op" id="5925966">+=</span>&nbsp;<span class="op" id="5925969">(</span><span class="ident" id="5925970">m</span>&nbsp;<span class="op" id="5925972">-</span>&nbsp;<span class="ident" id="5925974">n</span><span class="op" id="5925975">)</span>&nbsp;<span class="op" id="5925977">*</span>&nbsp;<span class="op" id="5925979">(</span><span class="ident" id="5925980">h</span>&nbsp;<span class="op" id="5925982">+</span>&nbsp;<span class="num" id="5925984">1</span><span class="op" id="5925985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925989">if</span>&nbsp;<span class="ident" id="5925992">delta</span>&nbsp;<span class="op" id="5925998">&lt;</span>&nbsp;<span class="num" id="5926000">0</span>&nbsp;<span class="op" id="5926002">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926007">return</span>&nbsp;<span class="string" id="5926014">&#34;&#34;</span><span class="op" id="5926016">,</span>&nbsp;<span class="ident" id="5926018">fmt</span><span class="op" id="5926021">.</span><span class="ident" id="5926022">Errorf</span><span class="op" id="5926028">(</span><span class="string" id="5926029">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="5926058">,</span>&nbsp;<span class="ident" id="5926060">s</span><span class="op" id="5926061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926069">n</span>&nbsp;<span class="op" id="5926071">=</span>&nbsp;<span class="ident" id="5926073">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926077">for</span>&nbsp;<span class="ident" id="5926081">_</span><span class="op" id="5926082">,</span>&nbsp;<span class="ident" id="5926084">r</span>&nbsp;<span class="op" id="5926086">:=</span>&nbsp;<span class="keyword" id="5926089">range</span>&nbsp;<span class="ident" id="5926095">s</span>&nbsp;<span class="op" id="5926097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926102">if</span>&nbsp;<span class="ident" id="5926105">r</span>&nbsp;<span class="op" id="5926107">&lt;</span>&nbsp;<span class="ident" id="5926109">n</span>&nbsp;<span class="op" id="5926111">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926117">delta</span><span class="op" id="5926122">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926129">if</span>&nbsp;<span class="ident" id="5926132">delta</span>&nbsp;<span class="op" id="5926138">&lt;</span>&nbsp;<span class="num" id="5926140">0</span>&nbsp;<span class="op" id="5926142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926149">return</span>&nbsp;<span class="string" id="5926156">&#34;&#34;</span><span class="op" id="5926158">,</span>&nbsp;<span class="ident" id="5926160">fmt</span><span class="op" id="5926163">.</span><span class="ident" id="5926164">Errorf</span><span class="op" id="5926170">(</span><span class="string" id="5926171">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="5926200">,</span>&nbsp;<span class="ident" id="5926202">s</span><span class="op" id="5926203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926215">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926232">if</span>&nbsp;<span class="ident" id="5926235">r</span>&nbsp;<span class="op" id="5926237">&gt;</span>&nbsp;<span class="ident" id="5926239">n</span>&nbsp;<span class="op" id="5926241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926247">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926264">q</span>&nbsp;<span class="op" id="5926266">:=</span>&nbsp;<span class="ident" id="5926269">delta</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926278">for</span>&nbsp;<span class="ident" id="5926282">k</span>&nbsp;<span class="op" id="5926284">:=</span>&nbsp;<span class="ident" id="5926287">base</span><span class="op" id="5926291">;</span>&nbsp;<span class="op" id="5926293">;</span>&nbsp;<span class="ident" id="5926295">k</span>&nbsp;<span class="op" id="5926297">+=</span>&nbsp;<span class="ident" id="5926300">base</span>&nbsp;<span class="op" id="5926305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926311">t</span>&nbsp;<span class="op" id="5926313">:=</span>&nbsp;<span class="ident" id="5926316">k</span>&nbsp;<span class="op" id="5926318">-</span>&nbsp;<span class="ident" id="5926320">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926329">if</span>&nbsp;<span class="ident" id="5926332">t</span>&nbsp;<span class="op" id="5926334">&lt;</span>&nbsp;<span class="ident" id="5926336">tmin</span>&nbsp;<span class="op" id="5926341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926348">t</span>&nbsp;<span class="op" id="5926350">=</span>&nbsp;<span class="ident" id="5926352">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926361">}</span>&nbsp;<span class="keyword" id="5926363">else</span>&nbsp;<span class="keyword" id="5926368">if</span>&nbsp;<span class="ident" id="5926371">t</span>&nbsp;<span class="op" id="5926373">&gt;</span>&nbsp;<span class="ident" id="5926375">tmax</span>&nbsp;<span class="op" id="5926380">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926387">t</span>&nbsp;<span class="op" id="5926389">=</span>&nbsp;<span class="ident" id="5926391">tmax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926406">if</span>&nbsp;<span class="ident" id="5926409">q</span>&nbsp;<span class="op" id="5926411">&lt;</span>&nbsp;<span class="ident" id="5926413">t</span>&nbsp;<span class="op" id="5926415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926422">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926432">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926438">output</span>&nbsp;<span class="op" id="5926445">=</span>&nbsp;<span class="builtinfunc" id="5926447">append</span><span class="op" id="5926453">(</span><span class="ident" id="5926454">output</span><span class="op" id="5926460">,</span>&nbsp;<span class="ident" id="5926462">encodeDigit</span><span class="op" id="5926473">(</span><span class="ident" id="5926474">t</span><span class="op" id="5926475">+</span><span class="op" id="5926476">(</span><span class="ident" id="5926477">q</span><span class="op" id="5926478">-</span><span class="ident" id="5926479">t</span><span class="op" id="5926480">)</span><span class="op" id="5926481">%</span><span class="op" id="5926482">(</span><span class="ident" id="5926483">base</span><span class="op" id="5926487">-</span><span class="ident" id="5926488">t</span><span class="op" id="5926489">)</span><span class="op" id="5926490">)</span><span class="op" id="5926491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926497">q</span>&nbsp;<span class="op" id="5926499">=</span>&nbsp;<span class="op" id="5926501">(</span><span class="ident" id="5926502">q</span>&nbsp;<span class="op" id="5926504">-</span>&nbsp;<span class="ident" id="5926506">t</span><span class="op" id="5926507">)</span>&nbsp;<span class="op" id="5926509">/</span>&nbsp;<span class="op" id="5926511">(</span><span class="ident" id="5926512">base</span>&nbsp;<span class="op" id="5926517">-</span>&nbsp;<span class="ident" id="5926519">t</span><span class="op" id="5926520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926530">output</span>&nbsp;<span class="op" id="5926537">=</span>&nbsp;<span class="builtinfunc" id="5926539">append</span><span class="op" id="5926545">(</span><span class="ident" id="5926546">output</span><span class="op" id="5926552">,</span>&nbsp;<span class="ident" id="5926554">encodeDigit</span><span class="op" id="5926565">(</span><span class="ident" id="5926566">q</span><span class="op" id="5926567">)</span><span class="op" id="5926568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926573">bias</span>&nbsp;<span class="op" id="5926578">=</span>&nbsp;<span class="ident" id="5926580">adapt</span><span class="op" id="5926585">(</span><span class="ident" id="5926586">delta</span><span class="op" id="5926591">,</span>&nbsp;<span class="ident" id="5926593">h</span><span class="op" id="5926594">+</span><span class="num" id="5926595">1</span><span class="op" id="5926596">,</span>&nbsp;<span class="ident" id="5926598">h</span>&nbsp;<span class="op" id="5926600">==</span>&nbsp;<span class="ident" id="5926603">b</span><span class="op" id="5926604">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926609">delta</span>&nbsp;<span class="op" id="5926615">=</span>&nbsp;<span class="num" id="5926617">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926622">h</span><span class="op" id="5926623">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926629">remaining</span><span class="op" id="5926638">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926647">delta</span><span class="op" id="5926652">++</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926657">n</span><span class="op" id="5926658">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926665">return</span>&nbsp;<span class="builtintype" id="5926672">string</span><span class="op" id="5926678">(</span><span class="ident" id="5926679">output</span><span class="op" id="5926685">)</span><span class="op" id="5926686">,</span>&nbsp;<span class="ident" id="5926688">nil</span><br>
<span class="lineno"></span><span class="op" id="5926692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="5926695">func</span>&nbsp;<span class="ident" id="5926700">encodeDigit</span><span class="op" id="5926711">(</span><span class="ident" id="5926712">digit</span>&nbsp;<span class="builtintype" id="5926718">int32</span><span class="op" id="5926723">)</span>&nbsp;<span class="builtintype" id="5926725">byte</span>&nbsp;<span class="op" id="5926730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926733">switch</span>&nbsp;<span class="op" id="5926740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926743">case</span>&nbsp;<span class="num" id="5926748">0</span>&nbsp;<span class="op" id="5926750">&lt;=</span>&nbsp;<span class="ident" id="5926753">digit</span>&nbsp;<span class="op" id="5926759">&amp;&amp;</span>&nbsp;<span class="ident" id="5926762">digit</span>&nbsp;<span class="op" id="5926768">&lt;</span>&nbsp;<span class="num" id="5926770">26</span><span class="op" id="5926772">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926776">return</span>&nbsp;<span class="builtintype" id="5926783">byte</span><span class="op" id="5926787">(</span><span class="ident" id="5926788">digit</span>&nbsp;<span class="op" id="5926794">+</span>&nbsp;<span class="string" id="5926796">&#39;a&#39;</span><span class="op" id="5926799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926802">case</span>&nbsp;<span class="num" id="5926807">26</span>&nbsp;<span class="op" id="5926810">&lt;=</span>&nbsp;<span class="ident" id="5926813">digit</span>&nbsp;<span class="op" id="5926819">&amp;&amp;</span>&nbsp;<span class="ident" id="5926822">digit</span>&nbsp;<span class="op" id="5926828">&lt;</span>&nbsp;<span class="num" id="5926830">36</span><span class="op" id="5926832">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926836">return</span>&nbsp;<span class="builtintype" id="5926843">byte</span><span class="op" id="5926847">(</span><span class="ident" id="5926848">digit</span>&nbsp;<span class="op" id="5926854">+</span>&nbsp;<span class="op" id="5926856">(</span><span class="string" id="5926857">&#39;0&#39;</span>&nbsp;<span class="op" id="5926861">-</span>&nbsp;<span class="num" id="5926863">26</span><span class="op" id="5926865">)</span><span class="op" id="5926866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5926872">panic</span><span class="op" id="5926877">(</span><span class="string" id="5926878">&#34;cookiejar:&nbsp;internal&nbsp;error&nbsp;in&nbsp;punycode&nbsp;encoding&#34;</span><span class="op" id="5926926">)</span><br>
<span class="lineno"></span><span class="op" id="5926928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="5926931">//&nbsp;adapt&nbsp;is&nbsp;the&nbsp;bias&nbsp;adaptation&nbsp;function&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.1.</span><br>
<span class="lineno"></span><span class="keyword" id="5926998">func</span>&nbsp;<span class="ident" id="5927003">adapt</span><span class="op" id="5927008">(</span><span class="ident" id="5927009">delta</span><span class="op" id="5927014">,</span>&nbsp;<span class="ident" id="5927016">numPoints</span>&nbsp;<span class="builtintype" id="5927026">int32</span><span class="op" id="5927031">,</span>&nbsp;<span class="ident" id="5927033">firstTime</span>&nbsp;<span class="builtintype" id="5927043">bool</span><span class="op" id="5927047">)</span>&nbsp;<span class="builtintype" id="5927049">int32</span>&nbsp;<span class="op" id="5927055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927058">if</span>&nbsp;<span class="ident" id="5927061">firstTime</span>&nbsp;<span class="op" id="5927071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5927075">delta</span>&nbsp;<span class="op" id="5927081">/=</span>&nbsp;<span class="ident" id="5927084">damp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5927090">}</span>&nbsp;<span class="keyword" id="5927092">else</span>&nbsp;<span class="op" id="5927097">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5927101">delta</span>&nbsp;<span class="op" id="5927107">/=</span>&nbsp;<span class="num" id="5927110">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5927113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5927116">delta</span>&nbsp;<span class="op" id="5927122">+=</span>&nbsp;<span class="ident" id="5927125">delta</span>&nbsp;<span class="op" id="5927131">/</span>&nbsp;<span class="ident" id="5927133">numPoints</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5927144">k</span>&nbsp;<span class="op" id="5927146">:=</span>&nbsp;<span class="builtintype" id="5927149">int32</span><span class="op" id="5927154">(</span><span class="num" id="5927155">0</span><span class="op" id="5927156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927159">for</span>&nbsp;<span class="ident" id="5927163">delta</span>&nbsp;<span class="op" id="5927169">&gt;</span>&nbsp;<span class="op" id="5927171">(</span><span class="op" id="5927172">(</span><span class="ident" id="5927173">base</span><span class="op" id="5927177">-</span><span class="ident" id="5927178">tmin</span><span class="op" id="5927182">)</span><span class="op" id="5927183">*</span><span class="ident" id="5927184">tmax</span><span class="op" id="5927188">)</span><span class="op" id="5927189">/</span><span class="num" id="5927190">2</span>&nbsp;<span class="op" id="5927192">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5927196">delta</span>&nbsp;<span class="op" id="5927202">/=</span>&nbsp;<span class="ident" id="5927205">base</span>&nbsp;<span class="op" id="5927210">-</span>&nbsp;<span class="ident" id="5927212">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5927219">k</span>&nbsp;<span class="op" id="5927221">+=</span>&nbsp;<span class="ident" id="5927224">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5927230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927233">return</span>&nbsp;<span class="ident" id="5927240">k</span>&nbsp;<span class="op" id="5927242">+</span>&nbsp;<span class="op" id="5927244">(</span><span class="ident" id="5927245">base</span><span class="op" id="5927249">-</span><span class="ident" id="5927250">tmin</span><span class="op" id="5927254">+</span><span class="num" id="5927255">1</span><span class="op" id="5927256">)</span><span class="op" id="5927257">*</span><span class="ident" id="5927258">delta</span><span class="op" id="5927263">/</span><span class="op" id="5927264">(</span><span class="ident" id="5927265">delta</span><span class="op" id="5927270">+</span><span class="ident" id="5927271">skew</span><span class="op" id="5927275">)</span><br>
<span class="lineno"></span><span class="op" id="5927277">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="5927280">//&nbsp;Strictly&nbsp;speaking,&nbsp;the&nbsp;remaining&nbsp;code&nbsp;below&nbsp;deals&nbsp;with&nbsp;IDNA&nbsp;(RFC&nbsp;5890&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5927357">//&nbsp;friends)&nbsp;and&nbsp;not&nbsp;Punycode&nbsp;(RFC&nbsp;3492)&nbsp;per&nbsp;se.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5927406">//&nbsp;acePrefix&nbsp;is&nbsp;the&nbsp;ASCII&nbsp;Compatible&nbsp;Encoding&nbsp;prefix.</span><br>
<span class="lineno">130</span><span class="keyword" id="5927460">const</span>&nbsp;<span class="ident" id="5927466">acePrefix</span>&nbsp;<span class="op" id="5927476">=</span>&nbsp;<span class="string" id="5927478">&#34;xn--&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5927486">//&nbsp;toASCII&nbsp;converts&nbsp;a&nbsp;domain&nbsp;or&nbsp;domain&nbsp;label&nbsp;to&nbsp;its&nbsp;ASCII&nbsp;form.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="5927563">//&nbsp;toASCII(&#34;b√ºcher.example.com&#34;)&nbsp;is&nbsp;&#34;xn--bcher-kva.example.com&#34;,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5927633">//&nbsp;toASCII(&#34;golang&#34;)&nbsp;is&nbsp;&#34;golang&#34;.</span><br>
<span class="lineno">135</span><span class="keyword" id="5927667">func</span>&nbsp;<span class="ident" id="5927672">toASCII</span><span class="op" id="5927679">(</span><span class="ident" id="5927680">s</span>&nbsp;<span class="builtintype" id="5927682">string</span><span class="op" id="5927688">)</span>&nbsp;<span class="op" id="5927690">(</span><span class="builtintype" id="5927691">string</span><span class="op" id="5927697">,</span>&nbsp;<span class="builtintype" id="5927699">error</span><span class="op" id="5927704">)</span>&nbsp;<span class="op" id="5927706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927709">if</span>&nbsp;<span class="ident" id="5927712">ascii</span><span class="op" id="5927717">(</span><span class="ident" id="5927718">s</span><span class="op" id="5927719">)</span>&nbsp;<span class="op" id="5927721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927725">return</span>&nbsp;<span class="ident" id="5927732">s</span><span class="op" id="5927733">,</span>&nbsp;<span class="ident" id="5927735">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5927740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5927743">labels</span>&nbsp;<span class="op" id="5927750">:=</span>&nbsp;<span class="ident" id="5927753">strings</span><span class="op" id="5927760">.</span><span class="ident" id="5927761">Split</span><span class="op" id="5927766">(</span><span class="ident" id="5927767">s</span><span class="op" id="5927768">,</span>&nbsp;<span class="string" id="5927770">&#34;.&#34;</span><span class="op" id="5927773">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927776">for</span>&nbsp;<span class="ident" id="5927780">i</span><span class="op" id="5927781">,</span>&nbsp;<span class="ident" id="5927783">label</span>&nbsp;<span class="op" id="5927789">:=</span>&nbsp;<span class="keyword" id="5927792">range</span>&nbsp;<span class="ident" id="5927798">labels</span>&nbsp;<span class="op" id="5927805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927809">if</span>&nbsp;<span class="op" id="5927812">!</span><span class="ident" id="5927813">ascii</span><span class="op" id="5927818">(</span><span class="ident" id="5927819">label</span><span class="op" id="5927824">)</span>&nbsp;<span class="op" id="5927826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5927831">a</span><span class="op" id="5927832">,</span>&nbsp;<span class="ident" id="5927834">err</span>&nbsp;<span class="op" id="5927838">:=</span>&nbsp;<span class="ident" id="5927841">encode</span><span class="op" id="5927847">(</span><span class="ident" id="5927848">acePrefix</span><span class="op" id="5927857">,</span>&nbsp;<span class="ident" id="5927859">label</span><span class="op" id="5927864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927869">if</span>&nbsp;<span class="ident" id="5927872">err</span>&nbsp;<span class="op" id="5927876">!=</span>&nbsp;<span class="ident" id="5927879">nil</span>&nbsp;<span class="op" id="5927883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927889">return</span>&nbsp;<span class="string" id="5927896">&#34;&#34;</span><span class="op" id="5927898">,</span>&nbsp;<span class="ident" id="5927900">err</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5927907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5927912">labels</span><span class="op" id="5927918">[</span><span class="ident" id="5927919">i</span><span class="op" id="5927920">]</span>&nbsp;<span class="op" id="5927922">=</span>&nbsp;<span class="ident" id="5927924">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5927928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5927931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927934">return</span>&nbsp;<span class="ident" id="5927941">strings</span><span class="op" id="5927948">.</span><span class="ident" id="5927949">Join</span><span class="op" id="5927953">(</span><span class="ident" id="5927954">labels</span><span class="op" id="5927960">,</span>&nbsp;<span class="string" id="5927962">&#34;.&#34;</span><span class="op" id="5927965">)</span><span class="op" id="5927966">,</span>&nbsp;<span class="ident" id="5927968">nil</span><br>
<span class="lineno">150</span><span class="op" id="5927972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5927975">func</span>&nbsp;<span class="ident" id="5927980">ascii</span><span class="op" id="5927985">(</span><span class="ident" id="5927986">s</span>&nbsp;<span class="builtintype" id="5927988">string</span><span class="op" id="5927994">)</span>&nbsp;<span class="builtintype" id="5927996">bool</span>&nbsp;<span class="op" id="5928001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928004">for</span>&nbsp;<span class="ident" id="5928008">i</span>&nbsp;<span class="op" id="5928010">:=</span>&nbsp;<span class="num" id="5928013">0</span><span class="op" id="5928014">;</span>&nbsp;<span class="ident" id="5928016">i</span>&nbsp;<span class="op" id="5928018">&lt;</span>&nbsp;<span class="builtinfunc" id="5928020">len</span><span class="op" id="5928023">(</span><span class="ident" id="5928024">s</span><span class="op" id="5928025">)</span><span class="op" id="5928026">;</span>&nbsp;<span class="ident" id="5928028">i</span><span class="op" id="5928029">++</span>&nbsp;<span class="op" id="5928032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928036">if</span>&nbsp;<span class="ident" id="5928039">s</span><span class="op" id="5928040">[</span><span class="ident" id="5928041">i</span><span class="op" id="5928042">]</span>&nbsp;<span class="op" id="5928044">&gt;=</span>&nbsp;<span class="ident" id="5928047">utf8</span><span class="op" id="5928051">.</span><span class="ident" id="5928052">RuneSelf</span>&nbsp;<span class="op" id="5928061">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928066">return</span>&nbsp;<span class="builtintype" id="5928073">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5928081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5928084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928087">return</span>&nbsp;<span class="builtintype" id="5928094">true</span><br>
<span class="lineno"></span><span class="op" id="5928099">}</span>
</div>
</body>
</html>
