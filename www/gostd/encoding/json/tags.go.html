<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4955379">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4955434">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4955488">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4955539">package</span>&nbsp;<span class="ident" id="4955547">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4955553">import</span>&nbsp;<span class="op" id="4955560">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4955563">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="4955573">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="4955576">//&nbsp;tagOptions&nbsp;is&nbsp;the&nbsp;string&nbsp;following&nbsp;a&nbsp;comma&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;&#34;json&#34;</span><br>
<span class="lineno"></span><span class="comment" id="4955649">//&nbsp;tag,&nbsp;or&nbsp;the&nbsp;empty&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;leading&nbsp;comma.</span><br>
<span class="lineno"></span><span class="keyword" id="4955717">type</span>&nbsp;<span class="ident" id="4955722">tagOptions</span>&nbsp;<span class="builtintype" id="4955733">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4955741">//&nbsp;parseTag&nbsp;splits&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;json&nbsp;tag&nbsp;into&nbsp;its&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4955804">//&nbsp;comma-separated&nbsp;options.</span><br>
<span class="lineno"></span><span class="keyword" id="4955832">func</span>&nbsp;<span class="ident" id="4955837">parseTag</span><span class="op" id="4955845">(</span><span class="ident" id="4955846">tag</span>&nbsp;<span class="builtintype" id="4955850">string</span><span class="op" id="4955856">)</span>&nbsp;<span class="op" id="4955858">(</span><span class="builtintype" id="4955859">string</span><span class="op" id="4955865">,</span>&nbsp;<span class="ident" id="4955867">tagOptions</span><span class="op" id="4955877">)</span>&nbsp;<span class="op" id="4955879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4955882">if</span>&nbsp;<span class="ident" id="4955885">idx</span>&nbsp;<span class="op" id="4955889">:=</span>&nbsp;<span class="ident" id="4955892">strings</span><span class="op" id="4955899">.</span><span class="ident" id="4955900">Index</span><span class="op" id="4955905">(</span><span class="ident" id="4955906">tag</span><span class="op" id="4955909">,</span>&nbsp;<span class="string" id="4955911">&#34;,&#34;</span><span class="op" id="4955914">)</span><span class="op" id="4955915">;</span>&nbsp;<span class="ident" id="4955917">idx</span>&nbsp;<span class="op" id="4955921">!=</span>&nbsp;<span class="op" id="4955924">-</span><span class="num" id="4955925">1</span>&nbsp;<span class="op" id="4955927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4955931">return</span>&nbsp;<span class="ident" id="4955938">tag</span><span class="op" id="4955941">[</span><span class="op" id="4955942">:</span><span class="ident" id="4955943">idx</span><span class="op" id="4955946">]</span><span class="op" id="4955947">,</span>&nbsp;<span class="ident" id="4955949">tagOptions</span><span class="op" id="4955959">(</span><span class="ident" id="4955960">tag</span><span class="op" id="4955963">[</span><span class="ident" id="4955964">idx</span><span class="op" id="4955967">+</span><span class="num" id="4955968">1</span><span class="op" id="4955969">:</span><span class="op" id="4955970">]</span><span class="op" id="4955971">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4955974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4955977">return</span>&nbsp;<span class="ident" id="4955984">tag</span><span class="op" id="4955987">,</span>&nbsp;<span class="ident" id="4955989">tagOptions</span><span class="op" id="4955999">(</span><span class="string" id="4956000">&#34;&#34;</span><span class="op" id="4956002">)</span><br>
<span class="lineno"></span><span class="op" id="4956004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4956007">//&nbsp;Contains&nbsp;reports&nbsp;whether&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;options</span><br>
<span class="lineno">25</span><span class="comment" id="4956069">//&nbsp;contains&nbsp;a&nbsp;particular&nbsp;substr&nbsp;flag.&nbsp;substr&nbsp;must&nbsp;be&nbsp;surrounded&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4956138">//&nbsp;string&nbsp;boundary&nbsp;or&nbsp;commas.</span><br>
<span class="lineno"></span><span class="keyword" id="4956168">func</span>&nbsp;<span class="op" id="4956173">(</span><span class="ident" id="4956174">o</span>&nbsp;<span class="ident" id="4956176">tagOptions</span><span class="op" id="4956186">)</span>&nbsp;<span class="ident" id="4956188">Contains</span><span class="op" id="4956196">(</span><span class="ident" id="4956197">optionName</span>&nbsp;<span class="builtintype" id="4956208">string</span><span class="op" id="4956214">)</span>&nbsp;<span class="builtintype" id="4956216">bool</span>&nbsp;<span class="op" id="4956221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4956224">if</span>&nbsp;<span class="builtinfunc" id="4956227">len</span><span class="op" id="4956230">(</span><span class="ident" id="4956231">o</span><span class="op" id="4956232">)</span>&nbsp;<span class="op" id="4956234">==</span>&nbsp;<span class="num" id="4956237">0</span>&nbsp;<span class="op" id="4956239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4956243">return</span>&nbsp;<span class="builtintype" id="4956250">false</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4956257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4956260">s</span>&nbsp;<span class="op" id="4956262">:=</span>&nbsp;<span class="builtintype" id="4956265">string</span><span class="op" id="4956271">(</span><span class="ident" id="4956272">o</span><span class="op" id="4956273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4956276">for</span>&nbsp;<span class="ident" id="4956280">s</span>&nbsp;<span class="op" id="4956282">!=</span>&nbsp;<span class="string" id="4956285">&#34;&#34;</span>&nbsp;<span class="op" id="4956288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4956292">var</span>&nbsp;<span class="ident" id="4956296">next</span>&nbsp;<span class="builtintype" id="4956301">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4956310">i</span>&nbsp;<span class="op" id="4956312">:=</span>&nbsp;<span class="ident" id="4956315">strings</span><span class="op" id="4956322">.</span><span class="ident" id="4956323">Index</span><span class="op" id="4956328">(</span><span class="ident" id="4956329">s</span><span class="op" id="4956330">,</span>&nbsp;<span class="string" id="4956332">&#34;,&#34;</span><span class="op" id="4956335">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4956339">if</span>&nbsp;<span class="ident" id="4956342">i</span>&nbsp;<span class="op" id="4956344">&gt;=</span>&nbsp;<span class="num" id="4956347">0</span>&nbsp;<span class="op" id="4956349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4956354">s</span><span class="op" id="4956355">,</span>&nbsp;<span class="ident" id="4956357">next</span>&nbsp;<span class="op" id="4956362">=</span>&nbsp;<span class="ident" id="4956364">s</span><span class="op" id="4956365">[</span><span class="op" id="4956366">:</span><span class="ident" id="4956367">i</span><span class="op" id="4956368">]</span><span class="op" id="4956369">,</span>&nbsp;<span class="ident" id="4956371">s</span><span class="op" id="4956372">[</span><span class="ident" id="4956373">i</span><span class="op" id="4956374">+</span><span class="num" id="4956375">1</span><span class="op" id="4956376">:</span><span class="op" id="4956377">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4956381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4956385">if</span>&nbsp;<span class="ident" id="4956388">s</span>&nbsp;<span class="op" id="4956390">==</span>&nbsp;<span class="ident" id="4956393">optionName</span>&nbsp;<span class="op" id="4956404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4956409">return</span>&nbsp;<span class="builtintype" id="4956416">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4956423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4956427">s</span>&nbsp;<span class="op" id="4956429">=</span>&nbsp;<span class="ident" id="4956431">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4956437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4956440">return</span>&nbsp;<span class="builtintype" id="4956447">false</span><br>
<span class="lineno"></span><span class="op" id="4956453">}</span>
</div>
</body>
</html>
